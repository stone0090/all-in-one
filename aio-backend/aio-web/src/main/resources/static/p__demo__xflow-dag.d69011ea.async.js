(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+A2u":function(le,P){le.exports=h;function h(I,m,_){return I[0]=Math.max(m[0],_[0]),I[1]=Math.max(m[1],_[1]),I}},"+RHd":function(le,P){},"+gMA":function(le,P,h){"use strict";h.r(P),h.d(P,"Demo",function(){return On});var I=h("qLMh"),m=h("9og8"),_=h("q1tI"),M=h.n(_),A=h("9niD"),G="DND_NDOE",R="GROUP_NODE_RENDER_ID",X=180,W=36,Y=h("VA6q"),K=h("2BaD"),ne=h("Ue1A"),ae=h("RCxd"),te=h("+YFz"),ce=h("26re"),ee=h("F7vQ"),H=h("nKUr"),se={fontSize:"16px",color:"#3057e3"},re=function(jt){if(jt.hide)return null;switch(jt.status){case A.t.StatusEnum.PROCESSING:return Object(H.jsx)(Y.a,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case A.t.StatusEnum.ERROR:return Object(H.jsx)(K.a,{style:{color:"#ff4d4f",fontSize:"16px"}});case A.t.StatusEnum.SUCCESS:return Object(H.jsx)(ne.a,{style:{color:"#39ca74cc",fontSize:"16px"}});case A.t.StatusEnum.WARNING:return Object(H.jsx)(ae.a,{style:{color:"#faad14",fontSize:"16px"}});case A.t.StatusEnum.DEFAULT:return Object(H.jsx)(te.a,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},q=function(jt){return Object(H.jsxs)("div",{className:"xflow-algo-node ".concat(jt.isNodeTreePanel?"panel-node":""),children:[Object(H.jsx)("span",{className:"icon",children:Object(H.jsx)(ce.a,{style:se})}),Object(H.jsx)("span",{className:"label",children:jt.data.label}),Object(H.jsx)("span",{className:"status",children:Object(H.jsx)(re,{status:jt.data&&jt.data.status,hide:jt.isNodeTreePanel})})]})},ye=h("xGfz"),ue=h("gUdW"),ve=h("G9t4"),pe=function(jt){var Bn=jt.cell,pn=Object(A.J)(),on=jt.data.isCollapsed||!1,qt=function(){pn.executeCommand(A.z.COLLAPSE_GROUP.id,{nodeId:Bn.id,isCollapsed:!1,collapsedSize:{width:200,height:40}})},mn=function(){pn.executeCommand(A.z.COLLAPSE_GROUP.id,{nodeId:Bn.id,isCollapsed:!0,collapsedSize:{width:200,height:40},gap:3})};return Object(H.jsx)("div",{className:"xflow-group-node",children:Object(H.jsxs)("div",{className:"xflow-group-header",children:[Object(H.jsx)("div",{className:"header-left",children:jt.data.label}),Object(H.jsxs)("div",{className:"header-right",children:[on&&Object(H.jsx)(ye.a,{onClick:qt}),!on&&Object(H.jsx)(ue.a,{onClick:mn})]})]})})},L=Object(A.E)(function(It,jt){var Bn=jt.getValue();console.log("get main props",Bn),It.setRegisterHook(function(pn){var on=[pn.reactNodeRender.registerHook({name:"add react node",handler:function(){var mn=Object(m.a)(Object(I.a)().mark(function hr(Nn){return Object(I.a)().wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:Nn.set(G,q),Nn.set(R,pe);case 2:case"end":return Er.stop()}},hr)}));function vn(hr){return mn.apply(this,arguments)}return vn}()}),pn.graphOptions.registerHook({name:"custom-x6-options",after:"dag-extension-x6-options",handler:function(){var mn=Object(m.a)(Object(I.a)().mark(function hr(Nn){return Object(I.a)().wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:Nn.grid=!1,Nn.keyboard={enabled:!0};case 2:case"end":return Er.stop()}},hr)}));function vn(hr){return mn.apply(this,arguments)}return vn}()}),pn.x6Events.registerHook({name:"add",handler:function(){var mn=Object(m.a)(Object(I.a)().mark(function hr(Nn){return Object(I.a)().wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:Nn.push({eventName:"node:moved",callback:function(xr,Vr){var La=xr.node;Vr.executeCommand(A.A.MOVE_NODE.id,{id:La.id,position:La.getPosition()})}});case 1:case"end":return Er.stop()}},hr)}));function vn(hr){return mn.apply(this,arguments)}return vn}()})],qt=new A.i;return qt.pushAll(on),qt})}),ge=h("k1fw"),_e=h("tJVT"),Te;(function(It){var jt=It.NODE_COMMON_PROPS={renderKey:G,width:X,height:W},Bn=It.queryGraphMeta=function(){var Pr=Object(m.a)(Object(I.a)().mark(function Zr(wr){return Object(I.a)().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return console.log("queryMeta",wr),Dr.abrupt("return",Object(ge.a)(Object(ge.a)({},wr),{},{flowId:wr.meta.flowId}));case 2:case"end":return Dr.stop()}},Zr)}));return function(Zr){return Pr.apply(this,arguments)}}(),pn=It.loadGraphData=function(){var Pr=Object(m.a)(Object(I.a)().mark(function Zr(wr){var ea,Dr;return Object(I.a)().wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return ea=[Object(ge.a)(Object(ge.a)({},jt),{},{id:"node1",label:"\u7B97\u6CD5\u8282\u70B9-1",ports:[{id:"node1-input-1",type:A.s.AnchorType.INPUT,group:A.s.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869"},{id:"node1-output-1",type:A.s.AnchorType.OUTPUT,group:A.s.AnchorGroup.BOTTOM,tooltip:"\u8F93\u51FA\u6869"}]}),Object(ge.a)(Object(ge.a)({},jt),{},{id:"node2",label:"\u7B97\u6CD5\u8282\u70B9-2",ports:[{id:"node2-input-1",type:A.s.AnchorType.INPUT,group:A.s.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869",connected:!0},{id:"node2-output-1",type:A.s.AnchorType.OUTPUT,group:A.s.AnchorGroup.BOTTOM,tooltip:"\u8F93\u51FA\u6869"}]}),Object(ge.a)(Object(ge.a)({},jt),{},{id:"node3",label:"\u7B97\u6CD5\u8282\u70B9-3",ports:[{id:"node3-input-1",type:A.s.AnchorType.INPUT,group:A.s.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869",connected:!0},{id:"node3-output-1",type:A.s.AnchorType.OUTPUT,group:A.s.AnchorGroup.BOTTOM,tooltip:"\u8F93\u51FA\u6869"}]}),Object(ge.a)(Object(ge.a)({},jt),{},{id:"node4",label:"\u7B97\u6CD5\u8282\u70B9-4",ports:[{id:"node4-input-1",type:A.s.AnchorType.INPUT,group:A.s.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u6869",connected:!0},{id:"node4-output-1",type:A.s.AnchorType.OUTPUT,group:A.s.AnchorGroup.BOTTOM,tooltip:"\u8F93\u51FA\u6869"}]})],Dr=[{id:Object(A.K)(),source:"node1",target:"node2",sourcePortId:"node1-output-1",targetPortId:"node2-input-1"},{id:Object(A.K)(),source:"node1",target:"node3",sourcePortId:"node1-output-1",targetPortId:"node3-input-1"},{id:Object(A.K)(),source:"node1",target:"node4",sourcePortId:"node1-output-1",targetPortId:"node4-input-1"}],ma.abrupt("return",{nodes:ea,edges:Dr});case 3:case"end":return ma.stop()}},Zr)}));return function(Zr){return Pr.apply(this,arguments)}}(),on=It.saveGraphData=function(){var Pr=Object(m.a)(Object(I.a)().mark(function Zr(wr,ea){return Object(I.a)().wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:return console.log("saveGraphData api",wr,ea),ha.abrupt("return",{success:!0,data:ea});case 2:case"end":return ha.stop()}},Zr)}));return function(Zr,wr){return Pr.apply(this,arguments)}}(),qt=It.deployDagService=function(){var Pr=Object(m.a)(Object(I.a)().mark(function Zr(wr,ea){return Object(I.a)().wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:return console.log("deployService api",wr,ea),ha.abrupt("return",{success:!0,data:ea});case 2:case"end":return ha.stop()}},Zr)}));return function(Zr,wr){return Pr.apply(this,arguments)}}(),mn=It.addNode=function(){var Pr=Object(m.a)(Object(I.a)().mark(function Zr(wr){var ea,Dr,ha,ma,Ui,Mo,uu,ho;return Object(I.a)().wrap(function(Rs){for(;;)switch(Rs.prev=Rs.next){case 0:return console.info("addNode service running, add node:",wr),ea=[{type:A.s.AnchorType.INPUT,group:A.s.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u68691"},{type:A.s.AnchorType.INPUT,group:A.s.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u68692"},{type:A.s.AnchorType.INPUT,group:A.s.AnchorGroup.TOP,tooltip:"\u8F93\u5165\u68693"},{type:A.s.AnchorType.OUTPUT,group:A.s.AnchorGroup.BOTTOM,tooltip:"\u8F93\u51FA\u6869"}],Dr=wr.nodeConfig,ha=Dr.id,ma=Dr.ports,Ui=ma===void 0?ea:ma,Mo=Dr.groupChildren,uu=ha||Object(A.K)(),ho=Object(ge.a)(Object(ge.a)(Object(ge.a)({},jt),wr.nodeConfig),{},{id:uu,ports:Ui.map(function(Xu){return Object(ge.a)(Object(ge.a)({},Xu),{},{id:Object(A.K)()})})}),Mo&&Mo.length&&(ho.ports=[]),Rs.abrupt("return",ho);case 7:case"end":return Rs.stop()}},Zr)}));return function(Zr){return Pr.apply(this,arguments)}}(),vn=It.renameNode=function(){var Pr=Object(m.a)(Object(I.a)().mark(function Zr(wr,ea,Dr){return Object(I.a)().wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return console.log("rename node",ea,wr,Dr),ma.abrupt("return",{err:null,nodeName:wr});case 2:case"end":return ma.stop()}},Zr)}));return function(Zr,wr,ea){return Pr.apply(this,arguments)}}(),hr=It.delNode=function(){var Pr=Object(m.a)(Object(I.a)().mark(function Zr(wr){return Object(I.a)().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return console.info("delNode service running, del node:",wr.nodeConfig.id),Dr.abrupt("return",!0);case 2:case"end":return Dr.stop()}},Zr)}));return function(Zr){return Pr.apply(this,arguments)}}(),Nn=It.addEdge=function(){var Pr=Object(m.a)(Object(I.a)().mark(function Zr(wr){var ea;return Object(I.a)().wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:return console.info("addEdge service running, add edge:",wr),ea=wr.edgeConfig,ha.abrupt("return",Object(ge.a)(Object(ge.a)({},ea),{},{id:Object(A.K)()}));case 3:case"end":return ha.stop()}},Zr)}));return function(Zr){return Pr.apply(this,arguments)}}(),Nr=It.delEdge=function(){var Pr=Object(m.a)(Object(I.a)().mark(function Zr(wr){return Object(I.a)().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return console.info("delEdge service running, del edge:",wr),Dr.abrupt("return",!0);case 2:case"end":return Dr.stop()}},Zr)}));return function(Zr){return Pr.apply(this,arguments)}}(),Er=0,Rr={},xr=A.t.StatusEnum.DEFAULT,Vr=It.graphStatusService=Object(m.a)(Object(I.a)().mark(function Pr(){return Object(I.a)().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return Er<4?(Rr["node".concat(Er)]={status:A.t.StatusEnum.SUCCESS},Rr["node".concat(Er+1)]={status:A.t.StatusEnum.PROCESSING},Er+=1,xr=A.t.StatusEnum.PROCESSING):(Er=0,Rr.node4={status:A.t.StatusEnum.SUCCESS},xr=A.t.StatusEnum.SUCCESS),wr.abrupt("return",{graphStatus:xr,statusMap:Rr});case 2:case"end":return wr.stop()}},Pr)})),La=It.stopGraphStatusService=Object(m.a)(Object(I.a)().mark(function Pr(){return Object(I.a)().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:return Object.entries(Rr).forEach(function(ea){var Dr=Object(_e.a)(ea,2),ha=Dr[1],ma=ha,Ui=ma.status;Ui===A.t.StatusEnum.PROCESSING&&(ha.status=A.t.StatusEnum.ERROR)}),wr.abrupt("return",{graphStatus:A.t.StatusEnum.ERROR,statusMap:Rr});case 2:case"end":return wr.stop()}},Pr)}))})(Te||(Te={}));var we=h("dO6L"),Qe=h("fWQN"),D=h("mtLc"),Ue=h("VIWh"),Ct=h("iceA"),ut;(function(It){var jt="\u8282\u70B9\u64CD\u4F5C",Bn=It.TEST_ASYNC_CMD={id:"xflow:async-cmd",label:"\u5F02\u6B65\u8BF7\u6C42",category:jt},pn=It.SHOW_RENAME_MODAL={id:"xflow:rename-node-modal",label:"\u6253\u5F00\u91CD\u547D\u540D\u5F39\u7A97",category:jt},on=It.DEPLOY_SERVICE={id:"xflow:deploy-service",label:"\u90E8\u7F72\u670D\u52A1",category:jt}})(ut||(ut={}));var Nt,Kt,Je,Vt,Be,ie,un=A.p.inject,rn=A.p.injectable,rr;(function(It){var jt=It.command=ut.TEST_ASYNC_CMD,Bn=It.hookKey="testCmd"})(rr||(rr={}));var Pt=(Nt=rn(),Kt=un(A.k),Je=Reflect.metadata("design:type",Object),Nt(Vt=(Be=function(){function It(){var jt=this;Object(Qe.a)(this,It),Object(we.a)(this,"contextProvider",ie,this),this.execute=Object(m.a)(Object(I.a)().mark(function Bn(){var pn,on,qt,mn,vn,hr,Nn;return Object(I.a)().wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return pn=jt.contextProvider(),on=pn.getHooks(),qt=pn.getArgs(),mn=qt.args,vn=qt.hooks,Er.next=5,pn.getX6Graph();case 5:return hr=Er.sent,Er.next=8,on.testCmd.call(mn,function(){var Rr=Object(m.a)(Object(I.a)().mark(function xr(Vr){var La,Pr,Zr,wr;return Object(I.a)().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return La=Vr.commandService,Pr=Vr.modelService,Zr=Vr.graphMeta,wr=Vr.test,console.log(hr,La,Pr,Zr,wr),Dr.abrupt("return",{test:!0});case 3:case"end":return Dr.stop()}},xr)}));return function(xr){return Rr.apply(this,arguments)}}(),vn);case 8:return Nn=Er.sent,pn.setResult(Nn),Er.abrupt("return",jt);case 11:case"end":return Er.stop()}},Bn)})),this.undo=Object(m.a)(Object(I.a)().mark(function Bn(){var pn;return Object(I.a)().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return jt.isUndoable()&&(pn=jt.contextProvider(),pn.undo()),qt.abrupt("return",jt);case 2:case"end":return qt.stop()}},Bn)})),this.redo=Object(m.a)(Object(I.a)().mark(function Bn(){return Object(I.a)().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:if(jt.isUndoable()){on.next=3;break}return on.next=3,jt.execute();case 3:return on.abrupt("return",jt);case 4:case"end":return on.stop()}},Bn)}))}return Object(D.a)(It,[{key:"isUndoable",value:function(){var Bn=this.contextProvider();return Bn.isUndoable()}}]),It}(),ie=Object(Ue.a)(Be.prototype,"contextProvider",[Kt,Je],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be))||Vt),Tn,ur,Jt,fn,Mn,En,lt;(function(It){var jt=It.command=ut.DEPLOY_SERVICE,Bn=It.hookKey="deployDag"})(lt||(lt={}));var Tt=(Tn=A.p.injectable(),ur=A.p.inject(A.k),Jt=Reflect.metadata("design:type",Object),Tn(fn=(Mn=function(){function It(){var jt=this;Object(Qe.a)(this,It),Object(we.a)(this,"contextProvider",En,this),this.execute=Object(m.a)(Object(I.a)().mark(function Bn(){var pn,on,qt,mn,vn;return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:return pn=jt.contextProvider(),on=pn.getArgs(),qt=on.args,mn=pn.getHooks(),Nn.next=5,mn.deployDag.call(qt,function(){var Nr=Object(m.a)(Object(I.a)().mark(function Er(Rr){var xr,Vr;return Object(I.a)().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return xr=Rr.commandService,Vr=Rr.deployDagService,Pr.next=3,xr.executeCommand(A.y.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(){var Zr=Object(m.a)(Object(I.a)().mark(function ea(Dr,ha){return Object(I.a)().wrap(function(Ui){for(;;)switch(Ui.prev=Ui.next){case 0:return Ui.next=2,Vr(Dr,ha);case 2:case"end":return Ui.stop()}},ea)}));function wr(ea,Dr){return Zr.apply(this,arguments)}return wr}()});case 3:return Pr.abrupt("return",{success:!0});case 4:case"end":return Pr.stop()}},Er)}));return function(Er){return Nr.apply(this,arguments)}}());case 5:return vn=Nn.sent,pn.setResult(vn),Nn.abrupt("return",jt);case 8:case"end":return Nn.stop()}},Bn)})),this.undo=Object(m.a)(Object(I.a)().mark(function Bn(){var pn;return Object(I.a)().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return jt.isUndoable()&&(pn=jt.contextProvider(),pn.undo()),qt.abrupt("return",jt);case 2:case"end":return qt.stop()}},Bn)})),this.redo=Object(m.a)(Object(I.a)().mark(function Bn(){return Object(I.a)().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:if(jt.isUndoable()){on.next=3;break}return on.next=3,jt.execute();case 3:return on.abrupt("return",jt);case 4:case"end":return on.stop()}},Bn)}))}return Object(D.a)(It,[{key:"isUndoable",value:function(){var Bn=this.contextProvider();return Bn.isUndoable()}}]),It}(),En=Object(Ue.a)(Mn.prototype,"contextProvider",[ur,Jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mn))||fn),st=h("2qtc"),At=h("kLXV"),Ot=h("GNNt"),dt=h("wEI+"),at=h("5NDa"),T=h("5rEg"),bn=h("y8nQ"),an=h("Vl3Y"),Jn=h("QKg/"),Qn,De,be,Xe,Yt,ln,lr;(function(It){var jt=It.command=ut.SHOW_RENAME_MODAL,Bn=It.hookKey="renameNode"})(lr||(lr={}));var Hr=(Qn=A.p.injectable(),De=A.p.inject(A.k),be=Reflect.metadata("design:type",Object),Qn(Xe=(Yt=function(){function It(){var jt=this;Object(Qe.a)(this,It),Object(we.a)(this,"contextProvider",ln,this),this.execute=Object(m.a)(Object(I.a)().mark(function Bn(){var pn,on,qt,mn,vn,hr;return Object(I.a)().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return pn=jt.contextProvider(),on=pn.getArgs(),qt=on.args,mn=on.hooks,vn=pn.getHooks(),Nr.next=5,vn.renameNode.call(qt,function(){var Er=Object(m.a)(Object(I.a)().mark(function Rr(xr){var Vr,La,Pr,Zr,wr,ea,Dr,ha,ma,Ui,Mo;return Object(I.a)().wrap(function(ho){for(;;)switch(ho.prev=ho.next){case 0:return Vr=xr.nodeConfig,La=xr.graphMeta,Pr=xr.commandService,Zr=xr.modelService,wr=xr.updateNodeNameService,ea=Vr.label,Dr=function(){return{graphMeta:La,commandService:Pr,modelService:Zr,updateNodeNameService:wr}},ho.next=5,pn.getX6Graph();case 5:if(ha=ho.sent,ma=ha.getCellById(Vr.id),!(!ma||!ma.isNode())){ho.next=9;break}throw new Error("".concat(Vr.id," is not a valid node"));case 9:return ho.next=11,mr(Vr,Dr);case 11:if(Ui=ho.sent,!Ui){ho.next=16;break}return Mo=ma.getData(),ma.setData(Object(ge.a)(Object(ge.a)({},Mo),{},{label:Ui})),ho.abrupt("return",{err:null,preNodeName:ea,currentNodeName:Ui});case 16:return ho.abrupt("return",{err:null,preNodeName:ea,currentNodeName:""});case 17:case"end":return ho.stop()}},Rr)}));return function(Rr){return Er.apply(this,arguments)}}());case 5:return hr=Nr.sent,pn.setResult(hr),Nr.abrupt("return",jt);case 8:case"end":return Nr.stop()}},Bn)})),this.undo=Object(m.a)(Object(I.a)().mark(function Bn(){var pn;return Object(I.a)().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return jt.isUndoable()&&(pn=jt.contextProvider(),pn.undo()),qt.abrupt("return",jt);case 2:case"end":return qt.stop()}},Bn)})),this.redo=Object(m.a)(Object(I.a)().mark(function Bn(){return Object(I.a)().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:if(jt.isUndoable()){on.next=3;break}return on.next=3,jt.execute();case 3:return on.abrupt("return",jt);case 4:case"end":return on.stop()}},Bn)}))}return Object(D.a)(It,[{key:"isUndoable",value:function(){var Bn=this.contextProvider();return Bn.isUndoable()}}]),It}(),ln=Object(Ue.a)(Yt.prototype,"contextProvider",[De,be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yt))||Xe),ar={labelCol:{span:5},wrapperCol:{span:19}};function mr(It,jt){var Bn=new A.h,pn=Object(D.a)(function Nn(){Object(Qe.a)(this,Nn)});pn.modal=void 0,pn.form=void 0;var on=function(){var Nn=Object(m.a)(Object(I.a)().mark(function Nr(){var Er,Rr,xr,Vr,La,Pr,Zr,wr,ea,Dr;return Object(I.a)().wrap(function(ma){for(;;)switch(ma.prev=ma.next){case 0:return Er=pn.form,Rr=pn.modal,xr=jt(),Vr=xr.updateNodeNameService,La=xr.graphMeta,ma.prev=3,Rr.update({okButtonProps:{loading:!0}}),ma.next=7,Er.validateFields();case 7:return ma.next=9,Er.getFieldsValue();case 9:if(Pr=ma.sent,Zr=Pr.newNodeName,!Vr){ma.next=20;break}return ma.next=14,Vr(Zr,It,La);case 14:if(wr=ma.sent,ea=wr.err,Dr=wr.nodeName,!ea){ma.next=19;break}throw new Error(ea);case 19:Bn.resolve(Dr);case 20:qt(),ma.next=27;break;case 23:ma.prev=23,ma.t0=ma.catch(3),console.error(ma.t0),Rr.update({okButtonProps:{loading:!1}});case 27:case"end":return ma.stop()}},Nr,null,[[3,23]])}));return function(){return Nn.apply(this,arguments)}}(),qt=function(){hr.destroy(),pn.form=null,pn.modal=null,vn.destroy()},mn=function(){var Nr=an.a.useForm(),Er=Object(_e.a)(Nr,1),Rr=Er[0];return pn.form=Rr,Object(H.jsx)("div",{children:Object(H.jsx)(dt.a,{children:Object(H.jsx)(an.a,Object(ge.a)(Object(ge.a)({form:Rr},ar),{},{initialValues:{newNodeName:It.label},children:Object(H.jsx)(an.a.Item,{name:"newNodeName",label:"\u8282\u70B9\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u8282\u70B9\u540D"},{min:3,message:"\u8282\u70B9\u540D\u4E0D\u80FD\u5C11\u4E8E3\u4E2A\u5B57\u7B26"}],children:Object(H.jsx)(T.a,{})})}))})})},vn=yr(),hr=At.a.confirm({title:"\u91CD\u547D\u540D",content:Object(H.jsx)(mn,{}),getContainer:function(){return vn.element},okButtonProps:{onClick:function(Nr){Nr.stopPropagation(),on()}},onCancel:function(){qt()},afterClose:function(){qt()}});return pn.modal=hr,Bn.promise}var yr=function(){var jt=document.createElement("div");return jt.classList.add("xflow-modal-container"),window.document.body.append(jt),{element:jt,destroy:function(){window.document.body.removeChild(jt)}}},kr=[Object(ge.a)(Object(ge.a)({},rr),{},{CommandHandler:Pt}),Object(ge.a)(Object(ge.a)({},lt),{},{CommandHandler:Tt}),Object(ge.a)(Object(ge.a)({},lr),{},{CommandHandler:Hr})],Ur=Object(A.B)(function(It){It.setCommandContributions(function(){return kr}),It.setRegisterHookFn(function(jt){var Bn=[jt.graphMeta.registerHook({name:"get graph meta from backend",handler:function(){var on=Object(m.a)(Object(I.a)().mark(function mn(vn){return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:vn.graphMetaService=Te.queryGraphMeta;case 1:case"end":return Nn.stop()}},mn)}));function qt(mn){return on.apply(this,arguments)}return qt}()}),jt.saveGraphData.registerHook({name:"save graph data",handler:function(){var on=Object(m.a)(Object(I.a)().mark(function mn(vn){return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:vn.saveGraphDataService||(vn.saveGraphDataService=Te.saveGraphData);case 1:case"end":return Nn.stop()}},mn)}));function qt(mn){return on.apply(this,arguments)}return qt}()}),jt.addNode.registerHook({name:"get node config from backend api",handler:function(){var on=Object(m.a)(Object(I.a)().mark(function mn(vn){return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:vn.createNodeService=Te.addNode;case 1:case"end":return Nn.stop()}},mn)}));function qt(mn){return on.apply(this,arguments)}return qt}()}),jt.delNode.registerHook({name:"get edge config from backend api",handler:function(){var on=Object(m.a)(Object(I.a)().mark(function mn(vn){return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:vn.deleteNodeService=Te.delNode;case 1:case"end":return Nn.stop()}},mn)}));function qt(mn){return on.apply(this,arguments)}return qt}()}),jt.addEdge.registerHook({name:"get edge config from backend api",handler:function(){var on=Object(m.a)(Object(I.a)().mark(function mn(vn){return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:vn.createEdgeService=Te.addEdge,vn.edgeConfig=Object(ge.a)(Object(ge.a)({},vn.edgeConfig),{},{connector:{name:"rounded"},router:{name:"manhattan"}});case 2:case"end":return Nn.stop()}},mn)}));function qt(mn){return on.apply(this,arguments)}return qt}()}),jt.delEdge.registerHook({name:"get edge config from backend api",handler:function(){var on=Object(m.a)(Object(I.a)().mark(function mn(vn){return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:vn.deleteEdgeService=Te.delEdge;case 1:case"end":return Nn.stop()}},mn)}));function qt(mn){return on.apply(this,arguments)}return qt}()})],pn=new A.i;return pn.pushAll(Bn),pn})}),Va=function(jt){jt.executeCommandPipeline([{commandId:A.y.LOAD_DATA.id,getCommandOption:function(){var Bn=Object(m.a)(Object(I.a)().mark(function on(){return Object(I.a)().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return mn.abrupt("return",{args:{loadDataService:Te.loadGraphData}});case 1:case"end":return mn.stop()}},on)}));function pn(){return Bn.apply(this,arguments)}return pn}()},{commandId:A.y.GRAPH_LAYOUT.id,getCommandOption:function(){var Bn=Object(m.a)(Object(I.a)().mark(function on(qt){var mn,vn;return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:return mn=qt.getResult(),vn=mn.graphData,Nn.abrupt("return",{args:{layoutType:"dagre",layoutOptions:{type:"dagre",rankdir:"TB",nodesep:60,ranksep:30},graphData:vn}});case 2:case"end":return Nn.stop()}},on)}));function pn(on){return Bn.apply(this,arguments)}return pn}()},{commandId:A.y.GRAPH_RENDER.id,getCommandOption:function(){var Bn=Object(m.a)(Object(I.a)().mark(function on(qt){var mn,vn;return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:return mn=qt.getResult(),vn=mn.graphData,Nn.abrupt("return",{args:{graphData:vn}});case 2:case"end":return Nn.stop()}},on)}));function pn(on){return Bn.apply(this,arguments)}return pn}()},{commandId:A.y.GRAPH_ZOOM.id,getCommandOption:function(){var Bn=Object(m.a)(Object(I.a)().mark(function on(){return Object(I.a)().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return mn.abrupt("return",{args:{factor:"fit",zoomOptions:{maxScale:.9}}});case 1:case"end":return mn.stop()}},on)}));function pn(){return Bn.apply(this,arguments)}return pn}()}])},da;(function(It){var jt=It.id="test"})(da||(da={}));var Ji=Object(A.G)(function(It){It.registerModel(function(jt){return jt.registerModel({id:da.id,getInitialValue:function(){e:;}})})}),jo=function(){var It=Object(m.a)(Object(I.a)().mark(function jt(Bn){var pn;return Object(I.a)().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return qt.next=2,Bn.awaitModel(da.id);case 2:return pn=qt.sent,qt.abrupt("return",pn.getValidValue());case 4:case"end":return qt.stop()}},jt)}));return function(Bn){return It.apply(this,arguments)}}(),ri=h("/MfK"),ji=h("G3dp"),Li=h("jrDe"),Aa;(function(It){A.l.set("DeleteOutlined",ri.a),A.l.set("EditOutlined",ji.a),A.l.set("StopOutlined",Li.a);var jt=It.DELETE_EDGE={id:A.x.DEL_EDGE.id,label:"\u5220\u9664\u8FB9",iconName:"DeleteOutlined",onClick:function(){var mn=Object(m.a)(Object(I.a)().mark(function hr(Nn){var Nr,Er;return Object(I.a)().wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:Nr=Nn.target,Er=Nn.commandService,Er.executeCommand(A.x.DEL_EDGE.id,{edgeConfig:Nr.data});case 2:case"end":return xr.stop()}},hr)}));function vn(hr){return mn.apply(this,arguments)}return vn}()},Bn=It.DELETE_NODE={id:A.A.DEL_NODE.id,label:"\u5220\u9664\u8282\u70B9",iconName:"DeleteOutlined",onClick:function(){var mn=Object(m.a)(Object(I.a)().mark(function hr(Nn){var Nr,Er;return Object(I.a)().wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:Nr=Nn.target,Er=Nn.commandService,Er.executeCommand(A.A.DEL_NODE.id,{nodeConfig:{id:Nr.data.id}});case 2:case"end":return xr.stop()}},hr)}));function vn(hr){return mn.apply(this,arguments)}return vn}()},pn=It.EMPTY_MENU={id:"EMPTY_MENU_ITEM",label:"\u6682\u65E0\u53EF\u7528",isEnabled:!1,iconName:"DeleteOutlined"},on=It.RENAME_NODE={id:ut.SHOW_RENAME_MODAL.id,label:"\u91CD\u547D\u540D",isVisible:!0,iconName:"EditOutlined",onClick:function(){var mn=Object(m.a)(Object(I.a)().mark(function hr(Nn){var Nr,Er,Rr;return Object(I.a)().wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:Nr=Nn.target,Er=Nn.commandService,Rr=Nr.data,Er.executeCommand(ut.SHOW_RENAME_MODAL.id,{nodeConfig:Rr,updateNodeNameService:Te.renameNode});case 3:case"end":return Vr.stop()}},hr)}));function vn(hr){return mn.apply(this,arguments)}return vn}()},qt=It.SEPARATOR={id:"separator",type:A.q.Separator}})(Aa||(Aa={}));var ki=Object(A.C)(function(It){It.setMenuModelService(function(){var jt=Object(m.a)(Object(I.a)().mark(function Bn(pn,on,qt,mn){var vn,hr;return Object(I.a)().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:vn=pn.type,hr=pn.cell,console.log(vn),Nr.t0=vn,Nr.next=Nr.t0==="node"?5:Nr.t0==="edge"?7:Nr.t0==="blank"?9:11;break;case 5:return on.setValue({id:"root",type:A.q.Root,submenu:[Aa.DELETE_NODE,Aa.RENAME_NODE]}),Nr.abrupt("break",13);case 7:return on.setValue({id:"root",type:A.q.Root,submenu:[Aa.DELETE_EDGE]}),Nr.abrupt("break",13);case 9:return on.setValue({id:"root",type:A.q.Root,submenu:[Aa.EMPTY_MENU]}),Nr.abrupt("break",13);case 11:return on.setValue({id:"root",type:A.q.Root,submenu:[Aa.EMPTY_MENU]}),Nr.abrupt("break",13);case 13:case"end":return Nr.stop()}},Bn)}));return function(Bn,pn,on,qt){return jt.apply(this,arguments)}}())}),mi=h("P2fV"),na=h("NJEC"),Ki=h("ga3A"),go=h("DE2O"),ra=h("S2Tr"),di=h("/kP8"),So=h("s2cm"),si=h("AzWu"),Si;(function(It){A.l.set("SaveOutlined",Ki.a),A.l.set("CloudSyncOutlined",go.a),A.l.set("GatewayOutlined",ra.a),A.l.set("GroupOutlined",di.a),A.l.set("UngroupOutlined",So.a),A.l.set("PlaySquareOutlined",si.a),A.l.set("StopOutlined",Li.a);var jt=It.getDependencies=function(){var on=Object(m.a)(Object(I.a)().mark(function qt(mn){return Object(I.a)().wrap(function(hr){for(;;)switch(hr.prev=hr.next){case 0:return hr.next=2,A.o.SELECTED_CELLS.getModel(mn);case 2:return hr.t0=hr.sent,hr.next=5,A.o.GRAPH_ENABLE_MULTI_SELECT.getModel(mn);case 5:return hr.t1=hr.sent,hr.next=8,A.t.MODEL.getModel(mn);case 8:return hr.t2=hr.sent,hr.abrupt("return",[hr.t0,hr.t1,hr.t2]);case 10:case"end":return hr.stop()}},qt)}));return function(qt){return on.apply(this,arguments)}}(),Bn=It.getToolbarState=function(){var on=Object(m.a)(Object(I.a)().mark(function qt(mn){var vn,hr,Nn,Nr,Er;return Object(I.a)().wrap(function(xr){for(;;)switch(xr.prev=xr.next){case 0:return xr.next=2,A.o.GRAPH_ENABLE_MULTI_SELECT.useValue(mn);case 2:return vn=xr.sent,hr=vn.isEnable,xr.next=6,A.o.IS_GROUP_SELECTED.useValue(mn);case 6:return Nn=xr.sent,xr.next=9,A.o.IS_NORMAL_NODES_SELECTED.useValue(mn);case 9:return Nr=xr.sent,xr.next=12,A.t.MODEL.useValue(mn);case 12:return Er=xr.sent,xr.abrupt("return",{isNodeSelected:Nr,isGroupSelected:Nn,isMultiSelectionActive:hr,isProcessing:Er.graphStatus===A.t.StatusEnum.PROCESSING});case 14:case"end":return xr.stop()}},qt)}));return function(qt){return on.apply(this,arguments)}}(),pn=It.getToolbarItems=function(){var on=Object(m.a)(Object(I.a)().mark(function qt(mn){var vn,hr,Nn;return Object(I.a)().wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return vn=[],hr=[],Nn=[],vn.push({id:A.y.SAVE_GRAPH_DATA.id,iconName:"SaveOutlined",tooltip:"\u4FDD\u5B58\u6570\u636E",onClick:function(){var Rr=Object(m.a)(Object(I.a)().mark(function Vr(La){var Pr;return Object(I.a)().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:Pr=La.commandService,Pr.executeCommand(A.y.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(Dr,ha){return Te.saveGraphData(Dr,ha)}});case 2:case"end":return wr.stop()}},Vr)}));function xr(Vr){return Rr.apply(this,arguments)}return xr}()}),vn.push({iconName:"CloudSyncOutlined",tooltip:"\u90E8\u7F72\u670D\u52A1",id:ut.DEPLOY_SERVICE.id,onClick:function(xr){var Vr=xr.commandService;Vr.executeCommand(ut.DEPLOY_SERVICE.id,{deployDagService:function(Pr,Zr){return Te.deployDagService(Pr,Zr)}})}}),hr.push({id:A.y.GRAPH_TOGGLE_MULTI_SELECT.id,tooltip:"\u5F00\u542F\u6846\u9009",iconName:"GatewayOutlined",active:mn.isMultiSelectionActive,onClick:function(){var Rr=Object(m.a)(Object(I.a)().mark(function Vr(La){var Pr;return Object(I.a)().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:Pr=La.commandService,Pr.executeCommand(A.y.GRAPH_TOGGLE_MULTI_SELECT.id,{});case 2:case"end":return wr.stop()}},Vr)}));function xr(Vr){return Rr.apply(this,arguments)}return xr}()}),hr.push({id:A.z.ADD_GROUP.id,tooltip:"\u65B0\u5EFA\u7FA4\u7EC4",iconName:"GroupOutlined",isEnabled:mn.isNodeSelected,onClick:function(){var Rr=Object(m.a)(Object(I.a)().mark(function Vr(La){var Pr,Zr,wr,ea;return Object(I.a)().wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:return Pr=La.commandService,Zr=La.modelService,ha.next=3,A.o.SELECTED_CELLS.useValue(Zr);case 3:wr=ha.sent,ea=wr.map(function(ma){return ma.id}),Pr.executeCommand(A.z.ADD_GROUP.id,{nodeConfig:{id:Object(A.K)(),renderKey:R,groupChildren:ea,groupCollapsedSize:{width:200,height:40},label:"\u65B0\u5EFA\u7FA4\u7EC4"}});case 6:case"end":return ha.stop()}},Vr)}));function xr(Vr){return Rr.apply(this,arguments)}return xr}()}),hr.push({id:A.z.DEL_GROUP.id,tooltip:"\u89E3\u6563\u7FA4\u7EC4",iconName:"UngroupOutlined",isEnabled:mn.isGroupSelected,onClick:function(){var Rr=Object(m.a)(Object(I.a)().mark(function Vr(La){var Pr,Zr,wr,ea;return Object(I.a)().wrap(function(ha){for(;;)switch(ha.prev=ha.next){case 0:return Pr=La.commandService,Zr=La.modelService,ha.next=3,A.o.SELECTED_NODE.useValue(Zr);case 3:wr=ha.sent,ea=wr.getData(),Pr.executeCommand(A.z.DEL_GROUP.id,{nodeConfig:ea});case 6:case"end":return ha.stop()}},Vr)}));function xr(Vr){return Rr.apply(this,arguments)}return xr}()}),Nn.push({id:A.w.QUERY_GRAPH_STATUS.id+"play",tooltip:"\u5F00\u59CB\u6267\u884C",iconName:"PlaySquareOutlined",isEnabled:!mn.isProcessing,onClick:function(){var Rr=Object(m.a)(Object(I.a)().mark(function Vr(La){var Pr;return Object(I.a)().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:Pr=La.commandService,Pr.executeCommand(A.w.QUERY_GRAPH_STATUS.id,{graphStatusService:Te.graphStatusService,loopInterval:3e3});case 2:case"end":return wr.stop()}},Vr)}));function xr(Vr){return Rr.apply(this,arguments)}return xr}()}),Nn.push({id:A.w.QUERY_GRAPH_STATUS.id+"stop",tooltip:"\u505C\u6B62\u6267\u884C",iconName:"StopOutlined",isEnabled:mn.isProcessing,onClick:function(){var Rr=Object(m.a)(Object(I.a)().mark(function Vr(La){var Pr;return Object(I.a)().wrap(function(wr){for(;;)switch(wr.prev=wr.next){case 0:Pr=La.commandService,Pr.executeCommand(A.w.QUERY_GRAPH_STATUS.id,{graphStatusService:Te.stopGraphStatusService,loopInterval:5e3});case 2:case"end":return wr.stop()}},Vr)}));function xr(Vr){return Rr.apply(this,arguments)}return xr}(),render:function(xr){return Object(H.jsx)(na.a,{title:"\u786E\u5B9A\u505C\u6B62\u6267\u884C\uFF1F",onConfirm:function(){xr.onClick()},children:xr.children})}}),Er.abrupt("return",[{name:"graphData",items:vn},{name:"groupOperations",items:hr},{name:"customCmd",items:Nn}]);case 11:case"end":return Er.stop()}},qt)}));return function(qt){return on.apply(this,arguments)}}()})(Si||(Si={}));var yi=Object(A.H)(function(It){It.setToolbarModelService(function(){var jt=Object(m.a)(Object(I.a)().mark(function Bn(pn,on,qt){var mn,vn,hr;return Object(I.a)().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:return mn=function(){var Er=Object(m.a)(Object(I.a)().mark(function Rr(){var xr,Vr;return Object(I.a)().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Pr.next=2,Si.getToolbarState(on);case 2:return xr=Pr.sent,Pr.next=5,Si.getToolbarItems(xr);case 5:Vr=Pr.sent,pn.setValue(function(Zr){Zr.mainGroups=Vr});case 7:case"end":return Pr.stop()}},Rr)}));return function(){return Er.apply(this,arguments)}}(),Nr.next=3,Si.getDependencies(on);case 3:vn=Nr.sent,hr=vn.map(function(Er){return Er.watch(Object(m.a)(Object(I.a)().mark(function Rr(){return Object(I.a)().wrap(function(Vr){for(;;)switch(Vr.prev=Vr.next){case 0:mn();case 1:case"end":return Vr.stop()}},Rr)})))}),qt.pushAll(hr);case 6:case"end":return Nr.stop()}},Bn)}));return function(Bn,pn,on){return jt.apply(this,arguments)}}())}),zi=Object(A.F)(function(It){It.setKeybindingFunc(function(jt){return jt.registerKeybinding([{id:"delete node or edge",keybinding:"backspace",callback:function(){var Bn=Object(m.a)(Object(I.a)().mark(function on(qt,mn,vn,hr){var Nn;return Object(I.a)().wrap(function(Er){for(;;)switch(Er.prev=Er.next){case 0:return Er.next=2,A.o.SELECTED_CELLS.useValue(mn);case 2:return Nn=Er.sent,Er.next=5,Promise.all(Nn.map(function(Rr){if(Rr.isEdge())return vn.executeCommand(A.x.DEL_EDGE.id,{edgeConfig:Object(ge.a)(Object(ge.a)({},Rr.getData()),{},{id:Rr.id})})}));case 5:return Er.next=7,Promise.all(Nn.map(function(Rr){if(Rr.isNode())return vn.executeCommand(A.A.DEL_NODE.id,{nodeConfig:Object(ge.a)(Object(ge.a)({},Rr.getData()),{},{id:Rr.id})})}));case 7:case"end":return Er.stop()}},on)}));function pn(on,qt,mn,vn){return Bn.apply(this,arguments)}return pn}()},{id:"copy",keybinding:["command+c","ctrl+c"],callback:function(){var Bn=Object(m.a)(Object(I.a)().mark(function on(qt,mn,vn,hr){return Object(I.a)().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:hr.preventDefault(),console.log(qt),vn.executeCommand(A.y.GRAPH_COPY.id,{});case 3:case"end":return Nr.stop()}},on)}));function pn(on,qt,mn,vn){return Bn.apply(this,arguments)}return pn}()},{id:"paste",keybinding:["command+v","ctrl+v"],callback:function(){var Bn=Object(m.a)(Object(I.a)().mark(function on(qt,mn,vn,hr){return Object(I.a)().wrap(function(Nr){for(;;)switch(Nr.prev=Nr.next){case 0:hr.preventDefault(),vn.executeCommand(A.y.GRAPH_PASTE.id,{});case 2:case"end":return Nr.stop()}},on)}));function pn(on,qt,mn,vn){return Bn.apply(this,arguments)}return pn}()}])})}),Ko=h("IzEo"),To=h("bx4M"),po=function(){var It=Object(m.a)(Object(I.a)().mark(function jt(Bn,pn,on){var qt;return Object(I.a)().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:qt={nodeConfig:Object(ge.a)(Object(ge.a)({},Bn),{},{id:Object(A.K)()})},pn.executeCommand(A.A.ADD_NODE.id,qt);case 2:case"end":return vn.stop()}},jt)}));return function(Bn,pn,on){return It.apply(this,arguments)}}(),Yo=function(jt){return Object(H.jsxs)(To.a,{size:"small",title:"\u7B97\u6CD5\u7EC4\u4EF6\u4ECB\u7ECD",style:{width:"200px"},bordered:!1,children:["\u6B22\u8FCE\u4F7F\u7528\uFF1A",jt.name,"\u8FD9\u91CC\u53EF\u4EE5\u6839\u636E\u670D\u52A1\u7AEF\u8FD4\u56DE\u7684\u6570\u636E\u663E\u793A\u4E0D\u540C\u7684\u5185\u5BB9"]})},Us=function(){var It=Object(m.a)(Object(I.a)().mark(function jt(Bn,pn){return Object(I.a)().wrap(function(qt){for(;;)switch(qt.prev=qt.next){case 0:return console.log(Bn,pn),qt.abrupt("return",[{id:"\u6570\u636E\u8BFB\u5199",header:"\u6570\u636E\u8BFB\u5199",children:[{id:"2",label:"\u7B97\u6CD5\u7EC4\u4EF61",parentId:"1",renderKey:G,popoverContent:Object(H.jsx)(Yo,{name:"\u7B97\u6CD5\u7EC4\u4EF61"})},{id:"3",label:"\u7B97\u6CD5\u7EC4\u4EF62",parentId:"1",renderKey:G,popoverContent:Object(H.jsx)(Yo,{name:"\u7B97\u6CD5\u7EC4\u4EF62"})},{id:"4",label:"\u7B97\u6CD5\u7EC4\u4EF63",parentId:"1",renderKey:G,popoverContent:Object(H.jsx)(Yo,{name:"\u7B97\u6CD5\u7EC4\u4EF63"})}]},{id:"\u6570\u636E\u52A0\u5DE5",header:"\u6570\u636E\u52A0\u5DE5",children:[{id:"6",label:"\u7B97\u6CD5\u7EC4\u4EF64",parentId:"5",renderKey:G},{id:"7",label:"\u7B97\u6CD5\u7EC4\u4EF65",parentId:"5",renderKey:G},{id:"8",label:"\u7B97\u6CD5\u7EC4\u4EF66",parentId:"5",renderKey:G}]},{id:"\u6A21\u578B\u8BAD\u7EC3",header:"\u6A21\u578B\u8BAD\u7EC3",children:[{id:"6",label:"\u7B97\u6CD5\u7EC4\u4EF64",parentId:"5",renderKey:G},{id:"7",label:"\u7B97\u6CD5\u7EC4\u4EF65",parentId:"5",renderKey:G},{id:"8",label:"\u7B97\u6CD5\u7EC4\u4EF66",parentId:"5",renderKey:G}]}]);case 2:case"end":return qt.stop()}},jt)}));return function(Bn,pn){return It.apply(this,arguments)}}(),Wu=function(){var It=Object(m.a)(Object(I.a)().mark(function jt(){var Bn,pn,on,qt=arguments;return Object(I.a)().wrap(function(vn){for(;;)switch(vn.prev=vn.next){case 0:return Bn=qt.length>0&&qt[0]!==void 0?qt[0]:[],pn=qt.length>1?qt[1]:void 0,on=Bn.filter(function(hr){return hr.label.includes(pn)}),console.log(on,pn,Bn),vn.abrupt("return",on);case 5:case"end":return vn.stop()}},jt)}));return function(){return It.apply(this,arguments)}}(),Lo=function(jt){var Bn=jt.controlSchema,pn=Bn.required,on=Bn.tooltip,qt=Bn.extra,mn=Bn.name,vn=Bn.label,hr=Bn.placeholder;return Object(H.jsx)(A.j,{schema:Bn,children:function(Nr){var Er=Nr.disabled,Rr=Nr.hidden,xr=Nr.initialValue;return Object(H.jsx)(an.a.Item,{name:mn,label:vn,initialValue:xr,tooltip:on,extra:qt,required:pn,hidden:Rr,children:Object(H.jsx)($u,{controlSchema:Bn,placeholder:hr,disabled:Er})})}})},$u=function(jt){var Bn=jt.placeholder,pn=jt.disabled,on=jt.onChange,qt=jt.value,mn=Object(A.J)(),vn=mn.commandService,hr=mn.modelService;return M.a.useEffect(function(){vn.executeCommand(A.y.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(){var Nn=Object(m.a)(Object(I.a)().mark(function Er(Rr,xr){var Vr;return Object(I.a)().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Pr.next=2,A.o.SELECTED_NODES.useValue(hr);case 2:return Vr=Pr.sent,console.log(xr),on(JSON.stringify(xr)),Pr.abrupt("return",{err:null,data:xr,meta:Rr});case 6:case"end":return Pr.stop()}},Er)}));function Nr(Er,Rr){return Nn.apply(this,arguments)}return Nr}()})}),Object(H.jsx)(T.a.TextArea,{value:qt,placeholder:Bn,disabled:pn,rows:10})},iu=function(jt){var Bn=jt.controlSchema;return Object(H.jsx)("div",{style:{padding:"8px 0px",marginBottom:"8px"},children:Object(H.jsx)("a",{href:Bn.value,target:"_blank",style:{color:"#3057e3"},children:Bn.label})})},Zo;(function(It){It.EDITOR="EDITOR",It.LINKSHAPE="LINKSHAPE"})(Zo||(Zo={}));var Vs=function(jt){return jt.set(Zo.EDITOR,Lo),jt.set(Zo.LINKSHAPE,iu),jt};function ou(It){return new Promise(function(jt){return setTimeout(function(){return jt(!0)},It)})}var Is=0,Hs=function(){var It=Object(m.a)(Object(I.a)().mark(function jt(Bn){var pn,on,qt,mn,vn;return Object(I.a)().wrap(function(Nn){for(;;)switch(Nn.prev=Nn.next){case 0:return pn=Bn.targetData,on=Bn.modelService,qt=Bn.targetType,Nn.next=3,A.o.GRAPH_META.useValue(on);case 3:if(mn=Nn.sent,console.log("formSchemaService",mn,Bn),qt!=="canvas"){Nn.next=7;break}return Nn.abrupt("return",{tabs:[{name:"GraphMeta",groups:[{name:"groupName",controls:[{name:"Tab2-1",label:"\u9879\u76EE\u540D",shape:"Input",disabled:!1,required:!0,tooltip:"\u56FE\u7684\u4E1A\u52A1\u9879\u76EE\u540D",extra:"\u548C\u56FE\u7684ID\u5BF9\u5E94",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"\u56FE\u6570\u636E",name:"Tab1-0",shape:Zo.EDITOR,disabled:!1,required:!0,tooltip:"JSON \u6570\u636E",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"\u67E5\u770B\u65E5\u5FD7\u94FE\u63A5",name:"Tab1-1",shape:Zo.LINKSHAPE,disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}}]}]}]});case 7:return vn={tabs:[{name:"Tab1",groups:[{name:"groupName",controls:[{label:"GraphEditor",name:"Tab1-0",shape:Zo.EDITOR,disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab1-2",name:"Tab1-2",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab1-3",name:"Tab1-3",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab1-4",name:"Tab1-4",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}}]}]},{name:"Tab2",groups:[{name:"groupName",controls:[{name:"Tab2-1",label:"Tab2-1",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab2-2",name:"Tab2-2",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{label:"Tab2-3",name:"Tab2-3",shape:"Input",disabled:!1,required:!0,tooltip:"hello world",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}}]}]}]},Nn.next=10,ou(100);case 10:if(!(pn&&Is===0)){Nn.next=13;break}return Is=1,Nn.abrupt("return",vn);case 13:if(!pn){Nn.next=16;break}return Is=0,Nn.abrupt("return",{tabs:[{name:"Tab3",groups:[{name:"",controls:[{name:"Tab3-1",label:"\u7B97\u6CD5\u914D\u7F6E1",shape:"Input",disabled:!1,required:!0,tooltip:"\u7B97\u6CD5\u914D\u7F6E1",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}},{name:"Tab3-2",label:"\u7B97\u6CD5\u914D\u7F6E2",shape:"Input",disabled:!1,required:!0,tooltip:"\u7B97\u6CD5\u914D\u7F6E2",placeholder:"please write something",value:"",defaultValue:"",hidden:!1,options:[{title:"",value:""}],originData:{}}]}]}]});case 16:if(!pn){Nn.next=18;break}return Nn.abrupt("return",vn);case 18:return Nn.abrupt("return",{tabs:[]});case 19:case"end":return Nn.stop()}},jt)}));return function(Bn){return It.apply(this,arguments)}}(),Ws=function(){var It=Object(m.a)(Object(I.a)().mark(function jt(Bn){return Object(I.a)().wrap(function(on){for(;;)switch(on.prev=on.next){case 0:console.log("formValueUpdateService",Bn);case 1:case"end":return on.stop()}},jt)}));return function(Bn){return It.apply(this,arguments)}}(),su=h("ac3q"),nn=h("sfHF"),On=function(jt){var Bn=jt.meta,pn=L(jt),on=yi(),qt=ki(),mn=Ur(),vn=Ji(),hr=zi(),Nn=M.a.useMemo(function(){return{app:null}},[]),Nr=function(){var Er=Object(m.a)(Object(I.a)().mark(function Rr(xr){return Object(I.a)().wrap(function(La){for(;;)switch(La.prev=La.next){case 0:Nn.app=xr,Va(Nn.app);case 2:case"end":return La.stop()}},Rr)}));return function(xr){return Er.apply(this,arguments)}}();return M.a.useEffect(function(){Nn.app&&Va(Nn.app)},[Nn.app,Bn]),Object(H.jsxs)(A.u,{className:"dag-user-custom-clz",hookConfig:pn,modelServiceConfig:vn,commandConfig:mn,onLoad:Nr,meta:Bn,children:[Object(H.jsx)(A.g,{}),Object(H.jsx)(A.r,{className:"xflow-node-panel",searchService:Wu,nodeDataService:Us,onNodeDrop:po,position:{width:230,top:0,bottom:0,left:0},footerPosition:{height:0},bodyPosition:{top:40,bottom:0,left:0}}),Object(H.jsx)(A.f,{className:"xflow-workspace-toolbar-top",layout:"horizontal",config:on,position:{top:0,left:230,right:290,bottom:0}}),Object(H.jsxs)(A.v,{position:{top:40,left:230,right:290,bottom:0},children:[Object(H.jsx)(A.d,{position:{top:12,right:12}}),Object(H.jsx)(A.a,{config:qt}),Object(H.jsx)(A.e,{color:"#faad14"}),Object(H.jsx)(A.c,{})]}),Object(H.jsx)(A.m,{controlMapService:Vs,formSchemaService:Hs,formValueUpdateService:Ws,bodyPosition:{top:0,bottom:0,right:0},position:{width:290,top:0,bottom:0,right:0},footerPosition:{height:0}}),Object(H.jsx)(A.n,{config:hr})]})},vr=P.default=On;On.defaultProps={meta:{flowId:"test-meta-flow-id"}}},"+n+1":function(le,P){le.exports=h;function h(I,m,_,M){return I[0]=m[0]+_[0]*M,I[1]=m[1]+_[1]*M,I}},"+sJh":function(le,P){le.exports=h;function h(I,m,_){return I[0]=m[0]+_[0],I[1]=m[1]+_[1],I}},"+uE7":function(le,P,h){"use strict";h.d(P,"a",function(){return I});var I={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")}},"+xCn":function(le,P,h){"use strict";h.d(P,"b",function(){return R}),h.d(P,"a",function(){return X});var I=h("J4zp"),m=h.n(I),_=h("IOcx");function M(Y){return typeof Y=="number"}function A(Y){return Y===void 0?0:Y>360||Y<-360?Y%360:Y}function G(Y,K,ne){return M(Y)?_.d.fromValues(Y,K,ne):Y.length===3?_.d.clone(Y):_.d.fromValues(Y[0],Y[1],Y[2])}function R(Y,K){return K[0]=Y[0],K[1]=Y[1],K[2]=Y[2],K[3]=Y[4],K[4]=Y[5],K[5]=Y[6],K[6]=Y[8],K[7]=Y[9],K[8]=Y[10],K}function X(Y){var K=m()(Y,3),ne=K[0],ae=K[1],te=K[2],ce=ne+ae*256+te*65536-1;return ce}function W(Y){return[Y+1&255,Y+1>>8&255,Y+1>>8>>8&255]}},"/kP8":function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="GroupOutlined";var R=P.a=m.forwardRef(G)},"0arJ":function(le,P,h){"use strict";h.d(P,"a",function(){return dt});var I=h("lSNA"),m=h.n(I),_=h("lwsE"),M=h.n(_),A=h("W8MJ"),G=h.n(A),R=h("PJYZ"),X=h.n(R),W=h("7W2i"),Y=h.n(W),K=h("a1gu"),ne=h.n(K),ae=h("Nsbk"),te=h.n(ae),ce=h("IOcx"),ee=h("oDt1"),H=h("cDf5"),se=h.n(H),re=9007199254740991,q="[object Arguments]",ye="[object Array]",ue="[object Boolean]",ve="[object Date]",pe="[object Error]",L="[object Function]",ge="[object Map]",_e="[object Number]",Te="[object Object]",we="[object RegExp]",Qe="[object Set]",D="[object String]",Ue="[object WeakMap]",Ct="[object ArrayBuffer]",ut="[object DataView]",Nt="[object Float32Array]",Kt="[object Float64Array]",Je="[object Int8Array]",Vt="[object Int16Array]",Be="[object Int32Array]",ie="[object Uint8Array]",un="[object Uint8ClampedArray]",rn="[object Uint16Array]",rr="[object Uint32Array]",Pt={};Pt[Nt]=Pt[Kt]=Pt[Je]=Pt[Vt]=Pt[Be]=Pt[ie]=Pt[un]=Pt[rn]=Pt[rr]=!0,Pt[q]=Pt[ye]=Pt[Ct]=Pt[ue]=Pt[ut]=Pt[ve]=Pt[pe]=Pt[L]=Pt[ge]=Pt[_e]=Pt[Te]=Pt[we]=Pt[Qe]=Pt[D]=Pt[Ue]=!1;function Tn(at){return function(T){return at(T)}}var ur=Object.prototype,Jt=ur.toString;function fn(at){return En(at)&&Mn(at.length)&&!!Pt[Jt.call(at)]}function Mn(at){return typeof at=="number"&&at>-1&&at%1==0&&at<=re}function En(at){return!!at&&se()(at)==="object"}var lt=fn;function Tt(at,T){var bn=Object.keys(at);if(Object.getOwnPropertySymbols){var an=Object.getOwnPropertySymbols(at);T&&(an=an.filter(function(Jn){return Object.getOwnPropertyDescriptor(at,Jn).enumerable})),bn.push.apply(bn,an)}return bn}function st(at){for(var T=1;T<arguments.length;T++){var bn=arguments[T]!=null?arguments[T]:{};T%2?Tt(Object(bn),!0).forEach(function(an){m()(at,an,bn[an])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(bn)):Tt(Object(bn)).forEach(function(an){Object.defineProperty(at,an,Object.getOwnPropertyDescriptor(bn,an))})}return at}function At(at){var T=Ot();return function(){var an=te()(at),Jn;if(T){var Qn=te()(this).constructor;Jn=Reflect.construct(an,arguments,Qn)}else Jn=an.apply(this,arguments);return ne()(this,Jn)}}function Ot(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(at){return!1}}var dt=function(at){Y()(bn,at);var T=At(bn);function bn(an){var Jn;return M()(this,bn),Jn=T.call(this,an),Jn.dirty=!0,Jn.attributes=[],Jn.indices=void 0,Jn.indicesBuffer=void 0,Jn.vertexCount=0,Jn.maxInstancedCount=void 0,Jn.aabb=void 0,Jn.entity=void 0,Object.assign(X()(Jn),an),Jn}return G()(bn,[{key:"setAttribute",value:function(Jn,Qn,De,be){var Xe=this.attributes.find(function(Yt){return Yt.name===Jn});return Xe?(Xe.data=Qn,Xe.dirty=!0):this.attributes.push(st(st({dirty:!0,name:Jn,data:Qn},De),{},{bufferGetter:be})),this.dirty=!0,this}},{key:"setIndex",value:function(Jn){return this.indices=new Uint32Array(Jn.buffer?Jn.buffer:Jn),this.dirty=!0,this}},{key:"applyMatrix",value:function(Jn){var Qn=this.attributes.find(function(Hr){var ar=Hr.name;return ar==="position"}),De=this.attributes.find(function(Hr){var ar=Hr.name;return ar==="normal"});if(Qn&&(Qn.dirty=!0,Qn.data&&Qn.data.length))for(var be=0;be<Qn.data.length;be+=3){var Xe=ce.e.fromValues(Qn.data[be],Qn.data[be+1],Qn.data[be+2],1);ce.e.transformMat4(Xe,Xe,Jn),lt(Qn.data)?Qn.data.set([Xe[0],Xe[1],Xe[2]],be):(Qn.data[be]=Xe[0],Qn.data[be+1]=Xe[1],Qn.data[be+2]=Xe[2])}if(De){var Yt=ce.a.normalFromMat4(ce.a.create(),Jn);if(De.data&&De.data.length)for(var ln=0;ln<De.data.length;ln+=3){var lr=ce.d.fromValues(De.data[ln],De.data[ln+1],De.data[ln+2]);ce.d.transformMat3(lr,lr,Yt),ce.d.normalize(lr,lr),lt(De.data)?De.data.set([lr[0],lr[1],lr[2]],ln):(De.data[ln]=lr[0],De.data[ln+1]=lr[1],De.data[ln+2]=lr[2])}}}}]),bn}(ee.a)},"0gSV":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.tagged=void 0;var I=h("GXnB"),m=h("Ztfv");function _(M,A){return function(G,R,X){var W=new I.Metadata(M,A);typeof X=="number"?m.tagParameter(G,R,X,W):m.tagProperty(G,R,W)}}P.tagged=_},"1ABj":function(le,P){function h(I,m){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},"1wcP":function(le,P,h){},"26re":function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="DatabaseOutlined";var R=P.a=m.forwardRef(G)},"2GVV":function(le,P){le.exports=h;function h(I,m){var _=new Float32Array(2);return _[0]=I,_[1]=m,_}},"2ajD":function(le,P){function h(I){return I!==I}le.exports=h},"2qtc":function(le,P,h){"use strict";var I=h("EFp3"),m=h.n(I),_=h("1wcP"),M=h.n(_),A=h("+L6B")},"2zpl":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.PhotoshopPreviews=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.PhotoshopPreviews=function(X){var W=X.rgb,Y=X.currentColor,K=(0,M.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+W.r+","+W.g+", "+W.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:Y,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return m.default.createElement("div",null,m.default.createElement("div",{style:K.label},"new"),m.default.createElement("div",{style:K.swatches},m.default.createElement("div",{style:K.new}),m.default.createElement("div",{style:K.current})),m.default.createElement("div",{style:K.label},"current"))};P.default=G},"3/ER":function(le,P,h){"use strict";(function(I){var m=h("Ju5/"),_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,M=_&&typeof I=="object"&&I&&!I.nodeType&&I,A=M&&M.exports===_,G=A?m.a.Buffer:void 0,R=G?G.allocUnsafe:void 0;function X(W,Y){if(Y)return W.slice();var K=W.length,ne=R?R(K):new W.constructor(K);return W.copy(ne),ne}P.a=X}).call(this,h("Vg/k")(le))},"30v5":function(le,P){le.exports=h;function h(I,m,_){var M=m[0],A=m[1];return I[0]=_[0]*M+_[2]*A,I[1]=_[1]*M+_[3]*A,I}},"3R4v":function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="FullscreenOutlined";var R=P.a=m.forwardRef(G)},"3z9K":function(le,P,h){var I;try{I=h("LvDl")}catch(m){}I||(I=window._),le.exports=I},"406g":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingOnSyntax=void 0;var I=h("z4Hk"),m=function(){function _(M){this._binding=M}return _.prototype.onActivation=function(M){return this._binding.onActivation=M,new I.BindingWhenSyntax(this._binding)},_}();P.BindingOnSyntax=m},"48hD":function(le,P,h){"use strict";h.d(P,"a",function(){return I.a}),h.d(P,"b",function(){return W.a});var I=h("ENEI"),m=h("lwsE"),_=h.n(m),M=h("W8MJ"),A=h.n(M),G=h("IOcx"),R=G.d.create(),X=function(){function H(se,re){_()(this,H),this.center=void 0,this.radius=void 0,this.center=se||G.d.create(),this.radius=re||.5}return A()(H,[{key:"containsPoint",value:function(re){return G.d.sub(R,re,this.center),G.d.length(R)<this.radius*this.radius}},{key:"intersects",value:function(re){G.d.sub(R,re.center,this.center);var q=re.radius+this.radius;return G.d.length(R)<=q*q}}]),H}(),W=h("qfsk"),Y=h("cXWL"),K=G.d.create(),ne=G.d.create(),ae=G.d.create(),te=G.d.create(),ce=G.d.create(),ee=function(){function H(se,re){_()(this,H),this.origin=void 0,this.direction=void 0,this.origin=se||G.d.create(),this.direction=re||G.d.fromValues(0,0,-1)}return A()(H,[{key:"intersectsAABB",value:function(re,q){return q?this.intersectAABBWithIntersection(re,q):this.intersectsAABBWithoutIntersection(re)}},{key:"intersectsSphere",value:function(re,q){var ye=G.d.sub(K,this.origin,re.center);G.d.normalize(ne,G.d.copy(ne,this.direction));var ue=G.d.dot(ye,ne),ve=G.d.dot(ye,ye)-re.radius*re.radius;if(ve>0&&ue>0)return null;var pe=ue*ue-ve;if(pe<0)return!1;var L=Math.abs(-ue-Math.sqrt(pe));return q&&(G.d.copy(q,this.direction),G.d.scaleAndAdd(q,this.origin,q,L)),!0}},{key:"intersectsPlane",value:function(re,q){var ye=(re.distance-G.d.dot(re.normal,this.origin))/G.d.dot(re.normal,this.direction),ue=ye>=0;return ue&&q&&G.d.scaleAndAdd(q,this.origin,this.direction,ye),ue}},{key:"intersectsAABBWithoutIntersection",value:function(re){var q=K,ye=ne,ue=ae,ve=te,pe=ce,L=this.direction;return G.d.sub(q,this.origin,re.center),G.d.set(ve,Math.abs(q[0]),Math.abs(q[1]),Math.abs(q[2])),G.d.mul(ue,q,L),ve[0]>re.halfExtents[0]&&ue[0]>=0||ve[1]>re.halfExtents[1]&&ue[1]>=0||ve[2]>re.halfExtents[2]&&ue[2]>=0?!1:(G.d.set(pe,Math.abs(L[0]),Math.abs(L[1]),Math.abs(L[2])),G.d.cross(ye,L,q),G.d.set(ye,Math.abs(ye[0]),Math.abs(ye[1]),Math.abs(ye[2])),!(ye[0]>re.halfExtents[1]*pe[2]+re.halfExtents[2]*pe[1]||ye[1]>re.halfExtents[0]*pe[2]+re.halfExtents[2]*pe[0]||ye[2]>re.halfExtents[0]*pe[1]+re.halfExtents[1]*pe[0]))}},{key:"intersectAABBWithIntersection",value:function(re,q){var ye=G.d.copy(G.d.create(),re.getMin());G.d.sub(ye,ye,this.origin);var ue=G.d.copy(G.d.create(),re.getMax());G.d.sub(ue,ue,this.origin);var ve=this.direction;ve[0]===0?(ye[0]=ye[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE,ue[0]=ue[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(ye[0]/=ve[0],ue[0]/=ve[0]),ve[1]===0?(ye[1]=ye[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE,ue[1]=ue[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(ye[1]/=ve[1],ue[1]/=ve[1]),ve[2]===0?(ye[2]=ye[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE,ue[2]=ue[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(ye[2]/=ve[2],ue[2]/=ve[2]);var pe=G.d.set(ae,Math.min(ye[0],ue[0]),Math.min(ye[1],ue[1]),Math.min(ye[2],ue[2])),L=G.d.set(te,Math.max(ye[0],ue[0]),Math.max(ye[1],ue[1]),Math.max(ye[2],ue[2])),ge=Math.min(Math.min(L[0],L[1]),L[2]),_e=Math.max(Math.max(pe[0],pe[1]),pe[2]),Te=ge>=_e&&_e>=0;return Te&&(G.d.copy(q,this.direction),G.d.scaleAndAdd(q,this.origin,q,_e)),Te}}]),H}()},"4Hkj":function(le,P){le.exports=h;function h(I,m,_){return I[0]=m,I[1]=_,I}},"4XUm":function(le,P,h){"use strict";var I=h("k6w6");h.d(P,"gl",function(){return I.a});var m=h("olaO"),_=h.n(m),M=h("A14R"),A=h.n(M),G=h("Oboc"),R=h.n(G),X=h("+RHd"),W=h.n(X),Y=h("nO7B"),K=h.n(Y),ne=h("yaXH"),ae=h.n(ne),te=h("V/xP"),ce=h("vdMR"),ee=h.n(ce),H=h("NirO"),se=h.n(H),re=h("JX23"),q=h.n(re),ye=h("ZjWs"),ue=h.n(ye)},"4cb6":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.multiBindToService=P.getServiceIdentifierAsString=P.typeConstraint=P.namedConstraint=P.taggedConstraint=P.traverseAncerstors=P.decorate=P.id=P.MetadataReader=P.postConstruct=P.targetName=P.multiInject=P.unmanaged=P.optional=P.LazyServiceIdentifer=P.inject=P.named=P.tagged=P.injectable=P.ContainerModule=P.AsyncContainerModule=P.TargetTypeEnum=P.BindingTypeEnum=P.BindingScopeEnum=P.Container=P.METADATA_KEY=void 0;var I=h("xfSm");P.METADATA_KEY=I;var m=h("9Fde");Object.defineProperty(P,"Container",{enumerable:!0,get:function(){return m.Container}});var _=h("FV85");Object.defineProperty(P,"BindingScopeEnum",{enumerable:!0,get:function(){return _.BindingScopeEnum}}),Object.defineProperty(P,"BindingTypeEnum",{enumerable:!0,get:function(){return _.BindingTypeEnum}}),Object.defineProperty(P,"TargetTypeEnum",{enumerable:!0,get:function(){return _.TargetTypeEnum}});var M=h("dxzI");Object.defineProperty(P,"AsyncContainerModule",{enumerable:!0,get:function(){return M.AsyncContainerModule}}),Object.defineProperty(P,"ContainerModule",{enumerable:!0,get:function(){return M.ContainerModule}});var A=h("cZ5Q");Object.defineProperty(P,"injectable",{enumerable:!0,get:function(){return A.injectable}});var G=h("0gSV");Object.defineProperty(P,"tagged",{enumerable:!0,get:function(){return G.tagged}});var R=h("ZzCi");Object.defineProperty(P,"named",{enumerable:!0,get:function(){return R.named}});var X=h("Yk9n");Object.defineProperty(P,"inject",{enumerable:!0,get:function(){return X.inject}}),Object.defineProperty(P,"LazyServiceIdentifer",{enumerable:!0,get:function(){return X.LazyServiceIdentifer}});var W=h("jYx5");Object.defineProperty(P,"optional",{enumerable:!0,get:function(){return W.optional}});var Y=h("n2J3");Object.defineProperty(P,"unmanaged",{enumerable:!0,get:function(){return Y.unmanaged}});var K=h("jIg/");Object.defineProperty(P,"multiInject",{enumerable:!0,get:function(){return K.multiInject}});var ne=h("oaX6");Object.defineProperty(P,"targetName",{enumerable:!0,get:function(){return ne.targetName}});var ae=h("Sk89");Object.defineProperty(P,"postConstruct",{enumerable:!0,get:function(){return ae.postConstruct}});var te=h("wnjb");Object.defineProperty(P,"MetadataReader",{enumerable:!0,get:function(){return te.MetadataReader}});var ce=h("d9O0");Object.defineProperty(P,"id",{enumerable:!0,get:function(){return ce.id}});var ee=h("Ztfv");Object.defineProperty(P,"decorate",{enumerable:!0,get:function(){return ee.decorate}});var H=h("RR/i");Object.defineProperty(P,"traverseAncerstors",{enumerable:!0,get:function(){return H.traverseAncerstors}}),Object.defineProperty(P,"taggedConstraint",{enumerable:!0,get:function(){return H.taggedConstraint}}),Object.defineProperty(P,"namedConstraint",{enumerable:!0,get:function(){return H.namedConstraint}}),Object.defineProperty(P,"typeConstraint",{enumerable:!0,get:function(){return H.typeConstraint}});var se=h("ujMp");Object.defineProperty(P,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return se.getServiceIdentifierAsString}});var re=h("78VC");Object.defineProperty(P,"multiBindToService",{enumerable:!0,get:function(){return re.multiBindToService}})},"4dNS":function(le,P,h){"use strict";h.d(P,"a",function(){return Te});var I=h("o0o1"),m=h.n(I),_=h("yXPU"),M=h.n(_),A=h("yG8O"),G=h.n(A),R=h("lwsE"),X=h.n(R),W=h("W8MJ"),Y=h.n(W),K=h("U+yc"),ne=h.n(K),ae=h("1ABj"),te=h.n(ae),ce=h("4cb6"),ee=h.n(ce),H=h("Gj0h"),se=h("+uE7"),re=h("k6w6"),q,ye,ue,ve,pe,L,ge,_e,Te=(q=Object(ce.injectable)(),ye=Object(ce.inject)(se.a.GeometryComponentManager),ue=Object(ce.inject)(se.a.RenderEngine),q(ve=(pe=(_e=function(){function we(){X()(this,we),G()(this,"geometry",L,this),G()(this,"engine",ge,this)}return Y()(we,[{key:"execute",value:function(){var Qe=M()(m.a.mark(function Ue(){var Ct=this;return m.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:this.geometry.forEach(function(Kt,Je){Je.dirty&&(Je.attributes.forEach(function(Vt){if(Vt.dirty&&Vt.data){if(!Vt.buffer)Vt.buffer=Ct.engine.createBuffer({data:Vt.data,type:re.a.FLOAT});else{var Be;(Be=Vt.buffer)===null||Be===void 0||Be.subData({data:Vt.data,offset:0})}Vt.dirty=!1}}),Je.indices&&(Je.indicesBuffer?Je.indicesBuffer.subData({data:Je.indices,offset:0}):Je.indicesBuffer=Ct.engine.createElements({data:Je.indices,count:Je.indices.length,type:re.a.UNSIGNED_INT,usage:re.a.STATIC_DRAW})),Je.dirty=!1)});case 1:case"end":return Nt.stop()}},Ue,this)}));function D(){return Qe.apply(this,arguments)}return D}()},{key:"tearDown",value:function(){this.geometry.forEach(function(D,Ue){Ue.indicesBuffer&&Ue.indicesBuffer.destroy(),Ue.attributes.forEach(function(Ct){Ct.buffer&&Ct.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},Ue=D.vertexCount,Ct=Object(H.createEntity)();return this.geometry.create(Ct,{vertexCount:Ue})}},{key:"createInstancedBufferGeometry",value:function(D){var Ue=D.maxInstancedCount,Ct=D.vertexCount,ut=Object(H.createEntity)();return this.geometry.create(ut,{maxInstancedCount:Ue,vertexCount:Ct})}}]),we}(),_e),L=ne()(pe.prototype,"geometry",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=ne()(pe.prototype,"engine",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe))||ve)},"4hNi":function(le,P,h){le.exports={EPSILON:h("NEPx"),create:h("Ej2v"),clone:h("S8zm"),fromValues:h("2GVV"),copy:h("PMMO"),set:h("4Hkj"),equals:h("F4jT"),exactEquals:h("RRY9"),add:h("+sJh"),subtract:h("cGwC"),sub:h("uPCe"),multiply:h("u6oY"),mul:h("MF6L"),divide:h("Bu3x"),div:h("Svbc"),inverse:h("QOyy"),min:h("dOXA"),max:h("+A2u"),rotate:h("sj7I"),floor:h("Cq4r"),ceil:h("zLyj"),round:h("Ska/"),scale:h("My4P"),scaleAndAdd:h("+n+1"),distance:h("M5u/"),dist:h("CGoQ"),squaredDistance:h("C3Dj"),sqrDist:h("plQd"),length:h("yEj1"),len:h("vip/"),squaredLength:h("SGks"),sqrLen:h("Yr8b"),negate:h("AzzA"),normalize:h("t8N9"),dot:h("a8Yn"),cross:h("N2HP"),lerp:h("xDUe"),random:h("L26W"),transformMat2:h("30v5"),transformMat2d:h("blMc"),transformMat3:h("Twb9"),transformMat4:h("AEOw"),forEach:h("FKLu"),limit:h("5rkR")}},"4l4a":function(le,P,h){var I=h("PnFB");le.exports=m;function m(_,M){return I(_,M,"pre")}},"5Q0V":function(le,P,h){var I=h("cDf5").default;function m(_,M){if(I(_)!=="object"||_===null)return _;var A=_[Symbol.toPrimitive];if(A!==void 0){var G=A.call(_,M||"default");if(I(G)!=="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(_)}le.exports=m,le.exports.__esModule=!0,le.exports.default=le.exports},"5rkR":function(le,P){le.exports=h;function h(I,m,_){var M=m[0]*m[0]+m[1]*m[1];if(M>_*_){var A=Math.sqrt(M);I[0]=m[0]/A*_,I[1]=m[1]/A*_}else I[0]=m[0],I[1]=m[1];return I}},"6AGu":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingInSyntax=void 0;var I=h("FV85"),m=h("LKzl"),_=function(){function M(A){this._binding=A}return M.prototype.inRequestScope=function(){return this._binding.scope=I.BindingScopeEnum.Request,new m.BindingWhenOnSyntax(this._binding)},M.prototype.inSingletonScope=function(){return this._binding.scope=I.BindingScopeEnum.Singleton,new m.BindingWhenOnSyntax(this._binding)},M.prototype.inTransientScope=function(){return this._binding.scope=I.BindingScopeEnum.Transient,new m.BindingWhenOnSyntax(this._binding)},M}();P.BindingInSyntax=_},"6B+r":function(le,P,h){"use strict";h.d(P,"a",function(){return ce});var I=h("lwsE"),m=h.n(I),_=h("PJYZ"),M=h.n(_),A=h("7W2i"),G=h.n(A),R=h("a1gu"),X=h.n(R),W=h("Nsbk"),Y=h.n(W),K=h("oDt1"),ne=h("ENEI");function ae(ee){var H=te();return function(){var re=Y()(ee),q;if(H){var ye=Y()(this).constructor;q=Reflect.construct(re,arguments,ye)}else q=re.apply(this,arguments);return X()(this,q)}}function te(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ee){return!1}}var ce=function(ee){G()(se,ee);var H=ae(se);function se(re){var q;return m()(this,se),q=H.call(this,re),q.material=void 0,q.geometry=void 0,q.aabb=new ne.a,q.aabbDirty=!0,q.model=void 0,q.visible=!0,q.children=[],Object.assign(M()(q),re),q}return se}(K.a)},"78VC":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.multiBindToService=void 0;var I=function(_){return function(M){return function(){for(var A=[],G=0;G<arguments.length;G++)A[G]=arguments[G];return A.forEach(function(R){return _.bind(R).toService(M)})}}};P.multiBindToService=I},"7W2i":function(le,P,h){var I=h("SksO");function m(_,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(M&&M.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),M&&I(_,M)}le.exports=m,le.exports.__esModule=!0,le.exports.default=le.exports},"7dW+":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Circle=void 0;var I=h("q1tI"),m=H(I),_=h("17x9"),M=H(_),A=h("/FUP"),G=H(A),R=h("3WF5"),X=H(R),W=h("QkVN"),Y=H(W),K=h("wME1"),ne=ee(K),ae=h("TM95"),te=h("xbjo"),ce=H(te);function ee(re){if(re&&re.__esModule)return re;var q={};if(re!=null)for(var ye in re)Object.prototype.hasOwnProperty.call(re,ye)&&(q[ye]=re[ye]);return q.default=re,q}function H(re){return re&&re.__esModule?re:{default:re}}var se=P.Circle=function(q){var ye=q.width,ue=q.onChange,ve=q.onSwatchHover,pe=q.colors,L=q.hex,ge=q.circleSize,_e=q.styles,Te=_e===void 0?{}:_e,we=q.circleSpacing,Qe=q.className,D=Qe===void 0?"":Qe,Ue=(0,G.default)((0,Y.default)({default:{card:{width:ye,display:"flex",flexWrap:"wrap",marginRight:-we,marginBottom:-we}}},Te)),Ct=function(Nt,Kt){return ue({hex:Nt,source:"hex"},Kt)};return m.default.createElement("div",{style:Ue.card,className:"circle-picker "+D},(0,X.default)(pe,function(ut){return m.default.createElement(ce.default,{key:ut,color:ut,onClick:Ct,onSwatchHover:ve,active:L===ut.toLowerCase(),circleSize:ge,circleSpacing:we})}))};se.propTypes={width:M.default.oneOfType([M.default.string,M.default.number]),circleSize:M.default.number,circleSpacing:M.default.number,styles:M.default.object},se.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[ne.red["500"],ne.pink["500"],ne.purple["500"],ne.deepPurple["500"],ne.indigo["500"],ne.blue["500"],ne.lightBlue["500"],ne.cyan["500"],ne.teal["500"],ne.green["500"],ne.lightGreen["500"],ne.lime["500"],ne.yellow["500"],ne.amber["500"],ne.orange["500"],ne.deepOrange["500"],ne.brown["500"],ne.blueGrey["500"]],styles:{}},P.default=(0,ae.ColorWrap)(se)},"81by":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.PhotoshopPicker=void 0;var I=h("q1tI"),m=X(I),_=h("/FUP"),M=X(_),A=h("p8yl"),G=X(A),R=h("TM95");function X(Y){return Y&&Y.__esModule?Y:{default:Y}}var W=P.PhotoshopPicker=function(K){var ne=K.onChange,ae=K.rgb,te=K.hsv,ce=K.hex,ee=(0,M.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),H=function(re,q){re["#"]?G.default.isValidHex(re["#"])&&ne({hex:re["#"],source:"hex"},q):re.r||re.g||re.b?ne({r:re.r||ae.r,g:re.g||ae.g,b:re.b||ae.b,source:"rgb"},q):(re.h||re.s||re.v)&&ne({h:re.h||te.h,s:re.s||te.s,v:re.v||te.v,source:"hsv"},q)};return m.default.createElement("div",{style:ee.fields},m.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"h",value:Math.round(te.h),onChange:H}),m.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"s",value:Math.round(te.s*100),onChange:H}),m.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"v",value:Math.round(te.v*100),onChange:H}),m.default.createElement("div",{style:ee.divider}),m.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"r",value:ae.r,onChange:H}),m.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"g",value:ae.g,onChange:H}),m.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"b",value:ae.b,onChange:H}),m.default.createElement("div",{style:ee.divider}),m.default.createElement(R.EditableInput,{style:{wrap:ee.HEXwrap,input:ee.HEXinput,label:ee.HEXlabel},label:"#",value:ce.replace("#",""),onChange:H}),m.default.createElement("div",{style:ee.fieldSymbols},m.default.createElement("div",{style:ee.symbol},"\xB0"),m.default.createElement("div",{style:ee.symbol},"%"),m.default.createElement("div",{style:ee.symbol},"%")))};P.default=W},"8J/B":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.CompactFields=void 0;var I=h("q1tI"),m=G(I),_=h("/FUP"),M=G(_),A=h("TM95");function G(X){return X&&X.__esModule?X:{default:X}}var R=P.CompactFields=function(W){var Y=W.hex,K=W.rgb,ne=W.onChange,ae=(0,M.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:Y},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),te=function(ee,H){ee.r||ee.g||ee.b?ne({r:ee.r||K.r,g:ee.g||K.g,b:ee.b||K.b,source:"rgb"},H):ne({hex:ee.hex,source:"hex"},H)};return m.default.createElement("div",{style:ae.fields,className:"flexbox-fix"},m.default.createElement("div",{style:ae.active}),m.default.createElement(A.EditableInput,{style:{wrap:ae.HEXwrap,input:ae.HEXinput,label:ae.HEXlabel},label:"hex",value:Y,onChange:te}),m.default.createElement(A.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"r",value:K.r,onChange:te}),m.default.createElement(A.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"g",value:K.g,onChange:te}),m.default.createElement(A.EditableInput,{style:{wrap:ae.RGBwrap,input:ae.RGBinput,label:ae.RGBlabel},label:"b",value:K.b,onChange:te}))};P.default=R},"8jh/":function(le,P,h){"use strict";var I=h("Mn/Q"),m=h("LGRX"),_=h("yZ5d")},"94HZ":function(le,P,h){"use strict";h.d(P,"a",function(){return Jt});var I=h("o0o1"),m=h.n(I),_=h("yXPU"),M=h.n(_),A=h("yG8O"),G=h.n(A),R=h("lwsE"),X=h.n(R),W=h("W8MJ"),Y=h.n(W),K=h("U+yc"),ne=h.n(K),ae=h("1ABj"),te=h.n(ae),ce=h("IOcx"),ee=h("4cb6"),H=h.n(ee),se=h("+uE7"),re=h("k6w6"),q,ye,ue,ve,pe,L,ge,_e,Te,we,Qe,D,Ue,Ct,ut,Nt,Kt,Je,Vt,Be,ie,un,rn,rr;function Pt(fn,Mn){var En;if(typeof Symbol=="undefined"||fn[Symbol.iterator]==null){if(Array.isArray(fn)||(En=Tn(fn))||Mn&&fn&&typeof fn.length=="number"){En&&(fn=En);var lt=0,Tt=function(){};return{s:Tt,n:function(){return lt>=fn.length?{done:!0}:{done:!1,value:fn[lt++]}},e:function(at){throw at},f:Tt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var st=!0,At=!1,Ot;return{s:function(){En=fn[Symbol.iterator]()},n:function(){var at=En.next();return st=at.done,at},e:function(at){At=!0,Ot=at},f:function(){try{!st&&En.return!=null&&En.return()}finally{if(At)throw Ot}}}}function Tn(fn,Mn){if(!!fn){if(typeof fn=="string")return ur(fn,Mn);var En=Object.prototype.toString.call(fn).slice(8,-1);if(En==="Object"&&fn.constructor&&(En=fn.constructor.name),En==="Map"||En==="Set")return Array.from(fn);if(En==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(En))return ur(fn,Mn)}}function ur(fn,Mn){(Mn==null||Mn>fn.length)&&(Mn=fn.length);for(var En=0,lt=new Array(Mn);En<Mn;En++)lt[En]=fn[En];return lt}var Jt=(q=Object(ee.injectable)(),ye=Object(ee.inject)(se.a.MeshComponentManager),ue=Object(ee.inject)(se.a.GeometryComponentManager),ve=Object(ee.inject)(se.a.MaterialComponentManager),pe=Object(ee.inject)(se.a.CullableComponentManager),L=Object(ee.inject)(se.a.TransformComponentManager),ge=Object(ee.inject)(se.a.HierarchyComponentManager),_e=Object(ee.inject)(se.a.Systems),Te=Object(ee.named)(se.a.FrameGraphSystem),we=Object(ee.inject)(se.a.RenderEngine),Qe=Object(ee.inject)(se.a.ResourcePool),q(D=(Ue=(rr=rn=function(){function fn(){var Mn=this;X()(this,fn),G()(this,"mesh",Ct,this),G()(this,"geometry",ut,this),G()(this,"material",Nt,this),G()(this,"cullable",Kt,this),G()(this,"transform",Je,this),G()(this,"hierarchy",Vt,this),G()(this,"frameGraphSystem",Be,this),G()(this,"engine",ie,this),G()(this,"resourcePool",un,this),this.modelCache={},this.setup=function(En,lt,Tt){var st=En.createRenderTarget(lt,"color buffer",{width:1,height:1,usage:re.a.RENDER_ATTACHMENT|re.a.SAMPLED|re.a.COPY_SRC});Tt.data={output:lt.write(En,st)}},this.execute=function(){var En=M()(m.a.mark(function lt(Tt,st,At){var Ot,dt,at,T,bn,an;return m.a.wrap(function(Qn){for(;;)switch(Qn.prev=Qn.next){case 0:Ot=Tt.getResourceNode(st.data.output),dt=Mn.resourcePool.getOrCreateResource(Ot.resource),at=Pt(At),Qn.prev=3,at.s();case 5:if((T=at.n()).done){Qn.next=11;break}return bn=T.value,Qn.next=9,Mn.initView(bn);case 9:Qn.next=5;break;case 11:Qn.next=16;break;case 13:Qn.prev=13,Qn.t0=Qn.catch(3),at.e(Qn.t0);case 16:return Qn.prev=16,at.f(),Qn.finish(16);case 19:an=Mn.engine.getCanvas(),dt.resize({width:an.width,height:an.height}),Mn.engine.setScissor({enable:!1}),Mn.engine.clear({framebuffer:dt,color:At[0].getClearColor(),depth:1}),Mn.engine.useFramebuffer(dt,function(){var De=Pt(At),be;try{for(De.s();!(be=De.n()).done;){var Xe=be.value;Mn.renderView(Xe)}}catch(Yt){De.e(Yt)}finally{De.f()}});case 24:case"end":return Qn.stop()}},lt,null,[[3,13,16,19]])}));return function(lt,Tt,st){return En.apply(this,arguments)}}()}return Y()(fn,[{key:"renderView",value:function(En){var lt=En.getScene(),Tt=En.getCamera(),st=Tt.getViewTransform(),At=ce.b.multiply(ce.b.create(),Tt.getPerspective(),st);Tt.getFrustum().extractFromVPMatrix(At);var Ot=En.getViewport(),dt=Ot.x,at=Ot.y,T=Ot.width,bn=Ot.height;this.engine.viewport({x:dt,y:at,width:T,height:bn});var an=Pt(lt.getEntities()),Jn;try{for(an.s();!(Jn=an.n()).done;){var Qn=Jn.value;this.renderMesh(Qn,{camera:Tt,view:En,viewMatrix:st})}}catch(De){an.e(De)}finally{an.f()}}},{key:"renderMesh",value:function(En,lt){var Tt=lt.camera,st=lt.view,At=lt.viewMatrix,Ot=this.mesh.getComponentByEntity(En);if(!(!Ot||!Ot.visible)){var dt=Ot.material,at=Ot.geometry;if(!(!at||at.dirty||!dt)){var T=this.transform.getComponentByEntity(En),bn=ce.b.multiply(ce.b.create(),At,T.worldTransform),an=st.getViewport(),Jn=an.width,Qn=an.height;dt.setUniform({projectionMatrix:Tt.getPerspective(),modelViewMatrix:bn,modelMatrix:T.worldTransform,viewMatrix:At,cameraPosition:Tt.getPosition(),u_viewport:[Jn,Qn]}),Ot.model&&(Ot.model.draw({uniforms:dt.uniforms.reduce(function(De,be){return De[be.name]=be.data,De},{})}),dt.uniforms.forEach(function(De){De.dirty=!1}),dt.dirty=!1)}}}},{key:"initMesh",value:function(){var Mn=M()(m.a.mark(function lt(Tt,st){var At,Ot,dt,at,T,bn,an,Jn;return m.a.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:if(At=this.mesh.getComponentByEntity(Tt),At){De.next=3;break}return De.abrupt("return");case 3:if(Ot=At.material,dt=At.geometry,!(!dt||dt.dirty||!Ot)){De.next=7;break}return De.abrupt("return");case 7:if(At.model){De.next=24;break}if(at="m-".concat(Ot.entity,"-g-").concat(dt.entity),!this.modelCache[at]){De.next=12;break}return At.model=this.modelCache[at],De.abrupt("return");case 12:return Ot.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),T=this.engine,bn=T.createModel,an=T.createAttribute,Jn={vs:Ot.vertexShaderGLSL,fs:Ot.fragmentShaderGLSL,defines:Ot.defines,attributes:dt.attributes.reduce(function(be,Xe){return Xe.data&&Xe.buffer&&(be[Xe.name]=an({buffer:Xe.buffer,attributes:Xe.attributes,arrayStride:Xe.arrayStride,stepMode:Xe.stepMode,divisor:Xe.stepMode==="vertex"?0:1})),be},{}),uniforms:Ot.uniforms.reduce(function(be,Xe){return be[Xe.name]=Xe.data,be},{}),scissor:{enable:!0,box:function(){return st.getViewport()}}},Ot.cull&&(Jn.cull=Ot.cull),Ot.depth&&(Jn.depth=Ot.depth),Ot.blend&&(Jn.blend=Ot.blend),dt.indicesBuffer&&(Jn.elements=dt.indicesBuffer),dt.maxInstancedCount&&(Jn.instances=dt.maxInstancedCount,Jn.count=dt.vertexCount||3),De.next=22,bn(Jn);case 22:At.model=De.sent,this.modelCache[at]=At.model;case 24:case"end":return De.stop()}},lt,this)}));function En(lt,Tt){return Mn.apply(this,arguments)}return En}()},{key:"initView",value:function(){var Mn=M()(m.a.mark(function lt(Tt){var st,At,Ot,dt;return m.a.wrap(function(T){for(;;)switch(T.prev=T.next){case 0:st=Tt.getScene(),At=Pt(st.getEntities()),T.prev=2,At.s();case 4:if((Ot=At.n()).done){T.next=10;break}return dt=Ot.value,T.next=8,this.initMesh(dt,Tt);case 8:T.next=4;break;case 10:T.next=15;break;case 12:T.prev=12,T.t0=T.catch(2),At.e(T.t0);case 15:return T.prev=15,At.f(),T.finish(15);case 18:case"end":return T.stop()}},lt,this,[[2,12,15,18]])}));function En(lt){return Mn.apply(this,arguments)}return En}()}]),fn}(),rn.IDENTIFIER="Render Pass",rr),Ct=ne()(Ue.prototype,"mesh",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut=ne()(Ue.prototype,"geometry",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=ne()(Ue.prototype,"material",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kt=ne()(Ue.prototype,"cullable",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=ne()(Ue.prototype,"transform",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vt=ne()(Ue.prototype,"hierarchy",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=ne()(Ue.prototype,"frameGraphSystem",[_e,Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=ne()(Ue.prototype,"engine",[we],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),un=ne()(Ue.prototype,"resourcePool",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue))||D)},"98GK":function(le,P,h){var I=h("3z9K");le.exports=m;function m(_){var M=0,A=[],G={},R=[];function X(W){var Y=G[W]={onStack:!0,lowlink:M,index:M++};if(A.push(W),_.successors(W).forEach(function(ae){I.has(G,ae)?G[ae].onStack&&(Y.lowlink=Math.min(Y.lowlink,G[ae].index)):(X(ae),Y.lowlink=Math.min(Y.lowlink,G[ae].lowlink))}),Y.lowlink===Y.index){var K=[],ne;do ne=A.pop(),G[ne].onStack=!1,K.push(ne);while(W!==ne);R.push(K)}}return _.nodes().forEach(function(W){I.has(G,W)||X(W)}),R}},"9F0J":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I=Object.assign||function(R){for(var X=1;X<arguments.length;X++){var W=arguments[X];for(var Y in W)Object.prototype.hasOwnProperty.call(W,Y)&&(R[Y]=W[Y])}return R},m=h("q1tI"),_=M(m);function M(R){return R&&R.__esModule?R:{default:R}}function A(R,X){var W={};for(var Y in R)X.indexOf(Y)>=0||!Object.prototype.hasOwnProperty.call(R,Y)||(W[Y]=R[Y]);return W}var G=24;P.default=function(R){var X=R.fill,W=X===void 0?"currentColor":X,Y=R.width,K=Y===void 0?G:Y,ne=R.height,ae=ne===void 0?G:ne,te=R.style,ce=te===void 0?{}:te,ee=A(R,["fill","width","height","style"]);return _.default.createElement("svg",I({viewBox:"0 0 "+G+" "+G,style:I({fill:W,width:K,height:ae},ce)},ee),_.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},"9Fde":function(le,P,h){"use strict";var I=this&&this.__awaiter||function(H,se,re,q){function ye(ue){return ue instanceof re?ue:new re(function(ve){ve(ue)})}return new(re||(re=Promise))(function(ue,ve){function pe(_e){try{ge(q.next(_e))}catch(Te){ve(Te)}}function L(_e){try{ge(q.throw(_e))}catch(Te){ve(Te)}}function ge(_e){_e.done?ue(_e.value):ye(_e.value).then(pe,L)}ge((q=q.apply(H,se||[])).next())})},m=this&&this.__generator||function(H,se){var re={label:0,sent:function(){if(ue[0]&1)throw ue[1];return ue[1]},trys:[],ops:[]},q,ye,ue,ve;return ve={next:pe(0),throw:pe(1),return:pe(2)},typeof Symbol=="function"&&(ve[Symbol.iterator]=function(){return this}),ve;function pe(ge){return function(_e){return L([ge,_e])}}function L(ge){if(q)throw new TypeError("Generator is already executing.");for(;re;)try{if(q=1,ye&&(ue=ge[0]&2?ye.return:ge[0]?ye.throw||((ue=ye.return)&&ue.call(ye),0):ye.next)&&!(ue=ue.call(ye,ge[1])).done)return ue;switch(ye=0,ue&&(ge=[ge[0]&2,ue.value]),ge[0]){case 0:case 1:ue=ge;break;case 4:return re.label++,{value:ge[1],done:!1};case 5:re.label++,ye=ge[1],ge=[0];continue;case 7:ge=re.ops.pop(),re.trys.pop();continue;default:if(ue=re.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(ge[0]===6||ge[0]===2)){re=0;continue}if(ge[0]===3&&(!ue||ge[1]>ue[0]&&ge[1]<ue[3])){re.label=ge[1];break}if(ge[0]===6&&re.label<ue[1]){re.label=ue[1],ue=ge;break}if(ue&&re.label<ue[2]){re.label=ue[2],re.ops.push(ge);break}ue[2]&&re.ops.pop(),re.trys.pop();continue}ge=se.call(H,re)}catch(_e){ge=[6,_e],ye=0}finally{q=ue=0}if(ge[0]&5)throw ge[1];return{value:ge[0]?ge[1]:void 0,done:!0}}},_=this&&this.__spreadArray||function(H,se){for(var re=0,q=se.length,ye=H.length;re<q;re++,ye++)H[ye]=se[re];return H};Object.defineProperty(P,"__esModule",{value:!0}),P.Container=void 0;var M=h("LgvC"),A=h("MON2"),G=h("FV85"),R=h("xfSm"),X=h("wnjb"),W=h("h7MG"),Y=h("aPG5"),K=h("gzZq"),ne=h("d9O0"),ae=h("ujMp"),te=h("HpQ9"),ce=h("AwBQ"),ee=function(){function H(se){this._appliedMiddleware=[];var re=se||{};if(typeof re!="object")throw new Error(""+A.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(re.defaultScope===void 0)re.defaultScope=G.BindingScopeEnum.Transient;else if(re.defaultScope!==G.BindingScopeEnum.Singleton&&re.defaultScope!==G.BindingScopeEnum.Transient&&re.defaultScope!==G.BindingScopeEnum.Request)throw new Error(""+A.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(re.autoBindInjectable===void 0)re.autoBindInjectable=!1;else if(typeof re.autoBindInjectable!="boolean")throw new Error(""+A.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(re.skipBaseClassChecks===void 0)re.skipBaseClassChecks=!1;else if(typeof re.skipBaseClassChecks!="boolean")throw new Error(""+A.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:re.autoBindInjectable,defaultScope:re.defaultScope,skipBaseClassChecks:re.skipBaseClassChecks},this.id=ne.id(),this._bindingDictionary=new ce.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new X.MetadataReader}return H.merge=function(se,re){for(var q=[],ye=2;ye<arguments.length;ye++)q[ye-2]=arguments[ye];var ue=new H,ve=_([se,re],q).map(function(ge){return W.getBindingDictionary(ge)}),pe=W.getBindingDictionary(ue);function L(ge,_e){ge.traverse(function(Te,we){we.forEach(function(Qe){_e.add(Qe.serviceIdentifier,Qe.clone())})})}return ve.forEach(function(ge){L(ge,pe)}),ue},H.prototype.load=function(){for(var se=[],re=0;re<arguments.length;re++)se[re]=arguments[re];for(var q=this._getContainerModuleHelpersFactory(),ye=0,ue=se;ye<ue.length;ye++){var ve=ue[ye],pe=q(ve.id);ve.registry(pe.bindFunction,pe.unbindFunction,pe.isboundFunction,pe.rebindFunction)}},H.prototype.loadAsync=function(){for(var se=[],re=0;re<arguments.length;re++)se[re]=arguments[re];return I(this,void 0,void 0,function(){var q,ye,ue,ve,pe;return m(this,function(L){switch(L.label){case 0:q=this._getContainerModuleHelpersFactory(),ye=0,ue=se,L.label=1;case 1:return ye<ue.length?(ve=ue[ye],pe=q(ve.id),[4,ve.registry(pe.bindFunction,pe.unbindFunction,pe.isboundFunction,pe.rebindFunction)]):[3,4];case 2:L.sent(),L.label=3;case 3:return ye++,[3,1];case 4:return[2]}})})},H.prototype.unload=function(){for(var se=this,re=[],q=0;q<arguments.length;q++)re[q]=arguments[q];var ye=function(ve){return function(pe){return pe.moduleId===ve}};re.forEach(function(ue){var ve=ye(ue.id);se._bindingDictionary.removeByCondition(ve)})},H.prototype.bind=function(se){var re=this.options.defaultScope||G.BindingScopeEnum.Transient,q=new M.Binding(se,re);return this._bindingDictionary.add(se,q),new K.BindingToSyntax(q)},H.prototype.rebind=function(se){return this.unbind(se),this.bind(se)},H.prototype.unbind=function(se){try{this._bindingDictionary.remove(se)}catch(re){throw new Error(A.CANNOT_UNBIND+" "+ae.getServiceIdentifierAsString(se))}},H.prototype.unbindAll=function(){this._bindingDictionary=new ce.Lookup},H.prototype.isBound=function(se){var re=this._bindingDictionary.hasKey(se);return!re&&this.parent&&(re=this.parent.isBound(se)),re},H.prototype.isBoundNamed=function(se,re){return this.isBoundTagged(se,R.NAMED_TAG,re)},H.prototype.isBoundTagged=function(se,re,q){var ye=!1;if(this._bindingDictionary.hasKey(se)){var ue=this._bindingDictionary.get(se),ve=W.createMockRequest(this,se,re,q);ye=ue.some(function(pe){return pe.constraint(ve)})}return!ye&&this.parent&&(ye=this.parent.isBoundTagged(se,re,q)),ye},H.prototype.snapshot=function(){this._snapshots.push(te.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},H.prototype.restore=function(){var se=this._snapshots.pop();if(se===void 0)throw new Error(A.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=se.bindings,this._middleware=se.middleware},H.prototype.createChild=function(se){var re=new H(se||this.options);return re.parent=this,re},H.prototype.applyMiddleware=function(){for(var se=[],re=0;re<arguments.length;re++)se[re]=arguments[re];this._appliedMiddleware=this._appliedMiddleware.concat(se);var q=this._middleware?this._middleware:this._planAndResolve();this._middleware=se.reduce(function(ye,ue){return ue(ye)},q)},H.prototype.applyCustomMetadataReader=function(se){this._metadataReader=se},H.prototype.get=function(se){return this._get(!1,!1,G.TargetTypeEnum.Variable,se)},H.prototype.getTagged=function(se,re,q){return this._get(!1,!1,G.TargetTypeEnum.Variable,se,re,q)},H.prototype.getNamed=function(se,re){return this.getTagged(se,R.NAMED_TAG,re)},H.prototype.getAll=function(se){return this._get(!0,!0,G.TargetTypeEnum.Variable,se)},H.prototype.getAllTagged=function(se,re,q){return this._get(!1,!0,G.TargetTypeEnum.Variable,se,re,q)},H.prototype.getAllNamed=function(se,re){return this.getAllTagged(se,R.NAMED_TAG,re)},H.prototype.resolve=function(se){var re=this.createChild();return re.bind(se).toSelf(),this._appliedMiddleware.forEach(function(q){re.applyMiddleware(q)}),re.get(se)},H.prototype._getContainerModuleHelpersFactory=function(){var se=this,re=function(L,ge){L._binding.moduleId=ge},q=function(L){return function(ge){var _e=se.bind.bind(se),Te=_e(ge);return re(Te,L),Te}},ye=function(L){return function(ge){var _e=se.unbind.bind(se);_e(ge)}},ue=function(L){return function(ge){var _e=se.isBound.bind(se);return _e(ge)}},ve=function(L){return function(ge){var _e=se.rebind.bind(se),Te=_e(ge);return re(Te,L),Te}};return function(pe){return{bindFunction:q(pe),isboundFunction:ue(pe),rebindFunction:ve(pe),unbindFunction:ye(pe)}}},H.prototype._get=function(se,re,q,ye,ue,ve){var pe=null,L={avoidConstraints:se,contextInterceptor:function(_e){return _e},isMultiInject:re,key:ue,serviceIdentifier:ye,targetType:q,value:ve};if(this._middleware){if(pe=this._middleware(L),pe==null)throw new Error(A.INVALID_MIDDLEWARE_RETURN)}else pe=this._planAndResolve()(L);return pe},H.prototype._planAndResolve=function(){var se=this;return function(re){var q=W.plan(se._metadataReader,se,re.isMultiInject,re.targetType,re.serviceIdentifier,re.key,re.value,re.avoidConstraints);q=re.contextInterceptor(q);var ye=Y.resolve(q);return ye}},H}();P.Container=ee},"9niD":function(le,P,h){"use strict";h.d(P,"p",function(){return Te}),h.d(P,"s",function(){return we}),h.d(P,"u",function(){return eM}),h.d(P,"v",function(){return O2}),h.d(P,"J",function(){return Ro}),h.d(P,"D",function(){return Kk}),h.d(P,"k",function(){return Xa}),h.d(P,"A",function(){return Ri}),h.d(P,"x",function(){return Eo}),h.d(P,"z",function(){return Ms}),h.d(P,"y",function(){return za}),h.d(P,"B",function(){return MK}),h.d(P,"I",function(){return OD}),h.d(P,"E",function(){return A8}),h.d(P,"o",function(){return ge}),h.d(P,"G",function(){return j8}),h.d(P,"q",function(){return QC}),h.d(P,"n",function(){return GK}),h.d(P,"F",function(){return zK}),h.d(P,"i",function(){return vi}),h.d(P,"h",function(){return nl}),h.d(P,"K",function(){return zc}),h.d(P,"l",function(){return Zc}),h.d(P,"e",function(){return XK}),h.d(P,"c",function(){return JK}),h.d(P,"a",function(){return wY}),h.d(P,"C",function(){return xY}),h.d(P,"d",function(){return VY}),h.d(P,"f",function(){return hj}),h.d(P,"H",function(){return vj}),h.d(P,"b",function(){return XY}),h.d(P,"r",function(){return NZ}),h.d(P,"m",function(){return Bj}),h.d(P,"j",function(){return Uh}),h.d(P,"g",function(){return lJ}),h.d(P,"w",function(){return lE}),h.d(P,"t",function(){return ic});var I={};h.r(I),h.d(I,"isArray",function(){return zi}),h.d(I,"isArrayLike",function(){return Er}),h.d(I,"uniq",function(){return nt}),h.d(I,"union",function(){return Wf}),h.d(I,"sortedIndex",function(){return Fd}),h.d(I,"sortedIndexBy",function(){return Mr}),h.d(I,"sortBy",function(){return vo}),h.d(I,"groupBy",function(){return Dc}),h.d(I,"difference",function(){return Oa}),h.d(I,"max",function(){return bt}),h.d(I,"diff",function(){return vt});var m={};h.r(m),h.d(m,"has",function(){return yn}),h.d(m,"pick",function(){return Dg}),h.d(m,"forIn",function(){return ym}),h.d(m,"merge",function(){return aO}),h.d(m,"extend",function(){return oO}),h.d(m,"isEqual",function(){return uO}),h.d(m,"isEmpty",function(){return hO}),h.d(m,"isObject",function(){return It}),h.d(m,"isPlainObject",function(){return wm}),h.d(m,"clone",function(){return sw}),h.d(m,"cloneDeep",function(){return cw}),h.d(m,"defaults",function(){return dw}),h.d(m,"defaultsDeep",function(){return Sb}),h.d(m,"applyMixins",function(){return pw}),h.d(m,"inherit",function(){return Rm}),h.d(m,"createClass",function(){return bw}),h.d(m,"ensure",function(){return Mb}),h.d(m,"getValue",function(){return oh}),h.d(m,"getNumber",function(){return Cw}),h.d(m,"getBoolean",function(){return Ew}),h.d(m,"isMaliciousProp",function(){return Nm}),h.d(m,"getByPath",function(){return Ab}),h.d(m,"setByPath",function(){return Ow}),h.d(m,"unsetByPath",function(){return Pb}),h.d(m,"flatten",function(){return jm});var _={};h.r(_),h.d(_,"isString",function(){return Sw}),h.d(_,"toString",function(){return Fi}),h.d(_,"escape",function(){return Db}),h.d(_,"unescape",function(){return _w}),h.d(_,"startsWith",function(){return zm}),h.d(_,"endsWith",function(){return Um}),h.d(_,"split",function(){return li}),h.d(_,"repeat",function(){return xl}),h.d(_,"pad",function(){return VL}),h.d(_,"padEnd",function(){return WL}),h.d(_,"padStart",function(){return XL}),h.d(_,"truncate",function(){return QL}),h.d(_,"template",function(){return M4}),h.d(_,"uniqueId",function(){return k4}),h.d(_,"eval",function(){return D4}),h.d(_,"lowerFirst",function(){return __}),h.d(_,"upperFirst",function(){return Vb}),h.d(_,"camelCase",function(){return bx}),h.d(_,"kebabCase",function(){return mA}),h.d(_,"pascalCase",function(){return F_}),h.d(_,"constantCase",function(){return B_}),h.d(_,"dotCase",function(){return G_}),h.d(_,"pathCase",function(){return z_}),h.d(_,"sentenceCase",function(){return U_}),h.d(_,"titleCase",function(){return V_}),h.d(_,"hashcode",function(){return H_}),h.d(_,"uuid",function(){return W_}),h.d(_,"sanitizeHTML",function(){return $_}),h.d(_,"getSpellingSuggestion",function(){return X_});var M={};h.r(M),h.d(M,"isNaN",function(){return Q_}),h.d(M,"isNumber",function(){return yA}),h.d(M,"isFinite",function(){return tF}),h.d(M,"isInteger",function(){return bA}),h.d(M,"isSafeInteger",function(){return aF}),h.d(M,"clamp",function(){return oF}),h.d(M,"inRange",function(){return dF}),h.d(M,"toFinite",function(){return Ug}),h.d(M,"toNumber",function(){return Sf}),h.d(M,"toInteger",function(){return wl}),h.d(M,"toSafeInteger",function(){return vF}),h.d(M,"parseInt",function(){return yF}),h.d(M,"isNumeric",function(){return Si}),h.d(M,"mod",function(){return bF}),h.d(M,"random",function(){return CF}),h.d(M,"isPercentage",function(){return OA}),h.d(M,"normalizePercentage",function(){return EF}),h.d(M,"parseCssNumeric",function(){return OF}),h.d(M,"normalizeSides",function(){return wF});var A={};h.r(A),h.d(A,"isFunction",function(){return mn}),h.d(A,"once",function(){return AF}),h.d(A,"noop",function(){return Oe}),h.d(A,"debounce",function(){return NF}),h.d(A,"defer",function(){return BF}),h.d(A,"apply",function(){return Ox}),h.d(A,"call",function(){return GF}),h.d(A,"cacher",function(){return UF}),h.d(A,"isAsyncLike",function(){return wA}),h.d(A,"isAsync",function(){return wx}),h.d(A,"toAsyncBoolean",function(){return xA}),h.d(A,"toDeferredBoolean",function(){return VF});var G={};h.r(G),h.d(G,"annotate",function(){return XF}),h.d(G,"findAnnotationsAtIndex",function(){return KF}),h.d(G,"findAnnotationsBetweenIndexes",function(){return YF}),h.d(G,"shiftAnnotations",function(){return ZF}),h.d(G,"sanitize",function(){return JF});var R={};h.r(R),h.d(R,"requestAnimationFrame",function(){return qF}),h.d(R,"cancelAnimationFrame",function(){return e6}),h.d(R,"CASE_SENSITIVE_ATTR",function(){return FA}),h.d(R,"getAttribute",function(){return BA}),h.d(R,"removeAttribute",function(){return Ix}),h.d(R,"setAttribute",function(){return Kb}),h.d(R,"setAttributes",function(){return Rx}),h.d(R,"attr",function(){return eu}),h.d(R,"qualifyAttr",function(){return Nx}),h.d(R,"kebablizeAttrs",function(){return $F}),h.d(R,"styleToObject",function(){return Zm}),h.d(R,"mergeAttrs",function(){return Yb}),h.d(R,"uniqueId",function(){return TA}),h.d(R,"ensureId",function(){return MA}),h.d(R,"isSVGGraphicsElement",function(){return $g}),h.d(R,"ns",function(){return Tf}),h.d(R,"svgVersion",function(){return Mx}),h.d(R,"createElement",function(){return HF}),h.d(R,"createElementNS",function(){return AA}),h.d(R,"createSvgElement",function(){return Mf}),h.d(R,"createSvgDocument",function(){return Wb}),h.d(R,"parseXML",function(){return PA}),h.d(R,"tagName",function(){return $b}),h.d(R,"index",function(){return kA}),h.d(R,"find",function(){return DA}),h.d(R,"findOne",function(){return IA}),h.d(R,"findParentByClass",function(){return RA}),h.d(R,"contains",function(){return NA}),h.d(R,"remove",function(){return Xb}),h.d(R,"empty",function(){return Ax}),h.d(R,"append",function(){return Px}),h.d(R,"prepend",function(){return jA}),h.d(R,"before",function(){return kx}),h.d(R,"appendTo",function(){return LA}),h.d(R,"isHTMLElement",function(){return Dx}),h.d(R,"clickable",function(){return _A}),h.d(R,"isInputElement",function(){return WF}),h.d(R,"getClass",function(){return wv}),h.d(R,"hasClass",function(){return Hb}),h.d(R,"addClass",function(){return Km}),h.d(R,"removeClass",function(){return Ym}),h.d(R,"toggleClass",function(){return Tx}),h.d(R,"setPrefixedStyle",function(){return a6}),h.d(R,"getComputedStyle",function(){return Zb}),h.d(R,"hasScrollbars",function(){return i6}),h.d(R,"getVendorPrefixedName",function(){return VA}),h.d(R,"clearSelection",function(){return o6}),h.d(R,"text",function(){return JA}),h.d(R,"breakText",function(){return b6}),h.d(R,"KAPPA",function(){return a1}),h.d(R,"sample",function(){return zx}),h.d(R,"lineToPathData",function(){return QA}),h.d(R,"polygonToPathData",function(){return qA}),h.d(R,"polylineToPathData",function(){return eP}),h.d(R,"getPointsFromSvgElement",function(){return Jm}),h.d(R,"circleToPathData",function(){return nP}),h.d(R,"ellipseToPathData",function(){return rP}),h.d(R,"rectangleToPathData",function(){return aP}),h.d(R,"rectToPathData",function(){return iP}),h.d(R,"toPath",function(){return Ux}),h.d(R,"toPathData",function(){return Vx}),h.d(R,"createSlicePathData",function(){return C6}),h.d(R,"bbox",function(){return sP}),h.d(R,"getBBox",function(){return ch}),h.d(R,"getBBoxByElementAttr",function(){return P6}),h.d(R,"getMatrixByElementAttr",function(){return k6}),h.d(R,"getTransformToElement",function(){return fh}),h.d(R,"toLocalPoint",function(){return uP}),h.d(R,"toGeometryShape",function(){return lP}),h.d(R,"getIntersection",function(){return D6}),h.d(R,"animate",function(){return cP}),h.d(R,"animateTransform",function(){return fP}),h.d(R,"animateAlongPath",function(){return vP}),h.d(R,"getBoundingOffsetRect",function(){return gP}),h.d(R,"createSVGPoint",function(){return Hx}),h.d(R,"createSVGMatrix",function(){return Kg}),h.d(R,"createSVGTransform",function(){return Yg}),h.d(R,"transformStringToMatrix",function(){return i1}),h.d(R,"matrixToTransformString",function(){return Wx}),h.d(R,"parseTransformString",function(){return o1}),h.d(R,"decomposeMatrix",function(){return Xx}),h.d(R,"matrixToScale",function(){return w6}),h.d(R,"matrixToRotation",function(){return x6}),h.d(R,"matrixToTranslation",function(){return S6}),h.d(R,"transformPoint",function(){return s1}),h.d(R,"transformLine",function(){return T6}),h.d(R,"transformPolyline",function(){return M6}),h.d(R,"transformRectangle",function(){return u1}),h.d(R,"transform",function(){return Kx}),h.d(R,"translate",function(){return Yx}),h.d(R,"rotate",function(){return Zx}),h.d(R,"scale",function(){return l1}),h.d(R,"translateAndAutoOrient",function(){return pP}),h.d(R,"MouseWheelHandle",function(){return I6}),h.d(R,"isVector",function(){return R6}),h.d(R,"createVector",function(){return N6}),h.d(R,"createVectors",function(){return j6});var X={};h.r(X),h.d(X,"block",function(){return CB}),h.d(X,"classic",function(){return EB}),h.d(X,"diamond",function(){return wB}),h.d(X,"path",function(){return SB}),h.d(X,"cross",function(){return MB}),h.d(X,"async",function(){return PB}),h.d(X,"circle",function(){return RP}),h.d(X,"circlePlus",function(){return kB}),h.d(X,"ellipse",function(){return IB});var W={};h.r(W),h.d(W,"ref",function(){return G6}),h.d(W,"refX",function(){return yP}),h.d(W,"refY",function(){return bP}),h.d(W,"refDx",function(){return z6}),h.d(W,"refDy",function(){return U6}),h.d(W,"refWidth",function(){return CP}),h.d(W,"refHeight",function(){return EP}),h.d(W,"refRx",function(){return V6}),h.d(W,"refRy",function(){return H6}),h.d(W,"refRInscribed",function(){return OP}),h.d(W,"refRCircumscribed",function(){return W6}),h.d(W,"refCx",function(){return $6}),h.d(W,"refCy",function(){return X6}),h.d(W,"refDResetOffset",function(){return wP}),h.d(W,"refDKeepOffset",function(){return K6}),h.d(W,"refPointsResetOffset",function(){return xP}),h.d(W,"refPointsKeepOffset",function(){return Y6}),h.d(W,"refR",function(){return Z6}),h.d(W,"refD",function(){return J6}),h.d(W,"refPoints",function(){return Q6}),h.d(W,"refX2",function(){return q6}),h.d(W,"refY2",function(){return eB}),h.d(W,"refWidth2",function(){return tB}),h.d(W,"refHeight2",function(){return nB}),h.d(W,"fill",function(){return rB}),h.d(W,"stroke",function(){return aB}),h.d(W,"text",function(){return AP}),h.d(W,"textWrap",function(){return iB}),h.d(W,"lineHeight",function(){return oB}),h.d(W,"textVerticalAnchor",function(){return sB}),h.d(W,"textPath",function(){return uB}),h.d(W,"annotations",function(){return lB}),h.d(W,"eol",function(){return cB}),h.d(W,"displayEmpty",function(){return fB}),h.d(W,"title",function(){return dB}),h.d(W,"xAlign",function(){return hB}),h.d(W,"yAlign",function(){return vB}),h.d(W,"resetOffset",function(){return gB}),h.d(W,"style",function(){return pB}),h.d(W,"html",function(){return mB}),h.d(W,"filter",function(){return yB}),h.d(W,"port",function(){return bB}),h.d(W,"sourceMarker",function(){return NB}),h.d(W,"targetMarker",function(){return jB}),h.d(W,"vertexMarker",function(){return LB}),h.d(W,"connection",function(){return FB}),h.d(W,"atConnectionLengthKeepGradient",function(){return NP}),h.d(W,"atConnectionLengthIgnoreGradient",function(){return BB}),h.d(W,"atConnectionRatioKeepGradient",function(){return jP}),h.d(W,"atConnectionRatioIgnoreGradient",function(){return GB}),h.d(W,"atConnectionLength",function(){return zB}),h.d(W,"atConnectionRatio",function(){return UB});var Y={};h.r(Y),h.d(Y,"dot",function(){return VB}),h.d(Y,"fixedDot",function(){return HB}),h.d(Y,"mesh",function(){return WB}),h.d(Y,"doubleMesh",function(){return $B});var K={};h.r(K),h.d(K,"outline",function(){return XB}),h.d(K,"highlight",function(){return KB}),h.d(K,"blur",function(){return YB}),h.d(K,"dropShadow",function(){return ZB}),h.d(K,"grayScale",function(){return JB}),h.d(K,"sepia",function(){return QB}),h.d(K,"saturate",function(){return qB}),h.d(K,"hueRotate",function(){return eG}),h.d(K,"invert",function(){return tG}),h.d(K,"brightness",function(){return nG}),h.d(K,"contrast",function(){return rG});var ne={};h.r(ne),h.d(ne,"flipX",function(){return LP}),h.d(ne,"flipY",function(){return _P}),h.d(ne,"flipXY",function(){return FP}),h.d(ne,"watermark",function(){return aG});var ae={};h.r(ae),h.d(ae,"className",function(){return iG}),h.d(ae,"opacity",function(){return oG}),h.d(ae,"stroke",function(){return uG});var te={};h.r(te),h.d(te,"absolute",function(){return lG}),h.d(te,"ellipse",function(){return cG}),h.d(te,"ellipseSpread",function(){return fG}),h.d(te,"line",function(){return hG}),h.d(te,"left",function(){return vG}),h.d(te,"right",function(){return gG}),h.d(te,"top",function(){return pG}),h.d(te,"bottom",function(){return mG});var ce={};h.r(ce),h.d(ce,"manual",function(){return bG}),h.d(ce,"left",function(){return CG}),h.d(ce,"right",function(){return EG}),h.d(ce,"top",function(){return OG}),h.d(ce,"bottom",function(){return wG}),h.d(ce,"outside",function(){return xG}),h.d(ce,"outsideOriented",function(){return SG}),h.d(ce,"inside",function(){return TG}),h.d(ce,"insideOriented",function(){return MG}),h.d(ce,"radial",function(){return AG}),h.d(ce,"radialOriented",function(){return PG});var ee={};h.r(ee),h.d(ee,"noop",function(){return IG}),h.d(ee,"pinRelative",function(){return jG}),h.d(ee,"pinAbsolute",function(){return LG});var H={};h.r(H),h.d(H,"center",function(){return WG}),h.d(H,"top",function(){return $G}),h.d(H,"bottom",function(){return XG}),h.d(H,"left",function(){return KG}),h.d(H,"right",function(){return YG}),h.d(H,"topLeft",function(){return ZG}),h.d(H,"topRight",function(){return JG}),h.d(H,"bottomLeft",function(){return QG}),h.d(H,"bottomRight",function(){return qG}),h.d(H,"orth",function(){return t5}),h.d(H,"nodeCenter",function(){return n5}),h.d(H,"midSide",function(){return a5});var se={};h.r(se),h.d(se,"ratio",function(){return i5}),h.d(se,"length",function(){return o5}),h.d(se,"orth",function(){return l5}),h.d(se,"closest",function(){return s5});var re={};h.r(re),h.d(re,"bbox",function(){return rk}),h.d(re,"rect",function(){return f5}),h.d(re,"boundary",function(){return d5}),h.d(re,"anchor",function(){return v5});var q={};h.r(q),h.d(q,"normal",function(){return g5}),h.d(q,"oneSide",function(){return p5}),h.d(q,"orth",function(){return ok}),h.d(q,"metro",function(){return I5}),h.d(q,"manhattan",function(){return pk}),h.d(q,"er",function(){return R5}),h.d(q,"loop",function(){return N5});var ye={};h.r(ye),h.d(ye,"normal",function(){return j5}),h.d(ye,"loop",function(){return L5}),h.d(ye,"rounded",function(){return _5}),h.d(ye,"smooth",function(){return F5}),h.d(ye,"jumpover",function(){return V5});var ue={};h.r(ue),h.d(ue,"Attr",function(){return Lc}),h.d(ue,"Grid",function(){return Cd}),h.d(ue,"Filter",function(){return Tv}),h.d(ue,"Background",function(){return Jg}),h.d(ue,"Highlighter",function(){return Pf}),h.d(ue,"PortLayout",function(){return gh}),h.d(ue,"PortLabelLayout",function(){return Mv}),h.d(ue,"NodeTool",function(){return Dv}),h.d(ue,"EdgeTool",function(){return Iv}),h.d(ue,"Marker",function(){return bd}),h.d(ue,"NodeAnchor",function(){return Rv}),h.d(ue,"EdgeAnchor",function(){return Nv}),h.d(ue,"ConnectionPoint",function(){return jv}),h.d(ue,"Router",function(){return Od}),h.d(ue,"Connector",function(){return bh}),h.d(ue,"ConnectionStrategy",function(){return kv}),h.d(ue,"Registry",function(){return Io}),h.d(ue,"create",function(){return H5});var ve={};h.r(ve),h.d(ve,"Empty",function(){return q5}),h.d(ve,"Rect",function(){return tz}),h.d(ve,"HeaderedRect",function(){return nz}),h.d(ve,"Circle",function(){return rz}),h.d(ve,"Cylinder",function(){return az}),h.d(ve,"Ellipse",function(){return iz}),h.d(ve,"Polygon",function(){return sz}),h.d(ve,"Polyline",function(){return uz}),h.d(ve,"Path",function(){return cz}),h.d(ve,"TextBlock",function(){return dz}),h.d(ve,"Image",function(){return hz}),h.d(ve,"BorderedImage",function(){return vz}),h.d(ve,"EmbeddedImage",function(){return gz}),h.d(ve,"InscribedImage",function(){return pz}),h.d(ve,"Edge",function(){return fS}),h.d(ve,"ShadowEdge",function(){return mz}),h.d(ve,"DoubleEdge",function(){return yz}),h.d(ve,"HTML",function(){return Fc});var pe={};h.r(pe),h.d(pe,"AutoSave",function(){return R1}),h.d(pe,"Clipboard",function(){return Rk}),h.d(pe,"Halo",function(){return B1}),h.d(pe,"MiniMap",function(){return hS}),h.d(pe,"Scroller",function(){return h0}),h.d(pe,"Selection",function(){return L1}),h.d(pe,"Snapline",function(){return vS}),h.d(pe,"Transform",function(){return gS}),h.d(pe,"Knob",function(){return dS}),h.d(pe,"Dnd",function(){return tp}),h.d(pe,"Stencil",function(){return wS});var L={};h.r(L),h.d(L,"X6_NODE_PORTAL_NODE_VIEW",function(){return sU}),h.d(L,"XFLOW_PREFIX_CLS",function(){return SS}),h.d(L,"MIN_ZOOM",function(){return TS}),h.d(L,"MAX_ZOOM",function(){return MS}),h.d(L,"XFLOW_DEFAULT_NODE",function(){return z1}),h.d(L,"XFLOW_DEFAULT_GROUP_NODE",function(){return Fk}),h.d(L,"XFLOW_DEFAULT_EDGE",function(){return AS}),h.d(L,"LOCAL_STORAGE_KEY",function(){return np}),h.d(L,"DEFAULT_NODE_HEIGHT",function(){return Bk}),h.d(L,"DEFAULT_NODE_WIDTH",function(){return Gk}),h.d(L,"XFLOW_GROUP_DEFAULT_COLLAPSED_SIZE",function(){return PS});var ge={};h.r(ge),h.d(ge,"isModelExistUtil",function(){return D8}),h.d(ge,"getModelUtil",function(){return $o}),h.d(ge,"useModelValueUtil",function(){return Xo}),h.d(ge,"GRAPH_ENABLE_MULTI_SELECT",function(){return a2}),h.d(ge,"GRAPH_FULLSCREEN",function(){return D0}),h.d(ge,"IS_NODE_SELECTED",function(){return i2}),h.d(ge,"IS_GROUP_SELECTED",function(){return o2}),h.d(ge,"IS_NORMAL_NODES_SELECTED",function(){return s2}),h.d(ge,"SELECTED_CELL",function(){return u2}),h.d(ge,"SELECTED_CELLS",function(){return Th}),h.d(ge,"SELECTED_NODE",function(){return l2}),h.d(ge,"SELECTED_NODES",function(){return $v}),h.d(ge,"SELECTED_EDGES",function(){return tT}),h.d(ge,"SELECTED_GROUPS",function(){return c2}),h.d(ge,"CONTEXTMENU_NODE",function(){return nT}),h.d(ge,"CONTEXTMENU_EDGE",function(){return rT}),h.d(ge,"CONTEXTMENU_TARGET",function(){return f2}),h.d(ge,"GRAPH_META",function(){return d2}),h.d(ge,"GRAPH_SCALE",function(){return h2}),h.d(ge,"COMMAND_REDOABLE",function(){return v2}),h.d(ge,"COMMAND_UNDOABLE",function(){return g2}),h.d(ge,"COMMAND_GLOBALS",function(){return p2}),h.d(ge,"HISTORY_UNDOABLE",function(){return m2}),h.d(ge,"HISTORY_REDOABLE",function(){return y2});var _e={};h.r(_e),h.d(_e,"ProcessNode",function(){return PJ}),h.d(_e,"DecisionNode",function(){return kJ}),h.d(_e,"ConnectorNode",function(){return DJ}),h.d(_e,"DataIONode",function(){return IJ}),h.d(_e,"TerminalNode",function(){return RJ}),h.d(_e,"DatabaseNode",function(){return NJ}),h.d(_e,"HardDiskNode",function(){return jJ}),h.d(_e,"StroedDataNode",function(){return LJ}),h.d(_e,"DocumentNode",function(){return _J}),h.d(_e,"MultiDocumentNode",function(){return FJ}),h.d(_e,"PredefinedProcessNode",function(){return BJ}),h.d(_e,"ExtractNode",function(){return GJ}),h.d(_e,"MergeNode",function(){return zJ}),h.d(_e,"OrNode",function(){return UJ}),h.d(_e,"ManualInputNode",function(){return VJ}),h.d(_e,"PreparationNode",function(){return HJ}),h.d(_e,"DelayNode",function(){return WJ}),h.d(_e,"ManualOperationNode",function(){return $J}),h.d(_e,"DisplayNode",function(){return XJ}),h.d(_e,"OffPageLinkNode",function(){return KJ}),h.d(_e,"NoteLeftNode",function(){return YJ}),h.d(_e,"NoteRightNode",function(){return ZJ}),h.d(_e,"InternalStorageNode",function(){return JJ}),h.d(_e,"TextNode",function(){return QJ});var Te=h("vlGe"),we;(function(o){var i;(function(n){n.TOP="top",n.BOTTOM="bottom",n.RIGHT="right",n.LEFT="left"})(i=o.AnchorGroup||(o.AnchorGroup={}));var r;(function(n){n.INPUT="input",n.OUTPUT="output"})(r=o.AnchorType||(o.AnchorType={}))})(we||(we={}));var Qe=h("oBTY"),D=h("qLMh"),Ue=h("tJVT");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ct=function(i,r){return Ct=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])},Ct(i,r)};function ut(o,i){Ct(o,i);function r(){this.constructor=o}o.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}var Nt=function(){return Nt=Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Nt.apply(this,arguments)};function Kt(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r}function Je(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t}function Vt(o,i){return function(r,n){i(r,n,o)}}function Be(o,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,i)}function ie(o,i,r,n){function e(t){return t instanceof r?t:new r(function(a){a(t)})}return new(r||(r=Promise))(function(t,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?t(c.value):e(c.value).then(s,u)}l((n=n.apply(o,i||[])).next())})}function un(o,i){var r={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},n,e,t,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,e&&(t=l[0]&2?e.return:l[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,l[1])).done)return t;switch(e=0,t&&(l=[l[0]&2,t.value]),l[0]){case 0:case 1:t=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,e=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(t=r.trys,!(t=t.length>0&&t[t.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!t||l[1]>t[0]&&l[1]<t[3])){r.label=l[1];break}if(l[0]===6&&r.label<t[1]){r.label=t[1],t=l;break}if(t&&r.label<t[2]){r.label=t[2],r.ops.push(l);break}t[2]&&r.ops.pop(),r.trys.pop();continue}l=i.call(o,r)}catch(c){l=[6,c],e=0}finally{n=t=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function rn(o,i,r,n){n===void 0&&(n=r),o[n]=i[r]}function rr(o,i){for(var r in o)r!=="default"&&!i.hasOwnProperty(r)&&(i[r]=o[r])}function Pt(o){var i=typeof Symbol=="function"&&Symbol.iterator,r=i&&o[i],n=0;if(r)return r.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tn(o,i){var r=typeof Symbol=="function"&&o[Symbol.iterator];if(!r)return o;var n=r.call(o),e,t=[],a;try{for(;(i===void 0||i-- >0)&&!(e=n.next()).done;)t.push(e.value)}catch(s){a={error:s}}finally{try{e&&!e.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return t}function ur(){for(var o=[],i=0;i<arguments.length;i++)o=o.concat(Tn(arguments[i]));return o}function Jt(){for(var o=0,i=0,r=arguments.length;i<r;i++)o+=arguments[i].length;for(var n=Array(o),e=0,i=0;i<r;i++)for(var t=arguments[i],a=0,s=t.length;a<s;a++,e++)n[e]=t[a];return n}function fn(o){return this instanceof fn?(this.v=o,this):new fn(o)}function Mn(o,i,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(o,i||[]),e,t=[];return e={},a("next"),a("throw"),a("return"),e[Symbol.asyncIterator]=function(){return this},e;function a(d){n[d]&&(e[d]=function(v){return new Promise(function(p,y){t.push([d,v,p,y])>1||s(d,v)})})}function s(d,v){try{u(n[d](v))}catch(p){f(t[0][3],p)}}function u(d){d.value instanceof fn?Promise.resolve(d.value.v).then(l,c):f(t[0][2],d)}function l(d){s("next",d)}function c(d){s("throw",d)}function f(d,v){d(v),t.shift(),t.length&&s(t[0][0],t[0][1])}}function En(o){var i,r;return i={},n("next"),n("throw",function(e){throw e}),n("return"),i[Symbol.iterator]=function(){return this},i;function n(e,t){i[e]=o[e]?function(a){return(r=!r)?{value:fn(o[e](a)),done:e==="return"}:t?t(a):a}:t}}function lt(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=o[Symbol.asyncIterator],r;return i?i.call(o):(o=typeof Pt=="function"?Pt(o):o[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(t){r[t]=o[t]&&function(a){return new Promise(function(s,u){a=o[t](a),e(s,u,a.done,a.value)})}}function e(t,a,s,u){Promise.resolve(u).then(function(l){t({value:l,done:s})},a)}}function Tt(o,i){return Object.defineProperty?Object.defineProperty(o,"raw",{value:i}):o.raw=i,o}function st(o){if(o&&o.__esModule)return o;var i={};if(o!=null)for(var r in o)Object.hasOwnProperty.call(o,r)&&(i[r]=o[r]);return i.default=o,i}function At(o){return o&&o.__esModule?o:{default:o}}function Ot(o,i){if(!i.has(o))throw new TypeError("attempted to get private field on non-instance");return i.get(o)}function dt(o,i,r){if(!i.has(o))throw new TypeError("attempted to set private field on non-instance");return i.set(o,r),r}var at=h("q1tI"),T=h.n(at),bn=h("TSYQ"),an=h.n(bn),Jn=h("mNvP"),Qn=h("rAM+"),De=h("fWQN"),be=h("mtLc"),Xe=h("jrin"),Yt=h("EVdn"),ln=h.n(Yt),lr=h("si6p"),Hr=!1,ar=!1,mr=!1,yr=!1,kr=!1,Ur=!1,Va=!1,da=!1,Ji=!1,jo=!1,ri=!1,ji=!1,Li=!1,Aa=!1,ki=!1,mi=!1;if(typeof navigator=="object"){var na=navigator.userAgent;Hr=na.indexOf("Macintosh")>=0,ar=!!na.match(/(iPad|iPhone|iPod)/g),mr=na.indexOf("Windows")>=0,yr=na.indexOf("MSIE")>=0,kr=!!na.match(/Trident\/7\./),Ur=!!na.match(/Edge\//),Va=na.indexOf("Mozilla/")>=0&&na.indexOf("MSIE")<0&&na.indexOf("Edge/")<0,Ji=na.indexOf("Chrome/")>=0&&na.indexOf("Edge/")<0,jo=na.indexOf("Opera/")>=0||na.indexOf("OPR/")>=0,ri=na.indexOf("Firefox/")>=0,ji=na.indexOf("AppleWebKit/")>=0&&na.indexOf("Chrome/")<0&&na.indexOf("Edge/")<0,typeof document=="object"&&(mi=!document.createElementNS||"".concat(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))!=="[object SVGForeignObjectElement]"||na.indexOf("Opera/")>=0)}if(typeof window=="object"&&(da=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,Aa=window.PointerEvent!=null&&!Hr),typeof document=="object"){Li="ontouchstart"in document.documentElement;try{var Ki=Object.defineProperty({},"passive",{get:function(){ki=!0}}),go=document.createElement("div");go.addEventListener&&go.addEventListener("click",function(){},Ki)}catch(o){}}var ra;if(function(o){o.IS_MAC=Hr,o.IS_IOS=ar,o.IS_WINDOWS=mr,o.IS_IE=yr,o.IS_IE11=kr,o.IS_EDGE=Ur,o.IS_NETSCAPE=Va,o.IS_CHROME_APP=da,o.IS_CHROME=Ji,o.IS_OPERA=jo,o.IS_FIREFOX=ri,o.IS_SAFARI=ji,o.SUPPORT_TOUCH=Li,o.SUPPORT_POINTER=Aa,o.SUPPORT_PASSIVE=ki,o.NO_FOREIGNOBJECT=mi,o.SUPPORT_FOREIGNOBJECT=!o.NO_FOREIGNOBJECT}(ra||(ra={})),function(o){function i(){var t=window.module;return t!=null&&t.hot!=null&&t.hot.status!=null?t.hot.status():"unkonwn"}o.getHMRStatus=i;function r(){return i()==="apply"}o.isApplyingHMR=r;var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function e(t){var a=document.createElement(n[t]||"div"),s="on".concat(t),u=s in a;return u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),u}o.isEventSupported=e}(ra||(ra={})),ra.SUPPORT_PASSIVE){ln.a.event.special.touchstart={setup:function(i,r,n){if(!this.addEventListener)return!1;this.addEventListener("touchstart",n,{passive:!0})}};var di=ln.a.event.special.mousewheel;if(di){var So=di.setup;di.setup=function(){var o=this,i=this.addEventListener;if(!i)return!1;this.addEventListener=function(r,n){i.call(o,r,n,{passive:!0})},So.call(this),this.addEventListener=i}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(o){o.forEach(function(i){Object.prototype.hasOwnProperty.call(i,"append")||Object.defineProperty(i,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var n=document.createDocumentFragment(),e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];t.forEach(function(s){var u=s instanceof Node;n.appendChild(u?s:document.createTextNode(String(s)))}),this.appendChild(n)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var si=function(i){return i&&i===i.window},Si=function(i){return!Array.isArray(i)&&i-parseFloat(i)+1>=0},yi=Array.isArray,zi=yi,Ko=h("Ju5/"),To=Ko.a.Symbol,po=To,Yo=Object.prototype,Us=Yo.hasOwnProperty,Wu=Yo.toString,Lo=po?po.toStringTag:void 0;function $u(o){var i=Us.call(o,Lo),r=o[Lo];try{o[Lo]=void 0;var n=!0}catch(t){}var e=Wu.call(o);return n&&(i?o[Lo]=r:delete o[Lo]),e}var iu=$u,Zo=Object.prototype,Vs=Zo.toString;function ou(o){return Vs.call(o)}var Is=ou,Hs="[object Null]",Ws="[object Undefined]",su=po?po.toStringTag:void 0;function nn(o){return o==null?o===void 0?Ws:Hs:su&&su in Object(o)?iu(o):Is(o)}var On=nn;function vr(o){var i=typeof o;return o!=null&&(i=="object"||i=="function")}var It=vr,jt="[object AsyncFunction]",Bn="[object Function]",pn="[object GeneratorFunction]",on="[object Proxy]";function qt(o){if(!It(o))return!1;var i=On(o);return i==Bn||i==pn||i==jt||i==on}var mn=qt,vn=9007199254740991;function hr(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=vn}var Nn=hr;function Nr(o){return o!=null&&Nn(o.length)&&!mn(o)}var Er=Nr,Rr=Ko.a["__core-js_shared__"],xr=Rr,Vr=function(){var o=/[^.]+$/.exec(xr&&xr.keys&&xr.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function La(o){return!!Vr&&Vr in o}var Pr=La,Zr=Function.prototype,wr=Zr.toString;function ea(o){if(o!=null){try{return wr.call(o)}catch(i){}try{return o+""}catch(i){}}return""}var Dr=ea,ha=/[\\^$.*+?()[\]{}|]/g,ma=/^\[object .+?Constructor\]$/,Ui=Function.prototype,Mo=Object.prototype,uu=Ui.toString,ho=Mo.hasOwnProperty,$s=RegExp("^"+uu.call(ho).replace(ha,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rs(o){if(!It(o)||Pr(o))return!1;var i=mn(o)?$s:ma;return i.test(Dr(o))}var Xu=Rs;function sc(o,i){return o==null?void 0:o[i]}var uc=sc;function tf(o,i){var r=uc(o,i);return Xu(r)?r:void 0}var Ns=tf,nf=Ns(Object,"create"),Ku=nf;function Rl(){this.__data__=Ku?Ku(null):{},this.size=0}var lu=Rl;function Nl(o){var i=this.has(o)&&delete this.__data__[o];return this.size-=i?1:0,i}var Gf=Nl,jl="__lodash_hash_undefined__",lc=Object.prototype,rf=lc.hasOwnProperty;function af(o){var i=this.__data__;if(Ku){var r=i[o];return r===jl?void 0:r}return rf.call(i,o)?i[o]:void 0}var wi=af,hi=Object.prototype,ol=hi.hasOwnProperty;function gs(o){var i=this.__data__;return Ku?i[o]!==void 0:ol.call(i,o)}var xu=gs,sl="__lodash_hash_undefined__";function Ll(o,i){var r=this.__data__;return this.size+=this.has(o)?0:1,r[o]=Ku&&i===void 0?sl:i,this}var zf=Ll;function cu(o){var i=-1,r=o==null?0:o.length;for(this.clear();++i<r;){var n=o[i];this.set(n[0],n[1])}}cu.prototype.clear=lu,cu.prototype.delete=Gf,cu.prototype.get=wi,cu.prototype.has=xu,cu.prototype.set=zf;var cc=cu;function Qi(){this.__data__=[],this.size=0}var _l=Qi;function Su(o,i){return o===i||o!==o&&i!==i}var fu=Su;function du(o,i){for(var r=o.length;r--;)if(fu(o[r][0],i))return r;return-1}var _o=du,U=Array.prototype,S=U.splice;function z(o){var i=this.__data__,r=_o(i,o);if(r<0)return!1;var n=i.length-1;return r==n?i.pop():S.call(i,r,1),--this.size,!0}var V=z;function oe(o){var i=this.__data__,r=_o(i,o);return r<0?void 0:i[r][1]}var Ce=oe;function Ee(o){return _o(this.__data__,o)>-1}var Ge=Ee;function it(o,i){var r=this.__data__,n=_o(r,o);return n<0?(++this.size,r.push([o,i])):r[n][1]=i,this}var yt=it;function tn(o){var i=-1,r=o==null?0:o.length;for(this.clear();++i<r;){var n=o[i];this.set(n[0],n[1])}}tn.prototype.clear=_l,tn.prototype.delete=V,tn.prototype.get=Ce,tn.prototype.has=Ge,tn.prototype.set=yt;var wn=tn,cr=Ns(Ko.a,"Map"),en=cr;function zn(){this.size=0,this.__data__={hash:new cc,map:new(en||wn),string:new cc}}var ia=zn;function Fr(o){var i=typeof o;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?o!=="__proto__":o===null}var bi=Fr;function Fo(o,i){var r=o.__data__;return bi(i)?r[typeof i=="string"?"string":"hash"]:r.map}var Vi=Fo;function Ao(o){var i=Vi(this,o).delete(o);return this.size-=i?1:0,i}var oo=Ao;function va(o){return Vi(this,o).get(o)}var ps=va;function ei(o){return Vi(this,o).has(o)}var Ti=ei;function Mi(o,i){var r=Vi(this,o),n=r.size;return r.set(o,i),this.size+=r.size==n?0:1,this}var ul=Mi;function eo(o){var i=-1,r=o==null?0:o.length;for(this.clear();++i<r;){var n=o[i];this.set(n[0],n[1])}}eo.prototype.clear=ia,eo.prototype.delete=oo,eo.prototype.get=ps,eo.prototype.has=Ti,eo.prototype.set=ul;var Jo=eo,hu="__lodash_hash_undefined__";function vu(o){return this.__data__.set(o,hu),this}var js=vu;function Po(o){return this.__data__.has(o)}var ms=Po;function ko(o){var i=-1,r=o==null?0:o.length;for(this.__data__=new Jo;++i<r;)this.add(o[i])}ko.prototype.add=ko.prototype.push=js,ko.prototype.has=ms;var mo=ko;function Yu(o,i,r,n){for(var e=o.length,t=r+(n?1:-1);n?t--:++t<e;)if(i(o[t],t,o))return t;return-1}var ys=Yu;function ui(o){return o!==o}var gu=ui;function as(o,i,r){for(var n=r-1,e=o.length;++n<e;)if(o[n]===i)return n;return-1}var Xs=as;function of(o,i,r){return i===i?Xs(o,i,r):ys(o,gu,r)}var Fl=of;function fc(o,i){var r=o==null?0:o.length;return!!r&&Fl(o,i,0)>-1}var Qo=fc;function Bl(o,i,r){for(var n=-1,e=o==null?0:o.length;++n<e;)if(r(i,o[n]))return!0;return!1}var Ls=Bl;function ll(o,i){return o.has(i)}var b=ll,k=Ns(Ko.a,"Set"),J=k;function he(){}var Oe=he;function Re(o){var i=-1,r=Array(o.size);return o.forEach(function(n){r[++i]=n}),r}var Ke=Re,qe=1/0,pt=J&&1/Ke(new J([,-0]))[1]==qe?function(o){return new J(o)}:Oe,wt=pt,zt=200;function Fe(o,i,r){var n=-1,e=Qo,t=o.length,a=!0,s=[],u=s;if(r)a=!1,e=Ls;else if(t>=zt){var l=i?null:wt(o);if(l)return Ke(l);a=!1,e=b,u=new mo}else u=i?[]:s;e:for(;++n<t;){var c=o[n],f=i?i(c):c;if(c=r||c!==0?c:0,a&&f===f){for(var d=u.length;d--;)if(u[d]===f)continue e;i&&u.push(f),s.push(c)}else e(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}var Se=Fe;function He(o){return o&&o.length?Se(o):[]}var nt=He;function Pe(o,i){for(var r=-1,n=i.length,e=o.length;++r<n;)o[e+r]=i[r];return o}var Ie=Pe;function Ze(o){return o!=null&&typeof o=="object"}var Lt=Ze,Zt="[object Arguments]";function An(o){return Lt(o)&&On(o)==Zt}var Un=An,Ln=Object.prototype,Wr=Ln.hasOwnProperty,Gr=Ln.propertyIsEnumerable,Br=Un(function(){return arguments}())?Un:function(o){return Lt(o)&&Wr.call(o,"callee")&&!Gr.call(o,"callee")},Xr=Br,_a=po?po.isConcatSpreadable:void 0;function ga(o){return zi(o)||Xr(o)||!!(_a&&o&&o[_a])}var Na=ga;function ta(o,i,r,n,e){var t=-1,a=o.length;for(r||(r=Na),e||(e=[]);++t<a;){var s=o[t];i>0&&r(s)?i>1?ta(s,i-1,r,n,e):Ie(e,s):n||(e[e.length]=s)}return e}var Yr=ta;function _i(o){return o}var bs=_i;function Gl(o,i,r){switch(r.length){case 0:return o.call(i);case 1:return o.call(i,r[0]);case 2:return o.call(i,r[0],r[1]);case 3:return o.call(i,r[0],r[1],r[2])}return o.apply(i,r)}var dc=Gl,Zh=Math.max;function ig(o,i,r){return i=Zh(i===void 0?o.length-1:i,0),function(){for(var n=arguments,e=-1,t=Zh(n.length-i,0),a=Array(t);++e<t;)a[e]=n[i+e];e=-1;for(var s=Array(i+1);++e<i;)s[e]=n[e];return s[i]=r(a),dc(o,this,s)}}var sf=ig;function zl(o){return function(){return o}}var cl=zl,Bo=function(){try{var o=Ns(Object,"defineProperty");return o({},"",{}),o}catch(i){}}(),Ul=Bo,Jh=Ul?function(o,i){return Ul(o,"toString",{configurable:!0,enumerable:!1,value:cl(i),writable:!0})}:bs,Vl=Jh,Uf=800,Qh=16,Vf=Date.now;function hc(o){var i=0,r=0;return function(){var n=Vf(),e=Qh-(n-r);if(r=n,e>0){if(++i>=Uf)return arguments[0]}else i=0;return o.apply(void 0,arguments)}}var jd=hc,Wp=jd(Vl),Ld=Wp;function og(o,i){return Ld(sf(o,i,bs),o+"")}var Tu=og;function Hf(o){return Lt(o)&&Er(o)}var vc=Hf,$p=Tu(function(o){return Se(Yr(o,1,vc,!0))}),Wf=$p,Xp="[object Symbol]";function Hl(o){return typeof o=="symbol"||Lt(o)&&On(o)==Xp}var xi=Hl,is=4294967295,sg=is-1,ug=Math.floor,qh=Math.min;function lg(o,i,r,n){var e=0,t=o==null?0:o.length;if(t===0)return 0;i=r(i);for(var a=i!==i,s=i===null,u=xi(i),l=i===void 0;e<t;){var c=ug((e+t)/2),f=r(o[c]),d=f!==void 0,v=f===null,p=f===f,y=xi(f);if(a)var C=n||p;else l?C=p&&(n||d):s?C=p&&d&&(n||!v):u?C=p&&d&&!v&&(n||!y):v||y?C=!1:C=n?f<=i:f<i;C?e=c+1:t=c}return qh(t,sg)}var $f=lg,uf=4294967295,_d=uf>>>1;function gc(o,i,r){var n=0,e=o==null?n:o.length;if(typeof i=="number"&&i===i&&e<=_d){for(;n<e;){var t=n+e>>>1,a=o[t];a!==null&&!xi(a)&&(r?a<=i:a<i)?n=t+1:e=t}return e}return $f(o,i,bs,r)}var Cs=gc;function lf(o,i){return Cs(o,i)}var Fd=lf;function _s(){this.__data__=new wn,this.size=0}var ev=_s;function pc(o){var i=this.__data__,r=i.delete(o);return this.size=i.size,r}var Bd=pc;function cg(o){return this.__data__.get(o)}var fg=cg;function Xf(o){return this.__data__.has(o)}var cf=Xf,tv=200;function Le(o,i){var r=this.__data__;if(r instanceof wn){var n=r.__data__;if(!en||n.length<tv-1)return n.push([o,i]),this.size=++r.size,this;r=this.__data__=new Jo(n)}return r.set(o,i),this.size=r.size,this}var ff=Le;function fl(o){var i=this.__data__=new wn(o);this.size=i.size}fl.prototype.clear=ev,fl.prototype.delete=Bd,fl.prototype.get=fg,fl.prototype.has=cf,fl.prototype.set=ff;var os=fl;function ai(o,i){for(var r=-1,n=o==null?0:o.length;++r<n;)if(i(o[r],r,o))return!0;return!1}var Kp=ai,Yp=1,dg=2;function Wl(o,i,r,n,e,t){var a=r&Yp,s=o.length,u=i.length;if(s!=u&&!(a&&u>s))return!1;var l=t.get(o),c=t.get(i);if(l&&c)return l==i&&c==o;var f=-1,d=!0,v=r&dg?new mo:void 0;for(t.set(o,i),t.set(i,o);++f<s;){var p=o[f],y=i[f];if(n)var C=a?n(y,p,f,i,o,t):n(p,y,f,o,i,t);if(C!==void 0){if(C)continue;d=!1;break}if(v){if(!Kp(i,function(E,w){if(!b(v,w)&&(p===E||e(p,E,r,n,t)))return v.push(w)})){d=!1;break}}else if(!(p===y||e(p,y,r,n,t))){d=!1;break}}return t.delete(o),t.delete(i),d}var hg=Wl,Zp=Ko.a.Uint8Array,df=Zp;function Gd(o){var i=-1,r=Array(o.size);return o.forEach(function(n,e){r[++i]=[e,n]}),r}var Jp=Gd,dl=1,Qp=2,qp="[object Boolean]",em="[object Date]",vg="[object Error]",tm="[object Map]",hl="[object Number]",nm="[object RegExp]",rm="[object Set]",am="[object String]",hf="[object Symbol]",im="[object ArrayBuffer]",mc="[object DataView]",nv=po?po.prototype:void 0,Kf=nv?nv.valueOf:void 0;function Mu(o,i,r,n,e,t,a){switch(r){case mc:if(o.byteLength!=i.byteLength||o.byteOffset!=i.byteOffset)return!1;o=o.buffer,i=i.buffer;case im:return!(o.byteLength!=i.byteLength||!t(new df(o),new df(i)));case qp:case em:case hl:return fu(+o,+i);case vg:return o.name==i.name&&o.message==i.message;case nm:case am:return o==i+"";case tm:var s=Jp;case rm:var u=n&dl;if(s||(s=Ke),o.size!=i.size&&!u)return!1;var l=a.get(o);if(l)return l==i;n|=Qp,a.set(o,i);var c=hg(s(o),s(i),n,e,t,a);return a.delete(o),c;case hf:if(Kf)return Kf.call(o)==Kf.call(i)}return!1}var gg=Mu;function om(o,i,r){var n=i(o);return zi(o)?n:Ie(n,r(o))}var pg=om;function sm(o,i){for(var r=-1,n=o==null?0:o.length,e=0,t=[];++r<n;){var a=o[r];i(a,r,o)&&(t[e++]=a)}return t}var um=sm;function mg(){return[]}var yc=mg,lm=Object.prototype,zd=lm.propertyIsEnumerable,Ud=Object.getOwnPropertySymbols,Zu=Ud?function(o){return o==null?[]:(o=Object(o),um(Ud(o),function(i){return zd.call(o,i)}))}:yc,Au=Zu;function cm(o,i){for(var r=-1,n=Array(o);++r<o;)n[r]=i(r);return n}var bc=cm,Cc=h("WOAq"),Fs=9007199254740991,Yf=/^(?:0|[1-9]\d*)$/;function vl(o,i){var r=typeof o;return i=i==null?Fs:i,!!i&&(r=="number"||r!="symbol"&&Yf.test(o))&&o>-1&&o%1==0&&o<i}var ss=vl,rv="[object Arguments]",Vd="[object Array]",Zf="[object Boolean]",vf="[object Date]",gl="[object Error]",av="[object Function]",yg="[object Map]",Jf="[object Number]",iv="[object Object]",Hd="[object RegExp]",qo="[object Set]",Wd="[object String]",ov="[object WeakMap]",Pu="[object ArrayBuffer]",Qf="[object DataView]",qf="[object Float32Array]",$l="[object Float64Array]",$d="[object Int8Array]",us="[object Int16Array]",Xd="[object Int32Array]",sv="[object Uint8Array]",bg="[object Uint8ClampedArray]",Cg="[object Uint16Array]",ed="[object Uint32Array]",Yi={};Yi[qf]=Yi[$l]=Yi[$d]=Yi[us]=Yi[Xd]=Yi[sv]=Yi[bg]=Yi[Cg]=Yi[ed]=!0,Yi[rv]=Yi[Vd]=Yi[Pu]=Yi[Zf]=Yi[Qf]=Yi[vf]=Yi[gl]=Yi[av]=Yi[yg]=Yi[Jf]=Yi[iv]=Yi[Hd]=Yi[qo]=Yi[Wd]=Yi[ov]=!1;function gf(o){return Lt(o)&&Nn(o.length)&&!!Yi[On(o)]}var Kd=gf;function uv(o){return function(i){return o(i)}}var Ju=uv,Ks=h("xutz"),td=Ks.a&&Ks.a.isTypedArray,pl=td?Ju(td):Kd,Qu=pl,Xl=Object.prototype,nd=Xl.hasOwnProperty;function rd(o,i){var r=zi(o),n=!r&&Xr(o),e=!r&&!n&&Object(Cc.a)(o),t=!r&&!n&&!e&&Qu(o),a=r||n||e||t,s=a?bc(o.length,String):[],u=s.length;for(var l in o)(i||nd.call(o,l))&&!(a&&(l=="length"||e&&(l=="offset"||l=="parent")||t&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||ss(l,u)))&&s.push(l);return s}var Kl=rd,Yl=Object.prototype;function ml(o){var i=o&&o.constructor,r=typeof i=="function"&&i.prototype||Yl;return o===r}var Ec=ml;function pf(o,i){return function(r){return o(i(r))}}var Oc=pf,Yd=Oc(Object.keys,Object),Zd=Yd,yl=Object.prototype,mf=yl.hasOwnProperty;function Eg(o){if(!Ec(o))return Zd(o);var i=[];for(var r in Object(o))mf.call(o,r)&&r!="constructor"&&i.push(r);return i}var lv=Eg;function Og(o){return Er(o)?Kl(o):lv(o)}var Zl=Og;function wg(o){return pg(o,Zl,Au)}var ad=wg,wc=1,cv=Object.prototype,fm=cv.hasOwnProperty;function fv(o,i,r,n,e,t){var a=r&wc,s=ad(o),u=s.length,l=ad(i),c=l.length;if(u!=c&&!a)return!1;for(var f=u;f--;){var d=s[f];if(!(a?d in i:fm.call(i,d)))return!1}var v=t.get(o),p=t.get(i);if(v&&p)return v==i&&p==o;var y=!0;t.set(o,i),t.set(i,o);for(var C=a;++f<u;){d=s[f];var E=o[d],w=i[d];if(n)var x=a?n(w,E,d,i,o,t):n(E,w,d,o,i,t);if(!(x===void 0?E===w||e(E,w,r,n,t):x)){y=!1;break}C||(C=d=="constructor")}if(y&&!C){var N=o.constructor,j=i.constructor;N!=j&&"constructor"in o&&"constructor"in i&&!(typeof N=="function"&&N instanceof N&&typeof j=="function"&&j instanceof j)&&(y=!1)}return t.delete(o),t.delete(i),y}var Ba=fv,dm=Ns(Ko.a,"DataView"),dv=dm,id=Ns(Ko.a,"Promise"),Jd=id,hm=Ns(Ko.a,"WeakMap"),hv=hm,Ys="[object Map]",vm="[object Object]",od="[object Promise]",Qd="[object Set]",sd="[object WeakMap]",yf="[object DataView]",ds=Dr(dv),ku=Dr(en),ud=Dr(Jd),ld=Dr(J),xc=Dr(hv),Du=On;(dv&&Du(new dv(new ArrayBuffer(1)))!=yf||en&&Du(new en)!=Ys||Jd&&Du(Jd.resolve())!=od||J&&Du(new J)!=Qd||hv&&Du(new hv)!=sd)&&(Du=function(i){var r=On(i),n=r==vm?i.constructor:void 0,e=n?Dr(n):"";if(e)switch(e){case ds:return yf;case ku:return Ys;case ud:return od;case ld:return Qd;case xc:return sd}return r});var qu=Du,cd=1,Sc="[object Arguments]",Tc="[object Array]",Es="[object Object]",fd=Object.prototype,Zs=fd.hasOwnProperty;function bf(o,i,r,n,e,t){var a=zi(o),s=zi(i),u=a?Tc:qu(o),l=s?Tc:qu(i);u=u==Sc?Es:u,l=l==Sc?Es:l;var c=u==Es,f=l==Es,d=u==l;if(d&&Object(Cc.a)(o)){if(!Object(Cc.a)(i))return!1;a=!0,c=!1}if(d&&!c)return t||(t=new os),a||Qu(o)?hg(o,i,r,n,e,t):gg(o,i,u,r,n,e,t);if(!(r&cd)){var v=c&&Zs.call(o,"__wrapped__"),p=f&&Zs.call(i,"__wrapped__");if(v||p){var y=v?o.value():o,C=p?i.value():i;return t||(t=new os),e(y,C,r,n,t)}}return d?(t||(t=new os),Ba(o,i,r,n,e,t)):!1}var Cf=bf;function dd(o,i,r,n,e){return o===i?!0:o==null||i==null||!Lt(o)&&!Lt(i)?o!==o&&i!==i:Cf(o,i,r,n,dd,e)}var Mc=dd,Ac=1,xg=2;function qd(o,i,r,n){var e=r.length,t=e,a=!n;if(o==null)return!t;for(o=Object(o);e--;){var s=r[e];if(a&&s[2]?s[1]!==o[s[0]]:!(s[0]in o))return!1}for(;++e<t;){s=r[e];var u=s[0],l=o[u],c=s[1];if(a&&s[2]){if(l===void 0&&!(u in o))return!1}else{var f=new os;if(n)var d=n(l,c,u,o,i,f);if(!(d===void 0?Mc(c,l,Ac|xg,n,f):d))return!1}}return!0}var Sg=qd;function gm(o){return o===o&&!It(o)}var vv=gm;function bl(o){for(var i=Zl(o),r=i.length;r--;){var n=i[r],e=o[n];i[r]=[n,e,vv(e)]}return i}var Os=bl;function Iu(o,i){return function(r){return r==null?!1:r[o]===i&&(i!==void 0||o in Object(r))}}var gv=Iu;function pm(o){var i=Os(o);return i.length==1&&i[0][2]?gv(i[0][0],i[0][1]):function(r){return r===o||Sg(r,o,i)}}var hd=pm,Ef=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ru=/^\w*$/;function pv(o,i){if(zi(o))return!1;var r=typeof o;return r=="number"||r=="symbol"||r=="boolean"||o==null||xi(o)?!0:Ru.test(o)||!Ef.test(o)||i!=null&&o in Object(i)}var Jl=pv,Cl="Expected a function";function El(o,i){if(typeof o!="function"||i!=null&&typeof i!="function")throw new TypeError(Cl);var r=function n(){var e=arguments,t=i?i.apply(this,e):e[0],a=n.cache;if(a.has(t))return a.get(t);var s=o.apply(this,e);return n.cache=a.set(t,s)||a,s};return r.cache=new(El.Cache||Jo),r}El.Cache=Jo;var Pc=El,eh=500;function mv(o){var i=Pc(o,function(n){return r.size===eh&&r.clear(),n}),r=i.cache;return i}var hs=mv,Nu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,so=/\\(\\)?/g,ls=hs(function(o){var i=[];return o.charCodeAt(0)===46&&i.push(""),o.replace(Nu,function(r,n,e,t){i.push(e?t.replace(so,"$1"):n||r)}),i}),th=ls;function nh(o,i){for(var r=-1,n=o==null?0:o.length,e=Array(n);++r<n;)e[r]=i(o[r],r,o);return e}var Of=nh,Tg=1/0,vd=po?po.prototype:void 0,rh=vd?vd.toString:void 0;function ah(o){if(typeof o=="string")return o;if(zi(o))return Of(o,ah)+"";if(xi(o))return rh?rh.call(o):"";var i=o+"";return i=="0"&&1/o==-Tg?"-0":i}var kc=ah;function Mg(o){return o==null?"":kc(o)}var Fi=Mg;function Ag(o,i){return zi(o)?o:Jl(o,i)?[o]:th(Fi(o))}var wf=Ag,Pg=1/0;function yv(o){if(typeof o=="string"||xi(o))return o;var i=o+"";return i=="0"&&1/o==-Pg?"-0":i}var gd=yv;function mm(o,i){i=wf(i,o);for(var r=0,n=i.length;o!=null&&r<n;)o=o[gd(i[r++])];return r&&r==n?o:void 0}var Js=mm;function bv(o,i,r){var n=o==null?void 0:Js(o,i);return n===void 0?r:n}var me=bv;function ke(o,i){return o!=null&&i in Object(o)}var ct=ke;function Bt(o,i,r){i=wf(i,o);for(var n=-1,e=i.length,t=!1;++n<e;){var a=gd(i[n]);if(!(t=o!=null&&r(o,a)))break;o=o[a]}return t||++n!=e?t:(e=o==null?0:o.length,!!e&&Nn(e)&&ss(a,e)&&(zi(o)||Xr(o)))}var Dt=Bt;function sn(o,i){return o!=null&&Dt(o,i,ct)}var Wt=sn,kn=1,ir=2;function Vn(o,i){return Jl(o)&&vv(i)?gv(gd(o),i):function(r){var n=me(r,o);return n===void 0&&n===i?Wt(r,o):Mc(i,n,kn|ir)}}var Hn=Vn;function Gn(o){return function(i){return i==null?void 0:i[o]}}var pr=Gn;function fr(o){return function(i){return Js(i,o)}}var Yn=fr;function Xt(o){return Jl(o)?pr(gd(o)):Yn(o)}var Ht=Xt;function Wn(o){return typeof o=="function"?o:o==null?bs:typeof o=="object"?zi(o)?Hn(o[0],o[1]):hd(o):Ht(o)}var br=Wn;function gn(o,i,r){return $f(o,i,br(r,2))}var Mr=gn;function Dn(o){return function(i,r,n){for(var e=-1,t=Object(i),a=n(i),s=a.length;s--;){var u=a[o?s:++e];if(r(t[u],u,t)===!1)break}return i}}var jn=Dn,_n=jn(),Xn=_n;function _r(o,i){return o&&Xn(o,i,Zl)}var oa=_r;function dr(o,i){return function(r,n){if(r==null)return r;if(!Er(r))return o(r,n);for(var e=r.length,t=i?e:-1,a=Object(r);(i?t--:++t<e)&&n(a[t],t,a)!==!1;);return r}}var qn=dr,Sn=qn(oa),Qr=Sn;function Ta(o,i){var r=-1,n=Er(o)?Array(o.length):[];return Qr(o,function(e,t,a){n[++r]=i(e,t,a)}),n}var Tr=Ta;function Pa(o,i){var r=o.length;for(o.sort(i);r--;)o[r]=o[r].value;return o}var sa=Pa;function Ma(o,i){if(o!==i){var r=o!==void 0,n=o===null,e=o===o,t=xi(o),a=i!==void 0,s=i===null,u=i===i,l=xi(i);if(!s&&!l&&!t&&o>i||t&&a&&u&&!s&&!l||n&&a&&u||!r&&u||!e)return 1;if(!n&&!t&&!l&&o<i||l&&r&&e&&!n&&!t||s&&r&&e||!a&&e||!u)return-1}return 0}var Ka=Ma;function to(o,i,r){for(var n=-1,e=o.criteria,t=i.criteria,a=e.length,s=r.length;++n<a;){var u=Ka(e[n],t[n]);if(u){if(n>=s)return u;var l=r[n];return u*(l=="desc"?-1:1)}}return o.index-i.index}var yo=to;function ka(o,i,r){i.length?i=Of(i,function(t){return zi(t)?function(a){return Js(a,t.length===1?t[0]:t)}:t}):i=[bs];var n=-1;i=Of(i,Ju(br));var e=Tr(o,function(t,a,s){var u=Of(i,function(l){return l(t)});return{criteria:u,index:++n,value:t}});return sa(e,function(t,a){return yo(t,a,r)})}var uo=ka;function Di(o,i,r){if(!It(r))return!1;var n=typeof i;return(n=="number"?Er(r)&&ss(i,r.length):n=="string"&&i in r)?fu(r[i],o):!1}var Ii=Di,no=Tu(function(o,i){if(o==null)return[];var r=i.length;return r>1&&Ii(o,i[0],i[1])?i=[]:r>2&&Ii(i[0],i[1],i[2])&&(i=[i[0]]),uo(o,Yr(i,1),[])}),vo=no;function Bi(o,i,r){i=="__proto__"&&Ul?Ul(o,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):o[i]=r}var Hi=Bi;function lo(o,i,r,n){for(var e=-1,t=o==null?0:o.length;++e<t;){var a=o[e];i(n,a,r(a),o)}return n}var Ca=lo;function es(o,i,r,n){return Qr(o,function(e,t,a){i(n,e,r(e),a)}),n}var ii=es;function Jr(o,i){return function(r,n){var e=zi(r)?Ca:ii,t=i?i():{};return e(r,o,br(n,2),t)}}var Ea=Jr,Ga=Object.prototype,Go=Ga.hasOwnProperty,ws=Ea(function(o,i,r){Go.call(o,r)?o[r].push(i):Hi(o,r,[i])}),Dc=ws,et=200;function Qt(o,i,r,n){var e=-1,t=Qo,a=!0,s=o.length,u=[],l=i.length;if(!s)return u;r&&(i=Of(i,Ju(r))),n?(t=Ls,a=!1):i.length>=et&&(t=b,a=!1,i=new mo(i));e:for(;++e<s;){var c=o[e],f=r==null?c:r(c);if(c=n||c!==0?c:0,a&&f===f){for(var d=l;d--;)if(i[d]===f)continue e;u.push(c)}else t(i,f,n)||u.push(c)}return u}var Gt=Qt,Or=Tu(function(o,i){return vc(o)?Gt(o,Yr(i,1,vc,!0)):[]}),Oa=Or;function We(o,i,r){for(var n=-1,e=o.length;++n<e;){var t=o[n],a=i(t);if(a!=null&&(s===void 0?a===a&&!xi(a):r(a,s)))var s=a,u=t}return u}var Ne=We;function ht(o,i){return o>i}var kt=ht;function Rt(o){return o&&o.length?Ne(o,bs,kt):void 0}var bt=Rt;function vt(o,i,r){for(var n=St(o,r),e=St(i,r),t=e.free,a=n.keyIndex,s=e.keyIndex,u=[],l=[],c=0,f,d,v=0;c<o.length;){if(f=o[c],d=f[r],d)if(!s.hasOwnProperty(d))l.push(null);else{var p=s[d];l.push(i[p])}else{v+=1;var y=t[v];l.push(y||null)}c+=1}var C=l.slice(0);for(c=0;c<C.length;)C[c]===null?($(c),fe(c)):c+=1;for(var E=c=0;c<i.length;){f=i[c],d=f[r];var w=C[E];if(w){var x=w[r];if(d===x)E+=1;else if(!a.hasOwnProperty(d))Z(c,f);else{var N=C[E+1];if(N){var j=N[r];j===d?($(c),fe(E),E+=1):Z(c,f)}}}else Z(c,f);c+=1}for(var B=C.length-E;(E+=1)<C.length;)B-=1,$(B+c);function $(de){var xe={index:de,type:0,item:null};u.push(xe)}function Z(de,xe){var Ae={index:de,item:xe,type:1};u.push(Ae)}function fe(de){C.splice(de,1)}return{moves:u}}function St(o,i){for(var r={},n=[],e=0,t=o.length;e<t;e+=1){var a=o[e],s=a[i];s?r[s]=e:n.push(a)}return{keyIndex:r,free:n}}var $e=Object.prototype,ft=$e.hasOwnProperty;function ze(o,i){return o!=null&&ft.call(o,i)}var xt=ze;function _t(o,i){return o!=null&&Dt(o,i,xt)}var yn=_t,Cn=Object.prototype,cn=Cn.hasOwnProperty;function Zn(o,i,r){var n=o[i];(!(cn.call(o,i)&&fu(n,r))||r===void 0&&!(i in o))&&Hi(o,i,r)}var jr=Zn;function xa(o,i,r,n){if(!It(o))return o;i=wf(i,o);for(var e=-1,t=i.length,a=t-1,s=o;s!=null&&++e<t;){var u=gd(i[e]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return o;if(e!=a){var c=s[u];l=n?n(c,u,s):void 0,l===void 0&&(l=It(c)?c:ss(i[e+1])?[]:{})}jr(s,u,l),s=s[u]}return o}var Ar=xa;function $r(o,i,r){for(var n=-1,e=i.length,t={};++n<e;){var a=i[n],s=Js(o,a);r(s,a)&&Ar(t,wf(a,o),s)}return t}var pa=$r;function Ya(o,i){return pa(o,i,function(r,n){return Wt(o,n)})}var ro=Ya;function xs(o){var i=o==null?0:o.length;return i?Yr(o,1):[]}var Cv=xs;function pu(o){return Ld(sf(o,void 0,Cv),o+"")}var kg=pu,ju=kg(function(o,i){return o==null?{}:ro(o,i)}),Dg=ju;function DE(o){return typeof o=="function"?o:bs}var IE=DE;function RE(o){var i=[];if(o!=null)for(var r in Object(o))i.push(r);return i}var NE=RE,jE=Object.prototype,LE=jE.hasOwnProperty;function _E(o){if(!It(o))return NE(o);var i=Ec(o),r=[];for(var n in o)n=="constructor"&&(i||!LE.call(o,n))||r.push(n);return r}var FE=_E;function BE(o){return Er(o)?Kl(o,!0):FE(o)}var Ic=BE;function GE(o,i){return o==null?o:Xn(o,IE(i),Ic)}var ym=GE;function Yy(o,i,r){(r!==void 0&&!fu(o[i],r)||r===void 0&&!(i in o))&&Hi(o,i,r)}var bm=Yy,Zy=h("3/ER");function zE(o){var i=new o.constructor(o.byteLength);return new df(i).set(new df(o)),i}var Cm=zE;function UE(o,i){var r=i?Cm(o.buffer):o.buffer;return new o.constructor(r,o.byteOffset,o.length)}var Jy=UE;function VE(o,i){var r=-1,n=o.length;for(i||(i=Array(n));++r<n;)i[r]=o[r];return i}var Qy=VE,Em=Object.create,HE=function(){function o(){}return function(i){if(!It(i))return{};if(Em)return Em(i);o.prototype=i;var r=new o;return o.prototype=void 0,r}}(),Ig=HE,WE=Oc(Object.getPrototypeOf,Object),Om=WE;function $E(o){return typeof o.constructor=="function"&&!Ec(o)?Ig(Om(o)):{}}var qy=$E,XE="[object Object]",KE=Function.prototype,YE=Object.prototype,eb=KE.toString,ZE=YE.hasOwnProperty,JE=eb.call(Object);function QE(o){if(!Lt(o)||On(o)!=XE)return!1;var i=Om(o);if(i===null)return!0;var r=ZE.call(i,"constructor")&&i.constructor;return typeof r=="function"&&r instanceof r&&eb.call(r)==JE}var wm=QE;function qE(o,i){if(!(i==="constructor"&&typeof o[i]=="function")&&i!="__proto__")return o[i]}var xm=qE;function eO(o,i,r,n){var e=!r;r||(r={});for(var t=-1,a=i.length;++t<a;){var s=i[t],u=n?n(r[s],o[s],s,r,o):void 0;u===void 0&&(u=o[s]),e?Hi(r,s,u):jr(r,s,u)}return r}var pd=eO;function tb(o){return pd(o,Ic(o))}var nb=tb;function tO(o,i,r,n,e,t,a){var s=xm(o,r),u=xm(i,r),l=a.get(u);if(l){bm(o,r,l);return}var c=t?t(s,u,r+"",o,i,a):void 0,f=c===void 0;if(f){var d=zi(u),v=!d&&Object(Cc.a)(u),p=!d&&!v&&Qu(u);c=u,d||v||p?zi(s)?c=s:vc(s)?c=Qy(s):v?(f=!1,c=Object(Zy.a)(u,!0)):p?(f=!1,c=Jy(u,!0)):c=[]:wm(u)||Xr(u)?(c=s,Xr(s)?c=nb(s):(!It(s)||mn(s))&&(c=qy(u))):f=!1}f&&(a.set(u,c),e(c,u,n,t,a),a.delete(u)),bm(o,r,c)}var nO=tO;function rb(o,i,r,n,e){o!==i&&Xn(i,function(t,a){if(e||(e=new os),It(t))nO(o,i,a,r,rb,n,e);else{var s=n?n(xm(o,a),t,a+"",o,i,e):void 0;s===void 0&&(s=t),bm(o,a,s)}},Ic)}var Sm=rb;function Rg(o){return Tu(function(i,r){var n=-1,e=r.length,t=e>1?r[e-1]:void 0,a=e>2?r[2]:void 0;for(t=o.length>3&&typeof t=="function"?(e--,t):void 0,a&&Ii(r[0],r[1],a)&&(t=e<3?void 0:t,e=1),i=Object(i);++n<e;){var s=r[n];s&&o(i,s,n,t)}return i})}var Ng=Rg,rO=Ng(function(o,i,r){Sm(o,i,r)}),aO=rO,iO=Ng(function(o,i){pd(i,Ic(i),o)}),oO=iO;function sO(o,i){return Mc(o,i)}var uO=sO,lO="[object Map]",cO="[object Set]",fO=Object.prototype,dO=fO.hasOwnProperty;function jg(o){if(o==null)return!0;if(Er(o)&&(zi(o)||typeof o=="string"||typeof o.splice=="function"||Object(Cc.a)(o)||Qu(o)||Xr(o)))return!o.length;var i=qu(o);if(i==lO||i==cO)return!o.size;if(Ec(o))return!lv(o).length;for(var r in o)if(dO.call(o,r))return!1;return!0}var hO=jg;function ab(o,i){for(var r=-1,n=o==null?0:o.length;++r<n&&i(o[r],r,o)!==!1;);return o}var ib=ab;function Tm(o,i){return o&&pd(i,Zl(i),o)}var ob=Tm;function sb(o,i){return o&&pd(i,Ic(i),o)}var ub=sb;function lb(o,i){return pd(o,Au(o),i)}var vO=lb,gO=Object.getOwnPropertySymbols,pO=gO?function(o){for(var i=[];o;)Ie(i,Au(o)),o=Om(o);return i}:yc,Ev=pO;function Lg(o,i){return pd(o,Ev(o),i)}var mO=Lg;function yO(o){return pg(o,Ic,Ev)}var Mm=yO,cb=Object.prototype,bO=cb.hasOwnProperty;function CO(o){var i=o.length,r=new o.constructor(i);return i&&typeof o[0]=="string"&&bO.call(o,"index")&&(r.index=o.index,r.input=o.input),r}var EO=CO;function OO(o,i){var r=i?Cm(o.buffer):o.buffer;return new o.constructor(r,o.byteOffset,o.byteLength)}var wO=OO,xO=/\w*$/;function SO(o){var i=new o.constructor(o.source,xO.exec(o));return i.lastIndex=o.lastIndex,i}var TO=SO,fb=po?po.prototype:void 0,db=fb?fb.valueOf:void 0;function MO(o){return db?Object(db.call(o)):{}}var AO=MO,Ol="[object Boolean]",PO="[object Date]",kO="[object Map]",md="[object Number]",Fa="[object RegExp]",DO="[object Set]",mu="[object String]",zo="[object Symbol]",IO="[object ArrayBuffer]",xf="[object DataView]",RO="[object Float32Array]",NO="[object Float64Array]",jO="[object Int8Array]",LO="[object Int16Array]",_O="[object Int32Array]",Am="[object Uint8Array]",FO="[object Uint8ClampedArray]",Rc="[object Uint16Array]",hb="[object Uint32Array]";function _g(o,i,r){var n=o.constructor;switch(i){case IO:return Cm(o);case Ol:case PO:return new n(+o);case xf:return wO(o,r);case RO:case NO:case jO:case LO:case _O:case Am:case FO:case Rc:case hb:return Jy(o,r);case kO:return new n;case md:case mu:return new n(o);case Fa:return TO(o);case DO:return new n;case zo:return AO(o)}}var bo=_g,Do="[object Map]";function vb(o){return Lt(o)&&qu(o)==Do}var BO=vb,gb=Ks.a&&Ks.a.isMap,GO=gb?Ju(gb):BO,zO=GO,UO="[object Set]";function VO(o){return Lt(o)&&qu(o)==UO}var pb=VO,ih=Ks.a&&Ks.a.isSet,Pm=ih?Ju(ih):pb,HO=Pm,mb=1,Fg=2,Lu=4,yd="[object Arguments]",WO="[object Array]",$O="[object Boolean]",XO="[object Date]",KO="[object Error]",yb="[object Function]",bb="[object GeneratorFunction]",Nc="[object Map]",Ha="[object Number]",km="[object Object]",el="[object RegExp]",Cb="[object Set]",YO="[object String]",Gi="[object Symbol]",ZO="[object WeakMap]",Eb="[object ArrayBuffer]",Bg="[object DataView]",JO="[object Float32Array]",QO="[object Float64Array]",qO="[object Int8Array]",ew="[object Int16Array]",tw="[object Int32Array]",nw="[object Uint8Array]",rw="[object Uint8ClampedArray]",aw="[object Uint16Array]",iw="[object Uint32Array]",ao={};ao[yd]=ao[WO]=ao[Eb]=ao[Bg]=ao[$O]=ao[XO]=ao[JO]=ao[QO]=ao[qO]=ao[ew]=ao[tw]=ao[Nc]=ao[Ha]=ao[km]=ao[el]=ao[Cb]=ao[YO]=ao[Gi]=ao[nw]=ao[rw]=ao[aw]=ao[iw]=!0,ao[KO]=ao[yb]=ao[ZO]=!1;function Gg(o,i,r,n,e,t){var a,s=i&mb,u=i&Fg,l=i&Lu;if(r&&(a=e?r(o,n,e,t):r(o)),a!==void 0)return a;if(!It(o))return o;var c=zi(o);if(c){if(a=EO(o),!s)return Qy(o,a)}else{var f=qu(o),d=f==yb||f==bb;if(Object(Cc.a)(o))return Object(Zy.a)(o,s);if(f==km||f==yd||d&&!e){if(a=u||d?{}:qy(o),!s)return u?mO(o,ub(a,o)):vO(o,ob(a,o))}else{if(!ao[f])return e?o:{};a=bo(o,f,s)}}t||(t=new os);var v=t.get(o);if(v)return v;t.set(o,a),HO(o)?o.forEach(function(C){a.add(Gg(C,i,r,C,o,t))}):zO(o)&&o.forEach(function(C,E){a.set(E,Gg(C,i,r,E,o,t))});var p=l?u?Mm:ad:u?Ic:Zl,y=c?void 0:p(o);return ib(y||o,function(C,E){y&&(E=C,C=o[E]),jr(a,E,Gg(C,i,r,E,o,t))}),a}var Ob=Gg,ow=4;function Dm(o){return Ob(o,ow)}var sw=Dm,Im=1,uw=4;function lw(o){return Ob(o,Im|uw)}var cw=lw,cs=Object.prototype,yu=cs.hasOwnProperty,fw=Tu(function(o,i){o=Object(o);var r=-1,n=i.length,e=n>2?i[2]:void 0;for(e&&Ii(i[0],i[1],e)&&(n=1);++r<n;)for(var t=i[r],a=Ic(t),s=-1,u=a.length;++s<u;){var l=a[s],c=o[l];(c===void 0||fu(c,cs[l])&&!yu.call(o,l))&&(o[l]=t[l])}return o}),dw=fw;function wb(o,i,r,n,e,t){return It(o)&&It(i)&&(t.set(i,o),Sm(o,i,void 0,wb,t),t.delete(i)),o}var xb=wb,hw=Ng(function(o,i,r,n){Sm(o,i,r,n)}),vw=hw,gw=Tu(function(o){return o.push(void 0,xb),dc(vw,void 0,o)}),Sb=gw;function pw(o){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];r.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){t!=="constructor"&&Object.defineProperty(o.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))})})}var or=h("yKVA"),sr=h("879j"),Tb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(o[r]=i[r])};function Rm(o,i){Tb(o,i);function r(){this.constructor=o}o.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}var mw=Object(be.a)(function o(){Object(De.a)(this,o)}),yw=/^\s*class\s+/.test("".concat(mw))||/^\s*class\s*\{/.test("".concat(function(){function o(){Object(De.a)(this,o)}return Object(be.a)(o)}()));function bw(o,i){var r;return yw?r=function(n){Object(or.a)(t,n);var e=Object(sr.a)(t);function t(){return Object(De.a)(this,t),e.apply(this,arguments)}return Object(be.a)(t)}(i):(r=function(){return i.apply(this,arguments)},Rm(r,i)),Object.defineProperty(r,"name",{value:o}),r}function Mb(o,i){return o!=null?o:i}function oh(o,i,r){var n=o!=null?o[i]:null;return r!==void 0?Mb(n,r):n}function Cw(o,i,r){var n=o!=null?o[i]:null;return n==null||(n=+n,Number.isNaN(n)||!Number.isFinite(n))?r:n}function Ew(o,i,r){var n=o!=null?o[i]:null;return n==null?r:!!n}function Nm(o){return o==="__proto__"}function Ab(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n,e=Array.isArray(i)?i:i.split(r);if(e.length)for(n=o;e.length;){var t=e.shift();if(Object(n)===n&&t&&t in n)n=n[t];else return}return n}function Ow(o,i,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",e=Array.isArray(i)?i:i.split(n),t=e.pop();if(t&&!Nm(t)){var a=o;e.forEach(function(s){Nm(s)||(a[s]==null&&(a[s]={}),a=a[s])}),a[t]=r}return o}function Pb(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n=Array.isArray(i)?i.slice():i.split(r),e=n.pop();if(e)if(n.length>0){var t=Ab(o,n);t&&delete t[e]}else delete o[e];return o}function jm(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/",r=arguments.length>2?arguments[2]:void 0,n={};Object.keys(o).forEach(function(t){var a=o[t],s=typeof a=="object"||Array.isArray(a);if(s&&r&&r(a)&&(s=!1),s){var u=jm(a,i,r);Object.keys(u).forEach(function(l){n[t+i+l]=u[l]})}else n[t]=a});for(var e in o)!!Object.prototype.hasOwnProperty.call(o,e);return n}var ww="[object String]";function xw(o){return typeof o=="string"||!zi(o)&&Lt(o)&&On(o)==ww}var Sw=xw;function Tw(o){return function(i){return o==null?void 0:o[i]}}var Lm=Tw,Mw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Aw=Lm(Mw),Pw=Aw,kb=/[&<>"']/g,kw=RegExp(kb.source);function Dw(o){return o=Fi(o),o&&kw.test(o)?o.replace(kb,Pw):o}var Db=Dw,Iw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Rw=Lm(Iw),Nw=Rw,Ib=/&(?:amp|lt|gt|quot|#39);/g,jw=RegExp(Ib.source);function Lw(o){return o=Fi(o),o&&jw.test(o)?o.replace(Ib,Nw):o}var _w=Lw;function Fw(o,i,r){return o===o&&(r!==void 0&&(o=o<=r?o:r),i!==void 0&&(o=o>=i?o:i)),o}var zg=Fw,Bw=/\s/;function Gw(o){for(var i=o.length;i--&&Bw.test(o.charAt(i)););return i}var zw=Gw,Uw=/^\s+/;function _m(o){return o&&o.slice(0,zw(o)+1).replace(Uw,"")}var Rb=_m,Fm=0/0,Vw=/^[-+]0x[0-9a-f]+$/i,Hw=/^0b[01]+$/i,Ww=/^0o[0-7]+$/i,Bm=parseInt;function $w(o){if(typeof o=="number")return o;if(xi(o))return Fm;if(It(o)){var i=typeof o.valueOf=="function"?o.valueOf():o;o=It(i)?i+"":i}if(typeof o!="string")return o===0?o:+o;o=Rb(o);var r=Hw.test(o);return r||Ww.test(o)?Bm(o.slice(2),r?2:8):Vw.test(o)?Fm:+o}var Sf=$w,Nb=1/0,bu=17976931348623157e292;function Gm(o){if(!o)return o===0?o:0;if(o=Sf(o),o===Nb||o===-Nb){var i=o<0?-1:1;return i*bu}return o===o?o:0}var Ug=Gm;function Xw(o){var i=Ug(o),r=i%1;return i===i?r?i-r:i:0}var wl=Xw;function Kw(o,i,r){return o=Fi(o),r=r==null?0:zg(wl(r),0,o.length),i=kc(i),o.slice(r,r+i.length)==i}var zm=Kw;function Yw(o,i,r){o=Fi(o),i=kc(i);var n=o.length;r=r===void 0?n:zg(wl(r),0,n);var e=r;return r-=i.length,r>=0&&o.slice(r,e)==i}var Um=Yw;function Zw(o,i,r){var n=-1,e=o.length;i<0&&(i=-i>e?0:e+i),r=r>e?e:r,r<0&&(r+=e),e=i>r?0:r-i>>>0,i>>>=0;for(var t=Array(e);++n<e;)t[n]=o[n+i];return t}var Jw=Zw;function Qw(o,i,r){var n=o.length;return r=r===void 0?n:r,!i&&r>=n?o:Jw(o,i,r)}var Vg=Qw,jb="\\ud800-\\udfff",qw="\\u0300-\\u036f",ex="\\ufe20-\\ufe2f",tx="\\u20d0-\\u20ff",Vm=qw+ex+tx,Hm="\\ufe0e\\ufe0f",nx="\\u200d",rx=RegExp("["+nx+jb+Vm+Hm+"]");function ax(o){return rx.test(o)}var sh=ax,ix="[object RegExp]";function ox(o){return Lt(o)&&On(o)==ix}var sx=ox,Lb=Ks.a&&Ks.a.isRegExp,ux=Lb?Ju(Lb):sx,_b=ux;function lx(o){return o.split("")}var cx=lx,Fb="\\ud800-\\udfff",fx="\\u0300-\\u036f",dx="\\ufe20-\\ufe2f",hx="\\u20d0-\\u20ff",vx=fx+dx+hx,gx="\\ufe0e\\ufe0f",px="["+Fb+"]",Wm="["+vx+"]",$m="\\ud83c[\\udffb-\\udfff]",g="(?:"+Wm+"|"+$m+")",O="[^"+Fb+"]",F="(?:\\ud83c[\\udde6-\\uddff]){2}",Q="[\\ud800-\\udbff][\\udc00-\\udfff]",Me="\\u200d",Ve=g+"?",gt="["+gx+"]?",Mt="(?:"+Me+"(?:"+[O,F,Q].join("|")+")"+gt+Ve+")*",$t=gt+Ve+Mt,er="(?:"+[O+Wm+"?",Wm,F,Q,px].join("|")+")",nr=RegExp($m+"(?="+$m+")|"+er+$t,"g");function gr(o){return o.match(nr)||[]}var Lr=gr;function aa(o){return sh(o)?Lr(o):cx(o)}var wa=aa,Za=4294967295;function Da(o,i,r){return r&&typeof r!="number"&&Ii(o,i,r)&&(i=r=void 0),r=r===void 0?Za:r>>>0,r?(o=Fi(o),o&&(typeof i=="string"||i!=null&&!_b(i))&&(i=kc(i),!i&&sh(o))?Vg(wa(o),0,r):o.split(i,r)):[]}var li=Da,gi=9007199254740991,_u=Math.floor;function Qs(o,i){var r="";if(!o||i<1||i>gi)return r;do i%2&&(r+=o),i=_u(i/2),i&&(o+=o);while(i);return r}var qs=Qs;function Uo(o,i,r){return(r?Ii(o,i,r):i===void 0)?i=1:i=wl(i),qs(Fi(o),i)}var xl=Uo,jc=pr("length"),Bb=jc,FM="\\ud800-\\udfff",xL="\\u0300-\\u036f",SL="\\ufe20-\\ufe2f",TL="\\u20d0-\\u20ff",ML=xL+SL+TL,AL="\\ufe0e\\ufe0f",PL="["+FM+"]",mx="["+ML+"]",yx="\\ud83c[\\udffb-\\udfff]",kL="(?:"+mx+"|"+yx+")",BM="[^"+FM+"]",GM="(?:\\ud83c[\\udde6-\\uddff]){2}",zM="[\\ud800-\\udbff][\\udc00-\\udfff]",DL="\\u200d",UM=kL+"?",VM="["+AL+"]?",IL="(?:"+DL+"(?:"+[BM,GM,zM].join("|")+")"+VM+UM+")*",RL=VM+UM+IL,NL="(?:"+[BM+mx+"?",mx,GM,zM,PL].join("|")+")",HM=RegExp(yx+"(?="+yx+")|"+NL+RL,"g");function jL(o){for(var i=HM.lastIndex=0;HM.test(o);)++i;return i}var LL=jL;function _L(o){return sh(o)?LL(o):Bb(o)}var Xm=_L,FL=Math.ceil;function BL(o,i){i=i===void 0?" ":kc(i);var r=i.length;if(r<2)return r?qs(i,o):i;var n=qs(i,FL(o/Xm(i)));return sh(i)?Vg(wa(n),0,o).join(""):n.slice(0,o)}var Gb=BL,GL=Math.ceil,zL=Math.floor;function UL(o,i,r){o=Fi(o),i=wl(i);var n=i?Xm(o):0;if(!i||n>=i)return o;var e=(i-n)/2;return Gb(zL(e),r)+o+Gb(GL(e),r)}var VL=UL;function HL(o,i,r){o=Fi(o),i=wl(i);var n=i?Xm(o):0;return i&&n<i?o+Gb(i-n,r):o}var WL=HL;function $L(o,i,r){o=Fi(o),i=wl(i);var n=i?Xm(o):0;return i&&n<i?Gb(i-n,r)+o:o}var XL=$L,KL=30,YL="...",ZL=/\w*$/;function JL(o,i){var r=KL,n=YL;if(It(i)){var e="separator"in i?i.separator:e;r="length"in i?wl(i.length):r,n="omission"in i?kc(i.omission):n}o=Fi(o);var t=o.length;if(sh(o)){var a=wa(o);t=a.length}if(r>=t)return o;var s=r-Xm(n);if(s<1)return n;var u=a?Vg(a,0,s).join(""):o.slice(0,s);if(e===void 0)return u+n;if(a&&(s+=u.length-s),_b(e)){if(o.slice(s).search(e)){var l,c=u;for(e.global||(e=RegExp(e.source,Fi(ZL.exec(e))+"g")),e.lastIndex=0;l=e.exec(c);)var f=l.index;u=u.slice(0,f===void 0?s:f)}}else if(o.indexOf(kc(e),s)!=s){var d=u.lastIndexOf(e);d>-1&&(u=u.slice(0,d))}return u+n}var QL=JL,qL=Ng(function(o,i,r,n){pd(i,Ic(i),o,n)}),WM=qL,e4="[object DOMException]",t4="[object Error]";function n4(o){if(!Lt(o))return!1;var i=On(o);return i==t4||i==e4||typeof o.message=="string"&&typeof o.name=="string"&&!wm(o)}var $M=n4,r4=Tu(function(o,i){try{return dc(o,void 0,i)}catch(r){return $M(r)?r:new Error(r)}}),a4=r4;function i4(o,i){return Of(i,function(r){return o[r]})}var o4=i4,XM=Object.prototype,s4=XM.hasOwnProperty;function u4(o,i,r,n){return o===void 0||fu(o,XM[r])&&!s4.call(n,r)?i:o}var KM=u4,l4={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function c4(o){return"\\"+l4[o]}var f4=c4,d4=/<%=([\s\S]+?)%>/g,YM=d4,h4=/<%-([\s\S]+?)%>/g,v4=h4,g4=/<%([\s\S]+?)%>/g,p4=g4,m4={escape:v4,evaluate:p4,interpolate:YM,variable:"",imports:{_:{escape:Db}}},ZM=m4,y4="Invalid `variable` option passed into `_.template`",b4=/\b__p \+= '';/g,C4=/\b(__p \+=) '' \+/g,E4=/(__e\(.*?\)|\b__t\)) \+\n'';/g,O4=/[()=,{}\[\]\/\s]/,w4=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zb=/($^)/,x4=/['\n\r\u2028\u2029\\]/g,S4=Object.prototype,JM=S4.hasOwnProperty;function T4(o,i,r){var n=ZM.imports._.templateSettings||ZM;r&&Ii(o,i,r)&&(i=void 0),o=Fi(o),i=WM({},i,n,KM);var e=WM({},i.imports,n.imports,KM),t=Zl(e),a=o4(e,t),s,u,l=0,c=i.interpolate||zb,f="__p += '",d=RegExp((i.escape||zb).source+"|"+c.source+"|"+(c===YM?w4:zb).source+"|"+(i.evaluate||zb).source+"|$","g"),v=JM.call(i,"sourceURL")?"//# sourceURL="+(i.sourceURL+"").replace(/\s/g," ")+`
`:"";o.replace(d,function(C,E,w,x,N,j){return w||(w=x),f+=o.slice(l,j).replace(x4,f4),E&&(s=!0,f+=`' +
__e(`+E+`) +
'`),N&&(u=!0,f+=`';
`+N+`;
__p += '`),w&&(f+=`' +
((__t = (`+w+`)) == null ? '' : __t) +
'`),l=j+C.length,C}),f+=`';
`;var p=JM.call(i,"variable")&&i.variable;if(!p)f=`with (obj) {
`+f+`
}
`;else if(O4.test(p))throw new Error(y4);f=(u?f.replace(b4,""):f).replace(C4,"$1").replace(E4,"$1;"),f="function("+(p||"obj")+`) {
`+(p?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(u?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+f+`return __p
}`;var y=a4(function(){return Function(t,v+"return "+f).apply(void 0,a)});if(y.source=f,$M(y))throw y;return y}var M4=T4,A4=0;function P4(o){var i=++A4;return Fi(o)+i}var k4=P4;function D4(o){var i=null;try{i=window.eval(o)}catch(r){}return i}function I4(o,i,r,n){var e=-1,t=o==null?0:o.length;for(n&&t&&(r=o[++e]);++e<t;)r=i(r,o[e],e,o);return r}var R4=I4,N4={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},j4=Lm(N4),L4=j4,_4=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,F4="\\u0300-\\u036f",B4="\\ufe20-\\ufe2f",G4="\\u20d0-\\u20ff",z4=F4+B4+G4,U4="["+z4+"]",V4=RegExp(U4,"g");function H4(o){return o=Fi(o),o&&o.replace(_4,L4).replace(V4,"")}var W4=H4,$4=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function X4(o){return o.match($4)||[]}var K4=X4,Y4=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Z4(o){return Y4.test(o)}var J4=Z4,QM="\\ud800-\\udfff",Q4="\\u0300-\\u036f",q4="\\ufe20-\\ufe2f",e_="\\u20d0-\\u20ff",t_=Q4+q4+e_,qM="\\u2700-\\u27bf",eA="a-z\\xdf-\\xf6\\xf8-\\xff",n_="\\xac\\xb1\\xd7\\xf7",r_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",a_="\\u2000-\\u206f",i_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tA="A-Z\\xc0-\\xd6\\xd8-\\xde",o_="\\ufe0e\\ufe0f",nA=n_+r_+a_+i_,rA="['\u2019]",aA="["+nA+"]",s_="["+t_+"]",iA="\\d+",u_="["+qM+"]",oA="["+eA+"]",sA="[^"+QM+nA+iA+qM+eA+tA+"]",l_="\\ud83c[\\udffb-\\udfff]",c_="(?:"+s_+"|"+l_+")",f_="[^"+QM+"]",uA="(?:\\ud83c[\\udde6-\\uddff]){2}",lA="[\\ud800-\\udbff][\\udc00-\\udfff]",Hg="["+tA+"]",d_="\\u200d",cA="(?:"+oA+"|"+sA+")",h_="(?:"+Hg+"|"+sA+")",fA="(?:"+rA+"(?:d|ll|m|re|s|t|ve))?",dA="(?:"+rA+"(?:D|LL|M|RE|S|T|VE))?",hA=c_+"?",vA="["+o_+"]?",v_="(?:"+d_+"(?:"+[f_,uA,lA].join("|")+")"+vA+hA+")*",g_="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",p_="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",m_=vA+hA+v_,y_="(?:"+[u_,uA,lA].join("|")+")"+m_,b_=RegExp([Hg+"?"+oA+"+"+fA+"(?="+[aA,Hg,"$"].join("|")+")",h_+"+"+dA+"(?="+[aA,Hg+cA,"$"].join("|")+")",Hg+"?"+cA+"+"+fA,Hg+"+"+dA,p_,g_,iA,y_].join("|"),"g");function C_(o){return o.match(b_)||[]}var E_=C_;function O_(o,i,r){return o=Fi(o),i=r?void 0:i,i===void 0?J4(o)?E_(o):K4(o):o.match(i)||[]}var w_=O_,x_="['\u2019]",S_=RegExp(x_,"g");function T_(o){return function(i){return R4(w_(W4(i).replace(S_,"")),o,"")}}var Ub=T_;function M_(o){return function(i){i=Fi(i);var r=sh(i)?wa(i):void 0,n=r?r[0]:i.charAt(0),e=r?Vg(r,1).join(""):i.slice(1);return n[o]()+e}}var gA=M_,A_=gA("toUpperCase"),Vb=A_,P_=Ub(function(o,i,r){return o+(r?" ":"")+Vb(i)}),pA=P_;function k_(o){return Vb(Fi(o).toLowerCase())}var D_=k_,I_=Ub(function(o,i,r){return i=i.toLowerCase(),o+(r?D_(i):i)}),bx=I_,R_=Ub(function(o,i,r){return o+(r?" ":"")+i.toUpperCase()}),N_=R_,j_=Ub(function(o,i,r){return o+(r?" ":"")+i.toLowerCase()}),Cx=j_,L_=gA("toLowerCase"),__=L_,Ov=function(i){var r=Object.create(null);return function(n){var e=r[n];return e||(r[n]=i(n))}},mA=Ov(function(o){return o.replace(/\B([A-Z])/g,"-$1").toLowerCase()}),F_=Ov(function(o){return pA(bx(o)).replace(/ /g,"")}),B_=Ov(function(o){return N_(o).replace(/ /g,"_")}),G_=Ov(function(o){return Cx(o).replace(/ /g,".")}),z_=Ov(function(o){return Cx(o).replace(/ /g,"/")}),U_=Ov(function(o){return Vb(Cx(o))}),V_=Ov(function(o){return pA(bx(o))});function H_(o){for(var i=2166136261,r=!1,n=o,e=0,t=n.length;e<t;e+=1){var a=n.charCodeAt(e);a>127&&!r&&(n=unescape(encodeURIComponent(n)),a=n.charCodeAt(e),r=!0),i^=a,i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24)}return i>>>0}function W_(){for(var o="",i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r=0,n=i.length;r<n;r+=1){var e=i[r],t=Math.random()*16|0,a=e==="x"?t:e==="y"?t&3|8:e;o+=a.toString(16)}return o}function $_(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=ln.a.parseHTML(o,null,!1);return r.forEach(function(n){var e=n;if(e){var t=e.attributes;if(t)for(var a=0,s=t.length;a<s;a+=1){var u=t.item(a);if(u){var l=u.value.toLowerCase(),c=u.name.toLowerCase();(c.startsWith("on")||l.startsWith("javascript:")||l.startsWith("data:")||l.startsWith("vbscript:"))&&e.removeAttribute(c)}}}}),i.raw?r:ln()("<div/>").append(r).html()}function X_(o,i,r){var n=Math.min(2,Math.floor(o.length*.34)),e=Math.floor(o.length*.4)+1,t,a=!1,s=o.toLowerCase(),u=Object(Qn.a)(i),l;try{for(u.s();!(l=u.n()).done;){var c=l.value,f=r(c);if(f!==void 0&&Math.abs(f.length-s.length)<=n){var d=f.toLowerCase();if(d===s){if(f===o)continue;return c}if(a||f.length<3)continue;var v=K_(s,d,e-1);if(v===void 0)continue;v<3?(a=!0,t=c):(e=v,t=c)}}}catch(p){u.e(p)}finally{u.f()}return t}function K_(o,i,r){for(var n=new Array(i.length+1),e=new Array(i.length+1),t=r+1,a=0;a<=i.length;a+=1)n[a]=a;for(var s=1;s<=o.length;s+=1){var u=o.charCodeAt(s-1),l=s>r?s-r:1,c=i.length>r+s?r+s:i.length;e[0]=s;for(var f=s,d=1;d<l;d+=1)e[d]=t;for(var v=l;v<=c;v+=1){var p=u===i.charCodeAt(v-1)?n[v-1]:Math.min(n[v]+1,e[v-1]+1,n[v-1]+2);e[v]=p,f=Math.min(f,p)}for(var y=c+1;y<=i.length;y+=1)e[y]=t;if(f>r)return;var C=n;n=e,e=C}var E=n[i.length];return E>r?void 0:E}var Y_="[object Number]";function Z_(o){return typeof o=="number"||Lt(o)&&On(o)==Y_}var yA=Z_;function J_(o){return yA(o)&&o!=+o}var Q_=J_,q_=Ko.a.isFinite;function eF(o){return typeof o=="number"&&q_(o)}var tF=eF;function nF(o){return typeof o=="number"&&o==wl(o)}var bA=nF,CA=9007199254740991;function rF(o){return bA(o)&&o>=-CA&&o<=CA}var aF=rF;function iF(o,i,r){return r===void 0&&(r=i,i=void 0),r!==void 0&&(r=Sf(r),r=r===r?r:0),i!==void 0&&(i=Sf(i),i=i===i?i:0),zg(Sf(o),i,r)}var oF=iF,sF=Math.max,uF=Math.min;function lF(o,i,r){return o>=uF(i,r)&&o<sF(i,r)}var cF=lF;function fF(o,i,r){return i=Ug(i),r===void 0?(r=i,i=0):r=Ug(r),o=Sf(o),cF(o,i,r)}var dF=fF,EA=9007199254740991;function hF(o){return o?zg(wl(o),-EA,EA):o===0?o:0}var vF=hF,gF=/^\s+/,pF=Ko.a.parseInt;function mF(o,i,r){return r||i==null?i=0:i&&(i=+i),pF(Fi(o).replace(gF,""),i||0)}var yF=mF;function bF(o,i){return(o%i+i)%i}function CF(o,i){if(i==null)i=o==null?1:o,o=0;else if(i<o){var r=o;o=i,i=r}return Math.floor(Math.random()*(i-o+1)+o)}function OA(o){return typeof o=="string"&&o.slice(-1)==="%"}function EF(o,i){if(o==null)return 0;var r;if(typeof o=="string"){if(r=parseFloat(o),OA(o)&&(r/=100,Number.isFinite(r)))return r*i}else r=o;return Number.isFinite(r)?r>0&&r<1?r*i:r:0}function OF(o,i){function r(a){var s=new RegExp("(?:\\d+(?:\\.\\d+)*)(".concat(a,")$")).exec(o);return s?s[1]:null}var n=parseFloat(o);if(Number.isNaN(n))return null;var e;if(i==null)e="[A-Za-z]*";else if(Array.isArray(i)){if(i.length===0)return null;e=i.join("|")}else typeof i=="string"&&(e=i);var t=r(e);return t===null?null:{unit:t,value:n}}function wF(o){if(typeof o=="object"){var i=0,r=0,n=0,e=0;return o.vertical!=null&&Number.isFinite(o.vertical)&&(r=e=o.vertical),o.horizontal!=null&&Number.isFinite(o.horizontal)&&(n=i=o.horizontal),o.left!=null&&Number.isFinite(o.left)&&(i=o.left),o.top!=null&&Number.isFinite(o.top)&&(r=o.top),o.right!=null&&Number.isFinite(o.right)&&(n=o.right),o.bottom!=null&&Number.isFinite(o.bottom)&&(e=o.bottom),{top:r,right:n,bottom:e,left:i}}var t=0;return o!=null&&Number.isFinite(o)&&(t=o),{top:t,right:t,bottom:t,left:t}}var xF="Expected a function";function SF(o,i){var r;if(typeof i!="function")throw new TypeError(xF);return o=wl(o),function(){return--o>0&&(r=i.apply(this,arguments)),o<=1&&(i=void 0),r}}var TF=SF;function MF(o){return TF(2,o)}var AF=MF,PF=function(){return Ko.a.Date.now()},Ex=PF,kF="Expected a function",DF=Math.max,IF=Math.min;function RF(o,i,r){var n,e,t,a,s,u,l=0,c=!1,f=!1,d=!0;if(typeof o!="function")throw new TypeError(kF);i=Sf(i)||0,It(r)&&(c=!!r.leading,f="maxWait"in r,t=f?DF(Sf(r.maxWait)||0,i):t,d="trailing"in r?!!r.trailing:d);function v(B){var $=n,Z=e;return n=e=void 0,l=B,a=o.apply(Z,$),a}function p(B){return l=B,s=setTimeout(E,i),c?v(B):a}function y(B){var $=B-u,Z=B-l,fe=i-$;return f?IF(fe,t-Z):fe}function C(B){var $=B-u,Z=B-l;return u===void 0||$>=i||$<0||f&&Z>=t}function E(){var B=Ex();if(C(B))return w(B);s=setTimeout(E,y(B))}function w(B){return s=void 0,d&&n?v(B):(n=e=void 0,a)}function x(){s!==void 0&&clearTimeout(s),l=0,n=u=e=s=void 0}function N(){return s===void 0?a:w(Ex())}function j(){var B=Ex(),$=C(B);if(n=arguments,e=this,u=B,$){if(s===void 0)return p(u);if(f)return clearTimeout(s),s=setTimeout(E,i),v(u)}return s===void 0&&(s=setTimeout(E,i)),a}return j.cancel=x,j.flush=N,j}var NF=RF,jF="Expected a function";function LF(o,i,r){if(typeof o!="function")throw new TypeError(jF);return setTimeout(function(){o.apply(void 0,r)},i)}var _F=LF,FF=Tu(function(o,i){return _F(o,1,i)}),BF=FF;function Ox(o,i,r){if(r)switch(r.length){case 0:return o.call(i);case 1:return o.call(i,r[0]);case 2:return o.call(i,r[0],r[1]);case 3:return o.call(i,r[0],r[1],r[2]);case 4:return o.call(i,r[0],r[1],r[2],r[3]);case 5:return o.call(i,r[0],r[1],r[2],r[3],r[4]);case 6:return o.call(i,r[0],r[1],r[2],r[3],r[4],r[5]);default:return o.apply(i,r)}return o.call(i)}function GF(o,i){for(var r=arguments.length,n=new Array(r>2?r-2:0),e=2;e<r;e++)n[e-2]=arguments[e];return Ox(o,i,n)}function zF(o,i){for(var r=0,n=o.length;r<n;r+=1)if(o[r]===i)return o.push(o.splice(r,1)[0])}function UF(o,i,r){var n=[],e={},t=function(){for(var s=!1,u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var f=l.join("\u2400");return f in e?(s=!0,zF(n,f)):(n.length>=1e3&&delete e[n.shift()],n.push(f),e[f]=Ox(o,i||null,l)),r?r(e[f],s):e[f]};return t}function wA(o){return typeof o=="object"&&o.then&&typeof o.then=="function"}function wx(o){return o!=null&&(o instanceof Promise||wA(o))}function xA(){for(var o=[],i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];r.forEach(function(a){Array.isArray(a)?o.push.apply(o,Object(Qe.a)(a)):o.push(a)});var e=o.some(function(a){return wx(a)});if(e){var t=o.map(function(a){return wx(a)?a:Promise.resolve(a!==!1)});return Promise.all(t).then(function(a){return a.reduce(function(s,u){return u!==!1&&s},!0)})}return o.every(function(a){return a!==!1})}function VF(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];var n=xA(i);return typeof n=="boolean"?Promise.resolve(n):n}var xx=/[\t\r\n\f]/g,Sx=/\S+/g,Wg=function(i){return" ".concat(i," ")};function wv(o){return o&&o.getAttribute&&o.getAttribute("class")||""}function Hb(o,i){if(o==null||i==null)return!1;var r=Wg(wv(o)),n=Wg(i);return o.nodeType===1?r.replace(xx," ").includes(n):!1}function Km(o,i){if(!(o==null||i==null)){if(typeof i=="function")return Km(o,i(wv(o)));if(typeof i=="string"&&o.nodeType===1){var r=i.match(Sx)||[],n=Wg(wv(o)).replace(xx," "),e=r.reduce(function(t,a){return t.indexOf(Wg(a))<0?"".concat(t).concat(a," "):t},n);e=e.trim(),n!==e&&o.setAttribute("class",e)}}}function Ym(o,i){if(o!=null){if(typeof i=="function")return Ym(o,i(wv(o)));if((!i||typeof i=="string")&&o.nodeType===1){var r=(i||"").match(Sx)||[],n=Wg(wv(o)).replace(xx," "),e=r.reduce(function(t,a){var s=Wg(a);return t.indexOf(s)>-1?t.replace(s," "):t},n);e=i?e.trim():"",n!==e&&o.setAttribute("class",e)}}}function Tx(o,i,r){if(!(o==null||i==null)){if(r!=null&&typeof i=="string"){r?Km(o,i):Ym(o,i);return}if(typeof i=="function")return Tx(o,i(wv(o),r),r);if(typeof i=="string"){var n=i.match(Sx)||[];n.forEach(function(e){Hb(o,e)?Ym(o,e):Km(o,e)})}}}var SA=0;function TA(){return SA+=1,"v".concat(SA)}function MA(o){return(o.id==null||o.id==="")&&(o.id=TA()),o.id}function $g(o){return o==null?!1:typeof o.getScreenCTM=="function"&&o instanceof SVGElement}var Tf={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Mx="1.1";function HF(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return i.createElement(o)}function AA(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tf.xhtml,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return r.createElementNS(i,o)}function Mf(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return AA(o,Tf.svg,i)}function Wb(o){if(o){var i='<svg xmlns="'.concat(Tf.svg,'" xmlns:xlink="').concat(Tf.xlink,'" version="').concat(Mx,'">').concat(o,"</svg>"),r=PA(i,{async:!1}),n=r.documentElement;return n}var e=document.createElementNS(Tf.svg,"svg");return e.setAttributeNS(Tf.xmlns,"xmlns:xlink",Tf.xlink),e.setAttribute("version",Mx),e}function PA(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;try{var n=new DOMParser;if(i.async!=null){var e=n;e.async=i.async}r=n.parseFromString(o,i.mimeType||"text/xml")}catch(t){r=void 0}if(!r||r.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: ".concat(o));return r}function $b(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=o.nodeName;return i?r.toLowerCase():r.toUpperCase()}function kA(o){for(var i=0,r=o.previousSibling;r;)r.nodeType===1&&(i+=1),r=r.previousSibling;return i}function DA(o,i){return o.querySelectorAll(i)}function IA(o,i){return o.querySelector(i)}function RA(o,i,r){for(var n=o.ownerSVGElement,e=o.parentNode;e&&e!==r&&e!==n;){if(Hb(e,i))return e;e=e.parentNode}return null}function NA(o,i){var r=i&&i.parentNode;return o===r||!!(r&&r.nodeType===1&&o.compareDocumentPosition(r)&16)}function Xb(o){o.parentNode&&o.parentNode.removeChild(o)}function Ax(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Px(o,i){var r=Array.isArray(i)?i:[i];r.forEach(function(n){n!=null&&o.appendChild(n)})}function jA(o,i){var r=o.firstChild;return r?kx(r,i):Px(o,i)}function kx(o,i){var r=o.parentNode;if(r){var n=Array.isArray(i)?i:[i];n.forEach(function(e){e!=null&&r.insertBefore(e,o)})}}function LA(o,i){i!=null&&i.appendChild(o)}function Dx(o){try{return o instanceof HTMLElement}catch(i){return typeof o=="object"&&o.nodeType===1&&typeof o.style=="object"&&typeof o.ownerDocument=="object"}}function _A(o){return!o||!Dx(o)?!1:["a","button"].includes($b(o))||o.getAttribute("role")==="button"||o.getAttribute("type")==="button"?!0:_A(o.parentNode)}function WF(o){var i=$b(o);if(i==="input"){var r=o.getAttribute("type");if(r==null||["text","password","number","email","search","tel","url"].includes(r))return!0}return!1}var FA=["viewBox","attributeName","attributeType","repeatCount"];function BA(o,i){return o.getAttribute(i)}function Ix(o,i){var r=Nx(i);r.ns?o.hasAttributeNS(r.ns,r.local)&&o.removeAttributeNS(r.ns,r.local):o.hasAttribute(i)&&o.removeAttribute(i)}function Kb(o,i,r){if(r==null)return Ix(o,i);var n=Nx(i);n.ns&&typeof r=="string"?o.setAttributeNS(n.ns,i,r):i==="id"?o.id="".concat(r):o.setAttribute(i,"".concat(r))}function Rx(o,i){Object.keys(i).forEach(function(r){Kb(o,r,i[r])})}function eu(o,i,r){if(i==null){for(var n=o.attributes,e={},t=0;t<n.length;t+=1)e[n[t].name]=n[t].value;return e}if(typeof i=="string"&&r===void 0)return o.getAttribute(i);typeof i=="object"?Rx(o,i):Kb(o,i,r)}function Nx(o){if(o.indexOf(":")!==-1){var i=o.split(":");return{ns:Tf[i[0]],local:i[1]}}return{ns:null,local:o}}function $F(o){var i={};return Object.keys(o).forEach(function(r){var n=FA.includes(r)?r:mA(r);i[n]=o[r]}),i}function Zm(o){var i={},r=o.split(";");return r.forEach(function(n){var e=n.trim();if(e){var t=e.split("=");t.length&&(i[t[0].trim()]=t[1]?t[1].trim():"")}}),i}function Yb(o,i){return Object.keys(i).forEach(function(r){if(r==="class")o[r]=o[r]?"".concat(o[r]," ").concat(i[r]):i[r];else if(r==="style"){var n=typeof o[r]=="object",e=typeof i[r]=="object",t,a;n&&e?(t=o[r],a=i[r]):n?(t=o[r],a=Zm(i[r])):e?(t=Zm(o[r]),a=i[r]):(t=Zm(o[r]),a=Zm(i[r])),o[r]=Yb(t,a)}else o[r]=i[r]}),o}function XF(o,i){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.offset||0,e=[],t=[],a,s,u=null,l=0;l<o.length;l+=1){a=t[l]=o[l];for(var c=0,f=i.length;c<f;c+=1){var d=i[c],v=d.start+n,p=d.end+n;l>=v&&l<p&&(typeof a=="string"?a=t[l]={t:o[l],attrs:d.attrs}:a.attrs=Yb(Yb({},a.attrs),d.attrs),r.includeAnnotationIndices&&(a.annotations==null&&(a.annotations=[]),a.annotations.push(c)))}s=t[l-1],s?m.isObject(a)&&m.isObject(s)?(u=u,JSON.stringify(a.attrs)===JSON.stringify(s.attrs)?u.t+=a.t:(e.push(u),u=a)):m.isObject(a)||m.isObject(s)?(u=u,e.push(u),u=a):u=(u||"")+a:u=a}return u!=null&&e.push(u),e}function KF(o,i){return o?o.filter(function(r){return r.start<i&&i<=r.end}):[]}function YF(o,i,r){return o?o.filter(function(n){return i>=n.start&&i<n.end||r>n.start&&r<=n.end||n.start>=i&&n.end<r}):[]}function ZF(o,i,r){return o&&o.forEach(function(n){n.start<i&&n.end>=i?n.end+=r:n.start>=i&&(n.start+=r,n.end+=r)}),o}function JF(o){return o.replace(/ /g,"\xA0")}var GA;(function(o){o.emptyObject=Object.freeze({}),o.emptyArray=Object.freeze([]);function i(c){return c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"}o.isPrimitive=i;function r(c){return Array.isArray(c)}o.isArray=r;function n(c){return!i(c)&&!r(c)}o.isObject=n;function e(c,f){if(c===f)return!0;if(i(c)||i(f))return!1;var d=r(c),v=r(f);return d!==v?!1:d&&v?a(c,f):s(c,f)}o.deepEqual=e;function t(c){return i(c)?c:r(c)?u(c):l(c)}o.deepCopy=t;function a(c,f){if(c===f)return!0;if(c.length!==f.length)return!1;for(var d=0,v=c.length;d<v;d+=1)if(!e(c[d],f[d]))return!1;return!0}function s(c,f){if(c===f)return!0;for(var d in c)if(!(d in f))return!1;for(var v in f)if(!(v in c))return!1;for(var p in c)if(!e(c[p],f[p]))return!1;return!0}function u(c){for(var f=new Array(c.length),d=0,v=c.length;d<v;d+=1)f[d]=t(c[d]);return f}function l(c){var f={};return Object.keys(c).forEach(function(d){f[d]=t(c[d])}),f}})(GA||(GA={}));var jx;(function(o){function i(l){var c="data:";return l.substr(0,c.length)===c}o.isDataUrl=i;function r(l,c){if(!l||i(l)){setTimeout(function(){return c(null,l)});return}var f=function(){c(new Error("Failed to load image: ".concat(l)))},d=window.FileReader?function(p){if(p.status===200){var y=new FileReader;y.onload=function(C){var E=C.target.result;c(null,E)},y.onerror=f,y.readAsDataURL(p.response)}else f()}:function(p){var y=function(j){for(var B=32768,$=[],Z=0;Z<j.length;Z+=B)$.push(String.fromCharCode.apply(null,j.subarray(Z,Z+B)));return $.join("")};if(p.status===200){var C=l.split(".").pop()||"png";C==="svg"&&(C="svg+xml");var E="data:image/".concat(C,";base64,"),w=new Uint8Array(p.response),x=E+btoa(y(w));c(null,x)}else f()},v=new XMLHttpRequest;v.responseType=window.FileReader?"blob":"arraybuffer",v.open("GET",l,!0),v.addEventListener("error",f),v.addEventListener("load",function(){return d(v)}),v.send()}o.imageToDataUri=r;function n(l){var c=l.replace(/\s/g,"");c=decodeURIComponent(c);var f=c.indexOf(","),d=c.slice(0,f),v=d.split(":")[1].split(";")[0],p=c.slice(f+1),y;d.indexOf("base64")>=0?y=atob(p):y=unescape(encodeURIComponent(p));for(var C=new Uint8Array(y.length),E=0;E<y.length;E+=1)C[E]=y.charCodeAt(E);return new Blob([C],{type:v})}o.dataUriToBlob=n;function e(l,c){var f=window.navigator.msSaveBlob;if(f)f(l,c);else{var d=window.URL.createObjectURL(l),v=document.createElement("a");v.href=d,v.download=c,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(d)}}o.downloadBlob=e;function t(l,c){var f=n(l);e(f,c)}o.downloadDataUri=t;function a(l){var c=l.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return c&&c[2]?c[2].replace(/\s+/," ").split(" "):null}function s(l){var c=parseFloat(l);return Number.isNaN(c)?null:c}function u(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=null,d=function(N){return f==null&&(f=a(l)),f!=null?s(f[N]):null},v=function(N){var j=l.match(N);return j&&j[2]?s(j[2]):null},p=c.width;if(p==null&&(p=v(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),p==null&&(p=d(2)),p==null)throw new Error("Can not parse width from svg string");var y=c.height;if(y==null&&(y=v(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),y==null&&(y=d(3)),y==null)throw new Error("Can not parse height from svg string");var C=encodeURIComponent(l).replace(/'/g,"%27").replace(/"/g,"%22"),E="data:image/svg+xml",w="".concat(E,",").concat(C);return w}o.svgToDataUrl=u})(jx||(jx={}));var xv,QF={px:function(i){return i},mm:function(i){return xv*i},cm:function(i){return xv*i*10},in:function(i){return xv*i*25.4},pt:function(i){return xv*(25.4*i/72)},pc:function(i){return xv*(25.4*i/6)}},Lx;(function(o){function i(n,e,t){var a=ln()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:n+(t||""),height:e+(t||"")}).appendTo(document.body),s={width:a.width()||0,height:a.height()||0};return a.remove(),s}o.measure=i;function r(n,e){xv==null&&(xv=i("1","1","mm").width);var t=e?QF[e]:null;return t?t(n):n}o.toPx=r})(Lx||(Lx={}));var qF=function(){var o,i=window;if(i!=null&&(o=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame,o!=null&&(o=o.bind(i))),o==null){var r=0;o=function(e){var t=new Date().getTime(),a=Math.max(0,16-(t-r)),s=setTimeout(function(){e(t+a)},a);return r=t+a,s}}return o}(),e6=function(){var o,i=window;return i!=null&&(o=i.cancelAnimationFrame||i.webkitCancelAnimationFrame||i.webkitCancelRequestAnimationFrame||i.msCancelAnimationFrame||i.msCancelRequestAnimationFrame||i.oCancelAnimationFrame||i.oCancelRequestAnimationFrame||i.mozCancelAnimationFrame||i.mozCancelRequestAnimationFrame,o&&(o=o.bind(i))),o==null&&(o=clearTimeout),o}(),t6=/-(.)/g;function n6(o){return o.replace(t6,function(i,r){return r.toUpperCase()})}var _x={},zA=["Webkit","ms","Moz","O"],UA=document?document.createElement("div").style:{};function r6(o){for(var i=0;i<zA.length;i+=1){var r=zA[i]+o;if(r in UA)return r}return null}function VA(o){var i=n6(o);if(_x[i]==null){var r=i.charAt(0).toUpperCase()+i.slice(1);_x[i]=i in UA?i:r6(r)}return _x[i]}function a6(o,i,r){var n=VA(i);n!=null&&(o[n]=r),o[i]=r}function Zb(o,i){var r=o.ownerDocument&&o.ownerDocument.defaultView&&o.ownerDocument.defaultView.opener?o.ownerDocument.defaultView.getComputedStyle(o,null):window.getComputedStyle(o,null);return r&&i?r.getPropertyValue(i)||r[i]:r}function i6(o){var i=Zb(o);return i!=null&&(i.overflow==="scroll"||i.overflow==="auto")}var o6=function(){var o=document;return o.selection?function(){o.selection.empty()}:window.getSelection?function(){var i=window.getSelection();i&&(i.empty?i.empty():i.removeAllRanges&&i.removeAllRanges())}:function(){}}(),ti;(function(o){function i(n){return 180*n/Math.PI%360}o.toDeg=i,o.toRad=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=e?n:n%360;return t*Math.PI/180};function r(n){return n%360+(n<0?360:0)}o.normalize=r})(ti||(ti={}));function Sv(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Number.isInteger(o)?o:+o.toFixed(i)}function HA(o,i){var r,n;if(i==null?(n=o==null?1:o,r=0):(n=i,r=o==null?0:o),n<r){var e=r;r=n,n=e}return Math.floor(Math.random()*(n-r+1)+r)}function Xg(o,i,r){return Number.isNaN(o)?NaN:Number.isNaN(i)||Number.isNaN(r)?0:i<r?o<i?i:o>r?r:o:o<r?r:o>i?i:o}function Fx(o,i){return i*Math.round(o/i)}function WA(o,i){return i!=null&&o!=null&&i.x>=o.x&&i.x<=o.x+o.width&&i.y>=o.y&&i.y<=o.y+o.height}function $A(o,i){var r=o.x-i.x,n=o.y-i.y;return r*r+n*n}var uh=function(){function o(){Object(De.a)(this,o)}return Object(be.a)(o,[{key:"valueOf",value:function(){return this.toJSON()}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),o}(),mt=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(e,t){var a;return Object(De.a)(this,n),a=r.call(this),a.x=e==null?0:e,a.y=t==null?0:t,a}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"round",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Sv(this.x,t),this.y=Sv(this.y,t),this}},{key:"add",value:function(t,a){var s=n.create(t,a);return this.x+=s.x,this.y+=s.y,this}},{key:"update",value:function(t,a){var s=n.create(t,a);return this.x=s.x,this.y=s.y,this}},{key:"translate",value:function(t,a){var s=n.create(t,a);return this.x+=s.x,this.y+=s.y,this}},{key:"rotate",value:function(t,a){var s=n.rotate(this,t,a);return this.x=s.x,this.y=s.y,this}},{key:"scale",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new n,u=n.create(s);return this.x=u.x+t*(this.x-u.x),this.y=u.y+a*(this.y-u.y),this}},{key:"closest",value:function(t){var a=this;if(t.length===1)return n.create(t[0]);var s=null,u=Infinity;return t.forEach(function(l){var c=a.squaredDistance(l);c<u&&(s=l,u=c)}),s?n.create(s):null}},{key:"distance",value:function(t){return Math.sqrt(this.squaredDistance(t))}},{key:"squaredDistance",value:function(t){var a=n.create(t),s=this.x-a.x,u=this.y-a.y;return s*s+u*u}},{key:"manhattanDistance",value:function(t){var a=n.create(t);return Math.abs(a.x-this.x)+Math.abs(a.y-this.y)}},{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}},{key:"theta",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n,a=n.create(t),s=-(a.y-this.y),u=a.x-this.x,l=Math.atan2(s,u);return l<0&&(l=2*Math.PI+l),180*l/Math.PI}},{key:"angleBetween",value:function(t,a){if(this.equals(t)||this.equals(a))return NaN;var s=this.theta(a)-this.theta(t);return s<0&&(s+=360),s}},{key:"vectorAngle",value:function(t){var a=new n(0,0);return a.angleBetween(this,t)}},{key:"toPolar",value:function(t){return this.update(n.toPolar(this,t)),this}},{key:"changeInAngle",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new n;return this.clone().translate(-t,-a).theta(s)-this.theta(s)}},{key:"adhereToRect",value:function(t){return WA(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this}},{key:"bearing",value:function(t){var a=n.create(t),s=ti.toRad(this.y),u=ti.toRad(a.y),l=this.x,c=a.x,f=ti.toRad(c-l),d=Math.sin(f)*Math.cos(u),v=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(f),p=ti.toDeg(Math.atan2(d,v)),y=["NE","E","SE","S","SW","W","NW","N"],C=p-22.5;return C<0&&(C+=360),C=parseInt(C/45,10),y[C]}},{key:"cross",value:function(t,a){if(t!=null&&a!=null){var s=n.create(t),u=n.create(a);return(u.x-this.x)*(s.y-this.y)-(u.y-this.y)*(s.x-this.x)}return NaN}},{key:"dot",value:function(t){var a=n.create(t);return this.x*a.x+this.y*a.y}},{key:"diff",value:function(t,a){if(typeof t=="number")return new n(this.x-t,this.y-a);var s=n.create(t);return new n(this.x-s.x,this.y-s.y)}},{key:"lerp",value:function(t,a){var s=n.create(t);return new n((1-a)*this.x+a*s.x,(1-a)*this.y+a*s.y)}},{key:"normalize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=t/this.magnitude();return this.scale(a,a)}},{key:"move",value:function(t,a){var s=n.create(t),u=ti.toRad(s.theta(this));return this.translate(Math.cos(u)*a,-Math.sin(u)*a)}},{key:"reflection",value:function(t){return n.create(t).move(this,this.distance(t))}},{key:"snapToGrid",value:function(t,a){return this.x=Fx(this.x,t),this.y=Fx(this.y,a==null?t:a),this}},{key:"equals",value:function(t){var a=n.create(t);return a!=null&&a.x===this.x&&a.y===this.y}},{key:"clone",value:function(){return n.clone(this)}},{key:"toJSON",value:function(){return n.toJSON(this)}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y)}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.toPolar=="function"}o.isPoint=i})(mt||(mt={})),function(o){function i(n){return n!=null&&typeof n=="object"&&typeof n.x=="number"&&typeof n.y=="number"}o.isPointLike=i;function r(n){return n!=null&&Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"}o.isPointData=r}(mt||(mt={})),function(o){function i(f,d){return f==null||typeof f=="number"?new o(f,d):r(f)}o.create=i;function r(f){return o.isPoint(f)?new o(f.x,f.y):Array.isArray(f)?new o(f[0],f[1]):new o(f.x,f.y)}o.clone=r;function n(f){return o.isPoint(f)?{x:f.x,y:f.y}:Array.isArray(f)?{x:f[0],y:f[1]}:{x:f.x,y:f.y}}o.toJSON=n;function e(f,d){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new o,p=Math.abs(f*Math.cos(d)),y=Math.abs(f*Math.sin(d)),C=r(v),E=ti.normalize(ti.toDeg(d));return E<90?y=-y:E<180?(p=-p,y=-y):E<270&&(p=-p),new o(C.x+p,C.y+y)}o.fromPolar=e;function t(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new o,v=r(f),p=r(d),y=v.x-p.x,C=v.y-p.y;return new o(Math.sqrt(y*y+C*C),ti.toRad(p.theta(v)))}o.toPolar=t;function a(f,d){return f===d?!0:f!=null&&d!=null?f.x===d.x&&f.y===d.y:!1}o.equals=a;function s(f,d){if(f==null&&d!=null||f!=null&&d==null||f!=null&&d!=null&&f.length!==d.length)return!1;if(f!=null&&d!=null){for(var v=0,p=f.length;v<p;v+=1)if(!a(f[v],d[v]))return!1}return!0}o.equalPoints=s;function u(f,d,v,p){return new o(HA(f,d),HA(v,p))}o.random=u;function l(f,d,v){var p=ti.toRad(ti.normalize(-d)),y=Math.sin(p),C=Math.cos(p);return c(f,C,y,v)}o.rotate=l;function c(f,d,v){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new o,y=r(f),C=r(p),E=y.x-C.x,w=y.y-C.y,x=E*d-w*v,N=w*d+E*v;return new o(x+C.x,N+C.y)}o.rotateEx=c}(mt||(mt={}));var Sr=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(e,t,a,s){var u;return Object(De.a)(this,n),u=r.call(this),u.x=e==null?0:e,u.y=t==null?0:t,u.width=a==null?0:a,u.height=s==null?0:s,u}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}},{key:"origin",get:function(){return new mt(this.x,this.y)}},{key:"topLeft",get:function(){return new mt(this.x,this.y)}},{key:"topCenter",get:function(){return new mt(this.x+this.width/2,this.y)}},{key:"topRight",get:function(){return new mt(this.x+this.width,this.y)}},{key:"center",get:function(){return new mt(this.x+this.width/2,this.y+this.height/2)}},{key:"bottomLeft",get:function(){return new mt(this.x,this.y+this.height)}},{key:"bottomCenter",get:function(){return new mt(this.x+this.width/2,this.y+this.height)}},{key:"bottomRight",get:function(){return new mt(this.x+this.width,this.y+this.height)}},{key:"corner",get:function(){return new mt(this.x+this.width,this.y+this.height)}},{key:"rightMiddle",get:function(){return new mt(this.x+this.width,this.y+this.height/2)}},{key:"leftMiddle",get:function(){return new mt(this.x,this.y+this.height/2)}},{key:"topLine",get:function(){return new ua(this.topLeft,this.topRight)}},{key:"rightLine",get:function(){return new ua(this.topRight,this.bottomRight)}},{key:"bottomLine",get:function(){return new ua(this.bottomLeft,this.bottomRight)}},{key:"leftLine",get:function(){return new ua(this.topLeft,this.bottomLeft)}},{key:"getOrigin",value:function(){return this.origin}},{key:"getTopLeft",value:function(){return this.topLeft}},{key:"getTopCenter",value:function(){return this.topCenter}},{key:"getTopRight",value:function(){return this.topRight}},{key:"getCenter",value:function(){return this.center}},{key:"getCenterX",value:function(){return this.x+this.width/2}},{key:"getCenterY",value:function(){return this.y+this.height/2}},{key:"getBottomLeft",value:function(){return this.bottomLeft}},{key:"getBottomCenter",value:function(){return this.bottomCenter}},{key:"getBottomRight",value:function(){return this.bottomRight}},{key:"getCorner",value:function(){return this.corner}},{key:"getRightMiddle",value:function(){return this.rightMiddle}},{key:"getLeftMiddle",value:function(){return this.leftMiddle}},{key:"getTopLine",value:function(){return this.topLine}},{key:"getRightLine",value:function(){return this.rightLine}},{key:"getBottomLine",value:function(){return this.bottomLine}},{key:"getLeftLine",value:function(){return this.leftLine}},{key:"bbox",value:function(t){if(!t)return this.clone();var a=ti.toRad(t),s=Math.abs(Math.sin(a)),u=Math.abs(Math.cos(a)),l=this.width*u+this.height*s,c=this.width*s+this.height*u;return new n(this.x+(this.width-l)/2,this.y+(this.height-c)/2,l,c)}},{key:"round",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Sv(this.x,t),this.y=Sv(this.y,t),this.width=Sv(this.width,t),this.height=Sv(this.height,t),this}},{key:"add",value:function(t,a,s,u){var l=n.create(t,a,s,u),c=Math.min(this.x,l.x),f=Math.min(this.y,l.y),d=Math.max(this.x+this.width,l.x+l.width),v=Math.max(this.y+this.height,l.y+l.height);return this.x=c,this.y=f,this.width=d-c,this.height=v-f,this}},{key:"update",value:function(t,a,s,u){var l=n.create(t,a,s,u);return this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height,this}},{key:"inflate",value:function(t,a){var s=t,u=a!=null?a:t;return this.x-=s,this.y-=u,this.width+=2*s,this.height+=2*u,this}},{key:"snapToGrid",value:function(t,a){var s=this.origin.snapToGrid(t,a),u=this.corner.snapToGrid(t,a);return this.x=s.x,this.y=s.y,this.width=u.x-s.x,this.height=u.y-s.y,this}},{key:"translate",value:function(t,a){var s=mt.create(t,a);return this.x+=s.x,this.y+=s.y,this}},{key:"scale",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new mt,u=this.origin.scale(t,a,s);return this.x=u.x,this.y=u.y,this.width*=t,this.height*=a,this}},{key:"rotate",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCenter();if(t!==0){var s=ti.toRad(t),u=Math.cos(s),l=Math.sin(s),c=this.getOrigin(),f=this.getTopRight(),d=this.getBottomRight(),v=this.getBottomLeft();c=mt.rotateEx(c,u,l,a),f=mt.rotateEx(f,u,l,a),d=mt.rotateEx(d,u,l,a),v=mt.rotateEx(v,u,l,a);var p=new n(c.x,c.y,0,0);p.add(f.x,f.y,0,0),p.add(d.x,d.y,0,0),p.add(v.x,v.y,0,0),this.update(p)}return this}},{key:"rotate90",value:function(){var t=(this.width-this.height)/2;this.x+=t,this.y-=t;var a=this.width;return this.width=this.height,this.height=a,this}},{key:"moveAndExpand",value:function(t){var a=n.clone(t);return this.x+=a.x||0,this.y+=a.y||0,this.width+=a.width||0,this.height+=a.height||0,this}},{key:"getMaxScaleToFit",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,s=n.clone(t),u=a.x,l=a.y,c=Infinity,f=Infinity,d=Infinity,v=Infinity,p=Infinity,y=Infinity,C=Infinity,E=Infinity,w=s.topLeft;w.x<u&&(c=(this.x-u)/(w.x-u)),w.y<l&&(p=(this.y-l)/(w.y-l));var x=s.bottomRight;x.x>u&&(f=(this.x+this.width-u)/(x.x-u)),x.y>l&&(y=(this.y+this.height-l)/(x.y-l));var N=s.topRight;N.x>u&&(d=(this.x+this.width-u)/(N.x-u)),N.y<l&&(C=(this.y-l)/(N.y-l));var j=s.bottomLeft;return j.x<u&&(v=(this.x-u)/(j.x-u)),j.y>l&&(E=(this.y+this.height-l)/(j.y-l)),{sx:Math.min(c,f,d,v),sy:Math.min(p,y,C,E)}}},{key:"getMaxUniformScaleToFit",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,s=this.getMaxScaleToFit(t,a);return Math.min(s.sx,s.sy)}},{key:"containsPoint",value:function(t,a){return WA(this,mt.create(t,a))}},{key:"containsRect",value:function(t,a,s,u){var l=n.create(t,a,s,u),c=this.x,f=this.y,d=this.width,v=this.height,p=l.x,y=l.y,C=l.width,E=l.height;return d===0||v===0||C===0||E===0?!1:p>=c&&y>=f&&p+C<=c+d&&y+E<=f+v}},{key:"intersectsWithLine",value:function(t){var a=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],s=[],u=[];return a.forEach(function(l){var c=t.intersectsWithLine(l);c!==null&&u.indexOf(c.toString())<0&&(s.push(c),u.push(c.toString()))}),s.length>0?s:null}},{key:"intersectsWithLineFromCenterToPoint",value:function(t,a){var s=mt.clone(t),u=this.center,l=null;a!=null&&a!==0&&s.rotate(a,u);for(var c=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],f=new ua(u,s),d=c.length-1;d>=0;d-=1){var v=c[d].intersectsWithLine(f);if(v!==null){l=v;break}}return l&&a!=null&&a!==0&&l.rotate(-a,u),l}},{key:"intersectsWithRect",value:function(t,a,s,u){var l=n.create(t,a,s,u);if(!this.isIntersectWithRect(l))return null;var c=this.origin,f=this.corner,d=l.origin,v=l.corner,p=Math.max(c.x,d.x),y=Math.max(c.y,d.y);return new n(p,y,Math.min(f.x,v.x)-p,Math.min(f.y,v.y)-y)}},{key:"isIntersectWithRect",value:function(t,a,s,u){var l=n.create(t,a,s,u),c=this.origin,f=this.corner,d=l.origin,v=l.corner;return!(v.x<=c.x||v.y<=c.y||d.x>=f.x||d.y>=f.y)}},{key:"normalize",value:function(){var t=this.x,a=this.y,s=this.width,u=this.height;return this.width<0&&(t=this.x+this.width,s=-this.width),this.height<0&&(a=this.y+this.height,u=-this.height),this.x=t,this.y=a,this.width=s,this.height=u,this}},{key:"union",value:function(t){var a=n.clone(t),s=this.origin,u=this.corner,l=a.origin,c=a.corner,f=Math.min(s.x,l.x),d=Math.min(s.y,l.y),v=Math.max(u.x,c.x),p=Math.max(u.y,c.y);return new n(f,d,v-f,p-d)}},{key:"getNearestSideToPoint",value:function(t){var a=mt.clone(t),s=a.x-this.x,u=this.x+this.width-a.x,l=a.y-this.y,c=this.y+this.height-a.y,f=s,d="left";return u<f&&(f=u,d="right"),l<f&&(f=l,d="top"),c<f&&(d="bottom"),d}},{key:"getNearestPointToPoint",value:function(t){var a=mt.clone(t);if(this.containsPoint(a)){var s=this.getNearestSideToPoint(a);switch(s){case"right":return new mt(this.x+this.width,a.y);case"left":return new mt(this.x,a.y);case"bottom":return new mt(a.x,this.y+this.height);case"top":return new mt(a.x,this.y);default:break}}return a.adhereToRect(this)}},{key:"equals",value:function(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}},{key:"clone",value:function(){return new n(this.x,this.y,this.width,this.height)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.width," ").concat(this.height)}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.width=="number"&&typeof e.height=="number"&&typeof e.inflate=="function"&&typeof e.moveAndExpand=="function"}o.isRectangle=i})(Sr||(Sr={})),function(o){function i(r){return r!=null&&typeof r=="object"&&typeof r.x=="number"&&typeof r.y=="number"&&typeof r.width=="number"&&typeof r.height=="number"}o.isRectangleLike=i}(Sr||(Sr={})),function(o){function i(a,s,u,l){return a==null||typeof a=="number"?new o(a,s,u,l):r(a)}o.create=i;function r(a){return o.isRectangle(a)?a.clone():Array.isArray(a)?new o(a[0],a[1],a[2],a[3]):new o(a.x,a.y,a.width,a.height)}o.clone=r;function n(a){return new o(0,0,a.width,a.height)}o.fromSize=n;function e(a,s){return new o(a.x,a.y,s.width,s.height)}o.fromPositionAndSize=e;function t(a){return new o(a.x-a.a,a.y-a.b,2*a.a,2*a.b)}o.fromEllipse=t}(Sr||(Sr={}));var ua=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(e,t,a,s){var u;return Object(De.a)(this,n),u=r.call(this),typeof e=="number"&&typeof t=="number"?(u.start=new mt(e,t),u.end=new mt(a,s)):(u.start=mt.create(e),u.end=mt.create(t)),u}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"center",get:function(){return new mt((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}},{key:"getCenter",value:function(){return this.center}},{key:"round",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.start.round(t),this.end.round(t),this}},{key:"translate",value:function(t,a){return typeof t=="number"?(this.start.translate(t,a),this.end.translate(t,a)):(this.start.translate(t),this.end.translate(t)),this}},{key:"rotate",value:function(t,a){return this.start.rotate(t,a),this.end.rotate(t,a),this}},{key:"scale",value:function(t,a,s){return this.start.scale(t,a,s),this.end.scale(t,a,s),this}},{key:"length",value:function(){return Math.sqrt(this.squaredLength())}},{key:"squaredLength",value:function(){var t=this.start.x-this.end.x,a=this.start.y-this.end.y;return t*t+a*a}},{key:"setLength",value:function(t){var a=this.length();if(!a)return this;var s=t/a;return this.scale(s,s,this.start)}},{key:"parallel",value:function(t){var a=this.clone();if(!a.isDifferentiable())return a;var s=a.start,u=a.end,l=s.clone().rotate(270,u),c=u.clone().rotate(90,s);return s.move(c,t),u.move(l,t),a}},{key:"vector",value:function(){return new mt(this.end.x-this.start.x,this.end.y-this.start.y)}},{key:"angle",value:function(){var t=new mt(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}},{key:"bbox",value:function(){var t=Math.min(this.start.x,this.end.x),a=Math.min(this.start.y,this.end.y),s=Math.max(this.start.x,this.end.x),u=Math.max(this.start.y,this.end.y);return new Sr(t,a,s-t,u-a)}},{key:"bearing",value:function(){return this.start.bearing(this.end)}},{key:"closestPoint",value:function(t){return this.pointAt(this.closestPointNormalizedLength(t))}},{key:"closestPointLength",value:function(t){return this.closestPointNormalizedLength(t)*this.length()}},{key:"closestPointTangent",value:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))}},{key:"closestPointNormalizedLength",value:function(t){var a=this.vector().dot(new n(this.start,t).vector()),s=Math.min(1,Math.max(0,a/this.squaredLength()));return Number.isNaN(s)?0:s}},{key:"pointAt",value:function(t){var a=this.start,s=this.end;return t<=0?a.clone():t>=1?s.clone():a.lerp(s,t)}},{key:"pointAtLength",value:function(t){var a=this.start,s=this.end,u=!0;t<0&&(u=!1,t=-t);var l=this.length();if(t>=l)return u?s.clone():a.clone();var c=(u?t:l-t)/l;return this.pointAt(c)}},{key:"divideAt",value:function(t){var a=this.pointAt(t);return[new n(this.start,a),new n(a,this.end)]}},{key:"divideAtLength",value:function(t){var a=this.pointAtLength(t);return[new n(this.start,a),new n(a,this.end)]}},{key:"containsPoint",value:function(t){var a=this.start,s=this.end;if(a.cross(t,s)!==0)return!1;var u=this.length();return!(new n(a,t).length()>u||new n(t,s).length()>u)}},{key:"intersect",value:function(t,a){var s=t.intersectsWithLine(this,a);return s?Array.isArray(s)?s:[s]:null}},{key:"intersectsWithLine",value:function(t){var a=new mt(this.end.x-this.start.x,this.end.y-this.start.y),s=new mt(t.end.x-t.start.x,t.end.y-t.start.y),u=a.x*s.y-a.y*s.x,l=new mt(t.start.x-this.start.x,t.start.y-this.start.y),c=l.x*s.y-l.y*s.x,f=l.x*a.y-l.y*a.x;if(u===0||c*u<0||f*u<0)return null;if(u>0){if(c>u||f>u)return null}else if(c<u||f<u)return null;return new mt(this.start.x+c*a.x/u,this.start.y+c*a.y/u)}},{key:"isDifferentiable",value:function(){return!this.start.equals(this.end)}},{key:"pointOffset",value:function(t){var a=mt.clone(t),s=this.start,u=this.end,l=(u.x-s.x)*(a.y-s.y)-(u.y-s.y)*(a.x-s.x);return l/this.length()}},{key:"pointSquaredDistance",value:function(t,a){var s=mt.create(t,a);return this.closestPoint(s).squaredDistance(s)}},{key:"pointDistance",value:function(t,a){var s=mt.create(t,a);return this.closestPoint(s).distance(s)}},{key:"tangentAt",value:function(t){if(!this.isDifferentiable())return null;var a=this.start,s=this.end,u=this.pointAt(t),l=new n(a,s);return l.translate(u.x-a.x,u.y-a.y),l}},{key:"tangentAtLength",value:function(t){if(!this.isDifferentiable())return null;var a=this.start,s=this.end,u=this.pointAtLength(t),l=new n(a,s);return l.translate(u.x-a.x,u.y-a.y),l}},{key:"relativeCcw",value:function(t,a){var s=mt.create(t,a),u=s.x-this.start.x,l=s.y-this.start.y,c=this.end.x-this.start.x,f=this.end.y-this.start.y,d=u*f-l*c;return d===0&&(d=u*c+l*f,d>0&&(u-=c,l-=f,d=u*c+l*f,d<0&&(d=0))),d<0?-1:d>0?1:0}},{key:"equals",value:function(t){return t!=null&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}},{key:"clone",value:function(){return new n(this.start,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.end.serialize()].join(" ")}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;try{if((n==null||n===o.toStringTag)&&mt.isPoint(e.start)&&mt.isPoint(e.end)&&typeof e.vector=="function"&&typeof e.bearing=="function"&&typeof e.parallel=="function"&&typeof e.intersect=="function")return!0}catch(t){return!1}return!1}o.isLine=i})(ua||(ua={}));var lh=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(e,t,a,s){var u;return Object(De.a)(this,n),u=r.call(this),u.x=e==null?0:e,u.y=t==null?0:t,u.a=a==null?0:a,u.b=s==null?0:s,u}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"center",get:function(){return new mt(this.x,this.y)}},{key:"bbox",value:function(){return Sr.fromEllipse(this)}},{key:"getCenter",value:function(){return this.center}},{key:"inflate",value:function(t,a){var s=t,u=a!=null?a:t;return this.a+=2*s,this.b+=2*u,this}},{key:"normalizedDistance",value:function(t,a){var s=mt.create(t,a),u=s.x-this.x,l=s.y-this.y,c=this.a,f=this.b;return u*u/(c*c)+l*l/(f*f)}},{key:"containsPoint",value:function(t,a){return this.normalizedDistance(t,a)<=1}},{key:"intersectsWithLine",value:function(t){var a=[],s=this.a,u=this.b,l=t.start,c=t.end,f=t.vector(),d=l.diff(new mt(this.x,this.y)),v=new mt(f.x/(s*s),f.y/(u*u)),p=new mt(d.x/(s*s),d.y/(u*u)),y=f.dot(v),C=f.dot(p),E=d.dot(p)-1,w=C*C-y*E;if(w<0)return null;if(w>0){var x=Math.sqrt(w),N=(-C-x)/y,j=(-C+x)/y;if((N<0||N>1)&&(j<0||j>1))return null;N>=0&&N<=1&&a.push(l.lerp(c,N)),j>=0&&j<=1&&a.push(l.lerp(c,j))}else{var B=-C/y;if(B>=0&&B<=1)a.push(l.lerp(c,B));else return null}return a}},{key:"intersectsWithLineFromCenterToPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=mt.clone(t);a&&s.rotate(a,this.getCenter());var u=s.x-this.x,l=s.y-this.y,c;if(u===0)return c=this.bbox().getNearestPointToPoint(s),a?c.rotate(-a,this.getCenter()):c;var f=l/u,d=f*f,v=this.a*this.a,p=this.b*this.b,y=Math.sqrt(1/(1/v+d/p));y=u<0?-y:y;var C=f*y;return c=new mt(this.x+y,this.y+C),a?c.rotate(-a,this.getCenter()):c}},{key:"tangentTheta",value:function(t){var a=mt.clone(t),s=a.x,u=a.y,l=this.a,c=this.b,f=this.bbox().center,d=f.x,v=f.y,p=30,y=s>f.x+l/2,C=s<f.x-l/2,E,w;return y||C?(w=s>f.x?u-p:u+p,E=l*l/(s-d)-l*l*(u-v)*(w-v)/(c*c*(s-d))+d):(E=u>f.y?s+p:s-p,w=c*c/(u-v)-c*c*(s-d)*(E-d)/(l*l*(u-v))+v),new mt(E,w).theta(a)}},{key:"scale",value:function(t,a){return this.a*=t,this.b*=a,this}},{key:"rotate",value:function(t,a){var s=Sr.fromEllipse(this);s.rotate(t,a);var u=n.fromRect(s);return this.a=u.a,this.b=u.b,this.x=u.x,this.y=u.y,this}},{key:"translate",value:function(t,a){var s=mt.create(t,a);return this.x+=s.x,this.y+=s.y,this}},{key:"equals",value:function(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}},{key:"clone",value:function(){return new n(this.x,this.y,this.a,this.b)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,a:this.a,b:this.b}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.a," ").concat(this.b)}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.a=="number"&&typeof e.b=="number"&&typeof e.inflate=="function"&&typeof e.normalizedDistance=="function"}o.isEllipse=i})(lh||(lh={})),function(o){function i(e,t,a,s){return e==null||typeof e=="number"?new o(e,t,a,s):r(e)}o.create=i;function r(e){return o.isEllipse(e)?e.clone():Array.isArray(e)?new o(e[0],e[1],e[2],e[3]):new o(e.x,e.y,e.a,e.b)}o.parse=r;function n(e){var t=e.center;return new o(t.x,t.y,e.width/2,e.height/2)}o.fromRect=n}(lh||(lh={}));var Bx=h("Nsem"),Cu=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(e){var t;if(Object(De.a)(this,n),t=r.call(this),e!=null){if(typeof e=="string")return Object(Bx.a)(t,n.parse(e));t.points=e.map(function(a){return mt.create(a)})}else t.points=[];return t}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"start",get:function(){return this.points.length===0?null:this.points[0]}},{key:"end",get:function(){return this.points.length===0?null:this.points[this.points.length-1]}},{key:"scale",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new mt;return this.points.forEach(function(u){return u.scale(t,a,s)}),this}},{key:"rotate",value:function(t,a){return this.points.forEach(function(s){return s.rotate(t,a)}),this}},{key:"translate",value:function(t,a){var s=mt.create(t,a);return this.points.forEach(function(u){return u.translate(s.x,s.y)}),this}},{key:"bbox",value:function(){if(this.points.length===0)return new Sr;for(var t=Infinity,a=-Infinity,s=Infinity,u=-Infinity,l=this.points,c=0,f=l.length;c<f;c+=1){var d=l[c],v=d.x,p=d.y;v<t&&(t=v),v>a&&(a=v),p<s&&(s=p),p>u&&(u=p)}return new Sr(t,s,a-t,u-s)}},{key:"closestPoint",value:function(t){var a=this.closestPointLength(t);return this.pointAtLength(a)}},{key:"closestPointLength",value:function(t){var a=this.points,s=a.length;if(s===0||s===1)return 0;for(var u=0,l=0,c=Infinity,f=0,d=s-1;f<d;f+=1){var v=new ua(a[f],a[f+1]),p=v.length(),y=v.closestPointNormalizedLength(t),C=v.pointAt(y),E=C.squaredDistance(t);E<c&&(c=E,l=u+y*p),u+=p}return l}},{key:"closestPointNormalizedLength",value:function(t){var a=this.closestPointLength(t);if(a===0)return 0;var s=this.length();return s===0?0:a/s}},{key:"closestPointTangent",value:function(t){var a=this.closestPointLength(t);return this.tangentAtLength(a)}},{key:"containsPoint",value:function(t){if(this.points.length===0)return!1;for(var a=mt.clone(t),s=a.x,u=a.y,l=this.points,c=l.length,f=c-1,d=0,v=0;v<c;v+=1){var p=l[f],y=l[v];if(a.equals(p))return!0;var C=new ua(p,y);if(C.containsPoint(t))return!0;if(u<=p.y&&u>y.y||u>p.y&&u<=y.y){var E=p.x-s>y.x-s?p.x-s:y.x-s;if(E>=0){var w=new mt(s+E,u),x=new ua(t,w);C.intersectsWithLine(x)&&(d+=1)}}f=v}return d%2==1}},{key:"intersectsWithLine",value:function(t){for(var a=[],s=0,u=this.points.length-1;s<u;s+=1){var l=this.points[s],c=this.points[s+1],f=t.intersectsWithLine(new ua(l,c));f&&a.push(f)}return a.length>0?a:null}},{key:"isDifferentiable",value:function(){for(var t=0,a=this.points.length-1;t<a;t+=1){var s=this.points[t],u=this.points[t+1],l=new ua(s,u);if(l.isDifferentiable())return!0}return!1}},{key:"length",value:function(){for(var t=0,a=0,s=this.points.length-1;a<s;a+=1){var u=this.points[a],l=this.points[a+1];t+=u.distance(l)}return t}},{key:"pointAt",value:function(t){var a=this.points,s=a.length;if(s===0)return null;if(s===1||t<=0)return a[0].clone();if(t>=1)return a[s-1].clone();var u=this.length(),l=u*t;return this.pointAtLength(l)}},{key:"pointAtLength",value:function(t){var a=this.points,s=a.length;if(s===0)return null;if(s===1)return a[0].clone();var u=!0;t<0&&(u=!1,t=-t);for(var l=0,c=0,f=s-1;c<f;c+=1){var d=u?c:f-1-c,v=a[d],p=a[d+1],y=new ua(v,p),C=v.distance(p);if(t<=l+C)return y.pointAtLength((u?1:-1)*(t-l));l+=C}var E=u?a[s-1]:a[0];return E.clone()}},{key:"tangentAt",value:function(t){var a=this.points,s=a.length;if(s===0||s===1)return null;t<0&&(t=0),t>1&&(t=1);var u=this.length(),l=u*t;return this.tangentAtLength(l)}},{key:"tangentAtLength",value:function(t){var a=this.points,s=a.length;if(s===0||s===1)return null;var u=!0;t<0&&(u=!1,t=-t);for(var l,c=0,f=0,d=s-1;f<d;f+=1){var v=u?f:d-1-f,p=a[v],y=a[v+1],C=new ua(p,y),E=p.distance(y);if(C.isDifferentiable()){if(t<=c+E)return C.tangentAtLength((u?1:-1)*(t-c));l=C}c+=E}if(l){var w=u?1:0;return l.tangentAt(w)}return null}},{key:"simplify",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.points;if(a.length<3)return this;for(var s=t.threshold||0,u=0;a[u+2];){var l=u,c=u+1,f=u+2,d=a[l],v=a[c],p=a[f],y=new ua(d,p),C=y.closestPoint(v),E=C.distance(v);E<=s?a.splice(c,1):u+=1}return this}},{key:"toHull",value:function(){var t=this.points,a=t.length;if(a===0)return new n;for(var s=t[0],u=1;u<a;u+=1)(t[u].y<s.y||t[u].y===s.y&&t[u].x>s.x)&&(s=t[u]);for(var l=[],c=0;c<a;c+=1){var f=s.theta(t[c]);f===0&&(f=360),l.push([t[c],c,f])}if(l.sort(function(dn,tr){var Ut=dn[2]-tr[2];return Ut===0&&(Ut=tr[1]-dn[1]),Ut}),l.length>2){var d=l[l.length-1];l.unshift(d)}for(var v={},p=[],y=function(tr){return"".concat(tr[0].toString(),"@").concat(tr[1])};l.length!==0;){var C=l.pop(),E=C[0];if(!v[y(C)])for(var w=!1;!w;)if(p.length<2)p.push(C),w=!0;else{var x=p.pop(),N=x[0],j=p.pop(),B=j[0],$=B.cross(N,E);if($<0)p.push(j),p.push(x),p.push(C),w=!0;else if($===0){var Z=1e-10,fe=N.angleBetween(B,E);Math.abs(fe-180)<Z||N.equals(E)||B.equals(N)?(v[y(x)]=N,p.push(j)):Math.abs((fe+1)%360-1)<Z&&(p.push(j),l.push(x))}else v[y(x)]=N,p.push(j)}}p.length>2&&p.pop();for(var de,xe=-1,Ae=0,Ye=p.length;Ae<Ye;Ae+=1){var rt=p[Ae][1];(de===void 0||rt<de)&&(de=rt,xe=Ae)}var je=[];if(xe>0){var ot=p.slice(xe),Ft=p.slice(0,xe);je=ot.concat(Ft)}else je=p;for(var hn=[],In=0,xn=je.length;In<xn;In+=1)hn.push(je[In][0]);return new n(hn)}},{key:"equals",value:function(t){var a=this;return t==null||t.points.length!==this.points.length?!1:t.points.every(function(s,u){return s.equals(a.points[u])})}},{key:"clone",value:function(){return new n(this.points.map(function(t){return t.clone()}))}},{key:"toJSON",value:function(){return this.points.map(function(t){return t.toJSON()})}},{key:"serialize",value:function(){return this.points.map(function(t){return"".concat(t.x,", ").concat(t.y)}).join(" ")}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.toHull=="function"&&typeof e.simplify=="function"}o.isPolyline=i})(Cu||(Cu={})),function(o){function i(r){var n=r.trim();if(n==="")return new o;for(var e=[],t=n.split(/\s*,\s*|\s+/),a=0,s=t.length;a<s;a+=2)e.push({x:+t[a],y:+t[a+1]});return new o(e)}o.parse=i}(Cu||(Cu={}));var Sl=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(e,t,a,s){var u;return Object(De.a)(this,n),u=r.call(this),u.PRECISION=3,u.start=mt.create(e),u.controlPoint1=mt.create(t),u.controlPoint2=mt.create(a),u.end=mt.create(s),u}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"bbox",value:function(){for(var t=this.start,a=this.controlPoint1,s=this.controlPoint2,u=this.end,l=t.x,c=t.y,f=a.x,d=a.y,v=s.x,p=s.y,y=u.x,C=u.y,E=[],w=[],x=[[],[]],N,j,B,$,Z,fe,de,xe,Ae=0;Ae<2;Ae+=1){if(Ae===0?(j=6*l-12*f+6*v,N=-3*l+9*f-9*v+3*y,B=3*f-3*l):(j=6*c-12*d+6*p,N=-3*c+9*d-9*p+3*C,B=3*d-3*c),Math.abs(N)<1e-12){if(Math.abs(j)<1e-12)continue;$=-B/j,$>0&&$<1&&w.push($);continue}de=j*j-4*B*N,xe=Math.sqrt(de),!(de<0)&&(Z=(-j+xe)/(2*N),Z>0&&Z<1&&w.push(Z),fe=(-j-xe)/(2*N),fe>0&&fe<1&&w.push(fe))}for(var Ye,rt,je,ot=w.length,Ft=ot;ot;)ot-=1,$=w[ot],je=1-$,Ye=je*je*je*l+3*je*je*$*f+3*je*$*$*v+$*$*$*y,x[0][ot]=Ye,rt=je*je*je*c+3*je*je*$*d+3*je*$*$*p+$*$*$*C,x[1][ot]=rt,E[ot]={X:Ye,Y:rt};w[Ft]=0,w[Ft+1]=1,E[Ft]={X:l,Y:c},E[Ft+1]={X:y,Y:C},x[0][Ft]=l,x[1][Ft]=c,x[0][Ft+1]=y,x[1][Ft+1]=C,w.length=Ft+2,x[0].length=Ft+2,x[1].length=Ft+2,E.length=Ft+2;var hn=Math.min.apply(null,x[0]),In=Math.min.apply(null,x[1]),xn=Math.max.apply(null,x[0]),dn=Math.max.apply(null,x[1]);return new Sr(hn,In,xn-hn,dn-In)}},{key:"closestPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.pointAtT(this.closestPointT(t,a))}},{key:"closestPointLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(a);return this.lengthAtT(this.closestPointT(t,s),s)}},{key:"closestPointNormalizedLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(a),u=this.closestPointLength(t,s);if(!u)return 0;var l=this.length(s);return l===0?0:u/l}},{key:"closestPointT",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getPrecision(a),u=this.getDivisions(a),l=Math.pow(10,-s),c=null,f=0,d=0,v=0,p=0,y=0,C=null,E=u.length,w=E>0?1/E:0;for(u.forEach(function(ot,Ft){var hn=ot.start.distance(t),In=ot.end.distance(t),xn=hn+In;(C==null||xn<C)&&(c=ot,f=Ft*w,d=(Ft+1)*w,v=hn,p=In,C=xn,y=ot.endpointDistance())});;){var x=v?Math.abs(v-p)/v:0,N=p!=null?Math.abs(v-p)/p:0,j=x<l||N<l,B=v?v<y*l:!0,$=p?p<y*l:!0,Z=B||$;if(j||Z)return v<=p?f:d;var fe=c.divide(.5);w/=2;var de=fe[0].start.distance(t),xe=fe[0].end.distance(t),Ae=de+xe,Ye=fe[1].start.distance(t),rt=fe[1].end.distance(t),je=Ye+rt;Ae<=je?(c=fe[0],d-=w,v=de,p=xe):(c=fe[1],f+=w,v=Ye,p=rt)}}},{key:"closestPointTangent",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.tangentAtT(this.closestPointT(t,a))}},{key:"containsPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.toPolyline(a);return s.containsPoint(t)}},{key:"divideAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var s=this.tAt(t,a);return this.divideAtT(s)}},{key:"divideAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.tAtLength(t,a);return this.divideAtT(s)}},{key:"divide",value:function(t){return this.divideAtT(t)}},{key:"divideAtT",value:function(t){var a=this.start,s=this.controlPoint1,u=this.controlPoint2,l=this.end;if(t<=0)return[new n(a,a,a,a),new n(a,s,u,l)];if(t>=1)return[new n(a,s,u,l),new n(l,l,l,l)];var c=this.getSkeletonPoints(t),f=c.startControlPoint1,d=c.startControlPoint2,v=c.divider,p=c.dividerControlPoint1,y=c.dividerControlPoint2;return[new n(a,f,d,v),new n(v,p,y,l)]}},{key:"endpointDistance",value:function(){return this.start.distance(this.end)}},{key:"getSkeletonPoints",value:function(t){var a=this.start,s=this.controlPoint1,u=this.controlPoint2,l=this.end;if(t<=0)return{startControlPoint1:a.clone(),startControlPoint2:a.clone(),divider:a.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:u.clone()};if(t>=1)return{startControlPoint1:s.clone(),startControlPoint2:u.clone(),divider:l.clone(),dividerControlPoint1:l.clone(),dividerControlPoint2:l.clone()};var c=new ua(a,s).pointAt(t),f=new ua(s,u).pointAt(t),d=new ua(u,l).pointAt(t),v=new ua(c,f).pointAt(t),p=new ua(f,d).pointAt(t),y=new ua(v,p).pointAt(t);return{startControlPoint1:c,startControlPoint2:v,divider:y,dividerControlPoint1:p,dividerControlPoint2:d}}},{key:"getSubdivisions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getPrecision(t),s=[new n(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(a===0)return s;for(var u=this.endpointDistance(),l=Math.pow(10,-a),c=0,f=function(){c+=1;var p=[];s.forEach(function(E){var w=E.divide(.5);p.push(w[0],w[1])});var y=p.reduce(function(E,w){return E+w.endpointDistance()},0),C=y!==0?(y-u)/y:0;if(c>1&&C<l)return{v:p};s=p,u=y};;){var d=f();if(typeof d=="object")return d.v}}},{key:"length",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getDivisions(t);return a.reduce(function(s,u){return s+u.endpointDistance()},0)}},{key:"lengthAtT",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return 0;var s=a.precision===void 0?this.PRECISION:a.precision,u=this.divide(t)[0];return u.length({precision:s})}},{key:"pointAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var s=this.tAt(t,a);return this.pointAtT(s)}},{key:"pointAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.tAtLength(t,a);return this.pointAtT(s)}},{key:"pointAtT",value:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}},{key:"isDifferentiable",value:function(){var t=this.start,a=this.controlPoint1,s=this.controlPoint2,u=this.end;return!(t.equals(a)&&a.equals(s)&&s.equals(u))}},{key:"tangentAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var s=this.tAt(t,a);return this.tangentAtT(s)}},{key:"tangentAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;var s=this.tAtLength(t,a);return this.tangentAtT(s)}},{key:"tangentAtT",value:function(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);var a=this.getSkeletonPoints(t),s=a.startControlPoint2,u=a.dividerControlPoint1,l=a.divider,c=new ua(s,u);return c.translate(l.x-s.x,l.y-s.y),c}},{key:"getPrecision",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.precision==null?this.PRECISION:t.precision}},{key:"getDivisions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.subdivisions!=null)return t.subdivisions;var a=this.getPrecision(t);return this.getSubdivisions({precision:a})}},{key:"getOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getPrecision(t),s=this.getDivisions(t);return{precision:a,subdivisions:s}}},{key:"tAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return 0;if(t>=1)return 1;var s=this.getOptions(a),u=this.length(s),l=u*t;return this.tAtLength(l,s)}},{key:"tAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(a),l=this.getDivisions(a),c={precision:u,subdivisions:l},f=null,d,v,p=0,y=0,C=0,E=l.length,w=E>0?1/E:0,x=0;x<E;x+=1){var N=s?x:E-1-x,j=l[x],B=j.endpointDistance();if(t<=C+B){f=j,d=N*w,v=(N+1)*w,p=s?t-C:B+C-t,y=s?B+C-t:t-C;break}C+=B}if(f==null)return s?1:0;for(var $=this.length(c),Z=Math.pow(10,-u);;){var fe=void 0;if(fe=$!==0?p/$:0,fe<Z)return d;if(fe=$!==0?y/$:0,fe<Z)return v;var de=void 0,xe=void 0,Ae=f.divide(.5);w/=2;var Ye=Ae[0].endpointDistance(),rt=Ae[1].endpointDistance();p<=Ye?(f=Ae[0],v-=w,de=p,xe=Ye-de):(f=Ae[1],d+=w,de=p-Ye,xe=rt-de),p=de,y=xe}}},{key:"toPoints",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getDivisions(t),s=[a[0].start.clone()];return a.forEach(function(u){return s.push(u.end.clone())}),s}},{key:"toPolyline",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Cu(this.toPoints(t))}},{key:"scale",value:function(t,a,s){return this.start.scale(t,a,s),this.controlPoint1.scale(t,a,s),this.controlPoint2.scale(t,a,s),this.end.scale(t,a,s),this}},{key:"rotate",value:function(t,a){return this.start.rotate(t,a),this.controlPoint1.rotate(t,a),this.controlPoint2.rotate(t,a),this.end.rotate(t,a),this}},{key:"translate",value:function(t,a){return typeof t=="number"?(this.start.translate(t,a),this.controlPoint1.translate(t,a),this.controlPoint2.translate(t,a),this.end.translate(t,a)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}},{key:"equals",value:function(t){return t!=null&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}},{key:"clone",value:function(){return new n(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;try{if((n==null||n===o.toStringTag)&&mt.isPoint(e.start)&&mt.isPoint(e.controlPoint1)&&mt.isPoint(e.controlPoint2)&&mt.isPoint(e.end)&&typeof e.toPoints=="function"&&typeof e.toPolyline=="function")return!0}catch(t){return!1}return!1}o.isCurve=i})(Sl||(Sl={})),function(o){function i(e){var t=e.length,a=[],s=[],u=2;a[0]=e[0]/u;for(var l=1;l<t;l+=1)s[l]=1/u,u=(l<t-1?4:3.5)-s[l],a[l]=(e[l]-a[l-1])/u;for(var c=1;c<t;c+=1)a[t-c-1]-=s[t-c]*a[t-c];return a}function r(e){var t=e.map(function(y){return mt.clone(y)}),a=[],s=[],u=t.length-1;if(u===1)return a[0]=new mt((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),s[0]=new mt(2*a[0].x-t[0].x,2*a[0].y-t[0].y),[a,s];for(var l=[],c=1;c<u-1;c+=1)l[c]=4*t[c].x+2*t[c+1].x;l[0]=t[0].x+2*t[1].x,l[u-1]=(8*t[u-1].x+t[u].x)/2;for(var f=i(l),d=1;d<u-1;d+=1)l[d]=4*t[d].y+2*t[d+1].y;l[0]=t[0].y+2*t[1].y,l[u-1]=(8*t[u-1].y+t[u].y)/2;for(var v=i(l),p=0;p<u;p+=1)a.push(new mt(f[p],v[p])),p<u-1?s.push(new mt(2*t[p+1].x-f[p+1],2*t[p+1].y-v[p+1])):s.push(new mt((t[u].x+f[u-1])/2,(t[u].y+v[u-1])/2));return[a,s]}function n(e){if(e==null||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var t=r(e),a=[],s=0,u=t[0].length;s<u;s+=1){var l=new mt(t[0][s].x,t[0][s].y),c=new mt(t[1][s].x,t[1][s].y);a.push(new o(e[s],l,c,e[s+1]))}return a}o.throughPoints=n}(Sl||(Sl={}));var Jb=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.isVisible=!0,n.isSegment=!0,n.isSubpathStart=!1,n}return Object(be.a)(r,[{key:"end",get:function(){return this.endPoint}},{key:"start",get:function(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}},{key:"closestPointT",value:function(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}},{key:"lengthAtT",value:function(e,t){if(e<=0)return 0;var a=this.length();return e>=1?a:a*e}},{key:"divideAtT",value:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}},{key:"pointAtT",value:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}},{key:"tangentAtT",value:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}]),r}(uh),Af=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n,e){var t;return Object(De.a)(this,r),t=i.call(this),ua.isLine(n)?t.endPoint=n.end.clone().round(2):t.endPoint=mt.create(n,e).round(2),t}return Object(be.a)(r,[{key:"type",get:function(){return"L"}},{key:"line",get:function(){return new ua(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[new r(t[0]),new r(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[new r(t[0]),new r(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return this.previousSegment==null?!1:!this.start.equals(this.end)}},{key:"clone",value:function(){return new r(this.end)}},{key:"scale",value:function(e,t,a){return this.end.scale(e,t,a),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}}]),r}(Jb);(function(o){function i(){for(var r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];var t=n.length,a=n[0];if(ua.isLine(a))return new o(a);if(mt.isPointLike(a))return t===1?new o(a):n.map(function(f){return new o(f)});if(t===2)return new o(+n[0],+n[1]);for(var s=[],u=0;u<t;u+=2){var l=+n[u],c=+n[u+1];s.push(new o(l,c))}return s}o.create=i})(Af||(Af={}));var Qb=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"end",get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}},{key:"type",get:function(){return"Z"}},{key:"line",get:function(){return new ua(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[t[1].isDifferentiable()?new Af(t[0]):this.clone(),new Af(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new Af(t[0]):this.clone(),new Af(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}},{key:"scale",value:function(){return this}},{key:"rotate",value:function(){return this}},{key:"translate",value:function(){return this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"clone",value:function(){return new r}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return this.type}}]),r}(Jb);(function(o){function i(){return new o}o.create=i})(Qb||(Qb={}));var qb=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n,e){var t;return Object(De.a)(this,r),t=i.call(this),t.isVisible=!1,t.isSubpathStart=!0,ua.isLine(n)||Sl.isCurve(n)?t.endPoint=n.end.clone().round(2):t.endPoint=mt.create(n,e).round(2),t}return Object(be.a)(r,[{key:"start",get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}},{key:"type",get:function(){return"M"}},{key:"bbox",value:function(){return null}},{key:"closestPoint",value:function(){return this.end.clone()}},{key:"closestPointLength",value:function(){return 0}},{key:"closestPointNormalizedLength",value:function(){return 0}},{key:"closestPointT",value:function(){return 1}},{key:"closestPointTangent",value:function(){return null}},{key:"length",value:function(){return 0}},{key:"lengthAtT",value:function(){return 0}},{key:"divideAt",value:function(){return[this.clone(),this.clone()]}},{key:"divideAtLength",value:function(){return[this.clone(),this.clone()]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(){return this.end.clone()}},{key:"pointAtLength",value:function(){return this.end.clone()}},{key:"pointAtT",value:function(){return this.end.clone()}},{key:"tangentAt",value:function(){return null}},{key:"tangentAtLength",value:function(){return null}},{key:"tangentAtT",value:function(){return null}},{key:"isDifferentiable",value:function(){return!1}},{key:"scale",value:function(e,t,a){return this.end.scale(e,t,a),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"clone",value:function(){return new r(this.end)}},{key:"equals",value:function(e){return this.type===e.type&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}}]),r}(Jb);(function(o){function i(){var r=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(ua.isLine(n))return new o(n);if(Sl.isCurve(n))return new o(n);if(mt.isPointLike(n)){if(r===1)return new o(n);for(var e=[],t=0;t<r;t+=1)t===0?e.push(new o(t<0||arguments.length<=t?void 0:arguments[t])):e.push(new Af(t<0||arguments.length<=t?void 0:arguments[t]));return e}if(r===2)return new o(+(arguments.length<=0?void 0:arguments[0]),+(arguments.length<=1?void 0:arguments[1]));for(var a=[],s=0;s<r;s+=2){var u=+(s<0||arguments.length<=s?void 0:arguments[s]),l=+(s+1<0||arguments.length<=s+1?void 0:arguments[s+1]);s===0?a.push(new o(u,l)):a.push(new Af(u,l))}return a}o.create=i})(qb||(qb={}));var e1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n,e,t,a,s,u){var l;return Object(De.a)(this,r),l=i.call(this),Sl.isCurve(n)?(l.controlPoint1=n.controlPoint1.clone().round(2),l.controlPoint2=n.controlPoint2.clone().round(2),l.endPoint=n.end.clone().round(2)):typeof n=="number"?(l.controlPoint1=new mt(n,e).round(2),l.controlPoint2=new mt(t,a).round(2),l.endPoint=new mt(s,u).round(2)):(l.controlPoint1=mt.create(n).round(2),l.controlPoint2=mt.create(e).round(2),l.endPoint=mt.create(t).round(2)),l}return Object(be.a)(r,[{key:"type",get:function(){return"C"}},{key:"curve",get:function(){return new Sl(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"bbox",value:function(){return this.curve.bbox()}},{key:"closestPoint",value:function(e){return this.curve.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.curve.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.curve.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.curve.closestPointTangent(e)}},{key:"length",value:function(){return this.curve.length()}},{key:"divideAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.curve.divideAt(e,t);return[new r(a[0]),new r(a[1])]}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.curve.divideAtLength(e,t);return[new r(a[0]),new r(a[1])]}},{key:"divideAtT",value:function(e){var t=this.curve.divideAtT(e);return[new r(t[0]),new r(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.curve.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.curve.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.curve.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.curve.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,a=this.controlPoint2,s=this.end;return!(e.equals(t)&&t.equals(a)&&a.equals(s))}},{key:"scale",value:function(e,t,a){return this.controlPoint1.scale(e,t,a),this.controlPoint2.scale(e,t,a),this.end.scale(e,t,a),this}},{key:"rotate",value:function(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}},{key:"equals",value:function(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}},{key:"clone",value:function(){return new r(this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.controlPoint1,t=this.controlPoint2,a=this.end;return[this.type,e.x,e.y,t.x,t.y,a.x,a.y].join(" ")}}]),r}(Jb);(function(o){function i(){var r=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(Sl.isCurve(n))return new o(n);if(mt.isPointLike(n)){if(r===3)return new o(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);for(var e=[],t=0;t<r;t+=3)e.push(new o(t<0||arguments.length<=t?void 0:arguments[t],t+1<0||arguments.length<=t+1?void 0:arguments[t+1],t+2<0||arguments.length<=t+2?void 0:arguments[t+2]));return e}if(r===6)return new o(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]);for(var a=[],s=0;s<r;s+=6)a.push(new o(s<0||arguments.length<=s?void 0:arguments[s],s+1<0||arguments.length<=s+1?void 0:arguments[s+1],s+2<0||arguments.length<=s+2?void 0:arguments[s+2],s+3<0||arguments.length<=s+3?void 0:arguments[s+3],s+4<0||arguments.length<=s+4?void 0:arguments[s+4],s+5<0||arguments.length<=s+5?void 0:arguments[s+5]));return a}o.create=i})(e1||(e1={}));function t1(o,i,r){return{x:o*Math.cos(r)-i*Math.sin(r),y:o*Math.sin(r)+i*Math.cos(r)}}function XA(o,i,r,n,e,t){var a=1/3,s=2/3;return[a*o+s*r,a*i+s*n,a*e+s*r,a*t+s*n,e,t]}function KA(o,i,r,n,e,t,a,s,u,l){var c=Math.PI*120/180,f=Math.PI/180*(+e||0),d=[],v,p,y,C,E;if(l)p=l[0],y=l[1],C=l[2],E=l[3];else{v=t1(o,i,-f),o=v.x,i=v.y,v=t1(s,u,-f),s=v.x,u=v.y;var w=(o-s)/2,x=(i-u)/2,N=w*w/(r*r)+x*x/(n*n);N>1&&(N=Math.sqrt(N),r=N*r,n=N*n);var j=r*r,B=n*n,$=(t===a?-1:1)*Math.sqrt(Math.abs((j*B-j*x*x-B*w*w)/(j*x*x+B*w*w)));C=$*r*x/n+(o+s)/2,E=$*-n*w/r+(i+u)/2,p=Math.asin((i-E)/n),y=Math.asin((u-E)/n),p=o<C?Math.PI-p:p,y=s<C?Math.PI-y:y,p<0&&(p=Math.PI*2+p),y<0&&(y=Math.PI*2+y),a&&p>y&&(p-=Math.PI*2),!a&&y>p&&(y-=Math.PI*2)}var Z=y-p;if(Math.abs(Z)>c){var fe=y,de=s,xe=u;y=p+c*(a&&y>p?1:-1),s=C+r*Math.cos(y),u=E+n*Math.sin(y),d=KA(s,u,r,n,e,0,a,de,xe,[y,fe,C,E])}Z=y-p;var Ae=Math.cos(p),Ye=Math.sin(p),rt=Math.cos(y),je=Math.sin(y),ot=Math.tan(Z/4),Ft=4/3*(r*ot),hn=4/3*(n*ot),In=[o,i],xn=[o+Ft*Ye,i-hn*Ae],dn=[s+Ft*je,u-hn*rt],tr=[s,u];if(xn[0]=2*In[0]-xn[0],xn[1]=2*In[1]-xn[1],l)return[xn,dn,tr].concat(d);{d=[xn,dn,tr].concat(d).join().split(",");for(var Ut=[],Rn=d.length,$n=0;$n<Rn;$n+=1)Ut[$n]=$n%2?t1(+d[$n-1],+d[$n],f).y:t1(+d[$n],+d[$n+1],f).x;return Ut}}function s6(o){if(!o)return null;var i=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,r=new RegExp("([a-z])[".concat(i,",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[").concat(i,"]*,?[").concat(i,"]*)+)"),"ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[".concat(i,"]*,?[").concat(i,"]*"),"ig"),e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=[];return o.replace(r,function(a,s,u){var l=[],c=s.toLowerCase();u.replace(n,function(d,v){return v&&l.push(+v),d}),c==="m"&&l.length>2&&(t.push([s].concat(Object(Qe.a)(l.splice(0,2)))),c="l",s=s==="m"?"l":"L");for(var f=e[c];l.length>=f&&(t.push([s].concat(Object(Qe.a)(l.splice(0,f)))),!!f););return a}),t}function u6(o){var i=s6(o);if(!i||!i.length)return[["M",0,0]];for(var r=0,n=0,e=0,t=0,a=[],s=0,u=i.length;s<u;s+=1){var l=[];a.push(l);var c=i[s],f=c[0];if(f!==f.toUpperCase())switch(l[0]=f.toUpperCase(),l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+c[6]+r,l[7]=+c[7]+n;break;case"V":l[1]=+c[1]+n;break;case"H":l[1]=+c[1]+r;break;case"M":e=+c[1]+r,t=+c[2]+n;for(var d=1,v=c.length;d<v;d+=1)l[d]=+c[d]+(d%2?r:n);break;default:for(var p=1,y=c.length;p<y;p+=1)l[p]=+c[p]+(p%2?r:n);break}else for(var C=0,E=c.length;C<E;C+=1)l[C]=c[C];switch(l[0]){case"Z":r=+e,n=+t;break;case"H":r=l[1];break;case"V":n=l[1];break;case"M":e=l[l.length-2],t=l[l.length-1],r=l[l.length-2],n=l[l.length-1];break;default:r=l[l.length-2],n=l[l.length-1];break}}return a}function l6(o){var i=u6(o),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(d,v,p){var y,C;if(!d)return["C",v.x,v.y,v.x,v.y,v.x,v.y];switch(d[0]in{T:1,Q:1}||(v.qx=null,v.qy=null),d[0]){case"M":v.X=d[1],v.Y=d[2];break;case"A":return parseFloat(d[1])===0||parseFloat(d[2])===0?["L",d[6],d[7]]:["C"].concat(KA.apply(0,[v.x,v.y].concat(d.slice(1))));case"S":return p==="C"||p==="S"?(y=v.x*2-v.bx,C=v.y*2-v.by):(y=v.x,C=v.y),["C",y,C].concat(d.slice(1));case"T":return p==="Q"||p==="T"?(v.qx=v.x*2-v.qx,v.qy=v.y*2-v.qy):(v.qx=v.x,v.qy=v.y),["C"].concat(XA(v.x,v.y,v.qx,v.qy,d[1],d[2]));case"Q":return v.qx=d[1],v.qy=d[2],["C"].concat(XA(v.x,v.y,d[1],d[2],d[3],d[4]));case"H":return["L"].concat(d[1],v.y);case"V":return["L"].concat(v.x,d[1]);case"L":break;case"Z":break;default:break}return d}function e(d,v){if(d[v].length>7){d[v].shift();for(var p=d[v];p.length;)t[v]="A",v+=1,d.splice(v,0,["C"].concat(p.splice(0,6)));d.splice(v,1),s=i.length}}for(var t=[],a="",s=i.length,u=0;u<s;u+=1){var l="";i[u]&&(l=i[u][0]),l!=="C"&&(t[u]=l,u>0&&(a=t[u-1])),i[u]=n(i[u],r,a),t[u]!=="A"&&l==="C"&&(t[u]="C"),e(i,u);var c=i[u],f=c.length;r.x=c[f-2],r.y=c[f-1],r.bx=parseFloat(c[f-4])||r.x,r.by=parseFloat(c[f-3])||r.y}return(!i[0][0]||i[0][0]!=="M")&&i.unshift(["M",0,0]),i}function c6(o){return l6(o).map(function(i){return i.map(function(r){return typeof r=="string"?r:Sv(r,2)})}).join(",").split(",").join(" ")}var f6=new RegExp("^[\\s\\dLMCZz,.]*$");function d6(o){return typeof o!="string"?!1:f6.test(o)}function Gx(o,i){return(o%i+i)%i}function h6(o,i,r,n,e){var t=[],a=o[o.length-1],s=i!=null&&i>0,u=i||0;if(n&&s){o=o.slice();var l=o[0],c=new mt(a.x+(l.x-a.x)/2,a.y+(l.y-a.y)/2);o.splice(0,0,c)}var f=o[0],d=1;for(r?t.push("M",f.x,f.y):t.push("L",f.x,f.y);d<(n?o.length:o.length-1);){var v=o[Gx(d,o.length)],p=f.x-v.x,y=f.y-v.y;if(s&&(p!==0||y!==0)&&(e==null||e.indexOf(d-1)<0)){var C=Math.sqrt(p*p+y*y),E=p*Math.min(u,C/2)/C,w=y*Math.min(u,C/2)/C,x=v.x+E,N=v.y+w;t.push("L",x,N);for(var j=o[Gx(d+1,o.length)];d<o.length-2&&Math.round(j.x-v.x)===0&&Math.round(j.y-v.y)===0;)j=o[Gx(d+2,o.length)],d+=1;p=j.x-v.x,y=j.y-v.y,C=Math.max(1,Math.sqrt(p*p+y*y));var B=p*Math.min(u,C/2)/C,$=y*Math.min(u,C/2)/C,Z=v.x+B,fe=v.y+$;t.push("Q",v.x,v.y,Z,fe),v=new mt(Z,fe)}else t.push("L",v.x,v.y);f=v,d+=1}return n?t.push("Z"):t.push("L",a.x,a.y),t.map(function(de){return typeof de=="string"?de:+de.toFixed(3)}).join(" ")}function YA(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return o&&o.length&&o.forEach(function(n){Array.isArray(n)?r.push({x:n[0],y:n[1]}):r.push({x:n.x,y:n.y})}),h6(r,i.round,i.initialMove==null||i.initialMove,i.close,i.exclude)}function n1(o,i,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0;if(r===0||n===0)return[];s-=o,u-=i,r=Math.abs(r),n=Math.abs(n);var l=-s/2,c=-u/2,f=Math.cos(e*Math.PI/180),d=Math.sin(e*Math.PI/180),v=f*l+d*c,p=-1*d*l+f*c,y=v*v,C=p*p,E=r*r,w=n*n,x=y/E+C/w,N;if(x>1)r=Math.sqrt(x)*r,n=Math.sqrt(x)*n,N=0;else{var j=1;t===a&&(j=-1),N=j*Math.sqrt((E*w-E*C-w*y)/(E*C+w*y))}var B=N*r*p/n,$=-1*N*n*v/r,Z=f*B-d*$+s/2,fe=d*B+f*$+u/2,de=Math.atan2((p-$)/n,(v-B)/r)-Math.atan2(0,1),xe=de>=0?de:2*Math.PI+de;de=Math.atan2((-p-$)/n,(-v-B)/r)-Math.atan2((p-$)/n,(v-B)/r);var Ae=de>=0?de:2*Math.PI+de;a===0&&Ae>0?Ae-=2*Math.PI:a!==0&&Ae<0&&(Ae+=2*Math.PI);for(var Ye=Ae*2/Math.PI,rt=Math.ceil(Ye<0?-1*Ye:Ye),je=Ae/rt,ot=8/3*Math.sin(je/4)*Math.sin(je/4)/Math.sin(je/2),Ft=f*r,hn=f*n,In=d*r,xn=d*n,dn=Math.cos(xe),tr=Math.sin(xe),Ut=-ot*(Ft*tr+xn*dn),Rn=-ot*(In*tr-hn*dn),$n=0,qr=0,Kr=[],fa=0;fa<rt;fa+=1){xe+=je,dn=Math.cos(xe),tr=Math.sin(xe),$n=Ft*dn-xn*tr+Z,qr=In*dn+hn*tr+fe;var ba=-ot*(Ft*tr+xn*dn),qi=-ot*(In*tr-hn*dn),No=fa*6;Kr[No]=Number(Ut+o),Kr[No+1]=Number(Rn+i),Kr[No+2]=Number($n-ba+o),Kr[No+3]=Number(qr-qi+i),Kr[No+4]=Number($n+o),Kr[No+5]=Number(qr+i),Ut=$n+ba,Rn=qr+qi}return Kr.map(function(ni){return+ni.toFixed(2)})}function v6(o,i,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,l=[],c=n1(o,i,r,n,e,t,a,s,u);if(c!=null)for(var f=0,d=c.length;f<d;f+=6)l.push("C",c[f],c[f+1],c[f+2],c[f+3],c[f+4],c[f+5]);return l.join(" ")}var Wa=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(e){var t;if(Object(De.a)(this,n),t=r.call(this),t.PRECISION=3,t.segments=[],Array.isArray(e))if(ua.isLine(e[0])||Sl.isCurve(e[0])){var a=null,s=e;s.forEach(function(l,c){c===0&&t.appendSegment(n.createSegment("M",l.start)),a!=null&&!a.end.equals(l.start)&&t.appendSegment(n.createSegment("M",l.start)),ua.isLine(l)?t.appendSegment(n.createSegment("L",l.end)):Sl.isCurve(l)&&t.appendSegment(n.createSegment("C",l.controlPoint1,l.controlPoint2,l.end)),a=l})}else{var u=e;u.forEach(function(l){l.isSegment&&t.appendSegment(l)})}else e!=null&&(ua.isLine(e)?(t.appendSegment(n.createSegment("M",e.start)),t.appendSegment(n.createSegment("L",e.end))):Sl.isCurve(e)?(t.appendSegment(n.createSegment("M",e.start)),t.appendSegment(n.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):Cu.isPolyline(e)?e.points&&e.points.length&&e.points.forEach(function(l,c){var f=c===0?n.createSegment("M",l):n.createSegment("L",l);t.appendSegment(f)}):e.isSegment&&t.appendSegment(e));return t}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"start",get:function(){var t=this.segments,a=t.length;if(a===0)return null;for(var s=0;s<a;s+=1){var u=t[s];if(u.isVisible)return u.start}return t[a-1].end}},{key:"end",get:function(){var t=this.segments,a=t.length;if(a===0)return null;for(var s=a-1;s>=0;s-=1){var u=t[s];if(u.isVisible)return u.end}return t[a-1].end}},{key:"moveTo",value:function(){for(var t,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.appendSegment((t=qb.create).call.apply(t,[null].concat(s)))}},{key:"lineTo",value:function(){for(var t,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.appendSegment((t=Af.create).call.apply(t,[null].concat(s)))}},{key:"curveTo",value:function(){for(var t,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.appendSegment((t=e1.create).call.apply(t,[null].concat(s)))}},{key:"arcTo",value:function(t,a,s,u,l,c,f){var d=this.end||new mt,v=typeof c=="number"?n1(d.x,d.y,t,a,s,u,l,c,f):n1(d.x,d.y,t,a,s,u,l,c.x,c.y);if(v!=null)for(var p=0,y=v.length;p<y;p+=6)this.curveTo(v[p],v[p+1],v[p+2],v[p+3],v[p+4],v[p+5]);return this}},{key:"quadTo",value:function(t,a,s,u){var l=this.end||new mt,c=["M",l.x,l.y];if(typeof t=="number")c.push("Q",t,a,s,u);else{var f=a;c.push("Q",t.x,t.y,f.x,f.y)}var d=n.parse(c.join(" "));return this.appendSegment(d.segments.slice(1)),this}},{key:"close",value:function(){return this.appendSegment(Qb.create())}},{key:"drawPoints",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=YA(t,a),u=n.parse(s);u&&u.segments&&this.appendSegment(u.segments)}},{key:"bbox",value:function(){var t=this.segments,a=t.length;if(a===0)return null;for(var s,u=0;u<a;u+=1){var l=t[u];if(l.isVisible){var c=l.bbox();c!=null&&(s=s?s.union(c):c)}}if(s!=null)return s;var f=t[a-1];return new Sr(f.end.x,f.end.y,0,0)}},{key:"appendSegment",value:function(t){var a=this.segments.length,s=a!==0?this.segments[a-1]:null,u,l=null;if(Array.isArray(t))for(var c=0,f=t.length;c<f;c+=1){var d=t[c];u=this.prepareSegment(d,s,l),this.segments.push(u),s=u}else t!=null&&t.isSegment&&(u=this.prepareSegment(t,s,l),this.segments.push(u));return this}},{key:"insertSegment",value:function(t,a){var s=this.segments.length;if(t<0&&(t=s+t+1),t>s||t<0)throw new Error("Index out of range.");var u,l=null,c=null;if(s!==0&&(t>=1?(l=this.segments[t-1],c=l.nextSegment):(l=null,c=this.segments[0])),!Array.isArray(a))u=this.prepareSegment(a,l,c),this.segments.splice(t,0,u);else for(var f=0,d=a.length;f<d;f+=1){var v=a[f];u=this.prepareSegment(v,l,c),this.segments.splice(t+f,0,u),l=u}return this}},{key:"removeSegment",value:function(t){var a=this.fixIndex(t),s=this.segments.splice(a,1)[0],u=s.previousSegment,l=s.nextSegment;return u&&(u.nextSegment=l),l&&(l.previousSegment=u),s.isSubpathStart&&l&&this.updateSubpathStartSegment(l),s}},{key:"replaceSegment",value:function(t,a){var s=this.fixIndex(t),u,l=this.segments[s],c=l.previousSegment,f=l.nextSegment,d=l.isSubpathStart;if(!Array.isArray(a))u=this.prepareSegment(a,c,f),this.segments.splice(s,1,u),d&&u.isSubpathStart&&(d=!1);else{this.segments.splice(t,1);for(var v=0,p=a.length;v<p;v+=1){var y=a[v];u=this.prepareSegment(y,c,f),this.segments.splice(t+v,0,u),c=u,d&&u.isSubpathStart&&(d=!1)}}d&&f&&this.updateSubpathStartSegment(f)}},{key:"getSegment",value:function(t){var a=this.fixIndex(t);return this.segments[a]}},{key:"fixIndex",value:function(t){var a=this.segments.length;if(a===0)throw new Error("Path has no segments.");for(var s=t;s<0;)s=a+s;if(s>=a||s<0)throw new Error("Index out of range.");return s}},{key:"segmentAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segmentIndexAt(t,a);return s?this.getSegment(s):null}},{key:"segmentAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segmentIndexAtLength(t,a);return s?this.getSegment(s):null}},{key:"segmentIndexAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=Xg(t,0,1),u=this.getOptions(a),l=this.length(u),c=l*s;return this.segmentIndexAtLength(c,u)}},{key:"segmentIndexAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segments.length;if(s===0)return null;var u=!0;t<0&&(u=!1,t=-t);for(var l=this.getPrecision(a),c=this.getSubdivisions(a),f=0,d=null,v=0;v<s;v+=1){var p=u?v:s-1-v,y=this.segments[p],C=c[p],E=y.length({precision:l,subdivisions:C});if(y.isVisible){if(t<=f+E)return p;d=p}f+=E}return d}},{key:"getSegmentSubdivisions",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getPrecision(t),s=[],u=0,l=this.segments.length;u<l;u+=1){var c=this.segments[u],f=c.getSubdivisions({precision:a});s.push(f)}return s}},{key:"updateSubpathStartSegment",value:function(t){for(var a=t.previousSegment,s=t;s&&!s.isSubpathStart;)a!=null?s.subpathStartSegment=a.subpathStartSegment:s.subpathStartSegment=null,a=s,s=s.nextSegment}},{key:"prepareSegment",value:function(t,a,s){t.previousSegment=a,t.nextSegment=s,a!=null&&(a.nextSegment=t),s!=null&&(s.previousSegment=t);var u=t;return t.isSubpathStart&&(t.subpathStartSegment=t,u=s),u!=null&&this.updateSubpathStartSegment(u),t}},{key:"closestPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.closestPointT(t,a);return s?this.pointAtT(s):null}},{key:"closestPointLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(a),u=this.closestPointT(t,s);return u?this.lengthAtT(u,s):0}},{key:"closestPointNormalizedLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(a),u=this.closestPointLength(t,s);if(u===0)return 0;var l=this.length(s);return l===0?0:u/l}},{key:"closestPointT",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var s=this.getPrecision(a),u=this.getSubdivisions(a),l,c=Infinity,f=0,d=this.segments.length;f<d;f+=1){var v=this.segments[f],p=u[f];if(v.isVisible){var y=v.closestPointT(t,{precision:s,subdivisions:p}),C=v.pointAtT(y),E=$A(C,t);E<c&&(l={segmentIndex:f,value:y},c=E)}}return l||{segmentIndex:this.segments.length-1,value:1}}},{key:"closestPointTangent",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var s=this.getPrecision(a),u=this.getSubdivisions(a),l,c=Infinity,f=0,d=this.segments.length;f<d;f+=1){var v=this.segments[f],p=u[f];if(v.isDifferentiable()){var y=v.closestPointT(t,{precision:s,subdivisions:p}),C=v.pointAtT(y),E=$A(C,t);E<c&&(l=v.tangentAtT(y),c=E)}}return l||null}},{key:"containsPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.toPolylines(a);if(!s)return!1;for(var u=0,l=0,c=s.length;l<c;l+=1){var f=s[l];f.containsPoint(t)&&(u+=1)}return u%2==1}},{key:"pointAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var s=this.getOptions(a),u=this.length(s),l=u*t;return this.pointAtLength(l,s)}},{key:"pointAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(t===0)return this.start.clone();var s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(a),l=this.getSubdivisions(a),c,f=0,d=0,v=this.segments.length;d<v;d+=1){var p=s?d:v-1-d,y=this.segments[p],C=l[p],E=y.length({precision:u,subdivisions:C});if(y.isVisible){if(t<=f+E)return y.pointAtLength((s?1:-1)*(t-f),{precision:u,subdivisions:C});c=y}f+=E}if(c)return s?c.end:c.start;var w=this.segments[this.segments.length-1];return w.end.clone()}},{key:"pointAtT",value:function(t){var a=this.segments,s=a.length;if(s===0)return null;var u=t.segmentIndex;if(u<0)return a[0].pointAtT(0);if(u>=s)return a[s-1].pointAtT(1);var l=Xg(t.value,0,1);return a[u].pointAtT(l)}},{key:"divideAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=Xg(t,0,1),u=this.getOptions(a),l=this.length(u),c=l*s;return this.divideAtLength(c,u)}},{key:"divideAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(a),l=this.getSubdivisions(a),c=0,f,d,v,p,y,C=0,E=this.segments.length;C<E;C+=1){var w=s?C:E-1-C,x=this.getSegment(w),N=l[w],j={precision:u,subdivisions:N},B=x.length(j);if(x.isDifferentiable()&&(v=x,p=w,t<=c+B)){d=w,f=x.divideAtLength((s?1:-1)*(t-c),j);break}c+=B}if(!v)return null;f||(d=p,y=s?1:0,f=v.divideAtT(y));var $=this.clone(),Z=d;$.replaceSegment(Z,f);var fe=Z,de=Z+1,xe=Z+2;f[0].isDifferentiable()||($.removeSegment(fe),de-=1,xe-=1);var Ae=$.getSegment(de).start;$.insertSegment(de,n.createSegment("M",Ae)),xe+=1,f[1].isDifferentiable()||($.removeSegment(xe-1),xe-=1);for(var Ye=xe-fe-1,rt=xe,je=$.segments.length;rt<je;rt+=1){var ot=this.getSegment(rt-Ye),Ft=$.getSegment(rt);if(Ft.type==="Z"&&!ot.subpathStartSegment.end.equals(Ft.subpathStartSegment.end)){var hn=n.createSegment("L",ot.end);$.replaceSegment(rt,hn)}}var In=new n($.segments.slice(0,de)),xn=new n($.segments.slice(de));return[In,xn]}},{key:"intersectsWithLine",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.toPolylines(a);if(s==null)return null;for(var u=null,l=0,c=s.length;l<c;l+=1){var f=s[l],d=t.intersect(f);if(d)if(u==null&&(u=[]),Array.isArray(d)){var v;(v=u).push.apply(v,Object(Qe.a)(d))}else u.push(d)}return u}},{key:"isDifferentiable",value:function(){for(var t=0,a=this.segments.length;t<a;t+=1){var s=this.segments[t];if(s.isDifferentiable())return!0}return!1}},{key:"isValid",value:function(){var t=this.segments,a=t.length===0||t[0].type==="M";return a}},{key:"length",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.segments.length===0)return 0;for(var a=this.getSubdivisions(t),s=0,u=0,l=this.segments.length;u<l;u+=1){var c=this.segments[u],f=a[u];s+=c.length({subdivisions:f})}return s}},{key:"lengthAtT",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segments.length;if(s===0)return 0;var u=t.segmentIndex;if(u<0)return 0;var l=Xg(t.value,0,1);u>=s&&(u=s-1,l=1);for(var c=this.getPrecision(a),f=this.getSubdivisions(a),d=0,v=0;v<u;v+=1){var p=this.segments[v],y=f[v];d+=p.length({precision:c,subdivisions:y})}var C=this.segments[u],E=f[u];return d+=C.lengthAtT(l,{precision:c,subdivisions:E}),d}},{key:"tangentAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=Xg(t,0,1),u=this.getOptions(a),l=this.length(u),c=l*s;return this.tangentAtLength(c,u)}},{key:"tangentAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(a),l=this.getSubdivisions(a),c,f=0,d=0,v=this.segments.length;d<v;d+=1){var p=s?d:v-1-d,y=this.segments[p],C=l[p],E=y.length({precision:u,subdivisions:C});if(y.isDifferentiable()){if(t<=f+E)return y.tangentAtLength((s?1:-1)*(t-f),{precision:u,subdivisions:C});c=y}f+=E}if(c){var w=s?1:0;return c.tangentAtT(w)}return null}},{key:"tangentAtT",value:function(t){var a=this.segments.length;if(a===0)return null;var s=t.segmentIndex;if(s<0)return this.segments[0].tangentAtT(0);if(s>=a)return this.segments[a-1].tangentAtT(1);var u=Xg(t.value,0,1);return this.segments[s].tangentAtT(u)}},{key:"getPrecision",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.precision==null?this.PRECISION:t.precision}},{key:"getSubdivisions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.segmentSubdivisions==null){var a=this.getPrecision(t);return this.getSegmentSubdivisions({precision:a})}return t.segmentSubdivisions}},{key:"getOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getPrecision(t),s=this.getSubdivisions(t);return{precision:a,segmentSubdivisions:s}}},{key:"toPoints",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.segments,s=a.length;if(s===0)return null;for(var u=this.getSubdivisions(t),l=[],c=[],f=0;f<s;f+=1){var d=a[f];if(d.isVisible){var v=u[f];v.length>0?v.forEach(function(p){return c.push(p.start)}):c.push(d.start)}else c.length>0&&(c.push(a[f-1].end),l.push(c),c=[])}return c.length>0&&(c.push(this.end),l.push(c)),l}},{key:"toPolylines",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.toPoints(t);return a?a.map(function(s){return new Cu(s)}):null}},{key:"scale",value:function(t,a,s){return this.segments.forEach(function(u){return u.scale(t,a,s)}),this}},{key:"rotate",value:function(t,a){return this.segments.forEach(function(s){return s.rotate(t,a)}),this}},{key:"translate",value:function(t,a){return typeof t=="number"?this.segments.forEach(function(s){return s.translate(t,a)}):this.segments.forEach(function(s){return s.translate(t)}),this}},{key:"clone",value:function(){var t=new n;return this.segments.forEach(function(a){return t.appendSegment(a.clone())}),t}},{key:"equals",value:function(t){if(t==null)return!1;var a=this.segments,s=t.segments,u=a.length;if(s.length!==u)return!1;for(var l=0;l<u;l+=1){var c=a[l],f=s[l];if(c.type!==f.type||!c.equals(f))return!1}return!0}},{key:"toJSON",value:function(){return this.segments.map(function(t){return t.toJSON()})}},{key:"serialize",value:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(function(t){return t.serialize()}).join(" ")}},{key:"toString",value:function(){return this.serialize()}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return!!((n==null||n===o.toStringTag)&&Array.isArray(e.segments)&&typeof e.moveTo=="function"&&typeof e.lineTo=="function"&&typeof e.curveTo=="function")}o.isPath=i})(Wa||(Wa={})),function(o){function i(n){if(!n)return new o;var e=new o,t=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,a=o.normalize(n).match(t);if(a!=null)for(var s=0,u=a.length;s<u;s+=1){var l=a[s],c=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,f=l.match(c);if(f!=null){var d=f[0],v=f.slice(1).map(function(y){return+y}),p=r.call.apply(r,[null,d].concat(Object(Qe.a)(v)));e.appendSegment(p)}}return e}o.parse=i;function r(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];if(n==="M"){var s;return(s=qb.create).call.apply(s,[null].concat(t))}if(n==="L"){var u;return(u=Af.create).call.apply(u,[null].concat(t))}if(n==="C"){var l;return(l=e1.create).call.apply(l,[null].concat(t))}if(n==="z"||n==="Z")return Qb.create();throw new Error('Invalid path segment type "'.concat(n,'"'))}o.createSegment=r}(Wa||(Wa={})),function(o){o.normalize=c6,o.isValid=d6,o.drawArc=v6,o.drawPoints=YA,o.arcToCurves=n1}(Wa||(Wa={}));var ja=function(o){function i(r,n,e){if(Object(De.a)(this,i),!r)throw new TypeError("Invalid element to create vector");var t;if(i.isVector(r))t=r.node;else if(typeof r=="string")if(r.toLowerCase()==="svg")t=Wb();else if(r[0]==="<"){var a=Wb(r);t=document.importNode(a.firstChild,!0)}else t=document.createElementNS(Tf.svg,r);else t=r;this.node=t,n&&this.setAttributes(n),e&&this.append(e)}return Object(be.a)(i,[{key:o,get:function(){return i.toStringTag}},{key:"type",get:function(){return this.node.nodeName}},{key:"id",get:function(){return this.node.id}},{key:"id",set:function(n){this.node.id=n}},{key:"transform",value:function(n,e){return n==null?Kx(this.node):(Kx(this.node,n,e),this)}},{key:"translate",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n==null?Yx(this.node):(Yx(this.node,n,e,t),this)}},{key:"rotate",value:function(n,e,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n==null?Zx(this.node):(Zx(this.node,n,e,t,a),this)}},{key:"scale",value:function(n,e){return n==null?l1(this.node):(l1(this.node,n,e),this)}},{key:"getTransformToElement",value:function(n){var e=i.toNode(n);return fh(this.node,e)}},{key:"removeAttribute",value:function(n){return Ix(this.node,n),this}},{key:"getAttribute",value:function(n){return BA(this.node,n)}},{key:"setAttribute",value:function(n,e){return Kb(this.node,n,e),this}},{key:"setAttributes",value:function(n){return Rx(this.node,n),this}},{key:"attr",value:function(n,e){return n==null?eu(this.node):typeof n=="string"&&e===void 0?eu(this.node,n):(typeof n=="object"?eu(this.node,n):eu(this.node,n,e),this)}},{key:"svg",value:function(){return this.node instanceof SVGSVGElement?this:i.create(this.node.ownerSVGElement)}},{key:"defs",value:function(){var n=this.svg()||this,e=n.node.getElementsByTagName("defs")[0];return e?i.create(e):i.create("defs").appendTo(n)}},{key:"text",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return JA(this.node,n,e),this}},{key:"tagName",value:function(){return $b(this.node)}},{key:"clone",value:function(){return i.create(this.node.cloneNode(!0))}},{key:"remove",value:function(){return Xb(this.node),this}},{key:"empty",value:function(){return Ax(this.node),this}},{key:"append",value:function(n){return Px(this.node,i.toNodes(n)),this}},{key:"appendTo",value:function(n){return LA(this.node,i.isVector(n)?n.node:n),this}},{key:"prepend",value:function(n){return jA(this.node,i.toNodes(n)),this}},{key:"before",value:function(n){return kx(this.node,i.toNodes(n)),this}},{key:"replace",value:function(n){return this.node.parentNode&&this.node.parentNode.replaceChild(i.toNode(n),this.node),i.create(n)}},{key:"first",value:function(){return this.node.firstChild?i.create(this.node.firstChild):null}},{key:"last",value:function(){return this.node.lastChild?i.create(this.node.lastChild):null}},{key:"get",value:function(n){var e=this.node.childNodes[n];return e?i.create(e):null}},{key:"indexOf",value:function(n){var e=Array.prototype.slice.call(this.node.childNodes);return e.indexOf(i.toNode(n))}},{key:"find",value:function(n){var e=[],t=DA(this.node,n);if(t)for(var a=0,s=t.length;a<s;a+=1)e.push(i.create(t[a]));return e}},{key:"findOne",value:function(n){var e=IA(this.node,n);return e?i.create(e):null}},{key:"findParentByClass",value:function(n,e){var t=RA(this.node,n,e);return t?i.create(t):null}},{key:"matches",value:function(n){var e=this.node,t=this.node.matches,a=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return a&&a.call(e,n)}},{key:"contains",value:function(n){return NA(this.node,i.isVector(n)?n.node:n)}},{key:"wrap",value:function(n){var e=i.create(n),t=this.node.parentNode;return t!=null&&t.insertBefore(e.node,this.node),e.append(this)}},{key:"parent",value:function(n){var e=this;if(e.node.parentNode==null)return null;if(e=i.create(e.node.parentNode),n==null)return e;do if(typeof n=="string"?e.matches(n):e instanceof n)return e;while(e=i.create(e.node.parentNode));return e}},{key:"children",value:function(){for(var n=this.node.childNodes,e=[],t=0;t<n.length;t+=1){var a=n[t];a.nodeType===1&&e.push(i.create(n[t]))}return e}},{key:"eachChild",value:function(n,e){for(var t=this.children(),a=0,s=t.length;a<s;a+=1)n.call(t[a],t[a],a,t),e&&t[a].eachChild(n,e);return this}},{key:"index",value:function(){return kA(this.node)}},{key:"hasClass",value:function(n){return Hb(this.node,n)}},{key:"addClass",value:function(n){return Km(this.node,n),this}},{key:"removeClass",value:function(n){return Ym(this.node,n),this}},{key:"toggleClass",value:function(n,e){return Tx(this.node,n,e),this}},{key:"toLocalPoint",value:function(n,e){return uP(this.node,n,e)}},{key:"toGeometryShape",value:function(){return lP(this.node)}},{key:"translateCenterToPoint",value:function(n){var e=this.getBBox({target:this.svg()}),t=e.getCenter();return this.translate(n.x-t.x,n.y-t.y),this}},{key:"translateAndAutoOrient",value:function(n,e,t){return pP(this.node,n,e,t),this}},{key:"animate",value:function(n){return cP(this.node,n)}},{key:"animateTransform",value:function(n){return fP(this.node,n)}},{key:"animateAlongPath",value:function(n,e){return vP(this.node,n,e)}},{key:"normalizePath",value:function(){var n=this.tagName();return n==="path"&&this.attr("d",Wa.normalize(this.attr("d"))),this}},{key:"bbox",value:function(n,e){return sP(this.node,n,e)}},{key:"getBBox",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ch(this.node,{recursive:n.recursive,target:n.target?i.toNode(n.target):null})}},{key:"sample",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.node instanceof SVGPathElement?zx(this.node,n):[]}},{key:"toPath",value:function(){return i.create(Ux(this.node))}},{key:"toPathData",value:function(){return Vx(this.node)}}]),i}(Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(a){if(a==null)return!1;if(a instanceof o)return!0;var s=a[Symbol.toStringTag],u=a;return(s==null||s===o.toStringTag)&&u.node instanceof SVGElement&&typeof u.animate=="function"&&typeof u.sample=="function"&&typeof u.normalizePath=="function"&&typeof u.toPath=="function"}o.isVector=i;function r(a,s,u){return new o(a,s,u)}o.create=r;function n(a){if(a[0]==="<"){for(var s=Wb(a),u=[],l=0,c=s.childNodes.length;l<c;l+=1){var f=s.childNodes[l];u.push(r(document.importNode(f,!0)))}return u}return[r(a)]}o.createVectors=n;function e(a){return i(a)?a.node:a}o.toNode=e;function t(a){return Array.isArray(a)?a.map(function(s){return e(s)}):[e(a)]}o.toNodes=t})(ja||(ja={}));function g6(o,i){var r=ja.create(i),n=ja.create("textPath"),e=o.d;if(e&&o["xlink:href"]===void 0){var t=ja.create("path").attr("d",e).appendTo(r.defs());n.attr("xlink:href","#".concat(t.id))}return typeof o=="object"&&n.attr(o),n.node}function p6(o,i,r){for(var n=r.eol,e=r.baseSize,t=r.lineHeight,a=0,s,u={},l=i.length-1,c=0;c<=l;c+=1){var f=i[c],d=null;if(typeof f=="object"){var v=f.attrs,p=ja.create("tspan",v);s=p.node;var y=f.t;n&&c===l&&(y+=n),s.textContent=y;var C=v.class;C&&p.addClass(C),r.includeAnnotationIndices&&p.attr("annotations",f.annotations.join(",")),d=parseFloat(v["font-size"]),d===void 0&&(d=e),d&&d>a&&(a=d)}else n&&c===l&&(f+=n),s=document.createTextNode(f||" "),e&&e>a&&(a=e);o.appendChild(s)}return a&&(u.maxFontSize=a),t?u.lineHeight=t:a&&(u.lineHeight=a*1.2),u}var ZA=/em$/;function r1(o,i){var r=parseFloat(o);return ZA.test(o)?r*i:r}function m6(o,i,r,n){if(!Array.isArray(i))return 0;var e=i.length;if(!e)return 0;for(var t=i[0],a=r1(t.maxFontSize,r)||r,s=0,u=r1(n,r),l=1;l<e;l+=1){t=i[l];var c=r1(t.lineHeight,r)||u;s+=c}var f=r1(t.maxFontSize,r)||r,d;switch(o){case"middle":d=a/2-.15*f-s/2;break;case"bottom":d=-(.25*f)-s;break;default:case"top":d=.8*a;break}return d}function JA(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i=G.sanitize(i);var n=r.eol,e=r.textPath,t=r.textVerticalAnchor,a=t==="middle"||t==="bottom"||t==="top",s=r.x;s===void 0&&(s=o.getAttribute("x")||0);var u=r.includeAnnotationIndices,l=r.annotations;l&&!Array.isArray(l)&&(l=[l]);var c=r.lineHeight,f=c==="auto",d=f?"1.5em":c||"1em";Ax(o),eu(o,{"xml:space":"preserve",display:i||r.displayEmpty?null:"none"});var v=eu(o,"font-size"),p=parseFloat(v);p||(p=16,(a||l)&&!v&&eu(o,"font-size","".concat(p)));var y;e?(typeof e=="string"&&(e={d:e}),y=g6(e,o)):y=document.createDocumentFragment();for(var C,E=0,w,x=i.split(`
`),N=[],j=x.length-1,B=0;B<=j;B+=1){C=d;var $="v-line",Z=Mf("tspan"),fe=void 0,de=x[B];if(de)if(l){var xe=G.annotate(de,l,{offset:-E,includeAnnotationIndices:u});fe=p6(Z,xe,{eol:B!==j&&n,baseSize:p,lineHeight:f?null:d,includeAnnotationIndices:u});var Ae=fe.lineHeight;Ae&&f&&B!==0&&(C=Ae),B===0&&(w=fe.maxFontSize*.8)}else n&&B!==j&&(de+=n),Z.textContent=de;else{Z.textContent="-",$+=" v-empty-line";var Ye=Z.style;Ye.fillOpacity=0,Ye.strokeOpacity=0,l&&(fe={})}fe&&N.push(fe),B>0&&Z.setAttribute("dy",C),(B>0||e)&&Z.setAttribute("x",s),Z.className.baseVal=$,y.appendChild(Z),E+=de.length+1}if(a)if(l)C=m6(t,N,p,d);else if(t==="top")C="0.8em";else{var rt;switch(j>0?(rt=parseFloat(d)||1,rt*=j,ZA.test(d)||(rt/=p)):rt=0,t){case"middle":C="".concat(.3-rt/2,"em");break;case"bottom":C="".concat(-rt-.3,"em");break;default:break}}else t===0?C="0em":t?C=t:(C=0,o.getAttribute("y")==null&&o.setAttribute("y","".concat(w||"0.8em")));var je=y.firstChild;je.setAttribute("dy",C),o.appendChild(y)}function y6(o,i,r,n){var e=[],t=[];if(i!=null){var a=o.split(i);if(e.push.apply(e,Object(Qe.a)(a)),typeof i=="string")for(var s=0,u=a.length-1;s<u;s+=1)t.push(i);else for(var l=o.match(new RegExp(i,"g")),c=0,f=a.length-1;c<f;c+=1)t.push(l?l[c]:"")}else{for(var d="",v=0,p=o.length;v<p;v+=1){var y=o[v];y===" "?(e.push(d),t.push(" "),d=""):y.match(/[^\x00-\xff]/)?(d.length&&(e.push(d),t.push("")),e.push(y),t.push(""),d=""):d+=y}d.length&&e.push(d)}for(var C=0;C<e.length;C+=1){var E=e[C];if(E.indexOf(r)>=0&&E.length>1){for(var w=E.split(r),x=0,N=w.length-1;x<N;x+=1)w.splice(2*x+1,0,r);var j=w.filter(function(de){return de!==""});e.splice.apply(e,[C,1].concat(Object(Qe.a)(j)));var B=j.map(function(){return""});B.pop(),t.splice.apply(t,[C,0].concat(Object(Qe.a)(B)))}}for(var $=0;$<e.length;$+=1){var Z=e[$],fe=Z.search(n);fe>0&&fe<Z.length-1&&(e.splice($,1,Z.substring(0,fe+1),Z.substring(fe+1)),t.splice($,0,""))}return{words:e,separators:t}}function b6(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=i.width,t=i.height,a=n.svgDocument||Mf("svg"),s=Mf("text"),u=Mf("tspan"),l=document.createTextNode("");eu(s,r),s.appendChild(u),s.style.opacity="0",s.style.display="block",u.style.display="block",u.appendChild(l),a.appendChild(s);var c=a.parentNode==null;c&&document.body.appendChild(a);for(var f=n.eol||`
`,d=n.separator||" ",v=n.hyphen?new RegExp(n.hyphen):/[^\w\d]/,p=n.breakWord!==!1,y=[],C={},E=[],w,x,N,j=y6(o,n.separator,f,v),B=j.words,$=j.separators,Z=0,fe=0,de=B.length;Z<de;Z+=1){var xe=B[Z];if(!!xe){if(xe===f){y[fe]=!0,fe+=1,E[fe]="";continue}if(E[fe]!=null?(N=$[Z-1]||"",l.data="".concat(E[fe]).concat(N).concat(xe)):l.data=xe,u.getComputedTextLength()<=e)E[fe]=l.data,C[fe]=$[Z],w&&(y[fe]=!0,fe+=1,w=0);else{if(p){if(!E[fe]||w){var Ae=!!w,Ye=xe.length===1;if(w=xe.length-1,Ae||Ye){if(Ye){if(!E[fe]){E=[];break}B.splice(Z,2,xe+B[Z+1]),$.splice(Z+1,1),y[fe]=!0,fe+=1,de-=1,Z-=1;continue}B[Z]=xe.substring(0,w),B[Z+1]=xe.substring(w)+B[Z+1]}else B.splice(Z,1,xe.substring(0,w),xe.substring(w)),$.splice(Z,0,""),de+=1,fe&&!y[fe-1]&&(fe-=1);Z-=1;continue}}else if(!E[fe]){E[fe]=xe,y[fe]=!0,fe+=1;continue}fe+=1,Z-=1}if(t!=null){if(x==null){var rt=void 0;r.lineHeight==="auto"?rt={value:1.5,unit:"em"}:rt=M.parseCssNumeric(r.lineHeight,["em"])||{value:1,unit:"em"},x=rt.value,rt.unit==="em"&&(ra.IS_FIREFOX?x*=u.getBBox().height:x*=s.getBBox().height)}if(x*E.length>t){var je=Math.floor(t/x)-1,ot=E[je],Ft=E[je+1];if(E.splice(je+1),ot==null)break;var hn=n.ellipsis;if(!hn)break;typeof hn!="string"&&(hn="\u2026");var In=ot;Ft&&p&&(In+=N+Ft);var xn=In.length,dn=void 0,tr=void 0;do{if(tr=In[xn],dn=In.substring(0,xn),tr?tr.match(d)&&(dn+=tr):dn+=C[je],dn+=hn,l.data=dn,u.getComputedTextLength()<=e){E[je]=dn;break}xn-=1}while(xn>=0);break}}}}return Xb(c?a:s),E.join(f)}var a1=.551784;function tu(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN,n=o.getAttribute(i);if(n==null)return r;var e=parseFloat(n);return Number.isNaN(e)?r:e}function zx(o){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=o.getTotalLength(),n=[],e=0,t;e<r;)t=o.getPointAtLength(e),n.push({distance:e,x:t.x,y:t.y}),e+=i;return n}function QA(o){return["M",tu(o,"x1"),tu(o,"y1"),"L",tu(o,"x2"),tu(o,"y2")].join(" ")}function qA(o){var i=Jm(o);return i.length===0?null:"".concat(tP(i)," Z")}function eP(o){var i=Jm(o);return i.length===0?null:tP(i)}function tP(o){var i=o.map(function(r){return"".concat(r.x," ").concat(r.y)});return"M ".concat(i.join(" L"))}function Jm(o){var i=[],r=o.points;if(r)for(var n=0,e=r.numberOfItems;n<e;n+=1)i.push(r.getItem(n));return i}function nP(o){var i=tu(o,"cx",0),r=tu(o,"cy",0),n=tu(o,"r"),e=n*a1;return["M",i,r-n,"C",i+e,r-n,i+n,r-e,i+n,r,"C",i+n,r+e,i+e,r+n,i,r+n,"C",i-e,r+n,i-n,r+e,i-n,r,"C",i-n,r-e,i-e,r-n,i,r-n,"Z"].join(" ")}function rP(o){var i=tu(o,"cx",0),r=tu(o,"cy",0),n=tu(o,"rx"),e=tu(o,"ry")||n,t=n*a1,a=e*a1,s=["M",i,r-e,"C",i+t,r-e,i+n,r-a,i+n,r,"C",i+n,r+a,i+t,r+e,i,r+e,"C",i-t,r+e,i-n,r+a,i-n,r,"C",i-n,r-a,i-t,r-e,i,r-e,"Z"].join(" ");return s}function aP(o){return iP({x:tu(o,"x",0),y:tu(o,"y",0),width:tu(o,"width",0),height:tu(o,"height",0),rx:tu(o,"rx",0),ry:tu(o,"ry",0)})}function iP(o){var i,r=o.x,n=o.y,e=o.width,t=o.height,a=Math.min(o.rx||o["top-rx"]||0,e/2),s=Math.min(o.rx||o["bottom-rx"]||0,e/2),u=Math.min(o.ry||o["top-ry"]||0,t/2),l=Math.min(o.ry||o["bottom-ry"]||0,t/2);return a||s||u||l?i=["M",r,n+u,"v",t-u-l,"a",s,l,0,0,0,s,l,"h",e-2*s,"a",s,l,0,0,0,s,-l,"v",-(t-l-u),"a",a,u,0,0,0,-a,-u,"h",-(e-2*a),"a",a,u,0,0,0,-a,u,"Z"]:i=["M",r,n,"H",r+e,"V",n+t,"H",r,"V",n,"Z"],i.join(" ")}function Ux(o){var i=Mf("path");eu(i,eu(o));var r=Vx(o);return r&&i.setAttribute("d",r),i}function Vx(o){var i=o.tagName.toLowerCase();switch(i){case"path":return o.getAttribute("d");case"line":return QA(o);case"polygon":return qA(o);case"polyline":return eP(o);case"ellipse":return rP(o);case"circle":return nP(o);case"rect":return aP(o);default:break}throw new Error('"'.concat(i,'" cannot be converted to svg path element.'))}function C6(o,i,r,n){var e=2*Math.PI-1e-6,t=o,a=i,s=r,u=n;if(u<s){var l=s;s=u,u=l}var c=u-s,f=c<Math.PI?"0":"1",d=Math.cos(s),v=Math.sin(s),p=Math.cos(u),y=Math.sin(u);return c>=e?t?"M0,".concat(a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(-a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(a,"M0,").concat(t,"A").concat(t,",").concat(t," 0 1,0 0,").concat(-t,"A").concat(t,",").concat(t," 0 1,0 0,").concat(t,"Z"):"M0,".concat(a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(-a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(a,"Z"):t?"M".concat(a*d,",").concat(a*v,"A").concat(a,",").concat(a," 0 ").concat(f,",1 ").concat(a*p,",").concat(a*y,"L").concat(t*p,",").concat(t*y,"A").concat(t,",").concat(t," 0 ").concat(f,",0 ").concat(t*d,",").concat(t*v,"Z"):"M".concat(a*d,",").concat(a*v,"A").concat(a,",").concat(a," 0 ").concat(f,",1 ").concat(a*p,",").concat(a*y,"L0,0")+"Z"}var Qm=Mf("svg"),E6=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,oP=/[ ,]+/,O6=/^(\w+)\((.*)\)/;function Hx(o,i){var r=Qm.createSVGPoint();return r.x=o,r.y=i,r}function Kg(o){var i=Qm.createSVGMatrix();if(o!=null){var r=o,n=i;for(var e in r)n[e]=r[e]}return i}function Yg(o){return o!=null?(o instanceof DOMMatrix||(o=Kg(o)),Qm.createSVGTransformFromMatrix(o)):Qm.createSVGTransform()}function i1(o){var i=Kg(),r=o!=null&&o.match(E6);if(!r)return i;for(var n=0,e=r.length;n<e;n+=1){var t=r[n],a=t.match(O6);if(a){var s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,d=Kg(),v=a[2].split(oP);switch(a[1].toLowerCase()){case"scale":s=parseFloat(v[0]),u=v[1]===void 0?s:parseFloat(v[1]),d=d.scaleNonUniform(s,u);break;case"translate":l=parseFloat(v[0]),c=parseFloat(v[1]),d=d.translate(l,c);break;case"rotate":f=parseFloat(v[0]),l=parseFloat(v[1])||0,c=parseFloat(v[2])||0,l!==0||c!==0?d=d.translate(l,c).rotate(f).translate(-l,-c):d=d.rotate(f);break;case"skewx":f=parseFloat(v[0]),d=d.skewX(f);break;case"skewy":f=parseFloat(v[0]),d=d.skewY(f);break;case"matrix":d.a=parseFloat(v[0]),d.b=parseFloat(v[1]),d.c=parseFloat(v[2]),d.d=parseFloat(v[3]),d.e=parseFloat(v[4]),d.f=parseFloat(v[5]);break;default:continue}i=i.multiply(d)}}return i}function Wx(o){var i=o||{},r=i.a!=null?i.a:1,n=i.b!=null?i.b:0,e=i.c!=null?i.c:0,t=i.d!=null?i.d:1,a=i.e!=null?i.e:0,s=i.f!=null?i.f:0;return"matrix(".concat(r,",").concat(n,",").concat(e,",").concat(t,",").concat(a,",").concat(s,")")}function o1(o){var i,r,n;if(o){var e=oP;if(o.trim().indexOf("matrix")>=0){var t=i1(o),a=Xx(t);i=[a.translateX,a.translateY],r=[a.rotation],n=[a.scaleX,a.scaleY];var s=[];(i[0]!==0||i[1]!==0)&&s.push("translate(".concat(i.join(","),")")),(n[0]!==1||n[1]!==1)&&s.push("scale(".concat(n.join(","),")")),r[0]!==0&&s.push("rotate(".concat(r[0],")")),o=s.join(" ")}else{var u=o.match(/translate\((.*?)\)/);u&&(i=u[1].split(e));var l=o.match(/rotate\((.*?)\)/);l&&(r=l[1].split(e));var c=o.match(/scale\((.*?)\)/);c&&(n=c[1].split(e))}}var f=n&&n[0]?parseFloat(n[0]):1;return{raw:o||"",translation:{tx:i&&i[0]?parseInt(i[0],10):0,ty:i&&i[1]?parseInt(i[1],10):0},rotation:{angle:r&&r[0]?parseInt(r[0],10):0,cx:r&&r[1]?parseInt(r[1],10):void 0,cy:r&&r[2]?parseInt(r[2],10):void 0},scale:{sx:f,sy:n&&n[1]?parseFloat(n[1]):f}}}function $x(o,i){var r=i.x*o.a+i.y*o.c+0,n=i.x*o.b+i.y*o.d+0;return{x:r,y:n}}function Xx(o){var i=$x(o,{x:0,y:1}),r=$x(o,{x:1,y:0}),n=180/Math.PI*Math.atan2(i.y,i.x)-90,e=180/Math.PI*Math.atan2(r.y,r.x);return{skewX:n,skewY:e,translateX:o.e,translateY:o.f,scaleX:Math.sqrt(o.a*o.a+o.b*o.b),scaleY:Math.sqrt(o.c*o.c+o.d*o.d),rotation:n}}function w6(o){var i,r,n,e;return o?(i=o.a==null?1:o.a,e=o.d==null?1:o.d,r=o.b,n=o.c):i=e=1,{sx:r?Math.sqrt(i*i+r*r):i,sy:n?Math.sqrt(n*n+e*e):e}}function x6(o){var i={x:0,y:1};return o&&(i=$x(o,i)),{angle:ti.normalize(ti.toDeg(Math.atan2(i.y,i.x))-90)}}function S6(o){return{tx:o&&o.e||0,ty:o&&o.f||0}}function s1(o,i){var r=Hx(o.x,o.y).matrixTransform(i);return new mt(r.x,r.y)}function T6(o,i){return new ua(s1(o.start,i),s1(o.end,i))}function M6(o,i){var r=o instanceof Cu?o.points:o;return Array.isArray(r)||(r=[]),new Cu(r.map(function(n){return s1(n,i)}))}function u1(o,i){var r=Qm.createSVGPoint();r.x=o.x,r.y=o.y;var n=r.matrixTransform(i);r.x=o.x+o.width,r.y=o.y;var e=r.matrixTransform(i);r.x=o.x+o.width,r.y=o.y+o.height;var t=r.matrixTransform(i);r.x=o.x,r.y=o.y+o.height;var a=r.matrixTransform(i),s=Math.min(n.x,e.x,t.x,a.x),u=Math.max(n.x,e.x,t.x,a.x),l=Math.min(n.y,e.y,t.y,a.y),c=Math.max(n.y,e.y,t.y,a.y);return new Sr(s,l,u-s,c-l)}var A6=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r};function sP(o,i,r){var n,e=o.ownerSVGElement;if(!e)return new Sr(0,0,0,0);try{n=o.getBBox()}catch(a){n={x:o.clientLeft,y:o.clientTop,width:o.clientWidth,height:o.clientHeight}}if(i)return Sr.create(n);var t=fh(o,r||e);return u1(n,t)}function ch(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,n=o.ownerSVGElement;if(!n||!$g(o)){if(Dx(o)){var e=gP(o),t=e.left,a=e.top,s=e.width,u=e.height;return new Sr(t,a,s,u)}return new Sr(0,0,0,0)}var l=i.target,c=i.recursive;if(!c){try{r=o.getBBox()}catch(E){r={x:o.clientLeft,y:o.clientTop,width:o.clientWidth,height:o.clientHeight}}if(!l)return Sr.create(r);var f=fh(o,l);return u1(r,f)}{var d=o.childNodes,v=d.length;if(v===0)return ch(o,{target:l});l||(l=o);for(var p=0;p<v;p+=1){var y=d[p],C=void 0;y.childNodes.length===0?C=ch(y,{target:l}):C=ch(y,{target:l,recursive:!0}),r?r=r.union(C):r=C}return r}}function P6(o){for(var i=o,r=i?i.tagName.toLowerCase():"";r==="g";)i=i.firstElementChild,r=i?i.tagName.toLowerCase():"";var n=function(s){var u=i.getAttribute(s),l=u?parseFloat(u):0;return Number.isNaN(l)?0:l},e,t;switch(r){case"rect":t=new Sr(n("x"),n("y"),n("width"),n("height"));break;case"circle":e=n("r"),t=new Sr(n("cx")-e,n("cy")-e,2*e,2*e);break;default:break}return t}function k6(o,i){var r=Kg();if($g(i)&&$g(o)){for(var n=o,e=[];n&&n!==i;){var t=n.getAttribute("transform")||null,a=i1(t);e.push(a),n=n.parentNode}e.reverse().forEach(function(s){r=r.multiply(s)})}return r}function fh(o,i){if($g(i)&&$g(o)){var r=i.getScreenCTM(),n=o.getScreenCTM();if(r&&n)return r.inverse().multiply(n)}return Kg()}function uP(o,i,r){var n=o instanceof SVGSVGElement?o:o.ownerSVGElement,e=n.createSVGPoint();e.x=i,e.y=r;try{var t=n.getScreenCTM(),a=e.matrixTransform(t.inverse()),s=fh(o,n).inverse();return a.matrixTransform(s)}catch(u){return e}}function lP(o){var i=function(a){var s=o.getAttribute(a),u=s?parseFloat(s):0;return Number.isNaN(u)?0:u};switch(o instanceof SVGElement&&o.nodeName.toLowerCase()){case"rect":return new Sr(i("x"),i("y"),i("width"),i("height"));case"circle":return new lh(i("cx"),i("cy"),i("r"),i("r"));case"ellipse":return new lh(i("cx"),i("cy"),i("rx"),i("ry"));case"polyline":{var r=Jm(o);return new Cu(r)}case"polygon":{var n=Jm(o);return n.length>1&&n.push(n[0]),new Cu(n)}case"path":{var e=o.getAttribute("d");return Wa.isValid(e)||(e=Wa.normalize(e)),Wa.parse(e)}case"line":return new ua(i("x1"),i("y1"),i("x2"),i("y2"));default:break}return ch(o)}function D6(o,i,r){var n=o instanceof SVGSVGElement?o:o.ownerSVGElement;r=r||n;var e=ch(r),t=e.getCenter();if(!e.intersectsWithLineFromCenterToPoint(i))return null;var a=null,s=o.tagName.toLowerCase();if(s==="rect"){var u=new Sr(parseFloat(o.getAttribute("x")||"0"),parseFloat(o.getAttribute("y")||"0"),parseFloat(o.getAttribute("width")||"0"),parseFloat(o.getAttribute("height")||"0")),l=fh(o,r),c=Xx(l),f=n.createSVGTransform();f.setRotate(-c.rotation,t.x,t.y);var d=u1(u,f.matrix.multiply(l));a=Sr.create(d).intersectsWithLineFromCenterToPoint(i,c.rotation)}else if(s==="path"||s==="polygon"||s==="polyline"||s==="circle"||s==="ellipse"){for(var v=s==="path"?o:Ux(o),p=zx(v),y=Infinity,C=[],E=0,w=p.length;E<w;E+=1){var x=p[E],N=Hx(x.x,x.y);N=N.matrixTransform(fh(o,r));var j=mt.create(N),B=j.distance(t),$=j.distance(i)*1.1,Z=B+$;Z<y?(y=Z,C=[{sample:x,refDistance:$}]):Z<y+1&&C.push({sample:x,refDistance:$})}C.sort(function(fe,de){return fe.refDistance-de.refDistance}),C[0]&&(a=mt.create(C[0].sample))}return a}function cP(o,i){return dP(o,i,"animate")}function fP(o,i){return dP(o,i,"animateTransform")}function dP(o,i,r){var n=Mf(r);o.appendChild(n);try{return hP(n,i)}catch(e){}return function(){}}function hP(o,i){var r=i.start,n=i.complete,e=i.repeat,t=A6(i,["start","complete","repeat"]);eu(o,t),r&&o.addEventListener("beginEvent",r),n&&o.addEventListener("endEvent",n),e&&o.addEventListener("repeatEvent",e);var a=o;return setTimeout(function(){a.beginElement()}),function(){return a.endElement()}}function vP(o,i,r){var n=MA(r),e=Mf("animateMotion"),t=Mf("mpath");eu(t,{"xlink:href":"#".concat(n)}),e.appendChild(t),o.appendChild(e);try{return hP(e,i)}catch(p){if(document.documentElement.getAttribute("smiling")==="fake"){var a=e;a.animators=[];var s=window,u=a.getAttribute("id");u&&(s.id2anim[u]=a);for(var l=s.getTargets(a),c=0,f=l.length;c<f;c+=1){var d=l[c],v=new s.Animator(a,d,c);s.animators.push(v),a.animators[c]=v,v.register()}}}return function(){}}function gP(o){var i=0,r=0,n=0,e=0;if(o){for(var t=o;t;)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent,t&&(i+=parseInt(Zb(t,"borderLeft"),10),r+=parseInt(Zb(t,"borderTop"),10));n=o.offsetWidth,e=o.offsetHeight}return{left:i,top:r,width:n,height:e}}function Kx(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i==null)return i1(eu(o,"transform"));if(r.absolute){o.setAttribute("transform",Wx(i));return}var n=o.transform,e=Yg(i);n.baseVal.appendItem(e)}function Yx(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=eu(o,"transform"),t=o1(e);if(i==null)return t.translation;e=t.raw,e=e.replace(/translate\([^)]*\)/g,"").trim();var a=n.absolute?i:t.translation.tx+i,s=n.absolute?r:t.translation.ty+r,u="translate(".concat(a,",").concat(s,")");o.setAttribute("transform","".concat(u," ").concat(e).trim())}function Zx(o,i,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=eu(o,"transform"),a=o1(t);if(i==null)return a.rotation;t=a.raw,t=t.replace(/rotate\([^)]*\)/g,"").trim(),i%=360;var s=e.absolute?i:a.rotation.angle+i,u=r!=null&&n!=null?",".concat(r,",").concat(n):"",l="rotate(".concat(s).concat(u,")");o.setAttribute("transform","".concat(t," ").concat(l).trim())}function l1(o,i,r){var n=eu(o,"transform"),e=o1(n);if(i==null)return e.scale;r=r==null?i:r,n=e.raw,n=n.replace(/scale\([^)]*\)/g,"").trim();var t="scale(".concat(i,",").concat(r,")");o.setAttribute("transform","".concat(n," ").concat(t).trim())}function pP(o,i,r,n){var e=mt.create(i),t=mt.create(r);if(!n){var a=o instanceof SVGSVGElement?o:o.ownerSVGElement;n=a}var s=l1(o);o.setAttribute("transform","");var u=ch(o,{target:n}).scale(s.sx,s.sy),l=Yg();l.setTranslate(-u.x-u.width/2,-u.y-u.height/2);var c=Yg(),f=e.angleBetween(t,e.clone().translate(1,0));f&&c.setRotate(f,0,0);var d=Yg(),v=e.clone().move(t,u.width/2);d.setTranslate(2*e.x-v.x,2*e.y-v.y);var p=fh(o,n),y=Yg();y.setMatrix(d.matrix.multiply(c.matrix.multiply(l.matrix.multiply(p.scale(s.sx,s.sy))))),o.setAttribute("transform",Wx(y.matrix))}var I6=function(){function o(i,r,n){Object(De.a)(this,o),this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=ra.isEventSupported("wheel")?"wheel":"mousewheel",this.target=i,this.onWheelCallback=r,this.onWheelGuard=n,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}return Object(be.a)(o,[{key:"enable",value:function(){ra.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):ln()(this.target).on("mousewheel",this.onWheel)}},{key:"disable",value:function(){ra.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):ln()(this.target).off("mousewheel")}},{key:"onWheel",value:function(r){var n=this;if(!(this.onWheelGuard!=null&&!this.onWheelGuard(r))){this.deltaX+=r.deltaX,this.deltaY+=r.deltaY,r.preventDefault();var e;(this.deltaX!==0||this.deltaY!==0)&&(r.stopPropagation(),e=!0),e===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(function(){n.didWheel(r)}))}}},{key:"didWheel",value:function(r){this.animationFrameId=0,this.onWheelCallback(r,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}]),o}(),R6=ja.isVector,N6=ja.create,j6=ja.createVectors;function mP(o){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,n=null;return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n&&clearTimeout(n),n=window.setTimeout(function(){o.apply(i,t)},r)}}function L6(o){var i=null,r=[],n=function(){if(getComputedStyle(o).position==="static"){var l=o.style;l.position="relative"}var c=document.createElement("object");return c.onload=function(){c.contentDocument.defaultView.addEventListener("resize",e),e()},c.style.display="block",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.height="100%",c.style.width="100%",c.style.overflow="hidden",c.style.pointerEvents="none",c.style.zIndex="-1",c.style.opacity="0",c.setAttribute("tabindex","-1"),c.type="text/html",o.appendChild(c),c.data="about:blank",c},e=mP(function(){r.forEach(function(u){return u(o)})}),t=function(l){i||(i=n()),r.indexOf(l)===-1&&r.push(l)},a=function(){i&&i.parentNode&&(i.contentDocument&&i.contentDocument.defaultView.removeEventListener("resize",e),i.parentNode.removeChild(i),i=null,r=[])},s=function(l){var c=r.indexOf(l);c!==-1&&r.splice(c,1),r.length===0&&i&&a()};return{element:o,bind:t,destroy:a,unbind:s}}function _6(o){var i=null,r=[],n=mP(function(){r.forEach(function(u){u(o)})}),e=function(){var l=new ResizeObserver(n);return l.observe(o),n(),l},t=function(l){i||(i=e()),r.indexOf(l)===-1&&r.push(l)},a=function(){i&&(i.disconnect(),r=[],i=null)},s=function(l){var c=r.indexOf(l);c!==-1&&r.splice(c,1),r.length===0&&i&&a()};return{element:o,bind:t,destroy:a,unbind:s}}var F6=typeof ResizeObserver!="undefined"?_6:L6,c1;(function(o){var i=new WeakMap;function r(e){var t=i.get(e);return t||(t=F6(e),i.set(e,t),t)}function n(e){e.destroy(),i.delete(e.element)}o.bind=function(e,t){var a=r(e);return a.bind(t),function(){return a.unbind(t)}},o.clear=function(e){var t=r(e);n(t)}})(c1||(c1={}));var qm;(function(o){var i=[],r=1e3/60,n=[],e=0,t=function(){return performance.now()},a=function(f){return f[0]},s=function(f){return n.push(f)===1&&u()},u=function(){var c=function(){var y,C;return(C=(y=n.splice(0,n.length))[0])===null||C===void 0?void 0:C.call(y)};if(typeof MessageChannel!="undefined"){var f=new MessageChannel,d=f.port1,v=f.port2;return d.onmessage=c,function(){return v.postMessage(null)}}return function(){return setTimeout(c)}}(),l=function c(){e=t()+r;for(var f=a(i);f&&!o.shouldYield();){var d=f,v=d.callback,p=d.data;f.callback=null;var y=v&&v(p);y?f.callback=y:i.shift(),f=a(i)}f&&s(c)};o.scheduleTask=function(c,f){var d={callback:c,data:f};i.push(d),s(l)},o.shouldYield=function(){var c,f;return((f=(c=navigator)===null||c===void 0?void 0:c.scheduling)===null||f===void 0?void 0:f.isInputPending())||t()>=e}})(qm||(qm={}));var la=h("w4Tj"),ca=h("oZsa"),Io=function(){function o(i){Object(De.a)(this,o),this.options=Object.assign({},i),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return Object(be.a)(o,[{key:"names",get:function(){return Object.keys(this.data)}},{key:"register",value:function(r,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof r=="object"){Object.keys(r).forEach(function(u){e.register(u,r[u],n)});return}this.exist(r)&&!t&&!ra.isApplyingHMR()&&this.onDuplicated(r);var a=this.options.process,s=a?A.call(a,this,r,n):n;return this.data[r]=s,s}},{key:"unregister",value:function(r){var n=r?this.data[r]:null;return delete this.data[r],n}},{key:"get",value:function(r){return r?this.data[r]:null}},{key:"exist",value:function(r){return r?this.data[r]!=null:!1}},{key:"onDuplicated",value:function(r){try{throw this.options.onConflict&&A.call(this.options.onConflict,this,r),new Error("".concat(_.upperFirst(this.options.type)," with name '").concat(r,"' already registered."))}catch(n){throw n}}},{key:"onNotFound",value:function(r,n){throw new Error(this.getSpellingSuggestion(r,n))}},{key:"getSpellingSuggestion",value:function(r,n){var e=this.getSpellingSuggestionForName(r),t=n?"".concat(n," ").concat(_.lowerFirst(this.options.type)):this.options.type;return"".concat(_.upperFirst(t)," with name '").concat(r,"' does not exist.").concat(e?" Did you mean '".concat(e,"'?"):"")}},{key:"getSpellingSuggestionForName",value:function(r){return _.getSpellingSuggestion(r,Object.keys(this.data),function(n){return n})}}]),o}();(function(o){function i(r){return new o(r)}o.create=i})(Io||(Io={}));var B6={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},G6={},yP={position:f1("x","width","origin")},bP={position:f1("y","height","origin")},z6={position:f1("x","width","corner")},U6={position:f1("y","height","corner")},CP={set:dh("width","width")},EP={set:dh("height","height")},V6={set:dh("rx","width")},H6={set:dh("ry","height")},OP={set:function(o){var i=dh(o,"width"),r=dh(o,"height");return function(n,e){var t=e.refBBox,a=t.height>t.width?i:r;return A.call(a,this,n,e)}}("r")},W6={set:function(i,r){var n=r.refBBox,e=parseFloat(i),t=M.isPercentage(i);t&&(e/=100);var a=Math.sqrt(n.height*n.height+n.width*n.width),s;return Number.isFinite(e)&&(t||e>=0&&e<=1?s=e*a:s=Math.max(e+a,0)),{r:s}}},$6={set:dh("cx","width")},X6={set:dh("cy","height")},wP={set:TP({resetOffset:!0})},K6={set:TP({resetOffset:!1})},xP={set:MP({resetOffset:!0})},Y6={set:MP({resetOffset:!1})},Z6=OP,J6=wP,Q6=xP,q6=yP,eB=bP,tB=CP,nB=EP;function f1(o,i,r){return function(n,e){var t=e.refBBox;if(n==null)return null;var a=parseFloat(n),s=M.isPercentage(n);s&&(a/=100);var u;if(Number.isFinite(a)){var l=t[r];s||a>0&&a<1?u=l[o]+t[i]*a:u=l[o]+a}var c=new mt;return c[o]=u||0,c}}function dh(o,i){return function(r,n){var e=n.refBBox,t=parseFloat(r),a=M.isPercentage(r);a&&(t/=100);var s={};if(Number.isFinite(t)){var u=a||t>=0&&t<=1?t*e[i]:Math.max(t+e[i],0);s[o]=u}return s}}function SP(o,i){var r="x6-shape",n=i&&i.resetOffset;return function(e,t){var a=t.view,s=t.elem,u=t.refBBox,l=a.$(s),c=l.data(r);if(!c||c.value!==e){var f=o(e);c={value:e,shape:f,shapeBBox:f.bbox()},l.data(r,c)}var d=c.shape.clone(),v=c.shapeBBox.clone(),p=v.getOrigin(),y=u.getOrigin();v.x=y.x,v.y=y.y;var C=u.getMaxScaleToFit(v,y),E=v.width===0||u.width===0?1:C.sx,w=v.height===0||u.height===0?1:C.sy;return d.scale(E,w,p),n&&d.translate(-p.x,-p.y),d}}function TP(o){function i(n){return Wa.parse(n)}var r=SP(i,o);return function(n,e){var t=r(n,e);return{d:t.serialize()}}}function MP(o){var i=SP(function(r){return new Cu(r)},o);return function(r,n){var e=i(r,n);return{points:e.serialize()}}}var rB={qualify:m.isPlainObject,set:function(i,r){var n=r.view;return"url(#".concat(n.graph.defineGradient(i),")")}},aB={qualify:m.isPlainObject,set:function(i,r){var n=r.view,e=n.cell,t=Object.assign({},i);if(e.isEdge()&&t.type==="linearGradient"){var a=n,s=a.sourcePoint,u=a.targetPoint;t.id="gradient-".concat(t.type,"-").concat(e.id),t.attrs=Object.assign(Object.assign({},t.attrs),{x1:s.x,y1:s.y,x2:u.x,y2:u.y,gradientUnits:"userSpaceOnUse"}),n.graph.defs.remove(t.id)}return"url(#".concat(n.graph.defineGradient(t),")")}},AP={qualify:function(i,r){var n=r.attrs;return n.textWrap==null||!m.isPlainObject(n.textWrap)},set:function(i,r){var n=r.view,e=r.elem,t=r.attrs,a="x6-text",s=n.$(e),u=s.data(a),l=function(E){try{return JSON.parse(E)}catch(w){return E}},c={x:t.x,eol:t.eol,annotations:l(t.annotations),textPath:l(t["text-path"]||t.textPath),textVerticalAnchor:t["text-vertical-anchor"]||t.textVerticalAnchor,displayEmpty:(t["display-empty"]||t.displayEmpty)==="true",lineHeight:t["line-height"]||t.lineHeight},f=t["font-size"]||t.fontSize,d=JSON.stringify([i,c]);if(f&&e.setAttribute("font-size",f),u==null||u!==d){var v=c.textPath;if(v!=null&&typeof v=="object"){var p=v.selector;if(typeof p=="string"){var y=n.find(p)[0];y instanceof SVGPathElement&&(R.ensureId(y),c.textPath=Object.assign({"xlink:href":"#".concat(y.id)},v))}}R.text(e,"".concat(i),c),s.data(a,d)}}},iB={qualify:m.isPlainObject,set:function(i,r){var n=r.view,e=r.elem,t=r.attrs,a=r.refBBox,s=i,u=s.width||0;M.isPercentage(u)?a.width*=parseFloat(u)/100:u<=0?a.width+=u:a.width=u;var l=s.height||0;M.isPercentage(l)?a.height*=parseFloat(l)/100:l<=0?a.height+=l:a.height=l;var c,f=s.text;f==null&&(f=t.text),f!=null?c=R.breakText("".concat(f),a,{"font-weight":t["font-weight"]||t.fontWeight,"font-size":t["font-size"]||t.fontSize,"font-family":t["font-family"]||t.fontFamily,lineHeight:t.lineHeight},{svgDocument:n.graph.view.svg,ellipsis:s.ellipsis,hyphen:s.hyphen,breakWord:s.breakWord}):c="",A.call(AP.set,this,c,{view:n,elem:e,attrs:t,refBBox:a,cell:n.cell})}},Zg=function(i,r){var n=r.attrs;return n.text!==void 0},oB={qualify:Zg},sB={qualify:Zg},uB={qualify:Zg},lB={qualify:Zg},cB={qualify:Zg},fB={qualify:Zg},dB={qualify:function(i,r){var n=r.elem;return n instanceof SVGElement},set:function(i,r){var n=r.view,e=r.elem,t="x6-title",a="".concat(i),s=n.$(e),u=s.data(t);if(u==null||u!==a){s.data(t,a);var l=e.firstChild;if(l&&l.tagName.toUpperCase()==="TITLE"){var c=l;c.textContent=a}else{var f=document.createElementNS(e.namespaceURI,"title");f.textContent=a,e.insertBefore(f,l)}}}},hB={offset:PP("x","width","right")},vB={offset:PP("y","height","bottom")},gB={offset:function(i,r){var n=r.refBBox;return i?{x:-n.x,y:-n.y}:{x:0,y:0}}};function PP(o,i,r){return function(n,e){var t=e.refBBox,a=new mt,s;return n==="middle"?s=t[i]/2:n===r?s=t[i]:typeof n=="number"&&Number.isFinite(n)?s=n>-1&&n<1?-t[i]*n:-n:M.isPercentage(n)?s=t[i]*parseFloat(n)/100:s=0,a[o]=-(t[o]+s),a}}var pB={qualify:m.isPlainObject,set:function(i,r){var n=r.view,e=r.elem;n.$(e).css(i)}},mB={set:function(i,r){var n=r.view,e=r.elem;n.$(e).html("".concat(i))}},yB={qualify:m.isPlainObject,set:function(i,r){var n=r.view;return"url(#".concat(n.graph.defineFilter(i),")")}},bB={set:function(i){return i!=null&&typeof i=="object"&&i.id?i.id:i}};function hh(o,i,r){var n,e;typeof i=="object"?(n=i.x,e=i.y):(n=i,e=r);var t=Wa.parse(o),a=t.bbox();if(a){var s=-a.height/2-a.y,u=-a.width/2-a.x;typeof n=="number"&&(u-=n),typeof e=="number"&&(s-=e),t.translate(u,s)}return t.serialize()}var kP=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},CB=function(i){var r=i.size,n=i.width,e=i.height,t=i.offset,a=i.open,s=kP(i,["size","width","height","offset","open"]);return DP({size:r,width:n,height:e,offset:t},a===!0,!0,void 0,s)},EB=function(i){var r=i.size,n=i.width,e=i.height,t=i.offset,a=i.factor,s=kP(i,["size","width","height","offset","factor"]);return DP({size:r,width:n,height:e,offset:t},!1,!1,a,s)};function DP(o,i,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:3/4,e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=o.size||10,a=o.width||t,s=o.height||t,u=new Wa,l={};if(i)u.moveTo(a,0).lineTo(0,s/2).lineTo(a,s),l.fill="none";else{if(u.moveTo(0,s/2),u.lineTo(a,0),!r){var c=M.clamp(n,0,1);u.lineTo(a*c,s/2)}u.lineTo(a,s),u.close()}return Object.assign(Object.assign(Object.assign({},l),e),{tagName:"path",d:hh(u.serialize(),{x:o.offset!=null?o.offset:-a/2})})}var OB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},wB=function(i){var r=i.size,n=i.width,e=i.height,t=i.offset,a=OB(i,["size","width","height","offset"]),s=r||10,u=n||s,l=e||s,c=new Wa;return c.moveTo(0,l/2).lineTo(u/2,0).lineTo(u,l/2).lineTo(u/2,l).close(),Object.assign(Object.assign({},a),{tagName:"path",d:hh(c.serialize(),t==null?-u/2:t)})},xB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},SB=function(i){var r=i.d,n=i.offsetX,e=i.offsetY,t=xB(i,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},t),{tagName:"path",d:hh(r,n,e)})},TB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},MB=function(i){var r=i.size,n=i.width,e=i.height,t=i.offset,a=TB(i,["size","width","height","offset"]),s=r||10,u=n||s,l=e||s,c=new Wa;return c.moveTo(0,0).lineTo(u,l).moveTo(0,l).lineTo(u,0),Object.assign(Object.assign({},a),{tagName:"path",fill:"none",d:hh(c.serialize(),t||-u/2)})},AB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},PB=function(i){var r=i.width,n=i.height,e=i.offset,t=i.open,a=i.flip,s=AB(i,["width","height","offset","open","flip"]),u=n||6,l=r||10,c=t===!0,f=a===!0,d=Object.assign(Object.assign({},s),{tagName:"path"});f&&(u=-u);var v=new Wa;return v.moveTo(0,u).lineTo(l,0),c?d.fill="none":(v.lineTo(l,u),v.close()),d.d=hh(v.serialize(),{x:e||-l/2,y:u/2}),d},IP=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},RP=function(i){var r=i.r,n=IP(i,["r"]),e=r||5;return Object.assign(Object.assign({cx:e},n),{tagName:"circle",r:e})},kB=function(i){var r=i.r,n=IP(i,["r"]),e=r||5,t=new Wa;return t.moveTo(e,0).lineTo(e,e*2),t.moveTo(0,e).lineTo(e*2,e),{children:[Object.assign(Object.assign({},RP({r:e})),{fill:"none"}),Object.assign(Object.assign({},n),{tagName:"path",d:hh(t.serialize(),-e)})]}},DB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},IB=function(i){var r=i.rx,n=i.ry,e=DB(i,["rx","ry"]),t=r||5,a=n||5;return Object.assign(Object.assign({cx:t},e),{tagName:"ellipse",rx:t,ry:a})},bd;(function(o){o.presets=X,o.registry=Io.create({type:"marker"}),o.registry.register(o.presets,!0)})(bd||(bd={})),function(o){o.normalize=hh}(bd||(bd={}));var RB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r};function Jx(o){return typeof o=="string"||m.isPlainObject(o)}var NB={qualify:Jx,set:function(i,r){var n=r.view,e=r.attrs;return Qx("marker-start",i,n,e)}},jB={qualify:Jx,set:function(i,r){var n=r.view,e=r.attrs;return Qx("marker-end",i,n,e,{transform:"rotate(180)"})}},LB={qualify:Jx,set:function(i,r){var n=r.view,e=r.attrs;return Qx("marker-mid",i,n,e)}};function Qx(o,i,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=typeof i=="string"?{name:i}:i,a=t.name,s=t.args,u=RB(t,["name","args"]),l=u;if(a&&typeof a=="string"){var c=bd.registry.get(a);if(c)l=c(Object.assign(Object.assign({},u),s));else return bd.registry.onNotFound(a)}var f=Object.assign(Object.assign(Object.assign({},_B(n,o)),e),l);return Object(Xe.a)({},o,"url(#".concat(r.graph.defineMarker(f),")"))}function _B(o,i){var r={},n=o.stroke;typeof n=="string"&&(r.stroke=n,r.fill=n);var e=o.strokeOpacity;if(e==null&&(e=o["stroke-opacity"]),e==null&&(e=o.opacity),e!=null&&(r["stroke-opacity"]=e,r["fill-opacity"]=e),i!=="marker-mid"){var t=parseFloat(o.strokeWidth||o["stroke-width"]);if(Number.isFinite(t)&&t>1){var a=Math.ceil(t/2);r.refX=i==="marker-start"?a:-a}}return r}var e0=function(i,r){var n=r.view;return n.cell.isEdge()},FB={qualify:e0,set:function(i,r){var n,e,t,a,s=r.view,u=i.reverse||!1,l=i.stubs||0,c;if(Number.isFinite(l)&&l!==0)if(u){var C,E,w=s.getConnectionLength()||0;l<0?(C=(w+l)/2,E=-l):(C=l,E=w-l*2);var x=s.getConnection();c=(a=(t=(e=(n=x==null?void 0:x.divideAtLength(C))===null||n===void 0?void 0:n[1])===null||e===void 0?void 0:e.divideAtLength(E))===null||t===void 0?void 0:t[0])===null||a===void 0?void 0:a.serialize()}else{var f;if(l<0){var d=s.getConnectionLength()||0;f=(d+l)/2}else f=l;var v=s.getConnection();if(v){var p=v.divideAtLength(f),y=v.divideAtLength(-f);p&&y&&(c="".concat(p[0].serialize()," ").concat(y[1].serialize()))}}return{d:c||s.getConnectionPathData()}}},NP={qualify:e0,set:d1("getTangentAtLength",{rotate:!0})},BB={qualify:e0,set:d1("getTangentAtLength",{rotate:!1})},jP={qualify:e0,set:d1("getTangentAtRatio",{rotate:!0})},GB={qualify:e0,set:d1("getTangentAtRatio",{rotate:!1})},zB=NP,UB=jP;function d1(o,i){var r={x:1,y:0};return function(n,e){var t,a,s=e.view,u=s[o](Number(n));return u?(a=i.rotate?u.vector().vectorAngle(r):0,t=u.start):(t=s.path.start,a=0),a===0?{transform:"translate(".concat(t.x,",").concat(t.y,"')")}:{transform:"translate(".concat(t.x,",").concat(t.y,"') rotate(").concat(a,")")}}}var Lc;(function(o){function i(r,n,e){return!!(r!=null&&(typeof r=="string"||typeof r.qualify!="function"||A.call(r.qualify,this,n,e)))}o.isValidDefinition=i})(Lc||(Lc={})),function(o){o.presets=Object.assign(Object.assign({},B6),W),o.registry=Io.create({type:"attribute definition"}),o.registry.register(o.presets,!0)}(Lc||(Lc={}));var VB={color:"#aaaaaa",thickness:1,markup:"rect",update:function(i,r){var n=r.thickness*r.sx,e=r.thickness*r.sy;R.attr(i,{width:n,height:e,rx:n,ry:e,fill:r.color})}},HB={color:"#aaaaaa",thickness:1,markup:"rect",update:function(i,r){var n=r.sx<=1?r.thickness*r.sx:r.thickness;R.attr(i,{width:n,height:n,rx:n,ry:n,fill:r.color})}},WB={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(i,r){var n,e=r.width,t=r.height,a=r.thickness;e-a>=0&&t-a>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",R.attr(i,{d:n,stroke:r.color,"stroke-width":r.thickness})}},$B=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(i,r){var n,e=r.width,t=r.height,a=r.thickness;e-a>=0&&t-a>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",R.attr(i,{d:n,stroke:r.color,"stroke-width":r.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(i,r){var n,e=r.factor||1,t=r.width*e,a=r.height*e,s=r.thickness;t-s>=0&&a-s>=0?n=["M",t,0,"H0 M0 0 V0",a].join(" "):n="M 0 0 0 0",r.width=t,r.height=a,R.attr(i,{d:n,stroke:r.color,"stroke-width":r.thickness})}}],Cd=function(){function o(){Object(De.a)(this,o),this.patterns={},this.root=ja.create(R.createSvgDocument(),{width:"100%",height:"100%"},[R.createSvgElement("defs")]).node}return Object(be.a)(o,[{key:"add",value:function(r,n){var e=this.root.childNodes[0];e&&e.appendChild(n),this.patterns[r]=n,ja.create("rect",{width:"100%",height:"100%",fill:"url(#".concat(r,")")}).appendTo(this.root)}},{key:"get",value:function(r){return this.patterns[r]}},{key:"has",value:function(r){return this.patterns[r]!=null}}]),o}();(function(o){o.presets=Y,o.registry=Io.create({type:"grid"}),o.registry.register(o.presets,!0)})(Cd||(Cd={}));function qx(o,i){return o!=null?o:i}function Bs(o,i){return o!=null&&Number.isFinite(o)?o:i}function XB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=qx(o.color,"blue"),r=Bs(o.width,1),n=Bs(o.margin,2),e=Bs(o.opacity,1),t=n,a=n+r;return`
    <filter>
      <feFlood flood-color="`.concat(i,'" flood-opacity="').concat(e,`" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="`).concat(a,`" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="`).concat(t,`" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `).trim()}function KB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=qx(o.color,"red"),r=Bs(o.blur,0),n=Bs(o.width,1),e=Bs(o.opacity,1);return`
      <filter>
        <feFlood flood-color="`.concat(i,'" flood-opacity="').concat(e,`" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="`).concat(n,`"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="`).concat(r,`"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `).trim()}function YB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Bs(o.x,2),r=o.y!=null&&Number.isFinite(o.y)?[i,o.y]:i;return`
    <filter>
      <feGaussianBlur stdDeviation="`.concat(r,`"/>
    </filter>
  `).trim()}function ZB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Bs(o.dx,0),r=Bs(o.dy,0),n=qx(o.color,"black"),e=Bs(o.blur,4),t=Bs(o.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="`.concat(e,'" dx="').concat(i,'" dy="').concat(r,'" flood-color="').concat(n,'" flood-opacity="').concat(t,`" />
       </filter>`).trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="`.concat(e,`" />
         <feOffset dx="`).concat(i,'" dy="').concat(r,`" result="offsetblur" />
         <feFlood flood-color="`).concat(n,`" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="`).concat(t,`" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`).trim()}function JB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Bs(o.amount,1),r=.2126+.7874*(1-i),n=.7152-.7152*(1-i),e=.0722-.0722*(1-i),t=.2126-.2126*(1-i),a=.7152+.2848*(1-i),s=.0722-.0722*(1-i),u=.2126-.2126*(1-i),l=.0722+.9278*(1-i);return`
    <filter>
      <feColorMatrix type="matrix" values="`.concat(r," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(a," ").concat(s," 0 0 ").concat(u," ").concat(n," ").concat(l,` 0 0 0 0 0 1 0"/>
    </filter>
  `).trim()}function QB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Bs(o.amount,1),r=.393+.607*(1-i),n=.769-.769*(1-i),e=.189-.189*(1-i),t=.349-.349*(1-i),a=.686+.314*(1-i),s=.168-.168*(1-i),u=.272-.272*(1-i),l=.534-.534*(1-i),c=.131+.869*(1-i);return`
      <filter>
        <feColorMatrix type="matrix" values="`.concat(r," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(a," ").concat(s," 0 0 ").concat(u," ").concat(l," ").concat(c,` 0 0 0 0 0 1 0"/>
      </filter>
    `).trim()}function qB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Bs(o.amount,1);return`
      <filter>
        <feColorMatrix type="saturate" values="`.concat(1-i,`"/>
      </filter>
    `).trim()}function eG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Bs(o.angle,0);return`
      <filter>
        <feColorMatrix type="hueRotate" values="`.concat(i,`"/>
      </filter>
    `).trim()}function tG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Bs(o.amount,1),r=1-i;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="`.concat(i," ").concat(r,`"/>
          <feFuncG type="table" tableValues="`).concat(i," ").concat(r,`"/>
          <feFuncB type="table" tableValues="`).concat(i," ").concat(r,`"/>
        </feComponentTransfer>
      </filter>
    `).trim()}function nG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Bs(o.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(i,`"/>
        <feFuncG type="linear" slope="`).concat(i,`"/>
        <feFuncB type="linear" slope="`).concat(i,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}function rG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Bs(o.amount,1),r=.5-i/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(i,'" intercept="').concat(r,`"/>
        <feFuncG type="linear" slope="`).concat(i,'" intercept="').concat(r,`"/>
        <feFuncB type="linear" slope="`).concat(i,'" intercept="').concat(r,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}var Tv;(function(o){o.presets=K,o.registry=Io.create({type:"filter"}),o.registry.register(o.presets,!0)})(Tv||(Tv={}));var LP=function(i){var r=document.createElement("canvas"),n=i.width,e=i.height;r.width=n*2,r.height=e;var t=r.getContext("2d");return t.drawImage(i,0,0,n,e),t.translate(2*n,0),t.scale(-1,1),t.drawImage(i,0,0,n,e),r},_P=function(i){var r=document.createElement("canvas"),n=i.width,e=i.height;r.width=n,r.height=e*2;var t=r.getContext("2d");return t.drawImage(i,0,0,n,e),t.translate(0,2*e),t.scale(1,-1),t.drawImage(i,0,0,n,e),r},FP=function(i){var r=document.createElement("canvas"),n=i.width,e=i.height;r.width=2*n,r.height=2*e;var t=r.getContext("2d");return t.drawImage(i,0,0,n,e),t.setTransform(-1,0,0,-1,r.width,r.height),t.drawImage(i,0,0,n,e),t.setTransform(-1,0,0,1,r.width,0),t.drawImage(i,0,0,n,e),t.setTransform(1,0,0,-1,0,r.height),t.drawImage(i,0,0,n,e),r},aG=function(i,r){var n=i.width,e=i.height,t=document.createElement("canvas");t.width=n*3,t.height=e*3;for(var a=t.getContext("2d"),s=r.angle!=null?-r.angle:-20,u=ti.toRad(s),l=t.width/4,c=t.height/4,f=0;f<4;f+=1)for(var d=0;d<4;d+=1)(f+d)%2>0&&(a.setTransform(1,0,0,1,(2*f-1)*l,(2*d-1)*c),a.rotate(u),a.drawImage(i,-n/2,-e/2,n,e));return t},Jg;(function(o){o.presets=Object.assign({},ne),o.presets["flip-x"]=LP,o.presets["flip-y"]=_P,o.presets["flip-xy"]=FP,o.registry=Io.create({type:"background pattern"}),o.registry.register(o.presets,!0)})(Jg||(Jg={}));var Tl={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track:function(i){Tl.trackable=i}},ts;(function(o){o.snapToGrid=Fx,o.normalizeMarker=hh;function i(r){return"".concat(Tl.prefixCls,"-").concat(r)}o.prefix=i})(ts||(ts={})),function(o){function i(r,n,e){var t=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],s=typeof n.children=="function"?n.children(r):r[n.children||"children"];return e||(e=n.createNode(r),a.push(e)),Array.isArray(s)&&s.forEach(function(u){var l=n.createNode(u),c=n.createEdge(e,l);a.push(l,c),t.makeTree(u,n,l,a)}),a}o.makeTree=i}(ts||(ts={}));var BP=ts.prefix("highlighted"),iG={highlight:function(i,r,n){var e=n&&n.className||BP;R.addClass(r,e)},unhighlight:function(i,r,n){var e=n&&n.className||BP;R.removeClass(r,e)}},GP=ts.prefix("highlight-opacity"),oG={highlight:function(i,r){R.addClass(r,GP)},unhighlight:function(i,r){R.removeClass(r,GP)}},sG={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},uG={highlight:function(i,r,n){var e=vh.getHighlighterId(r,n);if(!vh.hasCache(e)){n=m.defaultsDeep({},n,sG);var t=ja.create(r),a,s;try{a=t.toPathData()}catch(N){s=t.bbox(!0),a=R.rectToPathData(Object.assign(Object.assign({},n),s))}var u=R.createSvgElement("path");if(R.attr(u,Object.assign({d:a,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},n.attrs?R.kebablizeAttrs(n.attrs):null)),i.isEdgeElement(r))R.attr(u,"d",i.getConnectionPathData());else{var l=t.getTransformToElement(i.container),c=n.padding;if(c){s==null&&(s=t.bbox(!0));var f=s.x+s.width/2,d=s.y+s.height/2;s=R.transformRectangle(s,l);var v=Math.max(s.width,1),p=Math.max(s.height,1),y=(v+c)/v,C=(p+c)/p,E=R.createSVGMatrix({a:y,b:0,c:0,d:C,e:f-y*f,f:d-C*d});l=l.multiply(E)}R.transform(u,l)}R.addClass(u,ts.prefix("highlight-stroke"));var w=i.cell,x=function(){return vh.removeHighlighter(e)};w.on("removed",x),w.model&&w.model.on("reseted",x),i.container.appendChild(u),vh.setCache(e,u)}},unhighlight:function(i,r,n){vh.removeHighlighter(vh.getHighlighterId(r,n))}},vh;(function(o){function i(a,s){return R.ensureId(a),a.id+JSON.stringify(s)}o.getHighlighterId=i;var r={};function n(a,s){r[a]=s}o.setCache=n;function e(a){return r[a]!=null}o.hasCache=e;function t(a){var s=r[a];s&&(R.remove(s),delete r[a])}o.removeHighlighter=t})(vh||(vh={}));var Pf;(function(o){function i(r,n){if(typeof n.highlight!="function")throw new Error("Highlighter '".concat(r,"' is missing required `highlight()` method"));if(typeof n.unhighlight!="function")throw new Error("Highlighter '".concat(r,"' is missing required `unhighlight()` method"))}o.check=i})(Pf||(Pf={})),function(o){o.presets=ae,o.registry=Io.create({type:"highlighter"}),o.registry.register(o.presets,!0)}(Pf||(Pf={}));function eS(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new mt(M.normalizePercentage(i.x,o.width),M.normalizePercentage(i.y,o.height))}function tS(o,i,r){return Object.assign({angle:i,position:o.toJSON()},r)}var lG=function(i,r){return i.map(function(n){var e=n.x,t=n.y,a=n.angle;return tS(eS(r,{x:e,y:t}),a||0)})},cG=function(i,r,n){var e=n.start||0,t=n.step||20;return zP(i,r,e,function(a,s){return(a+.5-s/2)*t})},fG=function(i,r,n){var e=n.start||0,t=n.step||360/i.length;return zP(i,r,e,function(a){return a*t})};function zP(o,i,r,n){var e=i.getCenter(),t=i.getTopCenter(),a=i.width/i.height,s=lh.fromRect(i),u=o.length;return o.map(function(l,c){var f=r+n(c,u),d=t.clone().rotate(-f,e).scale(a,1,e),v=l.compensateRotate?-s.tangentTheta(d):0;return(l.dx||l.dy)&&d.translate(l.dx||0,l.dy||0),l.dr&&d.move(e,l.dr),tS(d.round(),v,l)})}var dG=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},hG=function(i,r,n){var e=eS(r,n.start||r.getOrigin()),t=eS(r,n.end||r.getCorner());return t0(i,e,t,n)},vG=function(i,r,n){return t0(i,r.getTopLeft(),r.getBottomLeft(),n)},gG=function(i,r,n){return t0(i,r.getTopRight(),r.getBottomRight(),n)},pG=function(i,r,n){return t0(i,r.getTopLeft(),r.getTopRight(),n)},mG=function(i,r,n){return t0(i,r.getBottomLeft(),r.getBottomRight(),n)};function t0(o,i,r,n){var e=new ua(i,r),t=o.length;return o.map(function(a,s){var u=a.strict,l=dG(a,["strict"]),c=u||n.strict?(s+1)/(t+1):(s+.5)/t,f=e.pointAt(c);return(l.dx||l.dy)&&f.translate(l.dx||0,l.dy||0),tS(f.round(),0,l)})}var gh;(function(o){o.presets=te,o.registry=Io.create({type:"port layout"}),o.registry.register(o.presets,!0)})(gh||(gh={}));var yG={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function ph(o,i){var r=i||{},n=r.x,e=r.y,t=r.angle,a=r.attrs;return m.defaultsDeep({},{angle:t,attrs:a,position:{x:n,y:e}},o,yG)}var bG=function(i,r,n){return ph({position:r.getTopLeft()},n)},CG=function(i,r,n){return ph({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n)},EG=function(i,r,n){return ph({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n)},OG=function(i,r,n){return ph({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n)},wG=function(i,r,n){return ph({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n)},xG=function(i,r,n){return UP(i,r,!1,n)},SG=function(i,r,n){return UP(i,r,!0,n)},TG=function(i,r,n){return VP(i,r,!1,n)},MG=function(i,r,n){return VP(i,r,!0,n)};function UP(o,i,r,n){var e=n.offset!=null?n.offset:15,t=i.getCenter().theta(o),a=HP(i),s,u,l,c,f=0;return t<a[1]||t>a[2]?(s=".3em",u=e,l=0,c="start"):t<a[0]?(s="0",u=0,l=-e,r?(f=-90,c="start"):c="middle"):t<a[3]?(s=".3em",u=-e,l=0,c="end"):(s=".6em",u=0,l=e,r?(f=90,c="start"):c="middle"),ph({position:{x:Math.round(u),y:Math.round(l)},angle:f,attrs:{".":{y:s,"text-anchor":c}}},n)}function VP(o,i,r,n){var e=n.offset!=null?n.offset:15,t=i.getCenter().theta(o),a=HP(i),s,u,l,c,f=0;return t<a[1]||t>a[2]?(s=".3em",u=-e,l=0,c="end"):t<a[0]?(s=".6em",u=0,l=e,r?(f=90,c="start"):c="middle"):t<a[3]?(s=".3em",u=e,l=0,c="start"):(s="0em",u=0,l=-e,r?(f=-90,c="start"):c="middle"),ph({position:{x:Math.round(u),y:Math.round(l)},angle:f,attrs:{".":{y:s,"text-anchor":c}}},n)}function HP(o){var i=o.getCenter(),r=i.theta(o.getTopLeft()),n=i.theta(o.getBottomLeft()),e=i.theta(o.getBottomRight()),t=i.theta(o.getTopRight());return[r,t,e,n]}var AG=function(i,r,n){return WP(i.diff(r.getCenter()),!1,n)},PG=function(i,r,n){return WP(i.diff(r.getCenter()),!0,n)};function WP(o,i,r){var n=r.offset!=null?r.offset:20,e=new mt(0,0),t=-o.theta(e),a=o.clone().move(e,n).diff(o).round(),s=".3em",u,l=t;return(t+90)%180==0?(u=i?"end":"middle",!i&&t===-270&&(s="0em")):t>-270&&t<-90?(u="start",l=t-180):u="end",ph({position:a.round().toJSON(),angle:i?l:0,attrs:{".":{y:s,"text-anchor":u}}},r)}var Mv;(function(o){o.presets=ce,o.registry=Io.create({type:"port label layout"}),o.registry.register(o.presets,!0)})(Mv||(Mv={}));var Vo=h("tS8v"),h1=function(){function o(i,r,n,e){if(Object(De.a)(this,o),i==null)return this.set(255,255,255,1);if(typeof i=="number")return this.set(i,r,n,e);if(typeof i=="string")return o.fromString(i)||this;if(Array.isArray(i))return this.set(i);this.set(i.r,i.g,i.b,i.a==null?1:i.a)}return Object(be.a)(o,[{key:"blend",value:function(r,n,e){this.set(r.r+(n.r-r.r)*e,r.g+(n.g-r.g)*e,r.b+(n.b-r.b)*e,r.a+(n.a-r.a)*e)}},{key:"lighten",value:function(r){var n=o.lighten(this.toArray(),r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}},{key:"darken",value:function(r){this.lighten(-r)}},{key:"set",value:function(r,n,e,t){var a=Array.isArray(r)?r[0]:r,s=Array.isArray(r)?r[1]:n,u=Array.isArray(r)?r[2]:e,l=Array.isArray(r)?r[3]:t;return this.r=Math.round(M.clamp(a,0,255)),this.g=Math.round(M.clamp(s,0,255)),this.b=Math.round(M.clamp(u,0,255)),this.a=l==null?1:M.clamp(l,0,1),this}},{key:"toHex",value:function(){var r=this,n=["r","g","b"].map(function(e){var t=r[e].toString(16);return t.length<2?"0".concat(t):t});return"#".concat(n.join(""))}},{key:"toRGBA",value:function(){return this.toArray()}},{key:"toHSLA",value:function(){return o.rgba2hsla(this.r,this.g,this.b,this.a)}},{key:"toCSS",value:function(r){var n="".concat(this.r,",").concat(this.g,",").concat(this.b,",");return r?"rgb(".concat(n,")"):"rgba(".concat(n,",").concat(this.a,")")}},{key:"toGrey",value:function(){return o.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toString",value:function(){return this.toCSS()}}]),o}();(function(o){function i(x){return new o(x)}o.fromArray=i;function r(x){return new o([].concat(Object(Qe.a)(p(x)),[1]))}o.fromHex=r;function n(x){var N=x.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(N){var j=N[1].split(/\s*,\s*/).map(function(B){return parseInt(B,10)});return new o(j)}return null}o.fromRGBA=n;function e(x,N,j){j<0&&++j,j>1&&--j;var B=6*j;return B<1?x+(N-x)*B:2*j<1?N:3*j<2?x+(N-x)*(2/3-j)*6:x}function t(x){var N=x.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(N){var j=N[2].split(/\s*,\s*/),B=(parseFloat(j[0])%360+360)%360/360,$=parseFloat(j[1])/100,Z=parseFloat(j[2])/100,fe=j[3]==null?1:parseInt(j[3],10);return new o(l(B,$,Z,fe))}return null}o.fromHSLA=t;function a(x){if(x.startsWith("#"))return r(x);if(x.startsWith("rgb"))return n(x);var N=o.named[x];return N?r(N):t(x)}o.fromString=a;function s(x,N){return o.fromArray([x,x,x,N])}o.makeGrey=s;function u(x,N,j,B){var $=Array.isArray(x)?x[0]:x,Z=Array.isArray(x)?x[1]:N,fe=Array.isArray(x)?x[2]:j,de=Array.isArray(x)?x[3]:B,xe=Math.max($,Z,fe),Ae=Math.min($,Z,fe),Ye=(xe+Ae)/2,rt=0,je=0;if(Ae!==xe){var ot=xe-Ae;switch(je=Ye>.5?ot/(2-xe-Ae):ot/(xe+Ae),xe){case $:rt=(Z-fe)/ot+(Z<fe?6:0);break;case Z:rt=(fe-$)/ot+2;break;case fe:rt=($-Z)/ot+4;break;default:break}rt/=6}return[rt,je,Ye,de==null?1:de]}o.rgba2hsla=u;function l(x,N,j,B){var $=Array.isArray(x)?x[0]:x,Z=Array.isArray(x)?x[1]:N,fe=Array.isArray(x)?x[2]:j,de=Array.isArray(x)?x[3]:B,xe=fe<=.5?fe*(Z+1):fe+Z-fe*Z,Ae=2*fe-xe;return[e(Ae,xe,$+1/3)*256,e(Ae,xe,$)*256,e(Ae,xe,$-1/3)*256,de==null?1:de]}o.hsla2rgba=l;function c(x){return new o(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),x?void 0:parseFloat(Math.random().toFixed(2)))}o.random=c;function f(){for(var x="0123456789ABCDEF",N="#",j=0;j<6;j+=1)N+=x[Math.floor(Math.random()*16)];return N}o.randomHex=f;function d(x){return c(x).toString()}o.randomRGBA=d;function v(x,N){if(typeof x=="string"){var j=x[0]==="#",B=p(x),$=Object(Ue.a)(B,3),Z=$[0],fe=$[1],de=$[2];return N?Z*.299+fe*.587+de*.114>186?"#000000":"#ffffff":"".concat(j?"#":"").concat(y(255-Z,255-fe,255-de))}var xe=x[0],Ae=x[1],Ye=x[2],rt=x[3];return N?xe*.299+Ae*.587+Ye*.114>186?[0,0,0,rt]:[255,255,255,rt]:[255-xe,255-Ae,255-Ye,rt]}o.invert=v;function p(x){var N=x.indexOf("#")===0?x:"#".concat(x),j=Number("0x".concat(N.substr(1)));if(!(N.length===4||N.length===7)||Number.isNaN(j))throw new Error("Invalid hex color.");var B=N.length===4?4:8,$=(1<<B)-1,Z=["b","g","r"].map(function(){var fe=j&$;return j>>=B,B===4?17*fe:fe});return[Z[2],Z[1],Z[0]]}function y(x,N,j){var B=function(Z){return Z.length<2?"0".concat(Z):Z};return"".concat(B(x.toString(16))).concat(B(N.toString(16))).concat(B(j.toString(16)))}function C(x,N){return w(x,N)}o.lighten=C;function E(x,N){return w(x,-N)}o.darken=E;function w(x,N){if(typeof x=="string"){var j=x[0]==="#",B=parseInt(j?x.substr(1):x,16),$=M.clamp((B>>16)+N,0,255),Z=M.clamp((B>>8&255)+N,0,255),fe=M.clamp((B&255)+N,0,255);return"".concat(j?"#":"").concat((fe|Z<<8|$<<16).toString(16))}var de=y(x[0],x[1],x[2]),xe=p(w(de,N));return[xe[0],xe[1],xe[2],x[3]]}})(h1||(h1={})),function(o){o.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(h1||(h1={}));var kG=function(){function o(){Object(De.a)(this,o),this.listeners={}}return Object(be.a)(o,[{key:"on",value:function(r,n,e){if(n==null)return this;this.listeners[r]||(this.listeners[r]=[]);var t=this.listeners[r];return t.push(n,e),this}},{key:"once",value:function(r,n,e){var t=this,a=function s(){t.off(r,s);for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return n0.call([n,e],l)};return this.on(r,a,this)}},{key:"off",value:function(r,n,e){if(!(r||n||e))return this.listeners={},this;var t=this.listeners,a=r?[r]:Object.keys(t);return a.forEach(function(s){var u=t[s];if(!!u){if(!(n||e)){delete t[s];return}for(var l=u.length-2;l>=0;l-=2)n&&u[l]!==n||e&&u[l+1]!==e||u.splice(l,2)}}),this}},{key:"trigger",value:function(r){for(var n=!0,e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];if(r!=="*"){var s=this.listeners[r];s!=null&&(n=n0.call(Object(Qe.a)(s),t))}var u=this.listeners["*"];return u!=null?A.toAsyncBoolean([n,n0.call(Object(Qe.a)(u),[r].concat(t))]):n}},{key:"emit",value:function(r){for(var n=arguments.length,e=new Array(n>1?n-1:0),t=1;t<n;t++)e[t-1]=arguments[t];return this.trigger.apply(this,[r].concat(e))}}]),o}(),n0;(function(o){function i(r,n){for(var e=[],t=0;t<r.length;t+=2){var a=r[t],s=r[t+1],u=Array.isArray(n)?n:[n],l=A.apply(a,s,u);e.push(l)}return A.toAsyncBoolean(e)}o.call=i})(n0||(n0={}));var _c=function(){function o(){Object(De.a)(this,o)}return Object(be.a)(o,[{key:"disposed",get:function(){return this._disposed===!0}},{key:"dispose",value:function(){this._disposed=!0}}]),o}();(function(o){function i(){return function(r,n,e){var t=e.value,a=r.__proto__;e.value=function(){this.disposed||(t.call(this),a.dispose.call(this))}}}o.dispose=i})(_c||(_c={}));var $Q=function(){function o(i){Object(De.a)(this,o),this.callback=i}return Object(be.a)(o,[{key:"disposed",get:function(){return!this.callback}},{key:"dispose",value:function(){if(!!this.callback){var r=this.callback;this.callback=null,r()}}}]),o}(),$P=function(){function o(){Object(De.a)(this,o),this.isDisposed=!1,this.items=new Set}return Object(be.a)(o,[{key:"disposed",get:function(){return this.isDisposed}},{key:"dispose",value:function(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(function(r){r.dispose()}),this.items.clear())}},{key:"contains",value:function(r){return this.items.has(r)}},{key:"add",value:function(r){this.items.add(r)}},{key:"remove",value:function(r){this.items.delete(r)}},{key:"clear",value:function(){this.items.clear()}}]),o}();(function(o){function i(r){var n=new o;return r.forEach(function(e){n.add(e)}),n}o.from=i})($P||($P={}));var nu=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r)}(kG);(function(o){o.dispose=_c.dispose})(nu||(nu={})),m.applyMixins(nu,_c);var XP=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"disabled",get:function(){return this._disabled===!0}},{key:"enable",value:function(){delete this._disabled}},{key:"disable",value:function(){this._disabled=!0}}]),r}(nu),DG=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},v1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.call(this),n.clear(),n}return Object(be.a)(r,[{key:"clear",value:function(){this.map=new WeakMap,this.arr=[]}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){this.map.set(e,t),this.arr.push(e)}},{key:"delete",value:function(e){var t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);var a=this.map.get(e);return this.map.delete(e),a}},{key:"each",value:function(e){var t=this;this.arr.forEach(function(a){var s=t.map.get(a);e(s,a)})}},{key:"dispose",value:function(){this.clear()}}]),r}(_c);DG([_c.dispose()],v1.prototype,"dispose",null);var nS=function(){function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(De.a)(this,o),this.comparator=i.comparator||o.defaultComparator,this.index={},this.data=i.data||[],this.heapify()}return Object(be.a)(o,[{key:"isEmpty",value:function(){return this.data.length===0}},{key:"insert",value:function(r,n,e){var t={priority:r,value:n},a=this.data.length;return e&&(t.id=e,this.index[e]=a),this.data.push(t),this.bubbleUp(a),this}},{key:"peek",value:function(){return this.data[0]?this.data[0].value:null}},{key:"peekPriority",value:function(){return this.data[0]?this.data[0].priority:null}},{key:"updatePriority",value:function(r,n){var e=this.index[r];if(typeof e=="undefined")throw new Error("Node with id '".concat(r,"' was not found in the heap."));var t=this.data,a=t[e].priority,s=this.comparator(n,a);s<0?(t[e].priority=n,this.bubbleUp(e)):s>0&&(t[e].priority=n,this.bubbleDown(e))}},{key:"remove",value:function(){var r=this.data,n=r[0],e=r.pop();return n.id&&delete this.index[n.id],r.length>0&&(r[0]=e,e.id&&(this.index[e.id]=0),this.bubbleDown(0)),n?n.value:null}},{key:"heapify",value:function(){for(var r=0;r<this.data.length;r+=1)this.bubbleUp(r)}},{key:"bubbleUp",value:function(r){for(var n=this.data,e,t,a=r;a>0&&(t=a-1>>>1,this.comparator(n[a].priority,n[t].priority)<0);){e=n[t],n[t]=n[a];var s=n[a].id;s!=null&&(this.index[s]=t),n[a]=e,s=n[a].id,s!=null&&(this.index[s]=a),a=t}}},{key:"bubbleDown",value:function(r){for(var n=this.data,e=n.length-1,t=r;;){var a=(t<<1)+1,s=a+1,u=t;if(a<=e&&this.comparator(n[a].priority,n[u].priority)<0&&(u=a),s<=e&&this.comparator(n[s].priority,n[u].priority)<0&&(u=s),u!==t){var l=n[u];n[u]=n[t];var c=n[t].id;c!=null&&(this.index[c]=u),n[t]=l,c=n[t].id,c!=null&&(this.index[c]=t),t=u}else break}}}]),o}();(function(o){o.defaultComparator=function(i,r){return i-r}})(nS||(nS={}));var rS;(function(o){function i(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(p,y){return 1},t={},a={},s={},u=new nS;for(t[n]=0,Object.keys(r).forEach(function(p){p!==n&&(t[p]=Infinity),u.insert(t[p],p,p)});!u.isEmpty();){var l=u.remove();s[l]=!0;for(var c=r[l]||[],f=0;f<c.length;f+=1){var d=c[f];if(!s[d]){var v=t[l]+e(l,d);v<t[d]&&(t[d]=v,a[d]=l,u.updatePriority(d,v))}}}return a}o.run=i})(rS||(rS={}));var Av;(function(o){o.linear=function(i){return i},o.quad=function(i){return i*i},o.cubic=function(i){return i*i*i},o.inout=function(i){if(i<=0)return 0;if(i>=1)return 1;var r=i*i,n=r*i;return 4*(i<.5?n:3*(i-r)+n-.75)},o.exponential=function(i){return Math.pow(2,10*(i-1))},o.bounce=function(i){for(var r=0,n=1;;r+=n,n/=2)if(i>=(7-4*r)/11){var e=(11-6*r-11*i)/4;return-e*e+n*n}}})(Av||(Av={})),function(o){o.decorators={reverse:function(r){return function(n){return 1-r(1-n)}},reflect:function(r){return function(n){return .5*(n<.5?r(2*n):2-r(2-2*n))}},clamp:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return function(t){var a=r(t);return a<n?n:a>e?e:a}},back:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.70158;return function(n){return n*n*((r+1)*n-r)}},elastic:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.5;return function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*r/3*n)}}}}(Av||(Av={})),function(o){function i(je){return-1*Math.cos(je*(Math.PI/2))+1}o.easeInSine=i;function r(je){return Math.sin(je*(Math.PI/2))}o.easeOutSine=r;function n(je){return-.5*(Math.cos(Math.PI*je)-1)}o.easeInOutSine=n;function e(je){return je*je}o.easeInQuad=e;function t(je){return je*(2-je)}o.easeOutQuad=t;function a(je){return je<.5?2*je*je:-1+(4-2*je)*je}o.easeInOutQuad=a;function s(je){return je*je*je}o.easeInCubic=s;function u(je){var ot=je-1;return ot*ot*ot+1}o.easeOutCubic=u;function l(je){return je<.5?4*je*je*je:(je-1)*(2*je-2)*(2*je-2)+1}o.easeInOutCubic=l;function c(je){return je*je*je*je}o.easeInQuart=c;function f(je){var ot=je-1;return 1-ot*ot*ot*ot}o.easeOutQuart=f;function d(je){var ot=je-1;return je<.5?8*je*je*je*je:1-8*ot*ot*ot*ot}o.easeInOutQuart=d;function v(je){return je*je*je*je*je}o.easeInQuint=v;function p(je){var ot=je-1;return 1+ot*ot*ot*ot*ot}o.easeOutQuint=p;function y(je){var ot=je-1;return je<.5?16*je*je*je*je*je:1+16*ot*ot*ot*ot*ot}o.easeInOutQuint=y;function C(je){return je===0?0:Math.pow(2,10*(je-1))}o.easeInExpo=C;function E(je){return je===1?1:-Math.pow(2,-10*je)+1}o.easeOutExpo=E;function w(je){if(je===0||je===1)return je;var ot=je*2,Ft=ot-1;return ot<1?.5*Math.pow(2,10*Ft):.5*(-Math.pow(2,-10*Ft)+2)}o.easeInOutExpo=w;function x(je){var ot=je/1;return-1*(Math.sqrt(1-ot*je)-1)}o.easeInCirc=x;function N(je){var ot=je-1;return Math.sqrt(1-ot*ot)}o.easeOutCirc=N;function j(je){var ot=je*2,Ft=ot-2;return ot<1?-.5*(Math.sqrt(1-ot*ot)-1):.5*(Math.sqrt(1-Ft*Ft)+1)}o.easeInOutCirc=j;function B(je){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158;return je*je*((ot+1)*je-ot)}o.easeInBack=B;function $(je){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,Ft=je/1-1;return Ft*Ft*((ot+1)*Ft+ot)+1}o.easeOutBack=$;function Z(je){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,Ft=je*2,hn=Ft-2,In=ot*1.525;return Ft<1?.5*Ft*Ft*((In+1)*Ft-In):.5*(hn*hn*((In+1)*hn+In)+2)}o.easeInOutBack=Z;function fe(je){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7;if(je===0||je===1)return je;var Ft=je/1,hn=Ft-1,In=1-ot,xn=In/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*hn)*Math.sin((hn-xn)*(2*Math.PI)/In))}o.easeInElastic=fe;function de(je){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7,Ft=1-ot,hn=je*2;if(je===0||je===1)return je;var In=Ft/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*hn)*Math.sin((hn-In)*(2*Math.PI)/Ft)+1}o.easeOutElastic=de;function xe(je){var ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.65,Ft=1-ot;if(je===0||je===1)return je;var hn=je*2,In=hn-1,xn=Ft/(2*Math.PI)*Math.asin(1);return hn<1?-.5*(Math.pow(2,10*In)*Math.sin((In-xn)*(2*Math.PI)/Ft)):Math.pow(2,-10*In)*Math.sin((In-xn)*(2*Math.PI)/Ft)*.5+1}o.easeInOutElastic=xe;function Ae(je){var ot=je/1;if(ot<1/2.75)return 7.5625*ot*ot;if(ot<2/2.75){var Ft=ot-1.5/2.75;return 7.5625*Ft*Ft+.75}if(ot<2.5/2.75){var hn=ot-2.25/2.75;return 7.5625*hn*hn+.9375}{var In=ot-2.625/2.75;return 7.5625*In*In+.984375}}o.easeOutBounce=Ae;function Ye(je){return 1-Ae(1-je)}o.easeInBounce=Ye;function rt(je){return je<.5?Ye(je*2)*.5:Ae(je*2-1)*.5+.5}o.easeInOutBounce=rt}(Av||(Av={}));var Pv;(function(o){o.number=function(i,r){var n=r-i;return function(e){return i+n*e}},o.object=function(i,r){var n=Object.keys(i);return function(e){for(var t={},a=n.length-1;a!==-1;a-=1){var s=n[a];t[s]=i[s]+(r[s]-i[s])*e}return t}},o.unit=function(i,r){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,e=n.exec(i),t=n.exec(r),a=t?t[1]:"",s=e?+e[1]:0,u=t?+t[1]:0,l=a.indexOf("."),c=l>0?a[1].length-l-1:0,f=u-s,d=e?e[2]:"";return function(v){return(s+f*v).toFixed(c)+d}},o.color=function(i,r){var n=parseInt(i.slice(1),16),e=parseInt(r.slice(1),16),t=n&255,a=(e&255)-t,s=n&65280,u=(e&65280)-s,l=n&16711680,c=(e&16711680)-l;return function(f){var d=t+a*f&255,v=s+u*f&65280,p=l+c*f&16711680;return"#".concat((1<<24|d|v|p).toString(16).slice(1))}}})(Pv||(Pv={}));var KP;(function(o){var i="".concat(Tl.prefixCls,".storage");function r(f,d,v){var p=d.id||_.uniqueId("doc-"),y=u(f);y.keys.push(p),a(l(f,p),d),a(c(f),y),t(v,null,Object.assign(Object.assign({},d),{id:p}))}o.insert=r;function n(f,d,v){var p=u(f),y=[];if(d==null)p.keys.forEach(function(E){var w=s(l(f,E));w?y.push(w):t(v,new Error("No document found for an ID '".concat(E,"' from index.")))}),t(v,null,y);else if(d.id){var C=s(l(f,d.id));t(v,null,C?[C]:[])}else t(v,null,[])}o.find=n;function e(f,d,v){var p=u(f);if(d==null)p.keys.forEach(function(C){localStorage.removeItem(l(f,C))}),localStorage.removeItem(c(f)),t(v,null);else if(d.id){var y=p.keys.indexOf(d.id);y>=0&&p.keys.splice(y,1),localStorage.removeItem(l(f,d.id)),a(c(f),p),t(v,null)}}o.remove=e;function t(f,d,v){f&&A.defer(function(){f(d,v)})}function a(f,d){localStorage.setItem(f,JSON.stringify(d))}function s(f){var d=localStorage.getItem(f);return d?JSON.parse(d):null}function u(f){var d=s(c(f));return d?(d.keys==null&&(d.keys=[]),d):{keys:[]}}function l(f,d){return"".concat(i,".").concat(f,".docs.").concat(d)}function c(f){return"".concat(i,".").concat(f,".index")}})(KP||(KP={}));var Ai=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.call(this),n.cid=aS.uniqueId(),r.views[n.cid]=Object(Vo.a)(n),n}return Object(be.a)(r,[{key:"priority",get:function(){return 2}},{key:"confirmUpdate",value:function(e,t){return 0}},{key:"$",value:function(e){return r.$(e)}},{key:"empty",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).empty(),this}},{key:"unmount",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).remove(),this}},{key:"remove",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete r.views[this.cid]),this.unmount(e),this}},{key:"onRemove",value:function(){}},{key:"setClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;t.classList.value=Array.isArray(e)?e.join(" "):e}},{key:"addClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}},{key:"removeClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}},{key:"setStyle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).css(e),this}},{key:"setAttrs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return e!=null&&t!=null&&(t instanceof SVGElement?R.attr(t,e):this.$(t).attr(e)),this}},{key:"findAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,a=t;a&&a.nodeType===1;){var s=a.getAttribute(e);if(s!=null)return s;if(a===this.container)return null;a=a.parentNode}return null}},{key:"find",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors;return r.find(e,t,a).elems}},{key:"findOne",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors,s=this.find(e,t,a);return s.length>0?s[0]:null}},{key:"findByAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,a=t;a&&a.getAttribute;){var s=a.getAttribute(e);if((s!=null||a===this.container)&&s!=="false")return a;a=a.parentNode}return null}},{key:"getSelector",value:function(e,t){var a;if(e===this.container)return typeof t=="string"&&(a="> ".concat(t)),a;if(e){var s=R.index(e)+1;a="".concat(e.tagName.toLowerCase(),":nth-child(").concat(s,")"),t&&(a+=" > ".concat(t)),a=this.getSelector(e.parentNode,a)}return a}},{key:"prefixClassName",value:function(e){return ts.prefix(e)}},{key:"delegateEvents",value:function(e,t){var a=this;if(e==null)return this;t||this.undelegateEvents();var s=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(function(u){var l=u.match(s);if(l!=null){var c=a.getEventHandler(e[u]);typeof c=="function"&&a.delegateEvent(l[1],l[2],c)}}),this}},{key:"undelegateEvents",value:function(){return this.$(this.container).off(this.getEventNamespace()),this}},{key:"delegateDocumentEvents",value:function(e,t){return this.addEventListeners(document,e,t),this}},{key:"undelegateDocumentEvents",value:function(){return this.removeEventListeners(document),this}},{key:"delegateEvent",value:function(e,t,a){return this.$(this.container).on(e+this.getEventNamespace(),t,a),this}},{key:"undelegateEvent",value:function(e,t,a){var s=e+this.getEventNamespace();return t==null?this.$(this.container).off(s):typeof t=="string"?this.$(this.container).off(s,t,a):this.$(this.container).off(s,t),this}},{key:"addEventListeners",value:function(e,t,a){var s=this;if(t==null)return this;var u=this.getEventNamespace(),l=this.$(e);return Object.keys(t).forEach(function(c){var f=s.getEventHandler(t[c]);typeof f=="function"&&l.on(c+u,a,f)}),this}},{key:"removeEventListeners",value:function(e){return e!=null&&this.$(e).off(this.getEventNamespace()),this}},{key:"getEventNamespace",value:function(){return".".concat(Tl.prefixCls,"-event-").concat(this.cid)}},{key:"getEventHandler",value:function(e){var t=this,a;if(typeof e=="string"){var s=this[e];typeof s=="function"&&(a=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return s.call.apply(s,[t].concat(c))})}else a=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.call.apply(e,[t].concat(c))};return a}},{key:"getEventTarget",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.target,s=e.type,u=e.clientX,l=u===void 0?0:u,c=e.clientY,f=c===void 0?0:c;return t.fromPoint||s==="touchmove"||s==="touchend"?document.elementFromPoint(l,f):a}},{key:"stopPropagation",value:function(e){return this.setEventData(e,{propagationStopped:!0}),this}},{key:"isPropagationStopped",value:function(e){return this.getEventData(e).propagationStopped===!0}},{key:"getEventData",value:function(e){return this.eventData(e)}},{key:"setEventData",value:function(e,t){return this.eventData(e,t)}},{key:"eventData",value:function(e,t){if(e==null)throw new TypeError("Event object required");var a=e.data,s="__".concat(this.cid,"__");return t==null?a==null?{}:a[s]||{}:(a==null&&(a=e.data={}),a[s]==null?a[s]=Object.assign({},t):a[s]=Object.assign(Object.assign({},a[s]),t),a[s])}},{key:"normalizeEvent",value:function(e){return r.normalizeEvent(e)}}]),r}(nu);(function(o){function i(t){return ln()(t)}o.$=i;function r(t,a){return a?R.createSvgElement(t||"g"):R.createElementNS(t||"div")}o.createElement=r;function n(t,a,s){if(!t||t===".")return{elems:[a]};if(s){var u=s[t];if(u)return{elems:Array.isArray(u)?u:[u]}}return Tl.useCSSSelector?{isCSSSelector:!0,elems:i(a).find(t).toArray()}:{elems:[]}}o.find=n;function e(t){var a=t,s=t.originalEvent,u=s&&s.changedTouches&&s.changedTouches[0];if(u){for(var l in t)u[l]===void 0&&(u[l]=t[l]);a=u}var c=a.target;if(c){var f=c.correspondingUseElement;f&&(a.target=f)}return a}o.normalizeEvent=e})(Ai||(Ai={})),function(o){o.views={};function i(r){return o.views[r]||null}o.getView=i}(Ai||(Ai={}));var aS;(function(o){var i=0;function r(){var n="v".concat(i);return i+=1,n}o.uniqueId=r})(aS||(aS={}));var IG=function(i){return i};function YP(o,i){return i===0?"0%":"".concat(Math.round(o/i*100),"%")}function ZP(o){var i=function(n,e,t,a){return e.isEdgeElement(t)?NG(o,n,e,t,a):RG(o,n,e,t,a)};return i}function RG(o,i,r,n,e){var t=r.cell,a=t.getAngle(),s=r.getUnrotatedBBoxOfElement(n),u=t.getBBox().getCenter(),l=mt.create(e).rotate(a,u),c=l.x-s.x,f=l.y-s.y;return o&&(c=YP(c,s.width),f=YP(f,s.height)),i.anchor={name:"topLeft",args:{dx:c,dy:f,rotate:!0}},i}function NG(o,i,r,n,e){var t=r.getConnection();if(!t)return i;var a=t.closestPointLength(e);if(o){var s=t.length();i.anchor={name:"ratio",args:{ratio:a/s}}}else i.anchor={name:"length",args:{length:a}};return i}var jG=ZP(!0),LG=ZP(!1),kv;(function(o){o.presets=ee,o.registry=Io.create({type:"connection strategy"}),o.registry.register(o.presets,!0)})(kv||(kv={}));var _G=function(){function o(i){Object(De.a)(this,o),this.view=i,this.clean()}return Object(be.a)(o,[{key:"clean",value:function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new v1,this.pathCache={}}},{key:"get",value:function(r){var n=this.elemCache;return n.has(r)||this.elemCache.set(r,{}),this.elemCache.get(r)}},{key:"getData",value:function(r){var n=this.get(r);return n.data||(n.data={}),n.data}},{key:"getMatrix",value:function(r){var n=this.get(r);if(n.matrix==null){var e=this.view.rotatableNode||this.view.container;n.matrix=R.getTransformToElement(r,e)}return R.createSVGMatrix(n.matrix)}},{key:"getShape",value:function(r){var n=this.get(r);return n.shape==null&&(n.shape=R.toGeometryShape(r)),n.shape.clone()}},{key:"getBoundingRect",value:function(r){var n=this.get(r);return n.boundingRect==null&&(n.boundingRect=R.getBBox(r)),n.boundingRect.clone()}}]),o}(),ci;(function(o){function i(c){return c!=null&&!r(c)}o.isJSONMarkup=i;function r(c){return c!=null&&typeof c=="string"}o.isStringMarkup=r;function n(c){return c==null||r(c)?c:m.cloneDeep(c)}o.clone=n;function e(c){return"".concat(c).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}o.sanitize=e;function t(c){var f=document.createDocumentFragment(),d={},v={},p=e(c),y=_.sanitizeHTML(p,{raw:!0});return y.forEach(function(C){f.appendChild(C)}),{fragment:f,selectors:v,groups:d}}o.parseStringMarkup=t;function a(c){for(var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:R.ns.svg},d=document.createDocumentFragment(),v={},p={},y=[{markup:Array.isArray(c)?c:[c],parent:d,ns:f.ns}],C=function(){var w=y.pop(),x=w.ns||R.ns.svg,N=w.markup,j=w.parent;N.forEach(function(B){var $=B.tagName;if(!$)throw new TypeError("Invalid tagName");B.ns&&(x=B.ns);var Z=x===R.ns.svg,fe=x?R.createElementNS($,x):R.createElement($),de=B.attrs;de&&(Z?R.attr(fe,R.kebablizeAttrs(de)):ln()(fe).attr(de));var xe=B.style;xe&&ln()(fe).css(xe);var Ae=B.className;Ae!=null&&fe.setAttribute("class",Array.isArray(Ae)?Ae.join(" "):Ae),B.textContent&&(fe.textContent=B.textContent);var Ye=B.selector;if(Ye!=null){if(p[Ye])throw new TypeError("Selector must be unique");p[Ye]=fe}if(B.groupSelector){var rt=B.groupSelector;Array.isArray(rt)||(rt=[rt]),rt.forEach(function(ot){v[ot]||(v[ot]=[]),v[ot].push(fe)})}j.appendChild(fe);var je=B.children;Array.isArray(je)&&y.push({ns:x,markup:je,parent:fe})})};y.length>0;)C();return Object.keys(v).forEach(function(E){if(p[E])throw new Error("Ambiguous group selector");p[E]=v[E]}),{fragment:d,selectors:p,groups:v}}o.parseJSONMarkup=a;function s(c){return c instanceof SVGElement?R.createSvgElement("g"):R.createElement("div")}function u(c){if(r(c)){var f=ja.createVectors(c),d=f.length;if(d===1)return{elem:f[0].node};if(d>1){var v=s(f[0].node);return f.forEach(function(E){v.appendChild(E.node)}),{elem:v}}return{}}var p=a(c),y=p.fragment,C=null;return y.childNodes.length>1?(C=s(y.firstChild),C.appendChild(y)):C=y.firstChild,{elem:C,selectors:p.selectors}}o.renderMarkup=u;function l(c){for(var f=ja.createVectors(c),d=document.createDocumentFragment(),v=0,p=f.length;v<p;v+=1){var y=f[v].node;d.appendChild(y)}return{fragment:d,selectors:{}}}o.parseLabelStringMarkup=l})(ci||(ci={})),function(o){function i(e,t,a){if(e!=null){var s,u=e.tagName.toLowerCase();if(e===t)return typeof a=="string"?s="> ".concat(u," > ").concat(a):s="> ".concat(u),s;var l=e.parentNode;if(l&&l.childNodes.length>1){var c=R.index(e)+1;s="".concat(u,":nth-child(").concat(c,")")}else s=u;return a&&(s+=" > ".concat(a)),i(e.parentNode,t,s)}return a}o.getSelector=i;function r(e,t,a){if(e.nodeName==="#text")return null;var s=null,u=null,l=null,c=!1,f={tagName:e.tagName};if(e.attributes){l={};for(var d=0,v=e.attributes.length;d<v;d+=1){var p=e.attributes[d],y=p.nodeName,C=p.nodeValue;y==="selector"?s=C:y==="groupSelector"?u=C:y==="class"?f.attrs={class:C}:l[y]=C}}return s==null&&(c=!0,s=i(e,t)),e.namespaceURI&&(f.ns=e.namespaceURI),f.ns==null&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(e.tagName)?f.ns=R.ns.xhtml:a&&(f.ns=a)),s&&(f.selector=s),u!=null&&(f.groupSelector=u),{markup:f,attrs:l,isCSSSelector:c}}function n(e){var t=o.sanitize(e),a=R.parseXML(t,{mimeType:"image/svg+xml"}),s=Array.prototype.slice.call(a.childNodes),u={},l=new WeakMap,c=function d(v,p,y){var C=r(v,p,y);if(C==null){var E=l.get(v.parentNode);E&&v.textContent&&(E.textContent=v.textContent)}else{var w=C.markup,x=C.attrs,N=C.isCSSSelector;if(l.set(v,w),w.selector&&x!=null&&(Object.keys(x).length&&(u[w.selector]=x),N&&delete w.selector),v.childNodes&&v.childNodes.length>0)for(var j=0,B=v.childNodes.length;j<B;j+=1){var $=v.childNodes[j],Z=d($,p,w.ns);Z&&(w.children==null&&(w.children=[]),w.children.push(Z))}return w}},f=s.map(function(d){return c(d,d)}).filter(function(d){return d!=null});return{markup:f,attrs:u}}o.xml2json=n}(ci||(ci={})),function(o){function i(){return"g"}o.getPortContainerMarkup=i;function r(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}o.getPortMarkup=r;function n(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}o.getPortLabelMarkup=n}(ci||(ci={})),function(o){function i(){return o.sanitize(`
    <path class="connection" stroke="black" d="M 0 0 0 0"/>
    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="connection-wrap" d="M 0 0 0 0"/>
    <g class="labels"/>
    <g class="vertices"/>
    <g class="arrowheads"/>
    <g class="tools"/>
  `)}o.getEdgeMarkup=i;function r(){return o.sanitize(`
    <g class="edge-tool">
      <g class="tool-remove" event="edge:remove">
        <circle r="11" />
        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />
        <title>Remove edge.</title>
      </g>
      <g class="tool-options" event="edge:options">
        <circle r="11" transform="translate(25)"/>
        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>
        <title>Edge options.</title>
      </g>
    </g>
  `)}o.getEdgeToolMarkup=r;function n(){return o.sanitize(`
    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">
      <circle class="vertex" data-index="<%= index %>" r="10" />
      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>
      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">
      <title>Remove vertex.</title>
      </path>
    </g>
  `)}o.getEdgeVertexMarkup=n;function e(){return o.sanitize(`
    <g class="arrowhead-group arrowhead-group-<%= end %>">
      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />
    </g>
  `)}o.getEdgeArrowheadMarkup=e}(ci||(ci={})),function(o){function i(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return{tagName:"foreignObject",selector:"fo",children:[{ns:R.ns.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:R.ns.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:r?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}o.getForeignObjectMarkup=i}(ci||(ci={}));var g1=function(){function o(i){Object(De.a)(this,o),this.view=i}return Object(be.a)(o,[{key:"cell",get:function(){return this.view.cell}},{key:"getDefinition",value:function(r){return this.cell.getAttrDefinition(r)}},{key:"processAttrs",value:function(r,n){var e=this,t,a,s,u,l,c=[];return Object.keys(n).forEach(function(f){var d=n[f],v=e.getDefinition(f),p=A.call(Lc.isValidDefinition,e.view,v,d,{elem:r,attrs:n,cell:e.cell,view:e.view});if(v&&p)typeof v=="string"?(t==null&&(t={}),t[v]=d):d!==null&&c.push({name:f,definition:v});else{t==null&&(t={});var y=R.CASE_SENSITIVE_ATTR.includes(f)?f:_.kebabCase(f);t[y]=d}}),c.forEach(function(f){var d=f.name,v=f.definition,p=n[d],y=v;typeof y.set=="function"&&(!R.isHTMLElement(r)&&o.DELAY_ATTRS.includes(d)?(l==null&&(l={}),l[d]=p):(a==null&&(a={}),a[d]=p));var C=v;typeof C.offset=="function"&&(s==null&&(s={}),s[d]=p);var E=v;typeof E.position=="function"&&(u==null&&(u={}),u[d]=p)}),{raw:n,normal:t,set:a,offset:s,position:u,delay:l}}},{key:"mergeProcessedAttrs",value:function(r,n){r.set=Object.assign(Object.assign({},r.set),n.set),r.position=Object.assign(Object.assign({},r.position),n.position),r.offset=Object.assign(Object.assign({},r.offset),n.offset);var e=r.normal&&r.normal.transform;e!=null&&n.normal&&(n.normal.transform=e),r.normal=n.normal}},{key:"findAttrs",value:function(r,n,e,t){var a=[],s=new v1;return Object.keys(r).forEach(function(u){var l=r[u];if(!!m.isPlainObject(l)){var c=Ai.find(u,n,t),f=c.isCSSSelector,d=c.elems;e[u]=d;for(var v=0,p=d.length;v<p;v+=1){var y=d[v],C=t&&t[u]===y,E=s.get(y);if(E){E.array||(a.push(y),E.array=!0,E.attrs=[E.attrs],E.priority=[E.priority]);var w=E.attrs,x=E.priority;if(C)w.unshift(l),x.unshift(-1);else{var N=I.sortedIndex(x,f?-1:p);w.splice(N,0,l),x.splice(N,0,p)}}else s.set(y,{elem:y,attrs:l,priority:C?-1:p,array:!1})}}}),a.forEach(function(u){var l=s.get(u),c=l.attrs;l.attrs=c.reduceRight(function(f,d){return m.merge(f,d)},{})}),s}},{key:"updateRelativeAttrs",value:function(r,n,e,t){var a=this,s=n.raw||{},u=n.normal||{},l=n.set,c=n.position,f=n.offset,d=n.delay,v=function(){return{elem:r,cell:a.cell,view:a.view,attrs:s,refBBox:e.clone()}};if(l!=null&&Object.keys(l).forEach(function(de){var xe=l[de],Ae=a.getDefinition(de);if(Ae!=null){var Ye=A.call(Ae.set,a.view,xe,v());typeof Ye=="object"?u=Object.assign(Object.assign({},u),Ye):Ye!=null&&(u[de]=Ye)}}),R.isHTMLElement(r)){this.view.setAttrs(u,r);return}var p=u.transform,y=p?"".concat(p):null,C=R.transformStringToMatrix(y),E=new mt(C.e,C.f);p&&(delete u.transform,C.e=0,C.f=0);var w=1,x=1;if(c||f){var N=this.view.getScaleOfElement(r,t.scalableNode);w=N.sx,x=N.sy}var j=!1;c!=null&&Object.keys(c).forEach(function(de){var xe=c[de],Ae=a.getDefinition(de);if(Ae!=null){var Ye=A.call(Ae.position,a.view,xe,v());Ye!=null&&(j=!0,E.translate(mt.create(Ye).scale(w,x)))}}),this.view.setAttrs(u,r);var B=!1;if(f!=null){var $=this.view.getBoundingRectOfElement(r);if($.width>0&&$.height>0){var Z=R.transformRectangle($,C).scale(1/w,1/x);Object.keys(f).forEach(function(de){var xe=f[de],Ae=a.getDefinition(de);if(Ae!=null){var Ye=A.call(Ae.offset,a.view,xe,{elem:r,cell:a.cell,view:a.view,attrs:s,refBBox:Z});Ye!=null&&(B=!0,E.translate(mt.create(Ye).scale(w,x)))}})}}(p!=null||j||B)&&(E.round(1),C.e=E.x,C.f=E.y,r.setAttribute("transform",R.matrixToTransformString(C)));var fe=function(){d!=null&&Object.keys(d).forEach(function(xe){var Ae=d[xe],Ye=a.getDefinition(xe);if(Ye!=null){var rt=A.call(Ye.set,a.view,Ae,v());typeof rt=="object"?a.view.setAttrs(rt,r):rt!=null&&a.view.setAttrs(Object(Xe.a)({},xe,rt),r)}})};t.forceSync?fe():qm.scheduleTask(fe)}},{key:"update",value:function(r,n,e){var t=this,a={},s=this.findAttrs(e.attrs||n,r,a,e.selectors),u=e.attrs?this.findAttrs(n,r,a,e.selectors):s,l=[];s.each(function(d){var v=d.elem,p=d.attrs,y=t.processAttrs(v,p);if(y.set==null&&y.position==null&&y.offset==null&&y.delay==null)t.view.setAttrs(y.normal,v);else{var C=u.get(v),E=C?C.attrs:null,w=E&&p.ref==null?E.ref:p.ref,x;if(w){if(x=(a[w]||t.view.find(w,r,e.selectors))[0],!x)throw new Error('"'.concat(w,'" reference does not exist.'))}else x=null;var N={node:v,refNode:x,attributes:E,processedAttributes:y},j=l.findIndex(function(B){return B.refNode===v});j>-1?l.splice(j,0,N):l.push(N)}});var c=new v1,f;l.forEach(function(d){var v=d.node,p=d.refNode,y,C=p!=null&&e.rotatableNode!=null&&R.contains(e.rotatableNode,p);if(p&&(y=c.get(p)),!y){var E=C?e.rotatableNode:r;y=p?R.getBBox(p,{target:E}):e.rootBBox,p&&c.set(p,y)}var w;e.attrs&&d.attributes?(w=t.processAttrs(v,d.attributes),t.mergeProcessedAttrs(w,d.processedAttributes)):w=d.processedAttributes;var x=y;C&&e.rotatableNode!=null&&!e.rotatableNode.contains(v)&&(f||(f=R.transformStringToMatrix(R.attr(e.rotatableNode,"transform"))),x=R.transformRectangle(y,f));var N=l.find(function(j){return j.refNode===v});N&&(e.forceSync=!0),t.updateRelativeAttrs(v,w,x,e)})}}]),o}();(function(o){o.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"]})(g1||(g1={}));var JP=function(){function o(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];Object(De.a)(this,o),this.view=i;var e={},t={},a=0;Object.keys(r).forEach(function(u){var l=r[u];Array.isArray(l)||(l=[l]),l.forEach(function(c){var f=e[c];f||(a+=1,f=e[c]=1<<a),t[u]|=f})});var s=n;if(Array.isArray(s)||(s=[s]),s.forEach(function(u){e[u]||(a+=1,e[u]=1<<a)}),a>25)throw new Error("Maximum number of flags exceeded.");this.flags=e,this.attrs=t,this.bootstrap=n}return Object(be.a)(o,[{key:"cell",get:function(){return this.view.cell}},{key:"getFlag",value:function(r){var n=this.flags;return n==null?0:Array.isArray(r)?r.reduce(function(e,t){return e|n[t]},0):n[r]|0}},{key:"hasAction",value:function(r,n){return r&this.getFlag(n)}},{key:"removeAction",value:function(r,n){return r^r&this.getFlag(n)}},{key:"getBootstrapFlag",value:function(){return this.getFlag(this.bootstrap)}},{key:"getChangedFlag",value:function(){var r=this,n=0;return this.attrs&&Object.keys(this.attrs).forEach(function(e){r.cell.hasChanged(e)&&(n|=r.attrs[e])}),n}}]),o}(),FG=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Ho=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(e){var t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(De.a)(this,n),t=r.call(this),t.cell=e,t.options=t.ensureOptions(a),t.graph=t.options.graph,t.attr=new g1(Object(Vo.a)(t)),t.flag=new JP(Object(Vo.a)(t),t.options.actions,t.options.bootstrap),t.cache=new _G(Object(Vo.a)(t)),t.setContainer(t.ensureContainer()),t.setup(),t.$(t.container).data("view",Object(Vo.a)(t)),t.init(),t}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"init",value:function(){}},{key:"onRemove",value:function(){this.removeTools()}},{key:"priority",get:function(){return this.options.priority}},{key:"rootSelector",get:function(){return this.options.rootSelector}},{key:"getConstructor",value:function(){return this.constructor}},{key:"ensureOptions",value:function(t){return this.getConstructor().getOptions(t)}},{key:"getContainerTagName",value:function(){return this.options.isSvgElement?"g":"div"}},{key:"getContainerStyle",value:function(){}},{key:"getContainerAttrs",value:function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}},{key:"getContainerClassName",value:function(){return this.prefixClassName("cell")}},{key:"ensureContainer",value:function(){return Ai.createElement(this.getContainerTagName(),this.options.isSvgElement)}},{key:"setContainer",value:function(t){if(this.container!==t){this.undelegateEvents(),this.container=t,this.options.events!=null&&this.delegateEvents(this.options.events);var a=this.getContainerAttrs();a!=null&&this.setAttrs(a,t);var s=this.getContainerStyle();s!=null&&this.setStyle(s,t);var u=this.getContainerClassName();u!=null&&this.addClass(u,t)}return this}},{key:"isNodeView",value:function(){return!1}},{key:"isEdgeView",value:function(){return!1}},{key:"render",value:function(){return this}},{key:"confirmUpdate",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return 0}},{key:"getBootstrapFlag",value:function(){return this.flag.getBootstrapFlag()}},{key:"getFlag",value:function(t){return this.flag.getFlag(t)}},{key:"hasAction",value:function(t,a){return this.flag.hasAction(t,a)}},{key:"removeAction",value:function(t,a){return this.flag.removeAction(t,a)}},{key:"handleAction",value:function(t,a,s,u){if(this.hasAction(t,a)){s();var l=[a];return u&&(typeof u=="string"?l.push(u):l.push.apply(l,Object(Qe.a)(u))),this.removeAction(t,l)}return t}},{key:"setup",value:function(){var t=this;this.cell.on("changed",function(a){var s=a.options;return t.onAttrsChange(s)})}},{key:"onAttrsChange",value:function(t){var a=this.flag.getChangedFlag();t.updated||!a||(t.dirty&&this.hasAction(a,"update")&&(a|=this.getFlag("render")),t.toolId&&(t.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,a,this.priority,t))}},{key:"parseJSONMarkup",value:function(t,a){var s=ci.parseJSONMarkup(t),u=s.selectors,l=this.rootSelector;if(a&&l){if(u[l])throw new Error("Invalid root selector");u[l]=a}return s}},{key:"can",value:function(t){var a=this.graph.options.interacting;if(typeof a=="function"&&(a=A.call(a,this.graph,this)),typeof a=="object"){var s=a[t];return typeof s=="function"&&(s=A.call(s,this.graph,this)),s!==!1}return typeof a=="boolean"?a:!1}},{key:"cleanCache",value:function(){return this.cache.clean(),this}},{key:"getCache",value:function(t){return this.cache.get(t)}},{key:"getDataOfElement",value:function(t){return this.cache.getData(t)}},{key:"getMatrixOfElement",value:function(t){return this.cache.getMatrix(t)}},{key:"getShapeOfElement",value:function(t){return this.cache.getShape(t)}},{key:"getScaleOfElement",value:function(t,a){var s,u;if(a&&a.contains(t)){var l=R.scale(a);s=1/l.sx,u=1/l.sy}else s=1,u=1;return{sx:s,sy:u}}},{key:"getBoundingRectOfElement",value:function(t){return this.cache.getBoundingRect(t)}},{key:"getBBoxOfElement",value:function(t){var a=this.getBoundingRectOfElement(t),s=this.getMatrixOfElement(t),u=this.getRootRotatedMatrix(),l=this.getRootTranslatedMatrix();return R.transformRectangle(a,l.multiply(u).multiply(s))}},{key:"getUnrotatedBBoxOfElement",value:function(t){var a=this.getBoundingRectOfElement(t),s=this.getMatrixOfElement(t),u=this.getRootTranslatedMatrix();return R.transformRectangle(a,u.multiply(s))}},{key:"getBBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a;if(t.useCellGeometry){var s=this.cell,u=s.isNode()?s.getAngle():0;a=s.getBBox().bbox(u)}else a=this.getBBoxOfElement(this.container);return this.graph.localToGraph(a)}},{key:"getRootTranslatedMatrix",value:function(){var t=this.cell,a=t.isNode()?t.getPosition():{x:0,y:0};return R.createSVGMatrix().translate(a.x,a.y)}},{key:"getRootRotatedMatrix",value:function(){var t=R.createSVGMatrix(),a=this.cell,s=a.isNode()?a.getAngle():0;if(s){var u=a.getBBox(),l=u.width/2,c=u.height/2;t=t.translate(l,c).rotate(s).translate(-l,-c)}return t}},{key:"findMagnet",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.findByAttr("magnet",t)}},{key:"updateAttrs",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.rootBBox==null&&(s.rootBBox=new Sr),s.selectors==null&&(s.selectors=this.selectors),this.attr.update(t,a,s)}},{key:"isEdgeElement",value:function(t){return this.cell.isEdge()&&(t==null||t===this.container)}},{key:"prepareHighlight",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t&&this.$(t)[0]||this.container;return a.partial=s===this.container,s}},{key:"highlight",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.prepareHighlight(t,a);return this.notify("cell:highlight",{magnet:s,options:a,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:s,options:a,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:s,options:a,view:this,node:this.cell,cell:this.cell}),this}},{key:"unhighlight",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.prepareHighlight(t,a);return this.notify("cell:unhighlight",{magnet:s,options:a,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:s,options:a,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:s,options:a,view:this,edge:this.cell,cell:this.cell}),this}},{key:"notifyUnhighlight",value:function(t,a){}},{key:"getEdgeTerminal",value:function(t,a,s,u,l){var c=this.cell,f=this.findAttr("port",t),d=t.getAttribute("data-selector"),v={cell:c.id};return d!=null&&(v.magnet=d),f!=null?(v.port=f,c.isNode()&&!c.hasPort(f)&&d==null&&(v.selector=this.getSelector(t))):d==null&&this.container!==t&&(v.selector=this.getSelector(t)),this.customizeEdgeTerminal(v,t,a,s,u,l)}},{key:"customizeEdgeTerminal",value:function(t,a,s,u,l,c){var f=l.getStrategy()||this.graph.options.connecting.strategy;if(f){var d=typeof f=="string"?f:f.name,v=typeof f=="string"?{}:f.args||{},p=kv.registry;if(d){var y=p.get(d);if(y==null)return p.onNotFound(d);var C=A.call(y,this.graph,t,this,a,new mt(s,u),l,c,v);if(C)return C}}return t}},{key:"getMagnetFromEdgeTerminal",value:function(t){var a=this.cell,s=this.container,u=t.port,l=t.magnet,c;return u!=null&&a.isNode()&&a.hasPort(u)?c=this.findPortElem(u,l)||s:(l||(l=t.selector),!l&&u!=null&&(l='[port="'.concat(u,'"]')),c=this.findOne(l,s,this.selectors)),c}},{key:"animate",value:function(t,a){var s=typeof t=="string"?this.findOne(t):t;if(s==null)throw new Error("Invalid animation element.");var u=s.parentNode,l=function(){u||R.remove(s)},c=ja.create(s);u||c.appendTo(this.graph.view.stage);var f=a.complete;return a.complete=function(d){l(),f&&f(d)},c.animate(a)}},{key:"animateTransform",value:function(t,a){var s=typeof t=="string"?this.findOne(t):t;if(s==null)throw new Error("Invalid animation element.");var u=s.parentNode,l=function(){u||R.remove(s)},c=ja.create(s);u||c.appendTo(this.graph.view.stage);var f=a.complete;return a.complete=function(d){l(),f&&f(d)},c.animateTransform(a)}},{key:"hasTools",value:function(t){var a=this.tools;return a==null?!1:t==null?!0:a.name===t}},{key:"addTools",value:function(t){if(!this.can("toolsAddable"))return this;if(this.removeTools(),t){var a=Eu.isToolsView(t)?t:new Eu(t);this.tools=a,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),a.config({view:this}),a.mount()}return this}},{key:"updateTools",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tools&&this.tools.update(t),this}},{key:"removeTools",value:function(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}},{key:"hideTools",value:function(){return this.tools&&this.tools.hide(),this}},{key:"showTools",value:function(){return this.tools&&this.tools.show(),this}},{key:"renderTools",value:function(){var t=this.cell.getTools();return this.addTools(t),this}},{key:"notify",value:function(t,a){return this.trigger(t,a),this.graph.trigger(t,a),this}},{key:"getEventArgs",value:function(t,a,s){var u=this,l=u.cell;return a==null||s==null?{e:t,view:u,cell:l}:{e:t,x:a,y:s,view:u,cell:l}}},{key:"onClick",value:function(t,a,s){this.notify("cell:click",this.getEventArgs(t,a,s))}},{key:"onDblClick",value:function(t,a,s){this.notify("cell:dblclick",this.getEventArgs(t,a,s))}},{key:"onContextMenu",value:function(t,a,s){this.notify("cell:contextmenu",this.getEventArgs(t,a,s))}},{key:"onMouseDown",value:function(t,a,s){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,a,s))}},{key:"onMouseUp",value:function(t,a,s){this.notify("cell:mouseup",this.getEventArgs(t,a,s)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}},{key:"onMouseMove",value:function(t,a,s){this.notify("cell:mousemove",this.getEventArgs(t,a,s))}},{key:"onMouseOver",value:function(t){this.notify("cell:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){this.notify("cell:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){this.notify("cell:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){this.notify("cell:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,a,s,u){this.notify("cell:mousewheel",Object.assign({delta:u},this.getEventArgs(t,a,s)))}},{key:"onCustomEvent",value:function(t,a,s,u){this.notify("cell:customevent",Object.assign({name:a},this.getEventArgs(t,s,u))),this.notify(a,Object.assign({},this.getEventArgs(t,s,u)))}},{key:"onMagnetMouseDown",value:function(t,a,s,u){}},{key:"onMagnetDblClick",value:function(t,a,s,u){}},{key:"onMagnetContextMenu",value:function(t,a,s,u){}},{key:"onLabelMouseDown",value:function(t,a,s){}},{key:"checkMouseleave",value:function(t){var a=this.graph;a.renderer.isAsync()&&a.renderer.dumpView(this);var s=this.getEventTarget(t,{fromPoint:!0}),u=a.renderer.findViewByElem(s);u!==this&&(this.onMouseLeave(t),!!u&&u.onMouseEnter(t))}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(t){this.defaults=this.getOptions(t)}},{key:"getOptions",value:function(t){var a=function(p,y){return y!=null?I.uniq([].concat(Object(Qe.a)(Array.isArray(p)?p:[p]),Object(Qe.a)(Array.isArray(y)?y:[y]))):Array.isArray(p)?Object(Qe.a)(p):[p]},s=m.cloneDeep(this.getDefaults()),u=t.bootstrap,l=t.actions,c=t.events,f=t.documentEvents,d=FG(t,["bootstrap","actions","events","documentEvents"]);return u&&(s.bootstrap=a(s.bootstrap,u)),l&&Object.keys(l).forEach(function(v){var p=l[v],y=s.actions[v];p&&y?s.actions[v]=a(y,p):p&&(s.actions[v]=a(p))}),c&&(s.events=Object.assign(Object.assign({},s.events),c)),t.documentEvents&&(s.documentEvents=Object.assign(Object.assign({},s.documentEvents),f)),m.merge(s,d)}}]),n}(Ai,Symbol.toStringTag);Ho.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},function(o){o.Flag=JP,o.Attr=g1}(Ho||(Ho={})),function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"}o.isCellView=i}(Ho||(Ho={})),function(o){function i(n){return function(e){e.config({priority:n})}}o.priority=i;function r(n){return function(e){e.config({bootstrap:n})}}o.bootstrap=r}(Ho||(Ho={})),function(o){o.registry=Io.create({type:"view"})}(Ho||(Ho={}));var Eu=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(De.a)(this,n),e=r.call(this),e.svgContainer=e.createContainer(!0,t),e.htmlContainer=e.createContainer(!1,t),e.config(t),e}return Object(be.a)(n,[{key:"name",get:function(){return this.options.name}},{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:i,get:function(){return n.toStringTag}},{key:"createContainer",value:function(t,a){var s=t?Ai.createElement("g",!0):Ai.createElement("div",!1);return R.addClass(s,this.prefixClassName("cell-tools")),a.className&&R.addClass(s,a.className),s}},{key:"config",value:function(t){if(this.options=Object.assign(Object.assign({},this.options),t),!Ho.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(R.addClass(this.svgContainer,this.prefixClassName("edge-tools")),R.addClass(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(R.addClass(this.svgContainer,this.prefixClassName("node-tools")),R.addClass(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));var a=this.options.items;if(!Array.isArray(a))return this;this.tools=[];var s=[];a.forEach(function(C){if(n.ToolItem.isToolItem(C))C.name==="vertices"?s.unshift(C):s.push(C);else{var E=typeof C=="object"?C.name:C;E==="vertices"?s.unshift(C):s.push(C)}});for(var u=0;u<s.length;u+=1){var l=s[u],c=void 0;if(n.ToolItem.isToolItem(l))c=l;else{var f=typeof l=="object"?l.name:l,d=typeof l=="object"?l.args||{}:{};if(f){if(this.cell.isNode()){var v=Dv.registry.get(f);if(v)c=new v(d);else return Dv.registry.onNotFound(f)}else if(this.cell.isEdge()){var p=Iv.registry.get(f);if(p)c=new p(d);else return Iv.registry.onNotFound(f)}}}if(c){c.config(this.cellView,this),c.render();var y=c.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer;y.appendChild(c.container),this.tools.push(c)}}return this}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.tools;return a&&a.forEach(function(s){t.toolId!==s.cid&&s.isVisible()&&s.update()}),this}},{key:"focus",value:function(t){var a=this.tools;return a&&a.forEach(function(s){t===s?s.show():s.hide()}),this}},{key:"blur",value:function(t){var a=this.tools;return a&&a.forEach(function(s){s!==t&&!s.isVisible()&&(s.show(),s.update())}),this}},{key:"hide",value:function(){return this.focus(null)}},{key:"show",value:function(){return this.blur(null)}},{key:"remove",value:function(){var t=this.tools;return t&&(t.forEach(function(a){return a.remove()}),this.tools=null),R.remove(this.svgContainer),R.remove(this.htmlContainer),Object(la.a)(Object(ca.a)(n.prototype),"remove",this).call(this)}},{key:"mount",value:function(){var t=this.tools,a=this.cellView;if(a&&t){var s=t.some(function(c){return c.options.isSVGElement!==!1}),u=t.some(function(c){return c.options.isSVGElement===!1});if(s){var l=this.options.local?a.container:a.graph.view.decorator;l.appendChild(this.svgContainer)}u&&this.graph.container.appendChild(this.htmlContainer)}return this}}]),n}(Ai,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&e.graph!=null&&e.cell!=null&&typeof e.config=="function"&&typeof e.update=="function"&&typeof e.focus=="function"&&typeof e.blur=="function"&&typeof e.show=="function"&&typeof e.hide=="function"}o.isToolsView=i})(Eu||(Eu={})),function(o){var i=function(r,n){Object(or.a)(t,r);var e=Object(sr.a)(t);function t(){var a,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(De.a)(this,t),a=e.call(this),a.visible=!0,a.options=a.getOptions(s),a.container=Ai.createElement(a.options.tagName||"g",a.options.isSVGElement!==!1),R.addClass(a.container,a.prefixClassName("cell-tool")),typeof a.options.className=="string"&&R.addClass(a.container,a.options.className),a.init(),a}return Object(be.a)(t,[{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:"name",get:function(){return this.options.name}},{key:n,get:function(){return t.toStringTag}},{key:"init",value:function(){}},{key:"getOptions",value:function(s){var u=this.constructor;return u.getOptions(s)}},{key:"delegateEvents",value:function(){return this.options.events&&Object(la.a)(Object(ca.a)(t.prototype),"delegateEvents",this).call(this,this.options.events),this}},{key:"config",value:function(s,u){return this.cellView=s,this.parent=u,this.stamp(this.container),this.cell.isEdge()?R.addClass(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&R.addClass(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}},{key:"render",value:function(){this.empty();var s=this.options.markup;if(s){var u=ci.isStringMarkup(s)?ci.parseStringMarkup(s):ci.parseJSONMarkup(s);this.container.appendChild(u.fragment),this.childNodes=u.selectors}return this.onRender(),this}},{key:"onRender",value:function(){}},{key:"update",value:function(){return this}},{key:"stamp",value:function(s){s&&s.setAttribute("data-cell-id",this.cellView.cell.id)}},{key:"show",value:function(){return this.container.style.display="",this.visible=!0,this}},{key:"hide",value:function(){return this.container.style.display="none",this.visible=!1,this}},{key:"isVisible",value:function(){return!!this.visible}},{key:"focus",value:function(){var s=this.options.focusOpacity;return s!=null&&Number.isFinite(s)&&(this.container.style.opacity="".concat(s)),this.parent.focus(this),this}},{key:"blur",value:function(){return this.container.style.opacity="",this.parent.blur(this),this}},{key:"guard",value:function(s){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(s,this.cellView)}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(s){this.defaults=this.getOptions(s)}},{key:"getOptions",value:function(s){return m.merge(m.cloneDeep(this.getDefaults()),s)}}]),t}(Ai,Symbol.toStringTag);i.defaults={isSVGElement:!0,tagName:"g"},o.ToolItem=i,function(r){var n=0;function e(a){return a?_.pascalCase(a):(n+=1,"CustomTool".concat(n))}function t(a){var s=m.createClass(e(a.name),this);return s.config(a),s}r.define=t}(i=o.ToolItem||(o.ToolItem={})),function(r){r.toStringTag="X6.".concat(r.name);function n(e){if(e==null)return!1;if(e instanceof r)return!0;var t=e[Symbol.toStringTag],a=e;return(t==null||t===r.toStringTag)&&a.graph!=null&&a.cell!=null&&typeof a.config=="function"&&typeof a.update=="function"&&typeof a.focus=="function"&&typeof a.blur=="function"&&typeof a.show=="function"&&typeof a.hide=="function"&&typeof a.isVisible=="function"}r.isToolItem=n}(i=o.ToolItem||(o.ToolItem={}))}(Eu||(Eu={}));function QP(o,i,r,n){var e=A.call(kv.presets.pinRelative,this.graph,{},i,r,o,this.cell,n,{});return e.anchor}function qP(o,i){return i?o.cell.getBBox():o.cell.isEdge()?o.getConnection().bbox():o.getUnrotatedBBoxOfElement(o.container)}var mh=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"onRender",value:function(){R.addClass(this.container,this.prefixClassName("cell-tool-button")),this.update()}},{key:"update",value:function(){return this.updatePosition(),this}},{key:"updatePosition",value:function(){var e=this.cellView,t=e.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();R.transform(this.container,t,{absolute:!0})}},{key:"getNodeMatrix",value:function(){var e=this.cellView,t=this.options,a=t.x,s=a===void 0?0:a,u=t.y,l=u===void 0?0:u,c=t.offset,f=t.useCellGeometry,d=t.rotate,v=qP(e,f),p=e.cell.getAngle();d||(v=v.bbox(p));var y=0,C=0;typeof c=="number"?(y=c,C=c):typeof c=="object"&&(y=c.x,C=c.y),s=M.normalizePercentage(s,v.width),l=M.normalizePercentage(l,v.height);var E=R.createSVGMatrix().translate(v.x+v.width/2,v.y+v.height/2);return d&&(E=E.rotate(p)),E=E.translate(s+y-v.width/2,l+C-v.height/2),E}},{key:"getEdgeMatrix",value:function(){var e=this.cellView,t=this.options,a=t.offset,s=a===void 0?0:a,u=t.distance,l=u===void 0?0:u,c=t.rotate,f,d,v,p=M.normalizePercentage(l,1);p>=0&&p<=1?f=e.getTangentAtRatio(p):f=e.getTangentAtLength(p),f?(d=f.start,v=f.vector().vectorAngle(new mt(1,0))||0):(d=e.getConnection().start,v=0);var y=R.createSVGMatrix().translate(d.x,d.y).rotate(v);return typeof s=="object"?y=y.translate(s.x||0,s.y||0):y=y.translate(0,s),c||(y=y.rotate(-v)),y}},{key:"onMouseDown",value:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.onClick;typeof t=="function"&&A.call(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}}]),r}(Eu.ToolItem);(function(o){o.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(mh||(mh={})),function(o){o.Remove=o.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick:function(r){var n=r.view,e=r.btn;e.parent.remove(),n.cell.remove({ui:!0,toolId:e.cid})}})}(mh||(mh={}));var BG=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},p1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"onRender",value:function(){if(R.addClass(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){var e=this.options.attrs,t=e.class,a=BG(e,["class"]);R.attr(this.container,R.kebablizeAttrs(a)),t&&R.addClass(this.container,t)}this.update()}},{key:"update",value:function(){var e=this.cellView,t=this.options,a=t.useCellGeometry,s=t.rotate,u=M.normalizeSides(t.padding),l=qP(e,a).moveAndExpand({x:-u.left,y:-u.top,width:u.left+u.right,height:u.top+u.bottom}),c=e.cell;if(c.isNode()){var f=c.getAngle();if(f)if(s){var d=c.getBBox().getCenter();R.rotate(this.container,f,d.x,d.y,{absolute:!0})}else l=l.bbox(f)}return R.attr(this.container,l.toJSON()),this}}]),r}(Eu.ToolItem);(function(o){o.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(p1||(p1={}));var r0=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.handles=[],n}return Object(be.a)(r,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"onRender",value:function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}},{key:"update",value:function(){var e=this.vertices;return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(a){e.stopHandleListening(a),a.remove()})}},{key:"renderHandles",value:function(){for(var e=this,t=this.vertices,a=0,s=t.length;a<s;a+=1){var u=t[a],l=this.options.createHandle,c=this.options.processHandle,f=l({index:a,graph:this.graph,guard:function(v){return e.guard(v)},attrs:this.options.attrs||{}});c&&c(f),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:f}),f.updatePosition(u.x,u.y),this.stamp(f.container),this.container.appendChild(f.container),this.handles.push(f),this.startHandleListening(f)}}},{key:"updateHandles",value:function(){for(var e=this.vertices,t=0,a=e.length;t<a;t+=1){var s=e[t],u=this.handles[t];u&&u.updatePosition(s.x,s.y)}}},{key:"updatePath",value:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}},{key:"startHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}},{key:"stopHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}},{key:"getNeighborPoints",value:function(e){var t=this.cellView,a=this.vertices,s=e>0?a[e-1]:t.sourceAnchor,u=e<a.length-1?a[e+1]:t.targetAnchor;return{prev:mt.create(s),next:mt.create(u)}}},{key:"getMouseEventArgs",value:function(e){var t=this.normalizeEvent(e),a=this.graph.snapToGrid(t.clientX,t.clientY),s=a.x,u=a.y;return{e:t,x:s,y:u}}},{key:"onHandleChange",value:function(e){var t=e.e;this.focus();var a=this.cellView;if(a.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){var s=this.getMouseEventArgs(t),u=s.e,l=s.x,c=s.y;a.notifyMouseDown(u,l,c)}}},{key:"onHandleChanging",value:function(e){var t=e.handle,a=e.e,s=this.cellView,u=t.options.index,l=this.getMouseEventArgs(a),c=l.e,f=l.x,d=l.y,v={x:f,y:d};this.snapVertex(v,u),s.cell.setVertexAt(u,v,{ui:!0,toolId:this.cid}),t.updatePosition(v.x,v.y),this.options.stopPropagation||s.notifyMouseMove(c,f,d)}},{key:"onHandleChanged",value:function(e){var t=e.e,a=this.options,s=this.cellView;if(a.addable&&this.updatePath(),!!a.removeRedundancies){var u=s.removeRedundantLinearVertices({ui:!0,toolId:this.cid});u&&this.render(),this.blur(),s.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(t).vertexAdded&&s.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});var l=this.getMouseEventArgs(t),c=l.e,f=l.x,d=l.y;this.options.stopPropagation||s.notifyMouseUp(c,f,d),s.checkMouseleave(c),a.onChanged&&a.onChanged({edge:s.cell,edgeView:s})}}},{key:"snapVertex",value:function(e,t){var a=this.options.snapRadius||0;if(a>0){var s=this.getNeighborPoints(t),u=s.prev,l=s.next;Math.abs(e.x-u.x)<a?e.x=u.x:Math.abs(e.x-l.x)<a&&(e.x=l.x),Math.abs(e.y-u.y)<a?e.y=s.prev.y:Math.abs(e.y-l.y)<a&&(e.y=l.y)}}},{key:"onHandleRemove",value:function(e){var t=e.handle,a=e.e;if(this.options.removable){var s=t.options.index,u=this.cellView;u.cell.removeVertexAt(s,{ui:!0}),this.options.addable&&this.updatePath(),u.checkMouseleave(this.normalizeEvent(a))}}},{key:"onPathMouseDown",value:function(e){var t=this.cellView;if(!(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))){e.stopPropagation(),e.preventDefault();var a=this.normalizeEvent(e),s=this.graph.snapToGrid(a.clientX,a.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});var u=t.getVertexIndex(s.x,s.y);this.snapVertex(s,u),t.cell.insertVertex(s,u,{ui:!0,toolId:this.cid}),this.render();var l=this.handles[u];this.eventData(a,{vertexAdded:!0}),l.onMouseDown(a)}}},{key:"onRemove",value:function(){this.resetHandles()}}]),r}(Eu.ToolItem);(function(o){var i=function(r){Object(or.a)(e,r);var n=Object(sr.a)(e);function e(t){var a;return Object(De.a)(this,e),a=n.call(this),a.options=t,a.render(),a.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),a}return Object(be.a)(e,[{key:"graph",get:function(){return this.options.graph}},{key:"render",value:function(){this.container=Ai.createElement("circle",!0);var a=this.options.attrs;if(typeof a=="function"){var s=o.getDefaults();this.setAttrs(Object.assign(Object.assign({},s.attrs),a(this)))}else this.setAttrs(a);this.addClass(this.prefixClassName("edge-tool-vertex"))}},{key:"updatePosition",value:function(a,s){this.setAttrs({cx:a,cy:s})}},{key:"onMouseDown",value:function(a){this.options.guard(a)||(a.stopPropagation(),a.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},a.data),this.emit("change",{e:a,handle:this}))}},{key:"onMouseMove",value:function(a){this.emit("changing",{e:a,handle:this})}},{key:"onMouseUp",value:function(a){this.emit("changed",{e:a,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}},{key:"onDoubleClick",value:function(a){this.emit("remove",{e:a,handle:this})}}]),e}(Ai);o.Handle=i})(r0||(r0={})),function(o){var i,r=ts.prefix("edge-tool-vertex-path");o.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(e){return new o.Handle(e)},markup:[{tagName:"path",selector:"connection",className:r,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:(i={},Object(Xe.a)(i,"mousedown .".concat(r),"onPathMouseDown"),Object(Xe.a)(i,"touchstart .".concat(r),"onPathMouseDown"),i)})}(r0||(r0={}));var a0=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.handles=[],n}return Object(be.a)(r,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"update",value:function(){return this.render(),this}},{key:"onRender",value:function(){R.addClass(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var e=this.cellView,t=Object(Qe.a)(this.vertices);t.unshift(e.sourcePoint),t.push(e.targetPoint);for(var a=0,s=t.length;a<s-1;a+=1){var u=t[a],l=t[a+1],c=this.renderHandle(u,l,a);this.stamp(c.container),this.handles.push(c)}return this}},{key:"renderHandle",value:function(e,t,a){var s=this,u=this.options.createHandle({index:a,graph:this.graph,guard:function(c){return s.guard(c)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(u),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:u}),this.updateHandle(u,e,t),this.container.appendChild(u.container),this.startHandleListening(u),u}},{key:"startHandleListening",value:function(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}},{key:"stopHandleListening",value:function(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(a){e.stopHandleListening(a),a.remove()})}},{key:"shiftHandleIndexes",value:function(e){for(var t=this.handles,a=0,s=t.length;a<s;a+=1)t[a].options.index+=e}},{key:"resetAnchor",value:function(e,t){var a=this.cellView.cell,s={ui:!0,toolId:this.cid};t?a.prop([e,"anchor"],t,s):a.removeProp([e,"anchor"],s)}},{key:"snapHandle",value:function(e,t,a){var s=e.options.axis,u=e.options.index,l=this.cellView,c=l.cell,f=c.getVertices(),d=f[u-2]||a.sourceAnchor,v=f[u+1]||a.targetAnchor,p=this.options.snapRadius;return Math.abs(t[s]-d[s])<p?t[s]=d[s]:Math.abs(t[s]-v[s])<p&&(t[s]=v[s]),t}},{key:"onHandleChanging",value:function(e){var t=e.handle,a=e.e,s=this.graph,u=this.options,l=this.cellView,c=u.anchor,f=t.options.axis,d=t.options.index-1,v=this.getEventData(a),p=this.normalizeEvent(a),y=s.snapToGrid(p.clientX,p.clientY),C=this.snapHandle(t,y.clone(),v),E=m.cloneDeep(this.vertices),w=E[d],x=E[d+1],N=l.sourceView,j=l.sourceBBox,B=!1,$=!1;if(w?d===0?j.containsPoint(w)?(E.shift(),this.shiftHandleIndexes(-1),B=!0):(w[f]=C[f],$=!0):w[f]=C[f]:(w=l.sourceAnchor.toJSON(),w[f]=C[f],j.containsPoint(w)?B=!0:(E.unshift(w),this.shiftHandleIndexes(1),$=!0)),typeof c=="function"&&N){if(B){var Z=v.sourceAnchor.clone();Z[f]=C[f];var fe=A.call(c,l,Z,N,l.sourceMagnet||N.container,"source",l,this);this.resetAnchor("source",fe)}$&&this.resetAnchor("source",v.sourceAnchorDef)}var de=l.targetView,xe=l.targetBBox,Ae=!1,Ye=!1;if(x?d===E.length-2?xe.containsPoint(x)?(E.pop(),Ae=!0):(x[f]=C[f],Ye=!0):x[f]=C[f]:(x=l.targetAnchor.toJSON(),x[f]=C[f],xe.containsPoint(x)?Ae=!0:(E.push(x),Ye=!0)),typeof c=="function"&&de){if(Ae){var rt=v.targetAnchor.clone();rt[f]=C[f];var je=A.call(c,l,rt,de,l.targetMagnet||de.container,"target",l,this);this.resetAnchor("target",je)}Ye&&this.resetAnchor("target",v.targetAnchorDef)}mt.equalPoints(E,this.vertices)||this.cellView.cell.setVertices(E,{ui:!0,toolId:this.cid}),this.updateHandle(t,w,x,0),u.stopPropagation||l.notifyMouseMove(p,y.x,y.y)}},{key:"onHandleChange",value:function(e){var t=e.handle,a=e.e,s=this.options,u=this.handles,l=this.cellView,c=t.options.index;if(!!Array.isArray(u)){for(var f=0,d=u.length;f<d;f+=1)f!==c&&u[f].hide();if(this.focus(),this.setEventData(a,{sourceAnchor:l.sourceAnchor.clone(),targetAnchor:l.targetAnchor.clone(),sourceAnchorDef:m.cloneDeep(this.cell.prop(["source","anchor"])),targetAnchorDef:m.cloneDeep(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!s.stopPropagation){var v=this.normalizeEvent(a),p=this.graph.snapToGrid(v.clientX,v.clientY);l.notifyMouseDown(v,p.x,p.y)}}}},{key:"onHandleChanged",value:function(e){var t=e.e,a=this.options,s=this.cellView;a.removeRedundancies&&s.removeRedundantLinearVertices({ui:!0,toolId:this.cid});var u=this.normalizeEvent(t),l=this.graph.snapToGrid(u.clientX,u.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),a.stopPropagation||s.notifyMouseUp(u,l.x,l.y),s.checkMouseleave(u),a.onChanged&&a.onChanged({edge:s.cell,edgeView:s})}},{key:"updateHandle",value:function(e,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=this.options.precision||0,l=Math.abs(t.x-a.x)<u,c=Math.abs(t.y-a.y)<u;if(l||c){var f=new ua(t,a),d=f.length();if(d<this.options.threshold)e.hide();else{var v=f.getCenter(),p=l?"x":"y";v[p]+=s||0;var y=f.vector().vectorAngle(new mt(1,0));e.updatePosition(v.x,v.y,y,this.cellView),e.show(),e.options.axis=p}}else e.hide()}},{key:"onRemove",value:function(){this.resetHandles()}}]),r}(Eu.ToolItem);(function(o){var i=function(r){Object(or.a)(e,r);var n=Object(sr.a)(e);function e(t){var a;return Object(De.a)(this,e),a=n.call(this),a.options=t,a.render(),a.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),a}return Object(be.a)(e,[{key:"render",value:function(){this.container=Ai.createElement("rect",!0);var a=this.options.attrs;if(typeof a=="function"){var s=o.getDefaults();this.setAttrs(Object.assign(Object.assign({},s.attrs),a(this)))}else this.setAttrs(a);this.addClass(this.prefixClassName("edge-tool-segment"))}},{key:"updatePosition",value:function(a,s,u,l){var c=l.getClosestPoint(new mt(a,s))||new mt(a,s),f=R.createSVGMatrix().translate(c.x,c.y);if(c.equals({x:a,y:s}))f=f.rotate(u);else{var d=new ua(a,s,c.x,c.y),v=d.vector().vectorAngle(new mt(1,0));v!==0&&(v+=90),f=f.rotate(v)}this.setAttrs({transform:R.matrixToTransformString(f),cursor:u%180==0?"row-resize":"col-resize"})}},{key:"onMouseDown",value:function(a){this.options.guard(a)||(this.trigger("change",{e:a,handle:this}),a.stopPropagation(),a.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},a.data))}},{key:"onMouseMove",value:function(a){this.emit("changing",{e:a,handle:this})}},{key:"onMouseUp",value:function(a){this.emit("changed",{e:a,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}}]),e}(Ai);o.Handle=i})(a0||(a0={})),function(o){o.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(r){return new o.Handle(r)},anchor:QP})}(a0||(a0={}));var m1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"type",get:function(){return this.options.type}},{key:"onRender",value:function(){R.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-anchor"))),this.toggleArea(!1),this.update()}},{key:"update",value:function(){var e=this.type,t=this.cellView,a=t.getTerminalView(e);return a?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}},{key:"updateAnchor",value:function(){var e=this.childNodes;if(!!e){var t=e.anchor;if(!!t){var a=this.type,s=this.cellView,u=this.options,l=s.getTerminalAnchor(a),c=s.cell.prop([a,"anchor"]);t.setAttribute("transform","translate(".concat(l.x,", ").concat(l.y,")"));var f=c?u.customAnchorAttrs:u.defaultAnchorAttrs;f&&Object.keys(f).forEach(function(d){t.setAttribute(d,f[d])})}}}},{key:"updateArea",value:function(){var e=this.childNodes;if(!!e){var t=e.area;if(!!t){var a=this.type,s=this.cellView,u=s.getTerminalView(a);if(u){var l=u.cell,c=s.getTerminalMagnet(a),f=this.options.areaPadding||0;Number.isFinite(f)||(f=0);var d,v,p;u.isEdgeElement(c)?(d=u.getBBox(),v=0,p=d.getCenter()):(d=u.getUnrotatedBBoxOfElement(c),v=l.getAngle(),p=d.getCenter(),v&&p.rotate(-v,l.getBBox().getCenter())),d.inflate(f),R.attr(t,{x:-d.width/2,y:-d.height/2,width:d.width,height:d.height,transform:"translate(".concat(p.x,", ").concat(p.y,") rotate(").concat(v,")")})}}}}},{key:"toggleArea",value:function(e){if(this.childNodes){var t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}},{key:"onMouseDown",value:function(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}},{key:"resetAnchor",value:function(e){var t=this.type,a=this.cell;e?a.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):a.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}},{key:"onMouseMove",value:function(e){var t=this.type,a=this.cellView,s=a.getTerminalView(t);if(s!=null){var u=this.normalizeEvent(e),l=s.cell,c=a.getTerminalMagnet(t),f=this.graph.clientToLocal(u.clientX,u.clientY),d=this.options.snap;if(typeof d=="function"){var v=A.call(d,a,f,s,c,t,a,this);f=mt.create(v)}if(this.options.restrictArea)if(s.isEdgeElement(c)){var p=s.getClosestPoint(f);p&&(f=p)}else{var y=s.getUnrotatedBBoxOfElement(c),C=l.getAngle(),E=l.getBBox().getCenter(),w=f.clone().rotate(C,E);y.containsPoint(w)||(f=y.getNearestPointToPoint(w).rotate(-C,E))}var x,N=this.options.anchor;typeof N=="function"&&(x=A.call(N,a,f,s,c,t,a,this)),this.resetAnchor(x),this.update()}}},{key:"onMouseUp",value:function(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}},{key:"onDblClick",value:function(){var e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}}]),r}(Eu.ToolItem);(function(o){o.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:QP,snap:function(r,n,e,t,a,s){var u=s.options.snapRadius||0,l=t==="source",c=l?0:-1,f=this.cell.getVertexAt(c)||this.getTerminalAnchor(l?"target":"source");return f&&(Math.abs(f.x-r.x)<u&&(r.x=f.x),Math.abs(f.y-r.y)<u&&(r.y=f.y)),r}})})(m1||(m1={}));var GG=m1.define({name:"source-anchor",type:"source"}),zG=m1.define({name:"target-anchor",type:"target"}),UG=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},y1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"type",get:function(){return this.options.type}},{key:"ratio",get:function(){return this.options.ratio}},{key:"init",value:function(){if(this.options.attrs){var e=this.options.attrs,t=e.class,a=UG(e,["class"]);this.setAttrs(a,this.container),t&&R.addClass(this.container,t)}}},{key:"onRender",value:function(){R.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-arrowhead"))),this.update()}},{key:"update",value:function(){var e=this.ratio,t=this.cellView,a=t.getTangentAtRatio(e),s=a?a.start:t.getPointAtRatio(e),u=a&&a.vector().vectorAngle(new mt(1,0))||0;if(!s)return this;var l=R.createSVGMatrix().translate(s.x,s.y).rotate(u);return R.transform(this.container,l,{absolute:!0}),this}},{key:"onMouseDown",value:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});var a=this.graph.snapToGrid(e.clientX,e.clientY),s=t.prepareArrowheadDragging(this.type,{x:a.x,y:a.y,options:{toolId:this.cid}});this.cellView.setEventData(e,s),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}}},{key:"onMouseMove",value:function(e){var t=this.normalizeEvent(e),a=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,a.x,a.y),this.update()}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),a=this.cellView,s=this.graph.snapToGrid(t.clientX,t.clientY);a.onMouseUp(t,s.x,s.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",a.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}]),r}(Eu.ToolItem);(function(o){o.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(y1||(y1={}));var VG=y1.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),HG=y1.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Qg=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.labelIndex=-1,n.distance=.5,n}return Object(be.a)(r,[{key:"render",value:function(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}},{key:"createElement",value:function(){var e=this.cell,t=[this.prefixClassName("".concat(e.isEdge()?"edge":"node","-tool-editor")),this.prefixClassName("cell-tool-editor")];this.editor=Eu.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}},{key:"updateEditor",value:function(){var e=this.graph,t=this.cell,a=this.editor,s=a.style,u=new mt,l=20;if(t.isNode())u=t.getBBox().center,l=t.size().width-4;else if(t.isEdge()){var c=this.options.event,f=c.target,d=f.parentElement,v=d&&R.hasClass(d,this.prefixClassName("edge-label"));if(v){var p=d.getAttribute("data-index")||"0";this.labelIndex=parseInt(p,10);var y=d.getAttribute("transform"),C=R.parseTransformString(y),E=C.translation;u=new mt(E.tx,E.ty),l=R.getBBox(f).width}else{if(!this.options.labelAddable)return this;u=e.clientToLocal(mt.create(c.clientX,c.clientY));var w=this.cellView,x=w.path.closestPointLength(u);this.distance=x}}u=e.localToGraph(u),s.left="".concat(u.x,"px"),s.top="".concat(u.y,"px"),s.minWidth="".concat(l,"px");var N=e.scale();s.transform="scale(".concat(N.sx,", ").concat(N.sy,") translate(-50%, -50%)");var j=this.options.attrs;s.fontSize="".concat(j.fontSize,"px"),s.fontFamily=j.fontFamily,s.color=j.color,s.backgroundColor=j.backgroundColor;var B=this.options.getText,$;return typeof B=="function"&&($=A.call(B,this.cellView,{cell:this.cell,index:this.labelIndex})),a.innerText=$||"",this}},{key:"onDocumentMouseDown",value:function(e){if(e.target!==this.editor){var t=this.cell,a=this.editor.innerText.replace(/\n$/,"")||"",s=this.options.setText;typeof s=="function"&&A.call(s,this.cellView,{cell:this.cell,value:a,index:this.labelIndex,distance:this.distance}),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}},{key:"onDblClick",value:function(e){e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.stopPropagation()}},{key:"autoFocus",value:function(){var e=this;setTimeout(function(){e.editor.focus(),e.selectText()})}},{key:"selectText",value:function(){if(window.getSelection){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}]),r}(Eu.ToolItem);(function(o){o.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(Qg||(Qg={})),function(o){o.NodeEditor=o.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:function(r){var n=r.cell;return n.attr("text/text")},setText:function(r){var n=r.cell,e=r.value;n.attr("text/text",e)}}),o.EdgeEditor=o.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:function(r){var n=r.cell,e=r.index;return e===-1?"":n.prop("labels/".concat(e,"/attrs/label/text"))},setText:function(r){var n=r.cell,e=r.value,t=r.index,a=r.distance,s=n;t===-1?s.appendLabel({position:{distance:a},attrs:{label:{text:e}}}):e?s.prop("labels/".concat(t,"/attrs/label/text"),e):typeof t=="number"&&s.removeLabelAt(t)}})}(Qg||(Qg={}));var ek=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Dv;(function(o){o.presets={boundary:p1,button:mh,"button-remove":mh.Remove,"node-editor":Qg.NodeEditor},o.registry=Io.create({type:"node tool",process:function(r,n){if(typeof n=="function")return n;var e=Eu.ToolItem,t=n.inherit,a=ek(n,["inherit"]);if(t){var s=this.get(t);s==null?this.onNotFound(t,"inherited"):e=s}return a.name==null&&(a.name=r),e.define.call(e,a)}}),o.registry.register(o.presets,!0)})(Dv||(Dv={}));var Iv;(function(o){o.presets={boundary:p1,vertices:r0,segments:a0,button:mh,"button-remove":mh.Remove,"source-anchor":GG,"target-anchor":zG,"source-arrowhead":VG,"target-arrowhead":HG,"edge-editor":Qg.EdgeEditor},o.registry=Io.create({type:"edge tool",process:function(r,n){if(typeof n=="function")return n;var e=Eu.ToolItem,t=n.inherit,a=ek(n,["inherit"]);if(t){var s=this.get(t);s==null?this.onNotFound(t,"inherited"):e=s}return a.name==null&&(a.name=r),e.define.call(e,a)}}),o.registry.register(o.presets,!0)})(Iv||(Iv={}));var WG=Ed("center"),$G=Ed("topCenter"),XG=Ed("bottomCenter"),KG=Ed("leftMiddle"),YG=Ed("rightMiddle"),ZG=Ed("topLeft"),JG=Ed("topRight"),QG=Ed("bottomLeft"),qG=Ed("bottomRight");function Ed(o){return function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=e.rotate?i.getUnrotatedBBoxOfElement(r):i.getBBoxOfElement(r),a=t[o];a.x+=M.normalizePercentage(e.dx,t.width),a.y+=M.normalizePercentage(e.dy,t.height);var s=i.cell;return e.rotate?a.rotate(-s.getAngle(),s.getBBox().getCenter()):a}}function b1(o){return function(i,r,n,e){if(n instanceof Element){var t=this.graph.renderer.findViewByElem(n),a;if(t)if(t.isEdgeElement(n)){var s=e.fixedAt!=null?e.fixedAt:"50%";a=tk(t,s)}else a=t.getBBoxOfElement(n).getCenter();else a=new mt;return o.call(this,i,r,a,e)}return o.apply(this,arguments)}}function tk(o,i){var r=M.isPercentage(i),n=typeof i=="string"?parseFloat(i):i;return r?o.getPointAtRatio(n/100):o.getPointAtLength(n)}var e5=function(i,r,n,e){var t=i.cell.getAngle(),a=i.getBBoxOfElement(r),s=a.getCenter(),u=a.getTopLeft(),l=a.getBottomRight(),c=e.padding;if(Number.isFinite(c)||(c=0),u.y+c<=n.y&&n.y<=l.y-c){var f=n.y-s.y;s.x+=t===0||t===180?0:f*1/Math.tan(ti.toRad(t)),s.y+=f}else if(u.x+c<=n.x&&n.x<=l.x-c){var d=n.x-s.x;s.y+=t===90||t===270?0:d*Math.tan(ti.toRad(t)),s.x+=d}return s},t5=b1(e5),n5=function(i,r,n,e,t){var a=i.cell.getConnectionPoint(this.cell,t);return(e.dx||e.dy)&&a.translate(e.dx||0,e.dy||0),a},r5=function(i,r,n,e){var t,a=0,s,u=i.cell;e.rotate?(t=i.getUnrotatedBBoxOfElement(r),s=u.getBBox().getCenter(),a=u.getAngle()):t=i.getBBoxOfElement(r);var l=e.padding;l!=null&&Number.isFinite(l)&&t.inflate(l),e.rotate&&n.rotate(a,s);var c=t.getNearestSideToPoint(n),f;switch(c){case"left":f=t.getLeftMiddle();break;case"right":f=t.getRightMiddle();break;case"top":f=t.getTopCenter();break;case"bottom":f=t.getBottomCenter();break;default:break}var d=e.direction;return d==="H"?(c==="top"||c==="bottom")&&(n.x<=t.x+t.width?f=t.getLeftMiddle():f=t.getRightMiddle()):d==="V"&&(n.y<=t.y+t.height?f=t.getTopCenter():f=t.getBottomCenter()),e.rotate?f.rotate(-a,s):f},a5=b1(r5),Rv;(function(o){o.presets=H,o.registry=Io.create({type:"node endpoint"}),o.registry.register(o.presets,!0)})(Rv||(Rv={}));var i5=function(i,r,n,e){var t=e.ratio!=null?e.ratio:.5;return t>1&&(t/=100),i.getPointAtRatio(t)},o5=function(i,r,n,e){var t=e.length!=null?e.length:20;return i.getPointAtLength(t)},nk=function(i,r,n,e){var t=i.getClosestPoint(n);return t!=null?t:new mt},s5=b1(nk),u5=function(i,r,n,e){var t=1e6,a=i.getConnection(),s=i.getConnectionSubdivisions(),u=new ua(n.clone().translate(0,t),n.clone().translate(0,-t)),l=new ua(n.clone().translate(t,0),n.clone().translate(-t,0)),c=u.intersect(a,{segmentSubdivisions:s}),f=l.intersect(a,{segmentSubdivisions:s}),d=[];return c&&d.push.apply(d,Object(Qe.a)(c)),f&&d.push.apply(d,Object(Qe.a)(f)),d.length>0?n.closest(d):e.fallbackAt!=null?tk(i,e.fallbackAt):A.call(nk,this,i,r,n,e)},l5=b1(u5),Nv;(function(o){o.presets=se,o.registry=Io.create({type:"edge endpoint"}),o.registry.register(o.presets,!0)})(Nv||(Nv={}));function C1(o,i,r){var n;if(typeof r=="object"){if(Number.isFinite(r.y)){var e=new ua(i,o),t=e.parallel(r.y),a=t.start,s=t.end;i=a,o=s}n=r.x}else n=r;if(n==null||!Number.isFinite(n))return o;var u=o.distance(i);return n===0&&u>0?o:o.move(i,-Math.min(n,u-1))}function E1(o){var i=o.getAttribute("stroke-width");return i===null?0:parseFloat(i)||0}function c5(o){if(o==null)return null;var i=o;do{var r=i.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")i=i.firstElementChild;else if(r==="TITLE")i=i.nextElementSibling;else break}while(i);return i}var rk=function(i,r,n,e){var t=r.getBBoxOfElement(n);e.stroked&&t.inflate(E1(n)/2);var a=i.intersect(t),s=a&&a.length?i.start.closest(a):i.end;return C1(s,i.start,e.offset)},f5=function(i,r,n,e,t){var a=r.cell,s=a.isNode()?a.getAngle():0;if(s===0)return A.call(rk,this,i,r,n,e,t);var u=r.getUnrotatedBBoxOfElement(n);e.stroked&&u.inflate(E1(n)/2);var l=u.getCenter(),c=i.clone().rotate(s,l),f=c.setLength(1e6).intersect(u),d=f&&f.length?c.start.closest(f).rotate(-s,l):i.end;return C1(d,i.start,e.offset)},d5=function(i,r,n,e){var t,a,s=i.end,u=e.selector;if(typeof u=="string"?t=r.findOne(u):Array.isArray(u)?t=m.getByPath(n,u):t=c5(n),!R.isSVGGraphicsElement(t)){if(t===n||!R.isSVGGraphicsElement(n))return s;t=n}var l=r.getShapeOfElement(t),c=r.getMatrixOfElement(t),f=r.getRootTranslatedMatrix(),d=r.getRootRotatedMatrix(),v=f.multiply(d).multiply(c),p=v.inverse(),y=R.transformLine(i,p),C=y.start.clone(),E=r.getDataOfElement(t);if(e.insideout===!1){E.shapeBBox==null&&(E.shapeBBox=l.bbox());var w=E.shapeBBox;if(w!=null&&w.containsPoint(C))return s}e.extrapolate===!0&&y.setLength(1e6);var x;if(Wa.isPath(l)){var N=e.precision||2;E.segmentSubdivisions==null&&(E.segmentSubdivisions=l.getSegmentSubdivisions({precision:N})),x={precision:N,segmentSubdivisions:E.segmentSubdivisions},a=y.intersect(l,x)}else a=y.intersect(l);a?Array.isArray(a)&&(a=C.closest(a)):e.sticky===!0&&(Sr.isRectangle(l)?a=l.getNearestPointToPoint(C):lh.isEllipse(l)?a=l.intersectsWithLineFromCenterToPoint(C):a=l.closestPoint(C,x));var j=a?R.transformPoint(a,v):s,B=e.offset||0;return e.stroked!==!1&&(typeof B=="object"?(B=Object.assign({},B),B.x==null&&(B.x=0),B.x+=E1(t)/2):B+=E1(t)/2),C1(j,i.start,B)};function h5(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=o.start,e=o.end,t,a,s,u;switch(i){case"left":u="x",t=e,a=n,s=-1;break;case"right":u="x",t=n,a=e,s=1;break;case"top":u="y",t=e,a=n,s=-1;break;case"bottom":u="y",t=n,a=e,s=1;break;default:return}n[u]<e[u]?t[u]=a[u]:a[u]=t[u],Number.isFinite(r)&&(t[u]+=s*r,a[u]+=s*r)}var v5=function(i,r,n,e){var t=e.alignOffset,a=e.align;return a&&h5(i,a,t),C1(i.end,i.start,e.offset)},jv;(function(o){o.presets=re,o.registry=Io.create({type:"connection point"}),o.registry.register(o.presets,!0)})(jv||(jv={}));var g5=function(i){return Object(Qe.a)(i)},p5=function(i,r,n){var e=r.side||"bottom",t=M.normalizeSides(r.padding||40),a=n.sourceBBox,s=n.targetBBox,u=a.getCenter(),l=s.getCenter(),c,f,d;switch(e){case"top":d=-1,c="y",f="height";break;case"left":d=-1,c="x",f="width";break;case"right":d=1,c="x",f="width";break;case"bottom":default:d=1,c="y",f="height";break}return u[c]+=d*(a[f]/2+t[e]),l[c]+=d*(s[f]/2+t[e]),d*(u[c]-l[c])>0?l[c]=u[c]:u[c]=l[c],[u.toJSON()].concat(Object(Qe.a)(i),[l.toJSON()])};function O1(o){return new Sr(o.x,o.y,0,0)}function w1(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=M.normalizeSides(o.padding||20);return{x:-i.left,y:-i.top,width:i.left+i.right,height:i.top+i.bottom}}function ak(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.sourceBBox.clone().moveAndExpand(w1(i))}function ik(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.targetBBox.clone().moveAndExpand(w1(i))}function m5(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.sourceAnchor)return o.sourceAnchor;var r=ak(o,i);return r.getCenter()}function y5(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.targetAnchor)return o.targetAnchor;var r=ik(o,i);return r.getCenter()}var ok=function(i,r,n){var e=ak(n,r),t=ik(n,r),a=m5(n,r),s=y5(n,r);e=e.union(O1(a)),t=t.union(O1(s));var u=i.map(function(w){return mt.create(w)});u.unshift(a),u.push(s);for(var l=null,c=[],f=0,d=u.length-1;f<d;f+=1){var v=null,p=u[f],y=u[f+1],C=Ql.getBearing(p,y)!=null;if(f===0)f+1===d?e.intersectsWithRect(t.clone().inflate(1))?v=Ql.insideNode(p,y,e,t):C||(v=Ql.nodeToNode(p,y,e,t)):e.containsPoint(y)?v=Ql.insideNode(p,y,e,O1(y).moveAndExpand(w1(r))):C||(v=Ql.nodeToVertex(p,y,e));else if(f+1===d){var E=C&&Ql.getBearing(y,p)===l;t.containsPoint(p)||E?v=Ql.insideNode(p,y,O1(p).moveAndExpand(w1(r)),t,l):C||(v=Ql.vertexToNode(p,y,t,l))}else C||(v=Ql.vertexToVertex(p,y,l));v?(c.push.apply(c,Object(Qe.a)(v.points)),l=v.direction):l=Ql.getBearing(p,y),f+1<d&&c.push(y)}return c},Ql;(function(o){var i={N:"S",S:"N",E:"W",W:"E"},r={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function n(f,d,v){var p=new mt(f.x,d.y);return v.containsPoint(p)&&(p=new mt(d.x,f.y)),p}function e(f,d){return f[d==="W"||d==="E"?"width":"height"]}o.getBBoxSize=e;function t(f,d){return f.x===d.x?f.y>d.y?"N":"S":f.y===d.y?f.x>d.x?"W":"E":null}o.getBearing=t;function a(f,d,v){var p=new mt(f.x,d.y),y=new mt(d.x,f.y),C=t(f,p),E=t(f,y),w=v?i[v]:null,x=C===v||C!==w&&(E===w||E!==v)?p:y;return{points:[x],direction:t(x,d)}}o.vertexToVertex=a;function s(f,d,v){var p=n(f,d,v);return{points:[p],direction:t(p,d)}}o.nodeToVertex=s;function u(f,d,v,p){var y=[new mt(f.x,d.y),new mt(d.x,f.y)],C=y.filter(function(j){return!v.containsPoint(j)}),E=C.filter(function(j){return t(j,f)!==p}),w;if(E.length>0)return w=E.filter(function(j){return t(f,j)===p}).pop(),w=w||E[0],{points:[w],direction:t(w,d)};{w=I.difference(y,C)[0];var x=mt.create(d).move(w,-e(v,p)/2),N=n(x,f,v);return{points:[N,x],direction:t(x,d)}}}o.vertexToNode=u;function l(f,d,v,p){var y=s(d,f,p),C=y.points[0];if(v.containsPoint(C)){y=s(f,d,v);var E=y.points[0];if(p.containsPoint(E)){var w=mt.create(f).move(E,-e(v,t(f,E))/2),x=mt.create(d).move(C,-e(p,t(d,C))/2),N=new ua(w,x).getCenter(),j=s(f,N,v),B=a(N,d,j.direction);y.points=[j.points[0],B.points[0]],y.direction=B.direction}}return y}o.nodeToNode=l;function c(f,d,v,p,y){var C=v.union(p).inflate(1),E=C.getCenter(),w=E.distance(d)>E.distance(f),x=w?d:f,N=w?f:d,j,B,$;y?(j=mt.fromPolar(C.width+C.height,r[y],x),j=C.getNearestPointToPoint(j).move(j,-1)):j=C.getNearestPointToPoint(x).move(x,1),B=n(j,N,C);var Z;j.round().equals(B.round())?(B=mt.fromPolar(C.width+C.height,ti.toRad(j.theta(x))+Math.PI/2,N),B=C.getNearestPointToPoint(B).move(N,1).round(),$=n(j,B,C),Z=w?[B,$,j]:[j,$,B]):Z=w?[B,j]:[j,B];var fe=t(w?j:B,d);return{points:Z,direction:fe}}o.insideNode=c})(Ql||(Ql={}));var b5={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeNodes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){var i=yh(this.step,this);return i},directions:function(){var i=yh(this.step,this),r=yh(this.cost,this);return[{cost:r,offsetX:i,offsetY:0},{cost:r,offsetX:-i,offsetY:0},{cost:r,offsetX:0,offsetY:i},{cost:r,offsetX:0,offsetY:-i}]},penalties:function(){var i=yh(this.step,this);return{0:0,45:i/2,90:i/2}},paddingBox:function(){var i=yh(this.step,this);return{x:-i,y:-i,width:2*i,height:2*i}},fallbackRouter:ok,draggingRouter:null};function yh(o,i){return typeof o=="function"?o.call(i):o}function C5(o){var i=Object.keys(o).reduce(function(n,e){var t=n;return e==="fallbackRouter"||e==="draggingRouter"||e==="fallbackRoute"?t[e]=o[e]:t[e]=yh(o[e],o),n},{});if(i.padding){var r=M.normalizeSides(i.padding);i.paddingBox={x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom}}return i.directions.forEach(function(n){var e=new mt(0,0),t=new mt(n.offsetX,n.offsetY);n.angle=ti.normalize(e.theta(t))}),i}var sk=1,uk=2,E5=function(){function o(){Object(De.a)(this,o),this.items=[],this.hash={},this.values={}}return Object(be.a)(o,[{key:"add",value:function(r,n){var e=this;this.hash[r]?this.items.splice(this.items.indexOf(r),1):this.hash[r]=sk,this.values[r]=n;var t=I.sortedIndexBy(this.items,r,function(a){return e.values[a]});this.items.splice(t,0,r)}},{key:"pop",value:function(){var r=this.items.shift();return r&&(this.hash[r]=uk),r}},{key:"isOpen",value:function(r){return this.hash[r]===sk}},{key:"isClose",value:function(r){return this.hash[r]===uk}},{key:"isEmpty",value:function(){return this.items.length===0}}]),o}(),O5=function(){function o(i){Object(De.a)(this,o),this.options=i,this.mapGridSize=100,this.map={}}return Object(be.a)(o,[{key:"build",value:function(r,n){var e=this.options,t=e.excludeTerminals.reduce(function(c,f){var d=n[f];if(d){var v=r.getCell(d.cell);v&&c.push(v)}return c},[]),a=[],s=r.getCell(n.getSourceCellId());s&&(a=I.union(a,s.getAncestors().map(function(c){return c.id})));var u=r.getCell(n.getTargetCellId());u&&(a=I.union(a,u.getAncestors().map(function(c){return c.id})));var l=this.mapGridSize;return r.getNodes().reduce(function(c,f){var d=f.shape,v=e.excludeShapes,p=d?v.includes(d):!1,y=t.some(function(de){return de.id===f.id}),C=e.excludeNodes.some(function(de){return typeof de=="string"?f.id===de:de===f}),E=a.includes(f.id),w=e.excludeHiddenNodes&&!f.isVisible(),x=p||y||C||E||w;if(!x)for(var N=f.getBBox().moveAndExpand(e.paddingBox),j=N.getOrigin().snapToGrid(l),B=N.getCorner().snapToGrid(l),$=j.x;$<=B.x;$+=l)for(var Z=j.y;Z<=B.y;Z+=l){var fe=new mt($,Z).toString();c[fe]==null&&(c[fe]=[]),c[fe].push(N)}return c},this.map),this}},{key:"isAccessible",value:function(r){var n=r.clone().snapToGrid(this.mapGridSize).toString(),e=this.map[n];return e?e.every(function(t){return!t.containsPoint(r)}):!0}}]),o}();function lk(o,i){var r=o.sourceBBox.clone();return i&&i.paddingBox?r.moveAndExpand(i.paddingBox):r}function ck(o,i){var r=o.targetBBox.clone();return i&&i.paddingBox?r.moveAndExpand(i.paddingBox):r}function fk(o,i){if(o.sourceAnchor)return o.sourceAnchor;var r=lk(o,i);return r.getCenter()}function w5(o,i){if(o.targetAnchor)return o.targetAnchor;var r=ck(o,i);return r.getCenter()}function iS(o,i,r,n,e){var t=360/r,a=o.theta(x5(o,i,n,e)),s=ti.normalize(a+t/2);return t*Math.floor(s/t)}function x5(o,i,r,n){var e=n.step,t=i.x-o.x,a=i.y-o.y,s=t/r.x,u=a/r.y,l=s*e,c=u*e;return new mt(o.x+l,o.y+c)}function dk(o,i){var r=Math.abs(o-i);return r>180?360-r:r}function S5(o,i){var r=i.step;return i.directions.forEach(function(n){n.gridOffsetX=n.offsetX/r*o.x,n.gridOffsetY=n.offsetY/r*o.y}),i.directions}function T5(o,i,r){return{source:i.clone(),x:hk(r.x-i.x,o),y:hk(r.y-i.y,o)}}function hk(o,i){if(!o)return i;var r=Math.abs(o),n=Math.round(r/i);if(!n)return r;var e=n*i,t=r-e,a=t/n;return i+a}function M5(o,i){var r=i.source,n=ts.snapToGrid(o.x-r.x,i.x)+r.x,e=ts.snapToGrid(o.y-r.y,i.y)+r.y;return new mt(n,e)}function i0(o,i){return o.round(i)}function x1(o,i,r){return i0(M5(o.clone(),i),r)}function o0(o){return o.toString()}function oS(o){return new mt(o.x===0?0:Math.abs(o.x)/o.x,o.y===0?0:Math.abs(o.y)/o.y)}function vk(o,i){for(var r=Infinity,n=0,e=i.length;n<e;n+=1){var t=o.manhattanDistance(i[n]);t<r&&(r=t)}return r}function gk(o,i,r,n,e){var t=e.precision,a=e.directionMap,s=o.diff(i.getCenter()),u=Object.keys(a).reduce(function(l,c){if(r.includes(c)){for(var f=a[c],d=new mt(o.x+f.x*(Math.abs(s.x)+i.width),o.y+f.y*(Math.abs(s.y)+i.height)),v=new ua(o,d),p=v.intersect(i)||[],y,C=null,E=0;E<p.length;E+=1){var w=p[E],x=o.squaredDistance(w);(y==null||x>y)&&(y=x,C=w)}if(C){var N=x1(C,n,t);i.containsPoint(N)&&(N=x1(N.translate(f.x*n.x,f.y*n.y),n,t)),l.push(N)}}return l},[]);return i.containsPoint(o)||u.push(x1(o,n,t)),u}function A5(o,i,r,n,e){for(var t=[],a=oS(e.diff(r)),s=o0(r),u=o[s],l;u;){l=i[s];var c=oS(l.diff(u));c.equals(a)||(t.unshift(l),a=c),s=o0(u),u=o[s]}var f=i[s],d=oS(f.diff(n));return d.equals(a)||t.unshift(f),t}function P5(o,i,r,n,e){var t=e.precision,a,s;Sr.isRectangle(i)?a=i0(fk(o,e).clone(),t):a=i0(i.clone(),t),Sr.isRectangle(r)?s=i0(w5(o,e).clone(),t):s=i0(r.clone(),t);var u=T5(e.step,a,s),l=a,c=s,f,d;if(Sr.isRectangle(i)?f=gk(l,i,e.startDirections,u,e):f=[l],Sr.isRectangle(r)?d=gk(s,r,e.endDirections,u,e):d=[c],f=f.filter(function(ni){return n.isAccessible(ni)}),d=d.filter(function(ni){return n.isAccessible(ni)}),f.length>0&&d.length>0){for(var v=new E5,p={},y={},C={},E=0,w=f.length;E<w;E+=1){var x=f[E],N=o0(x);v.add(N,vk(x,d)),p[N]=x,C[N]=0}for(var j=e.previousDirectionAngle,B=j===void 0,$,Z,fe=S5(u,e),de=fe.length,xe=d.reduce(function(ni,Vu){var Jc=o0(Vu);return ni.push(Jc),ni},[]),Ae=mt.equalPoints(f,d),Ye=e.maxLoopCount;!v.isEmpty()&&Ye>0;){var rt=v.pop(),je=p[rt],ot=y[rt],Ft=C[rt],hn=je.equals(l),In=ot==null,xn=void 0;In?B?hn?xn=null:xn=iS(l,je,de,u,e):xn=j:xn=iS(ot,je,de,u,e);var dn=In&&Ae;if(!dn&&xe.indexOf(rt)>=0)return e.previousDirectionAngle=xn,A5(y,p,je,l,c);for(var tr=0;tr<de;tr+=1){$=fe[tr];var Ut=$.angle;if(Z=dk(xn,Ut),!(!(B&&hn)&&Z>e.maxDirectionChange)){var Rn=x1(je.clone().translate($.gridOffsetX||0,$.gridOffsetY||0),u,t),$n=o0(Rn);if(!(v.isClose($n)||!n.isAccessible(Rn))){if(xe.indexOf($n)>=0){var qr=Rn.equals(c);if(!qr){var Kr=iS(Rn,c,de,u,e),fa=dk(Ut,Kr);if(fa>e.maxDirectionChange)continue}}var ba=$.cost,qi=hn?0:e.penalties[Z],No=Ft+ba+qi;(!v.isOpen($n)||No<C[$n])&&(p[$n]=Rn,y[$n]=je,C[$n]=No,v.add($n,No+vk(Rn,d)))}}}Ye-=1}}return e.fallbackRoute?A.call(e.fallbackRoute,this,l,c,e):null}var k5=function(i,r,n){for(var e=C5(r),t=lk(n,e),a=ck(n,e),s=fk(n,e),u=new O5(e).build(n.graph.model,n.cell),l=i.map(function(B){return mt.create(B)}),c=[],f=s,d,v,p=0,y=l.length;p<=y;p+=1){var C=null;if(d=v||t,v=l[p],v==null){v=a;var E=n.cell,w=E.getSourceCellId()==null||E.getTargetCellId()==null;if(w&&typeof e.draggingRouter=="function"){var x=d===t?s:d,N=v.getOrigin();C=A.call(e.draggingRouter,n,x,N,e)}}if(C==null&&(C=P5(n,d,v,u,e)),C===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),A.call(e.fallbackRouter,this,i,e,n);var j=C[0];j&&j.equals(f)&&C.shift(),f=C[C.length-1]||f,c.push.apply(c,Object(Qe.a)(C))}return c},pk=function(i,r,n){return A.call(k5,this,i,Object.assign(Object.assign({},b5),r),n)},D5={maxDirectionChange:45,directions:function(){var i=yh(this.step,this),r=yh(this.cost,this),n=Math.ceil(Math.sqrt(i*i<<1));return[{cost:r,offsetX:i,offsetY:0},{cost:n,offsetX:i,offsetY:i},{cost:r,offsetX:0,offsetY:i},{cost:n,offsetX:-i,offsetY:i},{cost:r,offsetX:-i,offsetY:0},{cost:n,offsetX:-i,offsetY:-i},{cost:r,offsetX:0,offsetY:-i},{cost:n,offsetX:i,offsetY:-i}]},fallbackRoute:function(i,r,n){var e=i.theta(r),t=[],a={x:r.x,y:i.y},s={x:i.x,y:r.y};if(e%180>90){var u=a;a=s,s=u}var l=e%90<45?a:s,c=new ua(i,l),f=90*Math.ceil(e/90),d=mt.fromPolar(c.squaredLength(),ti.toRad(f+135),l),v=new ua(r,d),p=c.intersectsWithLine(v),y=p||r,C=p?y:i,E=360/n.directions.length,w=C.theta(r),x=ti.normalize(w+E/2),N=E*Math.floor(x/E);return n.previousDirectionAngle=N,y&&t.push(y.round()),t.push(r),t}},I5=function(i,r,n){return A.call(pk,this,i,Object.assign(Object.assign({},D5),r),n)},R5=function(i,r,n){var e=r.offset||32,t=r.min==null?16:r.min,a=0,s=r.direction,u=n.sourceBBox,l=n.targetBBox,c=u.getCenter(),f=l.getCenter();if(typeof e=="number"&&(a=e),s==null){var d=l.left-u.right,v=l.top-u.bottom;d>=0&&v>=0?s=d>=v?"L":"T":d<=0&&v>=0?(d=u.left-l.right,d>=0?s=d>=v?"R":"T":s="T"):d>=0&&v<=0?(v=u.top-l.bottom,v>=0?s=d>=v?"L":"B":s="L"):(d=u.left-l.right,v=u.top-l.bottom,d>=0&&v>=0?s=d>=v?"R":"B":d<=0&&v>=0?s="B":d>=0&&v<=0?s="R":s=Math.abs(d)>Math.abs(v)?"R":"B")}s==="H"?s=f.x-c.x>=0?"L":"R":s==="V"&&(s=f.y-c.y>=0?"T":"B"),e==="center"&&(s==="L"?a=(l.left-u.right)/2:s==="R"?a=(u.left-l.right)/2:s==="T"?a=(l.top-u.bottom)/2:s==="B"&&(a=(u.top-l.bottom)/2));var p,y,C,E=s==="L"||s==="R";if(E){if(f.y===c.y)return Object(Qe.a)(i);C=s==="L"?1:-1,p="x",y="width"}else{if(f.x===c.x)return Object(Qe.a)(i);C=s==="T"?1:-1,p="y",y="height"}var w=c.clone(),x=f.clone();if(w[p]+=C*(u[y]/2+a),x[p]-=C*(l[y]/2+a),E){var N=w.x,j=x.x,B=u.width/2+t,$=l.width/2+t;f.x>c.x?j<=N&&(w.x=Math.max(j,c.x+B),x.x=Math.min(N,f.x-$)):j>=N&&(w.x=Math.min(j,c.x-B),x.x=Math.max(N,f.x+$))}else{var Z=w.y,fe=x.y,de=u.height/2+t,xe=l.height/2+t;f.y>c.y?fe<=Z&&(w.y=Math.max(fe,c.y+de),x.y=Math.min(Z,f.y-xe)):fe>=Z&&(w.y=Math.min(fe,c.y-de),x.y=Math.max(Z,f.y+xe))}return[w.toJSON()].concat(Object(Qe.a)(i),[x.toJSON()])};function qg(o,i){if(i!=null&&i!==!1){var r=typeof i=="boolean"?0:i;if(r>0){var n=mt.create(o[1]).move(o[2],r),e=mt.create(o[1]).move(o[0],r);return[n.toJSON()].concat(Object(Qe.a)(o),[e.toJSON()])}{var t=o[1];return[Object.assign({},t)].concat(Object(Qe.a)(o),[Object.assign({},t)])}}return o}var N5=function(i,r,n){var e=r.width||50,t=r.height||80,a=t/2,s=r.angle||"auto",u=n.sourceAnchor,l=n.targetAnchor,c=n.sourceBBox,f=n.targetBBox;if(u.equals(l)){var d=function(In){var xn=ti.toRad(In),dn=Math.sin(xn),tr=Math.cos(xn),Ut=new mt(u.x+tr*e,u.y+dn*e),Rn=new mt(Ut.x-tr*a,Ut.y-dn*a),$n=Rn.clone().rotate(-90,Ut),qr=Rn.clone().rotate(90,Ut);return[$n.toJSON(),Ut.toJSON(),qr.toJSON()]},v=function(In){var xn=u.clone().move(In,-1),dn=new ua(xn,In);return!c.containsPoint(In)&&!c.intersectsWithLine(dn)},p=[0,90,180,270,45,135,225,315];if(typeof s=="number")return qg(d(s),r.merge);var y=c.getCenter();if(y.equals(u))return qg(d(0),r.merge);var C=y.angleBetween(u,y.clone().translate(1,0)),E=d(C);if(v(E[1]))return qg(E,r.merge);for(var w=1,x=p.length;w<x;w+=1)if(E=d(C+p[w]),v(E[1]))return qg(E,r.merge);return qg(E,r.merge)}{var N=new ua(u,l),j=N.parallel(-e),B=j.getCenter(),$=j.start.clone().move(j.end,a),Z=j.end.clone().move(j.start,a),fe=N.parallel(-1),de=new ua(fe.start,B),xe=new ua(fe.end,B);if((c.containsPoint(B)||f.containsPoint(B)||c.intersectsWithLine(de)||c.intersectsWithLine(xe)||f.intersectsWithLine(de)||f.intersectsWithLine(xe))&&(j=N.parallel(e),B=j.getCenter(),$=j.start.clone().move(j.end,a),Z=j.end.clone().move(j.start,a)),r.merge){var Ae=new ua(u,l),Ye=new ua(B,Ae.center).setLength(Number.MAX_SAFE_INTEGER),rt=c.intersectsWithLine(Ye),je=f.intersectsWithLine(Ye),ot=rt?Array.isArray(rt)?rt:[rt]:[];je&&(Array.isArray(je)?ot.push.apply(ot,Object(Qe.a)(je)):ot.push(je));var Ft=Ae.center.closest(ot);Ft?(n.sourceAnchor=Ft.clone(),n.targetAnchor=Ft.clone()):(n.sourceAnchor=Ae.center.clone(),n.targetAnchor=Ae.center.clone())}return qg([$.toJSON(),B.toJSON(),Z.toJSON()],r.merge)}},Od;(function(o){o.presets=q,o.registry=Io.create({type:"router"}),o.registry.register(o.presets,!0)})(Od||(Od={}));var j5=function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=[i].concat(Object(Qe.a)(n),[r]),a=new Cu(t),s=new Wa(a);return e.raw?s:s.serialize()},L5=function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=n.length===3?0:1,a=mt.create(n[0+t]),s=mt.create(n[2+t]),u=mt.create(n[1+t]);if(!mt.equals(i,r)){var l=new mt((i.x+r.x)/2,(i.y+r.y)/2),c=l.angleBetween(mt.create(i).rotate(90,l),u);c>1&&(a.rotate(180-c,l),s.rotate(180-c,l),u.rotate(180-c,l))}var f=`
     M `.concat(i.x," ").concat(i.y,`
     Q `).concat(a.x," ").concat(a.y," ").concat(u.x," ").concat(u.y,`
     Q `).concat(s.x," ").concat(s.y," ").concat(r.x," ").concat(r.y,`
  `);return e.raw?Wa.parse(f):f},_5=function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=new Wa;t.appendSegment(Wa.createSegment("M",i));for(var a=1/3,s=2/3,u=e.radius||10,l,c,f=0,d=n.length;f<d;f+=1){var v=mt.create(n[f]),p=n[f-1]||i,y=n[f+1]||r;l=c||v.distance(p)/2,c=v.distance(y)/2;var C=-Math.min(u,l),E=-Math.min(u,c),w=v.clone().move(p,C).round(),x=v.clone().move(y,E).round(),N=new mt(a*w.x+s*v.x,s*v.y+a*w.y),j=new mt(a*x.x+s*v.x,s*v.y+a*x.y);t.appendSegment(Wa.createSegment("L",w)),t.appendSegment(Wa.createSegment("C",N,j,x))}return t.appendSegment(Wa.createSegment("L",r)),e.raw?t:t.serialize()},F5=function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t,a=e.direction;if(n&&n.length!==0){var s=[i].concat(Object(Qe.a)(n),[r]),u=Sl.throughPoints(s);t=new Wa(u)}else if(t=new Wa,t.appendSegment(Wa.createSegment("M",i)),a||(a=Math.abs(i.x-r.x)>=Math.abs(i.y-r.y)?"H":"V"),a==="H"){var l=(i.x+r.x)/2;t.appendSegment(Wa.createSegment("C",l,i.y,l,r.y,r.x,r.y))}else{var c=(i.y+r.y)/2;t.appendSegment(Wa.createSegment("C",i.x,c,r.x,c,r.x,r.y))}return e.raw?t:t.serialize()},mk=1,S1=1/3,T1=2/3;function B5(o){var i=o.graph._jumpOverUpdateList;if(i==null&&(i=o.graph._jumpOverUpdateList=[],o.graph.on("cell:mouseup",function(){for(var n=o.graph._jumpOverUpdateList,e=0;e<n.length;e+=1)n[e].update()}),o.graph.on("model:reseted",function(){i=o.graph._jumpOverUpdateList=[]})),i.indexOf(o)<0){i.push(o);var r=function(){return i.splice(i.indexOf(o),1)};o.cell.once("change:connector",r),o.cell.once("removed",r)}}function sS(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=[o].concat(Object(Qe.a)(r),[i]),e=[];return n.forEach(function(t,a){var s=n[a+1];s!=null&&e.push(new ua(t,s))}),e}function G5(o,i){var r=[];return i.forEach(function(n){var e=o.intersectsWithLine(n);e&&r.push(e)}),r}function yk(o,i){return new ua(o,i).squaredLength()}function z5(o,i,r){return i.reduce(function(n,e,t){if(M1.includes(e))return n;var a=n.pop()||o,s=mt.create(e).move(a.start,-r),u=mt.create(e).move(a.start,+r),l=i[t+1];if(l!=null){var c=u.distance(l);c<=r&&(u=l.move(a.start,c),M1.push(l))}else{var f=s.distance(a.end);if(f<r*2+mk)return n.push(a),n}var d=u.distance(a.start);if(d<r*2+mk)return n.push(a),n;var v=new ua(s,u);return s0.push(v),n.push(new ua(a.start,s),v,new ua(u,a.end)),n},[])}function bk(o,i,r,n){var e=new Wa,t;return t=Wa.createSegment("M",o[0].start),e.appendSegment(t),o.forEach(function(a,s){if(s0.includes(a)){var u,l,c,f;if(r==="arc"){u=-90,l=a.start.diff(a.end);var d=l.x<0||l.x===0&&l.y<0;d&&(u+=180);var v=a.getCenter(),p=new ua(v,a.end).rotate(u,v),y;y=new ua(a.start,v),c=y.pointAt(2/3).rotate(u,a.start),f=p.pointAt(1/3).rotate(-u,p.end),t=Wa.createSegment("C",c,f,p.end),e.appendSegment(t),y=new ua(v,a.end),c=p.pointAt(1/3).rotate(u,p.end),f=y.pointAt(1/3).rotate(-u,a.end),t=Wa.createSegment("C",c,f,a.end),e.appendSegment(t)}else if(r==="gap")t=Wa.createSegment("M",a.end),e.appendSegment(t);else if(r==="cubic"){u=a.start.theta(a.end);var C=i*.6,E=i*1.35;l=a.start.diff(a.end);var w=l.x<0||l.x===0&&l.y<0;w&&(E*=-1),c=new mt(a.start.x+C,a.start.y+E).rotate(u,a.start),f=new mt(a.end.x-C,a.end.y+E).rotate(u,a.end),t=Wa.createSegment("C",c,f,a.end),e.appendSegment(t)}}else{var x=o[s+1];n===0||!x||s0.includes(x)?(t=Wa.createSegment("L",a.end),e.appendSegment(t)):U5(n,e,a.end,a.start,x.end)}}),e}function U5(o,i,r,n,e){var t=r.distance(n)/2,a=r.distance(e)/2,s=-Math.min(o,t),u=-Math.min(o,a),l=r.clone().move(n,s).round(),c=r.clone().move(e,u).round(),f=new mt(S1*l.x+T1*r.x,T1*r.y+S1*l.y),d=new mt(S1*c.x+T1*r.x,T1*r.y+S1*c.y),v;v=Wa.createSegment("L",l),i.appendSegment(v),v=Wa.createSegment("C",f,d,c),i.appendSegment(v)}var s0,M1,V5=function(i,r,n){var e=this,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};s0=[],M1=[],B5(this);var a=t.size||5,s=t.type||"arc",u=t.radius||0,l=t.ignoreConnectors||["smooth"],c=this.graph,f=c.model,d=f.getEdges();if(d.length===1)return bk(sS(i,r,n),a,s,u);var v=this.cell,p=d.indexOf(v),y=c.options.connecting.connector||{},C=d.filter(function(B,$){var Z=B.getConnector()||y;return l.includes(Z.name)?!1:$>p?Z.name!=="jumpover":!0}),E=C.map(function(B){return c.renderer.findViewByCell(B)}),w=sS(i,r,n),x=E.map(function(B){return B==null?[]:B===e?w:sS(B.sourcePoint,B.targetPoint,B.routePoints)}),N=[];w.forEach(function(B){var $=C.reduce(function(Z,fe,de){if(fe!==v){var xe=G5(B,x[de]);Z.push.apply(Z,Object(Qe.a)(xe))}return Z},[]).sort(function(Z,fe){return yk(B.start,Z)-yk(B.start,fe)});$.length>0?N.push.apply(N,Object(Qe.a)(z5(B,$,a))):N.push(B)});var j=bk(N,a,s,u);return s0=[],M1=[],t.raw?j:j.serialize()},bh;(function(o){o.presets=ye,o.registry=Io.create({type:"connector"}),o.registry.register(o.presets,!0)})(bh||(bh={}));var H5=Io.create,uS=function(){function o(i){Object(De.a)(this,o),this.cell=i,this.ids={},this.cache={}}return Object(be.a)(o,[{key:"get",value:function(){return Object.keys(this.ids)}},{key:"start",value:function(r,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",s=this.cell.getPropByPath(r),u=m.defaults(t,o.defaultOptions),l=this.getTiming(u.timing),c=this.getInterp(u.interp,s,n),f=0,d=Array.isArray(r)?r.join(a):r,v=Array.isArray(r)?r:r.split(a),p=function y(){var C=new Date().getTime();f===0&&(f=C);var E=C-f,w=E/u.duration;w<1?e.ids[d]=R.requestAnimationFrame(y):w=1;var x=c(l(w));e.cell.setPropByPath(v,x),t.progress&&t.progress(Object.assign({progress:w,currentValue:x},e.getArgs(d))),w===1&&(e.cell.notify("transition:end",e.getArgs(d)),e.cell.notify("transition:complete",e.getArgs(d)),t.complete&&t.complete(e.getArgs(d)),e.cell.notify("transition:finish",e.getArgs(d)),t.finish&&t.finish(e.getArgs(d)),e.clean(d))};return setTimeout(function(){e.stop(r,void 0,a),e.cache[d]={startValue:s,targetValue:n,options:u},e.ids[d]=R.requestAnimationFrame(p),e.cell.notify("transition:begin",e.getArgs(d)),e.cell.notify("transition:start",e.getArgs(d)),t.start&&t.start(e.getArgs(d))},t.delay),this.stop.bind(this,r,a,t)}},{key:"stop",value:function(r){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",a=Array.isArray(r)?r:r.split(t);return Object.keys(this.ids).filter(function(s){return m.isEqual(a,s.split(t).slice(0,a.length))}).forEach(function(s){R.cancelAnimationFrame(n.ids[s]);var u=n.cache[s],l=n.getArgs(s),c=Object.assign(Object.assign({},u.options),e),f=c.jumpedToEnd;f&&u.targetValue!=null&&(n.cell.setPropByPath(s,u.targetValue),n.cell.notify("transition:end",Object.assign({},l)),n.cell.notify("transition:complete",Object.assign({},l)),c.complete&&c.complete(Object.assign({},l)));var d=Object.assign({jumpedToEnd:f},l);n.cell.notify("transition:stop",Object.assign({},d)),c.stop&&c.stop(Object.assign({},d)),n.cell.notify("transition:finish",Object.assign({},l)),c.finish&&c.finish(Object.assign({},l)),n.clean(s)}),this}},{key:"clean",value:function(r){delete this.ids[r],delete this.cache[r]}},{key:"getTiming",value:function(r){return typeof r=="string"?Av[r]:r}},{key:"getInterp",value:function(r,n,e){return r?r(n,e):typeof e=="number"?Pv.number(n,e):typeof e=="string"?e[0]==="#"?Pv.color(n,e):Pv.unit(n,e):Pv.object(n,e)}},{key:"getArgs",value:function(r){var n=this.cache[r];return{path:r,startValue:n.startValue,targetValue:n.targetValue,cell:this.cell}}}]),o}();(function(o){o.defaultOptions={delay:10,duration:100,timing:"linear"}})(uS||(uS={}));var W5=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Ck=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(De.a)(this,r),n=i.call(this),n.pending=!1,n.changing=!1,n.data={},n.mutate(m.cloneDeep(e)),n.changed={},n}return Object(be.a)(r,[{key:"mutate",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.unset===!0,u=a.silent===!0,l=[],c=this.changing;this.changing=!0,c||(this.previous=m.cloneDeep(this.data),this.changed={});var f=this.data,d=this.previous,v=this.changed;if(Object.keys(e).forEach(function(p){var y=p,C=e[y];m.isEqual(f[y],C)||l.push(y),m.isEqual(d[y],C)?delete v[y]:v[y]=C,s?delete f[y]:f[y]=C}),!u&&l.length>0&&(this.pending=!0,this.pendingOptions=a,l.forEach(function(p){t.emit("change:*",{key:p,options:a,store:t,current:f[p],previous:d[p]})})),c)return this;if(!u)for(;this.pending;)this.pending=!1,this.emit("changed",{current:f,previous:d,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}},{key:"get",value:function(e,t){if(e==null)return this.data;var a=this.data[e];return a==null?t:a}},{key:"getPrevious",value:function(e){if(this.previous){var t=this.previous[e];return t==null?void 0:t}}},{key:"set",value:function(e,t,a){return e!=null&&(typeof e=="object"?this.mutate(e,t):this.mutate(Object(Xe.a)({},e,t),a)),this}},{key:"remove",value:function(e,t){var a=void 0,s={},u;if(typeof e=="string")s[e]=a,u=t;else if(Array.isArray(e))e.forEach(function(c){return s[c]=a}),u=t;else{for(var l in this.data)s[l]=a;u=e}return this.mutate(s,Object.assign(Object.assign({},u),{unset:!0})),this}},{key:"getByPath",value:function(e){return m.getByPath(this.data,e,"/")}},{key:"setByPath",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s="/",u=Array.isArray(e)?Object(Qe.a)(e):e.split(s),l=Array.isArray(e)?e.join(s):e,c=u[0],f=u.length;if(a.propertyPath=l,a.propertyValue=t,a.propertyPathArray=u,f===1)this.set(c,t,a);else{for(var d={},v=d,p=c,y=1;y<f;y+=1){var C=u[y],E=Number.isFinite(Number(C));v=v[p]=E?[]:{},p=C}m.setByPath(d,u,t,s);var w=m.cloneDeep(this.data);a.rewrite&&m.unsetByPath(w,e,s);var x=m.merge(w,d);this.set(c,x[c],a)}return this}},{key:"removeByPath",value:function(e,t){var a=Array.isArray(e)?e:e.split("/"),s=a[0];if(a.length===1)this.remove(s,t);else{var u=a.slice(1),l=m.cloneDeep(this.get(s));l&&m.unsetByPath(l,u),this.set(s,l,t)}return this}},{key:"hasChanged",value:function(e){return e==null?Object.keys(this.changed).length>0:e in this.changed}},{key:"getChanges",value:function(e){if(e==null)return this.hasChanged()?m.cloneDeep(this.changed):null;var t=this.changing?this.previous:this.data,a={},s;for(var u in e){var l=e[u];m.isEqual(t[u],l)||(a[u]=l,s=!0)}return s?m.cloneDeep(a):null}},{key:"toJSON",value:function(){return m.cloneDeep(this.data)}},{key:"clone",value:function(){var e=this.constructor;return new e(this.data)}},{key:"dispose",value:function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}]),r}(nu);W5([nu.dispose()],Ck.prototype,"dispose",null);var $5=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Ek=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},pi=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(De.a)(this,n),e=r.call(this);var a=e.constructor,s=a.getDefaults(!0),u=m.merge({},e.preprocess(s),e.preprocess(t));return e.id=u.id||_.uuid(),e.store=new Ck(u),e.animation=new uS(Object(Vo.a)(e)),e.setup(),e.init(),e.postprocess(t),e}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"init",value:function(){}},{key:"model",get:function(){return this._model}},{key:"model",set:function(t){this._model!==t&&(this._model=t)}},{key:"preprocess",value:function(t,a){var s=t.id,u=this.constructor,l=u.applyPropHooks(this,t);return s==null&&a!==!0&&(l.id=_.uuid()),l}},{key:"postprocess",value:function(t){}},{key:"setup",value:function(){var t=this;this.store.on("change:*",function(a){var s=a.key,u=a.current,l=a.previous,c=a.options;t.notify("change:*",{key:s,options:c,current:u,previous:l,cell:t}),t.notify("change:".concat(s),{options:c,current:u,previous:l,cell:t});var f=s;(f==="source"||f==="target")&&t.notify("change:terminal",{type:f,current:u,previous:l,options:c,cell:t})}),this.store.on("changed",function(a){var s=a.options;return t.notify("changed",{options:s,cell:t})})}},{key:"notify",value:function(t,a){this.trigger(t,a);var s=this.model;return s&&(s.notify("cell:".concat(t),a),this.isNode()?s.notify("node:".concat(t),Object.assign(Object.assign({},a),{node:this})):this.isEdge()&&s.notify("edge:".concat(t),Object.assign(Object.assign({},a),{edge:this}))),this}},{key:"isNode",value:function(){return!1}},{key:"isEdge",value:function(){return!1}},{key:"isSameStore",value:function(t){return this.store===t.store}},{key:"view",get:function(){return this.store.get("view")}},{key:"shape",get:function(){return this.store.get("shape","")}},{key:"getProp",value:function(t,a){return t==null?this.store.get():this.store.get(t,a)}},{key:"setProp",value:function(t,a,s){if(typeof t=="string")this.store.set(t,a,s);else{var u=this.preprocess(t,!0);this.store.set(m.merge({},this.getProp(),u),a),this.postprocess(t)}return this}},{key:"removeProp",value:function(t,a){return typeof t=="string"||Array.isArray(t)?this.store.removeByPath(t,a):this.store.remove(a),this}},{key:"hasChanged",value:function(t){return t==null?this.store.hasChanged():this.store.hasChanged(t)}},{key:"getPropByPath",value:function(t){return this.store.getByPath(t)}},{key:"setPropByPath",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model&&(t==="children"?this._children=a?a.map(function(l){return s.model.getCell(l)}).filter(function(l){return l!=null}):null:t==="parent"&&(this._parent=a?this.model.getCell(a):null)),this.store.setByPath(t,a,u),this}},{key:"removePropByPath",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Array.isArray(t)?t:t.split("/");return s[0]==="attrs"&&(a.dirty=!0),this.store.removeByPath(s,a),this}},{key:"prop",value:function(t,a,s){return t==null?this.getProp():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getPropByPath(t):a==null?this.removePropByPath(t,s||{}):this.setPropByPath(t,a,s||{}):this.setProp(t,a||{})}},{key:"previous",value:function(t){return this.store.getPrevious(t)}},{key:"zIndex",get:function(){return this.getZIndex()}},{key:"zIndex",set:function(t){t==null?this.removeZIndex():this.setZIndex(t)}},{key:"getZIndex",value:function(){return this.store.get("zIndex")}},{key:"setZIndex",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("zIndex",t,a),this}},{key:"removeZIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("zIndex",t),this}},{key:"toFront",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.model;if(a){var s=a.getMaxZIndex(),u;t.deep?(u=this.getDescendants({deep:!0,breadthFirst:!0}),u.unshift(this)):u=[this],s=s-u.length+1;var l=a.total(),c=a.indexOf(this)!==l-u.length;c||(c=u.some(function(f,d){return f.getZIndex()!==s+d})),c&&this.batchUpdate("to-front",function(){s+=u.length,u.forEach(function(f,d){f.setZIndex(s+d,t)})})}return this}},{key:"toBack",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.model;if(a){var s=a.getMinZIndex(),u;t.deep?(u=this.getDescendants({deep:!0,breadthFirst:!0}),u.unshift(this)):u=[this];var l=a.indexOf(this)!==0;l||(l=u.some(function(c,f){return c.getZIndex()!==s+f})),l&&this.batchUpdate("to-back",function(){s-=u.length,u.forEach(function(c,f){c.setZIndex(s+f,t)})})}return this}},{key:"markup",get:function(){return this.getMarkup()}},{key:"markup",set:function(t){t==null?this.removeMarkup():this.setMarkup(t)}},{key:"getMarkup",value:function(){var t=this.store.get("markup");if(t==null){var a=this.constructor;t=a.getMarkup()}return t}},{key:"setMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("markup",t,a),this}},{key:"removeMarkup",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("markup",t),this}},{key:"attrs",get:function(){return this.getAttrs()}},{key:"attrs",set:function(t){t==null?this.removeAttrs():this.setAttrs(t)}},{key:"getAttrs",value:function(){var t=this.store.get("attrs");return t?Object.assign({},t):{}}},{key:"setAttrs",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null)this.removeAttrs(s);else{var u=function(f){return a.store.set("attrs",f,s)};if(s.overwrite===!0)u(t);else{var l=this.getAttrs();s.deep===!1?u(Object.assign(Object.assign({},l),t)):u(m.merge({},l,t))}}return this}},{key:"replaceAttrs",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(t,Object.assign(Object.assign({},a),{overwrite:!0}))}},{key:"updateAttrs",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(t,Object.assign(Object.assign({},a),{deep:!1}))}},{key:"removeAttrs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("attrs",t),this}},{key:"getAttrDefinition",value:function(t){if(!t)return null;var a=this.constructor,s=a.getAttrHooks()||{},u=s[t]||Lc.registry.get(t);if(!u){var l=_.camelCase(t);u=s[l]||Lc.registry.get(l)}return u||null}},{key:"getAttrByPath",value:function(t){return t==null||t===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))}},{key:"setAttrByPath",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setPropByPath(this.prefixAttrPath(t),a,s),this}},{key:"removeAttrByPath",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePropByPath(this.prefixAttrPath(t),a),this}},{key:"prefixAttrPath",value:function(t){return Array.isArray(t)?["attrs"].concat(t):"attrs/".concat(t)}},{key:"attr",value:function(t,a,s){return t==null?this.getAttrByPath():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getAttrByPath(t):a==null?this.removeAttrByPath(t,s||{}):this.setAttrByPath(t,a,s||{}):this.setAttrs(t,a||{})}},{key:"visible",get:function(){return this.isVisible()}},{key:"visible",set:function(t){this.setVisible(t)}},{key:"setVisible",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("visible",t,a),this}},{key:"isVisible",value:function(){return this.store.get("visible")!==!1}},{key:"show",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()||this.setVisible(!0,t),this}},{key:"hide",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()&&this.setVisible(!1,t),this}},{key:"toggleVisible",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=typeof t=="boolean"?t:!this.isVisible(),u=typeof t=="boolean"?a:t;return s?this.show(u):this.hide(u),this}},{key:"data",get:function(){return this.getData()}},{key:"data",set:function(t){this.setData(t)}},{key:"getData",value:function(){return this.store.get("data")}},{key:"setData",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null)this.removeData(s);else{var u=function(f){return a.store.set("data",f,s)};if(s.overwrite===!0)u(t);else{var l=this.getData();s.deep===!1?u(typeof t=="object"?Object.assign(Object.assign({},l),t):t):u(m.merge({},l,t))}}return this}},{key:"replaceData",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(t,Object.assign(Object.assign({},a),{overwrite:!0}))}},{key:"updateData",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(t,Object.assign(Object.assign({},a),{deep:!1}))}},{key:"removeData",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("data",t),this}},{key:"parent",get:function(){return this.getParent()}},{key:"children",get:function(){return this.getChildren()}},{key:"getParentId",value:function(){return this.store.get("parent")}},{key:"getParent",value:function(){var t=this.getParentId();if(t&&this.model){var a=this.model.getCell(t);return this._parent=a,a}return null}},{key:"getChildren",value:function(){var t=this,a=this.store.get("children");if(a&&a.length&&this.model){var s=a.map(function(u){var l;return(l=t.model)===null||l===void 0?void 0:l.getCell(u)}).filter(function(u){return u!=null});return this._children=s,Object(Qe.a)(s)}return null}},{key:"hasParent",value:function(){return this.parent!=null}},{key:"isParentOf",value:function(t){return t!=null&&t.getParent()===this}},{key:"isChildOf",value:function(t){return t!=null&&this.getParent()===t}},{key:"eachChild",value:function(t,a){return this.children&&this.children.forEach(t,a),this}},{key:"filterChild",value:function(t,a){return this.children?this.children.filter(t,a):[]}},{key:"getChildCount",value:function(){return this.children==null?0:this.children.length}},{key:"getChildIndex",value:function(t){return this.children==null?-1:this.children.indexOf(t)}},{key:"getChildAt",value:function(t){return this.children!=null&&t>=0?this.children[t]:null}},{key:"getAncestors",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=[],s=this.getParent();s;)a.push(s),s=t.deep!==!1?s.getParent():null;return a}},{key:"getDescendants",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.deep!==!1){if(t.breadthFirst){for(var a=[],s=this.getChildren()||[];s.length>0;){var u=s.shift(),l=u.getChildren();a.push(u),l&&s.push.apply(s,Object(Qe.a)(l))}return a}{var c=this.getChildren()||[];return c.forEach(function(f){c.push.apply(c,Object(Qe.a)(f.getDescendants(t)))}),c}}return this.getChildren()||[]}},{key:"isDescendantOf",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null)return!1;if(a.deep!==!1){for(var s=this.getParent();s;){if(s===t)return!0;s=s.getParent()}return!1}return this.isChildOf(t)}},{key:"isAncestorOf",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t==null?!1:t.isDescendantOf(this,a)}},{key:"contains",value:function(t){return this.isAncestorOf(t)}},{key:"getCommonAncestor",value:function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n.getCommonAncestor.apply(n,[this].concat(a))}},{key:"setParent",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._parent=t,t?this.store.set("parent",t.id,a):this.store.remove("parent",a),this}},{key:"setChildren",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._children=t,t!=null?this.store.set("children",t.map(function(s){return s.id}),a):this.store.remove("children",a),this}},{key:"unembed",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.children;if(s!=null&&t!=null){var u=this.getChildIndex(t);u!==-1&&(s.splice(u,1),t.setParent(null,a),this.setChildren(s,a))}return this}},{key:"embed",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.addTo(this,a),this}},{key:"addTo",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n.isCell(t)?t.addChild(this,a):t.addCell(this,a),this}},{key:"insertTo",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.insertChild(this,a,s),this}},{key:"addChild",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertChild(t,void 0,a)}},{key:"insertChild",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null&&t!==this){var u=t.getParent(),l=this!==u,c=a;if(c==null&&(c=this.getChildCount(),l||(c-=1)),u){var f=u.getChildren();if(f){var d=f.indexOf(t);d>=0&&(t.setParent(null,s),f.splice(d,1),u.setChildren(f,s))}}var v=this.children;if(v==null?(v=[],v.push(t)):v.splice(c,0,t),t.setParent(this,s),this.setChildren(v,s),l&&this.model){var p=this.model.getIncomingEdges(this),y=this.model.getOutgoingEdges(this);p&&p.forEach(function(C){return C.updateParent(s)}),y&&y.forEach(function(C){return C.updateParent(s)})}this.model&&this.model.addCell(t,s)}return this}},{key:"removeFromParent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getParent();if(a!=null){var s=a.getChildIndex(this);a.removeChildAt(s,t)}return this}},{key:"removeChild",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getChildIndex(t);return this.removeChildAt(s,a)}},{key:"removeChildAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getChildAt(t),u=this.children;return u!=null&&s!=null&&(this.unembed(s,a),s.remove(a)),s}},{key:"remove",value:function(){var t=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.batchUpdate("remove",function(){var s=t.getParent();s&&s.removeChild(t,a),a.deep!==!1&&t.eachChild(function(u){return u.remove(a)}),t.model&&t.model.removeCell(t,a)}),this}},{key:"transition",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/";return this.animation.start(t,a,s,u)}},{key:"stopTransition",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/";return this.animation.stop(t,a,s),this}},{key:"getTransitions",value:function(){return this.animation.get()}},{key:"translate",value:function(t,a,s){return this}},{key:"scale",value:function(t,a,s,u){return this}},{key:"addTools",value:function(t,a,s){var u=Array.isArray(t)?t:[t],l=typeof a=="string"?a:null,c=typeof a=="object"?a:typeof s=="object"?s:{};if(c.reset)return this.setTools({name:l,items:u,local:c.local},c);var f=m.cloneDeep(this.getTools());if(f==null||l==null||f.name===l)return f==null&&(f={}),f.items||(f.items=[]),f.name=l,f.items=[].concat(Object(Qe.a)(f.items),Object(Qe.a)(u)),this.setTools(Object.assign({},f),c)}},{key:"setTools",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t==null?this.removeTools():this.store.set("tools",n.normalizeTools(t),a),this}},{key:"getTools",value:function(){return this.store.get("tools")}},{key:"removeTools",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("tools",t),this}},{key:"hasTools",value:function(t){var a=this.getTools();return a==null?!1:t==null?!0:a.name===t}},{key:"hasTool",value:function(t){var a=this.getTools();return a==null?!1:a.items.some(function(s){return typeof s=="string"?s===t:s.name===t})}},{key:"removeTool",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=m.cloneDeep(this.getTools());if(s){var u=!1,l=s.items.slice(),c=function(y){l.splice(y,1),u=!0};if(typeof t=="number")c(t);else for(var f=l.length-1;f>=0;f-=1){var d=l[f],v=typeof d=="string"?d===t:d.name===t;v&&c(f)}u&&(s.items=l,this.setTools(s,a))}return this}},{key:"getBBox",value:function(t){return new Sr}},{key:"getConnectionPoint",value:function(t,a){return new mt}},{key:"toJSON",value:function(){var t=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Object.assign({},this.store.get()),u=Object.prototype.toString,l=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!s.shape){var c=this.constructor;throw new Error("Unable to serialize ".concat(l,' missing "shape" prop, check the ').concat(l,' "').concat(c.name||u.call(c),'"'))}var f=this.constructor,d=a.diff===!0,v=s.attrs||{},p=f.getDefaults(!0),y=d?this.preprocess(p,!0):p,C=y.attrs||{},E={};Object.keys(s).forEach(function(N){var j=s[N];if(j!=null&&!Array.isArray(j)&&typeof j=="object"&&!m.isPlainObject(j))throw new Error("Can only serialize ".concat(l,' with plain-object props, but got a "').concat(u.call(j),'" type of key "').concat(N,'" on ').concat(l,' "').concat(t.id,'"'));if(N!=="attrs"&&N!=="shape"&&d){var B=y[N];m.isEqual(j,B)&&delete s[N]}}),Object.keys(v).forEach(function(N){var j=v[N],B=C[N];Object.keys(j).forEach(function($){var Z=j[$],fe=B?B[$]:null;Z!=null&&typeof Z=="object"&&!Array.isArray(Z)?Object.keys(Z).forEach(function(de){var xe=Z[de];if(B==null||fe==null||!m.isObject(fe)||!m.isEqual(fe[de],xe)){E[N]==null&&(E[N]={}),E[N][$]==null&&(E[N][$]={});var Ae=E[N][$];Ae[de]=xe}}):(B==null||!m.isEqual(fe,Z))&&(E[N]==null&&(E[N]={}),E[N][$]=Z)})});var w=Object.assign(Object.assign({},s),{attrs:m.isEmpty(E)?void 0:E});w.attrs==null&&delete w.attrs;var x=w;return x.angle===0&&delete x.angle,m.cloneDeep(x)}},{key:"clone",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t.deep){var a=Object.assign({},this.store.get());t.keepId||delete a.id,delete a.parent,delete a.children;var s=this.constructor;return new s(a)}var u=n.deepClone(this);return u[this.id]}},{key:"findView",value:function(t){return t.renderer.findViewByCell(this)}},{key:"startBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return this.notify("batch:start",{name:t,data:a,cell:this}),s&&s.startBatch(t,Object.assign(Object.assign({},a),{cell:this})),this}},{key:"stopBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return s&&s.stopBatch(t,Object.assign(Object.assign({},a),{cell:this})),this.notify("batch:stop",{name:t,data:a,cell:this}),this}},{key:"batchUpdate",value:function(t,a,s){var u=this.model;this.startBatch(t,s,u);var l=a();return this.stopBatch(t,s,u),l}},{key:"dispose",value:function(){this.removeFromParent(),this.store.dispose()}}],[{key:"config",value:function(t){var a=this,s=t.markup,u=t.propHooks,l=t.attrHooks,c=Ek(t,["markup","propHooks","attrHooks"]);if(s!=null&&(this.markup=s),u)if(this.propHooks=this.propHooks.slice(),Array.isArray(u)){var f;(f=this.propHooks).push.apply(f,Object(Qe.a)(u))}else typeof u=="function"?this.propHooks.push(u):Object.keys(u).forEach(function(d){var v=u[d];typeof v=="function"&&a.propHooks.push(v)});l&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),l)),this.defaults=m.merge({},this.defaults,c)}},{key:"getMarkup",value:function(){return this.markup}},{key:"getDefaults",value:function(t){return t?this.defaults:m.cloneDeep(this.defaults)}},{key:"getAttrHooks",value:function(){return this.attrHooks}},{key:"applyPropHooks",value:function(t,a){return this.propHooks.reduce(function(s,u){return u?A.call(u,t,s):s},a)}}]),n}(nu,Symbol.toStringTag);pi.defaults={},pi.attrHooks={},pi.propHooks=[],$5([nu.dispose()],pi.prototype,"dispose",null),function(o){function i(r){return typeof r=="string"?{items:[r]}:Array.isArray(r)?{items:r}:r.items?r:{items:[r]}}o.normalizeTools=i}(pi||(pi={})),function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"}o.isCell=i}(pi||(pi={})),function(o){function i(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var u=a.filter(function(c){return c!=null}).map(function(c){return c.getAncestors()}).sort(function(c,f){return c.length-f.length}),l=u.shift();return l.find(function(c){return u.every(function(f){return f.includes(c)})})||null}o.getCommonAncestor=i;function r(t){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=null,u=0,l=t.length;u<l;u+=1){var c=t[u],f=c.getBBox(a);if(f){if(c.isNode()){var d=c.getAngle();d!=null&&d!==0&&(f=f.bbox(d))}s=s==null?f:s.union(f)}}return s}o.getCellsBBox=r;function n(t){var a=[t].concat(Object(Qe.a)(t.getDescendants({deep:!0})));return o.cloneCells(a)}o.deepClone=n;function e(t){var a=I.uniq(t),s=a.reduce(function(u,l){return u[l.id]=l.clone(),u},{});return a.forEach(function(u){var l=s[u.id];if(l.isEdge()){var c=l.getSourceCellId(),f=l.getTargetCellId();c&&s[c]&&l.setSource(Object.assign(Object.assign({},l.getSource()),{cell:s[c].id})),f&&s[f]&&l.setTarget(Object.assign(Object.assign({},l.getTarget()),{cell:s[f].id}))}var d=u.getParent();d&&s[d.id]&&l.setParent(s[d.id]);var v=u.getChildren();if(v&&v.length){var p=v.reduce(function(y,C){return s[C.id]&&y.push(s[C.id]),y},[]);p.length>0&&l.setChildren(p)}}),s}o.cloneCells=e}(pi||(pi={})),function(o){o.config({propHooks:function(r){var n=r.tools,e=Ek(r,["tools"]);return n&&(e.tools=o.normalizeTools(n)),e}})}(pi||(pi={}));var ep;(function(o){var i,r;function n(a,s){return s?i!=null&&i.exist(a):r!=null&&r.exist(a)}o.exist=n;function e(a){i=a}o.setEdgeRegistry=e;function t(a){r=a}o.setNodeRegistry=t})(ep||(ep={}));var X5=function(){function o(i){Object(De.a)(this,o),this.ports=[],this.groups={},this.init(m.cloneDeep(i))}return Object(be.a)(o,[{key:"getPorts",value:function(){return this.ports}},{key:"getGroup",value:function(r){return r!=null?this.groups[r]:null}},{key:"getPortsByGroup",value:function(r){return this.ports.filter(function(n){return n.group===r||n.group==null&&r==null})}},{key:"getPortsLayoutByGroup",value:function(r,n){var e=this,t=this.getPortsByGroup(r),a=r?this.getGroup(r):null,s=a?a.position:null,u=s?s.name:null,l;if(u!=null){var c=gh.registry.get(u);if(c==null)return gh.registry.onNotFound(u);l=c}else l=gh.presets.left;var f=t.map(function(p){return p&&p.position&&p.position.args||{}}),d=s&&s.args||{},v=l(f,n,d);return v.map(function(p,y){var C=t[y];return{portLayout:p,portId:C.id,portSize:C.size,portAttrs:C.attrs,labelSize:C.label.size,labelLayout:e.getPortLabelLayout(C,mt.create(p.position),n)}})}},{key:"init",value:function(r){var n=this,e=r.groups,t=r.items;e!=null&&Object.keys(e).forEach(function(a){n.groups[a]=n.parseGroup(e[a])}),Array.isArray(t)&&t.forEach(function(a){n.ports.push(n.parsePort(a))})}},{key:"parseGroup",value:function(r){return Object.assign(Object.assign({},r),{label:this.getLabel(r,!0),position:this.getPortPosition(r.position,!0)})}},{key:"parsePort",value:function(r){var n=Object.assign({},r),e=this.getGroup(r.group)||{};return n.markup=n.markup||e.markup,n.attrs=m.merge({},e.attrs,n.attrs),n.position=this.createPosition(e,n),n.label=m.merge({},e.label,this.getLabel(n)),n.zIndex=this.getZIndex(e,n),n.size=Object.assign(Object.assign({},e.size),n.size),n}},{key:"getZIndex",value:function(r,n){return typeof n.zIndex=="number"?n.zIndex:typeof r.zIndex=="number"||r.zIndex==="auto"?r.zIndex:"auto"}},{key:"createPosition",value:function(r,n){return m.merge({name:"left",args:{}},r.position,{args:n.args})}},{key:"getPortPosition",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r==null){if(n)return{name:"left",args:{}}}else{if(typeof r=="string")return{name:r,args:{}};if(Array.isArray(r))return{name:"absolute",args:{x:r[0],y:r[1]}};if(typeof r=="object")return r}return{args:{}}}},{key:"getPortLabelPosition",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r==null){if(n)return{name:"left",args:{}}}else{if(typeof r=="string")return{name:r,args:{}};if(typeof r=="object")return r}return{args:{}}}},{key:"getLabel",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=r.label||{};return e.position=this.getPortLabelPosition(e.position,n),e}},{key:"getPortLabelLayout",value:function(r,n,e){var t=r.label.position.name||"left",a=r.label.position.args||{},s=Mv.registry.get(t)||Mv.presets.left;return s?s(n,e,a):null}}]),o}(),A1=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Wi=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(De.a)(this,n),e=r.call(this,t),e.initPorts(),e}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"preprocess",value:function(t,a){var s=t.x,u=t.y,l=t.width,c=t.height,f=A1(t,["x","y","width","height"]);if(s!=null||u!=null){var d=f.position;f.position=Object.assign(Object.assign({},d),{x:s!=null?s:d?d.x:0,y:u!=null?u:d?d.y:0})}if(l!=null||c!=null){var v=f.size;f.size=Object.assign(Object.assign({},v),{width:l!=null?l:v?v.width:0,height:c!=null?c:v?v.height:0})}return Object(la.a)(Object(ca.a)(n.prototype),"preprocess",this).call(this,f,a)}},{key:"isNode",value:function(){return!0}},{key:"size",value:function(t,a,s){return t===void 0?this.getSize():typeof t=="number"?this.setSize(t,a,s):this.setSize(t,a)}},{key:"getSize",value:function(){var t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}},{key:"setSize",value:function(t,a,s){return typeof t=="object"?this.resize(t.width,t.height,a):this.resize(t,a,s),this}},{key:"resize",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch("resize",s);var u=s.direction;if(u){var l=this.getSize();switch(u){case"left":case"right":a=l.height;break;case"top":case"bottom":t=l.width;break;default:break}var c={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3},f=c[u],d=ti.normalize(this.getAngle()||0);s.absolute&&(f+=Math.floor((d+45)/90),f%=4);var v=this.getBBox(),p;f===0?p=v.getBottomLeft():f===1?p=v.getCorner():f===2?p=v.getTopRight():p=v.getOrigin();var y=p.clone().rotate(-d,v.getCenter()),C=Math.sqrt(t*t+a*a)/2,E=f*Math.PI/2;E+=Math.atan(f%2==0?a/t:t/a),E-=ti.toRad(d);var w=mt.fromPolar(C,E,y),x=w.clone().translate(t/-2,a/-2);this.store.set("size",{width:t,height:a},s),this.setPosition(x.x,x.y,s)}else this.store.set("size",{width:t,height:a},s);return this.stopBatch("resize",s),this}},{key:"scale",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.getBBox().scale(t,a,s==null?void 0:s);return this.startBatch("scale",u),this.setPosition(l.x,l.y,u),this.resize(l.width,l.height,u),this.stopBatch("scale"),this}},{key:"position",value:function(t,a,s){return typeof t=="number"?this.setPosition(t,a,s):this.getPosition(t)}},{key:"getPosition",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.relative){var a=this.getParent();if(a!=null&&a.isNode()){var s=this.getPosition(),u=a.getPosition();return{x:s.x-u.x,y:s.y-u.y}}}var l=this.store.get("position");return l?Object.assign({},l):{x:0,y:0}}},{key:"setPosition",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u,l,c;if(typeof t=="object"?(u=t.x,l=t.y,c=a||{}):(u=t,l=a,c=s||{}),c.relative){var f=this.getParent();if(f!=null&&f.isNode()){var d=f.getPosition();u+=d.x,l+=d.y}}if(c.deep){var v=this.getPosition();this.translate(u-v.x,l-v.y,c)}else this.store.set("position",{x:u,y:l},c);return this}},{key:"translate",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t===0&&a===0)return this;s.translateBy=s.translateBy||this.id;var u=this.getPosition();if(s.restrict!=null&&s.translateBy===this.id){var l=this.getBBox({deep:!0}),c=s.restrict,f=u.x-l.x,d=u.y-l.y,v=Math.max(c.x+f,Math.min(c.x+c.width+f-l.width,u.x+t)),p=Math.max(c.y+d,Math.min(c.y+c.height+d-l.height,u.y+a));t=v-u.x,a=p-u.y}var y={x:u.x+t,y:u.y+a};return s.tx=t,s.ty=a,s.transition?(typeof s.transition!="object"&&(s.transition={}),this.transition("position",y,Object.assign(Object.assign({},s.transition),{interp:Pv.object})),this.eachChild(function(C){var E,w=(E=s.exclude)===null||E===void 0?void 0:E.includes(C);w||C.translate(t,a,s)})):(this.startBatch("translate",s),this.store.set("position",y,s),this.eachChild(function(C){var E,w=(E=s.exclude)===null||E===void 0?void 0:E.includes(C);w||C.translate(t,a,s)}),this.stopBatch("translate",s)),this}},{key:"angle",value:function(t,a){return t==null?this.getAngle():this.rotate(t,a)}},{key:"getAngle",value:function(){return this.store.get("angle",0)}},{key:"rotate",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getAngle();if(a.center){var u=this.getSize(),l=this.getPosition(),c=this.getBBox().getCenter();c.rotate(s-t,a.center);var f=c.x-u.width/2-l.x,d=c.y-u.height/2-l.y;this.startBatch("rotate",{angle:t,options:a}),this.setPosition(l.x+f,l.y+d,a),this.rotate(t,Object.assign(Object.assign({},a),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",a.absolute?t:(s+t)%360,a);return this}},{key:"getBBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.deep){var a=this.getDescendants({deep:!0,breadthFirst:!0});return a.push(this),pi.getCellsBBox(a)}return Sr.fromPositionAndSize(this.getPosition(),this.getSize())}},{key:"getConnectionPoint",value:function(t,a){var s=this.getBBox(),u=s.getCenter(),l=t.getTerminal(a);if(l==null)return u;var c=l.port;if(!c||!this.hasPort(c))return u;var f=this.getPort(c);if(!f||!f.group)return u;var d=this.getPortsPosition(f.group),v=d[c].position,p=mt.create(v).translate(s.getOrigin()),y=this.getAngle();return y&&p.rotate(-y,u),p}},{key:"fit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getChildren()||[],s=a.filter(function(p){return p.isNode()});if(s.length===0)return this;this.startBatch("fit-embeds",t),t.deep&&s.forEach(function(p){return p.fit(t)});var u=pi.getCellsBBox(s),l=u.x,c=u.y,f=u.width,d=u.height,v=M.normalizeSides(t.padding);return l-=v.left,c-=v.top,f+=v.left+v.right,d+=v.bottom+v.top,this.store.set({position:{x:l,y:c},size:{width:f,height:d}},t),this.stopBatch("fit-embeds"),this}},{key:"portContainerMarkup",get:function(){return this.getPortContainerMarkup()}},{key:"portContainerMarkup",set:function(t){this.setPortContainerMarkup(t)}},{key:"getDefaultPortContainerMarkup",value:function(){return this.store.get("defaultPortContainerMarkup")||ci.getPortContainerMarkup()}},{key:"getPortContainerMarkup",value:function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}},{key:"setPortContainerMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portContainerMarkup",ci.clone(t),a),this}},{key:"portMarkup",get:function(){return this.getPortMarkup()}},{key:"portMarkup",set:function(t){this.setPortMarkup(t)}},{key:"getDefaultPortMarkup",value:function(){return this.store.get("defaultPortMarkup")||ci.getPortMarkup()}},{key:"getPortMarkup",value:function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}},{key:"setPortMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portMarkup",ci.clone(t),a),this}},{key:"portLabelMarkup",get:function(){return this.getPortLabelMarkup()}},{key:"portLabelMarkup",set:function(t){this.setPortLabelMarkup(t)}},{key:"getDefaultPortLabelMarkup",value:function(){return this.store.get("defaultPortLabelMarkup")||ci.getPortLabelMarkup()}},{key:"getPortLabelMarkup",value:function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}},{key:"setPortLabelMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portLabelMarkup",ci.clone(t),a),this}},{key:"ports",get:function(){var t=this.store.get("ports",{items:[]});return t.items==null&&(t.items=[]),t}},{key:"getPorts",value:function(){return m.cloneDeep(this.ports.items)}},{key:"getPortsByGroup",value:function(t){return this.getPorts().filter(function(a){return a.group===t})}},{key:"getPort",value:function(t){return m.cloneDeep(this.ports.items.find(function(a){return a.id&&a.id===t}))}},{key:"getPortAt",value:function(t){return this.ports.items[t]||null}},{key:"hasPorts",value:function(){return this.ports.items.length>0}},{key:"hasPort",value:function(t){return this.getPortIndex(t)!==-1}},{key:"getPortIndex",value:function(t){var a=typeof t=="string"?t:t.id;return a!=null?this.ports.items.findIndex(function(s){return s.id===a}):-1}},{key:"getPortsPosition",value:function(t){var a=this.getSize(),s=this.port.getPortsLayoutByGroup(t,new Sr(0,0,a.width,a.height));return s.reduce(function(u,l){var c=l.portLayout;return u[l.portId]={position:Object.assign({},c.position),angle:c.angle||0},u},{})}},{key:"getPortProp",value:function(t,a){return this.getPropByPath(this.prefixPortPath(t,a))}},{key:"setPortProp",value:function(t,a,s,u){if(typeof a=="string"||Array.isArray(a)){var l=this.prefixPortPath(t,a),c=s;return this.setPropByPath(l,c,u)}var f=this.prefixPortPath(t),d=a;return this.setPropByPath(f,d,s)}},{key:"removePortProp",value:function(t,a,s){return typeof a=="string"||Array.isArray(a)?this.removePropByPath(this.prefixPortPath(t,a),s):this.removePropByPath(this.prefixPortPath(t),a)}},{key:"portProp",value:function(t,a,s,u){return a==null?this.getPortProp(t):typeof a=="string"||Array.isArray(a)?arguments.length===2?this.getPortProp(t,a):s==null?this.removePortProp(t,a,u):this.setPortProp(t,a,s,u):this.setPortProp(t,a,s)}},{key:"prefixPortPath",value:function(t,a){var s=this.getPortIndex(t);if(s===-1)throw new Error('Unable to find port with id: "'.concat(t,'"'));return a==null||a===""?["ports","items","".concat(s)]:Array.isArray(a)?["ports","items","".concat(s)].concat(Object(Qe.a)(a)):"ports/items/".concat(s,"/").concat(a)}},{key:"addPort",value:function(t,a){var s=Object(Qe.a)(this.ports.items);return s.push(t),this.setPropByPath("ports/items",s,a),this}},{key:"addPorts",value:function(t,a){return this.setPropByPath("ports/items",[].concat(Object(Qe.a)(this.ports.items),Object(Qe.a)(t)),a),this}},{key:"insertPort",value:function(t,a,s){var u=Object(Qe.a)(this.ports.items);return u.splice(t,0,a),this.setPropByPath("ports/items",u,s),this}},{key:"removePort",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePortAt(this.getPortIndex(t),a)}},{key:"removePortAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t>=0){var s=Object(Qe.a)(this.ports.items);s.splice(t,1),a.rewrite=!0,this.setPropByPath("ports/items",s,a)}return this}},{key:"removePorts",value:function(t,a){var s;if(Array.isArray(t)){if(s=a||{},t.length){s.rewrite=!0;var u=Object(Qe.a)(this.ports.items),l=u.filter(function(c){return!t.some(function(f){var d=typeof f=="string"?f:f.id;return c.id===d})});this.setPropByPath("ports/items",l,s)}}else s=t||{},s.rewrite=!0,this.setPropByPath("ports/items",[],s);return this}},{key:"getParsedPorts",value:function(){return this.port.getPorts()}},{key:"getParsedGroups",value:function(){return this.port.groups}},{key:"getPortsLayoutByGroup",value:function(t,a){return this.port.getPortsLayoutByGroup(t,a)}},{key:"initPorts",value:function(){var t=this;this.updatePortData(),this.on("change:ports",function(){t.processRemovedPort(),t.updatePortData()})}},{key:"processRemovedPort",value:function(){var t=this.ports,a={};t.items.forEach(function(d){d.id&&(a[d.id]=!0)});var s={},u=this.store.getPrevious("ports")||{items:[]};u.items.forEach(function(d){d.id&&!a[d.id]&&(s[d.id]=!0)});var l=this.model;if(l&&!m.isEmpty(s)){var c=l.getConnectedEdges(this,{incoming:!0});c.forEach(function(d){var v=d.getTargetPortId();v&&s[v]&&d.remove()});var f=l.getConnectedEdges(this,{outgoing:!0});f.forEach(function(d){var v=d.getSourcePortId();v&&s[v]&&d.remove()})}}},{key:"validatePorts",value:function(){var t=this,a={},s=[];return this.ports.items.forEach(function(u){typeof u!="object"&&s.push("Invalid port ".concat(u,".")),u.id==null&&(u.id=t.generatePortId()),a[u.id]&&s.push("Duplicitied port id."),a[u.id]=!0}),s}},{key:"generatePortId",value:function(){return _.uuid()}},{key:"updatePortData",value:function(){var t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));var a=this.port?this.port.getPorts():null;this.port=new X5(this.ports);var s=this.port.getPorts(),u=a?s.filter(function(c){return a.find(function(f){return f.id===c.id})?null:c}):Object(Qe.a)(s),l=a?a.filter(function(c){return s.find(function(f){return f.id===c.id})?null:c}):[];u.length>0&&this.notify("ports:added",{added:u,cell:this,node:this}),l.length>0&&this.notify("ports:removed",{removed:l,cell:this,node:this})}}]),n}(pi,Symbol.toStringTag);Wi.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.size=="function"&&typeof e.position=="function"}o.isNode=i}(Wi||(Wi={})),function(o){o.config({propHooks:function(r){var n=r.ports,e=A1(r,["ports"]);return n&&(e.ports=Array.isArray(n)?{items:n}:n),e}})}(Wi||(Wi={})),function(o){o.registry=Io.create({type:"node",process:function(r,n){if(ep.exist(r,!0))throw new Error("Node with name '".concat(r,"' was registered by anthor Edge"));if(typeof n=="function")return n.config({shape:r}),n;var e=o,t=n.inherit,a=A1(n,["inherit"]);if(t)if(typeof t=="string"){var s=this.get(t);s==null?this.onNotFound(t,"inherited"):e=s}else e=t;a.constructorName==null&&(a.constructorName=r);var u=e.define.call(e,a);return u.config({shape:r}),u}}),ep.setNodeRegistry(o.registry)}(Wi||(Wi={})),function(o){var i=0;function r(t){return t?_.pascalCase(t):(i+=1,"CustomNode".concat(i))}function n(t){var a=t.constructorName,s=t.overwrite,u=A1(t,["constructorName","overwrite"]),l=m.createClass(r(a||u.shape),this);return l.config(u),u.shape&&o.registry.register(u.shape,l,s),l}o.define=n;function e(t){var a=t.shape||"rect",s=o.registry.get(a);return s?new s(t):o.registry.onNotFound(a)}o.create=e}(Wi||(Wi={}));var K5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Gs=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"label",get:function(){return this.getLabel()},set:function(e){this.setLabel(e)}},{key:"getLabel",value:function(){return this.getAttrByPath("text/text")}},{key:"setLabel",value:function(e,t){return e==null?this.removeLabel():this.setAttrByPath("text/text",e,t),this}},{key:"removeLabel",value:function(){return this.removeAttrByPath("text/text"),this}}]),r}(Wi);(function(o){o.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},o.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},o.config({attrs:{text:Object.assign({},o.labelAttr)},propHooks:function(r){var n=r.label,e=K5(r,["label"]);return n&&m.setByPath(e,"attrs/text/text",n),e},visible:!0})})(Gs||(Gs={}));var Y5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r};function Z5(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return'<g class="rotatable"><g class="scalable"><'.concat(o,"/></g>").concat(i?"":"<text/>","</g>")}function lS(o){return"basic.".concat(o)}function u0(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"xlink:href",i=function(n){var e=n.imageUrl,t=n.imageWidth,a=n.imageHeight,s=Y5(n,["imageUrl","imageWidth","imageHeight"]);if(e!=null||t!=null||a!=null){var u=function(){if(s.attrs){var c=s.attrs.image;e!=null&&(c[o]=e),t!=null&&(c.width=t),a!=null&&(c.height=a),s.attrs.image=c}};s.attrs?(s.attrs.image==null&&(s.attrs.image={}),u()):(s.attrs={image:{}},u())}return s};return i}function kf(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=lS(o),e={constructorName:n,attrs:Object(Xe.a)({".":{fill:"#ffffff",stroke:"none"}},o,{fill:"#ffffff",stroke:"#000000"})};r.ignoreMarkup||(e.markup=Z5(o,r.noText===!0));var t=r.parent||Gs;return t.define(m.merge(e,i,{shape:n}))}var XQ=kf("rect",{attrs:{rect:{width:100,height:60}}}),KQ=kf("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),YQ=kf("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),ZQ=kf("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),JQ=kf("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),QQ=kf("image",{attrs:{text:{refY:null,refDy:16}},propHooks:u0()}),J5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Ok=kf("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks:function(i){var r=i.d,n=J5(i,["d"]);return r!=null&&m.setByPath(n,"attrs/path/d",r),n}}),qQ=kf("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:Ok,ignoreMarkup:!0}),eq=kf("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:Ok,ignoreMarkup:!0}),P1=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Co=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(De.a)(this,n),r.call(this,e)}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"preprocess",value:function(t,a){var s=t.source,u=t.sourceCell,l=t.sourcePort,c=t.sourcePoint,f=t.target,d=t.targetCell,v=t.targetPort,p=t.targetPoint,y=P1(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),C=y,E=function(fe){return typeof fe=="string"||typeof fe=="number"};if(s!=null)if(pi.isCell(s))C.source={cell:s.id};else if(E(s))C.source={cell:s};else if(mt.isPoint(s))C.source=s.toJSON();else if(Array.isArray(s))C.source={x:s[0],y:s[1]};else{var w=s.cell;pi.isCell(w)?C.source=Object.assign(Object.assign({},s),{cell:w.id}):C.source=s}if(u!=null||l!=null){var x=C.source;if(u!=null){var N=E(u)?u:u.id;x?x.cell=N:x=C.source={cell:N}}l!=null&&x&&(x.port=l)}else c!=null&&(C.source=mt.create(c).toJSON());if(f!=null)if(pi.isCell(f))C.target={cell:f.id};else if(E(f))C.target={cell:f};else if(mt.isPoint(f))C.target=f.toJSON();else if(Array.isArray(f))C.target={x:f[0],y:f[1]};else{var j=f.cell;pi.isCell(j)?C.target=Object.assign(Object.assign({},f),{cell:j.id}):C.target=f}if(d!=null||v!=null){var B=C.target;if(d!=null){var $=E(d)?d:d.id;B?B.cell=$:B=C.target={cell:$}}v!=null&&B&&(B.port=v)}else p!=null&&(C.target=mt.create(p).toJSON());return Object(la.a)(Object(ca.a)(n.prototype),"preprocess",this).call(this,C,a)}},{key:"setup",value:function(){var t=this;Object(la.a)(Object(ca.a)(n.prototype),"setup",this).call(this),this.on("change:labels",function(a){return t.onLabelsChanged(a)}),this.on("change:vertices",function(a){return t.onVertexsChanged(a)})}},{key:"isEdge",value:function(){return!0}},{key:"disconnect",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}},{key:"source",get:function(){return this.getSource()}},{key:"source",set:function(t){this.setSource(t)}},{key:"getSource",value:function(){return this.getTerminal("source")}},{key:"getSourceCellId",value:function(){return this.source.cell}},{key:"getSourcePortId",value:function(){return this.source.port}},{key:"setSource",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("source",t,a,s)}},{key:"target",get:function(){return this.getTarget()}},{key:"target",set:function(t){this.setTarget(t)}},{key:"getTarget",value:function(){return this.getTerminal("target")}},{key:"getTargetCellId",value:function(){return this.target.cell}},{key:"getTargetPortId",value:function(){return this.target.port}},{key:"setTarget",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("target",t,a,s)}},{key:"getTerminal",value:function(t){return Object.assign({},this.store.get(t))}},{key:"setTerminal",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(pi.isCell(a))return this.store.set(t,m.merge({},s,{cell:a.id}),u),this;var l=a;return mt.isPoint(a)||l.x!=null&&l.y!=null?(this.store.set(t,m.merge({},s,{x:l.x,y:l.y}),u),this):(this.store.set(t,m.cloneDeep(a),u),this)}},{key:"getSourcePoint",value:function(){return this.getTerminalPoint("source")}},{key:"getTargetPoint",value:function(){return this.getTerminalPoint("target")}},{key:"getTerminalPoint",value:function(t){var a=this[t];if(mt.isPointLike(a))return mt.create(a);var s=this.getTerminalCell(t);return s?s.getConnectionPoint(this,t):new mt}},{key:"getSourceCell",value:function(){return this.getTerminalCell("source")}},{key:"getTargetCell",value:function(){return this.getTerminalCell("target")}},{key:"getTerminalCell",value:function(t){if(this.model){var a=t==="source"?this.getSourceCellId():this.getTargetCellId();if(a)return this.model.getCell(a)}return null}},{key:"getSourceNode",value:function(){return this.getTerminalNode("source")}},{key:"getTargetNode",value:function(){return this.getTerminalNode("target")}},{key:"getTerminalNode",value:function(t){for(var a=this,s={};a&&a.isEdge();){if(s[a.id])return null;s[a.id]=!0,a=a.getTerminalCell(t)}return a&&a.isNode()?a:null}},{key:"router",get:function(){return this.getRouter()}},{key:"router",set:function(t){t==null?this.removeRouter():this.setRouter(t)}},{key:"getRouter",value:function(){return this.store.get("router")}},{key:"setRouter",value:function(t,a,s){return typeof t=="object"?this.store.set("router",t,a):this.store.set("router",{name:t,args:a},s),this}},{key:"removeRouter",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("router",t),this}},{key:"connector",get:function(){return this.getConnector()}},{key:"connector",set:function(t){t==null?this.removeConnector():this.setConnector(t)}},{key:"getConnector",value:function(){return this.store.get("connector")}},{key:"setConnector",value:function(t,a,s){return typeof t=="object"?this.store.set("connector",t,a):this.store.set("connector",{name:t,args:a},s),this}},{key:"removeConnector",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("connector",t)}},{key:"strategy",get:function(){return this.getStrategy()}},{key:"strategy",set:function(t){t==null?this.removeStrategy():this.setStrategy(t)}},{key:"getStrategy",value:function(){return this.store.get("strategy")}},{key:"setStrategy",value:function(t,a,s){return typeof t=="object"?this.store.set("strategy",t,a):this.store.set("strategy",{name:t,args:a},s),this}},{key:"removeStrategy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("strategy",t)}},{key:"getDefaultLabel",value:function(){var t=this.constructor,a=this.store.get("defaultLabel")||t.defaultLabel||{};return m.cloneDeep(a)}},{key:"labels",get:function(){return this.getLabels()}},{key:"labels",set:function(t){this.setLabels(t)}},{key:"getLabels",value:function(){var t=this;return Object(Qe.a)(this.store.get("labels",[])).map(function(a){return t.parseLabel(a)})}},{key:"setLabels",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("labels",Array.isArray(t)?t:[t],a),this}},{key:"insertLabel",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=this.getLabels(),l=u.length,c=a!=null&&Number.isFinite(a)?a:l;return c<0&&(c=l+c+1),u.splice(c,0,this.parseLabel(t)),this.setLabels(u,s)}},{key:"appendLabel",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertLabel(t,-1,a)}},{key:"getLabelAt",value:function(t){var a=this.getLabels();return t!=null&&Number.isFinite(t)?this.parseLabel(a[t]):null}},{key:"setLabelAt",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null&&Number.isFinite(t)){var u=this.getLabels();u[t]=this.parseLabel(a),this.setLabels(u,s)}return this}},{key:"removeLabelAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getLabels(),u=t!=null&&Number.isFinite(t)?t:-1,l=s.splice(u,1);return this.setLabels(s,a),l.length?l[0]:null}},{key:"parseLabel",value:function(t){if(typeof t=="string"){var a=this.constructor;return a.parseStringLabel(t)}return t}},{key:"onLabelsChanged",value:function(t){var a=t.previous,s=t.current,u=a&&s?s.filter(function(c){return a.find(function(f){return c===f||m.isEqual(c,f)})?null:c}):s?Object(Qe.a)(s):[],l=a&&s?a.filter(function(c){return s.find(function(f){return c===f||m.isEqual(c,f)})?null:c}):a?Object(Qe.a)(a):[];u.length>0&&this.notify("labels:added",{added:u,cell:this,edge:this}),l.length>0&&this.notify("labels:removed",{removed:l,cell:this,edge:this})}},{key:"vertexMarkup",get:function(){return this.getVertexMarkup()}},{key:"vertexMarkup",set:function(t){this.setVertexMarkup(t)}},{key:"getDefaultVertexMarkup",value:function(){return this.store.get("defaultVertexMarkup")||ci.getEdgeVertexMarkup()}},{key:"getVertexMarkup",value:function(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}},{key:"setVertexMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("vertexMarkup",ci.clone(t),a),this}},{key:"vertices",get:function(){return this.getVertices()}},{key:"vertices",set:function(t){this.setVertices(t)}},{key:"getVertices",value:function(){return Object(Qe.a)(this.store.get("vertices",[]))}},{key:"setVertices",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Array.isArray(t)?t:[t];return this.store.set("vertices",s.map(function(u){return mt.toJSON(u)}),a),this}},{key:"insertVertex",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=this.getVertices(),l=u.length,c=a!=null&&Number.isFinite(a)?a:l;return c<0&&(c=l+c+1),u.splice(c,0,mt.toJSON(t)),this.setVertices(u,s)}},{key:"appendVertex",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertVertex(t,-1,a)}},{key:"getVertexAt",value:function(t){if(t!=null&&Number.isFinite(t)){var a=this.getVertices();return a[t]}return null}},{key:"setVertexAt",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null&&Number.isFinite(t)){var u=this.getVertices();u[t]=a,this.setVertices(u,s)}return this}},{key:"removeVertexAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getVertices(),u=t!=null&&Number.isFinite(t)?t:-1;return s.splice(u,1),this.setVertices(s,a)}},{key:"onVertexsChanged",value:function(t){var a=t.previous,s=t.current,u=a&&s?s.filter(function(c){return a.find(function(f){return mt.equals(c,f)})?null:c}):s?Object(Qe.a)(s):[],l=a&&s?a.filter(function(c){return s.find(function(f){return mt.equals(c,f)})?null:c}):a?Object(Qe.a)(a):[];u.length>0&&this.notify("vertexs:added",{added:u,cell:this,edge:this}),l.length>0&&this.notify("vertexs:removed",{removed:l,cell:this,edge:this})}},{key:"getDefaultMarkup",value:function(){return this.store.get("defaultMarkup")||ci.getEdgeMarkup()}},{key:"getMarkup",value:function(){return Object(la.a)(Object(ca.a)(n.prototype),"getMarkup",this).call(this)||this.getDefaultMarkup()}},{key:"toolMarkup",get:function(){return this.getToolMarkup()}},{key:"toolMarkup",set:function(t){this.setToolMarkup(t)}},{key:"getDefaultToolMarkup",value:function(){return this.store.get("defaultToolMarkup")||ci.getEdgeToolMarkup()}},{key:"getToolMarkup",value:function(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}},{key:"setToolMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("toolMarkup",t,a),this}},{key:"doubleToolMarkup",get:function(){return this.getDoubleToolMarkup()}},{key:"doubleToolMarkup",set:function(t){this.setDoubleToolMarkup(t)}},{key:"getDefaultDoubleToolMarkup",value:function(){return this.store.get("defaultDoubleToolMarkup")}},{key:"getDoubleToolMarkup",value:function(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}},{key:"setDoubleToolMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("doubleToolMarkup",t,a),this}},{key:"arrowheadMarkup",get:function(){return this.getArrowheadMarkup()}},{key:"arrowheadMarkup",set:function(t){this.setArrowheadMarkup(t)}},{key:"getDefaultArrowheadMarkup",value:function(){return this.store.get("defaultArrowheadMarkup")||ci.getEdgeArrowheadMarkup()}},{key:"getArrowheadMarkup",value:function(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}},{key:"setArrowheadMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("arrowheadMarkup",t,a),this}},{key:"translate",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return s.translateBy=s.translateBy||this.id,s.tx=t,s.ty=a,this.applyToPoints(function(u){return{x:(u.x||0)+t,y:(u.y||0)+a}},s)}},{key:"scale",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.applyToPoints(function(l){return mt.create(l).scale(t,a,s).toJSON()},u)}},{key:"applyToPoints",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s={},u=this.getSource(),l=this.getTarget();mt.isPointLike(u)&&(s.source=t(u)),mt.isPointLike(l)&&(s.target=t(l));var c=this.getVertices();return c.length>0&&(s.vertices=c.map(t)),this.store.set(s,a),this}},{key:"getBBox",value:function(){return this.getPolyline().bbox()}},{key:"getConnectionPoint",value:function(){return this.getPolyline().pointAt(.5)}},{key:"getPolyline",value:function(){var t=[this.getSourcePoint()].concat(Object(Qe.a)(this.getVertices().map(function(a){return mt.create(a)})),[this.getTargetPoint()]);return new Cu(t)}},{key:"updateParent",value:function(t){var a=null,s=this.getSourceCell(),u=this.getTargetCell(),l=this.getParent();return s&&u&&(s===u||s.isDescendantOf(u)?a=u:u.isDescendantOf(s)?a=s:a=pi.getCommonAncestor(s,u)),l&&(!a||a.id!==l.id)&&l.unembed(this,t),a&&a.embed(this,t),a}},{key:"hasLoop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getSource(),s=this.getTarget(),u=a.cell,l=s.cell;if(!u||!l)return!1;var c=u===l;if(!c&&t.deep&&this._model){var f=this.getSourceCell(),d=this.getTargetCell();f&&d&&(c=f.isAncestorOf(d,t)||d.isAncestorOf(f,t))}return c}},{key:"getFragmentAncestor",value:function(){var t=[this,this.getSourceNode(),this.getTargetNode()].filter(function(a){return a!=null});return this.getCommonAncestor.apply(this,Object(Qe.a)(t))}},{key:"isFragmentDescendantOf",value:function(t){var a=this.getFragmentAncestor();return!!a&&(a.id===t.id||a.isDescendantOf(t))}}]),n}(pi,Symbol.toStringTag);Co.defaults={},function(o){function i(r,n){var e=r,t=n;return e.cell===t.cell?e.port===t.port||e.port==null&&t.port==null:!1}o.equalTerminals=i}(Co||(Co={})),function(o){o.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function i(r){return{attrs:{label:{text:r}}}}o.parseStringLabel=i}(Co||(Co={})),function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.disconnect=="function"&&typeof e.getSource=="function"&&typeof e.getTarget=="function"}o.isEdge=i}(Co||(Co={})),function(o){o.registry=Io.create({type:"edge",process:function(r,n){if(ep.exist(r,!1))throw new Error("Edge with name '".concat(r,"' was registered by anthor Node"));if(typeof n=="function")return n.config({shape:r}),n;var e=o,t=n.inherit,a=t===void 0?"edge":t,s=P1(n,["inherit"]);if(typeof a=="string"){var u=this.get(a||"edge");u==null&&a?this.onNotFound(a,"inherited"):e=u}else e=a;s.constructorName==null&&(s.constructorName=r);var l=e.define.call(e,s);return l.config({shape:r}),l}}),ep.setEdgeRegistry(o.registry)}(Co||(Co={})),function(o){var i=0;function r(t){return t?_.pascalCase(t):(i+=1,"CustomEdge".concat(i))}function n(t){var a=t.constructorName,s=t.overwrite,u=P1(t,["constructorName","overwrite"]),l=m.createClass(r(a||u.shape),this);return l.config(u),u.shape&&o.registry.register(u.shape,l,s),l}o.define=n;function e(t){var a=t.shape||"edge",s=o.registry.get(a);return s?new s(t):o.registry.onNotFound(a)}o.create=e}(Co||(Co={})),function(o){var i="basic.edge";o.config({shape:i,propHooks:function(n){var e=n.label,t=n.vertices,a=P1(n,["label","vertices"]);if(e){a.labels==null&&(a.labels=[]);var s=typeof e=="string"?o.parseStringLabel(e):e;a.labels.push(s)}return t&&Array.isArray(t)&&(a.vertices=t.map(function(u){return mt.create(u).toJSON()})),a}}),o.registry.register(i,o)}(Co||(Co={}));var Q5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Lv=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(){var e;return Object(De.a)(this,n),e=r.apply(this,arguments),e.POINT_ROUNDING=2,e.markerCache={},e}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"getContainerClassName",value:function(){return[Object(la.a)(Object(ca.a)(n.prototype),"getContainerClassName",this).call(this),this.prefixClassName("edge")].join(" ")}},{key:"sourceBBox",get:function(){var t=this.sourceView;if(!t){var a=this.cell.getSource();return new Sr(a.x,a.y)}var s=this.sourceMagnet;return t.isEdgeElement(s)?new Sr(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(s||t.container)}},{key:"targetBBox",get:function(){var t=this.targetView;if(!t){var a=this.cell.getTarget();return new Sr(a.x,a.y)}var s=this.targetMagnet;return t.isEdgeElement(s)?new Sr(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(s||t.container)}},{key:"isEdgeView",value:function(){return!0}},{key:"confirmUpdate",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t;if(this.hasAction(u,"source")){if(!this.updateTerminalProperties("source"))return u;u=this.removeAction(u,"source")}if(this.hasAction(u,"target")){if(!this.updateTerminalProperties("target"))return u;u=this.removeAction(u,"target")}var l=this.graph,c=this.sourceView,f=this.targetView;return l&&(c&&!l.renderer.isViewMounted(c)||f&&!l.renderer.isViewMounted(f))?u:this.hasAction(u,"render")?(this.render(),u=this.removeAction(u,["render","update","vertices","labels","tools","widget"]),u):(u=this.handleAction(u,"vertices",function(){return a.renderVertexMarkers()}),u=this.handleAction(u,"update",function(){return a.update(null,s)}),u=this.handleAction(u,"labels",function(){return a.onLabelsChange(s)}),u=this.handleAction(u,"tools",function(){a.renderTools(),a.updateToolsPosition()}),u=this.handleAction(u,"widget",function(){return a.renderExternalTools()}),u)}},{key:"onLabelsChange",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}},{key:"shouldRerenderLabels",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.cell.previous("labels");if(a==null)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var s=t.propertyPathArray||[],u=s.length;if(u>1){var l=s[1];if(a[l]){if(u===2)return typeof t.propertyValue=="object"&&m.has(t.propertyValue,"markup");if(s[2]!=="markup")return!1}}}return!0}},{key:"render",value:function(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this}},{key:"renderMarkup",value:function(){var t=this.cell.markup;if(t)return typeof t=="string"?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid edge markup.")}},{key:"renderJSONMarkup",value:function(t){var a=this.parseJSONMarkup(t,this.container);this.selectors=a.selectors,this.container.append(a.fragment)}},{key:"renderStringMarkup",value:function(t){var a=this.containers,s=ja.createVectors(t);s.forEach(function(u){var l=u.attr("class");l&&(a[_.camelCase(l)]=u.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),R.append(this.container,s.map(function(u){return u.node}))}},{key:"renderLabels",value:function(){var t=this.cell,a=t.getLabels(),s=a.length,u=this.containers.labels;if(this.labelCache={},this.labelSelectors={},s<=0)return u&&u.parentNode&&u.parentNode.removeChild(u),this;u?this.empty(u):(u=R.createSvgElement("g"),this.addClass(this.prefixClassName("edge-labels"),u),this.containers.labels=u);for(var l=0,c=a.length;l<c;l+=1){var f=a[l],d=this.normalizeLabelMarkup(this.parseLabelMarkup(f.markup)),v=void 0,p=void 0;if(d)v=d.node,p=d.selectors;else{var y=t.getDefaultLabel(),C=this.normalizeLabelMarkup(this.parseLabelMarkup(y.markup));v=C.node,p=C.selectors}v.setAttribute("data-index","".concat(l)),u.appendChild(v);var E=this.rootSelector;if(p[E])throw new Error("Ambiguous label root selector.");p[E]=v,this.labelCache[l]=v,this.labelSelectors[l]=p}return u.parentNode==null&&this.container.appendChild(u),this.updateLabels(),this.customizeLabels(),this}},{key:"parseLabelMarkup",value:function(t){return t?typeof t=="string"?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null}},{key:"parseLabelStringMarkup",value:function(t){for(var a=ja.createVectors(t),s=document.createDocumentFragment(),u=0,l=a.length;u<l;u+=1){var c=a[u].node;s.appendChild(c)}return{fragment:s,selectors:{}}}},{key:"normalizeLabelMarkup",value:function(t){if(t!=null){var a=t.fragment;if(!(a instanceof DocumentFragment)||!a.hasChildNodes())throw new Error("Invalid label markup.");var s,u=a.childNodes;return u.length>1||u[0].nodeName.toUpperCase()!=="G"?s=ja.create("g").append(a):s=ja.create(u[0]),s.addClass(this.prefixClassName("edge-label")),{node:s.node,selectors:t.selectors}}}},{key:"updateLabels",value:function(){if(this.containers.labels)for(var t=this.cell,a=t.labels,s=this.can("edgeLabelMovable"),u=t.getDefaultLabel(),l=0,c=a.length;l<c;l+=1){var f=this.labelCache[l],d=this.labelSelectors[l];f.setAttribute("cursor",s?"move":"default");var v=a[l],p=m.merge({},u.attrs,v.attrs);this.updateAttrs(f,p,{selectors:d,rootBBox:v.size?Sr.fromSize(v.size):void 0})}}},{key:"mergeLabelAttrs",value:function(t,a,s){if(a===null)return null;if(a===void 0)return s===null?null:s===void 0?void 0:t?s:m.merge({},s);if(t)return m.merge({},s,a)}},{key:"customizeLabels",value:function(){if(this.containers.labels)for(var t=this.cell,a=t.labels,s=0,u=a.length;s<u;s+=1){var l=a[s],c=this.labelCache[s],f=this.labelSelectors[s];this.graph.hook.onEdgeLabelRendered({edge:t,label:l,container:c,selectors:f})}}},{key:"renderTools",value:function(){var t=this.containers.tools;if(t==null)return this;var a=this.cell.toolMarkup,s=this.$(t).empty();if(ci.isStringMarkup(a)){var u=_.template(a),l=ja.create(u());if(s.append(l.node),this.toolCache=l.node,this.options.doubleTools){var c,f=this.cell.doubleToolMarkup;ci.isStringMarkup(f)?(u=_.template(f),c=ja.create(u())):c=l.clone(),s.append(c.node),this.tool2Cache=c.node}}return this}},{key:"renderExternalTools",value:function(){var t=this.cell.getTools();return this.addTools(t),this}},{key:"renderVertexMarkers",value:function(){var t=this.containers.vertices;if(t==null)return this;var a=this.cell.vertexMarkup,s=this.$(t).empty();if(ci.isStringMarkup(a)){var u=_.template(a);this.cell.getVertices().forEach(function(l,c){s.append(ja.create(u(Object.assign({index:c},l))).node)})}return this}},{key:"renderArrowheadMarkers",value:function(){var t=this.containers.arrowheads;if(t==null)return this;var a=this.cell.arrowheadMarkup,s=this.$(t).empty();if(ci.isStringMarkup(a)){var u=_.template(a),l=ja.create(u({end:"source"})).node,c=ja.create(u({end:"target"})).node;this.containers.sourceArrowhead=l,this.containers.targetArrowhead=c,s.append(l,c)}return this}},{key:"update",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.cleanCache(),this.updateConnection(a);var s=this.cell.getAttrs();return s!=null&&this.updateAttrs(this.container,s,{attrs:t===s?null:t,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(a),this}},{key:"removeRedundantLinearVertices",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.cell,s=a.getVertices(),u=[this.sourceAnchor].concat(Object(Qe.a)(s),[this.targetAnchor]),l=u.length,c=new Cu(u);c.simplify({threshold:.01});var f=c.points.map(function(v){return v.toJSON()}),d=f.length;return l===d?0:(a.setVertices(f.slice(1,d-1),t),l-d)}},{key:"updateConnectionPath",value:function(){var t=this.containers;if(t.connection){var a=this.getConnectionPathData();t.connection.setAttribute("d",a)}if(t.connectionWrap){var s=this.getConnectionPathData();t.connectionWrap.setAttribute("d",s)}t.sourceMarker&&t.targetMarker&&this.translateAndAutoOrientArrows(t.sourceMarker,t.targetMarker)}},{key:"getTerminalView",value:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalAnchor",value:function(t){switch(t){case"source":return mt.create(this.sourceAnchor);case"target":return mt.create(this.targetAnchor);default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalConnectionPoint",value:function(t){switch(t){case"source":return mt.create(this.sourcePoint);case"target":return mt.create(this.targetPoint);default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalMagnet",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case"source":{if(a.raw)return this.sourceMagnet;var s=this.sourceView;return s?this.sourceMagnet||s.container:null}case"target":{if(a.raw)return this.targetMagnet;var u=this.targetView;return u?this.targetMagnet||u.container:null}default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"updateConnection",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.cell;if(t.translateBy&&a.isFragmentDescendantOf(t.translateBy)){var s=t.tx||0,u=t.ty||0;this.routePoints=new Cu(this.routePoints).translate(s,u).points,this.translateConnectionPoints(s,u),this.path.translate(s,u)}else{var l=a.getVertices(),c=this.findAnchors(l);this.sourceAnchor=c.source,this.targetAnchor=c.target,this.routePoints=this.findRoutePoints(l);var f=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=f.source,this.targetPoint=f.target;var d=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,d.source||this.sourcePoint,d.target||this.targetPoint)}this.cleanCache()}},{key:"findAnchors",value:function(t){var a=this.cell,s=a.source,u=a.target,l=t[0],c=t[t.length-1];return u.priority&&!s.priority?this.findAnchorsOrdered("target",c,"source",l):this.findAnchorsOrdered("source",l,"target",c)}},{key:"findAnchorsOrdered",value:function(t,a,s,u){var l,c,f,d=this.cell,v=d[t],p=d[s],y=this.getTerminalView(t),C=this.getTerminalView(s),E=this.getTerminalMagnet(t),w=this.getTerminalMagnet(s);if(y){var x;a?x=mt.create(a):C?x=w:x=mt.create(p),c=this.getAnchor(v.anchor,y,E,x,t)}else c=mt.create(v);if(C){var N=mt.create(u||c);f=this.getAnchor(p.anchor,C,w,N,s)}else f=mt.isPointLike(p)?mt.create(p):new mt;return l={},Object(Xe.a)(l,t,c),Object(Xe.a)(l,s,f),l}},{key:"getAnchor",value:function(t,a,s,u,l){var c=a.isEdgeElement(s),f=this.graph.options.connecting,d=typeof t=="string"?{name:t}:t;if(!d){var v=c?(l==="source"?f.sourceEdgeAnchor:f.targetEdgeAnchor)||f.edgeAnchor:(l==="source"?f.sourceAnchor:f.targetAnchor)||f.anchor;d=typeof v=="string"?{name:v}:v}if(!d)throw new Error("Anchor should be specified.");var p,y=d.name;if(c){var C=Nv.registry.get(y);if(typeof C!="function")return Nv.registry.onNotFound(y);p=A.call(C,this,a,s,u,d.args||{},l)}else{var E=Rv.registry.get(y);if(typeof E!="function")return Rv.registry.onNotFound(y);p=A.call(E,this,a,s,u,d.args||{},l)}return p?p.round(this.POINT_ROUNDING):new mt}},{key:"findRoutePoints",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=this.graph.options.connecting.router||Od.presets.normal,s=this.cell.getRouter()||a,u;if(typeof s=="function")u=A.call(s,this,t,{},this);else{var l=typeof s=="string"?s:s.name,c=typeof s=="string"?{}:s.args||{},f=l?Od.registry.get(l):Od.presets.normal;if(typeof f!="function")return Od.registry.onNotFound(l);u=A.call(f,this,t,c,this)}return u==null?t.map(function(d){return mt.create(d)}):u.map(function(d){return mt.create(d)})}},{key:"findConnectionPoints",value:function(t,a,s){var u=this.cell,l=this.graph.options.connecting,c=u.getSource(),f=u.getTarget(),d=this.sourceView,v=this.targetView,p=t[0],y=t[t.length-1],C;if(d&&!d.isEdgeElement(this.sourceMagnet)){var E=this.sourceMagnet||d.container,w=p||s,x=new ua(w,a),N=c.connectionPoint||l.sourceConnectionPoint||l.connectionPoint;C=this.getConnectionPoint(N,d,E,x,"source")}else C=a;var j;if(v&&!v.isEdgeElement(this.targetMagnet)){var B=this.targetMagnet||v.container,$=f.connectionPoint||l.targetConnectionPoint||l.connectionPoint,Z=y||a,fe=new ua(Z,s);j=this.getConnectionPoint($,v,B,fe,"target")}else j=s;return{source:C,target:j}}},{key:"getConnectionPoint",value:function(t,a,s,u,l){var c=u.end;if(t==null)return c;var f=typeof t=="string"?t:t.name,d=typeof t=="string"?{}:t.args,v=jv.registry.get(f);if(typeof v!="function")return jv.registry.onNotFound(f);var p=A.call(v,this,u,a,s,d||{},l);return p?p.round(this.POINT_ROUNDING):c}},{key:"updateMarkerAttr",value:function(t){var a=this.cell.getAttrs(),s=".".concat(t,"-marker"),u=a&&a[s];u&&this.updateAttrs(this.container,{},{attrs:Object(Xe.a)({},s,u),selectors:this.selectors})}},{key:"findMarkerPoints",value:function(t,a,s){var u=this,l=function(B){for(var $=u.cell.getAttrs(),Z=Object.keys($),fe=0,de=Z.length;fe<de;fe+=1){var xe=$[Z[fe]];if(xe["".concat(B,"Marker")]||xe["".concat(B,"-marker")]){var Ae=xe.strokeWidth||xe["stroke-width"];if(Ae)return parseFloat(Ae);break}}return null},c=t[0],f=t[t.length-1],d=this.containers.sourceMarker,v=this.containers.targetMarker,p=this.markerCache,y,C;if(d){if(this.updateMarkerAttr("source"),p.sourceBBox=p.sourceBBox||R.getBBox(d),p.sourceBBox.width>0){var E=R.scale(d);y=a.clone().move(c||s,p.sourceBBox.width*E.sx*-1)}}else{var w=l("source");w&&(y=a.clone().move(c||s,-w))}if(v){if(this.updateMarkerAttr("target"),p.targetBBox=p.targetBBox||R.getBBox(v),p.targetBBox.width>0){var x=R.scale(v);C=s.clone().move(f||a,p.targetBBox.width*x.sx*-1)}}else{var N=l("target");N&&(C=s.clone().move(f||a,-N))}return p.sourcePoint=y||a.clone(),p.targetPoint=C||s.clone(),{source:y,target:C}}},{key:"findPath",value:function(t,a,s){var u=this.cell.getConnector()||this.graph.options.connecting.connector,l,c,f;if(typeof u=="string"?l=u:(l=u.name,c=u.args),l){var d=bh.registry.get(l);if(typeof d!="function")return bh.registry.onNotFound(l);f=d}else f=bh.presets.normal;var v=A.call(f,this,a,s,t,Object.assign(Object.assign({},c),{raw:!0}),this);return typeof v=="string"?Wa.parse(v):v}},{key:"translateConnectionPoints",value:function(t,a){var s=this.markerCache;s.sourcePoint&&s.sourcePoint.translate(t,a),s.targetPoint&&s.targetPoint.translate(t,a),this.sourcePoint.translate(t,a),this.targetPoint.translate(t,a),this.sourceAnchor.translate(t,a),this.targetAnchor.translate(t,a)}},{key:"updateLabelPositions",value:function(){if(this.containers.labels==null)return this;var t=this.path;if(!t)return this;var a=this.cell,s=a.getLabels();if(s.length===0)return this;for(var u=a.getDefaultLabel(),l=this.normalizeLabelPosition(u.position),c=0,f=s.length;c<f;c+=1){var d=s[c],v=this.labelCache[c];if(!!v){var p=this.normalizeLabelPosition(d.position),y=m.merge({},l,p),C=this.getLabelTransformationMatrix(y);v.setAttribute("transform",R.matrixToTransformString(C))}}return this}},{key:"updateToolsPosition",value:function(){if(this.containers.tools==null)return this;var t="",a=this.options.toolsOffset,s=this.getConnectionLength();if(s!=null){s<this.options.shortLength&&(t="scale(.5)",a/=2);var u=this.getPointAtLength(a);if(u!=null&&R.attr(this.toolCache,"transform","translate(".concat(u.x,",").concat(u.y,") ").concat(t)),this.options.doubleTools&&s>=this.options.longLength){var l=this.options.doubleToolsOffset||a;u=this.getPointAtLength(s-l),u!=null&&R.attr(this.tool2Cache,"transform","translate(".concat(u.x,",").concat(u.y,") ").concat(t)),R.attr(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&R.attr(this.tool2Cache,"visibility","hidden")}return this}},{key:"updateArrowheadMarkers",value:function(){var t=this.containers.arrowheads;if(t==null)return this;if(t.style.display==="none")return this;var a=this.containers.sourceArrowhead,s=this.containers.targetArrowhead;if(a&&s){var u=this.getConnectionLength()||0,l=u<this.options.shortLength?.5:1;R.scale(a,l),R.scale(s,l),this.translateAndAutoOrientArrows(a,s)}return this}},{key:"updateTerminalProperties",value:function(t){var a=this.cell,s=this.graph,u=a[t],l=u&&u.cell,c="".concat(t,"View");if(!l)return this[c]=null,this.updateTerminalMagnet(t),!0;var f=s.getCellById(l);if(!f)throw new Error("Edge's ".concat(t,' node with id "').concat(l,'" not exists'));var d=f.findView(s);return d?(this[c]=d,this.updateTerminalMagnet(t),!0):!1}},{key:"updateTerminalMagnet",value:function(t){var a="".concat(t,"Magnet"),s=this.getTerminalView(t);if(s){var u=s.getMagnetFromEdgeTerminal(this.cell[t]);u===s.container&&(u=null),this[a]=u}else this[a]=null}},{key:"translateAndAutoOrientArrows",value:function(t,a){var s=this.routePoints;t&&R.translateAndAutoOrient(t,this.sourcePoint,s[0]||this.targetPoint,this.graph.view.stage),a&&R.translateAndAutoOrient(a,this.targetPoint,s[s.length-1]||this.sourcePoint,this.graph.view.stage)}},{key:"getLabelPositionAngle",value:function(t){var a=this.cell.getLabelAt(t);return a&&a.position&&typeof a.position=="object"&&a.position.angle||0}},{key:"getLabelPositionArgs",value:function(t){var a=this.cell.getLabelAt(t);if(a&&a.position&&typeof a.position=="object")return a.position.options}},{key:"getDefaultLabelPositionArgs",value:function(){var t=this.cell.getDefaultLabel();if(t&&t.position&&typeof t.position=="object")return t.position.options}},{key:"mergeLabelPositionArgs",value:function(t,a){return t===null?null:t===void 0?a===null?null:a:m.merge({},a,t)}},{key:"addLabel",value:function(t,a,s,u){var l,c,f=0,d;typeof t!="number"?(l=t.x,c=t.y,typeof a=="number"?(f=a,d=s):d=a):(l=t,c=a,typeof s=="number"?(f=s,d=u):d=s);var v=this.getDefaultLabelPositionArgs(),p=d,y=this.mergeLabelPositionArgs(p,v),C={position:this.getLabelPosition(l,c,f,y)},E=-1;return this.cell.insertLabel(C,E,d),E}},{key:"addVertex",value:function(t,a,s){var u=typeof t!="number",l=u?t.x:t,c=u?t.y:a,f=u?a:s,d={x:l,y:c},v=this.getVertexIndex(l,c);return this.cell.insertVertex(d,v,f),v}},{key:"sendToken",value:function(t,a,s){var u,l,c,f,d="linear";typeof a=="object"?(u=a.duration,l=a.reversed===!0,c=a.selector,a.rotate===!1?f="":a.rotate===!0?f="auto":a.rotate!=null&&(f="".concat(a.rotate)),a.timing&&(d=a.timing)):(u=a,l=!1,c=null),u=u||1e3;var v={dur:"".concat(u,"ms"),repeatCount:"1",calcMode:d,fill:"freeze"};if(f&&(v.rotate=f),l&&(v.keyPoints="1;0",v.keyTimes="0;1"),typeof a=="object"){var p=a.duration,y=a.reversed,C=a.selector,E=a.rotate,w=a.timing,x=Q5(a,["duration","reversed","selector","rotate","timing"]);Object.keys(x).forEach(function(xe){v[xe]=x[xe]})}var N;if(typeof c=="string"?N=this.findOne(c,this.container,this.selectors):N=this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(N instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");var j=typeof t=="string"?this.findOne(t):t;if(j==null)throw new Error("Token animation requires a valid token element.");var B=j.parentNode,$=function(){B||R.remove(j)},Z=ja.create(j);B||Z.appendTo(this.graph.view.stage);var fe=v.complete;v.complete=function(xe){$(),s&&s(),fe&&fe(xe)};var de=Z.animateAlongPath(v,N);return function(){$(),de()}}},{key:"getConnection",value:function(){return this.path!=null?this.path.clone():null}},{key:"getConnectionPathData",value:function(){if(this.path==null)return"";var t=this.cache.pathCache;return m.has(t,"data")||(t.data=this.path.serialize()),t.data||""}},{key:"getConnectionSubdivisions",value:function(){if(this.path==null)return null;var t=this.cache.pathCache;return m.has(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions}},{key:"getConnectionLength",value:function(){if(this.path==null)return 0;var t=this.cache.pathCache;return m.has(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length}},{key:"getPointAtLength",value:function(t){return this.path==null?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getPointAtRatio",value:function(t){return this.path==null?null:(M.isPercentage(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))}},{key:"getTangentAtLength",value:function(t){return this.path==null?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getTangentAtRatio",value:function(t){return this.path==null?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPoint",value:function(t){return this.path==null?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointLength",value:function(t){return this.path==null?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointRatio",value:function(t){return this.path==null?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getLabelPosition",value:function(t,a,s,u){var l={distance:0},c=0,f;typeof s=="number"?(c=s,f=u):f=s,f!=null&&(l.options=f);var d=f&&f.absoluteOffset,v=!(f&&f.absoluteDistance),p=f&&f.absoluteDistance&&f.reverseDistance,y=this.path,C={segmentSubdivisions:this.getConnectionSubdivisions()},E=new mt(t,a),w=y.closestPointT(E,C),x=this.getConnectionLength()||0,N=y.lengthAtT(w,C);v&&(N=x>0?N/x:0),p&&(N=-1*(x-N)||1),l.distance=N;var j;d||(j=y.tangentAtT(w));var B;if(j)B=j.pointOffset(E);else{var $=y.pointAtT(w),Z=E.diff($);B={x:Z.x,y:Z.y}}return l.offset=B,l.angle=c,l}},{key:"normalizeLabelPosition",value:function(t){return typeof t=="number"?{distance:t}:t}},{key:"getLabelTransformationMatrix",value:function(t){var a=this.normalizeLabelPosition(t),s=a.options||{},u=a.angle||0,l=a.distance,c=l>0&&l<=1,f=0,d={x:0,y:0},v=a.offset;v&&(typeof v=="number"?f=v:(v.x!=null&&(d.x=v.x),v.y!=null&&(d.y=v.y)));var p=d.x!==0||d.y!==0||f===0,y=s.keepGradient,C=s.ensureLegibility,E=this.path,w={segmentSubdivisions:this.getConnectionSubdivisions()},x=c?l*this.getConnectionLength():l,N=E.tangentAtLength(x,w),j,B=u;if(N){if(p)j=N.start,j.translate(d);else{var $=N.clone();$.rotate(-90,N.start),$.setLength(f),j=$.end}y&&(B=N.angle()+u,C&&(B=ti.normalize((B+90)%180-90)))}else j=E.start,p&&j.translate(d);return R.createSVGMatrix().translate(j.x,j.y).rotate(B)}},{key:"getLabelCoordinates",value:function(t){var a=this.getLabelTransformationMatrix(t);return new mt(a.e,a.f)}},{key:"getVertexIndex",value:function(t,a){var s=this.cell,u=s.getVertices(),l=this.getClosestPointLength(new mt(t,a)),c=0;if(l!=null)for(var f=u.length;c<f;c+=1){var d=u[c],v=this.getClosestPointLength(d);if(v!=null&&l<v)break}return c}},{key:"getEventArgs",value:function(t,a,s){var u=this,l=u.cell,c=l;return a==null||s==null?{e:t,view:u,edge:l,cell:c}:{e:t,x:a,y:s,view:u,edge:l,cell:c}}},{key:"notifyUnhandledMouseDown",value:function(t,a,s){this.notify("edge:unhandled:mousedown",{e:t,x:a,y:s,view:this,cell:this.cell,edge:this.cell})}},{key:"notifyMouseDown",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onMouseDown",this).call(this,t,a,s),this.notify("edge:mousedown",this.getEventArgs(t,a,s))}},{key:"notifyMouseMove",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onMouseMove",this).call(this,t,a,s),this.notify("edge:mousemove",this.getEventArgs(t,a,s))}},{key:"notifyMouseUp",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onMouseUp",this).call(this,t,a,s),this.notify("edge:mouseup",this.getEventArgs(t,a,s))}},{key:"onClick",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onClick",this).call(this,t,a,s),this.notify("edge:click",this.getEventArgs(t,a,s))}},{key:"onDblClick",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onDblClick",this).call(this,t,a,s),this.notify("edge:dblclick",this.getEventArgs(t,a,s))}},{key:"onContextMenu",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onContextMenu",this).call(this,t,a,s),this.notify("edge:contextmenu",this.getEventArgs(t,a,s))}},{key:"onMouseDown",value:function(t,a,s){this.notifyMouseDown(t,a,s);var u=t.target.getAttribute("class");switch(u){case"vertex":{this.startVertexDragging(t,a,s);return}case"vertex-remove":case"vertex-remove-area":{this.handleVertexRemoving(t,a,s);return}case"connection":case"connection-wrap":{this.handleVertexAdding(t,a,s);return}case"arrowhead":{this.startArrowheadDragging(t,a,s);return}case"source-marker":case"target-marker":{this.notifyUnhandledMouseDown(t,a,s);return}default:break}this.startEdgeDragging(t,a,s)}},{key:"onMouseMove",value:function(t,a,s){var u=this.getEventData(t);switch(u.action){case"drag-vertex":{this.dragVertex(t,a,s);break}case"drag-label":{this.dragLabel(t,a,s);break}case"drag-arrowhead":{this.dragArrowhead(t,a,s);break}case"drag-edge":{this.dragEdge(t,a,s);break}default:break}return this.notifyMouseMove(t,a,s),u}},{key:"onMouseUp",value:function(t,a,s){var u=this.getEventData(t);switch(u.action){case"drag-vertex":{this.stopVertexDragging(t,a,s);break}case"drag-label":{this.stopLabelDragging(t,a,s);break}case"drag-arrowhead":{this.stopArrowheadDragging(t,a,s);break}case"drag-edge":{this.stopEdgeDragging(t,a,s);break}default:break}return this.notifyMouseUp(t,a,s),this.checkMouseleave(t),u}},{key:"onMouseOver",value:function(t){Object(la.a)(Object(ca.a)(n.prototype),"onMouseOver",this).call(this,t),this.notify("edge:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){Object(la.a)(Object(ca.a)(n.prototype),"onMouseOut",this).call(this,t),this.notify("edge:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){Object(la.a)(Object(ca.a)(n.prototype),"onMouseEnter",this).call(this,t),this.notify("edge:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){Object(la.a)(Object(ca.a)(n.prototype),"onMouseLeave",this).call(this,t),this.notify("edge:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,a,s,u){Object(la.a)(Object(ca.a)(n.prototype),"onMouseWheel",this).call(this,t,a,s,u),this.notify("edge:mousewheel",Object.assign({delta:u},this.getEventArgs(t,a,s)))}},{key:"onCustomEvent",value:function(t,a,s,u){var l=R.findParentByClass(t.target,"edge-tool",this.container);if(l){if(t.stopPropagation(),this.can("useEdgeTools")){if(a==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:a},this.getEventArgs(t,s,u)))}this.notifyMouseDown(t,s,u)}else this.notify("edge:customevent",Object.assign({name:a},this.getEventArgs(t,s,u))),Object(la.a)(Object(ca.a)(n.prototype),"onCustomEvent",this).call(this,t,a,s,u)}},{key:"onLabelMouseDown",value:function(t,a,s){this.notifyMouseDown(t,a,s),this.startLabelDragging(t,a,s);var u=this.getEventData(t).stopPropagation;u&&t.stopPropagation()}},{key:"startEdgeDragging",value:function(t,a,s){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(t,a,s);return}this.setEventData(t,{x:a,y:s,moving:!1,action:"drag-edge"})}},{key:"dragEdge",value:function(t,a,s){var u=this.getEventData(t);u.moving||(u.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:a,y:s,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(a-u.x,s-u.y,{ui:!0}),this.setEventData(t,{x:a,y:s}),this.notify("edge:moving",{e:t,x:a,y:s,view:this,cell:this.cell,edge:this.cell})}},{key:"stopEdgeDragging",value:function(t,a,s){var u=this.getEventData(t);u.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:a,y:s,view:this,cell:this.cell,edge:this.cell})),u.moving=!1}},{key:"prepareArrowheadDragging",value:function(t,a){var s=this.getTerminalMagnet(t),u={action:"drag-arrowhead",x:a.x,y:a.y,isNewEdge:a.isNewEdge===!0,terminalType:t,initialMagnet:s,initialTerminal:m.clone(this.cell[t]),fallbackAction:a.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:a.options};return this.beforeArrowheadDragging(u),u}},{key:"createValidateConnectionArgs",value:function(t){var a=[];a[4]=t,a[5]=this;var s,u=0,l=0;t==="source"?(u=2,s="target"):(l=2,s="source");var c=this.cell[s],f=c.cell;if(f){var d,v=a[u]=this.graph.renderer.findViewByCell(f);v&&(d=v.getMagnetFromEdgeTerminal(c),d===v.container&&(d=void 0)),a[u+1]=d}return function(p,y){return a[l]=p,a[l+1]=p.container===y?void 0:y,a}}},{key:"beforeArrowheadDragging",value:function(t){t.zIndex=this.cell.zIndex,this.cell.toFront();var a=this.container.style;t.pointerEvents=a.pointerEvents,a.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)}},{key:"afterArrowheadDragging",value:function(t){t.zIndex!=null&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null);var a=this.container;a.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)}},{key:"arrowheadDragging",value:function(t,a,s,u){if(u.x=a,u.y=s,u.currentTarget!==t)if(u.currentMagnet&&u.currentView&&u.currentView.unhighlight(u.currentMagnet,{type:"magnetAdsorbed"}),u.currentView=this.graph.renderer.findViewByElem(t),u.currentView){var l;u.currentMagnet=u.currentView.findMagnet(t),u.currentMagnet&&(l=this.graph.hook).validateConnection.apply(l,Object(Qe.a)(u.getValidateConnectionArgs(u.currentView,u.currentMagnet)).concat([u.currentView.getEdgeTerminal(u.currentMagnet,a,s,this.cell,u.terminalType)]))?u.currentView.highlight(u.currentMagnet,{type:"magnetAdsorbed"}):u.currentMagnet=null}else u.currentMagnet=null;u.currentTarget=t,this.cell.prop(u.terminalType,{x:a,y:s},Object.assign(Object.assign({},u.options),{ui:!0}))}},{key:"arrowheadDragged",value:function(t,a,s){var u=t.currentView,l=t.currentMagnet;if(!(!l||!u)){u.unhighlight(l,{type:"magnetAdsorbed"});var c=t.terminalType,f=u.getEdgeTerminal(l,a,s,this.cell,c);this.cell.setTerminal(c,f,{ui:!0})}}},{key:"snapArrowhead",value:function(t,a,s){var u=this,l=this.graph,c=l.options.connecting,f=c.snap,d=c.allowEdge,v=typeof f=="object"&&f.radius||50,p={x:t-v,y:a-v,width:2*v,height:2*v},y=l.renderer.findViewsInArea(p);if(d){var C=l.renderer.findEdgeViewsInArea(p).filter(function(xe){return xe!==u});y.push.apply(y,Object(Qe.a)(C))}var E=s.closestView||null,w=s.closestMagnet||null;s.closestView=null,s.closestMagnet=null;var x,N=Number.MAX_SAFE_INTEGER,j=new mt(t,a);y.forEach(function(xe){if(xe.container.getAttribute("magnet")!=="false"&&(x=xe.cell.getBBox().getCenter().distance(j),x<v&&x<N)){var Ae;(w===xe.container||(Ae=l.hook).validateConnection.apply(Ae,Object(Qe.a)(s.getValidateConnectionArgs(xe,null)).concat([xe.getEdgeTerminal(xe.container,t,a,u.cell,s.terminalType)])))&&(N=x,s.closestView=xe,s.closestMagnet=xe.container)}xe.container.querySelectorAll("[magnet]").forEach(function(Ye){if(Ye.getAttribute("magnet")!=="false"){var rt=xe.getBBoxOfElement(Ye);if(x=j.distance(rt.getCenter()),x<v&&x<N){var je;(w===Ye||(je=l.hook).validateConnection.apply(je,Object(Qe.a)(s.getValidateConnectionArgs(xe,Ye)).concat([xe.getEdgeTerminal(Ye,t,a,u.cell,s.terminalType)])))&&(N=x,s.closestView=xe,s.closestMagnet=Ye)}}})});var B,$=s.terminalType,Z=s.closestView,fe=s.closestMagnet,de=w!==fe;if(E&&de&&E.unhighlight(w,{type:"magnetAdsorbed"}),Z){if(!de)return;Z.highlight(fe,{type:"magnetAdsorbed"}),B=Z.getEdgeTerminal(fe,t,a,this.cell,$)}else B={x:t,y:a};this.cell.setTerminal($,B,{},Object.assign(Object.assign({},s.options),{ui:!0}))}},{key:"snapArrowheadEnd",value:function(t){var a=t.closestView,s=t.closestMagnet;a&&s&&(a.unhighlight(s,{type:"magnetAdsorbed"}),t.currentMagnet=a.findMagnet(s)),t.closestView=null,t.closestMagnet=null}},{key:"finishEmbedding",value:function(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)}},{key:"fallbackConnection",value:function(t){switch(t.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0});break}}},{key:"notifyConnectionEvent",value:function(t,a){var s=t.terminalType,u=t.initialTerminal,l=this.cell[s],c=l&&!Co.equalTerminals(u,l);if(c){var f=this.graph,d=u,v=d.cell?f.getCellById(d.cell):null,p=d.port,y=v?f.findViewByCell(v):null,C=v||t.isNewEdge?null:mt.create(u).toJSON(),E=l,w=E.cell?f.getCellById(E.cell):null,x=E.port,N=w?f.findViewByCell(w):null,j=w?null:mt.create(l).toJSON();this.notify("edge:connected",{e:a,previousCell:v,previousPort:p,previousView:y,previousPoint:C,currentCell:w,currentView:N,currentPort:x,currentPoint:j,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:s,isNew:t.isNewEdge})}}},{key:"highlightAvailableMagnets",value:function(t){var a=this,s=this.graph,u=s.model.getCells();t.marked={};for(var l=function(p,y){var C=s.renderer.findViewByCell(u[p]);if(!C)return"continue";var E=Array.prototype.slice.call(C.container.querySelectorAll("[magnet]"));C.container.getAttribute("magnet")!=="false"&&E.push(C.container);var w=E.filter(function(j){var B;return(B=s.hook).validateConnection.apply(B,Object(Qe.a)(t.getValidateConnectionArgs(C,j)).concat([C.getEdgeTerminal(j,t.x,t.y,a.cell,t.terminalType)]))});if(w.length>0){for(var x=0,N=w.length;x<N;x+=1)C.highlight(w[x],{type:"magnetAvailable"});C.highlight(null,{type:"nodeAvailable"}),t.marked[C.cell.id]=w}},c=0,f=u.length;c<f;c+=1)var d=l(c,f)}},{key:"unhighlightAvailableMagnets",value:function(t){var a=this,s=t.marked||{};Object.keys(s).forEach(function(u){var l=a.graph.renderer.findViewByCell(u);if(l){var c=s[u];c.forEach(function(f){l.unhighlight(f,{type:"magnetAvailable"})}),l.unhighlight(null,{type:"nodeAvailable"})}}),t.marked=null}},{key:"startArrowheadDragging",value:function(t,a,s){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(t,a,s);return}var u=t.target,l=u.getAttribute("data-terminal"),c=this.prepareArrowheadDragging(l,{x:a,y:s});this.setEventData(t,c)}},{key:"dragArrowhead",value:function(t,a,s){var u=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(a,s,u):this.arrowheadDragging(this.getEventTarget(t),a,s,u)}},{key:"stopArrowheadDragging",value:function(t,a,s){var u=this.graph,l=this.getEventData(t);u.options.connecting.snap?this.snapArrowheadEnd(l):this.arrowheadDragged(l,a,s);var c=u.hook.validateEdge(this.cell,l.terminalType,l.initialTerminal);c?(this.finishEmbedding(l),this.notifyConnectionEvent(l,t)):this.fallbackConnection(l),this.afterArrowheadDragging(l)}},{key:"startLabelDragging",value:function(t,a,s){if(this.can("edgeLabelMovable")){var u=t.currentTarget,l=parseInt(u.getAttribute("data-index"),10),c=this.getLabelPositionAngle(l),f=this.getLabelPositionArgs(l),d=this.getDefaultLabelPositionArgs(),v=this.mergeLabelPositionArgs(f,d);this.setEventData(t,{index:l,positionAngle:c,positionArgs:v,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)}},{key:"dragLabel",value:function(t,a,s){var u=this.getEventData(t),l=this.cell.getLabelAt(u.index),c=m.merge({},l,{position:this.getLabelPosition(a,s,u.positionAngle,u.positionArgs)});this.cell.setLabelAt(u.index,c)}},{key:"stopLabelDragging",value:function(t,a,s){}},{key:"handleVertexAdding",value:function(t,a,s){if(!this.can("vertexAddable")){this.notifyUnhandledMouseDown(t,a,s);return}var u=this.addVertex({x:a,y:s},{ui:!0});this.setEventData(t,{index:u,action:"drag-vertex"})}},{key:"handleVertexRemoving",value:function(t,a,s){if(!this.can("vertexDeletable")){this.notifyUnhandledMouseDown(t,a,s);return}var u=t.target,l=parseInt(u.getAttribute("idx"),10);this.cell.removeVertexAt(l)}},{key:"startVertexDragging",value:function(t,a,s){if(!this.can("vertexMovable")){this.notifyUnhandledMouseDown(t,a,s);return}var u=t.target,l=parseInt(u.getAttribute("idx"),10);this.setEventData(t,{index:l,action:"drag-vertex"})}},{key:"dragVertex",value:function(t,a,s){var u=this.getEventData(t);this.cell.setVertexAt(u.index,{x:a,y:s},{ui:!0})}},{key:"stopVertexDragging",value:function(t,a,s){}}]),n}(Ho,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"&&typeof e.update=="function"&&typeof e.getConnection=="function"}o.isEdgeView=i})(Lv||(Lv={})),Lv.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),Lv.registry.register("edge",Lv,!0);var Ss=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(){var e;return Object(De.a)(this,n),e=r.apply(this,arguments),e.scalableNode=null,e.rotatableNode=null,e.scalableSelector="scalable",e.rotatableSelector="rotatable",e.defaultPortMarkup=ci.getPortMarkup(),e.defaultPortLabelMarkup=ci.getPortLabelMarkup(),e.defaultPortContainerMarkup=ci.getPortContainerMarkup(),e.portsCache={},e}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"getContainerClassName",value:function(){var t=[Object(la.a)(Object(ca.a)(n.prototype),"getContainerClassName",this).call(this),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")}},{key:"updateClassName",value:function(t){var a=t.target;if(a.hasAttribute("magnet")){var s=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?R.removeClass(a,s):R.addClass(a,s)}else{var u=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(u):this.addClass(u)}}},{key:"isNodeView",value:function(){return!0}},{key:"confirmUpdate",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t;return this.hasAction(u,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(u,"render")?(this.render(),u=this.removeAction(u,["render","update","resize","translate","rotate","ports","tools"])):(u=this.handleAction(u,"resize",function(){return a.resize(s)},"update"),u=this.handleAction(u,"update",function(){return a.update()},Tl.useCSSSelector?"ports":null),u=this.handleAction(u,"translate",function(){return a.translate()}),u=this.handleAction(u,"rotate",function(){return a.rotate()}),u=this.handleAction(u,"ports",function(){return a.renderPorts()}),u=this.handleAction(u,"tools",function(){return a.renderTools()})),u}},{key:"update",value:function(t){this.cleanCache(),Tl.useCSSSelector&&this.removePorts();var a=this.cell,s=a.getSize(),u=a.getAttrs();this.updateAttrs(this.container,u,{attrs:t===u?null:t,rootBBox:new Sr(0,0,s.width,s.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),Tl.useCSSSelector&&this.renderPorts()}},{key:"renderMarkup",value:function(){var t=this.cell.markup;if(t)return typeof t=="string"?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid node markup.")}},{key:"renderJSONMarkup",value:function(t){var a=this.parseJSONMarkup(t,this.container),s=function(l){return Array.isArray(l)?l[0]:l};this.selectors=a.selectors,this.rotatableNode=s(this.selectors[this.rotatableSelector]),this.scalableNode=s(this.selectors[this.scalableSelector]),this.container.appendChild(a.fragment)}},{key:"renderStringMarkup",value:function(t){R.append(this.container,ja.toNodes(ja.createVectors(t))),this.rotatableNode=R.findOne(this.container,".".concat(this.rotatableSelector)),this.scalableNode=R.findOne(this.container,".".concat(this.scalableSelector)),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}},{key:"render",value:function(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),Tl.useCSSSelector||this.renderPorts(),this.renderTools(),this}},{key:"resize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.scalableNode)return this.updateSize(t);this.cell.getAngle()&&this.rotate(),this.update()}},{key:"translate",value:function(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}},{key:"rotate",value:function(){if(this.rotatableNode){this.updateRotation(),this.update();return}this.updateTransform()}},{key:"getTranslationString",value:function(){var t=this.cell.getPosition();return"translate(".concat(t.x,",").concat(t.y,")")}},{key:"getRotationString",value:function(){var t=this.cell.getAngle();if(t){var a=this.cell.getSize();return"rotate(".concat(t,",").concat(a.width/2,",").concat(a.height/2,")")}}},{key:"updateTransform",value:function(){var t=this.getTranslationString(),a=this.getRotationString();a&&(t+=" ".concat(a)),this.container.setAttribute("transform",t)}},{key:"updateRotation",value:function(){if(this.rotatableNode!=null){var t=this.getRotationString();t!=null?this.rotatableNode.setAttribute("transform",t):this.rotatableNode.removeAttribute("transform")}}},{key:"updateTranslation",value:function(){this.container.setAttribute("transform",this.getTranslationString())}},{key:"updateSize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.cell,s=a.getSize(),u=a.getAngle(),l=this.scalableNode,c=!1;l.getElementsByTagName("path").length>0&&(c=!0);var f=R.getBBox(l,{recursive:c}),d=s.width/(f.width||1),v=s.height/(f.height||1);l.setAttribute("transform","scale(".concat(d,",").concat(v,")"));var p=this.rotatableNode;if(p!=null){var y=p.getAttribute("transform");if(y){p.setAttribute("transform","".concat(y," rotate(").concat(-u,",").concat(s.width/2,",").concat(s.height/2,")"));var C=R.getBBox(l,{target:this.graph.view.stage});a.prop("position",{x:C.x,y:C.y},Object.assign({updated:!0},t)),this.translate(),this.rotate()}}this.update()}},{key:"findPortElem",value:function(t,a){var s=t?this.portsCache[t]:null;if(!s)return null;var u=s.portContentElement,l=s.portContentSelectors||{};return this.findOne(a,u,l)}},{key:"initializePorts",value:function(){this.cleanPortsCache()}},{key:"refreshPorts",value:function(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}},{key:"cleanPortsCache",value:function(){this.portsCache={}}},{key:"removePorts",value:function(){var t=this;Object.keys(this.portsCache).forEach(function(a){var s=t.portsCache[a];R.remove(s.portElement)})}},{key:"renderPorts",value:function(){var t=this,a=this.getPortsContainer(),s=[];a.childNodes.forEach(function(c){s.push(c)});var u=I.groupBy(this.cell.getParsedPorts(),"zIndex"),l="auto";u[l]&&u[l].forEach(function(c){var f=t.getPortElement(c);a.append(f),s.push(f)}),Object.keys(u).forEach(function(c){if(c!==l){var f=parseInt(c,10);t.appendPorts(u[c],f,s)}}),this.updatePorts()}},{key:"getPortsContainer",value:function(){return this.rotatableNode||this.container}},{key:"appendPorts",value:function(t,a,s){var u=this,l=t.map(function(c){return u.getPortElement(c)});s[a]||a<0?R.before(s[Math.max(a,0)],l):R.append(this.getPortsContainer(),l)}},{key:"getPortElement",value:function(t){var a=this.portsCache[t.id];return a?a.portElement:this.createPortElement(t)}},{key:"createPortElement",value:function(t){var a=ci.renderMarkup(this.getPortContainerMarkup()),s=a.elem;if(s==null)throw new Error("Invalid port container markup.");a=ci.renderMarkup(this.getPortMarkup(t));var u=a.elem,l=a.selectors;if(u==null)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},u),a=ci.renderMarkup(this.getPortLabelMarkup(t.label));var c=a.elem,f=a.selectors;if(c==null)throw new Error("Invalid port label markup.");var d;if(l&&f){for(var v in f)if(l[v]&&v!==this.rootSelector)throw new Error("Selectors within port must be unique.");d=Object.assign(Object.assign({},l),f)}else d=l||f;var p="x6-port";return t.group&&(p+=" x6-port-".concat(t.group)),R.addClass(s,p),R.addClass(u,"x6-port-body"),R.addClass(c,"x6-port-label"),s.appendChild(u),s.appendChild(c),this.portsCache[t.id]={portElement:s,portSelectors:d,portLabelElement:c,portLabelSelectors:f,portContentElement:u,portContentSelectors:l},this.graph.hook.onPortRendered({port:t,node:this.cell,container:s,selectors:d,labelContainer:c,labelSelectors:f,contentContainer:u,contentSelectors:l}),s}},{key:"updatePorts",value:function(){var t=this;this.updatePortGroup();var a=this.cell.getParsedGroups();Object.keys(a).forEach(function(s){return t.updatePortGroup(s)})}},{key:"updatePortGroup",value:function(t){for(var a=Sr.fromSize(this.cell.getSize()),s=this.cell.getPortsLayoutByGroup(t,a),u=0,l=s.length;u<l;u+=1){var c=s[u],f=c.portId,d=this.portsCache[f]||{},v=c.portLayout;if(this.applyPortTransform(d.portElement,v),c.portAttrs!=null){var p={selectors:d.portSelectors||{}};c.portSize&&(p.rootBBox=Sr.fromSize(c.portSize)),this.updateAttrs(d.portElement,c.portAttrs,p)}var y=c.labelLayout;if(y&&(this.applyPortTransform(d.portLabelElement,y,-(v.angle||0)),y.attrs)){var C={selectors:d.portLabelSelectors||{}};c.labelSize&&(C.rootBBox=Sr.fromSize(c.labelSize)),this.updateAttrs(d.portLabelElement,y.attrs,C)}}}},{key:"applyPortTransform",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=a.angle,l=a.position,c=R.createSVGMatrix().rotate(s).translate(l.x||0,l.y||0).rotate(u||0);R.transform(t,c,{absolute:!0})}},{key:"getPortContainerMarkup",value:function(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}},{key:"getPortMarkup",value:function(t){return t.markup||this.cell.portMarkup||this.defaultPortMarkup}},{key:"getPortLabelMarkup",value:function(t){return t.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}},{key:"getEventArgs",value:function(t,a,s){var u=this,l=u.cell,c=l;return a==null||s==null?{e:t,view:u,node:l,cell:c}:{e:t,x:a,y:s,view:u,node:l,cell:c}}},{key:"notifyMouseDown",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onMouseDown",this).call(this,t,a,s),this.notify("node:mousedown",this.getEventArgs(t,a,s))}},{key:"notifyMouseMove",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onMouseMove",this).call(this,t,a,s),this.notify("node:mousemove",this.getEventArgs(t,a,s))}},{key:"notifyMouseUp",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onMouseUp",this).call(this,t,a,s),this.notify("node:mouseup",this.getEventArgs(t,a,s))}},{key:"onClick",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onClick",this).call(this,t,a,s),this.notify("node:click",this.getEventArgs(t,a,s))}},{key:"onDblClick",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onDblClick",this).call(this,t,a,s),this.notify("node:dblclick",this.getEventArgs(t,a,s))}},{key:"onContextMenu",value:function(t,a,s){Object(la.a)(Object(ca.a)(n.prototype),"onContextMenu",this).call(this,t,a,s),this.notify("node:contextmenu",this.getEventArgs(t,a,s))}},{key:"onMouseDown",value:function(t,a,s){if(!this.isPropagationStopped(t)){var u=t.target;R.clickable(u)||R.isInputElement(u)||(this.notifyMouseDown(t,a,s),this.startNodeDragging(t,a,s))}}},{key:"onMouseMove",value:function(t,a,s){var u=this.getEventData(t),l=u.action;if(l==="magnet")this.dragMagnet(t,a,s);else{if(l==="move"){var c=u,f=c.targetView||this;f.dragNode(t,a,s),f.notify("node:moving",{e:t,x:a,y:s,view:f,cell:f.cell,node:f.cell})}this.notifyMouseMove(t,a,s)}this.setEventData(t,u)}},{key:"onMouseUp",value:function(t,a,s){var u=this.getEventData(t),l=u.action;if(l==="magnet")this.stopMagnetDragging(t,a,s);else{var c=t.target;if(R.clickable(c)||R.isInputElement(c))return;if(this.notifyMouseUp(t,a,s),l==="move"){var f=u,d=f.targetView||this;d.stopNodeDragging(t,a,s)}}var v=u.targetMagnet;v&&this.onMagnetClick(t,v,a,s),this.checkMouseleave(t)}},{key:"onMouseOver",value:function(t){Object(la.a)(Object(ca.a)(n.prototype),"onMouseOver",this).call(this,t),this.notify("node:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){Object(la.a)(Object(ca.a)(n.prototype),"onMouseOut",this).call(this,t),this.notify("node:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){this.updateClassName(t),Object(la.a)(Object(ca.a)(n.prototype),"onMouseEnter",this).call(this,t),this.notify("node:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){Object(la.a)(Object(ca.a)(n.prototype),"onMouseLeave",this).call(this,t),this.notify("node:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,a,s,u){Object(la.a)(Object(ca.a)(n.prototype),"onMouseWheel",this).call(this,t,a,s,u),this.notify("node:mousewheel",Object.assign({delta:u},this.getEventArgs(t,a,s)))}},{key:"onMagnetClick",value:function(t,a,s,u){var l=this.graph.view.getMouseMovedCount(t);l>this.graph.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:a},this.getEventArgs(t,s,u)))}},{key:"onMagnetDblClick",value:function(t,a,s,u){this.notify("node:magnet:dblclick",Object.assign({magnet:a},this.getEventArgs(t,s,u)))}},{key:"onMagnetContextMenu",value:function(t,a,s,u){this.notify("node:magnet:contextmenu",Object.assign({magnet:a},this.getEventArgs(t,s,u)))}},{key:"onMagnetMouseDown",value:function(t,a,s,u){this.startMagnetDragging(t,s,u)}},{key:"onCustomEvent",value:function(t,a,s,u){this.notify("node:customevent",Object.assign({name:a},this.getEventArgs(t,s,u))),Object(la.a)(Object(ca.a)(n.prototype),"onCustomEvent",this).call(this,t,a,s,u)}},{key:"prepareEmbedding",value:function(t){var a=this.getEventData(t),s=a.cell||this.cell,u=this.graph.findViewByCell(s),l=this.graph.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:s,view:u,cell:s,x:l.x,y:l.y,currentParent:s.getParent()})}},{key:"processEmbedding",value:function(t,a){var s=this,u=a.cell||this.cell,l=a.graph||this.graph,c=l.options.embedding,f=c.findParent,d=typeof f=="function"?A.call(f,l,{view:this,node:this.cell}).filter(function(B){return pi.isCell(B)&&s.cell.id!==B.id&&!B.isDescendantOf(s.cell)}):l.model.getNodesUnderNode(u,{by:f});if(c.frontOnly&&d.length>0){var v=I.groupBy(d,"zIndex"),p=I.max(Object.keys(v).map(function(B){return parseInt(B,10)}));p&&(d=v[p])}d=d.filter(function(B){return B.visible});for(var y=null,C=a.candidateEmbedView,E=c.validate,w=d.length-1;w>=0;w-=1){var x=d[w];if(C&&C.cell.id===x.id){y=C;break}else{var N=x.findView(l);if(A.call(E,l,{child:this.cell,parent:N.cell,childView:this,parentView:N})){y=N;break}}}this.clearEmbedding(a),y&&y.highlight(null,{type:"embedding"}),a.candidateEmbedView=y;var j=l.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:u,node:u,view:l.findViewByCell(u),x:j.x,y:j.y,currentParent:u.getParent(),candidateParent:y?y.cell:null})}},{key:"clearEmbedding",value:function(t){var a=t.candidateEmbedView;a&&(a.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)}},{key:"finalizeEmbedding",value:function(t,a){this.graph.startBatch("embedding");var s=a.cell||this.cell,u=a.graph||this.graph,l=u.findViewByCell(s),c=s.getParent(),f=a.candidateEmbedView;if(f?(f.unhighlight(null,{type:"embedding"}),a.candidateEmbedView=null,(c==null||c.id!==f.cell.id)&&f.cell.insertChild(s,void 0,{ui:!0})):c&&c.unembed(s,{ui:!0}),u.model.getConnectedEdges(s,{deep:!0}).forEach(function(v){v.updateParent({ui:!0})}),l&&f){var d=u.snapToGrid(t.clientX,t.clientY);l.notify("node:embedded",{e:t,cell:s,x:d.x,y:d.y,node:s,view:u.findViewByCell(s),previousParent:c,currentParent:s.getParent()})}this.graph.stopBatch("embedding")}},{key:"getDelegatedView",value:function(){for(var t=this.cell,a=this;a&&!t.isEdge();){if(!t.hasParent()||a.can("stopDelegateOnDragging"))return a;t=t.getParent(),a=this.graph.renderer.findViewByCell(t)}return null}},{key:"startMagnetDragging",value:function(t,a,s){if(!!this.can("magnetConnectable")){t.stopPropagation();var u=t.currentTarget,l=this.graph;this.setEventData(t,{targetMagnet:u}),l.hook.validateMagnet(this,u,t)?(l.options.magnetThreshold<=0&&this.startConnectting(t,u,a,s),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):((R.hasClass(u,"x6-port-body")||ln()(u).closest(".x6-port-body").length>0)&&this.stopPropagation(t),this.onMouseDown(t,a,s)),l.view.delegateDragEvents(t,this)}}},{key:"startConnectting",value:function(t,a,s,u){this.graph.model.startBatch("add-edge");var l=this.createEdgeFromMagnet(a,s,u);l.notifyMouseDown(t,s,u),l.setEventData(t,l.prepareArrowheadDragging("target",{x:s,y:u,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:l})}},{key:"createEdgeFromMagnet",value:function(t,a,s){var u=this.graph,l=u.model,c=u.hook.getDefaultEdge(this,t);return c.setSource(Object.assign(Object.assign({},c.getSource()),this.getEdgeTerminal(t,a,s,c,"source"))),c.setTarget(Object.assign(Object.assign({},c.getTarget()),{x:a,y:s})),c.addTo(l,{async:!1,ui:!0}),c.findView(u)}},{key:"dragMagnet",value:function(t,a,s){var u=this.getEventData(t),l=u.edgeView;if(l)l.onMouseMove(t,a,s),this.autoScrollGraph(t.clientX,t.clientY);else{var c=this.graph,f=c.options.magnetThreshold,d=this.getEventTarget(t),v=u.targetMagnet;if(f==="onleave"){if(v===d||v.contains(d))return}else if(c.view.getMouseMovedCount(t)<=f)return;this.startConnectting(t,v,a,s)}}},{key:"stopMagnetDragging",value:function(t,a,s){var u=this.eventData(t),l=u.edgeView;l&&(l.onMouseUp(t,a,s),this.graph.model.stopBatch("add-edge"))}},{key:"notifyUnhandledMouseDown",value:function(t,a,s){this.notify("node:unhandled:mousedown",{e:t,x:a,y:s,view:this,cell:this.cell,node:this.cell})}},{key:"notifyNodeMove",value:function(t,a,s,u,l){var c=this,f=[l],d=this.graph.selection.widget;if(d&&d.options.movable){var v=this.graph.getSelectedCells();v.includes(l)&&(f=v.filter(function(p){return p.isNode()}))}f.forEach(function(p){c.notify(t,{e:a,x:s,y:u,cell:p,node:p,view:p.findView(c.graph)})})}},{key:"startNodeDragging",value:function(t,a,s){var u=this.getDelegatedView();if(u==null||!u.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,a,s);this.setEventData(t,{targetView:u,action:"move"});var l=mt.create(u.cell.getPosition());u.setEventData(t,{moving:!1,offset:l.diff(a,s),restrict:this.graph.hook.getRestrictArea(u)})}},{key:"dragNode",value:function(t,a,s){var u=this.cell,l=this.graph,c=l.getGridSize(),f=this.getEventData(t),d=f.offset,v=f.restrict;f.moving||(f.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,a,s,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);var p=ts.snapToGrid(a+d.x,c),y=ts.snapToGrid(s+d.y,c);u.setPosition(p,y,{restrict:v,deep:!0,ui:!0}),l.options.embedding.enabled&&(f.embedding||(this.prepareEmbedding(t),f.embedding=!0),this.processEmbedding(t,f))}},{key:"stopNodeDragging",value:function(t,a,s){var u=this.getEventData(t);u.embedding&&this.finalizeEmbedding(t,u),u.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,a,s,this.cell)),u.moving=!1,u.embedding=!1}},{key:"autoScrollGraph",value:function(t,a){var s=this.graph.scroller.widget;s&&s.autoScroll(t,a)}}]),n}(Ho,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"&&typeof e.update=="function"&&typeof e.findPortElem=="function"&&typeof e.resize=="function"&&typeof e.rotate=="function"&&typeof e.translate=="function"}o.isNodeView=i})(Ss||(Ss={})),Ss.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),Ss.registry.register("node",Ss,!0);var wk=lS("text"),xk=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r)}(kf("text",{view:wk,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}));(function(o){var i=function(r){Object(or.a)(e,r);var n=Object(sr.a)(e);function e(){return Object(De.a)(this,e),n.apply(this,arguments)}return Object(be.a)(e,[{key:"confirmUpdate",value:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=Object(la.a)(Object(ca.a)(e.prototype),"confirmUpdate",this).call(this,a,s);return this.hasAction(u,"scale")&&(this.resize(),u=this.removeAction(u,"scale")),u}}]),e}(Ss);o.View=i,i.config({actions:{attrs:["scale"]}}),Ss.registry.register(wk,i)})(xk||(xk={}));var Sk=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(De.a)(this,r),e=i.call(this),e.length=0,e.comparator=t.comparator||"zIndex",e.clean(),n&&e.reset(n,{silent:!0}),e}return Object(be.a)(r,[{key:"toJSON",value:function(){return this.cells.map(function(e){return e.toJSON()})}},{key:"add",value:function(e,t,a){var s=this,u,l;typeof t=="number"?(u=t,l=Object.assign({merge:!1},a)):(u=this.length,l=Object.assign({merge:!1},t)),u>this.length&&(u=this.length),u<0&&(u+=this.length+1);var c=Array.isArray(e)?e:[e],f=this.comparator&&typeof t!="number"&&l.sort!==!1,d=this.comparator||null,v=!1,p=[],y=[];if(c.forEach(function(E){var w=s.get(E);w?l.merge&&!E.isSameStore(w)&&(w.setProp(E.getProp(),a),y.push(w),f&&!v&&(d==null||typeof d=="function"?v=w.hasChanged():typeof d=="string"?v=w.hasChanged(d):v=d.some(function(x){return w.hasChanged(x)}))):(p.push(E),s.reference(E))}),p.length){var C;f&&(v=!0),(C=this.cells).splice.apply(C,[u,0].concat(p)),this.length=this.cells.length}return v&&this.sort({silent:!0}),l.silent||(p.forEach(function(E,w){var x={cell:E,index:u+w,options:l};s.trigger("added",x),l.dryrun||E.notify("added",Object.assign({},x))}),v&&this.trigger("sorted"),(p.length||y.length)&&this.trigger("updated",{added:p,merged:y,removed:[],options:l})),this}},{key:"remove",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Array.isArray(e)?e:[e],s=this.removeCells(a,t);return!t.silent&&s.length>0&&this.trigger("updated",{options:t,removed:s,added:[],merged:[]}),Array.isArray(e)?s:s[0]}},{key:"removeCells",value:function(e,t){for(var a=[],s=0;s<e.length;s+=1){var u=this.get(e[s]);if(u!=null){var l=this.cells.indexOf(u);this.cells.splice(l,1),this.length-=1,delete this.map[u.id],a.push(u),this.unreference(u),t.dryrun||u.remove(),t.silent||(this.trigger("removed",{cell:u,index:l,options:t}),t.dryrun||u.notify("removed",{cell:u,index:l,options:t}))}}return a}},{key:"reset",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.cells.slice();if(s.forEach(function(f){return t.unreference(f)}),this.clean(),this.add(e,Object.assign({silent:!0},a)),!a.silent){var u=this.cells.slice();this.trigger("reseted",{options:a,previous:s,current:u});var l=[],c=[];u.forEach(function(f){var d=s.some(function(v){return v.id===f.id});d||l.push(f)}),s.forEach(function(f){var d=u.some(function(v){return v.id===f.id});d||c.push(f)}),this.trigger("updated",{options:a,added:l,removed:c,merged:[]})}return this}},{key:"push",value:function(e,t){return this.add(e,this.length,t)}},{key:"pop",value:function(e){var t=this.at(this.length-1);return this.remove(t,e)}},{key:"unshift",value:function(e,t){return this.add(e,0,t)}},{key:"shift",value:function(e){var t=this.at(0);return this.remove(t,e)}},{key:"get",value:function(e){if(e==null)return null;var t=typeof e=="string"||typeof e=="number"?e:e.id;return this.map[t]||null}},{key:"has",value:function(e){return this.get(e)!=null}},{key:"at",value:function(e){return e<0&&(e+=this.length),this.cells[e]||null}},{key:"first",value:function(){return this.at(0)}},{key:"last",value:function(){return this.at(-1)}},{key:"indexOf",value:function(e){return this.cells.indexOf(e)}},{key:"toArray",value:function(){return this.cells.slice()}},{key:"sort",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.comparator!=null&&(this.cells=I.sortBy(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}},{key:"clone",value:function(){var e=this.constructor;return new e(this.cells.slice(),{comparator:this.comparator})}},{key:"reference",value:function(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}},{key:"unreference",value:function(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}},{key:"notifyCellEvent",value:function(e,t){var a=t.cell;this.trigger("cell:".concat(e),t),a&&(a.isNode()?this.trigger("node:".concat(e),Object.assign(Object.assign({},t),{node:a})):a.isEdge()&&this.trigger("edge:".concat(e),Object.assign(Object.assign({},t),{edge:a})))}},{key:"clean",value:function(){this.length=0,this.cells=[],this.map={}}}]),r}(nu),Ml=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Object(De.a)(this,n),e=r.call(this),e.batches={},e.addings=new WeakMap,e.nodes={},e.edges={},e.outgoings={},e.incomings={},e.collection=new Sk(t),e.setup(),e}return Object(be.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"notify",value:function(t,a){this.trigger(t,a);var s=this.graph;return s&&(t==="sorted"||t==="reseted"||t==="updated"?s.trigger("model:".concat(t),a):s.trigger(t,a)),this}},{key:"setup",value:function(){var t=this,a=this.collection;a.on("sorted",function(){return t.notify("sorted",null)}),a.on("updated",function(s){return t.notify("updated",s)}),a.on("cell:change:zIndex",function(){return t.sortOnChangeZ()}),a.on("added",function(s){var u=s.cell;t.onCellAdded(u)}),a.on("removed",function(s){var u=s.cell;t.onCellRemoved(u,s.options),t.notify("cell:removed",s),u.isNode()?t.notify("node:removed",Object.assign(Object.assign({},s),{node:u})):u.isEdge()&&t.notify("edge:removed",Object.assign(Object.assign({},s),{edge:u}))}),a.on("reseted",function(s){t.onReset(s.current),t.notify("reseted",s)}),a.on("edge:change:source",function(s){var u=s.edge;return t.onEdgeTerminalChanged(u,"source")}),a.on("edge:change:target",function(s){var u=s.edge;t.onEdgeTerminalChanged(u,"target")})}},{key:"sortOnChangeZ",value:function(){this.collection.sort()}},{key:"onCellAdded",value:function(t){var a=t.id;t.isEdge()?(t.updateParent(),this.edges[a]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[a]=!0}},{key:"onCellRemoved",value:function(t,a){var s=t.id;if(t.isEdge()){delete this.edges[s];var u=t.getSource(),l=t.getTarget();if(u&&u.cell){var c=this.outgoings[u.cell],f=c?c.indexOf(s):-1;f>=0&&(c.splice(f,1),c.length===0&&delete this.outgoings[u.cell])}if(l&&l.cell){var d=this.incomings[l.cell],v=d?d.indexOf(s):-1;v>=0&&(d.splice(v,1),d.length===0&&delete this.incomings[l.cell])}}else delete this.nodes[s];a.clear||(a.disconnectEdges?this.disconnectConnectedEdges(t,a):this.removeConnectedEdges(t,a)),t.model===this&&(t.model=null)}},{key:"onReset",value:function(t){var a=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(function(s){return a.onCellAdded(s)})}},{key:"onEdgeTerminalChanged",value:function(t,a){var s=a==="source"?this.outgoings:this.incomings,u=t.previous(a);if(u&&u.cell){var l=pi.isCell(u.cell)?u.cell.id:u.cell,c=s[l],f=c?c.indexOf(t.id):-1;f>=0&&(c.splice(f,1),c.length===0&&delete s[l])}var d=t.getTerminal(a);if(d&&d.cell){var v=pi.isCell(d.cell)?d.cell.id:d.cell,p=s[v]||[],y=p.indexOf(t.id);y===-1&&p.push(t.id),s[v]=p}}},{key:"prepareCell",value:function(t,a){return!t.model&&(!a||!a.dryrun)&&(t.model=this),t.zIndex==null&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t}},{key:"resetCells",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.map(function(u){return a.prepareCell(u,Object.assign(Object.assign({},s),{dryrun:!0}))}),this.collection.reset(t,s),t.map(function(u){return a.prepareCell(u,{options:s})}),this}},{key:"clear",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getCells();if(a.length===0)return this;var s=Object.assign(Object.assign({},t),{clear:!0});return this.batchUpdate("clear",function(){for(var u=a.sort(function(c,f){var d=c.isEdge()?1:2,v=f.isEdge()?1:2;return d-v});u.length>0;){var l=u.shift();l&&l.remove(s)}},s),this}},{key:"addNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Wi.isNode(t)?t:this.createNode(t);return this.addCell(s,a),s}},{key:"createNode",value:function(t){return Wi.create(t)}},{key:"addEdge",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Co.isEdge(t)?t:this.createEdge(t);return this.addCell(s,a),s}},{key:"createEdge",value:function(t){return Co.create(t)}},{key:"addCell",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(t)?this.addCells(t,s):(!this.collection.has(t)&&!this.addings.has(t)&&(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,s),s),t.eachChild(function(u){return a.addCell(u,s)}),this.addings.delete(t)),this)}},{key:"addCells",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t.length;if(u===0)return this;var l=Object.assign(Object.assign({},s),{position:u-1,maxPosition:u-1});return this.startBatch("add",Object.assign(Object.assign({},l),{cells:t})),t.forEach(function(c){a.addCell(c,l),l.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},l),{cells:t})),this}},{key:"removeCell",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=typeof t=="string"?this.getCell(t):t;return s&&this.has(s)?this.collection.remove(s,a):null}},{key:"updateCellId",value:function(t,a){this.startBatch("update",{id:a}),t.prop("id",a);var s=t.clone({keepId:!0});this.addCell(s);var u=this.getConnectedEdges(t);return u.forEach(function(l){var c=l.getSourceCell(),f=l.getTargetCell();c===t&&l.setSource(Object.assign(Object.assign({},l.getSource()),{cell:a})),f===t&&l.setTarget(Object.assign(Object.assign({},l.getTarget()),{cell:a}))}),this.removeCell(t),this.stopBatch("update",{id:a}),s}},{key:"removeCells",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.length?this.batchUpdate("remove",function(){return t.map(function(u){return a.removeCell(u,s)})}):[]}},{key:"removeConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getConnectedEdges(t);return s.forEach(function(u){u.remove(a)}),s}},{key:"disconnectConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=typeof t=="string"?t:t.id;this.getConnectedEdges(t).forEach(function(u){var l=u.getSourceCell(),c=u.getTargetCell();l&&l.id===s&&u.setSource({x:0,y:0},a),c&&c.id===s&&u.setTarget({x:0,y:0},a)})}},{key:"has",value:function(t){return this.collection.has(t)}},{key:"total",value:function(){return this.collection.length}},{key:"indexOf",value:function(t){return this.collection.indexOf(t)}},{key:"getCell",value:function(t){return this.collection.get(t)}},{key:"getCells",value:function(){return this.collection.toArray()}},{key:"getFirstCell",value:function(){return this.collection.first()}},{key:"getLastCell",value:function(){return this.collection.last()}},{key:"getMinZIndex",value:function(){var t=this.collection.first();return t&&t.getZIndex()||0}},{key:"getMaxZIndex",value:function(){var t=this.collection.last();return t&&t.getZIndex()||0}},{key:"getCellsFromCache",value:function(t){var a=this;return t?Object.keys(t).map(function(s){return a.getCell(s)}).filter(function(s){return s!=null}):[]}},{key:"getNodes",value:function(){return this.getCellsFromCache(this.nodes)}},{key:"getEdges",value:function(){return this.getCellsFromCache(this.edges)}},{key:"getOutgoingEdges",value:function(t){var a=this,s=typeof t=="string"?t:t.id,u=this.outgoings[s];return u?u.map(function(l){return a.getCell(l)}).filter(function(l){return l&&l.isEdge()}):null}},{key:"getIncomingEdges",value:function(t){var a=this,s=typeof t=="string"?t:t.id,u=this.incomings[s];return u?u.map(function(l){return a.getCell(l)}).filter(function(l){return l&&l.isEdge()}):null}},{key:"getConnectedEdges",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[],l=typeof t=="string"?this.getCell(t):t;if(l==null)return u;var c={},f=s.indirect,d=s.incoming,v=s.outgoing;d==null&&v==null&&(d=v=!0);var p=function w(x,N){var j=N?a.getOutgoingEdges(x):a.getIncomingEdges(x);if(j!=null&&j.forEach(function($){c[$.id]||(u.push($),c[$.id]=!0,f&&(d&&w($,!1),v&&w($,!0)))}),f&&x.isEdge()){var B=N?x.getTargetCell():x.getSourceCell();B&&B.isEdge()&&(c[B.id]||(u.push(B),w(B,N)))}};if(v&&p(l,!0),d&&p(l,!1),s.deep){var y=l.getDescendants({deep:!0}),C={};y.forEach(function(w){w.isNode()&&(C[w.id]=!0)});var E=function(x,N){var j=N?a.getOutgoingEdges(x.id):a.getIncomingEdges(x.id);j!=null&&j.forEach(function(B){if(!c[B.id]){var $=B.getSourceCell(),Z=B.getTargetCell();if(!s.enclosed&&$&&C[$.id]&&Z&&C[Z.id])return;u.push(B),c[B.id]=!0}})};y.forEach(function(w){w.isEdge()||(v&&E(w,!0),d&&E(w,!1))})}return u}},{key:"isBoundary",value:function(t,a){var s=typeof t=="string"?this.getCell(t):t,u=a?this.getIncomingEdges(s):this.getOutgoingEdges(s);return u==null||u.length===0}},{key:"getBoundaryNodes",value:function(t){var a=this,s=[];return Object.keys(this.nodes).forEach(function(u){if(a.isBoundary(u,t)){var l=a.getCell(u);l&&s.push(l)}}),s}},{key:"getRoots",value:function(){return this.getBoundaryNodes(!0)}},{key:"getLeafs",value:function(){return this.getBoundaryNodes(!1)}},{key:"isRoot",value:function(t){return this.isBoundary(t,!0)}},{key:"isLeaf",value:function(t){return this.isBoundary(t,!1)}},{key:"getNeighbors",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.incoming,u=a.outgoing;s==null&&u==null&&(s=u=!0);var l=this.getConnectedEdges(t,a),c=l.reduce(function(v,p){var y=p.hasLoop(a),C=p.getSourceCell(),E=p.getTargetCell();return s&&C&&C.isNode()&&!v[C.id]&&(y||C!==t&&(!a.deep||!C.isDescendantOf(t)))&&(v[C.id]=C),u&&E&&E.isNode()&&!v[E.id]&&(y||E!==t&&(!a.deep||!E.isDescendantOf(t)))&&(v[E.id]=E),v},{});if(t.isEdge()){if(s){var f=t.getSourceCell();f&&f.isNode()&&!c[f.id]&&(c[f.id]=f)}if(u){var d=t.getTargetCell();d&&d.isNode()&&!c[d.id]&&(c[d.id]=d)}}return Object.keys(c).map(function(v){return c[v]})}},{key:"isNeighbor",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=s.incoming,l=s.outgoing;return u==null&&l==null&&(u=l=!0),this.getConnectedEdges(t,s).some(function(c){var f=c.getSourceCell(),d=c.getTargetCell();return!!(u&&f&&f.id===a.id||l&&d&&d.id===a.id)})}},{key:"getSuccessors",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[];return this.search(t,function(l,c){l!==t&&a.matchDistance(c,s.distance)&&u.push(l)},Object.assign(Object.assign({},s),{outgoing:!0})),u}},{key:"isSuccessor",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=!1;return this.search(t,function(c,f){if(c===a&&c!==t&&s.matchDistance(f,u.distance))return l=!0,!1},Object.assign(Object.assign({},u),{outgoing:!0})),l}},{key:"getPredecessors",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[];return this.search(t,function(l,c){l!==t&&a.matchDistance(c,s.distance)&&u.push(l)},Object.assign(Object.assign({},s),{incoming:!0})),u}},{key:"isPredecessor",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=!1;return this.search(t,function(c,f){if(c===a&&c!==t&&s.matchDistance(f,u.distance))return l=!0,!1},Object.assign(Object.assign({},u),{incoming:!0})),l}},{key:"matchDistance",value:function(t,a){return a==null?!0:typeof a=="function"?a(t):Array.isArray(a)&&a.includes(t)?!0:t===a}},{key:"getCommonAncestor",value:function(){for(var t=[],a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return s.forEach(function(l){l&&(Array.isArray(l)?t.push.apply(t,Object(Qe.a)(l)):t.push(l))}),pi.getCommonAncestor.apply(pi,t)}},{key:"getSubGraph",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[],l={},c=[],f=[],d=function(p){l[p.id]||(u.push(p),l[p.id]=p,p.isEdge()&&f.push(p),p.isNode()&&c.push(p))};return t.forEach(function(v){if(d(v),s.deep){var p=v.getDescendants({deep:!0});p.forEach(function(y){return d(y)})}}),f.forEach(function(v){var p=v.getSourceCell(),y=v.getTargetCell();p&&!l[p.id]&&(u.push(p),l[p.id]=p,p.isNode()&&c.push(p)),y&&!l[y.id]&&(u.push(y),l[y.id]=y,y.isNode()&&c.push(y))}),c.forEach(function(v){var p=a.getConnectedEdges(v,s);p.forEach(function(y){var C=y.getSourceCell(),E=y.getTargetCell();!l[y.id]&&C&&l[C.id]&&E&&l[E.id]&&(u.push(y),l[y.id]=y)})}),u}},{key:"cloneSubGraph",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getSubGraph(t,a);return this.cloneCells(s)}},{key:"cloneCells",value:function(t){return pi.cloneCells(t)}},{key:"getNodesFromPoint",value:function(t,a){var s=typeof t=="number"?{x:t,y:a||0}:t;return this.getNodes().filter(function(u){return u.getBBox().containsPoint(s)})}},{key:"getNodesInArea",value:function(t,a,s,u,l){var c=typeof t=="number"?new Sr(t,a,s,u):Sr.create(t),f=typeof t=="number"?l:a,d=f&&f.strict;return this.getNodes().filter(function(v){var p=v.getBBox();return d?c.containsRect(p):c.isIntersectWithRect(p)})}},{key:"getEdgesInArea",value:function(t,a,s,u,l){var c=typeof t=="number"?new Sr(t,a,s,u):Sr.create(t),f=typeof t=="number"?l:a,d=f&&f.strict;return this.getEdges().filter(function(v){var p=v.getBBox();return p.width===0?p.inflate(1,0):p.height===0&&p.inflate(0,1),d?c.containsRect(p):c.isIntersectWithRect(p)})}},{key:"getNodesUnderNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.getBBox(),u=a.by==null||a.by==="bbox"?this.getNodesInArea(s):this.getNodesFromPoint(s[a.by]);return u.filter(function(l){return t.id!==l.id&&!l.isDescendantOf(t)})}},{key:"getAllCellsBBox",value:function(){return this.getCellsBBox(this.getCells())}},{key:"getCellsBBox",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pi.getCellsBBox(t,a)}},{key:"search",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.breadthFirst?this.breadthFirstSearch(t,a,s):this.depthFirstSearch(t,a,s)}},{key:"breadthFirstSearch",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=[],c={},f={};l.push(t),f[t.id]=0;for(var d=function(){var y=l.shift();if(y==null||c[y.id]||(c[y.id]=!0,A.call(a,s,y,f[y.id])===!1))return"continue";var C=s.getNeighbors(y,u);C.forEach(function(E){f[E.id]=f[y.id]+1,l.push(E)})};l.length>0;)var v=d()}},{key:"depthFirstSearch",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=[],c={},f={};l.push(t),f[t.id]=0;for(var d=function(){var y=l.pop();if(y==null||c[y.id]||(c[y.id]=!0,A.call(a,s,y,f[y.id])===!1))return"continue";var C=s.getNeighbors(y,u),E=l.length;C.forEach(function(w){f[w.id]=f[y.id]+1,l.splice(E,0,w)})};l.length>0;)var v=d()}},{key:"getShortestPath",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u={};this.getEdges().forEach(function(v){var p=v.getSourceCellId(),y=v.getTargetCellId();p&&y&&(u[p]||(u[p]=[]),u[y]||(u[y]=[]),u[p].push(y),s.directed||u[y].push(p))});var l=typeof t=="string"?t:t.id,c=rS.run(u,l,s.weight),f=[],d=typeof a=="string"?a:a.id;for(c[d]&&f.push(d);d=c[d];)f.unshift(d);return f}},{key:"translate",value:function(t,a,s){return this.getCells().filter(function(u){return!u.hasParent()}).forEach(function(u){return u.translate(t,a,s)}),this}},{key:"resize",value:function(t,a,s){return this.resizeCells(t,a,this.getCells(),s)}},{key:"resizeCells",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.getCellsBBox(s);if(l){var c=Math.max(t/l.width,0),f=Math.max(a/l.height,0),d=l.getOrigin();s.forEach(function(v){return v.scale(c,f,d,u)})}return this}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n.toJSON(this.getCells(),t)}},{key:"parseJSON",value:function(t){return n.fromJSON(t)}},{key:"fromJSON",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.parseJSON(t);return this.resetCells(s,a),this}},{key:"startBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:a}),this}},{key:"stopBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:a}),this}},{key:"batchUpdate",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch(t,s);var u=a();return this.stopBatch(t,s),u}},{key:"hasActiveBatch",value:function(){var t=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(this.batches),s=Array.isArray(a)?a:[a];return s.some(function(u){return t.batches[u]>0})}}]),n}(nu,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.addNode=="function"&&typeof e.addEdge=="function"&&e.collection!=null}o.isModel=i})(Ml||(Ml={})),function(o){function i(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{cells:n.map(function(t){return t.toJSON(e)})}}o.toJSON=i;function r(n){var e=[];return Array.isArray(n)?e.push.apply(e,Object(Qe.a)(n)):(n.cells&&e.push.apply(e,Object(Qe.a)(n.cells)),n.nodes&&n.nodes.forEach(function(t){t.shape==null&&(t.shape="rect"),e.push(t)}),n.edges&&n.edges.forEach(function(t){t.shape==null&&(t.shape="edge"),e.push(t)})),e.map(function(t){var a=t.shape;if(a){if(Wi.registry.exist(a))return Wi.create(t);if(Co.registry.exist(a))return Co.create(t)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}o.fromJSON=r}(Ml||(Ml={}));var Df=".text-block-content",k1=lS("text-block"),D1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"content",get:function(){return this.getContent()},set:function(e){this.setContent(e)}},{key:"getContent",value:function(){return this.store.get("content","")}},{key:"setContent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.store.set("content",e,t)}},{key:"setup",value:function(){var e=this;Object(la.a)(Object(ca.a)(r.prototype),"setup",this).call(this),this.store.on("change:*",function(t){var a=t.key;a==="content"?e.updateContent(e.getContent()):a==="size"&&e.updateSize(e.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}},{key:"updateSize",value:function(e){ra.SUPPORT_FOREIGNOBJECT&&this.setAttrs(Object(Xe.a)({foreignObject:Object.assign({},e)},Df,{style:Object.assign({},e)}))}},{key:"updateContent",value:function(e){ra.SUPPORT_FOREIGNOBJECT?this.setAttrs(Object(Xe.a)({},Df,{html:e?_.sanitizeHTML(e):""})):this.setAttrs(Object(Xe.a)({},Df,{text:e}))}}]),r}(Wi);(function(o){o.config({type:k1,view:k1,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',ra.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">','<div class="'.concat(Df.substr(1),'" />'),"</body>","</foreignObject>"].join(""):'<text class="'.concat(Df.substr(1),'"/>'),"</g>"].join(""),attrs:Object(Xe.a)({".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}}},Df,{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}})}),Wi.registry.register(k1,o)})(D1||(D1={})),function(o){var i="content",r=function(n){Object(or.a)(t,n);var e=Object(sr.a)(t);function t(){return Object(De.a)(this,t),e.apply(this,arguments)}return Object(be.a)(t,[{key:"confirmUpdate",value:function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=Object(la.a)(Object(ca.a)(t.prototype),"confirmUpdate",this).call(this,s,u);return this.hasAction(l,i)&&(this.updateContent(),l=this.removeAction(l,i)),l}},{key:"update",value:function(s){if(ra.SUPPORT_FOREIGNOBJECT)Object(la.a)(Object(ca.a)(t.prototype),"update",this).call(this,s);else{var u=this.cell,l=Object.assign({},s||u.getAttrs());delete l[Df],Object(la.a)(Object(ca.a)(t.prototype),"update",this).call(this,l),(!s||m.has(s,Df))&&this.updateContent(s)}}},{key:"updateContent",value:function(s){if(ra.SUPPORT_FOREIGNOBJECT)Object(la.a)(Object(ca.a)(t.prototype),"update",this).call(this,s);else{var u=this.cell,l=(s||u.getAttrs())[Df],c=R.breakText(u.getContent(),u.getSize(),l,{svgDocument:this.graph.view.svg}),f=Object(Xe.a)({},Df,m.merge({},l,{text:c}));Object(la.a)(Object(ca.a)(t.prototype),"update",this).call(this,f)}}}]),t}(Ss);o.View=r,function(n){n.config({bootstrap:["render",i],actions:ra.SUPPORT_FOREIGNOBJECT?{}:{size:i,content:i}}),Ss.registry.register(k1,n)}(r=o.View||(o.View={}))}(D1||(D1={}));var q5=Gs.define({shape:"empty"});function ez(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body";return[{tagName:o,selector:i},{tagName:"text",selector:"label"}]}function wd(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n={constructorName:o,markup:ez(o,r.selector),attrs:Object(Xe.a)({},o,Object.assign({},Gs.bodyAttr))},e=r.parent||Gs;return e.define(m.merge(n,i,{shape:o}))}var tz=wd("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),nz=Wi.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},Gs.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},Gs.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},Gs.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},Gs.labelAttr),{refY2:15})}}),rz=wd("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),cS=10,az=Gs.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},Gs.bodyAttr),{lateral:cS}),top:Object.assign(Object.assign({},Gs.bodyAttr),{refCx:"50%",refRx:"50%",cy:cS,ry:cS})},attrHooks:{lateral:{set:function(i,r){var n=r.refBBox,e=M.isPercentage(i);e&&(i=parseFloat(i)/100);var t=n.x,a=n.y,s=n.width,u=n.height,l=s/2,c=e?u*i:i,f=.551784,d=f*l,v=f*c,p=t,y=t+s/2,C=t+s,E=a+c,w=E-c,x=a+u-c,N=a+u,j=["M",p,E,"L",p,x,"C",t,x+v,y-d,N,y,N,"C",y+d,N,C,x+v,C,x,"L",C,E,"C",C,E-v,y+d,w,y,w,"C",y-d,w,p,E-v,p,E,"Z"];return{d:j.join(" ")}}}},knob:{enabled:!0,position:function(i){var r=i.node,n=r.attr("body/lateral");return{x:0,y:n}},onMouseMove:function(i){var r=i.node,n=i.data,e=i.deltaY;if(e!==0){var t=r.getBBox(),a=r.attr("body/lateral");n.round==null&&(n.round=a);var s=0,u=t.height/2,l=M.clamp(n.round+e,s,u);l!==a&&r.attr({body:{lateral:l},top:{cy:l,ry:l}})}}}}),iz=wd("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),oz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},I1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"points",get:function(){return this.getPoints()},set:function(e){this.setPoints(e)}},{key:"getPoints",value:function(){return this.getAttrByPath("body/refPoints")}},{key:"setPoints",value:function(e,t){return e==null?this.removePoints():this.setAttrByPath("body/refPoints",r.pointsToString(e),t),this}},{key:"removePoints",value:function(){return this.removeAttrByPath("body/refPoints"),this}}]),r}(Gs);(function(o){function i(r){return typeof r=="string"?r:r.map(function(n){return Array.isArray(n)?n.join(","):mt.isPointLike(n)?"".concat(n.x,", ").concat(n.y):""}).join(" ")}o.pointsToString=i,o.config({propHooks:function(n){var e=n.points,t=oz(n,["points"]);if(e){var a=i(e);a&&m.setByPath(t,"attrs/body/refPoints",a)}return t}})})(I1||(I1={}));var sz=wd("polygon",{},{parent:I1}),uz=wd("polyline",{},{parent:I1}),lz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},cz=Gs.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks:function(i){var r=i.path,n=lz(i,["path"]);return r&&m.setByPath(n,"attrs/body/refD",r),n}}),fz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},dz=Gs.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},ra.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:R.ns.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},Gs.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(i){var r=i.text,n=fz(i,["text"]);return r&&m.setByPath(n,"attrs/label/text",r),n},attrHooks:{text:{set:function(i,r){var n=r.cell,e=r.view,t=r.refBBox,a=r.elem,s=r.attrs;if(a instanceof HTMLElement)a.textContent=i;else{var u=s.style||{},l={text:i,width:-5,height:"100%"},c=Object.assign({textVerticalAnchor:"middle"},u),f=Lc.presets.textWrap;return A.call(f.set,this,l,{cell:n,view:e,elem:a,refBBox:t,attrs:c}),{fill:u.color||null}}},position:function(i,r){var n=r.refBBox,e=r.elem;if(e instanceof SVGElement)return n.getCenter()}}}}),hz=wd("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:u0()},{selector:"image"}),vz=wd("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:u0()}),gz=wd("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:u0()}),pz=wd("image-inscribed",{propHooks:u0(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),fS=Co.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),mz=Co.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),yz=Co.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}}),Fc=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"html",get:function(){return this.getHTML()},set:function(e){this.setHTML(e)}},{key:"getHTML",value:function(){return this.store.get("html")}},{key:"setHTML",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeHTML(t):this.store.set("html",e,t),this}},{key:"removeHTML",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("html",e)}}]),r}(Gs);(function(o){var i=function(r){Object(or.a)(e,r);var n=Object(sr.a)(e);function e(){return Object(De.a)(this,e),n.apply(this,arguments)}return Object(be.a)(e,[{key:"init",value:function(){var a=this;Object(la.a)(Object(ca.a)(e.prototype),"init",this).call(this),this.cell.on("change:*",function(){var s=a.graph.hook.shouldUpdateHTMLComponent(a.cell);s&&a.renderHTMLComponent()})}},{key:"confirmUpdate",value:function(a){var s=this,u=Object(la.a)(Object(ca.a)(e.prototype),"confirmUpdate",this).call(this,a);return this.handleAction(u,e.action,function(){return s.renderHTMLComponent()})}},{key:"renderHTMLComponent",value:function(){var a=this.selectors.foContent;if(a){var s=this.$(a).empty(),u=this.graph.hook.getHTMLComponent(this.cell);u&&(typeof u=="string"?s.html(u):s.append(u))}}}]),e}(Ss);o.View=i,function(r){r.action="html",r.config({bootstrap:[r.action],actions:{html:r.action}}),Ss.registry.register("html-view",r)}(i=o.View||(o.View={}))})(Fc||(Fc={})),function(o){o.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},ci.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),Wi.registry.register("html",o)}(Fc||(Fc={})),function(o){o.componentRegistry=Io.create({type:"html componnet"})}(Fc||(Fc={}));var bz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},R1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.delay=10,e.throttle=2,e.threshold=5,e.changeCount=0,e.timestamp=0,e.options=Object.assign(Object.assign({},r.defaultOptions),n),e.graph.model.on("cell:change:*",e.onModelChanged,Object(Vo.a)(e)),e}return Object(be.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"onModelChanged",value:function(){if(!this.disabled){var e=new Date().getTime(),t=(e-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}}},{key:"save",value:function(){this.trigger("save")}},{key:"reset",value:function(){this.changeCount=0,this.timestamp=new Date().getTime()}},{key:"dispose",value:function(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}}]),r}(XP);bz([XP.dispose()],R1.prototype,"dispose",null),function(o){o.defaultOptions={delay:10,throttle:2,threshold:5}}(R1||(R1={}));var $i=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.graph=n,e.init(),e}return Object(be.a)(r,[{key:"options",get:function(){return this.graph.options}},{key:"model",get:function(){return this.graph.model}},{key:"view",get:function(){return this.graph.view}},{key:"init",value:function(){}}]),r}(_c),Cz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Ch=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;Object(De.a)(this,r),e=i.call(this),e.graph=n;var t=ci.parseJSONMarkup(r.markup),a=t.selectors,s=t.fragment;return e.background=a.background,e.grid=a.grid,e.svg=a.svg,e.defs=a.defs,e.viewport=a.viewport,e.primer=a.primer,e.stage=a.stage,e.decorator=a.decorator,e.overlay=a.overlay,e.container=e.options.container,e.restore=r.snapshoot(e.container),e.$(e.container).addClass(e.prefixClassName("graph")).append(s),e.delegateEvents(),e}return Object(be.a)(r,[{key:"model",get:function(){return this.graph.model}},{key:"options",get:function(){return this.graph.options}},{key:"delegateEvents",value:function(){var e=this.constructor;return Object(la.a)(Object(ca.a)(r.prototype),"delegateEvents",this).call(this,e.events),this}},{key:"guard",value:function(e,t){return e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t)?!0:e.data&&e.data.guarded!==void 0?e.data.guarded:!(t&&t.cell&&pi.isCell(t.cell)||this.svg===e.target||this.container===e.target||ln.a.contains(this.svg,e.target))}},{key:"findView",value:function(e){return this.graph.renderer.findViewByElem(e)}},{key:"onDblClick",value:function(e){this.options.preventDefaultDblClick&&e.preventDefault();var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){var s=this.graph.snapToGrid(t.clientX,t.clientY);a?a.onDblClick(t,s.x,s.y):this.graph.trigger("blank:dblclick",{e:t,x:s.x,y:s.y})}}},{key:"onClick",value:function(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){var t=this.normalizeEvent(e),a=this.findView(t.target);if(this.guard(t,a))return;var s=this.graph.snapToGrid(t.clientX,t.clientY);a?a.onClick(t,s.x,s.y):this.graph.trigger("blank:click",{e:t,x:s.x,y:s.y})}}},{key:"isPreventDefaultContextMenu",value:function(e,t){var a=this.options.preventDefaultContextMenu;return typeof a=="function"&&(a=A.call(a,this.graph,{view:t})),a}},{key:"onContextMenu",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(this.isPreventDefaultContextMenu(t,a)&&e.preventDefault(),!this.guard(t,a)){var s=this.graph.snapToGrid(t.clientX,t.clientY);a?a.onContextMenu(t,s.x,s.y):this.graph.trigger("blank:contextmenu",{e:t,x:s.x,y:s.y})}}},{key:"delegateDragEvents",value:function(e,t){e.data==null&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});var a=this.constructor;this.delegateDocumentEvents(a.documentEvents,e.data),this.undelegateEvents()}},{key:"getMouseMovedCount",value:function(e){var t=this.getEventData(e);return t.mouseMovedCount||0}},{key:"onMouseDown",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){this.options.preventDefaultMouseDown&&t.preventDefault();var s=this.graph.snapToGrid(t.clientX,t.clientY);a?a.onMouseDown(t,s.x,s.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:s.x,y:s.y})),this.delegateDragEvents(t,a)}}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),a=t.startPosition;if(!(a&&a.x===e.clientX&&a.y===e.clientY)){t.mouseMovedCount==null&&(t.mouseMovedCount=0),t.mouseMovedCount+=1;var s=t.mouseMovedCount;if(!(s<=this.options.moveThreshold)){var u=this.normalizeEvent(e),l=this.graph.snapToGrid(u.clientX,u.clientY),c=t.currentView;c?c.onMouseMove(u,l.x,l.y):this.graph.trigger("blank:mousemove",{e:u,x:l.x,y:l.y}),this.setEventData(u,t)}}}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),a=this.graph.snapToGrid(t.clientX,t.clientY),s=this.getEventData(e),u=s.currentView;u?u.onMouseUp(t,a.x,a.y):this.graph.trigger("blank:mouseup",{e:t,x:a.x,y:a.y}),e.isPropagationStopped()||this.onClick(ln.a.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}},{key:"onMouseOver",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a))if(a)a.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}},{key:"onMouseOut",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a))if(a)a.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}},{key:"onMouseEnter",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){var s=this.graph.renderer.findViewByElem(t.relatedTarget);if(a){if(s===a)return;a.onMouseEnter(t)}else{if(s)return;this.graph.trigger("graph:mouseenter",{e:t})}}}},{key:"onMouseLeave",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){var s=this.graph.renderer.findViewByElem(t.relatedTarget);if(a){if(s===a)return;a.onMouseLeave(t)}else{if(s)return;this.graph.trigger("graph:mouseleave",{e:t})}}}},{key:"onMouseWheel",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){var s=t.originalEvent,u=this.graph.snapToGrid(s.clientX,s.clientY),l=Math.max(-1,Math.min(1,s.wheelDelta||-s.detail));a?a.onMouseWheel(t,u.x,u.y,l):this.graph.trigger("blank:mousewheel",{e:t,delta:l,x:u.x,y:u.y})}}},{key:"onCustomEvent",value:function(e){var t=e.currentTarget,a=t.getAttribute("event")||t.getAttribute("data-event");if(a){var s=this.findView(t);if(s){var u=this.normalizeEvent(e);if(this.guard(u,s))return;var l=this.graph.snapToGrid(u.clientX,u.clientY);s.onCustomEvent(u,a,l.x,l.y)}}}},{key:"handleMagnetEvent",value:function(e,t){var a=e.currentTarget,s=a.getAttribute("magnet");if(s&&s.toLowerCase()!=="false"){var u=this.findView(a);if(u){var l=this.normalizeEvent(e);if(this.guard(l,u))return;var c=this.graph.snapToGrid(l.clientX,l.clientY);A.call(t,this.graph,u,l,a,c.x,c.y)}}}},{key:"onMagnetMouseDown",value:function(e){this.handleMagnetEvent(e,function(t,a,s,u,l){t.onMagnetMouseDown(a,s,u,l)})}},{key:"onMagnetDblClick",value:function(e){this.handleMagnetEvent(e,function(t,a,s,u,l){t.onMagnetDblClick(a,s,u,l)})}},{key:"onMagnetContextMenu",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);this.isPreventDefaultContextMenu(t,a)&&t.preventDefault(),this.handleMagnetEvent(t,function(s,u,l,c,f){s.onMagnetContextMenu(u,l,c,f)})}},{key:"onLabelMouseDown",value:function(e){var t=e.currentTarget,a=this.findView(t);if(a){var s=this.normalizeEvent(e);if(this.guard(s,a))return;var u=this.graph.snapToGrid(s.clientX,s.clientY);a.onLabelMouseDown(s,u.x,u.y)}}},{key:"onImageDragStart",value:function(){return!1}},{key:"dispose",value:function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}}}]),r}(Ai);Cz([Ai.dispose()],Ch.prototype,"dispose",null),function(o){var i="".concat(Tl.prefixCls,"-graph");o.markup=[{ns:R.ns.xhtml,tagName:"div",selector:"background",className:"".concat(i,"-background")},{ns:R.ns.xhtml,tagName:"div",selector:"grid",className:"".concat(i,"-grid")},{ns:R.ns.svg,tagName:"svg",selector:"svg",className:"".concat(i,"-svg"),attrs:{width:"100%",height:"100%","xmlns:xlink":R.ns.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:"".concat(i,"-svg-viewport"),children:[{tagName:"g",selector:"primer",className:"".concat(i,"-svg-primer")},{tagName:"g",selector:"stage",className:"".concat(i,"-svg-stage")},{tagName:"g",selector:"decorator",className:"".concat(i,"-svg-decorator")},{tagName:"g",selector:"overlay",className:"".concat(i,"-svg-overlay")}]}]}];function r(n){var e=n.cloneNode();return n.childNodes.forEach(function(t){return e.appendChild(t)}),function(){for(R.empty(n);n.attributes.length>0;)n.removeAttribute(n.attributes[0].name);for(var t=0,a=e.attributes.length;t<a;t+=1){var s=e.attributes[t];n.setAttribute(s.name,s.value)}e.childNodes.forEach(function(u){return n.appendChild(u)})}}o.snapshoot=r}(Ch||(Ch={})),function(o){var i,r=Tl.prefixCls;o.events=(i={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"},Object(Xe.a)(i,"mouseenter  .".concat(r,"-cell"),"onMouseEnter"),Object(Xe.a)(i,"mouseleave  .".concat(r,"-cell"),"onMouseLeave"),Object(Xe.a)(i,"mouseenter  .".concat(r,"-cell-tools"),"onMouseEnter"),Object(Xe.a)(i,"mouseleave  .".concat(r,"-cell-tools"),"onMouseLeave"),Object(Xe.a)(i,"mousedown   .".concat(r,"-cell [event]"),"onCustomEvent"),Object(Xe.a)(i,"touchstart  .".concat(r,"-cell [event]"),"onCustomEvent"),Object(Xe.a)(i,"mousedown   .".concat(r,"-cell [data-event]"),"onCustomEvent"),Object(Xe.a)(i,"touchstart  .".concat(r,"-cell [data-event]"),"onCustomEvent"),Object(Xe.a)(i,"dblclick    .".concat(r,"-cell [magnet]"),"onMagnetDblClick"),Object(Xe.a)(i,"contextmenu .".concat(r,"-cell [magnet]"),"onMagnetContextMenu"),Object(Xe.a)(i,"mousedown   .".concat(r,"-cell [magnet]"),"onMagnetMouseDown"),Object(Xe.a)(i,"touchstart  .".concat(r,"-cell [magnet]"),"onMagnetMouseDown"),Object(Xe.a)(i,"dblclick    .".concat(r,"-cell [data-magnet]"),"onMagnetDblClick"),Object(Xe.a)(i,"contextmenu .".concat(r,"-cell [data-magnet]"),"onMagnetContextMenu"),Object(Xe.a)(i,"mousedown   .".concat(r,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(Xe.a)(i,"touchstart  .".concat(r,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(Xe.a)(i,"dragstart   .".concat(r,"-cell image"),"onImageDragStart"),Object(Xe.a)(i,"mousedown   .".concat(r,"-edge .").concat(r,"-edge-label"),"onLabelMouseDown"),Object(Xe.a)(i,"touchstart  .".concat(r,"-edge .").concat(r,"-edge-label"),"onLabelMouseDown"),i),o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(Ch||(Ch={}));var ql;(function(o){function i(r,n){return function(e,t,a){var s=a.value;a.value=function(){var u=this.scroller.widget;if(u==null){var l="Shoule enable scroller to use method '".concat(t,"'");if(r!==!1)throw console.error(l),new Error(l);return n!==!1&&console.warn(l),this}for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return s.call.apply(s,[this].concat(f))}}}o.checkScroller=i})(ql||(ql={}));var Ez=`.x6-graph {
  position: relative;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-halo {
  position: absolute;
  pointer-events: none;
}
.x6-widget-halo-content {
  position: absolute;
  top: 100%;
  padding: 6px;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-halo-handles + .x6-widget-halo-content {
  right: -20px;
  left: -20px;
  margin-top: 30px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 25px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 20px;
}
.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {
  right: 0;
  left: 0;
  margin-top: 10px;
}
.x6-widget-halo-content {
  color: #fff;
  background-color: #6a6b8a;
}
.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {
  position: absolute;
  right: 100%;
  bottom: 100%;
  margin-right: 6px;
  margin-bottom: 3px;
}
.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {
  background-color: #fff;
  border-radius: 50%;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar {
  margin-top: -60px;
  margin-left: -18px;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {
  top: -22px;
  left: -9px;
}
.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizeSpeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
.x6-widget-selection {
  position: absolute;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: attr(data-not-found-text);
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  -webkit-appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
.x6-widget-knob {
  position: absolute;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin-top: -8px;
  margin-left: -8px;
  cursor: pointer;
  user-select: none;
}
.x6-widget-knob::before,
.x6-widget-knob::after {
  position: absolute;
  transform: rotate(45deg);
  content: '';
}
.x6-widget-knob::before {
  top: 4px;
  left: 4px;
  box-sizing: border-box;
  width: 8px;
  height: 8px;
  background-color: #fff;
}
.x6-widget-knob::after {
  top: 5px;
  left: 5px;
  box-sizing: border-box;
  width: 6px;
  height: 6px;
  background-color: #fca000;
}
.x6-graph-print {
  position: relative;
}
.x6-graph-print .x6-graph-print-ready {
  display: none;
}
.x6-graph-print .x6-graph-print-preview {
  overflow: hidden !important;
  background: #fff !important;
}
@media print {
  html,
  html > body.x6-graph-printing {
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  html > body.x6-graph-printing > * {
    display: none !important;
  }
  html > body.x6-graph-printing > .x6-graph-print {
    display: block !important;
  }
  .x6-graph-print {
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: always;
    background: #fff !important;
  }
  .x6-graph-print .x6-graph-print-ready {
    display: none;
  }
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`,Oz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},l0=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"init",value:function(){Tl.autoInsertCSS&&r.ensure()}},{key:"dispose",value:function(){r.clean()}}]),r}($i);Oz([l0.dispose()],l0.prototype,"dispose",null),function(o){var i,r=0;function n(){if(r+=1,!(r>1)&&!ra.isApplyingHMR()){i=document.createElement("style"),i.setAttribute("type","text/css"),i.textContent=Ez;var t=document.querySelector("head");t&&t.insertBefore(i,t.firstChild)}}o.ensure=n;function e(){r-=1,!(r>0)&&(i&&i.parentNode&&i.parentNode.removeChild(i),i=null)}o.clean=e}(l0||(l0={}));var wz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},c0=function(){function o(){Object(De.a)(this,o)}return Object(be.a)(o,[{key:"handleClassName",get:function(){return Xi.handle}},{key:"pie",get:function(){return Object.assign(Object.assign({},o.defaultPieOptions),this.handleOptions.pie)}},{key:"initHandles",value:function(){var r=this,n;if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(function(a){return r.addHandle(a)}),this.handleOptions.type==="pie"){if(this.pie.toggles){var e=Xi.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(function(a){var s=r.$("<div/>");r.applyAttrs(s,a.attrs),s.addClass(e).addClass("".concat(e,"-pos-").concat(a.position||"e")).attr("data-name",a.name).appendTo(r.container),r.$pieToggles[a.name]=s})}this.setPieIcons()}if(this.$handleContainer){var t=this.handleOptions.type||"surround";this.$handleContainer.addClass(Xi.wrap).addClass(Xi.animate).addClass("".concat(Xi.handle,"-").concat(t))}this.delegateEvents((n={},Object(Xe.a)(n,"mousedown .".concat(Xi.handle),"onHandleMouseDown"),Object(Xe.a)(n,"touchstart .".concat(Xi.handle),"onHandleMouseDown"),Object(Xe.a)(n,"mousedown .".concat(Xi.pieToggle),"onPieToggleMouseDown"),Object(Xe.a)(n,"touchstart .".concat(Xi.pieToggle),"onPieToggleMouseDown"),n))}},{key:"onHandleMouseDown",value:function(r){var n=this.$(r.currentTarget).closest(".".concat(Xi.handle)).attr("data-action");n&&(r.preventDefault(),r.stopPropagation(),this.setEventData(r,{action:n,clientX:r.clientX,clientY:r.clientY,startX:r.clientX,startY:r.clientY}),r.type==="mousedown"&&r.button===2?this.triggerHandleAction(n,"contextmenu",r):(this.triggerHandleAction(n,"mousedown",r),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},r.data)))}},{key:"onHandleMouseMove",value:function(r){var n=this.getEventData(r),e=n.action;e&&this.triggerHandleAction(e,"mousemove",r)}},{key:"onHandleMouseUp",value:function(r){var n=this.getEventData(r),e=n.action;e&&(this.triggerHandleAction(e,"mouseup",r),this.undelegateDocumentEvents())}},{key:"triggerHandleAction",value:function(r,n,e,t){e.preventDefault(),e.stopPropagation();var a=this.normalizeEvent(e),s=this.getEventData(a),u=this.graph.snapToGrid(a.clientX,a.clientY),l=this.graph.snapToGrid(s.clientX,s.clientY),c=u.x-l.x,f=u.y-l.y;this.trigger("action:".concat(r,":").concat(n),Object.assign({e:a,dx:c,dy:f,x:u.x,y:u.y,offsetX:e.clientX-s.startX,offsetY:e.clientY-s.startY},t)),s.clientX=e.clientX,s.clientY=e.clientY}},{key:"onPieToggleMouseDown",value:function(r){r.stopPropagation();var n=this.$(r.target).closest(".".concat(Xi.pieToggle)).attr("data-name");this.isOpen(n)||this.isOpen()&&this.toggleState(),this.toggleState(n)}},{key:"setPieIcons",value:function(){var r=this;this.handleOptions.type==="pie"&&this.$handleContainer.find(".".concat(Xi.handle)).each(function(n,e){var t=r.$(e),a=t.attr("data-action"),s=Xi.pieSlice,u=r.getHandle(a);if(!u||!u.icon){var l=window.getComputedStyle(e,":before").getPropertyValue("content");if(l&&l!=="none"){var c=t.find(".".concat(s,"-txt"));c.length&&ja.create(c[0]).text(l.replace(/['"]/g,""))}var f=t.css("background-image");if(f){var d=f.match(/url\(['"]?([^'"]+)['"]?\)/);if(d){var v=d[1],p=t.find(".".concat(s,"-img"));p.length>0&&ja.create(p[0]).attr("xlink:href",v)}}}})}},{key:"getHandleIdx",value:function(r){return this.handles.findIndex(function(n){return n.name===r})}},{key:"hasHandle",value:function(r){return this.getHandleIdx(r)>=0}},{key:"getHandle",value:function(r){return this.handles.find(function(n){return n.name===r})}},{key:"renderHandle",value:function(r){var n=this.$("<div/>").addClass("".concat(Xi.handle," ").concat(Xi.handle,"-").concat(r.name)).attr("data-action",r.name).prop("draggable",!1);if(this.handleOptions.type==="pie"){var e=this.getHandleIdx(r.name),t=this.pie,a=t.outerRadius,s=t.innerRadius,u=(a+s)/2,l=new mt(a,a),c=ti.toRad(t.sliceAngle),f=e*c+ti.toRad(t.startAngle),d=f+c,v=R.createSlicePathData(s,a,f,d),p=ja.create("svg").addClass("".concat(Xi.pieSlice,"-svg")),y=ja.create("path").addClass(Xi.pieSlice).attr("d",v).translate(a,a),C=mt.fromPolar(u,-f-c/2,l).toJSON(),E=t.iconSize,w=ja.create("image").attr(C).addClass("".concat(Xi.pieSlice,"-img"));C.y=C.y+E-2;var x=ja.create("text",{"font-size":E}).attr(C).addClass("".concat(Xi.pieSlice,"-txt"));w.attr({width:E,height:E}),w.translate(-E/2,-E/2),x.translate(-E/2,-E/2),p.append([y,w,x]),n.append(p.node)}else n.addClass("".concat(Xi.handle,"-pos-").concat(r.position)),r.content&&(typeof r.content=="string"?n.html(r.content):n.append(r.content));return this.updateHandleIcon(n,r.icon),this.applyAttrs(n,r.attrs),n}},{key:"addHandle",value:function(r){var n=this;if(!this.hasHandle(r.name)){this.handles.push(r);var e=r.events;e&&Object.keys(e).forEach(function(t){var a=e[t],s="action:".concat(r.name,":").concat(t);typeof a=="string"?n.on(s,n[a],n):n.on(s,a)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(r))}return this}},{key:"addHandles",value:function(r){var n=this;return r.forEach(function(e){return n.addHandle(e)}),this}},{key:"removeHandles",value:function(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}},{key:"removeHandle",value:function(r){var n=this,e=this.getHandleIdx(r),t=this.handles[e];return t&&(t.events&&Object.keys(t.events).forEach(function(a){n.off("action:".concat(r,":").concat(a))}),this.getHandleElem(r).remove(),this.handles.splice(e,1)),this}},{key:"changeHandle",value:function(r,n){var e=this.getHandle(r);return e&&(this.removeHandle(r),this.addHandle(Object.assign(Object.assign({},e),n))),this}},{key:"toggleHandle",value:function(r,n){var e=this.getHandle(r);if(e){var t=this.getHandleElem(r),a="".concat(Xi.handle,"-selected");n===void 0&&(n=!t.hasClass(a)),t.toggleClass(a,n);var s=n?e.iconSelected:e.icon;s&&this.updateHandleIcon(t,s)}return this}},{key:"selectHandle",value:function(r){return this.toggleHandle(r,!0)}},{key:"deselectHandle",value:function(r){return this.toggleHandle(r,!1)}},{key:"deselectAllHandles",value:function(){var r=this;return this.handles.forEach(function(n){return r.deselectHandle(n.name)}),this}},{key:"getHandleElem",value:function(r){return this.$handleContainer.find(".".concat(Xi.handle,"-").concat(r))}},{key:"updateHandleIcon",value:function(r,n){if(this.handleOptions.type==="pie"){var e=r.find(".".concat(Xi.pieSliceImg));this.$(e[0]).attr("xlink:href",n||"")}else r.css("background-image",n?"url(".concat(n,")"):"")}},{key:"isRendered",value:function(){return this.$handleContainer!=null}},{key:"isOpen",value:function(r){return this.isRendered()?r?this.$pieToggles[r].hasClass(Xi.pieToggleOpened):this.$handleContainer.hasClass("".concat(Xi.pieOpended)):!1}},{key:"toggleState",value:function(r){var n=this;if(this.isRendered()){var e=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(function(s){var u=n.$pieToggles[s];u.removeClass(Xi.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:r}),e.removeClass(Xi.pieOpended);else{if(this.trigger("pie:open",{name:r}),r){var t=this.pie.toggles,a=t&&t.find(function(s){return s.name===r});a&&e.attr({"data-pie-toggle-name":a.name,"data-pie-toggle-position":a.position}),this.$pieToggles[r].addClass(Xi.pieToggleOpened)}e.addClass(Xi.pieOpended)}}}},{key:"applyAttrs",value:function(r,n){if(n){var e=Ai.$(r);Object.keys(n).forEach(function(t){var a=e.find(t).addBack().filter(t),s=n[t],u=s.class,l=wz(s,["class"]);u&&a.addClass(u),a.attr(l)})}}}]),o}();(function(o){o.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}})(c0||(c0={}));var Xi;(function(o){o.handle=Ai.prototype.prefixClassName("widget-handle"),o.wrap="".concat(o.handle,"-wrap"),o.animate="".concat(o.handle,"-animate"),o.pieOpended="".concat(o.handle,"-pie-opened"),o.pieToggle="".concat(o.handle,"-pie-toggle"),o.pieToggleOpened="".concat(o.handle,"-pie-toggle-opened"),o.pieSlice="".concat(o.handle,"-pie-slice"),o.pieSliceImg="".concat(o.handle,"-pie-slice-img")})(Xi||(Xi={}));var xz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Sz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},f0=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;Object(De.a)(this,r),e=i.call(this);var t=n,a=t.view,s=t.cell,u=t.node,l=t.edge,c=t.graph,f=Sz(t,["view","cell","node","edge","graph"]);a?(e.view=a,e.cell=a.cell,e.graph=a.graph,e.model=e.graph.model):(s||l||u)&&c&&(e.cell=u||l||s,e.view=c.renderer.findViewByCell(e.cell),e.graph=c,e.model=e.graph.model);var d=e.constructor;return n.clearAll!==!1&&d.removeInstances(e.graph),d.register(Object(Vo.a)(e)),e.init(f),e}return Object(be.a)(r,[{key:"init",value:function(e){}},{key:"render",value:function(){return this}},{key:"startListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.on("blank:mousedown",this.remove,this)}},{key:"stopListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.off("blank:mousedown",this.remove,this)}},{key:"remove",value:function(){this.stopListening();var e=this.constructor;return e.unregister(this),Object(la.a)(Object(ca.a)(r.prototype),"remove",this).call(this)}},{key:"dispose",value:function(){this.remove()}}],[{key:"ensureCache",value:function(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}},{key:"register",value:function(e,t){t==null&&(t=e.graph);var a=this.ensureCache(),s=a[t.view.cid];s==null&&(s=a[t.view.cid]={}),s[e.cid]=e}},{key:"unregister",value:function(e,t){t==null&&(t=e.graph);var a=this.ensureCache();a[t.view.cid]&&delete a[t.view.cid][e.cid]}},{key:"removeInstances",value:function(e){var t=this.ensureCache(),a=t[e.view.cid];a&&Object.keys(a).forEach(function(s){var u=a[s];u&&u.remove()})}},{key:"getInstances",value:function(e){var t=this.ensureCache();return t[e.view.cid]||{}}}]),r}(Ai);f0.instanceCache=new WeakMap,xz([Ai.dispose()],f0.prototype,"dispose",null);var dS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"node",get:function(){return this.cell}},{key:"metadata",get:function(){var e=this.cell.prop("knob");return Array.isArray(e)?this.options.index!=null?e[this.options.index]:null:e}},{key:"init",value:function(e){this.options=Object.assign({},e),this.render(),this.startListening()}},{key:"startListening",value:function(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),Object(la.a)(Object(ca.a)(r.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),Object(la.a)(Object(ca.a)(r.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){return this.container=document.createElement("div"),R.addClass(this.container,this.prefixClassName("widget-knob")),this.options.className&&R.addClass(this.container,this.options.className),this.view.addClass(_v.KNOB),this.graph.container.appendChild(this.container),this.update(),this}},{key:"remove",value:function(){return this.view.removeClass(_v.KNOB),Object(la.a)(Object(ca.a)(r.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.metadata){var e=this.metadata,t=e.update,a=e.position,s={knob:this,cell:this.cell,node:this.node};if(a){var u=a.call(this.graph,Object.assign({},s));if(u){var l=this.graph.matrix(),c=this.node.getBBox(),f=ti.normalize(this.node.getAngle()),d=mt.create(u);f!==0&&d.rotate(-f,{x:c.width/2,y:c.height/2}),d.translate(c).scale(l.a,l.d).translate(l.e,l.f),this.container.style.left="".concat(d.x,"px"),this.container.style.top="".concat(d.y,"px")}}t&&t.call(this.graph,Object.assign({},s))}}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.container.style.display=""}},{key:"onTransform",value:function(){this.hide()}},{key:"onTransformed",value:function(){this.show()}},{key:"onKnobMouseDown",value:function(e){var t=e.knob;this.cid!==t.cid&&this.hide()}},{key:"onKnobMouseUp",value:function(){this.show()}},{key:"notify",value:function(e,t){if(this.view){var a=this.view.normalizeEvent(t),s=this.graph.snapToGrid(a.clientX,a.clientY);this.view.notify("cell:".concat(e),{e:a,view:this.view,node:this.node,cell:this.cell,x:s.x,y:s.y,knob:this}),this.cell.isNode()?this.view.notify("node:".concat(e),{e:a,view:this.view,node:this.node,cell:this.cell,x:s.x,y:s.y,knob:this}):this.cell.isEdge()&&this.view.notify("edge:".concat(e),{e:a,view:this.view,edge:this.cell,cell:this.cell,x:s.x,y:s.y,knob:this})}}},{key:"onMouseDown",value:function(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(_v.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),a=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,a&&(a.addClass(_v.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){var s=this.graph.matrix(),u=(e.clientX-t.originX)/s.a,l=(e.clientY-t.originY)/s.d,c=this.node.getAngle(),f=new mt(u,l).rotate(c);this.metadata.onMouseMove.call(this.graph,{e,data:t,deltaX:f.x,deltaY:f.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.getEventData(e),a=this.graph.findViewByCell(this.node);t.knobbing&&(a&&a.removeClass(_v.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}}]),r}(f0),_v;(function(o){o.KNOB="has-widget-knob",o.KNOBBING="node-knobbing",o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"}})(_v||(_v={}));var Tz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},d0;(function(o){o.root="widget-minimap",o.viewport="".concat(o.root,"-viewport"),o.zoom="".concat(o.viewport,"-zoom")})(d0||(d0={}));var hS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;Object(De.a)(this,r),e=i.call(this),e.options=Object.assign(Object.assign({},N1.defaultOptions),n),e.updateViewport=A.debounce(e.updateViewport.bind(Object(Vo.a)(e)),0),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(d0.root));var t=document.createElement("div");e.container.appendChild(t),e.$viewport=e.$("<div>").addClass(e.prefixClassName(d0.viewport)),e.options.scalable&&(e.zoomHandle=e.$("<div>").addClass(e.prefixClassName(d0.zoom)).appendTo(e.$viewport).get(0)),e.$container.append(e.$viewport).css({width:e.options.width,height:e.options.height,padding:e.options.padding}),e.options.container&&e.options.container.appendChild(e.container),e.sourceGraph=e.graph;var a=Object.assign(Object.assign({},e.options.graphOptions),{container:t,model:e.sourceGraph.model,frozen:!0,async:e.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});return e.targetGraph=e.options.createGraph?e.options.createGraph(a):new fi(a),e.targetGraph.renderer.unfreeze(),e.updatePaper(e.sourceGraph.options.width,e.sourceGraph.options.height),e.startListening(),e}return Object(be.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"scroller",get:function(){return this.graph.scroller.widget}},{key:"graphContainer",get:function(){return this.scroller?this.scroller.container:this.graph.container}},{key:"$graphContainer",get:function(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}},{key:"startListening",value:function(){var e;this.scroller?this.$graphContainer.on("scroll".concat(this.getEventNamespace()),this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents((e={mousedown:"startAction",touchstart:"startAction"},Object(Xe.a)(e,"mousedown .".concat(this.prefixClassName("graph")),"scrollTo"),Object(Xe.a)(e,"touchstart .".concat(this.prefixClassName("graph")),"scrollTo"),e))}},{key:"stopListening",value:function(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}},{key:"onRemove",value:function(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}},{key:"onTransform",value:function(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}},{key:"onModelUpdated",value:function(){this.targetGraph.zoomToFit()}},{key:"updatePaper",value:function(e,t){var a,s;typeof e=="object"?(a=e.width,s=e.height):(a=e,s=t);var u=this.sourceGraph.options,l=this.sourceGraph.transform.getScale(),c=this.options.width-2*this.options.padding,f=this.options.height-2*this.options.padding;a/=l.sx,s/=l.sy,this.ratio=Math.min(c/a,f/s);var d=this.ratio,v=u.x*d/l.sx,p=u.y*d/l.sy;return a*=d,s*=d,this.targetGraph.resizeGraph(a,s),this.targetGraph.translate(v,p),this.scroller?this.targetGraph.scale(d,d):this.targetGraph.zoomToFit(),this.updateViewport(),this}},{key:"updateViewport",value:function(){var e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale(),a=null;this.scroller?a=this.scroller.clientToLocalPoint(0,0):a=this.graph.graphToLocal(0,0);var s=this.$(this.targetGraph.container).position(),u=this.targetGraph.translate();u.ty=u.ty||0,this.geometry={top:s.top+a.y*t.sy+u.ty,left:s.left+a.x*t.sx+u.tx,width:this.$graphContainer.innerWidth()*t.sx/e.sx,height:this.$graphContainer.innerHeight()*t.sy/e.sy},this.$viewport.css(this.geometry)}},{key:"startAction",value:function(e){var t=this.normalizeEvent(e),a=t.target===this.zoomHandle?"zooming":"panning",s=this.sourceGraph.translate(),u=s.tx,l=s.ty,c={action:a,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:u,translateY:l};this.targetGraphTransforming=!0,this.delegateDocumentEvents(N1.documentEvents,c)}},{key:"doAction",value:function(e){var t=this,a=this.normalizeEvent(e),s=a.clientX,u=a.clientY,l=a.data;switch(l.action){case"panning":{var c=this.sourceGraph.transform.getScale(),f=(s-l.clientX)*c.sx,d=(u-l.clientY)*c.sy;this.scroller?(this.graphContainer.scrollLeft=l.scrollLeft+f/this.ratio,this.graphContainer.scrollTop=l.scrollTop+d/this.ratio):this.sourceGraph.translate(l.translateX-f/this.ratio,l.translateY-d/this.ratio);break}case"zooming":{var v=l.scale,p=l.geometry,y=1+(l.clientX-s)/p.width/v.sx;l.frameId&&cancelAnimationFrame(l.frameId),l.frameId=requestAnimationFrame(function(){t.sourceGraph.zoom(y*l.zoom,{absolute:!0,minScale:t.options.minScale,maxScale:t.options.maxScale})});break}default:break}}},{key:"stopAction",value:function(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}},{key:"scrollTo",value:function(e){var t=this.normalizeEvent(e),a,s,u=this.targetGraph.translate();if(u.ty=u.ty||0,t.offsetX==null){var l=this.$(this.targetGraph.container).offset();a=t.pageX-l.left,s=t.pageY-l.top}else a=t.offsetX,s=t.offsetY;var c=(a-u.tx)/this.ratio,f=(s-u.ty)/this.ratio;this.sourceGraph.centerPoint(c,f)}},{key:"dispose",value:function(){this.remove()}}]),r}(Ai);Tz([Ai.dispose()],hS.prototype,"dispose",null);var N1;(function(o){o.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:function(r){return new fi(r)}},o.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(N1||(N1={}));var Mz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Az=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},vS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;Object(De.a)(this,r),e=i.call(this);var t=n.graph,a=Az(n,["graph"]);return e.graph=t,e.options=Object.assign({tolerance:10},a),e.offset={x:0,y:0},e.render(),e.parseFilter(),e.disabled||e.startListening(),e}return Object(be.a)(r,[{key:"model",get:function(){return this.graph.model}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-snapline")}},{key:"verticalClassName",get:function(){return"".concat(this.containerClassName,"-vertical")}},{key:"horizontalClassName",get:function(){return"".concat(this.containerClassName,"-horizontal")}},{key:"disabled",get:function(){return this.options.enabled!==!0||this.graph.options.snapline.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}},{key:"setFilter",value:function(e){this.options.filter=e,this.parseFilter()}},{key:"render",value:function(){var e=this.containerWrapper=new ja("svg"),t=this.horizontal=new ja("line"),a=this.vertical=new ja("line");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),a.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),a.setAttribute("display","none"),e.append([t,a]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}},{key:"startListening",value:function(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}},{key:"stopListening",value:function(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}},{key:"parseFilter",value:function(){var e=this;this.filterShapes={},this.filterCells={},this.filterFunction=null;var t=this.options.filter;Array.isArray(t)?t.forEach(function(a){typeof a=="string"?e.filterShapes[a]=!0:e.filterCells[a.id]=!0}):typeof t=="function"&&(this.filterFunction=t)}},{key:"onBatchStop",value:function(e){var t=e.name,a=e.data;t==="resize"&&this.snapOnResizing(a.cell,a)}},{key:"captureCursorOffset",value:function(e){var t=e.view,a=e.x,s=e.y,u=t.getDelegatedView();if(u&&this.isNodeMovable(u)){var l=t.cell.getPosition();this.offset={x:a-l.x,y:s-l.y}}}},{key:"isNodeMovable",value:function(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}},{key:"snapOnResizing",value:function(e,t){var a=this;if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){var s=this.graph.renderer.findViewByCell(e);if(s&&s.cell.isNode()){var u=e.getBBox(),l=u.bbox(e.getAngle()),c=l.getTopLeft(),f=l.getBottomRight(),d=ti.normalize(e.getAngle()),v=this.options.tolerance||0,p,y,C,E,w,x,N={vertical:0,horizontal:0},j=t.direction,B=t.trueDirection,$=t.relativeDirection;B.indexOf("right")!==-1?N.vertical=f.x:N.vertical=c.x,B.indexOf("bottom")!==-1?N.horizontal=f.y:N.horizontal=c.y,this.model.getNodes().some(function(In){if(a.isIgnored(e,In))return!1;var xn=In.getBBox().bbox(In.getAngle()),dn=xn.getTopLeft(),tr=xn.getBottomRight(),Ut={vertical:[dn.x,tr.x],horizontal:[dn.y,tr.y]},Rn={};return Object.keys(Ut).forEach(function($n){var qr=$n,Kr=Ut[qr].map(function(fa){return{position:fa,distance:Math.abs(fa-N[qr])}}).filter(function(fa){return fa.distance<=v});Rn[qr]=I.sortBy(Kr,function(fa){return fa.distance})}),p==null&&Rn.vertical.length>0&&(p=Rn.vertical[0].position,y=Math.min(l.y,xn.y),C=Math.max(f.y,tr.y)-y),E==null&&Rn.horizontal.length>0&&(E=Rn.horizontal[0].position,w=Math.min(l.x,xn.x),x=Math.max(f.x,tr.x)-w),p!=null&&E!=null}),this.hide();var Z=0,fe=0;(E!=null||p!=null)&&(p!=null&&(Z=B.indexOf("right")!==-1?p-f.x:c.x-p),E!=null&&(fe=B.indexOf("bottom")!==-1?E-f.y:c.y-E));var de=0,xe=0;if(d%90==0)d===90||d===270?(de=fe,xe=Z):(de=Z,xe=fe);else{var Ae=d>=0&&d<90?1:d>=90&&d<180?4:d>=180&&d<270?3:2;E!=null&&p!=null&&(Z<fe?(fe=0,E=void 0):(Z=0,p=void 0));var Ye=ti.toRad(d%90);Z&&(de=Ae===3?Z/Math.cos(Ye):Z/Math.sin(Ye)),fe&&(xe=Ae===3?fe/Math.cos(Ye):fe/Math.sin(Ye));var rt=Ae===1||Ae===3;switch($){case"top":case"bottom":xe=fe?fe/(rt?Math.cos(Ye):Math.sin(Ye)):Z/(rt?Math.sin(Ye):Math.cos(Ye));break;case"left":case"right":de=Z?Z/(rt?Math.cos(Ye):Math.sin(Ye)):fe/(rt?Math.sin(Ye):Math.cos(Ye));break;default:break}}switch($){case"top":case"bottom":de=0;break;case"left":case"right":xe=0;break;default:break}var je=this.graph.getGridSize(),ot=Math.max(u.width+de,je),Ft=Math.max(u.height+xe,je);t.minWidth&&t.minWidth>je&&(ot=Math.max(ot,t.minWidth)),t.minHeight&&t.minHeight>je&&(Ft=Math.max(Ft,t.minHeight)),t.maxWidth&&(ot=Math.min(ot,t.maxWidth)),t.maxHeight&&(Ft=Math.min(Ft,t.maxHeight)),t.preserveAspectRatio&&(xe<de?Ft=ot*(u.height/u.width):ot=Ft*(u.width/u.height)),(ot!==u.width||Ft!==u.height)&&(e.resize(ot,Ft,{direction:j,relativeDirection:$,trueDirection:B,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(s)}),C&&(C+=Ft-u.height),x&&(x+=ot-u.width));var hn=e.getBBox().bbox(d);p&&Math.abs(hn.x-p)>1&&Math.abs(hn.width+hn.x-p)>1&&(p=void 0),E&&Math.abs(hn.y-E)>1&&Math.abs(hn.height+hn.y-E)>1&&(E=void 0),this.update({verticalLeft:p,verticalTop:y,verticalHeight:C,horizontalTop:E,horizontalLeft:w,horizontalWidth:x})}}}},{key:"snapOnMoving",value:function(e){var t=this,a=e.view,s=e.e,u=e.x,l=e.y,c=a.getEventData(s).delegatedView||a;if(!!this.isNodeMovable(c)){var f=c.cell,d=f.getSize(),v=f.getPosition(),p=new Sr(u-this.offset.x,l-this.offset.y,d.width,d.height),y=f.getAngle(),C=p.getCenter(),E=p.bbox(y),w=E.getTopLeft(),x=E.getBottomRight(),N=this.options.tolerance||0,j,B,$,Z,fe,de,xe=0,Ae=0;if(this.model.getNodes().some(function(hn){if(t.isIgnored(f,hn))return!1;var In=hn.getBBox().bbox(hn.getAngle()),xn=In.getCenter(),dn=In.getTopLeft(),tr=In.getBottomRight();return j==null&&(Math.abs(xn.x-C.x)<N?(j=xn.x,xe=.5):Math.abs(dn.x-w.x)<N?(j=dn.x,xe=0):Math.abs(dn.x-x.x)<N?(j=dn.x,xe=1):Math.abs(tr.x-x.x)<N?(j=tr.x,xe=1):Math.abs(tr.x-w.x)<N&&(j=tr.x),j!=null&&(B=Math.min(E.y,In.y),$=Math.max(x.y,tr.y)-B)),Z==null&&(Math.abs(xn.y-C.y)<N?(Z=xn.y,Ae=.5):Math.abs(dn.y-w.y)<N?Z=dn.y:Math.abs(dn.y-x.y)<N?(Z=dn.y,Ae=1):Math.abs(tr.y-x.y)<N?(Z=tr.y,Ae=1):Math.abs(tr.y-w.y)<N&&(Z=tr.y),Z!=null&&(fe=Math.min(E.x,In.x),de=Math.max(x.x,tr.x)-fe)),j!=null&&Z!=null}),this.hide(),Z!=null||j!=null){Z!=null&&(E.y=Z-Ae*E.height),j!=null&&(E.x=j-xe*E.width);var Ye=E.getCenter(),rt=Ye.x-p.width/2,je=Ye.y-p.height/2,ot=rt-v.x,Ft=je-v.y;(ot!==0||Ft!==0)&&(f.translate(ot,Ft,{snapped:!0,restrict:this.graph.hook.getRestrictArea(c)}),de&&(de+=ot),$&&($+=Ft)),this.update({verticalLeft:j,verticalTop:B,verticalHeight:$,horizontalTop:Z,horizontalLeft:fe,horizontalWidth:de})}}}},{key:"isIgnored",value:function(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&A.call(this.filterFunction,this.graph,t)}},{key:"update",value:function(e){if(e.horizontalTop){var t=this.graph.localToGraph(new mt(e.horizontalLeft,e.horizontalTop)),a=this.graph.localToGraph(new mt(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?"".concat(t.x):"0",y1:"".concat(t.y),x2:this.options.sharp?"".concat(a.x):"100%",y2:"".concat(a.y),display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){var s=this.graph.localToGraph(new mt(e.verticalLeft,e.verticalTop)),u=this.graph.localToGraph(new mt(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({x1:"".concat(s.x),y1:this.options.sharp?"".concat(s.y):"0",x2:"".concat(u.x),y2:this.options.sharp?"".concat(u.y):"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}},{key:"resetTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"show",value:function(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}},{key:"hide",value:function(){var e=this;this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");var t=this.options.clean,a=typeof t=="number"?t:t!==!1?3e3:0;return a>0&&(this.timer=window.setTimeout(function(){e.container.parentNode!==null&&e.unmount()},a)),this}},{key:"onRemove",value:function(){this.stopListening(),this.hide()}},{key:"dispose",value:function(){this.remove()}}]),r}(Ai);Mz([Ai.dispose()],vS.prototype,"dispose",null);var Pz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Fv=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"init",value:function(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}},{key:"startListening",value:function(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"stopListening",value:function(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"resetUpdates",value:function(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}},{key:"onSortModel",value:function(){this.model.hasActiveBatch(r.SORT_DELAYING_BATCHES)||this.sortViews()}},{key:"onModelReseted",value:function(e){var t=e.options;this.removeZPivots(),this.resetViews(this.model.getCells(),t)}},{key:"onBatchStop",value:function(e){var t=e.name,a=e.data;if(!this.isFrozen()){var s=this.model;if(!this.isAsync()){var u=r.UPDATE_DELAYING_BATCHES;u.includes(t)&&!s.hasActiveBatch(u)&&this.updateViews(a)}var l=r.SORT_DELAYING_BATCHES;l.includes(t)&&!s.hasActiveBatch(l)&&this.sortViews()}}},{key:"onCellAdded",value:function(e){var t=e.cell,a=e.options,s=a.position;this.isAsync()||typeof s!="number"?this.renderView(t,a):(a.maxPosition===s&&this.freeze({key:"addCells"}),this.renderView(t,a),s===0&&this.unfreeze({key:"addCells"}))}},{key:"onCellRemoved",value:function(e){var t=e.cell,a=e.options,s=this.findViewByCell(t);s&&this.requestViewUpdate(s,r.FLAG_REMOVE,s.priority,a)}},{key:"onCellZIndexChanged",value:function(e){var t=e.cell,a=e.options;if(this.options.sorting==="approx"){var s=this.findViewByCell(t);s&&this.requestViewUpdate(s,r.FLAG_INSERT,s.priority,a)}}},{key:"onCellVisibleChanged",value:function(e){var t=e.cell,a=e.current,s=e.options;a||this.processEdgeOnTerminalVisibleChanged(t,!1);var u=this.findViewByCell(t);!a&&u?this.removeView(t):a&&u==null&&this.renderView(t,s),a&&this.processEdgeOnTerminalVisibleChanged(t,!0)}},{key:"processEdgeOnTerminalVisibleChanged",value:function(e,t){var a=function(u,l){var c=u.getSourceCellId();if(c!==l.id)return u.getSourceCell();var f=u.getTargetCellId();return f!==l.id?u.getTargetCell():null};this.model.getConnectedEdges(e).forEach(function(s){var u=a(s,e);(u==null||u.isVisible())&&(t?s.show():s.hide())})}},{key:"isEdgeTerminalVisible",value:function(e,t){var a=t==="source"?e.getSourceCellId():e.getTargetCellId(),s=a?this.model.getCell(a):null;return!(s&&!s.isVisible())}},{key:"requestConnectedEdgesUpdate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ho.isCellView(e))for(var a=e.cell,s=this.model.getConnectedEdges(a),u=0,l=s.length;u<l;u+=1){var c=s[u],f=this.findViewByCell(c);if(!!f){var d=["update"];c.getTargetCell()===a&&d.push("target"),c.getSourceCell()===a&&d.push("source"),this.scheduleViewUpdate(f,f.getFlag(d),f.priority,t)}}}},{key:"forcePostponedViewUpdate",value:function(e,t){if(!e||!Ho.isCellView(e))return!1;var a=e.cell;if(a.isNode())return!1;var s=e;if(a.isEdge()&&(t&e.getFlag(["source","target"]))==0){var u=0,l=this.findViewByCell(a.getSourceCell());l&&!this.isViewMounted(l)&&(u=this.dumpView(l),s.updateTerminalMagnet("source"));var c=0,f=this.findViewByCell(a.getTargetCell());if(f&&!this.isViewMounted(f)&&(c=this.dumpView(f),s.updateTerminalMagnet("target")),u===0&&c===0)return!this.dumpView(s)}return!1}},{key:"scheduleViewUpdate",value:function(e,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=e.cid,l=this.updates,c=l.priorities[a];c||(c=l.priorities[a]={});var f=c[u]||0;(f&t)!==t&&(f||(l.count+=1),t&r.FLAG_REMOVE&&f&r.FLAG_INSERT?c[u]^=r.FLAG_INSERT:t&r.FLAG_INSERT&&f&r.FLAG_REMOVE&&(c[u]^=r.FLAG_REMOVE),c[u]|=t,this.graph.hook.onViewUpdated(e,t,s))}},{key:"requestViewUpdate",value:function(e,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.scheduleViewUpdate(e,t,a,s);var u=this.isAsync();if(!(this.isFrozen()||u&&s.async!==!1||this.model.hasActiveBatch(r.UPDATE_DELAYING_BATCHES))){var l=this.updateViews(s);u&&this.graph.trigger("render:done",{stats:l,options:s})}}},{key:"dumpView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return 0;var a=e.cid,s=this.updates,u=s.priorities[e.priority],l=this.registerMountedView(e)|u[a];return delete u[a],l?this.updateView(e,l,t):0}},{key:"dumpViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.checkView(e),this.updateViews(e)}},{key:"requireView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.findViewByCell(e);return a==null?null:(this.dumpView(a,t),a)}},{key:"updateView",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e==null)return 0;if(Ho.isCellView(e)){if(t&r.FLAG_REMOVE)return this.removeView(e.cell),0;t&r.FLAG_INSERT&&(this.insertView(e),t^=r.FLAG_INSERT)}return t?e.confirmUpdate(t,a):0}},{key:"updateViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t,a=0,s=0,u=r.MIN_PRIORITY;do t=this.updateViewsBatch(e),a+=1,s+=t.updatedCount,u=Math.min(t.priority,u);while(!t.empty);return{priority:u,batchCount:a,updatedCount:s}}},{key:"updateViewsBatch",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.updates,a=t.priorities,s=e.batchSize||r.UPDATE_BATCH_SIZE,u=!0,l=r.MIN_PRIORITY,c=0,f=0,d=0,v=0,p=e.checkView||this.options.checkView;typeof p!="function"&&(p=null);e:for(var y=0,C=a.length;y<C;y+=1){var E=a[y];for(var w in E){if(d>=s){u=!1;break e}var x=Ai.views[w];if(!x){delete E[w];continue}var N=E[w];if((N&r.FLAG_REMOVE)==0){var j=w in t.unmounted;if(p&&!A.call(p,this.graph,{view:x,unmounted:j})){j||(this.registerUnmountedView(x),x.unmount()),t.unmounted[w]|=N,delete E[w],f+=1;continue}j&&(N|=r.FLAG_INSERT,c+=1),N|=this.registerMountedView(x)}var B=x,$=this.updateView(x,N,e);if($>0){var Z=B.cell;Z&&Z.isEdge()&&(B.hasAction($,"source")&&!this.isEdgeTerminalVisible(Z,"source")&&($=B.removeAction($,"source"),$|=r.FLAG_REMOVE),B.hasAction($,"target")&&!this.isEdgeTerminalVisible(Z,"target")&&($=B.removeAction($,"target"),$|=r.FLAG_REMOVE))}if($>0&&(E[w]=$,!this.graph.hook.onViewPostponed(B,$,e)||E[w])){v+=1,u=!1;continue}l>y&&(l=y),d+=1,delete E[w]}}return{empty:u,priority:l,mountedCount:c,unmountedCount:f,updatedCount:d,postponedCount:v}}},{key:"updateViewsAsync",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{processed:0,priority:r.MIN_PRIORITY},s=this.updates,u=s.animationId;if(u){if(R.cancelAnimationFrame(u),a.processed===0){var l=t.before;typeof l=="function"&&A.call(l,this.graph,this.graph)}var c=this.updateViewsBatch(t),f=this.checkViewImpl({checkView:t.checkView,mountedBatchSize:r.MOUNT_BATCH_SIZE-c.mountedCount,unmountedBatchSize:r.MOUNT_BATCH_SIZE-c.unmountedCount}),d=a.processed,v=s.count,p=f.mountedCount,y=f.unmountedCount;c.updatedCount>0&&(d+=c.updatedCount+c.unmountedCount,a.priority=Math.min(c.priority,a.priority),c.empty&&p===0?(c.priority=a.priority,c.mountedCount+=p,c.unmountedCount+=y,this.graph.trigger("render:done",{stats:c,options:t}),a.processed=0,s.count=0):a.processed=d);var C=t.progress;if(v&&typeof C=="function"&&A.call(C,this.graph,{total:v,done:c.empty,current:d}),s.animationId!==u)return}s.animationId=R.requestAnimationFrame(function(){e.updateViewsAsync(t,a)})}},{key:"registerMountedView",value:function(e){var t=e.cid,a=this.updates;if(t in a.mounted)return 0;a.mounted[t]=!0,a.mountedCids.push(t);var s=a.unmounted[t]||0;return delete a.unmounted[t],s}},{key:"registerUnmountedView",value:function(e){var t=e.cid,a=this.updates;if(t in a.unmounted)return 0;a.unmounted[t]|=r.FLAG_INSERT;var s=a.unmounted[t];return a.unmountedCids.push(t),delete a.mounted[t],s}},{key:"isViewMounted",value:function(e){if(e==null)return!1;var t=e.cid;return t in this.updates.mounted}},{key:"getMountedViews",value:function(){return Object.keys(this.updates.mounted).map(function(e){return Ho.views[e]})}},{key:"getUnmountedViews",value:function(){return Object.keys(this.updates.unmounted).map(function(e){return Ho.views[e]})}},{key:"checkMountedViews",value:function(e,t){var a=0;if(typeof e!="function")return a;for(var s=this.updates,u=s.mounted,l=s.mountedCids,c=t==null?l.length:Math.min(l.length,t),f=0;f<c;f+=1){var d=l[f];if(d in u){var v=Ho.views[d];if(v!=null){var p=A.call(e,this.graph,{view:v,unmounted:!0});if(p){l.push(d);continue}a+=1;var y=this.registerUnmountedView(v);y&&v.unmount()}}}return l.splice(0,c),a}},{key:"checkUnmountedViews",value:function(e,t){var a=0;typeof e!="function"&&(e=null);for(var s=this.updates,u=s.unmounted,l=s.unmountedCids,c=t==null?l.length:Math.min(l.length,t),f=0;f<c;f+=1){var d=l[f];if(d in u){var v=Ho.views[d];if(v!=null){if(e&&!A.call(e,this.graph,{view:v,unmounted:!1})){l.push(d);continue}a+=1;var p=this.registerMountedView(v);p&&this.scheduleViewUpdate(v,p,v.priority,{mounting:!0})}}}return l.splice(0,c),a}},{key:"checkViewImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER},t=e.checkView||this.options.checkView,a=this.checkMountedViews(t,e.unmountedBatchSize),s=this.checkUnmountedViews(t,a>0?Math.min(this.updates.unmountedCids.length-a,e.mountedBatchSize):e.mountedBatchSize);return{mountedCount:s,unmountedCount:a}}},{key:"checkView",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.checkViewImpl(e)}},{key:"isFrozen",value:function(){return!!this.options.frozen}},{key:"freeze",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.key,a=this.updates,s=this.options.frozen,u=a.freezeKey;if(t&&t!==u){if(s&&u)return;a.frozen=s,a.freezeKey=t}this.options.frozen=!0;var l=a.animationId;a.animationId=null,this.isAsync()&&l!=null&&R.cancelAnimationFrame(l),this.graph.trigger("freeze",{key:t})}},{key:"unfreeze",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=t.key,s=this.updates,u=s.freezeKey;if(!(a&&u&&a!==u)&&(s.freezeKey=null,!(a&&a===u&&s.frozen))){var l=function(){e.options.frozen=s.frozen=!1,s.sort&&(e.sortViews(),s.sort=!1);var d=t.after;d&&A.call(d,e.graph,e.graph),e.graph.trigger("unfreeze",{key:a})};if(this.isAsync()){this.freeze();var c=t.progress;this.updateViewsAsync(Object.assign(Object.assign({},t),{progress:function(d){var v=d.done,p=d.current,y=d.total;c&&A.call(c,e.graph,{done:v,current:p,total:y}),v&&l()}}))}else this.updateViews(t),l()}}},{key:"isAsync",value:function(){return!!this.options.async}},{key:"setAsync",value:function(e){this.options.async=e}},{key:"onRemove",value:function(){this.freeze(),this.removeViews()}},{key:"resetViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var a=0,s=e.length;a<s;a+=1)this.renderView(e[a],t);this.unfreeze({key:"reset"}),this.sortViews()}},{key:"removeView",value:function(e){var t=this.views[e.id];if(t){var a=t.cid,s=this.updates,u=s.mounted,l=s.unmounted;t.remove(),delete this.views[e.id],delete u[a],delete l[a]}return t}},{key:"removeViews",value:function(){var e=this;this.views&&Object.keys(this.views).forEach(function(t){var a=e.views[t];a&&e.removeView(a.cell)}),this.views={}}},{key:"renderView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.id,s=this.views,u=0,l=s[a];if(!!e.isVisible()&&!(e.isEdge()&&(!this.isEdgeTerminalVisible(e,"source")||!this.isEdgeTerminalVisible(e,"target")))){if(l)u=r.FLAG_INSERT;else{var c=this.graph.hook.createCellView(e);c&&(l=s[e.id]=c,l.graph=this.graph,u=this.registerUnmountedView(l)|l.getBootstrapFlag())}l&&this.requestViewUpdate(l,u,l.priority,t)}}},{key:"isExactSorting",value:function(){return this.options.sorting==="exact"}},{key:"sortViews",value:function(){if(!!this.isExactSorting()){if(this.isFrozen()){this.updates.sort=!0;return}this.sortViewsExact()}}},{key:"sortElements",value:function(e,t){var a=e.map(function(s){var u=s.parentNode,l=u.insertBefore(document.createTextNode(""),s.nextSibling);return function(c){if(u===c)throw new Error("You can't sort elements if any one is a descendant of another.");u.insertBefore(c,l),u.removeChild(l)}});e.sort(t).forEach(function(s,u){return a[u](s)})}},{key:"sortViewsExact",value:function(){var e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,function(a,s){var u=t.getCell(a.getAttribute("data-cell-id")||""),l=t.getCell(s.getAttribute("data-cell-id")||""),c=u.getZIndex()||0,f=l.getZIndex()||0;return c===f?0:c<f?-1:1})}},{key:"addZPivot",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zPivots==null&&(this.zPivots={});var t=this.zPivots,a=t[e];if(a)return a;a=t[e]=document.createComment("z-index:".concat(e+1));var s=-Infinity;for(var u in t){var l=+u;!(l<e&&l>s&&(s=l,s===e-1))}var c=this.view.stage;if(s!==-Infinity){var f=t[s];c.insertBefore(a,f.nextSibling)}else c.insertBefore(a,c.firstChild);return a}},{key:"removeZPivots",value:function(){var e=this;this.zPivots&&Object.keys(this.zPivots).forEach(function(t){var a=e.zPivots[t];a&&a.parentNode&&a.parentNode.removeChild(a)}),this.zPivots={}}},{key:"insertView",value:function(e){var t=this.view.stage;switch(this.options.sorting){case"approx":{var a=e.cell.getZIndex(),s=this.addZPivot(a);t.insertBefore(e.container,s);break}case"exact":default:t.appendChild(e.container);break}}},{key:"findViewByCell",value:function(e){if(e==null)return null;var t=pi.isCell(e)?e.id:e;return this.views[t]}},{key:"findViewByElem",value:function(e){if(e==null)return null;var t=typeof e=="string"?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){var a=this.view.findAttr("data-cell-id",t);if(a)return this.views[a]}return null}},{key:"findViewsFromPoint",value:function(e){var t=this,a={x:e.x,y:e.y};return this.model.getCells().map(function(s){return t.findViewByCell(s)}).filter(function(s){return s!=null?R.getBBox(s.container,{target:t.view.stage}).containsPoint(a):!1})}},{key:"findEdgeViewsInArea",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Sr.create(e);return this.model.getEdges().map(function(u){return t.findViewByCell(u)}).filter(function(u){if(u){var l=R.getBBox(u.container,{target:t.view.stage});return l.width===0?l.inflate(1,0):l.height===0&&l.inflate(0,1),a.strict?s.containsRect(l):s.isIntersectWithRect(l)}return!1})}},{key:"findViewsInArea",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Sr.create(e);return this.model.getNodes().map(function(u){return t.findViewByCell(u)}).filter(function(u){if(u){var l=R.getBBox(u.container,{target:t.view.stage});return a.strict?s.containsRect(l):s.isIntersectWithRect(l)}return!1})}},{key:"dispose",value:function(){this.resetUpdates(),this.stopListening()}}]),r}($i);Pz([$i.dispose()],Fv.prototype,"dispose",null),function(o){o.FLAG_INSERT=1<<30,o.FLAG_REMOVE=1<<29,o.MOUNT_BATCH_SIZE=1e3,o.UPDATE_BATCH_SIZE=1e3,o.MIN_PRIORITY=2,o.SORT_DELAYING_BATCHES=["add","to-front","to-back"],o.UPDATE_DELAYING_BATCHES=["translate"]}(Fv||(Fv={}));var kz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},j1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"elem",get:function(){return this.view.background}},{key:"init",value:function(){this.startListening(),this.options.background&&this.draw(this.options.background)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"updateBackgroundImage",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.size||"auto auto",a=e.position||"center",s=this.graph.transform.getScale(),u=this.graph.translate();if(typeof a=="object"){var l=u.tx+s.sx*(a.x||0),c=u.ty+s.sy*(a.y||0);a="".concat(l,"px ").concat(c,"px")}typeof t=="object"&&(t=Sr.fromSize(t).scale(s.sx,s.sy),t="".concat(t.width,"px ").concat(t.height,"px")),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=a}},{key:"drawBackgroundImage",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(e instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}var a=this.optionsCache;if(!(a&&a.image!==t.image)){var s,u=t.opacity,l=t.size,c=t.repeat||"no-repeat",f=Jg.registry.get(c);if(typeof f=="function"){var d=t.quality||1;e.width*=d,e.height*=d;var v=f(e,t);if(!(v instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");s=v.toDataURL("image/png"),t.repeat&&c!==t.repeat?c=t.repeat:c="repeat",typeof l=="object"?(l.width*=v.width/e.width,l.height*=v.height/e.height):l===void 0&&(t.size={width:v.width/d,height:v.height/d})}else s=e.src,l===void 0&&(t.size={width:e.width,height:e.height});a!=null&&typeof t.size=="object"&&t.image===a.image&&t.repeat===a.repeat&&t.quality===a.quality&&(a.size=m.clone(t.size));var p=this.elem.style;p.backgroundImage="url(".concat(s,")"),p.backgroundRepeat=c,p.opacity=u==null||u>=1?"":"".concat(u),this.updateBackgroundImage(t)}}},{key:"updateBackgroundColor",value:function(e){this.elem.style.backgroundColor=e||""}},{key:"updateBackgroundOptions",value:function(e){this.graph.options.background=e}},{key:"update",value:function(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}},{key:"draw",value:function(e){var t=this,a=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(a.color),a.image){this.optionsCache=m.clone(a);var s=document.createElement("img");s.onload=function(){return t.drawBackgroundImage(s,e)},s.setAttribute("crossorigin","anonymous"),s.src=a.image}else this.drawBackgroundImage(null),this.optionsCache=null}},{key:"clear",value:function(){this.draw()}},{key:"dispose",value:function(){this.clear(),this.stopListening()}}]),r}($i);kz([$i.dispose()],j1.prototype,"dispose",null);var Dz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Iz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},h0=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;Object(De.a)(this,r),e=i.call(this),e.padding={left:0,top:0,right:0,bottom:0},e.options=ec.getOptions(n);var t=e.graph.transform.getScale();e.sx=t.sx,e.sy=t.sy;var a=e.options.width||e.graph.options.width,s=e.options.height||e.graph.options.height;e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(ec.containerClass)).css({width:a,height:s}),e.options.pageVisible&&e.$container.addClass(e.prefixClassName(ec.pagedClass)),e.options.className&&e.$container.addClass(e.options.className);var u=e.graph.container;u.parentNode&&e.$container.insertBefore(u);var l=u.getAttribute("style");if(l){var c={},f=l.split(";");f.forEach(function(d){var v=d.trim();if(v){var p=v.split(":");p.length&&(c[p[0].trim()]=p[1]?p[1].trim():"")}}),Object.keys(c).forEach(function(d){d==="width"||d==="height"||(u.style[d]="",e.container.style[d]=c[d])})}return e.content=document.createElement("div"),e.$content=e.$(e.content).addClass(e.prefixClassName(ec.contentClass)).css({width:e.graph.options.width,height:e.graph.options.height}),e.background=document.createElement("div"),e.$background=e.$(e.background).addClass(e.prefixClassName(ec.backgroundClass)),e.$content.append(e.background),e.options.pageVisible||e.$content.append(e.graph.view.grid),e.$content.append(u),e.$content.appendTo(e.container),e.startListening(),e.options.pageVisible||e.graph.grid.update(),e.backgroundManager=new r.Background(Object(Vo.a)(e)),e.options.autoResize||e.update(),e}return Object(be.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"model",get:function(){return this.graph.model}},{key:"startListening",value:function(){var e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}},{key:"stopListening",value:function(){var e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}},{key:"enableAutoResize",value:function(){this.options.autoResize=!0}},{key:"disableAutoResize",value:function(){this.options.autoResize=!1}},{key:"onUpdate",value:function(){this.graph.isAsync()||!this.options.autoResize||this.update()}},{key:"onBatchStop",value:function(e){this.graph.isAsync()||!this.options.autoResize||Fv.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}},{key:"delegateBackgroundEvents",value:function(e){var t=this,a=e||Ch.events;this.delegatedHandlers=Object.keys(a).reduce(function(s,u){var l=a[u];if(u.indexOf(" ")===-1)if(typeof l=="function")s[u]=l;else{var c=t.graph.view[l];typeof c=="function"&&(c=c.bind(t.graph.view),s[u]=c)}return s},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(function(s){t.delegateEvent(s,{guarded:!1},t.onBackgroundEvent)})}},{key:"undelegateBackgroundEvents",value:function(){var e=this;Object.keys(this.delegatedHandlers).forEach(function(t){e.undelegateEvent(t,e.onBackgroundEvent)})}},{key:"onBackgroundEvent",value:function(e){var t=!1,a=e.target;if(this.options.pageVisible)this.options.background?t=this.background===a:t=this.content===a;else{var s=this.graph.view;t=s.background===a||s.grid===a}if(t){var u=this.delegatedHandlers[e.type];typeof u=="function"&&u.apply(this.graph,arguments)}}},{key:"onRenderDone",value:function(e){var t=e.stats;this.options.autoResize&&t.priority<2&&this.update()}},{key:"onResize",value:function(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}},{key:"onScale",value:function(e){var t=e.sx,a=e.sy,s=e.ox,u=e.oy;this.updateScale(t,a),(s||u)&&(this.centerPoint(s,u),this.updatePageBreak());var l=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof l=="function"&&this.update()}},{key:"storeScrollPosition",value:function(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}},{key:"restoreScrollPosition",value:function(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}},{key:"storeClientSize",value:function(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"restoreClientSize",value:function(){this.cachedClientSize=null}},{key:"beforeManipulation",value:function(){(ra.IS_IE||ra.IS_EDGE)&&this.$container.css("visibility","hidden")}},{key:"afterManipulation",value:function(){(ra.IS_IE||ra.IS_EDGE)&&this.$container.css("visibility","visible")}},{key:"updatePageSize",value:function(e,t){e!=null&&(this.options.pageWidth=e),t!=null&&(this.options.pageHeight=t),this.updatePageBreak()}},{key:"updatePageBreak",value:function(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){var e=this.graph.options.width,t=this.graph.options.height,a=this.options.pageWidth*this.sx,s=this.options.pageHeight*this.sy;if(a===0||s===0)return;if(e>a||t>s){for(var u=!1,l=document.createElement("div"),c=1,f=Math.floor(e/a);c<f;c+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:c*a}).appendTo(l),u=!0;for(var d=1,v=Math.floor(t/s);d<v;d+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:d*s}).appendTo(l),u=!0;u&&(R.addClass(l,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(l),this.pageBreak=l)}}}},{key:"update",value:function(){var e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);var t=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof t=="function"&&(t=A.call(t,this,this));var a=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative",contentArea:this.calcContextArea(t)},t);this.graph.fitToContent(this.getFitToContentOptions(a))}},{key:"calcContextArea",value:function(e){var t=e==null?void 0:e.direction;if(!t)return this.graph.transform.getContentArea(e);function a(c){var f=c.getBBox();if(f&&c.isNode()){var d=c.getAngle();d!=null&&d!==0&&(f=f.bbox(d))}return f}var s=this.options.pageWidth||1,u=this.options.pageHeight||1,l=this.graph.getCells();return t.includes("top")||(l=l.filter(function(c){var f=a(c);return f.y>=0})),t.includes("left")||(l=l.filter(function(c){var f=a(c);return f.x>=0})),t.includes("right")||(l=l.filter(function(c){var f=a(c);return f.x+f.width<=s})),t.includes("bottom")||(l=l.filter(function(c){var f=a(c);return f.y+f.height<=u})),this.model.getCellsBBox(l)||new Sr}},{key:"getFitToContentOptions",value:function(e){var t=this.sx,a=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=a),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=a),typeof e.padding=="object"?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*a,bottom:(e.padding.bottom||0)*a}:typeof e.padding=="number"&&(e.padding*=t),this.options.autoResize||(e.contentArea=Sr.create()),e}},{key:"updateScale",value:function(e,t){var a=this.graph.options,s=e/this.sx,u=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(a.x*s,a.y*u),this.graph.resizeGraph(a.width*s,a.height*u)}},{key:"scrollbarPosition",value:function(e,t,a){if(e==null&&t==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};var s={};return typeof e=="number"&&(s.scrollLeft=e),typeof t=="number"&&(s.scrollTop=t),a&&a.animation?this.$container.animate(s,a.animation):this.$container.prop(s),this}},{key:"scrollToPoint",value:function(e,t,a){var s=this.getClientSize(),u=this.graph.matrix(),l={};return typeof e=="number"&&(l.scrollLeft=e-s.width/2+u.e+(this.padding.left||0)),typeof t=="number"&&(l.scrollTop=t-s.height/2+u.f+(this.padding.top||0)),a&&a.animation?this.$container.animate(l,a.animation):this.$container.prop(l),this}},{key:"scrollToContent",value:function(e){var t=this.sx,a=this.sy,s=this.graph.getContentArea().getCenter();return this.scrollToPoint(s.x*t,s.y*a,e)}},{key:"scrollToCell",value:function(e,t){var a=this.sx,s=this.sy,u=e.getBBox().getCenter();return this.scrollToPoint(u.x*a,u.y*s,t)}},{key:"center",value:function(e){return this.centerPoint(e)}},{key:"centerPoint",value:function(e,t,a){var s=this.graph.matrix(),u=s.a,l=s.d,c=-s.e,f=-s.f,d=c+this.graph.options.width,v=f+this.graph.options.height,p;if(this.storeClientSize(),typeof e=="number"||typeof t=="number"){p=a;var y=this.getVisibleArea().getCenter();typeof e=="number"?e*=u:e=y.x,typeof t=="number"?t*=l:t=y.y}else p=e,e=(c+d)/2,t=(f+v)/2;if(p&&p.padding)return this.positionPoint({x:e,y:t},"50%","50%",p);var C=this.getPadding(),E=this.getClientSize(),w=E.width/2,x=E.height/2,N=w-C.left-e+c,j=w-C.right+e-d,B=x-C.top-t+f,$=x-C.bottom+t-v;this.addPadding(Math.max(N,0),Math.max(j,0),Math.max(B,0),Math.max($,0));var Z=this.scrollToPoint(e,t,p||void 0);return this.restoreClientSize(),Z}},{key:"centerContent",value:function(e){return this.positionContent("center",e)}},{key:"centerCell",value:function(e,t){return this.positionCell(e,"center",t)}},{key:"positionContent",value:function(e,t){var a=this.graph.getContentArea(t);return this.positionRect(a,e,t)}},{key:"positionCell",value:function(e,t,a){var s=e.getBBox();return this.positionRect(s,t,a)}},{key:"positionRect",value:function(e,t,a){var s=Sr.create(e);switch(t){case"center":return this.positionPoint(s.getCenter(),"50%","50%",a);case"top":return this.positionPoint(s.getTopCenter(),"50%",0,a);case"top-right":return this.positionPoint(s.getTopRight(),"100%",0,a);case"right":return this.positionPoint(s.getRightMiddle(),"100%","50%",a);case"bottom-right":return this.positionPoint(s.getBottomRight(),"100%","100%",a);case"bottom":return this.positionPoint(s.getBottomCenter(),"50%","100%",a);case"bottom-left":return this.positionPoint(s.getBottomLeft(),0,"100%",a);case"left":return this.positionPoint(s.getLeftMiddle(),0,"50%",a);case"top-left":return this.positionPoint(s.getTopLeft(),0,0,a);default:return this}}},{key:"positionPoint",value:function(e,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=s.padding,l=Iz(s,["padding"]),c=M.normalizeSides(u),f=Sr.fromSize(this.getClientSize()),d=f.clone().moveAndExpand({x:c.left,y:c.top,width:-c.right-c.left,height:-c.top-c.bottom});t=M.normalizePercentage(t,Math.max(0,d.width)),t<0&&(t=d.width+t),a=M.normalizePercentage(a,Math.max(0,d.height)),a<0&&(a=d.height+a);var v=d.getTopLeft().translate(t,a),p=f.getCenter().diff(v),y=this.zoom(),C=p.scale(1/y,1/y),E=mt.create(e).translate(C);return this.centerPoint(E.x,E.y,l)}},{key:"zoom",value:function(e,t){if(e==null)return this.sx;t=t||{};var a,s,u=this.getClientSize(),l=this.clientToLocalPoint(u.width/2,u.height/2),c=e,f=e;if(t.absolute||(c+=this.sx,f+=this.sy),t.scaleGrid&&(c=Math.round(c/t.scaleGrid)*t.scaleGrid,f=Math.round(f/t.scaleGrid)*t.scaleGrid),t.maxScale&&(c=Math.min(t.maxScale,c),f=Math.min(t.maxScale,f)),t.minScale&&(c=Math.max(t.minScale,c),f=Math.max(t.minScale,f)),c=this.graph.transform.clampScale(c),f=this.graph.transform.clampScale(f),t.center){var d=c/this.sx,v=f/this.sy;a=t.center.x-(t.center.x-l.x)/d,s=t.center.y-(t.center.y-l.y)/v}else a=l.x,s=l.y;return this.beforeManipulation(),this.graph.transform.scale(c,f),this.centerPoint(a,s),this.afterManipulation(),this}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Sr.create(e),s=this.graph;t.contentArea=a,t.viewportArea==null&&(t.viewportArea={x:s.options.x,y:s.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),s.transform.scaleContentToFitImpl(t,!1);var u=a.getCenter();return this.centerPoint(u.x,u.y),this.afterManipulation(),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.graph.getContentArea(e),e)}},{key:"transitionToPoint",value:function(e,t,a){var s=this;typeof e=="object"?(a=t,t=e.y,e=e.x):t=t,a==null&&(a={});var u,l,c=this.sx,f=Math.max(a.scale||c,1e-6),d=this.getClientSize(),v=new mt(e,t),p=this.clientToLocalPoint(d.width/2,d.height/2);if(c===f){var y=p.diff(v).scale(c,c).round();u="translate(".concat(y.x,"px,").concat(y.y,"px)")}else{var C=f/(c-f)*v.distance(p),E=p.clone().move(v,C),w=this.localToBackgroundPoint(E).round();u="scale(".concat(f/c,")"),l="".concat(w.x,"px ").concat(w.y,"px")}var x=a.onTransitionEnd;return this.$container.addClass(ec.transitionClassName),this.$content.off(ec.transitionEventName).on(ec.transitionEventName,function(N){s.syncTransition(f,{x:e,y:t}),typeof x=="function"&&A.call(x,s,N.originalEvent)}).css({transform:u,transformOrigin:l,transition:"transform",transitionDuration:a.duration||"1s",transitionDelay:a.delay,transitionTimingFunction:a.timing}),this}},{key:"syncTransition",value:function(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}},{key:"removeTransition",value:function(){return this.$container.removeClass(ec.transitionClassName),this.$content.off(ec.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}},{key:"transitionToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Sr.create(e),s=t.maxScale||Infinity,u=t.minScale||Number.MIN_VALUE,l=t.scaleGrid||null,c=t.visibility||1,f=t.center?mt.create(t.center):a.getCenter(),d=this.getClientSize(),v=d.width*c,p=d.height*c,y=new Sr(f.x-v/2,f.y-p/2,v,p).getMaxUniformScaleToFit(a,f);return y=Math.min(y,s),l&&(y=Math.floor(y/l)*l),y=Math.max(u,y),this.transitionToPoint(f,Object.assign({scale:y},t))}},{key:"startPanning",value:function(e){var t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.normalizeEvent(e),a=t.clientX-this.clientX,s=t.clientY-this.clientY;this.container.scrollTop-=s,this.container.scrollLeft-=a,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}},{key:"stopPanning",value:function(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e})}},{key:"clientToLocalPoint",value:function(e,t){var a=typeof e=="object"?e.x:e,s=typeof e=="object"?e.y:t,u=this.graph.matrix();return a+=this.container.scrollLeft-this.padding.left-u.e,s+=this.container.scrollTop-this.padding.top-u.f,new mt(a/u.a,s/u.d)}},{key:"localToBackgroundPoint",value:function(e,t){var a=typeof e=="object"?mt.create(e):new mt(e,t),s=this.graph.matrix(),u=this.padding;return R.transformPoint(a,s).translate(u.left,u.top)}},{key:"resize",value:function(e,t){var a=e!=null?e:this.container.offsetWidth,s=t!=null?t:this.container.offsetHeight;typeof a=="number"&&(a=Math.round(a)),typeof s=="number"&&(s=Math.round(s)),this.options.width=a,this.options.height=s,this.$container.css({width:a,height:s}),this.update()}},{key:"getClientSize",value:function(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"autoScroll",value:function(e,t){var a=10,s=this.container,u=s.getBoundingClientRect(),l=0,c=0;return e<=u.left+a&&(l=-a),t<=u.top+a&&(c=-a),e>=u.right-a&&(l=a),t>=u.bottom-a&&(c=a),l!==0&&(s.scrollLeft+=l),c!==0&&(s.scrollTop+=c),{scrollerX:l,scrollerY:c}}},{key:"addPadding",value:function(e,t,a,s){var u=this.getPadding();this.padding={left:Math.round(u.left+(e||0)),top:Math.round(u.top+(a||0)),bottom:Math.round(u.bottom+(s||0)),right:Math.round(u.right+(t||0))},u=this.padding,this.$content.css({width:u.left+this.graph.options.width+u.right,height:u.top+this.graph.options.height+u.bottom});var l=this.graph.container;return l.style.left="".concat(this.padding.left,"px"),l.style.top="".concat(this.padding.top,"px"),this}},{key:"getPadding",value:function(){var e=this.options.padding;return typeof e=="function"?M.normalizeSides(A.call(e,this,this)):M.normalizeSides(e)}},{key:"getVisibleArea",value:function(){var e=this.graph.matrix(),t=this.getClientSize(),a={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},s=R.transformRectangle(a,e.inverse());return s.x-=(this.padding.left||0)/this.sx,s.y-=(this.padding.top||0)/this.sy,s}},{key:"isCellVisible",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.getBBox(),s=this.getVisibleArea();return t.strict?s.containsRect(a):s.isIntersectWithRect(a)}},{key:"isPointVisible",value:function(e){return this.getVisibleArea().containsPoint(e)}},{key:"lock",value:function(){return this.$container.css("overflow","hidden"),this}},{key:"unlock",value:function(){return this.$container.css("overflow","scroll"),this}},{key:"onRemove",value:function(){this.stopListening()}},{key:"dispose",value:function(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}}]),r}(Ai);Dz([Ai.dispose()],h0.prototype,"dispose",null),function(o){var i=function(r){Object(or.a)(e,r);var n=Object(sr.a)(e);function e(t){var a;return Object(De.a)(this,e),a=n.call(this,t.graph),a.scroller=t,t.options.background&&a.draw(t.options.background),a}return Object(be.a)(e,[{key:"elem",get:function(){return this.scroller.background}},{key:"init",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"updateBackgroundOptions",value:function(a){this.scroller.options.background=a}}]),e}(j1);o.Background=i}(h0||(h0={}));var ec;(function(o){o.containerClass="graph-scroller",o.panningClass="".concat(o.containerClass,"-panning"),o.pannableClass="".concat(o.containerClass,"-pannable"),o.pagedClass="".concat(o.containerClass,"-paged"),o.contentClass="".concat(o.containerClass,"-content"),o.backgroundClass="".concat(o.containerClass,"-background"),o.transitionClassName="transition-in-progress",o.transitionEventName="transitionend.graph-scroller-transition",o.defaultOptions={padding:function(){var n=this.getClientSize(),e=Math.max(this.options.minVisibleWidth||0,1)||1,t=Math.max(this.options.minVisibleHeight||0,1)||1,a=Math.max(n.width-e,0),s=Math.max(n.height-t,0);return{left:a,top:s,right:a,bottom:s}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function i(r){var n=m.merge({},o.defaultOptions,r);return n.pageWidth==null&&(n.pageWidth=r.graph.options.width),n.pageHeight==null&&(n.pageHeight=r.graph.options.height),n}o.getOptions=i})(ec||(ec={}));function vs(o,i,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(r){var e=r.graph,t=e.view.normalizeEvent(i),a=e.snapToGrid(t.clientX,t.clientY);r.notify(o,Object.assign({e:t,view:r,node:r.cell,cell:r.cell,x:a.x,y:a.y},n))}}var Rz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},L1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.options=m.merge({},Fu.defaultOptions,n),e.options.model&&(e.options.collection=e.options.model.collection),e.options.collection?e.collection=e.options.collection:(e.collection=new Sk([],{comparator:Fu.depthComparator}),e.options.collection=e.collection),e.boxCount=0,e.createContainer(),e.initHandles(),e.startListening(),e}return Object(be.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"boxClassName",get:function(){return this.prefixClassName(Fu.classNames.box)}},{key:"$boxes",get:function(){return this.$container.children(".".concat(this.boxClassName))}},{key:"handleOptions",get:function(){return this.options}},{key:"startListening",value:function(){var e,t=this.graph,a=this.collection;this.delegateEvents((e={},Object(Xe.a)(e,"mousedown .".concat(this.boxClassName),"onSelectionBoxMouseDown"),Object(Xe.a)(e,"touchstart .".concat(this.boxClassName),"onSelectionBoxMouseDown"),e),!0),t.on("scale",this.onGraphTransformed,this),t.on("translate",this.onGraphTransformed,this),t.model.on("updated",this.onModelUpdated,this),a.on("added",this.onCellAdded,this),a.on("removed",this.onCellRemoved,this),a.on("reseted",this.onReseted,this),a.on("updated",this.onCollectionUpdated,this),a.on("node:change:position",this.onNodePositionChanged,this),a.on("cell:changed",this.onCellChanged,this)}},{key:"stopListening",value:function(){var e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}},{key:"onRemove",value:function(){this.stopListening()}},{key:"onGraphTransformed",value:function(){this.updateSelectionBoxes({async:!1})}},{key:"onCellChanged",value:function(){this.updateSelectionBoxes()}},{key:"onNodePositionChanged",value:function(e){var t=e.node,a=e.options,s=this.options,u=s.showNodeSelectionBox,l=s.pointerEvents,c=a.ui,f=a.selection,d=a.translateBy,v=a.snapped,p=(u!==!0||l==="none")&&!this.translating&&!f,y=c&&d&&t.id===d;if(p&&(y||v)){this.translating=!0;var C=t.position(),E=t.previous("position"),w=C.x-E.x,x=C.y-E.y;(w!==0||x!==0)&&this.translateSelectedNodes(w,x,t,a),this.translating=!1}}},{key:"onModelUpdated",value:function(e){var t=e.removed;t&&t.length&&this.unselect(t)}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.collection.has(e)}},{key:"length",get:function(){return this.collection.length}},{key:"cells",get:function(){return this.collection.toArray()}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.dryrun=!0;var a=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(a,t),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e){if(t.batch){var a=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(a,Object.assign(Object.assign({},t),{ui:!0})),this}var s=this.cells,u=this.filter(Array.isArray(e)?e:[e]),l={},c={};s.forEach(function(v){return l[v.id]=v}),u.forEach(function(v){return c[v.id]=v});var f=[],d=[];return u.forEach(function(v){l[v.id]||f.push(v)}),s.forEach(function(v){c[v.id]||d.push(v)}),d.length&&this.unselect(d,Object.assign(Object.assign({},t),{ui:!0})),f.length&&this.select(f,Object.assign(Object.assign({},t),{ui:!0})),d.length===0&&f.length===0&&this.updateContainer(),this}return this.clean(t)}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.length&&(e.batch===!1?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}},{key:"setFilter",value:function(e){this.options.filter=e}},{key:"setContent",value:function(e){this.options.content=e}},{key:"startSelecting",value:function(e){e=this.normalizeEvent(e),this.clean();var t,a,s=this.graph.container;if(e.offsetX!=null&&e.offsetY!=null&&s.contains(e.target))t=e.offsetX,a=e.offsetY;else{var u=this.$(s).offset(),l=s.scrollLeft,c=s.scrollTop;t=e.clientX-u.left+window.pageXOffset+l,a=e.clientY-u.top+window.pageYOffset+c}this.$container.css({top:a,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:a,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(Fu.documentEvents,e.data)}},{key:"filter",value:function(e){var t=this,a=this.options.filter;return Array.isArray(a)?e.filter(function(s){return!a.includes(s)&&!a.includes(s.shape)}):typeof a=="function"?e.filter(function(s){return A.call(a,t.graph,s)}):e}},{key:"stopSelecting",value:function(e){var t=this.graph,a=this.getEventData(e),s=a.action;switch(s){case"selecting":{var u=this.$container.width(),l=this.$container.height(),c=this.$container.offset(),f=t.pageToLocal(c.left,c.top),d=t.transform.getScale();u/=d.sx,l/=d.sy;var v=new Sr(f.x,f.y,u,l),p=this.getCellViewsInArea(v).map(function(E){return E.cell});this.reset(p,{batch:!0}),this.hideRubberband();break}case"translating":{var y=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){var C=a;this.updateSelectedNodesPosition({dx:C.clientX-C.originX,dy:C.clientY-C.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,y.x,y.y);break}default:{this.clean();break}}}},{key:"onMouseUp",value:function(e){var t=this.getEventData(e).action;t&&(this.stopSelecting(e),this.undelegateDocumentEvents())}},{key:"onSelectionBoxMouseDown",value:function(e){this.options.following||e.stopPropagation();var t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);var a=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:a});var s=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,s.x,s.y),this.delegateDocumentEvents(Fu.documentEvents,t.data)}},{key:"startTranslating",value:function(e){this.graph.model.startBatch("move-selection");var t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}},{key:"getSelectionOffset",value:function(e,t){var a=e.x-t.clientX,s=e.y-t.clientY,u=this.graph.hook.getRestrictArea();if(u){var l=this.collection.toArray(),c=pi.getCellsBBox(l,{deep:!0})||Sr.create(),f=u.x-c.x,d=u.y-c.y,v=u.x+u.width-(c.x+c.width),p=u.y+u.height-(c.y+c.height);if(a<f&&(a=f),s<d&&(s=d),v<a&&(a=v),p<s&&(s=p),!this.options.following){var y=e.x-t.originX,C=e.y-t.originY;a=y<=f||y>=v?0:a,s=C<=d||C>=p?0:s}}return{dx:a,dy:s}}},{key:"updateSelectedNodesPosition",value:function(e){var t=e.dx,a=e.dy;if(t||a)if(this.translateSelectedNodes(t,a),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{var s=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:"+=".concat(t*s.sx),top:"+=".concat(a*s.sy)})}}},{key:"autoScrollGraph",value:function(e,t){var a=this.graph.scroller.widget;return a?a.autoScroll(e,t):{scrollerX:0,scrollerY:0}}},{key:"adjustSelection",value:function(e){var t=this.normalizeEvent(e),a=this.getEventData(t),s=a.action;switch(s){case"selecting":{var u=a;u.moving!==!0&&(this.$container.appendTo(this.graph.container),this.showRubberband(),u.moving=!0);var l=this.autoScrollGraph(t.clientX,t.clientY),c=l.scrollerX,f=l.scrollerY;u.scrollerX+=c,u.scrollerY+=f;var d=t.clientX-u.clientX+u.scrollerX,v=t.clientY-u.clientY+u.scrollerY,p=parseInt(this.$container.css("left"),10),y=parseInt(this.$container.css("top"),10);this.$container.css({left:d<0?u.offsetX+d:p,top:v<0?u.offsetY+v:y,width:Math.abs(d),height:Math.abs(v)});break}case"translating":{var C=this.graph.snapToGrid(t.clientX,t.clientY),E=a,w=this.getSelectionOffset(C,E);this.options.following?this.updateSelectedNodesPosition(w):this.updateContainerPosition(w),w.dx&&(E.clientX=C.x),w.dy&&(E.clientY=C.y),this.notifyBoxEvent("box:mousemove",e,C.x,C.y);break}default:break}this.boxesUpdated=!1}},{key:"translateSelectedNodes",value:function(e,t,a,s){var u=this,l={},c=[];if(a&&(l[a.id]=!0),this.collection.toArray().forEach(function(d){d.getDescendants({deep:!0}).forEach(function(v){l[v.id]=!0})}),s&&s.translateBy){var f=this.graph.getCellById(s.translateBy);f&&(l[f.id]=!0,f.getDescendants({deep:!0}).forEach(function(d){l[d.id]=!0}),c.push(f))}this.collection.toArray().forEach(function(d){if(!l[d.id]){var v=Object.assign(Object.assign({},s),{selection:u.cid,exclude:c});d.translate(e,t,v),u.graph.model.getConnectedEdges(d).forEach(function(p){l[p.id]||(p.translate(e,t,v),l[p.id]=!0)})}})}},{key:"getCellViewsInArea",value:function(e){var t=this.graph,a={strict:this.options.strict},s=[];return this.options.rubberNode&&(this.options.useCellGeometry?s=s.concat(t.model.getNodesInArea(e,a).map(function(u){return t.renderer.findViewByCell(u)}).filter(function(u){return u!=null})):s=s.concat(t.renderer.findViewsInArea(e,a))),this.options.rubberEdge&&(this.options.useCellGeometry?s=s.concat(t.model.getEdgesInArea(e,a).map(function(u){return t.renderer.findViewByCell(u)}).filter(function(u){return u!=null})):s=s.concat(t.renderer.findEdgeViewsInArea(e,a))),s}},{key:"notifyBoxEvent",value:function(e,t,a,s){var u=this.getEventData(t),l=u.activeView;this.trigger(e,{e:t,view:l,x:a,y:s,cell:l.cell})}},{key:"getSelectedClassName",value:function(e){return this.prefixClassName("".concat(e.isNode()?"node":"edge","-selected"))}},{key:"addCellSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}},{key:"removeCellUnSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}},{key:"destroySelectionBox",value:function(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find('[data-cell-id="'.concat(e.id,'"]')).remove(),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}},{key:"destroyAllSelectionBoxes",value:function(e){var t=this;e.forEach(function(a){return t.removeCellUnSelectedClassName(a)}),this.hide(),this.$boxes.remove(),this.boxCount=0}},{key:"hide",value:function(){this.$container.removeClass(this.prefixClassName(Fu.classNames.rubberband)).removeClass(this.prefixClassName(Fu.classNames.selected))}},{key:"showRubberband",value:function(){this.$container.addClass(this.prefixClassName(Fu.classNames.rubberband))}},{key:"hideRubberband",value:function(){this.$container.removeClass(this.prefixClassName(Fu.classNames.rubberband))}},{key:"showSelected",value:function(){this.$container.removeAttr("style").addClass(this.prefixClassName(Fu.classNames.selected))}},{key:"createContainer",value:function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(Fu.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(Fu.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(Fu.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}},{key:"updateContainerPosition",value:function(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:"+=".concat(e.dx),top:"+=".concat(e.dy)})}},{key:"updateContainer",value:function(){var e=this,t={x:Infinity,y:Infinity},a={x:0,y:0},s=this.collection.toArray().filter(function(c){return e.canShowSelectionBox(c)});s.forEach(function(c){var f=e.graph.renderer.findViewByCell(c);if(f){var d=f.getBBox({useCellGeometry:e.options.useCellGeometry});t.x=Math.min(t.x,d.x),t.y=Math.min(t.y,d.y),a.x=Math.max(a.x,d.x+d.width),a.y=Math.max(a.y,d.y+d.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:a.x-t.x,height:a.y-t.y}).attr("data-selection-length",this.collection.length);var u=this.options.content;if(u)if(typeof u=="function"){var l=A.call(u,this.graph,this,this.$selectionContent[0]);l&&this.$selectionContent.html(l)}else this.$selectionContent.html(u);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"canShowSelectionBox",value:function(e){return e.isNode()&&this.options.showNodeSelectionBox===!0||e.isEdge()&&this.options.showEdgeSelectionBox===!0}},{key:"createSelectionBox",value:function(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){var t=this.graph.renderer.findViewByCell(e);if(t){var a=t.getBBox({useCellGeometry:this.options.useCellGeometry}),s=this.boxClassName;this.$("<div/>").addClass(s).addClass("".concat(s,"-").concat(e.isNode()?"node":"edge")).attr("data-cell-id",e.id).css({position:"absolute",left:a.x,top:a.y,width:a.width,height:a.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}},{key:"updateSelectionBoxes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}},{key:"confirmUpdate",value:function(){var e=this;return this.boxCount&&(this.hide(),this.$boxes.each(function(t,a){var s=e.$(a).remove().attr("data-cell-id"),u=e.collection.get(s);u&&e.createSelectionBox(u)}),this.updateContainer()),0}},{key:"getCellViewFromElem",value:function(e){var t=e.getAttribute("data-cell-id");if(t){var a=this.collection.get(t);if(a)return this.graph.renderer.findViewByCell(a)}return null}},{key:"onCellRemoved",value:function(e){var t=e.cell;this.destroySelectionBox(t),this.updateContainer()}},{key:"onReseted",value:function(e){var t=this,a=e.previous,s=e.current;this.destroyAllSelectionBoxes(a),s.forEach(function(u){t.listenCellRemoveEvent(u),t.createSelectionBox(u)}),this.updateContainer()}},{key:"onCellAdded",value:function(e){var t=e.cell;this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()}},{key:"listenCellRemoveEvent",value:function(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}},{key:"onCollectionUpdated",value:function(e){var t=this,a=e.added,s=e.removed,u=e.options;a.forEach(function(c){t.trigger("cell:selected",{cell:c,options:u}),t.graph.trigger("cell:selected",{cell:c,options:u}),c.isNode()?(t.trigger("node:selected",{cell:c,options:u,node:c}),t.graph.trigger("node:selected",{cell:c,options:u,node:c})):c.isEdge()&&(t.trigger("edge:selected",{cell:c,options:u,edge:c}),t.graph.trigger("edge:selected",{cell:c,options:u,edge:c}))}),s.forEach(function(c){t.trigger("cell:unselected",{cell:c,options:u}),t.graph.trigger("cell:unselected",{cell:c,options:u}),c.isNode()?(t.trigger("node:unselected",{cell:c,options:u,node:c}),t.graph.trigger("node:unselected",{cell:c,options:u,node:c})):c.isEdge()&&(t.trigger("edge:unselected",{cell:c,options:u,edge:c}),t.graph.trigger("edge:unselected",{cell:c,options:u,edge:c}))});var l={added:a,removed:s,options:u,selected:this.cells.filter(function(c){return!!t.graph.getCellById(c.id)})};this.trigger("selection:changed",l),this.graph.trigger("selection:changed",l)}},{key:"deleteSelectedCells",value:function(){var e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}},{key:"startRotate",value:function(e){var t=e.e,a=this.collection.toArray(),s=pi.getCellsBBox(a).getCenter(),u=this.graph.snapToGrid(t.clientX,t.clientY),l=a.reduce(function(c,f){return c[f.id]=ti.normalize(f.getAngle()),c},{});this.setEventData(t,{center:s,angles:l,start:u.theta(s)})}},{key:"doRotate",value:function(e){var t=this,a=e.e,s=this.getEventData(a),u=this.graph.options.rotating.grid,l=typeof u=="function"?A.call(u,this.graph,null):u,c=this.graph.snapToGrid(a.clientX,a.clientY),f=s.start-c.theta(s.center);s.rotated||(s.rotated=!0),Math.abs(f)>.001&&(this.collection.toArray().forEach(function(d){var v=ts.snapToGrid(s.angles[d.id]+f,l||15);d.rotate(v,{absolute:!0,center:s.center,selection:t.cid})}),this.updateSelectionBoxes())}},{key:"stopRotate",value:function(e){var t=this,a=e.e,s=this.getEventData(a);s.rotated&&(s.rotated=!1,this.collection.toArray().forEach(function(u){vs("node:rotated",a,t.graph.findViewByCell(u))}))}},{key:"startResize",value:function(e){var t=e.e,a=this.graph.getGridSize(),s=this.collection.toArray(),u=pi.getCellsBBox(s),l=s.map(function(d){return d.getBBox()}),c=l.reduce(function(d,v){return v.width<d?v.width:d},Infinity),f=l.reduce(function(d,v){return v.height<d?v.height:d},Infinity);this.setEventData(t,{bbox:u,cells:this.graph.model.getSubGraph(s),minWidth:a*u.width/c,minHeight:a*u.height/f})}},{key:"doResize",value:function(e){var t=e.e,a=e.dx,s=e.dy,u=this.eventData(t),l=u.bbox,c=l.width,f=l.height,d=Math.max(c+a,u.minWidth),v=Math.max(f+s,u.minHeight);u.resized||(u.resized=!0),(Math.abs(c-d)>.001||Math.abs(f-v)>.001)&&(this.graph.model.resizeCells(d,v,u.cells,{selection:this.cid}),l.width=d,l.height=v,this.updateSelectionBoxes())}},{key:"stopResize",value:function(e){var t=this,a=e.e,s=this.eventData(a);s.resized&&(s.resized=!1,this.collection.toArray().forEach(function(u){vs("node:resized",a,t.graph.findViewByCell(u))}))}},{key:"dispose",value:function(){this.clean(),this.remove()}}]),r}(Ai);Rz([Ai.dispose()],L1.prototype,"dispose",null),m.applyMixins(L1,c0);var Fu;(function(o){var i="widget-selection";o.classNames={root:i,inner:"".concat(i,"-inner"),box:"".concat(i,"-box"),content:"".concat(i,"-content"),rubberband:"".concat(i,"-rubberband"),selected:"".concat(i,"-selected")},o.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content:function(e){return _.template('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:e.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]};function r(n){return n.getAncestors().length}o.depthComparator=r})(Fu||(Fu={}));var gS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"node",get:function(){return this.cell}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-transform")}},{key:"resizeClassName",get:function(){return"".concat(this.containerClassName,"-resize")}},{key:"rotateClassName",get:function(){return"".concat(this.containerClassName,"-rotate")}},{key:"init",value:function(e){this.options=Object.assign(Object.assign({},Ts.defaultOptions),e),this.render(),this.startListening()}},{key:"startListening",value:function(){var e;this.delegateEvents((e={},Object(Xe.a)(e,"mousedown .".concat(this.resizeClassName),"startResizing"),Object(Xe.a)(e,"touchstart .".concat(this.resizeClassName),"startResizing"),Object(Xe.a)(e,"mousedown .".concat(this.rotateClassName),"startRotating"),Object(Xe.a)(e,"touchstart .".concat(this.rotateClassName),"startRotating"),e)),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),Object(la.a)(Object(ca.a)(r.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),Object(la.a)(Object(ca.a)(r.prototype),"stopListening",this).call(this)}},{key:"renderHandles",value:function(){var e=this;this.container=document.createElement("div"),this.$container=this.$(this.container);var t=this.$("<div/>").prop("draggable",!1),a=t.clone().addClass(this.rotateClassName),s=Ts.POSITIONS.map(function(u){return t.clone().addClass(e.resizeClassName).attr("data-position",u)});this.empty(),this.$container.append(s,a)}},{key:"render",value:function(){return this.renderHandles(),this.view.addClass(Ts.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}},{key:"update",value:function(){var e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;var a=ti.normalize(this.node.getAngle()),s=a!==0?"rotate(".concat(a,"deg)"):"";return this.$container.css({transform:s,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}},{key:"remove",value:function(){return this.view.removeClass(Ts.NODE_CLS),Object(la.a)(Object(ca.a)(r.prototype),"remove",this).call(this)}},{key:"onKnobMouseDown",value:function(){this.startHandle()}},{key:"onKnobMouseUp",value:function(){this.stopHandle()}},{key:"updateResizerDirections",value:function(){var e=this,t=ti.normalize(this.node.getAngle()),a=Math.floor(t*(Ts.DIRECTIONS.length/360));if(a!==this.prevShift){var s=Ts.DIRECTIONS.slice(a).concat(Ts.DIRECTIONS.slice(0,a)),u=function(c){return"".concat(e.containerClassName,"-cursor-").concat(c)};this.$container.find(".".concat(this.resizeClassName)).removeClass(Ts.DIRECTIONS.map(function(l){return u(l)}).join(" ")).each(function(l,c){e.$(c).addClass(u(s[l]))}),this.prevShift=a}}},{key:"getTrueDirection",value:function(e){var t=ti.normalize(this.node.getAngle()),a=Ts.POSITIONS.indexOf(e);return a+=Math.floor(t*(Ts.POSITIONS.length/360)),a%=Ts.POSITIONS.length,Ts.POSITIONS[a]}},{key:"toValidResizeDirection",value:function(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}},{key:"startResizing",value:function(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});var t=this.$(e.target).attr("data-position"),a=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),vs("node:resize:mousedown",e,a)}},{key:"prepareResizing",value:function(e,t){var a=this.getTrueDirection(t),s=0,u=0;t.split("-").forEach(function(d){s={left:-1,right:1}[d]||s,u={top:-1,bottom:1}[d]||u});var l=this.toValidResizeDirection(t),c={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[l],f=ti.normalize(this.node.getAngle());this.setEventData(e,{selector:c,direction:l,trueDirection:a,relativeDirection:t,angle:f,resizeX:s,resizeY:u,action:"resizing"})}},{key:"startRotating",value:function(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});var t=this.graph.findViewByCell(this.node),a=this.node.getBBox().getCenter(),s=this.normalizeEvent(e),u=this.graph.snapToGrid(s.clientX,s.clientY);this.setEventData(e,{center:a,action:"rotating",angle:ti.normalize(this.node.getAngle()),start:mt.create(u).theta(a)}),this.startAction(e),vs("node:rotate:mousedown",e,t)}},{key:"onMouseMove",value:function(e){var t=this.graph.findViewByCell(this.node),a=this.getEventData(e);if(a.action){var s=this.normalizeEvent(e),u=s.clientX,l=s.clientY,c=this.graph.scroller.widget,f=this.options.restrictedResizing;if(f===!0||typeof f=="number"){var d=f===!0?0:f,v=c?Math.max(d,8):d,p=this.graph.container.getBoundingClientRect();u=M.clamp(u,p.left+v,p.right-v),l=M.clamp(l,p.top+v,p.bottom-v)}else this.options.autoScrollOnResizing&&c&&c.autoScroll(u,l);var y=this.graph.snapToGrid(u,l),C=this.graph.getGridSize(),E=this.node,w=this.options;if(a.action==="resizing"){a=a,a.resized||(t&&(t.addClass("node-resizing"),vs("node:resize",e,t)),a.resized=!0);var x=E.getBBox(),N=mt.create(y).rotate(a.angle,x.getCenter()).diff(x[a.selector]),j=a.resizeX?N.x*a.resizeX:x.width,B=a.resizeY?N.y*a.resizeY:x.height,$=j,Z=B;if(j=ts.snapToGrid(j,C),B=ts.snapToGrid(B,C),j=Math.max(j,w.minWidth||C),B=Math.max(B,w.minHeight||C),j=Math.min(j,w.maxWidth||Infinity),B=Math.min(B,w.maxHeight||Infinity),w.preserveAspectRatio){var fe=x.width*B/x.height,de=x.height*j/x.width;j<fe?B=de:j=fe}var xe=a.relativeDirection;if(w.allowReverse&&($<=-j||Z<=-B)){var Ae;xe==="left"?$<=-j&&(Ae="right"):xe==="right"?$<=-j&&(Ae="left"):xe==="top"?Z<=-B&&(Ae="bottom"):xe==="bottom"?Z<=-B&&(Ae="top"):xe==="top-left"?$<=-j&&Z<=-B?Ae="bottom-right":$<=-j?Ae="top-right":Z<=-B&&(Ae="bottom-left"):xe==="top-right"?$<=-j&&Z<=-B?Ae="bottom-left":$<=-j?Ae="top-left":Z<=-B&&(Ae="bottom-right"):xe==="bottom-left"?$<=-j&&Z<=-B?Ae="top-right":$<=-j?Ae="bottom-right":Z<=-B&&(Ae="top-left"):xe==="bottom-right"&&($<=-j&&Z<=-B?Ae="top-left":$<=-j?Ae="bottom-left":Z<=-B&&(Ae="top-right"));var Ye=Ae;this.stopHandle();var rt=this.$container.find(".".concat(this.resizeClassName,'[data-position="').concat(Ye,'"]'));this.startHandle(rt[0]),this.prepareResizing(e,Ye),this.onMouseMove(e)}if(x.width!==j||x.height!==B){var je={ui:!0,direction:a.direction,relativeDirection:a.relativeDirection,trueDirection:a.trueDirection,minWidth:w.minWidth,minHeight:w.minHeight,maxWidth:w.maxWidth,maxHeight:w.maxHeight,preserveAspectRatio:w.preserveAspectRatio===!0};E.resize(j,B,je),vs("node:resizing",e,t)}vs("node:resize:mousemove",e,t)}else if(a.action==="rotating"){a=a,a.rotated||(t&&(t.addClass("node-rotating"),vs("node:rotate",e,t)),a.rotated=!0);var ot=E.getAngle(),Ft=a.start-mt.create(y).theta(a.center),hn=a.angle+Ft;w.rotateGrid&&(hn=ts.snapToGrid(hn,w.rotateGrid)),hn=ti.normalize(hn),ot!==hn&&(E.rotate(hn,{absolute:!0}),vs("node:rotating",e,t)),vs("node:rotate:mousemove",e,t)}}}},{key:"onMouseUp",value:function(e){var t=this.graph.findViewByCell(this.node),a=this.getEventData(e);a.action&&(this.stopAction(e),this.model.stopBatch(a.action==="resizing"?"resize":"rotate",{cid:this.cid}),a.action==="resizing"?vs("node:resize:mouseup",e,t):a.action==="rotating"&&vs("node:rotate:mouseup",e,t))}},{key:"startHandle",value:function(e){if(this.handle=e||null,this.$container.addClass("".concat(this.containerClassName,"-active")),e){this.$(e).addClass("".concat(this.containerClassName,"-active-handle"));var t=e.getAttribute("data-position");if(t){var a=Ts.DIRECTIONS[Ts.POSITIONS.indexOf(t)];this.$container.addClass("".concat(this.containerClassName,"-cursor-").concat(a))}}}},{key:"stopHandle",value:function(){if(this.$container.removeClass("".concat(this.containerClassName,"-active")),this.handle){this.$(this.handle).removeClass("".concat(this.containerClassName,"-active-handle"));var e=this.handle.getAttribute("data-position");if(e){var t=Ts.DIRECTIONS[Ts.POSITIONS.indexOf(e)];this.$container.removeClass("".concat(this.containerClassName,"-cursor-").concat(t))}this.handle=null}}},{key:"startAction",value:function(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Ts.documentEvents,e.data)}},{key:"stopAction",value:function(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.graph.findViewByCell(this.node),a=this.getEventData(e);t&&(t.removeClass("node-".concat(a.action)),a.action==="resizing"&&a.resized?vs("node:resized",e,t):a.action==="rotating"&&a.rotated&&vs("node:rotated",e,t))}}]),r}(f0),Ts;(function(o){o.NODE_CLS="has-widget-transform",o.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],o.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},o.defaultOptions={minWidth:0,minHeight:0,maxWidth:Infinity,maxHeight:Infinity,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(Ts||(Ts={}));var Nz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Bc;(function(o){function i(r,n,e){var t={};return Object.keys(e||{}).forEach(function(a){var s=e[a];t[a]=typeof s=="function"?s.call(r,n):s}),t}o.parseOptionGroup=i})(Bc||(Bc={})),function(o){function i(r){var n=r.grid,e=r.panning,t=r.selecting,a=r.embedding,s=r.snapline,u=r.resizing,l=r.rotating,c=r.knob,f=r.clipboard,d=r.history,v=r.scroller,p=r.minimap,y=r.keyboard,C=r.mousewheel,E=Nz(r,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),w=r.container;if(w!=null)E.width==null&&(E.width=w.clientWidth),E.height==null&&(E.height=w.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");var x=m.merge({},o.defaults,E),N={size:10,visible:!1};typeof n=="number"?x.grid={size:n,visible:!1}:typeof n=="boolean"?x.grid=Object.assign(Object.assign({},N),{visible:n}):x.grid=Object.assign(Object.assign({},N),n);var j=["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"];return j.forEach(function(B){var $=r[B];typeof $=="boolean"?x[B].enabled=$:x[B]=Object.assign(Object.assign({},x[B]),$)}),x.background&&x.scroller.enabled&&x.scroller.background==null&&(x.scroller.background=x.background,delete x.background),x}o.get=i}(Bc||(Bc={})),function(o){o.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:ts.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:ts.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:function(r){var n=r.type,e=r.sourceView,t=r.targetView,a=n==="target"?t:e;return a!=null},createEdge:function(){return new fS}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:function(){return!1}}}(Bc||(Bc={}));var Tk=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Mk=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"cid",get:function(){return this.graph.view.cid}},{key:"svg",get:function(){return this.view.svg}},{key:"defs",get:function(){return this.view.defs}},{key:"isDefined",value:function(e){return this.svg.getElementById(e)!=null}},{key:"filter",value:function(e){var t=e.id,a=e.name;if(t||(t="filter-".concat(a,"-").concat(this.cid,"-").concat(_.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var s=Tv.registry.get(a);if(s==null)return Tv.registry.onNotFound(a);var u=s(e.args||{}),l=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});ja.create(ci.sanitize(u),l).appendTo(this.defs)}return t}},{key:"gradient",value:function(e){var t=e.id,a=e.type;if(t||(t="gradient-".concat(a,"-").concat(this.cid,"-").concat(_.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var s=e.stops,u=s.map(function(f){var d=f.opacity!=null&&Number.isFinite(f.opacity)?f.opacity:1;return'<stop offset="'.concat(f.offset,'" stop-color="').concat(f.color,'" stop-opacity="').concat(d,'"/>')}),l="<".concat(a,">").concat(u.join(""),"</").concat(a,">"),c=Object.assign({id:t},e.attrs);ja.create(l,c).appendTo(this.defs)}return t}},{key:"marker",value:function(e){var t=e.id,a=e.refX,s=e.refY,u=e.markerUnits,l=e.markerOrient,c=e.tagName,f=e.children,d=Tk(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),v=t;if(v||(v="marker-".concat(this.cid,"-").concat(_.hashcode(JSON.stringify(e)))),!this.isDefined(v)){c!=="path"&&delete d.d;var p=ja.create("marker",{refX:a,refY:s,id:v,overflow:"visible",orient:l!=null?l:"auto",markerUnits:u||"userSpaceOnUse"},f?f.map(function(y){var C=y.tagName,E=Tk(y,["tagName"]);return ja.create("".concat(C)||"path",R.kebablizeAttrs(Object.assign(Object.assign({},d),E)))}):[ja.create(c||"path",R.kebablizeAttrs(d))]);this.defs.appendChild(p.node)}return v}},{key:"remove",value:function(e){var t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}]),r}($i),jz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Lz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},pS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"elem",get:function(){return this.view.grid}},{key:"grid",get:function(){return this.options.grid}},{key:"init",value:function(){this.startListening(),this.draw(this.grid)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"setVisible",value:function(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}},{key:"getGridSize",value:function(){return this.grid.size}},{key:"setGridSize",value:function(e){this.grid.size=Math.max(e,1),this.update()}},{key:"show",value:function(){this.setVisible(!0),this.update()}},{key:"hide",value:function(){this.setVisible(!1),this.update()}},{key:"clear",value:function(){this.elem.style.backgroundImage=""}},{key:"draw",value:function(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();var a=this.graph.matrix(),s=this.getInstance(),u=Array.isArray(e)?e:[e];this.patterns.forEach(function(f,d){var v="pattern_".concat(d),p=a.a||1,y=a.d||1,C=f.update,E=f.markup,w=Lz(f,["update","markup"]),x=Object.assign(Object.assign(Object.assign({},w),u[d]),{sx:p,sy:y,ox:a.e||0,oy:a.f||0,width:t*p,height:t*y});s.has(v)||s.add(v,ja.create("pattern",{id:v,patternUnits:"userSpaceOnUse"},ja.createVectors(E)).node);var N=s.get(v);typeof C=="function"&&C(N.childNodes[0],x);var j=x.ox%x.width;j<0&&(j+=x.width);var B=x.oy%x.height;B<0&&(B+=x.height),R.attr(N,{x:j,y:B,width:x.width,height:x.height})});var l=new XMLSerializer().serializeToString(s.root),c="url(data:image/svg+xml;base64,".concat(btoa(l),")");this.elem.style.backgroundImage=c}},{key:"getInstance",value:function(){return this.instance||(this.instance=new Cd),this.instance}},{key:"resolveGrid",value:function(e){if(!e)return[];var t=e.type;if(t==null)return[Object.assign(Object.assign({},Cd.presets.dot),e.args)];var a=Cd.registry.get(t);if(a){var s=e.args||[];return Array.isArray(s)||(s=[s]),Array.isArray(a)?a.map(function(u,l){return Object.assign(Object.assign({},u),s[l])}):[Object.assign(Object.assign({},a),s[0])]}return Cd.registry.onNotFound(t)}},{key:"dispose",value:function(){this.stopListening(),this.clear()}}]),r}($i);jz([$i.dispose()],pS.prototype,"dispose",null);var Ak=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"getClientMatrix",value:function(){return R.createSVGMatrix(this.view.stage.getScreenCTM())}},{key:"getClientOffset",value:function(){var e=this.view.svg.getBoundingClientRect();return new mt(e.left,e.top)}},{key:"getPageOffset",value:function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}},{key:"snapToGrid",value:function(e,t){var a=typeof e=="number"?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y);return a.snapToGrid(this.graph.getGridSize())}},{key:"localToGraphPoint",value:function(e,t){var a=mt.create(e,t);return R.transformPoint(a,this.graph.matrix())}},{key:"localToClientPoint",value:function(e,t){var a=mt.create(e,t);return R.transformPoint(a,this.getClientMatrix())}},{key:"localToPagePoint",value:function(e,t){var a=typeof e=="number"?this.localToGraphPoint(e,t):this.localToGraphPoint(e);return a.translate(this.getPageOffset())}},{key:"localToGraphRect",value:function(e,t,a,s){var u=Sr.create(e,t,a,s);return R.transformRectangle(u,this.graph.matrix())}},{key:"localToClientRect",value:function(e,t,a,s){var u=Sr.create(e,t,a,s);return R.transformRectangle(u,this.getClientMatrix())}},{key:"localToPageRect",value:function(e,t,a,s){var u=typeof e=="number"?this.localToGraphRect(e,t,a,s):this.localToGraphRect(e);return u.translate(this.getPageOffset())}},{key:"graphToLocalPoint",value:function(e,t){var a=mt.create(e,t);return R.transformPoint(a,this.graph.matrix().inverse())}},{key:"clientToLocalPoint",value:function(e,t){var a=mt.create(e,t);return R.transformPoint(a,this.getClientMatrix().inverse())}},{key:"clientToGraphPoint",value:function(e,t){var a=mt.create(e,t);return R.transformPoint(a,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalPoint",value:function(e,t){var a=mt.create(e,t),s=a.diff(this.getPageOffset());return this.graphToLocalPoint(s)}},{key:"graphToLocalRect",value:function(e,t,a,s){var u=Sr.create(e,t,a,s);return R.transformRectangle(u,this.graph.matrix().inverse())}},{key:"clientToLocalRect",value:function(e,t,a,s){var u=Sr.create(e,t,a,s);return R.transformRectangle(u,this.getClientMatrix().inverse())}},{key:"clientToGraphRect",value:function(e,t,a,s){var u=Sr.create(e,t,a,s);return R.transformRectangle(u,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalRect",value:function(e,t,a,s){var u=Sr.create(e,t,a,s),l=this.getPageOffset();return u.x-=l.x,u.y-=l.y,this.graphToLocalRect(u)}}]),r}($i),_z=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},mS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.widget=n.graph.hook.createSnapline(),n}return Object(be.a)(r,[{key:"dispose",value:function(){this.widget.dispose()}}]),r}($i);_z([$i.dispose()],mS.prototype,"dispose",null);var Eh;(function(o){function i(e){var t=[],a=[];return Array.isArray(e)?t.push.apply(t,Object(Qe.a)(e)):e.split("|").forEach(function(s){s.indexOf("&")===-1?t.push(s):a.push.apply(a,Object(Qe.a)(s.split("&")))}),{or:t,and:a}}o.parse=i;function r(e,t){if(e!=null&&t!=null){var a=i(e),s=i(t),u=a.or.sort(),l=s.or.sort(),c=a.and.sort(),f=s.and.sort(),d=function(p,y){return p.length===y.length&&(p.length===0||p.every(function(C,E){return C===y[E]}))};return d(u,l)&&d(c,f)}return e==null&&t==null}o.equals=r;function n(e,t,a){if(t==null||Array.isArray(t)&&t.length===0)return a?e.altKey!==!0&&e.ctrlKey!==!0&&e.metaKey!==!0&&e.shiftKey!==!0:!0;var s=i(t),u=s.or,l=s.and,c=function(d){var v="".concat(d.toLowerCase(),"Key");return e[v]===!0};return u.some(function(f){return c(f)})&&l.every(function(f){return c(f)})}o.isMatch=n})(Eh||(Eh={}));var Fz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},yS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"widgetOptions",get:function(){return this.options.scroller}},{key:"pannable",get:function(){return this.widgetOptions?typeof this.widgetOptions.pannable=="object"?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable:!1}},{key:"init",value:function(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}},{key:"startListening",value:function(){var e=[],t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}},{key:"stopListening",value:function(){var e=[],t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}},{key:"onRightMouseDown",value:function(e){var t=this;e.button===2&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",function(){return t.updateClassName(!1)}))}},{key:"preparePanning",value:function(e){var t=this,a=e.e;this.widget&&(this.allowPanning(a,!0)||this.allowPanning(a)&&!this.graph.selection.allowRubberband(a,!0))&&(this.updateClassName(!0),this.widget.startPanning(a),this.widget.once("pan:stop",function(){return t.updateClassName(!1)}))}},{key:"allowPanning",value:function(e,t){return this.widget&&this.pannable&&Eh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"updateClassName",value:function(e){if(this.widget!=null){var t=this.widget.container,a=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(R.addClass(t,a),t.dataset.panning=(!!e).toString()):R.removeClass(t,a)}}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}},{key:"lock",value:function(){this.widget&&this.widget.lock()}},{key:"unlock",value:function(){this.widget&&this.widget.unlock()}},{key:"update",value:function(){this.widget&&this.widget.update()}},{key:"enableAutoResize",value:function(){this.widget&&this.widget.enableAutoResize()}},{key:"disableAutoResize",value:function(){this.widget&&this.widget.disableAutoResize()}},{key:"resize",value:function(e,t){this.widget&&this.widget.resize(e,t)}},{key:"dispose",value:function(){this.widget&&this.widget.dispose(),this.stopListening()}}]),r}($i);Fz([$i.dispose()],yS.prototype,"dispose",null);var Bz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Gz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},bS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"commonOptions",get:function(){var e=this.instanceOptions,t=e.enabled,a=Gz(e,["enabled"]);return a}},{key:"instanceOptions",get:function(){return this.options.clipboard}},{key:"cells",get:function(){return this.widget.cells}},{key:"disabled",get:function(){return this.instanceOptions.enabled!==!0}},{key:"init",value:function(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}},{key:"enable",value:function(){this.disabled&&(this.instanceOptions.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.instanceOptions.enabled=!1)}},{key:"copy",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||(this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}},{key:"cut",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||(this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}},{key:"paste",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.graph;return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}},{key:"clean",value:function(e){(!this.disabled||e)&&(this.widget.clean(),this.graph.trigger("clipboard:changed",{cells:[]}))}},{key:"isEmpty",value:function(){return this.widget.isEmpty()}},{key:"dispose",value:function(){this.clean(!0)}}]),r}($i);Bz([$i.dispose()],bS.prototype,"dispose",null);var zz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},_1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.highlights={},n}return Object(be.a)(r,[{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"stopListening",value:function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"onCellHighlight",value:function(e){var t=e.view,a=e.magnet,s=e.options,u=s===void 0?{}:s,l=this.resolveHighlighter(u);if(!!l){var c=this.getHighlighterId(a,l);if(!this.highlights[c]){var f=l.highlighter;f.highlight(t,a,Object.assign({},l.args)),this.highlights[c]={cellView:t,magnet:a,highlighter:f,args:l.args}}}}},{key:"onCellUnhighlight",value:function(e){var t=e.magnet,a=e.options,s=a===void 0?{}:a,u=this.resolveHighlighter(s);if(!!u){var l=this.getHighlighterId(t,u);this.unhighlight(l)}}},{key:"resolveHighlighter",value:function(e){var t=this.options,a=e.highlighter;if(a==null){var s=e.type;a=s&&t.highlighting[s]||t.highlighting.default}if(a==null)return null;var u=typeof a=="string"?{name:a}:a,l=u.name,c=Pf.registry.get(l);return c==null?Pf.registry.onNotFound(l):(Pf.check(l,c),{name:l,highlighter:c,args:u.args||{}})}},{key:"getHighlighterId",value:function(e,t){return R.ensureId(e),t.name+e.id+JSON.stringify(t.args)}},{key:"unhighlight",value:function(e){var t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}},{key:"dispose",value:function(){var e=this;Object.keys(this.highlights).forEach(function(t){return e.unhighlight(t)}),this.stopListening()}}]),r}($i);zz([_1.dispose()],_1.prototype,"dispose",null);var Uz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},F1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.widgets=new Map,n}return Object(be.a)(r,[{key:"container",get:function(){return this.graph.view.container}},{key:"viewport",get:function(){return this.graph.view.viewport}},{key:"isSelectionEnabled",get:function(){return this.options.selecting.enabled===!0}},{key:"init",value:function(){this.startListening(),this.resize()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var a=this.graph.hook.createTransform(t,{clearAll:!0});a&&this.widgets.set(t,a)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var a=this.graph.hook.createTransform(t,{clearAll:!1});a&&this.widgets.set(t,a)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var a=this.widgets.get(t);a&&a.dispose(),this.widgets.delete(t)}}},{key:"getMatrix",value:function(){var e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),R.createSVGMatrix(this.viewportMatrix)}},{key:"setMatrix",value:function(e){var t=R.createSVGMatrix(e),a=R.matrixToTransformString(t);this.viewport.setAttribute("transform",a),this.viewportMatrix=t,this.viewportTransformString=a}},{key:"resize",value:function(e,t){var a=e===void 0?this.options.width:e,s=t===void 0?this.options.height:t;this.options.width=a,this.options.height=s,typeof a=="number"&&(a=Math.round(a)),typeof s=="number"&&(s=Math.round(s)),this.container.style.width=a==null?"":"".concat(a,"px"),this.container.style.height=s==null?"":"".concat(s,"px");var u=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},u)),this}},{key:"getComputedSize",value:function(){var e=this.options.width,t=this.options.height;return M.isNumber(e)||(e=this.container.clientWidth),M.isNumber(t)||(t=this.container.clientHeight),{width:e,height:t}}},{key:"getScale",value:function(){return R.matrixToScale(this.getMatrix())}},{key:"scale",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(e=this.clampScale(e),t=this.clampScale(t),a||s){var l=this.getTranslation(),c=l.tx-a*(e-1),f=l.ty-s*(t-1);(c!==l.tx||f!==l.ty)&&this.translate(c,f)}var d=this.getMatrix();return d.a=e,d.d=t,this.setMatrix(d),this.graph.trigger("scale",Object.assign({sx:e,sy:t,ox:a,oy:s},u)),this}},{key:"clampScale",value:function(e){var t=this.graph.options.scaling;return M.clamp(e,t.min||.01,t.max||16)}},{key:"getZoom",value:function(){return this.getScale().sx}},{key:"zoom",value:function(e,t){t=t||{};var a=e,s=e,u=this.getScale(),l=this.getComputedSize(),c=l.width/2,f=l.height/2;if(t.absolute||(a+=u.sx,s+=u.sy),t.scaleGrid&&(a=Math.round(a/t.scaleGrid)*t.scaleGrid,s=Math.round(s/t.scaleGrid)*t.scaleGrid),t.maxScale&&(a=Math.min(t.maxScale,a),s=Math.min(t.maxScale,s)),t.minScale&&(a=Math.max(t.minScale,a),s=Math.max(t.minScale,s)),t.center&&(c=t.center.x,f=t.center.y),a=this.clampScale(a),s=this.clampScale(s),c||f){var d=this.getTranslation(),v=c-(c-d.tx)*(a/u.sx),p=f-(f-d.ty)*(s/u.sy);(v!==d.tx||p!==d.ty)&&this.translate(v,p,{ui:t.ui})}return this.scale(a,s,0,0,{ui:t.ui}),this}},{key:"getRotation",value:function(){return R.matrixToRotation(this.getMatrix())}},{key:"rotate",value:function(e,t,a){if(t==null||a==null){var s=R.getBBox(this.graph.view.stage);t=s.width/2,a=s.height/2}var u=this.getMatrix().translate(t,a).rotate(e).translate(-t,-a);return this.setMatrix(u),this}},{key:"getTranslation",value:function(){return R.matrixToTranslation(this.getMatrix())}},{key:"translate",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getMatrix();s.e=e||0,s.f=t||0,this.setMatrix(s);var u=this.getTranslation();return this.options.x=u.tx,this.options.y=u.ty,this.graph.trigger("translate",Object.assign(Object.assign({},u),a)),this}},{key:"setOrigin",value:function(e,t){return this.translate(e||0,t||0)}},{key:"fitToContent",value:function(e,t,a,s){if(typeof e=="object"){var u=e;e=u.gridWidth||1,t=u.gridHeight||1,a=u.padding||0,s=u}else e=e||1,t=t||1,a=a||0,s==null&&(s={});var l=M.normalizeSides(a),c=s.border||0,f=s.contentArea?Sr.create(s.contentArea):this.getContentArea(s);c>0&&f.inflate(c);var d=this.getScale(),v=this.getTranslation(),p=d.sx,y=d.sy;f.x*=p,f.y*=y,f.width*=p,f.height*=y;var C=Math.max(Math.ceil((f.width+f.x)/e),1)*e,E=Math.max(Math.ceil((f.height+f.y)/t),1)*t,w=0,x=0;(s.allowNewOrigin==="negative"&&f.x<0||s.allowNewOrigin==="positive"&&f.x>=0||s.allowNewOrigin==="any")&&(w=Math.ceil(-f.x/e)*e,w+=l.left,C+=w),(s.allowNewOrigin==="negative"&&f.y<0||s.allowNewOrigin==="positive"&&f.y>=0||s.allowNewOrigin==="any")&&(x=Math.ceil(-f.y/t)*t,x+=l.top,E+=x),C+=l.right,E+=l.bottom,C=Math.max(C,s.minWidth||0),E=Math.max(E,s.minHeight||0),C=Math.min(C,s.maxWidth||Number.MAX_SAFE_INTEGER),E=Math.min(E,s.maxHeight||Number.MAX_SAFE_INTEGER);var N=this.getComputedSize(),j=C!==N.width||E!==N.height,B=w!==v.tx||x!==v.ty;return B&&this.translate(w,x),j&&this.resize(C,E),new Sr(-w/p,-x/y,C/p,E/y)}},{key:"scaleContentToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.scaleContentToFitImpl(e)}},{key:"scaleContentToFitImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,s;if(e.contentArea){var u=e.contentArea;a=this.graph.localToGraph(u),s=mt.create(u)}else a=this.getContentBBox(e),s=this.graph.graphToLocal(a);if(!(!a.width||!a.height)){var l=M.normalizeSides(e.padding),c=e.minScale||0,f=e.maxScale||Number.MAX_SAFE_INTEGER,d=e.minScaleX||c,v=e.maxScaleX||f,p=e.minScaleY||c,y=e.maxScaleY||f,C;if(e.viewportArea)C=e.viewportArea;else{var E=this.getComputedSize(),w=this.getTranslation();C={x:w.tx,y:w.ty,width:E.width,height:E.height}}C=Sr.create(C).moveAndExpand({x:l.left,y:l.top,width:-l.left-l.right,height:-l.top-l.bottom});var x=this.getScale(),N=C.width/a.width*x.sx,j=C.height/a.height*x.sy;e.preserveAspectRatio!==!1&&(N=j=Math.min(N,j));var B=e.scaleGrid;if(B&&(N=B*Math.floor(N/B),j=B*Math.floor(j/B)),N=M.clamp(N,d,v),j=M.clamp(j,p,y),this.scale(N,j),t){var $=this.options,Z=C.x-s.x*N-$.x,fe=C.y-s.y*j-$.y;this.translate(Z,fe)}}}},{key:"getContentArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.useCellGeometry?this.model.getAllCellsBBox()||new Sr:R.getBBox(this.graph.view.stage)}},{key:"getContentBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.graph.localToGraph(this.getContentArea(e))}},{key:"getGraphArea",value:function(){var e=Sr.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Sr.create(e),s=this.graph;t.contentArea=a,t.viewportArea==null&&(t.viewportArea={x:s.options.x,y:s.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);var u=a.getCenter();return this.centerPoint(u.x,u.y),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.getContentArea(e),e)}},{key:"centerPoint",value:function(e,t){var a=this.getComputedSize(),s=this.getScale(),u=this.getTranslation(),l=a.width/2,c=a.height/2;e=typeof e=="number"?e:l,t=typeof t=="number"?t:c,e=l-e*s.sx,t=c-t*s.sy,(u.tx!==e||u.ty!==t)&&this.translate(e,t)}},{key:"centerContent",value:function(e){var t=this.graph.getContentArea(e),a=t.getCenter();this.centerPoint(a.x,a.y)}},{key:"centerCell",value:function(e){return this.positionCell(e,"center")}},{key:"positionPoint",value:function(e,t,a){var s=this.getComputedSize();t=M.normalizePercentage(t,Math.max(0,s.width)),t<0&&(t=s.width+t),a=M.normalizePercentage(a,Math.max(0,s.height)),a<0&&(a=s.height+a);var u=this.getTranslation(),l=this.getScale(),c=t-e.x*l.sx,f=a-e.y*l.sy;(u.tx!==c||u.ty!==f)&&this.translate(c,f)}},{key:"positionRect",value:function(e,t){var a=Sr.create(e);switch(t){case"center":return this.positionPoint(a.getCenter(),"50%","50%");case"top":return this.positionPoint(a.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(a.getTopRight(),"100%",0);case"right":return this.positionPoint(a.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(a.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(a.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(a.getBottomLeft(),0,"100%");case"left":return this.positionPoint(a.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(a.getTopLeft(),0,0);default:return this}}},{key:"positionCell",value:function(e,t){var a=e.getBBox();return this.positionRect(a,t)}},{key:"positionContent",value:function(e,t){var a=this.graph.getContentArea(t);return this.positionRect(a,e)}},{key:"dispose",value:function(){this.widgets.forEach(function(e){return e.dispose()}),this.widgets.clear(),this.stopListening()}}]),r}($i);Uz([F1.dispose()],F1.prototype,"dispose",null);var Vz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},CS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.movedMap=new WeakMap,n.unselectMap=new WeakMap,n}return Object(be.a)(r,[{key:"widgetOptions",get:function(){return this.options.selecting}},{key:"rubberbandDisabled",get:function(){return this.widgetOptions.enabled!==!0||this.widgetOptions.rubberband!==!0}},{key:"disabled",get:function(){return this.widgetOptions.enabled!==!0}},{key:"length",get:function(){return this.widget.length}},{key:"cells",get:function(){return this.widget.cells}},{key:"init",value:function(){this.widget=this.graph.hook.createSelection(),this.startListening()}},{key:"startListening",value:function(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}},{key:"stopListening",value:function(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}},{key:"onBlankMouseDown",value:function(e){var t=e.e;(this.allowRubberband(t,!0)||this.allowRubberband(t)&&!this.graph.scroller.allowPanning(t,!0)&&!this.graph.panning.allowPanning(t,!0))&&this.startRubberband(t)}},{key:"onBlankClick",value:function(){this.clean()}},{key:"allowRubberband",value:function(e,t){return!this.rubberbandDisabled&&Eh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}},{key:"allowMultipleSelection",value:function(e){return this.isMultiple()&&Eh.isMatch(e,this.widgetOptions.multipleSelectionModifiers)}},{key:"onCellMouseMove",value:function(e){var t=e.cell;this.movedMap.set(t,!0)}},{key:"onCellMouseUp",value:function(e){var t=e.e,a=e.cell,s=this.widgetOptions,u=this.disabled;!u&&this.movedMap.has(a)&&(u=s.selectCellOnMoved===!1,u||(u=s.selectNodeOnMoved===!1&&a.isNode()),u||(u=s.selectEdgeOnMoved===!1&&a.isEdge())),u||(this.allowMultipleSelection(t)?this.unselectMap.has(a)?this.unselectMap.delete(a):this.isSelected(a)?this.unselect(a):this.select(a):this.reset(a)),this.movedMap.delete(a)}},{key:"onBoxMouseDown",value:function(e){var t=e.e,a=e.cell;this.disabled||this.allowMultipleSelection(t)&&(this.unselect(a),this.unselectMap.set(a,!0))}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.widget.isSelected(e)}},{key:"getCells",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(a){return typeof a=="string"?t.graph.getCellById(a):a}).filter(function(a){return a!=null})}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getCells(e);return a.length&&(this.isMultiple()?this.widget.select(a,t):this.reset(a.slice(0,1),t)),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.unselect(this.getCells(e),t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.reset(e?this.getCells(e):[],t),this}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.widget.clean(e),this}},{key:"enable",value:function(){return this.disabled&&(this.widgetOptions.enabled=!0),this}},{key:"disable",value:function(){return this.disabled||(this.widgetOptions.enabled=!1),this}},{key:"startRubberband",value:function(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}},{key:"enableRubberband",value:function(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}},{key:"disableRubberband",value:function(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}},{key:"isMultiple",value:function(){return this.widgetOptions.multiple!==!1}},{key:"enableMultiple",value:function(){return this.widgetOptions.multiple=!0,this}},{key:"disableMultiple",value:function(){return this.widgetOptions.multiple=!1,this}},{key:"setModifiers",value:function(e){return this.widgetOptions.modifiers=e,this}},{key:"setContent",value:function(e){return this.widget.setContent(e),this}},{key:"setFilter",value:function(e){return this.widget.setFilter(e),this}},{key:"dispose",value:function(){this.stopListening(),this.widget.dispose()}}]),r}($i);Vz([$i.dispose()],CS.prototype,"dispose",null);var Pk=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Hz=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},v0=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.batchCommands=null,e.batchLevel=0,e.lastBatchIndex=-1,e.freezed=!1,e.handlers=[],e.graph=n.graph,e.model=n.graph.model,e.options=Wo.getOptions(n),e.validator=new r.Validator({history:Object(Vo.a)(e),cancelInvalid:e.options.cancelInvalid}),e.clean(),e.startListening(),e}return Object(be.a)(r,[{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1)}},{key:"undo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}},{key:"redo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}},{key:"cancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}},{key:"canUndo",value:function(){return!this.disabled&&this.undoStack.length>0}},{key:"canRedo",value:function(){return!this.disabled&&this.redoStack.length>0}},{key:"validate",value:function(e){for(var t,a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return(t=this.validator).validate.apply(t,[e].concat(s)),this}},{key:"dispose",value:function(){this.validator.dispose(),this.clean(),this.stopListening()}},{key:"startListening",value:function(){var e=this;this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(function(t,a){e.handlers[a]=e.addCommand.bind(e,t),e.model.on(t,e.handlers[a])}),this.validator.on("invalid",function(t){return e.trigger("invalid",t)})}},{key:"stopListening",value:function(){var e=this;this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(function(t,a){e.model.off(t,e.handlers[a])}),this.handlers.length=0),this.validator.off("invalid")}},{key:"createCommand",value:function(e){return{batch:e?e.batch:!1,data:{}}}},{key:"revertCommand",value:function(e,t){this.freezed=!0;for(var a=Array.isArray(e)?Wo.sortBatchCommands(e):[e],s=a.length-1;s>=0;s-=1){var u=a[s],l=Object.assign(Object.assign({},t),m.pick(u.options,this.options.revertOptionsList||[]));this.executeCommand(u,!0,l)}this.freezed=!1}},{key:"applyCommand",value:function(e,t){this.freezed=!0;for(var a=Array.isArray(e)?Wo.sortBatchCommands(e):[e],s=0;s<a.length;s+=1){var u=a[s],l=Object.assign(Object.assign({},t),m.pick(u.options,this.options.applyOptionsList||[]));this.executeCommand(u,!1,l)}this.freezed=!1}},{key:"executeCommand",value:function(e,t,a){var s=this.model,u=s.getCell(e.data.id),l=e.event;if(Wo.isAddEvent(l)&&t||Wo.isRemoveEvent(l)&&!t)u&&u.remove(a);else if(Wo.isAddEvent(l)&&!t||Wo.isRemoveEvent(l)&&t){var c=e.data;c.node?s.addNode(c.props,a):c.edge&&s.addEdge(c.props,a)}else if(Wo.isChangeEvent(l)){var f=e.data,d=f.key;if(d&&u){var v=t?f.prev[d]:f.next[d];u.prop(d,v,a)}}else{var p=this.options.executeCommand;p&&A.call(p,this,e,t,a)}}},{key:"addCommand",value:function(e,t){if(!(this.freezed||this.disabled)){var a=t,s=a.options||{};if(!s.dryrun&&!(Wo.isAddEvent(e)&&this.options.ignoreAdd||Wo.isRemoveEvent(e)&&this.options.ignoreRemove||Wo.isChangeEvent(e)&&this.options.ignoreChange)){var u=this.options.beforeAddCommand;if(!(u!=null&&A.call(u,this,e,t)===!1)){e==="cell:change:*"&&(e="cell:change:".concat(a.key));var l=a.cell,c=Ml.isModel(l),f;if(this.batchCommands){f=this.batchCommands[Math.max(this.lastBatchIndex,0)];var d=c&&!f.modelChange||f.data.id!==l.id,v=f.event!==e;if(this.lastBatchIndex>=0&&(d||v)){var p=this.batchCommands.findIndex(function(x){return(c&&x.modelChange||x.data.id===l.id)&&x.event===e});p<0||Wo.isAddEvent(e)||Wo.isRemoveEvent(e)?f=this.createCommand({batch:!0}):(f=this.batchCommands[p],this.batchCommands.splice(p,1)),this.batchCommands.push(f),this.lastBatchIndex=this.batchCommands.length-1}}else f=this.createCommand({batch:!1});if(Wo.isAddEvent(e)||Wo.isRemoveEvent(e)){var y=f.data;return f.event=e,f.options=s,y.id=l.id,y.props=m.cloneDeep(l.toJSON()),l.isEdge()?y.edge=!0:l.isNode()&&(y.node=!0),this.push(f,s)}if(Wo.isChangeEvent(e)){var C=t.key,E=f.data;return(!f.batch||!f.event)&&(f.event=e,f.options=s,E.key=C,E.prev==null&&(E.prev={}),E.prev[C]=m.clone(l.previous(C)),c?f.modelChange=!0:E.id=l.id),E.next==null&&(E.next={}),E.next[C]=m.clone(l.prop(C)),this.push(f,s)}var w=this.options.afterAddCommand;w&&A.call(w,this,e,t,f),this.push(f,s)}}}}},{key:"initBatchCommand",value:function(e){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}},{key:"storeBatchCommand",value:function(e){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){var t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.consolidateCommands(),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}},{key:"filterBatchCommand",value:function(e){for(var t=e.slice(),a=[],s=function(){var c=t.shift(),f=c.event,d=c.data.id;if(f!=null&&(d!=null||c.modelChange)){if(Wo.isAddEvent(f)){var v=t.findIndex(function(C){return Wo.isRemoveEvent(C.event)&&C.data.id===d});if(v>=0)return t=t.filter(function(C,E){return v<E||C.data.id!==d}),"continue"}else if(Wo.isRemoveEvent(f)){var p=t.findIndex(function(C){return Wo.isAddEvent(C.event)&&C.data.id===d});if(p>=0)return t.splice(p,1),"continue"}else if(Wo.isChangeEvent(f)){var y=c.data;if(m.isEqual(y.prev,y.next))return"continue"}a.push(c)}};t.length>0;)var u=s();return a}},{key:"notify",value:function(e,t,a){var s=t==null?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:s,options:a}),this.emit("change",{cmds:s,options:a})}},{key:"push",value:function(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.consolidateCommands(),this.notify("add",e,t))}},{key:"consolidateCommands",value:function(){var e,t=this.undoStack[this.undoStack.length-1],a=this.undoStack[this.undoStack.length-2];if(!!Array.isArray(t)){var s=new Set(t.map(function(l){return l.event}));if(!(s.size!==2||!s.has("cell:change:parent")||!s.has("cell:change:children"))&&!!t.every(function(l){var c;return l.batch&&((c=l.options)===null||c===void 0?void 0:c.ui)})&&!(!Array.isArray(a)||a.length!==1)){var u=a[0];u.event!=="cell:change:position"||!((e=u.options)===null||e===void 0?void 0:e.ui)||(a.push.apply(a,Object(Qe.a)(t)),this.undoStack.pop())}}}}]),r}(nu);Pk([nu.dispose()],v0.prototype,"dispose",null),function(o){var i=function(r){Object(or.a)(e,r);var n=Object(sr.a)(e);function e(t){var a;return Object(De.a)(this,e),a=n.call(this),a.map={},a.command=t.history,a.cancelInvalid=t.cancelInvalid!==!1,a.command.on("add",a.onCommandAdded,Object(Vo.a)(a)),a}return Object(be.a)(e,[{key:"onCommandAdded",value:function(a){var s=this,u=a.cmds;return Array.isArray(u)?u.every(function(l){return s.isValidCommand(l)}):this.isValidCommand(u)}},{key:"isValidCommand",value:function(a){if(a.options&&a.options.validation===!1)return!0;var s=a.event&&this.map[a.event]||[],u=null;return s.forEach(function(l){var c=0,f=function d(v){var p=l[c];c+=1;try{if(p)p(v,a,d);else{u=v;return}}catch(y){d(y)}};f(u)}),u?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:u}),!1):!0}},{key:"validate",value:function(a){for(var s=this,u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];var f=Array.isArray(a)?a:a.split(/\s+/);return l.forEach(function(d){if(typeof d!="function")throw new Error("".concat(f.join(" ")," requires callback functions."))}),f.forEach(function(d){s.map[d]==null&&(s.map[d]=[]),s.map[d].push(l)}),this}},{key:"dispose",value:function(){this.command.off("add",this.onCommandAdded,this)}}]),e}(nu);Pk([nu.dispose()],i.prototype,"dispose",null),o.Validator=i}(v0||(v0={}));var Wo;(function(o){function i(a){return a==="cell:added"}o.isAddEvent=i;function r(a){return a==="cell:removed"}o.isRemoveEvent=r;function n(a){return a!=null&&a.startsWith("cell:change:")}o.isChangeEvent=n;function e(a){var s=a.graph,u=Hz(a,["graph"]),l=["cell:added","cell:removed","cell:change:*"],c=["batch:start","batch:stop"],f=a.eventNames?a.eventNames.filter(function(d){return!(o.isChangeEvent(d)||l.includes(d)||c.includes(d))}):l;return Object.assign(Object.assign({},u),{eventNames:f,applyOptionsList:a.applyOptionsList||["propertyPath"],revertOptionsList:a.revertOptionsList||["propertyPath"]})}o.getOptions=e;function t(a){for(var s=[],u=0,l=a.length;u<l;u+=1){var c=a[u],f=null;if(o.isAddEvent(c.event)){for(var d=c.data.id,v=0;v<u;v+=1)if(a[v].data.id===d){f=v;break}}f!==null?s.splice(f,0,c):s.push(c)}return s}o.sortBatchCommands=t})(Wo||(Wo={}));var Wz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},ES=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"widgetOptions",get:function(){return this.options.minimap}},{key:"init",value:function(){this.widget=this.graph.hook.createMiniMap()}},{key:"dispose",value:function(){this.widget&&this.widget.dispose()}}]),r}($i);Wz([$i.dispose()],ES.prototype,"dispose",null);var $z=h("imBb"),Xz=h.n($z),Kz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},g0=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;Object(De.a)(this,r),e=i.call(this),e.options=n;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,n.global?e.target=document:(e.target=e.container,e.disabled||e.target.setAttribute("tabindex","-1"),e.graph.on("cell:mouseup",e.focus,Object(Vo.a)(e)),e.graph.on("blank:mouseup",e.focus,Object(Vo.a)(e))),e.mousetrap=r.createMousetrap(Object(Vo.a)(e)),e}return Object(be.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"on",value:function(e,t,a){this.mousetrap.bind(this.getKeys(e),t,a)}},{key:"off",value:function(e,t){this.mousetrap.unbind(this.getKeys(e),t)}},{key:"focus",value:function(e){var t=this.isInputEvent(e.e);if(!t){var a=this.target;a.focus({preventScroll:!0})}}},{key:"getKeys",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(a){return t.formatkey(a)})}},{key:"formatkey",value:function(e){var t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),a=this.options.format;return a?A.call(a,this.graph,t):t}},{key:"isGraphEvent",value:function(e){var t=e.srcElement||e.target,a=e.currentTarget;return t?t===this.target||a===this.target||t===document.body?!0:R.contains(this.container,t):!1}},{key:"isInputEvent",value:function(e){var t,a=e.target,s=(t=a==null?void 0:a.tagName)===null||t===void 0?void 0:t.toLowerCase();return["input","textarea"].includes(s)}},{key:"isEnabledForEvent",value:function(e){var t=!this.disabled&&this.isGraphEvent(e),a=this.isInputEvent(e);if(t){var s=e.keyCode||e.which;if(a&&(s===8||s===46))return!1;if(this.options.guard)return A.call(this.options.guard,this.graph,e)}return t}},{key:"dispose",value:function(){this.mousetrap.reset()}}]),r}(_c);Kz([_c.dispose()],g0.prototype,"dispose",null),function(o){function i(r){var n=new Xz.a(r.target),e=n.stopCallback;return n.stopCallback=function(t,a,s){return r.isEnabledForEvent(t)?e?e.call(n,t,a,s):!1:!0},n}o.createMousetrap=i}(g0||(g0={}));var Yz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},OS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;Object(De.a)(this,r),e=i.call(this),e.options=n,e.cumulatedFactor=1;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,e.target=e.options.global?document:e.container,e.mousewheelHandle=new R.MouseWheelHandle(e.target,e.onMouseWheel.bind(Object(Vo.a)(e)),e.allowMouseWheel.bind(Object(Vo.a)(e))),e.options.enabled&&e.enable(!0),e}return Object(be.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}},{key:"allowMouseWheel",value:function(e){var t=e.originalEvent||e,a=this.options.guard;return(a==null||a.call(this.graph,t))&&Eh.isMatch(t,this.options.modifiers)}},{key:"onMouseWheel",value:function(e){var t=e.originalEvent||e,a=this.options.guard;if((a==null||a.call(this.graph,t))&&Eh.isMatch(t,this.options.modifiers)){var s=this.options.factor||1.2;this.currentScale==null&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx);var u=e.deltaY;u<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*s*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/s)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);var l=this.graph.scroller.widget,c=this.currentScale,f=this.graph.transform.clampScale(c*this.cumulatedFactor),d=this.options.minScale||Number.MIN_SAFE_INTEGER,v=this.options.maxScale||Number.MAX_SAFE_INTEGER;if(f=M.clamp(f,d,v),f!==c)if(l)if(this.options.zoomAtMousePosition){var p=this.graph.coord.clientToLocalPoint(this.startPos);l.zoom(f,{absolute:!0,center:p.clone()})}else l.zoom(f,{absolute:!0});else if(this.options.zoomAtMousePosition){var y=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(f,{absolute:!0,center:y.clone(),ui:!0})}else this.graph.transform.zoom(f,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}}},{key:"dispose",value:function(){this.disable()}}]),r}(_c);Yz([_c.dispose()],OS.prototype,"dispose",null);var Zz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},p0=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"show",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=Object.assign(Object.assign({},r.defaultOptions),t),s=this.createPrintPages(a);a.ready(s,function(u){return e.showPrintWindow(u,a)},{sheetSize:this.getSheetSize(a)})}},{key:"className",get:function(){return this.view.prefixClassName("graph-print")}},{key:"showPrintWindow",value:function(e,t){var a=this;if(e){var s=ln()(document.body),u=ln()(this.view.container),l=this.view.prefixClassName("graph-printing");s.addClass(l);var c=u.children().detach();e.forEach(function(v){v.removeClass("".concat(a.className,"-preview")).addClass("".concat(a.className,"-ready")).appendTo(s)});var f=!1,d=function v(){f||(f=!0,s.removeClass(l),e.forEach(function(p){return p.remove()}),u.append(c),ln()("#".concat(a.styleSheetId)).remove(),a.graph.trigger("after:print",t),ln()(window).off("afterprint",v))};ln()(window).one("afterprint",d),setTimeout(d,200),window.print()}}},{key:"createPrintPage",value:function(e,t){this.graph.trigger("before:print",t);var a=ln()("<div/>").addClass(this.className),s=ln()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&a.addClass("".concat(this.className,"-size-").concat(t.size));var u=ja.create(this.view.svg).clone(),l=u.findOne(".".concat(this.view.prefixClassName("graph-svg-stage")));s.append(u.node);var c=this.getSheetSize(t),f=this.graph.transform.getGraphArea(),d=this.graph.transform.getScale(),v=this.graph.translate(),p=R.createSVGMatrix().translate(v.tx/d.sx,v.ty/d.sy),y=this.getPageInfo(f,e,c),C=y.scale,E=y.bbox;return s.css({left:0,top:0}),u.attr({width:E.width*C,height:E.height*C,style:"position:relative",viewBox:[E.x,E.y,E.width,E.height].join(" ")}),l.attr("transform",R.matrixToTransformString(p)),a.append(s),a.addClass("".concat(this.className,"-preview")),{$page:a,sheetSize:c}}},{key:"createPrintPages",value:function(e){var t=this,a,s=this.getPrintArea(e),u=[];if(e.page){var l=this.getPageSize(s,e.page),c=this.getPageAreas(s,l);c.forEach(function(d){a=t.createPrintPage(d,e),u.push(a.$page)})}else a=this.createPrintPage(s,e),u.push(a.$page);if(a){var f={width:a.sheetSize.cssWidth,height:a.sheetSize.cssHeight};this.updatePrintStyle(f,e)}return u}},{key:"styleSheetId",get:function(){return this.view.prefixClassName("graph-print-style")}},{key:"updatePrintStyle",value:function(e,t){var a=Object.keys(e).reduce(function(v,p){return"".concat(v," ").concat(p,":").concat(e[p],";")},""),s=M.normalizeSides(t.margin),u=t.marginUnit||"",l=t.sheetUnit||"",c=`
      @media print {
        .`.concat(this.className,".").concat(this.className,`-ready {
          `).concat(a,`
        }

        @page {
          margin:
          `).concat([s.top+u,s.right+u,s.bottom+u,s.left+u].join(" "),`;
          size: `).concat(t.sheet.width+l," ").concat(t.sheet.height+l,`;

        .`).concat(this.className,".").concat(this.className,`-preview {
          `).concat(a,`
        }
      }`),f=this.styleSheetId,d=ln()("#".concat(f));d.length?d.html(c):ln()("head").append(`'<style type="text/css" id="`.concat(f,'">').concat(c,"</style>'"))}},{key:"getPrintArea",value:function(e){var t=e.area;if(!t){var a=M.normalizeSides(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-a.left,y:-a.top,width:a.left+a.right,height:a.top+a.bottom})}return t}},{key:"getPageSize",value:function(e,t){if(typeof t=="object"){var a=t,s={width:a.width,height:a.height};return s.width==null&&(s.width=Math.ceil(e.width/(a.columns||1))),s.height==null&&(s.height=Math.ceil(e.height/(a.rows||1))),s}return{width:e.width,height:e.height}}},{key:"getPageAreas",value:function(e,t){for(var a=[],s=t.width,u=t.height,l=0,c=0;l<e.height&&c<200;l+=u,c+=1)for(var f=0,d=0;f<e.width&&d<200;f+=s,d+=1)a.push(new Sr(e.x+f,e.y+l,s,u));return a}},{key:"getSheetSize",value:function(e){var t=e.sheet,a=M.normalizeSides(e.margin),s=e.marginUnit||"",u=e.sheetUnit||"",l="calc(".concat(t.width).concat(u," - ").concat(a.left+a.right).concat(s,")"),c="calc(".concat(t.height).concat(u," - ").concat(a.top+a.bottom).concat(s,")"),f=Lx.measure(l,c);return{cssWidth:l,cssHeight:c,width:f.width,height:f.height}}},{key:"getPageInfo",value:function(e,t,a){var s=new Sr(t.x-e.x,t.y-e.y,t.width,t.height),u=s.width/s.height,l=a.width/a.height;return{bbox:s,scale:l<u?a.width/s.width:a.height/s.height,fitHorizontal:l<u}}},{key:"dispose",value:function(){}}]),r}($i);Zz([$i.dispose()],p0.prototype,"dispose",null),function(o){o.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:function(r,n){return n(r)}}}(p0||(p0={}));var kk=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"toSVG",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.graph.trigger("before:export",a);var s=this.view.svg,u=ja.create(s).clone(),l=u.node,c=u.findOne(".".concat(this.view.prefixClassName("graph-svg-stage"))),f=a.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),d=a.preserveDimensions;if(d){var v=typeof d=="boolean"?f:d;u.attr({width:v.width,height:v.height})}if(u.removeAttribute("style").attr("viewBox",[f.x,f.y,f.width,f.height].join(" ")),c.removeAttribute("transform"),a.copyStyles!==!1){for(var p=s.ownerDocument,y=Array.from(s.querySelectorAll("*")),C=Array.from(l.querySelectorAll("*")),E=p.styleSheets.length,w=[],x=E-1;x>=0;x-=1)w[x]=p.styleSheets[x],p.styleSheets[x].disabled=!0;var N={};y.forEach(function(xe,Ae){var Ye=window.getComputedStyle(xe,null),rt={};Object.keys(Ye).forEach(function(je){rt[je]=Ye.getPropertyValue(je)}),N[Ae]=rt}),E!==p.styleSheets.length&&w.forEach(function(xe,Ae){p.styleSheets[Ae]=xe});for(var j=0;j<E;j+=1)p.styleSheets[j].disabled=!1;var B={};y.forEach(function(xe,Ae){var Ye=window.getComputedStyle(xe,null),rt=N[Ae],je={};Object.keys(Ye).forEach(function(ot){!M.isNumeric(ot)&&Ye.getPropertyValue(ot)!==rt[ot]&&(je[ot]=Ye.getPropertyValue(ot))}),B[Ae]=je}),C.forEach(function(xe,Ae){ln()(xe).css(B[Ae])})}var $=a.stylesheet;if(typeof $=="string"){var Z=s.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection($);u.prepend(ja.create("style",{type:"text/css"},[Z]))}var fe=function(){var Ae=a.beforeSerialize;if(typeof Ae=="function"){var Ye=A.call(Ae,t.graph,l);Ye instanceof SVGSVGElement&&(l=Ye)}var rt=new XMLSerializer().serializeToString(l).replace(/&nbsp;/g,"\xA0");t.graph.trigger("after:export",a),e(rt)};if(a.serializeImages){var de=u.find("image").map(function(xe){return new Promise(function(Ae){var Ye=xe.attr("xlink:href")||xe.attr("href");jx.imageToDataUri(Ye,function(rt,je){!rt&&je&&xe.attr("xlink:href",je),Ae()})})});Promise.all(de).then(fe)}else fe()}},{key:"toDataURL",value:function(e,t){var a=t.viewBox||this.graph.getContentBBox(),s=M.normalizeSides(t.padding);t.width&&t.height&&(s.left+s.right>=t.width&&(s.left=s.right=0),s.top+s.bottom>=t.height&&(s.top=s.bottom=0));var u=new Sr(-s.left,-s.top,s.left+s.right,s.top+s.bottom);if(t.width&&t.height){var l=a.width+s.left+s.right,c=a.height+s.top+s.bottom;u.scale(l/t.width,c/t.height)}a=Sr.create(a).moveAndExpand(u);var f=typeof t.width=="number"&&typeof t.height=="number"?{width:t.width,height:t.height}:a,d=t.ratio?parseFloat(t.ratio):1;(!Number.isFinite(d)||d===0)&&(d=1);var v={width:Math.max(Math.round(f.width*d),1),height:Math.max(Math.round(f.height*d),1)};{var p=document.createElement("canvas"),y=p.getContext("2d");p.width=v.width,p.height=v.height;var C=v.width-1,E=v.height-1;y.fillStyle="rgb(1,1,1)",y.fillRect(C,E,1,1);var w=y.getImageData(C,E,1,1).data;if(w[0]!==1||w[1]!==1||w[2]!==1)throw new Error("size exceeded")}var x=new Image;x.onload=function(){var N=document.createElement("canvas");N.width=v.width,N.height=v.height;var j=N.getContext("2d");j.fillStyle=t.backgroundColor||"white",j.fillRect(0,0,v.width,v.height);try{j.drawImage(x,0,0,v.width,v.height);var B=N.toDataURL(t.type,t.quality);e(B)}catch($){}},this.toSVG(function(N){x.src="data:image/svg+xml,".concat(encodeURIComponent(N))},Object.assign(Object.assign({},t),{viewBox:a,serializeImages:!0,preserveDimensions:Object.assign({},v)}))}},{key:"toPNG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}},{key:"toJPEG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}]),r}($i),Jz=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.widgets=new Map,n}return Object(be.a)(r,[{key:"isSelectionEnabled",get:function(){return this.options.selecting.enabled===!0}},{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var a=this.graph.hook.createKnob(t,{clearAll:!0});a&&this.widgets.set(t,a)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var a=this.graph.hook.createKnob(t,{clearAll:!1});a&&this.widgets.set(t,a)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var a=this.widgets.get(t);a&&a.forEach(function(s){return s.dispose()}),this.widgets.delete(t)}}}]),r}($i),Qz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Dk=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"widgetOptions",get:function(){return this.options.panning}},{key:"pannable",get:function(){return this.widgetOptions&&this.widgetOptions.enabled===!0}},{key:"init",value:function(){this.startListening(),this.updateClassName()}},{key:"startListening",value:function(){var e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new R.MouseWheelHandle(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}},{key:"stopListening",value:function(){var e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}},{key:"preparePanning",value:function(e){var t=e.e;(this.allowPanning(t,!0)||this.allowPanning(t)&&!this.graph.selection.allowRubberband(t,!0))&&this.startPanning(t)}},{key:"allowPanning",value:function(e,t){return this.pannable&&Eh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"startPanning",value:function(e){var t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.view.normalizeEvent(e),a=t.clientX-this.clientX,s=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY;var u=this.graph.transform.getTranslation(),l=u.tx+a,c=u.ty+s;this.graph.transform.translate(l,c,{ui:!0})}},{key:"stopPanning",value:function(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}},{key:"updateClassName",value:function(){var e=this.view.container,t=this.view.prefixClassName("graph-panning"),a=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(R.addClass(e,t),R.removeClass(e,a)):(R.removeClass(e,t),R.addClass(e,a)):(R.removeClass(e,t),R.removeClass(e,a))}},{key:"onRightMouseDown",value:function(e){e.button===2&&this.allowPanning(e,!0)&&this.startPanning(e)}},{key:"allowMouseWheel",value:function(e){return this.pannable&&!e.ctrlKey}},{key:"onMouseWheel",value:function(e,t,a){e.ctrlKey||this.graph.translateBy(-t,-a)}},{key:"autoPanning",value:function(e,t){var a=10,s=this.graph.getGraphArea(),u=0,l=0;e<=s.left+a&&(u=-a),t<=s.top+a&&(l=-a),e>=s.right-a&&(u=a),t>=s.bottom-a&&(l=a),(u!==0||l!==0)&&this.graph.translateBy(-u,-l)}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}},{key:"dispose",value:function(){this.stopListening()}}]),r}($i);Qz([$i.dispose()],Dk.prototype,"dispose",null);var qz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Ik=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"hasScroller",value:function(){return this.graph.scroller.widget!=null}},{key:"getContainer",value:function(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}},{key:"init",value:function(){var e=this,t=this.options.autoResize;if(t){var a=typeof t=="boolean"?this.getContainer():t;c1.bind(a,function(){var s=e.getContainer(),u=s.offsetWidth,l=s.offsetHeight;e.resize(u,l)})}}},{key:"resize",value:function(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}},{key:"resizeGraph",value:function(e,t){this.graph.transform.resize(e,t)}},{key:"resizeScroller",value:function(e,t){this.graph.scroller.resize(e,t)}},{key:"resizePage",value:function(e,t){var a=this.graph.scroller.widget;a&&a.updatePageSize(e,t)}},{key:"dispose",value:function(){c1.clear(this.getContainer())}}]),r}($i);qz([$i.dispose()],Ik.prototype,"dispose",null);var oi=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},eU=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Ja;(function(o){function i(n,e){return function(t,a,s){var u=s.value,l=e||a;s.value=function(){for(var c=this.options[l],f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];if(c!=null){this.getNativeValue=u.bind.apply(u,[this].concat(d));var p=A.call.apply(A,[c,this.graph].concat(d));if(this.getNativeValue=null,p!=null||n===!0&&p===null)return p}return u.call.apply(u,[this].concat(d))}}}o.hook=i;function r(n){return function(e,t,a){var s=a.value,u=n||t;a.value=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];var d=s.call.apply(s,[this].concat(c)),v=this.options[u];return v!=null&&(d=A.call.apply(A,[v,this.graph].concat(c))&&d),d}}}o.after=r})(Ja||(Ja={}));var Qa=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"createModel",value:function(){if(this.options.model)return this.options.model;var e=new Ml;return e.graph=this.graph,e}},{key:"createView",value:function(){return new Ch(this.graph)}},{key:"createRenderer",value:function(){return new Fv(this.graph)}},{key:"createDefsManager",value:function(){return new Mk(this.graph)}},{key:"createGridManager",value:function(){return new pS(this.graph)}},{key:"createCoordManager",value:function(){return new Ak(this.graph)}},{key:"createKnobManager",value:function(){return new Jz(this.graph)}},{key:"createTransform",value:function(e,t){var a=this.getTransformOptions(e);return a.resizable||a.rotatable?new gS(Object.assign(Object.assign({node:e,graph:this.graph},a),t)):(a.clearAll&&gS.removeInstances(this.graph),null)}},{key:"createKnob",value:function(e,t){var a=this,s=Bc.parseOptionGroup(this.graph,e,this.options.knob),u=Object.assign(Object.assign({},s),t);u.clearAll&&dS.removeInstances(this.graph),u.clearAll=!1;var l=e.prop("knob"),c=[],f=Array.isArray(l)?l:[l];return f.forEach(function(d,v){if(d){if(d.enabled===!1||typeof d.enabled=="function"&&d.enabled.call(a.graph,e)===!1)return}else return;s.enabled&&c.push(new dS(Object.assign({node:e,index:v,graph:a.graph},u)))}),c}},{key:"getTransformOptions",value:function(e){var t=Bc.parseOptionGroup(this.graph,e,this.options.resizing),a=Bc.parseOptionGroup(this.graph,e,this.options.rotating),s=Bc.parseOptionGroup(this.graph,e,this.options.transforming),u=Object.assign(Object.assign({},s),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:t.restrict!=null?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:a.enabled,rotateGrid:a.grid});return u}},{key:"createTransformManager",value:function(){return new F1(this.graph)}},{key:"createHighlightManager",value:function(){return new _1(this.graph)}},{key:"createBackgroundManager",value:function(){return new j1(this.graph)}},{key:"createClipboard",value:function(){return new Rk}},{key:"createClipboardManager",value:function(){return new bS(this.graph)}},{key:"createSnapline",value:function(){return new vS(Object.assign({graph:this.graph},this.options.snapline))}},{key:"createSnaplineManager",value:function(){return new mS(this.graph)}},{key:"createSelection",value:function(){return new L1(Object.assign({graph:this.graph},this.options.selecting))}},{key:"createSelectionManager",value:function(){return new CS(this.graph)}},{key:"allowRubberband",value:function(e){return!0}},{key:"createHistoryManager",value:function(){return new v0(Object.assign({graph:this.graph},this.options.history))}},{key:"createScroller",value:function(){return this.options.scroller.enabled?new h0(Object.assign({graph:this.graph},this.options.scroller)):null}},{key:"createScrollerManager",value:function(){return new yS(this.graph)}},{key:"allowPanning",value:function(e){return!0}},{key:"createMiniMap",value:function(){var e=this.options.minimap,t=e.enabled,a=eU(e,["enabled"]);return t?new hS(Object.assign({graph:this.graph},a)):null}},{key:"createMiniMapManager",value:function(){return new ES(this.graph)}},{key:"createKeyboard",value:function(){return new g0(Object.assign({graph:this.graph},this.options.keyboard))}},{key:"createMouseWheel",value:function(){return new OS(Object.assign({graph:this.graph},this.options.mousewheel))}},{key:"createPrintManager",value:function(){return new p0(this.graph)}},{key:"createFormatManager",value:function(){return new kk(this.graph)}},{key:"createPanningManager",value:function(){return new Dk(this.graph)}},{key:"createSizeManager",value:function(){return new Ik(this.graph)}},{key:"allowConnectToBlank",value:function(e){var t=this.options.connecting,a=t.allowBlank!=null?t.allowBlank:t.dangling;if(typeof a!="function")return!!a;var s=this.graph.findViewByCell(e),u=e.getSourceCell(),l=e.getTargetCell(),c=this.graph.findViewByCell(u),f=this.graph.findViewByCell(l);return A.call(a,this.graph,{edge:e,edgeView:s,sourceCell:u,targetCell:l,sourceView:c,targetView:f,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:s.sourceMagnet,targetMagnet:s.targetMagnet})}},{key:"validateEdge",value:function(e,t,a){if(!this.allowConnectToBlank(e)){var s=e.getSourceCellId(),u=e.getTargetCellId();if(!(s&&u))return!1}var l=this.options.connecting.validateEdge;return l?A.call(l,this.graph,{edge:e,type:t,previous:a}):!0}},{key:"validateMagnet",value:function(e,t,a){if(t.getAttribute("magnet")!=="passive"){var s=this.options.connecting.validateMagnet;return s?A.call(s,this.graph,{e:a,magnet:t,view:e,cell:e.cell}):!0}return!1}},{key:"getDefaultEdge",value:function(e,t){var a,s=this.options.connecting.createEdge;return s&&(a=A.call(s,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),a==null&&(a=new fS),a}},{key:"validateConnection",value:function(e,t,a,s,u,l,c){var f=this,d=this.options.connecting,v=d.allowLoop,p=d.allowNode,y=d.allowEdge,C=d.allowPort,E=d.allowMulti!=null?d.allowMulti:d.multi,w=d.validateConnection,x=l?l.cell:null,N=u==="target"?a:e,j=u==="target"?s:t,B=!0,$=function(ot){var Ft=u==="source"?c?c.port:null:x?x.getSourcePortId():null,hn=u==="target"?c?c.port:null:x?x.getTargetPortId():null;return A.call(ot,f.graph,{edge:x,edgeView:l,sourceView:e,targetView:a,sourcePort:Ft,targetPort:hn,sourceMagnet:t,targetMagnet:s,sourceCell:e?e.cell:null,targetCell:a?a.cell:null,type:u})};if(v!=null&&(typeof v=="boolean"?!v&&e===a&&(B=!1):B=$(v)),B&&C!=null&&(typeof C=="boolean"?!C&&j&&(B=!1):B=$(C)),B&&y!=null&&(typeof y=="boolean"?!y&&Lv.isEdgeView(N)&&(B=!1):B=$(y)),B&&p!=null&&j==null&&(typeof p=="boolean"?!p&&Ss.isNodeView(N)&&(B=!1):B=$(p)),B&&E!=null&&l){var Z=l.cell,fe=u==="source"?c:Z.getSource(),de=u==="target"?c:Z.getTarget(),xe=c?this.graph.getCellById(c.cell):null;if(fe&&de&&fe.cell&&de.cell&&xe)if(typeof E=="function")B=$(E);else{var Ae=this.model.getConnectedEdges(xe,{outgoing:u==="source",incoming:u==="target"});if(Ae.length){if(E==="withPort"){var Ye=Ae.some(function(je){var ot=je.getSource(),Ft=je.getTarget();return ot&&Ft&&ot.cell===fe.cell&&Ft.cell===de.cell&&ot.port!=null&&ot.port===fe.port&&Ft.port!=null&&Ft.port===de.port});Ye&&(B=!1)}else if(!E){var rt=Ae.some(function(je){var ot=je.getSource(),Ft=je.getTarget();return ot&&Ft&&ot.cell===fe.cell&&Ft.cell===de.cell});rt&&(B=!1)}}}}return B&&w!=null&&(B=$(w)),B}},{key:"getRestrictArea",value:function(e){var t=this.options.translating.restrict,a=typeof t=="function"?A.call(t,this.graph,e):t;return typeof a=="number"?this.graph.transform.getGraphArea().inflate(a):a===!0?this.graph.transform.getGraphArea():a||null}},{key:"onViewUpdated",value:function(e,t,a){t&Fv.FLAG_INSERT||a.mounting||this.graph.renderer.requestConnectedEdgesUpdate(e,a)}},{key:"onViewPostponed",value:function(e,t,a){return this.graph.renderer.forcePostponedViewUpdate(e,t)}},{key:"getCellView",value:function(e){return null}},{key:"createCellView",value:function(e){var t={graph:this.graph},a=this.getCellView(e);if(a)return new a(e,t);var s=e.view;if(s!=null&&typeof s=="string"){var u=Ho.registry.get(s);return u?new u(e,t):Ho.registry.onNotFound(s)}return e.isNode()?new Ss(e,t):e.isEdge()?new Lv(e,t):null}},{key:"getHTMLComponent",value:function(e){var t=e.getHTML();return typeof t=="string"&&(t=Fc.componentRegistry.get(t)||t),m.isPlainObject(t)&&(t=t.render),typeof t=="function"?A.call(t,this.graph,e):t}},{key:"shouldUpdateHTMLComponent",value:function(e){var t=e.getHTML();if(typeof t=="string"&&(t=Fc.componentRegistry.get(t)||t),m.isPlainObject(t)){var a=t.shouldComponentUpdate;return typeof a=="function"?A.call(a,this.graph,e):!!a}return!1}},{key:"onEdgeLabelRendered",value:function(e){}},{key:"onPortRendered",value:function(e){}},{key:"onToolItemCreated",value:function(e){}}]),r}($i);oi([Ja.hook()],Qa.prototype,"createModel",null),oi([Ja.hook()],Qa.prototype,"createView",null),oi([Ja.hook()],Qa.prototype,"createRenderer",null),oi([Ja.hook()],Qa.prototype,"createDefsManager",null),oi([Ja.hook()],Qa.prototype,"createGridManager",null),oi([Ja.hook()],Qa.prototype,"createCoordManager",null),oi([Ja.hook()],Qa.prototype,"createKnobManager",null),oi([Ja.hook()],Qa.prototype,"createTransform",null),oi([Ja.hook()],Qa.prototype,"createKnob",null),oi([Ja.hook()],Qa.prototype,"createTransformManager",null),oi([Ja.hook()],Qa.prototype,"createHighlightManager",null),oi([Ja.hook()],Qa.prototype,"createBackgroundManager",null),oi([Ja.hook()],Qa.prototype,"createClipboard",null),oi([Ja.hook()],Qa.prototype,"createClipboardManager",null),oi([Ja.hook()],Qa.prototype,"createSnapline",null),oi([Ja.hook()],Qa.prototype,"createSnaplineManager",null),oi([Ja.hook()],Qa.prototype,"createSelection",null),oi([Ja.hook()],Qa.prototype,"createSelectionManager",null),oi([Ja.hook()],Qa.prototype,"allowRubberband",null),oi([Ja.hook()],Qa.prototype,"createHistoryManager",null),oi([Ja.hook()],Qa.prototype,"createScroller",null),oi([Ja.hook()],Qa.prototype,"createScrollerManager",null),oi([Ja.hook()],Qa.prototype,"allowPanning",null),oi([Ja.hook()],Qa.prototype,"createMiniMap",null),oi([Ja.hook()],Qa.prototype,"createMiniMapManager",null),oi([Ja.hook()],Qa.prototype,"createKeyboard",null),oi([Ja.hook()],Qa.prototype,"createMouseWheel",null),oi([Ja.hook()],Qa.prototype,"createPrintManager",null),oi([Ja.hook()],Qa.prototype,"createFormatManager",null),oi([Ja.hook()],Qa.prototype,"createPanningManager",null),oi([Ja.hook()],Qa.prototype,"createSizeManager",null),oi([Ja.after()],Qa.prototype,"onViewUpdated",null),oi([Ja.after()],Qa.prototype,"onViewPostponed",null),oi([Ja.hook()],Qa.prototype,"getCellView",null),oi([Ja.hook(!0)],Qa.prototype,"createCellView",null),oi([Ja.hook()],Qa.prototype,"getHTMLComponent",null),oi([Ja.hook()],Qa.prototype,"shouldUpdateHTMLComponent",null),oi([Ja.hook()],Qa.prototype,"onEdgeLabelRendered",null),oi([Ja.hook()],Qa.prototype,"onPortRendered",null),oi([Ja.hook()],Qa.prototype,"onToolItemCreated",null);var Gc=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},fi=function(o,i){Object(or.a)(n,o);var r=Object(sr.a)(n);function n(e){var t;return Object(De.a)(this,n),t=r.call(this),t.options=Bc.get(e),t.css=new l0(Object(Vo.a)(t)),t.hook=new Qa(Object(Vo.a)(t)),t.view=t.hook.createView(),t.defs=t.hook.createDefsManager(),t.coord=t.hook.createCoordManager(),t.transform=t.hook.createTransformManager(),t.knob=t.hook.createKnobManager(),t.highlight=t.hook.createHighlightManager(),t.grid=t.hook.createGridManager(),t.background=t.hook.createBackgroundManager(),t.model=t.hook.createModel(),t.renderer=t.hook.createRenderer(),t.clipboard=t.hook.createClipboardManager(),t.snapline=t.hook.createSnaplineManager(),t.selection=t.hook.createSelectionManager(),t.history=t.hook.createHistoryManager(),t.scroller=t.hook.createScrollerManager(),t.minimap=t.hook.createMiniMapManager(),t.keyboard=t.hook.createKeyboard(),t.mousewheel=t.hook.createMouseWheel(),t.print=t.hook.createPrintManager(),t.format=t.hook.createFormatManager(),t.panning=t.hook.createPanningManager(),t.size=t.hook.createSizeManager(),t}return Object(be.a)(n,[{key:"container",get:function(){return this.view.container}},{key:i,get:function(){return n.toStringTag}},{key:"isNode",value:function(t){return t.isNode()}},{key:"isEdge",value:function(t){return t.isEdge()}},{key:"resetCells",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.resetCells(t,a),this}},{key:"clearCells",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.clear(t),this}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.toJSON(t)}},{key:"parseJSON",value:function(t){return this.model.parseJSON(t)}},{key:"fromJSON",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.fromJSON(t,a),this}},{key:"getCellById",value:function(t){return this.model.getCell(t)}},{key:"addNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addNode(t,a)}},{key:"addNodes",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addCell(t.map(function(u){return Wi.isNode(u)?u:a.createNode(u)}),s)}},{key:"createNode",value:function(t){return this.model.createNode(t)}},{key:"removeNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(t,a)}},{key:"addEdge",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addEdge(t,a)}},{key:"addEdges",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addCell(t.map(function(u){return Co.isEdge(u)?u:a.createEdge(u)}),s)}},{key:"removeEdge",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(t,a)}},{key:"createEdge",value:function(t){return this.model.createEdge(t)}},{key:"addCell",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addCell(t,a),this}},{key:"removeCell",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(t,a)}},{key:"removeCells",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCells(t,a)}},{key:"removeConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeConnectedEdges(t,a)}},{key:"disconnectConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.disconnectConnectedEdges(t,a),this}},{key:"hasCell",value:function(t){return this.model.has(t)}},{key:"getCell",value:function(t){return this.model.getCell(t)}},{key:"getCells",value:function(){return this.model.getCells()}},{key:"getCellCount",value:function(){return this.model.total()}},{key:"getNodes",value:function(){return this.model.getNodes()}},{key:"getEdges",value:function(){return this.model.getEdges()}},{key:"getOutgoingEdges",value:function(t){return this.model.getOutgoingEdges(t)}},{key:"getIncomingEdges",value:function(t){return this.model.getIncomingEdges(t)}},{key:"getConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getConnectedEdges(t,a)}},{key:"getRootNodes",value:function(){return this.model.getRoots()}},{key:"getLeafNodes",value:function(){return this.model.getLeafs()}},{key:"isRootNode",value:function(t){return this.model.isRoot(t)}},{key:"isLeafNode",value:function(t){return this.model.isLeaf(t)}},{key:"getNeighbors",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNeighbors(t,a)}},{key:"isNeighbor",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isNeighbor(t,a,s)}},{key:"getSuccessors",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSuccessors(t,a)}},{key:"isSuccessor",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isSuccessor(t,a,s)}},{key:"getPredecessors",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getPredecessors(t,a)}},{key:"isPredecessor",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isPredecessor(t,a,s)}},{key:"getCommonAncestor",value:function(){var t;return(t=this.model).getCommonAncestor.apply(t,arguments)}},{key:"getSubGraph",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSubGraph(t,a)}},{key:"cloneSubGraph",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.cloneSubGraph(t,a)}},{key:"cloneCells",value:function(t){return this.model.cloneCells(t)}},{key:"getNodesFromPoint",value:function(t,a){return this.model.getNodesFromPoint(t,a)}},{key:"getNodesInArea",value:function(t,a,s,u,l){return this.model.getNodesInArea(t,a,s,u,l)}},{key:"getNodesUnderNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNodesUnderNode(t,a)}},{key:"searchCell",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.search(t,a,s),this}},{key:"getShortestPath",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.getShortestPath(t,a,s)}},{key:"getAllCellsBBox",value:function(){return this.model.getAllCellsBBox()}},{key:"getCellsBBox",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getCellsBBox(t,a)}},{key:"startBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.startBatch(t,a)}},{key:"stopBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.stopBatch(t,a)}},{key:"batchUpdate",value:function(t,a,s){var u=typeof t=="string"?t:"update",l=typeof t=="string"?a:t,c=typeof a=="function"?s:a;this.startBatch(u,c);var f=l();return this.stopBatch(u,c),f}},{key:"updateCellId",value:function(t,a){return this.model.updateCellId(t,a)}},{key:"isFrozen",value:function(){return this.renderer.isFrozen()}},{key:"freeze",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.freeze(t),this}},{key:"unfreeze",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.unfreeze(t),this}},{key:"isAsync",value:function(){return this.renderer.isAsync()}},{key:"setAsync",value:function(t){return this.renderer.setAsync(t),this}},{key:"findView",value:function(t){return pi.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)}},{key:"findViews",value:function(t){return Sr.isRectangleLike(t)?this.findViewsInArea(t):mt.isPointLike(t)?this.findViewsFromPoint(t):[]}},{key:"findViewByCell",value:function(t){return this.renderer.findViewByCell(t)}},{key:"findViewByElem",value:function(t){return this.renderer.findViewByElem(t)}},{key:"findViewsFromPoint",value:function(t,a){var s=typeof t=="number"?{x:t,y:a}:t;return this.renderer.findViewsFromPoint(s)}},{key:"findViewsInArea",value:function(t,a,s,u,l){var c=typeof t=="number"?{x:t,y:a,width:s,height:u}:t,f=typeof t=="number"?l:a;return this.renderer.findViewsInArea(c,f)}},{key:"isViewMounted",value:function(t){return this.renderer.isViewMounted(t)}},{key:"getMountedViews",value:function(){return this.renderer.getMountedViews()}},{key:"getUnmountedViews",value:function(){return this.renderer.getUnmountedViews()}},{key:"matrix",value:function(t){return typeof t=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(t),this)}},{key:"resize",value:function(t,a){return this.size.resize(t,a),this}},{key:"resizeGraph",value:function(t,a){return this.size.resizeGraph(t,a),this}},{key:"resizeScroller",value:function(t,a){return this.size.resizeScroller(t,a),this}},{key:"resizePage",value:function(t,a){return this.size.resizePage(t,a),this}},{key:"scale",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return typeof t=="undefined"?this.transform.getScale():(this.transform.scale(t,a,s,u),this)}},{key:"zoom",value:function(t,a){var s=this.scroller.widget;if(s){if(typeof t=="undefined")return s.zoom();s.zoom(t,a)}else{if(typeof t=="undefined")return this.transform.getZoom();this.transform.zoom(t,a)}return this}},{key:"zoomTo",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.scroller.widget;return s?s.zoom(t,Object.assign(Object.assign({},a),{absolute:!0})):this.transform.zoom(t,Object.assign(Object.assign({},a),{absolute:!0})),this}},{key:"zoomToRect",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.scroller.widget;return s?s.zoomToRect(t,a):this.transform.zoomToRect(t,a),this}},{key:"zoomToFit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.scroller.widget;return a?a.zoomToFit(t):this.transform.zoomToFit(t),this}},{key:"rotate",value:function(t,a,s){return typeof t=="undefined"?this.transform.getRotation():(this.transform.rotate(t,a,s),this)}},{key:"translate",value:function(t,a){return typeof t=="undefined"?this.transform.getTranslation():(this.transform.translate(t,a),this)}},{key:"translateBy",value:function(t,a){var s=this.translate(),u=s.tx+t,l=s.ty+a;return this.translate(u,l)}},{key:"getArea",value:function(){return this.transform.getGraphArea()}},{key:"getGraphArea",value:function(){return this.transform.getGraphArea()}},{key:"getContentArea",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentArea(t)}},{key:"getContentBBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentBBox(t)}},{key:"fitToContent",value:function(t,a,s,u){return this.transform.fitToContent(t,a,s,u)}},{key:"scaleContentToFit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.scaleContentToFit(t),this}},{key:"center",value:function(t){return this.centerPoint(t)}},{key:"centerPoint",value:function(t,a,s){var u=this.scroller.widget;return u?u.centerPoint(t,a,s):this.transform.centerPoint(t,a),this}},{key:"centerContent",value:function(t){var a=this.scroller.widget;return a?a.centerContent(t):this.transform.centerContent(t),this}},{key:"centerCell",value:function(t,a){var s=this.scroller.widget;return s?s.centerCell(t,a):this.transform.centerCell(t),this}},{key:"positionPoint",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.scroller.widget;return l?l.positionPoint(t,a,s,u):this.transform.positionPoint(t,a,s),this}},{key:"positionRect",value:function(t,a,s){var u=this.scroller.widget;return u?u.positionRect(t,a,s):this.transform.positionRect(t,a),this}},{key:"positionCell",value:function(t,a,s){var u=this.scroller.widget;return u?u.positionCell(t,a,s):this.transform.positionCell(t,a),this}},{key:"positionContent",value:function(t,a){var s=this.scroller.widget;return s?s.positionContent(t,a):this.transform.positionContent(t,a),this}},{key:"getClientMatrix",value:function(){return this.coord.getClientMatrix()}},{key:"getClientOffset",value:function(){return this.coord.getClientOffset()}},{key:"getPageOffset",value:function(){return this.coord.getPageOffset()}},{key:"snapToGrid",value:function(t,a){return this.coord.snapToGrid(t,a)}},{key:"pageToLocal",value:function(t,a,s,u){return Sr.isRectangleLike(t)?this.coord.pageToLocalRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.pageToLocalRect(t,a,s,u):this.coord.pageToLocalPoint(t,a)}},{key:"localToPage",value:function(t,a,s,u){return Sr.isRectangleLike(t)?this.coord.localToPageRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.localToPageRect(t,a,s,u):this.coord.localToPagePoint(t,a)}},{key:"clientToLocal",value:function(t,a,s,u){return Sr.isRectangleLike(t)?this.coord.clientToLocalRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.clientToLocalRect(t,a,s,u):this.coord.clientToLocalPoint(t,a)}},{key:"localToClient",value:function(t,a,s,u){return Sr.isRectangleLike(t)?this.coord.localToClientRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.localToClientRect(t,a,s,u):this.coord.localToClientPoint(t,a)}},{key:"localToGraph",value:function(t,a,s,u){return Sr.isRectangleLike(t)?this.coord.localToGraphRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.localToGraphRect(t,a,s,u):this.coord.localToGraphPoint(t,a)}},{key:"graphToLocal",value:function(t,a,s,u){return Sr.isRectangleLike(t)?this.coord.graphToLocalRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.graphToLocalRect(t,a,s,u):this.coord.graphToLocalPoint(t,a)}},{key:"clientToGraph",value:function(t,a,s,u){return Sr.isRectangleLike(t)?this.coord.clientToGraphRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.clientToGraphRect(t,a,s,u):this.coord.clientToGraphPoint(t,a)}},{key:"defineFilter",value:function(t){return this.defs.filter(t)}},{key:"defineGradient",value:function(t){return this.defs.gradient(t)}},{key:"defineMarker",value:function(t){return this.defs.marker(t)}},{key:"getGridSize",value:function(){return this.grid.getGridSize()}},{key:"setGridSize",value:function(t){return this.grid.setGridSize(t),this}},{key:"showGrid",value:function(){return this.grid.show(),this}},{key:"hideGrid",value:function(){return this.grid.hide(),this}},{key:"clearGrid",value:function(){return this.grid.clear(),this}},{key:"drawGrid",value:function(t){return this.grid.draw(t),this}},{key:"updateBackground",value:function(){return this.background.update(),this}},{key:"drawBackground",value:function(t,a){var s=this.scroller.widget;return s!=null&&(this.options.background==null||!a)?s.backgroundManager.draw(t):this.background.draw(t),this}},{key:"clearBackground",value:function(t){var a=this.scroller.widget;return a!=null&&(this.options.background==null||!t)?a.backgroundManager.clear():this.background.clear(),this}},{key:"isClipboardEnabled",value:function(){return!this.clipboard.disabled}},{key:"enableClipboard",value:function(){return this.clipboard.enable(),this}},{key:"disableClipboard",value:function(){return this.clipboard.disable(),this}},{key:"toggleClipboard",value:function(t){return t!=null?t!==this.isClipboardEnabled()&&(t?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}},{key:"isClipboardEmpty",value:function(){return this.clipboard.isEmpty()}},{key:"getCellsInClipboard",value:function(){return this.clipboard.cells}},{key:"cleanClipboard",value:function(){return this.clipboard.clean(),this}},{key:"copy",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.copy(t,a),this}},{key:"cut",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.cut(t,a),this}},{key:"paste",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;return this.clipboard.paste(t,a)}},{key:"isHistoryEnabled",value:function(){return!this.history.disabled}},{key:"enableHistory",value:function(){return this.history.enable(),this}},{key:"disableHistory",value:function(){return this.history.disable(),this}},{key:"toggleHistory",value:function(t){return t!=null?t!==this.isHistoryEnabled()&&(t?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}},{key:"undo",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.undo(t),this}},{key:"undoAndCancel",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.cancel(t),this}},{key:"redo",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.redo(t),this}},{key:"canUndo",value:function(){return this.history.canUndo()}},{key:"canRedo",value:function(){return this.history.canRedo()}},{key:"cleanHistory",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.history.clean(t)}},{key:"isKeyboardEnabled",value:function(){return!this.keyboard.disabled}},{key:"enableKeyboard",value:function(){return this.keyboard.enable(),this}},{key:"disableKeyboard",value:function(){return this.keyboard.disable(),this}},{key:"toggleKeyboard",value:function(t){return t!=null?t!==this.isKeyboardEnabled()&&(t?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}},{key:"bindKey",value:function(t,a,s){return this.keyboard.on(t,a,s),this}},{key:"unbindKey",value:function(t,a){return this.keyboard.off(t,a),this}},{key:"isMouseWheelEnabled",value:function(){return!this.mousewheel.disabled}},{key:"enableMouseWheel",value:function(){return this.mousewheel.enable(),this}},{key:"disableMouseWheel",value:function(){return this.mousewheel.disable(),this}},{key:"toggleMouseWheel",value:function(t){return t==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this}},{key:"isPannable",value:function(){var t=this.scroller.widget;return t?this.scroller.pannable:this.panning.pannable}},{key:"enablePanning",value:function(){var t=this.scroller.widget;return t?this.scroller.enablePanning():this.panning.enablePanning(),this}},{key:"disablePanning",value:function(){var t=this.scroller.widget;return t?this.scroller.disablePanning():this.panning.disablePanning(),this}},{key:"togglePanning",value:function(t){return t==null?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}},{key:"lockScroller",value:function(){var t;(t=this.scroller.widget)===null||t===void 0||t.lock()}},{key:"unlockScroller",value:function(){var t;(t=this.scroller.widget)===null||t===void 0||t.unlock()}},{key:"updateScroller",value:function(){var t;(t=this.scroller.widget)===null||t===void 0||t.update()}},{key:"getScrollbarPosition",value:function(){var t=this.scroller.widget;return t.scrollbarPosition()}},{key:"setScrollbarPosition",value:function(t,a,s){var u=this.scroller.widget;return u.scrollbarPosition(t,a,s),this}},{key:"scrollToPoint",value:function(t,a,s){var u=this.scroller.widget;return u.scrollToPoint(t,a,s),this}},{key:"scrollToContent",value:function(t){var a=this.scroller.widget;return a.scrollToContent(t),this}},{key:"scrollToCell",value:function(t,a){var s=this.scroller.widget;return s.scrollToCell(t,a),this}},{key:"transitionToPoint",value:function(t,a,s){var u=this.scroller.widget;return u.transitionToPoint(t,a,s),this}},{key:"transitionToRect",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.scroller.widget;return s.transitionToRect(t,a),this}},{key:"isSelectionEnabled",value:function(){return!this.selection.disabled}},{key:"enableSelection",value:function(){return this.selection.enable(),this}},{key:"disableSelection",value:function(){return this.selection.disable(),this}},{key:"toggleSelection",value:function(t){return t!=null?t!==this.isSelectionEnabled()&&(t?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}},{key:"isMultipleSelection",value:function(){return this.selection.isMultiple()}},{key:"enableMultipleSelection",value:function(){return this.selection.enableMultiple(),this}},{key:"disableMultipleSelection",value:function(){return this.selection.disableMultiple(),this}},{key:"toggleMultipleSelection",value:function(t){return t!=null?t!==this.isMultipleSelection()&&(t?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}},{key:"isSelectionMovable",value:function(){return this.selection.widget.options.movable!==!1}},{key:"enableSelectionMovable",value:function(){return this.selection.widget.options.movable=!0,this}},{key:"disableSelectionMovable",value:function(){return this.selection.widget.options.movable=!1,this}},{key:"toggleSelectionMovable",value:function(t){return t!=null?t!==this.isSelectionMovable()&&(t?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}},{key:"isRubberbandEnabled",value:function(){return!this.selection.rubberbandDisabled}},{key:"enableRubberband",value:function(){return this.selection.enableRubberband(),this}},{key:"disableRubberband",value:function(){return this.selection.disableRubberband(),this}},{key:"toggleRubberband",value:function(t){return t!=null?t!==this.isRubberbandEnabled()&&(t?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}},{key:"isStrictRubberband",value:function(){return this.selection.widget.options.strict===!0}},{key:"enableStrictRubberband",value:function(){return this.selection.widget.options.strict=!0,this}},{key:"disableStrictRubberband",value:function(){return this.selection.widget.options.strict=!1,this}},{key:"toggleStrictRubberband",value:function(t){return t!=null?t!==this.isStrictRubberband()&&(t?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}},{key:"setRubberbandModifiers",value:function(t){this.selection.setModifiers(t)}},{key:"setSelectionFilter",value:function(t){return this.selection.setFilter(t),this}},{key:"setSelectionDisplayContent",value:function(t){return this.selection.setContent(t),this}},{key:"isSelectionEmpty",value:function(){return this.selection.isEmpty()}},{key:"cleanSelection",value:function(t){return this.selection.clean(t),this}},{key:"resetSelection",value:function(t,a){return this.selection.reset(t,a),this}},{key:"getSelectedCells",value:function(){return this.selection.cells}},{key:"getSelectedCellCount",value:function(){return this.selection.length}},{key:"isSelected",value:function(t){return this.selection.isSelected(t)}},{key:"select",value:function(t,a){return this.selection.select(t,a),this}},{key:"unselect",value:function(t,a){return this.selection.unselect(t,a),this}},{key:"isSnaplineEnabled",value:function(){return!this.snapline.widget.disabled}},{key:"enableSnapline",value:function(){return this.snapline.widget.enable(),this}},{key:"disableSnapline",value:function(){return this.snapline.widget.disable(),this}},{key:"toggleSnapline",value:function(t){if(t!=null)t!==this.isSnaplineEnabled()&&(t?this.enableSnapline():this.disableSnapline());else return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this}},{key:"hideSnapline",value:function(){return this.snapline.widget.hide(),this}},{key:"setSnaplineFilter",value:function(t){return this.snapline.widget.setFilter(t),this}},{key:"isSnaplineOnResizingEnabled",value:function(){return this.snapline.widget.options.resizing===!0}},{key:"enableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!0,this}},{key:"disableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!1,this}},{key:"toggleSnaplineOnResizing",value:function(t){return t!=null?t!==this.isSnaplineOnResizingEnabled()&&(t?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}},{key:"isSharpSnapline",value:function(){return this.snapline.widget.options.sharp===!0}},{key:"enableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!0,this}},{key:"disableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!1,this}},{key:"toggleSharpSnapline",value:function(t){return t!=null?t!==this.isSharpSnapline()&&(t?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}},{key:"getSnaplineTolerance",value:function(){return this.snapline.widget.options.tolerance}},{key:"setSnaplineTolerance",value:function(t){return this.snapline.widget.options.tolerance=t,this}},{key:"removeTools",value:function(){return this.emit("tools:remove"),this}},{key:"hideTools",value:function(){return this.emit("tools:hide"),this}},{key:"showTools",value:function(){return this.emit("tools:show"),this}},{key:"toSVG",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toSVG(t,a)}},{key:"toDataURL",value:function(t,a){this.format.toDataURL(t,a)}},{key:"toPNG",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toPNG(t,a)}},{key:"toJPEG",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toJPEG(t,a)}},{key:"printPreview",value:function(t){this.print.show(t)}},{key:"dispose",value:function(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}}]),n}(nu,Symbol.toStringTag);Gc([ql.checkScroller()],fi.prototype,"lockScroller",null),Gc([ql.checkScroller()],fi.prototype,"unlockScroller",null),Gc([ql.checkScroller()],fi.prototype,"updateScroller",null),Gc([ql.checkScroller()],fi.prototype,"getScrollbarPosition",null),Gc([ql.checkScroller()],fi.prototype,"setScrollbarPosition",null),Gc([ql.checkScroller()],fi.prototype,"scrollToPoint",null),Gc([ql.checkScroller()],fi.prototype,"scrollToContent",null),Gc([ql.checkScroller()],fi.prototype,"scrollToCell",null),Gc([ql.checkScroller()],fi.prototype,"transitionToPoint",null),Gc([ql.checkScroller()],fi.prototype,"transitionToRect",null),Gc([nu.dispose()],fi.prototype,"dispose",null),function(o){o.View=Ch,o.Hook=Qa,o.Renderer=Fv,o.Keyboard=g0,o.MouseWheel=OS,o.BaseManager=$i,o.DefsManager=Mk,o.GridManager=pS,o.CoordManager=Ak,o.PrintManager=p0,o.FormatManager=kk,o.MiniMapManager=ES,o.HistoryManager=v0,o.SnaplineManager=mS,o.ScrollerManager=yS,o.ClipboardManager=bS,o.TransformManager=F1,o.HighlightManager=_1,o.BackgroundManager=j1,o.SelectionManager=CS}(fi||(fi={})),function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&e.hook!=null&&e.view!=null&&e.model!=null}o.isGraph=i}(fi||(fi={})),function(o){function i(r,n){var e=r instanceof HTMLElement?new o({container:r}):new o(r);return n!=null&&e.fromJSON(n),e}o.render=i}(fi||(fi={})),function(o){o.registerNode=Wi.registry.register,o.registerEdge=Co.registry.register,o.registerView=Ho.registry.register,o.registerAttr=Lc.registry.register,o.registerGrid=Cd.registry.register,o.registerFilter=Tv.registry.register,o.registerNodeTool=Dv.registry.register,o.registerEdgeTool=Iv.registry.register,o.registerBackground=Jg.registry.register,o.registerHighlighter=Pf.registry.register,o.registerPortLayout=gh.registry.register,o.registerPortLabelLayout=Mv.registry.register,o.registerMarker=bd.registry.register,o.registerRouter=Od.registry.register,o.registerConnector=bh.registry.register,o.registerAnchor=Rv.registry.register,o.registerEdgeAnchor=Nv.registry.register,o.registerConnectionPoint=jv.registry.register,o.registerConnectionStrategy=kv.registry.register,o.registerHTMLComponent=Fc.componentRegistry.register}(fi||(fi={})),function(o){o.unregisterNode=Wi.registry.unregister,o.unregisterEdge=Co.registry.unregister,o.unregisterView=Ho.registry.unregister,o.unregisterAttr=Lc.registry.unregister,o.unregisterGrid=Cd.registry.unregister,o.unregisterFilter=Tv.registry.unregister,o.unregisterNodeTool=Dv.registry.unregister,o.unregisterEdgeTool=Iv.registry.unregister,o.unregisterBackground=Jg.registry.unregister,o.unregisterHighlighter=Pf.registry.unregister,o.unregisterPortLayout=gh.registry.unregister,o.unregisterPortLabelLayout=Mv.registry.unregister,o.unregisterMarker=bd.registry.unregister,o.unregisterRouter=Od.registry.unregister,o.unregisterConnector=bh.registry.unregister,o.unregisterAnchor=Rv.registry.unregister,o.unregisterEdgeAnchor=Nv.registry.unregister,o.unregisterConnectionPoint=jv.registry.unregister,o.unregisterConnectionStrategy=kv.registry.unregister,o.unregisterHTMLComponent=Fc.componentRegistry.unregister}(fi||(fi={}));var Rk=function(){function o(){Object(De.a)(this,o),this.cells=[]}return Object(be.a)(o,[{key:"copy",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.options=Object.assign({},e);var t=Ml.isModel(n)?n:n.model,a=t.cloneSubGraph(r,e);this.cells=I.sortBy(Object.keys(a).map(function(s){return a[s]}),function(s){return s.isEdge()?2:1}),this.serialize(e)}},{key:"cut",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.copy(r,n,e);var t=fi.isGraph(n)?n.model:n;t.batchUpdate("cut",function(){r.forEach(function(a){return a.remove()})})}},{key:"paste",value:function(r){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Object.assign(Object.assign({},this.options),e),a=t.offset,s=t.edgeProps,u=t.nodeProps,l=20,c=20;a&&(l=typeof a=="number"?a:a.dx,c=typeof a=="number"?a:a.dy),this.deserialize(t);var f=this.cells;f.forEach(function(v){v.model=null,v.removeProp("zIndex"),(l||c)&&v.translate(l,c),u&&v.isNode()&&v.prop(u),s&&v.isEdge()&&v.prop(s)});var d=fi.isGraph(r)?r.model:r;return d.batchUpdate("paste",function(){d.addCells(n.cells)}),this.copy(f,r,e),f}},{key:"serialize",value:function(r){r.useLocalStorage!==!1&&m0.save(this.cells)}},{key:"deserialize",value:function(r){if(r.useLocalStorage){var n=m0.fetch();n&&(this.cells=n)}}},{key:"isEmpty",value:function(){return this.cells.length<=0}},{key:"clean",value:function(){this.options={},this.cells=[],m0.clean()}}]),o}(),m0;(function(o){var i="".concat(Tl.prefixCls,".clipboard.cells");function r(t){if(window.localStorage){var a=t.map(function(s){return s.toJSON()});localStorage.setItem(i,JSON.stringify(a))}}o.save=r;function n(){if(window.localStorage){var t=localStorage.getItem(i),a=t?JSON.parse(t):[];if(a)return Ml.fromJSON(a)}}o.fetch=n;function e(){window.localStorage&&localStorage.removeItem(i)}o.clean=e})(m0||(m0={}));var tU=function(){function o(i){Object(De.a)(this,o),this.halo=i}return Object(be.a)(o,[{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"node",get:function(){return this.cell}},{key:"getPresets",value:function(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox:function(n){if(this.options.useCellGeometry){var e=n.cell;return e.getBBox()}return n.getBBox()},content:function(n){var e=_.template("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),t=n.cell,a=t.getBBox();return e({x:Math.floor(a.x),y:Math.floor(a.y),width:Math.floor(a.width),height:Math.floor(a.height),angle:Math.floor(t.getAngle())})},magnet:function(n){return n.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}},{key:"removeCell",value:function(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}},{key:"startLink",value:function(r){var n=r.x,e=r.y;this.halo.startBatch();var t=this.graph,a=this.createEdgeConnectedToSource();a.setTarget({x:n,y:e}),this.model.addEdge(a,{validation:!1,halo:this.halo.cid,async:!1}),t.view.undelegateEvents(),this.edgeView=t.renderer.findViewByCell(a),this.edgeView.prepareArrowheadDragging("target",{x:n,y:e,fallbackAction:"remove"})}},{key:"createEdgeConnectedToSource",value:function(){var r=this.getMagnet(this.view,"source"),n=this.getEdgeTerminal(this.view,r),e=this.graph.hook.getDefaultEdge(this.view,r);return e.setSource(n),e}},{key:"getMagnet",value:function(r,n){var e=this.options.magnet;if(typeof e=="function"){var t=A.call(e,this.halo,r,n);if(t instanceof SVGElement)return t}throw new Error("`magnet()` has to return an SVGElement")}},{key:"getEdgeTerminal",value:function(r,n){var e={cell:r.cell.id};if(n!==r.container){var t=n.getAttribute("port");t?e.port=t:e.selector=r.getSelector(n)}return e}},{key:"doLink",value:function(r){var n=r.e,e=r.x,t=r.y;this.edgeView&&this.edgeView.onMouseMove(n,e,t)}},{key:"stopLink",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.edgeView;if(a){a.onMouseUp(n,e,t);var s=a.cell;s.hasLoop()&&this.makeLoopEdge(s),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:s}),this.edgeView=null}this.graph.view.delegateEvents()}},{key:"makeLoopEdge",value:function(r){var n=null,e=null,t=this.options.loopEdgeWidth,a=this.graph.options,s=new Sr(0,0,a.width,a.height),u=this.graph.graphToLocal(this.view.getBBox()),l=[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(function(c){var f=null,d=0,v=0;switch(c){case"top":f=new mt(u.x+u.width/2,u.y-t),d=t/2;break;case"bottom":f=new mt(u.x+u.width/2,u.y+u.height+t),d=t/2;break;case"left":f=new mt(u.x-t,u.y+u.height/2),v=t/2;break;case"right":f=new mt(u.x+u.width+t,u.y+u.height/2),v=t/2;break;default:break}return f?(n=f.translate(-d,-v),e=f.translate(d,v),s.containsPoint(n)&&s.containsPoint(e)):!1});l&&n&&e&&r.setVertices([n,e])}},{key:"startResize",value:function(r){var n=r.e;this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(ti.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),vs("node:resize",n,this.view)}},{key:"doResize",value:function(r){var n=r.e,e=r.dx,t=r.dy,a=this.node.getSize(),s=Math.max(a.width+(this.flip?e:t),1),u=Math.max(a.height+(this.flip?t:e),1);this.node.resize(s,u,{absolute:!0}),vs("node:resizing",n,this.view)}},{key:"stopResize",value:function(r){var n=r.e;this.view.removeClass("node-resizing"),vs("node:resized",n,this.view),this.halo.stopBatch()}},{key:"startClone",value:function(r){var n=r.e,e=r.x,t=r.y;this.halo.startBatch();var a=this.options,s=a.clone(this.cell,{clone:!0});if(!pi.isCell(s))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(s,e,t),this.model.addCell(s,{halo:this.halo.cid,async:!1});var u=this.graph.renderer.findViewByCell(s);u.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:u})}},{key:"centerNodeAtCursor",value:function(r,n,e){var t=r.getBBox().getCenter(),a=n-t.x,s=e-t.y;r.translate(a,s)}},{key:"doClone",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.halo.getEventData(n).cloneView;a&&a.onMouseMove(n,e,t)}},{key:"stopClone",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.halo.getEventData(n).cloneView;a&&a.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startFork",value:function(r){var n=r.e,e=r.x,t=r.y;this.halo.startBatch();var a=this.options.clone(this.cell,{fork:!0});if(!pi.isCell(a))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(a,e,t),this.model.addCell(a,{halo:this.halo.cid,async:!1});var s=this.createEdgeConnectedToSource(),u=this.graph.renderer.findViewByCell(a),l=this.getMagnet(u,"target"),c=this.getEdgeTerminal(u,l);s.setTarget(c),this.model.addEdge(s,{halo:this.halo.cid,async:!1}),u.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:u})}},{key:"doFork",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.halo.getEventData(n).cloneView;a&&a.onMouseMove(n,e,t)}},{key:"stopFork",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.halo.getEventData(n).cloneView;a&&a.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startRotate",value:function(r){var n=this,e=r.e,t=r.x,a=r.y;this.halo.startBatch();var s=this.node.getBBox().getCenter(),u=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce(function(l,c){return c.isNode()&&l.push(c),l},u),this.halo.setEventData(e,{center:s,nodes:u,rotateStartAngles:u.map(function(l){return l.getAngle()}),clientStartAngle:new mt(t,a).theta(s)}),u.forEach(function(l){var c=n.graph.findViewByCell(l);c&&(c.addClass("node-rotating"),vs("node:rotate",e,c))})}},{key:"doRotate",value:function(r){var n=this,e=r.e,t=r.x,a=r.y,s=this.halo.getEventData(e),u=s.clientStartAngle-new mt(t,a).theta(s.center);s.nodes.forEach(function(l,c){var f=s.rotateStartAngles[c],d=ts.snapToGrid(f+u,n.options.rotateGrid);l.rotate(d,{absolute:!0,center:s.center,halo:n.halo.cid}),vs("node:rotating",e,n.graph.findViewByCell(l))})}},{key:"stopRotate",value:function(r){var n=this,e=r.e,t=this.halo.getEventData(e);t.nodes.forEach(function(a){var s=n.graph.findViewByCell(a);s.removeClass("node-rotating"),vs("node:rotated",e,s)}),this.halo.stopBatch()}},{key:"unlink",value:function(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}}]),o}(),nU=function(){function o(i){Object(De.a)(this,o),this.halo=i}return Object(be.a)(o,[{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"edge",get:function(){return this.cell}},{key:"getPresets",value:function(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:function(n){return n.graph.localToGraph(n.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}}},{key:"removeEdge",value:function(){this.cell.remove()}},{key:"directionSwap",value:function(){var r=this.edge.getSource(),n=this.edge.getTarget();this.edge.prop({source:n,target:r})}}]),o}(),B1=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"type",get:function(){return this.options.type||"surround"}},{key:"handleOptions",get:function(){return this.options}},{key:"init",value:function(e){this.options=m.merge(r.defaultOptions,this.cell.isNode()?new tU(this).getPresets():this.cell.isEdge()?new nU(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}},{key:"startListening",value:function(){var e=this.model,t=this.graph,a=this.view.cell;a.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),Object(la.a)(Object(ca.a)(r.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){var e=this.model,t=this.graph,a=this.view.cell;this.undelegateEvents(),a.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),Object(la.a)(Object(ca.a)(r.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){var e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(G1.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass("".concat(t,"-handles")).appendTo(this.container),this.$content=this.$("<div/>").addClass("".concat(t,"-content")).appendTo(this.container),this.$container.appendTo(this.graph.container),this}},{key:"remove",value:function(){return this.stopBatch(),this.view.removeClass(G1.NODE_CLS),Object(la.a)(Object(ca.a)(r.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.isRendered()){this.updateContent();var e=this.getBBox(),t=this.options.tinyThreshold||0,a=this.options.smallThreshold||0;this.$handleContainer.toggleClass("".concat(this.handleClassName,"-tiny"),e.width<t&&e.height<t);var s="".concat(this.handleClassName,"-small");this.$handleContainer.toggleClass(s,!this.$handleContainer.hasClass(s)&&e.width<a&&e.height<a),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),(this.type==="surround"||this.type==="toolbar")&&this.hasHandle("fork")&&this.toggleFork()}}},{key:"updateContent",value:function(){var e=this.options.content;if(typeof e=="function"){var t=A.call(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}},{key:"getBBox",value:function(){var e=this.view,t=this.options.bbox,a=typeof t=="function"?A.call(t,this,e):t;return Sr.create(Object.assign({x:0,y:0,width:1,height:1},a))}},{key:"removeCell",value:function(){this.cell.remove()}},{key:"toggleFork",value:function(){var e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),a=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!a),t.remove()}},{key:"toggleUnlink",value:function(){var e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}},{key:"startBatch",value:function(){this.model.startBatch("halo",{halo:this.cid})}},{key:"stopBatch",value:function(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}}]),r}(f0);(function(o){o.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:function(r){return r.clone().removeZIndex()}}})(B1||(B1={})),Object.getOwnPropertyNames(c0.prototype).forEach(function(o){o!=="constructor"&&Object.defineProperty(B1.prototype,o,Object.getOwnPropertyDescriptor(c0.prototype,o))});var G1;(function(o){o.NODE_CLS="has-widget-halo"})(G1||(G1={}));var rU=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},tp=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.options=Object.assign(Object.assign({},r.defaults),n),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName("widget-dnd")),e.draggingGraph=new fi(Object.assign(Object.assign({},e.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),e.$container.append(e.draggingGraph.container),e}return Object(be.a)(r,[{key:"targetScroller",get:function(){var e=this.options.target;return fi.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return fi.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"snapline",get:function(){return this.targetGraph.snapline.widget}},{key:"start",value:function(e,t){var a=t;a.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.draggingContainer||document.body),this.sourceNode=e,this.prepareDragging(e,a.clientX,a.clientY);var s=this.updateNodePosition(a.clientX,a.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:a,node:e,cell:e,view:this.draggingView,x:s.x,y:s.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(r.documentEvents,a.data)}},{key:"isSnaplineEnabled",value:function(){return this.snapline&&!this.snapline.disabled}},{key:"prepareDragging",value:function(e,t,a){var s=this.draggingGraph,u=s.model,l=this.options.getDragNode(e,{sourceNode:e,draggingGraph:s,targetGraph:this.targetGraph});l.position(0,0);var c=5;if(this.isSnaplineEnabled()&&(c+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){var f=this.targetGraph.transform.getScale();s.scale(f.sx,f.sy),c*=Math.max(f.sx,f.sy)}else s.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),u.resetCells([l]);var d=s.findViewByCell(l);d.undelegateEvents(),d.cell.off("changed"),s.fitToContent({padding:c,allowNewOrigin:"any"});var v=d.getBBox();this.geometryBBox=d.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(v.getTopLeft()),this.draggingNode=l,this.draggingView=d,this.draggingBBox=l.getBBox(),this.padding=c,this.originOffset=this.updateGraphPosition(t,a)}},{key:"updateGraphPosition",value:function(e,t){var a=document.body.scrollTop||document.documentElement.scrollTop,s=this.delta,u=this.geometryBBox,l=this.padding||5,c={left:e-s.x-u.width/2-l,top:t-s.y-u.height/2-l+a};return this.draggingGraph&&this.$container.offset(c),c}},{key:"updateNodePosition",value:function(e,t){var a=this.targetGraph.clientToLocal(e,t),s=this.draggingBBox;return a.x-=s.width/2,a.y-=s.height/2,this.draggingNode.position(a.x,a.y),a}},{key:"snap",value:function(e){var t=e.cell,a=e.current,s=e.options,u=t;if(s.snapped){var l=this.draggingBBox;u.position(l.x+s.tx,l.y+s.ty,{silent:!0}),this.draggingView.translate(),u.position(a.x,a.y,{silent:!0}),this.snapOffset={x:s.tx,y:s.ty}}else this.snapOffset=null}},{key:"onDragging",value:function(e){var t=this.draggingView;if(t){e.preventDefault();var a=this.normalizeEvent(e),s=a.clientX,u=a.clientY;this.updateGraphPosition(s,u);var l=this.updateNodePosition(s,u),c=this.targetGraph.options.embedding.enabled,f=(c||this.isSnaplineEnabled())&&this.isInsideValidArea({x:s,y:u});if(c){t.setEventData(a,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});var d=t.getEventData(a);f?t.processEmbedding(a,d):t.clearEmbedding(d),this.candidateEmbedView=d.candidateEmbedView}this.isSnaplineEnabled()&&(f?this.snapline.snapOnMoving({e:a,view:t,x:l.x,y:l.y}):this.snapline.hide())}}},{key:"onDragEnd",value:function(e){var t=this,a=this.draggingNode;if(a){var s=this.normalizeEvent(e),u=this.draggingView,l=this.draggingBBox,c=this.snapOffset,f=l.x,d=l.y;c&&(f+=c.x,d+=c.y),a.position(f,d,{silent:!0});var v=this.drop(a,{x:s.clientX,y:s.clientY}),p=function(C){C?(t.onDropped(a),t.targetGraph.options.embedding.enabled&&u&&(u.setEventData(s,{cell:C,graph:t.targetGraph,candidateEmbedView:t.candidateEmbedView}),u.finalizeEmbedding(s,u.getEventData(s)))):t.onDropInvalid(),t.candidateEmbedView=null,t.targetModel.stopBatch("dnd")};A.isAsync(v)?(this.undelegateDocumentEvents(),v.then(p)):p(v)}}},{key:"clearDragging",value:function(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}},{key:"onDropped",value:function(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}},{key:"onDropInvalid",value:function(){var e=this,t=this.draggingNode;if(t){var a=this.options.animation;if(a){var s=typeof a=="object"&&a.duration||150,u=typeof a=="object"&&a.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,s,u,function(){return e.onDropped(t)})}else this.onDropped(t)}}},{key:"isInsideValidArea",value:function(e){var t,a=null,s=this.targetGraph,u=this.targetScroller;this.options.dndContainer&&(a=this.getDropArea(this.options.dndContainer));var l=a&&a.containsPoint(e);if(u)if(u.options.autoResize)t=this.getDropArea(u.container);else{var c=this.getDropArea(u.container);t=this.getDropArea(s.container).intersectsWithRect(c)}else t=this.getDropArea(s.container);return!l&&t&&t.containsPoint(e)}},{key:"getDropArea",value:function(e){var t=this.$(e),a=t.offset(),s=document.body.scrollTop||document.documentElement.scrollTop,u=document.body.scrollLeft||document.documentElement.scrollLeft;return Sr.create({x:a.left+parseInt(t.css("border-left-width"),10)-u,y:a.top+parseInt(t.css("border-top-width"),10)-s,width:t.innerWidth(),height:t.innerHeight()})}},{key:"drop",value:function(e,t){var a=this;if(this.isInsideValidArea(t)){var s=this.targetGraph,u=s.model,l=s.clientToLocal(t),c=this.sourceNode,f=this.options.getDropNode(e,{sourceNode:c,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),d=f.getBBox();l.x+=d.x-d.width/2,l.y+=d.y-d.height/2;var v=this.snapOffset?1:s.getGridSize();f.position(ts.snapToGrid(l.x,v),ts.snapToGrid(l.y,v)),f.removeZIndex();var p=this.options.validateNode,y=p?p(f,{sourceNode:c,draggingNode:e,droppingNode:f,targetGraph:s,draggingGraph:this.draggingGraph}):!0;return typeof y=="boolean"?y?(u.addCell(f,{stencil:this.cid}),f):null:A.toDeferredBoolean(y).then(function(C){return C?(u.addCell(f,{stencil:a.cid}),f):null})}return null}},{key:"onRemove",value:function(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}},{key:"dispose",value:function(){this.remove()}}]),r}(Ai);rU([Ai.dispose()],tp.prototype,"dispose",null),function(o){o.defaults={animation:!1,getDragNode:function(r){return r.clone()},getDropNode:function(r){return r.clone()}},o.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(tp||(tp={}));function aU(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Ml.isModel(o)?o:new Ml().resetCells(o,{sort:!1,dryrun:!0}),n=r.getNodes(),e=i.columns||1,t=Math.ceil(n.length/e),a=i.dx||0,s=i.dy||0,u=i.center!==!1,l=i.resizeToFit===!0,c=i.marginX||0,f=i.marginY||0,d=[],v=i.columnWidth;if(v==="compact")for(var p=0;p<e;p+=1){var y=If.getNodesInColumn(n,p,e);d.push(If.getMaxDim(y,"width")+a)}else{(v==null||v==="auto")&&(v=If.getMaxDim(n,"width")+a);for(var C=0;C<e;C+=1)d.push(v)}var E=If.accumulate(d,c),w=[],x=i.rowHeight;if(x==="compact")for(var N=0;N<t;N+=1){var j=If.getNodesInRow(n,N,e);w.push(If.getMaxDim(j,"height")+s)}else{(x==null||x==="auto")&&(x=If.getMaxDim(n,"height")+s);for(var B=0;B<t;B+=1)w.push(x)}var $=If.accumulate(w,f);r.startBatch("layout"),n.forEach(function(Z,fe){var de=fe%e,xe=Math.floor(fe/e),Ae=d[de],Ye=w[xe],rt=0,je=0,ot=Z.getSize();if(l){var Ft=Ae-2*a,hn=Ye-2*s,In=ot.height*(ot.width?Ft/ot.width:1),xn=ot.width*(ot.height?hn/ot.height:1);Ye<In?Ft=xn:hn=In,ot={width:Ft,height:hn},Z.setSize(ot,i)}u&&(rt=(Ae-ot.width)/2,je=(Ye-ot.height)/2),Z.position(E[de]+a+rt,$[xe]+s+je,i)}),r.stopBatch("layout")}var If;(function(o){function i(t,a){return t.reduce(function(s,u){return Math.max(u.getSize()[a],s)},0)}o.getMaxDim=i;function r(t,a,s){for(var u=[],l=s*a,c=l+s;l<c;l+=1)u.push(t[l]);return u}o.getNodesInRow=r;function n(t,a,s){for(var u=[],l=a,c=t.length;l<c;l+=s)u.push(t[l]);return u}o.getNodesInColumn=n;function e(t,a){return t.reduce(function(s,u,l){return s.push(s[l]+u),s},[a||0])}o.accumulate=e})(If||(If={}));var wS=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;if(Object(De.a)(this,r),e=i.call(this),e.graphs={},e.$groups={},e.options=Object.assign(Object.assign({},r.defaultOptions),n),e.dnd=new tp(e.options),e.onSearch=A.debounce(e.onSearch,200),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(tl.base)).attr("data-not-found-text",e.options.notFoundText||"No matches found"),e.options.collapsable=n.collapsable&&n.groups&&n.groups.some(function(u){return u.collapsable!==!1}),e.options.collapsable){e.$container.addClass("collapsable");var t=n.groups&&n.groups.every(function(u){return u.collapsed||u.collapsable===!1});t&&e.$container.addClass("collapsed")}e.$("<div/>").addClass(e.prefixClassName(tl.title)).html(e.options.title).appendTo(e.$container),n.search&&e.$container.addClass("searchable").append(e.renderSearch()),e.$content=e.$("<div/>").addClass(e.prefixClassName(tl.content)).appendTo(e.$container);var a=n.stencilGraphOptions||{};if(n.groups&&n.groups.length)n.groups.forEach(function(u){var l=e.$("<div/>").addClass(e.prefixClassName(tl.group)).attr("data-name",u.name);(u.collapsable==null&&n.collapsable||u.collapsable!==!1)&&l.addClass("collapsable"),l.toggleClass("collapsed",u.collapsed===!0);var c=e.$("<h3/>").addClass(e.prefixClassName(tl.groupTitle)).html(u.title||u.name),f=e.$("<div/>").addClass(e.prefixClassName(tl.groupContent)),d=u.graphOptions,v=new fi(Object.assign(Object.assign(Object.assign({},a),d),{container:document.createElement("div"),model:a.model||new Ml,width:u.graphWidth||n.stencilGraphWidth,height:u.graphHeight||n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));f.append(v.container),l.append(c,f).appendTo(e.$content),e.$groups[u.name]=l,e.graphs[u.name]=v});else{var s=new fi(Object.assign(Object.assign({},a),{container:document.createElement("div"),model:a.model||new Ml,width:n.stencilGraphWidth,height:n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));e.$content.append(s.container),e.graphs[y0.defaultGroupName]=s}return e.startListening(),Object(Bx.a)(e,Object(Vo.a)(e))}return Object(be.a)(r,[{key:"targetScroller",get:function(){var e=this.options.target;return fi.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return fi.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"renderSearch",value:function(){return this.$("<div/>").addClass(this.prefixClassName(tl.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(tl.searchText)))}},{key:"startListening",value:function(){var e,t=this,a=this.prefixClassName(tl.title),s=this.prefixClassName(tl.searchText),u=this.prefixClassName(tl.groupTitle);this.delegateEvents((e={},Object(Xe.a)(e,"click .".concat(a),"onTitleClick"),Object(Xe.a)(e,"touchstart .".concat(a),"onTitleClick"),Object(Xe.a)(e,"click .".concat(u),"onGroupTitleClick"),Object(Xe.a)(e,"touchstart .".concat(u),"onGroupTitleClick"),Object(Xe.a)(e,"input .".concat(s),"onSearch"),Object(Xe.a)(e,"focusin .".concat(s),"onSearchFocusIn"),Object(Xe.a)(e,"focusout .".concat(s),"onSearchFocusOut"),e)),Object.keys(this.graphs).forEach(function(l){var c=t.graphs[l];c.on("cell:mousedown",t.onDragStart,t)})}},{key:"stopListening",value:function(){var e=this;this.undelegateEvents(),Object.keys(this.graphs).forEach(function(t){var a=e.graphs[t];a.off("cell:mousedown",e.onDragStart,e)})}},{key:"load",value:function(e,t){var a=this;return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(function(s){e[s]&&a.loadGroup(e[s],s)}),this}},{key:"loadGroup",value:function(e,t){var a=this.getModel(t);if(a){var s=e.map(function(d){return Wi.isNode(d)?d:Wi.create(d)});a.resetCells(s)}var u=this.getGroup(t),l=this.options.stencilGraphHeight;u&&u.graphHeight!=null&&(l=u.graphHeight);var c=u&&u.layout||this.options.layout;if(c&&a&&A.call(c,this,a,u),!l){var f=this.getGraph(t);f.fitToContent({minWidth:f.options.width,gridHeight:1,padding:u&&u.graphPadding||this.options.stencilGraphPadding||10})}return this}},{key:"onDragStart",value:function(e){var t=e.e,a=e.node;this.dnd.start(a,t)}},{key:"filter",value:function(e,t){var a=this,s=Object.keys(this.graphs).reduce(function(u,l){var c=a.graphs[l],f=l===y0.defaultGroupName?null:l,d=c.model.getNodes().filter(function(C){var E=!1;typeof t=="function"?E=A.call(t,a,C,e,f,a):typeof t=="boolean"?E=t:E=a.isCellMatched(C,e,t,e.toLowerCase()!==e);var w=c.renderer.findViewByCell(C);return w&&w.$(w.container).toggleClass("unmatched",!E),E}),v=d.length>0,p=a.options,y=new Ml;return y.resetCells(d),p.layout&&A.call(p.layout,a,y,a.getGroup(l)),a.$groups[l]&&a.$groups[l].toggleClass("unmatched",!v),c.fitToContent({gridWidth:1,gridHeight:1,padding:p.stencilGraphPadding||10}),u||v},!1);this.$container.toggleClass("not-found",!s)}},{key:"isCellMatched",value:function(e,t,a,s){return t&&a?Object.keys(a).some(function(u){if(u==="*"||e.shape===u){var l=a[u];if(typeof l=="boolean")return l;var c=Array.isArray(l)?l:[l];return c.some(function(f){var d=e.getPropByPath(f);return d!=null?(d="".concat(d),s||(d=d.toLowerCase()),d.indexOf(t)>=0):!1})}return!1}):!0}},{key:"onSearch",value:function(e){this.filter(e.target.value,this.options.search)}},{key:"onSearchFocusIn",value:function(){this.$container.addClass("is-focused")}},{key:"onSearchFocusOut",value:function(){this.$container.removeClass("is-focused")}},{key:"onTitleClick",value:function(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}},{key:"onGroupTitleClick",value:function(e){var t=this,a=this.$(e.target).closest(".".concat(this.prefixClassName(tl.group)));this.toggleGroup(a.attr("data-name")||"");var s=Object.keys(this.$groups).every(function(u){var l=t.getGroup(u),c=t.$groups[u];return l&&l.collapsable===!1||c.hasClass("collapsed")});this.$container.toggleClass("collapsed",s)}},{key:"getModel",value:function(e){var t=this.getGraph(e);return t?t.model:null}},{key:"getGraph",value:function(e){return this.graphs[e||y0.defaultGroupName]}},{key:"getGroup",value:function(e){var t=this.options.groups;return e!=null&&t&&t.length?t.find(function(a){return a.name===e}):null}},{key:"toggleGroup",value:function(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}},{key:"collapseGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}},{key:"expandGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}},{key:"isGroupCollapsable",value:function(e){var t=this.$groups[e];return t.hasClass("collapsable")}},{key:"isGroupCollapsed",value:function(e){var t=this.$groups[e];return t&&t.hasClass("collapsed")}},{key:"collapseGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.collapseGroup(t)}),this}},{key:"expandGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.expandGroup(t)}),this}},{key:"resizeGroup",value:function(e,t){var a=this.graphs[e];return a&&a.resize(t.width,t.height),this}},{key:"onRemove",value:function(){var e=this;Object.keys(this.graphs).forEach(function(t){var a=e.graphs[t];a.view.remove(),delete e.graphs[t]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}}]),r}(Ai);(function(o){o.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout:function(r,n){var e={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};aU(r,Object.assign(Object.assign(Object.assign({},e),this.options.layoutOptions),n?n.layoutOptions:{}))}},tp.defaults)})(wS||(wS={}));var tl;(function(o){o.base="widget-stencil",o.title="".concat(o.base,"-title"),o.search="".concat(o.base,"-search"),o.searchText="".concat(o.search,"-text"),o.content="".concat(o.base,"-content"),o.group="".concat(o.base,"-group"),o.groupTitle="".concat(o.group,"-title"),o.groupContent="".concat(o.group,"-content")})(tl||(tl={}));var y0;(function(o){o.defaultGroupName="__default__"})(y0||(y0={}));var Nk=h("i8i4"),Bv=h.n(Nk),iU=h("9og8"),xS;(function(o){function i(n){return!!n&&typeof n=="object"&&"dispose"in n&&typeof n.dispose=="function"}o.is=i;function r(n){return{dispose:n}}o.create=r,o.NONE=r(function(){})})(xS||(xS={}));var jk,Lk;(function(o){o.None=function(){return xS.NONE};function i(r,n){return function(e,t){return r(function(a){return e.call(t,n(a))},void 0)}}o.map=i})(Lk||(Lk={})),jk=Symbol.iterator;var oU=function(o){function i(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Object(De.a)(this,i),this.mono=void 0,this._callbacks=void 0,this.mono=r}return Object(be.a)(i,[{key:"callbacks",get:function(){return this._callbacks||(this._callbacks=[]),this._callbacks}},{key:"length",get:function(){return this.callbacks.length}},{key:"add",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.callbacks.push([n,e])}},{key:"remove",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!this.isEmpty()){for(var t=!1,a=0;a<this.length;a+=1)if(this.callbacks[a][0]===n){if(this.callbacks[a][1]===e){this.callbacks.splice(a,1);return}t=!0}if(t)throw new Error("You should remove it with the same context you add it")}}},{key:o,value:function(){if(this.isEmpty())return[][Symbol.iterator]();var n=this.callbacks.slice(0);return n.map(function(e){return function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e[0].apply(e[1],a)}})[Symbol.iterator]()}},{key:"invoke",value:function(){var n=[],e=Object(Qn.a)(this),t;try{for(e.s();!(t=e.n()).done;){var a=t.value;try{n.push(a.apply(void 0,arguments))}catch(s){console.error(s)}}}catch(s){e.e(s)}finally{e.f()}return n}},{key:"isEmpty",value:function(){return this.callbacks.length===0}},{key:"dispose",value:function(){this._callbacks=void 0}}]),i}(jk),_k=function(){function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(De.a)(this,o),this.options=void 0,this._event=void 0,this._callbacks=void 0,this.disposed=!1,this.options=i}return Object(be.a)(o,[{key:"callbacks",get:function(){return this._callbacks||(this._callbacks=new oU),this._callbacks}},{key:"event",get:function(){var r=this;return this._event||(this._event=function(n,e){r.options.onFirstListenerAdd&&r.callbacks.isEmpty()&&r.options.onFirstListenerAdd(r),r.callbacks.add(n,e);var t={dispose:function(){t.dispose=o.noop,r.disposed||(r.callbacks.remove(n,e),t.dispose=o.noop,r.options.onLastListenerRemove&&r.callbacks.isEmpty()&&r.options.onLastListenerRemove(r))}};return t}),this._event}},{key:"fire",value:function(r){!this._callbacks||this.callbacks.invoke(r)}},{key:"sequence",value:function(){var i=Object(iU.a)(Object(D.a)().mark(function n(e){var t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=Object(Qn.a)(this.callbacks),c.prev=1,t.s();case 3:if((a=t.n()).done){c.next=12;break}return s=a.value,c.next=7,e(s);case 7:if(u=c.sent,u){c.next=10;break}return c.abrupt("break",12);case 10:c.next=3;break;case 12:c.next=17;break;case 14:c.prev=14,c.t0=c.catch(1),t.e(c.t0);case 17:return c.prev=17,t.f(),c.finish(17);case 20:case"end":return c.stop()}},n,this,[[1,14,17,20]])}));function r(n){return i.apply(this,arguments)}return r}()},{key:"dispose",value:function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this.disposed=!0}}]),o}();_k.noop=function(){};var zr;(function(o){function i(n){return!!n&&typeof n=="object"&&"dispose"in n&&typeof n.dispose=="function"}o.is=i;function r(n){return{dispose:n}}o.create=r,o.NULL=r(function(){})})(zr||(zr={}));var vi=function(){function o(){var i=this;Object(De.a)(this,o),this.disposables=[],this.onDisposeEmitter=new _k,this.disposingElements=!1;for(var r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];n.forEach(function(t){return i.push(t)})}return Object(be.a)(o,[{key:"onDispose",get:function(){return this.onDisposeEmitter.event}},{key:"checkDisposed",value:function(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}},{key:"disposed",get:function(){return this.disposables.length===0}},{key:"dispose",value:function(){return ie(this,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.disposed||this.disposingElements)){t.next=2;break}return t.abrupt("return");case 2:this.disposingElements=!0;case 3:if(this.disposed){t.next=15;break}return t.prev=4,n=this.disposables.pop(),t.next=8,n.dispose();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.error(t.t0);case 13:t.next=3;break;case 15:this.disposingElements=!1,this.checkDisposed();case 17:case"end":return t.stop()}},r,this,[[4,10]])}))}},{key:"push",value:function(r){var n=this,e=this.disposables;e.push(r);var t=r.dispose.bind(r),a=zr.create(function(){var s=e.indexOf(r);s!==-1&&e.splice(s,1),n.checkDisposed()});return r.dispose=function(){a.dispose(),t()},a}},{key:"pushAll",value:function(r){var n=this;return r.map(function(e){return n.push(e)})}}]),o}(),nl=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.isResolved=!1,this.isRejected=!1,this.promise=new Promise(function(r,n){i.resolve=function(){i.isResolved=!0,r.apply(void 0,arguments)},i.reject=function(){i.isRejected=!0,n.apply(void 0,arguments)}})}),sU="X6_NODE_PORTAL_NODE_VIEW",SS="xflow",TS=.01,MS=1.5,z1="XFLOW_DEFAULT_NODE",Fk="XFLOW_DEFAULT_GROUP_NODE",AS="XFLOW_DEFAULT_EDGE",np="XFLOW_COPY_ITEMS",Bk=36,Gk=180,PS={width:Gk,height:Bk};function zc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var i=Math.random()*16|0,r=o=="x"?i:i&3|8;return r.toString(16)})}var zk=h("xGfz"),Uk=h("gUdW"),b0=T.a.createContext(null);b0.displayName="XFlowAppContext";var Ro=function(){var i=T.a.useContext(b0);return i&&i.getApp?i.getApp():null},uU=function(){return T.a.useContext(b0)},Vk=Object(be.a)(function o(){var i=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Object(De.a)(this,o),this.cache=null,this.setApp=function(n){i.cache=n,i.onAppChangeCallback&&i.onAppChangeCallback(n)},this.isUserDefined=function(){return i.isUserDefinedFlag},this.getApp=function(){return i.cache},this.onAppChange=function(n){i.onAppChangeCallback=n},this.dispose=function(){i.cache=null},this.isUserDefinedFlag=r}),Hk=function(i){var r=uU(),n=T.a.useState(null),e=Object(Ue.a)(n,2),t=e[1],a=T.a.useMemo(function(){return r&&r.isUserDefined()?r:new Vk(!1)},[]);return a.isUserDefined()||a.onAppChange(function(){return t(0)}),T.a.useEffect(function(){i.app&&a.setApp(i.app)},[i.app]),a.isUserDefined()?T.a.createElement(T.a.Fragment,null,i.children):T.a.createElement(b0.Provider,{value:Object.assign({},a)},i.children)};Hk.displayName="XFlowAppInternalProvider";var lU=function(i){var r=i.children,n=T.a.useState(null),e=Object(Ue.a)(n,2),t=e[1],a=T.a.useMemo(function(){return new Vk(!0)},[]);return a.onAppChange(function(){return t(0)}),T.a.createElement(b0.Provider,{value:Object.assign({},a)},r)};lU.displayName="XFlowAppProvider";var Ri;(function(o){var i="\u8282\u70B9\u64CD\u4F5C";o.ADD_NODE={id:"xflow:add-node",label:"\u6DFB\u52A0\u8282\u70B9",category:i},o.DEL_NODE={id:"xflow:del-node",label:"\u5220\u9664\u8282\u70B9",category:i},o.UPDATE_NODE_PORT={id:"xflow:update-node-port",label:"\u5220\u9664\u8FDE\u63A5\u6869",category:i},o.UPDATE_NODE={id:"xflow:update-node",label:"\u66F4\u65B0\u8282\u70B9",category:i},o.HIGHLIGHT_NODE={id:"xflow:highlight-node",label:"\u9AD8\u4EAE\u8282\u70B9",category:i},o.SELECT_NODE={id:"xflow:select-node",label:"\u9009\u4E2D\u8282\u70B9",category:i},o.MOVE_NODE={id:"xflow:move-node",label:"Move Node",category:i},o.CENTER_NODE={id:"xflow:center-node",label:"\u5C45\u4E2D\u8282\u70B9",category:i},o.FRONT_NODE={id:"xflow:front-node",label:"\u524D\u7F6E\u8282\u70B9",category:i},o.BACK_NODE={id:"xflow:back-node",label:"\u540E\u7F6E\u8282\u70B9",category:i}})(Ri||(Ri={}));var Eo;(function(o){var i="\u8FB9\u64CD\u4F5C";o.ADD_EDGE={id:"xflow:add-edge",label:"\u6DFB\u52A0\u8FB9",category:i},o.DEL_EDGE={id:"xflow:del-edge",label:"\u5220\u9664\u8FB9",category:i},o.UPDATE_EDGE={id:"xflow:update-edge",label:"\u66F4\u65B0\u8FB9",category:i},o.HIGHLIGHT_EDGE={id:"xflow:highlight-edge",label:"\u9AD8\u4EAE\u8FB9",category:i},o.FRONT_EDGE={id:"xflow:front-edge",label:"\u524D\u7F6E\u53D8",category:i},o.BACK_EDGE={id:"xflow:back-edge",label:"\u540E\u7F6E\u8FB9",category:i}})(Eo||(Eo={}));var za;(function(o){var i="\u753B\u5E03\u64CD\u4F5C";o.LOAD_META={id:"xflow:load-meta",label:"\u83B7\u53D6\u5143\u6570\u636E",category:i},o.LOAD_DATA={id:"xflow:load-data",label:"\u83B7\u53D6\u56FE\u6570\u636E",category:i},o.SAVE_GRAPH_DATA={id:"xflow:save-graph-data",label:"\u4FDD\u5B58",category:i},o.GRAPH_LAYOUT={id:"xflow:layout",label:"\u8BA1\u7B97\u5E03\u5C40",category:i},o.GRAPH_RENDER={id:"xflow:graph-render",label:"\u6E32\u67D3\u753B\u5E03",category:i},o.UNDO_CMD={id:"xflow:undo-cmd",label:"\u64A4\u9500",category:i},o.REDO_CMD={id:"xflow:redo-cmd",label:"\u91CD\u505A",category:i},o.GRAPH_INSTANCE_COMMAND={id:"xflow:graph-instacne-cmd",label:"Graph\u901A\u7528Command",category:i},o.GRAPH_ZOOM={id:"xflow:graph-zoom",label:"\u7F29\u653E\u753B\u5E03",category:i},o.GRAPH_FULLSCREEN={id:"xflow:graph-fullscreen",label:"\u5168\u5C4F",category:i},o.GRAPH_RESIZE={id:"xflow:graph-resize",label:"\u8C03\u6574\u7A97\u53E3\u5927\u5C0F",category:i},o.GRAPH_COPY={id:"xflow:graph-copy-selection",label:"\u590D\u5236",category:i},o.GRAPH_PASTE={id:"xflow:graph-paste-selection",label:"\u7C98\u8D34",category:i},o.GRAPH_TOGGLE_MULTI_SELECT={id:"xflow:graph-toggle-multi-select",label:"\u542F\u7528\u6846\u9009",category:i},o.GRAPH_ADD_TOOL={id:"xflow:add-tool",label:"\u6DFB\u52A0\u5DE5\u5177",category:i},o.GRAPH_DEL_TOOL={id:"xflow:del-tool",label:"\u5220\u9664\u5DE5\u5177",category:i},o.GRAPH_HISTORY_UNDO={id:"xflow:history-undo",label:"history undo",category:i},o.GRAPH_HISTORY_REDO={id:"xflow:history-redo",label:"history redo",category:i},o.GRAPH_HISTORY_RESET={id:"xflow:history-reset",label:"history reset",category:i},o.GRAPH_HISTORY_TOGGLE={id:"xflow:history-toggle",label:"history toggle",category:i}})(za||(za={}));var rp;(function(o){var i="\u72B6\u6001\u64CD\u4F5C";o.UPDATE_MODEL={id:"xflow:update-model",label:"\u8BBE\u7F6E\u72B6\u6001\u503C",category:i}})(rp||(rp={}));var Ms;(function(o){var i="\u7FA4\u7EC4\u64CD\u4F5C";o.INIT_GROUP={id:"xflow:init-group",label:"\u521D\u59CB\u5316\u7FA4\u7EC4",category:i},o.ADD_GROUP={id:"xflow:add-group",label:"\u65B0\u5EFA\u7FA4\u7EC4",category:i},o.DEL_GROUP={id:"xflow:del-group",label:"\u89E3\u6563\u7FA4\u7EC4",category:i},o.COLLAPSE_GROUP={id:"xflow:collapse-group",label:"\u6298\u53E0\u7FA4\u7EC4",category:i}})(Ms||(Ms={}));var Wk=function(i){var r=i.cell,n=Ro(),e=i.data.isCollapsed||!1,t=function(u){u.preventDefault(),n.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1})},a=function(u){u.preventDefault(),n.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,gap:3})};return T.a.createElement("div",{className:"xflow-default-group-node"},T.a.createElement("div",{className:"xflow-group-header"},T.a.createElement("div",{className:"header-left"},i.data.label),T.a.createElement("div",{className:"header-right"},e&&T.a.createElement(zk.a,{onClick:t}),!e&&T.a.createElement(Uk.a,{onClick:a}))))};Wk.displayName="XFlowDefaultGroupNode";var cU=h("VA6q"),fU=h("2BaD"),dU=h("Ue1A"),hU=h("RCxd"),vU=h("+YFz"),gU=h("26re"),pU={fontSize:"16px",color:"#3057e3"},Gv;(function(o){o.SUCCESS="success",o.PROCESSING="processing",o.ERROR="error",o.DEFAULT="default",o.WARNING="warning"})(Gv||(Gv={}));var mU=function(i){if(i.hide)return null;switch(i.status){case Gv.PROCESSING:return T.a.createElement(cU.a,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case Gv.ERROR:return T.a.createElement(fU.a,{style:{color:"#ff4d4f",fontSize:"16px"}});case Gv.SUCCESS:return T.a.createElement(dU.a,{style:{color:"#39ca74cc",fontSize:"16px"}});case Gv.WARNING:return T.a.createElement(hU.a,{style:{color:"#faad14",fontSize:"16px"}});case Gv.DEFAULT:return T.a.createElement(vU.a,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},$k=function(i){var r=T.a.isValidElement(i.data.icon)?i.data.icon:T.a.createElement(gU.a,{style:pU});return T.a.createElement("div",{className:"xflow-default-node ".concat(i.isNodeTreePanel?"panel-node":"")},T.a.createElement("span",{className:"icon"},r),T.a.createElement("span",{className:"label"},i.data.label),T.a.createElement("span",{className:"status"},T.a.createElement(mU,{status:i.data&&i.data.status,hide:i.isNodeTreePanel})))};$k.displayName="XFlowDefaultNode";var ap;(function(o){o.CONFIG_TYPE="GraphConfig",o.defaultNodeTypeParser=function(i){return i.renderKey},o.defaultEdgeTypeParser=function(i){return i.renderKey},o.defaultNodeMapValue=[[z1,$k],[Fk,Wk]]})(ap||(ap={}));var Xk=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.CONFIG_TYPE=ap.CONFIG_TYPE,this.x6Options=new nl,this.rootContainer=new nl,this.graphContainer=new nl,this.nodeRender=new Map(ap.defaultNodeMapValue),this.edgeRender=new Map,this.nodeTypeParser=ap.defaultNodeTypeParser,this.edgeTypeParser=ap.defaultEdgeTypeParser,this.events=[],this.mergeX6Config=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.getX6Config();case 2:return e=a.sent,a.abrupt("return",Object.assign(e,r));case 4:case"end":return a.stop()}},n,this)}))},this.getX6Config=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x6Options.promise;case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},r,this)}))},this.setX6Config=function(r){var n,e=i.getDefaultGraphOptions();(n=i.x6Options)===null||n===void 0||n.resolve(Object.assign(Object.assign({},e),r))},this.setAppContainer=function(r){i.appContainer=r},this.setRootContainer=function(r){r&&(i==null||i.rootContainer.resolve(r))},this.setGraphContainer=function(r){var n;r&&((n=i.graphContainer)===null||n===void 0||n.resolve(r))},this.setEvents=function(r){i.events=r},this.setDefaultNodeRender=function(r){i.nodeRender.set(z1,r)},this.setDefaultEdgeRender=function(r){i.edgeRender.set(AS,r)},this.setNodeRender=function(r,n){i.nodeRender.set(r,n)},this.setEdgeRender=function(r,n){i.edgeRender.set(r,n)},this.setNodeTypeParser=function(r){i.nodeTypeParser=r},this.setEdgeTypeParser=function(r){i.edgeTypeParser=r},this.getConfig=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Promise.all([this.rootContainer.promise,this.graphContainer.promise,this.x6Options.promise]);case 2:return n=c.sent,e=Object(Ue.a)(n,3),t=e[0],a=e[1],s=e[2],u={xflowInstanceId:this.xflowInstanceId,graphId:this.graphId,nodeViewId:this.graphId,appContainer:this.appContainer,rootContainer:t,graphContainer:a,x6Options:s,events:this.events,nodeRender:this.nodeRender,edgeRender:this.edgeRender,nodeTypeParser:this.nodeTypeParser,edgeTypeParser:this.edgeTypeParser},c.abrupt("return",u);case 9:case"end":return c.stop()}},r,this)}))},this.getDefaultGraphOptions=function(){var r={rotating:!1,resizing:!1,connecting:{snap:!0,dangling:!1,highlight:!1,connectionPoint:"rect",router:{name:"er"},connector:{name:"rounded",args:{radius:15}}},background:{},grid:{visible:!0},selecting:{strict:!0,enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},snapline:{enabled:!1},history:{enabled:!1},clipboard:{enabled:!0,useLocalStorage:!0},scroller:{enabled:!1},mousewheel:{enabled:!0,minScale:TS,maxScale:MS,factor:1.1,modifiers:["ctrl","meta"]},panning:{enabled:!0},scaling:{min:TS,max:MS},keyboard:{enabled:!0},interacting:{nodeMovable:!0,edgeLabelMovable:!1},async:!1};return r},this.dispose=function(){i.rootContainer=new nl,i.graphContainer=new nl,i.x6Options=new nl},this.graphId=zc()}),C0=Symbol("IGraphOptionProvider"),yU=function(i,r){i(C0,{lifecycle:Te.Syringe.Lifecycle.singleton,useDynamic:function(){return{getOptions:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r.getConfig());case 1:case"end":return s.stop()}},t)}))}}}})},Kk=function(i){return function(r){var n=T.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=T.a.useMemo(function(){var t=new Xk;return i(t,n),t},[n]);return e}},bU=function(){return Array.isArray||function(o){return o&&typeof o.length=="number"}}();function Yk(o){return o!==null&&typeof o=="object"}function kS(o){return typeof o=="function"}var CU=function(){function o(i){return Error.call(this),this.message=i?i.length+` errors occurred during unsubscription:
`+i.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=i,this}return o.prototype=Object.create(Error.prototype),o}(),U1=CU,ip=function(){function o(i){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,i&&(this._ctorUnsubscribe=!0,this._unsubscribe=i)}return o.prototype.unsubscribe=function(){var i;if(!this.closed){var r=this,n=r._parentOrParents,e=r._ctorUnsubscribe,t=r._unsubscribe,a=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof o)n.remove(this);else if(n!==null)for(var s=0;s<n.length;++s){var u=n[s];u.remove(this)}if(kS(t)){e&&(this._unsubscribe=void 0);try{t.call(this)}catch(f){i=f instanceof U1?Zk(f.errors):[f]}}if(bU(a))for(var s=-1,l=a.length;++s<l;){var c=a[s];if(Yk(c))try{c.unsubscribe()}catch(d){i=i||[],d instanceof U1?i=i.concat(Zk(d.errors)):i.push(d)}}if(i)throw new U1(i)}},o.prototype.add=function(i){var r=i;if(!i)return o.EMPTY;switch(typeof i){case"function":r=new o(i);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof o)){var n=r;r=new o,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+i+" added to Subscription.")}var e=r._parentOrParents;if(e===null)r._parentOrParents=this;else if(e instanceof o){if(e===this)return r;r._parentOrParents=[e,this]}else if(e.indexOf(this)===-1)e.push(this);else return r;var t=this._subscriptions;return t===null?this._subscriptions=[r]:t.push(r),r},o.prototype.remove=function(i){var r=this._subscriptions;if(r){var n=r.indexOf(i);n!==-1&&r.splice(n,1)}},o.EMPTY=function(i){return i.closed=!0,i}(new o),o}();function Zk(o){return o.reduce(function(i,r){return i.concat(r instanceof U1?r.errors:r)},[])}var EU=function(o){ut(i,o);function i(r,n){return o.call(this)||this}return i.prototype.schedule=function(r,n){return n===void 0&&(n=0),this},i}(ip),OU=function(o){ut(i,o);function i(r,n){var e=o.call(this,r,n)||this;return e.scheduler=r,e.work=n,e.pending=!1,e}return i.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var e=this.id,t=this.scheduler;return e!=null&&(this.id=this.recycleAsyncId(t,e,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(t,this.id,n),this},i.prototype.requestAsyncId=function(r,n,e){return e===void 0&&(e=0),setInterval(r.flush.bind(r,this),e)},i.prototype.recycleAsyncId=function(r,n,e){if(e===void 0&&(e=0),e!==null&&this.delay===e&&this.pending===!1)return n;clearInterval(n)},i.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(r,n);if(e)return e;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(r,n){var e=!1,t=void 0;try{this.work(r)}catch(a){e=!0,t=!!a&&a||new Error(a)}if(e)return this.unsubscribe(),t},i.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,e=n.actions,t=e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,t!==-1&&e.splice(t,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},i}(EU),Jk=function(){function o(i,r){r===void 0&&(r=o.now),this.SchedulerAction=i,this.now=r}return o.prototype.schedule=function(i,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,i).schedule(n,r)},o.now=function(){return Date.now()},o}(),wU=function(o){ut(i,o);function i(r,n){n===void 0&&(n=Jk.now);var e=o.call(this,r,function(){return i.delegate&&i.delegate!==e?i.delegate.now():n()})||this;return e.actions=[],e.active=!1,e.scheduled=void 0,e}return i.prototype.schedule=function(r,n,e){return n===void 0&&(n=0),i.delegate&&i.delegate!==this?i.delegate.schedule(r,n,e):o.prototype.schedule.call(this,r,n,e)},i.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var e;this.active=!0;do if(e=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,e){for(;r=n.shift();)r.unsubscribe();throw e}},i}(Jk),Qk=new wU(OU),xU=Qk,DS=!1,Uc={Promise:void 0,set useDeprecatedSynchronousErrorHandling(o){if(o){var i=new Error;""+i.stack}DS=o},get useDeprecatedSynchronousErrorHandling(){return DS}};function op(o){setTimeout(function(){throw o},0)}var V1={closed:!0,next:function(i){},error:function(i){if(Uc.useDeprecatedSynchronousErrorHandling)throw i;op(i)},complete:function(){}},E0=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),tq=E0,Al=function(o){ut(i,o);function i(r,n,e){var t=o.call(this)||this;switch(t.syncErrorValue=null,t.syncErrorThrown=!1,t.syncErrorThrowable=!1,t.isStopped=!1,arguments.length){case 0:t.destination=V1;break;case 1:if(!r){t.destination=V1;break}if(typeof r=="object"){r instanceof i?(t.syncErrorThrowable=r.syncErrorThrowable,t.destination=r,r.add(t)):(t.syncErrorThrowable=!0,t.destination=new qk(t,r));break}default:t.syncErrorThrowable=!0,t.destination=new qk(t,r,n,e);break}return t}return i.prototype[E0]=function(){return this},i.create=function(r,n,e){var t=new i(r,n,e);return t.syncErrorThrowable=!1,t},i.prototype.next=function(r){this.isStopped||this._next(r)},i.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(r){this.destination.next(r)},i.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},i}(ip),qk=function(o){ut(i,o);function i(r,n,e,t){var a=o.call(this)||this;a._parentSubscriber=r;var s,u=a;return kS(n)?s=n:n&&(s=n.next,e=n.error,t=n.complete,n!==V1&&(u=Object.create(n),kS(u.unsubscribe)&&a.add(u.unsubscribe.bind(u)),u.unsubscribe=a.unsubscribe.bind(a))),a._context=u,a._next=s,a._error=e,a._complete=t,a}return i.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Uc.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},i.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,e=Uc.useDeprecatedSynchronousErrorHandling;if(this._error)!e||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)e?(n.syncErrorValue=r,n.syncErrorThrown=!0):op(r),this.unsubscribe();else{if(this.unsubscribe(),e)throw r;op(r)}}},i.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var e=function(){return r._complete.call(r._context)};!Uc.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(e),this.unsubscribe()):(this.__tryOrSetError(n,e),this.unsubscribe())}else this.unsubscribe()}},i.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(e){if(this.unsubscribe(),Uc.useDeprecatedSynchronousErrorHandling)throw e;op(e)}},i.prototype.__tryOrSetError=function(r,n,e){if(!Uc.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,e)}catch(t){return Uc.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=t,r.syncErrorThrown=!0,!0):(op(t),!0)}return!1},i.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},i}(Al);function SU(o){for(;o;){var i=o,r=i.closed,n=i.destination,e=i.isStopped;if(r||e)return!1;n&&n instanceof Al?o=n:o=null}return!0}function TU(o,i,r){if(o){if(o instanceof Al)return o;if(o[E0])return o[E0]()}return!o&&!i&&!r?new Al(V1):new Al(o,i,r)}var IS=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function MU(o){return o}function nq(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return eD(o)}function eD(o){return o.length===0?MU:o.length===1?o[0]:function(r){return o.reduce(function(n,e){return e(n)},r)}}var RS=function(){function o(i){this._isScalar=!1,i&&(this._subscribe=i)}return o.prototype.lift=function(i){var r=new o;return r.source=this,r.operator=i,r},o.prototype.subscribe=function(i,r,n){var e=this.operator,t=TU(i,r,n);if(e?t.add(e.call(t,this.source)):t.add(this.source||Uc.useDeprecatedSynchronousErrorHandling&&!t.syncErrorThrowable?this._subscribe(t):this._trySubscribe(t)),Uc.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable&&(t.syncErrorThrowable=!1,t.syncErrorThrown))throw t.syncErrorValue;return t},o.prototype._trySubscribe=function(i){try{return this._subscribe(i)}catch(r){Uc.useDeprecatedSynchronousErrorHandling&&(i.syncErrorThrown=!0,i.syncErrorValue=r),SU(i)?i.error(r):console.warn(r)}},o.prototype.forEach=function(i,r){var n=this;return r=tD(r),new r(function(e,t){var a;a=n.subscribe(function(s){try{i(s)}catch(u){t(u),a&&a.unsubscribe()}},t,e)})},o.prototype._subscribe=function(i){var r=this.source;return r&&r.subscribe(i)},o.prototype[IS]=function(){return this},o.prototype.pipe=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return i.length===0?this:eD(i)(this)},o.prototype.toPromise=function(i){var r=this;return i=tD(i),new i(function(n,e){var t;r.subscribe(function(a){return t=a},function(a){return e(a)},function(){return n(t)})})},o.create=function(i){return new o(i)},o}();function tD(o){if(o||(o=Uc.Promise||Promise),!o)throw new Error("no Promise impl found");return o}var AU=function(){function o(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return o.prototype=Object.create(Error.prototype),o}(),sp=AU,PU=function(o){ut(i,o);function i(r,n){var e=o.call(this)||this;return e.subject=r,e.subscriber=n,e.closed=!1,e}return i.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var e=n.indexOf(this.subscriber);e!==-1&&n.splice(e,1)}}},i}(ip),kU=function(o){ut(i,o);function i(r){var n=o.call(this,r)||this;return n.destination=r,n}return i}(Al),nD=function(o){ut(i,o);function i(){var r=o.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return i.prototype[E0]=function(){return new kU(this)},i.prototype.lift=function(r){var n=new rD(this,this);return n.operator=r,n},i.prototype.next=function(r){if(this.closed)throw new sp;if(!this.isStopped)for(var n=this.observers,e=n.length,t=n.slice(),a=0;a<e;a++)t[a].next(r)},i.prototype.error=function(r){if(this.closed)throw new sp;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,e=n.length,t=n.slice(),a=0;a<e;a++)t[a].error(r);this.observers.length=0},i.prototype.complete=function(){if(this.closed)throw new sp;this.isStopped=!0;for(var r=this.observers,n=r.length,e=r.slice(),t=0;t<n;t++)e[t].complete();this.observers.length=0},i.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},i.prototype._trySubscribe=function(r){if(this.closed)throw new sp;return o.prototype._trySubscribe.call(this,r)},i.prototype._subscribe=function(r){if(this.closed)throw new sp;return this.hasError?(r.error(this.thrownError),ip.EMPTY):this.isStopped?(r.complete(),ip.EMPTY):(this.observers.push(r),new PU(this,r))},i.prototype.asObservable=function(){var r=new RS;return r.source=this,r},i.create=function(r,n){return new rD(r,n)},i}(RS),rD=function(o){ut(i,o);function i(r,n){var e=o.call(this)||this;return e.destination=r,e.source=n,e}return i.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},i.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},i.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},i.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):ip.EMPTY},i}(nD),DU=function(o){ut(i,o);function i(r){var n=o.call(this)||this;return n._value=r,n}return Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),i.prototype._subscribe=function(r){var n=o.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},i.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new sp;return this._value},i.prototype.next=function(r){o.prototype.next.call(this,this._value=r)},i}(nD);function IU(o,i){return function(r){return r.lift(new RU(o,i))}}var RU=function(){function o(i,r){this.compare=i,this.keySelector=r}return o.prototype.call=function(i,r){return r.subscribe(new NU(i,this.compare,this.keySelector))},o}(),NU=function(o){ut(i,o);function i(r,n,e){var t=o.call(this,r)||this;return t.keySelector=e,t.hasKey=!1,typeof n=="function"&&(t.compare=n),t}return i.prototype.compare=function(r,n){return r===n},i.prototype._next=function(r){var n;try{var e=this.keySelector;n=e?e(r):r}catch(s){return this.destination.error(s)}var t=!1;if(this.hasKey)try{var a=this.compare;t=a(this.key,n)}catch(s){return this.destination.error(s)}else this.hasKey=!0;t||(this.key=n,this.destination.next(r))},i}(Al);function jU(o,i){return function(n){return n.lift(new LU(o,i))}}var LU=function(){function o(i,r){this.predicate=i,this.thisArg=r}return o.prototype.call=function(i,r){return r.subscribe(new _U(i,this.predicate,this.thisArg))},o}(),_U=function(o){ut(i,o);function i(r,n,e){var t=o.call(this,r)||this;return t.predicate=n,t.thisArg=e,t.count=0,t}return i.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(e){this.destination.error(e);return}n&&this.destination.next(r)},i}(Al),FU=function(i){return function(r){for(var n=0,e=i.length;n<e&&!r.closed;n++)r.next(i[n]);r.complete()}},BU=function(i){return function(r){return i.then(function(n){r.closed||(r.next(n),r.complete())},function(n){return r.error(n)}).then(null,op),r}};function GU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var NS=GU(),rq=NS,zU=function(i){return function(r){var n=i[NS]();do{var e=void 0;try{e=n.next()}catch(t){return r.error(t),r}if(e.done){r.complete();break}if(r.next(e.value),r.closed)break}while(!0);return typeof n.return=="function"&&r.add(function(){n.return&&n.return()}),r}},UU=function(i){return function(r){var n=i[IS]();if(typeof n.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(r)}},VU=function(i){return i&&typeof i.length=="number"&&typeof i!="function"};function HU(o){return!!o&&typeof o.subscribe!="function"&&typeof o.then=="function"}var WU=function(i){if(!!i&&typeof i[IS]=="function")return UU(i);if(VU(i))return FU(i);if(HU(i))return BU(i);if(!!i&&typeof i[NS]=="function")return zU(i);var r=Yk(i)?"an invalid object":"'"+i+"'",n="You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)},$U=function(o){ut(i,o);function i(r){var n=o.call(this)||this;return n.parent=r,n}return i.prototype._next=function(r){this.parent.notifyNext(r)},i.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},i.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},i}(Al),aq=function(o){ut(i,o);function i(r,n,e){var t=o.call(this)||this;return t.parent=r,t.outerValue=n,t.outerIndex=e,t}return i.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this)},i.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},i.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},i}(Al),XU=function(o){ut(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return i.prototype.notifyNext=function(r){this.destination.next(r)},i.prototype.notifyError=function(r){this.destination.error(r)},i.prototype.notifyComplete=function(){this.destination.complete()},i}(Al),iq=function(o){ut(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return i.prototype.notifyNext=function(r,n,e,t){this.destination.next(n)},i.prototype.notifyError=function(r){this.destination.error(r)},i.prototype.notifyComplete=function(r){this.destination.complete()},i}(Al);function KU(o,i){if(!i.closed){if(o instanceof RS)return o.subscribe(i);var r;try{r=WU(o)(i)}catch(n){i.error(n)}return r}}var aD={leading:!0,trailing:!1};function oq(o,i){return i===void 0&&(i=aD),function(r){return r.lift(new YU(o,!!i.leading,!!i.trailing))}}var YU=function(){function o(i,r,n){this.durationSelector=i,this.leading=r,this.trailing=n}return o.prototype.call=function(i,r){return r.subscribe(new ZU(i,this.durationSelector,this.leading,this.trailing))},o}(),ZU=function(o){ut(i,o);function i(r,n,e,t){var a=o.call(this,r)||this;return a.destination=r,a.durationSelector=n,a._leading=e,a._trailing=t,a._hasValue=!1,a}return i.prototype._next=function(r){this._hasValue=!0,this._sendValue=r,this._throttled||(this._leading?this.send():this.throttle(r))},i.prototype.send=function(){var r=this,n=r._hasValue,e=r._sendValue;n&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},i.prototype.throttle=function(r){var n=this.tryDurationSelector(r);n&&this.add(this._throttled=KU(n,new $U(this)))},i.prototype.tryDurationSelector=function(r){try{return this.durationSelector(r)}catch(n){return this.destination.error(n),null}},i.prototype.throttlingDone=function(){var r=this,n=r._throttled,e=r._trailing;n&&n.unsubscribe(),this._throttled=void 0,e&&this.send()},i.prototype.notifyNext=function(){this.throttlingDone()},i.prototype.notifyComplete=function(){this.throttlingDone()},i}(XU);function JU(o,i,r){return i===void 0&&(i=xU),r===void 0&&(r=aD),function(n){return n.lift(new QU(o,i,r.leading,r.trailing))}}var QU=function(){function o(i,r,n,e){this.duration=i,this.scheduler=r,this.leading=n,this.trailing=e}return o.prototype.call=function(i,r){return r.subscribe(new qU(i,this.duration,this.scheduler,this.leading,this.trailing))},o}(),qU=function(o){ut(i,o);function i(r,n,e,t,a){var s=o.call(this,r)||this;return s.duration=n,s.scheduler=e,s.leading=t,s.trailing=a,s._hasTrailingValue=!1,s._trailingValue=null,s}return i.prototype._next=function(r){this.throttled?this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(e8,this.duration,{subscriber:this})),this.leading?this.destination.next(r):this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0))},i.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},i.prototype.clearThrottle=function(){var r=this.throttled;r&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),r.unsubscribe(),this.remove(r),this.throttled=null)},i}(Al);function e8(o){var i=o.subscriber;i.clearThrottle()}function As(o){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];if(!1)var e,t;throw Error("[Immer] minified error nr: "+o+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function xd(o){return!!o&&!!o[qa]}function Rf(o){var i;return!!o&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var e=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return e===Object||typeof e=="function"&&Function.toString.call(e)===u8}(o)||Array.isArray(o)||!!o[S0]||!!((i=o.constructor)===null||i===void 0?void 0:i[S0])||W1(o)||$1(o))}function sq(o){return xd(o)||As(23,o),o[qa].t}function Sd(o,i,r){r===void 0&&(r=!1),Oh(o)===0?(r?Object.keys:up)(o).forEach(function(n){r&&typeof n=="symbol"||i(n,o[n],o)}):o.forEach(function(n,e){return i(e,n,o)})}function Oh(o){var i=o[qa];return i?i.i>3?i.i-4:i.i:Array.isArray(o)?1:W1(o)?2:$1(o)?3:0}function wh(o,i){return Oh(o)===2?o.has(i):Object.prototype.hasOwnProperty.call(o,i)}function H1(o,i){return Oh(o)===2?o.get(i):o[i]}function iD(o,i,r){var n=Oh(o);n===2?o.set(i,r):n===3?o.add(r):o[i]=r}function oD(o,i){return o===i?o!==0||1/o==1/i:o!=o&&i!=i}function W1(o){return o8&&o instanceof Map}function $1(o){return s8&&o instanceof Set}function Ps(o){return o.o||o.t}function jS(o){if(Array.isArray(o))return Array.prototype.slice.call(o);var i=vD(o);delete i[qa];for(var r=up(i),n=0;n<r.length;n++){var e=r[n],t=i[e];t.writable===!1&&(t.writable=!0,t.configurable=!0),(t.get||t.set)&&(i[e]={configurable:!0,writable:!0,enumerable:t.enumerable,value:o[e]})}return Object.create(Object.getPrototypeOf(o),i)}function LS(o,i){return i===void 0&&(i=!1),_S(o)||xd(o)||!Rf(o)||(Oh(o)>1&&(o.set=o.add=o.clear=o.delete=t8),Object.freeze(o),i&&Sd(o,function(r,n){return LS(n,!0)},!0)),o}function t8(){As(2)}function _S(o){return o==null||typeof o!="object"||Object.isFrozen(o)}function Nf(o){var i=$S[o];return i||As(18,o),i}function FS(o,i){$S[o]||($S[o]=i)}function O0(){return x0}function BS(o,i){i&&(Nf("Patches"),o.u=[],o.s=[],o.v=i)}function X1(o){GS(o),o.p.forEach(n8),o.p=null}function GS(o){o===x0&&(x0=o.l)}function sD(o){return x0={p:[],l:x0,h:o,m:!0,_:0}}function n8(o){var i=o[qa];i.i===0||i.i===1?i.j():i.g=!0}function zS(o,i){i._=i.p.length;var r=i.p[0],n=o!==void 0&&o!==r;return i.h.O||Nf("ES5").S(i,o,n),n?(r[qa].P&&(X1(i),As(4)),Rf(o)&&(o=K1(i,o),i.l||Y1(i,o)),i.u&&Nf("Patches").M(r[qa].t,o,i.u,i.s)):o=K1(i,r,[]),X1(i),i.u&&i.v(i.u,i.s),o!==WS?o:void 0}function K1(o,i,r){if(_S(i))return i;var n=i[qa];if(!n)return Sd(i,function(s,u){return uD(o,n,i,s,u,r)},!0),i;if(n.A!==o)return i;if(!n.P)return Y1(o,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var e=n.i===4||n.i===5?n.o=jS(n.k):n.o,t=e,a=!1;n.i===3&&(t=new Set(e),e.clear(),a=!0),Sd(t,function(s,u){return uD(o,n,e,s,u,r,a)}),Y1(o,e,!1),r&&o.u&&Nf("Patches").N(n,r,o.u,o.s)}return n.o}function uD(o,i,r,n,e,t,a){if(xd(e)){var s=K1(o,e,t&&i&&i.i!==3&&!wh(i.R,n)?t.concat(n):void 0);if(iD(r,n,s),!xd(s))return;o.m=!1}else a&&r.add(e);if(Rf(e)&&!_S(e)){if(!o.h.D&&o._<1)return;K1(o,e),i&&i.A.l||Y1(o,e)}}function Y1(o,i,r){r===void 0&&(r=!1),!o.l&&o.h.D&&o.m&&LS(i,r)}function US(o,i){var r=o[qa];return(r?Ps(r):o)[i]}function lD(o,i){if(i in o)for(var r=Object.getPrototypeOf(o);r;){var n=Object.getOwnPropertyDescriptor(r,i);if(n)return n;r=Object.getPrototypeOf(r)}}function rl(o){o.P||(o.P=!0,o.l&&rl(o.l))}function VS(o){o.o||(o.o=jS(o.t))}function w0(o,i,r){var n=W1(i)?Nf("MapSet").F(i,r):$1(i)?Nf("MapSet").T(i,r):o.O?function(e,t){var a=Array.isArray(e),s={i:a?1:0,A:t?t.A:O0(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},u=s,l=T0;a&&(u=[s],l=M0);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return s.k=d,s.j=f,d}(i,r):Nf("ES5").J(i,r);return(r?r.A:O0()).p.push(n),n}function r8(o){return xd(o)||As(22,o),function i(r){if(!Rf(r))return r;var n,e=r[qa],t=Oh(r);if(e){if(!e.P&&(e.i<4||!Nf("ES5").K(e)))return e.t;e.I=!0,n=cD(r,t),e.I=!1}else n=cD(r,t);return Sd(n,function(a,s){e&&H1(e.t,a)===s||iD(n,a,i(s))}),t===3?new Set(n):n}(o)}function cD(o,i){switch(i){case 2:return new Map(o);case 3:return Array.from(o)}return jS(o)}function a8(){function o(a,s){var u=t[a];return u?u.enumerable=s:t[a]=u={configurable:!0,enumerable:s,get:function(){var c=this[qa];return T0.get(c,a)},set:function(c){var f=this[qa];T0.set(f,a,c)}},u}function i(a){for(var s=a.length-1;s>=0;s--){var u=a[s][qa];if(!u.P)switch(u.i){case 5:n(u)&&rl(u);break;case 4:r(u)&&rl(u)}}}function r(a){for(var s=a.t,u=a.k,l=up(u),c=l.length-1;c>=0;c--){var f=l[c];if(f!==qa){var d=s[f];if(d===void 0&&!wh(s,f))return!0;var v=u[f],p=v&&v[qa];if(p?p.t!==d:!oD(v,d))return!0}}var y=!!s[qa];return l.length!==up(s).length+(y?0:1)}function n(a){var s=a.k;if(s.length!==a.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var l=0;l<s.length;l++)if(!s.hasOwnProperty(l))return!0;return!1}function e(a){a.g&&As(3,JSON.stringify(Ps(a)))}var t={};FS("ES5",{J:function(s,u){var l=Array.isArray(s),c=function(d,v){if(d){for(var p=Array(v.length),y=0;y<v.length;y++)Object.defineProperty(p,""+y,o(y,!0));return p}var C=vD(v);delete C[qa];for(var E=up(C),w=0;w<E.length;w++){var x=E[w];C[x]=o(x,d||!!C[x].enumerable)}return Object.create(Object.getPrototypeOf(v),C)}(l,s),f={i:l?5:4,A:u?u.A:O0(),P:!1,I:!1,R:{},l:u,t:s,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,qa,{value:f,writable:!0}),c},S:function(s,u,l){l?xd(u)&&u[qa].A===s&&i(s.p):(s.u&&function c(f){if(f&&typeof f=="object"){var d=f[qa];if(d){var v=d.t,p=d.k,y=d.R,C=d.i;if(C===4)Sd(p,function(j){j!==qa&&(v[j]!==void 0||wh(v,j)?y[j]||c(p[j]):(y[j]=!0,rl(d)))}),Sd(v,function(j){p[j]!==void 0||wh(p,j)||(y[j]=!1,rl(d))});else if(C===5){if(n(d)&&(rl(d),y.length=!0),p.length<v.length)for(var E=p.length;E<v.length;E++)y[E]=!1;else for(var w=v.length;w<p.length;w++)y[w]=!0;for(var x=Math.min(p.length,v.length),N=0;N<x;N++)p.hasOwnProperty(N)||(y[N]=!0),y[N]===void 0&&c(p[N])}}}}(s.p[0]),i(s.p))},K:function(s){return s.i===4?r(s):n(s)}})}function i8(){function o(n){if(!Rf(n))return n;if(Array.isArray(n))return n.map(o);if(W1(n))return new Map(Array.from(n.entries()).map(function(a){return[a[0],o(a[1])]}));if($1(n))return new Set(Array.from(n).map(o));var e=Object.create(Object.getPrototypeOf(n));for(var t in n)e[t]=o(n[t]);return wh(n,S0)&&(e[S0]=n[S0]),e}function i(n){return xd(n)?o(n):n}var r="add";FS("Patches",{$:function(e,t){return t.forEach(function(a){for(var s=a.path,u=a.op,l=e,c=0;c<s.length-1;c++){var f=Oh(l),d=s[c];typeof d!="string"&&typeof d!="number"&&(d=""+d),f!==0&&f!==1||d!=="__proto__"&&d!=="constructor"||As(24),typeof l=="function"&&d==="prototype"&&As(24),typeof(l=H1(l,d))!="object"&&As(15,s.join("/"))}var v=Oh(l),p=o(a.value),y=s[s.length-1];switch(u){case"replace":switch(v){case 2:return l.set(y,p);case 3:As(16);default:return l[y]=p}case r:switch(v){case 1:return y==="-"?l.push(p):l.splice(y,0,p);case 2:return l.set(y,p);case 3:return l.add(p);default:return l[y]=p}case"remove":switch(v){case 1:return l.splice(y,1);case 2:return l.delete(y);case 3:return l.delete(a.value);default:return delete l[y]}default:As(17,u)}}),e},N:function(e,t,a,s){switch(e.i){case 0:case 4:case 2:return function(u,l,c,f){var d=u.t,v=u.o;Sd(u.R,function(p,y){var C=H1(d,p),E=H1(v,p),w=y?wh(d,p)?"replace":r:"remove";if(C!==E||w!=="replace"){var x=l.concat(p);c.push(w==="remove"?{op:w,path:x}:{op:w,path:x,value:E}),f.push(w===r?{op:"remove",path:x}:w==="remove"?{op:r,path:x,value:i(C)}:{op:"replace",path:x,value:i(C)})}})}(e,t,a,s);case 5:case 1:return function(u,l,c,f){var d=u.t,v=u.R,p=u.o;if(p.length<d.length){var y=[p,d];d=y[0],p=y[1];var C=[f,c];c=C[0],f=C[1]}for(var E=0;E<d.length;E++)if(v[E]&&p[E]!==d[E]){var w=l.concat([E]);c.push({op:"replace",path:w,value:i(p[E])}),f.push({op:"replace",path:w,value:i(d[E])})}for(var x=d.length;x<p.length;x++){var N=l.concat([x]);c.push({op:r,path:N,value:i(p[x])})}d.length<p.length&&f.push({op:"replace",path:l.concat(["length"]),value:d.length})}(e,t,a,s);case 3:return function(u,l,c,f){var d=u.t,v=u.o,p=0;d.forEach(function(y){if(!v.has(y)){var C=l.concat([p]);c.push({op:"remove",path:C,value:y}),f.unshift({op:r,path:C,value:y})}p++}),p=0,v.forEach(function(y){if(!d.has(y)){var C=l.concat([p]);c.push({op:r,path:C,value:y}),f.unshift({op:"remove",path:C,value:y})}p++})}(e,t,a,s)}},M:function(e,t,a,s){a.push({op:"replace",path:[],value:t===WS?void 0:t}),s.push({op:"replace",path:[],value:e})}})}function fD(){function o(s,u){function l(){this.constructor=s}e(s,u),s.prototype=(l.prototype=u.prototype,new l)}function i(s){s.o||(s.R=new Map,s.o=new Map(s.t))}function r(s){s.o||(s.o=new Set,s.t.forEach(function(u){if(Rf(u)){var l=w0(s.A.h,u,s);s.p.set(u,l),s.o.add(l)}else s.o.add(u)}))}function n(s){s.g&&As(3,JSON.stringify(Ps(s)))}var e=function(u,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])})(u,l)},t=function(){function s(l,c){return this[qa]={i:2,l:c,A:c?c.A:O0(),P:!1,I:!1,o:void 0,R:void 0,t:l,k:this,C:!1,g:!1},this}o(s,Map);var u=s.prototype;return Object.defineProperty(u,"size",{get:function(){return Ps(this[qa]).size}}),u.has=function(l){return Ps(this[qa]).has(l)},u.set=function(l,c){var f=this[qa];return n(f),Ps(f).has(l)&&Ps(f).get(l)===c||(i(f),rl(f),f.R.set(l,!0),f.o.set(l,c),f.R.set(l,!0)),this},u.delete=function(l){if(!this.has(l))return!1;var c=this[qa];return n(c),i(c),rl(c),c.t.has(l)?c.R.set(l,!1):c.R.delete(l),c.o.delete(l),!0},u.clear=function(){var l=this[qa];n(l),Ps(l).size&&(i(l),rl(l),l.R=new Map,Sd(l.t,function(c){l.R.set(c,!1)}),l.o.clear())},u.forEach=function(l,c){var f=this;Ps(this[qa]).forEach(function(d,v){l.call(c,f.get(v),v,f)})},u.get=function(l){var c=this[qa];n(c);var f=Ps(c).get(l);if(c.I||!Rf(f)||f!==c.t.get(l))return f;var d=w0(c.A.h,f,c);return i(c),c.o.set(l,d),d},u.keys=function(){return Ps(this[qa]).keys()},u.values=function(){var l,c=this,f=this.keys();return(l={})[Z1]=function(){return c.values()},l.next=function(){var d=f.next();return d.done?d:{done:!1,value:c.get(d.value)}},l},u.entries=function(){var l,c=this,f=this.keys();return(l={})[Z1]=function(){return c.entries()},l.next=function(){var d=f.next();if(d.done)return d;var v=c.get(d.value);return{done:!1,value:[d.value,v]}},l},u[Z1]=function(){return this.entries()},s}(),a=function(){function s(l,c){return this[qa]={i:3,l:c,A:c?c.A:O0(),P:!1,I:!1,o:void 0,t:l,k:this,p:new Map,g:!1,C:!1},this}o(s,Set);var u=s.prototype;return Object.defineProperty(u,"size",{get:function(){return Ps(this[qa]).size}}),u.has=function(l){var c=this[qa];return n(c),c.o?!!c.o.has(l)||!(!c.p.has(l)||!c.o.has(c.p.get(l))):c.t.has(l)},u.add=function(l){var c=this[qa];return n(c),this.has(l)||(r(c),rl(c),c.o.add(l)),this},u.delete=function(l){if(!this.has(l))return!1;var c=this[qa];return n(c),r(c),rl(c),c.o.delete(l)||!!c.p.has(l)&&c.o.delete(c.p.get(l))},u.clear=function(){var l=this[qa];n(l),Ps(l).size&&(r(l),rl(l),l.o.clear())},u.values=function(){var l=this[qa];return n(l),r(l),l.o.values()},u.entries=function(){var l=this[qa];return n(l),r(l),l.o.entries()},u.keys=function(){return this.values()},u[Z1]=function(){return this.values()},u.forEach=function(l,c){for(var f=this.values(),d=f.next();!d.done;)l.call(c,d.value,d.value,this),d=f.next()},s}();FS("MapSet",{F:function(u,l){return new t(u,l)},T:function(u,l){return new a(u,l)}})}function uq(){a8(),fD(),i8()}function lq(o){return o}function cq(o){return o}var dD,x0,HS=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",o8=typeof Map!="undefined",s8=typeof Set!="undefined",hD=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",WS=HS?Symbol.for("immer-nothing"):((dD={})["immer-nothing"]=!0,dD),S0=HS?Symbol.for("immer-draftable"):"__$immer_draftable",qa=HS?Symbol.for("immer-state"):"__$immer_state",Z1=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",fq={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(i){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+i},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(i){return"Cannot apply patch, path doesn't resolve: "+i},16:'Sets cannot have "replace" patches.',17:function(i){return"Unsupported patch operation: "+i},18:function(i){return"The plugin for '"+i+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+i+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(i){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+i+"'"},22:function(i){return"'current' expects a draft, got: "+i},23:function(i){return"'original' expects a draft, got: "+i},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},u8=""+Object.prototype.constructor,up=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(o){return Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o))}:Object.getOwnPropertyNames,vD=Object.getOwnPropertyDescriptors||function(o){var i={};return up(o).forEach(function(r){i[r]=Object.getOwnPropertyDescriptor(o,r)}),i},$S={},T0={get:function(i,r){if(r===qa)return i;var n=Ps(i);if(!wh(n,r))return function(t,a,s){var u,l=lD(a,s);return l?"value"in l?l.value:(u=l.get)===null||u===void 0?void 0:u.call(t.k):void 0}(i,n,r);var e=n[r];return i.I||!Rf(e)?e:e===US(i.t,r)?(VS(i),i.o[r]=w0(i.A.h,e,i)):e},has:function(i,r){return r in Ps(i)},ownKeys:function(i){return Reflect.ownKeys(Ps(i))},set:function(i,r,n){var e=lD(Ps(i),r);if(e==null?void 0:e.set)return e.set.call(i.k,n),!0;if(!i.P){var t=US(Ps(i),r),a=t==null?void 0:t[qa];if(a&&a.t===n)return i.o[r]=n,i.R[r]=!1,!0;if(oD(n,t)&&(n!==void 0||wh(i.t,r)))return!0;VS(i),rl(i)}return i.o[r]===n&&(n!==void 0||r in i.o)||Number.isNaN(n)&&Number.isNaN(i.o[r])||(i.o[r]=n,i.R[r]=!0),!0},deleteProperty:function(i,r){return US(i.t,r)!==void 0||r in i.t?(i.R[r]=!1,VS(i),rl(i)):delete i.R[r],i.o&&delete i.o[r],!0},getOwnPropertyDescriptor:function(i,r){var n=Ps(i),e=Reflect.getOwnPropertyDescriptor(n,r);return e&&{writable:!0,configurable:i.i!==1||r!=="length",enumerable:e.enumerable,value:n[r]}},defineProperty:function(){As(11)},getPrototypeOf:function(i){return Object.getPrototypeOf(i.t)},setPrototypeOf:function(){As(12)}},M0={};Sd(T0,function(o,i){M0[o]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),M0.deleteProperty=function(o,i){return M0.set.call(this,o,i,void 0)},M0.set=function(o,i,r){return T0.set.call(this,o[0],i,r,o[0])};var l8=function(){function o(r){var n=this;this.O=hD,this.D=!0,this.produce=function(e,t,a){if(typeof e=="function"&&typeof t!="function"){var s=t;t=e;var u=n;return function(y){var C=this;y===void 0&&(y=s);for(var E=arguments.length,w=Array(E>1?E-1:0),x=1;x<E;x++)w[x-1]=arguments[x];return u.produce(y,function(N){var j;return(j=t).call.apply(j,[C,N].concat(w))})}}var l;if(typeof t!="function"&&As(6),a!==void 0&&typeof a!="function"&&As(7),Rf(e)){var c=sD(n),f=w0(n,e,void 0),d=!0;try{l=t(f),d=!1}finally{d?X1(c):GS(c)}return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(y){return BS(c,a),zS(y,c)},function(y){throw X1(c),y}):(BS(c,a),zS(l,c))}if(!e||typeof e!="object"){if((l=t(e))===void 0&&(l=e),l===WS&&(l=void 0),n.D&&LS(l,!0),a){var v=[],p=[];Nf("Patches").M(e,l,v,p),a(v,p)}return l}As(21,e)},this.produceWithPatches=function(e,t){if(typeof e=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return n.produceWithPatches(l,function(v){return e.apply(void 0,[v].concat(f))})};var a,s,u=n.produce(e,t,function(l,c){a=l,s=c});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(l){return[l,a,s]}):[u,a,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var i=o.prototype;return i.createDraft=function(r){Rf(r)||As(8),xd(r)&&(r=r8(r));var n=sD(this),e=w0(this,r,void 0);return e[qa].C=!0,GS(n),e},i.finishDraft=function(r,n){var e=r&&r[qa],t=e.A;return BS(t,n),zS(void 0,t)},i.setAutoFreeze=function(r){this.D=r},i.setUseProxies=function(r){r&&!hD&&As(20),this.O=r},i.applyPatches=function(r,n){var e;for(e=n.length-1;e>=0;e--){var t=n[e];if(t.path.length===0&&t.op==="replace"){r=t.value;break}}e>-1&&(n=n.slice(e+1));var a=Nf("Patches").$;return xd(r)?a(r,n):this.produce(r,function(s){return a(s,n)})},o}(),Pl=new l8,gD=Pl.produce,dq=Pl.produceWithPatches.bind(Pl),c8=Pl.setAutoFreeze.bind(Pl),hq=Pl.setUseProxies.bind(Pl),vq=Pl.applyPatches.bind(Pl),f8=Pl.createDraft.bind(Pl),d8=Pl.finishDraft.bind(Pl),gq=gD;fD(),c8(!1);var Vc;(function(o){o.EMPTY_VALUE=Symbol("EMPTY_MODEL_VALUE");function i(n){return n!==o.EMPTY_VALUE}o.isValidValue=i;function r(n){return n.pipe(IU(),jU(function(e){return i(e)}),JU(17,Qk,{leading:!1,trailing:!0}))}o.defaultPipeFunction=r})(Vc||(Vc={}));var zv=Object(be.a)(function o(){var i=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vc.EMPTY_VALUE,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30;Object(De.a)(this,o),this.toDispose=new vi,this.watch=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vc.defaultPipeFunction;i.subject$.observers.length+1>i.maxSubscription&&console.warn("".concat(i.subject$," reach maxSubscription limitation, please check"));var a=t?t(i.subject$):i.subject$,s=a.subscribe(e);return zr.create(function(){s.unsubscribe()})},this.getValue=function(){return i.subject$.getValue()},this.setValue=function(e){if(!!i.subject$){if(typeof e=="function"){var t=i.subject$.getValue(),a=gD(t,function(s){e(s)});Vc.isValidValue(a)&&i.setValue(a);return}i.subject$.next(e)}},this.hasValidValue=function(){var e=i.getValue();return Vc.isValidValue(e)},this.getValidValue=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function e(){var t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=new nl,!this.hasValidValue()){u.next=3;break}return u.abrupt("return",this.getValue());case 3:return a=this.watch(function(l){Vc.isValidValue(l)&&(t.resolve(l),a.dispose())}),u.abrupt("return",t.promise);case 5:case"end":return u.stop()}},e,this)}))},this.dispose=function(){i.toDispose.dispose()},this.subject$=new DU(r||Vc.EMPTY_VALUE),this.maxSubscription=n,this.toDispose.push(zr.create(function(){i.subject$.complete(),i.subject$.unsubscribe(),i.subject$=null}))}),xh=Te.Syringe.defineToken("IFrontendApplicationContribution"),Uv=Symbol("IGraphCommandService"),$a=Te.Syringe.defineToken("ICommandHandler"),Xa=Symbol("ICommandContextProvider"),XS=Symbol("IGraphCommandFactory"),J1=Te.Syringe.defineToken("IGraphCommandContribution"),KS;(function(o){function i(e){return!!e&&e===Object(e)&&"id"in e}o.is=i;function r(e,t){if(e.label&&t.label){var a=(e.category?"".concat(e.category,": ").concat(e.label):e.label).toLowerCase(),s=(t.category?"".concat(t.category,": ").concat(t.label):t.label).toLowerCase();return a.localeCompare(s)}else return 0}o.compareCommands=r;function n(e,t){return e.id===t.id&&e.label===t.label&&e.iconName===t.iconName&&e.category===t.category}o.equals=n})(KS||(KS={}));var YS=function(){function o(i){var r=this;Object(De.a)(this,o),this.contributionProvider=i,this.redoStack=[],this.undoStack=[],this.commands=new Map,this.factories=new Map,this.disposables=new Map,this.cmdChangeEvent=new zv(null),this.Globals=new zv(new Map),this.setGlobal=function(n,e){r.Globals.setValue(function(t){t.set(n,e)})},this.getGlobal=function(n){var e=r.Globals.getValue();return e.get(n)},this.undoCommand=function(){return ie(r,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=this.undoStack.pop(),e){a.next=4;break}return console.error("empty undo stack"),a.abrupt("return");case 4:return a.next=6,e.undo();case 6:this.redoStack.push(e),this.cmdChangeEvent.setValue(null);case 8:case"end":return a.stop()}},n,this)}))},this.redoCommand=function(){return ie(r,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=this.redoStack.pop(),e){a.next=4;break}return console.error("empty undo stack"),a.abrupt("return");case 4:return a.next=6,e.redo();case 6:this.undoStack.push(e),this.cmdChangeEvent.setValue(null);case 8:case"end":return a.stop()}},n,this)}))},this.registerDisposableCommand=function(n){var e=new vi,t={registerCommand:function(s,u){var l=r.registerCommand(s,u);return e.push(l),l}};return n(t),e}}return Object(be.a)(o,[{key:"watchChange",get:function(){return this.cmdChangeEvent.watch}},{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Qn.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerGraphCommands(this)}}catch(a){n.e(a)}finally{n.f()}}},{key:"executeCommandPipeline",value:function(r){return ie(this,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:e=null,t=Object(Qn.a)(r),v.prev=2,t.s();case 4:if((a=t.n()).done){v.next=17;break}return s=a.value,u=e==null?void 0:e.contextProvider(),v.next=9,s==null?void 0:s.getCommandOption(u);case 9:return l=v.sent,c=l.args,f=l.hooks,v.next=14,this.executeCommand(s==null?void 0:s.commandId,c,f);case 14:e=v.sent;case 15:v.next=4;break;case 17:v.next=22;break;case 19:v.prev=19,v.t0=v.catch(2),t.e(v.t0);case 22:return v.prev=22,t.f(),v.finish(22);case 25:return this.cmdChangeEvent.setValue(null),v.abrupt("return",e);case 27:case"end":return v.stop()}},n,this,[[2,19,22,25]])}))}},{key:"executeCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ie(this,void 0,void 0,Object(D.a)().mark(function t(){var a,s;return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=this.getFactory(r),!a){l.next=10;break}return l.next=4,a.createCommand(r,n,e);case 4:return s=l.sent,l.next=7,s.execute();case 7:return s.isUndoable()&&this.undoStack.push(s),this.cmdChangeEvent.setValue(null),l.abrupt("return",s);case 10:throw Object.assign(new Error("The command '".concat(r,"' cannot be executed. There are no active handlers available for the command.")),{code:"NO_ACTIVE_HANDLER"});case 11:case"end":return l.stop()}},t,this)}))}},{key:"executeUndoCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ie(this,void 0,void 0,Object(D.a)().mark(function t(){var a,s;return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=this.getFactory(r),!a){l.next=8;break}return l.next=4,a.createCommand(r,n,e);case 4:return s=l.sent,l.next=7,s.execute();case 7:return l.abrupt("return",s);case 8:throw Object.assign(new Error("The command '".concat(r,"' cannot be executed. There are no active handlers available for the command.")),{code:"NO_ACTIVE_HANDLER"});case 9:case"end":return l.stop()}},t,this)}))}},{key:"createCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ie(this,void 0,void 0,Object(D.a)().mark(function t(){var a,s;return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=this.getFactory(r),!a){l.next=6;break}return l.next=4,a.createCommand(r,n,e);case 4:return s=l.sent,l.abrupt("return",s);case 6:throw Object.assign(new Error("The command '".concat(r,"' cannot be executed. There are no active handlers available for the command.")),{code:"NO_ACTIVE_HANDLER"});case 7:case"end":return l.stop()}},t,this)}))}},{key:"isUndoable",get:function(){return this.undoStack.length>0}},{key:"isRedoable",get:function(){return this.redoStack.length>0}},{key:"hasCommand",value:function(r){return this.commands.has(r)}},{key:"getCommand",value:function(r){return this.commands.get(r)}},{key:"registerCommand",value:function(r,n){var e=this;if(this.factories.has(r.id))return console.warn("A command ".concat(r.id," is already registered.")),zr.NULL;var t=new vi(this.doRegisterCommand(r),this.registerFactory(r.id,n),zr.create(function(){return e.disposables.delete(r.id)}));return this.disposables.set(r.id,t),t}},{key:"doRegisterCommand",value:function(r){var n=this;return this.commands.set(r.id,r),zr.create(function(){return n.disposables.delete(r.id)})}},{key:"unregisterCommand",value:function(r){var n=KS.is(r)?r.id:r,e=this.disposables.get(n);e&&e.dispose()}},{key:"hasFactory",value:function(r){var n=this.factories.get(r);return!!n}},{key:"getFactory",value:function(r){var n=this.factories.get(r);return n}},{key:"registerFactory",value:function(r,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.hasFactory(r)&&t===!1&&console.error("cannot register command:",r),this.factories.set(r,n),zr.create(function(){e.factories.delete(r)})}},{key:"getAllFactories",value:function(){return Array.from(this.factories.entries())}}]),o}();YS=Je([Object(Te.singleton)({contrib:[xh,Uv]}),Vt(0,Object(Te.contrib)(J1)),Be("design:paramtypes",[Object])],YS);var h8=Object(Te.Module)(function(o){Te.Contribution.register(o,J1),o(YS)}),Vv=Te.Syringe.defineToken("IModelService"),Hv=Te.Syringe.defineToken("IModelContribution"),pD=Symbol("IModelOptionProvider"),A0;(function(o){o.ASYNC_SRRIES="ASYNC_SRRIES",o.ASYNC_PARALLEL="ASYNC_PARALLEL"})(A0||(A0={}));var v8=h("xdlL"),g8=h("ZKkB"),p8=h("r5xO"),m8=h.n(p8),lp;(function(o){var i;(function(e){e.INVALID_HOOK_BEFORE="INVALID_HOOK_BEFORE",e.INVALID_HOOK_AFTER="INVALID_HOOK_AFTER",e.INVALID_HOOK_ARGS_LENGTH="INVALID_HOOK_ARGS_LENGTH"})(i=o.ErrorEnum||(o.ErrorEnum={}));var r=function(e){Object(or.a)(a,e);var t=Object(sr.a)(a);function a(s,u){var l;Object(De.a)(this,a),Array.isArray(u)&&(u=u.filter(function(v){return!!v}).join(" ")),l=t.call(this,"".concat(s,": ").concat(u)),Error.captureStackTrace&&Error.captureStackTrace(Object(Vo.a)(l),a),l.code=s,l.contexts={};for(var c=arguments.length,f=new Array(c>2?c-2:0),d=2;d<c;d++)f[d-2]=arguments[d];return f.forEach(function(v){typeof v=="object"&&Object.entries(v).forEach(function(p){var y=Object(Ue.a)(p,2),C=y[0],E=y[1];C!=="key"&&E&&(l.contexts[C]=JSON.parse(JSON.stringify(E)))})}),l}return Object(be.a)(a,[{key:"toString",value:function(){return"".concat(this.code,": ").concat(this.message)}}]),a}(Object(g8.a)(Error));o.HookError=r;var n=function(t,a){for(var s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];return Object(v8.a)(r,[t,a].concat(u))};o.HookBeforeError=function(){return n(i.INVALID_HOOK_BEFORE,["hook require a before dependency but not exist in hookmap"])},o.HookAfterError=function(){return n(i.INVALID_HOOK_AFTER,["hook require a after dependency but not exist in hookmap"])},o.InvalidHookArguments=function(e){return n(i.INVALID_HOOK_ARGS_LENGTH,["hook handlers must have 0 to 2 arguments","but got ".concat(e.handler.length)])}})(lp||(lp={}));var Q1;(function(o){o.normalize=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=Array.isArray(i)?i:[i],e=[];return r.forEach(function(t){e.push(t)}),[].concat(e,Object(Qe.a)(n)).filter(function(t){return t&&!!t.handler})},o.sort=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=[];i.forEach(function(t){if(t.before){if(!r.has(t.before))throw lp.HookBeforeError();var a=[t,r.get(t.before)];n.push(a)}if(t.after){if(!r.has(t.after))throw lp.HookBeforeError();var s=[r.get(t.after),t];n.push(s)}});var e=m8.a.array(i,n);return e}})(Q1||(Q1={}));var y8=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.isResolved=!1,this.isRejected=!1,this.promise=new Promise(function(r,n){i.resolve=function(e){i.isResolved=!0,r(e)},i.reject=function(e){i.isRejected=!0,n(e)}})}),Hc=Object(be.a)(function o(i){var r=this,n;Object(De.a)(this,o),this.scheduleType=A0.ASYNC_SRRIES,this.hasHook=function(e){return r.hookMap.has(e)},this.getHooks=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=Q1.normalize(e,r.hookMap);return t?Q1.sort(a,r.hookMap):a},this.registerHook=function(e){return r.hookMap.has(e.name)&&console.error("".concat(e.name," is duplicated in hookmap")),r.hookMap.set(e.name,e),{dispose:function(){r.hookMap.delete(e.name)}}},this.call=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s){return ie(r,void 0,void 0,Object(D.a)().mark(function u(){return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",s);case 1:case"end":return c.stop()}},u)}))},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ie(r,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return u=this.getHooks(a,!0),l=this.schedulers[this.scheduleType],f.abrupt("return",l(e,t,u));case 3:case"end":return f.stop()}},s,this)}))},this.schedulers=(n={},Object(Xe.a)(n,A0.ASYNC_SRRIES,function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ie(r,void 0,void 0,Object(D.a)().mark(function s(){var u,l,c,f,d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:u=t,l=Object(Qn.a)(a),y.prev=2,l.s();case 4:if((c=l.n()).done){y.next=26;break}if(f=c.value,![0,1].includes(f.handler.length)){y.next=10;break}return y.next=9,f.handler.call(this,e);case 9:return y.abrupt("continue",24);case 10:if(!([2].includes(f.handler.length)&&u!==null)){y.next=22;break}return y.next=13,f.handler.call(this,e,u);case 13:if(d=y.sent,d!==null){y.next=19;break}return u=null,y.abrupt("break",26);case 19:if(typeof d!="function"){y.next=22;break}return u=d,y.abrupt("continue",24);case 22:throw v=lp.InvalidHookArguments(f),v;case 24:y.next=4;break;case 26:y.next=31;break;case 28:y.prev=28,y.t0=y.catch(2),l.e(y.t0);case 31:return y.prev=31,l.f(),y.finish(31);case 34:if(!u){y.next=38;break}return y.next=37,u.call(this,e);case 37:return y.abrupt("return",y.sent);case 38:case"end":return y.stop()}},s,this,[[2,28,31,34]])}))}),Object(Xe.a)(n,A0.ASYNC_PARALLEL,function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ie(r,void 0,void 0,Object(D.a)().mark(function s(){var u=this,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(l=a.map(function(v){if([0,1].includes(v.handler.length))return v.handler.call(u,e);if([2].includes(v.handler.length))return v.handler.call(u,e,t);throw lp.InvalidHookArguments(v)}),c=new y8,Promise.all(l).then(function(v){return c.resolve(v)}),!t){d.next=7;break}return d.next=6,t.call(this,c);case 6:return d.abrupt("return",d.sent);case 7:case"end":return d.stop()}},s,this)}))}),n),this.hookMap=new Map,i&&i.type&&(this.scheduleType=i.type)}),ZS=Te.Syringe.defineToken("IHookService"),tc=Te.Syringe.defineToken("IHookContribution"),b8=function(){return{graphOptions:new Hc,reactNodeRender:new Hc,reactEdgeLabelRender:new Hc,afterGraphInit:new Hc,beforeGraphDestroy:new Hc,x6Events:new Hc}},mD=function(){return{dispose:function(){}}},JS;(function(o){o.CONFIG_TYPE="XFlowHook"})(JS||(JS={}));var P0=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.CONFIG_TYPE=JS.CONFIG_TYPE,this.time=Date.now(),this.setRegisterHook=function(r){i.hookRegisterFunc=r},this.setRegisterHookhub=function(r){i.hookhubRegisterFn=r},this.getConfig=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={CONFIG_TYPE:this.CONFIG_TYPE,hookRegisterFn:this.hookRegisterFunc||mD,hookhubRegisterFn:this.hookhubRegisterFn||mD},t.abrupt("return",n);case 2:case"end":return t.stop()}},r,this)}))},this.dispose=function(){}}),q1=function(){function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.hookProvider=function(){return i.hooks},this.registerHook=function(r){return r(i.hooks)},this.registerHookHub=function(r,n){return i.hooks[r]=n,{dispose:function(){delete i.hooks[r]}}},this.onStart=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:n=this.contributionProvider.getContributions(),e=Object(Qn.a)(n);try{for(e.s();!(t=e.n()).done;)a=t.value,a.registerHookHub(this)}catch(d){e.e(d)}finally{e.f()}s=Object(Qn.a)(n);try{for(s.s();!(u=s.n()).done;)l=u.value,l.registerHook(this.hooks)}catch(d){s.e(d)}finally{s.f()}case 5:case"end":return f.stop()}},r,this)}))},this.hooks=b8()}return Object(be.a)(o,[{key:"onStop",value:function(){this.toDispose.dispose()}}]),o}();Je([Object(Te.contrib)(tc),Be("design:type",Object)],q1.prototype,"contributionProvider",void 0),q1=Je([Object(Te.singleton)({contrib:[xh,ZS]}),Be("design:paramtypes",[])],q1);var yD;(function(o){o.pluginId="GraphEventPlugin"})(yD||(yD={}));var e2=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.hookConfig.getConfig();case 2:return e=u.sent,t=e.hookRegisterFn,a=t(r),u.abrupt("return",zr.create(function(){a.dispose()}));case 6:case"end":return u.stop()}},n,this)}))},this.registerHookHub=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.hookConfig.getConfig();case 2:return e=u.sent,t=e.hookhubRegisterFn,a=t(r),u.abrupt("return",zr.create(function(){a.dispose()}));case 6:case"end":return u.stop()}},n,this)}))}});Je([Object(Te.inject)(P0),Be("design:type",P0)],e2.prototype,"hookConfig",void 0),e2=Je([Object(Te.singleton)({contrib:tc})],e2);var C8=function(){return null},bD={dispose:C8};function pq(o,i){var r;return function(){clearTimeout(r),r=window.setTimeout(o,i)}}function E8(o){var i;return function(){i||(i=requestAnimationFrame(function(){i=null,o()}))}}var CD=function(i){var r=document.createElement("style");return r.setAttribute("type","text/css"),document.head.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),r};function O8(o){return typeof o=="function"&&!!o.prototype.isReactComponent}function w8(o){return typeof o=="function"&&String(o).includes("return React.createElement")}function t2(o){return O8(o)||w8(o)}var k0;(function(o){o.pluginId="base-graph-events"})(k0||(k0={}));var n2=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.registerHookHub=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new vi,a=[r.x6Events.registerHook({name:k0.pluginId,handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.graphOptions.getOptions();case 2:d=y.sent,v=d.events,v.forEach(function(C){c.push(C)});case 5:case"end":return y.stop()}},f,this)}))}}),r.afterGraphInit.registerHook({name:k0.pluginId,handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v,p,y,C;return Object(D.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return v=c.commandService,p=c.modelService,y=c.graph,w.next=3,r.x6Events.call([],function(x){return ie(d,void 0,void 0,Object(D.a)().mark(function N(){return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",x.map(function($){var Z=function(de){$.callback(de,v,p,y)};return y.on($.eventName,Z),{dispose:function(){y.off($.eventName,Z)}}}));case 1:case"end":return B.stop()}},N)}))});case 3:C=w.sent,t.pushAll(C);case 5:case"end":return w.stop()}},f)}))}}),r.afterGraphInit.registerHook({name:"add auto resize event",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d,v,p,y,C,E;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:d=c.commandService,v=c.options,p=c.graph,y=E8(function(){d.executeCommand(za.GRAPH_RESIZE.id,{})}),window.addEventListener("resize",y),C=v.rootContainer,E=new ResizeObserver(function(){return p.resize(C.clientWidth)}),C&&E.observe(C),t.push(zr.create(function(){window.removeEventListener("resize",y)}));case 7:case"end":return x.stop()}},f)}))}}),r.beforeGraphDestroy.registerHook({name:k0.pluginId,handler:function(){return ie(e,void 0,void 0,Object(D.a)().mark(function c(){return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:t.dispose();case 1:case"end":return d.stop()}},c)}))}})],t.pushAll(a),u.abrupt("return",t);case 4:case"end":return u.stop()}},n)}))}});Je([Object(Te.inject)(C0),Be("design:type",Object)],n2.prototype,"graphOptions",void 0),n2=Je([Object(Te.singleton)({contrib:tc})],n2);var x8=function(i){return Object(Te.Module)(function(r){Te.Contribution.register(r,tc),r(e2),r(n2),r(q1),r(P0,{useValue:i})})},Wc=h("LvDl"),S8=function(){function o(){var i=this;Object(De.a)(this,o),this.extensions=[],this.containerClassNames=new Set,this.addCoreModule=function(r){return i.extensions.unshift(r),zr.create(function(){i.removeExtension(r)})},this.addExtension=function(r){return i.extensions.push(r),zr.create(function(){i.removeExtension(r)})},this.getExtension=function(r){return Object(Wc.find)(i.extensions,function(n){return Object(Wc.get)(n,"config.CONFIG_TYPE")===r})},this.removeExtension=function(r){var n=i.extensions.indexOf(r);n>-1&&i.extensions.splice(n,1)},this.getInstanceId=function(){return i.instanceId},this.addContainerClassNames=function(r){return i.containerClassNames.add(r)},this.getContainerClassNames=function(){return Array.from(i.containerClassNames)},this.getAllExtensions=function(){return i.extensions},this.getAllExtensionConfigs=function(){return i.extensions.map(function(r){return r.config})},this.instanceId=zc()}return Object(be.a)(o,[{key:"has",value:function(r){return this.extensions.some(function(n){return n.config.CONFIG_TYPE===r})}}]),o}(),T8=function(){var i=T.a.useMemo(function(){return new S8},[]);return i},ED=T.a.createContext({}),nc=function(){return T.a.useContext(ED)},M8=function(i){var r=nc(),n=T.a.useMemo(function(){return i.config?i.config:new P0},[]);return T.a.useEffect(function(){var e=r.addCoreModule({config:n,createModule:x8});return function(){e.dispose(),n.dispose()}},[r,n]),null},A8=function(i){return function(r){var n=T.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=T.a.useMemo(function(){var t=new P0;return i(t,n),t},[n]);return e}},QS=T.a.createContext({cell:null,x6Graph:null,commands:null,modelService:null}),OD=function(){return T.a.useContext(QS)};function r2(o,i,r){return function(n){var e=this,t=n==null?void 0:n.getData(),a=n==null?void 0:n.getSize(),s=n==null?void 0:n.getPosition(),u=function(){return T.a.createElement(QS.Provider,{value:{cell:n,x6Graph:e,commands:i,modelService:r}},T.a.createElement(o,{cell:n,data:t,size:a,position:s}))};return T.a.createElement(u,null)}}function P8(o,i,r){return function(n){var e=this,t=n==null?void 0:n.getData(),a=function(){return T.a.createElement(QS.Provider,{value:{cell:n,x6Graph:e,commands:i,modelService:r}},T.a.createElement(o,{data:t,cell:n}))};return T.a.createElement(a,null)}}var mq=function(){var i=T.a.useState(!1),r=Object(Ue.a)(i,2),n=r[0],e=r[1],t=OD(),a=t.x6Graph,s=t.cell;return T.a.useEffect(function(){var u=function(c){var f=c.added,d=c.removed,v=f.filter(function(y){return y.isNode()}).some(function(y){y.id,s.id});if(v){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!0})),e(!0);return}var p=d.filter(function(y){return y.isNode()}).some(function(y){y.id,s.id});if(p){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!1})),e(!1);return}};return a.on("selection:changed",u),function(){a.off("selection:changed",u)}},[a]),[n]},Wv=Symbol("IGraphProvider"),wD=Symbol("ICommandServiceProvider"),xD=Symbol("IModelServiceProvider"),Sh=function(){function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.graphMap=new Map,this.getGraph=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a,s,u,l,c,f,d,v,p,y,C,E,w;return Object(D.a)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(t=this.graphMap.get(r),t){N.next=31;break}return t=new nl,this.graphMap.set(r,t),N.next=6,this.optionProvider.getOptions();case 6:return a=N.sent,s=this.hookService.hookProvider(),N.next=10,s.graphOptions.call(a.x6Options);case 10:return u=N.sent,l=a.graphContainer,c=a.edgeRender,f=a.nodeRender,d=a.edgeTypeParser,N.next=14,s.reactEdgeLabelRender.call(c);case 14:return v=N.sent,N.next=17,s.reactNodeRender.call(f);case 17:return p=l.clientHeight,y=l.clientWidth,N.next=20,this.commandServiceProvider.getCommandService();case 20:return C=N.sent,N.next=23,this.modelServiceProvider.getModelService();case 23:return E=N.sent,w=new fi(Object.assign(Object.assign({container:l,width:y,height:p},u),{onEdgeLabelRendered:function(B){var $=B.edge,Z=B.container;e.renderEdgeReactLabel({edge:$,container:Z,edgeRenderMap:v,edgeTypeParser:d,modelService:E,commandService:C})}})),N.next=27,s.afterGraphInit.call({graph:w,commandService:C,modelService:E,options:a});case 27:t.resolve(w),w.on("node:moved",function(j){var B=j.node,$=B.getData(),Z=B.position();B.setData(Object.assign(Object.assign({},$),{x:Z==null?void 0:Z.x,y:Z==null?void 0:Z.y}))}),w.on("node:resized",function(j){var B=j.node,$=B.getData(),Z=B.size();B.setData(Object.assign(Object.assign({},$),{width:Z==null?void 0:Z.width,height:Z==null?void 0:Z.height}))}),this.toDispose.push(zr.create(function(){return ie(e,void 0,void 0,Object(D.a)().mark(function j(){return Object(D.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,s.beforeGraphDestroy.call({graph:w,commandService:C,modelService:E,options:a});case 2:this.graphMap.delete(r),w.dispose();case 4:case"end":return $.stop()}},j,this)}))}));case 31:return N.abrupt("return",t.promise);case 32:case"end":return N.stop()}},n,this)}))},this.renderEdgeReactLabel=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u,l,c,f,d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(e=r.container,t=r.edgeTypeParser,a=r.edge,s=r.edgeRenderMap,u=r.commandService,l=r.modelService,c=t(a==null?void 0:a.data)||AS,f=s.get(c),f){y.next=5;break}return y.abrupt("return");case 5:a&&(a==null?void 0:a.data)&&f&&(d=this.edgeAppendForeignObject(a,e),v=P8(f,u,l)(a),Bv.a.render(v,d));case 6:case"end":return y.stop()}},n,this)}))}}return Object(be.a)(o,[{key:"edgeAppendForeignObject",value:function(r,n){var e=R.createSvgElement("foreignObject"),t=R.createElementNS("body",R.ns.xhtml),a=R.createElementNS("div",R.ns.xhtml),s=r==null?void 0:r.data,u=(s==null?void 0:s.edgeContentWidth)||100,l=(s==null?void 0:s.edgeContentHeight)||30;return e.setAttribute("width","".concat(u)),e.setAttribute("height","".concat(l)),e.setAttribute("x","".concat(-1*u/2)),e.setAttribute("y","".concat(-1*l/2)),t.setAttribute("xhtmls",R.ns.xhtml),t.style.width="100%",t.style.height="100%",t.style.padding="0",t.style.margin="0",t.style.background="unset",t.style.overflow="visible",t.className="xflow-edge-label-body",a.style.width="100%",a.style.height="100%",t.appendChild(a),e.appendChild(t),n.appendChild(e),a}},{key:"dispose",value:function(){this.toDispose.dispose()}}]),o}();Je([Object(Te.inject)(C0),Be("design:type",Object)],Sh.prototype,"optionProvider",void 0),Je([Object(Te.inject)(ZS),Be("design:type",Object)],Sh.prototype,"hookService",void 0),Je([Object(Te.inject)(wD),Be("design:type",Object)],Sh.prototype,"commandServiceProvider",void 0),Je([Object(Te.inject)(xD),Be("design:type",Object)],Sh.prototype,"modelServiceProvider",void 0),Sh=Je([Object(Te.singleton)()],Sh);var k8=function(i){i(Sh),i(Wv,{lifecycle:Te.Syringe.Lifecycle.singleton,useDynamic:function(n){return{getGraphInstance:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){var a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return a=n.container.get(Sh),s=n.container.get(C0),f.next=4,s==null?void 0:s.getOptions();case 4:return u=f.sent,f.next=7,a==null?void 0:a.getGraph(u.graphId);case 7:return l=f.sent,f.abrupt("return",l);case 9:case"end":return f.stop()}},t)}))},getGraphOptions:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){var a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=n.container.get(C0),u.abrupt("return",a==null?void 0:a.getOptions());case 2:case"end":return u.stop()}},t)}))}}}}),i(wD,{lifecycle:Te.Syringe.Lifecycle.singleton,useDynamic:function(n){return{getCommandService:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){var a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=n.container.get(Uv),u.abrupt("return",a);case 2:case"end":return u.stop()}},t)}))}}}}),i(xD,{lifecycle:Te.Syringe.Lifecycle.singleton,useDynamic:function(n){return{getModelService:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){var a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=n.container.get(Vv),u.abrupt("return",a);case 2:case"end":return u.stop()}},t)}))}}}})},qS;(function(o){o.CONFIG_TYPE="MODEL_SERVICE_CONFIG"})(qS||(qS={}));var eT=function(){return zr.create(function(){})},SD=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.CONFIG_TYPE=qS.CONFIG_TYPE,this.registerModelFn=eT,this.isMounted=new nl,this.registerModel=function(r){i.registerModelFn=r},this.setMountState=function(){i.isMounted.resolve(!0)},this.getConfig=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isMounted.promise;case 2:return e.abrupt("return",{CONFIG_TYPE:this.CONFIG_TYPE,modelRegisterFunc:this.registerModelFn||eT});case 3:case"end":return e.stop()}},r,this)}))},this.dispose=function(){i.registerModelFn=eT,i.isMounted=new nl}}),cp=function(){function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.deferredModelMap=new Map,this.registerModel=function(r){var n=r.id,e=r.getInitialValue,t=r.modelFactory,a=new vi,s=i.ensureModel(n);if(s.isResolved){console.error(r,"model has been registerd");return}var u=e?e():Vc.EMPTY_VALUE,l=t?t():new zv(u);return Vc.isValidValue(u)&&s.resolve(l),r.watchChange&&r.watchChange(l,i).then(function(c){s.isResolved||s.resolve(l),i.toDispose.pushAll([c,a]),a.push(c)}),a},this.findDeferredModel=function(r){return i.deferredModelMap.get(r)},this.awaitModel=function(r){var n=i.ensureModel(r);return n.promise},this.registerRuntimeModel=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.modelOptionProvider.getOption();case 2:return n=s.sent,e=n.modelRegisterFunc,s.next=6,this.graphProvider.getGraphInstance();case 6:t=s.sent,e&&e(this,t);case 8:case"end":return s.stop()}},r,this)}))},this.ensureModel=function(r){var n=i.deferredModelMap.get(r);if(n)return n;var e=new nl;return i.deferredModelMap.set(r,e),i.toDispose.push(zr.create(function(){return i.deferredModelMap.delete(r)})),e}}return Object(be.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Qn.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerModel(this)}}catch(a){n.e(a)}finally{n.f()}this.registerRuntimeModel()}},{key:"onStop",value:function(){this.toDispose.dispose()}}]),o}();Je([Object(Te.contrib)(Hv),Be("design:type",Object)],cp.prototype,"contributionProvider",void 0),Je([Object(Te.inject)(pD),Be("design:type",Object)],cp.prototype,"modelOptionProvider",void 0),Je([Object(Te.inject)(Wv),Be("design:type",Object)],cp.prototype,"graphProvider",void 0),cp=Je([Object(Te.singleton)({contrib:[xh,Vv]})],cp);var D8=function(i){return function(r){var n=r.findDeferredModel(i);return!!(n&&n.promise)}},$o=function(i){return function(r){return ie(void 0,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awaitModel(i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)}))}},Xo=function(i){return function(r){return ie(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.awaitModel(i);case 2:return e=a.sent,a.abrupt("return",e.getValidValue());case 4:case"end":return a.stop()}},n)}))}},a2;(function(o){o.id="GRAPH_ENABLE_MULTI_SELECT",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(a2||(a2={}));var D0;(function(o){o.id="GRAPH_FULLSCREEN",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(D0||(D0={}));var i2;(function(o){o.id="IS_NODE_SELECTED",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(i2||(i2={}));var o2;(function(o){o.id="IS_GROUP_SELECTED",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(o2||(o2={}));var s2;(function(o){o.id="IS_NORMAL_NODES_SELECTED",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(s2||(s2={}));var u2;(function(o){o.id="LAST_SELECTED_CELL",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(u2||(u2={}));var Th;(function(o){o.id="SELECTED_CELLS",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(Th||(Th={}));var l2;(function(o){o.id="LAST_SELECTED_NODE",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(l2||(l2={}));var $v;(function(o){o.id="SELECTED_NODES",o.getModel=$o(o.id),o.useValue=Xo(o.id)})($v||($v={}));var tT;(function(o){o.id="SELECTED_EDGES",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(tT||(tT={}));var c2;(function(o){o.id="SELECTED_GROUPS",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(c2||(c2={}));var nT;(function(o){o.id="CONTEXTMENU_NODE",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(nT||(nT={}));var rT;(function(o){o.id="CONTEXTMENU_EDGE",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(rT||(rT={}));var f2;(function(o){o.id="CONTEXTMENU_TARGET",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(f2||(f2={}));var d2;(function(o){o.id="GRAPH_META",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(d2||(d2={}));var h2;(function(o){o.id="GRAPH_SCALE",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(h2||(h2={}));var v2;(function(o){o.id="COMMAND_REDOABLE",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(v2||(v2={}));var g2;(function(o){o.id="COMMAND_UNDOABLE",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(g2||(g2={}));var p2;(function(o){o.id="COMMAND_GLOBALS",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(p2||(p2={}));var m2;(function(o){o.id="HISTORY_UNDOABLE",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(m2||(m2={}));var y2;(function(o){o.id="HISTORY_REDOABLE",o.getModel=$o(o.id),o.useValue=Xo(o.id)})(y2||(y2={}));var b2=function(){function o(){Object(De.a)(this,o)}return Object(be.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:v2.id,getInitialValue:function(){return n.commands.isRedoable},watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return u=this.commands.watchChange(function(){t.setValue(s.commands.isRedoable)}),c.abrupt("return",u);case 2:case"end":return c.stop()}},a,this)}))}}),r.registerModel({id:g2.id,getInitialValue:function(){return n.commands.isUndoable},watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return u=this.commands.watchChange(function(){t.setValue(s.commands.isUndoable)}),c.abrupt("return",u);case 2:case"end":return c.stop()}},a,this)}))}}),r.registerModel({id:p2.id,modelFactory:function(){return n.commands.Globals}})}}]),o}();Je([Object(Te.inject)(Uv),Be("design:type",Object)],b2.prototype,"commands",void 0),b2=Je([Object(Te.singleton)({contrib:Hv})],b2);var aT=function(i,r,n){return i.on(r,n),zr.create(function(){i.off(r,n)})},C2=function(){function o(){var i=this;Object(De.a)(this,o),this.getGraphInstance=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return n=a.sent,a.next=5,this.graphProvider.getGraphOptions();case 5:return e=a.sent,a.abrupt("return",{graph:n,config:e});case 7:case"end":return a.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:d2.id,getInitialValue:function(){return{flowId:"-1"}},watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",zr.create(function(){t.setValue({flowId:"-1"})}));case 1:case"end":return u.stop()}},a)}))}}),r.registerModel({id:a2.id,getInitialValue:function(){return{isEnable:!1}},watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",zr.create(function(){t.setValue({isEnable:!1})}));case 1:case"end":return u.stop()}},a)}))}}),r.registerModel({id:D0.id,getInitialValue:function(){return!1},watchChange:function(t,a){return ie(n,void 0,void 0,Object(D.a)().mark(function s(){var u=this,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l=function(){return ie(u,void 0,void 0,Object(D.a)().mark(function v(){var p,y;return Object(D.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return p=!!document.fullscreenElement,E.next=3,D0.getModel(a);case 3:y=E.sent,y.setValue(p);case 5:case"end":return E.stop()}},v)}))},document.addEventListener("fullscreenchange",l,!1),f.abrupt("return",zr.create(function(){document.removeEventListener("fullscreenchange",l),t.setValue(!1)}));case 3:case"end":return f.stop()}},s)}))}}),r.registerModel({id:Th.id,getInitialValue:function(){return[]},watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(v){var p=v.selected;t.setValue(p)},u.on("selection:changed",l),f.abrupt("return",zr.create(function(){return u.off("selection:changed",l)}));case 7:case"end":return f.stop()}},a,this)}))}}),r.registerModel({id:u2.id,watchChange:function(t,a){return ie(n,void 0,void 0,Object(D.a)().mark(function s(){var u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Th.getModel(a);case 2:return u=c.sent,c.abrupt("return",u.watch(function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.setValue(Object(Qe.a)(f).pop()||null)}));case 4:case"end":return c.stop()}},s)}))}}),r.registerModel({id:$v.id,getInitialValue:function(){return[]},watchChange:function(t,a){return ie(n,void 0,void 0,Object(D.a)().mark(function s(){var u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Th.getModel(a);case 2:return u=c.sent,c.abrupt("return",u.watch(function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=f.filter(function(v){return v.isNode()});t.setValue(d)}));case 4:case"end":return c.stop()}},s)}))}}),r.registerModel({id:l2.id,watchChange:function(t,a){return ie(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,$v.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){t.setValue(Object(Qe.a)(d).pop()||null)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:i2.id,watchChange:function(t,a){return ie(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,$v.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){t.setValue(d.length>0)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:o2.id,getInitialValue:function(){return!1},watchChange:function(t,a){return ie(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Th.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){var v=d.every(function(p){return p&&p.getProp("isGroup")===!0});t.setValue(v)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:c2.id,getInitialValue:function(){return[]},watchChange:function(t,a){return ie(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,$v.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){var v=d.filter(function(p){return p&&p.getProp("isGroup")===!0});t.setValue(v)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:s2.id,getInitialValue:function(){return!1},watchChange:function(t,a){return ie(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Th.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){var v=d.every(function(y){var C=!(y&&y.getProp("isGroup")),E=!(y&&y.getProp("group"));return C&&E}),p=d.length>0&&v;t.setValue(p)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:h2.id,getInitialValue:function(){return{zoomFactor:-1}},watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(v){var p=u.zoom();t.setValue(Object.assign(Object.assign({},v),{zoomFactor:p}))},u.on("scale",l),f.abrupt("return",zr.create(function(){return u.off("scale",l)}));case 7:case"end":return f.stop()}},a,this)}))}}),r.registerModel({id:f2.id,watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.getGraphInstance();case 2:return s=v.sent,u=s.graph,l=s.config,c=function(y){return function(C){var E=C.x,w=C.y,x=u.localToClient({x:E,y:w}),N=l.rootContainer.getBoundingClientRect(),j={x:x.x-((N==null?void 0:N.x)||0),y:x.y-((N==null?void 0:N.y)||0)};t.setValue({type:y,anchor:j,data:C,cell:C.cell})}},f=new vi,f.pushAll([aT(u,"node:contextmenu",c("node")),aT(u,"edge:contextmenu",c("edge")),aT(u,"blank:contextmenu",c("blank"))]),v.abrupt("return",f);case 9:case"end":return v.stop()}},a,this)}))}}),r.registerModel({id:y2.id,getInitialValue:function(){return!1},watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(){var v=u.history.canRedo();t.setValue(v)},u.history&&u.history.on("change",l),f.abrupt("return",zr.create(function(){return u.history.off("change",l)}));case 7:case"end":return f.stop()}},a,this)}))}}),r.registerModel({id:m2.id,getInitialValue:function(){return!1},watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(){var v=u.history.canUndo();t.setValue(v)},u.history&&u.history.on("change",l),f.abrupt("return",zr.create(function(){return u.history.off("change",l)}));case 7:case"end":return f.stop()}},a,this)}))}})}}]),o}();Je([Object(Te.inject)(Wv),Be("design:type",Object)],C2.prototype,"graphProvider",void 0),C2=Je([Object(Te.singleton)({contrib:Hv})],C2);var I8=Object(Te.Module)(function(o){Te.Contribution.register(o,Hv),o(cp),o(C2),o(b2)}),R8=function(i,r){i({token:pD,useDynamic:function(){return{getOption:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r.getConfig());case 1:case"end":return s.stop()}},t)}))}}},lifecycle:Te.Syringe.Lifecycle.singleton})},N8=function(i){return Object(Te.Module)(function(r){R8(r,i)})},TD=function(i){var r=i.config,n=nc(),e=T.a.useMemo(function(){return r||new SD},[]);return T.a.useEffect(function(){var t=n.addCoreModule({config:e,createModule:N8});return e.setMountState(),function(){t.dispose(),e.dispose()}},[]),null};TD.defaultProps={XFlowModuleType:"ModelServiceConfig"};var j8=function(i){return function(r){var n=T.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=T.a.useMemo(function(){var t=new SD;return i(t,n),t},[n]);return e}},L8=function(i){var r=i.getChildren(),n=i.getSize(),e=i.getData()||{},t=i.getPosition(),a=i.getParentId(),s=e.isCollapsed,u=e.groupCollapsedSize||(s?n:null);return Object.assign(Object.assign({},e),{id:i.id,width:n.width,height:n.height,x:t.x,y:t.y,group:a,groupChildren:r?r.map(function(l){return l.id}):null,groupCollapsedSize:u})},_8=function(i){var r=i.getData()||{};return Object.assign(Object.assign({},r),{id:i.id,source:i.getSourceCellId(),target:i.getTargetCellId(),sourcePortId:i.getSourcePortId(),targetPortId:i.getTargetPortId(),sourcePort:i.getSourcePortId(),targetPort:i.getTargetPortId()})},MD=function(i){var r=[],n=[],e=function(a){a.isNode()&&r.push(L8(a)),a.isEdge()&&n.push(_8(a))};return i.map(function(t){return e(t)}),{nodes:r,edges:n}},F8=100,Mh=function(){function o(){var i=this;Object(De.a)(this,o),this.getGraphInstance=function(){return i.graphProvider.getGraphInstance()},this.getGraphConfig=function(){return i.graphProvider.getGraphOptions()},this.getGraphData=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return n=a.sent,e=n.getCells(),a.abrupt("return",MD(e));case 5:case"end":return a.stop()}},r,this)}))},this.getAllNodes=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.graphProvider.getGraphInstance();case 2:return n=t.sent,t.abrupt("return",n.getNodes());case 4:case"end":return t.stop()}},r,this)}))},this.getNodeById=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return e=a.sent,a.abrupt("return",e.getCellById(r));case 4:case"end":return a.stop()}},n,this)}))},this.getAllEdges=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.graphProvider.getGraphInstance();case 2:return n=t.sent,t.abrupt("return",n.getEdges());case 4:case"end":return t.stop()}},r,this)}))},this.getEdgeById=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return e=a.sent,a.abrupt("return",e.getCellById(r));case 4:case"end":return a.stop()}},n,this)}))},this.updateNodeAttrs=function(r,n){return ie(i,void 0,void 0,Object(D.a)().mark(function e(){var t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(r instanceof Wi)){s.next=4;break}r.setAttrs(n),s.next=8;break;case 4:return s.next=6,this.getNodeById(r);case 6:t=s.sent,t.setAttrs(n);case 8:case"end":return s.stop()}},e,this)}))},this.updateEdgeAttrs=function(r,n){return ie(i,void 0,void 0,Object(D.a)().mark(function e(){var t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(r instanceof Co)){s.next=4;break}r.setAttrs(n),s.next=8;break;case 4:return s.next=6,this.getEdgeById(r);case 6:t=s.sent,t.setAttrs(n);case 8:case"end":return s.stop()}},e,this)}))},this.translateGraph=function(r,n){return ie(i,void 0,void 0,Object(D.a)().mark(function e(){var t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.graphProvider.getGraphInstance();case 2:t=u.sent,a=t.translate(),t.translate(a.tx+r,a.ty+n);case 5:case"end":return u.stop()}},e,this)}))}}return Object(be.a)(o,[{key:"start",value:function(){return ie(this,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.startContributions();case 2:this.registerEventListeners();case 3:case"end":return e.stop()}},r,this)}))}},{key:"executeCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return this.commandService.executeCommand(r,n,e)}},{key:"executeCommandPipeline",value:function(r){return this.commandService.executeCommandPipeline(r)}},{key:"registerEventListeners",value:function(){var r=this;window.addEventListener("unload",function(){r.stopContributions()})}},{key:"startContributions",value:function(){return ie(this,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:console.log(this.contributions.getContributions()),e=Object(Qn.a)(this.contributions.getContributions()),u.prev=2,a=Object(D.a)().mark(function l(){var c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(c=t.value,!c.onStart){d.next=10;break}return d.prev=2,d.next=5,n.measure("".concat(c.constructor.name,".onStart"),function(){return c.onStart(n)});case 5:d.next=10;break;case 7:d.prev=7,d.t0=d.catch(2),console.error("Could not start contribution",d.t0);case 10:case"end":return d.stop()}},l,null,[[2,7]])}),e.s();case 5:if((t=e.n()).done){u.next=9;break}return u.delegateYield(a(),"t0",7);case 7:u.next=5;break;case 9:u.next=14;break;case 11:u.prev=11,u.t1=u.catch(2),e.e(u.t1);case 14:return u.prev=14,e.f(),u.finish(14);case 17:case"end":return u.stop()}},r,this,[[2,11,14,17]])}))}},{key:"stopContributions",value:function(){console.info(">>> Stopping frontend contributions...");var r=Object(Qn.a)(this.contributions.getContributions()),n;try{for(r.s();!(n=r.n()).done;){var e=n.value;if(e.onStop)try{e.onStop(this)}catch(t){console.error("Could not stop contribution",t)}}}catch(t){r.e(t)}finally{r.f()}console.info("<<< All frontend contributions have been stopped.")}},{key:"measure",value:function(r,n){return ie(this,void 0,void 0,Object(D.a)().mark(function e(){var t,a,s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return t="".concat(r,"-start"),a="".concat(r,"-end"),performance.mark(t),v.next=5,n();case 5:s=v.sent,performance.mark(a),performance.measure(r,t,a),u=Object(Qn.a)(performance.getEntriesByName(r));try{for(u.s();!(l=u.n()).done;)c=l.value,f="Frontend ".concat(c.name),c.duration>F8?console.warn("".concat(f," is slow, took: ").concat(c.duration.toFixed(1)," ms")):console.debug("".concat(f," took: ").concat(c.duration.toFixed(1)," ms"))}catch(p){u.e(p)}finally{u.f()}return performance.clearMeasures(r),v.abrupt("return",s);case 12:case"end":return v.stop()}},e)}))}}]),o}();Je([Object(Te.contrib)(xh),Be("design:type",Object)],Mh.prototype,"contributions",void 0),Je([Object(Te.inject)(Wv),Be("design:type",Object)],Mh.prototype,"graphProvider",void 0),Je([Object(Te.inject)(Uv),Be("design:type",Object)],Mh.prototype,"commandService",void 0),Je([Object(Te.inject)(Vv),Be("design:type",Object)],Mh.prototype,"modelService",void 0),Mh=Je([Object(Te.singleton)()],Mh);var B8=Object(Te.Module)(function(o){Te.Contribution.register(o,xh),o(Mh)}),G8=function(i){var r=i.getAllExtensions(),n=new Te.Container,e=r.map(function(a){var s=a.createModule,u=a.config;return s(u)});n.load(B8),n.load(h8),n.load(I8),e.forEach(function(a){n.load(a)});var t=n.get(Mh);return t},yq=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.xflowPrefixCls=SS,this.getXflowPrefixCls=function(r){return"".concat(i.xflowPrefixCls,"-").concat(r)},this.setXflowPrefixCls=function(r){return i.xflowPrefixCls=r}}),z8=T.a.createContext({configProvider:null}),U8=function(){return T.a.useContext(z8)},fp=function(i){var r=U8();return T.a.useMemo(function(){return r.configProvider?r.configProvider.getXflowPrefixCls(i):"".concat(SS,"-").concat(i)},[i])};function I0(o){var i=this,r=o.createModule,n=o.children,e=nc(),t=T.a.useMemo(function(){return o.config||{CONFIG_TYPE:"",getConfig:function(){return ie(i,void 0,void 0,Object(D.a)().mark(function s(){return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{});case 1:case"end":return l.stop()}},s)}))}}},[]);return T.a.useEffect(function(){var a=e.addExtension({config:t,createModule:r});return function(){a.dispose()}},[]),Array.isArray(n)||T.a.isValidElement(n)?T.a.createElement(T.a.Fragment,null," ",n," "):null}var kl=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(at.useMemo)(function(){var r=Object.entries(i),n=r.length>0?{position:"absolute"}:{};return r.forEach(function(e){var t=Object(Ue.a)(e,2),a=t[0],s=t[1],u=s===void 0?0:s;n[a]="".concat(u,"px")}),n},[i])},V8=function(i){return Object(Te.Module)(function(r){k8(r),yU(r,i)})},E2=ue.create({type:"react componnet"});fi.registerReactComponent=E2.register,fi.unregisterReactComponent=E2.unregister,fi.Hook.prototype.getReactComponent=function(o){var i=this.options.getReactComponent;if(typeof i=="function"){var r=A.call(i,this.graph,o);if(r!=null)return r}var n=o.getComponent();if(typeof n=="string"){var e=E2.get(n);if(e==null)return E2.onNotFound(n);n=e}return n};var R0=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"component",get:function(){return this.getComponent()},set:function(e){this.setComponent(e)}},{key:"getComponent",value:function(){return this.store.get("component")}},{key:"setComponent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeComponent(t):this.store.set("component",e,t),this}},{key:"removeComponent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("component",e),this}}]),r}(Wi);(function(o){function i(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"rect",t=[],a=n?ci.getForeignObjectMarkup():{tagName:"g",selector:"content"};return r?t.push(a):t.push.apply(t,[{tagName:e,selector:"body"},a,{tagName:"text",selector:"label"}]),t}o.config({view:"react-shape-view",markup:i(!1,!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks:function(n){if(n.markup==null){var e=n.primer,t=n.useForeignObject!==!1;if(e&&e!=="rect"){n.markup=i(!1,t,e);var a={};e==="circle"?a={refCx:"50%",refCy:"50%",refR:"50%"}:e==="ellipse"&&(a={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),n.attrs=m.merge({},{body:Object.assign({refWidth:null,refHeight:null},a)},n.attrs||{})}else n.simple&&(n.markup=i(!0,t),n.attrs=m.merge({},{body:null,label:null},n.attrs||{}))}return n}}),Wi.registry.register("react-shape",o,!0)})(R0||(R0={}));var dp;(function(o){var i=!1,r,n=function(l,c){var f=c.payload;switch(c.type){case"add":{var d=l.findIndex(function(y){return y.id===f.id});return d>=0?(l[d]=f,Object(Qe.a)(l)):[].concat(Object(Qe.a)(l),[f])}case"remove":{var v=l.findIndex(function(y){return y.id===f.id});if(v>=0){var p=Object(Qe.a)(l);return p.splice(v,1),p}break}default:break}return l};function e(u,l){i&&r({type:"add",payload:{id:u,portal:l}})}o.connect=e;function t(u){i&&r({type:"remove",payload:{id:u}})}o.disconnect=t;function a(){return i}o.isActive=a;function s(){return function(){i=!0;var u=Object(at.useReducer)(n,[]),l=Object(Ue.a)(u,2),c=l[0],f=l[1];return r=f,T.a.createElement(T.a.Fragment,{children:c.map(function(d){return d.portal})})}}o.getProvider=s})(dp||(dp={}));var iT=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this,n),e.scheduledAnimationFrame=!1,e.throttleUpdateFunc=function(){e.scheduledAnimationFrame||(e.scheduledAnimationFrame=!0,window.requestAnimationFrame(function(){e.setState(function(t){return e.scheduledAnimationFrame=!1,{tick:t.tick+1}})}))},e.onChange=function(t){if(r.throttleChangeTypes.includes(t.key)){e.throttleUpdateFunc();return}e.setState({tick:e.state.tick+1})},e.state={tick:0},e}return Object(be.a)(r,[{key:"componentDidMount",value:function(){this.props.node.on("change:*",this.onChange)}},{key:"componentWillUnmount",value:function(){this.props.node.off("change:*",this.onChange)}},{key:"clone",value:function(e){var t=this.props.node;return typeof e.type=="string"?T.a.cloneElement(e):T.a.cloneElement(e,{node:t})}},{key:"render",value:function(){var e=this.props,t=e.graph,a=e.node,s=e.component;if(T.a.isValidElement(s))return this.clone(s);if(typeof s=="function"){var u=A.call(s,t,a);if(T.a.isValidElement(u))return this.clone(u)}return s}}]),r}(T.a.PureComponent);iT.throttleChangeTypes=["position","size"];var AD=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"init",value:function(){var e=this;Object(la.a)(Object(ca.a)(r.prototype),"init",this).call(this),this.cell.on("removed",function(){dp.disconnect(e.cell.id)})}},{key:"getComponentContainer",value:function(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}},{key:"confirmUpdate",value:function(e){var t=this,a=Object(la.a)(Object(ca.a)(r.prototype),"confirmUpdate",this).call(this,e);return this.handleAction(a,r.action,function(){qm?qm.scheduleTask(function(){t.renderReactComponent()}):t.renderReactComponent()})}},{key:"renderReactComponent",value:function(){this.unmountReactComponent();var e=this.getComponentContainer(),t=this.cell,a=this.graph;if(e){var s=this.graph.hook.getReactComponent(t),u=T.a.createElement(iT,{graph:a,node:t,component:s});dp.isActive()?dp.connect(this.cell.id,Bv.a.createPortal(u,e)):Bv.a.render(u,e)}}},{key:"unmountReactComponent",value:function(){var e=this.getComponentContainer();return e&&Bv.a.unmountComponentAtNode(e),e}},{key:"unmount",value:function(){return dp.disconnect(this.cell.id),this.unmountReactComponent(),Object(la.a)(Object(ca.a)(r.prototype),"unmount",this).call(this),this}}]),r}(Ss);(function(o){o.action="react",o.config({bootstrap:[o.action],actions:{component:o.action}}),Ss.registry.register("react-shape-view",o,!0)})(AD||(AD={}));var H8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},oT="react";function W8(o){var i={current:function(){}},r=function(c){i.current(c)},n,e;function t(l,c){n({id:l,portal:c})}function a(l){e(l)}var s=function(){var c=Object(at.useState)([]),f=Object(Ue.a)(c,2),d=f[0],v=f[1],p=Object(at.useState)(),y=Object(Ue.a)(p,2),C=y[0],E=y[1],w=Object(at.useRef)([]),x=Object(at.useRef)([]);i.current=E;var N=Object(at.useCallback)(function(Z){var fe=Z.id;if(w.current.includes(fe)){var de=x.current,xe=de.findIndex(function(Ae){return Ae.id===fe});xe>-1?de[xe]=Z:de.push(Z),x.current=de}else v(function(Ae){var Ye=Object(Qe.a)(Ae),rt=Ye.findIndex(function(je){return je.id===fe});return rt>-1?Ye[rt]=Z:Ye.push(Z),Ye})},[]);n=N;var j=Object(at.useCallback)(function(Z){w.current.includes(Z)&&(w.current=w.current.filter(function(fe){return fe!==Z})),x.current.map(function(fe){return fe.id}).includes(Z)&&(x.current=x.current.filter(function(fe){return fe.id!==Z})),v(function(fe){return fe.filter(function(de){return de.id!==Z})})},[]);e=j;var B=Object(at.useCallback)(function(Z){var fe=Z.name,de=Z.data,xe=de||{},Ae=xe.cells,Ye=Ae===void 0?[]:Ae;if(fe==="add"){var rt=Ye.filter(function(je){return je.isNode()}).map(function(je){return je.id});w.current=Array.from(new Set([].concat(Object(Qe.a)(w.current),Object(Qe.a)(rt))))}},[]),$=Object(at.useCallback)(function(Z){var fe=Z.name;if(fe==="add"){var de=x.current;if(de.length){var xe=de.map(function(Ae){return Ae.id});w.current=w.current.filter(function(Ae){return!xe.includes(Ae)}),x.current=[],v(function(Ae){var Ye=Object(Qe.a)(Ae);return de.forEach(function(rt){var je=Ye.findIndex(function(ot){return ot.id===rt.id});je>-1?Ye[je]=rt:Ye.push(rt)}),Ye})}}},[]);return Object(at.useLayoutEffect)(function(){return C&&(C.on("batch:start",B),C.on("batch:stop",$)),function(){C&&(C.off("batch:start",B),C.off("batch:stop",$),v([]),w.current=[],x.current=[])}},[C,B,$]),T.a.createElement.apply(T.a,[T.a.Fragment,null].concat(Object(Qe.a)(d.map(function(Z){return Z.portal}))))},u=function(l){Object(or.a)(f,l);var c=Object(sr.a)(f);function f(){return Object(De.a)(this,f),c.apply(this,arguments)}return Object(be.a)(f,[{key:"init",value:function(){var v=this;Object(la.a)(Object(ca.a)(f.prototype),"init",this).call(this),this.cell.on("removed",function(){a(v.cell.id)})}},{key:"getComponentContainer",value:function(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}},{key:"confirmUpdate",value:function(v){var p=this,y=Object(la.a)(Object(ca.a)(f.prototype),"confirmUpdate",this).call(this,v);return this.handleAction(y,oT,function(){return p.renderReactComponent()})}},{key:"renderReactComponent",value:function(){this.unmountReactComponent();var v=this.getComponentContainer(),p=this.cell,y=this.graph;if(v){var C=this.graph.hook.getReactComponent(p),E=T.a.createElement(iT,{graph:y,node:p,component:C});t(this.cell.id,Bv.a.createPortal(E,v))}}},{key:"unmountReactComponent",value:function(){var v=this.getComponentContainer();return v&&Bv.a.unmountComponentAtNode(v),v}},{key:"onMouseDown",value:function(v,p,y){var C=v.target,E=C.tagName.toLowerCase();if(E==="input"){var w=C.getAttribute("type");if(w==null||["text","password","number","email","search","tel","url"].includes(w))return}Object(la.a)(Object(ca.a)(f.prototype),"onMouseDown",this).call(this,v,p,y)}},{key:"dispose",value:function(){a(this.cell.id),this.unmountReactComponent()}}]),f}(Ss);return H8([Ss.dispose()],u.prototype,"dispose",null),u.config({bootstrap:[oT],actions:{component:oT}}),Ss.registry.register(o,u,!0),{Portal:s,setGraph:r}}function $8(o){var i=Object(at.useRef)(!1),r=Object(at.useState)(function(){return i.current?{}:(i.current=!0,W8(o))}),n=Object(Ue.a)(r,1),e=n[0];return[e.Portal,e.setGraph]}var O2=function(i){var r=Ro(),n=T.a.useRef(null),e=T.a.useRef(null),t=nc(),a=T.a.useMemo(function(){var p=i.config?i.config:new Xk;return p.setX6Config(),p},[]),s=$8(a.graphId),u=Object(Ue.a)(s,2),l=u[0],c=u[1];T.a.useEffect(function(){r&&r.getGraphInstance().then(function(p){c(p)})},[r,c]),T.a.useEffect(function(){a.setRootContainer(n.current),a.setGraphContainer(e.current),a.xflowInstanceId=t.getInstanceId(),t.addCoreModule({config:a,createModule:V8});var p=function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function C(){return Object(D.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:a.dispose();case 1:case"end":return w.stop()}},C)}))};return function(){p()}},[]);var f=kl(i.position),d=fp("canvas-root"),v=fp("x6-canvas");return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{ref:n,className:d,style:f,id:a.graphId,tabIndex:0},T.a.createElement("div",{ref:e,className:v}),i.children),T.a.createElement(l,null))};O2.defaultProps={isXFlowCanvas:!0};var Td=function(){function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.runtimeHooks=[],this.getX6Graph=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.graph){t.next=2;break}return t.abrupt("return",this.graph);case 2:return t.next=4,this.graphProvider.getGraphInstance();case 4:return n=t.sent,this.graph=n,t.abrupt("return",n);case 7:case"end":return t.stop()}},r,this)}))},this.getGraphConfig=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.graphProvider.getGraphOptions());case 1:case"end":return e.stop()}},r,this)}))},this.getGraphMeta=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=this.getModelService(),a.t0=this.graphMeta,a.t0){a.next=6;break}return a.next=5,ge.GRAPH_META.useValue(n);case 5:a.t0=a.sent;case 6:return e=a.t0,a.abrupt("return",e);case 8:case"end":return a.stop()}},r,this)}))},this.setArgs=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return i.args=r,i.runtimeHooks=n,{args:r,hooks:n}},this.getArgs=function(){var r=Object.assign(Object.assign({},i.args),{modelService:i.getModelService(),commandService:i.getCommands(),getGraphMeta:i.getGraphMeta,getX6Graph:i.getX6Graph,getGraphConfig:i.getGraphConfig});return{args:r,hooks:i.runtimeHooks}},this.setResult=function(r){return i.result=r,i.result},this.getResult=function(){return i.result},this.getHooks=function(){return i.hookService.hookProvider()},this.getCommands=function(){return i.commandService},this.getModelService=function(){return i.modelService},this.addUndo=function(r){if(!Array.isArray(r))return i.addUndo([r]);i.toDispose.pushAll(r)},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toDispose.dispose();case 2:case"end":return e.stop()}},r,this)}))},this.isUndoable=function(){return!i.toDispose.disposed},this.getDisposables=function(){return i.toDispose},this.setGlobal=function(r,n){i.commandService.setGlobal(r,n)},this.getGlobal=function(r){return i.commandService.getGlobal(r)}}return Object(be.a)(o,[{key:"init",value:function(){var r=this;this.getGraphMeta().then(function(n){r.graphMeta=n})}}]),o}();Je([Object(Te.inject)(Wv),Be("design:type",Object)],Td.prototype,"graphProvider",void 0),Je([Object(Te.inject)(ZS),Be("design:type",Object)],Td.prototype,"hookService",void 0),Je([Object(Te.inject)(Uv),Be("design:type",Object)],Td.prototype,"commandService",void 0),Je([Object(Te.inject)(Vv),Be("design:type",Object)],Td.prototype,"modelService",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Td.prototype,"init",null),Td=Je([Object(Te.injectable)()],Td);var X8="CommandConfig",K8=function(){return[]},hp=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.setCommandContributions=function(r){i.getContributions=r},this.getCommandContributions=function(){return i.getContributions()},this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.registerHookFn){t.next=2;break}return t.abrupt("return",this.registerHookFn(r));case 2:return t.abrupt("return",bD);case 3:case"end":return t.stop()}},n,this)}))},this.registerHookHub=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.registerHookHubFn){t.next=2;break}return t.abrupt("return",this.registerHookHubFn(r));case 2:return t.abrupt("return",bD);case 3:case"end":return t.stop()}},n,this)}))},this.CONFIG_TYPE=X8,this.setRegisterHookFn=function(r){i.registerHookFn=r},this.setRegisterHookHubFn=function(r){i.registerHookHubFn=r},this.getConfig=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{registerHookFn:this.registerHookFn,getContributions:this.getContributions,CONFIG_TYPE:this.CONFIG_TYPE});case 1:case"end":return e.stop()}},r,this)}))},this.getContributions=K8}),bq=function(){return new hp},Y8=function(i,r){i({token:hp,contrib:[tc],lifecycle:Te.Syringe.Lifecycle.singleton,useDynamic:function(){return r}})},w2;(function(o){o.command=Ri.ADD_NODE,o.hookKey="addNode"})(w2||(w2={}));var x2=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.addNode.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E,w,x,N,j,B,$,Z,fe;return Object(D.a)().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return y=d.createNodeService,C=d.cellFactory,E=d.commandService,w=d.options,xe.next=3,e.getX6Graph();case 3:if(x=xe.sent,N=d.nodeConfig,!y){xe.next=12;break}return xe.next=8,y(d);case 8:if(j=xe.sent,typeof j!="boolean"){xe.next=11;break}return xe.abrupt("return",{err:"createNodeService rejected"});case 11:N=j;case 12:return xe.next=14,this.processNodeConfig(N);case 14:if(B=xe.sent,Z=Object.assign(Object.assign({},w),{isCommand:!0}),!C){xe.next=23;break}return xe.next=19,C(B,this);case 19:fe=xe.sent,$=x.addNode(fe,Z),xe.next=24;break;case 23:$=x.addNode(B,Z);case 24:return e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function Ae(){var Ye;return Object(D.a)().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:Ye=Object.assign({id:$.id},$.getData()),E.executeCommand(Ri.DEL_NODE.id,{nodeConfig:Ye});case 2:case"end":return je.stop()}},Ae)}))})),xe.abrupt("return",{nodeConfig:B,nodeCell:$});case 26:case"end":return xe.stop()}},v,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.processNodeConfig=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=this.contextProvider(),r.data=Object.assign({},r),!r.shape){c.next=4;break}return c.abrupt("return",r);case 4:if(r.view){c.next=9;break}return c.next=7,e.getGraphConfig();case 7:t=c.sent,r.view=t.graphId;case 9:if(r.component){c.next=17;break}return c.next=12,this.getNodeReactComponent(r);case 12:a=c.sent,s=e.getCommands(),u=e.getModelService(),r.shape="react-shape",r.component=r2(a,s,u);case 17:return c.abrupt("return",r);case 18:case"end":return c.stop()}},n,this)}))},this.getNodeReactComponent=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getHooks(),f.next=4,e.getGraphConfig();case 4:return a=f.sent,f.next=7,t.reactNodeRender.call(a.nodeRender);case 7:return s=f.sent,u=a.nodeTypeParser(r)||z1,l=s.get(u),l||console.error("react node component is missing:",a.nodeRender,u,l),f.abrupt("return",l);case 12:case"end":return f.stop()}},n,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],x2.prototype,"contextProvider",void 0),x2=Je([Object(Te.injectable)({token:{token:$a,named:w2.command.id}})],x2);var S2;(function(o){o.command=Ri.DEL_NODE,o.hookKey="delNode",o.createHook=function(){return new Hc}})(S2||(S2={}));var T2=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.delNode.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E,w,x,N,j,B,$;return Object(D.a)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return y=d.commandService,C=d.deleteNodeService,E=d.options,fe.next=3,e.getX6Graph();case 3:if(w=fe.sent,!C){fe.next=10;break}return fe.next=7,C(d);case 7:if(x=fe.sent,x){fe.next=10;break}return fe.abrupt("return",{err:" service rejected"});case 10:if(N=(d.x6Node||d.nodeConfig).id,j=w.getCellById(N),!(j&&j.isNode())){fe.next=20;break}return B=[].concat(Object(Qe.a)(w.getIncomingEdges(j)||[]),Object(Qe.a)(w.getOutgoingEdges(j)||[])),fe.next=16,Promise.all(B.map(function(de){return y.executeCommand(Eo.DEL_EDGE.id,{x6Edge:de})}));case 16:return $=j.getData(),j.remove(Object.assign(Object.assign({},E),{isCommand:!0})),e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function de(){return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,y.executeCommand(Ri.ADD_NODE.id,{nodeConfig:$});case 2:case"end":return Ae.stop()}},de)}))})),fe.abrupt("return",{err:null,nodeConfig:$});case 20:return fe.abrupt("return",{err:"node is not exist"});case 21:case"end":return fe.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.isUndoable()&&(n=this.contextProvider(),n.undo()),t.abrupt("return",this);case 2:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],T2.prototype,"contextProvider",void 0),T2=Je([Object(Te.injectable)({token:{token:$a,named:S2.command.id}})],T2);var M2;(function(o){o.command=Ri.SELECT_NODE,o.hookKey="selectNode"})(M2||(M2={}));var N0=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.selectNode.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.ctx.getX6Graph();case 2:return v=x.sent,p=v.getSelectedCells().map(function(N){return N.id}),y=f.nodeIds,C=f.resetSelection,E=f.commandService,C?v.resetSelection(y):v.select(y),this.ctx.addUndo({dispose:function(){E.executeUndoCommand(Ri.SELECT_NODE.id,{nodeIds:p,resetSelection:!0})}}),x.abrupt("return",{});case 8:case"end":return x.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],N0.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],N0.prototype,"init",null),N0=Je([Object(Te.injectable)({token:{token:$a,named:M2.command.id}})],N0);var A2;(function(o){o.command=Ri.MOVE_NODE,o.hookKey="moveNode",o.createHook=function(){return new Hc}})(A2||(A2={}));var P2=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.moveNode.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p,y,C,E,w,x,N,j,B,$,Z,fe,de,xe,Ae,Ye,rt,je,ot;return Object(D.a)().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:if(p=d.nodePositionService,!p){hn.next=7;break}return hn.next=4,p(d);case 4:if(y=hn.sent,y){hn.next=7;break}return hn.abrupt("return",{err:"service rejected"});case 7:return C=d.position,E=C.dx,w=E===void 0?0:E,x=C.dy,N=x===void 0?0:x,j=C.x,B=C.y,$=C.duration,Z=$===void 0?150:$,hn.next=10,e.getX6Graph();case 10:if(fe=hn.sent,de=fe.getCellById(d.id),!de){hn.next=20;break}return xe=j,Ae=B,Ye=de.position(),rt=Ye.x,je=Ye.y,ot=function(){de.position(rt,je,{silent:!1})},w||N?(xe=w+rt,Ae=N+je,de.translate(w,N,{transition:{duration:Z}}),ot=function(){return de.translate(-w,-N,{transition:{duration:Z}})}):de.position(xe,Ae,{silent:!1}),e.addUndo(zr.create(function(){ot()})),hn.abrupt("return",{err:null,nextX:xe,nextY:Ae});case 20:case"end":return hn.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],P2.prototype,"contextProvider",void 0),P2=Je([Object(Te.injectable)({token:{token:$a,named:A2.command.id}})],P2);var Z8=h("Znm+"),k2=h.n(Z8),Xv;(function(o){o.command=Ri.UPDATE_NODE,o.hookKey="updateNode",o.XFlowNodeSetOptions={overwrite:!0},o.NODE_WIDTH=200,o.NODE_HEIGHT=40})(Xv||(Xv={}));var j0=function(){function o(){var i=this;Object(De.a)(this,o),this.setNodeConfig=function(r,n,e){r.setData(n,e),r.setPosition((n==null?void 0:n.x)||0,(n==null?void 0:n.y)||0),r.setSize((n==null?void 0:n.width)||Xv.NODE_WIDTH,(n==null?void 0:n.height)||Xv.NODE_HEIGHT),r.angle((n==null?void 0:n.angle)||0,{absolute:!0}),k2()(n==null?void 0:n.visible)&&r.setVisible(n==null?void 0:n.visible),!(r instanceof R0)&&!!r.getAttrByPath("text/text")&&r.setAttrByPath("text/text",n.label),n.attrs&&r.setAttrs(n.attrs),Array.isArray(n.ports)&&r.setPropByPath("ports/items",n.ports,Object.assign({rewrite:!0},e))},this.getNodeConfig=function(r){var n=r.getData(),e=r.getPosition(),t=r.getSize();return Object.assign(Object.assign(Object.assign({},n),e),t)},this.getNodeCell=function(r,n){var e=n.nodeConfig,t=n.setNodeConfig,a="";if(t&&t.node&&typeof t.node=="string"?a=t.node:e&&e.id&&typeof e.id=="string"&&(a=e.id),a)return r==null?void 0:r.getCellById(a);if(t&&t.node instanceof Wi)return t.node},this.getNextNodeConfig=function(r,n){return ie(i,void 0,void 0,Object(D.a)().mark(function e(){var t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(r&&r.setNodeConfig&&r.setNodeConfig.callback)){s.next=3;break}return t=this.getNodeConfig(n),s.abrupt("return",r.setNodeConfig.callback(t));case 3:return s.abrupt("return",r.nodeConfig);case 4:case"end":return s.stop()}},e,this)}))},this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.updateNode.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return v=f.options,p=v===void 0?Xv.XFlowNodeSetOptions:v,x.next=3,this.ctx.getX6Graph();case 3:return y=x.sent,C=this.getNodeCell(y,f),x.next=7,this.getNextNodeConfig(f,C);case 7:return E=x.sent,this.setNodeConfig(C,E,p),x.abrupt("return",{nodeConfig:E,nodeCell:C});case 10:case"end":return x.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],j0.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],j0.prototype,"init",null),j0=Je([Object(Te.injectable)({token:{token:$a,named:Xv.command.id}})],j0);var D2;(function(o){o.command=Ri.CENTER_NODE,o.hookKey="centerNode"})(D2||(D2={}));var L0=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.centerNode.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y;return Object(D.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.ctx.getX6Graph();case 2:return v=E.sent,p=f.nodeConfig,y=v==null?void 0:v.getCellById(p==null?void 0:p.id),v==null||v.centerCell(y),E.abrupt("return",{x6Node:y});case 7:case"end":return E.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],L0.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],L0.prototype,"init",null),L0=Je([Object(Te.injectable)({token:{token:$a,named:D2.command.id}})],L0);var I2;(function(o){o.command=Ri.FRONT_NODE,o.hookKey="frontNode"})(I2||(I2={}));var _0=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.frontNode.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.ctx.getX6Graph();case 2:return y=x.sent,C=d.nodeId,E=y==null?void 0:y.getCellById(C),E?(E.toFront(),e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function N(){return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:d.commandService.executeCommand(Ri.BACK_NODE.id,{nodeId:C});case 1:case"end":return B.stop()}},N)}))}))):console.error(C,"this nodeId is not exist"),x.abrupt("return",{});case 7:case"end":return x.stop()}},v,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],_0.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],_0.prototype,"init",null),_0=Je([Object(Te.injectable)({token:{token:$a,named:I2.command.id}})],_0);var R2;(function(o){o.command=Ri.BACK_NODE,o.hookKey="backNode"})(R2||(R2={}));var F0=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.backNode.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,p,y,C;return Object(D.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this.ctx.getX6Graph();case 2:return p=w.sent,y=f.nodeId,C=p==null?void 0:p.getCellById(y),C?(C.toBack(),this.ctx.addUndo(zr.create(function(){return ie(v,void 0,void 0,Object(D.a)().mark(function x(){return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:f.commandService.executeCommand(Ri.FRONT_NODE.id,{nodeId:y});case 1:case"end":return j.stop()}},x)}))}))):console.error(y,"this nodeId is not exist"),w.abrupt("return",{});case 7:case"end":return w.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],F0.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],F0.prototype,"init",null),F0=Je([Object(Te.injectable)({token:{token:$a,named:R2.command.id}})],F0);var N2;(function(o){o.command=Ri.HIGHLIGHT_NODE,o.hookKey="highlightNode"})(N2||(N2={}));var B0=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.highlightNode.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E,w,x,N;return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.ctx.getX6Graph();case 2:if(v=B.sent,p=f.nodeId,y=f.stroke,C=f.strokeWidth,E=v==null?void 0:v.getCellById(p),E){B.next=10;break}return console.error(p,"this nodeId is not exist"),B.abrupt("return",{err:"this nodeId is not exist"});case 10:E==null||E.setAttrs({body:{stroke:y||"#7c68fc",strokeWidth:C||2}}),(f==null?void 0:f.isHighlightRelatedLines)&&(w=f.edgeStroke,x=f.edgeStrokeWidth,N=v==null?void 0:v.getEdges(),N.forEach(function($){var Z=$==null?void 0:$.getData();f==null||f.commandService.executeCommand(Eo.HIGHLIGHT_EDGE.id,{edgeId:Z==null?void 0:Z.id,strokeColor:w,strokeWidth:x})}));case 12:return B.abrupt("return",{err:null});case 13:case"end":return B.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],B0.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],B0.prototype,"init",null),B0=Je([Object(Te.injectable)({token:{token:$a,named:N2.command.id}})],B0);var j2;(function(o){o.command=Ri.UPDATE_NODE_PORT,o.hookKey="updateNodePort"})(j2||(j2={}));var L2=function(){function o(){var i=this;Object(De.a)(this,o),this.getCell=function(r,n){return typeof n=="string"?r.getCellById(n):n},this.getNodeConfig=function(r){var n=r.getData(),e=r.getPosition(),t=r.getSize();return Object.assign(Object.assign(Object.assign({},n),e),t)},this.updatePortsOfNodeConfig=function(r,n,e){var t=i.getNodeConfig(r);i.isNodeAnchors(t.ports)&&(t.ports=Object(Qe.a)(n)),i.isPortMetaData(t.ports)&&(t.ports.items=Object(Qe.a)(n)),r.setData(t,e)},this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),d.next=5,e.getX6Graph();case 5:return l=d.sent,d.next=8,u.updateNodePort.call(a,function(v){return ie(n,void 0,void 0,Object(D.a)().mark(function p(){var y=this,C,E,w,x,N,j,B;return Object(D.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(C=v.node,E=v.updatePorts,w=v.options,x=v.commandService,N=this.getCell(l,C),!(!N||N.isEdge())){Z.next=5;break}return console.error("node_is _not_exsit",C),Z.abrupt("return",{err:"node_is _not_exsit"});case 5:return j=N.getPorts(),Z.next=8,E(Object(Qe.a)(j),N,l);case 8:if(B=Z.sent,B!==!1){Z.next=11;break}return Z.abrupt("return",{err:"service rejected"});case 11:return N.setPropByPath("ports/items",B,Object.assign({rewrite:!0},w)),this.updatePortsOfNodeConfig(N,B,w),e.addUndo(zr.create(function(){return ie(y,void 0,void 0,Object(D.a)().mark(function fe(){var de=this;return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:x.executeCommand(Ri.UPDATE_NODE_PORT.id,{node:C,updatePorts:function(){return ie(de,void 0,void 0,Object(D.a)().mark(function rt(){return Object(D.a)().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.abrupt("return",j);case 1:case"end":return ot.stop()}},rt)}))}});case 1:case"end":return Ae.stop()}},fe)}))})),Z.abrupt("return",{ports:B});case 15:case"end":return Z.stop()}},p,this)}))},s);case 8:return c=d.sent,e.setResult(c),d.abrupt("return",this);case 11:case"end":return d.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isNodeAnchors",value:function(r){return Array.isArray(r)}},{key:"isPortMetaData",value:function(r){return r.items&&Array.isArray(r.items)}},{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],L2.prototype,"contextProvider",void 0),L2=Je([Object(Te.injectable)({token:{token:$a,named:j2.command.id}})],L2);var J8=function(i){i(x2),i(T2),i(N0),i(P2),i(j0),i(L0),i(_0),i(F0),i(B0),i(L2)},Q8=[w2,S2,M2,A2,Xv,D2,I2,R2,N2,j2],_2;(function(o){o.command=za.LOAD_META,o.hookKey="graphMeta"})(_2||(_2={}));var G0=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),d.next=4,s.graphMeta.call(t,function(v){return ie(n,void 0,void 0,Object(D.a)().mark(function p(){var y,C;return Object(D.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(y=v.graphMetaService,!y){w.next=7;break}return w.next=4,y(v);case 4:w.t0=w.sent,w.next=8;break;case 7:w.t0=Object.assign({},v==null?void 0:v.meta);case 8:return C=w.t0,w.abrupt("return",Object.assign({flowId:C==null?void 0:C.flowId},C));case 10:case"end":return w.stop()}},p)}))},a);case 4:return u=d.sent,l=this.ctx.getModelService(),d.next=8,ge.GRAPH_META.getModel(l);case 8:return c=d.sent,c.setValue(u),this.ctx.setResult(u),d.abrupt("return",this);case 12:case"end":return d.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],G0.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],G0.prototype,"init",null),G0=Je([Object(Te.injectable)({token:{token:$a,named:_2.command.id}})],G0);var F2;(function(o){o.command=za.SAVE_GRAPH_DATA,o.hookKey="saveGraphData"})(F2||(F2={}));var z0=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return e=this.ctx,t=e.getArgs(),a=e.getHooks(),u.next=5,a.saveGraphData.call(t.args,function(l){return ie(n,void 0,void 0,Object(D.a)().mark(function c(){var f,d,v,p,y,C,E,w,x,N;return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return f=l.saveGraphDataService,d=l.includeAttrs,B.next=3,e.getX6Graph();case 3:return v=B.sent,p=v.getNodes(),y=v.getEdges(),C=p.map(function($){var Z=$.getData(),fe=$.position(),de=$.size(),xe=Object.assign(Object.assign(Object.assign({id:$.id},Z),fe),de);return d&&(xe.attrs=$.getAttrs()),xe}),E=y.map(function($){var Z=$.getData(),fe=Object.assign({id:$.id},Z);return d&&(fe.attrs=$.getAttrs()),fe}),w={nodes:C,edges:E},B.next=11,this.ctx.getGraphMeta();case 11:if(x=B.sent,!f){B.next=17;break}return B.next=15,f(x,w);case 15:N=B.sent,N&&this.ctx.setResult(N);case 17:return B.abrupt("return",{});case 18:case"end":return B.stop()}},c,this)}))},t.hooks);case 5:return u.abrupt("return",this);case 6:case"end":return u.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],z0.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],z0.prototype,"init",null),z0=Je([Object(Te.injectable)({token:{token:$a,named:F2.command.id}})],z0);var B2;(function(o){o.command=za.LOAD_DATA,o.hookKey="loadData",o.createHook=function(){return new Hc}})(B2||(B2={}));var U0=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.loadData.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y;return Object(D.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return v=f.loadDataService,E.next=3,this.ctx.getGraphMeta();case 3:return p=E.sent,E.next=6,v(p);case 6:return y=E.sent,E.abrupt("return",{graphData:y});case 8:case"end":return E.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],U0.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],U0.prototype,"init",null),U0=Je([Object(Te.injectable)({token:{token:$a,named:B2.command.id}})],U0);var Ou=function(){function o(){Object(De.a)(this,o),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return Object(be.a)(o,[{key:"layout",value:function(r){return this.init(r),this.execute(!0)}},{key:"init",value:function(r){this.nodes=r.nodes||[],this.edges=r.edges||[],this.combos=r.combos||[]}},{key:"execute",value:function(r){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(r){r&&Object.assign(this,r)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}]),o}(),V0=function(i){return typeof i=="string"},q8=function(i){var r=Object.create(null);return function(n){var e=r[n];return e||(r[n]=i(n))}},e7=/-(\w)/g,Cq=q8(function(o){return o.replace(e7,function(i,r){return r?r.toUpperCase():""})}),ru=Array.isArray,Ir=function(i){return typeof i=="number"},G2=function(i){return Number.isNaN(Number(i))},Eq=function(i){var r=parseFloat(i);return G2(r)?i:r},jf=function(i){return i!==null&&typeof i=="object"},sT=function o(i){if(i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof Array){var r=[];return i.forEach(function(e){r.push(e)}),r.map(function(e){return o(e)})}if(typeof i=="object"&&i!=={}){var n=Object.assign({},i);return Object.keys(n).forEach(function(e){n[e]=o(n[e])}),n}return i},Ci=function(i,r){var n=i[r];return jf(n)?n.cell:n},H0=function(i,r,n){for(var e=[],t=0;t<i;t++)e[t]=0;return n&&n.forEach(function(a){var s=Ci(a,"source"),u=Ci(a,"target");s&&(e[r[s]]+=1),u&&(e[r[u]]+=1)}),e},PD=function(i){for(var r=[],n=i.length,e=0;e<n;e+=1){r[e]=[];for(var t=0;t<n;t+=1)e===t?r[e][t]=0:i[e][t]===0||!i[e][t]?r[e][t]=Infinity:r[e][t]=i[e][t]}for(var a=0;a<n;a+=1)for(var s=0;s<n;s+=1)for(var u=0;u<n;u+=1)r[s][u]>r[s][a]+r[a][u]&&(r[s][u]=r[s][a]+r[a][u]);return r},kD=function(i,r){var n=i.nodes,e=i.edges,t=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,u){a[s.id]=u;var l=[];t.push(l)}),e&&e.forEach(function(s){var u=Ci(s,"source"),l=Ci(s,"target"),c=a[u],f=a[l];t[c][f]=1,r||(t[f][c]=1)}),t},t7=function(i,r){var n=[];return i.forEach(function(e){var t=[];e.forEach(function(a){t.push(a*r)}),n.push(t)}),n},n7=function o(i,r){if(i&&i.children){for(var n=i.children.length-1;n>=0;n--)if(!o(i.children[n],r))return}return!!r(i)},z2=function(i,r){typeof r=="function"&&n7(i,r)},Ah=function(i){return typeof i=="function"},Ph=new Map,Oq=function(i,r){if(Ph.get(i)&&console.warn("The layout with the name ".concat(i," exists already, it will be overridden")),jf(r)){var n=function(e){Object(or.a)(a,e);var t=Object(sr.a)(a);function a(s){var u;Object(De.a)(this,a),u=t.call(this);var l=Object(Vo.a)(u),c={},f=l.getDefaultCfg();return Object.assign(c,f,r,s),Object.keys(c).forEach(function(d){var v=c[d];l[d]=v}),u}return Object(be.a)(a)}(Ou);Ph.set(i,n)}else Ph.set(i,r);return Ph.get(i)},wq=function(i){Ph.has(i)&&Ph.delete(i)},r7=function(i){return Ph.has(i)?Ph.get(i):null},a7=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges,s=t.length,u=e.begin;if(s===0)return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:a};if(s===1)return t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:a};var l=[];t.forEach(function(B){l.push(B)});var c={};if(l.forEach(function(B,$){c[B.id]=$}),(e.sortBy==="degree"||!V0(e.sortBy)||l[0][e.sortBy]===void 0)&&(e.sortBy="degree",G2(t[0].degree))){var f=H0(l.length,c,a);l.forEach(function(B,$){B.degree=f[$]})}l.sort(function(B,$){return $[e.sortBy]-B[e.sortBy]}),!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);var d=e.rows,v=e.cols!=null?e.cols:e.columns;if(e.cells=s,d!=null&&v!=null?(e.rows=d,e.cols=v):d!=null&&v==null?(e.rows=d,e.cols=Math.ceil(e.cells/e.rows)):d==null&&v!=null?(e.cols=v,e.rows=Math.ceil(e.cells/e.cols)):(e.splits=Math.sqrt(e.cells*e.height/e.width),e.rows=Math.round(e.splits),e.cols=Math.round(e.width/e.height*e.splits)),e.cols*e.rows>e.cells){var p=e.small(),y=e.large();(p-1)*y>=e.cells?e.small(p-1):(y-1)*p>=e.cells&&e.large(y-1)}else for(;e.cols*e.rows<e.cells;){var C=e.small(),E=e.large();(E+1)*C>=e.cells?e.large(E+1):e.small(C+1)}e.cellWidth=e.width/e.cols,e.cellHeight=e.height/e.rows,e.condense&&(e.cellWidth=0,e.cellHeight=0),e.preventOverlap&&l.forEach(function(B){(!B.x||!B.y)&&(B.x=0,B.y=0);var $,Z;ru(B.size)?($=B.size[0],Z=B.size[1]):Ir(B.size)?($=B.size,Z=B.size):jf(B.size)&&($=B.size.width,Z=B.size.height),($===void 0||Z===void 0)&&(ru(e.nodeSize)?($=e.nodeSize[0],Z=e.nodeSize[1]):Ir(e.nodeSize)?($=e.nodeSize,Z=e.nodeSize):($=30,Z=30));var fe=e.preventOverlapPadding,de=$+fe,xe=Z+fe;e.cellWidth=Math.max(e.cellWidth,de),e.cellHeight=Math.max(e.cellHeight,xe)}),e.cellUsed={},e.row=0,e.col=0,e.id2manPos={};for(var w=0;w<l.length;w++){var x=l[w],N=void 0;if(e.position&&(N=e.position(x)),N&&(N.row!==void 0||N.col!==void 0)){var j={row:N.row,col:N.col};if(j.col===void 0)for(j.col=0;e.used(j.row,j.col);)j.col++;else if(j.row===void 0)for(j.row=0;e.used(j.row,j.col);)j.row++;e.id2manPos[x.id]=j,e.use(j.row,j.col)}e.getPos(x)}return e.onLayoutEnd&&e.onLayoutEnd(),{edges:a,nodes:l}}},{key:"small",value:function(e){var t=this,a,s=t.rows||5,u=t.cols||5;if(e==null)a=Math.min(s,u);else{var l=Math.min(s,u);l===t.rows?t.rows=e:t.cols=e}return a}},{key:"large",value:function(e){var t=this,a,s=t.rows||5,u=t.cols||5;if(e==null)a=Math.max(s,u);else{var l=Math.max(s,u);l===t.rows?t.rows=e:t.cols=e}return a}},{key:"used",value:function(e,t){var a=this;return a.cellUsed["c-".concat(e,"-").concat(t)]||!1}},{key:"use",value:function(e,t){var a=this;a.cellUsed["c-".concat(e,"-").concat(t)]=!0}},{key:"moveToNextCell",value:function(){var e=this,t=e.cols||5;e.col++,e.col>=t&&(e.col=0,e.row++)}},{key:"getPos",value:function(e){var t=this,a=t.begin,s=t.cellWidth,u=t.cellHeight,l,c,f=t.id2manPos[e.id];if(f)l=f.col*s+s/2+a[0],c=f.row*u+u/2+a[1];else{for(;t.used(t.row,t.col);)t.moveToNextCell();l=t.col*s+s/2+a[0],c=t.row*u+u/2+a[1],t.use(t.row,t.col),t.moveToNextCell()}e.x=l,e.y=c}},{key:"getType",value:function(){return"grid"}}]),r}(Ou),i7=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=.9,s=e.center;return!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),t&&t.forEach(function(u){u.x=(Math.random()-.5)*a*e.width+s[0],u.y=(Math.random()-.5)*a*e.height+s[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:this.edges}}},{key:"getType",value:function(){return"random"}}]),r}(Ou),uT=function(i,r){var n;return i?Ir(i)?n=function(t){return i}:n=i:n=function(t){return r||1},n},o7=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.workerEnabled=!1,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var e,t,a=this,s=a.nodes;if(a.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(a.timeInterval),!s||s.length===0){(e=a.onLayoutEnd)===null||e===void 0||e.call(a);return}!a.width&&typeof window!="undefined"&&(a.width=window.innerWidth),!a.height&&typeof window!="undefined"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]);var u=a.center;if(s.length===1){s[0].x=u[0],s[0].y=u[1],(t=a.onLayoutEnd)===null||t===void 0||t.call(a);return}var l={},c={};s.forEach(function(C,E){Ir(C.x)||(C.x=Math.random()*a.width),Ir(C.y)||(C.y=Math.random()*a.height),l[C.id]=C,c[C.id]=E}),a.nodeMap=l,a.nodeIdxMap=c,a.linkDistance=uT(a.linkDistance,1),a.nodeStrength=uT(a.nodeStrength,1),a.edgeStrength=uT(a.edgeStrength,1);var f=a.nodeSize,d;if(a.preventOverlap){var v=a.nodeSpacing,p;Ir(v)?p=function(){return v}:Ah(v)?p=v:p=function(){return 0},f?ru(f)?d=function(E){var w=f[0]>f[1]?f[0]:f[1];return w+p(E)}:d=function(E){return f+p(E)}:d=function(E){if(E.size){if(ru(E.size)){var w=E.size[0]>E.size[1]?E.size[0]:E.size[1];return w+p(E)}if(jf(E.size)){var x=E.size.width>E.size.height?E.size.width:E.size.height;return x+p(E)}return E.size+p(E)}return 10+p(E)}}a.nodeSize=d;var y=a.edges;a.degrees=H0(s.length,a.nodeIdxMap,y),a.getMass||(a.getMass=function(C){var E=a.degrees[a.nodeIdxMap[C.id]]||1;return E}),a.run()}},{key:"run",value:function(){var e,t=this,a=t.maxIteration,s=t.nodes,u=t.workerEnabled,l=t.minMovement;if(!!s)if(u){for(var c=0;c<a;c++){var f=t.runOneStep(c);if(t.reachMoveThreshold(s,f,l))break}(e=t.onLayoutEnd)===null||e===void 0||e.call(t)}else{if(typeof window=="undefined")return;var d=0;this.timeInterval=window.setInterval(function(){var v,p;if(!!s){var y=t.runOneStep(d)||[];t.reachMoveThreshold(s,y,l)&&((v=t.onLayoutEnd)===null||v===void 0||v.call(t),window.clearInterval(t.timeInterval)),d++,d>=a&&((p=t.onLayoutEnd)===null||p===void 0||p.call(t),window.clearInterval(t.timeInterval))}},0)}}},{key:"reachMoveThreshold",value:function(e,t,a){var s=0;return e.forEach(function(u,l){var c=u.x-t[l].x,f=u.y-t[l].y;s+=Math.sqrt(c*c+f*f)}),s/=e.length,s<a}},{key:"runOneStep",value:function(e){var t,a=this,s=a.nodes,u=a.edges,l=[],c=[];if(!!s){s.forEach(function(v,p){l[2*p]=0,l[2*p+1]=0,c[2*p]=0,c[2*p+1]=0}),a.calRepulsive(l,s),u&&a.calAttractive(l,u),a.calGravity(l,s);var f=Math.max(.02,a.interval-e*.002);a.updateVelocity(l,c,f,s);var d=[];return s.forEach(function(v){d.push({x:v.x,y:v.y})}),a.updatePosition(c,f,s),(t=a.tick)===null||t===void 0||t.call(a),d}}},{key:"calRepulsive",value:function(e,t){var a=this,s=a.getMass,u=a.nodeStrength,l=a.factor,c=a.coulombDisScale,f=a.preventOverlap,d=a.nodeSize;t.forEach(function(v,p){var y=s?s(v):1;t.forEach(function(C,E){if(!(p>=E)){var w=v.x-C.x,x=v.y-C.y,N=Math.sqrt(w*w+x*x)+.01,j=(N+.1)*c,B=w/N,$=x/N,Z=(u(v)+u(C))/2*l/(j*j),fe=s?s(C):1;if(e[2*p]+=B*Z,e[2*p+1]+=$*Z,e[2*E]-=B*Z,e[2*E+1]-=$*Z,f&&N<(d(v)+d(C))/2){var de=(u(v)+u(C))/2/(N*N);e[2*p]+=B*de/y,e[2*p+1]+=$*de/y,e[2*E]-=B*de/fe,e[2*E+1]-=$*de/fe}}})})}},{key:"calAttractive",value:function(e,t){var a=this,s=a.nodeMap,u=a.nodeIdxMap,l=a.linkDistance,c=a.edgeStrength,f=a.getMass;t.forEach(function(d,v){var p=Ci(d,"source"),y=Ci(d,"target"),C=s[p],E=s[y],w=E.x-C.x,x=E.y-C.y,N=Math.sqrt(w*w+x*x)+.01,j=w/N,B=x/N,$=l(d)||1,Z=$-N,fe=Z*c(d),de=u[p],xe=u[y],Ae=f?f(C):1,Ye=f?f(E):1;e[2*de]-=j*fe/Ae,e[2*de+1]-=B*fe/Ae,e[2*xe]+=j*fe/Ye,e[2*xe+1]+=B*fe/Ye})}},{key:"calGravity",value:function(e,t){for(var a=this,s=a.center,u=a.gravity,l=a.degrees,c=t.length,f=0;f<c;f++){var d=t[f],v=d.x-s[0],p=d.y-s[1],y=u;if(a.getCenter){var C=a.getCenter(d,l[f]);C&&Ir(C[0])&&Ir(C[1])&&Ir(C[2])&&(v=d.x-C[0],p=d.y-C[1],y=C[2])}!y||(e[2*f]-=y*v,e[2*f+1]-=y*p)}}},{key:"updateVelocity",value:function(e,t,a,s){var u=this,l=a*u.damping;s.forEach(function(c,f){var d=e[2*f]*l||.01,v=e[2*f+1]*l||.01,p=Math.sqrt(d*d+v*v);if(p>u.maxSpeed){var y=u.maxSpeed/p;d=y*d,v=y*v}t[2*f]=d,t[2*f+1]=v})}},{key:"updatePosition",value:function(e,t,a){a.forEach(function(s,u){if(Ir(s.fx)&&Ir(s.fy)){s.x=s.fx,s.y=s.fy;return}var l=e[2*u]*t,c=e[2*u+1]*t;s.x+=l,s.y+=c})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){var e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}]),r}(Ou),s7=function(o){var i=+this._x.call(null,o),r=+this._y.call(null,o);return DD(this.cover(i,r),i,r,o)};function DD(o,i,r,n){if(isNaN(i)||isNaN(r))return o;var e,t=o._root,a={data:n},s=o._x0,u=o._y0,l=o._x1,c=o._y1,f,d,v,p,y,C,E,w;if(!t)return o._root=a,o;for(;t.length;)if((y=i>=(f=(s+l)/2))?s=f:l=f,(C=r>=(d=(u+c)/2))?u=d:c=d,e=t,!(t=t[E=C<<1|y]))return e[E]=a,o;if(v=+o._x.call(null,t.data),p=+o._y.call(null,t.data),i===v&&r===p)return a.next=t,e?e[E]=a:o._root=a,o;do e=e?e[E]=new Array(4):o._root=new Array(4),(y=i>=(f=(s+l)/2))?s=f:l=f,(C=r>=(d=(u+c)/2))?u=d:c=d;while((E=C<<1|y)==(w=(p>=d)<<1|v>=f));return e[w]=t,e[E]=a,o}function u7(o){var i,r,n=o.length,e,t,a=new Array(n),s=new Array(n),u=Infinity,l=Infinity,c=-Infinity,f=-Infinity;for(r=0;r<n;++r)isNaN(e=+this._x.call(null,i=o[r]))||isNaN(t=+this._y.call(null,i))||(a[r]=e,s[r]=t,e<u&&(u=e),e>c&&(c=e),t<l&&(l=t),t>f&&(f=t));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),r=0;r<n;++r)DD(this,a[r],s[r],o[r]);return this}var l7=function(o,i){if(isNaN(o=+o)||isNaN(i=+i))return this;var r=this._x0,n=this._y0,e=this._x1,t=this._y1;if(isNaN(r))e=(r=Math.floor(o))+1,t=(n=Math.floor(i))+1;else{for(var a=e-r||1,s=this._root,u,l;r>o||o>=e||n>i||i>=t;)switch(l=(i<n)<<1|o<r,u=new Array(4),u[l]=s,s=u,a*=2,l){case 0:e=r+a,t=n+a;break;case 1:r=e-a,t=n+a;break;case 2:e=r+a,n=t-a;break;case 3:r=e-a,n=t-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=e,this._y1=t,this},c7=function(){var o=[];return this.visit(function(i){if(!i.length)do o.push(i.data);while(i=i.next)}),o},f7=function(o){return arguments.length?this.cover(+o[0][0],+o[0][1]).cover(+o[1][0],+o[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Bu=function(o,i,r,n,e){this.node=o,this.x0=i,this.y0=r,this.x1=n,this.y1=e},d7=function(o,i,r){var n,e=this._x0,t=this._y0,a,s,u,l,c=this._x1,f=this._y1,d=[],v=this._root,p,y;for(v&&d.push(new Bu(v,e,t,c,f)),r==null?r=Infinity:(e=o-r,t=i-r,c=o+r,f=i+r,r*=r);p=d.pop();)if(!(!(v=p.node)||(a=p.x0)>c||(s=p.y0)>f||(u=p.x1)<e||(l=p.y1)<t))if(v.length){var C=(a+u)/2,E=(s+l)/2;d.push(new Bu(v[3],C,E,u,l),new Bu(v[2],a,E,C,l),new Bu(v[1],C,s,u,E),new Bu(v[0],a,s,C,E)),(y=(i>=E)<<1|o>=C)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-y],d[d.length-1-y]=p)}else{var w=o-+this._x.call(null,v.data),x=i-+this._y.call(null,v.data),N=w*w+x*x;if(N<r){var j=Math.sqrt(r=N);e=o-j,t=i-j,c=o+j,f=i+j,n=v.data}}return n},h7=function(o){if(isNaN(c=+this._x.call(null,o))||isNaN(f=+this._y.call(null,o)))return this;var i,r=this._root,n,e,t,a=this._x0,s=this._y0,u=this._x1,l=this._y1,c,f,d,v,p,y,C,E;if(!r)return this;if(r.length)for(;;){if((p=c>=(d=(a+u)/2))?a=d:u=d,(y=f>=(v=(s+l)/2))?s=v:l=v,i=r,!(r=r[C=y<<1|p]))return this;if(!r.length)break;(i[C+1&3]||i[C+2&3]||i[C+3&3])&&(n=i,E=C)}for(;r.data!==o;)if(e=r,!(r=r.next))return this;return(t=r.next)&&delete r.next,e?(t?e.next=t:delete e.next,this):i?(t?i[C]=t:delete i[C],(r=i[0]||i[1]||i[2]||i[3])&&r===(i[3]||i[2]||i[1]||i[0])&&!r.length&&(n?n[E]=r:this._root=r),this):(this._root=t,this)};function v7(o){for(var i=0,r=o.length;i<r;++i)this.remove(o[i]);return this}var g7=function(){return this._root},p7=function(){var o=0;return this.visit(function(i){if(!i.length)do++o;while(i=i.next)}),o},m7=function(o){var i=[],r,n=this._root,e,t,a,s,u;for(n&&i.push(new Bu(n,this._x0,this._y0,this._x1,this._y1));r=i.pop();)if(!o(n=r.node,t=r.x0,a=r.y0,s=r.x1,u=r.y1)&&n.length){var l=(t+s)/2,c=(a+u)/2;(e=n[3])&&i.push(new Bu(e,l,c,s,u)),(e=n[2])&&i.push(new Bu(e,t,c,l,u)),(e=n[1])&&i.push(new Bu(e,l,a,s,c)),(e=n[0])&&i.push(new Bu(e,t,a,l,c))}return this},y7=function(o){var i=[],r=[],n;for(this._root&&i.push(new Bu(this._root,this._x0,this._y0,this._x1,this._y1));n=i.pop();){var e=n.node;if(e.length){var t,a=n.x0,s=n.y0,u=n.x1,l=n.y1,c=(a+u)/2,f=(s+l)/2;(t=e[0])&&i.push(new Bu(t,a,s,c,f)),(t=e[1])&&i.push(new Bu(t,c,s,u,f)),(t=e[2])&&i.push(new Bu(t,a,f,c,l)),(t=e[3])&&i.push(new Bu(t,c,f,u,l))}r.push(n)}for(;n=r.pop();)o(n.node,n.x0,n.y0,n.x1,n.y1);return this};function b7(o){return o[0]}var C7=function(o){return arguments.length?(this._x=o,this):this._x};function E7(o){return o[1]}var O7=function(o){return arguments.length?(this._y=o,this):this._y};function lT(o,i,r){var n=new cT(i==null?b7:i,r==null?E7:r,NaN,NaN,NaN,NaN);return o==null?n:n.addAll(o)}function cT(o,i,r,n,e,t){this._x=o,this._y=i,this._x0=r,this._y0=n,this._x1=e,this._y1=t,this._root=void 0}function ID(o){for(var i={data:o.data},r=i;o=o.next;)r=r.next={data:o.data};return i}var Gu=lT.prototype=cT.prototype;Gu.copy=function(){var o=new cT(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root,r,n;if(!i)return o;if(!i.length)return o._root=ID(i),o;for(r=[{source:i,target:o._root=new Array(4)}];i=r.pop();)for(var e=0;e<4;++e)(n=i.source[e])&&(n.length?r.push({source:n,target:i.target[e]=new Array(4)}):i.target[e]=ID(n));return o},Gu.add=s7,Gu.addAll=u7,Gu.cover=l7,Gu.data=c7,Gu.extent=f7,Gu.find=d7,Gu.remove=h7,Gu.removeAll=v7,Gu.root=g7,Gu.size=p7,Gu.visit=m7,Gu.visitAfter=y7,Gu.x=C7,Gu.y=O7;var zu=function(o){return function(){return o}},kh=function(o){return(o()-.5)*1e-6},w7={value:function(){}};function RD(){for(var o=0,i=arguments.length,r={},n;o<i;++o){if(!(n=arguments[o]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new U2(r)}function U2(o){this._=o}function x7(o,i){return o.trim().split(/^|\s+/).map(function(r){var n="",e=r.indexOf(".");if(e>=0&&(n=r.slice(e+1),r=r.slice(0,e)),r&&!i.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}U2.prototype=RD.prototype={constructor:U2,on:function(i,r){var n=this._,e=x7(i+"",n),t,a=-1,s=e.length;if(arguments.length<2){for(;++a<s;)if((t=(i=e[a]).type)&&(t=S7(n[t],i.name)))return t;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++a<s;)if(t=(i=e[a]).type)n[t]=ND(n[t],i.name,r);else if(r==null)for(t in n)n[t]=ND(n[t],i.name,null);return this},copy:function(){var i={},r=this._;for(var n in r)i[n]=r[n].slice();return new U2(i)},call:function(i,r){if((t=arguments.length-2)>0)for(var n=new Array(t),e=0,t,a;e<t;++e)n[e]=arguments[e+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(a=this._[i],e=0,t=a.length;e<t;++e)a[e].value.apply(r,n)},apply:function(i,r,n){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var e=this._[i],t=0,a=e.length;t<a;++t)e[t].value.apply(r,n)}};function S7(o,i){for(var r=0,n=o.length,e;r<n;++r)if((e=o[r]).name===i)return e.value}function ND(o,i,r){for(var n=0,e=o.length;n<e;++n)if(o[n].name===i){o[n]=w7,o=o.slice(0,n).concat(o.slice(n+1));break}return r!=null&&o.push({name:i,value:r}),o}var T7=RD,vp=0,W0=0,$0=0,jD=1e3,V2,X0,H2=0,Kv=0,W2=0,K0=typeof performance=="object"&&performance.now?performance:Date,LD=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(o){setTimeout(o,17)};function _D(){return Kv||(LD(M7),Kv=K0.now()+W2)}function M7(){Kv=0}function fT(){this._call=this._time=this._next=null}fT.prototype=FD.prototype={constructor:fT,restart:function(i,r,n){if(typeof i!="function")throw new TypeError("callback is not a function");n=(n==null?_D():+n)+(r==null?0:+r),!this._next&&X0!==this&&(X0?X0._next=this:V2=this,X0=this),this._call=i,this._time=n,dT()},stop:function(){this._call&&(this._call=null,this._time=Infinity,dT())}};function FD(o,i,r){var n=new fT;return n.restart(o,i,r),n}function A7(){_D(),++vp;for(var o=V2,i;o;)(i=Kv-o._time)>=0&&o._call.call(null,i),o=o._next;--vp}function BD(){Kv=(H2=K0.now())+W2,vp=W0=0;try{A7()}finally{vp=0,k7(),Kv=0}}function P7(){var o=K0.now(),i=o-H2;i>jD&&(W2-=i,H2=o)}function k7(){for(var o,i=V2,r,n=Infinity;i;)i._call?(n>i._time&&(n=i._time),o=i,i=i._next):(r=i._next,i._next=null,i=o?o._next=r:V2=r);X0=o,dT(n)}function dT(o){if(!vp){W0&&(W0=clearTimeout(W0));var i=o-Kv;i>24?(o<Infinity&&(W0=setTimeout(BD,o-K0.now()-W2)),$0&&($0=clearInterval($0))):($0||(H2=K0.now(),$0=setInterval(P7,jD)),vp=1,LD(BD))}}var D7=1664525,I7=1013904223,GD=4294967296,R7=function(){var o=1;return function(){return(o=(D7*o+I7)%GD)/GD}};function N7(o){return o.x}function j7(o){return o.y}var L7=10,_7=Math.PI*(3-Math.sqrt(5)),hT=function(o){var i,r=1,n=.001,e=1-Math.pow(n,1/300),t=0,a=.6,s=new Map,u=FD(f),l=T7("tick","end"),c=R7();o==null&&(o=[]);function f(){d(),l.call("tick",i),r<n&&(u.stop(),l.call("end",i))}function d(y){var C,E=o.length,w;y===void 0&&(y=1);for(var x=0;x<y;++x)for(r+=(t-r)*e,s.forEach(function(N){N(r)}),C=0;C<E;++C)w=o[C],w.fx==null?w.x+=w.vx*=a:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=a:(w.y=w.fy,w.vy=0);return i}function v(){for(var y=0,C=o.length,E;y<C;++y){if(E=o[y],E.index=y,E.fx!=null&&(E.x=E.fx),E.fy!=null&&(E.y=E.fy),isNaN(E.x)||isNaN(E.y)){var w=L7*Math.sqrt(.5+y),x=y*_7;E.x=w*Math.cos(x),E.y=w*Math.sin(x)}(isNaN(E.vx)||isNaN(E.vy))&&(E.vx=E.vy=0)}}function p(y){return y.initialize&&y.initialize(o,c),y}return v(),i={tick:d,restart:function(){return u.restart(f),i},stop:function(){return u.stop(),i},nodes:function(C){return arguments.length?(o=C,v(),s.forEach(p),i):o},alpha:function(C){return arguments.length?(r=+C,i):r},alphaMin:function(C){return arguments.length?(n=+C,i):n},alphaDecay:function(C){return arguments.length?(e=+C,i):+e},alphaTarget:function(C){return arguments.length?(t=+C,i):t},velocityDecay:function(C){return arguments.length?(a=1-C,i):1-a},randomSource:function(C){return arguments.length?(c=C,s.forEach(p),i):c},force:function(C,E){return arguments.length>1?(E==null?s.delete(C):s.set(C,p(E)),i):s.get(C)},find:function(C,E,w){var x=0,N=o.length,j,B,$,Z,fe;for(w==null?w=Infinity:w*=w,x=0;x<N;++x)Z=o[x],j=C-Z.x,B=E-Z.y,$=j*j+B*B,$<w&&(fe=Z,w=$);return fe},on:function(C,E){return arguments.length>1?(l.on(C,E),i):l.on(C)}}},vT=function(){var o,i,r,n,e=zu(-30),t,a=1,s=Infinity,u=.81;function l(v){var p,y=o.length,C=lT(o,N7,j7).visitAfter(f);for(n=v,p=0;p<y;++p)i=o[p],C.visit(d)}function c(){if(!!o){var v,p=o.length,y;for(t=new Array(p),v=0;v<p;++v)y=o[v],t[y.index]=+e(y,v,o)}}function f(v){var p=0,y,C,E=0,w,x,N;if(v.length){for(w=x=N=0;N<4;++N)(y=v[N])&&(C=Math.abs(y.value))&&(p+=y.value,E+=C,w+=C*y.x,x+=C*y.y);v.x=w/E,v.y=x/E}else{y=v,y.x=y.data.x,y.y=y.data.y;do p+=t[y.data.index];while(y=y.next)}v.value=p}function d(v,p,y,C){if(!v.value)return!0;var E=v.x-i.x,w=v.y-i.y,x=C-p,N=E*E+w*w;if(x*x/u<N)return N<s&&(E===0&&(E=kh(r),N+=E*E),w===0&&(w=kh(r),N+=w*w),N<a&&(N=Math.sqrt(a*N)),i.vx+=E*v.value*n/N,i.vy+=w*v.value*n/N),!0;if(v.length||N>=s)return;(v.data!==i||v.next)&&(E===0&&(E=kh(r),N+=E*E),w===0&&(w=kh(r),N+=w*w),N<a&&(N=Math.sqrt(a*N)));do v.data!==i&&(x=t[v.data.index]*n/N,i.vx+=E*x,i.vy+=w*x);while(v=v.next)}return l.initialize=function(v,p){o=v,r=p,c()},l.strength=function(v){return arguments.length?(e=typeof v=="function"?v:zu(+v),c(),l):e},l.distanceMin=function(v){return arguments.length?(a=v*v,l):Math.sqrt(a)},l.distanceMax=function(v){return arguments.length?(s=v*v,l):Math.sqrt(s)},l.theta=function(v){return arguments.length?(u=v*v,l):Math.sqrt(u)},l},zD=function(o,i){var r,n=1;o==null&&(o=0),i==null&&(i=0);function e(){var t,a=r.length,s,u=0,l=0;for(t=0;t<a;++t)s=r[t],u+=s.x,l+=s.y;for(u=(u/a-o)*n,l=(l/a-i)*n,t=0;t<a;++t)s=r[t],s.x-=u,s.y-=l}return e.initialize=function(t){r=t},e.x=function(t){return arguments.length?(o=+t,e):o},e.y=function(t){return arguments.length?(i=+t,e):i},e.strength=function(t){return arguments.length?(n=+t,e):n},e};function F7(o){return o.index}function UD(o,i){var r=o.get(i);if(!r)throw new Error("node not found: "+i);return r}var $2=function(o){var i=F7,r=f,n,e=zu(30),t,a,s,u,l,c=1;o==null&&(o=[]);function f(C){return 1/Math.min(s[C.source.index],s[C.target.index])}function d(C){for(var E=0,w=o.length;E<c;++E)for(var x=0,N,j,B,$,Z,fe,de;x<w;++x)N=o[x],j=N.source,B=N.target,$=B.x+B.vx-j.x-j.vx||kh(l),Z=B.y+B.vy-j.y-j.vy||kh(l),fe=Math.sqrt($*$+Z*Z),fe=(fe-t[x])/fe*C*n[x],$*=fe,Z*=fe,B.vx-=$*(de=u[x]),B.vy-=Z*de,j.vx+=$*(de=1-de),j.vy+=Z*de}function v(){if(!!a){var C,E=a.length,w=o.length,x=new Map(a.map(function(j,B){return[i(j,B,a),j]})),N;for(C=0,s=new Array(E);C<w;++C)N=o[C],N.index=C,typeof N.source!="object"&&(N.source=UD(x,N.source)),typeof N.target!="object"&&(N.target=UD(x,N.target)),s[N.source.index]=(s[N.source.index]||0)+1,s[N.target.index]=(s[N.target.index]||0)+1;for(C=0,u=new Array(w);C<w;++C)N=o[C],u[C]=s[N.source.index]/(s[N.source.index]+s[N.target.index]);n=new Array(w),p(),t=new Array(w),y()}}function p(){if(!!a)for(var C=0,E=o.length;C<E;++C)n[C]=+r(o[C],C,o)}function y(){if(!!a)for(var C=0,E=o.length;C<E;++C)t[C]=+e(o[C],C,o)}return d.initialize=function(C,E){a=C,l=E,v()},d.links=function(C){return arguments.length?(o=C,v(),d):o},d.id=function(C){return arguments.length?(i=C,d):i},d.iterations=function(C){return arguments.length?(c=+C,d):c},d.strength=function(C){return arguments.length?(r=typeof C=="function"?C:zu(+C),p(),d):r},d.distance=function(C){return arguments.length?(e=typeof C=="function"?C:zu(+C),y(),d):e},d};function B7(o){return o.x+o.vx}function G7(o){return o.y+o.vy}var VD=function(o){var i,r,n,e=1,t=1;typeof o!="function"&&(o=zu(o==null?1:+o));function a(){for(var l,c=i.length,f,d,v,p,y,C,E=0;E<t;++E)for(f=lT(i,B7,G7).visitAfter(s),l=0;l<c;++l)d=i[l],y=r[d.index],C=y*y,v=d.x+d.vx,p=d.y+d.vy,f.visit(w);function w(x,N,j,B,$){var Z=x.data,fe=x.r,de=y+fe;if(Z){if(Z.index>d.index){var xe=v-Z.x-Z.vx,Ae=p-Z.y-Z.vy,Ye=xe*xe+Ae*Ae;Ye<de*de&&(xe===0&&(xe=kh(n),Ye+=xe*xe),Ae===0&&(Ae=kh(n),Ye+=Ae*Ae),Ye=(de-(Ye=Math.sqrt(Ye)))/Ye*e,d.vx+=(xe*=Ye)*(de=(fe*=fe)/(C+fe)),d.vy+=(Ae*=Ye)*de,Z.vx-=xe*(de=1-de),Z.vy-=Ae*de)}return}return N>v+de||B<v-de||j>p+de||$<p-de}}function s(l){if(l.data)return l.r=r[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(!!i){var l,c=i.length,f;for(r=new Array(c),l=0;l<c;++l)f=i[l],r[f.index]=+o(f,l,i)}}return a.initialize=function(l,c){i=l,n=c,u()},a.iterations=function(l){return arguments.length?(t=+l,a):t},a.strength=function(l){return arguments.length?(e=+l,a):e},a.radius=function(l){return arguments.length?(o=typeof l=="function"?l:zu(+l),u(),a):o},a},HD=function(o){var i=zu(.1),r,n,e;typeof o!="function"&&(o=zu(o==null?0:+o));function t(s){for(var u=0,l=r.length,c;u<l;++u)c=r[u],c.vx+=(e[u]-c.x)*n[u]*s}function a(){if(!!r){var s,u=r.length;for(n=new Array(u),e=new Array(u),s=0;s<u;++s)n[s]=isNaN(e[s]=+o(r[s],s,r))?0:+i(r[s],s,r)}}return t.initialize=function(s){r=s,a()},t.strength=function(s){return arguments.length?(i=typeof s=="function"?s:zu(+s),a(),t):i},t.x=function(s){return arguments.length?(o=typeof s=="function"?s:zu(+s),a(),t):o},t},WD=function(o){var i=zu(.1),r,n,e;typeof o!="function"&&(o=zu(o==null?0:+o));function t(s){for(var u=0,l=r.length,c;u<l;++u)c=r[u],c.vy+=(e[u]-c.y)*n[u]*s}function a(){if(!!r){var s,u=r.length;for(n=new Array(u),e=new Array(u),s=0;s<u;++s)n[s]=isNaN(e[s]=+o(r[s],s,r))?0:+i(r[s],s,r)}}return t.initialize=function(s){r=s,a()},t.strength=function(s){return arguments.length?(i=typeof s=="function"?s:zu(+s),a(),t):i},t.y=function(s){return arguments.length?(o=typeof s=="function"?s:zu(+s),a(),t):o},t};function z7(){function o(Rn){return function(){return Rn}}var i=function($n){return $n.cluster},r=o(1),n=o(-1),e=o(100),t=o(.1),a=[0,0],s=[],u={},l=[],c=100,f=100,d={none:{x:0,y:0}},v=[],p,y="force",C=!0,E=.1;function w(Rn){if(!C)return w;p.tick(),Z();for(var $n=0,qr=s.length,Kr,fa=Rn*E;$n<qr;++$n)Kr=s[$n],Kr.vx+=(d[i(Kr)].x-Kr.x)*fa,Kr.vy+=(d[i(Kr)].y-Kr.y)*fa}function x(){!s||N()}function N(){if(!(!s||!s.length)){if(i(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Rn=j();p=hT(Rn.nodes).force("x",HD(c).strength(.1)).force("y",WD(f).strength(.1)).force("collide",VD(function($n){return $n.r}).iterations(4)).force("charge",vT().strength(n)).force("links",$2(Rn.nodes.length?Rn.links:[]).distance(e).strength(t)),v=p.nodes(),Z()}}function j(){var Rn=[],$n=[],qr={},Kr=[],fa={},ba=[];return fa=B(s),ba=$(l),Kr=Object.keys(fa),Kr.forEach(function(qi,No){var ni=fa[qi];Rn.push({id:qi,size:ni.count,r:Math.sqrt(ni.sumforceNodeSize/Math.PI)}),qr[qi]=No}),ba.forEach(function(qi){var No=Ci(qi,"source"),ni=Ci(qi,"target"),Vu=qr[No],Jc=qr[ni];Vu!==void 0&&Jc!==void 0&&$n.push({source:Vu,target:Jc,count:qi.count})}),{nodes:Rn,links:$n}}function B(Rn){var $n={};return Rn.forEach(function(qr){var Kr=i(qr);$n[Kr]||($n[Kr]={count:0,sumforceNodeSize:0})}),Rn.forEach(function(qr){var Kr=i(qr),fa=r(qr),ba=$n[Kr];ba.count=ba.count+1,ba.sumforceNodeSize=ba.sumforceNodeSize+Math.PI*(fa*fa)*1.3,$n[Kr]=ba}),$n}function $(Rn){var $n={},qr=[];Rn.forEach(function(fa){var ba=fe(fa),qi=0;$n[ba]!==void 0&&(qi=$n[ba]),qi+=1,$n[ba]=qi});var Kr=Object.entries($n);return Kr.forEach(function(fa){var ba=Object(Ue.a)(fa,2),qi=ba[0],No=ba[1],ni=qi.split("~")[0],Vu=qi.split("~")[1];ni!==void 0&&Vu!==void 0&&qr.push({source:ni,target:Vu,count:No})}),qr}function Z(){return d={none:{x:0,y:0}},v.forEach(function(Rn){d[Rn.id]={x:Rn.x-a[0],y:Rn.y-a[1]}}),d}function fe(Rn){var $n=Ci(Rn,"source"),qr=Ci(Rn,"target"),Kr=i(u[$n]),fa=i(u[qr]);return Kr<=fa?"".concat(Kr,"~").concat(fa):"".concat(fa,"~").concat(Kr)}function de(Rn){u={},Rn.forEach(function($n){u[$n.id]=$n})}function xe(Rn){return arguments.length?(y=Rn,x(),w):y}function Ae(Rn){return arguments.length?typeof Rn=="string"?(i=function(qr){return qr[Rn]},w):(i=Rn,w):i}function Ye(Rn){return arguments.length?(C=Rn,w):C}function rt(Rn){return arguments.length?(E=Rn,w):E}function je(Rn){return arguments.length?(c=Rn,w):c}function ot(Rn){return arguments.length?(f=Rn,w):f}function Ft(Rn){return arguments.length?(de(Rn||[]),s=Rn||[],w):s}function hn(Rn){return arguments.length?(l=Rn||[],x(),w):l}function In(Rn){return arguments.length?(typeof Rn=="function"?r=Rn:r=o(+Rn),x(),w):r}function xn(Rn){return arguments.length?(typeof Rn=="function"?n=Rn:n=o(+Rn),x(),w):n}function dn(Rn){return arguments.length?(typeof Rn=="function"?e=Rn:e=o(+Rn),x(),w):e}function tr(Rn){return arguments.length?(typeof Rn=="function"?t=Rn:t=o(+Rn),x(),w):t}function Ut(Rn){return arguments.length?(a=Rn,w):a}return w.initialize=function(Rn){s=Rn,x()},w.template=xe,w.groupBy=Ae,w.enableGrouping=Ye,w.strength=rt,w.centerX=je,w.centerY=ot,w.nodes=Ft,w.links=hn,w.forceNodeSize=In,w.nodeSize=w.forceNodeSize,w.forceCharge=xn,w.forceLinkDistance=dn,w.forceLinkStrength=tr,w.offset=Ut,w.getFocis=Z,w}var gT={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},U7=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,n&&e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(e){var t=this;t.nodes=e.nodes||[];var a=e.edges||[];t.edges=a.map(function(s){var u={},l=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(s).forEach(function(c){l.indexOf(c)>-1||(u[c]=s[c])}),u}),t.ticking=!1}},{key:"execute",value:function(e){var t=this,a=t.nodes,s=t.edges;if(!t.ticking){var u=t.forceSimulation,l=t.alphaMin,c=t.alphaDecay,f=t.alpha;if(u){if(e){if(t.clustering&&t.clusterForce&&(t.clusterForce.nodes(a),t.clusterForce.links(s)),u.nodes(a),s&&t.edgeForce)t.edgeForce.links(s);else if(s&&!t.edgeForce){var E=$2().id(function(w){return w.id}).links(s);t.edgeStrength&&E.strength(t.edgeStrength),t.linkDistance&&E.distance(t.linkDistance),t.edgeForce=E,u.force("link",E)}}t.preventOverlap&&t.overlapProcess(u),u.alpha(f).restart(),this.ticking=!0}else try{var d=vT();if(t.nodeStrength&&d.strength(t.nodeStrength),u=hT().nodes(a),t.clustering){var v=z7();v.centerX(t.center[0]).centerY(t.center[1]).template("force").strength(t.clusterFociStrength),s&&v.links(s),a&&v.nodes(a),v.forceLinkDistance(t.clusterEdgeDistance).forceLinkStrength(t.clusterEdgeStrength).forceCharge(t.clusterNodeStrength).forceNodeSize(t.clusterNodeSize),t.clusterForce=v,u.force("group",v)}if(u.force("center",zD(t.center[0],t.center[1])).force("charge",d).alpha(f).alphaDecay(c).alphaMin(l),t.preventOverlap&&t.overlapProcess(u),s){var p=$2().id(function(w){return w.id}).links(s);t.edgeStrength&&p.strength(t.edgeStrength),t.linkDistance&&p.distance(t.linkDistance),t.edgeForce=p,u.force("link",p)}if(t.workerEnabled&&!H7()&&(t.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!t.workerEnabled)u.on("tick",function(){t.tick()}).on("end",function(){t.ticking=!1,t.onLayoutEnd&&t.onLayoutEnd()}),t.ticking=!0;else{u.stop();for(var y=V7(u),C=1;C<=y;C++)u.tick(),postMessage({nodes:a,currentTick:C,totalTicks:y,type:gT.TICK},void 0);t.ticking=!1}t.forceSimulation=u,t.ticking=!0}catch(w){t.ticking=!1,console.warn(w)}}}},{key:"overlapProcess",value:function(e){var t=this,a=t.nodeSize,s=t.nodeSpacing,u,l,c=t.collideStrength;if(Ir(s)?l=function(){return s}:Ah(s)?l=s:l=function(){return 0},!a)u=function(y){if(y.size){if(ru(y.size)){var C=y.size[0]>y.size[1]?y.size[0]:y.size[1];return C/2+l(y)}if(jf(y.size)){var E=y.size.width>y.size.height?y.size.width:y.size.height;return E/2+l(y)}return y.size/2+l(y)}return 10+l(y)};else if(Ah(a))u=function(y){var C=a(y);return C+l(y)};else if(ru(a)){var f=a[0]>a[1]?a[0]:a[1],d=f/2;u=function(y){return d+l(y)}}else if(Ir(a)){var v=a/2;u=function(y){return v+l(y)}}else u=function(){return 10};e.force("collisionForce",VD(u).strength(c))}},{key:"updateCfg",value:function(e){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.forceSimulation=null,Object.assign(t,e)}},{key:"destroy",value:function(){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.nodes=null,e.edges=null,e.destroyed=!0}}]),r}(Ou);function V7(o){var i=o.alphaMin(),r=o.alphaTarget(),n=o.alpha(),e=Math.log((i-r)/(n-r))/Math.log(1-o.alphaDecay()),t=Math.ceil(e);return t}function H7(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function W7(o,i,r,n){o.forEach(function(e,t){o[t].children=[],o[t].parent=[]}),n?i.forEach(function(e){var t=Ci(e,"source"),a=Ci(e,"target"),s=0;t&&(s=r[t]);var u=0;a&&(u=r[a]);var l=o[s].children,c=o[u].parent;l.push(o[u].id),c.push(o[s].id)}):i.forEach(function(e){var t=Ci(e,"source"),a=Ci(e,"target"),s=0;t&&(s=r[t]);var u=0;a&&(u=r[a]);var l=o[s].children,c=o[u].children;l.push(o[u].id),c.push(o[s].id)})}function $7(o,i,r){for(var n=r.length,e=0;e<n;e++){var t=Ci(r[e],"source"),a=Ci(r[e],"target");if(o.id===t&&i.id===a||i.id===t&&o.id===a)return!0}return!1}function X7(o,i){var r=o.degree,n=i.degree;return r<n?-1:r>n?1:0}var K7=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges,s=t.length;if(s===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var u=e.center;if(s===1){t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd();return}var l=e.radius,c=e.startRadius,f=e.endRadius,d=e.divisions,v=e.startAngle,p=e.endAngle,y=(p-v)/s,C={};t.forEach(function(xe,Ae){C[xe.id]=Ae}),e.nodeMap=C;var E=H0(t.length,C,a);e.degrees=E,!l&&!c&&!f?l=e.height>e.width?e.width/2:e.height/2:!c&&f?c=f:c&&!f&&(f=c);var w=e.angleRatio,x=y*w,N=e.ordering,j=[];N==="topology"?j=e.topologyOrdering():N==="topology-directed"?j=e.topologyOrdering(!0):N==="degree"?j=e.degreeOrdering():j=t;for(var B=e.clockwise,$=Math.ceil(s/d),Z=0;Z<s;++Z){var fe=l;!fe&&c!==null&&f!==null&&(fe=c+Z*(f-c)/(s-1)),fe||(fe=10+Z*100/(s-1));var de=v+Z%$*x+2*Math.PI/d*Math.floor(Z/$);B||(de=p-Z%$*x-2*Math.PI/d*Math.floor(Z/$)),j[Z].x=u[0]+Math.cos(de)*fe,j[Z].y=u[1]+Math.sin(de)*fe,j[Z].weight=E[Z]}return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:j,edges:this.edges}}},{key:"topologyOrdering",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this,a=t.degrees,s=t.edges,u=t.nodes,l=sT(u),c=t.nodeMap,f=[l[0]],d=[u[0]],v=[],p=u.length;v[0]=!0,W7(l,s,c,e);var y=0;return l.forEach(function(C,E){if(E!==0)if((E===p-1||a[E]!==a[E+1]||$7(f[y],C,s))&&!v[E])f.push(C),d.push(u[c[C.id]]),v[E]=!0,y++;else{for(var w=f[y].children,x=!1,N=0;N<w.length;N++){var j=c[w[N]];if(a[j]===a[E]&&!v[j]){f.push(l[j]),d.push(u[c[l[j].id]]),v[j]=!0,x=!0;break}}for(var B=0;!x&&(v[B]||(f.push(l[B]),d.push(u[c[l[B].id]]),v[B]=!0,x=!0),B++,B!==p););}}),d}},{key:"degreeOrdering",value:function(){var e=this,t=e.nodes,a=[],s=e.degrees;return t.forEach(function(u,l){u.degree=s[l],a.push(u)}),a.sort(X7),a}},{key:"getType",value:function(){return"circular"}}]),r}(Ou),Y7=h("P81+"),Z7=h.n(Y7),pT=Z7.a;!pT&&typeof window!="undefined"&&(pT=window.graphlib),Array.prototype.flat||(Array.prototype.flat=function(o){var i=o||1;if(!!isFinite(i)){var r=this.length,n=[];if(this.length===0)return this;for(;i--;){var e=[],t=!1;if(n.length===0){t=!0;for(var a=0;a<r;a++)if(this[a]instanceof Array){var s;(s=n).push.apply(s,Object(Qe.a)(this[a]))}else n.push(this[a])}else{for(var u=0;u<n.length;u++)n[u]instanceof Array?(t=!0,e.push.apply(e,Object(Qe.a)(n[u]))):e.push(n[u]);n=e}if(!t&&i===Infinity)break}return n}});var Md=pT,$D=function(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev},J7=function(i,r){if(i!=="_next"&&i!=="_prev")return r},Q7=function(){function o(){Object(De.a)(this,o);var i={};i._next=i._prev=i,this.isentinel=i}return Object(be.a)(o,[{key:"dequeue",value:function(){var r=this.isentinel,n=r._prev;if(n!==r)return $D(n),n}},{key:"enqueue",value:function(){var r=this.isentinel,n=r._prev;if(n!==r)return $D(n),n}},{key:"toString",value:function(){for(var r=[],n=this.isentinel,e=n._prev;e!==n;)r.push(JSON.stringify(e,J7)),e=e._prev;return"[".concat(r.join(", "),"]")}}]),o}(),q7=Q7,eV=Md.Graph,tV=function(){return 1},nV=function(i,r){var n;if(i.nodeCount()<=1)return[];var e=aV(i,r||tV),t=rV(e.graph,e.buckets,e.zeroIdx);return(n=t.map(function(a){return i.outEdges(a.v,a.w)}))===null||n===void 0?void 0:n.flat()},rV=function(i,r,n){for(var e=[],t=r[r.length-1],a=r[0],s;i.nodeCount();){for(;s=a.dequeue();)mT(i,r,n,s);for(;s=t.dequeue();)mT(i,r,n,s);if(i.nodeCount()){for(var u=r.length-2;u>0;--u)if(s=r[u].dequeue(),s){e=e.concat(mT(i,r,n,s,!0));break}}}return e},mT=function(i,r,n,e,t){var a,s,u=t?[]:void 0;return(a=i.inEdges(e.v))===null||a===void 0||a.forEach(function(l){var c=i.edge(l),f=i.node(l.v);t&&u.push({v:l.v,w:l.w}),f.out===void 0&&(f.out=0),f.out-=c,yT(r,n,f)}),(s=i.outEdges(e.v))===null||s===void 0||s.forEach(function(l){var c=i.edge(l),f=l.w,d=i.node(f);d.in===void 0&&(d.in=0),d.in-=c,yT(r,n,d)}),i.removeNode(e.v),u},aV=function(i,r){var n=new eV,e=0,t=0;i.nodes().forEach(function(c){n.setNode(c,{v:c,in:0,out:0})}),i.edges().forEach(function(c){var f=n.edge(c.v,c.w)||0,d=r==null?void 0:r(c),v=f+d;n.setEdge(c.v,c.w,v),t=Math.max(t,n.node(c.v).out+=d),e=Math.max(e,n.node(c.w).in+=d)});for(var a=[],s=t+e+3,u=0;u<s;u++)a.push(new q7);var l=e+1;return n.nodes().forEach(function(c){yT(a,l,n.node(c))}),{buckets:a,zeroIdx:l,graph:n}},yT=function(i,r,n){n.out?n.in?i[n.out-n.in+r].enqueue(n):i[i.length-1].enqueue(n):i[0].enqueue(n)},iV=nV,oV=function(i){var r=function(t){return function(a){return t.edge(a).weight}},n=i.graph().acyclicer==="greedy"?iV(i,r(i)):sV(i);n==null||n.forEach(function(e){var t=i.edge(e);i.removeEdge(e),t.forwardName=e.name,t.reversed=!0,i.setEdge(e.w,e.v,t,"rev-".concat(Math.random()))})},sV=function(i){var r=[],n={},e={},t=function a(s){var u;e.hasOwnProperty(s)||(e[s]=!0,n[s]=!0,(u=i.outEdges(s))===null||u===void 0||u.forEach(function(l){n.hasOwnProperty(l.w)?r.push(l):a(l.w)}),delete n[s])};return i.nodes().forEach(t),r},uV=function(i){i.edges().forEach(function(r){var n=i.edge(r);if(n.reversed){i.removeEdge(r);var e=n.forwardName;delete n.reversed,delete n.forwardName,i.setEdge(r.w,r.v,n,e)}})},XD={run:oV,undo:uV},KD=Md.Graph,YD=function(i,r,n,e){var t;do t="".concat(e).concat(Math.random());while(i.hasNode(t));return n.dummy=r,i.setNode(t,n),t},ZD=function(i){var r=new KD().setGraph(i.graph());return i.nodes().forEach(function(n){r.setNode(n,i.node(n))}),i.edges().forEach(function(n){var e=r.edge(n.v,n.w)||{weight:0,minlen:1},t=i.edge(n);r.setEdge(n.v,n.w,{weight:e.weight+t.weight,minlen:Math.max(e.minlen,t.minlen)})}),r},lV=function(i){var r=new KD({multigraph:i.isMultigraph()}).setGraph(i.graph());return i.nodes().forEach(function(n){var e;((e=i.children(n))===null||e===void 0?void 0:e.length)||r.setNode(n,i.node(n))}),i.edges().forEach(function(n){return r.setEdge(n,i.edge(n))}),r},X2=function(i,r){var n={};return i==null||i.forEach(function(e,t){n[e]=r[t]}),n},cV=function(i){var r=i.nodes().map(function(n){var e,t={};return(e=i.outEdges(n))===null||e===void 0||e.forEach(function(a){t[a.w]=(t[a.w]||0)+i.edge(a).weight}),t});return X2(i.nodes(),r)},fV=function(i){var r=i.nodes().map(function(n){var e,t={};return(e=i.inEdges(n))===null||e===void 0||e.forEach(function(a){t[a.v]=(t[a.v]||0)+i.edge(a).weight}),t});return X2(i.nodes(),r)},dV=function(i,r){var n=i.x,e=i.y,t=r.x-n,a=r.y-e,s=i.width/2,u=i.height/2;if(!t&&!a)return{x:0,y:0};var l,c;return Math.abs(a)*s>Math.abs(t)*u?(a<0&&(u=-u),l=u*t/a,c=u):(t<0&&(s=-s),l=s,c=s*a/t),{x:n+l,y:e+c}},hV=function(i){for(var r=[],n=[],e=qD(i)+1,t=0;t<e;t++)r.push([]),n.push([]);return i.nodes().forEach(function(a){var s=i.node(a),u=s.rank;u!==void 0&&r[u]&&n[u].push(a)}),n==null||n.forEach(function(a,s){a==null||a.sort(function(u,l){var c,f;return((c=i.node(u))===null||c===void 0?void 0:c.order)-((f=i.node(l))===null||f===void 0?void 0:f.order)}),a.forEach(function(u){r[s].push(u)})}),r},JD=function(i){var r=i.nodes().filter(function(e){return i.node(e).rank!==void 0}).map(function(e){return i.node(e).rank}),n=Math.min.apply(Math,Object(Qe.a)(r));i.nodes().forEach(function(e){var t=i.node(e);t.hasOwnProperty("rank")&&(t.rank||(t.rank=0),t.rank-=n)})},QD=function(i){var r=i.nodes().filter(function(l){return i.node(l).rank!==void 0}).map(function(l){return i.node(l).rank}),n=Math.min.apply(Math,Object(Qe.a)(r)),e=[];i.nodes().forEach(function(l){var c,f=(((c=i.node(l))===null||c===void 0?void 0:c.rank)||0)-n;e[f]||(e[f]=[]),e[f].push(l)});for(var t=0,a=i.graph().nodeRankFactor||0,s=0;s<e.length;s++){var u=e[s];u===void 0&&s%a!=0?--t:t&&(u==null||u.forEach(function(l){i.node(l).rank||(i.node(l).rank=0),i.node(l).rank+=t}))}},vV=function(i,r,n,e){var t={width:0,height:0};return Ir(n)&&Ir(e)&&(t.rank=n,t.order=e),YD(i,"border",t,r)},qD=function(i){var r=i.nodes().map(function(n){var e=i.node(n).rank;return e!==void 0?e:-Infinity});return Math.max.apply(Math,Object(Qe.a)(r))},gV=function(i,r){var n={lhs:[],rhs:[]};return i==null||i.forEach(function(e){r(e)?n.lhs.push(e):n.rhs.push(e)}),n},e3=function(i,r){var n=Date.now();try{return r()}finally{console.log("".concat(i," time: ").concat(Date.now()-n,"ms"))}},t3=function(i,r){return r()},bT=function(i,r){var n=Infinity,e;return i==null||i.forEach(function(t){var a=r(t);n>a&&(n=a,e=t)}),e},ns={addDummyNode:YD,simplify:ZD,asNonCompoundGraph:lV,successorWeights:cV,predecessorWeights:fV,intersectRect:dV,buildLayerMatrix:hV,normalizeRanks:JD,removeEmptyRanks:QD,addBorderNode:vV,maxRank:qD,partition:gV,time:e3,notime:t3,zipObject:X2,minBy:bT},pV=function(i){i.graph().dummyChains=[],i.edges().forEach(function(r){return mV(i,r)})},mV=function(i,r){var n,e,t=r.v,a=i.node(t).rank,s=r.w,u=i.node(s).rank,l=r.name,c=i.edge(r),f=c.labelRank;if(u!==a+1){i.removeEdge(r);var d,v,p;for(p=0,++a;a<u;++p,++a)c.points=[],v={edgeLabel:c,width:0,height:0,edgeObj:r,rank:a},d=ns.addDummyNode(i,"edge",v,"_d"),a===f&&(v.width=c.width,v.height=c.height,v.dummy="edge-label",v.labelpos=c.labelpos),i.setEdge(t,d,{weight:c.weight},l),p===0&&(i.graph().dummyChains||(i.graph().dummyChains=[]),(e=(n=i.graph())===null||n===void 0?void 0:n.dummyChains)===null||e===void 0||e.push(d)),t=d;i.setEdge(t,s,{weight:c.weight},l)}},yV=function(i){var r;(r=i.graph().dummyChains)===null||r===void 0||r.forEach(function(n){var e,t=i.node(n),a=t.edgeLabel,s;t.edgeObj&&i.setEdge(t.edgeObj,a);for(var u=n;t.dummy;)s=(e=i.successors(u))===null||e===void 0?void 0:e[0],i.removeNode(u),a.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(a.x=t.x,a.y=t.y,a.width=t.width,a.height=t.height),u=s,t=i.node(u)})},n3={run:pV,undo:yV},CT=function(i){var r,n={},e=function t(a){var s,u=i.node(a);if(n.hasOwnProperty(a))return u.rank;n[a]=!0;var l=(s=i.outEdges(a))===null||s===void 0?void 0:s.map(function(f){return t(f.w)-i.edge(f).minlen||Infinity}),c=Math.min.apply(Math,Object(Qe.a)(l));return(c===Number.POSITIVE_INFINITY||c===void 0||c===null)&&(c=0),u.rank=c,c};(r=i.sources())===null||r===void 0||r.forEach(function(t){return e(t)})},r3=function(i){var r,n={},e=0,t=function s(u){var l,c=i.node(u);if(n.hasOwnProperty(u))return c.rank;n[u]=!0;var f=(l=i.outEdges(u))===null||l===void 0?void 0:l.map(function(v){return s(v.w)-i.edge(v).minlen||Infinity}),d=Math.min.apply(Math,Object(Qe.a)(f));return(d===Number.POSITIVE_INFINITY||d===void 0||d===null)&&(d=0),c.rank=d,e=Math.min(c.rank,e),c.rank};(r=i.sources())===null||r===void 0||r.forEach(function(s){return t(s)}),e+=1;var a=function s(u,l){var c,f=i.node(u),d=isNaN(f.layer)?l:f.layer;(f.rank===void 0||f.rank<d)&&(f.rank=d),(c=i.outEdges(u))===null||c===void 0||c.map(function(v){s(v.w,d+i.edge(v).minlen)})};i.nodes().forEach(function(s){var u=i.node(s);isNaN(u.layer)?u.rank-=e:a(s,u.layer)})},Ad=function(i,r){return i.node(r.w).rank-i.node(r.v).rank-i.edge(r).minlen},xq={longestPath:CT,longestPathWithLayer:r3,slack:Ad},a3=Md.Graph,i3=function(i){var r=new a3({directed:!1}),n=i.nodes()[0],e=i.nodeCount();r.setNode(n,{});for(var t,a;bV(r,i)<e;)t=s3(r,i),a=r.hasNode(t.v)?Ad(i,t):-Ad(i,t),u3(r,i,a);return r},bV=function(i,r){var n=function e(t){r.nodeEdges(t).forEach(function(a){var s=a.v,u=t===s?a.w:s;!i.hasNode(u)&&!Ad(r,a)&&(i.setNode(u,{}),i.setEdge(t,u,{}),e(u))})};return i.nodes().forEach(n),i.nodeCount()},o3=function(i){var r=new a3({directed:!1}),n=i.nodes()[0],e=i.nodeCount();r.setNode(n,{});for(var t,a;CV(r,i)<e;)t=s3(r,i),a=r.hasNode(t.v)?Ad(i,t):-Ad(i,t),u3(r,i,a);return r},CV=function(i,r){var n=function e(t){var a;(a=r.nodeEdges(t))===null||a===void 0||a.forEach(function(s){var u=s.v,l=t===u?s.w:u;!i.hasNode(l)&&(r.node(l).layer!==void 0||!Ad(r,s))&&(i.setNode(l,{}),i.setEdge(t,l,{}),e(l))})};return i.nodes().forEach(n),i.nodeCount()},s3=function(i,r){return bT(r.edges(),function(n){return i.hasNode(n.v)!==i.hasNode(n.w)?Ad(r,n):Infinity})},u3=function(i,r,n){i.nodes().forEach(function(e){r.node(e).rank||(r.node(e).rank=0),r.node(e).rank+=n})},Sq={feasibleTree:i3,feasibleTreeWithLayer:o3},l3=Md.alg,EV=l3.preorder,OV=l3.postorder,Yv=function(i){i=ZD(i),CT(i);var r=i3(i);OT(r),ET(r,i);for(var n,e;n=f3(r);)e=d3(r,i,n),h3(r,i,n,e)},ET=function(i,r){var n=OV(i,i.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(function(e){wV(i,r,e)})},wV=function(i,r,n){var e=i.node(n),t=e.parent;i.edge(n,t).cutvalue=c3(i,r,n)},c3=function(i,r,n){var e,t=i.node(n),a=t.parent,s=!0,u=r.edge(n,a),l=0;return u||(s=!1,u=r.edge(a,n)),l=u.weight,(e=r.nodeEdges(n))===null||e===void 0||e.forEach(function(c){var f=c.v===n,d=f?c.w:c.v;if(d!==a){var v=f===s,p=r.edge(c).weight;if(l+=v?p:-p,TV(i,n,d)){var y=i.edge(n,d).cutvalue;l+=v?-y:y}}}),l},OT=function(i,r){r!==void 0&&(r=i.nodes()[0]),xV(i,{},1,r)},xV=function o(i,r,n,e,t){var a,s=n,u=n,l=i.node(e);return r[e]=!0,(a=i.neighbors(e))===null||a===void 0||a.forEach(function(c){r.hasOwnProperty(c)||(u=o(i,r,u,c,e))}),l.low=s,l.lim=u++,t?l.parent=t:delete l.parent,u},f3=function(i){return i.edges().find(function(r){return i.edge(r).cutvalue<0})},d3=function(i,r,n){var e=n.v,t=n.w;r.hasEdge(e,t)||(e=n.w,t=n.v);var a=i.node(e),s=i.node(t),u=a,l=!1;a.lim>s.lim&&(u=s,l=!0);var c=r.edges().filter(function(f){return l===v3(i,i.node(f.v),u)&&l!==v3(i,i.node(f.w),u)});return bT(c,function(f){return Ad(r,f)})},h3=function(i,r,n,e){var t=n.v,a=n.w;i.removeEdge(t,a),i.setEdge(e.v,e.w,{}),OT(i),ET(i,r),SV(i,r)},SV=function(i,r){var n=i.nodes().find(function(t){return!r.node(t).parent}),e=EV(i,n);e=e==null?void 0:e.slice(1),e==null||e.forEach(function(t){var a=i.node(t).parent,s=r.edge(t,a),u=!1;s||(s=r.edge(a,t),u=!0),r.node(t).rank=r.node(a).rank+(u?s.minlen:-s.minlen)})},TV=function(i,r,n){return i.hasEdge(r,n)},v3=function(i,r,n){return n.low<=r.lim&&r.lim<=n.lim};Yv.initLowLimValues=OT,Yv.initCutValues=ET,Yv.calcCutValue=c3,Yv.leaveEdge=f3,Yv.enterEdge=d3,Yv.exchangeEdges=h3;var MV=Yv,AV=function(i){switch(i.graph().ranker){case"network-simplex":kV(i);break;case"tight-tree":g3(i);break;case"longest-path":PV(i);break;default:g3(i)}},PV=CT,g3=function(i){r3(i),o3(i)},kV=function(i){MV(i)},DV=AV,IV=function(i){var r,n=NV(i);(r=i.graph().dummyChains)===null||r===void 0||r.forEach(function(e){var t,a,s=i.node(e),u=s.edgeObj;if(!!u)for(var l=RV(i,n,u.v,u.w),c=l.path,f=l.lca,d=0,v=c[d],p=!0;e!==u.w;){if(s=i.node(e),p){for(;(v=c[d])!==f&&i.node(v).maxRank<s.rank;)d++;v===f&&(p=!1)}if(!p){for(;d<c.length-1&&((t=i.node(v=c[d+1]))===null||t===void 0?void 0:t.minRank)<=s.rank;)d++;v=c[d]}i.setParent(e,v),e=(a=i.successors(e))===null||a===void 0?void 0:a[0]}})},RV=function(i,r,n,e){var t=[],a=[],s=Math.min(r[n].low,r[e].low),u=Math.max(r[n].lim,r[e].lim),l,c;l=n;do l=i.parent(l),t.push(l);while(l&&(r[l].low>s||u>r[l].lim));for(c=l,l=e;(l=i.parent(l))!==c;)a.push(l);return{lca:c,path:t.concat(a.reverse())}},NV=function(i){var r,n={},e=0,t=function a(s){var u,l=e;(u=i.children(s))===null||u===void 0||u.forEach(a),n[s]={low:l,lim:e++}};return(r=i.children())===null||r===void 0||r.forEach(t),n},jV=IV,LV=function(i){var r,n=ns.addDummyNode(i,"root",{},"_root"),e=FV(i),t=Math.max.apply(Math,Object(Qe.a)(Object.values(e)))-1,a=2*t+1;i.graph().nestingRoot=n,i.edges().forEach(function(u){i.edge(u).minlen*=a});var s=BV(i)+1;(r=i.children())===null||r===void 0||r.forEach(function(u){_V(i,n,a,s,t,e,u)}),i.graph().nodeRankFactor=a},_V=function o(i,r,n,e,t,a,s){var u=i.children(s);if(!(u==null?void 0:u.length)){s!==r&&i.setEdge(r,s,{weight:0,minlen:n});return}var l=ns.addBorderNode(i,"_bt"),c=ns.addBorderNode(i,"_bb"),f=i.node(s);i.setParent(l,s),f.borderTop=l,i.setParent(c,s),f.borderBottom=c,u==null||u.forEach(function(d){o(i,r,n,e,t,a,d);var v=i.node(d),p=v.borderTop?v.borderTop:d,y=v.borderBottom?v.borderBottom:d,C=v.borderTop?e:2*e,E=p!==y?1:t-a[s]+1;i.setEdge(l,p,{minlen:E,weight:C,nestingEdge:!0}),i.setEdge(y,c,{minlen:E,weight:C,nestingEdge:!0})}),i.parent(s)||i.setEdge(r,l,{weight:0,minlen:t+a[s]})},FV=function(i){var r,n={},e=function t(a,s){var u=i.children(a);u==null||u.forEach(function(l){return t(l,s+1)}),n[a]=s};return(r=i.children())===null||r===void 0||r.forEach(function(t){return e(t,1)}),n},BV=function(i){var r=0;return i.edges().forEach(function(n){r+=i.edge(n).weight}),r},GV=function(i){var r=i.graph();r.nestingRoot&&i.removeNode(r.nestingRoot),delete r.nestingRoot,i.edges().forEach(function(n){var e=i.edge(n);e.nestingEdge&&i.removeEdge(n)})},p3={run:LV,cleanup:GV},zV=function(i){var r,n=function e(t){var a=i.children(t),s=i.node(t);if((a==null?void 0:a.length)&&a.forEach(function(c){return e(c)}),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(var u=s.minRank,l=s.maxRank+1;u<l;++u)m3(i,"borderLeft","_bl",t,s,u),m3(i,"borderRight","_br",t,s,u)}};(r=i.children())===null||r===void 0||r.forEach(function(e){return n(e)})},m3=function(i,r,n,e,t,a){var s={rank:a,width:0,height:0,borderType:r},u=t[r][a-1],l=ns.addDummyNode(i,"border",s,n);t[r][a]=l,i.setParent(l,e),u&&i.setEdge(u,l,{weight:1})},UV=zV,VV=function(i){var r,n=(r=i.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(n==="lr"||n==="rl")&&y3(i)},HV=function(i){var r,n=(r=i.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(n==="bt"||n==="rl")&&WV(i),(n==="lr"||n==="rl")&&($V(i),y3(i))},y3=function(i){i.nodes().forEach(function(r){b3(i.node(r))}),i.edges().forEach(function(r){b3(i.edge(r))})},b3=function(i){var r=i.width;i.width=i.height,i.height=r},WV=function(i){i.nodes().forEach(function(r){wT(i.node(r))}),i.edges().forEach(function(r){var n,e=i.edge(r);(n=e.points)===null||n===void 0||n.forEach(function(t){return wT(t)}),e.hasOwnProperty("y")&&wT(e)})},wT=function(i){i.y=-i.y},$V=function(i){i.nodes().forEach(function(r){xT(i.node(r))}),i.edges().forEach(function(r){var n,e=i.edge(r);(n=e.points)===null||n===void 0||n.forEach(function(t){return xT(t)}),e.hasOwnProperty("x")&&xT(e)})},xT=function(i){var r=i.x;i.x=i.y,i.y=r},C3={adjust:VV,undo:HV},XV=function(i){for(var r={},n=i.nodes().filter(function(d){var v;return!((v=i.children(d))===null||v===void 0?void 0:v.length)}),e=n.map(function(d){return i.node(d).rank}),t=Math.max.apply(Math,Object(Qe.a)(e)),a=[],s=0;s<t+1;s++)a.push([]);var u=function d(v){var p;if(!r.hasOwnProperty(v)){r[v]=!0;var y=i.node(v);isNaN(y.rank)||a[y.rank].push(v),(p=i.successors(v))===null||p===void 0||p.forEach(function(C){return d(C)})}},l=n.sort(function(d,v){return i.node(d).rank-i.node(v).rank}),c=l.filter(function(d){return i.node(d).fixorder!==void 0}),f=c.sort(function(d,v){return i.node(d).fixorder-i.node(v).fixorder});return f==null||f.forEach(function(d){isNaN(i.node(d).rank)||a[i.node(d).rank].push(d),r[d]=!0}),l==null||l.forEach(u),a},E3=XV,KV=function(i,r,n){for(var e=X2(n,n.map(function(f,d){return d})),t=r.map(function(f){var d,v=(d=i.outEdges(f))===null||d===void 0?void 0:d.map(function(p){return{pos:e[p.w]||0,weight:i.edge(p).weight}});return v==null?void 0:v.sort(function(p,y){return p.pos-y.pos})}),a=t.flat().filter(function(f){return f!==void 0}),s=1;s<n.length;)s<<=1;var u=2*s-1;s-=1;var l=Array(u).fill(0,0,u),c=0;return a==null||a.forEach(function(f){var d=f.pos+s;l[d]+=f.weight;for(var v=0;d>0;)d%2&&(v+=l[d+1]),d=d-1>>1,l[d]+=f.weight;c+=f.weight*v}),c},YV=function(i,r){for(var n=0,e=1;e<(r==null?void 0:r.length);++e)n+=KV(i,r[e-1],r[e]);return n},O3=YV,ZV=Md.Graph,JV=function(i,r,n){var e=QV(i),t=new ZV({compound:!0}).setGraph({root:e}).setDefaultNodeLabel(function(a){return i.node(a)});return i.nodes().forEach(function(a){var s=i.node(a),u=i.parent(a);(s.rank===r||s.minRank<=r&&r<=s.maxRank)&&(t.setNode(a),t.setParent(a,u||e),i[n](a).forEach(function(l){var c=l.v===a?l.w:l.v,f=t.edge(c,a),d=f!==void 0?f.weight:0;t.setEdge(c,a,{weight:i.edge(l).weight+d})}),s.hasOwnProperty("minRank")&&t.setNode(a,{borderLeft:s.borderLeft[r],borderRight:s.borderRight[r]}))}),t},QV=function(i){for(var r;i.hasNode(r="_root".concat(Math.random())););return r},qV=JV,e9=function(i,r,n){var e={},t;n==null||n.forEach(function(a){for(var s=i.parent(a),u,l;s;){if(u=i.parent(s),u?(l=e[u],e[u]=s):(l=t,t=s),l&&l!==s){r.setEdge(l,s);return}s=u}})},t9=e9,n9=function(i,r){return r.map(function(n){var e=i.inEdges(n);if(!(e==null?void 0:e.length))return{v:n};{var t={sum:0,weight:0};return e==null||e.forEach(function(a){var s=i.edge(a),u=i.node(a.v);t.sum+=s.weight*u.order,t.weight+=s.weight}),{v:n,barycenter:t.sum/t.weight,weight:t.weight}}})},r9=n9,a9=function(i,r){var n,e,t,a={};i==null||i.forEach(function(u,l){var c=a[u.v]={i:l,indegree:0,in:[],out:[],vs:[u.v]};u.barycenter!==void 0&&(c.barycenter=u.barycenter,c.weight=u.weight)}),(n=r.edges())===null||n===void 0||n.forEach(function(u){var l=a[u.v],c=a[u.w];l!==void 0&&c!==void 0&&(c.indegree++,l.out.push(a[u.w]))});var s=(t=(e=Object.values(a)).filter)===null||t===void 0?void 0:t.call(e,function(u){return!u.indegree});return i9(s)},i9=function(i){for(var r,n,e=[],t=function(f){return function(d){d.merged||(d.barycenter===void 0||f.barycenter===void 0||d.barycenter>=f.barycenter)&&o9(f,d)}},a=function(f){return function(d){d.in.push(f),--d.indegree==0&&i.push(d)}},s=function(){var f=i.pop();e.push(f),(r=f.in.reverse())===null||r===void 0||r.forEach(function(d){return t(f)(d)}),(n=f.out)===null||n===void 0||n.forEach(function(d){return a(f)(d)})};i==null?void 0:i.length;)s();var u=e.filter(function(c){return!c.merged}),l=["vs","i","barycenter","weight"];return u.map(function(c){var f={};return l==null||l.forEach(function(d){c[d]!==void 0&&(f[d]=c[d])}),f})},o9=function(i,r){var n,e=0,t=0;i.weight&&(e+=i.barycenter*i.weight,t+=i.weight),r.weight&&(e+=r.barycenter*r.weight,t+=r.weight),i.vs=(n=r.vs)===null||n===void 0?void 0:n.concat(i.vs),i.barycenter=e/t,i.weight=t,i.i=Math.min(r.i,i.i),r.merged=!0},s9=a9,u9=function(i,r,n){var e=ns.partition(i,function(d){return d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder)||d.hasOwnProperty("barycenter")}),t=e.lhs,a=e.rhs.sort(function(d,v){return-d.i- -v.i}),s=[],u=0,l=0,c=0;t==null||t.sort(l9(!!r,!!n)),c=w3(s,a,c),t==null||t.forEach(function(d){var v;c+=(v=d.vs)===null||v===void 0?void 0:v.length,s.push(d.vs),u+=d.barycenter*d.weight,l+=d.weight,c=w3(s,a,c)});var f={vs:s.flat()};return l&&(f.barycenter=u/l,f.weight=l),f},w3=function(i,r,n){for(var e=n,t;r.length&&(t=r[r.length-1]).i<=e;)r.pop(),i==null||i.push(t.vs),e++;return e},l9=function(i,r){return function(n,e){if(n.fixorder!==void 0&&e.fixorder!==void 0)return n.fixorder-e.fixorder;if(n.barycenter<e.barycenter)return-1;if(n.barycenter>e.barycenter)return 1;if(r&&n.order!==void 0&&e.order!==void 0){if(n.order<e.order)return-1;if(n.order>e.order)return 1}return i?e.i-n.i:n.i-e.i}},c9=u9,f9=function o(i,r,n,e,t){var a,s,u,l,c=i.children(r),f=i.node(r),d=f?f.borderLeft:void 0,v=f?f.borderRight:void 0,p={};d&&(c=c==null?void 0:c.filter(function(N){return N!==d&&N!==v}));var y=r9(i,c||[]);y==null||y.forEach(function(N){var j;if((j=i.children(N.v))===null||j===void 0?void 0:j.length){var B=o(i,N.v,n,e);p[N.v]=B,B.hasOwnProperty("barycenter")&&h9(N,B)}});var C=s9(y,n);d9(C,p),(a=C.filter(function(N){var j;return!!N.vs||((j=N.vs)===null||j===void 0?void 0:j.length)>0}))===null||a===void 0||a.forEach(function(N){var j=i.node(N.vs[0]);N.fixorder=j.fixorder,N.order=j.order});var E=c9(C,e,t);if(d&&(E.vs=[d,E.vs,v].flat(),(s=i.predecessors(d))===null||s===void 0?void 0:s.length)){var w=i.node(((u=i.predecessors(d))===null||u===void 0?void 0:u[0])||{}),x=i.node(((l=i.predecessors(v))===null||l===void 0?void 0:l[0])||{});E.hasOwnProperty("barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+w.order+x.order)/(E.weight+2),E.weight+=2}return E},d9=function(i,r){i==null||i.forEach(function(n){var e,t=(e=n.vs)===null||e===void 0?void 0:e.map(function(a){return r[a]?r[a].vs:a});n.vs=t.flat()})},h9=function(i,r){i.barycenter!==void 0?(i.barycenter=(i.barycenter*i.weight+r.barycenter*r.weight)/(i.weight+r.weight),i.weight+=r.weight):(i.barycenter=r.barycenter,i.weight=r.weight)},v9=f9,g9=Md.Graph,p9=function(i){for(var r=ns.maxRank(i),n=[],e=[],t=1;t<r+1;t++)n.push(t);for(var a=r-1;a>-1;a--)e.push(a);var s=x3(i,n,"inEdges"),u=x3(i,e,"outEdges"),l=E3(i);ST(i,l);for(var c=Number.POSITIVE_INFINITY,f,d=0,v=0;v<4;++d,++v){S3(d%2?s:u,d%4>=2),l=ns.buildLayerMatrix(i);var p=O3(i,l);p<c&&(v=0,f=sT(l),c=p)}l=E3(i),ST(i,l);for(var y=0,C=0;C<4;++y,++C){S3(y%2?s:u,y%4>=2,!0),l=ns.buildLayerMatrix(i);var E=O3(i,l);E<c&&(C=0,f=sT(l),c=E)}ST(i,f)},x3=function(i,r,n){return r.map(function(e){return qV(i,e,n)})},S3=function(i,r,n){var e=new g9;i==null||i.forEach(function(t){for(var a,s=t.graph().root,u=v9(t,s,e,r,n),l=0;l<((a=u.vs)===null||a===void 0?void 0:a.length);l++)t.node(u.vs[l]).order=l;t9(t,e,u.vs)})},ST=function(i,r){r==null||r.forEach(function(n){n==null||n.forEach(function(e,t){i.node(e).order=t})})},m9=p9,y9=Md.Graph,TT=function(i,r){var n={},e=function(a,s){var u=0,l=0,c=a.length,f=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach(function(d,v){var p,y=b9(i,d),C=y?i.node(y).order:c;(y||d===f)&&((p=s.slice(l,v+1))===null||p===void 0||p.forEach(function(E){var w;(w=i.predecessors(E))===null||w===void 0||w.forEach(function(x){var N=i.node(x),j=N.order;(j<u||C<j)&&!(N.dummy&&i.node(E).dummy)&&AT(n,x,E)})}),l=v+1,u=C)}),s};return(r==null?void 0:r.length)&&r.reduce(e),n},MT=function(i,r){var n={},e=function(s,u,l,c,f){for(var d,v=[],p=u;p<l;p++)v.push(p);v.forEach(function(y){var C;d=s[y],i.node(d).dummy&&((C=i.predecessors(d))===null||C===void 0||C.forEach(function(E){var w=i.node(E);w.dummy&&(w.order<c||w.order>f)&&AT(n,E,d)}))})},t=function(s,u){var l=-1,c,f=0;return u==null||u.forEach(function(d,v){if(i.node(d).dummy==="border"){var p=i.predecessors(d)||[];p.length&&(c=i.node(p[0]).order,e(u,f,v,l,c),f=v,l=c)}e(u,f,u.length,c,s.length)}),u};return(r==null?void 0:r.length)&&r.reduce(t),n},b9=function(i,r){var n;if(i.node(r).dummy)return(n=i.predecessors(r))===null||n===void 0?void 0:n.find(function(e){return i.node(e).dummy})},AT=function(i,r,n){var e=r,t=n;if(e>t){var a=e;e=t,t=a}var s=i[e];s||(i[e]=s={}),s[t]=!0},T3=function(i,r,n){var e=r,t=n;if(e>t){var a=r;e=t,t=a}return i[e]&&i[e].hasOwnProperty(t)},PT=function(i,r,n,e){var t={},a={},s={};return r==null||r.forEach(function(u){u==null||u.forEach(function(l,c){t[l]=l,a[l]=l,s[l]=c})}),r==null||r.forEach(function(u){var l=-1;u==null||u.forEach(function(c){var f=e(c);if(f.length){f=f.sort(function(C,E){return s[C]-s[E]});for(var d=(f.length-1)/2,v=Math.floor(d),p=Math.ceil(d);v<=p;++v){var y=f[v];a[c]===c&&l<s[y]&&!T3(n,c,y)&&(a[y]=c,a[c]=t[c]=t[y],l=s[y])}}})}),{root:t,align:a}},kT=function(i,r,n,e,t){var a,s={},u=C9(i,r,n,t),l=t?"borderLeft":"borderRight",c=function(p,y){for(var C=u.nodes(),E=C.pop(),w={};E;)w[E]?p(E):(w[E]=!0,C.push(E),C=C.concat(y(E))),E=C.pop()},f=function(p){s[p]=(u.inEdges(p)||[]).reduce(function(y,C){return Math.max(y,(s[C.v]||0)+u.edge(C))},0)},d=function(p){var y=(u.outEdges(p)||[]).reduce(function(E,w){return Math.min(E,(s[w.w]||0)-u.edge(w))},Number.POSITIVE_INFINITY),C=i.node(p);y!==Number.POSITIVE_INFINITY&&C.borderType!==l&&(s[p]=Math.max(s[p],y))};return c(f,u.predecessors.bind(u)),c(d,u.successors.bind(u)),(a=Object.values(e))===null||a===void 0||a.forEach(function(v){s[v]=s[n[v]]}),s},C9=function(i,r,n,e){var t=new y9,a=i.graph(),s=O9(a.nodesep,a.edgesep,e);return r==null||r.forEach(function(u){var l;u==null||u.forEach(function(c){var f=n[c];if(t.setNode(f),l){var d=n[l],v=t.edge(d,f);t.setEdge(d,f,Math.max(s(i,c,l),v||0))}l=c})}),t},DT=function(i,r){return ns.minBy(Object.values(r),function(n){var e,t=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return(e=Object.keys(n))===null||e===void 0||e.forEach(function(s){var u=n[s],l=w9(i,s)/2;t=Math.max(u+l,t),a=Math.min(u-l,a)}),t-a})};function IT(o,i){var r=Object.values(i),n=Math.min.apply(Math,r),e=Math.max.apply(Math,r);["u","d"].forEach(function(t){["l","r"].forEach(function(a){var s=t+a,u=o[s],l;if(u!==i){var c=Object.values(u);l=a==="l"?n-Math.min.apply(Math,c):e-Math.max.apply(Math,c),l&&(o[s]={},Object.keys(u).forEach(function(f){o[s][f]=u[f]+l}))}})})}var RT=function(i,r){var n={};return Object.keys(i.ul).forEach(function(e){if(r)n[e]=i[r.toLowerCase()][e];else{var t=Object.values(i).map(function(s){return s[e]}),a=t.sort(function(s,u){return s-u});n[e]=(a[1]+a[2])/2}}),n},E9=function(i){var r=ns.buildLayerMatrix(i),n=Object.assign(TT(i,r),MT(i,r)),e={},t;["u","d"].forEach(function(s){t=s==="u"?r:Object.values(r).reverse(),["l","r"].forEach(function(u){u==="r"&&(t=t.map(function(d){return Object.values(d).reverse()}));var l=(s==="u"?i.predecessors:i.successors).bind(i),c=PT(i,t,n,l),f=kT(i,t,c.root,c.align,u==="r");u==="r"&&(f=Object.values(f).map(function(d){return-d})),e[s+u]=f})});var a=DT(i,e);return IT(e,a),RT(e,i.graph().align)},O9=function(i,r,n){return function(e,t,a){var s=e.node(t),u=e.node(a),l=0,c;if(l+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":c=-s.width/2;break;case"r":c=s.width/2;break}if(c&&(l+=n?c:-c),c=0,l+=(s.dummy?r:i)/2,l+=(u.dummy?r:i)/2,l+=u.width/2,u.hasOwnProperty("labelpos"))switch((u.labelpos||"").toLowerCase()){case"l":c=u.width/2;break;case"r":c=-u.width/2;break}return c&&(l+=n?c:-c),c=0,l}},w9=function(i,r){var n;return((n=i.node(r))===null||n===void 0?void 0:n.width)||0},Tq={positionX:E9,findType1Conflicts:TT,findType2Conflicts:MT,addConflict:AT,hasConflict:T3,verticalAlignment:PT,horizontalCompaction:kT,alignCoordinates:IT,findSmallestWidthAlignment:DT,balance:RT},x9=function(i){var r=ns.buildLayerMatrix(i),n=i.graph().ranksep,e=0;r==null||r.forEach(function(t){var a=t.map(function(u){return i.node(u).height}),s=Math.max.apply(Math,Object(Qe.a)(a));t==null||t.forEach(function(u){i.node(u).y=e+s/2}),e+=s+n})},S9=function(i){var r=ns.buildLayerMatrix(i),n=Object.assign(TT(i,r),MT(i,r)),e={},t;["u","d"].forEach(function(s){t=s==="u"?r:Object.values(r).reverse(),["l","r"].forEach(function(u){u==="r"&&(t=t.map(function(d){return Object.values(d).reverse()}));var l=(s==="u"?i.predecessors:i.successors).bind(i),c=PT(i,t,n,l),f=kT(i,t,c.root,c.align,u==="r");u==="r"&&Object.keys(f).forEach(function(d){return f[d]=-f[d]}),e[s+u]=f})});var a=DT(i,e);return a&&IT(e,a),RT(e,i.graph().align)},T9=function(i){var r;i=ns.asNonCompoundGraph(i),x9(i);var n=S9(i);(r=Object.keys(n))===null||r===void 0||r.forEach(function(e){i.node(e).x=n[e]})},M9=T9,A9=function(i,r){for(var n=i.nodes().filter(function(u){var l;return!((l=i.children(u))===null||l===void 0?void 0:l.length)}),e=n.map(function(u){return i.node(u).rank}),t=Math.max.apply(Math,Object(Qe.a)(e)),a=[],s=0;s<t+1;s++)a.push([]);r==null||r.forEach(function(u){var l=i.node(u);!l||l.dummy||isNaN(l.rank)||(l.fixorder=a[l.rank].length,a[l.rank].push(u))})},P9=A9,k9=Md.Graph,D9=function(i,r){var n=r&&r.debugTiming?ns.time:ns.notime;n("layout",function(){r&&!r.keepNodeOrder&&r.prevGraph&&n("  inheritOrder",function(){R9(i,r.prevGraph)});var e=n("  buildLayoutGraph",function(){return G9(i)});r&&r.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",function(){z9(e)});try{n("  runLayout",function(){I9(e,n,r)})}catch(t){if(t.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,t);return}throw t}n("  updateInputGraph",function(){N9(i,e)})})},I9=function(i,r,n){r("    removeSelfEdges",function(){Z9(i)}),r("    acyclic",function(){XD.run(i)}),r("    nestingGraph.run",function(){p3.run(i)}),r("    rank",function(){DV(ns.asNonCompoundGraph(i))}),r("    injectEdgeLabelProxies",function(){U9(i)}),r("    removeEmptyRanks",function(){QD(i)}),r("    nestingGraph.cleanup",function(){p3.cleanup(i)}),r("    normalizeRanks",function(){JD(i)}),r("    assignRankMinMax",function(){V9(i)}),r("    removeEdgeLabelProxies",function(){H9(i)}),r("    normalize.run",function(){n3.run(i)}),r("    parentDummyChains",function(){jV(i)}),r("    addBorderSegments",function(){UV(i)}),n&&n.keepNodeOrder&&r("    initDataOrder",function(){P9(i,n.nodeOrder)}),r("    order",function(){m9(i)}),r("    insertSelfEdges",function(){J9(i)}),r("    adjustCoordinateSystem",function(){C3.adjust(i)}),r("    position",function(){M9(i)}),r("    positionSelfEdges",function(){Q9(i)}),r("    removeBorderNodes",function(){Y9(i)}),r("    normalize.undo",function(){n3.undo(i)}),r("    fixupEdgeLabelCoords",function(){X9(i)}),r("    undoCoordinateSystem",function(){C3.undo(i)}),r("    translateGraph",function(){W9(i)}),r("    assignNodeIntersects",function(){$9(i)}),r("    reversePoints",function(){K9(i)}),r("    acyclic.undo",function(){XD.undo(i)})},R9=function(i,r){var n=r._nodes||{};i.nodes().forEach(function(e){var t=i.node(e);n[e]!==void 0?(t.fixorder=n[e]._order,delete n[e]._order):delete t.fixorder})},N9=function(i,r){i.nodes().forEach(function(n){var e,t=i.node(n),a=r.node(n);t&&(t.x=a.x,t.y=a.y,t._order=a.order,t._rank=a.rank,((e=r.children(n))===null||e===void 0?void 0:e.length)&&(t.width=a.width,t.height=a.height))}),i.edges().forEach(function(n){var e=i.edge(n),t=r.edge(n);e.points=t.points,t.hasOwnProperty("x")&&(e.x=t.x,e.y=t.y)}),i.graph().width=r.graph().width,i.graph().height=r.graph().height},j9=["nodesep","edgesep","ranksep","marginx","marginy"],L9={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},NT=["acyclicer","ranker","rankdir","align"],_9=["width","height","layer","fixorder"],M3={width:0,height:0},F9=["minlen","weight","width","height","labeloffset"],B9={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},jT=["labelpos"],G9=function(i){var r=new k9({multigraph:!0,compound:!0}),n=_T(i.graph()),e={};return NT==null||NT.forEach(function(t){n[t]!==void 0&&(e[t]=n[t])}),r.setGraph(Object.assign({},L9,LT(n,j9),e)),i.nodes().forEach(function(t){var a=_T(i.node(t)),s=LT(a,_9);Object.keys(M3).forEach(function(u){s[u]===void 0&&(s[u]=M3[u])}),r.setNode(t,s),r.setParent(t,i.parent(t))}),i.edges().forEach(function(t){var a=_T(i.edge(t)),s={};jT==null||jT.forEach(function(u){a[u]!==void 0&&(s[u]=a[u])}),r.setEdge(t,Object.assign({},B9,LT(a,F9),s))}),r},z9=function(i){var r=i.graph();r.ranksep||(r.ranksep=0),r.ranksep/=2,i.nodes().forEach(function(n){var e=i.node(n);isNaN(e.layer)||(e.layer?e.layer*=2:e.layer=0)}),i.edges().forEach(function(n){var e,t=i.edge(n);t.minlen*=2,((e=t.labelpos)===null||e===void 0?void 0:e.toLowerCase())!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?t.width+=t.labeloffset:t.height+=t.labeloffset)})},U9=function(i){i.edges().forEach(function(r){var n=i.edge(r);if(n.width&&n.height){var e=i.node(r.v),t=i.node(r.w),a={e:r,rank:(t.rank-e.rank)/2+e.rank};ns.addDummyNode(i,"edge-proxy",a,"_ep")}})},V9=function(i){var r=0;i.nodes().forEach(function(n){var e=i.node(n);e.borderTop&&(e.minRank=i.node(e.borderTop).rank,e.maxRank=i.node(e.borderBottom).rank,r=Math.max(r,e.maxRank||-Infinity))}),i.graph().maxRank=r},H9=function(i){i.nodes().forEach(function(r){var n=i.node(r);n.dummy==="edge-proxy"&&(i.edge(n.e).labelRank=n.rank,i.removeNode(r))})},W9=function(i){var r=Number.POSITIVE_INFINITY,n=0,e=Number.POSITIVE_INFINITY,t=0,a=i.graph(),s=a.marginx||0,u=a.marginy||0,l=function(f){if(!!f){var d=f.x,v=f.y,p=f.width,y=f.height;!isNaN(d)&&!isNaN(p)&&(r=Math.min(r,d-p/2),n=Math.max(n,d+p/2)),!isNaN(v)&&!isNaN(y)&&(e=Math.min(e,v-y/2),t=Math.max(t,v+y/2))}};i.nodes().forEach(function(c){l(i.node(c))}),i.edges().forEach(function(c){var f=i.edge(c);f.hasOwnProperty("x")&&l(f)}),r-=s,e-=u,i.nodes().forEach(function(c){var f=i.node(c);f.x-=r,f.y-=e}),i.edges().forEach(function(c){var f,d=i.edge(c);(f=d.points)===null||f===void 0||f.forEach(function(v){v.x-=r,v.y-=e}),d.hasOwnProperty("x")&&(d.x-=r),d.hasOwnProperty("y")&&(d.y-=e)}),a.width=n-r+s,a.height=t-e+u},$9=function(i){i.edges().forEach(function(r){var n=i.edge(r),e=i.node(r.v),t=i.node(r.w),a,s;n.points?(a=n.points[0],s=n.points[n.points.length-1]):(n.points=[],a=t,s=e),n.points.unshift(ns.intersectRect(e,a)),n.points.push(ns.intersectRect(t,s))})},X9=function(i){i.edges().forEach(function(r){var n=i.edge(r);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},K9=function(i){i.edges().forEach(function(r){var n=i.edge(r);n.reversed&&n.points.reverse()})},Y9=function(i){i.nodes().forEach(function(r){var n,e,t;if((n=i.children(r))===null||n===void 0?void 0:n.length){var a=i.node(r),s=i.node(a.borderTop),u=i.node(a.borderBottom),l=i.node(a.borderLeft[((e=a.borderLeft)===null||e===void 0?void 0:e.length)-1]),c=i.node(a.borderRight[((t=a.borderRight)===null||t===void 0?void 0:t.length)-1]);a.width=Math.abs((c==null?void 0:c.x)-(l==null?void 0:l.x))||10,a.height=Math.abs((u==null?void 0:u.y)-(s==null?void 0:s.y))||10,a.x=((l==null?void 0:l.x)||0)+a.width/2,a.y=((s==null?void 0:s.y)||0)+a.height/2}}),i.nodes().forEach(function(r){i.node(r).dummy==="border"&&i.removeNode(r)})},Z9=function(i){i.edges().forEach(function(r){if(r.v===r.w){var n=i.node(r.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:r,label:i.edge(r)}),i.removeEdge(r)}})},J9=function(i){var r=ns.buildLayerMatrix(i);r==null||r.forEach(function(n){var e=0;n==null||n.forEach(function(t,a){var s,u=i.node(t);u.order=a+e,(s=u.selfEdges)===null||s===void 0||s.forEach(function(l){ns.addDummyNode(i,"selfedge",{width:l.label.width,height:l.label.height,rank:u.rank,order:a+ ++e,e:l.e,label:l.label},"_se")}),delete u.selfEdges})})},Q9=function(i){i.nodes().forEach(function(r){var n=i.node(r);if(n.dummy==="selfedge"){var e=i.node(n.e.v),t=e.x+e.width/2,a=e.y,s=n.x-t,u=e.height/2;i.setEdge(n.e,n.label),i.removeNode(r),n.label.points=[{x:t+2*s/3,y:a-u},{x:t+5*s/6,y:a-u},{y:a,x:t+s},{x:t+5*s/6,y:a+u},{x:t+2*s/3,y:a+u}],n.label.x=n.x,n.label.y=n.y}})},LT=function(i,r){var n={};return r==null||r.forEach(function(e){i[e]!==void 0&&(n[e]=+i[e])}),n},_T=function(i){var r={};return Object.keys(i).forEach(function(n){var e=i[n];r[n.toLowerCase()]=e}),r},q9=D9,FT={graphlib:Md,layout:q9,util:{time:e3,notime:t3}},A3=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e.edgeLabelSpace=!0,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.layoutNode=function(t){var a=Object(Vo.a)(e),s=a.nodes,u=s.find(function(c){return c.id===t});if(u){var l=u.layout!==!1;return l}return!0},e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var e=this,t=this,a=t.nodes,s=t.nodeSize,u=t.rankdir,l=t.combos,c=t.begin;if(!!a){var f=t.edges||[],d=new FT.graphlib.Graph({multigraph:!0,compound:!0}),v;s?ru(s)?v=function(){return s}:v=function(){return[s,s]}:v=function(B){return B.size?ru(B.size)?B.size:jf(B.size)?[B.size.width||40,B.size.height||40]:[B.size,B.size]:[40,40]};var p=K2(t.nodesepFunc,t.nodesep,50),y=K2(t.ranksepFunc,t.ranksep,50);(u==="LR"||u==="RL")&&(p=K2(t.ranksepFunc,t.ranksep,50),y=K2(t.nodesepFunc,t.nodesep,50)),d.setDefaultEdgeLabel(function(){return{}}),d.setGraph(t);var C={};a.filter(function(j){return j.layout!==!1}).forEach(function(j){var B=v(j),$=y(j),Z=p(j),fe=B[0]+2*Z,de=B[1]+2*$,xe=j.layer;Ir(xe)?d.setNode(j.id,{width:fe,height:de,layer:xe}):d.setNode(j.id,{width:fe,height:de}),e.sortByCombo&&j.comboId&&(C[j.comboId]||(C[j.comboId]=!0,d.setNode(j.comboId,{})),d.setParent(j.id,j.comboId))}),this.sortByCombo&&l&&l.forEach(function(j){!j.parentId||(C[j.parentId]||(C[j.parentId]=!0,d.setNode(j.parentId,{})),d.setParent(j.id,j.parentId))}),f.forEach(function(j){var B=Ci(j,"source"),$=Ci(j,"target");e.layoutNode(B)&&e.layoutNode($)&&d.setEdge(B,$,{weight:j.weight||1})});var E=void 0;t.preset&&(E=new FT.graphlib.Graph({multigraph:!0,compound:!0}),t.preset.nodes.forEach(function(j){E==null||E.setNode(j.id,j)})),FT.layout(d,{prevGraph:E,edgeLabelSpace:t.edgeLabelSpace,keepNodeOrder:Boolean(!!t.nodeOrder),nodeOrder:t.nodeOrder});var w=[0,0];if(c){var x=Infinity,N=Infinity;d.nodes().forEach(function(j){var B=d.node(j);x>B.x&&(x=B.x),N>B.y&&(N=B.y)}),d.edges().forEach(function(j){var B=d.edge(j);B.points.forEach(function($){x>$.x&&(x=$.x),N>$.y&&(N=$.y)})}),w[0]=c[0]-x,w[1]=c[1]-N}return d.nodes().forEach(function(j){var B=d.node(j),$=a.findIndex(function(Z){return Z.id===j});!a[$]||(a[$].x=B.x+w[0],a[$].y=B.y+w[1],a[$]._order=B._order)}),d.edges().forEach(function(j){var B=d.edge(j),$=f.findIndex(function(Z){var fe=Ci(Z,"source"),de=Ci(Z,"target");return fe===j.v&&de===j.w});t.edgeLabelSpace&&t.controlPoints&&f[$].type!=="loop"&&(f[$].controlPoints=B.points.slice(1,B.points.length-1),f[$].controlPoints.forEach(function(Z){Z.x+=w[0],Z.y+=w[1]}))}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:a,edges:f}}}},{key:"getType",value:function(){return"dagre"}}]),r}(Ou);function K2(o,i,r){var n;return o?n=o:Ir(i)?n=function(){return i}:n=function(){return r},n}var eH=Object.prototype.toString;function Dl(o){var i=eH.call(o);return i.endsWith("Array]")&&!i.includes("Big")}function tH(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Dl(o))throw new TypeError("input must be an array");if(o.length===0)throw new TypeError("input must not be empty");var r=i.fromIndex,n=r===void 0?0:r,e=i.toIndex,t=e===void 0?o.length:e;if(n<0||n>=o.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(t<=n||t>o.length||!Number.isInteger(t))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=o[n],s=n+1;s<t;s++)o[s]>a&&(a=o[s]);return a}function nH(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Dl(o))throw new TypeError("input must be an array");if(o.length===0)throw new TypeError("input must not be empty");var r=i.fromIndex,n=r===void 0?0:r,e=i.toIndex,t=e===void 0?o.length:e;if(n<0||n>=o.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(t<=n||t>o.length||!Number.isInteger(t))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=o[n],s=n+1;s<t;s++)o[s]<a&&(a=o[s]);return a}function P3(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Dl(o)){if(o.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var r;if(i.output!==void 0){if(!Dl(i.output))throw new TypeError("output option must be an array if specified");r=i.output}else r=new Array(o.length);var n=nH(o),e=tH(o);if(n===e)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var t=i.min,a=t===void 0?i.autoMinMax?n:0:t,s=i.max,u=s===void 0?i.autoMinMax?e:1:s;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var l=(u-a)/(e-n),c=0;c<o.length;c++)r[c]=(o[c]-n)*l+a;return r}var Y2=" ".repeat(2),k3=" ".repeat(4);function rH(){return D3(this)}function D3(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.maxRows,n=r===void 0?15:r,e=i.maxColumns,t=e===void 0?10:e,a=i.maxNumSize,s=a===void 0?8:a,u=i.padMinus,l=u===void 0?"auto":u;return"".concat(o.constructor.name,` {
`).concat(Y2,`[
`).concat(k3).concat(aH(o,n,t,s,l),`
`).concat(Y2,`]
`).concat(Y2,"rows: ").concat(o.rows,`
`).concat(Y2,"columns: ").concat(o.columns,`
}`)}function aH(o,i,r,n,e){var t=o.rows,a=o.columns,s=Math.min(t,i),u=Math.min(a,r),l=[];if(e==="auto"){e=!1;e:for(var c=0;c<s;c++)for(var f=0;f<u;f++)if(o.get(c,f)<0){e=!0;break e}}for(var d=0;d<s;d++){for(var v=[],p=0;p<u;p++)v.push(iH(o.get(d,p),n,e));l.push("".concat(v.join(" ")))}return u!==a&&(l[l.length-1]+=" ... ".concat(a-r," more columns")),s!==t&&l.push("... ".concat(t-i," more rows")),l.join(`
`.concat(k3))}function iH(o,i,r){return(o>=0&&r?" ".concat(I3(o,i-1)):I3(o,i)).padEnd(i)}function I3(o,i){var r=o.toString();if(r.length<=i)return r;var n=o.toFixed(i);if(n.length>i&&(n=o.toFixed(Math.max(0,i-(n.length-i)))),n.length<=i&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;var e=o.toExponential(i);return e.length>i&&(e=o.toExponential(Math.max(0,i-(e.length-i)))),e.slice(0)}function oH(o,i){o.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},o.prototype.addS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n);return this},o.prototype.addM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n.get(e,t));return this},o.add=function(n,e){var t=new i(n);return t.add(e)},o.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},o.prototype.subS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n);return this},o.prototype.subM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n.get(e,t));return this},o.sub=function(n,e){var t=new i(n);return t.sub(e)},o.prototype.subtract=o.prototype.sub,o.prototype.subtractS=o.prototype.subS,o.prototype.subtractM=o.prototype.subM,o.subtract=o.sub,o.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},o.prototype.mulS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n);return this},o.prototype.mulM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n.get(e,t));return this},o.mul=function(n,e){var t=new i(n);return t.mul(e)},o.prototype.multiply=o.prototype.mul,o.prototype.multiplyS=o.prototype.mulS,o.prototype.multiplyM=o.prototype.mulM,o.multiply=o.mul,o.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},o.prototype.divS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n);return this},o.prototype.divM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n.get(e,t));return this},o.div=function(n,e){var t=new i(n);return t.div(e)},o.prototype.divide=o.prototype.div,o.prototype.divideS=o.prototype.divS,o.prototype.divideM=o.prototype.divM,o.divide=o.div,o.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},o.prototype.modS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%n);return this},o.prototype.modM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%n.get(e,t));return this},o.mod=function(n,e){var t=new i(n);return t.mod(e)},o.prototype.modulus=o.prototype.mod,o.prototype.modulusS=o.prototype.modS,o.prototype.modulusM=o.prototype.modM,o.modulus=o.mod,o.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},o.prototype.andS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&n);return this},o.prototype.andM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&n.get(e,t));return this},o.and=function(n,e){var t=new i(n);return t.and(e)},o.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},o.prototype.orS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|n);return this},o.prototype.orM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|n.get(e,t));return this},o.or=function(n,e){var t=new i(n);return t.or(e)},o.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},o.prototype.xorS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^n);return this},o.prototype.xorM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^n.get(e,t));return this},o.xor=function(n,e){var t=new i(n);return t.xor(e)},o.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},o.prototype.leftShiftS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<n);return this},o.prototype.leftShiftM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<n.get(e,t));return this},o.leftShift=function(n,e){var t=new i(n);return t.leftShift(e)},o.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},o.prototype.signPropagatingRightShiftS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>n);return this},o.prototype.signPropagatingRightShiftM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>n.get(e,t));return this},o.signPropagatingRightShift=function(n,e){var t=new i(n);return t.signPropagatingRightShift(e)},o.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},o.prototype.rightShiftS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>n);return this},o.prototype.rightShiftM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>n.get(e,t));return this},o.rightShift=function(n,e){var t=new i(n);return t.rightShift(e)},o.prototype.zeroFillRightShift=o.prototype.rightShift,o.prototype.zeroFillRightShiftS=o.prototype.rightShiftS,o.prototype.zeroFillRightShiftM=o.prototype.rightShiftM,o.zeroFillRightShift=o.rightShift,o.prototype.not=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,~this.get(n,e));return this},o.not=function(n){var e=new i(n);return e.not()},o.prototype.abs=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.abs(this.get(n,e)));return this},o.abs=function(n){var e=new i(n);return e.abs()},o.prototype.acos=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.acos(this.get(n,e)));return this},o.acos=function(n){var e=new i(n);return e.acos()},o.prototype.acosh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.acosh(this.get(n,e)));return this},o.acosh=function(n){var e=new i(n);return e.acosh()},o.prototype.asin=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.asin(this.get(n,e)));return this},o.asin=function(n){var e=new i(n);return e.asin()},o.prototype.asinh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.asinh(this.get(n,e)));return this},o.asinh=function(n){var e=new i(n);return e.asinh()},o.prototype.atan=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.atan(this.get(n,e)));return this},o.atan=function(n){var e=new i(n);return e.atan()},o.prototype.atanh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.atanh(this.get(n,e)));return this},o.atanh=function(n){var e=new i(n);return e.atanh()},o.prototype.cbrt=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.cbrt(this.get(n,e)));return this},o.cbrt=function(n){var e=new i(n);return e.cbrt()},o.prototype.ceil=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.ceil(this.get(n,e)));return this},o.ceil=function(n){var e=new i(n);return e.ceil()},o.prototype.clz32=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.clz32(this.get(n,e)));return this},o.clz32=function(n){var e=new i(n);return e.clz32()},o.prototype.cos=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.cos(this.get(n,e)));return this},o.cos=function(n){var e=new i(n);return e.cos()},o.prototype.cosh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.cosh(this.get(n,e)));return this},o.cosh=function(n){var e=new i(n);return e.cosh()},o.prototype.exp=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.exp(this.get(n,e)));return this},o.exp=function(n){var e=new i(n);return e.exp()},o.prototype.expm1=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.expm1(this.get(n,e)));return this},o.expm1=function(n){var e=new i(n);return e.expm1()},o.prototype.floor=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.floor(this.get(n,e)));return this},o.floor=function(n){var e=new i(n);return e.floor()},o.prototype.fround=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.fround(this.get(n,e)));return this},o.fround=function(n){var e=new i(n);return e.fround()},o.prototype.log=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log(this.get(n,e)));return this},o.log=function(n){var e=new i(n);return e.log()},o.prototype.log1p=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log1p(this.get(n,e)));return this},o.log1p=function(n){var e=new i(n);return e.log1p()},o.prototype.log10=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log10(this.get(n,e)));return this},o.log10=function(n){var e=new i(n);return e.log10()},o.prototype.log2=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log2(this.get(n,e)));return this},o.log2=function(n){var e=new i(n);return e.log2()},o.prototype.round=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.round(this.get(n,e)));return this},o.round=function(n){var e=new i(n);return e.round()},o.prototype.sign=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sign(this.get(n,e)));return this},o.sign=function(n){var e=new i(n);return e.sign()},o.prototype.sin=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sin(this.get(n,e)));return this},o.sin=function(n){var e=new i(n);return e.sin()},o.prototype.sinh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sinh(this.get(n,e)));return this},o.sinh=function(n){var e=new i(n);return e.sinh()},o.prototype.sqrt=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sqrt(this.get(n,e)));return this},o.sqrt=function(n){var e=new i(n);return e.sqrt()},o.prototype.tan=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.tan(this.get(n,e)));return this},o.tan=function(n){var e=new i(n);return e.tan()},o.prototype.tanh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.tanh(this.get(n,e)));return this},o.tanh=function(n){var e=new i(n);return e.tanh()},o.prototype.trunc=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.trunc(this.get(n,e)));return this},o.trunc=function(n){var e=new i(n);return e.trunc()},o.pow=function(n,e){var t=new i(n);return t.pow(e)},o.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},o.prototype.powS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),n));return this},o.prototype.powM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),n.get(e,t)));return this}}function $c(o,i,r){var n=r?o.rows:o.rows-1;if(i<0||i>n)throw new RangeError("Row index out of range")}function Xc(o,i,r){var n=r?o.columns:o.columns-1;if(i<0||i>n)throw new RangeError("Column index out of range")}function gp(o,i){if(i.to1DArray&&(i=i.to1DArray()),i.length!==o.columns)throw new RangeError("vector size must be the same as the number of columns");return i}function pp(o,i){if(i.to1DArray&&(i=i.to1DArray()),i.length!==o.rows)throw new RangeError("vector size must be the same as the number of rows");return i}function sH(o,i){if(!Dl(i))throw new TypeError("row indices must be an array");for(var r=0;r<i.length;r++)if(i[r]<0||i[r]>=o.rows)throw new RangeError("row indices are out of range")}function uH(o,i){if(!Dl(i))throw new TypeError("column indices must be an array");for(var r=0;r<i.length;r++)if(i[r]<0||i[r]>=o.columns)throw new RangeError("column indices are out of range")}function R3(o,i,r,n,e){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(J2("startRow",i),J2("endRow",r),J2("startColumn",n),J2("endColumn",e),i>r||n>e||i<0||i>=o.rows||r<0||r>=o.rows||n<0||n>=o.columns||e<0||e>=o.columns)throw new RangeError("Submatrix indices are out of range")}function Z2(o){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],n=0;n<o;n++)r.push(i);return r}function J2(o,i){if(typeof i!="number")throw new TypeError("".concat(o," must be a number"))}function mp(o){if(o.isEmpty())throw new Error("Empty matrix has no elements to index")}function lH(o){for(var i=Z2(o.rows),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)i[r]+=o.get(r,n);return i}function cH(o){for(var i=Z2(o.columns),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)i[n]+=o.get(r,n);return i}function fH(o){for(var i=0,r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)i+=o.get(r,n);return i}function dH(o){for(var i=Z2(o.rows,1),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)i[r]*=o.get(r,n);return i}function hH(o){for(var i=Z2(o.columns,1),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)i[n]*=o.get(r,n);return i}function vH(o){for(var i=1,r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)i*=o.get(r,n);return i}function gH(o,i,r){for(var n=o.rows,e=o.columns,t=[],a=0;a<n;a++){for(var s=0,u=0,l=0,c=0;c<e;c++)l=o.get(a,c)-r[a],s+=l,u+=l*l;i?t.push((u-s*s/e)/(e-1)):t.push((u-s*s/e)/e)}return t}function pH(o,i,r){for(var n=o.rows,e=o.columns,t=[],a=0;a<e;a++){for(var s=0,u=0,l=0,c=0;c<n;c++)l=o.get(c,a)-r[a],s+=l,u+=l*l;i?t.push((u-s*s/n)/(n-1)):t.push((u-s*s/n)/n)}return t}function mH(o,i,r){for(var n=o.rows,e=o.columns,t=n*e,a=0,s=0,u=0,l=0;l<n;l++)for(var c=0;c<e;c++)u=o.get(l,c)-r,a+=u,s+=u*u;return i?(s-a*a/t)/(t-1):(s-a*a/t)/t}function yH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)-i[r])}function bH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)-i[n])}function CH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)-i)}function EH(o){for(var i=[],r=0;r<o.rows;r++){for(var n=0,e=0;e<o.columns;e++)n+=Math.pow(o.get(r,e),2)/(o.columns-1);i.push(Math.sqrt(n))}return i}function OH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)/i[r])}function wH(o){for(var i=[],r=0;r<o.columns;r++){for(var n=0,e=0;e<o.rows;e++)n+=Math.pow(o.get(e,r),2)/(o.rows-1);i.push(Math.sqrt(n))}return i}function xH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)/i[n])}function SH(o){for(var i=o.size-1,r=0,n=0;n<o.columns;n++)for(var e=0;e<o.rows;e++)r+=Math.pow(o.get(e,n),2)/i;return Math.sqrt(r)}function TH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)/i)}var ks=function(){function o(){Object(De.a)(this,o)}return Object(be.a)(o,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(r){if(typeof r!="function")throw new TypeError("callback must be a function");for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.call(this,n,e);return this}},{key:"to1DArray",value:function(){for(var r=[],n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.push(this.get(n,e));return r}},{key:"to2DArray",value:function(){for(var r=[],n=0;n<this.rows;n++){r.push([]);for(var e=0;e<this.columns;e++)r[n].push(this.get(n,e))}return r}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var r=0;r<this.rows;r++)for(var n=0;n<=r;n++)if(this.get(r,n)!==this.get(n,r))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var r=0,n=0,e=-1,t=!0,a=!1;r<this.rows&&t;){for(n=0,a=!1;n<this.columns&&a===!1;)this.get(r,n)===0?n++:this.get(r,n)===1&&n>e?(a=!0,e=n):(t=!1,a=!0);r++}return t}},{key:"isReducedEchelonForm",value:function(){for(var r=0,n=0,e=-1,t=!0,a=!1;r<this.rows&&t;){for(n=0,a=!1;n<this.columns&&a===!1;)this.get(r,n)===0?n++:this.get(r,n)===1&&n>e?(a=!0,e=n):(t=!1,a=!0);for(var s=n+1;s<this.rows;s++)this.get(r,s)!==0&&(t=!1);r++}return t}},{key:"echelonForm",value:function(){for(var r=this.clone(),n=0,e=0;n<r.rows&&e<r.columns;){for(var t=n,a=n;a<r.rows;a++)r.get(a,e)>r.get(t,e)&&(t=a);if(r.get(t,e)===0)e++;else{r.swapRows(n,t);for(var s=r.get(n,e),u=e;u<r.columns;u++)r.set(n,u,r.get(n,u)/s);for(var l=n+1;l<r.rows;l++){var c=r.get(l,e)/r.get(n,e);r.set(l,e,0);for(var f=e+1;f<r.columns;f++)r.set(l,f,r.get(l,f)-r.get(n,f)*c)}n++,e++}}return r}},{key:"reducedEchelonForm",value:function(){for(var r=this.echelonForm(),n=r.columns,e=r.rows,t=e-1;t>=0;)if(r.maxRow(t)===0)t--;else{for(var a=0,s=!1;a<e&&s===!1;)r.get(t,a)===1?s=!0:a++;for(var u=0;u<t;u++)for(var l=r.get(u,a),c=a;c<n;c++){var f=r.get(u,c)-l*r.get(t,c);r.set(u,c,f)}t--}return r}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="object")throw new TypeError("options must be an object");var n=r.rows,e=n===void 0?1:n,t=r.columns,a=t===void 0?1:t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(a)||a<=0)throw new TypeError("columns must be a positive integer");for(var s=new Ia(this.rows*e,this.columns*a),u=0;u<e;u++)for(var l=0;l<a;l++)s.setSubMatrix(this,this.rows*u,this.columns*l);return s}},{key:"fill",value:function(r){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,r);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(r){$c(this,r);for(var n=[],e=0;e<this.columns;e++)n.push(this.get(r,e));return n}},{key:"getRowVector",value:function(r){return Ia.rowVector(this.getRow(r))}},{key:"setRow",value:function(r,n){$c(this,r),n=gp(this,n);for(var e=0;e<this.columns;e++)this.set(r,e,n[e]);return this}},{key:"swapRows",value:function(r,n){$c(this,r),$c(this,n);for(var e=0;e<this.columns;e++){var t=this.get(r,e);this.set(r,e,this.get(n,e)),this.set(n,e,t)}return this}},{key:"getColumn",value:function(r){Xc(this,r);for(var n=[],e=0;e<this.rows;e++)n.push(this.get(e,r));return n}},{key:"getColumnVector",value:function(r){return Ia.columnVector(this.getColumn(r))}},{key:"setColumn",value:function(r,n){Xc(this,r),n=pp(this,n);for(var e=0;e<this.rows;e++)this.set(e,r,n[e]);return this}},{key:"swapColumns",value:function(r,n){Xc(this,r),Xc(this,n);for(var e=0;e<this.rows;e++){var t=this.get(e,r);this.set(e,r,this.get(e,n)),this.set(e,n,t)}return this}},{key:"addRowVector",value:function(r){r=gp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)+r[e]);return this}},{key:"subRowVector",value:function(r){r=gp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)-r[e]);return this}},{key:"mulRowVector",value:function(r){r=gp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)*r[e]);return this}},{key:"divRowVector",value:function(r){r=gp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)/r[e]);return this}},{key:"addColumnVector",value:function(r){r=pp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)+r[n]);return this}},{key:"subColumnVector",value:function(r){r=pp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)-r[n]);return this}},{key:"mulColumnVector",value:function(r){r=pp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)*r[n]);return this}},{key:"divColumnVector",value:function(r){r=pp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)/r[n]);return this}},{key:"mulRow",value:function(r,n){$c(this,r);for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*n);return this}},{key:"mulColumn",value:function(r,n){Xc(this,r);for(var e=0;e<this.rows;e++)this.set(e,r,this.get(e,r)*n);return this}},{key:"max",value:function(r){if(this.isEmpty())return NaN;switch(r){case"row":{for(var n=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)>n[e]&&(n[e]=this.get(e,t));return n}case"column":{for(var a=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),s=0;s<this.rows;s++)for(var u=0;u<this.columns;u++)this.get(s,u)>a[u]&&(a[u]=this.get(s,u));return a}case void 0:{for(var l=this.get(0,0),c=0;c<this.rows;c++)for(var f=0;f<this.columns;f++)this.get(c,f)>l&&(l=this.get(c,f));return l}default:throw new Error("invalid option: ".concat(r))}}},{key:"maxIndex",value:function(){mp(this);for(var r=this.get(0,0),n=[0,0],e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)>r&&(r=this.get(e,t),n[0]=e,n[1]=t);return n}},{key:"min",value:function(r){if(this.isEmpty())return NaN;switch(r){case"row":{for(var n=new Array(this.rows).fill(Number.POSITIVE_INFINITY),e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)<n[e]&&(n[e]=this.get(e,t));return n}case"column":{for(var a=new Array(this.columns).fill(Number.POSITIVE_INFINITY),s=0;s<this.rows;s++)for(var u=0;u<this.columns;u++)this.get(s,u)<a[u]&&(a[u]=this.get(s,u));return a}case void 0:{for(var l=this.get(0,0),c=0;c<this.rows;c++)for(var f=0;f<this.columns;f++)this.get(c,f)<l&&(l=this.get(c,f));return l}default:throw new Error("invalid option: ".concat(r))}}},{key:"minIndex",value:function(){mp(this);for(var r=this.get(0,0),n=[0,0],e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)<r&&(r=this.get(e,t),n[0]=e,n[1]=t);return n}},{key:"maxRow",value:function(r){if($c(this,r),this.isEmpty())return NaN;for(var n=this.get(r,0),e=1;e<this.columns;e++)this.get(r,e)>n&&(n=this.get(r,e));return n}},{key:"maxRowIndex",value:function(r){$c(this,r),mp(this);for(var n=this.get(r,0),e=[r,0],t=1;t<this.columns;t++)this.get(r,t)>n&&(n=this.get(r,t),e[1]=t);return e}},{key:"minRow",value:function(r){if($c(this,r),this.isEmpty())return NaN;for(var n=this.get(r,0),e=1;e<this.columns;e++)this.get(r,e)<n&&(n=this.get(r,e));return n}},{key:"minRowIndex",value:function(r){$c(this,r),mp(this);for(var n=this.get(r,0),e=[r,0],t=1;t<this.columns;t++)this.get(r,t)<n&&(n=this.get(r,t),e[1]=t);return e}},{key:"maxColumn",value:function(r){if(Xc(this,r),this.isEmpty())return NaN;for(var n=this.get(0,r),e=1;e<this.rows;e++)this.get(e,r)>n&&(n=this.get(e,r));return n}},{key:"maxColumnIndex",value:function(r){Xc(this,r),mp(this);for(var n=this.get(0,r),e=[0,r],t=1;t<this.rows;t++)this.get(t,r)>n&&(n=this.get(t,r),e[0]=t);return e}},{key:"minColumn",value:function(r){if(Xc(this,r),this.isEmpty())return NaN;for(var n=this.get(0,r),e=1;e<this.rows;e++)this.get(e,r)<n&&(n=this.get(e,r));return n}},{key:"minColumnIndex",value:function(r){Xc(this,r),mp(this);for(var n=this.get(0,r),e=[0,r],t=1;t<this.rows;t++)this.get(t,r)<n&&(n=this.get(t,r),e[0]=t);return e}},{key:"diag",value:function(){for(var r=Math.min(this.rows,this.columns),n=[],e=0;e<r;e++)n.push(this.get(e,e));return n}},{key:"norm",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",n=0;if(r==="max")return this.max();if(r==="frobenius"){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)n=n+this.get(e,t)*this.get(e,t);return Math.sqrt(n)}else throw new RangeError("unknown norm type: ".concat(r))}},{key:"cumulativeSum",value:function(){for(var r=0,n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r+=this.get(n,e),this.set(n,e,r);return this}},{key:"dot",value:function(r){o.isMatrix(r)&&(r=r.to1DArray());var n=this.to1DArray();if(n.length!==r.length)throw new RangeError("vectors do not have the same size");for(var e=0,t=0;t<n.length;t++)e+=n[t]*r[t];return e}},{key:"mmul",value:function(r){r=Ia.checkMatrix(r);for(var n=this.rows,e=this.columns,t=r.columns,a=new Ia(n,t),s=new Float64Array(e),u=0;u<t;u++){for(var l=0;l<e;l++)s[l]=r.get(l,u);for(var c=0;c<n;c++){for(var f=0,d=0;d<e;d++)f+=this.get(c,d)*s[d];a.set(c,u,f)}}return a}},{key:"strassen2x2",value:function(r){r=Ia.checkMatrix(r);var n=new Ia(2,2),e=this.get(0,0),t=r.get(0,0),a=this.get(0,1),s=r.get(0,1),u=this.get(1,0),l=r.get(1,0),c=this.get(1,1),f=r.get(1,1),d=(e+c)*(t+f),v=(u+c)*t,p=e*(s-f),y=c*(l-t),C=(e+a)*f,E=(u-e)*(t+s),w=(a-c)*(l+f),x=d+y-C+w,N=p+C,j=v+y,B=d-v+p+E;return n.set(0,0,x),n.set(0,1,N),n.set(1,0,j),n.set(1,1,B),n}},{key:"strassen3x3",value:function(r){r=Ia.checkMatrix(r);var n=new Ia(3,3),e=this.get(0,0),t=this.get(0,1),a=this.get(0,2),s=this.get(1,0),u=this.get(1,1),l=this.get(1,2),c=this.get(2,0),f=this.get(2,1),d=this.get(2,2),v=r.get(0,0),p=r.get(0,1),y=r.get(0,2),C=r.get(1,0),E=r.get(1,1),w=r.get(1,2),x=r.get(2,0),N=r.get(2,1),j=r.get(2,2),B=(e+t+a-s-u-f-d)*E,$=(e-s)*(-p+E),Z=u*(-v+p+C-E-w-x+j),fe=(-e+s+u)*(v-p+E),de=(s+u)*(-v+p),xe=e*v,Ae=(-e+c+f)*(v-y+w),Ye=(-e+c)*(y-w),rt=(c+f)*(-v+y),je=(e+t+a-u-l-c-f)*w,ot=f*(-v+y+C-E-w-x+N),Ft=(-a+f+d)*(E+x-N),hn=(a-d)*(E-N),In=a*x,xn=(f+d)*(-x+N),dn=(-a+u+l)*(w+x-j),tr=(a-l)*(w-j),Ut=(u+l)*(-x+j),Rn=t*C,$n=l*N,qr=s*y,Kr=c*p,fa=d*j,ba=xe+In+Rn,qi=B+fe+de+xe+Ft+In+xn,No=xe+Ae+rt+je+In+dn+Ut,ni=$+Z+fe+xe+In+dn+tr,Vu=$+fe+de+xe+$n,Jc=In+dn+tr+Ut+qr,Bp=xe+Ae+Ye+ot+Ft+hn+In,ng=Ft+hn+In+xn+Kr,Gp=xe+Ae+Ye+rt+fa;return n.set(0,0,ba),n.set(0,1,qi),n.set(0,2,No),n.set(1,0,ni),n.set(1,1,Vu),n.set(1,2,Jc),n.set(2,0,Bp),n.set(2,1,ng),n.set(2,2,Gp),n}},{key:"mmulStrassen",value:function(r){r=Ia.checkMatrix(r);var n=this.clone(),e=n.rows,t=n.columns,a=r.rows,s=r.columns;t!==a&&console.warn("Multiplying ".concat(e," x ").concat(t," and ").concat(a," x ").concat(s," matrix: dimensions do not match."));function u(d,v,p){var y=d.rows,C=d.columns;if(y===v&&C===p)return d;var E=o.zeros(v,p);return E=E.setSubMatrix(d,0,0),E}var l=Math.max(e,a),c=Math.max(t,s);n=u(n,l,c),r=u(r,l,c);function f(d,v,p,y){if(p<=512||y<=512)return d.mmul(v);p%2==1&&y%2==1?(d=u(d,p+1,y+1),v=u(v,p+1,y+1)):p%2==1?(d=u(d,p+1,y),v=u(v,p+1,y)):y%2==1&&(d=u(d,p,y+1),v=u(v,p,y+1));var C=parseInt(d.rows/2,10),E=parseInt(d.columns/2,10),w=d.subMatrix(0,C-1,0,E-1),x=v.subMatrix(0,C-1,0,E-1),N=d.subMatrix(0,C-1,E,d.columns-1),j=v.subMatrix(0,C-1,E,v.columns-1),B=d.subMatrix(C,d.rows-1,0,E-1),$=v.subMatrix(C,v.rows-1,0,E-1),Z=d.subMatrix(C,d.rows-1,E,d.columns-1),fe=v.subMatrix(C,v.rows-1,E,v.columns-1),de=f(o.add(w,Z),o.add(x,fe),C,E),xe=f(o.add(B,Z),x,C,E),Ae=f(w,o.sub(j,fe),C,E),Ye=f(Z,o.sub($,x),C,E),rt=f(o.add(w,N),fe,C,E),je=f(o.sub(B,w),o.add(x,j),C,E),ot=f(o.sub(N,Z),o.add($,fe),C,E),Ft=o.add(de,Ye);Ft.sub(rt),Ft.add(ot);var hn=o.add(Ae,rt),In=o.add(xe,Ye),xn=o.sub(de,xe);xn.add(Ae),xn.add(je);var dn=o.zeros(2*Ft.rows,2*Ft.columns);return dn=dn.setSubMatrix(Ft,0,0),dn=dn.setSubMatrix(hn,Ft.rows,0),dn=dn.setSubMatrix(In,0,Ft.columns),dn=dn.setSubMatrix(xn,Ft.rows,Ft.columns),dn.subMatrix(0,p-1,0,y-1)}return f(n,r,l,c)}},{key:"scaleRows",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="object")throw new TypeError("options must be an object");var n=r.min,e=n===void 0?0:n,t=r.max,a=t===void 0?1:t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(e>=a)throw new RangeError("min must be smaller than max");for(var s=new Ia(this.rows,this.columns),u=0;u<this.rows;u++){var l=this.getRow(u);l.length>0&&P3(l,{min:e,max:a,output:l}),s.setRow(u,l)}return s}},{key:"scaleColumns",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="object")throw new TypeError("options must be an object");var n=r.min,e=n===void 0?0:n,t=r.max,a=t===void 0?1:t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(e>=a)throw new RangeError("min must be smaller than max");for(var s=new Ia(this.rows,this.columns),u=0;u<this.columns;u++){var l=this.getColumn(u);l.length&&P3(l,{min:e,max:a,output:l}),s.setColumn(u,l)}return s}},{key:"flipRows",value:function(){for(var r=Math.ceil(this.columns/2),n=0;n<this.rows;n++)for(var e=0;e<r;e++){var t=this.get(n,e),a=this.get(n,this.columns-1-e);this.set(n,e,a),this.set(n,this.columns-1-e,t)}return this}},{key:"flipColumns",value:function(){for(var r=Math.ceil(this.rows/2),n=0;n<this.columns;n++)for(var e=0;e<r;e++){var t=this.get(e,n),a=this.get(this.rows-1-e,n);this.set(e,n,a),this.set(this.rows-1-e,n,t)}return this}},{key:"kroneckerProduct",value:function(r){r=Ia.checkMatrix(r);for(var n=this.rows,e=this.columns,t=r.rows,a=r.columns,s=new Ia(n*t,e*a),u=0;u<n;u++)for(var l=0;l<e;l++)for(var c=0;c<t;c++)for(var f=0;f<a;f++)s.set(t*u+c,a*l+f,this.get(u,l)*r.get(c,f));return s}},{key:"kroneckerSum",value:function(r){if(r=Ia.checkMatrix(r),!this.isSquare()||!r.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var n=this.rows,e=r.rows,t=this.kroneckerProduct(Ia.eye(e,e)),a=Ia.eye(n,n).kroneckerProduct(r);return t.add(a)}},{key:"transpose",value:function(){for(var r=new Ia(this.columns,this.rows),n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.set(e,n,this.get(n,e));return r}},{key:"sortRows",value:function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N3,n=0;n<this.rows;n++)this.setRow(n,this.getRow(n).sort(r));return this}},{key:"sortColumns",value:function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N3,n=0;n<this.columns;n++)this.setColumn(n,this.getColumn(n).sort(r));return this}},{key:"subMatrix",value:function(r,n,e,t){R3(this,r,n,e,t);for(var a=new Ia(n-r+1,t-e+1),s=r;s<=n;s++)for(var u=e;u<=t;u++)a.set(s-r,u-e,this.get(s,u));return a}},{key:"subMatrixRow",value:function(r,n,e){if(n===void 0&&(n=0),e===void 0&&(e=this.columns-1),n>e||n<0||n>=this.columns||e<0||e>=this.columns)throw new RangeError("Argument out of range");for(var t=new Ia(r.length,e-n+1),a=0;a<r.length;a++)for(var s=n;s<=e;s++){if(r[a]<0||r[a]>=this.rows)throw new RangeError("Row index out of range: ".concat(r[a]));t.set(a,s-n,this.get(r[a],s))}return t}},{key:"subMatrixColumn",value:function(r,n,e){if(n===void 0&&(n=0),e===void 0&&(e=this.rows-1),n>e||n<0||n>=this.rows||e<0||e>=this.rows)throw new RangeError("Argument out of range");for(var t=new Ia(e-n+1,r.length),a=0;a<r.length;a++)for(var s=n;s<=e;s++){if(r[a]<0||r[a]>=this.columns)throw new RangeError("Column index out of range: ".concat(r[a]));t.set(s-n,a,this.get(s,r[a]))}return t}},{key:"setSubMatrix",value:function(r,n,e){if(r=Ia.checkMatrix(r),r.isEmpty())return this;var t=n+r.rows-1,a=e+r.columns-1;R3(this,n,t,e,a);for(var s=0;s<r.rows;s++)for(var u=0;u<r.columns;u++)this.set(n+s,e+u,r.get(s,u));return this}},{key:"selection",value:function(r,n){sH(this,r),uH(this,n);for(var e=new Ia(r.length,n.length),t=0;t<r.length;t++)for(var a=r[t],s=0;s<n.length;s++){var u=n[s];e.set(t,s,this.get(a,u))}return e}},{key:"trace",value:function(){for(var r=Math.min(this.rows,this.columns),n=0,e=0;e<r;e++)n+=this.get(e,e);return n}},{key:"clone",value:function(){for(var r=new Ia(this.rows,this.columns),n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.set(n,e,this.get(n,e));return r}},{key:"sum",value:function(r){switch(r){case"row":return lH(this);case"column":return cH(this);case void 0:return fH(this);default:throw new Error("invalid option: ".concat(r))}}},{key:"product",value:function(r){switch(r){case"row":return dH(this);case"column":return hH(this);case void 0:return vH(this);default:throw new Error("invalid option: ".concat(r))}}},{key:"mean",value:function(r){var n=this.sum(r);switch(r){case"row":{for(var e=0;e<this.rows;e++)n[e]/=this.columns;return n}case"column":{for(var t=0;t<this.columns;t++)n[t]/=this.rows;return n}case void 0:return n/this.size;default:throw new Error("invalid option: ".concat(r))}}},{key:"variance",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="object"&&(n=r,r=void 0),typeof n!="object")throw new TypeError("options must be an object");var e=n,t=e.unbiased,a=t===void 0?!0:t,s=e.mean,u=s===void 0?this.mean(r):s;if(typeof a!="boolean")throw new TypeError("unbiased must be a boolean");switch(r){case"row":{if(!Dl(u))throw new TypeError("mean must be an array");return gH(this,a,u)}case"column":{if(!Dl(u))throw new TypeError("mean must be an array");return pH(this,a,u)}case void 0:{if(typeof u!="number")throw new TypeError("mean must be a number");return mH(this,a,u)}default:throw new Error("invalid option: ".concat(r))}}},{key:"standardDeviation",value:function(r,n){typeof r=="object"&&(n=r,r=void 0);var e=this.variance(r,n);if(r===void 0)return Math.sqrt(e);for(var t=0;t<e.length;t++)e[t]=Math.sqrt(e[t]);return e}},{key:"center",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="object"&&(n=r,r=void 0),typeof n!="object")throw new TypeError("options must be an object");var e=n,t=e.center,a=t===void 0?this.mean(r):t;switch(r){case"row":{if(!Dl(a))throw new TypeError("center must be an array");return yH(this,a),this}case"column":{if(!Dl(a))throw new TypeError("center must be an array");return bH(this,a),this}case void 0:{if(typeof a!="number")throw new TypeError("center must be a number");return CH(this,a),this}default:throw new Error("invalid option: ".concat(r))}}},{key:"scale",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="object"&&(n=r,r=void 0),typeof n!="object")throw new TypeError("options must be an object");var e=n.scale;switch(r){case"row":{if(e===void 0)e=EH(this);else if(!Dl(e))throw new TypeError("scale must be an array");return OH(this,e),this}case"column":{if(e===void 0)e=wH(this);else if(!Dl(e))throw new TypeError("scale must be an array");return xH(this,e),this}case void 0:{if(e===void 0)e=SH(this);else if(typeof e!="number")throw new TypeError("scale must be a number");return TH(this,e),this}default:throw new Error("invalid option: ".concat(r))}}},{key:"toString",value:function(r){return D3(this,r)}}],[{key:"from1DArray",value:function(r,n,e){var t=r*n;if(t!==e.length)throw new RangeError("data length does not match given dimensions");for(var a=new Ia(r,n),s=0;s<r;s++)for(var u=0;u<n;u++)a.set(s,u,e[s*n+u]);return a}},{key:"rowVector",value:function(r){for(var n=new Ia(1,r.length),e=0;e<r.length;e++)n.set(0,e,r[e]);return n}},{key:"columnVector",value:function(r){for(var n=new Ia(r.length,1),e=0;e<r.length;e++)n.set(e,0,r[e]);return n}},{key:"zeros",value:function(r,n){return new Ia(r,n)}},{key:"ones",value:function(r,n){return new Ia(r,n).fill(1)}},{key:"rand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e!="object")throw new TypeError("options must be an object");for(var t=e.random,a=t===void 0?Math.random:t,s=new Ia(r,n),u=0;u<r;u++)for(var l=0;l<n;l++)s.set(u,l,a());return s}},{key:"randInt",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e!="object")throw new TypeError("options must be an object");var t=e.min,a=t===void 0?0:t,s=e.max,u=s===void 0?1e3:s,l=e.random,c=l===void 0?Math.random:l;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(u))throw new TypeError("max must be an integer");if(a>=u)throw new RangeError("min must be smaller than max");for(var f=u-a,d=new Ia(r,n),v=0;v<r;v++)for(var p=0;p<n;p++){var y=a+Math.round(c()*f);d.set(v,p,y)}return d}},{key:"eye",value:function(r,n,e){n===void 0&&(n=r),e===void 0&&(e=1);for(var t=Math.min(r,n),a=this.zeros(r,n),s=0;s<t;s++)a.set(s,s,e);return a}},{key:"diag",value:function(r,n,e){var t=r.length;n===void 0&&(n=t),e===void 0&&(e=n);for(var a=Math.min(t,n,e),s=this.zeros(n,e),u=0;u<a;u++)s.set(u,u,r[u]);return s}},{key:"min",value:function(r,n){r=this.checkMatrix(r),n=this.checkMatrix(n);for(var e=r.rows,t=r.columns,a=new Ia(e,t),s=0;s<e;s++)for(var u=0;u<t;u++)a.set(s,u,Math.min(r.get(s,u),n.get(s,u)));return a}},{key:"max",value:function(r,n){r=this.checkMatrix(r),n=this.checkMatrix(n);for(var e=r.rows,t=r.columns,a=new this(e,t),s=0;s<e;s++)for(var u=0;u<t;u++)a.set(s,u,Math.max(r.get(s,u),n.get(s,u)));return a}},{key:"checkMatrix",value:function(r){return o.isMatrix(r)?r:new Ia(r)}},{key:"isMatrix",value:function(r){return r!=null&&r.klass==="Matrix"}}]),o}();ks.prototype.klass="Matrix",typeof Symbol!="undefined"&&(ks.prototype[Symbol.for("nodejs.util.inspect.custom")]=rH);function N3(o,i){return o-i}function MH(o){return o.every(function(i){return typeof i=="number"})}ks.random=ks.rand,ks.randomInt=ks.randInt,ks.diagonal=ks.diag,ks.prototype.diagonal=ks.prototype.diag,ks.identity=ks.eye,ks.prototype.negate=ks.prototype.neg,ks.prototype.tensorProduct=ks.prototype.kroneckerProduct;var Ia=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n,e){var t;if(Object(De.a)(this,r),t=i.call(this),r.isMatrix(n))return Object(Bx.a)(t,n.clone());if(Number.isInteger(n)&&n>=0)if(t.data=[],Number.isInteger(e)&&e>=0)for(var a=0;a<n;a++)t.data.push(new Float64Array(e));else throw new TypeError("nColumns must be a positive integer");else if(Dl(n)){var s=n;if(n=s.length,e=n?s[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");t.data=[];for(var u=0;u<n;u++){if(s[u].length!==e)throw new RangeError("Inconsistent array dimensions");if(!MH(s[u]))throw new TypeError("Input data contains non-numeric values");t.data.push(Float64Array.from(s[u]))}}else throw new TypeError("First argument must be a positive number or an array");return t.rows=n,t.columns=e,t}return Object(be.a)(r,[{key:"set",value:function(e,t,a){return this.data[e][t]=a,this}},{key:"get",value:function(e,t){return this.data[e][t]}},{key:"removeRow",value:function(e){return $c(this,e),this.data.splice(e,1),this.rows-=1,this}},{key:"addRow",value:function(e,t){return t===void 0&&(t=e,e=this.rows),$c(this,e,!0),t=Float64Array.from(gp(this,t)),this.data.splice(e,0,t),this.rows+=1,this}},{key:"removeColumn",value:function(e){Xc(this,e);for(var t=0;t<this.rows;t++){for(var a=new Float64Array(this.columns-1),s=0;s<e;s++)a[s]=this.data[t][s];for(var u=e+1;u<this.columns;u++)a[u-1]=this.data[t][u];this.data[t]=a}return this.columns-=1,this}},{key:"addColumn",value:function(e,t){typeof t=="undefined"&&(t=e,e=this.columns),Xc(this,e,!0),t=pp(this,t);for(var a=0;a<this.rows;a++){for(var s=new Float64Array(this.columns+1),u=0;u<e;u++)s[u]=this.data[a][u];for(s[u++]=t[a];u<this.columns+1;u++)s[u]=this.data[a][u-1];this.data[a]=s}return this.columns+=1,this}}]),r}(ks);oH(ks,Ia);var AH=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.data=n,e.rows=n.length,e.columns=n[0].length,e}return Object(be.a)(r,[{key:"set",value:function(e,t,a){return this.data[e][t]=a,this}},{key:"get",value:function(e,t){return this.data[e][t]}}]),r}(ks);function yp(o,i){var r=0;return Math.abs(o)>Math.abs(i)?(r=i/o,Math.abs(o)*Math.sqrt(1+r*r)):i!==0?(r=o/i,Math.abs(i)*Math.sqrt(1+r*r)):0}var j3=function(){function o(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object(De.a)(this,o),i=AH.checkMatrix(i),i.isEmpty())throw new Error("Matrix must be non-empty");var n=i.rows,e=i.columns,t=r.computeLeftSingularVectors,a=t===void 0?!0:t,s=r.computeRightSingularVectors,u=s===void 0?!0:s,l=r.autoTranspose,c=l===void 0?!1:l,f=Boolean(a),d=Boolean(u),v=!1,p;if(n<e)if(!c)p=i.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{p=i.transpose(),n=p.rows,e=p.columns,v=!0;var y=f;f=d,d=y}else p=i.clone();for(var C=Math.min(n,e),E=Math.min(n+1,e),w=new Float64Array(E),x=new Ia(n,C),N=new Ia(e,e),j=new Float64Array(e),B=new Float64Array(n),$=new Float64Array(E),Z=0;Z<E;Z++)$[Z]=Z;for(var fe=Math.min(n-1,e),de=Math.max(0,Math.min(e-2,n)),xe=Math.max(fe,de),Ae=0;Ae<xe;Ae++){if(Ae<fe){w[Ae]=0;for(var Ye=Ae;Ye<n;Ye++)w[Ae]=yp(w[Ae],p.get(Ye,Ae));if(w[Ae]!==0){p.get(Ae,Ae)<0&&(w[Ae]=-w[Ae]);for(var rt=Ae;rt<n;rt++)p.set(rt,Ae,p.get(rt,Ae)/w[Ae]);p.set(Ae,Ae,p.get(Ae,Ae)+1)}w[Ae]=-w[Ae]}for(var je=Ae+1;je<e;je++){if(Ae<fe&&w[Ae]!==0){for(var ot=0,Ft=Ae;Ft<n;Ft++)ot+=p.get(Ft,Ae)*p.get(Ft,je);ot=-ot/p.get(Ae,Ae);for(var hn=Ae;hn<n;hn++)p.set(hn,je,p.get(hn,je)+ot*p.get(hn,Ae))}j[je]=p.get(Ae,je)}if(f&&Ae<fe)for(var In=Ae;In<n;In++)x.set(In,Ae,p.get(In,Ae));if(Ae<de){j[Ae]=0;for(var xn=Ae+1;xn<e;xn++)j[Ae]=yp(j[Ae],j[xn]);if(j[Ae]!==0){j[Ae+1]<0&&(j[Ae]=0-j[Ae]);for(var dn=Ae+1;dn<e;dn++)j[dn]/=j[Ae];j[Ae+1]+=1}if(j[Ae]=-j[Ae],Ae+1<n&&j[Ae]!==0){for(var tr=Ae+1;tr<n;tr++)B[tr]=0;for(var Ut=Ae+1;Ut<n;Ut++)for(var Rn=Ae+1;Rn<e;Rn++)B[Ut]+=j[Rn]*p.get(Ut,Rn);for(var $n=Ae+1;$n<e;$n++)for(var qr=-j[$n]/j[Ae+1],Kr=Ae+1;Kr<n;Kr++)p.set(Kr,$n,p.get(Kr,$n)+qr*B[Kr])}if(d)for(var fa=Ae+1;fa<e;fa++)N.set(fa,Ae,j[fa])}}var ba=Math.min(e,n+1);if(fe<e&&(w[fe]=p.get(fe,fe)),n<ba&&(w[ba-1]=0),de+1<ba&&(j[de]=p.get(de,ba-1)),j[ba-1]=0,f){for(var qi=fe;qi<C;qi++){for(var No=0;No<n;No++)x.set(No,qi,0);x.set(qi,qi,1)}for(var ni=fe-1;ni>=0;ni--)if(w[ni]!==0){for(var Vu=ni+1;Vu<C;Vu++){for(var Jc=0,Bp=ni;Bp<n;Bp++)Jc+=x.get(Bp,ni)*x.get(Bp,Vu);Jc=-Jc/x.get(ni,ni);for(var ng=ni;ng<n;ng++)x.set(ng,Vu,x.get(ng,Vu)+Jc*x.get(ng,ni))}for(var Gp=ni;Gp<n;Gp++)x.set(Gp,ni,-x.get(Gp,ni));x.set(ni,ni,1+x.get(ni,ni));for(var MM=0;MM<ni-1;MM++)x.set(MM,ni,0)}else{for(var AM=0;AM<n;AM++)x.set(AM,ni,0);x.set(ni,ni,1)}}if(d)for(var il=e-1;il>=0;il--){if(il<de&&j[il]!==0)for(var zy=il+1;zy<e;zy++){for(var TE=0,ME=il+1;ME<e;ME++)TE+=N.get(ME,il)*N.get(ME,zy);TE=-TE/N.get(il+1,il);for(var Uy=il+1;Uy<e;Uy++)N.set(Uy,zy,N.get(Uy,zy)+TE*N.get(Uy,il))}for(var PM=0;PM<e;PM++)N.set(PM,il,0);N.set(il,il,1)}for(var EL=ba-1,kM=0,OL=Number.EPSILON;ba>0;){var Sa=void 0,Vy=void 0;for(Sa=ba-2;Sa>=-1&&Sa!==-1;Sa--){var UQ=Number.MIN_VALUE+OL*Math.abs(w[Sa]+Math.abs(w[Sa+1]));if(Math.abs(j[Sa])<=UQ||Number.isNaN(j[Sa])){j[Sa]=0;break}}if(Sa===ba-2)Vy=4;else{var Il=void 0;for(Il=ba-1;Il>=Sa&&Il!==Sa;Il--){var VQ=(Il!==ba?Math.abs(j[Il]):0)+(Il!==Sa+1?Math.abs(j[Il-1]):0);if(Math.abs(w[Il])<=OL*VQ){w[Il]=0;break}}Il===Sa?Vy=3:Il===ba-1?Vy=1:(Vy=2,Sa=Il)}switch(Sa++,Vy){case 1:{var DM=j[ba-2];j[ba-2]=0;for(var oc=ba-2;oc>=Sa;oc--){var Hy=yp(w[oc],DM),IM=w[oc]/Hy,RM=DM/Hy;if(w[oc]=Hy,oc!==Sa&&(DM=-RM*j[oc-1],j[oc-1]=IM*j[oc-1]),d)for(var $h=0;$h<e;$h++)Hy=IM*N.get($h,oc)+RM*N.get($h,ba-1),N.set($h,ba-1,-RM*N.get($h,oc)+IM*N.get($h,ba-1)),N.set($h,oc,Hy)}break}case 2:{var NM=j[Sa-1];j[Sa-1]=0;for(var Qc=Sa;Qc<ba;Qc++){var Wy=yp(w[Qc],NM),jM=w[Qc]/Wy,LM=NM/Wy;if(w[Qc]=Wy,NM=-LM*j[Qc],j[Qc]=jM*j[Qc],f)for(var Xh=0;Xh<n;Xh++)Wy=jM*x.get(Xh,Qc)+LM*x.get(Xh,Sa-1),x.set(Xh,Sa-1,-LM*x.get(Xh,Qc)+jM*x.get(Xh,Sa-1)),x.set(Xh,Qc,Wy)}break}case 3:{var $y=Math.max(Math.abs(w[ba-1]),Math.abs(w[ba-2]),Math.abs(j[ba-2]),Math.abs(w[Sa]),Math.abs(j[Sa])),zp=w[ba-1]/$y,wL=w[ba-2]/$y,AE=j[ba-2]/$y,_M=w[Sa]/$y,HQ=j[Sa]/$y,rg=((wL+zp)*(wL-zp)+AE*AE)/2,PE=zp*AE*(zp*AE),Xy=0;(rg!==0||PE!==0)&&(rg<0?Xy=0-Math.sqrt(rg*rg+PE):Xy=Math.sqrt(rg*rg+PE),Xy=PE/(rg+Xy));for(var ag=(_M+zp)*(_M-zp)+Xy,Up=_M*HQ,Pi=Sa;Pi<ba-1;Pi++){var Hu=yp(ag,Up);Hu===0&&(Hu=Number.MIN_VALUE);var qc=ag/Hu,ef=Up/Hu;if(Pi!==Sa&&(j[Pi-1]=Hu),ag=qc*w[Pi]+ef*j[Pi],j[Pi]=qc*j[Pi]-ef*w[Pi],Up=ef*w[Pi+1],w[Pi+1]=qc*w[Pi+1],d)for(var Kh=0;Kh<e;Kh++)Hu=qc*N.get(Kh,Pi)+ef*N.get(Kh,Pi+1),N.set(Kh,Pi+1,-ef*N.get(Kh,Pi)+qc*N.get(Kh,Pi+1)),N.set(Kh,Pi,Hu);if(Hu=yp(ag,Up),Hu===0&&(Hu=Number.MIN_VALUE),qc=ag/Hu,ef=Up/Hu,w[Pi]=Hu,ag=qc*j[Pi]+ef*w[Pi+1],w[Pi+1]=-ef*j[Pi]+qc*w[Pi+1],Up=ef*j[Pi+1],j[Pi+1]=qc*j[Pi+1],f&&Pi<n-1)for(var Yh=0;Yh<n;Yh++)Hu=qc*x.get(Yh,Pi)+ef*x.get(Yh,Pi+1),x.set(Yh,Pi+1,-ef*x.get(Yh,Pi)+qc*x.get(Yh,Pi+1)),x.set(Yh,Pi,Hu)}j[ba-2]=ag,kM=kM+1;break}case 4:{if(w[Sa]<=0&&(w[Sa]=w[Sa]<0?-w[Sa]:0,d))for(var kE=0;kE<=EL;kE++)N.set(kE,Sa,-N.get(kE,Sa));for(;Sa<EL&&!(w[Sa]>=w[Sa+1]);){var Ky=w[Sa];if(w[Sa]=w[Sa+1],w[Sa+1]=Ky,d&&Sa<e-1)for(var Vp=0;Vp<e;Vp++)Ky=N.get(Vp,Sa+1),N.set(Vp,Sa+1,N.get(Vp,Sa)),N.set(Vp,Sa,Ky);if(f&&Sa<n-1)for(var Hp=0;Hp<n;Hp++)Ky=x.get(Hp,Sa+1),x.set(Hp,Sa+1,x.get(Hp,Sa)),x.set(Hp,Sa,Ky);Sa++}kM=0,ba--;break}}}if(v){var WQ=N;N=x,x=WQ}this.m=n,this.n=e,this.s=w,this.U=x,this.V=N}return Object(be.a)(o,[{key:"solve",value:function(r){for(var n=r,e=this.threshold,t=this.s.length,a=Ia.zeros(t,t),s=0;s<t;s++)Math.abs(this.s[s])<=e?a.set(s,s,0):a.set(s,s,1/this.s[s]);for(var u=this.U,l=this.rightSingularVectors,c=l.mmul(a),f=l.rows,d=u.rows,v=Ia.zeros(f,d),p=0;p<f;p++)for(var y=0;y<d;y++){for(var C=0,E=0;E<t;E++)C+=c.get(p,E)*u.get(y,E);v.set(p,y,C)}return v.mmul(n)}},{key:"solveForDiagonal",value:function(r){return this.solve(Ia.diag(r))}},{key:"inverse",value:function(){for(var r=this.V,n=this.threshold,e=r.rows,t=r.columns,a=new Ia(e,this.s.length),s=0;s<e;s++)for(var u=0;u<t;u++)Math.abs(this.s[u])>n&&a.set(s,u,r.get(s,u)/this.s[u]);for(var l=this.U,c=l.rows,f=l.columns,d=new Ia(e,c),v=0;v<e;v++)for(var p=0;p<c;p++){for(var y=0,C=0;C<f;C++)y+=a.get(v,C)*l.get(p,C);d.set(v,p,y)}return d}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var r=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,n=0,e=this.s,t=0,a=e.length;t<a;t++)e[t]>r&&n++;return n}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Ia.diag(this.s)}}]),o}(),PH=function(){function o(i){Object(De.a)(this,o),this.distances=i.distances,this.dimension=i.dimension||2,this.linkDistance=i.linkDistance}return Object(be.a)(o,[{key:"layout",value:function(){var r=this,n=r.dimension,e=r.distances,t=r.linkDistance;try{var a=Ia.mul(Ia.pow(e,2),-.5),s=a.mean("row"),u=a.mean("column"),l=a.mean();a.add(l).subRowVector(s).subColumnVector(u);var c=new j3(a),f=Ia.sqrt(c.diagonalMatrix).diagonal();return c.leftSingularVectors.toJSON().map(function(C){return Ia.mul([C],[f]).toJSON()[0].splice(0,n)})}catch(C){for(var d=[],v=0;v<e.length;v++){var p=Math.random()*t,y=Math.random()*t;d.push([p,y])}return d}}}]),o}(),kH=800,DH=function(){function o(i){Object(De.a)(this,o),this.disp=[],this.positions=i.positions,this.adjMatrix=i.adjMatrix,this.focusID=i.focusID,this.radii=i.radii,this.iterations=i.iterations||10,this.height=i.height||10,this.width=i.width||10,this.speed=i.speed||100,this.gravity=i.gravity||10,this.nodeSizeFunc=i.nodeSizeFunc,this.k=i.k||5,this.strictRadial=i.strictRadial,this.nodes=i.nodes}return Object(be.a)(o,[{key:"layout",value:function(){var r=this,n=r.positions,e=[],t=r.iterations,a=r.width/10;r.maxDisplace=a,r.disp=e;for(var s=0;s<t;s++)n.forEach(function(u,l){e[l]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return n}},{key:"getRepulsion",value:function(){var r=this,n=r.positions,e=r.nodes,t=r.disp,a=r.k,s=r.radii||[];n.forEach(function(u,l){t[l]={x:0,y:0},n.forEach(function(c,f){if(l!==f&&s[l]===s[f]){var d=u[0]-c[0],v=u[1]-c[1],p=Math.sqrt(d*d+v*v);if(p===0){p=1;var y=l>f?1:-1;d=.01*y,v=.01*y}if(p<r.nodeSizeFunc(e[l])/2+r.nodeSizeFunc(e[f])/2){var C=a*a/p;t[l].x+=d/p*C,t[l].y+=v/p*C}}})})}},{key:"updatePositions",value:function(){var r=this,n=r.positions,e=r.disp,t=r.speed,a=r.strictRadial,s=r.focusID,u=r.maxDisplace||r.width/10;a&&e.forEach(function(c,f){var d=n[f][0]-n[s][0],v=n[f][1]-n[s][1],p=Math.sqrt(d*d+v*v),y=v/p,C=-d/p,E=Math.sqrt(c.x*c.x+c.y*c.y),w=Math.acos((y*c.x+C*c.y)/E);w>Math.PI/2&&(w-=Math.PI/2,y*=-1,C*=-1);var x=Math.cos(w)*E;c.x=y*x,c.y=C*x});var l=r.radii;n.forEach(function(c,f){if(f!==s){var d=Math.sqrt(e[f].x*e[f].x+e[f].y*e[f].y);if(d>0&&f!==s){var v=Math.min(u*(t/kH),d);if(c[0]+=e[f].x/d*v,c[1]+=e[f].y/d*v,a){var p=c[0]-n[s][0],y=c[1]-n[s][1],C=Math.sqrt(p*p+y*y);p=p/C*l[f],y=y/C*l[f],c[0]=n[s][0]+p,c[1]=n[s][1]+y}}}})}}]),o}();function IH(o){for(var i=o.length,r=o[0].length,n=[],e=0;e<i;e++){for(var t=[],a=0;a<r;a++)o[e][a]!==0?t.push(1/(o[e][a]*o[e][a])):t.push(0);n.push(t)}return n}function RH(o,i){var r=-1;return o.forEach(function(n,e){n.id===i&&(r=e)}),r}function L3(o,i){return Math.sqrt((o[0]-i[0])*(o[0]-i[0])+(o[1]-i[1])*(o[1]-i[1]))}var NH=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges||[];if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var s=e.center;if(t.length===1){t[0].x=s[0],t[0].y=s[1],e.onLayoutEnd&&e.onLayoutEnd();return}var u=e.linkDistance,l=null;if(V0(e.focusNode)){for(var c=!1,f=0;f<t.length;f++)t[f].id===e.focusNode&&(l=t[f],e.focusNode=l,c=!0,f=t.length);c||(l=null)}else l=e.focusNode;l||(l=t[0],e.focusNode=l);var d=RH(t,l.id);e.focusIndex=d;var v=kD({nodes:t,edges:a},!1),p=PD(v),y=e.maxToFocus(p,d);e.handleInfinity(p,d,y+1),e.distances=p;var C=p[d],E=e.width||500,w=e.height||500,x=E-s[0]>s[0]?s[0]:E-s[0],N=w-s[1]>s[1]?s[1]:w-s[1];x===0&&(x=E/2),N===0&&(N=w/2);var j=N>x?x:N,B=Math.max.apply(Math,Object(Qe.a)(C)),$=[];C.forEach(function(xn,dn){e.unitRadius||(e.unitRadius=j/B),$[dn]=xn*e.unitRadius}),e.radii=$;var Z=e.eIdealDisMatrix();e.eIdealDistances=Z;var fe=IH(Z);e.weights=fe;var de=new PH({linkDistance:u,distances:Z}),xe=de.layout();xe.forEach(function(xn){G2(xn[0])&&(xn[0]=Math.random()*u),G2(xn[1])&&(xn[1]=Math.random()*u)}),e.positions=xe,xe.forEach(function(xn,dn){t[dn].x=xn[0]+s[0],t[dn].y=xn[1]+s[1]}),xe.forEach(function(xn){xn[0]-=xe[d][0],xn[1]-=xe[d][1]}),e.run();var Ae=e.preventOverlap,Ye=e.nodeSize,rt,je=e.strictRadial;if(Ae){var ot=e.nodeSpacing,Ft;Ir(ot)?Ft=function(){return ot}:Ah(ot)?Ft=ot:Ft=function(){return 0},Ye?ru(Ye)?rt=function(dn){var tr=Ye[0]>Ye[1]?Ye[0]:Ye[1];return tr+Ft(dn)}:rt=function(dn){return Ye+Ft(dn)}:rt=function(dn){if(dn.size){if(ru(dn.size)){var tr=dn.size[0]>dn.size[1]?dn.size[0]:dn.size[1];return tr+Ft(dn)}if(jf(dn.size)){var Ut=dn.size.width>dn.size.height?dn.size.width:dn.size.height;return Ut+Ft(dn)}return dn.size+Ft(dn)}return 10+Ft(dn)};var hn={nodes:t,nodeSizeFunc:rt,adjMatrix:v,positions:xe,radii:$,height:w,width:E,strictRadial:je,focusID:d,iterations:e.maxPreventOverlapIteration||200,k:xe.length/4.5},In=new DH(hn);xe=In.layout()}return xe.forEach(function(xn,dn){t[dn].x=xn[0]+s[0],t[dn].y=xn[1]+s[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:a}}},{key:"run",value:function(){for(var e=this,t=e.maxIteration,a=e.positions||[],s=e.weights||[],u=e.eIdealDistances||[],l=e.radii||[],c=0;c<=t;c++){var f=c/t;e.oneIteration(f,a,l,u,s)}}},{key:"oneIteration",value:function(e,t,a,s,u){var l=this,c=1-e,f=l.focusIndex;t.forEach(function(d,v){var p=L3(d,[0,0]),y=p===0?0:1/p;if(v!==f){var C=0,E=0,w=0;t.forEach(function(N,j){if(v!==j){var B=L3(d,N),$=B===0?0:1/B,Z=s[j][v];w+=u[v][j],C+=u[v][j]*(N[0]+Z*(d[0]-N[0])*$),E+=u[v][j]*(N[1]+Z*(d[1]-N[1])*$)}});var x=a[v]===0?0:1/a[v];w*=c,w+=e*x*x,C*=c,C+=e*x*d[0]*y,d[0]=C/w,E*=c,E+=e*x*d[1]*y,d[1]=E/w}})}},{key:"eIdealDisMatrix",value:function(){var e=this,t=e.nodes;if(!t)return[];var a=e.distances,s=e.linkDistance,u=e.radii||[],l=e.unitRadius||50,c=[];return a&&a.forEach(function(f,d){var v=[];f.forEach(function(p,y){if(d===y)v.push(0);else if(u[d]===u[y])if(e.sortBy==="data")v.push(p*(Math.abs(d-y)*e.sortStrength)/(u[d]/l));else if(e.sortBy){var C=t[d][e.sortBy]||0,E=t[y][e.sortBy]||0;V0(C)&&(C=C.charCodeAt(0)),V0(E)&&(E=E.charCodeAt(0)),v.push(p*(Math.abs(C-E)*e.sortStrength)/(u[d]/l))}else v.push(p*s/(u[d]/l));else{var w=(s+l)/2;v.push(p*w)}}),c.push(v)}),c}},{key:"handleInfinity",value:function(e,t,a){for(var s=e.length,u=0;u<s;u++)if(e[t][u]===Infinity){e[t][u]=a,e[u][t]=a;for(var l=0;l<s;l++)e[u][l]!==Infinity&&e[t][l]===Infinity&&(e[t][l]=a+e[u][l],e[l][t]=a+e[u][l])}for(var c=0;c<s;c++)if(c!==t){for(var f=0;f<s;f++)if(e[c][f]===Infinity){var d=Math.abs(e[t][c]-e[t][f]);d=d===0?1:d,e[c][f]=d}}}},{key:"maxToFocus",value:function(e,t){for(var a=0,s=0;s<e[t].length;s++)e[t][s]!==Infinity&&(a=e[t][s]>a?e[t][s]:a);return a}},{key:"getType",value:function(){return"radial"}}]),r}(Ou),jH=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=3/2*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges,s=t.length;if(s===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var u=e.center;if(s===1){t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd();return}var l=[],c;ru(e.nodeSize)?c=Math.max(e.nodeSize[0],e.nodeSize[1]):c=e.nodeSize,t.forEach(function(de){l.push(de);var xe=c;ru(de.size)?xe=Math.max(de.size[0],de.size[1]):Ir(de.size)?xe=de.size:jf(de.size)&&(xe=Math.max(de.size.width,de.size.height)),c=Math.max(c,xe)}),e.clockwise=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise;var f={},d={};if(l.forEach(function(de,xe){f[de.id]=de,d[de.id]=xe}),(e.sortBy==="degree"||!V0(e.sortBy)||l[0][e.sortBy]===void 0)&&(e.sortBy="degree",!Ir(t[0].degree))){var v=H0(t.length,d,a);l.forEach(function(de,xe){de.degree=v[xe]})}l.sort(function(de,xe){return xe[e.sortBy]-de[e.sortBy]}),e.maxValueNode=l[0],e.maxLevelDiff=e.maxLevelDiff||e.maxValueNode[e.sortBy]/4;var p=[[]],y=p[0];l.forEach(function(de){if(y.length>0){var xe=Math.abs(y[0][e.sortBy]-de[e.sortBy]);e.maxLevelDiff&&xe>=e.maxLevelDiff&&(y=[],p.push(y))}y.push(de)});var C=c+e.minNodeSpacing;if(!e.preventOverlap){var E=p.length>0&&p[0].length>1,w=Math.min(e.width,e.height)/2-C,x=w/(p.length+(E?1:0));C=Math.min(C,x)}var N=0;if(p.forEach(function(de){var xe=e.sweep;xe===void 0&&(xe=2*Math.PI-2*Math.PI/de.length);var Ae=de.dTheta=xe/Math.max(1,de.length-1);if(de.length>1&&e.preventOverlap){var Ye=Math.cos(Ae)-Math.cos(0),rt=Math.sin(Ae)-Math.sin(0),je=Math.sqrt(C*C/(Ye*Ye+rt*rt));N=Math.max(je,N)}de.r=N,N+=C}),e.equidistant){for(var j=0,B=0,$=0;$<p.length;$++){var Z=p[$],fe=Z.r-B;j=Math.max(j,fe)}B=0,p.forEach(function(de,xe){xe===0&&(B=de.r),de.r=B,B+=j})}return p.forEach(function(de){var xe=de.dTheta,Ae=de.r;de.forEach(function(Ye,rt){var je=e.startAngle+(e.clockwise?1:-1)*xe*rt;Ye.x=u[0]+Ae*Math.cos(je),Ye.y=u[1]+Ae*Math.sin(je)})}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:a}}},{key:"getType",value:function(){return"concentric"}}]),r}(Ou),LH=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges,s=a===void 0?[]:a,u=e.center;if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}if(t.length===1){t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd();return}var l=e.linkDistance,c=kD({nodes:t,edges:s},!1),f=PD(c);e.handleInfinity(f);var d=t7(f,l);e.scaledDistances=d;var v=e.runMDS();return e.positions=v,v.forEach(function(p,y){t[y].x=p[0]+u[0],t[y].y=p[1]+u[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:s}}},{key:"runMDS",value:function(){var e=this,t=2,a=e.scaledDistances,s=Ia.mul(Ia.pow(a,2),-.5),u=s.mean("row"),l=s.mean("column"),c=s.mean();s.add(c).subRowVector(u).subColumnVector(l);var f=new j3(s),d=Ia.sqrt(f.diagonalMatrix).diagonal();return f.leftSingularVectors.toJSON().map(function(v){return Ia.mul([v],[d]).toJSON()[0].splice(0,t)})}},{key:"handleInfinity",value:function(e){var t=-999999;e.forEach(function(a){a.forEach(function(s){s!==Infinity&&t<s&&(t=s)})}),e.forEach(function(a,s){a.forEach(function(u,l){u===Infinity&&(e[s][l]=t)})})}},{key:"getType",value:function(){return"mds"}}]),r}(Ou),_H=800,FH=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.workerEnabled=!1,e.gravity=10,e.speed=5,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.tick=function(){},e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var e=this,t,a,s=this,u=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),!u||u.length===0){(t=s.onLayoutEnd)===null||t===void 0||t.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);var l=s.center;if(u.length===1){u[0].x=l[0],u[0].y=l[1],(a=s.onLayoutEnd)===null||a===void 0||a.call(s);return}var c={},f={};return u.forEach(function(d,v){Ir(d.x)||(d.x=Math.random()*e.width),Ir(d.y)||(d.y=Math.random()*e.height),c[d.id]=d,f[d.id]=v}),s.nodeMap=c,s.nodeIdxMap=f,s.run()}},{key:"run",value:function(){var e,t=this,a=t.nodes;if(!!a){var s=t.edges,u=t.maxIteration,l=t.workerEnabled,c=t.clustering,f={};if(c&&a.forEach(function(p){f[p.cluster]===void 0&&(f[p.cluster]={name:p.cluster,cx:0,cy:0,count:0})}),l){for(var d=0;d<u;d++)t.runOneStep(f);(e=t.onLayoutEnd)===null||e===void 0||e.call(t)}else{if(typeof window=="undefined")return;var v=0;this.timeInterval=window.setInterval(function(){var p;t.runOneStep(f),v++,v>=u&&((p=t.onLayoutEnd)===null||p===void 0||p.call(t),window.clearInterval(t.timeInterval))},0)}return{nodes:a,edges:s}}}},{key:"runOneStep",value:function(e){var t,a=this,s=a.nodes;if(!!s){var u=a.edges,l=a.center,c=a.gravity,f=a.speed,d=a.clustering,v=a.height*a.width,p=Math.sqrt(v)/10,y=v/(s.length+1),C=Math.sqrt(y),E=[];if(s.forEach(function(j,B){E[B]={x:0,y:0}}),a.applyCalculate(s,u,E,C,y),d){for(var w in e)e[w].cx=0,e[w].cy=0,e[w].count=0;s.forEach(function(j){var B=e[j.cluster];Ir(j.x)&&(B.cx+=j.x),Ir(j.y)&&(B.cy+=j.y),B.count++});for(var x in e)e[x].cx/=e[x].count,e[x].cy/=e[x].count;var N=a.clusterGravity||c;s.forEach(function(j,B){if(!(!Ir(j.x)||!Ir(j.y))){var $=e[j.cluster],Z=Math.sqrt((j.x-$.cx)*(j.x-$.cx)+(j.y-$.cy)*(j.y-$.cy)),fe=C*N;E[B].x-=fe*(j.x-$.cx)/Z,E[B].y-=fe*(j.y-$.cy)/Z}})}s.forEach(function(j,B){if(!(!Ir(j.x)||!Ir(j.y))){var $=.01*C*c;E[B].x-=$*(j.x-l[0]),E[B].y-=$*(j.y-l[1])}}),s.forEach(function(j,B){if(Ir(j.fx)&&Ir(j.fy)){j.x=j.fx,j.y=j.fy;return}if(!(!Ir(j.x)||!Ir(j.y))){var $=Math.sqrt(E[B].x*E[B].x+E[B].y*E[B].y);if($>0){var Z=Math.min(p*(f/_H),$);j.x+=E[B].x/$*Z,j.y+=E[B].y/$*Z}}}),(t=a.tick)===null||t===void 0||t.call(a)}}},{key:"applyCalculate",value:function(e,t,a,s,u){var l=this;l.calRepulsive(e,a,u),t&&l.calAttractive(t,a,s)}},{key:"calRepulsive",value:function(e,t,a){e.forEach(function(s,u){t[u]={x:0,y:0},e.forEach(function(l,c){if(u!==c&&!(!Ir(s.x)||!Ir(l.x)||!Ir(s.y)||!Ir(l.y))){var f=s.x-l.x,d=s.y-l.y,v=f*f+d*d;if(v===0){v=1;var p=u>c?1:-1;f=.01*p,d=.01*p}var y=a/v;t[u].x+=f*y,t[u].y+=d*y}})})}},{key:"calAttractive",value:function(e,t,a){var s=this;e.forEach(function(u){var l=Ci(u,"source"),c=Ci(u,"target");if(!(!l||!c)){var f=s.nodeIdxMap[l],d=s.nodeIdxMap[c];if(f!==d){var v=s.nodeMap[l],p=s.nodeMap[c];if(!(!Ir(p.x)||!Ir(v.x)||!Ir(p.y)||!Ir(v.y))){var y=p.x-v.x,C=p.y-v.y,E=Math.sqrt(y*y+C*C),w=E*E/a;t[d].x-=y/E*w,t[d].y-=C/E*w,t[f].x+=y/E*w,t[f].y+=C/E*w}}}})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){var e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}},{key:"getType",value:function(){return"fruchterman"}}]),r}(Ou),BH=h("yG8O"),co=h.n(BH),GH=h("lwsE"),Ei=h.n(GH),zH=h("W8MJ"),Oi=h.n(zH),UH=h("U+yc"),fo=h.n(UH),Mq=h("1ABj"),tt=h("Gj0h"),Fn=h("IOcx"),ya=h("4cb6");function BT(o){return typeof o=="number"}function Pd(o){return o===void 0?0:o>360||o<-360?o%360:o}function Zv(o,i,r){return BT(o)?Fn.d.fromValues(o,i,r):o.length===3?Fn.d.clone(o):Fn.d.fromValues(o[0],o[1],o[2])}var _3=function(){function o(i,r){Ei()(this,o),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=i,this.matrix=Fn.b.clone(r.matrix),this.right=Fn.d.clone(r.right),this.up=Fn.d.clone(r.up),this.forward=Fn.d.clone(r.forward),this.position=Fn.d.clone(r.position),this.focalPoint=Fn.d.clone(r.focalPoint),this.distanceVector=Fn.d.clone(r.distanceVector),this.azimuth=r.azimuth,this.elevation=r.elevation,this.roll=r.roll,this.relAzimuth=r.relAzimuth,this.relElevation=r.relElevation,this.relRoll=r.relRoll,this.dollyingStep=r.dollyingStep,this.distance=r.distance}return Oi()(o,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(r){r.matrix=Fn.b.copy(r.matrix,this.matrix),r.right=Fn.d.copy(r.right,this.right),r.up=Fn.d.copy(r.up,this.up),r.forward=Fn.d.copy(r.forward,this.forward),r.position=Fn.d.copy(r.position,this.position),r.focalPoint=Fn.d.copy(r.focalPoint,this.focalPoint),r.distanceVector=Fn.d.copy(r.distanceVector,this.distanceVector),r.azimuth=this.azimuth,r.elevation=this.elevation,r.roll=this.roll,r.relAzimuth=this.relAzimuth,r.relElevation=this.relElevation,r.relRoll=this.relRoll,r.dollyingStep=this.dollyingStep,r.distance=this.distance}}]),o}(),F3,B3,G3,GT,z3,U3,V3,Zi;(function(o){o.ORBITING="ORBITING",o.EXPLORING="EXPLORING",o.TRACKING="TRACKING"})(Zi||(Zi={}));var Q2;(function(o){o.DEFAULT="DEFAULT",o.ROTATIONAL="ROTATIONAL",o.TRANSLATIONAL="TRANSLATIONAL",o.CINEMATIC="CINEMATIC"})(Q2||(Q2={}));var Jv;(function(o){o.ORTHOGRAPHIC="ORTHOGRAPHIC",o.PERSPECTIVE="PERSPECTIVE"})(Jv||(Jv={}));var kd=Math.PI/180,Dh=180/Math.PI,H3=(F3=Object(ya.injectable)(),B3=Object(ya.inject)(tt.IDENTIFIER.InteractorService),F3(G3=(GT=(V3=U3=function(){function o(){Ei()(this,o),this.matrix=Fn.b.create(),this.right=Fn.d.fromValues(1,0,0),this.up=Fn.d.fromValues(0,1,0),this.forward=Fn.d.fromValues(0,0,1),this.position=Fn.d.fromValues(0,0,1),this.focalPoint=Fn.d.fromValues(0,0,0),this.distanceVector=Fn.d.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=Infinity,this.minDistance=-Infinity,this.rotateWorld=!1,co()(this,"interactor",z3,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=Fn.b.create(),this.view=void 0,this.following=void 0,this.type=Zi.EXPLORING,this.trackingMode=Q2.DEFAULT,this.projectionMode=Jv.PERSPECTIVE,this.frustum=new tt.Frustum,this.landmarks=[],this.landmarkAnimationID=void 0}return Oi()(o,[{key:"clone",value:function(){var r=new o;return r.setType(this.type,void 0),r.interactor=this.interactor,r}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(r,n){return this.type=r,this.type===Zi.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Zi.TRACKING&&n!==void 0&&this.setTrackingMode(n),this}},{key:"setProjectionMode",value:function(r){return this.projectionMode=r,this}},{key:"setTrackingMode",value:function(r){if(this.type!==Zi.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=r,this}},{key:"setWorldRotation",value:function(r){this.rotateWorld=r,this._getAngles()}},{key:"getViewTransform",value:function(){return Fn.b.invert(Fn.b.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(r){return this.matrix=r,this._update(),this}},{key:"setAspect",value:function(r){return this.setPerspective(this.near,this.far,this.fov,r),this}},{key:"setViewOffset",value:function(r,n,e,t,a,s){return this.aspect=r/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=n,this.view.offsetX=e,this.view.offsetY=t,this.view.width=a,this.view.height=s,this.projectionMode===Jv.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Jv.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(r,n,e,t){return this.projectionMode=Jv.PERSPECTIVE,this.fov=e,this.near=r,this.far=n,this.aspect=t,Fn.b.perspective(this.perspective,this.fov*kd,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(r,n,e,t,a,s){this.projectionMode=Jv.ORTHOGRAPHIC,this.rright=n,this.left=r,this.top=e,this.bottom=t,this.near=a,this.far=s;var u=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,d=c-u,v=c+u,p=f+l,y=f-l;if(this.view!==void 0&&this.view.enabled){var C=(this.rright-this.left)/this.view.fullWidth/this.zoom,E=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=C*this.view.offsetX,v=d+C*this.view.width,p-=E*this.view.offsetY,y=p-E*this.view.height}return Fn.b.ortho(this.perspective,d,v,p,y,a,s),this}},{key:"setPosition",value:function(r,n,e){return this._setPosition(r,n,e),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(r,n,e){var t=Fn.d.fromValues(0,1,0);if(this.focalPoint=Zv(r,n,e),this.trackingMode===Q2.CINEMATIC){var a=Fn.d.subtract(Fn.d.create(),this.focalPoint,this.position);r=a[0],n=a[1],e=a[2];var s=Fn.d.length(a),u=Math.asin(n/s)*Dh,l=90+Math.atan2(e,r)*Dh,c=Fn.b.create();Fn.b.rotateY(c,c,l*kd),Fn.b.rotateX(c,c,u*kd),t=Fn.d.transformMat4(Fn.d.create(),[0,1,0],c)}return Fn.b.invert(this.matrix,Fn.b.lookAt(Fn.b.create(),this.position,this.focalPoint,t)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(r){if(!(this.distance===r||r<0)){this.distance=r,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var n=Fn.d.create();r=this.distance;var e=this.forward,t=this.focalPoint;return n[0]=r*e[0]+t[0],n[1]=r*e[1]+t[1],n[2]=r*e[2]+t[2],this._setPosition(n),this}}},{key:"setMaxDistance",value:function(r){return this.maxDistance=r,this}},{key:"setMinDistance",value:function(r){return this.minDistance=r,this}},{key:"changeAzimuth",value:function(r){return this.setAzimuth(this.azimuth+r),this}},{key:"changeElevation",value:function(r){return this.setElevation(this.elevation+r),this}},{key:"changeRoll",value:function(r){return this.setRoll(this.roll+r),this}},{key:"setAzimuth",value:function(r){return this.azimuth=Pd(r),this.computeMatrix(),this._getAxes(),this.type===Zi.ORBITING||this.type===Zi.EXPLORING?this._getPosition():this.type===Zi.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(r){return this.elevation=Pd(r),this.computeMatrix(),this._getAxes(),this.type===Zi.ORBITING||this.type===Zi.EXPLORING?this._getPosition():this.type===Zi.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(r){return this.roll=Pd(r),this.computeMatrix(),this._getAxes(),this.type===Zi.ORBITING||this.type===Zi.EXPLORING?this._getPosition():this.type===Zi.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(r,n,e){if(this.type===Zi.EXPLORING){r=Pd(r),n=Pd(n),e=Pd(e);var t=Fn.c.setAxisAngle(Fn.c.create(),[1,0,0],(this.rotateWorld?1:-1)*n*kd),a=Fn.c.setAxisAngle(Fn.c.create(),[0,1,0],(this.rotateWorld?1:-1)*r*kd),s=Fn.c.setAxisAngle(Fn.c.create(),[0,0,1],e*kd),u=Fn.c.multiply(Fn.c.create(),a,t);u=Fn.c.multiply(Fn.c.create(),u,s);var l=Fn.b.fromQuat(Fn.b.create(),u);Fn.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),Fn.b.multiply(this.matrix,this.matrix,l),Fn.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+n)>90)return;this.relElevation=Pd(n),this.relAzimuth=Pd(r),this.relRoll=Pd(e),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Zi.ORBITING||this.type===Zi.EXPLORING?this._getPosition():this.type===Zi.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(r,n){var e=Zv(r,n,0),t=Fn.d.clone(this.position);return Fn.d.add(t,t,Fn.d.scale(Fn.d.create(),this.right,e[0])),Fn.d.add(t,t,Fn.d.scale(Fn.d.create(),this.up,e[1])),this._setPosition(t),this}},{key:"dolly",value:function(r){var n=this.forward,e=Fn.d.clone(this.position),t=r*this.dollyingStep,a=this.distance+r*this.dollyingStep;return t=Math.max(Math.min(a,this.maxDistance),this.minDistance)-this.distance,e[0]+=t*n[0],e[1]+=t*n[1],e[2]+=t*n[2],this._setPosition(e),this.type===Zi.ORBITING||this.type===Zi.EXPLORING?this._getDistance():this.type===Zi.TRACKING&&Fn.d.add(this.focalPoint,e,this.distanceVector),this}},{key:"createLandmark",value:function(r,n){var e=this.clone();e.setPosition(n.position),e.setFocalPoint(n.focalPoint),n.roll!==void 0&&e.setRoll(n.roll);var t=new _3(r,e);return this.landmarks.push(t),t}},{key:"setLandmark",value:function(r){var n=new _3(r,this);return this.landmarks.push(n),this}},{key:"gotoLandmark",value:function(r){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,t=this.landmarks.find(function(f){return f.name===r});if(t){if(e===0){t.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var a=t.getPosition(),s=t.getFocalPoint(),u=t.getRoll(),l,c=function f(d){l===void 0&&(l=d);var v=d-l,p=(1-Math.cos(v/e*Math.PI))/2,y=Fn.d.create(),C=Fn.d.create(),E=0;Fn.d.lerp(y,n.focalPoint,s,p),Fn.d.lerp(C,n.position,a,p),E=n.roll*(1-p)+u*p,n.setFocalPoint(y),n.setPosition(C),n.setRoll(E),n.computeMatrix();var w=Fn.d.dist(y,s)+Fn.d.dist(C,a);if(!(w>.01)){n.setFocalPoint(y),n.setPosition(C),n.setRoll(E),n.computeMatrix(),n.interactor.connect();return}v<e&&(n.landmarkAnimationID=window.requestAnimationFrame(f))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var r,n,e=Fn.c.setAxisAngle(Fn.c.create(),[0,0,1],this.roll*kd);Fn.b.identity(this.matrix),r=Fn.c.setAxisAngle(Fn.c.create(),[1,0,0],(this.rotateWorld&&this.type!==Zi.TRACKING||this.type===Zi.TRACKING?1:-1)*this.elevation*kd),n=Fn.c.setAxisAngle(Fn.c.create(),[0,1,0],(this.rotateWorld&&this.type!==Zi.TRACKING||this.type===Zi.TRACKING?1:-1)*this.azimuth*kd);var t=Fn.c.multiply(Fn.c.create(),n,r);t=Fn.c.multiply(Fn.c.create(),t,e);var a=Fn.b.fromQuat(Fn.b.create(),t);this.type===Zi.ORBITING||this.type===Zi.EXPLORING?(Fn.b.translate(this.matrix,this.matrix,this.focalPoint),Fn.b.multiply(this.matrix,this.matrix,a),Fn.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Zi.TRACKING&&(Fn.b.translate(this.matrix,this.matrix,this.position),Fn.b.multiply(this.matrix,this.matrix,a))}},{key:"_setPosition",value:function(r,n,e){this.position=Zv(r,n,e);var t=this.matrix;t[12]=this.position[0],t[13]=this.position[1],t[14]=this.position[2],t[15]=1}},{key:"_getAxes",value:function(){Fn.d.copy(this.right,Zv(Fn.e.transformMat4(Fn.e.create(),[1,0,0,0],this.matrix))),Fn.d.copy(this.up,Zv(Fn.e.transformMat4(Fn.e.create(),[0,1,0,0],this.matrix))),Fn.d.copy(this.forward,Zv(Fn.e.transformMat4(Fn.e.create(),[0,0,1,0],this.matrix))),Fn.d.normalize(this.right,this.right),Fn.d.normalize(this.up,this.up),Fn.d.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var r=this.distanceVector[0],n=this.distanceVector[1],e=this.distanceVector[2],t=Fn.d.length(this.distanceVector);if(t===0){this.elevation=0,this.azimuth=0;return}this.type===Zi.TRACKING?(this.elevation=Math.asin(n/t)*Dh,this.azimuth=Math.atan2(-r,-e)*Dh):this.rotateWorld?(this.elevation=Math.asin(n/t)*Dh,this.azimuth=Math.atan2(-r,-e)*Dh):(this.elevation=-Math.asin(n/t)*Dh,this.azimuth=-Math.atan2(-r,-e)*Dh)}},{key:"_getPosition",value:function(){Fn.d.copy(this.position,Zv(Fn.e.transformMat4(Fn.e.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){Fn.d.transformMat3(this.distanceVector,[0,0,-this.distance],Fn.a.fromMat4(Fn.a.create(),this.matrix)),Fn.d.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=Fn.d.subtract(Fn.d.create(),this.focalPoint,this.position),this.distance=Fn.d.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),o}(),U3.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},V3),z3=fo()(GT.prototype,"interactor",[B3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GT))||G3),W3,$3,X3,zT,K3,Y0,Y3,Ih=(W3=Object(ya.injectable)(),$3=Object(ya.inject)(tt.IDENTIFIER.GeometryComponentManager),W3(X3=(zT=(Y3=Y0=function(){function o(){Ei()(this,o),this.config=void 0,co()(this,"geometry",K3,this),this.entity=void 0,this.component=void 0}return Oi()(o,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(r){this.config=r}},{key:"setEntity",value:function(r){this.entity=r,this.component=this.geometry.create(r),this.component.entity=r,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),o}(),Y0.BOX="box",Y0.SPHERE="sphere",Y0.PLANE="plane",Y0.MERGED="merged",Y3),K3=fo()(zT.prototype,"geometry",[$3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zT))||X3),VH=h("o0o1"),Ua=h.n(VH),HH=h("yXPU"),rs=h.n(HH),WH=h("lSNA"),Pn=h.n(WH),Cr=h("XkVO");function Z3(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var $H={}.toString,XH=function(i,r){return $H.call(i)==="[object "+r+"]"},KH=XH,YH=function(o){return Array.isArray?Array.isArray(o):KH(o,"Array")},ZH=h("cDf5"),Z0=h.n(ZH),JH=9007199254740991,QH="[object Arguments]",qH="[object Array]",eW="[object Boolean]",tW="[object Date]",nW="[object Error]",rW="[object Function]",aW="[object Map]",iW="[object Number]",oW="[object Object]",sW="[object RegExp]",uW="[object Set]",lW="[object String]",cW="[object WeakMap]",fW="[object ArrayBuffer]",dW="[object DataView]",hW="[object Float32Array]",vW="[object Float64Array]",gW="[object Int8Array]",pW="[object Int16Array]",mW="[object Int32Array]",yW="[object Uint8Array]",bW="[object Uint8ClampedArray]",CW="[object Uint16Array]",EW="[object Uint32Array]",Oo={};Oo[hW]=Oo[vW]=Oo[gW]=Oo[pW]=Oo[mW]=Oo[yW]=Oo[bW]=Oo[CW]=Oo[EW]=!0,Oo[QH]=Oo[qH]=Oo[fW]=Oo[eW]=Oo[dW]=Oo[tW]=Oo[nW]=Oo[rW]=Oo[aW]=Oo[iW]=Oo[oW]=Oo[sW]=Oo[uW]=Oo[lW]=Oo[cW]=!1;function Aq(o){return function(i){return o(i)}}var OW=Object.prototype,wW=OW.toString;function xW(o){return TW(o)&&SW(o.length)&&!!Oo[wW.call(o)]}function SW(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=JH}function TW(o){return!!o&&Z0()(o)==="object"}var J3=xW,Q3,q3,eI,tI,q2,nI,rI,aI;function iI(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function oI(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?iI(Object(r),!0).forEach(function(n){Pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):iI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var sI=(Q3=Object(ya.injectable)(),q3=Object(ya.inject)(tt.IDENTIFIER.RenderEngine),eI=Object(ya.inject)(tt.IDENTIFIER.ConfigService),Q3(tI=(q2=(aI=function(){function o(){Ei()(this,o),co()(this,"engine",nI,this),co()(this,"configService",rI,this),this.entity=Object(tt.createEntity)(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return Oi()(o,[{key:"init",value:function(){var r=this.configService.get(),n=r.canvas,e=r.engineOptions;this.initPromise=this.engine.init(oI({canvas:n||Z3(),swapChainFormat:Cr.TextureFormat.BGRA8Unorm,antialiasing:!1},e))}},{key:"setBundle",value:function(r){this.compiledBundle=JSON.parse(JSON.stringify(r))}},{key:"setDispatch",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=r),this}},{key:"setMaxIteration",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=r),this}},{key:"setBinding",value:function(r,n){var e=this;if(typeof r=="string"){var t=BT(n)||J3(n)||YH(n);if(this.compiledBundle&&this.compiledBundle.context){var a=this.compiledBundle.context.defines.find(function(u){return u.name===r});if(a)return a.value=n,this;var s=this.compiledBundle.context.uniforms.find(function(u){return u.name===r});s&&(t?(s.data=n,s.isReferer=!1,s.storageClass===tt.STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(r,n):this.model&&this.model.updateBuffer(r,n)):(s.isReferer=!0,s.data=n))}}else Object.keys(r).forEach(function(u){e.setBinding(u,r[u])});return this}},{key:"execute",value:function(){var i=rs()(Ua.a.mark(function n(){var e=this,t,a,s=arguments;return Ua.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){l.next=6;break}return this.compiledBundle.context&&(t>1?this.compiledBundle.context.maxIteration=t:this.compiledBundle.context.maxIteration++),l.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(c){var f=c.isReferer;return f}).forEach(function(c){var f=c.data,d=c.name;e.model.confirmInput(f.model,d)}),a=0;a<t;a++)this.model.run();return this.engine.endFrame(),l.abrupt("return",this);case 12:case"end":return l.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"getOutput",value:function(){var i=rs()(Ua.a.mark(function n(){return Ua.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"compile",value:function(){var i=rs()(Ua.a.mark(function n(){var e,t,a;return Ua.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.initPromise;case 2:return e=oI({},this.compiledBundle.context),t=this.engine.supportWebGPU?this.engine.useWGSL?tt.Target.WGSL:tt.Target.GLSL450:tt.Target.GLSL100,a=this.compiledBundle.shaders[t],e.defines.filter(function(l){return l.runtime}).forEach(function(l){var c="".concat(tt.DefineValuePlaceholder).concat(l.name);a=a.replace(c,"".concat(l.value))}),e.shader=a,e.uniforms.forEach(function(l){if(!l.data&&l.storageClass===tt.STORAGE_CLASS.StorageBuffer){var c=1;l.type===tt.AST_TOKEN_TYPES.FloatArray?c=1:l.type===tt.AST_TOKEN_TYPES.Vector4FloatArray&&(c=4),l.data=new Float32Array(e.output.length*c).fill(0)}}),this.compiledBundle.context=e,u.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=u.sent;case 12:case"end":return u.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()}]),o}(),aI),nI=fo()(q2.prototype,"engine",[q3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rI=fo()(q2.prototype,"configService",[eI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q2))||tI),uI,lI,cI,UT,fI,dI,hI,vI=(uI=Object(ya.injectable)(),lI=Object(ya.inject)(tt.IDENTIFIER.MaterialComponentManager),uI(cI=(UT=(hI=dI=function(){function o(){Ei()(this,o),this.config=void 0,co()(this,"material",fI,this),this.entity=void 0,this.component=void 0}return Oi()(o,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(r){this.config=r}},{key:"setEntity",value:function(r,n){this.entity=r,this.component=this.material.create(r),this.component.entity=r,this.component.type=n,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),o}(),dI.BASIC="basic",hI),fI=fo()(UT.prototype,"material",[lI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UT))||cI),gI,pI,mI,yI,bI,CI,EI,bp,OI,wI,xI,SI,eC,TI,Rh=(gI=Object(ya.injectable)(),pI=Object(ya.inject)(tt.IDENTIFIER.MeshComponentManager),mI=Object(ya.inject)(tt.IDENTIFIER.CullableComponentManager),yI=Object(ya.inject)(tt.IDENTIFIER.TransformComponentManager),bI=Object(ya.inject)(tt.IDENTIFIER.Systems),CI=Object(ya.named)(tt.IDENTIFIER.SceneGraphSystem),gI(EI=(bp=(TI=eC=function(){function o(){Ei()(this,o),this.attributes={},this.config=void 0,co()(this,"mesh",OI,this),co()(this,"cullable",wI,this),co()(this,"transform",xI,this),co()(this,"sceneGraphSystem",SI,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return Oi()(o,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(r){this.config=r}},{key:"setEntity",value:function(r){this.entity=r,this.cullable.create(r),this.meshComponent=this.mesh.create(r),this.transformComponent=this.transform.create(r),this.onEntityCreated()}},{key:"setMaterial",value:function(r){return this.meshComponent.material=r,this}},{key:"setGeometry",value:function(r){return this.meshComponent.geometry=r,this}},{key:"setAttributes",value:function(r){var n=this;Object.keys(r).forEach(function(e){r[e]!==void 0&&r[e]!==n.attributes[e]&&(n.onAttributeChanged({name:e,data:r[e]}),n.attributes[e]=r[e])})}},{key:"setVisible",value:function(r){var n=this;return this.meshComponent.visible=r,this.meshComponent.children.forEach(function(e){var t=n.mesh.getComponentByEntity(e);t&&(t.visible=r)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(r){return this.sceneGraphSystem.attach(this.entity,r.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(r){var n=r.name,e=r.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(n),e)}},{key:"convertAttributeName2UniformName",value:function(r){return r}}]),o}(),eC.POINT="point",eC.LINE="line",eC.GRID="grid",TI),OI=fo()(bp.prototype,"mesh",[pI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wI=fo()(bp.prototype,"cullable",[mI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xI=fo()(bp.prototype,"transform",[yI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SI=fo()(bp.prototype,"sceneGraphSystem",[bI,CI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bp))||EI),MW=h("fbvF"),AW=h.n(MW),PW=function(){function o(i,r){Ei()(this,o),this.attribute=void 0,this.buffer=void 0;var n=r.buffer,e=r.offset,t=r.stride,a=r.normalized,s=r.size,u=r.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:e||0,stride:t||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return Oi()(o,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),Dd,J0,Id,rc,Q0,Nh,q0,tC,Lf,Qv,au,_f,Ff,nC,kW=(Dd={},Pn()(Dd,tt.gl.POINTS,"points"),Pn()(Dd,tt.gl.LINES,"lines"),Pn()(Dd,tt.gl.LINE_LOOP,"line loop"),Pn()(Dd,tt.gl.LINE_STRIP,"line strip"),Pn()(Dd,tt.gl.TRIANGLES,"triangles"),Pn()(Dd,tt.gl.TRIANGLE_FAN,"triangle fan"),Pn()(Dd,tt.gl.TRIANGLE_STRIP,"triangle strip"),Dd),MI=(J0={},Pn()(J0,tt.gl.STATIC_DRAW,"static"),Pn()(J0,tt.gl.DYNAMIC_DRAW,"dynamic"),Pn()(J0,tt.gl.STREAM_DRAW,"stream"),J0),VT=(Id={},Pn()(Id,tt.gl.BYTE,"int8"),Pn()(Id,tt.gl.UNSIGNED_INT,"int16"),Pn()(Id,tt.gl.INT,"int32"),Pn()(Id,tt.gl.UNSIGNED_BYTE,"uint8"),Pn()(Id,tt.gl.UNSIGNED_SHORT,"uint16"),Pn()(Id,tt.gl.UNSIGNED_INT,"uint32"),Pn()(Id,tt.gl.FLOAT,"float"),Id),DW=(rc={},Pn()(rc,tt.gl.ALPHA,"alpha"),Pn()(rc,tt.gl.LUMINANCE,"luminance"),Pn()(rc,tt.gl.LUMINANCE_ALPHA,"luminance alpha"),Pn()(rc,tt.gl.RGB,"rgb"),Pn()(rc,tt.gl.RGBA,"rgba"),Pn()(rc,tt.gl.RGBA4,"rgba4"),Pn()(rc,tt.gl.RGB5_A1,"rgb5 a1"),Pn()(rc,tt.gl.RGB565,"rgb565"),Pn()(rc,tt.gl.DEPTH_COMPONENT,"depth"),Pn()(rc,tt.gl.DEPTH_STENCIL,"depth stencil"),rc),IW=(Q0={},Pn()(Q0,tt.gl.DONT_CARE,"dont care"),Pn()(Q0,tt.gl.NICEST,"nice"),Pn()(Q0,tt.gl.FASTEST,"fast"),Q0),AI=(Nh={},Pn()(Nh,tt.gl.NEAREST,"nearest"),Pn()(Nh,tt.gl.LINEAR,"linear"),Pn()(Nh,tt.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),Pn()(Nh,tt.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Pn()(Nh,tt.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Pn()(Nh,tt.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Nh),PI=(q0={},Pn()(q0,tt.gl.REPEAT,"repeat"),Pn()(q0,tt.gl.CLAMP_TO_EDGE,"clamp"),Pn()(q0,tt.gl.MIRRORED_REPEAT,"mirror"),q0),RW=(tC={},Pn()(tC,tt.gl.NONE,"none"),Pn()(tC,tt.gl.BROWSER_DEFAULT_WEBGL,"browser"),tC),NW=(Lf={},Pn()(Lf,tt.gl.NEVER,"never"),Pn()(Lf,tt.gl.ALWAYS,"always"),Pn()(Lf,tt.gl.LESS,"less"),Pn()(Lf,tt.gl.LEQUAL,"lequal"),Pn()(Lf,tt.gl.GREATER,"greater"),Pn()(Lf,tt.gl.GEQUAL,"gequal"),Pn()(Lf,tt.gl.EQUAL,"equal"),Pn()(Lf,tt.gl.NOTEQUAL,"notequal"),Lf),kI=(Qv={},Pn()(Qv,tt.gl.FUNC_ADD,"add"),Pn()(Qv,tt.gl.MIN_EXT,"min"),Pn()(Qv,tt.gl.MAX_EXT,"max"),Pn()(Qv,tt.gl.FUNC_SUBTRACT,"subtract"),Pn()(Qv,tt.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Qv),rC=(au={},Pn()(au,tt.gl.ZERO,"zero"),Pn()(au,tt.gl.ONE,"one"),Pn()(au,tt.gl.SRC_COLOR,"src color"),Pn()(au,tt.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),Pn()(au,tt.gl.SRC_ALPHA,"src alpha"),Pn()(au,tt.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Pn()(au,tt.gl.DST_COLOR,"dst color"),Pn()(au,tt.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),Pn()(au,tt.gl.DST_ALPHA,"dst alpha"),Pn()(au,tt.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Pn()(au,tt.gl.CONSTANT_COLOR,"constant color"),Pn()(au,tt.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Pn()(au,tt.gl.CONSTANT_ALPHA,"constant alpha"),Pn()(au,tt.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Pn()(au,tt.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),au),jW=(_f={},Pn()(_f,tt.gl.NEVER,"never"),Pn()(_f,tt.gl.ALWAYS,"always"),Pn()(_f,tt.gl.LESS,"less"),Pn()(_f,tt.gl.LEQUAL,"lequal"),Pn()(_f,tt.gl.GREATER,"greater"),Pn()(_f,tt.gl.GEQUAL,"gequal"),Pn()(_f,tt.gl.EQUAL,"equal"),Pn()(_f,tt.gl.NOTEQUAL,"notequal"),_f),Cp=(Ff={},Pn()(Ff,tt.gl.ZERO,"zero"),Pn()(Ff,tt.gl.KEEP,"keep"),Pn()(Ff,tt.gl.REPLACE,"replace"),Pn()(Ff,tt.gl.INVERT,"invert"),Pn()(Ff,tt.gl.INCR,"increment"),Pn()(Ff,tt.gl.DECR,"decrement"),Pn()(Ff,tt.gl.INCR_WRAP,"increment wrap"),Pn()(Ff,tt.gl.DECR_WRAP,"decrement wrap"),Ff),LW=(nC={},Pn()(nC,tt.gl.FRONT,"front"),Pn()(nC,tt.gl.BACK,"back"),nC),_W=function(){function o(i,r){Ei()(this,o),this.buffer=void 0;var n=r.data,e=r.usage,t=r.type;this.buffer=i.buffer({data:n,usage:MI[e||tt.gl.STATIC_DRAW],type:VT[t||tt.gl.UNSIGNED_BYTE]})}return Oi()(o,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(r){var n=r.data,e=r.offset;this.buffer.subdata(n,e)}}]),o}(),FW=h("RIqP"),fs=h.n(FW),BW=9007199254740991,GW="[object Arguments]",zW="[object Array]",UW="[object Boolean]",VW="[object Date]",HW="[object Error]",WW="[object Function]",$W="[object Map]",XW="[object Number]",KW="[object Object]",YW="[object RegExp]",ZW="[object Set]",JW="[object String]",QW="[object WeakMap]",qW="[object ArrayBuffer]",e$="[object DataView]",t$="[object Float32Array]",n$="[object Float64Array]",r$="[object Int8Array]",a$="[object Int16Array]",i$="[object Int32Array]",o$="[object Uint8Array]",s$="[object Uint8ClampedArray]",u$="[object Uint16Array]",l$="[object Uint32Array]",wo={};wo[t$]=wo[n$]=wo[r$]=wo[a$]=wo[i$]=wo[o$]=wo[s$]=wo[u$]=wo[l$]=!0,wo[GW]=wo[zW]=wo[qW]=wo[UW]=wo[e$]=wo[VW]=wo[HW]=wo[WW]=wo[$W]=wo[XW]=wo[KW]=wo[YW]=wo[ZW]=wo[JW]=wo[QW]=!1;function Pq(o){return function(i){return o(i)}}var c$=Object.prototype,f$=c$.toString;function d$(o){return v$(o)&&h$(o.length)&&!!wo[f$.call(o)]}function h$(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=BW}function v$(o){return!!o&&Z0()(o)==="object"}var HT=d$;function DI(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function II(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?DI(Object(r),!0).forEach(function(n){Pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):DI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var g$=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,RI=0,aC=!1,p$=function(){function o(i,r){var n=this;Ei()(this,o),this.reGl=i,this.context=r,this.entity=Object(tt.createEntity)(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var e={};this.context.uniforms.forEach(function(l){var c=l.name,f=l.type,d=l.data,v=l.isReferer,p=l.storageClass;if(p===tt.STORAGE_CLASS.StorageBuffer){if(v)n.textureCache[c]={data:void 0},e["".concat(c,"Size")]=function(){return d.compiledBundle.context.output.textureSize};else{n.textureCache[c]=n.calcDataTexture(c,f,d);var y=n.textureCache[c],C=y.textureWidth,E=y.isOutput;e["".concat(c,"Size")]=[C,C],E&&(n.outputTextureName=c,n.context.needPingpong&&(n.outputTextureName="".concat(c,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(c,f,d)))}e[c]=function(){return aC&&console.log("[".concat(n.entity,"]: ").concat(c," ").concat(n.textureCache[c].id)),n.textureCache[c].texture}}else if(p===tt.STORAGE_CLASS.Uniform){if(d&&(Array.isArray(d)||HT(d))&&d.length>16)throw new Error("invalid data type ".concat(f));e[c]=function(){return l.data}}});var t=this.getOuputDataTexture(),a=t.textureWidth,s=t.texelCount;e.u_OutputTextureSize=[a,a],e.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var u={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:e,vert:g$,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(u)}return Oi()(o,[{key:"run",value:function(){var r=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){r.computeCommand()}),aC&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var i=rs()(Ua.a.mark(function n(){var e=this,t,a,s,u,l,c,f,d;return Ua.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){t=e.reGl.read()}),!t){p.next=6;break}if(a=this.getOuputDataTexture(),s=a.originalDataLength,u=a.elementsPerTexel,l=a.typedArrayConstructor,c=l===void 0?Float32Array:l,f=[],u!==4)for(d=0;d<t.length;d+=4)u===1?f.push(t[d]):u===2?f.push(t[d],t[d+1]):f.push(t[d],t[d+1],t[d+2]);else f=t;return p.abrupt("return",new c(f.slice(0,s)));case 6:return p.abrupt("return",new Float32Array);case 7:case"end":return p.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"confirmInput",value:function(r,n){var e;this.entity===r.entity?(this.dynamicPingpong=!0,e=this):e=r,this.textureCache[n].id=e.getOuputDataTexture().id,this.textureCache[n].texture=e.getOuputDataTexture().texture,aC&&console.log("[".concat(this.entity,"]: confirm input ").concat(n," from model ").concat(e.entity,", ").concat(e.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=this.context.uniforms.find(function(l){var c=l.name;return c===r});if(t){var a=this.calcDataTexture(r,t.type,n),s=a.texture,u=a.data;this.textureCache[r].data=u,this.textureCache[r].texture=s}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var r=this.context.output.name;this.textureCache[r].id=this.getOuputDataTexture().id,this.textureCache[r].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n,aC&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var r=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=r}},{key:"cloneDataTexture",value:function(r){var n=r.data,e=r.textureWidth;return II(II({},r),{},{id:RI++,texture:this.reGl.texture({width:e,height:e,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(r,n,e){var t=1;n===tt.AST_TOKEN_TYPES.Vector4FloatArray&&(t=4);for(var a=[],s=0;s<e.length;s+=t)t===1?a.push(e[s],0,0,0):t===2?a.push(e[s],e[s+1],0,0):t===3?a.push(e[s],e[s+1],e[s+2],0):t===4&&a.push(e[s],e[s+1],e[s+2],e[s+3]);var u=e.length,l=Math.ceil(u/t),c=Math.ceil(Math.sqrt(l)),f=c*c;l<f&&a.push.apply(a,fs()(new Array((f-l)*4).fill(0)));var d=this.reGl.texture({width:c,height:c,data:a,type:"float"});return{id:RI++,data:a,originalDataLength:u,typedArrayConstructor:HT(e)?e.constructor:void 0,textureWidth:c,texture:d,texelCount:l,elementsPerTexel:t,isOutput:r===this.context.output.name}}}]),o}(),m$=function(){function o(i,r){Ei()(this,o),this.elements=void 0;var n=r.data,e=r.usage,t=r.type,a=r.count;this.elements=i.elements({data:n,usage:MI[e||tt.gl.STATIC_DRAW],type:VT[t||tt.gl.UNSIGNED_BYTE],count:a})}return Oi()(o,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(r){var n=r.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),o}(),y$=function(){function o(i,r){Ei()(this,o),this.framebuffer=void 0;var n=r.width,e=r.height,t=r.color,a=r.colors,s=r.depth,u=r.stencil,l={width:n,height:e};Array.isArray(a)&&(l.colors=a.map(function(c){return c.get()})),t&&typeof t!="boolean"&&(l.color=t.get()),this.framebuffer=i.framebuffer(l)}return Oi()(o,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(r){var n=r.width,e=r.height;this.framebuffer.resize(n,e)}}]),o}();function b$(o){var i=Z0()(o);return o!=null&&(i==="object"||i==="function")}function ey(o){var i={};return Object.keys(o).forEach(function(r){WT(r,o[r],i,"")}),i}function WT(o,i,r,n){if(i===null||typeof i=="number"||typeof i=="boolean"||Array.isArray(i)&&typeof i[0]=="number"||HT(i)||i===""||i.resize!==void 0){r["".concat(n&&n+".").concat(o)]=i;return}b$(i)&&Object.keys(i).forEach(function(e){WT(e,i[e],r,"".concat(n&&n+".").concat(o))}),Array.isArray(i)&&i.forEach(function(e,t){Object.keys(e).forEach(function(a){WT(a,e[a],r,"".concat(n&&n+".").concat(o,"[").concat(t,"]"))})})}function NI(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function Ep(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?NI(Object(r),!0).forEach(function(n){Pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var C$=function(){function o(i,r){Ei()(this,o),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=i;var n=r.vs,e=r.fs,t=r.defines,a=r.attributes,s=r.uniforms,u=r.primitive,l=r.count,c=r.elements,f=r.depth,d=r.blend,v=r.stencil,p=r.cull,y=r.instances,C=r.scissor,E=r.viewport,w={};s&&(this.uniforms=ey(s),Object.keys(s).forEach(function(B){w[B]=i.prop(B)}));var x={};Object.keys(a).forEach(function(B){x[B]=a[B].get()});var N=t&&this.generateDefines(t)||"",j={attributes:x,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(N,`
`).concat(e),uniforms:w,vert:`
`.concat(N,`
`).concat(n),primitive:kW[u===void 0?tt.gl.TRIANGLES:u]};y&&(j.instances=y),l&&(j.count=l),c&&(j.elements=c.get()),C&&(j.scissor=C),E&&(j.viewport=E),this.initDepthDrawParams({depth:f},j),this.initBlendDrawParams({blend:d},j),this.initStencilDrawParams({stencil:v},j),this.initCullDrawParams({cull:p},j),this.drawCommand=i(j)}return Oi()(o,[{key:"addUniforms",value:function(r){this.uniforms=Ep(Ep({},this.uniforms),ey(r))}},{key:"draw",value:function(r){var n=Ep(Ep({},this.uniforms),ey(r.uniforms||{})),e={};Object.keys(n).forEach(function(t){var a=Z0()(n[t]);a==="boolean"||a==="number"||Array.isArray(n[t])||n[t].BYTES_PER_ELEMENT?e[t]=n[t]:a==="string"||(e[t]=n[t].get())}),this.drawCommand(e)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(r,n){var e=r.depth;e&&(n.depth={enable:e.enable===void 0?!0:!!e.enable,mask:e.mask===void 0?!0:!!e.mask,func:NW[e.func||tt.gl.LESS],range:e.range||[0,1]})}},{key:"initBlendDrawParams",value:function(r,n){var e=r.blend;if(e){var t=e.enable,a=e.func,s=e.equation,u=e.color,l=u===void 0?[0,0,0,0]:u;n.blend={enable:!!t,func:{srcRGB:rC[a&&a.srcRGB||tt.gl.SRC_ALPHA],srcAlpha:rC[a&&a.srcAlpha||tt.gl.SRC_ALPHA],dstRGB:rC[a&&a.dstRGB||tt.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:rC[a&&a.dstAlpha||tt.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:kI[s&&s.rgb||tt.gl.FUNC_ADD],alpha:kI[s&&s.alpha||tt.gl.FUNC_ADD]},color:l}}}},{key:"initStencilDrawParams",value:function(r,n){var e=r.stencil;if(e){var t=e.enable,a=e.mask,s=a===void 0?-1:a,u=e.func,l=u===void 0?{cmp:tt.gl.ALWAYS,ref:0,mask:-1}:u,c=e.opFront,f=c===void 0?{fail:tt.gl.KEEP,zfail:tt.gl.KEEP,zpass:tt.gl.KEEP}:c,d=e.opBack,v=d===void 0?{fail:tt.gl.KEEP,zfail:tt.gl.KEEP,zpass:tt.gl.KEEP}:d;n.stencil={enable:!!t,mask:s,func:Ep(Ep({},l),{},{cmp:jW[l.cmp]}),opFront:{fail:Cp[f.fail],zfail:Cp[f.zfail],zpass:Cp[f.zpass]},opBack:{fail:Cp[v.fail],zfail:Cp[v.zfail],zpass:Cp[v.zpass]}}}}},{key:"initCullDrawParams",value:function(r,n){var e=r.cull;if(e){var t=e.enable,a=e.face,s=a===void 0?tt.gl.BACK:a;n.cull={enable:!!t,face:LW[s]}}}},{key:"generateDefines",value:function(r){return Object.keys(r).map(function(n){return"#define ".concat(n," ").concat(Number(r[n]))}).join(`
`)}}]),o}(),E$=function(){function o(i,r){Ei()(this,o),this.texture=void 0,this.width=void 0,this.height=void 0;var n=r.data,e=r.type,t=e===void 0?tt.gl.UNSIGNED_BYTE:e,a=r.width,s=r.height,u=r.flipY,l=u===void 0?!1:u,c=r.format,f=c===void 0?tt.gl.RGBA:c,d=r.mipmap,v=d===void 0?!1:d,p=r.wrapS,y=p===void 0?tt.gl.CLAMP_TO_EDGE:p,C=r.wrapT,E=C===void 0?tt.gl.CLAMP_TO_EDGE:C,w=r.aniso,x=w===void 0?0:w,N=r.alignment,j=N===void 0?1:N,B=r.premultiplyAlpha,$=B===void 0?!1:B,Z=r.mag,fe=Z===void 0?tt.gl.NEAREST:Z,de=r.min,xe=de===void 0?tt.gl.NEAREST:de,Ae=r.colorSpace,Ye=Ae===void 0?tt.gl.BROWSER_DEFAULT_WEBGL:Ae;this.width=a,this.height=s;var rt={width:a,height:s,type:VT[t],format:DW[f],wrapS:PI[y],wrapT:PI[E],mag:AI[fe],min:AI[xe],alignment:j,flipY:l,colorSpace:RW[Ye],premultiplyAlpha:$,aniso:x};n&&(rt.data=n),typeof v=="number"?rt.mipmap=IW[v]:typeof v=="boolean"&&(rt.mipmap=v),this.texture=i.texture(rt)}return Oi()(o,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(r){var n=r.width,e=r.height;this.texture.resize(n,e),this.width=n,this.height=e}},{key:"destroy",value:function(){this.texture.destroy()}}]),o}(),jI,LI,_I,O$=(jI=Object(ya.injectable)(),jI(LI=(_I=function(){function o(){var i=this;Ei()(this,o),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var r=rs()(Ua.a.mark(function n(e){return Ua.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.uniforms){a.next=3;break}return a.next=3,Promise.all(Object.keys(e.uniforms).map(function(){var s=rs()(Ua.a.mark(function u(l){var c;return Ua.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(e.uniforms[l]&&e.uniforms[l].load!==void 0)){d.next=5;break}return d.next=3,e.uniforms[l].load();case 3:c=d.sent,e.uniforms[l]=c;case 5:case"end":return d.stop()}},u)}));return function(u){return s.apply(this,arguments)}}()));case 3:return a.abrupt("return",new C$(i.gl,e));case 4:case"end":return a.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new PW(i.gl,r)},this.createBuffer=function(r){return new _W(i.gl,r)},this.createElements=function(r){return new m$(i.gl,r)},this.createTexture2D=function(r){return new E$(i.gl,r)},this.createFramebuffer=function(r){return new y$(i.gl,r)},this.useFramebuffer=function(r,n){i.gl({framebuffer:r?r.get():null})(n)},this.createComputeModel=function(){var r=rs()(Ua.a.mark(function n(e){return Ua.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new p$(i.gl,e));case 1:case"end":return a.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.clear=function(r){var n=r.color,e=r.depth,t=r.stencil,a=r.framebuffer,s=a===void 0?null:a,u={color:n,depth:e,stencil:t};u.framebuffer=s===null?s:s.get(),i.gl.clear(u)},this.setScissor=function(r){i.gl&&i.gl._gl&&(r.enable&&r.box?(i.gl._gl.enable(tt.gl.SCISSOR_TEST),i.gl._gl.scissor(r.box.x,r.box.y,r.box.width,r.box.height)):i.gl._gl.disable(tt.gl.SCISSOR_TEST),i.gl._refresh())},this.viewport=function(r){var n=r.x,e=r.y,t=r.width,a=r.height;i.gl&&i.gl._gl&&(i.gl._gl.viewport(n,e,t,a),i.gl._refresh())},this.readPixels=function(r){var n=r.framebuffer,e=r.x,t=r.y,a=r.width,s=r.height,u={x:e,y:t,width:a,height:s};return n&&(u.framebuffer=n.get()),i.gl.read(u)},this.getCanvas=function(){return i.$canvas},this.getGLContext=function(){return i.gl._gl},this.destroy=function(){i.gl&&(i.gl.destroy(),i.inited=!1)}}return Oi()(o,[{key:"init",value:function(){var i=rs()(Ua.a.mark(function n(e){return Ua.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.inited){a.next=2;break}return a.abrupt("return");case 2:return this.$canvas=e.canvas,a.next=5,new Promise(function(s,u){AW()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(c,f){(c||!f)&&u(c),s(f)}})});case 5:this.gl=a.sent,this.inited=!0;case 7:case"end":return a.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),o}(),_I))||LI);function w$(){return typeof window!="undefined"}function x$(o,i,r,n){if(!!w$()){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",o),n&&(t.id=n),t.onload=function(){i&&i()},t.onerror=function(a){r&&r("Unable to load script '".concat(o,"'"),a)},e.appendChild(t)}}function S$(o,i){return new Promise(function(r,n){x$(o,function(){r()},function(e,t){n(t)})})}var iC,T$=function(){return $T.apply(this,arguments)};function $T(){return $T=rs()(Ua.a.mark(function o(){return Ua.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!iC){r.next=2;break}return r.abrupt("return",iC);case 2:return r.next=4,S$("https://preview.babylonjs.com/glslang/glslang.js");case 4:return iC=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),r.abrupt("return",iC);case 6:case"end":return r.stop()}},o)})),$T.apply(this,arguments)}var M$=function(){function o(i,r){Ei()(this,o),this.engine=i,this.options=r,this.attribute=void 0,this.buffer=void 0;var n=r,e=n.buffer,t=n.offset,a=n.stride,s=n.normalized,u=n.size,l=n.divisor,c=n.arrayStride,f=n.attributes,d=n.stepMode;this.buffer=e,this.attribute={buffer:e.get(),offset:t||0,stride:a||0,normalized:s||!1,divisor:l||0,arrayStride:c||0,attributes:f,stepMode:d||"vertex"},u&&(this.attribute.size=u)}return Oi()(o,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),Op=function(){function o(i,r){Ei()(this,o),this.engine=i,this.options=r,this.buffer=void 0;var n=r,e=n.data,t=n.usage,a=n.type;this.buffer=this.createBuffer(e instanceof Array?new Float32Array(e):e,t||Cr.BufferUsage.Vertex|Cr.BufferUsage.CopyDst)}return Oi()(o,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(r){var n=r.data,e=r.offset;this.setSubData(this.buffer,e,n instanceof Array?new Float32Array(n):n)}},{key:"createBuffer",value:function(r,n){var e=r.byteLength%4,t={size:r.byteLength+e,usage:n},a=this.engine.device.createBuffer(t);return this.setSubData(a,0,r),a}},{key:"setSubData",value:function(r,n,e){var t=tt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue;t.writeBuffer(r,n,e)}}]),o}();function A$(o){return typeof o=="number"}var P$=function(){function o(i,r){Ei()(this,o),this.engine=i,this.context=r,this.entity=Object(tt.createEntity)(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return Oi()(o,[{key:"init",value:function(){var i=rs()(Ua.a.mark(function n(){var e=this,t,a,s,u,l,c,f;return Ua.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:t=v.sent,a=t.computeStage,s=this.context.uniforms.filter(function(p){return p.storageClass===tt.STORAGE_CLASS.StorageBuffer}),u=this.context.uniforms.filter(function(p){return p.storageClass===tt.STORAGE_CLASS.Uniform}),l=u.length?1:0,this.bindGroupEntries=[],l&&(c=0,f=[],u.forEach(function(p){if(A$(p.data))e.uniformGPUBufferLayout.push({name:p.name,offset:c}),c+=4,f.push(p.data);else{var y,C=((y=p.data)===null||y===void 0?void 0:y.length)||1;C===3&&(C=4,p.data.push(0));var E=c/4%4;if(E>0){var w=4-E;if(C>1&&C<=w)C===2&&(w===3&&(c+=4,f.push(0)),f.push.apply(f,fs()(p.data)),e.uniformGPUBufferLayout.push({name:p.name,offset:c}));else{for(var x=0;x<w;x++)c+=4,f.push(0);f.push.apply(f,fs()(p.data)),e.uniformGPUBufferLayout.push({name:p.name,offset:c})}}c+=4*C}}),this.uniformBuffer=new Op(this.engine,{data:f instanceof Array?new Float32Array(f):f,usage:Cr.BufferUsage.Uniform|Cr.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),s.forEach(function(p){if(p.data!==null&&(p.type===tt.AST_TOKEN_TYPES.Vector4FloatArray||p.type===tt.AST_TOKEN_TYPES.FloatArray)){var y;p.name===e.context.output.name?(y=new Op(e.engine,{data:isFinite(Number(p.data))?[p.data]:p.data,usage:Cr.BufferUsage.Storage|Cr.BufferUsage.CopyDst|Cr.BufferUsage.CopySrc}),e.outputBuffer=y,e.context.output={name:p.name,length:isFinite(Number(p.data))?1:p.data.length,typedArrayConstructor:Float32Array,gpuBuffer:y.get()}):p.isReferer?p.data.model&&p.data.model.outputBuffer&&(y=p.data.model.outputBuffer):y=new Op(e.engine,{data:isFinite(Number(p.data))?[p.data]:p.data,usage:Cr.BufferUsage.Storage|Cr.BufferUsage.CopyDst|Cr.BufferUsage.CopySrc}),e.vertexBuffers[p.name]=y,e.bindGroupEntries.push({binding:l,resource:{name:p.name,refer:y?void 0:p.data,buffer:y?y.get():void 0}}),l++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:a}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return v.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"destroy",value:function(){var r=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(n){return r.vertexBuffers[n].destroy()})}},{key:"readData",value:function(){var i=rs()(Ua.a.mark(function n(){var e,t,a,s,u,l,c,f,d,v;return Ua.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(e=this.context.output,!e){y.next=16;break}if(t=e.length,a=e.typedArrayConstructor,s=e.gpuBuffer,!s){y.next=16;break}return u=t*a.BYTES_PER_ELEMENT,l=this.engine.device.createBuffer({size:u,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=this.engine.device.createCommandEncoder(),c.copyBufferToBuffer(s,0,l,0,u),f=tt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue,f.submit([c.finish()]),y.next=12,l.mapAsync(Cr.MapMode.Read);case 12:return d=l.getMappedRange(),v=new a(d.slice(0)),l.unmap(),y.abrupt("return",v);case 16:return y.abrupt("return",new Float32Array);case 17:case"end":return y.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"run",value:function(){if(this.engine.currentComputePass){var r;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(r=this.engine.currentComputePass).dispatch.apply(r,fs()(this.context.dispatch))}}},{key:"updateBuffer",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=this.vertexBuffers[r];t&&t.subData({data:n,offset:e})}},{key:"updateUniform",value:function(r,n){var e=this.uniformGPUBufferLayout.find(function(t){return t.name===r});e&&this.uniformBuffer.subData({data:Number.isFinite(n)?new Float32Array([n]):new Float32Array(n),offset:e.offset})}},{key:"confirmInput",value:function(r,n){var e=this.vertexBuffers[n],t=r.outputBuffer;if(e&&t&&e!==t){var a=this.engine.device.createCommandEncoder(),s=r.context.output,u=s.length,l=s.typedArrayConstructor,c=u*l.BYTES_PER_ELEMENT;a.copyBufferToBuffer(t.get(),0,e.get(),0,c);var f=tt.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue;f.submit([a.finish()])}}},{key:"compileShaderToSpirV",value:function(r,n,e){return this.compileRawShaderToSpirV(e+r,n)}},{key:"compileRawShaderToSpirV",value:function(r,n){return this.engine.glslang.compileGLSL(r,n)}},{key:"compileComputePipelineStageDescriptor",value:function(){var i=rs()(Ua.a.mark(function n(e){var t,a;return Ua.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e,a=`#version 450
`,this.engine.options.useWGSL){u.next=6;break}return u.next=5,this.compileShaderToSpirV(e,"compute",a);case 5:t=u.sent;case 6:return u.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:tt.isSafari}),entryPoint:"main"}});case 7:case"end":return u.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()}]),o}(),k$=function(){function o(i,r){Ei()(this,o),this.engine=i,this.options=r,this.indexCount=void 0,this.buffer=void 0;var n=r,e=n.data,t=n.usage,a=n.type,s=n.count;this.indexCount=s||0,this.buffer=new Op(i,{data:e instanceof Array?new Uint16Array(e):e,usage:Cr.BufferUsage.Index|Cr.BufferUsage.CopyDst})}return Oi()(o,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),D$=function(){function o(i,r){Ei()(this,o),this.engine=i,this.options=r,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var n=r,e=n.width,t=n.height,a=n.color,s=n.colors,u=n.depth,l=n.stencil;a&&(this.colorTexture=a),u&&(this.depthTexture=u)}return Oi()(o,[{key:"get",value:function(){var r,n;return{color:(r=this.colorTexture)===null||r===void 0?void 0:r.get(),depth:(n=this.depthTexture)===null||n===void 0?void 0:n.get()}}},{key:"destroy",value:function(){var r,n;(r=this.colorTexture)===null||r===void 0||r.destroy(),(n=this.depthTexture)===null||n===void 0||n.destroy()}},{key:"resize",value:function(r){var n=r.width,e=r.height;if(n!==this.width||e!==this.height){var t,a;(t=this.colorTexture)===null||t===void 0||t.resize({width:n,height:e}),(a=this.depthTexture)===null||a===void 0||a.resize({width:n,height:e})}this.width=n,this.height=e}}]),o}(),Rd,Bf,qv,Uu,wp,oC,ty,I$=(Rd={},Pn()(Rd,tt.gl.POINTS,Cr.PrimitiveTopology.PointList),Pn()(Rd,tt.gl.LINES,Cr.PrimitiveTopology.LineList),Pn()(Rd,tt.gl.LINE_LOOP,Cr.PrimitiveTopology.LineList),Pn()(Rd,tt.gl.LINE_STRIP,Cr.PrimitiveTopology.LineStrip),Pn()(Rd,tt.gl.TRIANGLES,Cr.PrimitiveTopology.TriangleList),Pn()(Rd,tt.gl.TRIANGLE_FAN,Cr.PrimitiveTopology.TriangleList),Pn()(Rd,tt.gl.TRIANGLE_STRIP,Cr.PrimitiveTopology.TriangleStrip),Rd),R$=(Bf={},Pn()(Bf,tt.gl.NEVER,Cr.CompareFunction.Never),Pn()(Bf,tt.gl.ALWAYS,Cr.CompareFunction.Always),Pn()(Bf,tt.gl.LESS,Cr.CompareFunction.Less),Pn()(Bf,tt.gl.LEQUAL,Cr.CompareFunction.LessEqual),Pn()(Bf,tt.gl.GREATER,Cr.CompareFunction.Greater),Pn()(Bf,tt.gl.GEQUAL,Cr.CompareFunction.GreaterEqual),Pn()(Bf,tt.gl.EQUAL,Cr.CompareFunction.Equal),Pn()(Bf,tt.gl.NOTEQUAL,Cr.CompareFunction.NotEqual),Bf),FI=(qv={},Pn()(qv,tt.gl.FUNC_ADD,Cr.BlendOperation.Add),Pn()(qv,tt.gl.MIN_EXT,Cr.BlendOperation.Min),Pn()(qv,tt.gl.MAX_EXT,Cr.BlendOperation.Max),Pn()(qv,tt.gl.FUNC_SUBTRACT,Cr.BlendOperation.Subtract),Pn()(qv,tt.gl.FUNC_REVERSE_SUBTRACT,Cr.BlendOperation.ReverseSubtract),qv),sC=(Uu={},Pn()(Uu,tt.gl.ZERO,Cr.BlendFactor.Zero),Pn()(Uu,tt.gl.ONE,Cr.BlendFactor.One),Pn()(Uu,tt.gl.SRC_COLOR,Cr.BlendFactor.SrcColor),Pn()(Uu,tt.gl.ONE_MINUS_SRC_COLOR,Cr.BlendFactor.OneMinusSrcColor),Pn()(Uu,tt.gl.SRC_ALPHA,Cr.BlendFactor.SrcAlpha),Pn()(Uu,tt.gl.ONE_MINUS_SRC_ALPHA,Cr.BlendFactor.OneMinusSrcAlpha),Pn()(Uu,tt.gl.DST_COLOR,Cr.BlendFactor.DstColor),Pn()(Uu,tt.gl.ONE_MINUS_DST_COLOR,Cr.BlendFactor.OneMinusDstColor),Pn()(Uu,tt.gl.DST_ALPHA,Cr.BlendFactor.DstAlpha),Pn()(Uu,tt.gl.ONE_MINUS_DST_ALPHA,Cr.BlendFactor.OneMinusDstAlpha),Pn()(Uu,tt.gl.CONSTANT_COLOR,Cr.BlendFactor.BlendColor),Pn()(Uu,tt.gl.ONE_MINUS_CONSTANT_COLOR,Cr.BlendFactor.OneMinusBlendColor),Pn()(Uu,tt.gl.SRC_ALPHA_SATURATE,Cr.BlendFactor.SrcAlphaSaturated),Uu),N$=(wp={},Pn()(wp,tt.gl.ALPHA,"r8unorm"),Pn()(wp,tt.gl.RGBA,"rgba8unorm"),Pn()(wp,tt.gl.DEPTH_COMPONENT,"depth32float"),Pn()(wp,tt.gl.DEPTH_STENCIL,"depth24plus-stencil8"),wp),BI=(oC={},Pn()(oC,tt.gl.NEAREST,"nearest"),Pn()(oC,tt.gl.LINEAR,"linear"),oC),XT=(ty={},Pn()(ty,tt.gl.REPEAT,"repeat"),Pn()(ty,tt.gl.CLAMP_TO_EDGE,"clamp-to-edge"),Pn()(ty,tt.gl.MIRRORED_REPEAT,"mirror-repeat"),ty);function j$(o){var i=o.cull;if(!i||!i.enable)return Cr.CullMode.None;if(i.face)return i.face===tt.gl.FRONT?Cr.CullMode.Front:Cr.CullMode.Back}function L$(o){var i=o.depth,r=o.stencil,n={compare:Cr.CompareFunction.Always,depthFailOp:Cr.StencilOperation.Keep,failOp:Cr.StencilOperation.Keep,passOp:Cr.StencilOperation.Keep};return{depthWriteEnabled:i&&i.enable,depthCompare:R$[(i==null?void 0:i.func)||tt.gl.ALWAYS],format:Cr.TextureFormat.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function _$(o,i){var r=o.blend;return[{format:i,alphaBlend:{srcFactor:sC[r&&r.func&&r.func.srcAlpha||tt.gl.ONE],dstFactor:sC[r&&r.func&&r.func.dstAlpha||tt.gl.ZERO],operation:FI[r&&r.equation&&r.equation.alpha||tt.gl.FUNC_ADD]},colorBlend:{srcFactor:sC[r&&r.func&&r.func.srcRGB||tt.gl.ONE],dstFactor:sC[r&&r.func&&r.func.dstRGB||tt.gl.ZERO],operation:FI[r&&r.equation&&r.equation.rgb||tt.gl.FUNC_ADD]},writeMask:Cr.ColorWrite.All}]}function GI(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function xp(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?GI(Object(r),!0).forEach(function(n){Pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}function F$(o){for(var i=0,r=arguments.length,n=new Array(r>1?r-1:0),e=1;e<r;e++)n[e-1]=arguments[e];for(var t=0,a=n;t<a.length;t++){var s=a[t];i+=s.length}for(var u=new o(i),l=0,c=0,f=n;c<f.length;c++){var d=f[c];u.set(d,l),l+=d.length}return u}var B$=function(){function o(i,r){Ei()(this,o),this.engine=i,this.options=r,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return Oi()(o,[{key:"init",value:function(){var i=rs()(Ua.a.mark(function n(){var e=this,t,a,s,u,l,c,f,d,v,p,y,C,E,w,x,N,j,B;return Ua.a.wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return t=this.options,a=t.vs,s=t.fs,u=t.attributes,l=t.uniforms,c=t.primitive,f=t.count,d=t.elements,v=t.depth,p=t.blend,y=t.stencil,C=t.cull,E=t.instances,Z.next=3,this.compilePipelineStageDescriptor(a,s,null);case 3:w=Z.sent,x=w.vertexStage,N=w.fragmentStage,l&&this.buildUniformBindGroup(l),d&&(this.indexBuffer=d.get(),this.indexCount=d.indexCount),j={vertexBuffers:Object.keys(u).map(function(fe,de){var xe=u[fe],Ae=xe.get(),Ye=Ae.arrayStride,rt=Ae.stepMode,je=Ae.attributes;return e.attributeCache[fe]=xe,{arrayStride:Ye,stepMode:rt,attributes:je}})},B={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:I$[c||tt.gl.TRIANGLES],rasterizationState:xp(xp({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:j$({cull:C})}),depthStencilState:L$({depth:v,stencil:y}),colorStates:_$({blend:p},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:x,fragmentStage:N,vertexState:j},this.renderPipeline=this.engine.device.createRenderPipeline(B);case 11:case"end":return Z.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"addUniforms",value:function(r){this.uniforms=xp(xp({},this.uniforms),ey(r))}},{key:"draw",value:function(r){var n=this,e=this.engine.getCurrentRenderPass(),t=xp(xp({},this.uniforms),ey(r.uniforms||{})),a=[];Object.keys(t).forEach(function(s){var u=Z0()(t[s]);if(u==="boolean"||u==="number"||Array.isArray(t[s])||t[s].BYTES_PER_ELEMENT){var l,c=(l=n.uniformGPUBufferLayout.find(function(E){var w=E.name;return w===s}))===null||l===void 0?void 0:l.offset;c!==null&&n.uniformBuffer.subData({data:t[s],offset:c})}else{var f,d=(f=n.uniformGPUBufferLayout.find(function(E){var w=E.name;return w===s}))===null||f===void 0?void 0:f.offset;if(d!==null){var v=t[s].get(),p=v.color||v,y=p.texture,C=p.sampler;C&&(a.push({binding:d,resource:C}),d++),a.push({binding:d,resource:y.createView()})}}}),this.uniformBuffer&&(a[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:a}),this.renderPipeline&&e.setPipeline(this.renderPipeline),e.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&e.setIndexBuffer(this.indexBuffer.get(),Cr.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(s,u){e.setVertexBuffer(0+u,n.attributeCache[s].get().buffer,0)}),this.indexBuffer?e.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):e.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var i=rs()(Ua.a.mark(function n(e,t,a){var s,u,l;return Ua.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=`#version 450
`,u=e,l=t,this.engine.options.useWGSL){f.next=10;break}return f.next=6,this.compileShaderToSpirV(e,"vertex",s);case 6:return u=f.sent,f.next=9,this.compileShaderToSpirV(t,"fragment",s);case 9:l=f.sent;case 10:return f.abrupt("return",this.createPipelineStageDescriptor(u,l));case 11:case"end":return f.stop()}},n,this)}));function r(n,e,t){return i.apply(this,arguments)}return r}()},{key:"compileShaderToSpirV",value:function(r,n,e){return this.compileRawShaderToSpirV(e+r,n)}},{key:"compileRawShaderToSpirV",value:function(r,n){return this.engine.glslang.compileGLSL(r,n)}},{key:"createPipelineStageDescriptor",value:function(r,n){return{vertexStage:{module:this.engine.device.createShaderModule({code:r,isWHLSL:tt.isSafari}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:tt.isSafari}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:Cr.FrontFace.CCW,cullMode:Cr.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(r){var n=this,e=0,t=F$.apply(void 0,[Float32Array].concat(fs()(Object.keys(r).map(function(u){return r[u]?(n.uniformGPUBufferLayout.push({name:u,offset:e}),e+=(r[u].length||1)*4,r[u]):[]})))),a=[],s=!1;t.length&&(s=!0,a.push({binding:0,visibility:Cr.ShaderStage.Fragment|Cr.ShaderStage.Vertex,type:Cr.BindingType.UniformBuffer})),Object.keys(r).filter(function(u){return r[u]===null}).forEach(function(u,l){n.uniformGPUBufferLayout.push({name:u,offset:l*2+(s?1:0)}),a.push({binding:l*2+(s?1:0),visibility:Cr.ShaderStage.Fragment,type:Cr.BindingType.Sampler},{binding:l*2+(s?1:0)+1,visibility:Cr.ShaderStage.Fragment,type:Cr.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:a}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),s&&(this.uniformBuffer=new Op(this.engine,{data:t instanceof Array?new Float32Array(t):t,usage:Cr.BufferUsage.Uniform|Cr.BufferUsage.CopyDst}))}}]),o}(),G$=function(){function o(i,r){Ei()(this,o),this.engine=i,this.options=r,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return Oi()(o,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(r){var n=r.width,e=r.height;(n!==this.width||e!==this.height)&&(this.destroy(),this.createTexture()),this.width=n,this.height=e}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var r=this.options,n=r.data,e=r.type,t=e===void 0?tt.gl.UNSIGNED_BYTE:e,a=r.width,s=r.height,u=r.flipY,l=u===void 0?!1:u,c=r.format,f=c===void 0?tt.gl.RGBA:c,d=r.mipmap,v=d===void 0?!1:d,p=r.wrapS,y=p===void 0?tt.gl.CLAMP_TO_EDGE:p,C=r.wrapT,E=C===void 0?tt.gl.CLAMP_TO_EDGE:C,w=r.aniso,x=w===void 0?0:w,N=r.alignment,j=N===void 0?1:N,B=r.premultiplyAlpha,$=B===void 0?!1:B,Z=r.mag,fe=Z===void 0?tt.gl.NEAREST:Z,de=r.min,xe=de===void 0?tt.gl.NEAREST:de,Ae=r.colorSpace,Ye=Ae===void 0?tt.gl.BROWSER_DEFAULT_WEBGL:Ae,rt=r.usage;this.width=a,this.height=s,this.texture=this.engine.device.createTexture({size:[a,s,1],mipLevelCount:1,sampleCount:1,dimension:Cr.TextureDimension.E2d,format:N$[f],usage:rt||Cr.TextureUsage.Sampled|Cr.TextureUsage.CopyDst}),(!rt||rt&Cr.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:XT[y],addressModeV:XT[E],addressModeW:XT[y],magFilter:BI[fe],minFilter:BI[xe],maxAnisotropy:x}))}}]),o}(),zI,UI,VI,z$=(zI=Object(ya.injectable)(),zI(UI=(VI=function(){function o(){var i=this;Ei()(this,o),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:Infinity,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(r){var n=r.framebuffer,e=r.color,t=r.depth,a=r.stencil;i.options.supportCompute&&i.startComputePass(),i.currentRenderTarget?(i.currentRenderPass&&i.endRenderTargetRenderPass(),i.startRenderTargetRenderPass(i.currentRenderTarget,e||null,!!t,!!a)):(i.mainColorAttachments[0].loadValue=e||Cr.LoadOp.Load,i.mainDepthAttachment.depthLoadValue=t||Cr.LoadOp.Load,i.mainDepthAttachment.stencilLoadValue=a?i.clearStencilValue:Cr.LoadOp.Load,i.mainRenderPass&&i.endMainRenderPass(),i.startMainRenderPass())},this.createModel=function(){var r=rs()(Ua.a.mark(function n(e){var t;return Ua.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=new B$(i,e),s.next=3,t.init();case 3:return s.abrupt("return",t);case 4:case"end":return s.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new M$(i,r)},this.createBuffer=function(r){return new Op(i,r)},this.createElements=function(r){return new k$(i,r)},this.createTexture2D=function(r){return new G$(i,r)},this.createFramebuffer=function(r){return new D$(i,r)},this.useFramebuffer=function(r,n){i.currentRenderTarget&&i.unbindFramebuffer(i.currentRenderTarget),i.currentRenderTarget=r,i.currentRenderTargetViewDescriptor={dimension:Cr.TextureViewDimension.E2d,arrayLayerCount:1,aspect:Cr.TextureAspect.All},i.currentRenderPass=null,n()},this.createComputeModel=function(){var r=rs()(Ua.a.mark(function n(e){var t;return Ua.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=new P$(i,e),s.next=3,t.init();case 3:return s.abrupt("return",t);case 4:case"end":return s.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.getCanvas=function(){return i.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(r){var n=r.x,e=r.y,t=r.width,a=r.height;if(!i.currentRenderPass)i.transientViewport={x:n,y:e,width:t,height:a};else if(i.transientViewport.x!==Infinity){var s=i.getCurrentRenderPass();s.setViewport(i.transientViewport.x,i.transientViewport.y,i.transientViewport.width,i.transientViewport.height,0,1)}else if(n!==i.cachedViewport.x||e!==i.cachedViewport.y||t!==i.cachedViewport.width||a!==i.cachedViewport.height){i.cachedViewport={x:n,y:e,width:t,height:a};var u=i.getCurrentRenderPass();u.setViewport(n,e,t,a,0,1)}},this.readPixels=function(r){throw new Error("Method not implemented.")}}return Oi()(o,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var i=rs()(Ua.a.mark(function n(e){return Ua.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,a.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return a.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()},{key:"setScissor",value:function(r){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(r){return r.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),tt.isSafari?this.device.getQueue().submit(this.commandBuffers.filter(function(r){return r})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(r){return r}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var i=rs()(Ua.a.mark(function n(){var e,t;return Ua.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,T$();case 2:return this.glslang=s.sent,s.next=5,(e=navigator)===null||e===void 0||(t=e.gpu)===null||t===void 0?void 0:t.requestAdapter();case 5:return this.adapter=s.sent,s.next=8,this.adapter.requestDevice();case 8:this.device=s.sent;case 9:case"end":return s.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(tt.isSafari?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:Cr.TextureUsage.OutputAttachment|Cr.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var r={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Cr.TextureDimension.E2d,format:Cr.TextureFormat.BGRA8Unorm,usage:Cr.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(r),this.mainColorAttachments=[{attachment:tt.isSafari?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:Cr.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:tt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:Cr.StoreOp.Store}];var n={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:Cr.TextureDimension.E2d,format:tt.isSafari?"depth32float-stencil8":Cr.TextureFormat.Depth24PlusStencil8,usage:Cr.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(n),this.mainDepthAttachment={attachment:tt.isSafari?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:Cr.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:Cr.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=tt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=tt.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(r,n,e){var t,a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=(t=r.get().color)===null||t===void 0?void 0:t.texture,l;u&&(l=u.createView(this.currentRenderTargetViewDescriptor));var c=(a=r.get().depth)===null||a===void 0?void 0:a.texture,f;c&&(f=c.createView());var d=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:l,loadValue:n!==null?n:Cr.LoadOp.Load,storeOp:Cr.StoreOp.Store}],depthStencilAttachment:c&&f?{attachment:f,depthLoadValue:e?this.clearDepthValue:Cr.LoadOp.Load,depthStoreOp:Cr.StoreOp.Store,stencilLoadValue:s?this.clearStencilValue:Cr.LoadOp.Load,stencilStoreOp:Cr.StoreOp.Store}:void 0});this.currentRenderPass=d,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(r){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=Infinity,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),o}(),VI))||UI),U$=h("J4zp"),V$=h.n(U$),H$=h("7W2i"),jh=h.n(H$),W$=h("a1gu"),Lh=h.n(W$),$$=h("Nsbk"),wu=h.n($$),HI,WI;function X$(o){var i=K$();return function(){var n=wu()(o),e;if(i){var t=wu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function K$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var KT=4/64,$I=1-KT*2,Y$=(HI=Object(ya.injectable)(),HI(WI=function(o){jh()(r,o);var i=X$(r);function r(){return Ei()(this,r),i.apply(this,arguments)}return Oi()(r,[{key:"onEntityCreated",value:function(){var e=this.config,t=e.widthSegments,a=t===void 0?1:t,s=e.heightSegments,u=s===void 0?1:s,l=e.depthSegments,c=l===void 0?1:l,f=e.halfExtents,d=f===void 0?Fn.d.fromValues(.5,.5,.5):f,v=a,p=u,y=c,C=V$()(d,3),E=C[0],w=C[1],x=C[2],N=[Fn.d.fromValues(-E,-w,x),Fn.d.fromValues(E,-w,x),Fn.d.fromValues(E,w,x),Fn.d.fromValues(-E,w,x),Fn.d.fromValues(E,-w,-x),Fn.d.fromValues(-E,-w,-x),Fn.d.fromValues(-E,w,-x),Fn.d.fromValues(E,w,-x)],j=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],B=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],$={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},Z=[],fe=[],de=[],xe=[],Ae=[],Ye=0,rt=function(hn,In,xn){var dn,tr,Ut,Rn;for(Ut=0;Ut<=In;Ut++)for(Rn=0;Rn<=xn;Rn++){var $n=Fn.d.create(),qr=Fn.d.create(),Kr=Fn.d.create(),fa=Fn.d.create();Fn.d.lerp($n,N[j[hn][0]],N[j[hn][1]],Ut/In),Fn.d.lerp(qr,N[j[hn][0]],N[j[hn][2]],Rn/xn),Fn.d.sub(Kr,qr,N[j[hn][0]]),Fn.d.add(fa,$n,Kr),dn=Ut/In,tr=Rn/xn,Z.push(fa[0],fa[1],fa[2]),fe.push(B[hn][0],B[hn][1],B[hn][2]),de.push(dn,tr),dn/=3,tr/=3,dn=dn*$I+KT,tr=tr*$I+KT,dn+=hn%3/3,tr+=Math.floor(hn/3)/3,xe.push(dn,tr),Ut<In&&Rn<xn&&(Ae.push(Ye+xn+1,Ye+1,Ye),Ae.push(Ye+xn+1,Ye+xn+2,Ye+1)),Ye++}};rt($.FRONT,v,p),rt($.BACK,v,p),rt($.TOP,v,y),rt($.BOTTOM,v,y),rt($.RIGHT,y,p),rt($.LEFT,y,p);var je=Object(tt.generateAABBFromVertices)(Z),ot=this.getComponent();ot.indices=Uint32Array.from(Ae),ot.aabb=je,ot.vertexCount=Ye,ot.attributes=[{dirty:!0,name:"position",data:Float32Array.from(Z),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(fe),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(de),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),r}(Ih))||WI);function Z$(o,i){if(!o&&!i)throw new Error("Please specify valid arguments for parameters a and b.");if(!i||i.length===0)return o;if(!o||o.length===0)return i;if(Object.prototype.toString.call(o)!==Object.prototype.toString.call(i))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var r=new o.constructor(o.length+i.length);return r.set(o),r.set(i,o.length),r}var XI,KI;function J$(o){var i=Q$();return function(){var n=wu()(o),e;if(i){var t=wu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function Q$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var q$=(XI=Object(ya.injectable)(),XI(KI=function(o){jh()(r,o);var i=J$(r);function r(){return Ei()(this,r),i.apply(this,arguments)}return Oi()(r,[{key:"onEntityCreated",value:function(){var e=this.config.geometries,t=e===void 0?[]:e,a=this.getComponent();a.aabb=new tt.AABB;var s=[],u=[],l=0;t.forEach(function(c){var f=c.aabb,d=c.indices,v=c.vertexCount,p=c.attributes;a.aabb.add(f),a.vertexCount+=v,d&&u.push.apply(u,fs()(d.map(function(y){return y+l}))),l+=v,p.forEach(function(y,C){s[C]?y.data&&(BT(y.data)?s[C].push(y.data):J3(y.data)?s[C].data=Z$(s[C].data,y.data):s[C].data=s[C].data.concat(y.data)):(s[C]=y,s[C].dirty=!0)})}),a.attributes=s,a.indices=Uint32Array.from(u),a.dirty=!0}}]),r}(Ih))||KI),YI,ZI;function eX(o){var i=tX();return function(){var n=wu()(o),e;if(i){var t=wu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function tX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var nX=(YI=Object(ya.injectable)(),YI(ZI=function(o){jh()(r,o);var i=eX(r);function r(){return Ei()(this,r),i.apply(this,arguments)}return Oi()(r,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.halfExtents,a=t===void 0?[.5,.5]:t,s=e.widthSegments,u=s===void 0?5:s,l=e.lengthSegments,c=l===void 0?5:l,f=[],d=[],v=[],p=[],y=0,C=0;C<=u;C++)for(var E=0;E<=c;E++){var w=-a[0]+2*a[0]*C/u,x=0,N=-(-a[1]+2*a[1]*E/c),j=C/u,B=E/c;f.push(w,x,N),d.push(0,1,0),v.push(j,B),C<u&&E<c&&(p.push(y+c+1,y+1,y),p.push(y+c+1,y+c+2,y+1)),y++}var $=Object(tt.generateAABBFromVertices)(f),Z=this.getComponent();Z.indices=Uint32Array.from(p),Z.aabb=$,Z.vertexCount=y,Z.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(v),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),r}(Ih))||ZI),JI,QI;function rX(o){var i=aX();return function(){var n=wu()(o),e;if(i){var t=wu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function aX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var iX=(JI=Object(ya.injectable)(),JI(QI=function(o){jh()(r,o);var i=rX(r);function r(){return Ei()(this,r),i.apply(this,arguments)}return Oi()(r,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.radius,a=t===void 0?.5:t,s=e.latitudeBands,u=s===void 0?16:s,l=e.longitudeBands,c=l===void 0?16:l,f=[],d=[],v=[],p=[],y=0;y<=u;y++)for(var C=y*Math.PI/u,E=Math.sin(C),w=Math.cos(C),x=0;x<=c;x++){var N=x*2*Math.PI/c-Math.PI/2,j=Math.sin(N),B=Math.cos(N),$=B*E,Z=w,fe=j*E,de=1-x/c,xe=1-y/u;f.push($*a,Z*a,fe*a),d.push($,Z,fe),v.push(de,xe)}for(var Ae=0;Ae<u;++Ae)for(var Ye=0;Ye<c;++Ye){var rt=Ae*(c+1)+Ye,je=rt+c+1;p.push(rt+1,je,rt),p.push(rt+1,je+1,je)}var ot=Object(tt.generateAABBFromVertices)(f),Ft=this.getComponent();Ft.indices=Uint32Array.from(p),Ft.aabb=ot,Ft.vertexCount=f.length/3,Ft.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(v),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),r}(Ih))||QI),oX=h("PJYZ"),Kc=h.n(oX),qI,eR,tR,nR,uC,rR,aR,iR;function sX(o){var i=uX();return function(){var n=wu()(o),e;if(i){var t=wu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function uX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var lX=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,cX=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,fX=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,dX=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,hX=(qI=Object(ya.injectable)(),eR=Object(ya.inject)(tt.IDENTIFIER.RenderEngine),tR=Object(ya.inject)(tt.IDENTIFIER.ShaderModuleService),qI(nR=(uC=(iR=function(o){jh()(r,o);var i=sX(r);function r(){var n;Ei()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),co()(n,"engine",rR,Kc()(n)),co()(n,"shaderModuleService",aR,Kc()(n)),n}return Oi()(r,[{key:"onEntityCreated",value:function(){var e=this.getComponent(),t=this.engine.supportWebGPU?dX:cX,a=this.engine.supportWebGPU?fX:lX;this.shaderModuleService.registerModule("material-basic",{vs:t,fs:a});var s=this.shaderModuleService.getModule("material-basic"),u=s.vs,l=s.fs,c=s.uniforms;e.vertexShaderGLSL=u,e.fragmentShaderGLSL=l,e.setUniform(c),this.config.map&&(e.setDefines({USE_UV:1,USE_MAP:1}),e.setUniform({map:this.config.map,uvTransform:Fn.a.create()}))}}]),r}(vI),iR),rR=fo()(uC.prototype,"engine",[eR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aR=fo()(uC.prototype,"shaderModuleService",[tR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uC))||nR),oR,sR,uR,lR,cR,fR,dR,ny,hR,vR,gR,pR;function vX(o){var i=gX();return function(){var n=wu()(o),e;if(i){var t=wu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function gX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var pX=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,mX=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,yX=(oR=Object(ya.injectable)(),sR=Object(ya.inject)(tt.IDENTIFIER.Systems),uR=Object(ya.named)(tt.IDENTIFIER.MaterialSystem),lR=Object(ya.inject)(tt.IDENTIFIER.Systems),cR=Object(ya.named)(tt.IDENTIFIER.GeometrySystem),fR=Object(ya.inject)(tt.IDENTIFIER.ShaderModuleService),oR(dR=(ny=(pR=function(o){jh()(r,o);var i=vX(r);function r(){var n;Ei()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),co()(n,"materialSystem",hR,Kc()(n)),co()(n,"geometrySystem",vR,Kc()(n)),co()(n,"shaderModuleService",gR,Kc()(n)),n}return Oi()(r,[{key:"onAttributeChanged",value:function(e){var t=e.name,a=e.data,s=this.getMeshComponent();s&&s.material&&(t==="gridColor"?(s.material.setUniform("u_GridColor",a),s.material.setUniform("u_GridColor2",a)):t==="gridSize"&&(s.material.setUniform("u_GridSize",a),s.material.setUniform("u_GridSize2",a)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:mX,fs:pX});var e=this.shaderModuleService.getModule("grid"),t=e.vs,a=e.fs,s=e.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:a});this.setMaterial(u);var l=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(l),u.setCull({enable:!1,face:tt.gl.BACK}).setDepth({enable:!0,func:tt.gl.LESS}),u.setUniform(s),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),l.setIndex([0,3,2,2,1,0]),l.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),r}(Rh),pR),hR=fo()(ny.prototype,"materialSystem",[sR,uR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vR=fo()(ny.prototype,"geometrySystem",[lR,cR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gR=fo()(ny.prototype,"shaderModuleService",[fR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny))||dR),lC=h("4hNi"),eg=h("kafh");function cC(o,i,r,n,e){ry(i,n,-e),ry(i,n,e),o.push(r),o.push(r)}function ry(o,i,r){o.push([[i[0],i[1]],r])}var bX=function(o,i,r){var n=[0,0],e=[0,0],t=[0,0],a=[0,0],s=-1,u=!1,l=null,c=Object(lC.create)(),f=r||0,d=3,v=[],p=[],y=[],C=[0,0];i&&(o=o.slice(),o.push(o[0]));for(var E=o.length,w=1;w<E;w++){var x=f,N=o[w-1],j=o[w],B=w<o.length-1?o[w+1]:null;if(C.push(w/E,w/E),Object(eg.direction)(n,j,N),l||(l=[0,0],Object(eg.normal)(l,n)),u||(u=!0,cC(p,v,N,l,1)),y.push([x+0,x+1,x+2]),!B)Object(eg.normal)(l,n),cC(p,v,j,l,1),y.push(s===1?[x,x+2,x+3]:[x+2,x+1,x+3]),f+=2;else{Object(eg.direction)(e,B,j);var $=Object(eg.computeMiter)(t,a,n,e,1),Z=Object(lC.dot)(t,l)<0?-1:1,fe=$>d;if(!isFinite($)){Object(eg.normal)(l,n),cC(p,v,j,l,1),y.push(s===1?[x,x+2,x+3]:[x+2,x+1,x+3]),f+=2,s=Z;continue}fe?($=d,C.push(w/E),ry(v,l,-Z),p.push(j),ry(v,a,$*Z),p.push(j),y.push(s!==-Z?[x,x+2,x+3]:[x+2,x+1,x+3]),y.push([x+2,x+3,x+4]),Object(eg.normal)(c,e),Object(lC.copy)(l,c),ry(v,l,-Z),p.push(j),f+=3):(cC(p,v,j,a,$),y.push(s===1?[x,x+2,x+3]:[x+2,x+1,x+3]),Z=-1,Object(lC.copy)(l,a),f+=2),s=Z}}return{normals:v,attrIndex:y,attrPos:p,attrCounters:C}},mR,yR,bR,CR,ER,OR,wR,ay,xR,SR,TR,MR;function CX(o){var i=EX();return function(){var n=wu()(o),e;if(i){var t=wu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function EX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var OX=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,wX=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,xX=(mR=Object(ya.injectable)(),yR=Object(ya.inject)(tt.IDENTIFIER.Systems),bR=Object(ya.named)(tt.IDENTIFIER.MaterialSystem),CR=Object(ya.inject)(tt.IDENTIFIER.Systems),ER=Object(ya.named)(tt.IDENTIFIER.GeometrySystem),OR=Object(ya.inject)(tt.IDENTIFIER.ShaderModuleService),mR(wR=(ay=(MR=function(o){jh()(r,o);var i=CX(r);function r(){var n;Ei()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),co()(n,"materialSystem",xR,Kc()(n)),co()(n,"geometrySystem",SR,Kc()(n)),co()(n,"shaderModuleService",TR,Kc()(n)),n.vertexCount=void 0,n}return Oi()(r,[{key:"onAttributeChanged",value:function(e){var t=e.name,a=e.data,s=this.getMeshComponent();if(s&&s.material)switch(t){case"dashArray":s.material.setUniform("u_dash_array",a);break;case"dashOffset":s.material.setUniform("u_dash_offset",a);break;case"dashRatio":s.material.setUniform("u_dash_ratio",a);break;case"thickness":s.material.setUniform("u_thickness",a);break;case"color":var u=new Array(this.vertexCount).fill(void 0).map(function(){return a}).reduce(function(l,c){return[].concat(fs()(l),fs()(c))},[]);s.geometry.setAttribute("a_color",Float32Array.from(u),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var e=this;this.shaderModuleService.registerModule("line",{vs:wX,fs:OX});var t=this.shaderModuleService.getModule("line"),a=t.vs,s=t.fs,u=t.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:s}),c=bX(this.config.points,!1),f=c.normals,d=c.attrIndex,v=c.attrPos,p=c.attrCounters,y=v.length;this.vertexCount=y;var C=this.geometrySystem.createBufferGeometry({vertexCount:y});this.setMaterial(l),this.setGeometry(C),l.setCull({enable:!1,face:tt.gl.BACK}).setUniform(u),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var E=[],w=[];f.forEach(function(N){var j=N[0],B=N[1];E.push([j[0],j[1]]),w.push(B)}),C.setIndex(d.reduce(function(N,j){return[].concat(fs()(N),fs()(j))},[])),C.setAttribute("a_pos",Float32Array.from(v.reduce(function(N,j){return[].concat(fs()(N),fs()(j))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var x=new Array(y).fill(void 0).map(function(){return fs()(e.config.color)}).reduce(function(N,j){return[].concat(fs()(N),fs()(j))},[]);C.setAttribute("a_color",Float32Array.from(x),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),C.setAttribute("a_line_miter",Float32Array.from(w),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),C.setAttribute("a_line_normal",Float32Array.from(E.reduce(function(N,j){return[].concat(fs()(N),fs()(j))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),C.setAttribute("a_counters",Float32Array.from(p),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),r}(Rh),MR),xR=fo()(ay.prototype,"materialSystem",[yR,bR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SR=fo()(ay.prototype,"geometrySystem",[CR,ER],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),TR=fo()(ay.prototype,"shaderModuleService",[OR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ay))||wR);function SX(o){return[o+1&255,o+1>>8&255,o+1>>8>>8&255]}var AR,PR,kR,DR,IR,RR,NR,iy,jR,LR,_R,FR;function BR(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function TX(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?BR(Object(r),!0).forEach(function(n){Pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}function MX(o){var i=AX();return function(){var n=wu()(o),e;if(i){var t=wu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function AX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var PX=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,kX=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,DX=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],IX=(AR=Object(ya.injectable)(),PR=Object(ya.inject)(tt.IDENTIFIER.Systems),kR=Object(ya.named)(tt.IDENTIFIER.MaterialSystem),DR=Object(ya.inject)(tt.IDENTIFIER.Systems),IR=Object(ya.named)(tt.IDENTIFIER.GeometrySystem),RR=Object(ya.inject)(tt.IDENTIFIER.ShaderModuleService),AR(NR=(iy=(FR=function(o){jh()(r,o);var i=MX(r);function r(){var n;Ei()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),co()(n,"materialSystem",jR,Kc()(n)),co()(n,"geometrySystem",LR,Kc()(n)),co()(n,"shaderModuleService",_R,Kc()(n)),n}return Oi()(r,[{key:"onAttributeChanged",value:function(e){var t=e.name,a=e.data,s=this.getMeshComponent();s&&s.material&&(t==="strokeWidth"?s.material.setUniform("u_stroke_width",a):t==="strokeColor"?s.material.setUniform("u_stroke_color",a):t==="strokeOpacity"?s.material.setUniform("u_stroke_opacity",a):t==="opacity"?s.material.setUniform("u_opacity",a):t==="blur"&&s.material.setUniform("u_blur",a))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:kX,fs:PX});var e=this.shaderModuleService.getModule("grid"),t=e.vs,a=e.fs,s=e.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:a,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:tt.gl.SRC_ALPHA,dstRGB:tt.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});u.setUniform(TX({u_device_pixel_ratio:window.devicePixelRatio},s));var l=this.buildAttributes(),c=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:l.instancedOffsets.length/2,vertexCount:6});c.setIndex([0,2,1,0,3,2]),c.setAttribute("position",Float32Array.from(l.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),c.setAttribute("offset",Float32Array.from(l.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),c.setAttribute("color",Float32Array.from(l.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),c.setAttribute("size",Float32Array.from(l.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),c.setAttribute("shape",Float32Array.from(l.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),c.setAttribute("a_PickingColor",Float32Array.from(l.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(u),this.setGeometry(c)}},{key:"buildAttribute",value:function(e,t,a){var s,u,l,c;(s=t.instancedPickingColors).push.apply(s,fs()(SX(e.id||a))),t.instancedShapes.push(DX.indexOf(e.shape||"circle")),(u=t.instancedColors).push.apply(u,fs()(e.color||[1,0,0,1])),(l=t.instancedOffsets).push.apply(l,fs()(e.position||[0,0])),(c=t.instancedSizes).push.apply(c,fs()(e.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var e=this,t={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(a,s){e.buildAttribute(a,t,s)}):this.buildAttribute(this.config,t,0),t}}]),r}(Rh),FR),jR=fo()(iy.prototype,"materialSystem",[PR,kR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LR=fo()(iy.prototype,"geometrySystem",[DR,IR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_R=fo()(iy.prototype,"shaderModuleService",[RR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iy))||NR),GR,zR,UR,VR,HR,oy,WR,$R,XR,KR;function YR(o,i){var r;if(typeof Symbol=="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(r=RX(o))||i&&o&&typeof o.length=="number"){r&&(o=r);var n=0,e=function(){};return{s:e,n:function(){return n>=o.length?{done:!0}:{done:!1,value:o[n++]}},e:function(l){throw l},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t=!0,a=!1,s;return{s:function(){r=o[Symbol.iterator]()},n:function(){var l=r.next();return t=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!t&&r.return!=null&&r.return()}finally{if(a)throw s}}}}function RX(o,i){if(!!o){if(typeof o=="string")return ZR(o,i);var r=Object.prototype.toString.call(o).slice(8,-1);if(r==="Object"&&o.constructor&&(r=o.constructor.name),r==="Map"||r==="Set")return Array.from(o);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZR(o,i)}}function ZR(o,i){(i==null||i>o.length)&&(i=o.length);for(var r=0,n=new Array(i);r<i;r++)n[r]=o[r];return n}var NX=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,jX=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,LX=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,_X=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,FX=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,JR=(GR=Object(ya.injectable)(),zR=Object(ya.inject)(tt.IDENTIFIER.RenderEngine),UR=Object(ya.inject)(tt.IDENTIFIER.ShaderModuleService),VR=Object(ya.inject)(tt.IDENTIFIER.ConfigService),GR(HR=(oy=(KR=function(){function o(){Ei()(this,o),this.container=void 0,co()(this,"engine",WR,this),co()(this,"shaderModule",$R,this),co()(this,"configService",XR,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return Oi()(o,[{key:"init",value:function(){var i=rs()(Ua.a.mark(function n(){var e,t,a,s,u;return Ua.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:_X}),this.shaderModule.registerModule("uv.vert.main",{vs:FX}),this.shaderModule.registerModule("uv.frag.declaration",{fs:LX}),this.shaderModule.registerModule("map.frag.declaration",{fs:NX}),this.shaderModule.registerModule("map.frag.main",{fs:jX}),e=this.container.getAll(tt.IDENTIFIER.Systems),t=this.configService.get(),!t.canvas){c.next=30;break}return c.next=11,this.engine.init({canvas:t.canvas,swapChainFormat:Cr.TextureFormat.BGRA8Unorm,antialiasing:!1});case 11:a=YR(e),c.prev=12,a.s();case 14:if((s=a.n()).done){c.next=21;break}if(u=s.value,!u.initialize){c.next=19;break}return c.next=19,u.initialize();case 19:c.next=14;break;case 21:c.next=26;break;case 23:c.prev=23,c.t0=c.catch(12),a.e(c.t0);case 26:return c.prev=26,a.f(),c.finish(26);case 29:this.inited=!0;case 30:case"end":return c.stop()}},n,this,[[12,23,26,29]])}));function r(){return i.apply(this,arguments)}return r}()},{key:"render",value:function(){var i=rs()(Ua.a.mark(function n(){var e,t,a,s,u,l,c,f=arguments;return Ua.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(!this.inited||this.rendering)){v.next=2;break}return v.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(p){p()}),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(tt.IDENTIFIER.Systems),t=f.length,a=new Array(t),s=0;s<t;s++)a[s]=f[s];u=YR(e),v.prev=8,u.s();case 10:if((l=u.n()).done){v.next=17;break}if(c=l.value,!c.execute){v.next=15;break}return v.next=15,c.execute(a);case 15:v.next=10;break;case 17:v.next=22;break;case 19:v.prev=19,v.t0=v.catch(8),u.e(v.t0);case 22:return v.prev=22,u.f(),v.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return v.stop()}},n,this,[[8,19,22,25]])}));function r(){return i.apply(this,arguments)}return r}()},{key:"clear",value:function(r){var n=this;return this.inited?this.engine.clear(r):this.pendings.unshift(function(){n.engine.clear(r),n.pendings.shift()}),this}},{key:"setSize",value:function(r){var n=r.width,e=r.height,t=this.engine.getCanvas();return this.size={width:n,height:e},t.width=n,t.height=e,this}},{key:"getSize",value:function(){return this.size}}]),o}(),KR),WR=fo()(oy.prototype,"engine",[zR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$R=fo()(oy.prototype,"shaderModule",[UR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XR=fo()(oy.prototype,"configService",[VR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oy))||HR),QR,qR,eN,tN=(QR=Object(ya.injectable)(),QR(qR=(eN=function(){function o(){Ei()(this,o),this.entities=[]}return Oi()(o,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(r){return this.addEntity(r.getEntity()),this}},{key:"removeRenderable",value:function(r){return this.removeEntity(r.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(r){return this.entities.indexOf(r)===-1&&this.entities.push(r),this}},{key:"removeEntity",value:function(r){var n=this.entities.indexOf(r);return this.entities.splice(n,1),this}}]),o}(),eN))||qR),nN,rN,aN,iN=(nN=Object(ya.injectable)(),nN(rN=(aN=function(){function o(){Ei()(this,o),this.cache={}}return Oi()(o,[{key:"get",value:function(r){return this.cache[r]}},{key:"set",value:function(r,n){this.cache[r]=n}}]),o}(),aN))||rN),oN,sN,uN,lN,fC,cN,fN,dN;function hN(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function vN(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?hN(Object(r),!0).forEach(function(n){Pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var gN=(oN=Object(ya.injectable)(),sN=Object(ya.inject)(iN),uN=Object(ya.inject)(tt.IDENTIFIER.RenderEngine),oN(lN=(fC=(dN=function(){function o(){Ei()(this,o),co()(this,"textureCache",cN,this),co()(this,"engine",fN,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return Oi()(o,[{key:"setConfig",value:function(r){this.config=r}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var i=rs()(Ua.a.mark(function n(){var e=this;return Ua.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.config.url){a.next=4;break}return a.abrupt("return",new Promise(function(s,u){var l=e.textureCache.get(e.config.url);if(l)s(l);else{var c=new Image;c.crossOrigin="Anonymous",c.src=e.config.url,c.onload=function(){var f=e.engine.createTexture2D(vN(vN({},e.config),{},{data:c,width:c.width,height:c.height,flipY:!0}));e.textureCache.set(e.config.url,f),e.texture=f,e.loaded=!0,s(f)},c.onerror=function(){u()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),a.abrupt("return",this.texture);case 7:case"end":return a.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()}]),o}(),dN),cN=fo()(fC.prototype,"textureCache",[sN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fN=fo()(fC.prototype,"engine",[uN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fC))||lN),pN,mN,yN,bN,YT,CN,EN,ON=(pN=Object(ya.injectable)(),mN=Object(ya.inject)(tt.IDENTIFIER.Systems),yN=Object(ya.named)(tt.IDENTIFIER.RendererSystem),pN(bN=(YT=(EN=function(){function o(){Ei()(this,o),co()(this,"rendererSystem",CN,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return Oi()(o,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(r){return this.camera=r,this}},{key:"setScene",value:function(r){return this.scene=r,this}},{key:"setViewport",value:function(r){return this.viewport=r,this}},{key:"setClearColor",value:function(r){return this.clearColor=r,this}},{key:"pick",value:function(r){return this.rendererSystem.pick(r,this)}}]),o}(),EN),CN=fo()(YT.prototype,"rendererSystem",[mN,yN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YT))||bN),wN,xN,SN,ZT,TN,MN;function AN(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function BX(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?AN(Object(r),!0).forEach(function(n){Pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):AN(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var dC=(wN=Object(ya.injectable)(),xN=Object(ya.inject)(tt.IDENTIFIER.ConfigService),wN(SN=(ZT=(MN=function(){function o(){Ei()(this,o),co()(this,"configService",TN,this),this.container=void 0}return Oi()(o,[{key:"getEngine",value:function(){var i=rs()(Ua.a.mark(function n(){var e,t,a,s;return Ua.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.container.get(tt.IDENTIFIER.RenderEngine),t=this.configService.get(),a=t.canvas,s=t.engineOptions,l.next=4,e.init(BX({canvas:a||Z3(),swapChainFormat:Cr.TextureFormat.BGRA8Unorm,antialiasing:!1},s));case 4:return l.abrupt("return",e);case 5:case"end":return l.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"getTransformComponent",value:function(r){var n=this.container.get(tt.IDENTIFIER.TransformComponentManager);return n.getComponentByEntity(r)}},{key:"getMeshComponent",value:function(r){var n=this.container.get(tt.IDENTIFIER.MeshComponentManager);return n.getComponentByEntity(r)}},{key:"setConfig",value:function(r){this.configService.set(r)}},{key:"setContainer",value:function(r){this.container=r}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Object(tt.createEntity)()}},{key:"createScene",value:function(){return this.container.get(tN)}},{key:"createCamera",value:function(){return this.container.get(H3)}},{key:"createView",value:function(){return this.container.get(ON)}},{key:"createRenderable",value:function(r,n){var e=r?this.container.getNamed(tt.IDENTIFIER.Renderable,r):this.container.get(Rh),t=Object(tt.createEntity)();return e.setConfig(n||{}),e.setEntity(t),e}},{key:"createGeometry",value:function(r,n){var e=this.container.getNamed(tt.IDENTIFIER.Geometry,r),t=Object(tt.createEntity)();return e.setConfig(n||{}),e.setEntity(t),e.getComponent()}},{key:"createMaterial",value:function(r,n){var e=this.container.getNamed(tt.IDENTIFIER.Material,r),t=Object(tt.createEntity)();return e.setConfig(n||{}),e.setEntity(t,r),e.getComponent()}},{key:"createTexture2D",value:function(r){var n=this.container.get(gN);return n.setConfig(r),n}},{key:"createBufferGeometry",value:function(r){var n=this.container.getNamed(tt.IDENTIFIER.Systems,tt.IDENTIFIER.GeometrySystem);return n.createBufferGeometry(r)}},{key:"createInstancedBufferGeometry",value:function(r){var n=this.container.getNamed(tt.IDENTIFIER.Systems,tt.IDENTIFIER.GeometrySystem);return n.createInstancedBufferGeometry(r)}},{key:"createShaderMaterial",value:function(r){var n=this.container.getNamed(tt.IDENTIFIER.Systems,tt.IDENTIFIER.MaterialSystem);return n.createShaderMaterial(r)}},{key:"createKernel",value:function(r){var n=this.container.get(sI);return typeof r=="string"?n.setBundle(JSON.parse(r)):n.setBundle(r),n.init(),n}},{key:"createRenderer",value:function(){var r=this.container.get(JR);return r.container=this.container,r.init(),r}},{key:"destroy",value:function(){var r=this.container.getAll(tt.IDENTIFIER.Systems);r.forEach(function(t){t.tearDown&&t.tearDown()});var n=this.container.get(tt.IDENTIFIER.RenderEngine);n.destroy();var e=this.container.get(tt.IDENTIFIER.InteractorService);e.destroy()}}],[{key:"create",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Object(tt.createWorldContainer)(),e=navigator.gpu?z$:O$;n.isBound(tt.IDENTIFIER.RenderEngine)||n.bind(tt.IDENTIFIER.RenderEngine).to(e).inSingletonScope(),n.bind(JR).toSelf(),n.bind(sI).toSelf(),n.bind(Rh).toSelf(),n.bind(ON).toSelf(),n.bind(H3).toSelf(),n.bind(tN).toSelf(),n.bind(o).toSelf(),n.bind(iN).toSelf(),n.bind(gN).toSelf(),n.bind(tt.IDENTIFIER.Geometry).to(Y$).whenTargetNamed(Ih.BOX),n.bind(tt.IDENTIFIER.Geometry).to(iX).whenTargetNamed(Ih.SPHERE),n.bind(tt.IDENTIFIER.Geometry).to(nX).whenTargetNamed(Ih.PLANE),n.bind(tt.IDENTIFIER.Geometry).to(q$).whenTargetNamed(Ih.MERGED),n.bind(tt.IDENTIFIER.Material).to(hX).whenTargetNamed(vI.BASIC),n.bind(tt.IDENTIFIER.Renderable).to(IX).whenTargetNamed(Rh.POINT),n.bind(tt.IDENTIFIER.Renderable).to(xX).whenTargetNamed(Rh.LINE),n.bind(tt.IDENTIFIER.Renderable).to(yX).whenTargetNamed(Rh.GRID);var t=n.get(o);return t.setContainer(n),t.setConfig(r),t}}]),o}(),MN),TN=fo()(ZT.prototype,"configService",[xN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZT))||SN),Sp=function(i,r){var n;return i?Ir(i)?n=function(){return i}:n=i:n=function(){return r||1},n},GX=function(i,r){var n=[],e=[],t={},a=0;for(a=0;a<i.length;a++){var s=i[a];t[s.id]=a,n.push(s.x),n.push(s.y),n.push(0),n.push(0),e.push([])}for(a=0;a<r.length;a++){var u=r[a],l=Ci(u,"source"),c=Ci(u,"target");e[t[l]].push(t[c]),e[t[c]].push(t[l])}var f=0;for(a=0;a<i.length;a++){var d=n.length,v=e[a],p=v.length;n[a*4+2]=d,n[a*4+3]=v.length,f=Math.max(f,v.length);for(var y=0;y<p;++y){var C=v[y];n.push(+C)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:f,array:new Float32Array(n)}},zX=function(i,r,n,e){var t=[],a=[],s={},u=0;for(u=0;u<i.length;u++){var l=i[u];s[l.id]=u,t.push(l.x),t.push(l.y),t.push(0),t.push(0),a.push([])}for(u=0;u<r.length;u++){var c=r[u],f=Ci(c,"source"),d=Ci(c,"target");a[s[f]].push(s[d]),a[s[f]].push(n(c)),a[s[f]].push(e(c)),a[s[f]].push(0),a[s[d]].push(s[f]),a[s[d]].push(n(c)),a[s[d]].push(e(c)),a[s[d]].push(0)}var v=0;for(u=0;u<i.length;u++){var p=t.length,y=a[u],C=y.length;t[u*4+2]=p+1048576*C/4,t[u*4+3]=0,v=Math.max(v,C/4);for(var E=0;E<C;++E){var w=y[E];t.push(+w)}}for(;t.length%4!=0;)t.push(0);return{maxEdgePerVetex:v,array:new Float32Array(t)}},UX=function(i,r){var n=[],e=i.length,t={};return r.forEach(function(a){i.forEach(function(s,u){if(t[a[s]]===void 0&&(t[a[s]]=Object.keys(t).length),n.push(t[a[s]]),u===e-1)for(;n.length%4!=0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(t).length}},PN=function(i){for(var r=[],n=i.length,e=i[0].length,t=function(u){i.forEach(function(l,c){if(r.push(l[u]),c===n-1)for(;r.length%4!=0;)r.push(0)})},a=0;a<e;a++)t(a);return new Float32Array(r)},kq=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,VX='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Dq=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,HX='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}',hC=function(o,i,r,n){function e(t){return t instanceof r?t:new r(function(a){a(t)})}return new(r||(r=Promise))(function(t,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?t(c.value):e(c.value).then(s,u)}l((n=n.apply(o,i||[])).next())})},WX=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return hC(this,void 0,void 0,Object(D.a)().mark(function e(){var t=this,a,s,u,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a=this,s=a.nodes,!(!s||s.length===0)){d.next=5;break}return a.onLayoutEnd&&a.onLayoutEnd(),d.abrupt("return");case 5:if(!a.width&&typeof window!="undefined"&&(a.width=window.innerWidth),!a.height&&typeof window!="undefined"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]),u=a.center,s.length!==1){d.next=14;break}return s[0].x=u[0],s[0].y=u[1],a.onLayoutEnd&&a.onLayoutEnd(),d.abrupt("return");case 14:return l={},c={},s.forEach(function(v,p){Ir(v.x)||(v.x=Math.random()*t.width),Ir(v.y)||(v.y=Math.random()*t.height),l[v.id]=v,c[v.id]=p}),a.nodeMap=l,a.nodeIdxMap=c,d.next=21,a.run();case 21:case"end":return d.stop()}},e,this)}))}},{key:"executeWithWorker",value:function(e,t){return hC(this,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u,l,c,f,d;return Object(D.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(u=this,l=u.nodes,c=u.center,!(!l||l.length===0)){p.next=5;break}return p.abrupt("return");case 5:if(l.length!==1){p.next=9;break}return l[0].x=c[0],l[0].y=c[1],p.abrupt("return");case 9:return f={},d={},l.forEach(function(y,C){Ir(y.x)||(y.x=Math.random()*s.width),Ir(y.y)||(y.y=Math.random()*s.height),f[y.id]=y,d[y.id]=C}),u.nodeMap=f,u.nodeIdxMap=d,p.next=16,u.run(e,t);case 16:case"end":return p.stop()}},a,this)}))}},{key:"run",value:function(e,t){return hC(this,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u,l,c,f,d,v,p,y,C,E,w,x,N,j,B,$,Z,fe,de,xe,Ae,Ye,rt,je,ot,Ft;return Object(D.a)().wrap(function(In){for(;;)switch(In.prev=In.next){case 0:for(u=this,l=u.nodes,c=u.edges,f=u.maxIteration,d=u.center,v=u.height*u.width,p=Math.sqrt(v)/10,y=v/(l.length+1),C=Math.sqrt(y),E=u.speed,w=u.clustering,x=UX([u.clusterField],l),N=x.array,j=x.count,l.forEach(function(xn,dn){var tr=0,Ut=0;Ir(xn.fx)&&Ir(xn.fy)&&(tr=xn.fx||.001,Ut=xn.fy||.001),N[4*dn+1]=tr,N[4*dn+2]=Ut}),B=l.length,$=GX(l,c),Z=$.maxEdgePerVetex,fe=$.array,de=u.workerEnabled,de?xe=dC.create({canvas:e,engineOptions:{supportCompute:!0}}):xe=dC.create({engineOptions:{supportCompute:!0}}),Ae=u.onLayoutEnd,Ye=[],rt=0;rt<j;rt++)Ye.push(0,0,0,0);return je=xe.createKernel(VX).setDispatch([B,1,1]).setBinding({u_Data:fe,u_K:C,u_K2:y,u_Gravity:u.gravity,u_ClusterGravity:u.clusterGravity||u.gravity||1,u_Speed:E,u_MaxDisplace:p,u_Clustering:w?1:0,u_Center:d,u_AttributeArray:N,u_ClusterCenters:Ye,MAX_EDGE_PER_VERTEX:Z,VERTEX_COUNT:B}),w&&(ot=xe.createKernel(HX).setDispatch([j,1,1]).setBinding({u_Data:fe,u_NodeAttributes:N,u_ClusterCenters:Ye,VERTEX_COUNT:B,CLUSTER_COUNT:j})),Ft=function(){return hC(s,void 0,void 0,Object(D.a)().mark(function dn(){var tr,Ut;return Object(D.a)().wrap(function($n){for(;;)switch($n.prev=$n.next){case 0:tr=0;case 1:if(!(tr<f)){$n.next=13;break}return $n.next=4,je.execute();case 4:if(!w){$n.next=9;break}return ot.setBinding({u_Data:je}),$n.next=8,ot.execute();case 8:je.setBinding({u_ClusterCenters:ot});case 9:je.setBinding({u_MaxDisplace:p*=.99});case 10:tr++,$n.next=1;break;case 13:return $n.next=15,je.getOutput();case 15:Ut=$n.sent,e?t.postMessage({type:gT.GPUEND,vertexEdgeData:Ut}):l.forEach(function(qr,Kr){var fa=Ut[4*Kr],ba=Ut[4*Kr+1];qr.x=fa,qr.y=ba}),Ae&&Ae();case 18:case"end":return $n.stop()}},dn)}))},In.next=25,Ft();case 25:case"end":return In.stop()}},a,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}]),r}(Ou),Iq=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,$X='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Rq=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,XX='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}',JT=function(o,i,r,n){function e(t){return t instanceof r?t:new r(function(a){a(t)})}return new(r||(r=Promise))(function(t,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?t(c.value):e(c.value).then(s,u)}l((n=n.apply(o,i||[])).next())})},KX=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return JT(this,void 0,void 0,Object(D.a)().mark(function e(){var t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=this,a=t.nodes,!(!a||a.length===0)){f.next=5;break}return t.onLayoutEnd&&t.onLayoutEnd(),f.abrupt("return");case 5:if(!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),s=t.center,a.length!==1){f.next=14;break}return a[0].x=s[0],a[0].y=s[1],t.onLayoutEnd&&t.onLayoutEnd(),f.abrupt("return");case 14:return u={},l={},a.forEach(function(d,v){Ir(d.x)||(d.x=Math.random()*t.width),Ir(d.y)||(d.y=Math.random()*t.height),u[d.id]=d,l[d.id]=v}),t.nodeMap=u,t.nodeIdxMap=l,t.nodeStrength=Sp(t.nodeStrength,1),t.edgeStrength=Sp(t.edgeStrength,1),f.next=23,t.run();case 23:case"end":return f.stop()}},e,this)}))}},{key:"executeWithWorker",value:function(e,t){var a=this,s=a.nodes,u=a.center;if(!(!s||s.length===0)){if(s.length===1){s[0].x=u[0],s[0].y=u[1];return}var l={},c={};s.forEach(function(f,d){Ir(f.x)||(f.x=Math.random()*a.width),Ir(f.y)||(f.y=Math.random()*a.height),l[f.id]=f,c[f.id]=d}),a.nodeMap=l,a.nodeIdxMap=c,a.nodeStrength=Sp(a.nodeStrength,1),a.edgeStrength=Sp(a.edgeStrength,1),a.run(e,t)}}},{key:"run",value:function(e,t){return JT(this,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u,l,c,f,d,v,p,y,C,E,w,x,N,j,B,$,Z,fe,de,xe,Ae,Ye,rt,je,ot,Ft,hn;return Object(D.a)().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:for(u=this,l=u.nodes,c=u.edges,f=u.maxIteration,!u.width&&typeof window!="undefined"&&(u.width=window.innerWidth),!u.height&&typeof window!="undefined"&&(u.height=window.innerHeight),d=l.length,u.linkDistance=Sp(u.linkDistance),u.edgeStrength=Sp(u.edgeStrength),v=zX(l,c,u.linkDistance,u.edgeStrength),p=v.maxEdgePerVetex,y=v.array,u.degrees=H0(l.length,u.nodeIdxMap,c),C=[],E=[],w=[],x=[],N=[],j=[],B=[],u.getMass||(u.getMass=function(dn){return u.degrees[u.nodeIdxMap[dn.id]]||1}),$=u.gravity,Z=u.center,l.forEach(function(dn,tr){C.push(u.getMass(dn)),E.push(u.nodeStrength(dn)),u.degrees[tr]||(u.degrees[tr]=0);var Ut=[Z[0],Z[1],$];if(u.getCenter){var Rn=u.getCenter(dn,u.degrees[tr]);Rn&&Ir(Rn[0])&&Ir(Rn[1])&&Ir(Rn[2])&&(Ut=Rn)}w.push(Ut[0]),x.push(Ut[1]),N.push(Ut[2]),Ir(dn.fx)&&Ir(dn.fy)?(j.push(dn.fx||.001),B.push(dn.fy||.001)):(j.push(0),B.push(0))}),fe=PN([C,u.degrees,E,j]),de=PN([w,x,N,B]),xe=u.workerEnabled,xe?Ae=dC.create({canvas:e,engineOptions:{supportCompute:!0}}):Ae=dC.create({engineOptions:{supportCompute:!0}}),Ye=u.onLayoutEnd,rt=[],y.forEach(function(dn){rt.push(dn)}),je=0;je<4;je++)rt.push(0);return ot=Ae.createKernel($X).setDispatch([d,1,1]).setBinding({u_Data:y,u_damping:u.damping,u_maxSpeed:u.maxSpeed,u_minMovement:u.minMovement,u_coulombDisScale:u.coulombDisScale,u_factor:u.factor,u_NodeAttributeArray1:fe,u_NodeAttributeArray2:de,MAX_EDGE_PER_VERTEX:p,VERTEX_COUNT:d,u_AveMovement:rt,u_interval:u.interval}),Ft=Ae.createKernel(XX).setDispatch([1,1,1]).setBinding({u_Data:y,VERTEX_COUNT:d,u_AveMovement:[0,0,0,0]}),hn=function(){return JT(s,void 0,void 0,Object(D.a)().mark(function tr(){var Ut,Rn,$n;return Object(D.a)().wrap(function(Kr){for(;;)switch(Kr.prev=Kr.next){case 0:Ut=0;case 1:if(!(Ut<f)){Kr.next=12;break}return Kr.next=4,ot.execute();case 4:return Ft.setBinding({u_Data:ot}),Kr.next=7,Ft.execute();case 7:Rn=Math.max(.02,u.interval-Ut*.002),ot.setBinding({u_interval:Rn,u_AveMovement:Ft});case 9:Ut++,Kr.next=1;break;case 12:return Kr.next=14,ot.getOutput();case 14:$n=Kr.sent,e?t.postMessage({type:gT.GPUEND,vertexEdgeData:$n}):l.forEach(function(fa,ba){var qi=$n[4*ba],No=$n[4*ba+1];fa.x=qi,fa.y=No}),Ye&&Ye();case 17:case"end":return Kr.stop()}},tr)}))},xn.next=35,hn();case 35:case"end":return xn.stop()}},a,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}]),r}(Ou),YX=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.center;if(e.comboTree={id:"comboTreeRoot",depth:-1,children:e.comboTrees},!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}if(t.length===1){t[0].x=a[0],t[0].y=a[1],e.onLayoutEnd&&e.onLayoutEnd();return}e.initVals(),e.run(),e.onLayoutEnd&&e.onLayoutEnd()}},{key:"run",value:function(){var e=this,t=e.nodes,a=e.previousLayouted?e.maxIteration/5:e.maxIteration;!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);var s=e.center,u=e.velocityDecay,l=e.comboMap;e.previousLayouted||e.initPos(l);for(var c=function(y){var C=[];t.forEach(function(E,w){C[w]={x:0,y:0}}),e.applyCalculate(C),e.applyComboCenterForce(C),t.forEach(function(E,w){!Ir(E.x)||!Ir(E.y)||(E.x+=C[w].x*u,E.y+=C[w].y*u)}),e.alpha+=(e.alphaTarget-e.alpha)*e.alphaDecay,e.onTick()},f=0;f<a;f++)c(f);var d=[0,0];t.forEach(function(p){!Ir(p.x)||!Ir(p.y)||(d[0]+=p.x,d[1]+=p.y)}),d[0]/=t.length,d[1]/=t.length;var v=[s[0]-d[0],s[1]-d[1]];t.forEach(function(p,y){!Ir(p.x)||!Ir(p.y)||(p.x+=v[0],p.y+=v[1])}),e.combos.forEach(function(p){var y=l[p.id];y&&y.empty&&(p.x=y.cx||p.x,p.y=y.cy||p.y)}),e.previousLayouted=!0}},{key:"initVals",value:function(){var e=this,t=e.edges,a=e.nodes,s=e.combos,u={},l={},c={};a.forEach(function(tr,Ut){l[tr.id]=tr,c[tr.id]=Ut}),e.nodeMap=l,e.indexMap=c;var f={};s.forEach(function(tr){f[tr.id]=tr}),e.oriComboMap=f,e.comboMap=e.getComboMap();var d=e.preventOverlap;e.preventComboOverlap=e.preventComboOverlap||d,e.preventNodeOverlap=e.preventNodeOverlap||d;var v=e.collideStrength;v&&(e.comboCollideStrength=v,e.nodeCollideStrength=v),e.comboCollideStrength=e.comboCollideStrength?e.comboCollideStrength:0,e.nodeCollideStrength=e.nodeCollideStrength?e.nodeCollideStrength:0;for(var p=0;p<t.length;++p){var y=Ci(t[p],"source"),C=Ci(t[p],"target");u[y]?u[y]++:u[y]=1,u[C]?u[C]++:u[C]=1}for(var E=[],w=0;w<t.length;++w){var x=Ci(t[w],"source"),N=Ci(t[w],"target");E[w]=u[x]/(u[x]+u[N])}this.bias=E;var j=e.nodeSize,B=e.nodeSpacing,$,Z;if(Ir(B)?Z=function(){return B}:Ah(B)?Z=B:Z=function(){return 0},this.nodeSpacing=Z,!j)$=function(Ut){if(Ut.size){if(ru(Ut.size)){var Rn=Ut.size[0]>Ut.size[1]?Ut.size[0]:Ut.size[1];return Rn/2}if(jf(Ut.size)){var $n=Ut.size.width>Ut.size.height?Ut.size.width:Ut.size.height;return $n/2}return Ut.size/2}return 10};else if(Ah(j))$=function(Ut){return j(Ut)};else if(ru(j)){var fe=j[0]>j[1]?j[0]:j[1],de=fe/2;$=function(Ut){return de}}else{var xe=j/2;$=function(Ut){return xe}}this.nodeSize=$;var Ae=e.comboSpacing,Ye;Ir(Ae)?Ye=function(){return Ae}:Ah(Ae)?Ye=Ae:Ye=function(){return 0},this.comboSpacing=Ye;var rt=e.comboPadding,je;Ir(rt)?je=function(){return rt}:ru(rt)?je=function(){return Math.max.apply(null,rt)}:Ah(rt)?je=rt:je=function(){return 0},this.comboPadding=je;var ot=this.linkDistance,Ft;ot||(ot=10),Ir(ot)?Ft=function(Ut){return ot}:Ft=ot,this.linkDistance=Ft;var hn=this.edgeStrength,In;hn||(hn=1),Ir(hn)?In=function(Ut){return hn}:In=hn,this.edgeStrength=In;var xn=this.nodeStrength,dn;xn||(xn=30),Ir(xn)?dn=function(Ut){return xn}:dn=xn,this.nodeStrength=dn}},{key:"initPos",value:function(e){var t=this,a=t.nodes;a.forEach(function(s,u){var l=s.comboId,c=e[l];l&&c?(s.x=c.cx+100/(u+1),s.y=c.cy+100/(u+1)):(s.x=100/(u+1),s.y=100/(u+1))})}},{key:"getComboMap",value:function(){var e=this,t=e.nodeMap,a=e.comboTrees,s=e.oriComboMap,u={};return(a||[]).forEach(function(l){var c=[];z2(l,function(f){if(f.itemType==="node"||!s[f.id])return!0;if(u[f.id]===void 0){var d={id:f.id,name:f.id,cx:0,cy:0,count:0,depth:e.oriComboMap[f.id].depth||0,children:[]};u[f.id]=d}var v=f.children;v&&v.forEach(function(C){if(!u[C.id]&&!t[C.id])return!0;c.push(C)});var p=u[f.id];if(p.cx=0,p.cy=0,c.length===0){p.empty=!0;var y=s[f.id];p.cx=y.x,p.cy=y.y}return c.forEach(function(C){if(p.count++,C.itemType!=="node"){var E=u[C.id];Ir(E.cx)&&(p.cx+=E.cx),Ir(E.cy)&&(p.cy+=E.cy);return}var w=t[C.id];!w||(Ir(w.x)&&(p.cx+=w.x),Ir(w.y)&&(p.cy+=w.y))}),p.cx/=p.count||1,p.cy/=p.count||1,p.children=c,!0})}),u}},{key:"applyComboCenterForce",value:function(e){var t=this,a=t.gravity,s=t.comboGravity||a,u=this.alpha,l=t.comboTrees,c=t.indexMap,f=t.nodeMap,d=t.comboMap;(l||[]).forEach(function(v){z2(v,function(p){if(p.itemType==="node")return!0;var y=d[p.id];if(!y)return!0;var C=d[p.id],E=(C.depth+1)/10*.5,w=C.cx,x=C.cy;return C.cx=0,C.cy=0,C.children.forEach(function(N){if(N.itemType!=="node"){var j=d[N.id];j&&Ir(j.cx)&&(C.cx+=j.cx),j&&Ir(j.cy)&&(C.cy+=j.cy);return}var B=f[N.id],$=B.x-w||.005,Z=B.y-x||.005,fe=Math.sqrt($*$+Z*Z),de=c[B.id],xe=s*u/fe*E;e[de].x-=$*xe,e[de].y-=Z*xe,Ir(B.x)&&(C.cx+=B.x),Ir(B.y)&&(C.cy+=B.y)}),C.cx/=C.count||1,C.cy/=C.count||1,!0})})}},{key:"applyCalculate",value:function(e){var t=this,a=t.comboMap,s=t.nodes,u={};s.forEach(function(c,f){s.forEach(function(d,v){if(!(f<v)){var p=c.x-d.x||.005,y=c.y-d.y||.005,C=p*p+y*y,E=Math.sqrt(C);C<1&&(C=E),u["".concat(c.id,"-").concat(d.id)]={vx:p,vy:y,vl2:C,vl:E},u["".concat(d.id,"-").concat(c.id)]={vl2:C,vl:E,vx:-p,vy:-y}}})}),t.updateComboSizes(a),t.calRepulsive(e,u),t.calAttractive(e,u);var l=t.preventComboOverlap;l&&t.comboNonOverlapping(e,a)}},{key:"updateComboSizes",value:function(e){var t=this,a=t.comboTrees,s=t.nodeMap,u=t.nodeSize,l=t.comboSpacing,c=t.comboPadding;(a||[]).forEach(function(f){var d=[];z2(f,function(v){if(v.itemType==="node")return!0;var p=e[v.id];if(!p)return!1;var y=v.children;y&&y.forEach(function(w){!e[w.id]&&!s[w.id]||d.push(w)}),p.minX=Infinity,p.minY=Infinity,p.maxX=-Infinity,p.maxY=-Infinity,d.forEach(function(w){if(w.itemType!=="node")return!0;var x=s[w.id];if(!x)return!0;var N=u(x),j=x.x-N,B=x.y-N,$=x.x+N,Z=x.y+N;p.minX>j&&(p.minX=j),p.minY>B&&(p.minY=B),p.maxX<$&&(p.maxX=$),p.maxY<Z&&(p.maxY=Z)});var C=t.oriComboMap[v.id].size||10;ru(C)&&(C=C[0]);var E=Math.max(p.maxX-p.minX,p.maxY-p.minY,C);return p.r=E/2+l(p)/2+c(p),!0})})}},{key:"comboNonOverlapping",value:function(e,t){var a=this,s=a.comboTree,u=a.comboCollideStrength,l=a.indexMap,c=a.nodeMap;z2(s,function(f){if(!t[f.id]&&!c[f.id]&&f.id!=="comboTreeRoot")return!1;var d=f.children;return d&&d.length>1&&d.forEach(function(v,p){if(v.itemType==="node")return!1;var y=t[v.id];!y||d.forEach(function(C,E){if(p<=E||C.itemType==="node")return!1;var w=t[C.id];if(!w)return!1;var x=y.cx-w.cx||.005,N=y.cy-w.cy||.005,j=x*x+N*N,B=y.r||1,$=w.r||1,Z=B+$,fe=$*$,de=B*B;if(j<Z*Z){var xe=v.children;if(!xe||xe.length===0)return!1;var Ae=C.children;if(!Ae||Ae.length===0)return!1;var Ye=Math.sqrt(j),rt=(Z-Ye)/Ye*u,je=x*rt,ot=N*rt,Ft=fe/(de+fe),hn=1-Ft;xe.forEach(function(In){if(In.itemType!=="node")return!1;if(!!c[In.id]){var xn=l[In.id];Ae.forEach(function(dn){if(dn.itemType!=="node"||!c[dn.id])return!1;var tr=l[dn.id];e[xn].x+=je*Ft,e[xn].y+=ot*Ft,e[tr].x-=je*hn,e[tr].y-=ot*hn})}})}})}),!0})}},{key:"calRepulsive",value:function(e,t){var a=this,s=a.nodes,u=a.width*a.optimizeRangeFactor,l=a.nodeStrength,c=a.alpha,f=a.nodeCollideStrength,d=a.preventNodeOverlap,v=a.nodeSize,p=a.nodeSpacing,y=a.depthRepulsiveForceScale,C=a.center;s.forEach(function(E,w){if(!(!E.x||!E.y)){if(C){var x=a.gravity,N=E.x-C[0]||.005,j=E.y-C[1]||.005,B=Math.sqrt(N*N+j*j);e[w].x-=N*x*c/B,e[w].y-=j*x*c/B}s.forEach(function($,Z){if(w!==Z&&!(!$.x||!$.y)){var fe=t["".concat(E.id,"-").concat($.id)],de=fe.vl2,xe=fe.vl;if(!(xe>u)){var Ae=t["".concat(E.id,"-").concat($.id)],Ye=Ae.vx,rt=Ae.vy,je=Math.log(Math.abs($.depth-E.depth)/10)+1||1;je=je<1?1:je,$.comboId!==E.comboId&&(je+=1);var ot=je?Math.pow(y,je):1,Ft=l($)*c/de*ot;if(e[w].x+=Ye*Ft,e[w].y+=rt*Ft,w<Z&&d){var hn=v(E)+p(E)||1,In=v($)+p($)||1,xn=hn+In;if(de<xn*xn){var dn=(xn-xe)/xe*f,tr=In*In,Ut=tr/(hn*hn+tr),Rn=Ye*dn,$n=rt*dn;e[w].x+=Rn*Ut,e[w].y+=$n*Ut,Ut=1-Ut,e[Z].x-=Rn*Ut,e[Z].y-=$n*Ut}}}}})}})}},{key:"calAttractive",value:function(e,t){var a=this,s=a.edges,u=a.linkDistance,l=a.alpha,c=a.edgeStrength,f=a.bias,d=a.depthAttractiveForceScale;s.forEach(function(v,p){var y=Ci(v,"source"),C=Ci(v,"target");if(!(!y||!C||y===C)){var E=a.indexMap[y],w=a.indexMap[C],x=a.nodeMap[y],N=a.nodeMap[C];if(!(!x||!N)){var j=x.depth===N.depth?0:Math.log(Math.abs(x.depth-N.depth)/10);x.comboId===N.comboId&&(j=j/2);var B=j?Math.pow(d,j):1;if(x.comboId!==N.comboId&&B===1?B=d/2:x.comboId===N.comboId&&(B=2),!(!Ir(N.x)||!Ir(x.x)||!Ir(N.y)||!Ir(x.y))){var $=t["".concat(C,"-").concat(y)],Z=$.vl,fe=$.vx,de=$.vy,xe=(Z-u(v))/Z*l*c(v)*B,Ae=fe*xe,Ye=de*xe,rt=f[p];e[w].x-=Ae*rt,e[w].y-=Ye*rt,e[E].x+=Ae*(1-rt),e[E].y+=Ye*(1-rt)}}}})}},{key:"getType",value:function(){return"comboForce"}}]),r}(Ou),ZX=function(){function o(i){Object(De.a)(this,o),this.id=i.id||0,this.rx=i.rx,this.ry=i.ry,this.fx=0,this.fy=0,this.mass=i.mass,this.degree=i.degree,this.g=i.g||0}return Object(be.a)(o,[{key:"distanceTo",value:function(r){var n=this.rx-r.rx,e=this.ry-r.ry;return Math.hypot(n,e)}},{key:"setPos",value:function(r,n){this.rx=r,this.ry=n}},{key:"resetForce",value:function(){this.fx=0,this.fy=0}},{key:"addForce",value:function(r){var n=r.rx-this.rx,e=r.ry-this.ry,t=Math.hypot(n,e);t=t<1e-4?1e-4:t;var a=this.g*(this.degree+1)*(r.degree+1)/t;this.fx+=a*n/t,this.fy+=a*e/t}},{key:"in",value:function(r){return r.contains(this.rx,this.ry)}},{key:"add",value:function(r){var n=this.mass+r.mass,e=(this.rx*this.mass+r.rx*r.mass)/n,t=(this.ry*this.mass+r.ry*r.mass)/n,a=this.degree+r.degree,s={rx:e,ry:t,mass:n,degree:a};return new o(s)}}]),o}(),JX=function(){function o(i){Object(De.a)(this,o),this.xmid=i.xmid,this.ymid=i.ymid,this.length=i.length,this.massCenter=i.massCenter||[0,0],this.mass=i.mass||1}return Object(be.a)(o,[{key:"getLength",value:function(){return this.length}},{key:"contains",value:function(r,n){var e=this.length/2;return r<=this.xmid+e&&r>=this.xmid-e&&n<=this.ymid+e&&n>=this.ymid-e}},{key:"NW",value:function(){var r=this.xmid-this.length/4,n=this.ymid+this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},a=new o(t);return a}},{key:"NE",value:function(){var r=this.xmid+this.length/4,n=this.ymid+this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},a=new o(t);return a}},{key:"SW",value:function(){var r=this.xmid-this.length/4,n=this.ymid-this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},a=new o(t);return a}},{key:"SE",value:function(){var r=this.xmid+this.length/4,n=this.ymid-this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},a=new o(t);return a}}]),o}(),QX=function(){function o(i){Object(De.a)(this,o),this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,i!=null&&(this.quad=i)}return Object(be.a)(o,[{key:"insert",value:function(r){if(this.body==null){this.body=r;return}this._isExternal()?(this.quad&&(this.NW=new o(this.quad.NW()),this.NE=new o(this.quad.NE()),this.SW=new o(this.quad.SW()),this.SE=new o(this.quad.SE())),this._putBody(this.body),this._putBody(r),this.body=this.body.add(r)):(this.body=this.body.add(r),this._putBody(r))}},{key:"_putBody",value:function(r){!this.quad||(r.in(this.quad.NW())&&this.NW?this.NW.insert(r):r.in(this.quad.NE())&&this.NE?this.NE.insert(r):r.in(this.quad.SW())&&this.SW?this.SW.insert(r):r.in(this.quad.SE())&&this.SE&&this.SE.insert(r))}},{key:"_isExternal",value:function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}},{key:"updateForce",value:function(r){if(!(this.body==null||r===this.body))if(this._isExternal())r.addForce(this.body);else{var n=this.quad?this.quad.getLength():0,e=this.body.distanceTo(r);n/e<this.theta?r.addForce(this.body):(this.NW&&this.NW.updateForce(r),this.NE&&this.NE.updateForce(r),this.SW&&this.SW.updateForce(r),this.SE&&this.SE.updateForce(r))}}}]),o}(),qX=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.kr=5,e.kg=1,e.mode="normal",e.preventOverlap=!1,e.dissuadeHubs=!1,e.barnesHut=void 0,e.maxIteration=0,e.ks=.1,e.ksmax=10,e.tao=.1,e.onLayoutEnd=function(){},e.prune=void 0,e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.onLayoutEnd,s=e.prune,u=e.maxIteration;!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);for(var l=[],c=t.length,f=0;f<c;f+=1){var d=t[f],v=10,p=10;Ir(d.size)&&(v=d.size,p=d.size),ru(d.size)?(isNaN(d.size[0])||(v=d.size[0]),isNaN(d.size[1])||(p=d.size[1])):jf(d.size)&&(v=d.size.width,p=d.size.height),e.getWidth&&!isNaN(e.getWidth(d))&&(p=e.getWidth(d)),e.getHeight&&!isNaN(e.getHeight(d))&&(v=e.getHeight(d));var y=Math.max(v,p);l.push(y)}e.barnesHut===void 0&&c>250&&(e.barnesHut=!0),e.prune===void 0&&c>100&&(e.prune=!0),this.maxIteration===0&&!e.prune?(u=250,c<=200&&c>100?u=1e3:c>200&&(u=1200),this.maxIteration=u):this.maxIteration===0&&s&&(u=100,c<=200&&c>100?u=500:c>200&&(u=950),this.maxIteration=u),e.kr||(e.kr=50,c>100&&c<=500?e.kr=20:c>500&&(e.kr=1)),e.kg||(e.kg=20,c>100&&c<=500?e.kg=10:c>500&&(e.kg=1)),this.nodes=e.updateNodesByForces(l),a()}},{key:"updateNodesByForces",value:function(e){for(var t=this,a=t.edges,s=t.maxIteration,u=t.nodes,l=a.filter(function(xe){var Ae=Ci(xe,"source"),Ye=Ci(xe,"target");return Ae!==Ye}),c=u.length,f=l.length,d=[],v={},p={},y=[],C=0;C<c;C+=1)v[u[C].id]=C,d[C]=0,(u[C].x===void 0||isNaN(u[C].x))&&(u[C].x=Math.random()*1e3),(u[C].y===void 0||isNaN(u[C].y))&&(u[C].y=Math.random()*1e3),y.push({x:u[C].x,y:u[C].y});for(var E=0;E<f;E+=1){for(var w=void 0,x=void 0,N=0,j=0,B=0;B<c;B+=1){var $=Ci(l[E],"source"),Z=Ci(l[E],"target");u[B].id===$?(w=u[B],N=B):u[B].id===Z&&(x=u[B],j=B),p[E]={sourceIdx:N,targetIdx:j}}w&&(d[v[w.id]]+=1),x&&(d[v[x.id]]+=1)}var fe=s;if(u=this.iterate(fe,v,p,f,d,e),t.prune){for(var de=0;de<f;de+=1)d[p[de].sourceIdx]<=1?(u[p[de].sourceIdx].x=u[p[de].targetIdx].x,u[p[de].sourceIdx].y=u[p[de].targetIdx].y):d[p[de].targetIdx]<=1&&(u[p[de].targetIdx].x=u[p[de].sourceIdx].x,u[p[de].targetIdx].y=u[p[de].sourceIdx].y);t.prune=!1,t.barnesHut=!1,fe=100,u=this.iterate(fe,v,p,f,d,e)}return u}},{key:"iterate",value:function(e,t,a,s,u,l){for(var c=this,f=c.nodes,d=c.kr,v=c.preventOverlap,p=c.barnesHut,y=f.length,C=0,E=100,w=e,x=50,N=[],j=[],B=[],$=0;$<y;$+=1)if(N[2*$]=0,N[2*$+1]=0,p){var Z={id:$,rx:f[$].x,ry:f[$].y,mass:1,g:d,degree:u[$]};B[$]=new ZX(Z)}for(;w>0;){for(var fe=0;fe<y;fe+=1)j[2*fe]=N[2*fe],j[2*fe+1]=N[2*fe+1],N[2*fe]=0,N[2*fe+1]=0;N=this.getAttrForces(w,x,s,t,a,u,l,N),p&&(v&&w>x||!v)?N=this.getOptRepGraForces(N,B,u):N=this.getRepGraForces(w,x,N,E,l,u);var de=this.updatePos(N,j,C,u);f=de.nodes,C=de.sg,w--,c.tick&&c.tick()}return f}},{key:"getAttrForces",value:function(e,t,a,s,u,l,c,f){for(var d=this,v=d.nodes,p=d.preventOverlap,y=d.dissuadeHubs,C=d.mode,E=d.prune,w=0;w<a;w+=1){var x=v[u[w].sourceIdx],N=u[w].sourceIdx,j=v[u[w].targetIdx],B=u[w].targetIdx;if(!(E&&(l[N]<=1||l[B]<=1))){var $=[j.x-x.x,j.y-x.y],Z=Math.hypot($[0],$[1]);Z=Z<1e-4?1e-4:Z,$[0]=$[0]/Z,$[1]=$[1]/Z,p&&e<t&&(Z=Z-c[N]-c[B]);var fe=Z,de=fe;C==="linlog"&&(fe=Math.log(1+Z),de=fe),y&&(fe=Z/l[N],de=Z/l[B]),p&&e<t&&Z<=0?(fe=0,de=0):p&&e<t&&Z>0&&(fe=Z,de=Z),f[2*s[x.id]]+=fe*$[0],f[2*s[j.id]]-=de*$[0],f[2*s[x.id]+1]+=fe*$[1],f[2*s[j.id]+1]-=de*$[1]}}return f}},{key:"getRepGraForces",value:function(e,t,a,s,u,l){for(var c=this,f=c.nodes,d=c.preventOverlap,v=c.kr,p=c.kg,y=c.center,C=c.prune,E=f.length,w=0;w<E;w+=1){for(var x=w+1;x<E;x+=1)if(!(C&&(l[w]<=1||l[x]<=1))){var N=[f[x].x-f[w].x,f[x].y-f[w].y],j=Math.hypot(N[0],N[1]);j=j<1e-4?1e-4:j,N[0]=N[0]/j,N[1]=N[1]/j,d&&e<t&&(j=j-u[w]-u[x]);var B=v*(l[w]+1)*(l[x]+1)/j;d&&e<t&&j<0?B=s*(l[w]+1)*(l[x]+1):d&&e<t&&j===0?B=0:d&&e<t&&j>0&&(B=v*(l[w]+1)*(l[x]+1)/j),a[2*w]-=B*N[0],a[2*x]+=B*N[0],a[2*w+1]-=B*N[1],a[2*x+1]+=B*N[1]}var $=[f[w].x-y[0],f[w].y-y[1]],Z=Math.hypot($[0],$[1]);$[0]=$[0]/Z,$[1]=$[1]/Z;var fe=p*(l[w]+1);a[2*w]-=fe*$[0],a[2*w+1]-=fe*$[1]}return a}},{key:"getOptRepGraForces",value:function(e,t,a){for(var s=this,u=s.nodes,l=s.kg,c=s.center,f=s.prune,d=u.length,v=9e10,p=-9e10,y=9e10,C=-9e10,E=0;E<d;E+=1)f&&a[E]<=1||(t[E].setPos(u[E].x,u[E].y),u[E].x>=p&&(p=u[E].x),u[E].x<=v&&(v=u[E].x),u[E].y>=C&&(C=u[E].y),u[E].y<=y&&(y=u[E].y));for(var w=Math.max(p-v,C-y),x={xmid:(p+v)/2,ymid:(C+y)/2,length:w,massCenter:c,mass:d},N=new JX(x),j=new QX(N),B=0;B<d;B+=1)f&&a[B]<=1||t[B].in(N)&&j.insert(t[B]);for(var $=0;$<d;$+=1)if(!(f&&a[$]<=1)){t[$].resetForce(),j.updateForce(t[$]),e[2*$]-=t[$].fx,e[2*$+1]-=t[$].fy;var Z=[u[$].x-c[0],u[$].y-c[1]],fe=Math.hypot(Z[0],Z[1]);fe=fe<1e-4?1e-4:fe,Z[0]=Z[0]/fe,Z[1]=Z[1]/fe;var de=l*(a[$]+1);e[2*$]-=de*Z[0],e[2*$+1]-=de*Z[1]}return e}},{key:"updatePos",value:function(e,t,a,s){for(var u=this,l=u.nodes,c=u.ks,f=u.tao,d=u.prune,v=u.ksmax,p=l.length,y=[],C=[],E=0,w=0,x=0;x<p;x+=1)if(!(d&&s[x]<=1)){var N=[e[2*x]-t[2*x],e[2*x+1]-t[2*x+1]],j=Math.hypot(N[0],N[1]),B=[e[2*x]+t[2*x],e[2*x+1]+t[2*x+1]],$=Math.hypot(B[0],B[1]);y[x]=j,C[x]=$/2,E+=(s[x]+1)*y[x],w+=(s[x]+1)*C[x]}var Z=a;a=f*w/E,Z!==0&&(a=a>1.5*Z?1.5*Z:a);for(var fe=0;fe<p;fe+=1)if(!(d&&s[fe]<=1)){var de=c*a/(1+a*Math.sqrt(y[fe])),xe=Math.hypot(e[2*fe],e[2*fe+1]);xe=xe<1e-4?1e-4:xe;var Ae=v/xe;de=de>Ae?Ae:de;var Ye=de*e[2*fe],rt=de*e[2*fe+1];l[fe].x+=Ye,l[fe].y+=rt}return{nodes:l,sg:a}}}]),r}(Ou),vC=function(){function o(){Object(De.a)(this,o),this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return Object(be.a)(o,[{key:"init",value:function(r,n,e){this.cells=[],this.CELL_W=e.CELL_W||o.DEFAULT_CELL_W,this.CELL_H=e.CELL_H||o.DEFAULT_CELL_H,this.columnNum=Math.ceil(r/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),o.MIN_DIST=Math.pow(r,2)+Math.pow(n,2);for(var t=0;t<this.columnNum;t++){for(var a=[],s=0;s<this.rowNum;s++){var u={dx:t,dy:s,x:t*this.CELL_W,y:s*this.CELL_H,occupied:!1};a.push(u)}this.cells.push(a)}}},{key:"findGridByNodeId",value:function(r){for(var n,e,t=0;t<this.columnNum;t++)for(var a=0;a<this.rowNum;a++)if(this.cells[t][a].node&&((e=(n=this.cells[t][a])===null||n===void 0?void 0:n.node)===null||e===void 0?void 0:e.id)===r)return{column:t,row:a};return null}},{key:"sqdist",value:function(r,n){return Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)}},{key:"occupyNearest",value:function(r){for(var n=o.MIN_DIST,e,t=null,a=0;a<this.columnNum;a++)for(var s=0;s<this.rowNum;s++)!this.cells[a][s].occupied&&(e=this.sqdist(r,this.cells[a][s]))<n&&(n=e,t=this.cells[a][s]);return t&&(t.occupied=!0),t}},{key:"insertColumn",value:function(r,n){if(!(n<=0)){for(var e=0;e<n;e++){this.cells[e+this.columnNum]=[];for(var t=0;t<this.rowNum;t++)this.cells[e+this.columnNum][t]={dx:e,dy:t,x:e*this.CELL_W,y:t*this.CELL_H,occupied:!1,node:null}}for(var a=this.columnNum-1;a>r;a--)for(var s=0;s<this.rowNum;s++)this.cells[a+n][s]=Object.assign(Object.assign({},this.cells[a][s]),{x:(a+n)*this.CELL_W,y:s*this.CELL_H}),this.cells[a][s]={x:a*this.CELL_W,y:s*this.CELL_H,occupied:!0,node:null};for(var u=0;u<this.additionColumn.length;u++)this.additionColumn[u]>=r&&(this.additionColumn[u]+=n);for(var l=0;l<n;l++)this.additionColumn.push(r+l+1);this.columnNum+=n}}},{key:"insertRow",value:function(r,n){if(!(n<=0)){for(var e=0;e<n;e++)for(var t=0;t<this.columnNum;t++)this.cells[t][e+this.rowNum]={dx:t,dy:e,x:t*this.CELL_W,y:e*this.CELL_H,occupied:!1,node:null};for(var a=0;a<this.columnNum;a++)for(var s=this.rowNum-1;s>r;s--)this.cells[a][s+n]=Object.assign(Object.assign({},this.cells[a][s]),{dx:a,dy:s+n,x:a*this.CELL_W,y:(s+n)*this.CELL_H}),this.cells[a][s]={dx:a,dy:s,x:a*this.CELL_W,y:s*this.CELL_H,occupied:!1,node:null};for(var u=0;u<this.additionRow.length;u++)this.additionRow[u]>=r&&(this.additionRow[u]+=n);for(var l=0;l<n;l++)this.additionRow.push(r+l+1);this.rowNum+=n}}},{key:"getNodes",value:function(){for(var r=[],n=0;n<this.columnNum;n++)for(var e=0;e<this.rowNum;e++)this.cells[n][e].node&&r.push(this.cells[n][e]);return r}}]),o}();vC.MIN_DIST=50,vC.DEFAULT_CELL_W=80,vC.DEFAULT_CELL_H=80;function eK(o,i){if(!o.nodes||o.nodes.length===0)return o;var r=i.width,n=i.height,e=i.nodeMinGap,t=1e4,a=1e4;o.nodes.forEach(function(Z){var fe=Z.size[0]||50,de=Z.size[1]||50;t=Math.min(fe,t),a=Math.min(de,a)});var s=new vC;s.init(r,n,{CELL_H:a,CELL_W:t}),o.nodes.forEach(function(Z){var fe=s.occupyNearest(Z);fe&&(fe.node={id:Z.id,size:Z.size},Z.x=fe.x,Z.y=fe.y,Z.dx=fe.dx,Z.dy=fe.dy)});for(var u=0;u<o.nodes.length;u++){var l=o.nodes[u],c=s.findGridByNodeId(l.id);if(!c)throw new Error("can not find node cell");var f=c.column,d=c.row;if(l.size[0]+e>t){for(var v=Math.ceil((l.size[0]+e)/t)-1,p=v,y=0;y<v;y++){var C=s.additionColumn.indexOf(f+y+1)>-1;if(C&&!s.cells[f+y+1][d].node)p--;else break}s.insertColumn(f,p)}if(l.size[1]+e>a){for(var E=Math.ceil((l.size[1]+e)/a)-1,w=E,x=0;x<E;x++){var N=s.additionRow.indexOf(d+x+1)>-1;if(N&&!s.cells[f][d+x+1].node)w--;else break}s.insertRow(d,w)}}for(var j=0;j<s.columnNum;j++)for(var B=function(fe){var de=s.cells[j][fe];if(de.node){var xe=o.nodes.find(function(Ae){var Ye;return Ae.id===((Ye=de==null?void 0:de.node)===null||Ye===void 0?void 0:Ye.id)});xe&&(xe.x=de.x+xe.size[0]/2,xe.y=de.y+xe.size[1]/2)}},$=0;$<s.rowNum;$++)B($)}var kN=1200,DN=800,gC=1e7,sy=10,IN=3.141592653589793,QT=1.5707963267948966,tK=IN*.375,nK=IN*.625,pC=new Map,rK=10,aK=10,qT=.8,RN=.1,iK=.5;function oK(o,i,r){var n=o.x-o.size[0]/2,e=o.y-o.size[1]/2,t=o.x+o.size[0]/2,a=o.y+o.size[1]/2,s=i.x-i.size[0]/2,u=i.y-i.size[1]/2,l=i.x+i.size[0]/2,c=i.y+i.size[1]/2,f=o.x,d=o.y,v=i.x,p=i.y,y=v-f,C=Math.atan2(y,p-d),E=0,w=0,x=0,N=0;C>QT?(w=e-c,E=s-t,x=parseFloat(w?(w/Math.cos(C)).toFixed(2):E.toFixed(2)),N=parseFloat(E?(E/Math.sin(C)).toFixed(2):w.toFixed(2))):0<C&&C<=QT?(w=u-a,E=s-t,w>E?x=N=parseFloat(w?(w/Math.cos(C)).toFixed(2):E.toFixed(2)):x=N=parseFloat(E?(E/Math.sin(C)).toFixed(2):w.toFixed(2))):C<-QT?(w=e-c,E=-(l-n),w>E?x=N=parseFloat(w?(w/Math.cos(C)).toFixed(2):E.toFixed(2)):x=N=parseFloat(E?(E/Math.sin(C)).toFixed(2):w.toFixed(2))):(w=u-a,Math.abs(y)>(t-n)/2?E=n-l:E=y,w>E?x=N=parseFloat(w?(w/Math.cos(C)).toFixed(2):E.toFixed(2)):x=N=parseFloat(E&&C!==0?(E/Math.sin(C)).toFixed(2):w.toFixed(2)));var j=parseFloat(C.toFixed(2)),B=r;return r&&(B=tK<j&&j<nK),{distance:Math.abs(x<N?x:N),isHoriz:B}}function NN(o,i){var r=pC.get(o.id)||[],n=r.find(function(ot){return ot.source===i.id||ot.target===i.id}),e=o.size[0]*o.size[1],t=i.size[0]*i.size[1],a=e>t?i:o,s=e>t?o:i,u=a.x-a.size[0]/2,l=a.y-a.size[1]/2,c=a.x+a.size[0]/2,f=a.y+a.size[1]/2,d=s.x-s.size[0]/2,v=s.y-s.size[1]/2,p=s.x+s.size[0]/2,y=s.y+s.size[1]/2,C=a.x,E=a.y,w=s.x,x=s.y,N=c>=d&&p>=u&&f>=v&&y>=l,j=0,B=0;if(N){B=Math.sqrt(Math.pow(w-C,2)+Math.pow(x-E,2));var $=u>d?u:d,Z=l>v?l:v,fe=c<p?c:p,de=f<y?f:y,xe=fe-$,Ae=de-Z,Ye=xe*Ae;B===0&&(B=1e-7),j=sy*1/B*100+Ye,j*=gC}else{var rt=!1,je=oK(a,s,rt);B=je.distance,rt=je.isHoriz,B<=sy?B!==0?n?j+=sy+gC*1/B:j+=sy+gC*sy/B:j+=gC:(j+=B,n&&(j+=B*B))}return j}function jN(o){for(var i=0,r=0;r<o.length;r++){var n=o[r];(n.x<0||n.y<0||n.x>kN||n.y>DN)&&(i+=1e12);for(var e=r+1;e<o.length;e++)i+=NN(n,o[e])}return i}function sK(o,i,r,n){var e=new Map;r.forEach(function(C,E){e.set(C.id,C)});var t=n.filter(function(C){return C.source===o.id||C.target===o.id})||[],a=[];t.forEach(function(C){var E=C.source===o.id?C.target:C.source,w=e.get(E);w&&a.push(w)});for(var s=!0,u=0;u<a.length;u++){var l=a[u],c=Math.atan((o.y-l.y)/(l.x-o.y))*180,f=Math.atan((i.y-l.y)/(l.x-i.y))*180,d=c<30||c>150,v=f<30||f>150,p=c>70&&c<110,y=f>70&&f<110;if(d&&!v||c*f<0){s=!1;break}else if(p&&!y||c*f<0){s=!1;break}else if((l.x-o.x)*(l.x-i.x)<0){s=!1;break}else if((l.y-o.y)*(l.y-i.y)<0){s=!1;break}}return s}function uK(o,i){for(var r=!1,n=1,e=rK*n,t=aK*n,a=[e,-e,0,0],s=[0,0,t,-t],u=0;u<o.length;++u)for(var l=o[u],c=LN(l,o),f=0;f<a.length;f++){var d=sK(l,{x:l.x+a[f],y:l.y+s[f]},o,i);if(d){l.x+=a[f],l.y+=s[f];var v=LN(l,o),p=Math.random();v<c||p<qT&&p>RN?(c=v,r=!0):(l.x-=a[f],l.y-=s[f])}}return qT>RN&&(qT*=iK),r?jN(o):0}function LN(o,i){var r=0;(o.x<0||o.y<0||o.x+o.size[0]+20>kN||o.y+o.size[1]+20>DN)&&(r+=1e12);for(var n=0;n<i.length;++n)o.id!==i[n].id&&(r+=NN(o,i[n]));return r}function lK(o,i){if(o.length===0)return{nodes:o,edges:i};o.forEach(function(l){var c=i.filter(function(f){return f.source===l.id||f.target===l.id});pC.set(l,c)}),o.sort(function(l,c){var f,d;return((f=pC.get(l.id))===null||f===void 0?void 0:f.length)-((d=pC.get(c.id))===null||d===void 0?void 0:d.length)});for(var r=jN(o),n=20,e=1,t=0,a=50,s=0;n>0&&(s++,!(s>=a));){var u=uK(o,i);u!==0&&(t=u),e=t-r,r=t,e===0?--n:n=20}return o.forEach(function(l){l.x=l.x-l.size[0]/2,l.y=l.y-l.size[1]/2}),{nodes:o,edges:i}}var cK=lK;function fK(o,i){var r=o.nodes,n=o.edges,e=i.width,t=i.height;if(!(r==null?void 0:r.length))return Promise.resolve();var a=[];r.forEach(function(y){var C=n.filter(function(w){return w.source===y.id||w.target===y.id});if(C.length>1){var E=Object.assign({},y);delete E.size,a.push(E)}});var s=[];n.forEach(function(y){var C=a.find(function(w){return w.id===y.source}),E=a.find(function(w){return w.id===y.target});C&&E&&s.push(y)});var u=new A3({type:"dagre",ranksep:i.nodeMinGap,nodesep:i.nodeMinGap}),l=u.layout({nodes:a,edges:s}),c=l.nodes;r.forEach(function(y){var C=(c||[]).find(function(E){return E.id===y.id});y.x=(C==null?void 0:C.x)||e/2,y.y=(C==null?void 0:C.y)||t/2});var f=JSON.parse(JSON.stringify(r)),d=JSON.parse(JSON.stringify(n)),v=hT().nodes(f).force("link",$2(d).id(function(y){return y.id}).distance(function(y){var C=s.find(function(E){return E.source===y.source&&E.target===y.target});return C?30:20})).force("charge",vT()).force("center",zD(e/2,t/2)).force("x",HD(e/2)).force("y",WD(t/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),p=new Promise(function(y){v.on("end",function(){r.forEach(function(B){var $=f.find(function(Z){return Z.id===B.id});$&&(B.x=$.x,B.y=$.y)});var C=Math.min.apply(Math,Object(Qe.a)(r.map(function(B){return B.x}))),E=Math.max.apply(Math,Object(Qe.a)(r.map(function(B){return B.x}))),w=Math.min.apply(Math,Object(Qe.a)(r.map(function(B){return B.y}))),x=Math.max.apply(Math,Object(Qe.a)(r.map(function(B){return B.y}))),N=e/(E-C),j=t/(x-w);r.forEach(function(B){B.x!==void 0&&N<1&&(B.x=(B.x-C)*N),B.y!==void 0&&j<1&&(B.y=(B.y-w)*j)}),r.forEach(function(B){B.sizeTemp=B.size,B.size=[10,10]}),cK(r,n),r.forEach(function(B){B.size=B.sizeTemp||[],delete B.sizeTemp}),eK({nodes:r,edges:n},i),y()})});return p}var dK=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(n){var e;return Object(De.a)(this,r),e=i.call(this),e.width=300,e.height=300,e.nodeMinGap=50,e.onLayoutEnd=function(){},n&&e.updateCfg(n),e}return Object(be.a)(r,[{key:"getDefaultCfg",value:function(){return{width:300,height:300,nodeMinGap:50}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges;return t==null||t.forEach(function(s){s.size||(s.size=[50,50])}),fK({nodes:t,edges:a},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){e.onLayoutEnd&&e.onLayoutEnd()})}},{key:"getType",value:function(){return"er"}}]),r}(Ou),Nq=function(){function o(i){Object(De.a)(this,o);var r=r7(i.type);this.layoutInstance=new r(i)}return Object(be.a)(o,[{key:"layout",value:function(r){return this.layoutInstance.layout(r)}},{key:"updateCfg",value:function(r){this.layoutInstance.updateCfg(r)}},{key:"init",value:function(r){this.layoutInstance.init(r)}},{key:"execute",value:function(){this.layoutInstance.execute()}},{key:"getDefaultCfg",value:function(){return this.layoutInstance.getDefaultCfg()}},{key:"destroy",value:function(){return this.layoutInstance.destroy()}}]),o}(),hK={force:U7,fruchterman:FH,forceAtlas2:qX,gForce:o7,dagre:A3,circular:K7,radial:NH,concentric:jH,grid:a7,mds:LH,comboForce:YX,random:i7,"gForce-gpu":KX,"fruchterman-gpu":WX,er:dK},mC;(function(o){o.command=za.GRAPH_LAYOUT,o.hookKey="graphLayout"})(mC||(mC={}));var uy=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.graphLayout.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return v=f.layoutType,p=f.layoutOptions,y=f.customLayout,C=function(j){var B=hK[v],$=new B(Object.assign({},p));return $.layout(j)},E=y||C,x.next=5,E(f.graphData);case 5:return x.abrupt("return",{graphData:f.graphData});case 6:case"end":return x.stop()}},d)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],uy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],uy.prototype,"init",null),uy=Je([Object(Te.injectable)({token:{token:$a,named:mC.command.id}})],uy);var yC;(function(o){function i(n,e){return Object(Wc.isEqual)(n,e)}o.isNodeEqual=i;function r(n,e){return Object(Wc.isEqual)(n,e)}o.isEdgeEqual=r})(yC||(yC={}));var bC;(function(o){o.command=za.GRAPH_RENDER,o.hookKey="graphRender"})(bC||(bC={}));var ly=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.graphRender.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E,w,x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,this.ctx.getX6Graph();case 2:return v=j.sent,j.next=5,this.ctx.getGraphMeta();case 5:return p=j.sent,y=f.beforeRender,C=f.graphData,E=f.isNodeEqual,w=f.isEdgeEqual,x=f.afterRender,y&&y(p),j.next=10,this.doLoadGraph(v,C,E,w);case 10:return x&&x(C,p),j.abrupt("return",{});case 12:case"end":return j.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))},this.doLoadGraph=function(r,n,e,t){return ie(i,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u,l,c,f,d,v,p,y,C,E,w,x,N,j,B,$,Z,fe,de,xe,Ae,Ye,rt,je,ot,Ft,hn,In,xn,dn;return Object(D.a)().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:(r==null?void 0:r.isFrozen())||r==null||r.freeze(),u=this.ctx.getCommands(),l=this.graphDataDiff(r,n,e,t),c=l.addNodeConfigs,f=l.addEdgeConfigs,d=l.removeNodes,v=l.removeEdges,p=l.updateNodes,y=l.updateEdges,C=Object(Qn.a)(p),Ut.prev=4,C.s();case 6:if((E=C.n()).done){Ut.next=13;break}return w=E.value,x=w==null?void 0:w.getData(),Ut.next=11,u.executeCommand(Ri.UPDATE_NODE.id,{nodeConfig:x});case 11:Ut.next=6;break;case 13:Ut.next=18;break;case 15:Ut.prev=15,Ut.t0=Ut.catch(4),C.e(Ut.t0);case 18:return Ut.prev=18,C.f(),Ut.finish(18);case 21:N=Object(Qn.a)(y),Ut.prev=22,N.s();case 24:if((j=N.n()).done){Ut.next=31;break}return B=j.value,$=B==null?void 0:B.getData(),Ut.next=29,u.executeCommand(Eo.UPDATE_EDGE.id,{edgeConfig:$});case 29:Ut.next=24;break;case 31:Ut.next=36;break;case 33:Ut.prev=33,Ut.t1=Ut.catch(22),N.e(Ut.t1);case 36:return Ut.prev=36,N.f(),Ut.finish(36);case 39:Z=Object(Qn.a)(c),Ut.prev=40,Z.s();case 42:if((fe=Z.n()).done){Ut.next=48;break}return de=fe.value,Ut.next=46,u.executeCommand(Ri.ADD_NODE.id,{nodeConfig:de,options:{isRenderGraph:!0}},{name:"remove servcie",handler:function($n){return ie(s,void 0,void 0,Object(D.a)().mark(function qr(){return Object(D.a)().wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:delete $n.createNodeService;case 1:case"end":return fa.stop()}},qr)}))}});case 46:Ut.next=42;break;case 48:Ut.next=53;break;case 50:Ut.prev=50,Ut.t2=Ut.catch(40),Z.e(Ut.t2);case 53:return Ut.prev=53,Z.f(),Ut.finish(53);case 56:return Ut.next=58,u.executeCommand(Ms.INIT_GROUP.id,{graphData:{nodes:c,edges:[]}});case 58:xe=Object(Qn.a)(f),Ut.prev=59,xe.s();case 61:if((Ae=xe.n()).done){Ut.next=67;break}return Ye=Ae.value,Ut.next=65,u.executeCommand(Eo.ADD_EDGE.id,{edgeConfig:Ye,options:{isRenderGraph:!0}},{name:"remove servcie",handler:function($n){return ie(s,void 0,void 0,Object(D.a)().mark(function qr(){return Object(D.a)().wrap(function(fa){for(;;)switch(fa.prev=fa.next){case 0:delete $n.createEdgeService;case 1:case"end":return fa.stop()}},qr)}))}});case 65:Ut.next=61;break;case 67:Ut.next=72;break;case 69:Ut.prev=69,Ut.t3=Ut.catch(59),xe.e(Ut.t3);case 72:return Ut.prev=72,xe.f(),Ut.finish(72);case 75:rt=Object(Qn.a)(d),Ut.prev=76,rt.s();case 78:if((je=rt.n()).done){Ut.next=90;break}if(ot=je.value,Ft=ot==null?void 0:ot.getData(),!Ft.isGroup){Ut.next=86;break}return Ut.next=84,u.executeCommand(Ms.DEL_GROUP.id,{nodeConfig:Ft});case 84:Ut.next=88;break;case 86:return Ut.next=88,u.executeCommand(Ri.DEL_NODE.id,{nodeConfig:Ft});case 88:Ut.next=78;break;case 90:Ut.next=95;break;case 92:Ut.prev=92,Ut.t4=Ut.catch(76),rt.e(Ut.t4);case 95:return Ut.prev=95,rt.f(),Ut.finish(95);case 98:hn=Object(Qn.a)(v),Ut.prev=99,hn.s();case 101:if((In=hn.n()).done){Ut.next=108;break}return xn=In.value,dn=xn==null?void 0:xn.getData(),Ut.next=106,u.executeCommand(Eo.DEL_EDGE.id,{edgeConfig:dn});case 106:Ut.next=101;break;case 108:Ut.next=113;break;case 110:Ut.prev=110,Ut.t5=Ut.catch(99),hn.e(Ut.t5);case 113:return Ut.prev=113,hn.f(),Ut.finish(113);case 116:(r==null?void 0:r.isFrozen())&&(r==null||r.unfreeze());case 117:case"end":return Ut.stop()}},a,this,[[4,15,18,21],[22,33,36,39],[40,50,53,56],[59,69,72,75],[76,92,95,98],[99,110,113,116]])}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}},{key:"graphDataDiff",value:function(r,n,e,t){var a=n.nodes,s=n.edges,u=[];a.forEach(function(w){var x=r.getCellById(w==null?void 0:w.id);x||u.push(w)});var l=[],c=[],f=[],d=r.getNodes();d.forEach(function(w){var x=a.find(function(j){return(j==null?void 0:j.id)===(w==null?void 0:w.id)});if(!x)f.push(w);else{var N=!0;e?N=e(w==null?void 0:w.data,x):(w==null?void 0:w.data)&&x&&(N=yC.isNodeEqual(w==null?void 0:w.data,x)),N||w.setData(x,{deep:!1}),N===!0?l.push(w):c.push(w)}});var v=[];s.forEach(function(w){var x=r.getCellById(w==null?void 0:w.id);x||v.push(w)});var p=[],y=[],C=[],E=r.getEdges();return E.forEach(function(w){var x=s.find(function(j){return(j==null?void 0:j.id)===(w==null?void 0:w.id)});if(!x)C.push(w);else{var N=!0;t?N=t(w==null?void 0:w.data,x):(w==null?void 0:w.data)&&x&&(N=yC.isEdgeEqual(w==null?void 0:w.data,x)),N||w.setData(x,{deep:!1}),N===!0?p.push(w):y.push(w)}}),{addNodeConfigs:u,addEdgeConfigs:v,retainNodes:l,retainEdges:p,removeNodes:f,removeEdges:C,updateNodes:c,updateEdges:y}}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],ly.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],ly.prototype,"init",null),ly=Je([Object(Te.injectable)({token:{token:$a,named:bC.command.id}})],ly);var CC;(function(o){o.command=za.GRAPH_RESIZE,o.hookKey="graphResize"})(CC||(CC={}));var cy=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),v.next=4,this.ctx.getGraphConfig();case 4:return u=v.sent,l=u.rootContainer.clientHeight,c=u.rootContainer.clientWidth,v.next=9,s.graphResize.call(t,function(p){return ie(n,void 0,void 0,Object(D.a)().mark(function y(){var C,E,w,x,N;return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.ctx.getX6Graph();case 2:return C=B.sent,E=p.width,w=E===void 0?c:E,x=p.height,N=x===void 0?l:x,C==null||C.resize(w,N),B.abrupt("return",{});case 6:case"end":return B.stop()}},y,this)}))},a);case 9:return f=v.sent,this.ctx.setResult(f),v.abrupt("return",this);case 12:case"end":return v.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],cy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],cy.prototype,"init",null),cy=Je([Object(Te.injectable)({token:{token:$a,named:CC.command.id}})],cy);var EC;(function(o){o.command=za.GRAPH_FULLSCREEN,o.hookKey="graphFullscreen"})(EC||(EC={}));var fy=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),d.next=4,this.ctx.getGraphConfig();case 4:if(u=d.sent,l=u.appContainer,l){d.next=8;break}return d.abrupt("return");case 8:return d.next=10,s.graphFullscreen.call(t,function(){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p,y,C;return Object(D.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return C=!1,document.fullscreenElement?(y=document.exitFullscreen)===null||y===void 0||y.call(document):((p=l.requestFullscreen)===null||p===void 0||p.call(l),C=!0),w.abrupt("return",{fulllscreen:C});case 3:case"end":return w.stop()}},v)}))},a);case 10:return c=d.sent,this.ctx.setResult(c),d.abrupt("return",this);case 13:case"end":return d.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],fy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],fy.prototype,"init",null),fy=Je([Object(Te.injectable)({token:{token:$a,named:EC.command.id}})],fy);var dy;(function(o){o.command=za.GRAPH_ZOOM,o.MAX_SCALE=1.5,o.MIN_SCALE=.05,o.defaultZoomOptions={maxScale:o.MAX_SCALE,minScale:o.MIN_SCALE},o.hookKey="graphZoom"})(dy||(dy={}));var hy=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.graphZoom.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E,w;return Object(D.a)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,this.ctx.getX6Graph();case 2:return v=N.sent,p=f.factor,y=f.zoomFitPadding,C=y===void 0?12:y,E=f.zoomOptions,w=E===void 0?dy.defaultZoomOptions:E,typeof p=="number"?v==null||v.zoom(p,w||{}):p==="fit"?v==null||v.zoomToFit(Object.assign(Object.assign({},w),{padding:C})):p==="real"&&(v==null||v.scale(1),v==null||v.centerContent()),N.abrupt("return",{factor:p,zoomFitPadding:C,zoomOptions:w});case 6:case"end":return N.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],hy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],hy.prototype,"init",null),hy=Je([Object(Te.injectable)({token:{token:$a,named:dy.command.id}})],hy);var OC;(function(o){o.command=za.GRAPH_COPY,o.hookKey="graphCopySelection"})(OC||(OC={}));var wC=function(){function o(){var i=this;Object(De.a)(this,o),this.parseCells=function(r){r.forEach(function(a){var s=a.getData();if(a.isNode()&&s.isGroup){var u=a.getChildren();u.forEach(function(l){r.push(l)})}});var n=r.filter(function(a){return a.isNode()}).map(function(a){return a.id}),e=r.reduce(function(a,s){if(s.isEdge()){var u=s.getSourceCellId(),l=s.getTargetCellId();u&&l&&n.includes(u)&&n.includes(l)&&a.set(s.id,s)}else a.set(s.id,s);return a},new Map),t=Array.from(e.values());return MD(t)},this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.graphCopySelection.call(a,function(){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,p,y,C,E,w;return Object(D.a)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,e.getX6Graph();case 2:return p=N.sent,y=p.getSelectedCells(),C=p.getEdges(),E=this.parseCells([].concat(Object(Qe.a)(y),Object(Qe.a)(C))),w=window.localStorage.getItem(np),window.localStorage.setItem(np,JSON.stringify(E)),e.addUndo(zr.create(function(){return ie(v,void 0,void 0,Object(D.a)().mark(function j(){return Object(D.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:window.localStorage.setItem(np,w);case 1:case"end":return $.stop()}},j)}))})),N.abrupt("return",{err:null});case 10:case"end":return N.stop()}},d,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],wC.prototype,"contextProvider",void 0),wC=Je([Object(Te.injectable)({token:{token:$a,named:OC.command.id}})],wC);function vK(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{var r=JSON.parse(o);return r||i}catch(n){return console.error(n),i}}var vy=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.groupNodeMap=new Map,this.nodeMap=new Map,this.nodeMappingRecord=new Map,this.portMap=new Map,this.portMappingRecord=new Map,this.edgeMap=new Map,this.edgeMappingRecord=new Map,this.getNodesByType=function(r){return r.reduce(function(n,e){return e.isGroup?n.groupNodes.push(e):n.normalNodes.push(e),n},{normalNodes:[],groupNodes:[]})},this.getNodePorts=function(r){return Array.isArray(r.ports)?r.ports:r.ports&&Array.isArray(r.ports.items)?r.ports.items:[]},this.addNodes=function(r){r.forEach(function(n){if(n.isGroup)i.groupNodeMap.set(n.id,n);else{var e=i.getNodePorts(n);i.nodeMap.set(n.id,n),e.forEach(function(t){i.portMap.set(t.id,t)})}})},this.addEdge=function(r){r.forEach(function(n){i.edgeMap.set(n.id,n)})},this.buildNodeMapping=function(r,n){var e=r.id||r.originalId,t=n.id;i.nodeMappingRecord.set(e,t);var a=i.getNodePorts(r);a.forEach(function(s,u){var l=n.ports[u];l&&(i.portMap.set(l.id,l),i.portMappingRecord.set(s.id,l.id))})},this.createEdgeBetweenNodes=function(r){var n=r.id,e=r.source,t=r.sourcePortId,a=r.target,s=r.targetPortId,u=Kt(r,["id","source","sourcePortId","target","targetPortId"]);return Object.assign(Object.assign({},u),{id:void 0,originalId:n,source:i.nodeMappingRecord.get(e),target:i.nodeMappingRecord.get(a),sourcePortId:i.portMappingRecord.get(t),targetPortId:i.portMappingRecord.get(s),sourcePort:i.portMappingRecord.get(t),targetPort:i.portMappingRecord.get(s)})},this.buildGroupRelations=function(r){var n=r.groupChildren,e=n.map(function(t){return i.nodeMappingRecord.get(t)});return Object.assign(Object.assign({},r),{groupChildren:e})}});vy=Je([Object(Te.injectable)()],vy);var gy,xC;(function(o){o.command=za.GRAPH_PASTE,o.hookKey="graphPasteSelection"})(xC||(xC={}));function SC(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Math.floor(Math.random()*(o-i)+i)}var Tp=gy=function(){function o(){var i=this;Object(De.a)(this,o),this.updateNodeCopiedProps=function(r,n){var e=SC(100),t=SC(100);return r&&(e=n.x-r.x+SC(30),t=n.y-r.y+SC(30)),n.x+=e,n.y+=t,n.originalId=n.id,delete n.id,n.label=n.label?"".concat(n.label,"_copied"):"",n.isCollapsed=!1,n},this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),!gy.doing){f.next=5;break}return f.abrupt("return",this);case 5:return gy.doing=!0,f.next=8,u.graphPasteSelection.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E,w,x,N,j,B,$,Z,fe;return Object(D.a)().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return y=d.commandService,C=d.position,E=window.localStorage.getItem(np),w=vK(E,{nodes:[],edges:[]}),x=w.nodes,N=x===void 0?[]:x,j=w.edges,B=j===void 0?[]:j,$=this.mappingHelper.getNodesByType(N),Z=$.normalNodes,fe=$.groupNodes,this.mappingHelper.addNodes(N),xe.next=8,Promise.all(Z.map(function(Ae){return ie(p,void 0,void 0,Object(D.a)().mark(function Ye(){var rt,je,ot;return Object(D.a)().wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:return hn.next=2,y.executeCommand(Ri.ADD_NODE.id,{nodeConfig:this.updateNodeCopiedProps(C,Ae)});case 2:rt=hn.sent,je=rt.contextProvider(),ot=je.getResult(),this.mappingHelper.buildNodeMapping(Ae,ot.nodeConfig);case 6:case"end":return hn.stop()}},Ye,this)}))}));case 8:return xe.next=10,Promise.all(fe.map(function(Ae){return ie(p,void 0,void 0,Object(D.a)().mark(function Ye(){var rt;return Object(D.a)().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return rt=this.mappingHelper.buildGroupRelations(Ae),ot.next=3,y.executeCommand(Ms.ADD_GROUP.id,{nodeConfig:this.updateNodeCopiedProps(C,rt)});case 3:case"end":return ot.stop()}},Ye,this)}))}));case 10:return xe.next=12,Promise.all(B.map(function(Ae){var Ye=p.mappingHelper.createEdgeBetweenNodes(Ae);return y.executeCommand(Eo.ADD_EDGE.id,{edgeConfig:Ye})}));case 12:return e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function Ae(){return Object(D.a)().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:window.localStorage.setItem(np,null);case 1:case"end":return rt.stop()}},Ae)}))})),xe.abrupt("return",{err:null});case 14:case"end":return xe.stop()}},v,this)}))},s);case 8:return l=f.sent,e.setResult(l),gy.doing=!1,f.abrupt("return",this);case 12:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Tp.doing=!1,Je([Object(Te.inject)(Xa),Be("design:type",Object)],Tp.prototype,"contextProvider",void 0),Je([Object(Te.inject)(vy),Be("design:type",vy)],Tp.prototype,"mappingHelper",void 0),Tp=gy=Je([Object(Te.injectable)({token:{token:$a,named:xC.command.id}})],Tp);var TC;(function(o){o.command=za.GRAPH_TOGGLE_MULTI_SELECT,o.hookKey="toggleMultiSelect"})(TC||(TC={}));var py=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.toggleMultiSelect.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E,w;return Object(D.a)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,this.ctx.getX6Graph();case 2:return v=N.sent,N.next=5,this.ctx.getGraphConfig();case 5:return p=N.sent,y=f.isEnable,C=f.modelService,N.next=9,ge.GRAPH_ENABLE_MULTI_SELECT.getModel(C);case 9:return E=N.sent,w=typeof y=="boolean"?y:!v.isRubberbandEnabled(),w?(v.enableRubberband(),v.scroller&&v.scroller.widget?v.scroller.disablePanning():v.disablePanning(),p.graphContainer.style.cursor="crosshair"):(v.disableRubberband(),v.scroller&&v.scroller.widget?v.scroller.enablePanning():v.enablePanning(),p.graphContainer.style.cursor="grab"),E.setValue({isEnable:w}),N.abrupt("return",{isEnable:w});case 14:case"end":return N.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],py.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],py.prototype,"init",null),py=Je([Object(Te.injectable)({token:{token:$a,named:TC.command.id}})],py);var MC;(function(o){o.command=za.GRAPH_HISTORY_UNDO,o.hookKey="historyUndo"})(MC||(MC={}));var AC=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyUndo.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y;return Object(D.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,e.getX6Graph();case 2:if(y=E.sent,y.isHistoryEnabled()!==!1){E.next=5;break}return E.abrupt("return",{err:"history is disabled"});case 5:return y.undo(),e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function w(){var x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:x=d.commandService,x.executeCommand(za.GRAPH_HISTORY_REDO.id,{});case 2:case"end":return j.stop()}},w)}))})),E.abrupt("return",{err:null});case 8:case"end":return E.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],AC.prototype,"contextProvider",void 0),AC=Je([Object(Te.injectable)({token:{token:$a,named:MC.command.id}})],AC);var PC;(function(o){o.command=za.GRAPH_HISTORY_REDO,o.hookKey="historyRedo"})(PC||(PC={}));var kC=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyRedo.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y;return Object(D.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,e.getX6Graph();case 2:if(y=E.sent,y.isHistoryEnabled()!==!1){E.next=5;break}return E.abrupt("return",{err:"history is disabled"});case 5:return y.redo(),e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function w(){var x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:x=d.commandService,x.executeCommand(za.GRAPH_HISTORY_UNDO.id,{});case 2:case"end":return j.stop()}},w)}))})),E.abrupt("return",{err:null});case 8:case"end":return E.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],kC.prototype,"contextProvider",void 0),kC=Je([Object(Te.injectable)({token:{token:$a,named:PC.command.id}})],kC);var DC;(function(o){o.command=za.GRAPH_HISTORY_TOGGLE,o.hookKey="historyToggle"})(DC||(DC={}));var IC=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyToggle.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,e.getX6Graph();case 2:if(y=x.sent,y.isHistoryEnabled()!==!1){x.next=5;break}return x.abrupt("return",{err:"history is disabled"});case 5:return C=y.isHistoryEnabled(),E=d.enabled,y.toggleHistory(E),e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function N(){var j;return Object(D.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:j=d.commandService,j.executeCommand(za.GRAPH_HISTORY_TOGGLE.id,{enabled:C});case 2:case"end":return $.stop()}},N)}))})),x.abrupt("return",{err:null});case 10:case"end":return x.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],IC.prototype,"contextProvider",void 0),IC=Je([Object(Te.injectable)({token:{token:$a,named:DC.command.id}})],IC);var RC;(function(o){o.command=za.GRAPH_HISTORY_RESET,o.hookKey="historyReset"})(RC||(RC={}));var NC=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyReset.call(a,function(){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,e.getX6Graph();case 2:return v=y.sent,v.cleanHistory(),y.abrupt("return",{err:null});case 5:case"end":return y.stop()}},d)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],NC.prototype,"contextProvider",void 0),NC=Je([Object(Te.injectable)({token:{token:$a,named:RC.command.id}})],NC);var jC;(function(o){o.command=za.GRAPH_ADD_TOOL,o.hookKey="addTool"})(jC||(jC={}));var LC=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.addTool.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E,w,x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return y=d.cellId,C=d.toolConfig,E=d.commandService,j.next=3,e.getX6Graph();case 3:return w=j.sent,x=w.getCellById(y),x&&(x.addTools(C.items,C.options),e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function B(){return Object(D.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:Array.isArray(C.items)&&C.items.forEach(function(fe){E.executeCommand(za.GRAPH_DEL_TOOL.id,{cellId:y,toolname:fe})});case 1:case"end":return Z.stop()}},B)}))}))),j.abrupt("return",{err:null});case 7:case"end":return j.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],LC.prototype,"contextProvider",void 0),LC=Je([Object(Te.injectable)({token:{token:$a,named:jC.command.id}})],LC);var _C;(function(o){o.command=za.GRAPH_DEL_TOOL,o.hookKey="delTool"})(_C||(_C={}));var FC=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.delTool.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p,y,C,E,w;return Object(D.a)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return p=d.cellId,y=d.toolName,C=d.toolConfig,N.next=3,e.getX6Graph();case 3:return E=N.sent,w=E.getCellById(p),w&&(y==="*"?w.removeTools(C):w.removeTool(y,C)),N.abrupt("return",{err:null});case 7:case"end":return N.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],FC.prototype,"contextProvider",void 0),FC=Je([Object(Te.injectable)({token:{token:$a,named:_C.command.id}})],FC);var BC;(function(o){o.command=za.REDO_CMD,o.hookKey="redoCommand"})(BC||(BC={}));var my=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx,t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),c.next=5,u.redoCommand.call(a,function(){return ie(n,void 0,void 0,Object(D.a)().mark(function f(){var d;return Object(D.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=e.getCommands(),d.isRedoable&&d.redoCommand(),this.ctx.addUndo(zr.create(function(){d.redoCommand()})),p.abrupt("return",{});case 4:case"end":return p.stop()}},f,this)}))},s);case 5:return c.abrupt("return",this);case 6:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],my.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],my.prototype,"init",null),my=Je([Object(Te.injectable)({token:{token:$a,named:BC.command.id}})],my);var GC;(function(o){o.command=za.UNDO_CMD,o.hookKey="undoCommand"})(GC||(GC={}));var yy=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx,t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),c.next=5,u.undoCommand.call(a,function(){return ie(n,void 0,void 0,Object(D.a)().mark(function f(){var d;return Object(D.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=e.getCommands(),d.isUndoable&&d.undoCommand(),this.ctx.addUndo(zr.create(function(){d.redoCommand()})),p.abrupt("return",{});case 4:case"end":return p.stop()}},f,this)}))},s);case 5:return c.abrupt("return",this);case 6:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],yy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],yy.prototype,"init",null),yy=Je([Object(Te.injectable)({token:{token:$a,named:GC.command.id}})],yy);var gK=function(i){i(G0),i(U0),i(z0),i(uy),i(ly),i(cy),i(AC),i(kC),i(IC),i(NC),i(my),i(yy),i(hy),i(py),i(wC),i(Tp),i(fy),i(LC),i(FC)},pK=[_2,F2,B2,MC,PC,RC,DC,mC,bC,CC,EC,BC,GC,dy,TC,OC,xC,jC,_C],by;(function(o){o.command=Eo.ADD_EDGE,o.hookKey="addEdge",o.createEdgeId=function(n){if(_.isString(n.source))return"".concat(n.source,":").concat(n.sourcePortId,"-").concat(n.target,":").concat(n.targetPortId);if(i(n)){var e=n;return"".concat(e.source.cell,":").concat(e.source.port,"-").concat(e.target.cell,":").concat(e.target.port)}if(r(n)){var t=n;return"".concat(t.sourceCell,":").concat(t.sourcePort,"-").concat(t.targetCell,":").concat(t.targetPort)}};function i(n){return n.source&&n.source.cell&&_.isString(n.source.cell)}o.isX6EdgeConfig=i;function r(n){return n.sourceCell&&_.isString(n.sourceCell)}o.isX6EdgePlainConfig=r})(by||(by={}));var Cy=function(){function o(){var i=this;Object(De.a)(this,o),this.processEdgeConfig=function(r,n){return ie(i,void 0,void 0,Object(D.a)().mark(function e(){var t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n.id){u.next=5;break}return t=r.createIdService,a=t===void 0?by.createEdgeId:t,u.next=4,a(n);case 4:n.id=u.sent;case 5:return n.sourcePortId&&!n.sourcePort&&(n.sourcePort=n.sourcePortId,n.targetPort=n.targetPortId),u.abrupt("return",n);case 7:case"end":return u.stop()}},e)}))},this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.addEdge.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E,w,x,N,j,B,$,Z;return Object(D.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return v=f.cellFactory,p=f.createEdgeService,y=f.commandService,C=f.options,de.next=3,this.ctx.getX6Graph();case 3:if(E=de.sent,w=f.edgeConfig,!p){de.next=12;break}return de.next=8,p(f);case 8:if(x=de.sent,typeof x!="boolean"){de.next=11;break}return de.abrupt("return",{err:"createEdgeService rejected"});case 11:w=x;case 12:return de.next=14,this.processEdgeConfig(f,w);case 14:if(N=de.sent,B=Object.assign(Object.assign({},C),{isCommand:!0}),!v){de.next=23;break}return de.next=19,v(N,this);case 19:$=de.sent,j=E.addEdge($,B),de.next=24;break;case 23:j=E.addEdge(Object.assign(Object.assign({},N),{label:(N==null?void 0:N.label)||N,data:Object.assign({},N)}),B);case 24:return Z=zr.create(function(){y.executeCommand(Eo.DEL_EDGE.id,{x6Edge:j})}),this.ctx.addUndo(Z),de.abrupt("return",{edgeConfig:N,edgeCell:j});case 27:case"end":return de.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],Cy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Cy.prototype,"init",null),Cy=Je([Object(Te.injectable)({token:{token:$a,named:by.command.id}})],Cy);var Yc;(function(o){o.command=Eo.DEL_EDGE,o.hookKey="delEdge";var i;(function(r){r.EDGE_NOT_EXIST="edge is not exist",r.EDGE_INVALID_CELL="this is not a valid cell",r.X6_DELETE_FAILED="x6 throw err when call delete edge",r.SERVICE_REJECT="service reject to delete"})(i=o.ErrEnum||(o.ErrEnum={}))})(Yc||(Yc={}));var Ey=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.delEdge.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E,w,x,N,j,B,$,Z,fe,de,xe;return Object(D.a)().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(v=f.edgeConfig,p=f.x6Edge,y=f.deleteEdgeService,C=f.commandService,E=f.options,w=p,w){Ye.next=9;break}return Ye.next=5,this.findEdgeById(v);case 5:if(w=Ye.sent,w){Ye.next=9;break}return console.error(Yc.ErrEnum.EDGE_NOT_EXIST,v),Ye.abrupt("return",{err:Yc.ErrEnum.EDGE_NOT_EXIST});case 9:if(x=w&&w.isEdge(),x){Ye.next=13;break}return console.error(Yc.ErrEnum.EDGE_NOT_EXIST,w),Ye.abrupt("return",{err:Yc.ErrEnum.EDGE_NOT_EXIST});case 13:if(!y){Ye.next=19;break}return Ye.next=16,y(f);case 16:if(N=Ye.sent,N){Ye.next=19;break}return Ye.abrupt("return",{err:Yc.ErrEnum.SERVICE_REJECT});case 19:return Ye.prev=19,j=w.getTargetCell(),B=w.getSourceCell(),$=w.getSourcePortId(),Z=w.getTargetPortId(),fe=B?B.id:B.source,de=j?j.id:j.target,w.remove(Object.assign(Object.assign({},E),{isCommand:!0})),xe=zr.create(function(){C.executeCommand(Eo.ADD_EDGE.id,{edgeConfig:{source:fe,target:de,sourcePortId:$,targetPortId:Z}})}),this.ctx.addUndo(xe),Ye.abrupt("return",{err:null,edgeConfig:{source:fe,target:de,sourcePortId:$,targetPortId:Z},targetCell:j,sourceCell:B,sourcePortId:$,targetPortId:Z});case 32:return Ye.prev=32,Ye.t0=Ye.catch(19),console.error(Yc.ErrEnum.X6_DELETE_FAILED,Ye.t0),Ye.abrupt("return",{err:Yc.ErrEnum.X6_DELETE_FAILED});case 36:case"end":return Ye.stop()}},d,this,[[19,32]])}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.findEdgeById=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.ctx.getX6Graph();case 2:return e=s.sent,t=e.getCellById(r.id),s.abrupt("return",t);case 5:case"end":return s.stop()}},n,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],Ey.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Ey.prototype,"init",null),Ey=Je([Object(Te.injectable)({token:{token:$a,named:Yc.command.id}})],Ey);var mK=h("GoyQ"),_N=h.n(mK),Mp;(function(o){var i=this;o.command=Eo.UPDATE_EDGE,o.hookKey="updateEdge",o.XFlowEdgeSetOptions={overwrite:!0},o.XFlowUpdateLabelService=function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o.XFlowEdgeSetOptions;return ie(i,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:r==null||r.setLabelAt(0,(n==null?void 0:n.label)||n,e);case 1:case"end":return s.stop()}},t)}))}})(Mp||(Mp={}));var Oy=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.updateEdge.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E,w,x,N;return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this.ctx.getX6Graph();case 2:if(v=B.sent,p=f.updateEdgeService,y=f.updateEdgeLabelService,C=y===void 0?Mp.XFlowUpdateLabelService:y,E=f.options,w=E===void 0?Mp.XFlowEdgeSetOptions:E,!p){B.next=10;break}return B.next=7,p(f);case 7:B.t0=B.sent,B.next=11;break;case 10:B.t0=f==null?void 0:f.edgeConfig;case 11:if(x=B.t0,N=v==null?void 0:v.getCellById(x==null?void 0:x.id),N==null||N.setData(x,w),!(x==null?void 0:x.hasOwnProperty("label"))){B.next=17;break}return B.next=17,C(N,x,w);case 17:return k2()(x==null?void 0:x.visible)&&N.setVisible(x==null?void 0:x.visible),x.attrs&&N.setAttrs(x.attrs),x.vertices&&N.setVertices(x.vertices),x.router&&N.setRouter(x.router),x.connector&&N.setConnector(x.connector),_N()(x.source)&&N.setSource(x.source),_N()(x.target)&&N.setTarget(x.target),B.abrupt("return",{edgeConfig:x,edgeCell:N});case 25:case"end":return B.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],Oy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Oy.prototype,"init",null),Oy=Je([Object(Te.injectable)({token:{token:$a,named:Mp.command.id}})],Oy);var zC;(function(o){o.command=Eo.HIGHLIGHT_EDGE,o.hookKey="highlightEdge"})(zC||(zC={}));var wy=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.highlightEdge.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v,p,y,C,E,w,x,N,j,B;return Object(D.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.ctx.getX6Graph();case 2:return y=Z.sent,C=f.edgeId,E=f.strokeColor,w=f.strokeWidth,x=y.getEdges(),N=x.find(function(fe){return fe.id===C}),j=x.filter(function(fe){return fe.id!==C}),N?(B=N.getAttrs(),((v=B==null?void 0:B.line)===null||v===void 0?void 0:v.stroke)===E&&((p=B==null?void 0:B.line)===null||p===void 0?void 0:p.strokeWidth)===w||(N==null||N.setAttrs({line:{stroke:E,strokeWidth:w||2}}),j.forEach(function(fe){fe.setAttrs({line:B==null?void 0:B.line})}),f.commandService.executeCommand(Eo.FRONT_EDGE.id,{edgeId:C}))):console.error(C,"this edgeId is not exist"),Z.abrupt("return",{});case 9:case"end":return Z.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],wy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],wy.prototype,"init",null),wy=Je([Object(Te.injectable)({token:{token:$a,named:zC.command.id}})],wy);var UC;(function(o){o.command=Eo.FRONT_EDGE,o.hookKey="frontEdge"})(UC||(UC={}));var xy=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.frontEdge.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,p,y,C;return Object(D.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this.ctx.getX6Graph();case 2:return p=w.sent,y=f.edgeId,C=p==null?void 0:p.getCellById(y),C?(C.toFront(),this.ctx.addUndo(zr.create(function(){return ie(v,void 0,void 0,Object(D.a)().mark(function x(){return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:f.commandService.executeCommand(Eo.BACK_EDGE.id,{edgeId:y});case 1:case"end":return j.stop()}},x)}))}))):console.error(y,"this edgeId is not exist"),w.abrupt("return",{});case 7:case"end":return w.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],xy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],xy.prototype,"init",null),xy=Je([Object(Te.injectable)({token:{token:$a,named:UC.command.id}})],xy);var VC;(function(o){o.command=Eo.BACK_EDGE,o.hookKey="frontEdge"})(VC||(VC={}));var Sy=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.frontEdge.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,p,y,C;return Object(D.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this.ctx.getX6Graph();case 2:return p=w.sent,y=f.edgeId,C=p==null?void 0:p.getCellById(y),C?(C.toBack(),this.ctx.addUndo(zr.create(function(){return ie(v,void 0,void 0,Object(D.a)().mark(function x(){return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:f.commandService.executeCommand(Eo.FRONT_EDGE.id,{edgeId:y});case 1:case"end":return j.stop()}},x)}))}))):console.error(y,"this edgeId is not exist"),w.abrupt("return",{});case 7:case"end":return w.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],Sy.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Sy.prototype,"init",null),Sy=Je([Object(Te.injectable)({token:{token:$a,named:VC.command.id}})],Sy);var yK=function(i){i(Cy),i(Ey),i(Oy),i(wy),i(xy),i(Sy)},bK=[by,Yc,Mp,zC,UC,VC],Ap;(function(o){o.command=Ms.ADD_GROUP,o.hookKey="addGroup",o.GROUP_PADDING=12,o.GROUP_HEADER_HEIGHT=40})(Ap||(Ap={}));var HC=function(){function o(){var i=this;Object(De.a)(this,o),this.getBBox=function(r,n,e){var t=n.groupHeaderHeight,a=t===void 0?Ap.GROUP_HEADER_HEIGHT:t,s=n.groupPadding,u=s===void 0?Ap.GROUP_PADDING:s,l=e.getCellsBBox(r.children);return l.moveAndExpand({x:-u,y:-(u+a),width:u*2,height:u*2+a}),l},this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.addGroup.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E,w,x,N,j,B,$,Z,fe;return Object(D.a)().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return y=d.nodeConfig,C=d.createService,E=d.cellFactory,w=d.commandService,xe.next=3,e.getX6Graph();case 3:return x=xe.sent,xe.next=6,w.executeCommand(Ri.ADD_NODE.id,{cellFactory:E,createNodeService:C,nodeConfig:y});case 6:if(N=xe.sent,j=N.contextProvider().getResult(),B=j.nodeCell,$=B.id,Z=y.groupChildren,Z.length&&(Z.forEach(function(Ae){var Ye=x.getCellById(Ae);Ye&&(Ye.setData(Object.assign(Object.assign({},Ye.getData()),{group:$,isCollapsed:!1})),Ye.prop("group",$),B.addChild(Ye),x.unselect(Ye))}),fe=this.getBBox(B,y,x),B.position(fe.x,fe.y),B.size(fe.width,fe.height),B.setZIndex(0),B.prop("isGroup",!0),B.setData(Object.assign(Object.assign({},B.getData()),{width:fe.width,height:fe.height,groupChildrenSize:{width:fe.width,height:fe.height},x:fe.x,y:fe.y,isGroup:!0})),x.select(B)),!y.isCollapsed){xe.next=14;break}return xe.next=14,w.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:y.id,isCollapsed:y.isCollapsed});case 14:return e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function Ae(){return Object(D.a)().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:w.executeCommand(Ms.DEL_GROUP.id,{nodeConfig:y});case 1:case"end":return rt.stop()}},Ae)}))})),xe.abrupt("return",{nodeConfig:y,nodeCell:B});case 16:case"end":return xe.stop()}},v,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],HC.prototype,"contextProvider",void 0),HC=Je([Object(Te.injectable)({token:{token:$a,named:Ap.command.id}})],HC);var WC;(function(o){o.command=Ms.DEL_GROUP,o.hookKey="delGroup"})(WC||(WC={}));var $C=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.delGroup.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E,w,x,N,j,B,$,Z;return Object(D.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,e.getX6Graph();case 2:if(y=de.sent,C=d.nodeConfig,E=d.commandService,w=d.deleteService,x=C.id,N=y.getCellById(x),!w){de.next=12;break}return de.next=9,w(d);case 9:if(j=de.sent,j){de.next=12;break}return de.abrupt("return",{err:"service rejected"});case 12:if(N){de.next=14;break}return de.abrupt("return",{err:"target node is not exist"});case 14:if(N.getProp("isGroup")===!0){de.next=16;break}return de.abrupt("return",{err:"target node is not group"});case 16:if(B=N.getData(),$=B.isCollapsed,!$){de.next=20;break}return de.next=20,E.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:N.id,isCollapsed:!1,collapsedSize:{width:0,height:0}});case 20:return Z=N.getChildren(),Z&&Z.forEach(function(xe){N.unembed(xe),xe.prop("group",""),xe.setData(Object.assign(Object.assign({},xe.getData()),{group:""}))}),de.next=24,E.executeCommand(Ri.DEL_NODE.id,{nodeConfig:C});case 24:return e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function xe(){return Object(D.a)().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:E.executeCommand(Ms.ADD_GROUP.id,{nodeConfig:C});case 1:case"end":return Ye.stop()}},xe)}))})),de.abrupt("return",{err:null});case 26:case"end":return de.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],$C.prototype,"contextProvider",void 0),$C=Je([Object(Te.injectable)({token:{token:$a,named:WC.command.id}})],$C);var XC;(function(o){o.command=Ms.INIT_GROUP,o.hookKey="initGroup"})(XC||(XC={}));var KC=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.initGroup.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E,w,x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return y=d.graphData,C=d.commandService,j.next=3,e.getX6Graph();case 3:return E=j.sent,w=y.nodes,x={},w.forEach(function(B){var $=B.id,Z=B.group;Z&&(x[Z]?x[Z].push($):x[Z]=[$])}),Object.keys(x).forEach(function(B){return ie(p,void 0,void 0,Object(D.a)().mark(function $(){var Z,fe,de,xe,Ae,Ye;return Object(D.a)().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(Z=E.getCellById(B),fe=Z.getData(),de=x[B]||[],Z.prop("isGroup",!0),Z.setData(Object.assign(Object.assign({},fe),{isGroup:!0,groupChildren:de})),de.forEach(function(ot){var Ft=E.getCellById(ot);Z.embed(Ft)}),Z.toBack(),xe=fe.isCollapsed,Ae=fe.groupCollapsedSize,!xe){je.next=12;break}return Ye=d.collapsedSize||Ae||PS,je.next=12,C.executeCommand(Ms.COLLAPSE_GROUP.id,{collapsedSize:Ye,isCollapsed:!0,nodeId:Z.id});case 12:case"end":return je.stop()}},$)}))}),j.abrupt("return",{});case 9:case"end":return j.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],KC.prototype,"contextProvider",void 0),KC=Je([Object(Te.injectable)({token:{token:$a,named:XC.command.id}})],KC);var YC;(function(o){o.command=Ms.COLLAPSE_GROUP,o.hookKey="collapseGroup"})(YC||(YC={}));var Ty=function(){function o(){var i=this;Object(De.a)(this,o),this.toggleVisible=function(r,n,e){r.forEach(function(t){var a=e.findViewByCell(t).container;a.style.visibility=n?"visible":"hidden"})},this.toggleCollapse=function(r,n,e){var t=r.getChildren().filter(function(f){return f.isNode()}),a=r.getData(),s=e.isCollapsed,u=e.gap,l=u===void 0?0:u;if(s){var c=e.collapsedSize||a.groupCollapsedSize||PS;r.prop("previousSize",r.size()),r.size(c)}else r.size(r.prop("previousSize"));t&&t.forEach(function(f){var d=r.position(),v=n.getConnectedEdges(f).filter(function(E){var w=E.getSourceNode(),x=E.getTargetNode();return t.includes(w)&&t.includes(x)});if(s){i.toggleVisible([f].concat(Object(Qe.a)(v)),!1,n),f.prop("previousSize",f.size()),f.prop("previousRelativePosition",f.position({relative:!0})),f.position(d.x+l,d.y+l);var p=r.size();f.size({width:p.width-l*2,height:p.height-l*2})}else{i.toggleVisible([f].concat(Object(Qe.a)(v)),!0,n);var y=f.prop("previousRelativePosition"),C=f.prop("previousSize");f.position(y.x,y.y,{relative:!0}),f.size(C)}}),r.prop("isCollapsed",s),r.setData(Object.assign(Object.assign({},r.getData()),{isCollapsed:s}))},this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.collapseGroup.call(t,function(f){return ie(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,p,y,C,E;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.ctx.getX6Graph();case 2:if(p=x.sent,y=p.getCellById(t.nodeId),C=f.toggleService,!C){x.next=11;break}return x.next=8,C(f);case 8:if(E=x.sent,E){x.next=11;break}return x.abrupt("return",{err:"service rejected"});case 11:return y&&(this.toggleCollapse(y,p,t),this.ctx.addUndo(zr.create(function(){return ie(v,void 0,void 0,Object(D.a)().mark(function N(){return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:y&&this.toggleCollapse(y,p,Object.assign(t,{isCollapsed:!t.isCollapsed}));case 1:case"end":return B.stop()}},N,this)}))}))),x.abrupt("return",{err:null});case 13:case"end":return x.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],Ty.prototype,"contextProvider",void 0),Je([Object(Te.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Ty.prototype,"init",null),Ty=Je([Object(Te.injectable)({token:{token:$a,named:YC.command.id}})],Ty);var CK=function(i){i(HC),i($C),i(KC),i(Ty)},EK=[Ap,WC,XC,YC],ZC;(function(o){o.command=rp.UPDATE_MODEL,o.hookKey="updateModel"})(ZC||(ZC={}));var JC=function(){function o(){var i=this;Object(De.a)(this,o),this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.updateModel.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E,w,x,N,j;return Object(D.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return y=d.updateModel,C=d.getModel,E=d.modelService,$.next=3,C(E);case 3:return w=$.sent,x=w.getValue(),N=f8(x),$.next=8,y(N);case 8:return j=d8(N),w.setValue(j),e.addUndo(zr.create(function(){return ie(p,void 0,void 0,Object(D.a)().mark(function Z(){return Object(D.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:w.setValue(j);case 1:case"end":return de.stop()}},Z)}))})),$.abrupt("return",{model:w,value:j});case 12:case"end":return $.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Object(Te.inject)(Xa),Be("design:type",Object)],JC.prototype,"contextProvider",void 0),JC=Je([Object(Te.injectable)({token:{token:$a,named:ZC.command.id}})],JC);var jq=function(){},OK=function(i){i(JC)},wK=[ZC],FN=[].concat(Object(Qe.a)(Q8),Object(Qe.a)(bK),Object(Qe.a)(EK),Object(Qe.a)(pK),Object(Qe.a)(wK)),BN=function(){return new Hc},My=function(){function o(){var i=this;Object(De.a)(this,o),this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=r.x6Events.registerHook({name:"bind group node move event",handler:function(l){return ie(e,void 0,void 0,Object(D.a)().mark(function c(){var f=this,d;return Object(D.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:d={eventName:"node:moving",callback:function(C){var E=C.node;return ie(f,void 0,void 0,Object(D.a)().mark(function w(){var x,N,j,B,$,Z,fe,de,xe,Ae,Ye,rt,je,ot,Ft;return Object(D.a)().wrap(function(In){for(;;)switch(In.prev=In.next){case 0:if(x=E.prop("isGroup"),!x){In.next=4;break}return E.prop("originPosition",E.getPosition()),In.abrupt("return");case 4:if(N=E.model.graph,j=E.getData(),B=j.group,$=N.getNodes().find(function(xn){return xn.id===B}),$){In.next=9;break}return In.abrupt("return");case 9:Z=$.getProp("isCollapsed"),fe=$.getProp("originSize"),de=!1,fe==null&&(fe=$.size(),$.prop("originSize",fe)),xe=$.prop("originPosition"),xe==null&&(xe=$.getPosition(),$.prop("originPosition",xe)),Ae=xe.x,Ye=xe.y,rt=xe.x+fe.width,je=xe.y+fe.height,ot=$.getChildren(),ot&&ot.forEach(function(xn){var dn=xn.getBBox().inflate(12),tr=dn.getCorner();dn.x<Ae&&(Ae=dn.x,de=!0),dn.y<Ye&&(Ye=dn.y,de=!0),tr.x>rt&&(rt=tr.x,de=!0),tr.y>je&&(je=tr.y,de=!0)}),de&&($.prop({position:{x:Ae,y:Ye},size:{width:rt-Ae,height:je-Ye}}),Ft=Object.assign(Object.assign({},$.getData()),{x:Ae,y:Ye,width:rt-Ae,height:je-Ye}),Z!==!0&&(Ft.groupChildrenSize={width:rt-Ae,height:je-Ye}),$.setData(Ft));case 22:case"end":return In.stop()}},w)}))}},l.push(d);case 2:case"end":return p.stop()}},c)}))}}),s.abrupt("return",zr.create(function(){t.dispose()}));case 2:case"end":return s.stop()}},n)}))},this.registerHookHub=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=new vi,FN.forEach(function(s){var u=s.hookKey,l=s.createHook,c=l===void 0?BN:l,f=r.registerHookHub(u,c());e.push(f)}),this.commandConfig.getConfig().then(function(s){var u=s.getContributions,l=u();l.forEach(function(c){var f=c.hookKey,d=c.createHook,v=d===void 0?BN:d,p=r.registerHookHub(f,v());e.push(p)})}),a.abrupt("return",e);case 4:case"end":return a.stop()}},n,this)}))}}return Object(be.a)(o,[{key:"registerGraphCommands",value:function(r){var n=this;FN.forEach(function(e){var t=e.command;r.registerCommand(t,{createCommand:n.commandFactory})}),this.commandConfig.getConfig().then(function(e){var t=e.getContributions,a=t();a.forEach(function(s){r.registerCommand(s.command,{createCommand:n.commandFactory})})})}}]),o}();Je([Object(Te.inject)(XS),Be("design:type",Function)],My.prototype,"commandFactory",void 0),Je([Object(Te.inject)(hp),Be("design:type",hp)],My.prototype,"commandConfig",void 0),My=Je([Object(Te.singleton)({contrib:[J1,tc]})],My);var xK=function(i,r){var n=r.getCommandContributions();n.forEach(function(e){var t=e.CommandHandler,a=e.command;i({token:{token:$a,named:a.id},useClass:t})}),gK(i),J8(i),yK(i),CK(i),OK(i),i(My)},SK=function(i){return Object(Te.Module)(function(r){r(vy),Y8(r,i),xK(r,i),r(Td),r(XS,{useFactory:function(e){return function(t,a,s){var u=e.container.createChild(),l=u.get(Td);u.register(Xa,{useDynamic:function(){return function(){return l}}});var c=u.getNamed($a,t);return l.setArgs(a,s),l.handlerInstance=c,c}}})})},TK=function(i){var r=nc(),n=T.a.useMemo(function(){return i.config?i.config:new hp},[]);return T.a.useEffect(function(){r.addCoreModule({config:n,createModule:SK})},[]),null},MK=function(i){return function(r){var n=T.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=T.a.useMemo(function(){var t=new hp;return i(t,n),t},[n]);return e}},AK=Symbol("IToolbarService"),GN=Te.Syringe.defineToken("IToolbarContribution");function zN(o){if(o==null)throw new TypeError("Cannot destructure undefined")}var PK=h("sEfC"),kK=h.n(PK),DK=h("BkRI"),UN=h.n(DK),Pp=function(){function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.toolbarItems=new Map,this.onDidChangeEvent=new zv(null),this.onDidChange=this.onDidChangeEvent.watch,this.fireOnDidChange=kK()(function(){return i.onDidChangeEvent.setValue(void 0)},16),this.registerDisposableToolbar=function(r){var n=new vi,e={registerToolbarItem:function(a){var s=i.registerItem(a);return n.push(s),s}};return r(e),i.toDispose.push(n),n},this.getToolbarModel=function(r){var n=r.layout,e=r.mainGroups,t=e===void 0?[]:e,a=r.extraGroups,s=a===void 0?[]:a;return new zv({layout:n,mainGroups:i.createToolbarGroupModel(t),extraGroups:i.createToolbarGroupModel(s)})},this.createToolbarGroupModel=function(r){var n=r.map(function(e){var t=e.items,a=t===void 0?[]:t;return Object.assign(Object.assign({},e),{items:a.map(function(s){return i.createToolbarModel({id:s.id})}).filter(function(s){return!!s})})});return n}}return Object(be.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Qn.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerToolbarItems(this)}}catch(a){n.e(a)}finally{n.f()}}},{key:"onStop",value:function(){this.toDispose.dispose()}},{key:"registerItem",value:function(r){var n=this;this.toolbarItems.has(r.id)&&console.warn("ToolbarRegistry ".concat(r.id," is duplicated, in"),r),this.toolbarItems.set(r.id,r),this.fireOnDidChange();var e=new vi(zr.create(function(){return n.fireOnDidChange()}),zr.create(function(){return n.toolbarItems.delete(r.id)}));return e}},{key:"createToolbarModel",value:function(r){var n=UN()(this.toolbarItems.get(r.id)),e=k2()(n.isEnabled)?n.isEnabled:!0,t=k2()(n.isVisible)?n.isVisible:!0,a=Object.assign(Object.assign({},n),{isEnabled:e,isVisible:t,iconName:n.iconName,text:n.text});return a}}]),o}();Je([Object(Te.inject)(Uv),Be("design:type",Object)],Pp.prototype,"commandService",void 0),Je([Object(Te.inject)(Vv),Be("design:type",Object)],Pp.prototype,"modelService",void 0),Je([Object(Te.contrib)(GN),Be("design:type",Object)],Pp.prototype,"contributionProvider",void 0),Pp=Je([Object(Te.singleton)({contrib:[xh,AK]})],Pp);var IK=function(){return Object(Te.Module)(function(i){Te.Contribution.register(i,GN),i(Pp)})},VN=function(i){zN(i);var r=nc();return T.a.useEffect(function(){var n=r.addCoreModule({config:{CONFIG_TYPE:"ToolbarRegistry",getConfig:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:case"end":return s.stop()}},t)}))}},createModule:IK});return function(){n.dispose()}},[r]),null};VN.defaultProps={XFlowModuleType:"ToolbarRegistry"};var Lq=Symbol("xflow-menu-root"),RK=Symbol("IMenuService"),HN=Te.Syringe.defineToken("IMenuContribution"),QC;(function(o){o.Separator="separator",o.Submenu="submenu",o.Root="root",o.Leaf="leaf"})(QC||(QC={}));var qC=function(){function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.menuMap=new Map,this.getMenu=function(r){return i.menuMap.get(r)},this.registerDisposableMenu=function(r){var n=new vi,e={registerMenu:function(a){var s=i.registerMenu(a);return n.push(s),s}};return r(e),i.toDispose.push(n),n}}return Object(be.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Qn.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerMenu(this)}}catch(a){n.e(a)}finally{n.f()}}},{key:"onStop",value:function(){this.toDispose.dispose()}},{key:"registerMenu",value:function(r){var n=this;return this.menuMap.set(r.id,r),zr.create(function(){return n.menuMap.delete(r.id)})}}]),o}();Je([Object(Te.contrib)(HN),Be("design:type",Object)],qC.prototype,"contributionProvider",void 0),qC=Je([Object(Te.singleton)({contrib:[xh,RK]})],qC);var NK=function(){return Object(Te.Module)(function(i){Te.Contribution.register(i,HN),i(qC)})},WN=function(i){zN(i);var r=nc();return T.a.useEffect(function(){var n=r.addCoreModule({config:{CONFIG_TYPE:"MenuRegistry",getConfig:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:case"end":return s.stop()}},t)}))}},createModule:NK});return function(){n.dispose()}},[]),null};WN.defaultProps={XFlowModuleType:"MenuRegistry"};var eM=function(i){var r=i.meta,n=i.graphConfig,e=i.graphData,t=i.graphLayout,a=i.onLoad,s=i.isAutoCenter,u=i.hookConfig,l=i.modelServiceConfig,c=i.commandConfig,f=i.onAppConfigReady,d=i.onAppDestroy,v=i.children,p=v===void 0?[]:v,y=i.className,C=i.style,E=T.a.useState(),w=Object(Ue.a)(E,2),x=w[0],N=w[1],j=T.a.useRef(null),B=T8();T.a.useEffect(function(){f&&f(B);var fe=G8(B);fe.start().then(function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function xe(){var Ae;return Object(D.a)().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(N(fe),(Ae=B.getExtension("GraphConfig"))===null||Ae===void 0||Ae.config.setAppContainer(j.current),!r){rt.next=5;break}return rt.next=5,fe.commandService.executeCommand(za.LOAD_META.id,{meta:r});case 5:if(a&&a(fe,B),!e){rt.next=12;break}if(!t){rt.next=10;break}return rt.next=10,fe.commandService.executeCommand(za.GRAPH_LAYOUT.id,Object.assign({graphData:e},t));case 10:return rt.next=12,fe.commandService.executeCommand(za.GRAPH_RENDER.id,{graphData:e});case 12:case"end":return rt.stop()}},xe)}))});var de=function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function Ae(){return Object(D.a)().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:d&&d(fe);case 1:case"end":return rt.stop()}},Ae)}))};return function(){de()}},[]),T.a.useEffect(function(){x&&x.commandService.executeCommand(za.LOAD_META.id,{meta:r})},[r]),T.a.useEffect(function(){var fe=function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function xe(){var Ae;return Object(D.a)().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(!x){rt.next=11;break}if(!(e&&t)){rt.next=4;break}return rt.next=4,x.commandService.executeCommand(za.GRAPH_LAYOUT.id,Object.assign({graphData:e},t));case 4:return rt.next=6,x.commandService.executeCommand(za.GRAPH_RENDER.id,{graphData:e});case 6:if(!s){rt.next=11;break}return rt.next=9,x.getGraphInstance();case 9:Ae=rt.sent,Ae.centerContent();case 11:case"end":return rt.stop()}},xe)}))};fe()},[e]);var $=an.a.apply(void 0,["xflow-app-workspace",y].concat(Object(Qe.a)(B.getContainerClassNames()))),Z=(Array.isArray(p)?p:[p]).some(function(fe){return fe&&fe.props.isXFlowCanvas});return T.a.createElement(Hk,{app:x},T.a.createElement(ED.Provider,{value:B},T.a.createElement("div",{className:$,id:B.getInstanceId(),ref:j,style:C},!Z&&T.a.createElement(O2,{config:n,position:{top:0,bottom:0,left:0,right:0}}),p,T.a.createElement(TD,{config:l}),T.a.createElement(TK,{config:c}),T.a.createElement(M8,{config:u}),T.a.createElement(VN,null),T.a.createElement(WN,null))))};eM.defaultProps={};var _q=eM,jK=function(i){return i&&i.current},$N=function(){var i=T.a.useRef(!0);return T.a.useEffect(function(){return function(){i.current=!1}},[]),i},XN=function(i){var r=$N(),n=T.a.useState(i.getValue()),e=Object(Ue.a)(n,2),t=e[0],a=e[1];T.a.useEffect(function(){var c=i.watch(function(f){jK(r)&&a(f)});return function(){c.dispose()}},[a]);var s=t,u=Vc.isValidValue(s),l=T.a.useCallback(function(c){return i.setValue(c)},[i]);return[s,l,u]},kp=function(i){var r=T.a.useMemo(function(){return new zv(i)},[]),n=XN(r),e=Object(Ue.a)(n,3),t=e[0],a=e[1],s=e[2];return T.a.useEffect(function(){return function(){r.dispose()}},[r]),[t,a,r,s]},LK=function(i){var r=i.getModel,n=i.initialState,e=$N(),t=T.a.useRef(),a=T.a.useState(n),s=Object(Ue.a)(a,2),u=s[0],l=s[1];return T.a.useEffect(function(){var c;return r().then(function(f){return ie(void 0,void 0,void 0,Object(D.a)().mark(function d(){var v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return t.current=f,y.next=3,f.getValidValue();case 3:if(v=y.sent,e.current){y.next=6;break}return y.abrupt("return");case 6:l(v),c=f.watch(function(C){e.current&&l(C)});case 8:case"end":return y.stop()}},d)}))}),function(){c&&c.dispose&&c.dispose()}},[]),[u,l,t.current]},_K=Symbol("IKeyBindingService"),KN=Te.Syringe.defineToken("IKeyBindingContribution"),YN=Symbol("IKeyBindingOptionProvider"),_h=function(){function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.keyBindingMap=new Map,this.enabledKeyBindingMap=new Map,this.registerExternalKeybindings=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.optionProvider.getOption();case 2:return n=a.sent,e=n.registerKeybindingFunc,a.abrupt("return",e(this));case 5:case"end":return a.stop()}},r,this)}))},this.registerKeybinding=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=new vi;return r.forEach(function(e){i.keyBindingMap.set(e.id,e),i.enableKeyBindings(e.id).then(function(t){n.push(zr.create(function(){t.dispose(),i.keyBindingMap.delete(e.id)}))})}),i.toDispose.push(n),n},this.enableKeyBindings=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return this.disableKeyBindings([r]),t=this.keyBindingMap.get(r),c.next=4,this.getX6Graph();case 4:return a=c.sent,s=this.runCommand(t),a.bindKey(t.keybinding,s),u=zr.create(function(){a.unbindKey(t.keybinding),e.enabledKeyBindingMap.delete(t.id)}),this.enabledKeyBindingMap.set(t.id,u),c.abrupt("return",u);case 10:case"end":return c.stop()}},n,this)}))},this.disableKeyBindings=function(r){r.forEach(function(n){var e=i.enabledKeyBindingMap.get(n);e&&e.dispose()})},this.runCommand=function(r){return function(n){return ie(i,void 0,void 0,Object(D.a)().mark(function e(){return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.callback(r,this.modelService,this.commandService,n);case 2:case"end":return a.stop()}},e,this)}))}},this.getX6Graph=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.graphProvider.getGraphInstance();case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Qn.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerKeybinding(this)}}catch(a){n.e(a)}finally{n.f()}this.registerExternalKeybindings()}},{key:"onStop",value:function(){this.toDispose.dispose()}}]),o}();Je([Object(Te.inject)(YN),Be("design:type",Object)],_h.prototype,"optionProvider",void 0),Je([Object(Te.inject)(Uv),Be("design:type",Object)],_h.prototype,"commandService",void 0),Je([Object(Te.inject)(Vv),Be("design:type",Object)],_h.prototype,"modelService",void 0),Je([Object(Te.contrib)(KN),Be("design:type",Object)],_h.prototype,"contributionProvider",void 0),Je([Object(Te.inject)(Wv),Be("design:type",Object)],_h.prototype,"graphProvider",void 0),_h=Je([Object(Te.singleton)({contrib:[xh,_K]})],_h);var FK=function(i,r){i(YN,{useDynamic:function(){return{getOption:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r.getConfig());case 1:case"end":return s.stop()}},t)}))}}},lifecycle:Te.Syringe.Lifecycle.singleton})},BK=function(i){return Object(Te.Module)(function(r){FK(r,i),Te.Contribution.register(r,KN),r(_h)})},tM;(function(o){o.CONFIG_TYPE="CONTEXT_CONFIG"})(tM||(tM={}));var ZN=function(){return zr.create(function(){})},JN=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.CONFIG_TYPE=tM.CONFIG_TYPE,this.keybindingFunc=ZN,this.isMounted=new nl,this.setKeybindingFunc=function(r){i.keybindingFunc=r},this.setMountState=function(){i.isMounted.resolve(!0)},this.getConfig=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isMounted.promise;case 2:return e.abrupt("return",{CONFIG_TYPE:this.CONFIG_TYPE,registerKeybindingFunc:this.keybindingFunc});case 3:case"end":return e.stop()}},r,this)}))},this.dispose=function(){i.keybindingFunc=ZN,i.isMounted=new nl}}),GK=function(i){var r=i.config,n=nc(),e=T.a.useMemo(function(){return r||new JN},[r]);return T.a.useEffect(function(){var t=n.addCoreModule({config:e,createModule:BK});return e.setMountState(),function(){t.dispose(),e.dispose()}},[n,e]),null},zK=function(i){return function(r){var n=T.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=T.a.useMemo(function(){var t=new JN;return i(t,n),t},[n]);return e}};function UK(o){return new Promise(function(i){return setTimeout(function(){return i(!0)},o)})}var eE=h("Lyp1"),VK=function(){function o(){Object(De.a)(this,o),this.map=new Map([["default",eE.a],["QuestionCircleOutlined",eE.a]]),this.map.set("default",eE.a),this.map.set("QuestionCircleOutlined",eE.a)}return Object(be.a)(o,[{key:"get",value:function(r){var n=this.map.get(r);return n}},{key:"set",value:function(r,n){this.map.set(r,n)}},{key:"has",value:function(r){return this.map.has(r)}}]),o}(),Zc=new VK,Fq=Zc,nM=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.registerHookHub=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new vi,a=[r.graphOptions.registerHook({name:"add snapline options",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:c.snapline={enabled:!0,className:"xflow-snapline",clean:5e3};case 1:case"end":return v.stop()}},f)}))}})],t.pushAll(a),u.abrupt("return",zr.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});nM=Je([Te.singleton({contrib:tc})],nM);var HK=function(){return Te.Module(function(i){i(nM)})},WK="CanvasSnapline",$K="#faad14",XK=function(i){var r=i.color,n=r===void 0?$K:r,e=nc(),t=T.a.useMemo(function(){return{CONFIG_TYPE:WK,getConfig:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function s(){return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{});case 1:case"end":return l.stop()}},s)}))}}},[]);return T.a.useEffect(function(){var a="xflow-snapline-".concat(Date.now());e.addContainerClassNames(a);var s=`
    .`.concat(a,` .xflow-snapline .x6-widget-snapline-horizontal,
    .`).concat(a,` .xflow-snapline .x6-widget-snapline-vertical {
      border-color: `).concat(n,`;
    }`),u=CD(s);return function(){document.head.removeChild(u)}},[n,e]),T.a.createElement(I0,{config:t,createModule:HK})},tE=h("3S7+"),Fh;(function(o){o.MOUSE_ENTER="node-port:mouseenter",o.MOUSE_LEAVE="node-port:mouseleave"})(Fh||(Fh={}));var nE;(function(o){var i=this;o.id="ACTIVE_NODE_PORT",o.useModel=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.awaitModel(o.id);case 2:return e=s.sent,s.next=5,e.getValidValue();case 5:return t=s.sent,s.abrupt("return",{data:t,model:e});case 7:case"end":return s.stop()}},n)}))}})(nE||(nE={}));var rE=function(){function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.getGraphInstance=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return n=a.sent,a.next=5,this.graphProvider.getGraphOptions();case 5:return e=a.sent,a.abrupt("return",{graph:n,config:e});case 7:case"end":return a.stop()}},r,this)}))},this.getPortRenderConfig=function(){var r={onPortRendered:function(e){var t=this,a=e.port,s=e.node,u=e.contentSelectors,l=u&&u["xflow-port-group"];l instanceof Element&&(l.setAttribute("class",an()("xflow-port-group",{connected:a.connected&&a.group!=="out",groupPort:(s==null?void 0:s.isGroup)&&(s==null?void 0:s.isGroup())})),l.addEventListener("mouseenter",function(c){var f={e:c,portId:a.id,nodeId:s.id,portData:a,nodeData:s.getData(),tooltip:a.tooltip,placement:a.group};t.trigger(Fh.MOUSE_ENTER,f)}),l.addEventListener("mouseleave",function(c){var f={e:c,portId:a.id,nodeId:s.id,portData:a,nodeData:s.getData(),tooltip:a.tooltip,placement:a.group};t.trigger(Fh.MOUSE_LEAVE,f)}))}};return r},this.registerHookHub=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new vi,a=[r.graphOptions.registerHook({name:"add onPortRendered options ",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:Object.assign(c,this.getPortRenderConfig());case 1:case"end":return v.stop()}},f,this)}))}})],t.pushAll(a),u.abrupt("return",zr.create(function(){}));case 4:case"end":return u.stop()}},n)}))}}return Object(be.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:nE.id,watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l,c,f,d;return Object(D.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.getGraphInstance();case 2:return s=p.sent,u=s.graph,l=s.config,c=function(C){var E=C.target.getBoundingClientRect(),w=E.x,x=E.y,N=E.width,j=E.height,B=l.rootContainer.getBoundingClientRect(),$={x:w-((B==null?void 0:B.x)||0)+N/2,y:x-((B==null?void 0:B.y)||0)+j/2};return $},f=function(C){t.setValue(Object.assign(Object.assign({},C),{position:c(C.e)}))},d=function(){t.setValue(null)},u.on(Fh.MOUSE_ENTER,f),u.on(Fh.MOUSE_LEAVE,d),u.on("cell:mouseleave",d),p.abrupt("return",zr.create(function(){u.off(Fh.MOUSE_ENTER,f),u.off(Fh.MOUSE_LEAVE,d)}));case 12:case"end":return p.stop()}},a,this)}))}})}}]),o}();Je([Te.inject(Wv),Be("design:type",Object)],rE.prototype,"graphProvider",void 0),rE=Je([Te.singleton({contrib:[tc,Hv]})],rE);var KK=function(){return Te.Module(function(i){i(rE)})},YK="CanvasNodePortTooltip",ZK=function(i){var r=Ro(),n=kp(null),e=Object(Ue.a)(n,3),t=e[0],a=e[2];T.a.useEffect(function(){if(!!r){var l=function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function d(){var v,p;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,nE.useModel(r.modelService);case 2:return v=C.sent,p=v.model,C.abrupt("return",p.watch(function(E){a.setValue(E)}));case 5:case"end":return C.stop()}},d)}))},c=l();return function(){c.then(function(f){f.dispose()})}}},[a,r]);var s=!!(t&&t.position&&t.position.x);if(!s)return null;var u=i.getTooltip?i.getTooltip(t):t.tooltip;return T.a.createElement(tE.a,{visible:s,title:u,placement:t.placement||"top"},T.a.createElement("span",{className:"canvas-node-port-tooltip",style:{position:"absolute",left:t.position.x,top:t.position.y}}))},JK=function(i){var r=T.a.useCallback(function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}},n)}))},[]);return T.a.createElement(I0,{createModule:KK,config:{CONFIG_TYPE:YK,getConfig:r}},T.a.createElement(ZK,Object.assign({},i)))},rM;(function(o){o.CONFIG_TYPE="ContextMenuConfig"})(rM||(rM={}));var Ay=function(){function o(i){var r=this;Object(De.a)(this,o),this.CONFIG_TYPE=rM.CONFIG_TYPE,this.setMenuModelService=function(n){r.menuModelService=n},this.setCustomMenuRender=function(n){r.menuCustomRender=n},this.getConfig=function(){return ie(r,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{CONFIG_TYPE:this.CONFIG_TYPE,menuCustomRender:this.menuCustomRender,menuModelService:this.menuModelService});case 1:case"end":return t.stop()}},n,this)}))},this.moduleId=i||zc()}return Object(be.a)(o,[{key:"dispose",value:function(){}}]),o}(),aE;(function(o){o.id="CONTEXT_MENU_MODEL",o.useValue=ge.useModelValueUtil(o.id),o.getModel=ge.getModelUtil(o.id)})(aE||(aE={}));var QN=Te.inject,QK=Te.singleton,Py=function(){function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.getMenuModelValue=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.menuConfig.getConfig();case 2:if(e=v.sent,t=r.anchor,a=r.type,s=r.cell,u=new vi,this.toDispose.push(u),l=s?s.getData():null,c=new zv({id:"menuroot",type:QC.Root,submenu:[]}),u.push(zr.create(function(){c.dispose()})),f={toDispose:u,anchor:t,target:{data:l,type:a},customRender:null,menuModel:c},!e.menuCustomRender){v.next=14;break}return v.next=13,e.menuCustomRender(r,this.modelService);case 13:f.customRender=v.sent;case 14:if(!e.menuModelService){v.next=17;break}return v.next=17,e.menuModelService(r,f.menuModel,this.modelService,u);case 17:return v.abrupt("return",f);case 18:case"end":return v.stop()}},n,this)}))}}return Object(be.a)(o,[{key:"registerModel",value:function(r){var n=this,e=[r.registerModel({id:aE.id,getInitialValue:function(){return null},watchChange:function(a,s){return ie(n,void 0,void 0,Object(D.a)().mark(function u(){var l=this,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,ge.CONTEXTMENU_TARGET.getModel(s);case 2:return c=d.sent,d.abrupt("return",c.watch(function(v){return ie(l,void 0,void 0,Object(D.a)().mark(function p(){var y;return Object(D.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.getMenuModelValue(v);case 2:y=E.sent,a.setValue(y);case 4:case"end":return E.stop()}},p,this)}))}));case 4:case"end":return d.stop()}},u)}))}})];this.toDispose.pushAll(e)}}]),o}();Je([QN(Ay),Be("design:type",Ay)],Py.prototype,"menuConfig",void 0),Je([QN(Vv),Be("design:type",Object)],Py.prototype,"modelService",void 0),Py=Je([QK({contrib:[Hv]})],Py);var qK=function(i){return Te.Module(function(r){r(Py),r(Ay,{useValue:i})})},al=h("VTBJ"),zs=h("rePB"),qN=h("ODXe"),ej=h("Ff2n"),eY=h("uciX"),Dp={adjustX:1,adjustY:1},Ip=[0,0],tY={topLeft:{points:["bl","tl"],overflow:Dp,offset:[0,-4],targetOffset:Ip},topCenter:{points:["bc","tc"],overflow:Dp,offset:[0,-4],targetOffset:Ip},topRight:{points:["br","tr"],overflow:Dp,offset:[0,-4],targetOffset:Ip},bottomLeft:{points:["tl","bl"],overflow:Dp,offset:[0,4],targetOffset:Ip},bottomCenter:{points:["tc","bc"],overflow:Dp,offset:[0,4],targetOffset:Ip},bottomRight:{points:["tr","br"],overflow:Dp,offset:[0,4],targetOffset:Ip}},nY=tY,Ra={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(i){var r=i.keyCode;if(i.altKey&&!i.ctrlKey||i.metaKey||r>=Ra.F1&&r<=Ra.F12)return!1;switch(r){case Ra.ALT:case Ra.CAPS_LOCK:case Ra.CONTEXT_MENU:case Ra.CTRL:case Ra.DOWN:case Ra.END:case Ra.ESC:case Ra.HOME:case Ra.INSERT:case Ra.LEFT:case Ra.MAC_FF_META:case Ra.META:case Ra.NUMLOCK:case Ra.NUM_CENTER:case Ra.PAGE_DOWN:case Ra.PAGE_UP:case Ra.PAUSE:case Ra.PRINT_SCREEN:case Ra.RIGHT:case Ra.SHIFT:case Ra.UP:case Ra.WIN_KEY:case Ra.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(i){if(i>=Ra.ZERO&&i<=Ra.NINE||i>=Ra.NUM_ZERO&&i<=Ra.NUM_MULTIPLY||i>=Ra.A&&i<=Ra.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&i===0)return!0;switch(i){case Ra.SPACE:case Ra.QUESTION_MARK:case Ra.NUM_PLUS:case Ra.NUM_MINUS:case Ra.NUM_PERIOD:case Ra.NUM_DIVISION:case Ra.SEMICOLON:case Ra.DASH:case Ra.EQUALS:case Ra.COMMA:case Ra.PERIOD:case Ra.SLASH:case Ra.APOSTROPHE:case Ra.SINGLE_QUOTE:case Ra.OPEN_SQUARE_BRACKET:case Ra.BACKSLASH:case Ra.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},tj=Ra,nj=function(i){return+setTimeout(i,16)},rj=function(i){return clearTimeout(i)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(nj=function(i){return window.requestAnimationFrame(i)},rj=function(i){return window.cancelAnimationFrame(i)});var aj=0,aM=new Map;function ij(o){aM.delete(o)}var oj=function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;aj+=1;var n=aj;function e(t){if(t===0)ij(n),i();else{var a=nj(function(){e(t-1)});aM.set(n,a)}}return e(r),n};oj.cancel=function(o){var i=aM.get(o);return ij(i),rj(i)};var rY=oj,aY=tj.ESC,iY=tj.TAB;function oY(o){var i=o.visible,r=o.setTriggerVisible,n=o.triggerRef,e=o.menuRef,t=o.onVisibleChange,a=o.autoFocus,s=at.useRef(!1),u=function(){if(i&&n.current){var d,v,p,y;(d=n.current)===null||d===void 0||(v=d.triggerRef)===null||v===void 0||(p=v.current)===null||p===void 0||(y=p.focus)===null||y===void 0||y.call(p),r(!1),typeof t=="function"&&t(!1)}},l=function(){var d,v;(d=e.current)===null||d===void 0||(v=d.focus)===null||v===void 0||v.call(d),s.current=!0},c=function(d){var v;switch(d.keyCode){case aY:u();break;case iY:!s.current&&((v=e.current)===null||v===void 0?void 0:v.focus)?(d.preventDefault(),l()):u();break}};at.useEffect(function(){return i?(window.addEventListener("keydown",c),a&&rY(l,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}},[i])}var sj=h("U8pU"),sY=h("UTAp");function uY(o,i,r){var n=at.useRef({});return(!("value"in n.current)||r(n.current.condition,i))&&(n.current.value=o(),n.current.condition=i),n.current.value}function lY(o,i){typeof o=="function"?o(i):Object(sj.a)(o)==="object"&&o&&"current"in o&&(o.current=i)}function uj(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];var n=i.filter(function(e){return e});return n.length<=1?n[0]:function(e){i.forEach(function(t){lY(t,e)})}}function Bq(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return uY(function(){return uj.apply(void 0,i)},i,function(n,e){return n.length===e.length&&n.every(function(t,a){return t===e[a]})})}function cY(o){var i,r,n=Object(sY.isMemo)(o)?o.type.type:o.type;return!(typeof n=="function"&&!((i=n.prototype)!==null&&i!==void 0&&i.render)||typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render))}var fY=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function dY(o,i){var r=o.arrow,n=r===void 0?!1:r,e=o.prefixCls,t=e===void 0?"rc-dropdown":e,a=o.transitionName,s=o.animation,u=o.align,l=o.placement,c=l===void 0?"bottomLeft":l,f=o.placements,d=f===void 0?nY:f,v=o.getPopupContainer,p=o.showAction,y=o.hideAction,C=o.overlayClassName,E=o.overlayStyle,w=o.visible,x=o.trigger,N=x===void 0?["hover"]:x,j=o.autoFocus,B=Object(ej.a)(o,fY),$=at.useState(),Z=Object(qN.a)($,2),fe=Z[0],de=Z[1],xe="visible"in o?w:fe,Ae=at.useRef(null);at.useImperativeHandle(i,function(){return Ae.current});var Ye=at.useRef(null),rt="".concat(t,"-menu");oY({visible:xe,setTriggerVisible:de,triggerRef:Ae,menuRef:Ye,onVisibleChange:o.onVisibleChange,autoFocus:j});var je=function(){var $n=o.overlay,qr;return typeof $n=="function"?qr=$n():qr=$n,qr},ot=function($n){var qr=o.onOverlayClick,Kr=je().props;de(!1),qr&&qr($n),Kr.onClick&&Kr.onClick($n)},Ft=function($n){var qr=o.onVisibleChange;de($n),typeof qr=="function"&&qr($n)},hn=function(){var $n,qr=je(),Kr=uj(Ye,qr.ref),fa=($n={prefixCls:rt},Object(zs.a)($n,"data-dropdown-inject",!0),Object(zs.a)($n,"onClick",ot),Object(zs.a)($n,"ref",cY(qr)?Kr:void 0),$n);return typeof qr.type=="string"&&(delete fa.prefixCls,delete fa["data-dropdown-inject"]),at.createElement(at.Fragment,null,n&&at.createElement("div",{className:"".concat(t,"-arrow")}),at.cloneElement(qr,fa))},In=function(){var $n=o.overlay;return typeof $n=="function"?hn:hn()},xn=function(){var $n=o.minOverlayWidthMatchTrigger,qr=o.alignPoint;return"minOverlayWidthMatchTrigger"in o?$n:!qr},dn=function(){var $n=o.openClassName;return $n!==void 0?$n:"".concat(t,"-open")},tr=function(){var $n=o.children,qr=$n.props?$n.props:{},Kr=an()(qr.className,dn());return xe&&$n?at.cloneElement($n,{className:Kr}):$n},Ut=y;return!Ut&&N.indexOf("contextMenu")!==-1&&(Ut=["click"]),at.createElement(eY.a,Object(al.a)(Object(al.a)({builtinPlacements:d},B),{},{prefixCls:t,ref:Ae,popupClassName:an()(C,Object(zs.a)({},"".concat(t,"-show-arrow"),n)),popupStyle:E,action:N,showAction:p,hideAction:Ut||[],popupPlacement:c,popupAlign:u,popupTransitionName:a,popupAnimation:s,popupVisible:xe,stretch:xn()?"minWidth":"",popup:In(),onPopupVisibleChange:Ft,getPopupContainer:v}),tr())}var hY=at.forwardRef(dY),vY=hY,iE=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.trigger,s=e.disabled,u="".concat(this.props.prefixCls,"-dropdown"),l=T.a.Children.only(t),c=T.a.cloneElement(l,{className:an()(t.props.className,"".concat(u,"-trigger")),disabled:s}),f=s?[]:Array.isArray(a)?a:[a],d=!1;f&&f.indexOf("contextMenu")!==-1&&(d=!0);var v=T.a.Children.only(this.props.overlay),p=T.a.createElement("div",{className:"".concat(u,"-overlay")},v);return T.a.createElement(vY,Object.assign({},this.props,{prefixCls:u,overlay:p,alignPoint:d,trigger:f}),c)}}]),r}(T.a.Component);(function(o){o.defaultProps={trigger:"hover",prefixCls:"x6",mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft"}})(iE||(iE={}));var oE=T.a.createContext({}),ky=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.onHotkey=function(){n.triggerHandler()},n.onClick=function(e){n.triggerHandler(e)},n}return Object(be.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.hotkey;e&&this.props.context.registerHotkey(e,this.onHotkey)}},{key:"componentWillUnmount",value:function(){var e=this.props.hotkey;e&&this.props.context.unregisterHotkey(e,this.onHotkey)}},{key:"triggerHandler",value:function(e){!this.props.disabled&&!this.props.hidden&&(this.props.name&&this.props.context.onClick(this.props.name,e),this.props.onClick&&this.props.onClick())}},{key:"render",value:function(){return T.a.createElement("div",Object.assign({},r.getProps(this.props)),r.getContent(this.props,this.onClick))}}]),r}(T.a.PureComponent);(function(o){function i(n,e){var t,a=n.className,s=n.disabled,u=n.active,l=n.hidden,c=n.context.prefixCls,f="".concat(c,"-item");return{className:an()(f,e,(t={},Object(Xe.a)(t,"".concat(f,"-active"),u),Object(Xe.a)(t,"".concat(f,"-hidden"),l),Object(Xe.a)(t,"".concat(f,"-disabled"),s),t),a)}}o.getProps=i;function r(n,e,t,a){var s=n.icon,u=n.text,l=n.hotkey,c=n.children,f=n.context.prefixCls,d="".concat(f,"-item");return T.a.createElement(T.a.Fragment,null,T.a.createElement("button",{type:"button",className:"".concat(d,"-button"),onClick:e},s&&T.a.isValidElement(s)&&T.a.createElement("span",{className:"".concat(d,"-icon")},s),T.a.createElement("span",{className:"".concat(d,"-text")},u||c),l&&T.a.createElement("span",{className:"".concat(d,"-hotkey")},l),t),a)}o.getContent=r})(ky||(ky={}));var gY=function(i){return T.a.createElement(oE.Consumer,null,function(r){return T.a.createElement(ky,Object.assign({context:r},i))})},pY=function(){return T.a.createElement(oE.Consumer,null,function(i){var r=i.prefixCls;return T.a.createElement("div",{className:"".concat(r,"-item ").concat(r,"-item-divider")})})},mY=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},yY=function(i){var r=i.hotkey,n=i.children,e=mY(i,["hotkey","children"]);return T.a.createElement(oE.Consumer,null,function(t){var a=t.prefixCls,s=ky.getProps(Object.assign({context:t},i),"".concat(a,"-submenu"));return T.a.createElement("div",Object.assign({},s),ky.getContent(Object.assign({context:t},e),null,T.a.createElement("span",{className:"".concat(a,"-submenu-arrow")}),T.a.createElement("div",{className:"".concat(a,"-submenu-menu")},n)))})},Bh=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.onClick=function(e,t){n.props.stopPropagation&&t!=null&&t.stopPropagation(),n.props.onClick&&n.props.onClick(e)},n.registerHotkey=function(e,t){n.props.registerHotkey&&n.props.registerHotkey(e,t)},n.unregisterHotkey=function(e,t){n.props.unregisterHotkey&&n.props.unregisterHotkey(e,t)},n}return Object(be.a)(r,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.className,s=e.children,u=e.hasIcon,l="".concat(t,"-menu"),c=oE.Provider,f={prefixCls:l,onClick:this.onClick,registerHotkey:this.registerHotkey,unregisterHotkey:this.unregisterHotkey};return T.a.createElement("div",{className:an()(l,Object(Xe.a)({},"".concat(l,"-has-icon"),u),a)},T.a.createElement(c,{value:f},s))}}]),r}(T.a.PureComponent);(function(o){o.Item=gY,o.Divider=pY,o.SubMenu=yY,o.defaultProps={prefixCls:"x6",stopPropagation:!1}})(Bh||(Bh={}));var bY=function o(i){var r=i.idx,n=i.menuOptions,e=i.target,t=i.modelService,a=i.commandService,s=i.onHide,u=n.id,l=n.label,c=n.isEnabled,f=c===void 0?!0:c,d=n.isVisible,v=d===void 0?!0:d,p=n.iconName,y=n.submenu,C=y===void 0?[]:y,E=n.active,w=n.hotkey,x=n.render,N=n.onClick;if(!v)return null;if(n.type==="separator")return T.a.createElement(Bh.Divider,{key:String(n.id)+r});if(n.type==="root")return T.a.createElement(Bh,{hasIcon:!0},C.map(function(Z,fe){return o({idx:fe,target:e,commandService:a,modelService:t,menuOptions:Z,onHide:s})}));if(n.submenu&&Array.isArray(n.submenu)){var j=Zc.get(p),B=!f;return T.a.createElement(Bh.SubMenu,{key:String(u),text:l,disabled:B||C.length===0,icon:j?T.a.createElement(j,null):null,active:E,hotkey:w},C.map(function(Z,fe){return o({idx:fe,target:e,commandService:a,modelService:t,menuOptions:Z,onHide:s})}))}var $=Zc.get(p);return x?T.a.createElement(x,{menuItem:n,target:e,commandService:a,modelService:t,onHide:s},[T.a.createElement(Bh.Item,{key:String(u),text:l,disabled:!f,icon:$?T.a.createElement($,null):null,active:E,hotkey:w})]):T.a.createElement(Bh.Item,{key:String(u),text:l,disabled:!f,icon:$?T.a.createElement($,null):null,active:E,hotkey:w,onClick:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function fe(){return Object(D.a)().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,N({menuItem:n,target:e,commandService:a,modelService:t});case 2:s&&s();case 3:case"end":return xe.stop()}},fe)}))}})},CY=function(i){var r=i.menuModel,n=i.target,e=i.onHide,t=Ro(),a=t.modelService,s=t.commandService,u=XN(r),l=Object(Ue.a)(u,1),c=l[0];return bY({idx:-1,target:n,commandService:s,modelService:a,menuOptions:c,onHide:e})},EY=function(i){var r=i.toDispose;return T.a.useEffect(function(){return function(){r.dispose()}},[r]),null},OY=function(){var i=T.a.useRef(),r=Ro(),n=LK({getModel:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function y(){return Object(D.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,aE.getModel(r.modelService);case 2:return E.abrupt("return",E.sent);case 3:case"end":return E.stop()}},y)}))},initialState:{anchor:null,menuModel:null,target:null,customRender:null,toDispose:null}}),e=Object(Ue.a)(n,3),t=e[0],a=e[2],s=t.target,u=t.anchor,l=t.menuModel,c=t.customRender,f=t.toDispose;if(!s||!u||!l)return null;var d=function(){a.setValue({anchor:null,menuModel:null,target:null,customRender:null,toDispose:null})},v=c?T.a.createElement(c,{target:s,modelService:r.modelService,onHide:d}):T.a.createElement(CY,{target:s,menuModel:l,onHide:d});return T.a.createElement("div",{className:"xflow-menu-mask",ref:i,onClick:d,onContextMenu:function(y){y.preventDefault(),y.stopPropagation()}},T.a.createElement(EY,{toDispose:f}),T.a.createElement(iE,{visible:!0,getPopupContainer:function(){return i.current},overlay:v},T.a.createElement("div",{className:"xflow-context-menu-anchor",style:{top:u.y,left:u.x}})))},Gq="CanvasContextMenu",wY=function(i){var r=Ro(),n=!!r,e=T.a.useMemo(function(){return i.config?i.config:new Ay},[i.config]);return T.a.createElement(I0,{createModule:qK,config:e},n&&T.a.createElement(OY,{config:e}))},xY=function(i){return function(r){var n=T.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=T.a.useMemo(function(){var t=new Ay;return i(t,n),t},[n]);return e}},iM="CanvasToolbar",lj=function(){function o(){var i=this;Object(De.a)(this,o),this.CONFIG_TYPE=iM,this.setToolbarName=function(r){i.moduleId=iM+"__"+r},this.setToolbarModelService=function(r){i.toolbarModelService=r},this.setCustomToolbarRender=function(r){i.customRenderService=r},this.getConfig=function(){return{CONFIG_TYPE:i.CONFIG_TYPE,toolbarCustomRender:i.customRenderService,toolbarModelService:i.toolbarModelService}},this.moduleId=iM+"__"+zc()}return Object(be.a)(o,[{key:"dispose",value:function(){}}]),o}(),cj=h("W9HT"),oM=T.a.createContext({}),SY=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.handleClick=function(){n.processClick()},n.handleDropdownItemClick=function(e){n.processClick(e,!1)},n}return Object(be.a)(r,[{key:"processClick",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.name,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.props.dropdown;!this.props.disabled&&!t&&(e&&this.props.context.onClick(e),this.props.onClick&&this.props.onClick(e))}},{key:"renderButton",value:function(){var e,t=this.props,a=t.className,s=t.hidden,u=t.disabled,l=t.active,c=t.icon,f=t.text,d=t.dropdown,v=t.dropdownArrow,p=t.tooltip,y=t.tooltipProps,C=t.tooltipAsTitle,E=t.children,w=this.props.context.prefixCls,x="".concat(w,"-item"),N={onClick:this.handleClick,className:an()(x,(e={},Object(Xe.a)(e,"".concat(x,"-hidden"),s),Object(Xe.a)(e,"".concat(x,"-active"),l),Object(Xe.a)(e,"".concat(x,"-disabled"),u),Object(Xe.a)(e,"".concat(x,"-dropdown"),d),e),a)};p&&C&&(N.title=p);var j=T.a.createElement("button",Object.assign({type:"button"},N),c&&T.a.isValidElement(c)&&T.a.createElement("span",{className:"".concat(x,"-icon")},c),(f||E)&&T.a.createElement("span",{className:"".concat(x,"-text")},f||E),d&&v&&T.a.createElement("span",{className:"".concat(x,"-dropdown-arrow")}));return p&&!C&&!u?T.a.createElement(tE.a,Object.assign({title:p,placement:"bottom",mouseEnterDelay:0,mouseLeaveDelay:0},y),j):j}},{key:"render",value:function(){var e=this.props,t=e.dropdown,a=e.dropdownProps,s=e.disabled,u=this.renderButton();if(t!=null&&!s){var l=T.a.createElement("div",null,t.type===Bh?T.a.cloneElement(t,{onClick:this.handleDropdownItemClick}):t),c=Object.assign(Object.assign({trigger:["click"]},a),{disabled:s,overlay:l});return T.a.createElement(iE,Object.assign({},c),u)}return u}}]),r}(T.a.PureComponent),fj=function(i){return T.a.createElement(oM.Consumer,null,function(r){return T.a.createElement(SY,Object.assign({context:r},i))})};fj.defaultProps={dropdownArrow:!0};var TY=function(i){var r=i.children,n=i.className;return T.a.createElement(oM.Consumer,null,function(e){var t=e.prefixCls;return T.a.createElement("div",{className:an()("".concat(t,"-group"),n)},r)})},Rp=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){var n;return Object(De.a)(this,r),n=i.apply(this,arguments),n.onClick=function(e,t){n.props.onClick&&n.props.onClick(e,t)},n}return Object(be.a)(r,[{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,s=t.className,u=t.children,l=t.extra,c=t.size,f=t.align,d=t.hoverEffect,v="".concat(a,"-toolbar");return T.a.createElement("div",{className:an()(v,s,(e={},Object(Xe.a)(e,"".concat(v,"-").concat(c),c),Object(Xe.a)(e,"".concat(v,"-align-right"),f==="right"),Object(Xe.a)(e,"".concat(v,"-hover-effect"),d),e))},T.a.createElement("div",{className:"".concat(v,"-content")},T.a.createElement("div",{className:"".concat(v,"-content-inner")},T.a.createElement(oM.Provider,{value:{prefixCls:v,onClick:this.onClick}},u)),l&&T.a.createElement("div",{className:"".concat(v,"-content-extras")},l)))}}]),r}(T.a.PureComponent);(function(o){o.Item=fj,o.Group=TY,o.defaultProps={prefixCls:"x6",hoverEffect:!1}})(Rp||(Rp={}));var MY=function(i){var r=Ro(),n=i.item,e=i.layout,t=an()(Object(Xe.a)({},"xflow-toolbar-item",!0)),a=e==="vertical"?"":n.text,s=void 0;if(n.icon)s=n.icon;else if(n.iconName){var u=Zc.get(n.iconName);s=T.a.createElement(u,null)}var l=n.render,c=n.isEnabled,f=c===void 0?!0:c,d=r.commandService,v=r.modelService,p=function(){n.onClick&&n.onClick({toolbarItem:n,commandService:d,modelService:v})};return l?T.a.createElement(l,Object.assign({},n,{onClick:p}),T.a.createElement(Rp.Item,Object.assign({},n,{icon:s,text:a,className:t,disabled:!f,tooltip:n.tooltip||n.text,tooltipProps:Object.assign({placement:e==="vertical"?"left":"bottom"},n.tooltipProps),onClick:function(){}}))):T.a.createElement(Rp.Item,Object.assign({},n,{icon:s,text:a,className:t,hidden:!n,disabled:!f,tooltip:n.tooltip||n.text,onClick:p,tooltipProps:Object.assign(Object.assign({},n.tooltipProps),{placement:e==="vertical"?"left":"bottom"})}))},AY=function(i){var r=i.group,n=i.layout,e=T.a.useMemo(function(){return r.name||zc()},[r.name]),t=r.items,a=t===void 0?[]:t;if(a.length===0)return null;var s=an()(Object(Xe.a)({},"xflow-toolbar-group",!0));return T.a.createElement(Rp.Group,{className:s,key:e},a.map(function(u){return T.a.createElement(MY,{item:u,layout:n,key:u.id})}))},PY=function(i){var r=i.config,n=r.moduleId,e=Ro(),t=kp({name:n,layout:i.layout,mainGroups:[],extraGroups:[],customRender:null}),a=Object(Ue.a)(t,4),s=a[0],u=a[1],l=a[2],c=a[3];return T.a.useEffect(function(){var f=new vi,d=e.modelService.findDeferredModel(n);if(!d){var v=r.getConfig(),p=v.toolbarCustomRender,y=v.toolbarModelService,C=e.modelService.registerModel({id:n,modelFactory:function(){return l},watchChange:function(w){return ie(void 0,void 0,void 0,Object(D.a)().mark(function x(){var N;return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!y){B.next=3;break}return B.next=3,y(w,e.modelService,f);case 3:if(!p){B.next=7;break}return N=function(Z){w.setValue(function(fe){return fe.customRender=Z})},B.next=7,p(e.modelService,N);case 7:return B.abrupt("return",f);case 8:case"end":return B.stop()}},x)}))}});f.push(C)}return function(){f.dispose()}},[]),{isModelReady:c,state:s,setState:u,toolbarModel:l}},dj=function(i){var r=i.idx,n=i.groups,e=i.layout,t=i.toolbarOptions,a=t.hoverEffect,s=a===void 0?!0:a;return T.a.createElement(Rp,{hoverEffect:s},n.map(function(u,l){var c=r+l;return T.a.createElement(AY,{key:c,group:u,layout:e})}))},kY=function(i){var r,n=PY(i),e=n.isModelReady,t=n.state,a=kl(i.position),s=t.mainGroups,u=s===void 0?[]:s,l=t.extraGroups,c=l===void 0?[]:l,f=t.layout,d=t.customRender,v=an()(i.className,f,"xflow-toolbar"),p=an()((r={},Object(Xe.a)(r,f,!0),Object(Xe.a)(r,"xflow-toolbar-root",!0),r));return e?d?T.a.createElement("div",{className:v,style:Object.assign(Object.assign({},a),i.style)},T.a.createElement(d,{config:t})):T.a.createElement("div",{className:v,style:Object.assign(Object.assign({},a),i.style)},T.a.createElement("div",{className:p},u.length>0&&T.a.createElement(dj,{idx:"mainGroups",groups:u,layout:f,toolbarOptions:t}),c.length>0&&T.a.createElement(dj,{idx:"extraGroups",groups:c,layout:f,toolbarOptions:t}))):T.a.createElement("div",{className:v,style:Object.assign(Object.assign({},a),i.style)},T.a.createElement(cj.a,{spinning:!0,size:"small"}))},DY=T.a.memo(kY),hj=function(i){var r=Ro(),n=!!r,e=T.a.useMemo(function(){return i.config?i.config:new lj},[i.config]);return n?T.a.createElement(DY,Object.assign({},i,{config:e})):null},vj=function(i){return function(r){var n=T.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=T.a.useMemo(function(){var t=new lj;return i(t,n),t},[n]);return e}},IY=h("C/nq"),RY=h("CqGu"),NY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"},jY=NY,Np=h("6VBw"),gj=function(i,r){return at.createElement(Np.a,Object(al.a)(Object(al.a)({},i),{},{ref:r,icon:jY}))};gj.displayName="OneToOneOutlined";var LY=at.forwardRef(gj),_Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},FY=_Y,pj=function(i,r){return at.createElement(Np.a,Object(al.a)(Object(al.a)({},i),{},{ref:r,icon:FY}))};pj.displayName="CompressOutlined";var BY=at.forwardRef(pj),GY=h("3R4v"),zY=h("IehP"),Dy;(function(o){Zc.set("ZoomInOutlined",IY.a),Zc.set("ZoomOutOutlined",RY.a),Zc.set("OneToOneOutlined",LY),Zc.set("CompressOutlined",BY),Zc.set("FullscreenOutlined",GY.a),Zc.set("FullscreenExitOutlined",zY.a),o.ZOOM_IN=za.GRAPH_ZOOM.id+"-zoom-in",o.ZOOM_OUT=za.GRAPH_ZOOM.id+"-zoom-out",o.SCALE_TO_ONE=za.GRAPH_ZOOM.id+"-scale-to-one",o.SCALE_TO_FIT=za.GRAPH_ZOOM.id+"-scale-to-fit",o.FULLSCREEN=za.GRAPH_ZOOM.id+"-fullscreen",o.MAX_SCALE=1.5,o.MIN_SCALE=.05,o.zoomOptions={maxScale:o.MAX_SCALE,minScale:o.MIN_SCALE},o.getToolbarConfig=function(i){var r=i.zoomFactor,n=i.fullscreen;return[{name:"main",items:[{id:o.ZOOM_IN,tooltip:"\u653E\u5927",iconName:"ZoomInOutlined",onClick:function(t){var a=t.commandService;a.executeCommand(za.GRAPH_ZOOM.id,{factor:.1,zoomOptions:o.zoomOptions})}},{id:o.ZOOM_OUT,tooltip:"\u7F29\u5C0F",iconName:"ZoomOutOutlined",onClick:function(t){var a=t.commandService;a.executeCommand(za.GRAPH_ZOOM.id,{factor:-.1,zoomOptions:o.zoomOptions})}},{id:o.SCALE_TO_ONE,iconName:"OneToOneOutlined",tooltip:"\u7F29\u653E\u52301:1",isEnabled:r!==1,onClick:function(t){var a=t.commandService;a.executeCommand(za.GRAPH_ZOOM.id,{factor:"real",zoomOptions:o.zoomOptions})}},{id:o.SCALE_TO_FIT,tooltip:"\u7F29\u653E\u5230\u9002\u5E94\u5C4F\u5E55",iconName:"CompressOutlined",onClick:function(t){var a=t.commandService;a.executeCommand(za.GRAPH_ZOOM.id,{factor:"fit",zoomOptions:o.zoomOptions})}},{id:o.FULLSCREEN,tooltip:n?"\u9000\u51FA\u5168\u5C4F":"\u5168\u5C4F",iconName:n?"FullscreenExitOutlined":"FullscreenOutlined",onClick:function(t){var a=t.commandService;a.executeCommand(za.GRAPH_FULLSCREEN.id,{})}}]}]}})(Dy||(Dy={}));var zq="CANVAS_SCALE_TOOLBAR",UY=vj(function(o){o.setToolbarModelService(function(i,r){return ie(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,ge.GRAPH_SCALE.useValue(r);case 2:return e=u.sent,i.setValue(function(l){l.mainGroups=Dy.getToolbarConfig({zoomFactor:e.zoomFactor,fullscreen:!1})}),u.next=6,ge.GRAPH_FULLSCREEN.getModel(r);case 6:return t=u.sent,t.setValue(!1),t.watch(function(l){i.setValue(function(c){c.mainGroups=Dy.getToolbarConfig({zoomFactor:e.zoomFactor,fullscreen:l})})}),u.next=11,ge.GRAPH_SCALE.getModel(r);case 11:a=u.sent,a.watch(function(l){var c=l.zoomFactor;return ie(void 0,void 0,void 0,Object(D.a)().mark(function f(){var d;return Object(D.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,ge.GRAPH_FULLSCREEN.useValue(r);case 2:d=p.sent,i.setValue(function(y){y.mainGroups=Dy.getToolbarConfig({zoomFactor:c,fullscreen:d})});case 4:case"end":return p.stop()}},f)}))});case 13:case"end":return u.stop()}},n)}))})}),VY=function(i){var r=UY(i);return T.a.createElement(hj,Object.assign({layout:"vertical"},i,{config:r,position:i.position||{top:12,right:12}}))},ac=h("Vl3Y"),sM=h("2/Rp");function Uq(o){var i=o.className,r=o.layout,n=o.initialValues,e=o.form,t=o.formItems,a=t===void 0?[]:t,s=o.onFinish,u=o.submitButton,l=o.buttonProps;if(!e)return null;var c=r==="vertical"?{padding:"0px 12px"}:{padding:"8px 12px"};return T.a.createElement(ac.a,{size:"small",form:e,style:c,layout:r,onFinish:s,className:i,initialValues:n,labelCol:r==="vertical"?{span:24}:{span:8},wrapperCol:r==="vertical"?{span:24}:{span:16}},a.map(function(f){return T.a.createElement(ac.a.Item,Object.assign({label:f.label,name:f.name,rules:f.rules},f.itemProps),T.a.createElement(f.render,f.renderProps))}),T.a.createElement(ac.a.Item,{wrapperCol:{offset:0,span:24}},u||T.a.createElement(sM.a,Object.assign({type:"primary",htmlType:"submit",style:{width:"100%"}},l),"\u6267\u884C\u547D\u4EE4")))}function Vq(o,i){return Math.floor(Math.random()*(i-o)+o)}var mj=Symbol("IMinimapConfigProvider"),sE=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.registerHookHub=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new vi,a=[r.graphOptions.registerHook({name:"add minimap options",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d;return Object(D.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.minimapConfig.getConfig();case 2:d=p.sent,c.minimap=Object.assign({},d);case 4:case"end":return p.stop()}},f,this)}))}})],t.pushAll(a),u.abrupt("return",zr.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});Je([Te.inject(mj),Be("design:type",Object)],sE.prototype,"minimapConfig",void 0),sE=Je([Te.singleton({contrib:tc})],sE);var HY=function(i){return Te.Module(function(r){r(mj,{useDynamic:function(){return i}}),r(sE)})},Iy=function(o){Object(or.a)(r,o);var i=Object(sr.a)(r);function r(){return Object(De.a)(this,r),i.apply(this,arguments)}return Object(be.a)(r,[{key:"renderMarkup",value:function(){return this.renderJSONMarkup({tagName:"rect",selector:"body"})}},{key:"update",value:function(){Object(la.a)(Object(ca.a)(r.prototype),"update",this).call(this,{body:{refWidth:"100%",refHeight:"100%",fill:r.nodeFillColor}})}}]),r}(Ss);Iy.nodeFillColor="#31d0c6",Iy.setNodeFillColor=function(o){Iy.nodeFillColor=o};var WY="CanvasMiniMap",$Y=function(){return{grid:!1,enabled:!0,width:200,height:120,padding:8,graphOptions:{async:!0,getCellView:function(r){if(r.isNode())return Iy},createCellView:function(r){if(r.isEdge())return null}}}},XY=function(i){var r=i.nodeFillColor,n=i.borderColor,e=n===void 0?"#ced4de":n,t=i.handlerColor,a=t===void 0?"rgba(0,0,0,.3)":t,s=i.miniMapClz,u=s===void 0?"":s,l=i.position,c=l===void 0?{bottom:12,right:12}:l,f=i.minimapOptions,d=f===void 0?{}:f,v=T.a.useRef(null),p=T.a.useRef(i.minimapOptions),y=T.a.useMemo(function(){return new Set([u,"xflow-minimap","minimap-instacne-"+Date.now().toString()])},[u]),C=T.a.useMemo(function(){return function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function x(){return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.abrupt("return",Object.assign(Object.assign(Object.assign({},$Y()),p.current),{container:v.current}));case 1:case"end":return j.stop()}},x)}))}},[v]),E=kl(c);T.a.useEffect(function(){p.current=d},[p,d]),T.a.useEffect(function(){r&&Iy.setNodeFillColor(r)},[r]),T.a.useEffect(function(){var x=Array.from(y).reduce(function(B,$){return $?"".concat(B,".").concat($):B},""),N=`
      `.concat(x,` .x6-widget-minimap-viewport {
        border: 1px solid `).concat(e,`;
        margin: 0;
      }
      `).concat(x,` .x6-widget-minimap-viewport-zoom {
        border: 1px solid `).concat(a,`;
      }
    `),j=CD(N);return function(){document.head.removeChild(j)}},[e,y,a]);var w=Array.from(y).join(" ");return T.a.createElement(I0,{config:{getConfig:C,CONFIG_TYPE:WY},createModule:HY},T.a.createElement("div",{ref:v,className:w,style:E}))},KY=function(){function o(){Object(De.a)(this,o),this.getValue=function(){return{}}}return Object(be.a)(o,[{key:"dispose",value:function(){this.getValue=function(){return null}}}]),o}(),Hq=function(){function o(i){Object(De.a)(this,o),this.moduleId=i}return Object(be.a)(o,[{key:"dispose",value:function(){}}]),o}(),yj=T.a.createContext({propsProxy:null,commandService:null,modelService:null}),Gh=function(){return T.a.useContext(yj)},zh=function(i){var r,n=i.className,e=i.position,t=i.style,a=i.children,s=Ro(),u=kl(e),l=T.a.useMemo(function(){return new KY},[]);if(T.a.useEffect(function(){return function(){l.dispose()}},[l]),!s||!s.modelService)return null;l.getValue=function(){return i};var c=an()((r={},Object(Xe.a)(r,n,!!n),Object(Xe.a)(r,"xflow-workspace-panel",!0),r)),f=s.commandService,d=s.modelService;return T.a.createElement(yj.Provider,{value:{propsProxy:l,commandService:f,modelService:d}},T.a.createElement("div",{className:c,style:Object.assign(Object.assign({},u),t)},a))},bj=h("MJZm"),Cj=h("diRs"),tg=h("ECub"),YY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},ZY=YY,Ej=function(i,r){return at.createElement(Np.a,Object(al.a)(Object(al.a)({},i),{},{ref:r,icon:ZY}))};Ej.displayName="FolderOpenFilled";var JY=at.forwardRef(Ej),QY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},qY=QY,Oj=function(i,r){return at.createElement(Np.a,Object(al.a)(Object(al.a)({},i),{},{ref:r,icon:qY}))};Oj.displayName="FolderFilled";var eZ=at.forwardRef(Oj),jp={HORIRONTAL_NODE:"xflow-node-horizontal-edge",VERTICAL_NODE:"xflow-node-vertical-edge",VERTICAL_GROUP:"xflow-group-vertical-edge"},uE={EDGE:"xflow-edge"},uM="XFLOW_NODE_SHAPE",wj="processing",tZ=160,nZ=32,Lp;(function(o){o.id="GRAPH_STATUS_INFO";var i;(function(r){r.SUCCESS="success",r.PROCESSING="processing",r.ERROR="error",r.DEFAULT="default",r.WARNING="warning"})(i=o.StatusEnum||(o.StatusEnum={})),o.getModel=$o(o.id),o.useValue=Xo(o.id)})(Lp||(Lp={}));var lE;(function(o){o.QUERY_GRAPH_STATUS={id:"xflow:query-graph-status",label:"\u67E5\u8BE2\u753B\u5E03\u8282\u70B9\u72B6\u6001"}})(lE||(lE={}));var Ry,cE=we.AnchorGroup;Wi.registry.exist(uM)?Ry=Wi.registry.get(uM):Ry=R0.define({width:tZ,height:nZ,shape:uM,view:L.X6_NODE_PORTAL_NODE_VIEW,ports:{groups:{top:{zIndex:2,position:{name:cE.TOP}},bottom:{zIndex:2,position:{name:cE.BOTTOM}},right:{zIndex:2,position:{name:cE.RIGHT}},left:{zIndex:2,position:{name:cE.LEFT}}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%",zIndex:1}},portMarkup:[{tagName:"g",selector:"xflow-port-group",className:"xflow-port-group",attrs:{width:8,height:8,x:-4,y:-4,zIndex:10,magnet:"true"},children:[{tagName:"circle",selector:"xflow-port",className:"xflow-port",attrs:{r:4,fill:"#fff",stroke:"#d9d9d9",zIndex:12}},{tagName:"polygon",selector:"xflow-port-arrow",className:"xflow-port-arrow",attrs:{points:"0,0 8,0 4,4 ",fill:"#d9d9d9",stroke:"#d9d9d9",zIndex:13,transform:"translate(-4,0)"}}]}]});var rZ=bj.a.DirectoryTree,xj=bj.a.TreeNode,aZ=function(i){var r=i.expanded;return r?T.a.createElement(JY,null):T.a.createElement(eZ,null)},Sj=function(i){return new Ry(i)},Tj=function(i){var r=i.nodeConfig,n=i.onMouseDown,e=i.graphConfig,t=i.modelService,a=i.commandService;if(!e)return T.a.createElement("div",null);if(r.renderComponent)return T.a.createElement("div",{onMouseDown:n},T.a.createElement(r.renderComponent,{data:r,isNodeTreePanel:!0}));var s=e.nodeTypeParser(r)||L.XFLOW_DEFAULT_NODE,u=e.nodeRender.get(s);return T.a.createElement("div",{onMouseDown:n},T.a.createElement(u,{commandService:a,modelService:t,data:r,isNodeTreePanel:!0}))},lM=function(i){var r=Object(at.useState)(!1),n=Object(Ue.a)(r,2),e=n[0],t=n[1],a=Object(at.useState)(),s=Object(Ue.a)(a,2),u=s[0],l=s[1],c=Ro(),f=c.getGraphConfig;T.a.useEffect(function(){f().then(function(x){l(x.appContainer)})});var d=i.prefixClz,v=i.graphConfig,p=i.commandService,y=i.modelService,C=i.popoverContent,E=i.onMouseDown,w=i.item;return T.a.createElement(T.a.Fragment,null,C&&T.a.createElement(Cj.a,{placement:"right",destroyTooltipOnHide:!0,content:C,visible:e,onVisibleChange:function(N){t(N)},getPopupContainer:function(){return u||document.body}},T.a.createElement("div",{className:"".concat(d,"-node-wrapper"),onMouseEnter:function(){t(!0)}},Tj({graphConfig:v,commandService:p,onMouseDown:E,modelService:y,nodeConfig:w}))),!C&&T.a.createElement("div",{className:"".concat(d,"-node-wrapper"),onMouseEnter:function(){t(!0)}},Tj({graphConfig:v,commandService:p,onMouseDown:E,modelService:y,nodeConfig:w})))},iZ=function(i){var r=i.x6NodeFactory,n=i.dndOptions,e=i.onNodeDrop,t=i.state,a=i.onFolderExpand,s=i.prefixClz,u=Ro(),l=u.graphProvider,c=u.modelService,f=u.commandService,d=T.a.useState(),v=Object(Ue.a)(d,2),p=v[0],y=v[1],C=T.a.useState(),E=Object(Ue.a)(C,2),w=E[0],x=E[1],N=T.a.useState(),j=Object(Ue.a)(N,2),B=j[0],$=j[1];T.a.useEffect(function(){l.getGraphInstance().then(function(de){$(de)})}),T.a.useEffect(function(){if(l.getGraphOptions().then(function(xe){y(xe)}),!!B){var de=new pe.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},n),{target:B,validateNode:function(Ae){return ie(void 0,void 0,void 0,Object(D.a)().mark(function Ye(){var rt;return Object(D.a)().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(rt=Object.assign(Object.assign({},Ae.getData()),Ae.getPosition()),!e){ot.next=6;break}return ot.next=4,e(rt,f,c);case 4:ot.next=7;break;case 6:console.error("onNodeDrop method is required in NodeTree Panel");case 7:return ot.abrupt("return",!1);case 8:case"end":return ot.stop()}},Ye)}))}}));x(de)}},[f,n,B,l,c,e]);var Z=T.a.useCallback(function(de){return function(xe){if(!(!B||!w||!p)){var Ae=p.nodeTypeParser(de),Ye=de.renderComponent?de.renderComponent:p.nodeRender.get(Ae),rt=r2(Ye,f,c),je={data:de,width:de.width||180,height:de.height||40,view:p.graphId,component:rt},ot=r?r(je):Sj(je);w.start(ot,xe.nativeEvent)}}},[f,w,B,p,c,r]),fe=T.a.useCallback(function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return de.map(function(xe){var Ae=xe.isDirectory,Ye=xe.children,rt=xe.popoverContent;return Ae?T.a.createElement(xj,{icon:aZ,key:xe.id,title:xe.label,className:"".concat(s,"-tree-folder")},fe(Ye)):T.a.createElement(xj,{isLeaf:!0,key:xe.id,className:"".concat(s,"-tree-leaf"),icon:T.a.createElement("span",null),title:T.a.createElement(lM,{item:xe,onMouseDown:Z(xe),popoverContent:rt,prefixClz:s,modelService:c,commandService:f,graphConfig:p})})})},[f,p,c,Z,s]);return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(s,"-body"),style:i.style},!t.keyword&&T.a.createElement(rZ,{showIcon:!0,selectable:!1,autoExpandParent:!1,onExpand:a,expandedKeys:t.expandedKeys,className:"".concat(s,"-tree")},fe(t.treeData)),t.searchList.length>0&&T.a.createElement("ul",{className:"".concat(s,"-body-list")},t.searchList.map(function(de){return T.a.createElement("li",{key:de.id,className:"".concat(s,"-body-list-item")},T.a.createElement(lM,{item:de,onMouseDown:Z(de),popoverContent:de.popoverContent,prefixClz:s,modelService:c,commandService:f,graphConfig:p}))})),t.keyword&&t.searchList.length===0&&T.a.createElement(tg.a,{style:{marginTop:"48px"}})))},_p=h("5rEg"),oZ=function(i){var r=i.prefixClz,n=i.onKeywordChange,e=Gh(),t=e.propsProxy,a=t.getValue();return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(r,"-header"),style:i.style},a.header&&T.a.isValidElement(a.header)&&a.header,a.searchService&&T.a.createElement("div",{className:"".concat(r,"-header-search")},T.a.createElement(_p.a,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:function(u){return n(u.target.value)},style:{width:"100%",border:0}}))))},sZ=function(i){var r=i.prefixClz,n=Gh(),e=n.propsProxy,t=e.getValue();return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(r,"-footer"),style:i.style},t.footer&&T.a.isValidElement(t.footer)&&t.footer))},uZ=40,lZ=40,Mj="XFLOW_TREE_PANEL_ROOT_ID",Aj=function(i){var r=i&&i.headerPosition&&i.headerPosition.height||uZ,n=i.footerPosition&&i.footerPosition.height||lZ;return{headerStyle:kl(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},i.headerPosition)),bodyStyle:kl(Object.assign({left:0,right:0,top:r,bottom:n},i.bodyPosition)),footerStyle:kl(Object.assign({left:0,right:0,lineHeight:n,height:n,bottom:0},i.footerPosition))}},cZ=h("qPyV"),fZ=h.n(cZ),Ny;(function(o){var i=this;o.id="TREE_PANEL_MODEL",o.useModel=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.awaitModel(o.id));case 1:case"end":return t.stop()}},n)}))}})(Ny||(Ny={}));var Wq=function(i,r){i.executeCommand(rp.UPDATE_MODEL.id,{getModel:function(e){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Ny.useModel(e));case 1:case"end":return s.stop()}},t)}))},updateModel:r})},dZ=function(i){var r=i.treeDataService,n=i.searchService,e=Ro(),t=e.modelService,a=kp({treeData:[],searchList:[],treeNodeList:[],expandedKeys:[],defaultExpandAll:!1,keyword:""}),s=Object(Ue.a)(a,3),u=s[0],l=s[1],c=s[2];T.a.useEffect(function(){t.findDeferredModel(Ny.id)||t.registerModel({id:Ny.id,modelFactory:function(){return c},watchChange:function(p){return ie(void 0,void 0,void 0,Object(D.a)().mark(function y(){var C,E,w;return Object(D.a)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,ge.GRAPH_META.getModel(t);case 2:return C=N.sent,E=function(B){return ie(void 0,void 0,void 0,Object(D.a)().mark(function $(){var Z,fe,de,xe,Ae,Ye;return Object(D.a)().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:return je.next=2,r(B,t);case 2:return Z=je.sent,fe=hZ(Z),de=fe.treeData,xe=fe.rootNodes,je.next=6,p.getValidValue();case 6:return Ae=je.sent,Ye=Ae.expandedKeys.length>0?Ae.expandedKeys:xe.map(function(ot){return ot.id}),je.abrupt("return",{listData:Z,treeData:de,expandedKeys:Ye});case 9:case"end":return je.stop()}},$)}))},w=C.watch(function(j){return ie(void 0,void 0,void 0,Object(D.a)().mark(function B(){var $;return Object(D.a)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,E(j);case 2:$=fe.sent,p.setValue({treeNodeList:$.listData,treeData:$.treeData,expandedKeys:$.expandedKeys,defaultExpandAll:!1,keyword:"",searchList:[]});case 4:case"end":return fe.stop()}},B)}))}),N.abrupt("return",zr.create(function(){w.dispose()}));case 6:case"end":return N.stop()}},y)}))}})},[]);var f=T.a.useCallback(function(v){l(function(p){p.expandedKeys=v})},[l]),d=T.a.useCallback(function(v){return ie(void 0,void 0,void 0,Object(D.a)().mark(function p(){var y;return Object(D.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(n){E.next=2;break}return E.abrupt("return",console.warn("searchService is not defined"));case 2:if(!v){E.next=9;break}return E.next=5,n(u.treeNodeList,v);case 5:y=E.sent,l(function(w){w.keyword=v,w.searchList=y}),E.next=10;break;case 9:l(function(w){w.keyword="",w.searchList=[]});case 10:case"end":return E.stop()}},p)}))},[n,u.treeNodeList]);return{state:u,setState:l,onKeywordChange:d,onFolderExpand:f}};function hZ(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=function(s){var u=fZ()(s,"id"),l=u.reduce(function(c,f){var d=f.parentId||Mj;c.has(d)||c.set(d,[]);var v=c.get(d);return v.push(f),c},new Map);return l},r=i(UN()(o));function n(a,s){return a.map(function(u){if(s.has(u.id)){var l=s.get(u.id);u.key=u.id,u.isDirectory=!0,u.children=n(l,s)||[]}else u.isLeaf=!0;return u})}var e=r.get(Mj)||[],t=n(e,r);return{treeData:t,rootNodes:e}}var Pj;(function(o){o.id="TREE_PANEL_DATA"})(Pj||(Pj={}));var vZ=function(i){var r=Aj(i),n=r.headerStyle,e=r.bodyStyle,t=r.footerStyle,a=dZ(i),s=a.state,u=a.onFolderExpand,l=a.onKeywordChange;return T.a.createElement(T.a.Fragment,null,T.a.createElement(oZ,Object.assign({},i,{state:s,style:n,onKeywordChange:l})),T.a.createElement(iZ,Object.assign({},i,{state:s,style:e,onFolderExpand:u})),T.a.createElement(sZ,Object.assign({},i,{state:s,style:t})))},$q=function(i){var r=fp("node-dnd-panel");return T.a.createElement(zh,Object.assign({},i,{className:r}),T.a.createElement(vZ,Object.assign({},i,{prefixClz:r})))},gZ=function(i){return new Ry(i)},pZ=function(i){var r=i.x6NodeFactory,n=i.dndOptions,e=i.onNodeDrop,t=Ro(),a=t.graphProvider,s=t.modelService,u=t.commandService,l=T.a.useState(),c=Object(Ue.a)(l,2),f=c[0],d=c[1],v=T.a.useState(),p=Object(Ue.a)(v,2),y=p[0],C=p[1],E=T.a.useState(),w=Object(Ue.a)(E,2),x=w[0],N=w[1];T.a.useEffect(function(){a.getGraphInstance().then(function(B){N(B)}),a.getGraphOptions().then(function(B){d(B)})},[a,N,d]),T.a.useEffect(function(){if(!!x){var B=new pe.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},n),{target:x,validateNode:function(Z){return ie(void 0,void 0,void 0,Object(D.a)().mark(function fe(){var de;return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:if(de=Object.assign(Object.assign({},Z.getData()),Z.getPosition()),!e){Ae.next=6;break}return Ae.next=4,e(de,u,s);case 4:Ae.next=7;break;case 6:console.error("onNodeDrop method is required in NodeTree Panel");case 7:return Ae.abrupt("return",!1);case 8:case"end":return Ae.stop()}},fe)}))}}));return C(B),function(){B.dispose()}}},[u,s,n,x,e]);var j=T.a.useCallback(function(B){return function($){if(!(!x||!y||!f)&&!B.isDisabled){var Z=f.nodeTypeParser(B),fe=B.renderComponent?B.renderComponent:f.nodeRender.get(Z),de=r2(fe,u,s),xe={data:B,width:B.width||180,height:B.height||40,view:f.graphId,component:de},Ae=r?r(xe):gZ(xe);y.start(Ae,$.nativeEvent)}}},[u,y,x,f,s,r]);return{graphConfig:f,onMouseDown:j,modelService:s,commandService:u}},kj=function(i){var r=i.nodeConfig,n=i.onMouseDown,e=i.graphConfig,t=i.modelService,a=i.commandService;if(!e)return T.a.createElement("div",null);if(r.renderComponent)return T.a.createElement("div",{onMouseDown:n},T.a.createElement(r.renderComponent,{data:r,isNodePanel:!0}));var s=e.nodeTypeParser(r)||L.XFLOW_DEFAULT_NODE,u=e.nodeRender.get(s);return T.a.createElement("div",{onMouseDown:n},T.a.createElement(u,{commandService:a,modelService:t,data:r,isNodeTreePanel:!0}))},Dj=function(i){var r=T.a.useState(!1),n=Object(Ue.a)(r,2),e=n[0],t=n[1],a=i.prefixClz,s=i.graphConfig,u=i.commandService,l=i.modelService,c=i.popoverContent,f=i.onMouseDown,d=i.item;return T.a.createElement(T.a.Fragment,null,c?T.a.createElement(Cj.a,{placement:"right",destroyTooltipOnHide:!0,content:c,visible:e,onVisibleChange:function(p){t(p)}},T.a.createElement("div",{className:"".concat(a,"-node-wrapper"),onMouseEnter:function(){t(!0)}},kj({graphConfig:s,commandService:u,onMouseDown:f,modelService:l,nodeConfig:d}))):T.a.createElement("div",{className:"".concat(a,"-node-wrapper")},kj({graphConfig:s,commandService:u,onMouseDown:f,modelService:l,nodeConfig:d})))},mZ=function(i){var r=i.searchResult,n=i.prefixClz,e=i.onMouseDown,t=i.modelService,a=i.commandService,s=i.graphConfig;return r.length===0?T.a.createElement(tg.a,{style:{marginTop:"24px"}}):T.a.createElement("ul",{className:"xflow-collapse-search-list"},r.map(function(u){return T.a.createElement("li",{className:"xflow-collapse-search-list-item ".concat(u.isDisabled?"disabled":""),key:u.id},T.a.createElement(Dj,{item:u,onMouseDown:e(u),popoverContent:u.popoverContent,prefixClz:n,modelService:t,commandService:a,graphConfig:s}))}))},yZ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},bZ=yZ,Ij=function(i,r){return at.createElement(Np.a,Object(al.a)(Object(al.a)({},i),{},{ref:r,icon:bZ}))};Ij.displayName="CaretRightOutlined";var CZ=at.forwardRef(Ij),EZ=function(i){var r=i.onActiveKeyChange,n=i.collapseData,e=i.prefixClz,t=i.onMouseDown,a=i.modelService,s=i.commandService,u=i.graphConfig,l=function(d){var v=d.header,p=d.extra,y=d.icon,C=d.isCollapsed,E=function(x){x.preventDefault(),r(d.id)};return T.a.createElement("div",{className:"xflow-collapse-header",onClick:E},T.a.createElement("div",{className:"xflow-collapse-header-icon"},t2(y)?T.a.createElement(y,{isCollapsed:C}):T.a.createElement(CZ,{rotate:C?0:90,style:{fontSize:"12px"}})),T.a.createElement("div",{className:"xflow-collapse-header-label"},t2(v)?T.a.createElement(v,d):v),T.a.createElement("div",{className:"xflow-collapse-header-extra"},t2(p)?T.a.createElement(p,d):p))},c=function(d){return T.a.createElement("div",{className:"xflow-collapse-content"},d.map(function(v){return T.a.createElement("div",{className:"xflow-collapse-content-item ".concat(v.isDisabled?"disabled":""),key:v.id},T.a.createElement(Dj,{item:v,onMouseDown:t(v),popoverContent:v.popoverContent,prefixClz:e,modelService:a,commandService:s,graphConfig:u}))}))};return T.a.createElement("ul",{className:"xflow-collapse-list"},n.length===0&&T.a.createElement(tg.a,{style:{marginTop:"24px"}}),n.map(function(f){var d=f.children,v=d===void 0?[]:d,p=f.isCollapsed,y=f.render,C=p?"close":"open";return T.a.createElement("li",{className:"xflow-collapse-list-item ".concat(C),key:f.id},l(f),t2(y)?T.a.createElement(y,f):c(v))}))},OZ=function(i){var r=i.state,n=i.prefixClz,e=i.onActiveKeyChange,t=pZ(i),a=t.graphConfig,s=t.onMouseDown,u=t.modelService,l=t.commandService,c=r.searchResult,f=r.collapseData,d=r.keyword;return T.a.createElement("div",{className:"".concat(n,"-body"),style:i.style},d.length===0&&T.a.createElement(EZ,{onActiveKeyChange:e,collapseData:f,onMouseDown:s,modelService:u,commandService:l,graphConfig:a,prefixClz:n}),d.length>0&&T.a.createElement(mZ,{searchResult:c,onMouseDown:s,modelService:u,commandService:l,graphConfig:a,prefixClz:n}))},wZ=function(i){var r=i.prefixClz,n=i.onKeywordChange,e=i.state,t=Gh(),a=t.propsProxy,s=a.getValue(),u=function(c){var f=e.collapseData.reduce(function(d,v){return v.children&&d.push.apply(d,Object(Qe.a)(v.children)),d},[]);n(c.target.value,f)};return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(r,"-header"),style:i.style},s.header&&T.a.isValidElement(s.header)&&s.header,s.searchService&&T.a.createElement("div",{className:"".concat(r,"-header-search")},T.a.createElement(_p.a,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:function(c){return u(c)},style:{width:"100%",border:0}}))))},xZ=function(i){var r=i.prefixClz,n=Gh(),e=n.propsProxy,t=e.getValue();return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(r,"-footer"),style:i.style},t.footer&&T.a.isValidElement(t.footer)&&t.footer))},SZ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"outlined"},TZ=SZ,Rj=function(i,r){return at.createElement(Np.a,Object(al.a)(Object(al.a)({},i),{},{ref:r,icon:TZ}))};Rj.displayName="CaretLeftOutlined";var MZ=at.forwardRef(Rj),AZ=function(i){var r=i.prefixClz,n=i.onCollapseBtnClick,e=i.isCollapsed,t=i.collapseButtonStyle,a=i.style;return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(r,"-header"),style:Object.assign(Object.assign({},a),t),onClick:n},T.a.createElement(MZ,{rotate:e?180:0})))},PZ=40,kZ=40,DZ=function(i){var r=i&&i.headerPosition&&i.headerPosition.height||PZ,n=i.footerPosition&&i.footerPosition.height||kZ;return{headerStyle:kl(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},i.headerPosition)),bodyStyle:kl(Object.assign({left:0,right:0,top:r,bottom:n},i.bodyPosition)),footerStyle:kl(Object.assign({left:0,right:0,lineHeight:n,height:n,bottom:0},i.footerPosition))}},jy;(function(o){var i=this;o.id="COLLAPSE_PANEL_DATA",o.useModel=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.awaitModel(o.id));case 1:case"end":return t.stop()}},n)}))}})(jy||(jy={}));var Xq=function(i,r){i.executeCommand(rp.UPDATE_MODEL.id,{getModel:function(e){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",jy.useModel(e));case 1:case"end":return s.stop()}},t)}))},updateModel:r})},IZ=function(i){var r=i.collapsible,n=i.nodeDataService,e=i.searchService,t=i.onCollapseChange,a=Ro(),s=a.modelService,u=kp({keyword:"",collapseData:[],searchResult:[]}),l=Object(Ue.a)(u,3),c=l[0],f=l[1],d=l[2];T.a.useEffect(function(){s.findDeferredModel(jy.id)||s.registerModel({id:jy.id,modelFactory:function(){return d},watchChange:function(C){return ie(void 0,void 0,void 0,Object(D.a)().mark(function E(){var w,x,N;return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,ge.GRAPH_META.getModel(s);case 2:return w=B.sent,x=function(Z){return ie(void 0,void 0,void 0,Object(D.a)().mark(function fe(){var de;return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,n(Z,s);case 2:return de=Ae.sent,Ae.abrupt("return",{collapseData:de});case 4:case"end":return Ae.stop()}},fe)}))},N=w.watch(function($){return ie(void 0,void 0,void 0,Object(D.a)().mark(function Z(){var fe,de;return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,x($);case 2:fe=Ae.sent,de=fe.collapseData,C.setValue(function(Ye){Ye.keyword="",Ye.collapseData=de,Ye.searchResult=[]});case 5:case"end":return Ae.stop()}},Z)}))}),B.abrupt("return",zr.create(function(){N.dispose()}));case 6:case"end":return B.stop()}},E)}))}})},[]);var v=T.a.useCallback(function(y){f(function(C){C.collapseData.forEach(function(E){E.id===y&&E.collapsible!==!1&&(E.isCollapsed=!E.isCollapsed)})})},[f]),p=T.a.useCallback(function(y,C){return ie(void 0,void 0,void 0,Object(D.a)().mark(function E(){var w;return Object(D.a)().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(e){N.next=2;break}return N.abrupt("return",console.warn("searchService is not defined"));case 2:if(!y){N.next=9;break}return N.next=5,e(C,y);case 5:w=N.sent,f(function(j){j.keyword=y,j.searchResult=w}),N.next=10;break;case 9:f(function(j){j.keyword="",j.searchResult=[]});case 10:case"end":return N.stop()}},E)}))},[e]);return{state:c,collapsible:r,setState:f,onKeywordChange:p,onActiveKeyChange:v,onCollapseChange:t}},RZ=function(i){var r=DZ(i),n=r.headerStyle,e=r.bodyStyle,t=r.footerStyle,a=IZ(i),s=a.state,u=a.onActiveKeyChange,l=a.onKeywordChange;return T.a.createElement(T.a.Fragment,null,T.a.createElement(wZ,Object.assign({},i,{state:s,style:n,onKeywordChange:l})),T.a.createElement(OZ,Object.assign({},i,{state:s,style:e,onActiveKeyChange:u})),T.a.createElement(xZ,Object.assign({},i,{state:s,style:t})))},NZ=function(i){var r=i.position,n=i.collapsible,e=i.onCollapseChange,t=r.width,a=t===void 0?200:t,s=r.left,u=fp("collapse-panel"),l=Object(at.useState)(!1),c=Object(Ue.a)(l,2),f=c[0],d=c[1],v=Object(at.useCallback)(function(){d(!f),e(!f)},[f,e]);return T.a.createElement(zh,Object.assign({},i,{className:u,position:Object.assign(Object.assign({},r),{left:f?-a:s}),style:{transition:"left 0.5s"}}),T.a.createElement(RZ,Object.assign({},i,{prefixClz:u})),n&&T.a.createElement(AZ,Object.assign({},i,{prefixClz:u,isCollapsed:f,onCollapseBtnClick:v,style:{position:"absolute",zIndex:1,width:13,right:-13,bottom:20,padding:"12px 0px",textAlign:"center",borderWidth:"1px 1px 1px 0",borderStyle:"solid solid solid",borderColor:"rgb(232, 232, 232) rgb(232, 232, 232) rgb(232, 232, 232)",cursor:"pointer"}})))},jZ=function(i){var r=i.state,n=Gh(),e=n.propsProxy,t=e.getValue(),a=Ro(),s=t.footer&&typeof t.footer=="function";return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(i.prefixClz,"-footer"),style:i.style},s&&T.a.createElement(t.footer,Object.assign(Object.assign({},i),{headerStyle:{},bodyStyle:{},footerStyle:i.style,targetData:r.targetData,targetType:r.targetType,modelService:a.modelService,commandService:a.commandService})),!t.footer&&T.a.createElement("div",{className:"".concat(i.prefixClz,"-footer-title")},t.footerText)))},LZ=function(i){var r=i.prefixClz,n=i.hasSchema,e=i.state,t=Gh(),a=t.propsProxy,s=a.getValue(),u=Ro();if(n)return null;var l=s.header&&typeof s.header=="function";return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(r,"-header"),style:i.style},l&&T.a.createElement(s.header,Object.assign(Object.assign({},i),{headerStyle:i.style,bodyStyle:{},footerStyle:{},targetData:e.targetData,targetType:e.targetType,modelService:u.modelService,commandService:u.commandService})),!s.header&&T.a.createElement("div",{className:"".concat(r,"-header-title")},s.headerText||"Panel")))},Nj=h("ZTPi"),_Z=function(i){var r=i.text,n=Kt(i,["text"]);return r?T.a.createElement(tE.a,Object.assign({placement:"left",title:r},n),T.a.createElement("div",{className:"text-truncate"},r)):null};function Fp(o){if(!!o)return T.a.createElement(_Z,{text:o})}var FZ=h("mwIZ"),jj=h.n(FZ);function BZ(o,i){return function(r,n){var e=o.some(function(t){return typeof(t==null?void 0:t.condition)=="function"});return e?(typeof i=="function"&&i(void 0),!0):o.some(function(t){var a=t.name;if(!a)return console.error("[Schema form]: A dependent name must be provided in the updater when the dependency condition is not a function."),!1;var s=jj()(r,a)!==jj()(n,a);return s?(typeof i=="function"&&i(a),!0):!1})}}function GZ(o){return o===""||o===void 0}function zZ(o,i,r){var n=o.getFieldValue,e=o.getFieldsValue,t=i.dependencies,a=i.hidden,s=i.disabled,u=a,l=s;return t==null||t.forEach(function(c){var f=c.name,d=c.condition,v=c.hidden,p=c.disabled;if(!(typeof d!="function"&&r&&f!==r)){var y=!1;if(typeof d=="function"){var C=e();y=!!d(C)}else{if(!f){console.error("[Schema form]: A dependent name must be provided in the props genarator when the dependency condition is not a function.");return}y=n(f)===d}y&&(v!==void 0&&(u=v),p!==void 0&&(l=p))}}),{hidden:u,disabled:l}}var Uh=function(i){var r=i.schema,n=i.children,e=Object(at.useState)(),t=Object(Ue.a)(e,2),a=t[0],s=t[1],u=r.dependencies,l=r.value,c=r.defaultValue,f=r.hidden,d=r.disabled,v=Object(at.useMemo)(function(){return(u==null?void 0:u.length)?BZ(u,s):void 0},[u]);if(typeof n!="function")throw new Error("[Schema Form]: chilren of FormItemWrapper should be a render prop.");var p=GZ(l)?c:l;return v?T.a.createElement(ac.a.Item,{noStyle:!0,shouldUpdate:v},function(y){var C=zZ(y,r,a),E=C.hidden,w=C.disabled;return n({hidden:E,disabled:w,initialValue:p})}):n({hidden:f,disabled:d,initialValue:p})},Lj=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.placeholder,l=r.rules;return T.a.createElement(Uh,{schema:r},function(c){var f=c.disabled,d=c.hidden,v=c.initialValue;return T.a.createElement(ac.a.Item,{name:a,label:s,initialValue:v,tooltip:e,extra:Fp(t),required:n,hidden:d,rules:l},T.a.createElement(_p.a,{className:"xflow-form-input",allowClear:!0,placeholder:u,disabled:f}))})},UZ=h("kaz8"),VZ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.rules;return T.a.createElement(Uh,{schema:r},function(l){var c=l.hidden,f=l.disabled,d=l.initialValue;return T.a.createElement(ac.a.Item,{className:"xflow-form-checkbox",name:a,rules:u,initialValue:d,tooltip:e,extra:Fp(t),required:n,hidden:c,valuePropName:"checked",getValueProps:function(p){var y={true:!0,false:!1};return{checked:!!y[p]}}},T.a.createElement(UZ.a,{disabled:f},s))})},HZ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.placeholder,l=r.rules;return T.a.createElement(Uh,{schema:r},function(c){var f=c.hidden,d=c.disabled,v=c.initialValue;return T.a.createElement(ac.a.Item,{name:a,label:s,initialValue:v,tooltip:e,extra:Fp(t),required:n,hidden:f,rules:l},T.a.createElement(_p.a.TextArea,{allowClear:!0,placeholder:u,rows:3,disabled:d}))})},cM=h("2fM7"),WZ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.placeholder,l=r.options,c=l===void 0?[]:l,f=r.rules;return T.a.createElement(Uh,{schema:r},function(d){var v=d.hidden,p=d.disabled,y=d.initialValue;return T.a.createElement(ac.a.Item,{name:a,label:s,initialValue:y,tooltip:e,extra:Fp(t),required:n,hidden:v,rules:f},T.a.createElement(cM.a,{disabled:p,placeholder:u},c.map(function(C){var E=C.title,w=C.value;return T.a.createElement(cM.a.Option,{key:w.toString(),value:w},E)})))})},$Z=h("+eQT"),XZ=h("wd/R"),fM=h.n(XZ),KZ=function(i){var r=i.className,n=i.style,e=i.disabled,t=i.value,a=i.onChange,s=Object(at.useState)(t?fM()(t):void 0),u=Object(Ue.a)(s,2),l=u[0],c=u[1],f=Object(at.useRef)(!1);Object(at.useEffect)(function(){if(!f.current){f.current=!0;return}var v=fM()(t);v.isValid()&&c(v)},[t]);var d=Object(at.useCallback)(function(v,p){var y=fM()(p);c(y.isValid()?y:void 0),typeof a=="function"&&a(y.isValid()?y.format("YYYY-MM-DD HH:mm:ss"):"")},[a]);return T.a.createElement($Z.a,{showTime:!0,allowClear:!0,className:r,style:n,disabled:e,value:l,onChange:d})},YZ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.rules;return T.a.createElement(Uh,{schema:r},function(l){var c=l.disabled,f=l.hidden,d=l.initialValue;return T.a.createElement(ac.a.Item,{name:a,label:s,initialValue:d,tooltip:e,extra:Fp(t),required:n,hidden:f,rules:u},T.a.createElement(KZ,{style:{width:"100%"},disabled:c}))})},dM=h("fyUT");function fE(o){var i=Number(o);return Number.isNaN(i)?void 0:i}var ZZ=function(i){var r=i.disabled,n=i.placeholder,e=i.value,t=i.onChange,a=Object(at.useState)(fE(e)),s=Object(Ue.a)(a,2),u=s[0],l=s[1],c=Object(at.useRef)(!1);Object(at.useEffect)(function(){c.current||(c.current=!0),l(fE(e))},[e]);var f=Object(at.useCallback)(function(d){l(d),typeof t=="function"&&(d===void 0?t(""):typeof fE(d)=="number"&&t(fE(d)))},[t]);return T.a.createElement(dM.a,{style:{width:"100%"},size:"small",placeholder:n,value:u,onChange:f,disabled:r})},JZ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.placeholder,l=r.rules;return T.a.createElement(Uh,{schema:r},function(c){var f=c.disabled,d=c.hidden,v=c.initialValue;return T.a.createElement(ac.a.Item,{name:a,label:s,initialValue:v,tooltip:e,extra:Fp(t),required:n,hidden:d,rules:l},T.a.createElement(ZZ,{placeholder:u,disabled:f}))})},Vh;(function(o){o.INPUT="input",o.CHECKBOX="checkbox",o.TEXTAREA="textArea",o.SELECT="select",o.DATETIME="datetime",o.FLOAT="float"})(Vh||(Vh={}));var _j=[[Vh.INPUT,Lj],[Vh.CHECKBOX,VZ],[Vh.TEXTAREA,HZ],[Vh.DATETIME,YZ],[Vh.SELECT,WZ],[Vh.FLOAT,JZ]],Fj=function(i){var r=new Map;return i.forEach(function(n){var e=Object(Ue.a)(n,2),t=e[0],a=e[1],s=t.toLowerCase();r.has(s)&&console.error("".concat(t," is duplicated in controlMap:"),r),r.set(s,a)}),r},QZ=function(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lj;if(r.has(i))return r.get(i);var e=i.toLowerCase();return r.has(e)?r.get(e):(console.warn("".concat(i," is not exist in controlmap, fallback to defaultControl")),n)},qZ=Nj.a.TabPane,eJ=function(i){var r,n,e=i.schema,t=i.form,a=i.className,s=i.triggerUpdate,u=i.defaultControlRender,l=i.afterUpdatingCb,c=i.controlMap,f=Kt(i,["schema","form","className","triggerUpdate","defaultControlRender","afterUpdatingCb","controlMap"]),d=e.tabs,v=ac.a.useForm(t),p=Object(Ue.a)(v,1),y=p[0],C=T.a.useMemo(function(){return i.controlMap?i.controlMap:Fj(_j)},[i.controlMap]),E=Object(at.useCallback)(function(x){typeof s=="function"&&s(y,x)},[y,s]);Object(at.useEffect)(function(){y.setFieldsValue({})},[y]);var w=Object(at.useCallback)(function(){requestAnimationFrame(function(){y.setFieldsValue({})})},[y]);return T.a.createElement(ac.a,Object.assign({size:"small",form:y,layout:"vertical",className:an()("xflow-json-form",a)},f),T.a.createElement(Nj.a,{type:"card",defaultActiveKey:(n=d[0])===null||n===void 0?void 0:n.name,className:an()((r={},Object(Xe.a)(r,"tabs",!0),Object(Xe.a)(r,"xTab",!0),Object(Xe.a)(r,"singleTab",(d==null?void 0:d.length)===1),Object(Xe.a)(r,"coupleTab",(d==null?void 0:d.length)===2),Object(Xe.a)(r,"ternateTab",(d==null?void 0:d.length)===3),r)),onTabClick:w},d.map(function(x){var N=x.name,j=x.groups;return T.a.createElement(qZ,{key:N,tab:N},j.length===0&&T.a.createElement(tg.a,{style:{padding:"24px 0"}}),j.length>0&&j.map(function(B){var $=B.controls,Z=$===void 0?[]:$;return Z.length===0?T.a.createElement(tg.a,{style:{padding:"24px 0"}}):Z.map(function(fe){var de=fe.shape,xe=fe.name,Ae=QZ(de,C,u);return Ae?T.a.createElement(Ae,{key:xe,form:y,controlSchema:fe,triggerUpdate:E,afterUpdatingCb:l}):(console.error("\u672A\u627E\u5230\u5BF9\u5E94\u7684\u63A7\u4EF6:",de),null)})}))})))},tJ=function(i){var r=i.schema,n=r===void 0?{tabs:[]}:r,e=i.triggerUpdate,t=i.onFieldsChange,a=i.afterUpdatingCb,s=i.defaultControlRender,u=i.loading,l=i.controlMapService,c=i.defaultControls,f=c===void 0?[]:c,d=T.a.useMemo(function(){var v=Fj([].concat(Object(Qe.a)(_j),Object(Qe.a)(f)));return l&&l(v),v},[l,f]);return u?T.a.createElement("div",{className:"".concat(i.prefixClz,"-body"),style:Object.assign(Object.assign({},i.style),{display:"flex",justifyContent:"center",alignItems:"center"})},T.a.createElement(cj.a,{spinning:!0})):T.a.createElement("div",{className:"".concat(i.prefixClz,"-body"),style:i.style},n.tabs.length>0&&T.a.createElement(eJ,{schema:n,onFieldsChange:t,controlMap:d,defaultControlRender:s,afterUpdatingCb:a,triggerUpdate:e}),n.tabs.length===0&&T.a.createElement(tg.a,{style:{paddingTop:"64px"}}))},nJ=40,rJ=40,aJ=function(i,r){var n=i&&i.headerPosition&&i.headerPosition.height||nJ,e=i.footerPosition&&i.footerPosition.height||rJ;return{headerStyle:kl(Object.assign(Object.assign({height:0,top:0,left:0,right:0},r?{height:n,lineHeight:n}:{}),i.headerPosition)),bodyStyle:kl(Object.assign(Object.assign({left:0,right:0,top:0},r?{top:n,bottom:e}:{bottom:e}),i.bodyPosition)),footerStyle:kl(Object.assign(Object.assign({left:0,right:0,lineHeight:e,height:e,bottom:0},r?{lineHeight:e,height:e}:{bottom:0}),i.footerPosition))}},Ly;(function(o){var i=this;o.id="XFLOW_JSON_SCHEMA_FORM",o.useModel=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.awaitModel(o.id));case 1:case"end":return t.stop()}},n)}))}})(Ly||(Ly={}));var Kq=function(i,r){i.executeCommand(rp.UPDATE_MODEL.id,{getModel:function(e){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Ly.useModel(e));case 1:case"end":return s.stop()}},t)}))},updateModel:r})},iJ=function(i){var r=Ro(),n=r.commandService,e=r.modelService,t=r.getGraphInstance,a=i.formSchemaService,s=kp({schema:{tabs:[]},targetType:null,targetData:null,targetCell:null,loading:!1}),u=Object(Ue.a)(s,4),l=u[0],c=u[1],f=u[2],d=u[3];return T.a.useEffect(function(){if(!(!r||!r.modelService)){var v=new vi,p=r.modelService.findDeferredModel(Ly.id);if(!p){var y=r.modelService.registerModel({id:Ly.id,modelFactory:function(){return f},watchChange:function(E,w){return ie(void 0,void 0,void 0,Object(D.a)().mark(function x(){var N,j;return Object(D.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,ge.SELECTED_CELL.getModel(w);case 2:return N=$.sent,j=N.watch(function(Z){return ie(void 0,void 0,void 0,Object(D.a)().mark(function fe(){var de,xe,Ae;return Object(D.a)().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(de=function(ot,Ft){return ie(void 0,void 0,void 0,Object(D.a)().mark(function hn(){var In,xn,dn;return Object(D.a)().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(E.setValue(function(Rn){Rn.loading=!0,Rn.schema={tabs:[]},Rn.targetType=null,Rn.targetData=null,Rn.targetCell=null}),In=ot?ot.getData():null,a){Ut.next=4;break}return Ut.abrupt("return");case 4:return Ut.next=6,t();case 6:return xn=Ut.sent,Ut.next=9,a({commandService:n,modelService:e,targetData:In,cell:ot,targetType:Ft,graph:xn});case 9:dn=Ut.sent,E.setValue({loading:!1,schema:dn,targetType:Ft,targetCell:ot,targetData:In});case 11:case"end":return Ut.stop()}},hn)}))},xe=function(ot){return ot?ot.isNode&&ot.isNode()&&ot.getProp("isGroup")?"group":ot.isNode&&ot.isNode()?"node":ot.isEdge&&ot.isEdge()?"edge":"canvas":"canvas"},Ae=xe(Z),!(i.targetType||["node","canvas"]).includes(Ae)){rt.next=6;break}return rt.next=6,de(Z,Ae);case 6:case"end":return rt.stop()}},fe)}))}),$.abrupt("return",zr.create(function(){j.dispose(),v.push(j)}));case 5:case"end":return $.stop()}},x)}))}});v.push(y)}return function(){v.dispose()}}},[]),{commandService:n,modelService:e,state:l,setState:c,model:f,isModelReady:d}},oJ=function(i){var r=i.prefixClz,n=i.getCustomRenderComponent,e=i.afterUpdatingCb,t=i.formValueUpdateService,a=t===void 0?function(){}:t,s=iJ(i),u=s.state,l=s.commandService,c=s.modelService,f=T.a.useCallback(function(x){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ie(void 0,void 0,void 0,Object(D.a)().mark(function j(){var B,$,Z;return Object(D.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return x.setFieldsValue(N),B=Object.entries(N).map(function(xe){var Ae=Object(Ue.a)(xe,2),Ye=Ae[0],rt=Ae[1];return{name:Ye,value:rt}}),$=Object.entries(u.targetData).map(function(xe){var Ae=Object(Ue.a)(xe,2),Ye=Ae[0],rt=Ae[1];return{name:Ye,value:rt}}),de.next=5,a({allFields:$,values:B,modelService:c,commandService:l,targetData:u.targetData,targetType:u.targetType});case 5:Z=de.sent,e&&e(Z);case 7:case"end":return de.stop()}},j)}))},[e,l,a,c,u.targetData,u.targetType]),d=T.a.useCallback(function(x,N){return ie(void 0,void 0,void 0,Object(D.a)().mark(function j(){var B;return Object(D.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,a({values:x,allFields:N,modelService:c,commandService:l,targetData:u.targetData,targetType:u.targetType});case 2:B=Z.sent,e&&e(B);case 4:case"end":return Z.stop()}},j)}))},[e,l,a,c,u.targetData,u.targetType]),v=T.a.useMemo(function(){try{return u.schema.tabs.length===0||!u.schema}catch(x){return!0}},[u.schema]),p=aJ(i,v),y=p.headerStyle,C=p.bodyStyle,E=p.footerStyle;if(n){var w=n(u.targetType,u.targetData,c,l);if(w)return T.a.createElement(w,Object.assign(Object.assign({},i),{headerStyle:y,bodyStyle:C,footerStyle:E,targetData:u.targetData,targetType:u.targetType,modelService:c,commandService:l}))}return T.a.createElement("div",{className:r},T.a.createElement(LZ,Object.assign({hasSchema:!v},i,{state:u,style:y,prefixClz:i.prefixClz})),T.a.createElement(tJ,Object.assign({},i,{key:u.targetData&&u.targetData.id,style:C,prefixClz:i.prefixClz,loading:u.loading,schema:u.schema,triggerUpdate:f,onFieldsChange:d})),T.a.createElement(jZ,Object.assign({},i,{state:u,style:E})))},Bj=function(i){var r=fp("json-schema-form");return T.a.createElement(zh,Object.assign({},i,{className:r}),T.a.createElement(oJ,Object.assign({},i,{prefixClz:r})))};ue.Connector.registry.exist(jp.VERTICAL_NODE)||fi.registerConnector(jp.VERTICAL_NODE,function(o,i){var r=16,n=Math.abs(i.y-o.y),e=Math.floor(n/3*2),t={x:o.x,y:o.y+r+e},a={x:i.x,y:i.y-r-e};return Wa.normalize("M ".concat(o.x," ").concat(o.y,`
         L `).concat(o.x," ").concat(o.y+r,`
         C `).concat(t.x," ").concat(t.y," ").concat(a.x," ").concat(a.y," ").concat(i.x," ").concat(i.y-r,`
         L `).concat(i.x," ").concat(i.y,`
        `))},!0),ue.Connector.registry.exist(jp.VERTICAL_GROUP)||fi.registerConnector(jp.VERTICAL_GROUP,function(o,i){var r=4,n=Math.abs(i.y-o.y),e={x:o.x,y:o.y+r+n},t={x:i.x,y:i.y-r-n};return Wa.normalize("M ".concat(o.x," ").concat(o.y,`
       L `).concat(o.x," ").concat(o.y+r,`
       C `).concat(e.x," ").concat(e.y," ").concat(t.x," ").concat(t.y," ").concat(i.x," ").concat(i.y-r,`
       L `).concat(i.x," ").concat(i.y,`
      `))},!0),ue.Connector.registry.exist(jp.HORIRONTAL_NODE)||fi.registerConnector(jp.HORIRONTAL_NODE,function(o,i){var r=4,n=Math.abs(i.y-o.y),e=Math.floor(n/3*2),t={x:o.x,y:o.y+r+e},a={x:i.x,y:i.y-r-e};return Wa.normalize("M ".concat(o.x," ").concat(o.y,`
         L `).concat(o.x," ").concat(o.y+r,`
         C `).concat(t.x," ").concat(t.y," ").concat(a.x," ").concat(a.y," ").concat(i.x," ").concat(i.y-r,`
         L `).concat(i.x," ").concat(i.y,`
        `))},!0);var hM=ve.Edge.registry.get(uE.EDGE);ve.Edge.registry.exist(uE.EDGE)||(hM=ve.Edge.registry.register(uE.EDGE,ve.Edge.define({zIndex:1,highlight:!1,shape:uE.EDGE}),!0));var ic;(function(o){var i=this;o.MODEL=Lp,o.command=lE.QUERY_GRAPH_STATUS,o.hookKey="queryGraphStatus";var r;(function(n){n.SUCCESS="success",n.PROCESSING="processing",n.ERROR="error",n.DEFAULT="default",n.WARNING="warning"})(r=o.StatusEnum||(o.StatusEnum={})),o.initStatusMap=function(){var n;return n={},Object(Xe.a)(n,o.StatusEnum.DEFAULT,[]),Object(Xe.a)(n,o.StatusEnum.PROCESSING,[]),Object(Xe.a)(n,o.StatusEnum.ERROR,[]),Object(Xe.a)(n,o.StatusEnum.WARNING,[]),Object(Xe.a)(n,o.StatusEnum.SUCCESS,[]),n},o.groupByStatus=function(n){var e=o.initStatusMap();return Object.entries(n).reduce(function(t,a){var s=Object(Ue.a)(a,2),u=s[0],l=s[1];return t[l.status].push(u),t},e)},o.statusDiff=function(n,e){var t=new Set([].concat(Object(Qe.a)(n),Object(Qe.a)(e))),a={current:[],add:[],remove:[]};return t.forEach(function(s){e.includes(s)&&!n.includes(s)&&a.add.push(s),!e.includes(s)&&n.includes(s)&&a.remove.push(s)}),a},o.shouldStop=function(n){return ie(i,void 0,void 0,Object(D.a)().mark(function e(){return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",[r.ERROR,r.SUCCESS].includes(n.graphStatus));case 1:case"end":return a.stop()}},e)}))}})(ic||(ic={}));var dE=function(){function o(){var i=this;Object(De.a)(this,o),this.statusInfo=ic.initStatusMap(),this.getStatusModel=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=this.contextProvider(),e=n.getModelService(),s.next=4,Lp.getModel(e);case 4:return t=s.sent,s.abrupt("return",t);case 6:case"end":return s.stop()}},r,this)}))},this.updateModelValue=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.getStatusModel();case 2:e=a.sent,e.setValue(r);case 4:case"end":return a.stop()}},n,this)}))},this.stopCurrentStatusLooping=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.getStatusModel();case 2:return n=s.sent,s.next=5,n.getValidValue();case 5:e=s.sent,t=e.subscription,t.dispose();case 8:case"end":return s.stop()}},r,this)}))},this.addStopDispose=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.getStatusModel();case 2:return e=u.sent,u.next=5,e.getValidValue();case 5:t=u.sent,a=t.subscription,a.push({dispose:function(){n.updateEdges(n.statusInfo,ic.initStatusMap()),n.isLooping=!1}});case 8:case"end":return u.stop()}},r,this)}))},this.updateGraph=function(r,n,e){i.updateNodes(r,n,e),i.updateEdges(r,n)},this.updateNodeData=function(r,n){var e=i.x6Graph.getCellById(r);!e||e.setData(Object.assign(Object.assign(Object.assign(Object.assign({},e.getData()),e.getSize()),e.getPosition()),n))},this.updateNodes=function(r,n,e){Object.keys(r).forEach(function(t){var a=ic.statusDiff(r[t],n[t]);a.add.forEach(function(s){i.updateNodeData(s,e[s])}),a.remove.forEach(function(s){i.updateNodeData(s,e[s])})})},this.updateEdges=function(r,n){var e=ic.statusDiff(r.processing,n.processing),t=i.x6Graph.getEdges();t.forEach(function(a){var s,u=(s=i.x6Graph)===null||s===void 0?void 0:s.findViewByCell(a.id),l=a.getTargetCellId();if(!!l){var c=l.toString();if(!!u){if(e.add.includes(c))return u.addClass(wj);if(e.remove.includes(c))return u.removeClass(wj)}}})},this.execute=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,e.getX6Graph();case 5:return this.x6Graph=f.sent,f.next=8,u.queryGraphStatus.call(a,function(d){return ie(n,void 0,void 0,Object(D.a)().mark(function v(){var p=this,y,C,E,w,x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return y=d.graphStatusService,C=d.shouldStop,E=C===void 0?ic.shouldStop:C,w=d.doOnce,j.next=3,this.stopCurrentStatusLooping();case 3:return x=function B($){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e4;return ie(p,void 0,void 0,Object(D.a)().mark(function fe(){var de,xe,Ae;return Object(D.a)().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:return rt.next=2,$(d);case 2:return de=rt.sent,this.updateModelValue(function(je){Object.entries(de.statusMap).forEach(function(ot){var Ft=Object(Ue.a)(ot,2),hn=Ft[0],In=Ft[1];je.statusMap.set(hn,In)}),je.graphStatus=de.graphStatus}),xe=ic.groupByStatus(de.statusMap),this.updateGraph(this.statusInfo,xe,de.statusMap),this.statusInfo=xe,rt.next=9,UK(Z);case 9:if(this.isLooping){rt.next=11;break}return rt.abrupt("return");case 11:if(!E){rt.next=17;break}return rt.next=14,E(de,d);case 14:if(Ae=rt.sent,!Ae){rt.next=17;break}return rt.abrupt("return");case 17:return rt.next=19,B($,Z);case 19:case"end":return rt.stop()}},fe,this)}))},this.isLooping=d.loop===void 0?!0:d.loop,j.next=7,this.addStopDispose();case 7:if(!w){j.next=10;break}return j.next=10,w(d);case 10:return x(y,d.loopInterval),j.abrupt("return",{});case 12:case"end":return j.stop()}},v,this)}))},s);case 8:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 11:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(be.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Je([Te.inject(Xa),Be("design:type",Object)],dE.prototype,"contextProvider",void 0),dE=Je([Te.injectable({token:{token:$a,named:ic.command.id}})],dE);var Yq=function(){},Hh;(function(o){o.TOP_BOTTOM="TB",o.LEFT_RIGHT="LR"})(Hh||(Hh={}));var Gj=Te.Syringe.defineToken("DAG_EXTENSION_CONFIG"),hE;(function(o){o.EVENT_NAME="ADD_EDGE_CMD_EVENT"})(hE||(hE={}));var vE;(function(o){o.router={name:"manhattan"},o.connector={name:"rounded",args:{radius:15}}})(vE||(vE={}));var Zq="ant",sJ=function(i){var r=i.layout,n=i.router,e=n===void 0?vE.router:n,t=i.connector,a=t===void 0?vE.connector:t,s={grid:!1,keyboard:{enabled:!0},selecting:{enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},connecting:{sourceAnchor:r?r===Hh.TOP_BOTTOM?"bottom":"right":"center",targetAnchor:r?r===Hh.TOP_BOTTOM?"center":"left":"center",connectionPoint:"anchor",snap:{radius:20},router:e,connector:a,highlight:!0,dangling:!1,createEdge:function(){var l=this,c=new hM({attrs:{line:{strokeDasharray:"5 5",stroke:"#888",strokeWidth:1,targetMarker:{name:"block",args:{size:"6"}}}}}),f=function(v){var p=v.isNew,y=v.edge;if(p&&y.isEdge()&&y===c){var C=y.getTargetPortId(),E=y.getTargetCell();if(E&&E.isNode()){E.setPortProp(C,"connected",!1),y.attr({line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5"}});var w=y.getTargetPortId(),x=y.getSourcePortId(),N=y.getSourceCellId(),j=y.getTargetCellId();l.trigger(hE.EVENT_NAME,{targetPortId:w,sourcePortId:x,source:N,target:j,edge:c})}}};return l.once("edge:connected",f),c},validateEdge:function(l){var c,f=l.edge;return!!((c=f==null?void 0:f.target)===null||c===void 0?void 0:c.port)},validateMagnet:function(l){var c=l.magnet,f=l.cell,d=f.getData().ports.filter(function(v){return v.type===we.AnchorType.INPUT});return d.length>0?c.getAttribute("port-group")!==d[0].group:!1},validateConnection:function(l){var c=l.sourceView,f=l.targetView,d=l.sourceMagnet,v=l.targetMagnet;if(c===f||!d||!v)return!1;if(r){var p=r===Hh.TOP_BOTTOM?we.AnchorGroup.TOP:we.AnchorGroup.LEFT;if(d.getAttribute("port-group")===p||v.getAttribute("port-group")!==p)return!1}var y=c.cell,C=d.getAttribute("port");if(!C)return!1;var E=y.getPort(C);if(E.type!==we.AnchorType.OUTPUT)return!1;var w=f.cell,x=v.getAttribute("port");if(!x)return!1;var N=w.getPort(x);return N.type!==we.AnchorType.INPUT?!1:!(N&&N.connected)}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},scaling:{max:1.05,min:.01}};return s},_y=function(){function o(){var i=this;Object(De.a)(this,o),this.registerGraphCommands=function(r){r.registerCommand(ic.command,{createCommand:i.commandFactory})},this.toDispose=new vi,this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new vi,a=[r.addNode.registerHook({name:"dag-add-node",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:v=function(E){return ie(d,void 0,void 0,Object(D.a)().mark(function w(){var x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return x=new Ry(Object.assign({},E)),j.abrupt("return",x);case 2:case"end":return j.stop()}},w)}))},c.cellFactory=v;case 2:case"end":return y.stop()}},f)}))}}),r.addEdge.registerHook({name:"dag-add-edge",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v,p,y,C;return Object(D.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,this.propConfig.getConfig();case 2:v=w.sent,p=v.layout,y=p===void 0?Hh.TOP_BOTTOM:p,C=function(N){return ie(d,void 0,void 0,Object(D.a)().mark(function j(){var B;return Object(D.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return B=new hM(Object.assign(Object.assign({},N),{id:N.id,source:{cell:N.source,port:N.sourcePortId,anchor:{name:y===Hh.TOP_BOTTOM?"bottom":"right"}},target:{cell:N.target,port:N.targetPortId,anchor:{name:y===Hh.TOP_BOTTOM?"center":"right"}},attrs:{line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5",strokeWidth:1}},data:Object.assign({},N)})),Z.abrupt("return",B);case 2:case"end":return Z.stop()}},j)}))},c.cellFactory=C;case 7:case"end":return w.stop()}},f,this)}))}}),r.addEdge.registerHook({name:"after add edge, set target port props",handler:function(c,f){return ie(e,void 0,void 0,Object(D.a)().mark(function d(){var v=this,p;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return p=function(w){return ie(v,void 0,void 0,Object(D.a)().mark(function x(){var N,j,B;return Object(D.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,f(w);case 2:return N=Z.sent,N&&N.edgeCell&&(j=N.edgeCell.getTargetCell(),B=N.edgeCell.getTargetPortId(),j.setPortProp(B,"connected",!0)),Z.abrupt("return",N);case 5:case"end":return Z.stop()}},x)}))},C.abrupt("return",p);case 2:case"end":return C.stop()}},d)}))}}),r.delEdge.registerHook({name:"afetr del edge, reset target node port props",handler:function(c,f){return ie(e,void 0,void 0,Object(D.a)().mark(function d(){var v=this,p;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return p=function(w){return ie(v,void 0,void 0,Object(D.a)().mark(function x(){var N,j,B;return Object(D.a)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,f(w);case 2:return N=Z.sent,j=N.targetCell,B=N.targetPortId,j&&j.isNode()&&B&&j.setPortProp(B,"connected",!1),Z.abrupt("return",N);case 6:case"end":return Z.stop()}},x)}))},C.abrupt("return",p);case 2:case"end":return C.stop()}},d)}))}}),r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:d=c.commandService,v=c.graph,v.on(hE.EVENT_NAME,function(C){d.executeCommand(Eo.ADD_EDGE.id,{edgeConfig:C}),C.edge.remove()});case 2:case"end":return y.stop()}},f)}))}}),r.graphOptions.registerHook({name:"dag-extension-x6-options",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.propConfig.getConfig();case 2:d=y.sent,v=sJ(d),Object.assign(c,v);case 5:case"end":return y.stop()}},f,this)}))}})],t.pushAll(a),u.abrupt("return",zr.create(function(){}));case 4:case"end":return u.stop()}},n)}))},this.registerHookHub=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.registerHookHub(ic.hookKey,new Hc));case 1:case"end":return t.stop()}},n)}))}}return Object(be.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:Lp.id,getInitialValue:function(){return{statusMap:new Map,subscription:new vi,graphStatus:Lp.StatusEnum.DEFAULT}},watchChange:function(t){return ie(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.getValidValue();case 2:return s=c.sent,u=s.subscription,c.abrupt("return",u);case 5:case"end":return c.stop()}},a)}))}})}}]),o}();Je([Te.inject(XS),Be("design:type",Function)],_y.prototype,"commandFactory",void 0),Je([Te.inject(Gj),Be("design:type",Object)],_y.prototype,"propConfig",void 0),_y=Je([Te.singleton({contrib:[tc,Hv,J1]})],_y);var uJ=function(i){return Te.Module(function(r){r(_y),r(dE),r(Gj,{useValue:i})})},lJ=function(i){var r=nc();T.a.useEffect(function(){r.addContainerClassNames("dag-extension-container");var e=i.layout||"TB";r.addContainerClassNames(e==="TB"?"layout-top-bottom":"layout-left-right")},[r,i.layout]);var n=T.a.useMemo(function(){return{CONFIG_TYPE:"DAG_EXTENSION",getConfig:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",i);case 1:case"end":return s.stop()}},t)}))}}},[i]);return T.a.createElement(I0,{config:n,createModule:uJ})},vM="XFLOW_FLOW_NODE_SHAPE",cJ=150,fJ=60,gM,gE=we.AnchorGroup,pE={circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}};Wi.registry.exist(vM)?gM=Wi.registry.get(vM):gM=R0.define({width:cJ,height:fJ,shape:vM,view:L.X6_NODE_PORTAL_NODE_VIEW,ports:{groups:{top:{position:gE.TOP,attrs:pE},bottom:{position:gE.BOTTOM,attrs:pE},right:{position:gE.RIGHT,attrs:pE},left:{position:gE.LEFT,attrs:pE}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"}}});var dJ={grid:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge:function(){return new ve.Edge({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0})},validateConnection:function(i){var r=i.targetMagnet;return!!r}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},resizing:!0,rotating:!0,selecting:{enabled:!0,rubberband:!0,showNodeSelectionBox:!0,modifiers:"shift"},snapline:!0,keyboard:!0,clipboard:!0},pM=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.registerHookHub=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new vi,a=[r.addNode.registerHook({name:"flow-add-node",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:v=function(E){return ie(d,void 0,void 0,Object(D.a)().mark(function w(){var x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return x=new gM(Object.assign({},E)),j.abrupt("return",x);case 2:case"end":return j.stop()}},w)}))},c.cellFactory=v;case 2:case"end":return y.stop()}},f)}))}}),r.addEdge.registerHook({name:"flow-add-edge",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:v=function(E){return ie(d,void 0,void 0,Object(D.a)().mark(function w(){var x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return delete E.id,x=new ve.Edge({source:{cell:E.source,port:E.sourcePortId},target:{cell:E.target,port:E.targetPortId},attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:-1,data:Object.assign({},E)}),j.abrupt("return",x);case 3:case"end":return j.stop()}},w)}))},c.cellFactory=v;case 2:case"end":return y.stop()}},f)}))}}),r.graphOptions.registerHook({name:"assign options ",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:Object.assign(c,dJ);case 1:case"end":return v.stop()}},f)}))}})],t.pushAll(a),u.abrupt("return",zr.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});pM=Je([Te.singleton({contrib:tc})],pM);var hJ=function(){return Te.Module(function(i){i(pM)})},Jq=function(){var i=nc(),r=T.a.useMemo(function(){return{CONFIG_TYPE:"DAG_EXTENSION",getConfig:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function e(){return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},e)}))}}},[]);return T.a.useEffect(function(){var n=i.addExtension({config:r,createModule:hJ});return i.addContainerClassNames("flow-extension-container"),function(){n.dispose()}},[r,i]),null},vJ=h("wEI+"),gJ=h("QkVN"),zj=h.n(gJ),Uj=h("zs7G"),Vj=h("JaaR"),mM={config:{}},Hj=function(i){mM.config=Object.assign({},mM.config,i)},Fy=function(i){var r;return(r=mM.config)===null||r===void 0?void 0:r[i]},Wj=new Map,$j=new Map,pJ=function(i){return ie(void 0,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getGraphInstance();case 2:n=t.sent,Wj.set("x6graph",n),$j.set("app",i);case 5:case"end":return t.stop()}},r)}))},Xj=function(){return Wj.get("x6graph")},mJ=function(){return $j.get("app")},yJ=function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function i(){var r;return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mJ(),e.abrupt("return",r.getGraphData());case 2:case"end":return e.stop()}},i)}))},By=Object(Wc.debounce)(function(o){var i=Fy("onConfigChange");if(!(!i||typeof i!="function"))return i(Object.assign({data:yJ()},o))},300,{trailing:!0}),bJ=function(i,r){return ie(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s;return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=i.node,e){l.next=3;break}return l.abrupt("return");case 3:return t=e.data,(t==null?void 0:t.groupChildren)&&(a=Xj(),t==null||t.groupChildren.forEach(function(c){return ie(void 0,void 0,void 0,Object(D.a)().mark(function f(){var d,v,p;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(p=a.getCellById(c),!(p&&p.isNode())){C.next=4;break}return C.next=4,r.executeCommand(Ri.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign(Object.assign({},p.data),(d=p.getSize)===null||d===void 0?void 0:d.call(p)),(v=p.getPosition)===null||v===void 0?void 0:v.call(p))});case 4:case"end":return C.stop()}},f)}))})),s=Object.assign(Object.assign(Object.assign({},e.data),e.getPosition()),e.getSize()),l.next=8,r.executeCommand(Ri.UPDATE_NODE.id,{nodeConfig:s});case 8:By({type:"move:node",config:s});case 9:case"end":return l.stop()}},n)}))},CJ=function(i,r){return ie(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=i.node,e){s.next=3;break}return s.abrupt("return");case 3:return t=Object.assign(Object.assign(Object.assign({},e.data),e.getPosition()),e.size()),s.next=6,r.executeCommand(Ri.UPDATE_NODE.id,{nodeConfig:t});case 6:By({type:"resize:node",config:t});case 7:case"end":return s.stop()}},n)}))},EJ=function(i){var r,n=(r=i==null?void 0:i.e)===null||r===void 0?void 0:r.currentTarget;if(!n)return document.getElementsByClassName("xflow-canvas-root");for(var e=null;!e;){var t=n.getElementsByClassName("xflow-canvas-root");(t==null?void 0:t.length)>0&&(e=t),n=n.parentNode}return e},OJ=function(i){var r=document.getElementsByClassName("x6-node-selected");if(!!r){var n=r[0];return Array.from(r).forEach(function(e){e.getAttribute("data-cell-id")===i&&(n=e)}),n.getElementsByClassName("x6-port")}},Kj=function(i,r){var n=i.getAttribute("transform"),e=n.split(",");e[0]="matrix(".concat(Number(e[0].split("(")[1])*r),e[3]=Number(e[3])*r,i.setAttribute("transform",e.join(","))},wJ=function(i){if(!!(i==null?void 0:i.length)){var r=2;i.forEach(function(n){n.getAttribute("data-scale")||(Kj(n,r),n.setAttribute("data-scale","".concat(r)))})}},xJ=function(){var i=document.getElementsByClassName("x6-port");!i||Array.from(i).forEach(function(r){var n=r.getAttribute("data-scale");n&&(Kj(r,1/Number(n)),r.removeAttribute("data-scale"))})},yM=function(i,r,n){var e;i||xJ();var t=EJ(r),a=Xj(),s=(e=a.getSelectedCells())===null||e===void 0?void 0:e[0];(s==null?void 0:s.isNode())&&n&&wJ(OJ(s.id)),Array.from(t).forEach(function(u){for(var l=u.querySelectorAll(".x6-port-body"),c=s==null?void 0:s.isNode(),f=0,d=l.length;f<d;f=f+1)l[f].style.visibility=(!c||n)&&i?"visible":"hidden"})},SJ=function(i){return ie(void 0,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.edge,n){t.next=3;break}return t.abrupt("return");case 3:n.addTools("vertices","ondbclick");case 4:case"end":return t.stop()}},r)}))},TJ=function(i,r){return ie(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=i.edge,e){a.next=3;break}return a.abrupt("return");case 3:e.hasTools("ondbclick")&&(r.executeCommand(Eo.UPDATE_EDGE.id,{edgeConfig:Object.assign(Object.assign({},Object(Wc.get)(e,"data")),{vertices:e.getVertices()})}),e.removeTools());case 4:case"end":return a.stop()}},n)}))},Yj=40,mE="xflow-node-panel-collpase",MJ="GROUP_NODE_RENDER_ID",xo=60,Ni=40,Et=1,Kn={stroke:"#A2B1C3",fill:"#FFFFFF",fontFill:"#000",fontSize:12,label:""},Zj=[{name:"Terminal"},{name:"Process"},{name:"Decision"},{name:"Multi Document"},{name:"Connector",width:Ni,height:Ni},{name:"DataIO",ports:["top","bottom"]},{name:"Database"},{name:"Hard Disk"},{name:"Stroed Data"},{name:"Document"},{name:"Predefined Process"},{name:"Extract"},{name:"Merge"},{name:"Or",width:Ni,height:Ni},{name:"Manual Input"},{name:"Preparation"},{name:"Delay"},{name:"Manual Operation"},{name:"Display"},{name:"Off Page Link"},{name:"Note Left",label:"\u2263"},{name:"Note Right",label:"\u2263"},{name:"Internal Storage"},{name:"Text",label:"text"}],AJ=["Connector","Or"],PJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=[["M",Et,Et],["L",C-2*Et,Et],["L",C-2*Et,E-2*Et],["L",Et,E-2*Et],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(w),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},kJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=[["M",C/2,Et],["L",C-2*Et,E/2],["L",C/2,E-2*Et],["L",Et,E/2],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(w),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},DJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=E-2*Et;return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:"M ".concat(Et,",").concat(E/2," a ").concat(w/2," ").concat(w/2," 0 1 1 0 1 z"),fill:f,stroke:s}),T.a.createElement("text",{x:E/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},IJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=E/2,x=[["M",w-Et,Et],["L",C-2*Et,Et],["L",C-w,E-2*Et],["L",Et,E-2*Et],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(x),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},RJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=Math.min(E,C)/2,x=[["M",w,Et],["L",C-w,Et],["C",C-2*Et,Et,C-2*Et,E/2],["",C-2*Et,E/2],["C",C-2*Et,E/2,C-2*Et,E-2*Et],["",C-w,E-2*Et],["L",w,E-2*Et],["C",Et,E-2*Et,Et,E/2],["",Et,E/2],["C",Et,E/2,Et,Et],["",w,Et]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(x),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},NJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=C/4,x=Math.min(E/10,12),N=[["M",Et,Et+x],["C",Et+w,Et,Et+C-w,Et],["",C-2*Et,Et+x],["L",C-2*Et,E-2*Et-x],["C",C-2*Et-w,E-2*Et,Et+w,E-2*Et],["",Et,E-2*Et-x],["Z"]],j=[["M",Et,Et+x],["C",Et+w,Et+2*x,Et+C-w,Et+2*x],["",C-2*Et,Et+x]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(N),fill:f,stroke:s}),T.a.createElement("path",{d:io(j),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},jJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=Math.min(C/10,E/4),x=Math.min(E/4,C/4),N=[["M",Et+w,Et],["L",C-2*Et-w,Et],["C",C-2*Et,Et+x,C-2*Et,E-2*Et-x],["",C-2*Et-w,E-2*Et],["L",Et+w,E-2*Et],["C",Et,E-2*Et-x,Et,Et+x],["",Et+w,Et]],j=[["M",C-2*Et-w,Et],["C",C-2*Et-2*w,Et+x,C-2*Et-2*w,E-2*Et-x],["",C-2*Et-w,E-2*Et]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(N),fill:f,stroke:s}),T.a.createElement("path",{d:io(j),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},LJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=Math.min(C/10,E/4),x=Math.min(E/4,C/4),N=[["M",Et+w,Et],["L",C-2*Et-w,Et],["C",C-2*Et-2*w,Et+x,C-2*Et-2*w,E-2*Et-x],["",C-2*Et-w,E-2*Et],["L",Et+w,E-2*Et],["C",Et,E-2*Et-x,Et,Et+x],["",Et+w,Et]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(N),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},_J=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=C/8,x=E/8,N=[["M",Et,Et],["L",C-2*Et,Et],["L",C-2*Et,E-2*Et-x],["C",C-2*Et-w,E-2*Et-2*x,C/2+w,E-2*Et-2*x],["",C/2,E-2*Et-x],["S",C/4,E-2*Et,Et,E-2*Et-2*x],["L",Et,Et]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(N),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},FJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=6,E=Et,w=C/2,x=n.width,N=n.height;x+=C,N+=C;var j=x/8,B=N/8,$=[["M",E+w,E],["L",x-2*E,E],["L",x-2*E,N-2*E-B],["C",x-2*E-j,N-2*E-2*B,x/2+j,N-2*E-2*B],["",x/2,N-2*E-B],["S",x/4,N-2*E,E+w,N-2*E-2*B],["L",E+w,E]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(x," ").concat(N),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io($),fill:f,stroke:s}),T.a.createElement("path",{d:io($,-C/2,C/2),fill:f,stroke:s}),T.a.createElement("text",{x:x/2,y:N/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},BJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=C/8,x=[["M",Et,Et],["L",C-2*Et,Et],["L",C-2*Et,E-2*Et],["L",Et,E-2*Et],["Z"]],N=[["M",w,Et],["L",w,E-2*Et]],j=[["M",C-w,Et],["L",C-w,E-2*Et]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(x),fill:f,stroke:s}),T.a.createElement("path",{d:io(N),stroke:s}),T.a.createElement("path",{d:io(j),stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},GJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=[["M",C/2,Et],["L",C-2*Et,E-2*Et],["L",Et,E-2*Et],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(w),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},zJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=[["M",Et,Et],["L",C-2*Et,Et],["L",C/2,E-2*Et],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(w),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},UJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=[["M",E/2,Et],["L",E/2,E-2*Et]],x=[["M",Et,E/2],["L",E-2*Et,E/2]],N=E-2*Et;return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:"M ".concat(Et,",").concat(E/2," a ").concat(N/2," ").concat(N/2," 0 1 1 0 1 z"),fill:f,stroke:s}),T.a.createElement("path",{d:io(w),stroke:s}),T.a.createElement("path",{d:io(x),stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},VJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=[["M",Et,E/5],["L",C-2*Et,Et],["L",C-2*Et,E-2*Et],["L",Et,E-2*Et],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(w),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},HJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=Math.tan(Math.PI/6)*(E/2),x=[["M",w,Et],["L",C-w,Et],["L",C-2*Et,E/2],["L",C-w,E-2*Et],["L",w,E-2*Et],["L",Et,E/2],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(x),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},WJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=Math.min(E,C)/2,x=[["M",Et,Et],["L",C-w,Et],["C",C-2*Et,Et,C-2*Et,E/2],["",C-2*Et,E/2],["C",C-2*Et,E/2,C-2*Et,E-2*Et],["",C-w,E-2*Et],["L",Et,E-2*Et],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(x),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},$J=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=Math.min(Math.tan(Math.PI/6)*E,C/2),x=[["M",Et,Et],["L",C-2*Et,Et],["L",C-w,E-2*Et],["L",w,E-2*Et],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(x),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},XJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=Math.min(E,C)/3,x=Math.min(Math.tan(Math.PI/6)*(E/2),C/3),N=[["M",x,Et],["L",C-w,Et],["C",C-2*Et,Et,C-2*Et,E/2],["",C-2*Et,E/2],["C",C-2*Et,E/2,C-2*Et,E-2*Et],["",C-w,E-2*Et],["L",x,E-2*Et],["L",Et,E/2],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(N),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},KJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=Math.min(Math.tan(Math.PI/6)*(C/2),E/4),x=[["M",Et,Et],["L",C-2*Et,Et],["L",C-2*Et,E-w],["L",C/2,E-2*Et],["L",Et,E-w],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(x),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},YJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?"transparent":c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=6,x=C-2*Et,N=[["M",x,Et],["C",x-w,Et,x-w,w],["",x-w,(E-w)/2],["L",x-2*w,E/2],["L",x-w,(E+w)/2],["L",x-w,E-2*Et-w],["C",x-w,E-2*Et,x,E-2*Et],["",x,E-2*Et]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(N),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},ZJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?"transparent":c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=6,x=[["M",Et,Et],["C",w,Et,w,w],["",w,(E-w)/2],["L",2*w,E/2],["L",w,(E+w)/2],["L",w,E-2*Et-w],["C",w,E-2*Et,Et,E-2*Et],["",Et,E-2*Et]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(x),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},JJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?Kn.stroke:a,u=t.label,l=u===void 0?Kn.label:u,c=t.fill,f=c===void 0?Kn.fill:c,d=t.fontFill,v=d===void 0?Kn.fontFill:d,p=t.fontSize,y=p===void 0?Kn.fontSize:p,C=n.width,E=n.height,w=C-2*Et,x=E-2*Et,N=6,j=[["M",Et,Et],["L",w-N,Et],["C",w,Et,w,N],["",w,E/2],["L",w,x-N],["C",w,x,w-N,x],["",w-N,x],["L",N,x],["C",Et,x,Et,x-N],["",Et,x-N],["Z"]];return T.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("path",{d:io(j),fill:f,stroke:s}),T.a.createElement("path",{d:"M ".concat(Et,",").concat(N," L ").concat(w-1," ").concat(N," "),fill:f,stroke:s}),T.a.createElement("path",{d:"M ".concat(N,",").concat(Et," L ").concat(N," ").concat(x," "),fill:f,stroke:s}),T.a.createElement("text",{x:C/2,y:E/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},QJ=function(i){var r=i.size,n=r===void 0?{width:xo,height:Ni}:r,e=i.data,t=e===void 0?{}:e,a=t.label,s=a===void 0?Kn.label:a,u=t.fontFill,l=u===void 0?Kn.fontFill:u,c=t.fontSize,f=c===void 0?Kn.fontSize:c,d=n.width,v=n.height,p=2;return T.a.createElement("svg",{viewBox:"0 0 ".concat(d/p," ").concat(v/p),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},T.a.createElement("text",{x:d/(2*p),y:v/(2*p),fill:l,textAnchor:"middle",alignmentBaseline:"middle",fontSize:f},s),"Sorry, your browser does not support inline SVG.")},yE=function(i){return{position:{name:i},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10}},Jj=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["top","right","bottom","left"];return{items:i.map(function(r){return{group:r,id:zc()}}),groups:{top:yE("top"),right:yE("right"),bottom:yE("bottom"),left:yE("left")}}},qJ=function(i){return(i||[]).map(function(r){var n=r.name,e=r.popover,t=r.label,a=t===void 0?"":t,s=r.width,u=s===void 0?Ni:s,l=r.height,c=l===void 0?Ni:l,f=r.ports,d=r.parentKey,v=zc();return{id:v,renderKey:n,name:n,label:a,popoverContent:e,width:u,height:c,ports:f||Jj(),originData:Object.assign({},r),isCustom:!0,parentKey:d}})},eQ=function(i){return ie(void 0,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=qJ(i),t.abrupt("return",[].concat(Object(Qe.a)(n),Object(Qe.a)(Zj.map(function(a){var s=a.name,u=a.ports,l=a.width,c=l===void 0?xo:l,f=a.height,d=f===void 0?Ni:f,v=a.label,p=v===void 0?"":v;return{id:zc(),renderKey:s,name:s,label:p,popoverContent:function(){return s},width:c,height:d,ports:Jj(u)}}))));case 2:case"end":return t.stop()}},r)}))},Qj=function(i){var r=i?Object(Wc.isArray)(i)?i:[i]:[],n=[];r.forEach(function(a){n=n.concat(a.nodes.map(function(s){return Object.assign(Object.assign({},s),{parentKey:a.key})}))}),n.length&&Hj({registerNode:n});var e=Fy("graphConfig"),t=Fy("registerNode");!e||!(t==null?void 0:t.length)||t.forEach(function(a){var s=a.name,u=a.component;e.setNodeRender(s,u)})},tQ=function(i){Qj(),i.nodeRender.get("Terminal")||Zj.forEach(function(r){i.setNodeRender(r.name,_e["".concat(r.name.replace(/\s+/g,""),"Node")])})},io=function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!i.length)return null;var e="";return i.forEach(function(t){var a=Object(Ue.a)(t,5),s=a[0],u=a[1],l=a[2],c=a[3],f=a[4];e+=Object(Wc.isNumber)(l)?" ".concat(s," ").concat(u+r," ").concat(l+n):" ".concat(s),f&&(e+=" ".concat(c+r," ").concat(f+n))}),e},Wh=h("wx14"),nQ=h("UESt"),rQ=h("KQm4"),qj=h("1OyB"),eL=h("vuIU"),tL=h("Ji7U"),nL=h("LK+K"),rL=h("Zm9Q"),aQ=h("Gytx"),bM=h.n(aQ),iQ=h("8XRh"),aL=at.forwardRef(function(o,i){var r,n=o.prefixCls,e=o.forceRender,t=o.className,a=o.style,s=o.children,u=o.isActive,l=o.role,c=at.useState(u||e),f=Object(qN.a)(c,2),d=f[0],v=f[1];return at.useEffect(function(){(e||u)&&v(!0)},[e,u]),d?at.createElement("div",{ref:i,className:an()("".concat(n,"-content"),(r={},Object(zs.a)(r,"".concat(n,"-content-active"),u),Object(zs.a)(r,"".concat(n,"-content-inactive"),!u),r),t),style:a,role:l},at.createElement("div",{className:"".concat(n,"-content-box")},s)):null});aL.displayName="PanelContent";var oQ=aL,sQ=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],iL=function(o){Object(tL.a)(r,o);var i=Object(nL.a)(r);function r(){var n;Object(qj.a)(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),n.onItemClick=function(){var s=n.props,u=s.onItemClick,l=s.panelKey;typeof u=="function"&&u(l)},n.handleKeyPress=function(s){(s.key==="Enter"||s.keyCode===13||s.which===13)&&n.onItemClick()},n.renderIcon=function(){var s=n.props,u=s.showArrow,l=s.expandIcon,c=s.prefixCls,f=s.collapsible;if(!u)return null;var d=typeof l=="function"?l(n.props):at.createElement("i",{className:"arrow"});return d&&at.createElement("div",{className:"".concat(c,"-expand-icon"),onClick:f==="header"||f==="icon"?n.onItemClick:null},d)},n.renderTitle=function(){var s=n.props,u=s.header,l=s.prefixCls,c=s.collapsible;return at.createElement("span",{className:"".concat(l,"-header-text"),onClick:c==="header"?n.onItemClick:null},u)},n}return Object(eL.a)(r,[{key:"shouldComponentUpdate",value:function(e){return!bM()(this.props,e)}},{key:"render",value:function(){var e,t,a=this.props,s=a.className,u=a.id,l=a.style,c=a.prefixCls,f=a.headerClass,d=a.children,v=a.isActive,p=a.destroyInactivePanel,y=a.accordion,C=a.forceRender,E=a.openMotion,w=a.extra,x=a.collapsible,N=Object(ej.a)(a,sQ),j=x==="disabled",B=x==="header",$=x==="icon",Z=an()((e={},Object(zs.a)(e,"".concat(c,"-item"),!0),Object(zs.a)(e,"".concat(c,"-item-active"),v),Object(zs.a)(e,"".concat(c,"-item-disabled"),j),e),s),fe=an()("".concat(c,"-header"),(t={},Object(zs.a)(t,f,f),Object(zs.a)(t,"".concat(c,"-header-collapsible-only"),B),Object(zs.a)(t,"".concat(c,"-icon-collapsible-only"),$),t)),de={className:fe,"aria-expanded":v,"aria-disabled":j,onKeyPress:this.handleKeyPress};!B&&!$&&(de.onClick=this.onItemClick,de.role=y?"tab":"button",de.tabIndex=j?-1:0);var xe=w!=null&&typeof w!="boolean";return delete N.header,delete N.panelKey,delete N.onItemClick,delete N.showArrow,delete N.expandIcon,at.createElement("div",Object(Wh.a)({},N,{className:Z,style:l,id:u}),at.createElement("div",de,this.renderIcon(),this.renderTitle(),xe&&at.createElement("div",{className:"".concat(c,"-extra")},w)),at.createElement(iQ.b,Object(Wh.a)({visible:v,leavedClassName:"".concat(c,"-content-hidden")},E,{forceRender:C,removeOnLeave:p}),function(Ae,Ye){var rt=Ae.className,je=Ae.style;return at.createElement(oQ,{ref:Ye,prefixCls:c,className:rt,style:je,isActive:v,forceRender:C,role:y?"tabpanel":null},d)}))}}]),r}(at.Component);iL.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var uQ=iL;function oL(o){var i=o;if(!Array.isArray(i)){var r=Object(sj.a)(i);i=r==="number"||r==="string"?[i]:[]}return i.map(function(n){return String(n)})}var CM=function(o){Object(tL.a)(r,o);var i=Object(nL.a)(r);function r(n){var e;Object(qj.a)(this,r),e=i.call(this,n),e.onClickItem=function(u){var l=e.state.activeKey;if(e.props.accordion)l=l[0]===u?[]:[u];else{l=Object(rQ.a)(l);var c=l.indexOf(u),f=c>-1;f?l.splice(c,1):l.push(u)}e.setActiveKey(l)},e.getNewChild=function(u,l){if(!u)return null;var c=e.state.activeKey,f=e.props,d=f.prefixCls,v=f.openMotion,p=f.accordion,y=f.destroyInactivePanel,C=f.expandIcon,E=f.collapsible,w=u.key||String(l),x=u.props,N=x.header,j=x.headerClass,B=x.destroyInactivePanel,$=x.collapsible,Z=!1;p?Z=c[0]===w:Z=c.indexOf(w)>-1;var fe=$!=null?$:E,de={key:w,panelKey:w,header:N,headerClass:j,isActive:Z,prefixCls:d,destroyInactivePanel:B!=null?B:y,openMotion:v,accordion:p,children:u.props.children,onItemClick:fe==="disabled"?null:e.onClickItem,expandIcon:C,collapsible:fe};return typeof u.type=="string"?u:(Object.keys(de).forEach(function(xe){typeof de[xe]=="undefined"&&delete de[xe]}),at.cloneElement(u,de))},e.getItems=function(){var u=e.props.children;return Object(rL.a)(u).map(e.getNewChild)},e.setActiveKey=function(u){"activeKey"in e.props||e.setState({activeKey:u}),e.props.onChange(e.props.accordion?u[0]:u)};var t=n.activeKey,a=n.defaultActiveKey,s=a;return"activeKey"in n&&(s=t),e.state={activeKey:oL(s)},e}return Object(eL.a)(r,[{key:"shouldComponentUpdate",value:function(e,t){return!bM()(this.props,e)||!bM()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,s=t.className,u=t.style,l=t.accordion,c=an()((e={},Object(zs.a)(e,a,!0),Object(zs.a)(e,s,!!s),e));return at.createElement("div",{className:c,style:u,role:l?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=oL(e.activeKey)),t}}]),r}(at.Component);CM.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},CM.Panel=uQ;var sL=CM,uL=sL,Qq=sL.Panel,lQ=h("bT9E"),lL=h("H84U"),cQ=h("EXcs"),cL=h("0n0R"),fQ=function(i){var r=at.useContext(lL.b),n=r.getPrefixCls,e=i.prefixCls,t=i.className,a=t===void 0?"":t,s=i.showArrow,u=s===void 0?!0:s,l=n("collapse",e),c=an()(Object(zs.a)({},"".concat(l,"-no-arrow"),!u),a);return at.createElement(uL.Panel,Object(Wh.a)({},i,{prefixCls:l,className:c}))},dQ=fQ,fL=function(i){var r,n=at.useContext(lL.b),e=n.getPrefixCls,t=n.direction,a=i.prefixCls,s=i.className,u=s===void 0?"":s,l=i.bordered,c=l===void 0?!0:l,f=i.ghost,d=i.expandIconPosition,v=d===void 0?"start":d,p=e("collapse",a),y=at.useMemo(function(){return v==="left"?"start":v==="right"?"end":v},[v]),C=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=i.expandIcon,$=B?B(j):at.createElement(nQ.a,{rotate:j.isActive?90:void 0});return Object(cL.a)($,function(){return{className:an()($.props.className,"".concat(p,"-arrow"))}})},E=an()("".concat(p,"-icon-position-").concat(y),(r={},Object(zs.a)(r,"".concat(p,"-borderless"),!c),Object(zs.a)(r,"".concat(p,"-rtl"),t==="rtl"),Object(zs.a)(r,"".concat(p,"-ghost"),!!f),r),u),w=Object(Wh.a)(Object(Wh.a)({},cQ.a),{motionAppear:!1,leavedClassName:"".concat(p,"-content-hidden")}),x=function(){var j=i.children;return Object(rL.a)(j).map(function(B,$){var Z;if((Z=B.props)===null||Z===void 0?void 0:Z.disabled){var fe=B.key||String($),de=B.props,xe=de.disabled,Ae=de.collapsible,Ye=Object(Wh.a)(Object(Wh.a)({},Object(lQ.a)(B.props,["disabled"])),{key:fe,collapsible:Ae!=null?Ae:xe?"disabled":void 0});return Object(cL.a)(B,Ye)}return B})};return at.createElement(uL,Object(Wh.a)({openMotion:w},i,{expandIcon:C,prefixCls:p,className:E}),x())};fL.Panel=dQ;var hQ=fL,dL=hQ,hL=dL.Panel,vQ=function(i){var r=i.x6NodeFactory,n=i.dndOptions,e=i.state,t=i.prefixClz,a=i.defaultActiveKey,s=a===void 0?["official"]:a,u=i.showOfficial,l=u===void 0?!0:u,c=i.registerNode?Object(Wc.isArray)(i.registerNode)?i.registerNode:[i.registerNode]:[],f=Ro(),d=f.graphProvider,v=f.modelService,p=f.commandService,y=T.a.useState(),C=Object(Ue.a)(y,2),E=C[0],w=C[1],x=T.a.useState(),N=Object(Ue.a)(x,2),j=N[0],B=N[1];T.a.useEffect(function(){d.getGraphInstance().then(function(je){B(je)})});var $=void 0;d.getGraphOptions().then(function(je){$=je});var Z=Object(at.useCallback)(function(je){return ie(void 0,void 0,void 0,Object(D.a)().mark(function ot(){var Ft,hn,In,xn,dn;return Object(D.a)().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:return hn=je.ports,In=Object.assign(Object.assign({},je),{id:"node-".concat(zc()),zIndex:10,ports:Object.assign(Object.assign({},hn),{items:(Ft=hn.items)===null||Ft===void 0?void 0:Ft.map(function(Rn){return Object.assign(Object.assign({},Rn),{id:zc()})})})}),xn={nodeConfig:In},Ut.next=5,p.executeCommand(Ri.ADD_NODE.id,xn);case 5:dn=Fy("onAddNode"),typeof dn=="function"&&dn(In);case 7:case"end":return Ut.stop()}},ot)}))},[p]);T.a.useEffect(function(){if(!!j){var je=new pe.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},n),{target:j,validateNode:function(Ft){return ie(void 0,void 0,void 0,Object(D.a)().mark(function hn(){var In;return Object(D.a)().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:return In=Object.assign(Object.assign({},Ft.getData()),Ft.getPosition()),dn.next=3,Z(In);case 3:return dn.abrupt("return",!1);case 4:case"end":return dn.stop()}},hn)}))}}));w(je)}},[p,n,j,v,Z]);var fe=T.a.useCallback(function(je){return function(ot){if(!(!j||!E||!$)){var Ft=$.nodeTypeParser(je),hn=je.width,In=hn===void 0?180:hn,xn=je.height,dn=xn===void 0?40:xn,tr=$.nodeRender.get(Ft),Ut=r2(tr,p,v),Rn={data:je,width:In,height:dn,view:$.graphId,component:Ut},$n=r?r(Rn):Sj(Rn);E.start($n,ot.nativeEvent)}}},[p,E,j,$,v,r]),de=T.a.useCallback(function(){var je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return je.map(function(ot){var Ft=ot.popoverContent;return T.a.createElement(lM,{item:ot,key:ot.id,onMouseDown:fe(ot),popoverContent:Ft,prefixClz:t,modelService:v,commandService:p,graphConfig:$})})},[p,$,v,fe,t]),xe=e.nodeList.filter(function(je){return!je.isCustom}),Ae=e.searchList.filter(function(je){return!je.isCustom}),Ye=function(ot){return e.nodeList.filter(function(Ft){return Ft.isCustom&&Ft.parentKey===ot})},rt=function(ot){return e.searchList.filter(function(Ft){return Ft.isCustom&&Ft.parentKey===ot})};return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(t,"-body")},T.a.createElement(dL,{defaultActiveKey:s,style:{border:"none"}},l&&T.a.createElement(hL,{header:"\u901A\u7528\u8282\u70B9",key:"official",style:{border:"none"}},!e.keyword&&T.a.createElement("div",{className:"".concat(t,"-official")},de(xe)),e.searchList.length>0&&T.a.createElement("div",{className:"".concat(t,"-official")},de(Ae))),(c==null?void 0:c.length)>0&&c.map(function(je){return!je.hidden&&je.nodes.length>0&&T.a.createElement(hL,{header:je.title,key:je.key,style:{border:"none"}},!e.keyword&&T.a.createElement("div",{className:"".concat(t,"-custom")},de(Ye(je.key))),e.searchList.length>0&&T.a.createElement("div",{className:"".concat(t,"-custom")},de(rt(je.key))))})),e.keyword&&e.searchList.length===0&&T.a.createElement(tg.a,{style:{marginTop:"48px"}})))},gQ=function(i){var r=i.prefixClz,n=i.onKeywordChange,e=Gh(),t=e.propsProxy,a=t.getValue();return T.a.createElement(T.a.Fragment,null,T.a.createElement("div",{className:"".concat(r,"-header"),style:Object.assign({zIndex:1},i.style)},a.header&&T.a.isValidElement(a.header)&&a.header,T.a.createElement("div",{className:"".concat(r,"-header-search")},T.a.createElement(_p.a,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:function(u){return n(u.target.value)},style:{width:"100%",border:0}}))))},bE;(function(o){o.id="NODE_PANEL_DATA"})(bE||(bE={}));var pQ=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return ie(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=i.filter(function(s){var u,l;return s.isDirectory||((u=s.label)===null||u===void 0?void 0:u.includes(r))||((l=s.name)===null||l===void 0?void 0:l.includes(r))}),a.abrupt("return",e);case 2:case"end":return a.stop()}},n)}))},mQ=function(i){var r=i.searchService,n=r===void 0?pQ:r,e=i.registerNode?Object(Wc.isArray)(i.registerNode)?i.registerNode:[i.registerNode]:[],t=[];e.forEach(function(p){t=t.concat(p.nodes.map(function(y){return Object.assign(Object.assign({},y),{parentKey:p.key})}))});var a=Ro(),s=a.modelService,u=kp({searchList:[],nodeList:[],defaultExpandAll:!1,keyword:""}),l=Object(Ue.a)(u,3),c=l[0],f=l[1],d=l[2];T.a.useEffect(function(){s.findDeferredModel(bE.id)||s.registerModel({id:bE.id,modelFactory:function(){return d},watchChange:function(y){return ie(void 0,void 0,void 0,Object(D.a)().mark(function C(){var E,w,x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ge.GRAPH_META.getModel(s);case 2:return E=j.sent,w=function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function $(){var Z;return Object(D.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,eQ(t);case 2:return Z=de.sent,de.abrupt("return",{listData:Z});case 4:case"end":return de.stop()}},$)}))},x=E.watch(function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function B(){var $;return Object(D.a)().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,w();case 2:$=fe.sent,y.setValue({nodeList:$.listData,defaultExpandAll:!1,keyword:"",searchList:[]});case 4:case"end":return fe.stop()}},B)}))}),j.abrupt("return",zr.create(function(){x.dispose()}));case 6:case"end":return j.stop()}},C)}))}})},[]);var v=T.a.useCallback(function(p){return ie(void 0,void 0,void 0,Object(D.a)().mark(function y(){var C;return Object(D.a)().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(n){w.next=2;break}return w.abrupt("return");case 2:if(!p){w.next=9;break}return w.next=5,n(c.nodeList,p);case 5:C=w.sent,f(function(x){x.keyword=p,x.searchList=C}),w.next=10;break;case 9:f(function(x){x.keyword="",x.searchList=[]});case 10:case"end":return w.stop()}},y)}))},[n,c.nodeList,f]);return{state:c,setState:f,onKeywordChange:v}},yQ=function(i){var r=i.cell,n=i.data,e=n.label,t=n.stroke,a=n.fill,s=n.fontSize,u=n.fontFill,l=n.width,c=l===void 0?200:l,f=n.isCollapsed,d=f===void 0?!1:f,v=Ro(),p=function(){v.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1,collapsedSize:{width:c,height:40}})},y=function(){v.executeCommand(Ms.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,collapsedSize:{width:c,height:40},gap:3})};return T.a.createElement("div",{className:"xflow-group-node",style:{borderColor:t,backgroundColor:a,fontSize:s,color:u}},T.a.createElement("div",{className:"xflow-group-header"},T.a.createElement("div",{className:"header-left"},e),T.a.createElement("div",{className:"header-right"},d&&T.a.createElement(zk.a,{onClick:p}),!d&&T.a.createElement(Uk.a,{onClick:y}))))},bQ=function(i){i.setNodeRender(MJ,yQ)},vL;(function(o){o.id="FLOWCHART_PANEL_DATA"})(vL||(vL={}));var CQ=function(i){var r=i.prefixClz,n=i.position,e=n===void 0?{width:240,top:0,bottom:0,left:0}:n,t=i.showHeader,a=t===void 0?!0:t,s=Kt(i,["prefixClz","position","showHeader"]),u=e.width,l=u===void 0?200:u,c=Aj(i),f=c.headerStyle,d=c.bodyStyle,v=mQ(i),p=v.state,y=v.onKeywordChange;return T.a.createElement(T.a.Fragment,null,a&&T.a.createElement(zh,Object.assign({},s,{position:{top:0,left:0,height:Yj,width:l}}),T.a.createElement(gQ,Object.assign({},i,{state:p,style:f,onKeywordChange:y}))),T.a.createElement(zh,Object.assign({className:"".concat(mE,"-nodes")},s,{position:Object.assign(Object.assign({},e),{top:a?Yj:0})}),T.a.createElement(vQ,Object.assign({},i,{state:p,style:d}))))},qq=function(i){Qj(Object(Wc.get)(i,"registerNode"));var r=fp("node-panel"),n=Object(at.useState)(!1),e=Object(Ue.a)(n,2),t=e[0],a=e[1],s=i.show,u=s===void 0?!0:s,l=i.position,c=l===void 0?{width:240,top:40,bottom:0,left:0}:l,f=Kt(i,["show","position"]);if(!u)return null;var d=c.width,v=d===void 0?200:d,p=c.left;return T.a.createElement(zh,{className:mE,position:Object.assign(Object.assign({},c),{left:t?-v:p})},T.a.createElement("div",{className:"".concat(mE,"-wrapper")},T.a.createElement(zh,Object.assign({className:r},f,{position:{top:0,bottom:0,left:0,right:0}}),T.a.createElement(CQ,Object.assign({},i,{prefixClz:r,position:c}))),T.a.createElement("div",{className:"".concat(mE,"-icon"),style:{top:21,right:t?-20:-10,borderRadius:t?"0 50% 50% 0":"50%",borderLeft:t?"none":""},onClick:function(){a(!t)}},t?T.a.createElement(Uj.a,null):T.a.createElement(Vj.a,null))))},EQ="flowchart-connecting-edge",OQ="ant",CE;(function(o){o.EVENT_NAME="ADD_FLOWCHART_EDGE_CMD_EVENT"})(CE||(CE={}));var gL={attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8},strokeDasharray:"5 5",strokeWidth:1}}},wQ=ve.Edge.registry.register("xflow",ve.Edge.define({zIndex:1,highlight:!0,name:EQ,label:"",anchor:{name:"midSide",args:{dx:10}},attrs:gL.attrs,data:{label:""}}),!0),xQ=Kk(function(o,i){var r=i.getValue(),n=r.config,e=n===void 0?{}:n,t=r.useConfig,a=r.mode,s=a===void 0?"edit":a,u=r.showPortsOnNodeSelected,l=u===void 0?!1:u,c=r.edgeConfig,f=c===void 0?{}:c;o.setEdgeTypeParser(function(d){return d==null?void 0:d.renderKey}),Hj(Object.assign(Object.assign({},i.getValue()),{graphConfig:o})),tQ(o),bQ(o),o.setX6Config(zj()({grid:!0,history:!0,resizing:{enabled:!0,minWidth:Ni,minHeight:Ni,preserveAspectRatio:function(v){var p=v.data;return AJ.includes(p.name)}},snapline:{enabled:!0},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge:function(){var v=this,p=new wQ({});return this.once("edge:connected",function(y){var C=y.edge,E=y.isNew;if(E&&C&&C.isEdge()&&p===C){var w=C.getTargetCell();if(w&&w.isNode()){var x=C.getTargetPortId(),N=C.getSourcePortId(),j=C.getSourceCellId(),B=C.getTargetCellId(),$=typeof f=="function"?f(C):f;v.trigger(CE.EVENT_NAME,Object.assign({targetPortId:x,sourcePortId:N,source:j,target:B,edge:C,tempEdgeId:p.id},zj()(gL,$)))}}}),p},validateEdge:function(v){var p,y=v.edge;return!!((p=y==null?void 0:y.target)===null||p===void 0?void 0:p.port)},validateMagnet:function(){return!0},validateConnection:function(v){var p=v.sourceView,y=v.targetView,C=v.targetMagnet;if(p===y)return!1;var E=y.cell;if(C){var w=C.getAttribute("port"),x=E.getPort(w);return!(x&&x.connected)}}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},onPortRendered:function(v){var p=v.port,y=v.contentSelectors,C=y&&y.content,E=p.group,w=an()("xflow-port",{connected:p.connected});C&&Bv.a.render(T.a.createElement(vJ.a,{prefixCls:OQ},T.a.createElement(tE.a,{title:p.tooltip,placement:E},T.a.createElement("span",{className:w}))),C)}},e)),o.setEvents([{eventName:"node:selected",callback:function(){s==="edit"&&yM(!1)}},{eventName:"edge:dblclick",callback:function(v){SJ(v)}},{eventName:"edge:mouseleave",callback:function(v,p){TJ(v,p)}},{eventName:"node:mouseenter",callback:function(v){s==="edit"&&yM(!0,v,l)}},{eventName:"node:mouseleave",callback:function(v){yM(!1,v)}},{eventName:"node:moved",callback:function(v,p){bJ(v,p)}},{eventName:"node:resized",callback:function(v,p){CJ(v,p)}}]),typeof t=="function"&&t(o)}),EM=Object(be.a)(function o(){var i=this;Object(De.a)(this,o),this.toDispose=new vi,this.registerHookHub=function(){return ie(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",zr.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ie(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new vi,a=[r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:function(c){return ie(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v,p;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:v=c.commandService,p=c.graph,p.on(CE.EVENT_NAME,function(E){return ie(d,void 0,void 0,Object(D.a)().mark(function w(){var x,N,j,B,$,Z,fe,de;return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return x=E.edge,N=Kt(E,["edge"]),j=N.tempEdgeId,B=Kt(N,["tempEdgeId"]),$={edgeConfig:Object.assign(Object.assign({},B),{source:{cell:N.source,port:N.sourcePortId},target:{cell:N.target,port:N.targetPortId},zIndex:1,data:Object.assign({},B)})},Ae.next=5,v.executeCommand(Eo.ADD_EDGE.id,$);case 5:return Ae.next=7,v.executeCommand(Eo.DEL_EDGE.id,{edgeConfig:{id:j}});case 7:return Z=p.getCellById(N.source),fe=p.getCellById(N.target),Ae.next=11,v.executeCommand(Ri.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},Z.data),{incomingEdges:p.getIncomingEdges(Z),outgoingEdges:p.getOutgoingEdges(Z)})});case 11:return Ae.next=13,v.executeCommand(Ri.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},fe.data),{incomingEdges:p.getIncomingEdges(fe),outgoingEdges:p.getOutgoingEdges(fe)})});case 13:de=Fy("onAddEdge"),typeof de=="function"&&de($.edgeConfig),E.edge.remove();case 16:case"end":return Ae.stop()}},w)}))});case 2:case"end":return C.stop()}},f)}))}})],t.pushAll(a),u.abrupt("return",zr.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});EM=Je([Object(Te.singleton)({contrib:tc})],EM);var eee=function(){var i=nc(),r=T.a.useMemo(function(){return{CONFIG_TYPE:"FLOWCHART_EXTENSION",getConfig:function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function e(){return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},e)}))}}},[]);return T.a.useEffect(function(){var n=i.addExtension({config:r,createModule:SQ});return i.addContainerClassNames("flowchart-extension-container"),function(){n.dispose()}},[r,i]),null},SQ=function(){return Object(Te.Module)(function(i){i(EM)})},TQ=function(i){var r=i.position,n=r===void 0?{top:40,left:240,right:240,bottom:0}:r,e=xQ(i),t=Ro();return Object(at.useEffect)(function(){t&&pJ(t)},[t]),T.a.createElement(O2,Object.assign({},i,{config:e,position:n}),i.children)};TQ.defaultProps={isXFlowCanvas:!0};var MQ=function(i){return ie(void 0,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=i.targetType,t=(n=i.targetData)===null||n===void 0?void 0:n.isGroup,a={tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"\u5206\u7EC4\u540D",name:"group-service",shape:"group-service",placeholder:"\u5206\u7EC4\u540D\u79F0"}]}]}]},s={tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"\u8282\u70B9\u540D",name:"node-service",shape:"node-service",placeholder:"\u8282\u70B9\u540D\u79F0"}]}]}]},u={tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"\u8FB9",name:"edge-service",shape:"edge-service",placeholder:"\u8FB9\u540D\u79F0"}]}]}]},!t){c.next=7;break}return c.abrupt("return",a);case 7:if(e!=="node"){c.next=9;break}return c.abrupt("return",s);case 9:if(e!=="edge"){c.next=11;break}return c.abrupt("return",u);case 11:return c.abrupt("return",{tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"",name:"canvas-service",shape:"canvas-service"}]}]}]});case 12:case"end":return c.stop()}},r)}))};function AQ(o){var i=Object(at.useState)({loading:!0}),r=Object(Ue.a)(i,2),n=r[0],e=r[1],t=Object(at.useCallback)(function(){o().then(function(a){e({loading:!1,data:a})},function(a){e({loading:!1}),console.error(a)})},[o]);return Object(at.useEffect)(function(){t()},[t]),n}var OM=function(i){var r=i.controlSchema,n=i.children,e=i.type,t=e===void 0?"node":e,a=Gh(),s=a.commandService,u=a.modelService,l=Object(at.useCallback)(function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function E(){var w,x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ge.SELECTED_NODE.useValue(u);case 2:return w=j.sent,x=w.data,j.abrupt("return",x);case 5:case"end":return j.stop()}},E)}))},[u]),c=Object(at.useCallback)(function(){return ie(void 0,void 0,void 0,Object(D.a)().mark(function E(){var w,x;return Object(D.a)().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,ge.SELECTED_CELL.useValue(u);case 2:return w=j.sent,x=w.getData(),j.abrupt("return",Object.assign({id:w.id},x));case 5:case"end":return j.stop()}},E)}))},[u]),f=AQ(t==="edge"?c:l),d=f.data,v=f.loading;T.a.useEffect(function(){s.executeCommand(za.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(w,x){return ie(void 0,void 0,void 0,Object(D.a)().mark(function N(){return Object(D.a)().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.abrupt("return",{err:null,data:x,meta:w});case 1:case"end":return B.stop()}},N)}))}})},[s]);var p=function(w){return ie(void 0,void 0,void 0,Object(D.a)().mark(function x(){var N,j;return Object(D.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,l();case 2:return N=$.sent,j=Object.assign(Object.assign({},N),w),$.next=6,s.executeCommand(Ri.UPDATE_NODE.id,{nodeConfig:j});case 6:By({type:"update:node",config:j});case 7:case"end":return $.stop()}},x)}))},y=function(w){var x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"line",N=arguments.length>2?arguments[2]:void 0;return ie(void 0,void 0,void 0,Object(D.a)().mark(function j(){var B,$,Z;return Object(D.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,c();case 2:return $=de.sent,Z=Object.assign(Object.assign(Object.assign({},$),N?w[N]:w),{attrs:Object.assign(Object.assign({},$.attrs),Object(Xe.a)({},x,Object.assign(Object.assign({},(B=$.attrs)===null||B===void 0?void 0:B[x]),N?w[N]:w)))}),de.next=6,s.executeCommand(Eo.UPDATE_EDGE.id,{edgeConfig:Z});case 6:By({type:"update:edge",config:Z});case 7:case"end":return de.stop()}},j)}))},C=function(w){return ie(void 0,void 0,void 0,Object(D.a)().mark(function x(){var N,j;return Object(D.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,l();case 2:return N=$.sent,j=Object.assign(Object.assign({},N),w),$.next=6,s.executeCommand(Ri.UPDATE_NODE.id,{nodeConfig:j});case 6:By({type:"update:group",config:j});case 7:case"end":return $.stop()}},x)}))};return v?null:T.a.createElement(Uh,{schema:r},function(){return n(Object.assign({},d),{updateNode:p,updateEdge:y,updateGroup:C})})},Ds="flowchart-editor",EE=24,pL={attrs:{line:{stroke:"#A2B1C3",strokeWidth:1},text:{fill:"#000",fontSize:12,textAnchor:"middle",textVerticalAnchor:"middle"}}},OE={width:12,height:8,name:"block"},wE={width:0,height:0,name:""},PQ={target:{sourceMarker:wE,targetMarker:OE},source:{sourceMarker:OE,targetMarker:wE},all:{sourceMarker:OE,targetMarker:OE},none:{sourceMarker:wE,targetMarker:wE}},kQ={solid:[0,0],dash:[5,5]},DQ=function(i){var r=i.label,n=r===void 0?"\u6807\u7B7E":r,e=i.value,t=i.onChange;return T.a.createElement("div",{className:"group"},T.a.createElement("label",null,n),T.a.createElement(_p.a,{value:e,style:{height:EE},onChange:function(s){t==null||t(s.target.value)}}))},xE=DQ,IQ=h("WFjJ"),RQ=function(i){var r=i.label,n=i.value,e=n===void 0?"":n,t=i.onChange,a=i.getContainer,s=Object(at.useState)(!1),u=Object(Ue.a)(s,2),l=u[0],c=u[1],f=Object(at.useRef)(e),d=Object(at.useRef)(),v=Ro(),p=v.graphProvider,y=Object(at.useRef)();p.getGraphOptions().then(function(x){y.current=x});var C=function(){return T.a.createElement("div",{className:"".concat(Ds,"-pick-color-container")},T.a.createElement("div",{className:"".concat(Ds,"-popover")},T.a.createElement(IQ.SketchPicker,{onChange:function(j){f.current=j.hex}}),T.a.createElement("div",{className:"foolter"},T.a.createElement(sM.a,{onClick:function(){c(!1)}},"\u53D6\u6D88"),T.a.createElement(sM.a,{type:"primary",onClick:function(){t==null||t(f.current),c(!1)}},"\u786E\u8BA4"))))},E=function(N,j){var B=document.getElementsByClassName(j);if(B.length===1)return B[0];for(var $=null,Z=N.parentElement;!$;){var fe=Z.getElementsByClassName(j);(fe==null?void 0:fe.length)>0&&($=fe[0]),Z=Z.parentElement}return $},w=function(){var N,j=(N=a==null?void 0:a())!==null&&N!==void 0?N:E(d.current,"flowchart-editor-panel-body");return Object(Nk.createPortal)(T.a.createElement(C,null),j)};return T.a.createElement("div",{className:"group",ref:d},r&&T.a.createElement("label",null,r),T.a.createElement("div",{className:"".concat(Ds,"-color-container"),onClick:function(){c(!0)}},T.a.createElement("div",{className:"".concat(Ds,"-color"),style:{backgroundColor:e,height:"100%"}})),l&&w())},Nd=Object(at.memo)(RQ,function(o,i){return o.label===i.label&&o.value===i.value}),NQ=function(i){var r=i.label,n=i.value,e=i.onChange,t=i.min,a=i.width;return T.a.createElement("div",{className:"group"},r&&T.a.createElement("label",null,r),T.a.createElement(dM.a,{value:n,min:t,style:{width:a,height:EE},onChange:function(u){e==null||e(u)}}))},Gy=NQ,SE=function(i){var r=i.value,n=i.onChangeItem,e=i.addonBefore;return T.a.createElement("div",{className:"addon-before-group"},T.a.createElement(dM.a,{value:r,style:{height:EE,border:"none"},onChange:function(a){n(a)}}),T.a.createElement("span",null,e))},jQ=function(i){var r=i.label,n=r===void 0?"\u4F4D\u7F6E":r,e=i.x,t=i.y,a=i.onChange;return T.a.createElement("div",{className:"group"},T.a.createElement("label",null,n),T.a.createElement("div",{className:"split"},T.a.createElement(SE,{addonBefore:"X",value:e,onChangeItem:function(u){a==null||a("x",u)}}),T.a.createElement(SE,{addonBefore:"Y",value:t,onChangeItem:function(u){a==null||a("y",u)}})))},wM=jQ,LQ=function(i){var r=i.width,n=i.height,e=i.label,t=e===void 0?"\u5C3A\u5BF8":e,a=i.onChange;return T.a.createElement("div",{className:"group"},T.a.createElement("label",null,t),T.a.createElement("div",{className:"split"},T.a.createElement(SE,{addonBefore:"W",value:r,onChangeItem:function(u){a==null||a("width",u)}}),T.a.createElement(SE,{addonBefore:"H",value:n,onChangeItem:function(u){a==null||a("height",u)}})))},xM=LQ,_Q=function(i){var r=i.label,n=r===void 0?"\u7BAD\u5934":r,e=i.value,t=i.onChange,a=i.options,s=a===void 0?[]:a,u=i.width;return T.a.createElement("div",{className:"group"},T.a.createElement("label",null,n),T.a.createElement(cM.a,{size:"small",value:e,style:{width:u,height:EE},getPopupContainer:function(c){return c.parentNode},optionFilterProp:"children",onChange:function(c){t==null||t(c)},filterOption:function(c,f){var d=f.label,v=d===void 0?"":d;return typeof v=="string"?v.toLowerCase().indexOf(c.toLowerCase())>=0:v.toString().indexOf(c.toLowerCase())>=0},options:s}))},SM=_Q,tee={InputFiled:xE,ColorPicker:Nd,InputNumberFiled:Gy,Size:xM,Position:wM,SelectField:SM},FQ=function(i){var r=i.config,n=i.plugin,e=n===void 0?{}:n,t=e.updateNode,a=Object(at.useState)(Object.assign(Object.assign({},Kn),r)),s=Object(Ue.a)(a,2),u=s[0],l=s[1],c=function(d,v){l(Object.assign(Object.assign({},u),Object(Xe.a)({},d,v))),t(Object(Xe.a)({},d,v))};return Object(at.useEffect)(function(){l(Object.assign(Object.assign({},Kn),r))},[r]),T.a.createElement("div",{className:"".concat(Ds,"-panel-body")},T.a.createElement("div",{className:"".concat(Ds,"-panel-group")},T.a.createElement("h5",null,"\u5185\u5BB9"),T.a.createElement(xE,{label:"\u6807\u9898",value:u.label,onChange:function(d){c("label",d)}})),T.a.createElement("div",{className:"".concat(Ds,"-panel-group")},T.a.createElement("h5",null,"\u6837\u5F0F"),T.a.createElement(wM,{x:u.x,y:u.y,onChange:function(d,v){c(d,v)}}),T.a.createElement(xM,{width:u.width,height:u.height,onChange:function(d,v){c(d,v)}}),T.a.createElement(Nd,{label:"\u586B\u5145",value:u.fill,onChange:function(d){c("fill",d)}}),T.a.createElement(Nd,{label:"\u8FB9\u6846",value:u.stroke,onChange:function(d){c("stroke",d)}}),T.a.createElement("div",{className:"".concat(Ds,"-node-text-style")},T.a.createElement(Gy,{label:"\u5B57\u53F7",value:u.fontSize,width:68,onChange:function(d){c("fontSize",d)}}),T.a.createElement(Nd,{value:u.fontFill,onChange:function(d){c("fontFill",d)}}))))},mL=function(i){return T.a.createElement(OM,Object.assign({},i),function(r,n){return T.a.createElement(FQ,Object.assign({},i,{plugin:n,config:r}))})},BQ=function(i){var r=i.config,n=i.plugin,e=n===void 0?{}:n,t=e.updateEdge,a=Object(at.useState)(Object.assign(Object.assign({},pL),r)),s=Object(Ue.a)(a,2),u=s[0],l=s[1];Object(at.useEffect)(function(){l(Object.assign(Object.assign({},pL),r))},[r]);var c=function(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"line",E,w=u.attrs,x=w===void 0?{}:w;return(E=x[C])===null||E===void 0?void 0:E[y]},f=function(){var y,C,E,w,x,N=u.attrs,j=N===void 0?{}:N,B=j.line,$=B===void 0?{}:B;return((y=$.sourceMarker)===null||y===void 0?void 0:y.name)&&((C=$.targetMarker)===null||C===void 0?void 0:C.name)?"all":!((E=$.sourceMarker)===null||E===void 0?void 0:E.name)&&!((w=$.targetMarker)===null||w===void 0?void 0:w.name)?"none":((x=$.sourceMarker)===null||x===void 0?void 0:x.name)?"source":"target"},d=function(){var y=u.attrs,C=y===void 0?{}:y,E=C.line,w=E===void 0?{}:E;return w.strokeDasharray?"dash":"solid"},v=function(y,C){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"line",w,x;if(y==="arrow")l(Object.assign(Object.assign({},u),{attrs:Object.assign(Object.assign({},u.attrs),Object(Xe.a)({},E,Object.assign(Object.assign({},(w=u.attrs)===null||w===void 0?void 0:w[E]),C)))}));else{var N;l(Object.assign(Object.assign({},u),(N={},Object(Xe.a)(N,y,C),Object(Xe.a)(N,"attrs",Object.assign(Object.assign({},u.attrs),Object(Xe.a)({},E,Object.assign(Object.assign({},(x=u.attrs)===null||x===void 0?void 0:x[E]),Object(Xe.a)({},y,C))))),N)))}t(Object(Xe.a)({},y,C),E,y==="arrow"?"arrow":"")};return T.a.createElement("div",{className:"".concat(Ds,"-panel-body")},T.a.createElement("div",{className:"".concat(Ds,"-panel-group")},T.a.createElement("h5",null,"\u5185\u5BB9"),T.a.createElement(xE,{label:"\u6807\u7B7E",value:u.label,onChange:function(y){v("label",y)}})),T.a.createElement("h5",{style:{marginBottom:12}},"\u6837\u5F0F"),T.a.createElement("div",{className:"".concat(Ds,"-panel-group"),style:{marginBottom:0}},T.a.createElement("h5",null,"\u7EBF"),T.a.createElement(SM,{label:"\u7BAD\u5934",value:f(),width:"100%",options:[{label:"\u6B63\u5411",value:"target"},{label:"\u9006\u5411",value:"source"},{label:"\u53CC\u5411",value:"all"},{label:"\u65E0",value:"none"}],onChange:function(y){v("arrow",PQ[y],"line")}}),T.a.createElement("div",{className:"".concat(Ds,"-edge-stroke-style")},T.a.createElement(SM,{label:"\u7EBF\u5F62",width:68,value:d(),options:[{label:"\u5B9E\u7EBF",value:"solid"},{label:"\u865A\u7EBF",value:"dash"}],onChange:function(y){v("strokeDasharray",kQ[y],"line")}}),T.a.createElement(Gy,{value:c("strokeWidth"),min:1,onChange:function(y){v("strokeWidth",y,"line")}})),T.a.createElement(Nd,{label:"\u8FB9\u6846",value:c("stroke"),onChange:function(y){v("stroke",y,"line")}})),T.a.createElement("div",{className:"".concat(Ds,"-panel-group")},T.a.createElement("h5",null,"\u6807\u7B7E"),T.a.createElement("div",{className:"".concat(Ds,"-edge-text-style")},T.a.createElement(Gy,{label:"\u5B57\u53F7",min:10,width:68,value:c("fontSize","text")||12,onChange:function(y){v("fontSize",y,"text")}}),T.a.createElement(Nd,{value:c("fill","text")||"#000",onChange:function(y){v("fill",y,"text")}}))))},yL=function(i){return T.a.createElement(OM,Object.assign({},i,{type:"edge"}),function(r,n){return T.a.createElement(BQ,Object.assign({},i,{plugin:n,config:r}))})},GQ=function(i){var r=i.config,n=i.plugin,e=n===void 0?{}:n,t=e.updateGroup,a=Object(at.useState)(Object.assign(Object.assign({},Kn),r)),s=Object(Ue.a)(a,2),u=s[0],l=s[1],c=function(d,v){l(Object.assign(Object.assign({},u),Object(Xe.a)({},d,v))),t(Object(Xe.a)({},d,v))};return Object(at.useEffect)(function(){l(Object.assign(Object.assign({},Kn),r))},[r]),T.a.createElement("div",{className:"".concat(Ds,"-panel-body")},T.a.createElement("div",{className:"".concat(Ds,"-panel-group")},T.a.createElement("h5",null,"\u5185\u5BB9"),T.a.createElement(xE,{label:"\u6807\u9898",value:u.label,onChange:function(d){c("label",d)}})),T.a.createElement("div",{className:"".concat(Ds,"-panel-group")},T.a.createElement("h5",null,"\u6837\u5F0F"),T.a.createElement(wM,{x:u.x,y:u.y,onChange:function(d,v){c(d,v)}}),T.a.createElement(xM,{width:u.width,height:u.height,onChange:function(d,v){c(d,v)}}),T.a.createElement(Nd,{label:"\u586B\u5145",value:u.fill,onChange:function(d){c("fill",d)}}),T.a.createElement(Nd,{label:"\u8FB9\u6846",value:u.stroke,onChange:function(d){c("stroke",d)}}),T.a.createElement("div",{className:"".concat(Ds,"-node-text-style")},T.a.createElement(Gy,{label:"\u5B57\u53F7",value:u.fontSize,width:68,onChange:function(d){c("fontSize",d)}}),T.a.createElement(Nd,{value:u.fontFill,onChange:function(d){c("fontFill",d)}}))))},bL=function(i){return T.a.createElement(OM,Object.assign({},i),function(r,n){return T.a.createElement(GQ,Object.assign({},i,{plugin:n,config:r}))})},CL=function(){return T.a.createElement("div",{className:"".concat(Ds,"-canvas-panel")},T.a.createElement("span",null,"\u672A\u9009\u4E2D"))},zQ=function(i){return i.set("node-service",mL),i.set("edge-service",yL),i.set("group-service",bL),i.set("canvas-service",CL),i},nee={NodeService:mL,EdgeService:yL,GroupService:bL,CanvasService:CL},TM="xflow-editor-panel-collpase",ree=function(i){var r=Object(at.useState)(!1),n=Object(Ue.a)(r,2),e=n[0],t=n[1],a=i.controlMapService,s=a===void 0?zQ:a,u=i.formSchemaService,l=u===void 0?MQ:u,c=i.position,f=c===void 0?{width:240,top:0,bottom:0,right:0}:c,d=i.show,v=d===void 0?!0:d,p=Kt(i,["controlMapService","formSchemaService","position","show"]);if(!v)return null;var y=f.width,C=y===void 0?200:y,E=f.right;return T.a.createElement(zh,{className:TM,position:Object.assign(Object.assign({},f),{right:e?-C:E})},T.a.createElement("div",{className:"".concat(TM,"-wrapper")},T.a.createElement(Bj,Object.assign({targetType:["node","edge","canvas","group"],controlMapService:s,formSchemaService:l,position:Object.assign(Object.assign({},f),{top:0}),prefixClz:"xflow-form-editor"},p)),T.a.createElement("div",{className:"".concat(TM,"-icon"),style:{top:21,left:e?-20:-10,borderRadius:e?"50% 0 0  50%":"50%",borderRight:e?"none":""},onClick:function(){t(!e)}},e?T.a.createElement(Vj.a,null):T.a.createElement(Uj.a,null))))}},"9y2T":function(le,P,h){"use strict";h.d(P,"a",function(){return I}),h.d(P,"b",function(){return _});var I=-1,m=1;function _(){return m++}},A14R:function(le,P){},AEOw:function(le,P){le.exports=h;function h(I,m,_){var M=m[0],A=m[1];return I[0]=_[0]*M+_[4]*A+_[12],I[1]=_[1]*M+_[5]*A+_[13],I}},APxj:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I=h("Ucsi");function m(_,M){M===void 0&&(M=!0);var A=I.makePropertyInjectDecorator(_,M),G=I.makePropertyInjectNamedDecorator(_,M),R=I.makePropertyInjectTaggedDecorator(_,M),X=I.makePropertyMultiInjectDecorator(_,M);return{lazyInject:A,lazyInjectNamed:G,lazyInjectTagged:R,lazyMultiInject:X}}P.default=m},AV2a:function(le,P,h){var I=h("3z9K"),m=h("QJPA"),_=h("WZrV");le.exports=M;function M(A,G){var R=new m,X={},W=new _,Y;function K(ae){var te=ae.v===Y?ae.w:ae.v,ce=W.priority(te);if(ce!==void 0){var ee=G(ae);ee<ce&&(X[te]=Y,W.decrease(te,ee))}}if(A.nodeCount()===0)return R;I.each(A.nodes(),function(ae){W.add(ae,Number.POSITIVE_INFINITY),R.setNode(ae)}),W.decrease(A.nodes()[0],0);for(var ne=!1;W.size()>0;){if(Y=W.removeMin(),I.has(X,Y))R.setEdge(Y,X[Y]);else{if(ne)throw new Error("Input graph is not connected: "+A);ne=!0}A.nodeEdges(Y).forEach(K)}return R}},AnK5:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.EditableInput=void 0;var I=function(){function q(ye,ue){for(var ve=0;ve<ue.length;ve++){var pe=ue[ve];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(ye,pe.key,pe)}}return function(ye,ue,ve){return ue&&q(ye.prototype,ue),ve&&q(ye,ve),ye}}(),m=h("q1tI"),_=G(m),M=h("/FUP"),A=G(M);function G(q){return q&&q.__esModule?q:{default:q}}function R(q,ye,ue){return ye in q?Object.defineProperty(q,ye,{value:ue,enumerable:!0,configurable:!0,writable:!0}):q[ye]=ue,q}function X(q,ye){if(!(q instanceof ye))throw new TypeError("Cannot call a class as a function")}function W(q,ye){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye&&(typeof ye=="object"||typeof ye=="function")?ye:q}function Y(q,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ye);q.prototype=Object.create(ye&&ye.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),ye&&(Object.setPrototypeOf?Object.setPrototypeOf(q,ye):q.__proto__=ye)}var K=1,ne=38,ae=40,te=[ne,ae],ce=function(ye){return te.indexOf(ye)>-1},ee=function(ye){return ye+"%"},H=function(ye){return Number(String(ye).replace(/%/g,""))},se=function(ye){return String(ye).indexOf("%")>-1},re=P.EditableInput=function(q){Y(ye,q);function ye(ue){X(this,ye);var ve=W(this,(ye.__proto__||Object.getPrototypeOf(ye)).call(this));return ve.handleBlur=function(){ve.state.blurValue&&ve.setState({value:ve.state.blurValue,blurValue:null})},ve.handleChange=function(pe){ve.setUpdatedValue(pe.target.value,pe)},ve.handleKeyDown=function(pe){var L=H(pe.target.value);if(!isNaN(L)&&ce(pe.keyCode)){var ge=ve.getArrowOffset(),_e=pe.keyCode===ne?L+ge:L-ge;ve.setUpdatedValue(_e,pe)}},ve.handleDrag=function(pe){if(ve.props.dragLabel){var L=Math.round(ve.props.value+pe.movementX);L>=0&&L<=ve.props.dragMax&&ve.props.onChange&&ve.props.onChange(ve.getValueObjectWithLabel(L),pe)}},ve.handleMouseDown=function(pe){ve.props.dragLabel&&(pe.preventDefault(),ve.handleDrag(pe),window.addEventListener("mousemove",ve.handleDrag),window.addEventListener("mouseup",ve.handleMouseUp))},ve.handleMouseUp=function(){ve.unbindEventListeners()},ve.unbindEventListeners=function(){window.removeEventListener("mousemove",ve.handleDrag),window.removeEventListener("mouseup",ve.handleMouseUp)},ve.state={value:String(ue.value).toUpperCase(),blurValue:String(ue.value).toUpperCase()},ve}return I(ye,[{key:"componentWillReceiveProps",value:function(ve){var pe=this.input;ve.value!==this.state.value&&(pe===document.activeElement?this.setState({blurValue:String(ve.value).toUpperCase()}):this.setState({value:String(ve.value).toUpperCase(),blurValue:!this.state.blurValue&&String(ve.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(ve){return R({},this.props.label,ve)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||K}},{key:"setUpdatedValue",value:function(ve,pe){var L=this.props.label!==null?this.getValueObjectWithLabel(ve):ve;this.props.onChange&&this.props.onChange(L,pe);var ge=se(pe.target.value);this.setState({value:ge?ee(ve):ve})}},{key:"render",value:function(){var ve=this,pe=(0,A.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return _.default.createElement("div",{style:pe.wrap},_.default.createElement("input",{style:pe.input,ref:function(ge){return ve.input=ge},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?_.default.createElement("span",{style:pe.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),ye}(m.PureComponent||m.Component);P.default=re},AwBQ:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Lookup=void 0;var I=h("MON2"),m=function(){function _(){this._map=new Map}return _.prototype.getMap=function(){return this._map},_.prototype.add=function(M,A){if(M==null)throw new Error(I.NULL_ARGUMENT);if(A==null)throw new Error(I.NULL_ARGUMENT);var G=this._map.get(M);G!==void 0?(G.push(A),this._map.set(M,G)):this._map.set(M,[A])},_.prototype.get=function(M){if(M==null)throw new Error(I.NULL_ARGUMENT);var A=this._map.get(M);if(A!==void 0)return A;throw new Error(I.KEY_NOT_FOUND)},_.prototype.remove=function(M){if(M==null)throw new Error(I.NULL_ARGUMENT);if(!this._map.delete(M))throw new Error(I.KEY_NOT_FOUND)},_.prototype.removeByCondition=function(M){var A=this;this._map.forEach(function(G,R){var X=G.filter(function(W){return!M(W)});X.length>0?A._map.set(R,X):A._map.delete(R)})},_.prototype.hasKey=function(M){if(M==null)throw new Error(I.NULL_ARGUMENT);return this._map.has(M)},_.prototype.clone=function(){var M=new _;return this._map.forEach(function(A,G){A.forEach(function(R){return M.add(G,R.clone())})}),M},_.prototype.traverse=function(M){this._map.forEach(function(A,G){M(G,A)})},_}();P.Lookup=m},AzWu:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M442.3 677.6l199.4-156.7a11.3 11.3 0 000-17.7L442.3 346.4c-7.4-5.8-18.3-.6-18.3 8.8v313.5c0 9.4 10.9 14.7 18.3 8.9z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"play-square",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="PlaySquareOutlined";var R=P.a=m.forwardRef(G)},AzzA:function(le,P){le.exports=h;function h(I,m){return I[0]=-m[0],I[1]=-m[1],I}},BFph:function(le,P,h){"use strict";h.d(P,"a",function(){return we});var I=h("o0o1"),m=h.n(I),_=h("yXPU"),M=h.n(_),A=h("yG8O"),G=h.n(A),R=h("lwsE"),X=h.n(R),W=h("W8MJ"),Y=h.n(W),K=h("U+yc"),ne=h.n(K),ae=h("1ABj"),te=h.n(ae),ce=h("IOcx"),ee=h("4cb6"),H=h.n(ee),se=h("+uE7"),re,q,ye,ue,ve,pe,L,ge,_e,Te,we=(re=Object(ee.injectable)(),q=Object(ee.inject)(se.a.HierarchyComponentManager),ye=Object(ee.inject)(se.a.TransformComponentManager),ue=Object(ee.inject)(se.a.MeshComponentManager),re(ve=(pe=(Te=function(){function Qe(){X()(this,Qe),G()(this,"hierarchy",L,this),G()(this,"transform",ge,this),G()(this,"mesh",_e,this)}return Y()(Qe,[{key:"execute",value:function(){var D=M()(m.a.mark(function Ct(){return m.a.wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return Nt.stop()}},Ct,this)}));function Ue(){return D.apply(this,arguments)}return Ue}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var Ue=this;this.transform.forEach(function(Ct,ut){(ut.isDirty()||ut.isLocalDirty())&&(Ue.setMeshAABBDirty(Ue.mesh.getComponentByEntity(Ct)),ut.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var Ue=this;this.hierarchy.forEach(function(Ct,ut){var Nt=Ue.transform.getComponentByEntity(Ct),Kt=Ue.transform.getComponentByEntity(ut.parentID);Nt!==null&&Kt!==null&&Nt.updateTransformWithParent(Kt)})}},{key:"attach",value:function(Ue,Ct,ut){this.hierarchy.contains(Ue)&&this.detach(Ue),this.hierarchy.create(Ue,{parentID:Ct});var Nt=this.mesh.getComponentByEntity(Ct);if(this.setMeshAABBDirty(Nt),Nt&&Nt.children.indexOf(Ue)===-1&&Nt.children.push(Ue),this.hierarchy.getCount()>1)for(var Kt=this.hierarchy.getCount()-1;Kt>0;--Kt)for(var Je=this.hierarchy.getEntity(Kt),Vt=0;Vt<Kt;++Vt){var Be=this.hierarchy.getComponent(Vt);if(Be.parentID===Je){this.hierarchy.moveItem(Kt,Vt),++Kt;break}}var ie=this.hierarchy.getComponentByEntity(Ue),un=this.transform.getComponentByEntity(Ct);un===null&&(un=this.transform.create(Ct));var rn=this.transform.getComponentByEntity(Ue);rn===null&&(rn=this.transform.create(Ue),un=this.transform.getComponentByEntity(Ct)),rn.parent=un,!ut&&un&&(rn.matrixTransform(ce.b.invert(ce.b.create(),un.worldTransform)),rn.updateTransform()),un&&rn.updateTransformWithParent(un)}},{key:"detach",value:function(Ue){var Ct=this.hierarchy.getComponentByEntity(Ue);if(Ct!==null){var ut=this.transform.getComponentByEntity(Ue);ut!==null&&(ut.parent=null,ut.applyTransform()),this.hierarchy.removeKeepSorted(Ue);var Nt=this.mesh.getComponentByEntity(Ct.parentID);if(Nt){var Kt=Nt.children.indexOf(Ue);Nt.children.splice(Kt,1)}this.setMeshAABBDirty(Nt)}}},{key:"detachChildren",value:function(Ue){var Ct=this.mesh.getComponentByEntity(Ue);Ct&&(Ct.children=[]);for(var ut=0;ut<this.hierarchy.getCount();){var Nt;if(((Nt=this.hierarchy.getComponent(ut))===null||Nt===void 0?void 0:Nt.parentID)===Ue){var Kt=this.hierarchy.getEntity(ut);this.detach(Kt)}else++ut}}},{key:"setMeshAABBDirty",value:function(Ue){Ue&&(Ue.aabbDirty=!0)}}]),Qe}(),Te),L=ne()(pe.prototype,"hierarchy",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge=ne()(pe.prototype,"transform",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_e=ne()(pe.prototype,"mesh",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe))||ve)},BKMn:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.PhotoshopPointerCircle=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.PhotoshopPointerCircle=function(X){var W=X.hsl,Y=(0,M.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":W.l>.5});return m.default.createElement("div",{style:Y.picker})};P.default=G},Ba7A:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Swatch=void 0;var I=Object.assign||function(ne){for(var ae=1;ae<arguments.length;ae++){var te=arguments[ae];for(var ce in te)Object.prototype.hasOwnProperty.call(te,ce)&&(ne[ce]=te[ce])}return ne},m=h("q1tI"),_=W(m),M=h("/FUP"),A=W(M),G=h("japM"),R=h("Nq3d"),X=W(R);function W(ne){return ne&&ne.__esModule?ne:{default:ne}}var Y=13,K=P.Swatch=function(ae){var te=ae.color,ce=ae.style,ee=ae.onClick,H=ee===void 0?function(){}:ee,se=ae.onHover,re=ae.title,q=re===void 0?te:re,ye=ae.children,ue=ae.focus,ve=ae.focusStyle,pe=ve===void 0?{}:ve,L=te==="transparent",ge=(0,A.default)({default:{swatch:I({background:te,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},ce,ue?pe:{})}}),_e=function(Ue){return H(te,Ue)},Te=function(Ue){return Ue.keyCode===Y&&H(te,Ue)},we=function(Ue){return se(te,Ue)},Qe={};return se&&(Qe.onMouseOver=we),_.default.createElement("div",I({style:ge.swatch,onClick:_e,title:q,tabIndex:0,onKeyDown:Te},Qe),ye,L&&_.default.createElement(X.default,{borderRadius:ge.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};P.default=(0,G.handleFocus)(K)},BjIp:function(le,P,h){var I=h("3z9K"),m=h("98GK");le.exports=_;function _(M){return I.filter(m(M),function(A){return A.length>1||A.length===1&&M.hasEdge(A[0],A[0])})}},BkyA:function(le,P,h){var I=h("swpM");le.exports=m;function m(_){try{I(_)}catch(M){if(M instanceof I.CycleException)return!1;throw M}return!0}},BmQL:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SwatchesColor=void 0;var I=h("q1tI"),m=Y(I),_=h("/FUP"),M=Y(_),A=h("p8yl"),G=Y(A),R=h("TM95"),X=h("ql/k"),W=Y(X);function Y(ne){return ne&&ne.__esModule?ne:{default:ne}}var K=P.SwatchesColor=function(ae){var te=ae.color,ce=ae.onClick,ee=ce===void 0?function(){}:ce,H=ae.onSwatchHover,se=ae.first,re=ae.last,q=ae.active,ye=(0,M.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:te,marginBottom:"1px"},check:{color:G.default.getContrastingColor(te),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:se,last:re,active:q,"color-#FFFFFF":te==="#FFFFFF",transparent:te==="transparent"});return m.default.createElement(R.Swatch,{color:te,style:ye.color,onClick:ee,onHover:H,focusStyle:{boxShadow:"0 0 4px "+te}},m.default.createElement("div",{style:ye.check},m.default.createElement(W.default,null)))};P.default=K},Bnag:function(le,P){function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},Bu3x:function(le,P){le.exports=h;function h(I,m,_){return I[0]=m[0]/_[0],I[1]=m[1]/_[1],I}},C3Dj:function(le,P){le.exports=h;function h(I,m){var _=m[0]-I[0],M=m[1]-I[1];return _*_+M*M}},CGoQ:function(le,P,h){le.exports=h("M5u/")},CZoQ:function(le,P){function h(I,m,_){for(var M=_-1,A=I.length;++M<A;)if(I[M]===m)return M;return-1}le.exports=h},Cq4r:function(le,P){le.exports=h;function h(I,m){return I[0]=Math.floor(m[0]),I[1]=Math.floor(m[1]),I}},D9lx:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingInWhenOnSyntax=void 0;var I=h("6AGu"),m=h("406g"),_=h("z4Hk"),M=function(){function A(G){this._binding=G,this._bindingWhenSyntax=new _.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new m.BindingOnSyntax(this._binding),this._bindingInSyntax=new I.BindingInSyntax(G)}return A.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},A.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},A.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},A.prototype.when=function(G){return this._bindingWhenSyntax.when(G)},A.prototype.whenTargetNamed=function(G){return this._bindingWhenSyntax.whenTargetNamed(G)},A.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},A.prototype.whenTargetTagged=function(G,R){return this._bindingWhenSyntax.whenTargetTagged(G,R)},A.prototype.whenInjectedInto=function(G){return this._bindingWhenSyntax.whenInjectedInto(G)},A.prototype.whenParentNamed=function(G){return this._bindingWhenSyntax.whenParentNamed(G)},A.prototype.whenParentTagged=function(G,R){return this._bindingWhenSyntax.whenParentTagged(G,R)},A.prototype.whenAnyAncestorIs=function(G){return this._bindingWhenSyntax.whenAnyAncestorIs(G)},A.prototype.whenNoAncestorIs=function(G){return this._bindingWhenSyntax.whenNoAncestorIs(G)},A.prototype.whenAnyAncestorNamed=function(G){return this._bindingWhenSyntax.whenAnyAncestorNamed(G)},A.prototype.whenAnyAncestorTagged=function(G,R){return this._bindingWhenSyntax.whenAnyAncestorTagged(G,R)},A.prototype.whenNoAncestorNamed=function(G){return this._bindingWhenSyntax.whenNoAncestorNamed(G)},A.prototype.whenNoAncestorTagged=function(G,R){return this._bindingWhenSyntax.whenNoAncestorTagged(G,R)},A.prototype.whenAnyAncestorMatches=function(G){return this._bindingWhenSyntax.whenAnyAncestorMatches(G)},A.prototype.whenNoAncestorMatches=function(G){return this._bindingWhenSyntax.whenNoAncestorMatches(G)},A.prototype.onActivation=function(G){return this._bindingOnSyntax.onActivation(G)},A}();P.BindingInWhenOnSyntax=M},DE2O:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="CloudSyncOutlined";var R=P.a=m.forwardRef(G)},DRdP:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.PhotoshopButton=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.PhotoshopButton=function(X){var W=X.onClick,Y=X.label,K=X.children,ne=X.active,ae=(0,M.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:ne});return m.default.createElement("div",{style:ae.button,onClick:W},Y||K)};P.default=G},ENEI:function(le,P,h){"use strict";h.d(P,"a",function(){return G});var I=h("lwsE"),m=h.n(I),_=h("W8MJ"),M=h.n(_),A=h("IOcx"),G=function(){function R(X,W){m()(this,R),this.center=void 0,this.halfExtents=void 0,this.min=A.d.create(),this.max=A.d.create(),this.update(X,W)}return M()(R,[{key:"update",value:function(W,Y){this.center=W||A.d.create(),this.halfExtents=Y||A.d.fromValues(.5,.5,.5),this.min=A.d.sub(this.min,this.center,this.halfExtents),this.max=A.d.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(W,Y){A.d.add(this.center,Y,W),A.d.scale(this.center,this.center,.5),A.d.sub(this.halfExtents,Y,W),A.d.scale(this.halfExtents,this.halfExtents,.5),A.d.copy(this.min,W),A.d.copy(this.max,Y)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(W){var Y=this.center,K=Y[0],ne=Y[1],ae=Y[2],te=this.halfExtents,ce=te[0],ee=te[1],H=te[2],se=K-ce,re=K+ce,q=ne-ee,ye=ne+ee,ue=ae-H,ve=ae+H,pe=W.center,L=pe[0],ge=pe[1],_e=pe[2],Te=W.halfExtents,we=Te[0],Qe=Te[1],D=Te[2],Ue=L-we,Ct=L+we,ut=ge-Qe,Nt=ge+Qe,Kt=_e-D,Je=_e+D;Ue<se&&(se=Ue),Ct>re&&(re=Ct),ut<q&&(q=ut),Nt>ye&&(ye=Nt),Kt<ue&&(ue=Kt),Je>ve&&(ve=Je),Y[0]=(se+re)*.5,Y[1]=(q+ye)*.5,Y[2]=(ue+ve)*.5,te[0]=(re-se)*.5,te[1]=(ye-q)*.5,te[2]=(ve-ue)*.5,this.min[0]=se,this.min[1]=q,this.min[2]=ue,this.max[0]=re,this.max[1]=ye,this.max[2]=ve}},{key:"intersects",value:function(W){var Y=this.getMax(),K=this.getMin(),ne=W.getMax(),ae=W.getMin();return K[0]<=ne[0]&&Y[0]>=ae[0]&&K[1]<=ne[1]&&Y[1]>=ae[1]&&K[2]<=ne[2]&&Y[2]>=ae[2]}},{key:"containsPoint",value:function(W){var Y=this.getMin(),K=this.getMax();return!(W[0]<Y[0]||W[0]>K[0]||W[1]<Y[1]||W[1]>K[1]||W[2]<Y[2]||W[2]>K[2])}},{key:"getNegativeFarPoint",value:function(W){return W.pnVertexFlag===273?A.d.copy(A.d.create(),this.min):W.pnVertexFlag===272?A.d.fromValues(this.min[0],this.min[1],this.max[2]):W.pnVertexFlag===257?A.d.fromValues(this.min[0],this.max[1],this.min[2]):W.pnVertexFlag===256?A.d.fromValues(this.min[0],this.max[1],this.max[2]):W.pnVertexFlag===17?A.d.fromValues(this.max[0],this.min[1],this.min[2]):W.pnVertexFlag===16?A.d.fromValues(this.max[0],this.min[1],this.max[2]):W.pnVertexFlag===1?A.d.fromValues(this.max[0],this.max[1],this.min[2]):A.d.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(W){return W.pnVertexFlag===273?A.d.copy(A.d.create(),this.max):W.pnVertexFlag===272?A.d.fromValues(this.max[0],this.max[1],this.min[2]):W.pnVertexFlag===257?A.d.fromValues(this.max[0],this.min[1],this.max[2]):W.pnVertexFlag===256?A.d.fromValues(this.max[0],this.min[1],this.min[2]):W.pnVertexFlag===17?A.d.fromValues(this.min[0],this.max[1],this.max[2]):W.pnVertexFlag===16?A.d.fromValues(this.min[0],this.max[1],this.min[2]):W.pnVertexFlag===1?A.d.fromValues(this.min[0],this.min[1],this.max[2]):A.d.fromValues(this.min[0],this.min[1],this.min[2])}}]),R}()},EVdn:function(le,P,h){var I,m;/*!
* jQuery JavaScript Library v3.7.0
* https://jquery.com/
*
* Copyright OpenJS Foundation and other contributors
* Released under the MIT license
* https://jquery.org/license
*
* Date: 2023-05-11T18:29Z
*/(function(_,M){"use strict";typeof le.exports=="object"?le.exports=_.document?M(_,!0):function(A){if(!A.document)throw new Error("jQuery requires a window with a document");return M(A)}:M(_)})(typeof window!="undefined"?window:this,function(_,M){"use strict";var A=[],G=Object.getPrototypeOf,R=A.slice,X=A.flat?function(U){return A.flat.call(U)}:function(U){return A.concat.apply([],U)},W=A.push,Y=A.indexOf,K={},ne=K.toString,ae=K.hasOwnProperty,te=ae.toString,ce=te.call(Object),ee={},H=function(S){return typeof S=="function"&&typeof S.nodeType!="number"&&typeof S.item!="function"},se=function(S){return S!=null&&S===S.window},re=_.document,q={type:!0,src:!0,nonce:!0,noModule:!0};function ye(U,S,z){z=z||re;var V,oe,Ce=z.createElement("script");if(Ce.text=U,S)for(V in q)oe=S[V]||S.getAttribute&&S.getAttribute(V),oe&&Ce.setAttribute(V,oe);z.head.appendChild(Ce).parentNode.removeChild(Ce)}function ue(U){return U==null?U+"":typeof U=="object"||typeof U=="function"?K[ne.call(U)]||"object":typeof U}var ve="3.7.0",pe=/HTML$/i,L=function U(S,z){return new U.fn.init(S,z)};L.fn=L.prototype={jquery:ve,constructor:L,length:0,toArray:function(){return R.call(this)},get:function(S){return S==null?R.call(this):S<0?this[S+this.length]:this[S]},pushStack:function(S){var z=L.merge(this.constructor(),S);return z.prevObject=this,z},each:function(S){return L.each(this,S)},map:function(S){return this.pushStack(L.map(this,function(z,V){return S.call(z,V,z)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(L.grep(this,function(S,z){return(z+1)%2}))},odd:function(){return this.pushStack(L.grep(this,function(S,z){return z%2}))},eq:function(S){var z=this.length,V=+S+(S<0?z:0);return this.pushStack(V>=0&&V<z?[this[V]]:[])},end:function(){return this.prevObject||this.constructor()},push:W,sort:A.sort,splice:A.splice},L.extend=L.fn.extend=function(){var U,S,z,V,oe,Ce,Ee=arguments[0]||{},Ge=1,it=arguments.length,yt=!1;for(typeof Ee=="boolean"&&(yt=Ee,Ee=arguments[Ge]||{},Ge++),typeof Ee!="object"&&!H(Ee)&&(Ee={}),Ge===it&&(Ee=this,Ge--);Ge<it;Ge++)if((U=arguments[Ge])!=null)for(S in U)V=U[S],!(S==="__proto__"||Ee===V)&&(yt&&V&&(L.isPlainObject(V)||(oe=Array.isArray(V)))?(z=Ee[S],oe&&!Array.isArray(z)?Ce=[]:!oe&&!L.isPlainObject(z)?Ce={}:Ce=z,oe=!1,Ee[S]=L.extend(yt,Ce,V)):V!==void 0&&(Ee[S]=V));return Ee},L.extend({expando:"jQuery"+(ve+Math.random()).replace(/\D/g,""),isReady:!0,error:function(S){throw new Error(S)},noop:function(){},isPlainObject:function(S){var z,V;return!S||ne.call(S)!=="[object Object]"?!1:(z=G(S),z?(V=ae.call(z,"constructor")&&z.constructor,typeof V=="function"&&te.call(V)===ce):!0)},isEmptyObject:function(S){var z;for(z in S)return!1;return!0},globalEval:function(S,z,V){ye(S,{nonce:z&&z.nonce},V)},each:function(S,z){var V,oe=0;if(ge(S))for(V=S.length;oe<V&&z.call(S[oe],oe,S[oe])!==!1;oe++);else for(oe in S)if(z.call(S[oe],oe,S[oe])===!1)break;return S},text:function(S){var z,V="",oe=0,Ce=S.nodeType;if(Ce){if(Ce===1||Ce===9||Ce===11)return S.textContent;if(Ce===3||Ce===4)return S.nodeValue}else for(;z=S[oe++];)V+=L.text(z);return V},makeArray:function(S,z){var V=z||[];return S!=null&&(ge(Object(S))?L.merge(V,typeof S=="string"?[S]:S):W.call(V,S)),V},inArray:function(S,z,V){return z==null?-1:Y.call(z,S,V)},isXMLDoc:function(S){var z=S&&S.namespaceURI,V=S&&(S.ownerDocument||S).documentElement;return!pe.test(z||V&&V.nodeName||"HTML")},merge:function(S,z){for(var V=+z.length,oe=0,Ce=S.length;oe<V;oe++)S[Ce++]=z[oe];return S.length=Ce,S},grep:function(S,z,V){for(var oe,Ce=[],Ee=0,Ge=S.length,it=!V;Ee<Ge;Ee++)oe=!z(S[Ee],Ee),oe!==it&&Ce.push(S[Ee]);return Ce},map:function(S,z,V){var oe,Ce,Ee=0,Ge=[];if(ge(S))for(oe=S.length;Ee<oe;Ee++)Ce=z(S[Ee],Ee,V),Ce!=null&&Ge.push(Ce);else for(Ee in S)Ce=z(S[Ee],Ee,V),Ce!=null&&Ge.push(Ce);return X(Ge)},guid:1,support:ee}),typeof Symbol=="function"&&(L.fn[Symbol.iterator]=A[Symbol.iterator]),L.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(U,S){K["[object "+S+"]"]=S.toLowerCase()});function ge(U){var S=!!U&&"length"in U&&U.length,z=ue(U);return H(U)||se(U)?!1:z==="array"||S===0||typeof S=="number"&&S>0&&S-1 in U}function _e(U,S){return U.nodeName&&U.nodeName.toLowerCase()===S.toLowerCase()}var Te=A.pop,we=A.sort,Qe=A.splice,D="[\\x20\\t\\r\\n\\f]",Ue=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g");L.contains=function(U,S){var z=S&&S.parentNode;return U===z||!!(z&&z.nodeType===1&&(U.contains?U.contains(z):U.compareDocumentPosition&&U.compareDocumentPosition(z)&16))};var Ct=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function ut(U,S){return S?U==="\0"?"\uFFFD":U.slice(0,-1)+"\\"+U.charCodeAt(U.length-1).toString(16)+" ":"\\"+U}L.escapeSelector=function(U){return(U+"").replace(Ct,ut)};var Nt=re,Kt=W;(function(){var U,S,z,V,oe,Ce=Kt,Ee,Ge,it,yt,tn,wn=L.expando,cr=0,en=0,zn=gu(),ia=gu(),Fr=gu(),bi=gu(),Fo=function(Se,He){return Se===He&&(oe=!0),0},Vi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ao="(?:\\\\[\\da-fA-F]{1,6}"+D+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",oo="\\["+D+"*("+Ao+")(?:"+D+"*([*^$|!~]?=)"+D+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ao+"))|)"+D+"*\\]",va=":("+Ao+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+oo+")*)|.*)\\)|)",ps=new RegExp(D+"+","g"),ei=new RegExp("^"+D+"*,"+D+"*"),Ti=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),Mi=new RegExp(D+"|>"),ul=new RegExp(va),eo=new RegExp("^"+Ao+"$"),Jo={ID:new RegExp("^#("+Ao+")"),CLASS:new RegExp("^\\.("+Ao+")"),TAG:new RegExp("^("+Ao+"|[*])"),ATTR:new RegExp("^"+oo),PSEUDO:new RegExp("^"+va),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+Vi+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},hu=/^(?:input|select|textarea|button)$/i,vu=/^h\d$/i,js=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Po=/[+~]/,ms=new RegExp("\\\\[\\da-fA-F]{1,6}"+D+"?|\\\\([^\\r\\n\\f])","g"),ko=function(Se,He){var nt="0x"+Se.slice(1)-65536;return He||(nt<0?String.fromCharCode(nt+65536):String.fromCharCode(nt>>10|55296,nt&1023|56320))},mo=function(){Ls()},Yu=J(function(Fe){return Fe.disabled===!0&&_e(Fe,"fieldset")},{dir:"parentNode",next:"legend"});function ys(){try{return Ee.activeElement}catch(Fe){}}try{Ce.apply(A=R.call(Nt.childNodes),Nt.childNodes),A[Nt.childNodes.length].nodeType}catch(Fe){Ce={apply:function(He,nt){Kt.apply(He,R.call(nt))},call:function(He){Kt.apply(He,R.call(arguments,1))}}}function ui(Fe,Se,He,nt){var Pe,Ie,Ze,Lt,Zt,An,Un,Ln=Se&&Se.ownerDocument,Wr=Se?Se.nodeType:9;if(He=He||[],typeof Fe!="string"||!Fe||Wr!==1&&Wr!==9&&Wr!==11)return He;if(!nt&&(Ls(Se),Se=Se||Ee,it)){if(Wr!==11&&(Zt=js.exec(Fe)))if(Pe=Zt[1]){if(Wr===9)if(Ze=Se.getElementById(Pe)){if(Ze.id===Pe)return Ce.call(He,Ze),He}else return He;else if(Ln&&(Ze=Ln.getElementById(Pe))&&ui.contains(Se,Ze)&&Ze.id===Pe)return Ce.call(He,Ze),He}else{if(Zt[2])return Ce.apply(He,Se.getElementsByTagName(Fe)),He;if((Pe=Zt[3])&&Se.getElementsByClassName)return Ce.apply(He,Se.getElementsByClassName(Pe)),He}if(!bi[Fe+" "]&&(!yt||!yt.test(Fe))){if(Un=Fe,Ln=Se,Wr===1&&(Mi.test(Fe)||Ti.test(Fe))){for(Ln=Po.test(Fe)&&Bl(Se.parentNode)||Se,(Ln!=Se||!ee.scope)&&((Lt=Se.getAttribute("id"))?Lt=L.escapeSelector(Lt):Se.setAttribute("id",Lt=wn)),An=b(Fe),Ie=An.length;Ie--;)An[Ie]=(Lt?"#"+Lt:":scope")+" "+k(An[Ie]);Un=An.join(",")}try{return Ce.apply(He,Ln.querySelectorAll(Un)),He}catch(Gr){bi(Fe,!0)}finally{Lt===wn&&Se.removeAttribute("id")}}}return zt(Fe.replace(Ue,"$1"),Se,He,nt)}function gu(){var Fe=[];function Se(He,nt){return Fe.push(He+" ")>S.cacheLength&&delete Se[Fe.shift()],Se[He+" "]=nt}return Se}function as(Fe){return Fe[wn]=!0,Fe}function Xs(Fe){var Se=Ee.createElement("fieldset");try{return!!Fe(Se)}catch(He){return!1}finally{Se.parentNode&&Se.parentNode.removeChild(Se),Se=null}}function of(Fe){return function(Se){return _e(Se,"input")&&Se.type===Fe}}function Fl(Fe){return function(Se){return(_e(Se,"input")||_e(Se,"button"))&&Se.type===Fe}}function fc(Fe){return function(Se){return"form"in Se?Se.parentNode&&Se.disabled===!1?"label"in Se?"label"in Se.parentNode?Se.parentNode.disabled===Fe:Se.disabled===Fe:Se.isDisabled===Fe||Se.isDisabled!==!Fe&&Yu(Se)===Fe:Se.disabled===Fe:"label"in Se?Se.disabled===Fe:!1}}function Qo(Fe){return as(function(Se){return Se=+Se,as(function(He,nt){for(var Pe,Ie=Fe([],He.length,Se),Ze=Ie.length;Ze--;)He[Pe=Ie[Ze]]&&(He[Pe]=!(nt[Pe]=He[Pe]))})})}function Bl(Fe){return Fe&&typeof Fe.getElementsByTagName!="undefined"&&Fe}function Ls(Fe){var Se,He=Fe?Fe.ownerDocument||Fe:Nt;return He==Ee||He.nodeType!==9||!He.documentElement||(Ee=He,Ge=Ee.documentElement,it=!L.isXMLDoc(Ee),tn=Ge.matches||Ge.webkitMatchesSelector||Ge.msMatchesSelector,Nt!=Ee&&(Se=Ee.defaultView)&&Se.top!==Se&&Se.addEventListener("unload",mo),ee.getById=Xs(function(nt){return Ge.appendChild(nt).id=L.expando,!Ee.getElementsByName||!Ee.getElementsByName(L.expando).length}),ee.disconnectedMatch=Xs(function(nt){return tn.call(nt,"*")}),ee.scope=Xs(function(){return Ee.querySelectorAll(":scope")}),ee.cssHas=Xs(function(){try{return Ee.querySelector(":has(*,:jqfake)"),!1}catch(nt){return!0}}),ee.getById?(S.filter.ID=function(nt){var Pe=nt.replace(ms,ko);return function(Ie){return Ie.getAttribute("id")===Pe}},S.find.ID=function(nt,Pe){if(typeof Pe.getElementById!="undefined"&&it){var Ie=Pe.getElementById(nt);return Ie?[Ie]:[]}}):(S.filter.ID=function(nt){var Pe=nt.replace(ms,ko);return function(Ie){var Ze=typeof Ie.getAttributeNode!="undefined"&&Ie.getAttributeNode("id");return Ze&&Ze.value===Pe}},S.find.ID=function(nt,Pe){if(typeof Pe.getElementById!="undefined"&&it){var Ie,Ze,Lt,Zt=Pe.getElementById(nt);if(Zt){if(Ie=Zt.getAttributeNode("id"),Ie&&Ie.value===nt)return[Zt];for(Lt=Pe.getElementsByName(nt),Ze=0;Zt=Lt[Ze++];)if(Ie=Zt.getAttributeNode("id"),Ie&&Ie.value===nt)return[Zt]}return[]}}),S.find.TAG=function(nt,Pe){return typeof Pe.getElementsByTagName!="undefined"?Pe.getElementsByTagName(nt):Pe.querySelectorAll(nt)},S.find.CLASS=function(nt,Pe){if(typeof Pe.getElementsByClassName!="undefined"&&it)return Pe.getElementsByClassName(nt)},yt=[],Xs(function(nt){var Pe;Ge.appendChild(nt).innerHTML="<a id='"+wn+"' href='' disabled='disabled'></a><select id='"+wn+"-\r\\' disabled='disabled'><option selected=''></option></select>",nt.querySelectorAll("[selected]").length||yt.push("\\["+D+"*(?:value|"+Vi+")"),nt.querySelectorAll("[id~="+wn+"-]").length||yt.push("~="),nt.querySelectorAll("a#"+wn+"+*").length||yt.push(".#.+[+~]"),nt.querySelectorAll(":checked").length||yt.push(":checked"),Pe=Ee.createElement("input"),Pe.setAttribute("type","hidden"),nt.appendChild(Pe).setAttribute("name","D"),Ge.appendChild(nt).disabled=!0,nt.querySelectorAll(":disabled").length!==2&&yt.push(":enabled",":disabled"),Pe=Ee.createElement("input"),Pe.setAttribute("name",""),nt.appendChild(Pe),nt.querySelectorAll("[name='']").length||yt.push("\\["+D+"*name"+D+"*="+D+`*(?:''|"")`)}),ee.cssHas||yt.push(":has"),yt=yt.length&&new RegExp(yt.join("|")),Fo=function(Pe,Ie){if(Pe===Ie)return oe=!0,0;var Ze=!Pe.compareDocumentPosition-!Ie.compareDocumentPosition;return Ze||(Ze=(Pe.ownerDocument||Pe)==(Ie.ownerDocument||Ie)?Pe.compareDocumentPosition(Ie):1,Ze&1||!ee.sortDetached&&Ie.compareDocumentPosition(Pe)===Ze?Pe===Ee||Pe.ownerDocument==Nt&&ui.contains(Nt,Pe)?-1:Ie===Ee||Ie.ownerDocument==Nt&&ui.contains(Nt,Ie)?1:V?Y.call(V,Pe)-Y.call(V,Ie):0:Ze&4?-1:1)}),Ee}ui.matches=function(Fe,Se){return ui(Fe,null,null,Se)},ui.matchesSelector=function(Fe,Se){if(Ls(Fe),it&&!bi[Se+" "]&&(!yt||!yt.test(Se)))try{var He=tn.call(Fe,Se);if(He||ee.disconnectedMatch||Fe.document&&Fe.document.nodeType!==11)return He}catch(nt){bi(Se,!0)}return ui(Se,Ee,null,[Fe]).length>0},ui.contains=function(Fe,Se){return(Fe.ownerDocument||Fe)!=Ee&&Ls(Fe),L.contains(Fe,Se)},ui.attr=function(Fe,Se){(Fe.ownerDocument||Fe)!=Ee&&Ls(Fe);var He=S.attrHandle[Se.toLowerCase()],nt=He&&ae.call(S.attrHandle,Se.toLowerCase())?He(Fe,Se,!it):void 0;return nt!==void 0?nt:Fe.getAttribute(Se)},ui.error=function(Fe){throw new Error("Syntax error, unrecognized expression: "+Fe)},L.uniqueSort=function(Fe){var Se,He=[],nt=0,Pe=0;if(oe=!ee.sortStable,V=!ee.sortStable&&R.call(Fe,0),we.call(Fe,Fo),oe){for(;Se=Fe[Pe++];)Se===Fe[Pe]&&(nt=He.push(Pe));for(;nt--;)Qe.call(Fe,He[nt],1)}return V=null,Fe},L.fn.uniqueSort=function(){return this.pushStack(L.uniqueSort(R.apply(this)))},S=L.expr={cacheLength:50,createPseudo:as,match:Jo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Se){return Se[1]=Se[1].replace(ms,ko),Se[3]=(Se[3]||Se[4]||Se[5]||"").replace(ms,ko),Se[2]==="~="&&(Se[3]=" "+Se[3]+" "),Se.slice(0,4)},CHILD:function(Se){return Se[1]=Se[1].toLowerCase(),Se[1].slice(0,3)==="nth"?(Se[3]||ui.error(Se[0]),Se[4]=+(Se[4]?Se[5]+(Se[6]||1):2*(Se[3]==="even"||Se[3]==="odd")),Se[5]=+(Se[7]+Se[8]||Se[3]==="odd")):Se[3]&&ui.error(Se[0]),Se},PSEUDO:function(Se){var He,nt=!Se[6]&&Se[2];return Jo.CHILD.test(Se[0])?null:(Se[3]?Se[2]=Se[4]||Se[5]||"":nt&&ul.test(nt)&&(He=b(nt,!0))&&(He=nt.indexOf(")",nt.length-He)-nt.length)&&(Se[0]=Se[0].slice(0,He),Se[2]=nt.slice(0,He)),Se.slice(0,3))}},filter:{TAG:function(Se){var He=Se.replace(ms,ko).toLowerCase();return Se==="*"?function(){return!0}:function(nt){return _e(nt,He)}},CLASS:function(Se){var He=zn[Se+" "];return He||(He=new RegExp("(^|"+D+")"+Se+"("+D+"|$)"))&&zn(Se,function(nt){return He.test(typeof nt.className=="string"&&nt.className||typeof nt.getAttribute!="undefined"&&nt.getAttribute("class")||"")})},ATTR:function(Se,He,nt){return function(Pe){var Ie=ui.attr(Pe,Se);return Ie==null?He==="!=":He?(Ie+="",He==="="?Ie===nt:He==="!="?Ie!==nt:He==="^="?nt&&Ie.indexOf(nt)===0:He==="*="?nt&&Ie.indexOf(nt)>-1:He==="$="?nt&&Ie.slice(-nt.length)===nt:He==="~="?(" "+Ie.replace(ps," ")+" ").indexOf(nt)>-1:He==="|="?Ie===nt||Ie.slice(0,nt.length+1)===nt+"-":!1):!0}},CHILD:function(Se,He,nt,Pe,Ie){var Ze=Se.slice(0,3)!=="nth",Lt=Se.slice(-4)!=="last",Zt=He==="of-type";return Pe===1&&Ie===0?function(An){return!!An.parentNode}:function(An,Un,Ln){var Wr,Gr,Br,Xr,_a,ga=Ze!==Lt?"nextSibling":"previousSibling",Na=An.parentNode,ta=Zt&&An.nodeName.toLowerCase(),Yr=!Ln&&!Zt,_i=!1;if(Na){if(Ze){for(;ga;){for(Br=An;Br=Br[ga];)if(Zt?_e(Br,ta):Br.nodeType===1)return!1;_a=ga=Se==="only"&&!_a&&"nextSibling"}return!0}if(_a=[Lt?Na.firstChild:Na.lastChild],Lt&&Yr){for(Gr=Na[wn]||(Na[wn]={}),Wr=Gr[Se]||[],Xr=Wr[0]===cr&&Wr[1],_i=Xr&&Wr[2],Br=Xr&&Na.childNodes[Xr];Br=++Xr&&Br&&Br[ga]||(_i=Xr=0)||_a.pop();)if(Br.nodeType===1&&++_i&&Br===An){Gr[Se]=[cr,Xr,_i];break}}else if(Yr&&(Gr=An[wn]||(An[wn]={}),Wr=Gr[Se]||[],Xr=Wr[0]===cr&&Wr[1],_i=Xr),_i===!1)for(;(Br=++Xr&&Br&&Br[ga]||(_i=Xr=0)||_a.pop())&&!((Zt?_e(Br,ta):Br.nodeType===1)&&++_i&&(Yr&&(Gr=Br[wn]||(Br[wn]={}),Gr[Se]=[cr,_i]),Br===An)););return _i-=Ie,_i===Pe||_i%Pe==0&&_i/Pe>=0}}},PSEUDO:function(Se,He){var nt,Pe=S.pseudos[Se]||S.setFilters[Se.toLowerCase()]||ui.error("unsupported pseudo: "+Se);return Pe[wn]?Pe(He):Pe.length>1?(nt=[Se,Se,"",He],S.setFilters.hasOwnProperty(Se.toLowerCase())?as(function(Ie,Ze){for(var Lt,Zt=Pe(Ie,He),An=Zt.length;An--;)Lt=Y.call(Ie,Zt[An]),Ie[Lt]=!(Ze[Lt]=Zt[An])}):function(Ie){return Pe(Ie,0,nt)}):Pe}},pseudos:{not:as(function(Fe){var Se=[],He=[],nt=wt(Fe.replace(Ue,"$1"));return nt[wn]?as(function(Pe,Ie,Ze,Lt){for(var Zt,An=nt(Pe,null,Lt,[]),Un=Pe.length;Un--;)(Zt=An[Un])&&(Pe[Un]=!(Ie[Un]=Zt))}):function(Pe,Ie,Ze){return Se[0]=Pe,nt(Se,null,Ze,He),Se[0]=null,!He.pop()}}),has:as(function(Fe){return function(Se){return ui(Fe,Se).length>0}}),contains:as(function(Fe){return Fe=Fe.replace(ms,ko),function(Se){return(Se.textContent||L.text(Se)).indexOf(Fe)>-1}}),lang:as(function(Fe){return eo.test(Fe||"")||ui.error("unsupported lang: "+Fe),Fe=Fe.replace(ms,ko).toLowerCase(),function(Se){var He;do if(He=it?Se.lang:Se.getAttribute("xml:lang")||Se.getAttribute("lang"))return He=He.toLowerCase(),He===Fe||He.indexOf(Fe+"-")===0;while((Se=Se.parentNode)&&Se.nodeType===1);return!1}}),target:function(Se){var He=_.location&&_.location.hash;return He&&He.slice(1)===Se.id},root:function(Se){return Se===Ge},focus:function(Se){return Se===ys()&&Ee.hasFocus()&&!!(Se.type||Se.href||~Se.tabIndex)},enabled:fc(!1),disabled:fc(!0),checked:function(Se){return _e(Se,"input")&&!!Se.checked||_e(Se,"option")&&!!Se.selected},selected:function(Se){return Se.parentNode&&Se.parentNode.selectedIndex,Se.selected===!0},empty:function(Se){for(Se=Se.firstChild;Se;Se=Se.nextSibling)if(Se.nodeType<6)return!1;return!0},parent:function(Se){return!S.pseudos.empty(Se)},header:function(Se){return vu.test(Se.nodeName)},input:function(Se){return hu.test(Se.nodeName)},button:function(Se){return _e(Se,"input")&&Se.type==="button"||_e(Se,"button")},text:function(Se){var He;return _e(Se,"input")&&Se.type==="text"&&((He=Se.getAttribute("type"))==null||He.toLowerCase()==="text")},first:Qo(function(){return[0]}),last:Qo(function(Fe,Se){return[Se-1]}),eq:Qo(function(Fe,Se,He){return[He<0?He+Se:He]}),even:Qo(function(Fe,Se){for(var He=0;He<Se;He+=2)Fe.push(He);return Fe}),odd:Qo(function(Fe,Se){for(var He=1;He<Se;He+=2)Fe.push(He);return Fe}),lt:Qo(function(Fe,Se,He){var nt;for(He<0?nt=He+Se:He>Se?nt=Se:nt=He;--nt>=0;)Fe.push(nt);return Fe}),gt:Qo(function(Fe,Se,He){for(var nt=He<0?He+Se:He;++nt<Se;)Fe.push(nt);return Fe})}},S.pseudos.nth=S.pseudos.eq;for(U in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[U]=of(U);for(U in{submit:!0,reset:!0})S.pseudos[U]=Fl(U);function ll(){}ll.prototype=S.filters=S.pseudos,S.setFilters=new ll;function b(Fe,Se){var He,nt,Pe,Ie,Ze,Lt,Zt,An=ia[Fe+" "];if(An)return Se?0:An.slice(0);for(Ze=Fe,Lt=[],Zt=S.preFilter;Ze;){(!He||(nt=ei.exec(Ze)))&&(nt&&(Ze=Ze.slice(nt[0].length)||Ze),Lt.push(Pe=[])),He=!1,(nt=Ti.exec(Ze))&&(He=nt.shift(),Pe.push({value:He,type:nt[0].replace(Ue," ")}),Ze=Ze.slice(He.length));for(Ie in S.filter)(nt=Jo[Ie].exec(Ze))&&(!Zt[Ie]||(nt=Zt[Ie](nt)))&&(He=nt.shift(),Pe.push({value:He,type:Ie,matches:nt}),Ze=Ze.slice(He.length));if(!He)break}return Se?Ze.length:Ze?ui.error(Fe):ia(Fe,Lt).slice(0)}function k(Fe){for(var Se=0,He=Fe.length,nt="";Se<He;Se++)nt+=Fe[Se].value;return nt}function J(Fe,Se,He){var nt=Se.dir,Pe=Se.next,Ie=Pe||nt,Ze=He&&Ie==="parentNode",Lt=en++;return Se.first?function(Zt,An,Un){for(;Zt=Zt[nt];)if(Zt.nodeType===1||Ze)return Fe(Zt,An,Un);return!1}:function(Zt,An,Un){var Ln,Wr,Gr=[cr,Lt];if(Un){for(;Zt=Zt[nt];)if((Zt.nodeType===1||Ze)&&Fe(Zt,An,Un))return!0}else for(;Zt=Zt[nt];)if(Zt.nodeType===1||Ze)if(Wr=Zt[wn]||(Zt[wn]={}),Pe&&_e(Zt,Pe))Zt=Zt[nt]||Zt;else{if((Ln=Wr[Ie])&&Ln[0]===cr&&Ln[1]===Lt)return Gr[2]=Ln[2];if(Wr[Ie]=Gr,Gr[2]=Fe(Zt,An,Un))return!0}return!1}}function he(Fe){return Fe.length>1?function(Se,He,nt){for(var Pe=Fe.length;Pe--;)if(!Fe[Pe](Se,He,nt))return!1;return!0}:Fe[0]}function Oe(Fe,Se,He){for(var nt=0,Pe=Se.length;nt<Pe;nt++)ui(Fe,Se[nt],He);return He}function Re(Fe,Se,He,nt,Pe){for(var Ie,Ze=[],Lt=0,Zt=Fe.length,An=Se!=null;Lt<Zt;Lt++)(Ie=Fe[Lt])&&(!He||He(Ie,nt,Pe))&&(Ze.push(Ie),An&&Se.push(Lt));return Ze}function Ke(Fe,Se,He,nt,Pe,Ie){return nt&&!nt[wn]&&(nt=Ke(nt)),Pe&&!Pe[wn]&&(Pe=Ke(Pe,Ie)),as(function(Ze,Lt,Zt,An){var Un,Ln,Wr,Gr,Br=[],Xr=[],_a=Lt.length,ga=Ze||Oe(Se||"*",Zt.nodeType?[Zt]:Zt,[]),Na=Fe&&(Ze||!Se)?Re(ga,Br,Fe,Zt,An):ga;if(He?(Gr=Pe||(Ze?Fe:_a||nt)?[]:Lt,He(Na,Gr,Zt,An)):Gr=Na,nt)for(Un=Re(Gr,Xr),nt(Un,[],Zt,An),Ln=Un.length;Ln--;)(Wr=Un[Ln])&&(Gr[Xr[Ln]]=!(Na[Xr[Ln]]=Wr));if(Ze){if(Pe||Fe){if(Pe){for(Un=[],Ln=Gr.length;Ln--;)(Wr=Gr[Ln])&&Un.push(Na[Ln]=Wr);Pe(null,Gr=[],Un,An)}for(Ln=Gr.length;Ln--;)(Wr=Gr[Ln])&&(Un=Pe?Y.call(Ze,Wr):Br[Ln])>-1&&(Ze[Un]=!(Lt[Un]=Wr))}}else Gr=Re(Gr===Lt?Gr.splice(_a,Gr.length):Gr),Pe?Pe(null,Lt,Gr,An):Ce.apply(Lt,Gr)})}function qe(Fe){for(var Se,He,nt,Pe=Fe.length,Ie=S.relative[Fe[0].type],Ze=Ie||S.relative[" "],Lt=Ie?1:0,Zt=J(function(Ln){return Ln===Se},Ze,!0),An=J(function(Ln){return Y.call(Se,Ln)>-1},Ze,!0),Un=[function(Ln,Wr,Gr){var Br=!Ie&&(Gr||Wr!=z)||((Se=Wr).nodeType?Zt(Ln,Wr,Gr):An(Ln,Wr,Gr));return Se=null,Br}];Lt<Pe;Lt++)if(He=S.relative[Fe[Lt].type])Un=[J(he(Un),He)];else{if(He=S.filter[Fe[Lt].type].apply(null,Fe[Lt].matches),He[wn]){for(nt=++Lt;nt<Pe&&!S.relative[Fe[nt].type];nt++);return Ke(Lt>1&&he(Un),Lt>1&&k(Fe.slice(0,Lt-1).concat({value:Fe[Lt-2].type===" "?"*":""})).replace(Ue,"$1"),He,Lt<nt&&qe(Fe.slice(Lt,nt)),nt<Pe&&qe(Fe=Fe.slice(nt)),nt<Pe&&k(Fe))}Un.push(He)}return he(Un)}function pt(Fe,Se){var He=Se.length>0,nt=Fe.length>0,Pe=function(Ze,Lt,Zt,An,Un){var Ln,Wr,Gr,Br=0,Xr="0",_a=Ze&&[],ga=[],Na=z,ta=Ze||nt&&S.find.TAG("*",Un),Yr=cr+=Na==null?1:Math.random()||.1,_i=ta.length;for(Un&&(z=Lt==Ee||Lt||Un);Xr!==_i&&(Ln=ta[Xr])!=null;Xr++){if(nt&&Ln){for(Wr=0,!Lt&&Ln.ownerDocument!=Ee&&(Ls(Ln),Zt=!it);Gr=Fe[Wr++];)if(Gr(Ln,Lt||Ee,Zt)){Ce.call(An,Ln);break}Un&&(cr=Yr)}He&&((Ln=!Gr&&Ln)&&Br--,Ze&&_a.push(Ln))}if(Br+=Xr,He&&Xr!==Br){for(Wr=0;Gr=Se[Wr++];)Gr(_a,ga,Lt,Zt);if(Ze){if(Br>0)for(;Xr--;)_a[Xr]||ga[Xr]||(ga[Xr]=Te.call(An));ga=Re(ga)}Ce.apply(An,ga),Un&&!Ze&&ga.length>0&&Br+Se.length>1&&L.uniqueSort(An)}return Un&&(cr=Yr,z=Na),_a};return He?as(Pe):Pe}function wt(Fe,Se){var He,nt=[],Pe=[],Ie=Fr[Fe+" "];if(!Ie){for(Se||(Se=b(Fe)),He=Se.length;He--;)Ie=qe(Se[He]),Ie[wn]?nt.push(Ie):Pe.push(Ie);Ie=Fr(Fe,pt(Pe,nt)),Ie.selector=Fe}return Ie}function zt(Fe,Se,He,nt){var Pe,Ie,Ze,Lt,Zt,An=typeof Fe=="function"&&Fe,Un=!nt&&b(Fe=An.selector||Fe);if(He=He||[],Un.length===1){if(Ie=Un[0]=Un[0].slice(0),Ie.length>2&&(Ze=Ie[0]).type==="ID"&&Se.nodeType===9&&it&&S.relative[Ie[1].type]){if(Se=(S.find.ID(Ze.matches[0].replace(ms,ko),Se)||[])[0],Se)An&&(Se=Se.parentNode);else return He;Fe=Fe.slice(Ie.shift().value.length)}for(Pe=Jo.needsContext.test(Fe)?0:Ie.length;Pe--&&(Ze=Ie[Pe],!S.relative[Lt=Ze.type]);)if((Zt=S.find[Lt])&&(nt=Zt(Ze.matches[0].replace(ms,ko),Po.test(Ie[0].type)&&Bl(Se.parentNode)||Se))){if(Ie.splice(Pe,1),Fe=nt.length&&k(Ie),!Fe)return Ce.apply(He,nt),He;break}}return(An||wt(Fe,Un))(nt,Se,!it,He,!Se||Po.test(Fe)&&Bl(Se.parentNode)||Se),He}ee.sortStable=wn.split("").sort(Fo).join("")===wn,Ls(),ee.sortDetached=Xs(function(Fe){return Fe.compareDocumentPosition(Ee.createElement("fieldset"))&1}),L.find=ui,L.expr[":"]=L.expr.pseudos,L.unique=L.uniqueSort,ui.compile=wt,ui.select=zt,ui.setDocument=Ls,ui.escape=L.escapeSelector,ui.getText=L.text,ui.isXML=L.isXMLDoc,ui.selectors=L.expr,ui.support=L.support,ui.uniqueSort=L.uniqueSort})();var Je=function(S,z,V){for(var oe=[],Ce=V!==void 0;(S=S[z])&&S.nodeType!==9;)if(S.nodeType===1){if(Ce&&L(S).is(V))break;oe.push(S)}return oe},Vt=function(S,z){for(var V=[];S;S=S.nextSibling)S.nodeType===1&&S!==z&&V.push(S);return V},Be=L.expr.match.needsContext,ie=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function un(U,S,z){return H(S)?L.grep(U,function(V,oe){return!!S.call(V,oe,V)!==z}):S.nodeType?L.grep(U,function(V){return V===S!==z}):typeof S!="string"?L.grep(U,function(V){return Y.call(S,V)>-1!==z}):L.filter(S,U,z)}L.filter=function(U,S,z){var V=S[0];return z&&(U=":not("+U+")"),S.length===1&&V.nodeType===1?L.find.matchesSelector(V,U)?[V]:[]:L.find.matches(U,L.grep(S,function(oe){return oe.nodeType===1}))},L.fn.extend({find:function(S){var z,V,oe=this.length,Ce=this;if(typeof S!="string")return this.pushStack(L(S).filter(function(){for(z=0;z<oe;z++)if(L.contains(Ce[z],this))return!0}));for(V=this.pushStack([]),z=0;z<oe;z++)L.find(S,Ce[z],V);return oe>1?L.uniqueSort(V):V},filter:function(S){return this.pushStack(un(this,S||[],!1))},not:function(S){return this.pushStack(un(this,S||[],!0))},is:function(S){return!!un(this,typeof S=="string"&&Be.test(S)?L(S):S||[],!1).length}});var rn,rr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pt=L.fn.init=function(U,S,z){var V,oe;if(!U)return this;if(z=z||rn,typeof U=="string")if(U[0]==="<"&&U[U.length-1]===">"&&U.length>=3?V=[null,U,null]:V=rr.exec(U),V&&(V[1]||!S))if(V[1]){if(S=S instanceof L?S[0]:S,L.merge(this,L.parseHTML(V[1],S&&S.nodeType?S.ownerDocument||S:re,!0)),ie.test(V[1])&&L.isPlainObject(S))for(V in S)H(this[V])?this[V](S[V]):this.attr(V,S[V]);return this}else return oe=re.getElementById(V[2]),oe&&(this[0]=oe,this.length=1),this;else return!S||S.jquery?(S||z).find(U):this.constructor(S).find(U);else{if(U.nodeType)return this[0]=U,this.length=1,this;if(H(U))return z.ready!==void 0?z.ready(U):U(L)}return L.makeArray(U,this)};Pt.prototype=L.fn,rn=L(re);var Tn=/^(?:parents|prev(?:Until|All))/,ur={children:!0,contents:!0,next:!0,prev:!0};L.fn.extend({has:function(S){var z=L(S,this),V=z.length;return this.filter(function(){for(var oe=0;oe<V;oe++)if(L.contains(this,z[oe]))return!0})},closest:function(S,z){var V,oe=0,Ce=this.length,Ee=[],Ge=typeof S!="string"&&L(S);if(!Be.test(S)){for(;oe<Ce;oe++)for(V=this[oe];V&&V!==z;V=V.parentNode)if(V.nodeType<11&&(Ge?Ge.index(V)>-1:V.nodeType===1&&L.find.matchesSelector(V,S))){Ee.push(V);break}}return this.pushStack(Ee.length>1?L.uniqueSort(Ee):Ee)},index:function(S){return S?typeof S=="string"?Y.call(L(S),this[0]):Y.call(this,S.jquery?S[0]:S):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(S,z){return this.pushStack(L.uniqueSort(L.merge(this.get(),L(S,z))))},addBack:function(S){return this.add(S==null?this.prevObject:this.prevObject.filter(S))}});function Jt(U,S){for(;(U=U[S])&&U.nodeType!==1;);return U}L.each({parent:function(S){var z=S.parentNode;return z&&z.nodeType!==11?z:null},parents:function(S){return Je(S,"parentNode")},parentsUntil:function(S,z,V){return Je(S,"parentNode",V)},next:function(S){return Jt(S,"nextSibling")},prev:function(S){return Jt(S,"previousSibling")},nextAll:function(S){return Je(S,"nextSibling")},prevAll:function(S){return Je(S,"previousSibling")},nextUntil:function(S,z,V){return Je(S,"nextSibling",V)},prevUntil:function(S,z,V){return Je(S,"previousSibling",V)},siblings:function(S){return Vt((S.parentNode||{}).firstChild,S)},children:function(S){return Vt(S.firstChild)},contents:function(S){return S.contentDocument!=null&&G(S.contentDocument)?S.contentDocument:(_e(S,"template")&&(S=S.content||S),L.merge([],S.childNodes))}},function(U,S){L.fn[U]=function(z,V){var oe=L.map(this,S,z);return U.slice(-5)!=="Until"&&(V=z),V&&typeof V=="string"&&(oe=L.filter(V,oe)),this.length>1&&(ur[U]||L.uniqueSort(oe),Tn.test(U)&&oe.reverse()),this.pushStack(oe)}});var fn=/[^\x20\t\r\n\f]+/g;function Mn(U){var S={};return L.each(U.match(fn)||[],function(z,V){S[V]=!0}),S}L.Callbacks=function(U){U=typeof U=="string"?Mn(U):L.extend({},U);var S,z,V,oe,Ce=[],Ee=[],Ge=-1,it=function(){for(oe=oe||U.once,V=S=!0;Ee.length;Ge=-1)for(z=Ee.shift();++Ge<Ce.length;)Ce[Ge].apply(z[0],z[1])===!1&&U.stopOnFalse&&(Ge=Ce.length,z=!1);U.memory||(z=!1),S=!1,oe&&(z?Ce=[]:Ce="")},yt={add:function(){return Ce&&(z&&!S&&(Ge=Ce.length-1,Ee.push(z)),function wn(cr){L.each(cr,function(en,zn){H(zn)?(!U.unique||!yt.has(zn))&&Ce.push(zn):zn&&zn.length&&ue(zn)!=="string"&&wn(zn)})}(arguments),z&&!S&&it()),this},remove:function(){return L.each(arguments,function(wn,cr){for(var en;(en=L.inArray(cr,Ce,en))>-1;)Ce.splice(en,1),en<=Ge&&Ge--}),this},has:function(wn){return wn?L.inArray(wn,Ce)>-1:Ce.length>0},empty:function(){return Ce&&(Ce=[]),this},disable:function(){return oe=Ee=[],Ce=z="",this},disabled:function(){return!Ce},lock:function(){return oe=Ee=[],!z&&!S&&(Ce=z=""),this},locked:function(){return!!oe},fireWith:function(wn,cr){return oe||(cr=cr||[],cr=[wn,cr.slice?cr.slice():cr],Ee.push(cr),S||it()),this},fire:function(){return yt.fireWith(this,arguments),this},fired:function(){return!!V}};return yt};function En(U){return U}function lt(U){throw U}function Tt(U,S,z,V){var oe;try{U&&H(oe=U.promise)?oe.call(U).done(S).fail(z):U&&H(oe=U.then)?oe.call(U,S,z):S.apply(void 0,[U].slice(V))}catch(Ce){z.apply(void 0,[Ce])}}L.extend({Deferred:function(S){var z=[["notify","progress",L.Callbacks("memory"),L.Callbacks("memory"),2],["resolve","done",L.Callbacks("once memory"),L.Callbacks("once memory"),0,"resolved"],["reject","fail",L.Callbacks("once memory"),L.Callbacks("once memory"),1,"rejected"]],V="pending",oe={state:function(){return V},always:function(){return Ce.done(arguments).fail(arguments),this},catch:function(Ge){return oe.then(null,Ge)},pipe:function(){var Ge=arguments;return L.Deferred(function(it){L.each(z,function(yt,tn){var wn=H(Ge[tn[4]])&&Ge[tn[4]];Ce[tn[1]](function(){var cr=wn&&wn.apply(this,arguments);cr&&H(cr.promise)?cr.promise().progress(it.notify).done(it.resolve).fail(it.reject):it[tn[0]+"With"](this,wn?[cr]:arguments)})}),Ge=null}).promise()},then:function(Ge,it,yt){var tn=0;function wn(cr,en,zn,ia){return function(){var Fr=this,bi=arguments,Fo=function(){var oo,va;if(!(cr<tn)){if(oo=zn.apply(Fr,bi),oo===en.promise())throw new TypeError("Thenable self-resolution");va=oo&&(typeof oo=="object"||typeof oo=="function")&&oo.then,H(va)?ia?va.call(oo,wn(tn,en,En,ia),wn(tn,en,lt,ia)):(tn++,va.call(oo,wn(tn,en,En,ia),wn(tn,en,lt,ia),wn(tn,en,En,en.notifyWith))):(zn!==En&&(Fr=void 0,bi=[oo]),(ia||en.resolveWith)(Fr,bi))}},Vi=ia?Fo:function(){try{Fo()}catch(Ao){L.Deferred.exceptionHook&&L.Deferred.exceptionHook(Ao,Vi.error),cr+1>=tn&&(zn!==lt&&(Fr=void 0,bi=[Ao]),en.rejectWith(Fr,bi))}};cr?Vi():(L.Deferred.getErrorHook?Vi.error=L.Deferred.getErrorHook():L.Deferred.getStackHook&&(Vi.error=L.Deferred.getStackHook()),_.setTimeout(Vi))}}return L.Deferred(function(cr){z[0][3].add(wn(0,cr,H(yt)?yt:En,cr.notifyWith)),z[1][3].add(wn(0,cr,H(Ge)?Ge:En)),z[2][3].add(wn(0,cr,H(it)?it:lt))}).promise()},promise:function(Ge){return Ge!=null?L.extend(Ge,oe):oe}},Ce={};return L.each(z,function(Ee,Ge){var it=Ge[2],yt=Ge[5];oe[Ge[1]]=it.add,yt&&it.add(function(){V=yt},z[3-Ee][2].disable,z[3-Ee][3].disable,z[0][2].lock,z[0][3].lock),it.add(Ge[3].fire),Ce[Ge[0]]=function(){return Ce[Ge[0]+"With"](this===Ce?void 0:this,arguments),this},Ce[Ge[0]+"With"]=it.fireWith}),oe.promise(Ce),S&&S.call(Ce,Ce),Ce},when:function(S){var z=arguments.length,V=z,oe=Array(V),Ce=R.call(arguments),Ee=L.Deferred(),Ge=function(yt){return function(tn){oe[yt]=this,Ce[yt]=arguments.length>1?R.call(arguments):tn,--z||Ee.resolveWith(oe,Ce)}};if(z<=1&&(Tt(S,Ee.done(Ge(V)).resolve,Ee.reject,!z),Ee.state()==="pending"||H(Ce[V]&&Ce[V].then)))return Ee.then();for(;V--;)Tt(Ce[V],Ge(V),Ee.reject);return Ee.promise()}});var st=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;L.Deferred.exceptionHook=function(U,S){_.console&&_.console.warn&&U&&st.test(U.name)&&_.console.warn("jQuery.Deferred exception: "+U.message,U.stack,S)},L.readyException=function(U){_.setTimeout(function(){throw U})};var At=L.Deferred();L.fn.ready=function(U){return At.then(U).catch(function(S){L.readyException(S)}),this},L.extend({isReady:!1,readyWait:1,ready:function(S){(S===!0?--L.readyWait:L.isReady)||(L.isReady=!0,!(S!==!0&&--L.readyWait>0)&&At.resolveWith(re,[L]))}}),L.ready.then=At.then;function Ot(){re.removeEventListener("DOMContentLoaded",Ot),_.removeEventListener("load",Ot),L.ready()}re.readyState==="complete"||re.readyState!=="loading"&&!re.documentElement.doScroll?_.setTimeout(L.ready):(re.addEventListener("DOMContentLoaded",Ot),_.addEventListener("load",Ot));var dt=function U(S,z,V,oe,Ce,Ee,Ge){var it=0,yt=S.length,tn=V==null;if(ue(V)==="object"){Ce=!0;for(it in V)U(S,z,it,V[it],!0,Ee,Ge)}else if(oe!==void 0&&(Ce=!0,H(oe)||(Ge=!0),tn&&(Ge?(z.call(S,oe),z=null):(tn=z,z=function(cr,en,zn){return tn.call(L(cr),zn)})),z))for(;it<yt;it++)z(S[it],V,Ge?oe:oe.call(S[it],it,z(S[it],V)));return Ce?S:tn?z.call(S):yt?z(S[0],V):Ee},at=/^-ms-/,T=/-([a-z])/g;function bn(U,S){return S.toUpperCase()}function an(U){return U.replace(at,"ms-").replace(T,bn)}var Jn=function(S){return S.nodeType===1||S.nodeType===9||!+S.nodeType};function Qn(){this.expando=L.expando+Qn.uid++}Qn.uid=1,Qn.prototype={cache:function(S){var z=S[this.expando];return z||(z={},Jn(S)&&(S.nodeType?S[this.expando]=z:Object.defineProperty(S,this.expando,{value:z,configurable:!0}))),z},set:function(S,z,V){var oe,Ce=this.cache(S);if(typeof z=="string")Ce[an(z)]=V;else for(oe in z)Ce[an(oe)]=z[oe];return Ce},get:function(S,z){return z===void 0?this.cache(S):S[this.expando]&&S[this.expando][an(z)]},access:function(S,z,V){return z===void 0||z&&typeof z=="string"&&V===void 0?this.get(S,z):(this.set(S,z,V),V!==void 0?V:z)},remove:function(S,z){var V,oe=S[this.expando];if(oe!==void 0){if(z!==void 0)for(Array.isArray(z)?z=z.map(an):(z=an(z),z=z in oe?[z]:z.match(fn)||[]),V=z.length;V--;)delete oe[z[V]];(z===void 0||L.isEmptyObject(oe))&&(S.nodeType?S[this.expando]=void 0:delete S[this.expando])}},hasData:function(S){var z=S[this.expando];return z!==void 0&&!L.isEmptyObject(z)}};var De=new Qn,be=new Qn,Xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Yt=/[A-Z]/g;function ln(U){return U==="true"?!0:U==="false"?!1:U==="null"?null:U===+U+""?+U:Xe.test(U)?JSON.parse(U):U}function lr(U,S,z){var V;if(z===void 0&&U.nodeType===1)if(V="data-"+S.replace(Yt,"-$&").toLowerCase(),z=U.getAttribute(V),typeof z=="string"){try{z=ln(z)}catch(oe){}be.set(U,S,z)}else z=void 0;return z}L.extend({hasData:function(S){return be.hasData(S)||De.hasData(S)},data:function(S,z,V){return be.access(S,z,V)},removeData:function(S,z){be.remove(S,z)},_data:function(S,z,V){return De.access(S,z,V)},_removeData:function(S,z){De.remove(S,z)}}),L.fn.extend({data:function(S,z){var V,oe,Ce,Ee=this[0],Ge=Ee&&Ee.attributes;if(S===void 0){if(this.length&&(Ce=be.get(Ee),Ee.nodeType===1&&!De.get(Ee,"hasDataAttrs"))){for(V=Ge.length;V--;)Ge[V]&&(oe=Ge[V].name,oe.indexOf("data-")===0&&(oe=an(oe.slice(5)),lr(Ee,oe,Ce[oe])));De.set(Ee,"hasDataAttrs",!0)}return Ce}return typeof S=="object"?this.each(function(){be.set(this,S)}):dt(this,function(it){var yt;if(Ee&&it===void 0)return yt=be.get(Ee,S),yt!==void 0||(yt=lr(Ee,S),yt!==void 0)?yt:void 0;this.each(function(){be.set(this,S,it)})},null,z,arguments.length>1,null,!0)},removeData:function(S){return this.each(function(){be.remove(this,S)})}}),L.extend({queue:function(S,z,V){var oe;if(S)return z=(z||"fx")+"queue",oe=De.get(S,z),V&&(!oe||Array.isArray(V)?oe=De.access(S,z,L.makeArray(V)):oe.push(V)),oe||[]},dequeue:function(S,z){z=z||"fx";var V=L.queue(S,z),oe=V.length,Ce=V.shift(),Ee=L._queueHooks(S,z),Ge=function(){L.dequeue(S,z)};Ce==="inprogress"&&(Ce=V.shift(),oe--),Ce&&(z==="fx"&&V.unshift("inprogress"),delete Ee.stop,Ce.call(S,Ge,Ee)),!oe&&Ee&&Ee.empty.fire()},_queueHooks:function(S,z){var V=z+"queueHooks";return De.get(S,V)||De.access(S,V,{empty:L.Callbacks("once memory").add(function(){De.remove(S,[z+"queue",V])})})}}),L.fn.extend({queue:function(S,z){var V=2;return typeof S!="string"&&(z=S,S="fx",V--),arguments.length<V?L.queue(this[0],S):z===void 0?this:this.each(function(){var oe=L.queue(this,S,z);L._queueHooks(this,S),S==="fx"&&oe[0]!=="inprogress"&&L.dequeue(this,S)})},dequeue:function(S){return this.each(function(){L.dequeue(this,S)})},clearQueue:function(S){return this.queue(S||"fx",[])},promise:function(S,z){var V,oe=1,Ce=L.Deferred(),Ee=this,Ge=this.length,it=function(){--oe||Ce.resolveWith(Ee,[Ee])};for(typeof S!="string"&&(z=S,S=void 0),S=S||"fx";Ge--;)V=De.get(Ee[Ge],S+"queueHooks"),V&&V.empty&&(oe++,V.empty.add(it));return it(),Ce.promise(z)}});var Hr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ar=new RegExp("^(?:([+-])=|)("+Hr+")([a-z%]*)$","i"),mr=["Top","Right","Bottom","Left"],yr=re.documentElement,kr=function(S){return L.contains(S.ownerDocument,S)},Ur={composed:!0};yr.getRootNode&&(kr=function(S){return L.contains(S.ownerDocument,S)||S.getRootNode(Ur)===S.ownerDocument});var Va=function(S,z){return S=z||S,S.style.display==="none"||S.style.display===""&&kr(S)&&L.css(S,"display")==="none"};function da(U,S,z,V){var oe,Ce,Ee=20,Ge=V?function(){return V.cur()}:function(){return L.css(U,S,"")},it=Ge(),yt=z&&z[3]||(L.cssNumber[S]?"":"px"),tn=U.nodeType&&(L.cssNumber[S]||yt!=="px"&&+it)&&ar.exec(L.css(U,S));if(tn&&tn[3]!==yt){for(it=it/2,yt=yt||tn[3],tn=+it||1;Ee--;)L.style(U,S,tn+yt),(1-Ce)*(1-(Ce=Ge()/it||.5))<=0&&(Ee=0),tn=tn/Ce;tn=tn*2,L.style(U,S,tn+yt),z=z||[]}return z&&(tn=+tn||+it||0,oe=z[1]?tn+(z[1]+1)*z[2]:+z[2],V&&(V.unit=yt,V.start=tn,V.end=oe)),oe}var Ji={};function jo(U){var S,z=U.ownerDocument,V=U.nodeName,oe=Ji[V];return oe||(S=z.body.appendChild(z.createElement(V)),oe=L.css(S,"display"),S.parentNode.removeChild(S),oe==="none"&&(oe="block"),Ji[V]=oe,oe)}function ri(U,S){for(var z,V,oe=[],Ce=0,Ee=U.length;Ce<Ee;Ce++)V=U[Ce],!!V.style&&(z=V.style.display,S?(z==="none"&&(oe[Ce]=De.get(V,"display")||null,oe[Ce]||(V.style.display="")),V.style.display===""&&Va(V)&&(oe[Ce]=jo(V))):z!=="none"&&(oe[Ce]="none",De.set(V,"display",z)));for(Ce=0;Ce<Ee;Ce++)oe[Ce]!=null&&(U[Ce].style.display=oe[Ce]);return U}L.fn.extend({show:function(){return ri(this,!0)},hide:function(){return ri(this)},toggle:function(S){return typeof S=="boolean"?S?this.show():this.hide():this.each(function(){Va(this)?L(this).show():L(this).hide()})}});var ji=/^(?:checkbox|radio)$/i,Li=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Aa=/^$|^module$|\/(?:java|ecma)script/i;(function(){var U=re.createDocumentFragment(),S=U.appendChild(re.createElement("div")),z=re.createElement("input");z.setAttribute("type","radio"),z.setAttribute("checked","checked"),z.setAttribute("name","t"),S.appendChild(z),ee.checkClone=S.cloneNode(!0).cloneNode(!0).lastChild.checked,S.innerHTML="<textarea>x</textarea>",ee.noCloneChecked=!!S.cloneNode(!0).lastChild.defaultValue,S.innerHTML="<option></option>",ee.option=!!S.lastChild})();var ki={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ki.tbody=ki.tfoot=ki.colgroup=ki.caption=ki.thead,ki.th=ki.td,ee.option||(ki.optgroup=ki.option=[1,"<select multiple='multiple'>","</select>"]);function mi(U,S){var z;return typeof U.getElementsByTagName!="undefined"?z=U.getElementsByTagName(S||"*"):typeof U.querySelectorAll!="undefined"?z=U.querySelectorAll(S||"*"):z=[],S===void 0||S&&_e(U,S)?L.merge([U],z):z}function na(U,S){for(var z=0,V=U.length;z<V;z++)De.set(U[z],"globalEval",!S||De.get(S[z],"globalEval"))}var Ki=/<|&#?\w+;/;function go(U,S,z,V,oe){for(var Ce,Ee,Ge,it,yt,tn,wn=S.createDocumentFragment(),cr=[],en=0,zn=U.length;en<zn;en++)if(Ce=U[en],Ce||Ce===0)if(ue(Ce)==="object")L.merge(cr,Ce.nodeType?[Ce]:Ce);else if(!Ki.test(Ce))cr.push(S.createTextNode(Ce));else{for(Ee=Ee||wn.appendChild(S.createElement("div")),Ge=(Li.exec(Ce)||["",""])[1].toLowerCase(),it=ki[Ge]||ki._default,Ee.innerHTML=it[1]+L.htmlPrefilter(Ce)+it[2],tn=it[0];tn--;)Ee=Ee.lastChild;L.merge(cr,Ee.childNodes),Ee=wn.firstChild,Ee.textContent=""}for(wn.textContent="",en=0;Ce=cr[en++];){if(V&&L.inArray(Ce,V)>-1){oe&&oe.push(Ce);continue}if(yt=kr(Ce),Ee=mi(wn.appendChild(Ce),"script"),yt&&na(Ee),z)for(tn=0;Ce=Ee[tn++];)Aa.test(Ce.type||"")&&z.push(Ce)}return wn}var ra=/^([^.]*)(?:\.(.+)|)/;function di(){return!0}function So(){return!1}function si(U,S,z,V,oe,Ce){var Ee,Ge;if(typeof S=="object"){typeof z!="string"&&(V=V||z,z=void 0);for(Ge in S)si(U,Ge,z,V,S[Ge],Ce);return U}if(V==null&&oe==null?(oe=z,V=z=void 0):oe==null&&(typeof z=="string"?(oe=V,V=void 0):(oe=V,V=z,z=void 0)),oe===!1)oe=So;else if(!oe)return U;return Ce===1&&(Ee=oe,oe=function(yt){return L().off(yt),Ee.apply(this,arguments)},oe.guid=Ee.guid||(Ee.guid=L.guid++)),U.each(function(){L.event.add(this,S,oe,V,z)})}L.event={global:{},add:function(S,z,V,oe,Ce){var Ee,Ge,it,yt,tn,wn,cr,en,zn,ia,Fr,bi=De.get(S);if(!!Jn(S))for(V.handler&&(Ee=V,V=Ee.handler,Ce=Ee.selector),Ce&&L.find.matchesSelector(yr,Ce),V.guid||(V.guid=L.guid++),(yt=bi.events)||(yt=bi.events=Object.create(null)),(Ge=bi.handle)||(Ge=bi.handle=function(Fo){return typeof L!="undefined"&&L.event.triggered!==Fo.type?L.event.dispatch.apply(S,arguments):void 0}),z=(z||"").match(fn)||[""],tn=z.length;tn--;)it=ra.exec(z[tn])||[],zn=Fr=it[1],ia=(it[2]||"").split(".").sort(),!!zn&&(cr=L.event.special[zn]||{},zn=(Ce?cr.delegateType:cr.bindType)||zn,cr=L.event.special[zn]||{},wn=L.extend({type:zn,origType:Fr,data:oe,handler:V,guid:V.guid,selector:Ce,needsContext:Ce&&L.expr.match.needsContext.test(Ce),namespace:ia.join(".")},Ee),(en=yt[zn])||(en=yt[zn]=[],en.delegateCount=0,(!cr.setup||cr.setup.call(S,oe,ia,Ge)===!1)&&S.addEventListener&&S.addEventListener(zn,Ge)),cr.add&&(cr.add.call(S,wn),wn.handler.guid||(wn.handler.guid=V.guid)),Ce?en.splice(en.delegateCount++,0,wn):en.push(wn),L.event.global[zn]=!0)},remove:function(S,z,V,oe,Ce){var Ee,Ge,it,yt,tn,wn,cr,en,zn,ia,Fr,bi=De.hasData(S)&&De.get(S);if(!(!bi||!(yt=bi.events))){for(z=(z||"").match(fn)||[""],tn=z.length;tn--;){if(it=ra.exec(z[tn])||[],zn=Fr=it[1],ia=(it[2]||"").split(".").sort(),!zn){for(zn in yt)L.event.remove(S,zn+z[tn],V,oe,!0);continue}for(cr=L.event.special[zn]||{},zn=(oe?cr.delegateType:cr.bindType)||zn,en=yt[zn]||[],it=it[2]&&new RegExp("(^|\\.)"+ia.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ge=Ee=en.length;Ee--;)wn=en[Ee],(Ce||Fr===wn.origType)&&(!V||V.guid===wn.guid)&&(!it||it.test(wn.namespace))&&(!oe||oe===wn.selector||oe==="**"&&wn.selector)&&(en.splice(Ee,1),wn.selector&&en.delegateCount--,cr.remove&&cr.remove.call(S,wn));Ge&&!en.length&&((!cr.teardown||cr.teardown.call(S,ia,bi.handle)===!1)&&L.removeEvent(S,zn,bi.handle),delete yt[zn])}L.isEmptyObject(yt)&&De.remove(S,"handle events")}},dispatch:function(S){var z,V,oe,Ce,Ee,Ge,it=new Array(arguments.length),yt=L.event.fix(S),tn=(De.get(this,"events")||Object.create(null))[yt.type]||[],wn=L.event.special[yt.type]||{};for(it[0]=yt,z=1;z<arguments.length;z++)it[z]=arguments[z];if(yt.delegateTarget=this,!(wn.preDispatch&&wn.preDispatch.call(this,yt)===!1)){for(Ge=L.event.handlers.call(this,yt,tn),z=0;(Ce=Ge[z++])&&!yt.isPropagationStopped();)for(yt.currentTarget=Ce.elem,V=0;(Ee=Ce.handlers[V++])&&!yt.isImmediatePropagationStopped();)(!yt.rnamespace||Ee.namespace===!1||yt.rnamespace.test(Ee.namespace))&&(yt.handleObj=Ee,yt.data=Ee.data,oe=((L.event.special[Ee.origType]||{}).handle||Ee.handler).apply(Ce.elem,it),oe!==void 0&&(yt.result=oe)===!1&&(yt.preventDefault(),yt.stopPropagation()));return wn.postDispatch&&wn.postDispatch.call(this,yt),yt.result}},handlers:function(S,z){var V,oe,Ce,Ee,Ge,it=[],yt=z.delegateCount,tn=S.target;if(yt&&tn.nodeType&&!(S.type==="click"&&S.button>=1)){for(;tn!==this;tn=tn.parentNode||this)if(tn.nodeType===1&&!(S.type==="click"&&tn.disabled===!0)){for(Ee=[],Ge={},V=0;V<yt;V++)oe=z[V],Ce=oe.selector+" ",Ge[Ce]===void 0&&(Ge[Ce]=oe.needsContext?L(Ce,this).index(tn)>-1:L.find(Ce,this,null,[tn]).length),Ge[Ce]&&Ee.push(oe);Ee.length&&it.push({elem:tn,handlers:Ee})}}return tn=this,yt<z.length&&it.push({elem:tn,handlers:z.slice(yt)}),it},addProp:function(S,z){Object.defineProperty(L.Event.prototype,S,{enumerable:!0,configurable:!0,get:H(z)?function(){if(this.originalEvent)return z(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[S]},set:function(oe){Object.defineProperty(this,S,{enumerable:!0,configurable:!0,writable:!0,value:oe})}})},fix:function(S){return S[L.expando]?S:new L.Event(S)},special:{load:{noBubble:!0},click:{setup:function(S){var z=this||S;return ji.test(z.type)&&z.click&&_e(z,"input")&&Si(z,"click",!0),!1},trigger:function(S){var z=this||S;return ji.test(z.type)&&z.click&&_e(z,"input")&&Si(z,"click"),!0},_default:function(S){var z=S.target;return ji.test(z.type)&&z.click&&_e(z,"input")&&De.get(z,"click")||_e(z,"a")}},beforeunload:{postDispatch:function(S){S.result!==void 0&&S.originalEvent&&(S.originalEvent.returnValue=S.result)}}}};function Si(U,S,z){if(!z){De.get(U,S)===void 0&&L.event.add(U,S,di);return}De.set(U,S,!1),L.event.add(U,S,{namespace:!1,handler:function(oe){var Ce,Ee=De.get(this,S);if(oe.isTrigger&1&&this[S]){if(Ee)(L.event.special[S]||{}).delegateType&&oe.stopPropagation();else if(Ee=R.call(arguments),De.set(this,S,Ee),this[S](),Ce=De.get(this,S),De.set(this,S,!1),Ee!==Ce)return oe.stopImmediatePropagation(),oe.preventDefault(),Ce}else Ee&&(De.set(this,S,L.event.trigger(Ee[0],Ee.slice(1),this)),oe.stopPropagation(),oe.isImmediatePropagationStopped=di)}})}L.removeEvent=function(U,S,z){U.removeEventListener&&U.removeEventListener(S,z)},L.Event=function(U,S){if(!(this instanceof L.Event))return new L.Event(U,S);U&&U.type?(this.originalEvent=U,this.type=U.type,this.isDefaultPrevented=U.defaultPrevented||U.defaultPrevented===void 0&&U.returnValue===!1?di:So,this.target=U.target&&U.target.nodeType===3?U.target.parentNode:U.target,this.currentTarget=U.currentTarget,this.relatedTarget=U.relatedTarget):this.type=U,S&&L.extend(this,S),this.timeStamp=U&&U.timeStamp||Date.now(),this[L.expando]=!0},L.Event.prototype={constructor:L.Event,isDefaultPrevented:So,isPropagationStopped:So,isImmediatePropagationStopped:So,isSimulated:!1,preventDefault:function(){var S=this.originalEvent;this.isDefaultPrevented=di,S&&!this.isSimulated&&S.preventDefault()},stopPropagation:function(){var S=this.originalEvent;this.isPropagationStopped=di,S&&!this.isSimulated&&S.stopPropagation()},stopImmediatePropagation:function(){var S=this.originalEvent;this.isImmediatePropagationStopped=di,S&&!this.isSimulated&&S.stopImmediatePropagation(),this.stopPropagation()}},L.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},L.event.addProp),L.each({focus:"focusin",blur:"focusout"},function(U,S){function z(V){if(re.documentMode){var oe=De.get(this,"handle"),Ce=L.event.fix(V);Ce.type=V.type==="focusin"?"focus":"blur",Ce.isSimulated=!0,oe(V),Ce.target===Ce.currentTarget&&oe(Ce)}else L.event.simulate(S,V.target,L.event.fix(V))}L.event.special[U]={setup:function(){var oe;if(Si(this,U,!0),re.documentMode)oe=De.get(this,S),oe||this.addEventListener(S,z),De.set(this,S,(oe||0)+1);else return!1},trigger:function(){return Si(this,U),!0},teardown:function(){var oe;if(re.documentMode)oe=De.get(this,S)-1,oe?De.set(this,S,oe):(this.removeEventListener(S,z),De.remove(this,S));else return!1},_default:function(oe){return De.get(oe.target,U)},delegateType:S},L.event.special[S]={setup:function(){var oe=this.ownerDocument||this.document||this,Ce=re.documentMode?this:oe,Ee=De.get(Ce,S);Ee||(re.documentMode?this.addEventListener(S,z):oe.addEventListener(U,z,!0)),De.set(Ce,S,(Ee||0)+1)},teardown:function(){var oe=this.ownerDocument||this.document||this,Ce=re.documentMode?this:oe,Ee=De.get(Ce,S)-1;Ee?De.set(Ce,S,Ee):(re.documentMode?this.removeEventListener(S,z):oe.removeEventListener(U,z,!0),De.remove(Ce,S))}}}),L.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(U,S){L.event.special[U]={delegateType:S,bindType:S,handle:function(V){var oe,Ce=this,Ee=V.relatedTarget,Ge=V.handleObj;return(!Ee||Ee!==Ce&&!L.contains(Ce,Ee))&&(V.type=Ge.origType,oe=Ge.handler.apply(this,arguments),V.type=S),oe}}}),L.fn.extend({on:function(S,z,V,oe){return si(this,S,z,V,oe)},one:function(S,z,V,oe){return si(this,S,z,V,oe,1)},off:function(S,z,V){var oe,Ce;if(S&&S.preventDefault&&S.handleObj)return oe=S.handleObj,L(S.delegateTarget).off(oe.namespace?oe.origType+"."+oe.namespace:oe.origType,oe.selector,oe.handler),this;if(typeof S=="object"){for(Ce in S)this.off(Ce,z,S[Ce]);return this}return(z===!1||typeof z=="function")&&(V=z,z=void 0),V===!1&&(V=So),this.each(function(){L.event.remove(this,S,V,z)})}});var yi=/<script|<style|<link/i,zi=/checked\s*(?:[^=]|=\s*.checked.)/i,Ko=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function To(U,S){return _e(U,"table")&&_e(S.nodeType!==11?S:S.firstChild,"tr")&&L(U).children("tbody")[0]||U}function po(U){return U.type=(U.getAttribute("type")!==null)+"/"+U.type,U}function Yo(U){return(U.type||"").slice(0,5)==="true/"?U.type=U.type.slice(5):U.removeAttribute("type"),U}function Us(U,S){var z,V,oe,Ce,Ee,Ge,it;if(S.nodeType===1){if(De.hasData(U)&&(Ce=De.get(U),it=Ce.events,it)){De.remove(S,"handle events");for(oe in it)for(z=0,V=it[oe].length;z<V;z++)L.event.add(S,oe,it[oe][z])}be.hasData(U)&&(Ee=be.access(U),Ge=L.extend({},Ee),be.set(S,Ge))}}function Wu(U,S){var z=S.nodeName.toLowerCase();z==="input"&&ji.test(U.type)?S.checked=U.checked:(z==="input"||z==="textarea")&&(S.defaultValue=U.defaultValue)}function Lo(U,S,z,V){S=X(S);var oe,Ce,Ee,Ge,it,yt,tn=0,wn=U.length,cr=wn-1,en=S[0],zn=H(en);if(zn||wn>1&&typeof en=="string"&&!ee.checkClone&&zi.test(en))return U.each(function(ia){var Fr=U.eq(ia);zn&&(S[0]=en.call(this,ia,Fr.html())),Lo(Fr,S,z,V)});if(wn&&(oe=go(S,U[0].ownerDocument,!1,U,V),Ce=oe.firstChild,oe.childNodes.length===1&&(oe=Ce),Ce||V)){for(Ee=L.map(mi(oe,"script"),po),Ge=Ee.length;tn<wn;tn++)it=oe,tn!==cr&&(it=L.clone(it,!0,!0),Ge&&L.merge(Ee,mi(it,"script"))),z.call(U[tn],it,tn);if(Ge)for(yt=Ee[Ee.length-1].ownerDocument,L.map(Ee,Yo),tn=0;tn<Ge;tn++)it=Ee[tn],Aa.test(it.type||"")&&!De.access(it,"globalEval")&&L.contains(yt,it)&&(it.src&&(it.type||"").toLowerCase()!=="module"?L._evalUrl&&!it.noModule&&L._evalUrl(it.src,{nonce:it.nonce||it.getAttribute("nonce")},yt):ye(it.textContent.replace(Ko,""),it,yt))}return U}function $u(U,S,z){for(var V,oe=S?L.filter(S,U):U,Ce=0;(V=oe[Ce])!=null;Ce++)!z&&V.nodeType===1&&L.cleanData(mi(V)),V.parentNode&&(z&&kr(V)&&na(mi(V,"script")),V.parentNode.removeChild(V));return U}L.extend({htmlPrefilter:function(S){return S},clone:function(S,z,V){var oe,Ce,Ee,Ge,it=S.cloneNode(!0),yt=kr(S);if(!ee.noCloneChecked&&(S.nodeType===1||S.nodeType===11)&&!L.isXMLDoc(S))for(Ge=mi(it),Ee=mi(S),oe=0,Ce=Ee.length;oe<Ce;oe++)Wu(Ee[oe],Ge[oe]);if(z)if(V)for(Ee=Ee||mi(S),Ge=Ge||mi(it),oe=0,Ce=Ee.length;oe<Ce;oe++)Us(Ee[oe],Ge[oe]);else Us(S,it);return Ge=mi(it,"script"),Ge.length>0&&na(Ge,!yt&&mi(S,"script")),it},cleanData:function(S){for(var z,V,oe,Ce=L.event.special,Ee=0;(V=S[Ee])!==void 0;Ee++)if(Jn(V)){if(z=V[De.expando]){if(z.events)for(oe in z.events)Ce[oe]?L.event.remove(V,oe):L.removeEvent(V,oe,z.handle);V[De.expando]=void 0}V[be.expando]&&(V[be.expando]=void 0)}}}),L.fn.extend({detach:function(S){return $u(this,S,!0)},remove:function(S){return $u(this,S)},text:function(S){return dt(this,function(z){return z===void 0?L.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=z)})},null,S,arguments.length)},append:function(){return Lo(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var z=To(this,S);z.appendChild(S)}})},prepend:function(){return Lo(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var z=To(this,S);z.insertBefore(S,z.firstChild)}})},before:function(){return Lo(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this)})},after:function(){return Lo(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this.nextSibling)})},empty:function(){for(var S,z=0;(S=this[z])!=null;z++)S.nodeType===1&&(L.cleanData(mi(S,!1)),S.textContent="");return this},clone:function(S,z){return S=S==null?!1:S,z=z==null?S:z,this.map(function(){return L.clone(this,S,z)})},html:function(S){return dt(this,function(z){var V=this[0]||{},oe=0,Ce=this.length;if(z===void 0&&V.nodeType===1)return V.innerHTML;if(typeof z=="string"&&!yi.test(z)&&!ki[(Li.exec(z)||["",""])[1].toLowerCase()]){z=L.htmlPrefilter(z);try{for(;oe<Ce;oe++)V=this[oe]||{},V.nodeType===1&&(L.cleanData(mi(V,!1)),V.innerHTML=z);V=0}catch(Ee){}}V&&this.empty().append(z)},null,S,arguments.length)},replaceWith:function(){var S=[];return Lo(this,arguments,function(z){var V=this.parentNode;L.inArray(this,S)<0&&(L.cleanData(mi(this)),V&&V.replaceChild(z,this))},S)}}),L.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(U,S){L.fn[U]=function(z){for(var V,oe=[],Ce=L(z),Ee=Ce.length-1,Ge=0;Ge<=Ee;Ge++)V=Ge===Ee?this:this.clone(!0),L(Ce[Ge])[S](V),W.apply(oe,V.get());return this.pushStack(oe)}});var iu=new RegExp("^("+Hr+")(?!px)[a-z%]+$","i"),Zo=/^--/,Vs=function(S){var z=S.ownerDocument.defaultView;return(!z||!z.opener)&&(z=_),z.getComputedStyle(S)},ou=function(S,z,V){var oe,Ce,Ee={};for(Ce in z)Ee[Ce]=S.style[Ce],S.style[Ce]=z[Ce];oe=V.call(S);for(Ce in z)S.style[Ce]=Ee[Ce];return oe},Is=new RegExp(mr.join("|"),"i");(function(){function U(){if(!!yt){it.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",yt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",yr.appendChild(it).appendChild(yt);var tn=_.getComputedStyle(yt);z=tn.top!=="1%",Ge=S(tn.marginLeft)===12,yt.style.right="60%",Ce=S(tn.right)===36,V=S(tn.width)===36,yt.style.position="absolute",oe=S(yt.offsetWidth/3)===12,yr.removeChild(it),yt=null}}function S(tn){return Math.round(parseFloat(tn))}var z,V,oe,Ce,Ee,Ge,it=re.createElement("div"),yt=re.createElement("div");!yt.style||(yt.style.backgroundClip="content-box",yt.cloneNode(!0).style.backgroundClip="",ee.clearCloneStyle=yt.style.backgroundClip==="content-box",L.extend(ee,{boxSizingReliable:function(){return U(),V},pixelBoxStyles:function(){return U(),Ce},pixelPosition:function(){return U(),z},reliableMarginLeft:function(){return U(),Ge},scrollboxSize:function(){return U(),oe},reliableTrDimensions:function(){var wn,cr,en,zn;return Ee==null&&(wn=re.createElement("table"),cr=re.createElement("tr"),en=re.createElement("div"),wn.style.cssText="position:absolute;left:-11111px;border-collapse:separate",cr.style.cssText="border:1px solid",cr.style.height="1px",en.style.height="9px",en.style.display="block",yr.appendChild(wn).appendChild(cr).appendChild(en),zn=_.getComputedStyle(cr),Ee=parseInt(zn.height,10)+parseInt(zn.borderTopWidth,10)+parseInt(zn.borderBottomWidth,10)===cr.offsetHeight,yr.removeChild(wn)),Ee}}))})();function Hs(U,S,z){var V,oe,Ce,Ee,Ge=Zo.test(S),it=U.style;return z=z||Vs(U),z&&(Ee=z.getPropertyValue(S)||z[S],Ge&&Ee&&(Ee=Ee.replace(Ue,"$1")||void 0),Ee===""&&!kr(U)&&(Ee=L.style(U,S)),!ee.pixelBoxStyles()&&iu.test(Ee)&&Is.test(S)&&(V=it.width,oe=it.minWidth,Ce=it.maxWidth,it.minWidth=it.maxWidth=it.width=Ee,Ee=z.width,it.width=V,it.minWidth=oe,it.maxWidth=Ce)),Ee!==void 0?Ee+"":Ee}function Ws(U,S){return{get:function(){if(U()){delete this.get;return}return(this.get=S).apply(this,arguments)}}}var su=["Webkit","Moz","ms"],nn=re.createElement("div").style,On={};function vr(U){for(var S=U[0].toUpperCase()+U.slice(1),z=su.length;z--;)if(U=su[z]+S,U in nn)return U}function It(U){var S=L.cssProps[U]||On[U];return S||(U in nn?U:On[U]=vr(U)||U)}var jt=/^(none|table(?!-c[ea]).+)/,Bn={position:"absolute",visibility:"hidden",display:"block"},pn={letterSpacing:"0",fontWeight:"400"};function on(U,S,z){var V=ar.exec(S);return V?Math.max(0,V[2]-(z||0))+(V[3]||"px"):S}function qt(U,S,z,V,oe,Ce){var Ee=S==="width"?1:0,Ge=0,it=0,yt=0;if(z===(V?"border":"content"))return 0;for(;Ee<4;Ee+=2)z==="margin"&&(yt+=L.css(U,z+mr[Ee],!0,oe)),V?(z==="content"&&(it-=L.css(U,"padding"+mr[Ee],!0,oe)),z!=="margin"&&(it-=L.css(U,"border"+mr[Ee]+"Width",!0,oe))):(it+=L.css(U,"padding"+mr[Ee],!0,oe),z!=="padding"?it+=L.css(U,"border"+mr[Ee]+"Width",!0,oe):Ge+=L.css(U,"border"+mr[Ee]+"Width",!0,oe));return!V&&Ce>=0&&(it+=Math.max(0,Math.ceil(U["offset"+S[0].toUpperCase()+S.slice(1)]-Ce-it-Ge-.5))||0),it+yt}function mn(U,S,z){var V=Vs(U),oe=!ee.boxSizingReliable()||z,Ce=oe&&L.css(U,"boxSizing",!1,V)==="border-box",Ee=Ce,Ge=Hs(U,S,V),it="offset"+S[0].toUpperCase()+S.slice(1);if(iu.test(Ge)){if(!z)return Ge;Ge="auto"}return(!ee.boxSizingReliable()&&Ce||!ee.reliableTrDimensions()&&_e(U,"tr")||Ge==="auto"||!parseFloat(Ge)&&L.css(U,"display",!1,V)==="inline")&&U.getClientRects().length&&(Ce=L.css(U,"boxSizing",!1,V)==="border-box",Ee=it in U,Ee&&(Ge=U[it])),Ge=parseFloat(Ge)||0,Ge+qt(U,S,z||(Ce?"border":"content"),Ee,V,Ge)+"px"}L.extend({cssHooks:{opacity:{get:function(S,z){if(z){var V=Hs(S,"opacity");return V===""?"1":V}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(S,z,V,oe){if(!(!S||S.nodeType===3||S.nodeType===8||!S.style)){var Ce,Ee,Ge,it=an(z),yt=Zo.test(z),tn=S.style;if(yt||(z=It(it)),Ge=L.cssHooks[z]||L.cssHooks[it],V!==void 0){if(Ee=typeof V,Ee==="string"&&(Ce=ar.exec(V))&&Ce[1]&&(V=da(S,z,Ce),Ee="number"),V==null||V!==V)return;Ee==="number"&&!yt&&(V+=Ce&&Ce[3]||(L.cssNumber[it]?"":"px")),!ee.clearCloneStyle&&V===""&&z.indexOf("background")===0&&(tn[z]="inherit"),(!Ge||!("set"in Ge)||(V=Ge.set(S,V,oe))!==void 0)&&(yt?tn.setProperty(z,V):tn[z]=V)}else return Ge&&"get"in Ge&&(Ce=Ge.get(S,!1,oe))!==void 0?Ce:tn[z]}},css:function(S,z,V,oe){var Ce,Ee,Ge,it=an(z),yt=Zo.test(z);return yt||(z=It(it)),Ge=L.cssHooks[z]||L.cssHooks[it],Ge&&"get"in Ge&&(Ce=Ge.get(S,!0,V)),Ce===void 0&&(Ce=Hs(S,z,oe)),Ce==="normal"&&z in pn&&(Ce=pn[z]),V===""||V?(Ee=parseFloat(Ce),V===!0||isFinite(Ee)?Ee||0:Ce):Ce}}),L.each(["height","width"],function(U,S){L.cssHooks[S]={get:function(V,oe,Ce){if(oe)return jt.test(L.css(V,"display"))&&(!V.getClientRects().length||!V.getBoundingClientRect().width)?ou(V,Bn,function(){return mn(V,S,Ce)}):mn(V,S,Ce)},set:function(V,oe,Ce){var Ee,Ge=Vs(V),it=!ee.scrollboxSize()&&Ge.position==="absolute",yt=it||Ce,tn=yt&&L.css(V,"boxSizing",!1,Ge)==="border-box",wn=Ce?qt(V,S,Ce,tn,Ge):0;return tn&&it&&(wn-=Math.ceil(V["offset"+S[0].toUpperCase()+S.slice(1)]-parseFloat(Ge[S])-qt(V,S,"border",!1,Ge)-.5)),wn&&(Ee=ar.exec(oe))&&(Ee[3]||"px")!=="px"&&(V.style[S]=oe,oe=L.css(V,S)),on(V,oe,wn)}}}),L.cssHooks.marginLeft=Ws(ee.reliableMarginLeft,function(U,S){if(S)return(parseFloat(Hs(U,"marginLeft"))||U.getBoundingClientRect().left-ou(U,{marginLeft:0},function(){return U.getBoundingClientRect().left}))+"px"}),L.each({margin:"",padding:"",border:"Width"},function(U,S){L.cssHooks[U+S]={expand:function(V){for(var oe=0,Ce={},Ee=typeof V=="string"?V.split(" "):[V];oe<4;oe++)Ce[U+mr[oe]+S]=Ee[oe]||Ee[oe-2]||Ee[0];return Ce}},U!=="margin"&&(L.cssHooks[U+S].set=on)}),L.fn.extend({css:function(S,z){return dt(this,function(V,oe,Ce){var Ee,Ge,it={},yt=0;if(Array.isArray(oe)){for(Ee=Vs(V),Ge=oe.length;yt<Ge;yt++)it[oe[yt]]=L.css(V,oe[yt],!1,Ee);return it}return Ce!==void 0?L.style(V,oe,Ce):L.css(V,oe)},S,z,arguments.length>1)}});function vn(U,S,z,V,oe){return new vn.prototype.init(U,S,z,V,oe)}L.Tween=vn,vn.prototype={constructor:vn,init:function(S,z,V,oe,Ce,Ee){this.elem=S,this.prop=V,this.easing=Ce||L.easing._default,this.options=z,this.start=this.now=this.cur(),this.end=oe,this.unit=Ee||(L.cssNumber[V]?"":"px")},cur:function(){var S=vn.propHooks[this.prop];return S&&S.get?S.get(this):vn.propHooks._default.get(this)},run:function(S){var z,V=vn.propHooks[this.prop];return this.options.duration?this.pos=z=L.easing[this.easing](S,this.options.duration*S,0,1,this.options.duration):this.pos=z=S,this.now=(this.end-this.start)*z+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),V&&V.set?V.set(this):vn.propHooks._default.set(this),this}},vn.prototype.init.prototype=vn.prototype,vn.propHooks={_default:{get:function(S){var z;return S.elem.nodeType!==1||S.elem[S.prop]!=null&&S.elem.style[S.prop]==null?S.elem[S.prop]:(z=L.css(S.elem,S.prop,""),!z||z==="auto"?0:z)},set:function(S){L.fx.step[S.prop]?L.fx.step[S.prop](S):S.elem.nodeType===1&&(L.cssHooks[S.prop]||S.elem.style[It(S.prop)]!=null)?L.style(S.elem,S.prop,S.now+S.unit):S.elem[S.prop]=S.now}}},vn.propHooks.scrollTop=vn.propHooks.scrollLeft={set:function(S){S.elem.nodeType&&S.elem.parentNode&&(S.elem[S.prop]=S.now)}},L.easing={linear:function(S){return S},swing:function(S){return .5-Math.cos(S*Math.PI)/2},_default:"swing"},L.fx=vn.prototype.init,L.fx.step={};var hr,Nn,Nr=/^(?:toggle|show|hide)$/,Er=/queueHooks$/;function Rr(){Nn&&(re.hidden===!1&&_.requestAnimationFrame?_.requestAnimationFrame(Rr):_.setTimeout(Rr,L.fx.interval),L.fx.tick())}function xr(){return _.setTimeout(function(){hr=void 0}),hr=Date.now()}function Vr(U,S){var z,V=0,oe={height:U};for(S=S?1:0;V<4;V+=2-S)z=mr[V],oe["margin"+z]=oe["padding"+z]=U;return S&&(oe.opacity=oe.width=U),oe}function La(U,S,z){for(var V,oe=(wr.tweeners[S]||[]).concat(wr.tweeners["*"]),Ce=0,Ee=oe.length;Ce<Ee;Ce++)if(V=oe[Ce].call(z,S,U))return V}function Pr(U,S,z){var V,oe,Ce,Ee,Ge,it,yt,tn,wn="width"in S||"height"in S,cr=this,en={},zn=U.style,ia=U.nodeType&&Va(U),Fr=De.get(U,"fxshow");z.queue||(Ee=L._queueHooks(U,"fx"),Ee.unqueued==null&&(Ee.unqueued=0,Ge=Ee.empty.fire,Ee.empty.fire=function(){Ee.unqueued||Ge()}),Ee.unqueued++,cr.always(function(){cr.always(function(){Ee.unqueued--,L.queue(U,"fx").length||Ee.empty.fire()})}));for(V in S)if(oe=S[V],Nr.test(oe)){if(delete S[V],Ce=Ce||oe==="toggle",oe===(ia?"hide":"show"))if(oe==="show"&&Fr&&Fr[V]!==void 0)ia=!0;else continue;en[V]=Fr&&Fr[V]||L.style(U,V)}if(it=!L.isEmptyObject(S),!(!it&&L.isEmptyObject(en))){wn&&U.nodeType===1&&(z.overflow=[zn.overflow,zn.overflowX,zn.overflowY],yt=Fr&&Fr.display,yt==null&&(yt=De.get(U,"display")),tn=L.css(U,"display"),tn==="none"&&(yt?tn=yt:(ri([U],!0),yt=U.style.display||yt,tn=L.css(U,"display"),ri([U]))),(tn==="inline"||tn==="inline-block"&&yt!=null)&&L.css(U,"float")==="none"&&(it||(cr.done(function(){zn.display=yt}),yt==null&&(tn=zn.display,yt=tn==="none"?"":tn)),zn.display="inline-block")),z.overflow&&(zn.overflow="hidden",cr.always(function(){zn.overflow=z.overflow[0],zn.overflowX=z.overflow[1],zn.overflowY=z.overflow[2]})),it=!1;for(V in en)it||(Fr?"hidden"in Fr&&(ia=Fr.hidden):Fr=De.access(U,"fxshow",{display:yt}),Ce&&(Fr.hidden=!ia),ia&&ri([U],!0),cr.done(function(){ia||ri([U]),De.remove(U,"fxshow");for(V in en)L.style(U,V,en[V])})),it=La(ia?Fr[V]:0,V,cr),V in Fr||(Fr[V]=it.start,ia&&(it.end=it.start,it.start=0))}}function Zr(U,S){var z,V,oe,Ce,Ee;for(z in U)if(V=an(z),oe=S[V],Ce=U[z],Array.isArray(Ce)&&(oe=Ce[1],Ce=U[z]=Ce[0]),z!==V&&(U[V]=Ce,delete U[z]),Ee=L.cssHooks[V],Ee&&"expand"in Ee){Ce=Ee.expand(Ce),delete U[V];for(z in Ce)z in U||(U[z]=Ce[z],S[z]=oe)}else S[V]=oe}function wr(U,S,z){var V,oe,Ce=0,Ee=wr.prefilters.length,Ge=L.Deferred().always(function(){delete it.elem}),it=function(){if(oe)return!1;for(var cr=hr||xr(),en=Math.max(0,yt.startTime+yt.duration-cr),zn=en/yt.duration||0,ia=1-zn,Fr=0,bi=yt.tweens.length;Fr<bi;Fr++)yt.tweens[Fr].run(ia);return Ge.notifyWith(U,[yt,ia,en]),ia<1&&bi?en:(bi||Ge.notifyWith(U,[yt,1,0]),Ge.resolveWith(U,[yt]),!1)},yt=Ge.promise({elem:U,props:L.extend({},S),opts:L.extend(!0,{specialEasing:{},easing:L.easing._default},z),originalProperties:S,originalOptions:z,startTime:hr||xr(),duration:z.duration,tweens:[],createTween:function(cr,en){var zn=L.Tween(U,yt.opts,cr,en,yt.opts.specialEasing[cr]||yt.opts.easing);return yt.tweens.push(zn),zn},stop:function(cr){var en=0,zn=cr?yt.tweens.length:0;if(oe)return this;for(oe=!0;en<zn;en++)yt.tweens[en].run(1);return cr?(Ge.notifyWith(U,[yt,1,0]),Ge.resolveWith(U,[yt,cr])):Ge.rejectWith(U,[yt,cr]),this}}),tn=yt.props;for(Zr(tn,yt.opts.specialEasing);Ce<Ee;Ce++)if(V=wr.prefilters[Ce].call(yt,U,tn,yt.opts),V)return H(V.stop)&&(L._queueHooks(yt.elem,yt.opts.queue).stop=V.stop.bind(V)),V;return L.map(tn,La,yt),H(yt.opts.start)&&yt.opts.start.call(U,yt),yt.progress(yt.opts.progress).done(yt.opts.done,yt.opts.complete).fail(yt.opts.fail).always(yt.opts.always),L.fx.timer(L.extend(it,{elem:U,anim:yt,queue:yt.opts.queue})),yt}L.Animation=L.extend(wr,{tweeners:{"*":[function(U,S){var z=this.createTween(U,S);return da(z.elem,U,ar.exec(S),z),z}]},tweener:function(S,z){H(S)?(z=S,S=["*"]):S=S.match(fn);for(var V,oe=0,Ce=S.length;oe<Ce;oe++)V=S[oe],wr.tweeners[V]=wr.tweeners[V]||[],wr.tweeners[V].unshift(z)},prefilters:[Pr],prefilter:function(S,z){z?wr.prefilters.unshift(S):wr.prefilters.push(S)}}),L.speed=function(U,S,z){var V=U&&typeof U=="object"?L.extend({},U):{complete:z||!z&&S||H(U)&&U,duration:U,easing:z&&S||S&&!H(S)&&S};return L.fx.off?V.duration=0:typeof V.duration!="number"&&(V.duration in L.fx.speeds?V.duration=L.fx.speeds[V.duration]:V.duration=L.fx.speeds._default),(V.queue==null||V.queue===!0)&&(V.queue="fx"),V.old=V.complete,V.complete=function(){H(V.old)&&V.old.call(this),V.queue&&L.dequeue(this,V.queue)},V},L.fn.extend({fadeTo:function(S,z,V,oe){return this.filter(Va).css("opacity",0).show().end().animate({opacity:z},S,V,oe)},animate:function(S,z,V,oe){var Ce=L.isEmptyObject(S),Ee=L.speed(z,V,oe),Ge=function(){var yt=wr(this,L.extend({},S),Ee);(Ce||De.get(this,"finish"))&&yt.stop(!0)};return Ge.finish=Ge,Ce||Ee.queue===!1?this.each(Ge):this.queue(Ee.queue,Ge)},stop:function(S,z,V){var oe=function(Ee){var Ge=Ee.stop;delete Ee.stop,Ge(V)};return typeof S!="string"&&(V=z,z=S,S=void 0),z&&this.queue(S||"fx",[]),this.each(function(){var Ce=!0,Ee=S!=null&&S+"queueHooks",Ge=L.timers,it=De.get(this);if(Ee)it[Ee]&&it[Ee].stop&&oe(it[Ee]);else for(Ee in it)it[Ee]&&it[Ee].stop&&Er.test(Ee)&&oe(it[Ee]);for(Ee=Ge.length;Ee--;)Ge[Ee].elem===this&&(S==null||Ge[Ee].queue===S)&&(Ge[Ee].anim.stop(V),Ce=!1,Ge.splice(Ee,1));(Ce||!V)&&L.dequeue(this,S)})},finish:function(S){return S!==!1&&(S=S||"fx"),this.each(function(){var z,V=De.get(this),oe=V[S+"queue"],Ce=V[S+"queueHooks"],Ee=L.timers,Ge=oe?oe.length:0;for(V.finish=!0,L.queue(this,S,[]),Ce&&Ce.stop&&Ce.stop.call(this,!0),z=Ee.length;z--;)Ee[z].elem===this&&Ee[z].queue===S&&(Ee[z].anim.stop(!0),Ee.splice(z,1));for(z=0;z<Ge;z++)oe[z]&&oe[z].finish&&oe[z].finish.call(this);delete V.finish})}}),L.each(["toggle","show","hide"],function(U,S){var z=L.fn[S];L.fn[S]=function(V,oe,Ce){return V==null||typeof V=="boolean"?z.apply(this,arguments):this.animate(Vr(S,!0),V,oe,Ce)}}),L.each({slideDown:Vr("show"),slideUp:Vr("hide"),slideToggle:Vr("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(U,S){L.fn[U]=function(z,V,oe){return this.animate(S,z,V,oe)}}),L.timers=[],L.fx.tick=function(){var U,S=0,z=L.timers;for(hr=Date.now();S<z.length;S++)U=z[S],!U()&&z[S]===U&&z.splice(S--,1);z.length||L.fx.stop(),hr=void 0},L.fx.timer=function(U){L.timers.push(U),L.fx.start()},L.fx.interval=13,L.fx.start=function(){Nn||(Nn=!0,Rr())},L.fx.stop=function(){Nn=null},L.fx.speeds={slow:600,fast:200,_default:400},L.fn.delay=function(U,S){return U=L.fx&&L.fx.speeds[U]||U,S=S||"fx",this.queue(S,function(z,V){var oe=_.setTimeout(z,U);V.stop=function(){_.clearTimeout(oe)}})},function(){var U=re.createElement("input"),S=re.createElement("select"),z=S.appendChild(re.createElement("option"));U.type="checkbox",ee.checkOn=U.value!=="",ee.optSelected=z.selected,U=re.createElement("input"),U.value="t",U.type="radio",ee.radioValue=U.value==="t"}();var ea,Dr=L.expr.attrHandle;L.fn.extend({attr:function(S,z){return dt(this,L.attr,S,z,arguments.length>1)},removeAttr:function(S){return this.each(function(){L.removeAttr(this,S)})}}),L.extend({attr:function(S,z,V){var oe,Ce,Ee=S.nodeType;if(!(Ee===3||Ee===8||Ee===2)){if(typeof S.getAttribute=="undefined")return L.prop(S,z,V);if((Ee!==1||!L.isXMLDoc(S))&&(Ce=L.attrHooks[z.toLowerCase()]||(L.expr.match.bool.test(z)?ea:void 0)),V!==void 0){if(V===null){L.removeAttr(S,z);return}return Ce&&"set"in Ce&&(oe=Ce.set(S,V,z))!==void 0?oe:(S.setAttribute(z,V+""),V)}return Ce&&"get"in Ce&&(oe=Ce.get(S,z))!==null?oe:(oe=L.find.attr(S,z),oe==null?void 0:oe)}},attrHooks:{type:{set:function(S,z){if(!ee.radioValue&&z==="radio"&&_e(S,"input")){var V=S.value;return S.setAttribute("type",z),V&&(S.value=V),z}}}},removeAttr:function(S,z){var V,oe=0,Ce=z&&z.match(fn);if(Ce&&S.nodeType===1)for(;V=Ce[oe++];)S.removeAttribute(V)}}),ea={set:function(S,z,V){return z===!1?L.removeAttr(S,V):S.setAttribute(V,V),V}},L.each(L.expr.match.bool.source.match(/\w+/g),function(U,S){var z=Dr[S]||L.find.attr;Dr[S]=function(V,oe,Ce){var Ee,Ge,it=oe.toLowerCase();return Ce||(Ge=Dr[it],Dr[it]=Ee,Ee=z(V,oe,Ce)!=null?it:null,Dr[it]=Ge),Ee}});var ha=/^(?:input|select|textarea|button)$/i,ma=/^(?:a|area)$/i;L.fn.extend({prop:function(S,z){return dt(this,L.prop,S,z,arguments.length>1)},removeProp:function(S){return this.each(function(){delete this[L.propFix[S]||S]})}}),L.extend({prop:function(S,z,V){var oe,Ce,Ee=S.nodeType;if(!(Ee===3||Ee===8||Ee===2))return(Ee!==1||!L.isXMLDoc(S))&&(z=L.propFix[z]||z,Ce=L.propHooks[z]),V!==void 0?Ce&&"set"in Ce&&(oe=Ce.set(S,V,z))!==void 0?oe:S[z]=V:Ce&&"get"in Ce&&(oe=Ce.get(S,z))!==null?oe:S[z]},propHooks:{tabIndex:{get:function(S){var z=L.find.attr(S,"tabindex");return z?parseInt(z,10):ha.test(S.nodeName)||ma.test(S.nodeName)&&S.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ee.optSelected||(L.propHooks.selected={get:function(S){var z=S.parentNode;return z&&z.parentNode&&z.parentNode.selectedIndex,null},set:function(S){var z=S.parentNode;z&&(z.selectedIndex,z.parentNode&&z.parentNode.selectedIndex)}}),L.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){L.propFix[this.toLowerCase()]=this});function Ui(U){var S=U.match(fn)||[];return S.join(" ")}function Mo(U){return U.getAttribute&&U.getAttribute("class")||""}function uu(U){return Array.isArray(U)?U:typeof U=="string"?U.match(fn)||[]:[]}L.fn.extend({addClass:function(S){var z,V,oe,Ce,Ee,Ge;return H(S)?this.each(function(it){L(this).addClass(S.call(this,it,Mo(this)))}):(z=uu(S),z.length?this.each(function(){if(oe=Mo(this),V=this.nodeType===1&&" "+Ui(oe)+" ",V){for(Ee=0;Ee<z.length;Ee++)Ce=z[Ee],V.indexOf(" "+Ce+" ")<0&&(V+=Ce+" ");Ge=Ui(V),oe!==Ge&&this.setAttribute("class",Ge)}}):this)},removeClass:function(S){var z,V,oe,Ce,Ee,Ge;return H(S)?this.each(function(it){L(this).removeClass(S.call(this,it,Mo(this)))}):arguments.length?(z=uu(S),z.length?this.each(function(){if(oe=Mo(this),V=this.nodeType===1&&" "+Ui(oe)+" ",V){for(Ee=0;Ee<z.length;Ee++)for(Ce=z[Ee];V.indexOf(" "+Ce+" ")>-1;)V=V.replace(" "+Ce+" "," ");Ge=Ui(V),oe!==Ge&&this.setAttribute("class",Ge)}}):this):this.attr("class","")},toggleClass:function(S,z){var V,oe,Ce,Ee,Ge=typeof S,it=Ge==="string"||Array.isArray(S);return H(S)?this.each(function(yt){L(this).toggleClass(S.call(this,yt,Mo(this),z),z)}):typeof z=="boolean"&&it?z?this.addClass(S):this.removeClass(S):(V=uu(S),this.each(function(){if(it)for(Ee=L(this),Ce=0;Ce<V.length;Ce++)oe=V[Ce],Ee.hasClass(oe)?Ee.removeClass(oe):Ee.addClass(oe);else(S===void 0||Ge==="boolean")&&(oe=Mo(this),oe&&De.set(this,"__className__",oe),this.setAttribute&&this.setAttribute("class",oe||S===!1?"":De.get(this,"__className__")||""))}))},hasClass:function(S){var z,V,oe=0;for(z=" "+S+" ";V=this[oe++];)if(V.nodeType===1&&(" "+Ui(Mo(V))+" ").indexOf(z)>-1)return!0;return!1}});var ho=/\r/g;L.fn.extend({val:function(S){var z,V,oe,Ce=this[0];return arguments.length?(oe=H(S),this.each(function(Ee){var Ge;this.nodeType===1&&(oe?Ge=S.call(this,Ee,L(this).val()):Ge=S,Ge==null?Ge="":typeof Ge=="number"?Ge+="":Array.isArray(Ge)&&(Ge=L.map(Ge,function(it){return it==null?"":it+""})),z=L.valHooks[this.type]||L.valHooks[this.nodeName.toLowerCase()],(!z||!("set"in z)||z.set(this,Ge,"value")===void 0)&&(this.value=Ge))})):Ce?(z=L.valHooks[Ce.type]||L.valHooks[Ce.nodeName.toLowerCase()],z&&"get"in z&&(V=z.get(Ce,"value"))!==void 0?V:(V=Ce.value,typeof V=="string"?V.replace(ho,""):V==null?"":V)):void 0}}),L.extend({valHooks:{option:{get:function(S){var z=L.find.attr(S,"value");return z!=null?z:Ui(L.text(S))}},select:{get:function(S){var z,V,oe,Ce=S.options,Ee=S.selectedIndex,Ge=S.type==="select-one",it=Ge?null:[],yt=Ge?Ee+1:Ce.length;for(Ee<0?oe=yt:oe=Ge?Ee:0;oe<yt;oe++)if(V=Ce[oe],(V.selected||oe===Ee)&&!V.disabled&&(!V.parentNode.disabled||!_e(V.parentNode,"optgroup"))){if(z=L(V).val(),Ge)return z;it.push(z)}return it},set:function(S,z){for(var V,oe,Ce=S.options,Ee=L.makeArray(z),Ge=Ce.length;Ge--;)oe=Ce[Ge],(oe.selected=L.inArray(L.valHooks.option.get(oe),Ee)>-1)&&(V=!0);return V||(S.selectedIndex=-1),Ee}}}}),L.each(["radio","checkbox"],function(){L.valHooks[this]={set:function(S,z){if(Array.isArray(z))return S.checked=L.inArray(L(S).val(),z)>-1}},ee.checkOn||(L.valHooks[this].get=function(U){return U.getAttribute("value")===null?"on":U.value})});var $s=_.location,Rs={guid:Date.now()},Xu=/\?/;L.parseXML=function(U){var S,z;if(!U||typeof U!="string")return null;try{S=new _.DOMParser().parseFromString(U,"text/xml")}catch(V){}return z=S&&S.getElementsByTagName("parsererror")[0],(!S||z)&&L.error("Invalid XML: "+(z?L.map(z.childNodes,function(V){return V.textContent}).join(`
`):U)),S};var sc=/^(?:focusinfocus|focusoutblur)$/,uc=function(S){S.stopPropagation()};L.extend(L.event,{trigger:function(S,z,V,oe){var Ce,Ee,Ge,it,yt,tn,wn,cr,en=[V||re],zn=ae.call(S,"type")?S.type:S,ia=ae.call(S,"namespace")?S.namespace.split("."):[];if(Ee=cr=Ge=V=V||re,!(V.nodeType===3||V.nodeType===8)&&!sc.test(zn+L.event.triggered)&&(zn.indexOf(".")>-1&&(ia=zn.split("."),zn=ia.shift(),ia.sort()),yt=zn.indexOf(":")<0&&"on"+zn,S=S[L.expando]?S:new L.Event(zn,typeof S=="object"&&S),S.isTrigger=oe?2:3,S.namespace=ia.join("."),S.rnamespace=S.namespace?new RegExp("(^|\\.)"+ia.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,S.result=void 0,S.target||(S.target=V),z=z==null?[S]:L.makeArray(z,[S]),wn=L.event.special[zn]||{},!(!oe&&wn.trigger&&wn.trigger.apply(V,z)===!1))){if(!oe&&!wn.noBubble&&!se(V)){for(it=wn.delegateType||zn,sc.test(it+zn)||(Ee=Ee.parentNode);Ee;Ee=Ee.parentNode)en.push(Ee),Ge=Ee;Ge===(V.ownerDocument||re)&&en.push(Ge.defaultView||Ge.parentWindow||_)}for(Ce=0;(Ee=en[Ce++])&&!S.isPropagationStopped();)cr=Ee,S.type=Ce>1?it:wn.bindType||zn,tn=(De.get(Ee,"events")||Object.create(null))[S.type]&&De.get(Ee,"handle"),tn&&tn.apply(Ee,z),tn=yt&&Ee[yt],tn&&tn.apply&&Jn(Ee)&&(S.result=tn.apply(Ee,z),S.result===!1&&S.preventDefault());return S.type=zn,!oe&&!S.isDefaultPrevented()&&(!wn._default||wn._default.apply(en.pop(),z)===!1)&&Jn(V)&&yt&&H(V[zn])&&!se(V)&&(Ge=V[yt],Ge&&(V[yt]=null),L.event.triggered=zn,S.isPropagationStopped()&&cr.addEventListener(zn,uc),V[zn](),S.isPropagationStopped()&&cr.removeEventListener(zn,uc),L.event.triggered=void 0,Ge&&(V[yt]=Ge)),S.result}},simulate:function(S,z,V){var oe=L.extend(new L.Event,V,{type:S,isSimulated:!0});L.event.trigger(oe,null,z)}}),L.fn.extend({trigger:function(S,z){return this.each(function(){L.event.trigger(S,z,this)})},triggerHandler:function(S,z){var V=this[0];if(V)return L.event.trigger(S,z,V,!0)}});var tf=/\[\]$/,Ns=/\r?\n/g,nf=/^(?:submit|button|image|reset|file)$/i,Ku=/^(?:input|select|textarea|keygen)/i;function Rl(U,S,z,V){var oe;if(Array.isArray(S))L.each(S,function(Ce,Ee){z||tf.test(U)?V(U,Ee):Rl(U+"["+(typeof Ee=="object"&&Ee!=null?Ce:"")+"]",Ee,z,V)});else if(!z&&ue(S)==="object")for(oe in S)Rl(U+"["+oe+"]",S[oe],z,V);else V(U,S)}L.param=function(U,S){var z,V=[],oe=function(Ee,Ge){var it=H(Ge)?Ge():Ge;V[V.length]=encodeURIComponent(Ee)+"="+encodeURIComponent(it==null?"":it)};if(U==null)return"";if(Array.isArray(U)||U.jquery&&!L.isPlainObject(U))L.each(U,function(){oe(this.name,this.value)});else for(z in U)Rl(z,U[z],S,oe);return V.join("&")},L.fn.extend({serialize:function(){return L.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var S=L.prop(this,"elements");return S?L.makeArray(S):this}).filter(function(){var S=this.type;return this.name&&!L(this).is(":disabled")&&Ku.test(this.nodeName)&&!nf.test(S)&&(this.checked||!ji.test(S))}).map(function(S,z){var V=L(this).val();return V==null?null:Array.isArray(V)?L.map(V,function(oe){return{name:z.name,value:oe.replace(Ns,`\r
`)}}):{name:z.name,value:V.replace(Ns,`\r
`)}}).get()}});var lu=/%20/g,Nl=/#.*$/,Gf=/([?&])_=[^&]*/,jl=/^(.*?):[ \t]*([^\r\n]*)$/mg,lc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rf=/^(?:GET|HEAD)$/,af=/^\/\//,wi={},hi={},ol="*/".concat("*"),gs=re.createElement("a");gs.href=$s.href;function xu(U){return function(S,z){typeof S!="string"&&(z=S,S="*");var V,oe=0,Ce=S.toLowerCase().match(fn)||[];if(H(z))for(;V=Ce[oe++];)V[0]==="+"?(V=V.slice(1)||"*",(U[V]=U[V]||[]).unshift(z)):(U[V]=U[V]||[]).push(z)}}function sl(U,S,z,V){var oe={},Ce=U===hi;function Ee(Ge){var it;return oe[Ge]=!0,L.each(U[Ge]||[],function(yt,tn){var wn=tn(S,z,V);if(typeof wn=="string"&&!Ce&&!oe[wn])return S.dataTypes.unshift(wn),Ee(wn),!1;if(Ce)return!(it=wn)}),it}return Ee(S.dataTypes[0])||!oe["*"]&&Ee("*")}function Ll(U,S){var z,V,oe=L.ajaxSettings.flatOptions||{};for(z in S)S[z]!==void 0&&((oe[z]?U:V||(V={}))[z]=S[z]);return V&&L.extend(!0,U,V),U}function zf(U,S,z){for(var V,oe,Ce,Ee,Ge=U.contents,it=U.dataTypes;it[0]==="*";)it.shift(),V===void 0&&(V=U.mimeType||S.getResponseHeader("Content-Type"));if(V){for(oe in Ge)if(Ge[oe]&&Ge[oe].test(V)){it.unshift(oe);break}}if(it[0]in z)Ce=it[0];else{for(oe in z){if(!it[0]||U.converters[oe+" "+it[0]]){Ce=oe;break}Ee||(Ee=oe)}Ce=Ce||Ee}if(Ce)return Ce!==it[0]&&it.unshift(Ce),z[Ce]}function cu(U,S,z,V){var oe,Ce,Ee,Ge,it,yt={},tn=U.dataTypes.slice();if(tn[1])for(Ee in U.converters)yt[Ee.toLowerCase()]=U.converters[Ee];for(Ce=tn.shift();Ce;)if(U.responseFields[Ce]&&(z[U.responseFields[Ce]]=S),!it&&V&&U.dataFilter&&(S=U.dataFilter(S,U.dataType)),it=Ce,Ce=tn.shift(),Ce){if(Ce==="*")Ce=it;else if(it!=="*"&&it!==Ce){if(Ee=yt[it+" "+Ce]||yt["* "+Ce],!Ee){for(oe in yt)if(Ge=oe.split(" "),Ge[1]===Ce&&(Ee=yt[it+" "+Ge[0]]||yt["* "+Ge[0]],Ee)){Ee===!0?Ee=yt[oe]:yt[oe]!==!0&&(Ce=Ge[0],tn.unshift(Ge[1]));break}}if(Ee!==!0)if(Ee&&U.throws)S=Ee(S);else try{S=Ee(S)}catch(wn){return{state:"parsererror",error:Ee?wn:"No conversion from "+it+" to "+Ce}}}}return{state:"success",data:S}}L.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:$s.href,type:"GET",isLocal:lc.test($s.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ol,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":L.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(S,z){return z?Ll(Ll(S,L.ajaxSettings),z):Ll(L.ajaxSettings,S)},ajaxPrefilter:xu(wi),ajaxTransport:xu(hi),ajax:function(S,z){typeof S=="object"&&(z=S,S=void 0),z=z||{};var V,oe,Ce,Ee,Ge,it,yt,tn,wn,cr,en=L.ajaxSetup({},z),zn=en.context||en,ia=en.context&&(zn.nodeType||zn.jquery)?L(zn):L.event,Fr=L.Deferred(),bi=L.Callbacks("once memory"),Fo=en.statusCode||{},Vi={},Ao={},oo="canceled",va={readyState:0,getResponseHeader:function(Ti){var Mi;if(yt){if(!Ee)for(Ee={};Mi=jl.exec(Ce);)Ee[Mi[1].toLowerCase()+" "]=(Ee[Mi[1].toLowerCase()+" "]||[]).concat(Mi[2]);Mi=Ee[Ti.toLowerCase()+" "]}return Mi==null?null:Mi.join(", ")},getAllResponseHeaders:function(){return yt?Ce:null},setRequestHeader:function(Ti,Mi){return yt==null&&(Ti=Ao[Ti.toLowerCase()]=Ao[Ti.toLowerCase()]||Ti,Vi[Ti]=Mi),this},overrideMimeType:function(Ti){return yt==null&&(en.mimeType=Ti),this},statusCode:function(Ti){var Mi;if(Ti)if(yt)va.always(Ti[va.status]);else for(Mi in Ti)Fo[Mi]=[Fo[Mi],Ti[Mi]];return this},abort:function(Ti){var Mi=Ti||oo;return V&&V.abort(Mi),ps(0,Mi),this}};if(Fr.promise(va),en.url=((S||en.url||$s.href)+"").replace(af,$s.protocol+"//"),en.type=z.method||z.type||en.method||en.type,en.dataTypes=(en.dataType||"*").toLowerCase().match(fn)||[""],en.crossDomain==null){it=re.createElement("a");try{it.href=en.url,it.href=it.href,en.crossDomain=gs.protocol+"//"+gs.host!=it.protocol+"//"+it.host}catch(ei){en.crossDomain=!0}}if(en.data&&en.processData&&typeof en.data!="string"&&(en.data=L.param(en.data,en.traditional)),sl(wi,en,z,va),yt)return va;tn=L.event&&en.global,tn&&L.active++==0&&L.event.trigger("ajaxStart"),en.type=en.type.toUpperCase(),en.hasContent=!rf.test(en.type),oe=en.url.replace(Nl,""),en.hasContent?en.data&&en.processData&&(en.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(en.data=en.data.replace(lu,"+")):(cr=en.url.slice(oe.length),en.data&&(en.processData||typeof en.data=="string")&&(oe+=(Xu.test(oe)?"&":"?")+en.data,delete en.data),en.cache===!1&&(oe=oe.replace(Gf,"$1"),cr=(Xu.test(oe)?"&":"?")+"_="+Rs.guid+++cr),en.url=oe+cr),en.ifModified&&(L.lastModified[oe]&&va.setRequestHeader("If-Modified-Since",L.lastModified[oe]),L.etag[oe]&&va.setRequestHeader("If-None-Match",L.etag[oe])),(en.data&&en.hasContent&&en.contentType!==!1||z.contentType)&&va.setRequestHeader("Content-Type",en.contentType),va.setRequestHeader("Accept",en.dataTypes[0]&&en.accepts[en.dataTypes[0]]?en.accepts[en.dataTypes[0]]+(en.dataTypes[0]!=="*"?", "+ol+"; q=0.01":""):en.accepts["*"]);for(wn in en.headers)va.setRequestHeader(wn,en.headers[wn]);if(en.beforeSend&&(en.beforeSend.call(zn,va,en)===!1||yt))return va.abort();if(oo="abort",bi.add(en.complete),va.done(en.success),va.fail(en.error),V=sl(hi,en,z,va),!V)ps(-1,"No Transport");else{if(va.readyState=1,tn&&ia.trigger("ajaxSend",[va,en]),yt)return va;en.async&&en.timeout>0&&(Ge=_.setTimeout(function(){va.abort("timeout")},en.timeout));try{yt=!1,V.send(Vi,ps)}catch(ei){if(yt)throw ei;ps(-1,ei)}}function ps(ei,Ti,Mi,ul){var eo,Jo,hu,vu,js,Po=Ti;yt||(yt=!0,Ge&&_.clearTimeout(Ge),V=void 0,Ce=ul||"",va.readyState=ei>0?4:0,eo=ei>=200&&ei<300||ei===304,Mi&&(vu=zf(en,va,Mi)),!eo&&L.inArray("script",en.dataTypes)>-1&&L.inArray("json",en.dataTypes)<0&&(en.converters["text script"]=function(){}),vu=cu(en,vu,va,eo),eo?(en.ifModified&&(js=va.getResponseHeader("Last-Modified"),js&&(L.lastModified[oe]=js),js=va.getResponseHeader("etag"),js&&(L.etag[oe]=js)),ei===204||en.type==="HEAD"?Po="nocontent":ei===304?Po="notmodified":(Po=vu.state,Jo=vu.data,hu=vu.error,eo=!hu)):(hu=Po,(ei||!Po)&&(Po="error",ei<0&&(ei=0))),va.status=ei,va.statusText=(Ti||Po)+"",eo?Fr.resolveWith(zn,[Jo,Po,va]):Fr.rejectWith(zn,[va,Po,hu]),va.statusCode(Fo),Fo=void 0,tn&&ia.trigger(eo?"ajaxSuccess":"ajaxError",[va,en,eo?Jo:hu]),bi.fireWith(zn,[va,Po]),tn&&(ia.trigger("ajaxComplete",[va,en]),--L.active||L.event.trigger("ajaxStop")))}return va},getJSON:function(S,z,V){return L.get(S,z,V,"json")},getScript:function(S,z){return L.get(S,void 0,z,"script")}}),L.each(["get","post"],function(U,S){L[S]=function(z,V,oe,Ce){return H(V)&&(Ce=Ce||oe,oe=V,V=void 0),L.ajax(L.extend({url:z,type:S,dataType:Ce,data:V,success:oe},L.isPlainObject(z)&&z))}}),L.ajaxPrefilter(function(U){var S;for(S in U.headers)S.toLowerCase()==="content-type"&&(U.contentType=U.headers[S]||"")}),L._evalUrl=function(U,S,z){return L.ajax({url:U,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(oe){L.globalEval(oe,S,z)}})},L.fn.extend({wrapAll:function(S){var z;return this[0]&&(H(S)&&(S=S.call(this[0])),z=L(S,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&z.insertBefore(this[0]),z.map(function(){for(var V=this;V.firstElementChild;)V=V.firstElementChild;return V}).append(this)),this},wrapInner:function(S){return H(S)?this.each(function(z){L(this).wrapInner(S.call(this,z))}):this.each(function(){var z=L(this),V=z.contents();V.length?V.wrapAll(S):z.append(S)})},wrap:function(S){var z=H(S);return this.each(function(V){L(this).wrapAll(z?S.call(this,V):S)})},unwrap:function(S){return this.parent(S).not("body").each(function(){L(this).replaceWith(this.childNodes)}),this}}),L.expr.pseudos.hidden=function(U){return!L.expr.pseudos.visible(U)},L.expr.pseudos.visible=function(U){return!!(U.offsetWidth||U.offsetHeight||U.getClientRects().length)},L.ajaxSettings.xhr=function(){try{return new _.XMLHttpRequest}catch(U){}};var cc={0:200,1223:204},Qi=L.ajaxSettings.xhr();ee.cors=!!Qi&&"withCredentials"in Qi,ee.ajax=Qi=!!Qi,L.ajaxTransport(function(U){var S,z;if(ee.cors||Qi&&!U.crossDomain)return{send:function(oe,Ce){var Ee,Ge=U.xhr();if(Ge.open(U.type,U.url,U.async,U.username,U.password),U.xhrFields)for(Ee in U.xhrFields)Ge[Ee]=U.xhrFields[Ee];U.mimeType&&Ge.overrideMimeType&&Ge.overrideMimeType(U.mimeType),!U.crossDomain&&!oe["X-Requested-With"]&&(oe["X-Requested-With"]="XMLHttpRequest");for(Ee in oe)Ge.setRequestHeader(Ee,oe[Ee]);S=function(yt){return function(){S&&(S=z=Ge.onload=Ge.onerror=Ge.onabort=Ge.ontimeout=Ge.onreadystatechange=null,yt==="abort"?Ge.abort():yt==="error"?typeof Ge.status!="number"?Ce(0,"error"):Ce(Ge.status,Ge.statusText):Ce(cc[Ge.status]||Ge.status,Ge.statusText,(Ge.responseType||"text")!=="text"||typeof Ge.responseText!="string"?{binary:Ge.response}:{text:Ge.responseText},Ge.getAllResponseHeaders()))}},Ge.onload=S(),z=Ge.onerror=Ge.ontimeout=S("error"),Ge.onabort!==void 0?Ge.onabort=z:Ge.onreadystatechange=function(){Ge.readyState===4&&_.setTimeout(function(){S&&z()})},S=S("abort");try{Ge.send(U.hasContent&&U.data||null)}catch(it){if(S)throw it}},abort:function(){S&&S()}}}),L.ajaxPrefilter(function(U){U.crossDomain&&(U.contents.script=!1)}),L.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(S){return L.globalEval(S),S}}}),L.ajaxPrefilter("script",function(U){U.cache===void 0&&(U.cache=!1),U.crossDomain&&(U.type="GET")}),L.ajaxTransport("script",function(U){if(U.crossDomain||U.scriptAttrs){var S,z;return{send:function(oe,Ce){S=L("<script>").attr(U.scriptAttrs||{}).prop({charset:U.scriptCharset,src:U.url}).on("load error",z=function(Ge){S.remove(),z=null,Ge&&Ce(Ge.type==="error"?404:200,Ge.type)}),re.head.appendChild(S[0])},abort:function(){z&&z()}}}});var _l=[],Su=/(=)\?(?=&|$)|\?\?/;L.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var S=_l.pop()||L.expando+"_"+Rs.guid++;return this[S]=!0,S}}),L.ajaxPrefilter("json jsonp",function(U,S,z){var V,oe,Ce,Ee=U.jsonp!==!1&&(Su.test(U.url)?"url":typeof U.data=="string"&&(U.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Su.test(U.data)&&"data");if(Ee||U.dataTypes[0]==="jsonp")return V=U.jsonpCallback=H(U.jsonpCallback)?U.jsonpCallback():U.jsonpCallback,Ee?U[Ee]=U[Ee].replace(Su,"$1"+V):U.jsonp!==!1&&(U.url+=(Xu.test(U.url)?"&":"?")+U.jsonp+"="+V),U.converters["script json"]=function(){return Ce||L.error(V+" was not called"),Ce[0]},U.dataTypes[0]="json",oe=_[V],_[V]=function(){Ce=arguments},z.always(function(){oe===void 0?L(_).removeProp(V):_[V]=oe,U[V]&&(U.jsonpCallback=S.jsonpCallback,_l.push(V)),Ce&&H(oe)&&oe(Ce[0]),Ce=oe=void 0}),"script"}),ee.createHTMLDocument=function(){var U=re.implementation.createHTMLDocument("").body;return U.innerHTML="<form></form><form></form>",U.childNodes.length===2}(),L.parseHTML=function(U,S,z){if(typeof U!="string")return[];typeof S=="boolean"&&(z=S,S=!1);var V,oe,Ce;return S||(ee.createHTMLDocument?(S=re.implementation.createHTMLDocument(""),V=S.createElement("base"),V.href=re.location.href,S.head.appendChild(V)):S=re),oe=ie.exec(U),Ce=!z&&[],oe?[S.createElement(oe[1])]:(oe=go([U],S,Ce),Ce&&Ce.length&&L(Ce).remove(),L.merge([],oe.childNodes))},L.fn.load=function(U,S,z){var V,oe,Ce,Ee=this,Ge=U.indexOf(" ");return Ge>-1&&(V=Ui(U.slice(Ge)),U=U.slice(0,Ge)),H(S)?(z=S,S=void 0):S&&typeof S=="object"&&(oe="POST"),Ee.length>0&&L.ajax({url:U,type:oe||"GET",dataType:"html",data:S}).done(function(it){Ce=arguments,Ee.html(V?L("<div>").append(L.parseHTML(it)).find(V):it)}).always(z&&function(it,yt){Ee.each(function(){z.apply(this,Ce||[it.responseText,yt,it])})}),this},L.expr.pseudos.animated=function(U){return L.grep(L.timers,function(S){return U===S.elem}).length},L.offset={setOffset:function(S,z,V){var oe,Ce,Ee,Ge,it,yt,tn,wn=L.css(S,"position"),cr=L(S),en={};wn==="static"&&(S.style.position="relative"),it=cr.offset(),Ee=L.css(S,"top"),yt=L.css(S,"left"),tn=(wn==="absolute"||wn==="fixed")&&(Ee+yt).indexOf("auto")>-1,tn?(oe=cr.position(),Ge=oe.top,Ce=oe.left):(Ge=parseFloat(Ee)||0,Ce=parseFloat(yt)||0),H(z)&&(z=z.call(S,V,L.extend({},it))),z.top!=null&&(en.top=z.top-it.top+Ge),z.left!=null&&(en.left=z.left-it.left+Ce),"using"in z?z.using.call(S,en):cr.css(en)}},L.fn.extend({offset:function(S){if(arguments.length)return S===void 0?this:this.each(function(Ce){L.offset.setOffset(this,S,Ce)});var z,V,oe=this[0];if(!!oe)return oe.getClientRects().length?(z=oe.getBoundingClientRect(),V=oe.ownerDocument.defaultView,{top:z.top+V.pageYOffset,left:z.left+V.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var S,z,V,oe=this[0],Ce={top:0,left:0};if(L.css(oe,"position")==="fixed")z=oe.getBoundingClientRect();else{for(z=this.offset(),V=oe.ownerDocument,S=oe.offsetParent||V.documentElement;S&&(S===V.body||S===V.documentElement)&&L.css(S,"position")==="static";)S=S.parentNode;S&&S!==oe&&S.nodeType===1&&(Ce=L(S).offset(),Ce.top+=L.css(S,"borderTopWidth",!0),Ce.left+=L.css(S,"borderLeftWidth",!0))}return{top:z.top-Ce.top-L.css(oe,"marginTop",!0),left:z.left-Ce.left-L.css(oe,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var S=this.offsetParent;S&&L.css(S,"position")==="static";)S=S.offsetParent;return S||yr})}}),L.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(U,S){var z=S==="pageYOffset";L.fn[U]=function(V){return dt(this,function(oe,Ce,Ee){var Ge;if(se(oe)?Ge=oe:oe.nodeType===9&&(Ge=oe.defaultView),Ee===void 0)return Ge?Ge[S]:oe[Ce];Ge?Ge.scrollTo(z?Ge.pageXOffset:Ee,z?Ee:Ge.pageYOffset):oe[Ce]=Ee},U,V,arguments.length)}}),L.each(["top","left"],function(U,S){L.cssHooks[S]=Ws(ee.pixelPosition,function(z,V){if(V)return V=Hs(z,S),iu.test(V)?L(z).position()[S]+"px":V})}),L.each({Height:"height",Width:"width"},function(U,S){L.each({padding:"inner"+U,content:S,"":"outer"+U},function(z,V){L.fn[V]=function(oe,Ce){var Ee=arguments.length&&(z||typeof oe!="boolean"),Ge=z||(oe===!0||Ce===!0?"margin":"border");return dt(this,function(it,yt,tn){var wn;return se(it)?V.indexOf("outer")===0?it["inner"+U]:it.document.documentElement["client"+U]:it.nodeType===9?(wn=it.documentElement,Math.max(it.body["scroll"+U],wn["scroll"+U],it.body["offset"+U],wn["offset"+U],wn["client"+U])):tn===void 0?L.css(it,yt,Ge):L.style(it,yt,tn,Ge)},S,Ee?oe:void 0,Ee)}})}),L.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(U,S){L.fn[S]=function(z){return this.on(S,z)}}),L.fn.extend({bind:function(S,z,V){return this.on(S,null,z,V)},unbind:function(S,z){return this.off(S,null,z)},delegate:function(S,z,V,oe){return this.on(z,S,V,oe)},undelegate:function(S,z,V){return arguments.length===1?this.off(S,"**"):this.off(z,S||"**",V)},hover:function(S,z){return this.mouseenter(S).mouseleave(z||S)}}),L.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(U,S){L.fn[S]=function(z,V){return arguments.length>0?this.on(S,null,z,V):this.trigger(S)}});var fu=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;L.proxy=function(U,S){var z,V,oe;if(typeof S=="string"&&(z=U[S],S=U,U=z),!!H(U))return V=R.call(arguments,2),oe=function(){return U.apply(S||this,V.concat(R.call(arguments)))},oe.guid=U.guid=U.guid||L.guid++,oe},L.holdReady=function(U){U?L.readyWait++:L.ready(!0)},L.isArray=Array.isArray,L.parseJSON=JSON.parse,L.nodeName=_e,L.isFunction=H,L.isWindow=se,L.camelCase=an,L.type=ue,L.now=Date.now,L.isNumeric=function(U){var S=L.type(U);return(S==="number"||S==="string")&&!isNaN(U-parseFloat(U))},L.trim=function(U){return U==null?"":(U+"").replace(fu,"$1")},I=[],m=function(){return L}.apply(P,I),m!==void 0&&(le.exports=m);var du=_.jQuery,_o=_.$;return L.noConflict=function(U){return _.$===L&&(_.$=_o),U&&_.jQuery===L&&(_.jQuery=du),L},typeof M=="undefined"&&(_.jQuery=_.$=L),L})},EbDI:function(le,P){function h(I){if(typeof Symbol!="undefined"&&I[Symbol.iterator]!=null||I["@@iterator"]!=null)return Array.from(I)}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},Efrf:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SwatchesGroup=void 0;var I=h("q1tI"),m=W(I),_=h("/FUP"),M=W(_),A=h("3WF5"),G=W(A),R=h("BmQL"),X=W(R);function W(K){return K&&K.__esModule?K:{default:K}}var Y=P.SwatchesGroup=function(ne){var ae=ne.onClick,te=ne.onSwatchHover,ce=ne.group,ee=ne.active,H=(0,M.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return m.default.createElement("div",{style:H.group},(0,G.default)(ce,function(se,re){return m.default.createElement(X.default,{key:se,color:se,active:se.toLowerCase()===ee,first:re===0,last:re===ce.length-1,onClick:ae,onSwatchHover:te})}))};P.default=Y},Ej2v:function(le,P){le.exports=h;function h(){var I=new Float32Array(2);return I[0]=0,I[1]=0,I}},F4jT:function(le,P,h){le.exports=m;var I=h("NEPx");function m(_,M){var A=_[0],G=_[1],R=M[0],X=M[1];return Math.abs(A-R)<=I*Math.max(1,Math.abs(A),Math.abs(R))&&Math.abs(G-X)<=I*Math.max(1,Math.abs(G),Math.abs(X))}},F7vQ:function(le,P,h){},FKLu:function(le,P,h){le.exports=m;var I=h("Ej2v")();function m(_,M,A,G,R,X){var W,Y;for(M||(M=2),A||(A=0),G?Y=Math.min(G*M+A,_.length):Y=_.length,W=A;W<Y;W+=M)I[0]=_[W],I[1]=_[W+1],R(I,I,X),_[W]=I[0],_[W+1]=I[1];return _}},FV85:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.TargetTypeEnum=P.BindingTypeEnum=P.BindingScopeEnum=void 0;var I={Request:"Request",Singleton:"Singleton",Transient:"Transient"};P.BindingScopeEnum=I;var m={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};P.BindingTypeEnum=m;var _={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};P.TargetTypeEnum=_},FXSy:function(le,P){},"FbP/":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Photoshop=void 0;var I=function(){function ge(_e,Te){for(var we=0;we<Te.length;we++){var Qe=Te[we];Qe.enumerable=Qe.enumerable||!1,Qe.configurable=!0,"value"in Qe&&(Qe.writable=!0),Object.defineProperty(_e,Qe.key,Qe)}}return function(_e,Te,we){return Te&&ge(_e.prototype,Te),we&&ge(_e,we),_e}}(),m=h("q1tI"),_=ye(m),M=h("17x9"),A=ye(M),G=h("/FUP"),R=ye(G),X=h("QkVN"),W=ye(X),Y=h("TM95"),K=h("81by"),ne=ye(K),ae=h("BKMn"),te=ye(ae),ce=h("sVjb"),ee=ye(ce),H=h("DRdP"),se=ye(H),re=h("2zpl"),q=ye(re);function ye(ge){return ge&&ge.__esModule?ge:{default:ge}}function ue(ge,_e){if(!(ge instanceof _e))throw new TypeError("Cannot call a class as a function")}function ve(ge,_e){if(!ge)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e&&(typeof _e=="object"||typeof _e=="function")?_e:ge}function pe(ge,_e){if(typeof _e!="function"&&_e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _e);ge.prototype=Object.create(_e&&_e.prototype,{constructor:{value:ge,enumerable:!1,writable:!0,configurable:!0}}),_e&&(Object.setPrototypeOf?Object.setPrototypeOf(ge,_e):ge.__proto__=_e)}var L=P.Photoshop=function(ge){pe(_e,ge);function _e(Te){ue(this,_e);var we=ve(this,(_e.__proto__||Object.getPrototypeOf(_e)).call(this));return we.state={currentColor:Te.hex},we}return I(_e,[{key:"render",value:function(){var we=this.props,Qe=we.styles,D=Qe===void 0?{}:Qe,Ue=we.className,Ct=Ue===void 0?"":Ue,ut=(0,R.default)((0,W.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},D));return _.default.createElement("div",{style:ut.picker,className:"photoshop-picker "+Ct},_.default.createElement("div",{style:ut.head},this.props.header),_.default.createElement("div",{style:ut.body,className:"flexbox-fix"},_.default.createElement("div",{style:ut.saturation},_.default.createElement(Y.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:te.default,onChange:this.props.onChange})),_.default.createElement("div",{style:ut.hue},_.default.createElement(Y.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:ee.default,onChange:this.props.onChange})),_.default.createElement("div",{style:ut.controls},_.default.createElement("div",{style:ut.top,className:"flexbox-fix"},_.default.createElement("div",{style:ut.previews},_.default.createElement(q.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),_.default.createElement("div",{style:ut.actions},_.default.createElement(se.default,{label:"OK",onClick:this.props.onAccept,active:!0}),_.default.createElement(se.default,{label:"Cancel",onClick:this.props.onCancel}),_.default.createElement(ne.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),_e}(_.default.Component);L.propTypes={header:A.default.string,styles:A.default.object},L.defaultProps={header:"Color Picker",styles:{}},P.default=(0,Y.ColorWrap)(L)},FlHB:function(le,P,h){"use strict";h.d(P,"a",function(){return Je});var I=h("o0o1"),m=h.n(I),_=h("yXPU"),M=h.n(_),A=h("yG8O"),G=h.n(A),R=h("lwsE"),X=h.n(R),W=h("W8MJ"),Y=h.n(W),K=h("U+yc"),ne=h.n(K),ae=h("1ABj"),te=h.n(ae),ce=h("4cb6"),ee=h.n(ce),H=h("+uE7"),se=h("+xCn"),re=h("94HZ"),q,ye,ue,ve,pe,L,ge,_e,Te,we,Qe,D,Ue;function Ct(Vt,Be){var ie;if(typeof Symbol=="undefined"||Vt[Symbol.iterator]==null){if(Array.isArray(Vt)||(ie=ut(Vt))||Be&&Vt&&typeof Vt.length=="number"){ie&&(Vt=ie);var un=0,rn=function(){};return{s:rn,n:function(){return un>=Vt.length?{done:!0}:{done:!1,value:Vt[un++]}},e:function(Jt){throw Jt},f:rn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rr=!0,Pt=!1,Tn;return{s:function(){ie=Vt[Symbol.iterator]()},n:function(){var Jt=ie.next();return rr=Jt.done,Jt},e:function(Jt){Pt=!0,Tn=Jt},f:function(){try{!rr&&ie.return!=null&&ie.return()}finally{if(Pt)throw Tn}}}}function ut(Vt,Be){if(!!Vt){if(typeof Vt=="string")return Nt(Vt,Be);var ie=Object.prototype.toString.call(Vt).slice(8,-1);if(ie==="Object"&&Vt.constructor&&(ie=Vt.constructor.name),ie==="Map"||ie==="Set")return Array.from(Vt);if(ie==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ie))return Nt(Vt,Be)}}function Nt(Vt,Be){(Be==null||Be>Vt.length)&&(Be=Vt.length);for(var ie=0,un=new Array(Be);ie<Be;ie++)un[ie]=Vt[ie];return un}var Kt={NONE:0,ENCODE:1,HIGHLIGHT:2},Je=(q=Object(ce.injectable)(),ye=Object(ce.inject)(H.a.RenderEngine),ue=Object(ce.inject)(H.a.ResourcePool),ve=Object(ce.inject)(H.a.RenderPassFactory),pe=Object(ce.inject)(H.a.MeshComponentManager),q(L=(ge=(Ue=D=function(){function Vt(){var Be=this;X()(this,Vt),G()(this,"engine",_e,this),G()(this,"resourcePool",Te,this),G()(this,"renderPassFactory",we,this),G()(this,"mesh",Qe,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(ie,un,rn){var rr=ie.createRenderTarget(un,"picking fbo",{width:1,height:1});rn.data={output:un.write(ie,rr)},un.hasSideEffect=!0},this.execute=function(){var ie=M()(m.a.mark(function un(rn,rr,Pt){var Tn,ur,Jt;return m.a.wrap(function(Mn){for(;;)switch(Mn.prev=Mn.next){case 0:if(Be.views=Pt,!Be.alreadyInRendering){Mn.next=3;break}return Mn.abrupt("return");case 3:Tn=Ct(Pt);try{for(Jt=function(){var lt=ur.value,Tt=lt.getViewport(),st=Tt.width,At=Tt.height;Be.alreadyInRendering=!0;var Ot=rn.getResourceNode(rr.data.output);Be.pickingFBO=Be.resourcePool.getOrCreateResource(Ot.resource),Be.pickingFBO.resize({width:st,height:At}),Be.engine.useFramebuffer(Be.pickingFBO,function(){Be.engine.clear({framebuffer:Be.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var dt=Be.renderPassFactory(re.a.IDENTIFIER),at=[],T=lt.getScene(),bn=Ct(T.getEntities()),an;try{for(bn.s();!(an=bn.n()).done;){var Jn=an.value,Qn=Be.mesh.getComponentByEntity(Jn),De=Qn.material;De.setUniform("u_PickingStage",Kt.ENCODE),at.push(Qn)}}catch(be){bn.e(be)}finally{bn.f()}dt.renderView(lt),at.forEach(function(be){var Xe=be.material;Xe.setUniform("u_PickingStage",Kt.HIGHLIGHT)}),Be.alreadyInRendering=!1})},Tn.s();!(ur=Tn.n()).done;)Jt()}catch(En){Tn.e(En)}finally{Tn.f()}case 5:case"end":return Mn.stop()}},un)}));return function(un,rn,rr){return ie.apply(this,arguments)}}(),this.pick=function(ie,un){var rn=ie.x,rr=ie.y,Pt=Be.engine,Tn=Pt.readPixels,ur=Pt.useFramebuffer,Jt=un.getViewport(),fn=Jt.width,Mn=Jt.height,En=rn*window.devicePixelRatio,lt=rr*window.devicePixelRatio;if(!(En>fn||En<0||lt>Mn||lt<0)){var Tt,st;return ur(Be.pickingFBO,function(){Tt=Tn({x:Math.round(En),y:Math.round(Mn-(rr+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Be.pickingFBO}),(Tt[0]!==0||Tt[1]!==0||Tt[2]!==0)&&(st=Object(se.a)(Tt),Be.highlightEnabled&&Be.highlightPickedFeature(Tt,un))}),st}}}return Y()(Vt,[{key:"enableHighlight",value:function(ie){this.highlightEnabled=ie}},{key:"setHighlightColor",value:function(ie){this.highlightColor=ie}},{key:"highlightPickedFeature",value:function(ie,un){if(ie){var rn=Ct(un.getScene().getEntities()),rr;try{for(rn.s();!(rr=rn.n()).done;){var Pt=rr.value,Tn=this.mesh.getComponentByEntity(Pt),ur=Tn.material;ur.setUniform("u_PickingStage",Kt.HIGHLIGHT),ur.setUniform("u_PickingColor",[ie[0],ie[1],ie[2]]),ur.setUniform("u_HighlightColor",this.highlightColor)}}catch(Jt){rn.e(Jt)}finally{rn.f()}}}}]),Vt}(),D.IDENTIFIER="PixelPicking Pass",Ue),_e=ne()(ge.prototype,"engine",[ye],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=ne()(ge.prototype,"resourcePool",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=ne()(ge.prototype,"renderPassFactory",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe=ne()(ge.prototype,"mesh",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge))||L)},G3dp:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="EditOutlined";var R=P.a=m.forwardRef(G)},G9t4:function(le,P,h){},GXnB:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Metadata=void 0;var I=h("xfSm"),m=function(){function _(M,A){this.key=M,this.value=A}return _.prototype.toString=function(){return this.key===I.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},_}();P.Metadata=m},"Gc+X":function(le,P,h){"use strict";h.d(P,"a",function(){return H});var I=h("lwsE"),m=h.n(I),_=h("W8MJ"),M=h.n(_),A=h("PJYZ"),G=h.n(A),R=h("7W2i"),X=h.n(R),W=h("a1gu"),Y=h.n(W),K=h("Nsbk"),ne=h.n(K),ae=h("IOcx"),te=h("oDt1");function ce(se){var re=ee();return function(){var ye=ne()(se),ue;if(re){var ve=ne()(this).constructor;ue=Reflect.construct(ye,arguments,ve)}else ue=ye.apply(this,arguments);return Y()(this,ue)}}function ee(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(se){return!1}}var H=function(se){X()(q,se);var re=ce(q);function q(ye){var ue;return m()(this,q),ue=re.call(this,ye),ue.dirtyFlag=void 0,ue.localDirtyFlag=void 0,ue.parent=null,ue.localPosition=ae.d.fromValues(0,0,0),ue.localRotation=ae.c.fromValues(0,0,0,1),ue.localScale=ae.d.fromValues(1,1,1),ue.localTransform=ae.b.create(),ue.position=ae.d.fromValues(0,0,0),ue.rotation=ae.c.fromValues(0,0,0,1),ue.scaling=ae.d.fromValues(1,1,1),ue.worldTransform=ae.b.create(),ue.matrixTransform=function(){var ve=ae.b.create();return function(pe){ae.b.multiply(ve,ue.getLocalTransform(),pe),ae.b.getScaling(ue.localScale,ve),ae.b.getTranslation(ue.localPosition,ve),ae.b.getRotation(ue.localRotation,ve)}}(),ue.rotateRollPitchYaw=function(){var ve=ae.c.create(),pe=ae.c.create(),L=ae.c.create();return function(ge,_e,Te){ue.setDirty(),ae.c.fromEuler(ve,ge,0,0),ae.c.fromEuler(pe,0,_e,0),ae.c.fromEuler(L,0,0,Te),ae.c.multiply(ue.localRotation,ve,ue.localRotation),ae.c.multiply(ue.localRotation,ue.localRotation,pe),ae.c.multiply(ue.localRotation,L,ue.localRotation),ae.c.normalize(ue.localRotation,ue.localRotation)}}(),ue.lerp=function(){var ve=ae.d.create(),pe=ae.c.create(),L=ae.d.create(),ge=ae.d.create(),_e=ae.c.create(),Te=ae.d.create();return function(we,Qe,D){ue.setDirty(),ae.b.getScaling(ve,we.worldTransform),ae.b.getTranslation(L,we.worldTransform),ae.b.getRotation(pe,we.worldTransform),ae.b.getScaling(ge,Qe.worldTransform),ae.b.getTranslation(Te,Qe.worldTransform),ae.b.getRotation(_e,Qe.worldTransform),ae.d.lerp(ue.localScale,ve,ge,D),ae.c.slerp(ue.localRotation,pe,_e,D),ae.d.lerp(ue.localPosition,L,Te,D)}}(),ue.translate=function(){var ve=ae.d.create();return function(pe){return ae.d.add(ve,ue.getPosition(),pe),ue.setPosition(ve),ue.setDirty(!0),G()(ue)}}(),ue.translateLocal=function(){return function(ve){return ae.d.transformQuat(ve,ve,ue.localRotation),ae.d.add(ue.localPosition,ue.localPosition,ve),ue.setLocalDirty(!0),G()(ue)}}(),ue.setPosition=function(){var ve=ae.b.create();return function(pe){return ue.position=pe,ue.setLocalDirty(!0),ue.parent===null?ae.d.copy(ue.localPosition,pe):(ae.b.copy(ve,ue.parent.worldTransform),ae.b.invert(ve,ve),ae.d.transformMat4(ue.localPosition,pe,ve)),G()(ue)}}(),ue.rotate=function(){var ve=ae.c.create();return function(pe){if(ue.parent===null)ae.c.multiply(ue.localRotation,ue.localRotation,pe),ae.c.normalize(ue.localRotation,ue.localRotation);else{var L=ue.getRotation(),ge=ue.parent.getRotation();ae.c.copy(ve,ge),ae.c.invert(ve,ve),ae.c.multiply(ve,ve,pe),ae.c.multiply(ue.localRotation,pe,L),ae.c.normalize(ue.localRotation,ue.localRotation)}return ue.setLocalDirty(),G()(ue)}}(),ue.rotateLocal=function(){return function(ve){return ae.c.multiply(ue.localRotation,ue.localRotation,ve),ae.c.normalize(ue.localRotation,ue.localRotation),ue.setLocalDirty(!0),G()(ue)}}(),ue.setRotation=function(){var ve=ae.c.create();return function(pe){return ue.parent===null?ae.c.copy(ue.localRotation,pe):(ae.c.copy(ve,ue.parent.getRotation()),ae.c.invert(ve,ve),ae.c.copy(ue.localRotation,ve),ae.c.mul(ue.localRotation,ue.localRotation,pe)),ue.setLocalDirty(!0),G()(ue)}}(),ue}return M()(q,[{key:"setLocalPosition",value:function(ue){ae.d.copy(this.localPosition,ue),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(ue){ae.d.copy(this.localScale,ue),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(ue){return ae.c.copy(this.localRotation,ue),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;ue?this.dirtyFlag|=q.DIRTY:this.dirtyFlag&=~q.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;ue?(this.localDirtyFlag|=q.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~q.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(ae.b.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(ue){ae.b.multiply(this.worldTransform,ue.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),ae.b.getScaling(this.localScale,this.worldTransform),ae.b.getTranslation(this.localPosition,this.worldTransform),ae.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=ae.d.fromValues(0,0,0),this.localRotation=ae.c.fromValues(0,0,0,1),this.localScale=ae.d.fromValues(1,1,1)}},{key:"scaleLocal",value:function(ue){return this.setLocalDirty(),ae.d.multiply(this.localScale,this.localScale,ue),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(ae.b.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return ae.b.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return ae.b.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return ae.b.getScaling(this.scaling,this.worldTransform),this.scaling}}]),q}(te.a);H.DIRTY=1<<0},GiOz:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SketchFields=void 0;var I=h("q1tI"),m=X(I),_=h("/FUP"),M=X(_),A=h("p8yl"),G=X(A),R=h("TM95");function X(Y){return Y&&Y.__esModule?Y:{default:Y}}var W=P.SketchFields=function(K){var ne=K.onChange,ae=K.rgb,te=K.hsl,ce=K.hex,ee=K.disableAlpha,H=(0,M.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:ee}),se=function(q,ye){q.hex?G.default.isValidHex(q.hex)&&ne({hex:q.hex,source:"hex"},ye):q.r||q.g||q.b?ne({r:q.r||ae.r,g:q.g||ae.g,b:q.b||ae.b,a:ae.a,source:"rgb"},ye):q.a&&(q.a<0?q.a=0:q.a>100&&(q.a=100),q.a/=100,ne({h:te.h,s:te.s,l:te.l,a:q.a,source:"rgb"},ye))};return m.default.createElement("div",{style:H.fields,className:"flexbox-fix"},m.default.createElement("div",{style:H.double},m.default.createElement(R.EditableInput,{style:{input:H.input,label:H.label},label:"hex",value:ce.replace("#",""),onChange:se})),m.default.createElement("div",{style:H.single},m.default.createElement(R.EditableInput,{style:{input:H.input,label:H.label},label:"r",value:ae.r,onChange:se,dragLabel:"true",dragMax:"255"})),m.default.createElement("div",{style:H.single},m.default.createElement(R.EditableInput,{style:{input:H.input,label:H.label},label:"g",value:ae.g,onChange:se,dragLabel:"true",dragMax:"255"})),m.default.createElement("div",{style:H.single},m.default.createElement(R.EditableInput,{style:{input:H.input,label:H.label},label:"b",value:ae.b,onChange:se,dragLabel:"true",dragMax:"255"})),m.default.createElement("div",{style:H.alpha},m.default.createElement(R.EditableInput,{style:{input:H.input,label:H.label},label:"a",value:Math.round(ae.a*100),onChange:se,dragLabel:"true",dragMax:"100"})))};P.default=W},Gj0h:function(le,P,h){"use strict";h.d(P,"AST_TOKEN_TYPES",function(){return we}),h.d(P,"STORAGE_CLASS",function(){return D}),h.d(P,"Target",function(){return Ue}),h.d(P,"DefineValuePlaceholder",function(){return Ct});var I=h("mNvP"),m=h.n(I),_=h("oDt1"),M=h("z5Mu"),A=h("0arJ"),G=h("4dNS"),R=h("ph3A"),X=h("RlxE"),W=h("baXp"),Y=h("6B+r"),K=h("kfnj"),ne=h("FlHB"),ae=h("tyuB"),te=h("IQ25"),ce=h("BFph"),ee=h("Gc+X"),H=h("9y2T");h.d(P,"createEntity",function(){return H.b});var se=h("+uE7");h.d(P,"IDENTIFIER",function(){return se.a});var re=h("OqSR");h.d(P,"createWorldContainer",function(){return re.a});var q=h("Ssa2");h.d(P,"generateAABBFromVertices",function(){return q.a});var ye=h("ljNz");h.d(P,"isSafari",function(){return ye.a});var ue=h("8jh/"),ve=h("48hD");h.d(P,"AABB",function(){return ve.a}),h.d(P,"Frustum",function(){return ve.b});var pe=h("4XUm");h.o(pe,"gl")&&h.d(P,"gl",function(){return pe.gl});var L=h("FXSy"),ge=h.n(L);h.o(L,"gl")&&h.d(P,"gl",function(){return L.gl});var _e=h("Yydy"),Te=h.n(_e);h.o(_e,"gl")&&h.d(P,"gl",function(){return _e.gl}),h.o(pe,"gl")&&h.d(P,"gl",function(){return pe.gl});var we;(function(ut){ut.Void="Void",ut.Boolean="Boolean",ut.Float="Float",ut.Uint32="Uint32",ut.Int32="Int32",ut.Vector="Vector",ut.Vector2Float="vec2<f32>",ut.Vector3Float="vec3<f32>",ut.Vector4Float="vec4<f32>",ut.Vector2Boolean="vec2<bool>",ut.Vector3Boolean="vec3<bool>",ut.Vector4Boolean="vec4<bool>",ut.Vector2Uint="vec2<u32>",ut.Vector3Uint="vec3<u32>",ut.Vector4Uint="vec4<u32>",ut.Vector2Int="vec2<i32>",ut.Vector3Int="vec3<i32>",ut.Vector4Int="vec4<i32>",ut.Matrix="Matrix",ut.Matrix3x3Float="mat3x3<f32>",ut.Matrix4x4Float="mat4x4<i32>",ut.Struct="Struct",ut.FloatArray="Float[]",ut.Vector4FloatArray="vec4<f32>[]"})(we||(we={}));var Qe;(function(ut){ut.Program="Program",ut.Identifier="Identifier",ut.VariableDeclaration="VariableDeclaration",ut.BlockStatement="BlockStatement",ut.ReturnStatement="ReturnStatement",ut.FunctionDeclaration="FunctionDeclaration",ut.VariableDeclarator="VariableDeclarator",ut.AssignmentExpression="AssignmentExpression",ut.LogicalExpression="LogicalExpression",ut.BinaryExpression="BinaryExpression",ut.ArrayExpression="ArrayExpression",ut.UnaryExpression="UnaryExpression",ut.UpdateExpression="UpdateExpression",ut.FunctionExpression="FunctionExpression",ut.MemberExpression="MemberExpression",ut.ConditionalExpression="ConditionalExpression",ut.ExpressionStatement="ExpressionStatement",ut.CallExpression="CallExpression",ut.NumThreadStatement="NumThreadStatement",ut.StorageStatement="StorageStatement",ut.DoWhileStatement="DoWhileStatement",ut.WhileStatement="WhileStatement",ut.ForStatement="ForStatement",ut.BreakStatement="BreakStatement",ut.ContinueStatement="ContinueStatement",ut.IfStatement="IfStatement",ut.ImportedFunctionStatement="ImportedFunctionStatement"})(Qe||(Qe={}));var D;(function(ut){ut.Input="Input",ut.Output="Output",ut.Uniform="Uniform",ut.Workgroup="Workgroup",ut.UniformConstant="UniformConstant",ut.Image="Image",ut.StorageBuffer="StorageBuffer",ut.Private="Private",ut.Function="Function"})(D||(D={}));var Ue;(function(ut){ut.GLSL100="GLSL100",ut.GLSL450="GLSL450",ut.WGSL="WGSL"})(Ue||(Ue={}));var Ct="__DefineValuePlaceholder__"},HTXX:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Sketch=void 0;var I=Object.assign||function(H){for(var se=1;se<arguments.length;se++){var re=arguments[se];for(var q in re)Object.prototype.hasOwnProperty.call(re,q)&&(H[q]=re[q])}return H},m=h("q1tI"),_=ce(m),M=h("17x9"),A=ce(M),G=h("/FUP"),R=ce(G),X=h("QkVN"),W=ce(X),Y=h("TM95"),K=h("GiOz"),ne=ce(K),ae=h("eHBW"),te=ce(ae);function ce(H){return H&&H.__esModule?H:{default:H}}var ee=P.Sketch=function(se){var re=se.width,q=se.rgb,ye=se.hex,ue=se.hsv,ve=se.hsl,pe=se.onChange,L=se.onSwatchHover,ge=se.disableAlpha,_e=se.presetColors,Te=se.renderers,we=se.styles,Qe=we===void 0?{}:we,D=se.className,Ue=D===void 0?"":D,Ct=(0,R.default)((0,W.default)({default:I({picker:{width:re,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+q.r+","+q.g+","+q.b+","+q.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},Qe),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},Qe),{disableAlpha:ge});return _.default.createElement("div",{style:Ct.picker,className:"sketch-picker "+Ue},_.default.createElement("div",{style:Ct.saturation},_.default.createElement(Y.Saturation,{style:Ct.Saturation,hsl:ve,hsv:ue,onChange:pe})),_.default.createElement("div",{style:Ct.controls,className:"flexbox-fix"},_.default.createElement("div",{style:Ct.sliders},_.default.createElement("div",{style:Ct.hue},_.default.createElement(Y.Hue,{style:Ct.Hue,hsl:ve,onChange:pe})),_.default.createElement("div",{style:Ct.alpha},_.default.createElement(Y.Alpha,{style:Ct.Alpha,rgb:q,hsl:ve,renderers:Te,onChange:pe}))),_.default.createElement("div",{style:Ct.color},_.default.createElement(Y.Checkboard,null),_.default.createElement("div",{style:Ct.activeColor}))),_.default.createElement(ne.default,{rgb:q,hsl:ve,hex:ye,onChange:pe,disableAlpha:ge}),_.default.createElement(te.default,{colors:_e,onClick:pe,onSwatchHover:L}))};ee.propTypes={disableAlpha:A.default.bool,width:A.default.oneOfType([A.default.string,A.default.number]),styles:A.default.object},ee.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},P.default=(0,Y.ColorWrap)(ee)},HlQe:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Hue=void 0;var I=function(){function te(ce,ee){for(var H=0;H<ee.length;H++){var se=ee[H];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(ce,se.key,se)}}return function(ce,ee,H){return ee&&te(ce.prototype,ee),H&&te(ce,H),ce}}(),m=h("q1tI"),_=W(m),M=h("/FUP"),A=W(M),G=h("srvI"),R=X(G);function X(te){if(te&&te.__esModule)return te;var ce={};if(te!=null)for(var ee in te)Object.prototype.hasOwnProperty.call(te,ee)&&(ce[ee]=te[ee]);return ce.default=te,ce}function W(te){return te&&te.__esModule?te:{default:te}}function Y(te,ce){if(!(te instanceof ce))throw new TypeError("Cannot call a class as a function")}function K(te,ce){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:te}function ne(te,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);te.prototype=Object.create(ce&&ce.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(te,ce):te.__proto__=ce)}var ae=P.Hue=function(te){ne(ce,te);function ce(){var ee,H,se,re;Y(this,ce);for(var q=arguments.length,ye=Array(q),ue=0;ue<q;ue++)ye[ue]=arguments[ue];return re=(H=(se=K(this,(ee=ce.__proto__||Object.getPrototypeOf(ce)).call.apply(ee,[this].concat(ye))),se),se.handleChange=function(ve){var pe=R.calculateChange(ve,se.props.direction,se.props.hsl,se.container);pe&&typeof se.props.onChange=="function"&&se.props.onChange(pe,ve)},se.handleMouseDown=function(ve){se.handleChange(ve),window.addEventListener("mousemove",se.handleChange),window.addEventListener("mouseup",se.handleMouseUp)},se.handleMouseUp=function(){se.unbindEventListeners()},H),K(se,re)}return I(ce,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var H=this,se=this.props.direction,re=se===void 0?"horizontal":se,q=(0,A.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:re==="vertical"});return _.default.createElement("div",{style:q.hue},_.default.createElement("div",{className:"hue-"+re,style:q.container,ref:function(ue){return H.container=ue},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},_.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),_.default.createElement("div",{style:q.pointer},this.props.pointer?_.default.createElement(this.props.pointer,this.props):_.default.createElement("div",{style:q.slider}))))}}]),ce}(m.PureComponent||m.Component);P.default=ae},HpQ9:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ContainerSnapshot=void 0;var I=function(){function m(){}return m.of=function(_,M){var A=new m;return A.bindings=_,A.middleware=M,A},m}();P.ContainerSnapshot=I},IOcx:function(le,P,h){"use strict";h.d(P,"a",function(){return I}),h.d(P,"b",function(){return m}),h.d(P,"c",function(){return A}),h.d(P,"d",function(){return _}),h.d(P,"e",function(){return M});var I={};h.r(I),h.d(I,"create",function(){return ae}),h.d(I,"fromMat4",function(){return te}),h.d(I,"clone",function(){return ce}),h.d(I,"copy",function(){return ee}),h.d(I,"fromValues",function(){return H}),h.d(I,"set",function(){return se}),h.d(I,"identity",function(){return re}),h.d(I,"transpose",function(){return q}),h.d(I,"invert",function(){return ye}),h.d(I,"adjoint",function(){return ue}),h.d(I,"determinant",function(){return ve}),h.d(I,"multiply",function(){return pe}),h.d(I,"translate",function(){return L}),h.d(I,"rotate",function(){return ge}),h.d(I,"scale",function(){return _e}),h.d(I,"fromTranslation",function(){return Te}),h.d(I,"fromRotation",function(){return we}),h.d(I,"fromScaling",function(){return Qe}),h.d(I,"fromMat2d",function(){return D}),h.d(I,"fromQuat",function(){return Ue}),h.d(I,"normalFromMat4",function(){return Ct}),h.d(I,"projection",function(){return ut}),h.d(I,"str",function(){return Nt}),h.d(I,"frob",function(){return Kt}),h.d(I,"add",function(){return Je}),h.d(I,"subtract",function(){return Vt}),h.d(I,"multiplyScalar",function(){return Be}),h.d(I,"multiplyScalarAndAdd",function(){return ie}),h.d(I,"exactEquals",function(){return un}),h.d(I,"equals",function(){return rn}),h.d(I,"mul",function(){return rr}),h.d(I,"sub",function(){return Pt});var m={};h.r(m),h.d(m,"create",function(){return Tn}),h.d(m,"clone",function(){return ur}),h.d(m,"copy",function(){return Jt}),h.d(m,"fromValues",function(){return fn}),h.d(m,"set",function(){return Mn}),h.d(m,"identity",function(){return En}),h.d(m,"transpose",function(){return lt}),h.d(m,"invert",function(){return Tt}),h.d(m,"adjoint",function(){return st}),h.d(m,"determinant",function(){return At}),h.d(m,"multiply",function(){return Ot}),h.d(m,"translate",function(){return dt}),h.d(m,"scale",function(){return at}),h.d(m,"rotate",function(){return T}),h.d(m,"rotateX",function(){return bn}),h.d(m,"rotateY",function(){return an}),h.d(m,"rotateZ",function(){return Jn}),h.d(m,"fromTranslation",function(){return Qn}),h.d(m,"fromScaling",function(){return De}),h.d(m,"fromRotation",function(){return be}),h.d(m,"fromXRotation",function(){return Xe}),h.d(m,"fromYRotation",function(){return Yt}),h.d(m,"fromZRotation",function(){return ln}),h.d(m,"fromRotationTranslation",function(){return lr}),h.d(m,"fromQuat2",function(){return Hr}),h.d(m,"getTranslation",function(){return ar}),h.d(m,"getScaling",function(){return mr}),h.d(m,"getRotation",function(){return yr}),h.d(m,"fromRotationTranslationScale",function(){return kr}),h.d(m,"fromRotationTranslationScaleOrigin",function(){return Ur}),h.d(m,"fromQuat",function(){return Va}),h.d(m,"frustum",function(){return da}),h.d(m,"perspectiveNO",function(){return Ji}),h.d(m,"perspective",function(){return jo}),h.d(m,"perspectiveZO",function(){return ri}),h.d(m,"perspectiveFromFieldOfView",function(){return ji}),h.d(m,"orthoNO",function(){return Li}),h.d(m,"ortho",function(){return Aa}),h.d(m,"orthoZO",function(){return ki}),h.d(m,"lookAt",function(){return mi}),h.d(m,"targetTo",function(){return na}),h.d(m,"str",function(){return Ki}),h.d(m,"frob",function(){return go}),h.d(m,"add",function(){return ra}),h.d(m,"subtract",function(){return di}),h.d(m,"multiplyScalar",function(){return So}),h.d(m,"multiplyScalarAndAdd",function(){return si}),h.d(m,"exactEquals",function(){return Si}),h.d(m,"equals",function(){return yi}),h.d(m,"mul",function(){return zi}),h.d(m,"sub",function(){return Ko});var _={};h.r(_),h.d(_,"create",function(){return To}),h.d(_,"clone",function(){return po}),h.d(_,"length",function(){return Yo}),h.d(_,"fromValues",function(){return Us}),h.d(_,"copy",function(){return Wu}),h.d(_,"set",function(){return Lo}),h.d(_,"add",function(){return $u}),h.d(_,"subtract",function(){return iu}),h.d(_,"multiply",function(){return Zo}),h.d(_,"divide",function(){return Vs}),h.d(_,"ceil",function(){return ou}),h.d(_,"floor",function(){return Is}),h.d(_,"min",function(){return Hs}),h.d(_,"max",function(){return Ws}),h.d(_,"round",function(){return su}),h.d(_,"scale",function(){return nn}),h.d(_,"scaleAndAdd",function(){return On}),h.d(_,"distance",function(){return vr}),h.d(_,"squaredDistance",function(){return It}),h.d(_,"squaredLength",function(){return jt}),h.d(_,"negate",function(){return Bn}),h.d(_,"inverse",function(){return pn}),h.d(_,"normalize",function(){return on}),h.d(_,"dot",function(){return qt}),h.d(_,"cross",function(){return mn}),h.d(_,"lerp",function(){return vn}),h.d(_,"hermite",function(){return hr}),h.d(_,"bezier",function(){return Nn}),h.d(_,"random",function(){return Nr}),h.d(_,"transformMat4",function(){return Er}),h.d(_,"transformMat3",function(){return Rr}),h.d(_,"transformQuat",function(){return xr}),h.d(_,"rotateX",function(){return Vr}),h.d(_,"rotateY",function(){return La}),h.d(_,"rotateZ",function(){return Pr}),h.d(_,"angle",function(){return Zr}),h.d(_,"zero",function(){return wr}),h.d(_,"str",function(){return ea}),h.d(_,"exactEquals",function(){return Dr}),h.d(_,"equals",function(){return ha}),h.d(_,"sub",function(){return ma}),h.d(_,"mul",function(){return Ui}),h.d(_,"div",function(){return Mo}),h.d(_,"dist",function(){return uu}),h.d(_,"sqrDist",function(){return ho}),h.d(_,"len",function(){return $s}),h.d(_,"sqrLen",function(){return Rs}),h.d(_,"forEach",function(){return Xu});var M={};h.r(M),h.d(M,"create",function(){return sc}),h.d(M,"clone",function(){return uc}),h.d(M,"fromValues",function(){return tf}),h.d(M,"copy",function(){return Ns}),h.d(M,"set",function(){return nf}),h.d(M,"add",function(){return Ku}),h.d(M,"subtract",function(){return Rl}),h.d(M,"multiply",function(){return lu}),h.d(M,"divide",function(){return Nl}),h.d(M,"ceil",function(){return Gf}),h.d(M,"floor",function(){return jl}),h.d(M,"min",function(){return lc}),h.d(M,"max",function(){return rf}),h.d(M,"round",function(){return af}),h.d(M,"scale",function(){return wi}),h.d(M,"scaleAndAdd",function(){return hi}),h.d(M,"distance",function(){return ol}),h.d(M,"squaredDistance",function(){return gs}),h.d(M,"length",function(){return xu}),h.d(M,"squaredLength",function(){return sl}),h.d(M,"negate",function(){return Ll}),h.d(M,"inverse",function(){return zf}),h.d(M,"normalize",function(){return cu}),h.d(M,"dot",function(){return cc}),h.d(M,"cross",function(){return Qi}),h.d(M,"lerp",function(){return _l}),h.d(M,"random",function(){return Su}),h.d(M,"transformMat4",function(){return fu}),h.d(M,"transformQuat",function(){return du}),h.d(M,"zero",function(){return _o}),h.d(M,"str",function(){return U}),h.d(M,"exactEquals",function(){return S}),h.d(M,"equals",function(){return z}),h.d(M,"sub",function(){return V}),h.d(M,"mul",function(){return oe}),h.d(M,"div",function(){return Ce}),h.d(M,"dist",function(){return Ee}),h.d(M,"sqrDist",function(){return Ge}),h.d(M,"len",function(){return it}),h.d(M,"sqrLen",function(){return yt}),h.d(M,"forEach",function(){return tn});var A={};h.r(A),h.d(A,"create",function(){return wn}),h.d(A,"identity",function(){return cr}),h.d(A,"setAxisAngle",function(){return en}),h.d(A,"getAxisAngle",function(){return zn}),h.d(A,"getAngle",function(){return ia}),h.d(A,"multiply",function(){return Fr}),h.d(A,"rotateX",function(){return bi}),h.d(A,"rotateY",function(){return Fo}),h.d(A,"rotateZ",function(){return Vi}),h.d(A,"calculateW",function(){return Ao}),h.d(A,"exp",function(){return oo}),h.d(A,"ln",function(){return va}),h.d(A,"pow",function(){return ps}),h.d(A,"slerp",function(){return ei}),h.d(A,"random",function(){return Ti}),h.d(A,"invert",function(){return Mi}),h.d(A,"conjugate",function(){return ul}),h.d(A,"fromMat3",function(){return eo}),h.d(A,"fromEuler",function(){return Jo}),h.d(A,"str",function(){return hu}),h.d(A,"clone",function(){return vu}),h.d(A,"fromValues",function(){return js}),h.d(A,"copy",function(){return Po}),h.d(A,"set",function(){return ms}),h.d(A,"add",function(){return ko}),h.d(A,"mul",function(){return mo}),h.d(A,"scale",function(){return Yu}),h.d(A,"dot",function(){return ys}),h.d(A,"lerp",function(){return ui}),h.d(A,"length",function(){return gu}),h.d(A,"len",function(){return as}),h.d(A,"squaredLength",function(){return Xs}),h.d(A,"sqrLen",function(){return of}),h.d(A,"normalize",function(){return Fl}),h.d(A,"exactEquals",function(){return fc}),h.d(A,"equals",function(){return Qo}),h.d(A,"rotationTo",function(){return Bl}),h.d(A,"sqlerp",function(){return Ls}),h.d(A,"setAxes",function(){return ll});var G=1e-6,R=typeof Float32Array!="undefined"?Float32Array:Array,X=Math.random;function W(b){R=b}var Y=Math.PI/180;function K(b){return b*Y}function ne(b,k){return Math.abs(b-k)<=G*Math.max(1,Math.abs(b),Math.abs(k))}Math.hypot||(Math.hypot=function(){for(var b=0,k=arguments.length;k--;)b+=arguments[k]*arguments[k];return Math.sqrt(b)});function ae(){var b=new R(9);return R!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[5]=0,b[6]=0,b[7]=0),b[0]=1,b[4]=1,b[8]=1,b}function te(b,k){return b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[4],b[4]=k[5],b[5]=k[6],b[6]=k[8],b[7]=k[9],b[8]=k[10],b}function ce(b){var k=new R(9);return k[0]=b[0],k[1]=b[1],k[2]=b[2],k[3]=b[3],k[4]=b[4],k[5]=b[5],k[6]=b[6],k[7]=b[7],k[8]=b[8],k}function ee(b,k){return b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[3],b[4]=k[4],b[5]=k[5],b[6]=k[6],b[7]=k[7],b[8]=k[8],b}function H(b,k,J,he,Oe,Re,Ke,qe,pt){var wt=new R(9);return wt[0]=b,wt[1]=k,wt[2]=J,wt[3]=he,wt[4]=Oe,wt[5]=Re,wt[6]=Ke,wt[7]=qe,wt[8]=pt,wt}function se(b,k,J,he,Oe,Re,Ke,qe,pt,wt){return b[0]=k,b[1]=J,b[2]=he,b[3]=Oe,b[4]=Re,b[5]=Ke,b[6]=qe,b[7]=pt,b[8]=wt,b}function re(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function q(b,k){if(b===k){var J=k[1],he=k[2],Oe=k[5];b[1]=k[3],b[2]=k[6],b[3]=J,b[5]=k[7],b[6]=he,b[7]=Oe}else b[0]=k[0],b[1]=k[3],b[2]=k[6],b[3]=k[1],b[4]=k[4],b[5]=k[7],b[6]=k[2],b[7]=k[5],b[8]=k[8];return b}function ye(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=k[4],qe=k[5],pt=k[6],wt=k[7],zt=k[8],Fe=zt*Ke-qe*wt,Se=-zt*Re+qe*pt,He=wt*Re-Ke*pt,nt=J*Fe+he*Se+Oe*He;return nt?(nt=1/nt,b[0]=Fe*nt,b[1]=(-zt*he+Oe*wt)*nt,b[2]=(qe*he-Oe*Ke)*nt,b[3]=Se*nt,b[4]=(zt*J-Oe*pt)*nt,b[5]=(-qe*J+Oe*Re)*nt,b[6]=He*nt,b[7]=(-wt*J+he*pt)*nt,b[8]=(Ke*J-he*Re)*nt,b):null}function ue(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=k[4],qe=k[5],pt=k[6],wt=k[7],zt=k[8];return b[0]=Ke*zt-qe*wt,b[1]=Oe*wt-he*zt,b[2]=he*qe-Oe*Ke,b[3]=qe*pt-Re*zt,b[4]=J*zt-Oe*pt,b[5]=Oe*Re-J*qe,b[6]=Re*wt-Ke*pt,b[7]=he*pt-J*wt,b[8]=J*Ke-he*Re,b}function ve(b){var k=b[0],J=b[1],he=b[2],Oe=b[3],Re=b[4],Ke=b[5],qe=b[6],pt=b[7],wt=b[8];return k*(wt*Re-Ke*pt)+J*(-wt*Oe+Ke*qe)+he*(pt*Oe-Re*qe)}function pe(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=k[3],qe=k[4],pt=k[5],wt=k[6],zt=k[7],Fe=k[8],Se=J[0],He=J[1],nt=J[2],Pe=J[3],Ie=J[4],Ze=J[5],Lt=J[6],Zt=J[7],An=J[8];return b[0]=Se*he+He*Ke+nt*wt,b[1]=Se*Oe+He*qe+nt*zt,b[2]=Se*Re+He*pt+nt*Fe,b[3]=Pe*he+Ie*Ke+Ze*wt,b[4]=Pe*Oe+Ie*qe+Ze*zt,b[5]=Pe*Re+Ie*pt+Ze*Fe,b[6]=Lt*he+Zt*Ke+An*wt,b[7]=Lt*Oe+Zt*qe+An*zt,b[8]=Lt*Re+Zt*pt+An*Fe,b}function L(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=k[3],qe=k[4],pt=k[5],wt=k[6],zt=k[7],Fe=k[8],Se=J[0],He=J[1];return b[0]=he,b[1]=Oe,b[2]=Re,b[3]=Ke,b[4]=qe,b[5]=pt,b[6]=Se*he+He*Ke+wt,b[7]=Se*Oe+He*qe+zt,b[8]=Se*Re+He*pt+Fe,b}function ge(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=k[3],qe=k[4],pt=k[5],wt=k[6],zt=k[7],Fe=k[8],Se=Math.sin(J),He=Math.cos(J);return b[0]=He*he+Se*Ke,b[1]=He*Oe+Se*qe,b[2]=He*Re+Se*pt,b[3]=He*Ke-Se*he,b[4]=He*qe-Se*Oe,b[5]=He*pt-Se*Re,b[6]=wt,b[7]=zt,b[8]=Fe,b}function _e(b,k,J){var he=J[0],Oe=J[1];return b[0]=he*k[0],b[1]=he*k[1],b[2]=he*k[2],b[3]=Oe*k[3],b[4]=Oe*k[4],b[5]=Oe*k[5],b[6]=k[6],b[7]=k[7],b[8]=k[8],b}function Te(b,k){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=k[0],b[7]=k[1],b[8]=1,b}function we(b,k){var J=Math.sin(k),he=Math.cos(k);return b[0]=he,b[1]=J,b[2]=0,b[3]=-J,b[4]=he,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function Qe(b,k){return b[0]=k[0],b[1]=0,b[2]=0,b[3]=0,b[4]=k[1],b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function D(b,k){return b[0]=k[0],b[1]=k[1],b[2]=0,b[3]=k[2],b[4]=k[3],b[5]=0,b[6]=k[4],b[7]=k[5],b[8]=1,b}function Ue(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=J+J,qe=he+he,pt=Oe+Oe,wt=J*Ke,zt=he*Ke,Fe=he*qe,Se=Oe*Ke,He=Oe*qe,nt=Oe*pt,Pe=Re*Ke,Ie=Re*qe,Ze=Re*pt;return b[0]=1-Fe-nt,b[3]=zt-Ze,b[6]=Se+Ie,b[1]=zt+Ze,b[4]=1-wt-nt,b[7]=He-Pe,b[2]=Se-Ie,b[5]=He+Pe,b[8]=1-wt-Fe,b}function Ct(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=k[4],qe=k[5],pt=k[6],wt=k[7],zt=k[8],Fe=k[9],Se=k[10],He=k[11],nt=k[12],Pe=k[13],Ie=k[14],Ze=k[15],Lt=J*qe-he*Ke,Zt=J*pt-Oe*Ke,An=J*wt-Re*Ke,Un=he*pt-Oe*qe,Ln=he*wt-Re*qe,Wr=Oe*wt-Re*pt,Gr=zt*Pe-Fe*nt,Br=zt*Ie-Se*nt,Xr=zt*Ze-He*nt,_a=Fe*Ie-Se*Pe,ga=Fe*Ze-He*Pe,Na=Se*Ze-He*Ie,ta=Lt*Na-Zt*ga+An*_a+Un*Xr-Ln*Br+Wr*Gr;return ta?(ta=1/ta,b[0]=(qe*Na-pt*ga+wt*_a)*ta,b[1]=(pt*Xr-Ke*Na-wt*Br)*ta,b[2]=(Ke*ga-qe*Xr+wt*Gr)*ta,b[3]=(Oe*ga-he*Na-Re*_a)*ta,b[4]=(J*Na-Oe*Xr+Re*Br)*ta,b[5]=(he*Xr-J*ga-Re*Gr)*ta,b[6]=(Pe*Wr-Ie*Ln+Ze*Un)*ta,b[7]=(Ie*An-nt*Wr-Ze*Zt)*ta,b[8]=(nt*Ln-Pe*An+Ze*Lt)*ta,b):null}function ut(b,k,J){return b[0]=2/k,b[1]=0,b[2]=0,b[3]=0,b[4]=-2/J,b[5]=0,b[6]=-1,b[7]=1,b[8]=1,b}function Nt(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"}function Kt(b){return Math.hypot(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])}function Je(b,k,J){return b[0]=k[0]+J[0],b[1]=k[1]+J[1],b[2]=k[2]+J[2],b[3]=k[3]+J[3],b[4]=k[4]+J[4],b[5]=k[5]+J[5],b[6]=k[6]+J[6],b[7]=k[7]+J[7],b[8]=k[8]+J[8],b}function Vt(b,k,J){return b[0]=k[0]-J[0],b[1]=k[1]-J[1],b[2]=k[2]-J[2],b[3]=k[3]-J[3],b[4]=k[4]-J[4],b[5]=k[5]-J[5],b[6]=k[6]-J[6],b[7]=k[7]-J[7],b[8]=k[8]-J[8],b}function Be(b,k,J){return b[0]=k[0]*J,b[1]=k[1]*J,b[2]=k[2]*J,b[3]=k[3]*J,b[4]=k[4]*J,b[5]=k[5]*J,b[6]=k[6]*J,b[7]=k[7]*J,b[8]=k[8]*J,b}function ie(b,k,J,he){return b[0]=k[0]+J[0]*he,b[1]=k[1]+J[1]*he,b[2]=k[2]+J[2]*he,b[3]=k[3]+J[3]*he,b[4]=k[4]+J[4]*he,b[5]=k[5]+J[5]*he,b[6]=k[6]+J[6]*he,b[7]=k[7]+J[7]*he,b[8]=k[8]+J[8]*he,b}function un(b,k){return b[0]===k[0]&&b[1]===k[1]&&b[2]===k[2]&&b[3]===k[3]&&b[4]===k[4]&&b[5]===k[5]&&b[6]===k[6]&&b[7]===k[7]&&b[8]===k[8]}function rn(b,k){var J=b[0],he=b[1],Oe=b[2],Re=b[3],Ke=b[4],qe=b[5],pt=b[6],wt=b[7],zt=b[8],Fe=k[0],Se=k[1],He=k[2],nt=k[3],Pe=k[4],Ie=k[5],Ze=k[6],Lt=k[7],Zt=k[8];return Math.abs(J-Fe)<=G*Math.max(1,Math.abs(J),Math.abs(Fe))&&Math.abs(he-Se)<=G*Math.max(1,Math.abs(he),Math.abs(Se))&&Math.abs(Oe-He)<=G*Math.max(1,Math.abs(Oe),Math.abs(He))&&Math.abs(Re-nt)<=G*Math.max(1,Math.abs(Re),Math.abs(nt))&&Math.abs(Ke-Pe)<=G*Math.max(1,Math.abs(Ke),Math.abs(Pe))&&Math.abs(qe-Ie)<=G*Math.max(1,Math.abs(qe),Math.abs(Ie))&&Math.abs(pt-Ze)<=G*Math.max(1,Math.abs(pt),Math.abs(Ze))&&Math.abs(wt-Lt)<=G*Math.max(1,Math.abs(wt),Math.abs(Lt))&&Math.abs(zt-Zt)<=G*Math.max(1,Math.abs(zt),Math.abs(Zt))}var rr=pe,Pt=Vt;function Tn(){var b=new R(16);return R!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0),b[0]=1,b[5]=1,b[10]=1,b[15]=1,b}function ur(b){var k=new R(16);return k[0]=b[0],k[1]=b[1],k[2]=b[2],k[3]=b[3],k[4]=b[4],k[5]=b[5],k[6]=b[6],k[7]=b[7],k[8]=b[8],k[9]=b[9],k[10]=b[10],k[11]=b[11],k[12]=b[12],k[13]=b[13],k[14]=b[14],k[15]=b[15],k}function Jt(b,k){return b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[3],b[4]=k[4],b[5]=k[5],b[6]=k[6],b[7]=k[7],b[8]=k[8],b[9]=k[9],b[10]=k[10],b[11]=k[11],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15],b}function fn(b,k,J,he,Oe,Re,Ke,qe,pt,wt,zt,Fe,Se,He,nt,Pe){var Ie=new R(16);return Ie[0]=b,Ie[1]=k,Ie[2]=J,Ie[3]=he,Ie[4]=Oe,Ie[5]=Re,Ie[6]=Ke,Ie[7]=qe,Ie[8]=pt,Ie[9]=wt,Ie[10]=zt,Ie[11]=Fe,Ie[12]=Se,Ie[13]=He,Ie[14]=nt,Ie[15]=Pe,Ie}function Mn(b,k,J,he,Oe,Re,Ke,qe,pt,wt,zt,Fe,Se,He,nt,Pe,Ie){return b[0]=k,b[1]=J,b[2]=he,b[3]=Oe,b[4]=Re,b[5]=Ke,b[6]=qe,b[7]=pt,b[8]=wt,b[9]=zt,b[10]=Fe,b[11]=Se,b[12]=He,b[13]=nt,b[14]=Pe,b[15]=Ie,b}function En(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function lt(b,k){if(b===k){var J=k[1],he=k[2],Oe=k[3],Re=k[6],Ke=k[7],qe=k[11];b[1]=k[4],b[2]=k[8],b[3]=k[12],b[4]=J,b[6]=k[9],b[7]=k[13],b[8]=he,b[9]=Re,b[11]=k[14],b[12]=Oe,b[13]=Ke,b[14]=qe}else b[0]=k[0],b[1]=k[4],b[2]=k[8],b[3]=k[12],b[4]=k[1],b[5]=k[5],b[6]=k[9],b[7]=k[13],b[8]=k[2],b[9]=k[6],b[10]=k[10],b[11]=k[14],b[12]=k[3],b[13]=k[7],b[14]=k[11],b[15]=k[15];return b}function Tt(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=k[4],qe=k[5],pt=k[6],wt=k[7],zt=k[8],Fe=k[9],Se=k[10],He=k[11],nt=k[12],Pe=k[13],Ie=k[14],Ze=k[15],Lt=J*qe-he*Ke,Zt=J*pt-Oe*Ke,An=J*wt-Re*Ke,Un=he*pt-Oe*qe,Ln=he*wt-Re*qe,Wr=Oe*wt-Re*pt,Gr=zt*Pe-Fe*nt,Br=zt*Ie-Se*nt,Xr=zt*Ze-He*nt,_a=Fe*Ie-Se*Pe,ga=Fe*Ze-He*Pe,Na=Se*Ze-He*Ie,ta=Lt*Na-Zt*ga+An*_a+Un*Xr-Ln*Br+Wr*Gr;return ta?(ta=1/ta,b[0]=(qe*Na-pt*ga+wt*_a)*ta,b[1]=(Oe*ga-he*Na-Re*_a)*ta,b[2]=(Pe*Wr-Ie*Ln+Ze*Un)*ta,b[3]=(Se*Ln-Fe*Wr-He*Un)*ta,b[4]=(pt*Xr-Ke*Na-wt*Br)*ta,b[5]=(J*Na-Oe*Xr+Re*Br)*ta,b[6]=(Ie*An-nt*Wr-Ze*Zt)*ta,b[7]=(zt*Wr-Se*An+He*Zt)*ta,b[8]=(Ke*ga-qe*Xr+wt*Gr)*ta,b[9]=(he*Xr-J*ga-Re*Gr)*ta,b[10]=(nt*Ln-Pe*An+Ze*Lt)*ta,b[11]=(Fe*An-zt*Ln-He*Lt)*ta,b[12]=(qe*Br-Ke*_a-pt*Gr)*ta,b[13]=(J*_a-he*Br+Oe*Gr)*ta,b[14]=(Pe*Zt-nt*Un-Ie*Lt)*ta,b[15]=(zt*Un-Fe*Zt+Se*Lt)*ta,b):null}function st(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=k[4],qe=k[5],pt=k[6],wt=k[7],zt=k[8],Fe=k[9],Se=k[10],He=k[11],nt=k[12],Pe=k[13],Ie=k[14],Ze=k[15];return b[0]=qe*(Se*Ze-He*Ie)-Fe*(pt*Ze-wt*Ie)+Pe*(pt*He-wt*Se),b[1]=-(he*(Se*Ze-He*Ie)-Fe*(Oe*Ze-Re*Ie)+Pe*(Oe*He-Re*Se)),b[2]=he*(pt*Ze-wt*Ie)-qe*(Oe*Ze-Re*Ie)+Pe*(Oe*wt-Re*pt),b[3]=-(he*(pt*He-wt*Se)-qe*(Oe*He-Re*Se)+Fe*(Oe*wt-Re*pt)),b[4]=-(Ke*(Se*Ze-He*Ie)-zt*(pt*Ze-wt*Ie)+nt*(pt*He-wt*Se)),b[5]=J*(Se*Ze-He*Ie)-zt*(Oe*Ze-Re*Ie)+nt*(Oe*He-Re*Se),b[6]=-(J*(pt*Ze-wt*Ie)-Ke*(Oe*Ze-Re*Ie)+nt*(Oe*wt-Re*pt)),b[7]=J*(pt*He-wt*Se)-Ke*(Oe*He-Re*Se)+zt*(Oe*wt-Re*pt),b[8]=Ke*(Fe*Ze-He*Pe)-zt*(qe*Ze-wt*Pe)+nt*(qe*He-wt*Fe),b[9]=-(J*(Fe*Ze-He*Pe)-zt*(he*Ze-Re*Pe)+nt*(he*He-Re*Fe)),b[10]=J*(qe*Ze-wt*Pe)-Ke*(he*Ze-Re*Pe)+nt*(he*wt-Re*qe),b[11]=-(J*(qe*He-wt*Fe)-Ke*(he*He-Re*Fe)+zt*(he*wt-Re*qe)),b[12]=-(Ke*(Fe*Ie-Se*Pe)-zt*(qe*Ie-pt*Pe)+nt*(qe*Se-pt*Fe)),b[13]=J*(Fe*Ie-Se*Pe)-zt*(he*Ie-Oe*Pe)+nt*(he*Se-Oe*Fe),b[14]=-(J*(qe*Ie-pt*Pe)-Ke*(he*Ie-Oe*Pe)+nt*(he*pt-Oe*qe)),b[15]=J*(qe*Se-pt*Fe)-Ke*(he*Se-Oe*Fe)+zt*(he*pt-Oe*qe),b}function At(b){var k=b[0],J=b[1],he=b[2],Oe=b[3],Re=b[4],Ke=b[5],qe=b[6],pt=b[7],wt=b[8],zt=b[9],Fe=b[10],Se=b[11],He=b[12],nt=b[13],Pe=b[14],Ie=b[15],Ze=k*Ke-J*Re,Lt=k*qe-he*Re,Zt=k*pt-Oe*Re,An=J*qe-he*Ke,Un=J*pt-Oe*Ke,Ln=he*pt-Oe*qe,Wr=wt*nt-zt*He,Gr=wt*Pe-Fe*He,Br=wt*Ie-Se*He,Xr=zt*Pe-Fe*nt,_a=zt*Ie-Se*nt,ga=Fe*Ie-Se*Pe;return Ze*ga-Lt*_a+Zt*Xr+An*Br-Un*Gr+Ln*Wr}function Ot(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=k[3],qe=k[4],pt=k[5],wt=k[6],zt=k[7],Fe=k[8],Se=k[9],He=k[10],nt=k[11],Pe=k[12],Ie=k[13],Ze=k[14],Lt=k[15],Zt=J[0],An=J[1],Un=J[2],Ln=J[3];return b[0]=Zt*he+An*qe+Un*Fe+Ln*Pe,b[1]=Zt*Oe+An*pt+Un*Se+Ln*Ie,b[2]=Zt*Re+An*wt+Un*He+Ln*Ze,b[3]=Zt*Ke+An*zt+Un*nt+Ln*Lt,Zt=J[4],An=J[5],Un=J[6],Ln=J[7],b[4]=Zt*he+An*qe+Un*Fe+Ln*Pe,b[5]=Zt*Oe+An*pt+Un*Se+Ln*Ie,b[6]=Zt*Re+An*wt+Un*He+Ln*Ze,b[7]=Zt*Ke+An*zt+Un*nt+Ln*Lt,Zt=J[8],An=J[9],Un=J[10],Ln=J[11],b[8]=Zt*he+An*qe+Un*Fe+Ln*Pe,b[9]=Zt*Oe+An*pt+Un*Se+Ln*Ie,b[10]=Zt*Re+An*wt+Un*He+Ln*Ze,b[11]=Zt*Ke+An*zt+Un*nt+Ln*Lt,Zt=J[12],An=J[13],Un=J[14],Ln=J[15],b[12]=Zt*he+An*qe+Un*Fe+Ln*Pe,b[13]=Zt*Oe+An*pt+Un*Se+Ln*Ie,b[14]=Zt*Re+An*wt+Un*He+Ln*Ze,b[15]=Zt*Ke+An*zt+Un*nt+Ln*Lt,b}function dt(b,k,J){var he=J[0],Oe=J[1],Re=J[2],Ke,qe,pt,wt,zt,Fe,Se,He,nt,Pe,Ie,Ze;return k===b?(b[12]=k[0]*he+k[4]*Oe+k[8]*Re+k[12],b[13]=k[1]*he+k[5]*Oe+k[9]*Re+k[13],b[14]=k[2]*he+k[6]*Oe+k[10]*Re+k[14],b[15]=k[3]*he+k[7]*Oe+k[11]*Re+k[15]):(Ke=k[0],qe=k[1],pt=k[2],wt=k[3],zt=k[4],Fe=k[5],Se=k[6],He=k[7],nt=k[8],Pe=k[9],Ie=k[10],Ze=k[11],b[0]=Ke,b[1]=qe,b[2]=pt,b[3]=wt,b[4]=zt,b[5]=Fe,b[6]=Se,b[7]=He,b[8]=nt,b[9]=Pe,b[10]=Ie,b[11]=Ze,b[12]=Ke*he+zt*Oe+nt*Re+k[12],b[13]=qe*he+Fe*Oe+Pe*Re+k[13],b[14]=pt*he+Se*Oe+Ie*Re+k[14],b[15]=wt*he+He*Oe+Ze*Re+k[15]),b}function at(b,k,J){var he=J[0],Oe=J[1],Re=J[2];return b[0]=k[0]*he,b[1]=k[1]*he,b[2]=k[2]*he,b[3]=k[3]*he,b[4]=k[4]*Oe,b[5]=k[5]*Oe,b[6]=k[6]*Oe,b[7]=k[7]*Oe,b[8]=k[8]*Re,b[9]=k[9]*Re,b[10]=k[10]*Re,b[11]=k[11]*Re,b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15],b}function T(b,k,J,he){var Oe=he[0],Re=he[1],Ke=he[2],qe=Math.hypot(Oe,Re,Ke),pt,wt,zt,Fe,Se,He,nt,Pe,Ie,Ze,Lt,Zt,An,Un,Ln,Wr,Gr,Br,Xr,_a,ga,Na,ta,Yr;return qe<G?null:(qe=1/qe,Oe*=qe,Re*=qe,Ke*=qe,pt=Math.sin(J),wt=Math.cos(J),zt=1-wt,Fe=k[0],Se=k[1],He=k[2],nt=k[3],Pe=k[4],Ie=k[5],Ze=k[6],Lt=k[7],Zt=k[8],An=k[9],Un=k[10],Ln=k[11],Wr=Oe*Oe*zt+wt,Gr=Re*Oe*zt+Ke*pt,Br=Ke*Oe*zt-Re*pt,Xr=Oe*Re*zt-Ke*pt,_a=Re*Re*zt+wt,ga=Ke*Re*zt+Oe*pt,Na=Oe*Ke*zt+Re*pt,ta=Re*Ke*zt-Oe*pt,Yr=Ke*Ke*zt+wt,b[0]=Fe*Wr+Pe*Gr+Zt*Br,b[1]=Se*Wr+Ie*Gr+An*Br,b[2]=He*Wr+Ze*Gr+Un*Br,b[3]=nt*Wr+Lt*Gr+Ln*Br,b[4]=Fe*Xr+Pe*_a+Zt*ga,b[5]=Se*Xr+Ie*_a+An*ga,b[6]=He*Xr+Ze*_a+Un*ga,b[7]=nt*Xr+Lt*_a+Ln*ga,b[8]=Fe*Na+Pe*ta+Zt*Yr,b[9]=Se*Na+Ie*ta+An*Yr,b[10]=He*Na+Ze*ta+Un*Yr,b[11]=nt*Na+Lt*ta+Ln*Yr,k!==b&&(b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]),b)}function bn(b,k,J){var he=Math.sin(J),Oe=Math.cos(J),Re=k[4],Ke=k[5],qe=k[6],pt=k[7],wt=k[8],zt=k[9],Fe=k[10],Se=k[11];return k!==b&&(b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[3],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]),b[4]=Re*Oe+wt*he,b[5]=Ke*Oe+zt*he,b[6]=qe*Oe+Fe*he,b[7]=pt*Oe+Se*he,b[8]=wt*Oe-Re*he,b[9]=zt*Oe-Ke*he,b[10]=Fe*Oe-qe*he,b[11]=Se*Oe-pt*he,b}function an(b,k,J){var he=Math.sin(J),Oe=Math.cos(J),Re=k[0],Ke=k[1],qe=k[2],pt=k[3],wt=k[8],zt=k[9],Fe=k[10],Se=k[11];return k!==b&&(b[4]=k[4],b[5]=k[5],b[6]=k[6],b[7]=k[7],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]),b[0]=Re*Oe-wt*he,b[1]=Ke*Oe-zt*he,b[2]=qe*Oe-Fe*he,b[3]=pt*Oe-Se*he,b[8]=Re*he+wt*Oe,b[9]=Ke*he+zt*Oe,b[10]=qe*he+Fe*Oe,b[11]=pt*he+Se*Oe,b}function Jn(b,k,J){var he=Math.sin(J),Oe=Math.cos(J),Re=k[0],Ke=k[1],qe=k[2],pt=k[3],wt=k[4],zt=k[5],Fe=k[6],Se=k[7];return k!==b&&(b[8]=k[8],b[9]=k[9],b[10]=k[10],b[11]=k[11],b[12]=k[12],b[13]=k[13],b[14]=k[14],b[15]=k[15]),b[0]=Re*Oe+wt*he,b[1]=Ke*Oe+zt*he,b[2]=qe*Oe+Fe*he,b[3]=pt*Oe+Se*he,b[4]=wt*Oe-Re*he,b[5]=zt*Oe-Ke*he,b[6]=Fe*Oe-qe*he,b[7]=Se*Oe-pt*he,b}function Qn(b,k){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=k[0],b[13]=k[1],b[14]=k[2],b[15]=1,b}function De(b,k){return b[0]=k[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=k[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=k[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function be(b,k,J){var he=J[0],Oe=J[1],Re=J[2],Ke=Math.hypot(he,Oe,Re),qe,pt,wt;return Ke<G?null:(Ke=1/Ke,he*=Ke,Oe*=Ke,Re*=Ke,qe=Math.sin(k),pt=Math.cos(k),wt=1-pt,b[0]=he*he*wt+pt,b[1]=Oe*he*wt+Re*qe,b[2]=Re*he*wt-Oe*qe,b[3]=0,b[4]=he*Oe*wt-Re*qe,b[5]=Oe*Oe*wt+pt,b[6]=Re*Oe*wt+he*qe,b[7]=0,b[8]=he*Re*wt+Oe*qe,b[9]=Oe*Re*wt-he*qe,b[10]=Re*Re*wt+pt,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)}function Xe(b,k){var J=Math.sin(k),he=Math.cos(k);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=he,b[6]=J,b[7]=0,b[8]=0,b[9]=-J,b[10]=he,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function Yt(b,k){var J=Math.sin(k),he=Math.cos(k);return b[0]=he,b[1]=0,b[2]=-J,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=J,b[9]=0,b[10]=he,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function ln(b,k){var J=Math.sin(k),he=Math.cos(k);return b[0]=he,b[1]=J,b[2]=0,b[3]=0,b[4]=-J,b[5]=he,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function lr(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=k[3],qe=he+he,pt=Oe+Oe,wt=Re+Re,zt=he*qe,Fe=he*pt,Se=he*wt,He=Oe*pt,nt=Oe*wt,Pe=Re*wt,Ie=Ke*qe,Ze=Ke*pt,Lt=Ke*wt;return b[0]=1-(He+Pe),b[1]=Fe+Lt,b[2]=Se-Ze,b[3]=0,b[4]=Fe-Lt,b[5]=1-(zt+Pe),b[6]=nt+Ie,b[7]=0,b[8]=Se+Ze,b[9]=nt-Ie,b[10]=1-(zt+He),b[11]=0,b[12]=J[0],b[13]=J[1],b[14]=J[2],b[15]=1,b}function Hr(b,k){var J=new R(3),he=-k[0],Oe=-k[1],Re=-k[2],Ke=k[3],qe=k[4],pt=k[5],wt=k[6],zt=k[7],Fe=he*he+Oe*Oe+Re*Re+Ke*Ke;return Fe>0?(J[0]=(qe*Ke+zt*he+pt*Re-wt*Oe)*2/Fe,J[1]=(pt*Ke+zt*Oe+wt*he-qe*Re)*2/Fe,J[2]=(wt*Ke+zt*Re+qe*Oe-pt*he)*2/Fe):(J[0]=(qe*Ke+zt*he+pt*Re-wt*Oe)*2,J[1]=(pt*Ke+zt*Oe+wt*he-qe*Re)*2,J[2]=(wt*Ke+zt*Re+qe*Oe-pt*he)*2),lr(b,k,J),b}function ar(b,k){return b[0]=k[12],b[1]=k[13],b[2]=k[14],b}function mr(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[4],Ke=k[5],qe=k[6],pt=k[8],wt=k[9],zt=k[10];return b[0]=Math.hypot(J,he,Oe),b[1]=Math.hypot(Re,Ke,qe),b[2]=Math.hypot(pt,wt,zt),b}function yr(b,k){var J=new R(3);mr(J,k);var he=1/J[0],Oe=1/J[1],Re=1/J[2],Ke=k[0]*he,qe=k[1]*Oe,pt=k[2]*Re,wt=k[4]*he,zt=k[5]*Oe,Fe=k[6]*Re,Se=k[8]*he,He=k[9]*Oe,nt=k[10]*Re,Pe=Ke+zt+nt,Ie=0;return Pe>0?(Ie=Math.sqrt(Pe+1)*2,b[3]=.25*Ie,b[0]=(Fe-He)/Ie,b[1]=(Se-pt)/Ie,b[2]=(qe-wt)/Ie):Ke>zt&&Ke>nt?(Ie=Math.sqrt(1+Ke-zt-nt)*2,b[3]=(Fe-He)/Ie,b[0]=.25*Ie,b[1]=(qe+wt)/Ie,b[2]=(Se+pt)/Ie):zt>nt?(Ie=Math.sqrt(1+zt-Ke-nt)*2,b[3]=(Se-pt)/Ie,b[0]=(qe+wt)/Ie,b[1]=.25*Ie,b[2]=(Fe+He)/Ie):(Ie=Math.sqrt(1+nt-Ke-zt)*2,b[3]=(qe-wt)/Ie,b[0]=(Se+pt)/Ie,b[1]=(Fe+He)/Ie,b[2]=.25*Ie),b}function kr(b,k,J,he){var Oe=k[0],Re=k[1],Ke=k[2],qe=k[3],pt=Oe+Oe,wt=Re+Re,zt=Ke+Ke,Fe=Oe*pt,Se=Oe*wt,He=Oe*zt,nt=Re*wt,Pe=Re*zt,Ie=Ke*zt,Ze=qe*pt,Lt=qe*wt,Zt=qe*zt,An=he[0],Un=he[1],Ln=he[2];return b[0]=(1-(nt+Ie))*An,b[1]=(Se+Zt)*An,b[2]=(He-Lt)*An,b[3]=0,b[4]=(Se-Zt)*Un,b[5]=(1-(Fe+Ie))*Un,b[6]=(Pe+Ze)*Un,b[7]=0,b[8]=(He+Lt)*Ln,b[9]=(Pe-Ze)*Ln,b[10]=(1-(Fe+nt))*Ln,b[11]=0,b[12]=J[0],b[13]=J[1],b[14]=J[2],b[15]=1,b}function Ur(b,k,J,he,Oe){var Re=k[0],Ke=k[1],qe=k[2],pt=k[3],wt=Re+Re,zt=Ke+Ke,Fe=qe+qe,Se=Re*wt,He=Re*zt,nt=Re*Fe,Pe=Ke*zt,Ie=Ke*Fe,Ze=qe*Fe,Lt=pt*wt,Zt=pt*zt,An=pt*Fe,Un=he[0],Ln=he[1],Wr=he[2],Gr=Oe[0],Br=Oe[1],Xr=Oe[2],_a=(1-(Pe+Ze))*Un,ga=(He+An)*Un,Na=(nt-Zt)*Un,ta=(He-An)*Ln,Yr=(1-(Se+Ze))*Ln,_i=(Ie+Lt)*Ln,bs=(nt+Zt)*Wr,Gl=(Ie-Lt)*Wr,dc=(1-(Se+Pe))*Wr;return b[0]=_a,b[1]=ga,b[2]=Na,b[3]=0,b[4]=ta,b[5]=Yr,b[6]=_i,b[7]=0,b[8]=bs,b[9]=Gl,b[10]=dc,b[11]=0,b[12]=J[0]+Gr-(_a*Gr+ta*Br+bs*Xr),b[13]=J[1]+Br-(ga*Gr+Yr*Br+Gl*Xr),b[14]=J[2]+Xr-(Na*Gr+_i*Br+dc*Xr),b[15]=1,b}function Va(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=J+J,qe=he+he,pt=Oe+Oe,wt=J*Ke,zt=he*Ke,Fe=he*qe,Se=Oe*Ke,He=Oe*qe,nt=Oe*pt,Pe=Re*Ke,Ie=Re*qe,Ze=Re*pt;return b[0]=1-Fe-nt,b[1]=zt+Ze,b[2]=Se-Ie,b[3]=0,b[4]=zt-Ze,b[5]=1-wt-nt,b[6]=He+Pe,b[7]=0,b[8]=Se+Ie,b[9]=He-Pe,b[10]=1-wt-Fe,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function da(b,k,J,he,Oe,Re,Ke){var qe=1/(J-k),pt=1/(Oe-he),wt=1/(Re-Ke);return b[0]=Re*2*qe,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Re*2*pt,b[6]=0,b[7]=0,b[8]=(J+k)*qe,b[9]=(Oe+he)*pt,b[10]=(Ke+Re)*wt,b[11]=-1,b[12]=0,b[13]=0,b[14]=Ke*Re*2*wt,b[15]=0,b}function Ji(b,k,J,he,Oe){var Re=1/Math.tan(k/2),Ke;return b[0]=Re/J,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Re,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,Oe!=null&&Oe!==Infinity?(Ke=1/(he-Oe),b[10]=(Oe+he)*Ke,b[14]=2*Oe*he*Ke):(b[10]=-1,b[14]=-2*he),b}var jo=Ji;function ri(b,k,J,he,Oe){var Re=1/Math.tan(k/2),Ke;return b[0]=Re/J,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Re,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,Oe!=null&&Oe!==Infinity?(Ke=1/(he-Oe),b[10]=Oe*Ke,b[14]=Oe*he*Ke):(b[10]=-1,b[14]=-he),b}function ji(b,k,J,he){var Oe=Math.tan(k.upDegrees*Math.PI/180),Re=Math.tan(k.downDegrees*Math.PI/180),Ke=Math.tan(k.leftDegrees*Math.PI/180),qe=Math.tan(k.rightDegrees*Math.PI/180),pt=2/(Ke+qe),wt=2/(Oe+Re);return b[0]=pt,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=wt,b[6]=0,b[7]=0,b[8]=-((Ke-qe)*pt*.5),b[9]=(Oe-Re)*wt*.5,b[10]=he/(J-he),b[11]=-1,b[12]=0,b[13]=0,b[14]=he*J/(J-he),b[15]=0,b}function Li(b,k,J,he,Oe,Re,Ke){var qe=1/(k-J),pt=1/(he-Oe),wt=1/(Re-Ke);return b[0]=-2*qe,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*pt,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*wt,b[11]=0,b[12]=(k+J)*qe,b[13]=(Oe+he)*pt,b[14]=(Ke+Re)*wt,b[15]=1,b}var Aa=Li;function ki(b,k,J,he,Oe,Re,Ke){var qe=1/(k-J),pt=1/(he-Oe),wt=1/(Re-Ke);return b[0]=-2*qe,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*pt,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=wt,b[11]=0,b[12]=(k+J)*qe,b[13]=(Oe+he)*pt,b[14]=Re*wt,b[15]=1,b}function mi(b,k,J,he){var Oe,Re,Ke,qe,pt,wt,zt,Fe,Se,He,nt=k[0],Pe=k[1],Ie=k[2],Ze=he[0],Lt=he[1],Zt=he[2],An=J[0],Un=J[1],Ln=J[2];return Math.abs(nt-An)<G&&Math.abs(Pe-Un)<G&&Math.abs(Ie-Ln)<G?En(b):(zt=nt-An,Fe=Pe-Un,Se=Ie-Ln,He=1/Math.hypot(zt,Fe,Se),zt*=He,Fe*=He,Se*=He,Oe=Lt*Se-Zt*Fe,Re=Zt*zt-Ze*Se,Ke=Ze*Fe-Lt*zt,He=Math.hypot(Oe,Re,Ke),He?(He=1/He,Oe*=He,Re*=He,Ke*=He):(Oe=0,Re=0,Ke=0),qe=Fe*Ke-Se*Re,pt=Se*Oe-zt*Ke,wt=zt*Re-Fe*Oe,He=Math.hypot(qe,pt,wt),He?(He=1/He,qe*=He,pt*=He,wt*=He):(qe=0,pt=0,wt=0),b[0]=Oe,b[1]=qe,b[2]=zt,b[3]=0,b[4]=Re,b[5]=pt,b[6]=Fe,b[7]=0,b[8]=Ke,b[9]=wt,b[10]=Se,b[11]=0,b[12]=-(Oe*nt+Re*Pe+Ke*Ie),b[13]=-(qe*nt+pt*Pe+wt*Ie),b[14]=-(zt*nt+Fe*Pe+Se*Ie),b[15]=1,b)}function na(b,k,J,he){var Oe=k[0],Re=k[1],Ke=k[2],qe=he[0],pt=he[1],wt=he[2],zt=Oe-J[0],Fe=Re-J[1],Se=Ke-J[2],He=zt*zt+Fe*Fe+Se*Se;He>0&&(He=1/Math.sqrt(He),zt*=He,Fe*=He,Se*=He);var nt=pt*Se-wt*Fe,Pe=wt*zt-qe*Se,Ie=qe*Fe-pt*zt;return He=nt*nt+Pe*Pe+Ie*Ie,He>0&&(He=1/Math.sqrt(He),nt*=He,Pe*=He,Ie*=He),b[0]=nt,b[1]=Pe,b[2]=Ie,b[3]=0,b[4]=Fe*Ie-Se*Pe,b[5]=Se*nt-zt*Ie,b[6]=zt*Pe-Fe*nt,b[7]=0,b[8]=zt,b[9]=Fe,b[10]=Se,b[11]=0,b[12]=Oe,b[13]=Re,b[14]=Ke,b[15]=1,b}function Ki(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}function go(b){return Math.hypot(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])}function ra(b,k,J){return b[0]=k[0]+J[0],b[1]=k[1]+J[1],b[2]=k[2]+J[2],b[3]=k[3]+J[3],b[4]=k[4]+J[4],b[5]=k[5]+J[5],b[6]=k[6]+J[6],b[7]=k[7]+J[7],b[8]=k[8]+J[8],b[9]=k[9]+J[9],b[10]=k[10]+J[10],b[11]=k[11]+J[11],b[12]=k[12]+J[12],b[13]=k[13]+J[13],b[14]=k[14]+J[14],b[15]=k[15]+J[15],b}function di(b,k,J){return b[0]=k[0]-J[0],b[1]=k[1]-J[1],b[2]=k[2]-J[2],b[3]=k[3]-J[3],b[4]=k[4]-J[4],b[5]=k[5]-J[5],b[6]=k[6]-J[6],b[7]=k[7]-J[7],b[8]=k[8]-J[8],b[9]=k[9]-J[9],b[10]=k[10]-J[10],b[11]=k[11]-J[11],b[12]=k[12]-J[12],b[13]=k[13]-J[13],b[14]=k[14]-J[14],b[15]=k[15]-J[15],b}function So(b,k,J){return b[0]=k[0]*J,b[1]=k[1]*J,b[2]=k[2]*J,b[3]=k[3]*J,b[4]=k[4]*J,b[5]=k[5]*J,b[6]=k[6]*J,b[7]=k[7]*J,b[8]=k[8]*J,b[9]=k[9]*J,b[10]=k[10]*J,b[11]=k[11]*J,b[12]=k[12]*J,b[13]=k[13]*J,b[14]=k[14]*J,b[15]=k[15]*J,b}function si(b,k,J,he){return b[0]=k[0]+J[0]*he,b[1]=k[1]+J[1]*he,b[2]=k[2]+J[2]*he,b[3]=k[3]+J[3]*he,b[4]=k[4]+J[4]*he,b[5]=k[5]+J[5]*he,b[6]=k[6]+J[6]*he,b[7]=k[7]+J[7]*he,b[8]=k[8]+J[8]*he,b[9]=k[9]+J[9]*he,b[10]=k[10]+J[10]*he,b[11]=k[11]+J[11]*he,b[12]=k[12]+J[12]*he,b[13]=k[13]+J[13]*he,b[14]=k[14]+J[14]*he,b[15]=k[15]+J[15]*he,b}function Si(b,k){return b[0]===k[0]&&b[1]===k[1]&&b[2]===k[2]&&b[3]===k[3]&&b[4]===k[4]&&b[5]===k[5]&&b[6]===k[6]&&b[7]===k[7]&&b[8]===k[8]&&b[9]===k[9]&&b[10]===k[10]&&b[11]===k[11]&&b[12]===k[12]&&b[13]===k[13]&&b[14]===k[14]&&b[15]===k[15]}function yi(b,k){var J=b[0],he=b[1],Oe=b[2],Re=b[3],Ke=b[4],qe=b[5],pt=b[6],wt=b[7],zt=b[8],Fe=b[9],Se=b[10],He=b[11],nt=b[12],Pe=b[13],Ie=b[14],Ze=b[15],Lt=k[0],Zt=k[1],An=k[2],Un=k[3],Ln=k[4],Wr=k[5],Gr=k[6],Br=k[7],Xr=k[8],_a=k[9],ga=k[10],Na=k[11],ta=k[12],Yr=k[13],_i=k[14],bs=k[15];return Math.abs(J-Lt)<=G*Math.max(1,Math.abs(J),Math.abs(Lt))&&Math.abs(he-Zt)<=G*Math.max(1,Math.abs(he),Math.abs(Zt))&&Math.abs(Oe-An)<=G*Math.max(1,Math.abs(Oe),Math.abs(An))&&Math.abs(Re-Un)<=G*Math.max(1,Math.abs(Re),Math.abs(Un))&&Math.abs(Ke-Ln)<=G*Math.max(1,Math.abs(Ke),Math.abs(Ln))&&Math.abs(qe-Wr)<=G*Math.max(1,Math.abs(qe),Math.abs(Wr))&&Math.abs(pt-Gr)<=G*Math.max(1,Math.abs(pt),Math.abs(Gr))&&Math.abs(wt-Br)<=G*Math.max(1,Math.abs(wt),Math.abs(Br))&&Math.abs(zt-Xr)<=G*Math.max(1,Math.abs(zt),Math.abs(Xr))&&Math.abs(Fe-_a)<=G*Math.max(1,Math.abs(Fe),Math.abs(_a))&&Math.abs(Se-ga)<=G*Math.max(1,Math.abs(Se),Math.abs(ga))&&Math.abs(He-Na)<=G*Math.max(1,Math.abs(He),Math.abs(Na))&&Math.abs(nt-ta)<=G*Math.max(1,Math.abs(nt),Math.abs(ta))&&Math.abs(Pe-Yr)<=G*Math.max(1,Math.abs(Pe),Math.abs(Yr))&&Math.abs(Ie-_i)<=G*Math.max(1,Math.abs(Ie),Math.abs(_i))&&Math.abs(Ze-bs)<=G*Math.max(1,Math.abs(Ze),Math.abs(bs))}var zi=Ot,Ko=di;function To(){var b=new R(3);return R!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b}function po(b){var k=new R(3);return k[0]=b[0],k[1]=b[1],k[2]=b[2],k}function Yo(b){var k=b[0],J=b[1],he=b[2];return Math.hypot(k,J,he)}function Us(b,k,J){var he=new R(3);return he[0]=b,he[1]=k,he[2]=J,he}function Wu(b,k){return b[0]=k[0],b[1]=k[1],b[2]=k[2],b}function Lo(b,k,J,he){return b[0]=k,b[1]=J,b[2]=he,b}function $u(b,k,J){return b[0]=k[0]+J[0],b[1]=k[1]+J[1],b[2]=k[2]+J[2],b}function iu(b,k,J){return b[0]=k[0]-J[0],b[1]=k[1]-J[1],b[2]=k[2]-J[2],b}function Zo(b,k,J){return b[0]=k[0]*J[0],b[1]=k[1]*J[1],b[2]=k[2]*J[2],b}function Vs(b,k,J){return b[0]=k[0]/J[0],b[1]=k[1]/J[1],b[2]=k[2]/J[2],b}function ou(b,k){return b[0]=Math.ceil(k[0]),b[1]=Math.ceil(k[1]),b[2]=Math.ceil(k[2]),b}function Is(b,k){return b[0]=Math.floor(k[0]),b[1]=Math.floor(k[1]),b[2]=Math.floor(k[2]),b}function Hs(b,k,J){return b[0]=Math.min(k[0],J[0]),b[1]=Math.min(k[1],J[1]),b[2]=Math.min(k[2],J[2]),b}function Ws(b,k,J){return b[0]=Math.max(k[0],J[0]),b[1]=Math.max(k[1],J[1]),b[2]=Math.max(k[2],J[2]),b}function su(b,k){return b[0]=Math.round(k[0]),b[1]=Math.round(k[1]),b[2]=Math.round(k[2]),b}function nn(b,k,J){return b[0]=k[0]*J,b[1]=k[1]*J,b[2]=k[2]*J,b}function On(b,k,J,he){return b[0]=k[0]+J[0]*he,b[1]=k[1]+J[1]*he,b[2]=k[2]+J[2]*he,b}function vr(b,k){var J=k[0]-b[0],he=k[1]-b[1],Oe=k[2]-b[2];return Math.hypot(J,he,Oe)}function It(b,k){var J=k[0]-b[0],he=k[1]-b[1],Oe=k[2]-b[2];return J*J+he*he+Oe*Oe}function jt(b){var k=b[0],J=b[1],he=b[2];return k*k+J*J+he*he}function Bn(b,k){return b[0]=-k[0],b[1]=-k[1],b[2]=-k[2],b}function pn(b,k){return b[0]=1/k[0],b[1]=1/k[1],b[2]=1/k[2],b}function on(b,k){var J=k[0],he=k[1],Oe=k[2],Re=J*J+he*he+Oe*Oe;return Re>0&&(Re=1/Math.sqrt(Re)),b[0]=k[0]*Re,b[1]=k[1]*Re,b[2]=k[2]*Re,b}function qt(b,k){return b[0]*k[0]+b[1]*k[1]+b[2]*k[2]}function mn(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=J[0],qe=J[1],pt=J[2];return b[0]=Oe*pt-Re*qe,b[1]=Re*Ke-he*pt,b[2]=he*qe-Oe*Ke,b}function vn(b,k,J,he){var Oe=k[0],Re=k[1],Ke=k[2];return b[0]=Oe+he*(J[0]-Oe),b[1]=Re+he*(J[1]-Re),b[2]=Ke+he*(J[2]-Ke),b}function hr(b,k,J,he,Oe,Re){var Ke=Re*Re,qe=Ke*(2*Re-3)+1,pt=Ke*(Re-2)+Re,wt=Ke*(Re-1),zt=Ke*(3-2*Re);return b[0]=k[0]*qe+J[0]*pt+he[0]*wt+Oe[0]*zt,b[1]=k[1]*qe+J[1]*pt+he[1]*wt+Oe[1]*zt,b[2]=k[2]*qe+J[2]*pt+he[2]*wt+Oe[2]*zt,b}function Nn(b,k,J,he,Oe,Re){var Ke=1-Re,qe=Ke*Ke,pt=Re*Re,wt=qe*Ke,zt=3*Re*qe,Fe=3*pt*Ke,Se=pt*Re;return b[0]=k[0]*wt+J[0]*zt+he[0]*Fe+Oe[0]*Se,b[1]=k[1]*wt+J[1]*zt+he[1]*Fe+Oe[1]*Se,b[2]=k[2]*wt+J[2]*zt+he[2]*Fe+Oe[2]*Se,b}function Nr(b,k){k=k||1;var J=X()*2*Math.PI,he=X()*2-1,Oe=Math.sqrt(1-he*he)*k;return b[0]=Math.cos(J)*Oe,b[1]=Math.sin(J)*Oe,b[2]=he*k,b}function Er(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=J[3]*he+J[7]*Oe+J[11]*Re+J[15];return Ke=Ke||1,b[0]=(J[0]*he+J[4]*Oe+J[8]*Re+J[12])/Ke,b[1]=(J[1]*he+J[5]*Oe+J[9]*Re+J[13])/Ke,b[2]=(J[2]*he+J[6]*Oe+J[10]*Re+J[14])/Ke,b}function Rr(b,k,J){var he=k[0],Oe=k[1],Re=k[2];return b[0]=he*J[0]+Oe*J[3]+Re*J[6],b[1]=he*J[1]+Oe*J[4]+Re*J[7],b[2]=he*J[2]+Oe*J[5]+Re*J[8],b}function xr(b,k,J){var he=J[0],Oe=J[1],Re=J[2],Ke=J[3],qe=k[0],pt=k[1],wt=k[2],zt=Oe*wt-Re*pt,Fe=Re*qe-he*wt,Se=he*pt-Oe*qe,He=Oe*Se-Re*Fe,nt=Re*zt-he*Se,Pe=he*Fe-Oe*zt,Ie=Ke*2;return zt*=Ie,Fe*=Ie,Se*=Ie,He*=2,nt*=2,Pe*=2,b[0]=qe+zt+He,b[1]=pt+Fe+nt,b[2]=wt+Se+Pe,b}function Vr(b,k,J,he){var Oe=[],Re=[];return Oe[0]=k[0]-J[0],Oe[1]=k[1]-J[1],Oe[2]=k[2]-J[2],Re[0]=Oe[0],Re[1]=Oe[1]*Math.cos(he)-Oe[2]*Math.sin(he),Re[2]=Oe[1]*Math.sin(he)+Oe[2]*Math.cos(he),b[0]=Re[0]+J[0],b[1]=Re[1]+J[1],b[2]=Re[2]+J[2],b}function La(b,k,J,he){var Oe=[],Re=[];return Oe[0]=k[0]-J[0],Oe[1]=k[1]-J[1],Oe[2]=k[2]-J[2],Re[0]=Oe[2]*Math.sin(he)+Oe[0]*Math.cos(he),Re[1]=Oe[1],Re[2]=Oe[2]*Math.cos(he)-Oe[0]*Math.sin(he),b[0]=Re[0]+J[0],b[1]=Re[1]+J[1],b[2]=Re[2]+J[2],b}function Pr(b,k,J,he){var Oe=[],Re=[];return Oe[0]=k[0]-J[0],Oe[1]=k[1]-J[1],Oe[2]=k[2]-J[2],Re[0]=Oe[0]*Math.cos(he)-Oe[1]*Math.sin(he),Re[1]=Oe[0]*Math.sin(he)+Oe[1]*Math.cos(he),Re[2]=Oe[2],b[0]=Re[0]+J[0],b[1]=Re[1]+J[1],b[2]=Re[2]+J[2],b}function Zr(b,k){var J=b[0],he=b[1],Oe=b[2],Re=k[0],Ke=k[1],qe=k[2],pt=Math.sqrt(J*J+he*he+Oe*Oe),wt=Math.sqrt(Re*Re+Ke*Ke+qe*qe),zt=pt*wt,Fe=zt&&qt(b,k)/zt;return Math.acos(Math.min(Math.max(Fe,-1),1))}function wr(b){return b[0]=0,b[1]=0,b[2]=0,b}function ea(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"}function Dr(b,k){return b[0]===k[0]&&b[1]===k[1]&&b[2]===k[2]}function ha(b,k){var J=b[0],he=b[1],Oe=b[2],Re=k[0],Ke=k[1],qe=k[2];return Math.abs(J-Re)<=G*Math.max(1,Math.abs(J),Math.abs(Re))&&Math.abs(he-Ke)<=G*Math.max(1,Math.abs(he),Math.abs(Ke))&&Math.abs(Oe-qe)<=G*Math.max(1,Math.abs(Oe),Math.abs(qe))}var ma=iu,Ui=Zo,Mo=Vs,uu=vr,ho=It,$s=Yo,Rs=jt,Xu=function(){var b=To();return function(k,J,he,Oe,Re,Ke){var qe,pt;for(J||(J=3),he||(he=0),Oe?pt=Math.min(Oe*J+he,k.length):pt=k.length,qe=he;qe<pt;qe+=J)b[0]=k[qe],b[1]=k[qe+1],b[2]=k[qe+2],Re(b,b,Ke),k[qe]=b[0],k[qe+1]=b[1],k[qe+2]=b[2];return k}}();function sc(){var b=new R(4);return R!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[3]=0),b}function uc(b){var k=new R(4);return k[0]=b[0],k[1]=b[1],k[2]=b[2],k[3]=b[3],k}function tf(b,k,J,he){var Oe=new R(4);return Oe[0]=b,Oe[1]=k,Oe[2]=J,Oe[3]=he,Oe}function Ns(b,k){return b[0]=k[0],b[1]=k[1],b[2]=k[2],b[3]=k[3],b}function nf(b,k,J,he,Oe){return b[0]=k,b[1]=J,b[2]=he,b[3]=Oe,b}function Ku(b,k,J){return b[0]=k[0]+J[0],b[1]=k[1]+J[1],b[2]=k[2]+J[2],b[3]=k[3]+J[3],b}function Rl(b,k,J){return b[0]=k[0]-J[0],b[1]=k[1]-J[1],b[2]=k[2]-J[2],b[3]=k[3]-J[3],b}function lu(b,k,J){return b[0]=k[0]*J[0],b[1]=k[1]*J[1],b[2]=k[2]*J[2],b[3]=k[3]*J[3],b}function Nl(b,k,J){return b[0]=k[0]/J[0],b[1]=k[1]/J[1],b[2]=k[2]/J[2],b[3]=k[3]/J[3],b}function Gf(b,k){return b[0]=Math.ceil(k[0]),b[1]=Math.ceil(k[1]),b[2]=Math.ceil(k[2]),b[3]=Math.ceil(k[3]),b}function jl(b,k){return b[0]=Math.floor(k[0]),b[1]=Math.floor(k[1]),b[2]=Math.floor(k[2]),b[3]=Math.floor(k[3]),b}function lc(b,k,J){return b[0]=Math.min(k[0],J[0]),b[1]=Math.min(k[1],J[1]),b[2]=Math.min(k[2],J[2]),b[3]=Math.min(k[3],J[3]),b}function rf(b,k,J){return b[0]=Math.max(k[0],J[0]),b[1]=Math.max(k[1],J[1]),b[2]=Math.max(k[2],J[2]),b[3]=Math.max(k[3],J[3]),b}function af(b,k){return b[0]=Math.round(k[0]),b[1]=Math.round(k[1]),b[2]=Math.round(k[2]),b[3]=Math.round(k[3]),b}function wi(b,k,J){return b[0]=k[0]*J,b[1]=k[1]*J,b[2]=k[2]*J,b[3]=k[3]*J,b}function hi(b,k,J,he){return b[0]=k[0]+J[0]*he,b[1]=k[1]+J[1]*he,b[2]=k[2]+J[2]*he,b[3]=k[3]+J[3]*he,b}function ol(b,k){var J=k[0]-b[0],he=k[1]-b[1],Oe=k[2]-b[2],Re=k[3]-b[3];return Math.hypot(J,he,Oe,Re)}function gs(b,k){var J=k[0]-b[0],he=k[1]-b[1],Oe=k[2]-b[2],Re=k[3]-b[3];return J*J+he*he+Oe*Oe+Re*Re}function xu(b){var k=b[0],J=b[1],he=b[2],Oe=b[3];return Math.hypot(k,J,he,Oe)}function sl(b){var k=b[0],J=b[1],he=b[2],Oe=b[3];return k*k+J*J+he*he+Oe*Oe}function Ll(b,k){return b[0]=-k[0],b[1]=-k[1],b[2]=-k[2],b[3]=-k[3],b}function zf(b,k){return b[0]=1/k[0],b[1]=1/k[1],b[2]=1/k[2],b[3]=1/k[3],b}function cu(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=J*J+he*he+Oe*Oe+Re*Re;return Ke>0&&(Ke=1/Math.sqrt(Ke)),b[0]=J*Ke,b[1]=he*Ke,b[2]=Oe*Ke,b[3]=Re*Ke,b}function cc(b,k){return b[0]*k[0]+b[1]*k[1]+b[2]*k[2]+b[3]*k[3]}function Qi(b,k,J,he){var Oe=J[0]*he[1]-J[1]*he[0],Re=J[0]*he[2]-J[2]*he[0],Ke=J[0]*he[3]-J[3]*he[0],qe=J[1]*he[2]-J[2]*he[1],pt=J[1]*he[3]-J[3]*he[1],wt=J[2]*he[3]-J[3]*he[2],zt=k[0],Fe=k[1],Se=k[2],He=k[3];return b[0]=Fe*wt-Se*pt+He*qe,b[1]=-(zt*wt)+Se*Ke-He*Re,b[2]=zt*pt-Fe*Ke+He*Oe,b[3]=-(zt*qe)+Fe*Re-Se*Oe,b}function _l(b,k,J,he){var Oe=k[0],Re=k[1],Ke=k[2],qe=k[3];return b[0]=Oe+he*(J[0]-Oe),b[1]=Re+he*(J[1]-Re),b[2]=Ke+he*(J[2]-Ke),b[3]=qe+he*(J[3]-qe),b}function Su(b,k){k=k||1;var J,he,Oe,Re,Ke,qe;do J=X()*2-1,he=X()*2-1,Ke=J*J+he*he;while(Ke>=1);do Oe=X()*2-1,Re=X()*2-1,qe=Oe*Oe+Re*Re;while(qe>=1);var pt=Math.sqrt((1-Ke)/qe);return b[0]=k*J,b[1]=k*he,b[2]=k*Oe*pt,b[3]=k*Re*pt,b}function fu(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=k[3];return b[0]=J[0]*he+J[4]*Oe+J[8]*Re+J[12]*Ke,b[1]=J[1]*he+J[5]*Oe+J[9]*Re+J[13]*Ke,b[2]=J[2]*he+J[6]*Oe+J[10]*Re+J[14]*Ke,b[3]=J[3]*he+J[7]*Oe+J[11]*Re+J[15]*Ke,b}function du(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=J[0],qe=J[1],pt=J[2],wt=J[3],zt=wt*he+qe*Re-pt*Oe,Fe=wt*Oe+pt*he-Ke*Re,Se=wt*Re+Ke*Oe-qe*he,He=-Ke*he-qe*Oe-pt*Re;return b[0]=zt*wt+He*-Ke+Fe*-pt-Se*-qe,b[1]=Fe*wt+He*-qe+Se*-Ke-zt*-pt,b[2]=Se*wt+He*-pt+zt*-qe-Fe*-Ke,b[3]=k[3],b}function _o(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b}function U(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"}function S(b,k){return b[0]===k[0]&&b[1]===k[1]&&b[2]===k[2]&&b[3]===k[3]}function z(b,k){var J=b[0],he=b[1],Oe=b[2],Re=b[3],Ke=k[0],qe=k[1],pt=k[2],wt=k[3];return Math.abs(J-Ke)<=G*Math.max(1,Math.abs(J),Math.abs(Ke))&&Math.abs(he-qe)<=G*Math.max(1,Math.abs(he),Math.abs(qe))&&Math.abs(Oe-pt)<=G*Math.max(1,Math.abs(Oe),Math.abs(pt))&&Math.abs(Re-wt)<=G*Math.max(1,Math.abs(Re),Math.abs(wt))}var V=Rl,oe=lu,Ce=Nl,Ee=ol,Ge=gs,it=xu,yt=sl,tn=function(){var b=sc();return function(k,J,he,Oe,Re,Ke){var qe,pt;for(J||(J=4),he||(he=0),Oe?pt=Math.min(Oe*J+he,k.length):pt=k.length,qe=he;qe<pt;qe+=J)b[0]=k[qe],b[1]=k[qe+1],b[2]=k[qe+2],b[3]=k[qe+3],Re(b,b,Ke),k[qe]=b[0],k[qe+1]=b[1],k[qe+2]=b[2],k[qe+3]=b[3];return k}}();function wn(){var b=new R(4);return R!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b[3]=1,b}function cr(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b}function en(b,k,J){J=J*.5;var he=Math.sin(J);return b[0]=he*k[0],b[1]=he*k[1],b[2]=he*k[2],b[3]=Math.cos(J),b}function zn(b,k){var J=Math.acos(k[3])*2,he=Math.sin(J/2);return he>G?(b[0]=k[0]/he,b[1]=k[1]/he,b[2]=k[2]/he):(b[0]=1,b[1]=0,b[2]=0),J}function ia(b,k){var J=ys(b,k);return Math.acos(2*J*J-1)}function Fr(b,k,J){var he=k[0],Oe=k[1],Re=k[2],Ke=k[3],qe=J[0],pt=J[1],wt=J[2],zt=J[3];return b[0]=he*zt+Ke*qe+Oe*wt-Re*pt,b[1]=Oe*zt+Ke*pt+Re*qe-he*wt,b[2]=Re*zt+Ke*wt+he*pt-Oe*qe,b[3]=Ke*zt-he*qe-Oe*pt-Re*wt,b}function bi(b,k,J){J*=.5;var he=k[0],Oe=k[1],Re=k[2],Ke=k[3],qe=Math.sin(J),pt=Math.cos(J);return b[0]=he*pt+Ke*qe,b[1]=Oe*pt+Re*qe,b[2]=Re*pt-Oe*qe,b[3]=Ke*pt-he*qe,b}function Fo(b,k,J){J*=.5;var he=k[0],Oe=k[1],Re=k[2],Ke=k[3],qe=Math.sin(J),pt=Math.cos(J);return b[0]=he*pt-Re*qe,b[1]=Oe*pt+Ke*qe,b[2]=Re*pt+he*qe,b[3]=Ke*pt-Oe*qe,b}function Vi(b,k,J){J*=.5;var he=k[0],Oe=k[1],Re=k[2],Ke=k[3],qe=Math.sin(J),pt=Math.cos(J);return b[0]=he*pt+Oe*qe,b[1]=Oe*pt-he*qe,b[2]=Re*pt+Ke*qe,b[3]=Ke*pt-Re*qe,b}function Ao(b,k){var J=k[0],he=k[1],Oe=k[2];return b[0]=J,b[1]=he,b[2]=Oe,b[3]=Math.sqrt(Math.abs(1-J*J-he*he-Oe*Oe)),b}function oo(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=Math.sqrt(J*J+he*he+Oe*Oe),qe=Math.exp(Re),pt=Ke>0?qe*Math.sin(Ke)/Ke:0;return b[0]=J*pt,b[1]=he*pt,b[2]=Oe*pt,b[3]=qe*Math.cos(Ke),b}function va(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=Math.sqrt(J*J+he*he+Oe*Oe),qe=Ke>0?Math.atan2(Ke,Re)/Ke:0;return b[0]=J*qe,b[1]=he*qe,b[2]=Oe*qe,b[3]=.5*Math.log(J*J+he*he+Oe*Oe+Re*Re),b}function ps(b,k,J){return va(b,k),Yu(b,b,J),oo(b,b),b}function ei(b,k,J,he){var Oe=k[0],Re=k[1],Ke=k[2],qe=k[3],pt=J[0],wt=J[1],zt=J[2],Fe=J[3],Se,He,nt,Pe,Ie;return He=Oe*pt+Re*wt+Ke*zt+qe*Fe,He<0&&(He=-He,pt=-pt,wt=-wt,zt=-zt,Fe=-Fe),1-He>G?(Se=Math.acos(He),nt=Math.sin(Se),Pe=Math.sin((1-he)*Se)/nt,Ie=Math.sin(he*Se)/nt):(Pe=1-he,Ie=he),b[0]=Pe*Oe+Ie*pt,b[1]=Pe*Re+Ie*wt,b[2]=Pe*Ke+Ie*zt,b[3]=Pe*qe+Ie*Fe,b}function Ti(b){var k=X(),J=X(),he=X(),Oe=Math.sqrt(1-k),Re=Math.sqrt(k);return b[0]=Oe*Math.sin(2*Math.PI*J),b[1]=Oe*Math.cos(2*Math.PI*J),b[2]=Re*Math.sin(2*Math.PI*he),b[3]=Re*Math.cos(2*Math.PI*he),b}function Mi(b,k){var J=k[0],he=k[1],Oe=k[2],Re=k[3],Ke=J*J+he*he+Oe*Oe+Re*Re,qe=Ke?1/Ke:0;return b[0]=-J*qe,b[1]=-he*qe,b[2]=-Oe*qe,b[3]=Re*qe,b}function ul(b,k){return b[0]=-k[0],b[1]=-k[1],b[2]=-k[2],b[3]=k[3],b}function eo(b,k){var J=k[0]+k[4]+k[8],he;if(J>0)he=Math.sqrt(J+1),b[3]=.5*he,he=.5/he,b[0]=(k[5]-k[7])*he,b[1]=(k[6]-k[2])*he,b[2]=(k[1]-k[3])*he;else{var Oe=0;k[4]>k[0]&&(Oe=1),k[8]>k[Oe*3+Oe]&&(Oe=2);var Re=(Oe+1)%3,Ke=(Oe+2)%3;he=Math.sqrt(k[Oe*3+Oe]-k[Re*3+Re]-k[Ke*3+Ke]+1),b[Oe]=.5*he,he=.5/he,b[3]=(k[Re*3+Ke]-k[Ke*3+Re])*he,b[Re]=(k[Re*3+Oe]+k[Oe*3+Re])*he,b[Ke]=(k[Ke*3+Oe]+k[Oe*3+Ke])*he}return b}function Jo(b,k,J,he){var Oe=.5*Math.PI/180;k*=Oe,J*=Oe,he*=Oe;var Re=Math.sin(k),Ke=Math.cos(k),qe=Math.sin(J),pt=Math.cos(J),wt=Math.sin(he),zt=Math.cos(he);return b[0]=Re*pt*zt-Ke*qe*wt,b[1]=Ke*qe*zt+Re*pt*wt,b[2]=Ke*pt*wt-Re*qe*zt,b[3]=Ke*pt*zt+Re*qe*wt,b}function hu(b){return"quat("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"}var vu=uc,js=tf,Po=Ns,ms=nf,ko=Ku,mo=Fr,Yu=wi,ys=cc,ui=_l,gu=xu,as=gu,Xs=sl,of=Xs,Fl=cu,fc=S,Qo=z,Bl=function(){var b=To(),k=Us(1,0,0),J=Us(0,1,0);return function(he,Oe,Re){var Ke=qt(Oe,Re);return Ke<-.999999?(mn(b,k,Oe),$s(b)<1e-6&&mn(b,J,Oe),on(b,b),en(he,b,Math.PI),he):Ke>.999999?(he[0]=0,he[1]=0,he[2]=0,he[3]=1,he):(mn(b,Oe,Re),he[0]=b[0],he[1]=b[1],he[2]=b[2],he[3]=1+Ke,Fl(he,he))}}(),Ls=function(){var b=wn(),k=wn();return function(J,he,Oe,Re,Ke,qe){return ei(b,he,Ke,qe),ei(k,Oe,Re,qe),ei(J,b,k,2*qe*(1-qe)),J}}(),ll=function(){var b=ae();return function(k,J,he,Oe){return b[0]=he[0],b[3]=he[1],b[6]=he[2],b[1]=Oe[0],b[4]=Oe[1],b[7]=Oe[2],b[2]=-J[0],b[5]=-J[1],b[8]=-J[2],Fl(k,eo(k,b))}}()},IQ25:function(le,P,h){"use strict";h.d(P,"a",function(){return te});var I=h("lwsE"),m=h.n(I),_=h("PJYZ"),M=h.n(_),A=h("7W2i"),G=h.n(A),R=h("a1gu"),X=h.n(R),W=h("Nsbk"),Y=h.n(W),K=h("oDt1");function ne(ce){var ee=ae();return function(){var se=Y()(ce),re;if(ee){var q=Y()(this).constructor;re=Reflect.construct(se,arguments,q)}else re=se.apply(this,arguments);return X()(this,re)}}function ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ce){return!1}}var te=function(ce){G()(H,ce);var ee=ne(H);function H(se){var re;return m()(this,H),re=ee.call(this,se),re.parentID=void 0,Object.assign(M()(re),se),re}return H}(K.a)},IehP:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="FullscreenExitOutlined";var R=P.a=m.forwardRef(G)},Ijbi:function(le,P,h){var I=h("WkPL");function m(_){if(Array.isArray(_))return I(_)}le.exports=m,le.exports.__esModule=!0,le.exports.default=le.exports},IzEo:function(le,P,h){"use strict";var I=h("EFp3"),m=h.n(I),_=h("lnY3"),M=h.n(_),A=h("cWXX"),G=h("Znn+")},J4zp:function(le,P,h){var I=h("wTVA"),m=h("m0LI"),_=h("ZhPi"),M=h("wkBT");function A(G,R){return I(G)||m(G,R)||_(G,R)||M()}le.exports=A,le.exports.__esModule=!0,le.exports.default=le.exports},JI00:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Chrome=void 0;var I=h("q1tI"),m=ee(I),_=h("17x9"),M=ee(_),A=h("/FUP"),G=ee(A),R=h("QkVN"),X=ee(R),W=h("TM95"),Y=h("Rkpk"),K=ee(Y),ne=h("NSvM"),ae=ee(ne),te=h("tu5P"),ce=ee(te);function ee(se){return se&&se.__esModule?se:{default:se}}var H=P.Chrome=function(re){var q=re.width,ye=re.onChange,ue=re.disableAlpha,ve=re.rgb,pe=re.hsl,L=re.hsv,ge=re.hex,_e=re.renderers,Te=re.styles,we=Te===void 0?{}:Te,Qe=re.className,D=Qe===void 0?"":Qe,Ue=(0,G.default)((0,X.default)({default:{picker:{width:q,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+ve.r+", "+ve.g+", "+ve.b+", "+ve.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},we),{disableAlpha:ue});return m.default.createElement("div",{style:Ue.picker,className:"chrome-picker "+D},m.default.createElement("div",{style:Ue.saturation},m.default.createElement(W.Saturation,{style:Ue.Saturation,hsl:pe,hsv:L,pointer:ce.default,onChange:ye})),m.default.createElement("div",{style:Ue.body},m.default.createElement("div",{style:Ue.controls,className:"flexbox-fix"},m.default.createElement("div",{style:Ue.color},m.default.createElement("div",{style:Ue.swatch},m.default.createElement("div",{style:Ue.active}),m.default.createElement(W.Checkboard,{renderers:_e}))),m.default.createElement("div",{style:Ue.toggles},m.default.createElement("div",{style:Ue.hue},m.default.createElement(W.Hue,{style:Ue.Hue,hsl:pe,pointer:ae.default,onChange:ye})),m.default.createElement("div",{style:Ue.alpha},m.default.createElement(W.Alpha,{style:Ue.Alpha,rgb:ve,hsl:pe,pointer:ae.default,renderers:_e,onChange:ye})))),m.default.createElement(K.default,{rgb:ve,hsl:pe,hex:ge,onChange:ye,disableAlpha:ue})))};H.propTypes={width:M.default.oneOfType([M.default.string,M.default.number]),disableAlpha:M.default.bool,styles:M.default.object},H.defaultProps={width:225,disableAlpha:!1,styles:{}},P.default=(0,W.ColorWrap)(H)},JX23:function(le,P){},JaaR:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="DoubleLeftOutlined";var R=P.a=m.forwardRef(G)},"Ju5/":function(le,P,h){"use strict";var I=h("XqMk"),m=typeof self=="object"&&self&&self.Object===Object&&self,_=I.a||m||Function("return this")();P.a=_},Jxpl:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Material=void 0;var I=h("q1tI"),m=Y(I),_=h("/FUP"),M=Y(_),A=h("QkVN"),G=Y(A),R=h("p8yl"),X=Y(R),W=h("TM95");function Y(ne){return ne&&ne.__esModule?ne:{default:ne}}var K=P.Material=function(ae){var te=ae.onChange,ce=ae.hex,ee=ae.rgb,H=ae.styles,se=H===void 0?{}:H,re=ae.className,q=re===void 0?"":re,ye=(0,M.default)((0,G.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+ce,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},se)),ue=function(pe,L){pe.hex?X.default.isValidHex(pe.hex)&&te({hex:pe.hex,source:"hex"},L):(pe.r||pe.g||pe.b)&&te({r:pe.r||ee.r,g:pe.g||ee.g,b:pe.b||ee.b,source:"rgb"},L)};return m.default.createElement(W.Raised,{styles:se},m.default.createElement("div",{style:ye.material,className:"material-picker "+q},m.default.createElement(W.EditableInput,{style:{wrap:ye.HEXwrap,input:ye.HEXinput,label:ye.HEXlabel},label:"hex",value:ce,onChange:ue}),m.default.createElement("div",{style:ye.split,className:"flexbox-fix"},m.default.createElement("div",{style:ye.third},m.default.createElement(W.EditableInput,{style:{wrap:ye.RGBwrap,input:ye.RGBinput,label:ye.RGBlabel},label:"r",value:ee.r,onChange:ue})),m.default.createElement("div",{style:ye.third},m.default.createElement(W.EditableInput,{style:{wrap:ye.RGBwrap,input:ye.RGBinput,label:ye.RGBlabel},label:"g",value:ee.g,onChange:ue})),m.default.createElement("div",{style:ye.third},m.default.createElement(W.EditableInput,{style:{wrap:ye.RGBwrap,input:ye.RGBinput,label:ye.RGBlabel},label:"b",value:ee.b,onChange:ue})))))};P.default=(0,W.ColorWrap)(K)},KwMD:function(le,P){function h(I,m,_,M){for(var A=I.length,G=_+(M?1:-1);M?G--:++G<A;)if(m(I[G],G,I))return G;return-1}le.exports=h},L26W:function(le,P){le.exports=h;function h(I,m){m=m||1;var _=Math.random()*2*Math.PI;return I[0]=Math.cos(_)*m,I[1]=Math.sin(_)*m,I}},L3Qv:function(le,P,h){"use strict";function I(){return!1}P.a=I},LGRX:function(le,P,h){"use strict";h.d(P,"a",function(){return Y});var I=h("lwsE"),m=h.n(I),_=h("W8MJ"),M=h.n(_),A=h("4cb6"),G=h.n(A),R,X,W;(function(K){K.PANSTART="PANSTART",K.PANEND="PANEND",K.PANMOVE="PANMOVE",K.PINCH="PINCH",K.KEYDOWN="KEYDOWN",K.KEYUP="KEYUP",K.HOVER="HOVER"})(W||(W={}));var Y=(R=Object(A.injectable)(),R(X=function(){function K(){m()(this,K)}return M()(K,[{key:"listen",value:function(ae){}},{key:"on",value:function(ae,te){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),K}())||X)},LGYb:function(le,P,h){var I=h("1hJj"),m=h("jbM+"),_=h("Xt/L"),M=h("xYSL"),A=h("dQpi"),G=h("rEGp"),R=200;function X(W,Y,K){var ne=-1,ae=m,te=W.length,ce=!0,ee=[],H=ee;if(K)ce=!1,ae=_;else if(te>=R){var se=Y?null:A(W);if(se)return G(se);ce=!1,ae=M,H=new I}else H=Y?[]:ee;e:for(;++ne<te;){var re=W[ne],q=Y?Y(re):re;if(re=K||re!==0?re:0,ce&&q===q){for(var ye=H.length;ye--;)if(H[ye]===q)continue e;Y&&H.push(q),ee.push(re)}else ae(H,q,K)||(H!==ee&&H.push(q),ee.push(re))}return ee}le.exports=X},LKzl:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingWhenOnSyntax=void 0;var I=h("406g"),m=h("z4Hk"),_=function(){function M(A){this._binding=A,this._bindingWhenSyntax=new m.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new I.BindingOnSyntax(this._binding)}return M.prototype.when=function(A){return this._bindingWhenSyntax.when(A)},M.prototype.whenTargetNamed=function(A){return this._bindingWhenSyntax.whenTargetNamed(A)},M.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},M.prototype.whenTargetTagged=function(A,G){return this._bindingWhenSyntax.whenTargetTagged(A,G)},M.prototype.whenInjectedInto=function(A){return this._bindingWhenSyntax.whenInjectedInto(A)},M.prototype.whenParentNamed=function(A){return this._bindingWhenSyntax.whenParentNamed(A)},M.prototype.whenParentTagged=function(A,G){return this._bindingWhenSyntax.whenParentTagged(A,G)},M.prototype.whenAnyAncestorIs=function(A){return this._bindingWhenSyntax.whenAnyAncestorIs(A)},M.prototype.whenNoAncestorIs=function(A){return this._bindingWhenSyntax.whenNoAncestorIs(A)},M.prototype.whenAnyAncestorNamed=function(A){return this._bindingWhenSyntax.whenAnyAncestorNamed(A)},M.prototype.whenAnyAncestorTagged=function(A,G){return this._bindingWhenSyntax.whenAnyAncestorTagged(A,G)},M.prototype.whenNoAncestorNamed=function(A){return this._bindingWhenSyntax.whenNoAncestorNamed(A)},M.prototype.whenNoAncestorTagged=function(A,G){return this._bindingWhenSyntax.whenNoAncestorTagged(A,G)},M.prototype.whenAnyAncestorMatches=function(A){return this._bindingWhenSyntax.whenAnyAncestorMatches(A)},M.prototype.whenNoAncestorMatches=function(A){return this._bindingWhenSyntax.whenNoAncestorMatches(A)},M.prototype.onActivation=function(A){return this._bindingOnSyntax.onActivation(A)},M}();P.BindingWhenOnSyntax=_},LgvC:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Binding=void 0;var I=h("FV85"),m=h("d9O0"),_=function(){function M(A,G){this.id=m.id(),this.activated=!1,this.serviceIdentifier=A,this.scope=G,this.type=I.BindingTypeEnum.Invalid,this.constraint=function(R){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return M.prototype.clone=function(){var A=new M(this.serviceIdentifier,this.scope);return A.activated=A.scope===I.BindingScopeEnum.Singleton?this.activated:!1,A.implementationType=this.implementationType,A.dynamicValue=this.dynamicValue,A.scope=this.scope,A.type=this.type,A.factory=this.factory,A.provider=this.provider,A.constraint=this.constraint,A.onActivation=this.onActivation,A.cache=this.cache,A},M}();P.Binding=_},LvDl:function(le,P,h){(function(I,m){var _;/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(){var M,A="4.17.21",G=200,R="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",X="Expected a function",W="Invalid `variable` option passed into `_.template`",Y="__lodash_hash_undefined__",K=500,ne="__lodash_placeholder__",ae=1,te=2,ce=4,ee=1,H=2,se=1,re=2,q=4,ye=8,ue=16,ve=32,pe=64,L=128,ge=256,_e=512,Te=30,we="...",Qe=800,D=16,Ue=1,Ct=2,ut=3,Nt=1/0,Kt=9007199254740991,Je=17976931348623157e292,Vt=0/0,Be=4294967295,ie=Be-1,un=Be>>>1,rn=[["ary",L],["bind",se],["bindKey",re],["curry",ye],["curryRight",ue],["flip",_e],["partial",ve],["partialRight",pe],["rearg",ge]],rr="[object Arguments]",Pt="[object Array]",Tn="[object AsyncFunction]",ur="[object Boolean]",Jt="[object Date]",fn="[object DOMException]",Mn="[object Error]",En="[object Function]",lt="[object GeneratorFunction]",Tt="[object Map]",st="[object Number]",At="[object Null]",Ot="[object Object]",dt="[object Promise]",at="[object Proxy]",T="[object RegExp]",bn="[object Set]",an="[object String]",Jn="[object Symbol]",Qn="[object Undefined]",De="[object WeakMap]",be="[object WeakSet]",Xe="[object ArrayBuffer]",Yt="[object DataView]",ln="[object Float32Array]",lr="[object Float64Array]",Hr="[object Int8Array]",ar="[object Int16Array]",mr="[object Int32Array]",yr="[object Uint8Array]",kr="[object Uint8ClampedArray]",Ur="[object Uint16Array]",Va="[object Uint32Array]",da=/\b__p \+= '';/g,Ji=/\b(__p \+=) '' \+/g,jo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ri=/&(?:amp|lt|gt|quot|#39);/g,ji=/[&<>"']/g,Li=RegExp(ri.source),Aa=RegExp(ji.source),ki=/<%-([\s\S]+?)%>/g,mi=/<%([\s\S]+?)%>/g,na=/<%=([\s\S]+?)%>/g,Ki=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,go=/^\w*$/,ra=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,di=/[\\^$.*+?()[\]{}|]/g,So=RegExp(di.source),si=/^\s+/,Si=/\s/,yi=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,zi=/\{\n\/\* \[wrapped with (.+)\] \*/,Ko=/,? & /,To=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,po=/[()=,{}\[\]\/\s]/,Yo=/\\(\\)?/g,Us=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wu=/\w*$/,Lo=/^[-+]0x[0-9a-f]+$/i,$u=/^0b[01]+$/i,iu=/^\[object .+?Constructor\]$/,Zo=/^0o[0-7]+$/i,Vs=/^(?:0|[1-9]\d*)$/,ou=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Is=/($^)/,Hs=/['\n\r\u2028\u2029\\]/g,Ws="\\ud800-\\udfff",su="\\u0300-\\u036f",nn="\\ufe20-\\ufe2f",On="\\u20d0-\\u20ff",vr=su+nn+On,It="\\u2700-\\u27bf",jt="a-z\\xdf-\\xf6\\xf8-\\xff",Bn="\\xac\\xb1\\xd7\\xf7",pn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",on="\\u2000-\\u206f",qt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mn="A-Z\\xc0-\\xd6\\xd8-\\xde",vn="\\ufe0e\\ufe0f",hr=Bn+pn+on+qt,Nn="['\u2019]",Nr="["+Ws+"]",Er="["+hr+"]",Rr="["+vr+"]",xr="\\d+",Vr="["+It+"]",La="["+jt+"]",Pr="[^"+Ws+hr+xr+It+jt+mn+"]",Zr="\\ud83c[\\udffb-\\udfff]",wr="(?:"+Rr+"|"+Zr+")",ea="[^"+Ws+"]",Dr="(?:\\ud83c[\\udde6-\\uddff]){2}",ha="[\\ud800-\\udbff][\\udc00-\\udfff]",ma="["+mn+"]",Ui="\\u200d",Mo="(?:"+La+"|"+Pr+")",uu="(?:"+ma+"|"+Pr+")",ho="(?:"+Nn+"(?:d|ll|m|re|s|t|ve))?",$s="(?:"+Nn+"(?:D|LL|M|RE|S|T|VE))?",Rs=wr+"?",Xu="["+vn+"]?",sc="(?:"+Ui+"(?:"+[ea,Dr,ha].join("|")+")"+Xu+Rs+")*",uc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tf="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ns=Xu+Rs+sc,nf="(?:"+[Vr,Dr,ha].join("|")+")"+Ns,Ku="(?:"+[ea+Rr+"?",Rr,Dr,ha,Nr].join("|")+")",Rl=RegExp(Nn,"g"),lu=RegExp(Rr,"g"),Nl=RegExp(Zr+"(?="+Zr+")|"+Ku+Ns,"g"),Gf=RegExp([ma+"?"+La+"+"+ho+"(?="+[Er,ma,"$"].join("|")+")",uu+"+"+$s+"(?="+[Er,ma+Mo,"$"].join("|")+")",ma+"?"+Mo+"+"+ho,ma+"+"+$s,tf,uc,xr,nf].join("|"),"g"),jl=RegExp("["+Ui+Ws+vr+vn+"]"),lc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],af=-1,wi={};wi[ln]=wi[lr]=wi[Hr]=wi[ar]=wi[mr]=wi[yr]=wi[kr]=wi[Ur]=wi[Va]=!0,wi[rr]=wi[Pt]=wi[Xe]=wi[ur]=wi[Yt]=wi[Jt]=wi[Mn]=wi[En]=wi[Tt]=wi[st]=wi[Ot]=wi[T]=wi[bn]=wi[an]=wi[De]=!1;var hi={};hi[rr]=hi[Pt]=hi[Xe]=hi[Yt]=hi[ur]=hi[Jt]=hi[ln]=hi[lr]=hi[Hr]=hi[ar]=hi[mr]=hi[Tt]=hi[st]=hi[Ot]=hi[T]=hi[bn]=hi[an]=hi[Jn]=hi[yr]=hi[kr]=hi[Ur]=hi[Va]=!0,hi[Mn]=hi[En]=hi[De]=!1;var ol={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},gs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ll=parseFloat,zf=parseInt,cu=typeof I=="object"&&I&&I.Object===Object&&I,cc=typeof self=="object"&&self&&self.Object===Object&&self,Qi=cu||cc||Function("return this")(),_l=P&&!P.nodeType&&P,Su=_l&&typeof m=="object"&&m&&!m.nodeType&&m,fu=Su&&Su.exports===_l,du=fu&&cu.process,_o=function(){try{var Pe=Su&&Su.require&&Su.require("util").types;return Pe||du&&du.binding&&du.binding("util")}catch(Ie){}}(),U=_o&&_o.isArrayBuffer,S=_o&&_o.isDate,z=_o&&_o.isMap,V=_o&&_o.isRegExp,oe=_o&&_o.isSet,Ce=_o&&_o.isTypedArray;function Ee(Pe,Ie,Ze){switch(Ze.length){case 0:return Pe.call(Ie);case 1:return Pe.call(Ie,Ze[0]);case 2:return Pe.call(Ie,Ze[0],Ze[1]);case 3:return Pe.call(Ie,Ze[0],Ze[1],Ze[2])}return Pe.apply(Ie,Ze)}function Ge(Pe,Ie,Ze,Lt){for(var Zt=-1,An=Pe==null?0:Pe.length;++Zt<An;){var Un=Pe[Zt];Ie(Lt,Un,Ze(Un),Pe)}return Lt}function it(Pe,Ie){for(var Ze=-1,Lt=Pe==null?0:Pe.length;++Ze<Lt&&Ie(Pe[Ze],Ze,Pe)!==!1;);return Pe}function yt(Pe,Ie){for(var Ze=Pe==null?0:Pe.length;Ze--&&Ie(Pe[Ze],Ze,Pe)!==!1;);return Pe}function tn(Pe,Ie){for(var Ze=-1,Lt=Pe==null?0:Pe.length;++Ze<Lt;)if(!Ie(Pe[Ze],Ze,Pe))return!1;return!0}function wn(Pe,Ie){for(var Ze=-1,Lt=Pe==null?0:Pe.length,Zt=0,An=[];++Ze<Lt;){var Un=Pe[Ze];Ie(Un,Ze,Pe)&&(An[Zt++]=Un)}return An}function cr(Pe,Ie){var Ze=Pe==null?0:Pe.length;return!!Ze&&ei(Pe,Ie,0)>-1}function en(Pe,Ie,Ze){for(var Lt=-1,Zt=Pe==null?0:Pe.length;++Lt<Zt;)if(Ze(Ie,Pe[Lt]))return!0;return!1}function zn(Pe,Ie){for(var Ze=-1,Lt=Pe==null?0:Pe.length,Zt=Array(Lt);++Ze<Lt;)Zt[Ze]=Ie(Pe[Ze],Ze,Pe);return Zt}function ia(Pe,Ie){for(var Ze=-1,Lt=Ie.length,Zt=Pe.length;++Ze<Lt;)Pe[Zt+Ze]=Ie[Ze];return Pe}function Fr(Pe,Ie,Ze,Lt){var Zt=-1,An=Pe==null?0:Pe.length;for(Lt&&An&&(Ze=Pe[++Zt]);++Zt<An;)Ze=Ie(Ze,Pe[Zt],Zt,Pe);return Ze}function bi(Pe,Ie,Ze,Lt){var Zt=Pe==null?0:Pe.length;for(Lt&&Zt&&(Ze=Pe[--Zt]);Zt--;)Ze=Ie(Ze,Pe[Zt],Zt,Pe);return Ze}function Fo(Pe,Ie){for(var Ze=-1,Lt=Pe==null?0:Pe.length;++Ze<Lt;)if(Ie(Pe[Ze],Ze,Pe))return!0;return!1}var Vi=eo("length");function Ao(Pe){return Pe.split("")}function oo(Pe){return Pe.match(To)||[]}function va(Pe,Ie,Ze){var Lt;return Ze(Pe,function(Zt,An,Un){if(Ie(Zt,An,Un))return Lt=An,!1}),Lt}function ps(Pe,Ie,Ze,Lt){for(var Zt=Pe.length,An=Ze+(Lt?1:-1);Lt?An--:++An<Zt;)if(Ie(Pe[An],An,Pe))return An;return-1}function ei(Pe,Ie,Ze){return Ie===Ie?Oe(Pe,Ie,Ze):ps(Pe,Mi,Ze)}function Ti(Pe,Ie,Ze,Lt){for(var Zt=Ze-1,An=Pe.length;++Zt<An;)if(Lt(Pe[Zt],Ie))return Zt;return-1}function Mi(Pe){return Pe!==Pe}function ul(Pe,Ie){var Ze=Pe==null?0:Pe.length;return Ze?js(Pe,Ie)/Ze:Vt}function eo(Pe){return function(Ie){return Ie==null?M:Ie[Pe]}}function Jo(Pe){return function(Ie){return Pe==null?M:Pe[Ie]}}function hu(Pe,Ie,Ze,Lt,Zt){return Zt(Pe,function(An,Un,Ln){Ze=Lt?(Lt=!1,An):Ie(Ze,An,Un,Ln)}),Ze}function vu(Pe,Ie){var Ze=Pe.length;for(Pe.sort(Ie);Ze--;)Pe[Ze]=Pe[Ze].value;return Pe}function js(Pe,Ie){for(var Ze,Lt=-1,Zt=Pe.length;++Lt<Zt;){var An=Ie(Pe[Lt]);An!==M&&(Ze=Ze===M?An:Ze+An)}return Ze}function Po(Pe,Ie){for(var Ze=-1,Lt=Array(Pe);++Ze<Pe;)Lt[Ze]=Ie(Ze);return Lt}function ms(Pe,Ie){return zn(Ie,function(Ze){return[Ze,Pe[Ze]]})}function ko(Pe){return Pe&&Pe.slice(0,pt(Pe)+1).replace(si,"")}function mo(Pe){return function(Ie){return Pe(Ie)}}function Yu(Pe,Ie){return zn(Ie,function(Ze){return Pe[Ze]})}function ys(Pe,Ie){return Pe.has(Ie)}function ui(Pe,Ie){for(var Ze=-1,Lt=Pe.length;++Ze<Lt&&ei(Ie,Pe[Ze],0)>-1;);return Ze}function gu(Pe,Ie){for(var Ze=Pe.length;Ze--&&ei(Ie,Pe[Ze],0)>-1;);return Ze}function as(Pe,Ie){for(var Ze=Pe.length,Lt=0;Ze--;)Pe[Ze]===Ie&&++Lt;return Lt}var Xs=Jo(ol),of=Jo(gs);function Fl(Pe){return"\\"+sl[Pe]}function fc(Pe,Ie){return Pe==null?M:Pe[Ie]}function Qo(Pe){return jl.test(Pe)}function Bl(Pe){return lc.test(Pe)}function Ls(Pe){for(var Ie,Ze=[];!(Ie=Pe.next()).done;)Ze.push(Ie.value);return Ze}function ll(Pe){var Ie=-1,Ze=Array(Pe.size);return Pe.forEach(function(Lt,Zt){Ze[++Ie]=[Zt,Lt]}),Ze}function b(Pe,Ie){return function(Ze){return Pe(Ie(Ze))}}function k(Pe,Ie){for(var Ze=-1,Lt=Pe.length,Zt=0,An=[];++Ze<Lt;){var Un=Pe[Ze];(Un===Ie||Un===ne)&&(Pe[Ze]=ne,An[Zt++]=Ze)}return An}function J(Pe){var Ie=-1,Ze=Array(Pe.size);return Pe.forEach(function(Lt){Ze[++Ie]=Lt}),Ze}function he(Pe){var Ie=-1,Ze=Array(Pe.size);return Pe.forEach(function(Lt){Ze[++Ie]=[Lt,Lt]}),Ze}function Oe(Pe,Ie,Ze){for(var Lt=Ze-1,Zt=Pe.length;++Lt<Zt;)if(Pe[Lt]===Ie)return Lt;return-1}function Re(Pe,Ie,Ze){for(var Lt=Ze+1;Lt--;)if(Pe[Lt]===Ie)return Lt;return Lt}function Ke(Pe){return Qo(Pe)?zt(Pe):Vi(Pe)}function qe(Pe){return Qo(Pe)?Fe(Pe):Ao(Pe)}function pt(Pe){for(var Ie=Pe.length;Ie--&&Si.test(Pe.charAt(Ie)););return Ie}var wt=Jo(xu);function zt(Pe){for(var Ie=Nl.lastIndex=0;Nl.test(Pe);)++Ie;return Ie}function Fe(Pe){return Pe.match(Nl)||[]}function Se(Pe){return Pe.match(Gf)||[]}var He=function Pe(Ie){Ie=Ie==null?Qi:nt.defaults(Qi.Object(),Ie,nt.pick(Qi,rf));var Ze=Ie.Array,Lt=Ie.Date,Zt=Ie.Error,An=Ie.Function,Un=Ie.Math,Ln=Ie.Object,Wr=Ie.RegExp,Gr=Ie.String,Br=Ie.TypeError,Xr=Ze.prototype,_a=An.prototype,ga=Ln.prototype,Na=Ie["__core-js_shared__"],ta=_a.toString,Yr=ga.hasOwnProperty,_i=0,bs=function(){var g=/[^.]+$/.exec(Na&&Na.keys&&Na.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Gl=ga.toString,dc=ta.call(Ln),Zh=Qi._,ig=Wr("^"+ta.call(Yr).replace(di,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sf=fu?Ie.Buffer:M,zl=Ie.Symbol,cl=Ie.Uint8Array,Bo=sf?sf.allocUnsafe:M,Ul=b(Ln.getPrototypeOf,Ln),Jh=Ln.create,Vl=ga.propertyIsEnumerable,Uf=Xr.splice,Qh=zl?zl.isConcatSpreadable:M,Vf=zl?zl.iterator:M,hc=zl?zl.toStringTag:M,jd=function(){try{var g=kn(Ln,"defineProperty");return g({},"",{}),g}catch(O){}}(),Wp=Ie.clearTimeout!==Qi.clearTimeout&&Ie.clearTimeout,Ld=Lt&&Lt.now!==Qi.Date.now&&Lt.now,og=Ie.setTimeout!==Qi.setTimeout&&Ie.setTimeout,Tu=Un.ceil,Hf=Un.floor,vc=Ln.getOwnPropertySymbols,$p=sf?sf.isBuffer:M,Wf=Ie.isFinite,Xp=Xr.join,Hl=b(Ln.keys,Ln),xi=Un.max,is=Un.min,sg=Lt.now,ug=Ie.parseInt,qh=Un.random,lg=Xr.reverse,$f=kn(Ie,"DataView"),uf=kn(Ie,"Map"),_d=kn(Ie,"Promise"),gc=kn(Ie,"Set"),Cs=kn(Ie,"WeakMap"),lf=kn(Ln,"create"),Fd=Cs&&new Cs,_s={},ev=Hi($f),pc=Hi(uf),Bd=Hi(_d),cg=Hi(gc),fg=Hi(Cs),Xf=zl?zl.prototype:M,cf=Xf?Xf.valueOf:M,tv=Xf?Xf.toString:M;function Le(g){if(Do(g)&&!Fa(g)&&!(g instanceof ai)){if(g instanceof os)return g;if(Yr.call(g,"__wrapped__"))return Ca(g)}return new os(g)}var ff=function(){function g(){}return function(O){if(!bo(O))return{};if(Jh)return Jh(O);g.prototype=O;var F=new g;return g.prototype=M,F}}();function fl(){}function os(g,O){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!O,this.__index__=0,this.__values__=M}Le.templateSettings={escape:ki,evaluate:mi,interpolate:na,variable:"",imports:{_:Le}},Le.prototype=fl.prototype,Le.prototype.constructor=Le,os.prototype=ff(fl.prototype),os.prototype.constructor=os;function ai(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Be,this.__views__=[]}function Kp(){var g=new ai(this.__wrapped__);return g.__actions__=Os(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=Os(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=Os(this.__views__),g}function Yp(){if(this.__filtered__){var g=new ai(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function dg(){var g=this.__wrapped__.value(),O=this.__dir__,F=Fa(g),Q=O<0,Me=F?g.length:0,Ve=pr(0,Me,this.__views__),gt=Ve.start,Mt=Ve.end,$t=Mt-gt,er=Q?Mt:gt-1,nr=this.__iteratees__,gr=nr.length,Lr=0,aa=is($t,this.__takeCount__);if(!F||!Q&&Me==$t&&aa==$t)return Du(g,this.__actions__);var wa=[];e:for(;$t--&&Lr<aa;){er+=O;for(var Za=-1,Da=g[er];++Za<gr;){var li=nr[Za],gi=li.iteratee,_u=li.type,Qs=gi(Da);if(_u==Ct)Da=Qs;else if(!Qs){if(_u==Ue)continue e;break e}}wa[Lr++]=Da}return wa}ai.prototype=ff(fl.prototype),ai.prototype.constructor=ai;function Wl(g){var O=-1,F=g==null?0:g.length;for(this.clear();++O<F;){var Q=g[O];this.set(Q[0],Q[1])}}function hg(){this.__data__=lf?lf(null):{},this.size=0}function Zp(g){var O=this.has(g)&&delete this.__data__[g];return this.size-=O?1:0,O}function df(g){var O=this.__data__;if(lf){var F=O[g];return F===Y?M:F}return Yr.call(O,g)?O[g]:M}function Gd(g){var O=this.__data__;return lf?O[g]!==M:Yr.call(O,g)}function Jp(g,O){var F=this.__data__;return this.size+=this.has(g)?0:1,F[g]=lf&&O===M?Y:O,this}Wl.prototype.clear=hg,Wl.prototype.delete=Zp,Wl.prototype.get=df,Wl.prototype.has=Gd,Wl.prototype.set=Jp;function dl(g){var O=-1,F=g==null?0:g.length;for(this.clear();++O<F;){var Q=g[O];this.set(Q[0],Q[1])}}function Qp(){this.__data__=[],this.size=0}function qp(g){var O=this.__data__,F=Au(O,g);if(F<0)return!1;var Q=O.length-1;return F==Q?O.pop():Uf.call(O,F,1),--this.size,!0}function em(g){var O=this.__data__,F=Au(O,g);return F<0?M:O[F][1]}function vg(g){return Au(this.__data__,g)>-1}function tm(g,O){var F=this.__data__,Q=Au(F,g);return Q<0?(++this.size,F.push([g,O])):F[Q][1]=O,this}dl.prototype.clear=Qp,dl.prototype.delete=qp,dl.prototype.get=em,dl.prototype.has=vg,dl.prototype.set=tm;function hl(g){var O=-1,F=g==null?0:g.length;for(this.clear();++O<F;){var Q=g[O];this.set(Q[0],Q[1])}}function nm(){this.size=0,this.__data__={hash:new Wl,map:new(uf||dl),string:new Wl}}function rm(g){var O=sn(this,g).delete(g);return this.size-=O?1:0,O}function am(g){return sn(this,g).get(g)}function hf(g){return sn(this,g).has(g)}function im(g,O){var F=sn(this,g),Q=F.size;return F.set(g,O),this.size+=F.size==Q?0:1,this}hl.prototype.clear=nm,hl.prototype.delete=rm,hl.prototype.get=am,hl.prototype.has=hf,hl.prototype.set=im;function mc(g){var O=-1,F=g==null?0:g.length;for(this.__data__=new hl;++O<F;)this.add(g[O])}function nv(g){return this.__data__.set(g,Y),this}function Kf(g){return this.__data__.has(g)}mc.prototype.add=mc.prototype.push=nv,mc.prototype.has=Kf;function Mu(g){var O=this.__data__=new dl(g);this.size=O.size}function gg(){this.__data__=new dl,this.size=0}function om(g){var O=this.__data__,F=O.delete(g);return this.size=O.size,F}function pg(g){return this.__data__.get(g)}function sm(g){return this.__data__.has(g)}function um(g,O){var F=this.__data__;if(F instanceof dl){var Q=F.__data__;if(!uf||Q.length<G-1)return Q.push([g,O]),this.size=++F.size,this;F=this.__data__=new hl(Q)}return F.set(g,O),this.size=F.size,this}Mu.prototype.clear=gg,Mu.prototype.delete=om,Mu.prototype.get=pg,Mu.prototype.has=sm,Mu.prototype.set=um;function mg(g,O){var F=Fa(g),Q=!F&&md(g),Me=!F&&!Q&&xf(g),Ve=!F&&!Q&&!Me&&yd(g),gt=F||Q||Me||Ve,Mt=gt?Po(g.length,Gr):[],$t=Mt.length;for(var er in g)(O||Yr.call(g,er))&&!(gt&&(er=="length"||Me&&(er=="offset"||er=="parent")||Ve&&(er=="buffer"||er=="byteLength"||er=="byteOffset")||Mr(er,$t)))&&Mt.push(er);return Mt}function yc(g){var O=g.length;return O?g[cv(0,O-1)]:M}function lm(g,O){return no(Os(g),vl(O,0,g.length))}function zd(g){return no(Os(g))}function Ud(g,O,F){(F!==M&&!Ol(g[O],F)||F===M&&!(O in g))&&Fs(g,O,F)}function Zu(g,O,F){var Q=g[O];(!(Yr.call(g,O)&&Ol(Q,F))||F===M&&!(O in g))&&Fs(g,O,F)}function Au(g,O){for(var F=g.length;F--;)if(Ol(g[F][0],O))return F;return-1}function cm(g,O,F,Q){return gl(g,function(Me,Ve,gt){O(Q,Me,F(Me),gt)}),Q}function bc(g,O){return g&&Iu(O,cs(O),g)}function Cc(g,O){return g&&Iu(O,yu(O),g)}function Fs(g,O,F){O=="__proto__"&&jd?jd(g,O,{configurable:!0,enumerable:!0,value:F,writable:!0}):g[O]=F}function Yf(g,O){for(var F=-1,Q=O.length,Me=Ze(Q),Ve=g==null;++F<Q;)Me[F]=Ve?M:Dm(g,O[F]);return Me}function vl(g,O,F){return g===g&&(F!==M&&(g=g<=F?g:F),O!==M&&(g=g>=O?g:O)),g}function ss(g,O,F,Q,Me,Ve){var gt,Mt=O&ae,$t=O&te,er=O&ce;if(F&&(gt=Me?F(g,Q,Me,Ve):F(g)),gt!==M)return gt;if(!bo(g))return g;var nr=Fa(g);if(nr){if(gt=Xt(g),!Mt)return Os(g,gt)}else{var gr=Gn(g),Lr=gr==En||gr==lt;if(xf(g))return Cf(g,Mt);if(gr==Ot||gr==rr||Lr&&!Me){if(gt=$t||Lr?{}:Ht(g),!Mt)return $t?pm(g,Cc(gt,g)):gv(g,bc(gt,g))}else{if(!hi[gr])return Me?g:{};gt=Wn(g,gr,Mt)}}Ve||(Ve=new Mu);var aa=Ve.get(g);if(aa)return aa;Ve.set(g,gt),mb(g)?g.forEach(function(Da){gt.add(ss(Da,O,F,Da,g,Ve))}):vb(g)&&g.forEach(function(Da,li){gt.set(li,ss(Da,O,F,li,g,Ve))});var wa=er?$t?me:bv:$t?yu:cs,Za=nr?M:wa(g);return it(Za||g,function(Da,li){Za&&(li=Da,Da=g[li]),Zu(gt,li,ss(Da,O,F,li,g,Ve))}),gt}function rv(g){var O=cs(g);return function(F){return Vd(F,g,O)}}function Vd(g,O,F){var Q=F.length;if(g==null)return!Q;for(g=Ln(g);Q--;){var Me=F[Q],Ve=O[Me],gt=g[Me];if(gt===M&&!(Me in g)||!Ve(gt))return!1}return!0}function Zf(g,O,F){if(typeof g!="function")throw new Br(X);return ka(function(){g.apply(M,F)},O)}function vf(g,O,F,Q){var Me=-1,Ve=cr,gt=!0,Mt=g.length,$t=[],er=O.length;if(!Mt)return $t;F&&(O=zn(O,mo(F))),Q?(Ve=en,gt=!1):O.length>=G&&(Ve=ys,gt=!1,O=new mc(O));e:for(;++Me<Mt;){var nr=g[Me],gr=F==null?nr:F(nr);if(nr=Q||nr!==0?nr:0,gt&&gr===gr){for(var Lr=er;Lr--;)if(O[Lr]===gr)continue e;$t.push(nr)}else Ve(O,gr,Q)||$t.push(nr)}return $t}var gl=Ru(Pu),av=Ru(Qf,!0);function yg(g,O){var F=!0;return gl(g,function(Q,Me,Ve){return F=!!O(Q,Me,Ve),F}),F}function Jf(g,O,F){for(var Q=-1,Me=g.length;++Q<Me;){var Ve=g[Q],gt=O(Ve);if(gt!=null&&(Mt===M?gt===gt&&!Lu(gt):F(gt,Mt)))var Mt=gt,$t=Ve}return $t}function iv(g,O,F,Q){var Me=g.length;for(F=Ha(F),F<0&&(F=-F>Me?0:Me+F),Q=Q===M||Q>Me?Me:Ha(Q),Q<0&&(Q+=Me),Q=F>Q?0:km(Q);F<Q;)g[F++]=O;return g}function Hd(g,O){var F=[];return gl(g,function(Q,Me,Ve){O(Q,Me,Ve)&&F.push(Q)}),F}function qo(g,O,F,Q,Me){var Ve=-1,gt=g.length;for(F||(F=gn),Me||(Me=[]);++Ve<gt;){var Mt=g[Ve];O>0&&F(Mt)?O>1?qo(Mt,O-1,F,Q,Me):ia(Me,Mt):Q||(Me[Me.length]=Mt)}return Me}var Wd=pv(),ov=pv(!0);function Pu(g,O){return g&&Wd(g,O,cs)}function Qf(g,O){return g&&ov(g,O,cs)}function qf(g,O){return wn(O,function(F){return Rc(g[F])})}function $l(g,O){O=Es(O,g);for(var F=0,Q=O.length;g!=null&&F<Q;)g=g[Bi(O[F++])];return F&&F==Q?g:M}function $d(g,O,F){var Q=O(g);return Fa(g)?Q:ia(Q,F(g))}function us(g){return g==null?g===M?Qn:At:hc&&hc in Ln(g)?ir(g):Pa(g)}function Xd(g,O){return g>O}function sv(g,O){return g!=null&&Yr.call(g,O)}function bg(g,O){return g!=null&&O in Ln(g)}function Cg(g,O,F){return g>=is(O,F)&&g<xi(O,F)}function ed(g,O,F){for(var Q=F?en:cr,Me=g[0].length,Ve=g.length,gt=Ve,Mt=Ze(Ve),$t=Infinity,er=[];gt--;){var nr=g[gt];gt&&O&&(nr=zn(nr,mo(O))),$t=is(nr.length,$t),Mt[gt]=!F&&(O||Me>=120&&nr.length>=120)?new mc(gt&&nr):M}nr=g[0];var gr=-1,Lr=Mt[0];e:for(;++gr<Me&&er.length<$t;){var aa=nr[gr],wa=O?O(aa):aa;if(aa=F||aa!==0?aa:0,!(Lr?ys(Lr,wa):Q(er,wa,F))){for(gt=Ve;--gt;){var Za=Mt[gt];if(!(Za?ys(Za,wa):Q(g[gt],wa,F)))continue e}Lr&&Lr.push(wa),er.push(aa)}}return er}function Yi(g,O,F,Q){return Pu(g,function(Me,Ve,gt){O(Q,F(Me),Ve,gt)}),Q}function gf(g,O,F){O=Es(O,g),g=Ma(g,O);var Q=g==null?g:g[Bi(xt(O))];return Q==null?M:Ee(Q,g,F)}function Kd(g){return Do(g)&&us(g)==rr}function uv(g){return Do(g)&&us(g)==Xe}function Ju(g){return Do(g)&&us(g)==Jt}function Ks(g,O,F,Q,Me){return g===O?!0:g==null||O==null||!Do(g)&&!Do(O)?g!==g&&O!==O:td(g,O,F,Q,Ks,Me)}function td(g,O,F,Q,Me,Ve){var gt=Fa(g),Mt=Fa(O),$t=gt?Pt:Gn(g),er=Mt?Pt:Gn(O);$t=$t==rr?Ot:$t,er=er==rr?Ot:er;var nr=$t==Ot,gr=er==Ot,Lr=$t==er;if(Lr&&xf(g)){if(!xf(O))return!1;gt=!0,nr=!1}if(Lr&&!nr)return Ve||(Ve=new Mu),gt||yd(g)?yv(g,O,F,Q,Me,Ve):gd(g,O,$t,F,Q,Me,Ve);if(!(F&ee)){var aa=nr&&Yr.call(g,"__wrapped__"),wa=gr&&Yr.call(O,"__wrapped__");if(aa||wa){var Za=aa?g.value():g,Da=wa?O.value():O;return Ve||(Ve=new Mu),Me(Za,Da,F,Q,Ve)}}return Lr?(Ve||(Ve=new Mu),mm(g,O,F,Q,Me,Ve)):!1}function pl(g){return Do(g)&&Gn(g)==Tt}function Qu(g,O,F,Q){var Me=F.length,Ve=Me,gt=!Q;if(g==null)return!Ve;for(g=Ln(g);Me--;){var Mt=F[Me];if(gt&&Mt[2]?Mt[1]!==g[Mt[0]]:!(Mt[0]in g))return!1}for(;++Me<Ve;){Mt=F[Me];var $t=Mt[0],er=g[$t],nr=Mt[1];if(gt&&Mt[2]){if(er===M&&!($t in g))return!1}else{var gr=new Mu;if(Q)var Lr=Q(er,nr,$t,g,O,gr);if(!(Lr===M?Ks(nr,er,ee|H,Q,gr):Lr))return!1}}return!0}function Xl(g){if(!bo(g)||_r(g))return!1;var O=Rc(g)?ig:iu;return O.test(Hi(g))}function nd(g){return Do(g)&&us(g)==T}function rd(g){return Do(g)&&Gn(g)==bn}function Kl(g){return Do(g)&&_g(g.length)&&!!wi[us(g)]}function Yl(g){return typeof g=="function"?g:g==null?bu:typeof g=="object"?Fa(g)?Zd(g[0],g[1]):Yd(g):jb(g)}function ml(g){if(!dr(g))return Hl(g);var O=[];for(var F in Ln(g))Yr.call(g,F)&&F!="constructor"&&O.push(F);return O}function Ec(g){if(!bo(g))return Tr(g);var O=dr(g),F=[];for(var Q in g)Q=="constructor"&&(O||!Yr.call(g,Q))||F.push(Q);return F}function pf(g,O){return g<O}function Oc(g,O){var F=-1,Q=mu(g)?Ze(g.length):[];return gl(g,function(Me,Ve,gt){Q[++F]=O(Me,Ve,gt)}),Q}function Yd(g){var O=Wt(g);return O.length==1&&O[0][2]?Sn(O[0][0],O[0][1]):function(F){return F===g||Qu(F,g,O)}}function Zd(g,O){return jn(g)&&qn(O)?Sn(Bi(g),O):function(F){var Q=Dm(F,g);return Q===M&&Q===O?Im(F,g):Ks(O,Q,ee|H)}}function yl(g,O,F,Q,Me){g!==O&&Wd(O,function(Ve,gt){if(Me||(Me=new Mu),bo(Ve))mf(g,O,gt,F,yl,Q,Me);else{var Mt=Q?Q(to(g,gt),Ve,gt+"",g,O,Me):M;Mt===M&&(Mt=Ve),Ud(g,gt,Mt)}},yu)}function mf(g,O,F,Q,Me,Ve,gt){var Mt=to(g,F),$t=to(O,F),er=gt.get($t);if(er){Ud(g,F,er);return}var nr=Ve?Ve(Mt,$t,F+"",g,O,gt):M,gr=nr===M;if(gr){var Lr=Fa($t),aa=!Lr&&xf($t),wa=!Lr&&!aa&&yd($t);nr=$t,Lr||aa||wa?Fa(Mt)?nr=Mt:zo(Mt)?nr=Os(Mt):aa?(gr=!1,nr=Cf($t,!0)):wa?(gr=!1,nr=qd($t,!0)):nr=[]:ih($t)||md($t)?(nr=Mt,md(Mt)?nr=Cb(Mt):(!bo(Mt)||Rc(Mt))&&(nr=Ht($t))):gr=!1}gr&&(gt.set($t,nr),Me(nr,$t,Q,Ve,gt),gt.delete($t)),Ud(g,F,nr)}function Eg(g,O){var F=g.length;if(!!F)return O+=O<0?F:0,Mr(O,F)?g[O]:M}function lv(g,O,F){O.length?O=zn(O,function(Ve){return Fa(Ve)?function(gt){return $l(gt,Ve.length===1?Ve[0]:Ve)}:Ve}):O=[bu];var Q=-1;O=zn(O,mo(Dt()));var Me=Oc(g,function(Ve,gt,Mt){var $t=zn(O,function(er){return er(Ve)});return{criteria:$t,index:++Q,value:Ve}});return vu(Me,function(Ve,gt){return gm(Ve,gt,F)})}function Og(g,O){return Zl(g,O,function(F,Q){return Im(g,Q)})}function Zl(g,O,F){for(var Q=-1,Me=O.length,Ve={};++Q<Me;){var gt=O[Q],Mt=$l(g,gt);F(Mt,gt)&&id(Ve,Es(gt,g),Mt)}return Ve}function wg(g){return function(O){return $l(O,g)}}function ad(g,O,F,Q){var Me=Q?Ti:ei,Ve=-1,gt=O.length,Mt=g;for(g===O&&(O=Os(O)),F&&(Mt=zn(g,mo(F)));++Ve<gt;)for(var $t=0,er=O[Ve],nr=F?F(er):er;($t=Me(Mt,nr,$t,Q))>-1;)Mt!==g&&Uf.call(Mt,$t,1),Uf.call(g,$t,1);return g}function wc(g,O){for(var F=g?O.length:0,Q=F-1;F--;){var Me=O[F];if(F==Q||Me!==Ve){var Ve=Me;Mr(Me)?Uf.call(g,Me,1):ud(g,Me)}}return g}function cv(g,O){return g+Hf(qh()*(O-g+1))}function fm(g,O,F,Q){for(var Me=-1,Ve=xi(Tu((O-g)/(F||1)),0),gt=Ze(Ve);Ve--;)gt[Q?Ve:++Me]=g,g+=F;return gt}function fv(g,O){var F="";if(!g||O<1||O>Kt)return F;do O%2&&(F+=g),O=Hf(O/2),O&&(g+=g);while(O);return F}function Ba(g,O){return uo(sa(g,O,bu),g+"")}function dm(g){return yc(oh(g))}function dv(g,O){var F=oh(g);return no(F,vl(O,0,F.length))}function id(g,O,F,Q){if(!bo(g))return g;O=Es(O,g);for(var Me=-1,Ve=O.length,gt=Ve-1,Mt=g;Mt!=null&&++Me<Ve;){var $t=Bi(O[Me]),er=F;if($t==="__proto__"||$t==="constructor"||$t==="prototype")return g;if(Me!=gt){var nr=Mt[$t];er=Q?Q(nr,$t,Mt):M,er===M&&(er=bo(nr)?nr:Mr(O[Me+1])?[]:{})}Zu(Mt,$t,er),Mt=Mt[$t]}return g}var Jd=Fd?function(g,O){return Fd.set(g,O),g}:bu,hm=jd?function(g,O){return jd(g,"toString",{configurable:!0,enumerable:!1,value:Bm(O),writable:!0})}:bu;function hv(g){return no(oh(g))}function Ys(g,O,F){var Q=-1,Me=g.length;O<0&&(O=-O>Me?0:Me+O),F=F>Me?Me:F,F<0&&(F+=Me),Me=O>F?0:F-O>>>0,O>>>=0;for(var Ve=Ze(Me);++Q<Me;)Ve[Q]=g[Q+O];return Ve}function vm(g,O){var F;return gl(g,function(Q,Me,Ve){return F=O(Q,Me,Ve),!F}),!!F}function od(g,O,F){var Q=0,Me=g==null?Q:g.length;if(typeof O=="number"&&O===O&&Me<=un){for(;Q<Me;){var Ve=Q+Me>>>1,gt=g[Ve];gt!==null&&!Lu(gt)&&(F?gt<=O:gt<O)?Q=Ve+1:Me=Ve}return Me}return Qd(g,O,bu,F)}function Qd(g,O,F,Q){var Me=0,Ve=g==null?0:g.length;if(Ve===0)return 0;O=F(O);for(var gt=O!==O,Mt=O===null,$t=Lu(O),er=O===M;Me<Ve;){var nr=Hf((Me+Ve)/2),gr=F(g[nr]),Lr=gr!==M,aa=gr===null,wa=gr===gr,Za=Lu(gr);if(gt)var Da=Q||wa;else er?Da=wa&&(Q||Lr):Mt?Da=wa&&Lr&&(Q||!aa):$t?Da=wa&&Lr&&!aa&&(Q||!Za):aa||Za?Da=!1:Da=Q?gr<=O:gr<O;Da?Me=nr+1:Ve=nr}return is(Ve,ie)}function sd(g,O){for(var F=-1,Q=g.length,Me=0,Ve=[];++F<Q;){var gt=g[F],Mt=O?O(gt):gt;if(!F||!Ol(Mt,$t)){var $t=Mt;Ve[Me++]=gt===0?0:gt}}return Ve}function yf(g){return typeof g=="number"?g:Lu(g)?Vt:+g}function ds(g){if(typeof g=="string")return g;if(Fa(g))return zn(g,ds)+"";if(Lu(g))return tv?tv.call(g):"";var O=g+"";return O=="0"&&1/g==-Nt?"-0":O}function ku(g,O,F){var Q=-1,Me=cr,Ve=g.length,gt=!0,Mt=[],$t=Mt;if(F)gt=!1,Me=en;else if(Ve>=G){var er=O?null:kc(g);if(er)return J(er);gt=!1,Me=ys,$t=new mc}else $t=O?[]:Mt;e:for(;++Q<Ve;){var nr=g[Q],gr=O?O(nr):nr;if(nr=F||nr!==0?nr:0,gt&&gr===gr){for(var Lr=$t.length;Lr--;)if($t[Lr]===gr)continue e;O&&$t.push(gr),Mt.push(nr)}else Me($t,gr,F)||($t!==Mt&&$t.push(gr),Mt.push(nr))}return Mt}function ud(g,O){return O=Es(O,g),g=Ma(g,O),g==null||delete g[Bi(xt(O))]}function ld(g,O,F,Q){return id(g,O,F($l(g,O)),Q)}function xc(g,O,F,Q){for(var Me=g.length,Ve=Q?Me:-1;(Q?Ve--:++Ve<Me)&&O(g[Ve],Ve,g););return F?Ys(g,Q?0:Ve,Q?Ve+1:Me):Ys(g,Q?Ve+1:0,Q?Me:Ve)}function Du(g,O){var F=g;return F instanceof ai&&(F=F.value()),Fr(O,function(Q,Me){return Me.func.apply(Me.thisArg,ia([Q],Me.args))},F)}function qu(g,O,F){var Q=g.length;if(Q<2)return Q?ku(g[0]):[];for(var Me=-1,Ve=Ze(Q);++Me<Q;)for(var gt=g[Me],Mt=-1;++Mt<Q;)Mt!=Me&&(Ve[Me]=vf(Ve[Me]||gt,g[Mt],O,F));return ku(qo(Ve,1),O,F)}function cd(g,O,F){for(var Q=-1,Me=g.length,Ve=O.length,gt={};++Q<Me;){var Mt=Q<Ve?O[Q]:M;F(gt,g[Q],Mt)}return gt}function Sc(g){return zo(g)?g:[]}function Tc(g){return typeof g=="function"?g:bu}function Es(g,O){return Fa(g)?g:jn(g,O)?[g]:vo(Gi(g))}var fd=Ba;function Zs(g,O,F){var Q=g.length;return F=F===M?Q:F,!O&&F>=Q?g:Ys(g,O,F)}var bf=Wp||function(g){return Qi.clearTimeout(g)};function Cf(g,O){if(O)return g.slice();var F=g.length,Q=Bo?Bo(F):new g.constructor(F);return g.copy(Q),Q}function dd(g){var O=new g.constructor(g.byteLength);return new cl(O).set(new cl(g)),O}function Mc(g,O){var F=O?dd(g.buffer):g.buffer;return new g.constructor(F,g.byteOffset,g.byteLength)}function Ac(g){var O=new g.constructor(g.source,Wu.exec(g));return O.lastIndex=g.lastIndex,O}function xg(g){return cf?Ln(cf.call(g)):{}}function qd(g,O){var F=O?dd(g.buffer):g.buffer;return new g.constructor(F,g.byteOffset,g.length)}function Sg(g,O){if(g!==O){var F=g!==M,Q=g===null,Me=g===g,Ve=Lu(g),gt=O!==M,Mt=O===null,$t=O===O,er=Lu(O);if(!Mt&&!er&&!Ve&&g>O||Ve&&gt&&$t&&!Mt&&!er||Q&&gt&&$t||!F&&$t||!Me)return 1;if(!Q&&!Ve&&!er&&g<O||er&&F&&Me&&!Q&&!Ve||Mt&&F&&Me||!gt&&Me||!$t)return-1}return 0}function gm(g,O,F){for(var Q=-1,Me=g.criteria,Ve=O.criteria,gt=Me.length,Mt=F.length;++Q<gt;){var $t=Sg(Me[Q],Ve[Q]);if($t){if(Q>=Mt)return $t;var er=F[Q];return $t*(er=="desc"?-1:1)}}return g.index-O.index}function vv(g,O,F,Q){for(var Me=-1,Ve=g.length,gt=F.length,Mt=-1,$t=O.length,er=xi(Ve-gt,0),nr=Ze($t+er),gr=!Q;++Mt<$t;)nr[Mt]=O[Mt];for(;++Me<gt;)(gr||Me<Ve)&&(nr[F[Me]]=g[Me]);for(;er--;)nr[Mt++]=g[Me++];return nr}function bl(g,O,F,Q){for(var Me=-1,Ve=g.length,gt=-1,Mt=F.length,$t=-1,er=O.length,nr=xi(Ve-Mt,0),gr=Ze(nr+er),Lr=!Q;++Me<nr;)gr[Me]=g[Me];for(var aa=Me;++$t<er;)gr[aa+$t]=O[$t];for(;++gt<Mt;)(Lr||Me<Ve)&&(gr[aa+F[gt]]=g[Me++]);return gr}function Os(g,O){var F=-1,Q=g.length;for(O||(O=Ze(Q));++F<Q;)O[F]=g[F];return O}function Iu(g,O,F,Q){var Me=!F;F||(F={});for(var Ve=-1,gt=O.length;++Ve<gt;){var Mt=O[Ve],$t=Q?Q(F[Mt],g[Mt],Mt,F,g):M;$t===M&&($t=g[Mt]),Me?Fs(F,Mt,$t):Zu(F,Mt,$t)}return F}function gv(g,O){return Iu(g,Vn(g),O)}function pm(g,O){return Iu(g,Hn(g),O)}function hd(g,O){return function(F,Q){var Me=Fa(F)?Ge:cm,Ve=O?O():{};return Me(F,g,Dt(Q,2),Ve)}}function Ef(g){return Ba(function(O,F){var Q=-1,Me=F.length,Ve=Me>1?F[Me-1]:M,gt=Me>2?F[2]:M;for(Ve=g.length>3&&typeof Ve=="function"?(Me--,Ve):M,gt&&Dn(F[0],F[1],gt)&&(Ve=Me<3?M:Ve,Me=1),O=Ln(O);++Q<Me;){var Mt=F[Q];Mt&&g(O,Mt,Q,Ve)}return O})}function Ru(g,O){return function(F,Q){if(F==null)return F;if(!mu(F))return g(F,Q);for(var Me=F.length,Ve=O?Me:-1,gt=Ln(F);(O?Ve--:++Ve<Me)&&Q(gt[Ve],Ve,gt)!==!1;);return F}}function pv(g){return function(O,F,Q){for(var Me=-1,Ve=Ln(O),gt=Q(O),Mt=gt.length;Mt--;){var $t=gt[g?Mt:++Me];if(F(Ve[$t],$t,Ve)===!1)break}return O}}function Jl(g,O,F){var Q=O&se,Me=Pc(g);function Ve(){var gt=this&&this!==Qi&&this instanceof Ve?Me:g;return gt.apply(Q?F:this,arguments)}return Ve}function Cl(g){return function(O){O=Gi(O);var F=Qo(O)?qe(O):M,Q=F?F[0]:O.charAt(0),Me=F?Zs(F,1).join(""):O.slice(1);return Q[g]()+Me}}function El(g){return function(O){return Fr(Rb(jm(O).replace(Rl,"")),g,"")}}function Pc(g){return function(){var O=arguments;switch(O.length){case 0:return new g;case 1:return new g(O[0]);case 2:return new g(O[0],O[1]);case 3:return new g(O[0],O[1],O[2]);case 4:return new g(O[0],O[1],O[2],O[3]);case 5:return new g(O[0],O[1],O[2],O[3],O[4]);case 6:return new g(O[0],O[1],O[2],O[3],O[4],O[5]);case 7:return new g(O[0],O[1],O[2],O[3],O[4],O[5],O[6])}var F=ff(g.prototype),Q=g.apply(F,O);return bo(Q)?Q:F}}function eh(g,O,F){var Q=Pc(g);function Me(){for(var Ve=arguments.length,gt=Ze(Ve),Mt=Ve,$t=Bt(Me);Mt--;)gt[Mt]=arguments[Mt];var er=Ve<3&&gt[0]!==$t&&gt[Ve-1]!==$t?[]:k(gt,$t);if(Ve-=er.length,Ve<F)return rh(g,O,Nu,Me.placeholder,M,gt,er,M,M,F-Ve);var nr=this&&this!==Qi&&this instanceof Me?Q:g;return Ee(nr,this,gt)}return Me}function mv(g){return function(O,F,Q){var Me=Ln(O);if(!mu(O)){var Ve=Dt(F,3);O=cs(O),F=function(Mt){return Ve(Me[Mt],Mt,Me)}}var gt=g(O,F,Q);return gt>-1?Me[Ve?O[gt]:gt]:M}}function hs(g){return Js(function(O){var F=O.length,Q=F,Me=os.prototype.thru;for(g&&O.reverse();Q--;){var Ve=O[Q];if(typeof Ve!="function")throw new Br(X);if(Me&&!gt&&ct(Ve)=="wrapper")var gt=new os([],!0)}for(Q=gt?Q:F;++Q<F;){Ve=O[Q];var Mt=ct(Ve),$t=Mt=="wrapper"?ke(Ve):M;$t&&Xn($t[0])&&$t[1]==(L|ye|ve|ge)&&!$t[4].length&&$t[9]==1?gt=gt[ct($t[0])].apply(gt,$t[3]):gt=Ve.length==1&&Xn(Ve)?gt[Mt]():gt.thru(Ve)}return function(){var er=arguments,nr=er[0];if(gt&&er.length==1&&Fa(nr))return gt.plant(nr).value();for(var gr=0,Lr=F?O[gr].apply(this,er):nr;++gr<F;)Lr=O[gr].call(this,Lr);return Lr}})}function Nu(g,O,F,Q,Me,Ve,gt,Mt,$t,er){var nr=O&L,gr=O&se,Lr=O&re,aa=O&(ye|ue),wa=O&_e,Za=Lr?M:Pc(g);function Da(){for(var li=arguments.length,gi=Ze(li),_u=li;_u--;)gi[_u]=arguments[_u];if(aa)var Qs=Bt(Da),qs=as(gi,Qs);if(Q&&(gi=vv(gi,Q,Me,aa)),Ve&&(gi=bl(gi,Ve,gt,aa)),li-=qs,aa&&li<er){var Uo=k(gi,Qs);return rh(g,O,Nu,Da.placeholder,F,gi,Uo,Mt,$t,er-li)}var xl=gr?F:this,jc=Lr?xl[g]:g;return li=gi.length,Mt?gi=Ka(gi,Mt):wa&&li>1&&gi.reverse(),nr&&$t<li&&(gi.length=$t),this&&this!==Qi&&this instanceof Da&&(jc=Za||Pc(jc)),jc.apply(xl,gi)}return Da}function so(g,O){return function(F,Q){return Yi(F,g,O(Q),{})}}function ls(g,O){return function(F,Q){var Me;if(F===M&&Q===M)return O;if(F!==M&&(Me=F),Q!==M){if(Me===M)return Q;typeof F=="string"||typeof Q=="string"?(F=ds(F),Q=ds(Q)):(F=yf(F),Q=yf(Q)),Me=g(F,Q)}return Me}}function th(g){return Js(function(O){return O=zn(O,mo(Dt())),Ba(function(F){var Q=this;return g(O,function(Me){return Ee(Me,Q,F)})})})}function nh(g,O){O=O===M?" ":ds(O);var F=O.length;if(F<2)return F?fv(O,g):O;var Q=fv(O,Tu(g/Ke(O)));return Qo(O)?Zs(qe(Q),0,g).join(""):Q.slice(0,g)}function Of(g,O,F,Q){var Me=O&se,Ve=Pc(g);function gt(){for(var Mt=-1,$t=arguments.length,er=-1,nr=Q.length,gr=Ze(nr+$t),Lr=this&&this!==Qi&&this instanceof gt?Ve:g;++er<nr;)gr[er]=Q[er];for(;$t--;)gr[er++]=arguments[++Mt];return Ee(Lr,Me?F:this,gr)}return gt}function Tg(g){return function(O,F,Q){return Q&&typeof Q!="number"&&Dn(O,F,Q)&&(F=Q=M),O=Nc(O),F===M?(F=O,O=0):F=Nc(F),Q=Q===M?O<F?1:-1:Nc(Q),fm(O,F,Q,g)}}function vd(g){return function(O,F){return typeof O=="string"&&typeof F=="string"||(O=el(O),F=el(F)),g(O,F)}}function rh(g,O,F,Q,Me,Ve,gt,Mt,$t,er){var nr=O&ye,gr=nr?gt:M,Lr=nr?M:gt,aa=nr?Ve:M,wa=nr?M:Ve;O|=nr?ve:pe,O&=~(nr?pe:ve),O&q||(O&=~(se|re));var Za=[g,O,Me,aa,gr,wa,Lr,Mt,$t,er],Da=F.apply(M,Za);return Xn(g)&&yo(Da,Za),Da.placeholder=Q,Di(Da,g,O)}function ah(g){var O=Un[g];return function(F,Q){if(F=el(F),Q=Q==null?0:is(Ha(Q),292),Q&&Wf(F)){var Me=(Gi(F)+"e").split("e"),Ve=O(Me[0]+"e"+(+Me[1]+Q));return Me=(Gi(Ve)+"e").split("e"),+(Me[0]+"e"+(+Me[1]-Q))}return O(F)}}var kc=gc&&1/J(new gc([,-0]))[1]==Nt?function(g){return new gc(g)}:Um;function Mg(g){return function(O){var F=Gn(O);return F==Tt?ll(O):F==bn?he(O):ms(O,g(O))}}function Fi(g,O,F,Q,Me,Ve,gt,Mt){var $t=O&re;if(!$t&&typeof g!="function")throw new Br(X);var er=Q?Q.length:0;if(er||(O&=~(ve|pe),Q=Me=M),gt=gt===M?gt:xi(Ha(gt),0),Mt=Mt===M?Mt:Ha(Mt),er-=Me?Me.length:0,O&pe){var nr=Q,gr=Me;Q=Me=M}var Lr=$t?M:ke(g),aa=[g,O,F,Q,Me,nr,gr,Ve,gt,Mt];if(Lr&&Ta(aa,Lr),g=aa[0],O=aa[1],F=aa[2],Q=aa[3],Me=aa[4],Mt=aa[9]=aa[9]===M?$t?0:g.length:xi(aa[9]-er,0),!Mt&&O&(ye|ue)&&(O&=~(ye|ue)),!O||O==se)var wa=Jl(g,O,F);else O==ye||O==ue?wa=eh(g,O,Mt):(O==ve||O==(se|ve))&&!Me.length?wa=Of(g,O,F,Q):wa=Nu.apply(M,aa);var Za=Lr?Jd:yo;return Di(Za(wa,aa),g,O)}function Ag(g,O,F,Q){return g===M||Ol(g,ga[F])&&!Yr.call(Q,F)?O:g}function wf(g,O,F,Q,Me,Ve){return bo(g)&&bo(O)&&(Ve.set(O,g),yl(g,O,M,wf,Ve),Ve.delete(O)),g}function Pg(g){return ih(g)?M:g}function yv(g,O,F,Q,Me,Ve){var gt=F&ee,Mt=g.length,$t=O.length;if(Mt!=$t&&!(gt&&$t>Mt))return!1;var er=Ve.get(g),nr=Ve.get(O);if(er&&nr)return er==O&&nr==g;var gr=-1,Lr=!0,aa=F&H?new mc:M;for(Ve.set(g,O),Ve.set(O,g);++gr<Mt;){var wa=g[gr],Za=O[gr];if(Q)var Da=gt?Q(Za,wa,gr,O,g,Ve):Q(wa,Za,gr,g,O,Ve);if(Da!==M){if(Da)continue;Lr=!1;break}if(aa){if(!Fo(O,function(li,gi){if(!ys(aa,gi)&&(wa===li||Me(wa,li,F,Q,Ve)))return aa.push(gi)})){Lr=!1;break}}else if(!(wa===Za||Me(wa,Za,F,Q,Ve))){Lr=!1;break}}return Ve.delete(g),Ve.delete(O),Lr}function gd(g,O,F,Q,Me,Ve,gt){switch(F){case Yt:if(g.byteLength!=O.byteLength||g.byteOffset!=O.byteOffset)return!1;g=g.buffer,O=O.buffer;case Xe:return!(g.byteLength!=O.byteLength||!Ve(new cl(g),new cl(O)));case ur:case Jt:case st:return Ol(+g,+O);case Mn:return g.name==O.name&&g.message==O.message;case T:case an:return g==O+"";case Tt:var Mt=ll;case bn:var $t=Q&ee;if(Mt||(Mt=J),g.size!=O.size&&!$t)return!1;var er=gt.get(g);if(er)return er==O;Q|=H,gt.set(g,O);var nr=yv(Mt(g),Mt(O),Q,Me,Ve,gt);return gt.delete(g),nr;case Jn:if(cf)return cf.call(g)==cf.call(O)}return!1}function mm(g,O,F,Q,Me,Ve){var gt=F&ee,Mt=bv(g),$t=Mt.length,er=bv(O),nr=er.length;if($t!=nr&&!gt)return!1;for(var gr=$t;gr--;){var Lr=Mt[gr];if(!(gt?Lr in O:Yr.call(O,Lr)))return!1}var aa=Ve.get(g),wa=Ve.get(O);if(aa&&wa)return aa==O&&wa==g;var Za=!0;Ve.set(g,O),Ve.set(O,g);for(var Da=gt;++gr<$t;){Lr=Mt[gr];var li=g[Lr],gi=O[Lr];if(Q)var _u=gt?Q(gi,li,Lr,O,g,Ve):Q(li,gi,Lr,g,O,Ve);if(!(_u===M?li===gi||Me(li,gi,F,Q,Ve):_u)){Za=!1;break}Da||(Da=Lr=="constructor")}if(Za&&!Da){var Qs=g.constructor,qs=O.constructor;Qs!=qs&&"constructor"in g&&"constructor"in O&&!(typeof Qs=="function"&&Qs instanceof Qs&&typeof qs=="function"&&qs instanceof qs)&&(Za=!1)}return Ve.delete(g),Ve.delete(O),Za}function Js(g){return uo(sa(g,M,We),g+"")}function bv(g){return $d(g,cs,Vn)}function me(g){return $d(g,yu,Hn)}var ke=Fd?function(g){return Fd.get(g)}:Um;function ct(g){for(var O=g.name+"",F=_s[O],Q=Yr.call(_s,O)?F.length:0;Q--;){var Me=F[Q],Ve=Me.func;if(Ve==null||Ve==g)return Me.name}return O}function Bt(g){var O=Yr.call(Le,"placeholder")?Le:g;return O.placeholder}function Dt(){var g=Le.iteratee||Gm;return g=g===Gm?Yl:g,arguments.length?g(arguments[0],arguments[1]):g}function sn(g,O){var F=g.__data__;return _n(O)?F[typeof O=="string"?"string":"hash"]:F.map}function Wt(g){for(var O=cs(g),F=O.length;F--;){var Q=O[F],Me=g[Q];O[F]=[Q,Me,qn(Me)]}return O}function kn(g,O){var F=fc(g,O);return Xl(F)?F:M}function ir(g){var O=Yr.call(g,hc),F=g[hc];try{g[hc]=M;var Q=!0}catch(Ve){}var Me=Gl.call(g);return Q&&(O?g[hc]=F:delete g[hc]),Me}var Vn=vc?function(g){return g==null?[]:(g=Ln(g),wn(vc(g),function(O){return Vl.call(g,O)}))}:Vm,Hn=vc?function(g){for(var O=[];g;)ia(O,Vn(g)),g=Ul(g);return O}:Vm,Gn=us;($f&&Gn(new $f(new ArrayBuffer(1)))!=Yt||uf&&Gn(new uf)!=Tt||_d&&Gn(_d.resolve())!=dt||gc&&Gn(new gc)!=bn||Cs&&Gn(new Cs)!=De)&&(Gn=function(g){var O=us(g),F=O==Ot?g.constructor:M,Q=F?Hi(F):"";if(Q)switch(Q){case ev:return Yt;case pc:return Tt;case Bd:return dt;case cg:return bn;case fg:return De}return O});function pr(g,O,F){for(var Q=-1,Me=F.length;++Q<Me;){var Ve=F[Q],gt=Ve.size;switch(Ve.type){case"drop":g+=gt;break;case"dropRight":O-=gt;break;case"take":O=is(O,g+gt);break;case"takeRight":g=xi(g,O-gt);break}}return{start:g,end:O}}function fr(g){var O=g.match(zi);return O?O[1].split(Ko):[]}function Yn(g,O,F){O=Es(O,g);for(var Q=-1,Me=O.length,Ve=!1;++Q<Me;){var gt=Bi(O[Q]);if(!(Ve=g!=null&&F(g,gt)))break;g=g[gt]}return Ve||++Q!=Me?Ve:(Me=g==null?0:g.length,!!Me&&_g(Me)&&Mr(gt,Me)&&(Fa(g)||md(g)))}function Xt(g){var O=g.length,F=new g.constructor(O);return O&&typeof g[0]=="string"&&Yr.call(g,"index")&&(F.index=g.index,F.input=g.input),F}function Ht(g){return typeof g.constructor=="function"&&!dr(g)?ff(Ul(g)):{}}function Wn(g,O,F){var Q=g.constructor;switch(O){case Xe:return dd(g);case ur:case Jt:return new Q(+g);case Yt:return Mc(g,F);case ln:case lr:case Hr:case ar:case mr:case yr:case kr:case Ur:case Va:return qd(g,F);case Tt:return new Q;case st:case an:return new Q(g);case T:return Ac(g);case bn:return new Q;case Jn:return xg(g)}}function br(g,O){var F=O.length;if(!F)return g;var Q=F-1;return O[Q]=(F>1?"& ":"")+O[Q],O=O.join(F>2?", ":" "),g.replace(yi,`{
/* [wrapped with `+O+`] */
`)}function gn(g){return Fa(g)||md(g)||!!(Qh&&g&&g[Qh])}function Mr(g,O){var F=typeof g;return O=O==null?Kt:O,!!O&&(F=="number"||F!="symbol"&&Vs.test(g))&&g>-1&&g%1==0&&g<O}function Dn(g,O,F){if(!bo(F))return!1;var Q=typeof O;return(Q=="number"?mu(F)&&Mr(O,F.length):Q=="string"&&O in F)?Ol(F[O],g):!1}function jn(g,O){if(Fa(g))return!1;var F=typeof g;return F=="number"||F=="symbol"||F=="boolean"||g==null||Lu(g)?!0:go.test(g)||!Ki.test(g)||O!=null&&g in Ln(O)}function _n(g){var O=typeof g;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?g!=="__proto__":g===null}function Xn(g){var O=ct(g),F=Le[O];if(typeof F!="function"||!(O in ai.prototype))return!1;if(g===F)return!0;var Q=ke(F);return!!Q&&g===Q[0]}function _r(g){return!!bs&&bs in g}var oa=Na?Rc:Hm;function dr(g){var O=g&&g.constructor,F=typeof O=="function"&&O.prototype||ga;return g===F}function qn(g){return g===g&&!bo(g)}function Sn(g,O){return function(F){return F==null?!1:F[g]===O&&(O!==M||g in Ln(F))}}function Qr(g){var O=Ev(g,function(Q){return F.size===K&&F.clear(),Q}),F=O.cache;return O}function Ta(g,O){var F=g[1],Q=O[1],Me=F|Q,Ve=Me<(se|re|L),gt=Q==L&&F==ye||Q==L&&F==ge&&g[7].length<=O[8]||Q==(L|ge)&&O[7].length<=O[8]&&F==ye;if(!(Ve||gt))return g;Q&se&&(g[2]=O[2],Me|=F&se?0:q);var Mt=O[3];if(Mt){var $t=g[3];g[3]=$t?vv($t,Mt,O[4]):Mt,g[4]=$t?k(g[3],ne):O[4]}return Mt=O[5],Mt&&($t=g[5],g[5]=$t?bl($t,Mt,O[6]):Mt,g[6]=$t?k(g[5],ne):O[6]),Mt=O[7],Mt&&(g[7]=Mt),Q&L&&(g[8]=g[8]==null?O[8]:is(g[8],O[8])),g[9]==null&&(g[9]=O[9]),g[0]=O[0],g[1]=Me,g}function Tr(g){var O=[];if(g!=null)for(var F in Ln(g))O.push(F);return O}function Pa(g){return Gl.call(g)}function sa(g,O,F){return O=xi(O===M?g.length-1:O,0),function(){for(var Q=arguments,Me=-1,Ve=xi(Q.length-O,0),gt=Ze(Ve);++Me<Ve;)gt[Me]=Q[O+Me];Me=-1;for(var Mt=Ze(O+1);++Me<O;)Mt[Me]=Q[Me];return Mt[O]=F(gt),Ee(g,this,Mt)}}function Ma(g,O){return O.length<2?g:$l(g,Ys(O,0,-1))}function Ka(g,O){for(var F=g.length,Q=is(O.length,F),Me=Os(g);Q--;){var Ve=O[Q];g[Q]=Mr(Ve,F)?Me[Ve]:M}return g}function to(g,O){if(!(O==="constructor"&&typeof g[O]=="function")&&O!="__proto__")return g[O]}var yo=Ii(Jd),ka=og||function(g,O){return Qi.setTimeout(g,O)},uo=Ii(hm);function Di(g,O,F){var Q=O+"";return uo(g,br(Q,lo(fr(Q),F)))}function Ii(g){var O=0,F=0;return function(){var Q=sg(),Me=D-(Q-F);if(F=Q,Me>0){if(++O>=Qe)return arguments[0]}else O=0;return g.apply(M,arguments)}}function no(g,O){var F=-1,Q=g.length,Me=Q-1;for(O=O===M?Q:O;++F<O;){var Ve=cv(F,Me),gt=g[Ve];g[Ve]=g[F],g[F]=gt}return g.length=O,g}var vo=Qr(function(g){var O=[];return g.charCodeAt(0)===46&&O.push(""),g.replace(ra,function(F,Q,Me,Ve){O.push(Me?Ve.replace(Yo,"$1"):Q||F)}),O});function Bi(g){if(typeof g=="string"||Lu(g))return g;var O=g+"";return O=="0"&&1/g==-Nt?"-0":O}function Hi(g){if(g!=null){try{return ta.call(g)}catch(O){}try{return g+""}catch(O){}}return""}function lo(g,O){return it(rn,function(F){var Q="_."+F[0];O&F[1]&&!cr(g,Q)&&g.push(Q)}),g.sort()}function Ca(g){if(g instanceof ai)return g.clone();var O=new os(g.__wrapped__,g.__chain__);return O.__actions__=Os(g.__actions__),O.__index__=g.__index__,O.__values__=g.__values__,O}function es(g,O,F){(F?Dn(g,O,F):O===M)?O=1:O=xi(Ha(O),0);var Q=g==null?0:g.length;if(!Q||O<1)return[];for(var Me=0,Ve=0,gt=Ze(Tu(Q/O));Me<Q;)gt[Ve++]=Ys(g,Me,Me+=O);return gt}function ii(g){for(var O=-1,F=g==null?0:g.length,Q=0,Me=[];++O<F;){var Ve=g[O];Ve&&(Me[Q++]=Ve)}return Me}function Jr(){var g=arguments.length;if(!g)return[];for(var O=Ze(g-1),F=arguments[0],Q=g;Q--;)O[Q-1]=arguments[Q];return ia(Fa(F)?Os(F):[F],qo(O,1))}var Ea=Ba(function(g,O){return zo(g)?vf(g,qo(O,1,zo,!0)):[]}),Ga=Ba(function(g,O){var F=xt(O);return zo(F)&&(F=M),zo(g)?vf(g,qo(O,1,zo,!0),Dt(F,2)):[]}),Go=Ba(function(g,O){var F=xt(O);return zo(F)&&(F=M),zo(g)?vf(g,qo(O,1,zo,!0),M,F):[]});function ws(g,O,F){var Q=g==null?0:g.length;return Q?(O=F||O===M?1:Ha(O),Ys(g,O<0?0:O,Q)):[]}function Dc(g,O,F){var Q=g==null?0:g.length;return Q?(O=F||O===M?1:Ha(O),O=Q-O,Ys(g,0,O<0?0:O)):[]}function et(g,O){return g&&g.length?xc(g,Dt(O,3),!0,!0):[]}function Qt(g,O){return g&&g.length?xc(g,Dt(O,3),!0):[]}function Gt(g,O,F,Q){var Me=g==null?0:g.length;return Me?(F&&typeof F!="number"&&Dn(g,O,F)&&(F=0,Q=Me),iv(g,O,F,Q)):[]}function Or(g,O,F){var Q=g==null?0:g.length;if(!Q)return-1;var Me=F==null?0:Ha(F);return Me<0&&(Me=xi(Q+Me,0)),ps(g,Dt(O,3),Me)}function Oa(g,O,F){var Q=g==null?0:g.length;if(!Q)return-1;var Me=Q-1;return F!==M&&(Me=Ha(F),Me=F<0?xi(Q+Me,0):is(Me,Q-1)),ps(g,Dt(O,3),Me,!0)}function We(g){var O=g==null?0:g.length;return O?qo(g,1):[]}function Ne(g){var O=g==null?0:g.length;return O?qo(g,Nt):[]}function ht(g,O){var F=g==null?0:g.length;return F?(O=O===M?1:Ha(O),qo(g,O)):[]}function kt(g){for(var O=-1,F=g==null?0:g.length,Q={};++O<F;){var Me=g[O];Q[Me[0]]=Me[1]}return Q}function Rt(g){return g&&g.length?g[0]:M}function bt(g,O,F){var Q=g==null?0:g.length;if(!Q)return-1;var Me=F==null?0:Ha(F);return Me<0&&(Me=xi(Q+Me,0)),ei(g,O,Me)}function vt(g){var O=g==null?0:g.length;return O?Ys(g,0,-1):[]}var St=Ba(function(g){var O=zn(g,Sc);return O.length&&O[0]===g[0]?ed(O):[]}),$e=Ba(function(g){var O=xt(g),F=zn(g,Sc);return O===xt(F)?O=M:F.pop(),F.length&&F[0]===g[0]?ed(F,Dt(O,2)):[]}),ft=Ba(function(g){var O=xt(g),F=zn(g,Sc);return O=typeof O=="function"?O:M,O&&F.pop(),F.length&&F[0]===g[0]?ed(F,M,O):[]});function ze(g,O){return g==null?"":Xp.call(g,O)}function xt(g){var O=g==null?0:g.length;return O?g[O-1]:M}function _t(g,O,F){var Q=g==null?0:g.length;if(!Q)return-1;var Me=Q;return F!==M&&(Me=Ha(F),Me=Me<0?xi(Q+Me,0):is(Me,Q-1)),O===O?Re(g,O,Me):ps(g,Mi,Me,!0)}function yn(g,O){return g&&g.length?Eg(g,Ha(O)):M}var Cn=Ba(cn);function cn(g,O){return g&&g.length&&O&&O.length?ad(g,O):g}function Zn(g,O,F){return g&&g.length&&O&&O.length?ad(g,O,Dt(F,2)):g}function jr(g,O,F){return g&&g.length&&O&&O.length?ad(g,O,M,F):g}var xa=Js(function(g,O){var F=g==null?0:g.length,Q=Yf(g,O);return wc(g,zn(O,function(Me){return Mr(Me,F)?+Me:Me}).sort(Sg)),Q});function Ar(g,O){var F=[];if(!(g&&g.length))return F;var Q=-1,Me=[],Ve=g.length;for(O=Dt(O,3);++Q<Ve;){var gt=g[Q];O(gt,Q,g)&&(F.push(gt),Me.push(Q))}return wc(g,Me),F}function $r(g){return g==null?g:lg.call(g)}function pa(g,O,F){var Q=g==null?0:g.length;return Q?(F&&typeof F!="number"&&Dn(g,O,F)?(O=0,F=Q):(O=O==null?0:Ha(O),F=F===M?Q:Ha(F)),Ys(g,O,F)):[]}function Ya(g,O){return od(g,O)}function ro(g,O,F){return Qd(g,O,Dt(F,2))}function xs(g,O){var F=g==null?0:g.length;if(F){var Q=od(g,O);if(Q<F&&Ol(g[Q],O))return Q}return-1}function Cv(g,O){return od(g,O,!0)}function pu(g,O,F){return Qd(g,O,Dt(F,2),!0)}function kg(g,O){var F=g==null?0:g.length;if(F){var Q=od(g,O,!0)-1;if(Ol(g[Q],O))return Q}return-1}function ju(g){return g&&g.length?sd(g):[]}function Dg(g,O){return g&&g.length?sd(g,Dt(O,2)):[]}function DE(g){var O=g==null?0:g.length;return O?Ys(g,1,O):[]}function IE(g,O,F){return g&&g.length?(O=F||O===M?1:Ha(O),Ys(g,0,O<0?0:O)):[]}function RE(g,O,F){var Q=g==null?0:g.length;return Q?(O=F||O===M?1:Ha(O),O=Q-O,Ys(g,O<0?0:O,Q)):[]}function NE(g,O){return g&&g.length?xc(g,Dt(O,3),!1,!0):[]}function jE(g,O){return g&&g.length?xc(g,Dt(O,3)):[]}var LE=Ba(function(g){return ku(qo(g,1,zo,!0))}),_E=Ba(function(g){var O=xt(g);return zo(O)&&(O=M),ku(qo(g,1,zo,!0),Dt(O,2))}),FE=Ba(function(g){var O=xt(g);return O=typeof O=="function"?O:M,ku(qo(g,1,zo,!0),M,O)});function BE(g){return g&&g.length?ku(g):[]}function Ic(g,O){return g&&g.length?ku(g,Dt(O,2)):[]}function GE(g,O){return O=typeof O=="function"?O:M,g&&g.length?ku(g,M,O):[]}function ym(g){if(!(g&&g.length))return[];var O=0;return g=wn(g,function(F){if(zo(F))return O=xi(F.length,O),!0}),Po(O,function(F){return zn(g,eo(F))})}function Yy(g,O){if(!(g&&g.length))return[];var F=ym(g);return O==null?F:zn(F,function(Q){return Ee(O,M,Q)})}var bm=Ba(function(g,O){return zo(g)?vf(g,O):[]}),Zy=Ba(function(g){return qu(wn(g,zo))}),zE=Ba(function(g){var O=xt(g);return zo(O)&&(O=M),qu(wn(g,zo),Dt(O,2))}),Cm=Ba(function(g){var O=xt(g);return O=typeof O=="function"?O:M,qu(wn(g,zo),M,O)}),UE=Ba(ym);function Jy(g,O){return cd(g||[],O||[],Zu)}function VE(g,O){return cd(g||[],O||[],id)}var Qy=Ba(function(g){var O=g.length,F=O>1?g[O-1]:M;return F=typeof F=="function"?(g.pop(),F):M,Yy(g,F)});function Em(g){var O=Le(g);return O.__chain__=!0,O}function HE(g,O){return O(g),g}function Ig(g,O){return O(g)}var WE=Js(function(g){var O=g.length,F=O?g[0]:0,Q=this.__wrapped__,Me=function(Ve){return Yf(Ve,g)};return O>1||this.__actions__.length||!(Q instanceof ai)||!Mr(F)?this.thru(Me):(Q=Q.slice(F,+F+(O?1:0)),Q.__actions__.push({func:Ig,args:[Me],thisArg:M}),new os(Q,this.__chain__).thru(function(Ve){return O&&!Ve.length&&Ve.push(M),Ve}))});function Om(){return Em(this)}function $E(){return new os(this.value(),this.__chain__)}function qy(){this.__values__===M&&(this.__values__=bb(this.value()));var g=this.__index__>=this.__values__.length,O=g?M:this.__values__[this.__index__++];return{done:g,value:O}}function XE(){return this}function KE(g){for(var O,F=this;F instanceof fl;){var Q=Ca(F);Q.__index__=0,Q.__values__=M,O?Me.__wrapped__=Q:O=Q;var Me=Q;F=F.__wrapped__}return Me.__wrapped__=g,O}function YE(){var g=this.__wrapped__;if(g instanceof ai){var O=g;return this.__actions__.length&&(O=new ai(this)),O=O.reverse(),O.__actions__.push({func:Ig,args:[$r],thisArg:M}),new os(O,this.__chain__)}return this.thru($r)}function eb(){return Du(this.__wrapped__,this.__actions__)}var ZE=hd(function(g,O,F){Yr.call(g,F)?++g[F]:Fs(g,F,1)});function JE(g,O,F){var Q=Fa(g)?tn:yg;return F&&Dn(g,O,F)&&(O=M),Q(g,Dt(O,3))}function QE(g,O){var F=Fa(g)?wn:Hd;return F(g,Dt(O,3))}var wm=mv(Or),qE=mv(Oa);function xm(g,O){return qo(Rg(g,O),1)}function eO(g,O){return qo(Rg(g,O),Nt)}function pd(g,O,F){return F=F===M?1:Ha(F),qo(Rg(g,O),F)}function tb(g,O){var F=Fa(g)?it:gl;return F(g,Dt(O,3))}function nb(g,O){var F=Fa(g)?yt:av;return F(g,Dt(O,3))}var tO=hd(function(g,O,F){Yr.call(g,F)?g[F].push(O):Fs(g,F,[O])});function nO(g,O,F,Q){g=mu(g)?g:oh(g),F=F&&!Q?Ha(F):0;var Me=g.length;return F<0&&(F=xi(Me+F,0)),Fg(g)?F<=Me&&g.indexOf(O,F)>-1:!!Me&&ei(g,O,F)>-1}var rb=Ba(function(g,O,F){var Q=-1,Me=typeof O=="function",Ve=mu(g)?Ze(g.length):[];return gl(g,function(gt){Ve[++Q]=Me?Ee(O,gt,F):gf(gt,O,F)}),Ve}),Sm=hd(function(g,O,F){Fs(g,F,O)});function Rg(g,O){var F=Fa(g)?zn:Oc;return F(g,Dt(O,3))}function Ng(g,O,F,Q){return g==null?[]:(Fa(O)||(O=O==null?[]:[O]),F=Q?M:F,Fa(F)||(F=F==null?[]:[F]),lv(g,O,F))}var rO=hd(function(g,O,F){g[F?0:1].push(O)},function(){return[[],[]]});function aO(g,O,F){var Q=Fa(g)?Fr:hu,Me=arguments.length<3;return Q(g,Dt(O,4),F,Me,gl)}function iO(g,O,F){var Q=Fa(g)?bi:hu,Me=arguments.length<3;return Q(g,Dt(O,4),F,Me,av)}function oO(g,O){var F=Fa(g)?wn:Hd;return F(g,Lg(Dt(O,3)))}function sO(g){var O=Fa(g)?yc:dm;return O(g)}function uO(g,O,F){(F?Dn(g,O,F):O===M)?O=1:O=Ha(O);var Q=Fa(g)?lm:dv;return Q(g,O)}function lO(g){var O=Fa(g)?zd:hv;return O(g)}function cO(g){if(g==null)return 0;if(mu(g))return Fg(g)?Ke(g):g.length;var O=Gn(g);return O==Tt||O==bn?g.size:ml(g).length}function fO(g,O,F){var Q=Fa(g)?Fo:vm;return F&&Dn(g,O,F)&&(O=M),Q(g,Dt(O,3))}var dO=Ba(function(g,O){if(g==null)return[];var F=O.length;return F>1&&Dn(g,O[0],O[1])?O=[]:F>2&&Dn(O[0],O[1],O[2])&&(O=[O[0]]),lv(g,qo(O,1),[])}),jg=Ld||function(){return Qi.Date.now()};function hO(g,O){if(typeof O!="function")throw new Br(X);return g=Ha(g),function(){if(--g<1)return O.apply(this,arguments)}}function ab(g,O,F){return O=F?M:O,O=g&&O==null?g.length:O,Fi(g,L,M,M,M,M,O)}function ib(g,O){var F;if(typeof O!="function")throw new Br(X);return g=Ha(g),function(){return--g>0&&(F=O.apply(this,arguments)),g<=1&&(O=M),F}}var Tm=Ba(function(g,O,F){var Q=se;if(F.length){var Me=k(F,Bt(Tm));Q|=ve}return Fi(g,Q,O,F,Me)}),ob=Ba(function(g,O,F){var Q=se|re;if(F.length){var Me=k(F,Bt(ob));Q|=ve}return Fi(O,Q,g,F,Me)});function sb(g,O,F){O=F?M:O;var Q=Fi(g,ye,M,M,M,M,M,O);return Q.placeholder=sb.placeholder,Q}function ub(g,O,F){O=F?M:O;var Q=Fi(g,ue,M,M,M,M,M,O);return Q.placeholder=ub.placeholder,Q}function lb(g,O,F){var Q,Me,Ve,gt,Mt,$t,er=0,nr=!1,gr=!1,Lr=!0;if(typeof g!="function")throw new Br(X);O=el(O)||0,bo(F)&&(nr=!!F.leading,gr="maxWait"in F,Ve=gr?xi(el(F.maxWait)||0,O):Ve,Lr="trailing"in F?!!F.trailing:Lr);function aa(Uo){var xl=Q,jc=Me;return Q=Me=M,er=Uo,gt=g.apply(jc,xl),gt}function wa(Uo){return er=Uo,Mt=ka(li,O),nr?aa(Uo):gt}function Za(Uo){var xl=Uo-$t,jc=Uo-er,Bb=O-xl;return gr?is(Bb,Ve-jc):Bb}function Da(Uo){var xl=Uo-$t,jc=Uo-er;return $t===M||xl>=O||xl<0||gr&&jc>=Ve}function li(){var Uo=jg();if(Da(Uo))return gi(Uo);Mt=ka(li,Za(Uo))}function gi(Uo){return Mt=M,Lr&&Q?aa(Uo):(Q=Me=M,gt)}function _u(){Mt!==M&&bf(Mt),er=0,Q=$t=Me=Mt=M}function Qs(){return Mt===M?gt:gi(jg())}function qs(){var Uo=jg(),xl=Da(Uo);if(Q=arguments,Me=this,$t=Uo,xl){if(Mt===M)return wa($t);if(gr)return bf(Mt),Mt=ka(li,O),aa($t)}return Mt===M&&(Mt=ka(li,O)),gt}return qs.cancel=_u,qs.flush=Qs,qs}var vO=Ba(function(g,O){return Zf(g,1,O)}),gO=Ba(function(g,O,F){return Zf(g,el(O)||0,F)});function pO(g){return Fi(g,_e)}function Ev(g,O){if(typeof g!="function"||O!=null&&typeof O!="function")throw new Br(X);var F=function(){var Q=arguments,Me=O?O.apply(this,Q):Q[0],Ve=F.cache;if(Ve.has(Me))return Ve.get(Me);var gt=g.apply(this,Q);return F.cache=Ve.set(Me,gt)||Ve,gt};return F.cache=new(Ev.Cache||hl),F}Ev.Cache=hl;function Lg(g){if(typeof g!="function")throw new Br(X);return function(){var O=arguments;switch(O.length){case 0:return!g.call(this);case 1:return!g.call(this,O[0]);case 2:return!g.call(this,O[0],O[1]);case 3:return!g.call(this,O[0],O[1],O[2])}return!g.apply(this,O)}}function mO(g){return ib(2,g)}var yO=fd(function(g,O){O=O.length==1&&Fa(O[0])?zn(O[0],mo(Dt())):zn(qo(O,1),mo(Dt()));var F=O.length;return Ba(function(Q){for(var Me=-1,Ve=is(Q.length,F);++Me<Ve;)Q[Me]=O[Me].call(this,Q[Me]);return Ee(g,this,Q)})}),Mm=Ba(function(g,O){var F=k(O,Bt(Mm));return Fi(g,ve,M,O,F)}),cb=Ba(function(g,O){var F=k(O,Bt(cb));return Fi(g,pe,M,O,F)}),bO=Js(function(g,O){return Fi(g,ge,M,M,M,O)});function CO(g,O){if(typeof g!="function")throw new Br(X);return O=O===M?O:Ha(O),Ba(g,O)}function EO(g,O){if(typeof g!="function")throw new Br(X);return O=O==null?0:xi(Ha(O),0),Ba(function(F){var Q=F[O],Me=Zs(F,0,O);return Q&&ia(Me,Q),Ee(g,this,Me)})}function OO(g,O,F){var Q=!0,Me=!0;if(typeof g!="function")throw new Br(X);return bo(F)&&(Q="leading"in F?!!F.leading:Q,Me="trailing"in F?!!F.trailing:Me),lb(g,O,{leading:Q,maxWait:O,trailing:Me})}function wO(g){return ab(g,1)}function xO(g,O){return Mm(Tc(O),g)}function SO(){if(!arguments.length)return[];var g=arguments[0];return Fa(g)?g:[g]}function TO(g){return ss(g,ce)}function fb(g,O){return O=typeof O=="function"?O:M,ss(g,ce,O)}function db(g){return ss(g,ae|ce)}function MO(g,O){return O=typeof O=="function"?O:M,ss(g,ae|ce,O)}function AO(g,O){return O==null||Vd(g,O,cs(O))}function Ol(g,O){return g===O||g!==g&&O!==O}var PO=vd(Xd),kO=vd(function(g,O){return g>=O}),md=Kd(function(){return arguments}())?Kd:function(g){return Do(g)&&Yr.call(g,"callee")&&!Vl.call(g,"callee")},Fa=Ze.isArray,DO=U?mo(U):uv;function mu(g){return g!=null&&_g(g.length)&&!Rc(g)}function zo(g){return Do(g)&&mu(g)}function IO(g){return g===!0||g===!1||Do(g)&&us(g)==ur}var xf=$p||Hm,RO=S?mo(S):Ju;function NO(g){return Do(g)&&g.nodeType===1&&!ih(g)}function jO(g){if(g==null)return!0;if(mu(g)&&(Fa(g)||typeof g=="string"||typeof g.splice=="function"||xf(g)||yd(g)||md(g)))return!g.length;var O=Gn(g);if(O==Tt||O==bn)return!g.size;if(dr(g))return!ml(g).length;for(var F in g)if(Yr.call(g,F))return!1;return!0}function LO(g,O){return Ks(g,O)}function _O(g,O,F){F=typeof F=="function"?F:M;var Q=F?F(g,O):M;return Q===M?Ks(g,O,M,F):!!Q}function Am(g){if(!Do(g))return!1;var O=us(g);return O==Mn||O==fn||typeof g.message=="string"&&typeof g.name=="string"&&!ih(g)}function FO(g){return typeof g=="number"&&Wf(g)}function Rc(g){if(!bo(g))return!1;var O=us(g);return O==En||O==lt||O==Tn||O==at}function hb(g){return typeof g=="number"&&g==Ha(g)}function _g(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=Kt}function bo(g){var O=typeof g;return g!=null&&(O=="object"||O=="function")}function Do(g){return g!=null&&typeof g=="object"}var vb=z?mo(z):pl;function BO(g,O){return g===O||Qu(g,O,Wt(O))}function gb(g,O,F){return F=typeof F=="function"?F:M,Qu(g,O,Wt(O),F)}function GO(g){return pb(g)&&g!=+g}function zO(g){if(oa(g))throw new Zt(R);return Xl(g)}function UO(g){return g===null}function VO(g){return g==null}function pb(g){return typeof g=="number"||Do(g)&&us(g)==st}function ih(g){if(!Do(g)||us(g)!=Ot)return!1;var O=Ul(g);if(O===null)return!0;var F=Yr.call(O,"constructor")&&O.constructor;return typeof F=="function"&&F instanceof F&&ta.call(F)==dc}var Pm=V?mo(V):nd;function HO(g){return hb(g)&&g>=-Kt&&g<=Kt}var mb=oe?mo(oe):rd;function Fg(g){return typeof g=="string"||!Fa(g)&&Do(g)&&us(g)==an}function Lu(g){return typeof g=="symbol"||Do(g)&&us(g)==Jn}var yd=Ce?mo(Ce):Kl;function WO(g){return g===M}function $O(g){return Do(g)&&Gn(g)==De}function XO(g){return Do(g)&&us(g)==be}var KO=vd(pf),yb=vd(function(g,O){return g<=O});function bb(g){if(!g)return[];if(mu(g))return Fg(g)?qe(g):Os(g);if(Vf&&g[Vf])return Ls(g[Vf]());var O=Gn(g),F=O==Tt?ll:O==bn?J:oh;return F(g)}function Nc(g){if(!g)return g===0?g:0;if(g=el(g),g===Nt||g===-Nt){var O=g<0?-1:1;return O*Je}return g===g?g:0}function Ha(g){var O=Nc(g),F=O%1;return O===O?F?O-F:O:0}function km(g){return g?vl(Ha(g),0,Be):0}function el(g){if(typeof g=="number")return g;if(Lu(g))return Vt;if(bo(g)){var O=typeof g.valueOf=="function"?g.valueOf():g;g=bo(O)?O+"":O}if(typeof g!="string")return g===0?g:+g;g=ko(g);var F=$u.test(g);return F||Zo.test(g)?zf(g.slice(2),F?2:8):Lo.test(g)?Vt:+g}function Cb(g){return Iu(g,yu(g))}function YO(g){return g?vl(Ha(g),-Kt,Kt):g===0?g:0}function Gi(g){return g==null?"":ds(g)}var ZO=Ef(function(g,O){if(dr(O)||mu(O)){Iu(O,cs(O),g);return}for(var F in O)Yr.call(O,F)&&Zu(g,F,O[F])}),Eb=Ef(function(g,O){Iu(O,yu(O),g)}),Bg=Ef(function(g,O,F,Q){Iu(O,yu(O),g,Q)}),JO=Ef(function(g,O,F,Q){Iu(O,cs(O),g,Q)}),QO=Js(Yf);function qO(g,O){var F=ff(g);return O==null?F:bc(F,O)}var ew=Ba(function(g,O){g=Ln(g);var F=-1,Q=O.length,Me=Q>2?O[2]:M;for(Me&&Dn(O[0],O[1],Me)&&(Q=1);++F<Q;)for(var Ve=O[F],gt=yu(Ve),Mt=-1,$t=gt.length;++Mt<$t;){var er=gt[Mt],nr=g[er];(nr===M||Ol(nr,ga[er])&&!Yr.call(g,er))&&(g[er]=Ve[er])}return g}),tw=Ba(function(g){return g.push(M,wf),Ee(xb,M,g)});function nw(g,O){return va(g,Dt(O,3),Pu)}function rw(g,O){return va(g,Dt(O,3),Qf)}function aw(g,O){return g==null?g:Wd(g,Dt(O,3),yu)}function iw(g,O){return g==null?g:ov(g,Dt(O,3),yu)}function ao(g,O){return g&&Pu(g,Dt(O,3))}function Gg(g,O){return g&&Qf(g,Dt(O,3))}function Ob(g){return g==null?[]:qf(g,cs(g))}function ow(g){return g==null?[]:qf(g,yu(g))}function Dm(g,O,F){var Q=g==null?M:$l(g,O);return Q===M?F:Q}function sw(g,O){return g!=null&&Yn(g,O,sv)}function Im(g,O){return g!=null&&Yn(g,O,bg)}var uw=so(function(g,O,F){O!=null&&typeof O.toString!="function"&&(O=Gl.call(O)),g[O]=F},Bm(bu)),lw=so(function(g,O,F){O!=null&&typeof O.toString!="function"&&(O=Gl.call(O)),Yr.call(g,O)?g[O].push(F):g[O]=[F]},Dt),cw=Ba(gf);function cs(g){return mu(g)?mg(g):ml(g)}function yu(g){return mu(g)?mg(g,!0):Ec(g)}function fw(g,O){var F={};return O=Dt(O,3),Pu(g,function(Q,Me,Ve){Fs(F,O(Q,Me,Ve),Q)}),F}function dw(g,O){var F={};return O=Dt(O,3),Pu(g,function(Q,Me,Ve){Fs(F,Me,O(Q,Me,Ve))}),F}var wb=Ef(function(g,O,F){yl(g,O,F)}),xb=Ef(function(g,O,F,Q){yl(g,O,F,Q)}),hw=Js(function(g,O){var F={};if(g==null)return F;var Q=!1;O=zn(O,function(Ve){return Ve=Es(Ve,g),Q||(Q=Ve.length>1),Ve}),Iu(g,me(g),F),Q&&(F=ss(F,ae|te|ce,Pg));for(var Me=O.length;Me--;)ud(F,O[Me]);return F});function vw(g,O){return Sb(g,Lg(Dt(O)))}var gw=Js(function(g,O){return g==null?{}:Og(g,O)});function Sb(g,O){if(g==null)return{};var F=zn(me(g),function(Q){return[Q]});return O=Dt(O),Zl(g,F,function(Q,Me){return O(Q,Me[0])})}function pw(g,O,F){O=Es(O,g);var Q=-1,Me=O.length;for(Me||(Me=1,g=M);++Q<Me;){var Ve=g==null?M:g[Bi(O[Q])];Ve===M&&(Q=Me,Ve=F),g=Rc(Ve)?Ve.call(g):Ve}return g}function or(g,O,F){return g==null?g:id(g,O,F)}function sr(g,O,F,Q){return Q=typeof Q=="function"?Q:M,g==null?g:id(g,O,F,Q)}var Tb=Mg(cs),Rm=Mg(yu);function mw(g,O,F){var Q=Fa(g),Me=Q||xf(g)||yd(g);if(O=Dt(O,4),F==null){var Ve=g&&g.constructor;Me?F=Q?new Ve:[]:bo(g)?F=Rc(Ve)?ff(Ul(g)):{}:F={}}return(Me?it:Pu)(g,function(gt,Mt,$t){return O(F,gt,Mt,$t)}),F}function yw(g,O){return g==null?!0:ud(g,O)}function bw(g,O,F){return g==null?g:ld(g,O,Tc(F))}function Mb(g,O,F,Q){return Q=typeof Q=="function"?Q:M,g==null?g:ld(g,O,Tc(F),Q)}function oh(g){return g==null?[]:Yu(g,cs(g))}function Cw(g){return g==null?[]:Yu(g,yu(g))}function Ew(g,O,F){return F===M&&(F=O,O=M),F!==M&&(F=el(F),F=F===F?F:0),O!==M&&(O=el(O),O=O===O?O:0),vl(el(g),O,F)}function Nm(g,O,F){return O=Nc(O),F===M?(F=O,O=0):F=Nc(F),g=el(g),Cg(g,O,F)}function Ab(g,O,F){if(F&&typeof F!="boolean"&&Dn(g,O,F)&&(O=F=M),F===M&&(typeof O=="boolean"?(F=O,O=M):typeof g=="boolean"&&(F=g,g=M)),g===M&&O===M?(g=0,O=1):(g=Nc(g),O===M?(O=g,g=0):O=Nc(O)),g>O){var Q=g;g=O,O=Q}if(F||g%1||O%1){var Me=qh();return is(g+Me*(O-g+Ll("1e-"+((Me+"").length-1))),O)}return cv(g,O)}var Ow=El(function(g,O,F){return O=O.toLowerCase(),g+(F?Pb(O):O)});function Pb(g){return _m(Gi(g).toLowerCase())}function jm(g){return g=Gi(g),g&&g.replace(ou,Xs).replace(lu,"")}function ww(g,O,F){g=Gi(g),O=ds(O);var Q=g.length;F=F===M?Q:vl(Ha(F),0,Q);var Me=F;return F-=O.length,F>=0&&g.slice(F,Me)==O}function xw(g){return g=Gi(g),g&&Aa.test(g)?g.replace(ji,of):g}function Sw(g){return g=Gi(g),g&&So.test(g)?g.replace(di,"\\$&"):g}var Tw=El(function(g,O,F){return g+(F?"-":"")+O.toLowerCase()}),Lm=El(function(g,O,F){return g+(F?" ":"")+O.toLowerCase()}),Mw=Cl("toLowerCase");function Aw(g,O,F){g=Gi(g),O=Ha(O);var Q=O?Ke(g):0;if(!O||Q>=O)return g;var Me=(O-Q)/2;return nh(Hf(Me),F)+g+nh(Tu(Me),F)}function Pw(g,O,F){g=Gi(g),O=Ha(O);var Q=O?Ke(g):0;return O&&Q<O?g+nh(O-Q,F):g}function kb(g,O,F){g=Gi(g),O=Ha(O);var Q=O?Ke(g):0;return O&&Q<O?nh(O-Q,F)+g:g}function kw(g,O,F){return F||O==null?O=0:O&&(O=+O),ug(Gi(g).replace(si,""),O||0)}function Dw(g,O,F){return(F?Dn(g,O,F):O===M)?O=1:O=Ha(O),fv(Gi(g),O)}function Db(){var g=arguments,O=Gi(g[0]);return g.length<3?O:O.replace(g[1],g[2])}var Iw=El(function(g,O,F){return g+(F?"_":"")+O.toLowerCase()});function Rw(g,O,F){return F&&typeof F!="number"&&Dn(g,O,F)&&(O=F=M),F=F===M?Be:F>>>0,F?(g=Gi(g),g&&(typeof O=="string"||O!=null&&!Pm(O))&&(O=ds(O),!O&&Qo(g))?Zs(qe(g),0,F):g.split(O,F)):[]}var Nw=El(function(g,O,F){return g+(F?" ":"")+_m(O)});function Ib(g,O,F){return g=Gi(g),F=F==null?0:vl(Ha(F),0,g.length),O=ds(O),g.slice(F,F+O.length)==O}function jw(g,O,F){var Q=Le.templateSettings;F&&Dn(g,O,F)&&(O=M),g=Gi(g),O=Bg({},O,Q,Ag);var Me=Bg({},O.imports,Q.imports,Ag),Ve=cs(Me),gt=Yu(Me,Ve),Mt,$t,er=0,nr=O.interpolate||Is,gr="__p += '",Lr=Wr((O.escape||Is).source+"|"+nr.source+"|"+(nr===na?Us:Is).source+"|"+(O.evaluate||Is).source+"|$","g"),aa="//# sourceURL="+(Yr.call(O,"sourceURL")?(O.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++af+"]")+`
`;g.replace(Lr,function(Da,li,gi,_u,Qs,qs){return gi||(gi=_u),gr+=g.slice(er,qs).replace(Hs,Fl),li&&(Mt=!0,gr+=`' +
__e(`+li+`) +
'`),Qs&&($t=!0,gr+=`';
`+Qs+`;
__p += '`),gi&&(gr+=`' +
((__t = (`+gi+`)) == null ? '' : __t) +
'`),er=qs+Da.length,Da}),gr+=`';
`;var wa=Yr.call(O,"variable")&&O.variable;if(!wa)gr=`with (obj) {
`+gr+`
}
`;else if(po.test(wa))throw new Zt(W);gr=($t?gr.replace(da,""):gr).replace(Ji,"$1").replace(jo,"$1;"),gr="function("+(wa||"obj")+`) {
`+(wa?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Mt?", __e = _.escape":"")+($t?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+gr+`return __p
}`;var Za=Fm(function(){return An(Ve,aa+"return "+gr).apply(M,gt)});if(Za.source=gr,Am(Za))throw Za;return Za}function Lw(g){return Gi(g).toLowerCase()}function _w(g){return Gi(g).toUpperCase()}function Fw(g,O,F){if(g=Gi(g),g&&(F||O===M))return ko(g);if(!g||!(O=ds(O)))return g;var Q=qe(g),Me=qe(O),Ve=ui(Q,Me),gt=gu(Q,Me)+1;return Zs(Q,Ve,gt).join("")}function zg(g,O,F){if(g=Gi(g),g&&(F||O===M))return g.slice(0,pt(g)+1);if(!g||!(O=ds(O)))return g;var Q=qe(g),Me=gu(Q,qe(O))+1;return Zs(Q,0,Me).join("")}function Bw(g,O,F){if(g=Gi(g),g&&(F||O===M))return g.replace(si,"");if(!g||!(O=ds(O)))return g;var Q=qe(g),Me=ui(Q,qe(O));return Zs(Q,Me).join("")}function Gw(g,O){var F=Te,Q=we;if(bo(O)){var Me="separator"in O?O.separator:Me;F="length"in O?Ha(O.length):F,Q="omission"in O?ds(O.omission):Q}g=Gi(g);var Ve=g.length;if(Qo(g)){var gt=qe(g);Ve=gt.length}if(F>=Ve)return g;var Mt=F-Ke(Q);if(Mt<1)return Q;var $t=gt?Zs(gt,0,Mt).join(""):g.slice(0,Mt);if(Me===M)return $t+Q;if(gt&&(Mt+=$t.length-Mt),Pm(Me)){if(g.slice(Mt).search(Me)){var er,nr=$t;for(Me.global||(Me=Wr(Me.source,Gi(Wu.exec(Me))+"g")),Me.lastIndex=0;er=Me.exec(nr);)var gr=er.index;$t=$t.slice(0,gr===M?Mt:gr)}}else if(g.indexOf(ds(Me),Mt)!=Mt){var Lr=$t.lastIndexOf(Me);Lr>-1&&($t=$t.slice(0,Lr))}return $t+Q}function zw(g){return g=Gi(g),g&&Li.test(g)?g.replace(ri,wt):g}var Uw=El(function(g,O,F){return g+(F?" ":"")+O.toUpperCase()}),_m=Cl("toUpperCase");function Rb(g,O,F){return g=Gi(g),O=F?M:O,O===M?Bl(g)?Se(g):oo(g):g.match(O)||[]}var Fm=Ba(function(g,O){try{return Ee(g,M,O)}catch(F){return Am(F)?F:new Zt(F)}}),Vw=Js(function(g,O){return it(O,function(F){F=Bi(F),Fs(g,F,Tm(g[F],g))}),g});function Hw(g){var O=g==null?0:g.length,F=Dt();return g=O?zn(g,function(Q){if(typeof Q[1]!="function")throw new Br(X);return[F(Q[0]),Q[1]]}):[],Ba(function(Q){for(var Me=-1;++Me<O;){var Ve=g[Me];if(Ee(Ve[0],this,Q))return Ee(Ve[1],this,Q)}})}function Ww(g){return rv(ss(g,ae))}function Bm(g){return function(){return g}}function $w(g,O){return g==null||g!==g?O:g}var Sf=hs(),Nb=hs(!0);function bu(g){return g}function Gm(g){return Yl(typeof g=="function"?g:ss(g,ae))}function Ug(g){return Yd(ss(g,ae))}function Xw(g,O){return Zd(g,ss(O,ae))}var wl=Ba(function(g,O){return function(F){return gf(F,g,O)}}),Kw=Ba(function(g,O){return function(F){return gf(g,F,O)}});function zm(g,O,F){var Q=cs(O),Me=qf(O,Q);F==null&&!(bo(O)&&(Me.length||!Q.length))&&(F=O,O=g,g=this,Me=qf(O,cs(O)));var Ve=!(bo(F)&&"chain"in F)||!!F.chain,gt=Rc(g);return it(Me,function(Mt){var $t=O[Mt];g[Mt]=$t,gt&&(g.prototype[Mt]=function(){var er=this.__chain__;if(Ve||er){var nr=g(this.__wrapped__),gr=nr.__actions__=Os(this.__actions__);return gr.push({func:$t,args:arguments,thisArg:g}),nr.__chain__=er,nr}return $t.apply(g,ia([this.value()],arguments))})}),g}function Yw(){return Qi._===this&&(Qi._=Zh),this}function Um(){}function Zw(g){return g=Ha(g),Ba(function(O){return Eg(O,g)})}var Jw=th(zn),Qw=th(tn),Vg=th(Fo);function jb(g){return jn(g)?eo(Bi(g)):wg(g)}function qw(g){return function(O){return g==null?M:$l(g,O)}}var ex=Tg(),tx=Tg(!0);function Vm(){return[]}function Hm(){return!1}function nx(){return{}}function rx(){return""}function ax(){return!0}function sh(g,O){if(g=Ha(g),g<1||g>Kt)return[];var F=Be,Q=is(g,Be);O=Dt(O),g-=Be;for(var Me=Po(Q,O);++F<g;)O(F);return Me}function ix(g){return Fa(g)?zn(g,Bi):Lu(g)?[g]:Os(vo(Gi(g)))}function ox(g){var O=++_i;return Gi(g)+O}var sx=ls(function(g,O){return g+O},0),Lb=ah("ceil"),ux=ls(function(g,O){return g/O},1),_b=ah("floor");function lx(g){return g&&g.length?Jf(g,bu,Xd):M}function cx(g,O){return g&&g.length?Jf(g,Dt(O,2),Xd):M}function Fb(g){return ul(g,bu)}function fx(g,O){return ul(g,Dt(O,2))}function dx(g){return g&&g.length?Jf(g,bu,pf):M}function hx(g,O){return g&&g.length?Jf(g,Dt(O,2),pf):M}var vx=ls(function(g,O){return g*O},1),gx=ah("round"),px=ls(function(g,O){return g-O},0);function Wm(g){return g&&g.length?js(g,bu):0}function $m(g,O){return g&&g.length?js(g,Dt(O,2)):0}return Le.after=hO,Le.ary=ab,Le.assign=ZO,Le.assignIn=Eb,Le.assignInWith=Bg,Le.assignWith=JO,Le.at=QO,Le.before=ib,Le.bind=Tm,Le.bindAll=Vw,Le.bindKey=ob,Le.castArray=SO,Le.chain=Em,Le.chunk=es,Le.compact=ii,Le.concat=Jr,Le.cond=Hw,Le.conforms=Ww,Le.constant=Bm,Le.countBy=ZE,Le.create=qO,Le.curry=sb,Le.curryRight=ub,Le.debounce=lb,Le.defaults=ew,Le.defaultsDeep=tw,Le.defer=vO,Le.delay=gO,Le.difference=Ea,Le.differenceBy=Ga,Le.differenceWith=Go,Le.drop=ws,Le.dropRight=Dc,Le.dropRightWhile=et,Le.dropWhile=Qt,Le.fill=Gt,Le.filter=QE,Le.flatMap=xm,Le.flatMapDeep=eO,Le.flatMapDepth=pd,Le.flatten=We,Le.flattenDeep=Ne,Le.flattenDepth=ht,Le.flip=pO,Le.flow=Sf,Le.flowRight=Nb,Le.fromPairs=kt,Le.functions=Ob,Le.functionsIn=ow,Le.groupBy=tO,Le.initial=vt,Le.intersection=St,Le.intersectionBy=$e,Le.intersectionWith=ft,Le.invert=uw,Le.invertBy=lw,Le.invokeMap=rb,Le.iteratee=Gm,Le.keyBy=Sm,Le.keys=cs,Le.keysIn=yu,Le.map=Rg,Le.mapKeys=fw,Le.mapValues=dw,Le.matches=Ug,Le.matchesProperty=Xw,Le.memoize=Ev,Le.merge=wb,Le.mergeWith=xb,Le.method=wl,Le.methodOf=Kw,Le.mixin=zm,Le.negate=Lg,Le.nthArg=Zw,Le.omit=hw,Le.omitBy=vw,Le.once=mO,Le.orderBy=Ng,Le.over=Jw,Le.overArgs=yO,Le.overEvery=Qw,Le.overSome=Vg,Le.partial=Mm,Le.partialRight=cb,Le.partition=rO,Le.pick=gw,Le.pickBy=Sb,Le.property=jb,Le.propertyOf=qw,Le.pull=Cn,Le.pullAll=cn,Le.pullAllBy=Zn,Le.pullAllWith=jr,Le.pullAt=xa,Le.range=ex,Le.rangeRight=tx,Le.rearg=bO,Le.reject=oO,Le.remove=Ar,Le.rest=CO,Le.reverse=$r,Le.sampleSize=uO,Le.set=or,Le.setWith=sr,Le.shuffle=lO,Le.slice=pa,Le.sortBy=dO,Le.sortedUniq=ju,Le.sortedUniqBy=Dg,Le.split=Rw,Le.spread=EO,Le.tail=DE,Le.take=IE,Le.takeRight=RE,Le.takeRightWhile=NE,Le.takeWhile=jE,Le.tap=HE,Le.throttle=OO,Le.thru=Ig,Le.toArray=bb,Le.toPairs=Tb,Le.toPairsIn=Rm,Le.toPath=ix,Le.toPlainObject=Cb,Le.transform=mw,Le.unary=wO,Le.union=LE,Le.unionBy=_E,Le.unionWith=FE,Le.uniq=BE,Le.uniqBy=Ic,Le.uniqWith=GE,Le.unset=yw,Le.unzip=ym,Le.unzipWith=Yy,Le.update=bw,Le.updateWith=Mb,Le.values=oh,Le.valuesIn=Cw,Le.without=bm,Le.words=Rb,Le.wrap=xO,Le.xor=Zy,Le.xorBy=zE,Le.xorWith=Cm,Le.zip=UE,Le.zipObject=Jy,Le.zipObjectDeep=VE,Le.zipWith=Qy,Le.entries=Tb,Le.entriesIn=Rm,Le.extend=Eb,Le.extendWith=Bg,zm(Le,Le),Le.add=sx,Le.attempt=Fm,Le.camelCase=Ow,Le.capitalize=Pb,Le.ceil=Lb,Le.clamp=Ew,Le.clone=TO,Le.cloneDeep=db,Le.cloneDeepWith=MO,Le.cloneWith=fb,Le.conformsTo=AO,Le.deburr=jm,Le.defaultTo=$w,Le.divide=ux,Le.endsWith=ww,Le.eq=Ol,Le.escape=xw,Le.escapeRegExp=Sw,Le.every=JE,Le.find=wm,Le.findIndex=Or,Le.findKey=nw,Le.findLast=qE,Le.findLastIndex=Oa,Le.findLastKey=rw,Le.floor=_b,Le.forEach=tb,Le.forEachRight=nb,Le.forIn=aw,Le.forInRight=iw,Le.forOwn=ao,Le.forOwnRight=Gg,Le.get=Dm,Le.gt=PO,Le.gte=kO,Le.has=sw,Le.hasIn=Im,Le.head=Rt,Le.identity=bu,Le.includes=nO,Le.indexOf=bt,Le.inRange=Nm,Le.invoke=cw,Le.isArguments=md,Le.isArray=Fa,Le.isArrayBuffer=DO,Le.isArrayLike=mu,Le.isArrayLikeObject=zo,Le.isBoolean=IO,Le.isBuffer=xf,Le.isDate=RO,Le.isElement=NO,Le.isEmpty=jO,Le.isEqual=LO,Le.isEqualWith=_O,Le.isError=Am,Le.isFinite=FO,Le.isFunction=Rc,Le.isInteger=hb,Le.isLength=_g,Le.isMap=vb,Le.isMatch=BO,Le.isMatchWith=gb,Le.isNaN=GO,Le.isNative=zO,Le.isNil=VO,Le.isNull=UO,Le.isNumber=pb,Le.isObject=bo,Le.isObjectLike=Do,Le.isPlainObject=ih,Le.isRegExp=Pm,Le.isSafeInteger=HO,Le.isSet=mb,Le.isString=Fg,Le.isSymbol=Lu,Le.isTypedArray=yd,Le.isUndefined=WO,Le.isWeakMap=$O,Le.isWeakSet=XO,Le.join=ze,Le.kebabCase=Tw,Le.last=xt,Le.lastIndexOf=_t,Le.lowerCase=Lm,Le.lowerFirst=Mw,Le.lt=KO,Le.lte=yb,Le.max=lx,Le.maxBy=cx,Le.mean=Fb,Le.meanBy=fx,Le.min=dx,Le.minBy=hx,Le.stubArray=Vm,Le.stubFalse=Hm,Le.stubObject=nx,Le.stubString=rx,Le.stubTrue=ax,Le.multiply=vx,Le.nth=yn,Le.noConflict=Yw,Le.noop=Um,Le.now=jg,Le.pad=Aw,Le.padEnd=Pw,Le.padStart=kb,Le.parseInt=kw,Le.random=Ab,Le.reduce=aO,Le.reduceRight=iO,Le.repeat=Dw,Le.replace=Db,Le.result=pw,Le.round=gx,Le.runInContext=Pe,Le.sample=sO,Le.size=cO,Le.snakeCase=Iw,Le.some=fO,Le.sortedIndex=Ya,Le.sortedIndexBy=ro,Le.sortedIndexOf=xs,Le.sortedLastIndex=Cv,Le.sortedLastIndexBy=pu,Le.sortedLastIndexOf=kg,Le.startCase=Nw,Le.startsWith=Ib,Le.subtract=px,Le.sum=Wm,Le.sumBy=$m,Le.template=jw,Le.times=sh,Le.toFinite=Nc,Le.toInteger=Ha,Le.toLength=km,Le.toLower=Lw,Le.toNumber=el,Le.toSafeInteger=YO,Le.toString=Gi,Le.toUpper=_w,Le.trim=Fw,Le.trimEnd=zg,Le.trimStart=Bw,Le.truncate=Gw,Le.unescape=zw,Le.uniqueId=ox,Le.upperCase=Uw,Le.upperFirst=_m,Le.each=tb,Le.eachRight=nb,Le.first=Rt,zm(Le,function(){var g={};return Pu(Le,function(O,F){Yr.call(Le.prototype,F)||(g[F]=O)}),g}(),{chain:!1}),Le.VERSION=A,it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){Le[g].placeholder=Le}),it(["drop","take"],function(g,O){ai.prototype[g]=function(F){F=F===M?1:xi(Ha(F),0);var Q=this.__filtered__&&!O?new ai(this):this.clone();return Q.__filtered__?Q.__takeCount__=is(F,Q.__takeCount__):Q.__views__.push({size:is(F,Be),type:g+(Q.__dir__<0?"Right":"")}),Q},ai.prototype[g+"Right"]=function(F){return this.reverse()[g](F).reverse()}}),it(["filter","map","takeWhile"],function(g,O){var F=O+1,Q=F==Ue||F==ut;ai.prototype[g]=function(Me){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:Dt(Me,3),type:F}),Ve.__filtered__=Ve.__filtered__||Q,Ve}}),it(["head","last"],function(g,O){var F="take"+(O?"Right":"");ai.prototype[g]=function(){return this[F](1).value()[0]}}),it(["initial","tail"],function(g,O){var F="drop"+(O?"":"Right");ai.prototype[g]=function(){return this.__filtered__?new ai(this):this[F](1)}}),ai.prototype.compact=function(){return this.filter(bu)},ai.prototype.find=function(g){return this.filter(g).head()},ai.prototype.findLast=function(g){return this.reverse().find(g)},ai.prototype.invokeMap=Ba(function(g,O){return typeof g=="function"?new ai(this):this.map(function(F){return gf(F,g,O)})}),ai.prototype.reject=function(g){return this.filter(Lg(Dt(g)))},ai.prototype.slice=function(g,O){g=Ha(g);var F=this;return F.__filtered__&&(g>0||O<0)?new ai(F):(g<0?F=F.takeRight(-g):g&&(F=F.drop(g)),O!==M&&(O=Ha(O),F=O<0?F.dropRight(-O):F.take(O-g)),F)},ai.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},ai.prototype.toArray=function(){return this.take(Be)},Pu(ai.prototype,function(g,O){var F=/^(?:filter|find|map|reject)|While$/.test(O),Q=/^(?:head|last)$/.test(O),Me=Le[Q?"take"+(O=="last"?"Right":""):O],Ve=Q||/^find/.test(O);!Me||(Le.prototype[O]=function(){var gt=this.__wrapped__,Mt=Q?[1]:arguments,$t=gt instanceof ai,er=Mt[0],nr=$t||Fa(gt),gr=function(li){var gi=Me.apply(Le,ia([li],Mt));return Q&&Lr?gi[0]:gi};nr&&F&&typeof er=="function"&&er.length!=1&&($t=nr=!1);var Lr=this.__chain__,aa=!!this.__actions__.length,wa=Ve&&!Lr,Za=$t&&!aa;if(!Ve&&nr){gt=Za?gt:new ai(this);var Da=g.apply(gt,Mt);return Da.__actions__.push({func:Ig,args:[gr],thisArg:M}),new os(Da,Lr)}return wa&&Za?g.apply(this,Mt):(Da=this.thru(gr),wa?Q?Da.value()[0]:Da.value():Da)})}),it(["pop","push","shift","sort","splice","unshift"],function(g){var O=Xr[g],F=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",Q=/^(?:pop|shift)$/.test(g);Le.prototype[g]=function(){var Me=arguments;if(Q&&!this.__chain__){var Ve=this.value();return O.apply(Fa(Ve)?Ve:[],Me)}return this[F](function(gt){return O.apply(Fa(gt)?gt:[],Me)})}}),Pu(ai.prototype,function(g,O){var F=Le[O];if(F){var Q=F.name+"";Yr.call(_s,Q)||(_s[Q]=[]),_s[Q].push({name:O,func:F})}}),_s[Nu(M,re).name]=[{name:"wrapper",func:M}],ai.prototype.clone=Kp,ai.prototype.reverse=Yp,ai.prototype.value=dg,Le.prototype.at=WE,Le.prototype.chain=Om,Le.prototype.commit=$E,Le.prototype.next=qy,Le.prototype.plant=KE,Le.prototype.reverse=YE,Le.prototype.toJSON=Le.prototype.valueOf=Le.prototype.value=eb,Le.prototype.first=Le.prototype.head,Vf&&(Le.prototype[Vf]=XE),Le},nt=He();Qi._=nt,_=function(){return nt}.call(P,h,P,m),_!==M&&(m.exports=_)}).call(this)}).call(this,h("IyRk"),h("hOG+")(le))},Lwbf:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I={},m=P.render=function(A,G,R,X){if(typeof document=="undefined"&&!X)return null;var W=X?new X:document.createElement("canvas");W.width=R*2,W.height=R*2;var Y=W.getContext("2d");return Y?(Y.fillStyle=A,Y.fillRect(0,0,W.width,W.height),Y.fillStyle=G,Y.fillRect(0,0,R,R),Y.translate(R,R),Y.fillRect(0,0,R,R),W.toDataURL()):null},_=P.get=function(A,G,R,X){var W=A+"-"+G+"-"+R+(X?"-server":"");if(I[W])return I[W];var Y=m(A,G,R,X);return I[W]=Y,Y}},"Lx/H":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Github=void 0;var I=h("q1tI"),m=te(I),_=h("17x9"),M=te(_),A=h("/FUP"),G=te(A),R=h("3WF5"),X=te(R),W=h("QkVN"),Y=te(W),K=h("TM95"),ne=h("iGDq"),ae=te(ne);function te(ee){return ee&&ee.__esModule?ee:{default:ee}}var ce=P.Github=function(H){var se=H.width,re=H.colors,q=H.onChange,ye=H.onSwatchHover,ue=H.triangle,ve=H.styles,pe=ve===void 0?{}:ve,L=H.className,ge=L===void 0?"":L,_e=(0,G.default)((0,Y.default)({default:{card:{width:se,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},pe),{"hide-triangle":ue==="hide","top-left-triangle":ue==="top-left","top-right-triangle":ue==="top-right","bottom-left-triangle":ue==="bottom-left","bottom-right-triangle":ue==="bottom-right"}),Te=function(Qe,D){return q({hex:Qe,source:"hex"},D)};return m.default.createElement("div",{style:_e.card,className:"github-picker "+ge},m.default.createElement("div",{style:_e.triangleShadow}),m.default.createElement("div",{style:_e.triangle}),(0,X.default)(re,function(we){return m.default.createElement(ae.default,{color:we,key:we,onClick:Te,onSwatchHover:ye})}))};ce.propTypes={width:M.default.oneOfType([M.default.string,M.default.number]),colors:M.default.arrayOf(M.default.string),triangle:M.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:M.default.object},ce.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},P.default=(0,K.ColorWrap)(ce)},"M5u/":function(le,P){le.exports=h;function h(I,m){var _=m[0]-I[0],M=m[1]-I[1];return Math.sqrt(_*_+M*M)}},MF6L:function(le,P,h){le.exports=h("u6oY")},MJZm:function(le,P,h){"use strict";var I=h("fAei"),m=h("rePB"),_=h("U8pU"),M=h("wx14"),A=h("VTBJ"),G=h("q1tI"),R=h.n(G),X={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},W=X,Y=h("6VBw"),K=function(fn,Mn){return G.createElement(Y.a,Object(A.a)(Object(A.a)({},fn),{},{ref:Mn,icon:W}))};K.displayName="HolderOutlined";var ne=G.forwardRef(K),ae=h("TSYQ"),te=h.n(ae),ce=h("H84U"),ee=h("EXcs"),H=4;function se(Jt){var fn,Mn=Jt.dropPosition,En=Jt.dropLevelOffset,lt=Jt.prefixCls,Tt=Jt.indent,st=Jt.direction,At=st===void 0?"ltr":st,Ot=At==="ltr"?"left":"right",dt=At==="ltr"?"right":"left",at=(fn={},Object(m.a)(fn,Ot,-En*Tt+H),Object(m.a)(fn,dt,0),fn);switch(Mn){case-1:at.top=-3;break;case 1:at.bottom=-3;break;default:at.bottom=-3,at[Ot]=Tt+H;break}return R.a.createElement("div",{style:at,className:"".concat(lt,"-drop-indicator")})}var re=h("2jpz"),q=G.forwardRef(function(Jt,fn){var Mn,En=G.useContext(ce.b),lt=En.getPrefixCls,Tt=En.direction,st=En.virtual,At=Jt.prefixCls,Ot=Jt.className,dt=Jt.showIcon,at=dt===void 0?!1:dt,T=Jt.showLine,bn=Jt.switcherIcon,an=Jt.blockNode,Jn=an===void 0?!1:an,Qn=Jt.children,De=Jt.checkable,be=De===void 0?!1:De,Xe=Jt.selectable,Yt=Xe===void 0?!0:Xe,ln=Jt.draggable,lr=Jt.motion,Hr=lr===void 0?Object(M.a)(Object(M.a)({},ee.a),{motionAppear:!1}):lr,ar=lt("tree",At),mr=Object(M.a)(Object(M.a)({},Jt),{checkable:be,selectable:Yt,showIcon:at,motion:Hr,blockNode:Jn,showLine:Boolean(T),dropIndicatorRender:se}),yr=G.useMemo(function(){if(!ln)return!1;var kr={};switch(Object(_.a)(ln)){case"function":kr.nodeDraggable=ln;break;case"object":kr=Object(M.a)({},ln);break;default:break}return kr.icon!==!1&&(kr.icon=kr.icon||G.createElement(ne,null)),kr},[ln]);return G.createElement(I.b,Object(M.a)({itemHeight:20,ref:fn,virtual:st},mr,{prefixCls:ar,className:te()((Mn={},Object(m.a)(Mn,"".concat(ar,"-icon-hide"),!at),Object(m.a)(Mn,"".concat(ar,"-block-node"),Jn),Object(m.a)(Mn,"".concat(ar,"-unselectable"),!Yt),Object(m.a)(Mn,"".concat(ar,"-rtl"),Tt==="rtl"),Mn),Ot),direction:Tt,checkable:be&&G.createElement("span",{className:"".concat(ar,"-checkbox-inner")}),selectable:Yt,switcherIcon:function(Ur){return Object(re.a)(ar,bn,T,Ur)},draggable:yr}),Qn)}),ye=q,ue=h("KQm4"),ve=h("ODXe"),pe=h("9jjd"),L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},ge=L,_e=function(fn,Mn){return G.createElement(Y.a,Object(A.a)(Object(A.a)({},fn),{},{ref:Mn,icon:ge}))};_e.displayName="FolderOpenOutlined";var Te=G.forwardRef(_e),we={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},Qe=we,D=function(fn,Mn){return G.createElement(Y.a,Object(A.a)(Object(A.a)({},fn),{},{ref:Mn,icon:Qe}))};D.displayName="FolderOutlined";var Ue=G.forwardRef(D),Ct=h("OZM5"),ut=h("815F"),Nt;(function(Jt){Jt[Jt.None=0]="None",Jt[Jt.Start=1]="Start",Jt[Jt.End=2]="End"})(Nt||(Nt={}));function Kt(Jt,fn){function Mn(En){var lt=En.key,Tt=En.children;fn(lt,En)!==!1&&Kt(Tt||[],fn)}Jt.forEach(Mn)}function Je(Jt){var fn=Jt.treeData,Mn=Jt.expandedKeys,En=Jt.startKey,lt=Jt.endKey,Tt=[],st=Nt.None;if(En&&En===lt)return[En];if(!En||!lt)return[];function At(Ot){return Ot===En||Ot===lt}return Kt(fn,function(Ot){if(st===Nt.End)return!1;if(At(Ot)){if(Tt.push(Ot),st===Nt.None)st=Nt.Start;else if(st===Nt.Start)return st=Nt.End,!1}else st===Nt.Start&&Tt.push(Ot);return Mn.includes(Ot)}),Tt}function Vt(Jt,fn){var Mn=Object(ue.a)(fn),En=[];return Kt(Jt,function(lt,Tt){var st=Mn.indexOf(lt);return st!==-1&&(En.push(Tt),Mn.splice(st,1)),!!Mn.length}),En}var Be=function(Jt,fn){var Mn={};for(var En in Jt)Object.prototype.hasOwnProperty.call(Jt,En)&&fn.indexOf(En)<0&&(Mn[En]=Jt[En]);if(Jt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var lt=0,En=Object.getOwnPropertySymbols(Jt);lt<En.length;lt++)fn.indexOf(En[lt])<0&&Object.prototype.propertyIsEnumerable.call(Jt,En[lt])&&(Mn[En[lt]]=Jt[En[lt]]);return Mn};function ie(Jt){var fn=Jt.isLeaf,Mn=Jt.expanded;return fn?G.createElement(pe.a,null):Mn?G.createElement(Te,null):G.createElement(Ue,null)}function un(Jt){var fn=Jt.treeData,Mn=Jt.children;return fn||Object(ut.c)(Mn)}var rn=function(fn,Mn){var En=fn.defaultExpandAll,lt=fn.defaultExpandParent,Tt=fn.defaultExpandedKeys,st=Be(fn,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),At=G.useRef(),Ot=G.useRef(),dt=function(){var ji=Object(ut.a)(un(st)),Li=ji.keyEntities,Aa;return En?Aa=Object.keys(Li):lt?Aa=Object(Ct.e)(st.expandedKeys||Tt||[],Li):Aa=st.expandedKeys||Tt,Aa},at=G.useState(st.selectedKeys||st.defaultSelectedKeys||[]),T=Object(ve.a)(at,2),bn=T[0],an=T[1],Jn=G.useState(function(){return dt()}),Qn=Object(ve.a)(Jn,2),De=Qn[0],be=Qn[1];G.useEffect(function(){"selectedKeys"in st&&an(st.selectedKeys)},[st.selectedKeys]),G.useEffect(function(){"expandedKeys"in st&&be(st.expandedKeys)},[st.expandedKeys]);var Xe=function(ji,Li){var Aa;return"expandedKeys"in st||be(ji),(Aa=st.onExpand)===null||Aa===void 0?void 0:Aa.call(st,ji,Li)},Yt=function(ji,Li){var Aa,ki=st.multiple,mi=Li.node,na=Li.nativeEvent,Ki=mi.key,go=Ki===void 0?"":Ki,ra=un(st),di=Object(M.a)(Object(M.a)({},Li),{selected:!0}),So=(na==null?void 0:na.ctrlKey)||(na==null?void 0:na.metaKey),si=na==null?void 0:na.shiftKey,Si;ki&&So?(Si=ji,At.current=go,Ot.current=Si,di.selectedNodes=Vt(ra,Si)):ki&&si?(Si=Array.from(new Set([].concat(Object(ue.a)(Ot.current||[]),Object(ue.a)(Je({treeData:ra,expandedKeys:De,startKey:go,endKey:At.current}))))),di.selectedNodes=Vt(ra,Si)):(Si=[go],At.current=go,Ot.current=Si,di.selectedNodes=Vt(ra,Si)),(Aa=st.onSelect)===null||Aa===void 0||Aa.call(st,Si,di),"selectedKeys"in st||an(Si)},ln=G.useContext(ce.b),lr=ln.getPrefixCls,Hr=ln.direction,ar=st.prefixCls,mr=st.className,yr=st.showIcon,kr=yr===void 0?!0:yr,Ur=st.expandAction,Va=Ur===void 0?"click":Ur,da=Be(st,["prefixCls","className","showIcon","expandAction"]),Ji=lr("tree",ar),jo=te()("".concat(Ji,"-directory"),Object(m.a)({},"".concat(Ji,"-directory-rtl"),Hr==="rtl"),mr);return G.createElement(ye,Object(M.a)({icon:ie,ref:Mn,blockNode:!0},da,{showIcon:kr,expandAction:Va,prefixCls:Ji,className:jo,expandedKeys:De,selectedKeys:bn,onSelect:Yt,onExpand:Xe}))},rr=G.forwardRef(rn),Pt=rr,Tn=ye;Tn.DirectoryTree=Pt,Tn.TreeNode=I.a;var ur=P.a=Tn},MON2:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.STACK_OVERFLOW=P.CIRCULAR_DEPENDENCY_IN_FACTORY=P.POST_CONSTRUCT_ERROR=P.MULTIPLE_POST_CONSTRUCT_METHODS=P.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=P.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=P.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=P.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=P.ARGUMENTS_LENGTH_MISMATCH=P.INVALID_DECORATOR_OPERATION=P.INVALID_TO_SELF_VALUE=P.INVALID_FUNCTION_BINDING=P.INVALID_MIDDLEWARE_RETURN=P.NO_MORE_SNAPSHOTS_AVAILABLE=P.INVALID_BINDING_TYPE=P.NOT_IMPLEMENTED=P.CIRCULAR_DEPENDENCY=P.UNDEFINED_INJECT_ANNOTATION=P.MISSING_INJECT_ANNOTATION=P.MISSING_INJECTABLE_ANNOTATION=P.NOT_REGISTERED=P.CANNOT_UNBIND=P.AMBIGUOUS_MATCH=P.KEY_NOT_FOUND=P.NULL_ARGUMENT=P.DUPLICATED_METADATA=P.DUPLICATED_INJECTABLE_DECORATOR=void 0,P.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",P.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",P.NULL_ARGUMENT="NULL argument",P.KEY_NOT_FOUND="Key Not Found",P.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",P.CANNOT_UNBIND="Could not unbind serviceIdentifier:",P.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",P.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",P.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var I=function(G){return"@inject called with undefined this could mean that the class "+G+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};P.UNDEFINED_INJECT_ANNOTATION=I,P.CIRCULAR_DEPENDENCY="Circular dependency found:",P.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",P.INVALID_BINDING_TYPE="Invalid binding type:",P.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",P.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",P.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",P.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",P.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var m=function(){for(var G=[],R=0;R<arguments.length;R++)G[R]=arguments[R];return"The number of constructor arguments in the derived class "+(G[0]+" must be >= than the number of constructor arguments of its base class.")};P.ARGUMENTS_LENGTH_MISMATCH=m,P.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",P.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",P.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",P.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",P.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var _=function(){for(var G=[],R=0;R<arguments.length;R++)G[R]=arguments[R];return"@postConstruct error in class "+G[0]+": "+G[1]};P.POST_CONSTRUCT_ERROR=_;var M=function(){for(var G=[],R=0;R<arguments.length;R++)G[R]=arguments[R];return"It looks like there is a circular dependency "+("in one of the '"+G[0]+"' bindings. Please investigate bindings with")+("service identifier '"+G[1]+"'.")};P.CIRCULAR_DEPENDENCY_IN_FACTORY=M,P.STACK_OVERFLOW="Maximum call stack size exceeded"},"Mn/Q":function(le,P,h){"use strict";h.d(P,"a",function(){return Y});var I=h("lwsE"),m=h.n(I),_=h("W8MJ"),M=h.n(_),A=h("4cb6"),G=h.n(A),R,X,W,Y=(R=Object(A.injectable)(),R(X=(W=function(){function K(){m()(this,K),this.config=void 0}return M()(K,[{key:"get",value:function(){return this.config}},{key:"set",value:function(ae){this.config=ae}}]),K}(),W))||X)},My4P:function(le,P){le.exports=h;function h(I,m,_){return I[0]=m[0]*_,I[1]=m[1]*_,I}},N2HP:function(le,P){le.exports=h;function h(I,m,_){var M=m[0]*_[1]-m[1]*_[0];return I[0]=I[1]=0,I[2]=M,I}},NEPx:function(le,P){le.exports=1e-6},NJEC:function(le,P,h){"use strict";var I=h("wx14"),m=h("ODXe"),_=h("IMoZ"),M=h("TSYQ"),A=h.n(M),G=h("6cGi"),R=h("4IlW"),X=h("q1tI"),W=h("H84U"),Y=h("diRs"),K=h("0n0R"),ne=h("2/Rp"),ae=h("zvFY"),te=h("lkze"),ce=h("YMnH"),ee=h("ZvpZ"),H=h("bogI"),se=function(pe){var L=pe.prefixCls,ge=pe.okButtonProps,_e=pe.cancelButtonProps,Te=pe.title,we=pe.cancelText,Qe=pe.okText,D=pe.okType,Ue=pe.icon,Ct=pe.showCancel,ut=Ct===void 0?!0:Ct,Nt=pe.close,Kt=pe.onConfirm,Je=pe.onCancel,Vt=X.useContext(W.b),Be=Vt.getPrefixCls;return X.createElement(ce.a,{componentName:"Popconfirm",defaultLocale:ee.a.Popconfirm},function(ie){return X.createElement("div",{className:"".concat(L,"-inner-content")},X.createElement("div",{className:"".concat(L,"-message")},Ue&&X.createElement("span",{className:"".concat(L,"-message-icon")},Ue),X.createElement("div",{className:"".concat(L,"-message-title")},Object(H.a)(Te))),X.createElement("div",{className:"".concat(L,"-buttons")},ut&&X.createElement(ne.a,Object(I.a)({onClick:Je,size:"small"},_e),we!=null?we:ie.cancelText),X.createElement(te.a,{buttonProps:Object(I.a)(Object(I.a)({size:"small"},Object(ae.a)(D)),ge),actionFn:Kt,close:Nt,prefixCls:Be("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},Qe!=null?Qe:ie.okText)))})},re=void 0,q=function(ve,pe){var L={};for(var ge in ve)Object.prototype.hasOwnProperty.call(ve,ge)&&pe.indexOf(ge)<0&&(L[ge]=ve[ge]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _e=0,ge=Object.getOwnPropertySymbols(ve);_e<ge.length;_e++)pe.indexOf(ge[_e])<0&&Object.prototype.propertyIsEnumerable.call(ve,ge[_e])&&(L[ge[_e]]=ve[ge[_e]]);return L},ye=X.forwardRef(function(ve,pe){var L=X.useContext(W.b),ge=L.getPrefixCls,_e=Object(G.a)(!1,{value:ve.open!==void 0?ve.open:ve.visible,defaultValue:ve.defaultOpen!==void 0?ve.defaultOpen:ve.defaultVisible}),Te=Object(m.a)(_e,2),we=Te[0],Qe=Te[1],D=function(st,At){var Ot,dt;Qe(st,!0),(Ot=ve.onVisibleChange)===null||Ot===void 0||Ot.call(ve,st,At),(dt=ve.onOpenChange)===null||dt===void 0||dt.call(ve,st,At)},Ue=function(st){D(!1,st)},Ct=function(st){var At;return(At=ve.onConfirm)===null||At===void 0?void 0:At.call(re,st)},ut=function(st){var At;D(!1,st),(At=ve.onCancel)===null||At===void 0||At.call(re,st)},Nt=function(st){st.keyCode===R.a.ESC&&we&&D(!1,st)},Kt=function(st){var At=ve.disabled,Ot=At===void 0?!1:At;Ot||D(st)},Je=ve.prefixCls,Vt=ve.placement,Be=Vt===void 0?"top":Vt,ie=ve.trigger,un=ie===void 0?"click":ie,rn=ve.okType,rr=rn===void 0?"primary":rn,Pt=ve.icon,Tn=Pt===void 0?X.createElement(_.a,null):Pt,ur=ve.children,Jt=ve.overlayClassName,fn=q(ve,["prefixCls","placement","trigger","okType","icon","children","overlayClassName"]),Mn=ge("popover",Je),En=ge("popconfirm",Je),lt=A()(En,Jt);return X.createElement(Y.a,Object(I.a)({},fn,{trigger:un,prefixCls:Mn,placement:Be,onOpenChange:Kt,open:we,ref:pe,overlayClassName:lt,_overlay:X.createElement(se,Object(I.a)({okType:rr,icon:Tn},ve,{prefixCls:Mn,close:Ue,onConfirm:Ct,onCancel:ut}))}),Object(K.a)(ur,{onKeyDown:function(st){var At,Ot;X.isValidElement(ur)&&((Ot=ur==null?void 0:(At=ur.props).onKeyDown)===null||Ot===void 0||Ot.call(At,st)),Nt(st)}}))}),ue=P.a=ye},NSvM:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ChromePointer=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.ChromePointer=function(){var X=(0,M.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return m.default.createElement("div",{style:X.picker})};P.default=G},NirO:function(le,P){},Nq3d:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Checkboard=void 0;var I=h("q1tI"),m=X(I),_=h("/FUP"),M=X(_),A=h("Lwbf"),G=R(A);function R(Y){if(Y&&Y.__esModule)return Y;var K={};if(Y!=null)for(var ne in Y)Object.prototype.hasOwnProperty.call(Y,ne)&&(K[ne]=Y[ne]);return K.default=Y,K}function X(Y){return Y&&Y.__esModule?Y:{default:Y}}var W=P.Checkboard=function(K){var ne=K.white,ae=K.grey,te=K.size,ce=K.renderers,ee=K.borderRadius,H=K.boxShadow,se=(0,M.default)({default:{grid:{borderRadius:ee,boxShadow:H,absolute:"0px 0px 0px 0px",background:"url("+G.get(ne,ae,te,ce.canvas)+") center left"}}});return m.default.createElement("div",{style:se.grid})};W.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},P.default=W},Nsbk:function(le,P){function h(I){return le.exports=h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},le.exports.__esModule=!0,le.exports.default=le.exports,h(I)}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},OYk8:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SliderSwatches=void 0;var I=h("q1tI"),m=R(I),_=h("/FUP"),M=R(_),A=h("PGcv"),G=R(A);function R(W){return W&&W.__esModule?W:{default:W}}var X=P.SliderSwatches=function(Y){var K=Y.onClick,ne=Y.hsl,ae=(0,M.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),te=.1;return m.default.createElement("div",{style:ae.swatches},m.default.createElement("div",{style:ae.swatch},m.default.createElement(G.default,{hsl:ne,offset:".80",active:Math.abs(ne.l-.8)<te&&Math.abs(ne.s-.5)<te,onClick:K,first:!0})),m.default.createElement("div",{style:ae.swatch},m.default.createElement(G.default,{hsl:ne,offset:".65",active:Math.abs(ne.l-.65)<te&&Math.abs(ne.s-.5)<te,onClick:K})),m.default.createElement("div",{style:ae.swatch},m.default.createElement(G.default,{hsl:ne,offset:".50",active:Math.abs(ne.l-.5)<te&&Math.abs(ne.s-.5)<te,onClick:K})),m.default.createElement("div",{style:ae.swatch},m.default.createElement(G.default,{hsl:ne,offset:".35",active:Math.abs(ne.l-.35)<te&&Math.abs(ne.s-.5)<te,onClick:K})),m.default.createElement("div",{style:ae.swatch},m.default.createElement(G.default,{hsl:ne,offset:".20",active:Math.abs(ne.l-.2)<te&&Math.abs(ne.s-.5)<te,onClick:K,last:!0})),m.default.createElement("div",{style:ae.clear}))};P.default=X},Oboc:function(le,P){},Ojt5:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Raised=void 0;var I=h("q1tI"),m=W(I),_=h("17x9"),M=W(_),A=h("/FUP"),G=W(A),R=h("QkVN"),X=W(R);function W(K){return K&&K.__esModule?K:{default:K}}var Y=P.Raised=function(ne){var ae=ne.zDepth,te=ne.radius,ce=ne.background,ee=ne.children,H=ne.styles,se=H===void 0?{}:H,re=(0,G.default)((0,X.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+ae+"px "+ae*4+"px rgba(0,0,0,.24)",borderRadius:te,background:ce}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},se),{"zDepth-1":ae===1});return m.default.createElement("div",{style:re.wrap},m.default.createElement("div",{style:re.bg}),m.default.createElement("div",{style:re.content},ee))};Y.propTypes={background:M.default.string,zDepth:M.default.oneOf([0,1,2,3,4,5]),radius:M.default.number,styles:M.default.object},Y.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},P.default=Y},OqSR:function(le,P,h){"use strict";h.d(P,"a",function(){return Ot});var I=h("mNvP"),m=h("4cb6"),_=h("APxj"),M=h.n(_),A=h("oDt1"),G=h("yG8O"),R=h.n(G),X=h("lwsE"),W=h.n(X),Y=h("W8MJ"),K=h.n(Y),ne=h("U+yc"),ae=h.n(ne),te=h("1ABj"),ce=h("+uE7"),ee=h("k6w6"),H,se,re,q,ye,ue,ve=(H=Object(m.injectable)(),se=Object(m.inject)(ce.a.RenderEngine),H(re=(q=(ue=function(){function dt(){W()(this,dt),R()(this,"engine",ye,this),this.resourcePool={}}return K()(dt,[{key:"getOrCreateResource",value:function(T){if(!this.resourcePool[T.name]){var bn=T.descriptor,an=bn.width,Jn=bn.height,Qn=bn.usage;this.resourcePool[T.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:an,height:Jn,wrapS:ee.a.CLAMP_TO_EDGE,wrapT:ee.a.CLAMP_TO_EDGE,usage:Qn})})}return this.resourcePool[T.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),dt}(),ue),ye=ae()(q.prototype,"engine",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q))||re),pe=h("z5Mu"),L=h("0arJ"),ge=h("4dNS"),_e=h("ph3A"),Te=h("RlxE"),we=h("baXp"),Qe=h("6B+r"),D=h("kfnj"),Ue=h("g1CP"),Ct=h("FlHB"),ut=h("94HZ"),Nt=h("tyuB"),Kt=h("IQ25"),Je=h("7W2i"),Vt=h.n(Je),Be=h("a1gu"),ie=h.n(Be),un=h("Nsbk"),rn=h.n(un);function rr(dt){var at=Pt();return function(){var bn=rn()(dt),an;if(at){var Jn=rn()(this).constructor;an=Reflect.construct(bn,arguments,Jn)}else an=bn.apply(this,arguments);return ie()(this,an)}}function Pt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(dt){return!1}}var Tn=function(dt){Vt()(T,dt);var at=rr(T);function T(bn){var an;return W()(this,T),an=at.call(this,bn),an.name=void 0,an.name=bn.name||"",an}return T}(A.a),ur=h("BFph"),Jt=h("Gc+X"),fn=h("Mn/Q"),Mn=h("LGRX"),En=h("yZ5d"),lt=new m.Container,Tt=M()(lt,!1),st=function(at){var T=Tt.lazyInject(at);return function(bn,an,Jn){T.call(this,bn,an),Jn&&(Jn.initializer=function(){return bn[an]})}},At=function(at){var T=Tt.lazyMultiInject(at);return function(bn,an,Jn){T.call(this,bn,an),Jn&&(Jn.initializer=function(){return bn[an]})}};lt.bind(ce.a.ShaderModuleService).to(En.a).inSingletonScope(),lt.bind(ce.a.NameComponentManager).toConstantValue(new A.b(Tn)),lt.bind(ce.a.HierarchyComponentManager).toConstantValue(new A.b(Kt.a)),lt.bind(ce.a.TransformComponentManager).toConstantValue(new A.b(Jt.a)),lt.bind(ce.a.MeshComponentManager).toConstantValue(new A.b(Qe.a)),lt.bind(ce.a.CullableComponentManager).toConstantValue(new A.b(we.a)),lt.bind(ce.a.GeometryComponentManager).toConstantValue(new A.b(L.a)),lt.bind(ce.a.MaterialComponentManager).toConstantValue(new A.b(_e.a));function Ot(){var dt=new m.Container;return dt.parent=lt,dt.bind(ce.a.Systems).to(ur.a).inSingletonScope().whenTargetNamed(ce.a.SceneGraphSystem),dt.bind(ce.a.Systems).to(pe.a).inSingletonScope().whenTargetNamed(ce.a.FrameGraphSystem),dt.bind(ce.a.Systems).to(D.a).inSingletonScope().whenTargetNamed(ce.a.MeshSystem),dt.bind(ce.a.Systems).to(ge.a).inSingletonScope().whenTargetNamed(ce.a.GeometrySystem),dt.bind(ce.a.Systems).to(Te.a).inSingletonScope().whenTargetNamed(ce.a.MaterialSystem),dt.bind(ce.a.Systems).to(Nt.a).inSingletonScope().whenTargetNamed(ce.a.RendererSystem),dt.bind(ce.a.ResourcePool).to(ve).inSingletonScope(),dt.bind(ce.a.ConfigService).to(fn.a).inSingletonScope(),dt.bind(ce.a.InteractorService).to(Mn.a).inSingletonScope(),dt.bind(ce.a.RenderPass).to(ut.a).inSingletonScope().whenTargetNamed(ut.a.IDENTIFIER),dt.bind(ce.a.RenderPass).to(Ue.a).inSingletonScope().whenTargetNamed(Ue.a.IDENTIFIER),dt.bind(ce.a.RenderPass).to(Ct.a).inSingletonScope().whenTargetNamed(Ct.a.IDENTIFIER),dt.bind(ce.a.RenderPassFactory).toFactory(function(at){return function(T){return at.container.getNamed(ce.a.RenderPass,T)}}),dt}},P2fV:function(le,P,h){"use strict";var I=h("EFp3"),m=h.n(I),_=h("+L6B"),M=h("Q9mQ"),A=h("sE09"),G=h.n(A)},"P81+":function(le,P,h){var I=h("ZtHU");le.exports={Graph:I.Graph,json:h("PZtI"),alg:h("kVhV"),version:I.version}},PGcv:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SliderSwatch=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.SliderSwatch=function(X){var W=X.hsl,Y=X.offset,K=X.onClick,ne=K===void 0?function(){}:K,ae=X.active,te=X.first,ce=X.last,ee=(0,M.default)({default:{swatch:{height:"12px",background:"hsl("+W.h+", 50%, "+Y*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:ae,first:te,last:ce}),H=function(re){return ne({h:W.h,s:.5,l:Y,source:"hsl"},re)};return m.default.createElement("div",{style:ee.swatch,onClick:H})};P.default=G},PJYZ:function(le,P){function h(I){if(I===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},PMMO:function(le,P){le.exports=h;function h(I,m){return I[0]=m[0],I[1]=m[1],I}},PZtI:function(le,P,h){var I=h("3z9K"),m=h("QJPA");le.exports={write:_,read:G};function _(R){var X={options:{directed:R.isDirected(),multigraph:R.isMultigraph(),compound:R.isCompound()},nodes:M(R),edges:A(R)};return I.isUndefined(R.graph())||(X.value=I.clone(R.graph())),X}function M(R){return I.map(R.nodes(),function(X){var W=R.node(X),Y=R.parent(X),K={v:X};return I.isUndefined(W)||(K.value=W),I.isUndefined(Y)||(K.parent=Y),K})}function A(R){return I.map(R.edges(),function(X){var W=R.edge(X),Y={v:X.v,w:X.w};return I.isUndefined(X.name)||(Y.name=X.name),I.isUndefined(W)||(Y.value=W),Y})}function G(R){var X=new m(R.options).setGraph(R.value);return I.each(R.nodes,function(W){X.setNode(W.v,W.value),W.parent&&X.setParent(W.v,W.parent)}),I.each(R.edges,function(W){X.setEdge({v:W.v,w:W.w,name:W.name},W.value)}),X}},PnFB:function(le,P,h){var I=h("3z9K");le.exports=m;function m(M,A,G){I.isArray(A)||(A=[A]);var R=(M.isDirected()?M.successors:M.neighbors).bind(M),X=[],W={};return I.each(A,function(Y){if(!M.hasNode(Y))throw new Error("Graph does not have node: "+Y);_(M,Y,G==="post",W,R,X)}),X}function _(M,A,G,R,X,W){I.has(R,A)||(R[A]=!0,G||W.push(A),I.each(X(A),function(Y){_(M,Y,G,R,X,W)}),G&&W.push(A))}},Pzom:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Slider=void 0;var I=h("q1tI"),m=te(I),_=h("17x9"),M=te(_),A=h("/FUP"),G=te(A),R=h("QkVN"),X=te(R),W=h("TM95"),Y=h("OYk8"),K=te(Y),ne=h("dATH"),ae=te(ne);function te(ee){return ee&&ee.__esModule?ee:{default:ee}}var ce=P.Slider=function(H){var se=H.hsl,re=H.onChange,q=H.pointer,ye=H.styles,ue=ye===void 0?{}:ye,ve=H.className,pe=ve===void 0?"":ve,L=(0,G.default)((0,X.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},ue));return m.default.createElement("div",{style:L.wrap||{},className:"slider-picker "+pe},m.default.createElement("div",{style:L.hue},m.default.createElement(W.Hue,{style:L.Hue,hsl:se,pointer:q,onChange:re})),m.default.createElement("div",{style:L.swatches},m.default.createElement(K.default,{hsl:se,onClick:re})))};ce.propTypes={styles:M.default.object},ce.defaultProps={pointer:ae.default,styles:{}},P.default=(0,W.ColorWrap)(ce)},QJPA:function(le,P,h){"use strict";var I=h("3z9K");le.exports=A;var m="\0",_="\0",M="";function A(K){this._isDirected=I.has(K,"directed")?K.directed:!0,this._isMultigraph=I.has(K,"multigraph")?K.multigraph:!1,this._isCompound=I.has(K,"compound")?K.compound:!1,this._label=void 0,this._defaultNodeLabelFn=I.constant(void 0),this._defaultEdgeLabelFn=I.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[_]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}A.prototype._nodeCount=0,A.prototype._edgeCount=0,A.prototype.isDirected=function(){return this._isDirected},A.prototype.isMultigraph=function(){return this._isMultigraph},A.prototype.isCompound=function(){return this._isCompound},A.prototype.setGraph=function(K){return this._label=K,this},A.prototype.graph=function(){return this._label},A.prototype.setDefaultNodeLabel=function(K){return I.isFunction(K)||(K=I.constant(K)),this._defaultNodeLabelFn=K,this},A.prototype.nodeCount=function(){return this._nodeCount},A.prototype.nodes=function(){return I.keys(this._nodes)},A.prototype.sources=function(){return I.filter(this.nodes(),I.bind(function(K){return I.isEmpty(this._in[K])},this))},A.prototype.sinks=function(){return I.filter(this.nodes(),I.bind(function(K){return I.isEmpty(this._out[K])},this))},A.prototype.setNodes=function(K,ne){var ae=arguments;return I.each(K,I.bind(function(te){ae.length>1?this.setNode(te,ne):this.setNode(te)},this)),this},A.prototype.setNode=function(K,ne){return I.has(this._nodes,K)?(arguments.length>1&&(this._nodes[K]=ne),this):(this._nodes[K]=arguments.length>1?ne:this._defaultNodeLabelFn(K),this._isCompound&&(this._parent[K]=_,this._children[K]={},this._children[_][K]=!0),this._in[K]={},this._preds[K]={},this._out[K]={},this._sucs[K]={},++this._nodeCount,this)},A.prototype.node=function(K){return this._nodes[K]},A.prototype.hasNode=function(K){return I.has(this._nodes,K)},A.prototype.removeNode=function(K){var ne=this;if(I.has(this._nodes,K)){var ae=function(ce){ne.removeEdge(ne._edgeObjs[ce])};delete this._nodes[K],this._isCompound&&(this._removeFromParentsChildList(K),delete this._parent[K],I.each(this.children(K),I.bind(function(te){this.setParent(te)},this)),delete this._children[K]),I.each(I.keys(this._in[K]),ae),delete this._in[K],delete this._preds[K],I.each(I.keys(this._out[K]),ae),delete this._out[K],delete this._sucs[K],--this._nodeCount}return this},A.prototype.setParent=function(K,ne){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(I.isUndefined(ne))ne=_;else{ne+="";for(var ae=ne;!I.isUndefined(ae);ae=this.parent(ae))if(ae===K)throw new Error("Setting "+ne+" as parent of "+K+" would create create a cycle");this.setNode(ne)}return this.setNode(K),this._removeFromParentsChildList(K),this._parent[K]=ne,this._children[ne][K]=!0,this},A.prototype._removeFromParentsChildList=function(K){delete this._children[this._parent[K]][K]},A.prototype.parent=function(K){if(this._isCompound){var ne=this._parent[K];if(ne!==_)return ne}},A.prototype.children=function(K){if(I.isUndefined(K)&&(K=_),this._isCompound){var ne=this._children[K];if(ne)return I.keys(ne)}else{if(K===_)return this.nodes();if(this.hasNode(K))return[]}},A.prototype.predecessors=function(K){var ne=this._preds[K];if(ne)return I.keys(ne)},A.prototype.successors=function(K){var ne=this._sucs[K];if(ne)return I.keys(ne)},A.prototype.neighbors=function(K){var ne=this.predecessors(K);if(ne)return I.union(ne,this.successors(K))},A.prototype.isLeaf=function(K){var ne;return this.isDirected()?ne=this.successors(K):ne=this.neighbors(K),ne.length===0},A.prototype.filterNodes=function(K){var ne=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});ne.setGraph(this.graph()),I.each(this._nodes,I.bind(function(ee,H){K(H)&&ne.setNode(H,ee)},this)),I.each(this._edgeObjs,I.bind(function(ee){ne.hasNode(ee.v)&&ne.hasNode(ee.w)&&ne.setEdge(ee,this.edge(ee))},this));var ae=this,te={};function ce(ee){var H=ae.parent(ee);return H===void 0||ne.hasNode(H)?(te[ee]=H,H):H in te?te[H]:ce(H)}return this._isCompound&&I.each(ne.nodes(),function(ee){ne.setParent(ee,ce(ee))}),ne},A.prototype.setDefaultEdgeLabel=function(K){return I.isFunction(K)||(K=I.constant(K)),this._defaultEdgeLabelFn=K,this},A.prototype.edgeCount=function(){return this._edgeCount},A.prototype.edges=function(){return I.values(this._edgeObjs)},A.prototype.setPath=function(K,ne){var ae=this,te=arguments;return I.reduce(K,function(ce,ee){return te.length>1?ae.setEdge(ce,ee,ne):ae.setEdge(ce,ee),ee}),this},A.prototype.setEdge=function(){var K,ne,ae,te,ce=!1,ee=arguments[0];typeof ee=="object"&&ee!==null&&"v"in ee?(K=ee.v,ne=ee.w,ae=ee.name,arguments.length===2&&(te=arguments[1],ce=!0)):(K=ee,ne=arguments[1],ae=arguments[3],arguments.length>2&&(te=arguments[2],ce=!0)),K=""+K,ne=""+ne,I.isUndefined(ae)||(ae=""+ae);var H=X(this._isDirected,K,ne,ae);if(I.has(this._edgeLabels,H))return ce&&(this._edgeLabels[H]=te),this;if(!I.isUndefined(ae)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(K),this.setNode(ne),this._edgeLabels[H]=ce?te:this._defaultEdgeLabelFn(K,ne,ae);var se=W(this._isDirected,K,ne,ae);return K=se.v,ne=se.w,Object.freeze(se),this._edgeObjs[H]=se,G(this._preds[ne],K),G(this._sucs[K],ne),this._in[ne][H]=se,this._out[K][H]=se,this._edgeCount++,this},A.prototype.edge=function(K,ne,ae){var te=arguments.length===1?Y(this._isDirected,arguments[0]):X(this._isDirected,K,ne,ae);return this._edgeLabels[te]},A.prototype.hasEdge=function(K,ne,ae){var te=arguments.length===1?Y(this._isDirected,arguments[0]):X(this._isDirected,K,ne,ae);return I.has(this._edgeLabels,te)},A.prototype.removeEdge=function(K,ne,ae){var te=arguments.length===1?Y(this._isDirected,arguments[0]):X(this._isDirected,K,ne,ae),ce=this._edgeObjs[te];return ce&&(K=ce.v,ne=ce.w,delete this._edgeLabels[te],delete this._edgeObjs[te],R(this._preds[ne],K),R(this._sucs[K],ne),delete this._in[ne][te],delete this._out[K][te],this._edgeCount--),this},A.prototype.inEdges=function(K,ne){var ae=this._in[K];if(ae){var te=I.values(ae);return ne?I.filter(te,function(ce){return ce.v===ne}):te}},A.prototype.outEdges=function(K,ne){var ae=this._out[K];if(ae){var te=I.values(ae);return ne?I.filter(te,function(ce){return ce.w===ne}):te}},A.prototype.nodeEdges=function(K,ne){var ae=this.inEdges(K,ne);if(ae)return ae.concat(this.outEdges(K,ne))};function G(K,ne){K[ne]?K[ne]++:K[ne]=1}function R(K,ne){--K[ne]||delete K[ne]}function X(K,ne,ae,te){var ce=""+ne,ee=""+ae;if(!K&&ce>ee){var H=ce;ce=ee,ee=H}return ce+M+ee+M+(I.isUndefined(te)?m:te)}function W(K,ne,ae,te){var ce=""+ne,ee=""+ae;if(!K&&ce>ee){var H=ce;ce=ee,ee=H}var se={v:ce,w:ee};return te&&(se.name=te),se}function Y(K,ne){return X(K,ne.v,ne.w,ne.name)}},"QKg/":function(le,P,h){},QOyy:function(le,P){le.exports=h;function h(I,m){return I[0]=1/m[0],I[1]=1/m[1],I}},"R/W3":function(le,P,h){var I=h("KwMD"),m=h("2ajD"),_=h("CZoQ");function M(A,G,R){return G===G?_(A,G,R):I(A,m,R)}le.exports=M},RIqP:function(le,P,h){var I=h("Ijbi"),m=h("EbDI"),_=h("ZhPi"),M=h("Bnag");function A(G){return I(G)||m(G)||_(G)||M()}le.exports=A,le.exports.__esModule=!0,le.exports.default=le.exports},"RR/i":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.typeConstraint=P.namedConstraint=P.taggedConstraint=P.traverseAncerstors=void 0;var I=h("xfSm"),m=h("GXnB"),_=function R(X,W){var Y=X.parentRequest;return Y!==null?W(Y)?!0:R(Y,W):!1};P.traverseAncerstors=_;var M=function(X){return function(W){var Y=function(ne){return ne!==null&&ne.target!==null&&ne.target.matchesTag(X)(W)};return Y.metaData=new m.Metadata(X,W),Y}};P.taggedConstraint=M;var A=M(I.NAMED_TAG);P.namedConstraint=A;var G=function(X){return function(W){var Y=null;if(W!==null)if(Y=W.bindings[0],typeof X=="string"){var K=Y.serviceIdentifier;return K===X}else{var ne=W.bindings[0].implementationType;return X===ne}return!1}};P.typeConstraint=G},RRY9:function(le,P){le.exports=h;function h(I,m){return I[0]===m[0]&&I[1]===m[1]}},Rkpk:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ChromeFields=void 0;var I=function(){function ee(H,se){for(var re=0;re<se.length;re++){var q=se[re];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(H,q.key,q)}}return function(H,se,re){return se&&ee(H.prototype,se),re&&ee(H,re),H}}(),m=h("q1tI"),_=K(m),M=h("/FUP"),A=K(M),G=h("p8yl"),R=K(G),X=h("TM95"),W=h("9F0J"),Y=K(W);function K(ee){return ee&&ee.__esModule?ee:{default:ee}}function ne(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}function ae(ee,H){if(!ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:ee}function te(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(ee,H):ee.__proto__=H)}var ce=P.ChromeFields=function(ee){te(H,ee);function H(){var se,re,q,ye;ne(this,H);for(var ue=arguments.length,ve=Array(ue),pe=0;pe<ue;pe++)ve[pe]=arguments[pe];return ye=(re=(q=ae(this,(se=H.__proto__||Object.getPrototypeOf(H)).call.apply(se,[this].concat(ve))),q),q.state={view:""},q.toggleViews=function(){q.state.view==="hex"?q.setState({view:"rgb"}):q.state.view==="rgb"?q.setState({view:"hsl"}):q.state.view==="hsl"&&(q.props.hsl.a===1?q.setState({view:"hex"}):q.setState({view:"rgb"}))},q.handleChange=function(L,ge){L.hex?R.default.isValidHex(L.hex)&&q.props.onChange({hex:L.hex,source:"hex"},ge):L.r||L.g||L.b?q.props.onChange({r:L.r||q.props.rgb.r,g:L.g||q.props.rgb.g,b:L.b||q.props.rgb.b,source:"rgb"},ge):L.a?(L.a<0?L.a=0:L.a>1&&(L.a=1),q.props.onChange({h:q.props.hsl.h,s:q.props.hsl.s,l:q.props.hsl.l,a:Math.round(L.a*100)/100,source:"rgb"},ge)):(L.h||L.s||L.l)&&(typeof L.s=="string"&&L.s.includes("%")&&(L.s=L.s.replace("%","")),typeof L.l=="string"&&L.l.includes("%")&&(L.l=L.l.replace("%","")),q.props.onChange({h:L.h||q.props.hsl.h,s:Number(L.s&&L.s||q.props.hsl.s),l:Number(L.l&&L.l||q.props.hsl.l),source:"hsl"},ge))},q.showHighlight=function(L){L.currentTarget.style.background="#eee"},q.hideHighlight=function(L){L.currentTarget.style.background="transparent"},re),ae(q,ye)}return I(H,[{key:"componentDidMount",value:function(){this.props.hsl.a===1&&this.state.view!=="hex"?this.setState({view:"hex"}):this.state.view!=="rgb"&&this.state.view!=="hsl"&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(re){re.hsl.a!==1&&this.state.view==="hex"&&this.setState({view:"rgb"})}},{key:"render",value:function(){var re=this,q=(0,A.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),ye=void 0;return this.state.view==="hex"?ye=_.default.createElement("div",{style:q.fields,className:"flexbox-fix"},_.default.createElement("div",{style:q.field},_.default.createElement(X.EditableInput,{style:{input:q.input,label:q.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?ye=_.default.createElement("div",{style:q.fields,className:"flexbox-fix"},_.default.createElement("div",{style:q.field},_.default.createElement(X.EditableInput,{style:{input:q.input,label:q.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),_.default.createElement("div",{style:q.field},_.default.createElement(X.EditableInput,{style:{input:q.input,label:q.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),_.default.createElement("div",{style:q.field},_.default.createElement(X.EditableInput,{style:{input:q.input,label:q.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),_.default.createElement("div",{style:q.alpha},_.default.createElement(X.EditableInput,{style:{input:q.input,label:q.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(ye=_.default.createElement("div",{style:q.fields,className:"flexbox-fix"},_.default.createElement("div",{style:q.field},_.default.createElement(X.EditableInput,{style:{input:q.input,label:q.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),_.default.createElement("div",{style:q.field},_.default.createElement(X.EditableInput,{style:{input:q.input,label:q.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),_.default.createElement("div",{style:q.field},_.default.createElement(X.EditableInput,{style:{input:q.input,label:q.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),_.default.createElement("div",{style:q.alpha},_.default.createElement(X.EditableInput,{style:{input:q.input,label:q.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),_.default.createElement("div",{style:q.wrap,className:"flexbox-fix"},ye,_.default.createElement("div",{style:q.toggle},_.default.createElement("div",{style:q.icon,onClick:this.toggleViews,ref:function(ve){return re.icon=ve}},_.default.createElement(Y.default,{style:q.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}]),H}(_.default.Component);P.default=ce},RlxE:function(le,P,h){"use strict";h.d(P,"a",function(){return Ct});var I=h("lSNA"),m=h.n(I),_=h("o0o1"),M=h.n(_),A=h("yXPU"),G=h.n(A),R=h("yG8O"),X=h.n(R),W=h("lwsE"),Y=h.n(W),K=h("W8MJ"),ne=h.n(K),ae=h("U+yc"),te=h.n(ae),ce=h("1ABj"),ee=h.n(ce),H=h("4cb6"),se=h.n(H),re=h("Gj0h"),q=h("+uE7"),ye,ue,ve,pe,L,ge,_e,Te,we,Qe;function D(ut,Nt){var Kt=Object.keys(ut);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(ut);Nt&&(Je=Je.filter(function(Vt){return Object.getOwnPropertyDescriptor(ut,Vt).enumerable})),Kt.push.apply(Kt,Je)}return Kt}function Ue(ut){for(var Nt=1;Nt<arguments.length;Nt++){var Kt=arguments[Nt]!=null?arguments[Nt]:{};Nt%2?D(Object(Kt),!0).forEach(function(Je){m()(ut,Je,Kt[Je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ut,Object.getOwnPropertyDescriptors(Kt)):D(Object(Kt)).forEach(function(Je){Object.defineProperty(ut,Je,Object.getOwnPropertyDescriptor(Kt,Je))})}return ut}var Ct=(ye=Object(H.injectable)(),ue=Object(H.inject)(q.a.MaterialComponentManager),ve=Object(H.inject)(q.a.RenderEngine),pe=Object(H.inject)(q.a.ShaderModuleService),ye(L=(ge=(Qe=function(){function ut(){Y()(this,ut),X()(this,"material",_e,this),X()(this,"engine",Te,this),X()(this,"shaderModule",we,this)}return ne()(ut,[{key:"execute",value:function(){var Nt=G()(M.a.mark(function Je(){return M.a.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:case"end":return Be.stop()}},Je)}));function Kt(){return Nt.apply(this,arguments)}return Kt}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(Kt){var Je=Object(re.createEntity)(),Vt=Kt.vertexShader,Be=Kt.fragmentShader,ie=[];if(!this.engine.supportWebGPU){var un="material-".concat(Je);this.shaderModule.registerModule(un,{vs:Kt.vertexShader,fs:Kt.fragmentShader});var rn=this.shaderModule.getModule(un);Vt=rn.vs,Be=rn.fs,rn.uniforms&&(ie=Object.keys(rn.uniforms).map(function(rr){return{dirty:!0,name:rr,data:rn.uniforms[rr]}}))}return this.material.create(Je,Ue(Ue({vertexShaderGLSL:Vt,fragmentShaderGLSL:Be},Kt),{},{uniforms:ie}))}}]),ut}(),Qe),_e=te()(ge.prototype,"material",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te=te()(ge.prototype,"engine",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we=te()(ge.prototype,"shaderModule",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ge))||L)},S2Tr:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 392c8.8 0 16-7.2 16-16V192c0-8.8-7.2-16-16-16H744c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h56v240H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16V648c0-8.8-7.2-16-16-16h-56V392h56zM792 240h88v88h-88v-88zm-648 88v-88h88v88h-88zm88 456h-88v-88h88v88zm648-88v88h-88v-88h88zm-80-64h-56c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16h-56V392h56c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h56v240z"}}]},name:"gateway",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="GatewayOutlined";var R=P.a=m.forwardRef(G)},S8zm:function(le,P){le.exports=h;function h(I){var m=new Float32Array(2);return m[0]=I[0],m[1]=I[1],m}},SGks:function(le,P){le.exports=h;function h(I){var m=I[0],_=I[1];return m*m+_*_}},SUTL:function(le,P){le.exports="2.1.4"},Sk89:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.postConstruct=void 0;var I=h("MON2"),m=h("xfSm"),_=h("GXnB");function M(){return function(A,G,R){var X=new _.Metadata(m.POST_CONSTRUCT,G);if(Reflect.hasOwnMetadata(m.POST_CONSTRUCT,A.constructor))throw new Error(I.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(m.POST_CONSTRUCT,X,A.constructor)}}P.postConstruct=M},"Ska/":function(le,P){le.exports=h;function h(I,m){return I[0]=Math.round(m[0]),I[1]=Math.round(m[1]),I}},SksO:function(le,P){function h(I,m){return le.exports=h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(M,A){return M.__proto__=A,M},le.exports.__esModule=!0,le.exports.default=le.exports,h(I,m)}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},Ssa2:function(le,P,h){"use strict";h.d(P,"a",function(){return _});var I=h("IOcx"),m=h("ENEI");function _(M){for(var A=new m.a,G=I.d.fromValues(M[0],M[1],M[2]),R=I.d.fromValues(M[0],M[1],M[2]),X=3;X<M.length;){var W=M[X++],Y=M[X++],K=M[X++];W<G[0]&&(G[0]=W),Y<G[1]&&(G[1]=Y),K<G[2]&&(G[2]=K),W>R[0]&&(R[0]=W),Y>R[1]&&(R[1]=Y),K>R[2]&&(R[2]=K)}return A.setMinMax(G,R),A}},Svbc:function(le,P,h){le.exports=h("Bu3x")},Syy6:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.AlphaPointer=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.AlphaPointer=function(X){var W=X.direction,Y=(0,M.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:W==="vertical"});return m.default.createElement("div",{style:Y.picker})};P.default=G},THLb:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I=P.calculateChange=function(_,M,A,G,R){_.preventDefault();var X=R.clientWidth,W=R.clientHeight,Y=typeof _.pageX=="number"?_.pageX:_.touches[0].pageX,K=typeof _.pageY=="number"?_.pageY:_.touches[0].pageY,ne=Y-(R.getBoundingClientRect().left+window.pageXOffset),ae=K-(R.getBoundingClientRect().top+window.pageYOffset);if(A==="vertical"){var te=void 0;if(ae<0?te=0:ae>W?te=1:te=Math.round(ae*100/W)/100,M.a!==te)return{h:M.h,s:M.s,l:M.l,a:te,source:"rgb"}}else{var ce=void 0;if(ne<0?ce=0:ne>X?ce=1:ce=Math.round(ne*100/X)/100,G!==ce)return{h:M.h,s:M.s,l:M.l,a:ce,source:"rgb"}}return null}},TM95:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I=h("yOY4");Object.defineProperty(P,"Alpha",{enumerable:!0,get:function(){return W(I).default}});var m=h("Nq3d");Object.defineProperty(P,"Checkboard",{enumerable:!0,get:function(){return W(m).default}});var _=h("AnK5");Object.defineProperty(P,"EditableInput",{enumerable:!0,get:function(){return W(_).default}});var M=h("HlQe");Object.defineProperty(P,"Hue",{enumerable:!0,get:function(){return W(M).default}});var A=h("Ojt5");Object.defineProperty(P,"Raised",{enumerable:!0,get:function(){return W(A).default}});var G=h("ccyi");Object.defineProperty(P,"Saturation",{enumerable:!0,get:function(){return W(G).default}});var R=h("UGzO");Object.defineProperty(P,"ColorWrap",{enumerable:!0,get:function(){return W(R).default}});var X=h("Ba7A");Object.defineProperty(P,"Swatch",{enumerable:!0,get:function(){return W(X).default}});function W(Y){return Y&&Y.__esModule?Y:{default:Y}}},Twb9:function(le,P){le.exports=h;function h(I,m,_){var M=m[0],A=m[1];return I[0]=_[0]*M+_[3]*A+_[6],I[1]=_[1]*M+_[4]*A+_[7],I}},"U+yc":function(le,P){function h(I,m,_,M,A){var G={};return Object.keys(M).forEach(function(R){G[R]=M[R]}),G.enumerable=!!G.enumerable,G.configurable=!!G.configurable,("value"in G||G.initializer)&&(G.writable=!0),G=_.slice().reverse().reduce(function(R,X){return X(I,m,R)||R},G),A&&G.initializer!==void 0&&(G.value=G.initializer?G.initializer.call(A):void 0,G.initializer=void 0),G.initializer===void 0&&(Object.defineProperty(I,m,G),G=null),G}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},UGzO:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ColorWrap=void 0;var I=Object.assign||function(te){for(var ce=1;ce<arguments.length;ce++){var ee=arguments[ce];for(var H in ee)Object.prototype.hasOwnProperty.call(ee,H)&&(te[H]=ee[H])}return te},m=function(){function te(ce,ee){for(var H=0;H<ee.length;H++){var se=ee[H];se.enumerable=se.enumerable||!1,se.configurable=!0,"value"in se&&(se.writable=!0),Object.defineProperty(ce,se.key,se)}}return function(ce,ee,H){return ee&&te(ce.prototype,ee),H&&te(ce,H),ce}}(),_=h("q1tI"),M=W(_),A=h("sEfC"),G=W(A),R=h("p8yl"),X=W(R);function W(te){return te&&te.__esModule?te:{default:te}}function Y(te,ce){if(!(te instanceof ce))throw new TypeError("Cannot call a class as a function")}function K(te,ce){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:te}function ne(te,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);te.prototype=Object.create(ce&&ce.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(te,ce):te.__proto__=ce)}var ae=P.ColorWrap=function(ce){var ee=function(H){ne(se,H);function se(re){Y(this,se);var q=K(this,(se.__proto__||Object.getPrototypeOf(se)).call(this));return q.handleChange=function(ye,ue){var ve=X.default.simpleCheckForValidColor(ye);if(ve){var pe=X.default.toState(ye,ye.h||q.state.oldHue);q.setState(pe),q.props.onChangeComplete&&q.debounce(q.props.onChangeComplete,pe,ue),q.props.onChange&&q.props.onChange(pe,ue)}},q.handleSwatchHover=function(ye,ue){var ve=X.default.simpleCheckForValidColor(ye);if(ve){var pe=X.default.toState(ye,ye.h||q.state.oldHue);q.setState(pe),q.props.onSwatchHover&&q.props.onSwatchHover(pe,ue)}},q.state=I({},X.default.toState(re.color,0)),q.debounce=(0,G.default)(function(ye,ue,ve){ye(ue,ve)},100),q}return m(se,[{key:"componentWillReceiveProps",value:function(q){this.setState(I({},X.default.toState(q.color,this.state.oldHue)))}},{key:"render",value:function(){var q={};return this.props.onSwatchHover&&(q.onSwatchHover=this.handleSwatchHover),M.default.createElement(ce,I({},this.props,this.state,{onChange:this.handleChange},q))}}]),se}(_.PureComponent||_.Component);return ee.propTypes=I({},ce.propTypes),ee.defaultProps=I({},ce.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),ee};P.default=ae},UTAp:function(le,P,h){"use strict";le.exports=h("yAXI")},Ucsi:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I=Symbol.for("INJECTION");function m(R,X,W,Y){function K(){return Y&&!Reflect.hasMetadata(I,this,X)&&Reflect.defineMetadata(I,W(),this,X),Reflect.hasMetadata(I,this,X)?Reflect.getMetadata(I,this,X):W()}function ne(ae){Reflect.defineMetadata(I,ae,this,X)}Object.defineProperty(R,X,{configurable:!0,enumerable:!0,get:K,set:ne})}function _(R,X){return function(W){return function(Y,K){var ne=function(){return R.get(W)};m(Y,K,ne,X)}}}P.makePropertyInjectDecorator=_;function M(R,X){return function(W,Y){return function(K,ne){var ae=function(){return R.getNamed(W,Y)};m(K,ne,ae,X)}}}P.makePropertyInjectNamedDecorator=M;function A(R,X){return function(W,Y,K){return function(ne,ae){var te=function(){return R.getTagged(W,Y,K)};m(ne,ae,te,X)}}}P.makePropertyInjectTaggedDecorator=A;function G(R,X){return function(W){return function(Y,K){var ne=function(){return R.getAll(W)};m(Y,K,ne,X)}}}P.makePropertyMultiInjectDecorator=G},"V/xP":function(le,P,h){"use strict";var I;(function(m){m.Normal="normal",m.PostProcessing="post-processing"})(I||(I={}))},VA6q:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="RedoOutlined";var R=P.a=m.forwardRef(G)},VIWh:function(le,P,h){"use strict";h.d(P,"a",function(){return I});function I(m,_,M,A,G){var R={};return Object.keys(A).forEach(function(X){R[X]=A[X]}),R.enumerable=!!R.enumerable,R.configurable=!!R.configurable,("value"in R||R.initializer)&&(R.writable=!0),R=M.slice().reverse().reduce(function(X,W){return W(m,_,X)||X},R),G&&R.initializer!==void 0&&(R.value=R.initializer?R.initializer.call(G):void 0,R.initializer=void 0),R.initializer===void 0&&(Object.defineProperty(m,_,R),R=null),R}},VVms:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I=P.calculateChange=function(_,M,A){_.preventDefault();var G=A.getBoundingClientRect(),R=G.width,X=G.height,W=typeof _.pageX=="number"?_.pageX:_.touches[0].pageX,Y=typeof _.pageY=="number"?_.pageY:_.touches[0].pageY,K=W-(A.getBoundingClientRect().left+window.pageXOffset),ne=Y-(A.getBoundingClientRect().top+window.pageYOffset);K<0?K=0:K>R?K=R:ne<0?ne=0:ne>X&&(ne=X);var ae=K*100/R,te=-(ne*100/X)+100;return{h:M.h,s:ae,v:te,a:M.a,source:"rgb"}}},"Vg/k":function(le,P){(function(h){le.exports=function(){var I={46:function(A){A.exports=function(G){if(!G.webpackPolyfill){var R=Object.create(G);R.children||(R.children=[]),Object.defineProperty(R,"loaded",{enumerable:!0,get:function(){return R.l}}),Object.defineProperty(R,"id",{enumerable:!0,get:function(){return R.i}}),Object.defineProperty(R,"exports",{enumerable:!0}),R.webpackPolyfill=1}return R}}},m={};function _(M){if(m[M])return m[M].exports;var A=m[M]={exports:{}},G=!0;try{I[M](A,A.exports,_),G=!1}finally{G&&delete m[M]}return A.exports}return _.ab=h+"/",_(46)}()}).call(this,"/")},W8MJ:function(le,P,h){var I=h("o5UB");function m(M,A){for(var G=0;G<A.length;G++){var R=A[G];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(M,I(R.key),R)}}function _(M,A,G){return A&&m(M.prototype,A),G&&m(M,G),Object.defineProperty(M,"prototype",{writable:!1}),M}le.exports=_,le.exports.__esModule=!0,le.exports.default=le.exports},WFjJ:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.CustomPicker=P.TwitterPicker=P.SwatchesPicker=P.SliderPicker=P.SketchPicker=P.PhotoshopPicker=P.MaterialPicker=P.HuePicker=P.GithubPicker=P.CompactPicker=P.ChromePicker=P.default=P.CirclePicker=P.BlockPicker=P.AlphaPicker=void 0;var I=h("qo7Q");Object.defineProperty(P,"AlphaPicker",{enumerable:!0,get:function(){return ee(I).default}});var m=h("rJ8t");Object.defineProperty(P,"BlockPicker",{enumerable:!0,get:function(){return ee(m).default}});var _=h("7dW+");Object.defineProperty(P,"CirclePicker",{enumerable:!0,get:function(){return ee(_).default}});var M=h("JI00");Object.defineProperty(P,"ChromePicker",{enumerable:!0,get:function(){return ee(M).default}});var A=h("oPLb");Object.defineProperty(P,"CompactPicker",{enumerable:!0,get:function(){return ee(A).default}});var G=h("Lx/H");Object.defineProperty(P,"GithubPicker",{enumerable:!0,get:function(){return ee(G).default}});var R=h("wkyg");Object.defineProperty(P,"HuePicker",{enumerable:!0,get:function(){return ee(R).default}});var X=h("Jxpl");Object.defineProperty(P,"MaterialPicker",{enumerable:!0,get:function(){return ee(X).default}});var W=h("FbP/");Object.defineProperty(P,"PhotoshopPicker",{enumerable:!0,get:function(){return ee(W).default}});var Y=h("HTXX");Object.defineProperty(P,"SketchPicker",{enumerable:!0,get:function(){return ee(Y).default}});var K=h("Pzom");Object.defineProperty(P,"SliderPicker",{enumerable:!0,get:function(){return ee(K).default}});var ne=h("t8r4");Object.defineProperty(P,"SwatchesPicker",{enumerable:!0,get:function(){return ee(ne).default}});var ae=h("nW7/");Object.defineProperty(P,"TwitterPicker",{enumerable:!0,get:function(){return ee(ae).default}});var te=h("UGzO");Object.defineProperty(P,"CustomPicker",{enumerable:!0,get:function(){return ee(te).default}});var ce=ee(M);function ee(H){return H&&H.__esModule?H:{default:H}}P.default=ce.default},WOAq:function(le,P,h){"use strict";(function(I){var m=h("Ju5/"),_=h("L3Qv"),M=typeof exports=="object"&&exports&&!exports.nodeType&&exports,A=M&&typeof I=="object"&&I&&!I.nodeType&&I,G=A&&A.exports===M,R=G?m.a.Buffer:void 0,X=R?R.isBuffer:void 0,W=X||_.a;P.a=W}).call(this,h("Vg/k")(le))},WZrV:function(le,P,h){var I=h("3z9K");le.exports=m;function m(){this._arr=[],this._keyIndices={}}m.prototype.size=function(){return this._arr.length},m.prototype.keys=function(){return this._arr.map(function(_){return _.key})},m.prototype.has=function(_){return I.has(this._keyIndices,_)},m.prototype.priority=function(_){var M=this._keyIndices[_];if(M!==void 0)return this._arr[M].priority},m.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},m.prototype.add=function(_,M){var A=this._keyIndices;if(_=String(_),!I.has(A,_)){var G=this._arr,R=G.length;return A[_]=R,G.push({key:_,priority:M}),this._decrease(R),!0}return!1},m.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var _=this._arr.pop();return delete this._keyIndices[_.key],this._heapify(0),_.key},m.prototype.decrease=function(_,M){var A=this._keyIndices[_];if(M>this._arr[A].priority)throw new Error("New priority is greater than current priority. Key: "+_+" Old: "+this._arr[A].priority+" New: "+M);this._arr[A].priority=M,this._decrease(A)},m.prototype._heapify=function(_){var M=this._arr,A=2*_,G=A+1,R=_;A<M.length&&(R=M[A].priority<M[R].priority?A:R,G<M.length&&(R=M[G].priority<M[R].priority?G:R),R!==_&&(this._swap(_,R),this._heapify(R)))},m.prototype._decrease=function(_){for(var M=this._arr,A=M[_].priority,G;_!==0&&(G=_>>1,!(M[G].priority<A));)this._swap(_,G),_=G},m.prototype._swap=function(_,M){var A=this._arr,G=this._keyIndices,R=A[_],X=A[M];A[_]=X,A[M]=R,G[X.key]=_,G[R.key]=M}},WkPL:function(le,P){function h(I,m){(m==null||m>I.length)&&(m=I.length);for(var _=0,M=new Array(m);_<m;_++)M[_]=I[_];return M}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},XkVO:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I;(function(we){we.TextureCompressionBC="texture-compression-bc"})(I=P.ExtensionName||(P.ExtensionName={}));var m;(function(we){we.ClampToEdge="clamp-to-edge",we.Repeat="repeat",we.MirrorRepeat="mirror-repeat"})(m=P.AddressMode||(P.AddressMode={}));var _;(function(we){we.UniformBuffer="uniform-buffer",we.StorageBuffer="storage-buffer",we.ReadonlyStorageBuffer="readonly-storage-buffer",we.Sampler="sampler",we.ComparisonSampler="comparison-sampler",we.SampledTexture="sampled-texture",we.ReadonlyStorageTexture="readonly-storage-texture",we.WriteonlyStorageTexture="writeonly-storage-texture"})(_=P.BindingType||(P.BindingType={}));var M;(function(we){we.Zero="zero",we.One="one",we.SrcColor="src-color",we.OneMinusSrcColor="one-minus-src-color",we.SrcAlpha="src-alpha",we.OneMinusSrcAlpha="one-minus-src-alpha",we.DstColor="dst-color",we.OneMinusDstColor="one-minus-dst-color",we.DstAlpha="dst-alpha",we.OneMinusDstAlpha="one-minus-dst-alpha",we.SrcAlphaSaturated="src-alpha-saturated",we.BlendColor="blend-color",we.OneMinusBlendColor="one-minus-blend-color"})(M=P.BlendFactor||(P.BlendFactor={}));var A;(function(we){we.Add="add",we.Subtract="subtract",we.ReverseSubtract="reverse-subtract",we.Min="min",we.Max="max"})(A=P.BlendOperation||(P.BlendOperation={}));var G;(function(we){we.Never="never",we.Less="less",we.Equal="equal",we.LessEqual="less-equal",we.Greater="greater",we.NotEqual="not-equal",we.GreaterEqual="greater-equal",we.Always="always"})(G=P.CompareFunction||(P.CompareFunction={}));var R;(function(we){we.None="none",we.Front="front",we.Back="back"})(R=P.CullMode||(P.CullMode={}));var X;(function(we){we.Nearest="nearest",we.Linear="linear"})(X=P.FilterMode||(P.FilterMode={}));var W;(function(we){we.CCW="ccw",we.CW="cw"})(W=P.FrontFace||(P.FrontFace={}));var Y;(function(we){we.Uint16="uint16",we.Uint32="uint32"})(Y=P.IndexFormat||(P.IndexFormat={}));var K;(function(we){we.Vertex="vertex",we.Instance="instance"})(K=P.InputStepMode||(P.InputStepMode={}));var ne;(function(we){we.Load="load"})(ne=P.LoadOp||(P.LoadOp={}));var ae;(function(we){we.PointList="point-list",we.LineList="line-list",we.LineStrip="line-strip",we.TriangleList="triangle-list",we.TriangleStrip="triangle-strip"})(ae=P.PrimitiveTopology||(P.PrimitiveTopology={}));var te;(function(we){we.Keep="keep",we.Zero="zero",we.Replace="replace",we.Invert="invert",we.IncrementClamp="increment-clamp",we.DecrementClamp="decrement-clamp",we.IncrementWrap="increment-wrap",we.DecrementWrap="decrement-wrap"})(te=P.StencilOperation||(P.StencilOperation={}));var ce;(function(we){we.Store="store",we.Clear="clear"})(ce=P.StoreOp||(P.StoreOp={}));var ee;(function(we){we.E1d="1d",we.E2d="2d",we.E3d="3d"})(ee=P.TextureDimension||(P.TextureDimension={}));var H;(function(we){we.R8Unorm="r8unorm",we.R8Snorm="r8snorm",we.R8Uint="r8uint",we.R8Sint="r8sint",we.R16Uint="r16uint",we.R16Sint="r16sint",we.R16Float="r16float",we.RG8Unorm="rg8unorm",we.RG8Snorm="rg8snorm",we.RG8Uint="rg8uint",we.RG8Sint="rg8sint",we.R32Uint="r32uint",we.R32Sint="r32sint",we.R32Float="r32float",we.RG16Uint="rg16uint",we.RG16Sint="rg16sint",we.RG16Float="rg16float",we.RGBA8Unorm="rgba8unorm",we.RGBA8UnormSRGB="rgba8unorm-srgb",we.RGBA8Snorm="rgba8snorm",we.RGBA8Uint="rgba8uint",we.RGBA8Sint="rgba8sint",we.BGRA8Unorm="bgra8unorm",we.BGRA8UnormSRGB="bgra8unorm-srgb",we.RGB10A2Unorm="rgb10a2unorm",we.RG11B10Float="rg11b10float",we.RG32Uint="rg32uint",we.RG32Sint="rg32sint",we.RG32Float="rg32float",we.RGBA16Uint="rgba16uint",we.RGBA16Sint="rgba16sint",we.RGBA16Float="rgba16float",we.RGBA32Uint="rgba32uint",we.RGBA32Sint="rgba32sint",we.RGBA32Float="rgba32float",we.Depth32Float="depth32float",we.Depth24Plus="depth24plus",we.Depth24PlusStencil8="depth24plus-stencil8"})(H=P.TextureFormat||(P.TextureFormat={}));var se;(function(we){we.Float="float",we.Sint="sint",we.Uint="uint"})(se=P.TextureComponentType||(P.TextureComponentType={}));var re;(function(we){we.E1d="1d",we.E2d="2d",we.E2dArray="2d-array",we.Cube="cube",we.CubeArray="cube-array",we.E3d="3d"})(re=P.TextureViewDimension||(P.TextureViewDimension={}));var q;(function(we){we.Uchar2="uchar2",we.Uchar4="uchar4",we.Char2="char2",we.Char4="char4",we.Uchar2Norm="uchar2norm",we.Uchar4Norm="uchar4norm",we.Char2Norm="char2norm",we.Char4Norm="char4norm",we.Ushort2="ushort2",we.Ushort4="ushort4",we.Short2="short2",we.Short4="short4",we.Ushort2Norm="ushort2norm",we.Ushort4Norm="ushort4norm",we.Short2Norm="short2norm",we.Short4Norm="short4norm",we.Half2="half2",we.Half4="half4",we.Float="float",we.Float2="float2",we.Float3="float3",we.Float4="float4",we.Uint="uint",we.Uint2="uint2",we.Uint3="uint3",we.Uint4="uint4",we.Int="int",we.Int2="int2",we.Int3="int3",we.Int4="int4"})(q=P.VertexFormat||(P.VertexFormat={}));var ye;(function(we){we.All="all",we.StencilOnly="stencil-only",we.DepthOnly="depth-only"})(ye=P.TextureAspect||(P.TextureAspect={}));var ue;(function(we){we.Error="error",we.Warning="warning",we.Info="info"})(ue=P.CompilationMessageType||(P.CompilationMessageType={}));var ve;(function(we){we.Occlusion="occlusion"})(ve=P.QueryType||(P.QueryType={}));var pe;(function(we){we[we.MapRead=1]="MapRead",we[we.MapWrite=2]="MapWrite",we[we.CopySrc=4]="CopySrc",we[we.CopyDst=8]="CopyDst",we[we.Index=16]="Index",we[we.Vertex=32]="Vertex",we[we.Uniform=64]="Uniform",we[we.Storage=128]="Storage",we[we.Indirect=256]="Indirect",we[we.QueryResolve=512]="QueryResolve"})(pe=P.BufferUsage||(P.BufferUsage={}));var L;(function(we){we[we.Red=1]="Red",we[we.Green=2]="Green",we[we.Blue=4]="Blue",we[we.Alpha=8]="Alpha",we[we.All=15]="All"})(L=P.ColorWrite||(P.ColorWrite={}));var ge;(function(we){we[we.Vertex=1]="Vertex",we[we.Fragment=2]="Fragment",we[we.Compute=4]="Compute"})(ge=P.ShaderStage||(P.ShaderStage={}));var _e;(function(we){we[we.CopySrc=1]="CopySrc",we[we.CopyDst=2]="CopyDst",we[we.Sampled=4]="Sampled",we[we.Storage=8]="Storage",we[we.OutputAttachment=16]="OutputAttachment"})(_e=P.TextureUsage||(P.TextureUsage={}));var Te;(function(we){we[we.Read=1]="Read",we[we.Write=2]="Write"})(Te=P.MapMode||(P.MapMode={}))},XqMk:function(le,P,h){"use strict";(function(I){var m=typeof I=="object"&&I&&I.Object===Object&&I;P.a=m}).call(this,h("IyRk"))},"Xt/L":function(le,P){function h(I,m,_){for(var M=-1,A=I==null?0:I.length;++M<A;)if(_(m,I[M]))return!0;return!1}le.exports=h},Yk9n:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.inject=P.LazyServiceIdentifer=void 0;var I=h("MON2"),m=h("xfSm"),_=h("GXnB"),M=h("Ztfv"),A=function(){function R(X){this._cb=X}return R.prototype.unwrap=function(){return this._cb()},R}();P.LazyServiceIdentifer=A;function G(R){return function(X,W,Y){if(R===void 0)throw new Error(I.UNDEFINED_INJECT_ANNOTATION(X.name));var K=new _.Metadata(m.INJECT_TAG,R);typeof Y=="number"?M.tagParameter(X,W,Y,K):M.tagProperty(X,W,K)}}P.inject=G},Yr8b:function(le,P,h){le.exports=h("SGks")},Yydy:function(le,P){},ZKkB:function(le,P,h){"use strict";h.d(P,"a",function(){return A});var I=h("oZsa"),m=h("iZzK");function _(G){return Function.toString.call(G).indexOf("[native code]")!==-1}var M=h("xdlL");function A(G){var R=typeof Map=="function"?new Map:void 0;return A=function(W){if(W===null||!_(W))return W;if(typeof W!="function")throw new TypeError("Super expression must either be null or a function");if(typeof R!="undefined"){if(R.has(W))return R.get(W);R.set(W,Y)}function Y(){return Object(M.a)(W,arguments,Object(I.a)(this).constructor)}return Y.prototype=Object.create(W.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),Object(m.a)(Y,W)},A(G)}},"ZQT/":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.CompactColor=void 0;var I=h("q1tI"),m=X(I),_=h("/FUP"),M=X(_),A=h("p8yl"),G=X(A),R=h("TM95");function X(Y){return Y&&Y.__esModule?Y:{default:Y}}var W=P.CompactColor=function(K){var ne=K.color,ae=K.onClick,te=ae===void 0?function(){}:ae,ce=K.onSwatchHover,ee=K.active,H=(0,M.default)({default:{color:{background:ne,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:G.default.getContrastingColor(ne),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:ee,"color-#FFFFFF":ne==="#FFFFFF",transparent:ne==="transparent"});return m.default.createElement(R.Swatch,{style:H.color,color:ne,onClick:te,onHover:ce,focusStyle:{boxShadow:"0 0 4px "+ne}},m.default.createElement("div",{style:H.dot}))};P.default=W},ZhPi:function(le,P,h){var I=h("WkPL");function m(_,M){if(!!_){if(typeof _=="string")return I(_,M);var A=Object.prototype.toString.call(_).slice(8,-1);if(A==="Object"&&_.constructor&&(A=_.constructor.name),A==="Map"||A==="Set")return Array.from(_);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return I(_,M)}}le.exports=m,le.exports.__esModule=!0,le.exports.default=le.exports},ZjWs:function(le,P){},"Znm+":function(le,P,h){var I=h("NykK"),m=h("ExA7"),_="[object Boolean]";function M(A){return A===!0||A===!1||m(A)&&I(A)==_}le.exports=M},ZtHU:function(le,P,h){le.exports={Graph:h("QJPA"),version:h("SUTL")}},Ztfv:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.tagProperty=P.tagParameter=P.decorate=void 0;var I=h("MON2"),m=h("xfSm");function _(W,Y,K,ne){var ae=m.TAGGED;A(ae,W,Y,ne,K)}P.tagParameter=_;function M(W,Y,K){var ne=m.TAGGED_PROP;A(ne,W.constructor,Y,K)}P.tagProperty=M;function A(W,Y,K,ne,ae){var te={},ce=typeof ae=="number",ee=ae!==void 0&&ce?ae.toString():K;if(ce&&K!==void 0)throw new Error(I.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(W,Y)&&(te=Reflect.getMetadata(W,Y));var H=te[ee];if(!Array.isArray(H))H=[];else for(var se=0,re=H;se<re.length;se++){var q=re[se];if(q.key===ne.key)throw new Error(I.DUPLICATED_METADATA+" "+q.key.toString())}H.push(ne),te[ee]=H,Reflect.defineMetadata(W,te,Y)}function G(W,Y){Reflect.decorate(W,Y)}function R(W,Y){return function(K,ne){Y(K,ne,W)}}function X(W,Y,K){typeof K=="number"?G([R(K,W)],Y):typeof K=="string"?Reflect.decorate([W],Y,K):G([W],Y)}P.decorate=X},ZzCi:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.named=void 0;var I=h("xfSm"),m=h("GXnB"),_=h("Ztfv");function M(A){return function(G,R,X){var W=new m.Metadata(I.NAMED_TAG,A);typeof X=="number"?_.tagParameter(G,R,X,W):_.tagProperty(G,R,W)}}P.named=M},a1gu:function(le,P,h){var I=h("cDf5").default,m=h("PJYZ");function _(M,A){if(A&&(I(A)==="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(M)}le.exports=_,le.exports.__esModule=!0,le.exports.default=le.exports},a8Yn:function(le,P){le.exports=h;function h(I,m){return I[0]*m[0]+I[1]*m[1]}},aPG5:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.resolve=void 0;var I=h("MON2"),m=h("FV85"),_=h("qK8v"),M=h("ujMp"),A=h("cSJO"),G=function(Y,K,ne){try{return ne()}catch(ae){throw _.isStackOverflowExeption(ae)?new Error(I.CIRCULAR_DEPENDENCY_IN_FACTORY(Y,K.toString())):ae}},R=function W(Y){return function(K){K.parentContext.setCurrentRequest(K);var ne=K.bindings,ae=K.childRequests,te=K.target&&K.target.isArray(),ce=!K.parentRequest||!K.parentRequest.target||!K.target||!K.parentRequest.target.matchesArray(K.target.serviceIdentifier);if(te&&ce)return ae.map(function(ye){var ue=W(Y);return ue(ye)});var ee=null;if(K.target.isOptional()&&ne.length===0)return;var H=ne[0],se=H.scope===m.BindingScopeEnum.Singleton,re=H.scope===m.BindingScopeEnum.Request;if(se&&H.activated)return H.cache;if(re&&Y!==null&&Y.has(H.id))return Y.get(H.id);if(H.type===m.BindingTypeEnum.ConstantValue)ee=H.cache,H.activated=!0;else if(H.type===m.BindingTypeEnum.Function)ee=H.cache,H.activated=!0;else if(H.type===m.BindingTypeEnum.Constructor)ee=H.implementationType;else if(H.type===m.BindingTypeEnum.DynamicValue&&H.dynamicValue!==null)ee=G("toDynamicValue",H.serviceIdentifier,function(){return H.dynamicValue(K.parentContext)});else if(H.type===m.BindingTypeEnum.Factory&&H.factory!==null)ee=G("toFactory",H.serviceIdentifier,function(){return H.factory(K.parentContext)});else if(H.type===m.BindingTypeEnum.Provider&&H.provider!==null)ee=G("toProvider",H.serviceIdentifier,function(){return H.provider(K.parentContext)});else if(H.type===m.BindingTypeEnum.Instance&&H.implementationType!==null)ee=A.resolveInstance(H.implementationType,ae,W(Y));else{var q=M.getServiceIdentifierAsString(K.serviceIdentifier);throw new Error(I.INVALID_BINDING_TYPE+" "+q)}return typeof H.onActivation=="function"&&(ee=H.onActivation(K.parentContext,ee)),se&&(H.cache=ee,H.activated=!0),re&&Y!==null&&!Y.has(H.id)&&Y.set(H.id,ee),ee}};function X(W){var Y=R(W.plan.rootRequest.requestScope);return Y(W.plan.rootRequest)}P.resolve=X},ac3q:function(le,P,h){},baXp:function(le,P,h){"use strict";h.d(P,"a",function(){return ce});var I=h("lwsE"),m=h.n(I),_=h("PJYZ"),M=h.n(_),A=h("7W2i"),G=h.n(A),R=h("a1gu"),X=h.n(R),W=h("Nsbk"),Y=h.n(W),K=h("oDt1");function ne(ee){var H=ae();return function(){var re=Y()(ee),q;if(H){var ye=Y()(this).constructor;q=Reflect.construct(re,arguments,ye)}else q=re.apply(this,arguments);return X()(this,q)}}function ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ee){return!1}}var te;(function(ee){ee[ee.Standard=0]="Standard"})(te||(te={}));var ce=function(ee){G()(se,ee);var H=ne(se);function se(re){var q;return m()(this,se),q=H.call(this,re),q.strategy=te.Standard,q.visibilityPlaneMask=0,q.visible=!1,Object.assign(M()(q),re),q}return se}(K.a)},blMc:function(le,P){le.exports=h;function h(I,m,_){var M=m[0],A=m[1];return I[0]=_[0]*M+_[2]*A+_[4],I[1]=_[1]*M+_[3]*A+_[5],I}},bx4M:function(le,P,h){"use strict";var I=h("rePB"),m=h("wx14"),_=h("TSYQ"),M=h.n(_),A=h("bT9E"),G=h("q1tI"),R=h("H84U"),X=h("3Nzz"),W=h("/ezw"),Y=h("ZTPi"),K=function(ve,pe){var L={};for(var ge in ve)Object.prototype.hasOwnProperty.call(ve,ge)&&pe.indexOf(ge)<0&&(L[ge]=ve[ge]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _e=0,ge=Object.getOwnPropertySymbols(ve);_e<ge.length;_e++)pe.indexOf(ge[_e])<0&&Object.prototype.propertyIsEnumerable.call(ve,ge[_e])&&(L[ge[_e]]=ve[ge[_e]]);return L},ne=function(pe){var L=pe.prefixCls,ge=pe.className,_e=pe.hoverable,Te=_e===void 0?!0:_e,we=K(pe,["prefixCls","className","hoverable"]);return G.createElement(R.a,null,function(Qe){var D=Qe.getPrefixCls,Ue=D("card",L),Ct=M()("".concat(Ue,"-grid"),ge,Object(I.a)({},"".concat(Ue,"-grid-hoverable"),Te));return G.createElement("div",Object(m.a)({},we,{className:Ct}))})},ae=ne,te=function(ve,pe){var L={};for(var ge in ve)Object.prototype.hasOwnProperty.call(ve,ge)&&pe.indexOf(ge)<0&&(L[ge]=ve[ge]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _e=0,ge=Object.getOwnPropertySymbols(ve);_e<ge.length;_e++)pe.indexOf(ge[_e])<0&&Object.prototype.propertyIsEnumerable.call(ve,ge[_e])&&(L[ge[_e]]=ve[ge[_e]]);return L};function ce(ve){var pe=ve.map(function(L,ge){return G.createElement("li",{style:{width:"".concat(100/ve.length,"%")},key:"action-".concat(ge)},G.createElement("span",null,L))});return pe}var ee=G.forwardRef(function(ve,pe){var L,ge,_e=G.useContext(R.b),Te=_e.getPrefixCls,we=_e.direction,Qe=G.useContext(X.b),D=function(ar){var mr;(mr=ve.onTabChange)===null||mr===void 0||mr.call(ve,ar)},Ue=function(){var ar;return G.Children.forEach(ve.children,function(mr){mr&&mr.type&&mr.type===ae&&(ar=!0)}),ar},Ct=ve.prefixCls,ut=ve.className,Nt=ve.extra,Kt=ve.headStyle,Je=Kt===void 0?{}:Kt,Vt=ve.bodyStyle,Be=Vt===void 0?{}:Vt,ie=ve.title,un=ve.loading,rn=ve.bordered,rr=rn===void 0?!0:rn,Pt=ve.size,Tn=ve.type,ur=ve.cover,Jt=ve.actions,fn=ve.tabList,Mn=ve.children,En=ve.activeTabKey,lt=ve.defaultActiveTabKey,Tt=ve.tabBarExtraContent,st=ve.hoverable,At=ve.tabProps,Ot=At===void 0?{}:At,dt=te(ve,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),at=Te("card",Ct),T=G.createElement(W.a,{loading:!0,active:!0,paragraph:{rows:4},title:!1},Mn),bn=En!==void 0,an=Object(m.a)(Object(m.a)({},Ot),(L={},Object(I.a)(L,bn?"activeKey":"defaultActiveKey",bn?En:lt),Object(I.a)(L,"tabBarExtraContent",Tt),L)),Jn,Qn=fn&&fn.length?G.createElement(Y.a,Object(m.a)({size:"large"},an,{className:"".concat(at,"-head-tabs"),onChange:D,items:fn.map(function(Hr){var ar;return{label:Hr.tab,key:Hr.key,disabled:(ar=Hr.disabled)!==null&&ar!==void 0?ar:!1}})})):null;(ie||Nt||Qn)&&(Jn=G.createElement("div",{className:"".concat(at,"-head"),style:Je},G.createElement("div",{className:"".concat(at,"-head-wrapper")},ie&&G.createElement("div",{className:"".concat(at,"-head-title")},ie),Nt&&G.createElement("div",{className:"".concat(at,"-extra")},Nt)),Qn));var De=ur?G.createElement("div",{className:"".concat(at,"-cover")},ur):null,be=G.createElement("div",{className:"".concat(at,"-body"),style:Be},un?T:Mn),Xe=Jt&&Jt.length?G.createElement("ul",{className:"".concat(at,"-actions")},ce(Jt)):null,Yt=Object(A.a)(dt,["onTabChange"]),ln=Pt||Qe,lr=M()(at,(ge={},Object(I.a)(ge,"".concat(at,"-loading"),un),Object(I.a)(ge,"".concat(at,"-bordered"),rr),Object(I.a)(ge,"".concat(at,"-hoverable"),st),Object(I.a)(ge,"".concat(at,"-contain-grid"),Ue()),Object(I.a)(ge,"".concat(at,"-contain-tabs"),fn&&fn.length),Object(I.a)(ge,"".concat(at,"-").concat(ln),ln),Object(I.a)(ge,"".concat(at,"-type-").concat(Tn),!!Tn),Object(I.a)(ge,"".concat(at,"-rtl"),we==="rtl"),ge),ut);return G.createElement("div",Object(m.a)({ref:pe},Yt,{className:lr}),Jn,De,be,Xe)}),H=ee,se=function(ve,pe){var L={};for(var ge in ve)Object.prototype.hasOwnProperty.call(ve,ge)&&pe.indexOf(ge)<0&&(L[ge]=ve[ge]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _e=0,ge=Object.getOwnPropertySymbols(ve);_e<ge.length;_e++)pe.indexOf(ge[_e])<0&&Object.prototype.propertyIsEnumerable.call(ve,ge[_e])&&(L[ge[_e]]=ve[ge[_e]]);return L},re=function(pe){return G.createElement(R.a,null,function(L){var ge=L.getPrefixCls,_e=pe.prefixCls,Te=pe.className,we=pe.avatar,Qe=pe.title,D=pe.description,Ue=se(pe,["prefixCls","className","avatar","title","description"]),Ct=ge("card",_e),ut=M()("".concat(Ct,"-meta"),Te),Nt=we?G.createElement("div",{className:"".concat(Ct,"-meta-avatar")},we):null,Kt=Qe?G.createElement("div",{className:"".concat(Ct,"-meta-title")},Qe):null,Je=D?G.createElement("div",{className:"".concat(Ct,"-meta-description")},D):null,Vt=Kt||Je?G.createElement("div",{className:"".concat(Ct,"-meta-detail")},Kt,Je):null;return G.createElement("div",Object(m.a)({},Ue,{className:ut}),Nt,Vt)})},q=re,ye=H;ye.Grid=ae,ye.Meta=q;var ue=P.a=ye},cDf5:function(le,P){function h(I){return le.exports=h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},le.exports.__esModule=!0,le.exports.default=le.exports,h(I)}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},cGwC:function(le,P){le.exports=h;function h(I,m,_){return I[0]=m[0]-_[0],I[1]=m[1]-_[1],I}},cSJO:function(le,P,h){"use strict";var I=this&&this.__spreadArray||function(W,Y){for(var K=0,ne=Y.length,ae=W.length;K<ne;K++,ae++)W[ae]=Y[K];return W};Object.defineProperty(P,"__esModule",{value:!0}),P.resolveInstance=void 0;var m=h("MON2"),_=h("FV85"),M=h("xfSm");function A(W,Y,K){var ne=Y.filter(function(te){return te.target!==null&&te.target.type===_.TargetTypeEnum.ClassProperty}),ae=ne.map(K);return ne.forEach(function(te,ce){var ee="";ee=te.target.name.value();var H=ae[ce];W[ee]=H}),W}function G(W,Y){return new(W.bind.apply(W,I([void 0],Y)))}function R(W,Y){if(Reflect.hasMetadata(M.POST_CONSTRUCT,W)){var K=Reflect.getMetadata(M.POST_CONSTRUCT,W);try{Y[K.value]()}catch(ne){throw new Error(m.POST_CONSTRUCT_ERROR(W.name,ne.message))}}}function X(W,Y,K){var ne=null;if(Y.length>0){var ae=Y.filter(function(ce){return ce.target!==null&&ce.target.type===_.TargetTypeEnum.ConstructorArgument}),te=ae.map(K);ne=G(W,te),ne=A(ne,Y,K)}else ne=new W;return R(W,ne),ne}P.resolveInstance=X},cXWL:function(le,P,h){"use strict";h.d(P,"a",function(){return G});var I=h("lwsE"),m=h.n(I),_=h("W8MJ"),M=h.n(_),A=h("IOcx"),G=function(){function R(X,W){m()(this,R),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=X||0,this.normal=W||A.d.fromValues(0,1,0),this.updatePNVertexFlag()}return M()(R,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(W){return A.d.dot(W,this.normal)-this.distance}},{key:"normalize",value:function(){var W=1/A.d.len(this.normal);A.d.scale(this.normal,this.normal,W),this.distance*=W}},{key:"intersectsLine",value:function(W,Y,K){var ne=this.distanceToPoint(W),ae=this.distanceToPoint(Y),te=ne/(ne-ae),ce=te>=0&&te<=1;return ce&&K&&A.d.lerp(K,W,Y,te),ce}}]),R}()},cZ5Q:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.injectable=void 0;var I=h("MON2"),m=h("xfSm");function _(){return function(M){if(Reflect.hasOwnMetadata(m.PARAM_TYPES,M))throw new Error(I.DUPLICATED_INJECTABLE_DECORATOR);var A=Reflect.getMetadata(m.DESIGN_PARAM_TYPES,M)||[];return Reflect.defineMetadata(m.PARAM_TYPES,A,M),M}}P.injectable=_},ccyi:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Saturation=void 0;var I=function(){function ee(H,se){for(var re=0;re<se.length;re++){var q=se[re];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(H,q.key,q)}}return function(H,se,re){return se&&ee(H.prototype,se),re&&ee(H,re),H}}(),m=h("q1tI"),_=K(m),M=h("/FUP"),A=K(M),G=h("DzJC"),R=K(G),X=h("VVms"),W=Y(X);function Y(ee){if(ee&&ee.__esModule)return ee;var H={};if(ee!=null)for(var se in ee)Object.prototype.hasOwnProperty.call(ee,se)&&(H[se]=ee[se]);return H.default=ee,H}function K(ee){return ee&&ee.__esModule?ee:{default:ee}}function ne(ee,H){if(!(ee instanceof H))throw new TypeError("Cannot call a class as a function")}function ae(ee,H){if(!ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:ee}function te(ee,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);ee.prototype=Object.create(H&&H.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(ee,H):ee.__proto__=H)}var ce=P.Saturation=function(ee){te(H,ee);function H(se){ne(this,H);var re=ae(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,se));return re.handleChange=function(q){typeof re.props.onChange=="function"&&re.throttle(re.props.onChange,W.calculateChange(q,re.props.hsl,re.container),q)},re.handleMouseDown=function(q){re.handleChange(q),window.addEventListener("mousemove",re.handleChange),window.addEventListener("mouseup",re.handleMouseUp)},re.handleMouseUp=function(){re.unbindEventListeners()},re.throttle=(0,R.default)(function(q,ye,ue){q(ye,ue)},50),re}return I(H,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var re=this,q=this.props.style||{},ye=q.color,ue=q.white,ve=q.black,pe=q.pointer,L=q.circle,ge=(0,A.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:ye,white:ue,black:ve,pointer:pe,circle:L}},{custom:!!this.props.style});return _.default.createElement("div",{style:ge.color,ref:function(Te){return re.container=Te},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},_.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),_.default.createElement("div",{style:ge.white,className:"saturation-white"},_.default.createElement("div",{style:ge.black,className:"saturation-black"}),_.default.createElement("div",{style:ge.pointer},this.props.pointer?_.default.createElement(this.props.pointer,this.props):_.default.createElement("div",{style:ge.circle}))))}}]),H}(m.PureComponent||m.Component);P.default=ce},d9O0:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.id=void 0;var I=0;function m(){return I++}P.id=m},dATH:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SliderPointer=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.SliderPointer=function(){var X=(0,M.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return m.default.createElement("div",{style:X.picker})};P.default=G},dO6L:function(le,P,h){"use strict";h.d(P,"a",function(){return I});function I(m,_,M,A){!M||Object.defineProperty(m,_,{enumerable:M.enumerable,configurable:M.configurable,writable:M.writable,value:M.initializer?M.initializer.call(A):void 0})}},dOXA:function(le,P){le.exports=h;function h(I,m,_){return I[0]=Math.min(m[0],_[0]),I[1]=Math.min(m[1],_[1]),I}},dQpi:function(le,P,h){var I=h("yGk4"),m=h("vN+2"),_=h("rEGp"),M=1/0,A=I&&1/_(new I([,-0]))[1]==M?function(G){return new I(G)}:m;le.exports=A},dX1H:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Target=void 0;var I=h("xfSm"),m=h("d9O0"),_=h("GXnB"),M=h("zxMA"),A=function(){function G(R,X,W,Y){this.id=m.id(),this.type=R,this.serviceIdentifier=W,this.name=new M.QueryableString(X||""),this.metadata=new Array;var K=null;typeof Y=="string"?K=new _.Metadata(I.NAMED_TAG,Y):Y instanceof _.Metadata&&(K=Y),K!==null&&this.metadata.push(K)}return G.prototype.hasTag=function(R){for(var X=0,W=this.metadata;X<W.length;X++){var Y=W[X];if(Y.key===R)return!0}return!1},G.prototype.isArray=function(){return this.hasTag(I.MULTI_INJECT_TAG)},G.prototype.matchesArray=function(R){return this.matchesTag(I.MULTI_INJECT_TAG)(R)},G.prototype.isNamed=function(){return this.hasTag(I.NAMED_TAG)},G.prototype.isTagged=function(){return this.metadata.some(function(R){return I.NON_CUSTOM_TAG_KEYS.every(function(X){return R.key!==X})})},G.prototype.isOptional=function(){return this.matchesTag(I.OPTIONAL_TAG)(!0)},G.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(R){return R.key===I.NAMED_TAG})[0]:null},G.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(R){return I.NON_CUSTOM_TAG_KEYS.every(function(X){return R.key!==X})}):null},G.prototype.matchesNamedTag=function(R){return this.matchesTag(I.NAMED_TAG)(R)},G.prototype.matchesTag=function(R){var X=this;return function(W){for(var Y=0,K=X.metadata;Y<K.length;Y++){var ne=K[Y];if(ne.key===R&&ne.value===W)return!0}return!1}},G}();P.Target=A},doU7:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingCount=void 0;var I={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};P.BindingCount=I},dxzI:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.AsyncContainerModule=P.ContainerModule=void 0;var I=h("d9O0"),m=function(){function M(A){this.id=I.id(),this.registry=A}return M}();P.ContainerModule=m;var _=function(){function M(A){this.id=I.id(),this.registry=A}return M}();P.AsyncContainerModule=_},eHBW:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SketchPresetColors=void 0;var I=Object.assign||function(K){for(var ne=1;ne<arguments.length;ne++){var ae=arguments[ne];for(var te in ae)Object.prototype.hasOwnProperty.call(ae,te)&&(K[te]=ae[te])}return K},m=h("q1tI"),_=W(m),M=h("17x9"),A=W(M),G=h("/FUP"),R=W(G),X=h("TM95");function W(K){return K&&K.__esModule?K:{default:K}}var Y=P.SketchPresetColors=function(ne){var ae=ne.colors,te=ne.onClick,ce=te===void 0?function(){}:te,ee=ne.onSwatchHover,H=(0,R.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!ae||!ae.length}),se=function(q,ye){ce({hex:q,source:"hex"},ye)};return _.default.createElement("div",{style:H.colors,className:"flexbox-fix"},ae.map(function(re){var q=typeof re=="string"?{color:re}:re,ye=""+q.color+(q.title||"");return _.default.createElement("div",{key:ye,style:H.swatchWrap},_.default.createElement(X.Swatch,I({},q,{style:H.swatch,onClick:se,onHover:ee,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+q.color}})))}))};Y.propTypes={colors:A.default.arrayOf(A.default.oneOfType([A.default.string,A.default.shape({color:A.default.string,title:A.default.string})])).isRequired},P.default=Y},fBpv:function(le,P,h){var I=h("PnFB");le.exports=m;function m(_,M){return I(_,M,"post")}},fbrv:function(le,P,h){"use strict";var I=this&&this.__spreadArray||function(ce,ee){for(var H=0,se=ee.length,re=ce.length;H<se;H++,re++)ce[re]=ee[H];return ce};Object.defineProperty(P,"__esModule",{value:!0}),P.getFunctionName=P.getBaseClassDependencyCount=P.getDependencies=void 0;var m=h("Yk9n"),_=h("MON2"),M=h("FV85"),A=h("xfSm"),G=h("ujMp");Object.defineProperty(P,"getFunctionName",{enumerable:!0,get:function(){return G.getFunctionName}});var R=h("dX1H");function X(ce,ee){var H=G.getFunctionName(ee),se=W(ce,H,ee,!1);return se}P.getDependencies=X;function W(ce,ee,H,se){var re=ce.getConstructorMetadata(H),q=re.compilerGeneratedMetadata;if(q===void 0){var ye=_.MISSING_INJECTABLE_ANNOTATION+" "+ee+".";throw new Error(ye)}var ue=re.userGeneratedMetadata,ve=Object.keys(ue),pe=H.length===0&&ve.length>0,L=ve.length>H.length,ge=pe||L?ve.length:H.length,_e=K(se,ee,q,ue,ge),Te=ne(ce,H),we=I(I([],_e),Te);return we}function Y(ce,ee,H,se,re){var q=re[ce.toString()]||[],ye=te(q),ue=ye.unmanaged!==!0,ve=se[ce],pe=ye.inject||ye.multiInject;if(ve=pe||ve,ve instanceof m.LazyServiceIdentifer&&(ve=ve.unwrap()),ue){var L=ve===Object,ge=ve===Function,_e=ve===void 0,Te=L||ge||_e;if(!ee&&Te){var we=_.MISSING_INJECT_ANNOTATION+" argument "+ce+" in class "+H+".";throw new Error(we)}var Qe=new R.Target(M.TargetTypeEnum.ConstructorArgument,ye.targetName,ve);return Qe.metadata=q,Qe}return null}function K(ce,ee,H,se,re){for(var q=[],ye=0;ye<re;ye++){var ue=ye,ve=Y(ue,ce,ee,H,se);ve!==null&&q.push(ve)}return q}function ne(ce,ee){for(var H=ce.getPropertiesMetadata(ee),se=[],re=Object.keys(H),q=0,ye=re;q<ye.length;q++){var ue=ye[q],ve=H[ue],pe=te(H[ue]),L=pe.targetName||ue,ge=pe.inject||pe.multiInject,_e=new R.Target(M.TargetTypeEnum.ClassProperty,L,ge);_e.metadata=ve,se.push(_e)}var Te=Object.getPrototypeOf(ee.prototype).constructor;if(Te!==Object){var we=ne(ce,Te);se=I(I([],se),we)}return se}function ae(ce,ee){var H=Object.getPrototypeOf(ee.prototype).constructor;if(H!==Object){var se=G.getFunctionName(H),re=W(ce,se,H,!0),q=re.map(function(ve){return ve.metadata.filter(function(pe){return pe.key===A.UNMANAGED_TAG})}),ye=[].concat.apply([],q).length,ue=re.length-ye;return ue>0?ue:ae(ce,H)}else return 0}P.getBaseClassDependencyCount=ae;function te(ce){var ee={};return ce.forEach(function(H){ee[H.key.toString()]=H.value}),{inject:ee[A.INJECT_TAG],multiInject:ee[A.MULTI_INJECT_TAG],targetName:ee[A.NAME_TAG],unmanaged:ee[A.UNMANAGED_TAG]}}},fbvF:function(le,P,h){(function(I,m){le.exports=m()})(this,function(){"use strict";var I=function(ke){return ke instanceof Uint8Array||ke instanceof Uint16Array||ke instanceof Uint32Array||ke instanceof Int8Array||ke instanceof Int16Array||ke instanceof Int32Array||ke instanceof Float32Array||ke instanceof Float64Array||ke instanceof Uint8ClampedArray},m=function(ke,ct){for(var Bt=Object.keys(ct),Dt=0;Dt<Bt.length;++Dt)ke[Bt[Dt]]=ct[Bt[Dt]];return ke},_=`
`;function M(me){return typeof atob!="undefined"?atob(me):"base64:"+me}function A(me){var ke=new Error("(regl) "+me);throw console.error(ke),ke}function G(me,ke){me||A(ke)}function R(me){return me?": "+me:""}function X(me,ke,ct){me in ke||A("unknown parameter ("+me+")"+R(ct)+". possible values: "+Object.keys(ke).join())}function W(me,ke){I(me)||A("invalid parameter type"+R(ke)+". must be a typed array")}function Y(me,ke){switch(ke){case"number":return typeof me=="number";case"object":return typeof me=="object";case"string":return typeof me=="string";case"boolean":return typeof me=="boolean";case"function":return typeof me=="function";case"undefined":return typeof me=="undefined";case"symbol":return typeof me=="symbol"}}function K(me,ke,ct){Y(me,ke)||A("invalid parameter type"+R(ct)+". expected "+ke+", got "+typeof me)}function ne(me,ke){me>=0&&(me|0)===me||A("invalid parameter type, ("+me+")"+R(ke)+". must be a nonnegative integer")}function ae(me,ke,ct){ke.indexOf(me)<0&&A("invalid value"+R(ct)+". must be one of: "+ke)}var te=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function ce(me){Object.keys(me).forEach(function(ke){te.indexOf(ke)<0&&A('invalid regl constructor argument "'+ke+'". must be one of '+te)})}function ee(me,ke){for(me=me+"";me.length<ke;)me=" "+me;return me}function H(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function se(me,ke){this.number=me,this.line=ke,this.errors=[]}function re(me,ke,ct){this.file=me,this.line=ke,this.message=ct}function q(){var me=new Error,ke=(me.stack||me).toString(),ct=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ke);if(ct)return ct[1];var Bt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ke);return Bt?Bt[1]:"unknown"}function ye(){var me=new Error,ke=(me.stack||me).toString(),ct=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ke);if(ct)return ct[1];var Bt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ke);return Bt?Bt[1]:"unknown"}function ue(me,ke){var ct=me.split(`
`),Bt=1,Dt=0,sn={unknown:new H,0:new H};sn.unknown.name=sn[0].name=ke||q(),sn.unknown.lines.push(new se(0,""));for(var Wt=0;Wt<ct.length;++Wt){var kn=ct[Wt],ir=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(kn);if(ir)switch(ir[1]){case"line":var Vn=/(\d+)(\s+\d+)?/.exec(ir[2]);Vn&&(Bt=Vn[1]|0,Vn[2]&&(Dt=Vn[2]|0,Dt in sn||(sn[Dt]=new H)));break;case"define":var Hn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(ir[2]);Hn&&(sn[Dt].name=Hn[1]?M(Hn[2]):Hn[2]);break}sn[Dt].lines.push(new se(Bt++,kn))}return Object.keys(sn).forEach(function(Gn){var pr=sn[Gn];pr.lines.forEach(function(fr){pr.index[fr.number]=fr})}),sn}function ve(me){var ke=[];return me.split(`
`).forEach(function(ct){if(!(ct.length<5)){var Bt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(ct);Bt?ke.push(new re(Bt[1]|0,Bt[2]|0,Bt[3].trim())):ct.length>0&&ke.push(new re("unknown",0,ct))}}),ke}function pe(me,ke){ke.forEach(function(ct){var Bt=me[ct.file];if(Bt){var Dt=Bt.index[ct.line];if(Dt){Dt.errors.push(ct),Bt.hasErrors=!0;return}}me.unknown.hasErrors=!0,me.unknown.lines[0].errors.push(ct)})}function L(me,ke,ct,Bt,Dt){if(!me.getShaderParameter(ke,me.COMPILE_STATUS)){var sn=me.getShaderInfoLog(ke),Wt=Bt===me.FRAGMENT_SHADER?"fragment":"vertex";Ue(ct,"string",Wt+" shader source must be a string",Dt);var kn=ue(ct,Dt),ir=ve(sn);pe(kn,ir),Object.keys(kn).forEach(function(Vn){var Hn=kn[Vn];if(!Hn.hasErrors)return;var Gn=[""],pr=[""];function fr(Yn,Xt){Gn.push(Yn),pr.push(Xt||"")}fr("file number "+Vn+": "+Hn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Hn.lines.forEach(function(Yn){if(Yn.errors.length>0){fr(ee(Yn.number,4)+"|  ","background-color:yellow; font-weight:bold"),fr(Yn.line+_,"color:red; background-color:yellow; font-weight:bold");var Xt=0;Yn.errors.forEach(function(Ht){var Wn=Ht.message,br=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Wn);if(br){var gn=br[1];switch(Wn=br[2],gn){case"assign":gn="=";break}Xt=Math.max(Yn.line.indexOf(gn,Xt),0)}else Xt=0;fr(ee("| ",6)),fr(ee("^^^",Xt+3)+_,"font-weight:bold"),fr(ee("| ",6)),fr(Wn+_,"font-weight:bold")}),fr(ee("| ",6)+_)}else fr(ee(Yn.number,4)+"|  "),fr(Yn.line+_,"color:red")}),typeof document!="undefined"&&!window.chrome?(pr[0]=Gn.join("%c"),console.log.apply(console,pr)):console.log(Gn.join(""))}),G.raise("Error compiling "+Wt+" shader, "+kn[0].name)}}function ge(me,ke,ct,Bt,Dt){if(!me.getProgramParameter(ke,me.LINK_STATUS)){var sn=me.getProgramInfoLog(ke),Wt=ue(ct,Dt),kn=ue(Bt,Dt),ir='Error linking program with vertex shader, "'+kn[0].name+'", and fragment shader "'+Wt[0].name+'"';typeof document!="undefined"?console.log("%c"+ir+_+"%c"+sn,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(ir+_+sn),G.raise(ir)}}function _e(me){me._commandRef=q()}function Te(me,ke,ct,Bt){_e(me);function Dt(ir){return ir?Bt.id(ir):0}me._fragId=Dt(me.static.frag),me._vertId=Dt(me.static.vert);function sn(ir,Vn){Object.keys(Vn).forEach(function(Hn){ir[Bt.id(Hn)]=!0})}var Wt=me._uniformSet={};sn(Wt,ke.static),sn(Wt,ke.dynamic);var kn=me._attributeSet={};sn(kn,ct.static),sn(kn,ct.dynamic),me._hasCount="count"in me.static||"count"in me.dynamic||"elements"in me.static||"elements"in me.dynamic}function we(me,ke){var ct=ye();A(me+" in command "+(ke||q())+(ct==="unknown"?"":" called from "+ct))}function Qe(me,ke,ct){me||we(ke,ct||q())}function D(me,ke,ct,Bt){me in ke||we("unknown parameter ("+me+")"+R(ct)+". possible values: "+Object.keys(ke).join(),Bt||q())}function Ue(me,ke,ct,Bt){Y(me,ke)||we("invalid parameter type"+R(ct)+". expected "+ke+", got "+typeof me,Bt||q())}function Ct(me){me()}function ut(me,ke,ct){me.texture?ae(me.texture._texture.internalformat,ke,"unsupported texture format for attachment"):ae(me.renderbuffer._renderbuffer.format,ct,"unsupported renderbuffer format for attachment")}var Nt=33071,Kt=9728,Je=9984,Vt=9985,Be=9986,ie=9987,un=5120,rn=5121,rr=5122,Pt=5123,Tn=5124,ur=5125,Jt=5126,fn=32819,Mn=32820,En=33635,lt=34042,Tt=36193,st={};st[un]=st[rn]=1,st[rr]=st[Pt]=st[Tt]=st[En]=st[fn]=st[Mn]=2,st[Tn]=st[ur]=st[Jt]=st[lt]=4;function At(me,ke){return me===Mn||me===fn||me===En?2:me===lt?4:st[me]*ke}function Ot(me){return!(me&me-1)&&!!me}function dt(me,ke,ct){var Bt,Dt=ke.width,sn=ke.height,Wt=ke.channels;G(Dt>0&&Dt<=ct.maxTextureSize&&sn>0&&sn<=ct.maxTextureSize,"invalid texture shape"),(me.wrapS!==Nt||me.wrapT!==Nt)&&G(Ot(Dt)&&Ot(sn),"incompatible wrap mode for texture, both width and height must be power of 2"),ke.mipmask===1?Dt!==1&&sn!==1&&G(me.minFilter!==Je&&me.minFilter!==Be&&me.minFilter!==Vt&&me.minFilter!==ie,"min filter requires mipmap"):(G(Ot(Dt)&&Ot(sn),"texture must be a square power of 2 to support mipmapping"),G(ke.mipmask===(Dt<<1)-1,"missing or incomplete mipmap data")),ke.type===Jt&&(ct.extensions.indexOf("oes_texture_float_linear")<0&&G(me.minFilter===Kt&&me.magFilter===Kt,"filter not supported, must enable oes_texture_float_linear"),G(!me.genMipmaps,"mipmap generation not supported with float textures"));var kn=ke.images;for(Bt=0;Bt<16;++Bt)if(kn[Bt]){var ir=Dt>>Bt,Vn=sn>>Bt;G(ke.mipmask&1<<Bt,"missing mipmap data");var Hn=kn[Bt];if(G(Hn.width===ir&&Hn.height===Vn,"invalid shape for mip images"),G(Hn.format===ke.format&&Hn.internalformat===ke.internalformat&&Hn.type===ke.type,"incompatible type for mip image"),!Hn.compressed)if(Hn.data){var Gn=Math.ceil(At(Hn.type,Wt)*ir/Hn.unpackAlignment)*Hn.unpackAlignment;G(Hn.data.byteLength===Gn*Vn,"invalid data for image, buffer size is inconsistent with image format")}else Hn.element||Hn.copy}else me.genMipmaps||G((ke.mipmask&1<<Bt)==0,"extra mipmap data");ke.compressed&&G(!me.genMipmaps,"mipmap generation for compressed images not supported")}function at(me,ke,ct,Bt){var Dt=me.width,sn=me.height,Wt=me.channels;G(Dt>0&&Dt<=Bt.maxTextureSize&&sn>0&&sn<=Bt.maxTextureSize,"invalid texture shape"),G(Dt===sn,"cube map must be square"),G(ke.wrapS===Nt&&ke.wrapT===Nt,"wrap mode not supported by cube map");for(var kn=0;kn<ct.length;++kn){var ir=ct[kn];G(ir.width===Dt&&ir.height===sn,"inconsistent cube map face shape"),ke.genMipmaps&&(G(!ir.compressed,"can not generate mipmap for compressed textures"),G(ir.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Vn=ir.images,Hn=0;Hn<16;++Hn){var Gn=Vn[Hn];if(Gn){var pr=Dt>>Hn,fr=sn>>Hn;G(ir.mipmask&1<<Hn,"missing mipmap data"),G(Gn.width===pr&&Gn.height===fr,"invalid shape for mip images"),G(Gn.format===me.format&&Gn.internalformat===me.internalformat&&Gn.type===me.type,"incompatible type for mip image"),Gn.compressed||(Gn.data?G(Gn.data.byteLength===pr*fr*Math.max(At(Gn.type,Wt),Gn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Gn.element||Gn.copy)}}}}var T=m(G,{optional:Ct,raise:A,commandRaise:we,command:Qe,parameter:X,commandParameter:D,constructor:ce,type:K,commandType:Ue,isTypedArray:W,nni:ne,oneOf:ae,shaderError:L,linkError:ge,callSite:ye,saveCommandRef:_e,saveDrawInfo:Te,framebufferFormat:ut,guessCommand:q,texture2D:dt,textureCube:at}),bn=0,an=0,Jn=5,Qn=6;function De(me,ke){this.id=bn++,this.type=me,this.data=ke}function be(me){return me.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Xe(me){if(me.length===0)return[];var ke=me.charAt(0),ct=me.charAt(me.length-1);if(me.length>1&&ke===ct&&(ke==='"'||ke==="'"))return['"'+be(me.substr(1,me.length-2))+'"'];var Bt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(me);if(Bt)return Xe(me.substr(0,Bt.index)).concat(Xe(Bt[1])).concat(Xe(me.substr(Bt.index+Bt[0].length)));var Dt=me.split(".");if(Dt.length===1)return['"'+be(me)+'"'];for(var sn=[],Wt=0;Wt<Dt.length;++Wt)sn=sn.concat(Xe(Dt[Wt]));return sn}function Yt(me){return"["+Xe(me).join("][")+"]"}function ln(me,ke){return new De(me,Yt(ke+""))}function lr(me){return typeof me=="function"&&!me._reglType||me instanceof De}function Hr(me,ke){if(typeof me=="function")return new De(an,me);if(typeof me=="number"||typeof me=="boolean")return new De(Jn,me);if(Array.isArray(me))return new De(Qn,me.map(function(ct,Bt){return Hr(ct,ke+"["+Bt+"]")}));if(me instanceof De)return me;T(!1,"invalid option type in uniform "+ke)}var ar={DynamicVariable:De,define:ln,isDynamic:lr,unbox:Hr,accessor:Yt},mr={next:typeof requestAnimationFrame=="function"?function(me){return requestAnimationFrame(me)}:function(me){return setTimeout(me,16)},cancel:typeof cancelAnimationFrame=="function"?function(me){return cancelAnimationFrame(me)}:clearTimeout},yr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function kr(){var me={"":0},ke=[""];return{id:function(Bt){var Dt=me[Bt];return Dt||(Dt=me[Bt]=ke.length,ke.push(Bt),Dt)},str:function(Bt){return ke[Bt]}}}function Ur(me,ke,ct){var Bt=document.createElement("canvas");m(Bt.style,{border:0,margin:0,padding:0,top:0,left:0}),me.appendChild(Bt),me===document.body&&(Bt.style.position="absolute",m(me.style,{margin:0,padding:0}));function Dt(){var kn=window.innerWidth,ir=window.innerHeight;if(me!==document.body){var Vn=me.getBoundingClientRect();kn=Vn.right-Vn.left,ir=Vn.bottom-Vn.top}Bt.width=ct*kn,Bt.height=ct*ir,m(Bt.style,{width:kn+"px",height:ir+"px"})}var sn;me!==document.body&&typeof ResizeObserver=="function"?(sn=new ResizeObserver(function(){setTimeout(Dt)}),sn.observe(me)):window.addEventListener("resize",Dt,!1);function Wt(){sn?sn.disconnect():window.removeEventListener("resize",Dt),me.removeChild(Bt)}return Dt(),{canvas:Bt,onDestroy:Wt}}function Va(me,ke){function ct(Bt){try{return me.getContext(Bt,ke)}catch(Dt){return null}}return ct("webgl")||ct("experimental-webgl")||ct("webgl-experimental")}function da(me){return typeof me.nodeName=="string"&&typeof me.appendChild=="function"&&typeof me.getBoundingClientRect=="function"}function Ji(me){return typeof me.drawArrays=="function"||typeof me.drawElements=="function"}function jo(me){return typeof me=="string"?me.split():(T(Array.isArray(me),"invalid extension array"),me)}function ri(me){return typeof me=="string"?(T(typeof document!="undefined","not supported outside of DOM"),document.querySelector(me)):me}function ji(me){var ke=me||{},ct,Bt,Dt,sn,Wt={},kn=[],ir=[],Vn=typeof window=="undefined"?1:window.devicePixelRatio,Hn=!1,Gn=function(Xt){Xt&&T.raise(Xt)},pr=function(){};if(typeof ke=="string"?(T(typeof document!="undefined","selector queries only supported in DOM enviroments"),ct=document.querySelector(ke),T(ct,"invalid query string for element")):typeof ke=="object"?da(ke)?ct=ke:Ji(ke)?(sn=ke,Dt=sn.canvas):(T.constructor(ke),"gl"in ke?sn=ke.gl:"canvas"in ke?Dt=ri(ke.canvas):"container"in ke&&(Bt=ri(ke.container)),"attributes"in ke&&(Wt=ke.attributes,T.type(Wt,"object","invalid context attributes")),"extensions"in ke&&(kn=jo(ke.extensions)),"optionalExtensions"in ke&&(ir=jo(ke.optionalExtensions)),"onDone"in ke&&(T.type(ke.onDone,"function","invalid or missing onDone callback"),Gn=ke.onDone),"profile"in ke&&(Hn=!!ke.profile),"pixelRatio"in ke&&(Vn=+ke.pixelRatio,T(Vn>0,"invalid pixel ratio"))):T.raise("invalid arguments to regl"),ct&&(ct.nodeName.toLowerCase()==="canvas"?Dt=ct:Bt=ct),!sn){if(!Dt){T(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var fr=Ur(Bt||document.body,Gn,Vn);if(!fr)return null;Dt=fr.canvas,pr=fr.onDestroy}Wt.premultipliedAlpha===void 0&&(Wt.premultipliedAlpha=!0),sn=Va(Dt,Wt)}return sn?{gl:sn,canvas:Dt,container:Bt,extensions:kn,optionalExtensions:ir,pixelRatio:Vn,profile:Hn,onDone:Gn,onDestroy:pr}:(pr(),Gn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Li(me,ke){var ct={};function Bt(Wt){T.type(Wt,"string","extension name must be string");var kn=Wt.toLowerCase(),ir;try{ir=ct[kn]=me.getExtension(kn)}catch(Vn){}return!!ir}for(var Dt=0;Dt<ke.extensions.length;++Dt){var sn=ke.extensions[Dt];if(!Bt(sn))return ke.onDestroy(),ke.onDone('"'+sn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ke.optionalExtensions.forEach(Bt),{extensions:ct,restore:function(){Object.keys(ct).forEach(function(kn){if(ct[kn]&&!Bt(kn))throw new Error("(regl): error restoring extension "+kn)})}}}function Aa(me,ke){for(var ct=Array(me),Bt=0;Bt<me;++Bt)ct[Bt]=ke(Bt);return ct}var ki=5120,mi=5121,na=5122,Ki=5123,go=5124,ra=5125,di=5126;function So(me){for(var ke=16;ke<=1<<28;ke*=16)if(me<=ke)return ke;return 0}function si(me){var ke,ct;return ke=(me>65535)<<4,me>>>=ke,ct=(me>255)<<3,me>>>=ct,ke|=ct,ct=(me>15)<<2,me>>>=ct,ke|=ct,ct=(me>3)<<1,me>>>=ct,ke|=ct,ke|me>>1}function Si(){var me=Aa(8,function(){return[]});function ke(sn){var Wt=So(sn),kn=me[si(Wt)>>2];return kn.length>0?kn.pop():new ArrayBuffer(Wt)}function ct(sn){me[si(sn.byteLength)>>2].push(sn)}function Bt(sn,Wt){var kn=null;switch(sn){case ki:kn=new Int8Array(ke(Wt),0,Wt);break;case mi:kn=new Uint8Array(ke(Wt),0,Wt);break;case na:kn=new Int16Array(ke(2*Wt),0,Wt);break;case Ki:kn=new Uint16Array(ke(2*Wt),0,Wt);break;case go:kn=new Int32Array(ke(4*Wt),0,Wt);break;case ra:kn=new Uint32Array(ke(4*Wt),0,Wt);break;case di:kn=new Float32Array(ke(4*Wt),0,Wt);break;default:return null}return kn.length!==Wt?kn.subarray(0,Wt):kn}function Dt(sn){ct(sn.buffer)}return{alloc:ke,free:ct,allocType:Bt,freeType:Dt}}var yi=Si();yi.zero=Si();var zi=3408,Ko=3410,To=3411,po=3412,Yo=3413,Us=3414,Wu=3415,Lo=33901,$u=33902,iu=3379,Zo=3386,Vs=34921,ou=36347,Is=36348,Hs=35661,Ws=35660,su=34930,nn=36349,On=34076,vr=34024,It=7936,jt=7937,Bn=7938,pn=35724,on=34047,qt=36063,mn=34852,vn=3553,hr=34067,Nn=34069,Nr=33984,Er=6408,Rr=5126,xr=5121,Vr=36160,La=36053,Pr=36064,Zr=16384,wr=function(ke,ct){var Bt=1;ct.ext_texture_filter_anisotropic&&(Bt=ke.getParameter(on));var Dt=1,sn=1;ct.webgl_draw_buffers&&(Dt=ke.getParameter(mn),sn=ke.getParameter(qt));var Wt=!!ct.oes_texture_float;if(Wt){var kn=ke.createTexture();ke.bindTexture(vn,kn),ke.texImage2D(vn,0,Er,1,1,0,Er,Rr,null);var ir=ke.createFramebuffer();if(ke.bindFramebuffer(Vr,ir),ke.framebufferTexture2D(Vr,Pr,vn,kn,0),ke.bindTexture(vn,null),ke.checkFramebufferStatus(Vr)!==La)Wt=!1;else{ke.viewport(0,0,1,1),ke.clearColor(1,0,0,1),ke.clear(Zr);var Vn=yi.allocType(Rr,4);ke.readPixels(0,0,1,1,Er,Rr,Vn),ke.getError()?Wt=!1:(ke.deleteFramebuffer(ir),ke.deleteTexture(kn),Wt=Vn[0]===1),yi.freeType(Vn)}}var Hn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Gn=!0;if(!Hn){var pr=ke.createTexture(),fr=yi.allocType(xr,36);ke.activeTexture(Nr),ke.bindTexture(hr,pr),ke.texImage2D(Nn,0,Er,3,3,0,Er,xr,fr),yi.freeType(fr),ke.bindTexture(hr,null),ke.deleteTexture(pr),Gn=!ke.getError()}return{colorBits:[ke.getParameter(Ko),ke.getParameter(To),ke.getParameter(po),ke.getParameter(Yo)],depthBits:ke.getParameter(Us),stencilBits:ke.getParameter(Wu),subpixelBits:ke.getParameter(zi),extensions:Object.keys(ct).filter(function(Yn){return!!ct[Yn]}),maxAnisotropic:Bt,maxDrawbuffers:Dt,maxColorAttachments:sn,pointSizeDims:ke.getParameter(Lo),lineWidthDims:ke.getParameter($u),maxViewportDims:ke.getParameter(Zo),maxCombinedTextureUnits:ke.getParameter(Hs),maxCubeMapSize:ke.getParameter(On),maxRenderbufferSize:ke.getParameter(vr),maxTextureUnits:ke.getParameter(su),maxTextureSize:ke.getParameter(iu),maxAttributes:ke.getParameter(Vs),maxVertexUniforms:ke.getParameter(ou),maxVertexTextureUnits:ke.getParameter(Ws),maxVaryingVectors:ke.getParameter(Is),maxFragmentUniforms:ke.getParameter(nn),glsl:ke.getParameter(pn),renderer:ke.getParameter(jt),vendor:ke.getParameter(It),version:ke.getParameter(Bn),readFloat:Wt,npotTextureCube:Gn}};function ea(me){return!!me&&typeof me=="object"&&Array.isArray(me.shape)&&Array.isArray(me.stride)&&typeof me.offset=="number"&&me.shape.length===me.stride.length&&(Array.isArray(me.data)||I(me.data))}var Dr=function(ke){return Object.keys(ke).map(function(ct){return ke[ct]})},ha={shape:$s,flatten:ho};function ma(me,ke,ct){for(var Bt=0;Bt<ke;++Bt)ct[Bt]=me[Bt]}function Ui(me,ke,ct,Bt){for(var Dt=0,sn=0;sn<ke;++sn)for(var Wt=me[sn],kn=0;kn<ct;++kn)Bt[Dt++]=Wt[kn]}function Mo(me,ke,ct,Bt,Dt,sn){for(var Wt=sn,kn=0;kn<ke;++kn)for(var ir=me[kn],Vn=0;Vn<ct;++Vn)for(var Hn=ir[Vn],Gn=0;Gn<Bt;++Gn)Dt[Wt++]=Hn[Gn]}function uu(me,ke,ct,Bt,Dt){for(var sn=1,Wt=ct+1;Wt<ke.length;++Wt)sn*=ke[Wt];var kn=ke[ct];if(ke.length-ct==4){var ir=ke[ct+1],Vn=ke[ct+2],Hn=ke[ct+3];for(Wt=0;Wt<kn;++Wt)Mo(me[Wt],ir,Vn,Hn,Bt,Dt),Dt+=sn}else for(Wt=0;Wt<kn;++Wt)uu(me[Wt],ke,ct+1,Bt,Dt),Dt+=sn}function ho(me,ke,ct,Bt){var Dt=1;if(ke.length)for(var sn=0;sn<ke.length;++sn)Dt*=ke[sn];else Dt=0;var Wt=Bt||yi.allocType(ct,Dt);switch(ke.length){case 0:break;case 1:ma(me,ke[0],Wt);break;case 2:Ui(me,ke[0],ke[1],Wt);break;case 3:Mo(me,ke[0],ke[1],ke[2],Wt,0);break;default:uu(me,ke,0,Wt,0)}return Wt}function $s(me){for(var ke=[],ct=me;ct.length;ct=ct[0])ke.push(ct.length);return ke}var Rs={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Xu=5120,sc=5122,uc=5124,tf=5121,Ns=5123,nf=5125,Ku=5126,Rl=5126,lu={int8:Xu,int16:sc,int32:uc,uint8:tf,uint16:Ns,uint32:nf,float:Ku,float32:Rl},Nl=35048,Gf=35040,jl={dynamic:Nl,stream:Gf,static:35044},lc=ha.flatten,rf=ha.shape,af=35044,wi=35040,hi=5121,ol=5126,gs=[];gs[5120]=1,gs[5122]=2,gs[5124]=4,gs[5121]=1,gs[5123]=2,gs[5125]=4,gs[5126]=4;function xu(me){return Rs[Object.prototype.toString.call(me)]|0}function sl(me,ke){for(var ct=0;ct<ke.length;++ct)me[ct]=ke[ct]}function Ll(me,ke,ct,Bt,Dt,sn,Wt){for(var kn=0,ir=0;ir<ct;++ir)for(var Vn=0;Vn<Bt;++Vn)me[kn++]=ke[Dt*ir+sn*Vn+Wt]}function zf(me,ke,ct,Bt){var Dt=0,sn={};function Wt(Xt){this.id=Dt++,this.buffer=me.createBuffer(),this.type=Xt,this.usage=af,this.byteLength=0,this.dimension=1,this.dtype=hi,this.persistentData=null,ct.profile&&(this.stats={size:0})}Wt.prototype.bind=function(){me.bindBuffer(this.type,this.buffer)},Wt.prototype.destroy=function(){pr(this)};var kn=[];function ir(Xt,Ht){var Wn=kn.pop();return Wn||(Wn=new Wt(Xt)),Wn.bind(),Gn(Wn,Ht,wi,0,1,!1),Wn}function Vn(Xt){kn.push(Xt)}function Hn(Xt,Ht,Wn){Xt.byteLength=Ht.byteLength,me.bufferData(Xt.type,Ht,Wn)}function Gn(Xt,Ht,Wn,br,gn,Mr){var Dn;if(Xt.usage=Wn,Array.isArray(Ht)){if(Xt.dtype=br||ol,Ht.length>0){var jn;if(Array.isArray(Ht[0])){Dn=rf(Ht);for(var _n=1,Xn=1;Xn<Dn.length;++Xn)_n*=Dn[Xn];Xt.dimension=_n,jn=lc(Ht,Dn,Xt.dtype),Hn(Xt,jn,Wn),Mr?Xt.persistentData=jn:yi.freeType(jn)}else if(typeof Ht[0]=="number"){Xt.dimension=gn;var _r=yi.allocType(Xt.dtype,Ht.length);sl(_r,Ht),Hn(Xt,_r,Wn),Mr?Xt.persistentData=_r:yi.freeType(_r)}else I(Ht[0])?(Xt.dimension=Ht[0].length,Xt.dtype=br||xu(Ht[0])||ol,jn=lc(Ht,[Ht.length,Ht[0].length],Xt.dtype),Hn(Xt,jn,Wn),Mr?Xt.persistentData=jn:yi.freeType(jn)):T.raise("invalid buffer data")}}else if(I(Ht))Xt.dtype=br||xu(Ht),Xt.dimension=gn,Hn(Xt,Ht,Wn),Mr&&(Xt.persistentData=new Uint8Array(new Uint8Array(Ht.buffer)));else if(ea(Ht)){Dn=Ht.shape;var oa=Ht.stride,dr=Ht.offset,qn=0,Sn=0,Qr=0,Ta=0;Dn.length===1?(qn=Dn[0],Sn=1,Qr=oa[0],Ta=0):Dn.length===2?(qn=Dn[0],Sn=Dn[1],Qr=oa[0],Ta=oa[1]):T.raise("invalid shape"),Xt.dtype=br||xu(Ht.data)||ol,Xt.dimension=Sn;var Tr=yi.allocType(Xt.dtype,qn*Sn);Ll(Tr,Ht.data,qn,Sn,Qr,Ta,dr),Hn(Xt,Tr,Wn),Mr?Xt.persistentData=Tr:yi.freeType(Tr)}else Ht instanceof ArrayBuffer?(Xt.dtype=hi,Xt.dimension=gn,Hn(Xt,Ht,Wn),Mr&&(Xt.persistentData=new Uint8Array(new Uint8Array(Ht)))):T.raise("invalid buffer data")}function pr(Xt){ke.bufferCount--,Bt(Xt);var Ht=Xt.buffer;T(Ht,"buffer must not be deleted already"),me.deleteBuffer(Ht),Xt.buffer=null,delete sn[Xt.id]}function fr(Xt,Ht,Wn,br){ke.bufferCount++;var gn=new Wt(Ht);sn[gn.id]=gn;function Mr(_n){var Xn=af,_r=null,oa=0,dr=0,qn=1;return Array.isArray(_n)||I(_n)||ea(_n)||_n instanceof ArrayBuffer?_r=_n:typeof _n=="number"?oa=_n|0:_n&&(T.type(_n,"object","buffer arguments must be an object, a number or an array"),"data"in _n&&(T(_r===null||Array.isArray(_r)||I(_r)||ea(_r),"invalid data for buffer"),_r=_n.data),"usage"in _n&&(T.parameter(_n.usage,jl,"invalid buffer usage"),Xn=jl[_n.usage]),"type"in _n&&(T.parameter(_n.type,lu,"invalid buffer type"),dr=lu[_n.type]),"dimension"in _n&&(T.type(_n.dimension,"number","invalid dimension"),qn=_n.dimension|0),"length"in _n&&(T.nni(oa,"buffer length must be a nonnegative integer"),oa=_n.length|0)),gn.bind(),_r?Gn(gn,_r,Xn,dr,qn,br):(oa&&me.bufferData(gn.type,oa,Xn),gn.dtype=dr||hi,gn.usage=Xn,gn.dimension=qn,gn.byteLength=oa),ct.profile&&(gn.stats.size=gn.byteLength*gs[gn.dtype]),Mr}function Dn(_n,Xn){T(Xn+_n.byteLength<=gn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+_n.byteLength+" starting from offset "+Xn+" to a buffer of size "+gn.byteLength),me.bufferSubData(gn.type,Xn,_n)}function jn(_n,Xn){var _r=(Xn||0)|0,oa;if(gn.bind(),I(_n)||_n instanceof ArrayBuffer)Dn(_n,_r);else if(Array.isArray(_n)){if(_n.length>0)if(typeof _n[0]=="number"){var dr=yi.allocType(gn.dtype,_n.length);sl(dr,_n),Dn(dr,_r),yi.freeType(dr)}else if(Array.isArray(_n[0])||I(_n[0])){oa=rf(_n);var qn=lc(_n,oa,gn.dtype);Dn(qn,_r),yi.freeType(qn)}else T.raise("invalid buffer data")}else if(ea(_n)){oa=_n.shape;var Sn=_n.stride,Qr=0,Ta=0,Tr=0,Pa=0;oa.length===1?(Qr=oa[0],Ta=1,Tr=Sn[0],Pa=0):oa.length===2?(Qr=oa[0],Ta=oa[1],Tr=Sn[0],Pa=Sn[1]):T.raise("invalid shape");var sa=Array.isArray(_n.data)?gn.dtype:xu(_n.data),Ma=yi.allocType(sa,Qr*Ta);Ll(Ma,_n.data,Qr,Ta,Tr,Pa,_n.offset),Dn(Ma,_r),yi.freeType(Ma)}else T.raise("invalid data for buffer subdata");return Mr}return Wn||Mr(Xt),Mr._reglType="buffer",Mr._buffer=gn,Mr.subdata=jn,ct.profile&&(Mr.stats=gn.stats),Mr.destroy=function(){pr(gn)},Mr}function Yn(){Dr(sn).forEach(function(Xt){Xt.buffer=me.createBuffer(),me.bindBuffer(Xt.type,Xt.buffer),me.bufferData(Xt.type,Xt.persistentData||Xt.byteLength,Xt.usage)})}return ct.profile&&(ke.getTotalBufferSize=function(){var Xt=0;return Object.keys(sn).forEach(function(Ht){Xt+=sn[Ht].stats.size}),Xt}),{create:fr,createStream:ir,destroyStream:Vn,clear:function(){Dr(sn).forEach(pr),kn.forEach(pr)},getBuffer:function(Ht){return Ht&&Ht._buffer instanceof Wt?Ht._buffer:null},restore:Yn,_initBuffer:Gn}}var cu=0,cc=0,Qi=1,_l=1,Su=4,fu=4,du={points:cu,point:cc,lines:Qi,line:_l,triangles:Su,triangle:fu,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},_o=0,U=1,S=4,z=5120,V=5121,oe=5122,Ce=5123,Ee=5124,Ge=5125,it=34963,yt=35040,tn=35044;function wn(me,ke,ct,Bt){var Dt={},sn=0,Wt={uint8:V,uint16:Ce};ke.oes_element_index_uint&&(Wt.uint32=Ge);function kn(Yn){this.id=sn++,Dt[this.id]=this,this.buffer=Yn,this.primType=S,this.vertCount=0,this.type=0}kn.prototype.bind=function(){this.buffer.bind()};var ir=[];function Vn(Yn){var Xt=ir.pop();return Xt||(Xt=new kn(ct.create(null,it,!0,!1)._buffer)),Gn(Xt,Yn,yt,-1,-1,0,0),Xt}function Hn(Yn){ir.push(Yn)}function Gn(Yn,Xt,Ht,Wn,br,gn,Mr){Yn.buffer.bind();var Dn;if(Xt){var jn=Mr;!Mr&&(!I(Xt)||ea(Xt)&&!I(Xt.data))&&(jn=ke.oes_element_index_uint?Ge:Ce),ct._initBuffer(Yn.buffer,Xt,Ht,jn,3)}else me.bufferData(it,gn,Ht),Yn.buffer.dtype=Dn||V,Yn.buffer.usage=Ht,Yn.buffer.dimension=3,Yn.buffer.byteLength=gn;if(Dn=Mr,!Mr){switch(Yn.buffer.dtype){case V:case z:Dn=V;break;case Ce:case oe:Dn=Ce;break;case Ge:case Ee:Dn=Ge;break;default:T.raise("unsupported type for element array")}Yn.buffer.dtype=Dn}Yn.type=Dn,T(Dn!==Ge||!!ke.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var _n=br;_n<0&&(_n=Yn.buffer.byteLength,Dn===Ce?_n>>=1:Dn===Ge&&(_n>>=2)),Yn.vertCount=_n;var Xn=Wn;if(Wn<0){Xn=S;var _r=Yn.buffer.dimension;_r===1&&(Xn=_o),_r===2&&(Xn=U),_r===3&&(Xn=S)}Yn.primType=Xn}function pr(Yn){Bt.elementsCount--,T(Yn.buffer!==null,"must not double destroy elements"),delete Dt[Yn.id],Yn.buffer.destroy(),Yn.buffer=null}function fr(Yn,Xt){var Ht=ct.create(null,it,!0),Wn=new kn(Ht._buffer);Bt.elementsCount++;function br(gn){if(!gn)Ht(),Wn.primType=S,Wn.vertCount=0,Wn.type=V;else if(typeof gn=="number")Ht(gn),Wn.primType=S,Wn.vertCount=gn|0,Wn.type=V;else{var Mr=null,Dn=tn,jn=-1,_n=-1,Xn=0,_r=0;Array.isArray(gn)||I(gn)||ea(gn)?Mr=gn:(T.type(gn,"object","invalid arguments for elements"),"data"in gn&&(Mr=gn.data,T(Array.isArray(Mr)||I(Mr)||ea(Mr),"invalid data for element buffer")),"usage"in gn&&(T.parameter(gn.usage,jl,"invalid element buffer usage"),Dn=jl[gn.usage]),"primitive"in gn&&(T.parameter(gn.primitive,du,"invalid element buffer primitive"),jn=du[gn.primitive]),"count"in gn&&(T(typeof gn.count=="number"&&gn.count>=0,"invalid vertex count for elements"),_n=gn.count|0),"type"in gn&&(T.parameter(gn.type,Wt,"invalid buffer type"),_r=Wt[gn.type]),"length"in gn?Xn=gn.length|0:(Xn=_n,_r===Ce||_r===oe?Xn*=2:(_r===Ge||_r===Ee)&&(Xn*=4))),Gn(Wn,Mr,Dn,jn,_n,Xn,_r)}return br}return br(Yn),br._reglType="elements",br._elements=Wn,br.subdata=function(gn,Mr){return Ht.subdata(gn,Mr),br},br.destroy=function(){pr(Wn)},br}return{create:fr,createStream:Vn,destroyStream:Hn,getElements:function(Xt){return typeof Xt=="function"&&Xt._elements instanceof kn?Xt._elements:null},clear:function(){Dr(Dt).forEach(pr)}}}var cr=new Float32Array(1),en=new Uint32Array(cr.buffer),zn=5123;function ia(me){for(var ke=yi.allocType(zn,me.length),ct=0;ct<me.length;++ct)if(isNaN(me[ct]))ke[ct]=65535;else if(me[ct]===Infinity)ke[ct]=31744;else if(me[ct]===-Infinity)ke[ct]=64512;else{cr[0]=me[ct];var Bt=en[0],Dt=Bt>>>31<<15,sn=(Bt<<1>>>24)-127,Wt=Bt>>13&(1<<10)-1;if(sn<-24)ke[ct]=Dt;else if(sn<-14){var kn=-14-sn;ke[ct]=Dt+(Wt+(1<<10)>>kn)}else sn>15?ke[ct]=Dt+31744:ke[ct]=Dt+(sn+15<<10)+Wt}return ke}function Fr(me){return Array.isArray(me)||I(me)}var bi=function(ke){return!(ke&ke-1)&&!!ke},Fo=34467,Vi=3553,Ao=34067,oo=34069,va=6408,ps=6406,ei=6407,Ti=6409,Mi=6410,ul=32854,eo=32855,Jo=36194,hu=32819,vu=32820,js=33635,Po=34042,ms=6402,ko=34041,mo=35904,Yu=35906,ys=36193,ui=33776,gu=33777,as=33778,Xs=33779,of=35986,Fl=35987,fc=34798,Qo=35840,Bl=35841,Ls=35842,ll=35843,b=36196,k=5121,J=5123,he=5125,Oe=5126,Re=10242,Ke=10243,qe=10497,pt=33071,wt=33648,zt=10240,Fe=10241,Se=9728,He=9729,nt=9984,Pe=9985,Ie=9986,Ze=9987,Lt=33170,Zt=4352,An=4353,Un=4354,Ln=34046,Wr=3317,Gr=37440,Br=37441,Xr=37443,_a=37444,ga=33984,Na=[nt,Ie,Pe,Ze],ta=[0,Ti,Mi,ei,va],Yr={};Yr[Ti]=Yr[ps]=Yr[ms]=1,Yr[ko]=Yr[Mi]=2,Yr[ei]=Yr[mo]=3,Yr[va]=Yr[Yu]=4;function _i(me){return"[object "+me+"]"}var bs=_i("HTMLCanvasElement"),Gl=_i("OffscreenCanvas"),dc=_i("CanvasRenderingContext2D"),Zh=_i("ImageBitmap"),ig=_i("HTMLImageElement"),sf=_i("HTMLVideoElement"),zl=Object.keys(Rs).concat([bs,Gl,dc,Zh,ig,sf]),cl=[];cl[k]=1,cl[Oe]=4,cl[ys]=2,cl[J]=2,cl[he]=4;var Bo=[];Bo[ul]=2,Bo[eo]=2,Bo[Jo]=2,Bo[ko]=4,Bo[ui]=.5,Bo[gu]=.5,Bo[as]=1,Bo[Xs]=1,Bo[of]=.5,Bo[Fl]=1,Bo[fc]=1,Bo[Qo]=.5,Bo[Bl]=.25,Bo[Ls]=.5,Bo[ll]=.25,Bo[b]=.5;function Ul(me){return Array.isArray(me)&&(me.length===0||typeof me[0]=="number")}function Jh(me){if(!Array.isArray(me))return!1;var ke=me.length;return!(ke===0||!Fr(me[0]))}function Vl(me){return Object.prototype.toString.call(me)}function Uf(me){return Vl(me)===bs}function Qh(me){return Vl(me)===Gl}function Vf(me){return Vl(me)===dc}function hc(me){return Vl(me)===Zh}function jd(me){return Vl(me)===ig}function Wp(me){return Vl(me)===sf}function Ld(me){if(!me)return!1;var ke=Vl(me);return zl.indexOf(ke)>=0?!0:Ul(me)||Jh(me)||ea(me)}function og(me){return Rs[Object.prototype.toString.call(me)]|0}function Tu(me,ke){var ct=ke.length;switch(me.type){case k:case J:case he:case Oe:var Bt=yi.allocType(me.type,ct);Bt.set(ke),me.data=Bt;break;case ys:me.data=ia(ke);break;default:T.raise("unsupported texture type, must specify a typed array")}}function Hf(me,ke){return yi.allocType(me.type===ys?Oe:me.type,ke)}function vc(me,ke){me.type===ys?(me.data=ia(ke),yi.freeType(ke)):me.data=ke}function $p(me,ke,ct,Bt,Dt,sn){for(var Wt=me.width,kn=me.height,ir=me.channels,Vn=Wt*kn*ir,Hn=Hf(me,Vn),Gn=0,pr=0;pr<kn;++pr)for(var fr=0;fr<Wt;++fr)for(var Yn=0;Yn<ir;++Yn)Hn[Gn++]=ke[ct*fr+Bt*pr+Dt*Yn+sn];vc(me,Hn)}function Wf(me,ke,ct,Bt,Dt,sn){var Wt;if(typeof Bo[me]!="undefined"?Wt=Bo[me]:Wt=Yr[me]*cl[ke],sn&&(Wt*=6),Dt){for(var kn=0,ir=ct;ir>=1;)kn+=Wt*ir*ir,ir/=2;return kn}else return Wt*ct*Bt}function Xp(me,ke,ct,Bt,Dt,sn,Wt){var kn={"don't care":Zt,"dont care":Zt,nice:Un,fast:An},ir={repeat:qe,clamp:pt,mirror:wt},Vn={nearest:Se,linear:He},Hn=m({mipmap:Ze,"nearest mipmap nearest":nt,"linear mipmap nearest":Pe,"nearest mipmap linear":Ie,"linear mipmap linear":Ze},Vn),Gn={none:0,browser:_a},pr={uint8:k,rgba4:hu,rgb565:js,"rgb5 a1":vu},fr={alpha:ps,luminance:Ti,"luminance alpha":Mi,rgb:ei,rgba:va,rgba4:ul,"rgb5 a1":eo,rgb565:Jo},Yn={};ke.ext_srgb&&(fr.srgb=mo,fr.srgba=Yu),ke.oes_texture_float&&(pr.float32=pr.float=Oe),ke.oes_texture_half_float&&(pr.float16=pr["half float"]=ys),ke.webgl_depth_texture&&(m(fr,{depth:ms,"depth stencil":ko}),m(pr,{uint16:J,uint32:he,"depth stencil":Po})),ke.webgl_compressed_texture_s3tc&&m(Yn,{"rgb s3tc dxt1":ui,"rgba s3tc dxt1":gu,"rgba s3tc dxt3":as,"rgba s3tc dxt5":Xs}),ke.webgl_compressed_texture_atc&&m(Yn,{"rgb atc":of,"rgba atc explicit alpha":Fl,"rgba atc interpolated alpha":fc}),ke.webgl_compressed_texture_pvrtc&&m(Yn,{"rgb pvrtc 4bppv1":Qo,"rgb pvrtc 2bppv1":Bl,"rgba pvrtc 4bppv1":Ls,"rgba pvrtc 2bppv1":ll}),ke.webgl_compressed_texture_etc1&&(Yn["rgb etc1"]=b);var Xt=Array.prototype.slice.call(me.getParameter(Fo));Object.keys(Yn).forEach(function(et){var Qt=Yn[et];Xt.indexOf(Qt)>=0&&(fr[et]=Qt)});var Ht=Object.keys(fr);ct.textureFormats=Ht;var Wn=[];Object.keys(fr).forEach(function(et){var Qt=fr[et];Wn[Qt]=et});var br=[];Object.keys(pr).forEach(function(et){var Qt=pr[et];br[Qt]=et});var gn=[];Object.keys(Vn).forEach(function(et){var Qt=Vn[et];gn[Qt]=et});var Mr=[];Object.keys(Hn).forEach(function(et){var Qt=Hn[et];Mr[Qt]=et});var Dn=[];Object.keys(ir).forEach(function(et){var Qt=ir[et];Dn[Qt]=et});var jn=Ht.reduce(function(et,Qt){var Gt=fr[Qt];return Gt===Ti||Gt===ps||Gt===Ti||Gt===Mi||Gt===ms||Gt===ko||ke.ext_srgb&&(Gt===mo||Gt===Yu)?et[Gt]=Gt:Gt===eo||Qt.indexOf("rgba")>=0?et[Gt]=va:et[Gt]=ei,et},{});function _n(){this.internalformat=va,this.format=va,this.type=k,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=_a,this.width=0,this.height=0,this.channels=0}function Xn(et,Qt){et.internalformat=Qt.internalformat,et.format=Qt.format,et.type=Qt.type,et.compressed=Qt.compressed,et.premultiplyAlpha=Qt.premultiplyAlpha,et.flipY=Qt.flipY,et.unpackAlignment=Qt.unpackAlignment,et.colorSpace=Qt.colorSpace,et.width=Qt.width,et.height=Qt.height,et.channels=Qt.channels}function _r(et,Qt){if(!(typeof Qt!="object"||!Qt)){if("premultiplyAlpha"in Qt&&(T.type(Qt.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),et.premultiplyAlpha=Qt.premultiplyAlpha),"flipY"in Qt&&(T.type(Qt.flipY,"boolean","invalid texture flip"),et.flipY=Qt.flipY),"alignment"in Qt&&(T.oneOf(Qt.alignment,[1,2,4,8],"invalid texture unpack alignment"),et.unpackAlignment=Qt.alignment),"colorSpace"in Qt&&(T.parameter(Qt.colorSpace,Gn,"invalid colorSpace"),et.colorSpace=Gn[Qt.colorSpace]),"type"in Qt){var Gt=Qt.type;T(ke.oes_texture_float||!(Gt==="float"||Gt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),T(ke.oes_texture_half_float||!(Gt==="half float"||Gt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),T(ke.webgl_depth_texture||!(Gt==="uint16"||Gt==="uint32"||Gt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),T.parameter(Gt,pr,"invalid texture type"),et.type=pr[Gt]}var Or=et.width,Oa=et.height,We=et.channels,Ne=!1;"shape"in Qt?(T(Array.isArray(Qt.shape)&&Qt.shape.length>=2,"shape must be an array"),Or=Qt.shape[0],Oa=Qt.shape[1],Qt.shape.length===3&&(We=Qt.shape[2],T(We>0&&We<=4,"invalid number of channels"),Ne=!0),T(Or>=0&&Or<=ct.maxTextureSize,"invalid width"),T(Oa>=0&&Oa<=ct.maxTextureSize,"invalid height")):("radius"in Qt&&(Or=Oa=Qt.radius,T(Or>=0&&Or<=ct.maxTextureSize,"invalid radius")),"width"in Qt&&(Or=Qt.width,T(Or>=0&&Or<=ct.maxTextureSize,"invalid width")),"height"in Qt&&(Oa=Qt.height,T(Oa>=0&&Oa<=ct.maxTextureSize,"invalid height")),"channels"in Qt&&(We=Qt.channels,T(We>0&&We<=4,"invalid number of channels"),Ne=!0)),et.width=Or|0,et.height=Oa|0,et.channels=We|0;var ht=!1;if("format"in Qt){var kt=Qt.format;T(ke.webgl_depth_texture||!(kt==="depth"||kt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),T.parameter(kt,fr,"invalid texture format");var Rt=et.internalformat=fr[kt];et.format=jn[Rt],kt in pr&&("type"in Qt||(et.type=pr[kt])),kt in Yn&&(et.compressed=!0),ht=!0}!Ne&&ht?et.channels=Yr[et.format]:Ne&&!ht?et.channels!==ta[et.format]&&(et.format=et.internalformat=ta[et.channels]):ht&&Ne&&T(et.channels===Yr[et.format],"number of channels inconsistent with specified format")}}function oa(et){me.pixelStorei(Gr,et.flipY),me.pixelStorei(Br,et.premultiplyAlpha),me.pixelStorei(Xr,et.colorSpace),me.pixelStorei(Wr,et.unpackAlignment)}function dr(){_n.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function qn(et,Qt){var Gt=null;if(Ld(Qt)?Gt=Qt:Qt&&(T.type(Qt,"object","invalid pixel data type"),_r(et,Qt),"x"in Qt&&(et.xOffset=Qt.x|0),"y"in Qt&&(et.yOffset=Qt.y|0),Ld(Qt.data)&&(Gt=Qt.data)),T(!et.compressed||Gt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Qt.copy){T(!Gt,"can not specify copy and data field for the same texture");var Or=Dt.viewportWidth,Oa=Dt.viewportHeight;et.width=et.width||Or-et.xOffset,et.height=et.height||Oa-et.yOffset,et.needsCopy=!0,T(et.xOffset>=0&&et.xOffset<Or&&et.yOffset>=0&&et.yOffset<Oa&&et.width>0&&et.width<=Or&&et.height>0&&et.height<=Oa,"copy texture read out of bounds")}else if(!Gt)et.width=et.width||1,et.height=et.height||1,et.channels=et.channels||4;else if(I(Gt))et.channels=et.channels||4,et.data=Gt,!("type"in Qt)&&et.type===k&&(et.type=og(Gt));else if(Ul(Gt))et.channels=et.channels||4,Tu(et,Gt),et.alignment=1,et.needsFree=!0;else if(ea(Gt)){var We=Gt.data;!Array.isArray(We)&&et.type===k&&(et.type=og(We));var Ne=Gt.shape,ht=Gt.stride,kt,Rt,bt,vt,St,$e;Ne.length===3?(bt=Ne[2],$e=ht[2]):(T(Ne.length===2,"invalid ndarray pixel data, must be 2 or 3D"),bt=1,$e=1),kt=Ne[0],Rt=Ne[1],vt=ht[0],St=ht[1],et.alignment=1,et.width=kt,et.height=Rt,et.channels=bt,et.format=et.internalformat=ta[bt],et.needsFree=!0,$p(et,We,vt,St,$e,Gt.offset)}else if(Uf(Gt)||Qh(Gt)||Vf(Gt))Uf(Gt)||Qh(Gt)?et.element=Gt:et.element=Gt.canvas,et.width=et.element.width,et.height=et.element.height,et.channels=4;else if(hc(Gt))et.element=Gt,et.width=Gt.width,et.height=Gt.height,et.channels=4;else if(jd(Gt))et.element=Gt,et.width=Gt.naturalWidth,et.height=Gt.naturalHeight,et.channels=4;else if(Wp(Gt))et.element=Gt,et.width=Gt.videoWidth,et.height=Gt.videoHeight,et.channels=4;else if(Jh(Gt)){var ft=et.width||Gt[0].length,ze=et.height||Gt.length,xt=et.channels;Fr(Gt[0][0])?xt=xt||Gt[0][0].length:xt=xt||1;for(var _t=ha.shape(Gt),yn=1,Cn=0;Cn<_t.length;++Cn)yn*=_t[Cn];var cn=Hf(et,yn);ha.flatten(Gt,_t,"",cn),vc(et,cn),et.alignment=1,et.width=ft,et.height=ze,et.channels=xt,et.format=et.internalformat=ta[xt],et.needsFree=!0}et.type===Oe?T(ct.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):et.type===ys&&T(ct.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Sn(et,Qt,Gt){var Or=et.element,Oa=et.data,We=et.internalformat,Ne=et.format,ht=et.type,kt=et.width,Rt=et.height;oa(et),Or?me.texImage2D(Qt,Gt,Ne,Ne,ht,Or):et.compressed?me.compressedTexImage2D(Qt,Gt,We,kt,Rt,0,Oa):et.needsCopy?(Bt(),me.copyTexImage2D(Qt,Gt,Ne,et.xOffset,et.yOffset,kt,Rt,0)):me.texImage2D(Qt,Gt,Ne,kt,Rt,0,Ne,ht,Oa||null)}function Qr(et,Qt,Gt,Or,Oa){var We=et.element,Ne=et.data,ht=et.internalformat,kt=et.format,Rt=et.type,bt=et.width,vt=et.height;oa(et),We?me.texSubImage2D(Qt,Oa,Gt,Or,kt,Rt,We):et.compressed?me.compressedTexSubImage2D(Qt,Oa,Gt,Or,ht,bt,vt,Ne):et.needsCopy?(Bt(),me.copyTexSubImage2D(Qt,Oa,Gt,Or,et.xOffset,et.yOffset,bt,vt)):me.texSubImage2D(Qt,Oa,Gt,Or,bt,vt,kt,Rt,Ne)}var Ta=[];function Tr(){return Ta.pop()||new dr}function Pa(et){et.needsFree&&yi.freeType(et.data),dr.call(et),Ta.push(et)}function sa(){_n.call(this),this.genMipmaps=!1,this.mipmapHint=Zt,this.mipmask=0,this.images=Array(16)}function Ma(et,Qt,Gt){var Or=et.images[0]=Tr();et.mipmask=1,Or.width=et.width=Qt,Or.height=et.height=Gt,Or.channels=et.channels=4}function Ka(et,Qt){var Gt=null;if(Ld(Qt))Gt=et.images[0]=Tr(),Xn(Gt,et),qn(Gt,Qt),et.mipmask=1;else if(_r(et,Qt),Array.isArray(Qt.mipmap))for(var Or=Qt.mipmap,Oa=0;Oa<Or.length;++Oa)Gt=et.images[Oa]=Tr(),Xn(Gt,et),Gt.width>>=Oa,Gt.height>>=Oa,qn(Gt,Or[Oa]),et.mipmask|=1<<Oa;else Gt=et.images[0]=Tr(),Xn(Gt,et),qn(Gt,Qt),et.mipmask=1;Xn(et,et.images[0]),et.compressed&&(et.internalformat===ui||et.internalformat===gu||et.internalformat===as||et.internalformat===Xs)&&T(et.width%4==0&&et.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function to(et,Qt){for(var Gt=et.images,Or=0;Or<Gt.length;++Or){if(!Gt[Or])return;Sn(Gt[Or],Qt,Or)}}var yo=[];function ka(){var et=yo.pop()||new sa;_n.call(et),et.mipmask=0;for(var Qt=0;Qt<16;++Qt)et.images[Qt]=null;return et}function uo(et){for(var Qt=et.images,Gt=0;Gt<Qt.length;++Gt)Qt[Gt]&&Pa(Qt[Gt]),Qt[Gt]=null;yo.push(et)}function Di(){this.minFilter=Se,this.magFilter=Se,this.wrapS=pt,this.wrapT=pt,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Zt}function Ii(et,Qt){if("min"in Qt){var Gt=Qt.min;T.parameter(Gt,Hn),et.minFilter=Hn[Gt],Na.indexOf(et.minFilter)>=0&&!("faces"in Qt)&&(et.genMipmaps=!0)}if("mag"in Qt){var Or=Qt.mag;T.parameter(Or,Vn),et.magFilter=Vn[Or]}var Oa=et.wrapS,We=et.wrapT;if("wrap"in Qt){var Ne=Qt.wrap;typeof Ne=="string"?(T.parameter(Ne,ir),Oa=We=ir[Ne]):Array.isArray(Ne)&&(T.parameter(Ne[0],ir),T.parameter(Ne[1],ir),Oa=ir[Ne[0]],We=ir[Ne[1]])}else{if("wrapS"in Qt){var ht=Qt.wrapS;T.parameter(ht,ir),Oa=ir[ht]}if("wrapT"in Qt){var kt=Qt.wrapT;T.parameter(kt,ir),We=ir[kt]}}if(et.wrapS=Oa,et.wrapT=We,"anisotropic"in Qt){var Rt=Qt.anisotropic;T(typeof Rt=="number"&&Rt>=1&&Rt<=ct.maxAnisotropic,"aniso samples must be between 1 and "),et.anisotropic=Qt.anisotropic}if("mipmap"in Qt){var bt=!1;switch(typeof Qt.mipmap){case"string":T.parameter(Qt.mipmap,kn,"invalid mipmap hint"),et.mipmapHint=kn[Qt.mipmap],et.genMipmaps=!0,bt=!0;break;case"boolean":bt=et.genMipmaps=Qt.mipmap;break;case"object":T(Array.isArray(Qt.mipmap),"invalid mipmap type"),et.genMipmaps=!1,bt=!0;break;default:T.raise("invalid mipmap type")}bt&&!("min"in Qt)&&(et.minFilter=nt)}}function no(et,Qt){me.texParameteri(Qt,Fe,et.minFilter),me.texParameteri(Qt,zt,et.magFilter),me.texParameteri(Qt,Re,et.wrapS),me.texParameteri(Qt,Ke,et.wrapT),ke.ext_texture_filter_anisotropic&&me.texParameteri(Qt,Ln,et.anisotropic),et.genMipmaps&&(me.hint(Lt,et.mipmapHint),me.generateMipmap(Qt))}var vo=0,Bi={},Hi=ct.maxTextureUnits,lo=Array(Hi).map(function(){return null});function Ca(et){_n.call(this),this.mipmask=0,this.internalformat=va,this.id=vo++,this.refCount=1,this.target=et,this.texture=me.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Di,Wt.profile&&(this.stats={size:0})}function es(et){me.activeTexture(ga),me.bindTexture(et.target,et.texture)}function ii(){var et=lo[0];et?me.bindTexture(et.target,et.texture):me.bindTexture(Vi,null)}function Jr(et){var Qt=et.texture;T(Qt,"must not double destroy texture");var Gt=et.unit,Or=et.target;Gt>=0&&(me.activeTexture(ga+Gt),me.bindTexture(Or,null),lo[Gt]=null),me.deleteTexture(Qt),et.texture=null,et.params=null,et.pixels=null,et.refCount=0,delete Bi[et.id],sn.textureCount--}m(Ca.prototype,{bind:function(){var Qt=this;Qt.bindCount+=1;var Gt=Qt.unit;if(Gt<0){for(var Or=0;Or<Hi;++Or){var Oa=lo[Or];if(Oa){if(Oa.bindCount>0)continue;Oa.unit=-1}lo[Or]=Qt,Gt=Or;break}Gt>=Hi&&T.raise("insufficient number of texture units"),Wt.profile&&sn.maxTextureUnits<Gt+1&&(sn.maxTextureUnits=Gt+1),Qt.unit=Gt,me.activeTexture(ga+Gt),me.bindTexture(Qt.target,Qt.texture)}return Gt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Jr(this)}});function Ea(et,Qt){var Gt=new Ca(Vi);Bi[Gt.id]=Gt,sn.textureCount++;function Or(Ne,ht){var kt=Gt.texInfo;Di.call(kt);var Rt=ka();return typeof Ne=="number"?typeof ht=="number"?Ma(Rt,Ne|0,ht|0):Ma(Rt,Ne|0,Ne|0):Ne?(T.type(Ne,"object","invalid arguments to regl.texture"),Ii(kt,Ne),Ka(Rt,Ne)):Ma(Rt,1,1),kt.genMipmaps&&(Rt.mipmask=(Rt.width<<1)-1),Gt.mipmask=Rt.mipmask,Xn(Gt,Rt),T.texture2D(kt,Rt,ct),Gt.internalformat=Rt.internalformat,Or.width=Rt.width,Or.height=Rt.height,es(Gt),to(Rt,Vi),no(kt,Vi),ii(),uo(Rt),Wt.profile&&(Gt.stats.size=Wf(Gt.internalformat,Gt.type,Rt.width,Rt.height,kt.genMipmaps,!1)),Or.format=Wn[Gt.internalformat],Or.type=br[Gt.type],Or.mag=gn[kt.magFilter],Or.min=Mr[kt.minFilter],Or.wrapS=Dn[kt.wrapS],Or.wrapT=Dn[kt.wrapT],Or}function Oa(Ne,ht,kt,Rt){T(!!Ne,"must specify image data");var bt=ht|0,vt=kt|0,St=Rt|0,$e=Tr();return Xn($e,Gt),$e.width=0,$e.height=0,qn($e,Ne),$e.width=$e.width||(Gt.width>>St)-bt,$e.height=$e.height||(Gt.height>>St)-vt,T(Gt.type===$e.type&&Gt.format===$e.format&&Gt.internalformat===$e.internalformat,"incompatible format for texture.subimage"),T(bt>=0&&vt>=0&&bt+$e.width<=Gt.width&&vt+$e.height<=Gt.height,"texture.subimage write out of bounds"),T(Gt.mipmask&1<<St,"missing mipmap data"),T($e.data||$e.element||$e.needsCopy,"missing image data"),es(Gt),Qr($e,Vi,bt,vt,St),ii(),Pa($e),Or}function We(Ne,ht){var kt=Ne|0,Rt=ht|0||kt;if(kt===Gt.width&&Rt===Gt.height)return Or;Or.width=Gt.width=kt,Or.height=Gt.height=Rt,es(Gt);for(var bt=0;Gt.mipmask>>bt;++bt){var vt=kt>>bt,St=Rt>>bt;if(!vt||!St)break;me.texImage2D(Vi,bt,Gt.format,vt,St,0,Gt.format,Gt.type,null)}return ii(),Wt.profile&&(Gt.stats.size=Wf(Gt.internalformat,Gt.type,kt,Rt,!1,!1)),Or}return Or(et,Qt),Or.subimage=Oa,Or.resize=We,Or._reglType="texture2d",Or._texture=Gt,Wt.profile&&(Or.stats=Gt.stats),Or.destroy=function(){Gt.decRef()},Or}function Ga(et,Qt,Gt,Or,Oa,We){var Ne=new Ca(Ao);Bi[Ne.id]=Ne,sn.cubeCount++;var ht=new Array(6);function kt(vt,St,$e,ft,ze,xt){var _t,yn=Ne.texInfo;for(Di.call(yn),_t=0;_t<6;++_t)ht[_t]=ka();if(typeof vt=="number"||!vt){var Cn=vt|0||1;for(_t=0;_t<6;++_t)Ma(ht[_t],Cn,Cn)}else if(typeof vt=="object")if(St)Ka(ht[0],vt),Ka(ht[1],St),Ka(ht[2],$e),Ka(ht[3],ft),Ka(ht[4],ze),Ka(ht[5],xt);else if(Ii(yn,vt),_r(Ne,vt),"faces"in vt){var cn=vt.faces;for(T(Array.isArray(cn)&&cn.length===6,"cube faces must be a length 6 array"),_t=0;_t<6;++_t)T(typeof cn[_t]=="object"&&!!cn[_t],"invalid input for cube map face"),Xn(ht[_t],Ne),Ka(ht[_t],cn[_t])}else for(_t=0;_t<6;++_t)Ka(ht[_t],vt);else T.raise("invalid arguments to cube map");for(Xn(Ne,ht[0]),ct.npotTextureCube||T(bi(Ne.width)&&bi(Ne.height),"your browser does not support non power or two texture dimensions"),yn.genMipmaps?Ne.mipmask=(ht[0].width<<1)-1:Ne.mipmask=ht[0].mipmask,T.textureCube(Ne,yn,ht,ct),Ne.internalformat=ht[0].internalformat,kt.width=ht[0].width,kt.height=ht[0].height,es(Ne),_t=0;_t<6;++_t)to(ht[_t],oo+_t);for(no(yn,Ao),ii(),Wt.profile&&(Ne.stats.size=Wf(Ne.internalformat,Ne.type,kt.width,kt.height,yn.genMipmaps,!0)),kt.format=Wn[Ne.internalformat],kt.type=br[Ne.type],kt.mag=gn[yn.magFilter],kt.min=Mr[yn.minFilter],kt.wrapS=Dn[yn.wrapS],kt.wrapT=Dn[yn.wrapT],_t=0;_t<6;++_t)uo(ht[_t]);return kt}function Rt(vt,St,$e,ft,ze){T(!!St,"must specify image data"),T(typeof vt=="number"&&vt===(vt|0)&&vt>=0&&vt<6,"invalid face");var xt=$e|0,_t=ft|0,yn=ze|0,Cn=Tr();return Xn(Cn,Ne),Cn.width=0,Cn.height=0,qn(Cn,St),Cn.width=Cn.width||(Ne.width>>yn)-xt,Cn.height=Cn.height||(Ne.height>>yn)-_t,T(Ne.type===Cn.type&&Ne.format===Cn.format&&Ne.internalformat===Cn.internalformat,"incompatible format for texture.subimage"),T(xt>=0&&_t>=0&&xt+Cn.width<=Ne.width&&_t+Cn.height<=Ne.height,"texture.subimage write out of bounds"),T(Ne.mipmask&1<<yn,"missing mipmap data"),T(Cn.data||Cn.element||Cn.needsCopy,"missing image data"),es(Ne),Qr(Cn,oo+vt,xt,_t,yn),ii(),Pa(Cn),kt}function bt(vt){var St=vt|0;if(St!==Ne.width){kt.width=Ne.width=St,kt.height=Ne.height=St,es(Ne);for(var $e=0;$e<6;++$e)for(var ft=0;Ne.mipmask>>ft;++ft)me.texImage2D(oo+$e,ft,Ne.format,St>>ft,St>>ft,0,Ne.format,Ne.type,null);return ii(),Wt.profile&&(Ne.stats.size=Wf(Ne.internalformat,Ne.type,kt.width,kt.height,!1,!0)),kt}}return kt(et,Qt,Gt,Or,Oa,We),kt.subimage=Rt,kt.resize=bt,kt._reglType="textureCube",kt._texture=Ne,Wt.profile&&(kt.stats=Ne.stats),kt.destroy=function(){Ne.decRef()},kt}function Go(){for(var et=0;et<Hi;++et)me.activeTexture(ga+et),me.bindTexture(Vi,null),lo[et]=null;Dr(Bi).forEach(Jr),sn.cubeCount=0,sn.textureCount=0}Wt.profile&&(sn.getTotalTextureSize=function(){var et=0;return Object.keys(Bi).forEach(function(Qt){et+=Bi[Qt].stats.size}),et});function ws(){for(var et=0;et<Hi;++et){var Qt=lo[et];Qt&&(Qt.bindCount=0,Qt.unit=-1,lo[et]=null)}Dr(Bi).forEach(function(Gt){Gt.texture=me.createTexture(),me.bindTexture(Gt.target,Gt.texture);for(var Or=0;Or<32;++Or)if((Gt.mipmask&1<<Or)!=0)if(Gt.target===Vi)me.texImage2D(Vi,Or,Gt.internalformat,Gt.width>>Or,Gt.height>>Or,0,Gt.internalformat,Gt.type,null);else for(var Oa=0;Oa<6;++Oa)me.texImage2D(oo+Oa,Or,Gt.internalformat,Gt.width>>Or,Gt.height>>Or,0,Gt.internalformat,Gt.type,null);no(Gt.texInfo,Gt.target)})}function Dc(){for(var et=0;et<Hi;++et){var Qt=lo[et];Qt&&(Qt.bindCount=0,Qt.unit=-1,lo[et]=null),me.activeTexture(ga+et),me.bindTexture(Vi,null),me.bindTexture(Ao,null)}}return{create2D:Ea,createCube:Ga,clear:Go,getTexture:function(Qt){return null},restore:ws,refresh:Dc}}var Hl=36161,xi=32854,is=32855,sg=36194,ug=33189,qh=36168,lg=34041,$f=35907,uf=34836,_d=34842,gc=34843,Cs=[];Cs[xi]=2,Cs[is]=2,Cs[sg]=2,Cs[ug]=2,Cs[qh]=1,Cs[lg]=4,Cs[$f]=4,Cs[uf]=16,Cs[_d]=8,Cs[gc]=6;function lf(me,ke,ct){return Cs[me]*ke*ct}var Fd=function(ke,ct,Bt,Dt,sn){var Wt={rgba4:xi,rgb565:sg,"rgb5 a1":is,depth:ug,stencil:qh,"depth stencil":lg};ct.ext_srgb&&(Wt.srgba=$f),ct.ext_color_buffer_half_float&&(Wt.rgba16f=_d,Wt.rgb16f=gc),ct.webgl_color_buffer_float&&(Wt.rgba32f=uf);var kn=[];Object.keys(Wt).forEach(function(Yn){var Xt=Wt[Yn];kn[Xt]=Yn});var ir=0,Vn={};function Hn(Yn){this.id=ir++,this.refCount=1,this.renderbuffer=Yn,this.format=xi,this.width=0,this.height=0,sn.profile&&(this.stats={size:0})}Hn.prototype.decRef=function(){--this.refCount<=0&&Gn(this)};function Gn(Yn){var Xt=Yn.renderbuffer;T(Xt,"must not double destroy renderbuffer"),ke.bindRenderbuffer(Hl,null),ke.deleteRenderbuffer(Xt),Yn.renderbuffer=null,Yn.refCount=0,delete Vn[Yn.id],Dt.renderbufferCount--}function pr(Yn,Xt){var Ht=new Hn(ke.createRenderbuffer());Vn[Ht.id]=Ht,Dt.renderbufferCount++;function Wn(gn,Mr){var Dn=0,jn=0,_n=xi;if(typeof gn=="object"&&gn){var Xn=gn;if("shape"in Xn){var _r=Xn.shape;T(Array.isArray(_r)&&_r.length>=2,"invalid renderbuffer shape"),Dn=_r[0]|0,jn=_r[1]|0}else"radius"in Xn&&(Dn=jn=Xn.radius|0),"width"in Xn&&(Dn=Xn.width|0),"height"in Xn&&(jn=Xn.height|0);"format"in Xn&&(T.parameter(Xn.format,Wt,"invalid renderbuffer format"),_n=Wt[Xn.format])}else typeof gn=="number"?(Dn=gn|0,typeof Mr=="number"?jn=Mr|0:jn=Dn):gn?T.raise("invalid arguments to renderbuffer constructor"):Dn=jn=1;if(T(Dn>0&&jn>0&&Dn<=Bt.maxRenderbufferSize&&jn<=Bt.maxRenderbufferSize,"invalid renderbuffer size"),!(Dn===Ht.width&&jn===Ht.height&&_n===Ht.format))return Wn.width=Ht.width=Dn,Wn.height=Ht.height=jn,Ht.format=_n,ke.bindRenderbuffer(Hl,Ht.renderbuffer),ke.renderbufferStorage(Hl,_n,Dn,jn),T(ke.getError()===0,"invalid render buffer format"),sn.profile&&(Ht.stats.size=lf(Ht.format,Ht.width,Ht.height)),Wn.format=kn[Ht.format],Wn}function br(gn,Mr){var Dn=gn|0,jn=Mr|0||Dn;return Dn===Ht.width&&jn===Ht.height||(T(Dn>0&&jn>0&&Dn<=Bt.maxRenderbufferSize&&jn<=Bt.maxRenderbufferSize,"invalid renderbuffer size"),Wn.width=Ht.width=Dn,Wn.height=Ht.height=jn,ke.bindRenderbuffer(Hl,Ht.renderbuffer),ke.renderbufferStorage(Hl,Ht.format,Dn,jn),T(ke.getError()===0,"invalid render buffer format"),sn.profile&&(Ht.stats.size=lf(Ht.format,Ht.width,Ht.height))),Wn}return Wn(Yn,Xt),Wn.resize=br,Wn._reglType="renderbuffer",Wn._renderbuffer=Ht,sn.profile&&(Wn.stats=Ht.stats),Wn.destroy=function(){Ht.decRef()},Wn}sn.profile&&(Dt.getTotalRenderbufferSize=function(){var Yn=0;return Object.keys(Vn).forEach(function(Xt){Yn+=Vn[Xt].stats.size}),Yn});function fr(){Dr(Vn).forEach(function(Yn){Yn.renderbuffer=ke.createRenderbuffer(),ke.bindRenderbuffer(Hl,Yn.renderbuffer),ke.renderbufferStorage(Hl,Yn.format,Yn.width,Yn.height)}),ke.bindRenderbuffer(Hl,null)}return{create:pr,clear:function(){Dr(Vn).forEach(Gn)},restore:fr}},_s=36160,ev=36161,pc=3553,Bd=34069,cg=36064,fg=36096,Xf=36128,cf=33306,tv=36053,Le=36054,ff=36055,fl=36057,os=36061,ai=36193,Kp=5121,Yp=5126,dg=6407,Wl=6408,hg=6402,Zp=[dg,Wl],df=[];df[Wl]=4,df[dg]=3;var Gd=[];Gd[Kp]=1,Gd[Yp]=4,Gd[ai]=2;var Jp=32854,dl=32855,Qp=36194,qp=33189,em=36168,vg=34041,tm=35907,hl=34836,nm=34842,rm=34843,am=[Jp,dl,Qp,tm,nm,rm,hl],hf={};hf[tv]="complete",hf[Le]="incomplete attachment",hf[fl]="incomplete dimensions",hf[ff]="incomplete, missing attachment",hf[os]="unsupported";function im(me,ke,ct,Bt,Dt,sn){var Wt={cur:null,next:null,dirty:!1,setFBO:null},kn=["rgba"],ir=["rgba4","rgb565","rgb5 a1"];ke.ext_srgb&&ir.push("srgba"),ke.ext_color_buffer_half_float&&ir.push("rgba16f","rgb16f"),ke.webgl_color_buffer_float&&ir.push("rgba32f");var Vn=["uint8"];ke.oes_texture_half_float&&Vn.push("half float","float16"),ke.oes_texture_float&&Vn.push("float","float32");function Hn(dr,qn,Sn){this.target=dr,this.texture=qn,this.renderbuffer=Sn;var Qr=0,Ta=0;qn?(Qr=qn.width,Ta=qn.height):Sn&&(Qr=Sn.width,Ta=Sn.height),this.width=Qr,this.height=Ta}function Gn(dr){dr&&(dr.texture&&dr.texture._texture.decRef(),dr.renderbuffer&&dr.renderbuffer._renderbuffer.decRef())}function pr(dr,qn,Sn){if(!!dr)if(dr.texture){var Qr=dr.texture._texture,Ta=Math.max(1,Qr.width),Tr=Math.max(1,Qr.height);T(Ta===qn&&Tr===Sn,"inconsistent width/height for supplied texture"),Qr.refCount+=1}else{var Pa=dr.renderbuffer._renderbuffer;T(Pa.width===qn&&Pa.height===Sn,"inconsistent width/height for renderbuffer"),Pa.refCount+=1}}function fr(dr,qn){qn&&(qn.texture?me.framebufferTexture2D(_s,dr,qn.target,qn.texture._texture.texture,0):me.framebufferRenderbuffer(_s,dr,ev,qn.renderbuffer._renderbuffer.renderbuffer))}function Yn(dr){var qn=pc,Sn=null,Qr=null,Ta=dr;typeof dr=="object"&&(Ta=dr.data,"target"in dr&&(qn=dr.target|0)),T.type(Ta,"function","invalid attachment data");var Tr=Ta._reglType;return Tr==="texture2d"?(Sn=Ta,T(qn===pc)):Tr==="textureCube"?(Sn=Ta,T(qn>=Bd&&qn<Bd+6,"invalid cube map target")):Tr==="renderbuffer"?(Qr=Ta,qn=ev):T.raise("invalid regl object for attachment"),new Hn(qn,Sn,Qr)}function Xt(dr,qn,Sn,Qr,Ta){if(Sn){var Tr=Bt.create2D({width:dr,height:qn,format:Qr,type:Ta});return Tr._texture.refCount=0,new Hn(pc,Tr,null)}else{var Pa=Dt.create({width:dr,height:qn,format:Qr});return Pa._renderbuffer.refCount=0,new Hn(ev,null,Pa)}}function Ht(dr){return dr&&(dr.texture||dr.renderbuffer)}function Wn(dr,qn,Sn){dr&&(dr.texture?dr.texture.resize(qn,Sn):dr.renderbuffer&&dr.renderbuffer.resize(qn,Sn),dr.width=qn,dr.height=Sn)}var br=0,gn={};function Mr(){this.id=br++,gn[this.id]=this,this.framebuffer=me.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Dn(dr){dr.colorAttachments.forEach(Gn),Gn(dr.depthAttachment),Gn(dr.stencilAttachment),Gn(dr.depthStencilAttachment)}function jn(dr){var qn=dr.framebuffer;T(qn,"must not double destroy framebuffer"),me.deleteFramebuffer(qn),dr.framebuffer=null,sn.framebufferCount--,delete gn[dr.id]}function _n(dr){var qn;me.bindFramebuffer(_s,dr.framebuffer);var Sn=dr.colorAttachments;for(qn=0;qn<Sn.length;++qn)fr(cg+qn,Sn[qn]);for(qn=Sn.length;qn<ct.maxColorAttachments;++qn)me.framebufferTexture2D(_s,cg+qn,pc,null,0);me.framebufferTexture2D(_s,cf,pc,null,0),me.framebufferTexture2D(_s,fg,pc,null,0),me.framebufferTexture2D(_s,Xf,pc,null,0),fr(fg,dr.depthAttachment),fr(Xf,dr.stencilAttachment),fr(cf,dr.depthStencilAttachment);var Qr=me.checkFramebufferStatus(_s);!me.isContextLost()&&Qr!==tv&&T.raise("framebuffer configuration not supported, status = "+hf[Qr]),me.bindFramebuffer(_s,Wt.next?Wt.next.framebuffer:null),Wt.cur=Wt.next,me.getError()}function Xn(dr,qn){var Sn=new Mr;sn.framebufferCount++;function Qr(Tr,Pa){var sa;T(Wt.next!==Sn,"can not update framebuffer which is currently in use");var Ma=0,Ka=0,to=!0,yo=!0,ka=null,uo=!0,Di="rgba",Ii="uint8",no=1,vo=null,Bi=null,Hi=null,lo=!1;if(typeof Tr=="number")Ma=Tr|0,Ka=Pa|0||Ma;else if(!Tr)Ma=Ka=1;else{T.type(Tr,"object","invalid arguments for framebuffer");var Ca=Tr;if("shape"in Ca){var es=Ca.shape;T(Array.isArray(es)&&es.length>=2,"invalid shape for framebuffer"),Ma=es[0],Ka=es[1]}else"radius"in Ca&&(Ma=Ka=Ca.radius),"width"in Ca&&(Ma=Ca.width),"height"in Ca&&(Ka=Ca.height);("color"in Ca||"colors"in Ca)&&(ka=Ca.color||Ca.colors,Array.isArray(ka)&&T(ka.length===1||ke.webgl_draw_buffers,"multiple render targets not supported")),ka||("colorCount"in Ca&&(no=Ca.colorCount|0,T(no>0,"invalid color buffer count")),"colorTexture"in Ca&&(uo=!!Ca.colorTexture,Di="rgba4"),"colorType"in Ca&&(Ii=Ca.colorType,uo?(T(ke.oes_texture_float||!(Ii==="float"||Ii==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),T(ke.oes_texture_half_float||!(Ii==="half float"||Ii==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ii==="half float"||Ii==="float16"?(T(ke.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Di="rgba16f"):(Ii==="float"||Ii==="float32")&&(T(ke.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Di="rgba32f"),T.oneOf(Ii,Vn,"invalid color type")),"colorFormat"in Ca&&(Di=Ca.colorFormat,kn.indexOf(Di)>=0?uo=!0:ir.indexOf(Di)>=0?uo=!1:uo?T.oneOf(Ca.colorFormat,kn,"invalid color format for texture"):T.oneOf(Ca.colorFormat,ir,"invalid color format for renderbuffer"))),("depthTexture"in Ca||"depthStencilTexture"in Ca)&&(lo=!!(Ca.depthTexture||Ca.depthStencilTexture),T(!lo||ke.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ca&&(typeof Ca.depth=="boolean"?to=Ca.depth:(vo=Ca.depth,yo=!1)),"stencil"in Ca&&(typeof Ca.stencil=="boolean"?yo=Ca.stencil:(Bi=Ca.stencil,to=!1)),"depthStencil"in Ca&&(typeof Ca.depthStencil=="boolean"?to=yo=Ca.depthStencil:(Hi=Ca.depthStencil,to=!1,yo=!1))}var ii=null,Jr=null,Ea=null,Ga=null;if(Array.isArray(ka))ii=ka.map(Yn);else if(ka)ii=[Yn(ka)];else for(ii=new Array(no),sa=0;sa<no;++sa)ii[sa]=Xt(Ma,Ka,uo,Di,Ii);T(ke.webgl_draw_buffers||ii.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),T(ii.length<=ct.maxColorAttachments,"too many color attachments, not supported"),Ma=Ma||ii[0].width,Ka=Ka||ii[0].height,vo?Jr=Yn(vo):to&&!yo&&(Jr=Xt(Ma,Ka,lo,"depth","uint32")),Bi?Ea=Yn(Bi):yo&&!to&&(Ea=Xt(Ma,Ka,!1,"stencil","uint8")),Hi?Ga=Yn(Hi):!vo&&!Bi&&yo&&to&&(Ga=Xt(Ma,Ka,lo,"depth stencil","depth stencil")),T(!!vo+!!Bi+!!Hi<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Go=null;for(sa=0;sa<ii.length;++sa)if(pr(ii[sa],Ma,Ka),T(!ii[sa]||ii[sa].texture&&Zp.indexOf(ii[sa].texture._texture.format)>=0||ii[sa].renderbuffer&&am.indexOf(ii[sa].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+sa+" is invalid"),ii[sa]&&ii[sa].texture){var ws=df[ii[sa].texture._texture.format]*Gd[ii[sa].texture._texture.type];Go===null?Go=ws:T(Go===ws,"all color attachments much have the same number of bits per pixel.")}return pr(Jr,Ma,Ka),T(!Jr||Jr.texture&&Jr.texture._texture.format===hg||Jr.renderbuffer&&Jr.renderbuffer._renderbuffer.format===qp,"invalid depth attachment for framebuffer object"),pr(Ea,Ma,Ka),T(!Ea||Ea.renderbuffer&&Ea.renderbuffer._renderbuffer.format===em,"invalid stencil attachment for framebuffer object"),pr(Ga,Ma,Ka),T(!Ga||Ga.texture&&Ga.texture._texture.format===vg||Ga.renderbuffer&&Ga.renderbuffer._renderbuffer.format===vg,"invalid depth-stencil attachment for framebuffer object"),Dn(Sn),Sn.width=Ma,Sn.height=Ka,Sn.colorAttachments=ii,Sn.depthAttachment=Jr,Sn.stencilAttachment=Ea,Sn.depthStencilAttachment=Ga,Qr.color=ii.map(Ht),Qr.depth=Ht(Jr),Qr.stencil=Ht(Ea),Qr.depthStencil=Ht(Ga),Qr.width=Sn.width,Qr.height=Sn.height,_n(Sn),Qr}function Ta(Tr,Pa){T(Wt.next!==Sn,"can not resize a framebuffer which is currently in use");var sa=Math.max(Tr|0,1),Ma=Math.max(Pa|0||sa,1);if(sa===Sn.width&&Ma===Sn.height)return Qr;for(var Ka=Sn.colorAttachments,to=0;to<Ka.length;++to)Wn(Ka[to],sa,Ma);return Wn(Sn.depthAttachment,sa,Ma),Wn(Sn.stencilAttachment,sa,Ma),Wn(Sn.depthStencilAttachment,sa,Ma),Sn.width=Qr.width=sa,Sn.height=Qr.height=Ma,_n(Sn),Qr}return Qr(dr,qn),m(Qr,{resize:Ta,_reglType:"framebuffer",_framebuffer:Sn,destroy:function(){jn(Sn),Dn(Sn)},use:function(Pa){Wt.setFBO({framebuffer:Qr},Pa)}})}function _r(dr){var qn=Array(6);function Sn(Ta){var Tr;T(qn.indexOf(Wt.next)<0,"can not update framebuffer which is currently in use");var Pa={color:null},sa=0,Ma=null,Ka="rgba",to="uint8",yo=1;if(typeof Ta=="number")sa=Ta|0;else if(!Ta)sa=1;else{T.type(Ta,"object","invalid arguments for framebuffer");var ka=Ta;if("shape"in ka){var uo=ka.shape;T(Array.isArray(uo)&&uo.length>=2,"invalid shape for framebuffer"),T(uo[0]===uo[1],"cube framebuffer must be square"),sa=uo[0]}else"radius"in ka&&(sa=ka.radius|0),"width"in ka?(sa=ka.width|0,"height"in ka&&T(ka.height===sa,"must be square")):"height"in ka&&(sa=ka.height|0);("color"in ka||"colors"in ka)&&(Ma=ka.color||ka.colors,Array.isArray(Ma)&&T(Ma.length===1||ke.webgl_draw_buffers,"multiple render targets not supported")),Ma||("colorCount"in ka&&(yo=ka.colorCount|0,T(yo>0,"invalid color buffer count")),"colorType"in ka&&(T.oneOf(ka.colorType,Vn,"invalid color type"),to=ka.colorType),"colorFormat"in ka&&(Ka=ka.colorFormat,T.oneOf(ka.colorFormat,kn,"invalid color format for texture"))),"depth"in ka&&(Pa.depth=ka.depth),"stencil"in ka&&(Pa.stencil=ka.stencil),"depthStencil"in ka&&(Pa.depthStencil=ka.depthStencil)}var Di;if(Ma)if(Array.isArray(Ma))for(Di=[],Tr=0;Tr<Ma.length;++Tr)Di[Tr]=Ma[Tr];else Di=[Ma];else{Di=Array(yo);var Ii={radius:sa,format:Ka,type:to};for(Tr=0;Tr<yo;++Tr)Di[Tr]=Bt.createCube(Ii)}for(Pa.color=Array(Di.length),Tr=0;Tr<Di.length;++Tr){var no=Di[Tr];T(typeof no=="function"&&no._reglType==="textureCube","invalid cube map"),sa=sa||no.width,T(no.width===sa&&no.height===sa,"invalid cube map shape"),Pa.color[Tr]={target:Bd,data:Di[Tr]}}for(Tr=0;Tr<6;++Tr){for(var vo=0;vo<Di.length;++vo)Pa.color[vo].target=Bd+Tr;Tr>0&&(Pa.depth=qn[0].depth,Pa.stencil=qn[0].stencil,Pa.depthStencil=qn[0].depthStencil),qn[Tr]?qn[Tr](Pa):qn[Tr]=Xn(Pa)}return m(Sn,{width:sa,height:sa,color:Di})}function Qr(Ta){var Tr,Pa=Ta|0;if(T(Pa>0&&Pa<=ct.maxCubeMapSize,"invalid radius for cube fbo"),Pa===Sn.width)return Sn;var sa=Sn.color;for(Tr=0;Tr<sa.length;++Tr)sa[Tr].resize(Pa);for(Tr=0;Tr<6;++Tr)qn[Tr].resize(Pa);return Sn.width=Sn.height=Pa,Sn}return Sn(dr),m(Sn,{faces:qn,resize:Qr,_reglType:"framebufferCube",destroy:function(){qn.forEach(function(Tr){Tr.destroy()})}})}function oa(){Wt.cur=null,Wt.next=null,Wt.dirty=!0,Dr(gn).forEach(function(dr){dr.framebuffer=me.createFramebuffer(),_n(dr)})}return m(Wt,{getFramebuffer:function(qn){if(typeof qn=="function"&&qn._reglType==="framebuffer"){var Sn=qn._framebuffer;if(Sn instanceof Mr)return Sn}return null},create:Xn,createCube:_r,clear:function(){Dr(gn).forEach(jn)},restore:oa})}var mc=5126,nv=34962;function Kf(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=mc,this.offset=0,this.stride=0,this.divisor=0}function Mu(me,ke,ct,Bt,Dt){for(var sn=ct.maxAttributes,Wt=new Array(sn),kn=0;kn<sn;++kn)Wt[kn]=new Kf;var ir=0,Vn={},Hn={Record:Kf,scope:{},state:Wt,currentVAO:null,targetVAO:null,restore:pr()?gn:function(){},createVAO:Mr,getVAO:Yn,destroyBuffer:Gn,setVAO:pr()?Xt:Ht,clear:pr()?Wn:function(){}};function Gn(Dn){for(var jn=0;jn<Wt.length;++jn){var _n=Wt[jn];_n.buffer===Dn&&(me.disableVertexAttribArray(jn),_n.buffer=null)}}function pr(){return ke.oes_vertex_array_object}function fr(){return ke.angle_instanced_arrays}function Yn(Dn){return typeof Dn=="function"&&Dn._vao?Dn._vao:null}function Xt(Dn){if(Dn!==Hn.currentVAO){var jn=pr();Dn?jn.bindVertexArrayOES(Dn.vao):jn.bindVertexArrayOES(null),Hn.currentVAO=Dn}}function Ht(Dn){if(Dn!==Hn.currentVAO){if(Dn)Dn.bindAttrs();else for(var jn=fr(),_n=0;_n<Wt.length;++_n){var Xn=Wt[_n];Xn.buffer?(me.enableVertexAttribArray(_n),me.vertexAttribPointer(_n,Xn.size,Xn.type,Xn.normalized,Xn.stride,Xn.offfset),jn&&Xn.divisor&&jn.vertexAttribDivisorANGLE(_n,Xn.divisor)):(me.disableVertexAttribArray(_n),me.vertexAttrib4f(_n,Xn.x,Xn.y,Xn.z,Xn.w))}Hn.currentVAO=Dn}}function Wn(){Dr(Vn).forEach(function(Dn){Dn.destroy()})}function br(){this.id=++ir,this.attributes=[];var Dn=pr();Dn?this.vao=Dn.createVertexArrayOES():this.vao=null,Vn[this.id]=this,this.buffers=[]}br.prototype.bindAttrs=function(){for(var Dn=fr(),jn=this.attributes,_n=0;_n<jn.length;++_n){var Xn=jn[_n];Xn.buffer?(me.enableVertexAttribArray(_n),me.bindBuffer(nv,Xn.buffer.buffer),me.vertexAttribPointer(_n,Xn.size,Xn.type,Xn.normalized,Xn.stride,Xn.offset),Dn&&Xn.divisor&&Dn.vertexAttribDivisorANGLE(_n,Xn.divisor)):(me.disableVertexAttribArray(_n),me.vertexAttrib4f(_n,Xn.x,Xn.y,Xn.z,Xn.w))}for(var _r=jn.length;_r<sn;++_r)me.disableVertexAttribArray(_r)},br.prototype.refresh=function(){var Dn=pr();Dn&&(Dn.bindVertexArrayOES(this.vao),this.bindAttrs(),Hn.currentVAO=this)},br.prototype.destroy=function(){if(this.vao){var Dn=pr();this===Hn.currentVAO&&(Hn.currentVAO=null,Dn.bindVertexArrayOES(null)),Dn.deleteVertexArrayOES(this.vao),this.vao=null}Vn[this.id]&&(delete Vn[this.id],Bt.vaoCount-=1)};function gn(){var Dn=pr();Dn&&Dr(Vn).forEach(function(jn){jn.refresh()})}function Mr(Dn){var jn=new br;Bt.vaoCount+=1;function _n(Xn){T(Array.isArray(Xn),"arguments to vertex array constructor must be an array"),T(Xn.length<sn,"too many attributes"),T(Xn.length>0,"must specify at least one attribute");var _r={},oa=jn.attributes;oa.length=Xn.length;for(var dr=0;dr<Xn.length;++dr){var qn=Xn[dr],Sn=oa[dr]=new Kf,Qr=qn.data||qn;if(Array.isArray(Qr)||I(Qr)||ea(Qr)){var Ta;jn.buffers[dr]&&(Ta=jn.buffers[dr],I(Qr)&&Ta._buffer.byteLength>=Qr.byteLength?Ta.subdata(Qr):(Ta.destroy(),jn.buffers[dr]=null)),jn.buffers[dr]||(Ta=jn.buffers[dr]=Dt.create(qn,nv,!1,!0)),Sn.buffer=Dt.getBuffer(Ta),Sn.size=Sn.buffer.dimension|0,Sn.normalized=!1,Sn.type=Sn.buffer.dtype,Sn.offset=0,Sn.stride=0,Sn.divisor=0,Sn.state=1,_r[dr]=1}else Dt.getBuffer(qn)?(Sn.buffer=Dt.getBuffer(qn),Sn.size=Sn.buffer.dimension|0,Sn.normalized=!1,Sn.type=Sn.buffer.dtype,Sn.offset=0,Sn.stride=0,Sn.divisor=0,Sn.state=1):Dt.getBuffer(qn.buffer)?(Sn.buffer=Dt.getBuffer(qn.buffer),Sn.size=(+qn.size||Sn.buffer.dimension)|0,Sn.normalized=!!qn.normalized||!1,"type"in qn?(T.parameter(qn.type,lu,"invalid buffer type"),Sn.type=lu[qn.type]):Sn.type=Sn.buffer.dtype,Sn.offset=(qn.offset||0)|0,Sn.stride=(qn.stride||0)|0,Sn.divisor=(qn.divisor||0)|0,Sn.state=1,T(Sn.size>=1&&Sn.size<=4,"size must be between 1 and 4"),T(Sn.offset>=0,"invalid offset"),T(Sn.stride>=0&&Sn.stride<=255,"stride must be between 0 and 255"),T(Sn.divisor>=0,"divisor must be positive"),T(!Sn.divisor||!!ke.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in qn?(T(dr>0,"first attribute must not be a constant"),Sn.x=+qn.x||0,Sn.y=+qn.y||0,Sn.z=+qn.z||0,Sn.w=+qn.w||0,Sn.state=2):T(!1,"invalid attribute spec for location "+dr)}for(var Tr=0;Tr<jn.buffers.length;++Tr)!_r[Tr]&&jn.buffers[Tr]&&(jn.buffers[Tr].destroy(),jn.buffers[Tr]=null);return jn.refresh(),_n}return _n.destroy=function(){for(var Xn=0;Xn<jn.buffers.length;++Xn)jn.buffers[Xn]&&jn.buffers[Xn].destroy();jn.buffers.length=0,jn.destroy()},_n._vao=jn,_n._reglType="vao",_n(Dn)}return Hn}var gg=35632,om=35633,pg=35718,sm=35721;function um(me,ke,ct,Bt){var Dt={},sn={};function Wt(Xt,Ht,Wn,br){this.name=Xt,this.id=Ht,this.location=Wn,this.info=br}function kn(Xt,Ht){for(var Wn=0;Wn<Xt.length;++Wn)if(Xt[Wn].id===Ht.id){Xt[Wn].location=Ht.location;return}Xt.push(Ht)}function ir(Xt,Ht,Wn){var br=Xt===gg?Dt:sn,gn=br[Ht];if(!gn){var Mr=ke.str(Ht);gn=me.createShader(Xt),me.shaderSource(gn,Mr),me.compileShader(gn),T.shaderError(me,gn,Mr,Xt,Wn),br[Ht]=gn}return gn}var Vn={},Hn=[],Gn=0;function pr(Xt,Ht){this.id=Gn++,this.fragId=Xt,this.vertId=Ht,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Bt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function fr(Xt,Ht,Wn){var br,gn,Mr=ir(gg,Xt.fragId),Dn=ir(om,Xt.vertId),jn=Xt.program=me.createProgram();if(me.attachShader(jn,Mr),me.attachShader(jn,Dn),Wn)for(br=0;br<Wn.length;++br){var _n=Wn[br];me.bindAttribLocation(jn,_n[0],_n[1])}me.linkProgram(jn),T.linkError(me,jn,ke.str(Xt.fragId),ke.str(Xt.vertId),Ht);var Xn=me.getProgramParameter(jn,pg);Bt.profile&&(Xt.stats.uniformsCount=Xn);var _r=Xt.uniforms;for(br=0;br<Xn;++br)if(gn=me.getActiveUniform(jn,br),gn)if(gn.size>1)for(var oa=0;oa<gn.size;++oa){var dr=gn.name.replace("[0]","["+oa+"]");kn(_r,new Wt(dr,ke.id(dr),me.getUniformLocation(jn,dr),gn))}else kn(_r,new Wt(gn.name,ke.id(gn.name),me.getUniformLocation(jn,gn.name),gn));var qn=me.getProgramParameter(jn,sm);Bt.profile&&(Xt.stats.attributesCount=qn);var Sn=Xt.attributes;for(br=0;br<qn;++br)gn=me.getActiveAttrib(jn,br),gn&&kn(Sn,new Wt(gn.name,ke.id(gn.name),me.getAttribLocation(jn,gn.name),gn))}Bt.profile&&(ct.getMaxUniformsCount=function(){var Xt=0;return Hn.forEach(function(Ht){Ht.stats.uniformsCount>Xt&&(Xt=Ht.stats.uniformsCount)}),Xt},ct.getMaxAttributesCount=function(){var Xt=0;return Hn.forEach(function(Ht){Ht.stats.attributesCount>Xt&&(Xt=Ht.stats.attributesCount)}),Xt});function Yn(){Dt={},sn={};for(var Xt=0;Xt<Hn.length;++Xt)fr(Hn[Xt],null,Hn[Xt].attributes.map(function(Ht){return[Ht.location,Ht.name]}))}return{clear:function(){var Ht=me.deleteShader.bind(me);Dr(Dt).forEach(Ht),Dt={},Dr(sn).forEach(Ht),sn={},Hn.forEach(function(Wn){me.deleteProgram(Wn.program)}),Hn.length=0,Vn={},ct.shaderCount=0},program:function(Ht,Wn,br,gn){T.command(Ht>=0,"missing vertex shader",br),T.command(Wn>=0,"missing fragment shader",br);var Mr=Vn[Wn];Mr||(Mr=Vn[Wn]={});var Dn=Mr[Ht];if(Dn&&(Dn.refCount++,!gn))return Dn;var jn=new pr(Wn,Ht);return ct.shaderCount++,fr(jn,br,gn),Dn||(Mr[Ht]=jn),Hn.push(jn),m(jn,{destroy:function(){if(jn.refCount--,jn.refCount<=0){me.deleteProgram(jn.program);var Xn=Hn.indexOf(jn);Hn.splice(Xn,1),ct.shaderCount--}Mr[jn.vertId].refCount<=0&&(me.deleteShader(sn[jn.vertId]),delete sn[jn.vertId],delete Vn[jn.fragId][jn.vertId]),Object.keys(Vn[jn.fragId]).length||(me.deleteShader(Dt[jn.fragId]),delete Dt[jn.fragId],delete Vn[jn.fragId])}})},restore:Yn,shader:ir,frag:-1,vert:-1}}var mg=6408,yc=5121,lm=3333,zd=5126;function Ud(me,ke,ct,Bt,Dt,sn,Wt){function kn(Hn){var Gn;ke.next===null?(T(Dt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Gn=yc):(T(ke.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Gn=ke.next.colorAttachments[0].texture._texture.type,sn.oes_texture_float?(T(Gn===yc||Gn===zd,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Gn===zd&&T(Wt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):T(Gn===yc,"Reading from a framebuffer is only allowed for the type 'uint8'"));var pr=0,fr=0,Yn=Bt.framebufferWidth,Xt=Bt.framebufferHeight,Ht=null;I(Hn)?Ht=Hn:Hn&&(T.type(Hn,"object","invalid arguments to regl.read()"),pr=Hn.x|0,fr=Hn.y|0,T(pr>=0&&pr<Bt.framebufferWidth,"invalid x offset for regl.read"),T(fr>=0&&fr<Bt.framebufferHeight,"invalid y offset for regl.read"),Yn=(Hn.width||Bt.framebufferWidth-pr)|0,Xt=(Hn.height||Bt.framebufferHeight-fr)|0,Ht=Hn.data||null),Ht&&(Gn===yc?T(Ht instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Gn===zd&&T(Ht instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),T(Yn>0&&Yn+pr<=Bt.framebufferWidth,"invalid width for read pixels"),T(Xt>0&&Xt+fr<=Bt.framebufferHeight,"invalid height for read pixels"),ct();var Wn=Yn*Xt*4;return Ht||(Gn===yc?Ht=new Uint8Array(Wn):Gn===zd&&(Ht=Ht||new Float32Array(Wn))),T.isTypedArray(Ht,"data buffer for regl.read() must be a typedarray"),T(Ht.byteLength>=Wn,"data buffer for regl.read() too small"),me.pixelStorei(lm,4),me.readPixels(pr,fr,Yn,Xt,mg,Gn,Ht),Ht}function ir(Hn){var Gn;return ke.setFBO({framebuffer:Hn.framebuffer},function(){Gn=kn(Hn)}),Gn}function Vn(Hn){return!Hn||!("framebuffer"in Hn)?kn(Hn):ir(Hn)}return Vn}function Zu(me){return Array.prototype.slice.call(me)}function Au(me){return Zu(me).join("")}function cm(){var me=0,ke=[],ct=[];function Bt(Gn){for(var pr=0;pr<ct.length;++pr)if(ct[pr]===Gn)return ke[pr];var fr="g"+me++;return ke.push(fr),ct.push(Gn),fr}function Dt(){var Gn=[];function pr(){Gn.push.apply(Gn,Zu(arguments))}var fr=[];function Yn(){var Xt="v"+me++;return fr.push(Xt),arguments.length>0&&(Gn.push(Xt,"="),Gn.push.apply(Gn,Zu(arguments)),Gn.push(";")),Xt}return m(pr,{def:Yn,toString:function(){return Au([fr.length>0?"var "+fr.join(",")+";":"",Au(Gn)])}})}function sn(){var Gn=Dt(),pr=Dt(),fr=Gn.toString,Yn=pr.toString;function Xt(Ht,Wn){pr(Ht,Wn,"=",Gn.def(Ht,Wn),";")}return m(function(){Gn.apply(Gn,Zu(arguments))},{def:Gn.def,entry:Gn,exit:pr,save:Xt,set:function(Wn,br,gn){Xt(Wn,br),Gn(Wn,br,"=",gn,";")},toString:function(){return fr()+Yn()}})}function Wt(){var Gn=Au(arguments),pr=sn(),fr=sn(),Yn=pr.toString,Xt=fr.toString;return m(pr,{then:function(){return pr.apply(pr,Zu(arguments)),this},else:function(){return fr.apply(fr,Zu(arguments)),this},toString:function(){var Wn=Xt();return Wn&&(Wn="else{"+Wn+"}"),Au(["if(",Gn,"){",Yn(),"}",Wn])}})}var kn=Dt(),ir={};function Vn(Gn,pr){var fr=[];function Yn(){var gn="a"+fr.length;return fr.push(gn),gn}pr=pr||0;for(var Xt=0;Xt<pr;++Xt)Yn();var Ht=sn(),Wn=Ht.toString,br=ir[Gn]=m(Ht,{arg:Yn,toString:function(){return Au(["function(",fr.join(),"){",Wn(),"}"])}});return br}function Hn(){var Gn=['"use strict";',kn,"return {"];Object.keys(ir).forEach(function(Yn){Gn.push('"',Yn,'":',ir[Yn].toString(),",")}),Gn.push("}");var pr=Au(Gn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),fr=Function.apply(null,ke.concat(pr));return fr.apply(null,ct)}return{global:kn,link:Bt,block:Dt,proc:Vn,scope:sn,cond:Wt,compile:Hn}}var bc="xyzw".split(""),Cc=5121,Fs=1,Yf=2,vl=0,ss=1,rv=2,Vd=3,Zf=4,vf=5,gl=6,av="dither",yg="blend.enable",Jf="blend.color",iv="blend.equation",Hd="blend.func",qo="depth.enable",Wd="depth.func",ov="depth.range",Pu="depth.mask",Qf="colorMask",qf="cull.enable",$l="cull.face",$d="frontFace",us="lineWidth",Xd="polygonOffset.enable",sv="polygonOffset.offset",bg="sample.alpha",Cg="sample.enable",ed="sample.coverage",Yi="stencil.enable",gf="stencil.mask",Kd="stencil.func",uv="stencil.opFront",Ju="stencil.opBack",Ks="scissor.enable",td="scissor.box",pl="viewport",Qu="profile",Xl="framebuffer",nd="vert",rd="frag",Kl="elements",Yl="primitive",ml="count",Ec="offset",pf="instances",Oc="vao",Yd="Width",Zd="Height",yl=Xl+Yd,mf=Xl+Zd,Eg=pl+Yd,lv=pl+Zd,Og="drawingBuffer",Zl=Og+Yd,wg=Og+Zd,ad=[Hd,iv,Kd,uv,Ju,ed,pl,td,sv],wc=34962,cv=34963,fm=35632,fv=35633,Ba=3553,dm=34067,dv=2884,id=3042,Jd=3024,hm=2960,hv=2929,Ys=3089,vm=32823,od=32926,Qd=32928,sd=5126,yf=35664,ds=35665,ku=35666,ud=5124,ld=35667,xc=35668,Du=35669,qu=35670,cd=35671,Sc=35672,Tc=35673,Es=35674,fd=35675,Zs=35676,bf=35678,Cf=35680,dd=4,Mc=1028,Ac=1029,xg=2304,qd=2305,Sg=32775,gm=32776,vv=519,bl=7680,Os=0,Iu=1,gv=32774,pm=513,hd=36160,Ef=36064,Ru={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},pv=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Jl={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Cl={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},El={frag:fm,vert:fv},Pc={cw:xg,ccw:qd};function eh(me){return Array.isArray(me)||I(me)||ea(me)}function mv(me){return me.sort(function(ke,ct){return ke===pl?-1:ct===pl?1:ke<ct?-1:1})}function hs(me,ke,ct,Bt){this.thisDep=me,this.contextDep=ke,this.propDep=ct,this.append=Bt}function Nu(me){return me&&!(me.thisDep||me.contextDep||me.propDep)}function so(me){return new hs(!1,!1,!1,me)}function ls(me,ke){var ct=me.type;if(ct===vl){var Bt=me.data.length;return new hs(!0,Bt>=1,Bt>=2,ke)}else if(ct===Zf){var Dt=me.data;return new hs(Dt.thisDep,Dt.contextDep,Dt.propDep,ke)}else{if(ct===vf)return new hs(!1,!1,!1,ke);if(ct===gl){for(var sn=!1,Wt=!1,kn=!1,ir=0;ir<me.data.length;++ir){var Vn=me.data[ir];if(Vn.type===ss)kn=!0;else if(Vn.type===rv)Wt=!0;else if(Vn.type===Vd)sn=!0;else if(Vn.type===vl){sn=!0;var Hn=Vn.data;Hn>=1&&(Wt=!0),Hn>=2&&(kn=!0)}else Vn.type===Zf&&(sn=sn||Vn.data.thisDep,Wt=Wt||Vn.data.contextDep,kn=kn||Vn.data.propDep)}return new hs(sn,Wt,kn,ke)}else return new hs(ct===Vd,ct===rv,ct===ss,ke)}}var th=new hs(!1,!1,!1,function(){});function nh(me,ke,ct,Bt,Dt,sn,Wt,kn,ir,Vn,Hn,Gn,pr,fr,Yn){var Xt=Vn.Record,Ht={add:32774,subtract:32778,"reverse subtract":32779};ct.ext_blend_minmax&&(Ht.min=Sg,Ht.max=gm);var Wn=ct.angle_instanced_arrays,br=ct.webgl_draw_buffers,gn={dirty:!0,profile:Yn.profile},Mr={},Dn=[],jn={},_n={};function Xn(We){return We.replace(".","_")}function _r(We,Ne,ht){var kt=Xn(We);Dn.push(We),Mr[kt]=gn[kt]=!!ht,jn[kt]=Ne}function oa(We,Ne,ht){var kt=Xn(We);Dn.push(We),Array.isArray(ht)?(gn[kt]=ht.slice(),Mr[kt]=ht.slice()):gn[kt]=Mr[kt]=ht,_n[kt]=Ne}_r(av,Jd),_r(yg,id),oa(Jf,"blendColor",[0,0,0,0]),oa(iv,"blendEquationSeparate",[gv,gv]),oa(Hd,"blendFuncSeparate",[Iu,Os,Iu,Os]),_r(qo,hv,!0),oa(Wd,"depthFunc",pm),oa(ov,"depthRange",[0,1]),oa(Pu,"depthMask",!0),oa(Qf,Qf,[!0,!0,!0,!0]),_r(qf,dv),oa($l,"cullFace",Ac),oa($d,$d,qd),oa(us,us,1),_r(Xd,vm),oa(sv,"polygonOffset",[0,0]),_r(bg,od),_r(Cg,Qd),oa(ed,"sampleCoverage",[1,!1]),_r(Yi,hm),oa(gf,"stencilMask",-1),oa(Kd,"stencilFunc",[vv,0,-1]),oa(uv,"stencilOpSeparate",[Mc,bl,bl,bl]),oa(Ju,"stencilOpSeparate",[Ac,bl,bl,bl]),_r(Ks,Ys),oa(td,"scissor",[0,0,me.drawingBufferWidth,me.drawingBufferHeight]),oa(pl,pl,[0,0,me.drawingBufferWidth,me.drawingBufferHeight]);var dr={gl:me,context:pr,strings:ke,next:Mr,current:gn,draw:Gn,elements:sn,buffer:Dt,shader:Hn,attributes:Vn.state,vao:Vn,uniforms:ir,framebuffer:kn,extensions:ct,timer:fr,isBufferArgs:eh},qn={primTypes:du,compareFuncs:Jl,blendFuncs:Ru,blendEquations:Ht,stencilOps:Cl,glTypes:lu,orientationType:Pc};T.optional(function(){dr.isArrayLike=Fr}),br&&(qn.backBuffer=[Ac],qn.drawBuffer=Aa(Bt.maxDrawbuffers,function(We){return We===0?[0]:Aa(We,function(Ne){return Ef+Ne})}));var Sn=0;function Qr(){var We=cm(),Ne=We.link,ht=We.global;We.id=Sn++,We.batchId="0";var kt=Ne(dr),Rt=We.shared={props:"a0"};Object.keys(dr).forEach(function(ft){Rt[ft]=ht.def(kt,".",ft)}),T.optional(function(){We.CHECK=Ne(T),We.commandStr=T.guessCommand(),We.command=Ne(We.commandStr),We.assert=function(ft,ze,xt){ft("if(!(",ze,"))",this.CHECK,".commandRaise(",Ne(xt),",",this.command,");")},qn.invalidBlendCombinations=pv});var bt=We.next={},vt=We.current={};Object.keys(_n).forEach(function(ft){Array.isArray(gn[ft])&&(bt[ft]=ht.def(Rt.next,".",ft),vt[ft]=ht.def(Rt.current,".",ft))});var St=We.constants={};Object.keys(qn).forEach(function(ft){St[ft]=ht.def(JSON.stringify(qn[ft]))}),We.invoke=function(ft,ze){switch(ze.type){case vl:var xt=["this",Rt.context,Rt.props,We.batchId];return ft.def(Ne(ze.data),".call(",xt.slice(0,Math.max(ze.data.length+1,4)),")");case ss:return ft.def(Rt.props,ze.data);case rv:return ft.def(Rt.context,ze.data);case Vd:return ft.def("this",ze.data);case Zf:return ze.data.append(We,ft),ze.data.ref;case vf:return ze.data.toString();case gl:return ze.data.map(function(_t){return We.invoke(ft,_t)})}},We.attribCache={};var $e={};return We.scopeAttrib=function(ft){var ze=ke.id(ft);if(ze in $e)return $e[ze];var xt=Vn.scope[ze];xt||(xt=Vn.scope[ze]=new Xt);var _t=$e[ze]=Ne(xt);return _t},We}function Ta(We){var Ne=We.static,ht=We.dynamic,kt;if(Qu in Ne){var Rt=!!Ne[Qu];kt=so(function(vt,St){return Rt}),kt.enable=Rt}else if(Qu in ht){var bt=ht[Qu];kt=ls(bt,function(vt,St){return vt.invoke(St,bt)})}return kt}function Tr(We,Ne){var ht=We.static,kt=We.dynamic;if(Xl in ht){var Rt=ht[Xl];return Rt?(Rt=kn.getFramebuffer(Rt),T.command(Rt,"invalid framebuffer object"),so(function(vt,St){var $e=vt.link(Rt),ft=vt.shared;St.set(ft.framebuffer,".next",$e);var ze=ft.context;return St.set(ze,"."+yl,$e+".width"),St.set(ze,"."+mf,$e+".height"),$e})):so(function(vt,St){var $e=vt.shared;St.set($e.framebuffer,".next","null");var ft=$e.context;return St.set(ft,"."+yl,ft+"."+Zl),St.set(ft,"."+mf,ft+"."+wg),"null"})}else if(Xl in kt){var bt=kt[Xl];return ls(bt,function(vt,St){var $e=vt.invoke(St,bt),ft=vt.shared,ze=ft.framebuffer,xt=St.def(ze,".getFramebuffer(",$e,")");T.optional(function(){vt.assert(St,"!"+$e+"||"+xt,"invalid framebuffer object")}),St.set(ze,".next",xt);var _t=ft.context;return St.set(_t,"."+yl,xt+"?"+xt+".width:"+_t+"."+Zl),St.set(_t,"."+mf,xt+"?"+xt+".height:"+_t+"."+wg),xt})}else return null}function Pa(We,Ne,ht){var kt=We.static,Rt=We.dynamic;function bt($e){if($e in kt){var ft=kt[$e];T.commandType(ft,"object","invalid "+$e,ht.commandStr);var ze=!0,xt=ft.x|0,_t=ft.y|0,yn,Cn;return"width"in ft?(yn=ft.width|0,T.command(yn>=0,"invalid "+$e,ht.commandStr)):ze=!1,"height"in ft?(Cn=ft.height|0,T.command(Cn>=0,"invalid "+$e,ht.commandStr)):ze=!1,new hs(!ze&&Ne&&Ne.thisDep,!ze&&Ne&&Ne.contextDep,!ze&&Ne&&Ne.propDep,function(jr,xa){var Ar=jr.shared.context,$r=yn;"width"in ft||($r=xa.def(Ar,".",yl,"-",xt));var pa=Cn;return"height"in ft||(pa=xa.def(Ar,".",mf,"-",_t)),[xt,_t,$r,pa]})}else if($e in Rt){var cn=Rt[$e],Zn=ls(cn,function(jr,xa){var Ar=jr.invoke(xa,cn);T.optional(function(){jr.assert(xa,Ar+"&&typeof "+Ar+'==="object"',"invalid "+$e)});var $r=jr.shared.context,pa=xa.def(Ar,".x|0"),Ya=xa.def(Ar,".y|0"),ro=xa.def('"width" in ',Ar,"?",Ar,".width|0:","(",$r,".",yl,"-",pa,")"),xs=xa.def('"height" in ',Ar,"?",Ar,".height|0:","(",$r,".",mf,"-",Ya,")");return T.optional(function(){jr.assert(xa,ro+">=0&&"+xs+">=0","invalid "+$e)}),[pa,Ya,ro,xs]});return Ne&&(Zn.thisDep=Zn.thisDep||Ne.thisDep,Zn.contextDep=Zn.contextDep||Ne.contextDep,Zn.propDep=Zn.propDep||Ne.propDep),Zn}else return Ne?new hs(Ne.thisDep,Ne.contextDep,Ne.propDep,function(jr,xa){var Ar=jr.shared.context;return[0,0,xa.def(Ar,".",yl),xa.def(Ar,".",mf)]}):null}var vt=bt(pl);if(vt){var St=vt;vt=new hs(vt.thisDep,vt.contextDep,vt.propDep,function($e,ft){var ze=St.append($e,ft),xt=$e.shared.context;return ft.set(xt,"."+Eg,ze[2]),ft.set(xt,"."+lv,ze[3]),ze})}return{viewport:vt,scissor_box:bt(td)}}function sa(We,Ne){var ht=We.static,kt=typeof ht[rd]=="string"&&typeof ht[nd]=="string";if(kt){if(Object.keys(Ne.dynamic).length>0)return null;var Rt=Ne.static,bt=Object.keys(Rt);if(bt.length>0&&typeof Rt[bt[0]]=="number"){for(var vt=[],St=0;St<bt.length;++St)T(typeof Rt[bt[St]]=="number","must specify all vertex attribute locations when using vaos"),vt.push([Rt[bt[St]]|0,bt[St]]);return vt}}return null}function Ma(We,Ne,ht){var kt=We.static,Rt=We.dynamic;function bt(ze){if(ze in kt){var xt=ke.id(kt[ze]);T.optional(function(){Hn.shader(El[ze],xt,T.guessCommand())});var _t=so(function(){return xt});return _t.id=xt,_t}else if(ze in Rt){var yn=Rt[ze];return ls(yn,function(Cn,cn){var Zn=Cn.invoke(cn,yn),jr=cn.def(Cn.shared.strings,".id(",Zn,")");return T.optional(function(){cn(Cn.shared.shader,".shader(",El[ze],",",jr,",",Cn.command,");")}),jr})}return null}var vt=bt(rd),St=bt(nd),$e=null,ft;return Nu(vt)&&Nu(St)?($e=Hn.program(St.id,vt.id,null,ht),ft=so(function(ze,xt){return ze.link($e)})):ft=new hs(vt&&vt.thisDep||St&&St.thisDep,vt&&vt.contextDep||St&&St.contextDep,vt&&vt.propDep||St&&St.propDep,function(ze,xt){var _t=ze.shared.shader,yn;vt?yn=vt.append(ze,xt):yn=xt.def(_t,".",rd);var Cn;St?Cn=St.append(ze,xt):Cn=xt.def(_t,".",nd);var cn=_t+".program("+Cn+","+yn;return T.optional(function(){cn+=","+ze.command}),xt.def(cn+")")}),{frag:vt,vert:St,progVar:ft,program:$e}}function Ka(We,Ne){var ht=We.static,kt=We.dynamic;function Rt(){if(Kl in ht){var ze=ht[Kl];eh(ze)?ze=sn.getElements(sn.create(ze,!0)):ze&&(ze=sn.getElements(ze),T.command(ze,"invalid elements",Ne.commandStr));var xt=so(function(yn,Cn){if(ze){var cn=yn.link(ze);return yn.ELEMENTS=cn,cn}return yn.ELEMENTS=null,null});return xt.value=ze,xt}else if(Kl in kt){var _t=kt[Kl];return ls(_t,function(yn,Cn){var cn=yn.shared,Zn=cn.isBufferArgs,jr=cn.elements,xa=yn.invoke(Cn,_t),Ar=Cn.def("null"),$r=Cn.def(Zn,"(",xa,")"),pa=yn.cond($r).then(Ar,"=",jr,".createStream(",xa,");").else(Ar,"=",jr,".getElements(",xa,");");return T.optional(function(){yn.assert(pa.else,"!"+xa+"||"+Ar,"invalid elements")}),Cn.entry(pa),Cn.exit(yn.cond($r).then(jr,".destroyStream(",Ar,");")),yn.ELEMENTS=Ar,Ar})}return null}var bt=Rt();function vt(){if(Yl in ht){var ze=ht[Yl];return T.commandParameter(ze,du,"invalid primitve",Ne.commandStr),so(function(_t,yn){return du[ze]})}else if(Yl in kt){var xt=kt[Yl];return ls(xt,function(_t,yn){var Cn=_t.constants.primTypes,cn=_t.invoke(yn,xt);return T.optional(function(){_t.assert(yn,cn+" in "+Cn,"invalid primitive, must be one of "+Object.keys(du))}),yn.def(Cn,"[",cn,"]")})}else if(bt)return Nu(bt)?bt.value?so(function(_t,yn){return yn.def(_t.ELEMENTS,".primType")}):so(function(){return dd}):new hs(bt.thisDep,bt.contextDep,bt.propDep,function(_t,yn){var Cn=_t.ELEMENTS;return yn.def(Cn,"?",Cn,".primType:",dd)});return null}function St(ze,xt){if(ze in ht){var _t=ht[ze]|0;return T.command(!xt||_t>=0,"invalid "+ze,Ne.commandStr),so(function(Cn,cn){return xt&&(Cn.OFFSET=_t),_t})}else if(ze in kt){var yn=kt[ze];return ls(yn,function(Cn,cn){var Zn=Cn.invoke(cn,yn);return xt&&(Cn.OFFSET=Zn,T.optional(function(){Cn.assert(cn,Zn+">=0","invalid "+ze)})),Zn})}else if(xt&&bt)return so(function(Cn,cn){return Cn.OFFSET="0",0});return null}var $e=St(Ec,!0);function ft(){if(ml in ht){var ze=ht[ml]|0;return T.command(typeof ze=="number"&&ze>=0,"invalid vertex count",Ne.commandStr),so(function(){return ze})}else if(ml in kt){var xt=kt[ml];return ls(xt,function(Cn,cn){var Zn=Cn.invoke(cn,xt);return T.optional(function(){Cn.assert(cn,"typeof "+Zn+'==="number"&&'+Zn+">=0&&"+Zn+"===("+Zn+"|0)","invalid vertex count")}),Zn})}else if(bt)if(Nu(bt)){if(bt)return $e?new hs($e.thisDep,$e.contextDep,$e.propDep,function(Cn,cn){var Zn=cn.def(Cn.ELEMENTS,".vertCount-",Cn.OFFSET);return T.optional(function(){Cn.assert(cn,Zn+">=0","invalid vertex offset/element buffer too small")}),Zn}):so(function(Cn,cn){return cn.def(Cn.ELEMENTS,".vertCount")});var _t=so(function(){return-1});return T.optional(function(){_t.MISSING=!0}),_t}else{var yn=new hs(bt.thisDep||$e.thisDep,bt.contextDep||$e.contextDep,bt.propDep||$e.propDep,function(Cn,cn){var Zn=Cn.ELEMENTS;return Cn.OFFSET?cn.def(Zn,"?",Zn,".vertCount-",Cn.OFFSET,":-1"):cn.def(Zn,"?",Zn,".vertCount:-1")});return T.optional(function(){yn.DYNAMIC=!0}),yn}return null}return{elements:bt,primitive:vt(),count:ft(),instances:St(pf,!1),offset:$e}}function to(We,Ne){var ht=We.static,kt=We.dynamic,Rt={};return Dn.forEach(function(bt){var vt=Xn(bt);function St($e,ft){if(bt in ht){var ze=$e(ht[bt]);Rt[vt]=so(function(){return ze})}else if(bt in kt){var xt=kt[bt];Rt[vt]=ls(xt,function(_t,yn){return ft(_t,yn,_t.invoke(yn,xt))})}}switch(bt){case qf:case yg:case av:case Yi:case qo:case Ks:case Xd:case bg:case Cg:case Pu:return St(function($e){return T.commandType($e,"boolean",bt,Ne.commandStr),$e},function($e,ft,ze){return T.optional(function(){$e.assert(ft,"typeof "+ze+'==="boolean"',"invalid flag "+bt,$e.commandStr)}),ze});case Wd:return St(function($e){return T.commandParameter($e,Jl,"invalid "+bt,Ne.commandStr),Jl[$e]},function($e,ft,ze){var xt=$e.constants.compareFuncs;return T.optional(function(){$e.assert(ft,ze+" in "+xt,"invalid "+bt+", must be one of "+Object.keys(Jl))}),ft.def(xt,"[",ze,"]")});case ov:return St(function($e){return T.command(Fr($e)&&$e.length===2&&typeof $e[0]=="number"&&typeof $e[1]=="number"&&$e[0]<=$e[1],"depth range is 2d array",Ne.commandStr),$e},function($e,ft,ze){T.optional(function(){$e.assert(ft,$e.shared.isArrayLike+"("+ze+")&&"+ze+".length===2&&typeof "+ze+'[0]==="number"&&typeof '+ze+'[1]==="number"&&'+ze+"[0]<="+ze+"[1]","depth range must be a 2d array")});var xt=ft.def("+",ze,"[0]"),_t=ft.def("+",ze,"[1]");return[xt,_t]});case Hd:return St(function($e){T.commandType($e,"object","blend.func",Ne.commandStr);var ft="srcRGB"in $e?$e.srcRGB:$e.src,ze="srcAlpha"in $e?$e.srcAlpha:$e.src,xt="dstRGB"in $e?$e.dstRGB:$e.dst,_t="dstAlpha"in $e?$e.dstAlpha:$e.dst;return T.commandParameter(ft,Ru,vt+".srcRGB",Ne.commandStr),T.commandParameter(ze,Ru,vt+".srcAlpha",Ne.commandStr),T.commandParameter(xt,Ru,vt+".dstRGB",Ne.commandStr),T.commandParameter(_t,Ru,vt+".dstAlpha",Ne.commandStr),T.command(pv.indexOf(ft+", "+xt)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ft+", "+xt+")",Ne.commandStr),[Ru[ft],Ru[xt],Ru[ze],Ru[_t]]},function($e,ft,ze){var xt=$e.constants.blendFuncs;T.optional(function(){$e.assert(ft,ze+"&&typeof "+ze+'==="object"',"invalid blend func, must be an object")});function _t(Ar,$r){var pa=ft.def('"',Ar,$r,'" in ',ze,"?",ze,".",Ar,$r,":",ze,".",Ar);return T.optional(function(){$e.assert(ft,pa+" in "+xt,"invalid "+bt+"."+Ar+$r+", must be one of "+Object.keys(Ru))}),pa}var yn=_t("src","RGB"),Cn=_t("dst","RGB");T.optional(function(){var Ar=$e.constants.invalidBlendCombinations;$e.assert(ft,Ar+".indexOf("+yn+'+", "+'+Cn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var cn=ft.def(xt,"[",yn,"]"),Zn=ft.def(xt,"[",_t("src","Alpha"),"]"),jr=ft.def(xt,"[",Cn,"]"),xa=ft.def(xt,"[",_t("dst","Alpha"),"]");return[cn,jr,Zn,xa]});case iv:return St(function($e){if(typeof $e=="string")return T.commandParameter($e,Ht,"invalid "+bt,Ne.commandStr),[Ht[$e],Ht[$e]];if(typeof $e=="object")return T.commandParameter($e.rgb,Ht,bt+".rgb",Ne.commandStr),T.commandParameter($e.alpha,Ht,bt+".alpha",Ne.commandStr),[Ht[$e.rgb],Ht[$e.alpha]];T.commandRaise("invalid blend.equation",Ne.commandStr)},function($e,ft,ze){var xt=$e.constants.blendEquations,_t=ft.def(),yn=ft.def(),Cn=$e.cond("typeof ",ze,'==="string"');return T.optional(function(){function cn(Zn,jr,xa){$e.assert(Zn,xa+" in "+xt,"invalid "+jr+", must be one of "+Object.keys(Ht))}cn(Cn.then,bt,ze),$e.assert(Cn.else,ze+"&&typeof "+ze+'==="object"',"invalid "+bt),cn(Cn.else,bt+".rgb",ze+".rgb"),cn(Cn.else,bt+".alpha",ze+".alpha")}),Cn.then(_t,"=",yn,"=",xt,"[",ze,"];"),Cn.else(_t,"=",xt,"[",ze,".rgb];",yn,"=",xt,"[",ze,".alpha];"),ft(Cn),[_t,yn]});case Jf:return St(function($e){return T.command(Fr($e)&&$e.length===4,"blend.color must be a 4d array",Ne.commandStr),Aa(4,function(ft){return+$e[ft]})},function($e,ft,ze){return T.optional(function(){$e.assert(ft,$e.shared.isArrayLike+"("+ze+")&&"+ze+".length===4","blend.color must be a 4d array")}),Aa(4,function(xt){return ft.def("+",ze,"[",xt,"]")})});case gf:return St(function($e){return T.commandType($e,"number",vt,Ne.commandStr),$e|0},function($e,ft,ze){return T.optional(function(){$e.assert(ft,"typeof "+ze+'==="number"',"invalid stencil.mask")}),ft.def(ze,"|0")});case Kd:return St(function($e){T.commandType($e,"object",vt,Ne.commandStr);var ft=$e.cmp||"keep",ze=$e.ref||0,xt="mask"in $e?$e.mask:-1;return T.commandParameter(ft,Jl,bt+".cmp",Ne.commandStr),T.commandType(ze,"number",bt+".ref",Ne.commandStr),T.commandType(xt,"number",bt+".mask",Ne.commandStr),[Jl[ft],ze,xt]},function($e,ft,ze){var xt=$e.constants.compareFuncs;T.optional(function(){function cn(){$e.assert(ft,Array.prototype.join.call(arguments,""),"invalid stencil.func")}cn(ze+"&&typeof ",ze,'==="object"'),cn('!("cmp" in ',ze,")||(",ze,".cmp in ",xt,")")});var _t=ft.def('"cmp" in ',ze,"?",xt,"[",ze,".cmp]",":",bl),yn=ft.def(ze,".ref|0"),Cn=ft.def('"mask" in ',ze,"?",ze,".mask|0:-1");return[_t,yn,Cn]});case uv:case Ju:return St(function($e){T.commandType($e,"object",vt,Ne.commandStr);var ft=$e.fail||"keep",ze=$e.zfail||"keep",xt=$e.zpass||"keep";return T.commandParameter(ft,Cl,bt+".fail",Ne.commandStr),T.commandParameter(ze,Cl,bt+".zfail",Ne.commandStr),T.commandParameter(xt,Cl,bt+".zpass",Ne.commandStr),[bt===Ju?Ac:Mc,Cl[ft],Cl[ze],Cl[xt]]},function($e,ft,ze){var xt=$e.constants.stencilOps;T.optional(function(){$e.assert(ft,ze+"&&typeof "+ze+'==="object"',"invalid "+bt)});function _t(yn){return T.optional(function(){$e.assert(ft,'!("'+yn+'" in '+ze+")||("+ze+"."+yn+" in "+xt+")","invalid "+bt+"."+yn+", must be one of "+Object.keys(Cl))}),ft.def('"',yn,'" in ',ze,"?",xt,"[",ze,".",yn,"]:",bl)}return[bt===Ju?Ac:Mc,_t("fail"),_t("zfail"),_t("zpass")]});case sv:return St(function($e){T.commandType($e,"object",vt,Ne.commandStr);var ft=$e.factor|0,ze=$e.units|0;return T.commandType(ft,"number",vt+".factor",Ne.commandStr),T.commandType(ze,"number",vt+".units",Ne.commandStr),[ft,ze]},function($e,ft,ze){T.optional(function(){$e.assert(ft,ze+"&&typeof "+ze+'==="object"',"invalid "+bt)});var xt=ft.def(ze,".factor|0"),_t=ft.def(ze,".units|0");return[xt,_t]});case $l:return St(function($e){var ft=0;return $e==="front"?ft=Mc:$e==="back"&&(ft=Ac),T.command(!!ft,vt,Ne.commandStr),ft},function($e,ft,ze){return T.optional(function(){$e.assert(ft,ze+'==="front"||'+ze+'==="back"',"invalid cull.face")}),ft.def(ze,'==="front"?',Mc,":",Ac)});case us:return St(function($e){return T.command(typeof $e=="number"&&$e>=Bt.lineWidthDims[0]&&$e<=Bt.lineWidthDims[1],"invalid line width, must be a positive number between "+Bt.lineWidthDims[0]+" and "+Bt.lineWidthDims[1],Ne.commandStr),$e},function($e,ft,ze){return T.optional(function(){$e.assert(ft,"typeof "+ze+'==="number"&&'+ze+">="+Bt.lineWidthDims[0]+"&&"+ze+"<="+Bt.lineWidthDims[1],"invalid line width")}),ze});case $d:return St(function($e){return T.commandParameter($e,Pc,vt,Ne.commandStr),Pc[$e]},function($e,ft,ze){return T.optional(function(){$e.assert(ft,ze+'==="cw"||'+ze+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ft.def(ze+'==="cw"?'+xg+":"+qd)});case Qf:return St(function($e){return T.command(Fr($e)&&$e.length===4,"color.mask must be length 4 array",Ne.commandStr),$e.map(function(ft){return!!ft})},function($e,ft,ze){return T.optional(function(){$e.assert(ft,$e.shared.isArrayLike+"("+ze+")&&"+ze+".length===4","invalid color.mask")}),Aa(4,function(xt){return"!!"+ze+"["+xt+"]"})});case ed:return St(function($e){T.command(typeof $e=="object"&&$e,vt,Ne.commandStr);var ft="value"in $e?$e.value:1,ze=!!$e.invert;return T.command(typeof ft=="number"&&ft>=0&&ft<=1,"sample.coverage.value must be a number between 0 and 1",Ne.commandStr),[ft,ze]},function($e,ft,ze){T.optional(function(){$e.assert(ft,ze+"&&typeof "+ze+'==="object"',"invalid sample.coverage")});var xt=ft.def('"value" in ',ze,"?+",ze,".value:1"),_t=ft.def("!!",ze,".invert");return[xt,_t]})}}),Rt}function yo(We,Ne){var ht=We.static,kt=We.dynamic,Rt={};return Object.keys(ht).forEach(function(bt){var vt=ht[bt],St;if(typeof vt=="number"||typeof vt=="boolean")St=so(function(){return vt});else if(typeof vt=="function"){var $e=vt._reglType;$e==="texture2d"||$e==="textureCube"?St=so(function(ft){return ft.link(vt)}):$e==="framebuffer"||$e==="framebufferCube"?(T.command(vt.color.length>0,'missing color attachment for framebuffer sent to uniform "'+bt+'"',Ne.commandStr),St=so(function(ft){return ft.link(vt.color[0])})):T.commandRaise('invalid data for uniform "'+bt+'"',Ne.commandStr)}else Fr(vt)?St=so(function(ft){var ze=ft.global.def("[",Aa(vt.length,function(xt){return T.command(typeof vt[xt]=="number"||typeof vt[xt]=="boolean","invalid uniform "+bt,ft.commandStr),vt[xt]}),"]");return ze}):T.commandRaise('invalid or missing data for uniform "'+bt+'"',Ne.commandStr);St.value=vt,Rt[bt]=St}),Object.keys(kt).forEach(function(bt){var vt=kt[bt];Rt[bt]=ls(vt,function(St,$e){return St.invoke($e,vt)})}),Rt}function ka(We,Ne){var ht=We.static,kt=We.dynamic,Rt={};return Object.keys(ht).forEach(function(bt){var vt=ht[bt],St=ke.id(bt),$e=new Xt;if(eh(vt))$e.state=Fs,$e.buffer=Dt.getBuffer(Dt.create(vt,wc,!1,!0)),$e.type=0;else{var ft=Dt.getBuffer(vt);if(ft)$e.state=Fs,$e.buffer=ft,$e.type=0;else if(T.command(typeof vt=="object"&&vt,"invalid data for attribute "+bt,Ne.commandStr),"constant"in vt){var ze=vt.constant;$e.buffer="null",$e.state=Yf,typeof ze=="number"?$e.x=ze:(T.command(Fr(ze)&&ze.length>0&&ze.length<=4,"invalid constant for attribute "+bt,Ne.commandStr),bc.forEach(function(jr,xa){xa<ze.length&&($e[jr]=ze[xa])}))}else{eh(vt.buffer)?ft=Dt.getBuffer(Dt.create(vt.buffer,wc,!1,!0)):ft=Dt.getBuffer(vt.buffer),T.command(!!ft,'missing buffer for attribute "'+bt+'"',Ne.commandStr);var xt=vt.offset|0;T.command(xt>=0,'invalid offset for attribute "'+bt+'"',Ne.commandStr);var _t=vt.stride|0;T.command(_t>=0&&_t<256,'invalid stride for attribute "'+bt+'", must be integer betweeen [0, 255]',Ne.commandStr);var yn=vt.size|0;T.command(!("size"in vt)||yn>0&&yn<=4,'invalid size for attribute "'+bt+'", must be 1,2,3,4',Ne.commandStr);var Cn=!!vt.normalized,cn=0;"type"in vt&&(T.commandParameter(vt.type,lu,"invalid type for attribute "+bt,Ne.commandStr),cn=lu[vt.type]);var Zn=vt.divisor|0;"divisor"in vt&&(T.command(Zn===0||Wn,'cannot specify divisor for attribute "'+bt+'", instancing not supported',Ne.commandStr),T.command(Zn>=0,'invalid divisor for attribute "'+bt+'"',Ne.commandStr)),T.optional(function(){var jr=Ne.commandStr,xa=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(vt).forEach(function(Ar){T.command(xa.indexOf(Ar)>=0,'unknown parameter "'+Ar+'" for attribute pointer "'+bt+'" (valid parameters are '+xa+")",jr)})}),$e.buffer=ft,$e.state=Fs,$e.size=yn,$e.normalized=Cn,$e.type=cn||ft.dtype,$e.offset=xt,$e.stride=_t,$e.divisor=Zn}}Rt[bt]=so(function(jr,xa){var Ar=jr.attribCache;if(St in Ar)return Ar[St];var $r={isStream:!1};return Object.keys($e).forEach(function(pa){$r[pa]=$e[pa]}),$e.buffer&&($r.buffer=jr.link($e.buffer),$r.type=$r.type||$r.buffer+".dtype"),Ar[St]=$r,$r})}),Object.keys(kt).forEach(function(bt){var vt=kt[bt];function St($e,ft){var ze=$e.invoke(ft,vt),xt=$e.shared,_t=$e.constants,yn=xt.isBufferArgs,Cn=xt.buffer;T.optional(function(){$e.assert(ft,ze+"&&(typeof "+ze+'==="object"||typeof '+ze+'==="function")&&('+yn+"("+ze+")||"+Cn+".getBuffer("+ze+")||"+Cn+".getBuffer("+ze+".buffer)||"+yn+"("+ze+'.buffer)||("constant" in '+ze+"&&(typeof "+ze+'.constant==="number"||'+xt.isArrayLike+"("+ze+".constant))))",'invalid dynamic attribute "'+bt+'"')});var cn={isStream:ft.def(!1)},Zn=new Xt;Zn.state=Fs,Object.keys(Zn).forEach(function($r){cn[$r]=ft.def(""+Zn[$r])});var jr=cn.buffer,xa=cn.type;ft("if(",yn,"(",ze,")){",cn.isStream,"=true;",jr,"=",Cn,".createStream(",wc,",",ze,");",xa,"=",jr,".dtype;","}else{",jr,"=",Cn,".getBuffer(",ze,");","if(",jr,"){",xa,"=",jr,".dtype;",'}else if("constant" in ',ze,"){",cn.state,"=",Yf,";","if(typeof "+ze+'.constant === "number"){',cn[bc[0]],"=",ze,".constant;",bc.slice(1).map(function($r){return cn[$r]}).join("="),"=0;","}else{",bc.map(function($r,pa){return cn[$r]+"="+ze+".constant.length>"+pa+"?"+ze+".constant["+pa+"]:0;"}).join(""),"}}else{","if(",yn,"(",ze,".buffer)){",jr,"=",Cn,".createStream(",wc,",",ze,".buffer);","}else{",jr,"=",Cn,".getBuffer(",ze,".buffer);","}",xa,'="type" in ',ze,"?",_t.glTypes,"[",ze,".type]:",jr,".dtype;",cn.normalized,"=!!",ze,".normalized;");function Ar($r){ft(cn[$r],"=",ze,".",$r,"|0;")}return Ar("size"),Ar("offset"),Ar("stride"),Ar("divisor"),ft("}}"),ft.exit("if(",cn.isStream,"){",Cn,".destroyStream(",jr,");","}"),cn}Rt[bt]=ls(vt,St)}),Rt}function uo(We,Ne){var ht=We.static,kt=We.dynamic;if(Oc in ht){var Rt=ht[Oc];return Rt!==null&&Vn.getVAO(Rt)===null&&(Rt=Vn.createVAO(Rt)),so(function(vt){return vt.link(Vn.getVAO(Rt))})}else if(Oc in kt){var bt=kt[Oc];return ls(bt,function(vt,St){var $e=vt.invoke(St,bt);return St.def(vt.shared.vao+".getVAO("+$e+")")})}return null}function Di(We){var Ne=We.static,ht=We.dynamic,kt={};return Object.keys(Ne).forEach(function(Rt){var bt=Ne[Rt];kt[Rt]=so(function(vt,St){return typeof bt=="number"||typeof bt=="boolean"?""+bt:vt.link(bt)})}),Object.keys(ht).forEach(function(Rt){var bt=ht[Rt];kt[Rt]=ls(bt,function(vt,St){return vt.invoke(St,bt)})}),kt}function Ii(We,Ne,ht,kt,Rt){var bt=We.static,vt=We.dynamic;T.optional(function(){var Ar=[Xl,nd,rd,Kl,Yl,Ec,ml,pf,Qu,Oc].concat(Dn);function $r(pa){Object.keys(pa).forEach(function(Ya){T.command(Ar.indexOf(Ya)>=0,'unknown parameter "'+Ya+'"',Rt.commandStr)})}$r(bt),$r(vt)});var St=sa(We,Ne),$e=Tr(We,Rt),ft=Pa(We,$e,Rt),ze=Ka(We,Rt),xt=to(We,Rt),_t=Ma(We,Rt,St);function yn(Ar){var $r=ft[Ar];$r&&(xt[Ar]=$r)}yn(pl),yn(Xn(td));var Cn=Object.keys(xt).length>0,cn={framebuffer:$e,draw:ze,shader:_t,state:xt,dirty:Cn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(cn.profile=Ta(We,Rt),cn.uniforms=yo(ht,Rt),cn.drawVAO=cn.scopeVAO=uo(We,Rt),!cn.drawVAO&&_t.program&&!St&&ct.angle_instanced_arrays){var Zn=!0,jr=_t.program.attributes.map(function(Ar){var $r=Ne.static[Ar];return Zn=Zn&&!!$r,$r});if(Zn&&jr.length>0){var xa=Vn.getVAO(Vn.createVAO(jr));cn.drawVAO=new hs(null,null,null,function(Ar,$r){return Ar.link(xa)}),cn.useVAO=!0}}return St?cn.useVAO=!0:cn.attributes=ka(Ne,Rt),cn.context=Di(kt,Rt),cn}function no(We,Ne,ht){var kt=We.shared,Rt=kt.context,bt=We.scope();Object.keys(ht).forEach(function(vt){Ne.save(Rt,"."+vt);var St=ht[vt],$e=St.append(We,Ne);Array.isArray($e)?bt(Rt,".",vt,"=[",$e.join(),"];"):bt(Rt,".",vt,"=",$e,";")}),Ne(bt)}function vo(We,Ne,ht,kt){var Rt=We.shared,bt=Rt.gl,vt=Rt.framebuffer,St;br&&(St=Ne.def(Rt.extensions,".webgl_draw_buffers"));var $e=We.constants,ft=$e.drawBuffer,ze=$e.backBuffer,xt;ht?xt=ht.append(We,Ne):xt=Ne.def(vt,".next"),kt||Ne("if(",xt,"!==",vt,".cur){"),Ne("if(",xt,"){",bt,".bindFramebuffer(",hd,",",xt,".framebuffer);"),br&&Ne(St,".drawBuffersWEBGL(",ft,"[",xt,".colorAttachments.length]);"),Ne("}else{",bt,".bindFramebuffer(",hd,",null);"),br&&Ne(St,".drawBuffersWEBGL(",ze,");"),Ne("}",vt,".cur=",xt,";"),kt||Ne("}")}function Bi(We,Ne,ht){var kt=We.shared,Rt=kt.gl,bt=We.current,vt=We.next,St=kt.current,$e=kt.next,ft=We.cond(St,".dirty");Dn.forEach(function(ze){var xt=Xn(ze);if(!(xt in ht.state)){var _t,yn;if(xt in vt){_t=vt[xt],yn=bt[xt];var Cn=Aa(gn[xt].length,function(Zn){return ft.def(_t,"[",Zn,"]")});ft(We.cond(Cn.map(function(Zn,jr){return Zn+"!=="+yn+"["+jr+"]"}).join("||")).then(Rt,".",_n[xt],"(",Cn,");",Cn.map(function(Zn,jr){return yn+"["+jr+"]="+Zn}).join(";"),";"))}else{_t=ft.def($e,".",xt);var cn=We.cond(_t,"!==",St,".",xt);ft(cn),xt in jn?cn(We.cond(_t).then(Rt,".enable(",jn[xt],");").else(Rt,".disable(",jn[xt],");"),St,".",xt,"=",_t,";"):cn(Rt,".",_n[xt],"(",_t,");",St,".",xt,"=",_t,";")}}}),Object.keys(ht.state).length===0&&ft(St,".dirty=false;"),Ne(ft)}function Hi(We,Ne,ht,kt){var Rt=We.shared,bt=We.current,vt=Rt.current,St=Rt.gl;mv(Object.keys(ht)).forEach(function($e){var ft=ht[$e];if(!(kt&&!kt(ft))){var ze=ft.append(We,Ne);if(jn[$e]){var xt=jn[$e];Nu(ft)?ze?Ne(St,".enable(",xt,");"):Ne(St,".disable(",xt,");"):Ne(We.cond(ze).then(St,".enable(",xt,");").else(St,".disable(",xt,");")),Ne(vt,".",$e,"=",ze,";")}else if(Fr(ze)){var _t=bt[$e];Ne(St,".",_n[$e],"(",ze,");",ze.map(function(yn,Cn){return _t+"["+Cn+"]="+yn}).join(";"),";")}else Ne(St,".",_n[$e],"(",ze,");",vt,".",$e,"=",ze,";")}})}function lo(We,Ne){Wn&&(We.instancing=Ne.def(We.shared.extensions,".angle_instanced_arrays"))}function Ca(We,Ne,ht,kt,Rt){var bt=We.shared,vt=We.stats,St=bt.current,$e=bt.timer,ft=ht.profile;function ze(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var xt,_t;function yn(Ar){xt=Ne.def(),Ar(xt,"=",ze(),";"),typeof Rt=="string"?Ar(vt,".count+=",Rt,";"):Ar(vt,".count++;"),fr&&(kt?(_t=Ne.def(),Ar(_t,"=",$e,".getNumPendingQueries();")):Ar($e,".beginQuery(",vt,");"))}function Cn(Ar){Ar(vt,".cpuTime+=",ze(),"-",xt,";"),fr&&(kt?Ar($e,".pushScopeStats(",_t,",",$e,".getNumPendingQueries(),",vt,");"):Ar($e,".endQuery();"))}function cn(Ar){var $r=Ne.def(St,".profile");Ne(St,".profile=",Ar,";"),Ne.exit(St,".profile=",$r,";")}var Zn;if(ft){if(Nu(ft)){ft.enable?(yn(Ne),Cn(Ne.exit),cn("true")):cn("false");return}Zn=ft.append(We,Ne),cn(Zn)}else Zn=Ne.def(St,".profile");var jr=We.block();yn(jr),Ne("if(",Zn,"){",jr,"}");var xa=We.block();Cn(xa),Ne.exit("if(",Zn,"){",xa,"}")}function es(We,Ne,ht,kt,Rt){var bt=We.shared;function vt($e){switch($e){case yf:case ld:case cd:return 2;case ds:case xc:case Sc:return 3;case ku:case Du:case Tc:return 4;default:return 1}}function St($e,ft,ze){var xt=bt.gl,_t=Ne.def($e,".location"),yn=Ne.def(bt.attributes,"[",_t,"]"),Cn=ze.state,cn=ze.buffer,Zn=[ze.x,ze.y,ze.z,ze.w],jr=["buffer","normalized","offset","stride"];function xa(){Ne("if(!",yn,".buffer){",xt,".enableVertexAttribArray(",_t,");}");var $r=ze.type,pa;if(ze.size?pa=Ne.def(ze.size,"||",ft):pa=ft,Ne("if(",yn,".type!==",$r,"||",yn,".size!==",pa,"||",jr.map(function(ro){return yn+"."+ro+"!=="+ze[ro]}).join("||"),"){",xt,".bindBuffer(",wc,",",cn,".buffer);",xt,".vertexAttribPointer(",[_t,pa,$r,ze.normalized,ze.stride,ze.offset],");",yn,".type=",$r,";",yn,".size=",pa,";",jr.map(function(ro){return yn+"."+ro+"="+ze[ro]+";"}).join(""),"}"),Wn){var Ya=ze.divisor;Ne("if(",yn,".divisor!==",Ya,"){",We.instancing,".vertexAttribDivisorANGLE(",[_t,Ya],");",yn,".divisor=",Ya,";}")}}function Ar(){Ne("if(",yn,".buffer){",xt,".disableVertexAttribArray(",_t,");",yn,".buffer=null;","}if(",bc.map(function($r,pa){return yn+"."+$r+"!=="+Zn[pa]}).join("||"),"){",xt,".vertexAttrib4f(",_t,",",Zn,");",bc.map(function($r,pa){return yn+"."+$r+"="+Zn[pa]+";"}).join(""),"}")}Cn===Fs?xa():Cn===Yf?Ar():(Ne("if(",Cn,"===",Fs,"){"),xa(),Ne("}else{"),Ar(),Ne("}"))}kt.forEach(function($e){var ft=$e.name,ze=ht.attributes[ft],xt;if(ze){if(!Rt(ze))return;xt=ze.append(We,Ne)}else{if(!Rt(th))return;var _t=We.scopeAttrib(ft);T.optional(function(){We.assert(Ne,_t+".state","missing attribute "+ft)}),xt={},Object.keys(new Xt).forEach(function(yn){xt[yn]=Ne.def(_t,".",yn)})}St(We.link($e),vt($e.info.type),xt)})}function ii(We,Ne,ht,kt,Rt){for(var bt=We.shared,vt=bt.gl,St,$e=0;$e<kt.length;++$e){var ft=kt[$e],ze=ft.name,xt=ft.info.type,_t=ht.uniforms[ze],yn=We.link(ft),Cn=yn+".location",cn;if(_t){if(!Rt(_t))continue;if(Nu(_t)){var Zn=_t.value;if(T.command(Zn!==null&&typeof Zn!="undefined",'missing uniform "'+ze+'"',We.commandStr),xt===bf||xt===Cf){T.command(typeof Zn=="function"&&(xt===bf&&(Zn._reglType==="texture2d"||Zn._reglType==="framebuffer")||xt===Cf&&(Zn._reglType==="textureCube"||Zn._reglType==="framebufferCube")),"invalid texture for uniform "+ze,We.commandStr);var jr=We.link(Zn._texture||Zn.color[0]._texture);Ne(vt,".uniform1i(",Cn,",",jr+".bind());"),Ne.exit(jr,".unbind();")}else if(xt===Es||xt===fd||xt===Zs){T.optional(function(){T.command(Fr(Zn),"invalid matrix for uniform "+ze,We.commandStr),T.command(xt===Es&&Zn.length===4||xt===fd&&Zn.length===9||xt===Zs&&Zn.length===16,"invalid length for matrix uniform "+ze,We.commandStr)});var xa=We.global.def("new Float32Array(["+Array.prototype.slice.call(Zn)+"])"),Ar=2;xt===fd?Ar=3:xt===Zs&&(Ar=4),Ne(vt,".uniformMatrix",Ar,"fv(",Cn,",false,",xa,");")}else{switch(xt){case sd:T.commandType(Zn,"number","uniform "+ze,We.commandStr),St="1f";break;case yf:T.command(Fr(Zn)&&Zn.length===2,"uniform "+ze,We.commandStr),St="2f";break;case ds:T.command(Fr(Zn)&&Zn.length===3,"uniform "+ze,We.commandStr),St="3f";break;case ku:T.command(Fr(Zn)&&Zn.length===4,"uniform "+ze,We.commandStr),St="4f";break;case qu:T.commandType(Zn,"boolean","uniform "+ze,We.commandStr),St="1i";break;case ud:T.commandType(Zn,"number","uniform "+ze,We.commandStr),St="1i";break;case cd:T.command(Fr(Zn)&&Zn.length===2,"uniform "+ze,We.commandStr),St="2i";break;case ld:T.command(Fr(Zn)&&Zn.length===2,"uniform "+ze,We.commandStr),St="2i";break;case Sc:T.command(Fr(Zn)&&Zn.length===3,"uniform "+ze,We.commandStr),St="3i";break;case xc:T.command(Fr(Zn)&&Zn.length===3,"uniform "+ze,We.commandStr),St="3i";break;case Tc:T.command(Fr(Zn)&&Zn.length===4,"uniform "+ze,We.commandStr),St="4i";break;case Du:T.command(Fr(Zn)&&Zn.length===4,"uniform "+ze,We.commandStr),St="4i";break}Ne(vt,".uniform",St,"(",Cn,",",Fr(Zn)?Array.prototype.slice.call(Zn):Zn,");")}continue}else cn=_t.append(We,Ne)}else{if(!Rt(th))continue;cn=Ne.def(bt.uniforms,"[",ke.id(ze),"]")}xt===bf?(T(!Array.isArray(cn),"must specify a scalar prop for textures"),Ne("if(",cn,"&&",cn,'._reglType==="framebuffer"){',cn,"=",cn,".color[0];","}")):xt===Cf&&(T(!Array.isArray(cn),"must specify a scalar prop for cube maps"),Ne("if(",cn,"&&",cn,'._reglType==="framebufferCube"){',cn,"=",cn,".color[0];","}")),T.optional(function(){function xs(ju,Dg){We.assert(Ne,ju,'bad data or missing for uniform "'+ze+'".  '+Dg)}function Cv(ju){T(!Array.isArray(cn),"must not specify an array type for uniform"),xs("typeof "+cn+'==="'+ju+'"',"invalid type, expected "+ju)}function pu(ju,Dg){Array.isArray(cn)?T(cn.length===ju,"must have length "+ju):xs(bt.isArrayLike+"("+cn+")&&"+cn+".length==="+ju,"invalid vector, should have length "+ju,We.commandStr)}function kg(ju){T(!Array.isArray(cn),"must not specify a value type"),xs("typeof "+cn+'==="function"&&'+cn+'._reglType==="texture'+(ju===Ba?"2d":"Cube")+'"',"invalid texture type",We.commandStr)}switch(xt){case ud:Cv("number");break;case ld:pu(2,"number");break;case xc:pu(3,"number");break;case Du:pu(4,"number");break;case sd:Cv("number");break;case yf:pu(2,"number");break;case ds:pu(3,"number");break;case ku:pu(4,"number");break;case qu:Cv("boolean");break;case cd:pu(2,"boolean");break;case Sc:pu(3,"boolean");break;case Tc:pu(4,"boolean");break;case Es:pu(4,"number");break;case fd:pu(9,"number");break;case Zs:pu(16,"number");break;case bf:kg(Ba);break;case Cf:kg(dm);break}});var $r=1;switch(xt){case bf:case Cf:var pa=Ne.def(cn,"._texture");Ne(vt,".uniform1i(",Cn,",",pa,".bind());"),Ne.exit(pa,".unbind();");continue;case ud:case qu:St="1i";break;case ld:case cd:St="2i",$r=2;break;case xc:case Sc:St="3i",$r=3;break;case Du:case Tc:St="4i",$r=4;break;case sd:St="1f";break;case yf:St="2f",$r=2;break;case ds:St="3f",$r=3;break;case ku:St="4f",$r=4;break;case Es:St="Matrix2fv";break;case fd:St="Matrix3fv";break;case Zs:St="Matrix4fv";break}if(Ne(vt,".uniform",St,"(",Cn,","),St.charAt(0)==="M"){var Ya=Math.pow(xt-Es+2,2),ro=We.global.def("new Float32Array(",Ya,")");Array.isArray(cn)?Ne("false,(",Aa(Ya,function(xs){return ro+"["+xs+"]="+cn[xs]}),",",ro,")"):Ne("false,(Array.isArray(",cn,")||",cn," instanceof Float32Array)?",cn,":(",Aa(Ya,function(xs){return ro+"["+xs+"]="+cn+"["+xs+"]"}),",",ro,")")}else $r>1?Ne(Aa($r,function(xs){return Array.isArray(cn)?cn[xs]:cn+"["+xs+"]"})):(T(!Array.isArray(cn),"uniform value must not be an array"),Ne(cn));Ne(");")}}function Jr(We,Ne,ht,kt){var Rt=We.shared,bt=Rt.gl,vt=Rt.draw,St=kt.draw;function $e(){var pa=St.elements,Ya,ro=Ne;return pa?((pa.contextDep&&kt.contextDynamic||pa.propDep)&&(ro=ht),Ya=pa.append(We,ro)):Ya=ro.def(vt,".",Kl),Ya&&ro("if("+Ya+")"+bt+".bindBuffer("+cv+","+Ya+".buffer.buffer);"),Ya}function ft(){var pa=St.count,Ya,ro=Ne;return pa?((pa.contextDep&&kt.contextDynamic||pa.propDep)&&(ro=ht),Ya=pa.append(We,ro),T.optional(function(){pa.MISSING&&We.assert(Ne,"false","missing vertex count"),pa.DYNAMIC&&We.assert(ro,Ya+">=0","missing vertex count")})):(Ya=ro.def(vt,".",ml),T.optional(function(){We.assert(ro,Ya+">=0","missing vertex count")})),Ya}var ze=$e();function xt(pa){var Ya=St[pa];return Ya?Ya.contextDep&&kt.contextDynamic||Ya.propDep?Ya.append(We,ht):Ya.append(We,Ne):Ne.def(vt,".",pa)}var _t=xt(Yl),yn=xt(Ec),Cn=ft();if(typeof Cn=="number"){if(Cn===0)return}else ht("if(",Cn,"){"),ht.exit("}");var cn,Zn;Wn&&(cn=xt(pf),Zn=We.instancing);var jr=ze+".type",xa=St.elements&&Nu(St.elements);function Ar(){function pa(){ht(Zn,".drawElementsInstancedANGLE(",[_t,Cn,jr,yn+"<<(("+jr+"-"+Cc+")>>1)",cn],");")}function Ya(){ht(Zn,".drawArraysInstancedANGLE(",[_t,yn,Cn,cn],");")}ze?xa?pa():(ht("if(",ze,"){"),pa(),ht("}else{"),Ya(),ht("}")):Ya()}function $r(){function pa(){ht(bt+".drawElements("+[_t,Cn,jr,yn+"<<(("+jr+"-"+Cc+")>>1)"]+");")}function Ya(){ht(bt+".drawArrays("+[_t,yn,Cn]+");")}ze?xa?pa():(ht("if(",ze,"){"),pa(),ht("}else{"),Ya(),ht("}")):Ya()}Wn&&(typeof cn!="number"||cn>=0)?typeof cn=="string"?(ht("if(",cn,">0){"),Ar(),ht("}else if(",cn,"<0){"),$r(),ht("}")):Ar():$r()}function Ea(We,Ne,ht,kt,Rt){var bt=Qr(),vt=bt.proc("body",Rt);return T.optional(function(){bt.commandStr=Ne.commandStr,bt.command=bt.link(Ne.commandStr)}),Wn&&(bt.instancing=vt.def(bt.shared.extensions,".angle_instanced_arrays")),We(bt,vt,ht,kt),bt.compile().body}function Ga(We,Ne,ht,kt){lo(We,Ne),ht.useVAO?ht.drawVAO?Ne(We.shared.vao,".setVAO(",ht.drawVAO.append(We,Ne),");"):Ne(We.shared.vao,".setVAO(",We.shared.vao,".targetVAO);"):(Ne(We.shared.vao,".setVAO(null);"),es(We,Ne,ht,kt.attributes,function(){return!0})),ii(We,Ne,ht,kt.uniforms,function(){return!0}),Jr(We,Ne,Ne,ht)}function Go(We,Ne){var ht=We.proc("draw",1);lo(We,ht),no(We,ht,Ne.context),vo(We,ht,Ne.framebuffer),Bi(We,ht,Ne),Hi(We,ht,Ne.state),Ca(We,ht,Ne,!1,!0);var kt=Ne.shader.progVar.append(We,ht);if(ht(We.shared.gl,".useProgram(",kt,".program);"),Ne.shader.program)Ga(We,ht,Ne,Ne.shader.program);else{ht(We.shared.vao,".setVAO(null);");var Rt=We.global.def("{}"),bt=ht.def(kt,".id"),vt=ht.def(Rt,"[",bt,"]");ht(We.cond(vt).then(vt,".call(this,a0);").else(vt,"=",Rt,"[",bt,"]=",We.link(function(St){return Ea(Ga,We,Ne,St,1)}),"(",kt,");",vt,".call(this,a0);"))}Object.keys(Ne.state).length>0&&ht(We.shared.current,".dirty=true;")}function ws(We,Ne,ht,kt){We.batchId="a1",lo(We,Ne);function Rt(){return!0}es(We,Ne,ht,kt.attributes,Rt),ii(We,Ne,ht,kt.uniforms,Rt),Jr(We,Ne,Ne,ht)}function Dc(We,Ne,ht,kt){lo(We,Ne);var Rt=ht.contextDep,bt=Ne.def(),vt="a0",St="a1",$e=Ne.def();We.shared.props=$e,We.batchId=bt;var ft=We.scope(),ze=We.scope();Ne(ft.entry,"for(",bt,"=0;",bt,"<",St,";++",bt,"){",$e,"=",vt,"[",bt,"];",ze,"}",ft.exit);function xt(jr){return jr.contextDep&&Rt||jr.propDep}function _t(jr){return!xt(jr)}if(ht.needsContext&&no(We,ze,ht.context),ht.needsFramebuffer&&vo(We,ze,ht.framebuffer),Hi(We,ze,ht.state,xt),ht.profile&&xt(ht.profile)&&Ca(We,ze,ht,!1,!0),kt)ht.useVAO?ht.drawVAO?xt(ht.drawVAO)?ze(We.shared.vao,".setVAO(",ht.drawVAO.append(We,ze),");"):ft(We.shared.vao,".setVAO(",ht.drawVAO.append(We,ft),");"):ft(We.shared.vao,".setVAO(",We.shared.vao,".targetVAO);"):(ft(We.shared.vao,".setVAO(null);"),es(We,ft,ht,kt.attributes,_t),es(We,ze,ht,kt.attributes,xt)),ii(We,ft,ht,kt.uniforms,_t),ii(We,ze,ht,kt.uniforms,xt),Jr(We,ft,ze,ht);else{var yn=We.global.def("{}"),Cn=ht.shader.progVar.append(We,ze),cn=ze.def(Cn,".id"),Zn=ze.def(yn,"[",cn,"]");ze(We.shared.gl,".useProgram(",Cn,".program);","if(!",Zn,"){",Zn,"=",yn,"[",cn,"]=",We.link(function(jr){return Ea(ws,We,ht,jr,2)}),"(",Cn,");}",Zn,".call(this,a0[",bt,"],",bt,");")}}function et(We,Ne){var ht=We.proc("batch",2);We.batchId="0",lo(We,ht);var kt=!1,Rt=!0;Object.keys(Ne.context).forEach(function(yn){kt=kt||Ne.context[yn].propDep}),kt||(no(We,ht,Ne.context),Rt=!1);var bt=Ne.framebuffer,vt=!1;bt?(bt.propDep?kt=vt=!0:bt.contextDep&&kt&&(vt=!0),vt||vo(We,ht,bt)):vo(We,ht,null),Ne.state.viewport&&Ne.state.viewport.propDep&&(kt=!0);function St(yn){return yn.contextDep&&kt||yn.propDep}Bi(We,ht,Ne),Hi(We,ht,Ne.state,function(yn){return!St(yn)}),(!Ne.profile||!St(Ne.profile))&&Ca(We,ht,Ne,!1,"a1"),Ne.contextDep=kt,Ne.needsContext=Rt,Ne.needsFramebuffer=vt;var $e=Ne.shader.progVar;if($e.contextDep&&kt||$e.propDep)Dc(We,ht,Ne,null);else{var ft=$e.append(We,ht);if(ht(We.shared.gl,".useProgram(",ft,".program);"),Ne.shader.program)Dc(We,ht,Ne,Ne.shader.program);else{ht(We.shared.vao,".setVAO(null);");var ze=We.global.def("{}"),xt=ht.def(ft,".id"),_t=ht.def(ze,"[",xt,"]");ht(We.cond(_t).then(_t,".call(this,a0,a1);").else(_t,"=",ze,"[",xt,"]=",We.link(function(yn){return Ea(Dc,We,Ne,yn,2)}),"(",ft,");",_t,".call(this,a0,a1);"))}}Object.keys(Ne.state).length>0&&ht(We.shared.current,".dirty=true;")}function Qt(We,Ne){var ht=We.proc("scope",3);We.batchId="a2";var kt=We.shared,Rt=kt.current;no(We,ht,Ne.context),Ne.framebuffer&&Ne.framebuffer.append(We,ht),mv(Object.keys(Ne.state)).forEach(function(vt){var St=Ne.state[vt],$e=St.append(We,ht);Fr($e)?$e.forEach(function(ft,ze){ht.set(We.next[vt],"["+ze+"]",ft)}):ht.set(kt.next,"."+vt,$e)}),Ca(We,ht,Ne,!0,!0),[Kl,Ec,ml,pf,Yl].forEach(function(vt){var St=Ne.draw[vt];!St||ht.set(kt.draw,"."+vt,""+St.append(We,ht))}),Object.keys(Ne.uniforms).forEach(function(vt){var St=Ne.uniforms[vt].append(We,ht);Array.isArray(St)&&(St="["+St.join()+"]"),ht.set(kt.uniforms,"["+ke.id(vt)+"]",St)}),Object.keys(Ne.attributes).forEach(function(vt){var St=Ne.attributes[vt].append(We,ht),$e=We.scopeAttrib(vt);Object.keys(new Xt).forEach(function(ft){ht.set($e,"."+ft,St[ft])})}),Ne.scopeVAO&&ht.set(kt.vao,".targetVAO",Ne.scopeVAO.append(We,ht));function bt(vt){var St=Ne.shader[vt];St&&ht.set(kt.shader,"."+vt,St.append(We,ht))}bt(nd),bt(rd),Object.keys(Ne.state).length>0&&(ht(Rt,".dirty=true;"),ht.exit(Rt,".dirty=true;")),ht("a1(",We.shared.context,",a0,",We.batchId,");")}function Gt(We){if(!(typeof We!="object"||Fr(We))){for(var Ne=Object.keys(We),ht=0;ht<Ne.length;++ht)if(ar.isDynamic(We[Ne[ht]]))return!0;return!1}}function Or(We,Ne,ht){var kt=Ne.static[ht];if(!kt||!Gt(kt))return;var Rt=We.global,bt=Object.keys(kt),vt=!1,St=!1,$e=!1,ft=We.global.def("{}");bt.forEach(function(xt){var _t=kt[xt];if(ar.isDynamic(_t)){typeof _t=="function"&&(_t=kt[xt]=ar.unbox(_t));var yn=ls(_t,null);vt=vt||yn.thisDep,$e=$e||yn.propDep,St=St||yn.contextDep}else{switch(Rt(ft,".",xt,"="),typeof _t){case"number":Rt(_t);break;case"string":Rt('"',_t,'"');break;case"object":Array.isArray(_t)&&Rt("[",_t.join(),"]");break;default:Rt(We.link(_t));break}Rt(";")}});function ze(xt,_t){bt.forEach(function(yn){var Cn=kt[yn];if(!!ar.isDynamic(Cn)){var cn=xt.invoke(_t,Cn);_t(ft,".",yn,"=",cn,";")}})}Ne.dynamic[ht]=new ar.DynamicVariable(Zf,{thisDep:vt,contextDep:St,propDep:$e,ref:ft,append:ze}),delete Ne.static[ht]}function Oa(We,Ne,ht,kt,Rt){var bt=Qr();bt.stats=bt.link(Rt),Object.keys(Ne.static).forEach(function(St){Or(bt,Ne,St)}),ad.forEach(function(St){Or(bt,We,St)});var vt=Ii(We,Ne,ht,kt,bt);return Go(bt,vt),Qt(bt,vt),et(bt,vt),m(bt.compile(),{destroy:function(){vt.shader.program.destroy()}})}return{next:Mr,current:gn,procs:function(){var We=Qr(),Ne=We.proc("poll"),ht=We.proc("refresh"),kt=We.block();Ne(kt),ht(kt);var Rt=We.shared,bt=Rt.gl,vt=Rt.next,St=Rt.current;kt(St,".dirty=false;"),vo(We,Ne),vo(We,ht,null,!0);var $e;Wn&&($e=We.link(Wn)),ct.oes_vertex_array_object&&ht(We.link(ct.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ft=0;ft<Bt.maxAttributes;++ft){var ze=ht.def(Rt.attributes,"[",ft,"]"),xt=We.cond(ze,".buffer");xt.then(bt,".enableVertexAttribArray(",ft,");",bt,".bindBuffer(",wc,",",ze,".buffer.buffer);",bt,".vertexAttribPointer(",ft,",",ze,".size,",ze,".type,",ze,".normalized,",ze,".stride,",ze,".offset);").else(bt,".disableVertexAttribArray(",ft,");",bt,".vertexAttrib4f(",ft,",",ze,".x,",ze,".y,",ze,".z,",ze,".w);",ze,".buffer=null;"),ht(xt),Wn&&ht($e,".vertexAttribDivisorANGLE(",ft,",",ze,".divisor);")}return ht(We.shared.vao,".currentVAO=null;",We.shared.vao,".setVAO(",We.shared.vao,".targetVAO);"),Object.keys(jn).forEach(function(_t){var yn=jn[_t],Cn=kt.def(vt,".",_t),cn=We.block();cn("if(",Cn,"){",bt,".enable(",yn,")}else{",bt,".disable(",yn,")}",St,".",_t,"=",Cn,";"),ht(cn),Ne("if(",Cn,"!==",St,".",_t,"){",cn,"}")}),Object.keys(_n).forEach(function(_t){var yn=_n[_t],Cn=gn[_t],cn,Zn,jr=We.block();if(jr(bt,".",yn,"("),Fr(Cn)){var xa=Cn.length;cn=We.global.def(vt,".",_t),Zn=We.global.def(St,".",_t),jr(Aa(xa,function(Ar){return cn+"["+Ar+"]"}),");",Aa(xa,function(Ar){return Zn+"["+Ar+"]="+cn+"["+Ar+"];"}).join("")),Ne("if(",Aa(xa,function(Ar){return cn+"["+Ar+"]!=="+Zn+"["+Ar+"]"}).join("||"),"){",jr,"}")}else cn=kt.def(vt,".",_t),Zn=kt.def(St,".",_t),jr(cn,");",St,".",_t,"=",cn,";"),Ne("if(",cn,"!==",Zn,"){",jr,"}");ht(jr)}),We.compile()}(),compile:Oa}}function Of(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Tg=34918,vd=34919,rh=35007,ah=function(ke,ct){if(!ct.ext_disjoint_timer_query)return null;var Bt=[];function Dt(){return Bt.pop()||ct.ext_disjoint_timer_query.createQueryEXT()}function sn(br){Bt.push(br)}var Wt=[];function kn(br){var gn=Dt();ct.ext_disjoint_timer_query.beginQueryEXT(rh,gn),Wt.push(gn),Yn(Wt.length-1,Wt.length,br)}function ir(){ct.ext_disjoint_timer_query.endQueryEXT(rh)}function Vn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Hn=[];function Gn(){return Hn.pop()||new Vn}function pr(br){Hn.push(br)}var fr=[];function Yn(br,gn,Mr){var Dn=Gn();Dn.startQueryIndex=br,Dn.endQueryIndex=gn,Dn.sum=0,Dn.stats=Mr,fr.push(Dn)}var Xt=[],Ht=[];function Wn(){var br,gn,Mr=Wt.length;if(Mr!==0){Ht.length=Math.max(Ht.length,Mr+1),Xt.length=Math.max(Xt.length,Mr+1),Xt[0]=0,Ht[0]=0;var Dn=0;for(br=0,gn=0;gn<Wt.length;++gn){var jn=Wt[gn];ct.ext_disjoint_timer_query.getQueryObjectEXT(jn,vd)?(Dn+=ct.ext_disjoint_timer_query.getQueryObjectEXT(jn,Tg),sn(jn)):Wt[br++]=jn,Xt[gn+1]=Dn,Ht[gn+1]=br}for(Wt.length=br,br=0,gn=0;gn<fr.length;++gn){var _n=fr[gn],Xn=_n.startQueryIndex,_r=_n.endQueryIndex;_n.sum+=Xt[_r]-Xt[Xn];var oa=Ht[Xn],dr=Ht[_r];dr===oa?(_n.stats.gpuTime+=_n.sum/1e6,pr(_n)):(_n.startQueryIndex=oa,_n.endQueryIndex=dr,fr[br++]=_n)}fr.length=br}}return{beginQuery:kn,endQuery:ir,pushScopeStats:Yn,update:Wn,getNumPendingQueries:function(){return Wt.length},clear:function(){Bt.push.apply(Bt,Wt);for(var gn=0;gn<Bt.length;gn++)ct.ext_disjoint_timer_query.deleteQueryEXT(Bt[gn]);Wt.length=0,Bt.length=0},restore:function(){Wt.length=0,Bt.length=0}}},kc=16384,Mg=256,Fi=1024,Ag=34962,wf="webglcontextlost",Pg="webglcontextrestored",yv=1,gd=2,mm=3;function Js(me,ke){for(var ct=0;ct<me.length;++ct)if(me[ct]===ke)return ct;return-1}function bv(me){var ke=ji(me);if(!ke)return null;var ct=ke.gl,Bt=ct.getContextAttributes(),Dt=ct.isContextLost(),sn=Li(ct,ke);if(!sn)return null;var Wt=kr(),kn=Of(),ir=sn.extensions,Vn=ah(ct,ir),Hn=yr(),Gn=ct.drawingBufferWidth,pr=ct.drawingBufferHeight,fr={tick:0,time:0,viewportWidth:Gn,viewportHeight:pr,framebufferWidth:Gn,framebufferHeight:pr,drawingBufferWidth:Gn,drawingBufferHeight:pr,pixelRatio:ke.pixelRatio},Yn={},Xt={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ht=wr(ct,ir),Wn=zf(ct,kn,ke,gn),br=Mu(ct,ir,Ht,kn,Wn);function gn(Jr){return br.destroyBuffer(Jr)}var Mr=wn(ct,ir,Wn,kn),Dn=um(ct,Wt,kn,ke),jn=Xp(ct,ir,Ht,function(){_r.procs.poll()},fr,kn,ke),_n=Fd(ct,ir,Ht,kn,ke),Xn=im(ct,ir,Ht,jn,_n,kn),_r=nh(ct,Wt,ir,Ht,Wn,Mr,jn,Xn,Yn,br,Dn,Xt,fr,Vn,ke),oa=Ud(ct,Xn,_r.procs.poll,fr,Bt,ir,Ht),dr=_r.next,qn=ct.canvas,Sn=[],Qr=[],Ta=[],Tr=[ke.onDestroy],Pa=null;function sa(){if(Sn.length===0){Vn&&Vn.update(),Pa=null;return}Pa=mr.next(sa),Hi();for(var Jr=Sn.length-1;Jr>=0;--Jr){var Ea=Sn[Jr];Ea&&Ea(fr,null,0)}ct.flush(),Vn&&Vn.update()}function Ma(){!Pa&&Sn.length>0&&(Pa=mr.next(sa))}function Ka(){Pa&&(mr.cancel(sa),Pa=null)}function to(Jr){Jr.preventDefault(),Dt=!0,Ka(),Qr.forEach(function(Ea){Ea()})}function yo(Jr){ct.getError(),Dt=!1,sn.restore(),Dn.restore(),Wn.restore(),jn.restore(),_n.restore(),Xn.restore(),br.restore(),Vn&&Vn.restore(),_r.procs.refresh(),Ma(),Ta.forEach(function(Ea){Ea()})}qn&&(qn.addEventListener(wf,to,!1),qn.addEventListener(Pg,yo,!1));function ka(){Sn.length=0,Ka(),qn&&(qn.removeEventListener(wf,to),qn.removeEventListener(Pg,yo)),Dn.clear(),Xn.clear(),_n.clear(),jn.clear(),Mr.clear(),Wn.clear(),br.clear(),Vn&&Vn.clear(),Tr.forEach(function(Jr){Jr()})}function uo(Jr){T(!!Jr,"invalid args to regl({...})"),T.type(Jr,"object","invalid args to regl({...})");function Ea(Rt){var bt=m({},Rt);delete bt.uniforms,delete bt.attributes,delete bt.context,delete bt.vao,"stencil"in bt&&bt.stencil.op&&(bt.stencil.opBack=bt.stencil.opFront=bt.stencil.op,delete bt.stencil.op);function vt(St){if(St in bt){var $e=bt[St];delete bt[St],Object.keys($e).forEach(function(ft){bt[St+"."+ft]=$e[ft]})}}return vt("blend"),vt("depth"),vt("cull"),vt("stencil"),vt("polygonOffset"),vt("scissor"),vt("sample"),"vao"in Rt&&(bt.vao=Rt.vao),bt}function Ga(Rt,bt){var vt={},St={};return Object.keys(Rt).forEach(function($e){var ft=Rt[$e];if(ar.isDynamic(ft)){St[$e]=ar.unbox(ft,$e);return}else if(bt&&Array.isArray(ft)){for(var ze=0;ze<ft.length;++ze)if(ar.isDynamic(ft[ze])){St[$e]=ar.unbox(ft,$e);return}}vt[$e]=ft}),{dynamic:St,static:vt}}var Go=Ga(Jr.context||{},!0),ws=Ga(Jr.uniforms||{},!0),Dc=Ga(Jr.attributes||{},!1),et=Ga(Ea(Jr),!1),Qt={gpuTime:0,cpuTime:0,count:0},Gt=_r.compile(et,Dc,ws,Go,Qt),Or=Gt.draw,Oa=Gt.batch,We=Gt.scope,Ne=[];function ht(Rt){for(;Ne.length<Rt;)Ne.push(null);return Ne}function kt(Rt,bt){var vt;if(Dt&&T.raise("context lost"),typeof Rt=="function")return We.call(this,null,Rt,0);if(typeof bt=="function")if(typeof Rt=="number")for(vt=0;vt<Rt;++vt)We.call(this,null,bt,vt);else if(Array.isArray(Rt))for(vt=0;vt<Rt.length;++vt)We.call(this,Rt[vt],bt,vt);else return We.call(this,Rt,bt,0);else if(typeof Rt=="number"){if(Rt>0)return Oa.call(this,ht(Rt|0),Rt|0)}else if(Array.isArray(Rt)){if(Rt.length)return Oa.call(this,Rt,Rt.length)}else return Or.call(this,Rt)}return m(kt,{stats:Qt,destroy:function(){Gt.destroy()}})}var Di=Xn.setFBO=uo({framebuffer:ar.define.call(null,yv,"framebuffer")});function Ii(Jr,Ea){var Ga=0;_r.procs.poll();var Go=Ea.color;Go&&(ct.clearColor(+Go[0]||0,+Go[1]||0,+Go[2]||0,+Go[3]||0),Ga|=kc),"depth"in Ea&&(ct.clearDepth(+Ea.depth),Ga|=Mg),"stencil"in Ea&&(ct.clearStencil(Ea.stencil|0),Ga|=Fi),T(!!Ga,"called regl.clear with no buffer specified"),ct.clear(Ga)}function no(Jr){if(T(typeof Jr=="object"&&Jr,"regl.clear() takes an object as input"),"framebuffer"in Jr)if(Jr.framebuffer&&Jr.framebuffer_reglType==="framebufferCube")for(var Ea=0;Ea<6;++Ea)Di(m({framebuffer:Jr.framebuffer.faces[Ea]},Jr),Ii);else Di(Jr,Ii);else Ii(null,Jr)}function vo(Jr){T.type(Jr,"function","regl.frame() callback must be a function"),Sn.push(Jr);function Ea(){var Ga=Js(Sn,Jr);T(Ga>=0,"cannot cancel a frame twice");function Go(){var ws=Js(Sn,Go);Sn[ws]=Sn[Sn.length-1],Sn.length-=1,Sn.length<=0&&Ka()}Sn[Ga]=Go}return Ma(),{cancel:Ea}}function Bi(){var Jr=dr.viewport,Ea=dr.scissor_box;Jr[0]=Jr[1]=Ea[0]=Ea[1]=0,fr.viewportWidth=fr.framebufferWidth=fr.drawingBufferWidth=Jr[2]=Ea[2]=ct.drawingBufferWidth,fr.viewportHeight=fr.framebufferHeight=fr.drawingBufferHeight=Jr[3]=Ea[3]=ct.drawingBufferHeight}function Hi(){fr.tick+=1,fr.time=Ca(),Bi(),_r.procs.poll()}function lo(){jn.refresh(),Bi(),_r.procs.refresh(),Vn&&Vn.update()}function Ca(){return(yr()-Hn)/1e3}lo();function es(Jr,Ea){T.type(Ea,"function","listener callback must be a function");var Ga;switch(Jr){case"frame":return vo(Ea);case"lost":Ga=Qr;break;case"restore":Ga=Ta;break;case"destroy":Ga=Tr;break;default:T.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ga.push(Ea),{cancel:function(){for(var ws=0;ws<Ga.length;++ws)if(Ga[ws]===Ea){Ga[ws]=Ga[Ga.length-1],Ga.pop();return}}}}var ii=m(uo,{clear:no,prop:ar.define.bind(null,yv),context:ar.define.bind(null,gd),this:ar.define.bind(null,mm),draw:uo({}),buffer:function(Ea){return Wn.create(Ea,Ag,!1,!1)},elements:function(Ea){return Mr.create(Ea,!1)},texture:jn.create2D,cube:jn.createCube,renderbuffer:_n.create,framebuffer:Xn.create,framebufferCube:Xn.createCube,vao:br.createVAO,attributes:Bt,frame:vo,on:es,limits:Ht,hasExtension:function(Ea){return Ht.extensions.indexOf(Ea.toLowerCase())>=0},read:oa,destroy:ka,_gl:ct,_refresh:lo,poll:function(){Hi(),Vn&&Vn.update()},now:Ca,stats:kn});return ke.onDone(null,ii),ii}return bv})},fsL8:function(le,P,h){var I=h("cDf5").default;function m(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */le.exports=m=function(){return _},le.exports.__esModule=!0,le.exports.default=le.exports;var _={},M=Object.prototype,A=M.hasOwnProperty,G=Object.defineProperty||function(D,Ue,Ct){D[Ue]=Ct.value},R=typeof Symbol=="function"?Symbol:{},X=R.iterator||"@@iterator",W=R.asyncIterator||"@@asyncIterator",Y=R.toStringTag||"@@toStringTag";function K(D,Ue,Ct){return Object.defineProperty(D,Ue,{value:Ct,enumerable:!0,configurable:!0,writable:!0}),D[Ue]}try{K({},"")}catch(D){K=function(Ct,ut,Nt){return Ct[ut]=Nt}}function ne(D,Ue,Ct,ut){var Nt=Ue&&Ue.prototype instanceof ce?Ue:ce,Kt=Object.create(Nt.prototype),Je=new Te(ut||[]);return G(Kt,"_invoke",{value:pe(D,Ct,Je)}),Kt}function ae(D,Ue,Ct){try{return{type:"normal",arg:D.call(Ue,Ct)}}catch(ut){return{type:"throw",arg:ut}}}_.wrap=ne;var te={};function ce(){}function ee(){}function H(){}var se={};K(se,X,function(){return this});var re=Object.getPrototypeOf,q=re&&re(re(we([])));q&&q!==M&&A.call(q,X)&&(se=q);var ye=H.prototype=ce.prototype=Object.create(se);function ue(D){["next","throw","return"].forEach(function(Ue){K(D,Ue,function(Ct){return this._invoke(Ue,Ct)})})}function ve(D,Ue){function Ct(Nt,Kt,Je,Vt){var Be=ae(D[Nt],D,Kt);if(Be.type!=="throw"){var ie=Be.arg,un=ie.value;return un&&I(un)=="object"&&A.call(un,"__await")?Ue.resolve(un.__await).then(function(rn){Ct("next",rn,Je,Vt)},function(rn){Ct("throw",rn,Je,Vt)}):Ue.resolve(un).then(function(rn){ie.value=rn,Je(ie)},function(rn){return Ct("throw",rn,Je,Vt)})}Vt(Be.arg)}var ut;G(this,"_invoke",{value:function(Kt,Je){function Vt(){return new Ue(function(Be,ie){Ct(Kt,Je,Be,ie)})}return ut=ut?ut.then(Vt,Vt):Vt()}})}function pe(D,Ue,Ct){var ut="suspendedStart";return function(Nt,Kt){if(ut==="executing")throw new Error("Generator is already running");if(ut==="completed"){if(Nt==="throw")throw Kt;return Qe()}for(Ct.method=Nt,Ct.arg=Kt;;){var Je=Ct.delegate;if(Je){var Vt=L(Je,Ct);if(Vt){if(Vt===te)continue;return Vt}}if(Ct.method==="next")Ct.sent=Ct._sent=Ct.arg;else if(Ct.method==="throw"){if(ut==="suspendedStart")throw ut="completed",Ct.arg;Ct.dispatchException(Ct.arg)}else Ct.method==="return"&&Ct.abrupt("return",Ct.arg);ut="executing";var Be=ae(D,Ue,Ct);if(Be.type==="normal"){if(ut=Ct.done?"completed":"suspendedYield",Be.arg===te)continue;return{value:Be.arg,done:Ct.done}}Be.type==="throw"&&(ut="completed",Ct.method="throw",Ct.arg=Be.arg)}}}function L(D,Ue){var Ct=Ue.method,ut=D.iterator[Ct];if(ut===void 0)return Ue.delegate=null,Ct==="throw"&&D.iterator.return&&(Ue.method="return",Ue.arg=void 0,L(D,Ue),Ue.method==="throw")||Ct!=="return"&&(Ue.method="throw",Ue.arg=new TypeError("The iterator does not provide a '"+Ct+"' method")),te;var Nt=ae(ut,D.iterator,Ue.arg);if(Nt.type==="throw")return Ue.method="throw",Ue.arg=Nt.arg,Ue.delegate=null,te;var Kt=Nt.arg;return Kt?Kt.done?(Ue[D.resultName]=Kt.value,Ue.next=D.nextLoc,Ue.method!=="return"&&(Ue.method="next",Ue.arg=void 0),Ue.delegate=null,te):Kt:(Ue.method="throw",Ue.arg=new TypeError("iterator result is not an object"),Ue.delegate=null,te)}function ge(D){var Ue={tryLoc:D[0]};1 in D&&(Ue.catchLoc=D[1]),2 in D&&(Ue.finallyLoc=D[2],Ue.afterLoc=D[3]),this.tryEntries.push(Ue)}function _e(D){var Ue=D.completion||{};Ue.type="normal",delete Ue.arg,D.completion=Ue}function Te(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(ge,this),this.reset(!0)}function we(D){if(D){var Ue=D[X];if(Ue)return Ue.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var Ct=-1,ut=function Nt(){for(;++Ct<D.length;)if(A.call(D,Ct))return Nt.value=D[Ct],Nt.done=!1,Nt;return Nt.value=void 0,Nt.done=!0,Nt};return ut.next=ut}}return{next:Qe}}function Qe(){return{value:void 0,done:!0}}return ee.prototype=H,G(ye,"constructor",{value:H,configurable:!0}),G(H,"constructor",{value:ee,configurable:!0}),ee.displayName=K(H,Y,"GeneratorFunction"),_.isGeneratorFunction=function(D){var Ue=typeof D=="function"&&D.constructor;return!!Ue&&(Ue===ee||(Ue.displayName||Ue.name)==="GeneratorFunction")},_.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,H):(D.__proto__=H,K(D,Y,"GeneratorFunction")),D.prototype=Object.create(ye),D},_.awrap=function(D){return{__await:D}},ue(ve.prototype),K(ve.prototype,W,function(){return this}),_.AsyncIterator=ve,_.async=function(D,Ue,Ct,ut,Nt){Nt===void 0&&(Nt=Promise);var Kt=new ve(ne(D,Ue,Ct,ut),Nt);return _.isGeneratorFunction(Ue)?Kt:Kt.next().then(function(Je){return Je.done?Je.value:Kt.next()})},ue(ye),K(ye,Y,"Generator"),K(ye,X,function(){return this}),K(ye,"toString",function(){return"[object Generator]"}),_.keys=function(D){var Ue=Object(D),Ct=[];for(var ut in Ue)Ct.push(ut);return Ct.reverse(),function Nt(){for(;Ct.length;){var Kt=Ct.pop();if(Kt in Ue)return Nt.value=Kt,Nt.done=!1,Nt}return Nt.done=!0,Nt}},_.values=we,Te.prototype={constructor:Te,reset:function(Ue){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_e),!Ue)for(var Ct in this)Ct.charAt(0)==="t"&&A.call(this,Ct)&&!isNaN(+Ct.slice(1))&&(this[Ct]=void 0)},stop:function(){this.done=!0;var Ue=this.tryEntries[0].completion;if(Ue.type==="throw")throw Ue.arg;return this.rval},dispatchException:function(Ue){if(this.done)throw Ue;var Ct=this;function ut(ie,un){return Je.type="throw",Je.arg=Ue,Ct.next=ie,un&&(Ct.method="next",Ct.arg=void 0),!!un}for(var Nt=this.tryEntries.length-1;Nt>=0;--Nt){var Kt=this.tryEntries[Nt],Je=Kt.completion;if(Kt.tryLoc==="root")return ut("end");if(Kt.tryLoc<=this.prev){var Vt=A.call(Kt,"catchLoc"),Be=A.call(Kt,"finallyLoc");if(Vt&&Be){if(this.prev<Kt.catchLoc)return ut(Kt.catchLoc,!0);if(this.prev<Kt.finallyLoc)return ut(Kt.finallyLoc)}else if(Vt){if(this.prev<Kt.catchLoc)return ut(Kt.catchLoc,!0)}else{if(!Be)throw new Error("try statement without catch or finally");if(this.prev<Kt.finallyLoc)return ut(Kt.finallyLoc)}}}},abrupt:function(Ue,Ct){for(var ut=this.tryEntries.length-1;ut>=0;--ut){var Nt=this.tryEntries[ut];if(Nt.tryLoc<=this.prev&&A.call(Nt,"finallyLoc")&&this.prev<Nt.finallyLoc){var Kt=Nt;break}}Kt&&(Ue==="break"||Ue==="continue")&&Kt.tryLoc<=Ct&&Ct<=Kt.finallyLoc&&(Kt=null);var Je=Kt?Kt.completion:{};return Je.type=Ue,Je.arg=Ct,Kt?(this.method="next",this.next=Kt.finallyLoc,te):this.complete(Je)},complete:function(Ue,Ct){if(Ue.type==="throw")throw Ue.arg;return Ue.type==="break"||Ue.type==="continue"?this.next=Ue.arg:Ue.type==="return"?(this.rval=this.arg=Ue.arg,this.method="return",this.next="end"):Ue.type==="normal"&&Ct&&(this.next=Ct),te},finish:function(Ue){for(var Ct=this.tryEntries.length-1;Ct>=0;--Ct){var ut=this.tryEntries[Ct];if(ut.finallyLoc===Ue)return this.complete(ut.completion,ut.afterLoc),_e(ut),te}},catch:function(Ue){for(var Ct=this.tryEntries.length-1;Ct>=0;--Ct){var ut=this.tryEntries[Ct];if(ut.tryLoc===Ue){var Nt=ut.completion;if(Nt.type==="throw"){var Kt=Nt.arg;_e(ut)}return Kt}}throw new Error("illegal catch attempt")},delegateYield:function(Ue,Ct,ut){return this.delegate={iterator:we(Ue),resultName:Ct,nextLoc:ut},this.method==="next"&&(this.arg=void 0),te}},_}le.exports=m,le.exports.__esModule=!0,le.exports.default=le.exports},g1CP:function(le,P,h){"use strict";h.d(P,"a",function(){return D});var I=h("o0o1"),m=h.n(I),_=h("yXPU"),M=h.n(_),A=h("yG8O"),G=h.n(A),R=h("lwsE"),X=h.n(R),W=h("U+yc"),Y=h.n(W),K=h("1ABj"),ne=h.n(K),ae=h("4cb6"),te=h.n(ae),ce=h("+uE7"),ee=h("k6w6"),H=h("94HZ"),se,re,q,ye,ue,ve,pe,L,ge,_e=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Te=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,we=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,Qe=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,D=(se=Object(ae.injectable)(),re=Object(ae.inject)(ce.a.RenderEngine),q=Object(ae.inject)(ce.a.ResourcePool),se(ye=(ue=(ge=L=function Ue(){var Ct=this;X()(this,Ue),G()(this,"engine",ve,this),G()(this,"resourcePool",pe,this),this.model=void 0,this.setup=function(ut,Nt,Kt){var Je=ut.getPass(H.a.IDENTIFIER);if(Je){var Vt=ut.createRenderTarget(Nt,"render to screen",{width:1,height:1});Kt.data={input:Nt.read(Je.data.output),output:Nt.write(ut,Vt)}}},this.execute=function(){var ut=M()(m.a.mark(function Nt(Kt,Je){var Vt,Be,ie,un,rn,rr,Pt;return m.a.wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:if(Vt=Ct.engine,Be=Vt.createModel,ie=Vt.createAttribute,un=Vt.createBuffer,Ct.model){ur.next=6;break}return ur.next=4,Be({vs:Ct.engine.supportWebGPU?Qe:Te,fs:Ct.engine.supportWebGPU?we:_e,attributes:{a_Position:ie({buffer:un({data:[-4,-4,4,-4,0,4],type:ee.a.FLOAT}),size:2,arrayStride:2*4,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:rn=ur.sent,Ct.model=rn;case 6:rr=Kt.getResourceNode(Je.data.input),Pt=Ct.resourcePool.getOrCreateResource(rr.resource),Ct.engine.useFramebuffer(null,function(){Ct.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),Ct.model.draw({uniforms:{u_Texture:Pt}})});case 9:case"end":return ur.stop()}},Nt)}));return function(Nt,Kt){return ut.apply(this,arguments)}}(),this.tearDown=function(){Ct.model=void 0}},L.IDENTIFIER="Copy Pass",ge),ve=Y()(ue.prototype,"engine",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=Y()(ue.prototype,"resourcePool",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue))||ye)},ga3A:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="SaveOutlined";var R=P.a=m.forwardRef(G)},gzZq:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingToSyntax=void 0;var I=h("MON2"),m=h("FV85"),_=h("D9lx"),M=h("LKzl"),A=function(){function G(R){this._binding=R}return G.prototype.to=function(R){return this._binding.type=m.BindingTypeEnum.Instance,this._binding.implementationType=R,new _.BindingInWhenOnSyntax(this._binding)},G.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+I.INVALID_TO_SELF_VALUE);var R=this._binding.serviceIdentifier;return this.to(R)},G.prototype.toConstantValue=function(R){return this._binding.type=m.BindingTypeEnum.ConstantValue,this._binding.cache=R,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=m.BindingScopeEnum.Singleton,new M.BindingWhenOnSyntax(this._binding)},G.prototype.toDynamicValue=function(R){return this._binding.type=m.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=R,this._binding.implementationType=null,new _.BindingInWhenOnSyntax(this._binding)},G.prototype.toConstructor=function(R){return this._binding.type=m.BindingTypeEnum.Constructor,this._binding.implementationType=R,this._binding.scope=m.BindingScopeEnum.Singleton,new M.BindingWhenOnSyntax(this._binding)},G.prototype.toFactory=function(R){return this._binding.type=m.BindingTypeEnum.Factory,this._binding.factory=R,this._binding.scope=m.BindingScopeEnum.Singleton,new M.BindingWhenOnSyntax(this._binding)},G.prototype.toFunction=function(R){if(typeof R!="function")throw new Error(I.INVALID_FUNCTION_BINDING);var X=this.toConstantValue(R);return this._binding.type=m.BindingTypeEnum.Function,this._binding.scope=m.BindingScopeEnum.Singleton,X},G.prototype.toAutoFactory=function(R){return this._binding.type=m.BindingTypeEnum.Factory,this._binding.factory=function(X){var W=function(){return X.container.get(R)};return W},this._binding.scope=m.BindingScopeEnum.Singleton,new M.BindingWhenOnSyntax(this._binding)},G.prototype.toProvider=function(R){return this._binding.type=m.BindingTypeEnum.Provider,this._binding.provider=R,this._binding.scope=m.BindingScopeEnum.Singleton,new M.BindingWhenOnSyntax(this._binding)},G.prototype.toService=function(R){this.toDynamicValue(function(X){return X.container.get(R)})},G}();P.BindingToSyntax=A},h7MG:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.getBindingDictionary=P.createMockRequest=P.plan=void 0;var I=h("doU7"),m=h("MON2"),_=h("FV85"),M=h("xfSm"),A=h("qK8v"),G=h("ujMp"),R=h("oy+k"),X=h("GXnB"),W=h("yMAV"),Y=h("fbrv"),K=h("xiII"),ne=h("dX1H");function ae(ye){return ye._bindingDictionary}P.getBindingDictionary=ae;function te(ye,ue,ve,pe,L,ge){var _e=ye?M.MULTI_INJECT_TAG:M.INJECT_TAG,Te=new X.Metadata(_e,ve),we=new ne.Target(ue,pe,ve,Te);if(L!==void 0){var Qe=new X.Metadata(L,ge);we.metadata.push(Qe)}return we}function ce(ye,ue,ve,pe,L){var ge=se(ve.container,L.serviceIdentifier),_e=[];return ge.length===I.BindingCount.NoBindingsAvailable&&ve.container.options.autoBindInjectable&&typeof L.serviceIdentifier=="function"&&ye.getConstructorMetadata(L.serviceIdentifier).compilerGeneratedMetadata&&(ve.container.bind(L.serviceIdentifier).toSelf(),ge=se(ve.container,L.serviceIdentifier)),ue?_e=ge:_e=ge.filter(function(Te){var we=new K.Request(Te.serviceIdentifier,ve,pe,Te,L);return Te.constraint(we)}),ee(L.serviceIdentifier,_e,L,ve.container),_e}function ee(ye,ue,ve,pe){switch(ue.length){case I.BindingCount.NoBindingsAvailable:if(ve.isOptional())return ue;var L=G.getServiceIdentifierAsString(ye),ge=m.NOT_REGISTERED;throw ge+=G.listMetadataForTarget(L,ve),ge+=G.listRegisteredBindingsForServiceIdentifier(pe,L,se),new Error(ge);case I.BindingCount.OnlyOneBindingAvailable:if(!ve.isArray())return ue;case I.BindingCount.MultipleBindingsAvailable:default:if(ve.isArray())return ue;var L=G.getServiceIdentifierAsString(ye),ge=m.AMBIGUOUS_MATCH+" "+L;throw ge+=G.listRegisteredBindingsForServiceIdentifier(pe,L,se),new Error(ge)}}function H(ye,ue,ve,pe,L,ge){var _e,Te;if(L===null){_e=ce(ye,ue,pe,null,ge),Te=new K.Request(ve,pe,null,_e,ge);var we=new W.Plan(pe,Te);pe.addPlan(we)}else _e=ce(ye,ue,pe,L,ge),Te=L.addChildRequest(ge.serviceIdentifier,_e,ge);_e.forEach(function(Qe){var D=null;if(ge.isArray())D=Te.addChildRequest(Qe.serviceIdentifier,Qe,ge);else{if(Qe.cache)return;D=Te}if(Qe.type===_.BindingTypeEnum.Instance&&Qe.implementationType!==null){var Ue=Y.getDependencies(ye,Qe.implementationType);if(!pe.container.options.skipBaseClassChecks){var Ct=Y.getBaseClassDependencyCount(ye,Qe.implementationType);if(Ue.length<Ct){var ut=m.ARGUMENTS_LENGTH_MISMATCH(Y.getFunctionName(Qe.implementationType));throw new Error(ut)}}Ue.forEach(function(Nt){H(ye,!1,Nt.serviceIdentifier,pe,D,Nt)})}})}function se(ye,ue){var ve=[],pe=ae(ye);return pe.hasKey(ue)?ve=pe.get(ue):ye.parent!==null&&(ve=se(ye.parent,ue)),ve}function re(ye,ue,ve,pe,L,ge,_e,Te){Te===void 0&&(Te=!1);var we=new R.Context(ue),Qe=te(ve,pe,L,"",ge,_e);try{return H(ye,Te,L,we,null,Qe),we}catch(D){throw A.isStackOverflowExeption(D)&&we.plan&&G.circularDependencyToException(we.plan.rootRequest),D}}P.plan=re;function q(ye,ue,ve,pe){var L=new ne.Target(_.TargetTypeEnum.Variable,"",ue,new X.Metadata(ve,pe)),ge=new R.Context(ye),_e=new K.Request(ue,ge,null,[],L);return _e}P.createMockRequest=q},iGDq:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.GithubSwatch=void 0;var I=h("q1tI"),m=G(I),_=h("/FUP"),M=G(_),A=h("TM95");function G(X){return X&&X.__esModule?X:{default:X}}var R=P.GithubSwatch=function(W){var Y=W.hover,K=W.color,ne=W.onClick,ae=W.onSwatchHover,te={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},ce=(0,M.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:te}},{hover:Y});return m.default.createElement("div",{style:ce.swatch},m.default.createElement(A.Swatch,{color:K,onClick:ne,onHover:ae,focusStyle:te}))};P.default=(0,_.handleHover)(R)},iceA:function(le,P,h){"use strict";function I(m,_){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},imBb:function(le,P,h){var I;(function(m,_,M){if(!m)return;for(var A={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},G={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},R={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},X={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},W,Y=1;Y<20;++Y)A[111+Y]="f"+Y;for(Y=0;Y<=9;++Y)A[Y+96]=Y.toString();function K(pe,L,ge){if(pe.addEventListener){pe.addEventListener(L,ge,!1);return}pe.attachEvent("on"+L,ge)}function ne(pe){if(pe.type=="keypress"){var L=String.fromCharCode(pe.which);return pe.shiftKey||(L=L.toLowerCase()),L}return A[pe.which]?A[pe.which]:G[pe.which]?G[pe.which]:String.fromCharCode(pe.which).toLowerCase()}function ae(pe,L){return pe.sort().join(",")===L.sort().join(",")}function te(pe){var L=[];return pe.shiftKey&&L.push("shift"),pe.altKey&&L.push("alt"),pe.ctrlKey&&L.push("ctrl"),pe.metaKey&&L.push("meta"),L}function ce(pe){if(pe.preventDefault){pe.preventDefault();return}pe.returnValue=!1}function ee(pe){if(pe.stopPropagation){pe.stopPropagation();return}pe.cancelBubble=!0}function H(pe){return pe=="shift"||pe=="ctrl"||pe=="alt"||pe=="meta"}function se(){if(!W){W={};for(var pe in A)pe>95&&pe<112||A.hasOwnProperty(pe)&&(W[A[pe]]=pe)}return W}function re(pe,L,ge){return ge||(ge=se()[pe]?"keydown":"keypress"),ge=="keypress"&&L.length&&(ge="keydown"),ge}function q(pe){return pe==="+"?["+"]:(pe=pe.replace(/\+{2}/g,"+plus"),pe.split("+"))}function ye(pe,L){var ge,_e,Te,we=[];for(ge=q(pe),Te=0;Te<ge.length;++Te)_e=ge[Te],X[_e]&&(_e=X[_e]),L&&L!="keypress"&&R[_e]&&(_e=R[_e],we.push("shift")),H(_e)&&we.push(_e);return L=re(_e,we,L),{key:_e,modifiers:we,action:L}}function ue(pe,L){return pe===null||pe===_?!1:pe===L?!0:ue(pe.parentNode,L)}function ve(pe){var L=this;if(pe=pe||_,!(L instanceof ve))return new ve(pe);L.target=pe,L._callbacks={},L._directMap={};var ge={},_e,Te=!1,we=!1,Qe=!1;function D(Vt){Vt=Vt||{};var Be=!1,ie;for(ie in ge){if(Vt[ie]){Be=!0;continue}ge[ie]=0}Be||(Qe=!1)}function Ue(Vt,Be,ie,un,rn,rr){var Pt,Tn,ur=[],Jt=ie.type;if(!L._callbacks[Vt])return[];for(Jt=="keyup"&&H(Vt)&&(Be=[Vt]),Pt=0;Pt<L._callbacks[Vt].length;++Pt)if(Tn=L._callbacks[Vt][Pt],!(!un&&Tn.seq&&ge[Tn.seq]!=Tn.level)&&Jt==Tn.action&&(Jt=="keypress"&&!ie.metaKey&&!ie.ctrlKey||ae(Be,Tn.modifiers))){var fn=!un&&Tn.combo==rn,Mn=un&&Tn.seq==un&&Tn.level==rr;(fn||Mn)&&L._callbacks[Vt].splice(Pt,1),ur.push(Tn)}return ur}function Ct(Vt,Be,ie,un){L.stopCallback(Be,Be.target||Be.srcElement,ie,un)||Vt(Be,ie)===!1&&(ce(Be),ee(Be))}L._handleKey=function(Vt,Be,ie){var un=Ue(Vt,Be,ie),rn,rr={},Pt=0,Tn=!1;for(rn=0;rn<un.length;++rn)un[rn].seq&&(Pt=Math.max(Pt,un[rn].level));for(rn=0;rn<un.length;++rn){if(un[rn].seq){if(un[rn].level!=Pt)continue;Tn=!0,rr[un[rn].seq]=1,Ct(un[rn].callback,ie,un[rn].combo,un[rn].seq);continue}Tn||Ct(un[rn].callback,ie,un[rn].combo)}var ur=ie.type=="keypress"&&we;ie.type==Qe&&!H(Vt)&&!ur&&D(rr),we=Tn&&ie.type=="keydown"};function ut(Vt){typeof Vt.which!="number"&&(Vt.which=Vt.keyCode);var Be=ne(Vt);if(!!Be){if(Vt.type=="keyup"&&Te===Be){Te=!1;return}L.handleKey(Be,te(Vt),Vt)}}function Nt(){clearTimeout(_e),_e=setTimeout(D,1e3)}function Kt(Vt,Be,ie,un){ge[Vt]=0;function rn(Jt){return function(){Qe=Jt,++ge[Vt],Nt()}}function rr(Jt){Ct(ie,Jt,Vt),un!=="keyup"&&(Te=ne(Jt)),setTimeout(D,10)}for(var Pt=0;Pt<Be.length;++Pt){var Tn=Pt+1===Be.length,ur=Tn?rr:rn(un||ye(Be[Pt+1]).action);Je(Be[Pt],ur,un,Vt,Pt)}}function Je(Vt,Be,ie,un,rn){L._directMap[Vt+":"+ie]=Be,Vt=Vt.replace(/\s+/g," ");var rr=Vt.split(" "),Pt;if(rr.length>1){Kt(Vt,rr,Be,ie);return}Pt=ye(Vt,ie),L._callbacks[Pt.key]=L._callbacks[Pt.key]||[],Ue(Pt.key,Pt.modifiers,{type:Pt.action},un,Vt,rn),L._callbacks[Pt.key][un?"unshift":"push"]({callback:Be,modifiers:Pt.modifiers,action:Pt.action,seq:un,level:rn,combo:Vt})}L._bindMultiple=function(Vt,Be,ie){for(var un=0;un<Vt.length;++un)Je(Vt[un],Be,ie)},K(pe,"keypress",ut),K(pe,"keydown",ut),K(pe,"keyup",ut)}ve.prototype.bind=function(pe,L,ge){var _e=this;return pe=pe instanceof Array?pe:[pe],_e._bindMultiple.call(_e,pe,L,ge),_e},ve.prototype.unbind=function(pe,L){var ge=this;return ge.bind.call(ge,pe,function(){},L)},ve.prototype.trigger=function(pe,L){var ge=this;return ge._directMap[pe+":"+L]&&ge._directMap[pe+":"+L]({},pe),ge},ve.prototype.reset=function(){var pe=this;return pe._callbacks={},pe._directMap={},pe},ve.prototype.stopCallback=function(pe,L){var ge=this;if((" "+L.className+" ").indexOf(" mousetrap ")>-1||ue(L,ge.target))return!1;if("composedPath"in pe&&typeof pe.composedPath=="function"){var _e=pe.composedPath()[0];_e!==pe.target&&(L=_e)}return L.tagName=="INPUT"||L.tagName=="SELECT"||L.tagName=="TEXTAREA"||L.isContentEditable},ve.prototype.handleKey=function(){var pe=this;return pe._handleKey.apply(pe,arguments)},ve.addKeycodes=function(pe){for(var L in pe)pe.hasOwnProperty(L)&&(A[L]=pe[L]);W=null},ve.init=function(){var pe=ve(_);for(var L in pe)L.charAt(0)!=="_"&&(ve[L]=function(ge){return function(){return pe[ge].apply(pe,arguments)}}(L))},ve.init(),m.Mousetrap=ve,le.exports&&(le.exports=ve),I=function(){return ve}.call(P,h,P,le),I!==M&&(le.exports=I)})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)},"jIg/":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.multiInject=void 0;var I=h("xfSm"),m=h("GXnB"),_=h("Ztfv");function M(A){return function(G,R,X){var W=new m.Metadata(I.MULTI_INJECT_TAG,A);typeof X=="number"?_.tagParameter(G,R,X,W):_.tagProperty(G,R,W)}}P.multiInject=M},jYx5:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.optional=void 0;var I=h("xfSm"),m=h("GXnB"),_=h("Ztfv");function M(){return function(A,G,R){var X=new m.Metadata(I.OPTIONAL_TAG,!0);typeof R=="number"?_.tagParameter(A,G,R,X):_.tagProperty(A,G,X)}}P.optional=M},japM:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.handleFocus=void 0;var I=Object.assign||function(Y){for(var K=1;K<arguments.length;K++){var ne=arguments[K];for(var ae in ne)Object.prototype.hasOwnProperty.call(ne,ae)&&(Y[ae]=ne[ae])}return Y},m=function(){function Y(K,ne){for(var ae=0;ae<ne.length;ae++){var te=ne[ae];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(K,te.key,te)}}return function(K,ne,ae){return ne&&Y(K.prototype,ne),ae&&Y(K,ae),K}}(),_=h("q1tI"),M=A(_);function A(Y){return Y&&Y.__esModule?Y:{default:Y}}function G(Y,K){if(!(Y instanceof K))throw new TypeError("Cannot call a class as a function")}function R(Y,K){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return K&&(typeof K=="object"||typeof K=="function")?K:Y}function X(Y,K){if(typeof K!="function"&&K!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof K);Y.prototype=Object.create(K&&K.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),K&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,K):Y.__proto__=K)}var W=P.handleFocus=function(K){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(ae){X(te,ae);function te(){var ce,ee,H,se;G(this,te);for(var re=arguments.length,q=Array(re),ye=0;ye<re;ye++)q[ye]=arguments[ye];return se=(ee=(H=R(this,(ce=te.__proto__||Object.getPrototypeOf(te)).call.apply(ce,[this].concat(q))),H),H.state={focus:!1},H.handleFocus=function(){return H.setState({focus:!0})},H.handleBlur=function(){return H.setState({focus:!1})},ee),R(H,se)}return m(te,[{key:"render",value:function(){return M.default.createElement(ne,{onFocus:this.handleFocus,onBlur:this.handleBlur},M.default.createElement(K,I({},this.props,this.state)))}}]),te}(M.default.Component)}},"jbM+":function(le,P,h){var I=h("R/W3");function m(_,M){var A=_==null?0:_.length;return!!A&&I(_,M,0)>-1}le.exports=m},jrDe:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="StopOutlined";var R=P.a=m.forwardRef(G)},k6w6:function(le,P,h){"use strict";h.d(P,"a",function(){return I});var I;(function(m){m[m.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",m[m.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",m[m.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",m[m.POINTS=0]="POINTS",m[m.LINES=1]="LINES",m[m.LINE_LOOP=2]="LINE_LOOP",m[m.LINE_STRIP=3]="LINE_STRIP",m[m.TRIANGLES=4]="TRIANGLES",m[m.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",m[m.TRIANGLE_FAN=6]="TRIANGLE_FAN",m[m.ZERO=0]="ZERO",m[m.ONE=1]="ONE",m[m.SRC_COLOR=768]="SRC_COLOR",m[m.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",m[m.SRC_ALPHA=770]="SRC_ALPHA",m[m.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",m[m.DST_ALPHA=772]="DST_ALPHA",m[m.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",m[m.DST_COLOR=774]="DST_COLOR",m[m.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",m[m.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",m[m.FUNC_ADD=32774]="FUNC_ADD",m[m.BLEND_EQUATION=32777]="BLEND_EQUATION",m[m.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",m[m.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",m[m.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",m[m.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",m[m.MAX_EXT=32776]="MAX_EXT",m[m.MIN_EXT=32775]="MIN_EXT",m[m.BLEND_DST_RGB=32968]="BLEND_DST_RGB",m[m.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",m[m.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",m[m.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",m[m.CONSTANT_COLOR=32769]="CONSTANT_COLOR",m[m.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",m[m.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",m[m.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",m[m.BLEND_COLOR=32773]="BLEND_COLOR",m[m.ARRAY_BUFFER=34962]="ARRAY_BUFFER",m[m.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",m[m.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",m[m.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",m[m.STREAM_DRAW=35040]="STREAM_DRAW",m[m.STATIC_DRAW=35044]="STATIC_DRAW",m[m.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",m[m.BUFFER_SIZE=34660]="BUFFER_SIZE",m[m.BUFFER_USAGE=34661]="BUFFER_USAGE",m[m.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",m[m.FRONT=1028]="FRONT",m[m.BACK=1029]="BACK",m[m.FRONT_AND_BACK=1032]="FRONT_AND_BACK",m[m.CULL_FACE=2884]="CULL_FACE",m[m.BLEND=3042]="BLEND",m[m.DITHER=3024]="DITHER",m[m.STENCIL_TEST=2960]="STENCIL_TEST",m[m.DEPTH_TEST=2929]="DEPTH_TEST",m[m.SCISSOR_TEST=3089]="SCISSOR_TEST",m[m.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",m[m.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",m[m.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",m[m.NO_ERROR=0]="NO_ERROR",m[m.INVALID_ENUM=1280]="INVALID_ENUM",m[m.INVALID_VALUE=1281]="INVALID_VALUE",m[m.INVALID_OPERATION=1282]="INVALID_OPERATION",m[m.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",m[m.CW=2304]="CW",m[m.CCW=2305]="CCW",m[m.LINE_WIDTH=2849]="LINE_WIDTH",m[m.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",m[m.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",m[m.CULL_FACE_MODE=2885]="CULL_FACE_MODE",m[m.FRONT_FACE=2886]="FRONT_FACE",m[m.DEPTH_RANGE=2928]="DEPTH_RANGE",m[m.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",m[m.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",m[m.DEPTH_FUNC=2932]="DEPTH_FUNC",m[m.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",m[m.STENCIL_FUNC=2962]="STENCIL_FUNC",m[m.STENCIL_FAIL=2964]="STENCIL_FAIL",m[m.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",m[m.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",m[m.STENCIL_REF=2967]="STENCIL_REF",m[m.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",m[m.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",m[m.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",m[m.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",m[m.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",m[m.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",m[m.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",m[m.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",m[m.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",m[m.VIEWPORT=2978]="VIEWPORT",m[m.SCISSOR_BOX=3088]="SCISSOR_BOX",m[m.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",m[m.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",m[m.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",m[m.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",m[m.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",m[m.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",m[m.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",m[m.RED_BITS=3410]="RED_BITS",m[m.GREEN_BITS=3411]="GREEN_BITS",m[m.BLUE_BITS=3412]="BLUE_BITS",m[m.ALPHA_BITS=3413]="ALPHA_BITS",m[m.DEPTH_BITS=3414]="DEPTH_BITS",m[m.STENCIL_BITS=3415]="STENCIL_BITS",m[m.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",m[m.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",m[m.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",m[m.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",m[m.SAMPLES=32937]="SAMPLES",m[m.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",m[m.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",m[m.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",m[m.DONT_CARE=4352]="DONT_CARE",m[m.FASTEST=4353]="FASTEST",m[m.NICEST=4354]="NICEST",m[m.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",m[m.BYTE=5120]="BYTE",m[m.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",m[m.SHORT=5122]="SHORT",m[m.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",m[m.INT=5124]="INT",m[m.UNSIGNED_INT=5125]="UNSIGNED_INT",m[m.FLOAT=5126]="FLOAT",m[m.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",m[m.ALPHA=6406]="ALPHA",m[m.RGB=6407]="RGB",m[m.RGBA=6408]="RGBA",m[m.LUMINANCE=6409]="LUMINANCE",m[m.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",m[m.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",m[m.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",m[m.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",m[m.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",m[m.VERTEX_SHADER=35633]="VERTEX_SHADER",m[m.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",m[m.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",m[m.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",m[m.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",m[m.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",m[m.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",m[m.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",m[m.SHADER_TYPE=35663]="SHADER_TYPE",m[m.DELETE_STATUS=35712]="DELETE_STATUS",m[m.LINK_STATUS=35714]="LINK_STATUS",m[m.VALIDATE_STATUS=35715]="VALIDATE_STATUS",m[m.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",m[m.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",m[m.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",m[m.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",m[m.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",m[m.NEVER=512]="NEVER",m[m.LESS=513]="LESS",m[m.EQUAL=514]="EQUAL",m[m.LEQUAL=515]="LEQUAL",m[m.GREATER=516]="GREATER",m[m.NOTEQUAL=517]="NOTEQUAL",m[m.GEQUAL=518]="GEQUAL",m[m.ALWAYS=519]="ALWAYS",m[m.KEEP=7680]="KEEP",m[m.REPLACE=7681]="REPLACE",m[m.INCR=7682]="INCR",m[m.DECR=7683]="DECR",m[m.INVERT=5386]="INVERT",m[m.INCR_WRAP=34055]="INCR_WRAP",m[m.DECR_WRAP=34056]="DECR_WRAP",m[m.VENDOR=7936]="VENDOR",m[m.RENDERER=7937]="RENDERER",m[m.VERSION=7938]="VERSION",m[m.NEAREST=9728]="NEAREST",m[m.LINEAR=9729]="LINEAR",m[m.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",m[m.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",m[m.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",m[m.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",m[m.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",m[m.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",m[m.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",m[m.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",m[m.TEXTURE_2D=3553]="TEXTURE_2D",m[m.TEXTURE=5890]="TEXTURE",m[m.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",m[m.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",m[m.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",m[m.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",m[m.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",m[m.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",m[m.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",m[m.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",m[m.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",m[m.TEXTURE0=33984]="TEXTURE0",m[m.TEXTURE1=33985]="TEXTURE1",m[m.TEXTURE2=33986]="TEXTURE2",m[m.TEXTURE3=33987]="TEXTURE3",m[m.TEXTURE4=33988]="TEXTURE4",m[m.TEXTURE5=33989]="TEXTURE5",m[m.TEXTURE6=33990]="TEXTURE6",m[m.TEXTURE7=33991]="TEXTURE7",m[m.TEXTURE8=33992]="TEXTURE8",m[m.TEXTURE9=33993]="TEXTURE9",m[m.TEXTURE10=33994]="TEXTURE10",m[m.TEXTURE11=33995]="TEXTURE11",m[m.TEXTURE12=33996]="TEXTURE12",m[m.TEXTURE13=33997]="TEXTURE13",m[m.TEXTURE14=33998]="TEXTURE14",m[m.TEXTURE15=33999]="TEXTURE15",m[m.TEXTURE16=34e3]="TEXTURE16",m[m.TEXTURE17=34001]="TEXTURE17",m[m.TEXTURE18=34002]="TEXTURE18",m[m.TEXTURE19=34003]="TEXTURE19",m[m.TEXTURE20=34004]="TEXTURE20",m[m.TEXTURE21=34005]="TEXTURE21",m[m.TEXTURE22=34006]="TEXTURE22",m[m.TEXTURE23=34007]="TEXTURE23",m[m.TEXTURE24=34008]="TEXTURE24",m[m.TEXTURE25=34009]="TEXTURE25",m[m.TEXTURE26=34010]="TEXTURE26",m[m.TEXTURE27=34011]="TEXTURE27",m[m.TEXTURE28=34012]="TEXTURE28",m[m.TEXTURE29=34013]="TEXTURE29",m[m.TEXTURE30=34014]="TEXTURE30",m[m.TEXTURE31=34015]="TEXTURE31",m[m.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",m[m.REPEAT=10497]="REPEAT",m[m.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",m[m.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",m[m.FLOAT_VEC2=35664]="FLOAT_VEC2",m[m.FLOAT_VEC3=35665]="FLOAT_VEC3",m[m.FLOAT_VEC4=35666]="FLOAT_VEC4",m[m.INT_VEC2=35667]="INT_VEC2",m[m.INT_VEC3=35668]="INT_VEC3",m[m.INT_VEC4=35669]="INT_VEC4",m[m.BOOL=35670]="BOOL",m[m.BOOL_VEC2=35671]="BOOL_VEC2",m[m.BOOL_VEC3=35672]="BOOL_VEC3",m[m.BOOL_VEC4=35673]="BOOL_VEC4",m[m.FLOAT_MAT2=35674]="FLOAT_MAT2",m[m.FLOAT_MAT3=35675]="FLOAT_MAT3",m[m.FLOAT_MAT4=35676]="FLOAT_MAT4",m[m.SAMPLER_2D=35678]="SAMPLER_2D",m[m.SAMPLER_CUBE=35680]="SAMPLER_CUBE",m[m.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",m[m.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",m[m.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",m[m.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",m[m.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",m[m.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",m[m.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",m[m.COMPILE_STATUS=35713]="COMPILE_STATUS",m[m.LOW_FLOAT=36336]="LOW_FLOAT",m[m.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",m[m.HIGH_FLOAT=36338]="HIGH_FLOAT",m[m.LOW_INT=36339]="LOW_INT",m[m.MEDIUM_INT=36340]="MEDIUM_INT",m[m.HIGH_INT=36341]="HIGH_INT",m[m.FRAMEBUFFER=36160]="FRAMEBUFFER",m[m.RENDERBUFFER=36161]="RENDERBUFFER",m[m.RGBA4=32854]="RGBA4",m[m.RGB5_A1=32855]="RGB5_A1",m[m.RGB565=36194]="RGB565",m[m.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",m[m.STENCIL_INDEX=6401]="STENCIL_INDEX",m[m.STENCIL_INDEX8=36168]="STENCIL_INDEX8",m[m.DEPTH_STENCIL=34041]="DEPTH_STENCIL",m[m.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",m[m.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",m[m.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",m[m.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",m[m.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",m[m.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",m[m.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",m[m.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",m[m.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",m[m.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",m[m.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",m[m.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",m[m.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",m[m.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",m[m.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",m[m.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",m[m.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",m[m.NONE=0]="NONE",m[m.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",m[m.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",m[m.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",m[m.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",m[m.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",m[m.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",m[m.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",m[m.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",m[m.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",m[m.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",m[m.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",m[m.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",m[m.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",m[m.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",m[m.COPY_SRC=1]="COPY_SRC",m[m.COPY_DST=2]="COPY_DST",m[m.SAMPLED=4]="SAMPLED",m[m.STORAGE=8]="STORAGE",m[m.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(I||(I={}))},kLXV:function(le,P,h){"use strict";var I=h("KQm4"),m=h("wx14"),_=h("Ue1A"),M=h("2BaD"),A=h("RCxd"),G=h("+YFz"),R=h("bJ/+"),X=h("q1tI"),W=h("wEI+"),Y=h("rePB"),K=h("TSYQ"),ne=h.n(K),ae=h("lkze"),te=h("EXcs"),ce=h("4i/N"),ee=h("hzQT"),H=h("2/Rp"),se=h("zvFY"),re=h("H84U"),q=h("ihLV"),ye=h("YMnH"),ue=h("+f9I"),ve=h("R3zJ"),pe=h("ul5b"),L=function(Ot,dt){var at={};for(var T in Ot)Object.prototype.hasOwnProperty.call(Ot,T)&&dt.indexOf(T)<0&&(at[T]=Ot[T]);if(Ot!=null&&typeof Object.getOwnPropertySymbols=="function")for(var bn=0,T=Object.getOwnPropertySymbols(Ot);bn<T.length;bn++)dt.indexOf(T[bn])<0&&Object.prototype.propertyIsEnumerable.call(Ot,T[bn])&&(at[T[bn]]=Ot[T[bn]]);return at},ge,_e=function(dt){ge={x:dt.pageX,y:dt.pageY},setTimeout(function(){ge=null},100)};Object(ve.a)()&&document.documentElement.addEventListener("click",_e,!0);var Te=function(dt){var at,T,bn=X.useContext(re.b),an=bn.getPopupContainer,Jn=bn.getPrefixCls,Qn=bn.direction,De=function(na){var Ki=dt.onCancel;Ki==null||Ki(na)},be=function(na){var Ki=dt.onOk;Ki==null||Ki(na)},Xe=dt.prefixCls,Yt=dt.footer,ln=dt.visible,lr=dt.open,Hr=lr===void 0?!1:lr,ar=dt.wrapClassName,mr=dt.centered,yr=dt.getContainer,kr=dt.closeIcon,Ur=dt.focusTriggerAfterClose,Va=Ur===void 0?!0:Ur,da=dt.width,Ji=da===void 0?520:da,jo=L(dt,["prefixCls","footer","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","width"]),ri=Jn("modal",Xe),ji=Jn(),Li=X.createElement(ye.a,{componentName:"Modal",defaultLocale:Object(pe.b)()},function(mi){var na=dt.okText,Ki=dt.okType,go=Ki===void 0?"primary":Ki,ra=dt.cancelText,di=dt.confirmLoading,So=di===void 0?!1:di;return X.createElement(X.Fragment,null,X.createElement(H.a,Object(m.a)({onClick:De},dt.cancelButtonProps),ra||mi.cancelText),X.createElement(H.a,Object(m.a)({},Object(se.a)(go),{loading:So,onClick:be},dt.okButtonProps),na!=null?na:mi.okText))}),Aa=X.createElement("span",{className:"".concat(ri,"-close-x")},kr||X.createElement(ce.a,{className:"".concat(ri,"-close-icon")})),ki=ne()(ar,(at={},Object(Y.a)(at,"".concat(ri,"-centered"),!!mr),Object(Y.a)(at,"".concat(ri,"-wrap-rtl"),Qn==="rtl"),at));return X.createElement(ue.a,null,X.createElement(q.e,{status:!0,override:!0},X.createElement(ee.a,Object(m.a)({width:Ji},jo,{getContainer:yr===void 0?an:yr,prefixCls:ri,wrapClassName:ki,footer:Yt===void 0?Li:Yt,visible:Hr||ln,mousePosition:(T=jo.mousePosition)!==null&&T!==void 0?T:ge,onClose:De,closeIcon:Aa,focusTriggerAfterClose:Va,transitionName:Object(te.c)(ji,"zoom",dt.transitionName),maskTransitionName:Object(te.c)(ji,"fade",dt.maskTransitionName)}))))},we=Te,Qe=function(dt){var at=dt.icon,T=dt.onCancel,bn=dt.onOk,an=dt.close,Jn=dt.zIndex,Qn=dt.afterClose,De=dt.visible,be=dt.open,Xe=dt.keyboard,Yt=dt.centered,ln=dt.getContainer,lr=dt.maskStyle,Hr=dt.okText,ar=dt.okButtonProps,mr=dt.cancelText,yr=dt.cancelButtonProps,kr=dt.direction,Ur=dt.prefixCls,Va=dt.wrapClassName,da=dt.rootPrefixCls,Ji=dt.iconPrefixCls,jo=dt.bodyStyle,ri=dt.closable,ji=ri===void 0?!1:ri,Li=dt.closeIcon,Aa=dt.modalRender,ki=dt.focusTriggerAfterClose,mi=dt.okType||"primary",na="".concat(Ur,"-confirm"),Ki="okCancel"in dt?dt.okCancel:!0,go=dt.width||416,ra=dt.style||{},di=dt.mask===void 0?!0:dt.mask,So=dt.maskClosable===void 0?!1:dt.maskClosable,si=dt.autoFocusButton===null?!1:dt.autoFocusButton||"ok",Si=ne()(na,"".concat(na,"-").concat(dt.type),Object(Y.a)({},"".concat(na,"-rtl"),kr==="rtl"),dt.className),yi=Ki&&X.createElement(ae.a,{actionFn:T,close:an,autoFocus:si==="cancel",buttonProps:yr,prefixCls:"".concat(da,"-btn")},mr);return X.createElement(W.a,{prefixCls:da,iconPrefixCls:Ji,direction:kr},X.createElement(we,{prefixCls:Ur,className:Si,wrapClassName:ne()(Object(Y.a)({},"".concat(na,"-centered"),!!dt.centered),Va),onCancel:function(){return an==null?void 0:an({triggerCancel:!0})},open:be||De,title:"",footer:"",transitionName:Object(te.c)(da,"zoom",dt.transitionName),maskTransitionName:Object(te.c)(da,"fade",dt.maskTransitionName),mask:di,maskClosable:So,maskStyle:lr,style:ra,bodyStyle:jo,width:go,zIndex:Jn,afterClose:Qn,keyboard:Xe,centered:Yt,getContainer:ln,closable:ji,closeIcon:Li,modalRender:Aa,focusTriggerAfterClose:ki},X.createElement("div",{className:"".concat(na,"-body-wrapper")},X.createElement("div",{className:"".concat(na,"-body")},at,dt.title===void 0?null:X.createElement("span",{className:"".concat(na,"-title")},dt.title),X.createElement("div",{className:"".concat(na,"-content")},dt.content)),X.createElement("div",{className:"".concat(na,"-btns")},yi,X.createElement(ae.a,{type:mi,actionFn:bn,close:an,autoFocus:si==="ok",buttonProps:ar,prefixCls:"".concat(da,"-btn")},Hr)))))},D=Qe,Ue=[],Ct=Ue,ut=function(Ot,dt){var at={};for(var T in Ot)Object.prototype.hasOwnProperty.call(Ot,T)&&dt.indexOf(T)<0&&(at[T]=Ot[T]);if(Ot!=null&&typeof Object.getOwnPropertySymbols=="function")for(var bn=0,T=Object.getOwnPropertySymbols(Ot);bn<T.length;bn++)dt.indexOf(T[bn])<0&&Object.prototype.propertyIsEnumerable.call(Ot,T[bn])&&(at[T[bn]]=Ot[T[bn]]);return at},Nt="";function Kt(){return Nt}function Je(Ot){var dt=document.createDocumentFragment(),at=Object(m.a)(Object(m.a)({},Ot),{close:Jn,open:!0}),T;function bn(){for(var De=arguments.length,be=new Array(De),Xe=0;Xe<De;Xe++)be[Xe]=arguments[Xe];var Yt=be.some(function(Hr){return Hr&&Hr.triggerCancel});Ot.onCancel&&Yt&&Ot.onCancel.apply(Ot,[function(){}].concat(Object(I.a)(be.slice(1))));for(var ln=0;ln<Ct.length;ln++){var lr=Ct[ln];if(lr===Jn){Ct.splice(ln,1);break}}Object(R.b)(dt)}function an(De){var be=De.okText,Xe=De.cancelText,Yt=De.prefixCls,ln=ut(De,["okText","cancelText","prefixCls"]);clearTimeout(T),T=setTimeout(function(){var lr=Object(pe.b)(),Hr=Object(W.b)(),ar=Hr.getPrefixCls,mr=Hr.getIconPrefixCls,yr=ar(void 0,Kt()),kr=Yt||"".concat(yr,"-modal"),Ur=mr();Object(R.a)(X.createElement(D,Object(m.a)({},ln,{prefixCls:kr,rootPrefixCls:yr,iconPrefixCls:Ur,okText:be||(ln.okCancel?lr.okText:lr.justOkText),cancelText:Xe||lr.cancelText})),dt)})}function Jn(){for(var De=this,be=arguments.length,Xe=new Array(be),Yt=0;Yt<be;Yt++)Xe[Yt]=arguments[Yt];at=Object(m.a)(Object(m.a)({},at),{open:!1,afterClose:function(){typeof Ot.afterClose=="function"&&Ot.afterClose(),bn.apply(De,Xe)}}),at.visible&&delete at.visible,an(at)}function Qn(De){typeof De=="function"?at=De(at):at=Object(m.a)(Object(m.a)({},at),De),an(at)}return an(at),Ct.push(Jn),{destroy:Jn,update:Qn}}function Vt(Ot){return Object(m.a)(Object(m.a)({icon:X.createElement(A.a,null),okCancel:!1},Ot),{type:"warning"})}function Be(Ot){return Object(m.a)(Object(m.a)({icon:X.createElement(G.a,null),okCancel:!1},Ot),{type:"info"})}function ie(Ot){return Object(m.a)(Object(m.a)({icon:X.createElement(_.a,null),okCancel:!1},Ot),{type:"success"})}function un(Ot){return Object(m.a)(Object(m.a)({icon:X.createElement(M.a,null),okCancel:!1},Ot),{type:"error"})}function rn(Ot){return Object(m.a)(Object(m.a)({icon:X.createElement(A.a,null),okCancel:!0},Ot),{type:"confirm"})}function rr(Ot){var dt=Ot.rootPrefixCls;Nt=dt}var Pt=h("ODXe");function Tn(){var Ot=X.useState([]),dt=Object(Pt.a)(Ot,2),at=dt[0],T=dt[1],bn=X.useCallback(function(an){return T(function(Jn){return[].concat(Object(I.a)(Jn),[an])}),function(){T(function(Jn){return Jn.filter(function(Qn){return Qn!==an})})}},[]);return[at,bn]}var ur=h("ZvpZ"),Jt=function(dt,at){var T=dt.afterClose,bn=dt.config,an=X.useState(!0),Jn=Object(Pt.a)(an,2),Qn=Jn[0],De=Jn[1],be=X.useState(bn),Xe=Object(Pt.a)(be,2),Yt=Xe[0],ln=Xe[1],lr=X.useContext(re.b),Hr=lr.direction,ar=lr.getPrefixCls,mr=ar("modal"),yr=ar(),kr=function(){De(!1);for(var Va=arguments.length,da=new Array(Va),Ji=0;Ji<Va;Ji++)da[Ji]=arguments[Ji];var jo=da.some(function(ri){return ri&&ri.triggerCancel});Yt.onCancel&&jo&&Yt.onCancel.apply(Yt,[function(){}].concat(Object(I.a)(da.slice(1))))};return X.useImperativeHandle(at,function(){return{destroy:kr,update:function(Va){ln(function(da){return Object(m.a)(Object(m.a)({},da),Va)})}}}),X.createElement(ye.a,{componentName:"Modal",defaultLocale:ur.a.Modal},function(Ur){return X.createElement(D,Object(m.a)({prefixCls:mr,rootPrefixCls:yr},Yt,{close:kr,open:Qn,afterClose:T,okText:Yt.okText||(Yt.okCancel?Ur.okText:Ur.justOkText),direction:Hr,cancelText:Yt.cancelText||Ur.cancelText}))})},fn=X.forwardRef(Jt),Mn=0,En=X.memo(X.forwardRef(function(Ot,dt){var at=Tn(),T=Object(Pt.a)(at,2),bn=T[0],an=T[1];return X.useImperativeHandle(dt,function(){return{patchElement:an}},[]),X.createElement(X.Fragment,null,bn)}));function lt(){var Ot=X.useRef(null),dt=X.useState([]),at=Object(Pt.a)(dt,2),T=at[0],bn=at[1];X.useEffect(function(){if(T.length){var Qn=Object(I.a)(T);Qn.forEach(function(De){De()}),bn([])}},[T]);var an=X.useCallback(function(Qn){return function(be){var Xe;Mn+=1;var Yt=X.createRef(),ln,lr=X.createElement(fn,{key:"modal-".concat(Mn),config:Qn(be),ref:Yt,afterClose:function(){ln==null||ln()}});return ln=(Xe=Ot.current)===null||Xe===void 0?void 0:Xe.patchElement(lr),{destroy:function(){function ar(){var mr;(mr=Yt.current)===null||mr===void 0||mr.destroy()}Yt.current?ar():bn(function(mr){return[].concat(Object(I.a)(mr),[ar])})},update:function(ar){function mr(){var yr;(yr=Yt.current)===null||yr===void 0||yr.update(ar)}Yt.current?mr():bn(function(yr){return[].concat(Object(I.a)(yr),[mr])})}}}},[]),Jn=X.useMemo(function(){return{info:an(Be),success:an(ie),error:an(un),warning:an(Vt),confirm:an(rn)}},[]);return[Jn,X.createElement(En,{ref:Ot})]}function Tt(Ot){return Je(Vt(Ot))}var st=we;st.useModal=lt,st.info=function(dt){return Je(Be(dt))},st.success=function(dt){return Je(ie(dt))},st.error=function(dt){return Je(un(dt))},st.warning=Tt,st.warn=Tt,st.confirm=function(dt){return Je(rn(dt))},st.destroyAll=function(){for(;Ct.length;){var dt=Ct.pop();dt&&dt()}},st.config=rr;var At=P.a=st},kVhV:function(le,P,h){le.exports={components:h("tpVr"),dijkstra:h("uP9N"),dijkstraAll:h("lFfV"),findCycles:h("BjIp"),floydWarshall:h("s8Cx"),isAcyclic:h("BkyA"),postorder:h("fBpv"),preorder:h("4l4a"),prim:h("AV2a"),tarjan:h("98GK"),topsort:h("swpM")}},kafh:function(le,P,h){var I=h("+sJh"),m=h("4Hkj"),_=h("t8N9"),M=h("cGwC"),A=h("a8Yn"),G=[0,0];le.exports.computeMiter=function(X,W,Y,K,ne){return I(X,Y,K),_(X,X),m(W,-X[1],X[0]),m(G,-Y[1],Y[0]),ne/A(W,G)},le.exports.normal=function(X,W){return m(X,-W[1],W[0]),X},le.exports.direction=function(X,W,Y){return M(X,W,Y),_(X,X),X}},kfnj:function(le,P,h){"use strict";h.d(P,"a",function(){return Vt});var I=h("o0o1"),m=h.n(I),_=h("yXPU"),M=h.n(_),A=h("yG8O"),G=h.n(A),R=h("lwsE"),X=h.n(R),W=h("W8MJ"),Y=h.n(W),K=h("U+yc"),ne=h.n(K),ae=h("1ABj"),te=h.n(ae),ce=h("IOcx"),ee=h("4cb6"),H=h.n(ee),se=h("+uE7"),re=h("qfsk"),q=h("+xCn"),ye,ue,ve,pe,L,ge,_e,Te,we,Qe,D,Ue,Ct,ut;function Nt(Be,ie){var un;if(typeof Symbol=="undefined"||Be[Symbol.iterator]==null){if(Array.isArray(Be)||(un=Kt(Be))||ie&&Be&&typeof Be.length=="number"){un&&(Be=un);var rn=0,rr=function(){};return{s:rr,n:function(){return rn>=Be.length?{done:!0}:{done:!1,value:Be[rn++]}},e:function(fn){throw fn},f:rr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pt=!0,Tn=!1,ur;return{s:function(){un=Be[Symbol.iterator]()},n:function(){var fn=un.next();return Pt=fn.done,fn},e:function(fn){Tn=!0,ur=fn},f:function(){try{!Pt&&un.return!=null&&un.return()}finally{if(Tn)throw ur}}}}function Kt(Be,ie){if(!!Be){if(typeof Be=="string")return Je(Be,ie);var un=Object.prototype.toString.call(Be).slice(8,-1);if(un==="Object"&&Be.constructor&&(un=Be.constructor.name),un==="Map"||un==="Set")return Array.from(Be);if(un==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(un))return Je(Be,ie)}}function Je(Be,ie){(ie==null||ie>Be.length)&&(ie=Be.length);for(var un=0,rn=new Array(ie);un<ie;un++)rn[un]=Be[un];return rn}var Vt=(ye=Object(ee.injectable)(),ue=Object(ee.inject)(se.a.MeshComponentManager),ve=Object(ee.inject)(se.a.CullableComponentManager),pe=Object(ee.inject)(se.a.GeometryComponentManager),L=Object(ee.inject)(se.a.HierarchyComponentManager),ge=Object(ee.inject)(se.a.TransformComponentManager),ye(_e=(Te=(ut=function(){function Be(){X()(this,Be),G()(this,"mesh",we,this),G()(this,"cullable",Qe,this),G()(this,"geometry",D,this),G()(this,"hierarchy",Ue,this),G()(this,"transform",Ct,this),this.planes=void 0}return Y()(Be,[{key:"setFrustumPlanes",value:function(un){this.planes=un}},{key:"execute",value:function(){var ie=M()(m.a.mark(function rn(rr){var Pt,Tn,ur,Jt,fn,Mn,En,lt,Tt,st,At,Ot,dt,at,T,bn,an,Jn,Qn,De,be;return m.a.wrap(function(Yt){for(;;)switch(Yt.prev=Yt.next){case 0:Pt=Nt(rr);try{for(Pt.s();!(Tn=Pt.n()).done;){ur=Tn.value,Jt=ur.getScene(),fn=ur.getCamera(),Mn=Nt(Jt.getEntities());try{for(Mn.s();!(En=Mn.n()).done;)lt=En.value,Tt=this.mesh.getComponentByEntity(lt),Tt&&(st=this.hierarchy.getComponentByEntity(lt),At=this.cullable.getComponentByEntity(lt),Ot=Tt.geometry,dt=this.transform.getComponentByEntity(lt),Ot&&Ot.aabb&&dt&&Tt.aabbDirty&&(at=dt.worldTransform,T=Ot.aabb,bn=T.center,an=T.halfExtents,Jn=ce.d.transformMat4(ce.d.create(),bn,at),Qn=Object(q.b)(at,ce.a.create()),De=ce.d.transformMat3(ce.d.create(),an,Qn),Tt.aabb.update(Jn,De),Tt.aabbDirty=!1),At&&Ot&&(be=this.cullable.getComponentByEntity((st==null?void 0:st.parentID)||-1),At.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(Tt.aabb,(be==null?void 0:be.visibilityPlaneMask)||re.b.INDETERMINATE,this.planes||fn.getFrustum().planes),At.visible=At.visibilityPlaneMask!==re.b.OUTSIDE))}catch(ln){Mn.e(ln)}finally{Mn.f()}}}catch(ln){Pt.e(ln)}finally{Pt.f()}case 2:case"end":return Yt.stop()}},rn,this)}));function un(rn){return ie.apply(this,arguments)}return un}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(un,rn,rr){if(rn===re.b.OUTSIDE||rn===re.b.INSIDE)return rn;for(var Pt=re.b.INSIDE,Tn=0,ur=rr.length;Tn<ur;++Tn){var Jt=Tn<31?1<<Tn:0;if(!(Tn<31&&(rn&Jt)==0)){var fn=rr[Tn],Mn=fn.normal,En=fn.distance;if(ce.d.dot(Mn,un.getNegativeFarPoint(rr[Tn]))+En>0)return re.b.OUTSIDE;ce.d.dot(Mn,un.getPositiveFarPoint(rr[Tn]))+En>0&&(Pt|=Jt)}}return Pt}}]),Be}(),ut),we=ne()(Te.prototype,"mesh",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe=ne()(Te.prototype,"cullable",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=ne()(Te.prototype,"geometry",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=ne()(Te.prototype,"hierarchy",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct=ne()(Te.prototype,"transform",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te))||_e)},lFfV:function(le,P,h){var I=h("uP9N"),m=h("3z9K");le.exports=_;function _(M,A,G){return m.transform(M.nodes(),function(R,X){R[X]=I(M,X,A,G)},{})}},lSNA:function(le,P,h){var I=h("o5UB");function m(_,M,A){return M=I(M),M in _?Object.defineProperty(_,M,{value:A,enumerable:!0,configurable:!0,writable:!0}):_[M]=A,_}le.exports=m,le.exports.__esModule=!0,le.exports.default=le.exports},ljNz:function(le,P,h){"use strict";h.d(P,"a",function(){return I});var I=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent)},lkze:function(le,P,h){"use strict";var I=h("wx14"),m=h("ODXe"),_=h("dm2S"),M=h("q1tI"),A=h.n(M),G=h("2/Rp"),R=h("zvFY");function X(Y){return!!(Y&&!!Y.then)}var W=function(K){var ne=M.useRef(!1),ae=M.useRef(null),te=Object(_.a)(!1),ce=Object(m.a)(te,2),ee=ce[0],H=ce[1],se=K.close,re=function(){se==null||se.apply(void 0,arguments)};M.useEffect(function(){var ge=null;return K.autoFocus&&(ge=setTimeout(function(){var _e;(_e=ae.current)===null||_e===void 0||_e.focus()})),function(){ge&&clearTimeout(ge)}},[]);var q=function(_e){!X(_e)||(H(!0),_e.then(function(){H(!1,!0),re.apply(void 0,arguments),ne.current=!1},function(Te){console.error(Te),H(!1,!0),ne.current=!1}))},ye=function(_e){var Te=K.actionFn;if(!ne.current){if(ne.current=!0,!Te){re();return}var we;if(K.emitEvent){if(we=Te(_e),K.quitOnNullishReturnValue&&!X(we)){ne.current=!1,re(_e);return}}else if(Te.length)we=Te(se),ne.current=!1;else if(we=Te(),!we){re();return}q(we)}},ue=K.type,ve=K.children,pe=K.prefixCls,L=K.buttonProps;return M.createElement(G.a,Object(I.a)({},Object(R.a)(ue),{onClick:ye,loading:ee,prefixCls:pe},L,{ref:ae}),ve)};P.a=W},lnY3:function(le,P,h){},lwsE:function(le,P){function h(I,m){if(!(I instanceof m))throw new TypeError("Cannot call a class as a function")}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},m0LI:function(le,P){function h(I,m){var _=I==null?null:typeof Symbol!="undefined"&&I[Symbol.iterator]||I["@@iterator"];if(_!=null){var M,A,G,R,X=[],W=!0,Y=!1;try{if(G=(_=_.call(I)).next,m===0){if(Object(_)!==_)return;W=!1}else for(;!(W=(M=G.call(_)).done)&&(X.push(M.value),X.length!==m);W=!0);}catch(K){Y=!0,A=K}finally{try{if(!W&&_.return!=null&&(R=_.return(),Object(R)!==R))return}finally{if(Y)throw A}}return X}}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},mNvP:function(le,P,h){(function(I,m){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _;(function(M){(function(A){var G=typeof m=="object"?m:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),R=X(M);typeof G.Reflect=="undefined"?G.Reflect=M:R=X(G.Reflect,R),A(R);function X(W,Y){return function(K,ne){typeof W[K]!="function"&&Object.defineProperty(W,K,{configurable:!0,writable:!0,value:ne}),Y&&Y(K,ne)}}})(function(A){var G=Object.prototype.hasOwnProperty,R=typeof Symbol=="function",X=R&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",W=R&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",Y=typeof Object.create=="function",K={__proto__:[]}instanceof Array,ne=!Y&&!K,ae={create:Y?function(){return De(Object.create(null))}:K?function(){return De({__proto__:null})}:function(){return De({})},has:ne?function(be,Xe){return G.call(be,Xe)}:function(be,Xe){return Xe in be},get:ne?function(be,Xe){return G.call(be,Xe)?be[Xe]:void 0}:function(be,Xe){return be[Xe]}},te=Object.getPrototypeOf(Function),ce=typeof I=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",ee=!ce&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:an(),H=!ce&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Jn(),se=!ce&&typeof WeakMap=="function"?WeakMap:Qn(),re=new se;function q(be,Xe,Yt,ln){if(un(Yt)){if(!En(be))throw new TypeError;if(!Tt(Xe))throw new TypeError;return Qe(be,Xe)}else{if(!En(be))throw new TypeError;if(!Pt(Xe))throw new TypeError;if(!Pt(ln)&&!un(ln)&&!rn(ln))throw new TypeError;return rn(ln)&&(ln=void 0),Yt=Mn(Yt),D(be,Xe,Yt,ln)}}A("decorate",q);function ye(be,Xe){function Yt(ln,lr){if(!Pt(ln))throw new TypeError;if(!un(lr)&&!st(lr))throw new TypeError;Je(be,Xe,ln,lr)}return Yt}A("metadata",ye);function ue(be,Xe,Yt,ln){if(!Pt(Yt))throw new TypeError;return un(ln)||(ln=Mn(ln)),Je(be,Xe,Yt,ln)}A("defineMetadata",ue);function ve(be,Xe,Yt){if(!Pt(Xe))throw new TypeError;return un(Yt)||(Yt=Mn(Yt)),Ct(be,Xe,Yt)}A("hasMetadata",ve);function pe(be,Xe,Yt){if(!Pt(Xe))throw new TypeError;return un(Yt)||(Yt=Mn(Yt)),ut(be,Xe,Yt)}A("hasOwnMetadata",pe);function L(be,Xe,Yt){if(!Pt(Xe))throw new TypeError;return un(Yt)||(Yt=Mn(Yt)),Nt(be,Xe,Yt)}A("getMetadata",L);function ge(be,Xe,Yt){if(!Pt(Xe))throw new TypeError;return un(Yt)||(Yt=Mn(Yt)),Kt(be,Xe,Yt)}A("getOwnMetadata",ge);function _e(be,Xe){if(!Pt(be))throw new TypeError;return un(Xe)||(Xe=Mn(Xe)),Vt(be,Xe)}A("getMetadataKeys",_e);function Te(be,Xe){if(!Pt(be))throw new TypeError;return un(Xe)||(Xe=Mn(Xe)),Be(be,Xe)}A("getOwnMetadataKeys",Te);function we(be,Xe,Yt){if(!Pt(Xe))throw new TypeError;un(Yt)||(Yt=Mn(Yt));var ln=Ue(Xe,Yt,!1);if(un(ln)||!ln.delete(be))return!1;if(ln.size>0)return!0;var lr=re.get(Xe);return lr.delete(Yt),lr.size>0||re.delete(Xe),!0}A("deleteMetadata",we);function Qe(be,Xe){for(var Yt=be.length-1;Yt>=0;--Yt){var ln=be[Yt],lr=ln(Xe);if(!un(lr)&&!rn(lr)){if(!Tt(lr))throw new TypeError;Xe=lr}}return Xe}function D(be,Xe,Yt,ln){for(var lr=be.length-1;lr>=0;--lr){var Hr=be[lr],ar=Hr(Xe,Yt,ln);if(!un(ar)&&!rn(ar)){if(!Pt(ar))throw new TypeError;ln=ar}}return ln}function Ue(be,Xe,Yt){var ln=re.get(be);if(un(ln)){if(!Yt)return;ln=new ee,re.set(be,ln)}var lr=ln.get(Xe);if(un(lr)){if(!Yt)return;lr=new ee,ln.set(Xe,lr)}return lr}function Ct(be,Xe,Yt){var ln=ut(be,Xe,Yt);if(ln)return!0;var lr=bn(Xe);return rn(lr)?!1:Ct(be,lr,Yt)}function ut(be,Xe,Yt){var ln=Ue(Xe,Yt,!1);return un(ln)?!1:Jt(ln.has(be))}function Nt(be,Xe,Yt){var ln=ut(be,Xe,Yt);if(ln)return Kt(be,Xe,Yt);var lr=bn(Xe);if(!rn(lr))return Nt(be,lr,Yt)}function Kt(be,Xe,Yt){var ln=Ue(Xe,Yt,!1);if(!un(ln))return ln.get(be)}function Je(be,Xe,Yt,ln){var lr=Ue(Yt,ln,!0);lr.set(be,Xe)}function Vt(be,Xe){var Yt=Be(be,Xe),ln=bn(be);if(ln===null)return Yt;var lr=Vt(ln,Xe);if(lr.length<=0)return Yt;if(Yt.length<=0)return lr;for(var Hr=new H,ar=[],mr=0,yr=Yt;mr<yr.length;mr++){var kr=yr[mr],Ur=Hr.has(kr);Ur||(Hr.add(kr),ar.push(kr))}for(var Va=0,da=lr;Va<da.length;Va++){var kr=da[Va],Ur=Hr.has(kr);Ur||(Hr.add(kr),ar.push(kr))}return ar}function Be(be,Xe){var Yt=[],ln=Ue(be,Xe,!1);if(un(ln))return Yt;for(var lr=ln.keys(),Hr=Ot(lr),ar=0;;){var mr=at(Hr);if(!mr)return Yt.length=ar,Yt;var yr=dt(mr);try{Yt[ar]=yr}catch(kr){try{T(Hr)}finally{throw kr}}ar++}}function ie(be){if(be===null)return 1;switch(typeof be){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return be===null?1:6;default:return 6}}function un(be){return be===void 0}function rn(be){return be===null}function rr(be){return typeof be=="symbol"}function Pt(be){return typeof be=="object"?be!==null:typeof be=="function"}function Tn(be,Xe){switch(ie(be)){case 0:return be;case 1:return be;case 2:return be;case 3:return be;case 4:return be;case 5:return be}var Yt=Xe===3?"string":Xe===5?"number":"default",ln=At(be,X);if(ln!==void 0){var lr=ln.call(be,Yt);if(Pt(lr))throw new TypeError;return lr}return ur(be,Yt==="default"?"number":Yt)}function ur(be,Xe){if(Xe==="string"){var Yt=be.toString;if(lt(Yt)){var ln=Yt.call(be);if(!Pt(ln))return ln}var lr=be.valueOf;if(lt(lr)){var ln=lr.call(be);if(!Pt(ln))return ln}}else{var lr=be.valueOf;if(lt(lr)){var ln=lr.call(be);if(!Pt(ln))return ln}var Hr=be.toString;if(lt(Hr)){var ln=Hr.call(be);if(!Pt(ln))return ln}}throw new TypeError}function Jt(be){return!!be}function fn(be){return""+be}function Mn(be){var Xe=Tn(be,3);return rr(Xe)?Xe:fn(Xe)}function En(be){return Array.isArray?Array.isArray(be):be instanceof Object?be instanceof Array:Object.prototype.toString.call(be)==="[object Array]"}function lt(be){return typeof be=="function"}function Tt(be){return typeof be=="function"}function st(be){switch(ie(be)){case 3:return!0;case 4:return!0;default:return!1}}function At(be,Xe){var Yt=be[Xe];if(Yt!=null){if(!lt(Yt))throw new TypeError;return Yt}}function Ot(be){var Xe=At(be,W);if(!lt(Xe))throw new TypeError;var Yt=Xe.call(be);if(!Pt(Yt))throw new TypeError;return Yt}function dt(be){return be.value}function at(be){var Xe=be.next();return Xe.done?!1:Xe}function T(be){var Xe=be.return;Xe&&Xe.call(be)}function bn(be){var Xe=Object.getPrototypeOf(be);if(typeof be!="function"||be===te||Xe!==te)return Xe;var Yt=be.prototype,ln=Yt&&Object.getPrototypeOf(Yt);if(ln==null||ln===Object.prototype)return Xe;var lr=ln.constructor;return typeof lr!="function"||lr===be?Xe:lr}function an(){var be={},Xe=[],Yt=function(){function ar(mr,yr,kr){this._index=0,this._keys=mr,this._values=yr,this._selector=kr}return ar.prototype["@@iterator"]=function(){return this},ar.prototype[W]=function(){return this},ar.prototype.next=function(){var mr=this._index;if(mr>=0&&mr<this._keys.length){var yr=this._selector(this._keys[mr],this._values[mr]);return mr+1>=this._keys.length?(this._index=-1,this._keys=Xe,this._values=Xe):this._index++,{value:yr,done:!1}}return{value:void 0,done:!0}},ar.prototype.throw=function(mr){throw this._index>=0&&(this._index=-1,this._keys=Xe,this._values=Xe),mr},ar.prototype.return=function(mr){return this._index>=0&&(this._index=-1,this._keys=Xe,this._values=Xe),{value:mr,done:!0}},ar}();return function(){function ar(){this._keys=[],this._values=[],this._cacheKey=be,this._cacheIndex=-2}return Object.defineProperty(ar.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ar.prototype.has=function(mr){return this._find(mr,!1)>=0},ar.prototype.get=function(mr){var yr=this._find(mr,!1);return yr>=0?this._values[yr]:void 0},ar.prototype.set=function(mr,yr){var kr=this._find(mr,!0);return this._values[kr]=yr,this},ar.prototype.delete=function(mr){var yr=this._find(mr,!1);if(yr>=0){for(var kr=this._keys.length,Ur=yr+1;Ur<kr;Ur++)this._keys[Ur-1]=this._keys[Ur],this._values[Ur-1]=this._values[Ur];return this._keys.length--,this._values.length--,mr===this._cacheKey&&(this._cacheKey=be,this._cacheIndex=-2),!0}return!1},ar.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=be,this._cacheIndex=-2},ar.prototype.keys=function(){return new Yt(this._keys,this._values,ln)},ar.prototype.values=function(){return new Yt(this._keys,this._values,lr)},ar.prototype.entries=function(){return new Yt(this._keys,this._values,Hr)},ar.prototype["@@iterator"]=function(){return this.entries()},ar.prototype[W]=function(){return this.entries()},ar.prototype._find=function(mr,yr){return this._cacheKey!==mr&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=mr)),this._cacheIndex<0&&yr&&(this._cacheIndex=this._keys.length,this._keys.push(mr),this._values.push(void 0)),this._cacheIndex},ar}();function ln(ar,mr){return ar}function lr(ar,mr){return mr}function Hr(ar,mr){return[ar,mr]}}function Jn(){return function(){function be(){this._map=new ee}return Object.defineProperty(be.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),be.prototype.has=function(Xe){return this._map.has(Xe)},be.prototype.add=function(Xe){return this._map.set(Xe,Xe),this},be.prototype.delete=function(Xe){return this._map.delete(Xe)},be.prototype.clear=function(){this._map.clear()},be.prototype.keys=function(){return this._map.keys()},be.prototype.values=function(){return this._map.values()},be.prototype.entries=function(){return this._map.entries()},be.prototype["@@iterator"]=function(){return this.keys()},be.prototype[W]=function(){return this.keys()},be}()}function Qn(){var be=16,Xe=ae.create(),Yt=ln();return function(){function yr(){this._key=ln()}return yr.prototype.has=function(kr){var Ur=lr(kr,!1);return Ur!==void 0?ae.has(Ur,this._key):!1},yr.prototype.get=function(kr){var Ur=lr(kr,!1);return Ur!==void 0?ae.get(Ur,this._key):void 0},yr.prototype.set=function(kr,Ur){var Va=lr(kr,!0);return Va[this._key]=Ur,this},yr.prototype.delete=function(kr){var Ur=lr(kr,!1);return Ur!==void 0?delete Ur[this._key]:!1},yr.prototype.clear=function(){this._key=ln()},yr}();function ln(){var yr;do yr="@@WeakMap@@"+mr();while(ae.has(Xe,yr));return Xe[yr]=!0,yr}function lr(yr,kr){if(!G.call(yr,Yt)){if(!kr)return;Object.defineProperty(yr,Yt,{value:ae.create()})}return yr[Yt]}function Hr(yr,kr){for(var Ur=0;Ur<kr;++Ur)yr[Ur]=Math.random()*255|0;return yr}function ar(yr){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(yr)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(yr)):Hr(new Uint8Array(yr),yr):Hr(new Array(yr),yr)}function mr(){var yr=ar(be);yr[6]=yr[6]&79|64,yr[8]=yr[8]&191|128;for(var kr="",Ur=0;Ur<be;++Ur){var Va=yr[Ur];(Ur===4||Ur===6||Ur===8)&&(kr+="-"),Va<16&&(kr+="0"),kr+=Va.toString(16).toLowerCase()}return kr}}function De(be){return be.__=void 0,delete be.__,be}})})(_||(_={}))}).call(this,h("Q2Ig"),h("IyRk"))},n2J3:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.unmanaged=void 0;var I=h("xfSm"),m=h("GXnB"),_=h("Ztfv");function M(){return function(A,G,R){var X=new m.Metadata(I.UNMANAGED_TAG,!0);_.tagParameter(A,G,R,X)}}P.unmanaged=M},nO7B:function(le,P){},"nW7/":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Twitter=void 0;var I=h("q1tI"),m=te(I),_=h("17x9"),M=te(_),A=h("/FUP"),G=te(A),R=h("3WF5"),X=te(R),W=h("QkVN"),Y=te(W),K=h("p8yl"),ne=te(K),ae=h("TM95");function te(ee){return ee&&ee.__esModule?ee:{default:ee}}var ce=P.Twitter=function(H){var se=H.onChange,re=H.onSwatchHover,q=H.hex,ye=H.colors,ue=H.width,ve=H.triangle,pe=H.styles,L=pe===void 0?{}:pe,ge=H.className,_e=ge===void 0?"":ge,Te=(0,G.default)((0,Y.default)({default:{card:{width:ue,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},L),{"hide-triangle":ve==="hide","top-left-triangle":ve==="top-left","top-right-triangle":ve==="top-right"}),we=function(D,Ue){ne.default.isValidHex(D)&&se({hex:D,source:"hex"},Ue)};return m.default.createElement("div",{style:Te.card,className:"twitter-picker "+_e},m.default.createElement("div",{style:Te.triangleShadow}),m.default.createElement("div",{style:Te.triangle}),m.default.createElement("div",{style:Te.body},(0,X.default)(ye,function(Qe,D){return m.default.createElement(ae.Swatch,{key:D,color:Qe,hex:Qe,style:Te.swatch,onClick:we,onHover:re,focusStyle:{boxShadow:"0 0 4px "+Qe}})}),m.default.createElement("div",{style:Te.hash},"#"),m.default.createElement(ae.EditableInput,{style:{input:Te.input},value:q.replace("#",""),onChange:we}),m.default.createElement("div",{style:Te.clear})))};ce.propTypes={width:M.default.oneOfType([M.default.string,M.default.number]),triangle:M.default.oneOf(["hide","top-left","top-right"]),colors:M.default.arrayOf(M.default.string),styles:M.default.object},ce.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},P.default=(0,ae.ColorWrap)(ce)},o0o1:function(le,P,h){var I=h("fsL8")();le.exports=I;try{regeneratorRuntime=I}catch(m){typeof globalThis=="object"?globalThis.regeneratorRuntime=I:Function("r","regeneratorRuntime = r")(I)}},o5UB:function(le,P,h){var I=h("cDf5").default,m=h("5Q0V");function _(M){var A=m(M,"string");return I(A)==="symbol"?A:String(A)}le.exports=_,le.exports.__esModule=!0,le.exports.default=le.exports},oDt1:function(le,P,h){"use strict";h.d(P,"a",function(){return Y}),h.d(P,"b",function(){return K});var I=h("o0o1"),m=h.n(I),_=h("yXPU"),M=h.n(_),A=h("W8MJ"),G=h.n(A),R=h("lwsE"),X=h.n(R),W=h("9y2T"),Y=function ne(ae){X()(this,ne)},K=function(){function ne(ae){X()(this,ne),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=ae}return G()(ne,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(te){return this.lookup[te]>-1}},{key:"create",value:function(te,ce){this.lookup[te]=this.components.length;var ee=new this.clazz(ce||{});return this.components.push(ee),this.entities.push(te),ee}},{key:"remove",value:function(te){var ce=this.lookup[te];ce>-1&&ce<this.components.length-1&&(this.components[ce]=this.components[this.components.length-1],this.entities[ce]=this.entities[this.entities.length-1],this.lookup[this.entities[ce]]=ce),this.components.pop(),this.entities.pop(),delete this.lookup[te]}},{key:"removeKeepSorted",value:function(te){var ce=this.lookup[te];if(ce>-1){var ee=this.entities[ce];if(ce<this.components.length-1){for(var H=ce+1;H<this.components.length;++H)this.components[H-1]=this.components[H];for(var se=ce+1;se<this.entities.length;++se)this.entities[se-1]=this.entities[se],this.lookup[this.entities[se-1]]=se-1}this.components.pop(),this.entities.pop(),delete this.lookup[ee]}}},{key:"moveItem",value:function(te,ce){if(te!==ce){for(var ee=this.components[te],H=this.entities[te],se=te<ce?1:-1,re=te;re!==ce;re+=se){var q=re+se;this.components[re]=this.components[q],this.entities[re]=this.entities[q],this.lookup[this.entities[re]]=re}this.components[ce]=ee,this.entities[ce]=H,this.lookup[H]=ce}}},{key:"getEntity",value:function(te){return this.entities[te]}},{key:"getComponent",value:function(te){return this.components[te]}},{key:"getComponentByEntity",value:function(te){var ce=this.lookup[te];return ce>-1?this.components[ce]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(te){for(var ce=0,ee=Object.keys(this.lookup);ce<ee.length;ce++){var H=ee[ce],se=Number(H);if(this.lookup[se]===te)return se}return W.a}},{key:"find",value:function(te){for(var ce=0;ce<this.getCount();ce++){var ee=this.getComponent(ce);if(te(ee,ce))return ee}return null}},{key:"findIndex",value:function(te){for(var ce=0;ce<this.getCount();ce++){var ee=this.getComponent(ce);if(te(ee,ce))return ce}return-1}},{key:"forEach",value:function(te){for(var ce=0,ee=Object.keys(this.lookup);ce<ee.length;ce++){var H=ee[ce],se=Number(H),re=this.lookup[se];te(se,this.getComponent(re))}}},{key:"forEachAsync",value:function(){var ae=M()(m.a.mark(function ce(ee){var H,se,re,q,ye;return m.a.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:H=0,se=Object.keys(this.lookup);case 1:if(!(H<se.length)){ve.next=10;break}return re=se[H],q=Number(re),ye=this.lookup[q],ve.next=7,ee(q,this.getComponent(ye));case 7:H++,ve.next=1;break;case 10:case"end":return ve.stop()}},ce,this)}));function te(ce){return ae.apply(this,arguments)}return te}()},{key:"map",value:function(te){for(var ce=[],ee=0,H=Object.keys(this.lookup);ee<H.length;ee++){var se=H[ee],re=Number(se),q=this.lookup[re];ce.push(te(re,this.getComponent(q)))}return ce}}]),ne}()},oPLb:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Compact=void 0;var I=h("q1tI"),m=se(I),_=h("17x9"),M=se(_),A=h("/FUP"),G=se(A),R=h("3WF5"),X=se(R),W=h("QkVN"),Y=se(W),K=h("p8yl"),ne=se(K),ae=h("TM95"),te=h("ZQT/"),ce=se(te),ee=h("8J/B"),H=se(ee);function se(q){return q&&q.__esModule?q:{default:q}}var re=P.Compact=function(ye){var ue=ye.onChange,ve=ye.onSwatchHover,pe=ye.colors,L=ye.hex,ge=ye.rgb,_e=ye.styles,Te=_e===void 0?{}:_e,we=ye.className,Qe=we===void 0?"":we,D=(0,G.default)((0,Y.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},Te)),Ue=function(ut,Nt){ut.hex?ne.default.isValidHex(ut.hex)&&ue({hex:ut.hex,source:"hex"},Nt):ue(ut,Nt)};return m.default.createElement(ae.Raised,{style:D.Compact,styles:Te},m.default.createElement("div",{style:D.compact,className:"compact-picker "+Qe},m.default.createElement("div",null,(0,X.default)(pe,function(Ct){return m.default.createElement(ce.default,{key:Ct,color:Ct,active:Ct.toLowerCase()===L,onClick:Ue,onSwatchHover:ve})}),m.default.createElement("div",{style:D.clear})),m.default.createElement(H.default,{hex:L,rgb:ge,onChange:Ue})))};re.propTypes={colors:M.default.arrayOf(M.default.string),styles:M.default.object},re.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},P.default=(0,ae.ColorWrap)(re)},oaX6:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.targetName=void 0;var I=h("xfSm"),m=h("GXnB"),_=h("Ztfv");function M(A){return function(G,R,X){var W=new m.Metadata(I.NAME_TAG,A);_.tagParameter(G,R,X,W)}}P.targetName=M},olaO:function(le,P){},"oy+k":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Context=void 0;var I=h("d9O0"),m=function(){function _(M){this.id=I.id(),this.container=M}return _.prototype.addPlan=function(M){this.plan=M},_.prototype.setCurrentRequest=function(M){this.currentRequest=M},_}();P.Context=m},p8yl:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.red=void 0;var I=h("xkGU"),m=A(I),_=h("lMfh"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}P.default={simpleCheckForValidColor:function(X){var W=["r","g","b","a","h","s","l","v"],Y=0,K=0;return(0,m.default)(W,function(ne){if(X[ne]&&(Y+=1,isNaN(X[ne])||(K+=1),ne==="s"||ne==="l")){var ae=/^\d+%$/;ae.test(X[ne])&&(K+=1)}}),Y===K?X:!1},toState:function(X,W){var Y=X.hex?(0,M.default)(X.hex):(0,M.default)(X),K=Y.toHsl(),ne=Y.toHsv(),ae=Y.toRgb(),te=Y.toHex();K.s===0&&(K.h=W||0,ne.h=W||0);var ce=te==="000000"&&ae.a===0;return{hsl:K,hex:ce?"transparent":"#"+te,rgb:ae,hsv:ne,oldHue:X.h||W||K.h,source:X.source}},isValidHex:function(X){var W=String(X).charAt(0)==="#"?1:0;return X.length!==4+W&&X.length<7+W&&(0,M.default)(X).isValid()},getContrastingColor:function(X){if(!X)return"#fff";var W=this.toState(X);if(W.hex==="transparent")return"rgba(0,0,0,0.4)";var Y=(W.rgb.r*299+W.rgb.g*587+W.rgb.b*114)/1e3;return Y>=128?"#000":"#fff"}};var G=P.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},ph3A:function(le,P,h){"use strict";h.d(P,"a",function(){return ye});var I=h("lSNA"),m=h.n(I),_=h("lwsE"),M=h.n(_),A=h("W8MJ"),G=h.n(A),R=h("PJYZ"),X=h.n(R),W=h("7W2i"),Y=h.n(W),K=h("a1gu"),ne=h.n(K),ae=h("Nsbk"),te=h.n(ae),ce=h("Gj0h"),ee=h("oDt1");function H(ue,ve){var pe=Object.keys(ue);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(ue);ve&&(L=L.filter(function(ge){return Object.getOwnPropertyDescriptor(ue,ge).enumerable})),pe.push.apply(pe,L)}return pe}function se(ue){for(var ve=1;ve<arguments.length;ve++){var pe=arguments[ve]!=null?arguments[ve]:{};ve%2?H(Object(pe),!0).forEach(function(L){m()(ue,L,pe[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ue,Object.getOwnPropertyDescriptors(pe)):H(Object(pe)).forEach(function(L){Object.defineProperty(ue,L,Object.getOwnPropertyDescriptor(pe,L))})}return ue}function re(ue){var ve=q();return function(){var L=te()(ue),ge;if(ve){var _e=te()(this).constructor;ge=Reflect.construct(L,arguments,_e)}else ge=L.apply(this,arguments);return ne()(this,ge)}}function q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ue){return!1}}var ye=function(ue){Y()(pe,ue);var ve=re(pe);function pe(L){var ge;return M()(this,pe),ge=ve.call(this,L),ge.vertexShaderGLSL=void 0,ge.fragmentShaderGLSL=void 0,ge.defines={},ge.dirty=!0,ge.uniforms=[],ge.cull={enable:!0,face:ce.gl.BACK},ge.depth={enable:!0},ge.blend=void 0,ge.entity=void 0,ge.type=void 0,Object.assign(X()(ge),L),ge}return G()(pe,[{key:"setDefines",value:function(ge){return this.defines=se(se({},this.defines),ge),this}},{key:"setCull",value:function(ge){return this.cull=ge,this}},{key:"setDepth",value:function(ge){return this.depth=ge,this}},{key:"setBlend",value:function(ge){return this.blend=ge,this}},{key:"setUniform",value:function(ge,_e){var Te=this;if(typeof ge!="string")return Object.keys(ge).forEach(function(Qe){return Te.setUniform(Qe,ge[Qe])}),this;var we=this.uniforms.find(function(Qe){return Qe.name===ge});return we?(we.dirty=!0,we.data=_e):this.uniforms.push({name:ge,dirty:!0,data:_e}),this.dirty=!0,this}}]),pe}(ee.a)},plQd:function(le,P,h){le.exports=h("C3Dj")},qK8v:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.isStackOverflowExeption=void 0;var I=h("MON2");function m(_){return _ instanceof RangeError||_.message===I.STACK_OVERFLOW}P.isStackOverflowExeption=m},qPyV:function(le,P,h){var I=h("ut/Y"),m=h("LGYb");function _(M,A){return M&&M.length?m(M,I(A,2)):[]}le.exports=_},qfsk:function(le,P,h){"use strict";h.d(P,"b",function(){return W}),h.d(P,"a",function(){return Y});var I=h("J4zp"),m=h.n(I),_=h("lwsE"),M=h.n(_),A=h("W8MJ"),G=h.n(A),R=h("IOcx"),X=h("cXWL"),W;(function(K){K[K.OUTSIDE=4294967295]="OUTSIDE",K[K.INSIDE=0]="INSIDE",K[K.INDETERMINATE=2147483647]="INDETERMINATE"})(W||(W={}));var Y=function(){function K(ne){if(M()(this,K),this.planes=[],ne)this.planes=ne;else for(var ae=0;ae<6;ae++)this.planes.push(new X.a)}return G()(K,[{key:"extractFromVPMatrix",value:function(ae){var te=m()(ae,16),ce=te[0],ee=te[1],H=te[2],se=te[3],re=te[4],q=te[5],ye=te[6],ue=te[7],ve=te[8],pe=te[9],L=te[10],ge=te[11],_e=te[12],Te=te[13],we=te[14],Qe=te[15];R.d.set(this.planes[0].normal,se-ce,ue-re,ge-ve),this.planes[0].distance=-(Qe-_e),R.d.set(this.planes[1].normal,se+ce,ue+re,ge+ve),this.planes[1].distance=-(Qe+_e),R.d.set(this.planes[2].normal,se+ee,ue+q,ge+pe),this.planes[2].distance=-(Qe+Te),R.d.set(this.planes[3].normal,se-ee,ue-q,ge-pe),this.planes[3].distance=-(Qe-Te),R.d.set(this.planes[4].normal,se-H,ue-ye,ge-L),this.planes[4].distance=-(Qe-we),R.d.set(this.planes[5].normal,se+H,ue+ye,ge+L),this.planes[5].distance=-(Qe+we),this.planes.forEach(function(D){D.normalize(),D.updatePNVertexFlag()})}}]),K}()},"ql/k":function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I=Object.assign||function(R){for(var X=1;X<arguments.length;X++){var W=arguments[X];for(var Y in W)Object.prototype.hasOwnProperty.call(W,Y)&&(R[Y]=W[Y])}return R},m=h("q1tI"),_=M(m);function M(R){return R&&R.__esModule?R:{default:R}}function A(R,X){var W={};for(var Y in R)X.indexOf(Y)>=0||!Object.prototype.hasOwnProperty.call(R,Y)||(W[Y]=R[Y]);return W}var G=24;P.default=function(R){var X=R.fill,W=X===void 0?"currentColor":X,Y=R.width,K=Y===void 0?G:Y,ne=R.height,ae=ne===void 0?G:ne,te=R.style,ce=te===void 0?{}:te,ee=A(R,["fill","width","height","style"]);return _.default.createElement("svg",I({viewBox:"0 0 "+G+" "+G,style:I({fill:W,width:K,height:ae},ce)},ee),_.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},qo7Q:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.AlphaPicker=void 0;var I=Object.assign||function(K){for(var ne=1;ne<arguments.length;ne++){var ae=arguments[ne];for(var te in ae)Object.prototype.hasOwnProperty.call(ae,te)&&(K[te]=ae[te])}return K},m=h("q1tI"),_=W(m),M=h("/FUP"),A=W(M),G=h("TM95"),R=h("Syy6"),X=W(R);function W(K){return K&&K.__esModule?K:{default:K}}var Y=P.AlphaPicker=function(ne){var ae=ne.rgb,te=ne.hsl,ce=ne.width,ee=ne.height,H=ne.onChange,se=ne.direction,re=ne.style,q=ne.renderers,ye=ne.pointer,ue=ne.className,ve=ue===void 0?"":ue,pe=(0,A.default)({default:{picker:{position:"relative",width:ce,height:ee},alpha:{radius:"2px",style:re}}});return _.default.createElement("div",{style:pe.picker,className:"alpha-picker "+ve},_.default.createElement(G.Alpha,I({},pe.alpha,{rgb:ae,hsl:te,pointer:ye,renderers:q,onChange:H,direction:se})))};Y.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:X.default},P.default=(0,G.ColorWrap)(Y)},r5xO:function(le,P){le.exports=function(M){return h(I(M),M)},le.exports.array=h;function h(M,A){var G=M.length,R=new Array(G),X={},W=G,Y=m(A),K=_(M);for(A.forEach(function(ae){if(!K.has(ae[0])||!K.has(ae[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});W--;)X[W]||ne(M[W],W,new Set);return R;function ne(ae,te,ce){if(ce.has(ae)){var ee;try{ee=", node was:"+JSON.stringify(ae)}catch(re){ee=""}throw new Error("Cyclic dependency"+ee)}if(!K.has(ae))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(ae));if(!X[te]){X[te]=!0;var H=Y.get(ae)||new Set;if(H=Array.from(H),te=H.length){ce.add(ae);do{var se=H[--te];ne(se,K.get(se),ce)}while(te);ce.delete(ae)}R[--G]=ae}}}function I(M){for(var A=new Set,G=0,R=M.length;G<R;G++){var X=M[G];A.add(X[0]),A.add(X[1])}return Array.from(A)}function m(M){for(var A=new Map,G=0,R=M.length;G<R;G++){var X=M[G];A.has(X[0])||A.set(X[0],new Set),A.has(X[1])||A.set(X[1],new Set),A.get(X[0]).add(X[1])}return A}function _(M){for(var A=new Map,G=0,R=M.length;G<R;G++)A.set(M[G],G);return A}},"rAM+":function(le,P,h){"use strict";h.d(P,"a",function(){return m});var I=h("Qw5x");function m(_,M){var A=typeof Symbol!="undefined"&&_[Symbol.iterator]||_["@@iterator"];if(!A){if(Array.isArray(_)||(A=Object(I.a)(_))||M&&_&&typeof _.length=="number"){A&&(_=A);var G=0,R=function(){};return{s:R,n:function(){return G>=_.length?{done:!0}:{done:!1,value:_[G++]}},e:function(ne){throw ne},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var X=!0,W=!1,Y;return{s:function(){A=A.call(_)},n:function(){var ne=A.next();return X=ne.done,ne},e:function(ne){W=!0,Y=ne},f:function(){try{!X&&A.return!=null&&A.return()}finally{if(W)throw Y}}}}},rJ8t:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Block=void 0;var I=h("q1tI"),m=te(I),_=h("17x9"),M=te(_),A=h("/FUP"),G=te(A),R=h("QkVN"),X=te(R),W=h("p8yl"),Y=te(W),K=h("TM95"),ne=h("uDUr"),ae=te(ne);function te(ee){return ee&&ee.__esModule?ee:{default:ee}}var ce=P.Block=function(H){var se=H.onChange,re=H.onSwatchHover,q=H.hex,ye=H.colors,ue=H.width,ve=H.triangle,pe=H.styles,L=pe===void 0?{}:pe,ge=H.className,_e=ge===void 0?"":ge,Te=q==="transparent",we=function(Ue,Ct){Y.default.isValidHex(Ue)&&se({hex:Ue,source:"hex"},Ct)},Qe=(0,G.default)((0,X.default)({default:{card:{width:ue,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:q,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Y.default.getContrastingColor(q),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+q+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},L),{"hide-triangle":ve==="hide"});return m.default.createElement("div",{style:Qe.card,className:"block-picker "+_e},m.default.createElement("div",{style:Qe.triangle}),m.default.createElement("div",{style:Qe.head},Te&&m.default.createElement(K.Checkboard,{borderRadius:"6px 6px 0 0"}),m.default.createElement("div",{style:Qe.label},q)),m.default.createElement("div",{style:Qe.body},m.default.createElement(ae.default,{colors:ye,onClick:we,onSwatchHover:re}),m.default.createElement(K.EditableInput,{style:{input:Qe.input},value:q,onChange:we})))};ce.propTypes={width:M.default.oneOfType([M.default.string,M.default.number]),colors:M.default.arrayOf(M.default.string),triangle:M.default.oneOf(["top","hide"]),styles:M.default.object},ce.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},P.default=(0,K.ColorWrap)(ce)},s2cm:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M736 550H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208 130c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zM736 266H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208-194c39.8 0 72-32.2 72-72s-32.2-72-72-72-72 32.2-72 72 32.2 72 72 72zm0-96c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 64c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0 656c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}}]},name:"ungroup",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="UngroupOutlined";var R=P.a=m.forwardRef(G)},s8Cx:function(le,P,h){var I=h("3z9K");le.exports=_;var m=I.constant(1);function _(A,G,R){return M(A,G||m,R||function(X){return A.outEdges(X)})}function M(A,G,R){var X={},W=A.nodes();return W.forEach(function(Y){X[Y]={},X[Y][Y]={distance:0},W.forEach(function(K){Y!==K&&(X[Y][K]={distance:Number.POSITIVE_INFINITY})}),R(Y).forEach(function(K){var ne=K.v===Y?K.w:K.v,ae=G(K);X[Y][ne]={distance:ae,predecessor:Y}})}),W.forEach(function(Y){var K=X[Y];W.forEach(function(ne){var ae=X[ne];W.forEach(function(te){var ce=ae[Y],ee=K[te],H=ae[te],se=ce.distance+ee.distance;se<H.distance&&(H.distance=se,H.predecessor=ee.predecessor)})})}),X}},sE09:function(le,P,h){},sVjb:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.PhotoshopPointerCircle=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.PhotoshopPointerCircle=function(){var X=(0,M.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return m.default.createElement("div",{style:X.pointer},m.default.createElement("div",{style:X.left},m.default.createElement("div",{style:X.leftInside})),m.default.createElement("div",{style:X.right},m.default.createElement("div",{style:X.rightInside})))};P.default=G},sfHF:function(le,P,h){},si6p:function(le,P,h){var I,m,_;/*!
* jQuery Mousewheel 3.1.13
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license
* http://jquery.org/license
*/(function(M){m=[h("EVdn")],I=M,_=typeof I=="function"?I.apply(P,m):I,_!==void 0&&(le.exports=_)})(function(M){var A=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],G="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],R=Array.prototype.slice,X,W;if(M.event.fixHooks)for(var Y=A.length;Y;)M.event.fixHooks[A[--Y]]=M.event.mouseHooks;var K=M.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var ee=G.length;ee;)this.addEventListener(G[--ee],ne,!1);else this.onmousewheel=ne;M.data(this,"mousewheel-line-height",K.getLineHeight(this)),M.data(this,"mousewheel-page-height",K.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var ee=G.length;ee;)this.removeEventListener(G[--ee],ne,!1);else this.onmousewheel=null;M.removeData(this,"mousewheel-line-height"),M.removeData(this,"mousewheel-page-height")},getLineHeight:function(ee){var H=M(ee),se=H["offsetParent"in M.fn?"offsetParent":"parent"]();return se.length||(se=M("body")),parseInt(se.css("fontSize"),10)||parseInt(H.css("fontSize"),10)||16},getPageHeight:function(ee){return M(ee).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};M.fn.extend({mousewheel:function(ee){return ee?this.bind("mousewheel",ee):this.trigger("mousewheel")},unmousewheel:function(ee){return this.unbind("mousewheel",ee)}});function ne(ce){var ee=ce||window.event,H=R.call(arguments,1),se=0,re=0,q=0,ye=0,ue=0,ve=0;if(ce=M.event.fix(ee),ce.type="mousewheel","detail"in ee&&(q=ee.detail*-1),"wheelDelta"in ee&&(q=ee.wheelDelta),"wheelDeltaY"in ee&&(q=ee.wheelDeltaY),"wheelDeltaX"in ee&&(re=ee.wheelDeltaX*-1),"axis"in ee&&ee.axis===ee.HORIZONTAL_AXIS&&(re=q*-1,q=0),se=q===0?re:q,"deltaY"in ee&&(q=ee.deltaY*-1,se=q),"deltaX"in ee&&(re=ee.deltaX,q===0&&(se=re*-1)),!(q===0&&re===0)){if(ee.deltaMode===1){var pe=M.data(this,"mousewheel-line-height");se*=pe,q*=pe,re*=pe}else if(ee.deltaMode===2){var L=M.data(this,"mousewheel-page-height");se*=L,q*=L,re*=L}if(ye=Math.max(Math.abs(q),Math.abs(re)),(!W||ye<W)&&(W=ye,te(ee,ye)&&(W/=40)),te(ee,ye)&&(se/=40,re/=40,q/=40),se=Math[se>=1?"floor":"ceil"](se/W),re=Math[re>=1?"floor":"ceil"](re/W),q=Math[q>=1?"floor":"ceil"](q/W),K.settings.normalizeOffset&&this.getBoundingClientRect){var ge=this.getBoundingClientRect();ue=ce.clientX-ge.left,ve=ce.clientY-ge.top}return ce.deltaX=re,ce.deltaY=q,ce.deltaFactor=W,ce.offsetX=ue,ce.offsetY=ve,ce.deltaMode=0,H.unshift(ce,se,re,q),X&&clearTimeout(X),X=setTimeout(ae,200),(M.event.dispatch||M.event.handle).apply(this,H)}}function ae(){W=null}function te(ce,ee){return K.settings.adjustOldDeltas&&ce.type==="mousewheel"&&ee%120==0}})},sj7I:function(le,P){le.exports=h;function h(I,m,_){var M=Math.cos(_),A=Math.sin(_),G=m[0],R=m[1];return I[0]=G*M-R*A,I[1]=G*A+R*M,I}},srvI:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0});var I=P.calculateChange=function(_,M,A,G){_.preventDefault();var R=G.clientWidth,X=G.clientHeight,W=typeof _.pageX=="number"?_.pageX:_.touches[0].pageX,Y=typeof _.pageY=="number"?_.pageY:_.touches[0].pageY,K=W-(G.getBoundingClientRect().left+window.pageXOffset),ne=Y-(G.getBoundingClientRect().top+window.pageYOffset);if(M==="vertical"){var ae=void 0;if(ne<0)ae=359;else if(ne>X)ae=0;else{var te=-(ne*100/X)+100;ae=360*te/100}if(A.h!==ae)return{h:ae,s:A.s,l:A.l,a:A.a,source:"rgb"}}else{var ce=void 0;if(K<0)ce=0;else if(K>R)ce=359;else{var ee=K*100/R;ce=360*ee/100}if(A.h!==ce)return{h:ce,s:A.s,l:A.l,a:A.a,source:"rgb"}}return null}},swpM:function(le,P,h){var I=h("3z9K");le.exports=m,m.CycleException=_;function m(M){var A={},G={},R=[];function X(W){if(I.has(G,W))throw new _;I.has(A,W)||(G[W]=!0,A[W]=!0,I.each(M.predecessors(W),X),delete G[W],R.push(W))}if(I.each(M.sinks(),X),I.size(A)!==M.nodeCount())throw new _;return R}function _(){}},t8N9:function(le,P){le.exports=h;function h(I,m){var _=m[0],M=m[1],A=_*_+M*M;return A>0&&(A=1/Math.sqrt(A),I[0]=m[0]*A,I[1]=m[1]*A),I}},t8r4:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Swatches=void 0;var I=h("q1tI"),m=re(I),_=h("17x9"),M=re(_),A=h("/FUP"),G=re(A),R=h("3WF5"),X=re(R),W=h("QkVN"),Y=re(W),K=h("p8yl"),ne=re(K),ae=h("wME1"),te=se(ae),ce=h("TM95"),ee=h("Efrf"),H=re(ee);function se(ye){if(ye&&ye.__esModule)return ye;var ue={};if(ye!=null)for(var ve in ye)Object.prototype.hasOwnProperty.call(ye,ve)&&(ue[ve]=ye[ve]);return ue.default=ye,ue}function re(ye){return ye&&ye.__esModule?ye:{default:ye}}var q=P.Swatches=function(ue){var ve=ue.width,pe=ue.height,L=ue.onChange,ge=ue.onSwatchHover,_e=ue.colors,Te=ue.hex,we=ue.styles,Qe=we===void 0?{}:we,D=ue.className,Ue=D===void 0?"":D,Ct=(0,G.default)((0,Y.default)({default:{picker:{width:ve,height:pe},overflow:{height:pe,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},Qe)),ut=function(Kt,Je){ne.default.isValidHex(Kt)&&L({hex:Kt,source:"hex"},Je)};return m.default.createElement("div",{style:Ct.picker,className:"swatches-picker "+Ue},m.default.createElement(ce.Raised,null,m.default.createElement("div",{style:Ct.overflow},m.default.createElement("div",{style:Ct.body},(0,X.default)(_e,function(Nt){return m.default.createElement(H.default,{key:Nt.toString(),group:Nt,active:Te,onClick:ut,onSwatchHover:ge})}),m.default.createElement("div",{style:Ct.clear})))))};q.propTypes={width:M.default.oneOfType([M.default.string,M.default.number]),height:M.default.oneOfType([M.default.string,M.default.number]),colors:M.default.arrayOf(M.default.arrayOf(M.default.string)),styles:M.default.object},q.defaultProps={width:320,height:240,colors:[[te.red["900"],te.red["700"],te.red["500"],te.red["300"],te.red["100"]],[te.pink["900"],te.pink["700"],te.pink["500"],te.pink["300"],te.pink["100"]],[te.purple["900"],te.purple["700"],te.purple["500"],te.purple["300"],te.purple["100"]],[te.deepPurple["900"],te.deepPurple["700"],te.deepPurple["500"],te.deepPurple["300"],te.deepPurple["100"]],[te.indigo["900"],te.indigo["700"],te.indigo["500"],te.indigo["300"],te.indigo["100"]],[te.blue["900"],te.blue["700"],te.blue["500"],te.blue["300"],te.blue["100"]],[te.lightBlue["900"],te.lightBlue["700"],te.lightBlue["500"],te.lightBlue["300"],te.lightBlue["100"]],[te.cyan["900"],te.cyan["700"],te.cyan["500"],te.cyan["300"],te.cyan["100"]],[te.teal["900"],te.teal["700"],te.teal["500"],te.teal["300"],te.teal["100"]],["#194D33",te.green["700"],te.green["500"],te.green["300"],te.green["100"]],[te.lightGreen["900"],te.lightGreen["700"],te.lightGreen["500"],te.lightGreen["300"],te.lightGreen["100"]],[te.lime["900"],te.lime["700"],te.lime["500"],te.lime["300"],te.lime["100"]],[te.yellow["900"],te.yellow["700"],te.yellow["500"],te.yellow["300"],te.yellow["100"]],[te.amber["900"],te.amber["700"],te.amber["500"],te.amber["300"],te.amber["100"]],[te.orange["900"],te.orange["700"],te.orange["500"],te.orange["300"],te.orange["100"]],[te.deepOrange["900"],te.deepOrange["700"],te.deepOrange["500"],te.deepOrange["300"],te.deepOrange["100"]],[te.brown["900"],te.brown["700"],te.brown["500"],te.brown["300"],te.brown["100"]],[te.blueGrey["900"],te.blueGrey["700"],te.blueGrey["500"],te.blueGrey["300"],te.blueGrey["100"]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},P.default=(0,ce.ColorWrap)(q)},tpVr:function(le,P,h){var I=h("3z9K");le.exports=m;function m(_){var M={},A=[],G;function R(X){I.has(M,X)||(M[X]=!0,G.push(X),I.each(_.successors(X),R),I.each(_.predecessors(X),R))}return I.each(_.nodes(),function(X){G=[],R(X),G.length&&A.push(G)}),A}},trA2:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.SliderPointer=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.SliderPointer=function(X){var W=X.direction,Y=(0,M.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:W==="vertical"});return m.default.createElement("div",{style:Y.picker})};P.default=G},tu5P:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.ChromePointerCircle=void 0;var I=h("q1tI"),m=A(I),_=h("/FUP"),M=A(_);function A(R){return R&&R.__esModule?R:{default:R}}var G=P.ChromePointerCircle=function(){var X=(0,M.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return m.default.createElement("div",{style:X.picker})};P.default=G},tyuB:function(le,P,h){"use strict";h.d(P,"a",function(){return ut});var I=h("o0o1"),m=h.n(I),_=h("yXPU"),M=h.n(_),A=h("yG8O"),G=h.n(A),R=h("lwsE"),X=h.n(R),W=h("W8MJ"),Y=h.n(W),K=h("U+yc"),ne=h.n(K),ae=h("1ABj"),te=h.n(ae),ce=h("4cb6"),ee=h.n(ce),H=h("+uE7"),se=h("g1CP"),re=h("FlHB"),q=h("94HZ"),ye,ue,ve,pe,L,ge,_e,Te,we,Qe,D,Ue,Ct,ut=(ye=Object(ce.injectable)(),ue=Object(ce.inject)(H.a.Systems),ve=Object(ce.named)(H.a.FrameGraphSystem),pe=Object(ce.inject)(H.a.RenderPassFactory),L=Object(ce.inject)(H.a.ConfigService),ge=Object(ce.inject)(H.a.ResourcePool),ye(_e=(Te=(Ct=function(){function Nt(){X()(this,Nt),G()(this,"frameGraphSystem",we,this),G()(this,"renderPassFactory",Qe,this),G()(this,"configService",D,this),G()(this,"resourcePool",Ue,this)}return Y()(Nt,[{key:"execute",value:function(){var Kt=M()(m.a.mark(function Vt(Be){var ie,un,rn,rr,Pt,Tn,ur,Jt,fn;return m.a.wrap(function(En){for(;;)switch(En.prev=En.next){case 0:ie=this.renderPassFactory(q.a.IDENTIFIER),un=ie.setup,rn=ie.execute,rr=this.frameGraphSystem.addPass(q.a.IDENTIFIER,un,rn),Pt=this.renderPassFactory(se.a.IDENTIFIER),Tn=Pt.setup,ur=Pt.execute,Jt=Pt.tearDown,fn=this.frameGraphSystem.addPass(se.a.IDENTIFIER,Tn,ur,Jt),this.frameGraphSystem.present(fn.data.output);case 5:case"end":return En.stop()}},Vt,this)}));function Je(Vt){return Kt.apply(this,arguments)}return Je}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(Je,Vt){var Be=this.renderPassFactory(re.a.IDENTIFIER);return Be.pick(Je,Vt)}}]),Nt}(),Ct),we=ne()(Te.prototype,"frameGraphSystem",[ue,ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qe=ne()(Te.prototype,"renderPassFactory",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=ne()(Te.prototype,"configService",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ue=ne()(Te.prototype,"resourcePool",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Te))||_e)},u6oY:function(le,P){le.exports=h;function h(I,m,_){return I[0]=m[0]*_[0],I[1]=m[1]*_[1],I}},uDUr:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BlockSwatches=void 0;var I=h("q1tI"),m=X(I),_=h("/FUP"),M=X(_),A=h("3WF5"),G=X(A),R=h("TM95");function X(Y){return Y&&Y.__esModule?Y:{default:Y}}var W=P.BlockSwatches=function(K){var ne=K.colors,ae=K.onClick,te=K.onSwatchHover,ce=(0,M.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return m.default.createElement("div",{style:ce.swatches},(0,G.default)(ne,function(ee){return m.default.createElement(R.Swatch,{key:ee,color:ee,style:ce.swatch,onClick:ae,onHover:te,focusStyle:{boxShadow:"0 0 4px "+ee}})}),m.default.createElement("div",{style:ce.clear}))};P.default=W},uP9N:function(le,P,h){var I=h("3z9K"),m=h("WZrV");le.exports=M;var _=I.constant(1);function M(G,R,X,W){return A(G,String(R),X||_,W||function(Y){return G.outEdges(Y)})}function A(G,R,X,W){var Y={},K=new m,ne,ae,te=function(ee){var H=ee.v!==ne?ee.v:ee.w,se=Y[H],re=X(ee),q=ae.distance+re;if(re<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ee+" Weight: "+re);q<se.distance&&(se.distance=q,se.predecessor=ne,K.decrease(H,q))};for(G.nodes().forEach(function(ce){var ee=ce===R?0:Number.POSITIVE_INFINITY;Y[ce]={distance:ee},K.add(ce,ee)});K.size()>0&&(ne=K.removeMin(),ae=Y[ne],ae.distance!==Number.POSITIVE_INFINITY);)W(ne).forEach(te);return Y}},uPCe:function(le,P,h){le.exports=h("cGwC")},ujMp:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.circularDependencyToException=P.listMetadataForTarget=P.listRegisteredBindingsForServiceIdentifier=P.getServiceIdentifierAsString=P.getFunctionName=void 0;var I=h("MON2");function m(W){if(typeof W=="function"){var Y=W;return Y.name}else{if(typeof W=="symbol")return W.toString();var Y=W;return Y}}P.getServiceIdentifierAsString=m;function _(W,Y,K){var ne="",ae=K(W,Y);return ae.length!==0&&(ne=`
Registered bindings:`,ae.forEach(function(te){var ce="Object";te.implementationType!==null&&(ce=X(te.implementationType)),ne=ne+`
 `+ce,te.constraint.metaData&&(ne=ne+" - "+te.constraint.metaData)})),ne}P.listRegisteredBindingsForServiceIdentifier=_;function M(W,Y){return W.parentRequest===null?!1:W.parentRequest.serviceIdentifier===Y?!0:M(W.parentRequest,Y)}function A(W){function Y(ne,ae){ae===void 0&&(ae=[]);var te=m(ne.serviceIdentifier);return ae.push(te),ne.parentRequest!==null?Y(ne.parentRequest,ae):ae}var K=Y(W);return K.reverse().join(" --> ")}function G(W){W.childRequests.forEach(function(Y){if(M(Y,Y.serviceIdentifier)){var K=A(Y);throw new Error(I.CIRCULAR_DEPENDENCY+" "+K)}else G(Y)})}P.circularDependencyToException=G;function R(W,Y){if(Y.isTagged()||Y.isNamed()){var K="",ne=Y.getNamedTag(),ae=Y.getCustomTags();return ne!==null&&(K+=ne.toString()+`
`),ae!==null&&ae.forEach(function(te){K+=te.toString()+`
`})," "+W+`
 `+W+" - "+K}else return" "+W}P.listMetadataForTarget=R;function X(W){if(W.name)return W.name;var Y=W.toString(),K=Y.match(/^function\s*([^\s(]+)/);return K?K[1]:"Anonymous function: "+Y}P.getFunctionName=X},"vN+2":function(le,P){function h(){}le.exports=h},vdMR:function(le,P){},"vip/":function(le,P,h){le.exports=h("yEj1")},vlGe:function(le,P,h){"use strict";h.r(P),function(I,m){h.d(P,"Container",function(){return ie}),h.d(P,"Contribution",function(){return En}),h.d(P,"DefaultContributionProvider",function(){return Pt}),h.d(P,"GlobalContainer",function(){return un}),h.d(P,"Module",function(){return fn}),h.d(P,"OptionSymbol",function(){return Kt}),h.d(P,"Provider",function(){return rr}),h.d(P,"Syringe",function(){return re}),h.d(P,"SyringeModule",function(){return Jt}),h.d(P,"Utils",function(){return q}),h.d(P,"contrib",function(){return Mn}),h.d(P,"inject",function(){return ut}),h.d(P,"injectable",function(){return D}),h.d(P,"named",function(){return Nt}),h.d(P,"register",function(){return rn}),h.d(P,"registerSideOption",function(){return Je}),h.d(P,"singleton",function(){return Ue}),h.d(P,"transient",function(){return Ct});var _=h("4cb6"),M=h.n(_);h.d(P,"decorate",function(){return _.decorate}),h.d(P,"optional",function(){return _.optional}),h.d(P,"postConstruct",function(){return _.postConstruct}),h.d(P,"unmanaged",function(){return _.unmanaged});function A(lt,Tt){var st=Object.keys(lt);if(Object.getOwnPropertySymbols){var At=Object.getOwnPropertySymbols(lt);Tt&&(At=At.filter(function(Ot){return Object.getOwnPropertyDescriptor(lt,Ot).enumerable})),st.push.apply(st,At)}return st}function G(lt){for(var Tt=1;Tt<arguments.length;Tt++){var st=arguments[Tt]!=null?arguments[Tt]:{};Tt%2?A(Object(st),!0).forEach(function(At){K(lt,At,st[At])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(st)):A(Object(st)).forEach(function(At){Object.defineProperty(lt,At,Object.getOwnPropertyDescriptor(st,At))})}return lt}function R(lt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R=function(st){return typeof st}:R=function(st){return st&&typeof Symbol=="function"&&st.constructor===Symbol&&st!==Symbol.prototype?"symbol":typeof st},R(lt)}function X(lt,Tt){if(!(lt instanceof Tt))throw new TypeError("Cannot call a class as a function")}function W(lt,Tt){for(var st=0;st<Tt.length;st++){var At=Tt[st];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(lt,At.key,At)}}function Y(lt,Tt,st){return Tt&&W(lt.prototype,Tt),st&&W(lt,st),lt}function K(lt,Tt,st){return Tt in lt?Object.defineProperty(lt,Tt,{value:st,enumerable:!0,configurable:!0,writable:!0}):lt[Tt]=st,lt}function ne(lt){return ae(lt)||te(lt)||ce(lt)||H()}function ae(lt){if(Array.isArray(lt))return ee(lt)}function te(lt){if(typeof Symbol!="undefined"&&lt[Symbol.iterator]!=null||lt["@@iterator"]!=null)return Array.from(lt)}function ce(lt,Tt){if(!!lt){if(typeof lt=="string")return ee(lt,Tt);var st=Object.prototype.toString.call(lt).slice(8,-1);if(st==="Object"&&lt.constructor&&(st=lt.constructor.name),st==="Map"||st==="Set")return Array.from(lt);if(st==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(st))return ee(lt,Tt)}}function ee(lt,Tt){(Tt==null||Tt>lt.length)&&(Tt=lt.length);for(var st=0,At=new Array(Tt);st<Tt;st++)At[st]=lt[st];return At}function H(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var se;(function(lt){(function(Tt){var st=typeof m=="object"?m:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),At=Ot(lt);typeof st.Reflect=="undefined"?st.Reflect=lt:At=Ot(st.Reflect,At),Tt(At);function Ot(dt,at){return function(T,bn){typeof dt[T]!="function"&&Object.defineProperty(dt,T,{configurable:!0,writable:!0,value:bn}),at&&at(T,bn)}}})(function(Tt){var st=Object.prototype.hasOwnProperty,At=typeof Symbol=="function",Ot=At&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",dt=At&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",at=typeof Object.create=="function",T={__proto__:[]}instanceof Array,bn=!at&&!T,an={create:at?function(){return su(Object.create(null))}:T?function(){return su({__proto__:null})}:function(){return su({})},has:bn?function(nn,On){return st.call(nn,On)}:function(nn,On){return On in nn},get:bn?function(nn,On){return st.call(nn,On)?nn[On]:void 0}:function(nn,On){return nn[On]}},Jn=Object.getPrototypeOf(Function),Qn=typeof I=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",De=!Qn&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Is(),be=!Qn&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:Hs(),Xe=!Qn&&typeof WeakMap=="function"?WeakMap:Ws(),Yt=new Xe;function ln(nn,On,vr,It){if(ra(vr)){if(!po(nn))throw new TypeError;if(!Us(On))throw new TypeError;return Ji(nn,On)}else{if(!po(nn))throw new TypeError;if(!si(On))throw new TypeError;if(!si(It)&&!ra(It)&&!di(It))throw new TypeError;return di(It)&&(It=void 0),vr=To(vr),jo(nn,On,vr,It)}}Tt("decorate",ln);function lr(nn,On){function vr(It,jt){if(!si(It))throw new TypeError;if(!ra(jt)&&!Wu(jt))throw new TypeError;mi(nn,On,It,jt)}return vr}Tt("metadata",lr);function Hr(nn,On,vr,It){if(!si(vr))throw new TypeError;return ra(It)||(It=To(It)),mi(nn,On,vr,It)}Tt("defineMetadata",Hr);function ar(nn,On,vr){if(!si(On))throw new TypeError;return ra(vr)||(vr=To(vr)),ji(nn,On,vr)}Tt("hasMetadata",ar);function mr(nn,On,vr){if(!si(On))throw new TypeError;return ra(vr)||(vr=To(vr)),Li(nn,On,vr)}Tt("hasOwnMetadata",mr);function yr(nn,On,vr){if(!si(On))throw new TypeError;return ra(vr)||(vr=To(vr)),Aa(nn,On,vr)}Tt("getMetadata",yr);function kr(nn,On,vr){if(!si(On))throw new TypeError;return ra(vr)||(vr=To(vr)),ki(nn,On,vr)}Tt("getOwnMetadata",kr);function Ur(nn,On){if(!si(nn))throw new TypeError;return ra(On)||(On=To(On)),na(nn,On)}Tt("getMetadataKeys",Ur);function Va(nn,On){if(!si(nn))throw new TypeError;return ra(On)||(On=To(On)),Ki(nn,On)}Tt("getOwnMetadataKeys",Va);function da(nn,On,vr){if(!si(On))throw new TypeError;ra(vr)||(vr=To(vr));var It=ri(On,vr,!1);if(ra(It)||!It.delete(nn))return!1;if(It.size>0)return!0;var jt=Yt.get(On);return jt.delete(vr),jt.size>0||Yt.delete(On),!0}Tt("deleteMetadata",da);function Ji(nn,On){for(var vr=nn.length-1;vr>=0;--vr){var It=nn[vr],jt=It(On);if(!ra(jt)&&!di(jt)){if(!Us(jt))throw new TypeError;On=jt}}return On}function jo(nn,On,vr,It){for(var jt=nn.length-1;jt>=0;--jt){var Bn=nn[jt],pn=Bn(On,vr,It);if(!ra(pn)&&!di(pn)){if(!si(pn))throw new TypeError;It=pn}}return It}function ri(nn,On,vr){var It=Yt.get(nn);if(ra(It)){if(!vr)return;It=new De,Yt.set(nn,It)}var jt=It.get(On);if(ra(jt)){if(!vr)return;jt=new De,It.set(On,jt)}return jt}function ji(nn,On,vr){var It=Li(nn,On,vr);if(It)return!0;var jt=ou(On);return di(jt)?!1:ji(nn,jt,vr)}function Li(nn,On,vr){var It=ri(On,vr,!1);return ra(It)?!1:zi(It.has(nn))}function Aa(nn,On,vr){var It=Li(nn,On,vr);if(It)return ki(nn,On,vr);var jt=ou(On);if(!di(jt))return Aa(nn,jt,vr)}function ki(nn,On,vr){var It=ri(On,vr,!1);if(!ra(It))return It.get(nn)}function mi(nn,On,vr,It){var jt=ri(vr,It,!0);jt.set(nn,On)}function na(nn,On){var vr=Ki(nn,On),It=ou(nn);if(It===null)return vr;var jt=na(It,On);if(jt.length<=0)return vr;if(vr.length<=0)return jt;for(var Bn=new be,pn=[],on=0,qt=vr;on<qt.length;on++){var mn=qt[on],vn=Bn.has(mn);vn||(Bn.add(mn),pn.push(mn))}for(var hr=0,Nn=jt;hr<Nn.length;hr++){var mn=Nn[hr],vn=Bn.has(mn);vn||(Bn.add(mn),pn.push(mn))}return pn}function Ki(nn,On){var vr=[],It=ri(nn,On,!1);if(ra(It))return vr;for(var jt=It.keys(),Bn=$u(jt),pn=0;;){var on=Zo(Bn);if(!on)return vr.length=pn,vr;var qt=iu(on);try{vr[pn]=qt}catch(mn){try{Vs(Bn)}finally{throw mn}}pn++}}function go(nn){if(nn===null)return 1;switch(typeof nn){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return nn===null?1:6;default:return 6}}function ra(nn){return nn===void 0}function di(nn){return nn===null}function So(nn){return typeof nn=="symbol"}function si(nn){return typeof nn=="object"?nn!==null:typeof nn=="function"}function Si(nn,On){switch(go(nn)){case 0:return nn;case 1:return nn;case 2:return nn;case 3:return nn;case 4:return nn;case 5:return nn}var vr=On===3?"string":On===5?"number":"default",It=Lo(nn,Ot);if(It!==void 0){var jt=It.call(nn,vr);if(si(jt))throw new TypeError;return jt}return yi(nn,vr==="default"?"number":vr)}function yi(nn,On){if(On==="string"){var vr=nn.toString;if(Yo(vr)){var It=vr.call(nn);if(!si(It))return It}var jt=nn.valueOf;if(Yo(jt)){var It=jt.call(nn);if(!si(It))return It}}else{var jt=nn.valueOf;if(Yo(jt)){var It=jt.call(nn);if(!si(It))return It}var Bn=nn.toString;if(Yo(Bn)){var It=Bn.call(nn);if(!si(It))return It}}throw new TypeError}function zi(nn){return!!nn}function Ko(nn){return""+nn}function To(nn){var On=Si(nn,3);return So(On)?On:Ko(On)}function po(nn){return Array.isArray?Array.isArray(nn):nn instanceof Object?nn instanceof Array:Object.prototype.toString.call(nn)==="[object Array]"}function Yo(nn){return typeof nn=="function"}function Us(nn){return typeof nn=="function"}function Wu(nn){switch(go(nn)){case 3:return!0;case 4:return!0;default:return!1}}function Lo(nn,On){var vr=nn[On];if(vr!=null){if(!Yo(vr))throw new TypeError;return vr}}function $u(nn){var On=Lo(nn,dt);if(!Yo(On))throw new TypeError;var vr=On.call(nn);if(!si(vr))throw new TypeError;return vr}function iu(nn){return nn.value}function Zo(nn){var On=nn.next();return On.done?!1:On}function Vs(nn){var On=nn.return;On&&On.call(nn)}function ou(nn){var On=Object.getPrototypeOf(nn);if(typeof nn!="function"||nn===Jn||On!==Jn)return On;var vr=nn.prototype,It=vr&&Object.getPrototypeOf(vr);if(It==null||It===Object.prototype)return On;var jt=It.constructor;return typeof jt!="function"||jt===nn?On:jt}function Is(){var nn={},On=[],vr=function(){function pn(on,qt,mn){this._index=0,this._keys=on,this._values=qt,this._selector=mn}return pn.prototype["@@iterator"]=function(){return this},pn.prototype[dt]=function(){return this},pn.prototype.next=function(){var on=this._index;if(on>=0&&on<this._keys.length){var qt=this._selector(this._keys[on],this._values[on]);return on+1>=this._keys.length?(this._index=-1,this._keys=On,this._values=On):this._index++,{value:qt,done:!1}}return{value:void 0,done:!0}},pn.prototype.throw=function(on){throw this._index>=0&&(this._index=-1,this._keys=On,this._values=On),on},pn.prototype.return=function(on){return this._index>=0&&(this._index=-1,this._keys=On,this._values=On),{value:on,done:!0}},pn}();return function(){function pn(){this._keys=[],this._values=[],this._cacheKey=nn,this._cacheIndex=-2}return Object.defineProperty(pn.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),pn.prototype.has=function(on){return this._find(on,!1)>=0},pn.prototype.get=function(on){var qt=this._find(on,!1);return qt>=0?this._values[qt]:void 0},pn.prototype.set=function(on,qt){var mn=this._find(on,!0);return this._values[mn]=qt,this},pn.prototype.delete=function(on){var qt=this._find(on,!1);if(qt>=0){for(var mn=this._keys.length,vn=qt+1;vn<mn;vn++)this._keys[vn-1]=this._keys[vn],this._values[vn-1]=this._values[vn];return this._keys.length--,this._values.length--,on===this._cacheKey&&(this._cacheKey=nn,this._cacheIndex=-2),!0}return!1},pn.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=nn,this._cacheIndex=-2},pn.prototype.keys=function(){return new vr(this._keys,this._values,It)},pn.prototype.values=function(){return new vr(this._keys,this._values,jt)},pn.prototype.entries=function(){return new vr(this._keys,this._values,Bn)},pn.prototype["@@iterator"]=function(){return this.entries()},pn.prototype[dt]=function(){return this.entries()},pn.prototype._find=function(on,qt){return this._cacheKey!==on&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=on)),this._cacheIndex<0&&qt&&(this._cacheIndex=this._keys.length,this._keys.push(on),this._values.push(void 0)),this._cacheIndex},pn}();function It(pn,on){return pn}function jt(pn,on){return on}function Bn(pn,on){return[pn,on]}}function Hs(){return function(){function nn(){this._map=new De}return Object.defineProperty(nn.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),nn.prototype.has=function(On){return this._map.has(On)},nn.prototype.add=function(On){return this._map.set(On,On),this},nn.prototype.delete=function(On){return this._map.delete(On)},nn.prototype.clear=function(){this._map.clear()},nn.prototype.keys=function(){return this._map.keys()},nn.prototype.values=function(){return this._map.values()},nn.prototype.entries=function(){return this._map.entries()},nn.prototype["@@iterator"]=function(){return this.keys()},nn.prototype[dt]=function(){return this.keys()},nn}()}function Ws(){var nn=16,On=an.create(),vr=It();return function(){function qt(){this._key=It()}return qt.prototype.has=function(mn){var vn=jt(mn,!1);return vn!==void 0?an.has(vn,this._key):!1},qt.prototype.get=function(mn){var vn=jt(mn,!1);return vn!==void 0?an.get(vn,this._key):void 0},qt.prototype.set=function(mn,vn){var hr=jt(mn,!0);return hr[this._key]=vn,this},qt.prototype.delete=function(mn){var vn=jt(mn,!1);return vn!==void 0?delete vn[this._key]:!1},qt.prototype.clear=function(){this._key=It()},qt}();function It(){var qt;do qt="@@WeakMap@@"+on();while(an.has(On,qt));return On[qt]=!0,qt}function jt(qt,mn){if(!st.call(qt,vr)){if(!mn)return;Object.defineProperty(qt,vr,{value:an.create()})}return qt[vr]}function Bn(qt,mn){for(var vn=0;vn<mn;++vn)qt[vn]=Math.random()*255|0;return qt}function pn(qt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(qt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(qt)):Bn(new Uint8Array(qt),qt):Bn(new Array(qt),qt)}function on(){var qt=pn(nn);qt[6]=qt[6]&79|64,qt[8]=qt[8]&191|128;for(var mn="",vn=0;vn<nn;++vn){var hr=qt[vn];(vn===4||vn===6||vn===8)&&(mn+="-"),hr<16&&(mn+="0"),mn+=hr.toString(16).toLowerCase()}return mn}}function su(nn){return nn.__=void 0,delete nn.__,nn}})})(se||(se={}));var re;(function(lt){lt.defineToken=function(Ot){var dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{multiple:!0};return new lt.DefinedToken(Ot,dt)};var Tt=function Ot(dt){var at=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};X(this,Ot),this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;var T=at.multiple,bn=T===void 0?!1:T;this.name=dt,this.symbol=Symbol(this.name),this.multiple=bn};lt.DefinedToken=Tt;function st(Ot){return!!Ot&&R(Ot)==="object"&&"id"in Ot&&"registry"in Ot}lt.isModule=st;var At;(function(Ot){Ot.singleton="singleton",Ot.transient="transient"})(At=lt.Lifecycle||(lt.Lifecycle={})),lt.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),lt.DefaultOption={lifecycle:At.transient}})(re||(re={}));var q;(function(lt){function Tt(T){return T instanceof Array?T:T!==void 0?[T]:[]}lt.maybeArrayToArray=Tt;function st(T){return!!(T&&typeof T=="function"&&"prototype"in T)}lt.isClass=st;function At(T){return!!(T&&R(T)==="object"&&"symbol"in T&&"multiple"in T)}lt.isDefinedToken=At;function Ot(T){return!!(T&&R(T)==="object"&&"token"in T)}lt.isInjectOption=Ot;function dt(T){return!!(T&&R(T)==="object"&&"token"in T&&"named"in T)}lt.isNamedToken=dt;function at(T){return lt.isDefinedToken(T)&&T.multiple}lt.isMultipleEnabled=at})(q||(q={}));function ye(lt){return lt.inSingletonScope()}function ue(lt){return lt.inTransientScope()}function ve(lt,Tt){return Tt.lifecycle===re.Lifecycle.singleton?ye(lt):ue(lt)}function pe(lt,Tt){lt.whenTargetNamed(Te(Tt))}function L(lt,Tt){return Tt.container.bind(we(lt))}function ge(lt,Tt){var st=Tt.container.parent,At=st&&st.isBound(we(lt));return Tt.container.isBound(we(lt))&&!At?Tt.container.rebind(we(lt)):Tt.container.bind(we(lt))}function _e(lt){return lt&&R(lt)==="object"&&"container"in lt&&"inversify"in lt}function Te(lt){return q.isDefinedToken(lt)?lt.symbol:lt}function we(lt){return q.isDefinedToken(lt)?lt.symbol:lt}var Qe=new _.Container;function D(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Tt=Object(_.injectable)();return function(st){Reflect.defineMetadata(re.ClassOptionSymbol,G(G({},lt),{},{target:st}),st),Tt(st)}}function Ue(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return D(G(G({},lt),{},{lifecycle:re.Lifecycle.singleton}))}function Ct(){var lt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return D(G(G({},lt),{},{lifecycle:re.Lifecycle.transient}))}function ut(lt){return Object(_.inject)(we(lt))}function Nt(lt){return Object(_.named)(Te(lt))}var Kt=Symbol("SyringeOptionSymbol"),Je=function(Tt,st){Reflect.defineMetadata(Kt,Tt,st)};function Vt(lt){var Tt=q.maybeArrayToArray(lt.token),st=q.maybeArrayToArray(lt.useClass),At=q.maybeArrayToArray(lt.useDynamic),Ot=q.maybeArrayToArray(lt.useFactory),dt=q.maybeArrayToArray(lt.contrib),at=lt.lifecycle||re.Lifecycle.transient,T={token:Tt,useClass:st,lifecycle:dt.length>0?re.Lifecycle.singleton:at,contrib:dt,useDynamic:At,useFactory:Ot};return"useValue"in lt&&(T.useValue=lt.useValue),T}var Be=function(){function lt(Tt,st,At){X(this,lt),this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.context=void 0,this.mutiple=void 0,this.context=Tt,this.token=st,this.option=At,this.rawToken=q.isNamedToken(st)?st.token:st,this.named=q.isNamedToken(st)?st.named:void 0,this.mutiple=!!this.named||q.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return Y(lt,[{key:"resolve",value:function(){var st=this,At=this.context;!_e(At)||(this.mutiple?this.resolveMutilple(At):(this.resolveMono(At),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach(function(Ot){q.isMultipleEnabled(Ot)?L(Ot,At).toService(st.generalToken):ge(Ot,At).toService(st.generalToken)})))}},{key:"resolveMono",value:function(st){var At=this;if("useValue"in this.option)return ge(this.generalToken,st).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var Ot=this.option.useDynamic[this.option.useDynamic.length-1];return ve(ge(this.generalToken,st).toDynamicValue(function(){return Ot({container:At.context})}),this.option)}if(this.option.useFactory.length>0){var dt=this.option.useFactory[this.option.useFactory.length-1];return ge(this.generalToken,st).toFactory(function(){return dt({container:At.context})})}if(this.option.useClass.length>0){var at=this.option.useClass[this.option.useClass.length-1];return ve(ge(this.generalToken,st).to(at),this.option)}}},{key:"resolveMutilple",value:function(st){var At=this,Ot=this.option.useClass.map(function(bn){return ve(L(At.generalToken,st).to(bn),At.option)}),dt=this.option.useDynamic.map(function(bn){return ve(L(At.generalToken,st).toDynamicValue(function(){return bn({container:At.context})}),At.option)}),at=this.option.useFactory.map(function(bn){return L(At.generalToken,st).toFactory(function(){return bn({container:At.context})})}),T="useValue"in this.option?L(this.generalToken,st).toConstantValue(this.option.useValue):void 0;this.named&&(Ot.forEach(function(bn){return At.named&&pe(bn,At.named)}),dt.forEach(function(bn){return At.named&&pe(bn,At.named)}),at.forEach(function(bn){return At.named&&pe(bn,At.named)}),T&&pe(T,this.named))}}],[{key:"resolveTarget",value:function(st,At){var Ot=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{try{var dt=Reflect.getMetadata(Kt,At);dt&&lt.resolveOption(st,dt)}catch(an){}if(q.isClass(At))if(!Ot.useClass)Ot.useClass=[At];else{var at=q.maybeArrayToArray(Ot.useClass);at.unshift(At),Ot.useClass=at}var T;try{T=Reflect.getMetadata(re.ClassOptionSymbol,At)}catch(an){}if(T=G(G({},T||{}),Ot),!T.token)T.token=[At];else{var bn=q.maybeArrayToArray(T.token);bn.unshift(At),T.token=bn}lt.resolveOption(st,T)}catch(an){}}},{key:"resolveOption",value:function(st,At){var Ot=Vt(G(G({},lt.globalConfig),At));Ot.useClass.length===0&&Ot.useDynamic.length===0&&Ot.useFactory.length===0&&!("useValue"in Ot)||Ot.token.forEach(function(dt){var at=new lt(st,dt,G({},Ot));at.resolve()})}}]),lt}();Be.globalConfig=re.DefaultOption;var ie=function(){function lt(Tt){X(this,lt),this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,Tt?this.container=Tt:this.container=new _.Container}return Y(lt,[{key:"load",value:function(st,At){(At||!this.loadedModules.includes(st.id))&&(st.registry(this.register.bind(this),this.resolveContext()),this.loadedModules.push(st.id))}},{key:"remove",value:function(st){return this.container.unbind(we(st))}},{key:"get",value:function(st){return this.container.get(we(st))}},{key:"getNamed",value:function(st,At){return this.container.getNamed(we(st),Te(At))}},{key:"getAll",value:function(st){return this.container.getAll(we(st))}},{key:"getAllNamed",value:function(st,At){return this.container.getAllNamed(we(st),Te(At))}},{key:"isBound",value:function(st){return this.container.isBound(we(st))}},{key:"isBoundNamed",value:function(st,At){return this.container.isBoundNamed(we(st),Te(At))}},{key:"createChild",value:function(){var st=this.container.createChild(),At=new lt(st);return At.parent=this,At}},{key:"register",value:function(st){var At=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q.isInjectOption(st)?Be.resolveOption(this,st):Be.resolveTarget(this,st,At)}},{key:"resolveContext",value:function(){return{container:this}}}],[{key:"config",value:function(st){Be.globalConfig=st}}]),lt}(),un=new ie(Qe),rn=un.register.bind(un),rr=re.defineToken("ContributionProvider"),Pt=function(){function lt(Tt,st,At){X(this,lt),this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=st,this.serviceIdentifier=Tt,At&&(this.option=G(G({},this.option),At))}return Y(lt,[{key:"setServices",value:function(st){for(var At=[],Ot=this.container;Ot;){if(Ot.isBound(this.serviceIdentifier)){var dt=Ot.getAll(this.serviceIdentifier);At.push.apply(At,ne(dt))}Ot=st?Ot.parent:void 0}return At}},{key:"getContributions",value:function(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},At=G(G({},this.option),st),Ot=At.cache,dt=At.recursive;return(!Ot||this.services===void 0)&&(this.services=this.setServices(!!dt)),this.services}}]),lt}();function Tn(lt,Tt){return{token:{token:rr,named:lt},useDynamic:function(At){return new Pt(lt,At.container,Tt)},lifecycle:re.Lifecycle.singleton}}function ur(lt,Tt,st){lt({token:{token:rr,named:Tt},useDynamic:function(Ot){return new Pt(Tt,Ot.container,st)},lifecycle:re.Lifecycle.singleton})}var Jt=function(){function lt(Tt){X(this,lt),this.id=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,lt.moduleId+=1,this.id=lt.moduleId,this.baseRegistry=Tt}return Y(lt,[{key:"registry",get:function(){var st=this;return function(At,Ot){st.baseRegistry&&st.baseRegistry(At,Ot),st.optionCollection&&st.optionCollection.forEach(function(dt){return At(dt)})}}},{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var st=this,At=arguments.length,Ot=new Array(At),dt=0;dt<At;dt++)Ot[dt]=arguments[dt];return Ot.forEach(function(at){return st.options.push(at)}),this}},{key:"contribution",value:function(){for(var st=this,At=arguments.length,Ot=new Array(At),dt=0;dt<At;dt++)Ot[dt]=arguments[dt];return Ot.forEach(function(at){return st.options.push(Tn(at))}),this}}]),lt}();Jt.moduleId=0;function fn(lt){return new Jt(lt)}var Mn=function(Tt){return function(st,At,Ot){Nt(Tt)(st,At,Ot),ut(rr)(st,At,Ot)}},En;(function(lt){lt.Provider=rr,lt.register=ur})(En||(En={}))}.call(this,h("Q2Ig"),h("IyRk"))},w4Tj:function(le,P,h){"use strict";h.d(P,"a",function(){return _});var I=h("oZsa");function m(M,A){for(;!Object.prototype.hasOwnProperty.call(M,A)&&(M=Object(I.a)(M),M!==null););return M}function _(){return typeof Reflect!="undefined"&&Reflect.get?_=Reflect.get.bind():_=function(A,G,R){var X=m(A,G);if(!!X){var W=Object.getOwnPropertyDescriptor(X,G);return W.get?W.get.call(arguments.length<3?A:R):W.value}},_.apply(this,arguments)}},wME1:function(le,P,h){"use strict";h.r(P),h.d(P,"red",function(){return I}),h.d(P,"pink",function(){return m}),h.d(P,"purple",function(){return _}),h.d(P,"deepPurple",function(){return M}),h.d(P,"indigo",function(){return A}),h.d(P,"blue",function(){return G}),h.d(P,"lightBlue",function(){return R}),h.d(P,"cyan",function(){return X}),h.d(P,"teal",function(){return W}),h.d(P,"green",function(){return Y}),h.d(P,"lightGreen",function(){return K}),h.d(P,"lime",function(){return ne}),h.d(P,"yellow",function(){return ae}),h.d(P,"amber",function(){return te}),h.d(P,"orange",function(){return ce}),h.d(P,"deepOrange",function(){return ee}),h.d(P,"brown",function(){return H}),h.d(P,"grey",function(){return se}),h.d(P,"blueGrey",function(){return re}),h.d(P,"darkText",function(){return q}),h.d(P,"lightText",function(){return ye}),h.d(P,"darkIcons",function(){return ue}),h.d(P,"lightIcons",function(){return ve}),h.d(P,"white",function(){return pe}),h.d(P,"black",function(){return L});var I={"50":"#ffebee","100":"#ffcdd2","200":"#ef9a9a","300":"#e57373","400":"#ef5350","500":"#f44336","600":"#e53935","700":"#d32f2f","800":"#c62828","900":"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},m={"50":"#fce4ec","100":"#f8bbd0","200":"#f48fb1","300":"#f06292","400":"#ec407a","500":"#e91e63","600":"#d81b60","700":"#c2185b","800":"#ad1457","900":"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},_={"50":"#f3e5f5","100":"#e1bee7","200":"#ce93d8","300":"#ba68c8","400":"#ab47bc","500":"#9c27b0","600":"#8e24aa","700":"#7b1fa2","800":"#6a1b9a","900":"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},M={"50":"#ede7f6","100":"#d1c4e9","200":"#b39ddb","300":"#9575cd","400":"#7e57c2","500":"#673ab7","600":"#5e35b1","700":"#512da8","800":"#4527a0","900":"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},A={"50":"#e8eaf6","100":"#c5cae9","200":"#9fa8da","300":"#7986cb","400":"#5c6bc0","500":"#3f51b5","600":"#3949ab","700":"#303f9f","800":"#283593","900":"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},G={"50":"#e3f2fd","100":"#bbdefb","200":"#90caf9","300":"#64b5f6","400":"#42a5f5","500":"#2196f3","600":"#1e88e5","700":"#1976d2","800":"#1565c0","900":"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},R={"50":"#e1f5fe","100":"#b3e5fc","200":"#81d4fa","300":"#4fc3f7","400":"#29b6f6","500":"#03a9f4","600":"#039be5","700":"#0288d1","800":"#0277bd","900":"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},X={"50":"#e0f7fa","100":"#b2ebf2","200":"#80deea","300":"#4dd0e1","400":"#26c6da","500":"#00bcd4","600":"#00acc1","700":"#0097a7","800":"#00838f","900":"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},W={"50":"#e0f2f1","100":"#b2dfdb","200":"#80cbc4","300":"#4db6ac","400":"#26a69a","500":"#009688","600":"#00897b","700":"#00796b","800":"#00695c","900":"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Y={"50":"#e8f5e9","100":"#c8e6c9","200":"#a5d6a7","300":"#81c784","400":"#66bb6a","500":"#4caf50","600":"#43a047","700":"#388e3c","800":"#2e7d32","900":"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},K={"50":"#f1f8e9","100":"#dcedc8","200":"#c5e1a5","300":"#aed581","400":"#9ccc65","500":"#8bc34a","600":"#7cb342","700":"#689f38","800":"#558b2f","900":"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},ne={"50":"#f9fbe7","100":"#f0f4c3","200":"#e6ee9c","300":"#dce775","400":"#d4e157","500":"#cddc39","600":"#c0ca33","700":"#afb42b","800":"#9e9d24","900":"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},ae={"50":"#fffde7","100":"#fff9c4","200":"#fff59d","300":"#fff176","400":"#ffee58","500":"#ffeb3b","600":"#fdd835","700":"#fbc02d","800":"#f9a825","900":"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},te={"50":"#fff8e1","100":"#ffecb3","200":"#ffe082","300":"#ffd54f","400":"#ffca28","500":"#ffc107","600":"#ffb300","700":"#ffa000","800":"#ff8f00","900":"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},ce={"50":"#fff3e0","100":"#ffe0b2","200":"#ffcc80","300":"#ffb74d","400":"#ffa726","500":"#ff9800","600":"#fb8c00","700":"#f57c00","800":"#ef6c00","900":"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ee={"50":"#fbe9e7","100":"#ffccbc","200":"#ffab91","300":"#ff8a65","400":"#ff7043","500":"#ff5722","600":"#f4511e","700":"#e64a19","800":"#d84315","900":"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},H={"50":"#efebe9","100":"#d7ccc8","200":"#bcaaa4","300":"#a1887f","400":"#8d6e63","500":"#795548","600":"#6d4c41","700":"#5d4037","800":"#4e342e","900":"#3e2723"},se={"50":"#fafafa","100":"#f5f5f5","200":"#eeeeee","300":"#e0e0e0","400":"#bdbdbd","500":"#9e9e9e","600":"#757575","700":"#616161","800":"#424242","900":"#212121"},re={"50":"#eceff1","100":"#cfd8dc","200":"#b0bec5","300":"#90a4ae","400":"#78909c","500":"#607d8b","600":"#546e7a","700":"#455a64","800":"#37474f","900":"#263238"},q={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},ye={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},ue={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},ve={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},pe="#ffffff",L="#000000";P.default={red:I,pink:m,purple:_,deepPurple:M,indigo:A,blue:G,lightBlue:R,cyan:X,teal:W,green:Y,lightGreen:K,lime:ne,yellow:ae,amber:te,orange:ce,deepOrange:ee,brown:H,grey:se,blueGrey:re,darkText:q,lightText:ye,darkIcons:ue,lightIcons:ve,white:pe,black:L}},wTVA:function(le,P){function h(I){if(Array.isArray(I))return I}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},wkBT:function(le,P){function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},wkyg:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.HuePicker=void 0;var I=Object.assign||function(ce){for(var ee=1;ee<arguments.length;ee++){var H=arguments[ee];for(var se in H)Object.prototype.hasOwnProperty.call(H,se)&&(ce[se]=H[se])}return ce},m=h("q1tI"),_=ae(m),M=h("17x9"),A=ae(M),G=h("/FUP"),R=ae(G),X=h("QkVN"),W=ae(X),Y=h("TM95"),K=h("trA2"),ne=ae(K);function ae(ce){return ce&&ce.__esModule?ce:{default:ce}}var te=P.HuePicker=function(ee){var H=ee.width,se=ee.height,re=ee.onChange,q=ee.hsl,ye=ee.direction,ue=ee.pointer,ve=ee.styles,pe=ve===void 0?{}:ve,L=ee.className,ge=L===void 0?"":L,_e=(0,R.default)((0,W.default)({default:{picker:{position:"relative",width:H,height:se},hue:{radius:"2px"}}},pe)),Te=function(Qe){return re({a:1,h:Qe.h,l:.5,s:1})};return _.default.createElement("div",{style:_e.picker,className:"hue-picker "+ge},_.default.createElement(Y.Hue,I({},_e.hue,{hsl:q,pointer:ue,onChange:Te,direction:ye})))};te.propTypes={styles:A.default.object},te.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:ne.default,styles:{}},P.default=(0,Y.ColorWrap)(te)},wnjb:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.MetadataReader=void 0;var I=h("xfSm"),m=function(){function _(){}return _.prototype.getConstructorMetadata=function(M){var A=Reflect.getMetadata(I.PARAM_TYPES,M),G=Reflect.getMetadata(I.TAGGED,M);return{compilerGeneratedMetadata:A,userGeneratedMetadata:G||{}}},_.prototype.getPropertiesMetadata=function(M){var A=Reflect.getMetadata(I.TAGGED_PROP,M)||[];return A},_}();P.MetadataReader=m},xDUe:function(le,P){le.exports=h;function h(I,m,_,M){var A=m[0],G=m[1];return I[0]=A+M*(_[0]-A),I[1]=G+M*(_[1]-G),I}},xbjo:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.CircleSwatch=void 0;var I=h("q1tI"),m=G(I),_=h("/FUP"),M=G(_),A=h("TM95");function G(X){return X&&X.__esModule?X:{default:X}}var R=P.CircleSwatch=function(W){var Y=W.color,K=W.onClick,ne=W.onSwatchHover,ae=W.hover,te=W.active,ce=W.circleSize,ee=W.circleSpacing,H=(0,M.default)({default:{swatch:{width:ce,height:ce,marginRight:ee,marginBottom:ee,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+ce/2+"px "+Y,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+Y}}},{hover:ae,active:te});return m.default.createElement("div",{style:H.swatch},m.default.createElement(A.Swatch,{style:H.Swatch,color:Y,onClick:K,onHover:ne,focusStyle:{boxShadow:H.Swatch.boxShadow+", 0 0 5px "+Y}}))};R.defaultProps={circleSize:28,circleSpacing:14},P.default=(0,_.handleHover)(R)},xdlL:function(le,P,h){"use strict";h.d(P,"a",function(){return _});var I=h("iZzK"),m=h("cHpt");function _(M,A,G){return Object(m.a)()?_=Reflect.construct.bind():_=function(X,W,Y){var K=[null];K.push.apply(K,W);var ne=Function.bind.apply(X,K),ae=new ne;return Y&&Object(I.a)(ae,Y.prototype),ae},_.apply(null,arguments)}},xfSm:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.NON_CUSTOM_TAG_KEYS=P.POST_CONSTRUCT=P.DESIGN_PARAM_TYPES=P.PARAM_TYPES=P.TAGGED_PROP=P.TAGGED=P.MULTI_INJECT_TAG=P.INJECT_TAG=P.OPTIONAL_TAG=P.UNMANAGED_TAG=P.NAME_TAG=P.NAMED_TAG=void 0,P.NAMED_TAG="named",P.NAME_TAG="name",P.UNMANAGED_TAG="unmanaged",P.OPTIONAL_TAG="optional",P.INJECT_TAG="inject",P.MULTI_INJECT_TAG="multi_inject",P.TAGGED="inversify:tagged",P.TAGGED_PROP="inversify:tagged_props",P.PARAM_TYPES="inversify:paramtypes",P.DESIGN_PARAM_TYPES="design:paramtypes",P.POST_CONSTRUCT="post_construct";function I(){return[P.INJECT_TAG,P.MULTI_INJECT_TAG,P.NAME_TAG,P.UNMANAGED_TAG,P.NAMED_TAG,P.OPTIONAL_TAG]}P.NON_CUSTOM_TAG_KEYS=I()},xiII:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Request=void 0;var I=h("d9O0"),m=function(){function _(M,A,G,R,X){this.id=I.id(),this.serviceIdentifier=M,this.parentContext=A,this.parentRequest=G,this.target=X,this.childRequests=[],this.bindings=Array.isArray(R)?R:[R],this.requestScope=G===null?new Map:null}return _.prototype.addChildRequest=function(M,A,G){var R=new _(M,this.parentContext,this,A,G);return this.childRequests.push(R),R},_}();P.Request=m},xutz:function(le,P,h){"use strict";(function(I){var m=h("XqMk"),_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,M=_&&typeof I=="object"&&I&&!I.nodeType&&I,A=M&&M.exports===_,G=A&&m.a.process,R=function(){try{var X=M&&M.require&&M.require("util").types;return X||G&&G.binding&&G.binding("util")}catch(W){}}();P.a=R}).call(this,h("Vg/k")(le))},yAXI:function(le,P,h){"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I=typeof Symbol=="function"&&Symbol.for,m=I?Symbol.for("react.element"):60103,_=I?Symbol.for("react.portal"):60106,M=I?Symbol.for("react.fragment"):60107,A=I?Symbol.for("react.strict_mode"):60108,G=I?Symbol.for("react.profiler"):60114,R=I?Symbol.for("react.provider"):60109,X=I?Symbol.for("react.context"):60110,W=I?Symbol.for("react.async_mode"):60111,Y=I?Symbol.for("react.concurrent_mode"):60111,K=I?Symbol.for("react.forward_ref"):60112,ne=I?Symbol.for("react.suspense"):60113,ae=I?Symbol.for("react.suspense_list"):60120,te=I?Symbol.for("react.memo"):60115,ce=I?Symbol.for("react.lazy"):60116,ee=I?Symbol.for("react.block"):60121,H=I?Symbol.for("react.fundamental"):60117,se=I?Symbol.for("react.responder"):60118,re=I?Symbol.for("react.scope"):60119;function q(ue){if(typeof ue=="object"&&ue!==null){var ve=ue.$$typeof;switch(ve){case m:switch(ue=ue.type,ue){case W:case Y:case M:case G:case A:case ne:return ue;default:switch(ue=ue&&ue.$$typeof,ue){case X:case K:case ce:case te:case R:return ue;default:return ve}}case _:return ve}}}function ye(ue){return q(ue)===Y}P.AsyncMode=W,P.ConcurrentMode=Y,P.ContextConsumer=X,P.ContextProvider=R,P.Element=m,P.ForwardRef=K,P.Fragment=M,P.Lazy=ce,P.Memo=te,P.Portal=_,P.Profiler=G,P.StrictMode=A,P.Suspense=ne,P.isAsyncMode=function(ue){return ye(ue)||q(ue)===W},P.isConcurrentMode=ye,P.isContextConsumer=function(ue){return q(ue)===X},P.isContextProvider=function(ue){return q(ue)===R},P.isElement=function(ue){return typeof ue=="object"&&ue!==null&&ue.$$typeof===m},P.isForwardRef=function(ue){return q(ue)===K},P.isFragment=function(ue){return q(ue)===M},P.isLazy=function(ue){return q(ue)===ce},P.isMemo=function(ue){return q(ue)===te},P.isPortal=function(ue){return q(ue)===_},P.isProfiler=function(ue){return q(ue)===G},P.isStrictMode=function(ue){return q(ue)===A},P.isSuspense=function(ue){return q(ue)===ne},P.isValidElementType=function(ue){return typeof ue=="string"||typeof ue=="function"||ue===M||ue===Y||ue===G||ue===A||ue===ne||ue===ae||typeof ue=="object"&&ue!==null&&(ue.$$typeof===ce||ue.$$typeof===te||ue.$$typeof===R||ue.$$typeof===X||ue.$$typeof===K||ue.$$typeof===H||ue.$$typeof===se||ue.$$typeof===re||ue.$$typeof===ee)},P.typeOf=q},yEj1:function(le,P){le.exports=h;function h(I){var m=I[0],_=I[1];return Math.sqrt(m*m+_*_)}},yG8O:function(le,P){function h(I,m,_,M){!_||Object.defineProperty(I,m,{enumerable:_.enumerable,configurable:_.configurable,writable:_.writable,value:_.initializer?_.initializer.call(M):void 0})}le.exports=h,le.exports.__esModule=!0,le.exports.default=le.exports},yMAV:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Plan=void 0;var I=function(){function m(_,M){this.parentContext=_,this.rootRequest=M}return m}();P.Plan=I},yOY4:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.Alpha=void 0;var I=Object.assign||function(H){for(var se=1;se<arguments.length;se++){var re=arguments[se];for(var q in re)Object.prototype.hasOwnProperty.call(re,q)&&(H[q]=re[q])}return H},m=function(){function H(se,re){for(var q=0;q<re.length;q++){var ye=re[q];ye.enumerable=ye.enumerable||!1,ye.configurable=!0,"value"in ye&&(ye.writable=!0),Object.defineProperty(se,ye.key,ye)}}return function(se,re,q){return re&&H(se.prototype,re),q&&H(se,q),se}}(),_=h("q1tI"),M=ne(_),A=h("/FUP"),G=ne(A),R=h("THLb"),X=K(R),W=h("Nq3d"),Y=ne(W);function K(H){if(H&&H.__esModule)return H;var se={};if(H!=null)for(var re in H)Object.prototype.hasOwnProperty.call(H,re)&&(se[re]=H[re]);return se.default=H,se}function ne(H){return H&&H.__esModule?H:{default:H}}function ae(H,se){if(!(H instanceof se))throw new TypeError("Cannot call a class as a function")}function te(H,se){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:H}function ce(H,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);H.prototype=Object.create(se&&se.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(H,se):H.__proto__=se)}var ee=P.Alpha=function(H){ce(se,H);function se(){var re,q,ye,ue;ae(this,se);for(var ve=arguments.length,pe=Array(ve),L=0;L<ve;L++)pe[L]=arguments[L];return ue=(q=(ye=te(this,(re=se.__proto__||Object.getPrototypeOf(se)).call.apply(re,[this].concat(pe))),ye),ye.handleChange=function(ge){var _e=X.calculateChange(ge,ye.props.hsl,ye.props.direction,ye.props.a,ye.container);_e&&typeof ye.props.onChange=="function"&&ye.props.onChange(_e,ge)},ye.handleMouseDown=function(ge){ye.handleChange(ge),window.addEventListener("mousemove",ye.handleChange),window.addEventListener("mouseup",ye.handleMouseUp)},ye.handleMouseUp=function(){ye.unbindEventListeners()},ye.unbindEventListeners=function(){window.removeEventListener("mousemove",ye.handleChange),window.removeEventListener("mouseup",ye.handleMouseUp)},q),te(ye,ue)}return m(se,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var q=this,ye=this.props.rgb,ue=(0,G.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+ye.r+","+ye.g+","+ye.b+`, 0) 0%,
           rgba(`+ye.r+","+ye.g+","+ye.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:ye.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+ye.r+","+ye.g+","+ye.b+`, 0) 0%,
           rgba(`+ye.r+","+ye.g+","+ye.b+", 1) 100%)"},pointer:{left:0,top:ye.a*100+"%"}},overwrite:I({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return M.default.createElement("div",{style:ue.alpha},M.default.createElement("div",{style:ue.checkboard},M.default.createElement(Y.default,{renderers:this.props.renderers})),M.default.createElement("div",{style:ue.gradient}),M.default.createElement("div",{style:ue.container,ref:function(pe){return q.container=pe},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},M.default.createElement("div",{style:ue.pointer},this.props.pointer?M.default.createElement(this.props.pointer,this.props):M.default.createElement("div",{style:ue.slider}))))}}]),se}(_.PureComponent||_.Component);P.default=ee},yXPU:function(le,P){function h(m,_,M,A,G,R,X){try{var W=m[R](X),Y=W.value}catch(K){M(K);return}W.done?_(Y):Promise.resolve(Y).then(A,G)}function I(m){return function(){var _=this,M=arguments;return new Promise(function(A,G){var R=m.apply(_,M);function X(Y){h(R,A,G,X,W,"next",Y)}function W(Y){h(R,A,G,X,W,"throw",Y)}X(void 0)})}}le.exports=I,le.exports.__esModule=!0,le.exports.default=le.exports},yZ5d:function(le,P,h){"use strict";h.d(P,"a",function(){return ve});var I=h("lSNA"),m=h.n(I),_=h("lwsE"),M=h.n(_),A=h("W8MJ"),G=h.n(A),R=h("4cb6");function X(pe){var L=0;switch(pe){case"vec2":case"ivec2":L=2;break;case"vec3":case"ivec3":L=3;break;case"vec4":case"ivec4":case"mat2":L=4;break;case"mat3":L=9;break;case"mat4":L=16;break;default:}return L}var W=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Y(pe){var L={};return pe=pe.replace(W,function(ge,_e,Te){var we=Te.split(":"),Qe=we[0].trim(),D="";switch(we.length>1&&(D=we[1].trim()),_e){case"bool":D=D==="true";break;case"float":case"int":D=Number(D);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":D?D=D.replace("[","").replace("]","").split(",").reduce(function(Ue,Ct){return Ue.push(Number(Ct.trim())),Ue},[]):D=new Array(X(_e)).fill(0);break;default:}return L[Qe]=D,"uniform ".concat(_e," ").concat(Qe,`;
`)}),{content:pe,uniforms:L}}function K(pe){return pe.filter(function(L,ge,_e){return _e.indexOf(L)===ge})}var ne,ae,te;function ce(pe,L){var ge=Object.keys(pe);if(Object.getOwnPropertySymbols){var _e=Object.getOwnPropertySymbols(pe);L&&(_e=_e.filter(function(Te){return Object.getOwnPropertyDescriptor(pe,Te).enumerable})),ge.push.apply(ge,_e)}return ge}function ee(pe){for(var L=1;L<arguments.length;L++){var ge=arguments[L]!=null?arguments[L]:{};L%2?ce(Object(ge),!0).forEach(function(_e){m()(pe,_e,ge[_e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pe,Object.getOwnPropertyDescriptors(ge)):ce(Object(ge)).forEach(function(_e){Object.defineProperty(pe,_e,Object.getOwnPropertyDescriptor(ge,_e))})}return pe}var H=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,se=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,re=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,q=/precision\s+(high|low|medium)p\s+float/,ye=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,ue=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,ve=(ne=Object(R.injectable)(),ne(ae=(te=function(){function pe(){M()(this,pe),this.moduleCache={},this.rawContentCache={}}return G()(pe,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:se,fs:H}),this.registerModule("sdf2d",{vs:"",fs:re})}},{key:"registerModule",value:function(ge,_e){if(!this.rawContentCache[ge]){var Te=_e.vs,we=Te===void 0?"":Te,Qe=_e.fs,D=Qe===void 0?"":Qe,Ue=_e.uniforms,Ct=Y(we),ut=Ct.content,Nt=Ct.uniforms,Kt=Y(D),Je=Kt.content,Vt=Kt.uniforms;this.rawContentCache[ge]={fs:Je,uniforms:ee(ee(ee({},Nt),Vt),Ue),vs:ut}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(ge){var _e=this;if(this.moduleCache[ge])return this.moduleCache[ge];var Te=this.rawContentCache[ge].vs||"",we=this.rawContentCache[ge].fs||"",Qe=this.processModule(Te,[],"vs"),D=Qe.content,Ue=Qe.includeList,Ct=this.processModule(we,[],"fs"),ut=Ct.content,Nt=Ct.includeList,Kt=ut,Je=K(Ue.concat(Nt).concat(ge)).reduce(function(Vt,Be){return ee(ee({},Vt),_e.rawContentCache[Be].uniforms)},{});return q.test(ut)||(Kt=ye+ut),this.moduleCache[ge]={fs:Kt.trim(),uniforms:Je,vs:D.trim()},this.moduleCache[ge]}},{key:"processModule",value:function(ge,_e,Te){var we=this,Qe=ge.replace(ue,function(D,Ue){var Ct=Ue.split(" "),ut=Ct[0].replace(/"/g,"");if(_e.indexOf(ut)>-1)return"";var Nt=we.rawContentCache[ut][Te];_e.push(ut);var Kt=we.processModule(Nt||"",_e,Te),Je=Kt.content;return Je});return{content:Qe,includeList:_e}}}]),pe}(),te))||ae)},yaXH:function(le,P){},z4Hk:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.BindingWhenSyntax=void 0;var I=h("406g"),m=h("RR/i"),_=function(){function M(A){this._binding=A}return M.prototype.when=function(A){return this._binding.constraint=A,new I.BindingOnSyntax(this._binding)},M.prototype.whenTargetNamed=function(A){return this._binding.constraint=m.namedConstraint(A),new I.BindingOnSyntax(this._binding)},M.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(A){var G=A.target!==null&&!A.target.isNamed()&&!A.target.isTagged();return G},new I.BindingOnSyntax(this._binding)},M.prototype.whenTargetTagged=function(A,G){return this._binding.constraint=m.taggedConstraint(A)(G),new I.BindingOnSyntax(this._binding)},M.prototype.whenInjectedInto=function(A){return this._binding.constraint=function(G){return m.typeConstraint(A)(G.parentRequest)},new I.BindingOnSyntax(this._binding)},M.prototype.whenParentNamed=function(A){return this._binding.constraint=function(G){return m.namedConstraint(A)(G.parentRequest)},new I.BindingOnSyntax(this._binding)},M.prototype.whenParentTagged=function(A,G){return this._binding.constraint=function(R){return m.taggedConstraint(A)(G)(R.parentRequest)},new I.BindingOnSyntax(this._binding)},M.prototype.whenAnyAncestorIs=function(A){return this._binding.constraint=function(G){return m.traverseAncerstors(G,m.typeConstraint(A))},new I.BindingOnSyntax(this._binding)},M.prototype.whenNoAncestorIs=function(A){return this._binding.constraint=function(G){return!m.traverseAncerstors(G,m.typeConstraint(A))},new I.BindingOnSyntax(this._binding)},M.prototype.whenAnyAncestorNamed=function(A){return this._binding.constraint=function(G){return m.traverseAncerstors(G,m.namedConstraint(A))},new I.BindingOnSyntax(this._binding)},M.prototype.whenNoAncestorNamed=function(A){return this._binding.constraint=function(G){return!m.traverseAncerstors(G,m.namedConstraint(A))},new I.BindingOnSyntax(this._binding)},M.prototype.whenAnyAncestorTagged=function(A,G){return this._binding.constraint=function(R){return m.traverseAncerstors(R,m.taggedConstraint(A)(G))},new I.BindingOnSyntax(this._binding)},M.prototype.whenNoAncestorTagged=function(A,G){return this._binding.constraint=function(R){return!m.traverseAncerstors(R,m.taggedConstraint(A)(G))},new I.BindingOnSyntax(this._binding)},M.prototype.whenAnyAncestorMatches=function(A){return this._binding.constraint=function(G){return m.traverseAncerstors(G,A)},new I.BindingOnSyntax(this._binding)},M.prototype.whenNoAncestorMatches=function(A){return this._binding.constraint=function(G){return!m.traverseAncerstors(G,A)},new I.BindingOnSyntax(this._binding)},M}();P.BindingWhenSyntax=_},z5Mu:function(le,P,h){"use strict";h.d(P,"a",function(){return un});var I=h("J4zp"),m=h.n(I),_=h("o0o1"),M=h.n(_),A=h("yXPU"),G=h.n(A),R=h("yG8O"),X=h.n(R),W=h("lwsE"),Y=h.n(W),K=h("W8MJ"),ne=h.n(K),ae=h("U+yc"),te=h.n(ae),ce=h("1ABj"),ee=h("4cb6"),H=h("+uE7"),se=function rn(){Y()(this,rn),this.index=void 0},re=function rn(){Y()(this,rn),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},q=function(){function rn(){Y()(this,rn),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return ne()(rn,[{key:"read",value:function(Pt){return this.reads.find(function(Tn){return Tn.index===Pt.index})||this.reads.push(Pt),Pt}},{key:"sample",value:function(Pt){return this.read(Pt),Pt}},{key:"write",value:function(Pt,Tn){var ur=this.writes.find(function(En){return En.index===Tn.index});if(ur)return Tn;var Jt=Pt.getResourceNode(Tn);Jt.resource.version++,Jt.resource.imported&&(this.hasSideEffect=!0);var fn=Pt.createResourceNode(Jt.resource),Mn=Pt.getResourceNode(fn);return Mn.writer=this,this.writes.push(fn),fn}}]),rn}(),ye=h("7W2i"),ue=h.n(ye),ve=h("a1gu"),pe=h.n(ve),L=h("Nsbk"),ge=h.n(L),_e=function rn(){Y()(this,rn),this.first=void 0,this.last=void 0};function Te(rn){var rr=we();return function(){var Tn=ge()(rn),ur;if(rr){var Jt=ge()(this).constructor;ur=Reflect.construct(Tn,arguments,Jt)}else ur=Tn.apply(this,arguments);return pe()(this,ur)}}function we(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(rn){return!1}}var Qe=function(rn){ue()(Pt,rn);var rr=Te(Pt);function Pt(){var Tn;Y()(this,Pt);for(var ur=arguments.length,Jt=new Array(ur),fn=0;fn<ur;fn++)Jt[fn]=arguments[fn];return Tn=rr.call.apply(rr,[this].concat(Jt)),Tn.version=0,Tn.refs=0,Tn.name=void 0,Tn.imported=void 0,Tn.priority=void 0,Tn.discardStart=!0,Tn.discardEnd=!1,Tn.descriptor=void 0,Tn.resource=void 0,Tn}return ne()(Pt,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){!this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){!this.imported}}]),Pt}(_e),D=function rn(){Y()(this,rn),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},Ue,Ct,ut,Nt,Kt,Je;function Vt(rn,rr){var Pt;if(typeof Symbol=="undefined"||rn[Symbol.iterator]==null){if(Array.isArray(rn)||(Pt=Be(rn))||rr&&rn&&typeof rn.length=="number"){Pt&&(rn=Pt);var Tn=0,ur=function(){};return{s:ur,n:function(){return Tn>=rn.length?{done:!0}:{done:!1,value:rn[Tn++]}},e:function(lt){throw lt},f:ur}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Jt=!0,fn=!1,Mn;return{s:function(){Pt=rn[Symbol.iterator]()},n:function(){var lt=Pt.next();return Jt=lt.done,lt},e:function(lt){fn=!0,Mn=lt},f:function(){try{!Jt&&Pt.return!=null&&Pt.return()}finally{if(fn)throw Mn}}}}function Be(rn,rr){if(!!rn){if(typeof rn=="string")return ie(rn,rr);var Pt=Object.prototype.toString.call(rn).slice(8,-1);if(Pt==="Object"&&rn.constructor&&(Pt=rn.constructor.name),Pt==="Map"||Pt==="Set")return Array.from(rn);if(Pt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pt))return ie(rn,rr)}}function ie(rn,rr){(rr==null||rr>rn.length)&&(rr=rn.length);for(var Pt=0,Tn=new Array(rr);Pt<rr;Pt++)Tn[Pt]=rn[Pt];return Tn}var un=(Ue=Object(ee.injectable)(),Ct=Object(ee.inject)(H.a.RenderEngine),Ue(ut=(Nt=(Je=function(){function rn(){Y()(this,rn),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],X()(this,"engine",Kt,this)}return ne()(rn,[{key:"execute",value:function(){var rr=G()(M.a.mark(function Tn(ur){return M.a.wrap(function(fn){for(;;)switch(fn.prev=fn.next){case 0:return this.compile(),fn.next=3,this.executePassNodes(ur);case 3:case"end":return fn.stop()}},Tn,this)}));function Pt(Tn){return rr.apply(this,arguments)}return Pt}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(Pt){Pt.tearDown&&Pt.tearDown()}),this.reset()}},{key:"addPass",value:function(Pt,Tn,ur,Jt){var fn=new re;fn.execute=ur,Jt&&(fn.tearDown=Jt),fn.name=Pt;var Mn=new q;return Mn.name=Pt,this.passNodes.push(Mn),this.frameGraphPasses.push(fn),Tn(this,Mn,fn),fn}},{key:"getPass",value:function(Pt){return this.frameGraphPasses.find(function(Tn){return Tn.name===Pt})}},{key:"compile",value:function(){var Pt=this,Tn=Vt(this.passNodes),ur;try{for(Tn.s();!(ur=Tn.n()).done;){var Jt=ur.value;Jt.refCount=Jt.writes.length+(Jt.hasSideEffect?1:0),Jt.reads.forEach(function(da){Pt.resourceNodes[da.index].readerCount++})}}catch(da){Tn.e(da)}finally{Tn.f()}var fn=[],Mn=Vt(this.resourceNodes),En;try{for(Mn.s();!(En=Mn.n()).done;){var lt=En.value;lt.readerCount===0&&fn.push(lt)}}catch(da){Mn.e(da)}finally{Mn.f()}for(;fn.length;){var Tt=fn.pop(),st=Tt&&Tt.writer;if(st&&--st.refCount==0){var At=Vt(st.reads),Ot;try{for(At.s();!(Ot=At.n()).done;){var dt=Ot.value,at=this.resourceNodes[dt.index];--at.readerCount==0&&fn.push(at)}}catch(da){At.e(da)}finally{At.f()}}}this.resourceNodes.forEach(function(da){da.resource.refs+=da.readerCount});var T=Vt(this.passNodes),bn;try{for(T.s();!(bn=T.n()).done;){var an=bn.value;if(!!an.refCount){var Jn=Vt(an.reads),Qn;try{for(Jn.s();!(Qn=Jn.n()).done;){var De=Qn.value,be=this.resourceNodes[De.index].resource;be.first=be.first?be.first:an,be.last=an}}catch(da){Jn.e(da)}finally{Jn.f()}var Xe=Vt(an.writes),Yt;try{for(Xe.s();!(Yt=Xe.n()).done;){var ln=Yt.value,lr=this.resourceNodes[ln.index].resource;lr.first=lr.first?lr.first:an,lr.last=an}}catch(da){Xe.e(da)}finally{Xe.f()}}}}catch(da){T.e(da)}finally{T.f()}for(var Hr=0;Hr<2;Hr++){var ar=Vt(this.resourceNodes),mr;try{for(ar.s();!(mr=ar.n()).done;){var yr=mr.value,kr=yr.resource;if(kr.priority===Hr&&kr.refs){var Ur=kr.first,Va=kr.last;Ur&&Va&&(Ur.devirtualize.push(kr),Va.destroy.push(kr))}}}catch(da){ar.e(da)}finally{ar.f()}}}},{key:"executePassNodes",value:function(){var rr=G()(M.a.mark(function Tn(ur){var Jt,fn,Mn,En,lt,Tt,st,At,Ot,dt,at,T,bn,an,Jn,Qn,De;return M.a.wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:Jt=Vt(this.passNodes.entries()),Xe.prev=1,Jt.s();case 3:if((fn=Jt.n()).done){Xe.next=18;break}if(Mn=m()(fn.value,2),En=Mn[0],lt=Mn[1],!lt.refCount){Xe.next=16;break}Tt=Vt(lt.devirtualize);try{for(Tt.s();!(st=Tt.n()).done;)At=st.value,At.preExecuteDevirtualize(this.engine)}catch(Yt){Tt.e(Yt)}finally{Tt.f()}Ot=Vt(lt.destroy);try{for(Ot.s();!(dt=Ot.n()).done;)at=dt.value,at.preExecuteDestroy(this.engine)}catch(Yt){Ot.e(Yt)}finally{Ot.f()}return Xe.next=12,this.frameGraphPasses[En].execute(this,this.frameGraphPasses[En],ur);case 12:T=Vt(lt.devirtualize);try{for(T.s();!(bn=T.n()).done;)an=bn.value,an.postExecuteDevirtualize(this.engine)}catch(Yt){T.e(Yt)}finally{T.f()}Jn=Vt(lt.destroy);try{for(Jn.s();!(Qn=Jn.n()).done;)De=Qn.value,De.postExecuteDestroy(this.engine)}catch(Yt){Jn.e(Yt)}finally{Jn.f()}case 16:Xe.next=3;break;case 18:Xe.next=23;break;case 20:Xe.prev=20,Xe.t0=Xe.catch(1),Jt.e(Xe.t0);case 23:return Xe.prev=23,Jt.f(),Xe.finish(23);case 26:this.reset();case 27:case"end":return Xe.stop()}},Tn,this,[[1,20,23,26]])}));function Pt(Tn){return rr.apply(this,arguments)}return Pt}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(Pt){return this.resourceNodes[Pt.index]}},{key:"createResourceNode",value:function(Pt){var Tn=new D;Tn.resource=Pt,Tn.version=Pt.version,this.resourceNodes.push(Tn);var ur=new se;return ur.index=this.resourceNodes.length-1,ur}},{key:"createTexture",value:function(Pt,Tn,ur){var Jt=new Qe;return Jt.name=Tn,Jt.descriptor=ur,this.createResourceNode(Jt)}},{key:"createRenderTarget",value:function(Pt,Tn,ur){var Jt=new Qe;return Jt.name=Tn,Jt.descriptor=ur,this.createResourceNode(Jt)}},{key:"present",value:function(Pt){this.addPass("Present",function(Tn,ur){ur.read(Pt),ur.hasSideEffect=!0},G()(M.a.mark(function Tn(){return M.a.wrap(function(Jt){for(;;)switch(Jt.prev=Jt.next){case 0:case"end":return Jt.stop()}},Tn)})))}}]),rn}(),Je),Kt=te()(Nt.prototype,"engine",[Ct],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt))||ut)},zLyj:function(le,P){le.exports=h;function h(I,m){return I[0]=Math.ceil(m[0]),I[1]=Math.ceil(m[1]),I}},zs7G:function(le,P,h){"use strict";var I=h("VTBJ"),m=h("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},M=_,A=h("6VBw"),G=function(W,Y){return m.createElement(A.a,Object(I.a)(Object(I.a)({},W),{},{ref:Y,icon:M}))};G.displayName="DoubleRightOutlined";var R=P.a=m.forwardRef(G)},zxMA:function(le,P,h){"use strict";Object.defineProperty(P,"__esModule",{value:!0}),P.QueryableString=void 0;var I=function(){function m(_){this.str=_}return m.prototype.startsWith=function(_){return this.str.indexOf(_)===0},m.prototype.endsWith=function(_){var M="",A=_.split("").reverse().join("");return M=this.str.split("").reverse().join(""),this.startsWith.call({str:M},A)},m.prototype.contains=function(_){return this.str.indexOf(_)!==-1},m.prototype.equals=function(_){return this.str===_},m.prototype.value=function(){return this.str},m}();P.QueryableString=I}}]);
