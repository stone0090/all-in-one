(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{"+A2u":function(fe,T){fe.exports=v;function v(B,C,_){return B[0]=Math.max(C[0],_[0]),B[1]=Math.max(C[1],_[1]),B}},"+RHd":function(fe,T){},"+n+1":function(fe,T){fe.exports=v;function v(B,C,_,P){return B[0]=C[0]+_[0]*P,B[1]=C[1]+_[1]*P,B}},"+sJh":function(fe,T){fe.exports=v;function v(B,C,_){return B[0]=C[0]+_[0],B[1]=C[1]+_[1],B}},"+uE7":function(fe,T,v){"use strict";v.d(T,"a",function(){return B});var B={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")}},"+xCn":function(fe,T,v){"use strict";v.d(T,"b",function(){return R}),v.d(T,"a",function(){return q});var B=v("J4zp"),C=v.n(B),_=v("IOcx");function P(Z){return typeof Z=="number"}function N(Z){return Z===void 0?0:Z>360||Z<-360?Z%360:Z}function z(Z,X,ne){return P(Z)?_.d.fromValues(Z,X,ne):Z.length===3?_.d.clone(Z):_.d.fromValues(Z[0],Z[1],Z[2])}function R(Z,X){return X[0]=Z[0],X[1]=Z[1],X[2]=Z[2],X[3]=Z[4],X[4]=Z[5],X[5]=Z[6],X[6]=Z[8],X[7]=Z[9],X[8]=Z[10],X}function q(Z){var X=C()(Z,3),ne=X[0],ie=X[1],te=X[2],ce=ne+ie*256+te*65536-1;return ce}function W(Z){return[Z+1&255,Z+1>>8&255,Z+1>>8>>8&255]}},"0arJ":function(fe,T,v){"use strict";v.d(T,"a",function(){return ln});var B=v("lSNA"),C=v.n(B),_=v("lwsE"),P=v.n(_),N=v("W8MJ"),z=v.n(N),R=v("PJYZ"),q=v.n(R),W=v("7W2i"),Z=v.n(W),X=v("a1gu"),ne=v.n(X),ie=v("Nsbk"),te=v.n(ie),ce=v("IOcx"),ee=v("oDt1"),Y=v("cDf5"),le=v.n(Y),re=9007199254740991,Q="[object Arguments]",ge="[object Array]",oe="[object Boolean]",Te="[object Date]",be="[object Error]",j="[object Function]",ke="[object Map]",Je="[object Number]",Pe="[object Object]",Ae="[object RegExp]",ot="[object Set]",k="[object String]",Xe="[object WeakMap]",Ot="[object ArrayBuffer]",lt="[object DataView]",Ut="[object Float32Array]",Jt="[object Float64Array]",nt="[object Int8Array]",$t="[object Int16Array]",ze="[object Int32Array]",ue="[object Uint8Array]",an="[object Uint8ClampedArray]",nn="[object Uint16Array]",Qn="[object Uint32Array]",Pt={};Pt[Ut]=Pt[Jt]=Pt[nt]=Pt[$t]=Pt[ze]=Pt[ue]=Pt[an]=Pt[nn]=Pt[Qn]=!0,Pt[Q]=Pt[ge]=Pt[Ot]=Pt[oe]=Pt[lt]=Pt[Te]=Pt[be]=Pt[j]=Pt[ke]=Pt[Je]=Pt[Pe]=Pt[Ae]=Pt[ot]=Pt[k]=Pt[Xe]=!1;function Tn(bt){return function(A){return bt(A)}}var rr=Object.prototype,Qt=rr.toString;function sn(bt){return Sn(bt)&&kn(bt.length)&&!!Pt[Qt.call(bt)]}function kn(bt){return typeof bt=="number"&&bt>-1&&bt%1==0&&bt<=re}function Sn(bt){return!!bt&&le()(bt)==="object"}var st=sn;function At(bt,A){var Jn=Object.keys(bt);if(Object.getOwnPropertySymbols){var Mn=Object.getOwnPropertySymbols(bt);A&&(Mn=Mn.filter(function(sr){return Object.getOwnPropertyDescriptor(bt,sr).enumerable})),Jn.push.apply(Jn,Mn)}return Jn}function vt(bt){for(var A=1;A<arguments.length;A++){var Jn=arguments[A]!=null?arguments[A]:{};A%2?At(Object(Jn),!0).forEach(function(Mn){C()(bt,Mn,Jn[Mn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(bt,Object.getOwnPropertyDescriptors(Jn)):At(Object(Jn)).forEach(function(Mn){Object.defineProperty(bt,Mn,Object.getOwnPropertyDescriptor(Jn,Mn))})}return bt}function _t(bt){var A=Kt();return function(){var Mn=te()(bt),sr;if(A){var ir=te()(this).constructor;sr=Reflect.construct(Mn,arguments,ir)}else sr=Mn.apply(this,arguments);return ne()(this,sr)}}function Kt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(bt){return!1}}var ln=function(bt){Z()(Jn,bt);var A=_t(Jn);function Jn(Mn){var sr;return P()(this,Jn),sr=A.call(this,Mn),sr.dirty=!0,sr.attributes=[],sr.indices=void 0,sr.indicesBuffer=void 0,sr.vertexCount=0,sr.maxInstancedCount=void 0,sr.aabb=void 0,sr.entity=void 0,Object.assign(q()(sr),Mn),sr}return z()(Jn,[{key:"setAttribute",value:function(sr,ir,Ie,pe){var Qe=this.attributes.find(function(cn){return cn.name===sr});return Qe?(Qe.data=ir,Qe.dirty=!0):this.attributes.push(vt(vt({dirty:!0,name:sr,data:ir},Ie),{},{bufferGetter:pe})),this.dirty=!0,this}},{key:"setIndex",value:function(sr){return this.indices=new Uint32Array(sr.buffer?sr.buffer:sr),this.dirty=!0,this}},{key:"applyMatrix",value:function(sr){var ir=this.attributes.find(function(gi){var cr=gi.name;return cr==="position"}),Ie=this.attributes.find(function(gi){var cr=gi.name;return cr==="normal"});if(ir&&(ir.dirty=!0,ir.data&&ir.data.length))for(var pe=0;pe<ir.data.length;pe+=3){var Qe=ce.e.fromValues(ir.data[pe],ir.data[pe+1],ir.data[pe+2],1);ce.e.transformMat4(Qe,Qe,sr),st(ir.data)?ir.data.set([Qe[0],Qe[1],Qe[2]],pe):(ir.data[pe]=Qe[0],ir.data[pe+1]=Qe[1],ir.data[pe+2]=Qe[2])}if(Ie){var cn=ce.a.normalFromMat4(ce.a.create(),sr);if(Ie.data&&Ie.data.length)for(var En=0;En<Ie.data.length;En+=3){var lr=ce.d.fromValues(Ie.data[En],Ie.data[En+1],Ie.data[En+2]);ce.d.transformMat3(lr,lr,cn),ce.d.normalize(lr,lr),st(Ie.data)?Ie.data.set([lr[0],lr[1],lr[2]],En):(Ie.data[En]=lr[0],Ie.data[En+1]=lr[1],Ie.data[En+2]=lr[2])}}}}]),Jn}(ee.a)},"0gSV":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.tagged=void 0;var B=v("GXnB"),C=v("Ztfv");function _(P,N){return function(z,R,q){var W=new B.Metadata(P,N);typeof q=="number"?C.tagParameter(z,R,q,W):C.tagProperty(z,R,W)}}T.tagged=_},"1ABj":function(fe,T){function v(B,C){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},"26re":function(fe,T,v){"use strict";var B=v("VTBJ"),C=v("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},P=_,N=v("6VBw"),z=function(W,Z){return C.createElement(N.a,Object(B.a)(Object(B.a)({},W),{},{ref:Z,icon:P}))};z.displayName="DatabaseOutlined";var R=T.a=C.forwardRef(z)},"2GVV":function(fe,T){fe.exports=v;function v(B,C){var _=new Float32Array(2);return _[0]=B,_[1]=C,_}},"2ajD":function(fe,T){function v(B){return B!==B}fe.exports=v},"2zpl":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PhotoshopPreviews=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.PhotoshopPreviews=function(q){var W=q.rgb,Z=q.currentColor,X=(0,P.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+W.r+","+W.g+", "+W.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:Z,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return C.default.createElement("div",null,C.default.createElement("div",{style:X.label},"new"),C.default.createElement("div",{style:X.swatches},C.default.createElement("div",{style:X.new}),C.default.createElement("div",{style:X.current})),C.default.createElement("div",{style:X.label},"current"))};T.default=z},"3/ER":function(fe,T,v){"use strict";(function(B){var C=v("Ju5/"),_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,P=_&&typeof B=="object"&&B&&!B.nodeType&&B,N=P&&P.exports===_,z=N?C.a.Buffer:void 0,R=z?z.allocUnsafe:void 0;function q(W,Z){if(Z)return W.slice();var X=W.length,ne=R?R(X):new W.constructor(X);return W.copy(ne),ne}T.a=q}).call(this,v("Vg/k")(fe))},"30v5":function(fe,T){fe.exports=v;function v(B,C,_){var P=C[0],N=C[1];return B[0]=_[0]*P+_[2]*N,B[1]=_[1]*P+_[3]*N,B}},"3R4v":function(fe,T,v){"use strict";var B=v("VTBJ"),C=v("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},P=_,N=v("6VBw"),z=function(W,Z){return C.createElement(N.a,Object(B.a)(Object(B.a)({},W),{},{ref:Z,icon:P}))};z.displayName="FullscreenOutlined";var R=T.a=C.forwardRef(z)},"3z9K":function(fe,T,v){var B;try{B=v("LvDl")}catch(C){}B||(B=window._),fe.exports=B},"406g":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BindingOnSyntax=void 0;var B=v("z4Hk"),C=function(){function _(P){this._binding=P}return _.prototype.onActivation=function(P){return this._binding.onActivation=P,new B.BindingWhenSyntax(this._binding)},_}();T.BindingOnSyntax=C},"48hD":function(fe,T,v){"use strict";v.d(T,"a",function(){return B.a}),v.d(T,"b",function(){return W.a});var B=v("ENEI"),C=v("lwsE"),_=v.n(C),P=v("W8MJ"),N=v.n(P),z=v("IOcx"),R=z.d.create(),q=function(){function Y(le,re){_()(this,Y),this.center=void 0,this.radius=void 0,this.center=le||z.d.create(),this.radius=re||.5}return N()(Y,[{key:"containsPoint",value:function(re){return z.d.sub(R,re,this.center),z.d.length(R)<this.radius*this.radius}},{key:"intersects",value:function(re){z.d.sub(R,re.center,this.center);var Q=re.radius+this.radius;return z.d.length(R)<=Q*Q}}]),Y}(),W=v("qfsk"),Z=v("cXWL"),X=z.d.create(),ne=z.d.create(),ie=z.d.create(),te=z.d.create(),ce=z.d.create(),ee=function(){function Y(le,re){_()(this,Y),this.origin=void 0,this.direction=void 0,this.origin=le||z.d.create(),this.direction=re||z.d.fromValues(0,0,-1)}return N()(Y,[{key:"intersectsAABB",value:function(re,Q){return Q?this.intersectAABBWithIntersection(re,Q):this.intersectsAABBWithoutIntersection(re)}},{key:"intersectsSphere",value:function(re,Q){var ge=z.d.sub(X,this.origin,re.center);z.d.normalize(ne,z.d.copy(ne,this.direction));var oe=z.d.dot(ge,ne),Te=z.d.dot(ge,ge)-re.radius*re.radius;if(Te>0&&oe>0)return null;var be=oe*oe-Te;if(be<0)return!1;var j=Math.abs(-oe-Math.sqrt(be));return Q&&(z.d.copy(Q,this.direction),z.d.scaleAndAdd(Q,this.origin,Q,j)),!0}},{key:"intersectsPlane",value:function(re,Q){var ge=(re.distance-z.d.dot(re.normal,this.origin))/z.d.dot(re.normal,this.direction),oe=ge>=0;return oe&&Q&&z.d.scaleAndAdd(Q,this.origin,this.direction,ge),oe}},{key:"intersectsAABBWithoutIntersection",value:function(re){var Q=X,ge=ne,oe=ie,Te=te,be=ce,j=this.direction;return z.d.sub(Q,this.origin,re.center),z.d.set(Te,Math.abs(Q[0]),Math.abs(Q[1]),Math.abs(Q[2])),z.d.mul(oe,Q,j),Te[0]>re.halfExtents[0]&&oe[0]>=0||Te[1]>re.halfExtents[1]&&oe[1]>=0||Te[2]>re.halfExtents[2]&&oe[2]>=0?!1:(z.d.set(be,Math.abs(j[0]),Math.abs(j[1]),Math.abs(j[2])),z.d.cross(ge,j,Q),z.d.set(ge,Math.abs(ge[0]),Math.abs(ge[1]),Math.abs(ge[2])),!(ge[0]>re.halfExtents[1]*be[2]+re.halfExtents[2]*be[1]||ge[1]>re.halfExtents[0]*be[2]+re.halfExtents[2]*be[0]||ge[2]>re.halfExtents[0]*be[1]+re.halfExtents[1]*be[0]))}},{key:"intersectAABBWithIntersection",value:function(re,Q){var ge=z.d.copy(z.d.create(),re.getMin());z.d.sub(ge,ge,this.origin);var oe=z.d.copy(z.d.create(),re.getMax());z.d.sub(oe,oe,this.origin);var Te=this.direction;Te[0]===0?(ge[0]=ge[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE,oe[0]=oe[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(ge[0]/=Te[0],oe[0]/=Te[0]),Te[1]===0?(ge[1]=ge[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE,oe[1]=oe[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(ge[1]/=Te[1],oe[1]/=Te[1]),Te[2]===0?(ge[2]=ge[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE,oe[2]=oe[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(ge[2]/=Te[2],oe[2]/=Te[2]);var be=z.d.set(ie,Math.min(ge[0],oe[0]),Math.min(ge[1],oe[1]),Math.min(ge[2],oe[2])),j=z.d.set(te,Math.max(ge[0],oe[0]),Math.max(ge[1],oe[1]),Math.max(ge[2],oe[2])),ke=Math.min(Math.min(j[0],j[1]),j[2]),Je=Math.max(Math.max(be[0],be[1]),be[2]),Pe=ke>=Je&&Je>=0;return Pe&&(z.d.copy(Q,this.direction),z.d.scaleAndAdd(Q,this.origin,Q,Je)),Pe}}]),Y}()},"4Hkj":function(fe,T){fe.exports=v;function v(B,C,_){return B[0]=C,B[1]=_,B}},"4XUm":function(fe,T,v){"use strict";var B=v("k6w6");v.d(T,"gl",function(){return B.a});var C=v("olaO"),_=v.n(C),P=v("A14R"),N=v.n(P),z=v("Oboc"),R=v.n(z),q=v("+RHd"),W=v.n(q),Z=v("nO7B"),X=v.n(Z),ne=v("yaXH"),ie=v.n(ne),te=v("V/xP"),ce=v("vdMR"),ee=v.n(ce),Y=v("NirO"),le=v.n(Y),re=v("JX23"),Q=v.n(re),ge=v("ZjWs"),oe=v.n(ge)},"4cb6":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.multiBindToService=T.getServiceIdentifierAsString=T.typeConstraint=T.namedConstraint=T.taggedConstraint=T.traverseAncerstors=T.decorate=T.id=T.MetadataReader=T.postConstruct=T.targetName=T.multiInject=T.unmanaged=T.optional=T.LazyServiceIdentifer=T.inject=T.named=T.tagged=T.injectable=T.ContainerModule=T.AsyncContainerModule=T.TargetTypeEnum=T.BindingTypeEnum=T.BindingScopeEnum=T.Container=T.METADATA_KEY=void 0;var B=v("xfSm");T.METADATA_KEY=B;var C=v("9Fde");Object.defineProperty(T,"Container",{enumerable:!0,get:function(){return C.Container}});var _=v("FV85");Object.defineProperty(T,"BindingScopeEnum",{enumerable:!0,get:function(){return _.BindingScopeEnum}}),Object.defineProperty(T,"BindingTypeEnum",{enumerable:!0,get:function(){return _.BindingTypeEnum}}),Object.defineProperty(T,"TargetTypeEnum",{enumerable:!0,get:function(){return _.TargetTypeEnum}});var P=v("dxzI");Object.defineProperty(T,"AsyncContainerModule",{enumerable:!0,get:function(){return P.AsyncContainerModule}}),Object.defineProperty(T,"ContainerModule",{enumerable:!0,get:function(){return P.ContainerModule}});var N=v("cZ5Q");Object.defineProperty(T,"injectable",{enumerable:!0,get:function(){return N.injectable}});var z=v("0gSV");Object.defineProperty(T,"tagged",{enumerable:!0,get:function(){return z.tagged}});var R=v("ZzCi");Object.defineProperty(T,"named",{enumerable:!0,get:function(){return R.named}});var q=v("Yk9n");Object.defineProperty(T,"inject",{enumerable:!0,get:function(){return q.inject}}),Object.defineProperty(T,"LazyServiceIdentifer",{enumerable:!0,get:function(){return q.LazyServiceIdentifer}});var W=v("jYx5");Object.defineProperty(T,"optional",{enumerable:!0,get:function(){return W.optional}});var Z=v("n2J3");Object.defineProperty(T,"unmanaged",{enumerable:!0,get:function(){return Z.unmanaged}});var X=v("jIg/");Object.defineProperty(T,"multiInject",{enumerable:!0,get:function(){return X.multiInject}});var ne=v("oaX6");Object.defineProperty(T,"targetName",{enumerable:!0,get:function(){return ne.targetName}});var ie=v("Sk89");Object.defineProperty(T,"postConstruct",{enumerable:!0,get:function(){return ie.postConstruct}});var te=v("wnjb");Object.defineProperty(T,"MetadataReader",{enumerable:!0,get:function(){return te.MetadataReader}});var ce=v("d9O0");Object.defineProperty(T,"id",{enumerable:!0,get:function(){return ce.id}});var ee=v("Ztfv");Object.defineProperty(T,"decorate",{enumerable:!0,get:function(){return ee.decorate}});var Y=v("RR/i");Object.defineProperty(T,"traverseAncerstors",{enumerable:!0,get:function(){return Y.traverseAncerstors}}),Object.defineProperty(T,"taggedConstraint",{enumerable:!0,get:function(){return Y.taggedConstraint}}),Object.defineProperty(T,"namedConstraint",{enumerable:!0,get:function(){return Y.namedConstraint}}),Object.defineProperty(T,"typeConstraint",{enumerable:!0,get:function(){return Y.typeConstraint}});var le=v("ujMp");Object.defineProperty(T,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return le.getServiceIdentifierAsString}});var re=v("78VC");Object.defineProperty(T,"multiBindToService",{enumerable:!0,get:function(){return re.multiBindToService}})},"4dNS":function(fe,T,v){"use strict";v.d(T,"a",function(){return Pe});var B=v("o0o1"),C=v.n(B),_=v("yXPU"),P=v.n(_),N=v("yG8O"),z=v.n(N),R=v("lwsE"),q=v.n(R),W=v("W8MJ"),Z=v.n(W),X=v("U+yc"),ne=v.n(X),ie=v("1ABj"),te=v.n(ie),ce=v("4cb6"),ee=v.n(ce),Y=v("Gj0h"),le=v("+uE7"),re=v("k6w6"),Q,ge,oe,Te,be,j,ke,Je,Pe=(Q=Object(ce.injectable)(),ge=Object(ce.inject)(le.a.GeometryComponentManager),oe=Object(ce.inject)(le.a.RenderEngine),Q(Te=(be=(Je=function(){function Ae(){q()(this,Ae),z()(this,"geometry",j,this),z()(this,"engine",ke,this)}return Z()(Ae,[{key:"execute",value:function(){var ot=P()(C.a.mark(function Xe(){var Ot=this;return C.a.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:this.geometry.forEach(function(Jt,nt){nt.dirty&&(nt.attributes.forEach(function($t){if($t.dirty&&$t.data){if(!$t.buffer)$t.buffer=Ot.engine.createBuffer({data:$t.data,type:re.a.FLOAT});else{var ze;(ze=$t.buffer)===null||ze===void 0||ze.subData({data:$t.data,offset:0})}$t.dirty=!1}}),nt.indices&&(nt.indicesBuffer?nt.indicesBuffer.subData({data:nt.indices,offset:0}):nt.indicesBuffer=Ot.engine.createElements({data:nt.indices,count:nt.indices.length,type:re.a.UNSIGNED_INT,usage:re.a.STATIC_DRAW})),nt.dirty=!1)});case 1:case"end":return Ut.stop()}},Xe,this)}));function k(){return ot.apply(this,arguments)}return k}()},{key:"tearDown",value:function(){this.geometry.forEach(function(k,Xe){Xe.indicesBuffer&&Xe.indicesBuffer.destroy(),Xe.attributes.forEach(function(Ot){Ot.buffer&&Ot.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},Xe=k.vertexCount,Ot=Object(Y.createEntity)();return this.geometry.create(Ot,{vertexCount:Xe})}},{key:"createInstancedBufferGeometry",value:function(k){var Xe=k.maxInstancedCount,Ot=k.vertexCount,lt=Object(Y.createEntity)();return this.geometry.create(lt,{maxInstancedCount:Xe,vertexCount:Ot})}}]),Ae}(),Je),j=ne()(be.prototype,"geometry",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=ne()(be.prototype,"engine",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be))||Te)},"4hNi":function(fe,T,v){fe.exports={EPSILON:v("NEPx"),create:v("Ej2v"),clone:v("S8zm"),fromValues:v("2GVV"),copy:v("PMMO"),set:v("4Hkj"),equals:v("F4jT"),exactEquals:v("RRY9"),add:v("+sJh"),subtract:v("cGwC"),sub:v("uPCe"),multiply:v("u6oY"),mul:v("MF6L"),divide:v("Bu3x"),div:v("Svbc"),inverse:v("QOyy"),min:v("dOXA"),max:v("+A2u"),rotate:v("sj7I"),floor:v("Cq4r"),ceil:v("zLyj"),round:v("Ska/"),scale:v("My4P"),scaleAndAdd:v("+n+1"),distance:v("M5u/"),dist:v("CGoQ"),squaredDistance:v("C3Dj"),sqrDist:v("plQd"),length:v("yEj1"),len:v("vip/"),squaredLength:v("SGks"),sqrLen:v("Yr8b"),negate:v("AzzA"),normalize:v("t8N9"),dot:v("a8Yn"),cross:v("N2HP"),lerp:v("xDUe"),random:v("L26W"),transformMat2:v("30v5"),transformMat2d:v("blMc"),transformMat3:v("Twb9"),transformMat4:v("AEOw"),forEach:v("FKLu"),limit:v("5rkR")}},"4l4a":function(fe,T,v){var B=v("PnFB");fe.exports=C;function C(_,P){return B(_,P,"pre")}},"5Q0V":function(fe,T,v){var B=v("cDf5").default;function C(_,P){if(B(_)!=="object"||_===null)return _;var N=_[Symbol.toPrimitive];if(N!==void 0){var z=N.call(_,P||"default");if(B(z)!=="object")return z;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(_)}fe.exports=C,fe.exports.__esModule=!0,fe.exports.default=fe.exports},"5rkR":function(fe,T){fe.exports=v;function v(B,C,_){var P=C[0]*C[0]+C[1]*C[1];if(P>_*_){var N=Math.sqrt(P);B[0]=C[0]/N*_,B[1]=C[1]/N*_}else B[0]=C[0],B[1]=C[1];return B}},"6AGu":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BindingInSyntax=void 0;var B=v("FV85"),C=v("LKzl"),_=function(){function P(N){this._binding=N}return P.prototype.inRequestScope=function(){return this._binding.scope=B.BindingScopeEnum.Request,new C.BindingWhenOnSyntax(this._binding)},P.prototype.inSingletonScope=function(){return this._binding.scope=B.BindingScopeEnum.Singleton,new C.BindingWhenOnSyntax(this._binding)},P.prototype.inTransientScope=function(){return this._binding.scope=B.BindingScopeEnum.Transient,new C.BindingWhenOnSyntax(this._binding)},P}();T.BindingInSyntax=_},"6B+r":function(fe,T,v){"use strict";v.d(T,"a",function(){return ce});var B=v("lwsE"),C=v.n(B),_=v("PJYZ"),P=v.n(_),N=v("7W2i"),z=v.n(N),R=v("a1gu"),q=v.n(R),W=v("Nsbk"),Z=v.n(W),X=v("oDt1"),ne=v("ENEI");function ie(ee){var Y=te();return function(){var re=Z()(ee),Q;if(Y){var ge=Z()(this).constructor;Q=Reflect.construct(re,arguments,ge)}else Q=re.apply(this,arguments);return q()(this,Q)}}function te(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ee){return!1}}var ce=function(ee){z()(le,ee);var Y=ie(le);function le(re){var Q;return C()(this,le),Q=Y.call(this,re),Q.material=void 0,Q.geometry=void 0,Q.aabb=new ne.a,Q.aabbDirty=!0,Q.model=void 0,Q.visible=!0,Q.children=[],Object.assign(P()(Q),re),Q}return le}(X.a)},"78VC":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.multiBindToService=void 0;var B=function(_){return function(P){return function(){for(var N=[],z=0;z<arguments.length;z++)N[z]=arguments[z];return N.forEach(function(R){return _.bind(R).toService(P)})}}};T.multiBindToService=B},"7W2i":function(fe,T,v){var B=v("SksO");function C(_,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(P&&P.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),P&&B(_,P)}fe.exports=C,fe.exports.__esModule=!0,fe.exports.default=fe.exports},"7dW+":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Circle=void 0;var B=v("q1tI"),C=Y(B),_=v("17x9"),P=Y(_),N=v("/FUP"),z=Y(N),R=v("3WF5"),q=Y(R),W=v("QkVN"),Z=Y(W),X=v("wME1"),ne=ee(X),ie=v("TM95"),te=v("xbjo"),ce=Y(te);function ee(re){if(re&&re.__esModule)return re;var Q={};if(re!=null)for(var ge in re)Object.prototype.hasOwnProperty.call(re,ge)&&(Q[ge]=re[ge]);return Q.default=re,Q}function Y(re){return re&&re.__esModule?re:{default:re}}var le=T.Circle=function(Q){var ge=Q.width,oe=Q.onChange,Te=Q.onSwatchHover,be=Q.colors,j=Q.hex,ke=Q.circleSize,Je=Q.styles,Pe=Je===void 0?{}:Je,Ae=Q.circleSpacing,ot=Q.className,k=ot===void 0?"":ot,Xe=(0,z.default)((0,Z.default)({default:{card:{width:ge,display:"flex",flexWrap:"wrap",marginRight:-Ae,marginBottom:-Ae}}},Pe)),Ot=function(Ut,Jt){return oe({hex:Ut,source:"hex"},Jt)};return C.default.createElement("div",{style:Xe.card,className:"circle-picker "+k},(0,q.default)(be,function(lt){return C.default.createElement(ce.default,{key:lt,color:lt,onClick:Ot,onSwatchHover:Te,active:j===lt.toLowerCase(),circleSize:ke,circleSpacing:Ae})}))};le.propTypes={width:P.default.oneOfType([P.default.string,P.default.number]),circleSize:P.default.number,circleSpacing:P.default.number,styles:P.default.object},le.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[ne.red["500"],ne.pink["500"],ne.purple["500"],ne.deepPurple["500"],ne.indigo["500"],ne.blue["500"],ne.lightBlue["500"],ne.cyan["500"],ne.teal["500"],ne.green["500"],ne.lightGreen["500"],ne.lime["500"],ne.yellow["500"],ne.amber["500"],ne.orange["500"],ne.deepOrange["500"],ne.brown["500"],ne.blueGrey["500"]],styles:{}},T.default=(0,ie.ColorWrap)(le)},"81by":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PhotoshopPicker=void 0;var B=v("q1tI"),C=q(B),_=v("/FUP"),P=q(_),N=v("p8yl"),z=q(N),R=v("TM95");function q(Z){return Z&&Z.__esModule?Z:{default:Z}}var W=T.PhotoshopPicker=function(X){var ne=X.onChange,ie=X.rgb,te=X.hsv,ce=X.hex,ee=(0,P.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),Y=function(re,Q){re["#"]?z.default.isValidHex(re["#"])&&ne({hex:re["#"],source:"hex"},Q):re.r||re.g||re.b?ne({r:re.r||ie.r,g:re.g||ie.g,b:re.b||ie.b,source:"rgb"},Q):(re.h||re.s||re.v)&&ne({h:re.h||te.h,s:re.s||te.s,v:re.v||te.v,source:"hsv"},Q)};return C.default.createElement("div",{style:ee.fields},C.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"h",value:Math.round(te.h),onChange:Y}),C.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"s",value:Math.round(te.s*100),onChange:Y}),C.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"v",value:Math.round(te.v*100),onChange:Y}),C.default.createElement("div",{style:ee.divider}),C.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"r",value:ie.r,onChange:Y}),C.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"g",value:ie.g,onChange:Y}),C.default.createElement(R.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"b",value:ie.b,onChange:Y}),C.default.createElement("div",{style:ee.divider}),C.default.createElement(R.EditableInput,{style:{wrap:ee.HEXwrap,input:ee.HEXinput,label:ee.HEXlabel},label:"#",value:ce.replace("#",""),onChange:Y}),C.default.createElement("div",{style:ee.fieldSymbols},C.default.createElement("div",{style:ee.symbol},"\xB0"),C.default.createElement("div",{style:ee.symbol},"%"),C.default.createElement("div",{style:ee.symbol},"%")))};T.default=W},"8J/B":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.CompactFields=void 0;var B=v("q1tI"),C=z(B),_=v("/FUP"),P=z(_),N=v("TM95");function z(q){return q&&q.__esModule?q:{default:q}}var R=T.CompactFields=function(W){var Z=W.hex,X=W.rgb,ne=W.onChange,ie=(0,P.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:Z},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),te=function(ee,Y){ee.r||ee.g||ee.b?ne({r:ee.r||X.r,g:ee.g||X.g,b:ee.b||X.b,source:"rgb"},Y):ne({hex:ee.hex,source:"hex"},Y)};return C.default.createElement("div",{style:ie.fields,className:"flexbox-fix"},C.default.createElement("div",{style:ie.active}),C.default.createElement(N.EditableInput,{style:{wrap:ie.HEXwrap,input:ie.HEXinput,label:ie.HEXlabel},label:"hex",value:Z,onChange:te}),C.default.createElement(N.EditableInput,{style:{wrap:ie.RGBwrap,input:ie.RGBinput,label:ie.RGBlabel},label:"r",value:X.r,onChange:te}),C.default.createElement(N.EditableInput,{style:{wrap:ie.RGBwrap,input:ie.RGBinput,label:ie.RGBlabel},label:"g",value:X.g,onChange:te}),C.default.createElement(N.EditableInput,{style:{wrap:ie.RGBwrap,input:ie.RGBinput,label:ie.RGBlabel},label:"b",value:X.b,onChange:te}))};T.default=R},"8jh/":function(fe,T,v){"use strict";var B=v("Mn/Q"),C=v("LGRX"),_=v("yZ5d")},"94HZ":function(fe,T,v){"use strict";v.d(T,"a",function(){return Qt});var B=v("o0o1"),C=v.n(B),_=v("yXPU"),P=v.n(_),N=v("yG8O"),z=v.n(N),R=v("lwsE"),q=v.n(R),W=v("W8MJ"),Z=v.n(W),X=v("U+yc"),ne=v.n(X),ie=v("1ABj"),te=v.n(ie),ce=v("IOcx"),ee=v("4cb6"),Y=v.n(ee),le=v("+uE7"),re=v("k6w6"),Q,ge,oe,Te,be,j,ke,Je,Pe,Ae,ot,k,Xe,Ot,lt,Ut,Jt,nt,$t,ze,ue,an,nn,Qn;function Pt(sn,kn){var Sn;if(typeof Symbol=="undefined"||sn[Symbol.iterator]==null){if(Array.isArray(sn)||(Sn=Tn(sn))||kn&&sn&&typeof sn.length=="number"){Sn&&(sn=Sn);var st=0,At=function(){};return{s:At,n:function(){return st>=sn.length?{done:!0}:{done:!1,value:sn[st++]}},e:function(bt){throw bt},f:At}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var vt=!0,_t=!1,Kt;return{s:function(){Sn=sn[Symbol.iterator]()},n:function(){var bt=Sn.next();return vt=bt.done,bt},e:function(bt){_t=!0,Kt=bt},f:function(){try{!vt&&Sn.return!=null&&Sn.return()}finally{if(_t)throw Kt}}}}function Tn(sn,kn){if(!!sn){if(typeof sn=="string")return rr(sn,kn);var Sn=Object.prototype.toString.call(sn).slice(8,-1);if(Sn==="Object"&&sn.constructor&&(Sn=sn.constructor.name),Sn==="Map"||Sn==="Set")return Array.from(sn);if(Sn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Sn))return rr(sn,kn)}}function rr(sn,kn){(kn==null||kn>sn.length)&&(kn=sn.length);for(var Sn=0,st=new Array(kn);Sn<kn;Sn++)st[Sn]=sn[Sn];return st}var Qt=(Q=Object(ee.injectable)(),ge=Object(ee.inject)(le.a.MeshComponentManager),oe=Object(ee.inject)(le.a.GeometryComponentManager),Te=Object(ee.inject)(le.a.MaterialComponentManager),be=Object(ee.inject)(le.a.CullableComponentManager),j=Object(ee.inject)(le.a.TransformComponentManager),ke=Object(ee.inject)(le.a.HierarchyComponentManager),Je=Object(ee.inject)(le.a.Systems),Pe=Object(ee.named)(le.a.FrameGraphSystem),Ae=Object(ee.inject)(le.a.RenderEngine),ot=Object(ee.inject)(le.a.ResourcePool),Q(k=(Xe=(Qn=nn=function(){function sn(){var kn=this;q()(this,sn),z()(this,"mesh",Ot,this),z()(this,"geometry",lt,this),z()(this,"material",Ut,this),z()(this,"cullable",Jt,this),z()(this,"transform",nt,this),z()(this,"hierarchy",$t,this),z()(this,"frameGraphSystem",ze,this),z()(this,"engine",ue,this),z()(this,"resourcePool",an,this),this.modelCache={},this.setup=function(Sn,st,At){var vt=Sn.createRenderTarget(st,"color buffer",{width:1,height:1,usage:re.a.RENDER_ATTACHMENT|re.a.SAMPLED|re.a.COPY_SRC});At.data={output:st.write(Sn,vt)}},this.execute=function(){var Sn=P()(C.a.mark(function st(At,vt,_t){var Kt,ln,bt,A,Jn,Mn;return C.a.wrap(function(ir){for(;;)switch(ir.prev=ir.next){case 0:Kt=At.getResourceNode(vt.data.output),ln=kn.resourcePool.getOrCreateResource(Kt.resource),bt=Pt(_t),ir.prev=3,bt.s();case 5:if((A=bt.n()).done){ir.next=11;break}return Jn=A.value,ir.next=9,kn.initView(Jn);case 9:ir.next=5;break;case 11:ir.next=16;break;case 13:ir.prev=13,ir.t0=ir.catch(3),bt.e(ir.t0);case 16:return ir.prev=16,bt.f(),ir.finish(16);case 19:Mn=kn.engine.getCanvas(),ln.resize({width:Mn.width,height:Mn.height}),kn.engine.setScissor({enable:!1}),kn.engine.clear({framebuffer:ln,color:_t[0].getClearColor(),depth:1}),kn.engine.useFramebuffer(ln,function(){var Ie=Pt(_t),pe;try{for(Ie.s();!(pe=Ie.n()).done;){var Qe=pe.value;kn.renderView(Qe)}}catch(cn){Ie.e(cn)}finally{Ie.f()}});case 24:case"end":return ir.stop()}},st,null,[[3,13,16,19]])}));return function(st,At,vt){return Sn.apply(this,arguments)}}()}return Z()(sn,[{key:"renderView",value:function(Sn){var st=Sn.getScene(),At=Sn.getCamera(),vt=At.getViewTransform(),_t=ce.b.multiply(ce.b.create(),At.getPerspective(),vt);At.getFrustum().extractFromVPMatrix(_t);var Kt=Sn.getViewport(),ln=Kt.x,bt=Kt.y,A=Kt.width,Jn=Kt.height;this.engine.viewport({x:ln,y:bt,width:A,height:Jn});var Mn=Pt(st.getEntities()),sr;try{for(Mn.s();!(sr=Mn.n()).done;){var ir=sr.value;this.renderMesh(ir,{camera:At,view:Sn,viewMatrix:vt})}}catch(Ie){Mn.e(Ie)}finally{Mn.f()}}},{key:"renderMesh",value:function(Sn,st){var At=st.camera,vt=st.view,_t=st.viewMatrix,Kt=this.mesh.getComponentByEntity(Sn);if(!(!Kt||!Kt.visible)){var ln=Kt.material,bt=Kt.geometry;if(!(!bt||bt.dirty||!ln)){var A=this.transform.getComponentByEntity(Sn),Jn=ce.b.multiply(ce.b.create(),_t,A.worldTransform),Mn=vt.getViewport(),sr=Mn.width,ir=Mn.height;ln.setUniform({projectionMatrix:At.getPerspective(),modelViewMatrix:Jn,modelMatrix:A.worldTransform,viewMatrix:_t,cameraPosition:At.getPosition(),u_viewport:[sr,ir]}),Kt.model&&(Kt.model.draw({uniforms:ln.uniforms.reduce(function(Ie,pe){return Ie[pe.name]=pe.data,Ie},{})}),ln.uniforms.forEach(function(Ie){Ie.dirty=!1}),ln.dirty=!1)}}}},{key:"initMesh",value:function(){var kn=P()(C.a.mark(function st(At,vt){var _t,Kt,ln,bt,A,Jn,Mn,sr;return C.a.wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:if(_t=this.mesh.getComponentByEntity(At),_t){Ie.next=3;break}return Ie.abrupt("return");case 3:if(Kt=_t.material,ln=_t.geometry,!(!ln||ln.dirty||!Kt)){Ie.next=7;break}return Ie.abrupt("return");case 7:if(_t.model){Ie.next=24;break}if(bt="m-".concat(Kt.entity,"-g-").concat(ln.entity),!this.modelCache[bt]){Ie.next=12;break}return _t.model=this.modelCache[bt],Ie.abrupt("return");case 12:return Kt.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),A=this.engine,Jn=A.createModel,Mn=A.createAttribute,sr={vs:Kt.vertexShaderGLSL,fs:Kt.fragmentShaderGLSL,defines:Kt.defines,attributes:ln.attributes.reduce(function(pe,Qe){return Qe.data&&Qe.buffer&&(pe[Qe.name]=Mn({buffer:Qe.buffer,attributes:Qe.attributes,arrayStride:Qe.arrayStride,stepMode:Qe.stepMode,divisor:Qe.stepMode==="vertex"?0:1})),pe},{}),uniforms:Kt.uniforms.reduce(function(pe,Qe){return pe[Qe.name]=Qe.data,pe},{}),scissor:{enable:!0,box:function(){return vt.getViewport()}}},Kt.cull&&(sr.cull=Kt.cull),Kt.depth&&(sr.depth=Kt.depth),Kt.blend&&(sr.blend=Kt.blend),ln.indicesBuffer&&(sr.elements=ln.indicesBuffer),ln.maxInstancedCount&&(sr.instances=ln.maxInstancedCount,sr.count=ln.vertexCount||3),Ie.next=22,Jn(sr);case 22:_t.model=Ie.sent,this.modelCache[bt]=_t.model;case 24:case"end":return Ie.stop()}},st,this)}));function Sn(st,At){return kn.apply(this,arguments)}return Sn}()},{key:"initView",value:function(){var kn=P()(C.a.mark(function st(At){var vt,_t,Kt,ln;return C.a.wrap(function(A){for(;;)switch(A.prev=A.next){case 0:vt=At.getScene(),_t=Pt(vt.getEntities()),A.prev=2,_t.s();case 4:if((Kt=_t.n()).done){A.next=10;break}return ln=Kt.value,A.next=8,this.initMesh(ln,At);case 8:A.next=4;break;case 10:A.next=15;break;case 12:A.prev=12,A.t0=A.catch(2),_t.e(A.t0);case 15:return A.prev=15,_t.f(),A.finish(15);case 18:case"end":return A.stop()}},st,this,[[2,12,15,18]])}));function Sn(st){return kn.apply(this,arguments)}return Sn}()}]),sn}(),nn.IDENTIFIER="Render Pass",Qn),Ot=ne()(Xe.prototype,"mesh",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lt=ne()(Xe.prototype,"geometry",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut=ne()(Xe.prototype,"material",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jt=ne()(Xe.prototype,"cullable",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=ne()(Xe.prototype,"transform",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$t=ne()(Xe.prototype,"hierarchy",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ze=ne()(Xe.prototype,"frameGraphSystem",[Je,Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=ne()(Xe.prototype,"engine",[Ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),an=ne()(Xe.prototype,"resourcePool",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe))||k)},"98GK":function(fe,T,v){var B=v("3z9K");fe.exports=C;function C(_){var P=0,N=[],z={},R=[];function q(W){var Z=z[W]={onStack:!0,lowlink:P,index:P++};if(N.push(W),_.successors(W).forEach(function(ie){B.has(z,ie)?z[ie].onStack&&(Z.lowlink=Math.min(Z.lowlink,z[ie].index)):(q(ie),Z.lowlink=Math.min(Z.lowlink,z[ie].lowlink))}),Z.lowlink===Z.index){var X=[],ne;do ne=N.pop(),z[ne].onStack=!1,X.push(ne);while(W!==ne);R.push(X)}}return _.nodes().forEach(function(W){B.has(z,W)||q(W)}),R}},"9F0J":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B=Object.assign||function(R){for(var q=1;q<arguments.length;q++){var W=arguments[q];for(var Z in W)Object.prototype.hasOwnProperty.call(W,Z)&&(R[Z]=W[Z])}return R},C=v("q1tI"),_=P(C);function P(R){return R&&R.__esModule?R:{default:R}}function N(R,q){var W={};for(var Z in R)q.indexOf(Z)>=0||!Object.prototype.hasOwnProperty.call(R,Z)||(W[Z]=R[Z]);return W}var z=24;T.default=function(R){var q=R.fill,W=q===void 0?"currentColor":q,Z=R.width,X=Z===void 0?z:Z,ne=R.height,ie=ne===void 0?z:ne,te=R.style,ce=te===void 0?{}:te,ee=N(R,["fill","width","height","style"]);return _.default.createElement("svg",B({viewBox:"0 0 "+z+" "+z,style:B({fill:W,width:X,height:ie},ce)},ee),_.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},"9Fde":function(fe,T,v){"use strict";var B=this&&this.__awaiter||function(Y,le,re,Q){function ge(oe){return oe instanceof re?oe:new re(function(Te){Te(oe)})}return new(re||(re=Promise))(function(oe,Te){function be(Je){try{ke(Q.next(Je))}catch(Pe){Te(Pe)}}function j(Je){try{ke(Q.throw(Je))}catch(Pe){Te(Pe)}}function ke(Je){Je.done?oe(Je.value):ge(Je.value).then(be,j)}ke((Q=Q.apply(Y,le||[])).next())})},C=this&&this.__generator||function(Y,le){var re={label:0,sent:function(){if(oe[0]&1)throw oe[1];return oe[1]},trys:[],ops:[]},Q,ge,oe,Te;return Te={next:be(0),throw:be(1),return:be(2)},typeof Symbol=="function"&&(Te[Symbol.iterator]=function(){return this}),Te;function be(ke){return function(Je){return j([ke,Je])}}function j(ke){if(Q)throw new TypeError("Generator is already executing.");for(;re;)try{if(Q=1,ge&&(oe=ke[0]&2?ge.return:ke[0]?ge.throw||((oe=ge.return)&&oe.call(ge),0):ge.next)&&!(oe=oe.call(ge,ke[1])).done)return oe;switch(ge=0,oe&&(ke=[ke[0]&2,oe.value]),ke[0]){case 0:case 1:oe=ke;break;case 4:return re.label++,{value:ke[1],done:!1};case 5:re.label++,ge=ke[1],ke=[0];continue;case 7:ke=re.ops.pop(),re.trys.pop();continue;default:if(oe=re.trys,!(oe=oe.length>0&&oe[oe.length-1])&&(ke[0]===6||ke[0]===2)){re=0;continue}if(ke[0]===3&&(!oe||ke[1]>oe[0]&&ke[1]<oe[3])){re.label=ke[1];break}if(ke[0]===6&&re.label<oe[1]){re.label=oe[1],oe=ke;break}if(oe&&re.label<oe[2]){re.label=oe[2],re.ops.push(ke);break}oe[2]&&re.ops.pop(),re.trys.pop();continue}ke=le.call(Y,re)}catch(Je){ke=[6,Je],ge=0}finally{Q=oe=0}if(ke[0]&5)throw ke[1];return{value:ke[0]?ke[1]:void 0,done:!0}}},_=this&&this.__spreadArray||function(Y,le){for(var re=0,Q=le.length,ge=Y.length;re<Q;re++,ge++)Y[ge]=le[re];return Y};Object.defineProperty(T,"__esModule",{value:!0}),T.Container=void 0;var P=v("LgvC"),N=v("MON2"),z=v("FV85"),R=v("xfSm"),q=v("wnjb"),W=v("h7MG"),Z=v("aPG5"),X=v("gzZq"),ne=v("d9O0"),ie=v("ujMp"),te=v("HpQ9"),ce=v("AwBQ"),ee=function(){function Y(le){this._appliedMiddleware=[];var re=le||{};if(typeof re!="object")throw new Error(""+N.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(re.defaultScope===void 0)re.defaultScope=z.BindingScopeEnum.Transient;else if(re.defaultScope!==z.BindingScopeEnum.Singleton&&re.defaultScope!==z.BindingScopeEnum.Transient&&re.defaultScope!==z.BindingScopeEnum.Request)throw new Error(""+N.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(re.autoBindInjectable===void 0)re.autoBindInjectable=!1;else if(typeof re.autoBindInjectable!="boolean")throw new Error(""+N.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(re.skipBaseClassChecks===void 0)re.skipBaseClassChecks=!1;else if(typeof re.skipBaseClassChecks!="boolean")throw new Error(""+N.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:re.autoBindInjectable,defaultScope:re.defaultScope,skipBaseClassChecks:re.skipBaseClassChecks},this.id=ne.id(),this._bindingDictionary=new ce.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new q.MetadataReader}return Y.merge=function(le,re){for(var Q=[],ge=2;ge<arguments.length;ge++)Q[ge-2]=arguments[ge];var oe=new Y,Te=_([le,re],Q).map(function(ke){return W.getBindingDictionary(ke)}),be=W.getBindingDictionary(oe);function j(ke,Je){ke.traverse(function(Pe,Ae){Ae.forEach(function(ot){Je.add(ot.serviceIdentifier,ot.clone())})})}return Te.forEach(function(ke){j(ke,be)}),oe},Y.prototype.load=function(){for(var le=[],re=0;re<arguments.length;re++)le[re]=arguments[re];for(var Q=this._getContainerModuleHelpersFactory(),ge=0,oe=le;ge<oe.length;ge++){var Te=oe[ge],be=Q(Te.id);Te.registry(be.bindFunction,be.unbindFunction,be.isboundFunction,be.rebindFunction)}},Y.prototype.loadAsync=function(){for(var le=[],re=0;re<arguments.length;re++)le[re]=arguments[re];return B(this,void 0,void 0,function(){var Q,ge,oe,Te,be;return C(this,function(j){switch(j.label){case 0:Q=this._getContainerModuleHelpersFactory(),ge=0,oe=le,j.label=1;case 1:return ge<oe.length?(Te=oe[ge],be=Q(Te.id),[4,Te.registry(be.bindFunction,be.unbindFunction,be.isboundFunction,be.rebindFunction)]):[3,4];case 2:j.sent(),j.label=3;case 3:return ge++,[3,1];case 4:return[2]}})})},Y.prototype.unload=function(){for(var le=this,re=[],Q=0;Q<arguments.length;Q++)re[Q]=arguments[Q];var ge=function(Te){return function(be){return be.moduleId===Te}};re.forEach(function(oe){var Te=ge(oe.id);le._bindingDictionary.removeByCondition(Te)})},Y.prototype.bind=function(le){var re=this.options.defaultScope||z.BindingScopeEnum.Transient,Q=new P.Binding(le,re);return this._bindingDictionary.add(le,Q),new X.BindingToSyntax(Q)},Y.prototype.rebind=function(le){return this.unbind(le),this.bind(le)},Y.prototype.unbind=function(le){try{this._bindingDictionary.remove(le)}catch(re){throw new Error(N.CANNOT_UNBIND+" "+ie.getServiceIdentifierAsString(le))}},Y.prototype.unbindAll=function(){this._bindingDictionary=new ce.Lookup},Y.prototype.isBound=function(le){var re=this._bindingDictionary.hasKey(le);return!re&&this.parent&&(re=this.parent.isBound(le)),re},Y.prototype.isBoundNamed=function(le,re){return this.isBoundTagged(le,R.NAMED_TAG,re)},Y.prototype.isBoundTagged=function(le,re,Q){var ge=!1;if(this._bindingDictionary.hasKey(le)){var oe=this._bindingDictionary.get(le),Te=W.createMockRequest(this,le,re,Q);ge=oe.some(function(be){return be.constraint(Te)})}return!ge&&this.parent&&(ge=this.parent.isBoundTagged(le,re,Q)),ge},Y.prototype.snapshot=function(){this._snapshots.push(te.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},Y.prototype.restore=function(){var le=this._snapshots.pop();if(le===void 0)throw new Error(N.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=le.bindings,this._middleware=le.middleware},Y.prototype.createChild=function(le){var re=new Y(le||this.options);return re.parent=this,re},Y.prototype.applyMiddleware=function(){for(var le=[],re=0;re<arguments.length;re++)le[re]=arguments[re];this._appliedMiddleware=this._appliedMiddleware.concat(le);var Q=this._middleware?this._middleware:this._planAndResolve();this._middleware=le.reduce(function(ge,oe){return oe(ge)},Q)},Y.prototype.applyCustomMetadataReader=function(le){this._metadataReader=le},Y.prototype.get=function(le){return this._get(!1,!1,z.TargetTypeEnum.Variable,le)},Y.prototype.getTagged=function(le,re,Q){return this._get(!1,!1,z.TargetTypeEnum.Variable,le,re,Q)},Y.prototype.getNamed=function(le,re){return this.getTagged(le,R.NAMED_TAG,re)},Y.prototype.getAll=function(le){return this._get(!0,!0,z.TargetTypeEnum.Variable,le)},Y.prototype.getAllTagged=function(le,re,Q){return this._get(!1,!0,z.TargetTypeEnum.Variable,le,re,Q)},Y.prototype.getAllNamed=function(le,re){return this.getAllTagged(le,R.NAMED_TAG,re)},Y.prototype.resolve=function(le){var re=this.createChild();return re.bind(le).toSelf(),this._appliedMiddleware.forEach(function(Q){re.applyMiddleware(Q)}),re.get(le)},Y.prototype._getContainerModuleHelpersFactory=function(){var le=this,re=function(j,ke){j._binding.moduleId=ke},Q=function(j){return function(ke){var Je=le.bind.bind(le),Pe=Je(ke);return re(Pe,j),Pe}},ge=function(j){return function(ke){var Je=le.unbind.bind(le);Je(ke)}},oe=function(j){return function(ke){var Je=le.isBound.bind(le);return Je(ke)}},Te=function(j){return function(ke){var Je=le.rebind.bind(le),Pe=Je(ke);return re(Pe,j),Pe}};return function(be){return{bindFunction:Q(be),isboundFunction:oe(be),rebindFunction:Te(be),unbindFunction:ge(be)}}},Y.prototype._get=function(le,re,Q,ge,oe,Te){var be=null,j={avoidConstraints:le,contextInterceptor:function(Je){return Je},isMultiInject:re,key:oe,serviceIdentifier:ge,targetType:Q,value:Te};if(this._middleware){if(be=this._middleware(j),be==null)throw new Error(N.INVALID_MIDDLEWARE_RETURN)}else be=this._planAndResolve()(j);return be},Y.prototype._planAndResolve=function(){var le=this;return function(re){var Q=W.plan(le._metadataReader,le,re.isMultiInject,re.targetType,re.serviceIdentifier,re.key,re.value,re.avoidConstraints);Q=re.contextInterceptor(Q);var ge=Z.resolve(Q);return ge}},Y}();T.Container=ee},"9niD":function(fe,T,v){"use strict";v.d(T,"p",function(){return Pe}),v.d(T,"s",function(){return Ae}),v.d(T,"u",function(){return eA}),v.d(T,"v",function(){return w2}),v.d(T,"J",function(){return co}),v.d(T,"D",function(){return Kk}),v.d(T,"k",function(){return Ai}),v.d(T,"A",function(){return fa}),v.d(T,"x",function(){return to}),v.d(T,"z",function(){return ls}),v.d(T,"y",function(){return wi}),v.d(T,"B",function(){return AK}),v.d(T,"I",function(){return wD}),v.d(T,"E",function(){return T8}),v.d(T,"o",function(){return ke}),v.d(T,"G",function(){return L8}),v.d(T,"q",function(){return QC}),v.d(T,"n",function(){return GK}),v.d(T,"F",function(){return zK}),v.d(T,"i",function(){return Xi}),v.d(T,"h",function(){return $u}),v.d(T,"K",function(){return Fc}),v.d(T,"l",function(){return Xc}),v.d(T,"e",function(){return XK}),v.d(T,"c",function(){return JK}),v.d(T,"a",function(){return xY}),v.d(T,"C",function(){return OY}),v.d(T,"d",function(){return VY}),v.d(T,"f",function(){return hL}),v.d(T,"H",function(){return vL}),v.d(T,"b",function(){return XY}),v.d(T,"r",function(){return NZ}),v.d(T,"m",function(){return BL}),v.d(T,"j",function(){return Uh}),v.d(T,"g",function(){return lJ}),v.d(T,"w",function(){return lE}),v.d(T,"t",function(){return ec});var B={};v.r(B),v.d(B,"isArray",function(){return ka}),v.d(B,"isArrayLike",function(){return Lo}),v.d(B,"uniq",function(){return et}),v.d(B,"union",function(){return Wf}),v.d(B,"sortedIndex",function(){return Fd}),v.d(B,"sortedIndexBy",function(){return hr}),v.d(B,"sortBy",function(){return Xa}),v.d(B,"groupBy",function(){return Tc}),v.d(B,"difference",function(){return ti}),v.d(B,"max",function(){return mt}),v.d(B,"diff",function(){return ft});var C={};v.r(C),v.d(C,"has",function(){return on}),v.d(C,"pick",function(){return Dg}),v.d(C,"forIn",function(){return ym}),v.d(C,"merge",function(){return iw}),v.d(C,"extend",function(){return ow}),v.d(C,"isEqual",function(){return uw}),v.d(C,"isEmpty",function(){return hw}),v.d(C,"isObject",function(){return tr}),v.d(C,"isPlainObject",function(){return xm}),v.d(C,"clone",function(){return sx}),v.d(C,"cloneDeep",function(){return cx}),v.d(C,"defaults",function(){return dx}),v.d(C,"defaultsDeep",function(){return Sb}),v.d(C,"applyMixins",function(){return px}),v.d(C,"inherit",function(){return Rm}),v.d(C,"createClass",function(){return bx}),v.d(C,"ensure",function(){return Ab}),v.d(C,"getValue",function(){return oh}),v.d(C,"getNumber",function(){return Cx}),v.d(C,"getBoolean",function(){return Ex}),v.d(C,"isMaliciousProp",function(){return Nm}),v.d(C,"getByPath",function(){return Tb}),v.d(C,"setByPath",function(){return wx}),v.d(C,"unsetByPath",function(){return Pb}),v.d(C,"flatten",function(){return Lm});var _={};v.r(_),v.d(_,"isString",function(){return Sx}),v.d(_,"toString",function(){return ga}),v.d(_,"escape",function(){return Db}),v.d(_,"unescape",function(){return _x}),v.d(_,"startsWith",function(){return zm}),v.d(_,"endsWith",function(){return Um}),v.d(_,"split",function(){return Vi}),v.d(_,"repeat",function(){return gl}),v.d(_,"pad",function(){return Vj}),v.d(_,"padEnd",function(){return Wj}),v.d(_,"padStart",function(){return Xj}),v.d(_,"truncate",function(){return Qj}),v.d(_,"template",function(){return A_}),v.d(_,"uniqueId",function(){return k_}),v.d(_,"eval",function(){return D_}),v.d(_,"lowerFirst",function(){return _F}),v.d(_,"upperFirst",function(){return Vb}),v.d(_,"camelCase",function(){return bO}),v.d(_,"kebabCase",function(){return mT}),v.d(_,"pascalCase",function(){return FF}),v.d(_,"constantCase",function(){return BF}),v.d(_,"dotCase",function(){return GF}),v.d(_,"pathCase",function(){return zF}),v.d(_,"sentenceCase",function(){return UF}),v.d(_,"titleCase",function(){return VF}),v.d(_,"hashcode",function(){return HF}),v.d(_,"uuid",function(){return WF}),v.d(_,"sanitizeHTML",function(){return $F}),v.d(_,"getSpellingSuggestion",function(){return XF});var P={};v.r(P),v.d(P,"isNaN",function(){return QF}),v.d(P,"isNumber",function(){return yT}),v.d(P,"isFinite",function(){return t4}),v.d(P,"isInteger",function(){return bT}),v.d(P,"isSafeInteger",function(){return i4}),v.d(P,"clamp",function(){return o4}),v.d(P,"inRange",function(){return d4}),v.d(P,"toFinite",function(){return Ug}),v.d(P,"toNumber",function(){return Of}),v.d(P,"toInteger",function(){return vl}),v.d(P,"toSafeInteger",function(){return v4}),v.d(P,"parseInt",function(){return y4}),v.d(P,"isNumeric",function(){return $a}),v.d(P,"mod",function(){return b4}),v.d(P,"random",function(){return C4}),v.d(P,"isPercentage",function(){return wT}),v.d(P,"normalizePercentage",function(){return E4}),v.d(P,"parseCssNumeric",function(){return w4}),v.d(P,"normalizeSides",function(){return x4});var N={};v.r(N),v.d(N,"isFunction",function(){return di}),v.d(N,"once",function(){return T4}),v.d(N,"noop",function(){return Ce}),v.d(N,"debounce",function(){return N4}),v.d(N,"defer",function(){return B4}),v.d(N,"apply",function(){return wO}),v.d(N,"call",function(){return G4}),v.d(N,"cacher",function(){return U4}),v.d(N,"isAsyncLike",function(){return xT}),v.d(N,"isAsync",function(){return xO}),v.d(N,"toAsyncBoolean",function(){return OT}),v.d(N,"toDeferredBoolean",function(){return V4});var z={};v.r(z),v.d(z,"annotate",function(){return X4}),v.d(z,"findAnnotationsAtIndex",function(){return K4}),v.d(z,"findAnnotationsBetweenIndexes",function(){return Y4}),v.d(z,"shiftAnnotations",function(){return Z4}),v.d(z,"sanitize",function(){return J4});var R={};v.r(R),v.d(R,"requestAnimationFrame",function(){return q4}),v.d(R,"cancelAnimationFrame",function(){return eB}),v.d(R,"CASE_SENSITIVE_ATTR",function(){return FT}),v.d(R,"getAttribute",function(){return BT}),v.d(R,"removeAttribute",function(){return IO}),v.d(R,"setAttribute",function(){return Kb}),v.d(R,"setAttributes",function(){return RO}),v.d(R,"attr",function(){return Rs}),v.d(R,"qualifyAttr",function(){return NO}),v.d(R,"kebablizeAttrs",function(){return $4}),v.d(R,"styleToObject",function(){return Zm}),v.d(R,"mergeAttrs",function(){return Yb}),v.d(R,"uniqueId",function(){return MT}),v.d(R,"ensureId",function(){return AT}),v.d(R,"isSVGGraphicsElement",function(){return $g}),v.d(R,"ns",function(){return Sf}),v.d(R,"svgVersion",function(){return AO}),v.d(R,"createElement",function(){return H4}),v.d(R,"createElementNS",function(){return TT}),v.d(R,"createSvgElement",function(){return Mf}),v.d(R,"createSvgDocument",function(){return Wb}),v.d(R,"parseXML",function(){return PT}),v.d(R,"tagName",function(){return $b}),v.d(R,"index",function(){return kT}),v.d(R,"find",function(){return DT}),v.d(R,"findOne",function(){return IT}),v.d(R,"findParentByClass",function(){return RT}),v.d(R,"contains",function(){return NT}),v.d(R,"remove",function(){return Xb}),v.d(R,"empty",function(){return TO}),v.d(R,"append",function(){return PO}),v.d(R,"prepend",function(){return LT}),v.d(R,"before",function(){return kO}),v.d(R,"appendTo",function(){return jT}),v.d(R,"isHTMLElement",function(){return DO}),v.d(R,"clickable",function(){return _T}),v.d(R,"isInputElement",function(){return W4}),v.d(R,"getClass",function(){return xv}),v.d(R,"hasClass",function(){return Hb}),v.d(R,"addClass",function(){return Km}),v.d(R,"removeClass",function(){return Ym}),v.d(R,"toggleClass",function(){return MO}),v.d(R,"setPrefixedStyle",function(){return iB}),v.d(R,"getComputedStyle",function(){return Zb}),v.d(R,"hasScrollbars",function(){return aB}),v.d(R,"getVendorPrefixedName",function(){return VT}),v.d(R,"clearSelection",function(){return oB}),v.d(R,"text",function(){return JT}),v.d(R,"breakText",function(){return bB}),v.d(R,"KAPPA",function(){return i1}),v.d(R,"sample",function(){return zO}),v.d(R,"lineToPathData",function(){return QT}),v.d(R,"polygonToPathData",function(){return qT}),v.d(R,"polylineToPathData",function(){return eP}),v.d(R,"getPointsFromSvgElement",function(){return Jm}),v.d(R,"circleToPathData",function(){return nP}),v.d(R,"ellipseToPathData",function(){return rP}),v.d(R,"rectangleToPathData",function(){return iP}),v.d(R,"rectToPathData",function(){return aP}),v.d(R,"toPath",function(){return UO}),v.d(R,"toPathData",function(){return VO}),v.d(R,"createSlicePathData",function(){return CB}),v.d(R,"bbox",function(){return sP}),v.d(R,"getBBox",function(){return ch}),v.d(R,"getBBoxByElementAttr",function(){return PB}),v.d(R,"getMatrixByElementAttr",function(){return kB}),v.d(R,"getTransformToElement",function(){return fh}),v.d(R,"toLocalPoint",function(){return uP}),v.d(R,"toGeometryShape",function(){return lP}),v.d(R,"getIntersection",function(){return DB}),v.d(R,"animate",function(){return cP}),v.d(R,"animateTransform",function(){return fP}),v.d(R,"animateAlongPath",function(){return vP}),v.d(R,"getBoundingOffsetRect",function(){return gP}),v.d(R,"createSVGPoint",function(){return HO}),v.d(R,"createSVGMatrix",function(){return Kg}),v.d(R,"createSVGTransform",function(){return Yg}),v.d(R,"transformStringToMatrix",function(){return a1}),v.d(R,"matrixToTransformString",function(){return WO}),v.d(R,"parseTransformString",function(){return o1}),v.d(R,"decomposeMatrix",function(){return XO}),v.d(R,"matrixToScale",function(){return xB}),v.d(R,"matrixToRotation",function(){return OB}),v.d(R,"matrixToTranslation",function(){return SB}),v.d(R,"transformPoint",function(){return s1}),v.d(R,"transformLine",function(){return MB}),v.d(R,"transformPolyline",function(){return AB}),v.d(R,"transformRectangle",function(){return u1}),v.d(R,"transform",function(){return KO}),v.d(R,"translate",function(){return YO}),v.d(R,"rotate",function(){return ZO}),v.d(R,"scale",function(){return l1}),v.d(R,"translateAndAutoOrient",function(){return pP}),v.d(R,"MouseWheelHandle",function(){return IB}),v.d(R,"isVector",function(){return RB}),v.d(R,"createVector",function(){return NB}),v.d(R,"createVectors",function(){return LB});var q={};v.r(q),v.d(q,"block",function(){return CG}),v.d(q,"classic",function(){return EG}),v.d(q,"diamond",function(){return xG}),v.d(q,"path",function(){return SG}),v.d(q,"cross",function(){return AG}),v.d(q,"async",function(){return PG}),v.d(q,"circle",function(){return RP}),v.d(q,"circlePlus",function(){return kG}),v.d(q,"ellipse",function(){return IG});var W={};v.r(W),v.d(W,"ref",function(){return GB}),v.d(W,"refX",function(){return yP}),v.d(W,"refY",function(){return bP}),v.d(W,"refDx",function(){return zB}),v.d(W,"refDy",function(){return UB}),v.d(W,"refWidth",function(){return CP}),v.d(W,"refHeight",function(){return EP}),v.d(W,"refRx",function(){return VB}),v.d(W,"refRy",function(){return HB}),v.d(W,"refRInscribed",function(){return wP}),v.d(W,"refRCircumscribed",function(){return WB}),v.d(W,"refCx",function(){return $B}),v.d(W,"refCy",function(){return XB}),v.d(W,"refDResetOffset",function(){return xP}),v.d(W,"refDKeepOffset",function(){return KB}),v.d(W,"refPointsResetOffset",function(){return OP}),v.d(W,"refPointsKeepOffset",function(){return YB}),v.d(W,"refR",function(){return ZB}),v.d(W,"refD",function(){return JB}),v.d(W,"refPoints",function(){return QB}),v.d(W,"refX2",function(){return qB}),v.d(W,"refY2",function(){return eG}),v.d(W,"refWidth2",function(){return tG}),v.d(W,"refHeight2",function(){return nG}),v.d(W,"fill",function(){return rG}),v.d(W,"stroke",function(){return iG}),v.d(W,"text",function(){return TP}),v.d(W,"textWrap",function(){return aG}),v.d(W,"lineHeight",function(){return oG}),v.d(W,"textVerticalAnchor",function(){return sG}),v.d(W,"textPath",function(){return uG}),v.d(W,"annotations",function(){return lG}),v.d(W,"eol",function(){return cG}),v.d(W,"displayEmpty",function(){return fG}),v.d(W,"title",function(){return dG}),v.d(W,"xAlign",function(){return hG}),v.d(W,"yAlign",function(){return vG}),v.d(W,"resetOffset",function(){return gG}),v.d(W,"style",function(){return pG}),v.d(W,"html",function(){return mG}),v.d(W,"filter",function(){return yG}),v.d(W,"port",function(){return bG}),v.d(W,"sourceMarker",function(){return NG}),v.d(W,"targetMarker",function(){return LG}),v.d(W,"vertexMarker",function(){return jG}),v.d(W,"connection",function(){return FG}),v.d(W,"atConnectionLengthKeepGradient",function(){return NP}),v.d(W,"atConnectionLengthIgnoreGradient",function(){return BG}),v.d(W,"atConnectionRatioKeepGradient",function(){return LP}),v.d(W,"atConnectionRatioIgnoreGradient",function(){return GG}),v.d(W,"atConnectionLength",function(){return zG}),v.d(W,"atConnectionRatio",function(){return UG});var Z={};v.r(Z),v.d(Z,"dot",function(){return VG}),v.d(Z,"fixedDot",function(){return HG}),v.d(Z,"mesh",function(){return WG}),v.d(Z,"doubleMesh",function(){return $G});var X={};v.r(X),v.d(X,"outline",function(){return XG}),v.d(X,"highlight",function(){return KG}),v.d(X,"blur",function(){return YG}),v.d(X,"dropShadow",function(){return ZG}),v.d(X,"grayScale",function(){return JG}),v.d(X,"sepia",function(){return QG}),v.d(X,"saturate",function(){return qG}),v.d(X,"hueRotate",function(){return e6}),v.d(X,"invert",function(){return t6}),v.d(X,"brightness",function(){return n6}),v.d(X,"contrast",function(){return r6});var ne={};v.r(ne),v.d(ne,"flipX",function(){return jP}),v.d(ne,"flipY",function(){return _P}),v.d(ne,"flipXY",function(){return FP}),v.d(ne,"watermark",function(){return i6});var ie={};v.r(ie),v.d(ie,"className",function(){return a6}),v.d(ie,"opacity",function(){return o6}),v.d(ie,"stroke",function(){return u6});var te={};v.r(te),v.d(te,"absolute",function(){return l6}),v.d(te,"ellipse",function(){return c6}),v.d(te,"ellipseSpread",function(){return f6}),v.d(te,"line",function(){return h6}),v.d(te,"left",function(){return v6}),v.d(te,"right",function(){return g6}),v.d(te,"top",function(){return p6}),v.d(te,"bottom",function(){return m6});var ce={};v.r(ce),v.d(ce,"manual",function(){return b6}),v.d(ce,"left",function(){return C6}),v.d(ce,"right",function(){return E6}),v.d(ce,"top",function(){return w6}),v.d(ce,"bottom",function(){return x6}),v.d(ce,"outside",function(){return O6}),v.d(ce,"outsideOriented",function(){return S6}),v.d(ce,"inside",function(){return M6}),v.d(ce,"insideOriented",function(){return A6}),v.d(ce,"radial",function(){return T6}),v.d(ce,"radialOriented",function(){return P6});var ee={};v.r(ee),v.d(ee,"noop",function(){return I6}),v.d(ee,"pinRelative",function(){return L6}),v.d(ee,"pinAbsolute",function(){return j6});var Y={};v.r(Y),v.d(Y,"center",function(){return W6}),v.d(Y,"top",function(){return $6}),v.d(Y,"bottom",function(){return X6}),v.d(Y,"left",function(){return K6}),v.d(Y,"right",function(){return Y6}),v.d(Y,"topLeft",function(){return Z6}),v.d(Y,"topRight",function(){return J6}),v.d(Y,"bottomLeft",function(){return Q6}),v.d(Y,"bottomRight",function(){return q6}),v.d(Y,"orth",function(){return t5}),v.d(Y,"nodeCenter",function(){return n5}),v.d(Y,"midSide",function(){return i5});var le={};v.r(le),v.d(le,"ratio",function(){return a5}),v.d(le,"length",function(){return o5}),v.d(le,"orth",function(){return l5}),v.d(le,"closest",function(){return s5});var re={};v.r(re),v.d(re,"bbox",function(){return rk}),v.d(re,"rect",function(){return f5}),v.d(re,"boundary",function(){return d5}),v.d(re,"anchor",function(){return v5});var Q={};v.r(Q),v.d(Q,"normal",function(){return g5}),v.d(Q,"oneSide",function(){return p5}),v.d(Q,"orth",function(){return ok}),v.d(Q,"metro",function(){return I5}),v.d(Q,"manhattan",function(){return pk}),v.d(Q,"er",function(){return R5}),v.d(Q,"loop",function(){return N5});var ge={};v.r(ge),v.d(ge,"normal",function(){return L5}),v.d(ge,"loop",function(){return j5}),v.d(ge,"rounded",function(){return _5}),v.d(ge,"smooth",function(){return F5}),v.d(ge,"jumpover",function(){return V5});var oe={};v.r(oe),v.d(oe,"Attr",function(){return Rc}),v.d(oe,"Grid",function(){return Cd}),v.d(oe,"Filter",function(){return Mv}),v.d(oe,"Background",function(){return Jg}),v.d(oe,"Highlighter",function(){return Tf}),v.d(oe,"PortLayout",function(){return gh}),v.d(oe,"PortLabelLayout",function(){return Av}),v.d(oe,"NodeTool",function(){return Dv}),v.d(oe,"EdgeTool",function(){return Iv}),v.d(oe,"Marker",function(){return bd}),v.d(oe,"NodeAnchor",function(){return Rv}),v.d(oe,"EdgeAnchor",function(){return Nv}),v.d(oe,"ConnectionPoint",function(){return Lv}),v.d(oe,"Router",function(){return wd}),v.d(oe,"Connector",function(){return bh}),v.d(oe,"ConnectionStrategy",function(){return kv}),v.d(oe,"Registry",function(){return lo}),v.d(oe,"create",function(){return H5});var Te={};v.r(Te),v.d(Te,"Empty",function(){return q5}),v.d(Te,"Rect",function(){return tz}),v.d(Te,"HeaderedRect",function(){return nz}),v.d(Te,"Circle",function(){return rz}),v.d(Te,"Cylinder",function(){return iz}),v.d(Te,"Ellipse",function(){return az}),v.d(Te,"Polygon",function(){return sz}),v.d(Te,"Polyline",function(){return uz}),v.d(Te,"Path",function(){return cz}),v.d(Te,"TextBlock",function(){return dz}),v.d(Te,"Image",function(){return hz}),v.d(Te,"BorderedImage",function(){return vz}),v.d(Te,"EmbeddedImage",function(){return gz}),v.d(Te,"InscribedImage",function(){return pz}),v.d(Te,"Edge",function(){return fS}),v.d(Te,"ShadowEdge",function(){return mz}),v.d(Te,"DoubleEdge",function(){return yz}),v.d(Te,"HTML",function(){return Lc});var be={};v.r(be),v.d(be,"AutoSave",function(){return R1}),v.d(be,"Clipboard",function(){return Rk}),v.d(be,"Halo",function(){return B1}),v.d(be,"MiniMap",function(){return hS}),v.d(be,"Scroller",function(){return h0}),v.d(be,"Selection",function(){return j1}),v.d(be,"Snapline",function(){return vS}),v.d(be,"Transform",function(){return gS}),v.d(be,"Knob",function(){return dS}),v.d(be,"Dnd",function(){return tp}),v.d(be,"Stencil",function(){return xS});var j={};v.r(j),v.d(j,"X6_NODE_PORTAL_NODE_VIEW",function(){return sU}),v.d(j,"XFLOW_PREFIX_CLS",function(){return SS}),v.d(j,"MIN_ZOOM",function(){return MS}),v.d(j,"MAX_ZOOM",function(){return AS}),v.d(j,"XFLOW_DEFAULT_NODE",function(){return z1}),v.d(j,"XFLOW_DEFAULT_GROUP_NODE",function(){return Fk}),v.d(j,"XFLOW_DEFAULT_EDGE",function(){return TS}),v.d(j,"LOCAL_STORAGE_KEY",function(){return np}),v.d(j,"DEFAULT_NODE_HEIGHT",function(){return Bk}),v.d(j,"DEFAULT_NODE_WIDTH",function(){return Gk}),v.d(j,"XFLOW_GROUP_DEFAULT_COLLAPSED_SIZE",function(){return PS});var ke={};v.r(ke),v.d(ke,"isModelExistUtil",function(){return D8}),v.d(ke,"getModelUtil",function(){return xo}),v.d(ke,"useModelValueUtil",function(){return Oo}),v.d(ke,"GRAPH_ENABLE_MULTI_SELECT",function(){return i2}),v.d(ke,"GRAPH_FULLSCREEN",function(){return D0}),v.d(ke,"IS_NODE_SELECTED",function(){return a2}),v.d(ke,"IS_GROUP_SELECTED",function(){return o2}),v.d(ke,"IS_NORMAL_NODES_SELECTED",function(){return s2}),v.d(ke,"SELECTED_CELL",function(){return u2}),v.d(ke,"SELECTED_CELLS",function(){return Mh}),v.d(ke,"SELECTED_NODE",function(){return l2}),v.d(ke,"SELECTED_NODES",function(){return $v}),v.d(ke,"SELECTED_EDGES",function(){return tM}),v.d(ke,"SELECTED_GROUPS",function(){return c2}),v.d(ke,"CONTEXTMENU_NODE",function(){return nM}),v.d(ke,"CONTEXTMENU_EDGE",function(){return rM}),v.d(ke,"CONTEXTMENU_TARGET",function(){return f2}),v.d(ke,"GRAPH_META",function(){return d2}),v.d(ke,"GRAPH_SCALE",function(){return h2}),v.d(ke,"COMMAND_REDOABLE",function(){return v2}),v.d(ke,"COMMAND_UNDOABLE",function(){return g2}),v.d(ke,"COMMAND_GLOBALS",function(){return p2}),v.d(ke,"HISTORY_UNDOABLE",function(){return m2}),v.d(ke,"HISTORY_REDOABLE",function(){return y2});var Je={};v.r(Je),v.d(Je,"ProcessNode",function(){return PJ}),v.d(Je,"DecisionNode",function(){return kJ}),v.d(Je,"ConnectorNode",function(){return DJ}),v.d(Je,"DataIONode",function(){return IJ}),v.d(Je,"TerminalNode",function(){return RJ}),v.d(Je,"DatabaseNode",function(){return NJ}),v.d(Je,"HardDiskNode",function(){return LJ}),v.d(Je,"StroedDataNode",function(){return jJ}),v.d(Je,"DocumentNode",function(){return _J}),v.d(Je,"MultiDocumentNode",function(){return FJ}),v.d(Je,"PredefinedProcessNode",function(){return BJ}),v.d(Je,"ExtractNode",function(){return GJ}),v.d(Je,"MergeNode",function(){return zJ}),v.d(Je,"OrNode",function(){return UJ}),v.d(Je,"ManualInputNode",function(){return VJ}),v.d(Je,"PreparationNode",function(){return HJ}),v.d(Je,"DelayNode",function(){return WJ}),v.d(Je,"ManualOperationNode",function(){return $J}),v.d(Je,"DisplayNode",function(){return XJ}),v.d(Je,"OffPageLinkNode",function(){return KJ}),v.d(Je,"NoteLeftNode",function(){return YJ}),v.d(Je,"NoteRightNode",function(){return ZJ}),v.d(Je,"InternalStorageNode",function(){return JJ}),v.d(Je,"TextNode",function(){return QJ});var Pe=v("vlGe"),Ae;(function(o){var a;(function(n){n.TOP="top",n.BOTTOM="bottom",n.RIGHT="right",n.LEFT="left"})(a=o.AnchorGroup||(o.AnchorGroup={}));var r;(function(n){n.INPUT="input",n.OUTPUT="output"})(r=o.AnchorType||(o.AnchorType={}))})(Ae||(Ae={}));var ot=v("oBTY"),k=v("qLMh"),Xe=v("tJVT");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ot=function(a,r){return Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])},Ot(a,r)};function lt(o,a){Ot(o,a);function r(){this.constructor=o}o.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}var Ut=function(){return Ut=Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])}return r},Ut.apply(this,arguments)};function Jt(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r}function nt(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t}function $t(o,a){return function(r,n){a(r,n,o)}}function ze(o,a){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,a)}function ue(o,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return new(r||(r=Promise))(function(t,i){function s(c){try{l(n.next(c))}catch(f){i(f)}}function u(c){try{l(n.throw(c))}catch(f){i(f)}}function l(c){c.done?t(c.value):e(c.value).then(s,u)}l((n=n.apply(o,a||[])).next())})}function an(o,a){var r={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},n,e,t,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,e&&(t=l[0]&2?e.return:l[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,l[1])).done)return t;switch(e=0,t&&(l=[l[0]&2,t.value]),l[0]){case 0:case 1:t=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,e=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(t=r.trys,!(t=t.length>0&&t[t.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!t||l[1]>t[0]&&l[1]<t[3])){r.label=l[1];break}if(l[0]===6&&r.label<t[1]){r.label=t[1],t=l;break}if(t&&r.label<t[2]){r.label=t[2],r.ops.push(l);break}t[2]&&r.ops.pop(),r.trys.pop();continue}l=a.call(o,r)}catch(c){l=[6,c],e=0}finally{n=t=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function nn(o,a,r,n){n===void 0&&(n=r),o[n]=a[r]}function Qn(o,a){for(var r in o)r!=="default"&&!a.hasOwnProperty(r)&&(a[r]=o[r])}function Pt(o){var a=typeof Symbol=="function"&&Symbol.iterator,r=a&&o[a],n=0;if(r)return r.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tn(o,a){var r=typeof Symbol=="function"&&o[Symbol.iterator];if(!r)return o;var n=r.call(o),e,t=[],i;try{for(;(a===void 0||a-- >0)&&!(e=n.next()).done;)t.push(e.value)}catch(s){i={error:s}}finally{try{e&&!e.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return t}function rr(){for(var o=[],a=0;a<arguments.length;a++)o=o.concat(Tn(arguments[a]));return o}function Qt(){for(var o=0,a=0,r=arguments.length;a<r;a++)o+=arguments[a].length;for(var n=Array(o),e=0,a=0;a<r;a++)for(var t=arguments[a],i=0,s=t.length;i<s;i++,e++)n[e]=t[i];return n}function sn(o){return this instanceof sn?(this.v=o,this):new sn(o)}function kn(o,a,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(o,a||[]),e,t=[];return e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e;function i(d){n[d]&&(e[d]=function(h){return new Promise(function(p,m){t.push([d,h,p,m])>1||s(d,h)})})}function s(d,h){try{u(n[d](h))}catch(p){f(t[0][3],p)}}function u(d){d.value instanceof sn?Promise.resolve(d.value.v).then(l,c):f(t[0][2],d)}function l(d){s("next",d)}function c(d){s("throw",d)}function f(d,h){d(h),t.shift(),t.length&&s(t[0][0],t[0][1])}}function Sn(o){var a,r;return a={},n("next"),n("throw",function(e){throw e}),n("return"),a[Symbol.iterator]=function(){return this},a;function n(e,t){a[e]=o[e]?function(i){return(r=!r)?{value:sn(o[e](i)),done:e==="return"}:t?t(i):i}:t}}function st(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=o[Symbol.asyncIterator],r;return a?a.call(o):(o=typeof Pt=="function"?Pt(o):o[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(t){r[t]=o[t]&&function(i){return new Promise(function(s,u){i=o[t](i),e(s,u,i.done,i.value)})}}function e(t,i,s,u){Promise.resolve(u).then(function(l){t({value:l,done:s})},i)}}function At(o,a){return Object.defineProperty?Object.defineProperty(o,"raw",{value:a}):o.raw=a,o}function vt(o){if(o&&o.__esModule)return o;var a={};if(o!=null)for(var r in o)Object.hasOwnProperty.call(o,r)&&(a[r]=o[r]);return a.default=o,a}function _t(o){return o&&o.__esModule?o:{default:o}}function Kt(o,a){if(!a.has(o))throw new TypeError("attempted to get private field on non-instance");return a.get(o)}function ln(o,a,r){if(!a.has(o))throw new TypeError("attempted to set private field on non-instance");return a.set(o,r),r}var bt=v("q1tI"),A=v.n(bt),Jn=v("TSYQ"),Mn=v.n(Jn),sr=v("mNvP"),ir=v("rAM+"),Ie=v("fWQN"),pe=v("mtLc"),Qe=v("jrin"),cn=v("EVdn"),En=v.n(cn),lr=v("si6p"),gi=!1,cr=!1,wr=!1,pr=!1,Sr=!1,Qr=!1,ya=!1,Ki=!1,vs=!1,tu=!1,Wa=!1,Ka=!1,Ya=!1,Fi=!1,_a=!1,Pa=!1;if(typeof navigator=="object"){var Ti=navigator.userAgent;gi=Ti.indexOf("Macintosh")>=0,cr=!!Ti.match(/(iPad|iPhone|iPod)/g),wr=Ti.indexOf("Windows")>=0,pr=Ti.indexOf("MSIE")>=0,Sr=!!Ti.match(/Trident\/7\./),Qr=!!Ti.match(/Edge\//),ya=Ti.indexOf("Mozilla/")>=0&&Ti.indexOf("MSIE")<0&&Ti.indexOf("Edge/")<0,vs=Ti.indexOf("Chrome/")>=0&&Ti.indexOf("Edge/")<0,tu=Ti.indexOf("Opera/")>=0||Ti.indexOf("OPR/")>=0,Wa=Ti.indexOf("Firefox/")>=0,Ka=Ti.indexOf("AppleWebKit/")>=0&&Ti.indexOf("Chrome/")<0&&Ti.indexOf("Edge/")<0,typeof document=="object"&&(Pa=!document.createElementNS||"".concat(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))!=="[object SVGForeignObjectElement]"||Ti.indexOf("Opera/")>=0)}if(typeof window=="object"&&(Ki=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,Fi=window.PointerEvent!=null&&!gi),typeof document=="object"){Ya="ontouchstart"in document.documentElement;try{var nu=Object.defineProperty({},"passive",{get:function(){_a=!0}}),Ko=document.createElement("div");Ko.addEventListener&&Ko.addEventListener("click",function(){},nu)}catch(o){}}var Yr;if(function(o){o.IS_MAC=gi,o.IS_IOS=cr,o.IS_WINDOWS=wr,o.IS_IE=pr,o.IS_IE11=Sr,o.IS_EDGE=Qr,o.IS_NETSCAPE=ya,o.IS_CHROME_APP=Ki,o.IS_CHROME=vs,o.IS_OPERA=tu,o.IS_FIREFOX=Wa,o.IS_SAFARI=Ka,o.SUPPORT_TOUCH=Ya,o.SUPPORT_POINTER=Fi,o.SUPPORT_PASSIVE=_a,o.NO_FOREIGNOBJECT=Pa,o.SUPPORT_FOREIGNOBJECT=!o.NO_FOREIGNOBJECT}(Yr||(Yr={})),function(o){function a(){var t=window.module;return t!=null&&t.hot!=null&&t.hot.status!=null?t.hot.status():"unkonwn"}o.getHMRStatus=a;function r(){return a()==="apply"}o.isApplyingHMR=r;var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function e(t){var i=document.createElement(n[t]||"div"),s="on".concat(t),u=s in i;return u||(i.setAttribute(s,"return;"),u=typeof i[s]=="function"),u}o.isEventSupported=e}(Yr||(Yr={})),Yr.SUPPORT_PASSIVE){En.a.event.special.touchstart={setup:function(a,r,n){if(!this.addEventListener)return!1;this.addEventListener("touchstart",n,{passive:!0})}};var ba=En.a.event.special.mousewheel;if(ba){var gs=ba.setup;ba.setup=function(){var o=this,a=this.addEventListener;if(!a)return!1;this.addEventListener=function(r,n){a.call(o,r,n,{passive:!0})},gs.call(this),this.addEventListener=a}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(o){o.forEach(function(a){Object.prototype.hasOwnProperty.call(a,"append")||Object.defineProperty(a,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var n=document.createDocumentFragment(),e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(s){var u=s instanceof Node;n.appendChild(u?s:document.createTextNode(String(s)))}),this.appendChild(n)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var ra=function(a){return a&&a===a.window},$a=function(a){return!Array.isArray(a)&&a-parseFloat(a)+1>=0},ha=Array.isArray,ka=ha,Ro=v("Ju5/"),So=Ro.a.Symbol,ho=So,ps=Object.prototype,ru=ps.hasOwnProperty,Ol=ps.toString,No=ho?ho.toStringTag:void 0;function Sl(o){var a=ru.call(o,No),r=o[No];try{o[No]=void 0;var n=!0}catch(t){}var e=Ol.call(o);return n&&(a?o[No]=r:delete o[No]),e}var Du=Sl,Iu=Object.prototype,iu=Iu.toString;function Ru(o){return iu.call(o)}var Nu=Ru,au="[object Null]",ou="[object Undefined]",su=ho?ho.toStringTag:void 0;function Yt(o){return o==null?o===void 0?ou:au:su&&su in Object(o)?Du(o):Nu(o)}var gn=Yt;function qn(o){var a=typeof o;return o!=null&&(a=="object"||a=="function")}var tr=qn,kr="[object AsyncFunction]",Fa="[object Function]",ci="[object GeneratorFunction]",fi="[object Proxy]";function Rr(o){if(!tr(o))return!1;var a=gn(o);return a==Fa||a==ci||a==kr||a==fi}var di=Rr,Br=9007199254740991;function Za(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Br}var Yo=Za;function Bf(o){return o!=null&&Yo(o.length)&&!di(o)}var Lo=Bf,Fs=Ro.a["__core-js_shared__"],Lu=Fs,uu=function(){var o=/[^.]+$/.exec(Lu&&Lu.keys&&Lu.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function nc(o){return!!uu&&uu in o}var Qc=nc,rc=Function.prototype,Zo=rc.toString;function jo(o){if(o!=null){try{return Zo.call(o)}catch(a){}try{return o+""}catch(a){}}return""}var ua=jo,ju=/[\\^$.*+?()[\]{}|]/g,_u=/^\[object .+?Constructor\]$/,Bs=Function.prototype,Ss=Object.prototype,Ml=Bs.toString,qc=Ss.hasOwnProperty,lu=RegExp("^"+Ml.call(qc).replace(ju,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Zu(o){if(!tr(o)||Qc(o))return!1;var a=di(o)?lu:_u;return a.test(ua(o))}var Al=Zu;function ic(o,a){return o==null?void 0:o[a]}var ac=ic;function ef(o,a){var r=ac(o,a);return Al(r)?r:void 0}var ms=ef,tf=ms(Object,"create"),Fu=tf;function Tl(){this.__data__=Fu?Fu(null):{},this.size=0}var Gs=Tl;function Pl(o){var a=this.has(o)&&delete this.__data__[o];return this.size-=a?1:0,a}var Gf=Pl,kl="__lodash_hash_undefined__",oc=Object.prototype,nf=oc.hasOwnProperty;function rf(o){var a=this.__data__;if(Fu){var r=a[o];return r===kl?void 0:r}return nf.call(a,o)?a[o]:void 0}var ta=rf,$i=Object.prototype,Ju=$i.hasOwnProperty;function Jo(o){var a=this.__data__;return Fu?a[o]!==void 0:Ju.call(a,o)}var cu=Jo,Qu="__lodash_hash_undefined__";function Dl(o,a){var r=this.__data__;return this.size+=this.has(o)?0:1,r[o]=Fu&&a===void 0?Qu:a,this}var zf=Dl;function zs(o){var a=-1,r=o==null?0:o.length;for(this.clear();++a<r;){var n=o[a];this.set(n[0],n[1])}}zs.prototype.clear=Gs,zs.prototype.delete=Gf,zs.prototype.get=ta,zs.prototype.has=cu,zs.prototype.set=zf;var sc=zs;function Aa(){this.__data__=[],this.size=0}var Il=Aa;function fu(o,a){return o===a||o!==o&&a!==a}var Us=fu;function Vs(o,a){for(var r=o.length;r--;)if(Us(o[r][0],a))return r;return-1}var vo=Vs,U=Array.prototype,S=U.splice;function G(o){var a=this.__data__,r=vo(a,o);if(r<0)return!1;var n=a.length-1;return r==n?a.pop():S.call(a,r,1),--this.size,!0}var V=G;function ae(o){var a=this.__data__,r=vo(a,o);return r<0?void 0:a[r][1]}var me=ae;function ye(o){return vo(this.__data__,o)>-1}var Fe=ye;function rt(o,a){var r=this.__data__,n=vo(r,o);return n<0?(++this.size,r.push([o,a])):r[n][1]=a,this}var pt=rt;function Xt(o){var a=-1,r=o==null?0:o.length;for(this.clear();++a<r;){var n=o[a];this.set(n[0],n[1])}}Xt.prototype.clear=Il,Xt.prototype.delete=V,Xt.prototype.get=me,Xt.prototype.has=Fe,Xt.prototype.set=pt;var fn=Xt,Kn=ms(Ro.a,"Map"),Wt=Kn;function Dn(){this.size=0,this.__data__={hash:new sc,map:new(Wt||fn),string:new sc}}var Fr=Dn;function Cr(o){var a=typeof o;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?o!=="__proto__":o===null}var Ji=Cr;function go(o,a){var r=o.__data__;return Ji(a)?r[typeof a=="string"?"string":"hash"]:r.map}var Ca=go;function ao(o){var a=Ca(this,o).delete(o);return this.size-=a?1:0,a}var Ba=ao;function $r(o){return Ca(this,o).get(o)}var Qo=$r;function Li(o){return Ca(this,o).has(o)}var ia=Li;function aa(o,a){var r=Ca(this,o),n=r.size;return r.set(o,a),this.size+=r.size==n?0:1,this}var qu=aa;function Da(o){var a=-1,r=o==null?0:o.length;for(this.clear();++a<r;){var n=o[a];this.set(n[0],n[1])}}Da.prototype.clear=Fr,Da.prototype.delete=Ba,Da.prototype.get=Qo,Da.prototype.has=ia,Da.prototype.set=qu;var Mo=Da,Hs="__lodash_hash_undefined__";function Ws(o){return this.__data__.set(o,Hs),this}var ys=Ws;function oo(o){return this.__data__.has(o)}var qo=oo;function so(o){var a=-1,r=o==null?0:o.length;for(this.__data__=new Mo;++a<r;)this.add(o[a])}so.prototype.add=so.prototype.push=ys,so.prototype.has=qo;var Ja=so;function Bu(o,a,r,n){for(var e=o.length,t=r+(n?1:-1);n?t--:++t<e;)if(a(o[t],t,o))return t;return-1}var es=Bu;function Ui(o){return o!==o}var $s=Ui;function _o(o,a,r){for(var n=r-1,e=o.length;++n<e;)if(o[n]===a)return n;return-1}var Ms=_o;function af(o,a,r){return a===a?Ms(o,a,r):es(o,$s,r)}var Rl=af;function uc(o,a){var r=o==null?0:o.length;return!!r&&Rl(o,a,0)>-1}var Ao=uc;function Nl(o,a,r){for(var n=-1,e=o==null?0:o.length;++n<e;)if(r(a,o[n]))return!0;return!1}var bs=Nl;function el(o,a){return o.has(a)}var y=el,M=ms(Ro.a,"Set"),K=M;function he(){}var Ce=he;function Re(o){var a=-1,r=Array(o.size);return o.forEach(function(n){r[++a]=n}),r}var We=Re,Ye=1/0,ht=K&&1/We(new K([,-0]))[1]==Ye?function(o){return new K(o)}:Ce,Ct=ht,Lt=200;function _e(o,a,r){var n=-1,e=Ao,t=o.length,i=!0,s=[],u=s;if(r)i=!1,e=bs;else if(t>=Lt){var l=a?null:Ct(o);if(l)return We(l);i=!1,e=y,u=new Ja}else u=a?[]:s;e:for(;++n<t;){var c=o[n],f=a?a(c):c;if(c=r||c!==0?c:0,i&&f===f){for(var d=u.length;d--;)if(u[d]===f)continue e;a&&u.push(f),s.push(c)}else e(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}var we=_e;function Ue(o){return o&&o.length?we(o):[]}var et=Ue;function Se(o,a){for(var r=-1,n=a.length,e=o.length;++r<n;)o[e+r]=a[r];return o}var De=Se;function Ke(o){return o!=null&&typeof o=="object"}var kt=Ke,Vt="[object Arguments]";function vn(o){return kt(o)&&gn(o)==Vt}var In=vn,xn=Object.prototype,Mr=xn.hasOwnProperty,xr=xn.propertyIsEnumerable,Er=In(function(){return arguments}())?In:function(o){return kt(o)&&Mr.call(o,"callee")&&!xr.call(o,"callee")},Tr=Er,yi=ho?ho.isConcatSpreadable:void 0;function Xr(o){return ka(o)||Tr(o)||!!(yi&&o&&o[yi])}var pi=Xr;function jr(o,a,r,n,e){var t=-1,i=o.length;for(r||(r=pi),e||(e=[]);++t<i;){var s=o[t];a>0&&r(s)?a>1?jr(s,a-1,r,n,e):De(e,s):n||(e[e.length]=s)}return e}var Dr=jr;function va(o){return o}var ts=va;function Ll(o,a,r){switch(r.length){case 0:return o.call(a);case 1:return o.call(a,r[0]);case 2:return o.call(a,r[0],r[1]);case 3:return o.call(a,r[0],r[1],r[2])}return o.apply(a,r)}var lc=Ll,Zh=Math.max;function ag(o,a,r){return a=Zh(a===void 0?o.length-1:a,0),function(){for(var n=arguments,e=-1,t=Zh(n.length-a,0),i=Array(t);++e<t;)i[e]=n[a+e];e=-1;for(var s=Array(a+1);++e<a;)s[e]=n[e];return s[a]=r(i),lc(o,this,s)}}var of=ag;function jl(o){return function(){return o}}var tl=jl,po=function(){try{var o=ms(Object,"defineProperty");return o({},"",{}),o}catch(a){}}(),_l=po,Jh=_l?function(o,a){return _l(o,"toString",{configurable:!0,enumerable:!1,value:tl(a),writable:!0})}:ts,Fl=Jh,Uf=800,Qh=16,Vf=Date.now;function cc(o){var a=0,r=0;return function(){var n=Vf(),e=Qh-(n-r);if(r=n,e>0){if(++a>=Uf)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}var Ld=cc,Wp=Ld(Fl),jd=Wp;function og(o,a){return jd(of(o,a,ts),o+"")}var du=og;function Hf(o){return kt(o)&&Lo(o)}var fc=Hf,$p=du(function(o){return we(Dr(o,1,fc,!0))}),Wf=$p,Xp="[object Symbol]";function Bl(o){return typeof o=="symbol"||kt(o)&&gn(o)==Xp}var na=Bl,Fo=4294967295,sg=Fo-1,ug=Math.floor,qh=Math.min;function lg(o,a,r,n){var e=0,t=o==null?0:o.length;if(t===0)return 0;a=r(a);for(var i=a!==a,s=a===null,u=na(a),l=a===void 0;e<t;){var c=ug((e+t)/2),f=r(o[c]),d=f!==void 0,h=f===null,p=f===f,m=na(f);if(i)var b=n||p;else l?b=p&&(n||d):s?b=p&&d&&(n||!h):u?b=p&&d&&!h&&(n||!m):h||m?b=!1:b=n?f<=a:f<a;b?e=c+1:t=c}return qh(t,sg)}var $f=lg,sf=4294967295,_d=sf>>>1;function dc(o,a,r){var n=0,e=o==null?n:o.length;if(typeof a=="number"&&a===a&&e<=_d){for(;n<e;){var t=n+e>>>1,i=o[t];i!==null&&!na(i)&&(r?i<=a:i<a)?n=t+1:e=t}return e}return $f(o,a,ts,r)}var ns=dc;function uf(o,a){return ns(o,a)}var Fd=uf;function Cs(){this.__data__=new fn,this.size=0}var ev=Cs;function hc(o){var a=this.__data__,r=a.delete(o);return this.size=a.size,r}var Bd=hc;function cg(o){return this.__data__.get(o)}var fg=cg;function Xf(o){return this.__data__.has(o)}var lf=Xf,tv=200;function je(o,a){var r=this.__data__;if(r instanceof fn){var n=r.__data__;if(!Wt||n.length<tv-1)return n.push([o,a]),this.size=++r.size,this;r=this.__data__=new Mo(n)}return r.set(o,a),this.size=r.size,this}var cf=je;function nl(o){var a=this.__data__=new fn(o);this.size=a.size}nl.prototype.clear=ev,nl.prototype.delete=Bd,nl.prototype.get=fg,nl.prototype.has=lf,nl.prototype.set=cf;var Bo=nl;function Bi(o,a){for(var r=-1,n=o==null?0:o.length;++r<n;)if(a(o[r],r,o))return!0;return!1}var Kp=Bi,Yp=1,dg=2;function Gl(o,a,r,n,e,t){var i=r&Yp,s=o.length,u=a.length;if(s!=u&&!(i&&u>s))return!1;var l=t.get(o),c=t.get(a);if(l&&c)return l==a&&c==o;var f=-1,d=!0,h=r&dg?new Ja:void 0;for(t.set(o,a),t.set(a,o);++f<s;){var p=o[f],m=a[f];if(n)var b=i?n(m,p,f,a,o,t):n(p,m,f,o,a,t);if(b!==void 0){if(b)continue;d=!1;break}if(h){if(!Kp(a,function(E,x){if(!y(h,x)&&(p===E||e(p,E,r,n,t)))return h.push(x)})){d=!1;break}}else if(!(p===m||e(p,m,r,n,t))){d=!1;break}}return t.delete(o),t.delete(a),d}var hg=Gl,Zp=Ro.a.Uint8Array,ff=Zp;function Gd(o){var a=-1,r=Array(o.size);return o.forEach(function(n,e){r[++a]=[e,n]}),r}var Jp=Gd,rl=1,Qp=2,qp="[object Boolean]",em="[object Date]",vg="[object Error]",tm="[object Map]",il="[object Number]",nm="[object RegExp]",rm="[object Set]",im="[object String]",df="[object Symbol]",am="[object ArrayBuffer]",vc="[object DataView]",nv=ho?ho.prototype:void 0,Kf=nv?nv.valueOf:void 0;function hu(o,a,r,n,e,t,i){switch(r){case vc:if(o.byteLength!=a.byteLength||o.byteOffset!=a.byteOffset)return!1;o=o.buffer,a=a.buffer;case am:return!(o.byteLength!=a.byteLength||!t(new ff(o),new ff(a)));case qp:case em:case il:return Us(+o,+a);case vg:return o.name==a.name&&o.message==a.message;case nm:case im:return o==a+"";case tm:var s=Jp;case rm:var u=n&rl;if(s||(s=We),o.size!=a.size&&!u)return!1;var l=i.get(o);if(l)return l==a;n|=Qp,i.set(o,a);var c=hg(s(o),s(a),n,e,t,i);return i.delete(o),c;case df:if(Kf)return Kf.call(o)==Kf.call(a)}return!1}var gg=hu;function om(o,a,r){var n=a(o);return ka(o)?n:De(n,r(o))}var pg=om;function sm(o,a){for(var r=-1,n=o==null?0:o.length,e=0,t=[];++r<n;){var i=o[r];a(i,r,o)&&(t[e++]=i)}return t}var um=sm;function mg(){return[]}var gc=mg,lm=Object.prototype,zd=lm.propertyIsEnumerable,Ud=Object.getOwnPropertySymbols,Gu=Ud?function(o){return o==null?[]:(o=Object(o),um(Ud(o),function(a){return zd.call(o,a)}))}:gc,vu=Gu;function cm(o,a){for(var r=-1,n=Array(o);++r<o;)n[r]=a(r);return n}var pc=cm,mc=v("WOAq"),Es=9007199254740991,Yf=/^(?:0|[1-9]\d*)$/;function al(o,a){var r=typeof o;return a=a==null?Es:a,!!a&&(r=="number"||r!="symbol"&&Yf.test(o))&&o>-1&&o%1==0&&o<a}var Go=al,rv="[object Arguments]",Vd="[object Array]",Zf="[object Boolean]",hf="[object Date]",ol="[object Error]",iv="[object Function]",yg="[object Map]",Jf="[object Number]",av="[object Object]",Hd="[object RegExp]",To="[object Set]",Wd="[object String]",ov="[object WeakMap]",gu="[object ArrayBuffer]",Qf="[object DataView]",qf="[object Float32Array]",zl="[object Float64Array]",$d="[object Int8Array]",zo="[object Int16Array]",Xd="[object Int32Array]",sv="[object Uint8Array]",bg="[object Uint8ClampedArray]",Cg="[object Uint16Array]",ed="[object Uint32Array]",Sa={};Sa[qf]=Sa[zl]=Sa[$d]=Sa[zo]=Sa[Xd]=Sa[sv]=Sa[bg]=Sa[Cg]=Sa[ed]=!0,Sa[rv]=Sa[Vd]=Sa[gu]=Sa[Zf]=Sa[Qf]=Sa[hf]=Sa[ol]=Sa[iv]=Sa[yg]=Sa[Jf]=Sa[av]=Sa[Hd]=Sa[To]=Sa[Wd]=Sa[ov]=!1;function vf(o){return kt(o)&&Yo(o.length)&&!!Sa[gn(o)]}var Kd=vf;function uv(o){return function(a){return o(a)}}var zu=uv,As=v("xutz"),td=As.a&&As.a.isTypedArray,sl=td?zu(td):Kd,Uu=sl,Ul=Object.prototype,nd=Ul.hasOwnProperty;function rd(o,a){var r=ka(o),n=!r&&Tr(o),e=!r&&!n&&Object(mc.a)(o),t=!r&&!n&&!e&&Uu(o),i=r||n||e||t,s=i?pc(o.length,String):[],u=s.length;for(var l in o)(a||nd.call(o,l))&&!(i&&(l=="length"||e&&(l=="offset"||l=="parent")||t&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Go(l,u)))&&s.push(l);return s}var Vl=rd,Hl=Object.prototype;function ul(o){var a=o&&o.constructor,r=typeof a=="function"&&a.prototype||Hl;return o===r}var yc=ul;function gf(o,a){return function(r){return o(a(r))}}var bc=gf,Yd=bc(Object.keys,Object),Zd=Yd,ll=Object.prototype,pf=ll.hasOwnProperty;function Eg(o){if(!yc(o))return Zd(o);var a=[];for(var r in Object(o))pf.call(o,r)&&r!="constructor"&&a.push(r);return a}var lv=Eg;function wg(o){return Lo(o)?Vl(o):lv(o)}var Wl=wg;function xg(o){return pg(o,Wl,vu)}var id=xg,Cc=1,cv=Object.prototype,fm=cv.hasOwnProperty;function fv(o,a,r,n,e,t){var i=r&Cc,s=id(o),u=s.length,l=id(a),c=l.length;if(u!=c&&!i)return!1;for(var f=u;f--;){var d=s[f];if(!(i?d in a:fm.call(a,d)))return!1}var h=t.get(o),p=t.get(a);if(h&&p)return h==a&&p==o;var m=!0;t.set(o,a),t.set(a,o);for(var b=i;++f<u;){d=s[f];var E=o[d],x=a[d];if(n)var O=i?n(x,E,d,a,o,t):n(E,x,d,o,a,t);if(!(O===void 0?E===x||e(E,x,r,n,t):O)){m=!1;break}b||(b=d=="constructor")}if(m&&!b){var D=o.constructor,I=a.constructor;D!=I&&"constructor"in o&&"constructor"in a&&!(typeof D=="function"&&D instanceof D&&typeof I=="function"&&I instanceof I)&&(m=!1)}return t.delete(o),t.delete(a),m}var Ci=fv,dm=ms(Ro.a,"DataView"),dv=dm,ad=ms(Ro.a,"Promise"),Jd=ad,hm=ms(Ro.a,"WeakMap"),hv=hm,Ts="[object Map]",vm="[object Object]",od="[object Promise]",Qd="[object Set]",sd="[object WeakMap]",mf="[object DataView]",Wo=ua(dv),pu=ua(Wt),ud=ua(Jd),ld=ua(K),Ec=ua(hv),mu=gn;(dv&&mu(new dv(new ArrayBuffer(1)))!=mf||Wt&&mu(new Wt)!=Ts||Jd&&mu(Jd.resolve())!=od||K&&mu(new K)!=Qd||hv&&mu(new hv)!=sd)&&(mu=function(a){var r=gn(a),n=r==vm?a.constructor:void 0,e=n?ua(n):"";if(e)switch(e){case Wo:return mf;case pu:return Ts;case ud:return od;case ld:return Qd;case Ec:return sd}return r});var Vu=mu,cd=1,wc="[object Arguments]",xc="[object Array]",rs="[object Object]",fd=Object.prototype,Ps=fd.hasOwnProperty;function yf(o,a,r,n,e,t){var i=ka(o),s=ka(a),u=i?xc:Vu(o),l=s?xc:Vu(a);u=u==wc?rs:u,l=l==wc?rs:l;var c=u==rs,f=l==rs,d=u==l;if(d&&Object(mc.a)(o)){if(!Object(mc.a)(a))return!1;i=!0,c=!1}if(d&&!c)return t||(t=new Bo),i||Uu(o)?hg(o,a,r,n,e,t):gg(o,a,u,r,n,e,t);if(!(r&cd)){var h=c&&Ps.call(o,"__wrapped__"),p=f&&Ps.call(a,"__wrapped__");if(h||p){var m=h?o.value():o,b=p?a.value():a;return t||(t=new Bo),e(m,b,r,n,t)}}return d?(t||(t=new Bo),Ci(o,a,r,n,e,t)):!1}var bf=yf;function dd(o,a,r,n,e){return o===a?!0:o==null||a==null||!kt(o)&&!kt(a)?o!==o&&a!==a:bf(o,a,r,n,dd,e)}var Oc=dd,Sc=1,Og=2;function qd(o,a,r,n){var e=r.length,t=e,i=!n;if(o==null)return!t;for(o=Object(o);e--;){var s=r[e];if(i&&s[2]?s[1]!==o[s[0]]:!(s[0]in o))return!1}for(;++e<t;){s=r[e];var u=s[0],l=o[u],c=s[1];if(i&&s[2]){if(l===void 0&&!(u in o))return!1}else{var f=new Bo;if(n)var d=n(l,c,u,o,a,f);if(!(d===void 0?Oc(c,l,Sc|Og,n,f):d))return!1}}return!0}var Sg=qd;function gm(o){return o===o&&!tr(o)}var vv=gm;function cl(o){for(var a=Wl(o),r=a.length;r--;){var n=a[r],e=o[n];a[r]=[n,e,vv(e)]}return a}var is=cl;function yu(o,a){return function(r){return r==null?!1:r[o]===a&&(a!==void 0||o in Object(r))}}var gv=yu;function pm(o){var a=is(o);return a.length==1&&a[0][2]?gv(a[0][0],a[0][1]):function(r){return r===o||Sg(r,o,a)}}var hd=pm,Cf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bu=/^\w*$/;function pv(o,a){if(ka(o))return!1;var r=typeof o;return r=="number"||r=="symbol"||r=="boolean"||o==null||na(o)?!0:bu.test(o)||!Cf.test(o)||a!=null&&o in Object(a)}var $l=pv,fl="Expected a function";function dl(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new TypeError(fl);var r=function n(){var e=arguments,t=a?a.apply(this,e):e[0],i=n.cache;if(i.has(t))return i.get(t);var s=o.apply(this,e);return n.cache=i.set(t,s)||i,s};return r.cache=new(dl.Cache||Mo),r}dl.Cache=Mo;var Mc=dl,eh=500;function mv(o){var a=Mc(o,function(n){return r.size===eh&&r.clear(),n}),r=a.cache;return a}var $o=mv,Cu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ga=/\\(\\)?/g,Uo=$o(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(Cu,function(r,n,e,t){a.push(e?t.replace(Ga,"$1"):n||r)}),a}),th=Uo;function nh(o,a){for(var r=-1,n=o==null?0:o.length,e=Array(n);++r<n;)e[r]=a(o[r],r,o);return e}var Ef=nh,Mg=1/0,vd=ho?ho.prototype:void 0,rh=vd?vd.toString:void 0;function ih(o){if(typeof o=="string")return o;if(ka(o))return Ef(o,ih)+"";if(na(o))return rh?rh.call(o):"";var a=o+"";return a=="0"&&1/o==-Mg?"-0":a}var Ac=ih;function Ag(o){return o==null?"":Ac(o)}var ga=Ag;function Tg(o,a){return ka(o)?o:$l(o,a)?[o]:th(ga(o))}var wf=Tg,Pg=1/0;function yv(o){if(typeof o=="string"||na(o))return o;var a=o+"";return a=="0"&&1/o==-Pg?"-0":a}var gd=yv;function mm(o,a){a=wf(a,o);for(var r=0,n=a.length;o!=null&&r<n;)o=o[gd(a[r++])];return r&&r==n?o:void 0}var ks=mm;function bv(o,a,r){var n=o==null?void 0:ks(o,a);return n===void 0?r:n}var ve=bv;function Me(o,a){return o!=null&&a in Object(o)}var at=Me;function Rt(o,a,r){a=wf(a,o);for(var n=-1,e=a.length,t=!1;++n<e;){var i=gd(a[n]);if(!(t=o!=null&&r(o,i)))break;o=o[i]}return t||++n!=e?t:(e=o==null?0:o.length,!!e&&Yo(e)&&Go(i,e)&&(ka(o)||Tr(o)))}var Mt=Rt;function Zt(o,a){return o!=null&&Mt(o,a,at)}var Bt=Zt,mn=1,Wn=2;function Rn(o,a){return $l(o)&&vv(a)?gv(gd(o),a):function(r){var n=ve(r,o);return n===void 0&&n===a?Bt(r,o):Oc(a,n,mn|Wn)}}var Nn=Rn;function Pn(o){return function(a){return a==null?void 0:a[o]}}var nr=Pn;function Yn(o){return function(a){return ks(a,o)}}var Bn=Yn;function zt(o){return $l(o)?nr(gd(o)):Bn(o)}var Ft=zt;function Ln(o){return typeof o=="function"?o:o==null?ts:typeof o=="object"?ka(o)?Nn(o[0],o[1]):hd(o):Ft(o)}var ar=Ln;function rn(o,a,r){return $f(o,a,ar(r,2))}var hr=rn;function yn(o){return function(a,r,n){for(var e=-1,t=Object(a),i=n(a),s=i.length;s--;){var u=i[o?s:++e];if(r(t[u],u,t)===!1)break}return a}}var wn=yn,On=wn(),_n=On;function br(o,a){return o&&_n(o,a,Wl)}var Gr=br;function Zn(o,a){return function(r,n){if(r==null)return r;if(!Lo(r))return o(r,n);for(var e=r.length,t=a?e:-1,i=Object(r);(a?t--:++t<e)&&n(i[t],t,i)!==!1;);return r}}var zn=Zn,hn=zn(Gr),Nr=hn;function ai(o,a){var r=-1,n=Lo(o)?Array(o.length):[];return Nr(o,function(e,t,i){n[++r]=a(e,t,i)}),n}var dr=ai;function si(o,a){var r=o.length;for(o.sort(a);r--;)o[r]=o[r].value;return o}var zr=si;function oi(o,a){if(o!==a){var r=o!==void 0,n=o===null,e=o===o,t=na(o),i=a!==void 0,s=a===null,u=a===a,l=na(a);if(!s&&!l&&!t&&o>a||t&&i&&u&&!s&&!l||n&&i&&u||!r&&u||!e)return 1;if(!n&&!t&&!l&&o<a||l&&r&&e&&!n&&!t||s&&r&&e||!i&&e||!u)return-1}return 0}var Pi=oi;function Ia(o,a,r){for(var n=-1,e=o.criteria,t=a.criteria,i=e.length,s=r.length;++n<i;){var u=Pi(e[n],t[n]);if(u){if(n>=s)return u;var l=r[n];return u*(l=="desc"?-1:1)}}return o.index-a.index}var Qa=Ia;function ui(o,a,r){a.length?a=Ef(a,function(t){return ka(t)?function(i){return ks(i,t.length===1?t[0]:t)}:t}):a=[ts];var n=-1;a=Ef(a,zu(ar));var e=dr(o,function(t,i,s){var u=Ef(a,function(l){return l(t)});return{criteria:u,index:++n,value:t}});return zr(e,function(t,i){return Qa(t,i,r)})}var za=ui;function la(o,a,r){if(!tr(r))return!1;var n=typeof a;return(n=="number"?Lo(r)&&Go(a,r.length):n=="string"&&a in r)?Us(r[a],o):!1}var ca=la,Ra=du(function(o,a){if(o==null)return[];var r=a.length;return r>1&&ca(o,a[0],a[1])?a=[]:r>2&&ca(a[0],a[1],a[2])&&(a=[a[0]]),za(o,Dr(a,1),[])}),Xa=Ra;function pa(o,a,r){a=="__proto__"&&_l?_l(o,a,{configurable:!0,enumerable:!0,value:r,writable:!0}):o[a]=r}var Ea=pa;function Ua(o,a,r,n){for(var e=-1,t=o==null?0:o.length;++e<t;){var i=o[e];a(n,i,r(i),o)}return n}var qr=Ua;function Po(o,a,r,n){return Nr(o,function(e,t,i){a(n,e,r(e),i)}),n}var Gi=Po;function Ir(o,a){return function(r,n){var e=ka(r)?qr:Gi,t=a?a():{};return e(r,o,ar(n,2),t)}}var ei=Ir,Ei=Object.prototype,mo=Ei.hasOwnProperty,as=ei(function(o,a,r){mo.call(o,r)?o[r].push(a):Ea(o,r,[a])}),Tc=as,Ze=200;function Ht(o,a,r,n){var e=-1,t=Ao,i=!0,s=o.length,u=[],l=a.length;if(!s)return u;r&&(a=Ef(a,zu(r))),n?(t=bs,i=!1):a.length>=Ze&&(t=y,i=!1,a=new Ja(a));e:for(;++e<s;){var c=o[e],f=r==null?c:r(c);if(c=n||c!==0?c:0,i&&f===f){for(var d=l;d--;)if(a[d]===f)continue e;u.push(c)}else t(a,f,n)||u.push(c)}return u}var Nt=Ht,ur=du(function(o,a){return fc(o)?Nt(o,Dr(a,1,fc,!0)):[]}),ti=ur;function Ve(o,a,r){for(var n=-1,e=o.length;++n<e;){var t=o[n],i=a(t);if(i!=null&&(s===void 0?i===i&&!na(i):r(i,s)))var s=i,u=t}return u}var Ne=Ve;function ct(o,a){return o>a}var St=ct;function Tt(o){return o&&o.length?Ne(o,ts,St):void 0}var mt=Tt;function ft(o,a,r){for(var n=wt(o,r),e=wt(a,r),t=e.free,i=n.keyIndex,s=e.keyIndex,u=[],l=[],c=0,f,d,h=0;c<o.length;){if(f=o[c],d=f[r],d)if(!s.hasOwnProperty(d))l.push(null);else{var p=s[d];l.push(a[p])}else{h+=1;var m=t[h];l.push(m||null)}c+=1}var b=l.slice(0);for(c=0;c<b.length;)b[c]===null?(H(c),se(c)):c+=1;for(var E=c=0;c<a.length;){f=a[c],d=f[r];var x=b[E];if(x){var O=x[r];if(d===O)E+=1;else if(!i.hasOwnProperty(d))$(c,f);else{var D=b[E+1];if(D){var I=D[r];I===d?(H(c),se(E),E+=1):$(c,f)}}}else $(c,f);c+=1}for(var F=b.length-E;(E+=1)<b.length;)F-=1,H(F+c);function H(de){var Ee={index:de,type:0,item:null};u.push(Ee)}function $(de,Ee){var Oe={index:de,item:Ee,type:1};u.push(Oe)}function se(de){b.splice(de,1)}return{moves:u}}function wt(o,a){for(var r={},n=[],e=0,t=o.length;e<t;e+=1){var i=o[e],s=i[a];s?r[s]=e:n.push(i)}return{keyIndex:r,free:n}}var He=Object.prototype,ut=He.hasOwnProperty;function Be(o,a){return o!=null&&ut.call(o,a)}var Et=Be;function Dt(o,a){return o!=null&&Mt(o,a,Et)}var on=Dt,un=Object.prototype,qt=un.hasOwnProperty;function Gn(o,a,r){var n=o[a];(!(qt.call(o,a)&&Us(n,r))||r===void 0&&!(a in o))&&Ea(o,a,r)}var mr=Gn;function ri(o,a,r,n){if(!tr(o))return o;a=wf(a,o);for(var e=-1,t=a.length,i=t-1,s=o;s!=null&&++e<t;){var u=gd(a[e]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return o;if(e!=i){var c=s[u];l=n?n(c,u,s):void 0,l===void 0&&(l=tr(c)?c:Go(a[e+1])?[]:{})}mr(s,u,l),s=s[u]}return o}var vr=ri;function Ar(o,a,r){for(var n=-1,e=a.length,t={};++n<e;){var i=a[n],s=ks(o,i);r(s,i)&&vr(t,wf(i,o),s)}return t}var Kr=Ar;function ki(o,a){return Kr(o,a,function(r,n){return Bt(o,n)})}var Na=ki;function os(o){var a=o==null?0:o.length;return a?Dr(o,1):[]}var Cv=os;function Xs(o){return jd(of(o,void 0,Cv),o+"")}var kg=Xs,Eu=kg(function(o,a){return o==null?{}:Na(o,a)}),Dg=Eu;function DE(o){return typeof o=="function"?o:ts}var IE=DE;function RE(o){var a=[];if(o!=null)for(var r in Object(o))a.push(r);return a}var NE=RE,LE=Object.prototype,jE=LE.hasOwnProperty;function _E(o){if(!tr(o))return NE(o);var a=yc(o),r=[];for(var n in o)n=="constructor"&&(a||!jE.call(o,n))||r.push(n);return r}var FE=_E;function BE(o){return Lo(o)?Vl(o,!0):FE(o)}var Pc=BE;function GE(o,a){return o==null?o:_n(o,IE(a),Pc)}var ym=GE;function Yy(o,a,r){(r!==void 0&&!Us(o[a],r)||r===void 0&&!(a in o))&&Ea(o,a,r)}var bm=Yy,Zy=v("3/ER");function zE(o){var a=new o.constructor(o.byteLength);return new ff(a).set(new ff(o)),a}var Cm=zE;function UE(o,a){var r=a?Cm(o.buffer):o.buffer;return new o.constructor(r,o.byteOffset,o.length)}var Jy=UE;function VE(o,a){var r=-1,n=o.length;for(a||(a=Array(n));++r<n;)a[r]=o[r];return a}var Qy=VE,Em=Object.create,HE=function(){function o(){}return function(a){if(!tr(a))return{};if(Em)return Em(a);o.prototype=a;var r=new o;return o.prototype=void 0,r}}(),Ig=HE,WE=bc(Object.getPrototypeOf,Object),wm=WE;function $E(o){return typeof o.constructor=="function"&&!yc(o)?Ig(wm(o)):{}}var qy=$E,XE="[object Object]",KE=Function.prototype,YE=Object.prototype,eb=KE.toString,ZE=YE.hasOwnProperty,JE=eb.call(Object);function QE(o){if(!kt(o)||gn(o)!=XE)return!1;var a=wm(o);if(a===null)return!0;var r=ZE.call(a,"constructor")&&a.constructor;return typeof r=="function"&&r instanceof r&&eb.call(r)==JE}var xm=QE;function qE(o,a){if(!(a==="constructor"&&typeof o[a]=="function")&&a!="__proto__")return o[a]}var Om=qE;function ew(o,a,r,n){var e=!r;r||(r={});for(var t=-1,i=a.length;++t<i;){var s=a[t],u=n?n(r[s],o[s],s,r,o):void 0;u===void 0&&(u=o[s]),e?Ea(r,s,u):mr(r,s,u)}return r}var pd=ew;function tb(o){return pd(o,Pc(o))}var nb=tb;function tw(o,a,r,n,e,t,i){var s=Om(o,r),u=Om(a,r),l=i.get(u);if(l){bm(o,r,l);return}var c=t?t(s,u,r+"",o,a,i):void 0,f=c===void 0;if(f){var d=ka(u),h=!d&&Object(mc.a)(u),p=!d&&!h&&Uu(u);c=u,d||h||p?ka(s)?c=s:fc(s)?c=Qy(s):h?(f=!1,c=Object(Zy.a)(u,!0)):p?(f=!1,c=Jy(u,!0)):c=[]:xm(u)||Tr(u)?(c=s,Tr(s)?c=nb(s):(!tr(s)||di(s))&&(c=qy(u))):f=!1}f&&(i.set(u,c),e(c,u,n,t,i),i.delete(u)),bm(o,r,c)}var nw=tw;function rb(o,a,r,n,e){o!==a&&_n(a,function(t,i){if(e||(e=new Bo),tr(t))nw(o,a,i,r,rb,n,e);else{var s=n?n(Om(o,i),t,i+"",o,a,e):void 0;s===void 0&&(s=t),bm(o,i,s)}},Pc)}var Sm=rb;function Rg(o){return du(function(a,r){var n=-1,e=r.length,t=e>1?r[e-1]:void 0,i=e>2?r[2]:void 0;for(t=o.length>3&&typeof t=="function"?(e--,t):void 0,i&&ca(r[0],r[1],i)&&(t=e<3?void 0:t,e=1),a=Object(a);++n<e;){var s=r[n];s&&o(a,s,n,t)}return a})}var Ng=Rg,rw=Ng(function(o,a,r){Sm(o,a,r)}),iw=rw,aw=Ng(function(o,a){pd(a,Pc(a),o)}),ow=aw;function sw(o,a){return Oc(o,a)}var uw=sw,lw="[object Map]",cw="[object Set]",fw=Object.prototype,dw=fw.hasOwnProperty;function Lg(o){if(o==null)return!0;if(Lo(o)&&(ka(o)||typeof o=="string"||typeof o.splice=="function"||Object(mc.a)(o)||Uu(o)||Tr(o)))return!o.length;var a=Vu(o);if(a==lw||a==cw)return!o.size;if(yc(o))return!lv(o).length;for(var r in o)if(dw.call(o,r))return!1;return!0}var hw=Lg;function ib(o,a){for(var r=-1,n=o==null?0:o.length;++r<n&&a(o[r],r,o)!==!1;);return o}var ab=ib;function Mm(o,a){return o&&pd(a,Wl(a),o)}var ob=Mm;function sb(o,a){return o&&pd(a,Pc(a),o)}var ub=sb;function lb(o,a){return pd(o,vu(o),a)}var vw=lb,gw=Object.getOwnPropertySymbols,pw=gw?function(o){for(var a=[];o;)De(a,vu(o)),o=wm(o);return a}:gc,Ev=pw;function jg(o,a){return pd(o,Ev(o),a)}var mw=jg;function yw(o){return pg(o,Pc,Ev)}var Am=yw,cb=Object.prototype,bw=cb.hasOwnProperty;function Cw(o){var a=o.length,r=new o.constructor(a);return a&&typeof o[0]=="string"&&bw.call(o,"index")&&(r.index=o.index,r.input=o.input),r}var Ew=Cw;function ww(o,a){var r=a?Cm(o.buffer):o.buffer;return new o.constructor(r,o.byteOffset,o.byteLength)}var xw=ww,Ow=/\w*$/;function Sw(o){var a=new o.constructor(o.source,Ow.exec(o));return a.lastIndex=o.lastIndex,a}var Mw=Sw,fb=ho?ho.prototype:void 0,db=fb?fb.valueOf:void 0;function Aw(o){return db?Object(db.call(o)):{}}var Tw=Aw,hl="[object Boolean]",Pw="[object Date]",kw="[object Map]",md="[object Number]",bi="[object RegExp]",Dw="[object Set]",Ks="[object String]",yo="[object Symbol]",Iw="[object ArrayBuffer]",xf="[object DataView]",Rw="[object Float32Array]",Nw="[object Float64Array]",Lw="[object Int8Array]",jw="[object Int16Array]",_w="[object Int32Array]",Tm="[object Uint8Array]",Fw="[object Uint8ClampedArray]",kc="[object Uint16Array]",hb="[object Uint32Array]";function _g(o,a,r){var n=o.constructor;switch(a){case Iw:return Cm(o);case hl:case Pw:return new n(+o);case xf:return xw(o,r);case Rw:case Nw:case Lw:case jw:case _w:case Tm:case Fw:case kc:case hb:return Jy(o,r);case kw:return new n;case md:case Ks:return new n(o);case bi:return Mw(o);case Dw:return new n;case yo:return Tw(o)}}var qa=_g,uo="[object Map]";function vb(o){return kt(o)&&Vu(o)==uo}var Bw=vb,gb=As.a&&As.a.isMap,Gw=gb?zu(gb):Bw,zw=Gw,Uw="[object Set]";function Vw(o){return kt(o)&&Vu(o)==Uw}var pb=Vw,ah=As.a&&As.a.isSet,Pm=ah?zu(ah):pb,Hw=Pm,mb=1,Fg=2,wu=4,yd="[object Arguments]",Ww="[object Array]",$w="[object Boolean]",Xw="[object Date]",Kw="[object Error]",yb="[object Function]",bb="[object GeneratorFunction]",Dc="[object Map]",Oi="[object Number]",km="[object Object]",Hu="[object RegExp]",Cb="[object Set]",Yw="[object String]",ma="[object Symbol]",Zw="[object WeakMap]",Eb="[object ArrayBuffer]",Bg="[object DataView]",Jw="[object Float32Array]",Qw="[object Float64Array]",qw="[object Int8Array]",ex="[object Int16Array]",tx="[object Int32Array]",nx="[object Uint8Array]",rx="[object Uint8ClampedArray]",ix="[object Uint16Array]",ax="[object Uint32Array]",La={};La[yd]=La[Ww]=La[Eb]=La[Bg]=La[$w]=La[Xw]=La[Jw]=La[Qw]=La[qw]=La[ex]=La[tx]=La[Dc]=La[Oi]=La[km]=La[Hu]=La[Cb]=La[Yw]=La[ma]=La[nx]=La[rx]=La[ix]=La[ax]=!0,La[Kw]=La[yb]=La[Zw]=!1;function Gg(o,a,r,n,e,t){var i,s=a&mb,u=a&Fg,l=a&wu;if(r&&(i=e?r(o,n,e,t):r(o)),i!==void 0)return i;if(!tr(o))return o;var c=ka(o);if(c){if(i=Ew(o),!s)return Qy(o,i)}else{var f=Vu(o),d=f==yb||f==bb;if(Object(mc.a)(o))return Object(Zy.a)(o,s);if(f==km||f==yd||d&&!e){if(i=u||d?{}:qy(o),!s)return u?mw(o,ub(i,o)):vw(o,ob(i,o))}else{if(!La[f])return e?o:{};i=qa(o,f,s)}}t||(t=new Bo);var h=t.get(o);if(h)return h;t.set(o,i),Hw(o)?o.forEach(function(b){i.add(Gg(b,a,r,b,o,t))}):zw(o)&&o.forEach(function(b,E){i.set(E,Gg(b,a,r,E,o,t))});var p=l?u?Am:id:u?Pc:Wl,m=c?void 0:p(o);return ab(m||o,function(b,E){m&&(E=b,b=o[E]),mr(i,E,Gg(b,a,r,E,o,t))}),i}var wb=Gg,ox=4;function Dm(o){return wb(o,ox)}var sx=Dm,Im=1,ux=4;function lx(o){return wb(o,Im|ux)}var cx=lx,Vo=Object.prototype,Ys=Vo.hasOwnProperty,fx=du(function(o,a){o=Object(o);var r=-1,n=a.length,e=n>2?a[2]:void 0;for(e&&ca(a[0],a[1],e)&&(n=1);++r<n;)for(var t=a[r],i=Pc(t),s=-1,u=i.length;++s<u;){var l=i[s],c=o[l];(c===void 0||Us(c,Vo[l])&&!Ys.call(o,l))&&(o[l]=t[l])}return o}),dx=fx;function xb(o,a,r,n,e,t){return tr(o)&&tr(a)&&(t.set(a,o),Sm(o,a,void 0,xb,t),t.delete(a)),o}var Ob=xb,hx=Ng(function(o,a,r,n){Sm(o,a,r,n)}),vx=hx,gx=du(function(o){return o.push(void 0,Ob),lc(vx,void 0,o)}),Sb=gx;function px(o){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];r.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){t!=="constructor"&&Object.defineProperty(o.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))})})}var $n=v("yKVA"),Xn=v("879j"),Mb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(o[r]=a[r])};function Rm(o,a){Mb(o,a);function r(){this.constructor=o}o.prototype=a===null?Object.create(a):(r.prototype=a.prototype,new r)}var mx=Object(pe.a)(function o(){Object(Ie.a)(this,o)}),yx=/^\s*class\s+/.test("".concat(mx))||/^\s*class\s*\{/.test("".concat(function(){function o(){Object(Ie.a)(this,o)}return Object(pe.a)(o)}()));function bx(o,a){var r;return yx?r=function(n){Object($n.a)(t,n);var e=Object(Xn.a)(t);function t(){return Object(Ie.a)(this,t),e.apply(this,arguments)}return Object(pe.a)(t)}(a):(r=function(){return a.apply(this,arguments)},Rm(r,a)),Object.defineProperty(r,"name",{value:o}),r}function Ab(o,a){return o!=null?o:a}function oh(o,a,r){var n=o!=null?o[a]:null;return r!==void 0?Ab(n,r):n}function Cx(o,a,r){var n=o!=null?o[a]:null;return n==null||(n=+n,Number.isNaN(n)||!Number.isFinite(n))?r:n}function Ex(o,a,r){var n=o!=null?o[a]:null;return n==null?r:!!n}function Nm(o){return o==="__proto__"}function Tb(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n,e=Array.isArray(a)?a:a.split(r);if(e.length)for(n=o;e.length;){var t=e.shift();if(Object(n)===n&&t&&t in n)n=n[t];else return}return n}function wx(o,a,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",e=Array.isArray(a)?a:a.split(n),t=e.pop();if(t&&!Nm(t)){var i=o;e.forEach(function(s){Nm(s)||(i[s]==null&&(i[s]={}),i=i[s])}),i[t]=r}return o}function Pb(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n=Array.isArray(a)?a.slice():a.split(r),e=n.pop();if(e)if(n.length>0){var t=Tb(o,n);t&&delete t[e]}else delete o[e];return o}function Lm(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/",r=arguments.length>2?arguments[2]:void 0,n={};Object.keys(o).forEach(function(t){var i=o[t],s=typeof i=="object"||Array.isArray(i);if(s&&r&&r(i)&&(s=!1),s){var u=Lm(i,a,r);Object.keys(u).forEach(function(l){n[t+a+l]=u[l]})}else n[t]=i});for(var e in o)!!Object.prototype.hasOwnProperty.call(o,e);return n}var xx="[object String]";function Ox(o){return typeof o=="string"||!ka(o)&&kt(o)&&gn(o)==xx}var Sx=Ox;function Mx(o){return function(a){return o==null?void 0:o[a]}}var jm=Mx,Ax={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tx=jm(Ax),Px=Tx,kb=/[&<>"']/g,kx=RegExp(kb.source);function Dx(o){return o=ga(o),o&&kx.test(o)?o.replace(kb,Px):o}var Db=Dx,Ix={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Rx=jm(Ix),Nx=Rx,Ib=/&(?:amp|lt|gt|quot|#39);/g,Lx=RegExp(Ib.source);function jx(o){return o=ga(o),o&&Lx.test(o)?o.replace(Ib,Nx):o}var _x=jx;function Fx(o,a,r){return o===o&&(r!==void 0&&(o=o<=r?o:r),a!==void 0&&(o=o>=a?o:a)),o}var zg=Fx,Bx=/\s/;function Gx(o){for(var a=o.length;a--&&Bx.test(o.charAt(a)););return a}var zx=Gx,Ux=/^\s+/;function _m(o){return o&&o.slice(0,zx(o)+1).replace(Ux,"")}var Rb=_m,Fm=0/0,Vx=/^[-+]0x[0-9a-f]+$/i,Hx=/^0b[01]+$/i,Wx=/^0o[0-7]+$/i,Bm=parseInt;function $x(o){if(typeof o=="number")return o;if(na(o))return Fm;if(tr(o)){var a=typeof o.valueOf=="function"?o.valueOf():o;o=tr(a)?a+"":a}if(typeof o!="string")return o===0?o:+o;o=Rb(o);var r=Hx.test(o);return r||Wx.test(o)?Bm(o.slice(2),r?2:8):Vx.test(o)?Fm:+o}var Of=$x,Nb=1/0,Zs=17976931348623157e292;function Gm(o){if(!o)return o===0?o:0;if(o=Of(o),o===Nb||o===-Nb){var a=o<0?-1:1;return a*Zs}return o===o?o:0}var Ug=Gm;function Xx(o){var a=Ug(o),r=a%1;return a===a?r?a-r:a:0}var vl=Xx;function Kx(o,a,r){return o=ga(o),r=r==null?0:zg(vl(r),0,o.length),a=Ac(a),o.slice(r,r+a.length)==a}var zm=Kx;function Yx(o,a,r){o=ga(o),a=Ac(a);var n=o.length;r=r===void 0?n:zg(vl(r),0,n);var e=r;return r-=a.length,r>=0&&o.slice(r,e)==a}var Um=Yx;function Zx(o,a,r){var n=-1,e=o.length;a<0&&(a=-a>e?0:e+a),r=r>e?e:r,r<0&&(r+=e),e=a>r?0:r-a>>>0,a>>>=0;for(var t=Array(e);++n<e;)t[n]=o[n+a];return t}var Jx=Zx;function Qx(o,a,r){var n=o.length;return r=r===void 0?n:r,!a&&r>=n?o:Jx(o,a,r)}var Vg=Qx,Lb="\\ud800-\\udfff",qx="\\u0300-\\u036f",eO="\\ufe20-\\ufe2f",tO="\\u20d0-\\u20ff",Vm=qx+eO+tO,Hm="\\ufe0e\\ufe0f",nO="\\u200d",rO=RegExp("["+nO+Lb+Vm+Hm+"]");function iO(o){return rO.test(o)}var sh=iO,aO="[object RegExp]";function oO(o){return kt(o)&&gn(o)==aO}var sO=oO,jb=As.a&&As.a.isRegExp,uO=jb?zu(jb):sO,_b=uO;function lO(o){return o.split("")}var cO=lO,Fb="\\ud800-\\udfff",fO="\\u0300-\\u036f",dO="\\ufe20-\\ufe2f",hO="\\u20d0-\\u20ff",vO=fO+dO+hO,gO="\\ufe0e\\ufe0f",pO="["+Fb+"]",Wm="["+vO+"]",$m="\\ud83c[\\udffb-\\udfff]",g="(?:"+Wm+"|"+$m+")",w="[^"+Fb+"]",L="(?:\\ud83c[\\udde6-\\uddff]){2}",J="[\\ud800-\\udbff][\\udc00-\\udfff]",xe="\\u200d",Ge=g+"?",dt="["+gO+"]?",xt="(?:"+xe+"(?:"+[w,L,J].join("|")+")"+dt+Ge+")*",Gt=dt+Ge+xt,Un="(?:"+[w+Wm+"?",Wm,L,J,pO].join("|")+")",Hn=RegExp($m+"(?="+$m+")|"+Un+Gt,"g");function er(o){return o.match(Hn)||[]}var yr=er;function _r(o){return sh(o)?yr(o):cO(o)}var ni=_r,Di=4294967295;function li(o,a,r){return r&&typeof r!="number"&&ca(o,a,r)&&(a=r=void 0),r=r===void 0?Di:r>>>0,r?(o=ga(o),o&&(typeof a=="string"||a!=null&&!_b(a))&&(a=Ac(a),!a&&sh(o))?Vg(ni(o),0,r):o.split(a,r)):[]}var Vi=li,Yi=9007199254740991,xu=Math.floor;function Ds(o,a){var r="";if(!o||a<1||a>Yi)return r;do a%2&&(r+=o),a=xu(a/2),a&&(o+=o);while(a);return r}var Is=Ds;function bo(o,a,r){return(r?ca(o,a,r):a===void 0)?a=1:a=vl(a),Is(ga(o),a)}var gl=bo,Ic=nr("length"),Bb=Ic,FA="\\ud800-\\udfff",Oj="\\u0300-\\u036f",Sj="\\ufe20-\\ufe2f",Mj="\\u20d0-\\u20ff",Aj=Oj+Sj+Mj,Tj="\\ufe0e\\ufe0f",Pj="["+FA+"]",mO="["+Aj+"]",yO="\\ud83c[\\udffb-\\udfff]",kj="(?:"+mO+"|"+yO+")",BA="[^"+FA+"]",GA="(?:\\ud83c[\\udde6-\\uddff]){2}",zA="[\\ud800-\\udbff][\\udc00-\\udfff]",Dj="\\u200d",UA=kj+"?",VA="["+Tj+"]?",Ij="(?:"+Dj+"(?:"+[BA,GA,zA].join("|")+")"+VA+UA+")*",Rj=VA+UA+Ij,Nj="(?:"+[BA+mO+"?",mO,GA,zA,Pj].join("|")+")",HA=RegExp(yO+"(?="+yO+")|"+Nj+Rj,"g");function Lj(o){for(var a=HA.lastIndex=0;HA.test(o);)++a;return a}var jj=Lj;function _j(o){return sh(o)?jj(o):Bb(o)}var Xm=_j,Fj=Math.ceil;function Bj(o,a){a=a===void 0?" ":Ac(a);var r=a.length;if(r<2)return r?Is(a,o):a;var n=Is(a,Fj(o/Xm(a)));return sh(a)?Vg(ni(n),0,o).join(""):n.slice(0,o)}var Gb=Bj,Gj=Math.ceil,zj=Math.floor;function Uj(o,a,r){o=ga(o),a=vl(a);var n=a?Xm(o):0;if(!a||n>=a)return o;var e=(a-n)/2;return Gb(zj(e),r)+o+Gb(Gj(e),r)}var Vj=Uj;function Hj(o,a,r){o=ga(o),a=vl(a);var n=a?Xm(o):0;return a&&n<a?o+Gb(a-n,r):o}var Wj=Hj;function $j(o,a,r){o=ga(o),a=vl(a);var n=a?Xm(o):0;return a&&n<a?Gb(a-n,r)+o:o}var Xj=$j,Kj=30,Yj="...",Zj=/\w*$/;function Jj(o,a){var r=Kj,n=Yj;if(tr(a)){var e="separator"in a?a.separator:e;r="length"in a?vl(a.length):r,n="omission"in a?Ac(a.omission):n}o=ga(o);var t=o.length;if(sh(o)){var i=ni(o);t=i.length}if(r>=t)return o;var s=r-Xm(n);if(s<1)return n;var u=i?Vg(i,0,s).join(""):o.slice(0,s);if(e===void 0)return u+n;if(i&&(s+=u.length-s),_b(e)){if(o.slice(s).search(e)){var l,c=u;for(e.global||(e=RegExp(e.source,ga(Zj.exec(e))+"g")),e.lastIndex=0;l=e.exec(c);)var f=l.index;u=u.slice(0,f===void 0?s:f)}}else if(o.indexOf(Ac(e),s)!=s){var d=u.lastIndexOf(e);d>-1&&(u=u.slice(0,d))}return u+n}var Qj=Jj,qj=Ng(function(o,a,r,n){pd(a,Pc(a),o,n)}),WA=qj,e_="[object DOMException]",t_="[object Error]";function n_(o){if(!kt(o))return!1;var a=gn(o);return a==t_||a==e_||typeof o.message=="string"&&typeof o.name=="string"&&!xm(o)}var $A=n_,r_=du(function(o,a){try{return lc(o,void 0,a)}catch(r){return $A(r)?r:new Error(r)}}),i_=r_;function a_(o,a){return Ef(a,function(r){return o[r]})}var o_=a_,XA=Object.prototype,s_=XA.hasOwnProperty;function u_(o,a,r,n){return o===void 0||Us(o,XA[r])&&!s_.call(n,r)?a:o}var KA=u_,l_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function c_(o){return"\\"+l_[o]}var f_=c_,d_=/<%=([\s\S]+?)%>/g,YA=d_,h_=/<%-([\s\S]+?)%>/g,v_=h_,g_=/<%([\s\S]+?)%>/g,p_=g_,m_={escape:v_,evaluate:p_,interpolate:YA,variable:"",imports:{_:{escape:Db}}},ZA=m_,y_="Invalid `variable` option passed into `_.template`",b_=/\b__p \+= '';/g,C_=/\b(__p \+=) '' \+/g,E_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,w_=/[()=,{}\[\]\/\s]/,x_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zb=/($^)/,O_=/['\n\r\u2028\u2029\\]/g,S_=Object.prototype,JA=S_.hasOwnProperty;function M_(o,a,r){var n=ZA.imports._.templateSettings||ZA;r&&ca(o,a,r)&&(a=void 0),o=ga(o),a=WA({},a,n,KA);var e=WA({},a.imports,n.imports,KA),t=Wl(e),i=o_(e,t),s,u,l=0,c=a.interpolate||zb,f="__p += '",d=RegExp((a.escape||zb).source+"|"+c.source+"|"+(c===YA?x_:zb).source+"|"+(a.evaluate||zb).source+"|$","g"),h=JA.call(a,"sourceURL")?"//# sourceURL="+(a.sourceURL+"").replace(/\s/g," ")+`
`:"";o.replace(d,function(b,E,x,O,D,I){return x||(x=O),f+=o.slice(l,I).replace(O_,f_),E&&(s=!0,f+=`' +
__e(`+E+`) +
'`),D&&(u=!0,f+=`';
`+D+`;
__p += '`),x&&(f+=`' +
((__t = (`+x+`)) == null ? '' : __t) +
'`),l=I+b.length,b}),f+=`';
`;var p=JA.call(a,"variable")&&a.variable;if(!p)f=`with (obj) {
`+f+`
}
`;else if(w_.test(p))throw new Error(y_);f=(u?f.replace(b_,""):f).replace(C_,"$1").replace(E_,"$1;"),f="function("+(p||"obj")+`) {
`+(p?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(u?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+f+`return __p
}`;var m=i_(function(){return Function(t,h+"return "+f).apply(void 0,i)});if(m.source=f,$A(m))throw m;return m}var A_=M_,T_=0;function P_(o){var a=++T_;return ga(o)+a}var k_=P_;function D_(o){var a=null;try{a=window.eval(o)}catch(r){}return a}function I_(o,a,r,n){var e=-1,t=o==null?0:o.length;for(n&&t&&(r=o[++e]);++e<t;)r=a(r,o[e],e,o);return r}var R_=I_,N_={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},L_=jm(N_),j_=L_,__=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,F_="\\u0300-\\u036f",B_="\\ufe20-\\ufe2f",G_="\\u20d0-\\u20ff",z_=F_+B_+G_,U_="["+z_+"]",V_=RegExp(U_,"g");function H_(o){return o=ga(o),o&&o.replace(__,j_).replace(V_,"")}var W_=H_,$_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function X_(o){return o.match($_)||[]}var K_=X_,Y_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Z_(o){return Y_.test(o)}var J_=Z_,QA="\\ud800-\\udfff",Q_="\\u0300-\\u036f",q_="\\ufe20-\\ufe2f",eF="\\u20d0-\\u20ff",tF=Q_+q_+eF,qA="\\u2700-\\u27bf",eT="a-z\\xdf-\\xf6\\xf8-\\xff",nF="\\xac\\xb1\\xd7\\xf7",rF="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",iF="\\u2000-\\u206f",aF=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tT="A-Z\\xc0-\\xd6\\xd8-\\xde",oF="\\ufe0e\\ufe0f",nT=nF+rF+iF+aF,rT="['\u2019]",iT="["+nT+"]",sF="["+tF+"]",aT="\\d+",uF="["+qA+"]",oT="["+eT+"]",sT="[^"+QA+nT+aT+qA+eT+tT+"]",lF="\\ud83c[\\udffb-\\udfff]",cF="(?:"+sF+"|"+lF+")",fF="[^"+QA+"]",uT="(?:\\ud83c[\\udde6-\\uddff]){2}",lT="[\\ud800-\\udbff][\\udc00-\\udfff]",Hg="["+tT+"]",dF="\\u200d",cT="(?:"+oT+"|"+sT+")",hF="(?:"+Hg+"|"+sT+")",fT="(?:"+rT+"(?:d|ll|m|re|s|t|ve))?",dT="(?:"+rT+"(?:D|LL|M|RE|S|T|VE))?",hT=cF+"?",vT="["+oF+"]?",vF="(?:"+dF+"(?:"+[fF,uT,lT].join("|")+")"+vT+hT+")*",gF="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pF="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mF=vT+hT+vF,yF="(?:"+[uF,uT,lT].join("|")+")"+mF,bF=RegExp([Hg+"?"+oT+"+"+fT+"(?="+[iT,Hg,"$"].join("|")+")",hF+"+"+dT+"(?="+[iT,Hg+cT,"$"].join("|")+")",Hg+"?"+cT+"+"+fT,Hg+"+"+dT,pF,gF,aT,yF].join("|"),"g");function CF(o){return o.match(bF)||[]}var EF=CF;function wF(o,a,r){return o=ga(o),a=r?void 0:a,a===void 0?J_(o)?EF(o):K_(o):o.match(a)||[]}var xF=wF,OF="['\u2019]",SF=RegExp(OF,"g");function MF(o){return function(a){return R_(xF(W_(a).replace(SF,"")),o,"")}}var Ub=MF;function AF(o){return function(a){a=ga(a);var r=sh(a)?ni(a):void 0,n=r?r[0]:a.charAt(0),e=r?Vg(r,1).join(""):a.slice(1);return n[o]()+e}}var gT=AF,TF=gT("toUpperCase"),Vb=TF,PF=Ub(function(o,a,r){return o+(r?" ":"")+Vb(a)}),pT=PF;function kF(o){return Vb(ga(o).toLowerCase())}var DF=kF,IF=Ub(function(o,a,r){return a=a.toLowerCase(),o+(r?DF(a):a)}),bO=IF,RF=Ub(function(o,a,r){return o+(r?" ":"")+a.toUpperCase()}),NF=RF,LF=Ub(function(o,a,r){return o+(r?" ":"")+a.toLowerCase()}),CO=LF,jF=gT("toLowerCase"),_F=jF,wv=function(a){var r=Object.create(null);return function(n){var e=r[n];return e||(r[n]=a(n))}},mT=wv(function(o){return o.replace(/\B([A-Z])/g,"-$1").toLowerCase()}),FF=wv(function(o){return pT(bO(o)).replace(/ /g,"")}),BF=wv(function(o){return NF(o).replace(/ /g,"_")}),GF=wv(function(o){return CO(o).replace(/ /g,".")}),zF=wv(function(o){return CO(o).replace(/ /g,"/")}),UF=wv(function(o){return Vb(CO(o))}),VF=wv(function(o){return pT(bO(o))});function HF(o){for(var a=2166136261,r=!1,n=o,e=0,t=n.length;e<t;e+=1){var i=n.charCodeAt(e);i>127&&!r&&(n=unescape(encodeURIComponent(n)),i=n.charCodeAt(e),r=!0),a^=i,a+=(a<<1)+(a<<4)+(a<<7)+(a<<8)+(a<<24)}return a>>>0}function WF(){for(var o="",a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r=0,n=a.length;r<n;r+=1){var e=a[r],t=Math.random()*16|0,i=e==="x"?t:e==="y"?t&3|8:e;o+=i.toString(16)}return o}function $F(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=En.a.parseHTML(o,null,!1);return r.forEach(function(n){var e=n;if(e){var t=e.attributes;if(t)for(var i=0,s=t.length;i<s;i+=1){var u=t.item(i);if(u){var l=u.value.toLowerCase(),c=u.name.toLowerCase();(c.startsWith("on")||l.startsWith("javascript:")||l.startsWith("data:")||l.startsWith("vbscript:"))&&e.removeAttribute(c)}}}}),a.raw?r:En()("<div/>").append(r).html()}function XF(o,a,r){var n=Math.min(2,Math.floor(o.length*.34)),e=Math.floor(o.length*.4)+1,t,i=!1,s=o.toLowerCase(),u=Object(ir.a)(a),l;try{for(u.s();!(l=u.n()).done;){var c=l.value,f=r(c);if(f!==void 0&&Math.abs(f.length-s.length)<=n){var d=f.toLowerCase();if(d===s){if(f===o)continue;return c}if(i||f.length<3)continue;var h=KF(s,d,e-1);if(h===void 0)continue;h<3?(i=!0,t=c):(e=h,t=c)}}}catch(p){u.e(p)}finally{u.f()}return t}function KF(o,a,r){for(var n=new Array(a.length+1),e=new Array(a.length+1),t=r+1,i=0;i<=a.length;i+=1)n[i]=i;for(var s=1;s<=o.length;s+=1){var u=o.charCodeAt(s-1),l=s>r?s-r:1,c=a.length>r+s?r+s:a.length;e[0]=s;for(var f=s,d=1;d<l;d+=1)e[d]=t;for(var h=l;h<=c;h+=1){var p=u===a.charCodeAt(h-1)?n[h-1]:Math.min(n[h]+1,e[h-1]+1,n[h-1]+2);e[h]=p,f=Math.min(f,p)}for(var m=c+1;m<=a.length;m+=1)e[m]=t;if(f>r)return;var b=n;n=e,e=b}var E=n[a.length];return E>r?void 0:E}var YF="[object Number]";function ZF(o){return typeof o=="number"||kt(o)&&gn(o)==YF}var yT=ZF;function JF(o){return yT(o)&&o!=+o}var QF=JF,qF=Ro.a.isFinite;function e4(o){return typeof o=="number"&&qF(o)}var t4=e4;function n4(o){return typeof o=="number"&&o==vl(o)}var bT=n4,CT=9007199254740991;function r4(o){return bT(o)&&o>=-CT&&o<=CT}var i4=r4;function a4(o,a,r){return r===void 0&&(r=a,a=void 0),r!==void 0&&(r=Of(r),r=r===r?r:0),a!==void 0&&(a=Of(a),a=a===a?a:0),zg(Of(o),a,r)}var o4=a4,s4=Math.max,u4=Math.min;function l4(o,a,r){return o>=u4(a,r)&&o<s4(a,r)}var c4=l4;function f4(o,a,r){return a=Ug(a),r===void 0?(r=a,a=0):r=Ug(r),o=Of(o),c4(o,a,r)}var d4=f4,ET=9007199254740991;function h4(o){return o?zg(vl(o),-ET,ET):o===0?o:0}var v4=h4,g4=/^\s+/,p4=Ro.a.parseInt;function m4(o,a,r){return r||a==null?a=0:a&&(a=+a),p4(ga(o).replace(g4,""),a||0)}var y4=m4;function b4(o,a){return(o%a+a)%a}function C4(o,a){if(a==null)a=o==null?1:o,o=0;else if(a<o){var r=o;o=a,a=r}return Math.floor(Math.random()*(a-o+1)+o)}function wT(o){return typeof o=="string"&&o.slice(-1)==="%"}function E4(o,a){if(o==null)return 0;var r;if(typeof o=="string"){if(r=parseFloat(o),wT(o)&&(r/=100,Number.isFinite(r)))return r*a}else r=o;return Number.isFinite(r)?r>0&&r<1?r*a:r:0}function w4(o,a){function r(i){var s=new RegExp("(?:\\d+(?:\\.\\d+)*)(".concat(i,")$")).exec(o);return s?s[1]:null}var n=parseFloat(o);if(Number.isNaN(n))return null;var e;if(a==null)e="[A-Za-z]*";else if(Array.isArray(a)){if(a.length===0)return null;e=a.join("|")}else typeof a=="string"&&(e=a);var t=r(e);return t===null?null:{unit:t,value:n}}function x4(o){if(typeof o=="object"){var a=0,r=0,n=0,e=0;return o.vertical!=null&&Number.isFinite(o.vertical)&&(r=e=o.vertical),o.horizontal!=null&&Number.isFinite(o.horizontal)&&(n=a=o.horizontal),o.left!=null&&Number.isFinite(o.left)&&(a=o.left),o.top!=null&&Number.isFinite(o.top)&&(r=o.top),o.right!=null&&Number.isFinite(o.right)&&(n=o.right),o.bottom!=null&&Number.isFinite(o.bottom)&&(e=o.bottom),{top:r,right:n,bottom:e,left:a}}var t=0;return o!=null&&Number.isFinite(o)&&(t=o),{top:t,right:t,bottom:t,left:t}}var O4="Expected a function";function S4(o,a){var r;if(typeof a!="function")throw new TypeError(O4);return o=vl(o),function(){return--o>0&&(r=a.apply(this,arguments)),o<=1&&(a=void 0),r}}var M4=S4;function A4(o){return M4(2,o)}var T4=A4,P4=function(){return Ro.a.Date.now()},EO=P4,k4="Expected a function",D4=Math.max,I4=Math.min;function R4(o,a,r){var n,e,t,i,s,u,l=0,c=!1,f=!1,d=!0;if(typeof o!="function")throw new TypeError(k4);a=Of(a)||0,tr(r)&&(c=!!r.leading,f="maxWait"in r,t=f?D4(Of(r.maxWait)||0,a):t,d="trailing"in r?!!r.trailing:d);function h(F){var H=n,$=e;return n=e=void 0,l=F,i=o.apply($,H),i}function p(F){return l=F,s=setTimeout(E,a),c?h(F):i}function m(F){var H=F-u,$=F-l,se=a-H;return f?I4(se,t-$):se}function b(F){var H=F-u,$=F-l;return u===void 0||H>=a||H<0||f&&$>=t}function E(){var F=EO();if(b(F))return x(F);s=setTimeout(E,m(F))}function x(F){return s=void 0,d&&n?h(F):(n=e=void 0,i)}function O(){s!==void 0&&clearTimeout(s),l=0,n=u=e=s=void 0}function D(){return s===void 0?i:x(EO())}function I(){var F=EO(),H=b(F);if(n=arguments,e=this,u=F,H){if(s===void 0)return p(u);if(f)return clearTimeout(s),s=setTimeout(E,a),h(u)}return s===void 0&&(s=setTimeout(E,a)),i}return I.cancel=O,I.flush=D,I}var N4=R4,L4="Expected a function";function j4(o,a,r){if(typeof o!="function")throw new TypeError(L4);return setTimeout(function(){o.apply(void 0,r)},a)}var _4=j4,F4=du(function(o,a){return _4(o,1,a)}),B4=F4;function wO(o,a,r){if(r)switch(r.length){case 0:return o.call(a);case 1:return o.call(a,r[0]);case 2:return o.call(a,r[0],r[1]);case 3:return o.call(a,r[0],r[1],r[2]);case 4:return o.call(a,r[0],r[1],r[2],r[3]);case 5:return o.call(a,r[0],r[1],r[2],r[3],r[4]);case 6:return o.call(a,r[0],r[1],r[2],r[3],r[4],r[5]);default:return o.apply(a,r)}return o.call(a)}function G4(o,a){for(var r=arguments.length,n=new Array(r>2?r-2:0),e=2;e<r;e++)n[e-2]=arguments[e];return wO(o,a,n)}function z4(o,a){for(var r=0,n=o.length;r<n;r+=1)if(o[r]===a)return o.push(o.splice(r,1)[0])}function U4(o,a,r){var n=[],e={},t=function(){for(var s=!1,u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var f=l.join("\u2400");return f in e?(s=!0,z4(n,f)):(n.length>=1e3&&delete e[n.shift()],n.push(f),e[f]=wO(o,a||null,l)),r?r(e[f],s):e[f]};return t}function xT(o){return typeof o=="object"&&o.then&&typeof o.then=="function"}function xO(o){return o!=null&&(o instanceof Promise||xT(o))}function OT(){for(var o=[],a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];r.forEach(function(i){Array.isArray(i)?o.push.apply(o,Object(ot.a)(i)):o.push(i)});var e=o.some(function(i){return xO(i)});if(e){var t=o.map(function(i){return xO(i)?i:Promise.resolve(i!==!1)});return Promise.all(t).then(function(i){return i.reduce(function(s,u){return u!==!1&&s},!0)})}return o.every(function(i){return i!==!1})}function V4(){for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];var n=OT(a);return typeof n=="boolean"?Promise.resolve(n):n}var OO=/[\t\r\n\f]/g,SO=/\S+/g,Wg=function(a){return" ".concat(a," ")};function xv(o){return o&&o.getAttribute&&o.getAttribute("class")||""}function Hb(o,a){if(o==null||a==null)return!1;var r=Wg(xv(o)),n=Wg(a);return o.nodeType===1?r.replace(OO," ").includes(n):!1}function Km(o,a){if(!(o==null||a==null)){if(typeof a=="function")return Km(o,a(xv(o)));if(typeof a=="string"&&o.nodeType===1){var r=a.match(SO)||[],n=Wg(xv(o)).replace(OO," "),e=r.reduce(function(t,i){return t.indexOf(Wg(i))<0?"".concat(t).concat(i," "):t},n);e=e.trim(),n!==e&&o.setAttribute("class",e)}}}function Ym(o,a){if(o!=null){if(typeof a=="function")return Ym(o,a(xv(o)));if((!a||typeof a=="string")&&o.nodeType===1){var r=(a||"").match(SO)||[],n=Wg(xv(o)).replace(OO," "),e=r.reduce(function(t,i){var s=Wg(i);return t.indexOf(s)>-1?t.replace(s," "):t},n);e=a?e.trim():"",n!==e&&o.setAttribute("class",e)}}}function MO(o,a,r){if(!(o==null||a==null)){if(r!=null&&typeof a=="string"){r?Km(o,a):Ym(o,a);return}if(typeof a=="function")return MO(o,a(xv(o),r),r);if(typeof a=="string"){var n=a.match(SO)||[];n.forEach(function(e){Hb(o,e)?Ym(o,e):Km(o,e)})}}}var ST=0;function MT(){return ST+=1,"v".concat(ST)}function AT(o){return(o.id==null||o.id==="")&&(o.id=MT()),o.id}function $g(o){return o==null?!1:typeof o.getScreenCTM=="function"&&o instanceof SVGElement}var Sf={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},AO="1.1";function H4(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return a.createElement(o)}function TT(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sf.xhtml,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return r.createElementNS(a,o)}function Mf(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return TT(o,Sf.svg,a)}function Wb(o){if(o){var a='<svg xmlns="'.concat(Sf.svg,'" xmlns:xlink="').concat(Sf.xlink,'" version="').concat(AO,'">').concat(o,"</svg>"),r=PT(a,{async:!1}),n=r.documentElement;return n}var e=document.createElementNS(Sf.svg,"svg");return e.setAttributeNS(Sf.xmlns,"xmlns:xlink",Sf.xlink),e.setAttribute("version",AO),e}function PT(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;try{var n=new DOMParser;if(a.async!=null){var e=n;e.async=a.async}r=n.parseFromString(o,a.mimeType||"text/xml")}catch(t){r=void 0}if(!r||r.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: ".concat(o));return r}function $b(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=o.nodeName;return a?r.toLowerCase():r.toUpperCase()}function kT(o){for(var a=0,r=o.previousSibling;r;)r.nodeType===1&&(a+=1),r=r.previousSibling;return a}function DT(o,a){return o.querySelectorAll(a)}function IT(o,a){return o.querySelector(a)}function RT(o,a,r){for(var n=o.ownerSVGElement,e=o.parentNode;e&&e!==r&&e!==n;){if(Hb(e,a))return e;e=e.parentNode}return null}function NT(o,a){var r=a&&a.parentNode;return o===r||!!(r&&r.nodeType===1&&o.compareDocumentPosition(r)&16)}function Xb(o){o.parentNode&&o.parentNode.removeChild(o)}function TO(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function PO(o,a){var r=Array.isArray(a)?a:[a];r.forEach(function(n){n!=null&&o.appendChild(n)})}function LT(o,a){var r=o.firstChild;return r?kO(r,a):PO(o,a)}function kO(o,a){var r=o.parentNode;if(r){var n=Array.isArray(a)?a:[a];n.forEach(function(e){e!=null&&r.insertBefore(e,o)})}}function jT(o,a){a!=null&&a.appendChild(o)}function DO(o){try{return o instanceof HTMLElement}catch(a){return typeof o=="object"&&o.nodeType===1&&typeof o.style=="object"&&typeof o.ownerDocument=="object"}}function _T(o){return!o||!DO(o)?!1:["a","button"].includes($b(o))||o.getAttribute("role")==="button"||o.getAttribute("type")==="button"?!0:_T(o.parentNode)}function W4(o){var a=$b(o);if(a==="input"){var r=o.getAttribute("type");if(r==null||["text","password","number","email","search","tel","url"].includes(r))return!0}return!1}var FT=["viewBox","attributeName","attributeType","repeatCount"];function BT(o,a){return o.getAttribute(a)}function IO(o,a){var r=NO(a);r.ns?o.hasAttributeNS(r.ns,r.local)&&o.removeAttributeNS(r.ns,r.local):o.hasAttribute(a)&&o.removeAttribute(a)}function Kb(o,a,r){if(r==null)return IO(o,a);var n=NO(a);n.ns&&typeof r=="string"?o.setAttributeNS(n.ns,a,r):a==="id"?o.id="".concat(r):o.setAttribute(a,"".concat(r))}function RO(o,a){Object.keys(a).forEach(function(r){Kb(o,r,a[r])})}function Rs(o,a,r){if(a==null){for(var n=o.attributes,e={},t=0;t<n.length;t+=1)e[n[t].name]=n[t].value;return e}if(typeof a=="string"&&r===void 0)return o.getAttribute(a);typeof a=="object"?RO(o,a):Kb(o,a,r)}function NO(o){if(o.indexOf(":")!==-1){var a=o.split(":");return{ns:Sf[a[0]],local:a[1]}}return{ns:null,local:o}}function $4(o){var a={};return Object.keys(o).forEach(function(r){var n=FT.includes(r)?r:mT(r);a[n]=o[r]}),a}function Zm(o){var a={},r=o.split(";");return r.forEach(function(n){var e=n.trim();if(e){var t=e.split("=");t.length&&(a[t[0].trim()]=t[1]?t[1].trim():"")}}),a}function Yb(o,a){return Object.keys(a).forEach(function(r){if(r==="class")o[r]=o[r]?"".concat(o[r]," ").concat(a[r]):a[r];else if(r==="style"){var n=typeof o[r]=="object",e=typeof a[r]=="object",t,i;n&&e?(t=o[r],i=a[r]):n?(t=o[r],i=Zm(a[r])):e?(t=Zm(o[r]),i=a[r]):(t=Zm(o[r]),i=Zm(a[r])),o[r]=Yb(t,i)}else o[r]=a[r]}),o}function X4(o,a){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.offset||0,e=[],t=[],i,s,u=null,l=0;l<o.length;l+=1){i=t[l]=o[l];for(var c=0,f=a.length;c<f;c+=1){var d=a[c],h=d.start+n,p=d.end+n;l>=h&&l<p&&(typeof i=="string"?i=t[l]={t:o[l],attrs:d.attrs}:i.attrs=Yb(Yb({},i.attrs),d.attrs),r.includeAnnotationIndices&&(i.annotations==null&&(i.annotations=[]),i.annotations.push(c)))}s=t[l-1],s?C.isObject(i)&&C.isObject(s)?(u=u,JSON.stringify(i.attrs)===JSON.stringify(s.attrs)?u.t+=i.t:(e.push(u),u=i)):C.isObject(i)||C.isObject(s)?(u=u,e.push(u),u=i):u=(u||"")+i:u=i}return u!=null&&e.push(u),e}function K4(o,a){return o?o.filter(function(r){return r.start<a&&a<=r.end}):[]}function Y4(o,a,r){return o?o.filter(function(n){return a>=n.start&&a<n.end||r>n.start&&r<=n.end||n.start>=a&&n.end<r}):[]}function Z4(o,a,r){return o&&o.forEach(function(n){n.start<a&&n.end>=a?n.end+=r:n.start>=a&&(n.start+=r,n.end+=r)}),o}function J4(o){return o.replace(/ /g,"\xA0")}var GT;(function(o){o.emptyObject=Object.freeze({}),o.emptyArray=Object.freeze([]);function a(c){return c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"}o.isPrimitive=a;function r(c){return Array.isArray(c)}o.isArray=r;function n(c){return!a(c)&&!r(c)}o.isObject=n;function e(c,f){if(c===f)return!0;if(a(c)||a(f))return!1;var d=r(c),h=r(f);return d!==h?!1:d&&h?i(c,f):s(c,f)}o.deepEqual=e;function t(c){return a(c)?c:r(c)?u(c):l(c)}o.deepCopy=t;function i(c,f){if(c===f)return!0;if(c.length!==f.length)return!1;for(var d=0,h=c.length;d<h;d+=1)if(!e(c[d],f[d]))return!1;return!0}function s(c,f){if(c===f)return!0;for(var d in c)if(!(d in f))return!1;for(var h in f)if(!(h in c))return!1;for(var p in c)if(!e(c[p],f[p]))return!1;return!0}function u(c){for(var f=new Array(c.length),d=0,h=c.length;d<h;d+=1)f[d]=t(c[d]);return f}function l(c){var f={};return Object.keys(c).forEach(function(d){f[d]=t(c[d])}),f}})(GT||(GT={}));var LO;(function(o){function a(l){var c="data:";return l.substr(0,c.length)===c}o.isDataUrl=a;function r(l,c){if(!l||a(l)){setTimeout(function(){return c(null,l)});return}var f=function(){c(new Error("Failed to load image: ".concat(l)))},d=window.FileReader?function(p){if(p.status===200){var m=new FileReader;m.onload=function(b){var E=b.target.result;c(null,E)},m.onerror=f,m.readAsDataURL(p.response)}else f()}:function(p){var m=function(I){for(var F=32768,H=[],$=0;$<I.length;$+=F)H.push(String.fromCharCode.apply(null,I.subarray($,$+F)));return H.join("")};if(p.status===200){var b=l.split(".").pop()||"png";b==="svg"&&(b="svg+xml");var E="data:image/".concat(b,";base64,"),x=new Uint8Array(p.response),O=E+btoa(m(x));c(null,O)}else f()},h=new XMLHttpRequest;h.responseType=window.FileReader?"blob":"arraybuffer",h.open("GET",l,!0),h.addEventListener("error",f),h.addEventListener("load",function(){return d(h)}),h.send()}o.imageToDataUri=r;function n(l){var c=l.replace(/\s/g,"");c=decodeURIComponent(c);var f=c.indexOf(","),d=c.slice(0,f),h=d.split(":")[1].split(";")[0],p=c.slice(f+1),m;d.indexOf("base64")>=0?m=atob(p):m=unescape(encodeURIComponent(p));for(var b=new Uint8Array(m.length),E=0;E<m.length;E+=1)b[E]=m.charCodeAt(E);return new Blob([b],{type:h})}o.dataUriToBlob=n;function e(l,c){var f=window.navigator.msSaveBlob;if(f)f(l,c);else{var d=window.URL.createObjectURL(l),h=document.createElement("a");h.href=d,h.download=c,document.body.appendChild(h),h.click(),document.body.removeChild(h),window.URL.revokeObjectURL(d)}}o.downloadBlob=e;function t(l,c){var f=n(l);e(f,c)}o.downloadDataUri=t;function i(l){var c=l.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return c&&c[2]?c[2].replace(/\s+/," ").split(" "):null}function s(l){var c=parseFloat(l);return Number.isNaN(c)?null:c}function u(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=null,d=function(D){return f==null&&(f=i(l)),f!=null?s(f[D]):null},h=function(D){var I=l.match(D);return I&&I[2]?s(I[2]):null},p=c.width;if(p==null&&(p=h(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),p==null&&(p=d(2)),p==null)throw new Error("Can not parse width from svg string");var m=c.height;if(m==null&&(m=h(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),m==null&&(m=d(3)),m==null)throw new Error("Can not parse height from svg string");var b=encodeURIComponent(l).replace(/'/g,"%27").replace(/"/g,"%22"),E="data:image/svg+xml",x="".concat(E,",").concat(b);return x}o.svgToDataUrl=u})(LO||(LO={}));var Ov,Q4={px:function(a){return a},mm:function(a){return Ov*a},cm:function(a){return Ov*a*10},in:function(a){return Ov*a*25.4},pt:function(a){return Ov*(25.4*a/72)},pc:function(a){return Ov*(25.4*a/6)}},jO;(function(o){function a(n,e,t){var i=En()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:n+(t||""),height:e+(t||"")}).appendTo(document.body),s={width:i.width()||0,height:i.height()||0};return i.remove(),s}o.measure=a;function r(n,e){Ov==null&&(Ov=a("1","1","mm").width);var t=e?Q4[e]:null;return t?t(n):n}o.toPx=r})(jO||(jO={}));var q4=function(){var o,a=window;if(a!=null&&(o=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame,o!=null&&(o=o.bind(a))),o==null){var r=0;o=function(e){var t=new Date().getTime(),i=Math.max(0,16-(t-r)),s=setTimeout(function(){e(t+i)},i);return r=t+i,s}}return o}(),eB=function(){var o,a=window;return a!=null&&(o=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame||a.msCancelAnimationFrame||a.msCancelRequestAnimationFrame||a.oCancelAnimationFrame||a.oCancelRequestAnimationFrame||a.mozCancelAnimationFrame||a.mozCancelRequestAnimationFrame,o&&(o=o.bind(a))),o==null&&(o=clearTimeout),o}(),tB=/-(.)/g;function nB(o){return o.replace(tB,function(a,r){return r.toUpperCase()})}var _O={},zT=["Webkit","ms","Moz","O"],UT=document?document.createElement("div").style:{};function rB(o){for(var a=0;a<zT.length;a+=1){var r=zT[a]+o;if(r in UT)return r}return null}function VT(o){var a=nB(o);if(_O[a]==null){var r=a.charAt(0).toUpperCase()+a.slice(1);_O[a]=a in UT?a:rB(r)}return _O[a]}function iB(o,a,r){var n=VT(a);n!=null&&(o[n]=r),o[a]=r}function Zb(o,a){var r=o.ownerDocument&&o.ownerDocument.defaultView&&o.ownerDocument.defaultView.opener?o.ownerDocument.defaultView.getComputedStyle(o,null):window.getComputedStyle(o,null);return r&&a?r.getPropertyValue(a)||r[a]:r}function aB(o){var a=Zb(o);return a!=null&&(a.overflow==="scroll"||a.overflow==="auto")}var oB=function(){var o=document;return o.selection?function(){o.selection.empty()}:window.getSelection?function(){var a=window.getSelection();a&&(a.empty?a.empty():a.removeAllRanges&&a.removeAllRanges())}:function(){}}(),ji;(function(o){function a(n){return 180*n/Math.PI%360}o.toDeg=a,o.toRad=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=e?n:n%360;return t*Math.PI/180};function r(n){return n%360+(n<0?360:0)}o.normalize=r})(ji||(ji={}));function Sv(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Number.isInteger(o)?o:+o.toFixed(a)}function HT(o,a){var r,n;if(a==null?(n=o==null?1:o,r=0):(n=a,r=o==null?0:o),n<r){var e=r;r=n,n=e}return Math.floor(Math.random()*(n-r+1)+r)}function Xg(o,a,r){return Number.isNaN(o)?NaN:Number.isNaN(a)||Number.isNaN(r)?0:a<r?o<a?a:o>r?r:o:o<r?r:o>a?a:o}function FO(o,a){return a*Math.round(o/a)}function WT(o,a){return a!=null&&o!=null&&a.x>=o.x&&a.x<=o.x+o.width&&a.y>=o.y&&a.y<=o.y+o.height}function $T(o,a){var r=o.x-a.x,n=o.y-a.y;return r*r+n*n}var uh=function(){function o(){Object(Ie.a)(this,o)}return Object(pe.a)(o,[{key:"valueOf",value:function(){return this.toJSON()}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),o}(),gt=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(e,t){var i;return Object(Ie.a)(this,n),i=r.call(this),i.x=e==null?0:e,i.y=t==null?0:t,i}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"round",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Sv(this.x,t),this.y=Sv(this.y,t),this}},{key:"add",value:function(t,i){var s=n.create(t,i);return this.x+=s.x,this.y+=s.y,this}},{key:"update",value:function(t,i){var s=n.create(t,i);return this.x=s.x,this.y=s.y,this}},{key:"translate",value:function(t,i){var s=n.create(t,i);return this.x+=s.x,this.y+=s.y,this}},{key:"rotate",value:function(t,i){var s=n.rotate(this,t,i);return this.x=s.x,this.y=s.y,this}},{key:"scale",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new n,u=n.create(s);return this.x=u.x+t*(this.x-u.x),this.y=u.y+i*(this.y-u.y),this}},{key:"closest",value:function(t){var i=this;if(t.length===1)return n.create(t[0]);var s=null,u=Infinity;return t.forEach(function(l){var c=i.squaredDistance(l);c<u&&(s=l,u=c)}),s?n.create(s):null}},{key:"distance",value:function(t){return Math.sqrt(this.squaredDistance(t))}},{key:"squaredDistance",value:function(t){var i=n.create(t),s=this.x-i.x,u=this.y-i.y;return s*s+u*u}},{key:"manhattanDistance",value:function(t){var i=n.create(t);return Math.abs(i.x-this.x)+Math.abs(i.y-this.y)}},{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}},{key:"theta",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n,i=n.create(t),s=-(i.y-this.y),u=i.x-this.x,l=Math.atan2(s,u);return l<0&&(l=2*Math.PI+l),180*l/Math.PI}},{key:"angleBetween",value:function(t,i){if(this.equals(t)||this.equals(i))return NaN;var s=this.theta(i)-this.theta(t);return s<0&&(s+=360),s}},{key:"vectorAngle",value:function(t){var i=new n(0,0);return i.angleBetween(this,t)}},{key:"toPolar",value:function(t){return this.update(n.toPolar(this,t)),this}},{key:"changeInAngle",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new n;return this.clone().translate(-t,-i).theta(s)-this.theta(s)}},{key:"adhereToRect",value:function(t){return WT(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this}},{key:"bearing",value:function(t){var i=n.create(t),s=ji.toRad(this.y),u=ji.toRad(i.y),l=this.x,c=i.x,f=ji.toRad(c-l),d=Math.sin(f)*Math.cos(u),h=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(f),p=ji.toDeg(Math.atan2(d,h)),m=["NE","E","SE","S","SW","W","NW","N"],b=p-22.5;return b<0&&(b+=360),b=parseInt(b/45,10),m[b]}},{key:"cross",value:function(t,i){if(t!=null&&i!=null){var s=n.create(t),u=n.create(i);return(u.x-this.x)*(s.y-this.y)-(u.y-this.y)*(s.x-this.x)}return NaN}},{key:"dot",value:function(t){var i=n.create(t);return this.x*i.x+this.y*i.y}},{key:"diff",value:function(t,i){if(typeof t=="number")return new n(this.x-t,this.y-i);var s=n.create(t);return new n(this.x-s.x,this.y-s.y)}},{key:"lerp",value:function(t,i){var s=n.create(t);return new n((1-i)*this.x+i*s.x,(1-i)*this.y+i*s.y)}},{key:"normalize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,i=t/this.magnitude();return this.scale(i,i)}},{key:"move",value:function(t,i){var s=n.create(t),u=ji.toRad(s.theta(this));return this.translate(Math.cos(u)*i,-Math.sin(u)*i)}},{key:"reflection",value:function(t){return n.create(t).move(this,this.distance(t))}},{key:"snapToGrid",value:function(t,i){return this.x=FO(this.x,t),this.y=FO(this.y,i==null?t:i),this}},{key:"equals",value:function(t){var i=n.create(t);return i!=null&&i.x===this.x&&i.y===this.y}},{key:"clone",value:function(){return n.clone(this)}},{key:"toJSON",value:function(){return n.toJSON(this)}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y)}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.toPolar=="function"}o.isPoint=a})(gt||(gt={})),function(o){function a(n){return n!=null&&typeof n=="object"&&typeof n.x=="number"&&typeof n.y=="number"}o.isPointLike=a;function r(n){return n!=null&&Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"}o.isPointData=r}(gt||(gt={})),function(o){function a(f,d){return f==null||typeof f=="number"?new o(f,d):r(f)}o.create=a;function r(f){return o.isPoint(f)?new o(f.x,f.y):Array.isArray(f)?new o(f[0],f[1]):new o(f.x,f.y)}o.clone=r;function n(f){return o.isPoint(f)?{x:f.x,y:f.y}:Array.isArray(f)?{x:f[0],y:f[1]}:{x:f.x,y:f.y}}o.toJSON=n;function e(f,d){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new o,p=Math.abs(f*Math.cos(d)),m=Math.abs(f*Math.sin(d)),b=r(h),E=ji.normalize(ji.toDeg(d));return E<90?m=-m:E<180?(p=-p,m=-m):E<270&&(p=-p),new o(b.x+p,b.y+m)}o.fromPolar=e;function t(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new o,h=r(f),p=r(d),m=h.x-p.x,b=h.y-p.y;return new o(Math.sqrt(m*m+b*b),ji.toRad(p.theta(h)))}o.toPolar=t;function i(f,d){return f===d?!0:f!=null&&d!=null?f.x===d.x&&f.y===d.y:!1}o.equals=i;function s(f,d){if(f==null&&d!=null||f!=null&&d==null||f!=null&&d!=null&&f.length!==d.length)return!1;if(f!=null&&d!=null){for(var h=0,p=f.length;h<p;h+=1)if(!i(f[h],d[h]))return!1}return!0}o.equalPoints=s;function u(f,d,h,p){return new o(HT(f,d),HT(h,p))}o.random=u;function l(f,d,h){var p=ji.toRad(ji.normalize(-d)),m=Math.sin(p),b=Math.cos(p);return c(f,b,m,h)}o.rotate=l;function c(f,d,h){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new o,m=r(f),b=r(p),E=m.x-b.x,x=m.y-b.y,O=E*d-x*h,D=x*d+E*h;return new o(O+b.x,D+b.y)}o.rotateEx=c}(gt||(gt={}));var fr=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(e,t,i,s){var u;return Object(Ie.a)(this,n),u=r.call(this),u.x=e==null?0:e,u.y=t==null?0:t,u.width=i==null?0:i,u.height=s==null?0:s,u}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}},{key:"origin",get:function(){return new gt(this.x,this.y)}},{key:"topLeft",get:function(){return new gt(this.x,this.y)}},{key:"topCenter",get:function(){return new gt(this.x+this.width/2,this.y)}},{key:"topRight",get:function(){return new gt(this.x+this.width,this.y)}},{key:"center",get:function(){return new gt(this.x+this.width/2,this.y+this.height/2)}},{key:"bottomLeft",get:function(){return new gt(this.x,this.y+this.height)}},{key:"bottomCenter",get:function(){return new gt(this.x+this.width/2,this.y+this.height)}},{key:"bottomRight",get:function(){return new gt(this.x+this.width,this.y+this.height)}},{key:"corner",get:function(){return new gt(this.x+this.width,this.y+this.height)}},{key:"rightMiddle",get:function(){return new gt(this.x+this.width,this.y+this.height/2)}},{key:"leftMiddle",get:function(){return new gt(this.x,this.y+this.height/2)}},{key:"topLine",get:function(){return new Ur(this.topLeft,this.topRight)}},{key:"rightLine",get:function(){return new Ur(this.topRight,this.bottomRight)}},{key:"bottomLine",get:function(){return new Ur(this.bottomLeft,this.bottomRight)}},{key:"leftLine",get:function(){return new Ur(this.topLeft,this.bottomLeft)}},{key:"getOrigin",value:function(){return this.origin}},{key:"getTopLeft",value:function(){return this.topLeft}},{key:"getTopCenter",value:function(){return this.topCenter}},{key:"getTopRight",value:function(){return this.topRight}},{key:"getCenter",value:function(){return this.center}},{key:"getCenterX",value:function(){return this.x+this.width/2}},{key:"getCenterY",value:function(){return this.y+this.height/2}},{key:"getBottomLeft",value:function(){return this.bottomLeft}},{key:"getBottomCenter",value:function(){return this.bottomCenter}},{key:"getBottomRight",value:function(){return this.bottomRight}},{key:"getCorner",value:function(){return this.corner}},{key:"getRightMiddle",value:function(){return this.rightMiddle}},{key:"getLeftMiddle",value:function(){return this.leftMiddle}},{key:"getTopLine",value:function(){return this.topLine}},{key:"getRightLine",value:function(){return this.rightLine}},{key:"getBottomLine",value:function(){return this.bottomLine}},{key:"getLeftLine",value:function(){return this.leftLine}},{key:"bbox",value:function(t){if(!t)return this.clone();var i=ji.toRad(t),s=Math.abs(Math.sin(i)),u=Math.abs(Math.cos(i)),l=this.width*u+this.height*s,c=this.width*s+this.height*u;return new n(this.x+(this.width-l)/2,this.y+(this.height-c)/2,l,c)}},{key:"round",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Sv(this.x,t),this.y=Sv(this.y,t),this.width=Sv(this.width,t),this.height=Sv(this.height,t),this}},{key:"add",value:function(t,i,s,u){var l=n.create(t,i,s,u),c=Math.min(this.x,l.x),f=Math.min(this.y,l.y),d=Math.max(this.x+this.width,l.x+l.width),h=Math.max(this.y+this.height,l.y+l.height);return this.x=c,this.y=f,this.width=d-c,this.height=h-f,this}},{key:"update",value:function(t,i,s,u){var l=n.create(t,i,s,u);return this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height,this}},{key:"inflate",value:function(t,i){var s=t,u=i!=null?i:t;return this.x-=s,this.y-=u,this.width+=2*s,this.height+=2*u,this}},{key:"snapToGrid",value:function(t,i){var s=this.origin.snapToGrid(t,i),u=this.corner.snapToGrid(t,i);return this.x=s.x,this.y=s.y,this.width=u.x-s.x,this.height=u.y-s.y,this}},{key:"translate",value:function(t,i){var s=gt.create(t,i);return this.x+=s.x,this.y+=s.y,this}},{key:"scale",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new gt,u=this.origin.scale(t,i,s);return this.x=u.x,this.y=u.y,this.width*=t,this.height*=i,this}},{key:"rotate",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCenter();if(t!==0){var s=ji.toRad(t),u=Math.cos(s),l=Math.sin(s),c=this.getOrigin(),f=this.getTopRight(),d=this.getBottomRight(),h=this.getBottomLeft();c=gt.rotateEx(c,u,l,i),f=gt.rotateEx(f,u,l,i),d=gt.rotateEx(d,u,l,i),h=gt.rotateEx(h,u,l,i);var p=new n(c.x,c.y,0,0);p.add(f.x,f.y,0,0),p.add(d.x,d.y,0,0),p.add(h.x,h.y,0,0),this.update(p)}return this}},{key:"rotate90",value:function(){var t=(this.width-this.height)/2;this.x+=t,this.y-=t;var i=this.width;return this.width=this.height,this.height=i,this}},{key:"moveAndExpand",value:function(t){var i=n.clone(t);return this.x+=i.x||0,this.y+=i.y||0,this.width+=i.width||0,this.height+=i.height||0,this}},{key:"getMaxScaleToFit",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,s=n.clone(t),u=i.x,l=i.y,c=Infinity,f=Infinity,d=Infinity,h=Infinity,p=Infinity,m=Infinity,b=Infinity,E=Infinity,x=s.topLeft;x.x<u&&(c=(this.x-u)/(x.x-u)),x.y<l&&(p=(this.y-l)/(x.y-l));var O=s.bottomRight;O.x>u&&(f=(this.x+this.width-u)/(O.x-u)),O.y>l&&(m=(this.y+this.height-l)/(O.y-l));var D=s.topRight;D.x>u&&(d=(this.x+this.width-u)/(D.x-u)),D.y<l&&(b=(this.y-l)/(D.y-l));var I=s.bottomLeft;return I.x<u&&(h=(this.x-u)/(I.x-u)),I.y>l&&(E=(this.y+this.height-l)/(I.y-l)),{sx:Math.min(c,f,d,h),sy:Math.min(p,m,b,E)}}},{key:"getMaxUniformScaleToFit",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,s=this.getMaxScaleToFit(t,i);return Math.min(s.sx,s.sy)}},{key:"containsPoint",value:function(t,i){return WT(this,gt.create(t,i))}},{key:"containsRect",value:function(t,i,s,u){var l=n.create(t,i,s,u),c=this.x,f=this.y,d=this.width,h=this.height,p=l.x,m=l.y,b=l.width,E=l.height;return d===0||h===0||b===0||E===0?!1:p>=c&&m>=f&&p+b<=c+d&&m+E<=f+h}},{key:"intersectsWithLine",value:function(t){var i=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],s=[],u=[];return i.forEach(function(l){var c=t.intersectsWithLine(l);c!==null&&u.indexOf(c.toString())<0&&(s.push(c),u.push(c.toString()))}),s.length>0?s:null}},{key:"intersectsWithLineFromCenterToPoint",value:function(t,i){var s=gt.clone(t),u=this.center,l=null;i!=null&&i!==0&&s.rotate(i,u);for(var c=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],f=new Ur(u,s),d=c.length-1;d>=0;d-=1){var h=c[d].intersectsWithLine(f);if(h!==null){l=h;break}}return l&&i!=null&&i!==0&&l.rotate(-i,u),l}},{key:"intersectsWithRect",value:function(t,i,s,u){var l=n.create(t,i,s,u);if(!this.isIntersectWithRect(l))return null;var c=this.origin,f=this.corner,d=l.origin,h=l.corner,p=Math.max(c.x,d.x),m=Math.max(c.y,d.y);return new n(p,m,Math.min(f.x,h.x)-p,Math.min(f.y,h.y)-m)}},{key:"isIntersectWithRect",value:function(t,i,s,u){var l=n.create(t,i,s,u),c=this.origin,f=this.corner,d=l.origin,h=l.corner;return!(h.x<=c.x||h.y<=c.y||d.x>=f.x||d.y>=f.y)}},{key:"normalize",value:function(){var t=this.x,i=this.y,s=this.width,u=this.height;return this.width<0&&(t=this.x+this.width,s=-this.width),this.height<0&&(i=this.y+this.height,u=-this.height),this.x=t,this.y=i,this.width=s,this.height=u,this}},{key:"union",value:function(t){var i=n.clone(t),s=this.origin,u=this.corner,l=i.origin,c=i.corner,f=Math.min(s.x,l.x),d=Math.min(s.y,l.y),h=Math.max(u.x,c.x),p=Math.max(u.y,c.y);return new n(f,d,h-f,p-d)}},{key:"getNearestSideToPoint",value:function(t){var i=gt.clone(t),s=i.x-this.x,u=this.x+this.width-i.x,l=i.y-this.y,c=this.y+this.height-i.y,f=s,d="left";return u<f&&(f=u,d="right"),l<f&&(f=l,d="top"),c<f&&(d="bottom"),d}},{key:"getNearestPointToPoint",value:function(t){var i=gt.clone(t);if(this.containsPoint(i)){var s=this.getNearestSideToPoint(i);switch(s){case"right":return new gt(this.x+this.width,i.y);case"left":return new gt(this.x,i.y);case"bottom":return new gt(i.x,this.y+this.height);case"top":return new gt(i.x,this.y);default:break}}return i.adhereToRect(this)}},{key:"equals",value:function(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}},{key:"clone",value:function(){return new n(this.x,this.y,this.width,this.height)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.width," ").concat(this.height)}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.width=="number"&&typeof e.height=="number"&&typeof e.inflate=="function"&&typeof e.moveAndExpand=="function"}o.isRectangle=a})(fr||(fr={})),function(o){function a(r){return r!=null&&typeof r=="object"&&typeof r.x=="number"&&typeof r.y=="number"&&typeof r.width=="number"&&typeof r.height=="number"}o.isRectangleLike=a}(fr||(fr={})),function(o){function a(i,s,u,l){return i==null||typeof i=="number"?new o(i,s,u,l):r(i)}o.create=a;function r(i){return o.isRectangle(i)?i.clone():Array.isArray(i)?new o(i[0],i[1],i[2],i[3]):new o(i.x,i.y,i.width,i.height)}o.clone=r;function n(i){return new o(0,0,i.width,i.height)}o.fromSize=n;function e(i,s){return new o(i.x,i.y,s.width,s.height)}o.fromPositionAndSize=e;function t(i){return new o(i.x-i.a,i.y-i.b,2*i.a,2*i.b)}o.fromEllipse=t}(fr||(fr={}));var Ur=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(e,t,i,s){var u;return Object(Ie.a)(this,n),u=r.call(this),typeof e=="number"&&typeof t=="number"?(u.start=new gt(e,t),u.end=new gt(i,s)):(u.start=gt.create(e),u.end=gt.create(t)),u}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"center",get:function(){return new gt((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}},{key:"getCenter",value:function(){return this.center}},{key:"round",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.start.round(t),this.end.round(t),this}},{key:"translate",value:function(t,i){return typeof t=="number"?(this.start.translate(t,i),this.end.translate(t,i)):(this.start.translate(t),this.end.translate(t)),this}},{key:"rotate",value:function(t,i){return this.start.rotate(t,i),this.end.rotate(t,i),this}},{key:"scale",value:function(t,i,s){return this.start.scale(t,i,s),this.end.scale(t,i,s),this}},{key:"length",value:function(){return Math.sqrt(this.squaredLength())}},{key:"squaredLength",value:function(){var t=this.start.x-this.end.x,i=this.start.y-this.end.y;return t*t+i*i}},{key:"setLength",value:function(t){var i=this.length();if(!i)return this;var s=t/i;return this.scale(s,s,this.start)}},{key:"parallel",value:function(t){var i=this.clone();if(!i.isDifferentiable())return i;var s=i.start,u=i.end,l=s.clone().rotate(270,u),c=u.clone().rotate(90,s);return s.move(c,t),u.move(l,t),i}},{key:"vector",value:function(){return new gt(this.end.x-this.start.x,this.end.y-this.start.y)}},{key:"angle",value:function(){var t=new gt(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}},{key:"bbox",value:function(){var t=Math.min(this.start.x,this.end.x),i=Math.min(this.start.y,this.end.y),s=Math.max(this.start.x,this.end.x),u=Math.max(this.start.y,this.end.y);return new fr(t,i,s-t,u-i)}},{key:"bearing",value:function(){return this.start.bearing(this.end)}},{key:"closestPoint",value:function(t){return this.pointAt(this.closestPointNormalizedLength(t))}},{key:"closestPointLength",value:function(t){return this.closestPointNormalizedLength(t)*this.length()}},{key:"closestPointTangent",value:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))}},{key:"closestPointNormalizedLength",value:function(t){var i=this.vector().dot(new n(this.start,t).vector()),s=Math.min(1,Math.max(0,i/this.squaredLength()));return Number.isNaN(s)?0:s}},{key:"pointAt",value:function(t){var i=this.start,s=this.end;return t<=0?i.clone():t>=1?s.clone():i.lerp(s,t)}},{key:"pointAtLength",value:function(t){var i=this.start,s=this.end,u=!0;t<0&&(u=!1,t=-t);var l=this.length();if(t>=l)return u?s.clone():i.clone();var c=(u?t:l-t)/l;return this.pointAt(c)}},{key:"divideAt",value:function(t){var i=this.pointAt(t);return[new n(this.start,i),new n(i,this.end)]}},{key:"divideAtLength",value:function(t){var i=this.pointAtLength(t);return[new n(this.start,i),new n(i,this.end)]}},{key:"containsPoint",value:function(t){var i=this.start,s=this.end;if(i.cross(t,s)!==0)return!1;var u=this.length();return!(new n(i,t).length()>u||new n(t,s).length()>u)}},{key:"intersect",value:function(t,i){var s=t.intersectsWithLine(this,i);return s?Array.isArray(s)?s:[s]:null}},{key:"intersectsWithLine",value:function(t){var i=new gt(this.end.x-this.start.x,this.end.y-this.start.y),s=new gt(t.end.x-t.start.x,t.end.y-t.start.y),u=i.x*s.y-i.y*s.x,l=new gt(t.start.x-this.start.x,t.start.y-this.start.y),c=l.x*s.y-l.y*s.x,f=l.x*i.y-l.y*i.x;if(u===0||c*u<0||f*u<0)return null;if(u>0){if(c>u||f>u)return null}else if(c<u||f<u)return null;return new gt(this.start.x+c*i.x/u,this.start.y+c*i.y/u)}},{key:"isDifferentiable",value:function(){return!this.start.equals(this.end)}},{key:"pointOffset",value:function(t){var i=gt.clone(t),s=this.start,u=this.end,l=(u.x-s.x)*(i.y-s.y)-(u.y-s.y)*(i.x-s.x);return l/this.length()}},{key:"pointSquaredDistance",value:function(t,i){var s=gt.create(t,i);return this.closestPoint(s).squaredDistance(s)}},{key:"pointDistance",value:function(t,i){var s=gt.create(t,i);return this.closestPoint(s).distance(s)}},{key:"tangentAt",value:function(t){if(!this.isDifferentiable())return null;var i=this.start,s=this.end,u=this.pointAt(t),l=new n(i,s);return l.translate(u.x-i.x,u.y-i.y),l}},{key:"tangentAtLength",value:function(t){if(!this.isDifferentiable())return null;var i=this.start,s=this.end,u=this.pointAtLength(t),l=new n(i,s);return l.translate(u.x-i.x,u.y-i.y),l}},{key:"relativeCcw",value:function(t,i){var s=gt.create(t,i),u=s.x-this.start.x,l=s.y-this.start.y,c=this.end.x-this.start.x,f=this.end.y-this.start.y,d=u*f-l*c;return d===0&&(d=u*c+l*f,d>0&&(u-=c,l-=f,d=u*c+l*f,d<0&&(d=0))),d<0?-1:d>0?1:0}},{key:"equals",value:function(t){return t!=null&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}},{key:"clone",value:function(){return new n(this.start,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.end.serialize()].join(" ")}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;try{if((n==null||n===o.toStringTag)&&gt.isPoint(e.start)&&gt.isPoint(e.end)&&typeof e.vector=="function"&&typeof e.bearing=="function"&&typeof e.parallel=="function"&&typeof e.intersect=="function")return!0}catch(t){return!1}return!1}o.isLine=a})(Ur||(Ur={}));var lh=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(e,t,i,s){var u;return Object(Ie.a)(this,n),u=r.call(this),u.x=e==null?0:e,u.y=t==null?0:t,u.a=i==null?0:i,u.b=s==null?0:s,u}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"center",get:function(){return new gt(this.x,this.y)}},{key:"bbox",value:function(){return fr.fromEllipse(this)}},{key:"getCenter",value:function(){return this.center}},{key:"inflate",value:function(t,i){var s=t,u=i!=null?i:t;return this.a+=2*s,this.b+=2*u,this}},{key:"normalizedDistance",value:function(t,i){var s=gt.create(t,i),u=s.x-this.x,l=s.y-this.y,c=this.a,f=this.b;return u*u/(c*c)+l*l/(f*f)}},{key:"containsPoint",value:function(t,i){return this.normalizedDistance(t,i)<=1}},{key:"intersectsWithLine",value:function(t){var i=[],s=this.a,u=this.b,l=t.start,c=t.end,f=t.vector(),d=l.diff(new gt(this.x,this.y)),h=new gt(f.x/(s*s),f.y/(u*u)),p=new gt(d.x/(s*s),d.y/(u*u)),m=f.dot(h),b=f.dot(p),E=d.dot(p)-1,x=b*b-m*E;if(x<0)return null;if(x>0){var O=Math.sqrt(x),D=(-b-O)/m,I=(-b+O)/m;if((D<0||D>1)&&(I<0||I>1))return null;D>=0&&D<=1&&i.push(l.lerp(c,D)),I>=0&&I<=1&&i.push(l.lerp(c,I))}else{var F=-b/m;if(F>=0&&F<=1)i.push(l.lerp(c,F));else return null}return i}},{key:"intersectsWithLineFromCenterToPoint",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=gt.clone(t);i&&s.rotate(i,this.getCenter());var u=s.x-this.x,l=s.y-this.y,c;if(u===0)return c=this.bbox().getNearestPointToPoint(s),i?c.rotate(-i,this.getCenter()):c;var f=l/u,d=f*f,h=this.a*this.a,p=this.b*this.b,m=Math.sqrt(1/(1/h+d/p));m=u<0?-m:m;var b=f*m;return c=new gt(this.x+m,this.y+b),i?c.rotate(-i,this.getCenter()):c}},{key:"tangentTheta",value:function(t){var i=gt.clone(t),s=i.x,u=i.y,l=this.a,c=this.b,f=this.bbox().center,d=f.x,h=f.y,p=30,m=s>f.x+l/2,b=s<f.x-l/2,E,x;return m||b?(x=s>f.x?u-p:u+p,E=l*l/(s-d)-l*l*(u-h)*(x-h)/(c*c*(s-d))+d):(E=u>f.y?s+p:s-p,x=c*c/(u-h)-c*c*(s-d)*(E-d)/(l*l*(u-h))+h),new gt(E,x).theta(i)}},{key:"scale",value:function(t,i){return this.a*=t,this.b*=i,this}},{key:"rotate",value:function(t,i){var s=fr.fromEllipse(this);s.rotate(t,i);var u=n.fromRect(s);return this.a=u.a,this.b=u.b,this.x=u.x,this.y=u.y,this}},{key:"translate",value:function(t,i){var s=gt.create(t,i);return this.x+=s.x,this.y+=s.y,this}},{key:"equals",value:function(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}},{key:"clone",value:function(){return new n(this.x,this.y,this.a,this.b)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,a:this.a,b:this.b}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.a," ").concat(this.b)}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.a=="number"&&typeof e.b=="number"&&typeof e.inflate=="function"&&typeof e.normalizedDistance=="function"}o.isEllipse=a})(lh||(lh={})),function(o){function a(e,t,i,s){return e==null||typeof e=="number"?new o(e,t,i,s):r(e)}o.create=a;function r(e){return o.isEllipse(e)?e.clone():Array.isArray(e)?new o(e[0],e[1],e[2],e[3]):new o(e.x,e.y,e.a,e.b)}o.parse=r;function n(e){var t=e.center;return new o(t.x,t.y,e.width/2,e.height/2)}o.fromRect=n}(lh||(lh={}));var BO=v("Nsem"),Js=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(e){var t;if(Object(Ie.a)(this,n),t=r.call(this),e!=null){if(typeof e=="string")return Object(BO.a)(t,n.parse(e));t.points=e.map(function(i){return gt.create(i)})}else t.points=[];return t}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"start",get:function(){return this.points.length===0?null:this.points[0]}},{key:"end",get:function(){return this.points.length===0?null:this.points[this.points.length-1]}},{key:"scale",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new gt;return this.points.forEach(function(u){return u.scale(t,i,s)}),this}},{key:"rotate",value:function(t,i){return this.points.forEach(function(s){return s.rotate(t,i)}),this}},{key:"translate",value:function(t,i){var s=gt.create(t,i);return this.points.forEach(function(u){return u.translate(s.x,s.y)}),this}},{key:"bbox",value:function(){if(this.points.length===0)return new fr;for(var t=Infinity,i=-Infinity,s=Infinity,u=-Infinity,l=this.points,c=0,f=l.length;c<f;c+=1){var d=l[c],h=d.x,p=d.y;h<t&&(t=h),h>i&&(i=h),p<s&&(s=p),p>u&&(u=p)}return new fr(t,s,i-t,u-s)}},{key:"closestPoint",value:function(t){var i=this.closestPointLength(t);return this.pointAtLength(i)}},{key:"closestPointLength",value:function(t){var i=this.points,s=i.length;if(s===0||s===1)return 0;for(var u=0,l=0,c=Infinity,f=0,d=s-1;f<d;f+=1){var h=new Ur(i[f],i[f+1]),p=h.length(),m=h.closestPointNormalizedLength(t),b=h.pointAt(m),E=b.squaredDistance(t);E<c&&(c=E,l=u+m*p),u+=p}return l}},{key:"closestPointNormalizedLength",value:function(t){var i=this.closestPointLength(t);if(i===0)return 0;var s=this.length();return s===0?0:i/s}},{key:"closestPointTangent",value:function(t){var i=this.closestPointLength(t);return this.tangentAtLength(i)}},{key:"containsPoint",value:function(t){if(this.points.length===0)return!1;for(var i=gt.clone(t),s=i.x,u=i.y,l=this.points,c=l.length,f=c-1,d=0,h=0;h<c;h+=1){var p=l[f],m=l[h];if(i.equals(p))return!0;var b=new Ur(p,m);if(b.containsPoint(t))return!0;if(u<=p.y&&u>m.y||u>p.y&&u<=m.y){var E=p.x-s>m.x-s?p.x-s:m.x-s;if(E>=0){var x=new gt(s+E,u),O=new Ur(t,x);b.intersectsWithLine(O)&&(d+=1)}}f=h}return d%2==1}},{key:"intersectsWithLine",value:function(t){for(var i=[],s=0,u=this.points.length-1;s<u;s+=1){var l=this.points[s],c=this.points[s+1],f=t.intersectsWithLine(new Ur(l,c));f&&i.push(f)}return i.length>0?i:null}},{key:"isDifferentiable",value:function(){for(var t=0,i=this.points.length-1;t<i;t+=1){var s=this.points[t],u=this.points[t+1],l=new Ur(s,u);if(l.isDifferentiable())return!0}return!1}},{key:"length",value:function(){for(var t=0,i=0,s=this.points.length-1;i<s;i+=1){var u=this.points[i],l=this.points[i+1];t+=u.distance(l)}return t}},{key:"pointAt",value:function(t){var i=this.points,s=i.length;if(s===0)return null;if(s===1||t<=0)return i[0].clone();if(t>=1)return i[s-1].clone();var u=this.length(),l=u*t;return this.pointAtLength(l)}},{key:"pointAtLength",value:function(t){var i=this.points,s=i.length;if(s===0)return null;if(s===1)return i[0].clone();var u=!0;t<0&&(u=!1,t=-t);for(var l=0,c=0,f=s-1;c<f;c+=1){var d=u?c:f-1-c,h=i[d],p=i[d+1],m=new Ur(h,p),b=h.distance(p);if(t<=l+b)return m.pointAtLength((u?1:-1)*(t-l));l+=b}var E=u?i[s-1]:i[0];return E.clone()}},{key:"tangentAt",value:function(t){var i=this.points,s=i.length;if(s===0||s===1)return null;t<0&&(t=0),t>1&&(t=1);var u=this.length(),l=u*t;return this.tangentAtLength(l)}},{key:"tangentAtLength",value:function(t){var i=this.points,s=i.length;if(s===0||s===1)return null;var u=!0;t<0&&(u=!1,t=-t);for(var l,c=0,f=0,d=s-1;f<d;f+=1){var h=u?f:d-1-f,p=i[h],m=i[h+1],b=new Ur(p,m),E=p.distance(m);if(b.isDifferentiable()){if(t<=c+E)return b.tangentAtLength((u?1:-1)*(t-c));l=b}c+=E}if(l){var x=u?1:0;return l.tangentAt(x)}return null}},{key:"simplify",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.points;if(i.length<3)return this;for(var s=t.threshold||0,u=0;i[u+2];){var l=u,c=u+1,f=u+2,d=i[l],h=i[c],p=i[f],m=new Ur(d,p),b=m.closestPoint(h),E=b.distance(h);E<=s?i.splice(c,1):u+=1}return this}},{key:"toHull",value:function(){var t=this.points,i=t.length;if(i===0)return new n;for(var s=t[0],u=1;u<i;u+=1)(t[u].y<s.y||t[u].y===s.y&&t[u].x>s.x)&&(s=t[u]);for(var l=[],c=0;c<i;c+=1){var f=s.theta(t[c]);f===0&&(f=360),l.push([t[c],c,f])}if(l.sort(function(en,Vn){var jt=en[2]-Vn[2];return jt===0&&(jt=Vn[1]-en[1]),jt}),l.length>2){var d=l[l.length-1];l.unshift(d)}for(var h={},p=[],m=function(Vn){return"".concat(Vn[0].toString(),"@").concat(Vn[1])};l.length!==0;){var b=l.pop(),E=b[0];if(!h[m(b)])for(var x=!1;!x;)if(p.length<2)p.push(b),x=!0;else{var O=p.pop(),D=O[0],I=p.pop(),F=I[0],H=F.cross(D,E);if(H<0)p.push(I),p.push(O),p.push(b),x=!0;else if(H===0){var $=1e-10,se=D.angleBetween(F,E);Math.abs(se-180)<$||D.equals(E)||F.equals(D)?(h[m(O)]=D,p.push(I)):Math.abs((se+1)%360-1)<$&&(p.push(I),l.push(O))}else h[m(O)]=D,p.push(I)}}p.length>2&&p.pop();for(var de,Ee=-1,Oe=0,$e=p.length;Oe<$e;Oe+=1){var tt=p[Oe][1];(de===void 0||tt<de)&&(de=tt,Ee=Oe)}var Le=[];if(Ee>0){var it=p.slice(Ee),It=p.slice(0,Ee);Le=it.concat(It)}else Le=p;for(var tn=[],bn=0,dn=Le.length;bn<dn;bn+=1)tn.push(Le[bn][0]);return new n(tn)}},{key:"equals",value:function(t){var i=this;return t==null||t.points.length!==this.points.length?!1:t.points.every(function(s,u){return s.equals(i.points[u])})}},{key:"clone",value:function(){return new n(this.points.map(function(t){return t.clone()}))}},{key:"toJSON",value:function(){return this.points.map(function(t){return t.toJSON()})}},{key:"serialize",value:function(){return this.points.map(function(t){return"".concat(t.x,", ").concat(t.y)}).join(" ")}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.toHull=="function"&&typeof e.simplify=="function"}o.isPolyline=a})(Js||(Js={})),function(o){function a(r){var n=r.trim();if(n==="")return new o;for(var e=[],t=n.split(/\s*,\s*|\s+/),i=0,s=t.length;i<s;i+=2)e.push({x:+t[i],y:+t[i+1]});return new o(e)}o.parse=a}(Js||(Js={}));var pl=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(e,t,i,s){var u;return Object(Ie.a)(this,n),u=r.call(this),u.PRECISION=3,u.start=gt.create(e),u.controlPoint1=gt.create(t),u.controlPoint2=gt.create(i),u.end=gt.create(s),u}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"bbox",value:function(){for(var t=this.start,i=this.controlPoint1,s=this.controlPoint2,u=this.end,l=t.x,c=t.y,f=i.x,d=i.y,h=s.x,p=s.y,m=u.x,b=u.y,E=[],x=[],O=[[],[]],D,I,F,H,$,se,de,Ee,Oe=0;Oe<2;Oe+=1){if(Oe===0?(I=6*l-12*f+6*h,D=-3*l+9*f-9*h+3*m,F=3*f-3*l):(I=6*c-12*d+6*p,D=-3*c+9*d-9*p+3*b,F=3*d-3*c),Math.abs(D)<1e-12){if(Math.abs(I)<1e-12)continue;H=-F/I,H>0&&H<1&&x.push(H);continue}de=I*I-4*F*D,Ee=Math.sqrt(de),!(de<0)&&($=(-I+Ee)/(2*D),$>0&&$<1&&x.push($),se=(-I-Ee)/(2*D),se>0&&se<1&&x.push(se))}for(var $e,tt,Le,it=x.length,It=it;it;)it-=1,H=x[it],Le=1-H,$e=Le*Le*Le*l+3*Le*Le*H*f+3*Le*H*H*h+H*H*H*m,O[0][it]=$e,tt=Le*Le*Le*c+3*Le*Le*H*d+3*Le*H*H*p+H*H*H*b,O[1][it]=tt,E[it]={X:$e,Y:tt};x[It]=0,x[It+1]=1,E[It]={X:l,Y:c},E[It+1]={X:m,Y:b},O[0][It]=l,O[1][It]=c,O[0][It+1]=m,O[1][It+1]=b,x.length=It+2,O[0].length=It+2,O[1].length=It+2,E.length=It+2;var tn=Math.min.apply(null,O[0]),bn=Math.min.apply(null,O[1]),dn=Math.max.apply(null,O[0]),en=Math.max.apply(null,O[1]);return new fr(tn,bn,dn-tn,en-bn)}},{key:"closestPoint",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.pointAtT(this.closestPointT(t,i))}},{key:"closestPointLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(i);return this.lengthAtT(this.closestPointT(t,s),s)}},{key:"closestPointNormalizedLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(i),u=this.closestPointLength(t,s);if(!u)return 0;var l=this.length(s);return l===0?0:u/l}},{key:"closestPointT",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getPrecision(i),u=this.getDivisions(i),l=Math.pow(10,-s),c=null,f=0,d=0,h=0,p=0,m=0,b=null,E=u.length,x=E>0?1/E:0;for(u.forEach(function(it,It){var tn=it.start.distance(t),bn=it.end.distance(t),dn=tn+bn;(b==null||dn<b)&&(c=it,f=It*x,d=(It+1)*x,h=tn,p=bn,b=dn,m=it.endpointDistance())});;){var O=h?Math.abs(h-p)/h:0,D=p!=null?Math.abs(h-p)/p:0,I=O<l||D<l,F=h?h<m*l:!0,H=p?p<m*l:!0,$=F||H;if(I||$)return h<=p?f:d;var se=c.divide(.5);x/=2;var de=se[0].start.distance(t),Ee=se[0].end.distance(t),Oe=de+Ee,$e=se[1].start.distance(t),tt=se[1].end.distance(t),Le=$e+tt;Oe<=Le?(c=se[0],d-=x,h=de,p=Ee):(c=se[1],f+=x,h=$e,p=tt)}}},{key:"closestPointTangent",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.tangentAtT(this.closestPointT(t,i))}},{key:"containsPoint",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.toPolyline(i);return s.containsPoint(t)}},{key:"divideAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var s=this.tAt(t,i);return this.divideAtT(s)}},{key:"divideAtLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.tAtLength(t,i);return this.divideAtT(s)}},{key:"divide",value:function(t){return this.divideAtT(t)}},{key:"divideAtT",value:function(t){var i=this.start,s=this.controlPoint1,u=this.controlPoint2,l=this.end;if(t<=0)return[new n(i,i,i,i),new n(i,s,u,l)];if(t>=1)return[new n(i,s,u,l),new n(l,l,l,l)];var c=this.getSkeletonPoints(t),f=c.startControlPoint1,d=c.startControlPoint2,h=c.divider,p=c.dividerControlPoint1,m=c.dividerControlPoint2;return[new n(i,f,d,h),new n(h,p,m,l)]}},{key:"endpointDistance",value:function(){return this.start.distance(this.end)}},{key:"getSkeletonPoints",value:function(t){var i=this.start,s=this.controlPoint1,u=this.controlPoint2,l=this.end;if(t<=0)return{startControlPoint1:i.clone(),startControlPoint2:i.clone(),divider:i.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:u.clone()};if(t>=1)return{startControlPoint1:s.clone(),startControlPoint2:u.clone(),divider:l.clone(),dividerControlPoint1:l.clone(),dividerControlPoint2:l.clone()};var c=new Ur(i,s).pointAt(t),f=new Ur(s,u).pointAt(t),d=new Ur(u,l).pointAt(t),h=new Ur(c,f).pointAt(t),p=new Ur(f,d).pointAt(t),m=new Ur(h,p).pointAt(t);return{startControlPoint1:c,startControlPoint2:h,divider:m,dividerControlPoint1:p,dividerControlPoint2:d}}},{key:"getSubdivisions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getPrecision(t),s=[new n(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(i===0)return s;for(var u=this.endpointDistance(),l=Math.pow(10,-i),c=0,f=function(){c+=1;var p=[];s.forEach(function(E){var x=E.divide(.5);p.push(x[0],x[1])});var m=p.reduce(function(E,x){return E+x.endpointDistance()},0),b=m!==0?(m-u)/m:0;if(c>1&&b<l)return{v:p};s=p,u=m};;){var d=f();if(typeof d=="object")return d.v}}},{key:"length",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getDivisions(t);return i.reduce(function(s,u){return s+u.endpointDistance()},0)}},{key:"lengthAtT",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return 0;var s=i.precision===void 0?this.PRECISION:i.precision,u=this.divide(t)[0];return u.length({precision:s})}},{key:"pointAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var s=this.tAt(t,i);return this.pointAtT(s)}},{key:"pointAtLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.tAtLength(t,i);return this.pointAtT(s)}},{key:"pointAtT",value:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}},{key:"isDifferentiable",value:function(){var t=this.start,i=this.controlPoint1,s=this.controlPoint2,u=this.end;return!(t.equals(i)&&i.equals(s)&&s.equals(u))}},{key:"tangentAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var s=this.tAt(t,i);return this.tangentAtT(s)}},{key:"tangentAtLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;var s=this.tAtLength(t,i);return this.tangentAtT(s)}},{key:"tangentAtT",value:function(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);var i=this.getSkeletonPoints(t),s=i.startControlPoint2,u=i.dividerControlPoint1,l=i.divider,c=new Ur(s,u);return c.translate(l.x-s.x,l.y-s.y),c}},{key:"getPrecision",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.precision==null?this.PRECISION:t.precision}},{key:"getDivisions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.subdivisions!=null)return t.subdivisions;var i=this.getPrecision(t);return this.getSubdivisions({precision:i})}},{key:"getOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getPrecision(t),s=this.getDivisions(t);return{precision:i,subdivisions:s}}},{key:"tAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return 0;if(t>=1)return 1;var s=this.getOptions(i),u=this.length(s),l=u*t;return this.tAtLength(l,s)}},{key:"tAtLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(i),l=this.getDivisions(i),c={precision:u,subdivisions:l},f=null,d,h,p=0,m=0,b=0,E=l.length,x=E>0?1/E:0,O=0;O<E;O+=1){var D=s?O:E-1-O,I=l[O],F=I.endpointDistance();if(t<=b+F){f=I,d=D*x,h=(D+1)*x,p=s?t-b:F+b-t,m=s?F+b-t:t-b;break}b+=F}if(f==null)return s?1:0;for(var H=this.length(c),$=Math.pow(10,-u);;){var se=void 0;if(se=H!==0?p/H:0,se<$)return d;if(se=H!==0?m/H:0,se<$)return h;var de=void 0,Ee=void 0,Oe=f.divide(.5);x/=2;var $e=Oe[0].endpointDistance(),tt=Oe[1].endpointDistance();p<=$e?(f=Oe[0],h-=x,de=p,Ee=$e-de):(f=Oe[1],d+=x,de=p-$e,Ee=tt-de),p=de,m=Ee}}},{key:"toPoints",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getDivisions(t),s=[i[0].start.clone()];return i.forEach(function(u){return s.push(u.end.clone())}),s}},{key:"toPolyline",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Js(this.toPoints(t))}},{key:"scale",value:function(t,i,s){return this.start.scale(t,i,s),this.controlPoint1.scale(t,i,s),this.controlPoint2.scale(t,i,s),this.end.scale(t,i,s),this}},{key:"rotate",value:function(t,i){return this.start.rotate(t,i),this.controlPoint1.rotate(t,i),this.controlPoint2.rotate(t,i),this.end.rotate(t,i),this}},{key:"translate",value:function(t,i){return typeof t=="number"?(this.start.translate(t,i),this.controlPoint1.translate(t,i),this.controlPoint2.translate(t,i),this.end.translate(t,i)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}},{key:"equals",value:function(t){return t!=null&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}},{key:"clone",value:function(){return new n(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;try{if((n==null||n===o.toStringTag)&&gt.isPoint(e.start)&&gt.isPoint(e.controlPoint1)&&gt.isPoint(e.controlPoint2)&&gt.isPoint(e.end)&&typeof e.toPoints=="function"&&typeof e.toPolyline=="function")return!0}catch(t){return!1}return!1}o.isCurve=a})(pl||(pl={})),function(o){function a(e){var t=e.length,i=[],s=[],u=2;i[0]=e[0]/u;for(var l=1;l<t;l+=1)s[l]=1/u,u=(l<t-1?4:3.5)-s[l],i[l]=(e[l]-i[l-1])/u;for(var c=1;c<t;c+=1)i[t-c-1]-=s[t-c]*i[t-c];return i}function r(e){var t=e.map(function(m){return gt.clone(m)}),i=[],s=[],u=t.length-1;if(u===1)return i[0]=new gt((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),s[0]=new gt(2*i[0].x-t[0].x,2*i[0].y-t[0].y),[i,s];for(var l=[],c=1;c<u-1;c+=1)l[c]=4*t[c].x+2*t[c+1].x;l[0]=t[0].x+2*t[1].x,l[u-1]=(8*t[u-1].x+t[u].x)/2;for(var f=a(l),d=1;d<u-1;d+=1)l[d]=4*t[d].y+2*t[d+1].y;l[0]=t[0].y+2*t[1].y,l[u-1]=(8*t[u-1].y+t[u].y)/2;for(var h=a(l),p=0;p<u;p+=1)i.push(new gt(f[p],h[p])),p<u-1?s.push(new gt(2*t[p+1].x-f[p+1],2*t[p+1].y-h[p+1])):s.push(new gt((t[u].x+f[u-1])/2,(t[u].y+h[u-1])/2));return[i,s]}function n(e){if(e==null||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var t=r(e),i=[],s=0,u=t[0].length;s<u;s+=1){var l=new gt(t[0][s].x,t[0][s].y),c=new gt(t[1][s].x,t[1][s].y);i.push(new o(e[s],l,c,e[s+1]))}return i}o.throughPoints=n}(pl||(pl={}));var Jb=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.isVisible=!0,n.isSegment=!0,n.isSubpathStart=!1,n}return Object(pe.a)(r,[{key:"end",get:function(){return this.endPoint}},{key:"start",get:function(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}},{key:"closestPointT",value:function(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}},{key:"lengthAtT",value:function(e,t){if(e<=0)return 0;var i=this.length();return e>=1?i:i*e}},{key:"divideAtT",value:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}},{key:"pointAtT",value:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}},{key:"tangentAtT",value:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}]),r}(uh),Af=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n,e){var t;return Object(Ie.a)(this,r),t=a.call(this),Ur.isLine(n)?t.endPoint=n.end.clone().round(2):t.endPoint=gt.create(n,e).round(2),t}return Object(pe.a)(r,[{key:"type",get:function(){return"L"}},{key:"line",get:function(){return new Ur(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[new r(t[0]),new r(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[new r(t[0]),new r(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return this.previousSegment==null?!1:!this.start.equals(this.end)}},{key:"clone",value:function(){return new r(this.end)}},{key:"scale",value:function(e,t,i){return this.end.scale(e,t,i),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}}]),r}(Jb);(function(o){function a(){for(var r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];var t=n.length,i=n[0];if(Ur.isLine(i))return new o(i);if(gt.isPointLike(i))return t===1?new o(i):n.map(function(f){return new o(f)});if(t===2)return new o(+n[0],+n[1]);for(var s=[],u=0;u<t;u+=2){var l=+n[u],c=+n[u+1];s.push(new o(l,c))}return s}o.create=a})(Af||(Af={}));var Qb=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"end",get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}},{key:"type",get:function(){return"Z"}},{key:"line",get:function(){return new Ur(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[t[1].isDifferentiable()?new Af(t[0]):this.clone(),new Af(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new Af(t[0]):this.clone(),new Af(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}},{key:"scale",value:function(){return this}},{key:"rotate",value:function(){return this}},{key:"translate",value:function(){return this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"clone",value:function(){return new r}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return this.type}}]),r}(Jb);(function(o){function a(){return new o}o.create=a})(Qb||(Qb={}));var qb=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n,e){var t;return Object(Ie.a)(this,r),t=a.call(this),t.isVisible=!1,t.isSubpathStart=!0,Ur.isLine(n)||pl.isCurve(n)?t.endPoint=n.end.clone().round(2):t.endPoint=gt.create(n,e).round(2),t}return Object(pe.a)(r,[{key:"start",get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}},{key:"type",get:function(){return"M"}},{key:"bbox",value:function(){return null}},{key:"closestPoint",value:function(){return this.end.clone()}},{key:"closestPointLength",value:function(){return 0}},{key:"closestPointNormalizedLength",value:function(){return 0}},{key:"closestPointT",value:function(){return 1}},{key:"closestPointTangent",value:function(){return null}},{key:"length",value:function(){return 0}},{key:"lengthAtT",value:function(){return 0}},{key:"divideAt",value:function(){return[this.clone(),this.clone()]}},{key:"divideAtLength",value:function(){return[this.clone(),this.clone()]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(){return this.end.clone()}},{key:"pointAtLength",value:function(){return this.end.clone()}},{key:"pointAtT",value:function(){return this.end.clone()}},{key:"tangentAt",value:function(){return null}},{key:"tangentAtLength",value:function(){return null}},{key:"tangentAtT",value:function(){return null}},{key:"isDifferentiable",value:function(){return!1}},{key:"scale",value:function(e,t,i){return this.end.scale(e,t,i),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"clone",value:function(){return new r(this.end)}},{key:"equals",value:function(e){return this.type===e.type&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}}]),r}(Jb);(function(o){function a(){var r=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(Ur.isLine(n))return new o(n);if(pl.isCurve(n))return new o(n);if(gt.isPointLike(n)){if(r===1)return new o(n);for(var e=[],t=0;t<r;t+=1)t===0?e.push(new o(t<0||arguments.length<=t?void 0:arguments[t])):e.push(new Af(t<0||arguments.length<=t?void 0:arguments[t]));return e}if(r===2)return new o(+(arguments.length<=0?void 0:arguments[0]),+(arguments.length<=1?void 0:arguments[1]));for(var i=[],s=0;s<r;s+=2){var u=+(s<0||arguments.length<=s?void 0:arguments[s]),l=+(s+1<0||arguments.length<=s+1?void 0:arguments[s+1]);s===0?i.push(new o(u,l)):i.push(new Af(u,l))}return i}o.create=a})(qb||(qb={}));var e1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n,e,t,i,s,u){var l;return Object(Ie.a)(this,r),l=a.call(this),pl.isCurve(n)?(l.controlPoint1=n.controlPoint1.clone().round(2),l.controlPoint2=n.controlPoint2.clone().round(2),l.endPoint=n.end.clone().round(2)):typeof n=="number"?(l.controlPoint1=new gt(n,e).round(2),l.controlPoint2=new gt(t,i).round(2),l.endPoint=new gt(s,u).round(2)):(l.controlPoint1=gt.create(n).round(2),l.controlPoint2=gt.create(e).round(2),l.endPoint=gt.create(t).round(2)),l}return Object(pe.a)(r,[{key:"type",get:function(){return"C"}},{key:"curve",get:function(){return new pl(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"bbox",value:function(){return this.curve.bbox()}},{key:"closestPoint",value:function(e){return this.curve.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.curve.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.curve.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.curve.closestPointTangent(e)}},{key:"length",value:function(){return this.curve.length()}},{key:"divideAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.curve.divideAt(e,t);return[new r(i[0]),new r(i[1])]}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.curve.divideAtLength(e,t);return[new r(i[0]),new r(i[1])]}},{key:"divideAtT",value:function(e){var t=this.curve.divideAtT(e);return[new r(t[0]),new r(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.curve.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.curve.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.curve.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.curve.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,i=this.controlPoint2,s=this.end;return!(e.equals(t)&&t.equals(i)&&i.equals(s))}},{key:"scale",value:function(e,t,i){return this.controlPoint1.scale(e,t,i),this.controlPoint2.scale(e,t,i),this.end.scale(e,t,i),this}},{key:"rotate",value:function(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}},{key:"equals",value:function(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}},{key:"clone",value:function(){return new r(this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.controlPoint1,t=this.controlPoint2,i=this.end;return[this.type,e.x,e.y,t.x,t.y,i.x,i.y].join(" ")}}]),r}(Jb);(function(o){function a(){var r=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(pl.isCurve(n))return new o(n);if(gt.isPointLike(n)){if(r===3)return new o(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);for(var e=[],t=0;t<r;t+=3)e.push(new o(t<0||arguments.length<=t?void 0:arguments[t],t+1<0||arguments.length<=t+1?void 0:arguments[t+1],t+2<0||arguments.length<=t+2?void 0:arguments[t+2]));return e}if(r===6)return new o(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]);for(var i=[],s=0;s<r;s+=6)i.push(new o(s<0||arguments.length<=s?void 0:arguments[s],s+1<0||arguments.length<=s+1?void 0:arguments[s+1],s+2<0||arguments.length<=s+2?void 0:arguments[s+2],s+3<0||arguments.length<=s+3?void 0:arguments[s+3],s+4<0||arguments.length<=s+4?void 0:arguments[s+4],s+5<0||arguments.length<=s+5?void 0:arguments[s+5]));return i}o.create=a})(e1||(e1={}));function t1(o,a,r){return{x:o*Math.cos(r)-a*Math.sin(r),y:o*Math.sin(r)+a*Math.cos(r)}}function XT(o,a,r,n,e,t){var i=1/3,s=2/3;return[i*o+s*r,i*a+s*n,i*e+s*r,i*t+s*n,e,t]}function KT(o,a,r,n,e,t,i,s,u,l){var c=Math.PI*120/180,f=Math.PI/180*(+e||0),d=[],h,p,m,b,E;if(l)p=l[0],m=l[1],b=l[2],E=l[3];else{h=t1(o,a,-f),o=h.x,a=h.y,h=t1(s,u,-f),s=h.x,u=h.y;var x=(o-s)/2,O=(a-u)/2,D=x*x/(r*r)+O*O/(n*n);D>1&&(D=Math.sqrt(D),r=D*r,n=D*n);var I=r*r,F=n*n,H=(t===i?-1:1)*Math.sqrt(Math.abs((I*F-I*O*O-F*x*x)/(I*O*O+F*x*x)));b=H*r*O/n+(o+s)/2,E=H*-n*x/r+(a+u)/2,p=Math.asin((a-E)/n),m=Math.asin((u-E)/n),p=o<b?Math.PI-p:p,m=s<b?Math.PI-m:m,p<0&&(p=Math.PI*2+p),m<0&&(m=Math.PI*2+m),i&&p>m&&(p-=Math.PI*2),!i&&m>p&&(m-=Math.PI*2)}var $=m-p;if(Math.abs($)>c){var se=m,de=s,Ee=u;m=p+c*(i&&m>p?1:-1),s=b+r*Math.cos(m),u=E+n*Math.sin(m),d=KT(s,u,r,n,e,0,i,de,Ee,[m,se,b,E])}$=m-p;var Oe=Math.cos(p),$e=Math.sin(p),tt=Math.cos(m),Le=Math.sin(m),it=Math.tan($/4),It=4/3*(r*it),tn=4/3*(n*it),bn=[o,a],dn=[o+It*$e,a-tn*Oe],en=[s+It*Le,u-tn*tt],Vn=[s,u];if(dn[0]=2*bn[0]-dn[0],dn[1]=2*bn[1]-dn[1],l)return[dn,en,Vn].concat(d);{d=[dn,en,Vn].concat(d).join().split(",");for(var jt=[],Cn=d.length,jn=0;jn<Cn;jn+=1)jt[jn]=jn%2?t1(+d[jn-1],+d[jn],f).y:t1(+d[jn],+d[jn+1],f).x;return jt}}function sB(o){if(!o)return null;var a=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,r=new RegExp("([a-z])[".concat(a,",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[").concat(a,"]*,?[").concat(a,"]*)+)"),"ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[".concat(a,"]*,?[").concat(a,"]*"),"ig"),e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=[];return o.replace(r,function(i,s,u){var l=[],c=s.toLowerCase();u.replace(n,function(d,h){return h&&l.push(+h),d}),c==="m"&&l.length>2&&(t.push([s].concat(Object(ot.a)(l.splice(0,2)))),c="l",s=s==="m"?"l":"L");for(var f=e[c];l.length>=f&&(t.push([s].concat(Object(ot.a)(l.splice(0,f)))),!!f););return i}),t}function uB(o){var a=sB(o);if(!a||!a.length)return[["M",0,0]];for(var r=0,n=0,e=0,t=0,i=[],s=0,u=a.length;s<u;s+=1){var l=[];i.push(l);var c=a[s],f=c[0];if(f!==f.toUpperCase())switch(l[0]=f.toUpperCase(),l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+c[6]+r,l[7]=+c[7]+n;break;case"V":l[1]=+c[1]+n;break;case"H":l[1]=+c[1]+r;break;case"M":e=+c[1]+r,t=+c[2]+n;for(var d=1,h=c.length;d<h;d+=1)l[d]=+c[d]+(d%2?r:n);break;default:for(var p=1,m=c.length;p<m;p+=1)l[p]=+c[p]+(p%2?r:n);break}else for(var b=0,E=c.length;b<E;b+=1)l[b]=c[b];switch(l[0]){case"Z":r=+e,n=+t;break;case"H":r=l[1];break;case"V":n=l[1];break;case"M":e=l[l.length-2],t=l[l.length-1],r=l[l.length-2],n=l[l.length-1];break;default:r=l[l.length-2],n=l[l.length-1];break}}return i}function lB(o){var a=uB(o),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(d,h,p){var m,b;if(!d)return["C",h.x,h.y,h.x,h.y,h.x,h.y];switch(d[0]in{T:1,Q:1}||(h.qx=null,h.qy=null),d[0]){case"M":h.X=d[1],h.Y=d[2];break;case"A":return parseFloat(d[1])===0||parseFloat(d[2])===0?["L",d[6],d[7]]:["C"].concat(KT.apply(0,[h.x,h.y].concat(d.slice(1))));case"S":return p==="C"||p==="S"?(m=h.x*2-h.bx,b=h.y*2-h.by):(m=h.x,b=h.y),["C",m,b].concat(d.slice(1));case"T":return p==="Q"||p==="T"?(h.qx=h.x*2-h.qx,h.qy=h.y*2-h.qy):(h.qx=h.x,h.qy=h.y),["C"].concat(XT(h.x,h.y,h.qx,h.qy,d[1],d[2]));case"Q":return h.qx=d[1],h.qy=d[2],["C"].concat(XT(h.x,h.y,d[1],d[2],d[3],d[4]));case"H":return["L"].concat(d[1],h.y);case"V":return["L"].concat(h.x,d[1]);case"L":break;case"Z":break;default:break}return d}function e(d,h){if(d[h].length>7){d[h].shift();for(var p=d[h];p.length;)t[h]="A",h+=1,d.splice(h,0,["C"].concat(p.splice(0,6)));d.splice(h,1),s=a.length}}for(var t=[],i="",s=a.length,u=0;u<s;u+=1){var l="";a[u]&&(l=a[u][0]),l!=="C"&&(t[u]=l,u>0&&(i=t[u-1])),a[u]=n(a[u],r,i),t[u]!=="A"&&l==="C"&&(t[u]="C"),e(a,u);var c=a[u],f=c.length;r.x=c[f-2],r.y=c[f-1],r.bx=parseFloat(c[f-4])||r.x,r.by=parseFloat(c[f-3])||r.y}return(!a[0][0]||a[0][0]!=="M")&&a.unshift(["M",0,0]),a}function cB(o){return lB(o).map(function(a){return a.map(function(r){return typeof r=="string"?r:Sv(r,2)})}).join(",").split(",").join(" ")}var fB=new RegExp("^[\\s\\dLMCZz,.]*$");function dB(o){return typeof o!="string"?!1:fB.test(o)}function GO(o,a){return(o%a+a)%a}function hB(o,a,r,n,e){var t=[],i=o[o.length-1],s=a!=null&&a>0,u=a||0;if(n&&s){o=o.slice();var l=o[0],c=new gt(i.x+(l.x-i.x)/2,i.y+(l.y-i.y)/2);o.splice(0,0,c)}var f=o[0],d=1;for(r?t.push("M",f.x,f.y):t.push("L",f.x,f.y);d<(n?o.length:o.length-1);){var h=o[GO(d,o.length)],p=f.x-h.x,m=f.y-h.y;if(s&&(p!==0||m!==0)&&(e==null||e.indexOf(d-1)<0)){var b=Math.sqrt(p*p+m*m),E=p*Math.min(u,b/2)/b,x=m*Math.min(u,b/2)/b,O=h.x+E,D=h.y+x;t.push("L",O,D);for(var I=o[GO(d+1,o.length)];d<o.length-2&&Math.round(I.x-h.x)===0&&Math.round(I.y-h.y)===0;)I=o[GO(d+2,o.length)],d+=1;p=I.x-h.x,m=I.y-h.y,b=Math.max(1,Math.sqrt(p*p+m*m));var F=p*Math.min(u,b/2)/b,H=m*Math.min(u,b/2)/b,$=h.x+F,se=h.y+H;t.push("Q",h.x,h.y,$,se),h=new gt($,se)}else t.push("L",h.x,h.y);f=h,d+=1}return n?t.push("Z"):t.push("L",i.x,i.y),t.map(function(de){return typeof de=="string"?de:+de.toFixed(3)}).join(" ")}function YT(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return o&&o.length&&o.forEach(function(n){Array.isArray(n)?r.push({x:n[0],y:n[1]}):r.push({x:n.x,y:n.y})}),hB(r,a.round,a.initialMove==null||a.initialMove,a.close,a.exclude)}function n1(o,a,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0;if(r===0||n===0)return[];s-=o,u-=a,r=Math.abs(r),n=Math.abs(n);var l=-s/2,c=-u/2,f=Math.cos(e*Math.PI/180),d=Math.sin(e*Math.PI/180),h=f*l+d*c,p=-1*d*l+f*c,m=h*h,b=p*p,E=r*r,x=n*n,O=m/E+b/x,D;if(O>1)r=Math.sqrt(O)*r,n=Math.sqrt(O)*n,D=0;else{var I=1;t===i&&(I=-1),D=I*Math.sqrt((E*x-E*b-x*m)/(E*b+x*m))}var F=D*r*p/n,H=-1*D*n*h/r,$=f*F-d*H+s/2,se=d*F+f*H+u/2,de=Math.atan2((p-H)/n,(h-F)/r)-Math.atan2(0,1),Ee=de>=0?de:2*Math.PI+de;de=Math.atan2((-p-H)/n,(-h-F)/r)-Math.atan2((p-H)/n,(h-F)/r);var Oe=de>=0?de:2*Math.PI+de;i===0&&Oe>0?Oe-=2*Math.PI:i!==0&&Oe<0&&(Oe+=2*Math.PI);for(var $e=Oe*2/Math.PI,tt=Math.ceil($e<0?-1*$e:$e),Le=Oe/tt,it=8/3*Math.sin(Le/4)*Math.sin(Le/4)/Math.sin(Le/2),It=f*r,tn=f*n,bn=d*r,dn=d*n,en=Math.cos(Ee),Vn=Math.sin(Ee),jt=-it*(It*Vn+dn*en),Cn=-it*(bn*Vn-tn*en),jn=0,Lr=0,Pr=[],Wr=0;Wr<tt;Wr+=1){Ee+=Le,en=Math.cos(Ee),Vn=Math.sin(Ee),jn=It*en-dn*Vn+$,Lr=bn*en+tn*Vn+se;var Jr=-it*(It*Vn+dn*en),Ta=-it*(bn*Vn-tn*en),fo=Wr*6;Pr[fo]=Number(jt+o),Pr[fo+1]=Number(Cn+a),Pr[fo+2]=Number(jn-Jr+o),Pr[fo+3]=Number(Lr-Ta+a),Pr[fo+4]=Number(jn+o),Pr[fo+5]=Number(Lr+a),jt=jn+Jr,Cn=Lr+Ta}return Pr.map(function(_i){return+_i.toFixed(2)})}function vB(o,a,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,i=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,l=[],c=n1(o,a,r,n,e,t,i,s,u);if(c!=null)for(var f=0,d=c.length;f<d;f+=6)l.push("C",c[f],c[f+1],c[f+2],c[f+3],c[f+4],c[f+5]);return l.join(" ")}var Si=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(e){var t;if(Object(Ie.a)(this,n),t=r.call(this),t.PRECISION=3,t.segments=[],Array.isArray(e))if(Ur.isLine(e[0])||pl.isCurve(e[0])){var i=null,s=e;s.forEach(function(l,c){c===0&&t.appendSegment(n.createSegment("M",l.start)),i!=null&&!i.end.equals(l.start)&&t.appendSegment(n.createSegment("M",l.start)),Ur.isLine(l)?t.appendSegment(n.createSegment("L",l.end)):pl.isCurve(l)&&t.appendSegment(n.createSegment("C",l.controlPoint1,l.controlPoint2,l.end)),i=l})}else{var u=e;u.forEach(function(l){l.isSegment&&t.appendSegment(l)})}else e!=null&&(Ur.isLine(e)?(t.appendSegment(n.createSegment("M",e.start)),t.appendSegment(n.createSegment("L",e.end))):pl.isCurve(e)?(t.appendSegment(n.createSegment("M",e.start)),t.appendSegment(n.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):Js.isPolyline(e)?e.points&&e.points.length&&e.points.forEach(function(l,c){var f=c===0?n.createSegment("M",l):n.createSegment("L",l);t.appendSegment(f)}):e.isSegment&&t.appendSegment(e));return t}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"start",get:function(){var t=this.segments,i=t.length;if(i===0)return null;for(var s=0;s<i;s+=1){var u=t[s];if(u.isVisible)return u.start}return t[i-1].end}},{key:"end",get:function(){var t=this.segments,i=t.length;if(i===0)return null;for(var s=i-1;s>=0;s-=1){var u=t[s];if(u.isVisible)return u.end}return t[i-1].end}},{key:"moveTo",value:function(){for(var t,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return this.appendSegment((t=qb.create).call.apply(t,[null].concat(s)))}},{key:"lineTo",value:function(){for(var t,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return this.appendSegment((t=Af.create).call.apply(t,[null].concat(s)))}},{key:"curveTo",value:function(){for(var t,i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return this.appendSegment((t=e1.create).call.apply(t,[null].concat(s)))}},{key:"arcTo",value:function(t,i,s,u,l,c,f){var d=this.end||new gt,h=typeof c=="number"?n1(d.x,d.y,t,i,s,u,l,c,f):n1(d.x,d.y,t,i,s,u,l,c.x,c.y);if(h!=null)for(var p=0,m=h.length;p<m;p+=6)this.curveTo(h[p],h[p+1],h[p+2],h[p+3],h[p+4],h[p+5]);return this}},{key:"quadTo",value:function(t,i,s,u){var l=this.end||new gt,c=["M",l.x,l.y];if(typeof t=="number")c.push("Q",t,i,s,u);else{var f=i;c.push("Q",t.x,t.y,f.x,f.y)}var d=n.parse(c.join(" "));return this.appendSegment(d.segments.slice(1)),this}},{key:"close",value:function(){return this.appendSegment(Qb.create())}},{key:"drawPoints",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=YT(t,i),u=n.parse(s);u&&u.segments&&this.appendSegment(u.segments)}},{key:"bbox",value:function(){var t=this.segments,i=t.length;if(i===0)return null;for(var s,u=0;u<i;u+=1){var l=t[u];if(l.isVisible){var c=l.bbox();c!=null&&(s=s?s.union(c):c)}}if(s!=null)return s;var f=t[i-1];return new fr(f.end.x,f.end.y,0,0)}},{key:"appendSegment",value:function(t){var i=this.segments.length,s=i!==0?this.segments[i-1]:null,u,l=null;if(Array.isArray(t))for(var c=0,f=t.length;c<f;c+=1){var d=t[c];u=this.prepareSegment(d,s,l),this.segments.push(u),s=u}else t!=null&&t.isSegment&&(u=this.prepareSegment(t,s,l),this.segments.push(u));return this}},{key:"insertSegment",value:function(t,i){var s=this.segments.length;if(t<0&&(t=s+t+1),t>s||t<0)throw new Error("Index out of range.");var u,l=null,c=null;if(s!==0&&(t>=1?(l=this.segments[t-1],c=l.nextSegment):(l=null,c=this.segments[0])),!Array.isArray(i))u=this.prepareSegment(i,l,c),this.segments.splice(t,0,u);else for(var f=0,d=i.length;f<d;f+=1){var h=i[f];u=this.prepareSegment(h,l,c),this.segments.splice(t+f,0,u),l=u}return this}},{key:"removeSegment",value:function(t){var i=this.fixIndex(t),s=this.segments.splice(i,1)[0],u=s.previousSegment,l=s.nextSegment;return u&&(u.nextSegment=l),l&&(l.previousSegment=u),s.isSubpathStart&&l&&this.updateSubpathStartSegment(l),s}},{key:"replaceSegment",value:function(t,i){var s=this.fixIndex(t),u,l=this.segments[s],c=l.previousSegment,f=l.nextSegment,d=l.isSubpathStart;if(!Array.isArray(i))u=this.prepareSegment(i,c,f),this.segments.splice(s,1,u),d&&u.isSubpathStart&&(d=!1);else{this.segments.splice(t,1);for(var h=0,p=i.length;h<p;h+=1){var m=i[h];u=this.prepareSegment(m,c,f),this.segments.splice(t+h,0,u),c=u,d&&u.isSubpathStart&&(d=!1)}}d&&f&&this.updateSubpathStartSegment(f)}},{key:"getSegment",value:function(t){var i=this.fixIndex(t);return this.segments[i]}},{key:"fixIndex",value:function(t){var i=this.segments.length;if(i===0)throw new Error("Path has no segments.");for(var s=t;s<0;)s=i+s;if(s>=i||s<0)throw new Error("Index out of range.");return s}},{key:"segmentAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segmentIndexAt(t,i);return s?this.getSegment(s):null}},{key:"segmentAtLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segmentIndexAtLength(t,i);return s?this.getSegment(s):null}},{key:"segmentIndexAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=Xg(t,0,1),u=this.getOptions(i),l=this.length(u),c=l*s;return this.segmentIndexAtLength(c,u)}},{key:"segmentIndexAtLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segments.length;if(s===0)return null;var u=!0;t<0&&(u=!1,t=-t);for(var l=this.getPrecision(i),c=this.getSubdivisions(i),f=0,d=null,h=0;h<s;h+=1){var p=u?h:s-1-h,m=this.segments[p],b=c[p],E=m.length({precision:l,subdivisions:b});if(m.isVisible){if(t<=f+E)return p;d=p}f+=E}return d}},{key:"getSegmentSubdivisions",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getPrecision(t),s=[],u=0,l=this.segments.length;u<l;u+=1){var c=this.segments[u],f=c.getSubdivisions({precision:i});s.push(f)}return s}},{key:"updateSubpathStartSegment",value:function(t){for(var i=t.previousSegment,s=t;s&&!s.isSubpathStart;)i!=null?s.subpathStartSegment=i.subpathStartSegment:s.subpathStartSegment=null,i=s,s=s.nextSegment}},{key:"prepareSegment",value:function(t,i,s){t.previousSegment=i,t.nextSegment=s,i!=null&&(i.nextSegment=t),s!=null&&(s.previousSegment=t);var u=t;return t.isSubpathStart&&(t.subpathStartSegment=t,u=s),u!=null&&this.updateSubpathStartSegment(u),t}},{key:"closestPoint",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.closestPointT(t,i);return s?this.pointAtT(s):null}},{key:"closestPointLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(i),u=this.closestPointT(t,s);return u?this.lengthAtT(u,s):0}},{key:"closestPointNormalizedLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(i),u=this.closestPointLength(t,s);if(u===0)return 0;var l=this.length(s);return l===0?0:u/l}},{key:"closestPointT",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var s=this.getPrecision(i),u=this.getSubdivisions(i),l,c=Infinity,f=0,d=this.segments.length;f<d;f+=1){var h=this.segments[f],p=u[f];if(h.isVisible){var m=h.closestPointT(t,{precision:s,subdivisions:p}),b=h.pointAtT(m),E=$T(b,t);E<c&&(l={segmentIndex:f,value:m},c=E)}}return l||{segmentIndex:this.segments.length-1,value:1}}},{key:"closestPointTangent",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var s=this.getPrecision(i),u=this.getSubdivisions(i),l,c=Infinity,f=0,d=this.segments.length;f<d;f+=1){var h=this.segments[f],p=u[f];if(h.isDifferentiable()){var m=h.closestPointT(t,{precision:s,subdivisions:p}),b=h.pointAtT(m),E=$T(b,t);E<c&&(l=h.tangentAtT(m),c=E)}}return l||null}},{key:"containsPoint",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.toPolylines(i);if(!s)return!1;for(var u=0,l=0,c=s.length;l<c;l+=1){var f=s[l];f.containsPoint(t)&&(u+=1)}return u%2==1}},{key:"pointAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var s=this.getOptions(i),u=this.length(s),l=u*t;return this.pointAtLength(l,s)}},{key:"pointAtLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(t===0)return this.start.clone();var s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(i),l=this.getSubdivisions(i),c,f=0,d=0,h=this.segments.length;d<h;d+=1){var p=s?d:h-1-d,m=this.segments[p],b=l[p],E=m.length({precision:u,subdivisions:b});if(m.isVisible){if(t<=f+E)return m.pointAtLength((s?1:-1)*(t-f),{precision:u,subdivisions:b});c=m}f+=E}if(c)return s?c.end:c.start;var x=this.segments[this.segments.length-1];return x.end.clone()}},{key:"pointAtT",value:function(t){var i=this.segments,s=i.length;if(s===0)return null;var u=t.segmentIndex;if(u<0)return i[0].pointAtT(0);if(u>=s)return i[s-1].pointAtT(1);var l=Xg(t.value,0,1);return i[u].pointAtT(l)}},{key:"divideAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=Xg(t,0,1),u=this.getOptions(i),l=this.length(u),c=l*s;return this.divideAtLength(c,u)}},{key:"divideAtLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(i),l=this.getSubdivisions(i),c=0,f,d,h,p,m,b=0,E=this.segments.length;b<E;b+=1){var x=s?b:E-1-b,O=this.getSegment(x),D=l[x],I={precision:u,subdivisions:D},F=O.length(I);if(O.isDifferentiable()&&(h=O,p=x,t<=c+F)){d=x,f=O.divideAtLength((s?1:-1)*(t-c),I);break}c+=F}if(!h)return null;f||(d=p,m=s?1:0,f=h.divideAtT(m));var H=this.clone(),$=d;H.replaceSegment($,f);var se=$,de=$+1,Ee=$+2;f[0].isDifferentiable()||(H.removeSegment(se),de-=1,Ee-=1);var Oe=H.getSegment(de).start;H.insertSegment(de,n.createSegment("M",Oe)),Ee+=1,f[1].isDifferentiable()||(H.removeSegment(Ee-1),Ee-=1);for(var $e=Ee-se-1,tt=Ee,Le=H.segments.length;tt<Le;tt+=1){var it=this.getSegment(tt-$e),It=H.getSegment(tt);if(It.type==="Z"&&!it.subpathStartSegment.end.equals(It.subpathStartSegment.end)){var tn=n.createSegment("L",it.end);H.replaceSegment(tt,tn)}}var bn=new n(H.segments.slice(0,de)),dn=new n(H.segments.slice(de));return[bn,dn]}},{key:"intersectsWithLine",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.toPolylines(i);if(s==null)return null;for(var u=null,l=0,c=s.length;l<c;l+=1){var f=s[l],d=t.intersect(f);if(d)if(u==null&&(u=[]),Array.isArray(d)){var h;(h=u).push.apply(h,Object(ot.a)(d))}else u.push(d)}return u}},{key:"isDifferentiable",value:function(){for(var t=0,i=this.segments.length;t<i;t+=1){var s=this.segments[t];if(s.isDifferentiable())return!0}return!1}},{key:"isValid",value:function(){var t=this.segments,i=t.length===0||t[0].type==="M";return i}},{key:"length",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.segments.length===0)return 0;for(var i=this.getSubdivisions(t),s=0,u=0,l=this.segments.length;u<l;u+=1){var c=this.segments[u],f=i[u];s+=c.length({subdivisions:f})}return s}},{key:"lengthAtT",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segments.length;if(s===0)return 0;var u=t.segmentIndex;if(u<0)return 0;var l=Xg(t.value,0,1);u>=s&&(u=s-1,l=1);for(var c=this.getPrecision(i),f=this.getSubdivisions(i),d=0,h=0;h<u;h+=1){var p=this.segments[h],m=f[h];d+=p.length({precision:c,subdivisions:m})}var b=this.segments[u],E=f[u];return d+=b.lengthAtT(l,{precision:c,subdivisions:E}),d}},{key:"tangentAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=Xg(t,0,1),u=this.getOptions(i),l=this.length(u),c=l*s;return this.tangentAtLength(c,u)}},{key:"tangentAtLength",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(i),l=this.getSubdivisions(i),c,f=0,d=0,h=this.segments.length;d<h;d+=1){var p=s?d:h-1-d,m=this.segments[p],b=l[p],E=m.length({precision:u,subdivisions:b});if(m.isDifferentiable()){if(t<=f+E)return m.tangentAtLength((s?1:-1)*(t-f),{precision:u,subdivisions:b});c=m}f+=E}if(c){var x=s?1:0;return c.tangentAtT(x)}return null}},{key:"tangentAtT",value:function(t){var i=this.segments.length;if(i===0)return null;var s=t.segmentIndex;if(s<0)return this.segments[0].tangentAtT(0);if(s>=i)return this.segments[i-1].tangentAtT(1);var u=Xg(t.value,0,1);return this.segments[s].tangentAtT(u)}},{key:"getPrecision",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.precision==null?this.PRECISION:t.precision}},{key:"getSubdivisions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.segmentSubdivisions==null){var i=this.getPrecision(t);return this.getSegmentSubdivisions({precision:i})}return t.segmentSubdivisions}},{key:"getOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getPrecision(t),s=this.getSubdivisions(t);return{precision:i,segmentSubdivisions:s}}},{key:"toPoints",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.segments,s=i.length;if(s===0)return null;for(var u=this.getSubdivisions(t),l=[],c=[],f=0;f<s;f+=1){var d=i[f];if(d.isVisible){var h=u[f];h.length>0?h.forEach(function(p){return c.push(p.start)}):c.push(d.start)}else c.length>0&&(c.push(i[f-1].end),l.push(c),c=[])}return c.length>0&&(c.push(this.end),l.push(c)),l}},{key:"toPolylines",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.toPoints(t);return i?i.map(function(s){return new Js(s)}):null}},{key:"scale",value:function(t,i,s){return this.segments.forEach(function(u){return u.scale(t,i,s)}),this}},{key:"rotate",value:function(t,i){return this.segments.forEach(function(s){return s.rotate(t,i)}),this}},{key:"translate",value:function(t,i){return typeof t=="number"?this.segments.forEach(function(s){return s.translate(t,i)}):this.segments.forEach(function(s){return s.translate(t)}),this}},{key:"clone",value:function(){var t=new n;return this.segments.forEach(function(i){return t.appendSegment(i.clone())}),t}},{key:"equals",value:function(t){if(t==null)return!1;var i=this.segments,s=t.segments,u=i.length;if(s.length!==u)return!1;for(var l=0;l<u;l+=1){var c=i[l],f=s[l];if(c.type!==f.type||!c.equals(f))return!1}return!0}},{key:"toJSON",value:function(){return this.segments.map(function(t){return t.toJSON()})}},{key:"serialize",value:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(function(t){return t.serialize()}).join(" ")}},{key:"toString",value:function(){return this.serialize()}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return!!((n==null||n===o.toStringTag)&&Array.isArray(e.segments)&&typeof e.moveTo=="function"&&typeof e.lineTo=="function"&&typeof e.curveTo=="function")}o.isPath=a})(Si||(Si={})),function(o){function a(n){if(!n)return new o;var e=new o,t=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,i=o.normalize(n).match(t);if(i!=null)for(var s=0,u=i.length;s<u;s+=1){var l=i[s],c=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,f=l.match(c);if(f!=null){var d=f[0],h=f.slice(1).map(function(m){return+m}),p=r.call.apply(r,[null,d].concat(Object(ot.a)(h)));e.appendSegment(p)}}return e}o.parse=a;function r(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];if(n==="M"){var s;return(s=qb.create).call.apply(s,[null].concat(t))}if(n==="L"){var u;return(u=Af.create).call.apply(u,[null].concat(t))}if(n==="C"){var l;return(l=e1.create).call.apply(l,[null].concat(t))}if(n==="z"||n==="Z")return Qb.create();throw new Error('Invalid path segment type "'.concat(n,'"'))}o.createSegment=r}(Si||(Si={})),function(o){o.normalize=cB,o.isValid=dB,o.drawArc=vB,o.drawPoints=YT,o.arcToCurves=n1}(Si||(Si={}));var mi=function(o){function a(r,n,e){if(Object(Ie.a)(this,a),!r)throw new TypeError("Invalid element to create vector");var t;if(a.isVector(r))t=r.node;else if(typeof r=="string")if(r.toLowerCase()==="svg")t=Wb();else if(r[0]==="<"){var i=Wb(r);t=document.importNode(i.firstChild,!0)}else t=document.createElementNS(Sf.svg,r);else t=r;this.node=t,n&&this.setAttributes(n),e&&this.append(e)}return Object(pe.a)(a,[{key:o,get:function(){return a.toStringTag}},{key:"type",get:function(){return this.node.nodeName}},{key:"id",get:function(){return this.node.id}},{key:"id",set:function(n){this.node.id=n}},{key:"transform",value:function(n,e){return n==null?KO(this.node):(KO(this.node,n,e),this)}},{key:"translate",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n==null?YO(this.node):(YO(this.node,n,e,t),this)}},{key:"rotate",value:function(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n==null?ZO(this.node):(ZO(this.node,n,e,t,i),this)}},{key:"scale",value:function(n,e){return n==null?l1(this.node):(l1(this.node,n,e),this)}},{key:"getTransformToElement",value:function(n){var e=a.toNode(n);return fh(this.node,e)}},{key:"removeAttribute",value:function(n){return IO(this.node,n),this}},{key:"getAttribute",value:function(n){return BT(this.node,n)}},{key:"setAttribute",value:function(n,e){return Kb(this.node,n,e),this}},{key:"setAttributes",value:function(n){return RO(this.node,n),this}},{key:"attr",value:function(n,e){return n==null?Rs(this.node):typeof n=="string"&&e===void 0?Rs(this.node,n):(typeof n=="object"?Rs(this.node,n):Rs(this.node,n,e),this)}},{key:"svg",value:function(){return this.node instanceof SVGSVGElement?this:a.create(this.node.ownerSVGElement)}},{key:"defs",value:function(){var n=this.svg()||this,e=n.node.getElementsByTagName("defs")[0];return e?a.create(e):a.create("defs").appendTo(n)}},{key:"text",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return JT(this.node,n,e),this}},{key:"tagName",value:function(){return $b(this.node)}},{key:"clone",value:function(){return a.create(this.node.cloneNode(!0))}},{key:"remove",value:function(){return Xb(this.node),this}},{key:"empty",value:function(){return TO(this.node),this}},{key:"append",value:function(n){return PO(this.node,a.toNodes(n)),this}},{key:"appendTo",value:function(n){return jT(this.node,a.isVector(n)?n.node:n),this}},{key:"prepend",value:function(n){return LT(this.node,a.toNodes(n)),this}},{key:"before",value:function(n){return kO(this.node,a.toNodes(n)),this}},{key:"replace",value:function(n){return this.node.parentNode&&this.node.parentNode.replaceChild(a.toNode(n),this.node),a.create(n)}},{key:"first",value:function(){return this.node.firstChild?a.create(this.node.firstChild):null}},{key:"last",value:function(){return this.node.lastChild?a.create(this.node.lastChild):null}},{key:"get",value:function(n){var e=this.node.childNodes[n];return e?a.create(e):null}},{key:"indexOf",value:function(n){var e=Array.prototype.slice.call(this.node.childNodes);return e.indexOf(a.toNode(n))}},{key:"find",value:function(n){var e=[],t=DT(this.node,n);if(t)for(var i=0,s=t.length;i<s;i+=1)e.push(a.create(t[i]));return e}},{key:"findOne",value:function(n){var e=IT(this.node,n);return e?a.create(e):null}},{key:"findParentByClass",value:function(n,e){var t=RT(this.node,n,e);return t?a.create(t):null}},{key:"matches",value:function(n){var e=this.node,t=this.node.matches,i=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return i&&i.call(e,n)}},{key:"contains",value:function(n){return NT(this.node,a.isVector(n)?n.node:n)}},{key:"wrap",value:function(n){var e=a.create(n),t=this.node.parentNode;return t!=null&&t.insertBefore(e.node,this.node),e.append(this)}},{key:"parent",value:function(n){var e=this;if(e.node.parentNode==null)return null;if(e=a.create(e.node.parentNode),n==null)return e;do if(typeof n=="string"?e.matches(n):e instanceof n)return e;while(e=a.create(e.node.parentNode));return e}},{key:"children",value:function(){for(var n=this.node.childNodes,e=[],t=0;t<n.length;t+=1){var i=n[t];i.nodeType===1&&e.push(a.create(n[t]))}return e}},{key:"eachChild",value:function(n,e){for(var t=this.children(),i=0,s=t.length;i<s;i+=1)n.call(t[i],t[i],i,t),e&&t[i].eachChild(n,e);return this}},{key:"index",value:function(){return kT(this.node)}},{key:"hasClass",value:function(n){return Hb(this.node,n)}},{key:"addClass",value:function(n){return Km(this.node,n),this}},{key:"removeClass",value:function(n){return Ym(this.node,n),this}},{key:"toggleClass",value:function(n,e){return MO(this.node,n,e),this}},{key:"toLocalPoint",value:function(n,e){return uP(this.node,n,e)}},{key:"toGeometryShape",value:function(){return lP(this.node)}},{key:"translateCenterToPoint",value:function(n){var e=this.getBBox({target:this.svg()}),t=e.getCenter();return this.translate(n.x-t.x,n.y-t.y),this}},{key:"translateAndAutoOrient",value:function(n,e,t){return pP(this.node,n,e,t),this}},{key:"animate",value:function(n){return cP(this.node,n)}},{key:"animateTransform",value:function(n){return fP(this.node,n)}},{key:"animateAlongPath",value:function(n,e){return vP(this.node,n,e)}},{key:"normalizePath",value:function(){var n=this.tagName();return n==="path"&&this.attr("d",Si.normalize(this.attr("d"))),this}},{key:"bbox",value:function(n,e){return sP(this.node,n,e)}},{key:"getBBox",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ch(this.node,{recursive:n.recursive,target:n.target?a.toNode(n.target):null})}},{key:"sample",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.node instanceof SVGPathElement?zO(this.node,n):[]}},{key:"toPath",value:function(){return a.create(UO(this.node))}},{key:"toPathData",value:function(){return VO(this.node)}}]),a}(Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function a(i){if(i==null)return!1;if(i instanceof o)return!0;var s=i[Symbol.toStringTag],u=i;return(s==null||s===o.toStringTag)&&u.node instanceof SVGElement&&typeof u.animate=="function"&&typeof u.sample=="function"&&typeof u.normalizePath=="function"&&typeof u.toPath=="function"}o.isVector=a;function r(i,s,u){return new o(i,s,u)}o.create=r;function n(i){if(i[0]==="<"){for(var s=Wb(i),u=[],l=0,c=s.childNodes.length;l<c;l+=1){var f=s.childNodes[l];u.push(r(document.importNode(f,!0)))}return u}return[r(i)]}o.createVectors=n;function e(i){return a(i)?i.node:i}o.toNode=e;function t(i){return Array.isArray(i)?i.map(function(s){return e(s)}):[e(i)]}o.toNodes=t})(mi||(mi={}));function gB(o,a){var r=mi.create(a),n=mi.create("textPath"),e=o.d;if(e&&o["xlink:href"]===void 0){var t=mi.create("path").attr("d",e).appendTo(r.defs());n.attr("xlink:href","#".concat(t.id))}return typeof o=="object"&&n.attr(o),n.node}function pB(o,a,r){for(var n=r.eol,e=r.baseSize,t=r.lineHeight,i=0,s,u={},l=a.length-1,c=0;c<=l;c+=1){var f=a[c],d=null;if(typeof f=="object"){var h=f.attrs,p=mi.create("tspan",h);s=p.node;var m=f.t;n&&c===l&&(m+=n),s.textContent=m;var b=h.class;b&&p.addClass(b),r.includeAnnotationIndices&&p.attr("annotations",f.annotations.join(",")),d=parseFloat(h["font-size"]),d===void 0&&(d=e),d&&d>i&&(i=d)}else n&&c===l&&(f+=n),s=document.createTextNode(f||" "),e&&e>i&&(i=e);o.appendChild(s)}return i&&(u.maxFontSize=i),t?u.lineHeight=t:i&&(u.lineHeight=i*1.2),u}var ZT=/em$/;function r1(o,a){var r=parseFloat(o);return ZT.test(o)?r*a:r}function mB(o,a,r,n){if(!Array.isArray(a))return 0;var e=a.length;if(!e)return 0;for(var t=a[0],i=r1(t.maxFontSize,r)||r,s=0,u=r1(n,r),l=1;l<e;l+=1){t=a[l];var c=r1(t.lineHeight,r)||u;s+=c}var f=r1(t.maxFontSize,r)||r,d;switch(o){case"middle":d=i/2-.15*f-s/2;break;case"bottom":d=-(.25*f)-s;break;default:case"top":d=.8*i;break}return d}function JT(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};a=z.sanitize(a);var n=r.eol,e=r.textPath,t=r.textVerticalAnchor,i=t==="middle"||t==="bottom"||t==="top",s=r.x;s===void 0&&(s=o.getAttribute("x")||0);var u=r.includeAnnotationIndices,l=r.annotations;l&&!Array.isArray(l)&&(l=[l]);var c=r.lineHeight,f=c==="auto",d=f?"1.5em":c||"1em";TO(o),Rs(o,{"xml:space":"preserve",display:a||r.displayEmpty?null:"none"});var h=Rs(o,"font-size"),p=parseFloat(h);p||(p=16,(i||l)&&!h&&Rs(o,"font-size","".concat(p)));var m;e?(typeof e=="string"&&(e={d:e}),m=gB(e,o)):m=document.createDocumentFragment();for(var b,E=0,x,O=a.split(`
`),D=[],I=O.length-1,F=0;F<=I;F+=1){b=d;var H="v-line",$=Mf("tspan"),se=void 0,de=O[F];if(de)if(l){var Ee=z.annotate(de,l,{offset:-E,includeAnnotationIndices:u});se=pB($,Ee,{eol:F!==I&&n,baseSize:p,lineHeight:f?null:d,includeAnnotationIndices:u});var Oe=se.lineHeight;Oe&&f&&F!==0&&(b=Oe),F===0&&(x=se.maxFontSize*.8)}else n&&F!==I&&(de+=n),$.textContent=de;else{$.textContent="-",H+=" v-empty-line";var $e=$.style;$e.fillOpacity=0,$e.strokeOpacity=0,l&&(se={})}se&&D.push(se),F>0&&$.setAttribute("dy",b),(F>0||e)&&$.setAttribute("x",s),$.className.baseVal=H,m.appendChild($),E+=de.length+1}if(i)if(l)b=mB(t,D,p,d);else if(t==="top")b="0.8em";else{var tt;switch(I>0?(tt=parseFloat(d)||1,tt*=I,ZT.test(d)||(tt/=p)):tt=0,t){case"middle":b="".concat(.3-tt/2,"em");break;case"bottom":b="".concat(-tt-.3,"em");break;default:break}}else t===0?b="0em":t?b=t:(b=0,o.getAttribute("y")==null&&o.setAttribute("y","".concat(x||"0.8em")));var Le=m.firstChild;Le.setAttribute("dy",b),o.appendChild(m)}function yB(o,a,r,n){var e=[],t=[];if(a!=null){var i=o.split(a);if(e.push.apply(e,Object(ot.a)(i)),typeof a=="string")for(var s=0,u=i.length-1;s<u;s+=1)t.push(a);else for(var l=o.match(new RegExp(a,"g")),c=0,f=i.length-1;c<f;c+=1)t.push(l?l[c]:"")}else{for(var d="",h=0,p=o.length;h<p;h+=1){var m=o[h];m===" "?(e.push(d),t.push(" "),d=""):m.match(/[^\x00-\xff]/)?(d.length&&(e.push(d),t.push("")),e.push(m),t.push(""),d=""):d+=m}d.length&&e.push(d)}for(var b=0;b<e.length;b+=1){var E=e[b];if(E.indexOf(r)>=0&&E.length>1){for(var x=E.split(r),O=0,D=x.length-1;O<D;O+=1)x.splice(2*O+1,0,r);var I=x.filter(function(de){return de!==""});e.splice.apply(e,[b,1].concat(Object(ot.a)(I)));var F=I.map(function(){return""});F.pop(),t.splice.apply(t,[b,0].concat(Object(ot.a)(F)))}}for(var H=0;H<e.length;H+=1){var $=e[H],se=$.search(n);se>0&&se<$.length-1&&(e.splice(H,1,$.substring(0,se+1),$.substring(se+1)),t.splice(H,0,""))}return{words:e,separators:t}}function bB(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=a.width,t=a.height,i=n.svgDocument||Mf("svg"),s=Mf("text"),u=Mf("tspan"),l=document.createTextNode("");Rs(s,r),s.appendChild(u),s.style.opacity="0",s.style.display="block",u.style.display="block",u.appendChild(l),i.appendChild(s);var c=i.parentNode==null;c&&document.body.appendChild(i);for(var f=n.eol||`
`,d=n.separator||" ",h=n.hyphen?new RegExp(n.hyphen):/[^\w\d]/,p=n.breakWord!==!1,m=[],b={},E=[],x,O,D,I=yB(o,n.separator,f,h),F=I.words,H=I.separators,$=0,se=0,de=F.length;$<de;$+=1){var Ee=F[$];if(!!Ee){if(Ee===f){m[se]=!0,se+=1,E[se]="";continue}if(E[se]!=null?(D=H[$-1]||"",l.data="".concat(E[se]).concat(D).concat(Ee)):l.data=Ee,u.getComputedTextLength()<=e)E[se]=l.data,b[se]=H[$],x&&(m[se]=!0,se+=1,x=0);else{if(p){if(!E[se]||x){var Oe=!!x,$e=Ee.length===1;if(x=Ee.length-1,Oe||$e){if($e){if(!E[se]){E=[];break}F.splice($,2,Ee+F[$+1]),H.splice($+1,1),m[se]=!0,se+=1,de-=1,$-=1;continue}F[$]=Ee.substring(0,x),F[$+1]=Ee.substring(x)+F[$+1]}else F.splice($,1,Ee.substring(0,x),Ee.substring(x)),H.splice($,0,""),de+=1,se&&!m[se-1]&&(se-=1);$-=1;continue}}else if(!E[se]){E[se]=Ee,m[se]=!0,se+=1;continue}se+=1,$-=1}if(t!=null){if(O==null){var tt=void 0;r.lineHeight==="auto"?tt={value:1.5,unit:"em"}:tt=P.parseCssNumeric(r.lineHeight,["em"])||{value:1,unit:"em"},O=tt.value,tt.unit==="em"&&(Yr.IS_FIREFOX?O*=u.getBBox().height:O*=s.getBBox().height)}if(O*E.length>t){var Le=Math.floor(t/O)-1,it=E[Le],It=E[Le+1];if(E.splice(Le+1),it==null)break;var tn=n.ellipsis;if(!tn)break;typeof tn!="string"&&(tn="\u2026");var bn=it;It&&p&&(bn+=D+It);var dn=bn.length,en=void 0,Vn=void 0;do{if(Vn=bn[dn],en=bn.substring(0,dn),Vn?Vn.match(d)&&(en+=Vn):en+=b[Le],en+=tn,l.data=en,u.getComputedTextLength()<=e){E[Le]=en;break}dn-=1}while(dn>=0);break}}}}return Xb(c?i:s),E.join(f)}var i1=.551784;function Ns(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN,n=o.getAttribute(a);if(n==null)return r;var e=parseFloat(n);return Number.isNaN(e)?r:e}function zO(o){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=o.getTotalLength(),n=[],e=0,t;e<r;)t=o.getPointAtLength(e),n.push({distance:e,x:t.x,y:t.y}),e+=a;return n}function QT(o){return["M",Ns(o,"x1"),Ns(o,"y1"),"L",Ns(o,"x2"),Ns(o,"y2")].join(" ")}function qT(o){var a=Jm(o);return a.length===0?null:"".concat(tP(a)," Z")}function eP(o){var a=Jm(o);return a.length===0?null:tP(a)}function tP(o){var a=o.map(function(r){return"".concat(r.x," ").concat(r.y)});return"M ".concat(a.join(" L"))}function Jm(o){var a=[],r=o.points;if(r)for(var n=0,e=r.numberOfItems;n<e;n+=1)a.push(r.getItem(n));return a}function nP(o){var a=Ns(o,"cx",0),r=Ns(o,"cy",0),n=Ns(o,"r"),e=n*i1;return["M",a,r-n,"C",a+e,r-n,a+n,r-e,a+n,r,"C",a+n,r+e,a+e,r+n,a,r+n,"C",a-e,r+n,a-n,r+e,a-n,r,"C",a-n,r-e,a-e,r-n,a,r-n,"Z"].join(" ")}function rP(o){var a=Ns(o,"cx",0),r=Ns(o,"cy",0),n=Ns(o,"rx"),e=Ns(o,"ry")||n,t=n*i1,i=e*i1,s=["M",a,r-e,"C",a+t,r-e,a+n,r-i,a+n,r,"C",a+n,r+i,a+t,r+e,a,r+e,"C",a-t,r+e,a-n,r+i,a-n,r,"C",a-n,r-i,a-t,r-e,a,r-e,"Z"].join(" ");return s}function iP(o){return aP({x:Ns(o,"x",0),y:Ns(o,"y",0),width:Ns(o,"width",0),height:Ns(o,"height",0),rx:Ns(o,"rx",0),ry:Ns(o,"ry",0)})}function aP(o){var a,r=o.x,n=o.y,e=o.width,t=o.height,i=Math.min(o.rx||o["top-rx"]||0,e/2),s=Math.min(o.rx||o["bottom-rx"]||0,e/2),u=Math.min(o.ry||o["top-ry"]||0,t/2),l=Math.min(o.ry||o["bottom-ry"]||0,t/2);return i||s||u||l?a=["M",r,n+u,"v",t-u-l,"a",s,l,0,0,0,s,l,"h",e-2*s,"a",s,l,0,0,0,s,-l,"v",-(t-l-u),"a",i,u,0,0,0,-i,-u,"h",-(e-2*i),"a",i,u,0,0,0,-i,u,"Z"]:a=["M",r,n,"H",r+e,"V",n+t,"H",r,"V",n,"Z"],a.join(" ")}function UO(o){var a=Mf("path");Rs(a,Rs(o));var r=VO(o);return r&&a.setAttribute("d",r),a}function VO(o){var a=o.tagName.toLowerCase();switch(a){case"path":return o.getAttribute("d");case"line":return QT(o);case"polygon":return qT(o);case"polyline":return eP(o);case"ellipse":return rP(o);case"circle":return nP(o);case"rect":return iP(o);default:break}throw new Error('"'.concat(a,'" cannot be converted to svg path element.'))}function CB(o,a,r,n){var e=2*Math.PI-1e-6,t=o,i=a,s=r,u=n;if(u<s){var l=s;s=u,u=l}var c=u-s,f=c<Math.PI?"0":"1",d=Math.cos(s),h=Math.sin(s),p=Math.cos(u),m=Math.sin(u);return c>=e?t?"M0,".concat(i,"A").concat(i,",").concat(i," 0 1,1 0,").concat(-i,"A").concat(i,",").concat(i," 0 1,1 0,").concat(i,"M0,").concat(t,"A").concat(t,",").concat(t," 0 1,0 0,").concat(-t,"A").concat(t,",").concat(t," 0 1,0 0,").concat(t,"Z"):"M0,".concat(i,"A").concat(i,",").concat(i," 0 1,1 0,").concat(-i,"A").concat(i,",").concat(i," 0 1,1 0,").concat(i,"Z"):t?"M".concat(i*d,",").concat(i*h,"A").concat(i,",").concat(i," 0 ").concat(f,",1 ").concat(i*p,",").concat(i*m,"L").concat(t*p,",").concat(t*m,"A").concat(t,",").concat(t," 0 ").concat(f,",0 ").concat(t*d,",").concat(t*h,"Z"):"M".concat(i*d,",").concat(i*h,"A").concat(i,",").concat(i," 0 ").concat(f,",1 ").concat(i*p,",").concat(i*m,"L0,0")+"Z"}var Qm=Mf("svg"),EB=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,oP=/[ ,]+/,wB=/^(\w+)\((.*)\)/;function HO(o,a){var r=Qm.createSVGPoint();return r.x=o,r.y=a,r}function Kg(o){var a=Qm.createSVGMatrix();if(o!=null){var r=o,n=a;for(var e in r)n[e]=r[e]}return a}function Yg(o){return o!=null?(o instanceof DOMMatrix||(o=Kg(o)),Qm.createSVGTransformFromMatrix(o)):Qm.createSVGTransform()}function a1(o){var a=Kg(),r=o!=null&&o.match(EB);if(!r)return a;for(var n=0,e=r.length;n<e;n+=1){var t=r[n],i=t.match(wB);if(i){var s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,d=Kg(),h=i[2].split(oP);switch(i[1].toLowerCase()){case"scale":s=parseFloat(h[0]),u=h[1]===void 0?s:parseFloat(h[1]),d=d.scaleNonUniform(s,u);break;case"translate":l=parseFloat(h[0]),c=parseFloat(h[1]),d=d.translate(l,c);break;case"rotate":f=parseFloat(h[0]),l=parseFloat(h[1])||0,c=parseFloat(h[2])||0,l!==0||c!==0?d=d.translate(l,c).rotate(f).translate(-l,-c):d=d.rotate(f);break;case"skewx":f=parseFloat(h[0]),d=d.skewX(f);break;case"skewy":f=parseFloat(h[0]),d=d.skewY(f);break;case"matrix":d.a=parseFloat(h[0]),d.b=parseFloat(h[1]),d.c=parseFloat(h[2]),d.d=parseFloat(h[3]),d.e=parseFloat(h[4]),d.f=parseFloat(h[5]);break;default:continue}a=a.multiply(d)}}return a}function WO(o){var a=o||{},r=a.a!=null?a.a:1,n=a.b!=null?a.b:0,e=a.c!=null?a.c:0,t=a.d!=null?a.d:1,i=a.e!=null?a.e:0,s=a.f!=null?a.f:0;return"matrix(".concat(r,",").concat(n,",").concat(e,",").concat(t,",").concat(i,",").concat(s,")")}function o1(o){var a,r,n;if(o){var e=oP;if(o.trim().indexOf("matrix")>=0){var t=a1(o),i=XO(t);a=[i.translateX,i.translateY],r=[i.rotation],n=[i.scaleX,i.scaleY];var s=[];(a[0]!==0||a[1]!==0)&&s.push("translate(".concat(a.join(","),")")),(n[0]!==1||n[1]!==1)&&s.push("scale(".concat(n.join(","),")")),r[0]!==0&&s.push("rotate(".concat(r[0],")")),o=s.join(" ")}else{var u=o.match(/translate\((.*?)\)/);u&&(a=u[1].split(e));var l=o.match(/rotate\((.*?)\)/);l&&(r=l[1].split(e));var c=o.match(/scale\((.*?)\)/);c&&(n=c[1].split(e))}}var f=n&&n[0]?parseFloat(n[0]):1;return{raw:o||"",translation:{tx:a&&a[0]?parseInt(a[0],10):0,ty:a&&a[1]?parseInt(a[1],10):0},rotation:{angle:r&&r[0]?parseInt(r[0],10):0,cx:r&&r[1]?parseInt(r[1],10):void 0,cy:r&&r[2]?parseInt(r[2],10):void 0},scale:{sx:f,sy:n&&n[1]?parseFloat(n[1]):f}}}function $O(o,a){var r=a.x*o.a+a.y*o.c+0,n=a.x*o.b+a.y*o.d+0;return{x:r,y:n}}function XO(o){var a=$O(o,{x:0,y:1}),r=$O(o,{x:1,y:0}),n=180/Math.PI*Math.atan2(a.y,a.x)-90,e=180/Math.PI*Math.atan2(r.y,r.x);return{skewX:n,skewY:e,translateX:o.e,translateY:o.f,scaleX:Math.sqrt(o.a*o.a+o.b*o.b),scaleY:Math.sqrt(o.c*o.c+o.d*o.d),rotation:n}}function xB(o){var a,r,n,e;return o?(a=o.a==null?1:o.a,e=o.d==null?1:o.d,r=o.b,n=o.c):a=e=1,{sx:r?Math.sqrt(a*a+r*r):a,sy:n?Math.sqrt(n*n+e*e):e}}function OB(o){var a={x:0,y:1};return o&&(a=$O(o,a)),{angle:ji.normalize(ji.toDeg(Math.atan2(a.y,a.x))-90)}}function SB(o){return{tx:o&&o.e||0,ty:o&&o.f||0}}function s1(o,a){var r=HO(o.x,o.y).matrixTransform(a);return new gt(r.x,r.y)}function MB(o,a){return new Ur(s1(o.start,a),s1(o.end,a))}function AB(o,a){var r=o instanceof Js?o.points:o;return Array.isArray(r)||(r=[]),new Js(r.map(function(n){return s1(n,a)}))}function u1(o,a){var r=Qm.createSVGPoint();r.x=o.x,r.y=o.y;var n=r.matrixTransform(a);r.x=o.x+o.width,r.y=o.y;var e=r.matrixTransform(a);r.x=o.x+o.width,r.y=o.y+o.height;var t=r.matrixTransform(a);r.x=o.x,r.y=o.y+o.height;var i=r.matrixTransform(a),s=Math.min(n.x,e.x,t.x,i.x),u=Math.max(n.x,e.x,t.x,i.x),l=Math.min(n.y,e.y,t.y,i.y),c=Math.max(n.y,e.y,t.y,i.y);return new fr(s,l,u-s,c-l)}var TB=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r};function sP(o,a,r){var n,e=o.ownerSVGElement;if(!e)return new fr(0,0,0,0);try{n=o.getBBox()}catch(i){n={x:o.clientLeft,y:o.clientTop,width:o.clientWidth,height:o.clientHeight}}if(a)return fr.create(n);var t=fh(o,r||e);return u1(n,t)}function ch(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,n=o.ownerSVGElement;if(!n||!$g(o)){if(DO(o)){var e=gP(o),t=e.left,i=e.top,s=e.width,u=e.height;return new fr(t,i,s,u)}return new fr(0,0,0,0)}var l=a.target,c=a.recursive;if(!c){try{r=o.getBBox()}catch(E){r={x:o.clientLeft,y:o.clientTop,width:o.clientWidth,height:o.clientHeight}}if(!l)return fr.create(r);var f=fh(o,l);return u1(r,f)}{var d=o.childNodes,h=d.length;if(h===0)return ch(o,{target:l});l||(l=o);for(var p=0;p<h;p+=1){var m=d[p],b=void 0;m.childNodes.length===0?b=ch(m,{target:l}):b=ch(m,{target:l,recursive:!0}),r?r=r.union(b):r=b}return r}}function PB(o){for(var a=o,r=a?a.tagName.toLowerCase():"";r==="g";)a=a.firstElementChild,r=a?a.tagName.toLowerCase():"";var n=function(s){var u=a.getAttribute(s),l=u?parseFloat(u):0;return Number.isNaN(l)?0:l},e,t;switch(r){case"rect":t=new fr(n("x"),n("y"),n("width"),n("height"));break;case"circle":e=n("r"),t=new fr(n("cx")-e,n("cy")-e,2*e,2*e);break;default:break}return t}function kB(o,a){var r=Kg();if($g(a)&&$g(o)){for(var n=o,e=[];n&&n!==a;){var t=n.getAttribute("transform")||null,i=a1(t);e.push(i),n=n.parentNode}e.reverse().forEach(function(s){r=r.multiply(s)})}return r}function fh(o,a){if($g(a)&&$g(o)){var r=a.getScreenCTM(),n=o.getScreenCTM();if(r&&n)return r.inverse().multiply(n)}return Kg()}function uP(o,a,r){var n=o instanceof SVGSVGElement?o:o.ownerSVGElement,e=n.createSVGPoint();e.x=a,e.y=r;try{var t=n.getScreenCTM(),i=e.matrixTransform(t.inverse()),s=fh(o,n).inverse();return i.matrixTransform(s)}catch(u){return e}}function lP(o){var a=function(i){var s=o.getAttribute(i),u=s?parseFloat(s):0;return Number.isNaN(u)?0:u};switch(o instanceof SVGElement&&o.nodeName.toLowerCase()){case"rect":return new fr(a("x"),a("y"),a("width"),a("height"));case"circle":return new lh(a("cx"),a("cy"),a("r"),a("r"));case"ellipse":return new lh(a("cx"),a("cy"),a("rx"),a("ry"));case"polyline":{var r=Jm(o);return new Js(r)}case"polygon":{var n=Jm(o);return n.length>1&&n.push(n[0]),new Js(n)}case"path":{var e=o.getAttribute("d");return Si.isValid(e)||(e=Si.normalize(e)),Si.parse(e)}case"line":return new Ur(a("x1"),a("y1"),a("x2"),a("y2"));default:break}return ch(o)}function DB(o,a,r){var n=o instanceof SVGSVGElement?o:o.ownerSVGElement;r=r||n;var e=ch(r),t=e.getCenter();if(!e.intersectsWithLineFromCenterToPoint(a))return null;var i=null,s=o.tagName.toLowerCase();if(s==="rect"){var u=new fr(parseFloat(o.getAttribute("x")||"0"),parseFloat(o.getAttribute("y")||"0"),parseFloat(o.getAttribute("width")||"0"),parseFloat(o.getAttribute("height")||"0")),l=fh(o,r),c=XO(l),f=n.createSVGTransform();f.setRotate(-c.rotation,t.x,t.y);var d=u1(u,f.matrix.multiply(l));i=fr.create(d).intersectsWithLineFromCenterToPoint(a,c.rotation)}else if(s==="path"||s==="polygon"||s==="polyline"||s==="circle"||s==="ellipse"){for(var h=s==="path"?o:UO(o),p=zO(h),m=Infinity,b=[],E=0,x=p.length;E<x;E+=1){var O=p[E],D=HO(O.x,O.y);D=D.matrixTransform(fh(o,r));var I=gt.create(D),F=I.distance(t),H=I.distance(a)*1.1,$=F+H;$<m?(m=$,b=[{sample:O,refDistance:H}]):$<m+1&&b.push({sample:O,refDistance:H})}b.sort(function(se,de){return se.refDistance-de.refDistance}),b[0]&&(i=gt.create(b[0].sample))}return i}function cP(o,a){return dP(o,a,"animate")}function fP(o,a){return dP(o,a,"animateTransform")}function dP(o,a,r){var n=Mf(r);o.appendChild(n);try{return hP(n,a)}catch(e){}return function(){}}function hP(o,a){var r=a.start,n=a.complete,e=a.repeat,t=TB(a,["start","complete","repeat"]);Rs(o,t),r&&o.addEventListener("beginEvent",r),n&&o.addEventListener("endEvent",n),e&&o.addEventListener("repeatEvent",e);var i=o;return setTimeout(function(){i.beginElement()}),function(){return i.endElement()}}function vP(o,a,r){var n=AT(r),e=Mf("animateMotion"),t=Mf("mpath");Rs(t,{"xlink:href":"#".concat(n)}),e.appendChild(t),o.appendChild(e);try{return hP(e,a)}catch(p){if(document.documentElement.getAttribute("smiling")==="fake"){var i=e;i.animators=[];var s=window,u=i.getAttribute("id");u&&(s.id2anim[u]=i);for(var l=s.getTargets(i),c=0,f=l.length;c<f;c+=1){var d=l[c],h=new s.Animator(i,d,c);s.animators.push(h),i.animators[c]=h,h.register()}}}return function(){}}function gP(o){var a=0,r=0,n=0,e=0;if(o){for(var t=o;t;)a+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent,t&&(a+=parseInt(Zb(t,"borderLeft"),10),r+=parseInt(Zb(t,"borderTop"),10));n=o.offsetWidth,e=o.offsetHeight}return{left:a,top:r,width:n,height:e}}function KO(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(a==null)return a1(Rs(o,"transform"));if(r.absolute){o.setAttribute("transform",WO(a));return}var n=o.transform,e=Yg(a);n.baseVal.appendItem(e)}function YO(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=Rs(o,"transform"),t=o1(e);if(a==null)return t.translation;e=t.raw,e=e.replace(/translate\([^)]*\)/g,"").trim();var i=n.absolute?a:t.translation.tx+a,s=n.absolute?r:t.translation.ty+r,u="translate(".concat(i,",").concat(s,")");o.setAttribute("transform","".concat(u," ").concat(e).trim())}function ZO(o,a,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=Rs(o,"transform"),i=o1(t);if(a==null)return i.rotation;t=i.raw,t=t.replace(/rotate\([^)]*\)/g,"").trim(),a%=360;var s=e.absolute?a:i.rotation.angle+a,u=r!=null&&n!=null?",".concat(r,",").concat(n):"",l="rotate(".concat(s).concat(u,")");o.setAttribute("transform","".concat(t," ").concat(l).trim())}function l1(o,a,r){var n=Rs(o,"transform"),e=o1(n);if(a==null)return e.scale;r=r==null?a:r,n=e.raw,n=n.replace(/scale\([^)]*\)/g,"").trim();var t="scale(".concat(a,",").concat(r,")");o.setAttribute("transform","".concat(n," ").concat(t).trim())}function pP(o,a,r,n){var e=gt.create(a),t=gt.create(r);if(!n){var i=o instanceof SVGSVGElement?o:o.ownerSVGElement;n=i}var s=l1(o);o.setAttribute("transform","");var u=ch(o,{target:n}).scale(s.sx,s.sy),l=Yg();l.setTranslate(-u.x-u.width/2,-u.y-u.height/2);var c=Yg(),f=e.angleBetween(t,e.clone().translate(1,0));f&&c.setRotate(f,0,0);var d=Yg(),h=e.clone().move(t,u.width/2);d.setTranslate(2*e.x-h.x,2*e.y-h.y);var p=fh(o,n),m=Yg();m.setMatrix(d.matrix.multiply(c.matrix.multiply(l.matrix.multiply(p.scale(s.sx,s.sy))))),o.setAttribute("transform",WO(m.matrix))}var IB=function(){function o(a,r,n){Object(Ie.a)(this,o),this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=Yr.isEventSupported("wheel")?"wheel":"mousewheel",this.target=a,this.onWheelCallback=r,this.onWheelGuard=n,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}return Object(pe.a)(o,[{key:"enable",value:function(){Yr.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):En()(this.target).on("mousewheel",this.onWheel)}},{key:"disable",value:function(){Yr.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):En()(this.target).off("mousewheel")}},{key:"onWheel",value:function(r){var n=this;if(!(this.onWheelGuard!=null&&!this.onWheelGuard(r))){this.deltaX+=r.deltaX,this.deltaY+=r.deltaY,r.preventDefault();var e;(this.deltaX!==0||this.deltaY!==0)&&(r.stopPropagation(),e=!0),e===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(function(){n.didWheel(r)}))}}},{key:"didWheel",value:function(r){this.animationFrameId=0,this.onWheelCallback(r,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}]),o}(),RB=mi.isVector,NB=mi.create,LB=mi.createVectors;function mP(o){var a=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,n=null;return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n&&clearTimeout(n),n=window.setTimeout(function(){o.apply(a,t)},r)}}function jB(o){var a=null,r=[],n=function(){if(getComputedStyle(o).position==="static"){var l=o.style;l.position="relative"}var c=document.createElement("object");return c.onload=function(){c.contentDocument.defaultView.addEventListener("resize",e),e()},c.style.display="block",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.height="100%",c.style.width="100%",c.style.overflow="hidden",c.style.pointerEvents="none",c.style.zIndex="-1",c.style.opacity="0",c.setAttribute("tabindex","-1"),c.type="text/html",o.appendChild(c),c.data="about:blank",c},e=mP(function(){r.forEach(function(u){return u(o)})}),t=function(l){a||(a=n()),r.indexOf(l)===-1&&r.push(l)},i=function(){a&&a.parentNode&&(a.contentDocument&&a.contentDocument.defaultView.removeEventListener("resize",e),a.parentNode.removeChild(a),a=null,r=[])},s=function(l){var c=r.indexOf(l);c!==-1&&r.splice(c,1),r.length===0&&a&&i()};return{element:o,bind:t,destroy:i,unbind:s}}function _B(o){var a=null,r=[],n=mP(function(){r.forEach(function(u){u(o)})}),e=function(){var l=new ResizeObserver(n);return l.observe(o),n(),l},t=function(l){a||(a=e()),r.indexOf(l)===-1&&r.push(l)},i=function(){a&&(a.disconnect(),r=[],a=null)},s=function(l){var c=r.indexOf(l);c!==-1&&r.splice(c,1),r.length===0&&a&&i()};return{element:o,bind:t,destroy:i,unbind:s}}var FB=typeof ResizeObserver!="undefined"?_B:jB,c1;(function(o){var a=new WeakMap;function r(e){var t=a.get(e);return t||(t=FB(e),a.set(e,t),t)}function n(e){e.destroy(),a.delete(e.element)}o.bind=function(e,t){var i=r(e);return i.bind(t),function(){return i.unbind(t)}},o.clear=function(e){var t=r(e);n(t)}})(c1||(c1={}));var qm;(function(o){var a=[],r=1e3/60,n=[],e=0,t=function(){return performance.now()},i=function(f){return f[0]},s=function(f){return n.push(f)===1&&u()},u=function(){var c=function(){var m,b;return(b=(m=n.splice(0,n.length))[0])===null||b===void 0?void 0:b.call(m)};if(typeof MessageChannel!="undefined"){var f=new MessageChannel,d=f.port1,h=f.port2;return d.onmessage=c,function(){return h.postMessage(null)}}return function(){return setTimeout(c)}}(),l=function c(){e=t()+r;for(var f=i(a);f&&!o.shouldYield();){var d=f,h=d.callback,p=d.data;f.callback=null;var m=h&&h(p);m?f.callback=m:a.shift(),f=i(a)}f&&s(c)};o.scheduleTask=function(c,f){var d={callback:c,data:f};a.push(d),s(l)},o.shouldYield=function(){var c,f;return((f=(c=navigator)===null||c===void 0?void 0:c.scheduling)===null||f===void 0?void 0:f.isInputPending())||t()>=e}})(qm||(qm={}));var Vr=v("w4Tj"),Hr=v("oZsa"),lo=function(){function o(a){Object(Ie.a)(this,o),this.options=Object.assign({},a),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return Object(pe.a)(o,[{key:"names",get:function(){return Object.keys(this.data)}},{key:"register",value:function(r,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof r=="object"){Object.keys(r).forEach(function(u){e.register(u,r[u],n)});return}this.exist(r)&&!t&&!Yr.isApplyingHMR()&&this.onDuplicated(r);var i=this.options.process,s=i?N.call(i,this,r,n):n;return this.data[r]=s,s}},{key:"unregister",value:function(r){var n=r?this.data[r]:null;return delete this.data[r],n}},{key:"get",value:function(r){return r?this.data[r]:null}},{key:"exist",value:function(r){return r?this.data[r]!=null:!1}},{key:"onDuplicated",value:function(r){try{throw this.options.onConflict&&N.call(this.options.onConflict,this,r),new Error("".concat(_.upperFirst(this.options.type)," with name '").concat(r,"' already registered."))}catch(n){throw n}}},{key:"onNotFound",value:function(r,n){throw new Error(this.getSpellingSuggestion(r,n))}},{key:"getSpellingSuggestion",value:function(r,n){var e=this.getSpellingSuggestionForName(r),t=n?"".concat(n," ").concat(_.lowerFirst(this.options.type)):this.options.type;return"".concat(_.upperFirst(t)," with name '").concat(r,"' does not exist.").concat(e?" Did you mean '".concat(e,"'?"):"")}},{key:"getSpellingSuggestionForName",value:function(r){return _.getSpellingSuggestion(r,Object.keys(this.data),function(n){return n})}}]),o}();(function(o){function a(r){return new o(r)}o.create=a})(lo||(lo={}));var BB={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},GB={},yP={position:f1("x","width","origin")},bP={position:f1("y","height","origin")},zB={position:f1("x","width","corner")},UB={position:f1("y","height","corner")},CP={set:dh("width","width")},EP={set:dh("height","height")},VB={set:dh("rx","width")},HB={set:dh("ry","height")},wP={set:function(o){var a=dh(o,"width"),r=dh(o,"height");return function(n,e){var t=e.refBBox,i=t.height>t.width?a:r;return N.call(i,this,n,e)}}("r")},WB={set:function(a,r){var n=r.refBBox,e=parseFloat(a),t=P.isPercentage(a);t&&(e/=100);var i=Math.sqrt(n.height*n.height+n.width*n.width),s;return Number.isFinite(e)&&(t||e>=0&&e<=1?s=e*i:s=Math.max(e+i,0)),{r:s}}},$B={set:dh("cx","width")},XB={set:dh("cy","height")},xP={set:MP({resetOffset:!0})},KB={set:MP({resetOffset:!1})},OP={set:AP({resetOffset:!0})},YB={set:AP({resetOffset:!1})},ZB=wP,JB=xP,QB=OP,qB=yP,eG=bP,tG=CP,nG=EP;function f1(o,a,r){return function(n,e){var t=e.refBBox;if(n==null)return null;var i=parseFloat(n),s=P.isPercentage(n);s&&(i/=100);var u;if(Number.isFinite(i)){var l=t[r];s||i>0&&i<1?u=l[o]+t[a]*i:u=l[o]+i}var c=new gt;return c[o]=u||0,c}}function dh(o,a){return function(r,n){var e=n.refBBox,t=parseFloat(r),i=P.isPercentage(r);i&&(t/=100);var s={};if(Number.isFinite(t)){var u=i||t>=0&&t<=1?t*e[a]:Math.max(t+e[a],0);s[o]=u}return s}}function SP(o,a){var r="x6-shape",n=a&&a.resetOffset;return function(e,t){var i=t.view,s=t.elem,u=t.refBBox,l=i.$(s),c=l.data(r);if(!c||c.value!==e){var f=o(e);c={value:e,shape:f,shapeBBox:f.bbox()},l.data(r,c)}var d=c.shape.clone(),h=c.shapeBBox.clone(),p=h.getOrigin(),m=u.getOrigin();h.x=m.x,h.y=m.y;var b=u.getMaxScaleToFit(h,m),E=h.width===0||u.width===0?1:b.sx,x=h.height===0||u.height===0?1:b.sy;return d.scale(E,x,p),n&&d.translate(-p.x,-p.y),d}}function MP(o){function a(n){return Si.parse(n)}var r=SP(a,o);return function(n,e){var t=r(n,e);return{d:t.serialize()}}}function AP(o){var a=SP(function(r){return new Js(r)},o);return function(r,n){var e=a(r,n);return{points:e.serialize()}}}var rG={qualify:C.isPlainObject,set:function(a,r){var n=r.view;return"url(#".concat(n.graph.defineGradient(a),")")}},iG={qualify:C.isPlainObject,set:function(a,r){var n=r.view,e=n.cell,t=Object.assign({},a);if(e.isEdge()&&t.type==="linearGradient"){var i=n,s=i.sourcePoint,u=i.targetPoint;t.id="gradient-".concat(t.type,"-").concat(e.id),t.attrs=Object.assign(Object.assign({},t.attrs),{x1:s.x,y1:s.y,x2:u.x,y2:u.y,gradientUnits:"userSpaceOnUse"}),n.graph.defs.remove(t.id)}return"url(#".concat(n.graph.defineGradient(t),")")}},TP={qualify:function(a,r){var n=r.attrs;return n.textWrap==null||!C.isPlainObject(n.textWrap)},set:function(a,r){var n=r.view,e=r.elem,t=r.attrs,i="x6-text",s=n.$(e),u=s.data(i),l=function(E){try{return JSON.parse(E)}catch(x){return E}},c={x:t.x,eol:t.eol,annotations:l(t.annotations),textPath:l(t["text-path"]||t.textPath),textVerticalAnchor:t["text-vertical-anchor"]||t.textVerticalAnchor,displayEmpty:(t["display-empty"]||t.displayEmpty)==="true",lineHeight:t["line-height"]||t.lineHeight},f=t["font-size"]||t.fontSize,d=JSON.stringify([a,c]);if(f&&e.setAttribute("font-size",f),u==null||u!==d){var h=c.textPath;if(h!=null&&typeof h=="object"){var p=h.selector;if(typeof p=="string"){var m=n.find(p)[0];m instanceof SVGPathElement&&(R.ensureId(m),c.textPath=Object.assign({"xlink:href":"#".concat(m.id)},h))}}R.text(e,"".concat(a),c),s.data(i,d)}}},aG={qualify:C.isPlainObject,set:function(a,r){var n=r.view,e=r.elem,t=r.attrs,i=r.refBBox,s=a,u=s.width||0;P.isPercentage(u)?i.width*=parseFloat(u)/100:u<=0?i.width+=u:i.width=u;var l=s.height||0;P.isPercentage(l)?i.height*=parseFloat(l)/100:l<=0?i.height+=l:i.height=l;var c,f=s.text;f==null&&(f=t.text),f!=null?c=R.breakText("".concat(f),i,{"font-weight":t["font-weight"]||t.fontWeight,"font-size":t["font-size"]||t.fontSize,"font-family":t["font-family"]||t.fontFamily,lineHeight:t.lineHeight},{svgDocument:n.graph.view.svg,ellipsis:s.ellipsis,hyphen:s.hyphen,breakWord:s.breakWord}):c="",N.call(TP.set,this,c,{view:n,elem:e,attrs:t,refBBox:i,cell:n.cell})}},Zg=function(a,r){var n=r.attrs;return n.text!==void 0},oG={qualify:Zg},sG={qualify:Zg},uG={qualify:Zg},lG={qualify:Zg},cG={qualify:Zg},fG={qualify:Zg},dG={qualify:function(a,r){var n=r.elem;return n instanceof SVGElement},set:function(a,r){var n=r.view,e=r.elem,t="x6-title",i="".concat(a),s=n.$(e),u=s.data(t);if(u==null||u!==i){s.data(t,i);var l=e.firstChild;if(l&&l.tagName.toUpperCase()==="TITLE"){var c=l;c.textContent=i}else{var f=document.createElementNS(e.namespaceURI,"title");f.textContent=i,e.insertBefore(f,l)}}}},hG={offset:PP("x","width","right")},vG={offset:PP("y","height","bottom")},gG={offset:function(a,r){var n=r.refBBox;return a?{x:-n.x,y:-n.y}:{x:0,y:0}}};function PP(o,a,r){return function(n,e){var t=e.refBBox,i=new gt,s;return n==="middle"?s=t[a]/2:n===r?s=t[a]:typeof n=="number"&&Number.isFinite(n)?s=n>-1&&n<1?-t[a]*n:-n:P.isPercentage(n)?s=t[a]*parseFloat(n)/100:s=0,i[o]=-(t[o]+s),i}}var pG={qualify:C.isPlainObject,set:function(a,r){var n=r.view,e=r.elem;n.$(e).css(a)}},mG={set:function(a,r){var n=r.view,e=r.elem;n.$(e).html("".concat(a))}},yG={qualify:C.isPlainObject,set:function(a,r){var n=r.view;return"url(#".concat(n.graph.defineFilter(a),")")}},bG={set:function(a){return a!=null&&typeof a=="object"&&a.id?a.id:a}};function hh(o,a,r){var n,e;typeof a=="object"?(n=a.x,e=a.y):(n=a,e=r);var t=Si.parse(o),i=t.bbox();if(i){var s=-i.height/2-i.y,u=-i.width/2-i.x;typeof n=="number"&&(u-=n),typeof e=="number"&&(s-=e),t.translate(u,s)}return t.serialize()}var kP=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},CG=function(a){var r=a.size,n=a.width,e=a.height,t=a.offset,i=a.open,s=kP(a,["size","width","height","offset","open"]);return DP({size:r,width:n,height:e,offset:t},i===!0,!0,void 0,s)},EG=function(a){var r=a.size,n=a.width,e=a.height,t=a.offset,i=a.factor,s=kP(a,["size","width","height","offset","factor"]);return DP({size:r,width:n,height:e,offset:t},!1,!1,i,s)};function DP(o,a,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:3/4,e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=o.size||10,i=o.width||t,s=o.height||t,u=new Si,l={};if(a)u.moveTo(i,0).lineTo(0,s/2).lineTo(i,s),l.fill="none";else{if(u.moveTo(0,s/2),u.lineTo(i,0),!r){var c=P.clamp(n,0,1);u.lineTo(i*c,s/2)}u.lineTo(i,s),u.close()}return Object.assign(Object.assign(Object.assign({},l),e),{tagName:"path",d:hh(u.serialize(),{x:o.offset!=null?o.offset:-i/2})})}var wG=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},xG=function(a){var r=a.size,n=a.width,e=a.height,t=a.offset,i=wG(a,["size","width","height","offset"]),s=r||10,u=n||s,l=e||s,c=new Si;return c.moveTo(0,l/2).lineTo(u/2,0).lineTo(u,l/2).lineTo(u/2,l).close(),Object.assign(Object.assign({},i),{tagName:"path",d:hh(c.serialize(),t==null?-u/2:t)})},OG=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},SG=function(a){var r=a.d,n=a.offsetX,e=a.offsetY,t=OG(a,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},t),{tagName:"path",d:hh(r,n,e)})},MG=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},AG=function(a){var r=a.size,n=a.width,e=a.height,t=a.offset,i=MG(a,["size","width","height","offset"]),s=r||10,u=n||s,l=e||s,c=new Si;return c.moveTo(0,0).lineTo(u,l).moveTo(0,l).lineTo(u,0),Object.assign(Object.assign({},i),{tagName:"path",fill:"none",d:hh(c.serialize(),t||-u/2)})},TG=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},PG=function(a){var r=a.width,n=a.height,e=a.offset,t=a.open,i=a.flip,s=TG(a,["width","height","offset","open","flip"]),u=n||6,l=r||10,c=t===!0,f=i===!0,d=Object.assign(Object.assign({},s),{tagName:"path"});f&&(u=-u);var h=new Si;return h.moveTo(0,u).lineTo(l,0),c?d.fill="none":(h.lineTo(l,u),h.close()),d.d=hh(h.serialize(),{x:e||-l/2,y:u/2}),d},IP=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},RP=function(a){var r=a.r,n=IP(a,["r"]),e=r||5;return Object.assign(Object.assign({cx:e},n),{tagName:"circle",r:e})},kG=function(a){var r=a.r,n=IP(a,["r"]),e=r||5,t=new Si;return t.moveTo(e,0).lineTo(e,e*2),t.moveTo(0,e).lineTo(e*2,e),{children:[Object.assign(Object.assign({},RP({r:e})),{fill:"none"}),Object.assign(Object.assign({},n),{tagName:"path",d:hh(t.serialize(),-e)})]}},DG=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},IG=function(a){var r=a.rx,n=a.ry,e=DG(a,["rx","ry"]),t=r||5,i=n||5;return Object.assign(Object.assign({cx:t},e),{tagName:"ellipse",rx:t,ry:i})},bd;(function(o){o.presets=q,o.registry=lo.create({type:"marker"}),o.registry.register(o.presets,!0)})(bd||(bd={})),function(o){o.normalize=hh}(bd||(bd={}));var RG=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r};function JO(o){return typeof o=="string"||C.isPlainObject(o)}var NG={qualify:JO,set:function(a,r){var n=r.view,e=r.attrs;return QO("marker-start",a,n,e)}},LG={qualify:JO,set:function(a,r){var n=r.view,e=r.attrs;return QO("marker-end",a,n,e,{transform:"rotate(180)"})}},jG={qualify:JO,set:function(a,r){var n=r.view,e=r.attrs;return QO("marker-mid",a,n,e)}};function QO(o,a,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=typeof a=="string"?{name:a}:a,i=t.name,s=t.args,u=RG(t,["name","args"]),l=u;if(i&&typeof i=="string"){var c=bd.registry.get(i);if(c)l=c(Object.assign(Object.assign({},u),s));else return bd.registry.onNotFound(i)}var f=Object.assign(Object.assign(Object.assign({},_G(n,o)),e),l);return Object(Qe.a)({},o,"url(#".concat(r.graph.defineMarker(f),")"))}function _G(o,a){var r={},n=o.stroke;typeof n=="string"&&(r.stroke=n,r.fill=n);var e=o.strokeOpacity;if(e==null&&(e=o["stroke-opacity"]),e==null&&(e=o.opacity),e!=null&&(r["stroke-opacity"]=e,r["fill-opacity"]=e),a!=="marker-mid"){var t=parseFloat(o.strokeWidth||o["stroke-width"]);if(Number.isFinite(t)&&t>1){var i=Math.ceil(t/2);r.refX=a==="marker-start"?i:-i}}return r}var e0=function(a,r){var n=r.view;return n.cell.isEdge()},FG={qualify:e0,set:function(a,r){var n,e,t,i,s=r.view,u=a.reverse||!1,l=a.stubs||0,c;if(Number.isFinite(l)&&l!==0)if(u){var b,E,x=s.getConnectionLength()||0;l<0?(b=(x+l)/2,E=-l):(b=l,E=x-l*2);var O=s.getConnection();c=(i=(t=(e=(n=O==null?void 0:O.divideAtLength(b))===null||n===void 0?void 0:n[1])===null||e===void 0?void 0:e.divideAtLength(E))===null||t===void 0?void 0:t[0])===null||i===void 0?void 0:i.serialize()}else{var f;if(l<0){var d=s.getConnectionLength()||0;f=(d+l)/2}else f=l;var h=s.getConnection();if(h){var p=h.divideAtLength(f),m=h.divideAtLength(-f);p&&m&&(c="".concat(p[0].serialize()," ").concat(m[1].serialize()))}}return{d:c||s.getConnectionPathData()}}},NP={qualify:e0,set:d1("getTangentAtLength",{rotate:!0})},BG={qualify:e0,set:d1("getTangentAtLength",{rotate:!1})},LP={qualify:e0,set:d1("getTangentAtRatio",{rotate:!0})},GG={qualify:e0,set:d1("getTangentAtRatio",{rotate:!1})},zG=NP,UG=LP;function d1(o,a){var r={x:1,y:0};return function(n,e){var t,i,s=e.view,u=s[o](Number(n));return u?(i=a.rotate?u.vector().vectorAngle(r):0,t=u.start):(t=s.path.start,i=0),i===0?{transform:"translate(".concat(t.x,",").concat(t.y,"')")}:{transform:"translate(".concat(t.x,",").concat(t.y,"') rotate(").concat(i,")")}}}var Rc;(function(o){function a(r,n,e){return!!(r!=null&&(typeof r=="string"||typeof r.qualify!="function"||N.call(r.qualify,this,n,e)))}o.isValidDefinition=a})(Rc||(Rc={})),function(o){o.presets=Object.assign(Object.assign({},BB),W),o.registry=lo.create({type:"attribute definition"}),o.registry.register(o.presets,!0)}(Rc||(Rc={}));var VG={color:"#aaaaaa",thickness:1,markup:"rect",update:function(a,r){var n=r.thickness*r.sx,e=r.thickness*r.sy;R.attr(a,{width:n,height:e,rx:n,ry:e,fill:r.color})}},HG={color:"#aaaaaa",thickness:1,markup:"rect",update:function(a,r){var n=r.sx<=1?r.thickness*r.sx:r.thickness;R.attr(a,{width:n,height:n,rx:n,ry:n,fill:r.color})}},WG={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(a,r){var n,e=r.width,t=r.height,i=r.thickness;e-i>=0&&t-i>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",R.attr(a,{d:n,stroke:r.color,"stroke-width":r.thickness})}},$G=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(a,r){var n,e=r.width,t=r.height,i=r.thickness;e-i>=0&&t-i>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",R.attr(a,{d:n,stroke:r.color,"stroke-width":r.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(a,r){var n,e=r.factor||1,t=r.width*e,i=r.height*e,s=r.thickness;t-s>=0&&i-s>=0?n=["M",t,0,"H0 M0 0 V0",i].join(" "):n="M 0 0 0 0",r.width=t,r.height=i,R.attr(a,{d:n,stroke:r.color,"stroke-width":r.thickness})}}],Cd=function(){function o(){Object(Ie.a)(this,o),this.patterns={},this.root=mi.create(R.createSvgDocument(),{width:"100%",height:"100%"},[R.createSvgElement("defs")]).node}return Object(pe.a)(o,[{key:"add",value:function(r,n){var e=this.root.childNodes[0];e&&e.appendChild(n),this.patterns[r]=n,mi.create("rect",{width:"100%",height:"100%",fill:"url(#".concat(r,")")}).appendTo(this.root)}},{key:"get",value:function(r){return this.patterns[r]}},{key:"has",value:function(r){return this.patterns[r]!=null}}]),o}();(function(o){o.presets=Z,o.registry=lo.create({type:"grid"}),o.registry.register(o.presets,!0)})(Cd||(Cd={}));function qO(o,a){return o!=null?o:a}function ws(o,a){return o!=null&&Number.isFinite(o)?o:a}function XG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=qO(o.color,"blue"),r=ws(o.width,1),n=ws(o.margin,2),e=ws(o.opacity,1),t=n,i=n+r;return`
    <filter>
      <feFlood flood-color="`.concat(a,'" flood-opacity="').concat(e,`" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="`).concat(i,`" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="`).concat(t,`" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `).trim()}function KG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=qO(o.color,"red"),r=ws(o.blur,0),n=ws(o.width,1),e=ws(o.opacity,1);return`
      <filter>
        <feFlood flood-color="`.concat(a,'" flood-opacity="').concat(e,`" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="`).concat(n,`"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="`).concat(r,`"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `).trim()}function YG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ws(o.x,2),r=o.y!=null&&Number.isFinite(o.y)?[a,o.y]:a;return`
    <filter>
      <feGaussianBlur stdDeviation="`.concat(r,`"/>
    </filter>
  `).trim()}function ZG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ws(o.dx,0),r=ws(o.dy,0),n=qO(o.color,"black"),e=ws(o.blur,4),t=ws(o.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="`.concat(e,'" dx="').concat(a,'" dy="').concat(r,'" flood-color="').concat(n,'" flood-opacity="').concat(t,`" />
       </filter>`).trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="`.concat(e,`" />
         <feOffset dx="`).concat(a,'" dy="').concat(r,`" result="offsetblur" />
         <feFlood flood-color="`).concat(n,`" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="`).concat(t,`" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`).trim()}function JG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ws(o.amount,1),r=.2126+.7874*(1-a),n=.7152-.7152*(1-a),e=.0722-.0722*(1-a),t=.2126-.2126*(1-a),i=.7152+.2848*(1-a),s=.0722-.0722*(1-a),u=.2126-.2126*(1-a),l=.0722+.9278*(1-a);return`
    <filter>
      <feColorMatrix type="matrix" values="`.concat(r," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(i," ").concat(s," 0 0 ").concat(u," ").concat(n," ").concat(l,` 0 0 0 0 0 1 0"/>
    </filter>
  `).trim()}function QG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ws(o.amount,1),r=.393+.607*(1-a),n=.769-.769*(1-a),e=.189-.189*(1-a),t=.349-.349*(1-a),i=.686+.314*(1-a),s=.168-.168*(1-a),u=.272-.272*(1-a),l=.534-.534*(1-a),c=.131+.869*(1-a);return`
      <filter>
        <feColorMatrix type="matrix" values="`.concat(r," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(i," ").concat(s," 0 0 ").concat(u," ").concat(l," ").concat(c,` 0 0 0 0 0 1 0"/>
      </filter>
    `).trim()}function qG(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ws(o.amount,1);return`
      <filter>
        <feColorMatrix type="saturate" values="`.concat(1-a,`"/>
      </filter>
    `).trim()}function e6(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ws(o.angle,0);return`
      <filter>
        <feColorMatrix type="hueRotate" values="`.concat(a,`"/>
      </filter>
    `).trim()}function t6(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ws(o.amount,1),r=1-a;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="`.concat(a," ").concat(r,`"/>
          <feFuncG type="table" tableValues="`).concat(a," ").concat(r,`"/>
          <feFuncB type="table" tableValues="`).concat(a," ").concat(r,`"/>
        </feComponentTransfer>
      </filter>
    `).trim()}function n6(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ws(o.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(a,`"/>
        <feFuncG type="linear" slope="`).concat(a,`"/>
        <feFuncB type="linear" slope="`).concat(a,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}function r6(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=ws(o.amount,1),r=.5-a/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(a,'" intercept="').concat(r,`"/>
        <feFuncG type="linear" slope="`).concat(a,'" intercept="').concat(r,`"/>
        <feFuncB type="linear" slope="`).concat(a,'" intercept="').concat(r,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}var Mv;(function(o){o.presets=X,o.registry=lo.create({type:"filter"}),o.registry.register(o.presets,!0)})(Mv||(Mv={}));var jP=function(a){var r=document.createElement("canvas"),n=a.width,e=a.height;r.width=n*2,r.height=e;var t=r.getContext("2d");return t.drawImage(a,0,0,n,e),t.translate(2*n,0),t.scale(-1,1),t.drawImage(a,0,0,n,e),r},_P=function(a){var r=document.createElement("canvas"),n=a.width,e=a.height;r.width=n,r.height=e*2;var t=r.getContext("2d");return t.drawImage(a,0,0,n,e),t.translate(0,2*e),t.scale(1,-1),t.drawImage(a,0,0,n,e),r},FP=function(a){var r=document.createElement("canvas"),n=a.width,e=a.height;r.width=2*n,r.height=2*e;var t=r.getContext("2d");return t.drawImage(a,0,0,n,e),t.setTransform(-1,0,0,-1,r.width,r.height),t.drawImage(a,0,0,n,e),t.setTransform(-1,0,0,1,r.width,0),t.drawImage(a,0,0,n,e),t.setTransform(1,0,0,-1,0,r.height),t.drawImage(a,0,0,n,e),r},i6=function(a,r){var n=a.width,e=a.height,t=document.createElement("canvas");t.width=n*3,t.height=e*3;for(var i=t.getContext("2d"),s=r.angle!=null?-r.angle:-20,u=ji.toRad(s),l=t.width/4,c=t.height/4,f=0;f<4;f+=1)for(var d=0;d<4;d+=1)(f+d)%2>0&&(i.setTransform(1,0,0,1,(2*f-1)*l,(2*d-1)*c),i.rotate(u),i.drawImage(a,-n/2,-e/2,n,e));return t},Jg;(function(o){o.presets=Object.assign({},ne),o.presets["flip-x"]=jP,o.presets["flip-y"]=_P,o.presets["flip-xy"]=FP,o.registry=lo.create({type:"background pattern"}),o.registry.register(o.presets,!0)})(Jg||(Jg={}));var ml={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track:function(a){ml.trackable=a}},ko;(function(o){o.snapToGrid=FO,o.normalizeMarker=hh;function a(r){return"".concat(ml.prefixCls,"-").concat(r)}o.prefix=a})(ko||(ko={})),function(o){function a(r,n,e){var t=this,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],s=typeof n.children=="function"?n.children(r):r[n.children||"children"];return e||(e=n.createNode(r),i.push(e)),Array.isArray(s)&&s.forEach(function(u){var l=n.createNode(u),c=n.createEdge(e,l);i.push(l,c),t.makeTree(u,n,l,i)}),i}o.makeTree=a}(ko||(ko={}));var BP=ko.prefix("highlighted"),a6={highlight:function(a,r,n){var e=n&&n.className||BP;R.addClass(r,e)},unhighlight:function(a,r,n){var e=n&&n.className||BP;R.removeClass(r,e)}},GP=ko.prefix("highlight-opacity"),o6={highlight:function(a,r){R.addClass(r,GP)},unhighlight:function(a,r){R.removeClass(r,GP)}},s6={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},u6={highlight:function(a,r,n){var e=vh.getHighlighterId(r,n);if(!vh.hasCache(e)){n=C.defaultsDeep({},n,s6);var t=mi.create(r),i,s;try{i=t.toPathData()}catch(D){s=t.bbox(!0),i=R.rectToPathData(Object.assign(Object.assign({},n),s))}var u=R.createSvgElement("path");if(R.attr(u,Object.assign({d:i,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},n.attrs?R.kebablizeAttrs(n.attrs):null)),a.isEdgeElement(r))R.attr(u,"d",a.getConnectionPathData());else{var l=t.getTransformToElement(a.container),c=n.padding;if(c){s==null&&(s=t.bbox(!0));var f=s.x+s.width/2,d=s.y+s.height/2;s=R.transformRectangle(s,l);var h=Math.max(s.width,1),p=Math.max(s.height,1),m=(h+c)/h,b=(p+c)/p,E=R.createSVGMatrix({a:m,b:0,c:0,d:b,e:f-m*f,f:d-b*d});l=l.multiply(E)}R.transform(u,l)}R.addClass(u,ko.prefix("highlight-stroke"));var x=a.cell,O=function(){return vh.removeHighlighter(e)};x.on("removed",O),x.model&&x.model.on("reseted",O),a.container.appendChild(u),vh.setCache(e,u)}},unhighlight:function(a,r,n){vh.removeHighlighter(vh.getHighlighterId(r,n))}},vh;(function(o){function a(i,s){return R.ensureId(i),i.id+JSON.stringify(s)}o.getHighlighterId=a;var r={};function n(i,s){r[i]=s}o.setCache=n;function e(i){return r[i]!=null}o.hasCache=e;function t(i){var s=r[i];s&&(R.remove(s),delete r[i])}o.removeHighlighter=t})(vh||(vh={}));var Tf;(function(o){function a(r,n){if(typeof n.highlight!="function")throw new Error("Highlighter '".concat(r,"' is missing required `highlight()` method"));if(typeof n.unhighlight!="function")throw new Error("Highlighter '".concat(r,"' is missing required `unhighlight()` method"))}o.check=a})(Tf||(Tf={})),function(o){o.presets=ie,o.registry=lo.create({type:"highlighter"}),o.registry.register(o.presets,!0)}(Tf||(Tf={}));function eS(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new gt(P.normalizePercentage(a.x,o.width),P.normalizePercentage(a.y,o.height))}function tS(o,a,r){return Object.assign({angle:a,position:o.toJSON()},r)}var l6=function(a,r){return a.map(function(n){var e=n.x,t=n.y,i=n.angle;return tS(eS(r,{x:e,y:t}),i||0)})},c6=function(a,r,n){var e=n.start||0,t=n.step||20;return zP(a,r,e,function(i,s){return(i+.5-s/2)*t})},f6=function(a,r,n){var e=n.start||0,t=n.step||360/a.length;return zP(a,r,e,function(i){return i*t})};function zP(o,a,r,n){var e=a.getCenter(),t=a.getTopCenter(),i=a.width/a.height,s=lh.fromRect(a),u=o.length;return o.map(function(l,c){var f=r+n(c,u),d=t.clone().rotate(-f,e).scale(i,1,e),h=l.compensateRotate?-s.tangentTheta(d):0;return(l.dx||l.dy)&&d.translate(l.dx||0,l.dy||0),l.dr&&d.move(e,l.dr),tS(d.round(),h,l)})}var d6=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},h6=function(a,r,n){var e=eS(r,n.start||r.getOrigin()),t=eS(r,n.end||r.getCorner());return t0(a,e,t,n)},v6=function(a,r,n){return t0(a,r.getTopLeft(),r.getBottomLeft(),n)},g6=function(a,r,n){return t0(a,r.getTopRight(),r.getBottomRight(),n)},p6=function(a,r,n){return t0(a,r.getTopLeft(),r.getTopRight(),n)},m6=function(a,r,n){return t0(a,r.getBottomLeft(),r.getBottomRight(),n)};function t0(o,a,r,n){var e=new Ur(a,r),t=o.length;return o.map(function(i,s){var u=i.strict,l=d6(i,["strict"]),c=u||n.strict?(s+1)/(t+1):(s+.5)/t,f=e.pointAt(c);return(l.dx||l.dy)&&f.translate(l.dx||0,l.dy||0),tS(f.round(),0,l)})}var gh;(function(o){o.presets=te,o.registry=lo.create({type:"port layout"}),o.registry.register(o.presets,!0)})(gh||(gh={}));var y6={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function ph(o,a){var r=a||{},n=r.x,e=r.y,t=r.angle,i=r.attrs;return C.defaultsDeep({},{angle:t,attrs:i,position:{x:n,y:e}},o,y6)}var b6=function(a,r,n){return ph({position:r.getTopLeft()},n)},C6=function(a,r,n){return ph({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n)},E6=function(a,r,n){return ph({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n)},w6=function(a,r,n){return ph({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n)},x6=function(a,r,n){return ph({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n)},O6=function(a,r,n){return UP(a,r,!1,n)},S6=function(a,r,n){return UP(a,r,!0,n)},M6=function(a,r,n){return VP(a,r,!1,n)},A6=function(a,r,n){return VP(a,r,!0,n)};function UP(o,a,r,n){var e=n.offset!=null?n.offset:15,t=a.getCenter().theta(o),i=HP(a),s,u,l,c,f=0;return t<i[1]||t>i[2]?(s=".3em",u=e,l=0,c="start"):t<i[0]?(s="0",u=0,l=-e,r?(f=-90,c="start"):c="middle"):t<i[3]?(s=".3em",u=-e,l=0,c="end"):(s=".6em",u=0,l=e,r?(f=90,c="start"):c="middle"),ph({position:{x:Math.round(u),y:Math.round(l)},angle:f,attrs:{".":{y:s,"text-anchor":c}}},n)}function VP(o,a,r,n){var e=n.offset!=null?n.offset:15,t=a.getCenter().theta(o),i=HP(a),s,u,l,c,f=0;return t<i[1]||t>i[2]?(s=".3em",u=-e,l=0,c="end"):t<i[0]?(s=".6em",u=0,l=e,r?(f=90,c="start"):c="middle"):t<i[3]?(s=".3em",u=e,l=0,c="start"):(s="0em",u=0,l=-e,r?(f=-90,c="start"):c="middle"),ph({position:{x:Math.round(u),y:Math.round(l)},angle:f,attrs:{".":{y:s,"text-anchor":c}}},n)}function HP(o){var a=o.getCenter(),r=a.theta(o.getTopLeft()),n=a.theta(o.getBottomLeft()),e=a.theta(o.getBottomRight()),t=a.theta(o.getTopRight());return[r,t,e,n]}var T6=function(a,r,n){return WP(a.diff(r.getCenter()),!1,n)},P6=function(a,r,n){return WP(a.diff(r.getCenter()),!0,n)};function WP(o,a,r){var n=r.offset!=null?r.offset:20,e=new gt(0,0),t=-o.theta(e),i=o.clone().move(e,n).diff(o).round(),s=".3em",u,l=t;return(t+90)%180==0?(u=a?"end":"middle",!a&&t===-270&&(s="0em")):t>-270&&t<-90?(u="start",l=t-180):u="end",ph({position:i.round().toJSON(),angle:a?l:0,attrs:{".":{y:s,"text-anchor":u}}},r)}var Av;(function(o){o.presets=ce,o.registry=lo.create({type:"port label layout"}),o.registry.register(o.presets,!0)})(Av||(Av={}));var Co=v("tS8v"),h1=function(){function o(a,r,n,e){if(Object(Ie.a)(this,o),a==null)return this.set(255,255,255,1);if(typeof a=="number")return this.set(a,r,n,e);if(typeof a=="string")return o.fromString(a)||this;if(Array.isArray(a))return this.set(a);this.set(a.r,a.g,a.b,a.a==null?1:a.a)}return Object(pe.a)(o,[{key:"blend",value:function(r,n,e){this.set(r.r+(n.r-r.r)*e,r.g+(n.g-r.g)*e,r.b+(n.b-r.b)*e,r.a+(n.a-r.a)*e)}},{key:"lighten",value:function(r){var n=o.lighten(this.toArray(),r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}},{key:"darken",value:function(r){this.lighten(-r)}},{key:"set",value:function(r,n,e,t){var i=Array.isArray(r)?r[0]:r,s=Array.isArray(r)?r[1]:n,u=Array.isArray(r)?r[2]:e,l=Array.isArray(r)?r[3]:t;return this.r=Math.round(P.clamp(i,0,255)),this.g=Math.round(P.clamp(s,0,255)),this.b=Math.round(P.clamp(u,0,255)),this.a=l==null?1:P.clamp(l,0,1),this}},{key:"toHex",value:function(){var r=this,n=["r","g","b"].map(function(e){var t=r[e].toString(16);return t.length<2?"0".concat(t):t});return"#".concat(n.join(""))}},{key:"toRGBA",value:function(){return this.toArray()}},{key:"toHSLA",value:function(){return o.rgba2hsla(this.r,this.g,this.b,this.a)}},{key:"toCSS",value:function(r){var n="".concat(this.r,",").concat(this.g,",").concat(this.b,",");return r?"rgb(".concat(n,")"):"rgba(".concat(n,",").concat(this.a,")")}},{key:"toGrey",value:function(){return o.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toString",value:function(){return this.toCSS()}}]),o}();(function(o){function a(O){return new o(O)}o.fromArray=a;function r(O){return new o([].concat(Object(ot.a)(p(O)),[1]))}o.fromHex=r;function n(O){var D=O.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(D){var I=D[1].split(/\s*,\s*/).map(function(F){return parseInt(F,10)});return new o(I)}return null}o.fromRGBA=n;function e(O,D,I){I<0&&++I,I>1&&--I;var F=6*I;return F<1?O+(D-O)*F:2*I<1?D:3*I<2?O+(D-O)*(2/3-I)*6:O}function t(O){var D=O.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(D){var I=D[2].split(/\s*,\s*/),F=(parseFloat(I[0])%360+360)%360/360,H=parseFloat(I[1])/100,$=parseFloat(I[2])/100,se=I[3]==null?1:parseInt(I[3],10);return new o(l(F,H,$,se))}return null}o.fromHSLA=t;function i(O){if(O.startsWith("#"))return r(O);if(O.startsWith("rgb"))return n(O);var D=o.named[O];return D?r(D):t(O)}o.fromString=i;function s(O,D){return o.fromArray([O,O,O,D])}o.makeGrey=s;function u(O,D,I,F){var H=Array.isArray(O)?O[0]:O,$=Array.isArray(O)?O[1]:D,se=Array.isArray(O)?O[2]:I,de=Array.isArray(O)?O[3]:F,Ee=Math.max(H,$,se),Oe=Math.min(H,$,se),$e=(Ee+Oe)/2,tt=0,Le=0;if(Oe!==Ee){var it=Ee-Oe;switch(Le=$e>.5?it/(2-Ee-Oe):it/(Ee+Oe),Ee){case H:tt=($-se)/it+($<se?6:0);break;case $:tt=(se-H)/it+2;break;case se:tt=(H-$)/it+4;break;default:break}tt/=6}return[tt,Le,$e,de==null?1:de]}o.rgba2hsla=u;function l(O,D,I,F){var H=Array.isArray(O)?O[0]:O,$=Array.isArray(O)?O[1]:D,se=Array.isArray(O)?O[2]:I,de=Array.isArray(O)?O[3]:F,Ee=se<=.5?se*($+1):se+$-se*$,Oe=2*se-Ee;return[e(Oe,Ee,H+1/3)*256,e(Oe,Ee,H)*256,e(Oe,Ee,H-1/3)*256,de==null?1:de]}o.hsla2rgba=l;function c(O){return new o(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),O?void 0:parseFloat(Math.random().toFixed(2)))}o.random=c;function f(){for(var O="0123456789ABCDEF",D="#",I=0;I<6;I+=1)D+=O[Math.floor(Math.random()*16)];return D}o.randomHex=f;function d(O){return c(O).toString()}o.randomRGBA=d;function h(O,D){if(typeof O=="string"){var I=O[0]==="#",F=p(O),H=Object(Xe.a)(F,3),$=H[0],se=H[1],de=H[2];return D?$*.299+se*.587+de*.114>186?"#000000":"#ffffff":"".concat(I?"#":"").concat(m(255-$,255-se,255-de))}var Ee=O[0],Oe=O[1],$e=O[2],tt=O[3];return D?Ee*.299+Oe*.587+$e*.114>186?[0,0,0,tt]:[255,255,255,tt]:[255-Ee,255-Oe,255-$e,tt]}o.invert=h;function p(O){var D=O.indexOf("#")===0?O:"#".concat(O),I=Number("0x".concat(D.substr(1)));if(!(D.length===4||D.length===7)||Number.isNaN(I))throw new Error("Invalid hex color.");var F=D.length===4?4:8,H=(1<<F)-1,$=["b","g","r"].map(function(){var se=I&H;return I>>=F,F===4?17*se:se});return[$[2],$[1],$[0]]}function m(O,D,I){var F=function($){return $.length<2?"0".concat($):$};return"".concat(F(O.toString(16))).concat(F(D.toString(16))).concat(F(I.toString(16)))}function b(O,D){return x(O,D)}o.lighten=b;function E(O,D){return x(O,-D)}o.darken=E;function x(O,D){if(typeof O=="string"){var I=O[0]==="#",F=parseInt(I?O.substr(1):O,16),H=P.clamp((F>>16)+D,0,255),$=P.clamp((F>>8&255)+D,0,255),se=P.clamp((F&255)+D,0,255);return"".concat(I?"#":"").concat((se|$<<8|H<<16).toString(16))}var de=m(O[0],O[1],O[2]),Ee=p(x(de,D));return[Ee[0],Ee[1],Ee[2],O[3]]}})(h1||(h1={})),function(o){o.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(h1||(h1={}));var k6=function(){function o(){Object(Ie.a)(this,o),this.listeners={}}return Object(pe.a)(o,[{key:"on",value:function(r,n,e){if(n==null)return this;this.listeners[r]||(this.listeners[r]=[]);var t=this.listeners[r];return t.push(n,e),this}},{key:"once",value:function(r,n,e){var t=this,i=function s(){t.off(r,s);for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return n0.call([n,e],l)};return this.on(r,i,this)}},{key:"off",value:function(r,n,e){if(!(r||n||e))return this.listeners={},this;var t=this.listeners,i=r?[r]:Object.keys(t);return i.forEach(function(s){var u=t[s];if(!!u){if(!(n||e)){delete t[s];return}for(var l=u.length-2;l>=0;l-=2)n&&u[l]!==n||e&&u[l+1]!==e||u.splice(l,2)}}),this}},{key:"trigger",value:function(r){for(var n=!0,e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];if(r!=="*"){var s=this.listeners[r];s!=null&&(n=n0.call(Object(ot.a)(s),t))}var u=this.listeners["*"];return u!=null?N.toAsyncBoolean([n,n0.call(Object(ot.a)(u),[r].concat(t))]):n}},{key:"emit",value:function(r){for(var n=arguments.length,e=new Array(n>1?n-1:0),t=1;t<n;t++)e[t-1]=arguments[t];return this.trigger.apply(this,[r].concat(e))}}]),o}(),n0;(function(o){function a(r,n){for(var e=[],t=0;t<r.length;t+=2){var i=r[t],s=r[t+1],u=Array.isArray(n)?n:[n],l=N.apply(i,s,u);e.push(l)}return N.toAsyncBoolean(e)}o.call=a})(n0||(n0={}));var Nc=function(){function o(){Object(Ie.a)(this,o)}return Object(pe.a)(o,[{key:"disposed",get:function(){return this._disposed===!0}},{key:"dispose",value:function(){this._disposed=!0}}]),o}();(function(o){function a(){return function(r,n,e){var t=e.value,i=r.__proto__;e.value=function(){this.disposed||(t.call(this),i.dispose.call(this))}}}o.dispose=a})(Nc||(Nc={}));var $Q=function(){function o(a){Object(Ie.a)(this,o),this.callback=a}return Object(pe.a)(o,[{key:"disposed",get:function(){return!this.callback}},{key:"dispose",value:function(){if(!!this.callback){var r=this.callback;this.callback=null,r()}}}]),o}(),$P=function(){function o(){Object(Ie.a)(this,o),this.isDisposed=!1,this.items=new Set}return Object(pe.a)(o,[{key:"disposed",get:function(){return this.isDisposed}},{key:"dispose",value:function(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(function(r){r.dispose()}),this.items.clear())}},{key:"contains",value:function(r){return this.items.has(r)}},{key:"add",value:function(r){this.items.add(r)}},{key:"remove",value:function(r){this.items.delete(r)}},{key:"clear",value:function(){this.items.clear()}}]),o}();(function(o){function a(r){var n=new o;return r.forEach(function(e){n.add(e)}),n}o.from=a})($P||($P={}));var Ls=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r)}(k6);(function(o){o.dispose=Nc.dispose})(Ls||(Ls={})),C.applyMixins(Ls,Nc);var XP=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"disabled",get:function(){return this._disabled===!0}},{key:"enable",value:function(){delete this._disabled}},{key:"disable",value:function(){this._disabled=!0}}]),r}(Ls),D6=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},v1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.call(this),n.clear(),n}return Object(pe.a)(r,[{key:"clear",value:function(){this.map=new WeakMap,this.arr=[]}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){this.map.set(e,t),this.arr.push(e)}},{key:"delete",value:function(e){var t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);var i=this.map.get(e);return this.map.delete(e),i}},{key:"each",value:function(e){var t=this;this.arr.forEach(function(i){var s=t.map.get(i);e(s,i)})}},{key:"dispose",value:function(){this.clear()}}]),r}(Nc);D6([Nc.dispose()],v1.prototype,"dispose",null);var nS=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(Ie.a)(this,o),this.comparator=a.comparator||o.defaultComparator,this.index={},this.data=a.data||[],this.heapify()}return Object(pe.a)(o,[{key:"isEmpty",value:function(){return this.data.length===0}},{key:"insert",value:function(r,n,e){var t={priority:r,value:n},i=this.data.length;return e&&(t.id=e,this.index[e]=i),this.data.push(t),this.bubbleUp(i),this}},{key:"peek",value:function(){return this.data[0]?this.data[0].value:null}},{key:"peekPriority",value:function(){return this.data[0]?this.data[0].priority:null}},{key:"updatePriority",value:function(r,n){var e=this.index[r];if(typeof e=="undefined")throw new Error("Node with id '".concat(r,"' was not found in the heap."));var t=this.data,i=t[e].priority,s=this.comparator(n,i);s<0?(t[e].priority=n,this.bubbleUp(e)):s>0&&(t[e].priority=n,this.bubbleDown(e))}},{key:"remove",value:function(){var r=this.data,n=r[0],e=r.pop();return n.id&&delete this.index[n.id],r.length>0&&(r[0]=e,e.id&&(this.index[e.id]=0),this.bubbleDown(0)),n?n.value:null}},{key:"heapify",value:function(){for(var r=0;r<this.data.length;r+=1)this.bubbleUp(r)}},{key:"bubbleUp",value:function(r){for(var n=this.data,e,t,i=r;i>0&&(t=i-1>>>1,this.comparator(n[i].priority,n[t].priority)<0);){e=n[t],n[t]=n[i];var s=n[i].id;s!=null&&(this.index[s]=t),n[i]=e,s=n[i].id,s!=null&&(this.index[s]=i),i=t}}},{key:"bubbleDown",value:function(r){for(var n=this.data,e=n.length-1,t=r;;){var i=(t<<1)+1,s=i+1,u=t;if(i<=e&&this.comparator(n[i].priority,n[u].priority)<0&&(u=i),s<=e&&this.comparator(n[s].priority,n[u].priority)<0&&(u=s),u!==t){var l=n[u];n[u]=n[t];var c=n[t].id;c!=null&&(this.index[c]=u),n[t]=l,c=n[t].id,c!=null&&(this.index[c]=t),t=u}else break}}}]),o}();(function(o){o.defaultComparator=function(a,r){return a-r}})(nS||(nS={}));var rS;(function(o){function a(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(p,m){return 1},t={},i={},s={},u=new nS;for(t[n]=0,Object.keys(r).forEach(function(p){p!==n&&(t[p]=Infinity),u.insert(t[p],p,p)});!u.isEmpty();){var l=u.remove();s[l]=!0;for(var c=r[l]||[],f=0;f<c.length;f+=1){var d=c[f];if(!s[d]){var h=t[l]+e(l,d);h<t[d]&&(t[d]=h,i[d]=l,u.updatePriority(d,h))}}}return i}o.run=a})(rS||(rS={}));var Tv;(function(o){o.linear=function(a){return a},o.quad=function(a){return a*a},o.cubic=function(a){return a*a*a},o.inout=function(a){if(a<=0)return 0;if(a>=1)return 1;var r=a*a,n=r*a;return 4*(a<.5?n:3*(a-r)+n-.75)},o.exponential=function(a){return Math.pow(2,10*(a-1))},o.bounce=function(a){for(var r=0,n=1;;r+=n,n/=2)if(a>=(7-4*r)/11){var e=(11-6*r-11*a)/4;return-e*e+n*n}}})(Tv||(Tv={})),function(o){o.decorators={reverse:function(r){return function(n){return 1-r(1-n)}},reflect:function(r){return function(n){return .5*(n<.5?r(2*n):2-r(2-2*n))}},clamp:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return function(t){var i=r(t);return i<n?n:i>e?e:i}},back:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.70158;return function(n){return n*n*((r+1)*n-r)}},elastic:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.5;return function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*r/3*n)}}}}(Tv||(Tv={})),function(o){function a(Le){return-1*Math.cos(Le*(Math.PI/2))+1}o.easeInSine=a;function r(Le){return Math.sin(Le*(Math.PI/2))}o.easeOutSine=r;function n(Le){return-.5*(Math.cos(Math.PI*Le)-1)}o.easeInOutSine=n;function e(Le){return Le*Le}o.easeInQuad=e;function t(Le){return Le*(2-Le)}o.easeOutQuad=t;function i(Le){return Le<.5?2*Le*Le:-1+(4-2*Le)*Le}o.easeInOutQuad=i;function s(Le){return Le*Le*Le}o.easeInCubic=s;function u(Le){var it=Le-1;return it*it*it+1}o.easeOutCubic=u;function l(Le){return Le<.5?4*Le*Le*Le:(Le-1)*(2*Le-2)*(2*Le-2)+1}o.easeInOutCubic=l;function c(Le){return Le*Le*Le*Le}o.easeInQuart=c;function f(Le){var it=Le-1;return 1-it*it*it*it}o.easeOutQuart=f;function d(Le){var it=Le-1;return Le<.5?8*Le*Le*Le*Le:1-8*it*it*it*it}o.easeInOutQuart=d;function h(Le){return Le*Le*Le*Le*Le}o.easeInQuint=h;function p(Le){var it=Le-1;return 1+it*it*it*it*it}o.easeOutQuint=p;function m(Le){var it=Le-1;return Le<.5?16*Le*Le*Le*Le*Le:1+16*it*it*it*it*it}o.easeInOutQuint=m;function b(Le){return Le===0?0:Math.pow(2,10*(Le-1))}o.easeInExpo=b;function E(Le){return Le===1?1:-Math.pow(2,-10*Le)+1}o.easeOutExpo=E;function x(Le){if(Le===0||Le===1)return Le;var it=Le*2,It=it-1;return it<1?.5*Math.pow(2,10*It):.5*(-Math.pow(2,-10*It)+2)}o.easeInOutExpo=x;function O(Le){var it=Le/1;return-1*(Math.sqrt(1-it*Le)-1)}o.easeInCirc=O;function D(Le){var it=Le-1;return Math.sqrt(1-it*it)}o.easeOutCirc=D;function I(Le){var it=Le*2,It=it-2;return it<1?-.5*(Math.sqrt(1-it*it)-1):.5*(Math.sqrt(1-It*It)+1)}o.easeInOutCirc=I;function F(Le){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158;return Le*Le*((it+1)*Le-it)}o.easeInBack=F;function H(Le){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,It=Le/1-1;return It*It*((it+1)*It+it)+1}o.easeOutBack=H;function $(Le){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,It=Le*2,tn=It-2,bn=it*1.525;return It<1?.5*It*It*((bn+1)*It-bn):.5*(tn*tn*((bn+1)*tn+bn)+2)}o.easeInOutBack=$;function se(Le){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7;if(Le===0||Le===1)return Le;var It=Le/1,tn=It-1,bn=1-it,dn=bn/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*tn)*Math.sin((tn-dn)*(2*Math.PI)/bn))}o.easeInElastic=se;function de(Le){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7,It=1-it,tn=Le*2;if(Le===0||Le===1)return Le;var bn=It/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*tn)*Math.sin((tn-bn)*(2*Math.PI)/It)+1}o.easeOutElastic=de;function Ee(Le){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.65,It=1-it;if(Le===0||Le===1)return Le;var tn=Le*2,bn=tn-1,dn=It/(2*Math.PI)*Math.asin(1);return tn<1?-.5*(Math.pow(2,10*bn)*Math.sin((bn-dn)*(2*Math.PI)/It)):Math.pow(2,-10*bn)*Math.sin((bn-dn)*(2*Math.PI)/It)*.5+1}o.easeInOutElastic=Ee;function Oe(Le){var it=Le/1;if(it<1/2.75)return 7.5625*it*it;if(it<2/2.75){var It=it-1.5/2.75;return 7.5625*It*It+.75}if(it<2.5/2.75){var tn=it-2.25/2.75;return 7.5625*tn*tn+.9375}{var bn=it-2.625/2.75;return 7.5625*bn*bn+.984375}}o.easeOutBounce=Oe;function $e(Le){return 1-Oe(1-Le)}o.easeInBounce=$e;function tt(Le){return Le<.5?$e(Le*2)*.5:Oe(Le*2-1)*.5+.5}o.easeInOutBounce=tt}(Tv||(Tv={}));var Pv;(function(o){o.number=function(a,r){var n=r-a;return function(e){return a+n*e}},o.object=function(a,r){var n=Object.keys(a);return function(e){for(var t={},i=n.length-1;i!==-1;i-=1){var s=n[i];t[s]=a[s]+(r[s]-a[s])*e}return t}},o.unit=function(a,r){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,e=n.exec(a),t=n.exec(r),i=t?t[1]:"",s=e?+e[1]:0,u=t?+t[1]:0,l=i.indexOf("."),c=l>0?i[1].length-l-1:0,f=u-s,d=e?e[2]:"";return function(h){return(s+f*h).toFixed(c)+d}},o.color=function(a,r){var n=parseInt(a.slice(1),16),e=parseInt(r.slice(1),16),t=n&255,i=(e&255)-t,s=n&65280,u=(e&65280)-s,l=n&16711680,c=(e&16711680)-l;return function(f){var d=t+i*f&255,h=s+u*f&65280,p=l+c*f&16711680;return"#".concat((1<<24|d|h|p).toString(16).slice(1))}}})(Pv||(Pv={}));var KP;(function(o){var a="".concat(ml.prefixCls,".storage");function r(f,d,h){var p=d.id||_.uniqueId("doc-"),m=u(f);m.keys.push(p),i(l(f,p),d),i(c(f),m),t(h,null,Object.assign(Object.assign({},d),{id:p}))}o.insert=r;function n(f,d,h){var p=u(f),m=[];if(d==null)p.keys.forEach(function(E){var x=s(l(f,E));x?m.push(x):t(h,new Error("No document found for an ID '".concat(E,"' from index.")))}),t(h,null,m);else if(d.id){var b=s(l(f,d.id));t(h,null,b?[b]:[])}else t(h,null,[])}o.find=n;function e(f,d,h){var p=u(f);if(d==null)p.keys.forEach(function(b){localStorage.removeItem(l(f,b))}),localStorage.removeItem(c(f)),t(h,null);else if(d.id){var m=p.keys.indexOf(d.id);m>=0&&p.keys.splice(m,1),localStorage.removeItem(l(f,d.id)),i(c(f),p),t(h,null)}}o.remove=e;function t(f,d,h){f&&N.defer(function(){f(d,h)})}function i(f,d){localStorage.setItem(f,JSON.stringify(d))}function s(f){var d=localStorage.getItem(f);return d?JSON.parse(d):null}function u(f){var d=s(c(f));return d?(d.keys==null&&(d.keys=[]),d):{keys:[]}}function l(f,d){return"".concat(a,".").concat(f,".docs.").concat(d)}function c(f){return"".concat(a,".").concat(f,".index")}})(KP||(KP={}));var oa=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.call(this),n.cid=iS.uniqueId(),r.views[n.cid]=Object(Co.a)(n),n}return Object(pe.a)(r,[{key:"priority",get:function(){return 2}},{key:"confirmUpdate",value:function(e,t){return 0}},{key:"$",value:function(e){return r.$(e)}},{key:"empty",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).empty(),this}},{key:"unmount",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).remove(),this}},{key:"remove",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete r.views[this.cid]),this.unmount(e),this}},{key:"onRemove",value:function(){}},{key:"setClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;t.classList.value=Array.isArray(e)?e.join(" "):e}},{key:"addClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}},{key:"removeClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}},{key:"setStyle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).css(e),this}},{key:"setAttrs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return e!=null&&t!=null&&(t instanceof SVGElement?R.attr(t,e):this.$(t).attr(e)),this}},{key:"findAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,i=t;i&&i.nodeType===1;){var s=i.getAttribute(e);if(s!=null)return s;if(i===this.container)return null;i=i.parentNode}return null}},{key:"find",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors;return r.find(e,t,i).elems}},{key:"findOne",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors,s=this.find(e,t,i);return s.length>0?s[0]:null}},{key:"findByAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,i=t;i&&i.getAttribute;){var s=i.getAttribute(e);if((s!=null||i===this.container)&&s!=="false")return i;i=i.parentNode}return null}},{key:"getSelector",value:function(e,t){var i;if(e===this.container)return typeof t=="string"&&(i="> ".concat(t)),i;if(e){var s=R.index(e)+1;i="".concat(e.tagName.toLowerCase(),":nth-child(").concat(s,")"),t&&(i+=" > ".concat(t)),i=this.getSelector(e.parentNode,i)}return i}},{key:"prefixClassName",value:function(e){return ko.prefix(e)}},{key:"delegateEvents",value:function(e,t){var i=this;if(e==null)return this;t||this.undelegateEvents();var s=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(function(u){var l=u.match(s);if(l!=null){var c=i.getEventHandler(e[u]);typeof c=="function"&&i.delegateEvent(l[1],l[2],c)}}),this}},{key:"undelegateEvents",value:function(){return this.$(this.container).off(this.getEventNamespace()),this}},{key:"delegateDocumentEvents",value:function(e,t){return this.addEventListeners(document,e,t),this}},{key:"undelegateDocumentEvents",value:function(){return this.removeEventListeners(document),this}},{key:"delegateEvent",value:function(e,t,i){return this.$(this.container).on(e+this.getEventNamespace(),t,i),this}},{key:"undelegateEvent",value:function(e,t,i){var s=e+this.getEventNamespace();return t==null?this.$(this.container).off(s):typeof t=="string"?this.$(this.container).off(s,t,i):this.$(this.container).off(s,t),this}},{key:"addEventListeners",value:function(e,t,i){var s=this;if(t==null)return this;var u=this.getEventNamespace(),l=this.$(e);return Object.keys(t).forEach(function(c){var f=s.getEventHandler(t[c]);typeof f=="function"&&l.on(c+u,i,f)}),this}},{key:"removeEventListeners",value:function(e){return e!=null&&this.$(e).off(this.getEventNamespace()),this}},{key:"getEventNamespace",value:function(){return".".concat(ml.prefixCls,"-event-").concat(this.cid)}},{key:"getEventHandler",value:function(e){var t=this,i;if(typeof e=="string"){var s=this[e];typeof s=="function"&&(i=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return s.call.apply(s,[t].concat(c))})}else i=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.call.apply(e,[t].concat(c))};return i}},{key:"getEventTarget",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.target,s=e.type,u=e.clientX,l=u===void 0?0:u,c=e.clientY,f=c===void 0?0:c;return t.fromPoint||s==="touchmove"||s==="touchend"?document.elementFromPoint(l,f):i}},{key:"stopPropagation",value:function(e){return this.setEventData(e,{propagationStopped:!0}),this}},{key:"isPropagationStopped",value:function(e){return this.getEventData(e).propagationStopped===!0}},{key:"getEventData",value:function(e){return this.eventData(e)}},{key:"setEventData",value:function(e,t){return this.eventData(e,t)}},{key:"eventData",value:function(e,t){if(e==null)throw new TypeError("Event object required");var i=e.data,s="__".concat(this.cid,"__");return t==null?i==null?{}:i[s]||{}:(i==null&&(i=e.data={}),i[s]==null?i[s]=Object.assign({},t):i[s]=Object.assign(Object.assign({},i[s]),t),i[s])}},{key:"normalizeEvent",value:function(e){return r.normalizeEvent(e)}}]),r}(Ls);(function(o){function a(t){return En()(t)}o.$=a;function r(t,i){return i?R.createSvgElement(t||"g"):R.createElementNS(t||"div")}o.createElement=r;function n(t,i,s){if(!t||t===".")return{elems:[i]};if(s){var u=s[t];if(u)return{elems:Array.isArray(u)?u:[u]}}return ml.useCSSSelector?{isCSSSelector:!0,elems:a(i).find(t).toArray()}:{elems:[]}}o.find=n;function e(t){var i=t,s=t.originalEvent,u=s&&s.changedTouches&&s.changedTouches[0];if(u){for(var l in t)u[l]===void 0&&(u[l]=t[l]);i=u}var c=i.target;if(c){var f=c.correspondingUseElement;f&&(i.target=f)}return i}o.normalizeEvent=e})(oa||(oa={})),function(o){o.views={};function a(r){return o.views[r]||null}o.getView=a}(oa||(oa={}));var iS;(function(o){var a=0;function r(){var n="v".concat(a);return a+=1,n}o.uniqueId=r})(iS||(iS={}));var I6=function(a){return a};function YP(o,a){return a===0?"0%":"".concat(Math.round(o/a*100),"%")}function ZP(o){var a=function(n,e,t,i){return e.isEdgeElement(t)?N6(o,n,e,t,i):R6(o,n,e,t,i)};return a}function R6(o,a,r,n,e){var t=r.cell,i=t.getAngle(),s=r.getUnrotatedBBoxOfElement(n),u=t.getBBox().getCenter(),l=gt.create(e).rotate(i,u),c=l.x-s.x,f=l.y-s.y;return o&&(c=YP(c,s.width),f=YP(f,s.height)),a.anchor={name:"topLeft",args:{dx:c,dy:f,rotate:!0}},a}function N6(o,a,r,n,e){var t=r.getConnection();if(!t)return a;var i=t.closestPointLength(e);if(o){var s=t.length();a.anchor={name:"ratio",args:{ratio:i/s}}}else a.anchor={name:"length",args:{length:i}};return a}var L6=ZP(!0),j6=ZP(!1),kv;(function(o){o.presets=ee,o.registry=lo.create({type:"connection strategy"}),o.registry.register(o.presets,!0)})(kv||(kv={}));var _6=function(){function o(a){Object(Ie.a)(this,o),this.view=a,this.clean()}return Object(pe.a)(o,[{key:"clean",value:function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new v1,this.pathCache={}}},{key:"get",value:function(r){var n=this.elemCache;return n.has(r)||this.elemCache.set(r,{}),this.elemCache.get(r)}},{key:"getData",value:function(r){var n=this.get(r);return n.data||(n.data={}),n.data}},{key:"getMatrix",value:function(r){var n=this.get(r);if(n.matrix==null){var e=this.view.rotatableNode||this.view.container;n.matrix=R.getTransformToElement(r,e)}return R.createSVGMatrix(n.matrix)}},{key:"getShape",value:function(r){var n=this.get(r);return n.shape==null&&(n.shape=R.toGeometryShape(r)),n.shape.clone()}},{key:"getBoundingRect",value:function(r){var n=this.get(r);return n.boundingRect==null&&(n.boundingRect=R.getBBox(r)),n.boundingRect.clone()}}]),o}(),Hi;(function(o){function a(c){return c!=null&&!r(c)}o.isJSONMarkup=a;function r(c){return c!=null&&typeof c=="string"}o.isStringMarkup=r;function n(c){return c==null||r(c)?c:C.cloneDeep(c)}o.clone=n;function e(c){return"".concat(c).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}o.sanitize=e;function t(c){var f=document.createDocumentFragment(),d={},h={},p=e(c),m=_.sanitizeHTML(p,{raw:!0});return m.forEach(function(b){f.appendChild(b)}),{fragment:f,selectors:h,groups:d}}o.parseStringMarkup=t;function i(c){for(var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:R.ns.svg},d=document.createDocumentFragment(),h={},p={},m=[{markup:Array.isArray(c)?c:[c],parent:d,ns:f.ns}],b=function(){var x=m.pop(),O=x.ns||R.ns.svg,D=x.markup,I=x.parent;D.forEach(function(F){var H=F.tagName;if(!H)throw new TypeError("Invalid tagName");F.ns&&(O=F.ns);var $=O===R.ns.svg,se=O?R.createElementNS(H,O):R.createElement(H),de=F.attrs;de&&($?R.attr(se,R.kebablizeAttrs(de)):En()(se).attr(de));var Ee=F.style;Ee&&En()(se).css(Ee);var Oe=F.className;Oe!=null&&se.setAttribute("class",Array.isArray(Oe)?Oe.join(" "):Oe),F.textContent&&(se.textContent=F.textContent);var $e=F.selector;if($e!=null){if(p[$e])throw new TypeError("Selector must be unique");p[$e]=se}if(F.groupSelector){var tt=F.groupSelector;Array.isArray(tt)||(tt=[tt]),tt.forEach(function(it){h[it]||(h[it]=[]),h[it].push(se)})}I.appendChild(se);var Le=F.children;Array.isArray(Le)&&m.push({ns:O,markup:Le,parent:se})})};m.length>0;)b();return Object.keys(h).forEach(function(E){if(p[E])throw new Error("Ambiguous group selector");p[E]=h[E]}),{fragment:d,selectors:p,groups:h}}o.parseJSONMarkup=i;function s(c){return c instanceof SVGElement?R.createSvgElement("g"):R.createElement("div")}function u(c){if(r(c)){var f=mi.createVectors(c),d=f.length;if(d===1)return{elem:f[0].node};if(d>1){var h=s(f[0].node);return f.forEach(function(E){h.appendChild(E.node)}),{elem:h}}return{}}var p=i(c),m=p.fragment,b=null;return m.childNodes.length>1?(b=s(m.firstChild),b.appendChild(m)):b=m.firstChild,{elem:b,selectors:p.selectors}}o.renderMarkup=u;function l(c){for(var f=mi.createVectors(c),d=document.createDocumentFragment(),h=0,p=f.length;h<p;h+=1){var m=f[h].node;d.appendChild(m)}return{fragment:d,selectors:{}}}o.parseLabelStringMarkup=l})(Hi||(Hi={})),function(o){function a(e,t,i){if(e!=null){var s,u=e.tagName.toLowerCase();if(e===t)return typeof i=="string"?s="> ".concat(u," > ").concat(i):s="> ".concat(u),s;var l=e.parentNode;if(l&&l.childNodes.length>1){var c=R.index(e)+1;s="".concat(u,":nth-child(").concat(c,")")}else s=u;return i&&(s+=" > ".concat(i)),a(e.parentNode,t,s)}return i}o.getSelector=a;function r(e,t,i){if(e.nodeName==="#text")return null;var s=null,u=null,l=null,c=!1,f={tagName:e.tagName};if(e.attributes){l={};for(var d=0,h=e.attributes.length;d<h;d+=1){var p=e.attributes[d],m=p.nodeName,b=p.nodeValue;m==="selector"?s=b:m==="groupSelector"?u=b:m==="class"?f.attrs={class:b}:l[m]=b}}return s==null&&(c=!0,s=a(e,t)),e.namespaceURI&&(f.ns=e.namespaceURI),f.ns==null&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(e.tagName)?f.ns=R.ns.xhtml:i&&(f.ns=i)),s&&(f.selector=s),u!=null&&(f.groupSelector=u),{markup:f,attrs:l,isCSSSelector:c}}function n(e){var t=o.sanitize(e),i=R.parseXML(t,{mimeType:"image/svg+xml"}),s=Array.prototype.slice.call(i.childNodes),u={},l=new WeakMap,c=function d(h,p,m){var b=r(h,p,m);if(b==null){var E=l.get(h.parentNode);E&&h.textContent&&(E.textContent=h.textContent)}else{var x=b.markup,O=b.attrs,D=b.isCSSSelector;if(l.set(h,x),x.selector&&O!=null&&(Object.keys(O).length&&(u[x.selector]=O),D&&delete x.selector),h.childNodes&&h.childNodes.length>0)for(var I=0,F=h.childNodes.length;I<F;I+=1){var H=h.childNodes[I],$=d(H,p,x.ns);$&&(x.children==null&&(x.children=[]),x.children.push($))}return x}},f=s.map(function(d){return c(d,d)}).filter(function(d){return d!=null});return{markup:f,attrs:u}}o.xml2json=n}(Hi||(Hi={})),function(o){function a(){return"g"}o.getPortContainerMarkup=a;function r(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}o.getPortMarkup=r;function n(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}o.getPortLabelMarkup=n}(Hi||(Hi={})),function(o){function a(){return o.sanitize(`
    <path class="connection" stroke="black" d="M 0 0 0 0"/>
    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="connection-wrap" d="M 0 0 0 0"/>
    <g class="labels"/>
    <g class="vertices"/>
    <g class="arrowheads"/>
    <g class="tools"/>
  `)}o.getEdgeMarkup=a;function r(){return o.sanitize(`
    <g class="edge-tool">
      <g class="tool-remove" event="edge:remove">
        <circle r="11" />
        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />
        <title>Remove edge.</title>
      </g>
      <g class="tool-options" event="edge:options">
        <circle r="11" transform="translate(25)"/>
        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>
        <title>Edge options.</title>
      </g>
    </g>
  `)}o.getEdgeToolMarkup=r;function n(){return o.sanitize(`
    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">
      <circle class="vertex" data-index="<%= index %>" r="10" />
      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>
      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">
      <title>Remove vertex.</title>
      </path>
    </g>
  `)}o.getEdgeVertexMarkup=n;function e(){return o.sanitize(`
    <g class="arrowhead-group arrowhead-group-<%= end %>">
      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />
    </g>
  `)}o.getEdgeArrowheadMarkup=e}(Hi||(Hi={})),function(o){function a(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return{tagName:"foreignObject",selector:"fo",children:[{ns:R.ns.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:R.ns.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:r?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}o.getForeignObjectMarkup=a}(Hi||(Hi={}));var g1=function(){function o(a){Object(Ie.a)(this,o),this.view=a}return Object(pe.a)(o,[{key:"cell",get:function(){return this.view.cell}},{key:"getDefinition",value:function(r){return this.cell.getAttrDefinition(r)}},{key:"processAttrs",value:function(r,n){var e=this,t,i,s,u,l,c=[];return Object.keys(n).forEach(function(f){var d=n[f],h=e.getDefinition(f),p=N.call(Rc.isValidDefinition,e.view,h,d,{elem:r,attrs:n,cell:e.cell,view:e.view});if(h&&p)typeof h=="string"?(t==null&&(t={}),t[h]=d):d!==null&&c.push({name:f,definition:h});else{t==null&&(t={});var m=R.CASE_SENSITIVE_ATTR.includes(f)?f:_.kebabCase(f);t[m]=d}}),c.forEach(function(f){var d=f.name,h=f.definition,p=n[d],m=h;typeof m.set=="function"&&(!R.isHTMLElement(r)&&o.DELAY_ATTRS.includes(d)?(l==null&&(l={}),l[d]=p):(i==null&&(i={}),i[d]=p));var b=h;typeof b.offset=="function"&&(s==null&&(s={}),s[d]=p);var E=h;typeof E.position=="function"&&(u==null&&(u={}),u[d]=p)}),{raw:n,normal:t,set:i,offset:s,position:u,delay:l}}},{key:"mergeProcessedAttrs",value:function(r,n){r.set=Object.assign(Object.assign({},r.set),n.set),r.position=Object.assign(Object.assign({},r.position),n.position),r.offset=Object.assign(Object.assign({},r.offset),n.offset);var e=r.normal&&r.normal.transform;e!=null&&n.normal&&(n.normal.transform=e),r.normal=n.normal}},{key:"findAttrs",value:function(r,n,e,t){var i=[],s=new v1;return Object.keys(r).forEach(function(u){var l=r[u];if(!!C.isPlainObject(l)){var c=oa.find(u,n,t),f=c.isCSSSelector,d=c.elems;e[u]=d;for(var h=0,p=d.length;h<p;h+=1){var m=d[h],b=t&&t[u]===m,E=s.get(m);if(E){E.array||(i.push(m),E.array=!0,E.attrs=[E.attrs],E.priority=[E.priority]);var x=E.attrs,O=E.priority;if(b)x.unshift(l),O.unshift(-1);else{var D=B.sortedIndex(O,f?-1:p);x.splice(D,0,l),O.splice(D,0,p)}}else s.set(m,{elem:m,attrs:l,priority:b?-1:p,array:!1})}}}),i.forEach(function(u){var l=s.get(u),c=l.attrs;l.attrs=c.reduceRight(function(f,d){return C.merge(f,d)},{})}),s}},{key:"updateRelativeAttrs",value:function(r,n,e,t){var i=this,s=n.raw||{},u=n.normal||{},l=n.set,c=n.position,f=n.offset,d=n.delay,h=function(){return{elem:r,cell:i.cell,view:i.view,attrs:s,refBBox:e.clone()}};if(l!=null&&Object.keys(l).forEach(function(de){var Ee=l[de],Oe=i.getDefinition(de);if(Oe!=null){var $e=N.call(Oe.set,i.view,Ee,h());typeof $e=="object"?u=Object.assign(Object.assign({},u),$e):$e!=null&&(u[de]=$e)}}),R.isHTMLElement(r)){this.view.setAttrs(u,r);return}var p=u.transform,m=p?"".concat(p):null,b=R.transformStringToMatrix(m),E=new gt(b.e,b.f);p&&(delete u.transform,b.e=0,b.f=0);var x=1,O=1;if(c||f){var D=this.view.getScaleOfElement(r,t.scalableNode);x=D.sx,O=D.sy}var I=!1;c!=null&&Object.keys(c).forEach(function(de){var Ee=c[de],Oe=i.getDefinition(de);if(Oe!=null){var $e=N.call(Oe.position,i.view,Ee,h());$e!=null&&(I=!0,E.translate(gt.create($e).scale(x,O)))}}),this.view.setAttrs(u,r);var F=!1;if(f!=null){var H=this.view.getBoundingRectOfElement(r);if(H.width>0&&H.height>0){var $=R.transformRectangle(H,b).scale(1/x,1/O);Object.keys(f).forEach(function(de){var Ee=f[de],Oe=i.getDefinition(de);if(Oe!=null){var $e=N.call(Oe.offset,i.view,Ee,{elem:r,cell:i.cell,view:i.view,attrs:s,refBBox:$});$e!=null&&(F=!0,E.translate(gt.create($e).scale(x,O)))}})}}(p!=null||I||F)&&(E.round(1),b.e=E.x,b.f=E.y,r.setAttribute("transform",R.matrixToTransformString(b)));var se=function(){d!=null&&Object.keys(d).forEach(function(Ee){var Oe=d[Ee],$e=i.getDefinition(Ee);if($e!=null){var tt=N.call($e.set,i.view,Oe,h());typeof tt=="object"?i.view.setAttrs(tt,r):tt!=null&&i.view.setAttrs(Object(Qe.a)({},Ee,tt),r)}})};t.forceSync?se():qm.scheduleTask(se)}},{key:"update",value:function(r,n,e){var t=this,i={},s=this.findAttrs(e.attrs||n,r,i,e.selectors),u=e.attrs?this.findAttrs(n,r,i,e.selectors):s,l=[];s.each(function(d){var h=d.elem,p=d.attrs,m=t.processAttrs(h,p);if(m.set==null&&m.position==null&&m.offset==null&&m.delay==null)t.view.setAttrs(m.normal,h);else{var b=u.get(h),E=b?b.attrs:null,x=E&&p.ref==null?E.ref:p.ref,O;if(x){if(O=(i[x]||t.view.find(x,r,e.selectors))[0],!O)throw new Error('"'.concat(x,'" reference does not exist.'))}else O=null;var D={node:h,refNode:O,attributes:E,processedAttributes:m},I=l.findIndex(function(F){return F.refNode===h});I>-1?l.splice(I,0,D):l.push(D)}});var c=new v1,f;l.forEach(function(d){var h=d.node,p=d.refNode,m,b=p!=null&&e.rotatableNode!=null&&R.contains(e.rotatableNode,p);if(p&&(m=c.get(p)),!m){var E=b?e.rotatableNode:r;m=p?R.getBBox(p,{target:E}):e.rootBBox,p&&c.set(p,m)}var x;e.attrs&&d.attributes?(x=t.processAttrs(h,d.attributes),t.mergeProcessedAttrs(x,d.processedAttributes)):x=d.processedAttributes;var O=m;b&&e.rotatableNode!=null&&!e.rotatableNode.contains(h)&&(f||(f=R.transformStringToMatrix(R.attr(e.rotatableNode,"transform"))),O=R.transformRectangle(m,f));var D=l.find(function(I){return I.refNode===h});D&&(e.forceSync=!0),t.updateRelativeAttrs(h,x,O,e)})}}]),o}();(function(o){o.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"]})(g1||(g1={}));var JP=function(){function o(a,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];Object(Ie.a)(this,o),this.view=a;var e={},t={},i=0;Object.keys(r).forEach(function(u){var l=r[u];Array.isArray(l)||(l=[l]),l.forEach(function(c){var f=e[c];f||(i+=1,f=e[c]=1<<i),t[u]|=f})});var s=n;if(Array.isArray(s)||(s=[s]),s.forEach(function(u){e[u]||(i+=1,e[u]=1<<i)}),i>25)throw new Error("Maximum number of flags exceeded.");this.flags=e,this.attrs=t,this.bootstrap=n}return Object(pe.a)(o,[{key:"cell",get:function(){return this.view.cell}},{key:"getFlag",value:function(r){var n=this.flags;return n==null?0:Array.isArray(r)?r.reduce(function(e,t){return e|n[t]},0):n[r]|0}},{key:"hasAction",value:function(r,n){return r&this.getFlag(n)}},{key:"removeAction",value:function(r,n){return r^r&this.getFlag(n)}},{key:"getBootstrapFlag",value:function(){return this.getFlag(this.bootstrap)}},{key:"getChangedFlag",value:function(){var r=this,n=0;return this.attrs&&Object.keys(this.attrs).forEach(function(e){r.cell.hasChanged(e)&&(n|=r.attrs[e])}),n}}]),o}(),F6=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Eo=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(e){var t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(Ie.a)(this,n),t=r.call(this),t.cell=e,t.options=t.ensureOptions(i),t.graph=t.options.graph,t.attr=new g1(Object(Co.a)(t)),t.flag=new JP(Object(Co.a)(t),t.options.actions,t.options.bootstrap),t.cache=new _6(Object(Co.a)(t)),t.setContainer(t.ensureContainer()),t.setup(),t.$(t.container).data("view",Object(Co.a)(t)),t.init(),t}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"init",value:function(){}},{key:"onRemove",value:function(){this.removeTools()}},{key:"priority",get:function(){return this.options.priority}},{key:"rootSelector",get:function(){return this.options.rootSelector}},{key:"getConstructor",value:function(){return this.constructor}},{key:"ensureOptions",value:function(t){return this.getConstructor().getOptions(t)}},{key:"getContainerTagName",value:function(){return this.options.isSvgElement?"g":"div"}},{key:"getContainerStyle",value:function(){}},{key:"getContainerAttrs",value:function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}},{key:"getContainerClassName",value:function(){return this.prefixClassName("cell")}},{key:"ensureContainer",value:function(){return oa.createElement(this.getContainerTagName(),this.options.isSvgElement)}},{key:"setContainer",value:function(t){if(this.container!==t){this.undelegateEvents(),this.container=t,this.options.events!=null&&this.delegateEvents(this.options.events);var i=this.getContainerAttrs();i!=null&&this.setAttrs(i,t);var s=this.getContainerStyle();s!=null&&this.setStyle(s,t);var u=this.getContainerClassName();u!=null&&this.addClass(u,t)}return this}},{key:"isNodeView",value:function(){return!1}},{key:"isEdgeView",value:function(){return!1}},{key:"render",value:function(){return this}},{key:"confirmUpdate",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return 0}},{key:"getBootstrapFlag",value:function(){return this.flag.getBootstrapFlag()}},{key:"getFlag",value:function(t){return this.flag.getFlag(t)}},{key:"hasAction",value:function(t,i){return this.flag.hasAction(t,i)}},{key:"removeAction",value:function(t,i){return this.flag.removeAction(t,i)}},{key:"handleAction",value:function(t,i,s,u){if(this.hasAction(t,i)){s();var l=[i];return u&&(typeof u=="string"?l.push(u):l.push.apply(l,Object(ot.a)(u))),this.removeAction(t,l)}return t}},{key:"setup",value:function(){var t=this;this.cell.on("changed",function(i){var s=i.options;return t.onAttrsChange(s)})}},{key:"onAttrsChange",value:function(t){var i=this.flag.getChangedFlag();t.updated||!i||(t.dirty&&this.hasAction(i,"update")&&(i|=this.getFlag("render")),t.toolId&&(t.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,i,this.priority,t))}},{key:"parseJSONMarkup",value:function(t,i){var s=Hi.parseJSONMarkup(t),u=s.selectors,l=this.rootSelector;if(i&&l){if(u[l])throw new Error("Invalid root selector");u[l]=i}return s}},{key:"can",value:function(t){var i=this.graph.options.interacting;if(typeof i=="function"&&(i=N.call(i,this.graph,this)),typeof i=="object"){var s=i[t];return typeof s=="function"&&(s=N.call(s,this.graph,this)),s!==!1}return typeof i=="boolean"?i:!1}},{key:"cleanCache",value:function(){return this.cache.clean(),this}},{key:"getCache",value:function(t){return this.cache.get(t)}},{key:"getDataOfElement",value:function(t){return this.cache.getData(t)}},{key:"getMatrixOfElement",value:function(t){return this.cache.getMatrix(t)}},{key:"getShapeOfElement",value:function(t){return this.cache.getShape(t)}},{key:"getScaleOfElement",value:function(t,i){var s,u;if(i&&i.contains(t)){var l=R.scale(i);s=1/l.sx,u=1/l.sy}else s=1,u=1;return{sx:s,sy:u}}},{key:"getBoundingRectOfElement",value:function(t){return this.cache.getBoundingRect(t)}},{key:"getBBoxOfElement",value:function(t){var i=this.getBoundingRectOfElement(t),s=this.getMatrixOfElement(t),u=this.getRootRotatedMatrix(),l=this.getRootTranslatedMatrix();return R.transformRectangle(i,l.multiply(u).multiply(s))}},{key:"getUnrotatedBBoxOfElement",value:function(t){var i=this.getBoundingRectOfElement(t),s=this.getMatrixOfElement(t),u=this.getRootTranslatedMatrix();return R.transformRectangle(i,u.multiply(s))}},{key:"getBBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i;if(t.useCellGeometry){var s=this.cell,u=s.isNode()?s.getAngle():0;i=s.getBBox().bbox(u)}else i=this.getBBoxOfElement(this.container);return this.graph.localToGraph(i)}},{key:"getRootTranslatedMatrix",value:function(){var t=this.cell,i=t.isNode()?t.getPosition():{x:0,y:0};return R.createSVGMatrix().translate(i.x,i.y)}},{key:"getRootRotatedMatrix",value:function(){var t=R.createSVGMatrix(),i=this.cell,s=i.isNode()?i.getAngle():0;if(s){var u=i.getBBox(),l=u.width/2,c=u.height/2;t=t.translate(l,c).rotate(s).translate(-l,-c)}return t}},{key:"findMagnet",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.findByAttr("magnet",t)}},{key:"updateAttrs",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.rootBBox==null&&(s.rootBBox=new fr),s.selectors==null&&(s.selectors=this.selectors),this.attr.update(t,i,s)}},{key:"isEdgeElement",value:function(t){return this.cell.isEdge()&&(t==null||t===this.container)}},{key:"prepareHighlight",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t&&this.$(t)[0]||this.container;return i.partial=s===this.container,s}},{key:"highlight",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.prepareHighlight(t,i);return this.notify("cell:highlight",{magnet:s,options:i,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:s,options:i,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:s,options:i,view:this,node:this.cell,cell:this.cell}),this}},{key:"unhighlight",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.prepareHighlight(t,i);return this.notify("cell:unhighlight",{magnet:s,options:i,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:s,options:i,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:s,options:i,view:this,edge:this.cell,cell:this.cell}),this}},{key:"notifyUnhighlight",value:function(t,i){}},{key:"getEdgeTerminal",value:function(t,i,s,u,l){var c=this.cell,f=this.findAttr("port",t),d=t.getAttribute("data-selector"),h={cell:c.id};return d!=null&&(h.magnet=d),f!=null?(h.port=f,c.isNode()&&!c.hasPort(f)&&d==null&&(h.selector=this.getSelector(t))):d==null&&this.container!==t&&(h.selector=this.getSelector(t)),this.customizeEdgeTerminal(h,t,i,s,u,l)}},{key:"customizeEdgeTerminal",value:function(t,i,s,u,l,c){var f=l.getStrategy()||this.graph.options.connecting.strategy;if(f){var d=typeof f=="string"?f:f.name,h=typeof f=="string"?{}:f.args||{},p=kv.registry;if(d){var m=p.get(d);if(m==null)return p.onNotFound(d);var b=N.call(m,this.graph,t,this,i,new gt(s,u),l,c,h);if(b)return b}}return t}},{key:"getMagnetFromEdgeTerminal",value:function(t){var i=this.cell,s=this.container,u=t.port,l=t.magnet,c;return u!=null&&i.isNode()&&i.hasPort(u)?c=this.findPortElem(u,l)||s:(l||(l=t.selector),!l&&u!=null&&(l='[port="'.concat(u,'"]')),c=this.findOne(l,s,this.selectors)),c}},{key:"animate",value:function(t,i){var s=typeof t=="string"?this.findOne(t):t;if(s==null)throw new Error("Invalid animation element.");var u=s.parentNode,l=function(){u||R.remove(s)},c=mi.create(s);u||c.appendTo(this.graph.view.stage);var f=i.complete;return i.complete=function(d){l(),f&&f(d)},c.animate(i)}},{key:"animateTransform",value:function(t,i){var s=typeof t=="string"?this.findOne(t):t;if(s==null)throw new Error("Invalid animation element.");var u=s.parentNode,l=function(){u||R.remove(s)},c=mi.create(s);u||c.appendTo(this.graph.view.stage);var f=i.complete;return i.complete=function(d){l(),f&&f(d)},c.animateTransform(i)}},{key:"hasTools",value:function(t){var i=this.tools;return i==null?!1:t==null?!0:i.name===t}},{key:"addTools",value:function(t){if(!this.can("toolsAddable"))return this;if(this.removeTools(),t){var i=Qs.isToolsView(t)?t:new Qs(t);this.tools=i,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),i.config({view:this}),i.mount()}return this}},{key:"updateTools",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tools&&this.tools.update(t),this}},{key:"removeTools",value:function(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}},{key:"hideTools",value:function(){return this.tools&&this.tools.hide(),this}},{key:"showTools",value:function(){return this.tools&&this.tools.show(),this}},{key:"renderTools",value:function(){var t=this.cell.getTools();return this.addTools(t),this}},{key:"notify",value:function(t,i){return this.trigger(t,i),this.graph.trigger(t,i),this}},{key:"getEventArgs",value:function(t,i,s){var u=this,l=u.cell;return i==null||s==null?{e:t,view:u,cell:l}:{e:t,x:i,y:s,view:u,cell:l}}},{key:"onClick",value:function(t,i,s){this.notify("cell:click",this.getEventArgs(t,i,s))}},{key:"onDblClick",value:function(t,i,s){this.notify("cell:dblclick",this.getEventArgs(t,i,s))}},{key:"onContextMenu",value:function(t,i,s){this.notify("cell:contextmenu",this.getEventArgs(t,i,s))}},{key:"onMouseDown",value:function(t,i,s){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,i,s))}},{key:"onMouseUp",value:function(t,i,s){this.notify("cell:mouseup",this.getEventArgs(t,i,s)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}},{key:"onMouseMove",value:function(t,i,s){this.notify("cell:mousemove",this.getEventArgs(t,i,s))}},{key:"onMouseOver",value:function(t){this.notify("cell:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){this.notify("cell:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){this.notify("cell:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){this.notify("cell:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,i,s,u){this.notify("cell:mousewheel",Object.assign({delta:u},this.getEventArgs(t,i,s)))}},{key:"onCustomEvent",value:function(t,i,s,u){this.notify("cell:customevent",Object.assign({name:i},this.getEventArgs(t,s,u))),this.notify(i,Object.assign({},this.getEventArgs(t,s,u)))}},{key:"onMagnetMouseDown",value:function(t,i,s,u){}},{key:"onMagnetDblClick",value:function(t,i,s,u){}},{key:"onMagnetContextMenu",value:function(t,i,s,u){}},{key:"onLabelMouseDown",value:function(t,i,s){}},{key:"checkMouseleave",value:function(t){var i=this.graph;i.renderer.isAsync()&&i.renderer.dumpView(this);var s=this.getEventTarget(t,{fromPoint:!0}),u=i.renderer.findViewByElem(s);u!==this&&(this.onMouseLeave(t),!!u&&u.onMouseEnter(t))}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(t){this.defaults=this.getOptions(t)}},{key:"getOptions",value:function(t){var i=function(p,m){return m!=null?B.uniq([].concat(Object(ot.a)(Array.isArray(p)?p:[p]),Object(ot.a)(Array.isArray(m)?m:[m]))):Array.isArray(p)?Object(ot.a)(p):[p]},s=C.cloneDeep(this.getDefaults()),u=t.bootstrap,l=t.actions,c=t.events,f=t.documentEvents,d=F6(t,["bootstrap","actions","events","documentEvents"]);return u&&(s.bootstrap=i(s.bootstrap,u)),l&&Object.keys(l).forEach(function(h){var p=l[h],m=s.actions[h];p&&m?s.actions[h]=i(m,p):p&&(s.actions[h]=i(p))}),c&&(s.events=Object.assign(Object.assign({},s.events),c)),t.documentEvents&&(s.documentEvents=Object.assign(Object.assign({},s.documentEvents),f)),C.merge(s,d)}}]),n}(oa,Symbol.toStringTag);Eo.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},function(o){o.Flag=JP,o.Attr=g1}(Eo||(Eo={})),function(o){o.toStringTag="X6.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"}o.isCellView=a}(Eo||(Eo={})),function(o){function a(n){return function(e){e.config({priority:n})}}o.priority=a;function r(n){return function(e){e.config({bootstrap:n})}}o.bootstrap=r}(Eo||(Eo={})),function(o){o.registry=lo.create({type:"view"})}(Eo||(Eo={}));var Qs=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(Ie.a)(this,n),e=r.call(this),e.svgContainer=e.createContainer(!0,t),e.htmlContainer=e.createContainer(!1,t),e.config(t),e}return Object(pe.a)(n,[{key:"name",get:function(){return this.options.name}},{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:a,get:function(){return n.toStringTag}},{key:"createContainer",value:function(t,i){var s=t?oa.createElement("g",!0):oa.createElement("div",!1);return R.addClass(s,this.prefixClassName("cell-tools")),i.className&&R.addClass(s,i.className),s}},{key:"config",value:function(t){if(this.options=Object.assign(Object.assign({},this.options),t),!Eo.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(R.addClass(this.svgContainer,this.prefixClassName("edge-tools")),R.addClass(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(R.addClass(this.svgContainer,this.prefixClassName("node-tools")),R.addClass(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));var i=this.options.items;if(!Array.isArray(i))return this;this.tools=[];var s=[];i.forEach(function(b){if(n.ToolItem.isToolItem(b))b.name==="vertices"?s.unshift(b):s.push(b);else{var E=typeof b=="object"?b.name:b;E==="vertices"?s.unshift(b):s.push(b)}});for(var u=0;u<s.length;u+=1){var l=s[u],c=void 0;if(n.ToolItem.isToolItem(l))c=l;else{var f=typeof l=="object"?l.name:l,d=typeof l=="object"?l.args||{}:{};if(f){if(this.cell.isNode()){var h=Dv.registry.get(f);if(h)c=new h(d);else return Dv.registry.onNotFound(f)}else if(this.cell.isEdge()){var p=Iv.registry.get(f);if(p)c=new p(d);else return Iv.registry.onNotFound(f)}}}if(c){c.config(this.cellView,this),c.render();var m=c.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer;m.appendChild(c.container),this.tools.push(c)}}return this}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.tools;return i&&i.forEach(function(s){t.toolId!==s.cid&&s.isVisible()&&s.update()}),this}},{key:"focus",value:function(t){var i=this.tools;return i&&i.forEach(function(s){t===s?s.show():s.hide()}),this}},{key:"blur",value:function(t){var i=this.tools;return i&&i.forEach(function(s){s!==t&&!s.isVisible()&&(s.show(),s.update())}),this}},{key:"hide",value:function(){return this.focus(null)}},{key:"show",value:function(){return this.blur(null)}},{key:"remove",value:function(){var t=this.tools;return t&&(t.forEach(function(i){return i.remove()}),this.tools=null),R.remove(this.svgContainer),R.remove(this.htmlContainer),Object(Vr.a)(Object(Hr.a)(n.prototype),"remove",this).call(this)}},{key:"mount",value:function(){var t=this.tools,i=this.cellView;if(i&&t){var s=t.some(function(c){return c.options.isSVGElement!==!1}),u=t.some(function(c){return c.options.isSVGElement===!1});if(s){var l=this.options.local?i.container:i.graph.view.decorator;l.appendChild(this.svgContainer)}u&&this.graph.container.appendChild(this.htmlContainer)}return this}}]),n}(oa,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&e.graph!=null&&e.cell!=null&&typeof e.config=="function"&&typeof e.update=="function"&&typeof e.focus=="function"&&typeof e.blur=="function"&&typeof e.show=="function"&&typeof e.hide=="function"}o.isToolsView=a})(Qs||(Qs={})),function(o){var a=function(r,n){Object($n.a)(t,r);var e=Object(Xn.a)(t);function t(){var i,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(Ie.a)(this,t),i=e.call(this),i.visible=!0,i.options=i.getOptions(s),i.container=oa.createElement(i.options.tagName||"g",i.options.isSVGElement!==!1),R.addClass(i.container,i.prefixClassName("cell-tool")),typeof i.options.className=="string"&&R.addClass(i.container,i.options.className),i.init(),i}return Object(pe.a)(t,[{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:"name",get:function(){return this.options.name}},{key:n,get:function(){return t.toStringTag}},{key:"init",value:function(){}},{key:"getOptions",value:function(s){var u=this.constructor;return u.getOptions(s)}},{key:"delegateEvents",value:function(){return this.options.events&&Object(Vr.a)(Object(Hr.a)(t.prototype),"delegateEvents",this).call(this,this.options.events),this}},{key:"config",value:function(s,u){return this.cellView=s,this.parent=u,this.stamp(this.container),this.cell.isEdge()?R.addClass(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&R.addClass(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}},{key:"render",value:function(){this.empty();var s=this.options.markup;if(s){var u=Hi.isStringMarkup(s)?Hi.parseStringMarkup(s):Hi.parseJSONMarkup(s);this.container.appendChild(u.fragment),this.childNodes=u.selectors}return this.onRender(),this}},{key:"onRender",value:function(){}},{key:"update",value:function(){return this}},{key:"stamp",value:function(s){s&&s.setAttribute("data-cell-id",this.cellView.cell.id)}},{key:"show",value:function(){return this.container.style.display="",this.visible=!0,this}},{key:"hide",value:function(){return this.container.style.display="none",this.visible=!1,this}},{key:"isVisible",value:function(){return!!this.visible}},{key:"focus",value:function(){var s=this.options.focusOpacity;return s!=null&&Number.isFinite(s)&&(this.container.style.opacity="".concat(s)),this.parent.focus(this),this}},{key:"blur",value:function(){return this.container.style.opacity="",this.parent.blur(this),this}},{key:"guard",value:function(s){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(s,this.cellView)}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(s){this.defaults=this.getOptions(s)}},{key:"getOptions",value:function(s){return C.merge(C.cloneDeep(this.getDefaults()),s)}}]),t}(oa,Symbol.toStringTag);a.defaults={isSVGElement:!0,tagName:"g"},o.ToolItem=a,function(r){var n=0;function e(i){return i?_.pascalCase(i):(n+=1,"CustomTool".concat(n))}function t(i){var s=C.createClass(e(i.name),this);return s.config(i),s}r.define=t}(a=o.ToolItem||(o.ToolItem={})),function(r){r.toStringTag="X6.".concat(r.name);function n(e){if(e==null)return!1;if(e instanceof r)return!0;var t=e[Symbol.toStringTag],i=e;return(t==null||t===r.toStringTag)&&i.graph!=null&&i.cell!=null&&typeof i.config=="function"&&typeof i.update=="function"&&typeof i.focus=="function"&&typeof i.blur=="function"&&typeof i.show=="function"&&typeof i.hide=="function"&&typeof i.isVisible=="function"}r.isToolItem=n}(a=o.ToolItem||(o.ToolItem={}))}(Qs||(Qs={}));function QP(o,a,r,n){var e=N.call(kv.presets.pinRelative,this.graph,{},a,r,o,this.cell,n,{});return e.anchor}function qP(o,a){return a?o.cell.getBBox():o.cell.isEdge()?o.getConnection().bbox():o.getUnrotatedBBoxOfElement(o.container)}var mh=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"onRender",value:function(){R.addClass(this.container,this.prefixClassName("cell-tool-button")),this.update()}},{key:"update",value:function(){return this.updatePosition(),this}},{key:"updatePosition",value:function(){var e=this.cellView,t=e.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();R.transform(this.container,t,{absolute:!0})}},{key:"getNodeMatrix",value:function(){var e=this.cellView,t=this.options,i=t.x,s=i===void 0?0:i,u=t.y,l=u===void 0?0:u,c=t.offset,f=t.useCellGeometry,d=t.rotate,h=qP(e,f),p=e.cell.getAngle();d||(h=h.bbox(p));var m=0,b=0;typeof c=="number"?(m=c,b=c):typeof c=="object"&&(m=c.x,b=c.y),s=P.normalizePercentage(s,h.width),l=P.normalizePercentage(l,h.height);var E=R.createSVGMatrix().translate(h.x+h.width/2,h.y+h.height/2);return d&&(E=E.rotate(p)),E=E.translate(s+m-h.width/2,l+b-h.height/2),E}},{key:"getEdgeMatrix",value:function(){var e=this.cellView,t=this.options,i=t.offset,s=i===void 0?0:i,u=t.distance,l=u===void 0?0:u,c=t.rotate,f,d,h,p=P.normalizePercentage(l,1);p>=0&&p<=1?f=e.getTangentAtRatio(p):f=e.getTangentAtLength(p),f?(d=f.start,h=f.vector().vectorAngle(new gt(1,0))||0):(d=e.getConnection().start,h=0);var m=R.createSVGMatrix().translate(d.x,d.y).rotate(h);return typeof s=="object"?m=m.translate(s.x||0,s.y||0):m=m.translate(0,s),c||(m=m.rotate(-h)),m}},{key:"onMouseDown",value:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.onClick;typeof t=="function"&&N.call(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}}]),r}(Qs.ToolItem);(function(o){o.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(mh||(mh={})),function(o){o.Remove=o.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick:function(r){var n=r.view,e=r.btn;e.parent.remove(),n.cell.remove({ui:!0,toolId:e.cid})}})}(mh||(mh={}));var B6=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},p1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"onRender",value:function(){if(R.addClass(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){var e=this.options.attrs,t=e.class,i=B6(e,["class"]);R.attr(this.container,R.kebablizeAttrs(i)),t&&R.addClass(this.container,t)}this.update()}},{key:"update",value:function(){var e=this.cellView,t=this.options,i=t.useCellGeometry,s=t.rotate,u=P.normalizeSides(t.padding),l=qP(e,i).moveAndExpand({x:-u.left,y:-u.top,width:u.left+u.right,height:u.top+u.bottom}),c=e.cell;if(c.isNode()){var f=c.getAngle();if(f)if(s){var d=c.getBBox().getCenter();R.rotate(this.container,f,d.x,d.y,{absolute:!0})}else l=l.bbox(f)}return R.attr(this.container,l.toJSON()),this}}]),r}(Qs.ToolItem);(function(o){o.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(p1||(p1={}));var r0=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.handles=[],n}return Object(pe.a)(r,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"onRender",value:function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}},{key:"update",value:function(){var e=this.vertices;return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(i){e.stopHandleListening(i),i.remove()})}},{key:"renderHandles",value:function(){for(var e=this,t=this.vertices,i=0,s=t.length;i<s;i+=1){var u=t[i],l=this.options.createHandle,c=this.options.processHandle,f=l({index:i,graph:this.graph,guard:function(h){return e.guard(h)},attrs:this.options.attrs||{}});c&&c(f),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:f}),f.updatePosition(u.x,u.y),this.stamp(f.container),this.container.appendChild(f.container),this.handles.push(f),this.startHandleListening(f)}}},{key:"updateHandles",value:function(){for(var e=this.vertices,t=0,i=e.length;t<i;t+=1){var s=e[t],u=this.handles[t];u&&u.updatePosition(s.x,s.y)}}},{key:"updatePath",value:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}},{key:"startHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}},{key:"stopHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}},{key:"getNeighborPoints",value:function(e){var t=this.cellView,i=this.vertices,s=e>0?i[e-1]:t.sourceAnchor,u=e<i.length-1?i[e+1]:t.targetAnchor;return{prev:gt.create(s),next:gt.create(u)}}},{key:"getMouseEventArgs",value:function(e){var t=this.normalizeEvent(e),i=this.graph.snapToGrid(t.clientX,t.clientY),s=i.x,u=i.y;return{e:t,x:s,y:u}}},{key:"onHandleChange",value:function(e){var t=e.e;this.focus();var i=this.cellView;if(i.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){var s=this.getMouseEventArgs(t),u=s.e,l=s.x,c=s.y;i.notifyMouseDown(u,l,c)}}},{key:"onHandleChanging",value:function(e){var t=e.handle,i=e.e,s=this.cellView,u=t.options.index,l=this.getMouseEventArgs(i),c=l.e,f=l.x,d=l.y,h={x:f,y:d};this.snapVertex(h,u),s.cell.setVertexAt(u,h,{ui:!0,toolId:this.cid}),t.updatePosition(h.x,h.y),this.options.stopPropagation||s.notifyMouseMove(c,f,d)}},{key:"onHandleChanged",value:function(e){var t=e.e,i=this.options,s=this.cellView;if(i.addable&&this.updatePath(),!!i.removeRedundancies){var u=s.removeRedundantLinearVertices({ui:!0,toolId:this.cid});u&&this.render(),this.blur(),s.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(t).vertexAdded&&s.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});var l=this.getMouseEventArgs(t),c=l.e,f=l.x,d=l.y;this.options.stopPropagation||s.notifyMouseUp(c,f,d),s.checkMouseleave(c),i.onChanged&&i.onChanged({edge:s.cell,edgeView:s})}}},{key:"snapVertex",value:function(e,t){var i=this.options.snapRadius||0;if(i>0){var s=this.getNeighborPoints(t),u=s.prev,l=s.next;Math.abs(e.x-u.x)<i?e.x=u.x:Math.abs(e.x-l.x)<i&&(e.x=l.x),Math.abs(e.y-u.y)<i?e.y=s.prev.y:Math.abs(e.y-l.y)<i&&(e.y=l.y)}}},{key:"onHandleRemove",value:function(e){var t=e.handle,i=e.e;if(this.options.removable){var s=t.options.index,u=this.cellView;u.cell.removeVertexAt(s,{ui:!0}),this.options.addable&&this.updatePath(),u.checkMouseleave(this.normalizeEvent(i))}}},{key:"onPathMouseDown",value:function(e){var t=this.cellView;if(!(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))){e.stopPropagation(),e.preventDefault();var i=this.normalizeEvent(e),s=this.graph.snapToGrid(i.clientX,i.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});var u=t.getVertexIndex(s.x,s.y);this.snapVertex(s,u),t.cell.insertVertex(s,u,{ui:!0,toolId:this.cid}),this.render();var l=this.handles[u];this.eventData(i,{vertexAdded:!0}),l.onMouseDown(i)}}},{key:"onRemove",value:function(){this.resetHandles()}}]),r}(Qs.ToolItem);(function(o){var a=function(r){Object($n.a)(e,r);var n=Object(Xn.a)(e);function e(t){var i;return Object(Ie.a)(this,e),i=n.call(this),i.options=t,i.render(),i.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),i}return Object(pe.a)(e,[{key:"graph",get:function(){return this.options.graph}},{key:"render",value:function(){this.container=oa.createElement("circle",!0);var i=this.options.attrs;if(typeof i=="function"){var s=o.getDefaults();this.setAttrs(Object.assign(Object.assign({},s.attrs),i(this)))}else this.setAttrs(i);this.addClass(this.prefixClassName("edge-tool-vertex"))}},{key:"updatePosition",value:function(i,s){this.setAttrs({cx:i,cy:s})}},{key:"onMouseDown",value:function(i){this.options.guard(i)||(i.stopPropagation(),i.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.data),this.emit("change",{e:i,handle:this}))}},{key:"onMouseMove",value:function(i){this.emit("changing",{e:i,handle:this})}},{key:"onMouseUp",value:function(i){this.emit("changed",{e:i,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}},{key:"onDoubleClick",value:function(i){this.emit("remove",{e:i,handle:this})}}]),e}(oa);o.Handle=a})(r0||(r0={})),function(o){var a,r=ko.prefix("edge-tool-vertex-path");o.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(e){return new o.Handle(e)},markup:[{tagName:"path",selector:"connection",className:r,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:(a={},Object(Qe.a)(a,"mousedown .".concat(r),"onPathMouseDown"),Object(Qe.a)(a,"touchstart .".concat(r),"onPathMouseDown"),a)})}(r0||(r0={}));var i0=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.handles=[],n}return Object(pe.a)(r,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"update",value:function(){return this.render(),this}},{key:"onRender",value:function(){R.addClass(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var e=this.cellView,t=Object(ot.a)(this.vertices);t.unshift(e.sourcePoint),t.push(e.targetPoint);for(var i=0,s=t.length;i<s-1;i+=1){var u=t[i],l=t[i+1],c=this.renderHandle(u,l,i);this.stamp(c.container),this.handles.push(c)}return this}},{key:"renderHandle",value:function(e,t,i){var s=this,u=this.options.createHandle({index:i,graph:this.graph,guard:function(c){return s.guard(c)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(u),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:u}),this.updateHandle(u,e,t),this.container.appendChild(u.container),this.startHandleListening(u),u}},{key:"startHandleListening",value:function(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}},{key:"stopHandleListening",value:function(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(i){e.stopHandleListening(i),i.remove()})}},{key:"shiftHandleIndexes",value:function(e){for(var t=this.handles,i=0,s=t.length;i<s;i+=1)t[i].options.index+=e}},{key:"resetAnchor",value:function(e,t){var i=this.cellView.cell,s={ui:!0,toolId:this.cid};t?i.prop([e,"anchor"],t,s):i.removeProp([e,"anchor"],s)}},{key:"snapHandle",value:function(e,t,i){var s=e.options.axis,u=e.options.index,l=this.cellView,c=l.cell,f=c.getVertices(),d=f[u-2]||i.sourceAnchor,h=f[u+1]||i.targetAnchor,p=this.options.snapRadius;return Math.abs(t[s]-d[s])<p?t[s]=d[s]:Math.abs(t[s]-h[s])<p&&(t[s]=h[s]),t}},{key:"onHandleChanging",value:function(e){var t=e.handle,i=e.e,s=this.graph,u=this.options,l=this.cellView,c=u.anchor,f=t.options.axis,d=t.options.index-1,h=this.getEventData(i),p=this.normalizeEvent(i),m=s.snapToGrid(p.clientX,p.clientY),b=this.snapHandle(t,m.clone(),h),E=C.cloneDeep(this.vertices),x=E[d],O=E[d+1],D=l.sourceView,I=l.sourceBBox,F=!1,H=!1;if(x?d===0?I.containsPoint(x)?(E.shift(),this.shiftHandleIndexes(-1),F=!0):(x[f]=b[f],H=!0):x[f]=b[f]:(x=l.sourceAnchor.toJSON(),x[f]=b[f],I.containsPoint(x)?F=!0:(E.unshift(x),this.shiftHandleIndexes(1),H=!0)),typeof c=="function"&&D){if(F){var $=h.sourceAnchor.clone();$[f]=b[f];var se=N.call(c,l,$,D,l.sourceMagnet||D.container,"source",l,this);this.resetAnchor("source",se)}H&&this.resetAnchor("source",h.sourceAnchorDef)}var de=l.targetView,Ee=l.targetBBox,Oe=!1,$e=!1;if(O?d===E.length-2?Ee.containsPoint(O)?(E.pop(),Oe=!0):(O[f]=b[f],$e=!0):O[f]=b[f]:(O=l.targetAnchor.toJSON(),O[f]=b[f],Ee.containsPoint(O)?Oe=!0:(E.push(O),$e=!0)),typeof c=="function"&&de){if(Oe){var tt=h.targetAnchor.clone();tt[f]=b[f];var Le=N.call(c,l,tt,de,l.targetMagnet||de.container,"target",l,this);this.resetAnchor("target",Le)}$e&&this.resetAnchor("target",h.targetAnchorDef)}gt.equalPoints(E,this.vertices)||this.cellView.cell.setVertices(E,{ui:!0,toolId:this.cid}),this.updateHandle(t,x,O,0),u.stopPropagation||l.notifyMouseMove(p,m.x,m.y)}},{key:"onHandleChange",value:function(e){var t=e.handle,i=e.e,s=this.options,u=this.handles,l=this.cellView,c=t.options.index;if(!!Array.isArray(u)){for(var f=0,d=u.length;f<d;f+=1)f!==c&&u[f].hide();if(this.focus(),this.setEventData(i,{sourceAnchor:l.sourceAnchor.clone(),targetAnchor:l.targetAnchor.clone(),sourceAnchorDef:C.cloneDeep(this.cell.prop(["source","anchor"])),targetAnchorDef:C.cloneDeep(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!s.stopPropagation){var h=this.normalizeEvent(i),p=this.graph.snapToGrid(h.clientX,h.clientY);l.notifyMouseDown(h,p.x,p.y)}}}},{key:"onHandleChanged",value:function(e){var t=e.e,i=this.options,s=this.cellView;i.removeRedundancies&&s.removeRedundantLinearVertices({ui:!0,toolId:this.cid});var u=this.normalizeEvent(t),l=this.graph.snapToGrid(u.clientX,u.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),i.stopPropagation||s.notifyMouseUp(u,l.x,l.y),s.checkMouseleave(u),i.onChanged&&i.onChanged({edge:s.cell,edgeView:s})}},{key:"updateHandle",value:function(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=this.options.precision||0,l=Math.abs(t.x-i.x)<u,c=Math.abs(t.y-i.y)<u;if(l||c){var f=new Ur(t,i),d=f.length();if(d<this.options.threshold)e.hide();else{var h=f.getCenter(),p=l?"x":"y";h[p]+=s||0;var m=f.vector().vectorAngle(new gt(1,0));e.updatePosition(h.x,h.y,m,this.cellView),e.show(),e.options.axis=p}}else e.hide()}},{key:"onRemove",value:function(){this.resetHandles()}}]),r}(Qs.ToolItem);(function(o){var a=function(r){Object($n.a)(e,r);var n=Object(Xn.a)(e);function e(t){var i;return Object(Ie.a)(this,e),i=n.call(this),i.options=t,i.render(),i.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),i}return Object(pe.a)(e,[{key:"render",value:function(){this.container=oa.createElement("rect",!0);var i=this.options.attrs;if(typeof i=="function"){var s=o.getDefaults();this.setAttrs(Object.assign(Object.assign({},s.attrs),i(this)))}else this.setAttrs(i);this.addClass(this.prefixClassName("edge-tool-segment"))}},{key:"updatePosition",value:function(i,s,u,l){var c=l.getClosestPoint(new gt(i,s))||new gt(i,s),f=R.createSVGMatrix().translate(c.x,c.y);if(c.equals({x:i,y:s}))f=f.rotate(u);else{var d=new Ur(i,s,c.x,c.y),h=d.vector().vectorAngle(new gt(1,0));h!==0&&(h+=90),f=f.rotate(h)}this.setAttrs({transform:R.matrixToTransformString(f),cursor:u%180==0?"row-resize":"col-resize"})}},{key:"onMouseDown",value:function(i){this.options.guard(i)||(this.trigger("change",{e:i,handle:this}),i.stopPropagation(),i.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.data))}},{key:"onMouseMove",value:function(i){this.emit("changing",{e:i,handle:this})}},{key:"onMouseUp",value:function(i){this.emit("changed",{e:i,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}}]),e}(oa);o.Handle=a})(i0||(i0={})),function(o){o.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(r){return new o.Handle(r)},anchor:QP})}(i0||(i0={}));var m1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"type",get:function(){return this.options.type}},{key:"onRender",value:function(){R.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-anchor"))),this.toggleArea(!1),this.update()}},{key:"update",value:function(){var e=this.type,t=this.cellView,i=t.getTerminalView(e);return i?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}},{key:"updateAnchor",value:function(){var e=this.childNodes;if(!!e){var t=e.anchor;if(!!t){var i=this.type,s=this.cellView,u=this.options,l=s.getTerminalAnchor(i),c=s.cell.prop([i,"anchor"]);t.setAttribute("transform","translate(".concat(l.x,", ").concat(l.y,")"));var f=c?u.customAnchorAttrs:u.defaultAnchorAttrs;f&&Object.keys(f).forEach(function(d){t.setAttribute(d,f[d])})}}}},{key:"updateArea",value:function(){var e=this.childNodes;if(!!e){var t=e.area;if(!!t){var i=this.type,s=this.cellView,u=s.getTerminalView(i);if(u){var l=u.cell,c=s.getTerminalMagnet(i),f=this.options.areaPadding||0;Number.isFinite(f)||(f=0);var d,h,p;u.isEdgeElement(c)?(d=u.getBBox(),h=0,p=d.getCenter()):(d=u.getUnrotatedBBoxOfElement(c),h=l.getAngle(),p=d.getCenter(),h&&p.rotate(-h,l.getBBox().getCenter())),d.inflate(f),R.attr(t,{x:-d.width/2,y:-d.height/2,width:d.width,height:d.height,transform:"translate(".concat(p.x,", ").concat(p.y,") rotate(").concat(h,")")})}}}}},{key:"toggleArea",value:function(e){if(this.childNodes){var t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}},{key:"onMouseDown",value:function(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}},{key:"resetAnchor",value:function(e){var t=this.type,i=this.cell;e?i.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):i.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}},{key:"onMouseMove",value:function(e){var t=this.type,i=this.cellView,s=i.getTerminalView(t);if(s!=null){var u=this.normalizeEvent(e),l=s.cell,c=i.getTerminalMagnet(t),f=this.graph.clientToLocal(u.clientX,u.clientY),d=this.options.snap;if(typeof d=="function"){var h=N.call(d,i,f,s,c,t,i,this);f=gt.create(h)}if(this.options.restrictArea)if(s.isEdgeElement(c)){var p=s.getClosestPoint(f);p&&(f=p)}else{var m=s.getUnrotatedBBoxOfElement(c),b=l.getAngle(),E=l.getBBox().getCenter(),x=f.clone().rotate(b,E);m.containsPoint(x)||(f=m.getNearestPointToPoint(x).rotate(-b,E))}var O,D=this.options.anchor;typeof D=="function"&&(O=N.call(D,i,f,s,c,t,i,this)),this.resetAnchor(O),this.update()}}},{key:"onMouseUp",value:function(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}},{key:"onDblClick",value:function(){var e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}}]),r}(Qs.ToolItem);(function(o){o.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:QP,snap:function(r,n,e,t,i,s){var u=s.options.snapRadius||0,l=t==="source",c=l?0:-1,f=this.cell.getVertexAt(c)||this.getTerminalAnchor(l?"target":"source");return f&&(Math.abs(f.x-r.x)<u&&(r.x=f.x),Math.abs(f.y-r.y)<u&&(r.y=f.y)),r}})})(m1||(m1={}));var G6=m1.define({name:"source-anchor",type:"source"}),z6=m1.define({name:"target-anchor",type:"target"}),U6=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},y1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"type",get:function(){return this.options.type}},{key:"ratio",get:function(){return this.options.ratio}},{key:"init",value:function(){if(this.options.attrs){var e=this.options.attrs,t=e.class,i=U6(e,["class"]);this.setAttrs(i,this.container),t&&R.addClass(this.container,t)}}},{key:"onRender",value:function(){R.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-arrowhead"))),this.update()}},{key:"update",value:function(){var e=this.ratio,t=this.cellView,i=t.getTangentAtRatio(e),s=i?i.start:t.getPointAtRatio(e),u=i&&i.vector().vectorAngle(new gt(1,0))||0;if(!s)return this;var l=R.createSVGMatrix().translate(s.x,s.y).rotate(u);return R.transform(this.container,l,{absolute:!0}),this}},{key:"onMouseDown",value:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});var i=this.graph.snapToGrid(e.clientX,e.clientY),s=t.prepareArrowheadDragging(this.type,{x:i.x,y:i.y,options:{toolId:this.cid}});this.cellView.setEventData(e,s),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}}},{key:"onMouseMove",value:function(e){var t=this.normalizeEvent(e),i=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,i.x,i.y),this.update()}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),i=this.cellView,s=this.graph.snapToGrid(t.clientX,t.clientY);i.onMouseUp(t,s.x,s.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",i.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}]),r}(Qs.ToolItem);(function(o){o.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(y1||(y1={}));var V6=y1.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),H6=y1.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Qg=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.labelIndex=-1,n.distance=.5,n}return Object(pe.a)(r,[{key:"render",value:function(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}},{key:"createElement",value:function(){var e=this.cell,t=[this.prefixClassName("".concat(e.isEdge()?"edge":"node","-tool-editor")),this.prefixClassName("cell-tool-editor")];this.editor=Qs.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}},{key:"updateEditor",value:function(){var e=this.graph,t=this.cell,i=this.editor,s=i.style,u=new gt,l=20;if(t.isNode())u=t.getBBox().center,l=t.size().width-4;else if(t.isEdge()){var c=this.options.event,f=c.target,d=f.parentElement,h=d&&R.hasClass(d,this.prefixClassName("edge-label"));if(h){var p=d.getAttribute("data-index")||"0";this.labelIndex=parseInt(p,10);var m=d.getAttribute("transform"),b=R.parseTransformString(m),E=b.translation;u=new gt(E.tx,E.ty),l=R.getBBox(f).width}else{if(!this.options.labelAddable)return this;u=e.clientToLocal(gt.create(c.clientX,c.clientY));var x=this.cellView,O=x.path.closestPointLength(u);this.distance=O}}u=e.localToGraph(u),s.left="".concat(u.x,"px"),s.top="".concat(u.y,"px"),s.minWidth="".concat(l,"px");var D=e.scale();s.transform="scale(".concat(D.sx,", ").concat(D.sy,") translate(-50%, -50%)");var I=this.options.attrs;s.fontSize="".concat(I.fontSize,"px"),s.fontFamily=I.fontFamily,s.color=I.color,s.backgroundColor=I.backgroundColor;var F=this.options.getText,H;return typeof F=="function"&&(H=N.call(F,this.cellView,{cell:this.cell,index:this.labelIndex})),i.innerText=H||"",this}},{key:"onDocumentMouseDown",value:function(e){if(e.target!==this.editor){var t=this.cell,i=this.editor.innerText.replace(/\n$/,"")||"",s=this.options.setText;typeof s=="function"&&N.call(s,this.cellView,{cell:this.cell,value:i,index:this.labelIndex,distance:this.distance}),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}},{key:"onDblClick",value:function(e){e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.stopPropagation()}},{key:"autoFocus",value:function(){var e=this;setTimeout(function(){e.editor.focus(),e.selectText()})}},{key:"selectText",value:function(){if(window.getSelection){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}]),r}(Qs.ToolItem);(function(o){o.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(Qg||(Qg={})),function(o){o.NodeEditor=o.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:function(r){var n=r.cell;return n.attr("text/text")},setText:function(r){var n=r.cell,e=r.value;n.attr("text/text",e)}}),o.EdgeEditor=o.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:function(r){var n=r.cell,e=r.index;return e===-1?"":n.prop("labels/".concat(e,"/attrs/label/text"))},setText:function(r){var n=r.cell,e=r.value,t=r.index,i=r.distance,s=n;t===-1?s.appendLabel({position:{distance:i},attrs:{label:{text:e}}}):e?s.prop("labels/".concat(t,"/attrs/label/text"),e):typeof t=="number"&&s.removeLabelAt(t)}})}(Qg||(Qg={}));var ek=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Dv;(function(o){o.presets={boundary:p1,button:mh,"button-remove":mh.Remove,"node-editor":Qg.NodeEditor},o.registry=lo.create({type:"node tool",process:function(r,n){if(typeof n=="function")return n;var e=Qs.ToolItem,t=n.inherit,i=ek(n,["inherit"]);if(t){var s=this.get(t);s==null?this.onNotFound(t,"inherited"):e=s}return i.name==null&&(i.name=r),e.define.call(e,i)}}),o.registry.register(o.presets,!0)})(Dv||(Dv={}));var Iv;(function(o){o.presets={boundary:p1,vertices:r0,segments:i0,button:mh,"button-remove":mh.Remove,"source-anchor":G6,"target-anchor":z6,"source-arrowhead":V6,"target-arrowhead":H6,"edge-editor":Qg.EdgeEditor},o.registry=lo.create({type:"edge tool",process:function(r,n){if(typeof n=="function")return n;var e=Qs.ToolItem,t=n.inherit,i=ek(n,["inherit"]);if(t){var s=this.get(t);s==null?this.onNotFound(t,"inherited"):e=s}return i.name==null&&(i.name=r),e.define.call(e,i)}}),o.registry.register(o.presets,!0)})(Iv||(Iv={}));var W6=Ed("center"),$6=Ed("topCenter"),X6=Ed("bottomCenter"),K6=Ed("leftMiddle"),Y6=Ed("rightMiddle"),Z6=Ed("topLeft"),J6=Ed("topRight"),Q6=Ed("bottomLeft"),q6=Ed("bottomRight");function Ed(o){return function(a,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=e.rotate?a.getUnrotatedBBoxOfElement(r):a.getBBoxOfElement(r),i=t[o];i.x+=P.normalizePercentage(e.dx,t.width),i.y+=P.normalizePercentage(e.dy,t.height);var s=a.cell;return e.rotate?i.rotate(-s.getAngle(),s.getBBox().getCenter()):i}}function b1(o){return function(a,r,n,e){if(n instanceof Element){var t=this.graph.renderer.findViewByElem(n),i;if(t)if(t.isEdgeElement(n)){var s=e.fixedAt!=null?e.fixedAt:"50%";i=tk(t,s)}else i=t.getBBoxOfElement(n).getCenter();else i=new gt;return o.call(this,a,r,i,e)}return o.apply(this,arguments)}}function tk(o,a){var r=P.isPercentage(a),n=typeof a=="string"?parseFloat(a):a;return r?o.getPointAtRatio(n/100):o.getPointAtLength(n)}var e5=function(a,r,n,e){var t=a.cell.getAngle(),i=a.getBBoxOfElement(r),s=i.getCenter(),u=i.getTopLeft(),l=i.getBottomRight(),c=e.padding;if(Number.isFinite(c)||(c=0),u.y+c<=n.y&&n.y<=l.y-c){var f=n.y-s.y;s.x+=t===0||t===180?0:f*1/Math.tan(ji.toRad(t)),s.y+=f}else if(u.x+c<=n.x&&n.x<=l.x-c){var d=n.x-s.x;s.y+=t===90||t===270?0:d*Math.tan(ji.toRad(t)),s.x+=d}return s},t5=b1(e5),n5=function(a,r,n,e,t){var i=a.cell.getConnectionPoint(this.cell,t);return(e.dx||e.dy)&&i.translate(e.dx||0,e.dy||0),i},r5=function(a,r,n,e){var t,i=0,s,u=a.cell;e.rotate?(t=a.getUnrotatedBBoxOfElement(r),s=u.getBBox().getCenter(),i=u.getAngle()):t=a.getBBoxOfElement(r);var l=e.padding;l!=null&&Number.isFinite(l)&&t.inflate(l),e.rotate&&n.rotate(i,s);var c=t.getNearestSideToPoint(n),f;switch(c){case"left":f=t.getLeftMiddle();break;case"right":f=t.getRightMiddle();break;case"top":f=t.getTopCenter();break;case"bottom":f=t.getBottomCenter();break;default:break}var d=e.direction;return d==="H"?(c==="top"||c==="bottom")&&(n.x<=t.x+t.width?f=t.getLeftMiddle():f=t.getRightMiddle()):d==="V"&&(n.y<=t.y+t.height?f=t.getTopCenter():f=t.getBottomCenter()),e.rotate?f.rotate(-i,s):f},i5=b1(r5),Rv;(function(o){o.presets=Y,o.registry=lo.create({type:"node endpoint"}),o.registry.register(o.presets,!0)})(Rv||(Rv={}));var a5=function(a,r,n,e){var t=e.ratio!=null?e.ratio:.5;return t>1&&(t/=100),a.getPointAtRatio(t)},o5=function(a,r,n,e){var t=e.length!=null?e.length:20;return a.getPointAtLength(t)},nk=function(a,r,n,e){var t=a.getClosestPoint(n);return t!=null?t:new gt},s5=b1(nk),u5=function(a,r,n,e){var t=1e6,i=a.getConnection(),s=a.getConnectionSubdivisions(),u=new Ur(n.clone().translate(0,t),n.clone().translate(0,-t)),l=new Ur(n.clone().translate(t,0),n.clone().translate(-t,0)),c=u.intersect(i,{segmentSubdivisions:s}),f=l.intersect(i,{segmentSubdivisions:s}),d=[];return c&&d.push.apply(d,Object(ot.a)(c)),f&&d.push.apply(d,Object(ot.a)(f)),d.length>0?n.closest(d):e.fallbackAt!=null?tk(a,e.fallbackAt):N.call(nk,this,a,r,n,e)},l5=b1(u5),Nv;(function(o){o.presets=le,o.registry=lo.create({type:"edge endpoint"}),o.registry.register(o.presets,!0)})(Nv||(Nv={}));function C1(o,a,r){var n;if(typeof r=="object"){if(Number.isFinite(r.y)){var e=new Ur(a,o),t=e.parallel(r.y),i=t.start,s=t.end;a=i,o=s}n=r.x}else n=r;if(n==null||!Number.isFinite(n))return o;var u=o.distance(a);return n===0&&u>0?o:o.move(a,-Math.min(n,u-1))}function E1(o){var a=o.getAttribute("stroke-width");return a===null?0:parseFloat(a)||0}function c5(o){if(o==null)return null;var a=o;do{var r=a.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")a=a.firstElementChild;else if(r==="TITLE")a=a.nextElementSibling;else break}while(a);return a}var rk=function(a,r,n,e){var t=r.getBBoxOfElement(n);e.stroked&&t.inflate(E1(n)/2);var i=a.intersect(t),s=i&&i.length?a.start.closest(i):a.end;return C1(s,a.start,e.offset)},f5=function(a,r,n,e,t){var i=r.cell,s=i.isNode()?i.getAngle():0;if(s===0)return N.call(rk,this,a,r,n,e,t);var u=r.getUnrotatedBBoxOfElement(n);e.stroked&&u.inflate(E1(n)/2);var l=u.getCenter(),c=a.clone().rotate(s,l),f=c.setLength(1e6).intersect(u),d=f&&f.length?c.start.closest(f).rotate(-s,l):a.end;return C1(d,a.start,e.offset)},d5=function(a,r,n,e){var t,i,s=a.end,u=e.selector;if(typeof u=="string"?t=r.findOne(u):Array.isArray(u)?t=C.getByPath(n,u):t=c5(n),!R.isSVGGraphicsElement(t)){if(t===n||!R.isSVGGraphicsElement(n))return s;t=n}var l=r.getShapeOfElement(t),c=r.getMatrixOfElement(t),f=r.getRootTranslatedMatrix(),d=r.getRootRotatedMatrix(),h=f.multiply(d).multiply(c),p=h.inverse(),m=R.transformLine(a,p),b=m.start.clone(),E=r.getDataOfElement(t);if(e.insideout===!1){E.shapeBBox==null&&(E.shapeBBox=l.bbox());var x=E.shapeBBox;if(x!=null&&x.containsPoint(b))return s}e.extrapolate===!0&&m.setLength(1e6);var O;if(Si.isPath(l)){var D=e.precision||2;E.segmentSubdivisions==null&&(E.segmentSubdivisions=l.getSegmentSubdivisions({precision:D})),O={precision:D,segmentSubdivisions:E.segmentSubdivisions},i=m.intersect(l,O)}else i=m.intersect(l);i?Array.isArray(i)&&(i=b.closest(i)):e.sticky===!0&&(fr.isRectangle(l)?i=l.getNearestPointToPoint(b):lh.isEllipse(l)?i=l.intersectsWithLineFromCenterToPoint(b):i=l.closestPoint(b,O));var I=i?R.transformPoint(i,h):s,F=e.offset||0;return e.stroked!==!1&&(typeof F=="object"?(F=Object.assign({},F),F.x==null&&(F.x=0),F.x+=E1(t)/2):F+=E1(t)/2),C1(I,a.start,F)};function h5(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=o.start,e=o.end,t,i,s,u;switch(a){case"left":u="x",t=e,i=n,s=-1;break;case"right":u="x",t=n,i=e,s=1;break;case"top":u="y",t=e,i=n,s=-1;break;case"bottom":u="y",t=n,i=e,s=1;break;default:return}n[u]<e[u]?t[u]=i[u]:i[u]=t[u],Number.isFinite(r)&&(t[u]+=s*r,i[u]+=s*r)}var v5=function(a,r,n,e){var t=e.alignOffset,i=e.align;return i&&h5(a,i,t),C1(a.end,a.start,e.offset)},Lv;(function(o){o.presets=re,o.registry=lo.create({type:"connection point"}),o.registry.register(o.presets,!0)})(Lv||(Lv={}));var g5=function(a){return Object(ot.a)(a)},p5=function(a,r,n){var e=r.side||"bottom",t=P.normalizeSides(r.padding||40),i=n.sourceBBox,s=n.targetBBox,u=i.getCenter(),l=s.getCenter(),c,f,d;switch(e){case"top":d=-1,c="y",f="height";break;case"left":d=-1,c="x",f="width";break;case"right":d=1,c="x",f="width";break;case"bottom":default:d=1,c="y",f="height";break}return u[c]+=d*(i[f]/2+t[e]),l[c]+=d*(s[f]/2+t[e]),d*(u[c]-l[c])>0?l[c]=u[c]:u[c]=l[c],[u.toJSON()].concat(Object(ot.a)(a),[l.toJSON()])};function w1(o){return new fr(o.x,o.y,0,0)}function x1(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=P.normalizeSides(o.padding||20);return{x:-a.left,y:-a.top,width:a.left+a.right,height:a.top+a.bottom}}function ik(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.sourceBBox.clone().moveAndExpand(x1(a))}function ak(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.targetBBox.clone().moveAndExpand(x1(a))}function m5(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.sourceAnchor)return o.sourceAnchor;var r=ik(o,a);return r.getCenter()}function y5(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.targetAnchor)return o.targetAnchor;var r=ak(o,a);return r.getCenter()}var ok=function(a,r,n){var e=ik(n,r),t=ak(n,r),i=m5(n,r),s=y5(n,r);e=e.union(w1(i)),t=t.union(w1(s));var u=a.map(function(x){return gt.create(x)});u.unshift(i),u.push(s);for(var l=null,c=[],f=0,d=u.length-1;f<d;f+=1){var h=null,p=u[f],m=u[f+1],b=Xl.getBearing(p,m)!=null;if(f===0)f+1===d?e.intersectsWithRect(t.clone().inflate(1))?h=Xl.insideNode(p,m,e,t):b||(h=Xl.nodeToNode(p,m,e,t)):e.containsPoint(m)?h=Xl.insideNode(p,m,e,w1(m).moveAndExpand(x1(r))):b||(h=Xl.nodeToVertex(p,m,e));else if(f+1===d){var E=b&&Xl.getBearing(m,p)===l;t.containsPoint(p)||E?h=Xl.insideNode(p,m,w1(p).moveAndExpand(x1(r)),t,l):b||(h=Xl.vertexToNode(p,m,t,l))}else b||(h=Xl.vertexToVertex(p,m,l));h?(c.push.apply(c,Object(ot.a)(h.points)),l=h.direction):l=Xl.getBearing(p,m),f+1<d&&c.push(m)}return c},Xl;(function(o){var a={N:"S",S:"N",E:"W",W:"E"},r={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function n(f,d,h){var p=new gt(f.x,d.y);return h.containsPoint(p)&&(p=new gt(d.x,f.y)),p}function e(f,d){return f[d==="W"||d==="E"?"width":"height"]}o.getBBoxSize=e;function t(f,d){return f.x===d.x?f.y>d.y?"N":"S":f.y===d.y?f.x>d.x?"W":"E":null}o.getBearing=t;function i(f,d,h){var p=new gt(f.x,d.y),m=new gt(d.x,f.y),b=t(f,p),E=t(f,m),x=h?a[h]:null,O=b===h||b!==x&&(E===x||E!==h)?p:m;return{points:[O],direction:t(O,d)}}o.vertexToVertex=i;function s(f,d,h){var p=n(f,d,h);return{points:[p],direction:t(p,d)}}o.nodeToVertex=s;function u(f,d,h,p){var m=[new gt(f.x,d.y),new gt(d.x,f.y)],b=m.filter(function(I){return!h.containsPoint(I)}),E=b.filter(function(I){return t(I,f)!==p}),x;if(E.length>0)return x=E.filter(function(I){return t(f,I)===p}).pop(),x=x||E[0],{points:[x],direction:t(x,d)};{x=B.difference(m,b)[0];var O=gt.create(d).move(x,-e(h,p)/2),D=n(O,f,h);return{points:[D,O],direction:t(O,d)}}}o.vertexToNode=u;function l(f,d,h,p){var m=s(d,f,p),b=m.points[0];if(h.containsPoint(b)){m=s(f,d,h);var E=m.points[0];if(p.containsPoint(E)){var x=gt.create(f).move(E,-e(h,t(f,E))/2),O=gt.create(d).move(b,-e(p,t(d,b))/2),D=new Ur(x,O).getCenter(),I=s(f,D,h),F=i(D,d,I.direction);m.points=[I.points[0],F.points[0]],m.direction=F.direction}}return m}o.nodeToNode=l;function c(f,d,h,p,m){var b=h.union(p).inflate(1),E=b.getCenter(),x=E.distance(d)>E.distance(f),O=x?d:f,D=x?f:d,I,F,H;m?(I=gt.fromPolar(b.width+b.height,r[m],O),I=b.getNearestPointToPoint(I).move(I,-1)):I=b.getNearestPointToPoint(O).move(O,1),F=n(I,D,b);var $;I.round().equals(F.round())?(F=gt.fromPolar(b.width+b.height,ji.toRad(I.theta(O))+Math.PI/2,D),F=b.getNearestPointToPoint(F).move(D,1).round(),H=n(I,F,b),$=x?[F,H,I]:[I,H,F]):$=x?[F,I]:[I,F];var se=t(x?I:F,d);return{points:$,direction:se}}o.insideNode=c})(Xl||(Xl={}));var b5={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeNodes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){var a=yh(this.step,this);return a},directions:function(){var a=yh(this.step,this),r=yh(this.cost,this);return[{cost:r,offsetX:a,offsetY:0},{cost:r,offsetX:-a,offsetY:0},{cost:r,offsetX:0,offsetY:a},{cost:r,offsetX:0,offsetY:-a}]},penalties:function(){var a=yh(this.step,this);return{0:0,45:a/2,90:a/2}},paddingBox:function(){var a=yh(this.step,this);return{x:-a,y:-a,width:2*a,height:2*a}},fallbackRouter:ok,draggingRouter:null};function yh(o,a){return typeof o=="function"?o.call(a):o}function C5(o){var a=Object.keys(o).reduce(function(n,e){var t=n;return e==="fallbackRouter"||e==="draggingRouter"||e==="fallbackRoute"?t[e]=o[e]:t[e]=yh(o[e],o),n},{});if(a.padding){var r=P.normalizeSides(a.padding);a.paddingBox={x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom}}return a.directions.forEach(function(n){var e=new gt(0,0),t=new gt(n.offsetX,n.offsetY);n.angle=ji.normalize(e.theta(t))}),a}var sk=1,uk=2,E5=function(){function o(){Object(Ie.a)(this,o),this.items=[],this.hash={},this.values={}}return Object(pe.a)(o,[{key:"add",value:function(r,n){var e=this;this.hash[r]?this.items.splice(this.items.indexOf(r),1):this.hash[r]=sk,this.values[r]=n;var t=B.sortedIndexBy(this.items,r,function(i){return e.values[i]});this.items.splice(t,0,r)}},{key:"pop",value:function(){var r=this.items.shift();return r&&(this.hash[r]=uk),r}},{key:"isOpen",value:function(r){return this.hash[r]===sk}},{key:"isClose",value:function(r){return this.hash[r]===uk}},{key:"isEmpty",value:function(){return this.items.length===0}}]),o}(),w5=function(){function o(a){Object(Ie.a)(this,o),this.options=a,this.mapGridSize=100,this.map={}}return Object(pe.a)(o,[{key:"build",value:function(r,n){var e=this.options,t=e.excludeTerminals.reduce(function(c,f){var d=n[f];if(d){var h=r.getCell(d.cell);h&&c.push(h)}return c},[]),i=[],s=r.getCell(n.getSourceCellId());s&&(i=B.union(i,s.getAncestors().map(function(c){return c.id})));var u=r.getCell(n.getTargetCellId());u&&(i=B.union(i,u.getAncestors().map(function(c){return c.id})));var l=this.mapGridSize;return r.getNodes().reduce(function(c,f){var d=f.shape,h=e.excludeShapes,p=d?h.includes(d):!1,m=t.some(function(de){return de.id===f.id}),b=e.excludeNodes.some(function(de){return typeof de=="string"?f.id===de:de===f}),E=i.includes(f.id),x=e.excludeHiddenNodes&&!f.isVisible(),O=p||m||b||E||x;if(!O)for(var D=f.getBBox().moveAndExpand(e.paddingBox),I=D.getOrigin().snapToGrid(l),F=D.getCorner().snapToGrid(l),H=I.x;H<=F.x;H+=l)for(var $=I.y;$<=F.y;$+=l){var se=new gt(H,$).toString();c[se]==null&&(c[se]=[]),c[se].push(D)}return c},this.map),this}},{key:"isAccessible",value:function(r){var n=r.clone().snapToGrid(this.mapGridSize).toString(),e=this.map[n];return e?e.every(function(t){return!t.containsPoint(r)}):!0}}]),o}();function lk(o,a){var r=o.sourceBBox.clone();return a&&a.paddingBox?r.moveAndExpand(a.paddingBox):r}function ck(o,a){var r=o.targetBBox.clone();return a&&a.paddingBox?r.moveAndExpand(a.paddingBox):r}function fk(o,a){if(o.sourceAnchor)return o.sourceAnchor;var r=lk(o,a);return r.getCenter()}function x5(o,a){if(o.targetAnchor)return o.targetAnchor;var r=ck(o,a);return r.getCenter()}function aS(o,a,r,n,e){var t=360/r,i=o.theta(O5(o,a,n,e)),s=ji.normalize(i+t/2);return t*Math.floor(s/t)}function O5(o,a,r,n){var e=n.step,t=a.x-o.x,i=a.y-o.y,s=t/r.x,u=i/r.y,l=s*e,c=u*e;return new gt(o.x+l,o.y+c)}function dk(o,a){var r=Math.abs(o-a);return r>180?360-r:r}function S5(o,a){var r=a.step;return a.directions.forEach(function(n){n.gridOffsetX=n.offsetX/r*o.x,n.gridOffsetY=n.offsetY/r*o.y}),a.directions}function M5(o,a,r){return{source:a.clone(),x:hk(r.x-a.x,o),y:hk(r.y-a.y,o)}}function hk(o,a){if(!o)return a;var r=Math.abs(o),n=Math.round(r/a);if(!n)return r;var e=n*a,t=r-e,i=t/n;return a+i}function A5(o,a){var r=a.source,n=ko.snapToGrid(o.x-r.x,a.x)+r.x,e=ko.snapToGrid(o.y-r.y,a.y)+r.y;return new gt(n,e)}function a0(o,a){return o.round(a)}function O1(o,a,r){return a0(A5(o.clone(),a),r)}function o0(o){return o.toString()}function oS(o){return new gt(o.x===0?0:Math.abs(o.x)/o.x,o.y===0?0:Math.abs(o.y)/o.y)}function vk(o,a){for(var r=Infinity,n=0,e=a.length;n<e;n+=1){var t=o.manhattanDistance(a[n]);t<r&&(r=t)}return r}function gk(o,a,r,n,e){var t=e.precision,i=e.directionMap,s=o.diff(a.getCenter()),u=Object.keys(i).reduce(function(l,c){if(r.includes(c)){for(var f=i[c],d=new gt(o.x+f.x*(Math.abs(s.x)+a.width),o.y+f.y*(Math.abs(s.y)+a.height)),h=new Ur(o,d),p=h.intersect(a)||[],m,b=null,E=0;E<p.length;E+=1){var x=p[E],O=o.squaredDistance(x);(m==null||O>m)&&(m=O,b=x)}if(b){var D=O1(b,n,t);a.containsPoint(D)&&(D=O1(D.translate(f.x*n.x,f.y*n.y),n,t)),l.push(D)}}return l},[]);return a.containsPoint(o)||u.push(O1(o,n,t)),u}function T5(o,a,r,n,e){for(var t=[],i=oS(e.diff(r)),s=o0(r),u=o[s],l;u;){l=a[s];var c=oS(l.diff(u));c.equals(i)||(t.unshift(l),i=c),s=o0(u),u=o[s]}var f=a[s],d=oS(f.diff(n));return d.equals(i)||t.unshift(f),t}function P5(o,a,r,n,e){var t=e.precision,i,s;fr.isRectangle(a)?i=a0(fk(o,e).clone(),t):i=a0(a.clone(),t),fr.isRectangle(r)?s=a0(x5(o,e).clone(),t):s=a0(r.clone(),t);var u=M5(e.step,i,s),l=i,c=s,f,d;if(fr.isRectangle(a)?f=gk(l,a,e.startDirections,u,e):f=[l],fr.isRectangle(r)?d=gk(s,r,e.endDirections,u,e):d=[c],f=f.filter(function(_i){return n.isAccessible(_i)}),d=d.filter(function(_i){return n.isAccessible(_i)}),f.length>0&&d.length>0){for(var h=new E5,p={},m={},b={},E=0,x=f.length;E<x;E+=1){var O=f[E],D=o0(O);h.add(D,vk(O,d)),p[D]=O,b[D]=0}for(var I=e.previousDirectionAngle,F=I===void 0,H,$,se=S5(u,e),de=se.length,Ee=d.reduce(function(_i,Pu){var Kc=o0(Pu);return _i.push(Kc),_i},[]),Oe=gt.equalPoints(f,d),$e=e.maxLoopCount;!h.isEmpty()&&$e>0;){var tt=h.pop(),Le=p[tt],it=m[tt],It=b[tt],tn=Le.equals(l),bn=it==null,dn=void 0;bn?F?tn?dn=null:dn=aS(l,Le,de,u,e):dn=I:dn=aS(it,Le,de,u,e);var en=bn&&Oe;if(!en&&Ee.indexOf(tt)>=0)return e.previousDirectionAngle=dn,T5(m,p,Le,l,c);for(var Vn=0;Vn<de;Vn+=1){H=se[Vn];var jt=H.angle;if($=dk(dn,jt),!(!(F&&tn)&&$>e.maxDirectionChange)){var Cn=O1(Le.clone().translate(H.gridOffsetX||0,H.gridOffsetY||0),u,t),jn=o0(Cn);if(!(h.isClose(jn)||!n.isAccessible(Cn))){if(Ee.indexOf(jn)>=0){var Lr=Cn.equals(c);if(!Lr){var Pr=aS(Cn,c,de,u,e),Wr=dk(jt,Pr);if(Wr>e.maxDirectionChange)continue}}var Jr=H.cost,Ta=tn?0:e.penalties[$],fo=It+Jr+Ta;(!h.isOpen(jn)||fo<b[jn])&&(p[jn]=Cn,m[jn]=Le,b[jn]=fo,h.add(jn,fo+vk(Cn,d)))}}}$e-=1}}return e.fallbackRoute?N.call(e.fallbackRoute,this,l,c,e):null}var k5=function(a,r,n){for(var e=C5(r),t=lk(n,e),i=ck(n,e),s=fk(n,e),u=new w5(e).build(n.graph.model,n.cell),l=a.map(function(F){return gt.create(F)}),c=[],f=s,d,h,p=0,m=l.length;p<=m;p+=1){var b=null;if(d=h||t,h=l[p],h==null){h=i;var E=n.cell,x=E.getSourceCellId()==null||E.getTargetCellId()==null;if(x&&typeof e.draggingRouter=="function"){var O=d===t?s:d,D=h.getOrigin();b=N.call(e.draggingRouter,n,O,D,e)}}if(b==null&&(b=P5(n,d,h,u,e)),b===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),N.call(e.fallbackRouter,this,a,e,n);var I=b[0];I&&I.equals(f)&&b.shift(),f=b[b.length-1]||f,c.push.apply(c,Object(ot.a)(b))}return c},pk=function(a,r,n){return N.call(k5,this,a,Object.assign(Object.assign({},b5),r),n)},D5={maxDirectionChange:45,directions:function(){var a=yh(this.step,this),r=yh(this.cost,this),n=Math.ceil(Math.sqrt(a*a<<1));return[{cost:r,offsetX:a,offsetY:0},{cost:n,offsetX:a,offsetY:a},{cost:r,offsetX:0,offsetY:a},{cost:n,offsetX:-a,offsetY:a},{cost:r,offsetX:-a,offsetY:0},{cost:n,offsetX:-a,offsetY:-a},{cost:r,offsetX:0,offsetY:-a},{cost:n,offsetX:a,offsetY:-a}]},fallbackRoute:function(a,r,n){var e=a.theta(r),t=[],i={x:r.x,y:a.y},s={x:a.x,y:r.y};if(e%180>90){var u=i;i=s,s=u}var l=e%90<45?i:s,c=new Ur(a,l),f=90*Math.ceil(e/90),d=gt.fromPolar(c.squaredLength(),ji.toRad(f+135),l),h=new Ur(r,d),p=c.intersectsWithLine(h),m=p||r,b=p?m:a,E=360/n.directions.length,x=b.theta(r),O=ji.normalize(x+E/2),D=E*Math.floor(O/E);return n.previousDirectionAngle=D,m&&t.push(m.round()),t.push(r),t}},I5=function(a,r,n){return N.call(pk,this,a,Object.assign(Object.assign({},D5),r),n)},R5=function(a,r,n){var e=r.offset||32,t=r.min==null?16:r.min,i=0,s=r.direction,u=n.sourceBBox,l=n.targetBBox,c=u.getCenter(),f=l.getCenter();if(typeof e=="number"&&(i=e),s==null){var d=l.left-u.right,h=l.top-u.bottom;d>=0&&h>=0?s=d>=h?"L":"T":d<=0&&h>=0?(d=u.left-l.right,d>=0?s=d>=h?"R":"T":s="T"):d>=0&&h<=0?(h=u.top-l.bottom,h>=0?s=d>=h?"L":"B":s="L"):(d=u.left-l.right,h=u.top-l.bottom,d>=0&&h>=0?s=d>=h?"R":"B":d<=0&&h>=0?s="B":d>=0&&h<=0?s="R":s=Math.abs(d)>Math.abs(h)?"R":"B")}s==="H"?s=f.x-c.x>=0?"L":"R":s==="V"&&(s=f.y-c.y>=0?"T":"B"),e==="center"&&(s==="L"?i=(l.left-u.right)/2:s==="R"?i=(u.left-l.right)/2:s==="T"?i=(l.top-u.bottom)/2:s==="B"&&(i=(u.top-l.bottom)/2));var p,m,b,E=s==="L"||s==="R";if(E){if(f.y===c.y)return Object(ot.a)(a);b=s==="L"?1:-1,p="x",m="width"}else{if(f.x===c.x)return Object(ot.a)(a);b=s==="T"?1:-1,p="y",m="height"}var x=c.clone(),O=f.clone();if(x[p]+=b*(u[m]/2+i),O[p]-=b*(l[m]/2+i),E){var D=x.x,I=O.x,F=u.width/2+t,H=l.width/2+t;f.x>c.x?I<=D&&(x.x=Math.max(I,c.x+F),O.x=Math.min(D,f.x-H)):I>=D&&(x.x=Math.min(I,c.x-F),O.x=Math.max(D,f.x+H))}else{var $=x.y,se=O.y,de=u.height/2+t,Ee=l.height/2+t;f.y>c.y?se<=$&&(x.y=Math.max(se,c.y+de),O.y=Math.min($,f.y-Ee)):se>=$&&(x.y=Math.min(se,c.y-de),O.y=Math.max($,f.y+Ee))}return[x.toJSON()].concat(Object(ot.a)(a),[O.toJSON()])};function qg(o,a){if(a!=null&&a!==!1){var r=typeof a=="boolean"?0:a;if(r>0){var n=gt.create(o[1]).move(o[2],r),e=gt.create(o[1]).move(o[0],r);return[n.toJSON()].concat(Object(ot.a)(o),[e.toJSON()])}{var t=o[1];return[Object.assign({},t)].concat(Object(ot.a)(o),[Object.assign({},t)])}}return o}var N5=function(a,r,n){var e=r.width||50,t=r.height||80,i=t/2,s=r.angle||"auto",u=n.sourceAnchor,l=n.targetAnchor,c=n.sourceBBox,f=n.targetBBox;if(u.equals(l)){var d=function(bn){var dn=ji.toRad(bn),en=Math.sin(dn),Vn=Math.cos(dn),jt=new gt(u.x+Vn*e,u.y+en*e),Cn=new gt(jt.x-Vn*i,jt.y-en*i),jn=Cn.clone().rotate(-90,jt),Lr=Cn.clone().rotate(90,jt);return[jn.toJSON(),jt.toJSON(),Lr.toJSON()]},h=function(bn){var dn=u.clone().move(bn,-1),en=new Ur(dn,bn);return!c.containsPoint(bn)&&!c.intersectsWithLine(en)},p=[0,90,180,270,45,135,225,315];if(typeof s=="number")return qg(d(s),r.merge);var m=c.getCenter();if(m.equals(u))return qg(d(0),r.merge);var b=m.angleBetween(u,m.clone().translate(1,0)),E=d(b);if(h(E[1]))return qg(E,r.merge);for(var x=1,O=p.length;x<O;x+=1)if(E=d(b+p[x]),h(E[1]))return qg(E,r.merge);return qg(E,r.merge)}{var D=new Ur(u,l),I=D.parallel(-e),F=I.getCenter(),H=I.start.clone().move(I.end,i),$=I.end.clone().move(I.start,i),se=D.parallel(-1),de=new Ur(se.start,F),Ee=new Ur(se.end,F);if((c.containsPoint(F)||f.containsPoint(F)||c.intersectsWithLine(de)||c.intersectsWithLine(Ee)||f.intersectsWithLine(de)||f.intersectsWithLine(Ee))&&(I=D.parallel(e),F=I.getCenter(),H=I.start.clone().move(I.end,i),$=I.end.clone().move(I.start,i)),r.merge){var Oe=new Ur(u,l),$e=new Ur(F,Oe.center).setLength(Number.MAX_SAFE_INTEGER),tt=c.intersectsWithLine($e),Le=f.intersectsWithLine($e),it=tt?Array.isArray(tt)?tt:[tt]:[];Le&&(Array.isArray(Le)?it.push.apply(it,Object(ot.a)(Le)):it.push(Le));var It=Oe.center.closest(it);It?(n.sourceAnchor=It.clone(),n.targetAnchor=It.clone()):(n.sourceAnchor=Oe.center.clone(),n.targetAnchor=Oe.center.clone())}return qg([H.toJSON(),F.toJSON(),$.toJSON()],r.merge)}},wd;(function(o){o.presets=Q,o.registry=lo.create({type:"router"}),o.registry.register(o.presets,!0)})(wd||(wd={}));var L5=function(a,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=[a].concat(Object(ot.a)(n),[r]),i=new Js(t),s=new Si(i);return e.raw?s:s.serialize()},j5=function(a,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=n.length===3?0:1,i=gt.create(n[0+t]),s=gt.create(n[2+t]),u=gt.create(n[1+t]);if(!gt.equals(a,r)){var l=new gt((a.x+r.x)/2,(a.y+r.y)/2),c=l.angleBetween(gt.create(a).rotate(90,l),u);c>1&&(i.rotate(180-c,l),s.rotate(180-c,l),u.rotate(180-c,l))}var f=`
     M `.concat(a.x," ").concat(a.y,`
     Q `).concat(i.x," ").concat(i.y," ").concat(u.x," ").concat(u.y,`
     Q `).concat(s.x," ").concat(s.y," ").concat(r.x," ").concat(r.y,`
  `);return e.raw?Si.parse(f):f},_5=function(a,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=new Si;t.appendSegment(Si.createSegment("M",a));for(var i=1/3,s=2/3,u=e.radius||10,l,c,f=0,d=n.length;f<d;f+=1){var h=gt.create(n[f]),p=n[f-1]||a,m=n[f+1]||r;l=c||h.distance(p)/2,c=h.distance(m)/2;var b=-Math.min(u,l),E=-Math.min(u,c),x=h.clone().move(p,b).round(),O=h.clone().move(m,E).round(),D=new gt(i*x.x+s*h.x,s*h.y+i*x.y),I=new gt(i*O.x+s*h.x,s*h.y+i*O.y);t.appendSegment(Si.createSegment("L",x)),t.appendSegment(Si.createSegment("C",D,I,O))}return t.appendSegment(Si.createSegment("L",r)),e.raw?t:t.serialize()},F5=function(a,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t,i=e.direction;if(n&&n.length!==0){var s=[a].concat(Object(ot.a)(n),[r]),u=pl.throughPoints(s);t=new Si(u)}else if(t=new Si,t.appendSegment(Si.createSegment("M",a)),i||(i=Math.abs(a.x-r.x)>=Math.abs(a.y-r.y)?"H":"V"),i==="H"){var l=(a.x+r.x)/2;t.appendSegment(Si.createSegment("C",l,a.y,l,r.y,r.x,r.y))}else{var c=(a.y+r.y)/2;t.appendSegment(Si.createSegment("C",a.x,c,r.x,c,r.x,r.y))}return e.raw?t:t.serialize()},mk=1,S1=1/3,M1=2/3;function B5(o){var a=o.graph._jumpOverUpdateList;if(a==null&&(a=o.graph._jumpOverUpdateList=[],o.graph.on("cell:mouseup",function(){for(var n=o.graph._jumpOverUpdateList,e=0;e<n.length;e+=1)n[e].update()}),o.graph.on("model:reseted",function(){a=o.graph._jumpOverUpdateList=[]})),a.indexOf(o)<0){a.push(o);var r=function(){return a.splice(a.indexOf(o),1)};o.cell.once("change:connector",r),o.cell.once("removed",r)}}function sS(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=[o].concat(Object(ot.a)(r),[a]),e=[];return n.forEach(function(t,i){var s=n[i+1];s!=null&&e.push(new Ur(t,s))}),e}function G5(o,a){var r=[];return a.forEach(function(n){var e=o.intersectsWithLine(n);e&&r.push(e)}),r}function yk(o,a){return new Ur(o,a).squaredLength()}function z5(o,a,r){return a.reduce(function(n,e,t){if(A1.includes(e))return n;var i=n.pop()||o,s=gt.create(e).move(i.start,-r),u=gt.create(e).move(i.start,+r),l=a[t+1];if(l!=null){var c=u.distance(l);c<=r&&(u=l.move(i.start,c),A1.push(l))}else{var f=s.distance(i.end);if(f<r*2+mk)return n.push(i),n}var d=u.distance(i.start);if(d<r*2+mk)return n.push(i),n;var h=new Ur(s,u);return s0.push(h),n.push(new Ur(i.start,s),h,new Ur(u,i.end)),n},[])}function bk(o,a,r,n){var e=new Si,t;return t=Si.createSegment("M",o[0].start),e.appendSegment(t),o.forEach(function(i,s){if(s0.includes(i)){var u,l,c,f;if(r==="arc"){u=-90,l=i.start.diff(i.end);var d=l.x<0||l.x===0&&l.y<0;d&&(u+=180);var h=i.getCenter(),p=new Ur(h,i.end).rotate(u,h),m;m=new Ur(i.start,h),c=m.pointAt(2/3).rotate(u,i.start),f=p.pointAt(1/3).rotate(-u,p.end),t=Si.createSegment("C",c,f,p.end),e.appendSegment(t),m=new Ur(h,i.end),c=p.pointAt(1/3).rotate(u,p.end),f=m.pointAt(1/3).rotate(-u,i.end),t=Si.createSegment("C",c,f,i.end),e.appendSegment(t)}else if(r==="gap")t=Si.createSegment("M",i.end),e.appendSegment(t);else if(r==="cubic"){u=i.start.theta(i.end);var b=a*.6,E=a*1.35;l=i.start.diff(i.end);var x=l.x<0||l.x===0&&l.y<0;x&&(E*=-1),c=new gt(i.start.x+b,i.start.y+E).rotate(u,i.start),f=new gt(i.end.x-b,i.end.y+E).rotate(u,i.end),t=Si.createSegment("C",c,f,i.end),e.appendSegment(t)}}else{var O=o[s+1];n===0||!O||s0.includes(O)?(t=Si.createSegment("L",i.end),e.appendSegment(t)):U5(n,e,i.end,i.start,O.end)}}),e}function U5(o,a,r,n,e){var t=r.distance(n)/2,i=r.distance(e)/2,s=-Math.min(o,t),u=-Math.min(o,i),l=r.clone().move(n,s).round(),c=r.clone().move(e,u).round(),f=new gt(S1*l.x+M1*r.x,M1*r.y+S1*l.y),d=new gt(S1*c.x+M1*r.x,M1*r.y+S1*c.y),h;h=Si.createSegment("L",l),a.appendSegment(h),h=Si.createSegment("C",f,d,c),a.appendSegment(h)}var s0,A1,V5=function(a,r,n){var e=this,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};s0=[],A1=[],B5(this);var i=t.size||5,s=t.type||"arc",u=t.radius||0,l=t.ignoreConnectors||["smooth"],c=this.graph,f=c.model,d=f.getEdges();if(d.length===1)return bk(sS(a,r,n),i,s,u);var h=this.cell,p=d.indexOf(h),m=c.options.connecting.connector||{},b=d.filter(function(F,H){var $=F.getConnector()||m;return l.includes($.name)?!1:H>p?$.name!=="jumpover":!0}),E=b.map(function(F){return c.renderer.findViewByCell(F)}),x=sS(a,r,n),O=E.map(function(F){return F==null?[]:F===e?x:sS(F.sourcePoint,F.targetPoint,F.routePoints)}),D=[];x.forEach(function(F){var H=b.reduce(function($,se,de){if(se!==h){var Ee=G5(F,O[de]);$.push.apply($,Object(ot.a)(Ee))}return $},[]).sort(function($,se){return yk(F.start,$)-yk(F.start,se)});H.length>0?D.push.apply(D,Object(ot.a)(z5(F,H,i))):D.push(F)});var I=bk(D,i,s,u);return s0=[],A1=[],t.raw?I:I.serialize()},bh;(function(o){o.presets=ge,o.registry=lo.create({type:"connector"}),o.registry.register(o.presets,!0)})(bh||(bh={}));var H5=lo.create,uS=function(){function o(a){Object(Ie.a)(this,o),this.cell=a,this.ids={},this.cache={}}return Object(pe.a)(o,[{key:"get",value:function(){return Object.keys(this.ids)}},{key:"start",value:function(r,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",s=this.cell.getPropByPath(r),u=C.defaults(t,o.defaultOptions),l=this.getTiming(u.timing),c=this.getInterp(u.interp,s,n),f=0,d=Array.isArray(r)?r.join(i):r,h=Array.isArray(r)?r:r.split(i),p=function m(){var b=new Date().getTime();f===0&&(f=b);var E=b-f,x=E/u.duration;x<1?e.ids[d]=R.requestAnimationFrame(m):x=1;var O=c(l(x));e.cell.setPropByPath(h,O),t.progress&&t.progress(Object.assign({progress:x,currentValue:O},e.getArgs(d))),x===1&&(e.cell.notify("transition:end",e.getArgs(d)),e.cell.notify("transition:complete",e.getArgs(d)),t.complete&&t.complete(e.getArgs(d)),e.cell.notify("transition:finish",e.getArgs(d)),t.finish&&t.finish(e.getArgs(d)),e.clean(d))};return setTimeout(function(){e.stop(r,void 0,i),e.cache[d]={startValue:s,targetValue:n,options:u},e.ids[d]=R.requestAnimationFrame(p),e.cell.notify("transition:begin",e.getArgs(d)),e.cell.notify("transition:start",e.getArgs(d)),t.start&&t.start(e.getArgs(d))},t.delay),this.stop.bind(this,r,i,t)}},{key:"stop",value:function(r){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",i=Array.isArray(r)?r:r.split(t);return Object.keys(this.ids).filter(function(s){return C.isEqual(i,s.split(t).slice(0,i.length))}).forEach(function(s){R.cancelAnimationFrame(n.ids[s]);var u=n.cache[s],l=n.getArgs(s),c=Object.assign(Object.assign({},u.options),e),f=c.jumpedToEnd;f&&u.targetValue!=null&&(n.cell.setPropByPath(s,u.targetValue),n.cell.notify("transition:end",Object.assign({},l)),n.cell.notify("transition:complete",Object.assign({},l)),c.complete&&c.complete(Object.assign({},l)));var d=Object.assign({jumpedToEnd:f},l);n.cell.notify("transition:stop",Object.assign({},d)),c.stop&&c.stop(Object.assign({},d)),n.cell.notify("transition:finish",Object.assign({},l)),c.finish&&c.finish(Object.assign({},l)),n.clean(s)}),this}},{key:"clean",value:function(r){delete this.ids[r],delete this.cache[r]}},{key:"getTiming",value:function(r){return typeof r=="string"?Tv[r]:r}},{key:"getInterp",value:function(r,n,e){return r?r(n,e):typeof e=="number"?Pv.number(n,e):typeof e=="string"?e[0]==="#"?Pv.color(n,e):Pv.unit(n,e):Pv.object(n,e)}},{key:"getArgs",value:function(r){var n=this.cache[r];return{path:r,startValue:n.startValue,targetValue:n.targetValue,cell:this.cell}}}]),o}();(function(o){o.defaultOptions={delay:10,duration:100,timing:"linear"}})(uS||(uS={}));var W5=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Ck=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(Ie.a)(this,r),n=a.call(this),n.pending=!1,n.changing=!1,n.data={},n.mutate(C.cloneDeep(e)),n.changed={},n}return Object(pe.a)(r,[{key:"mutate",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.unset===!0,u=i.silent===!0,l=[],c=this.changing;this.changing=!0,c||(this.previous=C.cloneDeep(this.data),this.changed={});var f=this.data,d=this.previous,h=this.changed;if(Object.keys(e).forEach(function(p){var m=p,b=e[m];C.isEqual(f[m],b)||l.push(m),C.isEqual(d[m],b)?delete h[m]:h[m]=b,s?delete f[m]:f[m]=b}),!u&&l.length>0&&(this.pending=!0,this.pendingOptions=i,l.forEach(function(p){t.emit("change:*",{key:p,options:i,store:t,current:f[p],previous:d[p]})})),c)return this;if(!u)for(;this.pending;)this.pending=!1,this.emit("changed",{current:f,previous:d,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}},{key:"get",value:function(e,t){if(e==null)return this.data;var i=this.data[e];return i==null?t:i}},{key:"getPrevious",value:function(e){if(this.previous){var t=this.previous[e];return t==null?void 0:t}}},{key:"set",value:function(e,t,i){return e!=null&&(typeof e=="object"?this.mutate(e,t):this.mutate(Object(Qe.a)({},e,t),i)),this}},{key:"remove",value:function(e,t){var i=void 0,s={},u;if(typeof e=="string")s[e]=i,u=t;else if(Array.isArray(e))e.forEach(function(c){return s[c]=i}),u=t;else{for(var l in this.data)s[l]=i;u=e}return this.mutate(s,Object.assign(Object.assign({},u),{unset:!0})),this}},{key:"getByPath",value:function(e){return C.getByPath(this.data,e,"/")}},{key:"setByPath",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s="/",u=Array.isArray(e)?Object(ot.a)(e):e.split(s),l=Array.isArray(e)?e.join(s):e,c=u[0],f=u.length;if(i.propertyPath=l,i.propertyValue=t,i.propertyPathArray=u,f===1)this.set(c,t,i);else{for(var d={},h=d,p=c,m=1;m<f;m+=1){var b=u[m],E=Number.isFinite(Number(b));h=h[p]=E?[]:{},p=b}C.setByPath(d,u,t,s);var x=C.cloneDeep(this.data);i.rewrite&&C.unsetByPath(x,e,s);var O=C.merge(x,d);this.set(c,O[c],i)}return this}},{key:"removeByPath",value:function(e,t){var i=Array.isArray(e)?e:e.split("/"),s=i[0];if(i.length===1)this.remove(s,t);else{var u=i.slice(1),l=C.cloneDeep(this.get(s));l&&C.unsetByPath(l,u),this.set(s,l,t)}return this}},{key:"hasChanged",value:function(e){return e==null?Object.keys(this.changed).length>0:e in this.changed}},{key:"getChanges",value:function(e){if(e==null)return this.hasChanged()?C.cloneDeep(this.changed):null;var t=this.changing?this.previous:this.data,i={},s;for(var u in e){var l=e[u];C.isEqual(t[u],l)||(i[u]=l,s=!0)}return s?C.cloneDeep(i):null}},{key:"toJSON",value:function(){return C.cloneDeep(this.data)}},{key:"clone",value:function(){var e=this.constructor;return new e(this.data)}},{key:"dispose",value:function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}]),r}(Ls);W5([Ls.dispose()],Ck.prototype,"dispose",null);var $5=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Ek=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Zi=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(Ie.a)(this,n),e=r.call(this);var i=e.constructor,s=i.getDefaults(!0),u=C.merge({},e.preprocess(s),e.preprocess(t));return e.id=u.id||_.uuid(),e.store=new Ck(u),e.animation=new uS(Object(Co.a)(e)),e.setup(),e.init(),e.postprocess(t),e}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"init",value:function(){}},{key:"model",get:function(){return this._model}},{key:"model",set:function(t){this._model!==t&&(this._model=t)}},{key:"preprocess",value:function(t,i){var s=t.id,u=this.constructor,l=u.applyPropHooks(this,t);return s==null&&i!==!0&&(l.id=_.uuid()),l}},{key:"postprocess",value:function(t){}},{key:"setup",value:function(){var t=this;this.store.on("change:*",function(i){var s=i.key,u=i.current,l=i.previous,c=i.options;t.notify("change:*",{key:s,options:c,current:u,previous:l,cell:t}),t.notify("change:".concat(s),{options:c,current:u,previous:l,cell:t});var f=s;(f==="source"||f==="target")&&t.notify("change:terminal",{type:f,current:u,previous:l,options:c,cell:t})}),this.store.on("changed",function(i){var s=i.options;return t.notify("changed",{options:s,cell:t})})}},{key:"notify",value:function(t,i){this.trigger(t,i);var s=this.model;return s&&(s.notify("cell:".concat(t),i),this.isNode()?s.notify("node:".concat(t),Object.assign(Object.assign({},i),{node:this})):this.isEdge()&&s.notify("edge:".concat(t),Object.assign(Object.assign({},i),{edge:this}))),this}},{key:"isNode",value:function(){return!1}},{key:"isEdge",value:function(){return!1}},{key:"isSameStore",value:function(t){return this.store===t.store}},{key:"view",get:function(){return this.store.get("view")}},{key:"shape",get:function(){return this.store.get("shape","")}},{key:"getProp",value:function(t,i){return t==null?this.store.get():this.store.get(t,i)}},{key:"setProp",value:function(t,i,s){if(typeof t=="string")this.store.set(t,i,s);else{var u=this.preprocess(t,!0);this.store.set(C.merge({},this.getProp(),u),i),this.postprocess(t)}return this}},{key:"removeProp",value:function(t,i){return typeof t=="string"||Array.isArray(t)?this.store.removeByPath(t,i):this.store.remove(i),this}},{key:"hasChanged",value:function(t){return t==null?this.store.hasChanged():this.store.hasChanged(t)}},{key:"getPropByPath",value:function(t){return this.store.getByPath(t)}},{key:"setPropByPath",value:function(t,i){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model&&(t==="children"?this._children=i?i.map(function(l){return s.model.getCell(l)}).filter(function(l){return l!=null}):null:t==="parent"&&(this._parent=i?this.model.getCell(i):null)),this.store.setByPath(t,i,u),this}},{key:"removePropByPath",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Array.isArray(t)?t:t.split("/");return s[0]==="attrs"&&(i.dirty=!0),this.store.removeByPath(s,i),this}},{key:"prop",value:function(t,i,s){return t==null?this.getProp():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getPropByPath(t):i==null?this.removePropByPath(t,s||{}):this.setPropByPath(t,i,s||{}):this.setProp(t,i||{})}},{key:"previous",value:function(t){return this.store.getPrevious(t)}},{key:"zIndex",get:function(){return this.getZIndex()}},{key:"zIndex",set:function(t){t==null?this.removeZIndex():this.setZIndex(t)}},{key:"getZIndex",value:function(){return this.store.get("zIndex")}},{key:"setZIndex",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("zIndex",t,i),this}},{key:"removeZIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("zIndex",t),this}},{key:"toFront",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.model;if(i){var s=i.getMaxZIndex(),u;t.deep?(u=this.getDescendants({deep:!0,breadthFirst:!0}),u.unshift(this)):u=[this],s=s-u.length+1;var l=i.total(),c=i.indexOf(this)!==l-u.length;c||(c=u.some(function(f,d){return f.getZIndex()!==s+d})),c&&this.batchUpdate("to-front",function(){s+=u.length,u.forEach(function(f,d){f.setZIndex(s+d,t)})})}return this}},{key:"toBack",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.model;if(i){var s=i.getMinZIndex(),u;t.deep?(u=this.getDescendants({deep:!0,breadthFirst:!0}),u.unshift(this)):u=[this];var l=i.indexOf(this)!==0;l||(l=u.some(function(c,f){return c.getZIndex()!==s+f})),l&&this.batchUpdate("to-back",function(){s-=u.length,u.forEach(function(c,f){c.setZIndex(s+f,t)})})}return this}},{key:"markup",get:function(){return this.getMarkup()}},{key:"markup",set:function(t){t==null?this.removeMarkup():this.setMarkup(t)}},{key:"getMarkup",value:function(){var t=this.store.get("markup");if(t==null){var i=this.constructor;t=i.getMarkup()}return t}},{key:"setMarkup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("markup",t,i),this}},{key:"removeMarkup",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("markup",t),this}},{key:"attrs",get:function(){return this.getAttrs()}},{key:"attrs",set:function(t){t==null?this.removeAttrs():this.setAttrs(t)}},{key:"getAttrs",value:function(){var t=this.store.get("attrs");return t?Object.assign({},t):{}}},{key:"setAttrs",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null)this.removeAttrs(s);else{var u=function(f){return i.store.set("attrs",f,s)};if(s.overwrite===!0)u(t);else{var l=this.getAttrs();s.deep===!1?u(Object.assign(Object.assign({},l),t)):u(C.merge({},l,t))}}return this}},{key:"replaceAttrs",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(t,Object.assign(Object.assign({},i),{overwrite:!0}))}},{key:"updateAttrs",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(t,Object.assign(Object.assign({},i),{deep:!1}))}},{key:"removeAttrs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("attrs",t),this}},{key:"getAttrDefinition",value:function(t){if(!t)return null;var i=this.constructor,s=i.getAttrHooks()||{},u=s[t]||Rc.registry.get(t);if(!u){var l=_.camelCase(t);u=s[l]||Rc.registry.get(l)}return u||null}},{key:"getAttrByPath",value:function(t){return t==null||t===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))}},{key:"setAttrByPath",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setPropByPath(this.prefixAttrPath(t),i,s),this}},{key:"removeAttrByPath",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePropByPath(this.prefixAttrPath(t),i),this}},{key:"prefixAttrPath",value:function(t){return Array.isArray(t)?["attrs"].concat(t):"attrs/".concat(t)}},{key:"attr",value:function(t,i,s){return t==null?this.getAttrByPath():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getAttrByPath(t):i==null?this.removeAttrByPath(t,s||{}):this.setAttrByPath(t,i,s||{}):this.setAttrs(t,i||{})}},{key:"visible",get:function(){return this.isVisible()}},{key:"visible",set:function(t){this.setVisible(t)}},{key:"setVisible",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("visible",t,i),this}},{key:"isVisible",value:function(){return this.store.get("visible")!==!1}},{key:"show",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()||this.setVisible(!0,t),this}},{key:"hide",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()&&this.setVisible(!1,t),this}},{key:"toggleVisible",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=typeof t=="boolean"?t:!this.isVisible(),u=typeof t=="boolean"?i:t;return s?this.show(u):this.hide(u),this}},{key:"data",get:function(){return this.getData()}},{key:"data",set:function(t){this.setData(t)}},{key:"getData",value:function(){return this.store.get("data")}},{key:"setData",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null)this.removeData(s);else{var u=function(f){return i.store.set("data",f,s)};if(s.overwrite===!0)u(t);else{var l=this.getData();s.deep===!1?u(typeof t=="object"?Object.assign(Object.assign({},l),t):t):u(C.merge({},l,t))}}return this}},{key:"replaceData",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(t,Object.assign(Object.assign({},i),{overwrite:!0}))}},{key:"updateData",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(t,Object.assign(Object.assign({},i),{deep:!1}))}},{key:"removeData",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("data",t),this}},{key:"parent",get:function(){return this.getParent()}},{key:"children",get:function(){return this.getChildren()}},{key:"getParentId",value:function(){return this.store.get("parent")}},{key:"getParent",value:function(){var t=this.getParentId();if(t&&this.model){var i=this.model.getCell(t);return this._parent=i,i}return null}},{key:"getChildren",value:function(){var t=this,i=this.store.get("children");if(i&&i.length&&this.model){var s=i.map(function(u){var l;return(l=t.model)===null||l===void 0?void 0:l.getCell(u)}).filter(function(u){return u!=null});return this._children=s,Object(ot.a)(s)}return null}},{key:"hasParent",value:function(){return this.parent!=null}},{key:"isParentOf",value:function(t){return t!=null&&t.getParent()===this}},{key:"isChildOf",value:function(t){return t!=null&&this.getParent()===t}},{key:"eachChild",value:function(t,i){return this.children&&this.children.forEach(t,i),this}},{key:"filterChild",value:function(t,i){return this.children?this.children.filter(t,i):[]}},{key:"getChildCount",value:function(){return this.children==null?0:this.children.length}},{key:"getChildIndex",value:function(t){return this.children==null?-1:this.children.indexOf(t)}},{key:"getChildAt",value:function(t){return this.children!=null&&t>=0?this.children[t]:null}},{key:"getAncestors",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=[],s=this.getParent();s;)i.push(s),s=t.deep!==!1?s.getParent():null;return i}},{key:"getDescendants",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.deep!==!1){if(t.breadthFirst){for(var i=[],s=this.getChildren()||[];s.length>0;){var u=s.shift(),l=u.getChildren();i.push(u),l&&s.push.apply(s,Object(ot.a)(l))}return i}{var c=this.getChildren()||[];return c.forEach(function(f){c.push.apply(c,Object(ot.a)(f.getDescendants(t)))}),c}}return this.getChildren()||[]}},{key:"isDescendantOf",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null)return!1;if(i.deep!==!1){for(var s=this.getParent();s;){if(s===t)return!0;s=s.getParent()}return!1}return this.isChildOf(t)}},{key:"isAncestorOf",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t==null?!1:t.isDescendantOf(this,i)}},{key:"contains",value:function(t){return this.isAncestorOf(t)}},{key:"getCommonAncestor",value:function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return n.getCommonAncestor.apply(n,[this].concat(i))}},{key:"setParent",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._parent=t,t?this.store.set("parent",t.id,i):this.store.remove("parent",i),this}},{key:"setChildren",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._children=t,t!=null?this.store.set("children",t.map(function(s){return s.id}),i):this.store.remove("children",i),this}},{key:"unembed",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.children;if(s!=null&&t!=null){var u=this.getChildIndex(t);u!==-1&&(s.splice(u,1),t.setParent(null,i),this.setChildren(s,i))}return this}},{key:"embed",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.addTo(this,i),this}},{key:"addTo",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n.isCell(t)?t.addChild(this,i):t.addCell(this,i),this}},{key:"insertTo",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.insertChild(this,i,s),this}},{key:"addChild",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertChild(t,void 0,i)}},{key:"insertChild",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null&&t!==this){var u=t.getParent(),l=this!==u,c=i;if(c==null&&(c=this.getChildCount(),l||(c-=1)),u){var f=u.getChildren();if(f){var d=f.indexOf(t);d>=0&&(t.setParent(null,s),f.splice(d,1),u.setChildren(f,s))}}var h=this.children;if(h==null?(h=[],h.push(t)):h.splice(c,0,t),t.setParent(this,s),this.setChildren(h,s),l&&this.model){var p=this.model.getIncomingEdges(this),m=this.model.getOutgoingEdges(this);p&&p.forEach(function(b){return b.updateParent(s)}),m&&m.forEach(function(b){return b.updateParent(s)})}this.model&&this.model.addCell(t,s)}return this}},{key:"removeFromParent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getParent();if(i!=null){var s=i.getChildIndex(this);i.removeChildAt(s,t)}return this}},{key:"removeChild",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getChildIndex(t);return this.removeChildAt(s,i)}},{key:"removeChildAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getChildAt(t),u=this.children;return u!=null&&s!=null&&(this.unembed(s,i),s.remove(i)),s}},{key:"remove",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.batchUpdate("remove",function(){var s=t.getParent();s&&s.removeChild(t,i),i.deep!==!1&&t.eachChild(function(u){return u.remove(i)}),t.model&&t.model.removeCell(t,i)}),this}},{key:"transition",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/";return this.animation.start(t,i,s,u)}},{key:"stopTransition",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/";return this.animation.stop(t,i,s),this}},{key:"getTransitions",value:function(){return this.animation.get()}},{key:"translate",value:function(t,i,s){return this}},{key:"scale",value:function(t,i,s,u){return this}},{key:"addTools",value:function(t,i,s){var u=Array.isArray(t)?t:[t],l=typeof i=="string"?i:null,c=typeof i=="object"?i:typeof s=="object"?s:{};if(c.reset)return this.setTools({name:l,items:u,local:c.local},c);var f=C.cloneDeep(this.getTools());if(f==null||l==null||f.name===l)return f==null&&(f={}),f.items||(f.items=[]),f.name=l,f.items=[].concat(Object(ot.a)(f.items),Object(ot.a)(u)),this.setTools(Object.assign({},f),c)}},{key:"setTools",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t==null?this.removeTools():this.store.set("tools",n.normalizeTools(t),i),this}},{key:"getTools",value:function(){return this.store.get("tools")}},{key:"removeTools",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("tools",t),this}},{key:"hasTools",value:function(t){var i=this.getTools();return i==null?!1:t==null?!0:i.name===t}},{key:"hasTool",value:function(t){var i=this.getTools();return i==null?!1:i.items.some(function(s){return typeof s=="string"?s===t:s.name===t})}},{key:"removeTool",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=C.cloneDeep(this.getTools());if(s){var u=!1,l=s.items.slice(),c=function(m){l.splice(m,1),u=!0};if(typeof t=="number")c(t);else for(var f=l.length-1;f>=0;f-=1){var d=l[f],h=typeof d=="string"?d===t:d.name===t;h&&c(f)}u&&(s.items=l,this.setTools(s,i))}return this}},{key:"getBBox",value:function(t){return new fr}},{key:"getConnectionPoint",value:function(t,i){return new gt}},{key:"toJSON",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Object.assign({},this.store.get()),u=Object.prototype.toString,l=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!s.shape){var c=this.constructor;throw new Error("Unable to serialize ".concat(l,' missing "shape" prop, check the ').concat(l,' "').concat(c.name||u.call(c),'"'))}var f=this.constructor,d=i.diff===!0,h=s.attrs||{},p=f.getDefaults(!0),m=d?this.preprocess(p,!0):p,b=m.attrs||{},E={};Object.keys(s).forEach(function(D){var I=s[D];if(I!=null&&!Array.isArray(I)&&typeof I=="object"&&!C.isPlainObject(I))throw new Error("Can only serialize ".concat(l,' with plain-object props, but got a "').concat(u.call(I),'" type of key "').concat(D,'" on ').concat(l,' "').concat(t.id,'"'));if(D!=="attrs"&&D!=="shape"&&d){var F=m[D];C.isEqual(I,F)&&delete s[D]}}),Object.keys(h).forEach(function(D){var I=h[D],F=b[D];Object.keys(I).forEach(function(H){var $=I[H],se=F?F[H]:null;$!=null&&typeof $=="object"&&!Array.isArray($)?Object.keys($).forEach(function(de){var Ee=$[de];if(F==null||se==null||!C.isObject(se)||!C.isEqual(se[de],Ee)){E[D]==null&&(E[D]={}),E[D][H]==null&&(E[D][H]={});var Oe=E[D][H];Oe[de]=Ee}}):(F==null||!C.isEqual(se,$))&&(E[D]==null&&(E[D]={}),E[D][H]=$)})});var x=Object.assign(Object.assign({},s),{attrs:C.isEmpty(E)?void 0:E});x.attrs==null&&delete x.attrs;var O=x;return O.angle===0&&delete O.angle,C.cloneDeep(O)}},{key:"clone",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t.deep){var i=Object.assign({},this.store.get());t.keepId||delete i.id,delete i.parent,delete i.children;var s=this.constructor;return new s(i)}var u=n.deepClone(this);return u[this.id]}},{key:"findView",value:function(t){return t.renderer.findViewByCell(this)}},{key:"startBatch",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return this.notify("batch:start",{name:t,data:i,cell:this}),s&&s.startBatch(t,Object.assign(Object.assign({},i),{cell:this})),this}},{key:"stopBatch",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return s&&s.stopBatch(t,Object.assign(Object.assign({},i),{cell:this})),this.notify("batch:stop",{name:t,data:i,cell:this}),this}},{key:"batchUpdate",value:function(t,i,s){var u=this.model;this.startBatch(t,s,u);var l=i();return this.stopBatch(t,s,u),l}},{key:"dispose",value:function(){this.removeFromParent(),this.store.dispose()}}],[{key:"config",value:function(t){var i=this,s=t.markup,u=t.propHooks,l=t.attrHooks,c=Ek(t,["markup","propHooks","attrHooks"]);if(s!=null&&(this.markup=s),u)if(this.propHooks=this.propHooks.slice(),Array.isArray(u)){var f;(f=this.propHooks).push.apply(f,Object(ot.a)(u))}else typeof u=="function"?this.propHooks.push(u):Object.keys(u).forEach(function(d){var h=u[d];typeof h=="function"&&i.propHooks.push(h)});l&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),l)),this.defaults=C.merge({},this.defaults,c)}},{key:"getMarkup",value:function(){return this.markup}},{key:"getDefaults",value:function(t){return t?this.defaults:C.cloneDeep(this.defaults)}},{key:"getAttrHooks",value:function(){return this.attrHooks}},{key:"applyPropHooks",value:function(t,i){return this.propHooks.reduce(function(s,u){return u?N.call(u,t,s):s},i)}}]),n}(Ls,Symbol.toStringTag);Zi.defaults={},Zi.attrHooks={},Zi.propHooks=[],$5([Ls.dispose()],Zi.prototype,"dispose",null),function(o){function a(r){return typeof r=="string"?{items:[r]}:Array.isArray(r)?{items:r}:r.items?r:{items:[r]}}o.normalizeTools=a}(Zi||(Zi={})),function(o){o.toStringTag="X6.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"}o.isCell=a}(Zi||(Zi={})),function(o){function a(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];var u=i.filter(function(c){return c!=null}).map(function(c){return c.getAncestors()}).sort(function(c,f){return c.length-f.length}),l=u.shift();return l.find(function(c){return u.every(function(f){return f.includes(c)})})||null}o.getCommonAncestor=a;function r(t){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=null,u=0,l=t.length;u<l;u+=1){var c=t[u],f=c.getBBox(i);if(f){if(c.isNode()){var d=c.getAngle();d!=null&&d!==0&&(f=f.bbox(d))}s=s==null?f:s.union(f)}}return s}o.getCellsBBox=r;function n(t){var i=[t].concat(Object(ot.a)(t.getDescendants({deep:!0})));return o.cloneCells(i)}o.deepClone=n;function e(t){var i=B.uniq(t),s=i.reduce(function(u,l){return u[l.id]=l.clone(),u},{});return i.forEach(function(u){var l=s[u.id];if(l.isEdge()){var c=l.getSourceCellId(),f=l.getTargetCellId();c&&s[c]&&l.setSource(Object.assign(Object.assign({},l.getSource()),{cell:s[c].id})),f&&s[f]&&l.setTarget(Object.assign(Object.assign({},l.getTarget()),{cell:s[f].id}))}var d=u.getParent();d&&s[d.id]&&l.setParent(s[d.id]);var h=u.getChildren();if(h&&h.length){var p=h.reduce(function(m,b){return s[b.id]&&m.push(s[b.id]),m},[]);p.length>0&&l.setChildren(p)}}),s}o.cloneCells=e}(Zi||(Zi={})),function(o){o.config({propHooks:function(r){var n=r.tools,e=Ek(r,["tools"]);return n&&(e.tools=o.normalizeTools(n)),e}})}(Zi||(Zi={}));var ep;(function(o){var a,r;function n(i,s){return s?a!=null&&a.exist(i):r!=null&&r.exist(i)}o.exist=n;function e(i){a=i}o.setEdgeRegistry=e;function t(i){r=i}o.setNodeRegistry=t})(ep||(ep={}));var X5=function(){function o(a){Object(Ie.a)(this,o),this.ports=[],this.groups={},this.init(C.cloneDeep(a))}return Object(pe.a)(o,[{key:"getPorts",value:function(){return this.ports}},{key:"getGroup",value:function(r){return r!=null?this.groups[r]:null}},{key:"getPortsByGroup",value:function(r){return this.ports.filter(function(n){return n.group===r||n.group==null&&r==null})}},{key:"getPortsLayoutByGroup",value:function(r,n){var e=this,t=this.getPortsByGroup(r),i=r?this.getGroup(r):null,s=i?i.position:null,u=s?s.name:null,l;if(u!=null){var c=gh.registry.get(u);if(c==null)return gh.registry.onNotFound(u);l=c}else l=gh.presets.left;var f=t.map(function(p){return p&&p.position&&p.position.args||{}}),d=s&&s.args||{},h=l(f,n,d);return h.map(function(p,m){var b=t[m];return{portLayout:p,portId:b.id,portSize:b.size,portAttrs:b.attrs,labelSize:b.label.size,labelLayout:e.getPortLabelLayout(b,gt.create(p.position),n)}})}},{key:"init",value:function(r){var n=this,e=r.groups,t=r.items;e!=null&&Object.keys(e).forEach(function(i){n.groups[i]=n.parseGroup(e[i])}),Array.isArray(t)&&t.forEach(function(i){n.ports.push(n.parsePort(i))})}},{key:"parseGroup",value:function(r){return Object.assign(Object.assign({},r),{label:this.getLabel(r,!0),position:this.getPortPosition(r.position,!0)})}},{key:"parsePort",value:function(r){var n=Object.assign({},r),e=this.getGroup(r.group)||{};return n.markup=n.markup||e.markup,n.attrs=C.merge({},e.attrs,n.attrs),n.position=this.createPosition(e,n),n.label=C.merge({},e.label,this.getLabel(n)),n.zIndex=this.getZIndex(e,n),n.size=Object.assign(Object.assign({},e.size),n.size),n}},{key:"getZIndex",value:function(r,n){return typeof n.zIndex=="number"?n.zIndex:typeof r.zIndex=="number"||r.zIndex==="auto"?r.zIndex:"auto"}},{key:"createPosition",value:function(r,n){return C.merge({name:"left",args:{}},r.position,{args:n.args})}},{key:"getPortPosition",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r==null){if(n)return{name:"left",args:{}}}else{if(typeof r=="string")return{name:r,args:{}};if(Array.isArray(r))return{name:"absolute",args:{x:r[0],y:r[1]}};if(typeof r=="object")return r}return{args:{}}}},{key:"getPortLabelPosition",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r==null){if(n)return{name:"left",args:{}}}else{if(typeof r=="string")return{name:r,args:{}};if(typeof r=="object")return r}return{args:{}}}},{key:"getLabel",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=r.label||{};return e.position=this.getPortLabelPosition(e.position,n),e}},{key:"getPortLabelLayout",value:function(r,n,e){var t=r.label.position.name||"left",i=r.label.position.args||{},s=Av.registry.get(t)||Av.presets.left;return s?s(n,e,i):null}}]),o}(),T1=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},wa=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(Ie.a)(this,n),e=r.call(this,t),e.initPorts(),e}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"preprocess",value:function(t,i){var s=t.x,u=t.y,l=t.width,c=t.height,f=T1(t,["x","y","width","height"]);if(s!=null||u!=null){var d=f.position;f.position=Object.assign(Object.assign({},d),{x:s!=null?s:d?d.x:0,y:u!=null?u:d?d.y:0})}if(l!=null||c!=null){var h=f.size;f.size=Object.assign(Object.assign({},h),{width:l!=null?l:h?h.width:0,height:c!=null?c:h?h.height:0})}return Object(Vr.a)(Object(Hr.a)(n.prototype),"preprocess",this).call(this,f,i)}},{key:"isNode",value:function(){return!0}},{key:"size",value:function(t,i,s){return t===void 0?this.getSize():typeof t=="number"?this.setSize(t,i,s):this.setSize(t,i)}},{key:"getSize",value:function(){var t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}},{key:"setSize",value:function(t,i,s){return typeof t=="object"?this.resize(t.width,t.height,i):this.resize(t,i,s),this}},{key:"resize",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch("resize",s);var u=s.direction;if(u){var l=this.getSize();switch(u){case"left":case"right":i=l.height;break;case"top":case"bottom":t=l.width;break;default:break}var c={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3},f=c[u],d=ji.normalize(this.getAngle()||0);s.absolute&&(f+=Math.floor((d+45)/90),f%=4);var h=this.getBBox(),p;f===0?p=h.getBottomLeft():f===1?p=h.getCorner():f===2?p=h.getTopRight():p=h.getOrigin();var m=p.clone().rotate(-d,h.getCenter()),b=Math.sqrt(t*t+i*i)/2,E=f*Math.PI/2;E+=Math.atan(f%2==0?i/t:t/i),E-=ji.toRad(d);var x=gt.fromPolar(b,E,m),O=x.clone().translate(t/-2,i/-2);this.store.set("size",{width:t,height:i},s),this.setPosition(O.x,O.y,s)}else this.store.set("size",{width:t,height:i},s);return this.stopBatch("resize",s),this}},{key:"scale",value:function(t,i,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.getBBox().scale(t,i,s==null?void 0:s);return this.startBatch("scale",u),this.setPosition(l.x,l.y,u),this.resize(l.width,l.height,u),this.stopBatch("scale"),this}},{key:"position",value:function(t,i,s){return typeof t=="number"?this.setPosition(t,i,s):this.getPosition(t)}},{key:"getPosition",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.relative){var i=this.getParent();if(i!=null&&i.isNode()){var s=this.getPosition(),u=i.getPosition();return{x:s.x-u.x,y:s.y-u.y}}}var l=this.store.get("position");return l?Object.assign({},l):{x:0,y:0}}},{key:"setPosition",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u,l,c;if(typeof t=="object"?(u=t.x,l=t.y,c=i||{}):(u=t,l=i,c=s||{}),c.relative){var f=this.getParent();if(f!=null&&f.isNode()){var d=f.getPosition();u+=d.x,l+=d.y}}if(c.deep){var h=this.getPosition();this.translate(u-h.x,l-h.y,c)}else this.store.set("position",{x:u,y:l},c);return this}},{key:"translate",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t===0&&i===0)return this;s.translateBy=s.translateBy||this.id;var u=this.getPosition();if(s.restrict!=null&&s.translateBy===this.id){var l=this.getBBox({deep:!0}),c=s.restrict,f=u.x-l.x,d=u.y-l.y,h=Math.max(c.x+f,Math.min(c.x+c.width+f-l.width,u.x+t)),p=Math.max(c.y+d,Math.min(c.y+c.height+d-l.height,u.y+i));t=h-u.x,i=p-u.y}var m={x:u.x+t,y:u.y+i};return s.tx=t,s.ty=i,s.transition?(typeof s.transition!="object"&&(s.transition={}),this.transition("position",m,Object.assign(Object.assign({},s.transition),{interp:Pv.object})),this.eachChild(function(b){var E,x=(E=s.exclude)===null||E===void 0?void 0:E.includes(b);x||b.translate(t,i,s)})):(this.startBatch("translate",s),this.store.set("position",m,s),this.eachChild(function(b){var E,x=(E=s.exclude)===null||E===void 0?void 0:E.includes(b);x||b.translate(t,i,s)}),this.stopBatch("translate",s)),this}},{key:"angle",value:function(t,i){return t==null?this.getAngle():this.rotate(t,i)}},{key:"getAngle",value:function(){return this.store.get("angle",0)}},{key:"rotate",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getAngle();if(i.center){var u=this.getSize(),l=this.getPosition(),c=this.getBBox().getCenter();c.rotate(s-t,i.center);var f=c.x-u.width/2-l.x,d=c.y-u.height/2-l.y;this.startBatch("rotate",{angle:t,options:i}),this.setPosition(l.x+f,l.y+d,i),this.rotate(t,Object.assign(Object.assign({},i),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",i.absolute?t:(s+t)%360,i);return this}},{key:"getBBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.deep){var i=this.getDescendants({deep:!0,breadthFirst:!0});return i.push(this),Zi.getCellsBBox(i)}return fr.fromPositionAndSize(this.getPosition(),this.getSize())}},{key:"getConnectionPoint",value:function(t,i){var s=this.getBBox(),u=s.getCenter(),l=t.getTerminal(i);if(l==null)return u;var c=l.port;if(!c||!this.hasPort(c))return u;var f=this.getPort(c);if(!f||!f.group)return u;var d=this.getPortsPosition(f.group),h=d[c].position,p=gt.create(h).translate(s.getOrigin()),m=this.getAngle();return m&&p.rotate(-m,u),p}},{key:"fit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getChildren()||[],s=i.filter(function(p){return p.isNode()});if(s.length===0)return this;this.startBatch("fit-embeds",t),t.deep&&s.forEach(function(p){return p.fit(t)});var u=Zi.getCellsBBox(s),l=u.x,c=u.y,f=u.width,d=u.height,h=P.normalizeSides(t.padding);return l-=h.left,c-=h.top,f+=h.left+h.right,d+=h.bottom+h.top,this.store.set({position:{x:l,y:c},size:{width:f,height:d}},t),this.stopBatch("fit-embeds"),this}},{key:"portContainerMarkup",get:function(){return this.getPortContainerMarkup()}},{key:"portContainerMarkup",set:function(t){this.setPortContainerMarkup(t)}},{key:"getDefaultPortContainerMarkup",value:function(){return this.store.get("defaultPortContainerMarkup")||Hi.getPortContainerMarkup()}},{key:"getPortContainerMarkup",value:function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}},{key:"setPortContainerMarkup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portContainerMarkup",Hi.clone(t),i),this}},{key:"portMarkup",get:function(){return this.getPortMarkup()}},{key:"portMarkup",set:function(t){this.setPortMarkup(t)}},{key:"getDefaultPortMarkup",value:function(){return this.store.get("defaultPortMarkup")||Hi.getPortMarkup()}},{key:"getPortMarkup",value:function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}},{key:"setPortMarkup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portMarkup",Hi.clone(t),i),this}},{key:"portLabelMarkup",get:function(){return this.getPortLabelMarkup()}},{key:"portLabelMarkup",set:function(t){this.setPortLabelMarkup(t)}},{key:"getDefaultPortLabelMarkup",value:function(){return this.store.get("defaultPortLabelMarkup")||Hi.getPortLabelMarkup()}},{key:"getPortLabelMarkup",value:function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}},{key:"setPortLabelMarkup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portLabelMarkup",Hi.clone(t),i),this}},{key:"ports",get:function(){var t=this.store.get("ports",{items:[]});return t.items==null&&(t.items=[]),t}},{key:"getPorts",value:function(){return C.cloneDeep(this.ports.items)}},{key:"getPortsByGroup",value:function(t){return this.getPorts().filter(function(i){return i.group===t})}},{key:"getPort",value:function(t){return C.cloneDeep(this.ports.items.find(function(i){return i.id&&i.id===t}))}},{key:"getPortAt",value:function(t){return this.ports.items[t]||null}},{key:"hasPorts",value:function(){return this.ports.items.length>0}},{key:"hasPort",value:function(t){return this.getPortIndex(t)!==-1}},{key:"getPortIndex",value:function(t){var i=typeof t=="string"?t:t.id;return i!=null?this.ports.items.findIndex(function(s){return s.id===i}):-1}},{key:"getPortsPosition",value:function(t){var i=this.getSize(),s=this.port.getPortsLayoutByGroup(t,new fr(0,0,i.width,i.height));return s.reduce(function(u,l){var c=l.portLayout;return u[l.portId]={position:Object.assign({},c.position),angle:c.angle||0},u},{})}},{key:"getPortProp",value:function(t,i){return this.getPropByPath(this.prefixPortPath(t,i))}},{key:"setPortProp",value:function(t,i,s,u){if(typeof i=="string"||Array.isArray(i)){var l=this.prefixPortPath(t,i),c=s;return this.setPropByPath(l,c,u)}var f=this.prefixPortPath(t),d=i;return this.setPropByPath(f,d,s)}},{key:"removePortProp",value:function(t,i,s){return typeof i=="string"||Array.isArray(i)?this.removePropByPath(this.prefixPortPath(t,i),s):this.removePropByPath(this.prefixPortPath(t),i)}},{key:"portProp",value:function(t,i,s,u){return i==null?this.getPortProp(t):typeof i=="string"||Array.isArray(i)?arguments.length===2?this.getPortProp(t,i):s==null?this.removePortProp(t,i,u):this.setPortProp(t,i,s,u):this.setPortProp(t,i,s)}},{key:"prefixPortPath",value:function(t,i){var s=this.getPortIndex(t);if(s===-1)throw new Error('Unable to find port with id: "'.concat(t,'"'));return i==null||i===""?["ports","items","".concat(s)]:Array.isArray(i)?["ports","items","".concat(s)].concat(Object(ot.a)(i)):"ports/items/".concat(s,"/").concat(i)}},{key:"addPort",value:function(t,i){var s=Object(ot.a)(this.ports.items);return s.push(t),this.setPropByPath("ports/items",s,i),this}},{key:"addPorts",value:function(t,i){return this.setPropByPath("ports/items",[].concat(Object(ot.a)(this.ports.items),Object(ot.a)(t)),i),this}},{key:"insertPort",value:function(t,i,s){var u=Object(ot.a)(this.ports.items);return u.splice(t,0,i),this.setPropByPath("ports/items",u,s),this}},{key:"removePort",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePortAt(this.getPortIndex(t),i)}},{key:"removePortAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t>=0){var s=Object(ot.a)(this.ports.items);s.splice(t,1),i.rewrite=!0,this.setPropByPath("ports/items",s,i)}return this}},{key:"removePorts",value:function(t,i){var s;if(Array.isArray(t)){if(s=i||{},t.length){s.rewrite=!0;var u=Object(ot.a)(this.ports.items),l=u.filter(function(c){return!t.some(function(f){var d=typeof f=="string"?f:f.id;return c.id===d})});this.setPropByPath("ports/items",l,s)}}else s=t||{},s.rewrite=!0,this.setPropByPath("ports/items",[],s);return this}},{key:"getParsedPorts",value:function(){return this.port.getPorts()}},{key:"getParsedGroups",value:function(){return this.port.groups}},{key:"getPortsLayoutByGroup",value:function(t,i){return this.port.getPortsLayoutByGroup(t,i)}},{key:"initPorts",value:function(){var t=this;this.updatePortData(),this.on("change:ports",function(){t.processRemovedPort(),t.updatePortData()})}},{key:"processRemovedPort",value:function(){var t=this.ports,i={};t.items.forEach(function(d){d.id&&(i[d.id]=!0)});var s={},u=this.store.getPrevious("ports")||{items:[]};u.items.forEach(function(d){d.id&&!i[d.id]&&(s[d.id]=!0)});var l=this.model;if(l&&!C.isEmpty(s)){var c=l.getConnectedEdges(this,{incoming:!0});c.forEach(function(d){var h=d.getTargetPortId();h&&s[h]&&d.remove()});var f=l.getConnectedEdges(this,{outgoing:!0});f.forEach(function(d){var h=d.getSourcePortId();h&&s[h]&&d.remove()})}}},{key:"validatePorts",value:function(){var t=this,i={},s=[];return this.ports.items.forEach(function(u){typeof u!="object"&&s.push("Invalid port ".concat(u,".")),u.id==null&&(u.id=t.generatePortId()),i[u.id]&&s.push("Duplicitied port id."),i[u.id]=!0}),s}},{key:"generatePortId",value:function(){return _.uuid()}},{key:"updatePortData",value:function(){var t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));var i=this.port?this.port.getPorts():null;this.port=new X5(this.ports);var s=this.port.getPorts(),u=i?s.filter(function(c){return i.find(function(f){return f.id===c.id})?null:c}):Object(ot.a)(s),l=i?i.filter(function(c){return s.find(function(f){return f.id===c.id})?null:c}):[];u.length>0&&this.notify("ports:added",{added:u,cell:this,node:this}),l.length>0&&this.notify("ports:removed",{removed:l,cell:this,node:this})}}]),n}(Zi,Symbol.toStringTag);wa.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(o){o.toStringTag="X6.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.size=="function"&&typeof e.position=="function"}o.isNode=a}(wa||(wa={})),function(o){o.config({propHooks:function(r){var n=r.ports,e=T1(r,["ports"]);return n&&(e.ports=Array.isArray(n)?{items:n}:n),e}})}(wa||(wa={})),function(o){o.registry=lo.create({type:"node",process:function(r,n){if(ep.exist(r,!0))throw new Error("Node with name '".concat(r,"' was registered by anthor Edge"));if(typeof n=="function")return n.config({shape:r}),n;var e=o,t=n.inherit,i=T1(n,["inherit"]);if(t)if(typeof t=="string"){var s=this.get(t);s==null?this.onNotFound(t,"inherited"):e=s}else e=t;i.constructorName==null&&(i.constructorName=r);var u=e.define.call(e,i);return u.config({shape:r}),u}}),ep.setNodeRegistry(o.registry)}(wa||(wa={})),function(o){var a=0;function r(t){return t?_.pascalCase(t):(a+=1,"CustomNode".concat(a))}function n(t){var i=t.constructorName,s=t.overwrite,u=T1(t,["constructorName","overwrite"]),l=C.createClass(r(i||u.shape),this);return l.config(u),u.shape&&o.registry.register(u.shape,l,s),l}o.define=n;function e(t){var i=t.shape||"rect",s=o.registry.get(i);return s?new s(t):o.registry.onNotFound(i)}o.create=e}(wa||(wa={}));var K5=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},xs=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"label",get:function(){return this.getLabel()},set:function(e){this.setLabel(e)}},{key:"getLabel",value:function(){return this.getAttrByPath("text/text")}},{key:"setLabel",value:function(e,t){return e==null?this.removeLabel():this.setAttrByPath("text/text",e,t),this}},{key:"removeLabel",value:function(){return this.removeAttrByPath("text/text"),this}}]),r}(wa);(function(o){o.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},o.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},o.config({attrs:{text:Object.assign({},o.labelAttr)},propHooks:function(r){var n=r.label,e=K5(r,["label"]);return n&&C.setByPath(e,"attrs/text/text",n),e},visible:!0})})(xs||(xs={}));var Y5=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r};function Z5(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return'<g class="rotatable"><g class="scalable"><'.concat(o,"/></g>").concat(a?"":"<text/>","</g>")}function lS(o){return"basic.".concat(o)}function u0(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"xlink:href",a=function(n){var e=n.imageUrl,t=n.imageWidth,i=n.imageHeight,s=Y5(n,["imageUrl","imageWidth","imageHeight"]);if(e!=null||t!=null||i!=null){var u=function(){if(s.attrs){var c=s.attrs.image;e!=null&&(c[o]=e),t!=null&&(c.width=t),i!=null&&(c.height=i),s.attrs.image=c}};s.attrs?(s.attrs.image==null&&(s.attrs.image={}),u()):(s.attrs={image:{}},u())}return s};return a}function Pf(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=lS(o),e={constructorName:n,attrs:Object(Qe.a)({".":{fill:"#ffffff",stroke:"none"}},o,{fill:"#ffffff",stroke:"#000000"})};r.ignoreMarkup||(e.markup=Z5(o,r.noText===!0));var t=r.parent||xs;return t.define(C.merge(e,a,{shape:n}))}var XQ=Pf("rect",{attrs:{rect:{width:100,height:60}}}),KQ=Pf("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),YQ=Pf("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),ZQ=Pf("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),JQ=Pf("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),QQ=Pf("image",{attrs:{text:{refY:null,refDy:16}},propHooks:u0()}),J5=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},wk=Pf("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks:function(a){var r=a.d,n=J5(a,["d"]);return r!=null&&C.setByPath(n,"attrs/path/d",r),n}}),qQ=Pf("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:wk,ignoreMarkup:!0}),eq=Pf("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:wk,ignoreMarkup:!0}),P1=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},eo=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(Ie.a)(this,n),r.call(this,e)}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"preprocess",value:function(t,i){var s=t.source,u=t.sourceCell,l=t.sourcePort,c=t.sourcePoint,f=t.target,d=t.targetCell,h=t.targetPort,p=t.targetPoint,m=P1(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),b=m,E=function(se){return typeof se=="string"||typeof se=="number"};if(s!=null)if(Zi.isCell(s))b.source={cell:s.id};else if(E(s))b.source={cell:s};else if(gt.isPoint(s))b.source=s.toJSON();else if(Array.isArray(s))b.source={x:s[0],y:s[1]};else{var x=s.cell;Zi.isCell(x)?b.source=Object.assign(Object.assign({},s),{cell:x.id}):b.source=s}if(u!=null||l!=null){var O=b.source;if(u!=null){var D=E(u)?u:u.id;O?O.cell=D:O=b.source={cell:D}}l!=null&&O&&(O.port=l)}else c!=null&&(b.source=gt.create(c).toJSON());if(f!=null)if(Zi.isCell(f))b.target={cell:f.id};else if(E(f))b.target={cell:f};else if(gt.isPoint(f))b.target=f.toJSON();else if(Array.isArray(f))b.target={x:f[0],y:f[1]};else{var I=f.cell;Zi.isCell(I)?b.target=Object.assign(Object.assign({},f),{cell:I.id}):b.target=f}if(d!=null||h!=null){var F=b.target;if(d!=null){var H=E(d)?d:d.id;F?F.cell=H:F=b.target={cell:H}}h!=null&&F&&(F.port=h)}else p!=null&&(b.target=gt.create(p).toJSON());return Object(Vr.a)(Object(Hr.a)(n.prototype),"preprocess",this).call(this,b,i)}},{key:"setup",value:function(){var t=this;Object(Vr.a)(Object(Hr.a)(n.prototype),"setup",this).call(this),this.on("change:labels",function(i){return t.onLabelsChanged(i)}),this.on("change:vertices",function(i){return t.onVertexsChanged(i)})}},{key:"isEdge",value:function(){return!0}},{key:"disconnect",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}},{key:"source",get:function(){return this.getSource()}},{key:"source",set:function(t){this.setSource(t)}},{key:"getSource",value:function(){return this.getTerminal("source")}},{key:"getSourceCellId",value:function(){return this.source.cell}},{key:"getSourcePortId",value:function(){return this.source.port}},{key:"setSource",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("source",t,i,s)}},{key:"target",get:function(){return this.getTarget()}},{key:"target",set:function(t){this.setTarget(t)}},{key:"getTarget",value:function(){return this.getTerminal("target")}},{key:"getTargetCellId",value:function(){return this.target.cell}},{key:"getTargetPortId",value:function(){return this.target.port}},{key:"setTarget",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("target",t,i,s)}},{key:"getTerminal",value:function(t){return Object.assign({},this.store.get(t))}},{key:"setTerminal",value:function(t,i,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(Zi.isCell(i))return this.store.set(t,C.merge({},s,{cell:i.id}),u),this;var l=i;return gt.isPoint(i)||l.x!=null&&l.y!=null?(this.store.set(t,C.merge({},s,{x:l.x,y:l.y}),u),this):(this.store.set(t,C.cloneDeep(i),u),this)}},{key:"getSourcePoint",value:function(){return this.getTerminalPoint("source")}},{key:"getTargetPoint",value:function(){return this.getTerminalPoint("target")}},{key:"getTerminalPoint",value:function(t){var i=this[t];if(gt.isPointLike(i))return gt.create(i);var s=this.getTerminalCell(t);return s?s.getConnectionPoint(this,t):new gt}},{key:"getSourceCell",value:function(){return this.getTerminalCell("source")}},{key:"getTargetCell",value:function(){return this.getTerminalCell("target")}},{key:"getTerminalCell",value:function(t){if(this.model){var i=t==="source"?this.getSourceCellId():this.getTargetCellId();if(i)return this.model.getCell(i)}return null}},{key:"getSourceNode",value:function(){return this.getTerminalNode("source")}},{key:"getTargetNode",value:function(){return this.getTerminalNode("target")}},{key:"getTerminalNode",value:function(t){for(var i=this,s={};i&&i.isEdge();){if(s[i.id])return null;s[i.id]=!0,i=i.getTerminalCell(t)}return i&&i.isNode()?i:null}},{key:"router",get:function(){return this.getRouter()}},{key:"router",set:function(t){t==null?this.removeRouter():this.setRouter(t)}},{key:"getRouter",value:function(){return this.store.get("router")}},{key:"setRouter",value:function(t,i,s){return typeof t=="object"?this.store.set("router",t,i):this.store.set("router",{name:t,args:i},s),this}},{key:"removeRouter",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("router",t),this}},{key:"connector",get:function(){return this.getConnector()}},{key:"connector",set:function(t){t==null?this.removeConnector():this.setConnector(t)}},{key:"getConnector",value:function(){return this.store.get("connector")}},{key:"setConnector",value:function(t,i,s){return typeof t=="object"?this.store.set("connector",t,i):this.store.set("connector",{name:t,args:i},s),this}},{key:"removeConnector",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("connector",t)}},{key:"strategy",get:function(){return this.getStrategy()}},{key:"strategy",set:function(t){t==null?this.removeStrategy():this.setStrategy(t)}},{key:"getStrategy",value:function(){return this.store.get("strategy")}},{key:"setStrategy",value:function(t,i,s){return typeof t=="object"?this.store.set("strategy",t,i):this.store.set("strategy",{name:t,args:i},s),this}},{key:"removeStrategy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("strategy",t)}},{key:"getDefaultLabel",value:function(){var t=this.constructor,i=this.store.get("defaultLabel")||t.defaultLabel||{};return C.cloneDeep(i)}},{key:"labels",get:function(){return this.getLabels()}},{key:"labels",set:function(t){this.setLabels(t)}},{key:"getLabels",value:function(){var t=this;return Object(ot.a)(this.store.get("labels",[])).map(function(i){return t.parseLabel(i)})}},{key:"setLabels",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("labels",Array.isArray(t)?t:[t],i),this}},{key:"insertLabel",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=this.getLabels(),l=u.length,c=i!=null&&Number.isFinite(i)?i:l;return c<0&&(c=l+c+1),u.splice(c,0,this.parseLabel(t)),this.setLabels(u,s)}},{key:"appendLabel",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertLabel(t,-1,i)}},{key:"getLabelAt",value:function(t){var i=this.getLabels();return t!=null&&Number.isFinite(t)?this.parseLabel(i[t]):null}},{key:"setLabelAt",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null&&Number.isFinite(t)){var u=this.getLabels();u[t]=this.parseLabel(i),this.setLabels(u,s)}return this}},{key:"removeLabelAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getLabels(),u=t!=null&&Number.isFinite(t)?t:-1,l=s.splice(u,1);return this.setLabels(s,i),l.length?l[0]:null}},{key:"parseLabel",value:function(t){if(typeof t=="string"){var i=this.constructor;return i.parseStringLabel(t)}return t}},{key:"onLabelsChanged",value:function(t){var i=t.previous,s=t.current,u=i&&s?s.filter(function(c){return i.find(function(f){return c===f||C.isEqual(c,f)})?null:c}):s?Object(ot.a)(s):[],l=i&&s?i.filter(function(c){return s.find(function(f){return c===f||C.isEqual(c,f)})?null:c}):i?Object(ot.a)(i):[];u.length>0&&this.notify("labels:added",{added:u,cell:this,edge:this}),l.length>0&&this.notify("labels:removed",{removed:l,cell:this,edge:this})}},{key:"vertexMarkup",get:function(){return this.getVertexMarkup()}},{key:"vertexMarkup",set:function(t){this.setVertexMarkup(t)}},{key:"getDefaultVertexMarkup",value:function(){return this.store.get("defaultVertexMarkup")||Hi.getEdgeVertexMarkup()}},{key:"getVertexMarkup",value:function(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}},{key:"setVertexMarkup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("vertexMarkup",Hi.clone(t),i),this}},{key:"vertices",get:function(){return this.getVertices()}},{key:"vertices",set:function(t){this.setVertices(t)}},{key:"getVertices",value:function(){return Object(ot.a)(this.store.get("vertices",[]))}},{key:"setVertices",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Array.isArray(t)?t:[t];return this.store.set("vertices",s.map(function(u){return gt.toJSON(u)}),i),this}},{key:"insertVertex",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=this.getVertices(),l=u.length,c=i!=null&&Number.isFinite(i)?i:l;return c<0&&(c=l+c+1),u.splice(c,0,gt.toJSON(t)),this.setVertices(u,s)}},{key:"appendVertex",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertVertex(t,-1,i)}},{key:"getVertexAt",value:function(t){if(t!=null&&Number.isFinite(t)){var i=this.getVertices();return i[t]}return null}},{key:"setVertexAt",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null&&Number.isFinite(t)){var u=this.getVertices();u[t]=i,this.setVertices(u,s)}return this}},{key:"removeVertexAt",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getVertices(),u=t!=null&&Number.isFinite(t)?t:-1;return s.splice(u,1),this.setVertices(s,i)}},{key:"onVertexsChanged",value:function(t){var i=t.previous,s=t.current,u=i&&s?s.filter(function(c){return i.find(function(f){return gt.equals(c,f)})?null:c}):s?Object(ot.a)(s):[],l=i&&s?i.filter(function(c){return s.find(function(f){return gt.equals(c,f)})?null:c}):i?Object(ot.a)(i):[];u.length>0&&this.notify("vertexs:added",{added:u,cell:this,edge:this}),l.length>0&&this.notify("vertexs:removed",{removed:l,cell:this,edge:this})}},{key:"getDefaultMarkup",value:function(){return this.store.get("defaultMarkup")||Hi.getEdgeMarkup()}},{key:"getMarkup",value:function(){return Object(Vr.a)(Object(Hr.a)(n.prototype),"getMarkup",this).call(this)||this.getDefaultMarkup()}},{key:"toolMarkup",get:function(){return this.getToolMarkup()}},{key:"toolMarkup",set:function(t){this.setToolMarkup(t)}},{key:"getDefaultToolMarkup",value:function(){return this.store.get("defaultToolMarkup")||Hi.getEdgeToolMarkup()}},{key:"getToolMarkup",value:function(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}},{key:"setToolMarkup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("toolMarkup",t,i),this}},{key:"doubleToolMarkup",get:function(){return this.getDoubleToolMarkup()}},{key:"doubleToolMarkup",set:function(t){this.setDoubleToolMarkup(t)}},{key:"getDefaultDoubleToolMarkup",value:function(){return this.store.get("defaultDoubleToolMarkup")}},{key:"getDoubleToolMarkup",value:function(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}},{key:"setDoubleToolMarkup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("doubleToolMarkup",t,i),this}},{key:"arrowheadMarkup",get:function(){return this.getArrowheadMarkup()}},{key:"arrowheadMarkup",set:function(t){this.setArrowheadMarkup(t)}},{key:"getDefaultArrowheadMarkup",value:function(){return this.store.get("defaultArrowheadMarkup")||Hi.getEdgeArrowheadMarkup()}},{key:"getArrowheadMarkup",value:function(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}},{key:"setArrowheadMarkup",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("arrowheadMarkup",t,i),this}},{key:"translate",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return s.translateBy=s.translateBy||this.id,s.tx=t,s.ty=i,this.applyToPoints(function(u){return{x:(u.x||0)+t,y:(u.y||0)+i}},s)}},{key:"scale",value:function(t,i,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.applyToPoints(function(l){return gt.create(l).scale(t,i,s).toJSON()},u)}},{key:"applyToPoints",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s={},u=this.getSource(),l=this.getTarget();gt.isPointLike(u)&&(s.source=t(u)),gt.isPointLike(l)&&(s.target=t(l));var c=this.getVertices();return c.length>0&&(s.vertices=c.map(t)),this.store.set(s,i),this}},{key:"getBBox",value:function(){return this.getPolyline().bbox()}},{key:"getConnectionPoint",value:function(){return this.getPolyline().pointAt(.5)}},{key:"getPolyline",value:function(){var t=[this.getSourcePoint()].concat(Object(ot.a)(this.getVertices().map(function(i){return gt.create(i)})),[this.getTargetPoint()]);return new Js(t)}},{key:"updateParent",value:function(t){var i=null,s=this.getSourceCell(),u=this.getTargetCell(),l=this.getParent();return s&&u&&(s===u||s.isDescendantOf(u)?i=u:u.isDescendantOf(s)?i=s:i=Zi.getCommonAncestor(s,u)),l&&(!i||i.id!==l.id)&&l.unembed(this,t),i&&i.embed(this,t),i}},{key:"hasLoop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getSource(),s=this.getTarget(),u=i.cell,l=s.cell;if(!u||!l)return!1;var c=u===l;if(!c&&t.deep&&this._model){var f=this.getSourceCell(),d=this.getTargetCell();f&&d&&(c=f.isAncestorOf(d,t)||d.isAncestorOf(f,t))}return c}},{key:"getFragmentAncestor",value:function(){var t=[this,this.getSourceNode(),this.getTargetNode()].filter(function(i){return i!=null});return this.getCommonAncestor.apply(this,Object(ot.a)(t))}},{key:"isFragmentDescendantOf",value:function(t){var i=this.getFragmentAncestor();return!!i&&(i.id===t.id||i.isDescendantOf(t))}}]),n}(Zi,Symbol.toStringTag);eo.defaults={},function(o){function a(r,n){var e=r,t=n;return e.cell===t.cell?e.port===t.port||e.port==null&&t.port==null:!1}o.equalTerminals=a}(eo||(eo={})),function(o){o.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function a(r){return{attrs:{label:{text:r}}}}o.parseStringLabel=a}(eo||(eo={})),function(o){o.toStringTag="X6.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.disconnect=="function"&&typeof e.getSource=="function"&&typeof e.getTarget=="function"}o.isEdge=a}(eo||(eo={})),function(o){o.registry=lo.create({type:"edge",process:function(r,n){if(ep.exist(r,!1))throw new Error("Edge with name '".concat(r,"' was registered by anthor Node"));if(typeof n=="function")return n.config({shape:r}),n;var e=o,t=n.inherit,i=t===void 0?"edge":t,s=P1(n,["inherit"]);if(typeof i=="string"){var u=this.get(i||"edge");u==null&&i?this.onNotFound(i,"inherited"):e=u}else e=i;s.constructorName==null&&(s.constructorName=r);var l=e.define.call(e,s);return l.config({shape:r}),l}}),ep.setEdgeRegistry(o.registry)}(eo||(eo={})),function(o){var a=0;function r(t){return t?_.pascalCase(t):(a+=1,"CustomEdge".concat(a))}function n(t){var i=t.constructorName,s=t.overwrite,u=P1(t,["constructorName","overwrite"]),l=C.createClass(r(i||u.shape),this);return l.config(u),u.shape&&o.registry.register(u.shape,l,s),l}o.define=n;function e(t){var i=t.shape||"edge",s=o.registry.get(i);return s?new s(t):o.registry.onNotFound(i)}o.create=e}(eo||(eo={})),function(o){var a="basic.edge";o.config({shape:a,propHooks:function(n){var e=n.label,t=n.vertices,i=P1(n,["label","vertices"]);if(e){i.labels==null&&(i.labels=[]);var s=typeof e=="string"?o.parseStringLabel(e):e;i.labels.push(s)}return t&&Array.isArray(t)&&(i.vertices=t.map(function(u){return gt.create(u).toJSON()})),i}}),o.registry.register(a,o)}(eo||(eo={}));var Q5=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},jv=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(){var e;return Object(Ie.a)(this,n),e=r.apply(this,arguments),e.POINT_ROUNDING=2,e.markerCache={},e}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"getContainerClassName",value:function(){return[Object(Vr.a)(Object(Hr.a)(n.prototype),"getContainerClassName",this).call(this),this.prefixClassName("edge")].join(" ")}},{key:"sourceBBox",get:function(){var t=this.sourceView;if(!t){var i=this.cell.getSource();return new fr(i.x,i.y)}var s=this.sourceMagnet;return t.isEdgeElement(s)?new fr(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(s||t.container)}},{key:"targetBBox",get:function(){var t=this.targetView;if(!t){var i=this.cell.getTarget();return new fr(i.x,i.y)}var s=this.targetMagnet;return t.isEdgeElement(s)?new fr(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(s||t.container)}},{key:"isEdgeView",value:function(){return!0}},{key:"confirmUpdate",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t;if(this.hasAction(u,"source")){if(!this.updateTerminalProperties("source"))return u;u=this.removeAction(u,"source")}if(this.hasAction(u,"target")){if(!this.updateTerminalProperties("target"))return u;u=this.removeAction(u,"target")}var l=this.graph,c=this.sourceView,f=this.targetView;return l&&(c&&!l.renderer.isViewMounted(c)||f&&!l.renderer.isViewMounted(f))?u:this.hasAction(u,"render")?(this.render(),u=this.removeAction(u,["render","update","vertices","labels","tools","widget"]),u):(u=this.handleAction(u,"vertices",function(){return i.renderVertexMarkers()}),u=this.handleAction(u,"update",function(){return i.update(null,s)}),u=this.handleAction(u,"labels",function(){return i.onLabelsChange(s)}),u=this.handleAction(u,"tools",function(){i.renderTools(),i.updateToolsPosition()}),u=this.handleAction(u,"widget",function(){return i.renderExternalTools()}),u)}},{key:"onLabelsChange",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}},{key:"shouldRerenderLabels",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.cell.previous("labels");if(i==null)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var s=t.propertyPathArray||[],u=s.length;if(u>1){var l=s[1];if(i[l]){if(u===2)return typeof t.propertyValue=="object"&&C.has(t.propertyValue,"markup");if(s[2]!=="markup")return!1}}}return!0}},{key:"render",value:function(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this}},{key:"renderMarkup",value:function(){var t=this.cell.markup;if(t)return typeof t=="string"?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid edge markup.")}},{key:"renderJSONMarkup",value:function(t){var i=this.parseJSONMarkup(t,this.container);this.selectors=i.selectors,this.container.append(i.fragment)}},{key:"renderStringMarkup",value:function(t){var i=this.containers,s=mi.createVectors(t);s.forEach(function(u){var l=u.attr("class");l&&(i[_.camelCase(l)]=u.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),R.append(this.container,s.map(function(u){return u.node}))}},{key:"renderLabels",value:function(){var t=this.cell,i=t.getLabels(),s=i.length,u=this.containers.labels;if(this.labelCache={},this.labelSelectors={},s<=0)return u&&u.parentNode&&u.parentNode.removeChild(u),this;u?this.empty(u):(u=R.createSvgElement("g"),this.addClass(this.prefixClassName("edge-labels"),u),this.containers.labels=u);for(var l=0,c=i.length;l<c;l+=1){var f=i[l],d=this.normalizeLabelMarkup(this.parseLabelMarkup(f.markup)),h=void 0,p=void 0;if(d)h=d.node,p=d.selectors;else{var m=t.getDefaultLabel(),b=this.normalizeLabelMarkup(this.parseLabelMarkup(m.markup));h=b.node,p=b.selectors}h.setAttribute("data-index","".concat(l)),u.appendChild(h);var E=this.rootSelector;if(p[E])throw new Error("Ambiguous label root selector.");p[E]=h,this.labelCache[l]=h,this.labelSelectors[l]=p}return u.parentNode==null&&this.container.appendChild(u),this.updateLabels(),this.customizeLabels(),this}},{key:"parseLabelMarkup",value:function(t){return t?typeof t=="string"?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null}},{key:"parseLabelStringMarkup",value:function(t){for(var i=mi.createVectors(t),s=document.createDocumentFragment(),u=0,l=i.length;u<l;u+=1){var c=i[u].node;s.appendChild(c)}return{fragment:s,selectors:{}}}},{key:"normalizeLabelMarkup",value:function(t){if(t!=null){var i=t.fragment;if(!(i instanceof DocumentFragment)||!i.hasChildNodes())throw new Error("Invalid label markup.");var s,u=i.childNodes;return u.length>1||u[0].nodeName.toUpperCase()!=="G"?s=mi.create("g").append(i):s=mi.create(u[0]),s.addClass(this.prefixClassName("edge-label")),{node:s.node,selectors:t.selectors}}}},{key:"updateLabels",value:function(){if(this.containers.labels)for(var t=this.cell,i=t.labels,s=this.can("edgeLabelMovable"),u=t.getDefaultLabel(),l=0,c=i.length;l<c;l+=1){var f=this.labelCache[l],d=this.labelSelectors[l];f.setAttribute("cursor",s?"move":"default");var h=i[l],p=C.merge({},u.attrs,h.attrs);this.updateAttrs(f,p,{selectors:d,rootBBox:h.size?fr.fromSize(h.size):void 0})}}},{key:"mergeLabelAttrs",value:function(t,i,s){if(i===null)return null;if(i===void 0)return s===null?null:s===void 0?void 0:t?s:C.merge({},s);if(t)return C.merge({},s,i)}},{key:"customizeLabels",value:function(){if(this.containers.labels)for(var t=this.cell,i=t.labels,s=0,u=i.length;s<u;s+=1){var l=i[s],c=this.labelCache[s],f=this.labelSelectors[s];this.graph.hook.onEdgeLabelRendered({edge:t,label:l,container:c,selectors:f})}}},{key:"renderTools",value:function(){var t=this.containers.tools;if(t==null)return this;var i=this.cell.toolMarkup,s=this.$(t).empty();if(Hi.isStringMarkup(i)){var u=_.template(i),l=mi.create(u());if(s.append(l.node),this.toolCache=l.node,this.options.doubleTools){var c,f=this.cell.doubleToolMarkup;Hi.isStringMarkup(f)?(u=_.template(f),c=mi.create(u())):c=l.clone(),s.append(c.node),this.tool2Cache=c.node}}return this}},{key:"renderExternalTools",value:function(){var t=this.cell.getTools();return this.addTools(t),this}},{key:"renderVertexMarkers",value:function(){var t=this.containers.vertices;if(t==null)return this;var i=this.cell.vertexMarkup,s=this.$(t).empty();if(Hi.isStringMarkup(i)){var u=_.template(i);this.cell.getVertices().forEach(function(l,c){s.append(mi.create(u(Object.assign({index:c},l))).node)})}return this}},{key:"renderArrowheadMarkers",value:function(){var t=this.containers.arrowheads;if(t==null)return this;var i=this.cell.arrowheadMarkup,s=this.$(t).empty();if(Hi.isStringMarkup(i)){var u=_.template(i),l=mi.create(u({end:"source"})).node,c=mi.create(u({end:"target"})).node;this.containers.sourceArrowhead=l,this.containers.targetArrowhead=c,s.append(l,c)}return this}},{key:"update",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.cleanCache(),this.updateConnection(i);var s=this.cell.getAttrs();return s!=null&&this.updateAttrs(this.container,s,{attrs:t===s?null:t,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(i),this}},{key:"removeRedundantLinearVertices",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.cell,s=i.getVertices(),u=[this.sourceAnchor].concat(Object(ot.a)(s),[this.targetAnchor]),l=u.length,c=new Js(u);c.simplify({threshold:.01});var f=c.points.map(function(h){return h.toJSON()}),d=f.length;return l===d?0:(i.setVertices(f.slice(1,d-1),t),l-d)}},{key:"updateConnectionPath",value:function(){var t=this.containers;if(t.connection){var i=this.getConnectionPathData();t.connection.setAttribute("d",i)}if(t.connectionWrap){var s=this.getConnectionPathData();t.connectionWrap.setAttribute("d",s)}t.sourceMarker&&t.targetMarker&&this.translateAndAutoOrientArrows(t.sourceMarker,t.targetMarker)}},{key:"getTerminalView",value:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalAnchor",value:function(t){switch(t){case"source":return gt.create(this.sourceAnchor);case"target":return gt.create(this.targetAnchor);default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalConnectionPoint",value:function(t){switch(t){case"source":return gt.create(this.sourcePoint);case"target":return gt.create(this.targetPoint);default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalMagnet",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case"source":{if(i.raw)return this.sourceMagnet;var s=this.sourceView;return s?this.sourceMagnet||s.container:null}case"target":{if(i.raw)return this.targetMagnet;var u=this.targetView;return u?this.targetMagnet||u.container:null}default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"updateConnection",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.cell;if(t.translateBy&&i.isFragmentDescendantOf(t.translateBy)){var s=t.tx||0,u=t.ty||0;this.routePoints=new Js(this.routePoints).translate(s,u).points,this.translateConnectionPoints(s,u),this.path.translate(s,u)}else{var l=i.getVertices(),c=this.findAnchors(l);this.sourceAnchor=c.source,this.targetAnchor=c.target,this.routePoints=this.findRoutePoints(l);var f=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=f.source,this.targetPoint=f.target;var d=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,d.source||this.sourcePoint,d.target||this.targetPoint)}this.cleanCache()}},{key:"findAnchors",value:function(t){var i=this.cell,s=i.source,u=i.target,l=t[0],c=t[t.length-1];return u.priority&&!s.priority?this.findAnchorsOrdered("target",c,"source",l):this.findAnchorsOrdered("source",l,"target",c)}},{key:"findAnchorsOrdered",value:function(t,i,s,u){var l,c,f,d=this.cell,h=d[t],p=d[s],m=this.getTerminalView(t),b=this.getTerminalView(s),E=this.getTerminalMagnet(t),x=this.getTerminalMagnet(s);if(m){var O;i?O=gt.create(i):b?O=x:O=gt.create(p),c=this.getAnchor(h.anchor,m,E,O,t)}else c=gt.create(h);if(b){var D=gt.create(u||c);f=this.getAnchor(p.anchor,b,x,D,s)}else f=gt.isPointLike(p)?gt.create(p):new gt;return l={},Object(Qe.a)(l,t,c),Object(Qe.a)(l,s,f),l}},{key:"getAnchor",value:function(t,i,s,u,l){var c=i.isEdgeElement(s),f=this.graph.options.connecting,d=typeof t=="string"?{name:t}:t;if(!d){var h=c?(l==="source"?f.sourceEdgeAnchor:f.targetEdgeAnchor)||f.edgeAnchor:(l==="source"?f.sourceAnchor:f.targetAnchor)||f.anchor;d=typeof h=="string"?{name:h}:h}if(!d)throw new Error("Anchor should be specified.");var p,m=d.name;if(c){var b=Nv.registry.get(m);if(typeof b!="function")return Nv.registry.onNotFound(m);p=N.call(b,this,i,s,u,d.args||{},l)}else{var E=Rv.registry.get(m);if(typeof E!="function")return Rv.registry.onNotFound(m);p=N.call(E,this,i,s,u,d.args||{},l)}return p?p.round(this.POINT_ROUNDING):new gt}},{key:"findRoutePoints",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=this.graph.options.connecting.router||wd.presets.normal,s=this.cell.getRouter()||i,u;if(typeof s=="function")u=N.call(s,this,t,{},this);else{var l=typeof s=="string"?s:s.name,c=typeof s=="string"?{}:s.args||{},f=l?wd.registry.get(l):wd.presets.normal;if(typeof f!="function")return wd.registry.onNotFound(l);u=N.call(f,this,t,c,this)}return u==null?t.map(function(d){return gt.create(d)}):u.map(function(d){return gt.create(d)})}},{key:"findConnectionPoints",value:function(t,i,s){var u=this.cell,l=this.graph.options.connecting,c=u.getSource(),f=u.getTarget(),d=this.sourceView,h=this.targetView,p=t[0],m=t[t.length-1],b;if(d&&!d.isEdgeElement(this.sourceMagnet)){var E=this.sourceMagnet||d.container,x=p||s,O=new Ur(x,i),D=c.connectionPoint||l.sourceConnectionPoint||l.connectionPoint;b=this.getConnectionPoint(D,d,E,O,"source")}else b=i;var I;if(h&&!h.isEdgeElement(this.targetMagnet)){var F=this.targetMagnet||h.container,H=f.connectionPoint||l.targetConnectionPoint||l.connectionPoint,$=m||i,se=new Ur($,s);I=this.getConnectionPoint(H,h,F,se,"target")}else I=s;return{source:b,target:I}}},{key:"getConnectionPoint",value:function(t,i,s,u,l){var c=u.end;if(t==null)return c;var f=typeof t=="string"?t:t.name,d=typeof t=="string"?{}:t.args,h=Lv.registry.get(f);if(typeof h!="function")return Lv.registry.onNotFound(f);var p=N.call(h,this,u,i,s,d||{},l);return p?p.round(this.POINT_ROUNDING):c}},{key:"updateMarkerAttr",value:function(t){var i=this.cell.getAttrs(),s=".".concat(t,"-marker"),u=i&&i[s];u&&this.updateAttrs(this.container,{},{attrs:Object(Qe.a)({},s,u),selectors:this.selectors})}},{key:"findMarkerPoints",value:function(t,i,s){var u=this,l=function(F){for(var H=u.cell.getAttrs(),$=Object.keys(H),se=0,de=$.length;se<de;se+=1){var Ee=H[$[se]];if(Ee["".concat(F,"Marker")]||Ee["".concat(F,"-marker")]){var Oe=Ee.strokeWidth||Ee["stroke-width"];if(Oe)return parseFloat(Oe);break}}return null},c=t[0],f=t[t.length-1],d=this.containers.sourceMarker,h=this.containers.targetMarker,p=this.markerCache,m,b;if(d){if(this.updateMarkerAttr("source"),p.sourceBBox=p.sourceBBox||R.getBBox(d),p.sourceBBox.width>0){var E=R.scale(d);m=i.clone().move(c||s,p.sourceBBox.width*E.sx*-1)}}else{var x=l("source");x&&(m=i.clone().move(c||s,-x))}if(h){if(this.updateMarkerAttr("target"),p.targetBBox=p.targetBBox||R.getBBox(h),p.targetBBox.width>0){var O=R.scale(h);b=s.clone().move(f||i,p.targetBBox.width*O.sx*-1)}}else{var D=l("target");D&&(b=s.clone().move(f||i,-D))}return p.sourcePoint=m||i.clone(),p.targetPoint=b||s.clone(),{source:m,target:b}}},{key:"findPath",value:function(t,i,s){var u=this.cell.getConnector()||this.graph.options.connecting.connector,l,c,f;if(typeof u=="string"?l=u:(l=u.name,c=u.args),l){var d=bh.registry.get(l);if(typeof d!="function")return bh.registry.onNotFound(l);f=d}else f=bh.presets.normal;var h=N.call(f,this,i,s,t,Object.assign(Object.assign({},c),{raw:!0}),this);return typeof h=="string"?Si.parse(h):h}},{key:"translateConnectionPoints",value:function(t,i){var s=this.markerCache;s.sourcePoint&&s.sourcePoint.translate(t,i),s.targetPoint&&s.targetPoint.translate(t,i),this.sourcePoint.translate(t,i),this.targetPoint.translate(t,i),this.sourceAnchor.translate(t,i),this.targetAnchor.translate(t,i)}},{key:"updateLabelPositions",value:function(){if(this.containers.labels==null)return this;var t=this.path;if(!t)return this;var i=this.cell,s=i.getLabels();if(s.length===0)return this;for(var u=i.getDefaultLabel(),l=this.normalizeLabelPosition(u.position),c=0,f=s.length;c<f;c+=1){var d=s[c],h=this.labelCache[c];if(!!h){var p=this.normalizeLabelPosition(d.position),m=C.merge({},l,p),b=this.getLabelTransformationMatrix(m);h.setAttribute("transform",R.matrixToTransformString(b))}}return this}},{key:"updateToolsPosition",value:function(){if(this.containers.tools==null)return this;var t="",i=this.options.toolsOffset,s=this.getConnectionLength();if(s!=null){s<this.options.shortLength&&(t="scale(.5)",i/=2);var u=this.getPointAtLength(i);if(u!=null&&R.attr(this.toolCache,"transform","translate(".concat(u.x,",").concat(u.y,") ").concat(t)),this.options.doubleTools&&s>=this.options.longLength){var l=this.options.doubleToolsOffset||i;u=this.getPointAtLength(s-l),u!=null&&R.attr(this.tool2Cache,"transform","translate(".concat(u.x,",").concat(u.y,") ").concat(t)),R.attr(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&R.attr(this.tool2Cache,"visibility","hidden")}return this}},{key:"updateArrowheadMarkers",value:function(){var t=this.containers.arrowheads;if(t==null)return this;if(t.style.display==="none")return this;var i=this.containers.sourceArrowhead,s=this.containers.targetArrowhead;if(i&&s){var u=this.getConnectionLength()||0,l=u<this.options.shortLength?.5:1;R.scale(i,l),R.scale(s,l),this.translateAndAutoOrientArrows(i,s)}return this}},{key:"updateTerminalProperties",value:function(t){var i=this.cell,s=this.graph,u=i[t],l=u&&u.cell,c="".concat(t,"View");if(!l)return this[c]=null,this.updateTerminalMagnet(t),!0;var f=s.getCellById(l);if(!f)throw new Error("Edge's ".concat(t,' node with id "').concat(l,'" not exists'));var d=f.findView(s);return d?(this[c]=d,this.updateTerminalMagnet(t),!0):!1}},{key:"updateTerminalMagnet",value:function(t){var i="".concat(t,"Magnet"),s=this.getTerminalView(t);if(s){var u=s.getMagnetFromEdgeTerminal(this.cell[t]);u===s.container&&(u=null),this[i]=u}else this[i]=null}},{key:"translateAndAutoOrientArrows",value:function(t,i){var s=this.routePoints;t&&R.translateAndAutoOrient(t,this.sourcePoint,s[0]||this.targetPoint,this.graph.view.stage),i&&R.translateAndAutoOrient(i,this.targetPoint,s[s.length-1]||this.sourcePoint,this.graph.view.stage)}},{key:"getLabelPositionAngle",value:function(t){var i=this.cell.getLabelAt(t);return i&&i.position&&typeof i.position=="object"&&i.position.angle||0}},{key:"getLabelPositionArgs",value:function(t){var i=this.cell.getLabelAt(t);if(i&&i.position&&typeof i.position=="object")return i.position.options}},{key:"getDefaultLabelPositionArgs",value:function(){var t=this.cell.getDefaultLabel();if(t&&t.position&&typeof t.position=="object")return t.position.options}},{key:"mergeLabelPositionArgs",value:function(t,i){return t===null?null:t===void 0?i===null?null:i:C.merge({},i,t)}},{key:"addLabel",value:function(t,i,s,u){var l,c,f=0,d;typeof t!="number"?(l=t.x,c=t.y,typeof i=="number"?(f=i,d=s):d=i):(l=t,c=i,typeof s=="number"?(f=s,d=u):d=s);var h=this.getDefaultLabelPositionArgs(),p=d,m=this.mergeLabelPositionArgs(p,h),b={position:this.getLabelPosition(l,c,f,m)},E=-1;return this.cell.insertLabel(b,E,d),E}},{key:"addVertex",value:function(t,i,s){var u=typeof t!="number",l=u?t.x:t,c=u?t.y:i,f=u?i:s,d={x:l,y:c},h=this.getVertexIndex(l,c);return this.cell.insertVertex(d,h,f),h}},{key:"sendToken",value:function(t,i,s){var u,l,c,f,d="linear";typeof i=="object"?(u=i.duration,l=i.reversed===!0,c=i.selector,i.rotate===!1?f="":i.rotate===!0?f="auto":i.rotate!=null&&(f="".concat(i.rotate)),i.timing&&(d=i.timing)):(u=i,l=!1,c=null),u=u||1e3;var h={dur:"".concat(u,"ms"),repeatCount:"1",calcMode:d,fill:"freeze"};if(f&&(h.rotate=f),l&&(h.keyPoints="1;0",h.keyTimes="0;1"),typeof i=="object"){var p=i.duration,m=i.reversed,b=i.selector,E=i.rotate,x=i.timing,O=Q5(i,["duration","reversed","selector","rotate","timing"]);Object.keys(O).forEach(function(Ee){h[Ee]=O[Ee]})}var D;if(typeof c=="string"?D=this.findOne(c,this.container,this.selectors):D=this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(D instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");var I=typeof t=="string"?this.findOne(t):t;if(I==null)throw new Error("Token animation requires a valid token element.");var F=I.parentNode,H=function(){F||R.remove(I)},$=mi.create(I);F||$.appendTo(this.graph.view.stage);var se=h.complete;h.complete=function(Ee){H(),s&&s(),se&&se(Ee)};var de=$.animateAlongPath(h,D);return function(){H(),de()}}},{key:"getConnection",value:function(){return this.path!=null?this.path.clone():null}},{key:"getConnectionPathData",value:function(){if(this.path==null)return"";var t=this.cache.pathCache;return C.has(t,"data")||(t.data=this.path.serialize()),t.data||""}},{key:"getConnectionSubdivisions",value:function(){if(this.path==null)return null;var t=this.cache.pathCache;return C.has(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions}},{key:"getConnectionLength",value:function(){if(this.path==null)return 0;var t=this.cache.pathCache;return C.has(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length}},{key:"getPointAtLength",value:function(t){return this.path==null?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getPointAtRatio",value:function(t){return this.path==null?null:(P.isPercentage(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))}},{key:"getTangentAtLength",value:function(t){return this.path==null?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getTangentAtRatio",value:function(t){return this.path==null?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPoint",value:function(t){return this.path==null?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointLength",value:function(t){return this.path==null?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointRatio",value:function(t){return this.path==null?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getLabelPosition",value:function(t,i,s,u){var l={distance:0},c=0,f;typeof s=="number"?(c=s,f=u):f=s,f!=null&&(l.options=f);var d=f&&f.absoluteOffset,h=!(f&&f.absoluteDistance),p=f&&f.absoluteDistance&&f.reverseDistance,m=this.path,b={segmentSubdivisions:this.getConnectionSubdivisions()},E=new gt(t,i),x=m.closestPointT(E,b),O=this.getConnectionLength()||0,D=m.lengthAtT(x,b);h&&(D=O>0?D/O:0),p&&(D=-1*(O-D)||1),l.distance=D;var I;d||(I=m.tangentAtT(x));var F;if(I)F=I.pointOffset(E);else{var H=m.pointAtT(x),$=E.diff(H);F={x:$.x,y:$.y}}return l.offset=F,l.angle=c,l}},{key:"normalizeLabelPosition",value:function(t){return typeof t=="number"?{distance:t}:t}},{key:"getLabelTransformationMatrix",value:function(t){var i=this.normalizeLabelPosition(t),s=i.options||{},u=i.angle||0,l=i.distance,c=l>0&&l<=1,f=0,d={x:0,y:0},h=i.offset;h&&(typeof h=="number"?f=h:(h.x!=null&&(d.x=h.x),h.y!=null&&(d.y=h.y)));var p=d.x!==0||d.y!==0||f===0,m=s.keepGradient,b=s.ensureLegibility,E=this.path,x={segmentSubdivisions:this.getConnectionSubdivisions()},O=c?l*this.getConnectionLength():l,D=E.tangentAtLength(O,x),I,F=u;if(D){if(p)I=D.start,I.translate(d);else{var H=D.clone();H.rotate(-90,D.start),H.setLength(f),I=H.end}m&&(F=D.angle()+u,b&&(F=ji.normalize((F+90)%180-90)))}else I=E.start,p&&I.translate(d);return R.createSVGMatrix().translate(I.x,I.y).rotate(F)}},{key:"getLabelCoordinates",value:function(t){var i=this.getLabelTransformationMatrix(t);return new gt(i.e,i.f)}},{key:"getVertexIndex",value:function(t,i){var s=this.cell,u=s.getVertices(),l=this.getClosestPointLength(new gt(t,i)),c=0;if(l!=null)for(var f=u.length;c<f;c+=1){var d=u[c],h=this.getClosestPointLength(d);if(h!=null&&l<h)break}return c}},{key:"getEventArgs",value:function(t,i,s){var u=this,l=u.cell,c=l;return i==null||s==null?{e:t,view:u,edge:l,cell:c}:{e:t,x:i,y:s,view:u,edge:l,cell:c}}},{key:"notifyUnhandledMouseDown",value:function(t,i,s){this.notify("edge:unhandled:mousedown",{e:t,x:i,y:s,view:this,cell:this.cell,edge:this.cell})}},{key:"notifyMouseDown",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseDown",this).call(this,t,i,s),this.notify("edge:mousedown",this.getEventArgs(t,i,s))}},{key:"notifyMouseMove",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseMove",this).call(this,t,i,s),this.notify("edge:mousemove",this.getEventArgs(t,i,s))}},{key:"notifyMouseUp",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseUp",this).call(this,t,i,s),this.notify("edge:mouseup",this.getEventArgs(t,i,s))}},{key:"onClick",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onClick",this).call(this,t,i,s),this.notify("edge:click",this.getEventArgs(t,i,s))}},{key:"onDblClick",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onDblClick",this).call(this,t,i,s),this.notify("edge:dblclick",this.getEventArgs(t,i,s))}},{key:"onContextMenu",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onContextMenu",this).call(this,t,i,s),this.notify("edge:contextmenu",this.getEventArgs(t,i,s))}},{key:"onMouseDown",value:function(t,i,s){this.notifyMouseDown(t,i,s);var u=t.target.getAttribute("class");switch(u){case"vertex":{this.startVertexDragging(t,i,s);return}case"vertex-remove":case"vertex-remove-area":{this.handleVertexRemoving(t,i,s);return}case"connection":case"connection-wrap":{this.handleVertexAdding(t,i,s);return}case"arrowhead":{this.startArrowheadDragging(t,i,s);return}case"source-marker":case"target-marker":{this.notifyUnhandledMouseDown(t,i,s);return}default:break}this.startEdgeDragging(t,i,s)}},{key:"onMouseMove",value:function(t,i,s){var u=this.getEventData(t);switch(u.action){case"drag-vertex":{this.dragVertex(t,i,s);break}case"drag-label":{this.dragLabel(t,i,s);break}case"drag-arrowhead":{this.dragArrowhead(t,i,s);break}case"drag-edge":{this.dragEdge(t,i,s);break}default:break}return this.notifyMouseMove(t,i,s),u}},{key:"onMouseUp",value:function(t,i,s){var u=this.getEventData(t);switch(u.action){case"drag-vertex":{this.stopVertexDragging(t,i,s);break}case"drag-label":{this.stopLabelDragging(t,i,s);break}case"drag-arrowhead":{this.stopArrowheadDragging(t,i,s);break}case"drag-edge":{this.stopEdgeDragging(t,i,s);break}default:break}return this.notifyMouseUp(t,i,s),this.checkMouseleave(t),u}},{key:"onMouseOver",value:function(t){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseOver",this).call(this,t),this.notify("edge:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseOut",this).call(this,t),this.notify("edge:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseEnter",this).call(this,t),this.notify("edge:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseLeave",this).call(this,t),this.notify("edge:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,i,s,u){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseWheel",this).call(this,t,i,s,u),this.notify("edge:mousewheel",Object.assign({delta:u},this.getEventArgs(t,i,s)))}},{key:"onCustomEvent",value:function(t,i,s,u){var l=R.findParentByClass(t.target,"edge-tool",this.container);if(l){if(t.stopPropagation(),this.can("useEdgeTools")){if(i==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:i},this.getEventArgs(t,s,u)))}this.notifyMouseDown(t,s,u)}else this.notify("edge:customevent",Object.assign({name:i},this.getEventArgs(t,s,u))),Object(Vr.a)(Object(Hr.a)(n.prototype),"onCustomEvent",this).call(this,t,i,s,u)}},{key:"onLabelMouseDown",value:function(t,i,s){this.notifyMouseDown(t,i,s),this.startLabelDragging(t,i,s);var u=this.getEventData(t).stopPropagation;u&&t.stopPropagation()}},{key:"startEdgeDragging",value:function(t,i,s){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(t,i,s);return}this.setEventData(t,{x:i,y:s,moving:!1,action:"drag-edge"})}},{key:"dragEdge",value:function(t,i,s){var u=this.getEventData(t);u.moving||(u.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:i,y:s,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(i-u.x,s-u.y,{ui:!0}),this.setEventData(t,{x:i,y:s}),this.notify("edge:moving",{e:t,x:i,y:s,view:this,cell:this.cell,edge:this.cell})}},{key:"stopEdgeDragging",value:function(t,i,s){var u=this.getEventData(t);u.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:i,y:s,view:this,cell:this.cell,edge:this.cell})),u.moving=!1}},{key:"prepareArrowheadDragging",value:function(t,i){var s=this.getTerminalMagnet(t),u={action:"drag-arrowhead",x:i.x,y:i.y,isNewEdge:i.isNewEdge===!0,terminalType:t,initialMagnet:s,initialTerminal:C.clone(this.cell[t]),fallbackAction:i.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:i.options};return this.beforeArrowheadDragging(u),u}},{key:"createValidateConnectionArgs",value:function(t){var i=[];i[4]=t,i[5]=this;var s,u=0,l=0;t==="source"?(u=2,s="target"):(l=2,s="source");var c=this.cell[s],f=c.cell;if(f){var d,h=i[u]=this.graph.renderer.findViewByCell(f);h&&(d=h.getMagnetFromEdgeTerminal(c),d===h.container&&(d=void 0)),i[u+1]=d}return function(p,m){return i[l]=p,i[l+1]=p.container===m?void 0:m,i}}},{key:"beforeArrowheadDragging",value:function(t){t.zIndex=this.cell.zIndex,this.cell.toFront();var i=this.container.style;t.pointerEvents=i.pointerEvents,i.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)}},{key:"afterArrowheadDragging",value:function(t){t.zIndex!=null&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null);var i=this.container;i.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)}},{key:"arrowheadDragging",value:function(t,i,s,u){if(u.x=i,u.y=s,u.currentTarget!==t)if(u.currentMagnet&&u.currentView&&u.currentView.unhighlight(u.currentMagnet,{type:"magnetAdsorbed"}),u.currentView=this.graph.renderer.findViewByElem(t),u.currentView){var l;u.currentMagnet=u.currentView.findMagnet(t),u.currentMagnet&&(l=this.graph.hook).validateConnection.apply(l,Object(ot.a)(u.getValidateConnectionArgs(u.currentView,u.currentMagnet)).concat([u.currentView.getEdgeTerminal(u.currentMagnet,i,s,this.cell,u.terminalType)]))?u.currentView.highlight(u.currentMagnet,{type:"magnetAdsorbed"}):u.currentMagnet=null}else u.currentMagnet=null;u.currentTarget=t,this.cell.prop(u.terminalType,{x:i,y:s},Object.assign(Object.assign({},u.options),{ui:!0}))}},{key:"arrowheadDragged",value:function(t,i,s){var u=t.currentView,l=t.currentMagnet;if(!(!l||!u)){u.unhighlight(l,{type:"magnetAdsorbed"});var c=t.terminalType,f=u.getEdgeTerminal(l,i,s,this.cell,c);this.cell.setTerminal(c,f,{ui:!0})}}},{key:"snapArrowhead",value:function(t,i,s){var u=this,l=this.graph,c=l.options.connecting,f=c.snap,d=c.allowEdge,h=typeof f=="object"&&f.radius||50,p={x:t-h,y:i-h,width:2*h,height:2*h},m=l.renderer.findViewsInArea(p);if(d){var b=l.renderer.findEdgeViewsInArea(p).filter(function(Ee){return Ee!==u});m.push.apply(m,Object(ot.a)(b))}var E=s.closestView||null,x=s.closestMagnet||null;s.closestView=null,s.closestMagnet=null;var O,D=Number.MAX_SAFE_INTEGER,I=new gt(t,i);m.forEach(function(Ee){if(Ee.container.getAttribute("magnet")!=="false"&&(O=Ee.cell.getBBox().getCenter().distance(I),O<h&&O<D)){var Oe;(x===Ee.container||(Oe=l.hook).validateConnection.apply(Oe,Object(ot.a)(s.getValidateConnectionArgs(Ee,null)).concat([Ee.getEdgeTerminal(Ee.container,t,i,u.cell,s.terminalType)])))&&(D=O,s.closestView=Ee,s.closestMagnet=Ee.container)}Ee.container.querySelectorAll("[magnet]").forEach(function($e){if($e.getAttribute("magnet")!=="false"){var tt=Ee.getBBoxOfElement($e);if(O=I.distance(tt.getCenter()),O<h&&O<D){var Le;(x===$e||(Le=l.hook).validateConnection.apply(Le,Object(ot.a)(s.getValidateConnectionArgs(Ee,$e)).concat([Ee.getEdgeTerminal($e,t,i,u.cell,s.terminalType)])))&&(D=O,s.closestView=Ee,s.closestMagnet=$e)}}})});var F,H=s.terminalType,$=s.closestView,se=s.closestMagnet,de=x!==se;if(E&&de&&E.unhighlight(x,{type:"magnetAdsorbed"}),$){if(!de)return;$.highlight(se,{type:"magnetAdsorbed"}),F=$.getEdgeTerminal(se,t,i,this.cell,H)}else F={x:t,y:i};this.cell.setTerminal(H,F,{},Object.assign(Object.assign({},s.options),{ui:!0}))}},{key:"snapArrowheadEnd",value:function(t){var i=t.closestView,s=t.closestMagnet;i&&s&&(i.unhighlight(s,{type:"magnetAdsorbed"}),t.currentMagnet=i.findMagnet(s)),t.closestView=null,t.closestMagnet=null}},{key:"finishEmbedding",value:function(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)}},{key:"fallbackConnection",value:function(t){switch(t.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0});break}}},{key:"notifyConnectionEvent",value:function(t,i){var s=t.terminalType,u=t.initialTerminal,l=this.cell[s],c=l&&!eo.equalTerminals(u,l);if(c){var f=this.graph,d=u,h=d.cell?f.getCellById(d.cell):null,p=d.port,m=h?f.findViewByCell(h):null,b=h||t.isNewEdge?null:gt.create(u).toJSON(),E=l,x=E.cell?f.getCellById(E.cell):null,O=E.port,D=x?f.findViewByCell(x):null,I=x?null:gt.create(l).toJSON();this.notify("edge:connected",{e:i,previousCell:h,previousPort:p,previousView:m,previousPoint:b,currentCell:x,currentView:D,currentPort:O,currentPoint:I,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:s,isNew:t.isNewEdge})}}},{key:"highlightAvailableMagnets",value:function(t){var i=this,s=this.graph,u=s.model.getCells();t.marked={};for(var l=function(p,m){var b=s.renderer.findViewByCell(u[p]);if(!b)return"continue";var E=Array.prototype.slice.call(b.container.querySelectorAll("[magnet]"));b.container.getAttribute("magnet")!=="false"&&E.push(b.container);var x=E.filter(function(I){var F;return(F=s.hook).validateConnection.apply(F,Object(ot.a)(t.getValidateConnectionArgs(b,I)).concat([b.getEdgeTerminal(I,t.x,t.y,i.cell,t.terminalType)]))});if(x.length>0){for(var O=0,D=x.length;O<D;O+=1)b.highlight(x[O],{type:"magnetAvailable"});b.highlight(null,{type:"nodeAvailable"}),t.marked[b.cell.id]=x}},c=0,f=u.length;c<f;c+=1)var d=l(c,f)}},{key:"unhighlightAvailableMagnets",value:function(t){var i=this,s=t.marked||{};Object.keys(s).forEach(function(u){var l=i.graph.renderer.findViewByCell(u);if(l){var c=s[u];c.forEach(function(f){l.unhighlight(f,{type:"magnetAvailable"})}),l.unhighlight(null,{type:"nodeAvailable"})}}),t.marked=null}},{key:"startArrowheadDragging",value:function(t,i,s){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(t,i,s);return}var u=t.target,l=u.getAttribute("data-terminal"),c=this.prepareArrowheadDragging(l,{x:i,y:s});this.setEventData(t,c)}},{key:"dragArrowhead",value:function(t,i,s){var u=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(i,s,u):this.arrowheadDragging(this.getEventTarget(t),i,s,u)}},{key:"stopArrowheadDragging",value:function(t,i,s){var u=this.graph,l=this.getEventData(t);u.options.connecting.snap?this.snapArrowheadEnd(l):this.arrowheadDragged(l,i,s);var c=u.hook.validateEdge(this.cell,l.terminalType,l.initialTerminal);c?(this.finishEmbedding(l),this.notifyConnectionEvent(l,t)):this.fallbackConnection(l),this.afterArrowheadDragging(l)}},{key:"startLabelDragging",value:function(t,i,s){if(this.can("edgeLabelMovable")){var u=t.currentTarget,l=parseInt(u.getAttribute("data-index"),10),c=this.getLabelPositionAngle(l),f=this.getLabelPositionArgs(l),d=this.getDefaultLabelPositionArgs(),h=this.mergeLabelPositionArgs(f,d);this.setEventData(t,{index:l,positionAngle:c,positionArgs:h,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)}},{key:"dragLabel",value:function(t,i,s){var u=this.getEventData(t),l=this.cell.getLabelAt(u.index),c=C.merge({},l,{position:this.getLabelPosition(i,s,u.positionAngle,u.positionArgs)});this.cell.setLabelAt(u.index,c)}},{key:"stopLabelDragging",value:function(t,i,s){}},{key:"handleVertexAdding",value:function(t,i,s){if(!this.can("vertexAddable")){this.notifyUnhandledMouseDown(t,i,s);return}var u=this.addVertex({x:i,y:s},{ui:!0});this.setEventData(t,{index:u,action:"drag-vertex"})}},{key:"handleVertexRemoving",value:function(t,i,s){if(!this.can("vertexDeletable")){this.notifyUnhandledMouseDown(t,i,s);return}var u=t.target,l=parseInt(u.getAttribute("idx"),10);this.cell.removeVertexAt(l)}},{key:"startVertexDragging",value:function(t,i,s){if(!this.can("vertexMovable")){this.notifyUnhandledMouseDown(t,i,s);return}var u=t.target,l=parseInt(u.getAttribute("idx"),10);this.setEventData(t,{index:l,action:"drag-vertex"})}},{key:"dragVertex",value:function(t,i,s){var u=this.getEventData(t);this.cell.setVertexAt(u.index,{x:i,y:s},{ui:!0})}},{key:"stopVertexDragging",value:function(t,i,s){}}]),n}(Eo,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"&&typeof e.update=="function"&&typeof e.getConnection=="function"}o.isEdgeView=a})(jv||(jv={})),jv.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),jv.registry.register("edge",jv,!0);var ss=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(){var e;return Object(Ie.a)(this,n),e=r.apply(this,arguments),e.scalableNode=null,e.rotatableNode=null,e.scalableSelector="scalable",e.rotatableSelector="rotatable",e.defaultPortMarkup=Hi.getPortMarkup(),e.defaultPortLabelMarkup=Hi.getPortLabelMarkup(),e.defaultPortContainerMarkup=Hi.getPortContainerMarkup(),e.portsCache={},e}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"getContainerClassName",value:function(){var t=[Object(Vr.a)(Object(Hr.a)(n.prototype),"getContainerClassName",this).call(this),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")}},{key:"updateClassName",value:function(t){var i=t.target;if(i.hasAttribute("magnet")){var s=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?R.removeClass(i,s):R.addClass(i,s)}else{var u=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(u):this.addClass(u)}}},{key:"isNodeView",value:function(){return!0}},{key:"confirmUpdate",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t;return this.hasAction(u,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(u,"render")?(this.render(),u=this.removeAction(u,["render","update","resize","translate","rotate","ports","tools"])):(u=this.handleAction(u,"resize",function(){return i.resize(s)},"update"),u=this.handleAction(u,"update",function(){return i.update()},ml.useCSSSelector?"ports":null),u=this.handleAction(u,"translate",function(){return i.translate()}),u=this.handleAction(u,"rotate",function(){return i.rotate()}),u=this.handleAction(u,"ports",function(){return i.renderPorts()}),u=this.handleAction(u,"tools",function(){return i.renderTools()})),u}},{key:"update",value:function(t){this.cleanCache(),ml.useCSSSelector&&this.removePorts();var i=this.cell,s=i.getSize(),u=i.getAttrs();this.updateAttrs(this.container,u,{attrs:t===u?null:t,rootBBox:new fr(0,0,s.width,s.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),ml.useCSSSelector&&this.renderPorts()}},{key:"renderMarkup",value:function(){var t=this.cell.markup;if(t)return typeof t=="string"?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid node markup.")}},{key:"renderJSONMarkup",value:function(t){var i=this.parseJSONMarkup(t,this.container),s=function(l){return Array.isArray(l)?l[0]:l};this.selectors=i.selectors,this.rotatableNode=s(this.selectors[this.rotatableSelector]),this.scalableNode=s(this.selectors[this.scalableSelector]),this.container.appendChild(i.fragment)}},{key:"renderStringMarkup",value:function(t){R.append(this.container,mi.toNodes(mi.createVectors(t))),this.rotatableNode=R.findOne(this.container,".".concat(this.rotatableSelector)),this.scalableNode=R.findOne(this.container,".".concat(this.scalableSelector)),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}},{key:"render",value:function(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),ml.useCSSSelector||this.renderPorts(),this.renderTools(),this}},{key:"resize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.scalableNode)return this.updateSize(t);this.cell.getAngle()&&this.rotate(),this.update()}},{key:"translate",value:function(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}},{key:"rotate",value:function(){if(this.rotatableNode){this.updateRotation(),this.update();return}this.updateTransform()}},{key:"getTranslationString",value:function(){var t=this.cell.getPosition();return"translate(".concat(t.x,",").concat(t.y,")")}},{key:"getRotationString",value:function(){var t=this.cell.getAngle();if(t){var i=this.cell.getSize();return"rotate(".concat(t,",").concat(i.width/2,",").concat(i.height/2,")")}}},{key:"updateTransform",value:function(){var t=this.getTranslationString(),i=this.getRotationString();i&&(t+=" ".concat(i)),this.container.setAttribute("transform",t)}},{key:"updateRotation",value:function(){if(this.rotatableNode!=null){var t=this.getRotationString();t!=null?this.rotatableNode.setAttribute("transform",t):this.rotatableNode.removeAttribute("transform")}}},{key:"updateTranslation",value:function(){this.container.setAttribute("transform",this.getTranslationString())}},{key:"updateSize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.cell,s=i.getSize(),u=i.getAngle(),l=this.scalableNode,c=!1;l.getElementsByTagName("path").length>0&&(c=!0);var f=R.getBBox(l,{recursive:c}),d=s.width/(f.width||1),h=s.height/(f.height||1);l.setAttribute("transform","scale(".concat(d,",").concat(h,")"));var p=this.rotatableNode;if(p!=null){var m=p.getAttribute("transform");if(m){p.setAttribute("transform","".concat(m," rotate(").concat(-u,",").concat(s.width/2,",").concat(s.height/2,")"));var b=R.getBBox(l,{target:this.graph.view.stage});i.prop("position",{x:b.x,y:b.y},Object.assign({updated:!0},t)),this.translate(),this.rotate()}}this.update()}},{key:"findPortElem",value:function(t,i){var s=t?this.portsCache[t]:null;if(!s)return null;var u=s.portContentElement,l=s.portContentSelectors||{};return this.findOne(i,u,l)}},{key:"initializePorts",value:function(){this.cleanPortsCache()}},{key:"refreshPorts",value:function(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}},{key:"cleanPortsCache",value:function(){this.portsCache={}}},{key:"removePorts",value:function(){var t=this;Object.keys(this.portsCache).forEach(function(i){var s=t.portsCache[i];R.remove(s.portElement)})}},{key:"renderPorts",value:function(){var t=this,i=this.getPortsContainer(),s=[];i.childNodes.forEach(function(c){s.push(c)});var u=B.groupBy(this.cell.getParsedPorts(),"zIndex"),l="auto";u[l]&&u[l].forEach(function(c){var f=t.getPortElement(c);i.append(f),s.push(f)}),Object.keys(u).forEach(function(c){if(c!==l){var f=parseInt(c,10);t.appendPorts(u[c],f,s)}}),this.updatePorts()}},{key:"getPortsContainer",value:function(){return this.rotatableNode||this.container}},{key:"appendPorts",value:function(t,i,s){var u=this,l=t.map(function(c){return u.getPortElement(c)});s[i]||i<0?R.before(s[Math.max(i,0)],l):R.append(this.getPortsContainer(),l)}},{key:"getPortElement",value:function(t){var i=this.portsCache[t.id];return i?i.portElement:this.createPortElement(t)}},{key:"createPortElement",value:function(t){var i=Hi.renderMarkup(this.getPortContainerMarkup()),s=i.elem;if(s==null)throw new Error("Invalid port container markup.");i=Hi.renderMarkup(this.getPortMarkup(t));var u=i.elem,l=i.selectors;if(u==null)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},u),i=Hi.renderMarkup(this.getPortLabelMarkup(t.label));var c=i.elem,f=i.selectors;if(c==null)throw new Error("Invalid port label markup.");var d;if(l&&f){for(var h in f)if(l[h]&&h!==this.rootSelector)throw new Error("Selectors within port must be unique.");d=Object.assign(Object.assign({},l),f)}else d=l||f;var p="x6-port";return t.group&&(p+=" x6-port-".concat(t.group)),R.addClass(s,p),R.addClass(u,"x6-port-body"),R.addClass(c,"x6-port-label"),s.appendChild(u),s.appendChild(c),this.portsCache[t.id]={portElement:s,portSelectors:d,portLabelElement:c,portLabelSelectors:f,portContentElement:u,portContentSelectors:l},this.graph.hook.onPortRendered({port:t,node:this.cell,container:s,selectors:d,labelContainer:c,labelSelectors:f,contentContainer:u,contentSelectors:l}),s}},{key:"updatePorts",value:function(){var t=this;this.updatePortGroup();var i=this.cell.getParsedGroups();Object.keys(i).forEach(function(s){return t.updatePortGroup(s)})}},{key:"updatePortGroup",value:function(t){for(var i=fr.fromSize(this.cell.getSize()),s=this.cell.getPortsLayoutByGroup(t,i),u=0,l=s.length;u<l;u+=1){var c=s[u],f=c.portId,d=this.portsCache[f]||{},h=c.portLayout;if(this.applyPortTransform(d.portElement,h),c.portAttrs!=null){var p={selectors:d.portSelectors||{}};c.portSize&&(p.rootBBox=fr.fromSize(c.portSize)),this.updateAttrs(d.portElement,c.portAttrs,p)}var m=c.labelLayout;if(m&&(this.applyPortTransform(d.portLabelElement,m,-(h.angle||0)),m.attrs)){var b={selectors:d.portLabelSelectors||{}};c.labelSize&&(b.rootBBox=fr.fromSize(c.labelSize)),this.updateAttrs(d.portLabelElement,m.attrs,b)}}}},{key:"applyPortTransform",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=i.angle,l=i.position,c=R.createSVGMatrix().rotate(s).translate(l.x||0,l.y||0).rotate(u||0);R.transform(t,c,{absolute:!0})}},{key:"getPortContainerMarkup",value:function(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}},{key:"getPortMarkup",value:function(t){return t.markup||this.cell.portMarkup||this.defaultPortMarkup}},{key:"getPortLabelMarkup",value:function(t){return t.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}},{key:"getEventArgs",value:function(t,i,s){var u=this,l=u.cell,c=l;return i==null||s==null?{e:t,view:u,node:l,cell:c}:{e:t,x:i,y:s,view:u,node:l,cell:c}}},{key:"notifyMouseDown",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseDown",this).call(this,t,i,s),this.notify("node:mousedown",this.getEventArgs(t,i,s))}},{key:"notifyMouseMove",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseMove",this).call(this,t,i,s),this.notify("node:mousemove",this.getEventArgs(t,i,s))}},{key:"notifyMouseUp",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseUp",this).call(this,t,i,s),this.notify("node:mouseup",this.getEventArgs(t,i,s))}},{key:"onClick",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onClick",this).call(this,t,i,s),this.notify("node:click",this.getEventArgs(t,i,s))}},{key:"onDblClick",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onDblClick",this).call(this,t,i,s),this.notify("node:dblclick",this.getEventArgs(t,i,s))}},{key:"onContextMenu",value:function(t,i,s){Object(Vr.a)(Object(Hr.a)(n.prototype),"onContextMenu",this).call(this,t,i,s),this.notify("node:contextmenu",this.getEventArgs(t,i,s))}},{key:"onMouseDown",value:function(t,i,s){if(!this.isPropagationStopped(t)){var u=t.target;R.clickable(u)||R.isInputElement(u)||(this.notifyMouseDown(t,i,s),this.startNodeDragging(t,i,s))}}},{key:"onMouseMove",value:function(t,i,s){var u=this.getEventData(t),l=u.action;if(l==="magnet")this.dragMagnet(t,i,s);else{if(l==="move"){var c=u,f=c.targetView||this;f.dragNode(t,i,s),f.notify("node:moving",{e:t,x:i,y:s,view:f,cell:f.cell,node:f.cell})}this.notifyMouseMove(t,i,s)}this.setEventData(t,u)}},{key:"onMouseUp",value:function(t,i,s){var u=this.getEventData(t),l=u.action;if(l==="magnet")this.stopMagnetDragging(t,i,s);else{var c=t.target;if(R.clickable(c)||R.isInputElement(c))return;if(this.notifyMouseUp(t,i,s),l==="move"){var f=u,d=f.targetView||this;d.stopNodeDragging(t,i,s)}}var h=u.targetMagnet;h&&this.onMagnetClick(t,h,i,s),this.checkMouseleave(t)}},{key:"onMouseOver",value:function(t){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseOver",this).call(this,t),this.notify("node:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseOut",this).call(this,t),this.notify("node:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){this.updateClassName(t),Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseEnter",this).call(this,t),this.notify("node:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseLeave",this).call(this,t),this.notify("node:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,i,s,u){Object(Vr.a)(Object(Hr.a)(n.prototype),"onMouseWheel",this).call(this,t,i,s,u),this.notify("node:mousewheel",Object.assign({delta:u},this.getEventArgs(t,i,s)))}},{key:"onMagnetClick",value:function(t,i,s,u){var l=this.graph.view.getMouseMovedCount(t);l>this.graph.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:i},this.getEventArgs(t,s,u)))}},{key:"onMagnetDblClick",value:function(t,i,s,u){this.notify("node:magnet:dblclick",Object.assign({magnet:i},this.getEventArgs(t,s,u)))}},{key:"onMagnetContextMenu",value:function(t,i,s,u){this.notify("node:magnet:contextmenu",Object.assign({magnet:i},this.getEventArgs(t,s,u)))}},{key:"onMagnetMouseDown",value:function(t,i,s,u){this.startMagnetDragging(t,s,u)}},{key:"onCustomEvent",value:function(t,i,s,u){this.notify("node:customevent",Object.assign({name:i},this.getEventArgs(t,s,u))),Object(Vr.a)(Object(Hr.a)(n.prototype),"onCustomEvent",this).call(this,t,i,s,u)}},{key:"prepareEmbedding",value:function(t){var i=this.getEventData(t),s=i.cell||this.cell,u=this.graph.findViewByCell(s),l=this.graph.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:s,view:u,cell:s,x:l.x,y:l.y,currentParent:s.getParent()})}},{key:"processEmbedding",value:function(t,i){var s=this,u=i.cell||this.cell,l=i.graph||this.graph,c=l.options.embedding,f=c.findParent,d=typeof f=="function"?N.call(f,l,{view:this,node:this.cell}).filter(function(F){return Zi.isCell(F)&&s.cell.id!==F.id&&!F.isDescendantOf(s.cell)}):l.model.getNodesUnderNode(u,{by:f});if(c.frontOnly&&d.length>0){var h=B.groupBy(d,"zIndex"),p=B.max(Object.keys(h).map(function(F){return parseInt(F,10)}));p&&(d=h[p])}d=d.filter(function(F){return F.visible});for(var m=null,b=i.candidateEmbedView,E=c.validate,x=d.length-1;x>=0;x-=1){var O=d[x];if(b&&b.cell.id===O.id){m=b;break}else{var D=O.findView(l);if(N.call(E,l,{child:this.cell,parent:D.cell,childView:this,parentView:D})){m=D;break}}}this.clearEmbedding(i),m&&m.highlight(null,{type:"embedding"}),i.candidateEmbedView=m;var I=l.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:u,node:u,view:l.findViewByCell(u),x:I.x,y:I.y,currentParent:u.getParent(),candidateParent:m?m.cell:null})}},{key:"clearEmbedding",value:function(t){var i=t.candidateEmbedView;i&&(i.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)}},{key:"finalizeEmbedding",value:function(t,i){this.graph.startBatch("embedding");var s=i.cell||this.cell,u=i.graph||this.graph,l=u.findViewByCell(s),c=s.getParent(),f=i.candidateEmbedView;if(f?(f.unhighlight(null,{type:"embedding"}),i.candidateEmbedView=null,(c==null||c.id!==f.cell.id)&&f.cell.insertChild(s,void 0,{ui:!0})):c&&c.unembed(s,{ui:!0}),u.model.getConnectedEdges(s,{deep:!0}).forEach(function(h){h.updateParent({ui:!0})}),l&&f){var d=u.snapToGrid(t.clientX,t.clientY);l.notify("node:embedded",{e:t,cell:s,x:d.x,y:d.y,node:s,view:u.findViewByCell(s),previousParent:c,currentParent:s.getParent()})}this.graph.stopBatch("embedding")}},{key:"getDelegatedView",value:function(){for(var t=this.cell,i=this;i&&!t.isEdge();){if(!t.hasParent()||i.can("stopDelegateOnDragging"))return i;t=t.getParent(),i=this.graph.renderer.findViewByCell(t)}return null}},{key:"startMagnetDragging",value:function(t,i,s){if(!!this.can("magnetConnectable")){t.stopPropagation();var u=t.currentTarget,l=this.graph;this.setEventData(t,{targetMagnet:u}),l.hook.validateMagnet(this,u,t)?(l.options.magnetThreshold<=0&&this.startConnectting(t,u,i,s),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):((R.hasClass(u,"x6-port-body")||En()(u).closest(".x6-port-body").length>0)&&this.stopPropagation(t),this.onMouseDown(t,i,s)),l.view.delegateDragEvents(t,this)}}},{key:"startConnectting",value:function(t,i,s,u){this.graph.model.startBatch("add-edge");var l=this.createEdgeFromMagnet(i,s,u);l.notifyMouseDown(t,s,u),l.setEventData(t,l.prepareArrowheadDragging("target",{x:s,y:u,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:l})}},{key:"createEdgeFromMagnet",value:function(t,i,s){var u=this.graph,l=u.model,c=u.hook.getDefaultEdge(this,t);return c.setSource(Object.assign(Object.assign({},c.getSource()),this.getEdgeTerminal(t,i,s,c,"source"))),c.setTarget(Object.assign(Object.assign({},c.getTarget()),{x:i,y:s})),c.addTo(l,{async:!1,ui:!0}),c.findView(u)}},{key:"dragMagnet",value:function(t,i,s){var u=this.getEventData(t),l=u.edgeView;if(l)l.onMouseMove(t,i,s),this.autoScrollGraph(t.clientX,t.clientY);else{var c=this.graph,f=c.options.magnetThreshold,d=this.getEventTarget(t),h=u.targetMagnet;if(f==="onleave"){if(h===d||h.contains(d))return}else if(c.view.getMouseMovedCount(t)<=f)return;this.startConnectting(t,h,i,s)}}},{key:"stopMagnetDragging",value:function(t,i,s){var u=this.eventData(t),l=u.edgeView;l&&(l.onMouseUp(t,i,s),this.graph.model.stopBatch("add-edge"))}},{key:"notifyUnhandledMouseDown",value:function(t,i,s){this.notify("node:unhandled:mousedown",{e:t,x:i,y:s,view:this,cell:this.cell,node:this.cell})}},{key:"notifyNodeMove",value:function(t,i,s,u,l){var c=this,f=[l],d=this.graph.selection.widget;if(d&&d.options.movable){var h=this.graph.getSelectedCells();h.includes(l)&&(f=h.filter(function(p){return p.isNode()}))}f.forEach(function(p){c.notify(t,{e:i,x:s,y:u,cell:p,node:p,view:p.findView(c.graph)})})}},{key:"startNodeDragging",value:function(t,i,s){var u=this.getDelegatedView();if(u==null||!u.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,i,s);this.setEventData(t,{targetView:u,action:"move"});var l=gt.create(u.cell.getPosition());u.setEventData(t,{moving:!1,offset:l.diff(i,s),restrict:this.graph.hook.getRestrictArea(u)})}},{key:"dragNode",value:function(t,i,s){var u=this.cell,l=this.graph,c=l.getGridSize(),f=this.getEventData(t),d=f.offset,h=f.restrict;f.moving||(f.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,i,s,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);var p=ko.snapToGrid(i+d.x,c),m=ko.snapToGrid(s+d.y,c);u.setPosition(p,m,{restrict:h,deep:!0,ui:!0}),l.options.embedding.enabled&&(f.embedding||(this.prepareEmbedding(t),f.embedding=!0),this.processEmbedding(t,f))}},{key:"stopNodeDragging",value:function(t,i,s){var u=this.getEventData(t);u.embedding&&this.finalizeEmbedding(t,u),u.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,i,s,this.cell)),u.moving=!1,u.embedding=!1}},{key:"autoScrollGraph",value:function(t,i){var s=this.graph.scroller.widget;s&&s.autoScroll(t,i)}}]),n}(Eo,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"&&typeof e.update=="function"&&typeof e.findPortElem=="function"&&typeof e.resize=="function"&&typeof e.rotate=="function"&&typeof e.translate=="function"}o.isNodeView=a})(ss||(ss={})),ss.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),ss.registry.register("node",ss,!0);var xk=lS("text"),Ok=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r)}(Pf("text",{view:xk,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}));(function(o){var a=function(r){Object($n.a)(e,r);var n=Object(Xn.a)(e);function e(){return Object(Ie.a)(this,e),n.apply(this,arguments)}return Object(pe.a)(e,[{key:"confirmUpdate",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=Object(Vr.a)(Object(Hr.a)(e.prototype),"confirmUpdate",this).call(this,i,s);return this.hasAction(u,"scale")&&(this.resize(),u=this.removeAction(u,"scale")),u}}]),e}(ss);o.View=a,a.config({actions:{attrs:["scale"]}}),ss.registry.register(xk,a)})(Ok||(Ok={}));var Sk=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(Ie.a)(this,r),e=a.call(this),e.length=0,e.comparator=t.comparator||"zIndex",e.clean(),n&&e.reset(n,{silent:!0}),e}return Object(pe.a)(r,[{key:"toJSON",value:function(){return this.cells.map(function(e){return e.toJSON()})}},{key:"add",value:function(e,t,i){var s=this,u,l;typeof t=="number"?(u=t,l=Object.assign({merge:!1},i)):(u=this.length,l=Object.assign({merge:!1},t)),u>this.length&&(u=this.length),u<0&&(u+=this.length+1);var c=Array.isArray(e)?e:[e],f=this.comparator&&typeof t!="number"&&l.sort!==!1,d=this.comparator||null,h=!1,p=[],m=[];if(c.forEach(function(E){var x=s.get(E);x?l.merge&&!E.isSameStore(x)&&(x.setProp(E.getProp(),i),m.push(x),f&&!h&&(d==null||typeof d=="function"?h=x.hasChanged():typeof d=="string"?h=x.hasChanged(d):h=d.some(function(O){return x.hasChanged(O)}))):(p.push(E),s.reference(E))}),p.length){var b;f&&(h=!0),(b=this.cells).splice.apply(b,[u,0].concat(p)),this.length=this.cells.length}return h&&this.sort({silent:!0}),l.silent||(p.forEach(function(E,x){var O={cell:E,index:u+x,options:l};s.trigger("added",O),l.dryrun||E.notify("added",Object.assign({},O))}),h&&this.trigger("sorted"),(p.length||m.length)&&this.trigger("updated",{added:p,merged:m,removed:[],options:l})),this}},{key:"remove",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=Array.isArray(e)?e:[e],s=this.removeCells(i,t);return!t.silent&&s.length>0&&this.trigger("updated",{options:t,removed:s,added:[],merged:[]}),Array.isArray(e)?s:s[0]}},{key:"removeCells",value:function(e,t){for(var i=[],s=0;s<e.length;s+=1){var u=this.get(e[s]);if(u!=null){var l=this.cells.indexOf(u);this.cells.splice(l,1),this.length-=1,delete this.map[u.id],i.push(u),this.unreference(u),t.dryrun||u.remove(),t.silent||(this.trigger("removed",{cell:u,index:l,options:t}),t.dryrun||u.notify("removed",{cell:u,index:l,options:t}))}}return i}},{key:"reset",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.cells.slice();if(s.forEach(function(f){return t.unreference(f)}),this.clean(),this.add(e,Object.assign({silent:!0},i)),!i.silent){var u=this.cells.slice();this.trigger("reseted",{options:i,previous:s,current:u});var l=[],c=[];u.forEach(function(f){var d=s.some(function(h){return h.id===f.id});d||l.push(f)}),s.forEach(function(f){var d=u.some(function(h){return h.id===f.id});d||c.push(f)}),this.trigger("updated",{options:i,added:l,removed:c,merged:[]})}return this}},{key:"push",value:function(e,t){return this.add(e,this.length,t)}},{key:"pop",value:function(e){var t=this.at(this.length-1);return this.remove(t,e)}},{key:"unshift",value:function(e,t){return this.add(e,0,t)}},{key:"shift",value:function(e){var t=this.at(0);return this.remove(t,e)}},{key:"get",value:function(e){if(e==null)return null;var t=typeof e=="string"||typeof e=="number"?e:e.id;return this.map[t]||null}},{key:"has",value:function(e){return this.get(e)!=null}},{key:"at",value:function(e){return e<0&&(e+=this.length),this.cells[e]||null}},{key:"first",value:function(){return this.at(0)}},{key:"last",value:function(){return this.at(-1)}},{key:"indexOf",value:function(e){return this.cells.indexOf(e)}},{key:"toArray",value:function(){return this.cells.slice()}},{key:"sort",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.comparator!=null&&(this.cells=B.sortBy(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}},{key:"clone",value:function(){var e=this.constructor;return new e(this.cells.slice(),{comparator:this.comparator})}},{key:"reference",value:function(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}},{key:"unreference",value:function(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}},{key:"notifyCellEvent",value:function(e,t){var i=t.cell;this.trigger("cell:".concat(e),t),i&&(i.isNode()?this.trigger("node:".concat(e),Object.assign(Object.assign({},t),{node:i})):i.isEdge()&&this.trigger("edge:".concat(e),Object.assign(Object.assign({},t),{edge:i})))}},{key:"clean",value:function(){this.length=0,this.cells=[],this.map={}}}]),r}(Ls),yl=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Object(Ie.a)(this,n),e=r.call(this),e.batches={},e.addings=new WeakMap,e.nodes={},e.edges={},e.outgoings={},e.incomings={},e.collection=new Sk(t),e.setup(),e}return Object(pe.a)(n,[{key:a,get:function(){return n.toStringTag}},{key:"notify",value:function(t,i){this.trigger(t,i);var s=this.graph;return s&&(t==="sorted"||t==="reseted"||t==="updated"?s.trigger("model:".concat(t),i):s.trigger(t,i)),this}},{key:"setup",value:function(){var t=this,i=this.collection;i.on("sorted",function(){return t.notify("sorted",null)}),i.on("updated",function(s){return t.notify("updated",s)}),i.on("cell:change:zIndex",function(){return t.sortOnChangeZ()}),i.on("added",function(s){var u=s.cell;t.onCellAdded(u)}),i.on("removed",function(s){var u=s.cell;t.onCellRemoved(u,s.options),t.notify("cell:removed",s),u.isNode()?t.notify("node:removed",Object.assign(Object.assign({},s),{node:u})):u.isEdge()&&t.notify("edge:removed",Object.assign(Object.assign({},s),{edge:u}))}),i.on("reseted",function(s){t.onReset(s.current),t.notify("reseted",s)}),i.on("edge:change:source",function(s){var u=s.edge;return t.onEdgeTerminalChanged(u,"source")}),i.on("edge:change:target",function(s){var u=s.edge;t.onEdgeTerminalChanged(u,"target")})}},{key:"sortOnChangeZ",value:function(){this.collection.sort()}},{key:"onCellAdded",value:function(t){var i=t.id;t.isEdge()?(t.updateParent(),this.edges[i]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[i]=!0}},{key:"onCellRemoved",value:function(t,i){var s=t.id;if(t.isEdge()){delete this.edges[s];var u=t.getSource(),l=t.getTarget();if(u&&u.cell){var c=this.outgoings[u.cell],f=c?c.indexOf(s):-1;f>=0&&(c.splice(f,1),c.length===0&&delete this.outgoings[u.cell])}if(l&&l.cell){var d=this.incomings[l.cell],h=d?d.indexOf(s):-1;h>=0&&(d.splice(h,1),d.length===0&&delete this.incomings[l.cell])}}else delete this.nodes[s];i.clear||(i.disconnectEdges?this.disconnectConnectedEdges(t,i):this.removeConnectedEdges(t,i)),t.model===this&&(t.model=null)}},{key:"onReset",value:function(t){var i=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(function(s){return i.onCellAdded(s)})}},{key:"onEdgeTerminalChanged",value:function(t,i){var s=i==="source"?this.outgoings:this.incomings,u=t.previous(i);if(u&&u.cell){var l=Zi.isCell(u.cell)?u.cell.id:u.cell,c=s[l],f=c?c.indexOf(t.id):-1;f>=0&&(c.splice(f,1),c.length===0&&delete s[l])}var d=t.getTerminal(i);if(d&&d.cell){var h=Zi.isCell(d.cell)?d.cell.id:d.cell,p=s[h]||[],m=p.indexOf(t.id);m===-1&&p.push(t.id),s[h]=p}}},{key:"prepareCell",value:function(t,i){return!t.model&&(!i||!i.dryrun)&&(t.model=this),t.zIndex==null&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t}},{key:"resetCells",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.map(function(u){return i.prepareCell(u,Object.assign(Object.assign({},s),{dryrun:!0}))}),this.collection.reset(t,s),t.map(function(u){return i.prepareCell(u,{options:s})}),this}},{key:"clear",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.getCells();if(i.length===0)return this;var s=Object.assign(Object.assign({},t),{clear:!0});return this.batchUpdate("clear",function(){for(var u=i.sort(function(c,f){var d=c.isEdge()?1:2,h=f.isEdge()?1:2;return d-h});u.length>0;){var l=u.shift();l&&l.remove(s)}},s),this}},{key:"addNode",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=wa.isNode(t)?t:this.createNode(t);return this.addCell(s,i),s}},{key:"createNode",value:function(t){return wa.create(t)}},{key:"addEdge",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=eo.isEdge(t)?t:this.createEdge(t);return this.addCell(s,i),s}},{key:"createEdge",value:function(t){return eo.create(t)}},{key:"addCell",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(t)?this.addCells(t,s):(!this.collection.has(t)&&!this.addings.has(t)&&(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,s),s),t.eachChild(function(u){return i.addCell(u,s)}),this.addings.delete(t)),this)}},{key:"addCells",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t.length;if(u===0)return this;var l=Object.assign(Object.assign({},s),{position:u-1,maxPosition:u-1});return this.startBatch("add",Object.assign(Object.assign({},l),{cells:t})),t.forEach(function(c){i.addCell(c,l),l.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},l),{cells:t})),this}},{key:"removeCell",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=typeof t=="string"?this.getCell(t):t;return s&&this.has(s)?this.collection.remove(s,i):null}},{key:"updateCellId",value:function(t,i){this.startBatch("update",{id:i}),t.prop("id",i);var s=t.clone({keepId:!0});this.addCell(s);var u=this.getConnectedEdges(t);return u.forEach(function(l){var c=l.getSourceCell(),f=l.getTargetCell();c===t&&l.setSource(Object.assign(Object.assign({},l.getSource()),{cell:i})),f===t&&l.setTarget(Object.assign(Object.assign({},l.getTarget()),{cell:i}))}),this.removeCell(t),this.stopBatch("update",{id:i}),s}},{key:"removeCells",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.length?this.batchUpdate("remove",function(){return t.map(function(u){return i.removeCell(u,s)})}):[]}},{key:"removeConnectedEdges",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getConnectedEdges(t);return s.forEach(function(u){u.remove(i)}),s}},{key:"disconnectConnectedEdges",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=typeof t=="string"?t:t.id;this.getConnectedEdges(t).forEach(function(u){var l=u.getSourceCell(),c=u.getTargetCell();l&&l.id===s&&u.setSource({x:0,y:0},i),c&&c.id===s&&u.setTarget({x:0,y:0},i)})}},{key:"has",value:function(t){return this.collection.has(t)}},{key:"total",value:function(){return this.collection.length}},{key:"indexOf",value:function(t){return this.collection.indexOf(t)}},{key:"getCell",value:function(t){return this.collection.get(t)}},{key:"getCells",value:function(){return this.collection.toArray()}},{key:"getFirstCell",value:function(){return this.collection.first()}},{key:"getLastCell",value:function(){return this.collection.last()}},{key:"getMinZIndex",value:function(){var t=this.collection.first();return t&&t.getZIndex()||0}},{key:"getMaxZIndex",value:function(){var t=this.collection.last();return t&&t.getZIndex()||0}},{key:"getCellsFromCache",value:function(t){var i=this;return t?Object.keys(t).map(function(s){return i.getCell(s)}).filter(function(s){return s!=null}):[]}},{key:"getNodes",value:function(){return this.getCellsFromCache(this.nodes)}},{key:"getEdges",value:function(){return this.getCellsFromCache(this.edges)}},{key:"getOutgoingEdges",value:function(t){var i=this,s=typeof t=="string"?t:t.id,u=this.outgoings[s];return u?u.map(function(l){return i.getCell(l)}).filter(function(l){return l&&l.isEdge()}):null}},{key:"getIncomingEdges",value:function(t){var i=this,s=typeof t=="string"?t:t.id,u=this.incomings[s];return u?u.map(function(l){return i.getCell(l)}).filter(function(l){return l&&l.isEdge()}):null}},{key:"getConnectedEdges",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[],l=typeof t=="string"?this.getCell(t):t;if(l==null)return u;var c={},f=s.indirect,d=s.incoming,h=s.outgoing;d==null&&h==null&&(d=h=!0);var p=function x(O,D){var I=D?i.getOutgoingEdges(O):i.getIncomingEdges(O);if(I!=null&&I.forEach(function(H){c[H.id]||(u.push(H),c[H.id]=!0,f&&(d&&x(H,!1),h&&x(H,!0)))}),f&&O.isEdge()){var F=D?O.getTargetCell():O.getSourceCell();F&&F.isEdge()&&(c[F.id]||(u.push(F),x(F,D)))}};if(h&&p(l,!0),d&&p(l,!1),s.deep){var m=l.getDescendants({deep:!0}),b={};m.forEach(function(x){x.isNode()&&(b[x.id]=!0)});var E=function(O,D){var I=D?i.getOutgoingEdges(O.id):i.getIncomingEdges(O.id);I!=null&&I.forEach(function(F){if(!c[F.id]){var H=F.getSourceCell(),$=F.getTargetCell();if(!s.enclosed&&H&&b[H.id]&&$&&b[$.id])return;u.push(F),c[F.id]=!0}})};m.forEach(function(x){x.isEdge()||(h&&E(x,!0),d&&E(x,!1))})}return u}},{key:"isBoundary",value:function(t,i){var s=typeof t=="string"?this.getCell(t):t,u=i?this.getIncomingEdges(s):this.getOutgoingEdges(s);return u==null||u.length===0}},{key:"getBoundaryNodes",value:function(t){var i=this,s=[];return Object.keys(this.nodes).forEach(function(u){if(i.isBoundary(u,t)){var l=i.getCell(u);l&&s.push(l)}}),s}},{key:"getRoots",value:function(){return this.getBoundaryNodes(!0)}},{key:"getLeafs",value:function(){return this.getBoundaryNodes(!1)}},{key:"isRoot",value:function(t){return this.isBoundary(t,!0)}},{key:"isLeaf",value:function(t){return this.isBoundary(t,!1)}},{key:"getNeighbors",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.incoming,u=i.outgoing;s==null&&u==null&&(s=u=!0);var l=this.getConnectedEdges(t,i),c=l.reduce(function(h,p){var m=p.hasLoop(i),b=p.getSourceCell(),E=p.getTargetCell();return s&&b&&b.isNode()&&!h[b.id]&&(m||b!==t&&(!i.deep||!b.isDescendantOf(t)))&&(h[b.id]=b),u&&E&&E.isNode()&&!h[E.id]&&(m||E!==t&&(!i.deep||!E.isDescendantOf(t)))&&(h[E.id]=E),h},{});if(t.isEdge()){if(s){var f=t.getSourceCell();f&&f.isNode()&&!c[f.id]&&(c[f.id]=f)}if(u){var d=t.getTargetCell();d&&d.isNode()&&!c[d.id]&&(c[d.id]=d)}}return Object.keys(c).map(function(h){return c[h]})}},{key:"isNeighbor",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=s.incoming,l=s.outgoing;return u==null&&l==null&&(u=l=!0),this.getConnectedEdges(t,s).some(function(c){var f=c.getSourceCell(),d=c.getTargetCell();return!!(u&&f&&f.id===i.id||l&&d&&d.id===i.id)})}},{key:"getSuccessors",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[];return this.search(t,function(l,c){l!==t&&i.matchDistance(c,s.distance)&&u.push(l)},Object.assign(Object.assign({},s),{outgoing:!0})),u}},{key:"isSuccessor",value:function(t,i){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=!1;return this.search(t,function(c,f){if(c===i&&c!==t&&s.matchDistance(f,u.distance))return l=!0,!1},Object.assign(Object.assign({},u),{outgoing:!0})),l}},{key:"getPredecessors",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[];return this.search(t,function(l,c){l!==t&&i.matchDistance(c,s.distance)&&u.push(l)},Object.assign(Object.assign({},s),{incoming:!0})),u}},{key:"isPredecessor",value:function(t,i){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=!1;return this.search(t,function(c,f){if(c===i&&c!==t&&s.matchDistance(f,u.distance))return l=!0,!1},Object.assign(Object.assign({},u),{incoming:!0})),l}},{key:"matchDistance",value:function(t,i){return i==null?!0:typeof i=="function"?i(t):Array.isArray(i)&&i.includes(t)?!0:t===i}},{key:"getCommonAncestor",value:function(){for(var t=[],i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return s.forEach(function(l){l&&(Array.isArray(l)?t.push.apply(t,Object(ot.a)(l)):t.push(l))}),Zi.getCommonAncestor.apply(Zi,t)}},{key:"getSubGraph",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[],l={},c=[],f=[],d=function(p){l[p.id]||(u.push(p),l[p.id]=p,p.isEdge()&&f.push(p),p.isNode()&&c.push(p))};return t.forEach(function(h){if(d(h),s.deep){var p=h.getDescendants({deep:!0});p.forEach(function(m){return d(m)})}}),f.forEach(function(h){var p=h.getSourceCell(),m=h.getTargetCell();p&&!l[p.id]&&(u.push(p),l[p.id]=p,p.isNode()&&c.push(p)),m&&!l[m.id]&&(u.push(m),l[m.id]=m,m.isNode()&&c.push(m))}),c.forEach(function(h){var p=i.getConnectedEdges(h,s);p.forEach(function(m){var b=m.getSourceCell(),E=m.getTargetCell();!l[m.id]&&b&&l[b.id]&&E&&l[E.id]&&(u.push(m),l[m.id]=m)})}),u}},{key:"cloneSubGraph",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getSubGraph(t,i);return this.cloneCells(s)}},{key:"cloneCells",value:function(t){return Zi.cloneCells(t)}},{key:"getNodesFromPoint",value:function(t,i){var s=typeof t=="number"?{x:t,y:i||0}:t;return this.getNodes().filter(function(u){return u.getBBox().containsPoint(s)})}},{key:"getNodesInArea",value:function(t,i,s,u,l){var c=typeof t=="number"?new fr(t,i,s,u):fr.create(t),f=typeof t=="number"?l:i,d=f&&f.strict;return this.getNodes().filter(function(h){var p=h.getBBox();return d?c.containsRect(p):c.isIntersectWithRect(p)})}},{key:"getEdgesInArea",value:function(t,i,s,u,l){var c=typeof t=="number"?new fr(t,i,s,u):fr.create(t),f=typeof t=="number"?l:i,d=f&&f.strict;return this.getEdges().filter(function(h){var p=h.getBBox();return p.width===0?p.inflate(1,0):p.height===0&&p.inflate(0,1),d?c.containsRect(p):c.isIntersectWithRect(p)})}},{key:"getNodesUnderNode",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.getBBox(),u=i.by==null||i.by==="bbox"?this.getNodesInArea(s):this.getNodesFromPoint(s[i.by]);return u.filter(function(l){return t.id!==l.id&&!l.isDescendantOf(t)})}},{key:"getAllCellsBBox",value:function(){return this.getCellsBBox(this.getCells())}},{key:"getCellsBBox",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Zi.getCellsBBox(t,i)}},{key:"search",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.breadthFirst?this.breadthFirstSearch(t,i,s):this.depthFirstSearch(t,i,s)}},{key:"breadthFirstSearch",value:function(t,i){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=[],c={},f={};l.push(t),f[t.id]=0;for(var d=function(){var m=l.shift();if(m==null||c[m.id]||(c[m.id]=!0,N.call(i,s,m,f[m.id])===!1))return"continue";var b=s.getNeighbors(m,u);b.forEach(function(E){f[E.id]=f[m.id]+1,l.push(E)})};l.length>0;)var h=d()}},{key:"depthFirstSearch",value:function(t,i){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=[],c={},f={};l.push(t),f[t.id]=0;for(var d=function(){var m=l.pop();if(m==null||c[m.id]||(c[m.id]=!0,N.call(i,s,m,f[m.id])===!1))return"continue";var b=s.getNeighbors(m,u),E=l.length;b.forEach(function(x){f[x.id]=f[m.id]+1,l.splice(E,0,x)})};l.length>0;)var h=d()}},{key:"getShortestPath",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u={};this.getEdges().forEach(function(h){var p=h.getSourceCellId(),m=h.getTargetCellId();p&&m&&(u[p]||(u[p]=[]),u[m]||(u[m]=[]),u[p].push(m),s.directed||u[m].push(p))});var l=typeof t=="string"?t:t.id,c=rS.run(u,l,s.weight),f=[],d=typeof i=="string"?i:i.id;for(c[d]&&f.push(d);d=c[d];)f.unshift(d);return f}},{key:"translate",value:function(t,i,s){return this.getCells().filter(function(u){return!u.hasParent()}).forEach(function(u){return u.translate(t,i,s)}),this}},{key:"resize",value:function(t,i,s){return this.resizeCells(t,i,this.getCells(),s)}},{key:"resizeCells",value:function(t,i,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.getCellsBBox(s);if(l){var c=Math.max(t/l.width,0),f=Math.max(i/l.height,0),d=l.getOrigin();s.forEach(function(h){return h.scale(c,f,d,u)})}return this}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n.toJSON(this.getCells(),t)}},{key:"parseJSON",value:function(t){return n.fromJSON(t)}},{key:"fromJSON",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.parseJSON(t);return this.resetCells(s,i),this}},{key:"startBatch",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:i}),this}},{key:"stopBatch",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:i}),this}},{key:"batchUpdate",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch(t,s);var u=i();return this.stopBatch(t,s),u}},{key:"hasActiveBatch",value:function(){var t=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(this.batches),s=Array.isArray(i)?i:[i];return s.some(function(u){return t.batches[u]>0})}}]),n}(Ls,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.addNode=="function"&&typeof e.addEdge=="function"&&e.collection!=null}o.isModel=a})(yl||(yl={})),function(o){function a(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{cells:n.map(function(t){return t.toJSON(e)})}}o.toJSON=a;function r(n){var e=[];return Array.isArray(n)?e.push.apply(e,Object(ot.a)(n)):(n.cells&&e.push.apply(e,Object(ot.a)(n.cells)),n.nodes&&n.nodes.forEach(function(t){t.shape==null&&(t.shape="rect"),e.push(t)}),n.edges&&n.edges.forEach(function(t){t.shape==null&&(t.shape="edge"),e.push(t)})),e.map(function(t){var i=t.shape;if(i){if(wa.registry.exist(i))return wa.create(t);if(eo.registry.exist(i))return eo.create(t)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}o.fromJSON=r}(yl||(yl={}));var kf=".text-block-content",k1=lS("text-block"),D1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"content",get:function(){return this.getContent()},set:function(e){this.setContent(e)}},{key:"getContent",value:function(){return this.store.get("content","")}},{key:"setContent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.store.set("content",e,t)}},{key:"setup",value:function(){var e=this;Object(Vr.a)(Object(Hr.a)(r.prototype),"setup",this).call(this),this.store.on("change:*",function(t){var i=t.key;i==="content"?e.updateContent(e.getContent()):i==="size"&&e.updateSize(e.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}},{key:"updateSize",value:function(e){Yr.SUPPORT_FOREIGNOBJECT&&this.setAttrs(Object(Qe.a)({foreignObject:Object.assign({},e)},kf,{style:Object.assign({},e)}))}},{key:"updateContent",value:function(e){Yr.SUPPORT_FOREIGNOBJECT?this.setAttrs(Object(Qe.a)({},kf,{html:e?_.sanitizeHTML(e):""})):this.setAttrs(Object(Qe.a)({},kf,{text:e}))}}]),r}(wa);(function(o){o.config({type:k1,view:k1,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Yr.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">','<div class="'.concat(kf.substr(1),'" />'),"</body>","</foreignObject>"].join(""):'<text class="'.concat(kf.substr(1),'"/>'),"</g>"].join(""),attrs:Object(Qe.a)({".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}}},kf,{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}})}),wa.registry.register(k1,o)})(D1||(D1={})),function(o){var a="content",r=function(n){Object($n.a)(t,n);var e=Object(Xn.a)(t);function t(){return Object(Ie.a)(this,t),e.apply(this,arguments)}return Object(pe.a)(t,[{key:"confirmUpdate",value:function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=Object(Vr.a)(Object(Hr.a)(t.prototype),"confirmUpdate",this).call(this,s,u);return this.hasAction(l,a)&&(this.updateContent(),l=this.removeAction(l,a)),l}},{key:"update",value:function(s){if(Yr.SUPPORT_FOREIGNOBJECT)Object(Vr.a)(Object(Hr.a)(t.prototype),"update",this).call(this,s);else{var u=this.cell,l=Object.assign({},s||u.getAttrs());delete l[kf],Object(Vr.a)(Object(Hr.a)(t.prototype),"update",this).call(this,l),(!s||C.has(s,kf))&&this.updateContent(s)}}},{key:"updateContent",value:function(s){if(Yr.SUPPORT_FOREIGNOBJECT)Object(Vr.a)(Object(Hr.a)(t.prototype),"update",this).call(this,s);else{var u=this.cell,l=(s||u.getAttrs())[kf],c=R.breakText(u.getContent(),u.getSize(),l,{svgDocument:this.graph.view.svg}),f=Object(Qe.a)({},kf,C.merge({},l,{text:c}));Object(Vr.a)(Object(Hr.a)(t.prototype),"update",this).call(this,f)}}}]),t}(ss);o.View=r,function(n){n.config({bootstrap:["render",a],actions:Yr.SUPPORT_FOREIGNOBJECT?{}:{size:a,content:a}}),ss.registry.register(k1,n)}(r=o.View||(o.View={}))}(D1||(D1={}));var q5=xs.define({shape:"empty"});function ez(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body";return[{tagName:o,selector:a},{tagName:"text",selector:"label"}]}function xd(o,a){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n={constructorName:o,markup:ez(o,r.selector),attrs:Object(Qe.a)({},o,Object.assign({},xs.bodyAttr))},e=r.parent||xs;return e.define(C.merge(n,a,{shape:o}))}var tz=xd("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),nz=wa.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},xs.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},xs.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},xs.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},xs.labelAttr),{refY2:15})}}),rz=xd("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),cS=10,iz=xs.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},xs.bodyAttr),{lateral:cS}),top:Object.assign(Object.assign({},xs.bodyAttr),{refCx:"50%",refRx:"50%",cy:cS,ry:cS})},attrHooks:{lateral:{set:function(a,r){var n=r.refBBox,e=P.isPercentage(a);e&&(a=parseFloat(a)/100);var t=n.x,i=n.y,s=n.width,u=n.height,l=s/2,c=e?u*a:a,f=.551784,d=f*l,h=f*c,p=t,m=t+s/2,b=t+s,E=i+c,x=E-c,O=i+u-c,D=i+u,I=["M",p,E,"L",p,O,"C",t,O+h,m-d,D,m,D,"C",m+d,D,b,O+h,b,O,"L",b,E,"C",b,E-h,m+d,x,m,x,"C",m-d,x,p,E-h,p,E,"Z"];return{d:I.join(" ")}}}},knob:{enabled:!0,position:function(a){var r=a.node,n=r.attr("body/lateral");return{x:0,y:n}},onMouseMove:function(a){var r=a.node,n=a.data,e=a.deltaY;if(e!==0){var t=r.getBBox(),i=r.attr("body/lateral");n.round==null&&(n.round=i);var s=0,u=t.height/2,l=P.clamp(n.round+e,s,u);l!==i&&r.attr({body:{lateral:l},top:{cy:l,ry:l}})}}}}),az=xd("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),oz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},I1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"points",get:function(){return this.getPoints()},set:function(e){this.setPoints(e)}},{key:"getPoints",value:function(){return this.getAttrByPath("body/refPoints")}},{key:"setPoints",value:function(e,t){return e==null?this.removePoints():this.setAttrByPath("body/refPoints",r.pointsToString(e),t),this}},{key:"removePoints",value:function(){return this.removeAttrByPath("body/refPoints"),this}}]),r}(xs);(function(o){function a(r){return typeof r=="string"?r:r.map(function(n){return Array.isArray(n)?n.join(","):gt.isPointLike(n)?"".concat(n.x,", ").concat(n.y):""}).join(" ")}o.pointsToString=a,o.config({propHooks:function(n){var e=n.points,t=oz(n,["points"]);if(e){var i=a(e);i&&C.setByPath(t,"attrs/body/refPoints",i)}return t}})})(I1||(I1={}));var sz=xd("polygon",{},{parent:I1}),uz=xd("polyline",{},{parent:I1}),lz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},cz=xs.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks:function(a){var r=a.path,n=lz(a,["path"]);return r&&C.setByPath(n,"attrs/body/refD",r),n}}),fz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},dz=xs.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},Yr.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:R.ns.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},xs.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(a){var r=a.text,n=fz(a,["text"]);return r&&C.setByPath(n,"attrs/label/text",r),n},attrHooks:{text:{set:function(a,r){var n=r.cell,e=r.view,t=r.refBBox,i=r.elem,s=r.attrs;if(i instanceof HTMLElement)i.textContent=a;else{var u=s.style||{},l={text:a,width:-5,height:"100%"},c=Object.assign({textVerticalAnchor:"middle"},u),f=Rc.presets.textWrap;return N.call(f.set,this,l,{cell:n,view:e,elem:i,refBBox:t,attrs:c}),{fill:u.color||null}}},position:function(a,r){var n=r.refBBox,e=r.elem;if(e instanceof SVGElement)return n.getCenter()}}}}),hz=xd("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:u0()},{selector:"image"}),vz=xd("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:u0()}),gz=xd("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:u0()}),pz=xd("image-inscribed",{propHooks:u0(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),fS=eo.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),mz=eo.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),yz=eo.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}}),Lc=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"html",get:function(){return this.getHTML()},set:function(e){this.setHTML(e)}},{key:"getHTML",value:function(){return this.store.get("html")}},{key:"setHTML",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeHTML(t):this.store.set("html",e,t),this}},{key:"removeHTML",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("html",e)}}]),r}(xs);(function(o){var a=function(r){Object($n.a)(e,r);var n=Object(Xn.a)(e);function e(){return Object(Ie.a)(this,e),n.apply(this,arguments)}return Object(pe.a)(e,[{key:"init",value:function(){var i=this;Object(Vr.a)(Object(Hr.a)(e.prototype),"init",this).call(this),this.cell.on("change:*",function(){var s=i.graph.hook.shouldUpdateHTMLComponent(i.cell);s&&i.renderHTMLComponent()})}},{key:"confirmUpdate",value:function(i){var s=this,u=Object(Vr.a)(Object(Hr.a)(e.prototype),"confirmUpdate",this).call(this,i);return this.handleAction(u,e.action,function(){return s.renderHTMLComponent()})}},{key:"renderHTMLComponent",value:function(){var i=this.selectors.foContent;if(i){var s=this.$(i).empty(),u=this.graph.hook.getHTMLComponent(this.cell);u&&(typeof u=="string"?s.html(u):s.append(u))}}}]),e}(ss);o.View=a,function(r){r.action="html",r.config({bootstrap:[r.action],actions:{html:r.action}}),ss.registry.register("html-view",r)}(a=o.View||(o.View={}))})(Lc||(Lc={})),function(o){o.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Hi.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),wa.registry.register("html",o)}(Lc||(Lc={})),function(o){o.componentRegistry=lo.create({type:"html componnet"})}(Lc||(Lc={}));var bz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},R1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.delay=10,e.throttle=2,e.threshold=5,e.changeCount=0,e.timestamp=0,e.options=Object.assign(Object.assign({},r.defaultOptions),n),e.graph.model.on("cell:change:*",e.onModelChanged,Object(Co.a)(e)),e}return Object(pe.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"onModelChanged",value:function(){if(!this.disabled){var e=new Date().getTime(),t=(e-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}}},{key:"save",value:function(){this.trigger("save")}},{key:"reset",value:function(){this.changeCount=0,this.timestamp=new Date().getTime()}},{key:"dispose",value:function(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}}]),r}(XP);bz([XP.dispose()],R1.prototype,"dispose",null),function(o){o.defaultOptions={delay:10,throttle:2,threshold:5}}(R1||(R1={}));var xa=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.graph=n,e.init(),e}return Object(pe.a)(r,[{key:"options",get:function(){return this.graph.options}},{key:"model",get:function(){return this.graph.model}},{key:"view",get:function(){return this.graph.view}},{key:"init",value:function(){}}]),r}(Nc),Cz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Ch=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;Object(Ie.a)(this,r),e=a.call(this),e.graph=n;var t=Hi.parseJSONMarkup(r.markup),i=t.selectors,s=t.fragment;return e.background=i.background,e.grid=i.grid,e.svg=i.svg,e.defs=i.defs,e.viewport=i.viewport,e.primer=i.primer,e.stage=i.stage,e.decorator=i.decorator,e.overlay=i.overlay,e.container=e.options.container,e.restore=r.snapshoot(e.container),e.$(e.container).addClass(e.prefixClassName("graph")).append(s),e.delegateEvents(),e}return Object(pe.a)(r,[{key:"model",get:function(){return this.graph.model}},{key:"options",get:function(){return this.graph.options}},{key:"delegateEvents",value:function(){var e=this.constructor;return Object(Vr.a)(Object(Hr.a)(r.prototype),"delegateEvents",this).call(this,e.events),this}},{key:"guard",value:function(e,t){return e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t)?!0:e.data&&e.data.guarded!==void 0?e.data.guarded:!(t&&t.cell&&Zi.isCell(t.cell)||this.svg===e.target||this.container===e.target||En.a.contains(this.svg,e.target))}},{key:"findView",value:function(e){return this.graph.renderer.findViewByElem(e)}},{key:"onDblClick",value:function(e){this.options.preventDefaultDblClick&&e.preventDefault();var t=this.normalizeEvent(e),i=this.findView(t.target);if(!this.guard(t,i)){var s=this.graph.snapToGrid(t.clientX,t.clientY);i?i.onDblClick(t,s.x,s.y):this.graph.trigger("blank:dblclick",{e:t,x:s.x,y:s.y})}}},{key:"onClick",value:function(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){var t=this.normalizeEvent(e),i=this.findView(t.target);if(this.guard(t,i))return;var s=this.graph.snapToGrid(t.clientX,t.clientY);i?i.onClick(t,s.x,s.y):this.graph.trigger("blank:click",{e:t,x:s.x,y:s.y})}}},{key:"isPreventDefaultContextMenu",value:function(e,t){var i=this.options.preventDefaultContextMenu;return typeof i=="function"&&(i=N.call(i,this.graph,{view:t})),i}},{key:"onContextMenu",value:function(e){var t=this.normalizeEvent(e),i=this.findView(t.target);if(this.isPreventDefaultContextMenu(t,i)&&e.preventDefault(),!this.guard(t,i)){var s=this.graph.snapToGrid(t.clientX,t.clientY);i?i.onContextMenu(t,s.x,s.y):this.graph.trigger("blank:contextmenu",{e:t,x:s.x,y:s.y})}}},{key:"delegateDragEvents",value:function(e,t){e.data==null&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});var i=this.constructor;this.delegateDocumentEvents(i.documentEvents,e.data),this.undelegateEvents()}},{key:"getMouseMovedCount",value:function(e){var t=this.getEventData(e);return t.mouseMovedCount||0}},{key:"onMouseDown",value:function(e){var t=this.normalizeEvent(e),i=this.findView(t.target);if(!this.guard(t,i)){this.options.preventDefaultMouseDown&&t.preventDefault();var s=this.graph.snapToGrid(t.clientX,t.clientY);i?i.onMouseDown(t,s.x,s.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:s.x,y:s.y})),this.delegateDragEvents(t,i)}}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),i=t.startPosition;if(!(i&&i.x===e.clientX&&i.y===e.clientY)){t.mouseMovedCount==null&&(t.mouseMovedCount=0),t.mouseMovedCount+=1;var s=t.mouseMovedCount;if(!(s<=this.options.moveThreshold)){var u=this.normalizeEvent(e),l=this.graph.snapToGrid(u.clientX,u.clientY),c=t.currentView;c?c.onMouseMove(u,l.x,l.y):this.graph.trigger("blank:mousemove",{e:u,x:l.x,y:l.y}),this.setEventData(u,t)}}}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),i=this.graph.snapToGrid(t.clientX,t.clientY),s=this.getEventData(e),u=s.currentView;u?u.onMouseUp(t,i.x,i.y):this.graph.trigger("blank:mouseup",{e:t,x:i.x,y:i.y}),e.isPropagationStopped()||this.onClick(En.a.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}},{key:"onMouseOver",value:function(e){var t=this.normalizeEvent(e),i=this.findView(t.target);if(!this.guard(t,i))if(i)i.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}},{key:"onMouseOut",value:function(e){var t=this.normalizeEvent(e),i=this.findView(t.target);if(!this.guard(t,i))if(i)i.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}},{key:"onMouseEnter",value:function(e){var t=this.normalizeEvent(e),i=this.findView(t.target);if(!this.guard(t,i)){var s=this.graph.renderer.findViewByElem(t.relatedTarget);if(i){if(s===i)return;i.onMouseEnter(t)}else{if(s)return;this.graph.trigger("graph:mouseenter",{e:t})}}}},{key:"onMouseLeave",value:function(e){var t=this.normalizeEvent(e),i=this.findView(t.target);if(!this.guard(t,i)){var s=this.graph.renderer.findViewByElem(t.relatedTarget);if(i){if(s===i)return;i.onMouseLeave(t)}else{if(s)return;this.graph.trigger("graph:mouseleave",{e:t})}}}},{key:"onMouseWheel",value:function(e){var t=this.normalizeEvent(e),i=this.findView(t.target);if(!this.guard(t,i)){var s=t.originalEvent,u=this.graph.snapToGrid(s.clientX,s.clientY),l=Math.max(-1,Math.min(1,s.wheelDelta||-s.detail));i?i.onMouseWheel(t,u.x,u.y,l):this.graph.trigger("blank:mousewheel",{e:t,delta:l,x:u.x,y:u.y})}}},{key:"onCustomEvent",value:function(e){var t=e.currentTarget,i=t.getAttribute("event")||t.getAttribute("data-event");if(i){var s=this.findView(t);if(s){var u=this.normalizeEvent(e);if(this.guard(u,s))return;var l=this.graph.snapToGrid(u.clientX,u.clientY);s.onCustomEvent(u,i,l.x,l.y)}}}},{key:"handleMagnetEvent",value:function(e,t){var i=e.currentTarget,s=i.getAttribute("magnet");if(s&&s.toLowerCase()!=="false"){var u=this.findView(i);if(u){var l=this.normalizeEvent(e);if(this.guard(l,u))return;var c=this.graph.snapToGrid(l.clientX,l.clientY);N.call(t,this.graph,u,l,i,c.x,c.y)}}}},{key:"onMagnetMouseDown",value:function(e){this.handleMagnetEvent(e,function(t,i,s,u,l){t.onMagnetMouseDown(i,s,u,l)})}},{key:"onMagnetDblClick",value:function(e){this.handleMagnetEvent(e,function(t,i,s,u,l){t.onMagnetDblClick(i,s,u,l)})}},{key:"onMagnetContextMenu",value:function(e){var t=this.normalizeEvent(e),i=this.findView(t.target);this.isPreventDefaultContextMenu(t,i)&&t.preventDefault(),this.handleMagnetEvent(t,function(s,u,l,c,f){s.onMagnetContextMenu(u,l,c,f)})}},{key:"onLabelMouseDown",value:function(e){var t=e.currentTarget,i=this.findView(t);if(i){var s=this.normalizeEvent(e);if(this.guard(s,i))return;var u=this.graph.snapToGrid(s.clientX,s.clientY);i.onLabelMouseDown(s,u.x,u.y)}}},{key:"onImageDragStart",value:function(){return!1}},{key:"dispose",value:function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}}}]),r}(oa);Cz([oa.dispose()],Ch.prototype,"dispose",null),function(o){var a="".concat(ml.prefixCls,"-graph");o.markup=[{ns:R.ns.xhtml,tagName:"div",selector:"background",className:"".concat(a,"-background")},{ns:R.ns.xhtml,tagName:"div",selector:"grid",className:"".concat(a,"-grid")},{ns:R.ns.svg,tagName:"svg",selector:"svg",className:"".concat(a,"-svg"),attrs:{width:"100%",height:"100%","xmlns:xlink":R.ns.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:"".concat(a,"-svg-viewport"),children:[{tagName:"g",selector:"primer",className:"".concat(a,"-svg-primer")},{tagName:"g",selector:"stage",className:"".concat(a,"-svg-stage")},{tagName:"g",selector:"decorator",className:"".concat(a,"-svg-decorator")},{tagName:"g",selector:"overlay",className:"".concat(a,"-svg-overlay")}]}]}];function r(n){var e=n.cloneNode();return n.childNodes.forEach(function(t){return e.appendChild(t)}),function(){for(R.empty(n);n.attributes.length>0;)n.removeAttribute(n.attributes[0].name);for(var t=0,i=e.attributes.length;t<i;t+=1){var s=e.attributes[t];n.setAttribute(s.name,s.value)}e.childNodes.forEach(function(u){return n.appendChild(u)})}}o.snapshoot=r}(Ch||(Ch={})),function(o){var a,r=ml.prefixCls;o.events=(a={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"},Object(Qe.a)(a,"mouseenter  .".concat(r,"-cell"),"onMouseEnter"),Object(Qe.a)(a,"mouseleave  .".concat(r,"-cell"),"onMouseLeave"),Object(Qe.a)(a,"mouseenter  .".concat(r,"-cell-tools"),"onMouseEnter"),Object(Qe.a)(a,"mouseleave  .".concat(r,"-cell-tools"),"onMouseLeave"),Object(Qe.a)(a,"mousedown   .".concat(r,"-cell [event]"),"onCustomEvent"),Object(Qe.a)(a,"touchstart  .".concat(r,"-cell [event]"),"onCustomEvent"),Object(Qe.a)(a,"mousedown   .".concat(r,"-cell [data-event]"),"onCustomEvent"),Object(Qe.a)(a,"touchstart  .".concat(r,"-cell [data-event]"),"onCustomEvent"),Object(Qe.a)(a,"dblclick    .".concat(r,"-cell [magnet]"),"onMagnetDblClick"),Object(Qe.a)(a,"contextmenu .".concat(r,"-cell [magnet]"),"onMagnetContextMenu"),Object(Qe.a)(a,"mousedown   .".concat(r,"-cell [magnet]"),"onMagnetMouseDown"),Object(Qe.a)(a,"touchstart  .".concat(r,"-cell [magnet]"),"onMagnetMouseDown"),Object(Qe.a)(a,"dblclick    .".concat(r,"-cell [data-magnet]"),"onMagnetDblClick"),Object(Qe.a)(a,"contextmenu .".concat(r,"-cell [data-magnet]"),"onMagnetContextMenu"),Object(Qe.a)(a,"mousedown   .".concat(r,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(Qe.a)(a,"touchstart  .".concat(r,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(Qe.a)(a,"dragstart   .".concat(r,"-cell image"),"onImageDragStart"),Object(Qe.a)(a,"mousedown   .".concat(r,"-edge .").concat(r,"-edge-label"),"onLabelMouseDown"),Object(Qe.a)(a,"touchstart  .".concat(r,"-edge .").concat(r,"-edge-label"),"onLabelMouseDown"),a),o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(Ch||(Ch={}));var Kl;(function(o){function a(r,n){return function(e,t,i){var s=i.value;i.value=function(){var u=this.scroller.widget;if(u==null){var l="Shoule enable scroller to use method '".concat(t,"'");if(r!==!1)throw console.error(l),new Error(l);return n!==!1&&console.warn(l),this}for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return s.call.apply(s,[this].concat(f))}}}o.checkScroller=a})(Kl||(Kl={}));var Ez=`.x6-graph {
  position: relative;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-halo {
  position: absolute;
  pointer-events: none;
}
.x6-widget-halo-content {
  position: absolute;
  top: 100%;
  padding: 6px;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-halo-handles + .x6-widget-halo-content {
  right: -20px;
  left: -20px;
  margin-top: 30px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 25px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 20px;
}
.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {
  right: 0;
  left: 0;
  margin-top: 10px;
}
.x6-widget-halo-content {
  color: #fff;
  background-color: #6a6b8a;
}
.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {
  position: absolute;
  right: 100%;
  bottom: 100%;
  margin-right: 6px;
  margin-bottom: 3px;
}
.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {
  background-color: #fff;
  border-radius: 50%;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar {
  margin-top: -60px;
  margin-left: -18px;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {
  top: -22px;
  left: -9px;
}
.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizeSpeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
.x6-widget-selection {
  position: absolute;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: attr(data-not-found-text);
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  -webkit-appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
.x6-widget-knob {
  position: absolute;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin-top: -8px;
  margin-left: -8px;
  cursor: pointer;
  user-select: none;
}
.x6-widget-knob::before,
.x6-widget-knob::after {
  position: absolute;
  transform: rotate(45deg);
  content: '';
}
.x6-widget-knob::before {
  top: 4px;
  left: 4px;
  box-sizing: border-box;
  width: 8px;
  height: 8px;
  background-color: #fff;
}
.x6-widget-knob::after {
  top: 5px;
  left: 5px;
  box-sizing: border-box;
  width: 6px;
  height: 6px;
  background-color: #fca000;
}
.x6-graph-print {
  position: relative;
}
.x6-graph-print .x6-graph-print-ready {
  display: none;
}
.x6-graph-print .x6-graph-print-preview {
  overflow: hidden !important;
  background: #fff !important;
}
@media print {
  html,
  html > body.x6-graph-printing {
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  html > body.x6-graph-printing > * {
    display: none !important;
  }
  html > body.x6-graph-printing > .x6-graph-print {
    display: block !important;
  }
  .x6-graph-print {
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: always;
    background: #fff !important;
  }
  .x6-graph-print .x6-graph-print-ready {
    display: none;
  }
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`,wz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},l0=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"init",value:function(){ml.autoInsertCSS&&r.ensure()}},{key:"dispose",value:function(){r.clean()}}]),r}(xa);wz([l0.dispose()],l0.prototype,"dispose",null),function(o){var a,r=0;function n(){if(r+=1,!(r>1)&&!Yr.isApplyingHMR()){a=document.createElement("style"),a.setAttribute("type","text/css"),a.textContent=Ez;var t=document.querySelector("head");t&&t.insertBefore(a,t.firstChild)}}o.ensure=n;function e(){r-=1,!(r>0)&&(a&&a.parentNode&&a.parentNode.removeChild(a),a=null)}o.clean=e}(l0||(l0={}));var xz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},c0=function(){function o(){Object(Ie.a)(this,o)}return Object(pe.a)(o,[{key:"handleClassName",get:function(){return Oa.handle}},{key:"pie",get:function(){return Object.assign(Object.assign({},o.defaultPieOptions),this.handleOptions.pie)}},{key:"initHandles",value:function(){var r=this,n;if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(function(i){return r.addHandle(i)}),this.handleOptions.type==="pie"){if(this.pie.toggles){var e=Oa.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(function(i){var s=r.$("<div/>");r.applyAttrs(s,i.attrs),s.addClass(e).addClass("".concat(e,"-pos-").concat(i.position||"e")).attr("data-name",i.name).appendTo(r.container),r.$pieToggles[i.name]=s})}this.setPieIcons()}if(this.$handleContainer){var t=this.handleOptions.type||"surround";this.$handleContainer.addClass(Oa.wrap).addClass(Oa.animate).addClass("".concat(Oa.handle,"-").concat(t))}this.delegateEvents((n={},Object(Qe.a)(n,"mousedown .".concat(Oa.handle),"onHandleMouseDown"),Object(Qe.a)(n,"touchstart .".concat(Oa.handle),"onHandleMouseDown"),Object(Qe.a)(n,"mousedown .".concat(Oa.pieToggle),"onPieToggleMouseDown"),Object(Qe.a)(n,"touchstart .".concat(Oa.pieToggle),"onPieToggleMouseDown"),n))}},{key:"onHandleMouseDown",value:function(r){var n=this.$(r.currentTarget).closest(".".concat(Oa.handle)).attr("data-action");n&&(r.preventDefault(),r.stopPropagation(),this.setEventData(r,{action:n,clientX:r.clientX,clientY:r.clientY,startX:r.clientX,startY:r.clientY}),r.type==="mousedown"&&r.button===2?this.triggerHandleAction(n,"contextmenu",r):(this.triggerHandleAction(n,"mousedown",r),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},r.data)))}},{key:"onHandleMouseMove",value:function(r){var n=this.getEventData(r),e=n.action;e&&this.triggerHandleAction(e,"mousemove",r)}},{key:"onHandleMouseUp",value:function(r){var n=this.getEventData(r),e=n.action;e&&(this.triggerHandleAction(e,"mouseup",r),this.undelegateDocumentEvents())}},{key:"triggerHandleAction",value:function(r,n,e,t){e.preventDefault(),e.stopPropagation();var i=this.normalizeEvent(e),s=this.getEventData(i),u=this.graph.snapToGrid(i.clientX,i.clientY),l=this.graph.snapToGrid(s.clientX,s.clientY),c=u.x-l.x,f=u.y-l.y;this.trigger("action:".concat(r,":").concat(n),Object.assign({e:i,dx:c,dy:f,x:u.x,y:u.y,offsetX:e.clientX-s.startX,offsetY:e.clientY-s.startY},t)),s.clientX=e.clientX,s.clientY=e.clientY}},{key:"onPieToggleMouseDown",value:function(r){r.stopPropagation();var n=this.$(r.target).closest(".".concat(Oa.pieToggle)).attr("data-name");this.isOpen(n)||this.isOpen()&&this.toggleState(),this.toggleState(n)}},{key:"setPieIcons",value:function(){var r=this;this.handleOptions.type==="pie"&&this.$handleContainer.find(".".concat(Oa.handle)).each(function(n,e){var t=r.$(e),i=t.attr("data-action"),s=Oa.pieSlice,u=r.getHandle(i);if(!u||!u.icon){var l=window.getComputedStyle(e,":before").getPropertyValue("content");if(l&&l!=="none"){var c=t.find(".".concat(s,"-txt"));c.length&&mi.create(c[0]).text(l.replace(/['"]/g,""))}var f=t.css("background-image");if(f){var d=f.match(/url\(['"]?([^'"]+)['"]?\)/);if(d){var h=d[1],p=t.find(".".concat(s,"-img"));p.length>0&&mi.create(p[0]).attr("xlink:href",h)}}}})}},{key:"getHandleIdx",value:function(r){return this.handles.findIndex(function(n){return n.name===r})}},{key:"hasHandle",value:function(r){return this.getHandleIdx(r)>=0}},{key:"getHandle",value:function(r){return this.handles.find(function(n){return n.name===r})}},{key:"renderHandle",value:function(r){var n=this.$("<div/>").addClass("".concat(Oa.handle," ").concat(Oa.handle,"-").concat(r.name)).attr("data-action",r.name).prop("draggable",!1);if(this.handleOptions.type==="pie"){var e=this.getHandleIdx(r.name),t=this.pie,i=t.outerRadius,s=t.innerRadius,u=(i+s)/2,l=new gt(i,i),c=ji.toRad(t.sliceAngle),f=e*c+ji.toRad(t.startAngle),d=f+c,h=R.createSlicePathData(s,i,f,d),p=mi.create("svg").addClass("".concat(Oa.pieSlice,"-svg")),m=mi.create("path").addClass(Oa.pieSlice).attr("d",h).translate(i,i),b=gt.fromPolar(u,-f-c/2,l).toJSON(),E=t.iconSize,x=mi.create("image").attr(b).addClass("".concat(Oa.pieSlice,"-img"));b.y=b.y+E-2;var O=mi.create("text",{"font-size":E}).attr(b).addClass("".concat(Oa.pieSlice,"-txt"));x.attr({width:E,height:E}),x.translate(-E/2,-E/2),O.translate(-E/2,-E/2),p.append([m,x,O]),n.append(p.node)}else n.addClass("".concat(Oa.handle,"-pos-").concat(r.position)),r.content&&(typeof r.content=="string"?n.html(r.content):n.append(r.content));return this.updateHandleIcon(n,r.icon),this.applyAttrs(n,r.attrs),n}},{key:"addHandle",value:function(r){var n=this;if(!this.hasHandle(r.name)){this.handles.push(r);var e=r.events;e&&Object.keys(e).forEach(function(t){var i=e[t],s="action:".concat(r.name,":").concat(t);typeof i=="string"?n.on(s,n[i],n):n.on(s,i)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(r))}return this}},{key:"addHandles",value:function(r){var n=this;return r.forEach(function(e){return n.addHandle(e)}),this}},{key:"removeHandles",value:function(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}},{key:"removeHandle",value:function(r){var n=this,e=this.getHandleIdx(r),t=this.handles[e];return t&&(t.events&&Object.keys(t.events).forEach(function(i){n.off("action:".concat(r,":").concat(i))}),this.getHandleElem(r).remove(),this.handles.splice(e,1)),this}},{key:"changeHandle",value:function(r,n){var e=this.getHandle(r);return e&&(this.removeHandle(r),this.addHandle(Object.assign(Object.assign({},e),n))),this}},{key:"toggleHandle",value:function(r,n){var e=this.getHandle(r);if(e){var t=this.getHandleElem(r),i="".concat(Oa.handle,"-selected");n===void 0&&(n=!t.hasClass(i)),t.toggleClass(i,n);var s=n?e.iconSelected:e.icon;s&&this.updateHandleIcon(t,s)}return this}},{key:"selectHandle",value:function(r){return this.toggleHandle(r,!0)}},{key:"deselectHandle",value:function(r){return this.toggleHandle(r,!1)}},{key:"deselectAllHandles",value:function(){var r=this;return this.handles.forEach(function(n){return r.deselectHandle(n.name)}),this}},{key:"getHandleElem",value:function(r){return this.$handleContainer.find(".".concat(Oa.handle,"-").concat(r))}},{key:"updateHandleIcon",value:function(r,n){if(this.handleOptions.type==="pie"){var e=r.find(".".concat(Oa.pieSliceImg));this.$(e[0]).attr("xlink:href",n||"")}else r.css("background-image",n?"url(".concat(n,")"):"")}},{key:"isRendered",value:function(){return this.$handleContainer!=null}},{key:"isOpen",value:function(r){return this.isRendered()?r?this.$pieToggles[r].hasClass(Oa.pieToggleOpened):this.$handleContainer.hasClass("".concat(Oa.pieOpended)):!1}},{key:"toggleState",value:function(r){var n=this;if(this.isRendered()){var e=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(function(s){var u=n.$pieToggles[s];u.removeClass(Oa.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:r}),e.removeClass(Oa.pieOpended);else{if(this.trigger("pie:open",{name:r}),r){var t=this.pie.toggles,i=t&&t.find(function(s){return s.name===r});i&&e.attr({"data-pie-toggle-name":i.name,"data-pie-toggle-position":i.position}),this.$pieToggles[r].addClass(Oa.pieToggleOpened)}e.addClass(Oa.pieOpended)}}}},{key:"applyAttrs",value:function(r,n){if(n){var e=oa.$(r);Object.keys(n).forEach(function(t){var i=e.find(t).addBack().filter(t),s=n[t],u=s.class,l=xz(s,["class"]);u&&i.addClass(u),i.attr(l)})}}}]),o}();(function(o){o.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}})(c0||(c0={}));var Oa;(function(o){o.handle=oa.prototype.prefixClassName("widget-handle"),o.wrap="".concat(o.handle,"-wrap"),o.animate="".concat(o.handle,"-animate"),o.pieOpended="".concat(o.handle,"-pie-opened"),o.pieToggle="".concat(o.handle,"-pie-toggle"),o.pieToggleOpened="".concat(o.handle,"-pie-toggle-opened"),o.pieSlice="".concat(o.handle,"-pie-slice"),o.pieSliceImg="".concat(o.handle,"-pie-slice-img")})(Oa||(Oa={}));var Oz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Sz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},f0=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;Object(Ie.a)(this,r),e=a.call(this);var t=n,i=t.view,s=t.cell,u=t.node,l=t.edge,c=t.graph,f=Sz(t,["view","cell","node","edge","graph"]);i?(e.view=i,e.cell=i.cell,e.graph=i.graph,e.model=e.graph.model):(s||l||u)&&c&&(e.cell=u||l||s,e.view=c.renderer.findViewByCell(e.cell),e.graph=c,e.model=e.graph.model);var d=e.constructor;return n.clearAll!==!1&&d.removeInstances(e.graph),d.register(Object(Co.a)(e)),e.init(f),e}return Object(pe.a)(r,[{key:"init",value:function(e){}},{key:"render",value:function(){return this}},{key:"startListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.on("blank:mousedown",this.remove,this)}},{key:"stopListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.off("blank:mousedown",this.remove,this)}},{key:"remove",value:function(){this.stopListening();var e=this.constructor;return e.unregister(this),Object(Vr.a)(Object(Hr.a)(r.prototype),"remove",this).call(this)}},{key:"dispose",value:function(){this.remove()}}],[{key:"ensureCache",value:function(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}},{key:"register",value:function(e,t){t==null&&(t=e.graph);var i=this.ensureCache(),s=i[t.view.cid];s==null&&(s=i[t.view.cid]={}),s[e.cid]=e}},{key:"unregister",value:function(e,t){t==null&&(t=e.graph);var i=this.ensureCache();i[t.view.cid]&&delete i[t.view.cid][e.cid]}},{key:"removeInstances",value:function(e){var t=this.ensureCache(),i=t[e.view.cid];i&&Object.keys(i).forEach(function(s){var u=i[s];u&&u.remove()})}},{key:"getInstances",value:function(e){var t=this.ensureCache();return t[e.view.cid]||{}}}]),r}(oa);f0.instanceCache=new WeakMap,Oz([oa.dispose()],f0.prototype,"dispose",null);var dS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"node",get:function(){return this.cell}},{key:"metadata",get:function(){var e=this.cell.prop("knob");return Array.isArray(e)?this.options.index!=null?e[this.options.index]:null:e}},{key:"init",value:function(e){this.options=Object.assign({},e),this.render(),this.startListening()}},{key:"startListening",value:function(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),Object(Vr.a)(Object(Hr.a)(r.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),Object(Vr.a)(Object(Hr.a)(r.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){return this.container=document.createElement("div"),R.addClass(this.container,this.prefixClassName("widget-knob")),this.options.className&&R.addClass(this.container,this.options.className),this.view.addClass(_v.KNOB),this.graph.container.appendChild(this.container),this.update(),this}},{key:"remove",value:function(){return this.view.removeClass(_v.KNOB),Object(Vr.a)(Object(Hr.a)(r.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.metadata){var e=this.metadata,t=e.update,i=e.position,s={knob:this,cell:this.cell,node:this.node};if(i){var u=i.call(this.graph,Object.assign({},s));if(u){var l=this.graph.matrix(),c=this.node.getBBox(),f=ji.normalize(this.node.getAngle()),d=gt.create(u);f!==0&&d.rotate(-f,{x:c.width/2,y:c.height/2}),d.translate(c).scale(l.a,l.d).translate(l.e,l.f),this.container.style.left="".concat(d.x,"px"),this.container.style.top="".concat(d.y,"px")}}t&&t.call(this.graph,Object.assign({},s))}}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.container.style.display=""}},{key:"onTransform",value:function(){this.hide()}},{key:"onTransformed",value:function(){this.show()}},{key:"onKnobMouseDown",value:function(e){var t=e.knob;this.cid!==t.cid&&this.hide()}},{key:"onKnobMouseUp",value:function(){this.show()}},{key:"notify",value:function(e,t){if(this.view){var i=this.view.normalizeEvent(t),s=this.graph.snapToGrid(i.clientX,i.clientY);this.view.notify("cell:".concat(e),{e:i,view:this.view,node:this.node,cell:this.cell,x:s.x,y:s.y,knob:this}),this.cell.isNode()?this.view.notify("node:".concat(e),{e:i,view:this.view,node:this.node,cell:this.cell,x:s.x,y:s.y,knob:this}):this.cell.isEdge()&&this.view.notify("edge:".concat(e),{e:i,view:this.view,edge:this.cell,cell:this.cell,x:s.x,y:s.y,knob:this})}}},{key:"onMouseDown",value:function(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(_v.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),i=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,i&&(i.addClass(_v.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){var s=this.graph.matrix(),u=(e.clientX-t.originX)/s.a,l=(e.clientY-t.originY)/s.d,c=this.node.getAngle(),f=new gt(u,l).rotate(c);this.metadata.onMouseMove.call(this.graph,{e,data:t,deltaX:f.x,deltaY:f.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.getEventData(e),i=this.graph.findViewByCell(this.node);t.knobbing&&(i&&i.removeClass(_v.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}}]),r}(f0),_v;(function(o){o.KNOB="has-widget-knob",o.KNOBBING="node-knobbing",o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"}})(_v||(_v={}));var Mz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},d0;(function(o){o.root="widget-minimap",o.viewport="".concat(o.root,"-viewport"),o.zoom="".concat(o.viewport,"-zoom")})(d0||(d0={}));var hS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;Object(Ie.a)(this,r),e=a.call(this),e.options=Object.assign(Object.assign({},N1.defaultOptions),n),e.updateViewport=N.debounce(e.updateViewport.bind(Object(Co.a)(e)),0),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(d0.root));var t=document.createElement("div");e.container.appendChild(t),e.$viewport=e.$("<div>").addClass(e.prefixClassName(d0.viewport)),e.options.scalable&&(e.zoomHandle=e.$("<div>").addClass(e.prefixClassName(d0.zoom)).appendTo(e.$viewport).get(0)),e.$container.append(e.$viewport).css({width:e.options.width,height:e.options.height,padding:e.options.padding}),e.options.container&&e.options.container.appendChild(e.container),e.sourceGraph=e.graph;var i=Object.assign(Object.assign({},e.options.graphOptions),{container:t,model:e.sourceGraph.model,frozen:!0,async:e.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});return e.targetGraph=e.options.createGraph?e.options.createGraph(i):new Wi(i),e.targetGraph.renderer.unfreeze(),e.updatePaper(e.sourceGraph.options.width,e.sourceGraph.options.height),e.startListening(),e}return Object(pe.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"scroller",get:function(){return this.graph.scroller.widget}},{key:"graphContainer",get:function(){return this.scroller?this.scroller.container:this.graph.container}},{key:"$graphContainer",get:function(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}},{key:"startListening",value:function(){var e;this.scroller?this.$graphContainer.on("scroll".concat(this.getEventNamespace()),this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents((e={mousedown:"startAction",touchstart:"startAction"},Object(Qe.a)(e,"mousedown .".concat(this.prefixClassName("graph")),"scrollTo"),Object(Qe.a)(e,"touchstart .".concat(this.prefixClassName("graph")),"scrollTo"),e))}},{key:"stopListening",value:function(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}},{key:"onRemove",value:function(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}},{key:"onTransform",value:function(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}},{key:"onModelUpdated",value:function(){this.targetGraph.zoomToFit()}},{key:"updatePaper",value:function(e,t){var i,s;typeof e=="object"?(i=e.width,s=e.height):(i=e,s=t);var u=this.sourceGraph.options,l=this.sourceGraph.transform.getScale(),c=this.options.width-2*this.options.padding,f=this.options.height-2*this.options.padding;i/=l.sx,s/=l.sy,this.ratio=Math.min(c/i,f/s);var d=this.ratio,h=u.x*d/l.sx,p=u.y*d/l.sy;return i*=d,s*=d,this.targetGraph.resizeGraph(i,s),this.targetGraph.translate(h,p),this.scroller?this.targetGraph.scale(d,d):this.targetGraph.zoomToFit(),this.updateViewport(),this}},{key:"updateViewport",value:function(){var e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale(),i=null;this.scroller?i=this.scroller.clientToLocalPoint(0,0):i=this.graph.graphToLocal(0,0);var s=this.$(this.targetGraph.container).position(),u=this.targetGraph.translate();u.ty=u.ty||0,this.geometry={top:s.top+i.y*t.sy+u.ty,left:s.left+i.x*t.sx+u.tx,width:this.$graphContainer.innerWidth()*t.sx/e.sx,height:this.$graphContainer.innerHeight()*t.sy/e.sy},this.$viewport.css(this.geometry)}},{key:"startAction",value:function(e){var t=this.normalizeEvent(e),i=t.target===this.zoomHandle?"zooming":"panning",s=this.sourceGraph.translate(),u=s.tx,l=s.ty,c={action:i,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:u,translateY:l};this.targetGraphTransforming=!0,this.delegateDocumentEvents(N1.documentEvents,c)}},{key:"doAction",value:function(e){var t=this,i=this.normalizeEvent(e),s=i.clientX,u=i.clientY,l=i.data;switch(l.action){case"panning":{var c=this.sourceGraph.transform.getScale(),f=(s-l.clientX)*c.sx,d=(u-l.clientY)*c.sy;this.scroller?(this.graphContainer.scrollLeft=l.scrollLeft+f/this.ratio,this.graphContainer.scrollTop=l.scrollTop+d/this.ratio):this.sourceGraph.translate(l.translateX-f/this.ratio,l.translateY-d/this.ratio);break}case"zooming":{var h=l.scale,p=l.geometry,m=1+(l.clientX-s)/p.width/h.sx;l.frameId&&cancelAnimationFrame(l.frameId),l.frameId=requestAnimationFrame(function(){t.sourceGraph.zoom(m*l.zoom,{absolute:!0,minScale:t.options.minScale,maxScale:t.options.maxScale})});break}default:break}}},{key:"stopAction",value:function(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}},{key:"scrollTo",value:function(e){var t=this.normalizeEvent(e),i,s,u=this.targetGraph.translate();if(u.ty=u.ty||0,t.offsetX==null){var l=this.$(this.targetGraph.container).offset();i=t.pageX-l.left,s=t.pageY-l.top}else i=t.offsetX,s=t.offsetY;var c=(i-u.tx)/this.ratio,f=(s-u.ty)/this.ratio;this.sourceGraph.centerPoint(c,f)}},{key:"dispose",value:function(){this.remove()}}]),r}(oa);Mz([oa.dispose()],hS.prototype,"dispose",null);var N1;(function(o){o.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:function(r){return new Wi(r)}},o.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(N1||(N1={}));var Az=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Tz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},vS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;Object(Ie.a)(this,r),e=a.call(this);var t=n.graph,i=Tz(n,["graph"]);return e.graph=t,e.options=Object.assign({tolerance:10},i),e.offset={x:0,y:0},e.render(),e.parseFilter(),e.disabled||e.startListening(),e}return Object(pe.a)(r,[{key:"model",get:function(){return this.graph.model}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-snapline")}},{key:"verticalClassName",get:function(){return"".concat(this.containerClassName,"-vertical")}},{key:"horizontalClassName",get:function(){return"".concat(this.containerClassName,"-horizontal")}},{key:"disabled",get:function(){return this.options.enabled!==!0||this.graph.options.snapline.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}},{key:"setFilter",value:function(e){this.options.filter=e,this.parseFilter()}},{key:"render",value:function(){var e=this.containerWrapper=new mi("svg"),t=this.horizontal=new mi("line"),i=this.vertical=new mi("line");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),i.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),i.setAttribute("display","none"),e.append([t,i]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}},{key:"startListening",value:function(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}},{key:"stopListening",value:function(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}},{key:"parseFilter",value:function(){var e=this;this.filterShapes={},this.filterCells={},this.filterFunction=null;var t=this.options.filter;Array.isArray(t)?t.forEach(function(i){typeof i=="string"?e.filterShapes[i]=!0:e.filterCells[i.id]=!0}):typeof t=="function"&&(this.filterFunction=t)}},{key:"onBatchStop",value:function(e){var t=e.name,i=e.data;t==="resize"&&this.snapOnResizing(i.cell,i)}},{key:"captureCursorOffset",value:function(e){var t=e.view,i=e.x,s=e.y,u=t.getDelegatedView();if(u&&this.isNodeMovable(u)){var l=t.cell.getPosition();this.offset={x:i-l.x,y:s-l.y}}}},{key:"isNodeMovable",value:function(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}},{key:"snapOnResizing",value:function(e,t){var i=this;if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){var s=this.graph.renderer.findViewByCell(e);if(s&&s.cell.isNode()){var u=e.getBBox(),l=u.bbox(e.getAngle()),c=l.getTopLeft(),f=l.getBottomRight(),d=ji.normalize(e.getAngle()),h=this.options.tolerance||0,p,m,b,E,x,O,D={vertical:0,horizontal:0},I=t.direction,F=t.trueDirection,H=t.relativeDirection;F.indexOf("right")!==-1?D.vertical=f.x:D.vertical=c.x,F.indexOf("bottom")!==-1?D.horizontal=f.y:D.horizontal=c.y,this.model.getNodes().some(function(bn){if(i.isIgnored(e,bn))return!1;var dn=bn.getBBox().bbox(bn.getAngle()),en=dn.getTopLeft(),Vn=dn.getBottomRight(),jt={vertical:[en.x,Vn.x],horizontal:[en.y,Vn.y]},Cn={};return Object.keys(jt).forEach(function(jn){var Lr=jn,Pr=jt[Lr].map(function(Wr){return{position:Wr,distance:Math.abs(Wr-D[Lr])}}).filter(function(Wr){return Wr.distance<=h});Cn[Lr]=B.sortBy(Pr,function(Wr){return Wr.distance})}),p==null&&Cn.vertical.length>0&&(p=Cn.vertical[0].position,m=Math.min(l.y,dn.y),b=Math.max(f.y,Vn.y)-m),E==null&&Cn.horizontal.length>0&&(E=Cn.horizontal[0].position,x=Math.min(l.x,dn.x),O=Math.max(f.x,Vn.x)-x),p!=null&&E!=null}),this.hide();var $=0,se=0;(E!=null||p!=null)&&(p!=null&&($=F.indexOf("right")!==-1?p-f.x:c.x-p),E!=null&&(se=F.indexOf("bottom")!==-1?E-f.y:c.y-E));var de=0,Ee=0;if(d%90==0)d===90||d===270?(de=se,Ee=$):(de=$,Ee=se);else{var Oe=d>=0&&d<90?1:d>=90&&d<180?4:d>=180&&d<270?3:2;E!=null&&p!=null&&($<se?(se=0,E=void 0):($=0,p=void 0));var $e=ji.toRad(d%90);$&&(de=Oe===3?$/Math.cos($e):$/Math.sin($e)),se&&(Ee=Oe===3?se/Math.cos($e):se/Math.sin($e));var tt=Oe===1||Oe===3;switch(H){case"top":case"bottom":Ee=se?se/(tt?Math.cos($e):Math.sin($e)):$/(tt?Math.sin($e):Math.cos($e));break;case"left":case"right":de=$?$/(tt?Math.cos($e):Math.sin($e)):se/(tt?Math.sin($e):Math.cos($e));break;default:break}}switch(H){case"top":case"bottom":de=0;break;case"left":case"right":Ee=0;break;default:break}var Le=this.graph.getGridSize(),it=Math.max(u.width+de,Le),It=Math.max(u.height+Ee,Le);t.minWidth&&t.minWidth>Le&&(it=Math.max(it,t.minWidth)),t.minHeight&&t.minHeight>Le&&(It=Math.max(It,t.minHeight)),t.maxWidth&&(it=Math.min(it,t.maxWidth)),t.maxHeight&&(It=Math.min(It,t.maxHeight)),t.preserveAspectRatio&&(Ee<de?It=it*(u.height/u.width):it=It*(u.width/u.height)),(it!==u.width||It!==u.height)&&(e.resize(it,It,{direction:I,relativeDirection:H,trueDirection:F,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(s)}),b&&(b+=It-u.height),O&&(O+=it-u.width));var tn=e.getBBox().bbox(d);p&&Math.abs(tn.x-p)>1&&Math.abs(tn.width+tn.x-p)>1&&(p=void 0),E&&Math.abs(tn.y-E)>1&&Math.abs(tn.height+tn.y-E)>1&&(E=void 0),this.update({verticalLeft:p,verticalTop:m,verticalHeight:b,horizontalTop:E,horizontalLeft:x,horizontalWidth:O})}}}},{key:"snapOnMoving",value:function(e){var t=this,i=e.view,s=e.e,u=e.x,l=e.y,c=i.getEventData(s).delegatedView||i;if(!!this.isNodeMovable(c)){var f=c.cell,d=f.getSize(),h=f.getPosition(),p=new fr(u-this.offset.x,l-this.offset.y,d.width,d.height),m=f.getAngle(),b=p.getCenter(),E=p.bbox(m),x=E.getTopLeft(),O=E.getBottomRight(),D=this.options.tolerance||0,I,F,H,$,se,de,Ee=0,Oe=0;if(this.model.getNodes().some(function(tn){if(t.isIgnored(f,tn))return!1;var bn=tn.getBBox().bbox(tn.getAngle()),dn=bn.getCenter(),en=bn.getTopLeft(),Vn=bn.getBottomRight();return I==null&&(Math.abs(dn.x-b.x)<D?(I=dn.x,Ee=.5):Math.abs(en.x-x.x)<D?(I=en.x,Ee=0):Math.abs(en.x-O.x)<D?(I=en.x,Ee=1):Math.abs(Vn.x-O.x)<D?(I=Vn.x,Ee=1):Math.abs(Vn.x-x.x)<D&&(I=Vn.x),I!=null&&(F=Math.min(E.y,bn.y),H=Math.max(O.y,Vn.y)-F)),$==null&&(Math.abs(dn.y-b.y)<D?($=dn.y,Oe=.5):Math.abs(en.y-x.y)<D?$=en.y:Math.abs(en.y-O.y)<D?($=en.y,Oe=1):Math.abs(Vn.y-O.y)<D?($=Vn.y,Oe=1):Math.abs(Vn.y-x.y)<D&&($=Vn.y),$!=null&&(se=Math.min(E.x,bn.x),de=Math.max(O.x,Vn.x)-se)),I!=null&&$!=null}),this.hide(),$!=null||I!=null){$!=null&&(E.y=$-Oe*E.height),I!=null&&(E.x=I-Ee*E.width);var $e=E.getCenter(),tt=$e.x-p.width/2,Le=$e.y-p.height/2,it=tt-h.x,It=Le-h.y;(it!==0||It!==0)&&(f.translate(it,It,{snapped:!0,restrict:this.graph.hook.getRestrictArea(c)}),de&&(de+=it),H&&(H+=It)),this.update({verticalLeft:I,verticalTop:F,verticalHeight:H,horizontalTop:$,horizontalLeft:se,horizontalWidth:de})}}}},{key:"isIgnored",value:function(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&N.call(this.filterFunction,this.graph,t)}},{key:"update",value:function(e){if(e.horizontalTop){var t=this.graph.localToGraph(new gt(e.horizontalLeft,e.horizontalTop)),i=this.graph.localToGraph(new gt(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?"".concat(t.x):"0",y1:"".concat(t.y),x2:this.options.sharp?"".concat(i.x):"100%",y2:"".concat(i.y),display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){var s=this.graph.localToGraph(new gt(e.verticalLeft,e.verticalTop)),u=this.graph.localToGraph(new gt(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({x1:"".concat(s.x),y1:this.options.sharp?"".concat(s.y):"0",x2:"".concat(u.x),y2:this.options.sharp?"".concat(u.y):"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}},{key:"resetTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"show",value:function(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}},{key:"hide",value:function(){var e=this;this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");var t=this.options.clean,i=typeof t=="number"?t:t!==!1?3e3:0;return i>0&&(this.timer=window.setTimeout(function(){e.container.parentNode!==null&&e.unmount()},i)),this}},{key:"onRemove",value:function(){this.stopListening(),this.hide()}},{key:"dispose",value:function(){this.remove()}}]),r}(oa);Az([oa.dispose()],vS.prototype,"dispose",null);var Pz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Fv=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"init",value:function(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}},{key:"startListening",value:function(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"stopListening",value:function(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"resetUpdates",value:function(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}},{key:"onSortModel",value:function(){this.model.hasActiveBatch(r.SORT_DELAYING_BATCHES)||this.sortViews()}},{key:"onModelReseted",value:function(e){var t=e.options;this.removeZPivots(),this.resetViews(this.model.getCells(),t)}},{key:"onBatchStop",value:function(e){var t=e.name,i=e.data;if(!this.isFrozen()){var s=this.model;if(!this.isAsync()){var u=r.UPDATE_DELAYING_BATCHES;u.includes(t)&&!s.hasActiveBatch(u)&&this.updateViews(i)}var l=r.SORT_DELAYING_BATCHES;l.includes(t)&&!s.hasActiveBatch(l)&&this.sortViews()}}},{key:"onCellAdded",value:function(e){var t=e.cell,i=e.options,s=i.position;this.isAsync()||typeof s!="number"?this.renderView(t,i):(i.maxPosition===s&&this.freeze({key:"addCells"}),this.renderView(t,i),s===0&&this.unfreeze({key:"addCells"}))}},{key:"onCellRemoved",value:function(e){var t=e.cell,i=e.options,s=this.findViewByCell(t);s&&this.requestViewUpdate(s,r.FLAG_REMOVE,s.priority,i)}},{key:"onCellZIndexChanged",value:function(e){var t=e.cell,i=e.options;if(this.options.sorting==="approx"){var s=this.findViewByCell(t);s&&this.requestViewUpdate(s,r.FLAG_INSERT,s.priority,i)}}},{key:"onCellVisibleChanged",value:function(e){var t=e.cell,i=e.current,s=e.options;i||this.processEdgeOnTerminalVisibleChanged(t,!1);var u=this.findViewByCell(t);!i&&u?this.removeView(t):i&&u==null&&this.renderView(t,s),i&&this.processEdgeOnTerminalVisibleChanged(t,!0)}},{key:"processEdgeOnTerminalVisibleChanged",value:function(e,t){var i=function(u,l){var c=u.getSourceCellId();if(c!==l.id)return u.getSourceCell();var f=u.getTargetCellId();return f!==l.id?u.getTargetCell():null};this.model.getConnectedEdges(e).forEach(function(s){var u=i(s,e);(u==null||u.isVisible())&&(t?s.show():s.hide())})}},{key:"isEdgeTerminalVisible",value:function(e,t){var i=t==="source"?e.getSourceCellId():e.getTargetCellId(),s=i?this.model.getCell(i):null;return!(s&&!s.isVisible())}},{key:"requestConnectedEdgesUpdate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Eo.isCellView(e))for(var i=e.cell,s=this.model.getConnectedEdges(i),u=0,l=s.length;u<l;u+=1){var c=s[u],f=this.findViewByCell(c);if(!!f){var d=["update"];c.getTargetCell()===i&&d.push("target"),c.getSourceCell()===i&&d.push("source"),this.scheduleViewUpdate(f,f.getFlag(d),f.priority,t)}}}},{key:"forcePostponedViewUpdate",value:function(e,t){if(!e||!Eo.isCellView(e))return!1;var i=e.cell;if(i.isNode())return!1;var s=e;if(i.isEdge()&&(t&e.getFlag(["source","target"]))==0){var u=0,l=this.findViewByCell(i.getSourceCell());l&&!this.isViewMounted(l)&&(u=this.dumpView(l),s.updateTerminalMagnet("source"));var c=0,f=this.findViewByCell(i.getTargetCell());if(f&&!this.isViewMounted(f)&&(c=this.dumpView(f),s.updateTerminalMagnet("target")),u===0&&c===0)return!this.dumpView(s)}return!1}},{key:"scheduleViewUpdate",value:function(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=e.cid,l=this.updates,c=l.priorities[i];c||(c=l.priorities[i]={});var f=c[u]||0;(f&t)!==t&&(f||(l.count+=1),t&r.FLAG_REMOVE&&f&r.FLAG_INSERT?c[u]^=r.FLAG_INSERT:t&r.FLAG_INSERT&&f&r.FLAG_REMOVE&&(c[u]^=r.FLAG_REMOVE),c[u]|=t,this.graph.hook.onViewUpdated(e,t,s))}},{key:"requestViewUpdate",value:function(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.scheduleViewUpdate(e,t,i,s);var u=this.isAsync();if(!(this.isFrozen()||u&&s.async!==!1||this.model.hasActiveBatch(r.UPDATE_DELAYING_BATCHES))){var l=this.updateViews(s);u&&this.graph.trigger("render:done",{stats:l,options:s})}}},{key:"dumpView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return 0;var i=e.cid,s=this.updates,u=s.priorities[e.priority],l=this.registerMountedView(e)|u[i];return delete u[i],l?this.updateView(e,l,t):0}},{key:"dumpViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.checkView(e),this.updateViews(e)}},{key:"requireView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.findViewByCell(e);return i==null?null:(this.dumpView(i,t),i)}},{key:"updateView",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e==null)return 0;if(Eo.isCellView(e)){if(t&r.FLAG_REMOVE)return this.removeView(e.cell),0;t&r.FLAG_INSERT&&(this.insertView(e),t^=r.FLAG_INSERT)}return t?e.confirmUpdate(t,i):0}},{key:"updateViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t,i=0,s=0,u=r.MIN_PRIORITY;do t=this.updateViewsBatch(e),i+=1,s+=t.updatedCount,u=Math.min(t.priority,u);while(!t.empty);return{priority:u,batchCount:i,updatedCount:s}}},{key:"updateViewsBatch",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.updates,i=t.priorities,s=e.batchSize||r.UPDATE_BATCH_SIZE,u=!0,l=r.MIN_PRIORITY,c=0,f=0,d=0,h=0,p=e.checkView||this.options.checkView;typeof p!="function"&&(p=null);e:for(var m=0,b=i.length;m<b;m+=1){var E=i[m];for(var x in E){if(d>=s){u=!1;break e}var O=oa.views[x];if(!O){delete E[x];continue}var D=E[x];if((D&r.FLAG_REMOVE)==0){var I=x in t.unmounted;if(p&&!N.call(p,this.graph,{view:O,unmounted:I})){I||(this.registerUnmountedView(O),O.unmount()),t.unmounted[x]|=D,delete E[x],f+=1;continue}I&&(D|=r.FLAG_INSERT,c+=1),D|=this.registerMountedView(O)}var F=O,H=this.updateView(O,D,e);if(H>0){var $=F.cell;$&&$.isEdge()&&(F.hasAction(H,"source")&&!this.isEdgeTerminalVisible($,"source")&&(H=F.removeAction(H,"source"),H|=r.FLAG_REMOVE),F.hasAction(H,"target")&&!this.isEdgeTerminalVisible($,"target")&&(H=F.removeAction(H,"target"),H|=r.FLAG_REMOVE))}if(H>0&&(E[x]=H,!this.graph.hook.onViewPostponed(F,H,e)||E[x])){h+=1,u=!1;continue}l>m&&(l=m),d+=1,delete E[x]}}return{empty:u,priority:l,mountedCount:c,unmountedCount:f,updatedCount:d,postponedCount:h}}},{key:"updateViewsAsync",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{processed:0,priority:r.MIN_PRIORITY},s=this.updates,u=s.animationId;if(u){if(R.cancelAnimationFrame(u),i.processed===0){var l=t.before;typeof l=="function"&&N.call(l,this.graph,this.graph)}var c=this.updateViewsBatch(t),f=this.checkViewImpl({checkView:t.checkView,mountedBatchSize:r.MOUNT_BATCH_SIZE-c.mountedCount,unmountedBatchSize:r.MOUNT_BATCH_SIZE-c.unmountedCount}),d=i.processed,h=s.count,p=f.mountedCount,m=f.unmountedCount;c.updatedCount>0&&(d+=c.updatedCount+c.unmountedCount,i.priority=Math.min(c.priority,i.priority),c.empty&&p===0?(c.priority=i.priority,c.mountedCount+=p,c.unmountedCount+=m,this.graph.trigger("render:done",{stats:c,options:t}),i.processed=0,s.count=0):i.processed=d);var b=t.progress;if(h&&typeof b=="function"&&N.call(b,this.graph,{total:h,done:c.empty,current:d}),s.animationId!==u)return}s.animationId=R.requestAnimationFrame(function(){e.updateViewsAsync(t,i)})}},{key:"registerMountedView",value:function(e){var t=e.cid,i=this.updates;if(t in i.mounted)return 0;i.mounted[t]=!0,i.mountedCids.push(t);var s=i.unmounted[t]||0;return delete i.unmounted[t],s}},{key:"registerUnmountedView",value:function(e){var t=e.cid,i=this.updates;if(t in i.unmounted)return 0;i.unmounted[t]|=r.FLAG_INSERT;var s=i.unmounted[t];return i.unmountedCids.push(t),delete i.mounted[t],s}},{key:"isViewMounted",value:function(e){if(e==null)return!1;var t=e.cid;return t in this.updates.mounted}},{key:"getMountedViews",value:function(){return Object.keys(this.updates.mounted).map(function(e){return Eo.views[e]})}},{key:"getUnmountedViews",value:function(){return Object.keys(this.updates.unmounted).map(function(e){return Eo.views[e]})}},{key:"checkMountedViews",value:function(e,t){var i=0;if(typeof e!="function")return i;for(var s=this.updates,u=s.mounted,l=s.mountedCids,c=t==null?l.length:Math.min(l.length,t),f=0;f<c;f+=1){var d=l[f];if(d in u){var h=Eo.views[d];if(h!=null){var p=N.call(e,this.graph,{view:h,unmounted:!0});if(p){l.push(d);continue}i+=1;var m=this.registerUnmountedView(h);m&&h.unmount()}}}return l.splice(0,c),i}},{key:"checkUnmountedViews",value:function(e,t){var i=0;typeof e!="function"&&(e=null);for(var s=this.updates,u=s.unmounted,l=s.unmountedCids,c=t==null?l.length:Math.min(l.length,t),f=0;f<c;f+=1){var d=l[f];if(d in u){var h=Eo.views[d];if(h!=null){if(e&&!N.call(e,this.graph,{view:h,unmounted:!1})){l.push(d);continue}i+=1;var p=this.registerMountedView(h);p&&this.scheduleViewUpdate(h,p,h.priority,{mounting:!0})}}}return l.splice(0,c),i}},{key:"checkViewImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER},t=e.checkView||this.options.checkView,i=this.checkMountedViews(t,e.unmountedBatchSize),s=this.checkUnmountedViews(t,i>0?Math.min(this.updates.unmountedCids.length-i,e.mountedBatchSize):e.mountedBatchSize);return{mountedCount:s,unmountedCount:i}}},{key:"checkView",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.checkViewImpl(e)}},{key:"isFrozen",value:function(){return!!this.options.frozen}},{key:"freeze",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.key,i=this.updates,s=this.options.frozen,u=i.freezeKey;if(t&&t!==u){if(s&&u)return;i.frozen=s,i.freezeKey=t}this.options.frozen=!0;var l=i.animationId;i.animationId=null,this.isAsync()&&l!=null&&R.cancelAnimationFrame(l),this.graph.trigger("freeze",{key:t})}},{key:"unfreeze",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.key,s=this.updates,u=s.freezeKey;if(!(i&&u&&i!==u)&&(s.freezeKey=null,!(i&&i===u&&s.frozen))){var l=function(){e.options.frozen=s.frozen=!1,s.sort&&(e.sortViews(),s.sort=!1);var d=t.after;d&&N.call(d,e.graph,e.graph),e.graph.trigger("unfreeze",{key:i})};if(this.isAsync()){this.freeze();var c=t.progress;this.updateViewsAsync(Object.assign(Object.assign({},t),{progress:function(d){var h=d.done,p=d.current,m=d.total;c&&N.call(c,e.graph,{done:h,current:p,total:m}),h&&l()}}))}else this.updateViews(t),l()}}},{key:"isAsync",value:function(){return!!this.options.async}},{key:"setAsync",value:function(e){this.options.async=e}},{key:"onRemove",value:function(){this.freeze(),this.removeViews()}},{key:"resetViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var i=0,s=e.length;i<s;i+=1)this.renderView(e[i],t);this.unfreeze({key:"reset"}),this.sortViews()}},{key:"removeView",value:function(e){var t=this.views[e.id];if(t){var i=t.cid,s=this.updates,u=s.mounted,l=s.unmounted;t.remove(),delete this.views[e.id],delete u[i],delete l[i]}return t}},{key:"removeViews",value:function(){var e=this;this.views&&Object.keys(this.views).forEach(function(t){var i=e.views[t];i&&e.removeView(i.cell)}),this.views={}}},{key:"renderView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.id,s=this.views,u=0,l=s[i];if(!!e.isVisible()&&!(e.isEdge()&&(!this.isEdgeTerminalVisible(e,"source")||!this.isEdgeTerminalVisible(e,"target")))){if(l)u=r.FLAG_INSERT;else{var c=this.graph.hook.createCellView(e);c&&(l=s[e.id]=c,l.graph=this.graph,u=this.registerUnmountedView(l)|l.getBootstrapFlag())}l&&this.requestViewUpdate(l,u,l.priority,t)}}},{key:"isExactSorting",value:function(){return this.options.sorting==="exact"}},{key:"sortViews",value:function(){if(!!this.isExactSorting()){if(this.isFrozen()){this.updates.sort=!0;return}this.sortViewsExact()}}},{key:"sortElements",value:function(e,t){var i=e.map(function(s){var u=s.parentNode,l=u.insertBefore(document.createTextNode(""),s.nextSibling);return function(c){if(u===c)throw new Error("You can't sort elements if any one is a descendant of another.");u.insertBefore(c,l),u.removeChild(l)}});e.sort(t).forEach(function(s,u){return i[u](s)})}},{key:"sortViewsExact",value:function(){var e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,function(i,s){var u=t.getCell(i.getAttribute("data-cell-id")||""),l=t.getCell(s.getAttribute("data-cell-id")||""),c=u.getZIndex()||0,f=l.getZIndex()||0;return c===f?0:c<f?-1:1})}},{key:"addZPivot",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zPivots==null&&(this.zPivots={});var t=this.zPivots,i=t[e];if(i)return i;i=t[e]=document.createComment("z-index:".concat(e+1));var s=-Infinity;for(var u in t){var l=+u;!(l<e&&l>s&&(s=l,s===e-1))}var c=this.view.stage;if(s!==-Infinity){var f=t[s];c.insertBefore(i,f.nextSibling)}else c.insertBefore(i,c.firstChild);return i}},{key:"removeZPivots",value:function(){var e=this;this.zPivots&&Object.keys(this.zPivots).forEach(function(t){var i=e.zPivots[t];i&&i.parentNode&&i.parentNode.removeChild(i)}),this.zPivots={}}},{key:"insertView",value:function(e){var t=this.view.stage;switch(this.options.sorting){case"approx":{var i=e.cell.getZIndex(),s=this.addZPivot(i);t.insertBefore(e.container,s);break}case"exact":default:t.appendChild(e.container);break}}},{key:"findViewByCell",value:function(e){if(e==null)return null;var t=Zi.isCell(e)?e.id:e;return this.views[t]}},{key:"findViewByElem",value:function(e){if(e==null)return null;var t=typeof e=="string"?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){var i=this.view.findAttr("data-cell-id",t);if(i)return this.views[i]}return null}},{key:"findViewsFromPoint",value:function(e){var t=this,i={x:e.x,y:e.y};return this.model.getCells().map(function(s){return t.findViewByCell(s)}).filter(function(s){return s!=null?R.getBBox(s.container,{target:t.view.stage}).containsPoint(i):!1})}},{key:"findEdgeViewsInArea",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=fr.create(e);return this.model.getEdges().map(function(u){return t.findViewByCell(u)}).filter(function(u){if(u){var l=R.getBBox(u.container,{target:t.view.stage});return l.width===0?l.inflate(1,0):l.height===0&&l.inflate(0,1),i.strict?s.containsRect(l):s.isIntersectWithRect(l)}return!1})}},{key:"findViewsInArea",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=fr.create(e);return this.model.getNodes().map(function(u){return t.findViewByCell(u)}).filter(function(u){if(u){var l=R.getBBox(u.container,{target:t.view.stage});return i.strict?s.containsRect(l):s.isIntersectWithRect(l)}return!1})}},{key:"dispose",value:function(){this.resetUpdates(),this.stopListening()}}]),r}(xa);Pz([xa.dispose()],Fv.prototype,"dispose",null),function(o){o.FLAG_INSERT=1<<30,o.FLAG_REMOVE=1<<29,o.MOUNT_BATCH_SIZE=1e3,o.UPDATE_BATCH_SIZE=1e3,o.MIN_PRIORITY=2,o.SORT_DELAYING_BATCHES=["add","to-front","to-back"],o.UPDATE_DELAYING_BATCHES=["translate"]}(Fv||(Fv={}));var kz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},L1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"elem",get:function(){return this.view.background}},{key:"init",value:function(){this.startListening(),this.options.background&&this.draw(this.options.background)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"updateBackgroundImage",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.size||"auto auto",i=e.position||"center",s=this.graph.transform.getScale(),u=this.graph.translate();if(typeof i=="object"){var l=u.tx+s.sx*(i.x||0),c=u.ty+s.sy*(i.y||0);i="".concat(l,"px ").concat(c,"px")}typeof t=="object"&&(t=fr.fromSize(t).scale(s.sx,s.sy),t="".concat(t.width,"px ").concat(t.height,"px")),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=i}},{key:"drawBackgroundImage",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(e instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}var i=this.optionsCache;if(!(i&&i.image!==t.image)){var s,u=t.opacity,l=t.size,c=t.repeat||"no-repeat",f=Jg.registry.get(c);if(typeof f=="function"){var d=t.quality||1;e.width*=d,e.height*=d;var h=f(e,t);if(!(h instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");s=h.toDataURL("image/png"),t.repeat&&c!==t.repeat?c=t.repeat:c="repeat",typeof l=="object"?(l.width*=h.width/e.width,l.height*=h.height/e.height):l===void 0&&(t.size={width:h.width/d,height:h.height/d})}else s=e.src,l===void 0&&(t.size={width:e.width,height:e.height});i!=null&&typeof t.size=="object"&&t.image===i.image&&t.repeat===i.repeat&&t.quality===i.quality&&(i.size=C.clone(t.size));var p=this.elem.style;p.backgroundImage="url(".concat(s,")"),p.backgroundRepeat=c,p.opacity=u==null||u>=1?"":"".concat(u),this.updateBackgroundImage(t)}}},{key:"updateBackgroundColor",value:function(e){this.elem.style.backgroundColor=e||""}},{key:"updateBackgroundOptions",value:function(e){this.graph.options.background=e}},{key:"update",value:function(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}},{key:"draw",value:function(e){var t=this,i=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(i.color),i.image){this.optionsCache=C.clone(i);var s=document.createElement("img");s.onload=function(){return t.drawBackgroundImage(s,e)},s.setAttribute("crossorigin","anonymous"),s.src=i.image}else this.drawBackgroundImage(null),this.optionsCache=null}},{key:"clear",value:function(){this.draw()}},{key:"dispose",value:function(){this.clear(),this.stopListening()}}]),r}(xa);kz([xa.dispose()],L1.prototype,"dispose",null);var Dz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Iz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},h0=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;Object(Ie.a)(this,r),e=a.call(this),e.padding={left:0,top:0,right:0,bottom:0},e.options=Yl.getOptions(n);var t=e.graph.transform.getScale();e.sx=t.sx,e.sy=t.sy;var i=e.options.width||e.graph.options.width,s=e.options.height||e.graph.options.height;e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Yl.containerClass)).css({width:i,height:s}),e.options.pageVisible&&e.$container.addClass(e.prefixClassName(Yl.pagedClass)),e.options.className&&e.$container.addClass(e.options.className);var u=e.graph.container;u.parentNode&&e.$container.insertBefore(u);var l=u.getAttribute("style");if(l){var c={},f=l.split(";");f.forEach(function(d){var h=d.trim();if(h){var p=h.split(":");p.length&&(c[p[0].trim()]=p[1]?p[1].trim():"")}}),Object.keys(c).forEach(function(d){d==="width"||d==="height"||(u.style[d]="",e.container.style[d]=c[d])})}return e.content=document.createElement("div"),e.$content=e.$(e.content).addClass(e.prefixClassName(Yl.contentClass)).css({width:e.graph.options.width,height:e.graph.options.height}),e.background=document.createElement("div"),e.$background=e.$(e.background).addClass(e.prefixClassName(Yl.backgroundClass)),e.$content.append(e.background),e.options.pageVisible||e.$content.append(e.graph.view.grid),e.$content.append(u),e.$content.appendTo(e.container),e.startListening(),e.options.pageVisible||e.graph.grid.update(),e.backgroundManager=new r.Background(Object(Co.a)(e)),e.options.autoResize||e.update(),e}return Object(pe.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"model",get:function(){return this.graph.model}},{key:"startListening",value:function(){var e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}},{key:"stopListening",value:function(){var e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}},{key:"enableAutoResize",value:function(){this.options.autoResize=!0}},{key:"disableAutoResize",value:function(){this.options.autoResize=!1}},{key:"onUpdate",value:function(){this.graph.isAsync()||!this.options.autoResize||this.update()}},{key:"onBatchStop",value:function(e){this.graph.isAsync()||!this.options.autoResize||Fv.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}},{key:"delegateBackgroundEvents",value:function(e){var t=this,i=e||Ch.events;this.delegatedHandlers=Object.keys(i).reduce(function(s,u){var l=i[u];if(u.indexOf(" ")===-1)if(typeof l=="function")s[u]=l;else{var c=t.graph.view[l];typeof c=="function"&&(c=c.bind(t.graph.view),s[u]=c)}return s},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(function(s){t.delegateEvent(s,{guarded:!1},t.onBackgroundEvent)})}},{key:"undelegateBackgroundEvents",value:function(){var e=this;Object.keys(this.delegatedHandlers).forEach(function(t){e.undelegateEvent(t,e.onBackgroundEvent)})}},{key:"onBackgroundEvent",value:function(e){var t=!1,i=e.target;if(this.options.pageVisible)this.options.background?t=this.background===i:t=this.content===i;else{var s=this.graph.view;t=s.background===i||s.grid===i}if(t){var u=this.delegatedHandlers[e.type];typeof u=="function"&&u.apply(this.graph,arguments)}}},{key:"onRenderDone",value:function(e){var t=e.stats;this.options.autoResize&&t.priority<2&&this.update()}},{key:"onResize",value:function(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}},{key:"onScale",value:function(e){var t=e.sx,i=e.sy,s=e.ox,u=e.oy;this.updateScale(t,i),(s||u)&&(this.centerPoint(s,u),this.updatePageBreak());var l=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof l=="function"&&this.update()}},{key:"storeScrollPosition",value:function(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}},{key:"restoreScrollPosition",value:function(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}},{key:"storeClientSize",value:function(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"restoreClientSize",value:function(){this.cachedClientSize=null}},{key:"beforeManipulation",value:function(){(Yr.IS_IE||Yr.IS_EDGE)&&this.$container.css("visibility","hidden")}},{key:"afterManipulation",value:function(){(Yr.IS_IE||Yr.IS_EDGE)&&this.$container.css("visibility","visible")}},{key:"updatePageSize",value:function(e,t){e!=null&&(this.options.pageWidth=e),t!=null&&(this.options.pageHeight=t),this.updatePageBreak()}},{key:"updatePageBreak",value:function(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){var e=this.graph.options.width,t=this.graph.options.height,i=this.options.pageWidth*this.sx,s=this.options.pageHeight*this.sy;if(i===0||s===0)return;if(e>i||t>s){for(var u=!1,l=document.createElement("div"),c=1,f=Math.floor(e/i);c<f;c+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:c*i}).appendTo(l),u=!0;for(var d=1,h=Math.floor(t/s);d<h;d+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:d*s}).appendTo(l),u=!0;u&&(R.addClass(l,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(l),this.pageBreak=l)}}}},{key:"update",value:function(){var e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);var t=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof t=="function"&&(t=N.call(t,this,this));var i=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative",contentArea:this.calcContextArea(t)},t);this.graph.fitToContent(this.getFitToContentOptions(i))}},{key:"calcContextArea",value:function(e){var t=e==null?void 0:e.direction;if(!t)return this.graph.transform.getContentArea(e);function i(c){var f=c.getBBox();if(f&&c.isNode()){var d=c.getAngle();d!=null&&d!==0&&(f=f.bbox(d))}return f}var s=this.options.pageWidth||1,u=this.options.pageHeight||1,l=this.graph.getCells();return t.includes("top")||(l=l.filter(function(c){var f=i(c);return f.y>=0})),t.includes("left")||(l=l.filter(function(c){var f=i(c);return f.x>=0})),t.includes("right")||(l=l.filter(function(c){var f=i(c);return f.x+f.width<=s})),t.includes("bottom")||(l=l.filter(function(c){var f=i(c);return f.y+f.height<=u})),this.model.getCellsBBox(l)||new fr}},{key:"getFitToContentOptions",value:function(e){var t=this.sx,i=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=i),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=i),typeof e.padding=="object"?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*i,bottom:(e.padding.bottom||0)*i}:typeof e.padding=="number"&&(e.padding*=t),this.options.autoResize||(e.contentArea=fr.create()),e}},{key:"updateScale",value:function(e,t){var i=this.graph.options,s=e/this.sx,u=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(i.x*s,i.y*u),this.graph.resizeGraph(i.width*s,i.height*u)}},{key:"scrollbarPosition",value:function(e,t,i){if(e==null&&t==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};var s={};return typeof e=="number"&&(s.scrollLeft=e),typeof t=="number"&&(s.scrollTop=t),i&&i.animation?this.$container.animate(s,i.animation):this.$container.prop(s),this}},{key:"scrollToPoint",value:function(e,t,i){var s=this.getClientSize(),u=this.graph.matrix(),l={};return typeof e=="number"&&(l.scrollLeft=e-s.width/2+u.e+(this.padding.left||0)),typeof t=="number"&&(l.scrollTop=t-s.height/2+u.f+(this.padding.top||0)),i&&i.animation?this.$container.animate(l,i.animation):this.$container.prop(l),this}},{key:"scrollToContent",value:function(e){var t=this.sx,i=this.sy,s=this.graph.getContentArea().getCenter();return this.scrollToPoint(s.x*t,s.y*i,e)}},{key:"scrollToCell",value:function(e,t){var i=this.sx,s=this.sy,u=e.getBBox().getCenter();return this.scrollToPoint(u.x*i,u.y*s,t)}},{key:"center",value:function(e){return this.centerPoint(e)}},{key:"centerPoint",value:function(e,t,i){var s=this.graph.matrix(),u=s.a,l=s.d,c=-s.e,f=-s.f,d=c+this.graph.options.width,h=f+this.graph.options.height,p;if(this.storeClientSize(),typeof e=="number"||typeof t=="number"){p=i;var m=this.getVisibleArea().getCenter();typeof e=="number"?e*=u:e=m.x,typeof t=="number"?t*=l:t=m.y}else p=e,e=(c+d)/2,t=(f+h)/2;if(p&&p.padding)return this.positionPoint({x:e,y:t},"50%","50%",p);var b=this.getPadding(),E=this.getClientSize(),x=E.width/2,O=E.height/2,D=x-b.left-e+c,I=x-b.right+e-d,F=O-b.top-t+f,H=O-b.bottom+t-h;this.addPadding(Math.max(D,0),Math.max(I,0),Math.max(F,0),Math.max(H,0));var $=this.scrollToPoint(e,t,p||void 0);return this.restoreClientSize(),$}},{key:"centerContent",value:function(e){return this.positionContent("center",e)}},{key:"centerCell",value:function(e,t){return this.positionCell(e,"center",t)}},{key:"positionContent",value:function(e,t){var i=this.graph.getContentArea(t);return this.positionRect(i,e,t)}},{key:"positionCell",value:function(e,t,i){var s=e.getBBox();return this.positionRect(s,t,i)}},{key:"positionRect",value:function(e,t,i){var s=fr.create(e);switch(t){case"center":return this.positionPoint(s.getCenter(),"50%","50%",i);case"top":return this.positionPoint(s.getTopCenter(),"50%",0,i);case"top-right":return this.positionPoint(s.getTopRight(),"100%",0,i);case"right":return this.positionPoint(s.getRightMiddle(),"100%","50%",i);case"bottom-right":return this.positionPoint(s.getBottomRight(),"100%","100%",i);case"bottom":return this.positionPoint(s.getBottomCenter(),"50%","100%",i);case"bottom-left":return this.positionPoint(s.getBottomLeft(),0,"100%",i);case"left":return this.positionPoint(s.getLeftMiddle(),0,"50%",i);case"top-left":return this.positionPoint(s.getTopLeft(),0,0,i);default:return this}}},{key:"positionPoint",value:function(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=s.padding,l=Iz(s,["padding"]),c=P.normalizeSides(u),f=fr.fromSize(this.getClientSize()),d=f.clone().moveAndExpand({x:c.left,y:c.top,width:-c.right-c.left,height:-c.top-c.bottom});t=P.normalizePercentage(t,Math.max(0,d.width)),t<0&&(t=d.width+t),i=P.normalizePercentage(i,Math.max(0,d.height)),i<0&&(i=d.height+i);var h=d.getTopLeft().translate(t,i),p=f.getCenter().diff(h),m=this.zoom(),b=p.scale(1/m,1/m),E=gt.create(e).translate(b);return this.centerPoint(E.x,E.y,l)}},{key:"zoom",value:function(e,t){if(e==null)return this.sx;t=t||{};var i,s,u=this.getClientSize(),l=this.clientToLocalPoint(u.width/2,u.height/2),c=e,f=e;if(t.absolute||(c+=this.sx,f+=this.sy),t.scaleGrid&&(c=Math.round(c/t.scaleGrid)*t.scaleGrid,f=Math.round(f/t.scaleGrid)*t.scaleGrid),t.maxScale&&(c=Math.min(t.maxScale,c),f=Math.min(t.maxScale,f)),t.minScale&&(c=Math.max(t.minScale,c),f=Math.max(t.minScale,f)),c=this.graph.transform.clampScale(c),f=this.graph.transform.clampScale(f),t.center){var d=c/this.sx,h=f/this.sy;i=t.center.x-(t.center.x-l.x)/d,s=t.center.y-(t.center.y-l.y)/h}else i=l.x,s=l.y;return this.beforeManipulation(),this.graph.transform.scale(c,f),this.centerPoint(i,s),this.afterManipulation(),this}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=fr.create(e),s=this.graph;t.contentArea=i,t.viewportArea==null&&(t.viewportArea={x:s.options.x,y:s.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),s.transform.scaleContentToFitImpl(t,!1);var u=i.getCenter();return this.centerPoint(u.x,u.y),this.afterManipulation(),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.graph.getContentArea(e),e)}},{key:"transitionToPoint",value:function(e,t,i){var s=this;typeof e=="object"?(i=t,t=e.y,e=e.x):t=t,i==null&&(i={});var u,l,c=this.sx,f=Math.max(i.scale||c,1e-6),d=this.getClientSize(),h=new gt(e,t),p=this.clientToLocalPoint(d.width/2,d.height/2);if(c===f){var m=p.diff(h).scale(c,c).round();u="translate(".concat(m.x,"px,").concat(m.y,"px)")}else{var b=f/(c-f)*h.distance(p),E=p.clone().move(h,b),x=this.localToBackgroundPoint(E).round();u="scale(".concat(f/c,")"),l="".concat(x.x,"px ").concat(x.y,"px")}var O=i.onTransitionEnd;return this.$container.addClass(Yl.transitionClassName),this.$content.off(Yl.transitionEventName).on(Yl.transitionEventName,function(D){s.syncTransition(f,{x:e,y:t}),typeof O=="function"&&N.call(O,s,D.originalEvent)}).css({transform:u,transformOrigin:l,transition:"transform",transitionDuration:i.duration||"1s",transitionDelay:i.delay,transitionTimingFunction:i.timing}),this}},{key:"syncTransition",value:function(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}},{key:"removeTransition",value:function(){return this.$container.removeClass(Yl.transitionClassName),this.$content.off(Yl.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}},{key:"transitionToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=fr.create(e),s=t.maxScale||Infinity,u=t.minScale||Number.MIN_VALUE,l=t.scaleGrid||null,c=t.visibility||1,f=t.center?gt.create(t.center):i.getCenter(),d=this.getClientSize(),h=d.width*c,p=d.height*c,m=new fr(f.x-h/2,f.y-p/2,h,p).getMaxUniformScaleToFit(i,f);return m=Math.min(m,s),l&&(m=Math.floor(m/l)*l),m=Math.max(u,m),this.transitionToPoint(f,Object.assign({scale:m},t))}},{key:"startPanning",value:function(e){var t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.normalizeEvent(e),i=t.clientX-this.clientX,s=t.clientY-this.clientY;this.container.scrollTop-=s,this.container.scrollLeft-=i,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}},{key:"stopPanning",value:function(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e})}},{key:"clientToLocalPoint",value:function(e,t){var i=typeof e=="object"?e.x:e,s=typeof e=="object"?e.y:t,u=this.graph.matrix();return i+=this.container.scrollLeft-this.padding.left-u.e,s+=this.container.scrollTop-this.padding.top-u.f,new gt(i/u.a,s/u.d)}},{key:"localToBackgroundPoint",value:function(e,t){var i=typeof e=="object"?gt.create(e):new gt(e,t),s=this.graph.matrix(),u=this.padding;return R.transformPoint(i,s).translate(u.left,u.top)}},{key:"resize",value:function(e,t){var i=e!=null?e:this.container.offsetWidth,s=t!=null?t:this.container.offsetHeight;typeof i=="number"&&(i=Math.round(i)),typeof s=="number"&&(s=Math.round(s)),this.options.width=i,this.options.height=s,this.$container.css({width:i,height:s}),this.update()}},{key:"getClientSize",value:function(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"autoScroll",value:function(e,t){var i=10,s=this.container,u=s.getBoundingClientRect(),l=0,c=0;return e<=u.left+i&&(l=-i),t<=u.top+i&&(c=-i),e>=u.right-i&&(l=i),t>=u.bottom-i&&(c=i),l!==0&&(s.scrollLeft+=l),c!==0&&(s.scrollTop+=c),{scrollerX:l,scrollerY:c}}},{key:"addPadding",value:function(e,t,i,s){var u=this.getPadding();this.padding={left:Math.round(u.left+(e||0)),top:Math.round(u.top+(i||0)),bottom:Math.round(u.bottom+(s||0)),right:Math.round(u.right+(t||0))},u=this.padding,this.$content.css({width:u.left+this.graph.options.width+u.right,height:u.top+this.graph.options.height+u.bottom});var l=this.graph.container;return l.style.left="".concat(this.padding.left,"px"),l.style.top="".concat(this.padding.top,"px"),this}},{key:"getPadding",value:function(){var e=this.options.padding;return typeof e=="function"?P.normalizeSides(N.call(e,this,this)):P.normalizeSides(e)}},{key:"getVisibleArea",value:function(){var e=this.graph.matrix(),t=this.getClientSize(),i={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},s=R.transformRectangle(i,e.inverse());return s.x-=(this.padding.left||0)/this.sx,s.y-=(this.padding.top||0)/this.sy,s}},{key:"isCellVisible",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.getBBox(),s=this.getVisibleArea();return t.strict?s.containsRect(i):s.isIntersectWithRect(i)}},{key:"isPointVisible",value:function(e){return this.getVisibleArea().containsPoint(e)}},{key:"lock",value:function(){return this.$container.css("overflow","hidden"),this}},{key:"unlock",value:function(){return this.$container.css("overflow","scroll"),this}},{key:"onRemove",value:function(){this.stopListening()}},{key:"dispose",value:function(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}}]),r}(oa);Dz([oa.dispose()],h0.prototype,"dispose",null),function(o){var a=function(r){Object($n.a)(e,r);var n=Object(Xn.a)(e);function e(t){var i;return Object(Ie.a)(this,e),i=n.call(this,t.graph),i.scroller=t,t.options.background&&i.draw(t.options.background),i}return Object(pe.a)(e,[{key:"elem",get:function(){return this.scroller.background}},{key:"init",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"updateBackgroundOptions",value:function(i){this.scroller.options.background=i}}]),e}(L1);o.Background=a}(h0||(h0={}));var Yl;(function(o){o.containerClass="graph-scroller",o.panningClass="".concat(o.containerClass,"-panning"),o.pannableClass="".concat(o.containerClass,"-pannable"),o.pagedClass="".concat(o.containerClass,"-paged"),o.contentClass="".concat(o.containerClass,"-content"),o.backgroundClass="".concat(o.containerClass,"-background"),o.transitionClassName="transition-in-progress",o.transitionEventName="transitionend.graph-scroller-transition",o.defaultOptions={padding:function(){var n=this.getClientSize(),e=Math.max(this.options.minVisibleWidth||0,1)||1,t=Math.max(this.options.minVisibleHeight||0,1)||1,i=Math.max(n.width-e,0),s=Math.max(n.height-t,0);return{left:i,top:s,right:i,bottom:s}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function a(r){var n=C.merge({},o.defaultOptions,r);return n.pageWidth==null&&(n.pageWidth=r.graph.options.width),n.pageHeight==null&&(n.pageHeight=r.graph.options.height),n}o.getOptions=a})(Yl||(Yl={}));function Xo(o,a,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(r){var e=r.graph,t=e.view.normalizeEvent(a),i=e.snapToGrid(t.clientX,t.clientY);r.notify(o,Object.assign({e:t,view:r,node:r.cell,cell:r.cell,x:i.x,y:i.y},n))}}var Rz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},j1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.options=C.merge({},Ou.defaultOptions,n),e.options.model&&(e.options.collection=e.options.model.collection),e.options.collection?e.collection=e.options.collection:(e.collection=new Sk([],{comparator:Ou.depthComparator}),e.options.collection=e.collection),e.boxCount=0,e.createContainer(),e.initHandles(),e.startListening(),e}return Object(pe.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"boxClassName",get:function(){return this.prefixClassName(Ou.classNames.box)}},{key:"$boxes",get:function(){return this.$container.children(".".concat(this.boxClassName))}},{key:"handleOptions",get:function(){return this.options}},{key:"startListening",value:function(){var e,t=this.graph,i=this.collection;this.delegateEvents((e={},Object(Qe.a)(e,"mousedown .".concat(this.boxClassName),"onSelectionBoxMouseDown"),Object(Qe.a)(e,"touchstart .".concat(this.boxClassName),"onSelectionBoxMouseDown"),e),!0),t.on("scale",this.onGraphTransformed,this),t.on("translate",this.onGraphTransformed,this),t.model.on("updated",this.onModelUpdated,this),i.on("added",this.onCellAdded,this),i.on("removed",this.onCellRemoved,this),i.on("reseted",this.onReseted,this),i.on("updated",this.onCollectionUpdated,this),i.on("node:change:position",this.onNodePositionChanged,this),i.on("cell:changed",this.onCellChanged,this)}},{key:"stopListening",value:function(){var e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}},{key:"onRemove",value:function(){this.stopListening()}},{key:"onGraphTransformed",value:function(){this.updateSelectionBoxes({async:!1})}},{key:"onCellChanged",value:function(){this.updateSelectionBoxes()}},{key:"onNodePositionChanged",value:function(e){var t=e.node,i=e.options,s=this.options,u=s.showNodeSelectionBox,l=s.pointerEvents,c=i.ui,f=i.selection,d=i.translateBy,h=i.snapped,p=(u!==!0||l==="none")&&!this.translating&&!f,m=c&&d&&t.id===d;if(p&&(m||h)){this.translating=!0;var b=t.position(),E=t.previous("position"),x=b.x-E.x,O=b.y-E.y;(x!==0||O!==0)&&this.translateSelectedNodes(x,O,t,i),this.translating=!1}}},{key:"onModelUpdated",value:function(e){var t=e.removed;t&&t.length&&this.unselect(t)}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.collection.has(e)}},{key:"length",get:function(){return this.collection.length}},{key:"cells",get:function(){return this.collection.toArray()}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.dryrun=!0;var i=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(i,t),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e){if(t.batch){var i=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(i,Object.assign(Object.assign({},t),{ui:!0})),this}var s=this.cells,u=this.filter(Array.isArray(e)?e:[e]),l={},c={};s.forEach(function(h){return l[h.id]=h}),u.forEach(function(h){return c[h.id]=h});var f=[],d=[];return u.forEach(function(h){l[h.id]||f.push(h)}),s.forEach(function(h){c[h.id]||d.push(h)}),d.length&&this.unselect(d,Object.assign(Object.assign({},t),{ui:!0})),f.length&&this.select(f,Object.assign(Object.assign({},t),{ui:!0})),d.length===0&&f.length===0&&this.updateContainer(),this}return this.clean(t)}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.length&&(e.batch===!1?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}},{key:"setFilter",value:function(e){this.options.filter=e}},{key:"setContent",value:function(e){this.options.content=e}},{key:"startSelecting",value:function(e){e=this.normalizeEvent(e),this.clean();var t,i,s=this.graph.container;if(e.offsetX!=null&&e.offsetY!=null&&s.contains(e.target))t=e.offsetX,i=e.offsetY;else{var u=this.$(s).offset(),l=s.scrollLeft,c=s.scrollTop;t=e.clientX-u.left+window.pageXOffset+l,i=e.clientY-u.top+window.pageYOffset+c}this.$container.css({top:i,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:i,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(Ou.documentEvents,e.data)}},{key:"filter",value:function(e){var t=this,i=this.options.filter;return Array.isArray(i)?e.filter(function(s){return!i.includes(s)&&!i.includes(s.shape)}):typeof i=="function"?e.filter(function(s){return N.call(i,t.graph,s)}):e}},{key:"stopSelecting",value:function(e){var t=this.graph,i=this.getEventData(e),s=i.action;switch(s){case"selecting":{var u=this.$container.width(),l=this.$container.height(),c=this.$container.offset(),f=t.pageToLocal(c.left,c.top),d=t.transform.getScale();u/=d.sx,l/=d.sy;var h=new fr(f.x,f.y,u,l),p=this.getCellViewsInArea(h).map(function(E){return E.cell});this.reset(p,{batch:!0}),this.hideRubberband();break}case"translating":{var m=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){var b=i;this.updateSelectedNodesPosition({dx:b.clientX-b.originX,dy:b.clientY-b.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,m.x,m.y);break}default:{this.clean();break}}}},{key:"onMouseUp",value:function(e){var t=this.getEventData(e).action;t&&(this.stopSelecting(e),this.undelegateDocumentEvents())}},{key:"onSelectionBoxMouseDown",value:function(e){this.options.following||e.stopPropagation();var t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);var i=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:i});var s=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,s.x,s.y),this.delegateDocumentEvents(Ou.documentEvents,t.data)}},{key:"startTranslating",value:function(e){this.graph.model.startBatch("move-selection");var t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}},{key:"getSelectionOffset",value:function(e,t){var i=e.x-t.clientX,s=e.y-t.clientY,u=this.graph.hook.getRestrictArea();if(u){var l=this.collection.toArray(),c=Zi.getCellsBBox(l,{deep:!0})||fr.create(),f=u.x-c.x,d=u.y-c.y,h=u.x+u.width-(c.x+c.width),p=u.y+u.height-(c.y+c.height);if(i<f&&(i=f),s<d&&(s=d),h<i&&(i=h),p<s&&(s=p),!this.options.following){var m=e.x-t.originX,b=e.y-t.originY;i=m<=f||m>=h?0:i,s=b<=d||b>=p?0:s}}return{dx:i,dy:s}}},{key:"updateSelectedNodesPosition",value:function(e){var t=e.dx,i=e.dy;if(t||i)if(this.translateSelectedNodes(t,i),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{var s=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:"+=".concat(t*s.sx),top:"+=".concat(i*s.sy)})}}},{key:"autoScrollGraph",value:function(e,t){var i=this.graph.scroller.widget;return i?i.autoScroll(e,t):{scrollerX:0,scrollerY:0}}},{key:"adjustSelection",value:function(e){var t=this.normalizeEvent(e),i=this.getEventData(t),s=i.action;switch(s){case"selecting":{var u=i;u.moving!==!0&&(this.$container.appendTo(this.graph.container),this.showRubberband(),u.moving=!0);var l=this.autoScrollGraph(t.clientX,t.clientY),c=l.scrollerX,f=l.scrollerY;u.scrollerX+=c,u.scrollerY+=f;var d=t.clientX-u.clientX+u.scrollerX,h=t.clientY-u.clientY+u.scrollerY,p=parseInt(this.$container.css("left"),10),m=parseInt(this.$container.css("top"),10);this.$container.css({left:d<0?u.offsetX+d:p,top:h<0?u.offsetY+h:m,width:Math.abs(d),height:Math.abs(h)});break}case"translating":{var b=this.graph.snapToGrid(t.clientX,t.clientY),E=i,x=this.getSelectionOffset(b,E);this.options.following?this.updateSelectedNodesPosition(x):this.updateContainerPosition(x),x.dx&&(E.clientX=b.x),x.dy&&(E.clientY=b.y),this.notifyBoxEvent("box:mousemove",e,b.x,b.y);break}default:break}this.boxesUpdated=!1}},{key:"translateSelectedNodes",value:function(e,t,i,s){var u=this,l={},c=[];if(i&&(l[i.id]=!0),this.collection.toArray().forEach(function(d){d.getDescendants({deep:!0}).forEach(function(h){l[h.id]=!0})}),s&&s.translateBy){var f=this.graph.getCellById(s.translateBy);f&&(l[f.id]=!0,f.getDescendants({deep:!0}).forEach(function(d){l[d.id]=!0}),c.push(f))}this.collection.toArray().forEach(function(d){if(!l[d.id]){var h=Object.assign(Object.assign({},s),{selection:u.cid,exclude:c});d.translate(e,t,h),u.graph.model.getConnectedEdges(d).forEach(function(p){l[p.id]||(p.translate(e,t,h),l[p.id]=!0)})}})}},{key:"getCellViewsInArea",value:function(e){var t=this.graph,i={strict:this.options.strict},s=[];return this.options.rubberNode&&(this.options.useCellGeometry?s=s.concat(t.model.getNodesInArea(e,i).map(function(u){return t.renderer.findViewByCell(u)}).filter(function(u){return u!=null})):s=s.concat(t.renderer.findViewsInArea(e,i))),this.options.rubberEdge&&(this.options.useCellGeometry?s=s.concat(t.model.getEdgesInArea(e,i).map(function(u){return t.renderer.findViewByCell(u)}).filter(function(u){return u!=null})):s=s.concat(t.renderer.findEdgeViewsInArea(e,i))),s}},{key:"notifyBoxEvent",value:function(e,t,i,s){var u=this.getEventData(t),l=u.activeView;this.trigger(e,{e:t,view:l,x:i,y:s,cell:l.cell})}},{key:"getSelectedClassName",value:function(e){return this.prefixClassName("".concat(e.isNode()?"node":"edge","-selected"))}},{key:"addCellSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}},{key:"removeCellUnSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}},{key:"destroySelectionBox",value:function(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find('[data-cell-id="'.concat(e.id,'"]')).remove(),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}},{key:"destroyAllSelectionBoxes",value:function(e){var t=this;e.forEach(function(i){return t.removeCellUnSelectedClassName(i)}),this.hide(),this.$boxes.remove(),this.boxCount=0}},{key:"hide",value:function(){this.$container.removeClass(this.prefixClassName(Ou.classNames.rubberband)).removeClass(this.prefixClassName(Ou.classNames.selected))}},{key:"showRubberband",value:function(){this.$container.addClass(this.prefixClassName(Ou.classNames.rubberband))}},{key:"hideRubberband",value:function(){this.$container.removeClass(this.prefixClassName(Ou.classNames.rubberband))}},{key:"showSelected",value:function(){this.$container.removeAttr("style").addClass(this.prefixClassName(Ou.classNames.selected))}},{key:"createContainer",value:function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(Ou.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(Ou.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(Ou.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}},{key:"updateContainerPosition",value:function(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:"+=".concat(e.dx),top:"+=".concat(e.dy)})}},{key:"updateContainer",value:function(){var e=this,t={x:Infinity,y:Infinity},i={x:0,y:0},s=this.collection.toArray().filter(function(c){return e.canShowSelectionBox(c)});s.forEach(function(c){var f=e.graph.renderer.findViewByCell(c);if(f){var d=f.getBBox({useCellGeometry:e.options.useCellGeometry});t.x=Math.min(t.x,d.x),t.y=Math.min(t.y,d.y),i.x=Math.max(i.x,d.x+d.width),i.y=Math.max(i.y,d.y+d.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:i.x-t.x,height:i.y-t.y}).attr("data-selection-length",this.collection.length);var u=this.options.content;if(u)if(typeof u=="function"){var l=N.call(u,this.graph,this,this.$selectionContent[0]);l&&this.$selectionContent.html(l)}else this.$selectionContent.html(u);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"canShowSelectionBox",value:function(e){return e.isNode()&&this.options.showNodeSelectionBox===!0||e.isEdge()&&this.options.showEdgeSelectionBox===!0}},{key:"createSelectionBox",value:function(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){var t=this.graph.renderer.findViewByCell(e);if(t){var i=t.getBBox({useCellGeometry:this.options.useCellGeometry}),s=this.boxClassName;this.$("<div/>").addClass(s).addClass("".concat(s,"-").concat(e.isNode()?"node":"edge")).attr("data-cell-id",e.id).css({position:"absolute",left:i.x,top:i.y,width:i.width,height:i.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}},{key:"updateSelectionBoxes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}},{key:"confirmUpdate",value:function(){var e=this;return this.boxCount&&(this.hide(),this.$boxes.each(function(t,i){var s=e.$(i).remove().attr("data-cell-id"),u=e.collection.get(s);u&&e.createSelectionBox(u)}),this.updateContainer()),0}},{key:"getCellViewFromElem",value:function(e){var t=e.getAttribute("data-cell-id");if(t){var i=this.collection.get(t);if(i)return this.graph.renderer.findViewByCell(i)}return null}},{key:"onCellRemoved",value:function(e){var t=e.cell;this.destroySelectionBox(t),this.updateContainer()}},{key:"onReseted",value:function(e){var t=this,i=e.previous,s=e.current;this.destroyAllSelectionBoxes(i),s.forEach(function(u){t.listenCellRemoveEvent(u),t.createSelectionBox(u)}),this.updateContainer()}},{key:"onCellAdded",value:function(e){var t=e.cell;this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()}},{key:"listenCellRemoveEvent",value:function(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}},{key:"onCollectionUpdated",value:function(e){var t=this,i=e.added,s=e.removed,u=e.options;i.forEach(function(c){t.trigger("cell:selected",{cell:c,options:u}),t.graph.trigger("cell:selected",{cell:c,options:u}),c.isNode()?(t.trigger("node:selected",{cell:c,options:u,node:c}),t.graph.trigger("node:selected",{cell:c,options:u,node:c})):c.isEdge()&&(t.trigger("edge:selected",{cell:c,options:u,edge:c}),t.graph.trigger("edge:selected",{cell:c,options:u,edge:c}))}),s.forEach(function(c){t.trigger("cell:unselected",{cell:c,options:u}),t.graph.trigger("cell:unselected",{cell:c,options:u}),c.isNode()?(t.trigger("node:unselected",{cell:c,options:u,node:c}),t.graph.trigger("node:unselected",{cell:c,options:u,node:c})):c.isEdge()&&(t.trigger("edge:unselected",{cell:c,options:u,edge:c}),t.graph.trigger("edge:unselected",{cell:c,options:u,edge:c}))});var l={added:i,removed:s,options:u,selected:this.cells.filter(function(c){return!!t.graph.getCellById(c.id)})};this.trigger("selection:changed",l),this.graph.trigger("selection:changed",l)}},{key:"deleteSelectedCells",value:function(){var e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}},{key:"startRotate",value:function(e){var t=e.e,i=this.collection.toArray(),s=Zi.getCellsBBox(i).getCenter(),u=this.graph.snapToGrid(t.clientX,t.clientY),l=i.reduce(function(c,f){return c[f.id]=ji.normalize(f.getAngle()),c},{});this.setEventData(t,{center:s,angles:l,start:u.theta(s)})}},{key:"doRotate",value:function(e){var t=this,i=e.e,s=this.getEventData(i),u=this.graph.options.rotating.grid,l=typeof u=="function"?N.call(u,this.graph,null):u,c=this.graph.snapToGrid(i.clientX,i.clientY),f=s.start-c.theta(s.center);s.rotated||(s.rotated=!0),Math.abs(f)>.001&&(this.collection.toArray().forEach(function(d){var h=ko.snapToGrid(s.angles[d.id]+f,l||15);d.rotate(h,{absolute:!0,center:s.center,selection:t.cid})}),this.updateSelectionBoxes())}},{key:"stopRotate",value:function(e){var t=this,i=e.e,s=this.getEventData(i);s.rotated&&(s.rotated=!1,this.collection.toArray().forEach(function(u){Xo("node:rotated",i,t.graph.findViewByCell(u))}))}},{key:"startResize",value:function(e){var t=e.e,i=this.graph.getGridSize(),s=this.collection.toArray(),u=Zi.getCellsBBox(s),l=s.map(function(d){return d.getBBox()}),c=l.reduce(function(d,h){return h.width<d?h.width:d},Infinity),f=l.reduce(function(d,h){return h.height<d?h.height:d},Infinity);this.setEventData(t,{bbox:u,cells:this.graph.model.getSubGraph(s),minWidth:i*u.width/c,minHeight:i*u.height/f})}},{key:"doResize",value:function(e){var t=e.e,i=e.dx,s=e.dy,u=this.eventData(t),l=u.bbox,c=l.width,f=l.height,d=Math.max(c+i,u.minWidth),h=Math.max(f+s,u.minHeight);u.resized||(u.resized=!0),(Math.abs(c-d)>.001||Math.abs(f-h)>.001)&&(this.graph.model.resizeCells(d,h,u.cells,{selection:this.cid}),l.width=d,l.height=h,this.updateSelectionBoxes())}},{key:"stopResize",value:function(e){var t=this,i=e.e,s=this.eventData(i);s.resized&&(s.resized=!1,this.collection.toArray().forEach(function(u){Xo("node:resized",i,t.graph.findViewByCell(u))}))}},{key:"dispose",value:function(){this.clean(),this.remove()}}]),r}(oa);Rz([oa.dispose()],j1.prototype,"dispose",null),C.applyMixins(j1,c0);var Ou;(function(o){var a="widget-selection";o.classNames={root:a,inner:"".concat(a,"-inner"),box:"".concat(a,"-box"),content:"".concat(a,"-content"),rubberband:"".concat(a,"-rubberband"),selected:"".concat(a,"-selected")},o.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content:function(e){return _.template('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:e.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]};function r(n){return n.getAncestors().length}o.depthComparator=r})(Ou||(Ou={}));var gS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"node",get:function(){return this.cell}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-transform")}},{key:"resizeClassName",get:function(){return"".concat(this.containerClassName,"-resize")}},{key:"rotateClassName",get:function(){return"".concat(this.containerClassName,"-rotate")}},{key:"init",value:function(e){this.options=Object.assign(Object.assign({},us.defaultOptions),e),this.render(),this.startListening()}},{key:"startListening",value:function(){var e;this.delegateEvents((e={},Object(Qe.a)(e,"mousedown .".concat(this.resizeClassName),"startResizing"),Object(Qe.a)(e,"touchstart .".concat(this.resizeClassName),"startResizing"),Object(Qe.a)(e,"mousedown .".concat(this.rotateClassName),"startRotating"),Object(Qe.a)(e,"touchstart .".concat(this.rotateClassName),"startRotating"),e)),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),Object(Vr.a)(Object(Hr.a)(r.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),Object(Vr.a)(Object(Hr.a)(r.prototype),"stopListening",this).call(this)}},{key:"renderHandles",value:function(){var e=this;this.container=document.createElement("div"),this.$container=this.$(this.container);var t=this.$("<div/>").prop("draggable",!1),i=t.clone().addClass(this.rotateClassName),s=us.POSITIONS.map(function(u){return t.clone().addClass(e.resizeClassName).attr("data-position",u)});this.empty(),this.$container.append(s,i)}},{key:"render",value:function(){return this.renderHandles(),this.view.addClass(us.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}},{key:"update",value:function(){var e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;var i=ji.normalize(this.node.getAngle()),s=i!==0?"rotate(".concat(i,"deg)"):"";return this.$container.css({transform:s,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}},{key:"remove",value:function(){return this.view.removeClass(us.NODE_CLS),Object(Vr.a)(Object(Hr.a)(r.prototype),"remove",this).call(this)}},{key:"onKnobMouseDown",value:function(){this.startHandle()}},{key:"onKnobMouseUp",value:function(){this.stopHandle()}},{key:"updateResizerDirections",value:function(){var e=this,t=ji.normalize(this.node.getAngle()),i=Math.floor(t*(us.DIRECTIONS.length/360));if(i!==this.prevShift){var s=us.DIRECTIONS.slice(i).concat(us.DIRECTIONS.slice(0,i)),u=function(c){return"".concat(e.containerClassName,"-cursor-").concat(c)};this.$container.find(".".concat(this.resizeClassName)).removeClass(us.DIRECTIONS.map(function(l){return u(l)}).join(" ")).each(function(l,c){e.$(c).addClass(u(s[l]))}),this.prevShift=i}}},{key:"getTrueDirection",value:function(e){var t=ji.normalize(this.node.getAngle()),i=us.POSITIONS.indexOf(e);return i+=Math.floor(t*(us.POSITIONS.length/360)),i%=us.POSITIONS.length,us.POSITIONS[i]}},{key:"toValidResizeDirection",value:function(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}},{key:"startResizing",value:function(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});var t=this.$(e.target).attr("data-position"),i=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),Xo("node:resize:mousedown",e,i)}},{key:"prepareResizing",value:function(e,t){var i=this.getTrueDirection(t),s=0,u=0;t.split("-").forEach(function(d){s={left:-1,right:1}[d]||s,u={top:-1,bottom:1}[d]||u});var l=this.toValidResizeDirection(t),c={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[l],f=ji.normalize(this.node.getAngle());this.setEventData(e,{selector:c,direction:l,trueDirection:i,relativeDirection:t,angle:f,resizeX:s,resizeY:u,action:"resizing"})}},{key:"startRotating",value:function(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});var t=this.graph.findViewByCell(this.node),i=this.node.getBBox().getCenter(),s=this.normalizeEvent(e),u=this.graph.snapToGrid(s.clientX,s.clientY);this.setEventData(e,{center:i,action:"rotating",angle:ji.normalize(this.node.getAngle()),start:gt.create(u).theta(i)}),this.startAction(e),Xo("node:rotate:mousedown",e,t)}},{key:"onMouseMove",value:function(e){var t=this.graph.findViewByCell(this.node),i=this.getEventData(e);if(i.action){var s=this.normalizeEvent(e),u=s.clientX,l=s.clientY,c=this.graph.scroller.widget,f=this.options.restrictedResizing;if(f===!0||typeof f=="number"){var d=f===!0?0:f,h=c?Math.max(d,8):d,p=this.graph.container.getBoundingClientRect();u=P.clamp(u,p.left+h,p.right-h),l=P.clamp(l,p.top+h,p.bottom-h)}else this.options.autoScrollOnResizing&&c&&c.autoScroll(u,l);var m=this.graph.snapToGrid(u,l),b=this.graph.getGridSize(),E=this.node,x=this.options;if(i.action==="resizing"){i=i,i.resized||(t&&(t.addClass("node-resizing"),Xo("node:resize",e,t)),i.resized=!0);var O=E.getBBox(),D=gt.create(m).rotate(i.angle,O.getCenter()).diff(O[i.selector]),I=i.resizeX?D.x*i.resizeX:O.width,F=i.resizeY?D.y*i.resizeY:O.height,H=I,$=F;if(I=ko.snapToGrid(I,b),F=ko.snapToGrid(F,b),I=Math.max(I,x.minWidth||b),F=Math.max(F,x.minHeight||b),I=Math.min(I,x.maxWidth||Infinity),F=Math.min(F,x.maxHeight||Infinity),x.preserveAspectRatio){var se=O.width*F/O.height,de=O.height*I/O.width;I<se?F=de:I=se}var Ee=i.relativeDirection;if(x.allowReverse&&(H<=-I||$<=-F)){var Oe;Ee==="left"?H<=-I&&(Oe="right"):Ee==="right"?H<=-I&&(Oe="left"):Ee==="top"?$<=-F&&(Oe="bottom"):Ee==="bottom"?$<=-F&&(Oe="top"):Ee==="top-left"?H<=-I&&$<=-F?Oe="bottom-right":H<=-I?Oe="top-right":$<=-F&&(Oe="bottom-left"):Ee==="top-right"?H<=-I&&$<=-F?Oe="bottom-left":H<=-I?Oe="top-left":$<=-F&&(Oe="bottom-right"):Ee==="bottom-left"?H<=-I&&$<=-F?Oe="top-right":H<=-I?Oe="bottom-right":$<=-F&&(Oe="top-left"):Ee==="bottom-right"&&(H<=-I&&$<=-F?Oe="top-left":H<=-I?Oe="bottom-left":$<=-F&&(Oe="top-right"));var $e=Oe;this.stopHandle();var tt=this.$container.find(".".concat(this.resizeClassName,'[data-position="').concat($e,'"]'));this.startHandle(tt[0]),this.prepareResizing(e,$e),this.onMouseMove(e)}if(O.width!==I||O.height!==F){var Le={ui:!0,direction:i.direction,relativeDirection:i.relativeDirection,trueDirection:i.trueDirection,minWidth:x.minWidth,minHeight:x.minHeight,maxWidth:x.maxWidth,maxHeight:x.maxHeight,preserveAspectRatio:x.preserveAspectRatio===!0};E.resize(I,F,Le),Xo("node:resizing",e,t)}Xo("node:resize:mousemove",e,t)}else if(i.action==="rotating"){i=i,i.rotated||(t&&(t.addClass("node-rotating"),Xo("node:rotate",e,t)),i.rotated=!0);var it=E.getAngle(),It=i.start-gt.create(m).theta(i.center),tn=i.angle+It;x.rotateGrid&&(tn=ko.snapToGrid(tn,x.rotateGrid)),tn=ji.normalize(tn),it!==tn&&(E.rotate(tn,{absolute:!0}),Xo("node:rotating",e,t)),Xo("node:rotate:mousemove",e,t)}}}},{key:"onMouseUp",value:function(e){var t=this.graph.findViewByCell(this.node),i=this.getEventData(e);i.action&&(this.stopAction(e),this.model.stopBatch(i.action==="resizing"?"resize":"rotate",{cid:this.cid}),i.action==="resizing"?Xo("node:resize:mouseup",e,t):i.action==="rotating"&&Xo("node:rotate:mouseup",e,t))}},{key:"startHandle",value:function(e){if(this.handle=e||null,this.$container.addClass("".concat(this.containerClassName,"-active")),e){this.$(e).addClass("".concat(this.containerClassName,"-active-handle"));var t=e.getAttribute("data-position");if(t){var i=us.DIRECTIONS[us.POSITIONS.indexOf(t)];this.$container.addClass("".concat(this.containerClassName,"-cursor-").concat(i))}}}},{key:"stopHandle",value:function(){if(this.$container.removeClass("".concat(this.containerClassName,"-active")),this.handle){this.$(this.handle).removeClass("".concat(this.containerClassName,"-active-handle"));var e=this.handle.getAttribute("data-position");if(e){var t=us.DIRECTIONS[us.POSITIONS.indexOf(e)];this.$container.removeClass("".concat(this.containerClassName,"-cursor-").concat(t))}this.handle=null}}},{key:"startAction",value:function(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(us.documentEvents,e.data)}},{key:"stopAction",value:function(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.graph.findViewByCell(this.node),i=this.getEventData(e);t&&(t.removeClass("node-".concat(i.action)),i.action==="resizing"&&i.resized?Xo("node:resized",e,t):i.action==="rotating"&&i.rotated&&Xo("node:rotated",e,t))}}]),r}(f0),us;(function(o){o.NODE_CLS="has-widget-transform",o.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],o.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},o.defaultOptions={minWidth:0,minHeight:0,maxWidth:Infinity,maxHeight:Infinity,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(us||(us={}));var Nz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},jc;(function(o){function a(r,n,e){var t={};return Object.keys(e||{}).forEach(function(i){var s=e[i];t[i]=typeof s=="function"?s.call(r,n):s}),t}o.parseOptionGroup=a})(jc||(jc={})),function(o){function a(r){var n=r.grid,e=r.panning,t=r.selecting,i=r.embedding,s=r.snapline,u=r.resizing,l=r.rotating,c=r.knob,f=r.clipboard,d=r.history,h=r.scroller,p=r.minimap,m=r.keyboard,b=r.mousewheel,E=Nz(r,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),x=r.container;if(x!=null)E.width==null&&(E.width=x.clientWidth),E.height==null&&(E.height=x.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");var O=C.merge({},o.defaults,E),D={size:10,visible:!1};typeof n=="number"?O.grid={size:n,visible:!1}:typeof n=="boolean"?O.grid=Object.assign(Object.assign({},D),{visible:n}):O.grid=Object.assign(Object.assign({},D),n);var I=["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"];return I.forEach(function(F){var H=r[F];typeof H=="boolean"?O[F].enabled=H:O[F]=Object.assign(Object.assign({},O[F]),H)}),O.background&&O.scroller.enabled&&O.scroller.background==null&&(O.scroller.background=O.background,delete O.background),O}o.get=a}(jc||(jc={})),function(o){o.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:ko.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:ko.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:function(r){var n=r.type,e=r.sourceView,t=r.targetView,i=n==="target"?t:e;return i!=null},createEdge:function(){return new fS}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:function(){return!1}}}(jc||(jc={}));var Mk=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Ak=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"cid",get:function(){return this.graph.view.cid}},{key:"svg",get:function(){return this.view.svg}},{key:"defs",get:function(){return this.view.defs}},{key:"isDefined",value:function(e){return this.svg.getElementById(e)!=null}},{key:"filter",value:function(e){var t=e.id,i=e.name;if(t||(t="filter-".concat(i,"-").concat(this.cid,"-").concat(_.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var s=Mv.registry.get(i);if(s==null)return Mv.registry.onNotFound(i);var u=s(e.args||{}),l=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});mi.create(Hi.sanitize(u),l).appendTo(this.defs)}return t}},{key:"gradient",value:function(e){var t=e.id,i=e.type;if(t||(t="gradient-".concat(i,"-").concat(this.cid,"-").concat(_.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var s=e.stops,u=s.map(function(f){var d=f.opacity!=null&&Number.isFinite(f.opacity)?f.opacity:1;return'<stop offset="'.concat(f.offset,'" stop-color="').concat(f.color,'" stop-opacity="').concat(d,'"/>')}),l="<".concat(i,">").concat(u.join(""),"</").concat(i,">"),c=Object.assign({id:t},e.attrs);mi.create(l,c).appendTo(this.defs)}return t}},{key:"marker",value:function(e){var t=e.id,i=e.refX,s=e.refY,u=e.markerUnits,l=e.markerOrient,c=e.tagName,f=e.children,d=Mk(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),h=t;if(h||(h="marker-".concat(this.cid,"-").concat(_.hashcode(JSON.stringify(e)))),!this.isDefined(h)){c!=="path"&&delete d.d;var p=mi.create("marker",{refX:i,refY:s,id:h,overflow:"visible",orient:l!=null?l:"auto",markerUnits:u||"userSpaceOnUse"},f?f.map(function(m){var b=m.tagName,E=Mk(m,["tagName"]);return mi.create("".concat(b)||"path",R.kebablizeAttrs(Object.assign(Object.assign({},d),E)))}):[mi.create(c||"path",R.kebablizeAttrs(d))]);this.defs.appendChild(p.node)}return h}},{key:"remove",value:function(e){var t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}]),r}(xa),Lz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},jz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},pS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"elem",get:function(){return this.view.grid}},{key:"grid",get:function(){return this.options.grid}},{key:"init",value:function(){this.startListening(),this.draw(this.grid)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"setVisible",value:function(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}},{key:"getGridSize",value:function(){return this.grid.size}},{key:"setGridSize",value:function(e){this.grid.size=Math.max(e,1),this.update()}},{key:"show",value:function(){this.setVisible(!0),this.update()}},{key:"hide",value:function(){this.setVisible(!1),this.update()}},{key:"clear",value:function(){this.elem.style.backgroundImage=""}},{key:"draw",value:function(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();var i=this.graph.matrix(),s=this.getInstance(),u=Array.isArray(e)?e:[e];this.patterns.forEach(function(f,d){var h="pattern_".concat(d),p=i.a||1,m=i.d||1,b=f.update,E=f.markup,x=jz(f,["update","markup"]),O=Object.assign(Object.assign(Object.assign({},x),u[d]),{sx:p,sy:m,ox:i.e||0,oy:i.f||0,width:t*p,height:t*m});s.has(h)||s.add(h,mi.create("pattern",{id:h,patternUnits:"userSpaceOnUse"},mi.createVectors(E)).node);var D=s.get(h);typeof b=="function"&&b(D.childNodes[0],O);var I=O.ox%O.width;I<0&&(I+=O.width);var F=O.oy%O.height;F<0&&(F+=O.height),R.attr(D,{x:I,y:F,width:O.width,height:O.height})});var l=new XMLSerializer().serializeToString(s.root),c="url(data:image/svg+xml;base64,".concat(btoa(l),")");this.elem.style.backgroundImage=c}},{key:"getInstance",value:function(){return this.instance||(this.instance=new Cd),this.instance}},{key:"resolveGrid",value:function(e){if(!e)return[];var t=e.type;if(t==null)return[Object.assign(Object.assign({},Cd.presets.dot),e.args)];var i=Cd.registry.get(t);if(i){var s=e.args||[];return Array.isArray(s)||(s=[s]),Array.isArray(i)?i.map(function(u,l){return Object.assign(Object.assign({},u),s[l])}):[Object.assign(Object.assign({},i),s[0])]}return Cd.registry.onNotFound(t)}},{key:"dispose",value:function(){this.stopListening(),this.clear()}}]),r}(xa);Lz([xa.dispose()],pS.prototype,"dispose",null);var Tk=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"getClientMatrix",value:function(){return R.createSVGMatrix(this.view.stage.getScreenCTM())}},{key:"getClientOffset",value:function(){var e=this.view.svg.getBoundingClientRect();return new gt(e.left,e.top)}},{key:"getPageOffset",value:function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}},{key:"snapToGrid",value:function(e,t){var i=typeof e=="number"?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y);return i.snapToGrid(this.graph.getGridSize())}},{key:"localToGraphPoint",value:function(e,t){var i=gt.create(e,t);return R.transformPoint(i,this.graph.matrix())}},{key:"localToClientPoint",value:function(e,t){var i=gt.create(e,t);return R.transformPoint(i,this.getClientMatrix())}},{key:"localToPagePoint",value:function(e,t){var i=typeof e=="number"?this.localToGraphPoint(e,t):this.localToGraphPoint(e);return i.translate(this.getPageOffset())}},{key:"localToGraphRect",value:function(e,t,i,s){var u=fr.create(e,t,i,s);return R.transformRectangle(u,this.graph.matrix())}},{key:"localToClientRect",value:function(e,t,i,s){var u=fr.create(e,t,i,s);return R.transformRectangle(u,this.getClientMatrix())}},{key:"localToPageRect",value:function(e,t,i,s){var u=typeof e=="number"?this.localToGraphRect(e,t,i,s):this.localToGraphRect(e);return u.translate(this.getPageOffset())}},{key:"graphToLocalPoint",value:function(e,t){var i=gt.create(e,t);return R.transformPoint(i,this.graph.matrix().inverse())}},{key:"clientToLocalPoint",value:function(e,t){var i=gt.create(e,t);return R.transformPoint(i,this.getClientMatrix().inverse())}},{key:"clientToGraphPoint",value:function(e,t){var i=gt.create(e,t);return R.transformPoint(i,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalPoint",value:function(e,t){var i=gt.create(e,t),s=i.diff(this.getPageOffset());return this.graphToLocalPoint(s)}},{key:"graphToLocalRect",value:function(e,t,i,s){var u=fr.create(e,t,i,s);return R.transformRectangle(u,this.graph.matrix().inverse())}},{key:"clientToLocalRect",value:function(e,t,i,s){var u=fr.create(e,t,i,s);return R.transformRectangle(u,this.getClientMatrix().inverse())}},{key:"clientToGraphRect",value:function(e,t,i,s){var u=fr.create(e,t,i,s);return R.transformRectangle(u,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalRect",value:function(e,t,i,s){var u=fr.create(e,t,i,s),l=this.getPageOffset();return u.x-=l.x,u.y-=l.y,this.graphToLocalRect(u)}}]),r}(xa),_z=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},mS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.widget=n.graph.hook.createSnapline(),n}return Object(pe.a)(r,[{key:"dispose",value:function(){this.widget.dispose()}}]),r}(xa);_z([xa.dispose()],mS.prototype,"dispose",null);var Eh;(function(o){function a(e){var t=[],i=[];return Array.isArray(e)?t.push.apply(t,Object(ot.a)(e)):e.split("|").forEach(function(s){s.indexOf("&")===-1?t.push(s):i.push.apply(i,Object(ot.a)(s.split("&")))}),{or:t,and:i}}o.parse=a;function r(e,t){if(e!=null&&t!=null){var i=a(e),s=a(t),u=i.or.sort(),l=s.or.sort(),c=i.and.sort(),f=s.and.sort(),d=function(p,m){return p.length===m.length&&(p.length===0||p.every(function(b,E){return b===m[E]}))};return d(u,l)&&d(c,f)}return e==null&&t==null}o.equals=r;function n(e,t,i){if(t==null||Array.isArray(t)&&t.length===0)return i?e.altKey!==!0&&e.ctrlKey!==!0&&e.metaKey!==!0&&e.shiftKey!==!0:!0;var s=a(t),u=s.or,l=s.and,c=function(d){var h="".concat(d.toLowerCase(),"Key");return e[h]===!0};return u.some(function(f){return c(f)})&&l.every(function(f){return c(f)})}o.isMatch=n})(Eh||(Eh={}));var Fz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},yS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"widgetOptions",get:function(){return this.options.scroller}},{key:"pannable",get:function(){return this.widgetOptions?typeof this.widgetOptions.pannable=="object"?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable:!1}},{key:"init",value:function(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}},{key:"startListening",value:function(){var e=[],t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}},{key:"stopListening",value:function(){var e=[],t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}},{key:"onRightMouseDown",value:function(e){var t=this;e.button===2&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",function(){return t.updateClassName(!1)}))}},{key:"preparePanning",value:function(e){var t=this,i=e.e;this.widget&&(this.allowPanning(i,!0)||this.allowPanning(i)&&!this.graph.selection.allowRubberband(i,!0))&&(this.updateClassName(!0),this.widget.startPanning(i),this.widget.once("pan:stop",function(){return t.updateClassName(!1)}))}},{key:"allowPanning",value:function(e,t){return this.widget&&this.pannable&&Eh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"updateClassName",value:function(e){if(this.widget!=null){var t=this.widget.container,i=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(R.addClass(t,i),t.dataset.panning=(!!e).toString()):R.removeClass(t,i)}}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}},{key:"lock",value:function(){this.widget&&this.widget.lock()}},{key:"unlock",value:function(){this.widget&&this.widget.unlock()}},{key:"update",value:function(){this.widget&&this.widget.update()}},{key:"enableAutoResize",value:function(){this.widget&&this.widget.enableAutoResize()}},{key:"disableAutoResize",value:function(){this.widget&&this.widget.disableAutoResize()}},{key:"resize",value:function(e,t){this.widget&&this.widget.resize(e,t)}},{key:"dispose",value:function(){this.widget&&this.widget.dispose(),this.stopListening()}}]),r}(xa);Fz([xa.dispose()],yS.prototype,"dispose",null);var Bz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Gz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},bS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"commonOptions",get:function(){var e=this.instanceOptions,t=e.enabled,i=Gz(e,["enabled"]);return i}},{key:"instanceOptions",get:function(){return this.options.clipboard}},{key:"cells",get:function(){return this.widget.cells}},{key:"disabled",get:function(){return this.instanceOptions.enabled!==!0}},{key:"init",value:function(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}},{key:"enable",value:function(){this.disabled&&(this.instanceOptions.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.instanceOptions.enabled=!1)}},{key:"copy",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||(this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}},{key:"cut",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||(this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}},{key:"paste",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.graph;return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}},{key:"clean",value:function(e){(!this.disabled||e)&&(this.widget.clean(),this.graph.trigger("clipboard:changed",{cells:[]}))}},{key:"isEmpty",value:function(){return this.widget.isEmpty()}},{key:"dispose",value:function(){this.clean(!0)}}]),r}(xa);Bz([xa.dispose()],bS.prototype,"dispose",null);var zz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},_1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.highlights={},n}return Object(pe.a)(r,[{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"stopListening",value:function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"onCellHighlight",value:function(e){var t=e.view,i=e.magnet,s=e.options,u=s===void 0?{}:s,l=this.resolveHighlighter(u);if(!!l){var c=this.getHighlighterId(i,l);if(!this.highlights[c]){var f=l.highlighter;f.highlight(t,i,Object.assign({},l.args)),this.highlights[c]={cellView:t,magnet:i,highlighter:f,args:l.args}}}}},{key:"onCellUnhighlight",value:function(e){var t=e.magnet,i=e.options,s=i===void 0?{}:i,u=this.resolveHighlighter(s);if(!!u){var l=this.getHighlighterId(t,u);this.unhighlight(l)}}},{key:"resolveHighlighter",value:function(e){var t=this.options,i=e.highlighter;if(i==null){var s=e.type;i=s&&t.highlighting[s]||t.highlighting.default}if(i==null)return null;var u=typeof i=="string"?{name:i}:i,l=u.name,c=Tf.registry.get(l);return c==null?Tf.registry.onNotFound(l):(Tf.check(l,c),{name:l,highlighter:c,args:u.args||{}})}},{key:"getHighlighterId",value:function(e,t){return R.ensureId(e),t.name+e.id+JSON.stringify(t.args)}},{key:"unhighlight",value:function(e){var t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}},{key:"dispose",value:function(){var e=this;Object.keys(this.highlights).forEach(function(t){return e.unhighlight(t)}),this.stopListening()}}]),r}(xa);zz([_1.dispose()],_1.prototype,"dispose",null);var Uz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},F1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.widgets=new Map,n}return Object(pe.a)(r,[{key:"container",get:function(){return this.graph.view.container}},{key:"viewport",get:function(){return this.graph.view.viewport}},{key:"isSelectionEnabled",get:function(){return this.options.selecting.enabled===!0}},{key:"init",value:function(){this.startListening(),this.resize()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var i=this.graph.hook.createTransform(t,{clearAll:!0});i&&this.widgets.set(t,i)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var i=this.graph.hook.createTransform(t,{clearAll:!1});i&&this.widgets.set(t,i)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var i=this.widgets.get(t);i&&i.dispose(),this.widgets.delete(t)}}},{key:"getMatrix",value:function(){var e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),R.createSVGMatrix(this.viewportMatrix)}},{key:"setMatrix",value:function(e){var t=R.createSVGMatrix(e),i=R.matrixToTransformString(t);this.viewport.setAttribute("transform",i),this.viewportMatrix=t,this.viewportTransformString=i}},{key:"resize",value:function(e,t){var i=e===void 0?this.options.width:e,s=t===void 0?this.options.height:t;this.options.width=i,this.options.height=s,typeof i=="number"&&(i=Math.round(i)),typeof s=="number"&&(s=Math.round(s)),this.container.style.width=i==null?"":"".concat(i,"px"),this.container.style.height=s==null?"":"".concat(s,"px");var u=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},u)),this}},{key:"getComputedSize",value:function(){var e=this.options.width,t=this.options.height;return P.isNumber(e)||(e=this.container.clientWidth),P.isNumber(t)||(t=this.container.clientHeight),{width:e,height:t}}},{key:"getScale",value:function(){return R.matrixToScale(this.getMatrix())}},{key:"scale",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(e=this.clampScale(e),t=this.clampScale(t),i||s){var l=this.getTranslation(),c=l.tx-i*(e-1),f=l.ty-s*(t-1);(c!==l.tx||f!==l.ty)&&this.translate(c,f)}var d=this.getMatrix();return d.a=e,d.d=t,this.setMatrix(d),this.graph.trigger("scale",Object.assign({sx:e,sy:t,ox:i,oy:s},u)),this}},{key:"clampScale",value:function(e){var t=this.graph.options.scaling;return P.clamp(e,t.min||.01,t.max||16)}},{key:"getZoom",value:function(){return this.getScale().sx}},{key:"zoom",value:function(e,t){t=t||{};var i=e,s=e,u=this.getScale(),l=this.getComputedSize(),c=l.width/2,f=l.height/2;if(t.absolute||(i+=u.sx,s+=u.sy),t.scaleGrid&&(i=Math.round(i/t.scaleGrid)*t.scaleGrid,s=Math.round(s/t.scaleGrid)*t.scaleGrid),t.maxScale&&(i=Math.min(t.maxScale,i),s=Math.min(t.maxScale,s)),t.minScale&&(i=Math.max(t.minScale,i),s=Math.max(t.minScale,s)),t.center&&(c=t.center.x,f=t.center.y),i=this.clampScale(i),s=this.clampScale(s),c||f){var d=this.getTranslation(),h=c-(c-d.tx)*(i/u.sx),p=f-(f-d.ty)*(s/u.sy);(h!==d.tx||p!==d.ty)&&this.translate(h,p,{ui:t.ui})}return this.scale(i,s,0,0,{ui:t.ui}),this}},{key:"getRotation",value:function(){return R.matrixToRotation(this.getMatrix())}},{key:"rotate",value:function(e,t,i){if(t==null||i==null){var s=R.getBBox(this.graph.view.stage);t=s.width/2,i=s.height/2}var u=this.getMatrix().translate(t,i).rotate(e).translate(-t,-i);return this.setMatrix(u),this}},{key:"getTranslation",value:function(){return R.matrixToTranslation(this.getMatrix())}},{key:"translate",value:function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getMatrix();s.e=e||0,s.f=t||0,this.setMatrix(s);var u=this.getTranslation();return this.options.x=u.tx,this.options.y=u.ty,this.graph.trigger("translate",Object.assign(Object.assign({},u),i)),this}},{key:"setOrigin",value:function(e,t){return this.translate(e||0,t||0)}},{key:"fitToContent",value:function(e,t,i,s){if(typeof e=="object"){var u=e;e=u.gridWidth||1,t=u.gridHeight||1,i=u.padding||0,s=u}else e=e||1,t=t||1,i=i||0,s==null&&(s={});var l=P.normalizeSides(i),c=s.border||0,f=s.contentArea?fr.create(s.contentArea):this.getContentArea(s);c>0&&f.inflate(c);var d=this.getScale(),h=this.getTranslation(),p=d.sx,m=d.sy;f.x*=p,f.y*=m,f.width*=p,f.height*=m;var b=Math.max(Math.ceil((f.width+f.x)/e),1)*e,E=Math.max(Math.ceil((f.height+f.y)/t),1)*t,x=0,O=0;(s.allowNewOrigin==="negative"&&f.x<0||s.allowNewOrigin==="positive"&&f.x>=0||s.allowNewOrigin==="any")&&(x=Math.ceil(-f.x/e)*e,x+=l.left,b+=x),(s.allowNewOrigin==="negative"&&f.y<0||s.allowNewOrigin==="positive"&&f.y>=0||s.allowNewOrigin==="any")&&(O=Math.ceil(-f.y/t)*t,O+=l.top,E+=O),b+=l.right,E+=l.bottom,b=Math.max(b,s.minWidth||0),E=Math.max(E,s.minHeight||0),b=Math.min(b,s.maxWidth||Number.MAX_SAFE_INTEGER),E=Math.min(E,s.maxHeight||Number.MAX_SAFE_INTEGER);var D=this.getComputedSize(),I=b!==D.width||E!==D.height,F=x!==h.tx||O!==h.ty;return F&&this.translate(x,O),I&&this.resize(b,E),new fr(-x/p,-O/m,b/p,E/m)}},{key:"scaleContentToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.scaleContentToFitImpl(e)}},{key:"scaleContentToFitImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i,s;if(e.contentArea){var u=e.contentArea;i=this.graph.localToGraph(u),s=gt.create(u)}else i=this.getContentBBox(e),s=this.graph.graphToLocal(i);if(!(!i.width||!i.height)){var l=P.normalizeSides(e.padding),c=e.minScale||0,f=e.maxScale||Number.MAX_SAFE_INTEGER,d=e.minScaleX||c,h=e.maxScaleX||f,p=e.minScaleY||c,m=e.maxScaleY||f,b;if(e.viewportArea)b=e.viewportArea;else{var E=this.getComputedSize(),x=this.getTranslation();b={x:x.tx,y:x.ty,width:E.width,height:E.height}}b=fr.create(b).moveAndExpand({x:l.left,y:l.top,width:-l.left-l.right,height:-l.top-l.bottom});var O=this.getScale(),D=b.width/i.width*O.sx,I=b.height/i.height*O.sy;e.preserveAspectRatio!==!1&&(D=I=Math.min(D,I));var F=e.scaleGrid;if(F&&(D=F*Math.floor(D/F),I=F*Math.floor(I/F)),D=P.clamp(D,d,h),I=P.clamp(I,p,m),this.scale(D,I),t){var H=this.options,$=b.x-s.x*D-H.x,se=b.y-s.y*I-H.y;this.translate($,se)}}}},{key:"getContentArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.useCellGeometry?this.model.getAllCellsBBox()||new fr:R.getBBox(this.graph.view.stage)}},{key:"getContentBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.graph.localToGraph(this.getContentArea(e))}},{key:"getGraphArea",value:function(){var e=fr.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=fr.create(e),s=this.graph;t.contentArea=i,t.viewportArea==null&&(t.viewportArea={x:s.options.x,y:s.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);var u=i.getCenter();return this.centerPoint(u.x,u.y),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.getContentArea(e),e)}},{key:"centerPoint",value:function(e,t){var i=this.getComputedSize(),s=this.getScale(),u=this.getTranslation(),l=i.width/2,c=i.height/2;e=typeof e=="number"?e:l,t=typeof t=="number"?t:c,e=l-e*s.sx,t=c-t*s.sy,(u.tx!==e||u.ty!==t)&&this.translate(e,t)}},{key:"centerContent",value:function(e){var t=this.graph.getContentArea(e),i=t.getCenter();this.centerPoint(i.x,i.y)}},{key:"centerCell",value:function(e){return this.positionCell(e,"center")}},{key:"positionPoint",value:function(e,t,i){var s=this.getComputedSize();t=P.normalizePercentage(t,Math.max(0,s.width)),t<0&&(t=s.width+t),i=P.normalizePercentage(i,Math.max(0,s.height)),i<0&&(i=s.height+i);var u=this.getTranslation(),l=this.getScale(),c=t-e.x*l.sx,f=i-e.y*l.sy;(u.tx!==c||u.ty!==f)&&this.translate(c,f)}},{key:"positionRect",value:function(e,t){var i=fr.create(e);switch(t){case"center":return this.positionPoint(i.getCenter(),"50%","50%");case"top":return this.positionPoint(i.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(i.getTopRight(),"100%",0);case"right":return this.positionPoint(i.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(i.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(i.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(i.getBottomLeft(),0,"100%");case"left":return this.positionPoint(i.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(i.getTopLeft(),0,0);default:return this}}},{key:"positionCell",value:function(e,t){var i=e.getBBox();return this.positionRect(i,t)}},{key:"positionContent",value:function(e,t){var i=this.graph.getContentArea(t);return this.positionRect(i,e)}},{key:"dispose",value:function(){this.widgets.forEach(function(e){return e.dispose()}),this.widgets.clear(),this.stopListening()}}]),r}(xa);Uz([F1.dispose()],F1.prototype,"dispose",null);var Vz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},CS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.movedMap=new WeakMap,n.unselectMap=new WeakMap,n}return Object(pe.a)(r,[{key:"widgetOptions",get:function(){return this.options.selecting}},{key:"rubberbandDisabled",get:function(){return this.widgetOptions.enabled!==!0||this.widgetOptions.rubberband!==!0}},{key:"disabled",get:function(){return this.widgetOptions.enabled!==!0}},{key:"length",get:function(){return this.widget.length}},{key:"cells",get:function(){return this.widget.cells}},{key:"init",value:function(){this.widget=this.graph.hook.createSelection(),this.startListening()}},{key:"startListening",value:function(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}},{key:"stopListening",value:function(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}},{key:"onBlankMouseDown",value:function(e){var t=e.e;(this.allowRubberband(t,!0)||this.allowRubberband(t)&&!this.graph.scroller.allowPanning(t,!0)&&!this.graph.panning.allowPanning(t,!0))&&this.startRubberband(t)}},{key:"onBlankClick",value:function(){this.clean()}},{key:"allowRubberband",value:function(e,t){return!this.rubberbandDisabled&&Eh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}},{key:"allowMultipleSelection",value:function(e){return this.isMultiple()&&Eh.isMatch(e,this.widgetOptions.multipleSelectionModifiers)}},{key:"onCellMouseMove",value:function(e){var t=e.cell;this.movedMap.set(t,!0)}},{key:"onCellMouseUp",value:function(e){var t=e.e,i=e.cell,s=this.widgetOptions,u=this.disabled;!u&&this.movedMap.has(i)&&(u=s.selectCellOnMoved===!1,u||(u=s.selectNodeOnMoved===!1&&i.isNode()),u||(u=s.selectEdgeOnMoved===!1&&i.isEdge())),u||(this.allowMultipleSelection(t)?this.unselectMap.has(i)?this.unselectMap.delete(i):this.isSelected(i)?this.unselect(i):this.select(i):this.reset(i)),this.movedMap.delete(i)}},{key:"onBoxMouseDown",value:function(e){var t=e.e,i=e.cell;this.disabled||this.allowMultipleSelection(t)&&(this.unselect(i),this.unselectMap.set(i,!0))}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.widget.isSelected(e)}},{key:"getCells",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(i){return typeof i=="string"?t.graph.getCellById(i):i}).filter(function(i){return i!=null})}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getCells(e);return i.length&&(this.isMultiple()?this.widget.select(i,t):this.reset(i.slice(0,1),t)),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.unselect(this.getCells(e),t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.reset(e?this.getCells(e):[],t),this}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.widget.clean(e),this}},{key:"enable",value:function(){return this.disabled&&(this.widgetOptions.enabled=!0),this}},{key:"disable",value:function(){return this.disabled||(this.widgetOptions.enabled=!1),this}},{key:"startRubberband",value:function(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}},{key:"enableRubberband",value:function(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}},{key:"disableRubberband",value:function(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}},{key:"isMultiple",value:function(){return this.widgetOptions.multiple!==!1}},{key:"enableMultiple",value:function(){return this.widgetOptions.multiple=!0,this}},{key:"disableMultiple",value:function(){return this.widgetOptions.multiple=!1,this}},{key:"setModifiers",value:function(e){return this.widgetOptions.modifiers=e,this}},{key:"setContent",value:function(e){return this.widget.setContent(e),this}},{key:"setFilter",value:function(e){return this.widget.setFilter(e),this}},{key:"dispose",value:function(){this.stopListening(),this.widget.dispose()}}]),r}(xa);Vz([xa.dispose()],CS.prototype,"dispose",null);var Pk=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Hz=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},v0=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.batchCommands=null,e.batchLevel=0,e.lastBatchIndex=-1,e.freezed=!1,e.handlers=[],e.graph=n.graph,e.model=n.graph.model,e.options=wo.getOptions(n),e.validator=new r.Validator({history:Object(Co.a)(e),cancelInvalid:e.options.cancelInvalid}),e.clean(),e.startListening(),e}return Object(pe.a)(r,[{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1)}},{key:"undo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}},{key:"redo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}},{key:"cancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}},{key:"canUndo",value:function(){return!this.disabled&&this.undoStack.length>0}},{key:"canRedo",value:function(){return!this.disabled&&this.redoStack.length>0}},{key:"validate",value:function(e){for(var t,i=arguments.length,s=new Array(i>1?i-1:0),u=1;u<i;u++)s[u-1]=arguments[u];return(t=this.validator).validate.apply(t,[e].concat(s)),this}},{key:"dispose",value:function(){this.validator.dispose(),this.clean(),this.stopListening()}},{key:"startListening",value:function(){var e=this;this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(function(t,i){e.handlers[i]=e.addCommand.bind(e,t),e.model.on(t,e.handlers[i])}),this.validator.on("invalid",function(t){return e.trigger("invalid",t)})}},{key:"stopListening",value:function(){var e=this;this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(function(t,i){e.model.off(t,e.handlers[i])}),this.handlers.length=0),this.validator.off("invalid")}},{key:"createCommand",value:function(e){return{batch:e?e.batch:!1,data:{}}}},{key:"revertCommand",value:function(e,t){this.freezed=!0;for(var i=Array.isArray(e)?wo.sortBatchCommands(e):[e],s=i.length-1;s>=0;s-=1){var u=i[s],l=Object.assign(Object.assign({},t),C.pick(u.options,this.options.revertOptionsList||[]));this.executeCommand(u,!0,l)}this.freezed=!1}},{key:"applyCommand",value:function(e,t){this.freezed=!0;for(var i=Array.isArray(e)?wo.sortBatchCommands(e):[e],s=0;s<i.length;s+=1){var u=i[s],l=Object.assign(Object.assign({},t),C.pick(u.options,this.options.applyOptionsList||[]));this.executeCommand(u,!1,l)}this.freezed=!1}},{key:"executeCommand",value:function(e,t,i){var s=this.model,u=s.getCell(e.data.id),l=e.event;if(wo.isAddEvent(l)&&t||wo.isRemoveEvent(l)&&!t)u&&u.remove(i);else if(wo.isAddEvent(l)&&!t||wo.isRemoveEvent(l)&&t){var c=e.data;c.node?s.addNode(c.props,i):c.edge&&s.addEdge(c.props,i)}else if(wo.isChangeEvent(l)){var f=e.data,d=f.key;if(d&&u){var h=t?f.prev[d]:f.next[d];u.prop(d,h,i)}}else{var p=this.options.executeCommand;p&&N.call(p,this,e,t,i)}}},{key:"addCommand",value:function(e,t){if(!(this.freezed||this.disabled)){var i=t,s=i.options||{};if(!s.dryrun&&!(wo.isAddEvent(e)&&this.options.ignoreAdd||wo.isRemoveEvent(e)&&this.options.ignoreRemove||wo.isChangeEvent(e)&&this.options.ignoreChange)){var u=this.options.beforeAddCommand;if(!(u!=null&&N.call(u,this,e,t)===!1)){e==="cell:change:*"&&(e="cell:change:".concat(i.key));var l=i.cell,c=yl.isModel(l),f;if(this.batchCommands){f=this.batchCommands[Math.max(this.lastBatchIndex,0)];var d=c&&!f.modelChange||f.data.id!==l.id,h=f.event!==e;if(this.lastBatchIndex>=0&&(d||h)){var p=this.batchCommands.findIndex(function(O){return(c&&O.modelChange||O.data.id===l.id)&&O.event===e});p<0||wo.isAddEvent(e)||wo.isRemoveEvent(e)?f=this.createCommand({batch:!0}):(f=this.batchCommands[p],this.batchCommands.splice(p,1)),this.batchCommands.push(f),this.lastBatchIndex=this.batchCommands.length-1}}else f=this.createCommand({batch:!1});if(wo.isAddEvent(e)||wo.isRemoveEvent(e)){var m=f.data;return f.event=e,f.options=s,m.id=l.id,m.props=C.cloneDeep(l.toJSON()),l.isEdge()?m.edge=!0:l.isNode()&&(m.node=!0),this.push(f,s)}if(wo.isChangeEvent(e)){var b=t.key,E=f.data;return(!f.batch||!f.event)&&(f.event=e,f.options=s,E.key=b,E.prev==null&&(E.prev={}),E.prev[b]=C.clone(l.previous(b)),c?f.modelChange=!0:E.id=l.id),E.next==null&&(E.next={}),E.next[b]=C.clone(l.prop(b)),this.push(f,s)}var x=this.options.afterAddCommand;x&&N.call(x,this,e,t,f),this.push(f,s)}}}}},{key:"initBatchCommand",value:function(e){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}},{key:"storeBatchCommand",value:function(e){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){var t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.consolidateCommands(),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}},{key:"filterBatchCommand",value:function(e){for(var t=e.slice(),i=[],s=function(){var c=t.shift(),f=c.event,d=c.data.id;if(f!=null&&(d!=null||c.modelChange)){if(wo.isAddEvent(f)){var h=t.findIndex(function(b){return wo.isRemoveEvent(b.event)&&b.data.id===d});if(h>=0)return t=t.filter(function(b,E){return h<E||b.data.id!==d}),"continue"}else if(wo.isRemoveEvent(f)){var p=t.findIndex(function(b){return wo.isAddEvent(b.event)&&b.data.id===d});if(p>=0)return t.splice(p,1),"continue"}else if(wo.isChangeEvent(f)){var m=c.data;if(C.isEqual(m.prev,m.next))return"continue"}i.push(c)}};t.length>0;)var u=s();return i}},{key:"notify",value:function(e,t,i){var s=t==null?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:s,options:i}),this.emit("change",{cmds:s,options:i})}},{key:"push",value:function(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.consolidateCommands(),this.notify("add",e,t))}},{key:"consolidateCommands",value:function(){var e,t=this.undoStack[this.undoStack.length-1],i=this.undoStack[this.undoStack.length-2];if(!!Array.isArray(t)){var s=new Set(t.map(function(l){return l.event}));if(!(s.size!==2||!s.has("cell:change:parent")||!s.has("cell:change:children"))&&!!t.every(function(l){var c;return l.batch&&((c=l.options)===null||c===void 0?void 0:c.ui)})&&!(!Array.isArray(i)||i.length!==1)){var u=i[0];u.event!=="cell:change:position"||!((e=u.options)===null||e===void 0?void 0:e.ui)||(i.push.apply(i,Object(ot.a)(t)),this.undoStack.pop())}}}}]),r}(Ls);Pk([Ls.dispose()],v0.prototype,"dispose",null),function(o){var a=function(r){Object($n.a)(e,r);var n=Object(Xn.a)(e);function e(t){var i;return Object(Ie.a)(this,e),i=n.call(this),i.map={},i.command=t.history,i.cancelInvalid=t.cancelInvalid!==!1,i.command.on("add",i.onCommandAdded,Object(Co.a)(i)),i}return Object(pe.a)(e,[{key:"onCommandAdded",value:function(i){var s=this,u=i.cmds;return Array.isArray(u)?u.every(function(l){return s.isValidCommand(l)}):this.isValidCommand(u)}},{key:"isValidCommand",value:function(i){if(i.options&&i.options.validation===!1)return!0;var s=i.event&&this.map[i.event]||[],u=null;return s.forEach(function(l){var c=0,f=function d(h){var p=l[c];c+=1;try{if(p)p(h,i,d);else{u=h;return}}catch(m){d(m)}};f(u)}),u?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:u}),!1):!0}},{key:"validate",value:function(i){for(var s=this,u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];var f=Array.isArray(i)?i:i.split(/\s+/);return l.forEach(function(d){if(typeof d!="function")throw new Error("".concat(f.join(" ")," requires callback functions."))}),f.forEach(function(d){s.map[d]==null&&(s.map[d]=[]),s.map[d].push(l)}),this}},{key:"dispose",value:function(){this.command.off("add",this.onCommandAdded,this)}}]),e}(Ls);Pk([Ls.dispose()],a.prototype,"dispose",null),o.Validator=a}(v0||(v0={}));var wo;(function(o){function a(i){return i==="cell:added"}o.isAddEvent=a;function r(i){return i==="cell:removed"}o.isRemoveEvent=r;function n(i){return i!=null&&i.startsWith("cell:change:")}o.isChangeEvent=n;function e(i){var s=i.graph,u=Hz(i,["graph"]),l=["cell:added","cell:removed","cell:change:*"],c=["batch:start","batch:stop"],f=i.eventNames?i.eventNames.filter(function(d){return!(o.isChangeEvent(d)||l.includes(d)||c.includes(d))}):l;return Object.assign(Object.assign({},u),{eventNames:f,applyOptionsList:i.applyOptionsList||["propertyPath"],revertOptionsList:i.revertOptionsList||["propertyPath"]})}o.getOptions=e;function t(i){for(var s=[],u=0,l=i.length;u<l;u+=1){var c=i[u],f=null;if(o.isAddEvent(c.event)){for(var d=c.data.id,h=0;h<u;h+=1)if(i[h].data.id===d){f=h;break}}f!==null?s.splice(f,0,c):s.push(c)}return s}o.sortBatchCommands=t})(wo||(wo={}));var Wz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},ES=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"widgetOptions",get:function(){return this.options.minimap}},{key:"init",value:function(){this.widget=this.graph.hook.createMiniMap()}},{key:"dispose",value:function(){this.widget&&this.widget.dispose()}}]),r}(xa);Wz([xa.dispose()],ES.prototype,"dispose",null);var $z=v("imBb"),Xz=v.n($z),Kz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},g0=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;Object(Ie.a)(this,r),e=a.call(this),e.options=n;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,n.global?e.target=document:(e.target=e.container,e.disabled||e.target.setAttribute("tabindex","-1"),e.graph.on("cell:mouseup",e.focus,Object(Co.a)(e)),e.graph.on("blank:mouseup",e.focus,Object(Co.a)(e))),e.mousetrap=r.createMousetrap(Object(Co.a)(e)),e}return Object(pe.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"on",value:function(e,t,i){this.mousetrap.bind(this.getKeys(e),t,i)}},{key:"off",value:function(e,t){this.mousetrap.unbind(this.getKeys(e),t)}},{key:"focus",value:function(e){var t=this.isInputEvent(e.e);if(!t){var i=this.target;i.focus({preventScroll:!0})}}},{key:"getKeys",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(i){return t.formatkey(i)})}},{key:"formatkey",value:function(e){var t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),i=this.options.format;return i?N.call(i,this.graph,t):t}},{key:"isGraphEvent",value:function(e){var t=e.srcElement||e.target,i=e.currentTarget;return t?t===this.target||i===this.target||t===document.body?!0:R.contains(this.container,t):!1}},{key:"isInputEvent",value:function(e){var t,i=e.target,s=(t=i==null?void 0:i.tagName)===null||t===void 0?void 0:t.toLowerCase();return["input","textarea"].includes(s)}},{key:"isEnabledForEvent",value:function(e){var t=!this.disabled&&this.isGraphEvent(e),i=this.isInputEvent(e);if(t){var s=e.keyCode||e.which;if(i&&(s===8||s===46))return!1;if(this.options.guard)return N.call(this.options.guard,this.graph,e)}return t}},{key:"dispose",value:function(){this.mousetrap.reset()}}]),r}(Nc);Kz([Nc.dispose()],g0.prototype,"dispose",null),function(o){function a(r){var n=new Xz.a(r.target),e=n.stopCallback;return n.stopCallback=function(t,i,s){return r.isEnabledForEvent(t)?e?e.call(n,t,i,s):!1:!0},n}o.createMousetrap=a}(g0||(g0={}));var Yz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},wS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;Object(Ie.a)(this,r),e=a.call(this),e.options=n,e.cumulatedFactor=1;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,e.target=e.options.global?document:e.container,e.mousewheelHandle=new R.MouseWheelHandle(e.target,e.onMouseWheel.bind(Object(Co.a)(e)),e.allowMouseWheel.bind(Object(Co.a)(e))),e.options.enabled&&e.enable(!0),e}return Object(pe.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}},{key:"allowMouseWheel",value:function(e){var t=e.originalEvent||e,i=this.options.guard;return(i==null||i.call(this.graph,t))&&Eh.isMatch(t,this.options.modifiers)}},{key:"onMouseWheel",value:function(e){var t=e.originalEvent||e,i=this.options.guard;if((i==null||i.call(this.graph,t))&&Eh.isMatch(t,this.options.modifiers)){var s=this.options.factor||1.2;this.currentScale==null&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx);var u=e.deltaY;u<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*s*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/s)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);var l=this.graph.scroller.widget,c=this.currentScale,f=this.graph.transform.clampScale(c*this.cumulatedFactor),d=this.options.minScale||Number.MIN_SAFE_INTEGER,h=this.options.maxScale||Number.MAX_SAFE_INTEGER;if(f=P.clamp(f,d,h),f!==c)if(l)if(this.options.zoomAtMousePosition){var p=this.graph.coord.clientToLocalPoint(this.startPos);l.zoom(f,{absolute:!0,center:p.clone()})}else l.zoom(f,{absolute:!0});else if(this.options.zoomAtMousePosition){var m=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(f,{absolute:!0,center:m.clone(),ui:!0})}else this.graph.transform.zoom(f,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}}},{key:"dispose",value:function(){this.disable()}}]),r}(Nc);Yz([Nc.dispose()],wS.prototype,"dispose",null);var Zz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},p0=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"show",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=Object.assign(Object.assign({},r.defaultOptions),t),s=this.createPrintPages(i);i.ready(s,function(u){return e.showPrintWindow(u,i)},{sheetSize:this.getSheetSize(i)})}},{key:"className",get:function(){return this.view.prefixClassName("graph-print")}},{key:"showPrintWindow",value:function(e,t){var i=this;if(e){var s=En()(document.body),u=En()(this.view.container),l=this.view.prefixClassName("graph-printing");s.addClass(l);var c=u.children().detach();e.forEach(function(h){h.removeClass("".concat(i.className,"-preview")).addClass("".concat(i.className,"-ready")).appendTo(s)});var f=!1,d=function h(){f||(f=!0,s.removeClass(l),e.forEach(function(p){return p.remove()}),u.append(c),En()("#".concat(i.styleSheetId)).remove(),i.graph.trigger("after:print",t),En()(window).off("afterprint",h))};En()(window).one("afterprint",d),setTimeout(d,200),window.print()}}},{key:"createPrintPage",value:function(e,t){this.graph.trigger("before:print",t);var i=En()("<div/>").addClass(this.className),s=En()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&i.addClass("".concat(this.className,"-size-").concat(t.size));var u=mi.create(this.view.svg).clone(),l=u.findOne(".".concat(this.view.prefixClassName("graph-svg-stage")));s.append(u.node);var c=this.getSheetSize(t),f=this.graph.transform.getGraphArea(),d=this.graph.transform.getScale(),h=this.graph.translate(),p=R.createSVGMatrix().translate(h.tx/d.sx,h.ty/d.sy),m=this.getPageInfo(f,e,c),b=m.scale,E=m.bbox;return s.css({left:0,top:0}),u.attr({width:E.width*b,height:E.height*b,style:"position:relative",viewBox:[E.x,E.y,E.width,E.height].join(" ")}),l.attr("transform",R.matrixToTransformString(p)),i.append(s),i.addClass("".concat(this.className,"-preview")),{$page:i,sheetSize:c}}},{key:"createPrintPages",value:function(e){var t=this,i,s=this.getPrintArea(e),u=[];if(e.page){var l=this.getPageSize(s,e.page),c=this.getPageAreas(s,l);c.forEach(function(d){i=t.createPrintPage(d,e),u.push(i.$page)})}else i=this.createPrintPage(s,e),u.push(i.$page);if(i){var f={width:i.sheetSize.cssWidth,height:i.sheetSize.cssHeight};this.updatePrintStyle(f,e)}return u}},{key:"styleSheetId",get:function(){return this.view.prefixClassName("graph-print-style")}},{key:"updatePrintStyle",value:function(e,t){var i=Object.keys(e).reduce(function(h,p){return"".concat(h," ").concat(p,":").concat(e[p],";")},""),s=P.normalizeSides(t.margin),u=t.marginUnit||"",l=t.sheetUnit||"",c=`
      @media print {
        .`.concat(this.className,".").concat(this.className,`-ready {
          `).concat(i,`
        }

        @page {
          margin:
          `).concat([s.top+u,s.right+u,s.bottom+u,s.left+u].join(" "),`;
          size: `).concat(t.sheet.width+l," ").concat(t.sheet.height+l,`;

        .`).concat(this.className,".").concat(this.className,`-preview {
          `).concat(i,`
        }
      }`),f=this.styleSheetId,d=En()("#".concat(f));d.length?d.html(c):En()("head").append(`'<style type="text/css" id="`.concat(f,'">').concat(c,"</style>'"))}},{key:"getPrintArea",value:function(e){var t=e.area;if(!t){var i=P.normalizeSides(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-i.left,y:-i.top,width:i.left+i.right,height:i.top+i.bottom})}return t}},{key:"getPageSize",value:function(e,t){if(typeof t=="object"){var i=t,s={width:i.width,height:i.height};return s.width==null&&(s.width=Math.ceil(e.width/(i.columns||1))),s.height==null&&(s.height=Math.ceil(e.height/(i.rows||1))),s}return{width:e.width,height:e.height}}},{key:"getPageAreas",value:function(e,t){for(var i=[],s=t.width,u=t.height,l=0,c=0;l<e.height&&c<200;l+=u,c+=1)for(var f=0,d=0;f<e.width&&d<200;f+=s,d+=1)i.push(new fr(e.x+f,e.y+l,s,u));return i}},{key:"getSheetSize",value:function(e){var t=e.sheet,i=P.normalizeSides(e.margin),s=e.marginUnit||"",u=e.sheetUnit||"",l="calc(".concat(t.width).concat(u," - ").concat(i.left+i.right).concat(s,")"),c="calc(".concat(t.height).concat(u," - ").concat(i.top+i.bottom).concat(s,")"),f=jO.measure(l,c);return{cssWidth:l,cssHeight:c,width:f.width,height:f.height}}},{key:"getPageInfo",value:function(e,t,i){var s=new fr(t.x-e.x,t.y-e.y,t.width,t.height),u=s.width/s.height,l=i.width/i.height;return{bbox:s,scale:l<u?i.width/s.width:i.height/s.height,fitHorizontal:l<u}}},{key:"dispose",value:function(){}}]),r}(xa);Zz([xa.dispose()],p0.prototype,"dispose",null),function(o){o.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:function(r,n){return n(r)}}}(p0||(p0={}));var kk=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"toSVG",value:function(e){var t=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.graph.trigger("before:export",i);var s=this.view.svg,u=mi.create(s).clone(),l=u.node,c=u.findOne(".".concat(this.view.prefixClassName("graph-svg-stage"))),f=i.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),d=i.preserveDimensions;if(d){var h=typeof d=="boolean"?f:d;u.attr({width:h.width,height:h.height})}if(u.removeAttribute("style").attr("viewBox",[f.x,f.y,f.width,f.height].join(" ")),c.removeAttribute("transform"),i.copyStyles!==!1){for(var p=s.ownerDocument,m=Array.from(s.querySelectorAll("*")),b=Array.from(l.querySelectorAll("*")),E=p.styleSheets.length,x=[],O=E-1;O>=0;O-=1)x[O]=p.styleSheets[O],p.styleSheets[O].disabled=!0;var D={};m.forEach(function(Ee,Oe){var $e=window.getComputedStyle(Ee,null),tt={};Object.keys($e).forEach(function(Le){tt[Le]=$e.getPropertyValue(Le)}),D[Oe]=tt}),E!==p.styleSheets.length&&x.forEach(function(Ee,Oe){p.styleSheets[Oe]=Ee});for(var I=0;I<E;I+=1)p.styleSheets[I].disabled=!1;var F={};m.forEach(function(Ee,Oe){var $e=window.getComputedStyle(Ee,null),tt=D[Oe],Le={};Object.keys($e).forEach(function(it){!P.isNumeric(it)&&$e.getPropertyValue(it)!==tt[it]&&(Le[it]=$e.getPropertyValue(it))}),F[Oe]=Le}),b.forEach(function(Ee,Oe){En()(Ee).css(F[Oe])})}var H=i.stylesheet;if(typeof H=="string"){var $=s.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(H);u.prepend(mi.create("style",{type:"text/css"},[$]))}var se=function(){var Oe=i.beforeSerialize;if(typeof Oe=="function"){var $e=N.call(Oe,t.graph,l);$e instanceof SVGSVGElement&&(l=$e)}var tt=new XMLSerializer().serializeToString(l).replace(/&nbsp;/g,"\xA0");t.graph.trigger("after:export",i),e(tt)};if(i.serializeImages){var de=u.find("image").map(function(Ee){return new Promise(function(Oe){var $e=Ee.attr("xlink:href")||Ee.attr("href");LO.imageToDataUri($e,function(tt,Le){!tt&&Le&&Ee.attr("xlink:href",Le),Oe()})})});Promise.all(de).then(se)}else se()}},{key:"toDataURL",value:function(e,t){var i=t.viewBox||this.graph.getContentBBox(),s=P.normalizeSides(t.padding);t.width&&t.height&&(s.left+s.right>=t.width&&(s.left=s.right=0),s.top+s.bottom>=t.height&&(s.top=s.bottom=0));var u=new fr(-s.left,-s.top,s.left+s.right,s.top+s.bottom);if(t.width&&t.height){var l=i.width+s.left+s.right,c=i.height+s.top+s.bottom;u.scale(l/t.width,c/t.height)}i=fr.create(i).moveAndExpand(u);var f=typeof t.width=="number"&&typeof t.height=="number"?{width:t.width,height:t.height}:i,d=t.ratio?parseFloat(t.ratio):1;(!Number.isFinite(d)||d===0)&&(d=1);var h={width:Math.max(Math.round(f.width*d),1),height:Math.max(Math.round(f.height*d),1)};{var p=document.createElement("canvas"),m=p.getContext("2d");p.width=h.width,p.height=h.height;var b=h.width-1,E=h.height-1;m.fillStyle="rgb(1,1,1)",m.fillRect(b,E,1,1);var x=m.getImageData(b,E,1,1).data;if(x[0]!==1||x[1]!==1||x[2]!==1)throw new Error("size exceeded")}var O=new Image;O.onload=function(){var D=document.createElement("canvas");D.width=h.width,D.height=h.height;var I=D.getContext("2d");I.fillStyle=t.backgroundColor||"white",I.fillRect(0,0,h.width,h.height);try{I.drawImage(O,0,0,h.width,h.height);var F=D.toDataURL(t.type,t.quality);e(F)}catch(H){}},this.toSVG(function(D){O.src="data:image/svg+xml,".concat(encodeURIComponent(D))},Object.assign(Object.assign({},t),{viewBox:i,serializeImages:!0,preserveDimensions:Object.assign({},h)}))}},{key:"toPNG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}},{key:"toJPEG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}]),r}(xa),Jz=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.widgets=new Map,n}return Object(pe.a)(r,[{key:"isSelectionEnabled",get:function(){return this.options.selecting.enabled===!0}},{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var i=this.graph.hook.createKnob(t,{clearAll:!0});i&&this.widgets.set(t,i)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var i=this.graph.hook.createKnob(t,{clearAll:!1});i&&this.widgets.set(t,i)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var i=this.widgets.get(t);i&&i.forEach(function(s){return s.dispose()}),this.widgets.delete(t)}}}]),r}(xa),Qz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Dk=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"widgetOptions",get:function(){return this.options.panning}},{key:"pannable",get:function(){return this.widgetOptions&&this.widgetOptions.enabled===!0}},{key:"init",value:function(){this.startListening(),this.updateClassName()}},{key:"startListening",value:function(){var e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new R.MouseWheelHandle(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}},{key:"stopListening",value:function(){var e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}},{key:"preparePanning",value:function(e){var t=e.e;(this.allowPanning(t,!0)||this.allowPanning(t)&&!this.graph.selection.allowRubberband(t,!0))&&this.startPanning(t)}},{key:"allowPanning",value:function(e,t){return this.pannable&&Eh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"startPanning",value:function(e){var t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.view.normalizeEvent(e),i=t.clientX-this.clientX,s=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY;var u=this.graph.transform.getTranslation(),l=u.tx+i,c=u.ty+s;this.graph.transform.translate(l,c,{ui:!0})}},{key:"stopPanning",value:function(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}},{key:"updateClassName",value:function(){var e=this.view.container,t=this.view.prefixClassName("graph-panning"),i=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(R.addClass(e,t),R.removeClass(e,i)):(R.removeClass(e,t),R.addClass(e,i)):(R.removeClass(e,t),R.removeClass(e,i))}},{key:"onRightMouseDown",value:function(e){e.button===2&&this.allowPanning(e,!0)&&this.startPanning(e)}},{key:"allowMouseWheel",value:function(e){return this.pannable&&!e.ctrlKey}},{key:"onMouseWheel",value:function(e,t,i){e.ctrlKey||this.graph.translateBy(-t,-i)}},{key:"autoPanning",value:function(e,t){var i=10,s=this.graph.getGraphArea(),u=0,l=0;e<=s.left+i&&(u=-i),t<=s.top+i&&(l=-i),e>=s.right-i&&(u=i),t>=s.bottom-i&&(l=i),(u!==0||l!==0)&&this.graph.translateBy(-u,-l)}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}},{key:"dispose",value:function(){this.stopListening()}}]),r}(xa);Qz([xa.dispose()],Dk.prototype,"dispose",null);var qz=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Ik=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"hasScroller",value:function(){return this.graph.scroller.widget!=null}},{key:"getContainer",value:function(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}},{key:"init",value:function(){var e=this,t=this.options.autoResize;if(t){var i=typeof t=="boolean"?this.getContainer():t;c1.bind(i,function(){var s=e.getContainer(),u=s.offsetWidth,l=s.offsetHeight;e.resize(u,l)})}}},{key:"resize",value:function(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}},{key:"resizeGraph",value:function(e,t){this.graph.transform.resize(e,t)}},{key:"resizeScroller",value:function(e,t){this.graph.scroller.resize(e,t)}},{key:"resizePage",value:function(e,t){var i=this.graph.scroller.widget;i&&i.updatePageSize(e,t)}},{key:"dispose",value:function(){c1.clear(this.getContainer())}}]),r}(xa);qz([xa.dispose()],Ik.prototype,"dispose",null);var zi=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},eU=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Ii;(function(o){function a(n,e){return function(t,i,s){var u=s.value,l=e||i;s.value=function(){for(var c=this.options[l],f=arguments.length,d=new Array(f),h=0;h<f;h++)d[h]=arguments[h];if(c!=null){this.getNativeValue=u.bind.apply(u,[this].concat(d));var p=N.call.apply(N,[c,this.graph].concat(d));if(this.getNativeValue=null,p!=null||n===!0&&p===null)return p}return u.call.apply(u,[this].concat(d))}}}o.hook=a;function r(n){return function(e,t,i){var s=i.value,u=n||t;i.value=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];var d=s.call.apply(s,[this].concat(c)),h=this.options[u];return h!=null&&(d=N.call.apply(N,[h,this.graph].concat(c))&&d),d}}}o.after=r})(Ii||(Ii={}));var Ri=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"createModel",value:function(){if(this.options.model)return this.options.model;var e=new yl;return e.graph=this.graph,e}},{key:"createView",value:function(){return new Ch(this.graph)}},{key:"createRenderer",value:function(){return new Fv(this.graph)}},{key:"createDefsManager",value:function(){return new Ak(this.graph)}},{key:"createGridManager",value:function(){return new pS(this.graph)}},{key:"createCoordManager",value:function(){return new Tk(this.graph)}},{key:"createKnobManager",value:function(){return new Jz(this.graph)}},{key:"createTransform",value:function(e,t){var i=this.getTransformOptions(e);return i.resizable||i.rotatable?new gS(Object.assign(Object.assign({node:e,graph:this.graph},i),t)):(i.clearAll&&gS.removeInstances(this.graph),null)}},{key:"createKnob",value:function(e,t){var i=this,s=jc.parseOptionGroup(this.graph,e,this.options.knob),u=Object.assign(Object.assign({},s),t);u.clearAll&&dS.removeInstances(this.graph),u.clearAll=!1;var l=e.prop("knob"),c=[],f=Array.isArray(l)?l:[l];return f.forEach(function(d,h){if(d){if(d.enabled===!1||typeof d.enabled=="function"&&d.enabled.call(i.graph,e)===!1)return}else return;s.enabled&&c.push(new dS(Object.assign({node:e,index:h,graph:i.graph},u)))}),c}},{key:"getTransformOptions",value:function(e){var t=jc.parseOptionGroup(this.graph,e,this.options.resizing),i=jc.parseOptionGroup(this.graph,e,this.options.rotating),s=jc.parseOptionGroup(this.graph,e,this.options.transforming),u=Object.assign(Object.assign({},s),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:t.restrict!=null?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:i.enabled,rotateGrid:i.grid});return u}},{key:"createTransformManager",value:function(){return new F1(this.graph)}},{key:"createHighlightManager",value:function(){return new _1(this.graph)}},{key:"createBackgroundManager",value:function(){return new L1(this.graph)}},{key:"createClipboard",value:function(){return new Rk}},{key:"createClipboardManager",value:function(){return new bS(this.graph)}},{key:"createSnapline",value:function(){return new vS(Object.assign({graph:this.graph},this.options.snapline))}},{key:"createSnaplineManager",value:function(){return new mS(this.graph)}},{key:"createSelection",value:function(){return new j1(Object.assign({graph:this.graph},this.options.selecting))}},{key:"createSelectionManager",value:function(){return new CS(this.graph)}},{key:"allowRubberband",value:function(e){return!0}},{key:"createHistoryManager",value:function(){return new v0(Object.assign({graph:this.graph},this.options.history))}},{key:"createScroller",value:function(){return this.options.scroller.enabled?new h0(Object.assign({graph:this.graph},this.options.scroller)):null}},{key:"createScrollerManager",value:function(){return new yS(this.graph)}},{key:"allowPanning",value:function(e){return!0}},{key:"createMiniMap",value:function(){var e=this.options.minimap,t=e.enabled,i=eU(e,["enabled"]);return t?new hS(Object.assign({graph:this.graph},i)):null}},{key:"createMiniMapManager",value:function(){return new ES(this.graph)}},{key:"createKeyboard",value:function(){return new g0(Object.assign({graph:this.graph},this.options.keyboard))}},{key:"createMouseWheel",value:function(){return new wS(Object.assign({graph:this.graph},this.options.mousewheel))}},{key:"createPrintManager",value:function(){return new p0(this.graph)}},{key:"createFormatManager",value:function(){return new kk(this.graph)}},{key:"createPanningManager",value:function(){return new Dk(this.graph)}},{key:"createSizeManager",value:function(){return new Ik(this.graph)}},{key:"allowConnectToBlank",value:function(e){var t=this.options.connecting,i=t.allowBlank!=null?t.allowBlank:t.dangling;if(typeof i!="function")return!!i;var s=this.graph.findViewByCell(e),u=e.getSourceCell(),l=e.getTargetCell(),c=this.graph.findViewByCell(u),f=this.graph.findViewByCell(l);return N.call(i,this.graph,{edge:e,edgeView:s,sourceCell:u,targetCell:l,sourceView:c,targetView:f,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:s.sourceMagnet,targetMagnet:s.targetMagnet})}},{key:"validateEdge",value:function(e,t,i){if(!this.allowConnectToBlank(e)){var s=e.getSourceCellId(),u=e.getTargetCellId();if(!(s&&u))return!1}var l=this.options.connecting.validateEdge;return l?N.call(l,this.graph,{edge:e,type:t,previous:i}):!0}},{key:"validateMagnet",value:function(e,t,i){if(t.getAttribute("magnet")!=="passive"){var s=this.options.connecting.validateMagnet;return s?N.call(s,this.graph,{e:i,magnet:t,view:e,cell:e.cell}):!0}return!1}},{key:"getDefaultEdge",value:function(e,t){var i,s=this.options.connecting.createEdge;return s&&(i=N.call(s,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),i==null&&(i=new fS),i}},{key:"validateConnection",value:function(e,t,i,s,u,l,c){var f=this,d=this.options.connecting,h=d.allowLoop,p=d.allowNode,m=d.allowEdge,b=d.allowPort,E=d.allowMulti!=null?d.allowMulti:d.multi,x=d.validateConnection,O=l?l.cell:null,D=u==="target"?i:e,I=u==="target"?s:t,F=!0,H=function(it){var It=u==="source"?c?c.port:null:O?O.getSourcePortId():null,tn=u==="target"?c?c.port:null:O?O.getTargetPortId():null;return N.call(it,f.graph,{edge:O,edgeView:l,sourceView:e,targetView:i,sourcePort:It,targetPort:tn,sourceMagnet:t,targetMagnet:s,sourceCell:e?e.cell:null,targetCell:i?i.cell:null,type:u})};if(h!=null&&(typeof h=="boolean"?!h&&e===i&&(F=!1):F=H(h)),F&&b!=null&&(typeof b=="boolean"?!b&&I&&(F=!1):F=H(b)),F&&m!=null&&(typeof m=="boolean"?!m&&jv.isEdgeView(D)&&(F=!1):F=H(m)),F&&p!=null&&I==null&&(typeof p=="boolean"?!p&&ss.isNodeView(D)&&(F=!1):F=H(p)),F&&E!=null&&l){var $=l.cell,se=u==="source"?c:$.getSource(),de=u==="target"?c:$.getTarget(),Ee=c?this.graph.getCellById(c.cell):null;if(se&&de&&se.cell&&de.cell&&Ee)if(typeof E=="function")F=H(E);else{var Oe=this.model.getConnectedEdges(Ee,{outgoing:u==="source",incoming:u==="target"});if(Oe.length){if(E==="withPort"){var $e=Oe.some(function(Le){var it=Le.getSource(),It=Le.getTarget();return it&&It&&it.cell===se.cell&&It.cell===de.cell&&it.port!=null&&it.port===se.port&&It.port!=null&&It.port===de.port});$e&&(F=!1)}else if(!E){var tt=Oe.some(function(Le){var it=Le.getSource(),It=Le.getTarget();return it&&It&&it.cell===se.cell&&It.cell===de.cell});tt&&(F=!1)}}}}return F&&x!=null&&(F=H(x)),F}},{key:"getRestrictArea",value:function(e){var t=this.options.translating.restrict,i=typeof t=="function"?N.call(t,this.graph,e):t;return typeof i=="number"?this.graph.transform.getGraphArea().inflate(i):i===!0?this.graph.transform.getGraphArea():i||null}},{key:"onViewUpdated",value:function(e,t,i){t&Fv.FLAG_INSERT||i.mounting||this.graph.renderer.requestConnectedEdgesUpdate(e,i)}},{key:"onViewPostponed",value:function(e,t,i){return this.graph.renderer.forcePostponedViewUpdate(e,t)}},{key:"getCellView",value:function(e){return null}},{key:"createCellView",value:function(e){var t={graph:this.graph},i=this.getCellView(e);if(i)return new i(e,t);var s=e.view;if(s!=null&&typeof s=="string"){var u=Eo.registry.get(s);return u?new u(e,t):Eo.registry.onNotFound(s)}return e.isNode()?new ss(e,t):e.isEdge()?new jv(e,t):null}},{key:"getHTMLComponent",value:function(e){var t=e.getHTML();return typeof t=="string"&&(t=Lc.componentRegistry.get(t)||t),C.isPlainObject(t)&&(t=t.render),typeof t=="function"?N.call(t,this.graph,e):t}},{key:"shouldUpdateHTMLComponent",value:function(e){var t=e.getHTML();if(typeof t=="string"&&(t=Lc.componentRegistry.get(t)||t),C.isPlainObject(t)){var i=t.shouldComponentUpdate;return typeof i=="function"?N.call(i,this.graph,e):!!i}return!1}},{key:"onEdgeLabelRendered",value:function(e){}},{key:"onPortRendered",value:function(e){}},{key:"onToolItemCreated",value:function(e){}}]),r}(xa);zi([Ii.hook()],Ri.prototype,"createModel",null),zi([Ii.hook()],Ri.prototype,"createView",null),zi([Ii.hook()],Ri.prototype,"createRenderer",null),zi([Ii.hook()],Ri.prototype,"createDefsManager",null),zi([Ii.hook()],Ri.prototype,"createGridManager",null),zi([Ii.hook()],Ri.prototype,"createCoordManager",null),zi([Ii.hook()],Ri.prototype,"createKnobManager",null),zi([Ii.hook()],Ri.prototype,"createTransform",null),zi([Ii.hook()],Ri.prototype,"createKnob",null),zi([Ii.hook()],Ri.prototype,"createTransformManager",null),zi([Ii.hook()],Ri.prototype,"createHighlightManager",null),zi([Ii.hook()],Ri.prototype,"createBackgroundManager",null),zi([Ii.hook()],Ri.prototype,"createClipboard",null),zi([Ii.hook()],Ri.prototype,"createClipboardManager",null),zi([Ii.hook()],Ri.prototype,"createSnapline",null),zi([Ii.hook()],Ri.prototype,"createSnaplineManager",null),zi([Ii.hook()],Ri.prototype,"createSelection",null),zi([Ii.hook()],Ri.prototype,"createSelectionManager",null),zi([Ii.hook()],Ri.prototype,"allowRubberband",null),zi([Ii.hook()],Ri.prototype,"createHistoryManager",null),zi([Ii.hook()],Ri.prototype,"createScroller",null),zi([Ii.hook()],Ri.prototype,"createScrollerManager",null),zi([Ii.hook()],Ri.prototype,"allowPanning",null),zi([Ii.hook()],Ri.prototype,"createMiniMap",null),zi([Ii.hook()],Ri.prototype,"createMiniMapManager",null),zi([Ii.hook()],Ri.prototype,"createKeyboard",null),zi([Ii.hook()],Ri.prototype,"createMouseWheel",null),zi([Ii.hook()],Ri.prototype,"createPrintManager",null),zi([Ii.hook()],Ri.prototype,"createFormatManager",null),zi([Ii.hook()],Ri.prototype,"createPanningManager",null),zi([Ii.hook()],Ri.prototype,"createSizeManager",null),zi([Ii.after()],Ri.prototype,"onViewUpdated",null),zi([Ii.after()],Ri.prototype,"onViewPostponed",null),zi([Ii.hook()],Ri.prototype,"getCellView",null),zi([Ii.hook(!0)],Ri.prototype,"createCellView",null),zi([Ii.hook()],Ri.prototype,"getHTMLComponent",null),zi([Ii.hook()],Ri.prototype,"shouldUpdateHTMLComponent",null),zi([Ii.hook()],Ri.prototype,"onEdgeLabelRendered",null),zi([Ii.hook()],Ri.prototype,"onPortRendered",null),zi([Ii.hook()],Ri.prototype,"onToolItemCreated",null);var _c=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},Wi=function(o,a){Object($n.a)(n,o);var r=Object(Xn.a)(n);function n(e){var t;return Object(Ie.a)(this,n),t=r.call(this),t.options=jc.get(e),t.css=new l0(Object(Co.a)(t)),t.hook=new Ri(Object(Co.a)(t)),t.view=t.hook.createView(),t.defs=t.hook.createDefsManager(),t.coord=t.hook.createCoordManager(),t.transform=t.hook.createTransformManager(),t.knob=t.hook.createKnobManager(),t.highlight=t.hook.createHighlightManager(),t.grid=t.hook.createGridManager(),t.background=t.hook.createBackgroundManager(),t.model=t.hook.createModel(),t.renderer=t.hook.createRenderer(),t.clipboard=t.hook.createClipboardManager(),t.snapline=t.hook.createSnaplineManager(),t.selection=t.hook.createSelectionManager(),t.history=t.hook.createHistoryManager(),t.scroller=t.hook.createScrollerManager(),t.minimap=t.hook.createMiniMapManager(),t.keyboard=t.hook.createKeyboard(),t.mousewheel=t.hook.createMouseWheel(),t.print=t.hook.createPrintManager(),t.format=t.hook.createFormatManager(),t.panning=t.hook.createPanningManager(),t.size=t.hook.createSizeManager(),t}return Object(pe.a)(n,[{key:"container",get:function(){return this.view.container}},{key:a,get:function(){return n.toStringTag}},{key:"isNode",value:function(t){return t.isNode()}},{key:"isEdge",value:function(t){return t.isEdge()}},{key:"resetCells",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.resetCells(t,i),this}},{key:"clearCells",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.clear(t),this}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.toJSON(t)}},{key:"parseJSON",value:function(t){return this.model.parseJSON(t)}},{key:"fromJSON",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.fromJSON(t,i),this}},{key:"getCellById",value:function(t){return this.model.getCell(t)}},{key:"addNode",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addNode(t,i)}},{key:"addNodes",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addCell(t.map(function(u){return wa.isNode(u)?u:i.createNode(u)}),s)}},{key:"createNode",value:function(t){return this.model.createNode(t)}},{key:"removeNode",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(t,i)}},{key:"addEdge",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addEdge(t,i)}},{key:"addEdges",value:function(t){var i=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addCell(t.map(function(u){return eo.isEdge(u)?u:i.createEdge(u)}),s)}},{key:"removeEdge",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(t,i)}},{key:"createEdge",value:function(t){return this.model.createEdge(t)}},{key:"addCell",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addCell(t,i),this}},{key:"removeCell",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(t,i)}},{key:"removeCells",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCells(t,i)}},{key:"removeConnectedEdges",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeConnectedEdges(t,i)}},{key:"disconnectConnectedEdges",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.disconnectConnectedEdges(t,i),this}},{key:"hasCell",value:function(t){return this.model.has(t)}},{key:"getCell",value:function(t){return this.model.getCell(t)}},{key:"getCells",value:function(){return this.model.getCells()}},{key:"getCellCount",value:function(){return this.model.total()}},{key:"getNodes",value:function(){return this.model.getNodes()}},{key:"getEdges",value:function(){return this.model.getEdges()}},{key:"getOutgoingEdges",value:function(t){return this.model.getOutgoingEdges(t)}},{key:"getIncomingEdges",value:function(t){return this.model.getIncomingEdges(t)}},{key:"getConnectedEdges",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getConnectedEdges(t,i)}},{key:"getRootNodes",value:function(){return this.model.getRoots()}},{key:"getLeafNodes",value:function(){return this.model.getLeafs()}},{key:"isRootNode",value:function(t){return this.model.isRoot(t)}},{key:"isLeafNode",value:function(t){return this.model.isLeaf(t)}},{key:"getNeighbors",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNeighbors(t,i)}},{key:"isNeighbor",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isNeighbor(t,i,s)}},{key:"getSuccessors",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSuccessors(t,i)}},{key:"isSuccessor",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isSuccessor(t,i,s)}},{key:"getPredecessors",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getPredecessors(t,i)}},{key:"isPredecessor",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isPredecessor(t,i,s)}},{key:"getCommonAncestor",value:function(){var t;return(t=this.model).getCommonAncestor.apply(t,arguments)}},{key:"getSubGraph",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSubGraph(t,i)}},{key:"cloneSubGraph",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.cloneSubGraph(t,i)}},{key:"cloneCells",value:function(t){return this.model.cloneCells(t)}},{key:"getNodesFromPoint",value:function(t,i){return this.model.getNodesFromPoint(t,i)}},{key:"getNodesInArea",value:function(t,i,s,u,l){return this.model.getNodesInArea(t,i,s,u,l)}},{key:"getNodesUnderNode",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNodesUnderNode(t,i)}},{key:"searchCell",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.search(t,i,s),this}},{key:"getShortestPath",value:function(t,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.getShortestPath(t,i,s)}},{key:"getAllCellsBBox",value:function(){return this.model.getAllCellsBBox()}},{key:"getCellsBBox",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getCellsBBox(t,i)}},{key:"startBatch",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.startBatch(t,i)}},{key:"stopBatch",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.stopBatch(t,i)}},{key:"batchUpdate",value:function(t,i,s){var u=typeof t=="string"?t:"update",l=typeof t=="string"?i:t,c=typeof i=="function"?s:i;this.startBatch(u,c);var f=l();return this.stopBatch(u,c),f}},{key:"updateCellId",value:function(t,i){return this.model.updateCellId(t,i)}},{key:"isFrozen",value:function(){return this.renderer.isFrozen()}},{key:"freeze",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.freeze(t),this}},{key:"unfreeze",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.unfreeze(t),this}},{key:"isAsync",value:function(){return this.renderer.isAsync()}},{key:"setAsync",value:function(t){return this.renderer.setAsync(t),this}},{key:"findView",value:function(t){return Zi.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)}},{key:"findViews",value:function(t){return fr.isRectangleLike(t)?this.findViewsInArea(t):gt.isPointLike(t)?this.findViewsFromPoint(t):[]}},{key:"findViewByCell",value:function(t){return this.renderer.findViewByCell(t)}},{key:"findViewByElem",value:function(t){return this.renderer.findViewByElem(t)}},{key:"findViewsFromPoint",value:function(t,i){var s=typeof t=="number"?{x:t,y:i}:t;return this.renderer.findViewsFromPoint(s)}},{key:"findViewsInArea",value:function(t,i,s,u,l){var c=typeof t=="number"?{x:t,y:i,width:s,height:u}:t,f=typeof t=="number"?l:i;return this.renderer.findViewsInArea(c,f)}},{key:"isViewMounted",value:function(t){return this.renderer.isViewMounted(t)}},{key:"getMountedViews",value:function(){return this.renderer.getMountedViews()}},{key:"getUnmountedViews",value:function(){return this.renderer.getUnmountedViews()}},{key:"matrix",value:function(t){return typeof t=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(t),this)}},{key:"resize",value:function(t,i){return this.size.resize(t,i),this}},{key:"resizeGraph",value:function(t,i){return this.size.resizeGraph(t,i),this}},{key:"resizeScroller",value:function(t,i){return this.size.resizeScroller(t,i),this}},{key:"resizePage",value:function(t,i){return this.size.resizePage(t,i),this}},{key:"scale",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return typeof t=="undefined"?this.transform.getScale():(this.transform.scale(t,i,s,u),this)}},{key:"zoom",value:function(t,i){var s=this.scroller.widget;if(s){if(typeof t=="undefined")return s.zoom();s.zoom(t,i)}else{if(typeof t=="undefined")return this.transform.getZoom();this.transform.zoom(t,i)}return this}},{key:"zoomTo",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.scroller.widget;return s?s.zoom(t,Object.assign(Object.assign({},i),{absolute:!0})):this.transform.zoom(t,Object.assign(Object.assign({},i),{absolute:!0})),this}},{key:"zoomToRect",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.scroller.widget;return s?s.zoomToRect(t,i):this.transform.zoomToRect(t,i),this}},{key:"zoomToFit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.scroller.widget;return i?i.zoomToFit(t):this.transform.zoomToFit(t),this}},{key:"rotate",value:function(t,i,s){return typeof t=="undefined"?this.transform.getRotation():(this.transform.rotate(t,i,s),this)}},{key:"translate",value:function(t,i){return typeof t=="undefined"?this.transform.getTranslation():(this.transform.translate(t,i),this)}},{key:"translateBy",value:function(t,i){var s=this.translate(),u=s.tx+t,l=s.ty+i;return this.translate(u,l)}},{key:"getArea",value:function(){return this.transform.getGraphArea()}},{key:"getGraphArea",value:function(){return this.transform.getGraphArea()}},{key:"getContentArea",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentArea(t)}},{key:"getContentBBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentBBox(t)}},{key:"fitToContent",value:function(t,i,s,u){return this.transform.fitToContent(t,i,s,u)}},{key:"scaleContentToFit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.scaleContentToFit(t),this}},{key:"center",value:function(t){return this.centerPoint(t)}},{key:"centerPoint",value:function(t,i,s){var u=this.scroller.widget;return u?u.centerPoint(t,i,s):this.transform.centerPoint(t,i),this}},{key:"centerContent",value:function(t){var i=this.scroller.widget;return i?i.centerContent(t):this.transform.centerContent(t),this}},{key:"centerCell",value:function(t,i){var s=this.scroller.widget;return s?s.centerCell(t,i):this.transform.centerCell(t),this}},{key:"positionPoint",value:function(t,i,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.scroller.widget;return l?l.positionPoint(t,i,s,u):this.transform.positionPoint(t,i,s),this}},{key:"positionRect",value:function(t,i,s){var u=this.scroller.widget;return u?u.positionRect(t,i,s):this.transform.positionRect(t,i),this}},{key:"positionCell",value:function(t,i,s){var u=this.scroller.widget;return u?u.positionCell(t,i,s):this.transform.positionCell(t,i),this}},{key:"positionContent",value:function(t,i){var s=this.scroller.widget;return s?s.positionContent(t,i):this.transform.positionContent(t,i),this}},{key:"getClientMatrix",value:function(){return this.coord.getClientMatrix()}},{key:"getClientOffset",value:function(){return this.coord.getClientOffset()}},{key:"getPageOffset",value:function(){return this.coord.getPageOffset()}},{key:"snapToGrid",value:function(t,i){return this.coord.snapToGrid(t,i)}},{key:"pageToLocal",value:function(t,i,s,u){return fr.isRectangleLike(t)?this.coord.pageToLocalRect(t):typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.pageToLocalRect(t,i,s,u):this.coord.pageToLocalPoint(t,i)}},{key:"localToPage",value:function(t,i,s,u){return fr.isRectangleLike(t)?this.coord.localToPageRect(t):typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.localToPageRect(t,i,s,u):this.coord.localToPagePoint(t,i)}},{key:"clientToLocal",value:function(t,i,s,u){return fr.isRectangleLike(t)?this.coord.clientToLocalRect(t):typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.clientToLocalRect(t,i,s,u):this.coord.clientToLocalPoint(t,i)}},{key:"localToClient",value:function(t,i,s,u){return fr.isRectangleLike(t)?this.coord.localToClientRect(t):typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.localToClientRect(t,i,s,u):this.coord.localToClientPoint(t,i)}},{key:"localToGraph",value:function(t,i,s,u){return fr.isRectangleLike(t)?this.coord.localToGraphRect(t):typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.localToGraphRect(t,i,s,u):this.coord.localToGraphPoint(t,i)}},{key:"graphToLocal",value:function(t,i,s,u){return fr.isRectangleLike(t)?this.coord.graphToLocalRect(t):typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.graphToLocalRect(t,i,s,u):this.coord.graphToLocalPoint(t,i)}},{key:"clientToGraph",value:function(t,i,s,u){return fr.isRectangleLike(t)?this.coord.clientToGraphRect(t):typeof t=="number"&&typeof i=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.clientToGraphRect(t,i,s,u):this.coord.clientToGraphPoint(t,i)}},{key:"defineFilter",value:function(t){return this.defs.filter(t)}},{key:"defineGradient",value:function(t){return this.defs.gradient(t)}},{key:"defineMarker",value:function(t){return this.defs.marker(t)}},{key:"getGridSize",value:function(){return this.grid.getGridSize()}},{key:"setGridSize",value:function(t){return this.grid.setGridSize(t),this}},{key:"showGrid",value:function(){return this.grid.show(),this}},{key:"hideGrid",value:function(){return this.grid.hide(),this}},{key:"clearGrid",value:function(){return this.grid.clear(),this}},{key:"drawGrid",value:function(t){return this.grid.draw(t),this}},{key:"updateBackground",value:function(){return this.background.update(),this}},{key:"drawBackground",value:function(t,i){var s=this.scroller.widget;return s!=null&&(this.options.background==null||!i)?s.backgroundManager.draw(t):this.background.draw(t),this}},{key:"clearBackground",value:function(t){var i=this.scroller.widget;return i!=null&&(this.options.background==null||!t)?i.backgroundManager.clear():this.background.clear(),this}},{key:"isClipboardEnabled",value:function(){return!this.clipboard.disabled}},{key:"enableClipboard",value:function(){return this.clipboard.enable(),this}},{key:"disableClipboard",value:function(){return this.clipboard.disable(),this}},{key:"toggleClipboard",value:function(t){return t!=null?t!==this.isClipboardEnabled()&&(t?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}},{key:"isClipboardEmpty",value:function(){return this.clipboard.isEmpty()}},{key:"getCellsInClipboard",value:function(){return this.clipboard.cells}},{key:"cleanClipboard",value:function(){return this.clipboard.clean(),this}},{key:"copy",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.copy(t,i),this}},{key:"cut",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.cut(t,i),this}},{key:"paste",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;return this.clipboard.paste(t,i)}},{key:"isHistoryEnabled",value:function(){return!this.history.disabled}},{key:"enableHistory",value:function(){return this.history.enable(),this}},{key:"disableHistory",value:function(){return this.history.disable(),this}},{key:"toggleHistory",value:function(t){return t!=null?t!==this.isHistoryEnabled()&&(t?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}},{key:"undo",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.undo(t),this}},{key:"undoAndCancel",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.cancel(t),this}},{key:"redo",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.redo(t),this}},{key:"canUndo",value:function(){return this.history.canUndo()}},{key:"canRedo",value:function(){return this.history.canRedo()}},{key:"cleanHistory",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.history.clean(t)}},{key:"isKeyboardEnabled",value:function(){return!this.keyboard.disabled}},{key:"enableKeyboard",value:function(){return this.keyboard.enable(),this}},{key:"disableKeyboard",value:function(){return this.keyboard.disable(),this}},{key:"toggleKeyboard",value:function(t){return t!=null?t!==this.isKeyboardEnabled()&&(t?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}},{key:"bindKey",value:function(t,i,s){return this.keyboard.on(t,i,s),this}},{key:"unbindKey",value:function(t,i){return this.keyboard.off(t,i),this}},{key:"isMouseWheelEnabled",value:function(){return!this.mousewheel.disabled}},{key:"enableMouseWheel",value:function(){return this.mousewheel.enable(),this}},{key:"disableMouseWheel",value:function(){return this.mousewheel.disable(),this}},{key:"toggleMouseWheel",value:function(t){return t==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this}},{key:"isPannable",value:function(){var t=this.scroller.widget;return t?this.scroller.pannable:this.panning.pannable}},{key:"enablePanning",value:function(){var t=this.scroller.widget;return t?this.scroller.enablePanning():this.panning.enablePanning(),this}},{key:"disablePanning",value:function(){var t=this.scroller.widget;return t?this.scroller.disablePanning():this.panning.disablePanning(),this}},{key:"togglePanning",value:function(t){return t==null?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}},{key:"lockScroller",value:function(){var t;(t=this.scroller.widget)===null||t===void 0||t.lock()}},{key:"unlockScroller",value:function(){var t;(t=this.scroller.widget)===null||t===void 0||t.unlock()}},{key:"updateScroller",value:function(){var t;(t=this.scroller.widget)===null||t===void 0||t.update()}},{key:"getScrollbarPosition",value:function(){var t=this.scroller.widget;return t.scrollbarPosition()}},{key:"setScrollbarPosition",value:function(t,i,s){var u=this.scroller.widget;return u.scrollbarPosition(t,i,s),this}},{key:"scrollToPoint",value:function(t,i,s){var u=this.scroller.widget;return u.scrollToPoint(t,i,s),this}},{key:"scrollToContent",value:function(t){var i=this.scroller.widget;return i.scrollToContent(t),this}},{key:"scrollToCell",value:function(t,i){var s=this.scroller.widget;return s.scrollToCell(t,i),this}},{key:"transitionToPoint",value:function(t,i,s){var u=this.scroller.widget;return u.transitionToPoint(t,i,s),this}},{key:"transitionToRect",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.scroller.widget;return s.transitionToRect(t,i),this}},{key:"isSelectionEnabled",value:function(){return!this.selection.disabled}},{key:"enableSelection",value:function(){return this.selection.enable(),this}},{key:"disableSelection",value:function(){return this.selection.disable(),this}},{key:"toggleSelection",value:function(t){return t!=null?t!==this.isSelectionEnabled()&&(t?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}},{key:"isMultipleSelection",value:function(){return this.selection.isMultiple()}},{key:"enableMultipleSelection",value:function(){return this.selection.enableMultiple(),this}},{key:"disableMultipleSelection",value:function(){return this.selection.disableMultiple(),this}},{key:"toggleMultipleSelection",value:function(t){return t!=null?t!==this.isMultipleSelection()&&(t?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}},{key:"isSelectionMovable",value:function(){return this.selection.widget.options.movable!==!1}},{key:"enableSelectionMovable",value:function(){return this.selection.widget.options.movable=!0,this}},{key:"disableSelectionMovable",value:function(){return this.selection.widget.options.movable=!1,this}},{key:"toggleSelectionMovable",value:function(t){return t!=null?t!==this.isSelectionMovable()&&(t?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}},{key:"isRubberbandEnabled",value:function(){return!this.selection.rubberbandDisabled}},{key:"enableRubberband",value:function(){return this.selection.enableRubberband(),this}},{key:"disableRubberband",value:function(){return this.selection.disableRubberband(),this}},{key:"toggleRubberband",value:function(t){return t!=null?t!==this.isRubberbandEnabled()&&(t?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}},{key:"isStrictRubberband",value:function(){return this.selection.widget.options.strict===!0}},{key:"enableStrictRubberband",value:function(){return this.selection.widget.options.strict=!0,this}},{key:"disableStrictRubberband",value:function(){return this.selection.widget.options.strict=!1,this}},{key:"toggleStrictRubberband",value:function(t){return t!=null?t!==this.isStrictRubberband()&&(t?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}},{key:"setRubberbandModifiers",value:function(t){this.selection.setModifiers(t)}},{key:"setSelectionFilter",value:function(t){return this.selection.setFilter(t),this}},{key:"setSelectionDisplayContent",value:function(t){return this.selection.setContent(t),this}},{key:"isSelectionEmpty",value:function(){return this.selection.isEmpty()}},{key:"cleanSelection",value:function(t){return this.selection.clean(t),this}},{key:"resetSelection",value:function(t,i){return this.selection.reset(t,i),this}},{key:"getSelectedCells",value:function(){return this.selection.cells}},{key:"getSelectedCellCount",value:function(){return this.selection.length}},{key:"isSelected",value:function(t){return this.selection.isSelected(t)}},{key:"select",value:function(t,i){return this.selection.select(t,i),this}},{key:"unselect",value:function(t,i){return this.selection.unselect(t,i),this}},{key:"isSnaplineEnabled",value:function(){return!this.snapline.widget.disabled}},{key:"enableSnapline",value:function(){return this.snapline.widget.enable(),this}},{key:"disableSnapline",value:function(){return this.snapline.widget.disable(),this}},{key:"toggleSnapline",value:function(t){if(t!=null)t!==this.isSnaplineEnabled()&&(t?this.enableSnapline():this.disableSnapline());else return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this}},{key:"hideSnapline",value:function(){return this.snapline.widget.hide(),this}},{key:"setSnaplineFilter",value:function(t){return this.snapline.widget.setFilter(t),this}},{key:"isSnaplineOnResizingEnabled",value:function(){return this.snapline.widget.options.resizing===!0}},{key:"enableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!0,this}},{key:"disableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!1,this}},{key:"toggleSnaplineOnResizing",value:function(t){return t!=null?t!==this.isSnaplineOnResizingEnabled()&&(t?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}},{key:"isSharpSnapline",value:function(){return this.snapline.widget.options.sharp===!0}},{key:"enableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!0,this}},{key:"disableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!1,this}},{key:"toggleSharpSnapline",value:function(t){return t!=null?t!==this.isSharpSnapline()&&(t?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}},{key:"getSnaplineTolerance",value:function(){return this.snapline.widget.options.tolerance}},{key:"setSnaplineTolerance",value:function(t){return this.snapline.widget.options.tolerance=t,this}},{key:"removeTools",value:function(){return this.emit("tools:remove"),this}},{key:"hideTools",value:function(){return this.emit("tools:hide"),this}},{key:"showTools",value:function(){return this.emit("tools:show"),this}},{key:"toSVG",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toSVG(t,i)}},{key:"toDataURL",value:function(t,i){this.format.toDataURL(t,i)}},{key:"toPNG",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toPNG(t,i)}},{key:"toJPEG",value:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toJPEG(t,i)}},{key:"printPreview",value:function(t){this.print.show(t)}},{key:"dispose",value:function(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}}]),n}(Ls,Symbol.toStringTag);_c([Kl.checkScroller()],Wi.prototype,"lockScroller",null),_c([Kl.checkScroller()],Wi.prototype,"unlockScroller",null),_c([Kl.checkScroller()],Wi.prototype,"updateScroller",null),_c([Kl.checkScroller()],Wi.prototype,"getScrollbarPosition",null),_c([Kl.checkScroller()],Wi.prototype,"setScrollbarPosition",null),_c([Kl.checkScroller()],Wi.prototype,"scrollToPoint",null),_c([Kl.checkScroller()],Wi.prototype,"scrollToContent",null),_c([Kl.checkScroller()],Wi.prototype,"scrollToCell",null),_c([Kl.checkScroller()],Wi.prototype,"transitionToPoint",null),_c([Kl.checkScroller()],Wi.prototype,"transitionToRect",null),_c([Ls.dispose()],Wi.prototype,"dispose",null),function(o){o.View=Ch,o.Hook=Ri,o.Renderer=Fv,o.Keyboard=g0,o.MouseWheel=wS,o.BaseManager=xa,o.DefsManager=Ak,o.GridManager=pS,o.CoordManager=Tk,o.PrintManager=p0,o.FormatManager=kk,o.MiniMapManager=ES,o.HistoryManager=v0,o.SnaplineManager=mS,o.ScrollerManager=yS,o.ClipboardManager=bS,o.TransformManager=F1,o.HighlightManager=_1,o.BackgroundManager=L1,o.SelectionManager=CS}(Wi||(Wi={})),function(o){o.toStringTag="X6.".concat(o.name);function a(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&e.hook!=null&&e.view!=null&&e.model!=null}o.isGraph=a}(Wi||(Wi={})),function(o){function a(r,n){var e=r instanceof HTMLElement?new o({container:r}):new o(r);return n!=null&&e.fromJSON(n),e}o.render=a}(Wi||(Wi={})),function(o){o.registerNode=wa.registry.register,o.registerEdge=eo.registry.register,o.registerView=Eo.registry.register,o.registerAttr=Rc.registry.register,o.registerGrid=Cd.registry.register,o.registerFilter=Mv.registry.register,o.registerNodeTool=Dv.registry.register,o.registerEdgeTool=Iv.registry.register,o.registerBackground=Jg.registry.register,o.registerHighlighter=Tf.registry.register,o.registerPortLayout=gh.registry.register,o.registerPortLabelLayout=Av.registry.register,o.registerMarker=bd.registry.register,o.registerRouter=wd.registry.register,o.registerConnector=bh.registry.register,o.registerAnchor=Rv.registry.register,o.registerEdgeAnchor=Nv.registry.register,o.registerConnectionPoint=Lv.registry.register,o.registerConnectionStrategy=kv.registry.register,o.registerHTMLComponent=Lc.componentRegistry.register}(Wi||(Wi={})),function(o){o.unregisterNode=wa.registry.unregister,o.unregisterEdge=eo.registry.unregister,o.unregisterView=Eo.registry.unregister,o.unregisterAttr=Rc.registry.unregister,o.unregisterGrid=Cd.registry.unregister,o.unregisterFilter=Mv.registry.unregister,o.unregisterNodeTool=Dv.registry.unregister,o.unregisterEdgeTool=Iv.registry.unregister,o.unregisterBackground=Jg.registry.unregister,o.unregisterHighlighter=Tf.registry.unregister,o.unregisterPortLayout=gh.registry.unregister,o.unregisterPortLabelLayout=Av.registry.unregister,o.unregisterMarker=bd.registry.unregister,o.unregisterRouter=wd.registry.unregister,o.unregisterConnector=bh.registry.unregister,o.unregisterAnchor=Rv.registry.unregister,o.unregisterEdgeAnchor=Nv.registry.unregister,o.unregisterConnectionPoint=Lv.registry.unregister,o.unregisterConnectionStrategy=kv.registry.unregister,o.unregisterHTMLComponent=Lc.componentRegistry.unregister}(Wi||(Wi={}));var Rk=function(){function o(){Object(Ie.a)(this,o),this.cells=[]}return Object(pe.a)(o,[{key:"copy",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.options=Object.assign({},e);var t=yl.isModel(n)?n:n.model,i=t.cloneSubGraph(r,e);this.cells=B.sortBy(Object.keys(i).map(function(s){return i[s]}),function(s){return s.isEdge()?2:1}),this.serialize(e)}},{key:"cut",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.copy(r,n,e);var t=Wi.isGraph(n)?n.model:n;t.batchUpdate("cut",function(){r.forEach(function(i){return i.remove()})})}},{key:"paste",value:function(r){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Object.assign(Object.assign({},this.options),e),i=t.offset,s=t.edgeProps,u=t.nodeProps,l=20,c=20;i&&(l=typeof i=="number"?i:i.dx,c=typeof i=="number"?i:i.dy),this.deserialize(t);var f=this.cells;f.forEach(function(h){h.model=null,h.removeProp("zIndex"),(l||c)&&h.translate(l,c),u&&h.isNode()&&h.prop(u),s&&h.isEdge()&&h.prop(s)});var d=Wi.isGraph(r)?r.model:r;return d.batchUpdate("paste",function(){d.addCells(n.cells)}),this.copy(f,r,e),f}},{key:"serialize",value:function(r){r.useLocalStorage!==!1&&m0.save(this.cells)}},{key:"deserialize",value:function(r){if(r.useLocalStorage){var n=m0.fetch();n&&(this.cells=n)}}},{key:"isEmpty",value:function(){return this.cells.length<=0}},{key:"clean",value:function(){this.options={},this.cells=[],m0.clean()}}]),o}(),m0;(function(o){var a="".concat(ml.prefixCls,".clipboard.cells");function r(t){if(window.localStorage){var i=t.map(function(s){return s.toJSON()});localStorage.setItem(a,JSON.stringify(i))}}o.save=r;function n(){if(window.localStorage){var t=localStorage.getItem(a),i=t?JSON.parse(t):[];if(i)return yl.fromJSON(i)}}o.fetch=n;function e(){window.localStorage&&localStorage.removeItem(a)}o.clean=e})(m0||(m0={}));var tU=function(){function o(a){Object(Ie.a)(this,o),this.halo=a}return Object(pe.a)(o,[{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"node",get:function(){return this.cell}},{key:"getPresets",value:function(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox:function(n){if(this.options.useCellGeometry){var e=n.cell;return e.getBBox()}return n.getBBox()},content:function(n){var e=_.template("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),t=n.cell,i=t.getBBox();return e({x:Math.floor(i.x),y:Math.floor(i.y),width:Math.floor(i.width),height:Math.floor(i.height),angle:Math.floor(t.getAngle())})},magnet:function(n){return n.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}},{key:"removeCell",value:function(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}},{key:"startLink",value:function(r){var n=r.x,e=r.y;this.halo.startBatch();var t=this.graph,i=this.createEdgeConnectedToSource();i.setTarget({x:n,y:e}),this.model.addEdge(i,{validation:!1,halo:this.halo.cid,async:!1}),t.view.undelegateEvents(),this.edgeView=t.renderer.findViewByCell(i),this.edgeView.prepareArrowheadDragging("target",{x:n,y:e,fallbackAction:"remove"})}},{key:"createEdgeConnectedToSource",value:function(){var r=this.getMagnet(this.view,"source"),n=this.getEdgeTerminal(this.view,r),e=this.graph.hook.getDefaultEdge(this.view,r);return e.setSource(n),e}},{key:"getMagnet",value:function(r,n){var e=this.options.magnet;if(typeof e=="function"){var t=N.call(e,this.halo,r,n);if(t instanceof SVGElement)return t}throw new Error("`magnet()` has to return an SVGElement")}},{key:"getEdgeTerminal",value:function(r,n){var e={cell:r.cell.id};if(n!==r.container){var t=n.getAttribute("port");t?e.port=t:e.selector=r.getSelector(n)}return e}},{key:"doLink",value:function(r){var n=r.e,e=r.x,t=r.y;this.edgeView&&this.edgeView.onMouseMove(n,e,t)}},{key:"stopLink",value:function(r){var n=r.e,e=r.x,t=r.y,i=this.edgeView;if(i){i.onMouseUp(n,e,t);var s=i.cell;s.hasLoop()&&this.makeLoopEdge(s),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:s}),this.edgeView=null}this.graph.view.delegateEvents()}},{key:"makeLoopEdge",value:function(r){var n=null,e=null,t=this.options.loopEdgeWidth,i=this.graph.options,s=new fr(0,0,i.width,i.height),u=this.graph.graphToLocal(this.view.getBBox()),l=[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(function(c){var f=null,d=0,h=0;switch(c){case"top":f=new gt(u.x+u.width/2,u.y-t),d=t/2;break;case"bottom":f=new gt(u.x+u.width/2,u.y+u.height+t),d=t/2;break;case"left":f=new gt(u.x-t,u.y+u.height/2),h=t/2;break;case"right":f=new gt(u.x+u.width+t,u.y+u.height/2),h=t/2;break;default:break}return f?(n=f.translate(-d,-h),e=f.translate(d,h),s.containsPoint(n)&&s.containsPoint(e)):!1});l&&n&&e&&r.setVertices([n,e])}},{key:"startResize",value:function(r){var n=r.e;this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(ji.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),Xo("node:resize",n,this.view)}},{key:"doResize",value:function(r){var n=r.e,e=r.dx,t=r.dy,i=this.node.getSize(),s=Math.max(i.width+(this.flip?e:t),1),u=Math.max(i.height+(this.flip?t:e),1);this.node.resize(s,u,{absolute:!0}),Xo("node:resizing",n,this.view)}},{key:"stopResize",value:function(r){var n=r.e;this.view.removeClass("node-resizing"),Xo("node:resized",n,this.view),this.halo.stopBatch()}},{key:"startClone",value:function(r){var n=r.e,e=r.x,t=r.y;this.halo.startBatch();var i=this.options,s=i.clone(this.cell,{clone:!0});if(!Zi.isCell(s))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(s,e,t),this.model.addCell(s,{halo:this.halo.cid,async:!1});var u=this.graph.renderer.findViewByCell(s);u.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:u})}},{key:"centerNodeAtCursor",value:function(r,n,e){var t=r.getBBox().getCenter(),i=n-t.x,s=e-t.y;r.translate(i,s)}},{key:"doClone",value:function(r){var n=r.e,e=r.x,t=r.y,i=this.halo.getEventData(n).cloneView;i&&i.onMouseMove(n,e,t)}},{key:"stopClone",value:function(r){var n=r.e,e=r.x,t=r.y,i=this.halo.getEventData(n).cloneView;i&&i.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startFork",value:function(r){var n=r.e,e=r.x,t=r.y;this.halo.startBatch();var i=this.options.clone(this.cell,{fork:!0});if(!Zi.isCell(i))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(i,e,t),this.model.addCell(i,{halo:this.halo.cid,async:!1});var s=this.createEdgeConnectedToSource(),u=this.graph.renderer.findViewByCell(i),l=this.getMagnet(u,"target"),c=this.getEdgeTerminal(u,l);s.setTarget(c),this.model.addEdge(s,{halo:this.halo.cid,async:!1}),u.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:u})}},{key:"doFork",value:function(r){var n=r.e,e=r.x,t=r.y,i=this.halo.getEventData(n).cloneView;i&&i.onMouseMove(n,e,t)}},{key:"stopFork",value:function(r){var n=r.e,e=r.x,t=r.y,i=this.halo.getEventData(n).cloneView;i&&i.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startRotate",value:function(r){var n=this,e=r.e,t=r.x,i=r.y;this.halo.startBatch();var s=this.node.getBBox().getCenter(),u=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce(function(l,c){return c.isNode()&&l.push(c),l},u),this.halo.setEventData(e,{center:s,nodes:u,rotateStartAngles:u.map(function(l){return l.getAngle()}),clientStartAngle:new gt(t,i).theta(s)}),u.forEach(function(l){var c=n.graph.findViewByCell(l);c&&(c.addClass("node-rotating"),Xo("node:rotate",e,c))})}},{key:"doRotate",value:function(r){var n=this,e=r.e,t=r.x,i=r.y,s=this.halo.getEventData(e),u=s.clientStartAngle-new gt(t,i).theta(s.center);s.nodes.forEach(function(l,c){var f=s.rotateStartAngles[c],d=ko.snapToGrid(f+u,n.options.rotateGrid);l.rotate(d,{absolute:!0,center:s.center,halo:n.halo.cid}),Xo("node:rotating",e,n.graph.findViewByCell(l))})}},{key:"stopRotate",value:function(r){var n=this,e=r.e,t=this.halo.getEventData(e);t.nodes.forEach(function(i){var s=n.graph.findViewByCell(i);s.removeClass("node-rotating"),Xo("node:rotated",e,s)}),this.halo.stopBatch()}},{key:"unlink",value:function(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}}]),o}(),nU=function(){function o(a){Object(Ie.a)(this,o),this.halo=a}return Object(pe.a)(o,[{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"edge",get:function(){return this.cell}},{key:"getPresets",value:function(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:function(n){return n.graph.localToGraph(n.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}}},{key:"removeEdge",value:function(){this.cell.remove()}},{key:"directionSwap",value:function(){var r=this.edge.getSource(),n=this.edge.getTarget();this.edge.prop({source:n,target:r})}}]),o}(),B1=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"type",get:function(){return this.options.type||"surround"}},{key:"handleOptions",get:function(){return this.options}},{key:"init",value:function(e){this.options=C.merge(r.defaultOptions,this.cell.isNode()?new tU(this).getPresets():this.cell.isEdge()?new nU(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}},{key:"startListening",value:function(){var e=this.model,t=this.graph,i=this.view.cell;i.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),Object(Vr.a)(Object(Hr.a)(r.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){var e=this.model,t=this.graph,i=this.view.cell;this.undelegateEvents(),i.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),Object(Vr.a)(Object(Hr.a)(r.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){var e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(G1.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass("".concat(t,"-handles")).appendTo(this.container),this.$content=this.$("<div/>").addClass("".concat(t,"-content")).appendTo(this.container),this.$container.appendTo(this.graph.container),this}},{key:"remove",value:function(){return this.stopBatch(),this.view.removeClass(G1.NODE_CLS),Object(Vr.a)(Object(Hr.a)(r.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.isRendered()){this.updateContent();var e=this.getBBox(),t=this.options.tinyThreshold||0,i=this.options.smallThreshold||0;this.$handleContainer.toggleClass("".concat(this.handleClassName,"-tiny"),e.width<t&&e.height<t);var s="".concat(this.handleClassName,"-small");this.$handleContainer.toggleClass(s,!this.$handleContainer.hasClass(s)&&e.width<i&&e.height<i),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),(this.type==="surround"||this.type==="toolbar")&&this.hasHandle("fork")&&this.toggleFork()}}},{key:"updateContent",value:function(){var e=this.options.content;if(typeof e=="function"){var t=N.call(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}},{key:"getBBox",value:function(){var e=this.view,t=this.options.bbox,i=typeof t=="function"?N.call(t,this,e):t;return fr.create(Object.assign({x:0,y:0,width:1,height:1},i))}},{key:"removeCell",value:function(){this.cell.remove()}},{key:"toggleFork",value:function(){var e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),i=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!i),t.remove()}},{key:"toggleUnlink",value:function(){var e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}},{key:"startBatch",value:function(){this.model.startBatch("halo",{halo:this.cid})}},{key:"stopBatch",value:function(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}}]),r}(f0);(function(o){o.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:function(r){return r.clone().removeZIndex()}}})(B1||(B1={})),Object.getOwnPropertyNames(c0.prototype).forEach(function(o){o!=="constructor"&&Object.defineProperty(B1.prototype,o,Object.getOwnPropertyDescriptor(c0.prototype,o))});var G1;(function(o){o.NODE_CLS="has-widget-halo"})(G1||(G1={}));var rU=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},tp=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.options=Object.assign(Object.assign({},r.defaults),n),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName("widget-dnd")),e.draggingGraph=new Wi(Object.assign(Object.assign({},e.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),e.$container.append(e.draggingGraph.container),e}return Object(pe.a)(r,[{key:"targetScroller",get:function(){var e=this.options.target;return Wi.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return Wi.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"snapline",get:function(){return this.targetGraph.snapline.widget}},{key:"start",value:function(e,t){var i=t;i.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.draggingContainer||document.body),this.sourceNode=e,this.prepareDragging(e,i.clientX,i.clientY);var s=this.updateNodePosition(i.clientX,i.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:i,node:e,cell:e,view:this.draggingView,x:s.x,y:s.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(r.documentEvents,i.data)}},{key:"isSnaplineEnabled",value:function(){return this.snapline&&!this.snapline.disabled}},{key:"prepareDragging",value:function(e,t,i){var s=this.draggingGraph,u=s.model,l=this.options.getDragNode(e,{sourceNode:e,draggingGraph:s,targetGraph:this.targetGraph});l.position(0,0);var c=5;if(this.isSnaplineEnabled()&&(c+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){var f=this.targetGraph.transform.getScale();s.scale(f.sx,f.sy),c*=Math.max(f.sx,f.sy)}else s.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),u.resetCells([l]);var d=s.findViewByCell(l);d.undelegateEvents(),d.cell.off("changed"),s.fitToContent({padding:c,allowNewOrigin:"any"});var h=d.getBBox();this.geometryBBox=d.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(h.getTopLeft()),this.draggingNode=l,this.draggingView=d,this.draggingBBox=l.getBBox(),this.padding=c,this.originOffset=this.updateGraphPosition(t,i)}},{key:"updateGraphPosition",value:function(e,t){var i=document.body.scrollTop||document.documentElement.scrollTop,s=this.delta,u=this.geometryBBox,l=this.padding||5,c={left:e-s.x-u.width/2-l,top:t-s.y-u.height/2-l+i};return this.draggingGraph&&this.$container.offset(c),c}},{key:"updateNodePosition",value:function(e,t){var i=this.targetGraph.clientToLocal(e,t),s=this.draggingBBox;return i.x-=s.width/2,i.y-=s.height/2,this.draggingNode.position(i.x,i.y),i}},{key:"snap",value:function(e){var t=e.cell,i=e.current,s=e.options,u=t;if(s.snapped){var l=this.draggingBBox;u.position(l.x+s.tx,l.y+s.ty,{silent:!0}),this.draggingView.translate(),u.position(i.x,i.y,{silent:!0}),this.snapOffset={x:s.tx,y:s.ty}}else this.snapOffset=null}},{key:"onDragging",value:function(e){var t=this.draggingView;if(t){e.preventDefault();var i=this.normalizeEvent(e),s=i.clientX,u=i.clientY;this.updateGraphPosition(s,u);var l=this.updateNodePosition(s,u),c=this.targetGraph.options.embedding.enabled,f=(c||this.isSnaplineEnabled())&&this.isInsideValidArea({x:s,y:u});if(c){t.setEventData(i,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});var d=t.getEventData(i);f?t.processEmbedding(i,d):t.clearEmbedding(d),this.candidateEmbedView=d.candidateEmbedView}this.isSnaplineEnabled()&&(f?this.snapline.snapOnMoving({e:i,view:t,x:l.x,y:l.y}):this.snapline.hide())}}},{key:"onDragEnd",value:function(e){var t=this,i=this.draggingNode;if(i){var s=this.normalizeEvent(e),u=this.draggingView,l=this.draggingBBox,c=this.snapOffset,f=l.x,d=l.y;c&&(f+=c.x,d+=c.y),i.position(f,d,{silent:!0});var h=this.drop(i,{x:s.clientX,y:s.clientY}),p=function(b){b?(t.onDropped(i),t.targetGraph.options.embedding.enabled&&u&&(u.setEventData(s,{cell:b,graph:t.targetGraph,candidateEmbedView:t.candidateEmbedView}),u.finalizeEmbedding(s,u.getEventData(s)))):t.onDropInvalid(),t.candidateEmbedView=null,t.targetModel.stopBatch("dnd")};N.isAsync(h)?(this.undelegateDocumentEvents(),h.then(p)):p(h)}}},{key:"clearDragging",value:function(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}},{key:"onDropped",value:function(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}},{key:"onDropInvalid",value:function(){var e=this,t=this.draggingNode;if(t){var i=this.options.animation;if(i){var s=typeof i=="object"&&i.duration||150,u=typeof i=="object"&&i.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,s,u,function(){return e.onDropped(t)})}else this.onDropped(t)}}},{key:"isInsideValidArea",value:function(e){var t,i=null,s=this.targetGraph,u=this.targetScroller;this.options.dndContainer&&(i=this.getDropArea(this.options.dndContainer));var l=i&&i.containsPoint(e);if(u)if(u.options.autoResize)t=this.getDropArea(u.container);else{var c=this.getDropArea(u.container);t=this.getDropArea(s.container).intersectsWithRect(c)}else t=this.getDropArea(s.container);return!l&&t&&t.containsPoint(e)}},{key:"getDropArea",value:function(e){var t=this.$(e),i=t.offset(),s=document.body.scrollTop||document.documentElement.scrollTop,u=document.body.scrollLeft||document.documentElement.scrollLeft;return fr.create({x:i.left+parseInt(t.css("border-left-width"),10)-u,y:i.top+parseInt(t.css("border-top-width"),10)-s,width:t.innerWidth(),height:t.innerHeight()})}},{key:"drop",value:function(e,t){var i=this;if(this.isInsideValidArea(t)){var s=this.targetGraph,u=s.model,l=s.clientToLocal(t),c=this.sourceNode,f=this.options.getDropNode(e,{sourceNode:c,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),d=f.getBBox();l.x+=d.x-d.width/2,l.y+=d.y-d.height/2;var h=this.snapOffset?1:s.getGridSize();f.position(ko.snapToGrid(l.x,h),ko.snapToGrid(l.y,h)),f.removeZIndex();var p=this.options.validateNode,m=p?p(f,{sourceNode:c,draggingNode:e,droppingNode:f,targetGraph:s,draggingGraph:this.draggingGraph}):!0;return typeof m=="boolean"?m?(u.addCell(f,{stencil:this.cid}),f):null:N.toDeferredBoolean(m).then(function(b){return b?(u.addCell(f,{stencil:i.cid}),f):null})}return null}},{key:"onRemove",value:function(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}},{key:"dispose",value:function(){this.remove()}}]),r}(oa);rU([oa.dispose()],tp.prototype,"dispose",null),function(o){o.defaults={animation:!1,getDragNode:function(r){return r.clone()},getDropNode:function(r){return r.clone()}},o.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(tp||(tp={}));function iU(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=yl.isModel(o)?o:new yl().resetCells(o,{sort:!1,dryrun:!0}),n=r.getNodes(),e=a.columns||1,t=Math.ceil(n.length/e),i=a.dx||0,s=a.dy||0,u=a.center!==!1,l=a.resizeToFit===!0,c=a.marginX||0,f=a.marginY||0,d=[],h=a.columnWidth;if(h==="compact")for(var p=0;p<e;p+=1){var m=Df.getNodesInColumn(n,p,e);d.push(Df.getMaxDim(m,"width")+i)}else{(h==null||h==="auto")&&(h=Df.getMaxDim(n,"width")+i);for(var b=0;b<e;b+=1)d.push(h)}var E=Df.accumulate(d,c),x=[],O=a.rowHeight;if(O==="compact")for(var D=0;D<t;D+=1){var I=Df.getNodesInRow(n,D,e);x.push(Df.getMaxDim(I,"height")+s)}else{(O==null||O==="auto")&&(O=Df.getMaxDim(n,"height")+s);for(var F=0;F<t;F+=1)x.push(O)}var H=Df.accumulate(x,f);r.startBatch("layout"),n.forEach(function($,se){var de=se%e,Ee=Math.floor(se/e),Oe=d[de],$e=x[Ee],tt=0,Le=0,it=$.getSize();if(l){var It=Oe-2*i,tn=$e-2*s,bn=it.height*(it.width?It/it.width:1),dn=it.width*(it.height?tn/it.height:1);$e<bn?It=dn:tn=bn,it={width:It,height:tn},$.setSize(it,a)}u&&(tt=(Oe-it.width)/2,Le=($e-it.height)/2),$.position(E[de]+i+tt,H[Ee]+s+Le,a)}),r.stopBatch("layout")}var Df;(function(o){function a(t,i){return t.reduce(function(s,u){return Math.max(u.getSize()[i],s)},0)}o.getMaxDim=a;function r(t,i,s){for(var u=[],l=s*i,c=l+s;l<c;l+=1)u.push(t[l]);return u}o.getNodesInRow=r;function n(t,i,s){for(var u=[],l=i,c=t.length;l<c;l+=s)u.push(t[l]);return u}o.getNodesInColumn=n;function e(t,i){return t.reduce(function(s,u,l){return s.push(s[l]+u),s},[i||0])}o.accumulate=e})(Df||(Df={}));var xS=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;if(Object(Ie.a)(this,r),e=a.call(this),e.graphs={},e.$groups={},e.options=Object.assign(Object.assign({},r.defaultOptions),n),e.dnd=new tp(e.options),e.onSearch=N.debounce(e.onSearch,200),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(Wu.base)).attr("data-not-found-text",e.options.notFoundText||"No matches found"),e.options.collapsable=n.collapsable&&n.groups&&n.groups.some(function(u){return u.collapsable!==!1}),e.options.collapsable){e.$container.addClass("collapsable");var t=n.groups&&n.groups.every(function(u){return u.collapsed||u.collapsable===!1});t&&e.$container.addClass("collapsed")}e.$("<div/>").addClass(e.prefixClassName(Wu.title)).html(e.options.title).appendTo(e.$container),n.search&&e.$container.addClass("searchable").append(e.renderSearch()),e.$content=e.$("<div/>").addClass(e.prefixClassName(Wu.content)).appendTo(e.$container);var i=n.stencilGraphOptions||{};if(n.groups&&n.groups.length)n.groups.forEach(function(u){var l=e.$("<div/>").addClass(e.prefixClassName(Wu.group)).attr("data-name",u.name);(u.collapsable==null&&n.collapsable||u.collapsable!==!1)&&l.addClass("collapsable"),l.toggleClass("collapsed",u.collapsed===!0);var c=e.$("<h3/>").addClass(e.prefixClassName(Wu.groupTitle)).html(u.title||u.name),f=e.$("<div/>").addClass(e.prefixClassName(Wu.groupContent)),d=u.graphOptions,h=new Wi(Object.assign(Object.assign(Object.assign({},i),d),{container:document.createElement("div"),model:i.model||new yl,width:u.graphWidth||n.stencilGraphWidth,height:u.graphHeight||n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));f.append(h.container),l.append(c,f).appendTo(e.$content),e.$groups[u.name]=l,e.graphs[u.name]=h});else{var s=new Wi(Object.assign(Object.assign({},i),{container:document.createElement("div"),model:i.model||new yl,width:n.stencilGraphWidth,height:n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));e.$content.append(s.container),e.graphs[y0.defaultGroupName]=s}return e.startListening(),Object(BO.a)(e,Object(Co.a)(e))}return Object(pe.a)(r,[{key:"targetScroller",get:function(){var e=this.options.target;return Wi.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return Wi.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"renderSearch",value:function(){return this.$("<div/>").addClass(this.prefixClassName(Wu.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(Wu.searchText)))}},{key:"startListening",value:function(){var e,t=this,i=this.prefixClassName(Wu.title),s=this.prefixClassName(Wu.searchText),u=this.prefixClassName(Wu.groupTitle);this.delegateEvents((e={},Object(Qe.a)(e,"click .".concat(i),"onTitleClick"),Object(Qe.a)(e,"touchstart .".concat(i),"onTitleClick"),Object(Qe.a)(e,"click .".concat(u),"onGroupTitleClick"),Object(Qe.a)(e,"touchstart .".concat(u),"onGroupTitleClick"),Object(Qe.a)(e,"input .".concat(s),"onSearch"),Object(Qe.a)(e,"focusin .".concat(s),"onSearchFocusIn"),Object(Qe.a)(e,"focusout .".concat(s),"onSearchFocusOut"),e)),Object.keys(this.graphs).forEach(function(l){var c=t.graphs[l];c.on("cell:mousedown",t.onDragStart,t)})}},{key:"stopListening",value:function(){var e=this;this.undelegateEvents(),Object.keys(this.graphs).forEach(function(t){var i=e.graphs[t];i.off("cell:mousedown",e.onDragStart,e)})}},{key:"load",value:function(e,t){var i=this;return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(function(s){e[s]&&i.loadGroup(e[s],s)}),this}},{key:"loadGroup",value:function(e,t){var i=this.getModel(t);if(i){var s=e.map(function(d){return wa.isNode(d)?d:wa.create(d)});i.resetCells(s)}var u=this.getGroup(t),l=this.options.stencilGraphHeight;u&&u.graphHeight!=null&&(l=u.graphHeight);var c=u&&u.layout||this.options.layout;if(c&&i&&N.call(c,this,i,u),!l){var f=this.getGraph(t);f.fitToContent({minWidth:f.options.width,gridHeight:1,padding:u&&u.graphPadding||this.options.stencilGraphPadding||10})}return this}},{key:"onDragStart",value:function(e){var t=e.e,i=e.node;this.dnd.start(i,t)}},{key:"filter",value:function(e,t){var i=this,s=Object.keys(this.graphs).reduce(function(u,l){var c=i.graphs[l],f=l===y0.defaultGroupName?null:l,d=c.model.getNodes().filter(function(b){var E=!1;typeof t=="function"?E=N.call(t,i,b,e,f,i):typeof t=="boolean"?E=t:E=i.isCellMatched(b,e,t,e.toLowerCase()!==e);var x=c.renderer.findViewByCell(b);return x&&x.$(x.container).toggleClass("unmatched",!E),E}),h=d.length>0,p=i.options,m=new yl;return m.resetCells(d),p.layout&&N.call(p.layout,i,m,i.getGroup(l)),i.$groups[l]&&i.$groups[l].toggleClass("unmatched",!h),c.fitToContent({gridWidth:1,gridHeight:1,padding:p.stencilGraphPadding||10}),u||h},!1);this.$container.toggleClass("not-found",!s)}},{key:"isCellMatched",value:function(e,t,i,s){return t&&i?Object.keys(i).some(function(u){if(u==="*"||e.shape===u){var l=i[u];if(typeof l=="boolean")return l;var c=Array.isArray(l)?l:[l];return c.some(function(f){var d=e.getPropByPath(f);return d!=null?(d="".concat(d),s||(d=d.toLowerCase()),d.indexOf(t)>=0):!1})}return!1}):!0}},{key:"onSearch",value:function(e){this.filter(e.target.value,this.options.search)}},{key:"onSearchFocusIn",value:function(){this.$container.addClass("is-focused")}},{key:"onSearchFocusOut",value:function(){this.$container.removeClass("is-focused")}},{key:"onTitleClick",value:function(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}},{key:"onGroupTitleClick",value:function(e){var t=this,i=this.$(e.target).closest(".".concat(this.prefixClassName(Wu.group)));this.toggleGroup(i.attr("data-name")||"");var s=Object.keys(this.$groups).every(function(u){var l=t.getGroup(u),c=t.$groups[u];return l&&l.collapsable===!1||c.hasClass("collapsed")});this.$container.toggleClass("collapsed",s)}},{key:"getModel",value:function(e){var t=this.getGraph(e);return t?t.model:null}},{key:"getGraph",value:function(e){return this.graphs[e||y0.defaultGroupName]}},{key:"getGroup",value:function(e){var t=this.options.groups;return e!=null&&t&&t.length?t.find(function(i){return i.name===e}):null}},{key:"toggleGroup",value:function(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}},{key:"collapseGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}},{key:"expandGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}},{key:"isGroupCollapsable",value:function(e){var t=this.$groups[e];return t.hasClass("collapsable")}},{key:"isGroupCollapsed",value:function(e){var t=this.$groups[e];return t&&t.hasClass("collapsed")}},{key:"collapseGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.collapseGroup(t)}),this}},{key:"expandGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.expandGroup(t)}),this}},{key:"resizeGroup",value:function(e,t){var i=this.graphs[e];return i&&i.resize(t.width,t.height),this}},{key:"onRemove",value:function(){var e=this;Object.keys(this.graphs).forEach(function(t){var i=e.graphs[t];i.view.remove(),delete e.graphs[t]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}}]),r}(oa);(function(o){o.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout:function(r,n){var e={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};iU(r,Object.assign(Object.assign(Object.assign({},e),this.options.layoutOptions),n?n.layoutOptions:{}))}},tp.defaults)})(xS||(xS={}));var Wu;(function(o){o.base="widget-stencil",o.title="".concat(o.base,"-title"),o.search="".concat(o.base,"-search"),o.searchText="".concat(o.search,"-text"),o.content="".concat(o.base,"-content"),o.group="".concat(o.base,"-group"),o.groupTitle="".concat(o.group,"-title"),o.groupContent="".concat(o.group,"-content")})(Wu||(Wu={}));var y0;(function(o){o.defaultGroupName="__default__"})(y0||(y0={}));var Nk=v("i8i4"),Bv=v.n(Nk),aU=v("9og8"),OS;(function(o){function a(n){return!!n&&typeof n=="object"&&"dispose"in n&&typeof n.dispose=="function"}o.is=a;function r(n){return{dispose:n}}o.create=r,o.NONE=r(function(){})})(OS||(OS={}));var Lk,jk;(function(o){o.None=function(){return OS.NONE};function a(r,n){return function(e,t){return r(function(i){return e.call(t,n(i))},void 0)}}o.map=a})(jk||(jk={})),Lk=Symbol.iterator;var oU=function(o){function a(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Object(Ie.a)(this,a),this.mono=void 0,this._callbacks=void 0,this.mono=r}return Object(pe.a)(a,[{key:"callbacks",get:function(){return this._callbacks||(this._callbacks=[]),this._callbacks}},{key:"length",get:function(){return this.callbacks.length}},{key:"add",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.callbacks.push([n,e])}},{key:"remove",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!this.isEmpty()){for(var t=!1,i=0;i<this.length;i+=1)if(this.callbacks[i][0]===n){if(this.callbacks[i][1]===e){this.callbacks.splice(i,1);return}t=!0}if(t)throw new Error("You should remove it with the same context you add it")}}},{key:o,value:function(){if(this.isEmpty())return[][Symbol.iterator]();var n=this.callbacks.slice(0);return n.map(function(e){return function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return e[0].apply(e[1],i)}})[Symbol.iterator]()}},{key:"invoke",value:function(){var n=[],e=Object(ir.a)(this),t;try{for(e.s();!(t=e.n()).done;){var i=t.value;try{n.push(i.apply(void 0,arguments))}catch(s){console.error(s)}}}catch(s){e.e(s)}finally{e.f()}return n}},{key:"isEmpty",value:function(){return this.callbacks.length===0}},{key:"dispose",value:function(){this._callbacks=void 0}}]),a}(Lk),_k=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(Ie.a)(this,o),this.options=void 0,this._event=void 0,this._callbacks=void 0,this.disposed=!1,this.options=a}return Object(pe.a)(o,[{key:"callbacks",get:function(){return this._callbacks||(this._callbacks=new oU),this._callbacks}},{key:"event",get:function(){var r=this;return this._event||(this._event=function(n,e){r.options.onFirstListenerAdd&&r.callbacks.isEmpty()&&r.options.onFirstListenerAdd(r),r.callbacks.add(n,e);var t={dispose:function(){t.dispose=o.noop,r.disposed||(r.callbacks.remove(n,e),t.dispose=o.noop,r.options.onLastListenerRemove&&r.callbacks.isEmpty()&&r.options.onLastListenerRemove(r))}};return t}),this._event}},{key:"fire",value:function(r){!this._callbacks||this.callbacks.invoke(r)}},{key:"sequence",value:function(){var a=Object(aU.a)(Object(k.a)().mark(function n(e){var t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=Object(ir.a)(this.callbacks),c.prev=1,t.s();case 3:if((i=t.n()).done){c.next=12;break}return s=i.value,c.next=7,e(s);case 7:if(u=c.sent,u){c.next=10;break}return c.abrupt("break",12);case 10:c.next=3;break;case 12:c.next=17;break;case 14:c.prev=14,c.t0=c.catch(1),t.e(c.t0);case 17:return c.prev=17,t.f(),c.finish(17);case 20:case"end":return c.stop()}},n,this,[[1,14,17,20]])}));function r(n){return a.apply(this,arguments)}return r}()},{key:"dispose",value:function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this.disposed=!0}}]),o}();_k.noop=function(){};var Or;(function(o){function a(n){return!!n&&typeof n=="object"&&"dispose"in n&&typeof n.dispose=="function"}o.is=a;function r(n){return{dispose:n}}o.create=r,o.NULL=r(function(){})})(Or||(Or={}));var Xi=function(){function o(){var a=this;Object(Ie.a)(this,o),this.disposables=[],this.onDisposeEmitter=new _k,this.disposingElements=!1;for(var r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];n.forEach(function(t){return a.push(t)})}return Object(pe.a)(o,[{key:"onDispose",get:function(){return this.onDisposeEmitter.event}},{key:"checkDisposed",value:function(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}},{key:"disposed",get:function(){return this.disposables.length===0}},{key:"dispose",value:function(){return ue(this,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.disposed||this.disposingElements)){t.next=2;break}return t.abrupt("return");case 2:this.disposingElements=!0;case 3:if(this.disposed){t.next=15;break}return t.prev=4,n=this.disposables.pop(),t.next=8,n.dispose();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.error(t.t0);case 13:t.next=3;break;case 15:this.disposingElements=!1,this.checkDisposed();case 17:case"end":return t.stop()}},r,this,[[4,10]])}))}},{key:"push",value:function(r){var n=this,e=this.disposables;e.push(r);var t=r.dispose.bind(r),i=Or.create(function(){var s=e.indexOf(r);s!==-1&&e.splice(s,1),n.checkDisposed()});return r.dispose=function(){i.dispose(),t()},i}},{key:"pushAll",value:function(r){var n=this;return r.map(function(e){return n.push(e)})}}]),o}(),$u=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.isResolved=!1,this.isRejected=!1,this.promise=new Promise(function(r,n){a.resolve=function(){a.isResolved=!0,r.apply(void 0,arguments)},a.reject=function(){a.isRejected=!0,n.apply(void 0,arguments)}})}),sU="X6_NODE_PORTAL_NODE_VIEW",SS="xflow",MS=.01,AS=1.5,z1="XFLOW_DEFAULT_NODE",Fk="XFLOW_DEFAULT_GROUP_NODE",TS="XFLOW_DEFAULT_EDGE",np="XFLOW_COPY_ITEMS",Bk=36,Gk=180,PS={width:Gk,height:Bk};function Fc(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var a=Math.random()*16|0,r=o=="x"?a:a&3|8;return r.toString(16)})}var zk=v("xGfz"),Uk=v("gUdW"),b0=A.a.createContext(null);b0.displayName="XFlowAppContext";var co=function(){var a=A.a.useContext(b0);return a&&a.getApp?a.getApp():null},uU=function(){return A.a.useContext(b0)},Vk=Object(pe.a)(function o(){var a=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Object(Ie.a)(this,o),this.cache=null,this.setApp=function(n){a.cache=n,a.onAppChangeCallback&&a.onAppChangeCallback(n)},this.isUserDefined=function(){return a.isUserDefinedFlag},this.getApp=function(){return a.cache},this.onAppChange=function(n){a.onAppChangeCallback=n},this.dispose=function(){a.cache=null},this.isUserDefinedFlag=r}),Hk=function(a){var r=uU(),n=A.a.useState(null),e=Object(Xe.a)(n,2),t=e[1],i=A.a.useMemo(function(){return r&&r.isUserDefined()?r:new Vk(!1)},[]);return i.isUserDefined()||i.onAppChange(function(){return t(0)}),A.a.useEffect(function(){a.app&&i.setApp(a.app)},[a.app]),i.isUserDefined()?A.a.createElement(A.a.Fragment,null,a.children):A.a.createElement(b0.Provider,{value:Object.assign({},i)},a.children)};Hk.displayName="XFlowAppInternalProvider";var lU=function(a){var r=a.children,n=A.a.useState(null),e=Object(Xe.a)(n,2),t=e[1],i=A.a.useMemo(function(){return new Vk(!0)},[]);return i.onAppChange(function(){return t(0)}),A.a.createElement(b0.Provider,{value:Object.assign({},i)},r)};lU.displayName="XFlowAppProvider";var fa;(function(o){var a="\u8282\u70B9\u64CD\u4F5C";o.ADD_NODE={id:"xflow:add-node",label:"\u6DFB\u52A0\u8282\u70B9",category:a},o.DEL_NODE={id:"xflow:del-node",label:"\u5220\u9664\u8282\u70B9",category:a},o.UPDATE_NODE_PORT={id:"xflow:update-node-port",label:"\u5220\u9664\u8FDE\u63A5\u6869",category:a},o.UPDATE_NODE={id:"xflow:update-node",label:"\u66F4\u65B0\u8282\u70B9",category:a},o.HIGHLIGHT_NODE={id:"xflow:highlight-node",label:"\u9AD8\u4EAE\u8282\u70B9",category:a},o.SELECT_NODE={id:"xflow:select-node",label:"\u9009\u4E2D\u8282\u70B9",category:a},o.MOVE_NODE={id:"xflow:move-node",label:"Move Node",category:a},o.CENTER_NODE={id:"xflow:center-node",label:"\u5C45\u4E2D\u8282\u70B9",category:a},o.FRONT_NODE={id:"xflow:front-node",label:"\u524D\u7F6E\u8282\u70B9",category:a},o.BACK_NODE={id:"xflow:back-node",label:"\u540E\u7F6E\u8282\u70B9",category:a}})(fa||(fa={}));var to;(function(o){var a="\u8FB9\u64CD\u4F5C";o.ADD_EDGE={id:"xflow:add-edge",label:"\u6DFB\u52A0\u8FB9",category:a},o.DEL_EDGE={id:"xflow:del-edge",label:"\u5220\u9664\u8FB9",category:a},o.UPDATE_EDGE={id:"xflow:update-edge",label:"\u66F4\u65B0\u8FB9",category:a},o.HIGHLIGHT_EDGE={id:"xflow:highlight-edge",label:"\u9AD8\u4EAE\u8FB9",category:a},o.FRONT_EDGE={id:"xflow:front-edge",label:"\u524D\u7F6E\u53D8",category:a},o.BACK_EDGE={id:"xflow:back-edge",label:"\u540E\u7F6E\u8FB9",category:a}})(to||(to={}));var wi;(function(o){var a="\u753B\u5E03\u64CD\u4F5C";o.LOAD_META={id:"xflow:load-meta",label:"\u83B7\u53D6\u5143\u6570\u636E",category:a},o.LOAD_DATA={id:"xflow:load-data",label:"\u83B7\u53D6\u56FE\u6570\u636E",category:a},o.SAVE_GRAPH_DATA={id:"xflow:save-graph-data",label:"\u4FDD\u5B58",category:a},o.GRAPH_LAYOUT={id:"xflow:layout",label:"\u8BA1\u7B97\u5E03\u5C40",category:a},o.GRAPH_RENDER={id:"xflow:graph-render",label:"\u6E32\u67D3\u753B\u5E03",category:a},o.UNDO_CMD={id:"xflow:undo-cmd",label:"\u64A4\u9500",category:a},o.REDO_CMD={id:"xflow:redo-cmd",label:"\u91CD\u505A",category:a},o.GRAPH_INSTANCE_COMMAND={id:"xflow:graph-instacne-cmd",label:"Graph\u901A\u7528Command",category:a},o.GRAPH_ZOOM={id:"xflow:graph-zoom",label:"\u7F29\u653E\u753B\u5E03",category:a},o.GRAPH_FULLSCREEN={id:"xflow:graph-fullscreen",label:"\u5168\u5C4F",category:a},o.GRAPH_RESIZE={id:"xflow:graph-resize",label:"\u8C03\u6574\u7A97\u53E3\u5927\u5C0F",category:a},o.GRAPH_COPY={id:"xflow:graph-copy-selection",label:"\u590D\u5236",category:a},o.GRAPH_PASTE={id:"xflow:graph-paste-selection",label:"\u7C98\u8D34",category:a},o.GRAPH_TOGGLE_MULTI_SELECT={id:"xflow:graph-toggle-multi-select",label:"\u542F\u7528\u6846\u9009",category:a},o.GRAPH_ADD_TOOL={id:"xflow:add-tool",label:"\u6DFB\u52A0\u5DE5\u5177",category:a},o.GRAPH_DEL_TOOL={id:"xflow:del-tool",label:"\u5220\u9664\u5DE5\u5177",category:a},o.GRAPH_HISTORY_UNDO={id:"xflow:history-undo",label:"history undo",category:a},o.GRAPH_HISTORY_REDO={id:"xflow:history-redo",label:"history redo",category:a},o.GRAPH_HISTORY_RESET={id:"xflow:history-reset",label:"history reset",category:a},o.GRAPH_HISTORY_TOGGLE={id:"xflow:history-toggle",label:"history toggle",category:a}})(wi||(wi={}));var rp;(function(o){var a="\u72B6\u6001\u64CD\u4F5C";o.UPDATE_MODEL={id:"xflow:update-model",label:"\u8BBE\u7F6E\u72B6\u6001\u503C",category:a}})(rp||(rp={}));var ls;(function(o){var a="\u7FA4\u7EC4\u64CD\u4F5C";o.INIT_GROUP={id:"xflow:init-group",label:"\u521D\u59CB\u5316\u7FA4\u7EC4",category:a},o.ADD_GROUP={id:"xflow:add-group",label:"\u65B0\u5EFA\u7FA4\u7EC4",category:a},o.DEL_GROUP={id:"xflow:del-group",label:"\u89E3\u6563\u7FA4\u7EC4",category:a},o.COLLAPSE_GROUP={id:"xflow:collapse-group",label:"\u6298\u53E0\u7FA4\u7EC4",category:a}})(ls||(ls={}));var Wk=function(a){var r=a.cell,n=co(),e=a.data.isCollapsed||!1,t=function(u){u.preventDefault(),n.executeCommand(ls.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1})},i=function(u){u.preventDefault(),n.executeCommand(ls.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,gap:3})};return A.a.createElement("div",{className:"xflow-default-group-node"},A.a.createElement("div",{className:"xflow-group-header"},A.a.createElement("div",{className:"header-left"},a.data.label),A.a.createElement("div",{className:"header-right"},e&&A.a.createElement(zk.a,{onClick:t}),!e&&A.a.createElement(Uk.a,{onClick:i}))))};Wk.displayName="XFlowDefaultGroupNode";var cU=v("VA6q"),fU=v("2BaD"),dU=v("Ue1A"),hU=v("RCxd"),vU=v("+YFz"),gU=v("26re"),pU={fontSize:"16px",color:"#3057e3"},Gv;(function(o){o.SUCCESS="success",o.PROCESSING="processing",o.ERROR="error",o.DEFAULT="default",o.WARNING="warning"})(Gv||(Gv={}));var mU=function(a){if(a.hide)return null;switch(a.status){case Gv.PROCESSING:return A.a.createElement(cU.a,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case Gv.ERROR:return A.a.createElement(fU.a,{style:{color:"#ff4d4f",fontSize:"16px"}});case Gv.SUCCESS:return A.a.createElement(dU.a,{style:{color:"#39ca74cc",fontSize:"16px"}});case Gv.WARNING:return A.a.createElement(hU.a,{style:{color:"#faad14",fontSize:"16px"}});case Gv.DEFAULT:return A.a.createElement(vU.a,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},$k=function(a){var r=A.a.isValidElement(a.data.icon)?a.data.icon:A.a.createElement(gU.a,{style:pU});return A.a.createElement("div",{className:"xflow-default-node ".concat(a.isNodeTreePanel?"panel-node":"")},A.a.createElement("span",{className:"icon"},r),A.a.createElement("span",{className:"label"},a.data.label),A.a.createElement("span",{className:"status"},A.a.createElement(mU,{status:a.data&&a.data.status,hide:a.isNodeTreePanel})))};$k.displayName="XFlowDefaultNode";var ip;(function(o){o.CONFIG_TYPE="GraphConfig",o.defaultNodeTypeParser=function(a){return a.renderKey},o.defaultEdgeTypeParser=function(a){return a.renderKey},o.defaultNodeMapValue=[[z1,$k],[Fk,Wk]]})(ip||(ip={}));var Xk=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.CONFIG_TYPE=ip.CONFIG_TYPE,this.x6Options=new $u,this.rootContainer=new $u,this.graphContainer=new $u,this.nodeRender=new Map(ip.defaultNodeMapValue),this.edgeRender=new Map,this.nodeTypeParser=ip.defaultNodeTypeParser,this.edgeTypeParser=ip.defaultEdgeTypeParser,this.events=[],this.mergeX6Config=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getX6Config();case 2:return e=i.sent,i.abrupt("return",Object.assign(e,r));case 4:case"end":return i.stop()}},n,this)}))},this.getX6Config=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x6Options.promise;case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},r,this)}))},this.setX6Config=function(r){var n,e=a.getDefaultGraphOptions();(n=a.x6Options)===null||n===void 0||n.resolve(Object.assign(Object.assign({},e),r))},this.setAppContainer=function(r){a.appContainer=r},this.setRootContainer=function(r){r&&(a==null||a.rootContainer.resolve(r))},this.setGraphContainer=function(r){var n;r&&((n=a.graphContainer)===null||n===void 0||n.resolve(r))},this.setEvents=function(r){a.events=r},this.setDefaultNodeRender=function(r){a.nodeRender.set(z1,r)},this.setDefaultEdgeRender=function(r){a.edgeRender.set(TS,r)},this.setNodeRender=function(r,n){a.nodeRender.set(r,n)},this.setEdgeRender=function(r,n){a.edgeRender.set(r,n)},this.setNodeTypeParser=function(r){a.nodeTypeParser=r},this.setEdgeTypeParser=function(r){a.edgeTypeParser=r},this.getConfig=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Promise.all([this.rootContainer.promise,this.graphContainer.promise,this.x6Options.promise]);case 2:return n=c.sent,e=Object(Xe.a)(n,3),t=e[0],i=e[1],s=e[2],u={xflowInstanceId:this.xflowInstanceId,graphId:this.graphId,nodeViewId:this.graphId,appContainer:this.appContainer,rootContainer:t,graphContainer:i,x6Options:s,events:this.events,nodeRender:this.nodeRender,edgeRender:this.edgeRender,nodeTypeParser:this.nodeTypeParser,edgeTypeParser:this.edgeTypeParser},c.abrupt("return",u);case 9:case"end":return c.stop()}},r,this)}))},this.getDefaultGraphOptions=function(){var r={rotating:!1,resizing:!1,connecting:{snap:!0,dangling:!1,highlight:!1,connectionPoint:"rect",router:{name:"er"},connector:{name:"rounded",args:{radius:15}}},background:{},grid:{visible:!0},selecting:{strict:!0,enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},snapline:{enabled:!1},history:{enabled:!1},clipboard:{enabled:!0,useLocalStorage:!0},scroller:{enabled:!1},mousewheel:{enabled:!0,minScale:MS,maxScale:AS,factor:1.1,modifiers:["ctrl","meta"]},panning:{enabled:!0},scaling:{min:MS,max:AS},keyboard:{enabled:!0},interacting:{nodeMovable:!0,edgeLabelMovable:!1},async:!1};return r},this.dispose=function(){a.rootContainer=new $u,a.graphContainer=new $u,a.x6Options=new $u},this.graphId=Fc()}),C0=Symbol("IGraphOptionProvider"),yU=function(a,r){a(C0,{lifecycle:Pe.Syringe.Lifecycle.singleton,useDynamic:function(){return{getOptions:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r.getConfig());case 1:case"end":return s.stop()}},t)}))}}}})},Kk=function(a){return function(r){var n=A.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=A.a.useMemo(function(){var t=new Xk;return a(t,n),t},[n]);return e}},bU=function(){return Array.isArray||function(o){return o&&typeof o.length=="number"}}();function Yk(o){return o!==null&&typeof o=="object"}function kS(o){return typeof o=="function"}var CU=function(){function o(a){return Error.call(this),this.message=a?a.length+` errors occurred during unsubscription:
`+a.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=a,this}return o.prototype=Object.create(Error.prototype),o}(),U1=CU,ap=function(){function o(a){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,a&&(this._ctorUnsubscribe=!0,this._unsubscribe=a)}return o.prototype.unsubscribe=function(){var a;if(!this.closed){var r=this,n=r._parentOrParents,e=r._ctorUnsubscribe,t=r._unsubscribe,i=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof o)n.remove(this);else if(n!==null)for(var s=0;s<n.length;++s){var u=n[s];u.remove(this)}if(kS(t)){e&&(this._unsubscribe=void 0);try{t.call(this)}catch(f){a=f instanceof U1?Zk(f.errors):[f]}}if(bU(i))for(var s=-1,l=i.length;++s<l;){var c=i[s];if(Yk(c))try{c.unsubscribe()}catch(d){a=a||[],d instanceof U1?a=a.concat(Zk(d.errors)):a.push(d)}}if(a)throw new U1(a)}},o.prototype.add=function(a){var r=a;if(!a)return o.EMPTY;switch(typeof a){case"function":r=new o(a);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof o)){var n=r;r=new o,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+a+" added to Subscription.")}var e=r._parentOrParents;if(e===null)r._parentOrParents=this;else if(e instanceof o){if(e===this)return r;r._parentOrParents=[e,this]}else if(e.indexOf(this)===-1)e.push(this);else return r;var t=this._subscriptions;return t===null?this._subscriptions=[r]:t.push(r),r},o.prototype.remove=function(a){var r=this._subscriptions;if(r){var n=r.indexOf(a);n!==-1&&r.splice(n,1)}},o.EMPTY=function(a){return a.closed=!0,a}(new o),o}();function Zk(o){return o.reduce(function(a,r){return a.concat(r instanceof U1?r.errors:r)},[])}var EU=function(o){lt(a,o);function a(r,n){return o.call(this)||this}return a.prototype.schedule=function(r,n){return n===void 0&&(n=0),this},a}(ap),wU=function(o){lt(a,o);function a(r,n){var e=o.call(this,r,n)||this;return e.scheduler=r,e.work=n,e.pending=!1,e}return a.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var e=this.id,t=this.scheduler;return e!=null&&(this.id=this.recycleAsyncId(t,e,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(t,this.id,n),this},a.prototype.requestAsyncId=function(r,n,e){return e===void 0&&(e=0),setInterval(r.flush.bind(r,this),e)},a.prototype.recycleAsyncId=function(r,n,e){if(e===void 0&&(e=0),e!==null&&this.delay===e&&this.pending===!1)return n;clearInterval(n)},a.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(r,n);if(e)return e;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},a.prototype._execute=function(r,n){var e=!1,t=void 0;try{this.work(r)}catch(i){e=!0,t=!!i&&i||new Error(i)}if(e)return this.unsubscribe(),t},a.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,e=n.actions,t=e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,t!==-1&&e.splice(t,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},a}(EU),Jk=function(){function o(a,r){r===void 0&&(r=o.now),this.SchedulerAction=a,this.now=r}return o.prototype.schedule=function(a,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,a).schedule(n,r)},o.now=function(){return Date.now()},o}(),xU=function(o){lt(a,o);function a(r,n){n===void 0&&(n=Jk.now);var e=o.call(this,r,function(){return a.delegate&&a.delegate!==e?a.delegate.now():n()})||this;return e.actions=[],e.active=!1,e.scheduled=void 0,e}return a.prototype.schedule=function(r,n,e){return n===void 0&&(n=0),a.delegate&&a.delegate!==this?a.delegate.schedule(r,n,e):o.prototype.schedule.call(this,r,n,e)},a.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var e;this.active=!0;do if(e=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,e){for(;r=n.shift();)r.unsubscribe();throw e}},a}(Jk),Qk=new xU(wU),OU=Qk,DS=!1,Bc={Promise:void 0,set useDeprecatedSynchronousErrorHandling(o){if(o){var a=new Error;""+a.stack}DS=o},get useDeprecatedSynchronousErrorHandling(){return DS}};function op(o){setTimeout(function(){throw o},0)}var V1={closed:!0,next:function(a){},error:function(a){if(Bc.useDeprecatedSynchronousErrorHandling)throw a;op(a)},complete:function(){}},E0=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),tq=E0,bl=function(o){lt(a,o);function a(r,n,e){var t=o.call(this)||this;switch(t.syncErrorValue=null,t.syncErrorThrown=!1,t.syncErrorThrowable=!1,t.isStopped=!1,arguments.length){case 0:t.destination=V1;break;case 1:if(!r){t.destination=V1;break}if(typeof r=="object"){r instanceof a?(t.syncErrorThrowable=r.syncErrorThrowable,t.destination=r,r.add(t)):(t.syncErrorThrowable=!0,t.destination=new qk(t,r));break}default:t.syncErrorThrowable=!0,t.destination=new qk(t,r,n,e);break}return t}return a.prototype[E0]=function(){return this},a.create=function(r,n,e){var t=new a(r,n,e);return t.syncErrorThrowable=!1,t},a.prototype.next=function(r){this.isStopped||this._next(r)},a.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},a.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},a.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},a.prototype._next=function(r){this.destination.next(r)},a.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},a.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},a.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},a}(ap),qk=function(o){lt(a,o);function a(r,n,e,t){var i=o.call(this)||this;i._parentSubscriber=r;var s,u=i;return kS(n)?s=n:n&&(s=n.next,e=n.error,t=n.complete,n!==V1&&(u=Object.create(n),kS(u.unsubscribe)&&i.add(u.unsubscribe.bind(u)),u.unsubscribe=i.unsubscribe.bind(i))),i._context=u,i._next=s,i._error=e,i._complete=t,i}return a.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Bc.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},a.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,e=Bc.useDeprecatedSynchronousErrorHandling;if(this._error)!e||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)e?(n.syncErrorValue=r,n.syncErrorThrown=!0):op(r),this.unsubscribe();else{if(this.unsubscribe(),e)throw r;op(r)}}},a.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var e=function(){return r._complete.call(r._context)};!Bc.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(e),this.unsubscribe()):(this.__tryOrSetError(n,e),this.unsubscribe())}else this.unsubscribe()}},a.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(e){if(this.unsubscribe(),Bc.useDeprecatedSynchronousErrorHandling)throw e;op(e)}},a.prototype.__tryOrSetError=function(r,n,e){if(!Bc.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,e)}catch(t){return Bc.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=t,r.syncErrorThrown=!0,!0):(op(t),!0)}return!1},a.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},a}(bl);function SU(o){for(;o;){var a=o,r=a.closed,n=a.destination,e=a.isStopped;if(r||e)return!1;n&&n instanceof bl?o=n:o=null}return!0}function MU(o,a,r){if(o){if(o instanceof bl)return o;if(o[E0])return o[E0]()}return!o&&!a&&!r?new bl(V1):new bl(o,a,r)}var IS=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function AU(o){return o}function nq(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return eD(o)}function eD(o){return o.length===0?AU:o.length===1?o[0]:function(r){return o.reduce(function(n,e){return e(n)},r)}}var RS=function(){function o(a){this._isScalar=!1,a&&(this._subscribe=a)}return o.prototype.lift=function(a){var r=new o;return r.source=this,r.operator=a,r},o.prototype.subscribe=function(a,r,n){var e=this.operator,t=MU(a,r,n);if(e?t.add(e.call(t,this.source)):t.add(this.source||Bc.useDeprecatedSynchronousErrorHandling&&!t.syncErrorThrowable?this._subscribe(t):this._trySubscribe(t)),Bc.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable&&(t.syncErrorThrowable=!1,t.syncErrorThrown))throw t.syncErrorValue;return t},o.prototype._trySubscribe=function(a){try{return this._subscribe(a)}catch(r){Bc.useDeprecatedSynchronousErrorHandling&&(a.syncErrorThrown=!0,a.syncErrorValue=r),SU(a)?a.error(r):console.warn(r)}},o.prototype.forEach=function(a,r){var n=this;return r=tD(r),new r(function(e,t){var i;i=n.subscribe(function(s){try{a(s)}catch(u){t(u),i&&i.unsubscribe()}},t,e)})},o.prototype._subscribe=function(a){var r=this.source;return r&&r.subscribe(a)},o.prototype[IS]=function(){return this},o.prototype.pipe=function(){for(var a=[],r=0;r<arguments.length;r++)a[r]=arguments[r];return a.length===0?this:eD(a)(this)},o.prototype.toPromise=function(a){var r=this;return a=tD(a),new a(function(n,e){var t;r.subscribe(function(i){return t=i},function(i){return e(i)},function(){return n(t)})})},o.create=function(a){return new o(a)},o}();function tD(o){if(o||(o=Bc.Promise||Promise),!o)throw new Error("no Promise impl found");return o}var TU=function(){function o(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return o.prototype=Object.create(Error.prototype),o}(),sp=TU,PU=function(o){lt(a,o);function a(r,n){var e=o.call(this)||this;return e.subject=r,e.subscriber=n,e.closed=!1,e}return a.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var e=n.indexOf(this.subscriber);e!==-1&&n.splice(e,1)}}},a}(ap),kU=function(o){lt(a,o);function a(r){var n=o.call(this,r)||this;return n.destination=r,n}return a}(bl),nD=function(o){lt(a,o);function a(){var r=o.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return a.prototype[E0]=function(){return new kU(this)},a.prototype.lift=function(r){var n=new rD(this,this);return n.operator=r,n},a.prototype.next=function(r){if(this.closed)throw new sp;if(!this.isStopped)for(var n=this.observers,e=n.length,t=n.slice(),i=0;i<e;i++)t[i].next(r)},a.prototype.error=function(r){if(this.closed)throw new sp;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,e=n.length,t=n.slice(),i=0;i<e;i++)t[i].error(r);this.observers.length=0},a.prototype.complete=function(){if(this.closed)throw new sp;this.isStopped=!0;for(var r=this.observers,n=r.length,e=r.slice(),t=0;t<n;t++)e[t].complete();this.observers.length=0},a.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},a.prototype._trySubscribe=function(r){if(this.closed)throw new sp;return o.prototype._trySubscribe.call(this,r)},a.prototype._subscribe=function(r){if(this.closed)throw new sp;return this.hasError?(r.error(this.thrownError),ap.EMPTY):this.isStopped?(r.complete(),ap.EMPTY):(this.observers.push(r),new PU(this,r))},a.prototype.asObservable=function(){var r=new RS;return r.source=this,r},a.create=function(r,n){return new rD(r,n)},a}(RS),rD=function(o){lt(a,o);function a(r,n){var e=o.call(this)||this;return e.destination=r,e.source=n,e}return a.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},a.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},a.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},a.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):ap.EMPTY},a}(nD),DU=function(o){lt(a,o);function a(r){var n=o.call(this)||this;return n._value=r,n}return Object.defineProperty(a.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),a.prototype._subscribe=function(r){var n=o.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},a.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new sp;return this._value},a.prototype.next=function(r){o.prototype.next.call(this,this._value=r)},a}(nD);function IU(o,a){return function(r){return r.lift(new RU(o,a))}}var RU=function(){function o(a,r){this.compare=a,this.keySelector=r}return o.prototype.call=function(a,r){return r.subscribe(new NU(a,this.compare,this.keySelector))},o}(),NU=function(o){lt(a,o);function a(r,n,e){var t=o.call(this,r)||this;return t.keySelector=e,t.hasKey=!1,typeof n=="function"&&(t.compare=n),t}return a.prototype.compare=function(r,n){return r===n},a.prototype._next=function(r){var n;try{var e=this.keySelector;n=e?e(r):r}catch(s){return this.destination.error(s)}var t=!1;if(this.hasKey)try{var i=this.compare;t=i(this.key,n)}catch(s){return this.destination.error(s)}else this.hasKey=!0;t||(this.key=n,this.destination.next(r))},a}(bl);function LU(o,a){return function(n){return n.lift(new jU(o,a))}}var jU=function(){function o(a,r){this.predicate=a,this.thisArg=r}return o.prototype.call=function(a,r){return r.subscribe(new _U(a,this.predicate,this.thisArg))},o}(),_U=function(o){lt(a,o);function a(r,n,e){var t=o.call(this,r)||this;return t.predicate=n,t.thisArg=e,t.count=0,t}return a.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(e){this.destination.error(e);return}n&&this.destination.next(r)},a}(bl),FU=function(a){return function(r){for(var n=0,e=a.length;n<e&&!r.closed;n++)r.next(a[n]);r.complete()}},BU=function(a){return function(r){return a.then(function(n){r.closed||(r.next(n),r.complete())},function(n){return r.error(n)}).then(null,op),r}};function GU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var NS=GU(),rq=NS,zU=function(a){return function(r){var n=a[NS]();do{var e=void 0;try{e=n.next()}catch(t){return r.error(t),r}if(e.done){r.complete();break}if(r.next(e.value),r.closed)break}while(!0);return typeof n.return=="function"&&r.add(function(){n.return&&n.return()}),r}},UU=function(a){return function(r){var n=a[IS]();if(typeof n.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(r)}},VU=function(a){return a&&typeof a.length=="number"&&typeof a!="function"};function HU(o){return!!o&&typeof o.subscribe!="function"&&typeof o.then=="function"}var WU=function(a){if(!!a&&typeof a[IS]=="function")return UU(a);if(VU(a))return FU(a);if(HU(a))return BU(a);if(!!a&&typeof a[NS]=="function")return zU(a);var r=Yk(a)?"an invalid object":"'"+a+"'",n="You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)},$U=function(o){lt(a,o);function a(r){var n=o.call(this)||this;return n.parent=r,n}return a.prototype._next=function(r){this.parent.notifyNext(r)},a.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},a.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},a}(bl),iq=function(o){lt(a,o);function a(r,n,e){var t=o.call(this)||this;return t.parent=r,t.outerValue=n,t.outerIndex=e,t}return a.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this)},a.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},a.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},a}(bl),XU=function(o){lt(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.notifyNext=function(r){this.destination.next(r)},a.prototype.notifyError=function(r){this.destination.error(r)},a.prototype.notifyComplete=function(){this.destination.complete()},a}(bl),aq=function(o){lt(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.notifyNext=function(r,n,e,t){this.destination.next(n)},a.prototype.notifyError=function(r){this.destination.error(r)},a.prototype.notifyComplete=function(r){this.destination.complete()},a}(bl);function KU(o,a){if(!a.closed){if(o instanceof RS)return o.subscribe(a);var r;try{r=WU(o)(a)}catch(n){a.error(n)}return r}}var iD={leading:!0,trailing:!1};function oq(o,a){return a===void 0&&(a=iD),function(r){return r.lift(new YU(o,!!a.leading,!!a.trailing))}}var YU=function(){function o(a,r,n){this.durationSelector=a,this.leading=r,this.trailing=n}return o.prototype.call=function(a,r){return r.subscribe(new ZU(a,this.durationSelector,this.leading,this.trailing))},o}(),ZU=function(o){lt(a,o);function a(r,n,e,t){var i=o.call(this,r)||this;return i.destination=r,i.durationSelector=n,i._leading=e,i._trailing=t,i._hasValue=!1,i}return a.prototype._next=function(r){this._hasValue=!0,this._sendValue=r,this._throttled||(this._leading?this.send():this.throttle(r))},a.prototype.send=function(){var r=this,n=r._hasValue,e=r._sendValue;n&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},a.prototype.throttle=function(r){var n=this.tryDurationSelector(r);n&&this.add(this._throttled=KU(n,new $U(this)))},a.prototype.tryDurationSelector=function(r){try{return this.durationSelector(r)}catch(n){return this.destination.error(n),null}},a.prototype.throttlingDone=function(){var r=this,n=r._throttled,e=r._trailing;n&&n.unsubscribe(),this._throttled=void 0,e&&this.send()},a.prototype.notifyNext=function(){this.throttlingDone()},a.prototype.notifyComplete=function(){this.throttlingDone()},a}(XU);function JU(o,a,r){return a===void 0&&(a=OU),r===void 0&&(r=iD),function(n){return n.lift(new QU(o,a,r.leading,r.trailing))}}var QU=function(){function o(a,r,n,e){this.duration=a,this.scheduler=r,this.leading=n,this.trailing=e}return o.prototype.call=function(a,r){return r.subscribe(new qU(a,this.duration,this.scheduler,this.leading,this.trailing))},o}(),qU=function(o){lt(a,o);function a(r,n,e,t,i){var s=o.call(this,r)||this;return s.duration=n,s.scheduler=e,s.leading=t,s.trailing=i,s._hasTrailingValue=!1,s._trailingValue=null,s}return a.prototype._next=function(r){this.throttled?this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(e8,this.duration,{subscriber:this})),this.leading?this.destination.next(r):this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0))},a.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},a.prototype.clearThrottle=function(){var r=this.throttled;r&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),r.unsubscribe(),this.remove(r),this.throttled=null)},a}(bl);function e8(o){var a=o.subscriber;a.clearThrottle()}function cs(o){for(var a=arguments.length,r=Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];if(!1)var e,t;throw Error("[Immer] minified error nr: "+o+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Od(o){return!!o&&!!o[Ni]}function If(o){var a;return!!o&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var e=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return e===Object||typeof e=="function"&&Function.toString.call(e)===u8}(o)||Array.isArray(o)||!!o[S0]||!!((a=o.constructor)===null||a===void 0?void 0:a[S0])||W1(o)||$1(o))}function sq(o){return Od(o)||cs(23,o),o[Ni].t}function Sd(o,a,r){r===void 0&&(r=!1),wh(o)===0?(r?Object.keys:up)(o).forEach(function(n){r&&typeof n=="symbol"||a(n,o[n],o)}):o.forEach(function(n,e){return a(e,n,o)})}function wh(o){var a=o[Ni];return a?a.i>3?a.i-4:a.i:Array.isArray(o)?1:W1(o)?2:$1(o)?3:0}function xh(o,a){return wh(o)===2?o.has(a):Object.prototype.hasOwnProperty.call(o,a)}function H1(o,a){return wh(o)===2?o.get(a):o[a]}function aD(o,a,r){var n=wh(o);n===2?o.set(a,r):n===3?o.add(r):o[a]=r}function oD(o,a){return o===a?o!==0||1/o==1/a:o!=o&&a!=a}function W1(o){return o8&&o instanceof Map}function $1(o){return s8&&o instanceof Set}function fs(o){return o.o||o.t}function LS(o){if(Array.isArray(o))return Array.prototype.slice.call(o);var a=vD(o);delete a[Ni];for(var r=up(a),n=0;n<r.length;n++){var e=r[n],t=a[e];t.writable===!1&&(t.writable=!0,t.configurable=!0),(t.get||t.set)&&(a[e]={configurable:!0,writable:!0,enumerable:t.enumerable,value:o[e]})}return Object.create(Object.getPrototypeOf(o),a)}function jS(o,a){return a===void 0&&(a=!1),_S(o)||Od(o)||!If(o)||(wh(o)>1&&(o.set=o.add=o.clear=o.delete=t8),Object.freeze(o),a&&Sd(o,function(r,n){return jS(n,!0)},!0)),o}function t8(){cs(2)}function _S(o){return o==null||typeof o!="object"||Object.isFrozen(o)}function Rf(o){var a=$S[o];return a||cs(18,o),a}function FS(o,a){$S[o]||($S[o]=a)}function w0(){return O0}function BS(o,a){a&&(Rf("Patches"),o.u=[],o.s=[],o.v=a)}function X1(o){GS(o),o.p.forEach(n8),o.p=null}function GS(o){o===O0&&(O0=o.l)}function sD(o){return O0={p:[],l:O0,h:o,m:!0,_:0}}function n8(o){var a=o[Ni];a.i===0||a.i===1?a.j():a.g=!0}function zS(o,a){a._=a.p.length;var r=a.p[0],n=o!==void 0&&o!==r;return a.h.O||Rf("ES5").S(a,o,n),n?(r[Ni].P&&(X1(a),cs(4)),If(o)&&(o=K1(a,o),a.l||Y1(a,o)),a.u&&Rf("Patches").M(r[Ni].t,o,a.u,a.s)):o=K1(a,r,[]),X1(a),a.u&&a.v(a.u,a.s),o!==WS?o:void 0}function K1(o,a,r){if(_S(a))return a;var n=a[Ni];if(!n)return Sd(a,function(s,u){return uD(o,n,a,s,u,r)},!0),a;if(n.A!==o)return a;if(!n.P)return Y1(o,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var e=n.i===4||n.i===5?n.o=LS(n.k):n.o,t=e,i=!1;n.i===3&&(t=new Set(e),e.clear(),i=!0),Sd(t,function(s,u){return uD(o,n,e,s,u,r,i)}),Y1(o,e,!1),r&&o.u&&Rf("Patches").N(n,r,o.u,o.s)}return n.o}function uD(o,a,r,n,e,t,i){if(Od(e)){var s=K1(o,e,t&&a&&a.i!==3&&!xh(a.R,n)?t.concat(n):void 0);if(aD(r,n,s),!Od(s))return;o.m=!1}else i&&r.add(e);if(If(e)&&!_S(e)){if(!o.h.D&&o._<1)return;K1(o,e),a&&a.A.l||Y1(o,e)}}function Y1(o,a,r){r===void 0&&(r=!1),!o.l&&o.h.D&&o.m&&jS(a,r)}function US(o,a){var r=o[Ni];return(r?fs(r):o)[a]}function lD(o,a){if(a in o)for(var r=Object.getPrototypeOf(o);r;){var n=Object.getOwnPropertyDescriptor(r,a);if(n)return n;r=Object.getPrototypeOf(r)}}function Xu(o){o.P||(o.P=!0,o.l&&Xu(o.l))}function VS(o){o.o||(o.o=LS(o.t))}function x0(o,a,r){var n=W1(a)?Rf("MapSet").F(a,r):$1(a)?Rf("MapSet").T(a,r):o.O?function(e,t){var i=Array.isArray(e),s={i:i?1:0,A:t?t.A:w0(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},u=s,l=M0;i&&(u=[s],l=A0);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return s.k=d,s.j=f,d}(a,r):Rf("ES5").J(a,r);return(r?r.A:w0()).p.push(n),n}function r8(o){return Od(o)||cs(22,o),function a(r){if(!If(r))return r;var n,e=r[Ni],t=wh(r);if(e){if(!e.P&&(e.i<4||!Rf("ES5").K(e)))return e.t;e.I=!0,n=cD(r,t),e.I=!1}else n=cD(r,t);return Sd(n,function(i,s){e&&H1(e.t,i)===s||aD(n,i,a(s))}),t===3?new Set(n):n}(o)}function cD(o,a){switch(a){case 2:return new Map(o);case 3:return Array.from(o)}return LS(o)}function i8(){function o(i,s){var u=t[i];return u?u.enumerable=s:t[i]=u={configurable:!0,enumerable:s,get:function(){var c=this[Ni];return M0.get(c,i)},set:function(c){var f=this[Ni];M0.set(f,i,c)}},u}function a(i){for(var s=i.length-1;s>=0;s--){var u=i[s][Ni];if(!u.P)switch(u.i){case 5:n(u)&&Xu(u);break;case 4:r(u)&&Xu(u)}}}function r(i){for(var s=i.t,u=i.k,l=up(u),c=l.length-1;c>=0;c--){var f=l[c];if(f!==Ni){var d=s[f];if(d===void 0&&!xh(s,f))return!0;var h=u[f],p=h&&h[Ni];if(p?p.t!==d:!oD(h,d))return!0}}var m=!!s[Ni];return l.length!==up(s).length+(m?0:1)}function n(i){var s=i.k;if(s.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var l=0;l<s.length;l++)if(!s.hasOwnProperty(l))return!0;return!1}function e(i){i.g&&cs(3,JSON.stringify(fs(i)))}var t={};FS("ES5",{J:function(s,u){var l=Array.isArray(s),c=function(d,h){if(d){for(var p=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(p,""+m,o(m,!0));return p}var b=vD(h);delete b[Ni];for(var E=up(b),x=0;x<E.length;x++){var O=E[x];b[O]=o(O,d||!!b[O].enumerable)}return Object.create(Object.getPrototypeOf(h),b)}(l,s),f={i:l?5:4,A:u?u.A:w0(),P:!1,I:!1,R:{},l:u,t:s,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,Ni,{value:f,writable:!0}),c},S:function(s,u,l){l?Od(u)&&u[Ni].A===s&&a(s.p):(s.u&&function c(f){if(f&&typeof f=="object"){var d=f[Ni];if(d){var h=d.t,p=d.k,m=d.R,b=d.i;if(b===4)Sd(p,function(I){I!==Ni&&(h[I]!==void 0||xh(h,I)?m[I]||c(p[I]):(m[I]=!0,Xu(d)))}),Sd(h,function(I){p[I]!==void 0||xh(p,I)||(m[I]=!1,Xu(d))});else if(b===5){if(n(d)&&(Xu(d),m.length=!0),p.length<h.length)for(var E=p.length;E<h.length;E++)m[E]=!1;else for(var x=h.length;x<p.length;x++)m[x]=!0;for(var O=Math.min(p.length,h.length),D=0;D<O;D++)p.hasOwnProperty(D)||(m[D]=!0),m[D]===void 0&&c(p[D])}}}}(s.p[0]),a(s.p))},K:function(s){return s.i===4?r(s):n(s)}})}function a8(){function o(n){if(!If(n))return n;if(Array.isArray(n))return n.map(o);if(W1(n))return new Map(Array.from(n.entries()).map(function(i){return[i[0],o(i[1])]}));if($1(n))return new Set(Array.from(n).map(o));var e=Object.create(Object.getPrototypeOf(n));for(var t in n)e[t]=o(n[t]);return xh(n,S0)&&(e[S0]=n[S0]),e}function a(n){return Od(n)?o(n):n}var r="add";FS("Patches",{$:function(e,t){return t.forEach(function(i){for(var s=i.path,u=i.op,l=e,c=0;c<s.length-1;c++){var f=wh(l),d=s[c];typeof d!="string"&&typeof d!="number"&&(d=""+d),f!==0&&f!==1||d!=="__proto__"&&d!=="constructor"||cs(24),typeof l=="function"&&d==="prototype"&&cs(24),typeof(l=H1(l,d))!="object"&&cs(15,s.join("/"))}var h=wh(l),p=o(i.value),m=s[s.length-1];switch(u){case"replace":switch(h){case 2:return l.set(m,p);case 3:cs(16);default:return l[m]=p}case r:switch(h){case 1:return m==="-"?l.push(p):l.splice(m,0,p);case 2:return l.set(m,p);case 3:return l.add(p);default:return l[m]=p}case"remove":switch(h){case 1:return l.splice(m,1);case 2:return l.delete(m);case 3:return l.delete(i.value);default:return delete l[m]}default:cs(17,u)}}),e},N:function(e,t,i,s){switch(e.i){case 0:case 4:case 2:return function(u,l,c,f){var d=u.t,h=u.o;Sd(u.R,function(p,m){var b=H1(d,p),E=H1(h,p),x=m?xh(d,p)?"replace":r:"remove";if(b!==E||x!=="replace"){var O=l.concat(p);c.push(x==="remove"?{op:x,path:O}:{op:x,path:O,value:E}),f.push(x===r?{op:"remove",path:O}:x==="remove"?{op:r,path:O,value:a(b)}:{op:"replace",path:O,value:a(b)})}})}(e,t,i,s);case 5:case 1:return function(u,l,c,f){var d=u.t,h=u.R,p=u.o;if(p.length<d.length){var m=[p,d];d=m[0],p=m[1];var b=[f,c];c=b[0],f=b[1]}for(var E=0;E<d.length;E++)if(h[E]&&p[E]!==d[E]){var x=l.concat([E]);c.push({op:"replace",path:x,value:a(p[E])}),f.push({op:"replace",path:x,value:a(d[E])})}for(var O=d.length;O<p.length;O++){var D=l.concat([O]);c.push({op:r,path:D,value:a(p[O])})}d.length<p.length&&f.push({op:"replace",path:l.concat(["length"]),value:d.length})}(e,t,i,s);case 3:return function(u,l,c,f){var d=u.t,h=u.o,p=0;d.forEach(function(m){if(!h.has(m)){var b=l.concat([p]);c.push({op:"remove",path:b,value:m}),f.unshift({op:r,path:b,value:m})}p++}),p=0,h.forEach(function(m){if(!d.has(m)){var b=l.concat([p]);c.push({op:r,path:b,value:m}),f.unshift({op:"remove",path:b,value:m})}p++})}(e,t,i,s)}},M:function(e,t,i,s){i.push({op:"replace",path:[],value:t===WS?void 0:t}),s.push({op:"replace",path:[],value:e})}})}function fD(){function o(s,u){function l(){this.constructor=s}e(s,u),s.prototype=(l.prototype=u.prototype,new l)}function a(s){s.o||(s.R=new Map,s.o=new Map(s.t))}function r(s){s.o||(s.o=new Set,s.t.forEach(function(u){if(If(u)){var l=x0(s.A.h,u,s);s.p.set(u,l),s.o.add(l)}else s.o.add(u)}))}function n(s){s.g&&cs(3,JSON.stringify(fs(s)))}var e=function(u,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])})(u,l)},t=function(){function s(l,c){return this[Ni]={i:2,l:c,A:c?c.A:w0(),P:!1,I:!1,o:void 0,R:void 0,t:l,k:this,C:!1,g:!1},this}o(s,Map);var u=s.prototype;return Object.defineProperty(u,"size",{get:function(){return fs(this[Ni]).size}}),u.has=function(l){return fs(this[Ni]).has(l)},u.set=function(l,c){var f=this[Ni];return n(f),fs(f).has(l)&&fs(f).get(l)===c||(a(f),Xu(f),f.R.set(l,!0),f.o.set(l,c),f.R.set(l,!0)),this},u.delete=function(l){if(!this.has(l))return!1;var c=this[Ni];return n(c),a(c),Xu(c),c.t.has(l)?c.R.set(l,!1):c.R.delete(l),c.o.delete(l),!0},u.clear=function(){var l=this[Ni];n(l),fs(l).size&&(a(l),Xu(l),l.R=new Map,Sd(l.t,function(c){l.R.set(c,!1)}),l.o.clear())},u.forEach=function(l,c){var f=this;fs(this[Ni]).forEach(function(d,h){l.call(c,f.get(h),h,f)})},u.get=function(l){var c=this[Ni];n(c);var f=fs(c).get(l);if(c.I||!If(f)||f!==c.t.get(l))return f;var d=x0(c.A.h,f,c);return a(c),c.o.set(l,d),d},u.keys=function(){return fs(this[Ni]).keys()},u.values=function(){var l,c=this,f=this.keys();return(l={})[Z1]=function(){return c.values()},l.next=function(){var d=f.next();return d.done?d:{done:!1,value:c.get(d.value)}},l},u.entries=function(){var l,c=this,f=this.keys();return(l={})[Z1]=function(){return c.entries()},l.next=function(){var d=f.next();if(d.done)return d;var h=c.get(d.value);return{done:!1,value:[d.value,h]}},l},u[Z1]=function(){return this.entries()},s}(),i=function(){function s(l,c){return this[Ni]={i:3,l:c,A:c?c.A:w0(),P:!1,I:!1,o:void 0,t:l,k:this,p:new Map,g:!1,C:!1},this}o(s,Set);var u=s.prototype;return Object.defineProperty(u,"size",{get:function(){return fs(this[Ni]).size}}),u.has=function(l){var c=this[Ni];return n(c),c.o?!!c.o.has(l)||!(!c.p.has(l)||!c.o.has(c.p.get(l))):c.t.has(l)},u.add=function(l){var c=this[Ni];return n(c),this.has(l)||(r(c),Xu(c),c.o.add(l)),this},u.delete=function(l){if(!this.has(l))return!1;var c=this[Ni];return n(c),r(c),Xu(c),c.o.delete(l)||!!c.p.has(l)&&c.o.delete(c.p.get(l))},u.clear=function(){var l=this[Ni];n(l),fs(l).size&&(r(l),Xu(l),l.o.clear())},u.values=function(){var l=this[Ni];return n(l),r(l),l.o.values()},u.entries=function(){var l=this[Ni];return n(l),r(l),l.o.entries()},u.keys=function(){return this.values()},u[Z1]=function(){return this.values()},u.forEach=function(l,c){for(var f=this.values(),d=f.next();!d.done;)l.call(c,d.value,d.value,this),d=f.next()},s}();FS("MapSet",{F:function(u,l){return new t(u,l)},T:function(u,l){return new i(u,l)}})}function uq(){i8(),fD(),a8()}function lq(o){return o}function cq(o){return o}var dD,O0,HS=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",o8=typeof Map!="undefined",s8=typeof Set!="undefined",hD=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",WS=HS?Symbol.for("immer-nothing"):((dD={})["immer-nothing"]=!0,dD),S0=HS?Symbol.for("immer-draftable"):"__$immer_draftable",Ni=HS?Symbol.for("immer-state"):"__$immer_state",Z1=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",fq={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(a){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+a},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(a){return"Cannot apply patch, path doesn't resolve: "+a},16:'Sets cannot have "replace" patches.',17:function(a){return"Unsupported patch operation: "+a},18:function(a){return"The plugin for '"+a+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+a+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(a){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+a+"'"},22:function(a){return"'current' expects a draft, got: "+a},23:function(a){return"'original' expects a draft, got: "+a},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},u8=""+Object.prototype.constructor,up=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(o){return Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o))}:Object.getOwnPropertyNames,vD=Object.getOwnPropertyDescriptors||function(o){var a={};return up(o).forEach(function(r){a[r]=Object.getOwnPropertyDescriptor(o,r)}),a},$S={},M0={get:function(a,r){if(r===Ni)return a;var n=fs(a);if(!xh(n,r))return function(t,i,s){var u,l=lD(i,s);return l?"value"in l?l.value:(u=l.get)===null||u===void 0?void 0:u.call(t.k):void 0}(a,n,r);var e=n[r];return a.I||!If(e)?e:e===US(a.t,r)?(VS(a),a.o[r]=x0(a.A.h,e,a)):e},has:function(a,r){return r in fs(a)},ownKeys:function(a){return Reflect.ownKeys(fs(a))},set:function(a,r,n){var e=lD(fs(a),r);if(e==null?void 0:e.set)return e.set.call(a.k,n),!0;if(!a.P){var t=US(fs(a),r),i=t==null?void 0:t[Ni];if(i&&i.t===n)return a.o[r]=n,a.R[r]=!1,!0;if(oD(n,t)&&(n!==void 0||xh(a.t,r)))return!0;VS(a),Xu(a)}return a.o[r]===n&&(n!==void 0||r in a.o)||Number.isNaN(n)&&Number.isNaN(a.o[r])||(a.o[r]=n,a.R[r]=!0),!0},deleteProperty:function(a,r){return US(a.t,r)!==void 0||r in a.t?(a.R[r]=!1,VS(a),Xu(a)):delete a.R[r],a.o&&delete a.o[r],!0},getOwnPropertyDescriptor:function(a,r){var n=fs(a),e=Reflect.getOwnPropertyDescriptor(n,r);return e&&{writable:!0,configurable:a.i!==1||r!=="length",enumerable:e.enumerable,value:n[r]}},defineProperty:function(){cs(11)},getPrototypeOf:function(a){return Object.getPrototypeOf(a.t)},setPrototypeOf:function(){cs(12)}},A0={};Sd(M0,function(o,a){A0[o]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}}),A0.deleteProperty=function(o,a){return A0.set.call(this,o,a,void 0)},A0.set=function(o,a,r){return M0.set.call(this,o[0],a,r,o[0])};var l8=function(){function o(r){var n=this;this.O=hD,this.D=!0,this.produce=function(e,t,i){if(typeof e=="function"&&typeof t!="function"){var s=t;t=e;var u=n;return function(m){var b=this;m===void 0&&(m=s);for(var E=arguments.length,x=Array(E>1?E-1:0),O=1;O<E;O++)x[O-1]=arguments[O];return u.produce(m,function(D){var I;return(I=t).call.apply(I,[b,D].concat(x))})}}var l;if(typeof t!="function"&&cs(6),i!==void 0&&typeof i!="function"&&cs(7),If(e)){var c=sD(n),f=x0(n,e,void 0),d=!0;try{l=t(f),d=!1}finally{d?X1(c):GS(c)}return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(m){return BS(c,i),zS(m,c)},function(m){throw X1(c),m}):(BS(c,i),zS(l,c))}if(!e||typeof e!="object"){if((l=t(e))===void 0&&(l=e),l===WS&&(l=void 0),n.D&&jS(l,!0),i){var h=[],p=[];Rf("Patches").M(e,l,h,p),i(h,p)}return l}cs(21,e)},this.produceWithPatches=function(e,t){if(typeof e=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return n.produceWithPatches(l,function(h){return e.apply(void 0,[h].concat(f))})};var i,s,u=n.produce(e,t,function(l,c){i=l,s=c});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(l){return[l,i,s]}):[u,i,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var a=o.prototype;return a.createDraft=function(r){If(r)||cs(8),Od(r)&&(r=r8(r));var n=sD(this),e=x0(this,r,void 0);return e[Ni].C=!0,GS(n),e},a.finishDraft=function(r,n){var e=r&&r[Ni],t=e.A;return BS(t,n),zS(void 0,t)},a.setAutoFreeze=function(r){this.D=r},a.setUseProxies=function(r){r&&!hD&&cs(20),this.O=r},a.applyPatches=function(r,n){var e;for(e=n.length-1;e>=0;e--){var t=n[e];if(t.path.length===0&&t.op==="replace"){r=t.value;break}}e>-1&&(n=n.slice(e+1));var i=Rf("Patches").$;return Od(r)?i(r,n):this.produce(r,function(s){return i(s,n)})},o}(),Cl=new l8,gD=Cl.produce,dq=Cl.produceWithPatches.bind(Cl),c8=Cl.setAutoFreeze.bind(Cl),hq=Cl.setUseProxies.bind(Cl),vq=Cl.applyPatches.bind(Cl),f8=Cl.createDraft.bind(Cl),d8=Cl.finishDraft.bind(Cl),gq=gD;fD(),c8(!1);var Gc;(function(o){o.EMPTY_VALUE=Symbol("EMPTY_MODEL_VALUE");function a(n){return n!==o.EMPTY_VALUE}o.isValidValue=a;function r(n){return n.pipe(IU(),LU(function(e){return a(e)}),JU(17,Qk,{leading:!1,trailing:!0}))}o.defaultPipeFunction=r})(Gc||(Gc={}));var zv=Object(pe.a)(function o(){var a=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Gc.EMPTY_VALUE,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30;Object(Ie.a)(this,o),this.toDispose=new Xi,this.watch=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gc.defaultPipeFunction;a.subject$.observers.length+1>a.maxSubscription&&console.warn("".concat(a.subject$," reach maxSubscription limitation, please check"));var i=t?t(a.subject$):a.subject$,s=i.subscribe(e);return Or.create(function(){s.unsubscribe()})},this.getValue=function(){return a.subject$.getValue()},this.setValue=function(e){if(!!a.subject$){if(typeof e=="function"){var t=a.subject$.getValue(),i=gD(t,function(s){e(s)});Gc.isValidValue(i)&&a.setValue(i);return}a.subject$.next(e)}},this.hasValidValue=function(){var e=a.getValue();return Gc.isValidValue(e)},this.getValidValue=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function e(){var t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=new $u,!this.hasValidValue()){u.next=3;break}return u.abrupt("return",this.getValue());case 3:return i=this.watch(function(l){Gc.isValidValue(l)&&(t.resolve(l),i.dispose())}),u.abrupt("return",t.promise);case 5:case"end":return u.stop()}},e,this)}))},this.dispose=function(){a.toDispose.dispose()},this.subject$=new DU(r||Gc.EMPTY_VALUE),this.maxSubscription=n,this.toDispose.push(Or.create(function(){a.subject$.complete(),a.subject$.unsubscribe(),a.subject$=null}))}),Oh=Pe.Syringe.defineToken("IFrontendApplicationContribution"),Uv=Symbol("IGraphCommandService"),Mi=Pe.Syringe.defineToken("ICommandHandler"),Ai=Symbol("ICommandContextProvider"),XS=Symbol("IGraphCommandFactory"),J1=Pe.Syringe.defineToken("IGraphCommandContribution"),KS;(function(o){function a(e){return!!e&&e===Object(e)&&"id"in e}o.is=a;function r(e,t){if(e.label&&t.label){var i=(e.category?"".concat(e.category,": ").concat(e.label):e.label).toLowerCase(),s=(t.category?"".concat(t.category,": ").concat(t.label):t.label).toLowerCase();return i.localeCompare(s)}else return 0}o.compareCommands=r;function n(e,t){return e.id===t.id&&e.label===t.label&&e.iconName===t.iconName&&e.category===t.category}o.equals=n})(KS||(KS={}));var YS=function(){function o(a){var r=this;Object(Ie.a)(this,o),this.contributionProvider=a,this.redoStack=[],this.undoStack=[],this.commands=new Map,this.factories=new Map,this.disposables=new Map,this.cmdChangeEvent=new zv(null),this.Globals=new zv(new Map),this.setGlobal=function(n,e){r.Globals.setValue(function(t){t.set(n,e)})},this.getGlobal=function(n){var e=r.Globals.getValue();return e.get(n)},this.undoCommand=function(){return ue(r,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this.undoStack.pop(),e){i.next=4;break}return console.error("empty undo stack"),i.abrupt("return");case 4:return i.next=6,e.undo();case 6:this.redoStack.push(e),this.cmdChangeEvent.setValue(null);case 8:case"end":return i.stop()}},n,this)}))},this.redoCommand=function(){return ue(r,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=this.redoStack.pop(),e){i.next=4;break}return console.error("empty undo stack"),i.abrupt("return");case 4:return i.next=6,e.redo();case 6:this.undoStack.push(e),this.cmdChangeEvent.setValue(null);case 8:case"end":return i.stop()}},n,this)}))},this.registerDisposableCommand=function(n){var e=new Xi,t={registerCommand:function(s,u){var l=r.registerCommand(s,u);return e.push(l),l}};return n(t),e}}return Object(pe.a)(o,[{key:"watchChange",get:function(){return this.cmdChangeEvent.watch}},{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(ir.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerGraphCommands(this)}}catch(i){n.e(i)}finally{n.f()}}},{key:"executeCommandPipeline",value:function(r){return ue(this,void 0,void 0,Object(k.a)().mark(function n(){var e,t,i,s,u,l,c,f;return Object(k.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:e=null,t=Object(ir.a)(r),h.prev=2,t.s();case 4:if((i=t.n()).done){h.next=17;break}return s=i.value,u=e==null?void 0:e.contextProvider(),h.next=9,s==null?void 0:s.getCommandOption(u);case 9:return l=h.sent,c=l.args,f=l.hooks,h.next=14,this.executeCommand(s==null?void 0:s.commandId,c,f);case 14:e=h.sent;case 15:h.next=4;break;case 17:h.next=22;break;case 19:h.prev=19,h.t0=h.catch(2),t.e(h.t0);case 22:return h.prev=22,t.f(),h.finish(22);case 25:return this.cmdChangeEvent.setValue(null),h.abrupt("return",e);case 27:case"end":return h.stop()}},n,this,[[2,19,22,25]])}))}},{key:"executeCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ue(this,void 0,void 0,Object(k.a)().mark(function t(){var i,s;return Object(k.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(i=this.getFactory(r),!i){l.next=10;break}return l.next=4,i.createCommand(r,n,e);case 4:return s=l.sent,l.next=7,s.execute();case 7:return s.isUndoable()&&this.undoStack.push(s),this.cmdChangeEvent.setValue(null),l.abrupt("return",s);case 10:throw Object.assign(new Error("The command '".concat(r,"' cannot be executed. There are no active handlers available for the command.")),{code:"NO_ACTIVE_HANDLER"});case 11:case"end":return l.stop()}},t,this)}))}},{key:"executeUndoCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ue(this,void 0,void 0,Object(k.a)().mark(function t(){var i,s;return Object(k.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(i=this.getFactory(r),!i){l.next=8;break}return l.next=4,i.createCommand(r,n,e);case 4:return s=l.sent,l.next=7,s.execute();case 7:return l.abrupt("return",s);case 8:throw Object.assign(new Error("The command '".concat(r,"' cannot be executed. There are no active handlers available for the command.")),{code:"NO_ACTIVE_HANDLER"});case 9:case"end":return l.stop()}},t,this)}))}},{key:"createCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ue(this,void 0,void 0,Object(k.a)().mark(function t(){var i,s;return Object(k.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(i=this.getFactory(r),!i){l.next=6;break}return l.next=4,i.createCommand(r,n,e);case 4:return s=l.sent,l.abrupt("return",s);case 6:throw Object.assign(new Error("The command '".concat(r,"' cannot be executed. There are no active handlers available for the command.")),{code:"NO_ACTIVE_HANDLER"});case 7:case"end":return l.stop()}},t,this)}))}},{key:"isUndoable",get:function(){return this.undoStack.length>0}},{key:"isRedoable",get:function(){return this.redoStack.length>0}},{key:"hasCommand",value:function(r){return this.commands.has(r)}},{key:"getCommand",value:function(r){return this.commands.get(r)}},{key:"registerCommand",value:function(r,n){var e=this;if(this.factories.has(r.id))return console.warn("A command ".concat(r.id," is already registered.")),Or.NULL;var t=new Xi(this.doRegisterCommand(r),this.registerFactory(r.id,n),Or.create(function(){return e.disposables.delete(r.id)}));return this.disposables.set(r.id,t),t}},{key:"doRegisterCommand",value:function(r){var n=this;return this.commands.set(r.id,r),Or.create(function(){return n.disposables.delete(r.id)})}},{key:"unregisterCommand",value:function(r){var n=KS.is(r)?r.id:r,e=this.disposables.get(n);e&&e.dispose()}},{key:"hasFactory",value:function(r){var n=this.factories.get(r);return!!n}},{key:"getFactory",value:function(r){var n=this.factories.get(r);return n}},{key:"registerFactory",value:function(r,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.hasFactory(r)&&t===!1&&console.error("cannot register command:",r),this.factories.set(r,n),Or.create(function(){e.factories.delete(r)})}},{key:"getAllFactories",value:function(){return Array.from(this.factories.entries())}}]),o}();YS=nt([Object(Pe.singleton)({contrib:[Oh,Uv]}),$t(0,Object(Pe.contrib)(J1)),ze("design:paramtypes",[Object])],YS);var h8=Object(Pe.Module)(function(o){Pe.Contribution.register(o,J1),o(YS)}),Vv=Pe.Syringe.defineToken("IModelService"),Hv=Pe.Syringe.defineToken("IModelContribution"),pD=Symbol("IModelOptionProvider"),T0;(function(o){o.ASYNC_SRRIES="ASYNC_SRRIES",o.ASYNC_PARALLEL="ASYNC_PARALLEL"})(T0||(T0={}));var v8=v("xdlL"),g8=v("ZKkB"),p8=v("r5xO"),m8=v.n(p8),lp;(function(o){var a;(function(e){e.INVALID_HOOK_BEFORE="INVALID_HOOK_BEFORE",e.INVALID_HOOK_AFTER="INVALID_HOOK_AFTER",e.INVALID_HOOK_ARGS_LENGTH="INVALID_HOOK_ARGS_LENGTH"})(a=o.ErrorEnum||(o.ErrorEnum={}));var r=function(e){Object($n.a)(i,e);var t=Object(Xn.a)(i);function i(s,u){var l;Object(Ie.a)(this,i),Array.isArray(u)&&(u=u.filter(function(h){return!!h}).join(" ")),l=t.call(this,"".concat(s,": ").concat(u)),Error.captureStackTrace&&Error.captureStackTrace(Object(Co.a)(l),i),l.code=s,l.contexts={};for(var c=arguments.length,f=new Array(c>2?c-2:0),d=2;d<c;d++)f[d-2]=arguments[d];return f.forEach(function(h){typeof h=="object"&&Object.entries(h).forEach(function(p){var m=Object(Xe.a)(p,2),b=m[0],E=m[1];b!=="key"&&E&&(l.contexts[b]=JSON.parse(JSON.stringify(E)))})}),l}return Object(pe.a)(i,[{key:"toString",value:function(){return"".concat(this.code,": ").concat(this.message)}}]),i}(Object(g8.a)(Error));o.HookError=r;var n=function(t,i){for(var s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];return Object(v8.a)(r,[t,i].concat(u))};o.HookBeforeError=function(){return n(a.INVALID_HOOK_BEFORE,["hook require a before dependency but not exist in hookmap"])},o.HookAfterError=function(){return n(a.INVALID_HOOK_AFTER,["hook require a after dependency but not exist in hookmap"])},o.InvalidHookArguments=function(e){return n(a.INVALID_HOOK_ARGS_LENGTH,["hook handlers must have 0 to 2 arguments","but got ".concat(e.handler.length)])}})(lp||(lp={}));var Q1;(function(o){o.normalize=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=Array.isArray(a)?a:[a],e=[];return r.forEach(function(t){e.push(t)}),[].concat(e,Object(ot.a)(n)).filter(function(t){return t&&!!t.handler})},o.sort=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=[];a.forEach(function(t){if(t.before){if(!r.has(t.before))throw lp.HookBeforeError();var i=[t,r.get(t.before)];n.push(i)}if(t.after){if(!r.has(t.after))throw lp.HookBeforeError();var s=[r.get(t.after),t];n.push(s)}});var e=m8.a.array(a,n);return e}})(Q1||(Q1={}));var y8=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.isResolved=!1,this.isRejected=!1,this.promise=new Promise(function(r,n){a.resolve=function(e){a.isResolved=!0,r(e)},a.reject=function(e){a.isRejected=!0,n(e)}})}),zc=Object(pe.a)(function o(a){var r=this,n;Object(Ie.a)(this,o),this.scheduleType=T0.ASYNC_SRRIES,this.hasHook=function(e){return r.hookMap.has(e)},this.getHooks=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=Q1.normalize(e,r.hookMap);return t?Q1.sort(i,r.hookMap):i},this.registerHook=function(e){return r.hookMap.has(e.name)&&console.error("".concat(e.name," is duplicated in hookmap")),r.hookMap.set(e.name,e),{dispose:function(){r.hookMap.delete(e.name)}}},this.call=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s){return ue(r,void 0,void 0,Object(k.a)().mark(function u(){return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",s);case 1:case"end":return c.stop()}},u)}))},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ue(r,void 0,void 0,Object(k.a)().mark(function s(){var u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return u=this.getHooks(i,!0),l=this.schedulers[this.scheduleType],f.abrupt("return",l(e,t,u));case 3:case"end":return f.stop()}},s,this)}))},this.schedulers=(n={},Object(Qe.a)(n,T0.ASYNC_SRRIES,function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ue(r,void 0,void 0,Object(k.a)().mark(function s(){var u,l,c,f,d,h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:u=t,l=Object(ir.a)(i),m.prev=2,l.s();case 4:if((c=l.n()).done){m.next=26;break}if(f=c.value,![0,1].includes(f.handler.length)){m.next=10;break}return m.next=9,f.handler.call(this,e);case 9:return m.abrupt("continue",24);case 10:if(!([2].includes(f.handler.length)&&u!==null)){m.next=22;break}return m.next=13,f.handler.call(this,e,u);case 13:if(d=m.sent,d!==null){m.next=19;break}return u=null,m.abrupt("break",26);case 19:if(typeof d!="function"){m.next=22;break}return u=d,m.abrupt("continue",24);case 22:throw h=lp.InvalidHookArguments(f),h;case 24:m.next=4;break;case 26:m.next=31;break;case 28:m.prev=28,m.t0=m.catch(2),l.e(m.t0);case 31:return m.prev=31,l.f(),m.finish(31);case 34:if(!u){m.next=38;break}return m.next=37,u.call(this,e);case 37:return m.abrupt("return",m.sent);case 38:case"end":return m.stop()}},s,this,[[2,28,31,34]])}))}),Object(Qe.a)(n,T0.ASYNC_PARALLEL,function(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return ue(r,void 0,void 0,Object(k.a)().mark(function s(){var u=this,l,c;return Object(k.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(l=i.map(function(h){if([0,1].includes(h.handler.length))return h.handler.call(u,e);if([2].includes(h.handler.length))return h.handler.call(u,e,t);throw lp.InvalidHookArguments(h)}),c=new y8,Promise.all(l).then(function(h){return c.resolve(h)}),!t){d.next=7;break}return d.next=6,t.call(this,c);case 6:return d.abrupt("return",d.sent);case 7:case"end":return d.stop()}},s,this)}))}),n),this.hookMap=new Map,a&&a.type&&(this.scheduleType=a.type)}),ZS=Pe.Syringe.defineToken("IHookService"),Zl=Pe.Syringe.defineToken("IHookContribution"),b8=function(){return{graphOptions:new zc,reactNodeRender:new zc,reactEdgeLabelRender:new zc,afterGraphInit:new zc,beforeGraphDestroy:new zc,x6Events:new zc}},mD=function(){return{dispose:function(){}}},JS;(function(o){o.CONFIG_TYPE="XFlowHook"})(JS||(JS={}));var P0=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.CONFIG_TYPE=JS.CONFIG_TYPE,this.time=Date.now(),this.setRegisterHook=function(r){a.hookRegisterFunc=r},this.setRegisterHookhub=function(r){a.hookhubRegisterFn=r},this.getConfig=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={CONFIG_TYPE:this.CONFIG_TYPE,hookRegisterFn:this.hookRegisterFunc||mD,hookhubRegisterFn:this.hookhubRegisterFn||mD},t.abrupt("return",n);case 2:case"end":return t.stop()}},r,this)}))},this.dispose=function(){}}),q1=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.hookProvider=function(){return a.hooks},this.registerHook=function(r){return r(a.hooks)},this.registerHookHub=function(r,n){return a.hooks[r]=n,{dispose:function(){delete a.hooks[r]}}},this.onStart=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:n=this.contributionProvider.getContributions(),e=Object(ir.a)(n);try{for(e.s();!(t=e.n()).done;)i=t.value,i.registerHookHub(this)}catch(d){e.e(d)}finally{e.f()}s=Object(ir.a)(n);try{for(s.s();!(u=s.n()).done;)l=u.value,l.registerHook(this.hooks)}catch(d){s.e(d)}finally{s.f()}case 5:case"end":return f.stop()}},r,this)}))},this.hooks=b8()}return Object(pe.a)(o,[{key:"onStop",value:function(){this.toDispose.dispose()}}]),o}();nt([Object(Pe.contrib)(Zl),ze("design:type",Object)],q1.prototype,"contributionProvider",void 0),q1=nt([Object(Pe.singleton)({contrib:[Oh,ZS]}),ze("design:paramtypes",[])],q1);var yD;(function(o){o.pluginId="GraphEventPlugin"})(yD||(yD={}));var e2=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.hookConfig.getConfig();case 2:return e=u.sent,t=e.hookRegisterFn,i=t(r),u.abrupt("return",Or.create(function(){i.dispose()}));case 6:case"end":return u.stop()}},n,this)}))},this.registerHookHub=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.hookConfig.getConfig();case 2:return e=u.sent,t=e.hookhubRegisterFn,i=t(r),u.abrupt("return",Or.create(function(){i.dispose()}));case 6:case"end":return u.stop()}},n,this)}))}});nt([Object(Pe.inject)(P0),ze("design:type",P0)],e2.prototype,"hookConfig",void 0),e2=nt([Object(Pe.singleton)({contrib:Zl})],e2);var C8=function(){return null},bD={dispose:C8};function pq(o,a){var r;return function(){clearTimeout(r),r=window.setTimeout(o,a)}}function E8(o){var a;return function(){a||(a=requestAnimationFrame(function(){a=null,o()}))}}var CD=function(a){var r=document.createElement("style");return r.setAttribute("type","text/css"),document.head.appendChild(r),r.styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),r};function w8(o){return typeof o=="function"&&!!o.prototype.isReactComponent}function x8(o){return typeof o=="function"&&String(o).includes("return React.createElement")}function t2(o){return w8(o)||x8(o)}var k0;(function(o){o.pluginId="base-graph-events"})(k0||(k0={}));var n2=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.registerHookHub=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Xi,i=[r.x6Events.registerHook({name:k0.pluginId,handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d,h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.graphOptions.getOptions();case 2:d=m.sent,h=d.events,h.forEach(function(b){c.push(b)});case 5:case"end":return m.stop()}},f,this)}))}}),r.afterGraphInit.registerHook({name:k0.pluginId,handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d=this,h,p,m,b;return Object(k.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return h=c.commandService,p=c.modelService,m=c.graph,x.next=3,r.x6Events.call([],function(O){return ue(d,void 0,void 0,Object(k.a)().mark(function D(){return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",O.map(function(H){var $=function(de){H.callback(de,h,p,m)};return m.on(H.eventName,$),{dispose:function(){m.off(H.eventName,$)}}}));case 1:case"end":return F.stop()}},D)}))});case 3:b=x.sent,t.pushAll(b);case 5:case"end":return x.stop()}},f)}))}}),r.afterGraphInit.registerHook({name:"add auto resize event",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d,h,p,m,b,E;return Object(k.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:d=c.commandService,h=c.options,p=c.graph,m=E8(function(){d.executeCommand(wi.GRAPH_RESIZE.id,{})}),window.addEventListener("resize",m),b=h.rootContainer,E=new ResizeObserver(function(){return p.resize(b.clientWidth)}),b&&E.observe(b),t.push(Or.create(function(){window.removeEventListener("resize",m)}));case 7:case"end":return O.stop()}},f)}))}}),r.beforeGraphDestroy.registerHook({name:k0.pluginId,handler:function(){return ue(e,void 0,void 0,Object(k.a)().mark(function c(){return Object(k.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:t.dispose();case 1:case"end":return d.stop()}},c)}))}})],t.pushAll(i),u.abrupt("return",t);case 4:case"end":return u.stop()}},n)}))}});nt([Object(Pe.inject)(C0),ze("design:type",Object)],n2.prototype,"graphOptions",void 0),n2=nt([Object(Pe.singleton)({contrib:Zl})],n2);var O8=function(a){return Object(Pe.Module)(function(r){Pe.Contribution.register(r,Zl),r(e2),r(n2),r(q1),r(P0,{useValue:a})})},Uc=v("LvDl"),S8=function(){function o(){var a=this;Object(Ie.a)(this,o),this.extensions=[],this.containerClassNames=new Set,this.addCoreModule=function(r){return a.extensions.unshift(r),Or.create(function(){a.removeExtension(r)})},this.addExtension=function(r){return a.extensions.push(r),Or.create(function(){a.removeExtension(r)})},this.getExtension=function(r){return Object(Uc.find)(a.extensions,function(n){return Object(Uc.get)(n,"config.CONFIG_TYPE")===r})},this.removeExtension=function(r){var n=a.extensions.indexOf(r);n>-1&&a.extensions.splice(n,1)},this.getInstanceId=function(){return a.instanceId},this.addContainerClassNames=function(r){return a.containerClassNames.add(r)},this.getContainerClassNames=function(){return Array.from(a.containerClassNames)},this.getAllExtensions=function(){return a.extensions},this.getAllExtensionConfigs=function(){return a.extensions.map(function(r){return r.config})},this.instanceId=Fc()}return Object(pe.a)(o,[{key:"has",value:function(r){return this.extensions.some(function(n){return n.config.CONFIG_TYPE===r})}}]),o}(),M8=function(){var a=A.a.useMemo(function(){return new S8},[]);return a},ED=A.a.createContext({}),Jl=function(){return A.a.useContext(ED)},A8=function(a){var r=Jl(),n=A.a.useMemo(function(){return a.config?a.config:new P0},[]);return A.a.useEffect(function(){var e=r.addCoreModule({config:n,createModule:O8});return function(){e.dispose(),n.dispose()}},[r,n]),null},T8=function(a){return function(r){var n=A.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=A.a.useMemo(function(){var t=new P0;return a(t,n),t},[n]);return e}},QS=A.a.createContext({cell:null,x6Graph:null,commands:null,modelService:null}),wD=function(){return A.a.useContext(QS)};function r2(o,a,r){return function(n){var e=this,t=n==null?void 0:n.getData(),i=n==null?void 0:n.getSize(),s=n==null?void 0:n.getPosition(),u=function(){return A.a.createElement(QS.Provider,{value:{cell:n,x6Graph:e,commands:a,modelService:r}},A.a.createElement(o,{cell:n,data:t,size:i,position:s}))};return A.a.createElement(u,null)}}function P8(o,a,r){return function(n){var e=this,t=n==null?void 0:n.getData(),i=function(){return A.a.createElement(QS.Provider,{value:{cell:n,x6Graph:e,commands:a,modelService:r}},A.a.createElement(o,{data:t,cell:n}))};return A.a.createElement(i,null)}}var mq=function(){var a=A.a.useState(!1),r=Object(Xe.a)(a,2),n=r[0],e=r[1],t=wD(),i=t.x6Graph,s=t.cell;return A.a.useEffect(function(){var u=function(c){var f=c.added,d=c.removed,h=f.filter(function(m){return m.isNode()}).some(function(m){m.id,s.id});if(h){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!0})),e(!0);return}var p=d.filter(function(m){return m.isNode()}).some(function(m){m.id,s.id});if(p){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!1})),e(!1);return}};return i.on("selection:changed",u),function(){i.off("selection:changed",u)}},[i]),[n]},Wv=Symbol("IGraphProvider"),xD=Symbol("ICommandServiceProvider"),OD=Symbol("IModelServiceProvider"),Sh=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.graphMap=new Map,this.getGraph=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t,i,s,u,l,c,f,d,h,p,m,b,E,x;return Object(k.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(t=this.graphMap.get(r),t){D.next=31;break}return t=new $u,this.graphMap.set(r,t),D.next=6,this.optionProvider.getOptions();case 6:return i=D.sent,s=this.hookService.hookProvider(),D.next=10,s.graphOptions.call(i.x6Options);case 10:return u=D.sent,l=i.graphContainer,c=i.edgeRender,f=i.nodeRender,d=i.edgeTypeParser,D.next=14,s.reactEdgeLabelRender.call(c);case 14:return h=D.sent,D.next=17,s.reactNodeRender.call(f);case 17:return p=l.clientHeight,m=l.clientWidth,D.next=20,this.commandServiceProvider.getCommandService();case 20:return b=D.sent,D.next=23,this.modelServiceProvider.getModelService();case 23:return E=D.sent,x=new Wi(Object.assign(Object.assign({container:l,width:m,height:p},u),{onEdgeLabelRendered:function(F){var H=F.edge,$=F.container;e.renderEdgeReactLabel({edge:H,container:$,edgeRenderMap:h,edgeTypeParser:d,modelService:E,commandService:b})}})),D.next=27,s.afterGraphInit.call({graph:x,commandService:b,modelService:E,options:i});case 27:t.resolve(x),x.on("node:moved",function(I){var F=I.node,H=F.getData(),$=F.position();F.setData(Object.assign(Object.assign({},H),{x:$==null?void 0:$.x,y:$==null?void 0:$.y}))}),x.on("node:resized",function(I){var F=I.node,H=F.getData(),$=F.size();F.setData(Object.assign(Object.assign({},H),{width:$==null?void 0:$.width,height:$==null?void 0:$.height}))}),this.toDispose.push(Or.create(function(){return ue(e,void 0,void 0,Object(k.a)().mark(function I(){return Object(k.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,s.beforeGraphDestroy.call({graph:x,commandService:b,modelService:E,options:i});case 2:this.graphMap.delete(r),x.dispose();case 4:case"end":return H.stop()}},I,this)}))}));case 31:return D.abrupt("return",t.promise);case 32:case"end":return D.stop()}},n,this)}))},this.renderEdgeReactLabel=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e,t,i,s,u,l,c,f,d,h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(e=r.container,t=r.edgeTypeParser,i=r.edge,s=r.edgeRenderMap,u=r.commandService,l=r.modelService,c=t(i==null?void 0:i.data)||TS,f=s.get(c),f){m.next=5;break}return m.abrupt("return");case 5:i&&(i==null?void 0:i.data)&&f&&(d=this.edgeAppendForeignObject(i,e),h=P8(f,u,l)(i),Bv.a.render(h,d));case 6:case"end":return m.stop()}},n,this)}))}}return Object(pe.a)(o,[{key:"edgeAppendForeignObject",value:function(r,n){var e=R.createSvgElement("foreignObject"),t=R.createElementNS("body",R.ns.xhtml),i=R.createElementNS("div",R.ns.xhtml),s=r==null?void 0:r.data,u=(s==null?void 0:s.edgeContentWidth)||100,l=(s==null?void 0:s.edgeContentHeight)||30;return e.setAttribute("width","".concat(u)),e.setAttribute("height","".concat(l)),e.setAttribute("x","".concat(-1*u/2)),e.setAttribute("y","".concat(-1*l/2)),t.setAttribute("xhtmls",R.ns.xhtml),t.style.width="100%",t.style.height="100%",t.style.padding="0",t.style.margin="0",t.style.background="unset",t.style.overflow="visible",t.className="xflow-edge-label-body",i.style.width="100%",i.style.height="100%",t.appendChild(i),e.appendChild(t),n.appendChild(e),i}},{key:"dispose",value:function(){this.toDispose.dispose()}}]),o}();nt([Object(Pe.inject)(C0),ze("design:type",Object)],Sh.prototype,"optionProvider",void 0),nt([Object(Pe.inject)(ZS),ze("design:type",Object)],Sh.prototype,"hookService",void 0),nt([Object(Pe.inject)(xD),ze("design:type",Object)],Sh.prototype,"commandServiceProvider",void 0),nt([Object(Pe.inject)(OD),ze("design:type",Object)],Sh.prototype,"modelServiceProvider",void 0),Sh=nt([Object(Pe.singleton)()],Sh);var k8=function(a){a(Sh),a(Wv,{lifecycle:Pe.Syringe.Lifecycle.singleton,useDynamic:function(n){return{getGraphInstance:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){var i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i=n.container.get(Sh),s=n.container.get(C0),f.next=4,s==null?void 0:s.getOptions();case 4:return u=f.sent,f.next=7,i==null?void 0:i.getGraph(u.graphId);case 7:return l=f.sent,f.abrupt("return",l);case 9:case"end":return f.stop()}},t)}))},getGraphOptions:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){var i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=n.container.get(C0),u.abrupt("return",i==null?void 0:i.getOptions());case 2:case"end":return u.stop()}},t)}))}}}}),a(xD,{lifecycle:Pe.Syringe.Lifecycle.singleton,useDynamic:function(n){return{getCommandService:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){var i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=n.container.get(Uv),u.abrupt("return",i);case 2:case"end":return u.stop()}},t)}))}}}}),a(OD,{lifecycle:Pe.Syringe.Lifecycle.singleton,useDynamic:function(n){return{getModelService:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){var i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=n.container.get(Vv),u.abrupt("return",i);case 2:case"end":return u.stop()}},t)}))}}}})},qS;(function(o){o.CONFIG_TYPE="MODEL_SERVICE_CONFIG"})(qS||(qS={}));var eM=function(){return Or.create(function(){})},SD=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.CONFIG_TYPE=qS.CONFIG_TYPE,this.registerModelFn=eM,this.isMounted=new $u,this.registerModel=function(r){a.registerModelFn=r},this.setMountState=function(){a.isMounted.resolve(!0)},this.getConfig=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isMounted.promise;case 2:return e.abrupt("return",{CONFIG_TYPE:this.CONFIG_TYPE,modelRegisterFunc:this.registerModelFn||eM});case 3:case"end":return e.stop()}},r,this)}))},this.dispose=function(){a.registerModelFn=eM,a.isMounted=new $u}}),cp=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.deferredModelMap=new Map,this.registerModel=function(r){var n=r.id,e=r.getInitialValue,t=r.modelFactory,i=new Xi,s=a.ensureModel(n);if(s.isResolved){console.error(r,"model has been registerd");return}var u=e?e():Gc.EMPTY_VALUE,l=t?t():new zv(u);return Gc.isValidValue(u)&&s.resolve(l),r.watchChange&&r.watchChange(l,a).then(function(c){s.isResolved||s.resolve(l),a.toDispose.pushAll([c,i]),i.push(c)}),i},this.findDeferredModel=function(r){return a.deferredModelMap.get(r)},this.awaitModel=function(r){var n=a.ensureModel(r);return n.promise},this.registerRuntimeModel=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e,t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.modelOptionProvider.getOption();case 2:return n=s.sent,e=n.modelRegisterFunc,s.next=6,this.graphProvider.getGraphInstance();case 6:t=s.sent,e&&e(this,t);case 8:case"end":return s.stop()}},r,this)}))},this.ensureModel=function(r){var n=a.deferredModelMap.get(r);if(n)return n;var e=new $u;return a.deferredModelMap.set(r,e),a.toDispose.push(Or.create(function(){return a.deferredModelMap.delete(r)})),e}}return Object(pe.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(ir.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerModel(this)}}catch(i){n.e(i)}finally{n.f()}this.registerRuntimeModel()}},{key:"onStop",value:function(){this.toDispose.dispose()}}]),o}();nt([Object(Pe.contrib)(Hv),ze("design:type",Object)],cp.prototype,"contributionProvider",void 0),nt([Object(Pe.inject)(pD),ze("design:type",Object)],cp.prototype,"modelOptionProvider",void 0),nt([Object(Pe.inject)(Wv),ze("design:type",Object)],cp.prototype,"graphProvider",void 0),cp=nt([Object(Pe.singleton)({contrib:[Oh,Vv]})],cp);var D8=function(a){return function(r){var n=r.findDeferredModel(a);return!!(n&&n.promise)}},xo=function(a){return function(r){return ue(void 0,void 0,void 0,Object(k.a)().mark(function n(){return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awaitModel(a);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)}))}},Oo=function(a){return function(r){return ue(void 0,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.awaitModel(a);case 2:return e=i.sent,i.abrupt("return",e.getValidValue());case 4:case"end":return i.stop()}},n)}))}},i2;(function(o){o.id="GRAPH_ENABLE_MULTI_SELECT",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(i2||(i2={}));var D0;(function(o){o.id="GRAPH_FULLSCREEN",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(D0||(D0={}));var a2;(function(o){o.id="IS_NODE_SELECTED",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(a2||(a2={}));var o2;(function(o){o.id="IS_GROUP_SELECTED",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(o2||(o2={}));var s2;(function(o){o.id="IS_NORMAL_NODES_SELECTED",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(s2||(s2={}));var u2;(function(o){o.id="LAST_SELECTED_CELL",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(u2||(u2={}));var Mh;(function(o){o.id="SELECTED_CELLS",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(Mh||(Mh={}));var l2;(function(o){o.id="LAST_SELECTED_NODE",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(l2||(l2={}));var $v;(function(o){o.id="SELECTED_NODES",o.getModel=xo(o.id),o.useValue=Oo(o.id)})($v||($v={}));var tM;(function(o){o.id="SELECTED_EDGES",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(tM||(tM={}));var c2;(function(o){o.id="SELECTED_GROUPS",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(c2||(c2={}));var nM;(function(o){o.id="CONTEXTMENU_NODE",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(nM||(nM={}));var rM;(function(o){o.id="CONTEXTMENU_EDGE",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(rM||(rM={}));var f2;(function(o){o.id="CONTEXTMENU_TARGET",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(f2||(f2={}));var d2;(function(o){o.id="GRAPH_META",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(d2||(d2={}));var h2;(function(o){o.id="GRAPH_SCALE",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(h2||(h2={}));var v2;(function(o){o.id="COMMAND_REDOABLE",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(v2||(v2={}));var g2;(function(o){o.id="COMMAND_UNDOABLE",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(g2||(g2={}));var p2;(function(o){o.id="COMMAND_GLOBALS",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(p2||(p2={}));var m2;(function(o){o.id="HISTORY_UNDOABLE",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(m2||(m2={}));var y2;(function(o){o.id="HISTORY_REDOABLE",o.getModel=xo(o.id),o.useValue=Oo(o.id)})(y2||(y2={}));var b2=function(){function o(){Object(Ie.a)(this,o)}return Object(pe.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:v2.id,getInitialValue:function(){return n.commands.isRedoable},watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){var s=this,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return u=this.commands.watchChange(function(){t.setValue(s.commands.isRedoable)}),c.abrupt("return",u);case 2:case"end":return c.stop()}},i,this)}))}}),r.registerModel({id:g2.id,getInitialValue:function(){return n.commands.isUndoable},watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){var s=this,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return u=this.commands.watchChange(function(){t.setValue(s.commands.isUndoable)}),c.abrupt("return",u);case 2:case"end":return c.stop()}},i,this)}))}}),r.registerModel({id:p2.id,modelFactory:function(){return n.commands.Globals}})}}]),o}();nt([Object(Pe.inject)(Uv),ze("design:type",Object)],b2.prototype,"commands",void 0),b2=nt([Object(Pe.singleton)({contrib:Hv})],b2);var iM=function(a,r,n){return a.on(r,n),Or.create(function(){a.off(r,n)})},C2=function(){function o(){var a=this;Object(Ie.a)(this,o),this.getGraphInstance=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.graphProvider.getGraphInstance();case 2:return n=i.sent,i.next=5,this.graphProvider.getGraphOptions();case 5:return e=i.sent,i.abrupt("return",{graph:n,config:e});case 7:case"end":return i.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:d2.id,getInitialValue:function(){return{flowId:"-1"}},watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Or.create(function(){t.setValue({flowId:"-1"})}));case 1:case"end":return u.stop()}},i)}))}}),r.registerModel({id:i2.id,getInitialValue:function(){return{isEnable:!1}},watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",Or.create(function(){t.setValue({isEnable:!1})}));case 1:case"end":return u.stop()}},i)}))}}),r.registerModel({id:D0.id,getInitialValue:function(){return!1},watchChange:function(t,i){return ue(n,void 0,void 0,Object(k.a)().mark(function s(){var u=this,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l=function(){return ue(u,void 0,void 0,Object(k.a)().mark(function h(){var p,m;return Object(k.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return p=!!document.fullscreenElement,E.next=3,D0.getModel(i);case 3:m=E.sent,m.setValue(p);case 5:case"end":return E.stop()}},h)}))},document.addEventListener("fullscreenchange",l,!1),f.abrupt("return",Or.create(function(){document.removeEventListener("fullscreenchange",l),t.setValue(!1)}));case 3:case"end":return f.stop()}},s)}))}}),r.registerModel({id:Mh.id,getInitialValue:function(){return[]},watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){var s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(h){var p=h.selected;t.setValue(p)},u.on("selection:changed",l),f.abrupt("return",Or.create(function(){return u.off("selection:changed",l)}));case 7:case"end":return f.stop()}},i,this)}))}}),r.registerModel({id:u2.id,watchChange:function(t,i){return ue(n,void 0,void 0,Object(k.a)().mark(function s(){var u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Mh.getModel(i);case 2:return u=c.sent,c.abrupt("return",u.watch(function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.setValue(Object(ot.a)(f).pop()||null)}));case 4:case"end":return c.stop()}},s)}))}}),r.registerModel({id:$v.id,getInitialValue:function(){return[]},watchChange:function(t,i){return ue(n,void 0,void 0,Object(k.a)().mark(function s(){var u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Mh.getModel(i);case 2:return u=c.sent,c.abrupt("return",u.watch(function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=f.filter(function(h){return h.isNode()});t.setValue(d)}));case 4:case"end":return c.stop()}},s)}))}}),r.registerModel({id:l2.id,watchChange:function(t,i){return ue(n,void 0,void 0,Object(k.a)().mark(function s(){var u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,$v.getModel(i);case 2:return u=f.sent,l=u.watch(function(d){t.setValue(Object(ot.a)(d).pop()||null)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:a2.id,watchChange:function(t,i){return ue(n,void 0,void 0,Object(k.a)().mark(function s(){var u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,$v.getModel(i);case 2:return u=f.sent,l=u.watch(function(d){t.setValue(d.length>0)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:o2.id,getInitialValue:function(){return!1},watchChange:function(t,i){return ue(n,void 0,void 0,Object(k.a)().mark(function s(){var u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Mh.getModel(i);case 2:return u=f.sent,l=u.watch(function(d){var h=d.every(function(p){return p&&p.getProp("isGroup")===!0});t.setValue(h)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:c2.id,getInitialValue:function(){return[]},watchChange:function(t,i){return ue(n,void 0,void 0,Object(k.a)().mark(function s(){var u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,$v.getModel(i);case 2:return u=f.sent,l=u.watch(function(d){var h=d.filter(function(p){return p&&p.getProp("isGroup")===!0});t.setValue(h)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:s2.id,getInitialValue:function(){return!1},watchChange:function(t,i){return ue(n,void 0,void 0,Object(k.a)().mark(function s(){var u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Mh.getModel(i);case 2:return u=f.sent,l=u.watch(function(d){var h=d.every(function(m){var b=!(m&&m.getProp("isGroup")),E=!(m&&m.getProp("group"));return b&&E}),p=d.length>0&&h;t.setValue(p)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:h2.id,getInitialValue:function(){return{zoomFactor:-1}},watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){var s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(h){var p=u.zoom();t.setValue(Object.assign(Object.assign({},h),{zoomFactor:p}))},u.on("scale",l),f.abrupt("return",Or.create(function(){return u.off("scale",l)}));case 7:case"end":return f.stop()}},i,this)}))}}),r.registerModel({id:f2.id,watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){var s,u,l,c,f;return Object(k.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.getGraphInstance();case 2:return s=h.sent,u=s.graph,l=s.config,c=function(m){return function(b){var E=b.x,x=b.y,O=u.localToClient({x:E,y:x}),D=l.rootContainer.getBoundingClientRect(),I={x:O.x-((D==null?void 0:D.x)||0),y:O.y-((D==null?void 0:D.y)||0)};t.setValue({type:m,anchor:I,data:b,cell:b.cell})}},f=new Xi,f.pushAll([iM(u,"node:contextmenu",c("node")),iM(u,"edge:contextmenu",c("edge")),iM(u,"blank:contextmenu",c("blank"))]),h.abrupt("return",f);case 9:case"end":return h.stop()}},i,this)}))}}),r.registerModel({id:y2.id,getInitialValue:function(){return!1},watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){var s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(){var h=u.history.canRedo();t.setValue(h)},u.history&&u.history.on("change",l),f.abrupt("return",Or.create(function(){return u.history.off("change",l)}));case 7:case"end":return f.stop()}},i,this)}))}}),r.registerModel({id:m2.id,getInitialValue:function(){return!1},watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){var s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(){var h=u.history.canUndo();t.setValue(h)},u.history&&u.history.on("change",l),f.abrupt("return",Or.create(function(){return u.history.off("change",l)}));case 7:case"end":return f.stop()}},i,this)}))}})}}]),o}();nt([Object(Pe.inject)(Wv),ze("design:type",Object)],C2.prototype,"graphProvider",void 0),C2=nt([Object(Pe.singleton)({contrib:Hv})],C2);var I8=Object(Pe.Module)(function(o){Pe.Contribution.register(o,Hv),o(cp),o(C2),o(b2)}),R8=function(a,r){a({token:pD,useDynamic:function(){return{getOption:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r.getConfig());case 1:case"end":return s.stop()}},t)}))}}},lifecycle:Pe.Syringe.Lifecycle.singleton})},N8=function(a){return Object(Pe.Module)(function(r){R8(r,a)})},MD=function(a){var r=a.config,n=Jl(),e=A.a.useMemo(function(){return r||new SD},[]);return A.a.useEffect(function(){var t=n.addCoreModule({config:e,createModule:N8});return e.setMountState(),function(){t.dispose(),e.dispose()}},[]),null};MD.defaultProps={XFlowModuleType:"ModelServiceConfig"};var L8=function(a){return function(r){var n=A.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=A.a.useMemo(function(){var t=new SD;return a(t,n),t},[n]);return e}},j8=function(a){var r=a.getChildren(),n=a.getSize(),e=a.getData()||{},t=a.getPosition(),i=a.getParentId(),s=e.isCollapsed,u=e.groupCollapsedSize||(s?n:null);return Object.assign(Object.assign({},e),{id:a.id,width:n.width,height:n.height,x:t.x,y:t.y,group:i,groupChildren:r?r.map(function(l){return l.id}):null,groupCollapsedSize:u})},_8=function(a){var r=a.getData()||{};return Object.assign(Object.assign({},r),{id:a.id,source:a.getSourceCellId(),target:a.getTargetCellId(),sourcePortId:a.getSourcePortId(),targetPortId:a.getTargetPortId(),sourcePort:a.getSourcePortId(),targetPort:a.getTargetPortId()})},AD=function(a){var r=[],n=[],e=function(i){i.isNode()&&r.push(j8(i)),i.isEdge()&&n.push(_8(i))};return a.map(function(t){return e(t)}),{nodes:r,edges:n}},F8=100,Ah=function(){function o(){var a=this;Object(Ie.a)(this,o),this.getGraphInstance=function(){return a.graphProvider.getGraphInstance()},this.getGraphConfig=function(){return a.graphProvider.getGraphOptions()},this.getGraphData=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.graphProvider.getGraphInstance();case 2:return n=i.sent,e=n.getCells(),i.abrupt("return",AD(e));case 5:case"end":return i.stop()}},r,this)}))},this.getAllNodes=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.graphProvider.getGraphInstance();case 2:return n=t.sent,t.abrupt("return",n.getNodes());case 4:case"end":return t.stop()}},r,this)}))},this.getNodeById=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.graphProvider.getGraphInstance();case 2:return e=i.sent,i.abrupt("return",e.getCellById(r));case 4:case"end":return i.stop()}},n,this)}))},this.getAllEdges=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.graphProvider.getGraphInstance();case 2:return n=t.sent,t.abrupt("return",n.getEdges());case 4:case"end":return t.stop()}},r,this)}))},this.getEdgeById=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.graphProvider.getGraphInstance();case 2:return e=i.sent,i.abrupt("return",e.getCellById(r));case 4:case"end":return i.stop()}},n,this)}))},this.updateNodeAttrs=function(r,n){return ue(a,void 0,void 0,Object(k.a)().mark(function e(){var t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(r instanceof wa)){s.next=4;break}r.setAttrs(n),s.next=8;break;case 4:return s.next=6,this.getNodeById(r);case 6:t=s.sent,t.setAttrs(n);case 8:case"end":return s.stop()}},e,this)}))},this.updateEdgeAttrs=function(r,n){return ue(a,void 0,void 0,Object(k.a)().mark(function e(){var t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(r instanceof eo)){s.next=4;break}r.setAttrs(n),s.next=8;break;case 4:return s.next=6,this.getEdgeById(r);case 6:t=s.sent,t.setAttrs(n);case 8:case"end":return s.stop()}},e,this)}))},this.translateGraph=function(r,n){return ue(a,void 0,void 0,Object(k.a)().mark(function e(){var t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.graphProvider.getGraphInstance();case 2:t=u.sent,i=t.translate(),t.translate(i.tx+r,i.ty+n);case 5:case"end":return u.stop()}},e,this)}))}}return Object(pe.a)(o,[{key:"start",value:function(){return ue(this,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.startContributions();case 2:this.registerEventListeners();case 3:case"end":return e.stop()}},r,this)}))}},{key:"executeCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return this.commandService.executeCommand(r,n,e)}},{key:"executeCommandPipeline",value:function(r){return this.commandService.executeCommandPipeline(r)}},{key:"registerEventListeners",value:function(){var r=this;window.addEventListener("unload",function(){r.stopContributions()})}},{key:"startContributions",value:function(){return ue(this,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:console.log(this.contributions.getContributions()),e=Object(ir.a)(this.contributions.getContributions()),u.prev=2,i=Object(k.a)().mark(function l(){var c;return Object(k.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(c=t.value,!c.onStart){d.next=10;break}return d.prev=2,d.next=5,n.measure("".concat(c.constructor.name,".onStart"),function(){return c.onStart(n)});case 5:d.next=10;break;case 7:d.prev=7,d.t0=d.catch(2),console.error("Could not start contribution",d.t0);case 10:case"end":return d.stop()}},l,null,[[2,7]])}),e.s();case 5:if((t=e.n()).done){u.next=9;break}return u.delegateYield(i(),"t0",7);case 7:u.next=5;break;case 9:u.next=14;break;case 11:u.prev=11,u.t1=u.catch(2),e.e(u.t1);case 14:return u.prev=14,e.f(),u.finish(14);case 17:case"end":return u.stop()}},r,this,[[2,11,14,17]])}))}},{key:"stopContributions",value:function(){console.info(">>> Stopping frontend contributions...");var r=Object(ir.a)(this.contributions.getContributions()),n;try{for(r.s();!(n=r.n()).done;){var e=n.value;if(e.onStop)try{e.onStop(this)}catch(t){console.error("Could not stop contribution",t)}}}catch(t){r.e(t)}finally{r.f()}console.info("<<< All frontend contributions have been stopped.")}},{key:"measure",value:function(r,n){return ue(this,void 0,void 0,Object(k.a)().mark(function e(){var t,i,s,u,l,c,f;return Object(k.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return t="".concat(r,"-start"),i="".concat(r,"-end"),performance.mark(t),h.next=5,n();case 5:s=h.sent,performance.mark(i),performance.measure(r,t,i),u=Object(ir.a)(performance.getEntriesByName(r));try{for(u.s();!(l=u.n()).done;)c=l.value,f="Frontend ".concat(c.name),c.duration>F8?console.warn("".concat(f," is slow, took: ").concat(c.duration.toFixed(1)," ms")):console.debug("".concat(f," took: ").concat(c.duration.toFixed(1)," ms"))}catch(p){u.e(p)}finally{u.f()}return performance.clearMeasures(r),h.abrupt("return",s);case 12:case"end":return h.stop()}},e)}))}}]),o}();nt([Object(Pe.contrib)(Oh),ze("design:type",Object)],Ah.prototype,"contributions",void 0),nt([Object(Pe.inject)(Wv),ze("design:type",Object)],Ah.prototype,"graphProvider",void 0),nt([Object(Pe.inject)(Uv),ze("design:type",Object)],Ah.prototype,"commandService",void 0),nt([Object(Pe.inject)(Vv),ze("design:type",Object)],Ah.prototype,"modelService",void 0),Ah=nt([Object(Pe.singleton)()],Ah);var B8=Object(Pe.Module)(function(o){Pe.Contribution.register(o,Oh),o(Ah)}),G8=function(a){var r=a.getAllExtensions(),n=new Pe.Container,e=r.map(function(i){var s=i.createModule,u=i.config;return s(u)});n.load(B8),n.load(h8),n.load(I8),e.forEach(function(i){n.load(i)});var t=n.get(Ah);return t},yq=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.xflowPrefixCls=SS,this.getXflowPrefixCls=function(r){return"".concat(a.xflowPrefixCls,"-").concat(r)},this.setXflowPrefixCls=function(r){return a.xflowPrefixCls=r}}),z8=A.a.createContext({configProvider:null}),U8=function(){return A.a.useContext(z8)},fp=function(a){var r=U8();return A.a.useMemo(function(){return r.configProvider?r.configProvider.getXflowPrefixCls(a):"".concat(SS,"-").concat(a)},[a])};function I0(o){var a=this,r=o.createModule,n=o.children,e=Jl(),t=A.a.useMemo(function(){return o.config||{CONFIG_TYPE:"",getConfig:function(){return ue(a,void 0,void 0,Object(k.a)().mark(function s(){return Object(k.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{});case 1:case"end":return l.stop()}},s)}))}}},[]);return A.a.useEffect(function(){var i=e.addExtension({config:t,createModule:r});return function(){i.dispose()}},[]),Array.isArray(n)||A.a.isValidElement(n)?A.a.createElement(A.a.Fragment,null," ",n," "):null}var El=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(bt.useMemo)(function(){var r=Object.entries(a),n=r.length>0?{position:"absolute"}:{};return r.forEach(function(e){var t=Object(Xe.a)(e,2),i=t[0],s=t[1],u=s===void 0?0:s;n[i]="".concat(u,"px")}),n},[a])},V8=function(a){return Object(Pe.Module)(function(r){k8(r),yU(r,a)})},E2=oe.create({type:"react componnet"});Wi.registerReactComponent=E2.register,Wi.unregisterReactComponent=E2.unregister,Wi.Hook.prototype.getReactComponent=function(o){var a=this.options.getReactComponent;if(typeof a=="function"){var r=N.call(a,this.graph,o);if(r!=null)return r}var n=o.getComponent();if(typeof n=="string"){var e=E2.get(n);if(e==null)return E2.onNotFound(n);n=e}return n};var R0=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"component",get:function(){return this.getComponent()},set:function(e){this.setComponent(e)}},{key:"getComponent",value:function(){return this.store.get("component")}},{key:"setComponent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeComponent(t):this.store.set("component",e,t),this}},{key:"removeComponent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("component",e),this}}]),r}(wa);(function(o){function a(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"rect",t=[],i=n?Hi.getForeignObjectMarkup():{tagName:"g",selector:"content"};return r?t.push(i):t.push.apply(t,[{tagName:e,selector:"body"},i,{tagName:"text",selector:"label"}]),t}o.config({view:"react-shape-view",markup:a(!1,!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks:function(n){if(n.markup==null){var e=n.primer,t=n.useForeignObject!==!1;if(e&&e!=="rect"){n.markup=a(!1,t,e);var i={};e==="circle"?i={refCx:"50%",refCy:"50%",refR:"50%"}:e==="ellipse"&&(i={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),n.attrs=C.merge({},{body:Object.assign({refWidth:null,refHeight:null},i)},n.attrs||{})}else n.simple&&(n.markup=a(!0,t),n.attrs=C.merge({},{body:null,label:null},n.attrs||{}))}return n}}),wa.registry.register("react-shape",o,!0)})(R0||(R0={}));var dp;(function(o){var a=!1,r,n=function(l,c){var f=c.payload;switch(c.type){case"add":{var d=l.findIndex(function(m){return m.id===f.id});return d>=0?(l[d]=f,Object(ot.a)(l)):[].concat(Object(ot.a)(l),[f])}case"remove":{var h=l.findIndex(function(m){return m.id===f.id});if(h>=0){var p=Object(ot.a)(l);return p.splice(h,1),p}break}default:break}return l};function e(u,l){a&&r({type:"add",payload:{id:u,portal:l}})}o.connect=e;function t(u){a&&r({type:"remove",payload:{id:u}})}o.disconnect=t;function i(){return a}o.isActive=i;function s(){return function(){a=!0;var u=Object(bt.useReducer)(n,[]),l=Object(Xe.a)(u,2),c=l[0],f=l[1];return r=f,A.a.createElement(A.a.Fragment,{children:c.map(function(d){return d.portal})})}}o.getProvider=s})(dp||(dp={}));var aM=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this,n),e.scheduledAnimationFrame=!1,e.throttleUpdateFunc=function(){e.scheduledAnimationFrame||(e.scheduledAnimationFrame=!0,window.requestAnimationFrame(function(){e.setState(function(t){return e.scheduledAnimationFrame=!1,{tick:t.tick+1}})}))},e.onChange=function(t){if(r.throttleChangeTypes.includes(t.key)){e.throttleUpdateFunc();return}e.setState({tick:e.state.tick+1})},e.state={tick:0},e}return Object(pe.a)(r,[{key:"componentDidMount",value:function(){this.props.node.on("change:*",this.onChange)}},{key:"componentWillUnmount",value:function(){this.props.node.off("change:*",this.onChange)}},{key:"clone",value:function(e){var t=this.props.node;return typeof e.type=="string"?A.a.cloneElement(e):A.a.cloneElement(e,{node:t})}},{key:"render",value:function(){var e=this.props,t=e.graph,i=e.node,s=e.component;if(A.a.isValidElement(s))return this.clone(s);if(typeof s=="function"){var u=N.call(s,t,i);if(A.a.isValidElement(u))return this.clone(u)}return s}}]),r}(A.a.PureComponent);aM.throttleChangeTypes=["position","size"];var TD=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"init",value:function(){var e=this;Object(Vr.a)(Object(Hr.a)(r.prototype),"init",this).call(this),this.cell.on("removed",function(){dp.disconnect(e.cell.id)})}},{key:"getComponentContainer",value:function(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}},{key:"confirmUpdate",value:function(e){var t=this,i=Object(Vr.a)(Object(Hr.a)(r.prototype),"confirmUpdate",this).call(this,e);return this.handleAction(i,r.action,function(){qm?qm.scheduleTask(function(){t.renderReactComponent()}):t.renderReactComponent()})}},{key:"renderReactComponent",value:function(){this.unmountReactComponent();var e=this.getComponentContainer(),t=this.cell,i=this.graph;if(e){var s=this.graph.hook.getReactComponent(t),u=A.a.createElement(aM,{graph:i,node:t,component:s});dp.isActive()?dp.connect(this.cell.id,Bv.a.createPortal(u,e)):Bv.a.render(u,e)}}},{key:"unmountReactComponent",value:function(){var e=this.getComponentContainer();return e&&Bv.a.unmountComponentAtNode(e),e}},{key:"unmount",value:function(){return dp.disconnect(this.cell.id),this.unmountReactComponent(),Object(Vr.a)(Object(Hr.a)(r.prototype),"unmount",this).call(this),this}}]),r}(ss);(function(o){o.action="react",o.config({bootstrap:[o.action],actions:{component:o.action}}),ss.registry.register("react-shape-view",o,!0)})(TD||(TD={}));var H8=function(o,a,r,n){var e=arguments.length,t=e<3?a:n===null?n=Object.getOwnPropertyDescriptor(a,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,a,r,n);else for(var s=o.length-1;s>=0;s--)(i=o[s])&&(t=(e<3?i(t):e>3?i(a,r,t):i(a,r))||t);return e>3&&t&&Object.defineProperty(a,r,t),t},oM="react";function W8(o){var a={current:function(){}},r=function(c){a.current(c)},n,e;function t(l,c){n({id:l,portal:c})}function i(l){e(l)}var s=function(){var c=Object(bt.useState)([]),f=Object(Xe.a)(c,2),d=f[0],h=f[1],p=Object(bt.useState)(),m=Object(Xe.a)(p,2),b=m[0],E=m[1],x=Object(bt.useRef)([]),O=Object(bt.useRef)([]);a.current=E;var D=Object(bt.useCallback)(function($){var se=$.id;if(x.current.includes(se)){var de=O.current,Ee=de.findIndex(function(Oe){return Oe.id===se});Ee>-1?de[Ee]=$:de.push($),O.current=de}else h(function(Oe){var $e=Object(ot.a)(Oe),tt=$e.findIndex(function(Le){return Le.id===se});return tt>-1?$e[tt]=$:$e.push($),$e})},[]);n=D;var I=Object(bt.useCallback)(function($){x.current.includes($)&&(x.current=x.current.filter(function(se){return se!==$})),O.current.map(function(se){return se.id}).includes($)&&(O.current=O.current.filter(function(se){return se.id!==$})),h(function(se){return se.filter(function(de){return de.id!==$})})},[]);e=I;var F=Object(bt.useCallback)(function($){var se=$.name,de=$.data,Ee=de||{},Oe=Ee.cells,$e=Oe===void 0?[]:Oe;if(se==="add"){var tt=$e.filter(function(Le){return Le.isNode()}).map(function(Le){return Le.id});x.current=Array.from(new Set([].concat(Object(ot.a)(x.current),Object(ot.a)(tt))))}},[]),H=Object(bt.useCallback)(function($){var se=$.name;if(se==="add"){var de=O.current;if(de.length){var Ee=de.map(function(Oe){return Oe.id});x.current=x.current.filter(function(Oe){return!Ee.includes(Oe)}),O.current=[],h(function(Oe){var $e=Object(ot.a)(Oe);return de.forEach(function(tt){var Le=$e.findIndex(function(it){return it.id===tt.id});Le>-1?$e[Le]=tt:$e.push(tt)}),$e})}}},[]);return Object(bt.useLayoutEffect)(function(){return b&&(b.on("batch:start",F),b.on("batch:stop",H)),function(){b&&(b.off("batch:start",F),b.off("batch:stop",H),h([]),x.current=[],O.current=[])}},[b,F,H]),A.a.createElement.apply(A.a,[A.a.Fragment,null].concat(Object(ot.a)(d.map(function($){return $.portal}))))},u=function(l){Object($n.a)(f,l);var c=Object(Xn.a)(f);function f(){return Object(Ie.a)(this,f),c.apply(this,arguments)}return Object(pe.a)(f,[{key:"init",value:function(){var h=this;Object(Vr.a)(Object(Hr.a)(f.prototype),"init",this).call(this),this.cell.on("removed",function(){i(h.cell.id)})}},{key:"getComponentContainer",value:function(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}},{key:"confirmUpdate",value:function(h){var p=this,m=Object(Vr.a)(Object(Hr.a)(f.prototype),"confirmUpdate",this).call(this,h);return this.handleAction(m,oM,function(){return p.renderReactComponent()})}},{key:"renderReactComponent",value:function(){this.unmountReactComponent();var h=this.getComponentContainer(),p=this.cell,m=this.graph;if(h){var b=this.graph.hook.getReactComponent(p),E=A.a.createElement(aM,{graph:m,node:p,component:b});t(this.cell.id,Bv.a.createPortal(E,h))}}},{key:"unmountReactComponent",value:function(){var h=this.getComponentContainer();return h&&Bv.a.unmountComponentAtNode(h),h}},{key:"onMouseDown",value:function(h,p,m){var b=h.target,E=b.tagName.toLowerCase();if(E==="input"){var x=b.getAttribute("type");if(x==null||["text","password","number","email","search","tel","url"].includes(x))return}Object(Vr.a)(Object(Hr.a)(f.prototype),"onMouseDown",this).call(this,h,p,m)}},{key:"dispose",value:function(){i(this.cell.id),this.unmountReactComponent()}}]),f}(ss);return H8([ss.dispose()],u.prototype,"dispose",null),u.config({bootstrap:[oM],actions:{component:oM}}),ss.registry.register(o,u,!0),{Portal:s,setGraph:r}}function $8(o){var a=Object(bt.useRef)(!1),r=Object(bt.useState)(function(){return a.current?{}:(a.current=!0,W8(o))}),n=Object(Xe.a)(r,1),e=n[0];return[e.Portal,e.setGraph]}var w2=function(a){var r=co(),n=A.a.useRef(null),e=A.a.useRef(null),t=Jl(),i=A.a.useMemo(function(){var p=a.config?a.config:new Xk;return p.setX6Config(),p},[]),s=$8(i.graphId),u=Object(Xe.a)(s,2),l=u[0],c=u[1];A.a.useEffect(function(){r&&r.getGraphInstance().then(function(p){c(p)})},[r,c]),A.a.useEffect(function(){i.setRootContainer(n.current),i.setGraphContainer(e.current),i.xflowInstanceId=t.getInstanceId(),t.addCoreModule({config:i,createModule:V8});var p=function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function b(){return Object(k.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:i.dispose();case 1:case"end":return x.stop()}},b)}))};return function(){p()}},[]);var f=El(a.position),d=fp("canvas-root"),h=fp("x6-canvas");return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{ref:n,className:d,style:f,id:i.graphId,tabIndex:0},A.a.createElement("div",{ref:e,className:h}),a.children),A.a.createElement(l,null))};w2.defaultProps={isXFlowCanvas:!0};var Md=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.runtimeHooks=[],this.getX6Graph=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.graph){t.next=2;break}return t.abrupt("return",this.graph);case 2:return t.next=4,this.graphProvider.getGraphInstance();case 4:return n=t.sent,this.graph=n,t.abrupt("return",n);case 7:case"end":return t.stop()}},r,this)}))},this.getGraphConfig=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.graphProvider.getGraphOptions());case 1:case"end":return e.stop()}},r,this)}))},this.getGraphMeta=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=this.getModelService(),i.t0=this.graphMeta,i.t0){i.next=6;break}return i.next=5,ke.GRAPH_META.useValue(n);case 5:i.t0=i.sent;case 6:return e=i.t0,i.abrupt("return",e);case 8:case"end":return i.stop()}},r,this)}))},this.setArgs=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a.args=r,a.runtimeHooks=n,{args:r,hooks:n}},this.getArgs=function(){var r=Object.assign(Object.assign({},a.args),{modelService:a.getModelService(),commandService:a.getCommands(),getGraphMeta:a.getGraphMeta,getX6Graph:a.getX6Graph,getGraphConfig:a.getGraphConfig});return{args:r,hooks:a.runtimeHooks}},this.setResult=function(r){return a.result=r,a.result},this.getResult=function(){return a.result},this.getHooks=function(){return a.hookService.hookProvider()},this.getCommands=function(){return a.commandService},this.getModelService=function(){return a.modelService},this.addUndo=function(r){if(!Array.isArray(r))return a.addUndo([r]);a.toDispose.pushAll(r)},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toDispose.dispose();case 2:case"end":return e.stop()}},r,this)}))},this.isUndoable=function(){return!a.toDispose.disposed},this.getDisposables=function(){return a.toDispose},this.setGlobal=function(r,n){a.commandService.setGlobal(r,n)},this.getGlobal=function(r){return a.commandService.getGlobal(r)}}return Object(pe.a)(o,[{key:"init",value:function(){var r=this;this.getGraphMeta().then(function(n){r.graphMeta=n})}}]),o}();nt([Object(Pe.inject)(Wv),ze("design:type",Object)],Md.prototype,"graphProvider",void 0),nt([Object(Pe.inject)(ZS),ze("design:type",Object)],Md.prototype,"hookService",void 0),nt([Object(Pe.inject)(Uv),ze("design:type",Object)],Md.prototype,"commandService",void 0),nt([Object(Pe.inject)(Vv),ze("design:type",Object)],Md.prototype,"modelService",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],Md.prototype,"init",null),Md=nt([Object(Pe.injectable)()],Md);var X8="CommandConfig",K8=function(){return[]},hp=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.setCommandContributions=function(r){a.getContributions=r},this.getCommandContributions=function(){return a.getContributions()},this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.registerHookFn){t.next=2;break}return t.abrupt("return",this.registerHookFn(r));case 2:return t.abrupt("return",bD);case 3:case"end":return t.stop()}},n,this)}))},this.registerHookHub=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.registerHookHubFn){t.next=2;break}return t.abrupt("return",this.registerHookHubFn(r));case 2:return t.abrupt("return",bD);case 3:case"end":return t.stop()}},n,this)}))},this.CONFIG_TYPE=X8,this.setRegisterHookFn=function(r){a.registerHookFn=r},this.setRegisterHookHubFn=function(r){a.registerHookHubFn=r},this.getConfig=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{registerHookFn:this.registerHookFn,getContributions:this.getContributions,CONFIG_TYPE:this.CONFIG_TYPE});case 1:case"end":return e.stop()}},r,this)}))},this.getContributions=K8}),bq=function(){return new hp},Y8=function(a,r){a({token:hp,contrib:[Zl],lifecycle:Pe.Syringe.Lifecycle.singleton,useDynamic:function(){return r}})},x2;(function(o){o.command=fa.ADD_NODE,o.hookKey="addNode"})(x2||(x2={}));var O2=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.addNode.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E,x,O,D,I,F,H,$,se;return Object(k.a)().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return m=d.createNodeService,b=d.cellFactory,E=d.commandService,x=d.options,Ee.next=3,e.getX6Graph();case 3:if(O=Ee.sent,D=d.nodeConfig,!m){Ee.next=12;break}return Ee.next=8,m(d);case 8:if(I=Ee.sent,typeof I!="boolean"){Ee.next=11;break}return Ee.abrupt("return",{err:"createNodeService rejected"});case 11:D=I;case 12:return Ee.next=14,this.processNodeConfig(D);case 14:if(F=Ee.sent,$=Object.assign(Object.assign({},x),{isCommand:!0}),!b){Ee.next=23;break}return Ee.next=19,b(F,this);case 19:se=Ee.sent,H=O.addNode(se,$),Ee.next=24;break;case 23:H=O.addNode(F,$);case 24:return e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function Oe(){var $e;return Object(k.a)().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:$e=Object.assign({id:H.id},H.getData()),E.executeCommand(fa.DEL_NODE.id,{nodeConfig:$e});case 2:case"end":return Le.stop()}},Oe)}))})),Ee.abrupt("return",{nodeConfig:F,nodeCell:H});case 26:case"end":return Ee.stop()}},h,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.processNodeConfig=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=this.contextProvider(),r.data=Object.assign({},r),!r.shape){c.next=4;break}return c.abrupt("return",r);case 4:if(r.view){c.next=9;break}return c.next=7,e.getGraphConfig();case 7:t=c.sent,r.view=t.graphId;case 9:if(r.component){c.next=17;break}return c.next=12,this.getNodeReactComponent(r);case 12:i=c.sent,s=e.getCommands(),u=e.getModelService(),r.shape="react-shape",r.component=r2(i,s,u);case 17:return c.abrupt("return",r);case 18:case"end":return c.stop()}},n,this)}))},this.getNodeReactComponent=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getHooks(),f.next=4,e.getGraphConfig();case 4:return i=f.sent,f.next=7,t.reactNodeRender.call(i.nodeRender);case 7:return s=f.sent,u=i.nodeTypeParser(r)||z1,l=s.get(u),l||console.error("react node component is missing:",i.nodeRender,u,l),f.abrupt("return",l);case 12:case"end":return f.stop()}},n,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],O2.prototype,"contextProvider",void 0),O2=nt([Object(Pe.injectable)({token:{token:Mi,named:x2.command.id}})],O2);var S2;(function(o){o.command=fa.DEL_NODE,o.hookKey="delNode",o.createHook=function(){return new zc}})(S2||(S2={}));var M2=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.delNode.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E,x,O,D,I,F,H;return Object(k.a)().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return m=d.commandService,b=d.deleteNodeService,E=d.options,se.next=3,e.getX6Graph();case 3:if(x=se.sent,!b){se.next=10;break}return se.next=7,b(d);case 7:if(O=se.sent,O){se.next=10;break}return se.abrupt("return",{err:" service rejected"});case 10:if(D=(d.x6Node||d.nodeConfig).id,I=x.getCellById(D),!(I&&I.isNode())){se.next=20;break}return F=[].concat(Object(ot.a)(x.getIncomingEdges(I)||[]),Object(ot.a)(x.getOutgoingEdges(I)||[])),se.next=16,Promise.all(F.map(function(de){return m.executeCommand(to.DEL_EDGE.id,{x6Edge:de})}));case 16:return H=I.getData(),I.remove(Object.assign(Object.assign({},E),{isCommand:!0})),e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function de(){return Object(k.a)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,m.executeCommand(fa.ADD_NODE.id,{nodeConfig:H});case 2:case"end":return Oe.stop()}},de)}))})),se.abrupt("return",{err:null,nodeConfig:H});case 20:return se.abrupt("return",{err:"node is not exist"});case 21:case"end":return se.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.isUndoable()&&(n=this.contextProvider(),n.undo()),t.abrupt("return",this);case 2:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],M2.prototype,"contextProvider",void 0),M2=nt([Object(Pe.injectable)({token:{token:Mi,named:S2.command.id}})],M2);var A2;(function(o){o.command=fa.SELECT_NODE,o.hookKey="selectNode"})(A2||(A2={}));var N0=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.selectNode.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E;return Object(k.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.ctx.getX6Graph();case 2:return h=O.sent,p=h.getSelectedCells().map(function(D){return D.id}),m=f.nodeIds,b=f.resetSelection,E=f.commandService,b?h.resetSelection(m):h.select(m),this.ctx.addUndo({dispose:function(){E.executeUndoCommand(fa.SELECT_NODE.id,{nodeIds:p,resetSelection:!0})}}),O.abrupt("return",{});case 8:case"end":return O.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],N0.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],N0.prototype,"init",null),N0=nt([Object(Pe.injectable)({token:{token:Mi,named:A2.command.id}})],N0);var T2;(function(o){o.command=fa.MOVE_NODE,o.hookKey="moveNode",o.createHook=function(){return new zc}})(T2||(T2={}));var P2=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.moveNode.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p,m,b,E,x,O,D,I,F,H,$,se,de,Ee,Oe,$e,tt,Le,it;return Object(k.a)().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(p=d.nodePositionService,!p){tn.next=7;break}return tn.next=4,p(d);case 4:if(m=tn.sent,m){tn.next=7;break}return tn.abrupt("return",{err:"service rejected"});case 7:return b=d.position,E=b.dx,x=E===void 0?0:E,O=b.dy,D=O===void 0?0:O,I=b.x,F=b.y,H=b.duration,$=H===void 0?150:H,tn.next=10,e.getX6Graph();case 10:if(se=tn.sent,de=se.getCellById(d.id),!de){tn.next=20;break}return Ee=I,Oe=F,$e=de.position(),tt=$e.x,Le=$e.y,it=function(){de.position(tt,Le,{silent:!1})},x||D?(Ee=x+tt,Oe=D+Le,de.translate(x,D,{transition:{duration:$}}),it=function(){return de.translate(-x,-D,{transition:{duration:$}})}):de.position(Ee,Oe,{silent:!1}),e.addUndo(Or.create(function(){it()})),tn.abrupt("return",{err:null,nextX:Ee,nextY:Oe});case 20:case"end":return tn.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],P2.prototype,"contextProvider",void 0),P2=nt([Object(Pe.injectable)({token:{token:Mi,named:T2.command.id}})],P2);var Z8=v("Znm+"),k2=v.n(Z8),Xv;(function(o){o.command=fa.UPDATE_NODE,o.hookKey="updateNode",o.XFlowNodeSetOptions={overwrite:!0},o.NODE_WIDTH=200,o.NODE_HEIGHT=40})(Xv||(Xv={}));var L0=function(){function o(){var a=this;Object(Ie.a)(this,o),this.setNodeConfig=function(r,n,e){r.setData(n,e),r.setPosition((n==null?void 0:n.x)||0,(n==null?void 0:n.y)||0),r.setSize((n==null?void 0:n.width)||Xv.NODE_WIDTH,(n==null?void 0:n.height)||Xv.NODE_HEIGHT),r.angle((n==null?void 0:n.angle)||0,{absolute:!0}),k2()(n==null?void 0:n.visible)&&r.setVisible(n==null?void 0:n.visible),!(r instanceof R0)&&!!r.getAttrByPath("text/text")&&r.setAttrByPath("text/text",n.label),n.attrs&&r.setAttrs(n.attrs),Array.isArray(n.ports)&&r.setPropByPath("ports/items",n.ports,Object.assign({rewrite:!0},e))},this.getNodeConfig=function(r){var n=r.getData(),e=r.getPosition(),t=r.getSize();return Object.assign(Object.assign(Object.assign({},n),e),t)},this.getNodeCell=function(r,n){var e=n.nodeConfig,t=n.setNodeConfig,i="";if(t&&t.node&&typeof t.node=="string"?i=t.node:e&&e.id&&typeof e.id=="string"&&(i=e.id),i)return r==null?void 0:r.getCellById(i);if(t&&t.node instanceof wa)return t.node},this.getNextNodeConfig=function(r,n){return ue(a,void 0,void 0,Object(k.a)().mark(function e(){var t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(r&&r.setNodeConfig&&r.setNodeConfig.callback)){s.next=3;break}return t=this.getNodeConfig(n),s.abrupt("return",r.setNodeConfig.callback(t));case 3:return s.abrupt("return",r.nodeConfig);case 4:case"end":return s.stop()}},e,this)}))},this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.updateNode.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E;return Object(k.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return h=f.options,p=h===void 0?Xv.XFlowNodeSetOptions:h,O.next=3,this.ctx.getX6Graph();case 3:return m=O.sent,b=this.getNodeCell(m,f),O.next=7,this.getNextNodeConfig(f,b);case 7:return E=O.sent,this.setNodeConfig(b,E,p),O.abrupt("return",{nodeConfig:E,nodeCell:b});case 10:case"end":return O.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],L0.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],L0.prototype,"init",null),L0=nt([Object(Pe.injectable)({token:{token:Mi,named:Xv.command.id}})],L0);var D2;(function(o){o.command=fa.CENTER_NODE,o.hookKey="centerNode"})(D2||(D2={}));var j0=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.centerNode.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m;return Object(k.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.ctx.getX6Graph();case 2:return h=E.sent,p=f.nodeConfig,m=h==null?void 0:h.getCellById(p==null?void 0:p.id),h==null||h.centerCell(m),E.abrupt("return",{x6Node:m});case 7:case"end":return E.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],j0.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],j0.prototype,"init",null),j0=nt([Object(Pe.injectable)({token:{token:Mi,named:D2.command.id}})],j0);var I2;(function(o){o.command=fa.FRONT_NODE,o.hookKey="frontNode"})(I2||(I2={}));var _0=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.frontNode.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E;return Object(k.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.ctx.getX6Graph();case 2:return m=O.sent,b=d.nodeId,E=m==null?void 0:m.getCellById(b),E?(E.toFront(),e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function D(){return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:d.commandService.executeCommand(fa.BACK_NODE.id,{nodeId:b});case 1:case"end":return F.stop()}},D)}))}))):console.error(b,"this nodeId is not exist"),O.abrupt("return",{});case 7:case"end":return O.stop()}},h,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],_0.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],_0.prototype,"init",null),_0=nt([Object(Pe.injectable)({token:{token:Mi,named:I2.command.id}})],_0);var R2;(function(o){o.command=fa.BACK_NODE,o.hookKey="backNode"})(R2||(R2={}));var F0=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.backNode.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h=this,p,m,b;return Object(k.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.ctx.getX6Graph();case 2:return p=x.sent,m=f.nodeId,b=p==null?void 0:p.getCellById(m),b?(b.toBack(),this.ctx.addUndo(Or.create(function(){return ue(h,void 0,void 0,Object(k.a)().mark(function O(){return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:f.commandService.executeCommand(fa.FRONT_NODE.id,{nodeId:m});case 1:case"end":return I.stop()}},O)}))}))):console.error(m,"this nodeId is not exist"),x.abrupt("return",{});case 7:case"end":return x.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],F0.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],F0.prototype,"init",null),F0=nt([Object(Pe.injectable)({token:{token:Mi,named:R2.command.id}})],F0);var N2;(function(o){o.command=fa.HIGHLIGHT_NODE,o.hookKey="highlightNode"})(N2||(N2={}));var B0=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.highlightNode.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E,x,O,D;return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.ctx.getX6Graph();case 2:if(h=F.sent,p=f.nodeId,m=f.stroke,b=f.strokeWidth,E=h==null?void 0:h.getCellById(p),E){F.next=10;break}return console.error(p,"this nodeId is not exist"),F.abrupt("return",{err:"this nodeId is not exist"});case 10:E==null||E.setAttrs({body:{stroke:m||"#7c68fc",strokeWidth:b||2}}),(f==null?void 0:f.isHighlightRelatedLines)&&(x=f.edgeStroke,O=f.edgeStrokeWidth,D=h==null?void 0:h.getEdges(),D.forEach(function(H){var $=H==null?void 0:H.getData();f==null||f.commandService.executeCommand(to.HIGHLIGHT_EDGE.id,{edgeId:$==null?void 0:$.id,strokeColor:x,strokeWidth:O})}));case 12:return F.abrupt("return",{err:null});case 13:case"end":return F.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],B0.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],B0.prototype,"init",null),B0=nt([Object(Pe.injectable)({token:{token:Mi,named:N2.command.id}})],B0);var L2;(function(o){o.command=fa.UPDATE_NODE_PORT,o.hookKey="updateNodePort"})(L2||(L2={}));var j2=function(){function o(){var a=this;Object(Ie.a)(this,o),this.getCell=function(r,n){return typeof n=="string"?r.getCellById(n):n},this.getNodeConfig=function(r){var n=r.getData(),e=r.getPosition(),t=r.getSize();return Object.assign(Object.assign(Object.assign({},n),e),t)},this.updatePortsOfNodeConfig=function(r,n,e){var t=a.getNodeConfig(r);a.isNodeAnchors(t.ports)&&(t.ports=Object(ot.a)(n)),a.isPortMetaData(t.ports)&&(t.ports.items=Object(ot.a)(n)),r.setData(t,e)},this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l,c;return Object(k.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),d.next=5,e.getX6Graph();case 5:return l=d.sent,d.next=8,u.updateNodePort.call(i,function(h){return ue(n,void 0,void 0,Object(k.a)().mark(function p(){var m=this,b,E,x,O,D,I,F;return Object(k.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(b=h.node,E=h.updatePorts,x=h.options,O=h.commandService,D=this.getCell(l,b),!(!D||D.isEdge())){$.next=5;break}return console.error("node_is _not_exsit",b),$.abrupt("return",{err:"node_is _not_exsit"});case 5:return I=D.getPorts(),$.next=8,E(Object(ot.a)(I),D,l);case 8:if(F=$.sent,F!==!1){$.next=11;break}return $.abrupt("return",{err:"service rejected"});case 11:return D.setPropByPath("ports/items",F,Object.assign({rewrite:!0},x)),this.updatePortsOfNodeConfig(D,F,x),e.addUndo(Or.create(function(){return ue(m,void 0,void 0,Object(k.a)().mark(function se(){var de=this;return Object(k.a)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:O.executeCommand(fa.UPDATE_NODE_PORT.id,{node:b,updatePorts:function(){return ue(de,void 0,void 0,Object(k.a)().mark(function tt(){return Object(k.a)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return it.abrupt("return",I);case 1:case"end":return it.stop()}},tt)}))}});case 1:case"end":return Oe.stop()}},se)}))})),$.abrupt("return",{ports:F});case 15:case"end":return $.stop()}},p,this)}))},s);case 8:return c=d.sent,e.setResult(c),d.abrupt("return",this);case 11:case"end":return d.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isNodeAnchors",value:function(r){return Array.isArray(r)}},{key:"isPortMetaData",value:function(r){return r.items&&Array.isArray(r.items)}},{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],j2.prototype,"contextProvider",void 0),j2=nt([Object(Pe.injectable)({token:{token:Mi,named:L2.command.id}})],j2);var J8=function(a){a(O2),a(M2),a(N0),a(P2),a(L0),a(j0),a(_0),a(F0),a(B0),a(j2)},Q8=[x2,S2,A2,T2,Xv,D2,I2,R2,N2,L2],_2;(function(o){o.command=wi.LOAD_META,o.hookKey="graphMeta"})(_2||(_2={}));var G0=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l,c;return Object(k.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),d.next=4,s.graphMeta.call(t,function(h){return ue(n,void 0,void 0,Object(k.a)().mark(function p(){var m,b;return Object(k.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(m=h.graphMetaService,!m){x.next=7;break}return x.next=4,m(h);case 4:x.t0=x.sent,x.next=8;break;case 7:x.t0=Object.assign({},h==null?void 0:h.meta);case 8:return b=x.t0,x.abrupt("return",Object.assign({flowId:b==null?void 0:b.flowId},b));case 10:case"end":return x.stop()}},p)}))},i);case 4:return u=d.sent,l=this.ctx.getModelService(),d.next=8,ke.GRAPH_META.getModel(l);case 8:return c=d.sent,c.setValue(u),this.ctx.setResult(u),d.abrupt("return",this);case 12:case"end":return d.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],G0.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],G0.prototype,"init",null),G0=nt([Object(Pe.injectable)({token:{token:Mi,named:_2.command.id}})],G0);var F2;(function(o){o.command=wi.SAVE_GRAPH_DATA,o.hookKey="saveGraphData"})(F2||(F2={}));var z0=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return e=this.ctx,t=e.getArgs(),i=e.getHooks(),u.next=5,i.saveGraphData.call(t.args,function(l){return ue(n,void 0,void 0,Object(k.a)().mark(function c(){var f,d,h,p,m,b,E,x,O,D;return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return f=l.saveGraphDataService,d=l.includeAttrs,F.next=3,e.getX6Graph();case 3:return h=F.sent,p=h.getNodes(),m=h.getEdges(),b=p.map(function(H){var $=H.getData(),se=H.position(),de=H.size(),Ee=Object.assign(Object.assign(Object.assign({id:H.id},$),se),de);return d&&(Ee.attrs=H.getAttrs()),Ee}),E=m.map(function(H){var $=H.getData(),se=Object.assign({id:H.id},$);return d&&(se.attrs=H.getAttrs()),se}),x={nodes:b,edges:E},F.next=11,this.ctx.getGraphMeta();case 11:if(O=F.sent,!f){F.next=17;break}return F.next=15,f(O,x);case 15:D=F.sent,D&&this.ctx.setResult(D);case 17:return F.abrupt("return",{});case 18:case"end":return F.stop()}},c,this)}))},t.hooks);case 5:return u.abrupt("return",this);case 6:case"end":return u.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],z0.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],z0.prototype,"init",null),z0=nt([Object(Pe.injectable)({token:{token:Mi,named:F2.command.id}})],z0);var B2;(function(o){o.command=wi.LOAD_DATA,o.hookKey="loadData",o.createHook=function(){return new zc}})(B2||(B2={}));var U0=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.loadData.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m;return Object(k.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return h=f.loadDataService,E.next=3,this.ctx.getGraphMeta();case 3:return p=E.sent,E.next=6,h(p);case 6:return m=E.sent,E.abrupt("return",{graphData:m});case 8:case"end":return E.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],U0.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],U0.prototype,"init",null),U0=nt([Object(Pe.injectable)({token:{token:Mi,named:B2.command.id}})],U0);var qs=function(){function o(){Object(Ie.a)(this,o),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return Object(pe.a)(o,[{key:"layout",value:function(r){return this.init(r),this.execute(!0)}},{key:"init",value:function(r){this.nodes=r.nodes||[],this.edges=r.edges||[],this.combos=r.combos||[]}},{key:"execute",value:function(r){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(r){r&&Object.assign(this,r)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}]),o}(),V0=function(a){return typeof a=="string"},q8=function(a){var r=Object.create(null);return function(n){var e=r[n];return e||(r[n]=a(n))}},eV=/-(\w)/g,Cq=q8(function(o){return o.replace(eV,function(a,r){return r?r.toUpperCase():""})}),js=Array.isArray,gr=function(a){return typeof a=="number"},G2=function(a){return Number.isNaN(Number(a))},Eq=function(a){var r=parseFloat(a);return G2(r)?a:r},Nf=function(a){return a!==null&&typeof a=="object"},sM=function o(a){if(a===null)return a;if(a instanceof Date)return new Date(a.getTime());if(a instanceof Array){var r=[];return a.forEach(function(e){r.push(e)}),r.map(function(e){return o(e)})}if(typeof a=="object"&&a!=={}){var n=Object.assign({},a);return Object.keys(n).forEach(function(e){n[e]=o(n[e])}),n}return a},Qi=function(a,r){var n=a[r];return Nf(n)?n.cell:n},H0=function(a,r,n){for(var e=[],t=0;t<a;t++)e[t]=0;return n&&n.forEach(function(i){var s=Qi(i,"source"),u=Qi(i,"target");s&&(e[r[s]]+=1),u&&(e[r[u]]+=1)}),e},PD=function(a){for(var r=[],n=a.length,e=0;e<n;e+=1){r[e]=[];for(var t=0;t<n;t+=1)e===t?r[e][t]=0:a[e][t]===0||!a[e][t]?r[e][t]=Infinity:r[e][t]=a[e][t]}for(var i=0;i<n;i+=1)for(var s=0;s<n;s+=1)for(var u=0;u<n;u+=1)r[s][u]>r[s][i]+r[i][u]&&(r[s][u]=r[s][i]+r[i][u]);return r},kD=function(a,r){var n=a.nodes,e=a.edges,t=[],i={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,u){i[s.id]=u;var l=[];t.push(l)}),e&&e.forEach(function(s){var u=Qi(s,"source"),l=Qi(s,"target"),c=i[u],f=i[l];t[c][f]=1,r||(t[f][c]=1)}),t},tV=function(a,r){var n=[];return a.forEach(function(e){var t=[];e.forEach(function(i){t.push(i*r)}),n.push(t)}),n},nV=function o(a,r){if(a&&a.children){for(var n=a.children.length-1;n>=0;n--)if(!o(a.children[n],r))return}return!!r(a)},z2=function(a,r){typeof r=="function"&&nV(a,r)},Th=function(a){return typeof a=="function"},Ph=new Map,wq=function(a,r){if(Ph.get(a)&&console.warn("The layout with the name ".concat(a," exists already, it will be overridden")),Nf(r)){var n=function(e){Object($n.a)(i,e);var t=Object(Xn.a)(i);function i(s){var u;Object(Ie.a)(this,i),u=t.call(this);var l=Object(Co.a)(u),c={},f=l.getDefaultCfg();return Object.assign(c,f,r,s),Object.keys(c).forEach(function(d){var h=c[d];l[d]=h}),u}return Object(pe.a)(i)}(qs);Ph.set(a,n)}else Ph.set(a,r);return Ph.get(a)},xq=function(a){Ph.has(a)&&Ph.delete(a)},rV=function(a){return Ph.has(a)?Ph.get(a):null},iV=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var e=this,t=e.nodes,i=e.edges,s=t.length,u=e.begin;if(s===0)return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:i};if(s===1)return t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:i};var l=[];t.forEach(function(F){l.push(F)});var c={};if(l.forEach(function(F,H){c[F.id]=H}),(e.sortBy==="degree"||!V0(e.sortBy)||l[0][e.sortBy]===void 0)&&(e.sortBy="degree",G2(t[0].degree))){var f=H0(l.length,c,i);l.forEach(function(F,H){F.degree=f[H]})}l.sort(function(F,H){return H[e.sortBy]-F[e.sortBy]}),!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);var d=e.rows,h=e.cols!=null?e.cols:e.columns;if(e.cells=s,d!=null&&h!=null?(e.rows=d,e.cols=h):d!=null&&h==null?(e.rows=d,e.cols=Math.ceil(e.cells/e.rows)):d==null&&h!=null?(e.cols=h,e.rows=Math.ceil(e.cells/e.cols)):(e.splits=Math.sqrt(e.cells*e.height/e.width),e.rows=Math.round(e.splits),e.cols=Math.round(e.width/e.height*e.splits)),e.cols*e.rows>e.cells){var p=e.small(),m=e.large();(p-1)*m>=e.cells?e.small(p-1):(m-1)*p>=e.cells&&e.large(m-1)}else for(;e.cols*e.rows<e.cells;){var b=e.small(),E=e.large();(E+1)*b>=e.cells?e.large(E+1):e.small(b+1)}e.cellWidth=e.width/e.cols,e.cellHeight=e.height/e.rows,e.condense&&(e.cellWidth=0,e.cellHeight=0),e.preventOverlap&&l.forEach(function(F){(!F.x||!F.y)&&(F.x=0,F.y=0);var H,$;js(F.size)?(H=F.size[0],$=F.size[1]):gr(F.size)?(H=F.size,$=F.size):Nf(F.size)&&(H=F.size.width,$=F.size.height),(H===void 0||$===void 0)&&(js(e.nodeSize)?(H=e.nodeSize[0],$=e.nodeSize[1]):gr(e.nodeSize)?(H=e.nodeSize,$=e.nodeSize):(H=30,$=30));var se=e.preventOverlapPadding,de=H+se,Ee=$+se;e.cellWidth=Math.max(e.cellWidth,de),e.cellHeight=Math.max(e.cellHeight,Ee)}),e.cellUsed={},e.row=0,e.col=0,e.id2manPos={};for(var x=0;x<l.length;x++){var O=l[x],D=void 0;if(e.position&&(D=e.position(O)),D&&(D.row!==void 0||D.col!==void 0)){var I={row:D.row,col:D.col};if(I.col===void 0)for(I.col=0;e.used(I.row,I.col);)I.col++;else if(I.row===void 0)for(I.row=0;e.used(I.row,I.col);)I.row++;e.id2manPos[O.id]=I,e.use(I.row,I.col)}e.getPos(O)}return e.onLayoutEnd&&e.onLayoutEnd(),{edges:i,nodes:l}}},{key:"small",value:function(e){var t=this,i,s=t.rows||5,u=t.cols||5;if(e==null)i=Math.min(s,u);else{var l=Math.min(s,u);l===t.rows?t.rows=e:t.cols=e}return i}},{key:"large",value:function(e){var t=this,i,s=t.rows||5,u=t.cols||5;if(e==null)i=Math.max(s,u);else{var l=Math.max(s,u);l===t.rows?t.rows=e:t.cols=e}return i}},{key:"used",value:function(e,t){var i=this;return i.cellUsed["c-".concat(e,"-").concat(t)]||!1}},{key:"use",value:function(e,t){var i=this;i.cellUsed["c-".concat(e,"-").concat(t)]=!0}},{key:"moveToNextCell",value:function(){var e=this,t=e.cols||5;e.col++,e.col>=t&&(e.col=0,e.row++)}},{key:"getPos",value:function(e){var t=this,i=t.begin,s=t.cellWidth,u=t.cellHeight,l,c,f=t.id2manPos[e.id];if(f)l=f.col*s+s/2+i[0],c=f.row*u+u/2+i[1];else{for(;t.used(t.row,t.col);)t.moveToNextCell();l=t.col*s+s/2+i[0],c=t.row*u+u/2+i[1],t.use(t.row,t.col),t.moveToNextCell()}e.x=l,e.y=c}},{key:"getType",value:function(){return"grid"}}]),r}(qs),aV=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var e=this,t=e.nodes,i=.9,s=e.center;return!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),t&&t.forEach(function(u){u.x=(Math.random()-.5)*i*e.width+s[0],u.y=(Math.random()-.5)*i*e.height+s[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:this.edges}}},{key:"getType",value:function(){return"random"}}]),r}(qs),uM=function(a,r){var n;return a?gr(a)?n=function(t){return a}:n=a:n=function(t){return r||1},n},oV=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.maxIteration=1e3,e.workerEnabled=!1,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var e,t,i=this,s=i.nodes;if(i.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(i.timeInterval),!s||s.length===0){(e=i.onLayoutEnd)===null||e===void 0||e.call(i);return}!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]);var u=i.center;if(s.length===1){s[0].x=u[0],s[0].y=u[1],(t=i.onLayoutEnd)===null||t===void 0||t.call(i);return}var l={},c={};s.forEach(function(b,E){gr(b.x)||(b.x=Math.random()*i.width),gr(b.y)||(b.y=Math.random()*i.height),l[b.id]=b,c[b.id]=E}),i.nodeMap=l,i.nodeIdxMap=c,i.linkDistance=uM(i.linkDistance,1),i.nodeStrength=uM(i.nodeStrength,1),i.edgeStrength=uM(i.edgeStrength,1);var f=i.nodeSize,d;if(i.preventOverlap){var h=i.nodeSpacing,p;gr(h)?p=function(){return h}:Th(h)?p=h:p=function(){return 0},f?js(f)?d=function(E){var x=f[0]>f[1]?f[0]:f[1];return x+p(E)}:d=function(E){return f+p(E)}:d=function(E){if(E.size){if(js(E.size)){var x=E.size[0]>E.size[1]?E.size[0]:E.size[1];return x+p(E)}if(Nf(E.size)){var O=E.size.width>E.size.height?E.size.width:E.size.height;return O+p(E)}return E.size+p(E)}return 10+p(E)}}i.nodeSize=d;var m=i.edges;i.degrees=H0(s.length,i.nodeIdxMap,m),i.getMass||(i.getMass=function(b){var E=i.degrees[i.nodeIdxMap[b.id]]||1;return E}),i.run()}},{key:"run",value:function(){var e,t=this,i=t.maxIteration,s=t.nodes,u=t.workerEnabled,l=t.minMovement;if(!!s)if(u){for(var c=0;c<i;c++){var f=t.runOneStep(c);if(t.reachMoveThreshold(s,f,l))break}(e=t.onLayoutEnd)===null||e===void 0||e.call(t)}else{if(typeof window=="undefined")return;var d=0;this.timeInterval=window.setInterval(function(){var h,p;if(!!s){var m=t.runOneStep(d)||[];t.reachMoveThreshold(s,m,l)&&((h=t.onLayoutEnd)===null||h===void 0||h.call(t),window.clearInterval(t.timeInterval)),d++,d>=i&&((p=t.onLayoutEnd)===null||p===void 0||p.call(t),window.clearInterval(t.timeInterval))}},0)}}},{key:"reachMoveThreshold",value:function(e,t,i){var s=0;return e.forEach(function(u,l){var c=u.x-t[l].x,f=u.y-t[l].y;s+=Math.sqrt(c*c+f*f)}),s/=e.length,s<i}},{key:"runOneStep",value:function(e){var t,i=this,s=i.nodes,u=i.edges,l=[],c=[];if(!!s){s.forEach(function(h,p){l[2*p]=0,l[2*p+1]=0,c[2*p]=0,c[2*p+1]=0}),i.calRepulsive(l,s),u&&i.calAttractive(l,u),i.calGravity(l,s);var f=Math.max(.02,i.interval-e*.002);i.updateVelocity(l,c,f,s);var d=[];return s.forEach(function(h){d.push({x:h.x,y:h.y})}),i.updatePosition(c,f,s),(t=i.tick)===null||t===void 0||t.call(i),d}}},{key:"calRepulsive",value:function(e,t){var i=this,s=i.getMass,u=i.nodeStrength,l=i.factor,c=i.coulombDisScale,f=i.preventOverlap,d=i.nodeSize;t.forEach(function(h,p){var m=s?s(h):1;t.forEach(function(b,E){if(!(p>=E)){var x=h.x-b.x,O=h.y-b.y,D=Math.sqrt(x*x+O*O)+.01,I=(D+.1)*c,F=x/D,H=O/D,$=(u(h)+u(b))/2*l/(I*I),se=s?s(b):1;if(e[2*p]+=F*$,e[2*p+1]+=H*$,e[2*E]-=F*$,e[2*E+1]-=H*$,f&&D<(d(h)+d(b))/2){var de=(u(h)+u(b))/2/(D*D);e[2*p]+=F*de/m,e[2*p+1]+=H*de/m,e[2*E]-=F*de/se,e[2*E+1]-=H*de/se}}})})}},{key:"calAttractive",value:function(e,t){var i=this,s=i.nodeMap,u=i.nodeIdxMap,l=i.linkDistance,c=i.edgeStrength,f=i.getMass;t.forEach(function(d,h){var p=Qi(d,"source"),m=Qi(d,"target"),b=s[p],E=s[m],x=E.x-b.x,O=E.y-b.y,D=Math.sqrt(x*x+O*O)+.01,I=x/D,F=O/D,H=l(d)||1,$=H-D,se=$*c(d),de=u[p],Ee=u[m],Oe=f?f(b):1,$e=f?f(E):1;e[2*de]-=I*se/Oe,e[2*de+1]-=F*se/Oe,e[2*Ee]+=I*se/$e,e[2*Ee+1]+=F*se/$e})}},{key:"calGravity",value:function(e,t){for(var i=this,s=i.center,u=i.gravity,l=i.degrees,c=t.length,f=0;f<c;f++){var d=t[f],h=d.x-s[0],p=d.y-s[1],m=u;if(i.getCenter){var b=i.getCenter(d,l[f]);b&&gr(b[0])&&gr(b[1])&&gr(b[2])&&(h=d.x-b[0],p=d.y-b[1],m=b[2])}!m||(e[2*f]-=m*h,e[2*f+1]-=m*p)}}},{key:"updateVelocity",value:function(e,t,i,s){var u=this,l=i*u.damping;s.forEach(function(c,f){var d=e[2*f]*l||.01,h=e[2*f+1]*l||.01,p=Math.sqrt(d*d+h*h);if(p>u.maxSpeed){var m=u.maxSpeed/p;d=m*d,h=m*h}t[2*f]=d,t[2*f+1]=h})}},{key:"updatePosition",value:function(e,t,i){i.forEach(function(s,u){if(gr(s.fx)&&gr(s.fy)){s.x=s.fx,s.y=s.fy;return}var l=e[2*u]*t,c=e[2*u+1]*t;s.x+=l,s.y+=c})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){var e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}]),r}(qs),sV=function(o){var a=+this._x.call(null,o),r=+this._y.call(null,o);return DD(this.cover(a,r),a,r,o)};function DD(o,a,r,n){if(isNaN(a)||isNaN(r))return o;var e,t=o._root,i={data:n},s=o._x0,u=o._y0,l=o._x1,c=o._y1,f,d,h,p,m,b,E,x;if(!t)return o._root=i,o;for(;t.length;)if((m=a>=(f=(s+l)/2))?s=f:l=f,(b=r>=(d=(u+c)/2))?u=d:c=d,e=t,!(t=t[E=b<<1|m]))return e[E]=i,o;if(h=+o._x.call(null,t.data),p=+o._y.call(null,t.data),a===h&&r===p)return i.next=t,e?e[E]=i:o._root=i,o;do e=e?e[E]=new Array(4):o._root=new Array(4),(m=a>=(f=(s+l)/2))?s=f:l=f,(b=r>=(d=(u+c)/2))?u=d:c=d;while((E=b<<1|m)==(x=(p>=d)<<1|h>=f));return e[x]=t,e[E]=i,o}function uV(o){var a,r,n=o.length,e,t,i=new Array(n),s=new Array(n),u=Infinity,l=Infinity,c=-Infinity,f=-Infinity;for(r=0;r<n;++r)isNaN(e=+this._x.call(null,a=o[r]))||isNaN(t=+this._y.call(null,a))||(i[r]=e,s[r]=t,e<u&&(u=e),e>c&&(c=e),t<l&&(l=t),t>f&&(f=t));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),r=0;r<n;++r)DD(this,i[r],s[r],o[r]);return this}var lV=function(o,a){if(isNaN(o=+o)||isNaN(a=+a))return this;var r=this._x0,n=this._y0,e=this._x1,t=this._y1;if(isNaN(r))e=(r=Math.floor(o))+1,t=(n=Math.floor(a))+1;else{for(var i=e-r||1,s=this._root,u,l;r>o||o>=e||n>a||a>=t;)switch(l=(a<n)<<1|o<r,u=new Array(4),u[l]=s,s=u,i*=2,l){case 0:e=r+i,t=n+i;break;case 1:r=e-i,t=n+i;break;case 2:e=r+i,n=t-i;break;case 3:r=e-i,n=t-i;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=e,this._y1=t,this},cV=function(){var o=[];return this.visit(function(a){if(!a.length)do o.push(a.data);while(a=a.next)}),o},fV=function(o){return arguments.length?this.cover(+o[0][0],+o[0][1]).cover(+o[1][0],+o[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Su=function(o,a,r,n,e){this.node=o,this.x0=a,this.y0=r,this.x1=n,this.y1=e},dV=function(o,a,r){var n,e=this._x0,t=this._y0,i,s,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Su(h,e,t,c,f)),r==null?r=Infinity:(e=o-r,t=a-r,c=o+r,f=a+r,r*=r);p=d.pop();)if(!(!(h=p.node)||(i=p.x0)>c||(s=p.y0)>f||(u=p.x1)<e||(l=p.y1)<t))if(h.length){var b=(i+u)/2,E=(s+l)/2;d.push(new Su(h[3],b,E,u,l),new Su(h[2],i,E,b,l),new Su(h[1],b,s,u,E),new Su(h[0],i,s,b,E)),(m=(a>=E)<<1|o>=b)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var x=o-+this._x.call(null,h.data),O=a-+this._y.call(null,h.data),D=x*x+O*O;if(D<r){var I=Math.sqrt(r=D);e=o-I,t=a-I,c=o+I,f=a+I,n=h.data}}return n},hV=function(o){if(isNaN(c=+this._x.call(null,o))||isNaN(f=+this._y.call(null,o)))return this;var a,r=this._root,n,e,t,i=this._x0,s=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,b,E;if(!r)return this;if(r.length)for(;;){if((p=c>=(d=(i+u)/2))?i=d:u=d,(m=f>=(h=(s+l)/2))?s=h:l=h,a=r,!(r=r[b=m<<1|p]))return this;if(!r.length)break;(a[b+1&3]||a[b+2&3]||a[b+3&3])&&(n=a,E=b)}for(;r.data!==o;)if(e=r,!(r=r.next))return this;return(t=r.next)&&delete r.next,e?(t?e.next=t:delete e.next,this):a?(t?a[b]=t:delete a[b],(r=a[0]||a[1]||a[2]||a[3])&&r===(a[3]||a[2]||a[1]||a[0])&&!r.length&&(n?n[E]=r:this._root=r),this):(this._root=t,this)};function vV(o){for(var a=0,r=o.length;a<r;++a)this.remove(o[a]);return this}var gV=function(){return this._root},pV=function(){var o=0;return this.visit(function(a){if(!a.length)do++o;while(a=a.next)}),o},mV=function(o){var a=[],r,n=this._root,e,t,i,s,u;for(n&&a.push(new Su(n,this._x0,this._y0,this._x1,this._y1));r=a.pop();)if(!o(n=r.node,t=r.x0,i=r.y0,s=r.x1,u=r.y1)&&n.length){var l=(t+s)/2,c=(i+u)/2;(e=n[3])&&a.push(new Su(e,l,c,s,u)),(e=n[2])&&a.push(new Su(e,t,c,l,u)),(e=n[1])&&a.push(new Su(e,l,i,s,c)),(e=n[0])&&a.push(new Su(e,t,i,l,c))}return this},yV=function(o){var a=[],r=[],n;for(this._root&&a.push(new Su(this._root,this._x0,this._y0,this._x1,this._y1));n=a.pop();){var e=n.node;if(e.length){var t,i=n.x0,s=n.y0,u=n.x1,l=n.y1,c=(i+u)/2,f=(s+l)/2;(t=e[0])&&a.push(new Su(t,i,s,c,f)),(t=e[1])&&a.push(new Su(t,c,s,u,f)),(t=e[2])&&a.push(new Su(t,i,f,c,l)),(t=e[3])&&a.push(new Su(t,c,f,u,l))}r.push(n)}for(;n=r.pop();)o(n.node,n.x0,n.y0,n.x1,n.y1);return this};function bV(o){return o[0]}var CV=function(o){return arguments.length?(this._x=o,this):this._x};function EV(o){return o[1]}var wV=function(o){return arguments.length?(this._y=o,this):this._y};function lM(o,a,r){var n=new cM(a==null?bV:a,r==null?EV:r,NaN,NaN,NaN,NaN);return o==null?n:n.addAll(o)}function cM(o,a,r,n,e,t){this._x=o,this._y=a,this._x0=r,this._y0=n,this._x1=e,this._y1=t,this._root=void 0}function ID(o){for(var a={data:o.data},r=a;o=o.next;)r=r.next={data:o.data};return a}var Mu=lM.prototype=cM.prototype;Mu.copy=function(){var o=new cM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root,r,n;if(!a)return o;if(!a.length)return o._root=ID(a),o;for(r=[{source:a,target:o._root=new Array(4)}];a=r.pop();)for(var e=0;e<4;++e)(n=a.source[e])&&(n.length?r.push({source:n,target:a.target[e]=new Array(4)}):a.target[e]=ID(n));return o},Mu.add=sV,Mu.addAll=uV,Mu.cover=lV,Mu.data=cV,Mu.extent=fV,Mu.find=dV,Mu.remove=hV,Mu.removeAll=vV,Mu.root=gV,Mu.size=pV,Mu.visit=mV,Mu.visitAfter=yV,Mu.x=CV,Mu.y=wV;var Au=function(o){return function(){return o}},kh=function(o){return(o()-.5)*1e-6},xV={value:function(){}};function RD(){for(var o=0,a=arguments.length,r={},n;o<a;++o){if(!(n=arguments[o]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new U2(r)}function U2(o){this._=o}function OV(o,a){return o.trim().split(/^|\s+/).map(function(r){var n="",e=r.indexOf(".");if(e>=0&&(n=r.slice(e+1),r=r.slice(0,e)),r&&!a.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}U2.prototype=RD.prototype={constructor:U2,on:function(a,r){var n=this._,e=OV(a+"",n),t,i=-1,s=e.length;if(arguments.length<2){for(;++i<s;)if((t=(a=e[i]).type)&&(t=SV(n[t],a.name)))return t;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++i<s;)if(t=(a=e[i]).type)n[t]=ND(n[t],a.name,r);else if(r==null)for(t in n)n[t]=ND(n[t],a.name,null);return this},copy:function(){var a={},r=this._;for(var n in r)a[n]=r[n].slice();return new U2(a)},call:function(a,r){if((t=arguments.length-2)>0)for(var n=new Array(t),e=0,t,i;e<t;++e)n[e]=arguments[e+2];if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(i=this._[a],e=0,t=i.length;e<t;++e)i[e].value.apply(r,n)},apply:function(a,r,n){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var e=this._[a],t=0,i=e.length;t<i;++t)e[t].value.apply(r,n)}};function SV(o,a){for(var r=0,n=o.length,e;r<n;++r)if((e=o[r]).name===a)return e.value}function ND(o,a,r){for(var n=0,e=o.length;n<e;++n)if(o[n].name===a){o[n]=xV,o=o.slice(0,n).concat(o.slice(n+1));break}return r!=null&&o.push({name:a,value:r}),o}var MV=RD,vp=0,W0=0,$0=0,LD=1e3,V2,X0,H2=0,Kv=0,W2=0,K0=typeof performance=="object"&&performance.now?performance:Date,jD=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(o){setTimeout(o,17)};function _D(){return Kv||(jD(AV),Kv=K0.now()+W2)}function AV(){Kv=0}function fM(){this._call=this._time=this._next=null}fM.prototype=FD.prototype={constructor:fM,restart:function(a,r,n){if(typeof a!="function")throw new TypeError("callback is not a function");n=(n==null?_D():+n)+(r==null?0:+r),!this._next&&X0!==this&&(X0?X0._next=this:V2=this,X0=this),this._call=a,this._time=n,dM()},stop:function(){this._call&&(this._call=null,this._time=Infinity,dM())}};function FD(o,a,r){var n=new fM;return n.restart(o,a,r),n}function TV(){_D(),++vp;for(var o=V2,a;o;)(a=Kv-o._time)>=0&&o._call.call(null,a),o=o._next;--vp}function BD(){Kv=(H2=K0.now())+W2,vp=W0=0;try{TV()}finally{vp=0,kV(),Kv=0}}function PV(){var o=K0.now(),a=o-H2;a>LD&&(W2-=a,H2=o)}function kV(){for(var o,a=V2,r,n=Infinity;a;)a._call?(n>a._time&&(n=a._time),o=a,a=a._next):(r=a._next,a._next=null,a=o?o._next=r:V2=r);X0=o,dM(n)}function dM(o){if(!vp){W0&&(W0=clearTimeout(W0));var a=o-Kv;a>24?(o<Infinity&&(W0=setTimeout(BD,o-K0.now()-W2)),$0&&($0=clearInterval($0))):($0||(H2=K0.now(),$0=setInterval(PV,LD)),vp=1,jD(BD))}}var DV=1664525,IV=1013904223,GD=4294967296,RV=function(){var o=1;return function(){return(o=(DV*o+IV)%GD)/GD}};function NV(o){return o.x}function LV(o){return o.y}var jV=10,_V=Math.PI*(3-Math.sqrt(5)),hM=function(o){var a,r=1,n=.001,e=1-Math.pow(n,1/300),t=0,i=.6,s=new Map,u=FD(f),l=MV("tick","end"),c=RV();o==null&&(o=[]);function f(){d(),l.call("tick",a),r<n&&(u.stop(),l.call("end",a))}function d(m){var b,E=o.length,x;m===void 0&&(m=1);for(var O=0;O<m;++O)for(r+=(t-r)*e,s.forEach(function(D){D(r)}),b=0;b<E;++b)x=o[b],x.fx==null?x.x+=x.vx*=i:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=i:(x.y=x.fy,x.vy=0);return a}function h(){for(var m=0,b=o.length,E;m<b;++m){if(E=o[m],E.index=m,E.fx!=null&&(E.x=E.fx),E.fy!=null&&(E.y=E.fy),isNaN(E.x)||isNaN(E.y)){var x=jV*Math.sqrt(.5+m),O=m*_V;E.x=x*Math.cos(O),E.y=x*Math.sin(O)}(isNaN(E.vx)||isNaN(E.vy))&&(E.vx=E.vy=0)}}function p(m){return m.initialize&&m.initialize(o,c),m}return h(),a={tick:d,restart:function(){return u.restart(f),a},stop:function(){return u.stop(),a},nodes:function(b){return arguments.length?(o=b,h(),s.forEach(p),a):o},alpha:function(b){return arguments.length?(r=+b,a):r},alphaMin:function(b){return arguments.length?(n=+b,a):n},alphaDecay:function(b){return arguments.length?(e=+b,a):+e},alphaTarget:function(b){return arguments.length?(t=+b,a):t},velocityDecay:function(b){return arguments.length?(i=1-b,a):1-i},randomSource:function(b){return arguments.length?(c=b,s.forEach(p),a):c},force:function(b,E){return arguments.length>1?(E==null?s.delete(b):s.set(b,p(E)),a):s.get(b)},find:function(b,E,x){var O=0,D=o.length,I,F,H,$,se;for(x==null?x=Infinity:x*=x,O=0;O<D;++O)$=o[O],I=b-$.x,F=E-$.y,H=I*I+F*F,H<x&&(se=$,x=H);return se},on:function(b,E){return arguments.length>1?(l.on(b,E),a):l.on(b)}}},vM=function(){var o,a,r,n,e=Au(-30),t,i=1,s=Infinity,u=.81;function l(h){var p,m=o.length,b=lM(o,NV,LV).visitAfter(f);for(n=h,p=0;p<m;++p)a=o[p],b.visit(d)}function c(){if(!!o){var h,p=o.length,m;for(t=new Array(p),h=0;h<p;++h)m=o[h],t[m.index]=+e(m,h,o)}}function f(h){var p=0,m,b,E=0,x,O,D;if(h.length){for(x=O=D=0;D<4;++D)(m=h[D])&&(b=Math.abs(m.value))&&(p+=m.value,E+=b,x+=b*m.x,O+=b*m.y);h.x=x/E,h.y=O/E}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=t[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,b){if(!h.value)return!0;var E=h.x-a.x,x=h.y-a.y,O=b-p,D=E*E+x*x;if(O*O/u<D)return D<s&&(E===0&&(E=kh(r),D+=E*E),x===0&&(x=kh(r),D+=x*x),D<i&&(D=Math.sqrt(i*D)),a.vx+=E*h.value*n/D,a.vy+=x*h.value*n/D),!0;if(h.length||D>=s)return;(h.data!==a||h.next)&&(E===0&&(E=kh(r),D+=E*E),x===0&&(x=kh(r),D+=x*x),D<i&&(D=Math.sqrt(i*D)));do h.data!==a&&(O=t[h.data.index]*n/D,a.vx+=E*O,a.vy+=x*O);while(h=h.next)}return l.initialize=function(h,p){o=h,r=p,c()},l.strength=function(h){return arguments.length?(e=typeof h=="function"?h:Au(+h),c(),l):e},l.distanceMin=function(h){return arguments.length?(i=h*h,l):Math.sqrt(i)},l.distanceMax=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l},zD=function(o,a){var r,n=1;o==null&&(o=0),a==null&&(a=0);function e(){var t,i=r.length,s,u=0,l=0;for(t=0;t<i;++t)s=r[t],u+=s.x,l+=s.y;for(u=(u/i-o)*n,l=(l/i-a)*n,t=0;t<i;++t)s=r[t],s.x-=u,s.y-=l}return e.initialize=function(t){r=t},e.x=function(t){return arguments.length?(o=+t,e):o},e.y=function(t){return arguments.length?(a=+t,e):a},e.strength=function(t){return arguments.length?(n=+t,e):n},e};function FV(o){return o.index}function UD(o,a){var r=o.get(a);if(!r)throw new Error("node not found: "+a);return r}var $2=function(o){var a=FV,r=f,n,e=Au(30),t,i,s,u,l,c=1;o==null&&(o=[]);function f(b){return 1/Math.min(s[b.source.index],s[b.target.index])}function d(b){for(var E=0,x=o.length;E<c;++E)for(var O=0,D,I,F,H,$,se,de;O<x;++O)D=o[O],I=D.source,F=D.target,H=F.x+F.vx-I.x-I.vx||kh(l),$=F.y+F.vy-I.y-I.vy||kh(l),se=Math.sqrt(H*H+$*$),se=(se-t[O])/se*b*n[O],H*=se,$*=se,F.vx-=H*(de=u[O]),F.vy-=$*de,I.vx+=H*(de=1-de),I.vy+=$*de}function h(){if(!!i){var b,E=i.length,x=o.length,O=new Map(i.map(function(I,F){return[a(I,F,i),I]})),D;for(b=0,s=new Array(E);b<x;++b)D=o[b],D.index=b,typeof D.source!="object"&&(D.source=UD(O,D.source)),typeof D.target!="object"&&(D.target=UD(O,D.target)),s[D.source.index]=(s[D.source.index]||0)+1,s[D.target.index]=(s[D.target.index]||0)+1;for(b=0,u=new Array(x);b<x;++b)D=o[b],u[b]=s[D.source.index]/(s[D.source.index]+s[D.target.index]);n=new Array(x),p(),t=new Array(x),m()}}function p(){if(!!i)for(var b=0,E=o.length;b<E;++b)n[b]=+r(o[b],b,o)}function m(){if(!!i)for(var b=0,E=o.length;b<E;++b)t[b]=+e(o[b],b,o)}return d.initialize=function(b,E){i=b,l=E,h()},d.links=function(b){return arguments.length?(o=b,h(),d):o},d.id=function(b){return arguments.length?(a=b,d):a},d.iterations=function(b){return arguments.length?(c=+b,d):c},d.strength=function(b){return arguments.length?(r=typeof b=="function"?b:Au(+b),p(),d):r},d.distance=function(b){return arguments.length?(e=typeof b=="function"?b:Au(+b),m(),d):e},d};function BV(o){return o.x+o.vx}function GV(o){return o.y+o.vy}var VD=function(o){var a,r,n,e=1,t=1;typeof o!="function"&&(o=Au(o==null?1:+o));function i(){for(var l,c=a.length,f,d,h,p,m,b,E=0;E<t;++E)for(f=lM(a,BV,GV).visitAfter(s),l=0;l<c;++l)d=a[l],m=r[d.index],b=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(x);function x(O,D,I,F,H){var $=O.data,se=O.r,de=m+se;if($){if($.index>d.index){var Ee=h-$.x-$.vx,Oe=p-$.y-$.vy,$e=Ee*Ee+Oe*Oe;$e<de*de&&(Ee===0&&(Ee=kh(n),$e+=Ee*Ee),Oe===0&&(Oe=kh(n),$e+=Oe*Oe),$e=(de-($e=Math.sqrt($e)))/$e*e,d.vx+=(Ee*=$e)*(de=(se*=se)/(b+se)),d.vy+=(Oe*=$e)*de,$.vx-=Ee*(de=1-de),$.vy-=Oe*de)}return}return D>h+de||F<h-de||I>p+de||H<p-de}}function s(l){if(l.data)return l.r=r[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(!!a){var l,c=a.length,f;for(r=new Array(c),l=0;l<c;++l)f=a[l],r[f.index]=+o(f,l,a)}}return i.initialize=function(l,c){a=l,n=c,u()},i.iterations=function(l){return arguments.length?(t=+l,i):t},i.strength=function(l){return arguments.length?(e=+l,i):e},i.radius=function(l){return arguments.length?(o=typeof l=="function"?l:Au(+l),u(),i):o},i},HD=function(o){var a=Au(.1),r,n,e;typeof o!="function"&&(o=Au(o==null?0:+o));function t(s){for(var u=0,l=r.length,c;u<l;++u)c=r[u],c.vx+=(e[u]-c.x)*n[u]*s}function i(){if(!!r){var s,u=r.length;for(n=new Array(u),e=new Array(u),s=0;s<u;++s)n[s]=isNaN(e[s]=+o(r[s],s,r))?0:+a(r[s],s,r)}}return t.initialize=function(s){r=s,i()},t.strength=function(s){return arguments.length?(a=typeof s=="function"?s:Au(+s),i(),t):a},t.x=function(s){return arguments.length?(o=typeof s=="function"?s:Au(+s),i(),t):o},t},WD=function(o){var a=Au(.1),r,n,e;typeof o!="function"&&(o=Au(o==null?0:+o));function t(s){for(var u=0,l=r.length,c;u<l;++u)c=r[u],c.vy+=(e[u]-c.y)*n[u]*s}function i(){if(!!r){var s,u=r.length;for(n=new Array(u),e=new Array(u),s=0;s<u;++s)n[s]=isNaN(e[s]=+o(r[s],s,r))?0:+a(r[s],s,r)}}return t.initialize=function(s){r=s,i()},t.strength=function(s){return arguments.length?(a=typeof s=="function"?s:Au(+s),i(),t):a},t.y=function(s){return arguments.length?(o=typeof s=="function"?s:Au(+s),i(),t):o},t};function zV(){function o(Cn){return function(){return Cn}}var a=function(jn){return jn.cluster},r=o(1),n=o(-1),e=o(100),t=o(.1),i=[0,0],s=[],u={},l=[],c=100,f=100,d={none:{x:0,y:0}},h=[],p,m="force",b=!0,E=.1;function x(Cn){if(!b)return x;p.tick(),$();for(var jn=0,Lr=s.length,Pr,Wr=Cn*E;jn<Lr;++jn)Pr=s[jn],Pr.vx+=(d[a(Pr)].x-Pr.x)*Wr,Pr.vy+=(d[a(Pr)].y-Pr.y)*Wr}function O(){!s||D()}function D(){if(!(!s||!s.length)){if(a(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Cn=I();p=hM(Cn.nodes).force("x",HD(c).strength(.1)).force("y",WD(f).strength(.1)).force("collide",VD(function(jn){return jn.r}).iterations(4)).force("charge",vM().strength(n)).force("links",$2(Cn.nodes.length?Cn.links:[]).distance(e).strength(t)),h=p.nodes(),$()}}function I(){var Cn=[],jn=[],Lr={},Pr=[],Wr={},Jr=[];return Wr=F(s),Jr=H(l),Pr=Object.keys(Wr),Pr.forEach(function(Ta,fo){var _i=Wr[Ta];Cn.push({id:Ta,size:_i.count,r:Math.sqrt(_i.sumforceNodeSize/Math.PI)}),Lr[Ta]=fo}),Jr.forEach(function(Ta){var fo=Qi(Ta,"source"),_i=Qi(Ta,"target"),Pu=Lr[fo],Kc=Lr[_i];Pu!==void 0&&Kc!==void 0&&jn.push({source:Pu,target:Kc,count:Ta.count})}),{nodes:Cn,links:jn}}function F(Cn){var jn={};return Cn.forEach(function(Lr){var Pr=a(Lr);jn[Pr]||(jn[Pr]={count:0,sumforceNodeSize:0})}),Cn.forEach(function(Lr){var Pr=a(Lr),Wr=r(Lr),Jr=jn[Pr];Jr.count=Jr.count+1,Jr.sumforceNodeSize=Jr.sumforceNodeSize+Math.PI*(Wr*Wr)*1.3,jn[Pr]=Jr}),jn}function H(Cn){var jn={},Lr=[];Cn.forEach(function(Wr){var Jr=se(Wr),Ta=0;jn[Jr]!==void 0&&(Ta=jn[Jr]),Ta+=1,jn[Jr]=Ta});var Pr=Object.entries(jn);return Pr.forEach(function(Wr){var Jr=Object(Xe.a)(Wr,2),Ta=Jr[0],fo=Jr[1],_i=Ta.split("~")[0],Pu=Ta.split("~")[1];_i!==void 0&&Pu!==void 0&&Lr.push({source:_i,target:Pu,count:fo})}),Lr}function $(){return d={none:{x:0,y:0}},h.forEach(function(Cn){d[Cn.id]={x:Cn.x-i[0],y:Cn.y-i[1]}}),d}function se(Cn){var jn=Qi(Cn,"source"),Lr=Qi(Cn,"target"),Pr=a(u[jn]),Wr=a(u[Lr]);return Pr<=Wr?"".concat(Pr,"~").concat(Wr):"".concat(Wr,"~").concat(Pr)}function de(Cn){u={},Cn.forEach(function(jn){u[jn.id]=jn})}function Ee(Cn){return arguments.length?(m=Cn,O(),x):m}function Oe(Cn){return arguments.length?typeof Cn=="string"?(a=function(Lr){return Lr[Cn]},x):(a=Cn,x):a}function $e(Cn){return arguments.length?(b=Cn,x):b}function tt(Cn){return arguments.length?(E=Cn,x):E}function Le(Cn){return arguments.length?(c=Cn,x):c}function it(Cn){return arguments.length?(f=Cn,x):f}function It(Cn){return arguments.length?(de(Cn||[]),s=Cn||[],x):s}function tn(Cn){return arguments.length?(l=Cn||[],O(),x):l}function bn(Cn){return arguments.length?(typeof Cn=="function"?r=Cn:r=o(+Cn),O(),x):r}function dn(Cn){return arguments.length?(typeof Cn=="function"?n=Cn:n=o(+Cn),O(),x):n}function en(Cn){return arguments.length?(typeof Cn=="function"?e=Cn:e=o(+Cn),O(),x):e}function Vn(Cn){return arguments.length?(typeof Cn=="function"?t=Cn:t=o(+Cn),O(),x):t}function jt(Cn){return arguments.length?(i=Cn,x):i}return x.initialize=function(Cn){s=Cn,O()},x.template=Ee,x.groupBy=Oe,x.enableGrouping=$e,x.strength=tt,x.centerX=Le,x.centerY=it,x.nodes=It,x.links=tn,x.forceNodeSize=bn,x.nodeSize=x.forceNodeSize,x.forceCharge=dn,x.forceLinkDistance=en,x.forceLinkStrength=Vn,x.offset=jt,x.getFocis=$,x}var gM={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},UV=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,n&&e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(e){var t=this;t.nodes=e.nodes||[];var i=e.edges||[];t.edges=i.map(function(s){var u={},l=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(s).forEach(function(c){l.indexOf(c)>-1||(u[c]=s[c])}),u}),t.ticking=!1}},{key:"execute",value:function(e){var t=this,i=t.nodes,s=t.edges;if(!t.ticking){var u=t.forceSimulation,l=t.alphaMin,c=t.alphaDecay,f=t.alpha;if(u){if(e){if(t.clustering&&t.clusterForce&&(t.clusterForce.nodes(i),t.clusterForce.links(s)),u.nodes(i),s&&t.edgeForce)t.edgeForce.links(s);else if(s&&!t.edgeForce){var E=$2().id(function(x){return x.id}).links(s);t.edgeStrength&&E.strength(t.edgeStrength),t.linkDistance&&E.distance(t.linkDistance),t.edgeForce=E,u.force("link",E)}}t.preventOverlap&&t.overlapProcess(u),u.alpha(f).restart(),this.ticking=!0}else try{var d=vM();if(t.nodeStrength&&d.strength(t.nodeStrength),u=hM().nodes(i),t.clustering){var h=zV();h.centerX(t.center[0]).centerY(t.center[1]).template("force").strength(t.clusterFociStrength),s&&h.links(s),i&&h.nodes(i),h.forceLinkDistance(t.clusterEdgeDistance).forceLinkStrength(t.clusterEdgeStrength).forceCharge(t.clusterNodeStrength).forceNodeSize(t.clusterNodeSize),t.clusterForce=h,u.force("group",h)}if(u.force("center",zD(t.center[0],t.center[1])).force("charge",d).alpha(f).alphaDecay(c).alphaMin(l),t.preventOverlap&&t.overlapProcess(u),s){var p=$2().id(function(x){return x.id}).links(s);t.edgeStrength&&p.strength(t.edgeStrength),t.linkDistance&&p.distance(t.linkDistance),t.edgeForce=p,u.force("link",p)}if(t.workerEnabled&&!HV()&&(t.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!t.workerEnabled)u.on("tick",function(){t.tick()}).on("end",function(){t.ticking=!1,t.onLayoutEnd&&t.onLayoutEnd()}),t.ticking=!0;else{u.stop();for(var m=VV(u),b=1;b<=m;b++)u.tick(),postMessage({nodes:i,currentTick:b,totalTicks:m,type:gM.TICK},void 0);t.ticking=!1}t.forceSimulation=u,t.ticking=!0}catch(x){t.ticking=!1,console.warn(x)}}}},{key:"overlapProcess",value:function(e){var t=this,i=t.nodeSize,s=t.nodeSpacing,u,l,c=t.collideStrength;if(gr(s)?l=function(){return s}:Th(s)?l=s:l=function(){return 0},!i)u=function(m){if(m.size){if(js(m.size)){var b=m.size[0]>m.size[1]?m.size[0]:m.size[1];return b/2+l(m)}if(Nf(m.size)){var E=m.size.width>m.size.height?m.size.width:m.size.height;return E/2+l(m)}return m.size/2+l(m)}return 10+l(m)};else if(Th(i))u=function(m){var b=i(m);return b+l(m)};else if(js(i)){var f=i[0]>i[1]?i[0]:i[1],d=f/2;u=function(m){return d+l(m)}}else if(gr(i)){var h=i/2;u=function(m){return h+l(m)}}else u=function(){return 10};e.force("collisionForce",VD(u).strength(c))}},{key:"updateCfg",value:function(e){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.forceSimulation=null,Object.assign(t,e)}},{key:"destroy",value:function(){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.nodes=null,e.edges=null,e.destroyed=!0}}]),r}(qs);function VV(o){var a=o.alphaMin(),r=o.alphaTarget(),n=o.alpha(),e=Math.log((a-r)/(n-r))/Math.log(1-o.alphaDecay()),t=Math.ceil(e);return t}function HV(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function WV(o,a,r,n){o.forEach(function(e,t){o[t].children=[],o[t].parent=[]}),n?a.forEach(function(e){var t=Qi(e,"source"),i=Qi(e,"target"),s=0;t&&(s=r[t]);var u=0;i&&(u=r[i]);var l=o[s].children,c=o[u].parent;l.push(o[u].id),c.push(o[s].id)}):a.forEach(function(e){var t=Qi(e,"source"),i=Qi(e,"target"),s=0;t&&(s=r[t]);var u=0;i&&(u=r[i]);var l=o[s].children,c=o[u].children;l.push(o[u].id),c.push(o[s].id)})}function $V(o,a,r){for(var n=r.length,e=0;e<n;e++){var t=Qi(r[e],"source"),i=Qi(r[e],"target");if(o.id===t&&a.id===i||a.id===t&&o.id===i)return!0}return!1}function XV(o,a){var r=o.degree,n=a.degree;return r<n?-1:r>n?1:0}var KV=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var e=this,t=e.nodes,i=e.edges,s=t.length;if(s===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var u=e.center;if(s===1){t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd();return}var l=e.radius,c=e.startRadius,f=e.endRadius,d=e.divisions,h=e.startAngle,p=e.endAngle,m=(p-h)/s,b={};t.forEach(function(Ee,Oe){b[Ee.id]=Oe}),e.nodeMap=b;var E=H0(t.length,b,i);e.degrees=E,!l&&!c&&!f?l=e.height>e.width?e.width/2:e.height/2:!c&&f?c=f:c&&!f&&(f=c);var x=e.angleRatio,O=m*x,D=e.ordering,I=[];D==="topology"?I=e.topologyOrdering():D==="topology-directed"?I=e.topologyOrdering(!0):D==="degree"?I=e.degreeOrdering():I=t;for(var F=e.clockwise,H=Math.ceil(s/d),$=0;$<s;++$){var se=l;!se&&c!==null&&f!==null&&(se=c+$*(f-c)/(s-1)),se||(se=10+$*100/(s-1));var de=h+$%H*O+2*Math.PI/d*Math.floor($/H);F||(de=p-$%H*O-2*Math.PI/d*Math.floor($/H)),I[$].x=u[0]+Math.cos(de)*se,I[$].y=u[1]+Math.sin(de)*se,I[$].weight=E[$]}return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:I,edges:this.edges}}},{key:"topologyOrdering",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this,i=t.degrees,s=t.edges,u=t.nodes,l=sM(u),c=t.nodeMap,f=[l[0]],d=[u[0]],h=[],p=u.length;h[0]=!0,WV(l,s,c,e);var m=0;return l.forEach(function(b,E){if(E!==0)if((E===p-1||i[E]!==i[E+1]||$V(f[m],b,s))&&!h[E])f.push(b),d.push(u[c[b.id]]),h[E]=!0,m++;else{for(var x=f[m].children,O=!1,D=0;D<x.length;D++){var I=c[x[D]];if(i[I]===i[E]&&!h[I]){f.push(l[I]),d.push(u[c[l[I].id]]),h[I]=!0,O=!0;break}}for(var F=0;!O&&(h[F]||(f.push(l[F]),d.push(u[c[l[F].id]]),h[F]=!0,O=!0),F++,F!==p););}}),d}},{key:"degreeOrdering",value:function(){var e=this,t=e.nodes,i=[],s=e.degrees;return t.forEach(function(u,l){u.degree=s[l],i.push(u)}),i.sort(XV),i}},{key:"getType",value:function(){return"circular"}}]),r}(qs),YV=v("P81+"),ZV=v.n(YV),pM=ZV.a;!pM&&typeof window!="undefined"&&(pM=window.graphlib),Array.prototype.flat||(Array.prototype.flat=function(o){var a=o||1;if(!!isFinite(a)){var r=this.length,n=[];if(this.length===0)return this;for(;a--;){var e=[],t=!1;if(n.length===0){t=!0;for(var i=0;i<r;i++)if(this[i]instanceof Array){var s;(s=n).push.apply(s,Object(ot.a)(this[i]))}else n.push(this[i])}else{for(var u=0;u<n.length;u++)n[u]instanceof Array?(t=!0,e.push.apply(e,Object(ot.a)(n[u]))):e.push(n[u]);n=e}if(!t&&a===Infinity)break}return n}});var Ad=pM,$D=function(a){a._prev._next=a._next,a._next._prev=a._prev,delete a._next,delete a._prev},JV=function(a,r){if(a!=="_next"&&a!=="_prev")return r},QV=function(){function o(){Object(Ie.a)(this,o);var a={};a._next=a._prev=a,this.isentinel=a}return Object(pe.a)(o,[{key:"dequeue",value:function(){var r=this.isentinel,n=r._prev;if(n!==r)return $D(n),n}},{key:"enqueue",value:function(){var r=this.isentinel,n=r._prev;if(n!==r)return $D(n),n}},{key:"toString",value:function(){for(var r=[],n=this.isentinel,e=n._prev;e!==n;)r.push(JSON.stringify(e,JV)),e=e._prev;return"[".concat(r.join(", "),"]")}}]),o}(),qV=QV,e7=Ad.Graph,t7=function(){return 1},n7=function(a,r){var n;if(a.nodeCount()<=1)return[];var e=i7(a,r||t7),t=r7(e.graph,e.buckets,e.zeroIdx);return(n=t.map(function(i){return a.outEdges(i.v,i.w)}))===null||n===void 0?void 0:n.flat()},r7=function(a,r,n){for(var e=[],t=r[r.length-1],i=r[0],s;a.nodeCount();){for(;s=i.dequeue();)mM(a,r,n,s);for(;s=t.dequeue();)mM(a,r,n,s);if(a.nodeCount()){for(var u=r.length-2;u>0;--u)if(s=r[u].dequeue(),s){e=e.concat(mM(a,r,n,s,!0));break}}}return e},mM=function(a,r,n,e,t){var i,s,u=t?[]:void 0;return(i=a.inEdges(e.v))===null||i===void 0||i.forEach(function(l){var c=a.edge(l),f=a.node(l.v);t&&u.push({v:l.v,w:l.w}),f.out===void 0&&(f.out=0),f.out-=c,yM(r,n,f)}),(s=a.outEdges(e.v))===null||s===void 0||s.forEach(function(l){var c=a.edge(l),f=l.w,d=a.node(f);d.in===void 0&&(d.in=0),d.in-=c,yM(r,n,d)}),a.removeNode(e.v),u},i7=function(a,r){var n=new e7,e=0,t=0;a.nodes().forEach(function(c){n.setNode(c,{v:c,in:0,out:0})}),a.edges().forEach(function(c){var f=n.edge(c.v,c.w)||0,d=r==null?void 0:r(c),h=f+d;n.setEdge(c.v,c.w,h),t=Math.max(t,n.node(c.v).out+=d),e=Math.max(e,n.node(c.w).in+=d)});for(var i=[],s=t+e+3,u=0;u<s;u++)i.push(new qV);var l=e+1;return n.nodes().forEach(function(c){yM(i,l,n.node(c))}),{buckets:i,zeroIdx:l,graph:n}},yM=function(a,r,n){n.out?n.in?a[n.out-n.in+r].enqueue(n):a[a.length-1].enqueue(n):a[0].enqueue(n)},a7=n7,o7=function(a){var r=function(t){return function(i){return t.edge(i).weight}},n=a.graph().acyclicer==="greedy"?a7(a,r(a)):s7(a);n==null||n.forEach(function(e){var t=a.edge(e);a.removeEdge(e),t.forwardName=e.name,t.reversed=!0,a.setEdge(e.w,e.v,t,"rev-".concat(Math.random()))})},s7=function(a){var r=[],n={},e={},t=function i(s){var u;e.hasOwnProperty(s)||(e[s]=!0,n[s]=!0,(u=a.outEdges(s))===null||u===void 0||u.forEach(function(l){n.hasOwnProperty(l.w)?r.push(l):i(l.w)}),delete n[s])};return a.nodes().forEach(t),r},u7=function(a){a.edges().forEach(function(r){var n=a.edge(r);if(n.reversed){a.removeEdge(r);var e=n.forwardName;delete n.reversed,delete n.forwardName,a.setEdge(r.w,r.v,n,e)}})},XD={run:o7,undo:u7},KD=Ad.Graph,YD=function(a,r,n,e){var t;do t="".concat(e).concat(Math.random());while(a.hasNode(t));return n.dummy=r,a.setNode(t,n),t},ZD=function(a){var r=new KD().setGraph(a.graph());return a.nodes().forEach(function(n){r.setNode(n,a.node(n))}),a.edges().forEach(function(n){var e=r.edge(n.v,n.w)||{weight:0,minlen:1},t=a.edge(n);r.setEdge(n.v,n.w,{weight:e.weight+t.weight,minlen:Math.max(e.minlen,t.minlen)})}),r},l7=function(a){var r=new KD({multigraph:a.isMultigraph()}).setGraph(a.graph());return a.nodes().forEach(function(n){var e;((e=a.children(n))===null||e===void 0?void 0:e.length)||r.setNode(n,a.node(n))}),a.edges().forEach(function(n){return r.setEdge(n,a.edge(n))}),r},X2=function(a,r){var n={};return a==null||a.forEach(function(e,t){n[e]=r[t]}),n},c7=function(a){var r=a.nodes().map(function(n){var e,t={};return(e=a.outEdges(n))===null||e===void 0||e.forEach(function(i){t[i.w]=(t[i.w]||0)+a.edge(i).weight}),t});return X2(a.nodes(),r)},f7=function(a){var r=a.nodes().map(function(n){var e,t={};return(e=a.inEdges(n))===null||e===void 0||e.forEach(function(i){t[i.v]=(t[i.v]||0)+a.edge(i).weight}),t});return X2(a.nodes(),r)},d7=function(a,r){var n=a.x,e=a.y,t=r.x-n,i=r.y-e,s=a.width/2,u=a.height/2;if(!t&&!i)return{x:0,y:0};var l,c;return Math.abs(i)*s>Math.abs(t)*u?(i<0&&(u=-u),l=u*t/i,c=u):(t<0&&(s=-s),l=s,c=s*i/t),{x:n+l,y:e+c}},h7=function(a){for(var r=[],n=[],e=qD(a)+1,t=0;t<e;t++)r.push([]),n.push([]);return a.nodes().forEach(function(i){var s=a.node(i),u=s.rank;u!==void 0&&r[u]&&n[u].push(i)}),n==null||n.forEach(function(i,s){i==null||i.sort(function(u,l){var c,f;return((c=a.node(u))===null||c===void 0?void 0:c.order)-((f=a.node(l))===null||f===void 0?void 0:f.order)}),i.forEach(function(u){r[s].push(u)})}),r},JD=function(a){var r=a.nodes().filter(function(e){return a.node(e).rank!==void 0}).map(function(e){return a.node(e).rank}),n=Math.min.apply(Math,Object(ot.a)(r));a.nodes().forEach(function(e){var t=a.node(e);t.hasOwnProperty("rank")&&(t.rank||(t.rank=0),t.rank-=n)})},QD=function(a){var r=a.nodes().filter(function(l){return a.node(l).rank!==void 0}).map(function(l){return a.node(l).rank}),n=Math.min.apply(Math,Object(ot.a)(r)),e=[];a.nodes().forEach(function(l){var c,f=(((c=a.node(l))===null||c===void 0?void 0:c.rank)||0)-n;e[f]||(e[f]=[]),e[f].push(l)});for(var t=0,i=a.graph().nodeRankFactor||0,s=0;s<e.length;s++){var u=e[s];u===void 0&&s%i!=0?--t:t&&(u==null||u.forEach(function(l){a.node(l).rank||(a.node(l).rank=0),a.node(l).rank+=t}))}},v7=function(a,r,n,e){var t={width:0,height:0};return gr(n)&&gr(e)&&(t.rank=n,t.order=e),YD(a,"border",t,r)},qD=function(a){var r=a.nodes().map(function(n){var e=a.node(n).rank;return e!==void 0?e:-Infinity});return Math.max.apply(Math,Object(ot.a)(r))},g7=function(a,r){var n={lhs:[],rhs:[]};return a==null||a.forEach(function(e){r(e)?n.lhs.push(e):n.rhs.push(e)}),n},e3=function(a,r){var n=Date.now();try{return r()}finally{console.log("".concat(a," time: ").concat(Date.now()-n,"ms"))}},t3=function(a,r){return r()},bM=function(a,r){var n=Infinity,e;return a==null||a.forEach(function(t){var i=r(t);n>i&&(n=i,e=t)}),e},Do={addDummyNode:YD,simplify:ZD,asNonCompoundGraph:l7,successorWeights:c7,predecessorWeights:f7,intersectRect:d7,buildLayerMatrix:h7,normalizeRanks:JD,removeEmptyRanks:QD,addBorderNode:v7,maxRank:qD,partition:g7,time:e3,notime:t3,zipObject:X2,minBy:bM},p7=function(a){a.graph().dummyChains=[],a.edges().forEach(function(r){return m7(a,r)})},m7=function(a,r){var n,e,t=r.v,i=a.node(t).rank,s=r.w,u=a.node(s).rank,l=r.name,c=a.edge(r),f=c.labelRank;if(u!==i+1){a.removeEdge(r);var d,h,p;for(p=0,++i;i<u;++p,++i)c.points=[],h={edgeLabel:c,width:0,height:0,edgeObj:r,rank:i},d=Do.addDummyNode(a,"edge",h,"_d"),i===f&&(h.width=c.width,h.height=c.height,h.dummy="edge-label",h.labelpos=c.labelpos),a.setEdge(t,d,{weight:c.weight},l),p===0&&(a.graph().dummyChains||(a.graph().dummyChains=[]),(e=(n=a.graph())===null||n===void 0?void 0:n.dummyChains)===null||e===void 0||e.push(d)),t=d;a.setEdge(t,s,{weight:c.weight},l)}},y7=function(a){var r;(r=a.graph().dummyChains)===null||r===void 0||r.forEach(function(n){var e,t=a.node(n),i=t.edgeLabel,s;t.edgeObj&&a.setEdge(t.edgeObj,i);for(var u=n;t.dummy;)s=(e=a.successors(u))===null||e===void 0?void 0:e[0],a.removeNode(u),i.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(i.x=t.x,i.y=t.y,i.width=t.width,i.height=t.height),u=s,t=a.node(u)})},n3={run:p7,undo:y7},CM=function(a){var r,n={},e=function t(i){var s,u=a.node(i);if(n.hasOwnProperty(i))return u.rank;n[i]=!0;var l=(s=a.outEdges(i))===null||s===void 0?void 0:s.map(function(f){return t(f.w)-a.edge(f).minlen||Infinity}),c=Math.min.apply(Math,Object(ot.a)(l));return(c===Number.POSITIVE_INFINITY||c===void 0||c===null)&&(c=0),u.rank=c,c};(r=a.sources())===null||r===void 0||r.forEach(function(t){return e(t)})},r3=function(a){var r,n={},e=0,t=function s(u){var l,c=a.node(u);if(n.hasOwnProperty(u))return c.rank;n[u]=!0;var f=(l=a.outEdges(u))===null||l===void 0?void 0:l.map(function(h){return s(h.w)-a.edge(h).minlen||Infinity}),d=Math.min.apply(Math,Object(ot.a)(f));return(d===Number.POSITIVE_INFINITY||d===void 0||d===null)&&(d=0),c.rank=d,e=Math.min(c.rank,e),c.rank};(r=a.sources())===null||r===void 0||r.forEach(function(s){return t(s)}),e+=1;var i=function s(u,l){var c,f=a.node(u),d=isNaN(f.layer)?l:f.layer;(f.rank===void 0||f.rank<d)&&(f.rank=d),(c=a.outEdges(u))===null||c===void 0||c.map(function(h){s(h.w,d+a.edge(h).minlen)})};a.nodes().forEach(function(s){var u=a.node(s);isNaN(u.layer)?u.rank-=e:i(s,u.layer)})},Td=function(a,r){return a.node(r.w).rank-a.node(r.v).rank-a.edge(r).minlen},Oq={longestPath:CM,longestPathWithLayer:r3,slack:Td},i3=Ad.Graph,a3=function(a){var r=new i3({directed:!1}),n=a.nodes()[0],e=a.nodeCount();r.setNode(n,{});for(var t,i;b7(r,a)<e;)t=s3(r,a),i=r.hasNode(t.v)?Td(a,t):-Td(a,t),u3(r,a,i);return r},b7=function(a,r){var n=function e(t){r.nodeEdges(t).forEach(function(i){var s=i.v,u=t===s?i.w:s;!a.hasNode(u)&&!Td(r,i)&&(a.setNode(u,{}),a.setEdge(t,u,{}),e(u))})};return a.nodes().forEach(n),a.nodeCount()},o3=function(a){var r=new i3({directed:!1}),n=a.nodes()[0],e=a.nodeCount();r.setNode(n,{});for(var t,i;C7(r,a)<e;)t=s3(r,a),i=r.hasNode(t.v)?Td(a,t):-Td(a,t),u3(r,a,i);return r},C7=function(a,r){var n=function e(t){var i;(i=r.nodeEdges(t))===null||i===void 0||i.forEach(function(s){var u=s.v,l=t===u?s.w:u;!a.hasNode(l)&&(r.node(l).layer!==void 0||!Td(r,s))&&(a.setNode(l,{}),a.setEdge(t,l,{}),e(l))})};return a.nodes().forEach(n),a.nodeCount()},s3=function(a,r){return bM(r.edges(),function(n){return a.hasNode(n.v)!==a.hasNode(n.w)?Td(r,n):Infinity})},u3=function(a,r,n){a.nodes().forEach(function(e){r.node(e).rank||(r.node(e).rank=0),r.node(e).rank+=n})},Sq={feasibleTree:a3,feasibleTreeWithLayer:o3},l3=Ad.alg,E7=l3.preorder,w7=l3.postorder,Yv=function(a){a=ZD(a),CM(a);var r=a3(a);wM(r),EM(r,a);for(var n,e;n=f3(r);)e=d3(r,a,n),h3(r,a,n,e)},EM=function(a,r){var n=w7(a,a.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(function(e){x7(a,r,e)})},x7=function(a,r,n){var e=a.node(n),t=e.parent;a.edge(n,t).cutvalue=c3(a,r,n)},c3=function(a,r,n){var e,t=a.node(n),i=t.parent,s=!0,u=r.edge(n,i),l=0;return u||(s=!1,u=r.edge(i,n)),l=u.weight,(e=r.nodeEdges(n))===null||e===void 0||e.forEach(function(c){var f=c.v===n,d=f?c.w:c.v;if(d!==i){var h=f===s,p=r.edge(c).weight;if(l+=h?p:-p,M7(a,n,d)){var m=a.edge(n,d).cutvalue;l+=h?-m:m}}}),l},wM=function(a,r){r!==void 0&&(r=a.nodes()[0]),O7(a,{},1,r)},O7=function o(a,r,n,e,t){var i,s=n,u=n,l=a.node(e);return r[e]=!0,(i=a.neighbors(e))===null||i===void 0||i.forEach(function(c){r.hasOwnProperty(c)||(u=o(a,r,u,c,e))}),l.low=s,l.lim=u++,t?l.parent=t:delete l.parent,u},f3=function(a){return a.edges().find(function(r){return a.edge(r).cutvalue<0})},d3=function(a,r,n){var e=n.v,t=n.w;r.hasEdge(e,t)||(e=n.w,t=n.v);var i=a.node(e),s=a.node(t),u=i,l=!1;i.lim>s.lim&&(u=s,l=!0);var c=r.edges().filter(function(f){return l===v3(a,a.node(f.v),u)&&l!==v3(a,a.node(f.w),u)});return bM(c,function(f){return Td(r,f)})},h3=function(a,r,n,e){var t=n.v,i=n.w;a.removeEdge(t,i),a.setEdge(e.v,e.w,{}),wM(a),EM(a,r),S7(a,r)},S7=function(a,r){var n=a.nodes().find(function(t){return!r.node(t).parent}),e=E7(a,n);e=e==null?void 0:e.slice(1),e==null||e.forEach(function(t){var i=a.node(t).parent,s=r.edge(t,i),u=!1;s||(s=r.edge(i,t),u=!0),r.node(t).rank=r.node(i).rank+(u?s.minlen:-s.minlen)})},M7=function(a,r,n){return a.hasEdge(r,n)},v3=function(a,r,n){return n.low<=r.lim&&r.lim<=n.lim};Yv.initLowLimValues=wM,Yv.initCutValues=EM,Yv.calcCutValue=c3,Yv.leaveEdge=f3,Yv.enterEdge=d3,Yv.exchangeEdges=h3;var A7=Yv,T7=function(a){switch(a.graph().ranker){case"network-simplex":k7(a);break;case"tight-tree":g3(a);break;case"longest-path":P7(a);break;default:g3(a)}},P7=CM,g3=function(a){r3(a),o3(a)},k7=function(a){A7(a)},D7=T7,I7=function(a){var r,n=N7(a);(r=a.graph().dummyChains)===null||r===void 0||r.forEach(function(e){var t,i,s=a.node(e),u=s.edgeObj;if(!!u)for(var l=R7(a,n,u.v,u.w),c=l.path,f=l.lca,d=0,h=c[d],p=!0;e!==u.w;){if(s=a.node(e),p){for(;(h=c[d])!==f&&a.node(h).maxRank<s.rank;)d++;h===f&&(p=!1)}if(!p){for(;d<c.length-1&&((t=a.node(h=c[d+1]))===null||t===void 0?void 0:t.minRank)<=s.rank;)d++;h=c[d]}a.setParent(e,h),e=(i=a.successors(e))===null||i===void 0?void 0:i[0]}})},R7=function(a,r,n,e){var t=[],i=[],s=Math.min(r[n].low,r[e].low),u=Math.max(r[n].lim,r[e].lim),l,c;l=n;do l=a.parent(l),t.push(l);while(l&&(r[l].low>s||u>r[l].lim));for(c=l,l=e;(l=a.parent(l))!==c;)i.push(l);return{lca:c,path:t.concat(i.reverse())}},N7=function(a){var r,n={},e=0,t=function i(s){var u,l=e;(u=a.children(s))===null||u===void 0||u.forEach(i),n[s]={low:l,lim:e++}};return(r=a.children())===null||r===void 0||r.forEach(t),n},L7=I7,j7=function(a){var r,n=Do.addDummyNode(a,"root",{},"_root"),e=F7(a),t=Math.max.apply(Math,Object(ot.a)(Object.values(e)))-1,i=2*t+1;a.graph().nestingRoot=n,a.edges().forEach(function(u){a.edge(u).minlen*=i});var s=B7(a)+1;(r=a.children())===null||r===void 0||r.forEach(function(u){_7(a,n,i,s,t,e,u)}),a.graph().nodeRankFactor=i},_7=function o(a,r,n,e,t,i,s){var u=a.children(s);if(!(u==null?void 0:u.length)){s!==r&&a.setEdge(r,s,{weight:0,minlen:n});return}var l=Do.addBorderNode(a,"_bt"),c=Do.addBorderNode(a,"_bb"),f=a.node(s);a.setParent(l,s),f.borderTop=l,a.setParent(c,s),f.borderBottom=c,u==null||u.forEach(function(d){o(a,r,n,e,t,i,d);var h=a.node(d),p=h.borderTop?h.borderTop:d,m=h.borderBottom?h.borderBottom:d,b=h.borderTop?e:2*e,E=p!==m?1:t-i[s]+1;a.setEdge(l,p,{minlen:E,weight:b,nestingEdge:!0}),a.setEdge(m,c,{minlen:E,weight:b,nestingEdge:!0})}),a.parent(s)||a.setEdge(r,l,{weight:0,minlen:t+i[s]})},F7=function(a){var r,n={},e=function t(i,s){var u=a.children(i);u==null||u.forEach(function(l){return t(l,s+1)}),n[i]=s};return(r=a.children())===null||r===void 0||r.forEach(function(t){return e(t,1)}),n},B7=function(a){var r=0;return a.edges().forEach(function(n){r+=a.edge(n).weight}),r},G7=function(a){var r=a.graph();r.nestingRoot&&a.removeNode(r.nestingRoot),delete r.nestingRoot,a.edges().forEach(function(n){var e=a.edge(n);e.nestingEdge&&a.removeEdge(n)})},p3={run:j7,cleanup:G7},z7=function(a){var r,n=function e(t){var i=a.children(t),s=a.node(t);if((i==null?void 0:i.length)&&i.forEach(function(c){return e(c)}),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(var u=s.minRank,l=s.maxRank+1;u<l;++u)m3(a,"borderLeft","_bl",t,s,u),m3(a,"borderRight","_br",t,s,u)}};(r=a.children())===null||r===void 0||r.forEach(function(e){return n(e)})},m3=function(a,r,n,e,t,i){var s={rank:i,width:0,height:0,borderType:r},u=t[r][i-1],l=Do.addDummyNode(a,"border",s,n);t[r][i]=l,a.setParent(l,e),u&&a.setEdge(u,l,{weight:1})},U7=z7,V7=function(a){var r,n=(r=a.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(n==="lr"||n==="rl")&&y3(a)},H7=function(a){var r,n=(r=a.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(n==="bt"||n==="rl")&&W7(a),(n==="lr"||n==="rl")&&($7(a),y3(a))},y3=function(a){a.nodes().forEach(function(r){b3(a.node(r))}),a.edges().forEach(function(r){b3(a.edge(r))})},b3=function(a){var r=a.width;a.width=a.height,a.height=r},W7=function(a){a.nodes().forEach(function(r){xM(a.node(r))}),a.edges().forEach(function(r){var n,e=a.edge(r);(n=e.points)===null||n===void 0||n.forEach(function(t){return xM(t)}),e.hasOwnProperty("y")&&xM(e)})},xM=function(a){a.y=-a.y},$7=function(a){a.nodes().forEach(function(r){OM(a.node(r))}),a.edges().forEach(function(r){var n,e=a.edge(r);(n=e.points)===null||n===void 0||n.forEach(function(t){return OM(t)}),e.hasOwnProperty("x")&&OM(e)})},OM=function(a){var r=a.x;a.x=a.y,a.y=r},C3={adjust:V7,undo:H7},X7=function(a){for(var r={},n=a.nodes().filter(function(d){var h;return!((h=a.children(d))===null||h===void 0?void 0:h.length)}),e=n.map(function(d){return a.node(d).rank}),t=Math.max.apply(Math,Object(ot.a)(e)),i=[],s=0;s<t+1;s++)i.push([]);var u=function d(h){var p;if(!r.hasOwnProperty(h)){r[h]=!0;var m=a.node(h);isNaN(m.rank)||i[m.rank].push(h),(p=a.successors(h))===null||p===void 0||p.forEach(function(b){return d(b)})}},l=n.sort(function(d,h){return a.node(d).rank-a.node(h).rank}),c=l.filter(function(d){return a.node(d).fixorder!==void 0}),f=c.sort(function(d,h){return a.node(d).fixorder-a.node(h).fixorder});return f==null||f.forEach(function(d){isNaN(a.node(d).rank)||i[a.node(d).rank].push(d),r[d]=!0}),l==null||l.forEach(u),i},E3=X7,K7=function(a,r,n){for(var e=X2(n,n.map(function(f,d){return d})),t=r.map(function(f){var d,h=(d=a.outEdges(f))===null||d===void 0?void 0:d.map(function(p){return{pos:e[p.w]||0,weight:a.edge(p).weight}});return h==null?void 0:h.sort(function(p,m){return p.pos-m.pos})}),i=t.flat().filter(function(f){return f!==void 0}),s=1;s<n.length;)s<<=1;var u=2*s-1;s-=1;var l=Array(u).fill(0,0,u),c=0;return i==null||i.forEach(function(f){var d=f.pos+s;l[d]+=f.weight;for(var h=0;d>0;)d%2&&(h+=l[d+1]),d=d-1>>1,l[d]+=f.weight;c+=f.weight*h}),c},Y7=function(a,r){for(var n=0,e=1;e<(r==null?void 0:r.length);++e)n+=K7(a,r[e-1],r[e]);return n},w3=Y7,Z7=Ad.Graph,J7=function(a,r,n){var e=Q7(a),t=new Z7({compound:!0}).setGraph({root:e}).setDefaultNodeLabel(function(i){return a.node(i)});return a.nodes().forEach(function(i){var s=a.node(i),u=a.parent(i);(s.rank===r||s.minRank<=r&&r<=s.maxRank)&&(t.setNode(i),t.setParent(i,u||e),a[n](i).forEach(function(l){var c=l.v===i?l.w:l.v,f=t.edge(c,i),d=f!==void 0?f.weight:0;t.setEdge(c,i,{weight:a.edge(l).weight+d})}),s.hasOwnProperty("minRank")&&t.setNode(i,{borderLeft:s.borderLeft[r],borderRight:s.borderRight[r]}))}),t},Q7=function(a){for(var r;a.hasNode(r="_root".concat(Math.random())););return r},q7=J7,e9=function(a,r,n){var e={},t;n==null||n.forEach(function(i){for(var s=a.parent(i),u,l;s;){if(u=a.parent(s),u?(l=e[u],e[u]=s):(l=t,t=s),l&&l!==s){r.setEdge(l,s);return}s=u}})},t9=e9,n9=function(a,r){return r.map(function(n){var e=a.inEdges(n);if(!(e==null?void 0:e.length))return{v:n};{var t={sum:0,weight:0};return e==null||e.forEach(function(i){var s=a.edge(i),u=a.node(i.v);t.sum+=s.weight*u.order,t.weight+=s.weight}),{v:n,barycenter:t.sum/t.weight,weight:t.weight}}})},r9=n9,i9=function(a,r){var n,e,t,i={};a==null||a.forEach(function(u,l){var c=i[u.v]={i:l,indegree:0,in:[],out:[],vs:[u.v]};u.barycenter!==void 0&&(c.barycenter=u.barycenter,c.weight=u.weight)}),(n=r.edges())===null||n===void 0||n.forEach(function(u){var l=i[u.v],c=i[u.w];l!==void 0&&c!==void 0&&(c.indegree++,l.out.push(i[u.w]))});var s=(t=(e=Object.values(i)).filter)===null||t===void 0?void 0:t.call(e,function(u){return!u.indegree});return a9(s)},a9=function(a){for(var r,n,e=[],t=function(f){return function(d){d.merged||(d.barycenter===void 0||f.barycenter===void 0||d.barycenter>=f.barycenter)&&o9(f,d)}},i=function(f){return function(d){d.in.push(f),--d.indegree==0&&a.push(d)}},s=function(){var f=a.pop();e.push(f),(r=f.in.reverse())===null||r===void 0||r.forEach(function(d){return t(f)(d)}),(n=f.out)===null||n===void 0||n.forEach(function(d){return i(f)(d)})};a==null?void 0:a.length;)s();var u=e.filter(function(c){return!c.merged}),l=["vs","i","barycenter","weight"];return u.map(function(c){var f={};return l==null||l.forEach(function(d){c[d]!==void 0&&(f[d]=c[d])}),f})},o9=function(a,r){var n,e=0,t=0;a.weight&&(e+=a.barycenter*a.weight,t+=a.weight),r.weight&&(e+=r.barycenter*r.weight,t+=r.weight),a.vs=(n=r.vs)===null||n===void 0?void 0:n.concat(a.vs),a.barycenter=e/t,a.weight=t,a.i=Math.min(r.i,a.i),r.merged=!0},s9=i9,u9=function(a,r,n){var e=Do.partition(a,function(d){return d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder)||d.hasOwnProperty("barycenter")}),t=e.lhs,i=e.rhs.sort(function(d,h){return-d.i- -h.i}),s=[],u=0,l=0,c=0;t==null||t.sort(l9(!!r,!!n)),c=x3(s,i,c),t==null||t.forEach(function(d){var h;c+=(h=d.vs)===null||h===void 0?void 0:h.length,s.push(d.vs),u+=d.barycenter*d.weight,l+=d.weight,c=x3(s,i,c)});var f={vs:s.flat()};return l&&(f.barycenter=u/l,f.weight=l),f},x3=function(a,r,n){for(var e=n,t;r.length&&(t=r[r.length-1]).i<=e;)r.pop(),a==null||a.push(t.vs),e++;return e},l9=function(a,r){return function(n,e){if(n.fixorder!==void 0&&e.fixorder!==void 0)return n.fixorder-e.fixorder;if(n.barycenter<e.barycenter)return-1;if(n.barycenter>e.barycenter)return 1;if(r&&n.order!==void 0&&e.order!==void 0){if(n.order<e.order)return-1;if(n.order>e.order)return 1}return a?e.i-n.i:n.i-e.i}},c9=u9,f9=function o(a,r,n,e,t){var i,s,u,l,c=a.children(r),f=a.node(r),d=f?f.borderLeft:void 0,h=f?f.borderRight:void 0,p={};d&&(c=c==null?void 0:c.filter(function(D){return D!==d&&D!==h}));var m=r9(a,c||[]);m==null||m.forEach(function(D){var I;if((I=a.children(D.v))===null||I===void 0?void 0:I.length){var F=o(a,D.v,n,e);p[D.v]=F,F.hasOwnProperty("barycenter")&&h9(D,F)}});var b=s9(m,n);d9(b,p),(i=b.filter(function(D){var I;return!!D.vs||((I=D.vs)===null||I===void 0?void 0:I.length)>0}))===null||i===void 0||i.forEach(function(D){var I=a.node(D.vs[0]);D.fixorder=I.fixorder,D.order=I.order});var E=c9(b,e,t);if(d&&(E.vs=[d,E.vs,h].flat(),(s=a.predecessors(d))===null||s===void 0?void 0:s.length)){var x=a.node(((u=a.predecessors(d))===null||u===void 0?void 0:u[0])||{}),O=a.node(((l=a.predecessors(h))===null||l===void 0?void 0:l[0])||{});E.hasOwnProperty("barycenter")||(E.barycenter=0,E.weight=0),E.barycenter=(E.barycenter*E.weight+x.order+O.order)/(E.weight+2),E.weight+=2}return E},d9=function(a,r){a==null||a.forEach(function(n){var e,t=(e=n.vs)===null||e===void 0?void 0:e.map(function(i){return r[i]?r[i].vs:i});n.vs=t.flat()})},h9=function(a,r){a.barycenter!==void 0?(a.barycenter=(a.barycenter*a.weight+r.barycenter*r.weight)/(a.weight+r.weight),a.weight+=r.weight):(a.barycenter=r.barycenter,a.weight=r.weight)},v9=f9,g9=Ad.Graph,p9=function(a){for(var r=Do.maxRank(a),n=[],e=[],t=1;t<r+1;t++)n.push(t);for(var i=r-1;i>-1;i--)e.push(i);var s=O3(a,n,"inEdges"),u=O3(a,e,"outEdges"),l=E3(a);SM(a,l);for(var c=Number.POSITIVE_INFINITY,f,d=0,h=0;h<4;++d,++h){S3(d%2?s:u,d%4>=2),l=Do.buildLayerMatrix(a);var p=w3(a,l);p<c&&(h=0,f=sM(l),c=p)}l=E3(a),SM(a,l);for(var m=0,b=0;b<4;++m,++b){S3(m%2?s:u,m%4>=2,!0),l=Do.buildLayerMatrix(a);var E=w3(a,l);E<c&&(b=0,f=sM(l),c=E)}SM(a,f)},O3=function(a,r,n){return r.map(function(e){return q7(a,e,n)})},S3=function(a,r,n){var e=new g9;a==null||a.forEach(function(t){for(var i,s=t.graph().root,u=v9(t,s,e,r,n),l=0;l<((i=u.vs)===null||i===void 0?void 0:i.length);l++)t.node(u.vs[l]).order=l;t9(t,e,u.vs)})},SM=function(a,r){r==null||r.forEach(function(n){n==null||n.forEach(function(e,t){a.node(e).order=t})})},m9=p9,y9=Ad.Graph,MM=function(a,r){var n={},e=function(i,s){var u=0,l=0,c=i.length,f=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach(function(d,h){var p,m=b9(a,d),b=m?a.node(m).order:c;(m||d===f)&&((p=s.slice(l,h+1))===null||p===void 0||p.forEach(function(E){var x;(x=a.predecessors(E))===null||x===void 0||x.forEach(function(O){var D=a.node(O),I=D.order;(I<u||b<I)&&!(D.dummy&&a.node(E).dummy)&&TM(n,O,E)})}),l=h+1,u=b)}),s};return(r==null?void 0:r.length)&&r.reduce(e),n},AM=function(a,r){var n={},e=function(s,u,l,c,f){for(var d,h=[],p=u;p<l;p++)h.push(p);h.forEach(function(m){var b;d=s[m],a.node(d).dummy&&((b=a.predecessors(d))===null||b===void 0||b.forEach(function(E){var x=a.node(E);x.dummy&&(x.order<c||x.order>f)&&TM(n,E,d)}))})},t=function(s,u){var l=-1,c,f=0;return u==null||u.forEach(function(d,h){if(a.node(d).dummy==="border"){var p=a.predecessors(d)||[];p.length&&(c=a.node(p[0]).order,e(u,f,h,l,c),f=h,l=c)}e(u,f,u.length,c,s.length)}),u};return(r==null?void 0:r.length)&&r.reduce(t),n},b9=function(a,r){var n;if(a.node(r).dummy)return(n=a.predecessors(r))===null||n===void 0?void 0:n.find(function(e){return a.node(e).dummy})},TM=function(a,r,n){var e=r,t=n;if(e>t){var i=e;e=t,t=i}var s=a[e];s||(a[e]=s={}),s[t]=!0},M3=function(a,r,n){var e=r,t=n;if(e>t){var i=r;e=t,t=i}return a[e]&&a[e].hasOwnProperty(t)},PM=function(a,r,n,e){var t={},i={},s={};return r==null||r.forEach(function(u){u==null||u.forEach(function(l,c){t[l]=l,i[l]=l,s[l]=c})}),r==null||r.forEach(function(u){var l=-1;u==null||u.forEach(function(c){var f=e(c);if(f.length){f=f.sort(function(b,E){return s[b]-s[E]});for(var d=(f.length-1)/2,h=Math.floor(d),p=Math.ceil(d);h<=p;++h){var m=f[h];i[c]===c&&l<s[m]&&!M3(n,c,m)&&(i[m]=c,i[c]=t[c]=t[m],l=s[m])}}})}),{root:t,align:i}},kM=function(a,r,n,e,t){var i,s={},u=C9(a,r,n,t),l=t?"borderLeft":"borderRight",c=function(p,m){for(var b=u.nodes(),E=b.pop(),x={};E;)x[E]?p(E):(x[E]=!0,b.push(E),b=b.concat(m(E))),E=b.pop()},f=function(p){s[p]=(u.inEdges(p)||[]).reduce(function(m,b){return Math.max(m,(s[b.v]||0)+u.edge(b))},0)},d=function(p){var m=(u.outEdges(p)||[]).reduce(function(E,x){return Math.min(E,(s[x.w]||0)-u.edge(x))},Number.POSITIVE_INFINITY),b=a.node(p);m!==Number.POSITIVE_INFINITY&&b.borderType!==l&&(s[p]=Math.max(s[p],m))};return c(f,u.predecessors.bind(u)),c(d,u.successors.bind(u)),(i=Object.values(e))===null||i===void 0||i.forEach(function(h){s[h]=s[n[h]]}),s},C9=function(a,r,n,e){var t=new y9,i=a.graph(),s=w9(i.nodesep,i.edgesep,e);return r==null||r.forEach(function(u){var l;u==null||u.forEach(function(c){var f=n[c];if(t.setNode(f),l){var d=n[l],h=t.edge(d,f);t.setEdge(d,f,Math.max(s(a,c,l),h||0))}l=c})}),t},DM=function(a,r){return Do.minBy(Object.values(r),function(n){var e,t=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return(e=Object.keys(n))===null||e===void 0||e.forEach(function(s){var u=n[s],l=x9(a,s)/2;t=Math.max(u+l,t),i=Math.min(u-l,i)}),t-i})};function IM(o,a){var r=Object.values(a),n=Math.min.apply(Math,r),e=Math.max.apply(Math,r);["u","d"].forEach(function(t){["l","r"].forEach(function(i){var s=t+i,u=o[s],l;if(u!==a){var c=Object.values(u);l=i==="l"?n-Math.min.apply(Math,c):e-Math.max.apply(Math,c),l&&(o[s]={},Object.keys(u).forEach(function(f){o[s][f]=u[f]+l}))}})})}var RM=function(a,r){var n={};return Object.keys(a.ul).forEach(function(e){if(r)n[e]=a[r.toLowerCase()][e];else{var t=Object.values(a).map(function(s){return s[e]}),i=t.sort(function(s,u){return s-u});n[e]=(i[1]+i[2])/2}}),n},E9=function(a){var r=Do.buildLayerMatrix(a),n=Object.assign(MM(a,r),AM(a,r)),e={},t;["u","d"].forEach(function(s){t=s==="u"?r:Object.values(r).reverse(),["l","r"].forEach(function(u){u==="r"&&(t=t.map(function(d){return Object.values(d).reverse()}));var l=(s==="u"?a.predecessors:a.successors).bind(a),c=PM(a,t,n,l),f=kM(a,t,c.root,c.align,u==="r");u==="r"&&(f=Object.values(f).map(function(d){return-d})),e[s+u]=f})});var i=DM(a,e);return IM(e,i),RM(e,a.graph().align)},w9=function(a,r,n){return function(e,t,i){var s=e.node(t),u=e.node(i),l=0,c;if(l+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":c=-s.width/2;break;case"r":c=s.width/2;break}if(c&&(l+=n?c:-c),c=0,l+=(s.dummy?r:a)/2,l+=(u.dummy?r:a)/2,l+=u.width/2,u.hasOwnProperty("labelpos"))switch((u.labelpos||"").toLowerCase()){case"l":c=u.width/2;break;case"r":c=-u.width/2;break}return c&&(l+=n?c:-c),c=0,l}},x9=function(a,r){var n;return((n=a.node(r))===null||n===void 0?void 0:n.width)||0},Mq={positionX:E9,findType1Conflicts:MM,findType2Conflicts:AM,addConflict:TM,hasConflict:M3,verticalAlignment:PM,horizontalCompaction:kM,alignCoordinates:IM,findSmallestWidthAlignment:DM,balance:RM},O9=function(a){var r=Do.buildLayerMatrix(a),n=a.graph().ranksep,e=0;r==null||r.forEach(function(t){var i=t.map(function(u){return a.node(u).height}),s=Math.max.apply(Math,Object(ot.a)(i));t==null||t.forEach(function(u){a.node(u).y=e+s/2}),e+=s+n})},S9=function(a){var r=Do.buildLayerMatrix(a),n=Object.assign(MM(a,r),AM(a,r)),e={},t;["u","d"].forEach(function(s){t=s==="u"?r:Object.values(r).reverse(),["l","r"].forEach(function(u){u==="r"&&(t=t.map(function(d){return Object.values(d).reverse()}));var l=(s==="u"?a.predecessors:a.successors).bind(a),c=PM(a,t,n,l),f=kM(a,t,c.root,c.align,u==="r");u==="r"&&Object.keys(f).forEach(function(d){return f[d]=-f[d]}),e[s+u]=f})});var i=DM(a,e);return i&&IM(e,i),RM(e,a.graph().align)},M9=function(a){var r;a=Do.asNonCompoundGraph(a),O9(a);var n=S9(a);(r=Object.keys(n))===null||r===void 0||r.forEach(function(e){a.node(e).x=n[e]})},A9=M9,T9=function(a,r){for(var n=a.nodes().filter(function(u){var l;return!((l=a.children(u))===null||l===void 0?void 0:l.length)}),e=n.map(function(u){return a.node(u).rank}),t=Math.max.apply(Math,Object(ot.a)(e)),i=[],s=0;s<t+1;s++)i.push([]);r==null||r.forEach(function(u){var l=a.node(u);!l||l.dummy||isNaN(l.rank)||(l.fixorder=i[l.rank].length,i[l.rank].push(u))})},P9=T9,k9=Ad.Graph,D9=function(a,r){var n=r&&r.debugTiming?Do.time:Do.notime;n("layout",function(){r&&!r.keepNodeOrder&&r.prevGraph&&n("  inheritOrder",function(){R9(a,r.prevGraph)});var e=n("  buildLayoutGraph",function(){return G9(a)});r&&r.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",function(){z9(e)});try{n("  runLayout",function(){I9(e,n,r)})}catch(t){if(t.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,t);return}throw t}n("  updateInputGraph",function(){N9(a,e)})})},I9=function(a,r,n){r("    removeSelfEdges",function(){Z9(a)}),r("    acyclic",function(){XD.run(a)}),r("    nestingGraph.run",function(){p3.run(a)}),r("    rank",function(){D7(Do.asNonCompoundGraph(a))}),r("    injectEdgeLabelProxies",function(){U9(a)}),r("    removeEmptyRanks",function(){QD(a)}),r("    nestingGraph.cleanup",function(){p3.cleanup(a)}),r("    normalizeRanks",function(){JD(a)}),r("    assignRankMinMax",function(){V9(a)}),r("    removeEdgeLabelProxies",function(){H9(a)}),r("    normalize.run",function(){n3.run(a)}),r("    parentDummyChains",function(){L7(a)}),r("    addBorderSegments",function(){U7(a)}),n&&n.keepNodeOrder&&r("    initDataOrder",function(){P9(a,n.nodeOrder)}),r("    order",function(){m9(a)}),r("    insertSelfEdges",function(){J9(a)}),r("    adjustCoordinateSystem",function(){C3.adjust(a)}),r("    position",function(){A9(a)}),r("    positionSelfEdges",function(){Q9(a)}),r("    removeBorderNodes",function(){Y9(a)}),r("    normalize.undo",function(){n3.undo(a)}),r("    fixupEdgeLabelCoords",function(){X9(a)}),r("    undoCoordinateSystem",function(){C3.undo(a)}),r("    translateGraph",function(){W9(a)}),r("    assignNodeIntersects",function(){$9(a)}),r("    reversePoints",function(){K9(a)}),r("    acyclic.undo",function(){XD.undo(a)})},R9=function(a,r){var n=r._nodes||{};a.nodes().forEach(function(e){var t=a.node(e);n[e]!==void 0?(t.fixorder=n[e]._order,delete n[e]._order):delete t.fixorder})},N9=function(a,r){a.nodes().forEach(function(n){var e,t=a.node(n),i=r.node(n);t&&(t.x=i.x,t.y=i.y,t._order=i.order,t._rank=i.rank,((e=r.children(n))===null||e===void 0?void 0:e.length)&&(t.width=i.width,t.height=i.height))}),a.edges().forEach(function(n){var e=a.edge(n),t=r.edge(n);e.points=t.points,t.hasOwnProperty("x")&&(e.x=t.x,e.y=t.y)}),a.graph().width=r.graph().width,a.graph().height=r.graph().height},L9=["nodesep","edgesep","ranksep","marginx","marginy"],j9={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},NM=["acyclicer","ranker","rankdir","align"],_9=["width","height","layer","fixorder"],A3={width:0,height:0},F9=["minlen","weight","width","height","labeloffset"],B9={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},LM=["labelpos"],G9=function(a){var r=new k9({multigraph:!0,compound:!0}),n=_M(a.graph()),e={};return NM==null||NM.forEach(function(t){n[t]!==void 0&&(e[t]=n[t])}),r.setGraph(Object.assign({},j9,jM(n,L9),e)),a.nodes().forEach(function(t){var i=_M(a.node(t)),s=jM(i,_9);Object.keys(A3).forEach(function(u){s[u]===void 0&&(s[u]=A3[u])}),r.setNode(t,s),r.setParent(t,a.parent(t))}),a.edges().forEach(function(t){var i=_M(a.edge(t)),s={};LM==null||LM.forEach(function(u){i[u]!==void 0&&(s[u]=i[u])}),r.setEdge(t,Object.assign({},B9,jM(i,F9),s))}),r},z9=function(a){var r=a.graph();r.ranksep||(r.ranksep=0),r.ranksep/=2,a.nodes().forEach(function(n){var e=a.node(n);isNaN(e.layer)||(e.layer?e.layer*=2:e.layer=0)}),a.edges().forEach(function(n){var e,t=a.edge(n);t.minlen*=2,((e=t.labelpos)===null||e===void 0?void 0:e.toLowerCase())!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?t.width+=t.labeloffset:t.height+=t.labeloffset)})},U9=function(a){a.edges().forEach(function(r){var n=a.edge(r);if(n.width&&n.height){var e=a.node(r.v),t=a.node(r.w),i={e:r,rank:(t.rank-e.rank)/2+e.rank};Do.addDummyNode(a,"edge-proxy",i,"_ep")}})},V9=function(a){var r=0;a.nodes().forEach(function(n){var e=a.node(n);e.borderTop&&(e.minRank=a.node(e.borderTop).rank,e.maxRank=a.node(e.borderBottom).rank,r=Math.max(r,e.maxRank||-Infinity))}),a.graph().maxRank=r},H9=function(a){a.nodes().forEach(function(r){var n=a.node(r);n.dummy==="edge-proxy"&&(a.edge(n.e).labelRank=n.rank,a.removeNode(r))})},W9=function(a){var r=Number.POSITIVE_INFINITY,n=0,e=Number.POSITIVE_INFINITY,t=0,i=a.graph(),s=i.marginx||0,u=i.marginy||0,l=function(f){if(!!f){var d=f.x,h=f.y,p=f.width,m=f.height;!isNaN(d)&&!isNaN(p)&&(r=Math.min(r,d-p/2),n=Math.max(n,d+p/2)),!isNaN(h)&&!isNaN(m)&&(e=Math.min(e,h-m/2),t=Math.max(t,h+m/2))}};a.nodes().forEach(function(c){l(a.node(c))}),a.edges().forEach(function(c){var f=a.edge(c);f.hasOwnProperty("x")&&l(f)}),r-=s,e-=u,a.nodes().forEach(function(c){var f=a.node(c);f.x-=r,f.y-=e}),a.edges().forEach(function(c){var f,d=a.edge(c);(f=d.points)===null||f===void 0||f.forEach(function(h){h.x-=r,h.y-=e}),d.hasOwnProperty("x")&&(d.x-=r),d.hasOwnProperty("y")&&(d.y-=e)}),i.width=n-r+s,i.height=t-e+u},$9=function(a){a.edges().forEach(function(r){var n=a.edge(r),e=a.node(r.v),t=a.node(r.w),i,s;n.points?(i=n.points[0],s=n.points[n.points.length-1]):(n.points=[],i=t,s=e),n.points.unshift(Do.intersectRect(e,i)),n.points.push(Do.intersectRect(t,s))})},X9=function(a){a.edges().forEach(function(r){var n=a.edge(r);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},K9=function(a){a.edges().forEach(function(r){var n=a.edge(r);n.reversed&&n.points.reverse()})},Y9=function(a){a.nodes().forEach(function(r){var n,e,t;if((n=a.children(r))===null||n===void 0?void 0:n.length){var i=a.node(r),s=a.node(i.borderTop),u=a.node(i.borderBottom),l=a.node(i.borderLeft[((e=i.borderLeft)===null||e===void 0?void 0:e.length)-1]),c=a.node(i.borderRight[((t=i.borderRight)===null||t===void 0?void 0:t.length)-1]);i.width=Math.abs((c==null?void 0:c.x)-(l==null?void 0:l.x))||10,i.height=Math.abs((u==null?void 0:u.y)-(s==null?void 0:s.y))||10,i.x=((l==null?void 0:l.x)||0)+i.width/2,i.y=((s==null?void 0:s.y)||0)+i.height/2}}),a.nodes().forEach(function(r){a.node(r).dummy==="border"&&a.removeNode(r)})},Z9=function(a){a.edges().forEach(function(r){if(r.v===r.w){var n=a.node(r.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:r,label:a.edge(r)}),a.removeEdge(r)}})},J9=function(a){var r=Do.buildLayerMatrix(a);r==null||r.forEach(function(n){var e=0;n==null||n.forEach(function(t,i){var s,u=a.node(t);u.order=i+e,(s=u.selfEdges)===null||s===void 0||s.forEach(function(l){Do.addDummyNode(a,"selfedge",{width:l.label.width,height:l.label.height,rank:u.rank,order:i+ ++e,e:l.e,label:l.label},"_se")}),delete u.selfEdges})})},Q9=function(a){a.nodes().forEach(function(r){var n=a.node(r);if(n.dummy==="selfedge"){var e=a.node(n.e.v),t=e.x+e.width/2,i=e.y,s=n.x-t,u=e.height/2;a.setEdge(n.e,n.label),a.removeNode(r),n.label.points=[{x:t+2*s/3,y:i-u},{x:t+5*s/6,y:i-u},{y:i,x:t+s},{x:t+5*s/6,y:i+u},{x:t+2*s/3,y:i+u}],n.label.x=n.x,n.label.y=n.y}})},jM=function(a,r){var n={};return r==null||r.forEach(function(e){a[e]!==void 0&&(n[e]=+a[e])}),n},_M=function(a){var r={};return Object.keys(a).forEach(function(n){var e=a[n];r[n.toLowerCase()]=e}),r},q9=D9,FM={graphlib:Ad,layout:q9,util:{time:e3,notime:t3}},T3=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e.edgeLabelSpace=!0,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.layoutNode=function(t){var i=Object(Co.a)(e),s=i.nodes,u=s.find(function(c){return c.id===t});if(u){var l=u.layout!==!1;return l}return!0},e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var e=this,t=this,i=t.nodes,s=t.nodeSize,u=t.rankdir,l=t.combos,c=t.begin;if(!!i){var f=t.edges||[],d=new FM.graphlib.Graph({multigraph:!0,compound:!0}),h;s?js(s)?h=function(){return s}:h=function(){return[s,s]}:h=function(F){return F.size?js(F.size)?F.size:Nf(F.size)?[F.size.width||40,F.size.height||40]:[F.size,F.size]:[40,40]};var p=K2(t.nodesepFunc,t.nodesep,50),m=K2(t.ranksepFunc,t.ranksep,50);(u==="LR"||u==="RL")&&(p=K2(t.ranksepFunc,t.ranksep,50),m=K2(t.nodesepFunc,t.nodesep,50)),d.setDefaultEdgeLabel(function(){return{}}),d.setGraph(t);var b={};i.filter(function(I){return I.layout!==!1}).forEach(function(I){var F=h(I),H=m(I),$=p(I),se=F[0]+2*$,de=F[1]+2*H,Ee=I.layer;gr(Ee)?d.setNode(I.id,{width:se,height:de,layer:Ee}):d.setNode(I.id,{width:se,height:de}),e.sortByCombo&&I.comboId&&(b[I.comboId]||(b[I.comboId]=!0,d.setNode(I.comboId,{})),d.setParent(I.id,I.comboId))}),this.sortByCombo&&l&&l.forEach(function(I){!I.parentId||(b[I.parentId]||(b[I.parentId]=!0,d.setNode(I.parentId,{})),d.setParent(I.id,I.parentId))}),f.forEach(function(I){var F=Qi(I,"source"),H=Qi(I,"target");e.layoutNode(F)&&e.layoutNode(H)&&d.setEdge(F,H,{weight:I.weight||1})});var E=void 0;t.preset&&(E=new FM.graphlib.Graph({multigraph:!0,compound:!0}),t.preset.nodes.forEach(function(I){E==null||E.setNode(I.id,I)})),FM.layout(d,{prevGraph:E,edgeLabelSpace:t.edgeLabelSpace,keepNodeOrder:Boolean(!!t.nodeOrder),nodeOrder:t.nodeOrder});var x=[0,0];if(c){var O=Infinity,D=Infinity;d.nodes().forEach(function(I){var F=d.node(I);O>F.x&&(O=F.x),D>F.y&&(D=F.y)}),d.edges().forEach(function(I){var F=d.edge(I);F.points.forEach(function(H){O>H.x&&(O=H.x),D>H.y&&(D=H.y)})}),x[0]=c[0]-O,x[1]=c[1]-D}return d.nodes().forEach(function(I){var F=d.node(I),H=i.findIndex(function($){return $.id===I});!i[H]||(i[H].x=F.x+x[0],i[H].y=F.y+x[1],i[H]._order=F._order)}),d.edges().forEach(function(I){var F=d.edge(I),H=f.findIndex(function($){var se=Qi($,"source"),de=Qi($,"target");return se===I.v&&de===I.w});t.edgeLabelSpace&&t.controlPoints&&f[H].type!=="loop"&&(f[H].controlPoints=F.points.slice(1,F.points.length-1),f[H].controlPoints.forEach(function($){$.x+=x[0],$.y+=x[1]}))}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:i,edges:f}}}},{key:"getType",value:function(){return"dagre"}}]),r}(qs);function K2(o,a,r){var n;return o?n=o:gr(a)?n=function(){return a}:n=function(){return r},n}var eH=Object.prototype.toString;function wl(o){var a=eH.call(o);return a.endsWith("Array]")&&!a.includes("Big")}function tH(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!wl(o))throw new TypeError("input must be an array");if(o.length===0)throw new TypeError("input must not be empty");var r=a.fromIndex,n=r===void 0?0:r,e=a.toIndex,t=e===void 0?o.length:e;if(n<0||n>=o.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(t<=n||t>o.length||!Number.isInteger(t))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var i=o[n],s=n+1;s<t;s++)o[s]>i&&(i=o[s]);return i}function nH(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!wl(o))throw new TypeError("input must be an array");if(o.length===0)throw new TypeError("input must not be empty");var r=a.fromIndex,n=r===void 0?0:r,e=a.toIndex,t=e===void 0?o.length:e;if(n<0||n>=o.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(t<=n||t>o.length||!Number.isInteger(t))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var i=o[n],s=n+1;s<t;s++)o[s]<i&&(i=o[s]);return i}function P3(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(wl(o)){if(o.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var r;if(a.output!==void 0){if(!wl(a.output))throw new TypeError("output option must be an array if specified");r=a.output}else r=new Array(o.length);var n=nH(o),e=tH(o);if(n===e)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var t=a.min,i=t===void 0?a.autoMinMax?n:0:t,s=a.max,u=s===void 0?a.autoMinMax?e:1:s;if(i>=u)throw new RangeError("min option must be smaller than max option");for(var l=(u-i)/(e-n),c=0;c<o.length;c++)r[c]=(o[c]-n)*l+i;return r}var Y2=" ".repeat(2),k3=" ".repeat(4);function rH(){return D3(this)}function D3(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=a.maxRows,n=r===void 0?15:r,e=a.maxColumns,t=e===void 0?10:e,i=a.maxNumSize,s=i===void 0?8:i,u=a.padMinus,l=u===void 0?"auto":u;return"".concat(o.constructor.name,` {
`).concat(Y2,`[
`).concat(k3).concat(iH(o,n,t,s,l),`
`).concat(Y2,`]
`).concat(Y2,"rows: ").concat(o.rows,`
`).concat(Y2,"columns: ").concat(o.columns,`
}`)}function iH(o,a,r,n,e){var t=o.rows,i=o.columns,s=Math.min(t,a),u=Math.min(i,r),l=[];if(e==="auto"){e=!1;e:for(var c=0;c<s;c++)for(var f=0;f<u;f++)if(o.get(c,f)<0){e=!0;break e}}for(var d=0;d<s;d++){for(var h=[],p=0;p<u;p++)h.push(aH(o.get(d,p),n,e));l.push("".concat(h.join(" ")))}return u!==i&&(l[l.length-1]+=" ... ".concat(i-r," more columns")),s!==t&&l.push("... ".concat(t-a," more rows")),l.join(`
`.concat(k3))}function aH(o,a,r){return(o>=0&&r?" ".concat(I3(o,a-1)):I3(o,a)).padEnd(a)}function I3(o,a){var r=o.toString();if(r.length<=a)return r;var n=o.toFixed(a);if(n.length>a&&(n=o.toFixed(Math.max(0,a-(n.length-a)))),n.length<=a&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;var e=o.toExponential(a);return e.length>a&&(e=o.toExponential(Math.max(0,a-(e.length-a)))),e.slice(0)}function oH(o,a){o.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},o.prototype.addS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n);return this},o.prototype.addM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n.get(e,t));return this},o.add=function(n,e){var t=new a(n);return t.add(e)},o.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},o.prototype.subS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n);return this},o.prototype.subM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n.get(e,t));return this},o.sub=function(n,e){var t=new a(n);return t.sub(e)},o.prototype.subtract=o.prototype.sub,o.prototype.subtractS=o.prototype.subS,o.prototype.subtractM=o.prototype.subM,o.subtract=o.sub,o.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},o.prototype.mulS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n);return this},o.prototype.mulM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n.get(e,t));return this},o.mul=function(n,e){var t=new a(n);return t.mul(e)},o.prototype.multiply=o.prototype.mul,o.prototype.multiplyS=o.prototype.mulS,o.prototype.multiplyM=o.prototype.mulM,o.multiply=o.mul,o.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},o.prototype.divS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n);return this},o.prototype.divM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n.get(e,t));return this},o.div=function(n,e){var t=new a(n);return t.div(e)},o.prototype.divide=o.prototype.div,o.prototype.divideS=o.prototype.divS,o.prototype.divideM=o.prototype.divM,o.divide=o.div,o.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},o.prototype.modS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%n);return this},o.prototype.modM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%n.get(e,t));return this},o.mod=function(n,e){var t=new a(n);return t.mod(e)},o.prototype.modulus=o.prototype.mod,o.prototype.modulusS=o.prototype.modS,o.prototype.modulusM=o.prototype.modM,o.modulus=o.mod,o.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},o.prototype.andS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&n);return this},o.prototype.andM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&n.get(e,t));return this},o.and=function(n,e){var t=new a(n);return t.and(e)},o.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},o.prototype.orS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|n);return this},o.prototype.orM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|n.get(e,t));return this},o.or=function(n,e){var t=new a(n);return t.or(e)},o.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},o.prototype.xorS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^n);return this},o.prototype.xorM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^n.get(e,t));return this},o.xor=function(n,e){var t=new a(n);return t.xor(e)},o.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},o.prototype.leftShiftS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<n);return this},o.prototype.leftShiftM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<n.get(e,t));return this},o.leftShift=function(n,e){var t=new a(n);return t.leftShift(e)},o.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},o.prototype.signPropagatingRightShiftS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>n);return this},o.prototype.signPropagatingRightShiftM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>n.get(e,t));return this},o.signPropagatingRightShift=function(n,e){var t=new a(n);return t.signPropagatingRightShift(e)},o.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},o.prototype.rightShiftS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>n);return this},o.prototype.rightShiftM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>n.get(e,t));return this},o.rightShift=function(n,e){var t=new a(n);return t.rightShift(e)},o.prototype.zeroFillRightShift=o.prototype.rightShift,o.prototype.zeroFillRightShiftS=o.prototype.rightShiftS,o.prototype.zeroFillRightShiftM=o.prototype.rightShiftM,o.zeroFillRightShift=o.rightShift,o.prototype.not=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,~this.get(n,e));return this},o.not=function(n){var e=new a(n);return e.not()},o.prototype.abs=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.abs(this.get(n,e)));return this},o.abs=function(n){var e=new a(n);return e.abs()},o.prototype.acos=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.acos(this.get(n,e)));return this},o.acos=function(n){var e=new a(n);return e.acos()},o.prototype.acosh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.acosh(this.get(n,e)));return this},o.acosh=function(n){var e=new a(n);return e.acosh()},o.prototype.asin=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.asin(this.get(n,e)));return this},o.asin=function(n){var e=new a(n);return e.asin()},o.prototype.asinh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.asinh(this.get(n,e)));return this},o.asinh=function(n){var e=new a(n);return e.asinh()},o.prototype.atan=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.atan(this.get(n,e)));return this},o.atan=function(n){var e=new a(n);return e.atan()},o.prototype.atanh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.atanh(this.get(n,e)));return this},o.atanh=function(n){var e=new a(n);return e.atanh()},o.prototype.cbrt=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.cbrt(this.get(n,e)));return this},o.cbrt=function(n){var e=new a(n);return e.cbrt()},o.prototype.ceil=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.ceil(this.get(n,e)));return this},o.ceil=function(n){var e=new a(n);return e.ceil()},o.prototype.clz32=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.clz32(this.get(n,e)));return this},o.clz32=function(n){var e=new a(n);return e.clz32()},o.prototype.cos=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.cos(this.get(n,e)));return this},o.cos=function(n){var e=new a(n);return e.cos()},o.prototype.cosh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.cosh(this.get(n,e)));return this},o.cosh=function(n){var e=new a(n);return e.cosh()},o.prototype.exp=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.exp(this.get(n,e)));return this},o.exp=function(n){var e=new a(n);return e.exp()},o.prototype.expm1=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.expm1(this.get(n,e)));return this},o.expm1=function(n){var e=new a(n);return e.expm1()},o.prototype.floor=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.floor(this.get(n,e)));return this},o.floor=function(n){var e=new a(n);return e.floor()},o.prototype.fround=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.fround(this.get(n,e)));return this},o.fround=function(n){var e=new a(n);return e.fround()},o.prototype.log=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log(this.get(n,e)));return this},o.log=function(n){var e=new a(n);return e.log()},o.prototype.log1p=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log1p(this.get(n,e)));return this},o.log1p=function(n){var e=new a(n);return e.log1p()},o.prototype.log10=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log10(this.get(n,e)));return this},o.log10=function(n){var e=new a(n);return e.log10()},o.prototype.log2=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log2(this.get(n,e)));return this},o.log2=function(n){var e=new a(n);return e.log2()},o.prototype.round=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.round(this.get(n,e)));return this},o.round=function(n){var e=new a(n);return e.round()},o.prototype.sign=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sign(this.get(n,e)));return this},o.sign=function(n){var e=new a(n);return e.sign()},o.prototype.sin=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sin(this.get(n,e)));return this},o.sin=function(n){var e=new a(n);return e.sin()},o.prototype.sinh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sinh(this.get(n,e)));return this},o.sinh=function(n){var e=new a(n);return e.sinh()},o.prototype.sqrt=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sqrt(this.get(n,e)));return this},o.sqrt=function(n){var e=new a(n);return e.sqrt()},o.prototype.tan=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.tan(this.get(n,e)));return this},o.tan=function(n){var e=new a(n);return e.tan()},o.prototype.tanh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.tanh(this.get(n,e)));return this},o.tanh=function(n){var e=new a(n);return e.tanh()},o.prototype.trunc=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.trunc(this.get(n,e)));return this},o.trunc=function(n){var e=new a(n);return e.trunc()},o.pow=function(n,e){var t=new a(n);return t.pow(e)},o.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},o.prototype.powS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),n));return this},o.prototype.powM=function(n){if(n=a.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),n.get(e,t)));return this}}function Vc(o,a,r){var n=r?o.rows:o.rows-1;if(a<0||a>n)throw new RangeError("Row index out of range")}function Hc(o,a,r){var n=r?o.columns:o.columns-1;if(a<0||a>n)throw new RangeError("Column index out of range")}function gp(o,a){if(a.to1DArray&&(a=a.to1DArray()),a.length!==o.columns)throw new RangeError("vector size must be the same as the number of columns");return a}function pp(o,a){if(a.to1DArray&&(a=a.to1DArray()),a.length!==o.rows)throw new RangeError("vector size must be the same as the number of rows");return a}function sH(o,a){if(!wl(a))throw new TypeError("row indices must be an array");for(var r=0;r<a.length;r++)if(a[r]<0||a[r]>=o.rows)throw new RangeError("row indices are out of range")}function uH(o,a){if(!wl(a))throw new TypeError("column indices must be an array");for(var r=0;r<a.length;r++)if(a[r]<0||a[r]>=o.columns)throw new RangeError("column indices are out of range")}function R3(o,a,r,n,e){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(J2("startRow",a),J2("endRow",r),J2("startColumn",n),J2("endColumn",e),a>r||n>e||a<0||a>=o.rows||r<0||r>=o.rows||n<0||n>=o.columns||e<0||e>=o.columns)throw new RangeError("Submatrix indices are out of range")}function Z2(o){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],n=0;n<o;n++)r.push(a);return r}function J2(o,a){if(typeof a!="number")throw new TypeError("".concat(o," must be a number"))}function mp(o){if(o.isEmpty())throw new Error("Empty matrix has no elements to index")}function lH(o){for(var a=Z2(o.rows),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)a[r]+=o.get(r,n);return a}function cH(o){for(var a=Z2(o.columns),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)a[n]+=o.get(r,n);return a}function fH(o){for(var a=0,r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)a+=o.get(r,n);return a}function dH(o){for(var a=Z2(o.rows,1),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)a[r]*=o.get(r,n);return a}function hH(o){for(var a=Z2(o.columns,1),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)a[n]*=o.get(r,n);return a}function vH(o){for(var a=1,r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)a*=o.get(r,n);return a}function gH(o,a,r){for(var n=o.rows,e=o.columns,t=[],i=0;i<n;i++){for(var s=0,u=0,l=0,c=0;c<e;c++)l=o.get(i,c)-r[i],s+=l,u+=l*l;a?t.push((u-s*s/e)/(e-1)):t.push((u-s*s/e)/e)}return t}function pH(o,a,r){for(var n=o.rows,e=o.columns,t=[],i=0;i<e;i++){for(var s=0,u=0,l=0,c=0;c<n;c++)l=o.get(c,i)-r[i],s+=l,u+=l*l;a?t.push((u-s*s/n)/(n-1)):t.push((u-s*s/n)/n)}return t}function mH(o,a,r){for(var n=o.rows,e=o.columns,t=n*e,i=0,s=0,u=0,l=0;l<n;l++)for(var c=0;c<e;c++)u=o.get(l,c)-r,i+=u,s+=u*u;return a?(s-i*i/t)/(t-1):(s-i*i/t)/t}function yH(o,a){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)-a[r])}function bH(o,a){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)-a[n])}function CH(o,a){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)-a)}function EH(o){for(var a=[],r=0;r<o.rows;r++){for(var n=0,e=0;e<o.columns;e++)n+=Math.pow(o.get(r,e),2)/(o.columns-1);a.push(Math.sqrt(n))}return a}function wH(o,a){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)/a[r])}function xH(o){for(var a=[],r=0;r<o.columns;r++){for(var n=0,e=0;e<o.rows;e++)n+=Math.pow(o.get(e,r),2)/(o.rows-1);a.push(Math.sqrt(n))}return a}function OH(o,a){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)/a[n])}function SH(o){for(var a=o.size-1,r=0,n=0;n<o.columns;n++)for(var e=0;e<o.rows;e++)r+=Math.pow(o.get(e,n),2)/a;return Math.sqrt(r)}function MH(o,a){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)/a)}var ds=function(){function o(){Object(Ie.a)(this,o)}return Object(pe.a)(o,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(r){if(typeof r!="function")throw new TypeError("callback must be a function");for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.call(this,n,e);return this}},{key:"to1DArray",value:function(){for(var r=[],n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.push(this.get(n,e));return r}},{key:"to2DArray",value:function(){for(var r=[],n=0;n<this.rows;n++){r.push([]);for(var e=0;e<this.columns;e++)r[n].push(this.get(n,e))}return r}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var r=0;r<this.rows;r++)for(var n=0;n<=r;n++)if(this.get(r,n)!==this.get(n,r))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var r=0,n=0,e=-1,t=!0,i=!1;r<this.rows&&t;){for(n=0,i=!1;n<this.columns&&i===!1;)this.get(r,n)===0?n++:this.get(r,n)===1&&n>e?(i=!0,e=n):(t=!1,i=!0);r++}return t}},{key:"isReducedEchelonForm",value:function(){for(var r=0,n=0,e=-1,t=!0,i=!1;r<this.rows&&t;){for(n=0,i=!1;n<this.columns&&i===!1;)this.get(r,n)===0?n++:this.get(r,n)===1&&n>e?(i=!0,e=n):(t=!1,i=!0);for(var s=n+1;s<this.rows;s++)this.get(r,s)!==0&&(t=!1);r++}return t}},{key:"echelonForm",value:function(){for(var r=this.clone(),n=0,e=0;n<r.rows&&e<r.columns;){for(var t=n,i=n;i<r.rows;i++)r.get(i,e)>r.get(t,e)&&(t=i);if(r.get(t,e)===0)e++;else{r.swapRows(n,t);for(var s=r.get(n,e),u=e;u<r.columns;u++)r.set(n,u,r.get(n,u)/s);for(var l=n+1;l<r.rows;l++){var c=r.get(l,e)/r.get(n,e);r.set(l,e,0);for(var f=e+1;f<r.columns;f++)r.set(l,f,r.get(l,f)-r.get(n,f)*c)}n++,e++}}return r}},{key:"reducedEchelonForm",value:function(){for(var r=this.echelonForm(),n=r.columns,e=r.rows,t=e-1;t>=0;)if(r.maxRow(t)===0)t--;else{for(var i=0,s=!1;i<e&&s===!1;)r.get(t,i)===1?s=!0:i++;for(var u=0;u<t;u++)for(var l=r.get(u,i),c=i;c<n;c++){var f=r.get(u,c)-l*r.get(t,c);r.set(u,c,f)}t--}return r}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="object")throw new TypeError("options must be an object");var n=r.rows,e=n===void 0?1:n,t=r.columns,i=t===void 0?1:t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");for(var s=new hi(this.rows*e,this.columns*i),u=0;u<e;u++)for(var l=0;l<i;l++)s.setSubMatrix(this,this.rows*u,this.columns*l);return s}},{key:"fill",value:function(r){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,r);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(r){Vc(this,r);for(var n=[],e=0;e<this.columns;e++)n.push(this.get(r,e));return n}},{key:"getRowVector",value:function(r){return hi.rowVector(this.getRow(r))}},{key:"setRow",value:function(r,n){Vc(this,r),n=gp(this,n);for(var e=0;e<this.columns;e++)this.set(r,e,n[e]);return this}},{key:"swapRows",value:function(r,n){Vc(this,r),Vc(this,n);for(var e=0;e<this.columns;e++){var t=this.get(r,e);this.set(r,e,this.get(n,e)),this.set(n,e,t)}return this}},{key:"getColumn",value:function(r){Hc(this,r);for(var n=[],e=0;e<this.rows;e++)n.push(this.get(e,r));return n}},{key:"getColumnVector",value:function(r){return hi.columnVector(this.getColumn(r))}},{key:"setColumn",value:function(r,n){Hc(this,r),n=pp(this,n);for(var e=0;e<this.rows;e++)this.set(e,r,n[e]);return this}},{key:"swapColumns",value:function(r,n){Hc(this,r),Hc(this,n);for(var e=0;e<this.rows;e++){var t=this.get(e,r);this.set(e,r,this.get(e,n)),this.set(e,n,t)}return this}},{key:"addRowVector",value:function(r){r=gp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)+r[e]);return this}},{key:"subRowVector",value:function(r){r=gp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)-r[e]);return this}},{key:"mulRowVector",value:function(r){r=gp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)*r[e]);return this}},{key:"divRowVector",value:function(r){r=gp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)/r[e]);return this}},{key:"addColumnVector",value:function(r){r=pp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)+r[n]);return this}},{key:"subColumnVector",value:function(r){r=pp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)-r[n]);return this}},{key:"mulColumnVector",value:function(r){r=pp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)*r[n]);return this}},{key:"divColumnVector",value:function(r){r=pp(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)/r[n]);return this}},{key:"mulRow",value:function(r,n){Vc(this,r);for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*n);return this}},{key:"mulColumn",value:function(r,n){Hc(this,r);for(var e=0;e<this.rows;e++)this.set(e,r,this.get(e,r)*n);return this}},{key:"max",value:function(r){if(this.isEmpty())return NaN;switch(r){case"row":{for(var n=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)>n[e]&&(n[e]=this.get(e,t));return n}case"column":{for(var i=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),s=0;s<this.rows;s++)for(var u=0;u<this.columns;u++)this.get(s,u)>i[u]&&(i[u]=this.get(s,u));return i}case void 0:{for(var l=this.get(0,0),c=0;c<this.rows;c++)for(var f=0;f<this.columns;f++)this.get(c,f)>l&&(l=this.get(c,f));return l}default:throw new Error("invalid option: ".concat(r))}}},{key:"maxIndex",value:function(){mp(this);for(var r=this.get(0,0),n=[0,0],e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)>r&&(r=this.get(e,t),n[0]=e,n[1]=t);return n}},{key:"min",value:function(r){if(this.isEmpty())return NaN;switch(r){case"row":{for(var n=new Array(this.rows).fill(Number.POSITIVE_INFINITY),e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)<n[e]&&(n[e]=this.get(e,t));return n}case"column":{for(var i=new Array(this.columns).fill(Number.POSITIVE_INFINITY),s=0;s<this.rows;s++)for(var u=0;u<this.columns;u++)this.get(s,u)<i[u]&&(i[u]=this.get(s,u));return i}case void 0:{for(var l=this.get(0,0),c=0;c<this.rows;c++)for(var f=0;f<this.columns;f++)this.get(c,f)<l&&(l=this.get(c,f));return l}default:throw new Error("invalid option: ".concat(r))}}},{key:"minIndex",value:function(){mp(this);for(var r=this.get(0,0),n=[0,0],e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)<r&&(r=this.get(e,t),n[0]=e,n[1]=t);return n}},{key:"maxRow",value:function(r){if(Vc(this,r),this.isEmpty())return NaN;for(var n=this.get(r,0),e=1;e<this.columns;e++)this.get(r,e)>n&&(n=this.get(r,e));return n}},{key:"maxRowIndex",value:function(r){Vc(this,r),mp(this);for(var n=this.get(r,0),e=[r,0],t=1;t<this.columns;t++)this.get(r,t)>n&&(n=this.get(r,t),e[1]=t);return e}},{key:"minRow",value:function(r){if(Vc(this,r),this.isEmpty())return NaN;for(var n=this.get(r,0),e=1;e<this.columns;e++)this.get(r,e)<n&&(n=this.get(r,e));return n}},{key:"minRowIndex",value:function(r){Vc(this,r),mp(this);for(var n=this.get(r,0),e=[r,0],t=1;t<this.columns;t++)this.get(r,t)<n&&(n=this.get(r,t),e[1]=t);return e}},{key:"maxColumn",value:function(r){if(Hc(this,r),this.isEmpty())return NaN;for(var n=this.get(0,r),e=1;e<this.rows;e++)this.get(e,r)>n&&(n=this.get(e,r));return n}},{key:"maxColumnIndex",value:function(r){Hc(this,r),mp(this);for(var n=this.get(0,r),e=[0,r],t=1;t<this.rows;t++)this.get(t,r)>n&&(n=this.get(t,r),e[0]=t);return e}},{key:"minColumn",value:function(r){if(Hc(this,r),this.isEmpty())return NaN;for(var n=this.get(0,r),e=1;e<this.rows;e++)this.get(e,r)<n&&(n=this.get(e,r));return n}},{key:"minColumnIndex",value:function(r){Hc(this,r),mp(this);for(var n=this.get(0,r),e=[0,r],t=1;t<this.rows;t++)this.get(t,r)<n&&(n=this.get(t,r),e[0]=t);return e}},{key:"diag",value:function(){for(var r=Math.min(this.rows,this.columns),n=[],e=0;e<r;e++)n.push(this.get(e,e));return n}},{key:"norm",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",n=0;if(r==="max")return this.max();if(r==="frobenius"){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)n=n+this.get(e,t)*this.get(e,t);return Math.sqrt(n)}else throw new RangeError("unknown norm type: ".concat(r))}},{key:"cumulativeSum",value:function(){for(var r=0,n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r+=this.get(n,e),this.set(n,e,r);return this}},{key:"dot",value:function(r){o.isMatrix(r)&&(r=r.to1DArray());var n=this.to1DArray();if(n.length!==r.length)throw new RangeError("vectors do not have the same size");for(var e=0,t=0;t<n.length;t++)e+=n[t]*r[t];return e}},{key:"mmul",value:function(r){r=hi.checkMatrix(r);for(var n=this.rows,e=this.columns,t=r.columns,i=new hi(n,t),s=new Float64Array(e),u=0;u<t;u++){for(var l=0;l<e;l++)s[l]=r.get(l,u);for(var c=0;c<n;c++){for(var f=0,d=0;d<e;d++)f+=this.get(c,d)*s[d];i.set(c,u,f)}}return i}},{key:"strassen2x2",value:function(r){r=hi.checkMatrix(r);var n=new hi(2,2),e=this.get(0,0),t=r.get(0,0),i=this.get(0,1),s=r.get(0,1),u=this.get(1,0),l=r.get(1,0),c=this.get(1,1),f=r.get(1,1),d=(e+c)*(t+f),h=(u+c)*t,p=e*(s-f),m=c*(l-t),b=(e+i)*f,E=(u-e)*(t+s),x=(i-c)*(l+f),O=d+m-b+x,D=p+b,I=h+m,F=d-h+p+E;return n.set(0,0,O),n.set(0,1,D),n.set(1,0,I),n.set(1,1,F),n}},{key:"strassen3x3",value:function(r){r=hi.checkMatrix(r);var n=new hi(3,3),e=this.get(0,0),t=this.get(0,1),i=this.get(0,2),s=this.get(1,0),u=this.get(1,1),l=this.get(1,2),c=this.get(2,0),f=this.get(2,1),d=this.get(2,2),h=r.get(0,0),p=r.get(0,1),m=r.get(0,2),b=r.get(1,0),E=r.get(1,1),x=r.get(1,2),O=r.get(2,0),D=r.get(2,1),I=r.get(2,2),F=(e+t+i-s-u-f-d)*E,H=(e-s)*(-p+E),$=u*(-h+p+b-E-x-O+I),se=(-e+s+u)*(h-p+E),de=(s+u)*(-h+p),Ee=e*h,Oe=(-e+c+f)*(h-m+x),$e=(-e+c)*(m-x),tt=(c+f)*(-h+m),Le=(e+t+i-u-l-c-f)*x,it=f*(-h+m+b-E-x-O+D),It=(-i+f+d)*(E+O-D),tn=(i-d)*(E-D),bn=i*O,dn=(f+d)*(-O+D),en=(-i+u+l)*(x+O-I),Vn=(i-l)*(x-I),jt=(u+l)*(-O+I),Cn=t*b,jn=l*D,Lr=s*m,Pr=c*p,Wr=d*I,Jr=Ee+bn+Cn,Ta=F+se+de+Ee+It+bn+dn,fo=Ee+Oe+tt+Le+bn+en+jt,_i=H+$+se+Ee+bn+en+Vn,Pu=H+se+de+Ee+jn,Kc=bn+en+Vn+jt+Lr,Bp=Ee+Oe+$e+it+It+tn+bn,ng=It+tn+bn+dn+Pr,Gp=Ee+Oe+$e+tt+Wr;return n.set(0,0,Jr),n.set(0,1,Ta),n.set(0,2,fo),n.set(1,0,_i),n.set(1,1,Pu),n.set(1,2,Kc),n.set(2,0,Bp),n.set(2,1,ng),n.set(2,2,Gp),n}},{key:"mmulStrassen",value:function(r){r=hi.checkMatrix(r);var n=this.clone(),e=n.rows,t=n.columns,i=r.rows,s=r.columns;t!==i&&console.warn("Multiplying ".concat(e," x ").concat(t," and ").concat(i," x ").concat(s," matrix: dimensions do not match."));function u(d,h,p){var m=d.rows,b=d.columns;if(m===h&&b===p)return d;var E=o.zeros(h,p);return E=E.setSubMatrix(d,0,0),E}var l=Math.max(e,i),c=Math.max(t,s);n=u(n,l,c),r=u(r,l,c);function f(d,h,p,m){if(p<=512||m<=512)return d.mmul(h);p%2==1&&m%2==1?(d=u(d,p+1,m+1),h=u(h,p+1,m+1)):p%2==1?(d=u(d,p+1,m),h=u(h,p+1,m)):m%2==1&&(d=u(d,p,m+1),h=u(h,p,m+1));var b=parseInt(d.rows/2,10),E=parseInt(d.columns/2,10),x=d.subMatrix(0,b-1,0,E-1),O=h.subMatrix(0,b-1,0,E-1),D=d.subMatrix(0,b-1,E,d.columns-1),I=h.subMatrix(0,b-1,E,h.columns-1),F=d.subMatrix(b,d.rows-1,0,E-1),H=h.subMatrix(b,h.rows-1,0,E-1),$=d.subMatrix(b,d.rows-1,E,d.columns-1),se=h.subMatrix(b,h.rows-1,E,h.columns-1),de=f(o.add(x,$),o.add(O,se),b,E),Ee=f(o.add(F,$),O,b,E),Oe=f(x,o.sub(I,se),b,E),$e=f($,o.sub(H,O),b,E),tt=f(o.add(x,D),se,b,E),Le=f(o.sub(F,x),o.add(O,I),b,E),it=f(o.sub(D,$),o.add(H,se),b,E),It=o.add(de,$e);It.sub(tt),It.add(it);var tn=o.add(Oe,tt),bn=o.add(Ee,$e),dn=o.sub(de,Ee);dn.add(Oe),dn.add(Le);var en=o.zeros(2*It.rows,2*It.columns);return en=en.setSubMatrix(It,0,0),en=en.setSubMatrix(tn,It.rows,0),en=en.setSubMatrix(bn,0,It.columns),en=en.setSubMatrix(dn,It.rows,It.columns),en.subMatrix(0,p-1,0,m-1)}return f(n,r,l,c)}},{key:"scaleRows",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="object")throw new TypeError("options must be an object");var n=r.min,e=n===void 0?0:n,t=r.max,i=t===void 0?1:t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(e>=i)throw new RangeError("min must be smaller than max");for(var s=new hi(this.rows,this.columns),u=0;u<this.rows;u++){var l=this.getRow(u);l.length>0&&P3(l,{min:e,max:i,output:l}),s.setRow(u,l)}return s}},{key:"scaleColumns",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="object")throw new TypeError("options must be an object");var n=r.min,e=n===void 0?0:n,t=r.max,i=t===void 0?1:t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(e>=i)throw new RangeError("min must be smaller than max");for(var s=new hi(this.rows,this.columns),u=0;u<this.columns;u++){var l=this.getColumn(u);l.length&&P3(l,{min:e,max:i,output:l}),s.setColumn(u,l)}return s}},{key:"flipRows",value:function(){for(var r=Math.ceil(this.columns/2),n=0;n<this.rows;n++)for(var e=0;e<r;e++){var t=this.get(n,e),i=this.get(n,this.columns-1-e);this.set(n,e,i),this.set(n,this.columns-1-e,t)}return this}},{key:"flipColumns",value:function(){for(var r=Math.ceil(this.rows/2),n=0;n<this.columns;n++)for(var e=0;e<r;e++){var t=this.get(e,n),i=this.get(this.rows-1-e,n);this.set(e,n,i),this.set(this.rows-1-e,n,t)}return this}},{key:"kroneckerProduct",value:function(r){r=hi.checkMatrix(r);for(var n=this.rows,e=this.columns,t=r.rows,i=r.columns,s=new hi(n*t,e*i),u=0;u<n;u++)for(var l=0;l<e;l++)for(var c=0;c<t;c++)for(var f=0;f<i;f++)s.set(t*u+c,i*l+f,this.get(u,l)*r.get(c,f));return s}},{key:"kroneckerSum",value:function(r){if(r=hi.checkMatrix(r),!this.isSquare()||!r.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var n=this.rows,e=r.rows,t=this.kroneckerProduct(hi.eye(e,e)),i=hi.eye(n,n).kroneckerProduct(r);return t.add(i)}},{key:"transpose",value:function(){for(var r=new hi(this.columns,this.rows),n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.set(e,n,this.get(n,e));return r}},{key:"sortRows",value:function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N3,n=0;n<this.rows;n++)this.setRow(n,this.getRow(n).sort(r));return this}},{key:"sortColumns",value:function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N3,n=0;n<this.columns;n++)this.setColumn(n,this.getColumn(n).sort(r));return this}},{key:"subMatrix",value:function(r,n,e,t){R3(this,r,n,e,t);for(var i=new hi(n-r+1,t-e+1),s=r;s<=n;s++)for(var u=e;u<=t;u++)i.set(s-r,u-e,this.get(s,u));return i}},{key:"subMatrixRow",value:function(r,n,e){if(n===void 0&&(n=0),e===void 0&&(e=this.columns-1),n>e||n<0||n>=this.columns||e<0||e>=this.columns)throw new RangeError("Argument out of range");for(var t=new hi(r.length,e-n+1),i=0;i<r.length;i++)for(var s=n;s<=e;s++){if(r[i]<0||r[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(r[i]));t.set(i,s-n,this.get(r[i],s))}return t}},{key:"subMatrixColumn",value:function(r,n,e){if(n===void 0&&(n=0),e===void 0&&(e=this.rows-1),n>e||n<0||n>=this.rows||e<0||e>=this.rows)throw new RangeError("Argument out of range");for(var t=new hi(e-n+1,r.length),i=0;i<r.length;i++)for(var s=n;s<=e;s++){if(r[i]<0||r[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(r[i]));t.set(s-n,i,this.get(s,r[i]))}return t}},{key:"setSubMatrix",value:function(r,n,e){if(r=hi.checkMatrix(r),r.isEmpty())return this;var t=n+r.rows-1,i=e+r.columns-1;R3(this,n,t,e,i);for(var s=0;s<r.rows;s++)for(var u=0;u<r.columns;u++)this.set(n+s,e+u,r.get(s,u));return this}},{key:"selection",value:function(r,n){sH(this,r),uH(this,n);for(var e=new hi(r.length,n.length),t=0;t<r.length;t++)for(var i=r[t],s=0;s<n.length;s++){var u=n[s];e.set(t,s,this.get(i,u))}return e}},{key:"trace",value:function(){for(var r=Math.min(this.rows,this.columns),n=0,e=0;e<r;e++)n+=this.get(e,e);return n}},{key:"clone",value:function(){for(var r=new hi(this.rows,this.columns),n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.set(n,e,this.get(n,e));return r}},{key:"sum",value:function(r){switch(r){case"row":return lH(this);case"column":return cH(this);case void 0:return fH(this);default:throw new Error("invalid option: ".concat(r))}}},{key:"product",value:function(r){switch(r){case"row":return dH(this);case"column":return hH(this);case void 0:return vH(this);default:throw new Error("invalid option: ".concat(r))}}},{key:"mean",value:function(r){var n=this.sum(r);switch(r){case"row":{for(var e=0;e<this.rows;e++)n[e]/=this.columns;return n}case"column":{for(var t=0;t<this.columns;t++)n[t]/=this.rows;return n}case void 0:return n/this.size;default:throw new Error("invalid option: ".concat(r))}}},{key:"variance",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="object"&&(n=r,r=void 0),typeof n!="object")throw new TypeError("options must be an object");var e=n,t=e.unbiased,i=t===void 0?!0:t,s=e.mean,u=s===void 0?this.mean(r):s;if(typeof i!="boolean")throw new TypeError("unbiased must be a boolean");switch(r){case"row":{if(!wl(u))throw new TypeError("mean must be an array");return gH(this,i,u)}case"column":{if(!wl(u))throw new TypeError("mean must be an array");return pH(this,i,u)}case void 0:{if(typeof u!="number")throw new TypeError("mean must be a number");return mH(this,i,u)}default:throw new Error("invalid option: ".concat(r))}}},{key:"standardDeviation",value:function(r,n){typeof r=="object"&&(n=r,r=void 0);var e=this.variance(r,n);if(r===void 0)return Math.sqrt(e);for(var t=0;t<e.length;t++)e[t]=Math.sqrt(e[t]);return e}},{key:"center",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="object"&&(n=r,r=void 0),typeof n!="object")throw new TypeError("options must be an object");var e=n,t=e.center,i=t===void 0?this.mean(r):t;switch(r){case"row":{if(!wl(i))throw new TypeError("center must be an array");return yH(this,i),this}case"column":{if(!wl(i))throw new TypeError("center must be an array");return bH(this,i),this}case void 0:{if(typeof i!="number")throw new TypeError("center must be a number");return CH(this,i),this}default:throw new Error("invalid option: ".concat(r))}}},{key:"scale",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="object"&&(n=r,r=void 0),typeof n!="object")throw new TypeError("options must be an object");var e=n.scale;switch(r){case"row":{if(e===void 0)e=EH(this);else if(!wl(e))throw new TypeError("scale must be an array");return wH(this,e),this}case"column":{if(e===void 0)e=xH(this);else if(!wl(e))throw new TypeError("scale must be an array");return OH(this,e),this}case void 0:{if(e===void 0)e=SH(this);else if(typeof e!="number")throw new TypeError("scale must be a number");return MH(this,e),this}default:throw new Error("invalid option: ".concat(r))}}},{key:"toString",value:function(r){return D3(this,r)}}],[{key:"from1DArray",value:function(r,n,e){var t=r*n;if(t!==e.length)throw new RangeError("data length does not match given dimensions");for(var i=new hi(r,n),s=0;s<r;s++)for(var u=0;u<n;u++)i.set(s,u,e[s*n+u]);return i}},{key:"rowVector",value:function(r){for(var n=new hi(1,r.length),e=0;e<r.length;e++)n.set(0,e,r[e]);return n}},{key:"columnVector",value:function(r){for(var n=new hi(r.length,1),e=0;e<r.length;e++)n.set(e,0,r[e]);return n}},{key:"zeros",value:function(r,n){return new hi(r,n)}},{key:"ones",value:function(r,n){return new hi(r,n).fill(1)}},{key:"rand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e!="object")throw new TypeError("options must be an object");for(var t=e.random,i=t===void 0?Math.random:t,s=new hi(r,n),u=0;u<r;u++)for(var l=0;l<n;l++)s.set(u,l,i());return s}},{key:"randInt",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e!="object")throw new TypeError("options must be an object");var t=e.min,i=t===void 0?0:t,s=e.max,u=s===void 0?1e3:s,l=e.random,c=l===void 0?Math.random:l;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(u))throw new TypeError("max must be an integer");if(i>=u)throw new RangeError("min must be smaller than max");for(var f=u-i,d=new hi(r,n),h=0;h<r;h++)for(var p=0;p<n;p++){var m=i+Math.round(c()*f);d.set(h,p,m)}return d}},{key:"eye",value:function(r,n,e){n===void 0&&(n=r),e===void 0&&(e=1);for(var t=Math.min(r,n),i=this.zeros(r,n),s=0;s<t;s++)i.set(s,s,e);return i}},{key:"diag",value:function(r,n,e){var t=r.length;n===void 0&&(n=t),e===void 0&&(e=n);for(var i=Math.min(t,n,e),s=this.zeros(n,e),u=0;u<i;u++)s.set(u,u,r[u]);return s}},{key:"min",value:function(r,n){r=this.checkMatrix(r),n=this.checkMatrix(n);for(var e=r.rows,t=r.columns,i=new hi(e,t),s=0;s<e;s++)for(var u=0;u<t;u++)i.set(s,u,Math.min(r.get(s,u),n.get(s,u)));return i}},{key:"max",value:function(r,n){r=this.checkMatrix(r),n=this.checkMatrix(n);for(var e=r.rows,t=r.columns,i=new this(e,t),s=0;s<e;s++)for(var u=0;u<t;u++)i.set(s,u,Math.max(r.get(s,u),n.get(s,u)));return i}},{key:"checkMatrix",value:function(r){return o.isMatrix(r)?r:new hi(r)}},{key:"isMatrix",value:function(r){return r!=null&&r.klass==="Matrix"}}]),o}();ds.prototype.klass="Matrix",typeof Symbol!="undefined"&&(ds.prototype[Symbol.for("nodejs.util.inspect.custom")]=rH);function N3(o,a){return o-a}function AH(o){return o.every(function(a){return typeof a=="number"})}ds.random=ds.rand,ds.randomInt=ds.randInt,ds.diagonal=ds.diag,ds.prototype.diagonal=ds.prototype.diag,ds.identity=ds.eye,ds.prototype.negate=ds.prototype.neg,ds.prototype.tensorProduct=ds.prototype.kroneckerProduct;var hi=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n,e){var t;if(Object(Ie.a)(this,r),t=a.call(this),r.isMatrix(n))return Object(BO.a)(t,n.clone());if(Number.isInteger(n)&&n>=0)if(t.data=[],Number.isInteger(e)&&e>=0)for(var i=0;i<n;i++)t.data.push(new Float64Array(e));else throw new TypeError("nColumns must be a positive integer");else if(wl(n)){var s=n;if(n=s.length,e=n?s[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");t.data=[];for(var u=0;u<n;u++){if(s[u].length!==e)throw new RangeError("Inconsistent array dimensions");if(!AH(s[u]))throw new TypeError("Input data contains non-numeric values");t.data.push(Float64Array.from(s[u]))}}else throw new TypeError("First argument must be a positive number or an array");return t.rows=n,t.columns=e,t}return Object(pe.a)(r,[{key:"set",value:function(e,t,i){return this.data[e][t]=i,this}},{key:"get",value:function(e,t){return this.data[e][t]}},{key:"removeRow",value:function(e){return Vc(this,e),this.data.splice(e,1),this.rows-=1,this}},{key:"addRow",value:function(e,t){return t===void 0&&(t=e,e=this.rows),Vc(this,e,!0),t=Float64Array.from(gp(this,t)),this.data.splice(e,0,t),this.rows+=1,this}},{key:"removeColumn",value:function(e){Hc(this,e);for(var t=0;t<this.rows;t++){for(var i=new Float64Array(this.columns-1),s=0;s<e;s++)i[s]=this.data[t][s];for(var u=e+1;u<this.columns;u++)i[u-1]=this.data[t][u];this.data[t]=i}return this.columns-=1,this}},{key:"addColumn",value:function(e,t){typeof t=="undefined"&&(t=e,e=this.columns),Hc(this,e,!0),t=pp(this,t);for(var i=0;i<this.rows;i++){for(var s=new Float64Array(this.columns+1),u=0;u<e;u++)s[u]=this.data[i][u];for(s[u++]=t[i];u<this.columns+1;u++)s[u]=this.data[i][u-1];this.data[i]=s}return this.columns+=1,this}}]),r}(ds);oH(ds,hi);var TH=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.data=n,e.rows=n.length,e.columns=n[0].length,e}return Object(pe.a)(r,[{key:"set",value:function(e,t,i){return this.data[e][t]=i,this}},{key:"get",value:function(e,t){return this.data[e][t]}}]),r}(ds);function yp(o,a){var r=0;return Math.abs(o)>Math.abs(a)?(r=a/o,Math.abs(o)*Math.sqrt(1+r*r)):a!==0?(r=o/a,Math.abs(a)*Math.sqrt(1+r*r)):0}var L3=function(){function o(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object(Ie.a)(this,o),a=TH.checkMatrix(a),a.isEmpty())throw new Error("Matrix must be non-empty");var n=a.rows,e=a.columns,t=r.computeLeftSingularVectors,i=t===void 0?!0:t,s=r.computeRightSingularVectors,u=s===void 0?!0:s,l=r.autoTranspose,c=l===void 0?!1:l,f=Boolean(i),d=Boolean(u),h=!1,p;if(n<e)if(!c)p=a.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{p=a.transpose(),n=p.rows,e=p.columns,h=!0;var m=f;f=d,d=m}else p=a.clone();for(var b=Math.min(n,e),E=Math.min(n+1,e),x=new Float64Array(E),O=new hi(n,b),D=new hi(e,e),I=new Float64Array(e),F=new Float64Array(n),H=new Float64Array(E),$=0;$<E;$++)H[$]=$;for(var se=Math.min(n-1,e),de=Math.max(0,Math.min(e-2,n)),Ee=Math.max(se,de),Oe=0;Oe<Ee;Oe++){if(Oe<se){x[Oe]=0;for(var $e=Oe;$e<n;$e++)x[Oe]=yp(x[Oe],p.get($e,Oe));if(x[Oe]!==0){p.get(Oe,Oe)<0&&(x[Oe]=-x[Oe]);for(var tt=Oe;tt<n;tt++)p.set(tt,Oe,p.get(tt,Oe)/x[Oe]);p.set(Oe,Oe,p.get(Oe,Oe)+1)}x[Oe]=-x[Oe]}for(var Le=Oe+1;Le<e;Le++){if(Oe<se&&x[Oe]!==0){for(var it=0,It=Oe;It<n;It++)it+=p.get(It,Oe)*p.get(It,Le);it=-it/p.get(Oe,Oe);for(var tn=Oe;tn<n;tn++)p.set(tn,Le,p.get(tn,Le)+it*p.get(tn,Oe))}I[Le]=p.get(Oe,Le)}if(f&&Oe<se)for(var bn=Oe;bn<n;bn++)O.set(bn,Oe,p.get(bn,Oe));if(Oe<de){I[Oe]=0;for(var dn=Oe+1;dn<e;dn++)I[Oe]=yp(I[Oe],I[dn]);if(I[Oe]!==0){I[Oe+1]<0&&(I[Oe]=0-I[Oe]);for(var en=Oe+1;en<e;en++)I[en]/=I[Oe];I[Oe+1]+=1}if(I[Oe]=-I[Oe],Oe+1<n&&I[Oe]!==0){for(var Vn=Oe+1;Vn<n;Vn++)F[Vn]=0;for(var jt=Oe+1;jt<n;jt++)for(var Cn=Oe+1;Cn<e;Cn++)F[jt]+=I[Cn]*p.get(jt,Cn);for(var jn=Oe+1;jn<e;jn++)for(var Lr=-I[jn]/I[Oe+1],Pr=Oe+1;Pr<n;Pr++)p.set(Pr,jn,p.get(Pr,jn)+Lr*F[Pr])}if(d)for(var Wr=Oe+1;Wr<e;Wr++)D.set(Wr,Oe,I[Wr])}}var Jr=Math.min(e,n+1);if(se<e&&(x[se]=p.get(se,se)),n<Jr&&(x[Jr-1]=0),de+1<Jr&&(I[de]=p.get(de,Jr-1)),I[Jr-1]=0,f){for(var Ta=se;Ta<b;Ta++){for(var fo=0;fo<n;fo++)O.set(fo,Ta,0);O.set(Ta,Ta,1)}for(var _i=se-1;_i>=0;_i--)if(x[_i]!==0){for(var Pu=_i+1;Pu<b;Pu++){for(var Kc=0,Bp=_i;Bp<n;Bp++)Kc+=O.get(Bp,_i)*O.get(Bp,Pu);Kc=-Kc/O.get(_i,_i);for(var ng=_i;ng<n;ng++)O.set(ng,Pu,O.get(ng,Pu)+Kc*O.get(ng,_i))}for(var Gp=_i;Gp<n;Gp++)O.set(Gp,_i,-O.get(Gp,_i));O.set(_i,_i,1+O.get(_i,_i));for(var AA=0;AA<_i-1;AA++)O.set(AA,_i,0)}else{for(var TA=0;TA<n;TA++)O.set(TA,_i,0);O.set(_i,_i,1)}}if(d)for(var Yu=e-1;Yu>=0;Yu--){if(Yu<de&&I[Yu]!==0)for(var zy=Yu+1;zy<e;zy++){for(var ME=0,AE=Yu+1;AE<e;AE++)ME+=D.get(AE,Yu)*D.get(AE,zy);ME=-ME/D.get(Yu+1,Yu);for(var Uy=Yu+1;Uy<e;Uy++)D.set(Uy,zy,D.get(Uy,zy)+ME*D.get(Uy,Yu))}for(var PA=0;PA<e;PA++)D.set(PA,Yu,0);D.set(Yu,Yu,1)}for(var Ej=Jr-1,kA=0,wj=Number.EPSILON;Jr>0;){var ii=void 0,Vy=void 0;for(ii=Jr-2;ii>=-1&&ii!==-1;ii--){var UQ=Number.MIN_VALUE+wj*Math.abs(x[ii]+Math.abs(x[ii+1]));if(Math.abs(I[ii])<=UQ||Number.isNaN(I[ii])){I[ii]=0;break}}if(ii===Jr-2)Vy=4;else{var xl=void 0;for(xl=Jr-1;xl>=ii&&xl!==ii;xl--){var VQ=(xl!==Jr?Math.abs(I[xl]):0)+(xl!==ii+1?Math.abs(I[xl-1]):0);if(Math.abs(x[xl])<=wj*VQ){x[xl]=0;break}}xl===ii?Vy=3:xl===Jr-1?Vy=1:(Vy=2,ii=xl)}switch(ii++,Vy){case 1:{var DA=I[Jr-2];I[Jr-2]=0;for(var tc=Jr-2;tc>=ii;tc--){var Hy=yp(x[tc],DA),IA=x[tc]/Hy,RA=DA/Hy;if(x[tc]=Hy,tc!==ii&&(DA=-RA*I[tc-1],I[tc-1]=IA*I[tc-1]),d)for(var $h=0;$h<e;$h++)Hy=IA*D.get($h,tc)+RA*D.get($h,Jr-1),D.set($h,Jr-1,-RA*D.get($h,tc)+IA*D.get($h,Jr-1)),D.set($h,tc,Hy)}break}case 2:{var NA=I[ii-1];I[ii-1]=0;for(var Yc=ii;Yc<Jr;Yc++){var Wy=yp(x[Yc],NA),LA=x[Yc]/Wy,jA=NA/Wy;if(x[Yc]=Wy,NA=-jA*I[Yc],I[Yc]=LA*I[Yc],f)for(var Xh=0;Xh<n;Xh++)Wy=LA*O.get(Xh,Yc)+jA*O.get(Xh,ii-1),O.set(Xh,ii-1,-jA*O.get(Xh,Yc)+LA*O.get(Xh,ii-1)),O.set(Xh,Yc,Wy)}break}case 3:{var $y=Math.max(Math.abs(x[Jr-1]),Math.abs(x[Jr-2]),Math.abs(I[Jr-2]),Math.abs(x[ii]),Math.abs(I[ii])),zp=x[Jr-1]/$y,xj=x[Jr-2]/$y,TE=I[Jr-2]/$y,_A=x[ii]/$y,HQ=I[ii]/$y,rg=((xj+zp)*(xj-zp)+TE*TE)/2,PE=zp*TE*(zp*TE),Xy=0;(rg!==0||PE!==0)&&(rg<0?Xy=0-Math.sqrt(rg*rg+PE):Xy=Math.sqrt(rg*rg+PE),Xy=PE/(rg+Xy));for(var ig=(_A+zp)*(_A-zp)+Xy,Up=_A*HQ,sa=ii;sa<Jr-1;sa++){var ku=yp(ig,Up);ku===0&&(ku=Number.MIN_VALUE);var Zc=ig/ku,Jc=Up/ku;if(sa!==ii&&(I[sa-1]=ku),ig=Zc*x[sa]+Jc*I[sa],I[sa]=Zc*I[sa]-Jc*x[sa],Up=Jc*x[sa+1],x[sa+1]=Zc*x[sa+1],d)for(var Kh=0;Kh<e;Kh++)ku=Zc*D.get(Kh,sa)+Jc*D.get(Kh,sa+1),D.set(Kh,sa+1,-Jc*D.get(Kh,sa)+Zc*D.get(Kh,sa+1)),D.set(Kh,sa,ku);if(ku=yp(ig,Up),ku===0&&(ku=Number.MIN_VALUE),Zc=ig/ku,Jc=Up/ku,x[sa]=ku,ig=Zc*I[sa]+Jc*x[sa+1],x[sa+1]=-Jc*I[sa]+Zc*x[sa+1],Up=Jc*I[sa+1],I[sa+1]=Zc*I[sa+1],f&&sa<n-1)for(var Yh=0;Yh<n;Yh++)ku=Zc*O.get(Yh,sa)+Jc*O.get(Yh,sa+1),O.set(Yh,sa+1,-Jc*O.get(Yh,sa)+Zc*O.get(Yh,sa+1)),O.set(Yh,sa,ku)}I[Jr-2]=ig,kA=kA+1;break}case 4:{if(x[ii]<=0&&(x[ii]=x[ii]<0?-x[ii]:0,d))for(var kE=0;kE<=Ej;kE++)D.set(kE,ii,-D.get(kE,ii));for(;ii<Ej&&!(x[ii]>=x[ii+1]);){var Ky=x[ii];if(x[ii]=x[ii+1],x[ii+1]=Ky,d&&ii<e-1)for(var Vp=0;Vp<e;Vp++)Ky=D.get(Vp,ii+1),D.set(Vp,ii+1,D.get(Vp,ii)),D.set(Vp,ii,Ky);if(f&&ii<n-1)for(var Hp=0;Hp<n;Hp++)Ky=O.get(Hp,ii+1),O.set(Hp,ii+1,O.get(Hp,ii)),O.set(Hp,ii,Ky);ii++}kA=0,Jr--;break}}}if(h){var WQ=D;D=O,O=WQ}this.m=n,this.n=e,this.s=x,this.U=O,this.V=D}return Object(pe.a)(o,[{key:"solve",value:function(r){for(var n=r,e=this.threshold,t=this.s.length,i=hi.zeros(t,t),s=0;s<t;s++)Math.abs(this.s[s])<=e?i.set(s,s,0):i.set(s,s,1/this.s[s]);for(var u=this.U,l=this.rightSingularVectors,c=l.mmul(i),f=l.rows,d=u.rows,h=hi.zeros(f,d),p=0;p<f;p++)for(var m=0;m<d;m++){for(var b=0,E=0;E<t;E++)b+=c.get(p,E)*u.get(m,E);h.set(p,m,b)}return h.mmul(n)}},{key:"solveForDiagonal",value:function(r){return this.solve(hi.diag(r))}},{key:"inverse",value:function(){for(var r=this.V,n=this.threshold,e=r.rows,t=r.columns,i=new hi(e,this.s.length),s=0;s<e;s++)for(var u=0;u<t;u++)Math.abs(this.s[u])>n&&i.set(s,u,r.get(s,u)/this.s[u]);for(var l=this.U,c=l.rows,f=l.columns,d=new hi(e,c),h=0;h<e;h++)for(var p=0;p<c;p++){for(var m=0,b=0;b<f;b++)m+=i.get(h,b)*l.get(p,b);d.set(h,p,m)}return d}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var r=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,n=0,e=this.s,t=0,i=e.length;t<i;t++)e[t]>r&&n++;return n}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return hi.diag(this.s)}}]),o}(),PH=function(){function o(a){Object(Ie.a)(this,o),this.distances=a.distances,this.dimension=a.dimension||2,this.linkDistance=a.linkDistance}return Object(pe.a)(o,[{key:"layout",value:function(){var r=this,n=r.dimension,e=r.distances,t=r.linkDistance;try{var i=hi.mul(hi.pow(e,2),-.5),s=i.mean("row"),u=i.mean("column"),l=i.mean();i.add(l).subRowVector(s).subColumnVector(u);var c=new L3(i),f=hi.sqrt(c.diagonalMatrix).diagonal();return c.leftSingularVectors.toJSON().map(function(b){return hi.mul([b],[f]).toJSON()[0].splice(0,n)})}catch(b){for(var d=[],h=0;h<e.length;h++){var p=Math.random()*t,m=Math.random()*t;d.push([p,m])}return d}}}]),o}(),kH=800,DH=function(){function o(a){Object(Ie.a)(this,o),this.disp=[],this.positions=a.positions,this.adjMatrix=a.adjMatrix,this.focusID=a.focusID,this.radii=a.radii,this.iterations=a.iterations||10,this.height=a.height||10,this.width=a.width||10,this.speed=a.speed||100,this.gravity=a.gravity||10,this.nodeSizeFunc=a.nodeSizeFunc,this.k=a.k||5,this.strictRadial=a.strictRadial,this.nodes=a.nodes}return Object(pe.a)(o,[{key:"layout",value:function(){var r=this,n=r.positions,e=[],t=r.iterations,i=r.width/10;r.maxDisplace=i,r.disp=e;for(var s=0;s<t;s++)n.forEach(function(u,l){e[l]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return n}},{key:"getRepulsion",value:function(){var r=this,n=r.positions,e=r.nodes,t=r.disp,i=r.k,s=r.radii||[];n.forEach(function(u,l){t[l]={x:0,y:0},n.forEach(function(c,f){if(l!==f&&s[l]===s[f]){var d=u[0]-c[0],h=u[1]-c[1],p=Math.sqrt(d*d+h*h);if(p===0){p=1;var m=l>f?1:-1;d=.01*m,h=.01*m}if(p<r.nodeSizeFunc(e[l])/2+r.nodeSizeFunc(e[f])/2){var b=i*i/p;t[l].x+=d/p*b,t[l].y+=h/p*b}}})})}},{key:"updatePositions",value:function(){var r=this,n=r.positions,e=r.disp,t=r.speed,i=r.strictRadial,s=r.focusID,u=r.maxDisplace||r.width/10;i&&e.forEach(function(c,f){var d=n[f][0]-n[s][0],h=n[f][1]-n[s][1],p=Math.sqrt(d*d+h*h),m=h/p,b=-d/p,E=Math.sqrt(c.x*c.x+c.y*c.y),x=Math.acos((m*c.x+b*c.y)/E);x>Math.PI/2&&(x-=Math.PI/2,m*=-1,b*=-1);var O=Math.cos(x)*E;c.x=m*O,c.y=b*O});var l=r.radii;n.forEach(function(c,f){if(f!==s){var d=Math.sqrt(e[f].x*e[f].x+e[f].y*e[f].y);if(d>0&&f!==s){var h=Math.min(u*(t/kH),d);if(c[0]+=e[f].x/d*h,c[1]+=e[f].y/d*h,i){var p=c[0]-n[s][0],m=c[1]-n[s][1],b=Math.sqrt(p*p+m*m);p=p/b*l[f],m=m/b*l[f],c[0]=n[s][0]+p,c[1]=n[s][1]+m}}}})}}]),o}();function IH(o){for(var a=o.length,r=o[0].length,n=[],e=0;e<a;e++){for(var t=[],i=0;i<r;i++)o[e][i]!==0?t.push(1/(o[e][i]*o[e][i])):t.push(0);n.push(t)}return n}function RH(o,a){var r=-1;return o.forEach(function(n,e){n.id===a&&(r=e)}),r}function j3(o,a){return Math.sqrt((o[0]-a[0])*(o[0]-a[0])+(o[1]-a[1])*(o[1]-a[1]))}var NH=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var e=this,t=e.nodes,i=e.edges||[];if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var s=e.center;if(t.length===1){t[0].x=s[0],t[0].y=s[1],e.onLayoutEnd&&e.onLayoutEnd();return}var u=e.linkDistance,l=null;if(V0(e.focusNode)){for(var c=!1,f=0;f<t.length;f++)t[f].id===e.focusNode&&(l=t[f],e.focusNode=l,c=!0,f=t.length);c||(l=null)}else l=e.focusNode;l||(l=t[0],e.focusNode=l);var d=RH(t,l.id);e.focusIndex=d;var h=kD({nodes:t,edges:i},!1),p=PD(h),m=e.maxToFocus(p,d);e.handleInfinity(p,d,m+1),e.distances=p;var b=p[d],E=e.width||500,x=e.height||500,O=E-s[0]>s[0]?s[0]:E-s[0],D=x-s[1]>s[1]?s[1]:x-s[1];O===0&&(O=E/2),D===0&&(D=x/2);var I=D>O?O:D,F=Math.max.apply(Math,Object(ot.a)(b)),H=[];b.forEach(function(dn,en){e.unitRadius||(e.unitRadius=I/F),H[en]=dn*e.unitRadius}),e.radii=H;var $=e.eIdealDisMatrix();e.eIdealDistances=$;var se=IH($);e.weights=se;var de=new PH({linkDistance:u,distances:$}),Ee=de.layout();Ee.forEach(function(dn){G2(dn[0])&&(dn[0]=Math.random()*u),G2(dn[1])&&(dn[1]=Math.random()*u)}),e.positions=Ee,Ee.forEach(function(dn,en){t[en].x=dn[0]+s[0],t[en].y=dn[1]+s[1]}),Ee.forEach(function(dn){dn[0]-=Ee[d][0],dn[1]-=Ee[d][1]}),e.run();var Oe=e.preventOverlap,$e=e.nodeSize,tt,Le=e.strictRadial;if(Oe){var it=e.nodeSpacing,It;gr(it)?It=function(){return it}:Th(it)?It=it:It=function(){return 0},$e?js($e)?tt=function(en){var Vn=$e[0]>$e[1]?$e[0]:$e[1];return Vn+It(en)}:tt=function(en){return $e+It(en)}:tt=function(en){if(en.size){if(js(en.size)){var Vn=en.size[0]>en.size[1]?en.size[0]:en.size[1];return Vn+It(en)}if(Nf(en.size)){var jt=en.size.width>en.size.height?en.size.width:en.size.height;return jt+It(en)}return en.size+It(en)}return 10+It(en)};var tn={nodes:t,nodeSizeFunc:tt,adjMatrix:h,positions:Ee,radii:H,height:x,width:E,strictRadial:Le,focusID:d,iterations:e.maxPreventOverlapIteration||200,k:Ee.length/4.5},bn=new DH(tn);Ee=bn.layout()}return Ee.forEach(function(dn,en){t[en].x=dn[0]+s[0],t[en].y=dn[1]+s[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:i}}},{key:"run",value:function(){for(var e=this,t=e.maxIteration,i=e.positions||[],s=e.weights||[],u=e.eIdealDistances||[],l=e.radii||[],c=0;c<=t;c++){var f=c/t;e.oneIteration(f,i,l,u,s)}}},{key:"oneIteration",value:function(e,t,i,s,u){var l=this,c=1-e,f=l.focusIndex;t.forEach(function(d,h){var p=j3(d,[0,0]),m=p===0?0:1/p;if(h!==f){var b=0,E=0,x=0;t.forEach(function(D,I){if(h!==I){var F=j3(d,D),H=F===0?0:1/F,$=s[I][h];x+=u[h][I],b+=u[h][I]*(D[0]+$*(d[0]-D[0])*H),E+=u[h][I]*(D[1]+$*(d[1]-D[1])*H)}});var O=i[h]===0?0:1/i[h];x*=c,x+=e*O*O,b*=c,b+=e*O*d[0]*m,d[0]=b/x,E*=c,E+=e*O*d[1]*m,d[1]=E/x}})}},{key:"eIdealDisMatrix",value:function(){var e=this,t=e.nodes;if(!t)return[];var i=e.distances,s=e.linkDistance,u=e.radii||[],l=e.unitRadius||50,c=[];return i&&i.forEach(function(f,d){var h=[];f.forEach(function(p,m){if(d===m)h.push(0);else if(u[d]===u[m])if(e.sortBy==="data")h.push(p*(Math.abs(d-m)*e.sortStrength)/(u[d]/l));else if(e.sortBy){var b=t[d][e.sortBy]||0,E=t[m][e.sortBy]||0;V0(b)&&(b=b.charCodeAt(0)),V0(E)&&(E=E.charCodeAt(0)),h.push(p*(Math.abs(b-E)*e.sortStrength)/(u[d]/l))}else h.push(p*s/(u[d]/l));else{var x=(s+l)/2;h.push(p*x)}}),c.push(h)}),c}},{key:"handleInfinity",value:function(e,t,i){for(var s=e.length,u=0;u<s;u++)if(e[t][u]===Infinity){e[t][u]=i,e[u][t]=i;for(var l=0;l<s;l++)e[u][l]!==Infinity&&e[t][l]===Infinity&&(e[t][l]=i+e[u][l],e[l][t]=i+e[u][l])}for(var c=0;c<s;c++)if(c!==t){for(var f=0;f<s;f++)if(e[c][f]===Infinity){var d=Math.abs(e[t][c]-e[t][f]);d=d===0?1:d,e[c][f]=d}}}},{key:"maxToFocus",value:function(e,t){for(var i=0,s=0;s<e[t].length;s++)e[t][s]!==Infinity&&(i=e[t][s]>i?e[t][s]:i);return i}},{key:"getType",value:function(){return"radial"}}]),r}(qs),LH=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=3/2*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var e=this,t=e.nodes,i=e.edges,s=t.length;if(s===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var u=e.center;if(s===1){t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd();return}var l=[],c;js(e.nodeSize)?c=Math.max(e.nodeSize[0],e.nodeSize[1]):c=e.nodeSize,t.forEach(function(de){l.push(de);var Ee=c;js(de.size)?Ee=Math.max(de.size[0],de.size[1]):gr(de.size)?Ee=de.size:Nf(de.size)&&(Ee=Math.max(de.size.width,de.size.height)),c=Math.max(c,Ee)}),e.clockwise=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise;var f={},d={};if(l.forEach(function(de,Ee){f[de.id]=de,d[de.id]=Ee}),(e.sortBy==="degree"||!V0(e.sortBy)||l[0][e.sortBy]===void 0)&&(e.sortBy="degree",!gr(t[0].degree))){var h=H0(t.length,d,i);l.forEach(function(de,Ee){de.degree=h[Ee]})}l.sort(function(de,Ee){return Ee[e.sortBy]-de[e.sortBy]}),e.maxValueNode=l[0],e.maxLevelDiff=e.maxLevelDiff||e.maxValueNode[e.sortBy]/4;var p=[[]],m=p[0];l.forEach(function(de){if(m.length>0){var Ee=Math.abs(m[0][e.sortBy]-de[e.sortBy]);e.maxLevelDiff&&Ee>=e.maxLevelDiff&&(m=[],p.push(m))}m.push(de)});var b=c+e.minNodeSpacing;if(!e.preventOverlap){var E=p.length>0&&p[0].length>1,x=Math.min(e.width,e.height)/2-b,O=x/(p.length+(E?1:0));b=Math.min(b,O)}var D=0;if(p.forEach(function(de){var Ee=e.sweep;Ee===void 0&&(Ee=2*Math.PI-2*Math.PI/de.length);var Oe=de.dTheta=Ee/Math.max(1,de.length-1);if(de.length>1&&e.preventOverlap){var $e=Math.cos(Oe)-Math.cos(0),tt=Math.sin(Oe)-Math.sin(0),Le=Math.sqrt(b*b/($e*$e+tt*tt));D=Math.max(Le,D)}de.r=D,D+=b}),e.equidistant){for(var I=0,F=0,H=0;H<p.length;H++){var $=p[H],se=$.r-F;I=Math.max(I,se)}F=0,p.forEach(function(de,Ee){Ee===0&&(F=de.r),de.r=F,F+=I})}return p.forEach(function(de){var Ee=de.dTheta,Oe=de.r;de.forEach(function($e,tt){var Le=e.startAngle+(e.clockwise?1:-1)*Ee*tt;$e.x=u[0]+Oe*Math.cos(Le),$e.y=u[1]+Oe*Math.sin(Le)})}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:i}}},{key:"getType",value:function(){return"concentric"}}]),r}(qs),jH=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var e=this,t=e.nodes,i=e.edges,s=i===void 0?[]:i,u=e.center;if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}if(t.length===1){t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd();return}var l=e.linkDistance,c=kD({nodes:t,edges:s},!1),f=PD(c);e.handleInfinity(f);var d=tV(f,l);e.scaledDistances=d;var h=e.runMDS();return e.positions=h,h.forEach(function(p,m){t[m].x=p[0]+u[0],t[m].y=p[1]+u[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:s}}},{key:"runMDS",value:function(){var e=this,t=2,i=e.scaledDistances,s=hi.mul(hi.pow(i,2),-.5),u=s.mean("row"),l=s.mean("column"),c=s.mean();s.add(c).subRowVector(u).subColumnVector(l);var f=new L3(s),d=hi.sqrt(f.diagonalMatrix).diagonal();return f.leftSingularVectors.toJSON().map(function(h){return hi.mul([h],[d]).toJSON()[0].splice(0,t)})}},{key:"handleInfinity",value:function(e){var t=-999999;e.forEach(function(i){i.forEach(function(s){s!==Infinity&&t<s&&(t=s)})}),e.forEach(function(i,s){i.forEach(function(u,l){u===Infinity&&(e[s][l]=t)})})}},{key:"getType",value:function(){return"mds"}}]),r}(qs),_H=800,FH=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.maxIteration=1e3,e.workerEnabled=!1,e.gravity=10,e.speed=5,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.tick=function(){},e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var e=this,t,i,s=this,u=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),!u||u.length===0){(t=s.onLayoutEnd)===null||t===void 0||t.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);var l=s.center;if(u.length===1){u[0].x=l[0],u[0].y=l[1],(i=s.onLayoutEnd)===null||i===void 0||i.call(s);return}var c={},f={};return u.forEach(function(d,h){gr(d.x)||(d.x=Math.random()*e.width),gr(d.y)||(d.y=Math.random()*e.height),c[d.id]=d,f[d.id]=h}),s.nodeMap=c,s.nodeIdxMap=f,s.run()}},{key:"run",value:function(){var e,t=this,i=t.nodes;if(!!i){var s=t.edges,u=t.maxIteration,l=t.workerEnabled,c=t.clustering,f={};if(c&&i.forEach(function(p){f[p.cluster]===void 0&&(f[p.cluster]={name:p.cluster,cx:0,cy:0,count:0})}),l){for(var d=0;d<u;d++)t.runOneStep(f);(e=t.onLayoutEnd)===null||e===void 0||e.call(t)}else{if(typeof window=="undefined")return;var h=0;this.timeInterval=window.setInterval(function(){var p;t.runOneStep(f),h++,h>=u&&((p=t.onLayoutEnd)===null||p===void 0||p.call(t),window.clearInterval(t.timeInterval))},0)}return{nodes:i,edges:s}}}},{key:"runOneStep",value:function(e){var t,i=this,s=i.nodes;if(!!s){var u=i.edges,l=i.center,c=i.gravity,f=i.speed,d=i.clustering,h=i.height*i.width,p=Math.sqrt(h)/10,m=h/(s.length+1),b=Math.sqrt(m),E=[];if(s.forEach(function(I,F){E[F]={x:0,y:0}}),i.applyCalculate(s,u,E,b,m),d){for(var x in e)e[x].cx=0,e[x].cy=0,e[x].count=0;s.forEach(function(I){var F=e[I.cluster];gr(I.x)&&(F.cx+=I.x),gr(I.y)&&(F.cy+=I.y),F.count++});for(var O in e)e[O].cx/=e[O].count,e[O].cy/=e[O].count;var D=i.clusterGravity||c;s.forEach(function(I,F){if(!(!gr(I.x)||!gr(I.y))){var H=e[I.cluster],$=Math.sqrt((I.x-H.cx)*(I.x-H.cx)+(I.y-H.cy)*(I.y-H.cy)),se=b*D;E[F].x-=se*(I.x-H.cx)/$,E[F].y-=se*(I.y-H.cy)/$}})}s.forEach(function(I,F){if(!(!gr(I.x)||!gr(I.y))){var H=.01*b*c;E[F].x-=H*(I.x-l[0]),E[F].y-=H*(I.y-l[1])}}),s.forEach(function(I,F){if(gr(I.fx)&&gr(I.fy)){I.x=I.fx,I.y=I.fy;return}if(!(!gr(I.x)||!gr(I.y))){var H=Math.sqrt(E[F].x*E[F].x+E[F].y*E[F].y);if(H>0){var $=Math.min(p*(f/_H),H);I.x+=E[F].x/H*$,I.y+=E[F].y/H*$}}}),(t=i.tick)===null||t===void 0||t.call(i)}}},{key:"applyCalculate",value:function(e,t,i,s,u){var l=this;l.calRepulsive(e,i,u),t&&l.calAttractive(t,i,s)}},{key:"calRepulsive",value:function(e,t,i){e.forEach(function(s,u){t[u]={x:0,y:0},e.forEach(function(l,c){if(u!==c&&!(!gr(s.x)||!gr(l.x)||!gr(s.y)||!gr(l.y))){var f=s.x-l.x,d=s.y-l.y,h=f*f+d*d;if(h===0){h=1;var p=u>c?1:-1;f=.01*p,d=.01*p}var m=i/h;t[u].x+=f*m,t[u].y+=d*m}})})}},{key:"calAttractive",value:function(e,t,i){var s=this;e.forEach(function(u){var l=Qi(u,"source"),c=Qi(u,"target");if(!(!l||!c)){var f=s.nodeIdxMap[l],d=s.nodeIdxMap[c];if(f!==d){var h=s.nodeMap[l],p=s.nodeMap[c];if(!(!gr(p.x)||!gr(h.x)||!gr(p.y)||!gr(h.y))){var m=p.x-h.x,b=p.y-h.y,E=Math.sqrt(m*m+b*b),x=E*E/i;t[d].x-=m/E*x,t[d].y-=b/E*x,t[f].x+=m/E*x,t[f].y+=b/E*x}}}})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){var e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}},{key:"getType",value:function(){return"fruchterman"}}]),r}(qs),BH=v("yG8O"),Va=v.n(BH),GH=v("lwsE"),qi=v.n(GH),zH=v("W8MJ"),ea=v.n(zH),UH=v("U+yc"),Ha=v.n(UH),Aq=v("1ABj"),qe=v("Gj0h"),An=v("IOcx"),Zr=v("4cb6");function BM(o){return typeof o=="number"}function Pd(o){return o===void 0?0:o>360||o<-360?o%360:o}function Zv(o,a,r){return BM(o)?An.d.fromValues(o,a,r):o.length===3?An.d.clone(o):An.d.fromValues(o[0],o[1],o[2])}var _3=function(){function o(a,r){qi()(this,o),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=a,this.matrix=An.b.clone(r.matrix),this.right=An.d.clone(r.right),this.up=An.d.clone(r.up),this.forward=An.d.clone(r.forward),this.position=An.d.clone(r.position),this.focalPoint=An.d.clone(r.focalPoint),this.distanceVector=An.d.clone(r.distanceVector),this.azimuth=r.azimuth,this.elevation=r.elevation,this.roll=r.roll,this.relAzimuth=r.relAzimuth,this.relElevation=r.relElevation,this.relRoll=r.relRoll,this.dollyingStep=r.dollyingStep,this.distance=r.distance}return ea()(o,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(r){r.matrix=An.b.copy(r.matrix,this.matrix),r.right=An.d.copy(r.right,this.right),r.up=An.d.copy(r.up,this.up),r.forward=An.d.copy(r.forward,this.forward),r.position=An.d.copy(r.position,this.position),r.focalPoint=An.d.copy(r.focalPoint,this.focalPoint),r.distanceVector=An.d.copy(r.distanceVector,this.distanceVector),r.azimuth=this.azimuth,r.elevation=this.elevation,r.roll=this.roll,r.relAzimuth=this.relAzimuth,r.relElevation=this.relElevation,r.relRoll=this.relRoll,r.dollyingStep=this.dollyingStep,r.distance=this.distance}}]),o}(),F3,B3,G3,GM,z3,U3,V3,Ma;(function(o){o.ORBITING="ORBITING",o.EXPLORING="EXPLORING",o.TRACKING="TRACKING"})(Ma||(Ma={}));var Q2;(function(o){o.DEFAULT="DEFAULT",o.ROTATIONAL="ROTATIONAL",o.TRANSLATIONAL="TRANSLATIONAL",o.CINEMATIC="CINEMATIC"})(Q2||(Q2={}));var Jv;(function(o){o.ORTHOGRAPHIC="ORTHOGRAPHIC",o.PERSPECTIVE="PERSPECTIVE"})(Jv||(Jv={}));var kd=Math.PI/180,Dh=180/Math.PI,H3=(F3=Object(Zr.injectable)(),B3=Object(Zr.inject)(qe.IDENTIFIER.InteractorService),F3(G3=(GM=(V3=U3=function(){function o(){qi()(this,o),this.matrix=An.b.create(),this.right=An.d.fromValues(1,0,0),this.up=An.d.fromValues(0,1,0),this.forward=An.d.fromValues(0,0,1),this.position=An.d.fromValues(0,0,1),this.focalPoint=An.d.fromValues(0,0,0),this.distanceVector=An.d.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=Infinity,this.minDistance=-Infinity,this.rotateWorld=!1,Va()(this,"interactor",z3,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=An.b.create(),this.view=void 0,this.following=void 0,this.type=Ma.EXPLORING,this.trackingMode=Q2.DEFAULT,this.projectionMode=Jv.PERSPECTIVE,this.frustum=new qe.Frustum,this.landmarks=[],this.landmarkAnimationID=void 0}return ea()(o,[{key:"clone",value:function(){var r=new o;return r.setType(this.type,void 0),r.interactor=this.interactor,r}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(r,n){return this.type=r,this.type===Ma.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Ma.TRACKING&&n!==void 0&&this.setTrackingMode(n),this}},{key:"setProjectionMode",value:function(r){return this.projectionMode=r,this}},{key:"setTrackingMode",value:function(r){if(this.type!==Ma.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=r,this}},{key:"setWorldRotation",value:function(r){this.rotateWorld=r,this._getAngles()}},{key:"getViewTransform",value:function(){return An.b.invert(An.b.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(r){return this.matrix=r,this._update(),this}},{key:"setAspect",value:function(r){return this.setPerspective(this.near,this.far,this.fov,r),this}},{key:"setViewOffset",value:function(r,n,e,t,i,s){return this.aspect=r/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=n,this.view.offsetX=e,this.view.offsetY=t,this.view.width=i,this.view.height=s,this.projectionMode===Jv.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Jv.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(r,n,e,t){return this.projectionMode=Jv.PERSPECTIVE,this.fov=e,this.near=r,this.far=n,this.aspect=t,An.b.perspective(this.perspective,this.fov*kd,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(r,n,e,t,i,s){this.projectionMode=Jv.ORTHOGRAPHIC,this.rright=n,this.left=r,this.top=e,this.bottom=t,this.near=i,this.far=s;var u=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,d=c-u,h=c+u,p=f+l,m=f-l;if(this.view!==void 0&&this.view.enabled){var b=(this.rright-this.left)/this.view.fullWidth/this.zoom,E=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=b*this.view.offsetX,h=d+b*this.view.width,p-=E*this.view.offsetY,m=p-E*this.view.height}return An.b.ortho(this.perspective,d,h,p,m,i,s),this}},{key:"setPosition",value:function(r,n,e){return this._setPosition(r,n,e),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(r,n,e){var t=An.d.fromValues(0,1,0);if(this.focalPoint=Zv(r,n,e),this.trackingMode===Q2.CINEMATIC){var i=An.d.subtract(An.d.create(),this.focalPoint,this.position);r=i[0],n=i[1],e=i[2];var s=An.d.length(i),u=Math.asin(n/s)*Dh,l=90+Math.atan2(e,r)*Dh,c=An.b.create();An.b.rotateY(c,c,l*kd),An.b.rotateX(c,c,u*kd),t=An.d.transformMat4(An.d.create(),[0,1,0],c)}return An.b.invert(this.matrix,An.b.lookAt(An.b.create(),this.position,this.focalPoint,t)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(r){if(!(this.distance===r||r<0)){this.distance=r,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var n=An.d.create();r=this.distance;var e=this.forward,t=this.focalPoint;return n[0]=r*e[0]+t[0],n[1]=r*e[1]+t[1],n[2]=r*e[2]+t[2],this._setPosition(n),this}}},{key:"setMaxDistance",value:function(r){return this.maxDistance=r,this}},{key:"setMinDistance",value:function(r){return this.minDistance=r,this}},{key:"changeAzimuth",value:function(r){return this.setAzimuth(this.azimuth+r),this}},{key:"changeElevation",value:function(r){return this.setElevation(this.elevation+r),this}},{key:"changeRoll",value:function(r){return this.setRoll(this.roll+r),this}},{key:"setAzimuth",value:function(r){return this.azimuth=Pd(r),this.computeMatrix(),this._getAxes(),this.type===Ma.ORBITING||this.type===Ma.EXPLORING?this._getPosition():this.type===Ma.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(r){return this.elevation=Pd(r),this.computeMatrix(),this._getAxes(),this.type===Ma.ORBITING||this.type===Ma.EXPLORING?this._getPosition():this.type===Ma.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(r){return this.roll=Pd(r),this.computeMatrix(),this._getAxes(),this.type===Ma.ORBITING||this.type===Ma.EXPLORING?this._getPosition():this.type===Ma.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(r,n,e){if(this.type===Ma.EXPLORING){r=Pd(r),n=Pd(n),e=Pd(e);var t=An.c.setAxisAngle(An.c.create(),[1,0,0],(this.rotateWorld?1:-1)*n*kd),i=An.c.setAxisAngle(An.c.create(),[0,1,0],(this.rotateWorld?1:-1)*r*kd),s=An.c.setAxisAngle(An.c.create(),[0,0,1],e*kd),u=An.c.multiply(An.c.create(),i,t);u=An.c.multiply(An.c.create(),u,s);var l=An.b.fromQuat(An.b.create(),u);An.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),An.b.multiply(this.matrix,this.matrix,l),An.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+n)>90)return;this.relElevation=Pd(n),this.relAzimuth=Pd(r),this.relRoll=Pd(e),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===Ma.ORBITING||this.type===Ma.EXPLORING?this._getPosition():this.type===Ma.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(r,n){var e=Zv(r,n,0),t=An.d.clone(this.position);return An.d.add(t,t,An.d.scale(An.d.create(),this.right,e[0])),An.d.add(t,t,An.d.scale(An.d.create(),this.up,e[1])),this._setPosition(t),this}},{key:"dolly",value:function(r){var n=this.forward,e=An.d.clone(this.position),t=r*this.dollyingStep,i=this.distance+r*this.dollyingStep;return t=Math.max(Math.min(i,this.maxDistance),this.minDistance)-this.distance,e[0]+=t*n[0],e[1]+=t*n[1],e[2]+=t*n[2],this._setPosition(e),this.type===Ma.ORBITING||this.type===Ma.EXPLORING?this._getDistance():this.type===Ma.TRACKING&&An.d.add(this.focalPoint,e,this.distanceVector),this}},{key:"createLandmark",value:function(r,n){var e=this.clone();e.setPosition(n.position),e.setFocalPoint(n.focalPoint),n.roll!==void 0&&e.setRoll(n.roll);var t=new _3(r,e);return this.landmarks.push(t),t}},{key:"setLandmark",value:function(r){var n=new _3(r,this);return this.landmarks.push(n),this}},{key:"gotoLandmark",value:function(r){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,t=this.landmarks.find(function(f){return f.name===r});if(t){if(e===0){t.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var i=t.getPosition(),s=t.getFocalPoint(),u=t.getRoll(),l,c=function f(d){l===void 0&&(l=d);var h=d-l,p=(1-Math.cos(h/e*Math.PI))/2,m=An.d.create(),b=An.d.create(),E=0;An.d.lerp(m,n.focalPoint,s,p),An.d.lerp(b,n.position,i,p),E=n.roll*(1-p)+u*p,n.setFocalPoint(m),n.setPosition(b),n.setRoll(E),n.computeMatrix();var x=An.d.dist(m,s)+An.d.dist(b,i);if(!(x>.01)){n.setFocalPoint(m),n.setPosition(b),n.setRoll(E),n.computeMatrix(),n.interactor.connect();return}h<e&&(n.landmarkAnimationID=window.requestAnimationFrame(f))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var r,n,e=An.c.setAxisAngle(An.c.create(),[0,0,1],this.roll*kd);An.b.identity(this.matrix),r=An.c.setAxisAngle(An.c.create(),[1,0,0],(this.rotateWorld&&this.type!==Ma.TRACKING||this.type===Ma.TRACKING?1:-1)*this.elevation*kd),n=An.c.setAxisAngle(An.c.create(),[0,1,0],(this.rotateWorld&&this.type!==Ma.TRACKING||this.type===Ma.TRACKING?1:-1)*this.azimuth*kd);var t=An.c.multiply(An.c.create(),n,r);t=An.c.multiply(An.c.create(),t,e);var i=An.b.fromQuat(An.b.create(),t);this.type===Ma.ORBITING||this.type===Ma.EXPLORING?(An.b.translate(this.matrix,this.matrix,this.focalPoint),An.b.multiply(this.matrix,this.matrix,i),An.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===Ma.TRACKING&&(An.b.translate(this.matrix,this.matrix,this.position),An.b.multiply(this.matrix,this.matrix,i))}},{key:"_setPosition",value:function(r,n,e){this.position=Zv(r,n,e);var t=this.matrix;t[12]=this.position[0],t[13]=this.position[1],t[14]=this.position[2],t[15]=1}},{key:"_getAxes",value:function(){An.d.copy(this.right,Zv(An.e.transformMat4(An.e.create(),[1,0,0,0],this.matrix))),An.d.copy(this.up,Zv(An.e.transformMat4(An.e.create(),[0,1,0,0],this.matrix))),An.d.copy(this.forward,Zv(An.e.transformMat4(An.e.create(),[0,0,1,0],this.matrix))),An.d.normalize(this.right,this.right),An.d.normalize(this.up,this.up),An.d.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var r=this.distanceVector[0],n=this.distanceVector[1],e=this.distanceVector[2],t=An.d.length(this.distanceVector);if(t===0){this.elevation=0,this.azimuth=0;return}this.type===Ma.TRACKING?(this.elevation=Math.asin(n/t)*Dh,this.azimuth=Math.atan2(-r,-e)*Dh):this.rotateWorld?(this.elevation=Math.asin(n/t)*Dh,this.azimuth=Math.atan2(-r,-e)*Dh):(this.elevation=-Math.asin(n/t)*Dh,this.azimuth=-Math.atan2(-r,-e)*Dh)}},{key:"_getPosition",value:function(){An.d.copy(this.position,Zv(An.e.transformMat4(An.e.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){An.d.transformMat3(this.distanceVector,[0,0,-this.distance],An.a.fromMat4(An.a.create(),this.matrix)),An.d.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=An.d.subtract(An.d.create(),this.focalPoint,this.position),this.distance=An.d.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),o}(),U3.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},V3),z3=Ha()(GM.prototype,"interactor",[B3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GM))||G3),W3,$3,X3,zM,K3,Y0,Y3,Ih=(W3=Object(Zr.injectable)(),$3=Object(Zr.inject)(qe.IDENTIFIER.GeometryComponentManager),W3(X3=(zM=(Y3=Y0=function(){function o(){qi()(this,o),this.config=void 0,Va()(this,"geometry",K3,this),this.entity=void 0,this.component=void 0}return ea()(o,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(r){this.config=r}},{key:"setEntity",value:function(r){this.entity=r,this.component=this.geometry.create(r),this.component.entity=r,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),o}(),Y0.BOX="box",Y0.SPHERE="sphere",Y0.PLANE="plane",Y0.MERGED="merged",Y3),K3=Ha()(zM.prototype,"geometry",[$3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zM))||X3),VH=v("o0o1"),xi=v.n(VH),HH=v("yXPU"),Io=v.n(HH),WH=v("lSNA"),pn=v.n(WH),or=v("XkVO");function Z3(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var $H={}.toString,XH=function(a,r){return $H.call(a)==="[object "+r+"]"},KH=XH,YH=function(o){return Array.isArray?Array.isArray(o):KH(o,"Array")},ZH=v("cDf5"),Z0=v.n(ZH),JH=9007199254740991,QH="[object Arguments]",qH="[object Array]",eW="[object Boolean]",tW="[object Date]",nW="[object Error]",rW="[object Function]",iW="[object Map]",aW="[object Number]",oW="[object Object]",sW="[object RegExp]",uW="[object Set]",lW="[object String]",cW="[object WeakMap]",fW="[object ArrayBuffer]",dW="[object DataView]",hW="[object Float32Array]",vW="[object Float64Array]",gW="[object Int8Array]",pW="[object Int16Array]",mW="[object Int32Array]",yW="[object Uint8Array]",bW="[object Uint8ClampedArray]",CW="[object Uint16Array]",EW="[object Uint32Array]",no={};no[hW]=no[vW]=no[gW]=no[pW]=no[mW]=no[yW]=no[bW]=no[CW]=no[EW]=!0,no[QH]=no[qH]=no[fW]=no[eW]=no[dW]=no[tW]=no[nW]=no[rW]=no[iW]=no[aW]=no[oW]=no[sW]=no[uW]=no[lW]=no[cW]=!1;function Tq(o){return function(a){return o(a)}}var wW=Object.prototype,xW=wW.toString;function OW(o){return MW(o)&&SW(o.length)&&!!no[xW.call(o)]}function SW(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=JH}function MW(o){return!!o&&Z0()(o)==="object"}var J3=OW,Q3,q3,eI,tI,q2,nI,rI,iI;function aI(o,a){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);a&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function oI(o){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?aI(Object(r),!0).forEach(function(n){pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var sI=(Q3=Object(Zr.injectable)(),q3=Object(Zr.inject)(qe.IDENTIFIER.RenderEngine),eI=Object(Zr.inject)(qe.IDENTIFIER.ConfigService),Q3(tI=(q2=(iI=function(){function o(){qi()(this,o),Va()(this,"engine",nI,this),Va()(this,"configService",rI,this),this.entity=Object(qe.createEntity)(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return ea()(o,[{key:"init",value:function(){var r=this.configService.get(),n=r.canvas,e=r.engineOptions;this.initPromise=this.engine.init(oI({canvas:n||Z3(),swapChainFormat:or.TextureFormat.BGRA8Unorm,antialiasing:!1},e))}},{key:"setBundle",value:function(r){this.compiledBundle=JSON.parse(JSON.stringify(r))}},{key:"setDispatch",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=r),this}},{key:"setMaxIteration",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=r),this}},{key:"setBinding",value:function(r,n){var e=this;if(typeof r=="string"){var t=BM(n)||J3(n)||YH(n);if(this.compiledBundle&&this.compiledBundle.context){var i=this.compiledBundle.context.defines.find(function(u){return u.name===r});if(i)return i.value=n,this;var s=this.compiledBundle.context.uniforms.find(function(u){return u.name===r});s&&(t?(s.data=n,s.isReferer=!1,s.storageClass===qe.STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(r,n):this.model&&this.model.updateBuffer(r,n)):(s.isReferer=!0,s.data=n))}}else Object.keys(r).forEach(function(u){e.setBinding(u,r[u])});return this}},{key:"execute",value:function(){var a=Io()(xi.a.mark(function n(){var e=this,t,i,s=arguments;return xi.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){l.next=6;break}return this.compiledBundle.context&&(t>1?this.compiledBundle.context.maxIteration=t:this.compiledBundle.context.maxIteration++),l.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(c){var f=c.isReferer;return f}).forEach(function(c){var f=c.data,d=c.name;e.model.confirmInput(f.model,d)}),i=0;i<t;i++)this.model.run();return this.engine.endFrame(),l.abrupt("return",this);case 12:case"end":return l.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"getOutput",value:function(){var a=Io()(xi.a.mark(function n(){return xi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"compile",value:function(){var a=Io()(xi.a.mark(function n(){var e,t,i;return xi.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.initPromise;case 2:return e=oI({},this.compiledBundle.context),t=this.engine.supportWebGPU?this.engine.useWGSL?qe.Target.WGSL:qe.Target.GLSL450:qe.Target.GLSL100,i=this.compiledBundle.shaders[t],e.defines.filter(function(l){return l.runtime}).forEach(function(l){var c="".concat(qe.DefineValuePlaceholder).concat(l.name);i=i.replace(c,"".concat(l.value))}),e.shader=i,e.uniforms.forEach(function(l){if(!l.data&&l.storageClass===qe.STORAGE_CLASS.StorageBuffer){var c=1;l.type===qe.AST_TOKEN_TYPES.FloatArray?c=1:l.type===qe.AST_TOKEN_TYPES.Vector4FloatArray&&(c=4),l.data=new Float32Array(e.output.length*c).fill(0)}}),this.compiledBundle.context=e,u.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=u.sent;case 12:case"end":return u.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()}]),o}(),iI),nI=Ha()(q2.prototype,"engine",[q3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rI=Ha()(q2.prototype,"configService",[eI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q2))||tI),uI,lI,cI,UM,fI,dI,hI,vI=(uI=Object(Zr.injectable)(),lI=Object(Zr.inject)(qe.IDENTIFIER.MaterialComponentManager),uI(cI=(UM=(hI=dI=function(){function o(){qi()(this,o),this.config=void 0,Va()(this,"material",fI,this),this.entity=void 0,this.component=void 0}return ea()(o,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(r){this.config=r}},{key:"setEntity",value:function(r,n){this.entity=r,this.component=this.material.create(r),this.component.entity=r,this.component.type=n,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),o}(),dI.BASIC="basic",hI),fI=Ha()(UM.prototype,"material",[lI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UM))||cI),gI,pI,mI,yI,bI,CI,EI,bp,wI,xI,OI,SI,eC,MI,Rh=(gI=Object(Zr.injectable)(),pI=Object(Zr.inject)(qe.IDENTIFIER.MeshComponentManager),mI=Object(Zr.inject)(qe.IDENTIFIER.CullableComponentManager),yI=Object(Zr.inject)(qe.IDENTIFIER.TransformComponentManager),bI=Object(Zr.inject)(qe.IDENTIFIER.Systems),CI=Object(Zr.named)(qe.IDENTIFIER.SceneGraphSystem),gI(EI=(bp=(MI=eC=function(){function o(){qi()(this,o),this.attributes={},this.config=void 0,Va()(this,"mesh",wI,this),Va()(this,"cullable",xI,this),Va()(this,"transform",OI,this),Va()(this,"sceneGraphSystem",SI,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return ea()(o,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(r){this.config=r}},{key:"setEntity",value:function(r){this.entity=r,this.cullable.create(r),this.meshComponent=this.mesh.create(r),this.transformComponent=this.transform.create(r),this.onEntityCreated()}},{key:"setMaterial",value:function(r){return this.meshComponent.material=r,this}},{key:"setGeometry",value:function(r){return this.meshComponent.geometry=r,this}},{key:"setAttributes",value:function(r){var n=this;Object.keys(r).forEach(function(e){r[e]!==void 0&&r[e]!==n.attributes[e]&&(n.onAttributeChanged({name:e,data:r[e]}),n.attributes[e]=r[e])})}},{key:"setVisible",value:function(r){var n=this;return this.meshComponent.visible=r,this.meshComponent.children.forEach(function(e){var t=n.mesh.getComponentByEntity(e);t&&(t.visible=r)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(r){return this.sceneGraphSystem.attach(this.entity,r.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(r){var n=r.name,e=r.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(n),e)}},{key:"convertAttributeName2UniformName",value:function(r){return r}}]),o}(),eC.POINT="point",eC.LINE="line",eC.GRID="grid",MI),wI=Ha()(bp.prototype,"mesh",[pI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xI=Ha()(bp.prototype,"cullable",[mI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),OI=Ha()(bp.prototype,"transform",[yI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SI=Ha()(bp.prototype,"sceneGraphSystem",[bI,CI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bp))||EI),AW=v("fbvF"),TW=v.n(AW),PW=function(){function o(a,r){qi()(this,o),this.attribute=void 0,this.buffer=void 0;var n=r.buffer,e=r.offset,t=r.stride,i=r.normalized,s=r.size,u=r.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:e||0,stride:t||0,normalized:i||!1,divisor:u||0},s&&(this.attribute.size=s)}return ea()(o,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),Dd,J0,Id,Ql,Q0,Nh,q0,tC,Lf,Qv,_s,jf,_f,nC,kW=(Dd={},pn()(Dd,qe.gl.POINTS,"points"),pn()(Dd,qe.gl.LINES,"lines"),pn()(Dd,qe.gl.LINE_LOOP,"line loop"),pn()(Dd,qe.gl.LINE_STRIP,"line strip"),pn()(Dd,qe.gl.TRIANGLES,"triangles"),pn()(Dd,qe.gl.TRIANGLE_FAN,"triangle fan"),pn()(Dd,qe.gl.TRIANGLE_STRIP,"triangle strip"),Dd),AI=(J0={},pn()(J0,qe.gl.STATIC_DRAW,"static"),pn()(J0,qe.gl.DYNAMIC_DRAW,"dynamic"),pn()(J0,qe.gl.STREAM_DRAW,"stream"),J0),VM=(Id={},pn()(Id,qe.gl.BYTE,"int8"),pn()(Id,qe.gl.UNSIGNED_INT,"int16"),pn()(Id,qe.gl.INT,"int32"),pn()(Id,qe.gl.UNSIGNED_BYTE,"uint8"),pn()(Id,qe.gl.UNSIGNED_SHORT,"uint16"),pn()(Id,qe.gl.UNSIGNED_INT,"uint32"),pn()(Id,qe.gl.FLOAT,"float"),Id),DW=(Ql={},pn()(Ql,qe.gl.ALPHA,"alpha"),pn()(Ql,qe.gl.LUMINANCE,"luminance"),pn()(Ql,qe.gl.LUMINANCE_ALPHA,"luminance alpha"),pn()(Ql,qe.gl.RGB,"rgb"),pn()(Ql,qe.gl.RGBA,"rgba"),pn()(Ql,qe.gl.RGBA4,"rgba4"),pn()(Ql,qe.gl.RGB5_A1,"rgb5 a1"),pn()(Ql,qe.gl.RGB565,"rgb565"),pn()(Ql,qe.gl.DEPTH_COMPONENT,"depth"),pn()(Ql,qe.gl.DEPTH_STENCIL,"depth stencil"),Ql),IW=(Q0={},pn()(Q0,qe.gl.DONT_CARE,"dont care"),pn()(Q0,qe.gl.NICEST,"nice"),pn()(Q0,qe.gl.FASTEST,"fast"),Q0),TI=(Nh={},pn()(Nh,qe.gl.NEAREST,"nearest"),pn()(Nh,qe.gl.LINEAR,"linear"),pn()(Nh,qe.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),pn()(Nh,qe.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),pn()(Nh,qe.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),pn()(Nh,qe.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Nh),PI=(q0={},pn()(q0,qe.gl.REPEAT,"repeat"),pn()(q0,qe.gl.CLAMP_TO_EDGE,"clamp"),pn()(q0,qe.gl.MIRRORED_REPEAT,"mirror"),q0),RW=(tC={},pn()(tC,qe.gl.NONE,"none"),pn()(tC,qe.gl.BROWSER_DEFAULT_WEBGL,"browser"),tC),NW=(Lf={},pn()(Lf,qe.gl.NEVER,"never"),pn()(Lf,qe.gl.ALWAYS,"always"),pn()(Lf,qe.gl.LESS,"less"),pn()(Lf,qe.gl.LEQUAL,"lequal"),pn()(Lf,qe.gl.GREATER,"greater"),pn()(Lf,qe.gl.GEQUAL,"gequal"),pn()(Lf,qe.gl.EQUAL,"equal"),pn()(Lf,qe.gl.NOTEQUAL,"notequal"),Lf),kI=(Qv={},pn()(Qv,qe.gl.FUNC_ADD,"add"),pn()(Qv,qe.gl.MIN_EXT,"min"),pn()(Qv,qe.gl.MAX_EXT,"max"),pn()(Qv,qe.gl.FUNC_SUBTRACT,"subtract"),pn()(Qv,qe.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Qv),rC=(_s={},pn()(_s,qe.gl.ZERO,"zero"),pn()(_s,qe.gl.ONE,"one"),pn()(_s,qe.gl.SRC_COLOR,"src color"),pn()(_s,qe.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),pn()(_s,qe.gl.SRC_ALPHA,"src alpha"),pn()(_s,qe.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),pn()(_s,qe.gl.DST_COLOR,"dst color"),pn()(_s,qe.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),pn()(_s,qe.gl.DST_ALPHA,"dst alpha"),pn()(_s,qe.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),pn()(_s,qe.gl.CONSTANT_COLOR,"constant color"),pn()(_s,qe.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),pn()(_s,qe.gl.CONSTANT_ALPHA,"constant alpha"),pn()(_s,qe.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),pn()(_s,qe.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),_s),LW=(jf={},pn()(jf,qe.gl.NEVER,"never"),pn()(jf,qe.gl.ALWAYS,"always"),pn()(jf,qe.gl.LESS,"less"),pn()(jf,qe.gl.LEQUAL,"lequal"),pn()(jf,qe.gl.GREATER,"greater"),pn()(jf,qe.gl.GEQUAL,"gequal"),pn()(jf,qe.gl.EQUAL,"equal"),pn()(jf,qe.gl.NOTEQUAL,"notequal"),jf),Cp=(_f={},pn()(_f,qe.gl.ZERO,"zero"),pn()(_f,qe.gl.KEEP,"keep"),pn()(_f,qe.gl.REPLACE,"replace"),pn()(_f,qe.gl.INVERT,"invert"),pn()(_f,qe.gl.INCR,"increment"),pn()(_f,qe.gl.DECR,"decrement"),pn()(_f,qe.gl.INCR_WRAP,"increment wrap"),pn()(_f,qe.gl.DECR_WRAP,"decrement wrap"),_f),jW=(nC={},pn()(nC,qe.gl.FRONT,"front"),pn()(nC,qe.gl.BACK,"back"),nC),_W=function(){function o(a,r){qi()(this,o),this.buffer=void 0;var n=r.data,e=r.usage,t=r.type;this.buffer=a.buffer({data:n,usage:AI[e||qe.gl.STATIC_DRAW],type:VM[t||qe.gl.UNSIGNED_BYTE]})}return ea()(o,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(r){var n=r.data,e=r.offset;this.buffer.subdata(n,e)}}]),o}(),FW=v("RIqP"),Ho=v.n(FW),BW=9007199254740991,GW="[object Arguments]",zW="[object Array]",UW="[object Boolean]",VW="[object Date]",HW="[object Error]",WW="[object Function]",$W="[object Map]",XW="[object Number]",KW="[object Object]",YW="[object RegExp]",ZW="[object Set]",JW="[object String]",QW="[object WeakMap]",qW="[object ArrayBuffer]",e$="[object DataView]",t$="[object Float32Array]",n$="[object Float64Array]",r$="[object Int8Array]",i$="[object Int16Array]",a$="[object Int32Array]",o$="[object Uint8Array]",s$="[object Uint8ClampedArray]",u$="[object Uint16Array]",l$="[object Uint32Array]",ro={};ro[t$]=ro[n$]=ro[r$]=ro[i$]=ro[a$]=ro[o$]=ro[s$]=ro[u$]=ro[l$]=!0,ro[GW]=ro[zW]=ro[qW]=ro[UW]=ro[e$]=ro[VW]=ro[HW]=ro[WW]=ro[$W]=ro[XW]=ro[KW]=ro[YW]=ro[ZW]=ro[JW]=ro[QW]=!1;function Pq(o){return function(a){return o(a)}}var c$=Object.prototype,f$=c$.toString;function d$(o){return v$(o)&&h$(o.length)&&!!ro[f$.call(o)]}function h$(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=BW}function v$(o){return!!o&&Z0()(o)==="object"}var HM=d$;function DI(o,a){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);a&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function II(o){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?DI(Object(r),!0).forEach(function(n){pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):DI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var g$=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,RI=0,iC=!1,p$=function(){function o(a,r){var n=this;qi()(this,o),this.reGl=a,this.context=r,this.entity=Object(qe.createEntity)(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var e={};this.context.uniforms.forEach(function(l){var c=l.name,f=l.type,d=l.data,h=l.isReferer,p=l.storageClass;if(p===qe.STORAGE_CLASS.StorageBuffer){if(h)n.textureCache[c]={data:void 0},e["".concat(c,"Size")]=function(){return d.compiledBundle.context.output.textureSize};else{n.textureCache[c]=n.calcDataTexture(c,f,d);var m=n.textureCache[c],b=m.textureWidth,E=m.isOutput;e["".concat(c,"Size")]=[b,b],E&&(n.outputTextureName=c,n.context.needPingpong&&(n.outputTextureName="".concat(c,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(c,f,d)))}e[c]=function(){return iC&&console.log("[".concat(n.entity,"]: ").concat(c," ").concat(n.textureCache[c].id)),n.textureCache[c].texture}}else if(p===qe.STORAGE_CLASS.Uniform){if(d&&(Array.isArray(d)||HM(d))&&d.length>16)throw new Error("invalid data type ".concat(f));e[c]=function(){return l.data}}});var t=this.getOuputDataTexture(),i=t.textureWidth,s=t.texelCount;e.u_OutputTextureSize=[i,i],e.u_OutputTexelCount=s,this.context.output.textureSize=[i,i];var u={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:e,vert:g$,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(u)}return ea()(o,[{key:"run",value:function(){var r=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){r.computeCommand()}),iC&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var a=Io()(xi.a.mark(function n(){var e=this,t,i,s,u,l,c,f,d;return xi.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){t=e.reGl.read()}),!t){p.next=6;break}if(i=this.getOuputDataTexture(),s=i.originalDataLength,u=i.elementsPerTexel,l=i.typedArrayConstructor,c=l===void 0?Float32Array:l,f=[],u!==4)for(d=0;d<t.length;d+=4)u===1?f.push(t[d]):u===2?f.push(t[d],t[d+1]):f.push(t[d],t[d+1],t[d+2]);else f=t;return p.abrupt("return",new c(f.slice(0,s)));case 6:return p.abrupt("return",new Float32Array);case 7:case"end":return p.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"confirmInput",value:function(r,n){var e;this.entity===r.entity?(this.dynamicPingpong=!0,e=this):e=r,this.textureCache[n].id=e.getOuputDataTexture().id,this.textureCache[n].texture=e.getOuputDataTexture().texture,iC&&console.log("[".concat(this.entity,"]: confirm input ").concat(n," from model ").concat(e.entity,", ").concat(e.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=this.context.uniforms.find(function(l){var c=l.name;return c===r});if(t){var i=this.calcDataTexture(r,t.type,n),s=i.texture,u=i.data;this.textureCache[r].data=u,this.textureCache[r].texture=s}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var r=this.context.output.name;this.textureCache[r].id=this.getOuputDataTexture().id,this.textureCache[r].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n,iC&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var r=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=r}},{key:"cloneDataTexture",value:function(r){var n=r.data,e=r.textureWidth;return II(II({},r),{},{id:RI++,texture:this.reGl.texture({width:e,height:e,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(r,n,e){var t=1;n===qe.AST_TOKEN_TYPES.Vector4FloatArray&&(t=4);for(var i=[],s=0;s<e.length;s+=t)t===1?i.push(e[s],0,0,0):t===2?i.push(e[s],e[s+1],0,0):t===3?i.push(e[s],e[s+1],e[s+2],0):t===4&&i.push(e[s],e[s+1],e[s+2],e[s+3]);var u=e.length,l=Math.ceil(u/t),c=Math.ceil(Math.sqrt(l)),f=c*c;l<f&&i.push.apply(i,Ho()(new Array((f-l)*4).fill(0)));var d=this.reGl.texture({width:c,height:c,data:i,type:"float"});return{id:RI++,data:i,originalDataLength:u,typedArrayConstructor:HM(e)?e.constructor:void 0,textureWidth:c,texture:d,texelCount:l,elementsPerTexel:t,isOutput:r===this.context.output.name}}}]),o}(),m$=function(){function o(a,r){qi()(this,o),this.elements=void 0;var n=r.data,e=r.usage,t=r.type,i=r.count;this.elements=a.elements({data:n,usage:AI[e||qe.gl.STATIC_DRAW],type:VM[t||qe.gl.UNSIGNED_BYTE],count:i})}return ea()(o,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(r){var n=r.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),o}(),y$=function(){function o(a,r){qi()(this,o),this.framebuffer=void 0;var n=r.width,e=r.height,t=r.color,i=r.colors,s=r.depth,u=r.stencil,l={width:n,height:e};Array.isArray(i)&&(l.colors=i.map(function(c){return c.get()})),t&&typeof t!="boolean"&&(l.color=t.get()),this.framebuffer=a.framebuffer(l)}return ea()(o,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(r){var n=r.width,e=r.height;this.framebuffer.resize(n,e)}}]),o}();function b$(o){var a=Z0()(o);return o!=null&&(a==="object"||a==="function")}function ey(o){var a={};return Object.keys(o).forEach(function(r){WM(r,o[r],a,"")}),a}function WM(o,a,r,n){if(a===null||typeof a=="number"||typeof a=="boolean"||Array.isArray(a)&&typeof a[0]=="number"||HM(a)||a===""||a.resize!==void 0){r["".concat(n&&n+".").concat(o)]=a;return}b$(a)&&Object.keys(a).forEach(function(e){WM(e,a[e],r,"".concat(n&&n+".").concat(o))}),Array.isArray(a)&&a.forEach(function(e,t){Object.keys(e).forEach(function(i){WM(i,e[i],r,"".concat(n&&n+".").concat(o,"[").concat(t,"]"))})})}function NI(o,a){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);a&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function Ep(o){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?NI(Object(r),!0).forEach(function(n){pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var C$=function(){function o(a,r){qi()(this,o),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=a;var n=r.vs,e=r.fs,t=r.defines,i=r.attributes,s=r.uniforms,u=r.primitive,l=r.count,c=r.elements,f=r.depth,d=r.blend,h=r.stencil,p=r.cull,m=r.instances,b=r.scissor,E=r.viewport,x={};s&&(this.uniforms=ey(s),Object.keys(s).forEach(function(F){x[F]=a.prop(F)}));var O={};Object.keys(i).forEach(function(F){O[F]=i[F].get()});var D=t&&this.generateDefines(t)||"",I={attributes:O,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(D,`
`).concat(e),uniforms:x,vert:`
`.concat(D,`
`).concat(n),primitive:kW[u===void 0?qe.gl.TRIANGLES:u]};m&&(I.instances=m),l&&(I.count=l),c&&(I.elements=c.get()),b&&(I.scissor=b),E&&(I.viewport=E),this.initDepthDrawParams({depth:f},I),this.initBlendDrawParams({blend:d},I),this.initStencilDrawParams({stencil:h},I),this.initCullDrawParams({cull:p},I),this.drawCommand=a(I)}return ea()(o,[{key:"addUniforms",value:function(r){this.uniforms=Ep(Ep({},this.uniforms),ey(r))}},{key:"draw",value:function(r){var n=Ep(Ep({},this.uniforms),ey(r.uniforms||{})),e={};Object.keys(n).forEach(function(t){var i=Z0()(n[t]);i==="boolean"||i==="number"||Array.isArray(n[t])||n[t].BYTES_PER_ELEMENT?e[t]=n[t]:i==="string"||(e[t]=n[t].get())}),this.drawCommand(e)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(r,n){var e=r.depth;e&&(n.depth={enable:e.enable===void 0?!0:!!e.enable,mask:e.mask===void 0?!0:!!e.mask,func:NW[e.func||qe.gl.LESS],range:e.range||[0,1]})}},{key:"initBlendDrawParams",value:function(r,n){var e=r.blend;if(e){var t=e.enable,i=e.func,s=e.equation,u=e.color,l=u===void 0?[0,0,0,0]:u;n.blend={enable:!!t,func:{srcRGB:rC[i&&i.srcRGB||qe.gl.SRC_ALPHA],srcAlpha:rC[i&&i.srcAlpha||qe.gl.SRC_ALPHA],dstRGB:rC[i&&i.dstRGB||qe.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:rC[i&&i.dstAlpha||qe.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:kI[s&&s.rgb||qe.gl.FUNC_ADD],alpha:kI[s&&s.alpha||qe.gl.FUNC_ADD]},color:l}}}},{key:"initStencilDrawParams",value:function(r,n){var e=r.stencil;if(e){var t=e.enable,i=e.mask,s=i===void 0?-1:i,u=e.func,l=u===void 0?{cmp:qe.gl.ALWAYS,ref:0,mask:-1}:u,c=e.opFront,f=c===void 0?{fail:qe.gl.KEEP,zfail:qe.gl.KEEP,zpass:qe.gl.KEEP}:c,d=e.opBack,h=d===void 0?{fail:qe.gl.KEEP,zfail:qe.gl.KEEP,zpass:qe.gl.KEEP}:d;n.stencil={enable:!!t,mask:s,func:Ep(Ep({},l),{},{cmp:LW[l.cmp]}),opFront:{fail:Cp[f.fail],zfail:Cp[f.zfail],zpass:Cp[f.zpass]},opBack:{fail:Cp[h.fail],zfail:Cp[h.zfail],zpass:Cp[h.zpass]}}}}},{key:"initCullDrawParams",value:function(r,n){var e=r.cull;if(e){var t=e.enable,i=e.face,s=i===void 0?qe.gl.BACK:i;n.cull={enable:!!t,face:jW[s]}}}},{key:"generateDefines",value:function(r){return Object.keys(r).map(function(n){return"#define ".concat(n," ").concat(Number(r[n]))}).join(`
`)}}]),o}(),E$=function(){function o(a,r){qi()(this,o),this.texture=void 0,this.width=void 0,this.height=void 0;var n=r.data,e=r.type,t=e===void 0?qe.gl.UNSIGNED_BYTE:e,i=r.width,s=r.height,u=r.flipY,l=u===void 0?!1:u,c=r.format,f=c===void 0?qe.gl.RGBA:c,d=r.mipmap,h=d===void 0?!1:d,p=r.wrapS,m=p===void 0?qe.gl.CLAMP_TO_EDGE:p,b=r.wrapT,E=b===void 0?qe.gl.CLAMP_TO_EDGE:b,x=r.aniso,O=x===void 0?0:x,D=r.alignment,I=D===void 0?1:D,F=r.premultiplyAlpha,H=F===void 0?!1:F,$=r.mag,se=$===void 0?qe.gl.NEAREST:$,de=r.min,Ee=de===void 0?qe.gl.NEAREST:de,Oe=r.colorSpace,$e=Oe===void 0?qe.gl.BROWSER_DEFAULT_WEBGL:Oe;this.width=i,this.height=s;var tt={width:i,height:s,type:VM[t],format:DW[f],wrapS:PI[m],wrapT:PI[E],mag:TI[se],min:TI[Ee],alignment:I,flipY:l,colorSpace:RW[$e],premultiplyAlpha:H,aniso:O};n&&(tt.data=n),typeof h=="number"?tt.mipmap=IW[h]:typeof h=="boolean"&&(tt.mipmap=h),this.texture=a.texture(tt)}return ea()(o,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(r){var n=r.width,e=r.height;this.texture.resize(n,e),this.width=n,this.height=e}},{key:"destroy",value:function(){this.texture.destroy()}}]),o}(),LI,jI,_I,w$=(LI=Object(Zr.injectable)(),LI(jI=(_I=function(){function o(){var a=this;qi()(this,o),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var r=Io()(xi.a.mark(function n(e){return xi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!e.uniforms){i.next=3;break}return i.next=3,Promise.all(Object.keys(e.uniforms).map(function(){var s=Io()(xi.a.mark(function u(l){var c;return xi.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(e.uniforms[l]&&e.uniforms[l].load!==void 0)){d.next=5;break}return d.next=3,e.uniforms[l].load();case 3:c=d.sent,e.uniforms[l]=c;case 5:case"end":return d.stop()}},u)}));return function(u){return s.apply(this,arguments)}}()));case 3:return i.abrupt("return",new C$(a.gl,e));case 4:case"end":return i.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new PW(a.gl,r)},this.createBuffer=function(r){return new _W(a.gl,r)},this.createElements=function(r){return new m$(a.gl,r)},this.createTexture2D=function(r){return new E$(a.gl,r)},this.createFramebuffer=function(r){return new y$(a.gl,r)},this.useFramebuffer=function(r,n){a.gl({framebuffer:r?r.get():null})(n)},this.createComputeModel=function(){var r=Io()(xi.a.mark(function n(e){return xi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new p$(a.gl,e));case 1:case"end":return i.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.clear=function(r){var n=r.color,e=r.depth,t=r.stencil,i=r.framebuffer,s=i===void 0?null:i,u={color:n,depth:e,stencil:t};u.framebuffer=s===null?s:s.get(),a.gl.clear(u)},this.setScissor=function(r){a.gl&&a.gl._gl&&(r.enable&&r.box?(a.gl._gl.enable(qe.gl.SCISSOR_TEST),a.gl._gl.scissor(r.box.x,r.box.y,r.box.width,r.box.height)):a.gl._gl.disable(qe.gl.SCISSOR_TEST),a.gl._refresh())},this.viewport=function(r){var n=r.x,e=r.y,t=r.width,i=r.height;a.gl&&a.gl._gl&&(a.gl._gl.viewport(n,e,t,i),a.gl._refresh())},this.readPixels=function(r){var n=r.framebuffer,e=r.x,t=r.y,i=r.width,s=r.height,u={x:e,y:t,width:i,height:s};return n&&(u.framebuffer=n.get()),a.gl.read(u)},this.getCanvas=function(){return a.$canvas},this.getGLContext=function(){return a.gl._gl},this.destroy=function(){a.gl&&(a.gl.destroy(),a.inited=!1)}}return ea()(o,[{key:"init",value:function(){var a=Io()(xi.a.mark(function n(e){return xi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.inited){i.next=2;break}return i.abrupt("return");case 2:return this.$canvas=e.canvas,i.next=5,new Promise(function(s,u){TW()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(c,f){(c||!f)&&u(c),s(f)}})});case 5:this.gl=i.sent,this.inited=!0;case 7:case"end":return i.stop()}},n,this)}));function r(n){return a.apply(this,arguments)}return r}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),o}(),_I))||jI);function x$(){return typeof window!="undefined"}function O$(o,a,r,n){if(!!x$()){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",o),n&&(t.id=n),t.onload=function(){a&&a()},t.onerror=function(i){r&&r("Unable to load script '".concat(o,"'"),i)},e.appendChild(t)}}function S$(o,a){return new Promise(function(r,n){O$(o,function(){r()},function(e,t){n(t)})})}var aC,M$=function(){return $M.apply(this,arguments)};function $M(){return $M=Io()(xi.a.mark(function o(){return xi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!aC){r.next=2;break}return r.abrupt("return",aC);case 2:return r.next=4,S$("https://preview.babylonjs.com/glslang/glslang.js");case 4:return aC=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),r.abrupt("return",aC);case 6:case"end":return r.stop()}},o)})),$M.apply(this,arguments)}var A$=function(){function o(a,r){qi()(this,o),this.engine=a,this.options=r,this.attribute=void 0,this.buffer=void 0;var n=r,e=n.buffer,t=n.offset,i=n.stride,s=n.normalized,u=n.size,l=n.divisor,c=n.arrayStride,f=n.attributes,d=n.stepMode;this.buffer=e,this.attribute={buffer:e.get(),offset:t||0,stride:i||0,normalized:s||!1,divisor:l||0,arrayStride:c||0,attributes:f,stepMode:d||"vertex"},u&&(this.attribute.size=u)}return ea()(o,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),wp=function(){function o(a,r){qi()(this,o),this.engine=a,this.options=r,this.buffer=void 0;var n=r,e=n.data,t=n.usage,i=n.type;this.buffer=this.createBuffer(e instanceof Array?new Float32Array(e):e,t||or.BufferUsage.Vertex|or.BufferUsage.CopyDst)}return ea()(o,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(r){var n=r.data,e=r.offset;this.setSubData(this.buffer,e,n instanceof Array?new Float32Array(n):n)}},{key:"createBuffer",value:function(r,n){var e=r.byteLength%4,t={size:r.byteLength+e,usage:n},i=this.engine.device.createBuffer(t);return this.setSubData(i,0,r),i}},{key:"setSubData",value:function(r,n,e){var t=qe.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue;t.writeBuffer(r,n,e)}}]),o}();function T$(o){return typeof o=="number"}var P$=function(){function o(a,r){qi()(this,o),this.engine=a,this.context=r,this.entity=Object(qe.createEntity)(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return ea()(o,[{key:"init",value:function(){var a=Io()(xi.a.mark(function n(){var e=this,t,i,s,u,l,c,f;return xi.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:t=h.sent,i=t.computeStage,s=this.context.uniforms.filter(function(p){return p.storageClass===qe.STORAGE_CLASS.StorageBuffer}),u=this.context.uniforms.filter(function(p){return p.storageClass===qe.STORAGE_CLASS.Uniform}),l=u.length?1:0,this.bindGroupEntries=[],l&&(c=0,f=[],u.forEach(function(p){if(T$(p.data))e.uniformGPUBufferLayout.push({name:p.name,offset:c}),c+=4,f.push(p.data);else{var m,b=((m=p.data)===null||m===void 0?void 0:m.length)||1;b===3&&(b=4,p.data.push(0));var E=c/4%4;if(E>0){var x=4-E;if(b>1&&b<=x)b===2&&(x===3&&(c+=4,f.push(0)),f.push.apply(f,Ho()(p.data)),e.uniformGPUBufferLayout.push({name:p.name,offset:c}));else{for(var O=0;O<x;O++)c+=4,f.push(0);f.push.apply(f,Ho()(p.data)),e.uniformGPUBufferLayout.push({name:p.name,offset:c})}}c+=4*b}}),this.uniformBuffer=new wp(this.engine,{data:f instanceof Array?new Float32Array(f):f,usage:or.BufferUsage.Uniform|or.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),s.forEach(function(p){if(p.data!==null&&(p.type===qe.AST_TOKEN_TYPES.Vector4FloatArray||p.type===qe.AST_TOKEN_TYPES.FloatArray)){var m;p.name===e.context.output.name?(m=new wp(e.engine,{data:isFinite(Number(p.data))?[p.data]:p.data,usage:or.BufferUsage.Storage|or.BufferUsage.CopyDst|or.BufferUsage.CopySrc}),e.outputBuffer=m,e.context.output={name:p.name,length:isFinite(Number(p.data))?1:p.data.length,typedArrayConstructor:Float32Array,gpuBuffer:m.get()}):p.isReferer?p.data.model&&p.data.model.outputBuffer&&(m=p.data.model.outputBuffer):m=new wp(e.engine,{data:isFinite(Number(p.data))?[p.data]:p.data,usage:or.BufferUsage.Storage|or.BufferUsage.CopyDst|or.BufferUsage.CopySrc}),e.vertexBuffers[p.name]=m,e.bindGroupEntries.push({binding:l,resource:{name:p.name,refer:m?void 0:p.data,buffer:m?m.get():void 0}}),l++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:i}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return h.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"destroy",value:function(){var r=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(n){return r.vertexBuffers[n].destroy()})}},{key:"readData",value:function(){var a=Io()(xi.a.mark(function n(){var e,t,i,s,u,l,c,f,d,h;return xi.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(e=this.context.output,!e){m.next=16;break}if(t=e.length,i=e.typedArrayConstructor,s=e.gpuBuffer,!s){m.next=16;break}return u=t*i.BYTES_PER_ELEMENT,l=this.engine.device.createBuffer({size:u,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=this.engine.device.createCommandEncoder(),c.copyBufferToBuffer(s,0,l,0,u),f=qe.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue,f.submit([c.finish()]),m.next=12,l.mapAsync(or.MapMode.Read);case 12:return d=l.getMappedRange(),h=new i(d.slice(0)),l.unmap(),m.abrupt("return",h);case 16:return m.abrupt("return",new Float32Array);case 17:case"end":return m.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"run",value:function(){if(this.engine.currentComputePass){var r;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(r=this.engine.currentComputePass).dispatch.apply(r,Ho()(this.context.dispatch))}}},{key:"updateBuffer",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=this.vertexBuffers[r];t&&t.subData({data:n,offset:e})}},{key:"updateUniform",value:function(r,n){var e=this.uniformGPUBufferLayout.find(function(t){return t.name===r});e&&this.uniformBuffer.subData({data:Number.isFinite(n)?new Float32Array([n]):new Float32Array(n),offset:e.offset})}},{key:"confirmInput",value:function(r,n){var e=this.vertexBuffers[n],t=r.outputBuffer;if(e&&t&&e!==t){var i=this.engine.device.createCommandEncoder(),s=r.context.output,u=s.length,l=s.typedArrayConstructor,c=u*l.BYTES_PER_ELEMENT;i.copyBufferToBuffer(t.get(),0,e.get(),0,c);var f=qe.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue;f.submit([i.finish()])}}},{key:"compileShaderToSpirV",value:function(r,n,e){return this.compileRawShaderToSpirV(e+r,n)}},{key:"compileRawShaderToSpirV",value:function(r,n){return this.engine.glslang.compileGLSL(r,n)}},{key:"compileComputePipelineStageDescriptor",value:function(){var a=Io()(xi.a.mark(function n(e){var t,i;return xi.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e,i=`#version 450
`,this.engine.options.useWGSL){u.next=6;break}return u.next=5,this.compileShaderToSpirV(e,"compute",i);case 5:t=u.sent;case 6:return u.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:qe.isSafari}),entryPoint:"main"}});case 7:case"end":return u.stop()}},n,this)}));function r(n){return a.apply(this,arguments)}return r}()}]),o}(),k$=function(){function o(a,r){qi()(this,o),this.engine=a,this.options=r,this.indexCount=void 0,this.buffer=void 0;var n=r,e=n.data,t=n.usage,i=n.type,s=n.count;this.indexCount=s||0,this.buffer=new wp(a,{data:e instanceof Array?new Uint16Array(e):e,usage:or.BufferUsage.Index|or.BufferUsage.CopyDst})}return ea()(o,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),D$=function(){function o(a,r){qi()(this,o),this.engine=a,this.options=r,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var n=r,e=n.width,t=n.height,i=n.color,s=n.colors,u=n.depth,l=n.stencil;i&&(this.colorTexture=i),u&&(this.depthTexture=u)}return ea()(o,[{key:"get",value:function(){var r,n;return{color:(r=this.colorTexture)===null||r===void 0?void 0:r.get(),depth:(n=this.depthTexture)===null||n===void 0?void 0:n.get()}}},{key:"destroy",value:function(){var r,n;(r=this.colorTexture)===null||r===void 0||r.destroy(),(n=this.depthTexture)===null||n===void 0||n.destroy()}},{key:"resize",value:function(r){var n=r.width,e=r.height;if(n!==this.width||e!==this.height){var t,i;(t=this.colorTexture)===null||t===void 0||t.resize({width:n,height:e}),(i=this.depthTexture)===null||i===void 0||i.resize({width:n,height:e})}this.width=n,this.height=e}}]),o}(),Rd,Ff,qv,Tu,xp,oC,ty,I$=(Rd={},pn()(Rd,qe.gl.POINTS,or.PrimitiveTopology.PointList),pn()(Rd,qe.gl.LINES,or.PrimitiveTopology.LineList),pn()(Rd,qe.gl.LINE_LOOP,or.PrimitiveTopology.LineList),pn()(Rd,qe.gl.LINE_STRIP,or.PrimitiveTopology.LineStrip),pn()(Rd,qe.gl.TRIANGLES,or.PrimitiveTopology.TriangleList),pn()(Rd,qe.gl.TRIANGLE_FAN,or.PrimitiveTopology.TriangleList),pn()(Rd,qe.gl.TRIANGLE_STRIP,or.PrimitiveTopology.TriangleStrip),Rd),R$=(Ff={},pn()(Ff,qe.gl.NEVER,or.CompareFunction.Never),pn()(Ff,qe.gl.ALWAYS,or.CompareFunction.Always),pn()(Ff,qe.gl.LESS,or.CompareFunction.Less),pn()(Ff,qe.gl.LEQUAL,or.CompareFunction.LessEqual),pn()(Ff,qe.gl.GREATER,or.CompareFunction.Greater),pn()(Ff,qe.gl.GEQUAL,or.CompareFunction.GreaterEqual),pn()(Ff,qe.gl.EQUAL,or.CompareFunction.Equal),pn()(Ff,qe.gl.NOTEQUAL,or.CompareFunction.NotEqual),Ff),FI=(qv={},pn()(qv,qe.gl.FUNC_ADD,or.BlendOperation.Add),pn()(qv,qe.gl.MIN_EXT,or.BlendOperation.Min),pn()(qv,qe.gl.MAX_EXT,or.BlendOperation.Max),pn()(qv,qe.gl.FUNC_SUBTRACT,or.BlendOperation.Subtract),pn()(qv,qe.gl.FUNC_REVERSE_SUBTRACT,or.BlendOperation.ReverseSubtract),qv),sC=(Tu={},pn()(Tu,qe.gl.ZERO,or.BlendFactor.Zero),pn()(Tu,qe.gl.ONE,or.BlendFactor.One),pn()(Tu,qe.gl.SRC_COLOR,or.BlendFactor.SrcColor),pn()(Tu,qe.gl.ONE_MINUS_SRC_COLOR,or.BlendFactor.OneMinusSrcColor),pn()(Tu,qe.gl.SRC_ALPHA,or.BlendFactor.SrcAlpha),pn()(Tu,qe.gl.ONE_MINUS_SRC_ALPHA,or.BlendFactor.OneMinusSrcAlpha),pn()(Tu,qe.gl.DST_COLOR,or.BlendFactor.DstColor),pn()(Tu,qe.gl.ONE_MINUS_DST_COLOR,or.BlendFactor.OneMinusDstColor),pn()(Tu,qe.gl.DST_ALPHA,or.BlendFactor.DstAlpha),pn()(Tu,qe.gl.ONE_MINUS_DST_ALPHA,or.BlendFactor.OneMinusDstAlpha),pn()(Tu,qe.gl.CONSTANT_COLOR,or.BlendFactor.BlendColor),pn()(Tu,qe.gl.ONE_MINUS_CONSTANT_COLOR,or.BlendFactor.OneMinusBlendColor),pn()(Tu,qe.gl.SRC_ALPHA_SATURATE,or.BlendFactor.SrcAlphaSaturated),Tu),N$=(xp={},pn()(xp,qe.gl.ALPHA,"r8unorm"),pn()(xp,qe.gl.RGBA,"rgba8unorm"),pn()(xp,qe.gl.DEPTH_COMPONENT,"depth32float"),pn()(xp,qe.gl.DEPTH_STENCIL,"depth24plus-stencil8"),xp),BI=(oC={},pn()(oC,qe.gl.NEAREST,"nearest"),pn()(oC,qe.gl.LINEAR,"linear"),oC),XM=(ty={},pn()(ty,qe.gl.REPEAT,"repeat"),pn()(ty,qe.gl.CLAMP_TO_EDGE,"clamp-to-edge"),pn()(ty,qe.gl.MIRRORED_REPEAT,"mirror-repeat"),ty);function L$(o){var a=o.cull;if(!a||!a.enable)return or.CullMode.None;if(a.face)return a.face===qe.gl.FRONT?or.CullMode.Front:or.CullMode.Back}function j$(o){var a=o.depth,r=o.stencil,n={compare:or.CompareFunction.Always,depthFailOp:or.StencilOperation.Keep,failOp:or.StencilOperation.Keep,passOp:or.StencilOperation.Keep};return{depthWriteEnabled:a&&a.enable,depthCompare:R$[(a==null?void 0:a.func)||qe.gl.ALWAYS],format:or.TextureFormat.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function _$(o,a){var r=o.blend;return[{format:a,alphaBlend:{srcFactor:sC[r&&r.func&&r.func.srcAlpha||qe.gl.ONE],dstFactor:sC[r&&r.func&&r.func.dstAlpha||qe.gl.ZERO],operation:FI[r&&r.equation&&r.equation.alpha||qe.gl.FUNC_ADD]},colorBlend:{srcFactor:sC[r&&r.func&&r.func.srcRGB||qe.gl.ONE],dstFactor:sC[r&&r.func&&r.func.dstRGB||qe.gl.ZERO],operation:FI[r&&r.equation&&r.equation.rgb||qe.gl.FUNC_ADD]},writeMask:or.ColorWrite.All}]}function GI(o,a){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);a&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function Op(o){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?GI(Object(r),!0).forEach(function(n){pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}function F$(o){for(var a=0,r=arguments.length,n=new Array(r>1?r-1:0),e=1;e<r;e++)n[e-1]=arguments[e];for(var t=0,i=n;t<i.length;t++){var s=i[t];a+=s.length}for(var u=new o(a),l=0,c=0,f=n;c<f.length;c++){var d=f[c];u.set(d,l),l+=d.length}return u}var B$=function(){function o(a,r){qi()(this,o),this.engine=a,this.options=r,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return ea()(o,[{key:"init",value:function(){var a=Io()(xi.a.mark(function n(){var e=this,t,i,s,u,l,c,f,d,h,p,m,b,E,x,O,D,I,F;return xi.a.wrap(function($){for(;;)switch($.prev=$.next){case 0:return t=this.options,i=t.vs,s=t.fs,u=t.attributes,l=t.uniforms,c=t.primitive,f=t.count,d=t.elements,h=t.depth,p=t.blend,m=t.stencil,b=t.cull,E=t.instances,$.next=3,this.compilePipelineStageDescriptor(i,s,null);case 3:x=$.sent,O=x.vertexStage,D=x.fragmentStage,l&&this.buildUniformBindGroup(l),d&&(this.indexBuffer=d.get(),this.indexCount=d.indexCount),I={vertexBuffers:Object.keys(u).map(function(se,de){var Ee=u[se],Oe=Ee.get(),$e=Oe.arrayStride,tt=Oe.stepMode,Le=Oe.attributes;return e.attributeCache[se]=Ee,{arrayStride:$e,stepMode:tt,attributes:Le}})},F={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:I$[c||qe.gl.TRIANGLES],rasterizationState:Op(Op({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:L$({cull:b})}),depthStencilState:j$({depth:h,stencil:m}),colorStates:_$({blend:p},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:O,fragmentStage:D,vertexState:I},this.renderPipeline=this.engine.device.createRenderPipeline(F);case 11:case"end":return $.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"addUniforms",value:function(r){this.uniforms=Op(Op({},this.uniforms),ey(r))}},{key:"draw",value:function(r){var n=this,e=this.engine.getCurrentRenderPass(),t=Op(Op({},this.uniforms),ey(r.uniforms||{})),i=[];Object.keys(t).forEach(function(s){var u=Z0()(t[s]);if(u==="boolean"||u==="number"||Array.isArray(t[s])||t[s].BYTES_PER_ELEMENT){var l,c=(l=n.uniformGPUBufferLayout.find(function(E){var x=E.name;return x===s}))===null||l===void 0?void 0:l.offset;c!==null&&n.uniformBuffer.subData({data:t[s],offset:c})}else{var f,d=(f=n.uniformGPUBufferLayout.find(function(E){var x=E.name;return x===s}))===null||f===void 0?void 0:f.offset;if(d!==null){var h=t[s].get(),p=h.color||h,m=p.texture,b=p.sampler;b&&(i.push({binding:d,resource:b}),d++),i.push({binding:d,resource:m.createView()})}}}),this.uniformBuffer&&(i[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:i}),this.renderPipeline&&e.setPipeline(this.renderPipeline),e.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&e.setIndexBuffer(this.indexBuffer.get(),or.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(s,u){e.setVertexBuffer(0+u,n.attributeCache[s].get().buffer,0)}),this.indexBuffer?e.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):e.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var a=Io()(xi.a.mark(function n(e,t,i){var s,u,l;return xi.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=`#version 450
`,u=e,l=t,this.engine.options.useWGSL){f.next=10;break}return f.next=6,this.compileShaderToSpirV(e,"vertex",s);case 6:return u=f.sent,f.next=9,this.compileShaderToSpirV(t,"fragment",s);case 9:l=f.sent;case 10:return f.abrupt("return",this.createPipelineStageDescriptor(u,l));case 11:case"end":return f.stop()}},n,this)}));function r(n,e,t){return a.apply(this,arguments)}return r}()},{key:"compileShaderToSpirV",value:function(r,n,e){return this.compileRawShaderToSpirV(e+r,n)}},{key:"compileRawShaderToSpirV",value:function(r,n){return this.engine.glslang.compileGLSL(r,n)}},{key:"createPipelineStageDescriptor",value:function(r,n){return{vertexStage:{module:this.engine.device.createShaderModule({code:r,isWHLSL:qe.isSafari}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:qe.isSafari}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:or.FrontFace.CCW,cullMode:or.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(r){var n=this,e=0,t=F$.apply(void 0,[Float32Array].concat(Ho()(Object.keys(r).map(function(u){return r[u]?(n.uniformGPUBufferLayout.push({name:u,offset:e}),e+=(r[u].length||1)*4,r[u]):[]})))),i=[],s=!1;t.length&&(s=!0,i.push({binding:0,visibility:or.ShaderStage.Fragment|or.ShaderStage.Vertex,type:or.BindingType.UniformBuffer})),Object.keys(r).filter(function(u){return r[u]===null}).forEach(function(u,l){n.uniformGPUBufferLayout.push({name:u,offset:l*2+(s?1:0)}),i.push({binding:l*2+(s?1:0),visibility:or.ShaderStage.Fragment,type:or.BindingType.Sampler},{binding:l*2+(s?1:0)+1,visibility:or.ShaderStage.Fragment,type:or.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:i}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),s&&(this.uniformBuffer=new wp(this.engine,{data:t instanceof Array?new Float32Array(t):t,usage:or.BufferUsage.Uniform|or.BufferUsage.CopyDst}))}}]),o}(),G$=function(){function o(a,r){qi()(this,o),this.engine=a,this.options=r,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return ea()(o,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(r){var n=r.width,e=r.height;(n!==this.width||e!==this.height)&&(this.destroy(),this.createTexture()),this.width=n,this.height=e}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var r=this.options,n=r.data,e=r.type,t=e===void 0?qe.gl.UNSIGNED_BYTE:e,i=r.width,s=r.height,u=r.flipY,l=u===void 0?!1:u,c=r.format,f=c===void 0?qe.gl.RGBA:c,d=r.mipmap,h=d===void 0?!1:d,p=r.wrapS,m=p===void 0?qe.gl.CLAMP_TO_EDGE:p,b=r.wrapT,E=b===void 0?qe.gl.CLAMP_TO_EDGE:b,x=r.aniso,O=x===void 0?0:x,D=r.alignment,I=D===void 0?1:D,F=r.premultiplyAlpha,H=F===void 0?!1:F,$=r.mag,se=$===void 0?qe.gl.NEAREST:$,de=r.min,Ee=de===void 0?qe.gl.NEAREST:de,Oe=r.colorSpace,$e=Oe===void 0?qe.gl.BROWSER_DEFAULT_WEBGL:Oe,tt=r.usage;this.width=i,this.height=s,this.texture=this.engine.device.createTexture({size:[i,s,1],mipLevelCount:1,sampleCount:1,dimension:or.TextureDimension.E2d,format:N$[f],usage:tt||or.TextureUsage.Sampled|or.TextureUsage.CopyDst}),(!tt||tt&or.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:XM[m],addressModeV:XM[E],addressModeW:XM[m],magFilter:BI[se],minFilter:BI[Ee],maxAnisotropy:O}))}}]),o}(),zI,UI,VI,z$=(zI=Object(Zr.injectable)(),zI(UI=(VI=function(){function o(){var a=this;qi()(this,o),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:Infinity,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(r){var n=r.framebuffer,e=r.color,t=r.depth,i=r.stencil;a.options.supportCompute&&a.startComputePass(),a.currentRenderTarget?(a.currentRenderPass&&a.endRenderTargetRenderPass(),a.startRenderTargetRenderPass(a.currentRenderTarget,e||null,!!t,!!i)):(a.mainColorAttachments[0].loadValue=e||or.LoadOp.Load,a.mainDepthAttachment.depthLoadValue=t||or.LoadOp.Load,a.mainDepthAttachment.stencilLoadValue=i?a.clearStencilValue:or.LoadOp.Load,a.mainRenderPass&&a.endMainRenderPass(),a.startMainRenderPass())},this.createModel=function(){var r=Io()(xi.a.mark(function n(e){var t;return xi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=new B$(a,e),s.next=3,t.init();case 3:return s.abrupt("return",t);case 4:case"end":return s.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new A$(a,r)},this.createBuffer=function(r){return new wp(a,r)},this.createElements=function(r){return new k$(a,r)},this.createTexture2D=function(r){return new G$(a,r)},this.createFramebuffer=function(r){return new D$(a,r)},this.useFramebuffer=function(r,n){a.currentRenderTarget&&a.unbindFramebuffer(a.currentRenderTarget),a.currentRenderTarget=r,a.currentRenderTargetViewDescriptor={dimension:or.TextureViewDimension.E2d,arrayLayerCount:1,aspect:or.TextureAspect.All},a.currentRenderPass=null,n()},this.createComputeModel=function(){var r=Io()(xi.a.mark(function n(e){var t;return xi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=new P$(a,e),s.next=3,t.init();case 3:return s.abrupt("return",t);case 4:case"end":return s.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.getCanvas=function(){return a.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(r){var n=r.x,e=r.y,t=r.width,i=r.height;if(!a.currentRenderPass)a.transientViewport={x:n,y:e,width:t,height:i};else if(a.transientViewport.x!==Infinity){var s=a.getCurrentRenderPass();s.setViewport(a.transientViewport.x,a.transientViewport.y,a.transientViewport.width,a.transientViewport.height,0,1)}else if(n!==a.cachedViewport.x||e!==a.cachedViewport.y||t!==a.cachedViewport.width||i!==a.cachedViewport.height){a.cachedViewport={x:n,y:e,width:t,height:i};var u=a.getCurrentRenderPass();u.setViewport(n,e,t,i,0,1)}},this.readPixels=function(r){throw new Error("Method not implemented.")}}return ea()(o,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var a=Io()(xi.a.mark(function n(e){return xi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,i.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return i.stop()}},n,this)}));function r(n){return a.apply(this,arguments)}return r}()},{key:"setScissor",value:function(r){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(r){return r.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),qe.isSafari?this.device.getQueue().submit(this.commandBuffers.filter(function(r){return r})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(r){return r}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var a=Io()(xi.a.mark(function n(){var e,t;return xi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,M$();case 2:return this.glslang=s.sent,s.next=5,(e=navigator)===null||e===void 0||(t=e.gpu)===null||t===void 0?void 0:t.requestAdapter();case 5:return this.adapter=s.sent,s.next=8,this.adapter.requestDevice();case 8:this.device=s.sent;case 9:case"end":return s.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(qe.isSafari?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:or.TextureUsage.OutputAttachment|or.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var r={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:or.TextureDimension.E2d,format:or.TextureFormat.BGRA8Unorm,usage:or.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(r),this.mainColorAttachments=[{attachment:qe.isSafari?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:or.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:qe.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:or.StoreOp.Store}];var n={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:or.TextureDimension.E2d,format:qe.isSafari?"depth32float-stencil8":or.TextureFormat.Depth24PlusStencil8,usage:or.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(n),this.mainDepthAttachment={attachment:qe.isSafari?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:or.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:or.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=qe.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=qe.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(r,n,e){var t,i,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=(t=r.get().color)===null||t===void 0?void 0:t.texture,l;u&&(l=u.createView(this.currentRenderTargetViewDescriptor));var c=(i=r.get().depth)===null||i===void 0?void 0:i.texture,f;c&&(f=c.createView());var d=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:l,loadValue:n!==null?n:or.LoadOp.Load,storeOp:or.StoreOp.Store}],depthStencilAttachment:c&&f?{attachment:f,depthLoadValue:e?this.clearDepthValue:or.LoadOp.Load,depthStoreOp:or.StoreOp.Store,stencilLoadValue:s?this.clearStencilValue:or.LoadOp.Load,stencilStoreOp:or.StoreOp.Store}:void 0});this.currentRenderPass=d,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(r){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=Infinity,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),o}(),VI))||UI),U$=v("J4zp"),V$=v.n(U$),H$=v("7W2i"),Lh=v.n(H$),W$=v("a1gu"),jh=v.n(W$),$$=v("Nsbk"),eu=v.n($$),HI,WI;function X$(o){var a=K$();return function(){var n=eu()(o),e;if(a){var t=eu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return jh()(this,e)}}function K$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var KM=4/64,$I=1-KM*2,Y$=(HI=Object(Zr.injectable)(),HI(WI=function(o){Lh()(r,o);var a=X$(r);function r(){return qi()(this,r),a.apply(this,arguments)}return ea()(r,[{key:"onEntityCreated",value:function(){var e=this.config,t=e.widthSegments,i=t===void 0?1:t,s=e.heightSegments,u=s===void 0?1:s,l=e.depthSegments,c=l===void 0?1:l,f=e.halfExtents,d=f===void 0?An.d.fromValues(.5,.5,.5):f,h=i,p=u,m=c,b=V$()(d,3),E=b[0],x=b[1],O=b[2],D=[An.d.fromValues(-E,-x,O),An.d.fromValues(E,-x,O),An.d.fromValues(E,x,O),An.d.fromValues(-E,x,O),An.d.fromValues(E,-x,-O),An.d.fromValues(-E,-x,-O),An.d.fromValues(-E,x,-O),An.d.fromValues(E,x,-O)],I=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],F=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],H={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},$=[],se=[],de=[],Ee=[],Oe=[],$e=0,tt=function(tn,bn,dn){var en,Vn,jt,Cn;for(jt=0;jt<=bn;jt++)for(Cn=0;Cn<=dn;Cn++){var jn=An.d.create(),Lr=An.d.create(),Pr=An.d.create(),Wr=An.d.create();An.d.lerp(jn,D[I[tn][0]],D[I[tn][1]],jt/bn),An.d.lerp(Lr,D[I[tn][0]],D[I[tn][2]],Cn/dn),An.d.sub(Pr,Lr,D[I[tn][0]]),An.d.add(Wr,jn,Pr),en=jt/bn,Vn=Cn/dn,$.push(Wr[0],Wr[1],Wr[2]),se.push(F[tn][0],F[tn][1],F[tn][2]),de.push(en,Vn),en/=3,Vn/=3,en=en*$I+KM,Vn=Vn*$I+KM,en+=tn%3/3,Vn+=Math.floor(tn/3)/3,Ee.push(en,Vn),jt<bn&&Cn<dn&&(Oe.push($e+dn+1,$e+1,$e),Oe.push($e+dn+1,$e+dn+2,$e+1)),$e++}};tt(H.FRONT,h,p),tt(H.BACK,h,p),tt(H.TOP,h,m),tt(H.BOTTOM,h,m),tt(H.RIGHT,m,p),tt(H.LEFT,m,p);var Le=Object(qe.generateAABBFromVertices)($),it=this.getComponent();it.indices=Uint32Array.from(Oe),it.aabb=Le,it.vertexCount=$e,it.attributes=[{dirty:!0,name:"position",data:Float32Array.from($),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(se),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(de),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),r}(Ih))||WI);function Z$(o,a){if(!o&&!a)throw new Error("Please specify valid arguments for parameters a and b.");if(!a||a.length===0)return o;if(!o||o.length===0)return a;if(Object.prototype.toString.call(o)!==Object.prototype.toString.call(a))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var r=new o.constructor(o.length+a.length);return r.set(o),r.set(a,o.length),r}var XI,KI;function J$(o){var a=Q$();return function(){var n=eu()(o),e;if(a){var t=eu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return jh()(this,e)}}function Q$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var q$=(XI=Object(Zr.injectable)(),XI(KI=function(o){Lh()(r,o);var a=J$(r);function r(){return qi()(this,r),a.apply(this,arguments)}return ea()(r,[{key:"onEntityCreated",value:function(){var e=this.config.geometries,t=e===void 0?[]:e,i=this.getComponent();i.aabb=new qe.AABB;var s=[],u=[],l=0;t.forEach(function(c){var f=c.aabb,d=c.indices,h=c.vertexCount,p=c.attributes;i.aabb.add(f),i.vertexCount+=h,d&&u.push.apply(u,Ho()(d.map(function(m){return m+l}))),l+=h,p.forEach(function(m,b){s[b]?m.data&&(BM(m.data)?s[b].push(m.data):J3(m.data)?s[b].data=Z$(s[b].data,m.data):s[b].data=s[b].data.concat(m.data)):(s[b]=m,s[b].dirty=!0)})}),i.attributes=s,i.indices=Uint32Array.from(u),i.dirty=!0}}]),r}(Ih))||KI),YI,ZI;function eX(o){var a=tX();return function(){var n=eu()(o),e;if(a){var t=eu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return jh()(this,e)}}function tX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var nX=(YI=Object(Zr.injectable)(),YI(ZI=function(o){Lh()(r,o);var a=eX(r);function r(){return qi()(this,r),a.apply(this,arguments)}return ea()(r,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.halfExtents,i=t===void 0?[.5,.5]:t,s=e.widthSegments,u=s===void 0?5:s,l=e.lengthSegments,c=l===void 0?5:l,f=[],d=[],h=[],p=[],m=0,b=0;b<=u;b++)for(var E=0;E<=c;E++){var x=-i[0]+2*i[0]*b/u,O=0,D=-(-i[1]+2*i[1]*E/c),I=b/u,F=E/c;f.push(x,O,D),d.push(0,1,0),h.push(I,F),b<u&&E<c&&(p.push(m+c+1,m+1,m),p.push(m+c+1,m+c+2,m+1)),m++}var H=Object(qe.generateAABBFromVertices)(f),$=this.getComponent();$.indices=Uint32Array.from(p),$.aabb=H,$.vertexCount=m,$.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(h),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),r}(Ih))||ZI),JI,QI;function rX(o){var a=iX();return function(){var n=eu()(o),e;if(a){var t=eu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return jh()(this,e)}}function iX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var aX=(JI=Object(Zr.injectable)(),JI(QI=function(o){Lh()(r,o);var a=rX(r);function r(){return qi()(this,r),a.apply(this,arguments)}return ea()(r,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.radius,i=t===void 0?.5:t,s=e.latitudeBands,u=s===void 0?16:s,l=e.longitudeBands,c=l===void 0?16:l,f=[],d=[],h=[],p=[],m=0;m<=u;m++)for(var b=m*Math.PI/u,E=Math.sin(b),x=Math.cos(b),O=0;O<=c;O++){var D=O*2*Math.PI/c-Math.PI/2,I=Math.sin(D),F=Math.cos(D),H=F*E,$=x,se=I*E,de=1-O/c,Ee=1-m/u;f.push(H*i,$*i,se*i),d.push(H,$,se),h.push(de,Ee)}for(var Oe=0;Oe<u;++Oe)for(var $e=0;$e<c;++$e){var tt=Oe*(c+1)+$e,Le=tt+c+1;p.push(tt+1,Le,tt),p.push(tt+1,Le+1,Le)}var it=Object(qe.generateAABBFromVertices)(f),It=this.getComponent();It.indices=Uint32Array.from(p),It.aabb=it,It.vertexCount=f.length/3,It.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(h),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),r}(Ih))||QI),oX=v("PJYZ"),Wc=v.n(oX),qI,eR,tR,nR,uC,rR,iR,aR;function sX(o){var a=uX();return function(){var n=eu()(o),e;if(a){var t=eu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return jh()(this,e)}}function uX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var lX=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,cX=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,fX=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,dX=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,hX=(qI=Object(Zr.injectable)(),eR=Object(Zr.inject)(qe.IDENTIFIER.RenderEngine),tR=Object(Zr.inject)(qe.IDENTIFIER.ShaderModuleService),qI(nR=(uC=(aR=function(o){Lh()(r,o);var a=sX(r);function r(){var n;qi()(this,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n=a.call.apply(a,[this].concat(t)),Va()(n,"engine",rR,Wc()(n)),Va()(n,"shaderModuleService",iR,Wc()(n)),n}return ea()(r,[{key:"onEntityCreated",value:function(){var e=this.getComponent(),t=this.engine.supportWebGPU?dX:cX,i=this.engine.supportWebGPU?fX:lX;this.shaderModuleService.registerModule("material-basic",{vs:t,fs:i});var s=this.shaderModuleService.getModule("material-basic"),u=s.vs,l=s.fs,c=s.uniforms;e.vertexShaderGLSL=u,e.fragmentShaderGLSL=l,e.setUniform(c),this.config.map&&(e.setDefines({USE_UV:1,USE_MAP:1}),e.setUniform({map:this.config.map,uvTransform:An.a.create()}))}}]),r}(vI),aR),rR=Ha()(uC.prototype,"engine",[eR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iR=Ha()(uC.prototype,"shaderModuleService",[tR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uC))||nR),oR,sR,uR,lR,cR,fR,dR,ny,hR,vR,gR,pR;function vX(o){var a=gX();return function(){var n=eu()(o),e;if(a){var t=eu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return jh()(this,e)}}function gX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var pX=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,mX=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,yX=(oR=Object(Zr.injectable)(),sR=Object(Zr.inject)(qe.IDENTIFIER.Systems),uR=Object(Zr.named)(qe.IDENTIFIER.MaterialSystem),lR=Object(Zr.inject)(qe.IDENTIFIER.Systems),cR=Object(Zr.named)(qe.IDENTIFIER.GeometrySystem),fR=Object(Zr.inject)(qe.IDENTIFIER.ShaderModuleService),oR(dR=(ny=(pR=function(o){Lh()(r,o);var a=vX(r);function r(){var n;qi()(this,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n=a.call.apply(a,[this].concat(t)),Va()(n,"materialSystem",hR,Wc()(n)),Va()(n,"geometrySystem",vR,Wc()(n)),Va()(n,"shaderModuleService",gR,Wc()(n)),n}return ea()(r,[{key:"onAttributeChanged",value:function(e){var t=e.name,i=e.data,s=this.getMeshComponent();s&&s.material&&(t==="gridColor"?(s.material.setUniform("u_GridColor",i),s.material.setUniform("u_GridColor2",i)):t==="gridSize"&&(s.material.setUniform("u_GridSize",i),s.material.setUniform("u_GridSize2",i)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:mX,fs:pX});var e=this.shaderModuleService.getModule("grid"),t=e.vs,i=e.fs,s=e.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:i});this.setMaterial(u);var l=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(l),u.setCull({enable:!1,face:qe.gl.BACK}).setDepth({enable:!0,func:qe.gl.LESS}),u.setUniform(s),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),l.setIndex([0,3,2,2,1,0]),l.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),r}(Rh),pR),hR=Ha()(ny.prototype,"materialSystem",[sR,uR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vR=Ha()(ny.prototype,"geometrySystem",[lR,cR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gR=Ha()(ny.prototype,"shaderModuleService",[fR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny))||dR),lC=v("4hNi"),eg=v("kafh");function cC(o,a,r,n,e){ry(a,n,-e),ry(a,n,e),o.push(r),o.push(r)}function ry(o,a,r){o.push([[a[0],a[1]],r])}var bX=function(o,a,r){var n=[0,0],e=[0,0],t=[0,0],i=[0,0],s=-1,u=!1,l=null,c=Object(lC.create)(),f=r||0,d=3,h=[],p=[],m=[],b=[0,0];a&&(o=o.slice(),o.push(o[0]));for(var E=o.length,x=1;x<E;x++){var O=f,D=o[x-1],I=o[x],F=x<o.length-1?o[x+1]:null;if(b.push(x/E,x/E),Object(eg.direction)(n,I,D),l||(l=[0,0],Object(eg.normal)(l,n)),u||(u=!0,cC(p,h,D,l,1)),m.push([O+0,O+1,O+2]),!F)Object(eg.normal)(l,n),cC(p,h,I,l,1),m.push(s===1?[O,O+2,O+3]:[O+2,O+1,O+3]),f+=2;else{Object(eg.direction)(e,F,I);var H=Object(eg.computeMiter)(t,i,n,e,1),$=Object(lC.dot)(t,l)<0?-1:1,se=H>d;if(!isFinite(H)){Object(eg.normal)(l,n),cC(p,h,I,l,1),m.push(s===1?[O,O+2,O+3]:[O+2,O+1,O+3]),f+=2,s=$;continue}se?(H=d,b.push(x/E),ry(h,l,-$),p.push(I),ry(h,i,H*$),p.push(I),m.push(s!==-$?[O,O+2,O+3]:[O+2,O+1,O+3]),m.push([O+2,O+3,O+4]),Object(eg.normal)(c,e),Object(lC.copy)(l,c),ry(h,l,-$),p.push(I),f+=3):(cC(p,h,I,i,H),m.push(s===1?[O,O+2,O+3]:[O+2,O+1,O+3]),$=-1,Object(lC.copy)(l,i),f+=2),s=$}}return{normals:h,attrIndex:m,attrPos:p,attrCounters:b}},mR,yR,bR,CR,ER,wR,xR,iy,OR,SR,MR,AR;function CX(o){var a=EX();return function(){var n=eu()(o),e;if(a){var t=eu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return jh()(this,e)}}function EX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var wX=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,xX=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,OX=(mR=Object(Zr.injectable)(),yR=Object(Zr.inject)(qe.IDENTIFIER.Systems),bR=Object(Zr.named)(qe.IDENTIFIER.MaterialSystem),CR=Object(Zr.inject)(qe.IDENTIFIER.Systems),ER=Object(Zr.named)(qe.IDENTIFIER.GeometrySystem),wR=Object(Zr.inject)(qe.IDENTIFIER.ShaderModuleService),mR(xR=(iy=(AR=function(o){Lh()(r,o);var a=CX(r);function r(){var n;qi()(this,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n=a.call.apply(a,[this].concat(t)),Va()(n,"materialSystem",OR,Wc()(n)),Va()(n,"geometrySystem",SR,Wc()(n)),Va()(n,"shaderModuleService",MR,Wc()(n)),n.vertexCount=void 0,n}return ea()(r,[{key:"onAttributeChanged",value:function(e){var t=e.name,i=e.data,s=this.getMeshComponent();if(s&&s.material)switch(t){case"dashArray":s.material.setUniform("u_dash_array",i);break;case"dashOffset":s.material.setUniform("u_dash_offset",i);break;case"dashRatio":s.material.setUniform("u_dash_ratio",i);break;case"thickness":s.material.setUniform("u_thickness",i);break;case"color":var u=new Array(this.vertexCount).fill(void 0).map(function(){return i}).reduce(function(l,c){return[].concat(Ho()(l),Ho()(c))},[]);s.geometry.setAttribute("a_color",Float32Array.from(u),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var e=this;this.shaderModuleService.registerModule("line",{vs:xX,fs:wX});var t=this.shaderModuleService.getModule("line"),i=t.vs,s=t.fs,u=t.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:i,fragmentShader:s}),c=bX(this.config.points,!1),f=c.normals,d=c.attrIndex,h=c.attrPos,p=c.attrCounters,m=h.length;this.vertexCount=m;var b=this.geometrySystem.createBufferGeometry({vertexCount:m});this.setMaterial(l),this.setGeometry(b),l.setCull({enable:!1,face:qe.gl.BACK}).setUniform(u),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var E=[],x=[];f.forEach(function(D){var I=D[0],F=D[1];E.push([I[0],I[1]]),x.push(F)}),b.setIndex(d.reduce(function(D,I){return[].concat(Ho()(D),Ho()(I))},[])),b.setAttribute("a_pos",Float32Array.from(h.reduce(function(D,I){return[].concat(Ho()(D),Ho()(I))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var O=new Array(m).fill(void 0).map(function(){return Ho()(e.config.color)}).reduce(function(D,I){return[].concat(Ho()(D),Ho()(I))},[]);b.setAttribute("a_color",Float32Array.from(O),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),b.setAttribute("a_line_miter",Float32Array.from(x),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),b.setAttribute("a_line_normal",Float32Array.from(E.reduce(function(D,I){return[].concat(Ho()(D),Ho()(I))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),b.setAttribute("a_counters",Float32Array.from(p),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),r}(Rh),AR),OR=Ha()(iy.prototype,"materialSystem",[yR,bR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SR=Ha()(iy.prototype,"geometrySystem",[CR,ER],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),MR=Ha()(iy.prototype,"shaderModuleService",[wR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iy))||xR);function SX(o){return[o+1&255,o+1>>8&255,o+1>>8>>8&255]}var TR,PR,kR,DR,IR,RR,NR,ay,LR,jR,_R,FR;function BR(o,a){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);a&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function MX(o){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?BR(Object(r),!0).forEach(function(n){pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}function AX(o){var a=TX();return function(){var n=eu()(o),e;if(a){var t=eu()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return jh()(this,e)}}function TX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var PX=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,kX=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,DX=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],IX=(TR=Object(Zr.injectable)(),PR=Object(Zr.inject)(qe.IDENTIFIER.Systems),kR=Object(Zr.named)(qe.IDENTIFIER.MaterialSystem),DR=Object(Zr.inject)(qe.IDENTIFIER.Systems),IR=Object(Zr.named)(qe.IDENTIFIER.GeometrySystem),RR=Object(Zr.inject)(qe.IDENTIFIER.ShaderModuleService),TR(NR=(ay=(FR=function(o){Lh()(r,o);var a=AX(r);function r(){var n;qi()(this,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n=a.call.apply(a,[this].concat(t)),Va()(n,"materialSystem",LR,Wc()(n)),Va()(n,"geometrySystem",jR,Wc()(n)),Va()(n,"shaderModuleService",_R,Wc()(n)),n}return ea()(r,[{key:"onAttributeChanged",value:function(e){var t=e.name,i=e.data,s=this.getMeshComponent();s&&s.material&&(t==="strokeWidth"?s.material.setUniform("u_stroke_width",i):t==="strokeColor"?s.material.setUniform("u_stroke_color",i):t==="strokeOpacity"?s.material.setUniform("u_stroke_opacity",i):t==="opacity"?s.material.setUniform("u_opacity",i):t==="blur"&&s.material.setUniform("u_blur",i))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:kX,fs:PX});var e=this.shaderModuleService.getModule("grid"),t=e.vs,i=e.fs,s=e.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:i,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:qe.gl.SRC_ALPHA,dstRGB:qe.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});u.setUniform(MX({u_device_pixel_ratio:window.devicePixelRatio},s));var l=this.buildAttributes(),c=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:l.instancedOffsets.length/2,vertexCount:6});c.setIndex([0,2,1,0,3,2]),c.setAttribute("position",Float32Array.from(l.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),c.setAttribute("offset",Float32Array.from(l.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),c.setAttribute("color",Float32Array.from(l.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),c.setAttribute("size",Float32Array.from(l.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),c.setAttribute("shape",Float32Array.from(l.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),c.setAttribute("a_PickingColor",Float32Array.from(l.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(u),this.setGeometry(c)}},{key:"buildAttribute",value:function(e,t,i){var s,u,l,c;(s=t.instancedPickingColors).push.apply(s,Ho()(SX(e.id||i))),t.instancedShapes.push(DX.indexOf(e.shape||"circle")),(u=t.instancedColors).push.apply(u,Ho()(e.color||[1,0,0,1])),(l=t.instancedOffsets).push.apply(l,Ho()(e.position||[0,0])),(c=t.instancedSizes).push.apply(c,Ho()(e.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var e=this,t={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(i,s){e.buildAttribute(i,t,s)}):this.buildAttribute(this.config,t,0),t}}]),r}(Rh),FR),LR=Ha()(ay.prototype,"materialSystem",[PR,kR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jR=Ha()(ay.prototype,"geometrySystem",[DR,IR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_R=Ha()(ay.prototype,"shaderModuleService",[RR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ay))||NR),GR,zR,UR,VR,HR,oy,WR,$R,XR,KR;function YR(o,a){var r;if(typeof Symbol=="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(r=RX(o))||a&&o&&typeof o.length=="number"){r&&(o=r);var n=0,e=function(){};return{s:e,n:function(){return n>=o.length?{done:!0}:{done:!1,value:o[n++]}},e:function(l){throw l},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t=!0,i=!1,s;return{s:function(){r=o[Symbol.iterator]()},n:function(){var l=r.next();return t=l.done,l},e:function(l){i=!0,s=l},f:function(){try{!t&&r.return!=null&&r.return()}finally{if(i)throw s}}}}function RX(o,a){if(!!o){if(typeof o=="string")return ZR(o,a);var r=Object.prototype.toString.call(o).slice(8,-1);if(r==="Object"&&o.constructor&&(r=o.constructor.name),r==="Map"||r==="Set")return Array.from(o);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZR(o,a)}}function ZR(o,a){(a==null||a>o.length)&&(a=o.length);for(var r=0,n=new Array(a);r<a;r++)n[r]=o[r];return n}var NX=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,LX=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,jX=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,_X=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,FX=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,JR=(GR=Object(Zr.injectable)(),zR=Object(Zr.inject)(qe.IDENTIFIER.RenderEngine),UR=Object(Zr.inject)(qe.IDENTIFIER.ShaderModuleService),VR=Object(Zr.inject)(qe.IDENTIFIER.ConfigService),GR(HR=(oy=(KR=function(){function o(){qi()(this,o),this.container=void 0,Va()(this,"engine",WR,this),Va()(this,"shaderModule",$R,this),Va()(this,"configService",XR,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return ea()(o,[{key:"init",value:function(){var a=Io()(xi.a.mark(function n(){var e,t,i,s,u;return xi.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:_X}),this.shaderModule.registerModule("uv.vert.main",{vs:FX}),this.shaderModule.registerModule("uv.frag.declaration",{fs:jX}),this.shaderModule.registerModule("map.frag.declaration",{fs:NX}),this.shaderModule.registerModule("map.frag.main",{fs:LX}),e=this.container.getAll(qe.IDENTIFIER.Systems),t=this.configService.get(),!t.canvas){c.next=30;break}return c.next=11,this.engine.init({canvas:t.canvas,swapChainFormat:or.TextureFormat.BGRA8Unorm,antialiasing:!1});case 11:i=YR(e),c.prev=12,i.s();case 14:if((s=i.n()).done){c.next=21;break}if(u=s.value,!u.initialize){c.next=19;break}return c.next=19,u.initialize();case 19:c.next=14;break;case 21:c.next=26;break;case 23:c.prev=23,c.t0=c.catch(12),i.e(c.t0);case 26:return c.prev=26,i.f(),c.finish(26);case 29:this.inited=!0;case 30:case"end":return c.stop()}},n,this,[[12,23,26,29]])}));function r(){return a.apply(this,arguments)}return r}()},{key:"render",value:function(){var a=Io()(xi.a.mark(function n(){var e,t,i,s,u,l,c,f=arguments;return xi.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!(!this.inited||this.rendering)){h.next=2;break}return h.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(p){p()}),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(qe.IDENTIFIER.Systems),t=f.length,i=new Array(t),s=0;s<t;s++)i[s]=f[s];u=YR(e),h.prev=8,u.s();case 10:if((l=u.n()).done){h.next=17;break}if(c=l.value,!c.execute){h.next=15;break}return h.next=15,c.execute(i);case 15:h.next=10;break;case 17:h.next=22;break;case 19:h.prev=19,h.t0=h.catch(8),u.e(h.t0);case 22:return h.prev=22,u.f(),h.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return h.stop()}},n,this,[[8,19,22,25]])}));function r(){return a.apply(this,arguments)}return r}()},{key:"clear",value:function(r){var n=this;return this.inited?this.engine.clear(r):this.pendings.unshift(function(){n.engine.clear(r),n.pendings.shift()}),this}},{key:"setSize",value:function(r){var n=r.width,e=r.height,t=this.engine.getCanvas();return this.size={width:n,height:e},t.width=n,t.height=e,this}},{key:"getSize",value:function(){return this.size}}]),o}(),KR),WR=Ha()(oy.prototype,"engine",[zR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$R=Ha()(oy.prototype,"shaderModule",[UR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),XR=Ha()(oy.prototype,"configService",[VR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oy))||HR),QR,qR,eN,tN=(QR=Object(Zr.injectable)(),QR(qR=(eN=function(){function o(){qi()(this,o),this.entities=[]}return ea()(o,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(r){return this.addEntity(r.getEntity()),this}},{key:"removeRenderable",value:function(r){return this.removeEntity(r.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(r){return this.entities.indexOf(r)===-1&&this.entities.push(r),this}},{key:"removeEntity",value:function(r){var n=this.entities.indexOf(r);return this.entities.splice(n,1),this}}]),o}(),eN))||qR),nN,rN,iN,aN=(nN=Object(Zr.injectable)(),nN(rN=(iN=function(){function o(){qi()(this,o),this.cache={}}return ea()(o,[{key:"get",value:function(r){return this.cache[r]}},{key:"set",value:function(r,n){this.cache[r]=n}}]),o}(),iN))||rN),oN,sN,uN,lN,fC,cN,fN,dN;function hN(o,a){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);a&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function vN(o){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?hN(Object(r),!0).forEach(function(n){pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var gN=(oN=Object(Zr.injectable)(),sN=Object(Zr.inject)(aN),uN=Object(Zr.inject)(qe.IDENTIFIER.RenderEngine),oN(lN=(fC=(dN=function(){function o(){qi()(this,o),Va()(this,"textureCache",cN,this),Va()(this,"engine",fN,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return ea()(o,[{key:"setConfig",value:function(r){this.config=r}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var a=Io()(xi.a.mark(function n(){var e=this;return xi.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!this.config.url){i.next=4;break}return i.abrupt("return",new Promise(function(s,u){var l=e.textureCache.get(e.config.url);if(l)s(l);else{var c=new Image;c.crossOrigin="Anonymous",c.src=e.config.url,c.onload=function(){var f=e.engine.createTexture2D(vN(vN({},e.config),{},{data:c,width:c.width,height:c.height,flipY:!0}));e.textureCache.set(e.config.url,f),e.texture=f,e.loaded=!0,s(f)},c.onerror=function(){u()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),i.abrupt("return",this.texture);case 7:case"end":return i.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()}]),o}(),dN),cN=Ha()(fC.prototype,"textureCache",[sN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fN=Ha()(fC.prototype,"engine",[uN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fC))||lN),pN,mN,yN,bN,YM,CN,EN,wN=(pN=Object(Zr.injectable)(),mN=Object(Zr.inject)(qe.IDENTIFIER.Systems),yN=Object(Zr.named)(qe.IDENTIFIER.RendererSystem),pN(bN=(YM=(EN=function(){function o(){qi()(this,o),Va()(this,"rendererSystem",CN,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return ea()(o,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(r){return this.camera=r,this}},{key:"setScene",value:function(r){return this.scene=r,this}},{key:"setViewport",value:function(r){return this.viewport=r,this}},{key:"setClearColor",value:function(r){return this.clearColor=r,this}},{key:"pick",value:function(r){return this.rendererSystem.pick(r,this)}}]),o}(),EN),CN=Ha()(YM.prototype,"rendererSystem",[mN,yN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YM))||bN),xN,ON,SN,ZM,MN,AN;function TN(o,a){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);a&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function BX(o){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?TN(Object(r),!0).forEach(function(n){pn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):TN(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var dC=(xN=Object(Zr.injectable)(),ON=Object(Zr.inject)(qe.IDENTIFIER.ConfigService),xN(SN=(ZM=(AN=function(){function o(){qi()(this,o),Va()(this,"configService",MN,this),this.container=void 0}return ea()(o,[{key:"getEngine",value:function(){var a=Io()(xi.a.mark(function n(){var e,t,i,s;return xi.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.container.get(qe.IDENTIFIER.RenderEngine),t=this.configService.get(),i=t.canvas,s=t.engineOptions,l.next=4,e.init(BX({canvas:i||Z3(),swapChainFormat:or.TextureFormat.BGRA8Unorm,antialiasing:!1},s));case 4:return l.abrupt("return",e);case 5:case"end":return l.stop()}},n,this)}));function r(){return a.apply(this,arguments)}return r}()},{key:"getTransformComponent",value:function(r){var n=this.container.get(qe.IDENTIFIER.TransformComponentManager);return n.getComponentByEntity(r)}},{key:"getMeshComponent",value:function(r){var n=this.container.get(qe.IDENTIFIER.MeshComponentManager);return n.getComponentByEntity(r)}},{key:"setConfig",value:function(r){this.configService.set(r)}},{key:"setContainer",value:function(r){this.container=r}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Object(qe.createEntity)()}},{key:"createScene",value:function(){return this.container.get(tN)}},{key:"createCamera",value:function(){return this.container.get(H3)}},{key:"createView",value:function(){return this.container.get(wN)}},{key:"createRenderable",value:function(r,n){var e=r?this.container.getNamed(qe.IDENTIFIER.Renderable,r):this.container.get(Rh),t=Object(qe.createEntity)();return e.setConfig(n||{}),e.setEntity(t),e}},{key:"createGeometry",value:function(r,n){var e=this.container.getNamed(qe.IDENTIFIER.Geometry,r),t=Object(qe.createEntity)();return e.setConfig(n||{}),e.setEntity(t),e.getComponent()}},{key:"createMaterial",value:function(r,n){var e=this.container.getNamed(qe.IDENTIFIER.Material,r),t=Object(qe.createEntity)();return e.setConfig(n||{}),e.setEntity(t,r),e.getComponent()}},{key:"createTexture2D",value:function(r){var n=this.container.get(gN);return n.setConfig(r),n}},{key:"createBufferGeometry",value:function(r){var n=this.container.getNamed(qe.IDENTIFIER.Systems,qe.IDENTIFIER.GeometrySystem);return n.createBufferGeometry(r)}},{key:"createInstancedBufferGeometry",value:function(r){var n=this.container.getNamed(qe.IDENTIFIER.Systems,qe.IDENTIFIER.GeometrySystem);return n.createInstancedBufferGeometry(r)}},{key:"createShaderMaterial",value:function(r){var n=this.container.getNamed(qe.IDENTIFIER.Systems,qe.IDENTIFIER.MaterialSystem);return n.createShaderMaterial(r)}},{key:"createKernel",value:function(r){var n=this.container.get(sI);return typeof r=="string"?n.setBundle(JSON.parse(r)):n.setBundle(r),n.init(),n}},{key:"createRenderer",value:function(){var r=this.container.get(JR);return r.container=this.container,r.init(),r}},{key:"destroy",value:function(){var r=this.container.getAll(qe.IDENTIFIER.Systems);r.forEach(function(t){t.tearDown&&t.tearDown()});var n=this.container.get(qe.IDENTIFIER.RenderEngine);n.destroy();var e=this.container.get(qe.IDENTIFIER.InteractorService);e.destroy()}}],[{key:"create",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Object(qe.createWorldContainer)(),e=navigator.gpu?z$:w$;n.isBound(qe.IDENTIFIER.RenderEngine)||n.bind(qe.IDENTIFIER.RenderEngine).to(e).inSingletonScope(),n.bind(JR).toSelf(),n.bind(sI).toSelf(),n.bind(Rh).toSelf(),n.bind(wN).toSelf(),n.bind(H3).toSelf(),n.bind(tN).toSelf(),n.bind(o).toSelf(),n.bind(aN).toSelf(),n.bind(gN).toSelf(),n.bind(qe.IDENTIFIER.Geometry).to(Y$).whenTargetNamed(Ih.BOX),n.bind(qe.IDENTIFIER.Geometry).to(aX).whenTargetNamed(Ih.SPHERE),n.bind(qe.IDENTIFIER.Geometry).to(nX).whenTargetNamed(Ih.PLANE),n.bind(qe.IDENTIFIER.Geometry).to(q$).whenTargetNamed(Ih.MERGED),n.bind(qe.IDENTIFIER.Material).to(hX).whenTargetNamed(vI.BASIC),n.bind(qe.IDENTIFIER.Renderable).to(IX).whenTargetNamed(Rh.POINT),n.bind(qe.IDENTIFIER.Renderable).to(OX).whenTargetNamed(Rh.LINE),n.bind(qe.IDENTIFIER.Renderable).to(yX).whenTargetNamed(Rh.GRID);var t=n.get(o);return t.setContainer(n),t.setConfig(r),t}}]),o}(),AN),MN=Ha()(ZM.prototype,"configService",[ON],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ZM))||SN),Sp=function(a,r){var n;return a?gr(a)?n=function(){return a}:n=a:n=function(){return r||1},n},GX=function(a,r){var n=[],e=[],t={},i=0;for(i=0;i<a.length;i++){var s=a[i];t[s.id]=i,n.push(s.x),n.push(s.y),n.push(0),n.push(0),e.push([])}for(i=0;i<r.length;i++){var u=r[i],l=Qi(u,"source"),c=Qi(u,"target");e[t[l]].push(t[c]),e[t[c]].push(t[l])}var f=0;for(i=0;i<a.length;i++){var d=n.length,h=e[i],p=h.length;n[i*4+2]=d,n[i*4+3]=h.length,f=Math.max(f,h.length);for(var m=0;m<p;++m){var b=h[m];n.push(+b)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:f,array:new Float32Array(n)}},zX=function(a,r,n,e){var t=[],i=[],s={},u=0;for(u=0;u<a.length;u++){var l=a[u];s[l.id]=u,t.push(l.x),t.push(l.y),t.push(0),t.push(0),i.push([])}for(u=0;u<r.length;u++){var c=r[u],f=Qi(c,"source"),d=Qi(c,"target");i[s[f]].push(s[d]),i[s[f]].push(n(c)),i[s[f]].push(e(c)),i[s[f]].push(0),i[s[d]].push(s[f]),i[s[d]].push(n(c)),i[s[d]].push(e(c)),i[s[d]].push(0)}var h=0;for(u=0;u<a.length;u++){var p=t.length,m=i[u],b=m.length;t[u*4+2]=p+1048576*b/4,t[u*4+3]=0,h=Math.max(h,b/4);for(var E=0;E<b;++E){var x=m[E];t.push(+x)}}for(;t.length%4!=0;)t.push(0);return{maxEdgePerVetex:h,array:new Float32Array(t)}},UX=function(a,r){var n=[],e=a.length,t={};return r.forEach(function(i){a.forEach(function(s,u){if(t[i[s]]===void 0&&(t[i[s]]=Object.keys(t).length),n.push(t[i[s]]),u===e-1)for(;n.length%4!=0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(t).length}},PN=function(a){for(var r=[],n=a.length,e=a[0].length,t=function(u){a.forEach(function(l,c){if(r.push(l[u]),c===n-1)for(;r.length%4!=0;)r.push(0)})},i=0;i<e;i++)t(i);return new Float32Array(r)},kq=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,VX='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Dq=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,HX='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}',hC=function(o,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return new(r||(r=Promise))(function(t,i){function s(c){try{l(n.next(c))}catch(f){i(f)}}function u(c){try{l(n.throw(c))}catch(f){i(f)}}function l(c){c.done?t(c.value):e(c.value).then(s,u)}l((n=n.apply(o,a||[])).next())})},WX=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return hC(this,void 0,void 0,Object(k.a)().mark(function e(){var t=this,i,s,u,l,c;return Object(k.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(i=this,s=i.nodes,!(!s||s.length===0)){d.next=5;break}return i.onLayoutEnd&&i.onLayoutEnd(),d.abrupt("return");case 5:if(!i.width&&typeof window!="undefined"&&(i.width=window.innerWidth),!i.height&&typeof window!="undefined"&&(i.height=window.innerHeight),i.center||(i.center=[i.width/2,i.height/2]),u=i.center,s.length!==1){d.next=14;break}return s[0].x=u[0],s[0].y=u[1],i.onLayoutEnd&&i.onLayoutEnd(),d.abrupt("return");case 14:return l={},c={},s.forEach(function(h,p){gr(h.x)||(h.x=Math.random()*t.width),gr(h.y)||(h.y=Math.random()*t.height),l[h.id]=h,c[h.id]=p}),i.nodeMap=l,i.nodeIdxMap=c,d.next=21,i.run();case 21:case"end":return d.stop()}},e,this)}))}},{key:"executeWithWorker",value:function(e,t){return hC(this,void 0,void 0,Object(k.a)().mark(function i(){var s=this,u,l,c,f,d;return Object(k.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(u=this,l=u.nodes,c=u.center,!(!l||l.length===0)){p.next=5;break}return p.abrupt("return");case 5:if(l.length!==1){p.next=9;break}return l[0].x=c[0],l[0].y=c[1],p.abrupt("return");case 9:return f={},d={},l.forEach(function(m,b){gr(m.x)||(m.x=Math.random()*s.width),gr(m.y)||(m.y=Math.random()*s.height),f[m.id]=m,d[m.id]=b}),u.nodeMap=f,u.nodeIdxMap=d,p.next=16,u.run(e,t);case 16:case"end":return p.stop()}},i,this)}))}},{key:"run",value:function(e,t){return hC(this,void 0,void 0,Object(k.a)().mark(function i(){var s=this,u,l,c,f,d,h,p,m,b,E,x,O,D,I,F,H,$,se,de,Ee,Oe,$e,tt,Le,it,It;return Object(k.a)().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:for(u=this,l=u.nodes,c=u.edges,f=u.maxIteration,d=u.center,h=u.height*u.width,p=Math.sqrt(h)/10,m=h/(l.length+1),b=Math.sqrt(m),E=u.speed,x=u.clustering,O=UX([u.clusterField],l),D=O.array,I=O.count,l.forEach(function(dn,en){var Vn=0,jt=0;gr(dn.fx)&&gr(dn.fy)&&(Vn=dn.fx||.001,jt=dn.fy||.001),D[4*en+1]=Vn,D[4*en+2]=jt}),F=l.length,H=GX(l,c),$=H.maxEdgePerVetex,se=H.array,de=u.workerEnabled,de?Ee=dC.create({canvas:e,engineOptions:{supportCompute:!0}}):Ee=dC.create({engineOptions:{supportCompute:!0}}),Oe=u.onLayoutEnd,$e=[],tt=0;tt<I;tt++)$e.push(0,0,0,0);return Le=Ee.createKernel(VX).setDispatch([F,1,1]).setBinding({u_Data:se,u_K:b,u_K2:m,u_Gravity:u.gravity,u_ClusterGravity:u.clusterGravity||u.gravity||1,u_Speed:E,u_MaxDisplace:p,u_Clustering:x?1:0,u_Center:d,u_AttributeArray:D,u_ClusterCenters:$e,MAX_EDGE_PER_VERTEX:$,VERTEX_COUNT:F}),x&&(it=Ee.createKernel(HX).setDispatch([I,1,1]).setBinding({u_Data:se,u_NodeAttributes:D,u_ClusterCenters:$e,VERTEX_COUNT:F,CLUSTER_COUNT:I})),It=function(){return hC(s,void 0,void 0,Object(k.a)().mark(function en(){var Vn,jt;return Object(k.a)().wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:Vn=0;case 1:if(!(Vn<f)){jn.next=13;break}return jn.next=4,Le.execute();case 4:if(!x){jn.next=9;break}return it.setBinding({u_Data:Le}),jn.next=8,it.execute();case 8:Le.setBinding({u_ClusterCenters:it});case 9:Le.setBinding({u_MaxDisplace:p*=.99});case 10:Vn++,jn.next=1;break;case 13:return jn.next=15,Le.getOutput();case 15:jt=jn.sent,e?t.postMessage({type:gM.GPUEND,vertexEdgeData:jt}):l.forEach(function(Lr,Pr){var Wr=jt[4*Pr],Jr=jt[4*Pr+1];Lr.x=Wr,Lr.y=Jr}),Oe&&Oe();case 18:case"end":return jn.stop()}},en)}))},bn.next=25,It();case 25:case"end":return bn.stop()}},i,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}]),r}(qs),Iq=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,$X='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Rq=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,XX='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}',JM=function(o,a,r,n){function e(t){return t instanceof r?t:new r(function(i){i(t)})}return new(r||(r=Promise))(function(t,i){function s(c){try{l(n.next(c))}catch(f){i(f)}}function u(c){try{l(n.throw(c))}catch(f){i(f)}}function l(c){c.done?t(c.value):e(c.value).then(s,u)}l((n=n.apply(o,a||[])).next())})},KX=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return JM(this,void 0,void 0,Object(k.a)().mark(function e(){var t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=this,i=t.nodes,!(!i||i.length===0)){f.next=5;break}return t.onLayoutEnd&&t.onLayoutEnd(),f.abrupt("return");case 5:if(!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),s=t.center,i.length!==1){f.next=14;break}return i[0].x=s[0],i[0].y=s[1],t.onLayoutEnd&&t.onLayoutEnd(),f.abrupt("return");case 14:return u={},l={},i.forEach(function(d,h){gr(d.x)||(d.x=Math.random()*t.width),gr(d.y)||(d.y=Math.random()*t.height),u[d.id]=d,l[d.id]=h}),t.nodeMap=u,t.nodeIdxMap=l,t.nodeStrength=Sp(t.nodeStrength,1),t.edgeStrength=Sp(t.edgeStrength,1),f.next=23,t.run();case 23:case"end":return f.stop()}},e,this)}))}},{key:"executeWithWorker",value:function(e,t){var i=this,s=i.nodes,u=i.center;if(!(!s||s.length===0)){if(s.length===1){s[0].x=u[0],s[0].y=u[1];return}var l={},c={};s.forEach(function(f,d){gr(f.x)||(f.x=Math.random()*i.width),gr(f.y)||(f.y=Math.random()*i.height),l[f.id]=f,c[f.id]=d}),i.nodeMap=l,i.nodeIdxMap=c,i.nodeStrength=Sp(i.nodeStrength,1),i.edgeStrength=Sp(i.edgeStrength,1),i.run(e,t)}}},{key:"run",value:function(e,t){return JM(this,void 0,void 0,Object(k.a)().mark(function i(){var s=this,u,l,c,f,d,h,p,m,b,E,x,O,D,I,F,H,$,se,de,Ee,Oe,$e,tt,Le,it,It,tn;return Object(k.a)().wrap(function(dn){for(;;)switch(dn.prev=dn.next){case 0:for(u=this,l=u.nodes,c=u.edges,f=u.maxIteration,!u.width&&typeof window!="undefined"&&(u.width=window.innerWidth),!u.height&&typeof window!="undefined"&&(u.height=window.innerHeight),d=l.length,u.linkDistance=Sp(u.linkDistance),u.edgeStrength=Sp(u.edgeStrength),h=zX(l,c,u.linkDistance,u.edgeStrength),p=h.maxEdgePerVetex,m=h.array,u.degrees=H0(l.length,u.nodeIdxMap,c),b=[],E=[],x=[],O=[],D=[],I=[],F=[],u.getMass||(u.getMass=function(en){return u.degrees[u.nodeIdxMap[en.id]]||1}),H=u.gravity,$=u.center,l.forEach(function(en,Vn){b.push(u.getMass(en)),E.push(u.nodeStrength(en)),u.degrees[Vn]||(u.degrees[Vn]=0);var jt=[$[0],$[1],H];if(u.getCenter){var Cn=u.getCenter(en,u.degrees[Vn]);Cn&&gr(Cn[0])&&gr(Cn[1])&&gr(Cn[2])&&(jt=Cn)}x.push(jt[0]),O.push(jt[1]),D.push(jt[2]),gr(en.fx)&&gr(en.fy)?(I.push(en.fx||.001),F.push(en.fy||.001)):(I.push(0),F.push(0))}),se=PN([b,u.degrees,E,I]),de=PN([x,O,D,F]),Ee=u.workerEnabled,Ee?Oe=dC.create({canvas:e,engineOptions:{supportCompute:!0}}):Oe=dC.create({engineOptions:{supportCompute:!0}}),$e=u.onLayoutEnd,tt=[],m.forEach(function(en){tt.push(en)}),Le=0;Le<4;Le++)tt.push(0);return it=Oe.createKernel($X).setDispatch([d,1,1]).setBinding({u_Data:m,u_damping:u.damping,u_maxSpeed:u.maxSpeed,u_minMovement:u.minMovement,u_coulombDisScale:u.coulombDisScale,u_factor:u.factor,u_NodeAttributeArray1:se,u_NodeAttributeArray2:de,MAX_EDGE_PER_VERTEX:p,VERTEX_COUNT:d,u_AveMovement:tt,u_interval:u.interval}),It=Oe.createKernel(XX).setDispatch([1,1,1]).setBinding({u_Data:m,VERTEX_COUNT:d,u_AveMovement:[0,0,0,0]}),tn=function(){return JM(s,void 0,void 0,Object(k.a)().mark(function Vn(){var jt,Cn,jn;return Object(k.a)().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:jt=0;case 1:if(!(jt<f)){Pr.next=12;break}return Pr.next=4,it.execute();case 4:return It.setBinding({u_Data:it}),Pr.next=7,It.execute();case 7:Cn=Math.max(.02,u.interval-jt*.002),it.setBinding({u_interval:Cn,u_AveMovement:It});case 9:jt++,Pr.next=1;break;case 12:return Pr.next=14,it.getOutput();case 14:jn=Pr.sent,e?t.postMessage({type:gM.GPUEND,vertexEdgeData:jn}):l.forEach(function(Wr,Jr){var Ta=jn[4*Jr],fo=jn[4*Jr+1];Wr.x=Ta,Wr.y=fo}),$e&&$e();case 17:case"end":return Pr.stop()}},Vn)}))},dn.next=35,tn();case 35:case"end":return dn.stop()}},i,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}]),r}(qs),YX=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var e=this,t=e.nodes,i=e.center;if(e.comboTree={id:"comboTreeRoot",depth:-1,children:e.comboTrees},!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}if(t.length===1){t[0].x=i[0],t[0].y=i[1],e.onLayoutEnd&&e.onLayoutEnd();return}e.initVals(),e.run(),e.onLayoutEnd&&e.onLayoutEnd()}},{key:"run",value:function(){var e=this,t=e.nodes,i=e.previousLayouted?e.maxIteration/5:e.maxIteration;!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);var s=e.center,u=e.velocityDecay,l=e.comboMap;e.previousLayouted||e.initPos(l);for(var c=function(m){var b=[];t.forEach(function(E,x){b[x]={x:0,y:0}}),e.applyCalculate(b),e.applyComboCenterForce(b),t.forEach(function(E,x){!gr(E.x)||!gr(E.y)||(E.x+=b[x].x*u,E.y+=b[x].y*u)}),e.alpha+=(e.alphaTarget-e.alpha)*e.alphaDecay,e.onTick()},f=0;f<i;f++)c(f);var d=[0,0];t.forEach(function(p){!gr(p.x)||!gr(p.y)||(d[0]+=p.x,d[1]+=p.y)}),d[0]/=t.length,d[1]/=t.length;var h=[s[0]-d[0],s[1]-d[1]];t.forEach(function(p,m){!gr(p.x)||!gr(p.y)||(p.x+=h[0],p.y+=h[1])}),e.combos.forEach(function(p){var m=l[p.id];m&&m.empty&&(p.x=m.cx||p.x,p.y=m.cy||p.y)}),e.previousLayouted=!0}},{key:"initVals",value:function(){var e=this,t=e.edges,i=e.nodes,s=e.combos,u={},l={},c={};i.forEach(function(Vn,jt){l[Vn.id]=Vn,c[Vn.id]=jt}),e.nodeMap=l,e.indexMap=c;var f={};s.forEach(function(Vn){f[Vn.id]=Vn}),e.oriComboMap=f,e.comboMap=e.getComboMap();var d=e.preventOverlap;e.preventComboOverlap=e.preventComboOverlap||d,e.preventNodeOverlap=e.preventNodeOverlap||d;var h=e.collideStrength;h&&(e.comboCollideStrength=h,e.nodeCollideStrength=h),e.comboCollideStrength=e.comboCollideStrength?e.comboCollideStrength:0,e.nodeCollideStrength=e.nodeCollideStrength?e.nodeCollideStrength:0;for(var p=0;p<t.length;++p){var m=Qi(t[p],"source"),b=Qi(t[p],"target");u[m]?u[m]++:u[m]=1,u[b]?u[b]++:u[b]=1}for(var E=[],x=0;x<t.length;++x){var O=Qi(t[x],"source"),D=Qi(t[x],"target");E[x]=u[O]/(u[O]+u[D])}this.bias=E;var I=e.nodeSize,F=e.nodeSpacing,H,$;if(gr(F)?$=function(){return F}:Th(F)?$=F:$=function(){return 0},this.nodeSpacing=$,!I)H=function(jt){if(jt.size){if(js(jt.size)){var Cn=jt.size[0]>jt.size[1]?jt.size[0]:jt.size[1];return Cn/2}if(Nf(jt.size)){var jn=jt.size.width>jt.size.height?jt.size.width:jt.size.height;return jn/2}return jt.size/2}return 10};else if(Th(I))H=function(jt){return I(jt)};else if(js(I)){var se=I[0]>I[1]?I[0]:I[1],de=se/2;H=function(jt){return de}}else{var Ee=I/2;H=function(jt){return Ee}}this.nodeSize=H;var Oe=e.comboSpacing,$e;gr(Oe)?$e=function(){return Oe}:Th(Oe)?$e=Oe:$e=function(){return 0},this.comboSpacing=$e;var tt=e.comboPadding,Le;gr(tt)?Le=function(){return tt}:js(tt)?Le=function(){return Math.max.apply(null,tt)}:Th(tt)?Le=tt:Le=function(){return 0},this.comboPadding=Le;var it=this.linkDistance,It;it||(it=10),gr(it)?It=function(jt){return it}:It=it,this.linkDistance=It;var tn=this.edgeStrength,bn;tn||(tn=1),gr(tn)?bn=function(jt){return tn}:bn=tn,this.edgeStrength=bn;var dn=this.nodeStrength,en;dn||(dn=30),gr(dn)?en=function(jt){return dn}:en=dn,this.nodeStrength=en}},{key:"initPos",value:function(e){var t=this,i=t.nodes;i.forEach(function(s,u){var l=s.comboId,c=e[l];l&&c?(s.x=c.cx+100/(u+1),s.y=c.cy+100/(u+1)):(s.x=100/(u+1),s.y=100/(u+1))})}},{key:"getComboMap",value:function(){var e=this,t=e.nodeMap,i=e.comboTrees,s=e.oriComboMap,u={};return(i||[]).forEach(function(l){var c=[];z2(l,function(f){if(f.itemType==="node"||!s[f.id])return!0;if(u[f.id]===void 0){var d={id:f.id,name:f.id,cx:0,cy:0,count:0,depth:e.oriComboMap[f.id].depth||0,children:[]};u[f.id]=d}var h=f.children;h&&h.forEach(function(b){if(!u[b.id]&&!t[b.id])return!0;c.push(b)});var p=u[f.id];if(p.cx=0,p.cy=0,c.length===0){p.empty=!0;var m=s[f.id];p.cx=m.x,p.cy=m.y}return c.forEach(function(b){if(p.count++,b.itemType!=="node"){var E=u[b.id];gr(E.cx)&&(p.cx+=E.cx),gr(E.cy)&&(p.cy+=E.cy);return}var x=t[b.id];!x||(gr(x.x)&&(p.cx+=x.x),gr(x.y)&&(p.cy+=x.y))}),p.cx/=p.count||1,p.cy/=p.count||1,p.children=c,!0})}),u}},{key:"applyComboCenterForce",value:function(e){var t=this,i=t.gravity,s=t.comboGravity||i,u=this.alpha,l=t.comboTrees,c=t.indexMap,f=t.nodeMap,d=t.comboMap;(l||[]).forEach(function(h){z2(h,function(p){if(p.itemType==="node")return!0;var m=d[p.id];if(!m)return!0;var b=d[p.id],E=(b.depth+1)/10*.5,x=b.cx,O=b.cy;return b.cx=0,b.cy=0,b.children.forEach(function(D){if(D.itemType!=="node"){var I=d[D.id];I&&gr(I.cx)&&(b.cx+=I.cx),I&&gr(I.cy)&&(b.cy+=I.cy);return}var F=f[D.id],H=F.x-x||.005,$=F.y-O||.005,se=Math.sqrt(H*H+$*$),de=c[F.id],Ee=s*u/se*E;e[de].x-=H*Ee,e[de].y-=$*Ee,gr(F.x)&&(b.cx+=F.x),gr(F.y)&&(b.cy+=F.y)}),b.cx/=b.count||1,b.cy/=b.count||1,!0})})}},{key:"applyCalculate",value:function(e){var t=this,i=t.comboMap,s=t.nodes,u={};s.forEach(function(c,f){s.forEach(function(d,h){if(!(f<h)){var p=c.x-d.x||.005,m=c.y-d.y||.005,b=p*p+m*m,E=Math.sqrt(b);b<1&&(b=E),u["".concat(c.id,"-").concat(d.id)]={vx:p,vy:m,vl2:b,vl:E},u["".concat(d.id,"-").concat(c.id)]={vl2:b,vl:E,vx:-p,vy:-m}}})}),t.updateComboSizes(i),t.calRepulsive(e,u),t.calAttractive(e,u);var l=t.preventComboOverlap;l&&t.comboNonOverlapping(e,i)}},{key:"updateComboSizes",value:function(e){var t=this,i=t.comboTrees,s=t.nodeMap,u=t.nodeSize,l=t.comboSpacing,c=t.comboPadding;(i||[]).forEach(function(f){var d=[];z2(f,function(h){if(h.itemType==="node")return!0;var p=e[h.id];if(!p)return!1;var m=h.children;m&&m.forEach(function(x){!e[x.id]&&!s[x.id]||d.push(x)}),p.minX=Infinity,p.minY=Infinity,p.maxX=-Infinity,p.maxY=-Infinity,d.forEach(function(x){if(x.itemType!=="node")return!0;var O=s[x.id];if(!O)return!0;var D=u(O),I=O.x-D,F=O.y-D,H=O.x+D,$=O.y+D;p.minX>I&&(p.minX=I),p.minY>F&&(p.minY=F),p.maxX<H&&(p.maxX=H),p.maxY<$&&(p.maxY=$)});var b=t.oriComboMap[h.id].size||10;js(b)&&(b=b[0]);var E=Math.max(p.maxX-p.minX,p.maxY-p.minY,b);return p.r=E/2+l(p)/2+c(p),!0})})}},{key:"comboNonOverlapping",value:function(e,t){var i=this,s=i.comboTree,u=i.comboCollideStrength,l=i.indexMap,c=i.nodeMap;z2(s,function(f){if(!t[f.id]&&!c[f.id]&&f.id!=="comboTreeRoot")return!1;var d=f.children;return d&&d.length>1&&d.forEach(function(h,p){if(h.itemType==="node")return!1;var m=t[h.id];!m||d.forEach(function(b,E){if(p<=E||b.itemType==="node")return!1;var x=t[b.id];if(!x)return!1;var O=m.cx-x.cx||.005,D=m.cy-x.cy||.005,I=O*O+D*D,F=m.r||1,H=x.r||1,$=F+H,se=H*H,de=F*F;if(I<$*$){var Ee=h.children;if(!Ee||Ee.length===0)return!1;var Oe=b.children;if(!Oe||Oe.length===0)return!1;var $e=Math.sqrt(I),tt=($-$e)/$e*u,Le=O*tt,it=D*tt,It=se/(de+se),tn=1-It;Ee.forEach(function(bn){if(bn.itemType!=="node")return!1;if(!!c[bn.id]){var dn=l[bn.id];Oe.forEach(function(en){if(en.itemType!=="node"||!c[en.id])return!1;var Vn=l[en.id];e[dn].x+=Le*It,e[dn].y+=it*It,e[Vn].x-=Le*tn,e[Vn].y-=it*tn})}})}})}),!0})}},{key:"calRepulsive",value:function(e,t){var i=this,s=i.nodes,u=i.width*i.optimizeRangeFactor,l=i.nodeStrength,c=i.alpha,f=i.nodeCollideStrength,d=i.preventNodeOverlap,h=i.nodeSize,p=i.nodeSpacing,m=i.depthRepulsiveForceScale,b=i.center;s.forEach(function(E,x){if(!(!E.x||!E.y)){if(b){var O=i.gravity,D=E.x-b[0]||.005,I=E.y-b[1]||.005,F=Math.sqrt(D*D+I*I);e[x].x-=D*O*c/F,e[x].y-=I*O*c/F}s.forEach(function(H,$){if(x!==$&&!(!H.x||!H.y)){var se=t["".concat(E.id,"-").concat(H.id)],de=se.vl2,Ee=se.vl;if(!(Ee>u)){var Oe=t["".concat(E.id,"-").concat(H.id)],$e=Oe.vx,tt=Oe.vy,Le=Math.log(Math.abs(H.depth-E.depth)/10)+1||1;Le=Le<1?1:Le,H.comboId!==E.comboId&&(Le+=1);var it=Le?Math.pow(m,Le):1,It=l(H)*c/de*it;if(e[x].x+=$e*It,e[x].y+=tt*It,x<$&&d){var tn=h(E)+p(E)||1,bn=h(H)+p(H)||1,dn=tn+bn;if(de<dn*dn){var en=(dn-Ee)/Ee*f,Vn=bn*bn,jt=Vn/(tn*tn+Vn),Cn=$e*en,jn=tt*en;e[x].x+=Cn*jt,e[x].y+=jn*jt,jt=1-jt,e[$].x-=Cn*jt,e[$].y-=jn*jt}}}}})}})}},{key:"calAttractive",value:function(e,t){var i=this,s=i.edges,u=i.linkDistance,l=i.alpha,c=i.edgeStrength,f=i.bias,d=i.depthAttractiveForceScale;s.forEach(function(h,p){var m=Qi(h,"source"),b=Qi(h,"target");if(!(!m||!b||m===b)){var E=i.indexMap[m],x=i.indexMap[b],O=i.nodeMap[m],D=i.nodeMap[b];if(!(!O||!D)){var I=O.depth===D.depth?0:Math.log(Math.abs(O.depth-D.depth)/10);O.comboId===D.comboId&&(I=I/2);var F=I?Math.pow(d,I):1;if(O.comboId!==D.comboId&&F===1?F=d/2:O.comboId===D.comboId&&(F=2),!(!gr(D.x)||!gr(O.x)||!gr(D.y)||!gr(O.y))){var H=t["".concat(b,"-").concat(m)],$=H.vl,se=H.vx,de=H.vy,Ee=($-u(h))/$*l*c(h)*F,Oe=se*Ee,$e=de*Ee,tt=f[p];e[x].x-=Oe*tt,e[x].y-=$e*tt,e[E].x+=Oe*(1-tt),e[E].y+=$e*(1-tt)}}}})}},{key:"getType",value:function(){return"comboForce"}}]),r}(qs),ZX=function(){function o(a){Object(Ie.a)(this,o),this.id=a.id||0,this.rx=a.rx,this.ry=a.ry,this.fx=0,this.fy=0,this.mass=a.mass,this.degree=a.degree,this.g=a.g||0}return Object(pe.a)(o,[{key:"distanceTo",value:function(r){var n=this.rx-r.rx,e=this.ry-r.ry;return Math.hypot(n,e)}},{key:"setPos",value:function(r,n){this.rx=r,this.ry=n}},{key:"resetForce",value:function(){this.fx=0,this.fy=0}},{key:"addForce",value:function(r){var n=r.rx-this.rx,e=r.ry-this.ry,t=Math.hypot(n,e);t=t<1e-4?1e-4:t;var i=this.g*(this.degree+1)*(r.degree+1)/t;this.fx+=i*n/t,this.fy+=i*e/t}},{key:"in",value:function(r){return r.contains(this.rx,this.ry)}},{key:"add",value:function(r){var n=this.mass+r.mass,e=(this.rx*this.mass+r.rx*r.mass)/n,t=(this.ry*this.mass+r.ry*r.mass)/n,i=this.degree+r.degree,s={rx:e,ry:t,mass:n,degree:i};return new o(s)}}]),o}(),JX=function(){function o(a){Object(Ie.a)(this,o),this.xmid=a.xmid,this.ymid=a.ymid,this.length=a.length,this.massCenter=a.massCenter||[0,0],this.mass=a.mass||1}return Object(pe.a)(o,[{key:"getLength",value:function(){return this.length}},{key:"contains",value:function(r,n){var e=this.length/2;return r<=this.xmid+e&&r>=this.xmid-e&&n<=this.ymid+e&&n>=this.ymid-e}},{key:"NW",value:function(){var r=this.xmid-this.length/4,n=this.ymid+this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},i=new o(t);return i}},{key:"NE",value:function(){var r=this.xmid+this.length/4,n=this.ymid+this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},i=new o(t);return i}},{key:"SW",value:function(){var r=this.xmid-this.length/4,n=this.ymid-this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},i=new o(t);return i}},{key:"SE",value:function(){var r=this.xmid+this.length/4,n=this.ymid-this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},i=new o(t);return i}}]),o}(),QX=function(){function o(a){Object(Ie.a)(this,o),this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,a!=null&&(this.quad=a)}return Object(pe.a)(o,[{key:"insert",value:function(r){if(this.body==null){this.body=r;return}this._isExternal()?(this.quad&&(this.NW=new o(this.quad.NW()),this.NE=new o(this.quad.NE()),this.SW=new o(this.quad.SW()),this.SE=new o(this.quad.SE())),this._putBody(this.body),this._putBody(r),this.body=this.body.add(r)):(this.body=this.body.add(r),this._putBody(r))}},{key:"_putBody",value:function(r){!this.quad||(r.in(this.quad.NW())&&this.NW?this.NW.insert(r):r.in(this.quad.NE())&&this.NE?this.NE.insert(r):r.in(this.quad.SW())&&this.SW?this.SW.insert(r):r.in(this.quad.SE())&&this.SE&&this.SE.insert(r))}},{key:"_isExternal",value:function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}},{key:"updateForce",value:function(r){if(!(this.body==null||r===this.body))if(this._isExternal())r.addForce(this.body);else{var n=this.quad?this.quad.getLength():0,e=this.body.distanceTo(r);n/e<this.theta?r.addForce(this.body):(this.NW&&this.NW.updateForce(r),this.NE&&this.NE.updateForce(r),this.SW&&this.SW.updateForce(r),this.SE&&this.SE.updateForce(r))}}}]),o}(),qX=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.kr=5,e.kg=1,e.mode="normal",e.preventOverlap=!1,e.dissuadeHubs=!1,e.barnesHut=void 0,e.maxIteration=0,e.ks=.1,e.ksmax=10,e.tao=.1,e.onLayoutEnd=function(){},e.prune=void 0,e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{}}},{key:"execute",value:function(){var e=this,t=e.nodes,i=e.onLayoutEnd,s=e.prune,u=e.maxIteration;!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);for(var l=[],c=t.length,f=0;f<c;f+=1){var d=t[f],h=10,p=10;gr(d.size)&&(h=d.size,p=d.size),js(d.size)?(isNaN(d.size[0])||(h=d.size[0]),isNaN(d.size[1])||(p=d.size[1])):Nf(d.size)&&(h=d.size.width,p=d.size.height),e.getWidth&&!isNaN(e.getWidth(d))&&(p=e.getWidth(d)),e.getHeight&&!isNaN(e.getHeight(d))&&(h=e.getHeight(d));var m=Math.max(h,p);l.push(m)}e.barnesHut===void 0&&c>250&&(e.barnesHut=!0),e.prune===void 0&&c>100&&(e.prune=!0),this.maxIteration===0&&!e.prune?(u=250,c<=200&&c>100?u=1e3:c>200&&(u=1200),this.maxIteration=u):this.maxIteration===0&&s&&(u=100,c<=200&&c>100?u=500:c>200&&(u=950),this.maxIteration=u),e.kr||(e.kr=50,c>100&&c<=500?e.kr=20:c>500&&(e.kr=1)),e.kg||(e.kg=20,c>100&&c<=500?e.kg=10:c>500&&(e.kg=1)),this.nodes=e.updateNodesByForces(l),i()}},{key:"updateNodesByForces",value:function(e){for(var t=this,i=t.edges,s=t.maxIteration,u=t.nodes,l=i.filter(function(Ee){var Oe=Qi(Ee,"source"),$e=Qi(Ee,"target");return Oe!==$e}),c=u.length,f=l.length,d=[],h={},p={},m=[],b=0;b<c;b+=1)h[u[b].id]=b,d[b]=0,(u[b].x===void 0||isNaN(u[b].x))&&(u[b].x=Math.random()*1e3),(u[b].y===void 0||isNaN(u[b].y))&&(u[b].y=Math.random()*1e3),m.push({x:u[b].x,y:u[b].y});for(var E=0;E<f;E+=1){for(var x=void 0,O=void 0,D=0,I=0,F=0;F<c;F+=1){var H=Qi(l[E],"source"),$=Qi(l[E],"target");u[F].id===H?(x=u[F],D=F):u[F].id===$&&(O=u[F],I=F),p[E]={sourceIdx:D,targetIdx:I}}x&&(d[h[x.id]]+=1),O&&(d[h[O.id]]+=1)}var se=s;if(u=this.iterate(se,h,p,f,d,e),t.prune){for(var de=0;de<f;de+=1)d[p[de].sourceIdx]<=1?(u[p[de].sourceIdx].x=u[p[de].targetIdx].x,u[p[de].sourceIdx].y=u[p[de].targetIdx].y):d[p[de].targetIdx]<=1&&(u[p[de].targetIdx].x=u[p[de].sourceIdx].x,u[p[de].targetIdx].y=u[p[de].sourceIdx].y);t.prune=!1,t.barnesHut=!1,se=100,u=this.iterate(se,h,p,f,d,e)}return u}},{key:"iterate",value:function(e,t,i,s,u,l){for(var c=this,f=c.nodes,d=c.kr,h=c.preventOverlap,p=c.barnesHut,m=f.length,b=0,E=100,x=e,O=50,D=[],I=[],F=[],H=0;H<m;H+=1)if(D[2*H]=0,D[2*H+1]=0,p){var $={id:H,rx:f[H].x,ry:f[H].y,mass:1,g:d,degree:u[H]};F[H]=new ZX($)}for(;x>0;){for(var se=0;se<m;se+=1)I[2*se]=D[2*se],I[2*se+1]=D[2*se+1],D[2*se]=0,D[2*se+1]=0;D=this.getAttrForces(x,O,s,t,i,u,l,D),p&&(h&&x>O||!h)?D=this.getOptRepGraForces(D,F,u):D=this.getRepGraForces(x,O,D,E,l,u);var de=this.updatePos(D,I,b,u);f=de.nodes,b=de.sg,x--,c.tick&&c.tick()}return f}},{key:"getAttrForces",value:function(e,t,i,s,u,l,c,f){for(var d=this,h=d.nodes,p=d.preventOverlap,m=d.dissuadeHubs,b=d.mode,E=d.prune,x=0;x<i;x+=1){var O=h[u[x].sourceIdx],D=u[x].sourceIdx,I=h[u[x].targetIdx],F=u[x].targetIdx;if(!(E&&(l[D]<=1||l[F]<=1))){var H=[I.x-O.x,I.y-O.y],$=Math.hypot(H[0],H[1]);$=$<1e-4?1e-4:$,H[0]=H[0]/$,H[1]=H[1]/$,p&&e<t&&($=$-c[D]-c[F]);var se=$,de=se;b==="linlog"&&(se=Math.log(1+$),de=se),m&&(se=$/l[D],de=$/l[F]),p&&e<t&&$<=0?(se=0,de=0):p&&e<t&&$>0&&(se=$,de=$),f[2*s[O.id]]+=se*H[0],f[2*s[I.id]]-=de*H[0],f[2*s[O.id]+1]+=se*H[1],f[2*s[I.id]+1]-=de*H[1]}}return f}},{key:"getRepGraForces",value:function(e,t,i,s,u,l){for(var c=this,f=c.nodes,d=c.preventOverlap,h=c.kr,p=c.kg,m=c.center,b=c.prune,E=f.length,x=0;x<E;x+=1){for(var O=x+1;O<E;O+=1)if(!(b&&(l[x]<=1||l[O]<=1))){var D=[f[O].x-f[x].x,f[O].y-f[x].y],I=Math.hypot(D[0],D[1]);I=I<1e-4?1e-4:I,D[0]=D[0]/I,D[1]=D[1]/I,d&&e<t&&(I=I-u[x]-u[O]);var F=h*(l[x]+1)*(l[O]+1)/I;d&&e<t&&I<0?F=s*(l[x]+1)*(l[O]+1):d&&e<t&&I===0?F=0:d&&e<t&&I>0&&(F=h*(l[x]+1)*(l[O]+1)/I),i[2*x]-=F*D[0],i[2*O]+=F*D[0],i[2*x+1]-=F*D[1],i[2*O+1]+=F*D[1]}var H=[f[x].x-m[0],f[x].y-m[1]],$=Math.hypot(H[0],H[1]);H[0]=H[0]/$,H[1]=H[1]/$;var se=p*(l[x]+1);i[2*x]-=se*H[0],i[2*x+1]-=se*H[1]}return i}},{key:"getOptRepGraForces",value:function(e,t,i){for(var s=this,u=s.nodes,l=s.kg,c=s.center,f=s.prune,d=u.length,h=9e10,p=-9e10,m=9e10,b=-9e10,E=0;E<d;E+=1)f&&i[E]<=1||(t[E].setPos(u[E].x,u[E].y),u[E].x>=p&&(p=u[E].x),u[E].x<=h&&(h=u[E].x),u[E].y>=b&&(b=u[E].y),u[E].y<=m&&(m=u[E].y));for(var x=Math.max(p-h,b-m),O={xmid:(p+h)/2,ymid:(b+m)/2,length:x,massCenter:c,mass:d},D=new JX(O),I=new QX(D),F=0;F<d;F+=1)f&&i[F]<=1||t[F].in(D)&&I.insert(t[F]);for(var H=0;H<d;H+=1)if(!(f&&i[H]<=1)){t[H].resetForce(),I.updateForce(t[H]),e[2*H]-=t[H].fx,e[2*H+1]-=t[H].fy;var $=[u[H].x-c[0],u[H].y-c[1]],se=Math.hypot($[0],$[1]);se=se<1e-4?1e-4:se,$[0]=$[0]/se,$[1]=$[1]/se;var de=l*(i[H]+1);e[2*H]-=de*$[0],e[2*H+1]-=de*$[1]}return e}},{key:"updatePos",value:function(e,t,i,s){for(var u=this,l=u.nodes,c=u.ks,f=u.tao,d=u.prune,h=u.ksmax,p=l.length,m=[],b=[],E=0,x=0,O=0;O<p;O+=1)if(!(d&&s[O]<=1)){var D=[e[2*O]-t[2*O],e[2*O+1]-t[2*O+1]],I=Math.hypot(D[0],D[1]),F=[e[2*O]+t[2*O],e[2*O+1]+t[2*O+1]],H=Math.hypot(F[0],F[1]);m[O]=I,b[O]=H/2,E+=(s[O]+1)*m[O],x+=(s[O]+1)*b[O]}var $=i;i=f*x/E,$!==0&&(i=i>1.5*$?1.5*$:i);for(var se=0;se<p;se+=1)if(!(d&&s[se]<=1)){var de=c*i/(1+i*Math.sqrt(m[se])),Ee=Math.hypot(e[2*se],e[2*se+1]);Ee=Ee<1e-4?1e-4:Ee;var Oe=h/Ee;de=de>Oe?Oe:de;var $e=de*e[2*se],tt=de*e[2*se+1];l[se].x+=$e,l[se].y+=tt}return{nodes:l,sg:i}}}]),r}(qs),vC=function(){function o(){Object(Ie.a)(this,o),this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return Object(pe.a)(o,[{key:"init",value:function(r,n,e){this.cells=[],this.CELL_W=e.CELL_W||o.DEFAULT_CELL_W,this.CELL_H=e.CELL_H||o.DEFAULT_CELL_H,this.columnNum=Math.ceil(r/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),o.MIN_DIST=Math.pow(r,2)+Math.pow(n,2);for(var t=0;t<this.columnNum;t++){for(var i=[],s=0;s<this.rowNum;s++){var u={dx:t,dy:s,x:t*this.CELL_W,y:s*this.CELL_H,occupied:!1};i.push(u)}this.cells.push(i)}}},{key:"findGridByNodeId",value:function(r){for(var n,e,t=0;t<this.columnNum;t++)for(var i=0;i<this.rowNum;i++)if(this.cells[t][i].node&&((e=(n=this.cells[t][i])===null||n===void 0?void 0:n.node)===null||e===void 0?void 0:e.id)===r)return{column:t,row:i};return null}},{key:"sqdist",value:function(r,n){return Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)}},{key:"occupyNearest",value:function(r){for(var n=o.MIN_DIST,e,t=null,i=0;i<this.columnNum;i++)for(var s=0;s<this.rowNum;s++)!this.cells[i][s].occupied&&(e=this.sqdist(r,this.cells[i][s]))<n&&(n=e,t=this.cells[i][s]);return t&&(t.occupied=!0),t}},{key:"insertColumn",value:function(r,n){if(!(n<=0)){for(var e=0;e<n;e++){this.cells[e+this.columnNum]=[];for(var t=0;t<this.rowNum;t++)this.cells[e+this.columnNum][t]={dx:e,dy:t,x:e*this.CELL_W,y:t*this.CELL_H,occupied:!1,node:null}}for(var i=this.columnNum-1;i>r;i--)for(var s=0;s<this.rowNum;s++)this.cells[i+n][s]=Object.assign(Object.assign({},this.cells[i][s]),{x:(i+n)*this.CELL_W,y:s*this.CELL_H}),this.cells[i][s]={x:i*this.CELL_W,y:s*this.CELL_H,occupied:!0,node:null};for(var u=0;u<this.additionColumn.length;u++)this.additionColumn[u]>=r&&(this.additionColumn[u]+=n);for(var l=0;l<n;l++)this.additionColumn.push(r+l+1);this.columnNum+=n}}},{key:"insertRow",value:function(r,n){if(!(n<=0)){for(var e=0;e<n;e++)for(var t=0;t<this.columnNum;t++)this.cells[t][e+this.rowNum]={dx:t,dy:e,x:t*this.CELL_W,y:e*this.CELL_H,occupied:!1,node:null};for(var i=0;i<this.columnNum;i++)for(var s=this.rowNum-1;s>r;s--)this.cells[i][s+n]=Object.assign(Object.assign({},this.cells[i][s]),{dx:i,dy:s+n,x:i*this.CELL_W,y:(s+n)*this.CELL_H}),this.cells[i][s]={dx:i,dy:s,x:i*this.CELL_W,y:s*this.CELL_H,occupied:!1,node:null};for(var u=0;u<this.additionRow.length;u++)this.additionRow[u]>=r&&(this.additionRow[u]+=n);for(var l=0;l<n;l++)this.additionRow.push(r+l+1);this.rowNum+=n}}},{key:"getNodes",value:function(){for(var r=[],n=0;n<this.columnNum;n++)for(var e=0;e<this.rowNum;e++)this.cells[n][e].node&&r.push(this.cells[n][e]);return r}}]),o}();vC.MIN_DIST=50,vC.DEFAULT_CELL_W=80,vC.DEFAULT_CELL_H=80;function eK(o,a){if(!o.nodes||o.nodes.length===0)return o;var r=a.width,n=a.height,e=a.nodeMinGap,t=1e4,i=1e4;o.nodes.forEach(function($){var se=$.size[0]||50,de=$.size[1]||50;t=Math.min(se,t),i=Math.min(de,i)});var s=new vC;s.init(r,n,{CELL_H:i,CELL_W:t}),o.nodes.forEach(function($){var se=s.occupyNearest($);se&&(se.node={id:$.id,size:$.size},$.x=se.x,$.y=se.y,$.dx=se.dx,$.dy=se.dy)});for(var u=0;u<o.nodes.length;u++){var l=o.nodes[u],c=s.findGridByNodeId(l.id);if(!c)throw new Error("can not find node cell");var f=c.column,d=c.row;if(l.size[0]+e>t){for(var h=Math.ceil((l.size[0]+e)/t)-1,p=h,m=0;m<h;m++){var b=s.additionColumn.indexOf(f+m+1)>-1;if(b&&!s.cells[f+m+1][d].node)p--;else break}s.insertColumn(f,p)}if(l.size[1]+e>i){for(var E=Math.ceil((l.size[1]+e)/i)-1,x=E,O=0;O<E;O++){var D=s.additionRow.indexOf(d+O+1)>-1;if(D&&!s.cells[f][d+O+1].node)x--;else break}s.insertRow(d,x)}}for(var I=0;I<s.columnNum;I++)for(var F=function(se){var de=s.cells[I][se];if(de.node){var Ee=o.nodes.find(function(Oe){var $e;return Oe.id===(($e=de==null?void 0:de.node)===null||$e===void 0?void 0:$e.id)});Ee&&(Ee.x=de.x+Ee.size[0]/2,Ee.y=de.y+Ee.size[1]/2)}},H=0;H<s.rowNum;H++)F(H)}var kN=1200,DN=800,gC=1e7,sy=10,IN=3.141592653589793,QM=1.5707963267948966,tK=IN*.375,nK=IN*.625,pC=new Map,rK=10,iK=10,qM=.8,RN=.1,aK=.5;function oK(o,a,r){var n=o.x-o.size[0]/2,e=o.y-o.size[1]/2,t=o.x+o.size[0]/2,i=o.y+o.size[1]/2,s=a.x-a.size[0]/2,u=a.y-a.size[1]/2,l=a.x+a.size[0]/2,c=a.y+a.size[1]/2,f=o.x,d=o.y,h=a.x,p=a.y,m=h-f,b=Math.atan2(m,p-d),E=0,x=0,O=0,D=0;b>QM?(x=e-c,E=s-t,O=parseFloat(x?(x/Math.cos(b)).toFixed(2):E.toFixed(2)),D=parseFloat(E?(E/Math.sin(b)).toFixed(2):x.toFixed(2))):0<b&&b<=QM?(x=u-i,E=s-t,x>E?O=D=parseFloat(x?(x/Math.cos(b)).toFixed(2):E.toFixed(2)):O=D=parseFloat(E?(E/Math.sin(b)).toFixed(2):x.toFixed(2))):b<-QM?(x=e-c,E=-(l-n),x>E?O=D=parseFloat(x?(x/Math.cos(b)).toFixed(2):E.toFixed(2)):O=D=parseFloat(E?(E/Math.sin(b)).toFixed(2):x.toFixed(2))):(x=u-i,Math.abs(m)>(t-n)/2?E=n-l:E=m,x>E?O=D=parseFloat(x?(x/Math.cos(b)).toFixed(2):E.toFixed(2)):O=D=parseFloat(E&&b!==0?(E/Math.sin(b)).toFixed(2):x.toFixed(2)));var I=parseFloat(b.toFixed(2)),F=r;return r&&(F=tK<I&&I<nK),{distance:Math.abs(O<D?O:D),isHoriz:F}}function NN(o,a){var r=pC.get(o.id)||[],n=r.find(function(it){return it.source===a.id||it.target===a.id}),e=o.size[0]*o.size[1],t=a.size[0]*a.size[1],i=e>t?a:o,s=e>t?o:a,u=i.x-i.size[0]/2,l=i.y-i.size[1]/2,c=i.x+i.size[0]/2,f=i.y+i.size[1]/2,d=s.x-s.size[0]/2,h=s.y-s.size[1]/2,p=s.x+s.size[0]/2,m=s.y+s.size[1]/2,b=i.x,E=i.y,x=s.x,O=s.y,D=c>=d&&p>=u&&f>=h&&m>=l,I=0,F=0;if(D){F=Math.sqrt(Math.pow(x-b,2)+Math.pow(O-E,2));var H=u>d?u:d,$=l>h?l:h,se=c<p?c:p,de=f<m?f:m,Ee=se-H,Oe=de-$,$e=Ee*Oe;F===0&&(F=1e-7),I=sy*1/F*100+$e,I*=gC}else{var tt=!1,Le=oK(i,s,tt);F=Le.distance,tt=Le.isHoriz,F<=sy?F!==0?n?I+=sy+gC*1/F:I+=sy+gC*sy/F:I+=gC:(I+=F,n&&(I+=F*F))}return I}function LN(o){for(var a=0,r=0;r<o.length;r++){var n=o[r];(n.x<0||n.y<0||n.x>kN||n.y>DN)&&(a+=1e12);for(var e=r+1;e<o.length;e++)a+=NN(n,o[e])}return a}function sK(o,a,r,n){var e=new Map;r.forEach(function(b,E){e.set(b.id,b)});var t=n.filter(function(b){return b.source===o.id||b.target===o.id})||[],i=[];t.forEach(function(b){var E=b.source===o.id?b.target:b.source,x=e.get(E);x&&i.push(x)});for(var s=!0,u=0;u<i.length;u++){var l=i[u],c=Math.atan((o.y-l.y)/(l.x-o.y))*180,f=Math.atan((a.y-l.y)/(l.x-a.y))*180,d=c<30||c>150,h=f<30||f>150,p=c>70&&c<110,m=f>70&&f<110;if(d&&!h||c*f<0){s=!1;break}else if(p&&!m||c*f<0){s=!1;break}else if((l.x-o.x)*(l.x-a.x)<0){s=!1;break}else if((l.y-o.y)*(l.y-a.y)<0){s=!1;break}}return s}function uK(o,a){for(var r=!1,n=1,e=rK*n,t=iK*n,i=[e,-e,0,0],s=[0,0,t,-t],u=0;u<o.length;++u)for(var l=o[u],c=jN(l,o),f=0;f<i.length;f++){var d=sK(l,{x:l.x+i[f],y:l.y+s[f]},o,a);if(d){l.x+=i[f],l.y+=s[f];var h=jN(l,o),p=Math.random();h<c||p<qM&&p>RN?(c=h,r=!0):(l.x-=i[f],l.y-=s[f])}}return qM>RN&&(qM*=aK),r?LN(o):0}function jN(o,a){var r=0;(o.x<0||o.y<0||o.x+o.size[0]+20>kN||o.y+o.size[1]+20>DN)&&(r+=1e12);for(var n=0;n<a.length;++n)o.id!==a[n].id&&(r+=NN(o,a[n]));return r}function lK(o,a){if(o.length===0)return{nodes:o,edges:a};o.forEach(function(l){var c=a.filter(function(f){return f.source===l.id||f.target===l.id});pC.set(l,c)}),o.sort(function(l,c){var f,d;return((f=pC.get(l.id))===null||f===void 0?void 0:f.length)-((d=pC.get(c.id))===null||d===void 0?void 0:d.length)});for(var r=LN(o),n=20,e=1,t=0,i=50,s=0;n>0&&(s++,!(s>=i));){var u=uK(o,a);u!==0&&(t=u),e=t-r,r=t,e===0?--n:n=20}return o.forEach(function(l){l.x=l.x-l.size[0]/2,l.y=l.y-l.size[1]/2}),{nodes:o,edges:a}}var cK=lK;function fK(o,a){var r=o.nodes,n=o.edges,e=a.width,t=a.height;if(!(r==null?void 0:r.length))return Promise.resolve();var i=[];r.forEach(function(m){var b=n.filter(function(x){return x.source===m.id||x.target===m.id});if(b.length>1){var E=Object.assign({},m);delete E.size,i.push(E)}});var s=[];n.forEach(function(m){var b=i.find(function(x){return x.id===m.source}),E=i.find(function(x){return x.id===m.target});b&&E&&s.push(m)});var u=new T3({type:"dagre",ranksep:a.nodeMinGap,nodesep:a.nodeMinGap}),l=u.layout({nodes:i,edges:s}),c=l.nodes;r.forEach(function(m){var b=(c||[]).find(function(E){return E.id===m.id});m.x=(b==null?void 0:b.x)||e/2,m.y=(b==null?void 0:b.y)||t/2});var f=JSON.parse(JSON.stringify(r)),d=JSON.parse(JSON.stringify(n)),h=hM().nodes(f).force("link",$2(d).id(function(m){return m.id}).distance(function(m){var b=s.find(function(E){return E.source===m.source&&E.target===m.target});return b?30:20})).force("charge",vM()).force("center",zD(e/2,t/2)).force("x",HD(e/2)).force("y",WD(t/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),p=new Promise(function(m){h.on("end",function(){r.forEach(function(F){var H=f.find(function($){return $.id===F.id});H&&(F.x=H.x,F.y=H.y)});var b=Math.min.apply(Math,Object(ot.a)(r.map(function(F){return F.x}))),E=Math.max.apply(Math,Object(ot.a)(r.map(function(F){return F.x}))),x=Math.min.apply(Math,Object(ot.a)(r.map(function(F){return F.y}))),O=Math.max.apply(Math,Object(ot.a)(r.map(function(F){return F.y}))),D=e/(E-b),I=t/(O-x);r.forEach(function(F){F.x!==void 0&&D<1&&(F.x=(F.x-b)*D),F.y!==void 0&&I<1&&(F.y=(F.y-x)*I)}),r.forEach(function(F){F.sizeTemp=F.size,F.size=[10,10]}),cK(r,n),r.forEach(function(F){F.size=F.sizeTemp||[],delete F.sizeTemp}),eK({nodes:r,edges:n},a),m()})});return p}var dK=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(n){var e;return Object(Ie.a)(this,r),e=a.call(this),e.width=300,e.height=300,e.nodeMinGap=50,e.onLayoutEnd=function(){},n&&e.updateCfg(n),e}return Object(pe.a)(r,[{key:"getDefaultCfg",value:function(){return{width:300,height:300,nodeMinGap:50}}},{key:"execute",value:function(){var e=this,t=e.nodes,i=e.edges;return t==null||t.forEach(function(s){s.size||(s.size=[50,50])}),fK({nodes:t,edges:i},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){e.onLayoutEnd&&e.onLayoutEnd()})}},{key:"getType",value:function(){return"er"}}]),r}(qs),Nq=function(){function o(a){Object(Ie.a)(this,o);var r=rV(a.type);this.layoutInstance=new r(a)}return Object(pe.a)(o,[{key:"layout",value:function(r){return this.layoutInstance.layout(r)}},{key:"updateCfg",value:function(r){this.layoutInstance.updateCfg(r)}},{key:"init",value:function(r){this.layoutInstance.init(r)}},{key:"execute",value:function(){this.layoutInstance.execute()}},{key:"getDefaultCfg",value:function(){return this.layoutInstance.getDefaultCfg()}},{key:"destroy",value:function(){return this.layoutInstance.destroy()}}]),o}(),hK={force:UV,fruchterman:FH,forceAtlas2:qX,gForce:oV,dagre:T3,circular:KV,radial:NH,concentric:LH,grid:iV,mds:jH,comboForce:YX,random:aV,"gForce-gpu":KX,"fruchterman-gpu":WX,er:dK},mC;(function(o){o.command=wi.GRAPH_LAYOUT,o.hookKey="graphLayout"})(mC||(mC={}));var uy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.graphLayout.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E;return Object(k.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return h=f.layoutType,p=f.layoutOptions,m=f.customLayout,b=function(I){var F=hK[h],H=new F(Object.assign({},p));return H.layout(I)},E=m||b,O.next=5,E(f.graphData);case 5:return O.abrupt("return",{graphData:f.graphData});case 6:case"end":return O.stop()}},d)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],uy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],uy.prototype,"init",null),uy=nt([Object(Pe.injectable)({token:{token:Mi,named:mC.command.id}})],uy);var yC;(function(o){function a(n,e){return Object(Uc.isEqual)(n,e)}o.isNodeEqual=a;function r(n,e){return Object(Uc.isEqual)(n,e)}o.isEdgeEqual=r})(yC||(yC={}));var bC;(function(o){o.command=wi.GRAPH_RENDER,o.hookKey="graphRender"})(bC||(bC={}));var ly=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.graphRender.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E,x,O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,this.ctx.getX6Graph();case 2:return h=I.sent,I.next=5,this.ctx.getGraphMeta();case 5:return p=I.sent,m=f.beforeRender,b=f.graphData,E=f.isNodeEqual,x=f.isEdgeEqual,O=f.afterRender,m&&m(p),I.next=10,this.doLoadGraph(h,b,E,x);case 10:return O&&O(b,p),I.abrupt("return",{});case 12:case"end":return I.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))},this.doLoadGraph=function(r,n,e,t){return ue(a,void 0,void 0,Object(k.a)().mark(function i(){var s=this,u,l,c,f,d,h,p,m,b,E,x,O,D,I,F,H,$,se,de,Ee,Oe,$e,tt,Le,it,It,tn,bn,dn,en;return Object(k.a)().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:(r==null?void 0:r.isFrozen())||r==null||r.freeze(),u=this.ctx.getCommands(),l=this.graphDataDiff(r,n,e,t),c=l.addNodeConfigs,f=l.addEdgeConfigs,d=l.removeNodes,h=l.removeEdges,p=l.updateNodes,m=l.updateEdges,b=Object(ir.a)(p),jt.prev=4,b.s();case 6:if((E=b.n()).done){jt.next=13;break}return x=E.value,O=x==null?void 0:x.getData(),jt.next=11,u.executeCommand(fa.UPDATE_NODE.id,{nodeConfig:O});case 11:jt.next=6;break;case 13:jt.next=18;break;case 15:jt.prev=15,jt.t0=jt.catch(4),b.e(jt.t0);case 18:return jt.prev=18,b.f(),jt.finish(18);case 21:D=Object(ir.a)(m),jt.prev=22,D.s();case 24:if((I=D.n()).done){jt.next=31;break}return F=I.value,H=F==null?void 0:F.getData(),jt.next=29,u.executeCommand(to.UPDATE_EDGE.id,{edgeConfig:H});case 29:jt.next=24;break;case 31:jt.next=36;break;case 33:jt.prev=33,jt.t1=jt.catch(22),D.e(jt.t1);case 36:return jt.prev=36,D.f(),jt.finish(36);case 39:$=Object(ir.a)(c),jt.prev=40,$.s();case 42:if((se=$.n()).done){jt.next=48;break}return de=se.value,jt.next=46,u.executeCommand(fa.ADD_NODE.id,{nodeConfig:de,options:{isRenderGraph:!0}},{name:"remove servcie",handler:function(jn){return ue(s,void 0,void 0,Object(k.a)().mark(function Lr(){return Object(k.a)().wrap(function(Wr){for(;;)switch(Wr.prev=Wr.next){case 0:delete jn.createNodeService;case 1:case"end":return Wr.stop()}},Lr)}))}});case 46:jt.next=42;break;case 48:jt.next=53;break;case 50:jt.prev=50,jt.t2=jt.catch(40),$.e(jt.t2);case 53:return jt.prev=53,$.f(),jt.finish(53);case 56:return jt.next=58,u.executeCommand(ls.INIT_GROUP.id,{graphData:{nodes:c,edges:[]}});case 58:Ee=Object(ir.a)(f),jt.prev=59,Ee.s();case 61:if((Oe=Ee.n()).done){jt.next=67;break}return $e=Oe.value,jt.next=65,u.executeCommand(to.ADD_EDGE.id,{edgeConfig:$e,options:{isRenderGraph:!0}},{name:"remove servcie",handler:function(jn){return ue(s,void 0,void 0,Object(k.a)().mark(function Lr(){return Object(k.a)().wrap(function(Wr){for(;;)switch(Wr.prev=Wr.next){case 0:delete jn.createEdgeService;case 1:case"end":return Wr.stop()}},Lr)}))}});case 65:jt.next=61;break;case 67:jt.next=72;break;case 69:jt.prev=69,jt.t3=jt.catch(59),Ee.e(jt.t3);case 72:return jt.prev=72,Ee.f(),jt.finish(72);case 75:tt=Object(ir.a)(d),jt.prev=76,tt.s();case 78:if((Le=tt.n()).done){jt.next=90;break}if(it=Le.value,It=it==null?void 0:it.getData(),!It.isGroup){jt.next=86;break}return jt.next=84,u.executeCommand(ls.DEL_GROUP.id,{nodeConfig:It});case 84:jt.next=88;break;case 86:return jt.next=88,u.executeCommand(fa.DEL_NODE.id,{nodeConfig:It});case 88:jt.next=78;break;case 90:jt.next=95;break;case 92:jt.prev=92,jt.t4=jt.catch(76),tt.e(jt.t4);case 95:return jt.prev=95,tt.f(),jt.finish(95);case 98:tn=Object(ir.a)(h),jt.prev=99,tn.s();case 101:if((bn=tn.n()).done){jt.next=108;break}return dn=bn.value,en=dn==null?void 0:dn.getData(),jt.next=106,u.executeCommand(to.DEL_EDGE.id,{edgeConfig:en});case 106:jt.next=101;break;case 108:jt.next=113;break;case 110:jt.prev=110,jt.t5=jt.catch(99),tn.e(jt.t5);case 113:return jt.prev=113,tn.f(),jt.finish(113);case 116:(r==null?void 0:r.isFrozen())&&(r==null||r.unfreeze());case 117:case"end":return jt.stop()}},i,this,[[4,15,18,21],[22,33,36,39],[40,50,53,56],[59,69,72,75],[76,92,95,98],[99,110,113,116]])}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}},{key:"graphDataDiff",value:function(r,n,e,t){var i=n.nodes,s=n.edges,u=[];i.forEach(function(x){var O=r.getCellById(x==null?void 0:x.id);O||u.push(x)});var l=[],c=[],f=[],d=r.getNodes();d.forEach(function(x){var O=i.find(function(I){return(I==null?void 0:I.id)===(x==null?void 0:x.id)});if(!O)f.push(x);else{var D=!0;e?D=e(x==null?void 0:x.data,O):(x==null?void 0:x.data)&&O&&(D=yC.isNodeEqual(x==null?void 0:x.data,O)),D||x.setData(O,{deep:!1}),D===!0?l.push(x):c.push(x)}});var h=[];s.forEach(function(x){var O=r.getCellById(x==null?void 0:x.id);O||h.push(x)});var p=[],m=[],b=[],E=r.getEdges();return E.forEach(function(x){var O=s.find(function(I){return(I==null?void 0:I.id)===(x==null?void 0:x.id)});if(!O)b.push(x);else{var D=!0;t?D=t(x==null?void 0:x.data,O):(x==null?void 0:x.data)&&O&&(D=yC.isEdgeEqual(x==null?void 0:x.data,O)),D||x.setData(O,{deep:!1}),D===!0?p.push(x):m.push(x)}}),{addNodeConfigs:u,addEdgeConfigs:h,retainNodes:l,retainEdges:p,removeNodes:f,removeEdges:b,updateNodes:c,updateEdges:m}}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],ly.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],ly.prototype,"init",null),ly=nt([Object(Pe.injectable)({token:{token:Mi,named:bC.command.id}})],ly);var CC;(function(o){o.command=wi.GRAPH_RESIZE,o.hookKey="graphResize"})(CC||(CC={}));var cy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l,c,f;return Object(k.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),h.next=4,this.ctx.getGraphConfig();case 4:return u=h.sent,l=u.rootContainer.clientHeight,c=u.rootContainer.clientWidth,h.next=9,s.graphResize.call(t,function(p){return ue(n,void 0,void 0,Object(k.a)().mark(function m(){var b,E,x,O,D;return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.ctx.getX6Graph();case 2:return b=F.sent,E=p.width,x=E===void 0?c:E,O=p.height,D=O===void 0?l:O,b==null||b.resize(x,D),F.abrupt("return",{});case 6:case"end":return F.stop()}},m,this)}))},i);case 9:return f=h.sent,this.ctx.setResult(f),h.abrupt("return",this);case 12:case"end":return h.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],cy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],cy.prototype,"init",null),cy=nt([Object(Pe.injectable)({token:{token:Mi,named:CC.command.id}})],cy);var EC;(function(o){o.command=wi.GRAPH_FULLSCREEN,o.hookKey="graphFullscreen"})(EC||(EC={}));var fy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l,c;return Object(k.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),d.next=4,this.ctx.getGraphConfig();case 4:if(u=d.sent,l=u.appContainer,l){d.next=8;break}return d.abrupt("return");case 8:return d.next=10,s.graphFullscreen.call(t,function(){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p,m,b;return Object(k.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return b=!1,document.fullscreenElement?(m=document.exitFullscreen)===null||m===void 0||m.call(document):((p=l.requestFullscreen)===null||p===void 0||p.call(l),b=!0),x.abrupt("return",{fulllscreen:b});case 3:case"end":return x.stop()}},h)}))},i);case 10:return c=d.sent,this.ctx.setResult(c),d.abrupt("return",this);case 13:case"end":return d.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],fy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],fy.prototype,"init",null),fy=nt([Object(Pe.injectable)({token:{token:Mi,named:EC.command.id}})],fy);var dy;(function(o){o.command=wi.GRAPH_ZOOM,o.MAX_SCALE=1.5,o.MIN_SCALE=.05,o.defaultZoomOptions={maxScale:o.MAX_SCALE,minScale:o.MIN_SCALE},o.hookKey="graphZoom"})(dy||(dy={}));var hy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.graphZoom.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E,x;return Object(k.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.ctx.getX6Graph();case 2:return h=D.sent,p=f.factor,m=f.zoomFitPadding,b=m===void 0?12:m,E=f.zoomOptions,x=E===void 0?dy.defaultZoomOptions:E,typeof p=="number"?h==null||h.zoom(p,x||{}):p==="fit"?h==null||h.zoomToFit(Object.assign(Object.assign({},x),{padding:b})):p==="real"&&(h==null||h.scale(1),h==null||h.centerContent()),D.abrupt("return",{factor:p,zoomFitPadding:b,zoomOptions:x});case 6:case"end":return D.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],hy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],hy.prototype,"init",null),hy=nt([Object(Pe.injectable)({token:{token:Mi,named:dy.command.id}})],hy);var wC;(function(o){o.command=wi.GRAPH_COPY,o.hookKey="graphCopySelection"})(wC||(wC={}));var xC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.parseCells=function(r){r.forEach(function(i){var s=i.getData();if(i.isNode()&&s.isGroup){var u=i.getChildren();u.forEach(function(l){r.push(l)})}});var n=r.filter(function(i){return i.isNode()}).map(function(i){return i.id}),e=r.reduce(function(i,s){if(s.isEdge()){var u=s.getSourceCellId(),l=s.getTargetCellId();u&&l&&n.includes(u)&&n.includes(l)&&i.set(s.id,s)}else i.set(s.id,s);return i},new Map),t=Array.from(e.values());return AD(t)},this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.graphCopySelection.call(i,function(){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h=this,p,m,b,E,x;return Object(k.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,e.getX6Graph();case 2:return p=D.sent,m=p.getSelectedCells(),b=p.getEdges(),E=this.parseCells([].concat(Object(ot.a)(m),Object(ot.a)(b))),x=window.localStorage.getItem(np),window.localStorage.setItem(np,JSON.stringify(E)),e.addUndo(Or.create(function(){return ue(h,void 0,void 0,Object(k.a)().mark(function I(){return Object(k.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:window.localStorage.setItem(np,x);case 1:case"end":return H.stop()}},I)}))})),D.abrupt("return",{err:null});case 10:case"end":return D.stop()}},d,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],xC.prototype,"contextProvider",void 0),xC=nt([Object(Pe.injectable)({token:{token:Mi,named:wC.command.id}})],xC);function vK(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{var r=JSON.parse(o);return r||a}catch(n){return console.error(n),a}}var vy=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.groupNodeMap=new Map,this.nodeMap=new Map,this.nodeMappingRecord=new Map,this.portMap=new Map,this.portMappingRecord=new Map,this.edgeMap=new Map,this.edgeMappingRecord=new Map,this.getNodesByType=function(r){return r.reduce(function(n,e){return e.isGroup?n.groupNodes.push(e):n.normalNodes.push(e),n},{normalNodes:[],groupNodes:[]})},this.getNodePorts=function(r){return Array.isArray(r.ports)?r.ports:r.ports&&Array.isArray(r.ports.items)?r.ports.items:[]},this.addNodes=function(r){r.forEach(function(n){if(n.isGroup)a.groupNodeMap.set(n.id,n);else{var e=a.getNodePorts(n);a.nodeMap.set(n.id,n),e.forEach(function(t){a.portMap.set(t.id,t)})}})},this.addEdge=function(r){r.forEach(function(n){a.edgeMap.set(n.id,n)})},this.buildNodeMapping=function(r,n){var e=r.id||r.originalId,t=n.id;a.nodeMappingRecord.set(e,t);var i=a.getNodePorts(r);i.forEach(function(s,u){var l=n.ports[u];l&&(a.portMap.set(l.id,l),a.portMappingRecord.set(s.id,l.id))})},this.createEdgeBetweenNodes=function(r){var n=r.id,e=r.source,t=r.sourcePortId,i=r.target,s=r.targetPortId,u=Jt(r,["id","source","sourcePortId","target","targetPortId"]);return Object.assign(Object.assign({},u),{id:void 0,originalId:n,source:a.nodeMappingRecord.get(e),target:a.nodeMappingRecord.get(i),sourcePortId:a.portMappingRecord.get(t),targetPortId:a.portMappingRecord.get(s),sourcePort:a.portMappingRecord.get(t),targetPort:a.portMappingRecord.get(s)})},this.buildGroupRelations=function(r){var n=r.groupChildren,e=n.map(function(t){return a.nodeMappingRecord.get(t)});return Object.assign(Object.assign({},r),{groupChildren:e})}});vy=nt([Object(Pe.injectable)()],vy);var gy,OC;(function(o){o.command=wi.GRAPH_PASTE,o.hookKey="graphPasteSelection"})(OC||(OC={}));function SC(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Math.floor(Math.random()*(o-a)+a)}var Mp=gy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.updateNodeCopiedProps=function(r,n){var e=SC(100),t=SC(100);return r&&(e=n.x-r.x+SC(30),t=n.y-r.y+SC(30)),n.x+=e,n.y+=t,n.originalId=n.id,delete n.id,n.label=n.label?"".concat(n.label,"_copied"):"",n.isCollapsed=!1,n},this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),!gy.doing){f.next=5;break}return f.abrupt("return",this);case 5:return gy.doing=!0,f.next=8,u.graphPasteSelection.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E,x,O,D,I,F,H,$,se;return Object(k.a)().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return m=d.commandService,b=d.position,E=window.localStorage.getItem(np),x=vK(E,{nodes:[],edges:[]}),O=x.nodes,D=O===void 0?[]:O,I=x.edges,F=I===void 0?[]:I,H=this.mappingHelper.getNodesByType(D),$=H.normalNodes,se=H.groupNodes,this.mappingHelper.addNodes(D),Ee.next=8,Promise.all($.map(function(Oe){return ue(p,void 0,void 0,Object(k.a)().mark(function $e(){var tt,Le,it;return Object(k.a)().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:return tn.next=2,m.executeCommand(fa.ADD_NODE.id,{nodeConfig:this.updateNodeCopiedProps(b,Oe)});case 2:tt=tn.sent,Le=tt.contextProvider(),it=Le.getResult(),this.mappingHelper.buildNodeMapping(Oe,it.nodeConfig);case 6:case"end":return tn.stop()}},$e,this)}))}));case 8:return Ee.next=10,Promise.all(se.map(function(Oe){return ue(p,void 0,void 0,Object(k.a)().mark(function $e(){var tt;return Object(k.a)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:return tt=this.mappingHelper.buildGroupRelations(Oe),it.next=3,m.executeCommand(ls.ADD_GROUP.id,{nodeConfig:this.updateNodeCopiedProps(b,tt)});case 3:case"end":return it.stop()}},$e,this)}))}));case 10:return Ee.next=12,Promise.all(F.map(function(Oe){var $e=p.mappingHelper.createEdgeBetweenNodes(Oe);return m.executeCommand(to.ADD_EDGE.id,{edgeConfig:$e})}));case 12:return e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function Oe(){return Object(k.a)().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:window.localStorage.setItem(np,null);case 1:case"end":return tt.stop()}},Oe)}))})),Ee.abrupt("return",{err:null});case 14:case"end":return Ee.stop()}},h,this)}))},s);case 8:return l=f.sent,e.setResult(l),gy.doing=!1,f.abrupt("return",this);case 12:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Mp.doing=!1,nt([Object(Pe.inject)(Ai),ze("design:type",Object)],Mp.prototype,"contextProvider",void 0),nt([Object(Pe.inject)(vy),ze("design:type",vy)],Mp.prototype,"mappingHelper",void 0),Mp=gy=nt([Object(Pe.injectable)({token:{token:Mi,named:OC.command.id}})],Mp);var MC;(function(o){o.command=wi.GRAPH_TOGGLE_MULTI_SELECT,o.hookKey="toggleMultiSelect"})(MC||(MC={}));var py=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.toggleMultiSelect.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E,x;return Object(k.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,this.ctx.getX6Graph();case 2:return h=D.sent,D.next=5,this.ctx.getGraphConfig();case 5:return p=D.sent,m=f.isEnable,b=f.modelService,D.next=9,ke.GRAPH_ENABLE_MULTI_SELECT.getModel(b);case 9:return E=D.sent,x=typeof m=="boolean"?m:!h.isRubberbandEnabled(),x?(h.enableRubberband(),h.scroller&&h.scroller.widget?h.scroller.disablePanning():h.disablePanning(),p.graphContainer.style.cursor="crosshair"):(h.disableRubberband(),h.scroller&&h.scroller.widget?h.scroller.enablePanning():h.enablePanning(),p.graphContainer.style.cursor="grab"),E.setValue({isEnable:x}),D.abrupt("return",{isEnable:x});case 14:case"end":return D.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],py.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],py.prototype,"init",null),py=nt([Object(Pe.injectable)({token:{token:Mi,named:MC.command.id}})],py);var AC;(function(o){o.command=wi.GRAPH_HISTORY_UNDO,o.hookKey="historyUndo"})(AC||(AC={}));var TC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyUndo.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m;return Object(k.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,e.getX6Graph();case 2:if(m=E.sent,m.isHistoryEnabled()!==!1){E.next=5;break}return E.abrupt("return",{err:"history is disabled"});case 5:return m.undo(),e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function x(){var O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:O=d.commandService,O.executeCommand(wi.GRAPH_HISTORY_REDO.id,{});case 2:case"end":return I.stop()}},x)}))})),E.abrupt("return",{err:null});case 8:case"end":return E.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],TC.prototype,"contextProvider",void 0),TC=nt([Object(Pe.injectable)({token:{token:Mi,named:AC.command.id}})],TC);var PC;(function(o){o.command=wi.GRAPH_HISTORY_REDO,o.hookKey="historyRedo"})(PC||(PC={}));var kC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyRedo.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m;return Object(k.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,e.getX6Graph();case 2:if(m=E.sent,m.isHistoryEnabled()!==!1){E.next=5;break}return E.abrupt("return",{err:"history is disabled"});case 5:return m.redo(),e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function x(){var O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:O=d.commandService,O.executeCommand(wi.GRAPH_HISTORY_UNDO.id,{});case 2:case"end":return I.stop()}},x)}))})),E.abrupt("return",{err:null});case 8:case"end":return E.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],kC.prototype,"contextProvider",void 0),kC=nt([Object(Pe.injectable)({token:{token:Mi,named:PC.command.id}})],kC);var DC;(function(o){o.command=wi.GRAPH_HISTORY_TOGGLE,o.hookKey="historyToggle"})(DC||(DC={}));var IC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyToggle.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E;return Object(k.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,e.getX6Graph();case 2:if(m=O.sent,m.isHistoryEnabled()!==!1){O.next=5;break}return O.abrupt("return",{err:"history is disabled"});case 5:return b=m.isHistoryEnabled(),E=d.enabled,m.toggleHistory(E),e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function D(){var I;return Object(k.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:I=d.commandService,I.executeCommand(wi.GRAPH_HISTORY_TOGGLE.id,{enabled:b});case 2:case"end":return H.stop()}},D)}))})),O.abrupt("return",{err:null});case 10:case"end":return O.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],IC.prototype,"contextProvider",void 0),IC=nt([Object(Pe.injectable)({token:{token:Mi,named:DC.command.id}})],IC);var RC;(function(o){o.command=wi.GRAPH_HISTORY_RESET,o.hookKey="historyReset"})(RC||(RC={}));var NC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyReset.call(i,function(){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,e.getX6Graph();case 2:return h=m.sent,h.cleanHistory(),m.abrupt("return",{err:null});case 5:case"end":return m.stop()}},d)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],NC.prototype,"contextProvider",void 0),NC=nt([Object(Pe.injectable)({token:{token:Mi,named:RC.command.id}})],NC);var LC;(function(o){o.command=wi.GRAPH_ADD_TOOL,o.hookKey="addTool"})(LC||(LC={}));var jC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.addTool.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E,x,O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return m=d.cellId,b=d.toolConfig,E=d.commandService,I.next=3,e.getX6Graph();case 3:return x=I.sent,O=x.getCellById(m),O&&(O.addTools(b.items,b.options),e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function F(){return Object(k.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:Array.isArray(b.items)&&b.items.forEach(function(se){E.executeCommand(wi.GRAPH_DEL_TOOL.id,{cellId:m,toolname:se})});case 1:case"end":return $.stop()}},F)}))}))),I.abrupt("return",{err:null});case 7:case"end":return I.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],jC.prototype,"contextProvider",void 0),jC=nt([Object(Pe.injectable)({token:{token:Mi,named:LC.command.id}})],jC);var _C;(function(o){o.command=wi.GRAPH_DEL_TOOL,o.hookKey="delTool"})(_C||(_C={}));var FC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.delTool.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p,m,b,E,x;return Object(k.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return p=d.cellId,m=d.toolName,b=d.toolConfig,D.next=3,e.getX6Graph();case 3:return E=D.sent,x=E.getCellById(p),x&&(m==="*"?x.removeTools(b):x.removeTool(m,b)),D.abrupt("return",{err:null});case 7:case"end":return D.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],FC.prototype,"contextProvider",void 0),FC=nt([Object(Pe.injectable)({token:{token:Mi,named:_C.command.id}})],FC);var BC;(function(o){o.command=wi.REDO_CMD,o.hookKey="redoCommand"})(BC||(BC={}));var my=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx,t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),c.next=5,u.redoCommand.call(i,function(){return ue(n,void 0,void 0,Object(k.a)().mark(function f(){var d;return Object(k.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=e.getCommands(),d.isRedoable&&d.redoCommand(),this.ctx.addUndo(Or.create(function(){d.redoCommand()})),p.abrupt("return",{});case 4:case"end":return p.stop()}},f,this)}))},s);case 5:return c.abrupt("return",this);case 6:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],my.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],my.prototype,"init",null),my=nt([Object(Pe.injectable)({token:{token:Mi,named:BC.command.id}})],my);var GC;(function(o){o.command=wi.UNDO_CMD,o.hookKey="undoCommand"})(GC||(GC={}));var yy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx,t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),c.next=5,u.undoCommand.call(i,function(){return ue(n,void 0,void 0,Object(k.a)().mark(function f(){var d;return Object(k.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return d=e.getCommands(),d.isUndoable&&d.undoCommand(),this.ctx.addUndo(Or.create(function(){d.redoCommand()})),p.abrupt("return",{});case 4:case"end":return p.stop()}},f,this)}))},s);case 5:return c.abrupt("return",this);case 6:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],yy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],yy.prototype,"init",null),yy=nt([Object(Pe.injectable)({token:{token:Mi,named:GC.command.id}})],yy);var gK=function(a){a(G0),a(U0),a(z0),a(uy),a(ly),a(cy),a(TC),a(kC),a(IC),a(NC),a(my),a(yy),a(hy),a(py),a(xC),a(Mp),a(fy),a(jC),a(FC)},pK=[_2,F2,B2,AC,PC,RC,DC,mC,bC,CC,EC,BC,GC,dy,MC,wC,OC,LC,_C],by;(function(o){o.command=to.ADD_EDGE,o.hookKey="addEdge",o.createEdgeId=function(n){if(_.isString(n.source))return"".concat(n.source,":").concat(n.sourcePortId,"-").concat(n.target,":").concat(n.targetPortId);if(a(n)){var e=n;return"".concat(e.source.cell,":").concat(e.source.port,"-").concat(e.target.cell,":").concat(e.target.port)}if(r(n)){var t=n;return"".concat(t.sourceCell,":").concat(t.sourcePort,"-").concat(t.targetCell,":").concat(t.targetPort)}};function a(n){return n.source&&n.source.cell&&_.isString(n.source.cell)}o.isX6EdgeConfig=a;function r(n){return n.sourceCell&&_.isString(n.sourceCell)}o.isX6EdgePlainConfig=r})(by||(by={}));var Cy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.processEdgeConfig=function(r,n){return ue(a,void 0,void 0,Object(k.a)().mark(function e(){var t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n.id){u.next=5;break}return t=r.createIdService,i=t===void 0?by.createEdgeId:t,u.next=4,i(n);case 4:n.id=u.sent;case 5:return n.sourcePortId&&!n.sourcePort&&(n.sourcePort=n.sourcePortId,n.targetPort=n.targetPortId),u.abrupt("return",n);case 7:case"end":return u.stop()}},e)}))},this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.addEdge.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E,x,O,D,I,F,H,$;return Object(k.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return h=f.cellFactory,p=f.createEdgeService,m=f.commandService,b=f.options,de.next=3,this.ctx.getX6Graph();case 3:if(E=de.sent,x=f.edgeConfig,!p){de.next=12;break}return de.next=8,p(f);case 8:if(O=de.sent,typeof O!="boolean"){de.next=11;break}return de.abrupt("return",{err:"createEdgeService rejected"});case 11:x=O;case 12:return de.next=14,this.processEdgeConfig(f,x);case 14:if(D=de.sent,F=Object.assign(Object.assign({},b),{isCommand:!0}),!h){de.next=23;break}return de.next=19,h(D,this);case 19:H=de.sent,I=E.addEdge(H,F),de.next=24;break;case 23:I=E.addEdge(Object.assign(Object.assign({},D),{label:(D==null?void 0:D.label)||D,data:Object.assign({},D)}),F);case 24:return $=Or.create(function(){m.executeCommand(to.DEL_EDGE.id,{x6Edge:I})}),this.ctx.addUndo($),de.abrupt("return",{edgeConfig:D,edgeCell:I});case 27:case"end":return de.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],Cy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],Cy.prototype,"init",null),Cy=nt([Object(Pe.injectable)({token:{token:Mi,named:by.command.id}})],Cy);var $c;(function(o){o.command=to.DEL_EDGE,o.hookKey="delEdge";var a;(function(r){r.EDGE_NOT_EXIST="edge is not exist",r.EDGE_INVALID_CELL="this is not a valid cell",r.X6_DELETE_FAILED="x6 throw err when call delete edge",r.SERVICE_REJECT="service reject to delete"})(a=o.ErrEnum||(o.ErrEnum={}))})($c||($c={}));var Ey=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.delEdge.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E,x,O,D,I,F,H,$,se,de,Ee;return Object(k.a)().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:if(h=f.edgeConfig,p=f.x6Edge,m=f.deleteEdgeService,b=f.commandService,E=f.options,x=p,x){$e.next=9;break}return $e.next=5,this.findEdgeById(h);case 5:if(x=$e.sent,x){$e.next=9;break}return console.error($c.ErrEnum.EDGE_NOT_EXIST,h),$e.abrupt("return",{err:$c.ErrEnum.EDGE_NOT_EXIST});case 9:if(O=x&&x.isEdge(),O){$e.next=13;break}return console.error($c.ErrEnum.EDGE_NOT_EXIST,x),$e.abrupt("return",{err:$c.ErrEnum.EDGE_NOT_EXIST});case 13:if(!m){$e.next=19;break}return $e.next=16,m(f);case 16:if(D=$e.sent,D){$e.next=19;break}return $e.abrupt("return",{err:$c.ErrEnum.SERVICE_REJECT});case 19:return $e.prev=19,I=x.getTargetCell(),F=x.getSourceCell(),H=x.getSourcePortId(),$=x.getTargetPortId(),se=F?F.id:F.source,de=I?I.id:I.target,x.remove(Object.assign(Object.assign({},E),{isCommand:!0})),Ee=Or.create(function(){b.executeCommand(to.ADD_EDGE.id,{edgeConfig:{source:se,target:de,sourcePortId:H,targetPortId:$}})}),this.ctx.addUndo(Ee),$e.abrupt("return",{err:null,edgeConfig:{source:se,target:de,sourcePortId:H,targetPortId:$},targetCell:I,sourceCell:F,sourcePortId:H,targetPortId:$});case 32:return $e.prev=32,$e.t0=$e.catch(19),console.error($c.ErrEnum.X6_DELETE_FAILED,$e.t0),$e.abrupt("return",{err:$c.ErrEnum.X6_DELETE_FAILED});case 36:case"end":return $e.stop()}},d,this,[[19,32]])}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.findEdgeById=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e,t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.ctx.getX6Graph();case 2:return e=s.sent,t=e.getCellById(r.id),s.abrupt("return",t);case 5:case"end":return s.stop()}},n,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],Ey.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],Ey.prototype,"init",null),Ey=nt([Object(Pe.injectable)({token:{token:Mi,named:$c.command.id}})],Ey);var mK=v("GoyQ"),_N=v.n(mK),Ap;(function(o){var a=this;o.command=to.UPDATE_EDGE,o.hookKey="updateEdge",o.XFlowEdgeSetOptions={overwrite:!0},o.XFlowUpdateLabelService=function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o.XFlowEdgeSetOptions;return ue(a,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:r==null||r.setLabelAt(0,(n==null?void 0:n.label)||n,e);case 1:case"end":return s.stop()}},t)}))}})(Ap||(Ap={}));var wy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.updateEdge.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E,x,O,D;return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this.ctx.getX6Graph();case 2:if(h=F.sent,p=f.updateEdgeService,m=f.updateEdgeLabelService,b=m===void 0?Ap.XFlowUpdateLabelService:m,E=f.options,x=E===void 0?Ap.XFlowEdgeSetOptions:E,!p){F.next=10;break}return F.next=7,p(f);case 7:F.t0=F.sent,F.next=11;break;case 10:F.t0=f==null?void 0:f.edgeConfig;case 11:if(O=F.t0,D=h==null?void 0:h.getCellById(O==null?void 0:O.id),D==null||D.setData(O,x),!(O==null?void 0:O.hasOwnProperty("label"))){F.next=17;break}return F.next=17,b(D,O,x);case 17:return k2()(O==null?void 0:O.visible)&&D.setVisible(O==null?void 0:O.visible),O.attrs&&D.setAttrs(O.attrs),O.vertices&&D.setVertices(O.vertices),O.router&&D.setRouter(O.router),O.connector&&D.setConnector(O.connector),_N()(O.source)&&D.setSource(O.source),_N()(O.target)&&D.setTarget(O.target),F.abrupt("return",{edgeConfig:O,edgeCell:D});case 25:case"end":return F.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],wy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],wy.prototype,"init",null),wy=nt([Object(Pe.injectable)({token:{token:Mi,named:Ap.command.id}})],wy);var zC;(function(o){o.command=to.HIGHLIGHT_EDGE,o.hookKey="highlightEdge"})(zC||(zC={}));var xy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.highlightEdge.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h,p,m,b,E,x,O,D,I,F;return Object(k.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,this.ctx.getX6Graph();case 2:return m=$.sent,b=f.edgeId,E=f.strokeColor,x=f.strokeWidth,O=m.getEdges(),D=O.find(function(se){return se.id===b}),I=O.filter(function(se){return se.id!==b}),D?(F=D.getAttrs(),((h=F==null?void 0:F.line)===null||h===void 0?void 0:h.stroke)===E&&((p=F==null?void 0:F.line)===null||p===void 0?void 0:p.strokeWidth)===x||(D==null||D.setAttrs({line:{stroke:E,strokeWidth:x||2}}),I.forEach(function(se){se.setAttrs({line:F==null?void 0:F.line})}),f.commandService.executeCommand(to.FRONT_EDGE.id,{edgeId:b}))):console.error(b,"this edgeId is not exist"),$.abrupt("return",{});case 9:case"end":return $.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],xy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],xy.prototype,"init",null),xy=nt([Object(Pe.injectable)({token:{token:Mi,named:zC.command.id}})],xy);var UC;(function(o){o.command=to.FRONT_EDGE,o.hookKey="frontEdge"})(UC||(UC={}));var Oy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.frontEdge.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h=this,p,m,b;return Object(k.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.ctx.getX6Graph();case 2:return p=x.sent,m=f.edgeId,b=p==null?void 0:p.getCellById(m),b?(b.toFront(),this.ctx.addUndo(Or.create(function(){return ue(h,void 0,void 0,Object(k.a)().mark(function O(){return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:f.commandService.executeCommand(to.BACK_EDGE.id,{edgeId:m});case 1:case"end":return I.stop()}},O)}))}))):console.error(m,"this edgeId is not exist"),x.abrupt("return",{});case 7:case"end":return x.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],Oy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],Oy.prototype,"init",null),Oy=nt([Object(Pe.injectable)({token:{token:Mi,named:UC.command.id}})],Oy);var VC;(function(o){o.command=to.BACK_EDGE,o.hookKey="frontEdge"})(VC||(VC={}));var Sy=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.frontEdge.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h=this,p,m,b;return Object(k.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.ctx.getX6Graph();case 2:return p=x.sent,m=f.edgeId,b=p==null?void 0:p.getCellById(m),b?(b.toBack(),this.ctx.addUndo(Or.create(function(){return ue(h,void 0,void 0,Object(k.a)().mark(function O(){return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:f.commandService.executeCommand(to.FRONT_EDGE.id,{edgeId:m});case 1:case"end":return I.stop()}},O)}))}))):console.error(m,"this edgeId is not exist"),x.abrupt("return",{});case 7:case"end":return x.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],Sy.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],Sy.prototype,"init",null),Sy=nt([Object(Pe.injectable)({token:{token:Mi,named:VC.command.id}})],Sy);var yK=function(a){a(Cy),a(Ey),a(wy),a(xy),a(Oy),a(Sy)},bK=[by,$c,Ap,zC,UC,VC],Tp;(function(o){o.command=ls.ADD_GROUP,o.hookKey="addGroup",o.GROUP_PADDING=12,o.GROUP_HEADER_HEIGHT=40})(Tp||(Tp={}));var HC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.getBBox=function(r,n,e){var t=n.groupHeaderHeight,i=t===void 0?Tp.GROUP_HEADER_HEIGHT:t,s=n.groupPadding,u=s===void 0?Tp.GROUP_PADDING:s,l=e.getCellsBBox(r.children);return l.moveAndExpand({x:-u,y:-(u+i),width:u*2,height:u*2+i}),l},this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.addGroup.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E,x,O,D,I,F,H,$,se;return Object(k.a)().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return m=d.nodeConfig,b=d.createService,E=d.cellFactory,x=d.commandService,Ee.next=3,e.getX6Graph();case 3:return O=Ee.sent,Ee.next=6,x.executeCommand(fa.ADD_NODE.id,{cellFactory:E,createNodeService:b,nodeConfig:m});case 6:if(D=Ee.sent,I=D.contextProvider().getResult(),F=I.nodeCell,H=F.id,$=m.groupChildren,$.length&&($.forEach(function(Oe){var $e=O.getCellById(Oe);$e&&($e.setData(Object.assign(Object.assign({},$e.getData()),{group:H,isCollapsed:!1})),$e.prop("group",H),F.addChild($e),O.unselect($e))}),se=this.getBBox(F,m,O),F.position(se.x,se.y),F.size(se.width,se.height),F.setZIndex(0),F.prop("isGroup",!0),F.setData(Object.assign(Object.assign({},F.getData()),{width:se.width,height:se.height,groupChildrenSize:{width:se.width,height:se.height},x:se.x,y:se.y,isGroup:!0})),O.select(F)),!m.isCollapsed){Ee.next=14;break}return Ee.next=14,x.executeCommand(ls.COLLAPSE_GROUP.id,{nodeId:m.id,isCollapsed:m.isCollapsed});case 14:return e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function Oe(){return Object(k.a)().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:x.executeCommand(ls.DEL_GROUP.id,{nodeConfig:m});case 1:case"end":return tt.stop()}},Oe)}))})),Ee.abrupt("return",{nodeConfig:m,nodeCell:F});case 16:case"end":return Ee.stop()}},h,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],HC.prototype,"contextProvider",void 0),HC=nt([Object(Pe.injectable)({token:{token:Mi,named:Tp.command.id}})],HC);var WC;(function(o){o.command=ls.DEL_GROUP,o.hookKey="delGroup"})(WC||(WC={}));var $C=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.delGroup.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E,x,O,D,I,F,H,$;return Object(k.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,e.getX6Graph();case 2:if(m=de.sent,b=d.nodeConfig,E=d.commandService,x=d.deleteService,O=b.id,D=m.getCellById(O),!x){de.next=12;break}return de.next=9,x(d);case 9:if(I=de.sent,I){de.next=12;break}return de.abrupt("return",{err:"service rejected"});case 12:if(D){de.next=14;break}return de.abrupt("return",{err:"target node is not exist"});case 14:if(D.getProp("isGroup")===!0){de.next=16;break}return de.abrupt("return",{err:"target node is not group"});case 16:if(F=D.getData(),H=F.isCollapsed,!H){de.next=20;break}return de.next=20,E.executeCommand(ls.COLLAPSE_GROUP.id,{nodeId:D.id,isCollapsed:!1,collapsedSize:{width:0,height:0}});case 20:return $=D.getChildren(),$&&$.forEach(function(Ee){D.unembed(Ee),Ee.prop("group",""),Ee.setData(Object.assign(Object.assign({},Ee.getData()),{group:""}))}),de.next=24,E.executeCommand(fa.DEL_NODE.id,{nodeConfig:b});case 24:return e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function Ee(){return Object(k.a)().wrap(function($e){for(;;)switch($e.prev=$e.next){case 0:E.executeCommand(ls.ADD_GROUP.id,{nodeConfig:b});case 1:case"end":return $e.stop()}},Ee)}))})),de.abrupt("return",{err:null});case 26:case"end":return de.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],$C.prototype,"contextProvider",void 0),$C=nt([Object(Pe.injectable)({token:{token:Mi,named:WC.command.id}})],$C);var XC;(function(o){o.command=ls.INIT_GROUP,o.hookKey="initGroup"})(XC||(XC={}));var KC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.initGroup.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E,x,O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return m=d.graphData,b=d.commandService,I.next=3,e.getX6Graph();case 3:return E=I.sent,x=m.nodes,O={},x.forEach(function(F){var H=F.id,$=F.group;$&&(O[$]?O[$].push(H):O[$]=[H])}),Object.keys(O).forEach(function(F){return ue(p,void 0,void 0,Object(k.a)().mark(function H(){var $,se,de,Ee,Oe,$e;return Object(k.a)().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if($=E.getCellById(F),se=$.getData(),de=O[F]||[],$.prop("isGroup",!0),$.setData(Object.assign(Object.assign({},se),{isGroup:!0,groupChildren:de})),de.forEach(function(it){var It=E.getCellById(it);$.embed(It)}),$.toBack(),Ee=se.isCollapsed,Oe=se.groupCollapsedSize,!Ee){Le.next=12;break}return $e=d.collapsedSize||Oe||PS,Le.next=12,b.executeCommand(ls.COLLAPSE_GROUP.id,{collapsedSize:$e,isCollapsed:!0,nodeId:$.id});case 12:case"end":return Le.stop()}},H)}))}),I.abrupt("return",{});case 9:case"end":return I.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],KC.prototype,"contextProvider",void 0),KC=nt([Object(Pe.injectable)({token:{token:Mi,named:XC.command.id}})],KC);var YC;(function(o){o.command=ls.COLLAPSE_GROUP,o.hookKey="collapseGroup"})(YC||(YC={}));var My=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toggleVisible=function(r,n,e){r.forEach(function(t){var i=e.findViewByCell(t).container;i.style.visibility=n?"visible":"hidden"})},this.toggleCollapse=function(r,n,e){var t=r.getChildren().filter(function(f){return f.isNode()}),i=r.getData(),s=e.isCollapsed,u=e.gap,l=u===void 0?0:u;if(s){var c=e.collapsedSize||i.groupCollapsedSize||PS;r.prop("previousSize",r.size()),r.size(c)}else r.size(r.prop("previousSize"));t&&t.forEach(function(f){var d=r.position(),h=n.getConnectedEdges(f).filter(function(E){var x=E.getSourceNode(),O=E.getTargetNode();return t.includes(x)&&t.includes(O)});if(s){a.toggleVisible([f].concat(Object(ot.a)(h)),!1,n),f.prop("previousSize",f.size()),f.prop("previousRelativePosition",f.position({relative:!0})),f.position(d.x+l,d.y+l);var p=r.size();f.size({width:p.width-l*2,height:p.height-l*2})}else{a.toggleVisible([f].concat(Object(ot.a)(h)),!0,n);var m=f.prop("previousRelativePosition"),b=f.prop("previousSize");f.position(m.x,m.y,{relative:!0}),f.size(b)}}),r.prop("isCollapsed",s),r.setData(Object.assign(Object.assign({},r.getData()),{isCollapsed:s}))},this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,i=e.hooks,s=this.ctx.getHooks(),c.next=4,s.collapseGroup.call(t,function(f){return ue(n,void 0,void 0,Object(k.a)().mark(function d(){var h=this,p,m,b,E;return Object(k.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.ctx.getX6Graph();case 2:if(p=O.sent,m=p.getCellById(t.nodeId),b=f.toggleService,!b){O.next=11;break}return O.next=8,b(f);case 8:if(E=O.sent,E){O.next=11;break}return O.abrupt("return",{err:"service rejected"});case 11:return m&&(this.toggleCollapse(m,p,t),this.ctx.addUndo(Or.create(function(){return ue(h,void 0,void 0,Object(k.a)().mark(function D(){return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:m&&this.toggleCollapse(m,p,Object.assign(t,{isCollapsed:!t.isCollapsed}));case 1:case"end":return F.stop()}},D,this)}))}))),O.abrupt("return",{err:null});case 13:case"end":return O.stop()}},d,this)}))},i);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],My.prototype,"contextProvider",void 0),nt([Object(Pe.postConstruct)(),ze("design:type",Function),ze("design:paramtypes",[]),ze("design:returntype",void 0)],My.prototype,"init",null),My=nt([Object(Pe.injectable)({token:{token:Mi,named:YC.command.id}})],My);var CK=function(a){a(HC),a($C),a(KC),a(My)},EK=[Tp,WC,XC,YC],ZC;(function(o){o.command=rp.UPDATE_MODEL,o.hookKey="updateModel"})(ZC||(ZC={}));var JC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.updateModel.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E,x,O,D,I;return Object(k.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return m=d.updateModel,b=d.getModel,E=d.modelService,H.next=3,b(E);case 3:return x=H.sent,O=x.getValue(),D=f8(O),H.next=8,m(D);case 8:return I=d8(D),x.setValue(I),e.addUndo(Or.create(function(){return ue(p,void 0,void 0,Object(k.a)().mark(function $(){return Object(k.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:x.setValue(I);case 1:case"end":return de.stop()}},$)}))})),H.abrupt("return",{model:x,value:I});case 12:case"end":return H.stop()}},h)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Object(Pe.inject)(Ai),ze("design:type",Object)],JC.prototype,"contextProvider",void 0),JC=nt([Object(Pe.injectable)({token:{token:Mi,named:ZC.command.id}})],JC);var Lq=function(){},wK=function(a){a(JC)},xK=[ZC],FN=[].concat(Object(ot.a)(Q8),Object(ot.a)(bK),Object(ot.a)(EK),Object(ot.a)(pK),Object(ot.a)(xK)),BN=function(){return new zc},Ay=function(){function o(){var a=this;Object(Ie.a)(this,o),this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=r.x6Events.registerHook({name:"bind group node move event",handler:function(l){return ue(e,void 0,void 0,Object(k.a)().mark(function c(){var f=this,d;return Object(k.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:d={eventName:"node:moving",callback:function(b){var E=b.node;return ue(f,void 0,void 0,Object(k.a)().mark(function x(){var O,D,I,F,H,$,se,de,Ee,Oe,$e,tt,Le,it,It;return Object(k.a)().wrap(function(bn){for(;;)switch(bn.prev=bn.next){case 0:if(O=E.prop("isGroup"),!O){bn.next=4;break}return E.prop("originPosition",E.getPosition()),bn.abrupt("return");case 4:if(D=E.model.graph,I=E.getData(),F=I.group,H=D.getNodes().find(function(dn){return dn.id===F}),H){bn.next=9;break}return bn.abrupt("return");case 9:$=H.getProp("isCollapsed"),se=H.getProp("originSize"),de=!1,se==null&&(se=H.size(),H.prop("originSize",se)),Ee=H.prop("originPosition"),Ee==null&&(Ee=H.getPosition(),H.prop("originPosition",Ee)),Oe=Ee.x,$e=Ee.y,tt=Ee.x+se.width,Le=Ee.y+se.height,it=H.getChildren(),it&&it.forEach(function(dn){var en=dn.getBBox().inflate(12),Vn=en.getCorner();en.x<Oe&&(Oe=en.x,de=!0),en.y<$e&&($e=en.y,de=!0),Vn.x>tt&&(tt=Vn.x,de=!0),Vn.y>Le&&(Le=Vn.y,de=!0)}),de&&(H.prop({position:{x:Oe,y:$e},size:{width:tt-Oe,height:Le-$e}}),It=Object.assign(Object.assign({},H.getData()),{x:Oe,y:$e,width:tt-Oe,height:Le-$e}),$!==!0&&(It.groupChildrenSize={width:tt-Oe,height:Le-$e}),H.setData(It));case 22:case"end":return bn.stop()}},x)}))}},l.push(d);case 2:case"end":return p.stop()}},c)}))}}),s.abrupt("return",Or.create(function(){t.dispose()}));case 2:case"end":return s.stop()}},n)}))},this.registerHookHub=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=new Xi,FN.forEach(function(s){var u=s.hookKey,l=s.createHook,c=l===void 0?BN:l,f=r.registerHookHub(u,c());e.push(f)}),this.commandConfig.getConfig().then(function(s){var u=s.getContributions,l=u();l.forEach(function(c){var f=c.hookKey,d=c.createHook,h=d===void 0?BN:d,p=r.registerHookHub(f,h());e.push(p)})}),i.abrupt("return",e);case 4:case"end":return i.stop()}},n,this)}))}}return Object(pe.a)(o,[{key:"registerGraphCommands",value:function(r){var n=this;FN.forEach(function(e){var t=e.command;r.registerCommand(t,{createCommand:n.commandFactory})}),this.commandConfig.getConfig().then(function(e){var t=e.getContributions,i=t();i.forEach(function(s){r.registerCommand(s.command,{createCommand:n.commandFactory})})})}}]),o}();nt([Object(Pe.inject)(XS),ze("design:type",Function)],Ay.prototype,"commandFactory",void 0),nt([Object(Pe.inject)(hp),ze("design:type",hp)],Ay.prototype,"commandConfig",void 0),Ay=nt([Object(Pe.singleton)({contrib:[J1,Zl]})],Ay);var OK=function(a,r){var n=r.getCommandContributions();n.forEach(function(e){var t=e.CommandHandler,i=e.command;a({token:{token:Mi,named:i.id},useClass:t})}),gK(a),J8(a),yK(a),CK(a),wK(a),a(Ay)},SK=function(a){return Object(Pe.Module)(function(r){r(vy),Y8(r,a),OK(r,a),r(Md),r(XS,{useFactory:function(e){return function(t,i,s){var u=e.container.createChild(),l=u.get(Md);u.register(Ai,{useDynamic:function(){return function(){return l}}});var c=u.getNamed(Mi,t);return l.setArgs(i,s),l.handlerInstance=c,c}}})})},MK=function(a){var r=Jl(),n=A.a.useMemo(function(){return a.config?a.config:new hp},[]);return A.a.useEffect(function(){r.addCoreModule({config:n,createModule:SK})},[]),null},AK=function(a){return function(r){var n=A.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=A.a.useMemo(function(){var t=new hp;return a(t,n),t},[n]);return e}},TK=Symbol("IToolbarService"),GN=Pe.Syringe.defineToken("IToolbarContribution");function zN(o){if(o==null)throw new TypeError("Cannot destructure undefined")}var PK=v("sEfC"),kK=v.n(PK),DK=v("BkRI"),UN=v.n(DK),Pp=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.toolbarItems=new Map,this.onDidChangeEvent=new zv(null),this.onDidChange=this.onDidChangeEvent.watch,this.fireOnDidChange=kK()(function(){return a.onDidChangeEvent.setValue(void 0)},16),this.registerDisposableToolbar=function(r){var n=new Xi,e={registerToolbarItem:function(i){var s=a.registerItem(i);return n.push(s),s}};return r(e),a.toDispose.push(n),n},this.getToolbarModel=function(r){var n=r.layout,e=r.mainGroups,t=e===void 0?[]:e,i=r.extraGroups,s=i===void 0?[]:i;return new zv({layout:n,mainGroups:a.createToolbarGroupModel(t),extraGroups:a.createToolbarGroupModel(s)})},this.createToolbarGroupModel=function(r){var n=r.map(function(e){var t=e.items,i=t===void 0?[]:t;return Object.assign(Object.assign({},e),{items:i.map(function(s){return a.createToolbarModel({id:s.id})}).filter(function(s){return!!s})})});return n}}return Object(pe.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(ir.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerToolbarItems(this)}}catch(i){n.e(i)}finally{n.f()}}},{key:"onStop",value:function(){this.toDispose.dispose()}},{key:"registerItem",value:function(r){var n=this;this.toolbarItems.has(r.id)&&console.warn("ToolbarRegistry ".concat(r.id," is duplicated, in"),r),this.toolbarItems.set(r.id,r),this.fireOnDidChange();var e=new Xi(Or.create(function(){return n.fireOnDidChange()}),Or.create(function(){return n.toolbarItems.delete(r.id)}));return e}},{key:"createToolbarModel",value:function(r){var n=UN()(this.toolbarItems.get(r.id)),e=k2()(n.isEnabled)?n.isEnabled:!0,t=k2()(n.isVisible)?n.isVisible:!0,i=Object.assign(Object.assign({},n),{isEnabled:e,isVisible:t,iconName:n.iconName,text:n.text});return i}}]),o}();nt([Object(Pe.inject)(Uv),ze("design:type",Object)],Pp.prototype,"commandService",void 0),nt([Object(Pe.inject)(Vv),ze("design:type",Object)],Pp.prototype,"modelService",void 0),nt([Object(Pe.contrib)(GN),ze("design:type",Object)],Pp.prototype,"contributionProvider",void 0),Pp=nt([Object(Pe.singleton)({contrib:[Oh,TK]})],Pp);var IK=function(){return Object(Pe.Module)(function(a){Pe.Contribution.register(a,GN),a(Pp)})},VN=function(a){zN(a);var r=Jl();return A.a.useEffect(function(){var n=r.addCoreModule({config:{CONFIG_TYPE:"ToolbarRegistry",getConfig:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:case"end":return s.stop()}},t)}))}},createModule:IK});return function(){n.dispose()}},[r]),null};VN.defaultProps={XFlowModuleType:"ToolbarRegistry"};var jq=Symbol("xflow-menu-root"),RK=Symbol("IMenuService"),HN=Pe.Syringe.defineToken("IMenuContribution"),QC;(function(o){o.Separator="separator",o.Submenu="submenu",o.Root="root",o.Leaf="leaf"})(QC||(QC={}));var qC=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.menuMap=new Map,this.getMenu=function(r){return a.menuMap.get(r)},this.registerDisposableMenu=function(r){var n=new Xi,e={registerMenu:function(i){var s=a.registerMenu(i);return n.push(s),s}};return r(e),a.toDispose.push(n),n}}return Object(pe.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(ir.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerMenu(this)}}catch(i){n.e(i)}finally{n.f()}}},{key:"onStop",value:function(){this.toDispose.dispose()}},{key:"registerMenu",value:function(r){var n=this;return this.menuMap.set(r.id,r),Or.create(function(){return n.menuMap.delete(r.id)})}}]),o}();nt([Object(Pe.contrib)(HN),ze("design:type",Object)],qC.prototype,"contributionProvider",void 0),qC=nt([Object(Pe.singleton)({contrib:[Oh,RK]})],qC);var NK=function(){return Object(Pe.Module)(function(a){Pe.Contribution.register(a,HN),a(qC)})},WN=function(a){zN(a);var r=Jl();return A.a.useEffect(function(){var n=r.addCoreModule({config:{CONFIG_TYPE:"MenuRegistry",getConfig:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:case"end":return s.stop()}},t)}))}},createModule:NK});return function(){n.dispose()}},[]),null};WN.defaultProps={XFlowModuleType:"MenuRegistry"};var eA=function(a){var r=a.meta,n=a.graphConfig,e=a.graphData,t=a.graphLayout,i=a.onLoad,s=a.isAutoCenter,u=a.hookConfig,l=a.modelServiceConfig,c=a.commandConfig,f=a.onAppConfigReady,d=a.onAppDestroy,h=a.children,p=h===void 0?[]:h,m=a.className,b=a.style,E=A.a.useState(),x=Object(Xe.a)(E,2),O=x[0],D=x[1],I=A.a.useRef(null),F=M8();A.a.useEffect(function(){f&&f(F);var se=G8(F);se.start().then(function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function Ee(){var Oe;return Object(k.a)().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(D(se),(Oe=F.getExtension("GraphConfig"))===null||Oe===void 0||Oe.config.setAppContainer(I.current),!r){tt.next=5;break}return tt.next=5,se.commandService.executeCommand(wi.LOAD_META.id,{meta:r});case 5:if(i&&i(se,F),!e){tt.next=12;break}if(!t){tt.next=10;break}return tt.next=10,se.commandService.executeCommand(wi.GRAPH_LAYOUT.id,Object.assign({graphData:e},t));case 10:return tt.next=12,se.commandService.executeCommand(wi.GRAPH_RENDER.id,{graphData:e});case 12:case"end":return tt.stop()}},Ee)}))});var de=function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function Oe(){return Object(k.a)().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:d&&d(se);case 1:case"end":return tt.stop()}},Oe)}))};return function(){de()}},[]),A.a.useEffect(function(){O&&O.commandService.executeCommand(wi.LOAD_META.id,{meta:r})},[r]),A.a.useEffect(function(){var se=function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function Ee(){var Oe;return Object(k.a)().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(!O){tt.next=11;break}if(!(e&&t)){tt.next=4;break}return tt.next=4,O.commandService.executeCommand(wi.GRAPH_LAYOUT.id,Object.assign({graphData:e},t));case 4:return tt.next=6,O.commandService.executeCommand(wi.GRAPH_RENDER.id,{graphData:e});case 6:if(!s){tt.next=11;break}return tt.next=9,O.getGraphInstance();case 9:Oe=tt.sent,Oe.centerContent();case 11:case"end":return tt.stop()}},Ee)}))};se()},[e]);var H=Mn.a.apply(void 0,["xflow-app-workspace",m].concat(Object(ot.a)(F.getContainerClassNames()))),$=(Array.isArray(p)?p:[p]).some(function(se){return se&&se.props.isXFlowCanvas});return A.a.createElement(Hk,{app:O},A.a.createElement(ED.Provider,{value:F},A.a.createElement("div",{className:H,id:F.getInstanceId(),ref:I,style:b},!$&&A.a.createElement(w2,{config:n,position:{top:0,bottom:0,left:0,right:0}}),p,A.a.createElement(MD,{config:l}),A.a.createElement(MK,{config:c}),A.a.createElement(A8,{config:u}),A.a.createElement(VN,null),A.a.createElement(WN,null))))};eA.defaultProps={};var _q=eA,LK=function(a){return a&&a.current},$N=function(){var a=A.a.useRef(!0);return A.a.useEffect(function(){return function(){a.current=!1}},[]),a},XN=function(a){var r=$N(),n=A.a.useState(a.getValue()),e=Object(Xe.a)(n,2),t=e[0],i=e[1];A.a.useEffect(function(){var c=a.watch(function(f){LK(r)&&i(f)});return function(){c.dispose()}},[i]);var s=t,u=Gc.isValidValue(s),l=A.a.useCallback(function(c){return a.setValue(c)},[a]);return[s,l,u]},kp=function(a){var r=A.a.useMemo(function(){return new zv(a)},[]),n=XN(r),e=Object(Xe.a)(n,3),t=e[0],i=e[1],s=e[2];return A.a.useEffect(function(){return function(){r.dispose()}},[r]),[t,i,r,s]},jK=function(a){var r=a.getModel,n=a.initialState,e=$N(),t=A.a.useRef(),i=A.a.useState(n),s=Object(Xe.a)(i,2),u=s[0],l=s[1];return A.a.useEffect(function(){var c;return r().then(function(f){return ue(void 0,void 0,void 0,Object(k.a)().mark(function d(){var h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return t.current=f,m.next=3,f.getValidValue();case 3:if(h=m.sent,e.current){m.next=6;break}return m.abrupt("return");case 6:l(h),c=f.watch(function(b){e.current&&l(b)});case 8:case"end":return m.stop()}},d)}))}),function(){c&&c.dispose&&c.dispose()}},[]),[u,l,t.current]},_K=Symbol("IKeyBindingService"),KN=Pe.Syringe.defineToken("IKeyBindingContribution"),YN=Symbol("IKeyBindingOptionProvider"),_h=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.keyBindingMap=new Map,this.enabledKeyBindingMap=new Map,this.registerExternalKeybindings=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.optionProvider.getOption();case 2:return n=i.sent,e=n.registerKeybindingFunc,i.abrupt("return",e(this));case 5:case"end":return i.stop()}},r,this)}))},this.registerKeybinding=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=new Xi;return r.forEach(function(e){a.keyBindingMap.set(e.id,e),a.enableKeyBindings(e.id).then(function(t){n.push(Or.create(function(){t.dispose(),a.keyBindingMap.delete(e.id)}))})}),a.toDispose.push(n),n},this.enableKeyBindings=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return this.disableKeyBindings([r]),t=this.keyBindingMap.get(r),c.next=4,this.getX6Graph();case 4:return i=c.sent,s=this.runCommand(t),i.bindKey(t.keybinding,s),u=Or.create(function(){i.unbindKey(t.keybinding),e.enabledKeyBindingMap.delete(t.id)}),this.enabledKeyBindingMap.set(t.id,u),c.abrupt("return",u);case 10:case"end":return c.stop()}},n,this)}))},this.disableKeyBindings=function(r){r.forEach(function(n){var e=a.enabledKeyBindingMap.get(n);e&&e.dispose()})},this.runCommand=function(r){return function(n){return ue(a,void 0,void 0,Object(k.a)().mark(function e(){return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.callback(r,this.modelService,this.commandService,n);case 2:case"end":return i.stop()}},e,this)}))}},this.getX6Graph=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.graphProvider.getGraphInstance();case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(ir.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerKeybinding(this)}}catch(i){n.e(i)}finally{n.f()}this.registerExternalKeybindings()}},{key:"onStop",value:function(){this.toDispose.dispose()}}]),o}();nt([Object(Pe.inject)(YN),ze("design:type",Object)],_h.prototype,"optionProvider",void 0),nt([Object(Pe.inject)(Uv),ze("design:type",Object)],_h.prototype,"commandService",void 0),nt([Object(Pe.inject)(Vv),ze("design:type",Object)],_h.prototype,"modelService",void 0),nt([Object(Pe.contrib)(KN),ze("design:type",Object)],_h.prototype,"contributionProvider",void 0),nt([Object(Pe.inject)(Wv),ze("design:type",Object)],_h.prototype,"graphProvider",void 0),_h=nt([Object(Pe.singleton)({contrib:[Oh,_K]})],_h);var FK=function(a,r){a(YN,{useDynamic:function(){return{getOption:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r.getConfig());case 1:case"end":return s.stop()}},t)}))}}},lifecycle:Pe.Syringe.Lifecycle.singleton})},BK=function(a){return Object(Pe.Module)(function(r){FK(r,a),Pe.Contribution.register(r,KN),r(_h)})},tA;(function(o){o.CONFIG_TYPE="CONTEXT_CONFIG"})(tA||(tA={}));var ZN=function(){return Or.create(function(){})},JN=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.CONFIG_TYPE=tA.CONFIG_TYPE,this.keybindingFunc=ZN,this.isMounted=new $u,this.setKeybindingFunc=function(r){a.keybindingFunc=r},this.setMountState=function(){a.isMounted.resolve(!0)},this.getConfig=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isMounted.promise;case 2:return e.abrupt("return",{CONFIG_TYPE:this.CONFIG_TYPE,registerKeybindingFunc:this.keybindingFunc});case 3:case"end":return e.stop()}},r,this)}))},this.dispose=function(){a.keybindingFunc=ZN,a.isMounted=new $u}}),GK=function(a){var r=a.config,n=Jl(),e=A.a.useMemo(function(){return r||new JN},[r]);return A.a.useEffect(function(){var t=n.addCoreModule({config:e,createModule:BK});return e.setMountState(),function(){t.dispose(),e.dispose()}},[n,e]),null},zK=function(a){return function(r){var n=A.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=A.a.useMemo(function(){var t=new JN;return a(t,n),t},[n]);return e}};function UK(o){return new Promise(function(a){return setTimeout(function(){return a(!0)},o)})}var eE=v("Lyp1"),VK=function(){function o(){Object(Ie.a)(this,o),this.map=new Map([["default",eE.a],["QuestionCircleOutlined",eE.a]]),this.map.set("default",eE.a),this.map.set("QuestionCircleOutlined",eE.a)}return Object(pe.a)(o,[{key:"get",value:function(r){var n=this.map.get(r);return n}},{key:"set",value:function(r,n){this.map.set(r,n)}},{key:"has",value:function(r){return this.map.has(r)}}]),o}(),Xc=new VK,Fq=Xc,nA=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.registerHookHub=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Xi,i=[r.graphOptions.registerHook({name:"add snapline options",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){return Object(k.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:c.snapline={enabled:!0,className:"xflow-snapline",clean:5e3};case 1:case"end":return h.stop()}},f)}))}})],t.pushAll(i),u.abrupt("return",Or.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});nA=nt([Pe.singleton({contrib:Zl})],nA);var HK=function(){return Pe.Module(function(a){a(nA)})},WK="CanvasSnapline",$K="#faad14",XK=function(a){var r=a.color,n=r===void 0?$K:r,e=Jl(),t=A.a.useMemo(function(){return{CONFIG_TYPE:WK,getConfig:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function s(){return Object(k.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{});case 1:case"end":return l.stop()}},s)}))}}},[]);return A.a.useEffect(function(){var i="xflow-snapline-".concat(Date.now());e.addContainerClassNames(i);var s=`
    .`.concat(i,` .xflow-snapline .x6-widget-snapline-horizontal,
    .`).concat(i,` .xflow-snapline .x6-widget-snapline-vertical {
      border-color: `).concat(n,`;
    }`),u=CD(s);return function(){document.head.removeChild(u)}},[n,e]),A.a.createElement(I0,{config:t,createModule:HK})},tE=v("3S7+"),Fh;(function(o){o.MOUSE_ENTER="node-port:mouseenter",o.MOUSE_LEAVE="node-port:mouseleave"})(Fh||(Fh={}));var nE;(function(o){var a=this;o.id="ACTIVE_NODE_PORT",o.useModel=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e,t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.awaitModel(o.id);case 2:return e=s.sent,s.next=5,e.getValidValue();case 5:return t=s.sent,s.abrupt("return",{data:t,model:e});case 7:case"end":return s.stop()}},n)}))}})(nE||(nE={}));var rE=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.getGraphInstance=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.graphProvider.getGraphInstance();case 2:return n=i.sent,i.next=5,this.graphProvider.getGraphOptions();case 5:return e=i.sent,i.abrupt("return",{graph:n,config:e});case 7:case"end":return i.stop()}},r,this)}))},this.getPortRenderConfig=function(){var r={onPortRendered:function(e){var t=this,i=e.port,s=e.node,u=e.contentSelectors,l=u&&u["xflow-port-group"];l instanceof Element&&(l.setAttribute("class",Mn()("xflow-port-group",{connected:i.connected&&i.group!=="out",groupPort:(s==null?void 0:s.isGroup)&&(s==null?void 0:s.isGroup())})),l.addEventListener("mouseenter",function(c){var f={e:c,portId:i.id,nodeId:s.id,portData:i,nodeData:s.getData(),tooltip:i.tooltip,placement:i.group};t.trigger(Fh.MOUSE_ENTER,f)}),l.addEventListener("mouseleave",function(c){var f={e:c,portId:i.id,nodeId:s.id,portData:i,nodeData:s.getData(),tooltip:i.tooltip,placement:i.group};t.trigger(Fh.MOUSE_LEAVE,f)}))}};return r},this.registerHookHub=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Xi,i=[r.graphOptions.registerHook({name:"add onPortRendered options ",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){return Object(k.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:Object.assign(c,this.getPortRenderConfig());case 1:case"end":return h.stop()}},f,this)}))}})],t.pushAll(i),u.abrupt("return",Or.create(function(){}));case 4:case"end":return u.stop()}},n)}))}}return Object(pe.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:nE.id,watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){var s,u,l,c,f,d;return Object(k.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.getGraphInstance();case 2:return s=p.sent,u=s.graph,l=s.config,c=function(b){var E=b.target.getBoundingClientRect(),x=E.x,O=E.y,D=E.width,I=E.height,F=l.rootContainer.getBoundingClientRect(),H={x:x-((F==null?void 0:F.x)||0)+D/2,y:O-((F==null?void 0:F.y)||0)+I/2};return H},f=function(b){t.setValue(Object.assign(Object.assign({},b),{position:c(b.e)}))},d=function(){t.setValue(null)},u.on(Fh.MOUSE_ENTER,f),u.on(Fh.MOUSE_LEAVE,d),u.on("cell:mouseleave",d),p.abrupt("return",Or.create(function(){u.off(Fh.MOUSE_ENTER,f),u.off(Fh.MOUSE_LEAVE,d)}));case 12:case"end":return p.stop()}},i,this)}))}})}}]),o}();nt([Pe.inject(Wv),ze("design:type",Object)],rE.prototype,"graphProvider",void 0),rE=nt([Pe.singleton({contrib:[Zl,Hv]})],rE);var KK=function(){return Pe.Module(function(a){a(rE)})},YK="CanvasNodePortTooltip",ZK=function(a){var r=co(),n=kp(null),e=Object(Xe.a)(n,3),t=e[0],i=e[2];A.a.useEffect(function(){if(!!r){var l=function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function d(){var h,p;return Object(k.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,nE.useModel(r.modelService);case 2:return h=b.sent,p=h.model,b.abrupt("return",p.watch(function(E){i.setValue(E)}));case 5:case"end":return b.stop()}},d)}))},c=l();return function(){c.then(function(f){f.dispose()})}}},[i,r]);var s=!!(t&&t.position&&t.position.x);if(!s)return null;var u=a.getTooltip?a.getTooltip(t):t.tooltip;return A.a.createElement(tE.a,{visible:s,title:u,placement:t.placement||"top"},A.a.createElement("span",{className:"canvas-node-port-tooltip",style:{position:"absolute",left:t.position.x,top:t.position.y}}))},JK=function(a){var r=A.a.useCallback(function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function n(){return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}},n)}))},[]);return A.a.createElement(I0,{createModule:KK,config:{CONFIG_TYPE:YK,getConfig:r}},A.a.createElement(ZK,Object.assign({},a)))},rA;(function(o){o.CONFIG_TYPE="ContextMenuConfig"})(rA||(rA={}));var Ty=function(){function o(a){var r=this;Object(Ie.a)(this,o),this.CONFIG_TYPE=rA.CONFIG_TYPE,this.setMenuModelService=function(n){r.menuModelService=n},this.setCustomMenuRender=function(n){r.menuCustomRender=n},this.getConfig=function(){return ue(r,void 0,void 0,Object(k.a)().mark(function n(){return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{CONFIG_TYPE:this.CONFIG_TYPE,menuCustomRender:this.menuCustomRender,menuModelService:this.menuModelService});case 1:case"end":return t.stop()}},n,this)}))},this.moduleId=a||Fc()}return Object(pe.a)(o,[{key:"dispose",value:function(){}}]),o}(),iE;(function(o){o.id="CONTEXT_MENU_MODEL",o.useValue=ke.useModelValueUtil(o.id),o.getModel=ke.getModelUtil(o.id)})(iE||(iE={}));var QN=Pe.inject,QK=Pe.singleton,Py=function(){function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.getMenuModelValue=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e,t,i,s,u,l,c,f;return Object(k.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.menuConfig.getConfig();case 2:if(e=h.sent,t=r.anchor,i=r.type,s=r.cell,u=new Xi,this.toDispose.push(u),l=s?s.getData():null,c=new zv({id:"menuroot",type:QC.Root,submenu:[]}),u.push(Or.create(function(){c.dispose()})),f={toDispose:u,anchor:t,target:{data:l,type:i},customRender:null,menuModel:c},!e.menuCustomRender){h.next=14;break}return h.next=13,e.menuCustomRender(r,this.modelService);case 13:f.customRender=h.sent;case 14:if(!e.menuModelService){h.next=17;break}return h.next=17,e.menuModelService(r,f.menuModel,this.modelService,u);case 17:return h.abrupt("return",f);case 18:case"end":return h.stop()}},n,this)}))}}return Object(pe.a)(o,[{key:"registerModel",value:function(r){var n=this,e=[r.registerModel({id:iE.id,getInitialValue:function(){return null},watchChange:function(i,s){return ue(n,void 0,void 0,Object(k.a)().mark(function u(){var l=this,c;return Object(k.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,ke.CONTEXTMENU_TARGET.getModel(s);case 2:return c=d.sent,d.abrupt("return",c.watch(function(h){return ue(l,void 0,void 0,Object(k.a)().mark(function p(){var m;return Object(k.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,this.getMenuModelValue(h);case 2:m=E.sent,i.setValue(m);case 4:case"end":return E.stop()}},p,this)}))}));case 4:case"end":return d.stop()}},u)}))}})];this.toDispose.pushAll(e)}}]),o}();nt([QN(Ty),ze("design:type",Ty)],Py.prototype,"menuConfig",void 0),nt([QN(Vv),ze("design:type",Object)],Py.prototype,"modelService",void 0),Py=nt([QK({contrib:[Hv]})],Py);var qK=function(a){return Pe.Module(function(r){r(Py),r(Ty,{useValue:a})})},Ku=v("VTBJ"),Os=v("rePB"),qN=v("ODXe"),eL=v("Ff2n"),eY=v("uciX"),Dp={adjustX:1,adjustY:1},Ip=[0,0],tY={topLeft:{points:["bl","tl"],overflow:Dp,offset:[0,-4],targetOffset:Ip},topCenter:{points:["bc","tc"],overflow:Dp,offset:[0,-4],targetOffset:Ip},topRight:{points:["br","tr"],overflow:Dp,offset:[0,-4],targetOffset:Ip},bottomLeft:{points:["tl","bl"],overflow:Dp,offset:[0,4],targetOffset:Ip},bottomCenter:{points:["tc","bc"],overflow:Dp,offset:[0,4],targetOffset:Ip},bottomRight:{points:["tr","br"],overflow:Dp,offset:[0,4],targetOffset:Ip}},nY=tY,vi={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(a){var r=a.keyCode;if(a.altKey&&!a.ctrlKey||a.metaKey||r>=vi.F1&&r<=vi.F12)return!1;switch(r){case vi.ALT:case vi.CAPS_LOCK:case vi.CONTEXT_MENU:case vi.CTRL:case vi.DOWN:case vi.END:case vi.ESC:case vi.HOME:case vi.INSERT:case vi.LEFT:case vi.MAC_FF_META:case vi.META:case vi.NUMLOCK:case vi.NUM_CENTER:case vi.PAGE_DOWN:case vi.PAGE_UP:case vi.PAUSE:case vi.PRINT_SCREEN:case vi.RIGHT:case vi.SHIFT:case vi.UP:case vi.WIN_KEY:case vi.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(a){if(a>=vi.ZERO&&a<=vi.NINE||a>=vi.NUM_ZERO&&a<=vi.NUM_MULTIPLY||a>=vi.A&&a<=vi.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&a===0)return!0;switch(a){case vi.SPACE:case vi.QUESTION_MARK:case vi.NUM_PLUS:case vi.NUM_MINUS:case vi.NUM_PERIOD:case vi.NUM_DIVISION:case vi.SEMICOLON:case vi.DASH:case vi.EQUALS:case vi.COMMA:case vi.PERIOD:case vi.SLASH:case vi.APOSTROPHE:case vi.SINGLE_QUOTE:case vi.OPEN_SQUARE_BRACKET:case vi.BACKSLASH:case vi.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},tL=vi,nL=function(a){return+setTimeout(a,16)},rL=function(a){return clearTimeout(a)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(nL=function(a){return window.requestAnimationFrame(a)},rL=function(a){return window.cancelAnimationFrame(a)});var iL=0,iA=new Map;function aL(o){iA.delete(o)}var oL=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;iL+=1;var n=iL;function e(t){if(t===0)aL(n),a();else{var i=nL(function(){e(t-1)});iA.set(n,i)}}return e(r),n};oL.cancel=function(o){var a=iA.get(o);return aL(a),rL(a)};var rY=oL,iY=tL.ESC,aY=tL.TAB;function oY(o){var a=o.visible,r=o.setTriggerVisible,n=o.triggerRef,e=o.menuRef,t=o.onVisibleChange,i=o.autoFocus,s=bt.useRef(!1),u=function(){if(a&&n.current){var d,h,p,m;(d=n.current)===null||d===void 0||(h=d.triggerRef)===null||h===void 0||(p=h.current)===null||p===void 0||(m=p.focus)===null||m===void 0||m.call(p),r(!1),typeof t=="function"&&t(!1)}},l=function(){var d,h;(d=e.current)===null||d===void 0||(h=d.focus)===null||h===void 0||h.call(d),s.current=!0},c=function(d){var h;switch(d.keyCode){case iY:u();break;case aY:!s.current&&((h=e.current)===null||h===void 0?void 0:h.focus)?(d.preventDefault(),l()):u();break}};bt.useEffect(function(){return a?(window.addEventListener("keydown",c),i&&rY(l,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}},[a])}var sL=v("U8pU"),sY=v("UTAp");function uY(o,a,r){var n=bt.useRef({});return(!("value"in n.current)||r(n.current.condition,a))&&(n.current.value=o(),n.current.condition=a),n.current.value}function lY(o,a){typeof o=="function"?o(a):Object(sL.a)(o)==="object"&&o&&"current"in o&&(o.current=a)}function uL(){for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];var n=a.filter(function(e){return e});return n.length<=1?n[0]:function(e){a.forEach(function(t){lY(t,e)})}}function Bq(){for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return uY(function(){return uL.apply(void 0,a)},a,function(n,e){return n.length===e.length&&n.every(function(t,i){return t===e[i]})})}function cY(o){var a,r,n=Object(sY.isMemo)(o)?o.type.type:o.type;return!(typeof n=="function"&&!((a=n.prototype)!==null&&a!==void 0&&a.render)||typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render))}var fY=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function dY(o,a){var r=o.arrow,n=r===void 0?!1:r,e=o.prefixCls,t=e===void 0?"rc-dropdown":e,i=o.transitionName,s=o.animation,u=o.align,l=o.placement,c=l===void 0?"bottomLeft":l,f=o.placements,d=f===void 0?nY:f,h=o.getPopupContainer,p=o.showAction,m=o.hideAction,b=o.overlayClassName,E=o.overlayStyle,x=o.visible,O=o.trigger,D=O===void 0?["hover"]:O,I=o.autoFocus,F=Object(eL.a)(o,fY),H=bt.useState(),$=Object(qN.a)(H,2),se=$[0],de=$[1],Ee="visible"in o?x:se,Oe=bt.useRef(null);bt.useImperativeHandle(a,function(){return Oe.current});var $e=bt.useRef(null),tt="".concat(t,"-menu");oY({visible:Ee,setTriggerVisible:de,triggerRef:Oe,menuRef:$e,onVisibleChange:o.onVisibleChange,autoFocus:I});var Le=function(){var jn=o.overlay,Lr;return typeof jn=="function"?Lr=jn():Lr=jn,Lr},it=function(jn){var Lr=o.onOverlayClick,Pr=Le().props;de(!1),Lr&&Lr(jn),Pr.onClick&&Pr.onClick(jn)},It=function(jn){var Lr=o.onVisibleChange;de(jn),typeof Lr=="function"&&Lr(jn)},tn=function(){var jn,Lr=Le(),Pr=uL($e,Lr.ref),Wr=(jn={prefixCls:tt},Object(Os.a)(jn,"data-dropdown-inject",!0),Object(Os.a)(jn,"onClick",it),Object(Os.a)(jn,"ref",cY(Lr)?Pr:void 0),jn);return typeof Lr.type=="string"&&(delete Wr.prefixCls,delete Wr["data-dropdown-inject"]),bt.createElement(bt.Fragment,null,n&&bt.createElement("div",{className:"".concat(t,"-arrow")}),bt.cloneElement(Lr,Wr))},bn=function(){var jn=o.overlay;return typeof jn=="function"?tn:tn()},dn=function(){var jn=o.minOverlayWidthMatchTrigger,Lr=o.alignPoint;return"minOverlayWidthMatchTrigger"in o?jn:!Lr},en=function(){var jn=o.openClassName;return jn!==void 0?jn:"".concat(t,"-open")},Vn=function(){var jn=o.children,Lr=jn.props?jn.props:{},Pr=Mn()(Lr.className,en());return Ee&&jn?bt.cloneElement(jn,{className:Pr}):jn},jt=m;return!jt&&D.indexOf("contextMenu")!==-1&&(jt=["click"]),bt.createElement(eY.a,Object(Ku.a)(Object(Ku.a)({builtinPlacements:d},F),{},{prefixCls:t,ref:Oe,popupClassName:Mn()(b,Object(Os.a)({},"".concat(t,"-show-arrow"),n)),popupStyle:E,action:D,showAction:p,hideAction:jt||[],popupPlacement:c,popupAlign:u,popupTransitionName:i,popupAnimation:s,popupVisible:Ee,stretch:dn()?"minWidth":"",popup:bn(),onPopupVisibleChange:It,getPopupContainer:h}),Vn())}var hY=bt.forwardRef(dY),vY=hY,aE=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"render",value:function(){var e=this.props,t=e.children,i=e.trigger,s=e.disabled,u="".concat(this.props.prefixCls,"-dropdown"),l=A.a.Children.only(t),c=A.a.cloneElement(l,{className:Mn()(t.props.className,"".concat(u,"-trigger")),disabled:s}),f=s?[]:Array.isArray(i)?i:[i],d=!1;f&&f.indexOf("contextMenu")!==-1&&(d=!0);var h=A.a.Children.only(this.props.overlay),p=A.a.createElement("div",{className:"".concat(u,"-overlay")},h);return A.a.createElement(vY,Object.assign({},this.props,{prefixCls:u,overlay:p,alignPoint:d,trigger:f}),c)}}]),r}(A.a.Component);(function(o){o.defaultProps={trigger:"hover",prefixCls:"x6",mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft"}})(aE||(aE={}));var oE=A.a.createContext({}),ky=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.onHotkey=function(){n.triggerHandler()},n.onClick=function(e){n.triggerHandler(e)},n}return Object(pe.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.hotkey;e&&this.props.context.registerHotkey(e,this.onHotkey)}},{key:"componentWillUnmount",value:function(){var e=this.props.hotkey;e&&this.props.context.unregisterHotkey(e,this.onHotkey)}},{key:"triggerHandler",value:function(e){!this.props.disabled&&!this.props.hidden&&(this.props.name&&this.props.context.onClick(this.props.name,e),this.props.onClick&&this.props.onClick())}},{key:"render",value:function(){return A.a.createElement("div",Object.assign({},r.getProps(this.props)),r.getContent(this.props,this.onClick))}}]),r}(A.a.PureComponent);(function(o){function a(n,e){var t,i=n.className,s=n.disabled,u=n.active,l=n.hidden,c=n.context.prefixCls,f="".concat(c,"-item");return{className:Mn()(f,e,(t={},Object(Qe.a)(t,"".concat(f,"-active"),u),Object(Qe.a)(t,"".concat(f,"-hidden"),l),Object(Qe.a)(t,"".concat(f,"-disabled"),s),t),i)}}o.getProps=a;function r(n,e,t,i){var s=n.icon,u=n.text,l=n.hotkey,c=n.children,f=n.context.prefixCls,d="".concat(f,"-item");return A.a.createElement(A.a.Fragment,null,A.a.createElement("button",{type:"button",className:"".concat(d,"-button"),onClick:e},s&&A.a.isValidElement(s)&&A.a.createElement("span",{className:"".concat(d,"-icon")},s),A.a.createElement("span",{className:"".concat(d,"-text")},u||c),l&&A.a.createElement("span",{className:"".concat(d,"-hotkey")},l),t),i)}o.getContent=r})(ky||(ky={}));var gY=function(a){return A.a.createElement(oE.Consumer,null,function(r){return A.a.createElement(ky,Object.assign({context:r},a))})},pY=function(){return A.a.createElement(oE.Consumer,null,function(a){var r=a.prefixCls;return A.a.createElement("div",{className:"".concat(r,"-item ").concat(r,"-item-divider")})})},mY=function(o,a){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&a.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)a.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},yY=function(a){var r=a.hotkey,n=a.children,e=mY(a,["hotkey","children"]);return A.a.createElement(oE.Consumer,null,function(t){var i=t.prefixCls,s=ky.getProps(Object.assign({context:t},a),"".concat(i,"-submenu"));return A.a.createElement("div",Object.assign({},s),ky.getContent(Object.assign({context:t},e),null,A.a.createElement("span",{className:"".concat(i,"-submenu-arrow")}),A.a.createElement("div",{className:"".concat(i,"-submenu-menu")},n)))})},Bh=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.onClick=function(e,t){n.props.stopPropagation&&t!=null&&t.stopPropagation(),n.props.onClick&&n.props.onClick(e)},n.registerHotkey=function(e,t){n.props.registerHotkey&&n.props.registerHotkey(e,t)},n.unregisterHotkey=function(e,t){n.props.unregisterHotkey&&n.props.unregisterHotkey(e,t)},n}return Object(pe.a)(r,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,i=e.className,s=e.children,u=e.hasIcon,l="".concat(t,"-menu"),c=oE.Provider,f={prefixCls:l,onClick:this.onClick,registerHotkey:this.registerHotkey,unregisterHotkey:this.unregisterHotkey};return A.a.createElement("div",{className:Mn()(l,Object(Qe.a)({},"".concat(l,"-has-icon"),u),i)},A.a.createElement(c,{value:f},s))}}]),r}(A.a.PureComponent);(function(o){o.Item=gY,o.Divider=pY,o.SubMenu=yY,o.defaultProps={prefixCls:"x6",stopPropagation:!1}})(Bh||(Bh={}));var bY=function o(a){var r=a.idx,n=a.menuOptions,e=a.target,t=a.modelService,i=a.commandService,s=a.onHide,u=n.id,l=n.label,c=n.isEnabled,f=c===void 0?!0:c,d=n.isVisible,h=d===void 0?!0:d,p=n.iconName,m=n.submenu,b=m===void 0?[]:m,E=n.active,x=n.hotkey,O=n.render,D=n.onClick;if(!h)return null;if(n.type==="separator")return A.a.createElement(Bh.Divider,{key:String(n.id)+r});if(n.type==="root")return A.a.createElement(Bh,{hasIcon:!0},b.map(function($,se){return o({idx:se,target:e,commandService:i,modelService:t,menuOptions:$,onHide:s})}));if(n.submenu&&Array.isArray(n.submenu)){var I=Xc.get(p),F=!f;return A.a.createElement(Bh.SubMenu,{key:String(u),text:l,disabled:F||b.length===0,icon:I?A.a.createElement(I,null):null,active:E,hotkey:x},b.map(function($,se){return o({idx:se,target:e,commandService:i,modelService:t,menuOptions:$,onHide:s})}))}var H=Xc.get(p);return O?A.a.createElement(O,{menuItem:n,target:e,commandService:i,modelService:t,onHide:s},[A.a.createElement(Bh.Item,{key:String(u),text:l,disabled:!f,icon:H?A.a.createElement(H,null):null,active:E,hotkey:x})]):A.a.createElement(Bh.Item,{key:String(u),text:l,disabled:!f,icon:H?A.a.createElement(H,null):null,active:E,hotkey:x,onClick:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function se(){return Object(k.a)().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.next=2,D({menuItem:n,target:e,commandService:i,modelService:t});case 2:s&&s();case 3:case"end":return Ee.stop()}},se)}))}})},CY=function(a){var r=a.menuModel,n=a.target,e=a.onHide,t=co(),i=t.modelService,s=t.commandService,u=XN(r),l=Object(Xe.a)(u,1),c=l[0];return bY({idx:-1,target:n,commandService:s,modelService:i,menuOptions:c,onHide:e})},EY=function(a){var r=a.toDispose;return A.a.useEffect(function(){return function(){r.dispose()}},[r]),null},wY=function(){var a=A.a.useRef(),r=co(),n=jK({getModel:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function m(){return Object(k.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,iE.getModel(r.modelService);case 2:return E.abrupt("return",E.sent);case 3:case"end":return E.stop()}},m)}))},initialState:{anchor:null,menuModel:null,target:null,customRender:null,toDispose:null}}),e=Object(Xe.a)(n,3),t=e[0],i=e[2],s=t.target,u=t.anchor,l=t.menuModel,c=t.customRender,f=t.toDispose;if(!s||!u||!l)return null;var d=function(){i.setValue({anchor:null,menuModel:null,target:null,customRender:null,toDispose:null})},h=c?A.a.createElement(c,{target:s,modelService:r.modelService,onHide:d}):A.a.createElement(CY,{target:s,menuModel:l,onHide:d});return A.a.createElement("div",{className:"xflow-menu-mask",ref:a,onClick:d,onContextMenu:function(m){m.preventDefault(),m.stopPropagation()}},A.a.createElement(EY,{toDispose:f}),A.a.createElement(aE,{visible:!0,getPopupContainer:function(){return a.current},overlay:h},A.a.createElement("div",{className:"xflow-context-menu-anchor",style:{top:u.y,left:u.x}})))},Gq="CanvasContextMenu",xY=function(a){var r=co(),n=!!r,e=A.a.useMemo(function(){return a.config?a.config:new Ty},[a.config]);return A.a.createElement(I0,{createModule:qK,config:e},n&&A.a.createElement(wY,{config:e}))},OY=function(a){return function(r){var n=A.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=A.a.useMemo(function(){var t=new Ty;return a(t,n),t},[n]);return e}},aA="CanvasToolbar",lL=function(){function o(){var a=this;Object(Ie.a)(this,o),this.CONFIG_TYPE=aA,this.setToolbarName=function(r){a.moduleId=aA+"__"+r},this.setToolbarModelService=function(r){a.toolbarModelService=r},this.setCustomToolbarRender=function(r){a.customRenderService=r},this.getConfig=function(){return{CONFIG_TYPE:a.CONFIG_TYPE,toolbarCustomRender:a.customRenderService,toolbarModelService:a.toolbarModelService}},this.moduleId=aA+"__"+Fc()}return Object(pe.a)(o,[{key:"dispose",value:function(){}}]),o}(),cL=v("W9HT"),oA=A.a.createContext({}),SY=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.handleClick=function(){n.processClick()},n.handleDropdownItemClick=function(e){n.processClick(e,!1)},n}return Object(pe.a)(r,[{key:"processClick",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.name,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.props.dropdown;!this.props.disabled&&!t&&(e&&this.props.context.onClick(e),this.props.onClick&&this.props.onClick(e))}},{key:"renderButton",value:function(){var e,t=this.props,i=t.className,s=t.hidden,u=t.disabled,l=t.active,c=t.icon,f=t.text,d=t.dropdown,h=t.dropdownArrow,p=t.tooltip,m=t.tooltipProps,b=t.tooltipAsTitle,E=t.children,x=this.props.context.prefixCls,O="".concat(x,"-item"),D={onClick:this.handleClick,className:Mn()(O,(e={},Object(Qe.a)(e,"".concat(O,"-hidden"),s),Object(Qe.a)(e,"".concat(O,"-active"),l),Object(Qe.a)(e,"".concat(O,"-disabled"),u),Object(Qe.a)(e,"".concat(O,"-dropdown"),d),e),i)};p&&b&&(D.title=p);var I=A.a.createElement("button",Object.assign({type:"button"},D),c&&A.a.isValidElement(c)&&A.a.createElement("span",{className:"".concat(O,"-icon")},c),(f||E)&&A.a.createElement("span",{className:"".concat(O,"-text")},f||E),d&&h&&A.a.createElement("span",{className:"".concat(O,"-dropdown-arrow")}));return p&&!b&&!u?A.a.createElement(tE.a,Object.assign({title:p,placement:"bottom",mouseEnterDelay:0,mouseLeaveDelay:0},m),I):I}},{key:"render",value:function(){var e=this.props,t=e.dropdown,i=e.dropdownProps,s=e.disabled,u=this.renderButton();if(t!=null&&!s){var l=A.a.createElement("div",null,t.type===Bh?A.a.cloneElement(t,{onClick:this.handleDropdownItemClick}):t),c=Object.assign(Object.assign({trigger:["click"]},i),{disabled:s,overlay:l});return A.a.createElement(aE,Object.assign({},c),u)}return u}}]),r}(A.a.PureComponent),fL=function(a){return A.a.createElement(oA.Consumer,null,function(r){return A.a.createElement(SY,Object.assign({context:r},a))})};fL.defaultProps={dropdownArrow:!0};var MY=function(a){var r=a.children,n=a.className;return A.a.createElement(oA.Consumer,null,function(e){var t=e.prefixCls;return A.a.createElement("div",{className:Mn()("".concat(t,"-group"),n)},r)})},Rp=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){var n;return Object(Ie.a)(this,r),n=a.apply(this,arguments),n.onClick=function(e,t){n.props.onClick&&n.props.onClick(e,t)},n}return Object(pe.a)(r,[{key:"render",value:function(){var e,t=this.props,i=t.prefixCls,s=t.className,u=t.children,l=t.extra,c=t.size,f=t.align,d=t.hoverEffect,h="".concat(i,"-toolbar");return A.a.createElement("div",{className:Mn()(h,s,(e={},Object(Qe.a)(e,"".concat(h,"-").concat(c),c),Object(Qe.a)(e,"".concat(h,"-align-right"),f==="right"),Object(Qe.a)(e,"".concat(h,"-hover-effect"),d),e))},A.a.createElement("div",{className:"".concat(h,"-content")},A.a.createElement("div",{className:"".concat(h,"-content-inner")},A.a.createElement(oA.Provider,{value:{prefixCls:h,onClick:this.onClick}},u)),l&&A.a.createElement("div",{className:"".concat(h,"-content-extras")},l)))}}]),r}(A.a.PureComponent);(function(o){o.Item=fL,o.Group=MY,o.defaultProps={prefixCls:"x6",hoverEffect:!1}})(Rp||(Rp={}));var AY=function(a){var r=co(),n=a.item,e=a.layout,t=Mn()(Object(Qe.a)({},"xflow-toolbar-item",!0)),i=e==="vertical"?"":n.text,s=void 0;if(n.icon)s=n.icon;else if(n.iconName){var u=Xc.get(n.iconName);s=A.a.createElement(u,null)}var l=n.render,c=n.isEnabled,f=c===void 0?!0:c,d=r.commandService,h=r.modelService,p=function(){n.onClick&&n.onClick({toolbarItem:n,commandService:d,modelService:h})};return l?A.a.createElement(l,Object.assign({},n,{onClick:p}),A.a.createElement(Rp.Item,Object.assign({},n,{icon:s,text:i,className:t,disabled:!f,tooltip:n.tooltip||n.text,tooltipProps:Object.assign({placement:e==="vertical"?"left":"bottom"},n.tooltipProps),onClick:function(){}}))):A.a.createElement(Rp.Item,Object.assign({},n,{icon:s,text:i,className:t,hidden:!n,disabled:!f,tooltip:n.tooltip||n.text,onClick:p,tooltipProps:Object.assign(Object.assign({},n.tooltipProps),{placement:e==="vertical"?"left":"bottom"})}))},TY=function(a){var r=a.group,n=a.layout,e=A.a.useMemo(function(){return r.name||Fc()},[r.name]),t=r.items,i=t===void 0?[]:t;if(i.length===0)return null;var s=Mn()(Object(Qe.a)({},"xflow-toolbar-group",!0));return A.a.createElement(Rp.Group,{className:s,key:e},i.map(function(u){return A.a.createElement(AY,{item:u,layout:n,key:u.id})}))},PY=function(a){var r=a.config,n=r.moduleId,e=co(),t=kp({name:n,layout:a.layout,mainGroups:[],extraGroups:[],customRender:null}),i=Object(Xe.a)(t,4),s=i[0],u=i[1],l=i[2],c=i[3];return A.a.useEffect(function(){var f=new Xi,d=e.modelService.findDeferredModel(n);if(!d){var h=r.getConfig(),p=h.toolbarCustomRender,m=h.toolbarModelService,b=e.modelService.registerModel({id:n,modelFactory:function(){return l},watchChange:function(x){return ue(void 0,void 0,void 0,Object(k.a)().mark(function O(){var D;return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(!m){F.next=3;break}return F.next=3,m(x,e.modelService,f);case 3:if(!p){F.next=7;break}return D=function($){x.setValue(function(se){return se.customRender=$})},F.next=7,p(e.modelService,D);case 7:return F.abrupt("return",f);case 8:case"end":return F.stop()}},O)}))}});f.push(b)}return function(){f.dispose()}},[]),{isModelReady:c,state:s,setState:u,toolbarModel:l}},dL=function(a){var r=a.idx,n=a.groups,e=a.layout,t=a.toolbarOptions,i=t.hoverEffect,s=i===void 0?!0:i;return A.a.createElement(Rp,{hoverEffect:s},n.map(function(u,l){var c=r+l;return A.a.createElement(TY,{key:c,group:u,layout:e})}))},kY=function(a){var r,n=PY(a),e=n.isModelReady,t=n.state,i=El(a.position),s=t.mainGroups,u=s===void 0?[]:s,l=t.extraGroups,c=l===void 0?[]:l,f=t.layout,d=t.customRender,h=Mn()(a.className,f,"xflow-toolbar"),p=Mn()((r={},Object(Qe.a)(r,f,!0),Object(Qe.a)(r,"xflow-toolbar-root",!0),r));return e?d?A.a.createElement("div",{className:h,style:Object.assign(Object.assign({},i),a.style)},A.a.createElement(d,{config:t})):A.a.createElement("div",{className:h,style:Object.assign(Object.assign({},i),a.style)},A.a.createElement("div",{className:p},u.length>0&&A.a.createElement(dL,{idx:"mainGroups",groups:u,layout:f,toolbarOptions:t}),c.length>0&&A.a.createElement(dL,{idx:"extraGroups",groups:c,layout:f,toolbarOptions:t}))):A.a.createElement("div",{className:h,style:Object.assign(Object.assign({},i),a.style)},A.a.createElement(cL.a,{spinning:!0,size:"small"}))},DY=A.a.memo(kY),hL=function(a){var r=co(),n=!!r,e=A.a.useMemo(function(){return a.config?a.config:new lL},[a.config]);return n?A.a.createElement(DY,Object.assign({},a,{config:e})):null},vL=function(a){return function(r){var n=A.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=A.a.useMemo(function(){var t=new lL;return a(t,n),t},[n]);return e}},IY=v("C/nq"),RY=v("CqGu"),NY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"},LY=NY,Np=v("6VBw"),gL=function(a,r){return bt.createElement(Np.a,Object(Ku.a)(Object(Ku.a)({},a),{},{ref:r,icon:LY}))};gL.displayName="OneToOneOutlined";var jY=bt.forwardRef(gL),_Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},FY=_Y,pL=function(a,r){return bt.createElement(Np.a,Object(Ku.a)(Object(Ku.a)({},a),{},{ref:r,icon:FY}))};pL.displayName="CompressOutlined";var BY=bt.forwardRef(pL),GY=v("3R4v"),zY=v("IehP"),Dy;(function(o){Xc.set("ZoomInOutlined",IY.a),Xc.set("ZoomOutOutlined",RY.a),Xc.set("OneToOneOutlined",jY),Xc.set("CompressOutlined",BY),Xc.set("FullscreenOutlined",GY.a),Xc.set("FullscreenExitOutlined",zY.a),o.ZOOM_IN=wi.GRAPH_ZOOM.id+"-zoom-in",o.ZOOM_OUT=wi.GRAPH_ZOOM.id+"-zoom-out",o.SCALE_TO_ONE=wi.GRAPH_ZOOM.id+"-scale-to-one",o.SCALE_TO_FIT=wi.GRAPH_ZOOM.id+"-scale-to-fit",o.FULLSCREEN=wi.GRAPH_ZOOM.id+"-fullscreen",o.MAX_SCALE=1.5,o.MIN_SCALE=.05,o.zoomOptions={maxScale:o.MAX_SCALE,minScale:o.MIN_SCALE},o.getToolbarConfig=function(a){var r=a.zoomFactor,n=a.fullscreen;return[{name:"main",items:[{id:o.ZOOM_IN,tooltip:"\u653E\u5927",iconName:"ZoomInOutlined",onClick:function(t){var i=t.commandService;i.executeCommand(wi.GRAPH_ZOOM.id,{factor:.1,zoomOptions:o.zoomOptions})}},{id:o.ZOOM_OUT,tooltip:"\u7F29\u5C0F",iconName:"ZoomOutOutlined",onClick:function(t){var i=t.commandService;i.executeCommand(wi.GRAPH_ZOOM.id,{factor:-.1,zoomOptions:o.zoomOptions})}},{id:o.SCALE_TO_ONE,iconName:"OneToOneOutlined",tooltip:"\u7F29\u653E\u52301:1",isEnabled:r!==1,onClick:function(t){var i=t.commandService;i.executeCommand(wi.GRAPH_ZOOM.id,{factor:"real",zoomOptions:o.zoomOptions})}},{id:o.SCALE_TO_FIT,tooltip:"\u7F29\u653E\u5230\u9002\u5E94\u5C4F\u5E55",iconName:"CompressOutlined",onClick:function(t){var i=t.commandService;i.executeCommand(wi.GRAPH_ZOOM.id,{factor:"fit",zoomOptions:o.zoomOptions})}},{id:o.FULLSCREEN,tooltip:n?"\u9000\u51FA\u5168\u5C4F":"\u5168\u5C4F",iconName:n?"FullscreenExitOutlined":"FullscreenOutlined",onClick:function(t){var i=t.commandService;i.executeCommand(wi.GRAPH_FULLSCREEN.id,{})}}]}]}})(Dy||(Dy={}));var zq="CANVAS_SCALE_TOOLBAR",UY=vL(function(o){o.setToolbarModelService(function(a,r){return ue(void 0,void 0,void 0,Object(k.a)().mark(function n(){var e,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,ke.GRAPH_SCALE.useValue(r);case 2:return e=u.sent,a.setValue(function(l){l.mainGroups=Dy.getToolbarConfig({zoomFactor:e.zoomFactor,fullscreen:!1})}),u.next=6,ke.GRAPH_FULLSCREEN.getModel(r);case 6:return t=u.sent,t.setValue(!1),t.watch(function(l){a.setValue(function(c){c.mainGroups=Dy.getToolbarConfig({zoomFactor:e.zoomFactor,fullscreen:l})})}),u.next=11,ke.GRAPH_SCALE.getModel(r);case 11:i=u.sent,i.watch(function(l){var c=l.zoomFactor;return ue(void 0,void 0,void 0,Object(k.a)().mark(function f(){var d;return Object(k.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,ke.GRAPH_FULLSCREEN.useValue(r);case 2:d=p.sent,a.setValue(function(m){m.mainGroups=Dy.getToolbarConfig({zoomFactor:c,fullscreen:d})});case 4:case"end":return p.stop()}},f)}))});case 13:case"end":return u.stop()}},n)}))})}),VY=function(a){var r=UY(a);return A.a.createElement(hL,Object.assign({layout:"vertical"},a,{config:r,position:a.position||{top:12,right:12}}))},ql=v("Vl3Y"),sA=v("2/Rp");function Uq(o){var a=o.className,r=o.layout,n=o.initialValues,e=o.form,t=o.formItems,i=t===void 0?[]:t,s=o.onFinish,u=o.submitButton,l=o.buttonProps;if(!e)return null;var c=r==="vertical"?{padding:"0px 12px"}:{padding:"8px 12px"};return A.a.createElement(ql.a,{size:"small",form:e,style:c,layout:r,onFinish:s,className:a,initialValues:n,labelCol:r==="vertical"?{span:24}:{span:8},wrapperCol:r==="vertical"?{span:24}:{span:16}},i.map(function(f){return A.a.createElement(ql.a.Item,Object.assign({label:f.label,name:f.name,rules:f.rules},f.itemProps),A.a.createElement(f.render,f.renderProps))}),A.a.createElement(ql.a.Item,{wrapperCol:{offset:0,span:24}},u||A.a.createElement(sA.a,Object.assign({type:"primary",htmlType:"submit",style:{width:"100%"}},l),"\u6267\u884C\u547D\u4EE4")))}function Vq(o,a){return Math.floor(Math.random()*(a-o)+o)}var mL=Symbol("IMinimapConfigProvider"),sE=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.registerHookHub=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Xi,i=[r.graphOptions.registerHook({name:"add minimap options",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d;return Object(k.a)().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.minimapConfig.getConfig();case 2:d=p.sent,c.minimap=Object.assign({},d);case 4:case"end":return p.stop()}},f,this)}))}})],t.pushAll(i),u.abrupt("return",Or.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});nt([Pe.inject(mL),ze("design:type",Object)],sE.prototype,"minimapConfig",void 0),sE=nt([Pe.singleton({contrib:Zl})],sE);var HY=function(a){return Pe.Module(function(r){r(mL,{useDynamic:function(){return a}}),r(sE)})},Iy=function(o){Object($n.a)(r,o);var a=Object(Xn.a)(r);function r(){return Object(Ie.a)(this,r),a.apply(this,arguments)}return Object(pe.a)(r,[{key:"renderMarkup",value:function(){return this.renderJSONMarkup({tagName:"rect",selector:"body"})}},{key:"update",value:function(){Object(Vr.a)(Object(Hr.a)(r.prototype),"update",this).call(this,{body:{refWidth:"100%",refHeight:"100%",fill:r.nodeFillColor}})}}]),r}(ss);Iy.nodeFillColor="#31d0c6",Iy.setNodeFillColor=function(o){Iy.nodeFillColor=o};var WY="CanvasMiniMap",$Y=function(){return{grid:!1,enabled:!0,width:200,height:120,padding:8,graphOptions:{async:!0,getCellView:function(r){if(r.isNode())return Iy},createCellView:function(r){if(r.isEdge())return null}}}},XY=function(a){var r=a.nodeFillColor,n=a.borderColor,e=n===void 0?"#ced4de":n,t=a.handlerColor,i=t===void 0?"rgba(0,0,0,.3)":t,s=a.miniMapClz,u=s===void 0?"":s,l=a.position,c=l===void 0?{bottom:12,right:12}:l,f=a.minimapOptions,d=f===void 0?{}:f,h=A.a.useRef(null),p=A.a.useRef(a.minimapOptions),m=A.a.useMemo(function(){return new Set([u,"xflow-minimap","minimap-instacne-"+Date.now().toString()])},[u]),b=A.a.useMemo(function(){return function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function O(){return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.abrupt("return",Object.assign(Object.assign(Object.assign({},$Y()),p.current),{container:h.current}));case 1:case"end":return I.stop()}},O)}))}},[h]),E=El(c);A.a.useEffect(function(){p.current=d},[p,d]),A.a.useEffect(function(){r&&Iy.setNodeFillColor(r)},[r]),A.a.useEffect(function(){var O=Array.from(m).reduce(function(F,H){return H?"".concat(F,".").concat(H):F},""),D=`
      `.concat(O,` .x6-widget-minimap-viewport {
        border: 1px solid `).concat(e,`;
        margin: 0;
      }
      `).concat(O,` .x6-widget-minimap-viewport-zoom {
        border: 1px solid `).concat(i,`;
      }
    `),I=CD(D);return function(){document.head.removeChild(I)}},[e,m,i]);var x=Array.from(m).join(" ");return A.a.createElement(I0,{config:{getConfig:b,CONFIG_TYPE:WY},createModule:HY},A.a.createElement("div",{ref:h,className:x,style:E}))},KY=function(){function o(){Object(Ie.a)(this,o),this.getValue=function(){return{}}}return Object(pe.a)(o,[{key:"dispose",value:function(){this.getValue=function(){return null}}}]),o}(),Hq=function(){function o(a){Object(Ie.a)(this,o),this.moduleId=a}return Object(pe.a)(o,[{key:"dispose",value:function(){}}]),o}(),yL=A.a.createContext({propsProxy:null,commandService:null,modelService:null}),Gh=function(){return A.a.useContext(yL)},zh=function(a){var r,n=a.className,e=a.position,t=a.style,i=a.children,s=co(),u=El(e),l=A.a.useMemo(function(){return new KY},[]);if(A.a.useEffect(function(){return function(){l.dispose()}},[l]),!s||!s.modelService)return null;l.getValue=function(){return a};var c=Mn()((r={},Object(Qe.a)(r,n,!!n),Object(Qe.a)(r,"xflow-workspace-panel",!0),r)),f=s.commandService,d=s.modelService;return A.a.createElement(yL.Provider,{value:{propsProxy:l,commandService:f,modelService:d}},A.a.createElement("div",{className:c,style:Object.assign(Object.assign({},u),t)},i))},bL=v("MJZm"),CL=v("diRs"),tg=v("ECub"),YY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},ZY=YY,EL=function(a,r){return bt.createElement(Np.a,Object(Ku.a)(Object(Ku.a)({},a),{},{ref:r,icon:ZY}))};EL.displayName="FolderOpenFilled";var JY=bt.forwardRef(EL),QY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},qY=QY,wL=function(a,r){return bt.createElement(Np.a,Object(Ku.a)(Object(Ku.a)({},a),{},{ref:r,icon:qY}))};wL.displayName="FolderFilled";var eZ=bt.forwardRef(wL),Lp={HORIRONTAL_NODE:"xflow-node-horizontal-edge",VERTICAL_NODE:"xflow-node-vertical-edge",VERTICAL_GROUP:"xflow-group-vertical-edge"},uE={EDGE:"xflow-edge"},uA="XFLOW_NODE_SHAPE",xL="processing",tZ=160,nZ=32,jp;(function(o){o.id="GRAPH_STATUS_INFO";var a;(function(r){r.SUCCESS="success",r.PROCESSING="processing",r.ERROR="error",r.DEFAULT="default",r.WARNING="warning"})(a=o.StatusEnum||(o.StatusEnum={})),o.getModel=xo(o.id),o.useValue=Oo(o.id)})(jp||(jp={}));var lE;(function(o){o.QUERY_GRAPH_STATUS={id:"xflow:query-graph-status",label:"\u67E5\u8BE2\u753B\u5E03\u8282\u70B9\u72B6\u6001"}})(lE||(lE={}));var Ry,cE=Ae.AnchorGroup;wa.registry.exist(uA)?Ry=wa.registry.get(uA):Ry=R0.define({width:tZ,height:nZ,shape:uA,view:j.X6_NODE_PORTAL_NODE_VIEW,ports:{groups:{top:{zIndex:2,position:{name:cE.TOP}},bottom:{zIndex:2,position:{name:cE.BOTTOM}},right:{zIndex:2,position:{name:cE.RIGHT}},left:{zIndex:2,position:{name:cE.LEFT}}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%",zIndex:1}},portMarkup:[{tagName:"g",selector:"xflow-port-group",className:"xflow-port-group",attrs:{width:8,height:8,x:-4,y:-4,zIndex:10,magnet:"true"},children:[{tagName:"circle",selector:"xflow-port",className:"xflow-port",attrs:{r:4,fill:"#fff",stroke:"#d9d9d9",zIndex:12}},{tagName:"polygon",selector:"xflow-port-arrow",className:"xflow-port-arrow",attrs:{points:"0,0 8,0 4,4 ",fill:"#d9d9d9",stroke:"#d9d9d9",zIndex:13,transform:"translate(-4,0)"}}]}]});var rZ=bL.a.DirectoryTree,OL=bL.a.TreeNode,iZ=function(a){var r=a.expanded;return r?A.a.createElement(JY,null):A.a.createElement(eZ,null)},SL=function(a){return new Ry(a)},ML=function(a){var r=a.nodeConfig,n=a.onMouseDown,e=a.graphConfig,t=a.modelService,i=a.commandService;if(!e)return A.a.createElement("div",null);if(r.renderComponent)return A.a.createElement("div",{onMouseDown:n},A.a.createElement(r.renderComponent,{data:r,isNodeTreePanel:!0}));var s=e.nodeTypeParser(r)||j.XFLOW_DEFAULT_NODE,u=e.nodeRender.get(s);return A.a.createElement("div",{onMouseDown:n},A.a.createElement(u,{commandService:i,modelService:t,data:r,isNodeTreePanel:!0}))},lA=function(a){var r=Object(bt.useState)(!1),n=Object(Xe.a)(r,2),e=n[0],t=n[1],i=Object(bt.useState)(),s=Object(Xe.a)(i,2),u=s[0],l=s[1],c=co(),f=c.getGraphConfig;A.a.useEffect(function(){f().then(function(O){l(O.appContainer)})});var d=a.prefixClz,h=a.graphConfig,p=a.commandService,m=a.modelService,b=a.popoverContent,E=a.onMouseDown,x=a.item;return A.a.createElement(A.a.Fragment,null,b&&A.a.createElement(CL.a,{placement:"right",destroyTooltipOnHide:!0,content:b,visible:e,onVisibleChange:function(D){t(D)},getPopupContainer:function(){return u||document.body}},A.a.createElement("div",{className:"".concat(d,"-node-wrapper"),onMouseEnter:function(){t(!0)}},ML({graphConfig:h,commandService:p,onMouseDown:E,modelService:m,nodeConfig:x}))),!b&&A.a.createElement("div",{className:"".concat(d,"-node-wrapper"),onMouseEnter:function(){t(!0)}},ML({graphConfig:h,commandService:p,onMouseDown:E,modelService:m,nodeConfig:x})))},aZ=function(a){var r=a.x6NodeFactory,n=a.dndOptions,e=a.onNodeDrop,t=a.state,i=a.onFolderExpand,s=a.prefixClz,u=co(),l=u.graphProvider,c=u.modelService,f=u.commandService,d=A.a.useState(),h=Object(Xe.a)(d,2),p=h[0],m=h[1],b=A.a.useState(),E=Object(Xe.a)(b,2),x=E[0],O=E[1],D=A.a.useState(),I=Object(Xe.a)(D,2),F=I[0],H=I[1];A.a.useEffect(function(){l.getGraphInstance().then(function(de){H(de)})}),A.a.useEffect(function(){if(l.getGraphOptions().then(function(Ee){m(Ee)}),!!F){var de=new be.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},n),{target:F,validateNode:function(Oe){return ue(void 0,void 0,void 0,Object(k.a)().mark(function $e(){var tt;return Object(k.a)().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:if(tt=Object.assign(Object.assign({},Oe.getData()),Oe.getPosition()),!e){it.next=6;break}return it.next=4,e(tt,f,c);case 4:it.next=7;break;case 6:console.error("onNodeDrop method is required in NodeTree Panel");case 7:return it.abrupt("return",!1);case 8:case"end":return it.stop()}},$e)}))}}));O(de)}},[f,n,F,l,c,e]);var $=A.a.useCallback(function(de){return function(Ee){if(!(!F||!x||!p)){var Oe=p.nodeTypeParser(de),$e=de.renderComponent?de.renderComponent:p.nodeRender.get(Oe),tt=r2($e,f,c),Le={data:de,width:de.width||180,height:de.height||40,view:p.graphId,component:tt},it=r?r(Le):SL(Le);x.start(it,Ee.nativeEvent)}}},[f,x,F,p,c,r]),se=A.a.useCallback(function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return de.map(function(Ee){var Oe=Ee.isDirectory,$e=Ee.children,tt=Ee.popoverContent;return Oe?A.a.createElement(OL,{icon:iZ,key:Ee.id,title:Ee.label,className:"".concat(s,"-tree-folder")},se($e)):A.a.createElement(OL,{isLeaf:!0,key:Ee.id,className:"".concat(s,"-tree-leaf"),icon:A.a.createElement("span",null),title:A.a.createElement(lA,{item:Ee,onMouseDown:$(Ee),popoverContent:tt,prefixClz:s,modelService:c,commandService:f,graphConfig:p})})})},[f,p,c,$,s]);return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(s,"-body"),style:a.style},!t.keyword&&A.a.createElement(rZ,{showIcon:!0,selectable:!1,autoExpandParent:!1,onExpand:i,expandedKeys:t.expandedKeys,className:"".concat(s,"-tree")},se(t.treeData)),t.searchList.length>0&&A.a.createElement("ul",{className:"".concat(s,"-body-list")},t.searchList.map(function(de){return A.a.createElement("li",{key:de.id,className:"".concat(s,"-body-list-item")},A.a.createElement(lA,{item:de,onMouseDown:$(de),popoverContent:de.popoverContent,prefixClz:s,modelService:c,commandService:f,graphConfig:p}))})),t.keyword&&t.searchList.length===0&&A.a.createElement(tg.a,{style:{marginTop:"48px"}})))},_p=v("5rEg"),oZ=function(a){var r=a.prefixClz,n=a.onKeywordChange,e=Gh(),t=e.propsProxy,i=t.getValue();return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(r,"-header"),style:a.style},i.header&&A.a.isValidElement(i.header)&&i.header,i.searchService&&A.a.createElement("div",{className:"".concat(r,"-header-search")},A.a.createElement(_p.a,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:function(u){return n(u.target.value)},style:{width:"100%",border:0}}))))},sZ=function(a){var r=a.prefixClz,n=Gh(),e=n.propsProxy,t=e.getValue();return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(r,"-footer"),style:a.style},t.footer&&A.a.isValidElement(t.footer)&&t.footer))},uZ=40,lZ=40,AL="XFLOW_TREE_PANEL_ROOT_ID",TL=function(a){var r=a&&a.headerPosition&&a.headerPosition.height||uZ,n=a.footerPosition&&a.footerPosition.height||lZ;return{headerStyle:El(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},a.headerPosition)),bodyStyle:El(Object.assign({left:0,right:0,top:r,bottom:n},a.bodyPosition)),footerStyle:El(Object.assign({left:0,right:0,lineHeight:n,height:n,bottom:0},a.footerPosition))}},cZ=v("qPyV"),fZ=v.n(cZ),Ny;(function(o){var a=this;o.id="TREE_PANEL_MODEL",o.useModel=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.awaitModel(o.id));case 1:case"end":return t.stop()}},n)}))}})(Ny||(Ny={}));var Wq=function(a,r){a.executeCommand(rp.UPDATE_MODEL.id,{getModel:function(e){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Ny.useModel(e));case 1:case"end":return s.stop()}},t)}))},updateModel:r})},dZ=function(a){var r=a.treeDataService,n=a.searchService,e=co(),t=e.modelService,i=kp({treeData:[],searchList:[],treeNodeList:[],expandedKeys:[],defaultExpandAll:!1,keyword:""}),s=Object(Xe.a)(i,3),u=s[0],l=s[1],c=s[2];A.a.useEffect(function(){t.findDeferredModel(Ny.id)||t.registerModel({id:Ny.id,modelFactory:function(){return c},watchChange:function(p){return ue(void 0,void 0,void 0,Object(k.a)().mark(function m(){var b,E,x;return Object(k.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,ke.GRAPH_META.getModel(t);case 2:return b=D.sent,E=function(F){return ue(void 0,void 0,void 0,Object(k.a)().mark(function H(){var $,se,de,Ee,Oe,$e;return Object(k.a)().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:return Le.next=2,r(F,t);case 2:return $=Le.sent,se=hZ($),de=se.treeData,Ee=se.rootNodes,Le.next=6,p.getValidValue();case 6:return Oe=Le.sent,$e=Oe.expandedKeys.length>0?Oe.expandedKeys:Ee.map(function(it){return it.id}),Le.abrupt("return",{listData:$,treeData:de,expandedKeys:$e});case 9:case"end":return Le.stop()}},H)}))},x=b.watch(function(I){return ue(void 0,void 0,void 0,Object(k.a)().mark(function F(){var H;return Object(k.a)().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,E(I);case 2:H=se.sent,p.setValue({treeNodeList:H.listData,treeData:H.treeData,expandedKeys:H.expandedKeys,defaultExpandAll:!1,keyword:"",searchList:[]});case 4:case"end":return se.stop()}},F)}))}),D.abrupt("return",Or.create(function(){x.dispose()}));case 6:case"end":return D.stop()}},m)}))}})},[]);var f=A.a.useCallback(function(h){l(function(p){p.expandedKeys=h})},[l]),d=A.a.useCallback(function(h){return ue(void 0,void 0,void 0,Object(k.a)().mark(function p(){var m;return Object(k.a)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(n){E.next=2;break}return E.abrupt("return",console.warn("searchService is not defined"));case 2:if(!h){E.next=9;break}return E.next=5,n(u.treeNodeList,h);case 5:m=E.sent,l(function(x){x.keyword=h,x.searchList=m}),E.next=10;break;case 9:l(function(x){x.keyword="",x.searchList=[]});case 10:case"end":return E.stop()}},p)}))},[n,u.treeNodeList]);return{state:u,setState:l,onKeywordChange:d,onFolderExpand:f}};function hZ(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=function(s){var u=fZ()(s,"id"),l=u.reduce(function(c,f){var d=f.parentId||AL;c.has(d)||c.set(d,[]);var h=c.get(d);return h.push(f),c},new Map);return l},r=a(UN()(o));function n(i,s){return i.map(function(u){if(s.has(u.id)){var l=s.get(u.id);u.key=u.id,u.isDirectory=!0,u.children=n(l,s)||[]}else u.isLeaf=!0;return u})}var e=r.get(AL)||[],t=n(e,r);return{treeData:t,rootNodes:e}}var PL;(function(o){o.id="TREE_PANEL_DATA"})(PL||(PL={}));var vZ=function(a){var r=TL(a),n=r.headerStyle,e=r.bodyStyle,t=r.footerStyle,i=dZ(a),s=i.state,u=i.onFolderExpand,l=i.onKeywordChange;return A.a.createElement(A.a.Fragment,null,A.a.createElement(oZ,Object.assign({},a,{state:s,style:n,onKeywordChange:l})),A.a.createElement(aZ,Object.assign({},a,{state:s,style:e,onFolderExpand:u})),A.a.createElement(sZ,Object.assign({},a,{state:s,style:t})))},$q=function(a){var r=fp("node-dnd-panel");return A.a.createElement(zh,Object.assign({},a,{className:r}),A.a.createElement(vZ,Object.assign({},a,{prefixClz:r})))},gZ=function(a){return new Ry(a)},pZ=function(a){var r=a.x6NodeFactory,n=a.dndOptions,e=a.onNodeDrop,t=co(),i=t.graphProvider,s=t.modelService,u=t.commandService,l=A.a.useState(),c=Object(Xe.a)(l,2),f=c[0],d=c[1],h=A.a.useState(),p=Object(Xe.a)(h,2),m=p[0],b=p[1],E=A.a.useState(),x=Object(Xe.a)(E,2),O=x[0],D=x[1];A.a.useEffect(function(){i.getGraphInstance().then(function(F){D(F)}),i.getGraphOptions().then(function(F){d(F)})},[i,D,d]),A.a.useEffect(function(){if(!!O){var F=new be.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},n),{target:O,validateNode:function($){return ue(void 0,void 0,void 0,Object(k.a)().mark(function se(){var de;return Object(k.a)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(de=Object.assign(Object.assign({},$.getData()),$.getPosition()),!e){Oe.next=6;break}return Oe.next=4,e(de,u,s);case 4:Oe.next=7;break;case 6:console.error("onNodeDrop method is required in NodeTree Panel");case 7:return Oe.abrupt("return",!1);case 8:case"end":return Oe.stop()}},se)}))}}));return b(F),function(){F.dispose()}}},[u,s,n,O,e]);var I=A.a.useCallback(function(F){return function(H){if(!(!O||!m||!f)&&!F.isDisabled){var $=f.nodeTypeParser(F),se=F.renderComponent?F.renderComponent:f.nodeRender.get($),de=r2(se,u,s),Ee={data:F,width:F.width||180,height:F.height||40,view:f.graphId,component:de},Oe=r?r(Ee):gZ(Ee);m.start(Oe,H.nativeEvent)}}},[u,m,O,f,s,r]);return{graphConfig:f,onMouseDown:I,modelService:s,commandService:u}},kL=function(a){var r=a.nodeConfig,n=a.onMouseDown,e=a.graphConfig,t=a.modelService,i=a.commandService;if(!e)return A.a.createElement("div",null);if(r.renderComponent)return A.a.createElement("div",{onMouseDown:n},A.a.createElement(r.renderComponent,{data:r,isNodePanel:!0}));var s=e.nodeTypeParser(r)||j.XFLOW_DEFAULT_NODE,u=e.nodeRender.get(s);return A.a.createElement("div",{onMouseDown:n},A.a.createElement(u,{commandService:i,modelService:t,data:r,isNodeTreePanel:!0}))},DL=function(a){var r=A.a.useState(!1),n=Object(Xe.a)(r,2),e=n[0],t=n[1],i=a.prefixClz,s=a.graphConfig,u=a.commandService,l=a.modelService,c=a.popoverContent,f=a.onMouseDown,d=a.item;return A.a.createElement(A.a.Fragment,null,c?A.a.createElement(CL.a,{placement:"right",destroyTooltipOnHide:!0,content:c,visible:e,onVisibleChange:function(p){t(p)}},A.a.createElement("div",{className:"".concat(i,"-node-wrapper"),onMouseEnter:function(){t(!0)}},kL({graphConfig:s,commandService:u,onMouseDown:f,modelService:l,nodeConfig:d}))):A.a.createElement("div",{className:"".concat(i,"-node-wrapper")},kL({graphConfig:s,commandService:u,onMouseDown:f,modelService:l,nodeConfig:d})))},mZ=function(a){var r=a.searchResult,n=a.prefixClz,e=a.onMouseDown,t=a.modelService,i=a.commandService,s=a.graphConfig;return r.length===0?A.a.createElement(tg.a,{style:{marginTop:"24px"}}):A.a.createElement("ul",{className:"xflow-collapse-search-list"},r.map(function(u){return A.a.createElement("li",{className:"xflow-collapse-search-list-item ".concat(u.isDisabled?"disabled":""),key:u.id},A.a.createElement(DL,{item:u,onMouseDown:e(u),popoverContent:u.popoverContent,prefixClz:n,modelService:t,commandService:i,graphConfig:s}))}))},yZ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},bZ=yZ,IL=function(a,r){return bt.createElement(Np.a,Object(Ku.a)(Object(Ku.a)({},a),{},{ref:r,icon:bZ}))};IL.displayName="CaretRightOutlined";var CZ=bt.forwardRef(IL),EZ=function(a){var r=a.onActiveKeyChange,n=a.collapseData,e=a.prefixClz,t=a.onMouseDown,i=a.modelService,s=a.commandService,u=a.graphConfig,l=function(d){var h=d.header,p=d.extra,m=d.icon,b=d.isCollapsed,E=function(O){O.preventDefault(),r(d.id)};return A.a.createElement("div",{className:"xflow-collapse-header",onClick:E},A.a.createElement("div",{className:"xflow-collapse-header-icon"},t2(m)?A.a.createElement(m,{isCollapsed:b}):A.a.createElement(CZ,{rotate:b?0:90,style:{fontSize:"12px"}})),A.a.createElement("div",{className:"xflow-collapse-header-label"},t2(h)?A.a.createElement(h,d):h),A.a.createElement("div",{className:"xflow-collapse-header-extra"},t2(p)?A.a.createElement(p,d):p))},c=function(d){return A.a.createElement("div",{className:"xflow-collapse-content"},d.map(function(h){return A.a.createElement("div",{className:"xflow-collapse-content-item ".concat(h.isDisabled?"disabled":""),key:h.id},A.a.createElement(DL,{item:h,onMouseDown:t(h),popoverContent:h.popoverContent,prefixClz:e,modelService:i,commandService:s,graphConfig:u}))}))};return A.a.createElement("ul",{className:"xflow-collapse-list"},n.length===0&&A.a.createElement(tg.a,{style:{marginTop:"24px"}}),n.map(function(f){var d=f.children,h=d===void 0?[]:d,p=f.isCollapsed,m=f.render,b=p?"close":"open";return A.a.createElement("li",{className:"xflow-collapse-list-item ".concat(b),key:f.id},l(f),t2(m)?A.a.createElement(m,f):c(h))}))},wZ=function(a){var r=a.state,n=a.prefixClz,e=a.onActiveKeyChange,t=pZ(a),i=t.graphConfig,s=t.onMouseDown,u=t.modelService,l=t.commandService,c=r.searchResult,f=r.collapseData,d=r.keyword;return A.a.createElement("div",{className:"".concat(n,"-body"),style:a.style},d.length===0&&A.a.createElement(EZ,{onActiveKeyChange:e,collapseData:f,onMouseDown:s,modelService:u,commandService:l,graphConfig:i,prefixClz:n}),d.length>0&&A.a.createElement(mZ,{searchResult:c,onMouseDown:s,modelService:u,commandService:l,graphConfig:i,prefixClz:n}))},xZ=function(a){var r=a.prefixClz,n=a.onKeywordChange,e=a.state,t=Gh(),i=t.propsProxy,s=i.getValue(),u=function(c){var f=e.collapseData.reduce(function(d,h){return h.children&&d.push.apply(d,Object(ot.a)(h.children)),d},[]);n(c.target.value,f)};return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(r,"-header"),style:a.style},s.header&&A.a.isValidElement(s.header)&&s.header,s.searchService&&A.a.createElement("div",{className:"".concat(r,"-header-search")},A.a.createElement(_p.a,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:function(c){return u(c)},style:{width:"100%",border:0}}))))},OZ=function(a){var r=a.prefixClz,n=Gh(),e=n.propsProxy,t=e.getValue();return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(r,"-footer"),style:a.style},t.footer&&A.a.isValidElement(t.footer)&&t.footer))},SZ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"outlined"},MZ=SZ,RL=function(a,r){return bt.createElement(Np.a,Object(Ku.a)(Object(Ku.a)({},a),{},{ref:r,icon:MZ}))};RL.displayName="CaretLeftOutlined";var AZ=bt.forwardRef(RL),TZ=function(a){var r=a.prefixClz,n=a.onCollapseBtnClick,e=a.isCollapsed,t=a.collapseButtonStyle,i=a.style;return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(r,"-header"),style:Object.assign(Object.assign({},i),t),onClick:n},A.a.createElement(AZ,{rotate:e?180:0})))},PZ=40,kZ=40,DZ=function(a){var r=a&&a.headerPosition&&a.headerPosition.height||PZ,n=a.footerPosition&&a.footerPosition.height||kZ;return{headerStyle:El(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},a.headerPosition)),bodyStyle:El(Object.assign({left:0,right:0,top:r,bottom:n},a.bodyPosition)),footerStyle:El(Object.assign({left:0,right:0,lineHeight:n,height:n,bottom:0},a.footerPosition))}},Ly;(function(o){var a=this;o.id="COLLAPSE_PANEL_DATA",o.useModel=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.awaitModel(o.id));case 1:case"end":return t.stop()}},n)}))}})(Ly||(Ly={}));var Xq=function(a,r){a.executeCommand(rp.UPDATE_MODEL.id,{getModel:function(e){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Ly.useModel(e));case 1:case"end":return s.stop()}},t)}))},updateModel:r})},IZ=function(a){var r=a.collapsible,n=a.nodeDataService,e=a.searchService,t=a.onCollapseChange,i=co(),s=i.modelService,u=kp({keyword:"",collapseData:[],searchResult:[]}),l=Object(Xe.a)(u,3),c=l[0],f=l[1],d=l[2];A.a.useEffect(function(){s.findDeferredModel(Ly.id)||s.registerModel({id:Ly.id,modelFactory:function(){return d},watchChange:function(b){return ue(void 0,void 0,void 0,Object(k.a)().mark(function E(){var x,O,D;return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,ke.GRAPH_META.getModel(s);case 2:return x=F.sent,O=function($){return ue(void 0,void 0,void 0,Object(k.a)().mark(function se(){var de;return Object(k.a)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,n($,s);case 2:return de=Oe.sent,Oe.abrupt("return",{collapseData:de});case 4:case"end":return Oe.stop()}},se)}))},D=x.watch(function(H){return ue(void 0,void 0,void 0,Object(k.a)().mark(function $(){var se,de;return Object(k.a)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.next=2,O(H);case 2:se=Oe.sent,de=se.collapseData,b.setValue(function($e){$e.keyword="",$e.collapseData=de,$e.searchResult=[]});case 5:case"end":return Oe.stop()}},$)}))}),F.abrupt("return",Or.create(function(){D.dispose()}));case 6:case"end":return F.stop()}},E)}))}})},[]);var h=A.a.useCallback(function(m){f(function(b){b.collapseData.forEach(function(E){E.id===m&&E.collapsible!==!1&&(E.isCollapsed=!E.isCollapsed)})})},[f]),p=A.a.useCallback(function(m,b){return ue(void 0,void 0,void 0,Object(k.a)().mark(function E(){var x;return Object(k.a)().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(e){D.next=2;break}return D.abrupt("return",console.warn("searchService is not defined"));case 2:if(!m){D.next=9;break}return D.next=5,e(b,m);case 5:x=D.sent,f(function(I){I.keyword=m,I.searchResult=x}),D.next=10;break;case 9:f(function(I){I.keyword="",I.searchResult=[]});case 10:case"end":return D.stop()}},E)}))},[e]);return{state:c,collapsible:r,setState:f,onKeywordChange:p,onActiveKeyChange:h,onCollapseChange:t}},RZ=function(a){var r=DZ(a),n=r.headerStyle,e=r.bodyStyle,t=r.footerStyle,i=IZ(a),s=i.state,u=i.onActiveKeyChange,l=i.onKeywordChange;return A.a.createElement(A.a.Fragment,null,A.a.createElement(xZ,Object.assign({},a,{state:s,style:n,onKeywordChange:l})),A.a.createElement(wZ,Object.assign({},a,{state:s,style:e,onActiveKeyChange:u})),A.a.createElement(OZ,Object.assign({},a,{state:s,style:t})))},NZ=function(a){var r=a.position,n=a.collapsible,e=a.onCollapseChange,t=r.width,i=t===void 0?200:t,s=r.left,u=fp("collapse-panel"),l=Object(bt.useState)(!1),c=Object(Xe.a)(l,2),f=c[0],d=c[1],h=Object(bt.useCallback)(function(){d(!f),e(!f)},[f,e]);return A.a.createElement(zh,Object.assign({},a,{className:u,position:Object.assign(Object.assign({},r),{left:f?-i:s}),style:{transition:"left 0.5s"}}),A.a.createElement(RZ,Object.assign({},a,{prefixClz:u})),n&&A.a.createElement(TZ,Object.assign({},a,{prefixClz:u,isCollapsed:f,onCollapseBtnClick:h,style:{position:"absolute",zIndex:1,width:13,right:-13,bottom:20,padding:"12px 0px",textAlign:"center",borderWidth:"1px 1px 1px 0",borderStyle:"solid solid solid",borderColor:"rgb(232, 232, 232) rgb(232, 232, 232) rgb(232, 232, 232)",cursor:"pointer"}})))},LZ=function(a){var r=a.state,n=Gh(),e=n.propsProxy,t=e.getValue(),i=co(),s=t.footer&&typeof t.footer=="function";return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(a.prefixClz,"-footer"),style:a.style},s&&A.a.createElement(t.footer,Object.assign(Object.assign({},a),{headerStyle:{},bodyStyle:{},footerStyle:a.style,targetData:r.targetData,targetType:r.targetType,modelService:i.modelService,commandService:i.commandService})),!t.footer&&A.a.createElement("div",{className:"".concat(a.prefixClz,"-footer-title")},t.footerText)))},jZ=function(a){var r=a.prefixClz,n=a.hasSchema,e=a.state,t=Gh(),i=t.propsProxy,s=i.getValue(),u=co();if(n)return null;var l=s.header&&typeof s.header=="function";return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(r,"-header"),style:a.style},l&&A.a.createElement(s.header,Object.assign(Object.assign({},a),{headerStyle:a.style,bodyStyle:{},footerStyle:{},targetData:e.targetData,targetType:e.targetType,modelService:u.modelService,commandService:u.commandService})),!s.header&&A.a.createElement("div",{className:"".concat(r,"-header-title")},s.headerText||"Panel")))},NL=v("ZTPi"),_Z=function(a){var r=a.text,n=Jt(a,["text"]);return r?A.a.createElement(tE.a,Object.assign({placement:"left",title:r},n),A.a.createElement("div",{className:"text-truncate"},r)):null};function Fp(o){if(!!o)return A.a.createElement(_Z,{text:o})}var FZ=v("mwIZ"),LL=v.n(FZ);function BZ(o,a){return function(r,n){var e=o.some(function(t){return typeof(t==null?void 0:t.condition)=="function"});return e?(typeof a=="function"&&a(void 0),!0):o.some(function(t){var i=t.name;if(!i)return console.error("[Schema form]: A dependent name must be provided in the updater when the dependency condition is not a function."),!1;var s=LL()(r,i)!==LL()(n,i);return s?(typeof a=="function"&&a(i),!0):!1})}}function GZ(o){return o===""||o===void 0}function zZ(o,a,r){var n=o.getFieldValue,e=o.getFieldsValue,t=a.dependencies,i=a.hidden,s=a.disabled,u=i,l=s;return t==null||t.forEach(function(c){var f=c.name,d=c.condition,h=c.hidden,p=c.disabled;if(!(typeof d!="function"&&r&&f!==r)){var m=!1;if(typeof d=="function"){var b=e();m=!!d(b)}else{if(!f){console.error("[Schema form]: A dependent name must be provided in the props genarator when the dependency condition is not a function.");return}m=n(f)===d}m&&(h!==void 0&&(u=h),p!==void 0&&(l=p))}}),{hidden:u,disabled:l}}var Uh=function(a){var r=a.schema,n=a.children,e=Object(bt.useState)(),t=Object(Xe.a)(e,2),i=t[0],s=t[1],u=r.dependencies,l=r.value,c=r.defaultValue,f=r.hidden,d=r.disabled,h=Object(bt.useMemo)(function(){return(u==null?void 0:u.length)?BZ(u,s):void 0},[u]);if(typeof n!="function")throw new Error("[Schema Form]: chilren of FormItemWrapper should be a render prop.");var p=GZ(l)?c:l;return h?A.a.createElement(ql.a.Item,{noStyle:!0,shouldUpdate:h},function(m){var b=zZ(m,r,i),E=b.hidden,x=b.disabled;return n({hidden:E,disabled:x,initialValue:p})}):n({hidden:f,disabled:d,initialValue:p})},jL=function(a){var r=a.controlSchema,n=r.required,e=r.tooltip,t=r.extra,i=r.name,s=r.label,u=r.placeholder,l=r.rules;return A.a.createElement(Uh,{schema:r},function(c){var f=c.disabled,d=c.hidden,h=c.initialValue;return A.a.createElement(ql.a.Item,{name:i,label:s,initialValue:h,tooltip:e,extra:Fp(t),required:n,hidden:d,rules:l},A.a.createElement(_p.a,{className:"xflow-form-input",allowClear:!0,placeholder:u,disabled:f}))})},UZ=v("kaz8"),VZ=function(a){var r=a.controlSchema,n=r.required,e=r.tooltip,t=r.extra,i=r.name,s=r.label,u=r.rules;return A.a.createElement(Uh,{schema:r},function(l){var c=l.hidden,f=l.disabled,d=l.initialValue;return A.a.createElement(ql.a.Item,{className:"xflow-form-checkbox",name:i,rules:u,initialValue:d,tooltip:e,extra:Fp(t),required:n,hidden:c,valuePropName:"checked",getValueProps:function(p){var m={true:!0,false:!1};return{checked:!!m[p]}}},A.a.createElement(UZ.a,{disabled:f},s))})},HZ=function(a){var r=a.controlSchema,n=r.required,e=r.tooltip,t=r.extra,i=r.name,s=r.label,u=r.placeholder,l=r.rules;return A.a.createElement(Uh,{schema:r},function(c){var f=c.hidden,d=c.disabled,h=c.initialValue;return A.a.createElement(ql.a.Item,{name:i,label:s,initialValue:h,tooltip:e,extra:Fp(t),required:n,hidden:f,rules:l},A.a.createElement(_p.a.TextArea,{allowClear:!0,placeholder:u,rows:3,disabled:d}))})},cA=v("2fM7"),WZ=function(a){var r=a.controlSchema,n=r.required,e=r.tooltip,t=r.extra,i=r.name,s=r.label,u=r.placeholder,l=r.options,c=l===void 0?[]:l,f=r.rules;return A.a.createElement(Uh,{schema:r},function(d){var h=d.hidden,p=d.disabled,m=d.initialValue;return A.a.createElement(ql.a.Item,{name:i,label:s,initialValue:m,tooltip:e,extra:Fp(t),required:n,hidden:h,rules:f},A.a.createElement(cA.a,{disabled:p,placeholder:u},c.map(function(b){var E=b.title,x=b.value;return A.a.createElement(cA.a.Option,{key:x.toString(),value:x},E)})))})},$Z=v("+eQT"),XZ=v("wd/R"),fA=v.n(XZ),KZ=function(a){var r=a.className,n=a.style,e=a.disabled,t=a.value,i=a.onChange,s=Object(bt.useState)(t?fA()(t):void 0),u=Object(Xe.a)(s,2),l=u[0],c=u[1],f=Object(bt.useRef)(!1);Object(bt.useEffect)(function(){if(!f.current){f.current=!0;return}var h=fA()(t);h.isValid()&&c(h)},[t]);var d=Object(bt.useCallback)(function(h,p){var m=fA()(p);c(m.isValid()?m:void 0),typeof i=="function"&&i(m.isValid()?m.format("YYYY-MM-DD HH:mm:ss"):"")},[i]);return A.a.createElement($Z.a,{showTime:!0,allowClear:!0,className:r,style:n,disabled:e,value:l,onChange:d})},YZ=function(a){var r=a.controlSchema,n=r.required,e=r.tooltip,t=r.extra,i=r.name,s=r.label,u=r.rules;return A.a.createElement(Uh,{schema:r},function(l){var c=l.disabled,f=l.hidden,d=l.initialValue;return A.a.createElement(ql.a.Item,{name:i,label:s,initialValue:d,tooltip:e,extra:Fp(t),required:n,hidden:f,rules:u},A.a.createElement(KZ,{style:{width:"100%"},disabled:c}))})},dA=v("fyUT");function fE(o){var a=Number(o);return Number.isNaN(a)?void 0:a}var ZZ=function(a){var r=a.disabled,n=a.placeholder,e=a.value,t=a.onChange,i=Object(bt.useState)(fE(e)),s=Object(Xe.a)(i,2),u=s[0],l=s[1],c=Object(bt.useRef)(!1);Object(bt.useEffect)(function(){c.current||(c.current=!0),l(fE(e))},[e]);var f=Object(bt.useCallback)(function(d){l(d),typeof t=="function"&&(d===void 0?t(""):typeof fE(d)=="number"&&t(fE(d)))},[t]);return A.a.createElement(dA.a,{style:{width:"100%"},size:"small",placeholder:n,value:u,onChange:f,disabled:r})},JZ=function(a){var r=a.controlSchema,n=r.required,e=r.tooltip,t=r.extra,i=r.name,s=r.label,u=r.placeholder,l=r.rules;return A.a.createElement(Uh,{schema:r},function(c){var f=c.disabled,d=c.hidden,h=c.initialValue;return A.a.createElement(ql.a.Item,{name:i,label:s,initialValue:h,tooltip:e,extra:Fp(t),required:n,hidden:d,rules:l},A.a.createElement(ZZ,{placeholder:u,disabled:f}))})},Vh;(function(o){o.INPUT="input",o.CHECKBOX="checkbox",o.TEXTAREA="textArea",o.SELECT="select",o.DATETIME="datetime",o.FLOAT="float"})(Vh||(Vh={}));var _L=[[Vh.INPUT,jL],[Vh.CHECKBOX,VZ],[Vh.TEXTAREA,HZ],[Vh.DATETIME,YZ],[Vh.SELECT,WZ],[Vh.FLOAT,JZ]],FL=function(a){var r=new Map;return a.forEach(function(n){var e=Object(Xe.a)(n,2),t=e[0],i=e[1],s=t.toLowerCase();r.has(s)&&console.error("".concat(t," is duplicated in controlMap:"),r),r.set(s,i)}),r},QZ=function(a,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jL;if(r.has(a))return r.get(a);var e=a.toLowerCase();return r.has(e)?r.get(e):(console.warn("".concat(a," is not exist in controlmap, fallback to defaultControl")),n)},qZ=NL.a.TabPane,eJ=function(a){var r,n,e=a.schema,t=a.form,i=a.className,s=a.triggerUpdate,u=a.defaultControlRender,l=a.afterUpdatingCb,c=a.controlMap,f=Jt(a,["schema","form","className","triggerUpdate","defaultControlRender","afterUpdatingCb","controlMap"]),d=e.tabs,h=ql.a.useForm(t),p=Object(Xe.a)(h,1),m=p[0],b=A.a.useMemo(function(){return a.controlMap?a.controlMap:FL(_L)},[a.controlMap]),E=Object(bt.useCallback)(function(O){typeof s=="function"&&s(m,O)},[m,s]);Object(bt.useEffect)(function(){m.setFieldsValue({})},[m]);var x=Object(bt.useCallback)(function(){requestAnimationFrame(function(){m.setFieldsValue({})})},[m]);return A.a.createElement(ql.a,Object.assign({size:"small",form:m,layout:"vertical",className:Mn()("xflow-json-form",i)},f),A.a.createElement(NL.a,{type:"card",defaultActiveKey:(n=d[0])===null||n===void 0?void 0:n.name,className:Mn()((r={},Object(Qe.a)(r,"tabs",!0),Object(Qe.a)(r,"xTab",!0),Object(Qe.a)(r,"singleTab",(d==null?void 0:d.length)===1),Object(Qe.a)(r,"coupleTab",(d==null?void 0:d.length)===2),Object(Qe.a)(r,"ternateTab",(d==null?void 0:d.length)===3),r)),onTabClick:x},d.map(function(O){var D=O.name,I=O.groups;return A.a.createElement(qZ,{key:D,tab:D},I.length===0&&A.a.createElement(tg.a,{style:{padding:"24px 0"}}),I.length>0&&I.map(function(F){var H=F.controls,$=H===void 0?[]:H;return $.length===0?A.a.createElement(tg.a,{style:{padding:"24px 0"}}):$.map(function(se){var de=se.shape,Ee=se.name,Oe=QZ(de,b,u);return Oe?A.a.createElement(Oe,{key:Ee,form:m,controlSchema:se,triggerUpdate:E,afterUpdatingCb:l}):(console.error("\u672A\u627E\u5230\u5BF9\u5E94\u7684\u63A7\u4EF6:",de),null)})}))})))},tJ=function(a){var r=a.schema,n=r===void 0?{tabs:[]}:r,e=a.triggerUpdate,t=a.onFieldsChange,i=a.afterUpdatingCb,s=a.defaultControlRender,u=a.loading,l=a.controlMapService,c=a.defaultControls,f=c===void 0?[]:c,d=A.a.useMemo(function(){var h=FL([].concat(Object(ot.a)(_L),Object(ot.a)(f)));return l&&l(h),h},[l,f]);return u?A.a.createElement("div",{className:"".concat(a.prefixClz,"-body"),style:Object.assign(Object.assign({},a.style),{display:"flex",justifyContent:"center",alignItems:"center"})},A.a.createElement(cL.a,{spinning:!0})):A.a.createElement("div",{className:"".concat(a.prefixClz,"-body"),style:a.style},n.tabs.length>0&&A.a.createElement(eJ,{schema:n,onFieldsChange:t,controlMap:d,defaultControlRender:s,afterUpdatingCb:i,triggerUpdate:e}),n.tabs.length===0&&A.a.createElement(tg.a,{style:{paddingTop:"64px"}}))},nJ=40,rJ=40,iJ=function(a,r){var n=a&&a.headerPosition&&a.headerPosition.height||nJ,e=a.footerPosition&&a.footerPosition.height||rJ;return{headerStyle:El(Object.assign(Object.assign({height:0,top:0,left:0,right:0},r?{height:n,lineHeight:n}:{}),a.headerPosition)),bodyStyle:El(Object.assign(Object.assign({left:0,right:0,top:0},r?{top:n,bottom:e}:{bottom:e}),a.bodyPosition)),footerStyle:El(Object.assign(Object.assign({left:0,right:0,lineHeight:e,height:e,bottom:0},r?{lineHeight:e,height:e}:{bottom:0}),a.footerPosition))}},jy;(function(o){var a=this;o.id="XFLOW_JSON_SCHEMA_FORM",o.useModel=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.awaitModel(o.id));case 1:case"end":return t.stop()}},n)}))}})(jy||(jy={}));var Kq=function(a,r){a.executeCommand(rp.UPDATE_MODEL.id,{getModel:function(e){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",jy.useModel(e));case 1:case"end":return s.stop()}},t)}))},updateModel:r})},aJ=function(a){var r=co(),n=r.commandService,e=r.modelService,t=r.getGraphInstance,i=a.formSchemaService,s=kp({schema:{tabs:[]},targetType:null,targetData:null,targetCell:null,loading:!1}),u=Object(Xe.a)(s,4),l=u[0],c=u[1],f=u[2],d=u[3];return A.a.useEffect(function(){if(!(!r||!r.modelService)){var h=new Xi,p=r.modelService.findDeferredModel(jy.id);if(!p){var m=r.modelService.registerModel({id:jy.id,modelFactory:function(){return f},watchChange:function(E,x){return ue(void 0,void 0,void 0,Object(k.a)().mark(function O(){var D,I;return Object(k.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,ke.SELECTED_CELL.getModel(x);case 2:return D=H.sent,I=D.watch(function($){return ue(void 0,void 0,void 0,Object(k.a)().mark(function se(){var de,Ee,Oe;return Object(k.a)().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:if(de=function(it,It){return ue(void 0,void 0,void 0,Object(k.a)().mark(function tn(){var bn,dn,en;return Object(k.a)().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(E.setValue(function(Cn){Cn.loading=!0,Cn.schema={tabs:[]},Cn.targetType=null,Cn.targetData=null,Cn.targetCell=null}),bn=it?it.getData():null,i){jt.next=4;break}return jt.abrupt("return");case 4:return jt.next=6,t();case 6:return dn=jt.sent,jt.next=9,i({commandService:n,modelService:e,targetData:bn,cell:it,targetType:It,graph:dn});case 9:en=jt.sent,E.setValue({loading:!1,schema:en,targetType:It,targetCell:it,targetData:bn});case 11:case"end":return jt.stop()}},tn)}))},Ee=function(it){return it?it.isNode&&it.isNode()&&it.getProp("isGroup")?"group":it.isNode&&it.isNode()?"node":it.isEdge&&it.isEdge()?"edge":"canvas":"canvas"},Oe=Ee($),!(a.targetType||["node","canvas"]).includes(Oe)){tt.next=6;break}return tt.next=6,de($,Oe);case 6:case"end":return tt.stop()}},se)}))}),H.abrupt("return",Or.create(function(){I.dispose(),h.push(I)}));case 5:case"end":return H.stop()}},O)}))}});h.push(m)}return function(){h.dispose()}}},[]),{commandService:n,modelService:e,state:l,setState:c,model:f,isModelReady:d}},oJ=function(a){var r=a.prefixClz,n=a.getCustomRenderComponent,e=a.afterUpdatingCb,t=a.formValueUpdateService,i=t===void 0?function(){}:t,s=aJ(a),u=s.state,l=s.commandService,c=s.modelService,f=A.a.useCallback(function(O){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ue(void 0,void 0,void 0,Object(k.a)().mark(function I(){var F,H,$;return Object(k.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return O.setFieldsValue(D),F=Object.entries(D).map(function(Ee){var Oe=Object(Xe.a)(Ee,2),$e=Oe[0],tt=Oe[1];return{name:$e,value:tt}}),H=Object.entries(u.targetData).map(function(Ee){var Oe=Object(Xe.a)(Ee,2),$e=Oe[0],tt=Oe[1];return{name:$e,value:tt}}),de.next=5,i({allFields:H,values:F,modelService:c,commandService:l,targetData:u.targetData,targetType:u.targetType});case 5:$=de.sent,e&&e($);case 7:case"end":return de.stop()}},I)}))},[e,l,i,c,u.targetData,u.targetType]),d=A.a.useCallback(function(O,D){return ue(void 0,void 0,void 0,Object(k.a)().mark(function I(){var F;return Object(k.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,i({values:O,allFields:D,modelService:c,commandService:l,targetData:u.targetData,targetType:u.targetType});case 2:F=$.sent,e&&e(F);case 4:case"end":return $.stop()}},I)}))},[e,l,i,c,u.targetData,u.targetType]),h=A.a.useMemo(function(){try{return u.schema.tabs.length===0||!u.schema}catch(O){return!0}},[u.schema]),p=iJ(a,h),m=p.headerStyle,b=p.bodyStyle,E=p.footerStyle;if(n){var x=n(u.targetType,u.targetData,c,l);if(x)return A.a.createElement(x,Object.assign(Object.assign({},a),{headerStyle:m,bodyStyle:b,footerStyle:E,targetData:u.targetData,targetType:u.targetType,modelService:c,commandService:l}))}return A.a.createElement("div",{className:r},A.a.createElement(jZ,Object.assign({hasSchema:!h},a,{state:u,style:m,prefixClz:a.prefixClz})),A.a.createElement(tJ,Object.assign({},a,{key:u.targetData&&u.targetData.id,style:b,prefixClz:a.prefixClz,loading:u.loading,schema:u.schema,triggerUpdate:f,onFieldsChange:d})),A.a.createElement(LZ,Object.assign({},a,{state:u,style:E})))},BL=function(a){var r=fp("json-schema-form");return A.a.createElement(zh,Object.assign({},a,{className:r}),A.a.createElement(oJ,Object.assign({},a,{prefixClz:r})))};oe.Connector.registry.exist(Lp.VERTICAL_NODE)||Wi.registerConnector(Lp.VERTICAL_NODE,function(o,a){var r=16,n=Math.abs(a.y-o.y),e=Math.floor(n/3*2),t={x:o.x,y:o.y+r+e},i={x:a.x,y:a.y-r-e};return Si.normalize("M ".concat(o.x," ").concat(o.y,`
         L `).concat(o.x," ").concat(o.y+r,`
         C `).concat(t.x," ").concat(t.y," ").concat(i.x," ").concat(i.y," ").concat(a.x," ").concat(a.y-r,`
         L `).concat(a.x," ").concat(a.y,`
        `))},!0),oe.Connector.registry.exist(Lp.VERTICAL_GROUP)||Wi.registerConnector(Lp.VERTICAL_GROUP,function(o,a){var r=4,n=Math.abs(a.y-o.y),e={x:o.x,y:o.y+r+n},t={x:a.x,y:a.y-r-n};return Si.normalize("M ".concat(o.x," ").concat(o.y,`
       L `).concat(o.x," ").concat(o.y+r,`
       C `).concat(e.x," ").concat(e.y," ").concat(t.x," ").concat(t.y," ").concat(a.x," ").concat(a.y-r,`
       L `).concat(a.x," ").concat(a.y,`
      `))},!0),oe.Connector.registry.exist(Lp.HORIRONTAL_NODE)||Wi.registerConnector(Lp.HORIRONTAL_NODE,function(o,a){var r=4,n=Math.abs(a.y-o.y),e=Math.floor(n/3*2),t={x:o.x,y:o.y+r+e},i={x:a.x,y:a.y-r-e};return Si.normalize("M ".concat(o.x," ").concat(o.y,`
         L `).concat(o.x," ").concat(o.y+r,`
         C `).concat(t.x," ").concat(t.y," ").concat(i.x," ").concat(i.y," ").concat(a.x," ").concat(a.y-r,`
         L `).concat(a.x," ").concat(a.y,`
        `))},!0);var hA=Te.Edge.registry.get(uE.EDGE);Te.Edge.registry.exist(uE.EDGE)||(hA=Te.Edge.registry.register(uE.EDGE,Te.Edge.define({zIndex:1,highlight:!1,shape:uE.EDGE}),!0));var ec;(function(o){var a=this;o.MODEL=jp,o.command=lE.QUERY_GRAPH_STATUS,o.hookKey="queryGraphStatus";var r;(function(n){n.SUCCESS="success",n.PROCESSING="processing",n.ERROR="error",n.DEFAULT="default",n.WARNING="warning"})(r=o.StatusEnum||(o.StatusEnum={})),o.initStatusMap=function(){var n;return n={},Object(Qe.a)(n,o.StatusEnum.DEFAULT,[]),Object(Qe.a)(n,o.StatusEnum.PROCESSING,[]),Object(Qe.a)(n,o.StatusEnum.ERROR,[]),Object(Qe.a)(n,o.StatusEnum.WARNING,[]),Object(Qe.a)(n,o.StatusEnum.SUCCESS,[]),n},o.groupByStatus=function(n){var e=o.initStatusMap();return Object.entries(n).reduce(function(t,i){var s=Object(Xe.a)(i,2),u=s[0],l=s[1];return t[l.status].push(u),t},e)},o.statusDiff=function(n,e){var t=new Set([].concat(Object(ot.a)(n),Object(ot.a)(e))),i={current:[],add:[],remove:[]};return t.forEach(function(s){e.includes(s)&&!n.includes(s)&&i.add.push(s),!e.includes(s)&&n.includes(s)&&i.remove.push(s)}),i},o.shouldStop=function(n){return ue(a,void 0,void 0,Object(k.a)().mark(function e(){return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",[r.ERROR,r.SUCCESS].includes(n.graphStatus));case 1:case"end":return i.stop()}},e)}))}})(ec||(ec={}));var dE=function(){function o(){var a=this;Object(Ie.a)(this,o),this.statusInfo=ec.initStatusMap(),this.getStatusModel=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e,t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=this.contextProvider(),e=n.getModelService(),s.next=4,jp.getModel(e);case 4:return t=s.sent,s.abrupt("return",t);case 6:case"end":return s.stop()}},r,this)}))},this.updateModelValue=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getStatusModel();case 2:e=i.sent,e.setValue(r);case 4:case"end":return i.stop()}},n,this)}))},this.stopCurrentStatusLooping=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n,e,t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.getStatusModel();case 2:return n=s.sent,s.next=5,n.getValidValue();case 5:e=s.sent,t=e.subscription,t.dispose();case 8:case"end":return s.stop()}},r,this)}))},this.addStopDispose=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.getStatusModel();case 2:return e=u.sent,u.next=5,e.getValidValue();case 5:t=u.sent,i=t.subscription,i.push({dispose:function(){n.updateEdges(n.statusInfo,ec.initStatusMap()),n.isLooping=!1}});case 8:case"end":return u.stop()}},r,this)}))},this.updateGraph=function(r,n,e){a.updateNodes(r,n,e),a.updateEdges(r,n)},this.updateNodeData=function(r,n){var e=a.x6Graph.getCellById(r);!e||e.setData(Object.assign(Object.assign(Object.assign(Object.assign({},e.getData()),e.getSize()),e.getPosition()),n))},this.updateNodes=function(r,n,e){Object.keys(r).forEach(function(t){var i=ec.statusDiff(r[t],n[t]);i.add.forEach(function(s){a.updateNodeData(s,e[s])}),i.remove.forEach(function(s){a.updateNodeData(s,e[s])})})},this.updateEdges=function(r,n){var e=ec.statusDiff(r.processing,n.processing),t=a.x6Graph.getEdges();t.forEach(function(i){var s,u=(s=a.x6Graph)===null||s===void 0?void 0:s.findViewByCell(i.id),l=i.getTargetCellId();if(!!l){var c=l.toString();if(!!u){if(e.add.includes(c))return u.addClass(xL);if(e.remove.includes(c))return u.removeClass(xL)}}})},this.execute=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n=this,e,t,i,s,u,l;return Object(k.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),i=t.args,s=t.hooks,u=e.getHooks(),f.next=5,e.getX6Graph();case 5:return this.x6Graph=f.sent,f.next=8,u.queryGraphStatus.call(i,function(d){return ue(n,void 0,void 0,Object(k.a)().mark(function h(){var p=this,m,b,E,x,O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return m=d.graphStatusService,b=d.shouldStop,E=b===void 0?ec.shouldStop:b,x=d.doOnce,I.next=3,this.stopCurrentStatusLooping();case 3:return O=function F(H){var $=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e4;return ue(p,void 0,void 0,Object(k.a)().mark(function se(){var de,Ee,Oe;return Object(k.a)().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return tt.next=2,H(d);case 2:return de=tt.sent,this.updateModelValue(function(Le){Object.entries(de.statusMap).forEach(function(it){var It=Object(Xe.a)(it,2),tn=It[0],bn=It[1];Le.statusMap.set(tn,bn)}),Le.graphStatus=de.graphStatus}),Ee=ec.groupByStatus(de.statusMap),this.updateGraph(this.statusInfo,Ee,de.statusMap),this.statusInfo=Ee,tt.next=9,UK($);case 9:if(this.isLooping){tt.next=11;break}return tt.abrupt("return");case 11:if(!E){tt.next=17;break}return tt.next=14,E(de,d);case 14:if(Oe=tt.sent,!Oe){tt.next=17;break}return tt.abrupt("return");case 17:return tt.next=19,F(H,$);case 19:case"end":return tt.stop()}},se,this)}))},this.isLooping=d.loop===void 0?!0:d.loop,I.next=7,this.addStopDispose();case 7:if(!x){I.next=10;break}return I.next=10,x(d);case 10:return O(m,d.loopInterval),I.abrupt("return",{});case 12:case"end":return I.stop()}},h,this)}))},s);case 8:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 11:case"end":return f.stop()}},r,this)}))},this.undo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(pe.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();nt([Pe.inject(Ai),ze("design:type",Object)],dE.prototype,"contextProvider",void 0),dE=nt([Pe.injectable({token:{token:Mi,named:ec.command.id}})],dE);var Yq=function(){},Hh;(function(o){o.TOP_BOTTOM="TB",o.LEFT_RIGHT="LR"})(Hh||(Hh={}));var GL=Pe.Syringe.defineToken("DAG_EXTENSION_CONFIG"),hE;(function(o){o.EVENT_NAME="ADD_EDGE_CMD_EVENT"})(hE||(hE={}));var vE;(function(o){o.router={name:"manhattan"},o.connector={name:"rounded",args:{radius:15}}})(vE||(vE={}));var Zq="ant",sJ=function(a){var r=a.layout,n=a.router,e=n===void 0?vE.router:n,t=a.connector,i=t===void 0?vE.connector:t,s={grid:!1,keyboard:{enabled:!0},selecting:{enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},connecting:{sourceAnchor:r?r===Hh.TOP_BOTTOM?"bottom":"right":"center",targetAnchor:r?r===Hh.TOP_BOTTOM?"center":"left":"center",connectionPoint:"anchor",snap:{radius:20},router:e,connector:i,highlight:!0,dangling:!1,createEdge:function(){var l=this,c=new hA({attrs:{line:{strokeDasharray:"5 5",stroke:"#888",strokeWidth:1,targetMarker:{name:"block",args:{size:"6"}}}}}),f=function(h){var p=h.isNew,m=h.edge;if(p&&m.isEdge()&&m===c){var b=m.getTargetPortId(),E=m.getTargetCell();if(E&&E.isNode()){E.setPortProp(b,"connected",!1),m.attr({line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5"}});var x=m.getTargetPortId(),O=m.getSourcePortId(),D=m.getSourceCellId(),I=m.getTargetCellId();l.trigger(hE.EVENT_NAME,{targetPortId:x,sourcePortId:O,source:D,target:I,edge:c})}}};return l.once("edge:connected",f),c},validateEdge:function(l){var c,f=l.edge;return!!((c=f==null?void 0:f.target)===null||c===void 0?void 0:c.port)},validateMagnet:function(l){var c=l.magnet,f=l.cell,d=f.getData().ports.filter(function(h){return h.type===Ae.AnchorType.INPUT});return d.length>0?c.getAttribute("port-group")!==d[0].group:!1},validateConnection:function(l){var c=l.sourceView,f=l.targetView,d=l.sourceMagnet,h=l.targetMagnet;if(c===f||!d||!h)return!1;if(r){var p=r===Hh.TOP_BOTTOM?Ae.AnchorGroup.TOP:Ae.AnchorGroup.LEFT;if(d.getAttribute("port-group")===p||h.getAttribute("port-group")!==p)return!1}var m=c.cell,b=d.getAttribute("port");if(!b)return!1;var E=m.getPort(b);if(E.type!==Ae.AnchorType.OUTPUT)return!1;var x=f.cell,O=h.getAttribute("port");if(!O)return!1;var D=x.getPort(O);return D.type!==Ae.AnchorType.INPUT?!1:!(D&&D.connected)}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},scaling:{max:1.05,min:.01}};return s},_y=function(){function o(){var a=this;Object(Ie.a)(this,o),this.registerGraphCommands=function(r){r.registerCommand(ec.command,{createCommand:a.commandFactory})},this.toDispose=new Xi,this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Xi,i=[r.addNode.registerHook({name:"dag-add-node",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d=this,h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:h=function(E){return ue(d,void 0,void 0,Object(k.a)().mark(function x(){var O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return O=new Ry(Object.assign({},E)),I.abrupt("return",O);case 2:case"end":return I.stop()}},x)}))},c.cellFactory=h;case 2:case"end":return m.stop()}},f)}))}}),r.addEdge.registerHook({name:"dag-add-edge",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d=this,h,p,m,b;return Object(k.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.propConfig.getConfig();case 2:h=x.sent,p=h.layout,m=p===void 0?Hh.TOP_BOTTOM:p,b=function(D){return ue(d,void 0,void 0,Object(k.a)().mark(function I(){var F;return Object(k.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return F=new hA(Object.assign(Object.assign({},D),{id:D.id,source:{cell:D.source,port:D.sourcePortId,anchor:{name:m===Hh.TOP_BOTTOM?"bottom":"right"}},target:{cell:D.target,port:D.targetPortId,anchor:{name:m===Hh.TOP_BOTTOM?"center":"right"}},attrs:{line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5",strokeWidth:1}},data:Object.assign({},D)})),$.abrupt("return",F);case 2:case"end":return $.stop()}},I)}))},c.cellFactory=b;case 7:case"end":return x.stop()}},f,this)}))}}),r.addEdge.registerHook({name:"after add edge, set target port props",handler:function(c,f){return ue(e,void 0,void 0,Object(k.a)().mark(function d(){var h=this,p;return Object(k.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return p=function(x){return ue(h,void 0,void 0,Object(k.a)().mark(function O(){var D,I,F;return Object(k.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,f(x);case 2:return D=$.sent,D&&D.edgeCell&&(I=D.edgeCell.getTargetCell(),F=D.edgeCell.getTargetPortId(),I.setPortProp(F,"connected",!0)),$.abrupt("return",D);case 5:case"end":return $.stop()}},O)}))},b.abrupt("return",p);case 2:case"end":return b.stop()}},d)}))}}),r.delEdge.registerHook({name:"afetr del edge, reset target node port props",handler:function(c,f){return ue(e,void 0,void 0,Object(k.a)().mark(function d(){var h=this,p;return Object(k.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return p=function(x){return ue(h,void 0,void 0,Object(k.a)().mark(function O(){var D,I,F;return Object(k.a)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,f(x);case 2:return D=$.sent,I=D.targetCell,F=D.targetPortId,I&&I.isNode()&&F&&I.setPortProp(F,"connected",!1),$.abrupt("return",D);case 6:case"end":return $.stop()}},O)}))},b.abrupt("return",p);case 2:case"end":return b.stop()}},d)}))}}),r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d,h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:d=c.commandService,h=c.graph,h.on(hE.EVENT_NAME,function(b){d.executeCommand(to.ADD_EDGE.id,{edgeConfig:b}),b.edge.remove()});case 2:case"end":return m.stop()}},f)}))}}),r.graphOptions.registerHook({name:"dag-extension-x6-options",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d,h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.propConfig.getConfig();case 2:d=m.sent,h=sJ(d),Object.assign(c,h);case 5:case"end":return m.stop()}},f,this)}))}})],t.pushAll(i),u.abrupt("return",Or.create(function(){}));case 4:case"end":return u.stop()}},n)}))},this.registerHookHub=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.registerHookHub(ec.hookKey,new zc));case 1:case"end":return t.stop()}},n)}))}}return Object(pe.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:jp.id,getInitialValue:function(){return{statusMap:new Map,subscription:new Xi,graphStatus:jp.StatusEnum.DEFAULT}},watchChange:function(t){return ue(n,void 0,void 0,Object(k.a)().mark(function i(){var s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.getValidValue();case 2:return s=c.sent,u=s.subscription,c.abrupt("return",u);case 5:case"end":return c.stop()}},i)}))}})}}]),o}();nt([Pe.inject(XS),ze("design:type",Function)],_y.prototype,"commandFactory",void 0),nt([Pe.inject(GL),ze("design:type",Object)],_y.prototype,"propConfig",void 0),_y=nt([Pe.singleton({contrib:[Zl,Hv,J1]})],_y);var uJ=function(a){return Pe.Module(function(r){r(_y),r(dE),r(GL,{useValue:a})})},lJ=function(a){var r=Jl();A.a.useEffect(function(){r.addContainerClassNames("dag-extension-container");var e=a.layout||"TB";r.addContainerClassNames(e==="TB"?"layout-top-bottom":"layout-left-right")},[r,a.layout]);var n=A.a.useMemo(function(){return{CONFIG_TYPE:"DAG_EXTENSION",getConfig:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function t(){return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",a);case 1:case"end":return s.stop()}},t)}))}}},[a]);return A.a.createElement(I0,{config:n,createModule:uJ})},vA="XFLOW_FLOW_NODE_SHAPE",cJ=150,fJ=60,gA,gE=Ae.AnchorGroup,pE={circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}};wa.registry.exist(vA)?gA=wa.registry.get(vA):gA=R0.define({width:cJ,height:fJ,shape:vA,view:j.X6_NODE_PORTAL_NODE_VIEW,ports:{groups:{top:{position:gE.TOP,attrs:pE},bottom:{position:gE.BOTTOM,attrs:pE},right:{position:gE.RIGHT,attrs:pE},left:{position:gE.LEFT,attrs:pE}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"}}});var dJ={grid:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge:function(){return new Te.Edge({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0})},validateConnection:function(a){var r=a.targetMagnet;return!!r}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},resizing:!0,rotating:!0,selecting:{enabled:!0,rubberband:!0,showNodeSelectionBox:!0,modifiers:"shift"},snapline:!0,keyboard:!0,clipboard:!0},pA=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.registerHookHub=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Xi,i=[r.addNode.registerHook({name:"flow-add-node",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d=this,h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:h=function(E){return ue(d,void 0,void 0,Object(k.a)().mark(function x(){var O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return O=new gA(Object.assign({},E)),I.abrupt("return",O);case 2:case"end":return I.stop()}},x)}))},c.cellFactory=h;case 2:case"end":return m.stop()}},f)}))}}),r.addEdge.registerHook({name:"flow-add-edge",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d=this,h;return Object(k.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:h=function(E){return ue(d,void 0,void 0,Object(k.a)().mark(function x(){var O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return delete E.id,O=new Te.Edge({source:{cell:E.source,port:E.sourcePortId},target:{cell:E.target,port:E.targetPortId},attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:-1,data:Object.assign({},E)}),I.abrupt("return",O);case 3:case"end":return I.stop()}},x)}))},c.cellFactory=h;case 2:case"end":return m.stop()}},f)}))}}),r.graphOptions.registerHook({name:"assign options ",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){return Object(k.a)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:Object.assign(c,dJ);case 1:case"end":return h.stop()}},f)}))}})],t.pushAll(i),u.abrupt("return",Or.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});pA=nt([Pe.singleton({contrib:Zl})],pA);var hJ=function(){return Pe.Module(function(a){a(pA)})},Jq=function(){var a=Jl(),r=A.a.useMemo(function(){return{CONFIG_TYPE:"DAG_EXTENSION",getConfig:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function e(){return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:case"end":return i.stop()}},e)}))}}},[]);return A.a.useEffect(function(){var n=a.addExtension({config:r,createModule:hJ});return a.addContainerClassNames("flow-extension-container"),function(){n.dispose()}},[r,a]),null},vJ=v("wEI+"),gJ=v("QkVN"),zL=v.n(gJ),UL=v("zs7G"),VL=v("JaaR"),mA={config:{}},HL=function(a){mA.config=Object.assign({},mA.config,a)},Fy=function(a){var r;return(r=mA.config)===null||r===void 0?void 0:r[a]},WL=new Map,$L=new Map,pJ=function(a){return ue(void 0,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.getGraphInstance();case 2:n=t.sent,WL.set("x6graph",n),$L.set("app",a);case 5:case"end":return t.stop()}},r)}))},XL=function(){return WL.get("x6graph")},mJ=function(){return $L.get("app")},yJ=function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function a(){var r;return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mJ(),e.abrupt("return",r.getGraphData());case 2:case"end":return e.stop()}},a)}))},By=Object(Uc.debounce)(function(o){var a=Fy("onConfigChange");if(!(!a||typeof a!="function"))return a(Object.assign({data:yJ()},o))},300,{trailing:!0}),bJ=function(a,r){return ue(void 0,void 0,void 0,Object(k.a)().mark(function n(){var e,t,i,s;return Object(k.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=a.node,e){l.next=3;break}return l.abrupt("return");case 3:return t=e.data,(t==null?void 0:t.groupChildren)&&(i=XL(),t==null||t.groupChildren.forEach(function(c){return ue(void 0,void 0,void 0,Object(k.a)().mark(function f(){var d,h,p;return Object(k.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(p=i.getCellById(c),!(p&&p.isNode())){b.next=4;break}return b.next=4,r.executeCommand(fa.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign(Object.assign({},p.data),(d=p.getSize)===null||d===void 0?void 0:d.call(p)),(h=p.getPosition)===null||h===void 0?void 0:h.call(p))});case 4:case"end":return b.stop()}},f)}))})),s=Object.assign(Object.assign(Object.assign({},e.data),e.getPosition()),e.getSize()),l.next=8,r.executeCommand(fa.UPDATE_NODE.id,{nodeConfig:s});case 8:By({type:"move:node",config:s});case 9:case"end":return l.stop()}},n)}))},CJ=function(a,r){return ue(void 0,void 0,void 0,Object(k.a)().mark(function n(){var e,t;return Object(k.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=a.node,e){s.next=3;break}return s.abrupt("return");case 3:return t=Object.assign(Object.assign(Object.assign({},e.data),e.getPosition()),e.size()),s.next=6,r.executeCommand(fa.UPDATE_NODE.id,{nodeConfig:t});case 6:By({type:"resize:node",config:t});case 7:case"end":return s.stop()}},n)}))},EJ=function(a){var r,n=(r=a==null?void 0:a.e)===null||r===void 0?void 0:r.currentTarget;if(!n)return document.getElementsByClassName("xflow-canvas-root");for(var e=null;!e;){var t=n.getElementsByClassName("xflow-canvas-root");(t==null?void 0:t.length)>0&&(e=t),n=n.parentNode}return e},wJ=function(a){var r=document.getElementsByClassName("x6-node-selected");if(!!r){var n=r[0];return Array.from(r).forEach(function(e){e.getAttribute("data-cell-id")===a&&(n=e)}),n.getElementsByClassName("x6-port")}},KL=function(a,r){var n=a.getAttribute("transform"),e=n.split(",");e[0]="matrix(".concat(Number(e[0].split("(")[1])*r),e[3]=Number(e[3])*r,a.setAttribute("transform",e.join(","))},xJ=function(a){if(!!(a==null?void 0:a.length)){var r=2;a.forEach(function(n){n.getAttribute("data-scale")||(KL(n,r),n.setAttribute("data-scale","".concat(r)))})}},OJ=function(){var a=document.getElementsByClassName("x6-port");!a||Array.from(a).forEach(function(r){var n=r.getAttribute("data-scale");n&&(KL(r,1/Number(n)),r.removeAttribute("data-scale"))})},yA=function(a,r,n){var e;a||OJ();var t=EJ(r),i=XL(),s=(e=i.getSelectedCells())===null||e===void 0?void 0:e[0];(s==null?void 0:s.isNode())&&n&&xJ(wJ(s.id)),Array.from(t).forEach(function(u){for(var l=u.querySelectorAll(".x6-port-body"),c=s==null?void 0:s.isNode(),f=0,d=l.length;f<d;f=f+1)l[f].style.visibility=(!c||n)&&a?"visible":"hidden"})},SJ=function(a){return ue(void 0,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.edge,n){t.next=3;break}return t.abrupt("return");case 3:n.addTools("vertices","ondbclick");case 4:case"end":return t.stop()}},r)}))},MJ=function(a,r){return ue(void 0,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e=a.edge,e){i.next=3;break}return i.abrupt("return");case 3:e.hasTools("ondbclick")&&(r.executeCommand(to.UPDATE_EDGE.id,{edgeConfig:Object.assign(Object.assign({},Object(Uc.get)(e,"data")),{vertices:e.getVertices()})}),e.removeTools());case 4:case"end":return i.stop()}},n)}))},YL=40,mE="xflow-node-panel-collpase",AJ="GROUP_NODE_RENDER_ID",io=60,da=40,yt=1,Fn={stroke:"#A2B1C3",fill:"#FFFFFF",fontFill:"#000",fontSize:12,label:""},ZL=[{name:"Terminal"},{name:"Process"},{name:"Decision"},{name:"Multi Document"},{name:"Connector",width:da,height:da},{name:"DataIO",ports:["top","bottom"]},{name:"Database"},{name:"Hard Disk"},{name:"Stroed Data"},{name:"Document"},{name:"Predefined Process"},{name:"Extract"},{name:"Merge"},{name:"Or",width:da,height:da},{name:"Manual Input"},{name:"Preparation"},{name:"Delay"},{name:"Manual Operation"},{name:"Display"},{name:"Off Page Link"},{name:"Note Left",label:"\u2263"},{name:"Note Right",label:"\u2263"},{name:"Internal Storage"},{name:"Text",label:"text"}],TJ=["Connector","Or"],PJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=[["M",yt,yt],["L",b-2*yt,yt],["L",b-2*yt,E-2*yt],["L",yt,E-2*yt],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(x),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},kJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=[["M",b/2,yt],["L",b-2*yt,E/2],["L",b/2,E-2*yt],["L",yt,E/2],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(x),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},DJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=E-2*yt;return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:"M ".concat(yt,",").concat(E/2," a ").concat(x/2," ").concat(x/2," 0 1 1 0 1 z"),fill:f,stroke:s}),A.a.createElement("text",{x:E/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},IJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=E/2,O=[["M",x-yt,yt],["L",b-2*yt,yt],["L",b-x,E-2*yt],["L",yt,E-2*yt],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(O),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},RJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=Math.min(E,b)/2,O=[["M",x,yt],["L",b-x,yt],["C",b-2*yt,yt,b-2*yt,E/2],["",b-2*yt,E/2],["C",b-2*yt,E/2,b-2*yt,E-2*yt],["",b-x,E-2*yt],["L",x,E-2*yt],["C",yt,E-2*yt,yt,E/2],["",yt,E/2],["C",yt,E/2,yt,yt],["",x,yt]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(O),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},NJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=b/4,O=Math.min(E/10,12),D=[["M",yt,yt+O],["C",yt+x,yt,yt+b-x,yt],["",b-2*yt,yt+O],["L",b-2*yt,E-2*yt-O],["C",b-2*yt-x,E-2*yt,yt+x,E-2*yt],["",yt,E-2*yt-O],["Z"]],I=[["M",yt,yt+O],["C",yt+x,yt+2*O,yt+b-x,yt+2*O],["",b-2*yt,yt+O]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(D),fill:f,stroke:s}),A.a.createElement("path",{d:ja(I),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},LJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=Math.min(b/10,E/4),O=Math.min(E/4,b/4),D=[["M",yt+x,yt],["L",b-2*yt-x,yt],["C",b-2*yt,yt+O,b-2*yt,E-2*yt-O],["",b-2*yt-x,E-2*yt],["L",yt+x,E-2*yt],["C",yt,E-2*yt-O,yt,yt+O],["",yt+x,yt]],I=[["M",b-2*yt-x,yt],["C",b-2*yt-2*x,yt+O,b-2*yt-2*x,E-2*yt-O],["",b-2*yt-x,E-2*yt]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(D),fill:f,stroke:s}),A.a.createElement("path",{d:ja(I),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},jJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=Math.min(b/10,E/4),O=Math.min(E/4,b/4),D=[["M",yt+x,yt],["L",b-2*yt-x,yt],["C",b-2*yt-2*x,yt+O,b-2*yt-2*x,E-2*yt-O],["",b-2*yt-x,E-2*yt],["L",yt+x,E-2*yt],["C",yt,E-2*yt-O,yt,yt+O],["",yt+x,yt]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(D),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},_J=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=b/8,O=E/8,D=[["M",yt,yt],["L",b-2*yt,yt],["L",b-2*yt,E-2*yt-O],["C",b-2*yt-x,E-2*yt-2*O,b/2+x,E-2*yt-2*O],["",b/2,E-2*yt-O],["S",b/4,E-2*yt,yt,E-2*yt-2*O],["L",yt,yt]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(D),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},FJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=6,E=yt,x=b/2,O=n.width,D=n.height;O+=b,D+=b;var I=O/8,F=D/8,H=[["M",E+x,E],["L",O-2*E,E],["L",O-2*E,D-2*E-F],["C",O-2*E-I,D-2*E-2*F,O/2+I,D-2*E-2*F],["",O/2,D-2*E-F],["S",O/4,D-2*E,E+x,D-2*E-2*F],["L",E+x,E]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(O," ").concat(D),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(H),fill:f,stroke:s}),A.a.createElement("path",{d:ja(H,-b/2,b/2),fill:f,stroke:s}),A.a.createElement("text",{x:O/2,y:D/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},BJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=b/8,O=[["M",yt,yt],["L",b-2*yt,yt],["L",b-2*yt,E-2*yt],["L",yt,E-2*yt],["Z"]],D=[["M",x,yt],["L",x,E-2*yt]],I=[["M",b-x,yt],["L",b-x,E-2*yt]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(O),fill:f,stroke:s}),A.a.createElement("path",{d:ja(D),stroke:s}),A.a.createElement("path",{d:ja(I),stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},GJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=[["M",b/2,yt],["L",b-2*yt,E-2*yt],["L",yt,E-2*yt],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(x),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},zJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=[["M",yt,yt],["L",b-2*yt,yt],["L",b/2,E-2*yt],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(x),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},UJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=[["M",E/2,yt],["L",E/2,E-2*yt]],O=[["M",yt,E/2],["L",E-2*yt,E/2]],D=E-2*yt;return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:"M ".concat(yt,",").concat(E/2," a ").concat(D/2," ").concat(D/2," 0 1 1 0 1 z"),fill:f,stroke:s}),A.a.createElement("path",{d:ja(x),stroke:s}),A.a.createElement("path",{d:ja(O),stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},VJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=[["M",yt,E/5],["L",b-2*yt,yt],["L",b-2*yt,E-2*yt],["L",yt,E-2*yt],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(x),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},HJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=Math.tan(Math.PI/6)*(E/2),O=[["M",x,yt],["L",b-x,yt],["L",b-2*yt,E/2],["L",b-x,E-2*yt],["L",x,E-2*yt],["L",yt,E/2],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(O),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},WJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=Math.min(E,b)/2,O=[["M",yt,yt],["L",b-x,yt],["C",b-2*yt,yt,b-2*yt,E/2],["",b-2*yt,E/2],["C",b-2*yt,E/2,b-2*yt,E-2*yt],["",b-x,E-2*yt],["L",yt,E-2*yt],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(O),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},$J=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=Math.min(Math.tan(Math.PI/6)*E,b/2),O=[["M",yt,yt],["L",b-2*yt,yt],["L",b-x,E-2*yt],["L",x,E-2*yt],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(O),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},XJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=Math.min(E,b)/3,O=Math.min(Math.tan(Math.PI/6)*(E/2),b/3),D=[["M",O,yt],["L",b-x,yt],["C",b-2*yt,yt,b-2*yt,E/2],["",b-2*yt,E/2],["C",b-2*yt,E/2,b-2*yt,E-2*yt],["",b-x,E-2*yt],["L",O,E-2*yt],["L",yt,E/2],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(D),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},KJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=Math.min(Math.tan(Math.PI/6)*(b/2),E/4),O=[["M",yt,yt],["L",b-2*yt,yt],["L",b-2*yt,E-x],["L",b/2,E-2*yt],["L",yt,E-x],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(O),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},YJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?"transparent":c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=6,O=b-2*yt,D=[["M",O,yt],["C",O-x,yt,O-x,x],["",O-x,(E-x)/2],["L",O-2*x,E/2],["L",O-x,(E+x)/2],["L",O-x,E-2*yt-x],["C",O-x,E-2*yt,O,E-2*yt],["",O,E-2*yt]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(D),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},ZJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?"transparent":c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=6,O=[["M",yt,yt],["C",x,yt,x,x],["",x,(E-x)/2],["L",2*x,E/2],["L",x,(E+x)/2],["L",x,E-2*yt-x],["C",x,E-2*yt,yt,E-2*yt],["",yt,E-2*yt]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(O),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},JJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.stroke,s=i===void 0?Fn.stroke:i,u=t.label,l=u===void 0?Fn.label:u,c=t.fill,f=c===void 0?Fn.fill:c,d=t.fontFill,h=d===void 0?Fn.fontFill:d,p=t.fontSize,m=p===void 0?Fn.fontSize:p,b=n.width,E=n.height,x=b-2*yt,O=E-2*yt,D=6,I=[["M",yt,yt],["L",x-D,yt],["C",x,yt,x,D],["",x,E/2],["L",x,O-D],["C",x,O,x-D,O],["",x-D,O],["L",D,O],["C",yt,O,yt,O-D],["",yt,O-D],["Z"]];return A.a.createElement("svg",{viewBox:"0 0 ".concat(b," ").concat(E),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("path",{d:ja(I),fill:f,stroke:s}),A.a.createElement("path",{d:"M ".concat(yt,",").concat(D," L ").concat(x-1," ").concat(D," "),fill:f,stroke:s}),A.a.createElement("path",{d:"M ".concat(D,",").concat(yt," L ").concat(D," ").concat(O," "),fill:f,stroke:s}),A.a.createElement("text",{x:b/2,y:E/2,fill:h,textAnchor:"middle",alignmentBaseline:"middle",fontSize:m},l),"Sorry, your browser does not support inline SVG.")},QJ=function(a){var r=a.size,n=r===void 0?{width:io,height:da}:r,e=a.data,t=e===void 0?{}:e,i=t.label,s=i===void 0?Fn.label:i,u=t.fontFill,l=u===void 0?Fn.fontFill:u,c=t.fontSize,f=c===void 0?Fn.fontSize:c,d=n.width,h=n.height,p=2;return A.a.createElement("svg",{viewBox:"0 0 ".concat(d/p," ").concat(h/p),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},A.a.createElement("text",{x:d/(2*p),y:h/(2*p),fill:l,textAnchor:"middle",alignmentBaseline:"middle",fontSize:f},s),"Sorry, your browser does not support inline SVG.")},yE=function(a){return{position:{name:a},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10}},JL=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["top","right","bottom","left"];return{items:a.map(function(r){return{group:r,id:Fc()}}),groups:{top:yE("top"),right:yE("right"),bottom:yE("bottom"),left:yE("left")}}},qJ=function(a){return(a||[]).map(function(r){var n=r.name,e=r.popover,t=r.label,i=t===void 0?"":t,s=r.width,u=s===void 0?da:s,l=r.height,c=l===void 0?da:l,f=r.ports,d=r.parentKey,h=Fc();return{id:h,renderKey:n,name:n,label:i,popoverContent:e,width:u,height:c,ports:f||JL(),originData:Object.assign({},r),isCustom:!0,parentKey:d}})},eQ=function(a){return ue(void 0,void 0,void 0,Object(k.a)().mark(function r(){var n;return Object(k.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=qJ(a),t.abrupt("return",[].concat(Object(ot.a)(n),Object(ot.a)(ZL.map(function(i){var s=i.name,u=i.ports,l=i.width,c=l===void 0?io:l,f=i.height,d=f===void 0?da:f,h=i.label,p=h===void 0?"":h;return{id:Fc(),renderKey:s,name:s,label:p,popoverContent:function(){return s},width:c,height:d,ports:JL(u)}}))));case 2:case"end":return t.stop()}},r)}))},QL=function(a){var r=a?Object(Uc.isArray)(a)?a:[a]:[],n=[];r.forEach(function(i){n=n.concat(i.nodes.map(function(s){return Object.assign(Object.assign({},s),{parentKey:i.key})}))}),n.length&&HL({registerNode:n});var e=Fy("graphConfig"),t=Fy("registerNode");!e||!(t==null?void 0:t.length)||t.forEach(function(i){var s=i.name,u=i.component;e.setNodeRender(s,u)})},tQ=function(a){QL(),a.nodeRender.get("Terminal")||ZL.forEach(function(r){a.setNodeRender(r.name,Je["".concat(r.name.replace(/\s+/g,""),"Node")])})},ja=function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!a.length)return null;var e="";return a.forEach(function(t){var i=Object(Xe.a)(t,5),s=i[0],u=i[1],l=i[2],c=i[3],f=i[4];e+=Object(Uc.isNumber)(l)?" ".concat(s," ").concat(u+r," ").concat(l+n):" ".concat(s),f&&(e+=" ".concat(c+r," ").concat(f+n))}),e},Wh=v("wx14"),nQ=v("UESt"),rQ=v("KQm4"),qL=v("1OyB"),ej=v("vuIU"),tj=v("Ji7U"),nj=v("LK+K"),rj=v("Zm9Q"),iQ=v("Gytx"),bA=v.n(iQ),aQ=v("8XRh"),ij=bt.forwardRef(function(o,a){var r,n=o.prefixCls,e=o.forceRender,t=o.className,i=o.style,s=o.children,u=o.isActive,l=o.role,c=bt.useState(u||e),f=Object(qN.a)(c,2),d=f[0],h=f[1];return bt.useEffect(function(){(e||u)&&h(!0)},[e,u]),d?bt.createElement("div",{ref:a,className:Mn()("".concat(n,"-content"),(r={},Object(Os.a)(r,"".concat(n,"-content-active"),u),Object(Os.a)(r,"".concat(n,"-content-inactive"),!u),r),t),style:i,role:l},bt.createElement("div",{className:"".concat(n,"-content-box")},s)):null});ij.displayName="PanelContent";var oQ=ij,sQ=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],aj=function(o){Object(tj.a)(r,o);var a=Object(nj.a)(r);function r(){var n;Object(qL.a)(this,r);for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n=a.call.apply(a,[this].concat(t)),n.onItemClick=function(){var s=n.props,u=s.onItemClick,l=s.panelKey;typeof u=="function"&&u(l)},n.handleKeyPress=function(s){(s.key==="Enter"||s.keyCode===13||s.which===13)&&n.onItemClick()},n.renderIcon=function(){var s=n.props,u=s.showArrow,l=s.expandIcon,c=s.prefixCls,f=s.collapsible;if(!u)return null;var d=typeof l=="function"?l(n.props):bt.createElement("i",{className:"arrow"});return d&&bt.createElement("div",{className:"".concat(c,"-expand-icon"),onClick:f==="header"||f==="icon"?n.onItemClick:null},d)},n.renderTitle=function(){var s=n.props,u=s.header,l=s.prefixCls,c=s.collapsible;return bt.createElement("span",{className:"".concat(l,"-header-text"),onClick:c==="header"?n.onItemClick:null},u)},n}return Object(ej.a)(r,[{key:"shouldComponentUpdate",value:function(e){return!bA()(this.props,e)}},{key:"render",value:function(){var e,t,i=this.props,s=i.className,u=i.id,l=i.style,c=i.prefixCls,f=i.headerClass,d=i.children,h=i.isActive,p=i.destroyInactivePanel,m=i.accordion,b=i.forceRender,E=i.openMotion,x=i.extra,O=i.collapsible,D=Object(eL.a)(i,sQ),I=O==="disabled",F=O==="header",H=O==="icon",$=Mn()((e={},Object(Os.a)(e,"".concat(c,"-item"),!0),Object(Os.a)(e,"".concat(c,"-item-active"),h),Object(Os.a)(e,"".concat(c,"-item-disabled"),I),e),s),se=Mn()("".concat(c,"-header"),(t={},Object(Os.a)(t,f,f),Object(Os.a)(t,"".concat(c,"-header-collapsible-only"),F),Object(Os.a)(t,"".concat(c,"-icon-collapsible-only"),H),t)),de={className:se,"aria-expanded":h,"aria-disabled":I,onKeyPress:this.handleKeyPress};!F&&!H&&(de.onClick=this.onItemClick,de.role=m?"tab":"button",de.tabIndex=I?-1:0);var Ee=x!=null&&typeof x!="boolean";return delete D.header,delete D.panelKey,delete D.onItemClick,delete D.showArrow,delete D.expandIcon,bt.createElement("div",Object(Wh.a)({},D,{className:$,style:l,id:u}),bt.createElement("div",de,this.renderIcon(),this.renderTitle(),Ee&&bt.createElement("div",{className:"".concat(c,"-extra")},x)),bt.createElement(aQ.b,Object(Wh.a)({visible:h,leavedClassName:"".concat(c,"-content-hidden")},E,{forceRender:b,removeOnLeave:p}),function(Oe,$e){var tt=Oe.className,Le=Oe.style;return bt.createElement(oQ,{ref:$e,prefixCls:c,className:tt,style:Le,isActive:h,forceRender:b,role:m?"tabpanel":null},d)}))}}]),r}(bt.Component);aj.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var uQ=aj;function oj(o){var a=o;if(!Array.isArray(a)){var r=Object(sL.a)(a);a=r==="number"||r==="string"?[a]:[]}return a.map(function(n){return String(n)})}var CA=function(o){Object(tj.a)(r,o);var a=Object(nj.a)(r);function r(n){var e;Object(qL.a)(this,r),e=a.call(this,n),e.onClickItem=function(u){var l=e.state.activeKey;if(e.props.accordion)l=l[0]===u?[]:[u];else{l=Object(rQ.a)(l);var c=l.indexOf(u),f=c>-1;f?l.splice(c,1):l.push(u)}e.setActiveKey(l)},e.getNewChild=function(u,l){if(!u)return null;var c=e.state.activeKey,f=e.props,d=f.prefixCls,h=f.openMotion,p=f.accordion,m=f.destroyInactivePanel,b=f.expandIcon,E=f.collapsible,x=u.key||String(l),O=u.props,D=O.header,I=O.headerClass,F=O.destroyInactivePanel,H=O.collapsible,$=!1;p?$=c[0]===x:$=c.indexOf(x)>-1;var se=H!=null?H:E,de={key:x,panelKey:x,header:D,headerClass:I,isActive:$,prefixCls:d,destroyInactivePanel:F!=null?F:m,openMotion:h,accordion:p,children:u.props.children,onItemClick:se==="disabled"?null:e.onClickItem,expandIcon:b,collapsible:se};return typeof u.type=="string"?u:(Object.keys(de).forEach(function(Ee){typeof de[Ee]=="undefined"&&delete de[Ee]}),bt.cloneElement(u,de))},e.getItems=function(){var u=e.props.children;return Object(rj.a)(u).map(e.getNewChild)},e.setActiveKey=function(u){"activeKey"in e.props||e.setState({activeKey:u}),e.props.onChange(e.props.accordion?u[0]:u)};var t=n.activeKey,i=n.defaultActiveKey,s=i;return"activeKey"in n&&(s=t),e.state={activeKey:oj(s)},e}return Object(ej.a)(r,[{key:"shouldComponentUpdate",value:function(e,t){return!bA()(this.props,e)||!bA()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,i=t.prefixCls,s=t.className,u=t.style,l=t.accordion,c=Mn()((e={},Object(Os.a)(e,i,!0),Object(Os.a)(e,s,!!s),e));return bt.createElement("div",{className:c,style:u,role:l?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=oj(e.activeKey)),t}}]),r}(bt.Component);CA.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},CA.Panel=uQ;var sj=CA,uj=sj,Qq=sj.Panel,lQ=v("bT9E"),lj=v("H84U"),cQ=v("EXcs"),cj=v("0n0R"),fQ=function(a){var r=bt.useContext(lj.b),n=r.getPrefixCls,e=a.prefixCls,t=a.className,i=t===void 0?"":t,s=a.showArrow,u=s===void 0?!0:s,l=n("collapse",e),c=Mn()(Object(Os.a)({},"".concat(l,"-no-arrow"),!u),i);return bt.createElement(uj.Panel,Object(Wh.a)({},a,{prefixCls:l,className:c}))},dQ=fQ,fj=function(a){var r,n=bt.useContext(lj.b),e=n.getPrefixCls,t=n.direction,i=a.prefixCls,s=a.className,u=s===void 0?"":s,l=a.bordered,c=l===void 0?!0:l,f=a.ghost,d=a.expandIconPosition,h=d===void 0?"start":d,p=e("collapse",i),m=bt.useMemo(function(){return h==="left"?"start":h==="right"?"end":h},[h]),b=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=a.expandIcon,H=F?F(I):bt.createElement(nQ.a,{rotate:I.isActive?90:void 0});return Object(cj.a)(H,function(){return{className:Mn()(H.props.className,"".concat(p,"-arrow"))}})},E=Mn()("".concat(p,"-icon-position-").concat(m),(r={},Object(Os.a)(r,"".concat(p,"-borderless"),!c),Object(Os.a)(r,"".concat(p,"-rtl"),t==="rtl"),Object(Os.a)(r,"".concat(p,"-ghost"),!!f),r),u),x=Object(Wh.a)(Object(Wh.a)({},cQ.a),{motionAppear:!1,leavedClassName:"".concat(p,"-content-hidden")}),O=function(){var I=a.children;return Object(rj.a)(I).map(function(F,H){var $;if(($=F.props)===null||$===void 0?void 0:$.disabled){var se=F.key||String(H),de=F.props,Ee=de.disabled,Oe=de.collapsible,$e=Object(Wh.a)(Object(Wh.a)({},Object(lQ.a)(F.props,["disabled"])),{key:se,collapsible:Oe!=null?Oe:Ee?"disabled":void 0});return Object(cj.a)(F,$e)}return F})};return bt.createElement(uj,Object(Wh.a)({openMotion:x},a,{expandIcon:b,prefixCls:p,className:E}),O())};fj.Panel=dQ;var hQ=fj,dj=hQ,hj=dj.Panel,vQ=function(a){var r=a.x6NodeFactory,n=a.dndOptions,e=a.state,t=a.prefixClz,i=a.defaultActiveKey,s=i===void 0?["official"]:i,u=a.showOfficial,l=u===void 0?!0:u,c=a.registerNode?Object(Uc.isArray)(a.registerNode)?a.registerNode:[a.registerNode]:[],f=co(),d=f.graphProvider,h=f.modelService,p=f.commandService,m=A.a.useState(),b=Object(Xe.a)(m,2),E=b[0],x=b[1],O=A.a.useState(),D=Object(Xe.a)(O,2),I=D[0],F=D[1];A.a.useEffect(function(){d.getGraphInstance().then(function(Le){F(Le)})});var H=void 0;d.getGraphOptions().then(function(Le){H=Le});var $=Object(bt.useCallback)(function(Le){return ue(void 0,void 0,void 0,Object(k.a)().mark(function it(){var It,tn,bn,dn,en;return Object(k.a)().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return tn=Le.ports,bn=Object.assign(Object.assign({},Le),{id:"node-".concat(Fc()),zIndex:10,ports:Object.assign(Object.assign({},tn),{items:(It=tn.items)===null||It===void 0?void 0:It.map(function(Cn){return Object.assign(Object.assign({},Cn),{id:Fc()})})})}),dn={nodeConfig:bn},jt.next=5,p.executeCommand(fa.ADD_NODE.id,dn);case 5:en=Fy("onAddNode"),typeof en=="function"&&en(bn);case 7:case"end":return jt.stop()}},it)}))},[p]);A.a.useEffect(function(){if(!!I){var Le=new be.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},n),{target:I,validateNode:function(It){return ue(void 0,void 0,void 0,Object(k.a)().mark(function tn(){var bn;return Object(k.a)().wrap(function(en){for(;;)switch(en.prev=en.next){case 0:return bn=Object.assign(Object.assign({},It.getData()),It.getPosition()),en.next=3,$(bn);case 3:return en.abrupt("return",!1);case 4:case"end":return en.stop()}},tn)}))}}));x(Le)}},[p,n,I,h,$]);var se=A.a.useCallback(function(Le){return function(it){if(!(!I||!E||!H)){var It=H.nodeTypeParser(Le),tn=Le.width,bn=tn===void 0?180:tn,dn=Le.height,en=dn===void 0?40:dn,Vn=H.nodeRender.get(It),jt=r2(Vn,p,h),Cn={data:Le,width:bn,height:en,view:H.graphId,component:jt},jn=r?r(Cn):SL(Cn);E.start(jn,it.nativeEvent)}}},[p,E,I,H,h,r]),de=A.a.useCallback(function(){var Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Le.map(function(it){var It=it.popoverContent;return A.a.createElement(lA,{item:it,key:it.id,onMouseDown:se(it),popoverContent:It,prefixClz:t,modelService:h,commandService:p,graphConfig:H})})},[p,H,h,se,t]),Ee=e.nodeList.filter(function(Le){return!Le.isCustom}),Oe=e.searchList.filter(function(Le){return!Le.isCustom}),$e=function(it){return e.nodeList.filter(function(It){return It.isCustom&&It.parentKey===it})},tt=function(it){return e.searchList.filter(function(It){return It.isCustom&&It.parentKey===it})};return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(t,"-body")},A.a.createElement(dj,{defaultActiveKey:s,style:{border:"none"}},l&&A.a.createElement(hj,{header:"\u901A\u7528\u8282\u70B9",key:"official",style:{border:"none"}},!e.keyword&&A.a.createElement("div",{className:"".concat(t,"-official")},de(Ee)),e.searchList.length>0&&A.a.createElement("div",{className:"".concat(t,"-official")},de(Oe))),(c==null?void 0:c.length)>0&&c.map(function(Le){return!Le.hidden&&Le.nodes.length>0&&A.a.createElement(hj,{header:Le.title,key:Le.key,style:{border:"none"}},!e.keyword&&A.a.createElement("div",{className:"".concat(t,"-custom")},de($e(Le.key))),e.searchList.length>0&&A.a.createElement("div",{className:"".concat(t,"-custom")},de(tt(Le.key))))})),e.keyword&&e.searchList.length===0&&A.a.createElement(tg.a,{style:{marginTop:"48px"}})))},gQ=function(a){var r=a.prefixClz,n=a.onKeywordChange,e=Gh(),t=e.propsProxy,i=t.getValue();return A.a.createElement(A.a.Fragment,null,A.a.createElement("div",{className:"".concat(r,"-header"),style:Object.assign({zIndex:1},a.style)},i.header&&A.a.isValidElement(i.header)&&i.header,A.a.createElement("div",{className:"".concat(r,"-header-search")},A.a.createElement(_p.a,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:function(u){return n(u.target.value)},style:{width:"100%",border:0}}))))},bE;(function(o){o.id="NODE_PANEL_DATA"})(bE||(bE={}));var pQ=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return ue(void 0,void 0,void 0,Object(k.a)().mark(function n(){var e;return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=a.filter(function(s){var u,l;return s.isDirectory||((u=s.label)===null||u===void 0?void 0:u.includes(r))||((l=s.name)===null||l===void 0?void 0:l.includes(r))}),i.abrupt("return",e);case 2:case"end":return i.stop()}},n)}))},mQ=function(a){var r=a.searchService,n=r===void 0?pQ:r,e=a.registerNode?Object(Uc.isArray)(a.registerNode)?a.registerNode:[a.registerNode]:[],t=[];e.forEach(function(p){t=t.concat(p.nodes.map(function(m){return Object.assign(Object.assign({},m),{parentKey:p.key})}))});var i=co(),s=i.modelService,u=kp({searchList:[],nodeList:[],defaultExpandAll:!1,keyword:""}),l=Object(Xe.a)(u,3),c=l[0],f=l[1],d=l[2];A.a.useEffect(function(){s.findDeferredModel(bE.id)||s.registerModel({id:bE.id,modelFactory:function(){return d},watchChange:function(m){return ue(void 0,void 0,void 0,Object(k.a)().mark(function b(){var E,x,O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,ke.GRAPH_META.getModel(s);case 2:return E=I.sent,x=function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function H(){var $;return Object(k.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,eQ(t);case 2:return $=de.sent,de.abrupt("return",{listData:$});case 4:case"end":return de.stop()}},H)}))},O=E.watch(function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function F(){var H;return Object(k.a)().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,x();case 2:H=se.sent,m.setValue({nodeList:H.listData,defaultExpandAll:!1,keyword:"",searchList:[]});case 4:case"end":return se.stop()}},F)}))}),I.abrupt("return",Or.create(function(){O.dispose()}));case 6:case"end":return I.stop()}},b)}))}})},[]);var h=A.a.useCallback(function(p){return ue(void 0,void 0,void 0,Object(k.a)().mark(function m(){var b;return Object(k.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(n){x.next=2;break}return x.abrupt("return");case 2:if(!p){x.next=9;break}return x.next=5,n(c.nodeList,p);case 5:b=x.sent,f(function(O){O.keyword=p,O.searchList=b}),x.next=10;break;case 9:f(function(O){O.keyword="",O.searchList=[]});case 10:case"end":return x.stop()}},m)}))},[n,c.nodeList,f]);return{state:c,setState:f,onKeywordChange:h}},yQ=function(a){var r=a.cell,n=a.data,e=n.label,t=n.stroke,i=n.fill,s=n.fontSize,u=n.fontFill,l=n.width,c=l===void 0?200:l,f=n.isCollapsed,d=f===void 0?!1:f,h=co(),p=function(){h.executeCommand(ls.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1,collapsedSize:{width:c,height:40}})},m=function(){h.executeCommand(ls.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,collapsedSize:{width:c,height:40},gap:3})};return A.a.createElement("div",{className:"xflow-group-node",style:{borderColor:t,backgroundColor:i,fontSize:s,color:u}},A.a.createElement("div",{className:"xflow-group-header"},A.a.createElement("div",{className:"header-left"},e),A.a.createElement("div",{className:"header-right"},d&&A.a.createElement(zk.a,{onClick:p}),!d&&A.a.createElement(Uk.a,{onClick:m}))))},bQ=function(a){a.setNodeRender(AJ,yQ)},vj;(function(o){o.id="FLOWCHART_PANEL_DATA"})(vj||(vj={}));var CQ=function(a){var r=a.prefixClz,n=a.position,e=n===void 0?{width:240,top:0,bottom:0,left:0}:n,t=a.showHeader,i=t===void 0?!0:t,s=Jt(a,["prefixClz","position","showHeader"]),u=e.width,l=u===void 0?200:u,c=TL(a),f=c.headerStyle,d=c.bodyStyle,h=mQ(a),p=h.state,m=h.onKeywordChange;return A.a.createElement(A.a.Fragment,null,i&&A.a.createElement(zh,Object.assign({},s,{position:{top:0,left:0,height:YL,width:l}}),A.a.createElement(gQ,Object.assign({},a,{state:p,style:f,onKeywordChange:m}))),A.a.createElement(zh,Object.assign({className:"".concat(mE,"-nodes")},s,{position:Object.assign(Object.assign({},e),{top:i?YL:0})}),A.a.createElement(vQ,Object.assign({},a,{state:p,style:d}))))},qq=function(a){QL(Object(Uc.get)(a,"registerNode"));var r=fp("node-panel"),n=Object(bt.useState)(!1),e=Object(Xe.a)(n,2),t=e[0],i=e[1],s=a.show,u=s===void 0?!0:s,l=a.position,c=l===void 0?{width:240,top:40,bottom:0,left:0}:l,f=Jt(a,["show","position"]);if(!u)return null;var d=c.width,h=d===void 0?200:d,p=c.left;return A.a.createElement(zh,{className:mE,position:Object.assign(Object.assign({},c),{left:t?-h:p})},A.a.createElement("div",{className:"".concat(mE,"-wrapper")},A.a.createElement(zh,Object.assign({className:r},f,{position:{top:0,bottom:0,left:0,right:0}}),A.a.createElement(CQ,Object.assign({},a,{prefixClz:r,position:c}))),A.a.createElement("div",{className:"".concat(mE,"-icon"),style:{top:21,right:t?-20:-10,borderRadius:t?"0 50% 50% 0":"50%",borderLeft:t?"none":""},onClick:function(){i(!t)}},t?A.a.createElement(UL.a,null):A.a.createElement(VL.a,null))))},EQ="flowchart-connecting-edge",wQ="ant",CE;(function(o){o.EVENT_NAME="ADD_FLOWCHART_EDGE_CMD_EVENT"})(CE||(CE={}));var gj={attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8},strokeDasharray:"5 5",strokeWidth:1}}},xQ=Te.Edge.registry.register("xflow",Te.Edge.define({zIndex:1,highlight:!0,name:EQ,label:"",anchor:{name:"midSide",args:{dx:10}},attrs:gj.attrs,data:{label:""}}),!0),OQ=Kk(function(o,a){var r=a.getValue(),n=r.config,e=n===void 0?{}:n,t=r.useConfig,i=r.mode,s=i===void 0?"edit":i,u=r.showPortsOnNodeSelected,l=u===void 0?!1:u,c=r.edgeConfig,f=c===void 0?{}:c;o.setEdgeTypeParser(function(d){return d==null?void 0:d.renderKey}),HL(Object.assign(Object.assign({},a.getValue()),{graphConfig:o})),tQ(o),bQ(o),o.setX6Config(zL()({grid:!0,history:!0,resizing:{enabled:!0,minWidth:da,minHeight:da,preserveAspectRatio:function(h){var p=h.data;return TJ.includes(p.name)}},snapline:{enabled:!0},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge:function(){var h=this,p=new xQ({});return this.once("edge:connected",function(m){var b=m.edge,E=m.isNew;if(E&&b&&b.isEdge()&&p===b){var x=b.getTargetCell();if(x&&x.isNode()){var O=b.getTargetPortId(),D=b.getSourcePortId(),I=b.getSourceCellId(),F=b.getTargetCellId(),H=typeof f=="function"?f(b):f;h.trigger(CE.EVENT_NAME,Object.assign({targetPortId:O,sourcePortId:D,source:I,target:F,edge:b,tempEdgeId:p.id},zL()(gj,H)))}}}),p},validateEdge:function(h){var p,m=h.edge;return!!((p=m==null?void 0:m.target)===null||p===void 0?void 0:p.port)},validateMagnet:function(){return!0},validateConnection:function(h){var p=h.sourceView,m=h.targetView,b=h.targetMagnet;if(p===m)return!1;var E=m.cell;if(b){var x=b.getAttribute("port"),O=E.getPort(x);return!(O&&O.connected)}}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},onPortRendered:function(h){var p=h.port,m=h.contentSelectors,b=m&&m.content,E=p.group,x=Mn()("xflow-port",{connected:p.connected});b&&Bv.a.render(A.a.createElement(vJ.a,{prefixCls:wQ},A.a.createElement(tE.a,{title:p.tooltip,placement:E},A.a.createElement("span",{className:x}))),b)}},e)),o.setEvents([{eventName:"node:selected",callback:function(){s==="edit"&&yA(!1)}},{eventName:"edge:dblclick",callback:function(h){SJ(h)}},{eventName:"edge:mouseleave",callback:function(h,p){MJ(h,p)}},{eventName:"node:mouseenter",callback:function(h){s==="edit"&&yA(!0,h,l)}},{eventName:"node:mouseleave",callback:function(h){yA(!1,h)}},{eventName:"node:moved",callback:function(h,p){bJ(h,p)}},{eventName:"node:resized",callback:function(h,p){CJ(h,p)}}]),typeof t=="function"&&t(o)}),EA=Object(pe.a)(function o(){var a=this;Object(Ie.a)(this,o),this.toDispose=new Xi,this.registerHookHub=function(){return ue(a,void 0,void 0,Object(k.a)().mark(function r(){return Object(k.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Or.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return ue(a,void 0,void 0,Object(k.a)().mark(function n(){var e=this,t,i;return Object(k.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Xi,i=[r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:function(c){return ue(e,void 0,void 0,Object(k.a)().mark(function f(){var d=this,h,p;return Object(k.a)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:h=c.commandService,p=c.graph,p.on(CE.EVENT_NAME,function(E){return ue(d,void 0,void 0,Object(k.a)().mark(function x(){var O,D,I,F,H,$,se,de;return Object(k.a)().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return O=E.edge,D=Jt(E,["edge"]),I=D.tempEdgeId,F=Jt(D,["tempEdgeId"]),H={edgeConfig:Object.assign(Object.assign({},F),{source:{cell:D.source,port:D.sourcePortId},target:{cell:D.target,port:D.targetPortId},zIndex:1,data:Object.assign({},F)})},Oe.next=5,h.executeCommand(to.ADD_EDGE.id,H);case 5:return Oe.next=7,h.executeCommand(to.DEL_EDGE.id,{edgeConfig:{id:I}});case 7:return $=p.getCellById(D.source),se=p.getCellById(D.target),Oe.next=11,h.executeCommand(fa.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},$.data),{incomingEdges:p.getIncomingEdges($),outgoingEdges:p.getOutgoingEdges($)})});case 11:return Oe.next=13,h.executeCommand(fa.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},se.data),{incomingEdges:p.getIncomingEdges(se),outgoingEdges:p.getOutgoingEdges(se)})});case 13:de=Fy("onAddEdge"),typeof de=="function"&&de(H.edgeConfig),E.edge.remove();case 16:case"end":return Oe.stop()}},x)}))});case 2:case"end":return b.stop()}},f)}))}})],t.pushAll(i),u.abrupt("return",Or.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});EA=nt([Object(Pe.singleton)({contrib:Zl})],EA);var eee=function(){var a=Jl(),r=A.a.useMemo(function(){return{CONFIG_TYPE:"FLOWCHART_EXTENSION",getConfig:function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function e(){return Object(k.a)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:case"end":return i.stop()}},e)}))}}},[]);return A.a.useEffect(function(){var n=a.addExtension({config:r,createModule:SQ});return a.addContainerClassNames("flowchart-extension-container"),function(){n.dispose()}},[r,a]),null},SQ=function(){return Object(Pe.Module)(function(a){a(EA)})},MQ=function(a){var r=a.position,n=r===void 0?{top:40,left:240,right:240,bottom:0}:r,e=OQ(a),t=co();return Object(bt.useEffect)(function(){t&&pJ(t)},[t]),A.a.createElement(w2,Object.assign({},a,{config:e,position:n}),a.children)};MQ.defaultProps={isXFlowCanvas:!0};var AQ=function(a){return ue(void 0,void 0,void 0,Object(k.a)().mark(function r(){var n,e,t,i,s,u;return Object(k.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=a.targetType,t=(n=a.targetData)===null||n===void 0?void 0:n.isGroup,i={tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"\u5206\u7EC4\u540D",name:"group-service",shape:"group-service",placeholder:"\u5206\u7EC4\u540D\u79F0"}]}]}]},s={tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"\u8282\u70B9\u540D",name:"node-service",shape:"node-service",placeholder:"\u8282\u70B9\u540D\u79F0"}]}]}]},u={tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"\u8FB9",name:"edge-service",shape:"edge-service",placeholder:"\u8FB9\u540D\u79F0"}]}]}]},!t){c.next=7;break}return c.abrupt("return",i);case 7:if(e!=="node"){c.next=9;break}return c.abrupt("return",s);case 9:if(e!=="edge"){c.next=11;break}return c.abrupt("return",u);case 11:return c.abrupt("return",{tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"",name:"canvas-service",shape:"canvas-service"}]}]}]});case 12:case"end":return c.stop()}},r)}))};function TQ(o){var a=Object(bt.useState)({loading:!0}),r=Object(Xe.a)(a,2),n=r[0],e=r[1],t=Object(bt.useCallback)(function(){o().then(function(i){e({loading:!1,data:i})},function(i){e({loading:!1}),console.error(i)})},[o]);return Object(bt.useEffect)(function(){t()},[t]),n}var wA=function(a){var r=a.controlSchema,n=a.children,e=a.type,t=e===void 0?"node":e,i=Gh(),s=i.commandService,u=i.modelService,l=Object(bt.useCallback)(function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function E(){var x,O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,ke.SELECTED_NODE.useValue(u);case 2:return x=I.sent,O=x.data,I.abrupt("return",O);case 5:case"end":return I.stop()}},E)}))},[u]),c=Object(bt.useCallback)(function(){return ue(void 0,void 0,void 0,Object(k.a)().mark(function E(){var x,O;return Object(k.a)().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,ke.SELECTED_CELL.useValue(u);case 2:return x=I.sent,O=x.getData(),I.abrupt("return",Object.assign({id:x.id},O));case 5:case"end":return I.stop()}},E)}))},[u]),f=TQ(t==="edge"?c:l),d=f.data,h=f.loading;A.a.useEffect(function(){s.executeCommand(wi.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(x,O){return ue(void 0,void 0,void 0,Object(k.a)().mark(function D(){return Object(k.a)().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.abrupt("return",{err:null,data:O,meta:x});case 1:case"end":return F.stop()}},D)}))}})},[s]);var p=function(x){return ue(void 0,void 0,void 0,Object(k.a)().mark(function O(){var D,I;return Object(k.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,l();case 2:return D=H.sent,I=Object.assign(Object.assign({},D),x),H.next=6,s.executeCommand(fa.UPDATE_NODE.id,{nodeConfig:I});case 6:By({type:"update:node",config:I});case 7:case"end":return H.stop()}},O)}))},m=function(x){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"line",D=arguments.length>2?arguments[2]:void 0;return ue(void 0,void 0,void 0,Object(k.a)().mark(function I(){var F,H,$;return Object(k.a)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.next=2,c();case 2:return H=de.sent,$=Object.assign(Object.assign(Object.assign({},H),D?x[D]:x),{attrs:Object.assign(Object.assign({},H.attrs),Object(Qe.a)({},O,Object.assign(Object.assign({},(F=H.attrs)===null||F===void 0?void 0:F[O]),D?x[D]:x)))}),de.next=6,s.executeCommand(to.UPDATE_EDGE.id,{edgeConfig:$});case 6:By({type:"update:edge",config:$});case 7:case"end":return de.stop()}},I)}))},b=function(x){return ue(void 0,void 0,void 0,Object(k.a)().mark(function O(){var D,I;return Object(k.a)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,l();case 2:return D=H.sent,I=Object.assign(Object.assign({},D),x),H.next=6,s.executeCommand(fa.UPDATE_NODE.id,{nodeConfig:I});case 6:By({type:"update:group",config:I});case 7:case"end":return H.stop()}},O)}))};return h?null:A.a.createElement(Uh,{schema:r},function(){return n(Object.assign({},d),{updateNode:p,updateEdge:m,updateGroup:b})})},hs="flowchart-editor",EE=24,pj={attrs:{line:{stroke:"#A2B1C3",strokeWidth:1},text:{fill:"#000",fontSize:12,textAnchor:"middle",textVerticalAnchor:"middle"}}},wE={width:12,height:8,name:"block"},xE={width:0,height:0,name:""},PQ={target:{sourceMarker:xE,targetMarker:wE},source:{sourceMarker:wE,targetMarker:xE},all:{sourceMarker:wE,targetMarker:wE},none:{sourceMarker:xE,targetMarker:xE}},kQ={solid:[0,0],dash:[5,5]},DQ=function(a){var r=a.label,n=r===void 0?"\u6807\u7B7E":r,e=a.value,t=a.onChange;return A.a.createElement("div",{className:"group"},A.a.createElement("label",null,n),A.a.createElement(_p.a,{value:e,style:{height:EE},onChange:function(s){t==null||t(s.target.value)}}))},OE=DQ,IQ=v("WFjJ"),RQ=function(a){var r=a.label,n=a.value,e=n===void 0?"":n,t=a.onChange,i=a.getContainer,s=Object(bt.useState)(!1),u=Object(Xe.a)(s,2),l=u[0],c=u[1],f=Object(bt.useRef)(e),d=Object(bt.useRef)(),h=co(),p=h.graphProvider,m=Object(bt.useRef)();p.getGraphOptions().then(function(O){m.current=O});var b=function(){return A.a.createElement("div",{className:"".concat(hs,"-pick-color-container")},A.a.createElement("div",{className:"".concat(hs,"-popover")},A.a.createElement(IQ.SketchPicker,{onChange:function(I){f.current=I.hex}}),A.a.createElement("div",{className:"foolter"},A.a.createElement(sA.a,{onClick:function(){c(!1)}},"\u53D6\u6D88"),A.a.createElement(sA.a,{type:"primary",onClick:function(){t==null||t(f.current),c(!1)}},"\u786E\u8BA4"))))},E=function(D,I){var F=document.getElementsByClassName(I);if(F.length===1)return F[0];for(var H=null,$=D.parentElement;!H;){var se=$.getElementsByClassName(I);(se==null?void 0:se.length)>0&&(H=se[0]),$=$.parentElement}return H},x=function(){var D,I=(D=i==null?void 0:i())!==null&&D!==void 0?D:E(d.current,"flowchart-editor-panel-body");return Object(Nk.createPortal)(A.a.createElement(b,null),I)};return A.a.createElement("div",{className:"group",ref:d},r&&A.a.createElement("label",null,r),A.a.createElement("div",{className:"".concat(hs,"-color-container"),onClick:function(){c(!0)}},A.a.createElement("div",{className:"".concat(hs,"-color"),style:{backgroundColor:e,height:"100%"}})),l&&x())},Nd=Object(bt.memo)(RQ,function(o,a){return o.label===a.label&&o.value===a.value}),NQ=function(a){var r=a.label,n=a.value,e=a.onChange,t=a.min,i=a.width;return A.a.createElement("div",{className:"group"},r&&A.a.createElement("label",null,r),A.a.createElement(dA.a,{value:n,min:t,style:{width:i,height:EE},onChange:function(u){e==null||e(u)}}))},Gy=NQ,SE=function(a){var r=a.value,n=a.onChangeItem,e=a.addonBefore;return A.a.createElement("div",{className:"addon-before-group"},A.a.createElement(dA.a,{value:r,style:{height:EE,border:"none"},onChange:function(i){n(i)}}),A.a.createElement("span",null,e))},LQ=function(a){var r=a.label,n=r===void 0?"\u4F4D\u7F6E":r,e=a.x,t=a.y,i=a.onChange;return A.a.createElement("div",{className:"group"},A.a.createElement("label",null,n),A.a.createElement("div",{className:"split"},A.a.createElement(SE,{addonBefore:"X",value:e,onChangeItem:function(u){i==null||i("x",u)}}),A.a.createElement(SE,{addonBefore:"Y",value:t,onChangeItem:function(u){i==null||i("y",u)}})))},xA=LQ,jQ=function(a){var r=a.width,n=a.height,e=a.label,t=e===void 0?"\u5C3A\u5BF8":e,i=a.onChange;return A.a.createElement("div",{className:"group"},A.a.createElement("label",null,t),A.a.createElement("div",{className:"split"},A.a.createElement(SE,{addonBefore:"W",value:r,onChangeItem:function(u){i==null||i("width",u)}}),A.a.createElement(SE,{addonBefore:"H",value:n,onChangeItem:function(u){i==null||i("height",u)}})))},OA=jQ,_Q=function(a){var r=a.label,n=r===void 0?"\u7BAD\u5934":r,e=a.value,t=a.onChange,i=a.options,s=i===void 0?[]:i,u=a.width;return A.a.createElement("div",{className:"group"},A.a.createElement("label",null,n),A.a.createElement(cA.a,{size:"small",value:e,style:{width:u,height:EE},getPopupContainer:function(c){return c.parentNode},optionFilterProp:"children",onChange:function(c){t==null||t(c)},filterOption:function(c,f){var d=f.label,h=d===void 0?"":d;return typeof h=="string"?h.toLowerCase().indexOf(c.toLowerCase())>=0:h.toString().indexOf(c.toLowerCase())>=0},options:s}))},SA=_Q,tee={InputFiled:OE,ColorPicker:Nd,InputNumberFiled:Gy,Size:OA,Position:xA,SelectField:SA},FQ=function(a){var r=a.config,n=a.plugin,e=n===void 0?{}:n,t=e.updateNode,i=Object(bt.useState)(Object.assign(Object.assign({},Fn),r)),s=Object(Xe.a)(i,2),u=s[0],l=s[1],c=function(d,h){l(Object.assign(Object.assign({},u),Object(Qe.a)({},d,h))),t(Object(Qe.a)({},d,h))};return Object(bt.useEffect)(function(){l(Object.assign(Object.assign({},Fn),r))},[r]),A.a.createElement("div",{className:"".concat(hs,"-panel-body")},A.a.createElement("div",{className:"".concat(hs,"-panel-group")},A.a.createElement("h5",null,"\u5185\u5BB9"),A.a.createElement(OE,{label:"\u6807\u9898",value:u.label,onChange:function(d){c("label",d)}})),A.a.createElement("div",{className:"".concat(hs,"-panel-group")},A.a.createElement("h5",null,"\u6837\u5F0F"),A.a.createElement(xA,{x:u.x,y:u.y,onChange:function(d,h){c(d,h)}}),A.a.createElement(OA,{width:u.width,height:u.height,onChange:function(d,h){c(d,h)}}),A.a.createElement(Nd,{label:"\u586B\u5145",value:u.fill,onChange:function(d){c("fill",d)}}),A.a.createElement(Nd,{label:"\u8FB9\u6846",value:u.stroke,onChange:function(d){c("stroke",d)}}),A.a.createElement("div",{className:"".concat(hs,"-node-text-style")},A.a.createElement(Gy,{label:"\u5B57\u53F7",value:u.fontSize,width:68,onChange:function(d){c("fontSize",d)}}),A.a.createElement(Nd,{value:u.fontFill,onChange:function(d){c("fontFill",d)}}))))},mj=function(a){return A.a.createElement(wA,Object.assign({},a),function(r,n){return A.a.createElement(FQ,Object.assign({},a,{plugin:n,config:r}))})},BQ=function(a){var r=a.config,n=a.plugin,e=n===void 0?{}:n,t=e.updateEdge,i=Object(bt.useState)(Object.assign(Object.assign({},pj),r)),s=Object(Xe.a)(i,2),u=s[0],l=s[1];Object(bt.useEffect)(function(){l(Object.assign(Object.assign({},pj),r))},[r]);var c=function(m){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"line",E,x=u.attrs,O=x===void 0?{}:x;return(E=O[b])===null||E===void 0?void 0:E[m]},f=function(){var m,b,E,x,O,D=u.attrs,I=D===void 0?{}:D,F=I.line,H=F===void 0?{}:F;return((m=H.sourceMarker)===null||m===void 0?void 0:m.name)&&((b=H.targetMarker)===null||b===void 0?void 0:b.name)?"all":!((E=H.sourceMarker)===null||E===void 0?void 0:E.name)&&!((x=H.targetMarker)===null||x===void 0?void 0:x.name)?"none":((O=H.sourceMarker)===null||O===void 0?void 0:O.name)?"source":"target"},d=function(){var m=u.attrs,b=m===void 0?{}:m,E=b.line,x=E===void 0?{}:E;return x.strokeDasharray?"dash":"solid"},h=function(m,b){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"line",x,O;if(m==="arrow")l(Object.assign(Object.assign({},u),{attrs:Object.assign(Object.assign({},u.attrs),Object(Qe.a)({},E,Object.assign(Object.assign({},(x=u.attrs)===null||x===void 0?void 0:x[E]),b)))}));else{var D;l(Object.assign(Object.assign({},u),(D={},Object(Qe.a)(D,m,b),Object(Qe.a)(D,"attrs",Object.assign(Object.assign({},u.attrs),Object(Qe.a)({},E,Object.assign(Object.assign({},(O=u.attrs)===null||O===void 0?void 0:O[E]),Object(Qe.a)({},m,b))))),D)))}t(Object(Qe.a)({},m,b),E,m==="arrow"?"arrow":"")};return A.a.createElement("div",{className:"".concat(hs,"-panel-body")},A.a.createElement("div",{className:"".concat(hs,"-panel-group")},A.a.createElement("h5",null,"\u5185\u5BB9"),A.a.createElement(OE,{label:"\u6807\u7B7E",value:u.label,onChange:function(m){h("label",m)}})),A.a.createElement("h5",{style:{marginBottom:12}},"\u6837\u5F0F"),A.a.createElement("div",{className:"".concat(hs,"-panel-group"),style:{marginBottom:0}},A.a.createElement("h5",null,"\u7EBF"),A.a.createElement(SA,{label:"\u7BAD\u5934",value:f(),width:"100%",options:[{label:"\u6B63\u5411",value:"target"},{label:"\u9006\u5411",value:"source"},{label:"\u53CC\u5411",value:"all"},{label:"\u65E0",value:"none"}],onChange:function(m){h("arrow",PQ[m],"line")}}),A.a.createElement("div",{className:"".concat(hs,"-edge-stroke-style")},A.a.createElement(SA,{label:"\u7EBF\u5F62",width:68,value:d(),options:[{label:"\u5B9E\u7EBF",value:"solid"},{label:"\u865A\u7EBF",value:"dash"}],onChange:function(m){h("strokeDasharray",kQ[m],"line")}}),A.a.createElement(Gy,{value:c("strokeWidth"),min:1,onChange:function(m){h("strokeWidth",m,"line")}})),A.a.createElement(Nd,{label:"\u8FB9\u6846",value:c("stroke"),onChange:function(m){h("stroke",m,"line")}})),A.a.createElement("div",{className:"".concat(hs,"-panel-group")},A.a.createElement("h5",null,"\u6807\u7B7E"),A.a.createElement("div",{className:"".concat(hs,"-edge-text-style")},A.a.createElement(Gy,{label:"\u5B57\u53F7",min:10,width:68,value:c("fontSize","text")||12,onChange:function(m){h("fontSize",m,"text")}}),A.a.createElement(Nd,{value:c("fill","text")||"#000",onChange:function(m){h("fill",m,"text")}}))))},yj=function(a){return A.a.createElement(wA,Object.assign({},a,{type:"edge"}),function(r,n){return A.a.createElement(BQ,Object.assign({},a,{plugin:n,config:r}))})},GQ=function(a){var r=a.config,n=a.plugin,e=n===void 0?{}:n,t=e.updateGroup,i=Object(bt.useState)(Object.assign(Object.assign({},Fn),r)),s=Object(Xe.a)(i,2),u=s[0],l=s[1],c=function(d,h){l(Object.assign(Object.assign({},u),Object(Qe.a)({},d,h))),t(Object(Qe.a)({},d,h))};return Object(bt.useEffect)(function(){l(Object.assign(Object.assign({},Fn),r))},[r]),A.a.createElement("div",{className:"".concat(hs,"-panel-body")},A.a.createElement("div",{className:"".concat(hs,"-panel-group")},A.a.createElement("h5",null,"\u5185\u5BB9"),A.a.createElement(OE,{label:"\u6807\u9898",value:u.label,onChange:function(d){c("label",d)}})),A.a.createElement("div",{className:"".concat(hs,"-panel-group")},A.a.createElement("h5",null,"\u6837\u5F0F"),A.a.createElement(xA,{x:u.x,y:u.y,onChange:function(d,h){c(d,h)}}),A.a.createElement(OA,{width:u.width,height:u.height,onChange:function(d,h){c(d,h)}}),A.a.createElement(Nd,{label:"\u586B\u5145",value:u.fill,onChange:function(d){c("fill",d)}}),A.a.createElement(Nd,{label:"\u8FB9\u6846",value:u.stroke,onChange:function(d){c("stroke",d)}}),A.a.createElement("div",{className:"".concat(hs,"-node-text-style")},A.a.createElement(Gy,{label:"\u5B57\u53F7",value:u.fontSize,width:68,onChange:function(d){c("fontSize",d)}}),A.a.createElement(Nd,{value:u.fontFill,onChange:function(d){c("fontFill",d)}}))))},bj=function(a){return A.a.createElement(wA,Object.assign({},a),function(r,n){return A.a.createElement(GQ,Object.assign({},a,{plugin:n,config:r}))})},Cj=function(){return A.a.createElement("div",{className:"".concat(hs,"-canvas-panel")},A.a.createElement("span",null,"\u672A\u9009\u4E2D"))},zQ=function(a){return a.set("node-service",mj),a.set("edge-service",yj),a.set("group-service",bj),a.set("canvas-service",Cj),a},nee={NodeService:mj,EdgeService:yj,GroupService:bj,CanvasService:Cj},MA="xflow-editor-panel-collpase",ree=function(a){var r=Object(bt.useState)(!1),n=Object(Xe.a)(r,2),e=n[0],t=n[1],i=a.controlMapService,s=i===void 0?zQ:i,u=a.formSchemaService,l=u===void 0?AQ:u,c=a.position,f=c===void 0?{width:240,top:0,bottom:0,right:0}:c,d=a.show,h=d===void 0?!0:d,p=Jt(a,["controlMapService","formSchemaService","position","show"]);if(!h)return null;var m=f.width,b=m===void 0?200:m,E=f.right;return A.a.createElement(zh,{className:MA,position:Object.assign(Object.assign({},f),{right:e?-b:E})},A.a.createElement("div",{className:"".concat(MA,"-wrapper")},A.a.createElement(BL,Object.assign({targetType:["node","edge","canvas","group"],controlMapService:s,formSchemaService:l,position:Object.assign(Object.assign({},f),{top:0}),prefixClz:"xflow-form-editor"},p)),A.a.createElement("div",{className:"".concat(MA,"-icon"),style:{top:21,left:e?-20:-10,borderRadius:e?"50% 0 0  50%":"50%",borderRight:e?"none":""},onClick:function(){t(!e)}},e?A.a.createElement(VL.a,null):A.a.createElement(UL.a,null))))}},"9y2T":function(fe,T,v){"use strict";v.d(T,"a",function(){return B}),v.d(T,"b",function(){return _});var B=-1,C=1;function _(){return C++}},A14R:function(fe,T){},AEOw:function(fe,T){fe.exports=v;function v(B,C,_){var P=C[0],N=C[1];return B[0]=_[0]*P+_[4]*N+_[12],B[1]=_[1]*P+_[5]*N+_[13],B}},APxj:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B=v("Ucsi");function C(_,P){P===void 0&&(P=!0);var N=B.makePropertyInjectDecorator(_,P),z=B.makePropertyInjectNamedDecorator(_,P),R=B.makePropertyInjectTaggedDecorator(_,P),q=B.makePropertyMultiInjectDecorator(_,P);return{lazyInject:N,lazyInjectNamed:z,lazyInjectTagged:R,lazyMultiInject:q}}T.default=C},AV2a:function(fe,T,v){var B=v("3z9K"),C=v("QJPA"),_=v("WZrV");fe.exports=P;function P(N,z){var R=new C,q={},W=new _,Z;function X(ie){var te=ie.v===Z?ie.w:ie.v,ce=W.priority(te);if(ce!==void 0){var ee=z(ie);ee<ce&&(q[te]=Z,W.decrease(te,ee))}}if(N.nodeCount()===0)return R;B.each(N.nodes(),function(ie){W.add(ie,Number.POSITIVE_INFINITY),R.setNode(ie)}),W.decrease(N.nodes()[0],0);for(var ne=!1;W.size()>0;){if(Z=W.removeMin(),B.has(q,Z))R.setEdge(Z,q[Z]);else{if(ne)throw new Error("Input graph is not connected: "+N);ne=!0}N.nodeEdges(Z).forEach(X)}return R}},AnK5:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.EditableInput=void 0;var B=function(){function Q(ge,oe){for(var Te=0;Te<oe.length;Te++){var be=oe[Te];be.enumerable=be.enumerable||!1,be.configurable=!0,"value"in be&&(be.writable=!0),Object.defineProperty(ge,be.key,be)}}return function(ge,oe,Te){return oe&&Q(ge.prototype,oe),Te&&Q(ge,Te),ge}}(),C=v("q1tI"),_=z(C),P=v("/FUP"),N=z(P);function z(Q){return Q&&Q.__esModule?Q:{default:Q}}function R(Q,ge,oe){return ge in Q?Object.defineProperty(Q,ge,{value:oe,enumerable:!0,configurable:!0,writable:!0}):Q[ge]=oe,Q}function q(Q,ge){if(!(Q instanceof ge))throw new TypeError("Cannot call a class as a function")}function W(Q,ge){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ge&&(typeof ge=="object"||typeof ge=="function")?ge:Q}function Z(Q,ge){if(typeof ge!="function"&&ge!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ge);Q.prototype=Object.create(ge&&ge.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),ge&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,ge):Q.__proto__=ge)}var X=1,ne=38,ie=40,te=[ne,ie],ce=function(ge){return te.indexOf(ge)>-1},ee=function(ge){return ge+"%"},Y=function(ge){return Number(String(ge).replace(/%/g,""))},le=function(ge){return String(ge).indexOf("%")>-1},re=T.EditableInput=function(Q){Z(ge,Q);function ge(oe){q(this,ge);var Te=W(this,(ge.__proto__||Object.getPrototypeOf(ge)).call(this));return Te.handleBlur=function(){Te.state.blurValue&&Te.setState({value:Te.state.blurValue,blurValue:null})},Te.handleChange=function(be){Te.setUpdatedValue(be.target.value,be)},Te.handleKeyDown=function(be){var j=Y(be.target.value);if(!isNaN(j)&&ce(be.keyCode)){var ke=Te.getArrowOffset(),Je=be.keyCode===ne?j+ke:j-ke;Te.setUpdatedValue(Je,be)}},Te.handleDrag=function(be){if(Te.props.dragLabel){var j=Math.round(Te.props.value+be.movementX);j>=0&&j<=Te.props.dragMax&&Te.props.onChange&&Te.props.onChange(Te.getValueObjectWithLabel(j),be)}},Te.handleMouseDown=function(be){Te.props.dragLabel&&(be.preventDefault(),Te.handleDrag(be),window.addEventListener("mousemove",Te.handleDrag),window.addEventListener("mouseup",Te.handleMouseUp))},Te.handleMouseUp=function(){Te.unbindEventListeners()},Te.unbindEventListeners=function(){window.removeEventListener("mousemove",Te.handleDrag),window.removeEventListener("mouseup",Te.handleMouseUp)},Te.state={value:String(oe.value).toUpperCase(),blurValue:String(oe.value).toUpperCase()},Te}return B(ge,[{key:"componentWillReceiveProps",value:function(Te){var be=this.input;Te.value!==this.state.value&&(be===document.activeElement?this.setState({blurValue:String(Te.value).toUpperCase()}):this.setState({value:String(Te.value).toUpperCase(),blurValue:!this.state.blurValue&&String(Te.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(Te){return R({},this.props.label,Te)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||X}},{key:"setUpdatedValue",value:function(Te,be){var j=this.props.label!==null?this.getValueObjectWithLabel(Te):Te;this.props.onChange&&this.props.onChange(j,be);var ke=le(be.target.value);this.setState({value:ke?ee(Te):Te})}},{key:"render",value:function(){var Te=this,be=(0,N.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return _.default.createElement("div",{style:be.wrap},_.default.createElement("input",{style:be.input,ref:function(ke){return Te.input=ke},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?_.default.createElement("span",{style:be.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),ge}(C.PureComponent||C.Component);T.default=re},AwBQ:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Lookup=void 0;var B=v("MON2"),C=function(){function _(){this._map=new Map}return _.prototype.getMap=function(){return this._map},_.prototype.add=function(P,N){if(P==null)throw new Error(B.NULL_ARGUMENT);if(N==null)throw new Error(B.NULL_ARGUMENT);var z=this._map.get(P);z!==void 0?(z.push(N),this._map.set(P,z)):this._map.set(P,[N])},_.prototype.get=function(P){if(P==null)throw new Error(B.NULL_ARGUMENT);var N=this._map.get(P);if(N!==void 0)return N;throw new Error(B.KEY_NOT_FOUND)},_.prototype.remove=function(P){if(P==null)throw new Error(B.NULL_ARGUMENT);if(!this._map.delete(P))throw new Error(B.KEY_NOT_FOUND)},_.prototype.removeByCondition=function(P){var N=this;this._map.forEach(function(z,R){var q=z.filter(function(W){return!P(W)});q.length>0?N._map.set(R,q):N._map.delete(R)})},_.prototype.hasKey=function(P){if(P==null)throw new Error(B.NULL_ARGUMENT);return this._map.has(P)},_.prototype.clone=function(){var P=new _;return this._map.forEach(function(N,z){N.forEach(function(R){return P.add(z,R.clone())})}),P},_.prototype.traverse=function(P){this._map.forEach(function(N,z){P(z,N)})},_}();T.Lookup=C},AzzA:function(fe,T){fe.exports=v;function v(B,C){return B[0]=-C[0],B[1]=-C[1],B}},BFph:function(fe,T,v){"use strict";v.d(T,"a",function(){return Ae});var B=v("o0o1"),C=v.n(B),_=v("yXPU"),P=v.n(_),N=v("yG8O"),z=v.n(N),R=v("lwsE"),q=v.n(R),W=v("W8MJ"),Z=v.n(W),X=v("U+yc"),ne=v.n(X),ie=v("1ABj"),te=v.n(ie),ce=v("IOcx"),ee=v("4cb6"),Y=v.n(ee),le=v("+uE7"),re,Q,ge,oe,Te,be,j,ke,Je,Pe,Ae=(re=Object(ee.injectable)(),Q=Object(ee.inject)(le.a.HierarchyComponentManager),ge=Object(ee.inject)(le.a.TransformComponentManager),oe=Object(ee.inject)(le.a.MeshComponentManager),re(Te=(be=(Pe=function(){function ot(){q()(this,ot),z()(this,"hierarchy",j,this),z()(this,"transform",ke,this),z()(this,"mesh",Je,this)}return Z()(ot,[{key:"execute",value:function(){var k=P()(C.a.mark(function Ot(){return C.a.wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return Ut.stop()}},Ot,this)}));function Xe(){return k.apply(this,arguments)}return Xe}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var Xe=this;this.transform.forEach(function(Ot,lt){(lt.isDirty()||lt.isLocalDirty())&&(Xe.setMeshAABBDirty(Xe.mesh.getComponentByEntity(Ot)),lt.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var Xe=this;this.hierarchy.forEach(function(Ot,lt){var Ut=Xe.transform.getComponentByEntity(Ot),Jt=Xe.transform.getComponentByEntity(lt.parentID);Ut!==null&&Jt!==null&&Ut.updateTransformWithParent(Jt)})}},{key:"attach",value:function(Xe,Ot,lt){this.hierarchy.contains(Xe)&&this.detach(Xe),this.hierarchy.create(Xe,{parentID:Ot});var Ut=this.mesh.getComponentByEntity(Ot);if(this.setMeshAABBDirty(Ut),Ut&&Ut.children.indexOf(Xe)===-1&&Ut.children.push(Xe),this.hierarchy.getCount()>1)for(var Jt=this.hierarchy.getCount()-1;Jt>0;--Jt)for(var nt=this.hierarchy.getEntity(Jt),$t=0;$t<Jt;++$t){var ze=this.hierarchy.getComponent($t);if(ze.parentID===nt){this.hierarchy.moveItem(Jt,$t),++Jt;break}}var ue=this.hierarchy.getComponentByEntity(Xe),an=this.transform.getComponentByEntity(Ot);an===null&&(an=this.transform.create(Ot));var nn=this.transform.getComponentByEntity(Xe);nn===null&&(nn=this.transform.create(Xe),an=this.transform.getComponentByEntity(Ot)),nn.parent=an,!lt&&an&&(nn.matrixTransform(ce.b.invert(ce.b.create(),an.worldTransform)),nn.updateTransform()),an&&nn.updateTransformWithParent(an)}},{key:"detach",value:function(Xe){var Ot=this.hierarchy.getComponentByEntity(Xe);if(Ot!==null){var lt=this.transform.getComponentByEntity(Xe);lt!==null&&(lt.parent=null,lt.applyTransform()),this.hierarchy.removeKeepSorted(Xe);var Ut=this.mesh.getComponentByEntity(Ot.parentID);if(Ut){var Jt=Ut.children.indexOf(Xe);Ut.children.splice(Jt,1)}this.setMeshAABBDirty(Ut)}}},{key:"detachChildren",value:function(Xe){var Ot=this.mesh.getComponentByEntity(Xe);Ot&&(Ot.children=[]);for(var lt=0;lt<this.hierarchy.getCount();){var Ut;if(((Ut=this.hierarchy.getComponent(lt))===null||Ut===void 0?void 0:Ut.parentID)===Xe){var Jt=this.hierarchy.getEntity(lt);this.detach(Jt)}else++lt}}},{key:"setMeshAABBDirty",value:function(Xe){Xe&&(Xe.aabbDirty=!0)}}]),ot}(),Pe),j=ne()(be.prototype,"hierarchy",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=ne()(be.prototype,"transform",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Je=ne()(be.prototype,"mesh",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be))||Te)},BKMn:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PhotoshopPointerCircle=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.PhotoshopPointerCircle=function(q){var W=q.hsl,Z=(0,P.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":W.l>.5});return C.default.createElement("div",{style:Z.picker})};T.default=z},Ba7A:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Swatch=void 0;var B=Object.assign||function(ne){for(var ie=1;ie<arguments.length;ie++){var te=arguments[ie];for(var ce in te)Object.prototype.hasOwnProperty.call(te,ce)&&(ne[ce]=te[ce])}return ne},C=v("q1tI"),_=W(C),P=v("/FUP"),N=W(P),z=v("japM"),R=v("Nq3d"),q=W(R);function W(ne){return ne&&ne.__esModule?ne:{default:ne}}var Z=13,X=T.Swatch=function(ie){var te=ie.color,ce=ie.style,ee=ie.onClick,Y=ee===void 0?function(){}:ee,le=ie.onHover,re=ie.title,Q=re===void 0?te:re,ge=ie.children,oe=ie.focus,Te=ie.focusStyle,be=Te===void 0?{}:Te,j=te==="transparent",ke=(0,N.default)({default:{swatch:B({background:te,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},ce,oe?be:{})}}),Je=function(Xe){return Y(te,Xe)},Pe=function(Xe){return Xe.keyCode===Z&&Y(te,Xe)},Ae=function(Xe){return le(te,Xe)},ot={};return le&&(ot.onMouseOver=Ae),_.default.createElement("div",B({style:ke.swatch,onClick:Je,title:Q,tabIndex:0,onKeyDown:Pe},ot),ge,j&&_.default.createElement(q.default,{borderRadius:ke.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};T.default=(0,z.handleFocus)(X)},BjIp:function(fe,T,v){var B=v("3z9K"),C=v("98GK");fe.exports=_;function _(P){return B.filter(C(P),function(N){return N.length>1||N.length===1&&P.hasEdge(N[0],N[0])})}},BkyA:function(fe,T,v){var B=v("swpM");fe.exports=C;function C(_){try{B(_)}catch(P){if(P instanceof B.CycleException)return!1;throw P}return!0}},BmQL:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SwatchesColor=void 0;var B=v("q1tI"),C=Z(B),_=v("/FUP"),P=Z(_),N=v("p8yl"),z=Z(N),R=v("TM95"),q=v("ql/k"),W=Z(q);function Z(ne){return ne&&ne.__esModule?ne:{default:ne}}var X=T.SwatchesColor=function(ie){var te=ie.color,ce=ie.onClick,ee=ce===void 0?function(){}:ce,Y=ie.onSwatchHover,le=ie.first,re=ie.last,Q=ie.active,ge=(0,P.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:te,marginBottom:"1px"},check:{color:z.default.getContrastingColor(te),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:le,last:re,active:Q,"color-#FFFFFF":te==="#FFFFFF",transparent:te==="transparent"});return C.default.createElement(R.Swatch,{color:te,style:ge.color,onClick:ee,onHover:Y,focusStyle:{boxShadow:"0 0 4px "+te}},C.default.createElement("div",{style:ge.check},C.default.createElement(W.default,null)))};T.default=X},Bnag:function(fe,T){function v(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},Bu3x:function(fe,T){fe.exports=v;function v(B,C,_){return B[0]=C[0]/_[0],B[1]=C[1]/_[1],B}},C3Dj:function(fe,T){fe.exports=v;function v(B,C){var _=C[0]-B[0],P=C[1]-B[1];return _*_+P*P}},CGoQ:function(fe,T,v){fe.exports=v("M5u/")},CZoQ:function(fe,T){function v(B,C,_){for(var P=_-1,N=B.length;++P<N;)if(B[P]===C)return P;return-1}fe.exports=v},Cq4r:function(fe,T){fe.exports=v;function v(B,C){return B[0]=Math.floor(C[0]),B[1]=Math.floor(C[1]),B}},D9lx:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BindingInWhenOnSyntax=void 0;var B=v("6AGu"),C=v("406g"),_=v("z4Hk"),P=function(){function N(z){this._binding=z,this._bindingWhenSyntax=new _.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new C.BindingOnSyntax(this._binding),this._bindingInSyntax=new B.BindingInSyntax(z)}return N.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},N.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},N.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},N.prototype.when=function(z){return this._bindingWhenSyntax.when(z)},N.prototype.whenTargetNamed=function(z){return this._bindingWhenSyntax.whenTargetNamed(z)},N.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},N.prototype.whenTargetTagged=function(z,R){return this._bindingWhenSyntax.whenTargetTagged(z,R)},N.prototype.whenInjectedInto=function(z){return this._bindingWhenSyntax.whenInjectedInto(z)},N.prototype.whenParentNamed=function(z){return this._bindingWhenSyntax.whenParentNamed(z)},N.prototype.whenParentTagged=function(z,R){return this._bindingWhenSyntax.whenParentTagged(z,R)},N.prototype.whenAnyAncestorIs=function(z){return this._bindingWhenSyntax.whenAnyAncestorIs(z)},N.prototype.whenNoAncestorIs=function(z){return this._bindingWhenSyntax.whenNoAncestorIs(z)},N.prototype.whenAnyAncestorNamed=function(z){return this._bindingWhenSyntax.whenAnyAncestorNamed(z)},N.prototype.whenAnyAncestorTagged=function(z,R){return this._bindingWhenSyntax.whenAnyAncestorTagged(z,R)},N.prototype.whenNoAncestorNamed=function(z){return this._bindingWhenSyntax.whenNoAncestorNamed(z)},N.prototype.whenNoAncestorTagged=function(z,R){return this._bindingWhenSyntax.whenNoAncestorTagged(z,R)},N.prototype.whenAnyAncestorMatches=function(z){return this._bindingWhenSyntax.whenAnyAncestorMatches(z)},N.prototype.whenNoAncestorMatches=function(z){return this._bindingWhenSyntax.whenNoAncestorMatches(z)},N.prototype.onActivation=function(z){return this._bindingOnSyntax.onActivation(z)},N}();T.BindingInWhenOnSyntax=P},DRdP:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PhotoshopButton=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.PhotoshopButton=function(q){var W=q.onClick,Z=q.label,X=q.children,ne=q.active,ie=(0,P.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:ne});return C.default.createElement("div",{style:ie.button,onClick:W},Z||X)};T.default=z},ENEI:function(fe,T,v){"use strict";v.d(T,"a",function(){return z});var B=v("lwsE"),C=v.n(B),_=v("W8MJ"),P=v.n(_),N=v("IOcx"),z=function(){function R(q,W){C()(this,R),this.center=void 0,this.halfExtents=void 0,this.min=N.d.create(),this.max=N.d.create(),this.update(q,W)}return P()(R,[{key:"update",value:function(W,Z){this.center=W||N.d.create(),this.halfExtents=Z||N.d.fromValues(.5,.5,.5),this.min=N.d.sub(this.min,this.center,this.halfExtents),this.max=N.d.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(W,Z){N.d.add(this.center,Z,W),N.d.scale(this.center,this.center,.5),N.d.sub(this.halfExtents,Z,W),N.d.scale(this.halfExtents,this.halfExtents,.5),N.d.copy(this.min,W),N.d.copy(this.max,Z)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(W){var Z=this.center,X=Z[0],ne=Z[1],ie=Z[2],te=this.halfExtents,ce=te[0],ee=te[1],Y=te[2],le=X-ce,re=X+ce,Q=ne-ee,ge=ne+ee,oe=ie-Y,Te=ie+Y,be=W.center,j=be[0],ke=be[1],Je=be[2],Pe=W.halfExtents,Ae=Pe[0],ot=Pe[1],k=Pe[2],Xe=j-Ae,Ot=j+Ae,lt=ke-ot,Ut=ke+ot,Jt=Je-k,nt=Je+k;Xe<le&&(le=Xe),Ot>re&&(re=Ot),lt<Q&&(Q=lt),Ut>ge&&(ge=Ut),Jt<oe&&(oe=Jt),nt>Te&&(Te=nt),Z[0]=(le+re)*.5,Z[1]=(Q+ge)*.5,Z[2]=(oe+Te)*.5,te[0]=(re-le)*.5,te[1]=(ge-Q)*.5,te[2]=(Te-oe)*.5,this.min[0]=le,this.min[1]=Q,this.min[2]=oe,this.max[0]=re,this.max[1]=ge,this.max[2]=Te}},{key:"intersects",value:function(W){var Z=this.getMax(),X=this.getMin(),ne=W.getMax(),ie=W.getMin();return X[0]<=ne[0]&&Z[0]>=ie[0]&&X[1]<=ne[1]&&Z[1]>=ie[1]&&X[2]<=ne[2]&&Z[2]>=ie[2]}},{key:"containsPoint",value:function(W){var Z=this.getMin(),X=this.getMax();return!(W[0]<Z[0]||W[0]>X[0]||W[1]<Z[1]||W[1]>X[1]||W[2]<Z[2]||W[2]>X[2])}},{key:"getNegativeFarPoint",value:function(W){return W.pnVertexFlag===273?N.d.copy(N.d.create(),this.min):W.pnVertexFlag===272?N.d.fromValues(this.min[0],this.min[1],this.max[2]):W.pnVertexFlag===257?N.d.fromValues(this.min[0],this.max[1],this.min[2]):W.pnVertexFlag===256?N.d.fromValues(this.min[0],this.max[1],this.max[2]):W.pnVertexFlag===17?N.d.fromValues(this.max[0],this.min[1],this.min[2]):W.pnVertexFlag===16?N.d.fromValues(this.max[0],this.min[1],this.max[2]):W.pnVertexFlag===1?N.d.fromValues(this.max[0],this.max[1],this.min[2]):N.d.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(W){return W.pnVertexFlag===273?N.d.copy(N.d.create(),this.max):W.pnVertexFlag===272?N.d.fromValues(this.max[0],this.max[1],this.min[2]):W.pnVertexFlag===257?N.d.fromValues(this.max[0],this.min[1],this.max[2]):W.pnVertexFlag===256?N.d.fromValues(this.max[0],this.min[1],this.min[2]):W.pnVertexFlag===17?N.d.fromValues(this.min[0],this.max[1],this.max[2]):W.pnVertexFlag===16?N.d.fromValues(this.min[0],this.max[1],this.min[2]):W.pnVertexFlag===1?N.d.fromValues(this.min[0],this.min[1],this.max[2]):N.d.fromValues(this.min[0],this.min[1],this.min[2])}}]),R}()},EVdn:function(fe,T,v){var B,C;/*!
* jQuery JavaScript Library v3.7.0
* https://jquery.com/
*
* Copyright OpenJS Foundation and other contributors
* Released under the MIT license
* https://jquery.org/license
*
* Date: 2023-05-11T18:29Z
*/(function(_,P){"use strict";typeof fe.exports=="object"?fe.exports=_.document?P(_,!0):function(N){if(!N.document)throw new Error("jQuery requires a window with a document");return P(N)}:P(_)})(typeof window!="undefined"?window:this,function(_,P){"use strict";var N=[],z=Object.getPrototypeOf,R=N.slice,q=N.flat?function(U){return N.flat.call(U)}:function(U){return N.concat.apply([],U)},W=N.push,Z=N.indexOf,X={},ne=X.toString,ie=X.hasOwnProperty,te=ie.toString,ce=te.call(Object),ee={},Y=function(S){return typeof S=="function"&&typeof S.nodeType!="number"&&typeof S.item!="function"},le=function(S){return S!=null&&S===S.window},re=_.document,Q={type:!0,src:!0,nonce:!0,noModule:!0};function ge(U,S,G){G=G||re;var V,ae,me=G.createElement("script");if(me.text=U,S)for(V in Q)ae=S[V]||S.getAttribute&&S.getAttribute(V),ae&&me.setAttribute(V,ae);G.head.appendChild(me).parentNode.removeChild(me)}function oe(U){return U==null?U+"":typeof U=="object"||typeof U=="function"?X[ne.call(U)]||"object":typeof U}var Te="3.7.0",be=/HTML$/i,j=function U(S,G){return new U.fn.init(S,G)};j.fn=j.prototype={jquery:Te,constructor:j,length:0,toArray:function(){return R.call(this)},get:function(S){return S==null?R.call(this):S<0?this[S+this.length]:this[S]},pushStack:function(S){var G=j.merge(this.constructor(),S);return G.prevObject=this,G},each:function(S){return j.each(this,S)},map:function(S){return this.pushStack(j.map(this,function(G,V){return S.call(G,V,G)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(j.grep(this,function(S,G){return(G+1)%2}))},odd:function(){return this.pushStack(j.grep(this,function(S,G){return G%2}))},eq:function(S){var G=this.length,V=+S+(S<0?G:0);return this.pushStack(V>=0&&V<G?[this[V]]:[])},end:function(){return this.prevObject||this.constructor()},push:W,sort:N.sort,splice:N.splice},j.extend=j.fn.extend=function(){var U,S,G,V,ae,me,ye=arguments[0]||{},Fe=1,rt=arguments.length,pt=!1;for(typeof ye=="boolean"&&(pt=ye,ye=arguments[Fe]||{},Fe++),typeof ye!="object"&&!Y(ye)&&(ye={}),Fe===rt&&(ye=this,Fe--);Fe<rt;Fe++)if((U=arguments[Fe])!=null)for(S in U)V=U[S],!(S==="__proto__"||ye===V)&&(pt&&V&&(j.isPlainObject(V)||(ae=Array.isArray(V)))?(G=ye[S],ae&&!Array.isArray(G)?me=[]:!ae&&!j.isPlainObject(G)?me={}:me=G,ae=!1,ye[S]=j.extend(pt,me,V)):V!==void 0&&(ye[S]=V));return ye},j.extend({expando:"jQuery"+(Te+Math.random()).replace(/\D/g,""),isReady:!0,error:function(S){throw new Error(S)},noop:function(){},isPlainObject:function(S){var G,V;return!S||ne.call(S)!=="[object Object]"?!1:(G=z(S),G?(V=ie.call(G,"constructor")&&G.constructor,typeof V=="function"&&te.call(V)===ce):!0)},isEmptyObject:function(S){var G;for(G in S)return!1;return!0},globalEval:function(S,G,V){ge(S,{nonce:G&&G.nonce},V)},each:function(S,G){var V,ae=0;if(ke(S))for(V=S.length;ae<V&&G.call(S[ae],ae,S[ae])!==!1;ae++);else for(ae in S)if(G.call(S[ae],ae,S[ae])===!1)break;return S},text:function(S){var G,V="",ae=0,me=S.nodeType;if(me){if(me===1||me===9||me===11)return S.textContent;if(me===3||me===4)return S.nodeValue}else for(;G=S[ae++];)V+=j.text(G);return V},makeArray:function(S,G){var V=G||[];return S!=null&&(ke(Object(S))?j.merge(V,typeof S=="string"?[S]:S):W.call(V,S)),V},inArray:function(S,G,V){return G==null?-1:Z.call(G,S,V)},isXMLDoc:function(S){var G=S&&S.namespaceURI,V=S&&(S.ownerDocument||S).documentElement;return!be.test(G||V&&V.nodeName||"HTML")},merge:function(S,G){for(var V=+G.length,ae=0,me=S.length;ae<V;ae++)S[me++]=G[ae];return S.length=me,S},grep:function(S,G,V){for(var ae,me=[],ye=0,Fe=S.length,rt=!V;ye<Fe;ye++)ae=!G(S[ye],ye),ae!==rt&&me.push(S[ye]);return me},map:function(S,G,V){var ae,me,ye=0,Fe=[];if(ke(S))for(ae=S.length;ye<ae;ye++)me=G(S[ye],ye,V),me!=null&&Fe.push(me);else for(ye in S)me=G(S[ye],ye,V),me!=null&&Fe.push(me);return q(Fe)},guid:1,support:ee}),typeof Symbol=="function"&&(j.fn[Symbol.iterator]=N[Symbol.iterator]),j.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(U,S){X["[object "+S+"]"]=S.toLowerCase()});function ke(U){var S=!!U&&"length"in U&&U.length,G=oe(U);return Y(U)||le(U)?!1:G==="array"||S===0||typeof S=="number"&&S>0&&S-1 in U}function Je(U,S){return U.nodeName&&U.nodeName.toLowerCase()===S.toLowerCase()}var Pe=N.pop,Ae=N.sort,ot=N.splice,k="[\\x20\\t\\r\\n\\f]",Xe=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g");j.contains=function(U,S){var G=S&&S.parentNode;return U===G||!!(G&&G.nodeType===1&&(U.contains?U.contains(G):U.compareDocumentPosition&&U.compareDocumentPosition(G)&16))};var Ot=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function lt(U,S){return S?U==="\0"?"\uFFFD":U.slice(0,-1)+"\\"+U.charCodeAt(U.length-1).toString(16)+" ":"\\"+U}j.escapeSelector=function(U){return(U+"").replace(Ot,lt)};var Ut=re,Jt=W;(function(){var U,S,G,V,ae,me=Jt,ye,Fe,rt,pt,Xt,fn=j.expando,Kn=0,Wt=0,Dn=$s(),Fr=$s(),Cr=$s(),Ji=$s(),go=function(we,Ue){return we===Ue&&(ae=!0),0},Ca="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ao="(?:\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ba="\\["+k+"*("+ao+")(?:"+k+"*([*^$|!~]?=)"+k+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ao+"))|)"+k+"*\\]",$r=":("+ao+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ba+")*)|.*)\\)|)",Qo=new RegExp(k+"+","g"),Li=new RegExp("^"+k+"*,"+k+"*"),ia=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),aa=new RegExp(k+"|>"),qu=new RegExp($r),Da=new RegExp("^"+ao+"$"),Mo={ID:new RegExp("^#("+ao+")"),CLASS:new RegExp("^\\.("+ao+")"),TAG:new RegExp("^("+ao+"|[*])"),ATTR:new RegExp("^"+Ba),PSEUDO:new RegExp("^"+$r),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+Ca+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},Hs=/^(?:input|select|textarea|button)$/i,Ws=/^h\d$/i,ys=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,oo=/[+~]/,qo=new RegExp("\\\\[\\da-fA-F]{1,6}"+k+"?|\\\\([^\\r\\n\\f])","g"),so=function(we,Ue){var et="0x"+we.slice(1)-65536;return Ue||(et<0?String.fromCharCode(et+65536):String.fromCharCode(et>>10|55296,et&1023|56320))},Ja=function(){bs()},Bu=K(function(_e){return _e.disabled===!0&&Je(_e,"fieldset")},{dir:"parentNode",next:"legend"});function es(){try{return ye.activeElement}catch(_e){}}try{me.apply(N=R.call(Ut.childNodes),Ut.childNodes),N[Ut.childNodes.length].nodeType}catch(_e){me={apply:function(Ue,et){Jt.apply(Ue,R.call(et))},call:function(Ue){Jt.apply(Ue,R.call(arguments,1))}}}function Ui(_e,we,Ue,et){var Se,De,Ke,kt,Vt,vn,In,xn=we&&we.ownerDocument,Mr=we?we.nodeType:9;if(Ue=Ue||[],typeof _e!="string"||!_e||Mr!==1&&Mr!==9&&Mr!==11)return Ue;if(!et&&(bs(we),we=we||ye,rt)){if(Mr!==11&&(Vt=ys.exec(_e)))if(Se=Vt[1]){if(Mr===9)if(Ke=we.getElementById(Se)){if(Ke.id===Se)return me.call(Ue,Ke),Ue}else return Ue;else if(xn&&(Ke=xn.getElementById(Se))&&Ui.contains(we,Ke)&&Ke.id===Se)return me.call(Ue,Ke),Ue}else{if(Vt[2])return me.apply(Ue,we.getElementsByTagName(_e)),Ue;if((Se=Vt[3])&&we.getElementsByClassName)return me.apply(Ue,we.getElementsByClassName(Se)),Ue}if(!Ji[_e+" "]&&(!pt||!pt.test(_e))){if(In=_e,xn=we,Mr===1&&(aa.test(_e)||ia.test(_e))){for(xn=oo.test(_e)&&Nl(we.parentNode)||we,(xn!=we||!ee.scope)&&((kt=we.getAttribute("id"))?kt=j.escapeSelector(kt):we.setAttribute("id",kt=fn)),vn=y(_e),De=vn.length;De--;)vn[De]=(kt?"#"+kt:":scope")+" "+M(vn[De]);In=vn.join(",")}try{return me.apply(Ue,xn.querySelectorAll(In)),Ue}catch(xr){Ji(_e,!0)}finally{kt===fn&&we.removeAttribute("id")}}}return Lt(_e.replace(Xe,"$1"),we,Ue,et)}function $s(){var _e=[];function we(Ue,et){return _e.push(Ue+" ")>S.cacheLength&&delete we[_e.shift()],we[Ue+" "]=et}return we}function _o(_e){return _e[fn]=!0,_e}function Ms(_e){var we=ye.createElement("fieldset");try{return!!_e(we)}catch(Ue){return!1}finally{we.parentNode&&we.parentNode.removeChild(we),we=null}}function af(_e){return function(we){return Je(we,"input")&&we.type===_e}}function Rl(_e){return function(we){return(Je(we,"input")||Je(we,"button"))&&we.type===_e}}function uc(_e){return function(we){return"form"in we?we.parentNode&&we.disabled===!1?"label"in we?"label"in we.parentNode?we.parentNode.disabled===_e:we.disabled===_e:we.isDisabled===_e||we.isDisabled!==!_e&&Bu(we)===_e:we.disabled===_e:"label"in we?we.disabled===_e:!1}}function Ao(_e){return _o(function(we){return we=+we,_o(function(Ue,et){for(var Se,De=_e([],Ue.length,we),Ke=De.length;Ke--;)Ue[Se=De[Ke]]&&(Ue[Se]=!(et[Se]=Ue[Se]))})})}function Nl(_e){return _e&&typeof _e.getElementsByTagName!="undefined"&&_e}function bs(_e){var we,Ue=_e?_e.ownerDocument||_e:Ut;return Ue==ye||Ue.nodeType!==9||!Ue.documentElement||(ye=Ue,Fe=ye.documentElement,rt=!j.isXMLDoc(ye),Xt=Fe.matches||Fe.webkitMatchesSelector||Fe.msMatchesSelector,Ut!=ye&&(we=ye.defaultView)&&we.top!==we&&we.addEventListener("unload",Ja),ee.getById=Ms(function(et){return Fe.appendChild(et).id=j.expando,!ye.getElementsByName||!ye.getElementsByName(j.expando).length}),ee.disconnectedMatch=Ms(function(et){return Xt.call(et,"*")}),ee.scope=Ms(function(){return ye.querySelectorAll(":scope")}),ee.cssHas=Ms(function(){try{return ye.querySelector(":has(*,:jqfake)"),!1}catch(et){return!0}}),ee.getById?(S.filter.ID=function(et){var Se=et.replace(qo,so);return function(De){return De.getAttribute("id")===Se}},S.find.ID=function(et,Se){if(typeof Se.getElementById!="undefined"&&rt){var De=Se.getElementById(et);return De?[De]:[]}}):(S.filter.ID=function(et){var Se=et.replace(qo,so);return function(De){var Ke=typeof De.getAttributeNode!="undefined"&&De.getAttributeNode("id");return Ke&&Ke.value===Se}},S.find.ID=function(et,Se){if(typeof Se.getElementById!="undefined"&&rt){var De,Ke,kt,Vt=Se.getElementById(et);if(Vt){if(De=Vt.getAttributeNode("id"),De&&De.value===et)return[Vt];for(kt=Se.getElementsByName(et),Ke=0;Vt=kt[Ke++];)if(De=Vt.getAttributeNode("id"),De&&De.value===et)return[Vt]}return[]}}),S.find.TAG=function(et,Se){return typeof Se.getElementsByTagName!="undefined"?Se.getElementsByTagName(et):Se.querySelectorAll(et)},S.find.CLASS=function(et,Se){if(typeof Se.getElementsByClassName!="undefined"&&rt)return Se.getElementsByClassName(et)},pt=[],Ms(function(et){var Se;Fe.appendChild(et).innerHTML="<a id='"+fn+"' href='' disabled='disabled'></a><select id='"+fn+"-\r\\' disabled='disabled'><option selected=''></option></select>",et.querySelectorAll("[selected]").length||pt.push("\\["+k+"*(?:value|"+Ca+")"),et.querySelectorAll("[id~="+fn+"-]").length||pt.push("~="),et.querySelectorAll("a#"+fn+"+*").length||pt.push(".#.+[+~]"),et.querySelectorAll(":checked").length||pt.push(":checked"),Se=ye.createElement("input"),Se.setAttribute("type","hidden"),et.appendChild(Se).setAttribute("name","D"),Fe.appendChild(et).disabled=!0,et.querySelectorAll(":disabled").length!==2&&pt.push(":enabled",":disabled"),Se=ye.createElement("input"),Se.setAttribute("name",""),et.appendChild(Se),et.querySelectorAll("[name='']").length||pt.push("\\["+k+"*name"+k+"*="+k+`*(?:''|"")`)}),ee.cssHas||pt.push(":has"),pt=pt.length&&new RegExp(pt.join("|")),go=function(Se,De){if(Se===De)return ae=!0,0;var Ke=!Se.compareDocumentPosition-!De.compareDocumentPosition;return Ke||(Ke=(Se.ownerDocument||Se)==(De.ownerDocument||De)?Se.compareDocumentPosition(De):1,Ke&1||!ee.sortDetached&&De.compareDocumentPosition(Se)===Ke?Se===ye||Se.ownerDocument==Ut&&Ui.contains(Ut,Se)?-1:De===ye||De.ownerDocument==Ut&&Ui.contains(Ut,De)?1:V?Z.call(V,Se)-Z.call(V,De):0:Ke&4?-1:1)}),ye}Ui.matches=function(_e,we){return Ui(_e,null,null,we)},Ui.matchesSelector=function(_e,we){if(bs(_e),rt&&!Ji[we+" "]&&(!pt||!pt.test(we)))try{var Ue=Xt.call(_e,we);if(Ue||ee.disconnectedMatch||_e.document&&_e.document.nodeType!==11)return Ue}catch(et){Ji(we,!0)}return Ui(we,ye,null,[_e]).length>0},Ui.contains=function(_e,we){return(_e.ownerDocument||_e)!=ye&&bs(_e),j.contains(_e,we)},Ui.attr=function(_e,we){(_e.ownerDocument||_e)!=ye&&bs(_e);var Ue=S.attrHandle[we.toLowerCase()],et=Ue&&ie.call(S.attrHandle,we.toLowerCase())?Ue(_e,we,!rt):void 0;return et!==void 0?et:_e.getAttribute(we)},Ui.error=function(_e){throw new Error("Syntax error, unrecognized expression: "+_e)},j.uniqueSort=function(_e){var we,Ue=[],et=0,Se=0;if(ae=!ee.sortStable,V=!ee.sortStable&&R.call(_e,0),Ae.call(_e,go),ae){for(;we=_e[Se++];)we===_e[Se]&&(et=Ue.push(Se));for(;et--;)ot.call(_e,Ue[et],1)}return V=null,_e},j.fn.uniqueSort=function(){return this.pushStack(j.uniqueSort(R.apply(this)))},S=j.expr={cacheLength:50,createPseudo:_o,match:Mo,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(we){return we[1]=we[1].replace(qo,so),we[3]=(we[3]||we[4]||we[5]||"").replace(qo,so),we[2]==="~="&&(we[3]=" "+we[3]+" "),we.slice(0,4)},CHILD:function(we){return we[1]=we[1].toLowerCase(),we[1].slice(0,3)==="nth"?(we[3]||Ui.error(we[0]),we[4]=+(we[4]?we[5]+(we[6]||1):2*(we[3]==="even"||we[3]==="odd")),we[5]=+(we[7]+we[8]||we[3]==="odd")):we[3]&&Ui.error(we[0]),we},PSEUDO:function(we){var Ue,et=!we[6]&&we[2];return Mo.CHILD.test(we[0])?null:(we[3]?we[2]=we[4]||we[5]||"":et&&qu.test(et)&&(Ue=y(et,!0))&&(Ue=et.indexOf(")",et.length-Ue)-et.length)&&(we[0]=we[0].slice(0,Ue),we[2]=et.slice(0,Ue)),we.slice(0,3))}},filter:{TAG:function(we){var Ue=we.replace(qo,so).toLowerCase();return we==="*"?function(){return!0}:function(et){return Je(et,Ue)}},CLASS:function(we){var Ue=Dn[we+" "];return Ue||(Ue=new RegExp("(^|"+k+")"+we+"("+k+"|$)"))&&Dn(we,function(et){return Ue.test(typeof et.className=="string"&&et.className||typeof et.getAttribute!="undefined"&&et.getAttribute("class")||"")})},ATTR:function(we,Ue,et){return function(Se){var De=Ui.attr(Se,we);return De==null?Ue==="!=":Ue?(De+="",Ue==="="?De===et:Ue==="!="?De!==et:Ue==="^="?et&&De.indexOf(et)===0:Ue==="*="?et&&De.indexOf(et)>-1:Ue==="$="?et&&De.slice(-et.length)===et:Ue==="~="?(" "+De.replace(Qo," ")+" ").indexOf(et)>-1:Ue==="|="?De===et||De.slice(0,et.length+1)===et+"-":!1):!0}},CHILD:function(we,Ue,et,Se,De){var Ke=we.slice(0,3)!=="nth",kt=we.slice(-4)!=="last",Vt=Ue==="of-type";return Se===1&&De===0?function(vn){return!!vn.parentNode}:function(vn,In,xn){var Mr,xr,Er,Tr,yi,Xr=Ke!==kt?"nextSibling":"previousSibling",pi=vn.parentNode,jr=Vt&&vn.nodeName.toLowerCase(),Dr=!xn&&!Vt,va=!1;if(pi){if(Ke){for(;Xr;){for(Er=vn;Er=Er[Xr];)if(Vt?Je(Er,jr):Er.nodeType===1)return!1;yi=Xr=we==="only"&&!yi&&"nextSibling"}return!0}if(yi=[kt?pi.firstChild:pi.lastChild],kt&&Dr){for(xr=pi[fn]||(pi[fn]={}),Mr=xr[we]||[],Tr=Mr[0]===Kn&&Mr[1],va=Tr&&Mr[2],Er=Tr&&pi.childNodes[Tr];Er=++Tr&&Er&&Er[Xr]||(va=Tr=0)||yi.pop();)if(Er.nodeType===1&&++va&&Er===vn){xr[we]=[Kn,Tr,va];break}}else if(Dr&&(xr=vn[fn]||(vn[fn]={}),Mr=xr[we]||[],Tr=Mr[0]===Kn&&Mr[1],va=Tr),va===!1)for(;(Er=++Tr&&Er&&Er[Xr]||(va=Tr=0)||yi.pop())&&!((Vt?Je(Er,jr):Er.nodeType===1)&&++va&&(Dr&&(xr=Er[fn]||(Er[fn]={}),xr[we]=[Kn,va]),Er===vn)););return va-=De,va===Se||va%Se==0&&va/Se>=0}}},PSEUDO:function(we,Ue){var et,Se=S.pseudos[we]||S.setFilters[we.toLowerCase()]||Ui.error("unsupported pseudo: "+we);return Se[fn]?Se(Ue):Se.length>1?(et=[we,we,"",Ue],S.setFilters.hasOwnProperty(we.toLowerCase())?_o(function(De,Ke){for(var kt,Vt=Se(De,Ue),vn=Vt.length;vn--;)kt=Z.call(De,Vt[vn]),De[kt]=!(Ke[kt]=Vt[vn])}):function(De){return Se(De,0,et)}):Se}},pseudos:{not:_o(function(_e){var we=[],Ue=[],et=Ct(_e.replace(Xe,"$1"));return et[fn]?_o(function(Se,De,Ke,kt){for(var Vt,vn=et(Se,null,kt,[]),In=Se.length;In--;)(Vt=vn[In])&&(Se[In]=!(De[In]=Vt))}):function(Se,De,Ke){return we[0]=Se,et(we,null,Ke,Ue),we[0]=null,!Ue.pop()}}),has:_o(function(_e){return function(we){return Ui(_e,we).length>0}}),contains:_o(function(_e){return _e=_e.replace(qo,so),function(we){return(we.textContent||j.text(we)).indexOf(_e)>-1}}),lang:_o(function(_e){return Da.test(_e||"")||Ui.error("unsupported lang: "+_e),_e=_e.replace(qo,so).toLowerCase(),function(we){var Ue;do if(Ue=rt?we.lang:we.getAttribute("xml:lang")||we.getAttribute("lang"))return Ue=Ue.toLowerCase(),Ue===_e||Ue.indexOf(_e+"-")===0;while((we=we.parentNode)&&we.nodeType===1);return!1}}),target:function(we){var Ue=_.location&&_.location.hash;return Ue&&Ue.slice(1)===we.id},root:function(we){return we===Fe},focus:function(we){return we===es()&&ye.hasFocus()&&!!(we.type||we.href||~we.tabIndex)},enabled:uc(!1),disabled:uc(!0),checked:function(we){return Je(we,"input")&&!!we.checked||Je(we,"option")&&!!we.selected},selected:function(we){return we.parentNode&&we.parentNode.selectedIndex,we.selected===!0},empty:function(we){for(we=we.firstChild;we;we=we.nextSibling)if(we.nodeType<6)return!1;return!0},parent:function(we){return!S.pseudos.empty(we)},header:function(we){return Ws.test(we.nodeName)},input:function(we){return Hs.test(we.nodeName)},button:function(we){return Je(we,"input")&&we.type==="button"||Je(we,"button")},text:function(we){var Ue;return Je(we,"input")&&we.type==="text"&&((Ue=we.getAttribute("type"))==null||Ue.toLowerCase()==="text")},first:Ao(function(){return[0]}),last:Ao(function(_e,we){return[we-1]}),eq:Ao(function(_e,we,Ue){return[Ue<0?Ue+we:Ue]}),even:Ao(function(_e,we){for(var Ue=0;Ue<we;Ue+=2)_e.push(Ue);return _e}),odd:Ao(function(_e,we){for(var Ue=1;Ue<we;Ue+=2)_e.push(Ue);return _e}),lt:Ao(function(_e,we,Ue){var et;for(Ue<0?et=Ue+we:Ue>we?et=we:et=Ue;--et>=0;)_e.push(et);return _e}),gt:Ao(function(_e,we,Ue){for(var et=Ue<0?Ue+we:Ue;++et<we;)_e.push(et);return _e})}},S.pseudos.nth=S.pseudos.eq;for(U in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[U]=af(U);for(U in{submit:!0,reset:!0})S.pseudos[U]=Rl(U);function el(){}el.prototype=S.filters=S.pseudos,S.setFilters=new el;function y(_e,we){var Ue,et,Se,De,Ke,kt,Vt,vn=Fr[_e+" "];if(vn)return we?0:vn.slice(0);for(Ke=_e,kt=[],Vt=S.preFilter;Ke;){(!Ue||(et=Li.exec(Ke)))&&(et&&(Ke=Ke.slice(et[0].length)||Ke),kt.push(Se=[])),Ue=!1,(et=ia.exec(Ke))&&(Ue=et.shift(),Se.push({value:Ue,type:et[0].replace(Xe," ")}),Ke=Ke.slice(Ue.length));for(De in S.filter)(et=Mo[De].exec(Ke))&&(!Vt[De]||(et=Vt[De](et)))&&(Ue=et.shift(),Se.push({value:Ue,type:De,matches:et}),Ke=Ke.slice(Ue.length));if(!Ue)break}return we?Ke.length:Ke?Ui.error(_e):Fr(_e,kt).slice(0)}function M(_e){for(var we=0,Ue=_e.length,et="";we<Ue;we++)et+=_e[we].value;return et}function K(_e,we,Ue){var et=we.dir,Se=we.next,De=Se||et,Ke=Ue&&De==="parentNode",kt=Wt++;return we.first?function(Vt,vn,In){for(;Vt=Vt[et];)if(Vt.nodeType===1||Ke)return _e(Vt,vn,In);return!1}:function(Vt,vn,In){var xn,Mr,xr=[Kn,kt];if(In){for(;Vt=Vt[et];)if((Vt.nodeType===1||Ke)&&_e(Vt,vn,In))return!0}else for(;Vt=Vt[et];)if(Vt.nodeType===1||Ke)if(Mr=Vt[fn]||(Vt[fn]={}),Se&&Je(Vt,Se))Vt=Vt[et]||Vt;else{if((xn=Mr[De])&&xn[0]===Kn&&xn[1]===kt)return xr[2]=xn[2];if(Mr[De]=xr,xr[2]=_e(Vt,vn,In))return!0}return!1}}function he(_e){return _e.length>1?function(we,Ue,et){for(var Se=_e.length;Se--;)if(!_e[Se](we,Ue,et))return!1;return!0}:_e[0]}function Ce(_e,we,Ue){for(var et=0,Se=we.length;et<Se;et++)Ui(_e,we[et],Ue);return Ue}function Re(_e,we,Ue,et,Se){for(var De,Ke=[],kt=0,Vt=_e.length,vn=we!=null;kt<Vt;kt++)(De=_e[kt])&&(!Ue||Ue(De,et,Se))&&(Ke.push(De),vn&&we.push(kt));return Ke}function We(_e,we,Ue,et,Se,De){return et&&!et[fn]&&(et=We(et)),Se&&!Se[fn]&&(Se=We(Se,De)),_o(function(Ke,kt,Vt,vn){var In,xn,Mr,xr,Er=[],Tr=[],yi=kt.length,Xr=Ke||Ce(we||"*",Vt.nodeType?[Vt]:Vt,[]),pi=_e&&(Ke||!we)?Re(Xr,Er,_e,Vt,vn):Xr;if(Ue?(xr=Se||(Ke?_e:yi||et)?[]:kt,Ue(pi,xr,Vt,vn)):xr=pi,et)for(In=Re(xr,Tr),et(In,[],Vt,vn),xn=In.length;xn--;)(Mr=In[xn])&&(xr[Tr[xn]]=!(pi[Tr[xn]]=Mr));if(Ke){if(Se||_e){if(Se){for(In=[],xn=xr.length;xn--;)(Mr=xr[xn])&&In.push(pi[xn]=Mr);Se(null,xr=[],In,vn)}for(xn=xr.length;xn--;)(Mr=xr[xn])&&(In=Se?Z.call(Ke,Mr):Er[xn])>-1&&(Ke[In]=!(kt[In]=Mr))}}else xr=Re(xr===kt?xr.splice(yi,xr.length):xr),Se?Se(null,kt,xr,vn):me.apply(kt,xr)})}function Ye(_e){for(var we,Ue,et,Se=_e.length,De=S.relative[_e[0].type],Ke=De||S.relative[" "],kt=De?1:0,Vt=K(function(xn){return xn===we},Ke,!0),vn=K(function(xn){return Z.call(we,xn)>-1},Ke,!0),In=[function(xn,Mr,xr){var Er=!De&&(xr||Mr!=G)||((we=Mr).nodeType?Vt(xn,Mr,xr):vn(xn,Mr,xr));return we=null,Er}];kt<Se;kt++)if(Ue=S.relative[_e[kt].type])In=[K(he(In),Ue)];else{if(Ue=S.filter[_e[kt].type].apply(null,_e[kt].matches),Ue[fn]){for(et=++kt;et<Se&&!S.relative[_e[et].type];et++);return We(kt>1&&he(In),kt>1&&M(_e.slice(0,kt-1).concat({value:_e[kt-2].type===" "?"*":""})).replace(Xe,"$1"),Ue,kt<et&&Ye(_e.slice(kt,et)),et<Se&&Ye(_e=_e.slice(et)),et<Se&&M(_e))}In.push(Ue)}return he(In)}function ht(_e,we){var Ue=we.length>0,et=_e.length>0,Se=function(Ke,kt,Vt,vn,In){var xn,Mr,xr,Er=0,Tr="0",yi=Ke&&[],Xr=[],pi=G,jr=Ke||et&&S.find.TAG("*",In),Dr=Kn+=pi==null?1:Math.random()||.1,va=jr.length;for(In&&(G=kt==ye||kt||In);Tr!==va&&(xn=jr[Tr])!=null;Tr++){if(et&&xn){for(Mr=0,!kt&&xn.ownerDocument!=ye&&(bs(xn),Vt=!rt);xr=_e[Mr++];)if(xr(xn,kt||ye,Vt)){me.call(vn,xn);break}In&&(Kn=Dr)}Ue&&((xn=!xr&&xn)&&Er--,Ke&&yi.push(xn))}if(Er+=Tr,Ue&&Tr!==Er){for(Mr=0;xr=we[Mr++];)xr(yi,Xr,kt,Vt);if(Ke){if(Er>0)for(;Tr--;)yi[Tr]||Xr[Tr]||(Xr[Tr]=Pe.call(vn));Xr=Re(Xr)}me.apply(vn,Xr),In&&!Ke&&Xr.length>0&&Er+we.length>1&&j.uniqueSort(vn)}return In&&(Kn=Dr,G=pi),yi};return Ue?_o(Se):Se}function Ct(_e,we){var Ue,et=[],Se=[],De=Cr[_e+" "];if(!De){for(we||(we=y(_e)),Ue=we.length;Ue--;)De=Ye(we[Ue]),De[fn]?et.push(De):Se.push(De);De=Cr(_e,ht(Se,et)),De.selector=_e}return De}function Lt(_e,we,Ue,et){var Se,De,Ke,kt,Vt,vn=typeof _e=="function"&&_e,In=!et&&y(_e=vn.selector||_e);if(Ue=Ue||[],In.length===1){if(De=In[0]=In[0].slice(0),De.length>2&&(Ke=De[0]).type==="ID"&&we.nodeType===9&&rt&&S.relative[De[1].type]){if(we=(S.find.ID(Ke.matches[0].replace(qo,so),we)||[])[0],we)vn&&(we=we.parentNode);else return Ue;_e=_e.slice(De.shift().value.length)}for(Se=Mo.needsContext.test(_e)?0:De.length;Se--&&(Ke=De[Se],!S.relative[kt=Ke.type]);)if((Vt=S.find[kt])&&(et=Vt(Ke.matches[0].replace(qo,so),oo.test(De[0].type)&&Nl(we.parentNode)||we))){if(De.splice(Se,1),_e=et.length&&M(De),!_e)return me.apply(Ue,et),Ue;break}}return(vn||Ct(_e,In))(et,we,!rt,Ue,!we||oo.test(_e)&&Nl(we.parentNode)||we),Ue}ee.sortStable=fn.split("").sort(go).join("")===fn,bs(),ee.sortDetached=Ms(function(_e){return _e.compareDocumentPosition(ye.createElement("fieldset"))&1}),j.find=Ui,j.expr[":"]=j.expr.pseudos,j.unique=j.uniqueSort,Ui.compile=Ct,Ui.select=Lt,Ui.setDocument=bs,Ui.escape=j.escapeSelector,Ui.getText=j.text,Ui.isXML=j.isXMLDoc,Ui.selectors=j.expr,Ui.support=j.support,Ui.uniqueSort=j.uniqueSort})();var nt=function(S,G,V){for(var ae=[],me=V!==void 0;(S=S[G])&&S.nodeType!==9;)if(S.nodeType===1){if(me&&j(S).is(V))break;ae.push(S)}return ae},$t=function(S,G){for(var V=[];S;S=S.nextSibling)S.nodeType===1&&S!==G&&V.push(S);return V},ze=j.expr.match.needsContext,ue=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function an(U,S,G){return Y(S)?j.grep(U,function(V,ae){return!!S.call(V,ae,V)!==G}):S.nodeType?j.grep(U,function(V){return V===S!==G}):typeof S!="string"?j.grep(U,function(V){return Z.call(S,V)>-1!==G}):j.filter(S,U,G)}j.filter=function(U,S,G){var V=S[0];return G&&(U=":not("+U+")"),S.length===1&&V.nodeType===1?j.find.matchesSelector(V,U)?[V]:[]:j.find.matches(U,j.grep(S,function(ae){return ae.nodeType===1}))},j.fn.extend({find:function(S){var G,V,ae=this.length,me=this;if(typeof S!="string")return this.pushStack(j(S).filter(function(){for(G=0;G<ae;G++)if(j.contains(me[G],this))return!0}));for(V=this.pushStack([]),G=0;G<ae;G++)j.find(S,me[G],V);return ae>1?j.uniqueSort(V):V},filter:function(S){return this.pushStack(an(this,S||[],!1))},not:function(S){return this.pushStack(an(this,S||[],!0))},is:function(S){return!!an(this,typeof S=="string"&&ze.test(S)?j(S):S||[],!1).length}});var nn,Qn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pt=j.fn.init=function(U,S,G){var V,ae;if(!U)return this;if(G=G||nn,typeof U=="string")if(U[0]==="<"&&U[U.length-1]===">"&&U.length>=3?V=[null,U,null]:V=Qn.exec(U),V&&(V[1]||!S))if(V[1]){if(S=S instanceof j?S[0]:S,j.merge(this,j.parseHTML(V[1],S&&S.nodeType?S.ownerDocument||S:re,!0)),ue.test(V[1])&&j.isPlainObject(S))for(V in S)Y(this[V])?this[V](S[V]):this.attr(V,S[V]);return this}else return ae=re.getElementById(V[2]),ae&&(this[0]=ae,this.length=1),this;else return!S||S.jquery?(S||G).find(U):this.constructor(S).find(U);else{if(U.nodeType)return this[0]=U,this.length=1,this;if(Y(U))return G.ready!==void 0?G.ready(U):U(j)}return j.makeArray(U,this)};Pt.prototype=j.fn,nn=j(re);var Tn=/^(?:parents|prev(?:Until|All))/,rr={children:!0,contents:!0,next:!0,prev:!0};j.fn.extend({has:function(S){var G=j(S,this),V=G.length;return this.filter(function(){for(var ae=0;ae<V;ae++)if(j.contains(this,G[ae]))return!0})},closest:function(S,G){var V,ae=0,me=this.length,ye=[],Fe=typeof S!="string"&&j(S);if(!ze.test(S)){for(;ae<me;ae++)for(V=this[ae];V&&V!==G;V=V.parentNode)if(V.nodeType<11&&(Fe?Fe.index(V)>-1:V.nodeType===1&&j.find.matchesSelector(V,S))){ye.push(V);break}}return this.pushStack(ye.length>1?j.uniqueSort(ye):ye)},index:function(S){return S?typeof S=="string"?Z.call(j(S),this[0]):Z.call(this,S.jquery?S[0]:S):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(S,G){return this.pushStack(j.uniqueSort(j.merge(this.get(),j(S,G))))},addBack:function(S){return this.add(S==null?this.prevObject:this.prevObject.filter(S))}});function Qt(U,S){for(;(U=U[S])&&U.nodeType!==1;);return U}j.each({parent:function(S){var G=S.parentNode;return G&&G.nodeType!==11?G:null},parents:function(S){return nt(S,"parentNode")},parentsUntil:function(S,G,V){return nt(S,"parentNode",V)},next:function(S){return Qt(S,"nextSibling")},prev:function(S){return Qt(S,"previousSibling")},nextAll:function(S){return nt(S,"nextSibling")},prevAll:function(S){return nt(S,"previousSibling")},nextUntil:function(S,G,V){return nt(S,"nextSibling",V)},prevUntil:function(S,G,V){return nt(S,"previousSibling",V)},siblings:function(S){return $t((S.parentNode||{}).firstChild,S)},children:function(S){return $t(S.firstChild)},contents:function(S){return S.contentDocument!=null&&z(S.contentDocument)?S.contentDocument:(Je(S,"template")&&(S=S.content||S),j.merge([],S.childNodes))}},function(U,S){j.fn[U]=function(G,V){var ae=j.map(this,S,G);return U.slice(-5)!=="Until"&&(V=G),V&&typeof V=="string"&&(ae=j.filter(V,ae)),this.length>1&&(rr[U]||j.uniqueSort(ae),Tn.test(U)&&ae.reverse()),this.pushStack(ae)}});var sn=/[^\x20\t\r\n\f]+/g;function kn(U){var S={};return j.each(U.match(sn)||[],function(G,V){S[V]=!0}),S}j.Callbacks=function(U){U=typeof U=="string"?kn(U):j.extend({},U);var S,G,V,ae,me=[],ye=[],Fe=-1,rt=function(){for(ae=ae||U.once,V=S=!0;ye.length;Fe=-1)for(G=ye.shift();++Fe<me.length;)me[Fe].apply(G[0],G[1])===!1&&U.stopOnFalse&&(Fe=me.length,G=!1);U.memory||(G=!1),S=!1,ae&&(G?me=[]:me="")},pt={add:function(){return me&&(G&&!S&&(Fe=me.length-1,ye.push(G)),function fn(Kn){j.each(Kn,function(Wt,Dn){Y(Dn)?(!U.unique||!pt.has(Dn))&&me.push(Dn):Dn&&Dn.length&&oe(Dn)!=="string"&&fn(Dn)})}(arguments),G&&!S&&rt()),this},remove:function(){return j.each(arguments,function(fn,Kn){for(var Wt;(Wt=j.inArray(Kn,me,Wt))>-1;)me.splice(Wt,1),Wt<=Fe&&Fe--}),this},has:function(fn){return fn?j.inArray(fn,me)>-1:me.length>0},empty:function(){return me&&(me=[]),this},disable:function(){return ae=ye=[],me=G="",this},disabled:function(){return!me},lock:function(){return ae=ye=[],!G&&!S&&(me=G=""),this},locked:function(){return!!ae},fireWith:function(fn,Kn){return ae||(Kn=Kn||[],Kn=[fn,Kn.slice?Kn.slice():Kn],ye.push(Kn),S||rt()),this},fire:function(){return pt.fireWith(this,arguments),this},fired:function(){return!!V}};return pt};function Sn(U){return U}function st(U){throw U}function At(U,S,G,V){var ae;try{U&&Y(ae=U.promise)?ae.call(U).done(S).fail(G):U&&Y(ae=U.then)?ae.call(U,S,G):S.apply(void 0,[U].slice(V))}catch(me){G.apply(void 0,[me])}}j.extend({Deferred:function(S){var G=[["notify","progress",j.Callbacks("memory"),j.Callbacks("memory"),2],["resolve","done",j.Callbacks("once memory"),j.Callbacks("once memory"),0,"resolved"],["reject","fail",j.Callbacks("once memory"),j.Callbacks("once memory"),1,"rejected"]],V="pending",ae={state:function(){return V},always:function(){return me.done(arguments).fail(arguments),this},catch:function(Fe){return ae.then(null,Fe)},pipe:function(){var Fe=arguments;return j.Deferred(function(rt){j.each(G,function(pt,Xt){var fn=Y(Fe[Xt[4]])&&Fe[Xt[4]];me[Xt[1]](function(){var Kn=fn&&fn.apply(this,arguments);Kn&&Y(Kn.promise)?Kn.promise().progress(rt.notify).done(rt.resolve).fail(rt.reject):rt[Xt[0]+"With"](this,fn?[Kn]:arguments)})}),Fe=null}).promise()},then:function(Fe,rt,pt){var Xt=0;function fn(Kn,Wt,Dn,Fr){return function(){var Cr=this,Ji=arguments,go=function(){var Ba,$r;if(!(Kn<Xt)){if(Ba=Dn.apply(Cr,Ji),Ba===Wt.promise())throw new TypeError("Thenable self-resolution");$r=Ba&&(typeof Ba=="object"||typeof Ba=="function")&&Ba.then,Y($r)?Fr?$r.call(Ba,fn(Xt,Wt,Sn,Fr),fn(Xt,Wt,st,Fr)):(Xt++,$r.call(Ba,fn(Xt,Wt,Sn,Fr),fn(Xt,Wt,st,Fr),fn(Xt,Wt,Sn,Wt.notifyWith))):(Dn!==Sn&&(Cr=void 0,Ji=[Ba]),(Fr||Wt.resolveWith)(Cr,Ji))}},Ca=Fr?go:function(){try{go()}catch(ao){j.Deferred.exceptionHook&&j.Deferred.exceptionHook(ao,Ca.error),Kn+1>=Xt&&(Dn!==st&&(Cr=void 0,Ji=[ao]),Wt.rejectWith(Cr,Ji))}};Kn?Ca():(j.Deferred.getErrorHook?Ca.error=j.Deferred.getErrorHook():j.Deferred.getStackHook&&(Ca.error=j.Deferred.getStackHook()),_.setTimeout(Ca))}}return j.Deferred(function(Kn){G[0][3].add(fn(0,Kn,Y(pt)?pt:Sn,Kn.notifyWith)),G[1][3].add(fn(0,Kn,Y(Fe)?Fe:Sn)),G[2][3].add(fn(0,Kn,Y(rt)?rt:st))}).promise()},promise:function(Fe){return Fe!=null?j.extend(Fe,ae):ae}},me={};return j.each(G,function(ye,Fe){var rt=Fe[2],pt=Fe[5];ae[Fe[1]]=rt.add,pt&&rt.add(function(){V=pt},G[3-ye][2].disable,G[3-ye][3].disable,G[0][2].lock,G[0][3].lock),rt.add(Fe[3].fire),me[Fe[0]]=function(){return me[Fe[0]+"With"](this===me?void 0:this,arguments),this},me[Fe[0]+"With"]=rt.fireWith}),ae.promise(me),S&&S.call(me,me),me},when:function(S){var G=arguments.length,V=G,ae=Array(V),me=R.call(arguments),ye=j.Deferred(),Fe=function(pt){return function(Xt){ae[pt]=this,me[pt]=arguments.length>1?R.call(arguments):Xt,--G||ye.resolveWith(ae,me)}};if(G<=1&&(At(S,ye.done(Fe(V)).resolve,ye.reject,!G),ye.state()==="pending"||Y(me[V]&&me[V].then)))return ye.then();for(;V--;)At(me[V],Fe(V),ye.reject);return ye.promise()}});var vt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;j.Deferred.exceptionHook=function(U,S){_.console&&_.console.warn&&U&&vt.test(U.name)&&_.console.warn("jQuery.Deferred exception: "+U.message,U.stack,S)},j.readyException=function(U){_.setTimeout(function(){throw U})};var _t=j.Deferred();j.fn.ready=function(U){return _t.then(U).catch(function(S){j.readyException(S)}),this},j.extend({isReady:!1,readyWait:1,ready:function(S){(S===!0?--j.readyWait:j.isReady)||(j.isReady=!0,!(S!==!0&&--j.readyWait>0)&&_t.resolveWith(re,[j]))}}),j.ready.then=_t.then;function Kt(){re.removeEventListener("DOMContentLoaded",Kt),_.removeEventListener("load",Kt),j.ready()}re.readyState==="complete"||re.readyState!=="loading"&&!re.documentElement.doScroll?_.setTimeout(j.ready):(re.addEventListener("DOMContentLoaded",Kt),_.addEventListener("load",Kt));var ln=function U(S,G,V,ae,me,ye,Fe){var rt=0,pt=S.length,Xt=V==null;if(oe(V)==="object"){me=!0;for(rt in V)U(S,G,rt,V[rt],!0,ye,Fe)}else if(ae!==void 0&&(me=!0,Y(ae)||(Fe=!0),Xt&&(Fe?(G.call(S,ae),G=null):(Xt=G,G=function(Kn,Wt,Dn){return Xt.call(j(Kn),Dn)})),G))for(;rt<pt;rt++)G(S[rt],V,Fe?ae:ae.call(S[rt],rt,G(S[rt],V)));return me?S:Xt?G.call(S):pt?G(S[0],V):ye},bt=/^-ms-/,A=/-([a-z])/g;function Jn(U,S){return S.toUpperCase()}function Mn(U){return U.replace(bt,"ms-").replace(A,Jn)}var sr=function(S){return S.nodeType===1||S.nodeType===9||!+S.nodeType};function ir(){this.expando=j.expando+ir.uid++}ir.uid=1,ir.prototype={cache:function(S){var G=S[this.expando];return G||(G={},sr(S)&&(S.nodeType?S[this.expando]=G:Object.defineProperty(S,this.expando,{value:G,configurable:!0}))),G},set:function(S,G,V){var ae,me=this.cache(S);if(typeof G=="string")me[Mn(G)]=V;else for(ae in G)me[Mn(ae)]=G[ae];return me},get:function(S,G){return G===void 0?this.cache(S):S[this.expando]&&S[this.expando][Mn(G)]},access:function(S,G,V){return G===void 0||G&&typeof G=="string"&&V===void 0?this.get(S,G):(this.set(S,G,V),V!==void 0?V:G)},remove:function(S,G){var V,ae=S[this.expando];if(ae!==void 0){if(G!==void 0)for(Array.isArray(G)?G=G.map(Mn):(G=Mn(G),G=G in ae?[G]:G.match(sn)||[]),V=G.length;V--;)delete ae[G[V]];(G===void 0||j.isEmptyObject(ae))&&(S.nodeType?S[this.expando]=void 0:delete S[this.expando])}},hasData:function(S){var G=S[this.expando];return G!==void 0&&!j.isEmptyObject(G)}};var Ie=new ir,pe=new ir,Qe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,cn=/[A-Z]/g;function En(U){return U==="true"?!0:U==="false"?!1:U==="null"?null:U===+U+""?+U:Qe.test(U)?JSON.parse(U):U}function lr(U,S,G){var V;if(G===void 0&&U.nodeType===1)if(V="data-"+S.replace(cn,"-$&").toLowerCase(),G=U.getAttribute(V),typeof G=="string"){try{G=En(G)}catch(ae){}pe.set(U,S,G)}else G=void 0;return G}j.extend({hasData:function(S){return pe.hasData(S)||Ie.hasData(S)},data:function(S,G,V){return pe.access(S,G,V)},removeData:function(S,G){pe.remove(S,G)},_data:function(S,G,V){return Ie.access(S,G,V)},_removeData:function(S,G){Ie.remove(S,G)}}),j.fn.extend({data:function(S,G){var V,ae,me,ye=this[0],Fe=ye&&ye.attributes;if(S===void 0){if(this.length&&(me=pe.get(ye),ye.nodeType===1&&!Ie.get(ye,"hasDataAttrs"))){for(V=Fe.length;V--;)Fe[V]&&(ae=Fe[V].name,ae.indexOf("data-")===0&&(ae=Mn(ae.slice(5)),lr(ye,ae,me[ae])));Ie.set(ye,"hasDataAttrs",!0)}return me}return typeof S=="object"?this.each(function(){pe.set(this,S)}):ln(this,function(rt){var pt;if(ye&&rt===void 0)return pt=pe.get(ye,S),pt!==void 0||(pt=lr(ye,S),pt!==void 0)?pt:void 0;this.each(function(){pe.set(this,S,rt)})},null,G,arguments.length>1,null,!0)},removeData:function(S){return this.each(function(){pe.remove(this,S)})}}),j.extend({queue:function(S,G,V){var ae;if(S)return G=(G||"fx")+"queue",ae=Ie.get(S,G),V&&(!ae||Array.isArray(V)?ae=Ie.access(S,G,j.makeArray(V)):ae.push(V)),ae||[]},dequeue:function(S,G){G=G||"fx";var V=j.queue(S,G),ae=V.length,me=V.shift(),ye=j._queueHooks(S,G),Fe=function(){j.dequeue(S,G)};me==="inprogress"&&(me=V.shift(),ae--),me&&(G==="fx"&&V.unshift("inprogress"),delete ye.stop,me.call(S,Fe,ye)),!ae&&ye&&ye.empty.fire()},_queueHooks:function(S,G){var V=G+"queueHooks";return Ie.get(S,V)||Ie.access(S,V,{empty:j.Callbacks("once memory").add(function(){Ie.remove(S,[G+"queue",V])})})}}),j.fn.extend({queue:function(S,G){var V=2;return typeof S!="string"&&(G=S,S="fx",V--),arguments.length<V?j.queue(this[0],S):G===void 0?this:this.each(function(){var ae=j.queue(this,S,G);j._queueHooks(this,S),S==="fx"&&ae[0]!=="inprogress"&&j.dequeue(this,S)})},dequeue:function(S){return this.each(function(){j.dequeue(this,S)})},clearQueue:function(S){return this.queue(S||"fx",[])},promise:function(S,G){var V,ae=1,me=j.Deferred(),ye=this,Fe=this.length,rt=function(){--ae||me.resolveWith(ye,[ye])};for(typeof S!="string"&&(G=S,S=void 0),S=S||"fx";Fe--;)V=Ie.get(ye[Fe],S+"queueHooks"),V&&V.empty&&(ae++,V.empty.add(rt));return rt(),me.promise(G)}});var gi=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,cr=new RegExp("^(?:([+-])=|)("+gi+")([a-z%]*)$","i"),wr=["Top","Right","Bottom","Left"],pr=re.documentElement,Sr=function(S){return j.contains(S.ownerDocument,S)},Qr={composed:!0};pr.getRootNode&&(Sr=function(S){return j.contains(S.ownerDocument,S)||S.getRootNode(Qr)===S.ownerDocument});var ya=function(S,G){return S=G||S,S.style.display==="none"||S.style.display===""&&Sr(S)&&j.css(S,"display")==="none"};function Ki(U,S,G,V){var ae,me,ye=20,Fe=V?function(){return V.cur()}:function(){return j.css(U,S,"")},rt=Fe(),pt=G&&G[3]||(j.cssNumber[S]?"":"px"),Xt=U.nodeType&&(j.cssNumber[S]||pt!=="px"&&+rt)&&cr.exec(j.css(U,S));if(Xt&&Xt[3]!==pt){for(rt=rt/2,pt=pt||Xt[3],Xt=+rt||1;ye--;)j.style(U,S,Xt+pt),(1-me)*(1-(me=Fe()/rt||.5))<=0&&(ye=0),Xt=Xt/me;Xt=Xt*2,j.style(U,S,Xt+pt),G=G||[]}return G&&(Xt=+Xt||+rt||0,ae=G[1]?Xt+(G[1]+1)*G[2]:+G[2],V&&(V.unit=pt,V.start=Xt,V.end=ae)),ae}var vs={};function tu(U){var S,G=U.ownerDocument,V=U.nodeName,ae=vs[V];return ae||(S=G.body.appendChild(G.createElement(V)),ae=j.css(S,"display"),S.parentNode.removeChild(S),ae==="none"&&(ae="block"),vs[V]=ae,ae)}function Wa(U,S){for(var G,V,ae=[],me=0,ye=U.length;me<ye;me++)V=U[me],!!V.style&&(G=V.style.display,S?(G==="none"&&(ae[me]=Ie.get(V,"display")||null,ae[me]||(V.style.display="")),V.style.display===""&&ya(V)&&(ae[me]=tu(V))):G!=="none"&&(ae[me]="none",Ie.set(V,"display",G)));for(me=0;me<ye;me++)ae[me]!=null&&(U[me].style.display=ae[me]);return U}j.fn.extend({show:function(){return Wa(this,!0)},hide:function(){return Wa(this)},toggle:function(S){return typeof S=="boolean"?S?this.show():this.hide():this.each(function(){ya(this)?j(this).show():j(this).hide()})}});var Ka=/^(?:checkbox|radio)$/i,Ya=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Fi=/^$|^module$|\/(?:java|ecma)script/i;(function(){var U=re.createDocumentFragment(),S=U.appendChild(re.createElement("div")),G=re.createElement("input");G.setAttribute("type","radio"),G.setAttribute("checked","checked"),G.setAttribute("name","t"),S.appendChild(G),ee.checkClone=S.cloneNode(!0).cloneNode(!0).lastChild.checked,S.innerHTML="<textarea>x</textarea>",ee.noCloneChecked=!!S.cloneNode(!0).lastChild.defaultValue,S.innerHTML="<option></option>",ee.option=!!S.lastChild})();var _a={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};_a.tbody=_a.tfoot=_a.colgroup=_a.caption=_a.thead,_a.th=_a.td,ee.option||(_a.optgroup=_a.option=[1,"<select multiple='multiple'>","</select>"]);function Pa(U,S){var G;return typeof U.getElementsByTagName!="undefined"?G=U.getElementsByTagName(S||"*"):typeof U.querySelectorAll!="undefined"?G=U.querySelectorAll(S||"*"):G=[],S===void 0||S&&Je(U,S)?j.merge([U],G):G}function Ti(U,S){for(var G=0,V=U.length;G<V;G++)Ie.set(U[G],"globalEval",!S||Ie.get(S[G],"globalEval"))}var nu=/<|&#?\w+;/;function Ko(U,S,G,V,ae){for(var me,ye,Fe,rt,pt,Xt,fn=S.createDocumentFragment(),Kn=[],Wt=0,Dn=U.length;Wt<Dn;Wt++)if(me=U[Wt],me||me===0)if(oe(me)==="object")j.merge(Kn,me.nodeType?[me]:me);else if(!nu.test(me))Kn.push(S.createTextNode(me));else{for(ye=ye||fn.appendChild(S.createElement("div")),Fe=(Ya.exec(me)||["",""])[1].toLowerCase(),rt=_a[Fe]||_a._default,ye.innerHTML=rt[1]+j.htmlPrefilter(me)+rt[2],Xt=rt[0];Xt--;)ye=ye.lastChild;j.merge(Kn,ye.childNodes),ye=fn.firstChild,ye.textContent=""}for(fn.textContent="",Wt=0;me=Kn[Wt++];){if(V&&j.inArray(me,V)>-1){ae&&ae.push(me);continue}if(pt=Sr(me),ye=Pa(fn.appendChild(me),"script"),pt&&Ti(ye),G)for(Xt=0;me=ye[Xt++];)Fi.test(me.type||"")&&G.push(me)}return fn}var Yr=/^([^.]*)(?:\.(.+)|)/;function ba(){return!0}function gs(){return!1}function ra(U,S,G,V,ae,me){var ye,Fe;if(typeof S=="object"){typeof G!="string"&&(V=V||G,G=void 0);for(Fe in S)ra(U,Fe,G,V,S[Fe],me);return U}if(V==null&&ae==null?(ae=G,V=G=void 0):ae==null&&(typeof G=="string"?(ae=V,V=void 0):(ae=V,V=G,G=void 0)),ae===!1)ae=gs;else if(!ae)return U;return me===1&&(ye=ae,ae=function(pt){return j().off(pt),ye.apply(this,arguments)},ae.guid=ye.guid||(ye.guid=j.guid++)),U.each(function(){j.event.add(this,S,ae,V,G)})}j.event={global:{},add:function(S,G,V,ae,me){var ye,Fe,rt,pt,Xt,fn,Kn,Wt,Dn,Fr,Cr,Ji=Ie.get(S);if(!!sr(S))for(V.handler&&(ye=V,V=ye.handler,me=ye.selector),me&&j.find.matchesSelector(pr,me),V.guid||(V.guid=j.guid++),(pt=Ji.events)||(pt=Ji.events=Object.create(null)),(Fe=Ji.handle)||(Fe=Ji.handle=function(go){return typeof j!="undefined"&&j.event.triggered!==go.type?j.event.dispatch.apply(S,arguments):void 0}),G=(G||"").match(sn)||[""],Xt=G.length;Xt--;)rt=Yr.exec(G[Xt])||[],Dn=Cr=rt[1],Fr=(rt[2]||"").split(".").sort(),!!Dn&&(Kn=j.event.special[Dn]||{},Dn=(me?Kn.delegateType:Kn.bindType)||Dn,Kn=j.event.special[Dn]||{},fn=j.extend({type:Dn,origType:Cr,data:ae,handler:V,guid:V.guid,selector:me,needsContext:me&&j.expr.match.needsContext.test(me),namespace:Fr.join(".")},ye),(Wt=pt[Dn])||(Wt=pt[Dn]=[],Wt.delegateCount=0,(!Kn.setup||Kn.setup.call(S,ae,Fr,Fe)===!1)&&S.addEventListener&&S.addEventListener(Dn,Fe)),Kn.add&&(Kn.add.call(S,fn),fn.handler.guid||(fn.handler.guid=V.guid)),me?Wt.splice(Wt.delegateCount++,0,fn):Wt.push(fn),j.event.global[Dn]=!0)},remove:function(S,G,V,ae,me){var ye,Fe,rt,pt,Xt,fn,Kn,Wt,Dn,Fr,Cr,Ji=Ie.hasData(S)&&Ie.get(S);if(!(!Ji||!(pt=Ji.events))){for(G=(G||"").match(sn)||[""],Xt=G.length;Xt--;){if(rt=Yr.exec(G[Xt])||[],Dn=Cr=rt[1],Fr=(rt[2]||"").split(".").sort(),!Dn){for(Dn in pt)j.event.remove(S,Dn+G[Xt],V,ae,!0);continue}for(Kn=j.event.special[Dn]||{},Dn=(ae?Kn.delegateType:Kn.bindType)||Dn,Wt=pt[Dn]||[],rt=rt[2]&&new RegExp("(^|\\.)"+Fr.join("\\.(?:.*\\.|)")+"(\\.|$)"),Fe=ye=Wt.length;ye--;)fn=Wt[ye],(me||Cr===fn.origType)&&(!V||V.guid===fn.guid)&&(!rt||rt.test(fn.namespace))&&(!ae||ae===fn.selector||ae==="**"&&fn.selector)&&(Wt.splice(ye,1),fn.selector&&Wt.delegateCount--,Kn.remove&&Kn.remove.call(S,fn));Fe&&!Wt.length&&((!Kn.teardown||Kn.teardown.call(S,Fr,Ji.handle)===!1)&&j.removeEvent(S,Dn,Ji.handle),delete pt[Dn])}j.isEmptyObject(pt)&&Ie.remove(S,"handle events")}},dispatch:function(S){var G,V,ae,me,ye,Fe,rt=new Array(arguments.length),pt=j.event.fix(S),Xt=(Ie.get(this,"events")||Object.create(null))[pt.type]||[],fn=j.event.special[pt.type]||{};for(rt[0]=pt,G=1;G<arguments.length;G++)rt[G]=arguments[G];if(pt.delegateTarget=this,!(fn.preDispatch&&fn.preDispatch.call(this,pt)===!1)){for(Fe=j.event.handlers.call(this,pt,Xt),G=0;(me=Fe[G++])&&!pt.isPropagationStopped();)for(pt.currentTarget=me.elem,V=0;(ye=me.handlers[V++])&&!pt.isImmediatePropagationStopped();)(!pt.rnamespace||ye.namespace===!1||pt.rnamespace.test(ye.namespace))&&(pt.handleObj=ye,pt.data=ye.data,ae=((j.event.special[ye.origType]||{}).handle||ye.handler).apply(me.elem,rt),ae!==void 0&&(pt.result=ae)===!1&&(pt.preventDefault(),pt.stopPropagation()));return fn.postDispatch&&fn.postDispatch.call(this,pt),pt.result}},handlers:function(S,G){var V,ae,me,ye,Fe,rt=[],pt=G.delegateCount,Xt=S.target;if(pt&&Xt.nodeType&&!(S.type==="click"&&S.button>=1)){for(;Xt!==this;Xt=Xt.parentNode||this)if(Xt.nodeType===1&&!(S.type==="click"&&Xt.disabled===!0)){for(ye=[],Fe={},V=0;V<pt;V++)ae=G[V],me=ae.selector+" ",Fe[me]===void 0&&(Fe[me]=ae.needsContext?j(me,this).index(Xt)>-1:j.find(me,this,null,[Xt]).length),Fe[me]&&ye.push(ae);ye.length&&rt.push({elem:Xt,handlers:ye})}}return Xt=this,pt<G.length&&rt.push({elem:Xt,handlers:G.slice(pt)}),rt},addProp:function(S,G){Object.defineProperty(j.Event.prototype,S,{enumerable:!0,configurable:!0,get:Y(G)?function(){if(this.originalEvent)return G(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[S]},set:function(ae){Object.defineProperty(this,S,{enumerable:!0,configurable:!0,writable:!0,value:ae})}})},fix:function(S){return S[j.expando]?S:new j.Event(S)},special:{load:{noBubble:!0},click:{setup:function(S){var G=this||S;return Ka.test(G.type)&&G.click&&Je(G,"input")&&$a(G,"click",!0),!1},trigger:function(S){var G=this||S;return Ka.test(G.type)&&G.click&&Je(G,"input")&&$a(G,"click"),!0},_default:function(S){var G=S.target;return Ka.test(G.type)&&G.click&&Je(G,"input")&&Ie.get(G,"click")||Je(G,"a")}},beforeunload:{postDispatch:function(S){S.result!==void 0&&S.originalEvent&&(S.originalEvent.returnValue=S.result)}}}};function $a(U,S,G){if(!G){Ie.get(U,S)===void 0&&j.event.add(U,S,ba);return}Ie.set(U,S,!1),j.event.add(U,S,{namespace:!1,handler:function(ae){var me,ye=Ie.get(this,S);if(ae.isTrigger&1&&this[S]){if(ye)(j.event.special[S]||{}).delegateType&&ae.stopPropagation();else if(ye=R.call(arguments),Ie.set(this,S,ye),this[S](),me=Ie.get(this,S),Ie.set(this,S,!1),ye!==me)return ae.stopImmediatePropagation(),ae.preventDefault(),me}else ye&&(Ie.set(this,S,j.event.trigger(ye[0],ye.slice(1),this)),ae.stopPropagation(),ae.isImmediatePropagationStopped=ba)}})}j.removeEvent=function(U,S,G){U.removeEventListener&&U.removeEventListener(S,G)},j.Event=function(U,S){if(!(this instanceof j.Event))return new j.Event(U,S);U&&U.type?(this.originalEvent=U,this.type=U.type,this.isDefaultPrevented=U.defaultPrevented||U.defaultPrevented===void 0&&U.returnValue===!1?ba:gs,this.target=U.target&&U.target.nodeType===3?U.target.parentNode:U.target,this.currentTarget=U.currentTarget,this.relatedTarget=U.relatedTarget):this.type=U,S&&j.extend(this,S),this.timeStamp=U&&U.timeStamp||Date.now(),this[j.expando]=!0},j.Event.prototype={constructor:j.Event,isDefaultPrevented:gs,isPropagationStopped:gs,isImmediatePropagationStopped:gs,isSimulated:!1,preventDefault:function(){var S=this.originalEvent;this.isDefaultPrevented=ba,S&&!this.isSimulated&&S.preventDefault()},stopPropagation:function(){var S=this.originalEvent;this.isPropagationStopped=ba,S&&!this.isSimulated&&S.stopPropagation()},stopImmediatePropagation:function(){var S=this.originalEvent;this.isImmediatePropagationStopped=ba,S&&!this.isSimulated&&S.stopImmediatePropagation(),this.stopPropagation()}},j.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},j.event.addProp),j.each({focus:"focusin",blur:"focusout"},function(U,S){function G(V){if(re.documentMode){var ae=Ie.get(this,"handle"),me=j.event.fix(V);me.type=V.type==="focusin"?"focus":"blur",me.isSimulated=!0,ae(V),me.target===me.currentTarget&&ae(me)}else j.event.simulate(S,V.target,j.event.fix(V))}j.event.special[U]={setup:function(){var ae;if($a(this,U,!0),re.documentMode)ae=Ie.get(this,S),ae||this.addEventListener(S,G),Ie.set(this,S,(ae||0)+1);else return!1},trigger:function(){return $a(this,U),!0},teardown:function(){var ae;if(re.documentMode)ae=Ie.get(this,S)-1,ae?Ie.set(this,S,ae):(this.removeEventListener(S,G),Ie.remove(this,S));else return!1},_default:function(ae){return Ie.get(ae.target,U)},delegateType:S},j.event.special[S]={setup:function(){var ae=this.ownerDocument||this.document||this,me=re.documentMode?this:ae,ye=Ie.get(me,S);ye||(re.documentMode?this.addEventListener(S,G):ae.addEventListener(U,G,!0)),Ie.set(me,S,(ye||0)+1)},teardown:function(){var ae=this.ownerDocument||this.document||this,me=re.documentMode?this:ae,ye=Ie.get(me,S)-1;ye?Ie.set(me,S,ye):(re.documentMode?this.removeEventListener(S,G):ae.removeEventListener(U,G,!0),Ie.remove(me,S))}}}),j.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(U,S){j.event.special[U]={delegateType:S,bindType:S,handle:function(V){var ae,me=this,ye=V.relatedTarget,Fe=V.handleObj;return(!ye||ye!==me&&!j.contains(me,ye))&&(V.type=Fe.origType,ae=Fe.handler.apply(this,arguments),V.type=S),ae}}}),j.fn.extend({on:function(S,G,V,ae){return ra(this,S,G,V,ae)},one:function(S,G,V,ae){return ra(this,S,G,V,ae,1)},off:function(S,G,V){var ae,me;if(S&&S.preventDefault&&S.handleObj)return ae=S.handleObj,j(S.delegateTarget).off(ae.namespace?ae.origType+"."+ae.namespace:ae.origType,ae.selector,ae.handler),this;if(typeof S=="object"){for(me in S)this.off(me,G,S[me]);return this}return(G===!1||typeof G=="function")&&(V=G,G=void 0),V===!1&&(V=gs),this.each(function(){j.event.remove(this,S,V,G)})}});var ha=/<script|<style|<link/i,ka=/checked\s*(?:[^=]|=\s*.checked.)/i,Ro=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function So(U,S){return Je(U,"table")&&Je(S.nodeType!==11?S:S.firstChild,"tr")&&j(U).children("tbody")[0]||U}function ho(U){return U.type=(U.getAttribute("type")!==null)+"/"+U.type,U}function ps(U){return(U.type||"").slice(0,5)==="true/"?U.type=U.type.slice(5):U.removeAttribute("type"),U}function ru(U,S){var G,V,ae,me,ye,Fe,rt;if(S.nodeType===1){if(Ie.hasData(U)&&(me=Ie.get(U),rt=me.events,rt)){Ie.remove(S,"handle events");for(ae in rt)for(G=0,V=rt[ae].length;G<V;G++)j.event.add(S,ae,rt[ae][G])}pe.hasData(U)&&(ye=pe.access(U),Fe=j.extend({},ye),pe.set(S,Fe))}}function Ol(U,S){var G=S.nodeName.toLowerCase();G==="input"&&Ka.test(U.type)?S.checked=U.checked:(G==="input"||G==="textarea")&&(S.defaultValue=U.defaultValue)}function No(U,S,G,V){S=q(S);var ae,me,ye,Fe,rt,pt,Xt=0,fn=U.length,Kn=fn-1,Wt=S[0],Dn=Y(Wt);if(Dn||fn>1&&typeof Wt=="string"&&!ee.checkClone&&ka.test(Wt))return U.each(function(Fr){var Cr=U.eq(Fr);Dn&&(S[0]=Wt.call(this,Fr,Cr.html())),No(Cr,S,G,V)});if(fn&&(ae=Ko(S,U[0].ownerDocument,!1,U,V),me=ae.firstChild,ae.childNodes.length===1&&(ae=me),me||V)){for(ye=j.map(Pa(ae,"script"),ho),Fe=ye.length;Xt<fn;Xt++)rt=ae,Xt!==Kn&&(rt=j.clone(rt,!0,!0),Fe&&j.merge(ye,Pa(rt,"script"))),G.call(U[Xt],rt,Xt);if(Fe)for(pt=ye[ye.length-1].ownerDocument,j.map(ye,ps),Xt=0;Xt<Fe;Xt++)rt=ye[Xt],Fi.test(rt.type||"")&&!Ie.access(rt,"globalEval")&&j.contains(pt,rt)&&(rt.src&&(rt.type||"").toLowerCase()!=="module"?j._evalUrl&&!rt.noModule&&j._evalUrl(rt.src,{nonce:rt.nonce||rt.getAttribute("nonce")},pt):ge(rt.textContent.replace(Ro,""),rt,pt))}return U}function Sl(U,S,G){for(var V,ae=S?j.filter(S,U):U,me=0;(V=ae[me])!=null;me++)!G&&V.nodeType===1&&j.cleanData(Pa(V)),V.parentNode&&(G&&Sr(V)&&Ti(Pa(V,"script")),V.parentNode.removeChild(V));return U}j.extend({htmlPrefilter:function(S){return S},clone:function(S,G,V){var ae,me,ye,Fe,rt=S.cloneNode(!0),pt=Sr(S);if(!ee.noCloneChecked&&(S.nodeType===1||S.nodeType===11)&&!j.isXMLDoc(S))for(Fe=Pa(rt),ye=Pa(S),ae=0,me=ye.length;ae<me;ae++)Ol(ye[ae],Fe[ae]);if(G)if(V)for(ye=ye||Pa(S),Fe=Fe||Pa(rt),ae=0,me=ye.length;ae<me;ae++)ru(ye[ae],Fe[ae]);else ru(S,rt);return Fe=Pa(rt,"script"),Fe.length>0&&Ti(Fe,!pt&&Pa(S,"script")),rt},cleanData:function(S){for(var G,V,ae,me=j.event.special,ye=0;(V=S[ye])!==void 0;ye++)if(sr(V)){if(G=V[Ie.expando]){if(G.events)for(ae in G.events)me[ae]?j.event.remove(V,ae):j.removeEvent(V,ae,G.handle);V[Ie.expando]=void 0}V[pe.expando]&&(V[pe.expando]=void 0)}}}),j.fn.extend({detach:function(S){return Sl(this,S,!0)},remove:function(S){return Sl(this,S)},text:function(S){return ln(this,function(G){return G===void 0?j.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=G)})},null,S,arguments.length)},append:function(){return No(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var G=So(this,S);G.appendChild(S)}})},prepend:function(){return No(this,arguments,function(S){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var G=So(this,S);G.insertBefore(S,G.firstChild)}})},before:function(){return No(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this)})},after:function(){return No(this,arguments,function(S){this.parentNode&&this.parentNode.insertBefore(S,this.nextSibling)})},empty:function(){for(var S,G=0;(S=this[G])!=null;G++)S.nodeType===1&&(j.cleanData(Pa(S,!1)),S.textContent="");return this},clone:function(S,G){return S=S==null?!1:S,G=G==null?S:G,this.map(function(){return j.clone(this,S,G)})},html:function(S){return ln(this,function(G){var V=this[0]||{},ae=0,me=this.length;if(G===void 0&&V.nodeType===1)return V.innerHTML;if(typeof G=="string"&&!ha.test(G)&&!_a[(Ya.exec(G)||["",""])[1].toLowerCase()]){G=j.htmlPrefilter(G);try{for(;ae<me;ae++)V=this[ae]||{},V.nodeType===1&&(j.cleanData(Pa(V,!1)),V.innerHTML=G);V=0}catch(ye){}}V&&this.empty().append(G)},null,S,arguments.length)},replaceWith:function(){var S=[];return No(this,arguments,function(G){var V=this.parentNode;j.inArray(this,S)<0&&(j.cleanData(Pa(this)),V&&V.replaceChild(G,this))},S)}}),j.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(U,S){j.fn[U]=function(G){for(var V,ae=[],me=j(G),ye=me.length-1,Fe=0;Fe<=ye;Fe++)V=Fe===ye?this:this.clone(!0),j(me[Fe])[S](V),W.apply(ae,V.get());return this.pushStack(ae)}});var Du=new RegExp("^("+gi+")(?!px)[a-z%]+$","i"),Iu=/^--/,iu=function(S){var G=S.ownerDocument.defaultView;return(!G||!G.opener)&&(G=_),G.getComputedStyle(S)},Ru=function(S,G,V){var ae,me,ye={};for(me in G)ye[me]=S.style[me],S.style[me]=G[me];ae=V.call(S);for(me in G)S.style[me]=ye[me];return ae},Nu=new RegExp(wr.join("|"),"i");(function(){function U(){if(!!pt){rt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",pt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",pr.appendChild(rt).appendChild(pt);var Xt=_.getComputedStyle(pt);G=Xt.top!=="1%",Fe=S(Xt.marginLeft)===12,pt.style.right="60%",me=S(Xt.right)===36,V=S(Xt.width)===36,pt.style.position="absolute",ae=S(pt.offsetWidth/3)===12,pr.removeChild(rt),pt=null}}function S(Xt){return Math.round(parseFloat(Xt))}var G,V,ae,me,ye,Fe,rt=re.createElement("div"),pt=re.createElement("div");!pt.style||(pt.style.backgroundClip="content-box",pt.cloneNode(!0).style.backgroundClip="",ee.clearCloneStyle=pt.style.backgroundClip==="content-box",j.extend(ee,{boxSizingReliable:function(){return U(),V},pixelBoxStyles:function(){return U(),me},pixelPosition:function(){return U(),G},reliableMarginLeft:function(){return U(),Fe},scrollboxSize:function(){return U(),ae},reliableTrDimensions:function(){var fn,Kn,Wt,Dn;return ye==null&&(fn=re.createElement("table"),Kn=re.createElement("tr"),Wt=re.createElement("div"),fn.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Kn.style.cssText="border:1px solid",Kn.style.height="1px",Wt.style.height="9px",Wt.style.display="block",pr.appendChild(fn).appendChild(Kn).appendChild(Wt),Dn=_.getComputedStyle(Kn),ye=parseInt(Dn.height,10)+parseInt(Dn.borderTopWidth,10)+parseInt(Dn.borderBottomWidth,10)===Kn.offsetHeight,pr.removeChild(fn)),ye}}))})();function au(U,S,G){var V,ae,me,ye,Fe=Iu.test(S),rt=U.style;return G=G||iu(U),G&&(ye=G.getPropertyValue(S)||G[S],Fe&&ye&&(ye=ye.replace(Xe,"$1")||void 0),ye===""&&!Sr(U)&&(ye=j.style(U,S)),!ee.pixelBoxStyles()&&Du.test(ye)&&Nu.test(S)&&(V=rt.width,ae=rt.minWidth,me=rt.maxWidth,rt.minWidth=rt.maxWidth=rt.width=ye,ye=G.width,rt.width=V,rt.minWidth=ae,rt.maxWidth=me)),ye!==void 0?ye+"":ye}function ou(U,S){return{get:function(){if(U()){delete this.get;return}return(this.get=S).apply(this,arguments)}}}var su=["Webkit","Moz","ms"],Yt=re.createElement("div").style,gn={};function qn(U){for(var S=U[0].toUpperCase()+U.slice(1),G=su.length;G--;)if(U=su[G]+S,U in Yt)return U}function tr(U){var S=j.cssProps[U]||gn[U];return S||(U in Yt?U:gn[U]=qn(U)||U)}var kr=/^(none|table(?!-c[ea]).+)/,Fa={position:"absolute",visibility:"hidden",display:"block"},ci={letterSpacing:"0",fontWeight:"400"};function fi(U,S,G){var V=cr.exec(S);return V?Math.max(0,V[2]-(G||0))+(V[3]||"px"):S}function Rr(U,S,G,V,ae,me){var ye=S==="width"?1:0,Fe=0,rt=0,pt=0;if(G===(V?"border":"content"))return 0;for(;ye<4;ye+=2)G==="margin"&&(pt+=j.css(U,G+wr[ye],!0,ae)),V?(G==="content"&&(rt-=j.css(U,"padding"+wr[ye],!0,ae)),G!=="margin"&&(rt-=j.css(U,"border"+wr[ye]+"Width",!0,ae))):(rt+=j.css(U,"padding"+wr[ye],!0,ae),G!=="padding"?rt+=j.css(U,"border"+wr[ye]+"Width",!0,ae):Fe+=j.css(U,"border"+wr[ye]+"Width",!0,ae));return!V&&me>=0&&(rt+=Math.max(0,Math.ceil(U["offset"+S[0].toUpperCase()+S.slice(1)]-me-rt-Fe-.5))||0),rt+pt}function di(U,S,G){var V=iu(U),ae=!ee.boxSizingReliable()||G,me=ae&&j.css(U,"boxSizing",!1,V)==="border-box",ye=me,Fe=au(U,S,V),rt="offset"+S[0].toUpperCase()+S.slice(1);if(Du.test(Fe)){if(!G)return Fe;Fe="auto"}return(!ee.boxSizingReliable()&&me||!ee.reliableTrDimensions()&&Je(U,"tr")||Fe==="auto"||!parseFloat(Fe)&&j.css(U,"display",!1,V)==="inline")&&U.getClientRects().length&&(me=j.css(U,"boxSizing",!1,V)==="border-box",ye=rt in U,ye&&(Fe=U[rt])),Fe=parseFloat(Fe)||0,Fe+Rr(U,S,G||(me?"border":"content"),ye,V,Fe)+"px"}j.extend({cssHooks:{opacity:{get:function(S,G){if(G){var V=au(S,"opacity");return V===""?"1":V}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(S,G,V,ae){if(!(!S||S.nodeType===3||S.nodeType===8||!S.style)){var me,ye,Fe,rt=Mn(G),pt=Iu.test(G),Xt=S.style;if(pt||(G=tr(rt)),Fe=j.cssHooks[G]||j.cssHooks[rt],V!==void 0){if(ye=typeof V,ye==="string"&&(me=cr.exec(V))&&me[1]&&(V=Ki(S,G,me),ye="number"),V==null||V!==V)return;ye==="number"&&!pt&&(V+=me&&me[3]||(j.cssNumber[rt]?"":"px")),!ee.clearCloneStyle&&V===""&&G.indexOf("background")===0&&(Xt[G]="inherit"),(!Fe||!("set"in Fe)||(V=Fe.set(S,V,ae))!==void 0)&&(pt?Xt.setProperty(G,V):Xt[G]=V)}else return Fe&&"get"in Fe&&(me=Fe.get(S,!1,ae))!==void 0?me:Xt[G]}},css:function(S,G,V,ae){var me,ye,Fe,rt=Mn(G),pt=Iu.test(G);return pt||(G=tr(rt)),Fe=j.cssHooks[G]||j.cssHooks[rt],Fe&&"get"in Fe&&(me=Fe.get(S,!0,V)),me===void 0&&(me=au(S,G,ae)),me==="normal"&&G in ci&&(me=ci[G]),V===""||V?(ye=parseFloat(me),V===!0||isFinite(ye)?ye||0:me):me}}),j.each(["height","width"],function(U,S){j.cssHooks[S]={get:function(V,ae,me){if(ae)return kr.test(j.css(V,"display"))&&(!V.getClientRects().length||!V.getBoundingClientRect().width)?Ru(V,Fa,function(){return di(V,S,me)}):di(V,S,me)},set:function(V,ae,me){var ye,Fe=iu(V),rt=!ee.scrollboxSize()&&Fe.position==="absolute",pt=rt||me,Xt=pt&&j.css(V,"boxSizing",!1,Fe)==="border-box",fn=me?Rr(V,S,me,Xt,Fe):0;return Xt&&rt&&(fn-=Math.ceil(V["offset"+S[0].toUpperCase()+S.slice(1)]-parseFloat(Fe[S])-Rr(V,S,"border",!1,Fe)-.5)),fn&&(ye=cr.exec(ae))&&(ye[3]||"px")!=="px"&&(V.style[S]=ae,ae=j.css(V,S)),fi(V,ae,fn)}}}),j.cssHooks.marginLeft=ou(ee.reliableMarginLeft,function(U,S){if(S)return(parseFloat(au(U,"marginLeft"))||U.getBoundingClientRect().left-Ru(U,{marginLeft:0},function(){return U.getBoundingClientRect().left}))+"px"}),j.each({margin:"",padding:"",border:"Width"},function(U,S){j.cssHooks[U+S]={expand:function(V){for(var ae=0,me={},ye=typeof V=="string"?V.split(" "):[V];ae<4;ae++)me[U+wr[ae]+S]=ye[ae]||ye[ae-2]||ye[0];return me}},U!=="margin"&&(j.cssHooks[U+S].set=fi)}),j.fn.extend({css:function(S,G){return ln(this,function(V,ae,me){var ye,Fe,rt={},pt=0;if(Array.isArray(ae)){for(ye=iu(V),Fe=ae.length;pt<Fe;pt++)rt[ae[pt]]=j.css(V,ae[pt],!1,ye);return rt}return me!==void 0?j.style(V,ae,me):j.css(V,ae)},S,G,arguments.length>1)}});function Br(U,S,G,V,ae){return new Br.prototype.init(U,S,G,V,ae)}j.Tween=Br,Br.prototype={constructor:Br,init:function(S,G,V,ae,me,ye){this.elem=S,this.prop=V,this.easing=me||j.easing._default,this.options=G,this.start=this.now=this.cur(),this.end=ae,this.unit=ye||(j.cssNumber[V]?"":"px")},cur:function(){var S=Br.propHooks[this.prop];return S&&S.get?S.get(this):Br.propHooks._default.get(this)},run:function(S){var G,V=Br.propHooks[this.prop];return this.options.duration?this.pos=G=j.easing[this.easing](S,this.options.duration*S,0,1,this.options.duration):this.pos=G=S,this.now=(this.end-this.start)*G+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),V&&V.set?V.set(this):Br.propHooks._default.set(this),this}},Br.prototype.init.prototype=Br.prototype,Br.propHooks={_default:{get:function(S){var G;return S.elem.nodeType!==1||S.elem[S.prop]!=null&&S.elem.style[S.prop]==null?S.elem[S.prop]:(G=j.css(S.elem,S.prop,""),!G||G==="auto"?0:G)},set:function(S){j.fx.step[S.prop]?j.fx.step[S.prop](S):S.elem.nodeType===1&&(j.cssHooks[S.prop]||S.elem.style[tr(S.prop)]!=null)?j.style(S.elem,S.prop,S.now+S.unit):S.elem[S.prop]=S.now}}},Br.propHooks.scrollTop=Br.propHooks.scrollLeft={set:function(S){S.elem.nodeType&&S.elem.parentNode&&(S.elem[S.prop]=S.now)}},j.easing={linear:function(S){return S},swing:function(S){return .5-Math.cos(S*Math.PI)/2},_default:"swing"},j.fx=Br.prototype.init,j.fx.step={};var Za,Yo,Bf=/^(?:toggle|show|hide)$/,Lo=/queueHooks$/;function Fs(){Yo&&(re.hidden===!1&&_.requestAnimationFrame?_.requestAnimationFrame(Fs):_.setTimeout(Fs,j.fx.interval),j.fx.tick())}function Lu(){return _.setTimeout(function(){Za=void 0}),Za=Date.now()}function uu(U,S){var G,V=0,ae={height:U};for(S=S?1:0;V<4;V+=2-S)G=wr[V],ae["margin"+G]=ae["padding"+G]=U;return S&&(ae.opacity=ae.width=U),ae}function nc(U,S,G){for(var V,ae=(Zo.tweeners[S]||[]).concat(Zo.tweeners["*"]),me=0,ye=ae.length;me<ye;me++)if(V=ae[me].call(G,S,U))return V}function Qc(U,S,G){var V,ae,me,ye,Fe,rt,pt,Xt,fn="width"in S||"height"in S,Kn=this,Wt={},Dn=U.style,Fr=U.nodeType&&ya(U),Cr=Ie.get(U,"fxshow");G.queue||(ye=j._queueHooks(U,"fx"),ye.unqueued==null&&(ye.unqueued=0,Fe=ye.empty.fire,ye.empty.fire=function(){ye.unqueued||Fe()}),ye.unqueued++,Kn.always(function(){Kn.always(function(){ye.unqueued--,j.queue(U,"fx").length||ye.empty.fire()})}));for(V in S)if(ae=S[V],Bf.test(ae)){if(delete S[V],me=me||ae==="toggle",ae===(Fr?"hide":"show"))if(ae==="show"&&Cr&&Cr[V]!==void 0)Fr=!0;else continue;Wt[V]=Cr&&Cr[V]||j.style(U,V)}if(rt=!j.isEmptyObject(S),!(!rt&&j.isEmptyObject(Wt))){fn&&U.nodeType===1&&(G.overflow=[Dn.overflow,Dn.overflowX,Dn.overflowY],pt=Cr&&Cr.display,pt==null&&(pt=Ie.get(U,"display")),Xt=j.css(U,"display"),Xt==="none"&&(pt?Xt=pt:(Wa([U],!0),pt=U.style.display||pt,Xt=j.css(U,"display"),Wa([U]))),(Xt==="inline"||Xt==="inline-block"&&pt!=null)&&j.css(U,"float")==="none"&&(rt||(Kn.done(function(){Dn.display=pt}),pt==null&&(Xt=Dn.display,pt=Xt==="none"?"":Xt)),Dn.display="inline-block")),G.overflow&&(Dn.overflow="hidden",Kn.always(function(){Dn.overflow=G.overflow[0],Dn.overflowX=G.overflow[1],Dn.overflowY=G.overflow[2]})),rt=!1;for(V in Wt)rt||(Cr?"hidden"in Cr&&(Fr=Cr.hidden):Cr=Ie.access(U,"fxshow",{display:pt}),me&&(Cr.hidden=!Fr),Fr&&Wa([U],!0),Kn.done(function(){Fr||Wa([U]),Ie.remove(U,"fxshow");for(V in Wt)j.style(U,V,Wt[V])})),rt=nc(Fr?Cr[V]:0,V,Kn),V in Cr||(Cr[V]=rt.start,Fr&&(rt.end=rt.start,rt.start=0))}}function rc(U,S){var G,V,ae,me,ye;for(G in U)if(V=Mn(G),ae=S[V],me=U[G],Array.isArray(me)&&(ae=me[1],me=U[G]=me[0]),G!==V&&(U[V]=me,delete U[G]),ye=j.cssHooks[V],ye&&"expand"in ye){me=ye.expand(me),delete U[V];for(G in me)G in U||(U[G]=me[G],S[G]=ae)}else S[V]=ae}function Zo(U,S,G){var V,ae,me=0,ye=Zo.prefilters.length,Fe=j.Deferred().always(function(){delete rt.elem}),rt=function(){if(ae)return!1;for(var Kn=Za||Lu(),Wt=Math.max(0,pt.startTime+pt.duration-Kn),Dn=Wt/pt.duration||0,Fr=1-Dn,Cr=0,Ji=pt.tweens.length;Cr<Ji;Cr++)pt.tweens[Cr].run(Fr);return Fe.notifyWith(U,[pt,Fr,Wt]),Fr<1&&Ji?Wt:(Ji||Fe.notifyWith(U,[pt,1,0]),Fe.resolveWith(U,[pt]),!1)},pt=Fe.promise({elem:U,props:j.extend({},S),opts:j.extend(!0,{specialEasing:{},easing:j.easing._default},G),originalProperties:S,originalOptions:G,startTime:Za||Lu(),duration:G.duration,tweens:[],createTween:function(Kn,Wt){var Dn=j.Tween(U,pt.opts,Kn,Wt,pt.opts.specialEasing[Kn]||pt.opts.easing);return pt.tweens.push(Dn),Dn},stop:function(Kn){var Wt=0,Dn=Kn?pt.tweens.length:0;if(ae)return this;for(ae=!0;Wt<Dn;Wt++)pt.tweens[Wt].run(1);return Kn?(Fe.notifyWith(U,[pt,1,0]),Fe.resolveWith(U,[pt,Kn])):Fe.rejectWith(U,[pt,Kn]),this}}),Xt=pt.props;for(rc(Xt,pt.opts.specialEasing);me<ye;me++)if(V=Zo.prefilters[me].call(pt,U,Xt,pt.opts),V)return Y(V.stop)&&(j._queueHooks(pt.elem,pt.opts.queue).stop=V.stop.bind(V)),V;return j.map(Xt,nc,pt),Y(pt.opts.start)&&pt.opts.start.call(U,pt),pt.progress(pt.opts.progress).done(pt.opts.done,pt.opts.complete).fail(pt.opts.fail).always(pt.opts.always),j.fx.timer(j.extend(rt,{elem:U,anim:pt,queue:pt.opts.queue})),pt}j.Animation=j.extend(Zo,{tweeners:{"*":[function(U,S){var G=this.createTween(U,S);return Ki(G.elem,U,cr.exec(S),G),G}]},tweener:function(S,G){Y(S)?(G=S,S=["*"]):S=S.match(sn);for(var V,ae=0,me=S.length;ae<me;ae++)V=S[ae],Zo.tweeners[V]=Zo.tweeners[V]||[],Zo.tweeners[V].unshift(G)},prefilters:[Qc],prefilter:function(S,G){G?Zo.prefilters.unshift(S):Zo.prefilters.push(S)}}),j.speed=function(U,S,G){var V=U&&typeof U=="object"?j.extend({},U):{complete:G||!G&&S||Y(U)&&U,duration:U,easing:G&&S||S&&!Y(S)&&S};return j.fx.off?V.duration=0:typeof V.duration!="number"&&(V.duration in j.fx.speeds?V.duration=j.fx.speeds[V.duration]:V.duration=j.fx.speeds._default),(V.queue==null||V.queue===!0)&&(V.queue="fx"),V.old=V.complete,V.complete=function(){Y(V.old)&&V.old.call(this),V.queue&&j.dequeue(this,V.queue)},V},j.fn.extend({fadeTo:function(S,G,V,ae){return this.filter(ya).css("opacity",0).show().end().animate({opacity:G},S,V,ae)},animate:function(S,G,V,ae){var me=j.isEmptyObject(S),ye=j.speed(G,V,ae),Fe=function(){var pt=Zo(this,j.extend({},S),ye);(me||Ie.get(this,"finish"))&&pt.stop(!0)};return Fe.finish=Fe,me||ye.queue===!1?this.each(Fe):this.queue(ye.queue,Fe)},stop:function(S,G,V){var ae=function(ye){var Fe=ye.stop;delete ye.stop,Fe(V)};return typeof S!="string"&&(V=G,G=S,S=void 0),G&&this.queue(S||"fx",[]),this.each(function(){var me=!0,ye=S!=null&&S+"queueHooks",Fe=j.timers,rt=Ie.get(this);if(ye)rt[ye]&&rt[ye].stop&&ae(rt[ye]);else for(ye in rt)rt[ye]&&rt[ye].stop&&Lo.test(ye)&&ae(rt[ye]);for(ye=Fe.length;ye--;)Fe[ye].elem===this&&(S==null||Fe[ye].queue===S)&&(Fe[ye].anim.stop(V),me=!1,Fe.splice(ye,1));(me||!V)&&j.dequeue(this,S)})},finish:function(S){return S!==!1&&(S=S||"fx"),this.each(function(){var G,V=Ie.get(this),ae=V[S+"queue"],me=V[S+"queueHooks"],ye=j.timers,Fe=ae?ae.length:0;for(V.finish=!0,j.queue(this,S,[]),me&&me.stop&&me.stop.call(this,!0),G=ye.length;G--;)ye[G].elem===this&&ye[G].queue===S&&(ye[G].anim.stop(!0),ye.splice(G,1));for(G=0;G<Fe;G++)ae[G]&&ae[G].finish&&ae[G].finish.call(this);delete V.finish})}}),j.each(["toggle","show","hide"],function(U,S){var G=j.fn[S];j.fn[S]=function(V,ae,me){return V==null||typeof V=="boolean"?G.apply(this,arguments):this.animate(uu(S,!0),V,ae,me)}}),j.each({slideDown:uu("show"),slideUp:uu("hide"),slideToggle:uu("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(U,S){j.fn[U]=function(G,V,ae){return this.animate(S,G,V,ae)}}),j.timers=[],j.fx.tick=function(){var U,S=0,G=j.timers;for(Za=Date.now();S<G.length;S++)U=G[S],!U()&&G[S]===U&&G.splice(S--,1);G.length||j.fx.stop(),Za=void 0},j.fx.timer=function(U){j.timers.push(U),j.fx.start()},j.fx.interval=13,j.fx.start=function(){Yo||(Yo=!0,Fs())},j.fx.stop=function(){Yo=null},j.fx.speeds={slow:600,fast:200,_default:400},j.fn.delay=function(U,S){return U=j.fx&&j.fx.speeds[U]||U,S=S||"fx",this.queue(S,function(G,V){var ae=_.setTimeout(G,U);V.stop=function(){_.clearTimeout(ae)}})},function(){var U=re.createElement("input"),S=re.createElement("select"),G=S.appendChild(re.createElement("option"));U.type="checkbox",ee.checkOn=U.value!=="",ee.optSelected=G.selected,U=re.createElement("input"),U.value="t",U.type="radio",ee.radioValue=U.value==="t"}();var jo,ua=j.expr.attrHandle;j.fn.extend({attr:function(S,G){return ln(this,j.attr,S,G,arguments.length>1)},removeAttr:function(S){return this.each(function(){j.removeAttr(this,S)})}}),j.extend({attr:function(S,G,V){var ae,me,ye=S.nodeType;if(!(ye===3||ye===8||ye===2)){if(typeof S.getAttribute=="undefined")return j.prop(S,G,V);if((ye!==1||!j.isXMLDoc(S))&&(me=j.attrHooks[G.toLowerCase()]||(j.expr.match.bool.test(G)?jo:void 0)),V!==void 0){if(V===null){j.removeAttr(S,G);return}return me&&"set"in me&&(ae=me.set(S,V,G))!==void 0?ae:(S.setAttribute(G,V+""),V)}return me&&"get"in me&&(ae=me.get(S,G))!==null?ae:(ae=j.find.attr(S,G),ae==null?void 0:ae)}},attrHooks:{type:{set:function(S,G){if(!ee.radioValue&&G==="radio"&&Je(S,"input")){var V=S.value;return S.setAttribute("type",G),V&&(S.value=V),G}}}},removeAttr:function(S,G){var V,ae=0,me=G&&G.match(sn);if(me&&S.nodeType===1)for(;V=me[ae++];)S.removeAttribute(V)}}),jo={set:function(S,G,V){return G===!1?j.removeAttr(S,V):S.setAttribute(V,V),V}},j.each(j.expr.match.bool.source.match(/\w+/g),function(U,S){var G=ua[S]||j.find.attr;ua[S]=function(V,ae,me){var ye,Fe,rt=ae.toLowerCase();return me||(Fe=ua[rt],ua[rt]=ye,ye=G(V,ae,me)!=null?rt:null,ua[rt]=Fe),ye}});var ju=/^(?:input|select|textarea|button)$/i,_u=/^(?:a|area)$/i;j.fn.extend({prop:function(S,G){return ln(this,j.prop,S,G,arguments.length>1)},removeProp:function(S){return this.each(function(){delete this[j.propFix[S]||S]})}}),j.extend({prop:function(S,G,V){var ae,me,ye=S.nodeType;if(!(ye===3||ye===8||ye===2))return(ye!==1||!j.isXMLDoc(S))&&(G=j.propFix[G]||G,me=j.propHooks[G]),V!==void 0?me&&"set"in me&&(ae=me.set(S,V,G))!==void 0?ae:S[G]=V:me&&"get"in me&&(ae=me.get(S,G))!==null?ae:S[G]},propHooks:{tabIndex:{get:function(S){var G=j.find.attr(S,"tabindex");return G?parseInt(G,10):ju.test(S.nodeName)||_u.test(S.nodeName)&&S.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ee.optSelected||(j.propHooks.selected={get:function(S){var G=S.parentNode;return G&&G.parentNode&&G.parentNode.selectedIndex,null},set:function(S){var G=S.parentNode;G&&(G.selectedIndex,G.parentNode&&G.parentNode.selectedIndex)}}),j.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){j.propFix[this.toLowerCase()]=this});function Bs(U){var S=U.match(sn)||[];return S.join(" ")}function Ss(U){return U.getAttribute&&U.getAttribute("class")||""}function Ml(U){return Array.isArray(U)?U:typeof U=="string"?U.match(sn)||[]:[]}j.fn.extend({addClass:function(S){var G,V,ae,me,ye,Fe;return Y(S)?this.each(function(rt){j(this).addClass(S.call(this,rt,Ss(this)))}):(G=Ml(S),G.length?this.each(function(){if(ae=Ss(this),V=this.nodeType===1&&" "+Bs(ae)+" ",V){for(ye=0;ye<G.length;ye++)me=G[ye],V.indexOf(" "+me+" ")<0&&(V+=me+" ");Fe=Bs(V),ae!==Fe&&this.setAttribute("class",Fe)}}):this)},removeClass:function(S){var G,V,ae,me,ye,Fe;return Y(S)?this.each(function(rt){j(this).removeClass(S.call(this,rt,Ss(this)))}):arguments.length?(G=Ml(S),G.length?this.each(function(){if(ae=Ss(this),V=this.nodeType===1&&" "+Bs(ae)+" ",V){for(ye=0;ye<G.length;ye++)for(me=G[ye];V.indexOf(" "+me+" ")>-1;)V=V.replace(" "+me+" "," ");Fe=Bs(V),ae!==Fe&&this.setAttribute("class",Fe)}}):this):this.attr("class","")},toggleClass:function(S,G){var V,ae,me,ye,Fe=typeof S,rt=Fe==="string"||Array.isArray(S);return Y(S)?this.each(function(pt){j(this).toggleClass(S.call(this,pt,Ss(this),G),G)}):typeof G=="boolean"&&rt?G?this.addClass(S):this.removeClass(S):(V=Ml(S),this.each(function(){if(rt)for(ye=j(this),me=0;me<V.length;me++)ae=V[me],ye.hasClass(ae)?ye.removeClass(ae):ye.addClass(ae);else(S===void 0||Fe==="boolean")&&(ae=Ss(this),ae&&Ie.set(this,"__className__",ae),this.setAttribute&&this.setAttribute("class",ae||S===!1?"":Ie.get(this,"__className__")||""))}))},hasClass:function(S){var G,V,ae=0;for(G=" "+S+" ";V=this[ae++];)if(V.nodeType===1&&(" "+Bs(Ss(V))+" ").indexOf(G)>-1)return!0;return!1}});var qc=/\r/g;j.fn.extend({val:function(S){var G,V,ae,me=this[0];return arguments.length?(ae=Y(S),this.each(function(ye){var Fe;this.nodeType===1&&(ae?Fe=S.call(this,ye,j(this).val()):Fe=S,Fe==null?Fe="":typeof Fe=="number"?Fe+="":Array.isArray(Fe)&&(Fe=j.map(Fe,function(rt){return rt==null?"":rt+""})),G=j.valHooks[this.type]||j.valHooks[this.nodeName.toLowerCase()],(!G||!("set"in G)||G.set(this,Fe,"value")===void 0)&&(this.value=Fe))})):me?(G=j.valHooks[me.type]||j.valHooks[me.nodeName.toLowerCase()],G&&"get"in G&&(V=G.get(me,"value"))!==void 0?V:(V=me.value,typeof V=="string"?V.replace(qc,""):V==null?"":V)):void 0}}),j.extend({valHooks:{option:{get:function(S){var G=j.find.attr(S,"value");return G!=null?G:Bs(j.text(S))}},select:{get:function(S){var G,V,ae,me=S.options,ye=S.selectedIndex,Fe=S.type==="select-one",rt=Fe?null:[],pt=Fe?ye+1:me.length;for(ye<0?ae=pt:ae=Fe?ye:0;ae<pt;ae++)if(V=me[ae],(V.selected||ae===ye)&&!V.disabled&&(!V.parentNode.disabled||!Je(V.parentNode,"optgroup"))){if(G=j(V).val(),Fe)return G;rt.push(G)}return rt},set:function(S,G){for(var V,ae,me=S.options,ye=j.makeArray(G),Fe=me.length;Fe--;)ae=me[Fe],(ae.selected=j.inArray(j.valHooks.option.get(ae),ye)>-1)&&(V=!0);return V||(S.selectedIndex=-1),ye}}}}),j.each(["radio","checkbox"],function(){j.valHooks[this]={set:function(S,G){if(Array.isArray(G))return S.checked=j.inArray(j(S).val(),G)>-1}},ee.checkOn||(j.valHooks[this].get=function(U){return U.getAttribute("value")===null?"on":U.value})});var lu=_.location,Zu={guid:Date.now()},Al=/\?/;j.parseXML=function(U){var S,G;if(!U||typeof U!="string")return null;try{S=new _.DOMParser().parseFromString(U,"text/xml")}catch(V){}return G=S&&S.getElementsByTagName("parsererror")[0],(!S||G)&&j.error("Invalid XML: "+(G?j.map(G.childNodes,function(V){return V.textContent}).join(`
`):U)),S};var ic=/^(?:focusinfocus|focusoutblur)$/,ac=function(S){S.stopPropagation()};j.extend(j.event,{trigger:function(S,G,V,ae){var me,ye,Fe,rt,pt,Xt,fn,Kn,Wt=[V||re],Dn=ie.call(S,"type")?S.type:S,Fr=ie.call(S,"namespace")?S.namespace.split("."):[];if(ye=Kn=Fe=V=V||re,!(V.nodeType===3||V.nodeType===8)&&!ic.test(Dn+j.event.triggered)&&(Dn.indexOf(".")>-1&&(Fr=Dn.split("."),Dn=Fr.shift(),Fr.sort()),pt=Dn.indexOf(":")<0&&"on"+Dn,S=S[j.expando]?S:new j.Event(Dn,typeof S=="object"&&S),S.isTrigger=ae?2:3,S.namespace=Fr.join("."),S.rnamespace=S.namespace?new RegExp("(^|\\.)"+Fr.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,S.result=void 0,S.target||(S.target=V),G=G==null?[S]:j.makeArray(G,[S]),fn=j.event.special[Dn]||{},!(!ae&&fn.trigger&&fn.trigger.apply(V,G)===!1))){if(!ae&&!fn.noBubble&&!le(V)){for(rt=fn.delegateType||Dn,ic.test(rt+Dn)||(ye=ye.parentNode);ye;ye=ye.parentNode)Wt.push(ye),Fe=ye;Fe===(V.ownerDocument||re)&&Wt.push(Fe.defaultView||Fe.parentWindow||_)}for(me=0;(ye=Wt[me++])&&!S.isPropagationStopped();)Kn=ye,S.type=me>1?rt:fn.bindType||Dn,Xt=(Ie.get(ye,"events")||Object.create(null))[S.type]&&Ie.get(ye,"handle"),Xt&&Xt.apply(ye,G),Xt=pt&&ye[pt],Xt&&Xt.apply&&sr(ye)&&(S.result=Xt.apply(ye,G),S.result===!1&&S.preventDefault());return S.type=Dn,!ae&&!S.isDefaultPrevented()&&(!fn._default||fn._default.apply(Wt.pop(),G)===!1)&&sr(V)&&pt&&Y(V[Dn])&&!le(V)&&(Fe=V[pt],Fe&&(V[pt]=null),j.event.triggered=Dn,S.isPropagationStopped()&&Kn.addEventListener(Dn,ac),V[Dn](),S.isPropagationStopped()&&Kn.removeEventListener(Dn,ac),j.event.triggered=void 0,Fe&&(V[pt]=Fe)),S.result}},simulate:function(S,G,V){var ae=j.extend(new j.Event,V,{type:S,isSimulated:!0});j.event.trigger(ae,null,G)}}),j.fn.extend({trigger:function(S,G){return this.each(function(){j.event.trigger(S,G,this)})},triggerHandler:function(S,G){var V=this[0];if(V)return j.event.trigger(S,G,V,!0)}});var ef=/\[\]$/,ms=/\r?\n/g,tf=/^(?:submit|button|image|reset|file)$/i,Fu=/^(?:input|select|textarea|keygen)/i;function Tl(U,S,G,V){var ae;if(Array.isArray(S))j.each(S,function(me,ye){G||ef.test(U)?V(U,ye):Tl(U+"["+(typeof ye=="object"&&ye!=null?me:"")+"]",ye,G,V)});else if(!G&&oe(S)==="object")for(ae in S)Tl(U+"["+ae+"]",S[ae],G,V);else V(U,S)}j.param=function(U,S){var G,V=[],ae=function(ye,Fe){var rt=Y(Fe)?Fe():Fe;V[V.length]=encodeURIComponent(ye)+"="+encodeURIComponent(rt==null?"":rt)};if(U==null)return"";if(Array.isArray(U)||U.jquery&&!j.isPlainObject(U))j.each(U,function(){ae(this.name,this.value)});else for(G in U)Tl(G,U[G],S,ae);return V.join("&")},j.fn.extend({serialize:function(){return j.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var S=j.prop(this,"elements");return S?j.makeArray(S):this}).filter(function(){var S=this.type;return this.name&&!j(this).is(":disabled")&&Fu.test(this.nodeName)&&!tf.test(S)&&(this.checked||!Ka.test(S))}).map(function(S,G){var V=j(this).val();return V==null?null:Array.isArray(V)?j.map(V,function(ae){return{name:G.name,value:ae.replace(ms,`\r
`)}}):{name:G.name,value:V.replace(ms,`\r
`)}}).get()}});var Gs=/%20/g,Pl=/#.*$/,Gf=/([?&])_=[^&]*/,kl=/^(.*?):[ \t]*([^\r\n]*)$/mg,oc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,nf=/^(?:GET|HEAD)$/,rf=/^\/\//,ta={},$i={},Ju="*/".concat("*"),Jo=re.createElement("a");Jo.href=lu.href;function cu(U){return function(S,G){typeof S!="string"&&(G=S,S="*");var V,ae=0,me=S.toLowerCase().match(sn)||[];if(Y(G))for(;V=me[ae++];)V[0]==="+"?(V=V.slice(1)||"*",(U[V]=U[V]||[]).unshift(G)):(U[V]=U[V]||[]).push(G)}}function Qu(U,S,G,V){var ae={},me=U===$i;function ye(Fe){var rt;return ae[Fe]=!0,j.each(U[Fe]||[],function(pt,Xt){var fn=Xt(S,G,V);if(typeof fn=="string"&&!me&&!ae[fn])return S.dataTypes.unshift(fn),ye(fn),!1;if(me)return!(rt=fn)}),rt}return ye(S.dataTypes[0])||!ae["*"]&&ye("*")}function Dl(U,S){var G,V,ae=j.ajaxSettings.flatOptions||{};for(G in S)S[G]!==void 0&&((ae[G]?U:V||(V={}))[G]=S[G]);return V&&j.extend(!0,U,V),U}function zf(U,S,G){for(var V,ae,me,ye,Fe=U.contents,rt=U.dataTypes;rt[0]==="*";)rt.shift(),V===void 0&&(V=U.mimeType||S.getResponseHeader("Content-Type"));if(V){for(ae in Fe)if(Fe[ae]&&Fe[ae].test(V)){rt.unshift(ae);break}}if(rt[0]in G)me=rt[0];else{for(ae in G){if(!rt[0]||U.converters[ae+" "+rt[0]]){me=ae;break}ye||(ye=ae)}me=me||ye}if(me)return me!==rt[0]&&rt.unshift(me),G[me]}function zs(U,S,G,V){var ae,me,ye,Fe,rt,pt={},Xt=U.dataTypes.slice();if(Xt[1])for(ye in U.converters)pt[ye.toLowerCase()]=U.converters[ye];for(me=Xt.shift();me;)if(U.responseFields[me]&&(G[U.responseFields[me]]=S),!rt&&V&&U.dataFilter&&(S=U.dataFilter(S,U.dataType)),rt=me,me=Xt.shift(),me){if(me==="*")me=rt;else if(rt!=="*"&&rt!==me){if(ye=pt[rt+" "+me]||pt["* "+me],!ye){for(ae in pt)if(Fe=ae.split(" "),Fe[1]===me&&(ye=pt[rt+" "+Fe[0]]||pt["* "+Fe[0]],ye)){ye===!0?ye=pt[ae]:pt[ae]!==!0&&(me=Fe[0],Xt.unshift(Fe[1]));break}}if(ye!==!0)if(ye&&U.throws)S=ye(S);else try{S=ye(S)}catch(fn){return{state:"parsererror",error:ye?fn:"No conversion from "+rt+" to "+me}}}}return{state:"success",data:S}}j.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:lu.href,type:"GET",isLocal:oc.test(lu.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ju,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":j.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(S,G){return G?Dl(Dl(S,j.ajaxSettings),G):Dl(j.ajaxSettings,S)},ajaxPrefilter:cu(ta),ajaxTransport:cu($i),ajax:function(S,G){typeof S=="object"&&(G=S,S=void 0),G=G||{};var V,ae,me,ye,Fe,rt,pt,Xt,fn,Kn,Wt=j.ajaxSetup({},G),Dn=Wt.context||Wt,Fr=Wt.context&&(Dn.nodeType||Dn.jquery)?j(Dn):j.event,Cr=j.Deferred(),Ji=j.Callbacks("once memory"),go=Wt.statusCode||{},Ca={},ao={},Ba="canceled",$r={readyState:0,getResponseHeader:function(ia){var aa;if(pt){if(!ye)for(ye={};aa=kl.exec(me);)ye[aa[1].toLowerCase()+" "]=(ye[aa[1].toLowerCase()+" "]||[]).concat(aa[2]);aa=ye[ia.toLowerCase()+" "]}return aa==null?null:aa.join(", ")},getAllResponseHeaders:function(){return pt?me:null},setRequestHeader:function(ia,aa){return pt==null&&(ia=ao[ia.toLowerCase()]=ao[ia.toLowerCase()]||ia,Ca[ia]=aa),this},overrideMimeType:function(ia){return pt==null&&(Wt.mimeType=ia),this},statusCode:function(ia){var aa;if(ia)if(pt)$r.always(ia[$r.status]);else for(aa in ia)go[aa]=[go[aa],ia[aa]];return this},abort:function(ia){var aa=ia||Ba;return V&&V.abort(aa),Qo(0,aa),this}};if(Cr.promise($r),Wt.url=((S||Wt.url||lu.href)+"").replace(rf,lu.protocol+"//"),Wt.type=G.method||G.type||Wt.method||Wt.type,Wt.dataTypes=(Wt.dataType||"*").toLowerCase().match(sn)||[""],Wt.crossDomain==null){rt=re.createElement("a");try{rt.href=Wt.url,rt.href=rt.href,Wt.crossDomain=Jo.protocol+"//"+Jo.host!=rt.protocol+"//"+rt.host}catch(Li){Wt.crossDomain=!0}}if(Wt.data&&Wt.processData&&typeof Wt.data!="string"&&(Wt.data=j.param(Wt.data,Wt.traditional)),Qu(ta,Wt,G,$r),pt)return $r;Xt=j.event&&Wt.global,Xt&&j.active++==0&&j.event.trigger("ajaxStart"),Wt.type=Wt.type.toUpperCase(),Wt.hasContent=!nf.test(Wt.type),ae=Wt.url.replace(Pl,""),Wt.hasContent?Wt.data&&Wt.processData&&(Wt.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Wt.data=Wt.data.replace(Gs,"+")):(Kn=Wt.url.slice(ae.length),Wt.data&&(Wt.processData||typeof Wt.data=="string")&&(ae+=(Al.test(ae)?"&":"?")+Wt.data,delete Wt.data),Wt.cache===!1&&(ae=ae.replace(Gf,"$1"),Kn=(Al.test(ae)?"&":"?")+"_="+Zu.guid+++Kn),Wt.url=ae+Kn),Wt.ifModified&&(j.lastModified[ae]&&$r.setRequestHeader("If-Modified-Since",j.lastModified[ae]),j.etag[ae]&&$r.setRequestHeader("If-None-Match",j.etag[ae])),(Wt.data&&Wt.hasContent&&Wt.contentType!==!1||G.contentType)&&$r.setRequestHeader("Content-Type",Wt.contentType),$r.setRequestHeader("Accept",Wt.dataTypes[0]&&Wt.accepts[Wt.dataTypes[0]]?Wt.accepts[Wt.dataTypes[0]]+(Wt.dataTypes[0]!=="*"?", "+Ju+"; q=0.01":""):Wt.accepts["*"]);for(fn in Wt.headers)$r.setRequestHeader(fn,Wt.headers[fn]);if(Wt.beforeSend&&(Wt.beforeSend.call(Dn,$r,Wt)===!1||pt))return $r.abort();if(Ba="abort",Ji.add(Wt.complete),$r.done(Wt.success),$r.fail(Wt.error),V=Qu($i,Wt,G,$r),!V)Qo(-1,"No Transport");else{if($r.readyState=1,Xt&&Fr.trigger("ajaxSend",[$r,Wt]),pt)return $r;Wt.async&&Wt.timeout>0&&(Fe=_.setTimeout(function(){$r.abort("timeout")},Wt.timeout));try{pt=!1,V.send(Ca,Qo)}catch(Li){if(pt)throw Li;Qo(-1,Li)}}function Qo(Li,ia,aa,qu){var Da,Mo,Hs,Ws,ys,oo=ia;pt||(pt=!0,Fe&&_.clearTimeout(Fe),V=void 0,me=qu||"",$r.readyState=Li>0?4:0,Da=Li>=200&&Li<300||Li===304,aa&&(Ws=zf(Wt,$r,aa)),!Da&&j.inArray("script",Wt.dataTypes)>-1&&j.inArray("json",Wt.dataTypes)<0&&(Wt.converters["text script"]=function(){}),Ws=zs(Wt,Ws,$r,Da),Da?(Wt.ifModified&&(ys=$r.getResponseHeader("Last-Modified"),ys&&(j.lastModified[ae]=ys),ys=$r.getResponseHeader("etag"),ys&&(j.etag[ae]=ys)),Li===204||Wt.type==="HEAD"?oo="nocontent":Li===304?oo="notmodified":(oo=Ws.state,Mo=Ws.data,Hs=Ws.error,Da=!Hs)):(Hs=oo,(Li||!oo)&&(oo="error",Li<0&&(Li=0))),$r.status=Li,$r.statusText=(ia||oo)+"",Da?Cr.resolveWith(Dn,[Mo,oo,$r]):Cr.rejectWith(Dn,[$r,oo,Hs]),$r.statusCode(go),go=void 0,Xt&&Fr.trigger(Da?"ajaxSuccess":"ajaxError",[$r,Wt,Da?Mo:Hs]),Ji.fireWith(Dn,[$r,oo]),Xt&&(Fr.trigger("ajaxComplete",[$r,Wt]),--j.active||j.event.trigger("ajaxStop")))}return $r},getJSON:function(S,G,V){return j.get(S,G,V,"json")},getScript:function(S,G){return j.get(S,void 0,G,"script")}}),j.each(["get","post"],function(U,S){j[S]=function(G,V,ae,me){return Y(V)&&(me=me||ae,ae=V,V=void 0),j.ajax(j.extend({url:G,type:S,dataType:me,data:V,success:ae},j.isPlainObject(G)&&G))}}),j.ajaxPrefilter(function(U){var S;for(S in U.headers)S.toLowerCase()==="content-type"&&(U.contentType=U.headers[S]||"")}),j._evalUrl=function(U,S,G){return j.ajax({url:U,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(ae){j.globalEval(ae,S,G)}})},j.fn.extend({wrapAll:function(S){var G;return this[0]&&(Y(S)&&(S=S.call(this[0])),G=j(S,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&G.insertBefore(this[0]),G.map(function(){for(var V=this;V.firstElementChild;)V=V.firstElementChild;return V}).append(this)),this},wrapInner:function(S){return Y(S)?this.each(function(G){j(this).wrapInner(S.call(this,G))}):this.each(function(){var G=j(this),V=G.contents();V.length?V.wrapAll(S):G.append(S)})},wrap:function(S){var G=Y(S);return this.each(function(V){j(this).wrapAll(G?S.call(this,V):S)})},unwrap:function(S){return this.parent(S).not("body").each(function(){j(this).replaceWith(this.childNodes)}),this}}),j.expr.pseudos.hidden=function(U){return!j.expr.pseudos.visible(U)},j.expr.pseudos.visible=function(U){return!!(U.offsetWidth||U.offsetHeight||U.getClientRects().length)},j.ajaxSettings.xhr=function(){try{return new _.XMLHttpRequest}catch(U){}};var sc={0:200,1223:204},Aa=j.ajaxSettings.xhr();ee.cors=!!Aa&&"withCredentials"in Aa,ee.ajax=Aa=!!Aa,j.ajaxTransport(function(U){var S,G;if(ee.cors||Aa&&!U.crossDomain)return{send:function(ae,me){var ye,Fe=U.xhr();if(Fe.open(U.type,U.url,U.async,U.username,U.password),U.xhrFields)for(ye in U.xhrFields)Fe[ye]=U.xhrFields[ye];U.mimeType&&Fe.overrideMimeType&&Fe.overrideMimeType(U.mimeType),!U.crossDomain&&!ae["X-Requested-With"]&&(ae["X-Requested-With"]="XMLHttpRequest");for(ye in ae)Fe.setRequestHeader(ye,ae[ye]);S=function(pt){return function(){S&&(S=G=Fe.onload=Fe.onerror=Fe.onabort=Fe.ontimeout=Fe.onreadystatechange=null,pt==="abort"?Fe.abort():pt==="error"?typeof Fe.status!="number"?me(0,"error"):me(Fe.status,Fe.statusText):me(sc[Fe.status]||Fe.status,Fe.statusText,(Fe.responseType||"text")!=="text"||typeof Fe.responseText!="string"?{binary:Fe.response}:{text:Fe.responseText},Fe.getAllResponseHeaders()))}},Fe.onload=S(),G=Fe.onerror=Fe.ontimeout=S("error"),Fe.onabort!==void 0?Fe.onabort=G:Fe.onreadystatechange=function(){Fe.readyState===4&&_.setTimeout(function(){S&&G()})},S=S("abort");try{Fe.send(U.hasContent&&U.data||null)}catch(rt){if(S)throw rt}},abort:function(){S&&S()}}}),j.ajaxPrefilter(function(U){U.crossDomain&&(U.contents.script=!1)}),j.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(S){return j.globalEval(S),S}}}),j.ajaxPrefilter("script",function(U){U.cache===void 0&&(U.cache=!1),U.crossDomain&&(U.type="GET")}),j.ajaxTransport("script",function(U){if(U.crossDomain||U.scriptAttrs){var S,G;return{send:function(ae,me){S=j("<script>").attr(U.scriptAttrs||{}).prop({charset:U.scriptCharset,src:U.url}).on("load error",G=function(Fe){S.remove(),G=null,Fe&&me(Fe.type==="error"?404:200,Fe.type)}),re.head.appendChild(S[0])},abort:function(){G&&G()}}}});var Il=[],fu=/(=)\?(?=&|$)|\?\?/;j.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var S=Il.pop()||j.expando+"_"+Zu.guid++;return this[S]=!0,S}}),j.ajaxPrefilter("json jsonp",function(U,S,G){var V,ae,me,ye=U.jsonp!==!1&&(fu.test(U.url)?"url":typeof U.data=="string"&&(U.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&fu.test(U.data)&&"data");if(ye||U.dataTypes[0]==="jsonp")return V=U.jsonpCallback=Y(U.jsonpCallback)?U.jsonpCallback():U.jsonpCallback,ye?U[ye]=U[ye].replace(fu,"$1"+V):U.jsonp!==!1&&(U.url+=(Al.test(U.url)?"&":"?")+U.jsonp+"="+V),U.converters["script json"]=function(){return me||j.error(V+" was not called"),me[0]},U.dataTypes[0]="json",ae=_[V],_[V]=function(){me=arguments},G.always(function(){ae===void 0?j(_).removeProp(V):_[V]=ae,U[V]&&(U.jsonpCallback=S.jsonpCallback,Il.push(V)),me&&Y(ae)&&ae(me[0]),me=ae=void 0}),"script"}),ee.createHTMLDocument=function(){var U=re.implementation.createHTMLDocument("").body;return U.innerHTML="<form></form><form></form>",U.childNodes.length===2}(),j.parseHTML=function(U,S,G){if(typeof U!="string")return[];typeof S=="boolean"&&(G=S,S=!1);var V,ae,me;return S||(ee.createHTMLDocument?(S=re.implementation.createHTMLDocument(""),V=S.createElement("base"),V.href=re.location.href,S.head.appendChild(V)):S=re),ae=ue.exec(U),me=!G&&[],ae?[S.createElement(ae[1])]:(ae=Ko([U],S,me),me&&me.length&&j(me).remove(),j.merge([],ae.childNodes))},j.fn.load=function(U,S,G){var V,ae,me,ye=this,Fe=U.indexOf(" ");return Fe>-1&&(V=Bs(U.slice(Fe)),U=U.slice(0,Fe)),Y(S)?(G=S,S=void 0):S&&typeof S=="object"&&(ae="POST"),ye.length>0&&j.ajax({url:U,type:ae||"GET",dataType:"html",data:S}).done(function(rt){me=arguments,ye.html(V?j("<div>").append(j.parseHTML(rt)).find(V):rt)}).always(G&&function(rt,pt){ye.each(function(){G.apply(this,me||[rt.responseText,pt,rt])})}),this},j.expr.pseudos.animated=function(U){return j.grep(j.timers,function(S){return U===S.elem}).length},j.offset={setOffset:function(S,G,V){var ae,me,ye,Fe,rt,pt,Xt,fn=j.css(S,"position"),Kn=j(S),Wt={};fn==="static"&&(S.style.position="relative"),rt=Kn.offset(),ye=j.css(S,"top"),pt=j.css(S,"left"),Xt=(fn==="absolute"||fn==="fixed")&&(ye+pt).indexOf("auto")>-1,Xt?(ae=Kn.position(),Fe=ae.top,me=ae.left):(Fe=parseFloat(ye)||0,me=parseFloat(pt)||0),Y(G)&&(G=G.call(S,V,j.extend({},rt))),G.top!=null&&(Wt.top=G.top-rt.top+Fe),G.left!=null&&(Wt.left=G.left-rt.left+me),"using"in G?G.using.call(S,Wt):Kn.css(Wt)}},j.fn.extend({offset:function(S){if(arguments.length)return S===void 0?this:this.each(function(me){j.offset.setOffset(this,S,me)});var G,V,ae=this[0];if(!!ae)return ae.getClientRects().length?(G=ae.getBoundingClientRect(),V=ae.ownerDocument.defaultView,{top:G.top+V.pageYOffset,left:G.left+V.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var S,G,V,ae=this[0],me={top:0,left:0};if(j.css(ae,"position")==="fixed")G=ae.getBoundingClientRect();else{for(G=this.offset(),V=ae.ownerDocument,S=ae.offsetParent||V.documentElement;S&&(S===V.body||S===V.documentElement)&&j.css(S,"position")==="static";)S=S.parentNode;S&&S!==ae&&S.nodeType===1&&(me=j(S).offset(),me.top+=j.css(S,"borderTopWidth",!0),me.left+=j.css(S,"borderLeftWidth",!0))}return{top:G.top-me.top-j.css(ae,"marginTop",!0),left:G.left-me.left-j.css(ae,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var S=this.offsetParent;S&&j.css(S,"position")==="static";)S=S.offsetParent;return S||pr})}}),j.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(U,S){var G=S==="pageYOffset";j.fn[U]=function(V){return ln(this,function(ae,me,ye){var Fe;if(le(ae)?Fe=ae:ae.nodeType===9&&(Fe=ae.defaultView),ye===void 0)return Fe?Fe[S]:ae[me];Fe?Fe.scrollTo(G?Fe.pageXOffset:ye,G?ye:Fe.pageYOffset):ae[me]=ye},U,V,arguments.length)}}),j.each(["top","left"],function(U,S){j.cssHooks[S]=ou(ee.pixelPosition,function(G,V){if(V)return V=au(G,S),Du.test(V)?j(G).position()[S]+"px":V})}),j.each({Height:"height",Width:"width"},function(U,S){j.each({padding:"inner"+U,content:S,"":"outer"+U},function(G,V){j.fn[V]=function(ae,me){var ye=arguments.length&&(G||typeof ae!="boolean"),Fe=G||(ae===!0||me===!0?"margin":"border");return ln(this,function(rt,pt,Xt){var fn;return le(rt)?V.indexOf("outer")===0?rt["inner"+U]:rt.document.documentElement["client"+U]:rt.nodeType===9?(fn=rt.documentElement,Math.max(rt.body["scroll"+U],fn["scroll"+U],rt.body["offset"+U],fn["offset"+U],fn["client"+U])):Xt===void 0?j.css(rt,pt,Fe):j.style(rt,pt,Xt,Fe)},S,ye?ae:void 0,ye)}})}),j.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(U,S){j.fn[S]=function(G){return this.on(S,G)}}),j.fn.extend({bind:function(S,G,V){return this.on(S,null,G,V)},unbind:function(S,G){return this.off(S,null,G)},delegate:function(S,G,V,ae){return this.on(G,S,V,ae)},undelegate:function(S,G,V){return arguments.length===1?this.off(S,"**"):this.off(G,S||"**",V)},hover:function(S,G){return this.mouseenter(S).mouseleave(G||S)}}),j.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(U,S){j.fn[S]=function(G,V){return arguments.length>0?this.on(S,null,G,V):this.trigger(S)}});var Us=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;j.proxy=function(U,S){var G,V,ae;if(typeof S=="string"&&(G=U[S],S=U,U=G),!!Y(U))return V=R.call(arguments,2),ae=function(){return U.apply(S||this,V.concat(R.call(arguments)))},ae.guid=U.guid=U.guid||j.guid++,ae},j.holdReady=function(U){U?j.readyWait++:j.ready(!0)},j.isArray=Array.isArray,j.parseJSON=JSON.parse,j.nodeName=Je,j.isFunction=Y,j.isWindow=le,j.camelCase=Mn,j.type=oe,j.now=Date.now,j.isNumeric=function(U){var S=j.type(U);return(S==="number"||S==="string")&&!isNaN(U-parseFloat(U))},j.trim=function(U){return U==null?"":(U+"").replace(Us,"$1")},B=[],C=function(){return j}.apply(T,B),C!==void 0&&(fe.exports=C);var Vs=_.jQuery,vo=_.$;return j.noConflict=function(U){return _.$===j&&(_.$=vo),U&&_.jQuery===j&&(_.jQuery=Vs),j},typeof P=="undefined"&&(_.jQuery=_.$=j),j})},EbDI:function(fe,T){function v(B){if(typeof Symbol!="undefined"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},Efrf:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SwatchesGroup=void 0;var B=v("q1tI"),C=W(B),_=v("/FUP"),P=W(_),N=v("3WF5"),z=W(N),R=v("BmQL"),q=W(R);function W(X){return X&&X.__esModule?X:{default:X}}var Z=T.SwatchesGroup=function(ne){var ie=ne.onClick,te=ne.onSwatchHover,ce=ne.group,ee=ne.active,Y=(0,P.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return C.default.createElement("div",{style:Y.group},(0,z.default)(ce,function(le,re){return C.default.createElement(q.default,{key:le,color:le,active:le.toLowerCase()===ee,first:re===0,last:re===ce.length-1,onClick:ie,onSwatchHover:te})}))};T.default=Z},Ej2v:function(fe,T){fe.exports=v;function v(){var B=new Float32Array(2);return B[0]=0,B[1]=0,B}},F4jT:function(fe,T,v){fe.exports=C;var B=v("NEPx");function C(_,P){var N=_[0],z=_[1],R=P[0],q=P[1];return Math.abs(N-R)<=B*Math.max(1,Math.abs(N),Math.abs(R))&&Math.abs(z-q)<=B*Math.max(1,Math.abs(z),Math.abs(q))}},FKLu:function(fe,T,v){fe.exports=C;var B=v("Ej2v")();function C(_,P,N,z,R,q){var W,Z;for(P||(P=2),N||(N=0),z?Z=Math.min(z*P+N,_.length):Z=_.length,W=N;W<Z;W+=P)B[0]=_[W],B[1]=_[W+1],R(B,B,q),_[W]=B[0],_[W+1]=B[1];return _}},FV85:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.TargetTypeEnum=T.BindingTypeEnum=T.BindingScopeEnum=void 0;var B={Request:"Request",Singleton:"Singleton",Transient:"Transient"};T.BindingScopeEnum=B;var C={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};T.BindingTypeEnum=C;var _={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};T.TargetTypeEnum=_},FXSy:function(fe,T){},"FbP/":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Photoshop=void 0;var B=function(){function ke(Je,Pe){for(var Ae=0;Ae<Pe.length;Ae++){var ot=Pe[Ae];ot.enumerable=ot.enumerable||!1,ot.configurable=!0,"value"in ot&&(ot.writable=!0),Object.defineProperty(Je,ot.key,ot)}}return function(Je,Pe,Ae){return Pe&&ke(Je.prototype,Pe),Ae&&ke(Je,Ae),Je}}(),C=v("q1tI"),_=ge(C),P=v("17x9"),N=ge(P),z=v("/FUP"),R=ge(z),q=v("QkVN"),W=ge(q),Z=v("TM95"),X=v("81by"),ne=ge(X),ie=v("BKMn"),te=ge(ie),ce=v("sVjb"),ee=ge(ce),Y=v("DRdP"),le=ge(Y),re=v("2zpl"),Q=ge(re);function ge(ke){return ke&&ke.__esModule?ke:{default:ke}}function oe(ke,Je){if(!(ke instanceof Je))throw new TypeError("Cannot call a class as a function")}function Te(ke,Je){if(!ke)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Je&&(typeof Je=="object"||typeof Je=="function")?Je:ke}function be(ke,Je){if(typeof Je!="function"&&Je!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Je);ke.prototype=Object.create(Je&&Je.prototype,{constructor:{value:ke,enumerable:!1,writable:!0,configurable:!0}}),Je&&(Object.setPrototypeOf?Object.setPrototypeOf(ke,Je):ke.__proto__=Je)}var j=T.Photoshop=function(ke){be(Je,ke);function Je(Pe){oe(this,Je);var Ae=Te(this,(Je.__proto__||Object.getPrototypeOf(Je)).call(this));return Ae.state={currentColor:Pe.hex},Ae}return B(Je,[{key:"render",value:function(){var Ae=this.props,ot=Ae.styles,k=ot===void 0?{}:ot,Xe=Ae.className,Ot=Xe===void 0?"":Xe,lt=(0,R.default)((0,W.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},k));return _.default.createElement("div",{style:lt.picker,className:"photoshop-picker "+Ot},_.default.createElement("div",{style:lt.head},this.props.header),_.default.createElement("div",{style:lt.body,className:"flexbox-fix"},_.default.createElement("div",{style:lt.saturation},_.default.createElement(Z.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:te.default,onChange:this.props.onChange})),_.default.createElement("div",{style:lt.hue},_.default.createElement(Z.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:ee.default,onChange:this.props.onChange})),_.default.createElement("div",{style:lt.controls},_.default.createElement("div",{style:lt.top,className:"flexbox-fix"},_.default.createElement("div",{style:lt.previews},_.default.createElement(Q.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),_.default.createElement("div",{style:lt.actions},_.default.createElement(le.default,{label:"OK",onClick:this.props.onAccept,active:!0}),_.default.createElement(le.default,{label:"Cancel",onClick:this.props.onCancel}),_.default.createElement(ne.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),Je}(_.default.Component);j.propTypes={header:N.default.string,styles:N.default.object},j.defaultProps={header:"Color Picker",styles:{}},T.default=(0,Z.ColorWrap)(j)},FlHB:function(fe,T,v){"use strict";v.d(T,"a",function(){return nt});var B=v("o0o1"),C=v.n(B),_=v("yXPU"),P=v.n(_),N=v("yG8O"),z=v.n(N),R=v("lwsE"),q=v.n(R),W=v("W8MJ"),Z=v.n(W),X=v("U+yc"),ne=v.n(X),ie=v("1ABj"),te=v.n(ie),ce=v("4cb6"),ee=v.n(ce),Y=v("+uE7"),le=v("+xCn"),re=v("94HZ"),Q,ge,oe,Te,be,j,ke,Je,Pe,Ae,ot,k,Xe;function Ot($t,ze){var ue;if(typeof Symbol=="undefined"||$t[Symbol.iterator]==null){if(Array.isArray($t)||(ue=lt($t))||ze&&$t&&typeof $t.length=="number"){ue&&($t=ue);var an=0,nn=function(){};return{s:nn,n:function(){return an>=$t.length?{done:!0}:{done:!1,value:$t[an++]}},e:function(Qt){throw Qt},f:nn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qn=!0,Pt=!1,Tn;return{s:function(){ue=$t[Symbol.iterator]()},n:function(){var Qt=ue.next();return Qn=Qt.done,Qt},e:function(Qt){Pt=!0,Tn=Qt},f:function(){try{!Qn&&ue.return!=null&&ue.return()}finally{if(Pt)throw Tn}}}}function lt($t,ze){if(!!$t){if(typeof $t=="string")return Ut($t,ze);var ue=Object.prototype.toString.call($t).slice(8,-1);if(ue==="Object"&&$t.constructor&&(ue=$t.constructor.name),ue==="Map"||ue==="Set")return Array.from($t);if(ue==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ue))return Ut($t,ze)}}function Ut($t,ze){(ze==null||ze>$t.length)&&(ze=$t.length);for(var ue=0,an=new Array(ze);ue<ze;ue++)an[ue]=$t[ue];return an}var Jt={NONE:0,ENCODE:1,HIGHLIGHT:2},nt=(Q=Object(ce.injectable)(),ge=Object(ce.inject)(Y.a.RenderEngine),oe=Object(ce.inject)(Y.a.ResourcePool),Te=Object(ce.inject)(Y.a.RenderPassFactory),be=Object(ce.inject)(Y.a.MeshComponentManager),Q(j=(ke=(Xe=k=function(){function $t(){var ze=this;q()(this,$t),z()(this,"engine",Je,this),z()(this,"resourcePool",Pe,this),z()(this,"renderPassFactory",Ae,this),z()(this,"mesh",ot,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(ue,an,nn){var Qn=ue.createRenderTarget(an,"picking fbo",{width:1,height:1});nn.data={output:an.write(ue,Qn)},an.hasSideEffect=!0},this.execute=function(){var ue=P()(C.a.mark(function an(nn,Qn,Pt){var Tn,rr,Qt;return C.a.wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:if(ze.views=Pt,!ze.alreadyInRendering){kn.next=3;break}return kn.abrupt("return");case 3:Tn=Ot(Pt);try{for(Qt=function(){var st=rr.value,At=st.getViewport(),vt=At.width,_t=At.height;ze.alreadyInRendering=!0;var Kt=nn.getResourceNode(Qn.data.output);ze.pickingFBO=ze.resourcePool.getOrCreateResource(Kt.resource),ze.pickingFBO.resize({width:vt,height:_t}),ze.engine.useFramebuffer(ze.pickingFBO,function(){ze.engine.clear({framebuffer:ze.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var ln=ze.renderPassFactory(re.a.IDENTIFIER),bt=[],A=st.getScene(),Jn=Ot(A.getEntities()),Mn;try{for(Jn.s();!(Mn=Jn.n()).done;){var sr=Mn.value,ir=ze.mesh.getComponentByEntity(sr),Ie=ir.material;Ie.setUniform("u_PickingStage",Jt.ENCODE),bt.push(ir)}}catch(pe){Jn.e(pe)}finally{Jn.f()}ln.renderView(st),bt.forEach(function(pe){var Qe=pe.material;Qe.setUniform("u_PickingStage",Jt.HIGHLIGHT)}),ze.alreadyInRendering=!1})},Tn.s();!(rr=Tn.n()).done;)Qt()}catch(Sn){Tn.e(Sn)}finally{Tn.f()}case 5:case"end":return kn.stop()}},an)}));return function(an,nn,Qn){return ue.apply(this,arguments)}}(),this.pick=function(ue,an){var nn=ue.x,Qn=ue.y,Pt=ze.engine,Tn=Pt.readPixels,rr=Pt.useFramebuffer,Qt=an.getViewport(),sn=Qt.width,kn=Qt.height,Sn=nn*window.devicePixelRatio,st=Qn*window.devicePixelRatio;if(!(Sn>sn||Sn<0||st>kn||st<0)){var At,vt;return rr(ze.pickingFBO,function(){At=Tn({x:Math.round(Sn),y:Math.round(kn-(Qn+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:ze.pickingFBO}),(At[0]!==0||At[1]!==0||At[2]!==0)&&(vt=Object(le.a)(At),ze.highlightEnabled&&ze.highlightPickedFeature(At,an))}),vt}}}return Z()($t,[{key:"enableHighlight",value:function(ue){this.highlightEnabled=ue}},{key:"setHighlightColor",value:function(ue){this.highlightColor=ue}},{key:"highlightPickedFeature",value:function(ue,an){if(ue){var nn=Ot(an.getScene().getEntities()),Qn;try{for(nn.s();!(Qn=nn.n()).done;){var Pt=Qn.value,Tn=this.mesh.getComponentByEntity(Pt),rr=Tn.material;rr.setUniform("u_PickingStage",Jt.HIGHLIGHT),rr.setUniform("u_PickingColor",[ue[0],ue[1],ue[2]]),rr.setUniform("u_HighlightColor",this.highlightColor)}}catch(Qt){nn.e(Qt)}finally{nn.f()}}}}]),$t}(),k.IDENTIFIER="PixelPicking Pass",Xe),Je=ne()(ke.prototype,"engine",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=ne()(ke.prototype,"resourcePool",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=ne()(ke.prototype,"renderPassFactory",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=ne()(ke.prototype,"mesh",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke))||j)},GXnB:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Metadata=void 0;var B=v("xfSm"),C=function(){function _(P,N){this.key=P,this.value=N}return _.prototype.toString=function(){return this.key===B.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},_}();T.Metadata=C},"Gc+X":function(fe,T,v){"use strict";v.d(T,"a",function(){return Y});var B=v("lwsE"),C=v.n(B),_=v("W8MJ"),P=v.n(_),N=v("PJYZ"),z=v.n(N),R=v("7W2i"),q=v.n(R),W=v("a1gu"),Z=v.n(W),X=v("Nsbk"),ne=v.n(X),ie=v("IOcx"),te=v("oDt1");function ce(le){var re=ee();return function(){var ge=ne()(le),oe;if(re){var Te=ne()(this).constructor;oe=Reflect.construct(ge,arguments,Te)}else oe=ge.apply(this,arguments);return Z()(this,oe)}}function ee(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(le){return!1}}var Y=function(le){q()(Q,le);var re=ce(Q);function Q(ge){var oe;return C()(this,Q),oe=re.call(this,ge),oe.dirtyFlag=void 0,oe.localDirtyFlag=void 0,oe.parent=null,oe.localPosition=ie.d.fromValues(0,0,0),oe.localRotation=ie.c.fromValues(0,0,0,1),oe.localScale=ie.d.fromValues(1,1,1),oe.localTransform=ie.b.create(),oe.position=ie.d.fromValues(0,0,0),oe.rotation=ie.c.fromValues(0,0,0,1),oe.scaling=ie.d.fromValues(1,1,1),oe.worldTransform=ie.b.create(),oe.matrixTransform=function(){var Te=ie.b.create();return function(be){ie.b.multiply(Te,oe.getLocalTransform(),be),ie.b.getScaling(oe.localScale,Te),ie.b.getTranslation(oe.localPosition,Te),ie.b.getRotation(oe.localRotation,Te)}}(),oe.rotateRollPitchYaw=function(){var Te=ie.c.create(),be=ie.c.create(),j=ie.c.create();return function(ke,Je,Pe){oe.setDirty(),ie.c.fromEuler(Te,ke,0,0),ie.c.fromEuler(be,0,Je,0),ie.c.fromEuler(j,0,0,Pe),ie.c.multiply(oe.localRotation,Te,oe.localRotation),ie.c.multiply(oe.localRotation,oe.localRotation,be),ie.c.multiply(oe.localRotation,j,oe.localRotation),ie.c.normalize(oe.localRotation,oe.localRotation)}}(),oe.lerp=function(){var Te=ie.d.create(),be=ie.c.create(),j=ie.d.create(),ke=ie.d.create(),Je=ie.c.create(),Pe=ie.d.create();return function(Ae,ot,k){oe.setDirty(),ie.b.getScaling(Te,Ae.worldTransform),ie.b.getTranslation(j,Ae.worldTransform),ie.b.getRotation(be,Ae.worldTransform),ie.b.getScaling(ke,ot.worldTransform),ie.b.getTranslation(Pe,ot.worldTransform),ie.b.getRotation(Je,ot.worldTransform),ie.d.lerp(oe.localScale,Te,ke,k),ie.c.slerp(oe.localRotation,be,Je,k),ie.d.lerp(oe.localPosition,j,Pe,k)}}(),oe.translate=function(){var Te=ie.d.create();return function(be){return ie.d.add(Te,oe.getPosition(),be),oe.setPosition(Te),oe.setDirty(!0),z()(oe)}}(),oe.translateLocal=function(){return function(Te){return ie.d.transformQuat(Te,Te,oe.localRotation),ie.d.add(oe.localPosition,oe.localPosition,Te),oe.setLocalDirty(!0),z()(oe)}}(),oe.setPosition=function(){var Te=ie.b.create();return function(be){return oe.position=be,oe.setLocalDirty(!0),oe.parent===null?ie.d.copy(oe.localPosition,be):(ie.b.copy(Te,oe.parent.worldTransform),ie.b.invert(Te,Te),ie.d.transformMat4(oe.localPosition,be,Te)),z()(oe)}}(),oe.rotate=function(){var Te=ie.c.create();return function(be){if(oe.parent===null)ie.c.multiply(oe.localRotation,oe.localRotation,be),ie.c.normalize(oe.localRotation,oe.localRotation);else{var j=oe.getRotation(),ke=oe.parent.getRotation();ie.c.copy(Te,ke),ie.c.invert(Te,Te),ie.c.multiply(Te,Te,be),ie.c.multiply(oe.localRotation,be,j),ie.c.normalize(oe.localRotation,oe.localRotation)}return oe.setLocalDirty(),z()(oe)}}(),oe.rotateLocal=function(){return function(Te){return ie.c.multiply(oe.localRotation,oe.localRotation,Te),ie.c.normalize(oe.localRotation,oe.localRotation),oe.setLocalDirty(!0),z()(oe)}}(),oe.setRotation=function(){var Te=ie.c.create();return function(be){return oe.parent===null?ie.c.copy(oe.localRotation,be):(ie.c.copy(Te,oe.parent.getRotation()),ie.c.invert(Te,Te),ie.c.copy(oe.localRotation,Te),ie.c.mul(oe.localRotation,oe.localRotation,be)),oe.setLocalDirty(!0),z()(oe)}}(),oe}return P()(Q,[{key:"setLocalPosition",value:function(oe){ie.d.copy(this.localPosition,oe),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(oe){ie.d.copy(this.localScale,oe),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(oe){return ie.c.copy(this.localRotation,oe),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;oe?this.dirtyFlag|=Q.DIRTY:this.dirtyFlag&=~Q.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;oe?(this.localDirtyFlag|=Q.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~Q.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(ie.b.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(oe){ie.b.multiply(this.worldTransform,oe.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),ie.b.getScaling(this.localScale,this.worldTransform),ie.b.getTranslation(this.localPosition,this.worldTransform),ie.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=ie.d.fromValues(0,0,0),this.localRotation=ie.c.fromValues(0,0,0,1),this.localScale=ie.d.fromValues(1,1,1)}},{key:"scaleLocal",value:function(oe){return this.setLocalDirty(),ie.d.multiply(this.localScale,this.localScale,oe),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(ie.b.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return ie.b.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return ie.b.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return ie.b.getScaling(this.scaling,this.worldTransform),this.scaling}}]),Q}(te.a);Y.DIRTY=1<<0},GiOz:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SketchFields=void 0;var B=v("q1tI"),C=q(B),_=v("/FUP"),P=q(_),N=v("p8yl"),z=q(N),R=v("TM95");function q(Z){return Z&&Z.__esModule?Z:{default:Z}}var W=T.SketchFields=function(X){var ne=X.onChange,ie=X.rgb,te=X.hsl,ce=X.hex,ee=X.disableAlpha,Y=(0,P.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:ee}),le=function(Q,ge){Q.hex?z.default.isValidHex(Q.hex)&&ne({hex:Q.hex,source:"hex"},ge):Q.r||Q.g||Q.b?ne({r:Q.r||ie.r,g:Q.g||ie.g,b:Q.b||ie.b,a:ie.a,source:"rgb"},ge):Q.a&&(Q.a<0?Q.a=0:Q.a>100&&(Q.a=100),Q.a/=100,ne({h:te.h,s:te.s,l:te.l,a:Q.a,source:"rgb"},ge))};return C.default.createElement("div",{style:Y.fields,className:"flexbox-fix"},C.default.createElement("div",{style:Y.double},C.default.createElement(R.EditableInput,{style:{input:Y.input,label:Y.label},label:"hex",value:ce.replace("#",""),onChange:le})),C.default.createElement("div",{style:Y.single},C.default.createElement(R.EditableInput,{style:{input:Y.input,label:Y.label},label:"r",value:ie.r,onChange:le,dragLabel:"true",dragMax:"255"})),C.default.createElement("div",{style:Y.single},C.default.createElement(R.EditableInput,{style:{input:Y.input,label:Y.label},label:"g",value:ie.g,onChange:le,dragLabel:"true",dragMax:"255"})),C.default.createElement("div",{style:Y.single},C.default.createElement(R.EditableInput,{style:{input:Y.input,label:Y.label},label:"b",value:ie.b,onChange:le,dragLabel:"true",dragMax:"255"})),C.default.createElement("div",{style:Y.alpha},C.default.createElement(R.EditableInput,{style:{input:Y.input,label:Y.label},label:"a",value:Math.round(ie.a*100),onChange:le,dragLabel:"true",dragMax:"100"})))};T.default=W},Gj0h:function(fe,T,v){"use strict";v.d(T,"AST_TOKEN_TYPES",function(){return Ae}),v.d(T,"STORAGE_CLASS",function(){return k}),v.d(T,"Target",function(){return Xe}),v.d(T,"DefineValuePlaceholder",function(){return Ot});var B=v("mNvP"),C=v.n(B),_=v("oDt1"),P=v("z5Mu"),N=v("0arJ"),z=v("4dNS"),R=v("ph3A"),q=v("RlxE"),W=v("baXp"),Z=v("6B+r"),X=v("kfnj"),ne=v("FlHB"),ie=v("tyuB"),te=v("IQ25"),ce=v("BFph"),ee=v("Gc+X"),Y=v("9y2T");v.d(T,"createEntity",function(){return Y.b});var le=v("+uE7");v.d(T,"IDENTIFIER",function(){return le.a});var re=v("OqSR");v.d(T,"createWorldContainer",function(){return re.a});var Q=v("Ssa2");v.d(T,"generateAABBFromVertices",function(){return Q.a});var ge=v("ljNz");v.d(T,"isSafari",function(){return ge.a});var oe=v("8jh/"),Te=v("48hD");v.d(T,"AABB",function(){return Te.a}),v.d(T,"Frustum",function(){return Te.b});var be=v("4XUm");v.o(be,"gl")&&v.d(T,"gl",function(){return be.gl});var j=v("FXSy"),ke=v.n(j);v.o(j,"gl")&&v.d(T,"gl",function(){return j.gl});var Je=v("Yydy"),Pe=v.n(Je);v.o(Je,"gl")&&v.d(T,"gl",function(){return Je.gl}),v.o(be,"gl")&&v.d(T,"gl",function(){return be.gl});var Ae;(function(lt){lt.Void="Void",lt.Boolean="Boolean",lt.Float="Float",lt.Uint32="Uint32",lt.Int32="Int32",lt.Vector="Vector",lt.Vector2Float="vec2<f32>",lt.Vector3Float="vec3<f32>",lt.Vector4Float="vec4<f32>",lt.Vector2Boolean="vec2<bool>",lt.Vector3Boolean="vec3<bool>",lt.Vector4Boolean="vec4<bool>",lt.Vector2Uint="vec2<u32>",lt.Vector3Uint="vec3<u32>",lt.Vector4Uint="vec4<u32>",lt.Vector2Int="vec2<i32>",lt.Vector3Int="vec3<i32>",lt.Vector4Int="vec4<i32>",lt.Matrix="Matrix",lt.Matrix3x3Float="mat3x3<f32>",lt.Matrix4x4Float="mat4x4<i32>",lt.Struct="Struct",lt.FloatArray="Float[]",lt.Vector4FloatArray="vec4<f32>[]"})(Ae||(Ae={}));var ot;(function(lt){lt.Program="Program",lt.Identifier="Identifier",lt.VariableDeclaration="VariableDeclaration",lt.BlockStatement="BlockStatement",lt.ReturnStatement="ReturnStatement",lt.FunctionDeclaration="FunctionDeclaration",lt.VariableDeclarator="VariableDeclarator",lt.AssignmentExpression="AssignmentExpression",lt.LogicalExpression="LogicalExpression",lt.BinaryExpression="BinaryExpression",lt.ArrayExpression="ArrayExpression",lt.UnaryExpression="UnaryExpression",lt.UpdateExpression="UpdateExpression",lt.FunctionExpression="FunctionExpression",lt.MemberExpression="MemberExpression",lt.ConditionalExpression="ConditionalExpression",lt.ExpressionStatement="ExpressionStatement",lt.CallExpression="CallExpression",lt.NumThreadStatement="NumThreadStatement",lt.StorageStatement="StorageStatement",lt.DoWhileStatement="DoWhileStatement",lt.WhileStatement="WhileStatement",lt.ForStatement="ForStatement",lt.BreakStatement="BreakStatement",lt.ContinueStatement="ContinueStatement",lt.IfStatement="IfStatement",lt.ImportedFunctionStatement="ImportedFunctionStatement"})(ot||(ot={}));var k;(function(lt){lt.Input="Input",lt.Output="Output",lt.Uniform="Uniform",lt.Workgroup="Workgroup",lt.UniformConstant="UniformConstant",lt.Image="Image",lt.StorageBuffer="StorageBuffer",lt.Private="Private",lt.Function="Function"})(k||(k={}));var Xe;(function(lt){lt.GLSL100="GLSL100",lt.GLSL450="GLSL450",lt.WGSL="WGSL"})(Xe||(Xe={}));var Ot="__DefineValuePlaceholder__"},HTXX:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Sketch=void 0;var B=Object.assign||function(Y){for(var le=1;le<arguments.length;le++){var re=arguments[le];for(var Q in re)Object.prototype.hasOwnProperty.call(re,Q)&&(Y[Q]=re[Q])}return Y},C=v("q1tI"),_=ce(C),P=v("17x9"),N=ce(P),z=v("/FUP"),R=ce(z),q=v("QkVN"),W=ce(q),Z=v("TM95"),X=v("GiOz"),ne=ce(X),ie=v("eHBW"),te=ce(ie);function ce(Y){return Y&&Y.__esModule?Y:{default:Y}}var ee=T.Sketch=function(le){var re=le.width,Q=le.rgb,ge=le.hex,oe=le.hsv,Te=le.hsl,be=le.onChange,j=le.onSwatchHover,ke=le.disableAlpha,Je=le.presetColors,Pe=le.renderers,Ae=le.styles,ot=Ae===void 0?{}:Ae,k=le.className,Xe=k===void 0?"":k,Ot=(0,R.default)((0,W.default)({default:B({picker:{width:re,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+Q.r+","+Q.g+","+Q.b+","+Q.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},ot),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},ot),{disableAlpha:ke});return _.default.createElement("div",{style:Ot.picker,className:"sketch-picker "+Xe},_.default.createElement("div",{style:Ot.saturation},_.default.createElement(Z.Saturation,{style:Ot.Saturation,hsl:Te,hsv:oe,onChange:be})),_.default.createElement("div",{style:Ot.controls,className:"flexbox-fix"},_.default.createElement("div",{style:Ot.sliders},_.default.createElement("div",{style:Ot.hue},_.default.createElement(Z.Hue,{style:Ot.Hue,hsl:Te,onChange:be})),_.default.createElement("div",{style:Ot.alpha},_.default.createElement(Z.Alpha,{style:Ot.Alpha,rgb:Q,hsl:Te,renderers:Pe,onChange:be}))),_.default.createElement("div",{style:Ot.color},_.default.createElement(Z.Checkboard,null),_.default.createElement("div",{style:Ot.activeColor}))),_.default.createElement(ne.default,{rgb:Q,hsl:Te,hex:ge,onChange:be,disableAlpha:ke}),_.default.createElement(te.default,{colors:Je,onClick:be,onSwatchHover:j}))};ee.propTypes={disableAlpha:N.default.bool,width:N.default.oneOfType([N.default.string,N.default.number]),styles:N.default.object},ee.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},T.default=(0,Z.ColorWrap)(ee)},HlQe:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Hue=void 0;var B=function(){function te(ce,ee){for(var Y=0;Y<ee.length;Y++){var le=ee[Y];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ce,le.key,le)}}return function(ce,ee,Y){return ee&&te(ce.prototype,ee),Y&&te(ce,Y),ce}}(),C=v("q1tI"),_=W(C),P=v("/FUP"),N=W(P),z=v("srvI"),R=q(z);function q(te){if(te&&te.__esModule)return te;var ce={};if(te!=null)for(var ee in te)Object.prototype.hasOwnProperty.call(te,ee)&&(ce[ee]=te[ee]);return ce.default=te,ce}function W(te){return te&&te.__esModule?te:{default:te}}function Z(te,ce){if(!(te instanceof ce))throw new TypeError("Cannot call a class as a function")}function X(te,ce){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:te}function ne(te,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);te.prototype=Object.create(ce&&ce.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(te,ce):te.__proto__=ce)}var ie=T.Hue=function(te){ne(ce,te);function ce(){var ee,Y,le,re;Z(this,ce);for(var Q=arguments.length,ge=Array(Q),oe=0;oe<Q;oe++)ge[oe]=arguments[oe];return re=(Y=(le=X(this,(ee=ce.__proto__||Object.getPrototypeOf(ce)).call.apply(ee,[this].concat(ge))),le),le.handleChange=function(Te){var be=R.calculateChange(Te,le.props.direction,le.props.hsl,le.container);be&&typeof le.props.onChange=="function"&&le.props.onChange(be,Te)},le.handleMouseDown=function(Te){le.handleChange(Te),window.addEventListener("mousemove",le.handleChange),window.addEventListener("mouseup",le.handleMouseUp)},le.handleMouseUp=function(){le.unbindEventListeners()},Y),X(le,re)}return B(ce,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var Y=this,le=this.props.direction,re=le===void 0?"horizontal":le,Q=(0,N.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:re==="vertical"});return _.default.createElement("div",{style:Q.hue},_.default.createElement("div",{className:"hue-"+re,style:Q.container,ref:function(oe){return Y.container=oe},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},_.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),_.default.createElement("div",{style:Q.pointer},this.props.pointer?_.default.createElement(this.props.pointer,this.props):_.default.createElement("div",{style:Q.slider}))))}}]),ce}(C.PureComponent||C.Component);T.default=ie},HpQ9:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ContainerSnapshot=void 0;var B=function(){function C(){}return C.of=function(_,P){var N=new C;return N.bindings=_,N.middleware=P,N},C}();T.ContainerSnapshot=B},IOcx:function(fe,T,v){"use strict";v.d(T,"a",function(){return B}),v.d(T,"b",function(){return C}),v.d(T,"c",function(){return N}),v.d(T,"d",function(){return _}),v.d(T,"e",function(){return P});var B={};v.r(B),v.d(B,"create",function(){return ie}),v.d(B,"fromMat4",function(){return te}),v.d(B,"clone",function(){return ce}),v.d(B,"copy",function(){return ee}),v.d(B,"fromValues",function(){return Y}),v.d(B,"set",function(){return le}),v.d(B,"identity",function(){return re}),v.d(B,"transpose",function(){return Q}),v.d(B,"invert",function(){return ge}),v.d(B,"adjoint",function(){return oe}),v.d(B,"determinant",function(){return Te}),v.d(B,"multiply",function(){return be}),v.d(B,"translate",function(){return j}),v.d(B,"rotate",function(){return ke}),v.d(B,"scale",function(){return Je}),v.d(B,"fromTranslation",function(){return Pe}),v.d(B,"fromRotation",function(){return Ae}),v.d(B,"fromScaling",function(){return ot}),v.d(B,"fromMat2d",function(){return k}),v.d(B,"fromQuat",function(){return Xe}),v.d(B,"normalFromMat4",function(){return Ot}),v.d(B,"projection",function(){return lt}),v.d(B,"str",function(){return Ut}),v.d(B,"frob",function(){return Jt}),v.d(B,"add",function(){return nt}),v.d(B,"subtract",function(){return $t}),v.d(B,"multiplyScalar",function(){return ze}),v.d(B,"multiplyScalarAndAdd",function(){return ue}),v.d(B,"exactEquals",function(){return an}),v.d(B,"equals",function(){return nn}),v.d(B,"mul",function(){return Qn}),v.d(B,"sub",function(){return Pt});var C={};v.r(C),v.d(C,"create",function(){return Tn}),v.d(C,"clone",function(){return rr}),v.d(C,"copy",function(){return Qt}),v.d(C,"fromValues",function(){return sn}),v.d(C,"set",function(){return kn}),v.d(C,"identity",function(){return Sn}),v.d(C,"transpose",function(){return st}),v.d(C,"invert",function(){return At}),v.d(C,"adjoint",function(){return vt}),v.d(C,"determinant",function(){return _t}),v.d(C,"multiply",function(){return Kt}),v.d(C,"translate",function(){return ln}),v.d(C,"scale",function(){return bt}),v.d(C,"rotate",function(){return A}),v.d(C,"rotateX",function(){return Jn}),v.d(C,"rotateY",function(){return Mn}),v.d(C,"rotateZ",function(){return sr}),v.d(C,"fromTranslation",function(){return ir}),v.d(C,"fromScaling",function(){return Ie}),v.d(C,"fromRotation",function(){return pe}),v.d(C,"fromXRotation",function(){return Qe}),v.d(C,"fromYRotation",function(){return cn}),v.d(C,"fromZRotation",function(){return En}),v.d(C,"fromRotationTranslation",function(){return lr}),v.d(C,"fromQuat2",function(){return gi}),v.d(C,"getTranslation",function(){return cr}),v.d(C,"getScaling",function(){return wr}),v.d(C,"getRotation",function(){return pr}),v.d(C,"fromRotationTranslationScale",function(){return Sr}),v.d(C,"fromRotationTranslationScaleOrigin",function(){return Qr}),v.d(C,"fromQuat",function(){return ya}),v.d(C,"frustum",function(){return Ki}),v.d(C,"perspectiveNO",function(){return vs}),v.d(C,"perspective",function(){return tu}),v.d(C,"perspectiveZO",function(){return Wa}),v.d(C,"perspectiveFromFieldOfView",function(){return Ka}),v.d(C,"orthoNO",function(){return Ya}),v.d(C,"ortho",function(){return Fi}),v.d(C,"orthoZO",function(){return _a}),v.d(C,"lookAt",function(){return Pa}),v.d(C,"targetTo",function(){return Ti}),v.d(C,"str",function(){return nu}),v.d(C,"frob",function(){return Ko}),v.d(C,"add",function(){return Yr}),v.d(C,"subtract",function(){return ba}),v.d(C,"multiplyScalar",function(){return gs}),v.d(C,"multiplyScalarAndAdd",function(){return ra}),v.d(C,"exactEquals",function(){return $a}),v.d(C,"equals",function(){return ha}),v.d(C,"mul",function(){return ka}),v.d(C,"sub",function(){return Ro});var _={};v.r(_),v.d(_,"create",function(){return So}),v.d(_,"clone",function(){return ho}),v.d(_,"length",function(){return ps}),v.d(_,"fromValues",function(){return ru}),v.d(_,"copy",function(){return Ol}),v.d(_,"set",function(){return No}),v.d(_,"add",function(){return Sl}),v.d(_,"subtract",function(){return Du}),v.d(_,"multiply",function(){return Iu}),v.d(_,"divide",function(){return iu}),v.d(_,"ceil",function(){return Ru}),v.d(_,"floor",function(){return Nu}),v.d(_,"min",function(){return au}),v.d(_,"max",function(){return ou}),v.d(_,"round",function(){return su}),v.d(_,"scale",function(){return Yt}),v.d(_,"scaleAndAdd",function(){return gn}),v.d(_,"distance",function(){return qn}),v.d(_,"squaredDistance",function(){return tr}),v.d(_,"squaredLength",function(){return kr}),v.d(_,"negate",function(){return Fa}),v.d(_,"inverse",function(){return ci}),v.d(_,"normalize",function(){return fi}),v.d(_,"dot",function(){return Rr}),v.d(_,"cross",function(){return di}),v.d(_,"lerp",function(){return Br}),v.d(_,"hermite",function(){return Za}),v.d(_,"bezier",function(){return Yo}),v.d(_,"random",function(){return Bf}),v.d(_,"transformMat4",function(){return Lo}),v.d(_,"transformMat3",function(){return Fs}),v.d(_,"transformQuat",function(){return Lu}),v.d(_,"rotateX",function(){return uu}),v.d(_,"rotateY",function(){return nc}),v.d(_,"rotateZ",function(){return Qc}),v.d(_,"angle",function(){return rc}),v.d(_,"zero",function(){return Zo}),v.d(_,"str",function(){return jo}),v.d(_,"exactEquals",function(){return ua}),v.d(_,"equals",function(){return ju}),v.d(_,"sub",function(){return _u}),v.d(_,"mul",function(){return Bs}),v.d(_,"div",function(){return Ss}),v.d(_,"dist",function(){return Ml}),v.d(_,"sqrDist",function(){return qc}),v.d(_,"len",function(){return lu}),v.d(_,"sqrLen",function(){return Zu}),v.d(_,"forEach",function(){return Al});var P={};v.r(P),v.d(P,"create",function(){return ic}),v.d(P,"clone",function(){return ac}),v.d(P,"fromValues",function(){return ef}),v.d(P,"copy",function(){return ms}),v.d(P,"set",function(){return tf}),v.d(P,"add",function(){return Fu}),v.d(P,"subtract",function(){return Tl}),v.d(P,"multiply",function(){return Gs}),v.d(P,"divide",function(){return Pl}),v.d(P,"ceil",function(){return Gf}),v.d(P,"floor",function(){return kl}),v.d(P,"min",function(){return oc}),v.d(P,"max",function(){return nf}),v.d(P,"round",function(){return rf}),v.d(P,"scale",function(){return ta}),v.d(P,"scaleAndAdd",function(){return $i}),v.d(P,"distance",function(){return Ju}),v.d(P,"squaredDistance",function(){return Jo}),v.d(P,"length",function(){return cu}),v.d(P,"squaredLength",function(){return Qu}),v.d(P,"negate",function(){return Dl}),v.d(P,"inverse",function(){return zf}),v.d(P,"normalize",function(){return zs}),v.d(P,"dot",function(){return sc}),v.d(P,"cross",function(){return Aa}),v.d(P,"lerp",function(){return Il}),v.d(P,"random",function(){return fu}),v.d(P,"transformMat4",function(){return Us}),v.d(P,"transformQuat",function(){return Vs}),v.d(P,"zero",function(){return vo}),v.d(P,"str",function(){return U}),v.d(P,"exactEquals",function(){return S}),v.d(P,"equals",function(){return G}),v.d(P,"sub",function(){return V}),v.d(P,"mul",function(){return ae}),v.d(P,"div",function(){return me}),v.d(P,"dist",function(){return ye}),v.d(P,"sqrDist",function(){return Fe}),v.d(P,"len",function(){return rt}),v.d(P,"sqrLen",function(){return pt}),v.d(P,"forEach",function(){return Xt});var N={};v.r(N),v.d(N,"create",function(){return fn}),v.d(N,"identity",function(){return Kn}),v.d(N,"setAxisAngle",function(){return Wt}),v.d(N,"getAxisAngle",function(){return Dn}),v.d(N,"getAngle",function(){return Fr}),v.d(N,"multiply",function(){return Cr}),v.d(N,"rotateX",function(){return Ji}),v.d(N,"rotateY",function(){return go}),v.d(N,"rotateZ",function(){return Ca}),v.d(N,"calculateW",function(){return ao}),v.d(N,"exp",function(){return Ba}),v.d(N,"ln",function(){return $r}),v.d(N,"pow",function(){return Qo}),v.d(N,"slerp",function(){return Li}),v.d(N,"random",function(){return ia}),v.d(N,"invert",function(){return aa}),v.d(N,"conjugate",function(){return qu}),v.d(N,"fromMat3",function(){return Da}),v.d(N,"fromEuler",function(){return Mo}),v.d(N,"str",function(){return Hs}),v.d(N,"clone",function(){return Ws}),v.d(N,"fromValues",function(){return ys}),v.d(N,"copy",function(){return oo}),v.d(N,"set",function(){return qo}),v.d(N,"add",function(){return so}),v.d(N,"mul",function(){return Ja}),v.d(N,"scale",function(){return Bu}),v.d(N,"dot",function(){return es}),v.d(N,"lerp",function(){return Ui}),v.d(N,"length",function(){return $s}),v.d(N,"len",function(){return _o}),v.d(N,"squaredLength",function(){return Ms}),v.d(N,"sqrLen",function(){return af}),v.d(N,"normalize",function(){return Rl}),v.d(N,"exactEquals",function(){return uc}),v.d(N,"equals",function(){return Ao}),v.d(N,"rotationTo",function(){return Nl}),v.d(N,"sqlerp",function(){return bs}),v.d(N,"setAxes",function(){return el});var z=1e-6,R=typeof Float32Array!="undefined"?Float32Array:Array,q=Math.random;function W(y){R=y}var Z=Math.PI/180;function X(y){return y*Z}function ne(y,M){return Math.abs(y-M)<=z*Math.max(1,Math.abs(y),Math.abs(M))}Math.hypot||(Math.hypot=function(){for(var y=0,M=arguments.length;M--;)y+=arguments[M]*arguments[M];return Math.sqrt(y)});function ie(){var y=new R(9);return R!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[5]=0,y[6]=0,y[7]=0),y[0]=1,y[4]=1,y[8]=1,y}function te(y,M){return y[0]=M[0],y[1]=M[1],y[2]=M[2],y[3]=M[4],y[4]=M[5],y[5]=M[6],y[6]=M[8],y[7]=M[9],y[8]=M[10],y}function ce(y){var M=new R(9);return M[0]=y[0],M[1]=y[1],M[2]=y[2],M[3]=y[3],M[4]=y[4],M[5]=y[5],M[6]=y[6],M[7]=y[7],M[8]=y[8],M}function ee(y,M){return y[0]=M[0],y[1]=M[1],y[2]=M[2],y[3]=M[3],y[4]=M[4],y[5]=M[5],y[6]=M[6],y[7]=M[7],y[8]=M[8],y}function Y(y,M,K,he,Ce,Re,We,Ye,ht){var Ct=new R(9);return Ct[0]=y,Ct[1]=M,Ct[2]=K,Ct[3]=he,Ct[4]=Ce,Ct[5]=Re,Ct[6]=We,Ct[7]=Ye,Ct[8]=ht,Ct}function le(y,M,K,he,Ce,Re,We,Ye,ht,Ct){return y[0]=M,y[1]=K,y[2]=he,y[3]=Ce,y[4]=Re,y[5]=We,y[6]=Ye,y[7]=ht,y[8]=Ct,y}function re(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=1,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y}function Q(y,M){if(y===M){var K=M[1],he=M[2],Ce=M[5];y[1]=M[3],y[2]=M[6],y[3]=K,y[5]=M[7],y[6]=he,y[7]=Ce}else y[0]=M[0],y[1]=M[3],y[2]=M[6],y[3]=M[1],y[4]=M[4],y[5]=M[7],y[6]=M[2],y[7]=M[5],y[8]=M[8];return y}function ge(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=M[4],Ye=M[5],ht=M[6],Ct=M[7],Lt=M[8],_e=Lt*We-Ye*Ct,we=-Lt*Re+Ye*ht,Ue=Ct*Re-We*ht,et=K*_e+he*we+Ce*Ue;return et?(et=1/et,y[0]=_e*et,y[1]=(-Lt*he+Ce*Ct)*et,y[2]=(Ye*he-Ce*We)*et,y[3]=we*et,y[4]=(Lt*K-Ce*ht)*et,y[5]=(-Ye*K+Ce*Re)*et,y[6]=Ue*et,y[7]=(-Ct*K+he*ht)*et,y[8]=(We*K-he*Re)*et,y):null}function oe(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=M[4],Ye=M[5],ht=M[6],Ct=M[7],Lt=M[8];return y[0]=We*Lt-Ye*Ct,y[1]=Ce*Ct-he*Lt,y[2]=he*Ye-Ce*We,y[3]=Ye*ht-Re*Lt,y[4]=K*Lt-Ce*ht,y[5]=Ce*Re-K*Ye,y[6]=Re*Ct-We*ht,y[7]=he*ht-K*Ct,y[8]=K*We-he*Re,y}function Te(y){var M=y[0],K=y[1],he=y[2],Ce=y[3],Re=y[4],We=y[5],Ye=y[6],ht=y[7],Ct=y[8];return M*(Ct*Re-We*ht)+K*(-Ct*Ce+We*Ye)+he*(ht*Ce-Re*Ye)}function be(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=M[3],Ye=M[4],ht=M[5],Ct=M[6],Lt=M[7],_e=M[8],we=K[0],Ue=K[1],et=K[2],Se=K[3],De=K[4],Ke=K[5],kt=K[6],Vt=K[7],vn=K[8];return y[0]=we*he+Ue*We+et*Ct,y[1]=we*Ce+Ue*Ye+et*Lt,y[2]=we*Re+Ue*ht+et*_e,y[3]=Se*he+De*We+Ke*Ct,y[4]=Se*Ce+De*Ye+Ke*Lt,y[5]=Se*Re+De*ht+Ke*_e,y[6]=kt*he+Vt*We+vn*Ct,y[7]=kt*Ce+Vt*Ye+vn*Lt,y[8]=kt*Re+Vt*ht+vn*_e,y}function j(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=M[3],Ye=M[4],ht=M[5],Ct=M[6],Lt=M[7],_e=M[8],we=K[0],Ue=K[1];return y[0]=he,y[1]=Ce,y[2]=Re,y[3]=We,y[4]=Ye,y[5]=ht,y[6]=we*he+Ue*We+Ct,y[7]=we*Ce+Ue*Ye+Lt,y[8]=we*Re+Ue*ht+_e,y}function ke(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=M[3],Ye=M[4],ht=M[5],Ct=M[6],Lt=M[7],_e=M[8],we=Math.sin(K),Ue=Math.cos(K);return y[0]=Ue*he+we*We,y[1]=Ue*Ce+we*Ye,y[2]=Ue*Re+we*ht,y[3]=Ue*We-we*he,y[4]=Ue*Ye-we*Ce,y[5]=Ue*ht-we*Re,y[6]=Ct,y[7]=Lt,y[8]=_e,y}function Je(y,M,K){var he=K[0],Ce=K[1];return y[0]=he*M[0],y[1]=he*M[1],y[2]=he*M[2],y[3]=Ce*M[3],y[4]=Ce*M[4],y[5]=Ce*M[5],y[6]=M[6],y[7]=M[7],y[8]=M[8],y}function Pe(y,M){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=1,y[5]=0,y[6]=M[0],y[7]=M[1],y[8]=1,y}function Ae(y,M){var K=Math.sin(M),he=Math.cos(M);return y[0]=he,y[1]=K,y[2]=0,y[3]=-K,y[4]=he,y[5]=0,y[6]=0,y[7]=0,y[8]=1,y}function ot(y,M){return y[0]=M[0],y[1]=0,y[2]=0,y[3]=0,y[4]=M[1],y[5]=0,y[6]=0,y[7]=0,y[8]=1,y}function k(y,M){return y[0]=M[0],y[1]=M[1],y[2]=0,y[3]=M[2],y[4]=M[3],y[5]=0,y[6]=M[4],y[7]=M[5],y[8]=1,y}function Xe(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=K+K,Ye=he+he,ht=Ce+Ce,Ct=K*We,Lt=he*We,_e=he*Ye,we=Ce*We,Ue=Ce*Ye,et=Ce*ht,Se=Re*We,De=Re*Ye,Ke=Re*ht;return y[0]=1-_e-et,y[3]=Lt-Ke,y[6]=we+De,y[1]=Lt+Ke,y[4]=1-Ct-et,y[7]=Ue-Se,y[2]=we-De,y[5]=Ue+Se,y[8]=1-Ct-_e,y}function Ot(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=M[4],Ye=M[5],ht=M[6],Ct=M[7],Lt=M[8],_e=M[9],we=M[10],Ue=M[11],et=M[12],Se=M[13],De=M[14],Ke=M[15],kt=K*Ye-he*We,Vt=K*ht-Ce*We,vn=K*Ct-Re*We,In=he*ht-Ce*Ye,xn=he*Ct-Re*Ye,Mr=Ce*Ct-Re*ht,xr=Lt*Se-_e*et,Er=Lt*De-we*et,Tr=Lt*Ke-Ue*et,yi=_e*De-we*Se,Xr=_e*Ke-Ue*Se,pi=we*Ke-Ue*De,jr=kt*pi-Vt*Xr+vn*yi+In*Tr-xn*Er+Mr*xr;return jr?(jr=1/jr,y[0]=(Ye*pi-ht*Xr+Ct*yi)*jr,y[1]=(ht*Tr-We*pi-Ct*Er)*jr,y[2]=(We*Xr-Ye*Tr+Ct*xr)*jr,y[3]=(Ce*Xr-he*pi-Re*yi)*jr,y[4]=(K*pi-Ce*Tr+Re*Er)*jr,y[5]=(he*Tr-K*Xr-Re*xr)*jr,y[6]=(Se*Mr-De*xn+Ke*In)*jr,y[7]=(De*vn-et*Mr-Ke*Vt)*jr,y[8]=(et*xn-Se*vn+Ke*kt)*jr,y):null}function lt(y,M,K){return y[0]=2/M,y[1]=0,y[2]=0,y[3]=0,y[4]=-2/K,y[5]=0,y[6]=-1,y[7]=1,y[8]=1,y}function Ut(y){return"mat3("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+", "+y[6]+", "+y[7]+", "+y[8]+")"}function Jt(y){return Math.hypot(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8])}function nt(y,M,K){return y[0]=M[0]+K[0],y[1]=M[1]+K[1],y[2]=M[2]+K[2],y[3]=M[3]+K[3],y[4]=M[4]+K[4],y[5]=M[5]+K[5],y[6]=M[6]+K[6],y[7]=M[7]+K[7],y[8]=M[8]+K[8],y}function $t(y,M,K){return y[0]=M[0]-K[0],y[1]=M[1]-K[1],y[2]=M[2]-K[2],y[3]=M[3]-K[3],y[4]=M[4]-K[4],y[5]=M[5]-K[5],y[6]=M[6]-K[6],y[7]=M[7]-K[7],y[8]=M[8]-K[8],y}function ze(y,M,K){return y[0]=M[0]*K,y[1]=M[1]*K,y[2]=M[2]*K,y[3]=M[3]*K,y[4]=M[4]*K,y[5]=M[5]*K,y[6]=M[6]*K,y[7]=M[7]*K,y[8]=M[8]*K,y}function ue(y,M,K,he){return y[0]=M[0]+K[0]*he,y[1]=M[1]+K[1]*he,y[2]=M[2]+K[2]*he,y[3]=M[3]+K[3]*he,y[4]=M[4]+K[4]*he,y[5]=M[5]+K[5]*he,y[6]=M[6]+K[6]*he,y[7]=M[7]+K[7]*he,y[8]=M[8]+K[8]*he,y}function an(y,M){return y[0]===M[0]&&y[1]===M[1]&&y[2]===M[2]&&y[3]===M[3]&&y[4]===M[4]&&y[5]===M[5]&&y[6]===M[6]&&y[7]===M[7]&&y[8]===M[8]}function nn(y,M){var K=y[0],he=y[1],Ce=y[2],Re=y[3],We=y[4],Ye=y[5],ht=y[6],Ct=y[7],Lt=y[8],_e=M[0],we=M[1],Ue=M[2],et=M[3],Se=M[4],De=M[5],Ke=M[6],kt=M[7],Vt=M[8];return Math.abs(K-_e)<=z*Math.max(1,Math.abs(K),Math.abs(_e))&&Math.abs(he-we)<=z*Math.max(1,Math.abs(he),Math.abs(we))&&Math.abs(Ce-Ue)<=z*Math.max(1,Math.abs(Ce),Math.abs(Ue))&&Math.abs(Re-et)<=z*Math.max(1,Math.abs(Re),Math.abs(et))&&Math.abs(We-Se)<=z*Math.max(1,Math.abs(We),Math.abs(Se))&&Math.abs(Ye-De)<=z*Math.max(1,Math.abs(Ye),Math.abs(De))&&Math.abs(ht-Ke)<=z*Math.max(1,Math.abs(ht),Math.abs(Ke))&&Math.abs(Ct-kt)<=z*Math.max(1,Math.abs(Ct),Math.abs(kt))&&Math.abs(Lt-Vt)<=z*Math.max(1,Math.abs(Lt),Math.abs(Vt))}var Qn=be,Pt=$t;function Tn(){var y=new R(16);return R!=Float32Array&&(y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0),y[0]=1,y[5]=1,y[10]=1,y[15]=1,y}function rr(y){var M=new R(16);return M[0]=y[0],M[1]=y[1],M[2]=y[2],M[3]=y[3],M[4]=y[4],M[5]=y[5],M[6]=y[6],M[7]=y[7],M[8]=y[8],M[9]=y[9],M[10]=y[10],M[11]=y[11],M[12]=y[12],M[13]=y[13],M[14]=y[14],M[15]=y[15],M}function Qt(y,M){return y[0]=M[0],y[1]=M[1],y[2]=M[2],y[3]=M[3],y[4]=M[4],y[5]=M[5],y[6]=M[6],y[7]=M[7],y[8]=M[8],y[9]=M[9],y[10]=M[10],y[11]=M[11],y[12]=M[12],y[13]=M[13],y[14]=M[14],y[15]=M[15],y}function sn(y,M,K,he,Ce,Re,We,Ye,ht,Ct,Lt,_e,we,Ue,et,Se){var De=new R(16);return De[0]=y,De[1]=M,De[2]=K,De[3]=he,De[4]=Ce,De[5]=Re,De[6]=We,De[7]=Ye,De[8]=ht,De[9]=Ct,De[10]=Lt,De[11]=_e,De[12]=we,De[13]=Ue,De[14]=et,De[15]=Se,De}function kn(y,M,K,he,Ce,Re,We,Ye,ht,Ct,Lt,_e,we,Ue,et,Se,De){return y[0]=M,y[1]=K,y[2]=he,y[3]=Ce,y[4]=Re,y[5]=We,y[6]=Ye,y[7]=ht,y[8]=Ct,y[9]=Lt,y[10]=_e,y[11]=we,y[12]=Ue,y[13]=et,y[14]=Se,y[15]=De,y}function Sn(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function st(y,M){if(y===M){var K=M[1],he=M[2],Ce=M[3],Re=M[6],We=M[7],Ye=M[11];y[1]=M[4],y[2]=M[8],y[3]=M[12],y[4]=K,y[6]=M[9],y[7]=M[13],y[8]=he,y[9]=Re,y[11]=M[14],y[12]=Ce,y[13]=We,y[14]=Ye}else y[0]=M[0],y[1]=M[4],y[2]=M[8],y[3]=M[12],y[4]=M[1],y[5]=M[5],y[6]=M[9],y[7]=M[13],y[8]=M[2],y[9]=M[6],y[10]=M[10],y[11]=M[14],y[12]=M[3],y[13]=M[7],y[14]=M[11],y[15]=M[15];return y}function At(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=M[4],Ye=M[5],ht=M[6],Ct=M[7],Lt=M[8],_e=M[9],we=M[10],Ue=M[11],et=M[12],Se=M[13],De=M[14],Ke=M[15],kt=K*Ye-he*We,Vt=K*ht-Ce*We,vn=K*Ct-Re*We,In=he*ht-Ce*Ye,xn=he*Ct-Re*Ye,Mr=Ce*Ct-Re*ht,xr=Lt*Se-_e*et,Er=Lt*De-we*et,Tr=Lt*Ke-Ue*et,yi=_e*De-we*Se,Xr=_e*Ke-Ue*Se,pi=we*Ke-Ue*De,jr=kt*pi-Vt*Xr+vn*yi+In*Tr-xn*Er+Mr*xr;return jr?(jr=1/jr,y[0]=(Ye*pi-ht*Xr+Ct*yi)*jr,y[1]=(Ce*Xr-he*pi-Re*yi)*jr,y[2]=(Se*Mr-De*xn+Ke*In)*jr,y[3]=(we*xn-_e*Mr-Ue*In)*jr,y[4]=(ht*Tr-We*pi-Ct*Er)*jr,y[5]=(K*pi-Ce*Tr+Re*Er)*jr,y[6]=(De*vn-et*Mr-Ke*Vt)*jr,y[7]=(Lt*Mr-we*vn+Ue*Vt)*jr,y[8]=(We*Xr-Ye*Tr+Ct*xr)*jr,y[9]=(he*Tr-K*Xr-Re*xr)*jr,y[10]=(et*xn-Se*vn+Ke*kt)*jr,y[11]=(_e*vn-Lt*xn-Ue*kt)*jr,y[12]=(Ye*Er-We*yi-ht*xr)*jr,y[13]=(K*yi-he*Er+Ce*xr)*jr,y[14]=(Se*Vt-et*In-De*kt)*jr,y[15]=(Lt*In-_e*Vt+we*kt)*jr,y):null}function vt(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=M[4],Ye=M[5],ht=M[6],Ct=M[7],Lt=M[8],_e=M[9],we=M[10],Ue=M[11],et=M[12],Se=M[13],De=M[14],Ke=M[15];return y[0]=Ye*(we*Ke-Ue*De)-_e*(ht*Ke-Ct*De)+Se*(ht*Ue-Ct*we),y[1]=-(he*(we*Ke-Ue*De)-_e*(Ce*Ke-Re*De)+Se*(Ce*Ue-Re*we)),y[2]=he*(ht*Ke-Ct*De)-Ye*(Ce*Ke-Re*De)+Se*(Ce*Ct-Re*ht),y[3]=-(he*(ht*Ue-Ct*we)-Ye*(Ce*Ue-Re*we)+_e*(Ce*Ct-Re*ht)),y[4]=-(We*(we*Ke-Ue*De)-Lt*(ht*Ke-Ct*De)+et*(ht*Ue-Ct*we)),y[5]=K*(we*Ke-Ue*De)-Lt*(Ce*Ke-Re*De)+et*(Ce*Ue-Re*we),y[6]=-(K*(ht*Ke-Ct*De)-We*(Ce*Ke-Re*De)+et*(Ce*Ct-Re*ht)),y[7]=K*(ht*Ue-Ct*we)-We*(Ce*Ue-Re*we)+Lt*(Ce*Ct-Re*ht),y[8]=We*(_e*Ke-Ue*Se)-Lt*(Ye*Ke-Ct*Se)+et*(Ye*Ue-Ct*_e),y[9]=-(K*(_e*Ke-Ue*Se)-Lt*(he*Ke-Re*Se)+et*(he*Ue-Re*_e)),y[10]=K*(Ye*Ke-Ct*Se)-We*(he*Ke-Re*Se)+et*(he*Ct-Re*Ye),y[11]=-(K*(Ye*Ue-Ct*_e)-We*(he*Ue-Re*_e)+Lt*(he*Ct-Re*Ye)),y[12]=-(We*(_e*De-we*Se)-Lt*(Ye*De-ht*Se)+et*(Ye*we-ht*_e)),y[13]=K*(_e*De-we*Se)-Lt*(he*De-Ce*Se)+et*(he*we-Ce*_e),y[14]=-(K*(Ye*De-ht*Se)-We*(he*De-Ce*Se)+et*(he*ht-Ce*Ye)),y[15]=K*(Ye*we-ht*_e)-We*(he*we-Ce*_e)+Lt*(he*ht-Ce*Ye),y}function _t(y){var M=y[0],K=y[1],he=y[2],Ce=y[3],Re=y[4],We=y[5],Ye=y[6],ht=y[7],Ct=y[8],Lt=y[9],_e=y[10],we=y[11],Ue=y[12],et=y[13],Se=y[14],De=y[15],Ke=M*We-K*Re,kt=M*Ye-he*Re,Vt=M*ht-Ce*Re,vn=K*Ye-he*We,In=K*ht-Ce*We,xn=he*ht-Ce*Ye,Mr=Ct*et-Lt*Ue,xr=Ct*Se-_e*Ue,Er=Ct*De-we*Ue,Tr=Lt*Se-_e*et,yi=Lt*De-we*et,Xr=_e*De-we*Se;return Ke*Xr-kt*yi+Vt*Tr+vn*Er-In*xr+xn*Mr}function Kt(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=M[3],Ye=M[4],ht=M[5],Ct=M[6],Lt=M[7],_e=M[8],we=M[9],Ue=M[10],et=M[11],Se=M[12],De=M[13],Ke=M[14],kt=M[15],Vt=K[0],vn=K[1],In=K[2],xn=K[3];return y[0]=Vt*he+vn*Ye+In*_e+xn*Se,y[1]=Vt*Ce+vn*ht+In*we+xn*De,y[2]=Vt*Re+vn*Ct+In*Ue+xn*Ke,y[3]=Vt*We+vn*Lt+In*et+xn*kt,Vt=K[4],vn=K[5],In=K[6],xn=K[7],y[4]=Vt*he+vn*Ye+In*_e+xn*Se,y[5]=Vt*Ce+vn*ht+In*we+xn*De,y[6]=Vt*Re+vn*Ct+In*Ue+xn*Ke,y[7]=Vt*We+vn*Lt+In*et+xn*kt,Vt=K[8],vn=K[9],In=K[10],xn=K[11],y[8]=Vt*he+vn*Ye+In*_e+xn*Se,y[9]=Vt*Ce+vn*ht+In*we+xn*De,y[10]=Vt*Re+vn*Ct+In*Ue+xn*Ke,y[11]=Vt*We+vn*Lt+In*et+xn*kt,Vt=K[12],vn=K[13],In=K[14],xn=K[15],y[12]=Vt*he+vn*Ye+In*_e+xn*Se,y[13]=Vt*Ce+vn*ht+In*we+xn*De,y[14]=Vt*Re+vn*Ct+In*Ue+xn*Ke,y[15]=Vt*We+vn*Lt+In*et+xn*kt,y}function ln(y,M,K){var he=K[0],Ce=K[1],Re=K[2],We,Ye,ht,Ct,Lt,_e,we,Ue,et,Se,De,Ke;return M===y?(y[12]=M[0]*he+M[4]*Ce+M[8]*Re+M[12],y[13]=M[1]*he+M[5]*Ce+M[9]*Re+M[13],y[14]=M[2]*he+M[6]*Ce+M[10]*Re+M[14],y[15]=M[3]*he+M[7]*Ce+M[11]*Re+M[15]):(We=M[0],Ye=M[1],ht=M[2],Ct=M[3],Lt=M[4],_e=M[5],we=M[6],Ue=M[7],et=M[8],Se=M[9],De=M[10],Ke=M[11],y[0]=We,y[1]=Ye,y[2]=ht,y[3]=Ct,y[4]=Lt,y[5]=_e,y[6]=we,y[7]=Ue,y[8]=et,y[9]=Se,y[10]=De,y[11]=Ke,y[12]=We*he+Lt*Ce+et*Re+M[12],y[13]=Ye*he+_e*Ce+Se*Re+M[13],y[14]=ht*he+we*Ce+De*Re+M[14],y[15]=Ct*he+Ue*Ce+Ke*Re+M[15]),y}function bt(y,M,K){var he=K[0],Ce=K[1],Re=K[2];return y[0]=M[0]*he,y[1]=M[1]*he,y[2]=M[2]*he,y[3]=M[3]*he,y[4]=M[4]*Ce,y[5]=M[5]*Ce,y[6]=M[6]*Ce,y[7]=M[7]*Ce,y[8]=M[8]*Re,y[9]=M[9]*Re,y[10]=M[10]*Re,y[11]=M[11]*Re,y[12]=M[12],y[13]=M[13],y[14]=M[14],y[15]=M[15],y}function A(y,M,K,he){var Ce=he[0],Re=he[1],We=he[2],Ye=Math.hypot(Ce,Re,We),ht,Ct,Lt,_e,we,Ue,et,Se,De,Ke,kt,Vt,vn,In,xn,Mr,xr,Er,Tr,yi,Xr,pi,jr,Dr;return Ye<z?null:(Ye=1/Ye,Ce*=Ye,Re*=Ye,We*=Ye,ht=Math.sin(K),Ct=Math.cos(K),Lt=1-Ct,_e=M[0],we=M[1],Ue=M[2],et=M[3],Se=M[4],De=M[5],Ke=M[6],kt=M[7],Vt=M[8],vn=M[9],In=M[10],xn=M[11],Mr=Ce*Ce*Lt+Ct,xr=Re*Ce*Lt+We*ht,Er=We*Ce*Lt-Re*ht,Tr=Ce*Re*Lt-We*ht,yi=Re*Re*Lt+Ct,Xr=We*Re*Lt+Ce*ht,pi=Ce*We*Lt+Re*ht,jr=Re*We*Lt-Ce*ht,Dr=We*We*Lt+Ct,y[0]=_e*Mr+Se*xr+Vt*Er,y[1]=we*Mr+De*xr+vn*Er,y[2]=Ue*Mr+Ke*xr+In*Er,y[3]=et*Mr+kt*xr+xn*Er,y[4]=_e*Tr+Se*yi+Vt*Xr,y[5]=we*Tr+De*yi+vn*Xr,y[6]=Ue*Tr+Ke*yi+In*Xr,y[7]=et*Tr+kt*yi+xn*Xr,y[8]=_e*pi+Se*jr+Vt*Dr,y[9]=we*pi+De*jr+vn*Dr,y[10]=Ue*pi+Ke*jr+In*Dr,y[11]=et*pi+kt*jr+xn*Dr,M!==y&&(y[12]=M[12],y[13]=M[13],y[14]=M[14],y[15]=M[15]),y)}function Jn(y,M,K){var he=Math.sin(K),Ce=Math.cos(K),Re=M[4],We=M[5],Ye=M[6],ht=M[7],Ct=M[8],Lt=M[9],_e=M[10],we=M[11];return M!==y&&(y[0]=M[0],y[1]=M[1],y[2]=M[2],y[3]=M[3],y[12]=M[12],y[13]=M[13],y[14]=M[14],y[15]=M[15]),y[4]=Re*Ce+Ct*he,y[5]=We*Ce+Lt*he,y[6]=Ye*Ce+_e*he,y[7]=ht*Ce+we*he,y[8]=Ct*Ce-Re*he,y[9]=Lt*Ce-We*he,y[10]=_e*Ce-Ye*he,y[11]=we*Ce-ht*he,y}function Mn(y,M,K){var he=Math.sin(K),Ce=Math.cos(K),Re=M[0],We=M[1],Ye=M[2],ht=M[3],Ct=M[8],Lt=M[9],_e=M[10],we=M[11];return M!==y&&(y[4]=M[4],y[5]=M[5],y[6]=M[6],y[7]=M[7],y[12]=M[12],y[13]=M[13],y[14]=M[14],y[15]=M[15]),y[0]=Re*Ce-Ct*he,y[1]=We*Ce-Lt*he,y[2]=Ye*Ce-_e*he,y[3]=ht*Ce-we*he,y[8]=Re*he+Ct*Ce,y[9]=We*he+Lt*Ce,y[10]=Ye*he+_e*Ce,y[11]=ht*he+we*Ce,y}function sr(y,M,K){var he=Math.sin(K),Ce=Math.cos(K),Re=M[0],We=M[1],Ye=M[2],ht=M[3],Ct=M[4],Lt=M[5],_e=M[6],we=M[7];return M!==y&&(y[8]=M[8],y[9]=M[9],y[10]=M[10],y[11]=M[11],y[12]=M[12],y[13]=M[13],y[14]=M[14],y[15]=M[15]),y[0]=Re*Ce+Ct*he,y[1]=We*Ce+Lt*he,y[2]=Ye*Ce+_e*he,y[3]=ht*Ce+we*he,y[4]=Ct*Ce-Re*he,y[5]=Lt*Ce-We*he,y[6]=_e*Ce-Ye*he,y[7]=we*Ce-ht*he,y}function ir(y,M){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=M[0],y[13]=M[1],y[14]=M[2],y[15]=1,y}function Ie(y,M){return y[0]=M[0],y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=M[1],y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=M[2],y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function pe(y,M,K){var he=K[0],Ce=K[1],Re=K[2],We=Math.hypot(he,Ce,Re),Ye,ht,Ct;return We<z?null:(We=1/We,he*=We,Ce*=We,Re*=We,Ye=Math.sin(M),ht=Math.cos(M),Ct=1-ht,y[0]=he*he*Ct+ht,y[1]=Ce*he*Ct+Re*Ye,y[2]=Re*he*Ct-Ce*Ye,y[3]=0,y[4]=he*Ce*Ct-Re*Ye,y[5]=Ce*Ce*Ct+ht,y[6]=Re*Ce*Ct+he*Ye,y[7]=0,y[8]=he*Re*Ct+Ce*Ye,y[9]=Ce*Re*Ct-he*Ye,y[10]=Re*Re*Ct+ht,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y)}function Qe(y,M){var K=Math.sin(M),he=Math.cos(M);return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=he,y[6]=K,y[7]=0,y[8]=0,y[9]=-K,y[10]=he,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function cn(y,M){var K=Math.sin(M),he=Math.cos(M);return y[0]=he,y[1]=0,y[2]=-K,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=K,y[9]=0,y[10]=he,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function En(y,M){var K=Math.sin(M),he=Math.cos(M);return y[0]=he,y[1]=K,y[2]=0,y[3]=0,y[4]=-K,y[5]=he,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function lr(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=M[3],Ye=he+he,ht=Ce+Ce,Ct=Re+Re,Lt=he*Ye,_e=he*ht,we=he*Ct,Ue=Ce*ht,et=Ce*Ct,Se=Re*Ct,De=We*Ye,Ke=We*ht,kt=We*Ct;return y[0]=1-(Ue+Se),y[1]=_e+kt,y[2]=we-Ke,y[3]=0,y[4]=_e-kt,y[5]=1-(Lt+Se),y[6]=et+De,y[7]=0,y[8]=we+Ke,y[9]=et-De,y[10]=1-(Lt+Ue),y[11]=0,y[12]=K[0],y[13]=K[1],y[14]=K[2],y[15]=1,y}function gi(y,M){var K=new R(3),he=-M[0],Ce=-M[1],Re=-M[2],We=M[3],Ye=M[4],ht=M[5],Ct=M[6],Lt=M[7],_e=he*he+Ce*Ce+Re*Re+We*We;return _e>0?(K[0]=(Ye*We+Lt*he+ht*Re-Ct*Ce)*2/_e,K[1]=(ht*We+Lt*Ce+Ct*he-Ye*Re)*2/_e,K[2]=(Ct*We+Lt*Re+Ye*Ce-ht*he)*2/_e):(K[0]=(Ye*We+Lt*he+ht*Re-Ct*Ce)*2,K[1]=(ht*We+Lt*Ce+Ct*he-Ye*Re)*2,K[2]=(Ct*We+Lt*Re+Ye*Ce-ht*he)*2),lr(y,M,K),y}function cr(y,M){return y[0]=M[12],y[1]=M[13],y[2]=M[14],y}function wr(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[4],We=M[5],Ye=M[6],ht=M[8],Ct=M[9],Lt=M[10];return y[0]=Math.hypot(K,he,Ce),y[1]=Math.hypot(Re,We,Ye),y[2]=Math.hypot(ht,Ct,Lt),y}function pr(y,M){var K=new R(3);wr(K,M);var he=1/K[0],Ce=1/K[1],Re=1/K[2],We=M[0]*he,Ye=M[1]*Ce,ht=M[2]*Re,Ct=M[4]*he,Lt=M[5]*Ce,_e=M[6]*Re,we=M[8]*he,Ue=M[9]*Ce,et=M[10]*Re,Se=We+Lt+et,De=0;return Se>0?(De=Math.sqrt(Se+1)*2,y[3]=.25*De,y[0]=(_e-Ue)/De,y[1]=(we-ht)/De,y[2]=(Ye-Ct)/De):We>Lt&&We>et?(De=Math.sqrt(1+We-Lt-et)*2,y[3]=(_e-Ue)/De,y[0]=.25*De,y[1]=(Ye+Ct)/De,y[2]=(we+ht)/De):Lt>et?(De=Math.sqrt(1+Lt-We-et)*2,y[3]=(we-ht)/De,y[0]=(Ye+Ct)/De,y[1]=.25*De,y[2]=(_e+Ue)/De):(De=Math.sqrt(1+et-We-Lt)*2,y[3]=(Ye-Ct)/De,y[0]=(we+ht)/De,y[1]=(_e+Ue)/De,y[2]=.25*De),y}function Sr(y,M,K,he){var Ce=M[0],Re=M[1],We=M[2],Ye=M[3],ht=Ce+Ce,Ct=Re+Re,Lt=We+We,_e=Ce*ht,we=Ce*Ct,Ue=Ce*Lt,et=Re*Ct,Se=Re*Lt,De=We*Lt,Ke=Ye*ht,kt=Ye*Ct,Vt=Ye*Lt,vn=he[0],In=he[1],xn=he[2];return y[0]=(1-(et+De))*vn,y[1]=(we+Vt)*vn,y[2]=(Ue-kt)*vn,y[3]=0,y[4]=(we-Vt)*In,y[5]=(1-(_e+De))*In,y[6]=(Se+Ke)*In,y[7]=0,y[8]=(Ue+kt)*xn,y[9]=(Se-Ke)*xn,y[10]=(1-(_e+et))*xn,y[11]=0,y[12]=K[0],y[13]=K[1],y[14]=K[2],y[15]=1,y}function Qr(y,M,K,he,Ce){var Re=M[0],We=M[1],Ye=M[2],ht=M[3],Ct=Re+Re,Lt=We+We,_e=Ye+Ye,we=Re*Ct,Ue=Re*Lt,et=Re*_e,Se=We*Lt,De=We*_e,Ke=Ye*_e,kt=ht*Ct,Vt=ht*Lt,vn=ht*_e,In=he[0],xn=he[1],Mr=he[2],xr=Ce[0],Er=Ce[1],Tr=Ce[2],yi=(1-(Se+Ke))*In,Xr=(Ue+vn)*In,pi=(et-Vt)*In,jr=(Ue-vn)*xn,Dr=(1-(we+Ke))*xn,va=(De+kt)*xn,ts=(et+Vt)*Mr,Ll=(De-kt)*Mr,lc=(1-(we+Se))*Mr;return y[0]=yi,y[1]=Xr,y[2]=pi,y[3]=0,y[4]=jr,y[5]=Dr,y[6]=va,y[7]=0,y[8]=ts,y[9]=Ll,y[10]=lc,y[11]=0,y[12]=K[0]+xr-(yi*xr+jr*Er+ts*Tr),y[13]=K[1]+Er-(Xr*xr+Dr*Er+Ll*Tr),y[14]=K[2]+Tr-(pi*xr+va*Er+lc*Tr),y[15]=1,y}function ya(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=K+K,Ye=he+he,ht=Ce+Ce,Ct=K*We,Lt=he*We,_e=he*Ye,we=Ce*We,Ue=Ce*Ye,et=Ce*ht,Se=Re*We,De=Re*Ye,Ke=Re*ht;return y[0]=1-_e-et,y[1]=Lt+Ke,y[2]=we-De,y[3]=0,y[4]=Lt-Ke,y[5]=1-Ct-et,y[6]=Ue+Se,y[7]=0,y[8]=we+De,y[9]=Ue-Se,y[10]=1-Ct-_e,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}function Ki(y,M,K,he,Ce,Re,We){var Ye=1/(K-M),ht=1/(Ce-he),Ct=1/(Re-We);return y[0]=Re*2*Ye,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=Re*2*ht,y[6]=0,y[7]=0,y[8]=(K+M)*Ye,y[9]=(Ce+he)*ht,y[10]=(We+Re)*Ct,y[11]=-1,y[12]=0,y[13]=0,y[14]=We*Re*2*Ct,y[15]=0,y}function vs(y,M,K,he,Ce){var Re=1/Math.tan(M/2),We;return y[0]=Re/K,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=Re,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,Ce!=null&&Ce!==Infinity?(We=1/(he-Ce),y[10]=(Ce+he)*We,y[14]=2*Ce*he*We):(y[10]=-1,y[14]=-2*he),y}var tu=vs;function Wa(y,M,K,he,Ce){var Re=1/Math.tan(M/2),We;return y[0]=Re/K,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=Re,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[11]=-1,y[12]=0,y[13]=0,y[15]=0,Ce!=null&&Ce!==Infinity?(We=1/(he-Ce),y[10]=Ce*We,y[14]=Ce*he*We):(y[10]=-1,y[14]=-he),y}function Ka(y,M,K,he){var Ce=Math.tan(M.upDegrees*Math.PI/180),Re=Math.tan(M.downDegrees*Math.PI/180),We=Math.tan(M.leftDegrees*Math.PI/180),Ye=Math.tan(M.rightDegrees*Math.PI/180),ht=2/(We+Ye),Ct=2/(Ce+Re);return y[0]=ht,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=Ct,y[6]=0,y[7]=0,y[8]=-((We-Ye)*ht*.5),y[9]=(Ce-Re)*Ct*.5,y[10]=he/(K-he),y[11]=-1,y[12]=0,y[13]=0,y[14]=he*K/(K-he),y[15]=0,y}function Ya(y,M,K,he,Ce,Re,We){var Ye=1/(M-K),ht=1/(he-Ce),Ct=1/(Re-We);return y[0]=-2*Ye,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*ht,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*Ct,y[11]=0,y[12]=(M+K)*Ye,y[13]=(Ce+he)*ht,y[14]=(We+Re)*Ct,y[15]=1,y}var Fi=Ya;function _a(y,M,K,he,Ce,Re,We){var Ye=1/(M-K),ht=1/(he-Ce),Ct=1/(Re-We);return y[0]=-2*Ye,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*ht,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=Ct,y[11]=0,y[12]=(M+K)*Ye,y[13]=(Ce+he)*ht,y[14]=Re*Ct,y[15]=1,y}function Pa(y,M,K,he){var Ce,Re,We,Ye,ht,Ct,Lt,_e,we,Ue,et=M[0],Se=M[1],De=M[2],Ke=he[0],kt=he[1],Vt=he[2],vn=K[0],In=K[1],xn=K[2];return Math.abs(et-vn)<z&&Math.abs(Se-In)<z&&Math.abs(De-xn)<z?Sn(y):(Lt=et-vn,_e=Se-In,we=De-xn,Ue=1/Math.hypot(Lt,_e,we),Lt*=Ue,_e*=Ue,we*=Ue,Ce=kt*we-Vt*_e,Re=Vt*Lt-Ke*we,We=Ke*_e-kt*Lt,Ue=Math.hypot(Ce,Re,We),Ue?(Ue=1/Ue,Ce*=Ue,Re*=Ue,We*=Ue):(Ce=0,Re=0,We=0),Ye=_e*We-we*Re,ht=we*Ce-Lt*We,Ct=Lt*Re-_e*Ce,Ue=Math.hypot(Ye,ht,Ct),Ue?(Ue=1/Ue,Ye*=Ue,ht*=Ue,Ct*=Ue):(Ye=0,ht=0,Ct=0),y[0]=Ce,y[1]=Ye,y[2]=Lt,y[3]=0,y[4]=Re,y[5]=ht,y[6]=_e,y[7]=0,y[8]=We,y[9]=Ct,y[10]=we,y[11]=0,y[12]=-(Ce*et+Re*Se+We*De),y[13]=-(Ye*et+ht*Se+Ct*De),y[14]=-(Lt*et+_e*Se+we*De),y[15]=1,y)}function Ti(y,M,K,he){var Ce=M[0],Re=M[1],We=M[2],Ye=he[0],ht=he[1],Ct=he[2],Lt=Ce-K[0],_e=Re-K[1],we=We-K[2],Ue=Lt*Lt+_e*_e+we*we;Ue>0&&(Ue=1/Math.sqrt(Ue),Lt*=Ue,_e*=Ue,we*=Ue);var et=ht*we-Ct*_e,Se=Ct*Lt-Ye*we,De=Ye*_e-ht*Lt;return Ue=et*et+Se*Se+De*De,Ue>0&&(Ue=1/Math.sqrt(Ue),et*=Ue,Se*=Ue,De*=Ue),y[0]=et,y[1]=Se,y[2]=De,y[3]=0,y[4]=_e*De-we*Se,y[5]=we*et-Lt*De,y[6]=Lt*Se-_e*et,y[7]=0,y[8]=Lt,y[9]=_e,y[10]=we,y[11]=0,y[12]=Ce,y[13]=Re,y[14]=We,y[15]=1,y}function nu(y){return"mat4("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+", "+y[6]+", "+y[7]+", "+y[8]+", "+y[9]+", "+y[10]+", "+y[11]+", "+y[12]+", "+y[13]+", "+y[14]+", "+y[15]+")"}function Ko(y){return Math.hypot(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15])}function Yr(y,M,K){return y[0]=M[0]+K[0],y[1]=M[1]+K[1],y[2]=M[2]+K[2],y[3]=M[3]+K[3],y[4]=M[4]+K[4],y[5]=M[5]+K[5],y[6]=M[6]+K[6],y[7]=M[7]+K[7],y[8]=M[8]+K[8],y[9]=M[9]+K[9],y[10]=M[10]+K[10],y[11]=M[11]+K[11],y[12]=M[12]+K[12],y[13]=M[13]+K[13],y[14]=M[14]+K[14],y[15]=M[15]+K[15],y}function ba(y,M,K){return y[0]=M[0]-K[0],y[1]=M[1]-K[1],y[2]=M[2]-K[2],y[3]=M[3]-K[3],y[4]=M[4]-K[4],y[5]=M[5]-K[5],y[6]=M[6]-K[6],y[7]=M[7]-K[7],y[8]=M[8]-K[8],y[9]=M[9]-K[9],y[10]=M[10]-K[10],y[11]=M[11]-K[11],y[12]=M[12]-K[12],y[13]=M[13]-K[13],y[14]=M[14]-K[14],y[15]=M[15]-K[15],y}function gs(y,M,K){return y[0]=M[0]*K,y[1]=M[1]*K,y[2]=M[2]*K,y[3]=M[3]*K,y[4]=M[4]*K,y[5]=M[5]*K,y[6]=M[6]*K,y[7]=M[7]*K,y[8]=M[8]*K,y[9]=M[9]*K,y[10]=M[10]*K,y[11]=M[11]*K,y[12]=M[12]*K,y[13]=M[13]*K,y[14]=M[14]*K,y[15]=M[15]*K,y}function ra(y,M,K,he){return y[0]=M[0]+K[0]*he,y[1]=M[1]+K[1]*he,y[2]=M[2]+K[2]*he,y[3]=M[3]+K[3]*he,y[4]=M[4]+K[4]*he,y[5]=M[5]+K[5]*he,y[6]=M[6]+K[6]*he,y[7]=M[7]+K[7]*he,y[8]=M[8]+K[8]*he,y[9]=M[9]+K[9]*he,y[10]=M[10]+K[10]*he,y[11]=M[11]+K[11]*he,y[12]=M[12]+K[12]*he,y[13]=M[13]+K[13]*he,y[14]=M[14]+K[14]*he,y[15]=M[15]+K[15]*he,y}function $a(y,M){return y[0]===M[0]&&y[1]===M[1]&&y[2]===M[2]&&y[3]===M[3]&&y[4]===M[4]&&y[5]===M[5]&&y[6]===M[6]&&y[7]===M[7]&&y[8]===M[8]&&y[9]===M[9]&&y[10]===M[10]&&y[11]===M[11]&&y[12]===M[12]&&y[13]===M[13]&&y[14]===M[14]&&y[15]===M[15]}function ha(y,M){var K=y[0],he=y[1],Ce=y[2],Re=y[3],We=y[4],Ye=y[5],ht=y[6],Ct=y[7],Lt=y[8],_e=y[9],we=y[10],Ue=y[11],et=y[12],Se=y[13],De=y[14],Ke=y[15],kt=M[0],Vt=M[1],vn=M[2],In=M[3],xn=M[4],Mr=M[5],xr=M[6],Er=M[7],Tr=M[8],yi=M[9],Xr=M[10],pi=M[11],jr=M[12],Dr=M[13],va=M[14],ts=M[15];return Math.abs(K-kt)<=z*Math.max(1,Math.abs(K),Math.abs(kt))&&Math.abs(he-Vt)<=z*Math.max(1,Math.abs(he),Math.abs(Vt))&&Math.abs(Ce-vn)<=z*Math.max(1,Math.abs(Ce),Math.abs(vn))&&Math.abs(Re-In)<=z*Math.max(1,Math.abs(Re),Math.abs(In))&&Math.abs(We-xn)<=z*Math.max(1,Math.abs(We),Math.abs(xn))&&Math.abs(Ye-Mr)<=z*Math.max(1,Math.abs(Ye),Math.abs(Mr))&&Math.abs(ht-xr)<=z*Math.max(1,Math.abs(ht),Math.abs(xr))&&Math.abs(Ct-Er)<=z*Math.max(1,Math.abs(Ct),Math.abs(Er))&&Math.abs(Lt-Tr)<=z*Math.max(1,Math.abs(Lt),Math.abs(Tr))&&Math.abs(_e-yi)<=z*Math.max(1,Math.abs(_e),Math.abs(yi))&&Math.abs(we-Xr)<=z*Math.max(1,Math.abs(we),Math.abs(Xr))&&Math.abs(Ue-pi)<=z*Math.max(1,Math.abs(Ue),Math.abs(pi))&&Math.abs(et-jr)<=z*Math.max(1,Math.abs(et),Math.abs(jr))&&Math.abs(Se-Dr)<=z*Math.max(1,Math.abs(Se),Math.abs(Dr))&&Math.abs(De-va)<=z*Math.max(1,Math.abs(De),Math.abs(va))&&Math.abs(Ke-ts)<=z*Math.max(1,Math.abs(Ke),Math.abs(ts))}var ka=Kt,Ro=ba;function So(){var y=new R(3);return R!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y}function ho(y){var M=new R(3);return M[0]=y[0],M[1]=y[1],M[2]=y[2],M}function ps(y){var M=y[0],K=y[1],he=y[2];return Math.hypot(M,K,he)}function ru(y,M,K){var he=new R(3);return he[0]=y,he[1]=M,he[2]=K,he}function Ol(y,M){return y[0]=M[0],y[1]=M[1],y[2]=M[2],y}function No(y,M,K,he){return y[0]=M,y[1]=K,y[2]=he,y}function Sl(y,M,K){return y[0]=M[0]+K[0],y[1]=M[1]+K[1],y[2]=M[2]+K[2],y}function Du(y,M,K){return y[0]=M[0]-K[0],y[1]=M[1]-K[1],y[2]=M[2]-K[2],y}function Iu(y,M,K){return y[0]=M[0]*K[0],y[1]=M[1]*K[1],y[2]=M[2]*K[2],y}function iu(y,M,K){return y[0]=M[0]/K[0],y[1]=M[1]/K[1],y[2]=M[2]/K[2],y}function Ru(y,M){return y[0]=Math.ceil(M[0]),y[1]=Math.ceil(M[1]),y[2]=Math.ceil(M[2]),y}function Nu(y,M){return y[0]=Math.floor(M[0]),y[1]=Math.floor(M[1]),y[2]=Math.floor(M[2]),y}function au(y,M,K){return y[0]=Math.min(M[0],K[0]),y[1]=Math.min(M[1],K[1]),y[2]=Math.min(M[2],K[2]),y}function ou(y,M,K){return y[0]=Math.max(M[0],K[0]),y[1]=Math.max(M[1],K[1]),y[2]=Math.max(M[2],K[2]),y}function su(y,M){return y[0]=Math.round(M[0]),y[1]=Math.round(M[1]),y[2]=Math.round(M[2]),y}function Yt(y,M,K){return y[0]=M[0]*K,y[1]=M[1]*K,y[2]=M[2]*K,y}function gn(y,M,K,he){return y[0]=M[0]+K[0]*he,y[1]=M[1]+K[1]*he,y[2]=M[2]+K[2]*he,y}function qn(y,M){var K=M[0]-y[0],he=M[1]-y[1],Ce=M[2]-y[2];return Math.hypot(K,he,Ce)}function tr(y,M){var K=M[0]-y[0],he=M[1]-y[1],Ce=M[2]-y[2];return K*K+he*he+Ce*Ce}function kr(y){var M=y[0],K=y[1],he=y[2];return M*M+K*K+he*he}function Fa(y,M){return y[0]=-M[0],y[1]=-M[1],y[2]=-M[2],y}function ci(y,M){return y[0]=1/M[0],y[1]=1/M[1],y[2]=1/M[2],y}function fi(y,M){var K=M[0],he=M[1],Ce=M[2],Re=K*K+he*he+Ce*Ce;return Re>0&&(Re=1/Math.sqrt(Re)),y[0]=M[0]*Re,y[1]=M[1]*Re,y[2]=M[2]*Re,y}function Rr(y,M){return y[0]*M[0]+y[1]*M[1]+y[2]*M[2]}function di(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=K[0],Ye=K[1],ht=K[2];return y[0]=Ce*ht-Re*Ye,y[1]=Re*We-he*ht,y[2]=he*Ye-Ce*We,y}function Br(y,M,K,he){var Ce=M[0],Re=M[1],We=M[2];return y[0]=Ce+he*(K[0]-Ce),y[1]=Re+he*(K[1]-Re),y[2]=We+he*(K[2]-We),y}function Za(y,M,K,he,Ce,Re){var We=Re*Re,Ye=We*(2*Re-3)+1,ht=We*(Re-2)+Re,Ct=We*(Re-1),Lt=We*(3-2*Re);return y[0]=M[0]*Ye+K[0]*ht+he[0]*Ct+Ce[0]*Lt,y[1]=M[1]*Ye+K[1]*ht+he[1]*Ct+Ce[1]*Lt,y[2]=M[2]*Ye+K[2]*ht+he[2]*Ct+Ce[2]*Lt,y}function Yo(y,M,K,he,Ce,Re){var We=1-Re,Ye=We*We,ht=Re*Re,Ct=Ye*We,Lt=3*Re*Ye,_e=3*ht*We,we=ht*Re;return y[0]=M[0]*Ct+K[0]*Lt+he[0]*_e+Ce[0]*we,y[1]=M[1]*Ct+K[1]*Lt+he[1]*_e+Ce[1]*we,y[2]=M[2]*Ct+K[2]*Lt+he[2]*_e+Ce[2]*we,y}function Bf(y,M){M=M||1;var K=q()*2*Math.PI,he=q()*2-1,Ce=Math.sqrt(1-he*he)*M;return y[0]=Math.cos(K)*Ce,y[1]=Math.sin(K)*Ce,y[2]=he*M,y}function Lo(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=K[3]*he+K[7]*Ce+K[11]*Re+K[15];return We=We||1,y[0]=(K[0]*he+K[4]*Ce+K[8]*Re+K[12])/We,y[1]=(K[1]*he+K[5]*Ce+K[9]*Re+K[13])/We,y[2]=(K[2]*he+K[6]*Ce+K[10]*Re+K[14])/We,y}function Fs(y,M,K){var he=M[0],Ce=M[1],Re=M[2];return y[0]=he*K[0]+Ce*K[3]+Re*K[6],y[1]=he*K[1]+Ce*K[4]+Re*K[7],y[2]=he*K[2]+Ce*K[5]+Re*K[8],y}function Lu(y,M,K){var he=K[0],Ce=K[1],Re=K[2],We=K[3],Ye=M[0],ht=M[1],Ct=M[2],Lt=Ce*Ct-Re*ht,_e=Re*Ye-he*Ct,we=he*ht-Ce*Ye,Ue=Ce*we-Re*_e,et=Re*Lt-he*we,Se=he*_e-Ce*Lt,De=We*2;return Lt*=De,_e*=De,we*=De,Ue*=2,et*=2,Se*=2,y[0]=Ye+Lt+Ue,y[1]=ht+_e+et,y[2]=Ct+we+Se,y}function uu(y,M,K,he){var Ce=[],Re=[];return Ce[0]=M[0]-K[0],Ce[1]=M[1]-K[1],Ce[2]=M[2]-K[2],Re[0]=Ce[0],Re[1]=Ce[1]*Math.cos(he)-Ce[2]*Math.sin(he),Re[2]=Ce[1]*Math.sin(he)+Ce[2]*Math.cos(he),y[0]=Re[0]+K[0],y[1]=Re[1]+K[1],y[2]=Re[2]+K[2],y}function nc(y,M,K,he){var Ce=[],Re=[];return Ce[0]=M[0]-K[0],Ce[1]=M[1]-K[1],Ce[2]=M[2]-K[2],Re[0]=Ce[2]*Math.sin(he)+Ce[0]*Math.cos(he),Re[1]=Ce[1],Re[2]=Ce[2]*Math.cos(he)-Ce[0]*Math.sin(he),y[0]=Re[0]+K[0],y[1]=Re[1]+K[1],y[2]=Re[2]+K[2],y}function Qc(y,M,K,he){var Ce=[],Re=[];return Ce[0]=M[0]-K[0],Ce[1]=M[1]-K[1],Ce[2]=M[2]-K[2],Re[0]=Ce[0]*Math.cos(he)-Ce[1]*Math.sin(he),Re[1]=Ce[0]*Math.sin(he)+Ce[1]*Math.cos(he),Re[2]=Ce[2],y[0]=Re[0]+K[0],y[1]=Re[1]+K[1],y[2]=Re[2]+K[2],y}function rc(y,M){var K=y[0],he=y[1],Ce=y[2],Re=M[0],We=M[1],Ye=M[2],ht=Math.sqrt(K*K+he*he+Ce*Ce),Ct=Math.sqrt(Re*Re+We*We+Ye*Ye),Lt=ht*Ct,_e=Lt&&Rr(y,M)/Lt;return Math.acos(Math.min(Math.max(_e,-1),1))}function Zo(y){return y[0]=0,y[1]=0,y[2]=0,y}function jo(y){return"vec3("+y[0]+", "+y[1]+", "+y[2]+")"}function ua(y,M){return y[0]===M[0]&&y[1]===M[1]&&y[2]===M[2]}function ju(y,M){var K=y[0],he=y[1],Ce=y[2],Re=M[0],We=M[1],Ye=M[2];return Math.abs(K-Re)<=z*Math.max(1,Math.abs(K),Math.abs(Re))&&Math.abs(he-We)<=z*Math.max(1,Math.abs(he),Math.abs(We))&&Math.abs(Ce-Ye)<=z*Math.max(1,Math.abs(Ce),Math.abs(Ye))}var _u=Du,Bs=Iu,Ss=iu,Ml=qn,qc=tr,lu=ps,Zu=kr,Al=function(){var y=So();return function(M,K,he,Ce,Re,We){var Ye,ht;for(K||(K=3),he||(he=0),Ce?ht=Math.min(Ce*K+he,M.length):ht=M.length,Ye=he;Ye<ht;Ye+=K)y[0]=M[Ye],y[1]=M[Ye+1],y[2]=M[Ye+2],Re(y,y,We),M[Ye]=y[0],M[Ye+1]=y[1],M[Ye+2]=y[2];return M}}();function ic(){var y=new R(4);return R!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0,y[3]=0),y}function ac(y){var M=new R(4);return M[0]=y[0],M[1]=y[1],M[2]=y[2],M[3]=y[3],M}function ef(y,M,K,he){var Ce=new R(4);return Ce[0]=y,Ce[1]=M,Ce[2]=K,Ce[3]=he,Ce}function ms(y,M){return y[0]=M[0],y[1]=M[1],y[2]=M[2],y[3]=M[3],y}function tf(y,M,K,he,Ce){return y[0]=M,y[1]=K,y[2]=he,y[3]=Ce,y}function Fu(y,M,K){return y[0]=M[0]+K[0],y[1]=M[1]+K[1],y[2]=M[2]+K[2],y[3]=M[3]+K[3],y}function Tl(y,M,K){return y[0]=M[0]-K[0],y[1]=M[1]-K[1],y[2]=M[2]-K[2],y[3]=M[3]-K[3],y}function Gs(y,M,K){return y[0]=M[0]*K[0],y[1]=M[1]*K[1],y[2]=M[2]*K[2],y[3]=M[3]*K[3],y}function Pl(y,M,K){return y[0]=M[0]/K[0],y[1]=M[1]/K[1],y[2]=M[2]/K[2],y[3]=M[3]/K[3],y}function Gf(y,M){return y[0]=Math.ceil(M[0]),y[1]=Math.ceil(M[1]),y[2]=Math.ceil(M[2]),y[3]=Math.ceil(M[3]),y}function kl(y,M){return y[0]=Math.floor(M[0]),y[1]=Math.floor(M[1]),y[2]=Math.floor(M[2]),y[3]=Math.floor(M[3]),y}function oc(y,M,K){return y[0]=Math.min(M[0],K[0]),y[1]=Math.min(M[1],K[1]),y[2]=Math.min(M[2],K[2]),y[3]=Math.min(M[3],K[3]),y}function nf(y,M,K){return y[0]=Math.max(M[0],K[0]),y[1]=Math.max(M[1],K[1]),y[2]=Math.max(M[2],K[2]),y[3]=Math.max(M[3],K[3]),y}function rf(y,M){return y[0]=Math.round(M[0]),y[1]=Math.round(M[1]),y[2]=Math.round(M[2]),y[3]=Math.round(M[3]),y}function ta(y,M,K){return y[0]=M[0]*K,y[1]=M[1]*K,y[2]=M[2]*K,y[3]=M[3]*K,y}function $i(y,M,K,he){return y[0]=M[0]+K[0]*he,y[1]=M[1]+K[1]*he,y[2]=M[2]+K[2]*he,y[3]=M[3]+K[3]*he,y}function Ju(y,M){var K=M[0]-y[0],he=M[1]-y[1],Ce=M[2]-y[2],Re=M[3]-y[3];return Math.hypot(K,he,Ce,Re)}function Jo(y,M){var K=M[0]-y[0],he=M[1]-y[1],Ce=M[2]-y[2],Re=M[3]-y[3];return K*K+he*he+Ce*Ce+Re*Re}function cu(y){var M=y[0],K=y[1],he=y[2],Ce=y[3];return Math.hypot(M,K,he,Ce)}function Qu(y){var M=y[0],K=y[1],he=y[2],Ce=y[3];return M*M+K*K+he*he+Ce*Ce}function Dl(y,M){return y[0]=-M[0],y[1]=-M[1],y[2]=-M[2],y[3]=-M[3],y}function zf(y,M){return y[0]=1/M[0],y[1]=1/M[1],y[2]=1/M[2],y[3]=1/M[3],y}function zs(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=K*K+he*he+Ce*Ce+Re*Re;return We>0&&(We=1/Math.sqrt(We)),y[0]=K*We,y[1]=he*We,y[2]=Ce*We,y[3]=Re*We,y}function sc(y,M){return y[0]*M[0]+y[1]*M[1]+y[2]*M[2]+y[3]*M[3]}function Aa(y,M,K,he){var Ce=K[0]*he[1]-K[1]*he[0],Re=K[0]*he[2]-K[2]*he[0],We=K[0]*he[3]-K[3]*he[0],Ye=K[1]*he[2]-K[2]*he[1],ht=K[1]*he[3]-K[3]*he[1],Ct=K[2]*he[3]-K[3]*he[2],Lt=M[0],_e=M[1],we=M[2],Ue=M[3];return y[0]=_e*Ct-we*ht+Ue*Ye,y[1]=-(Lt*Ct)+we*We-Ue*Re,y[2]=Lt*ht-_e*We+Ue*Ce,y[3]=-(Lt*Ye)+_e*Re-we*Ce,y}function Il(y,M,K,he){var Ce=M[0],Re=M[1],We=M[2],Ye=M[3];return y[0]=Ce+he*(K[0]-Ce),y[1]=Re+he*(K[1]-Re),y[2]=We+he*(K[2]-We),y[3]=Ye+he*(K[3]-Ye),y}function fu(y,M){M=M||1;var K,he,Ce,Re,We,Ye;do K=q()*2-1,he=q()*2-1,We=K*K+he*he;while(We>=1);do Ce=q()*2-1,Re=q()*2-1,Ye=Ce*Ce+Re*Re;while(Ye>=1);var ht=Math.sqrt((1-We)/Ye);return y[0]=M*K,y[1]=M*he,y[2]=M*Ce*ht,y[3]=M*Re*ht,y}function Us(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=M[3];return y[0]=K[0]*he+K[4]*Ce+K[8]*Re+K[12]*We,y[1]=K[1]*he+K[5]*Ce+K[9]*Re+K[13]*We,y[2]=K[2]*he+K[6]*Ce+K[10]*Re+K[14]*We,y[3]=K[3]*he+K[7]*Ce+K[11]*Re+K[15]*We,y}function Vs(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=K[0],Ye=K[1],ht=K[2],Ct=K[3],Lt=Ct*he+Ye*Re-ht*Ce,_e=Ct*Ce+ht*he-We*Re,we=Ct*Re+We*Ce-Ye*he,Ue=-We*he-Ye*Ce-ht*Re;return y[0]=Lt*Ct+Ue*-We+_e*-ht-we*-Ye,y[1]=_e*Ct+Ue*-Ye+we*-We-Lt*-ht,y[2]=we*Ct+Ue*-ht+Lt*-Ye-_e*-We,y[3]=M[3],y}function vo(y){return y[0]=0,y[1]=0,y[2]=0,y[3]=0,y}function U(y){return"vec4("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+")"}function S(y,M){return y[0]===M[0]&&y[1]===M[1]&&y[2]===M[2]&&y[3]===M[3]}function G(y,M){var K=y[0],he=y[1],Ce=y[2],Re=y[3],We=M[0],Ye=M[1],ht=M[2],Ct=M[3];return Math.abs(K-We)<=z*Math.max(1,Math.abs(K),Math.abs(We))&&Math.abs(he-Ye)<=z*Math.max(1,Math.abs(he),Math.abs(Ye))&&Math.abs(Ce-ht)<=z*Math.max(1,Math.abs(Ce),Math.abs(ht))&&Math.abs(Re-Ct)<=z*Math.max(1,Math.abs(Re),Math.abs(Ct))}var V=Tl,ae=Gs,me=Pl,ye=Ju,Fe=Jo,rt=cu,pt=Qu,Xt=function(){var y=ic();return function(M,K,he,Ce,Re,We){var Ye,ht;for(K||(K=4),he||(he=0),Ce?ht=Math.min(Ce*K+he,M.length):ht=M.length,Ye=he;Ye<ht;Ye+=K)y[0]=M[Ye],y[1]=M[Ye+1],y[2]=M[Ye+2],y[3]=M[Ye+3],Re(y,y,We),M[Ye]=y[0],M[Ye+1]=y[1],M[Ye+2]=y[2],M[Ye+3]=y[3];return M}}();function fn(){var y=new R(4);return R!=Float32Array&&(y[0]=0,y[1]=0,y[2]=0),y[3]=1,y}function Kn(y){return y[0]=0,y[1]=0,y[2]=0,y[3]=1,y}function Wt(y,M,K){K=K*.5;var he=Math.sin(K);return y[0]=he*M[0],y[1]=he*M[1],y[2]=he*M[2],y[3]=Math.cos(K),y}function Dn(y,M){var K=Math.acos(M[3])*2,he=Math.sin(K/2);return he>z?(y[0]=M[0]/he,y[1]=M[1]/he,y[2]=M[2]/he):(y[0]=1,y[1]=0,y[2]=0),K}function Fr(y,M){var K=es(y,M);return Math.acos(2*K*K-1)}function Cr(y,M,K){var he=M[0],Ce=M[1],Re=M[2],We=M[3],Ye=K[0],ht=K[1],Ct=K[2],Lt=K[3];return y[0]=he*Lt+We*Ye+Ce*Ct-Re*ht,y[1]=Ce*Lt+We*ht+Re*Ye-he*Ct,y[2]=Re*Lt+We*Ct+he*ht-Ce*Ye,y[3]=We*Lt-he*Ye-Ce*ht-Re*Ct,y}function Ji(y,M,K){K*=.5;var he=M[0],Ce=M[1],Re=M[2],We=M[3],Ye=Math.sin(K),ht=Math.cos(K);return y[0]=he*ht+We*Ye,y[1]=Ce*ht+Re*Ye,y[2]=Re*ht-Ce*Ye,y[3]=We*ht-he*Ye,y}function go(y,M,K){K*=.5;var he=M[0],Ce=M[1],Re=M[2],We=M[3],Ye=Math.sin(K),ht=Math.cos(K);return y[0]=he*ht-Re*Ye,y[1]=Ce*ht+We*Ye,y[2]=Re*ht+he*Ye,y[3]=We*ht-Ce*Ye,y}function Ca(y,M,K){K*=.5;var he=M[0],Ce=M[1],Re=M[2],We=M[3],Ye=Math.sin(K),ht=Math.cos(K);return y[0]=he*ht+Ce*Ye,y[1]=Ce*ht-he*Ye,y[2]=Re*ht+We*Ye,y[3]=We*ht-Re*Ye,y}function ao(y,M){var K=M[0],he=M[1],Ce=M[2];return y[0]=K,y[1]=he,y[2]=Ce,y[3]=Math.sqrt(Math.abs(1-K*K-he*he-Ce*Ce)),y}function Ba(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=Math.sqrt(K*K+he*he+Ce*Ce),Ye=Math.exp(Re),ht=We>0?Ye*Math.sin(We)/We:0;return y[0]=K*ht,y[1]=he*ht,y[2]=Ce*ht,y[3]=Ye*Math.cos(We),y}function $r(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=Math.sqrt(K*K+he*he+Ce*Ce),Ye=We>0?Math.atan2(We,Re)/We:0;return y[0]=K*Ye,y[1]=he*Ye,y[2]=Ce*Ye,y[3]=.5*Math.log(K*K+he*he+Ce*Ce+Re*Re),y}function Qo(y,M,K){return $r(y,M),Bu(y,y,K),Ba(y,y),y}function Li(y,M,K,he){var Ce=M[0],Re=M[1],We=M[2],Ye=M[3],ht=K[0],Ct=K[1],Lt=K[2],_e=K[3],we,Ue,et,Se,De;return Ue=Ce*ht+Re*Ct+We*Lt+Ye*_e,Ue<0&&(Ue=-Ue,ht=-ht,Ct=-Ct,Lt=-Lt,_e=-_e),1-Ue>z?(we=Math.acos(Ue),et=Math.sin(we),Se=Math.sin((1-he)*we)/et,De=Math.sin(he*we)/et):(Se=1-he,De=he),y[0]=Se*Ce+De*ht,y[1]=Se*Re+De*Ct,y[2]=Se*We+De*Lt,y[3]=Se*Ye+De*_e,y}function ia(y){var M=q(),K=q(),he=q(),Ce=Math.sqrt(1-M),Re=Math.sqrt(M);return y[0]=Ce*Math.sin(2*Math.PI*K),y[1]=Ce*Math.cos(2*Math.PI*K),y[2]=Re*Math.sin(2*Math.PI*he),y[3]=Re*Math.cos(2*Math.PI*he),y}function aa(y,M){var K=M[0],he=M[1],Ce=M[2],Re=M[3],We=K*K+he*he+Ce*Ce+Re*Re,Ye=We?1/We:0;return y[0]=-K*Ye,y[1]=-he*Ye,y[2]=-Ce*Ye,y[3]=Re*Ye,y}function qu(y,M){return y[0]=-M[0],y[1]=-M[1],y[2]=-M[2],y[3]=M[3],y}function Da(y,M){var K=M[0]+M[4]+M[8],he;if(K>0)he=Math.sqrt(K+1),y[3]=.5*he,he=.5/he,y[0]=(M[5]-M[7])*he,y[1]=(M[6]-M[2])*he,y[2]=(M[1]-M[3])*he;else{var Ce=0;M[4]>M[0]&&(Ce=1),M[8]>M[Ce*3+Ce]&&(Ce=2);var Re=(Ce+1)%3,We=(Ce+2)%3;he=Math.sqrt(M[Ce*3+Ce]-M[Re*3+Re]-M[We*3+We]+1),y[Ce]=.5*he,he=.5/he,y[3]=(M[Re*3+We]-M[We*3+Re])*he,y[Re]=(M[Re*3+Ce]+M[Ce*3+Re])*he,y[We]=(M[We*3+Ce]+M[Ce*3+We])*he}return y}function Mo(y,M,K,he){var Ce=.5*Math.PI/180;M*=Ce,K*=Ce,he*=Ce;var Re=Math.sin(M),We=Math.cos(M),Ye=Math.sin(K),ht=Math.cos(K),Ct=Math.sin(he),Lt=Math.cos(he);return y[0]=Re*ht*Lt-We*Ye*Ct,y[1]=We*Ye*Lt+Re*ht*Ct,y[2]=We*ht*Ct-Re*Ye*Lt,y[3]=We*ht*Lt+Re*Ye*Ct,y}function Hs(y){return"quat("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+")"}var Ws=ac,ys=ef,oo=ms,qo=tf,so=Fu,Ja=Cr,Bu=ta,es=sc,Ui=Il,$s=cu,_o=$s,Ms=Qu,af=Ms,Rl=zs,uc=S,Ao=G,Nl=function(){var y=So(),M=ru(1,0,0),K=ru(0,1,0);return function(he,Ce,Re){var We=Rr(Ce,Re);return We<-.999999?(di(y,M,Ce),lu(y)<1e-6&&di(y,K,Ce),fi(y,y),Wt(he,y,Math.PI),he):We>.999999?(he[0]=0,he[1]=0,he[2]=0,he[3]=1,he):(di(y,Ce,Re),he[0]=y[0],he[1]=y[1],he[2]=y[2],he[3]=1+We,Rl(he,he))}}(),bs=function(){var y=fn(),M=fn();return function(K,he,Ce,Re,We,Ye){return Li(y,he,We,Ye),Li(M,Ce,Re,Ye),Li(K,y,M,2*Ye*(1-Ye)),K}}(),el=function(){var y=ie();return function(M,K,he,Ce){return y[0]=he[0],y[3]=he[1],y[6]=he[2],y[1]=Ce[0],y[4]=Ce[1],y[7]=Ce[2],y[2]=-K[0],y[5]=-K[1],y[8]=-K[2],Rl(M,Da(M,y))}}()},IQ25:function(fe,T,v){"use strict";v.d(T,"a",function(){return te});var B=v("lwsE"),C=v.n(B),_=v("PJYZ"),P=v.n(_),N=v("7W2i"),z=v.n(N),R=v("a1gu"),q=v.n(R),W=v("Nsbk"),Z=v.n(W),X=v("oDt1");function ne(ce){var ee=ie();return function(){var le=Z()(ce),re;if(ee){var Q=Z()(this).constructor;re=Reflect.construct(le,arguments,Q)}else re=le.apply(this,arguments);return q()(this,re)}}function ie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ce){return!1}}var te=function(ce){z()(Y,ce);var ee=ne(Y);function Y(le){var re;return C()(this,Y),re=ee.call(this,le),re.parentID=void 0,Object.assign(P()(re),le),re}return Y}(X.a)},IehP:function(fe,T,v){"use strict";var B=v("VTBJ"),C=v("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"},P=_,N=v("6VBw"),z=function(W,Z){return C.createElement(N.a,Object(B.a)(Object(B.a)({},W),{},{ref:Z,icon:P}))};z.displayName="FullscreenExitOutlined";var R=T.a=C.forwardRef(z)},Ijbi:function(fe,T,v){var B=v("WkPL");function C(_){if(Array.isArray(_))return B(_)}fe.exports=C,fe.exports.__esModule=!0,fe.exports.default=fe.exports},J4zp:function(fe,T,v){var B=v("wTVA"),C=v("m0LI"),_=v("ZhPi"),P=v("wkBT");function N(z,R){return B(z)||C(z,R)||_(z,R)||P()}fe.exports=N,fe.exports.__esModule=!0,fe.exports.default=fe.exports},JI00:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Chrome=void 0;var B=v("q1tI"),C=ee(B),_=v("17x9"),P=ee(_),N=v("/FUP"),z=ee(N),R=v("QkVN"),q=ee(R),W=v("TM95"),Z=v("Rkpk"),X=ee(Z),ne=v("NSvM"),ie=ee(ne),te=v("tu5P"),ce=ee(te);function ee(le){return le&&le.__esModule?le:{default:le}}var Y=T.Chrome=function(re){var Q=re.width,ge=re.onChange,oe=re.disableAlpha,Te=re.rgb,be=re.hsl,j=re.hsv,ke=re.hex,Je=re.renderers,Pe=re.styles,Ae=Pe===void 0?{}:Pe,ot=re.className,k=ot===void 0?"":ot,Xe=(0,z.default)((0,q.default)({default:{picker:{width:Q,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+Te.r+", "+Te.g+", "+Te.b+", "+Te.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Ae),{disableAlpha:oe});return C.default.createElement("div",{style:Xe.picker,className:"chrome-picker "+k},C.default.createElement("div",{style:Xe.saturation},C.default.createElement(W.Saturation,{style:Xe.Saturation,hsl:be,hsv:j,pointer:ce.default,onChange:ge})),C.default.createElement("div",{style:Xe.body},C.default.createElement("div",{style:Xe.controls,className:"flexbox-fix"},C.default.createElement("div",{style:Xe.color},C.default.createElement("div",{style:Xe.swatch},C.default.createElement("div",{style:Xe.active}),C.default.createElement(W.Checkboard,{renderers:Je}))),C.default.createElement("div",{style:Xe.toggles},C.default.createElement("div",{style:Xe.hue},C.default.createElement(W.Hue,{style:Xe.Hue,hsl:be,pointer:ie.default,onChange:ge})),C.default.createElement("div",{style:Xe.alpha},C.default.createElement(W.Alpha,{style:Xe.Alpha,rgb:Te,hsl:be,pointer:ie.default,renderers:Je,onChange:ge})))),C.default.createElement(X.default,{rgb:Te,hsl:be,hex:ke,onChange:ge,disableAlpha:oe})))};Y.propTypes={width:P.default.oneOfType([P.default.string,P.default.number]),disableAlpha:P.default.bool,styles:P.default.object},Y.defaultProps={width:225,disableAlpha:!1,styles:{}},T.default=(0,W.ColorWrap)(Y)},JX23:function(fe,T){},JaaR:function(fe,T,v){"use strict";var B=v("VTBJ"),C=v("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},P=_,N=v("6VBw"),z=function(W,Z){return C.createElement(N.a,Object(B.a)(Object(B.a)({},W),{},{ref:Z,icon:P}))};z.displayName="DoubleLeftOutlined";var R=T.a=C.forwardRef(z)},"Ju5/":function(fe,T,v){"use strict";var B=v("XqMk"),C=typeof self=="object"&&self&&self.Object===Object&&self,_=B.a||C||Function("return this")();T.a=_},Jxpl:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Material=void 0;var B=v("q1tI"),C=Z(B),_=v("/FUP"),P=Z(_),N=v("QkVN"),z=Z(N),R=v("p8yl"),q=Z(R),W=v("TM95");function Z(ne){return ne&&ne.__esModule?ne:{default:ne}}var X=T.Material=function(ie){var te=ie.onChange,ce=ie.hex,ee=ie.rgb,Y=ie.styles,le=Y===void 0?{}:Y,re=ie.className,Q=re===void 0?"":re,ge=(0,P.default)((0,z.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+ce,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},le)),oe=function(be,j){be.hex?q.default.isValidHex(be.hex)&&te({hex:be.hex,source:"hex"},j):(be.r||be.g||be.b)&&te({r:be.r||ee.r,g:be.g||ee.g,b:be.b||ee.b,source:"rgb"},j)};return C.default.createElement(W.Raised,{styles:le},C.default.createElement("div",{style:ge.material,className:"material-picker "+Q},C.default.createElement(W.EditableInput,{style:{wrap:ge.HEXwrap,input:ge.HEXinput,label:ge.HEXlabel},label:"hex",value:ce,onChange:oe}),C.default.createElement("div",{style:ge.split,className:"flexbox-fix"},C.default.createElement("div",{style:ge.third},C.default.createElement(W.EditableInput,{style:{wrap:ge.RGBwrap,input:ge.RGBinput,label:ge.RGBlabel},label:"r",value:ee.r,onChange:oe})),C.default.createElement("div",{style:ge.third},C.default.createElement(W.EditableInput,{style:{wrap:ge.RGBwrap,input:ge.RGBinput,label:ge.RGBlabel},label:"g",value:ee.g,onChange:oe})),C.default.createElement("div",{style:ge.third},C.default.createElement(W.EditableInput,{style:{wrap:ge.RGBwrap,input:ge.RGBinput,label:ge.RGBlabel},label:"b",value:ee.b,onChange:oe})))))};T.default=(0,W.ColorWrap)(X)},KwMD:function(fe,T){function v(B,C,_,P){for(var N=B.length,z=_+(P?1:-1);P?z--:++z<N;)if(C(B[z],z,B))return z;return-1}fe.exports=v},L26W:function(fe,T){fe.exports=v;function v(B,C){C=C||1;var _=Math.random()*2*Math.PI;return B[0]=Math.cos(_)*C,B[1]=Math.sin(_)*C,B}},L3Qv:function(fe,T,v){"use strict";function B(){return!1}T.a=B},LGRX:function(fe,T,v){"use strict";v.d(T,"a",function(){return Z});var B=v("lwsE"),C=v.n(B),_=v("W8MJ"),P=v.n(_),N=v("4cb6"),z=v.n(N),R,q,W;(function(X){X.PANSTART="PANSTART",X.PANEND="PANEND",X.PANMOVE="PANMOVE",X.PINCH="PINCH",X.KEYDOWN="KEYDOWN",X.KEYUP="KEYUP",X.HOVER="HOVER"})(W||(W={}));var Z=(R=Object(N.injectable)(),R(q=function(){function X(){C()(this,X)}return P()(X,[{key:"listen",value:function(ie){}},{key:"on",value:function(ie,te){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),X}())||q)},LGYb:function(fe,T,v){var B=v("1hJj"),C=v("jbM+"),_=v("Xt/L"),P=v("xYSL"),N=v("dQpi"),z=v("rEGp"),R=200;function q(W,Z,X){var ne=-1,ie=C,te=W.length,ce=!0,ee=[],Y=ee;if(X)ce=!1,ie=_;else if(te>=R){var le=Z?null:N(W);if(le)return z(le);ce=!1,ie=P,Y=new B}else Y=Z?[]:ee;e:for(;++ne<te;){var re=W[ne],Q=Z?Z(re):re;if(re=X||re!==0?re:0,ce&&Q===Q){for(var ge=Y.length;ge--;)if(Y[ge]===Q)continue e;Z&&Y.push(Q),ee.push(re)}else ie(Y,Q,X)||(Y!==ee&&Y.push(Q),ee.push(re))}return ee}fe.exports=q},LKzl:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BindingWhenOnSyntax=void 0;var B=v("406g"),C=v("z4Hk"),_=function(){function P(N){this._binding=N,this._bindingWhenSyntax=new C.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new B.BindingOnSyntax(this._binding)}return P.prototype.when=function(N){return this._bindingWhenSyntax.when(N)},P.prototype.whenTargetNamed=function(N){return this._bindingWhenSyntax.whenTargetNamed(N)},P.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},P.prototype.whenTargetTagged=function(N,z){return this._bindingWhenSyntax.whenTargetTagged(N,z)},P.prototype.whenInjectedInto=function(N){return this._bindingWhenSyntax.whenInjectedInto(N)},P.prototype.whenParentNamed=function(N){return this._bindingWhenSyntax.whenParentNamed(N)},P.prototype.whenParentTagged=function(N,z){return this._bindingWhenSyntax.whenParentTagged(N,z)},P.prototype.whenAnyAncestorIs=function(N){return this._bindingWhenSyntax.whenAnyAncestorIs(N)},P.prototype.whenNoAncestorIs=function(N){return this._bindingWhenSyntax.whenNoAncestorIs(N)},P.prototype.whenAnyAncestorNamed=function(N){return this._bindingWhenSyntax.whenAnyAncestorNamed(N)},P.prototype.whenAnyAncestorTagged=function(N,z){return this._bindingWhenSyntax.whenAnyAncestorTagged(N,z)},P.prototype.whenNoAncestorNamed=function(N){return this._bindingWhenSyntax.whenNoAncestorNamed(N)},P.prototype.whenNoAncestorTagged=function(N,z){return this._bindingWhenSyntax.whenNoAncestorTagged(N,z)},P.prototype.whenAnyAncestorMatches=function(N){return this._bindingWhenSyntax.whenAnyAncestorMatches(N)},P.prototype.whenNoAncestorMatches=function(N){return this._bindingWhenSyntax.whenNoAncestorMatches(N)},P.prototype.onActivation=function(N){return this._bindingOnSyntax.onActivation(N)},P}();T.BindingWhenOnSyntax=_},LgvC:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Binding=void 0;var B=v("FV85"),C=v("d9O0"),_=function(){function P(N,z){this.id=C.id(),this.activated=!1,this.serviceIdentifier=N,this.scope=z,this.type=B.BindingTypeEnum.Invalid,this.constraint=function(R){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return P.prototype.clone=function(){var N=new P(this.serviceIdentifier,this.scope);return N.activated=N.scope===B.BindingScopeEnum.Singleton?this.activated:!1,N.implementationType=this.implementationType,N.dynamicValue=this.dynamicValue,N.scope=this.scope,N.type=this.type,N.factory=this.factory,N.provider=this.provider,N.constraint=this.constraint,N.onActivation=this.onActivation,N.cache=this.cache,N},P}();T.Binding=_},LvDl:function(fe,T,v){(function(B,C){var _;/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(){var P,N="4.17.21",z=200,R="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",q="Expected a function",W="Invalid `variable` option passed into `_.template`",Z="__lodash_hash_undefined__",X=500,ne="__lodash_placeholder__",ie=1,te=2,ce=4,ee=1,Y=2,le=1,re=2,Q=4,ge=8,oe=16,Te=32,be=64,j=128,ke=256,Je=512,Pe=30,Ae="...",ot=800,k=16,Xe=1,Ot=2,lt=3,Ut=1/0,Jt=9007199254740991,nt=17976931348623157e292,$t=0/0,ze=4294967295,ue=ze-1,an=ze>>>1,nn=[["ary",j],["bind",le],["bindKey",re],["curry",ge],["curryRight",oe],["flip",Je],["partial",Te],["partialRight",be],["rearg",ke]],Qn="[object Arguments]",Pt="[object Array]",Tn="[object AsyncFunction]",rr="[object Boolean]",Qt="[object Date]",sn="[object DOMException]",kn="[object Error]",Sn="[object Function]",st="[object GeneratorFunction]",At="[object Map]",vt="[object Number]",_t="[object Null]",Kt="[object Object]",ln="[object Promise]",bt="[object Proxy]",A="[object RegExp]",Jn="[object Set]",Mn="[object String]",sr="[object Symbol]",ir="[object Undefined]",Ie="[object WeakMap]",pe="[object WeakSet]",Qe="[object ArrayBuffer]",cn="[object DataView]",En="[object Float32Array]",lr="[object Float64Array]",gi="[object Int8Array]",cr="[object Int16Array]",wr="[object Int32Array]",pr="[object Uint8Array]",Sr="[object Uint8ClampedArray]",Qr="[object Uint16Array]",ya="[object Uint32Array]",Ki=/\b__p \+= '';/g,vs=/\b(__p \+=) '' \+/g,tu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wa=/&(?:amp|lt|gt|quot|#39);/g,Ka=/[&<>"']/g,Ya=RegExp(Wa.source),Fi=RegExp(Ka.source),_a=/<%-([\s\S]+?)%>/g,Pa=/<%([\s\S]+?)%>/g,Ti=/<%=([\s\S]+?)%>/g,nu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ko=/^\w*$/,Yr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ba=/[\\^$.*+?()[\]{}|]/g,gs=RegExp(ba.source),ra=/^\s+/,$a=/\s/,ha=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ka=/\{\n\/\* \[wrapped with (.+)\] \*/,Ro=/,? & /,So=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ho=/[()=,{}\[\]\/\s]/,ps=/\\(\\)?/g,ru=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ol=/\w*$/,No=/^[-+]0x[0-9a-f]+$/i,Sl=/^0b[01]+$/i,Du=/^\[object .+?Constructor\]$/,Iu=/^0o[0-7]+$/i,iu=/^(?:0|[1-9]\d*)$/,Ru=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Nu=/($^)/,au=/['\n\r\u2028\u2029\\]/g,ou="\\ud800-\\udfff",su="\\u0300-\\u036f",Yt="\\ufe20-\\ufe2f",gn="\\u20d0-\\u20ff",qn=su+Yt+gn,tr="\\u2700-\\u27bf",kr="a-z\\xdf-\\xf6\\xf8-\\xff",Fa="\\xac\\xb1\\xd7\\xf7",ci="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fi="\\u2000-\\u206f",Rr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",di="A-Z\\xc0-\\xd6\\xd8-\\xde",Br="\\ufe0e\\ufe0f",Za=Fa+ci+fi+Rr,Yo="['\u2019]",Bf="["+ou+"]",Lo="["+Za+"]",Fs="["+qn+"]",Lu="\\d+",uu="["+tr+"]",nc="["+kr+"]",Qc="[^"+ou+Za+Lu+tr+kr+di+"]",rc="\\ud83c[\\udffb-\\udfff]",Zo="(?:"+Fs+"|"+rc+")",jo="[^"+ou+"]",ua="(?:\\ud83c[\\udde6-\\uddff]){2}",ju="[\\ud800-\\udbff][\\udc00-\\udfff]",_u="["+di+"]",Bs="\\u200d",Ss="(?:"+nc+"|"+Qc+")",Ml="(?:"+_u+"|"+Qc+")",qc="(?:"+Yo+"(?:d|ll|m|re|s|t|ve))?",lu="(?:"+Yo+"(?:D|LL|M|RE|S|T|VE))?",Zu=Zo+"?",Al="["+Br+"]?",ic="(?:"+Bs+"(?:"+[jo,ua,ju].join("|")+")"+Al+Zu+")*",ac="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ef="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ms=Al+Zu+ic,tf="(?:"+[uu,ua,ju].join("|")+")"+ms,Fu="(?:"+[jo+Fs+"?",Fs,ua,ju,Bf].join("|")+")",Tl=RegExp(Yo,"g"),Gs=RegExp(Fs,"g"),Pl=RegExp(rc+"(?="+rc+")|"+Fu+ms,"g"),Gf=RegExp([_u+"?"+nc+"+"+qc+"(?="+[Lo,_u,"$"].join("|")+")",Ml+"+"+lu+"(?="+[Lo,_u+Ss,"$"].join("|")+")",_u+"?"+Ss+"+"+qc,_u+"+"+lu,ef,ac,Lu,tf].join("|"),"g"),kl=RegExp("["+Bs+ou+qn+Br+"]"),oc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rf=-1,ta={};ta[En]=ta[lr]=ta[gi]=ta[cr]=ta[wr]=ta[pr]=ta[Sr]=ta[Qr]=ta[ya]=!0,ta[Qn]=ta[Pt]=ta[Qe]=ta[rr]=ta[cn]=ta[Qt]=ta[kn]=ta[Sn]=ta[At]=ta[vt]=ta[Kt]=ta[A]=ta[Jn]=ta[Mn]=ta[Ie]=!1;var $i={};$i[Qn]=$i[Pt]=$i[Qe]=$i[cn]=$i[rr]=$i[Qt]=$i[En]=$i[lr]=$i[gi]=$i[cr]=$i[wr]=$i[At]=$i[vt]=$i[Kt]=$i[A]=$i[Jn]=$i[Mn]=$i[sr]=$i[pr]=$i[Sr]=$i[Qr]=$i[ya]=!0,$i[kn]=$i[Sn]=$i[Ie]=!1;var Ju={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Jo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Dl=parseFloat,zf=parseInt,zs=typeof B=="object"&&B&&B.Object===Object&&B,sc=typeof self=="object"&&self&&self.Object===Object&&self,Aa=zs||sc||Function("return this")(),Il=T&&!T.nodeType&&T,fu=Il&&typeof C=="object"&&C&&!C.nodeType&&C,Us=fu&&fu.exports===Il,Vs=Us&&zs.process,vo=function(){try{var Se=fu&&fu.require&&fu.require("util").types;return Se||Vs&&Vs.binding&&Vs.binding("util")}catch(De){}}(),U=vo&&vo.isArrayBuffer,S=vo&&vo.isDate,G=vo&&vo.isMap,V=vo&&vo.isRegExp,ae=vo&&vo.isSet,me=vo&&vo.isTypedArray;function ye(Se,De,Ke){switch(Ke.length){case 0:return Se.call(De);case 1:return Se.call(De,Ke[0]);case 2:return Se.call(De,Ke[0],Ke[1]);case 3:return Se.call(De,Ke[0],Ke[1],Ke[2])}return Se.apply(De,Ke)}function Fe(Se,De,Ke,kt){for(var Vt=-1,vn=Se==null?0:Se.length;++Vt<vn;){var In=Se[Vt];De(kt,In,Ke(In),Se)}return kt}function rt(Se,De){for(var Ke=-1,kt=Se==null?0:Se.length;++Ke<kt&&De(Se[Ke],Ke,Se)!==!1;);return Se}function pt(Se,De){for(var Ke=Se==null?0:Se.length;Ke--&&De(Se[Ke],Ke,Se)!==!1;);return Se}function Xt(Se,De){for(var Ke=-1,kt=Se==null?0:Se.length;++Ke<kt;)if(!De(Se[Ke],Ke,Se))return!1;return!0}function fn(Se,De){for(var Ke=-1,kt=Se==null?0:Se.length,Vt=0,vn=[];++Ke<kt;){var In=Se[Ke];De(In,Ke,Se)&&(vn[Vt++]=In)}return vn}function Kn(Se,De){var Ke=Se==null?0:Se.length;return!!Ke&&Li(Se,De,0)>-1}function Wt(Se,De,Ke){for(var kt=-1,Vt=Se==null?0:Se.length;++kt<Vt;)if(Ke(De,Se[kt]))return!0;return!1}function Dn(Se,De){for(var Ke=-1,kt=Se==null?0:Se.length,Vt=Array(kt);++Ke<kt;)Vt[Ke]=De(Se[Ke],Ke,Se);return Vt}function Fr(Se,De){for(var Ke=-1,kt=De.length,Vt=Se.length;++Ke<kt;)Se[Vt+Ke]=De[Ke];return Se}function Cr(Se,De,Ke,kt){var Vt=-1,vn=Se==null?0:Se.length;for(kt&&vn&&(Ke=Se[++Vt]);++Vt<vn;)Ke=De(Ke,Se[Vt],Vt,Se);return Ke}function Ji(Se,De,Ke,kt){var Vt=Se==null?0:Se.length;for(kt&&Vt&&(Ke=Se[--Vt]);Vt--;)Ke=De(Ke,Se[Vt],Vt,Se);return Ke}function go(Se,De){for(var Ke=-1,kt=Se==null?0:Se.length;++Ke<kt;)if(De(Se[Ke],Ke,Se))return!0;return!1}var Ca=Da("length");function ao(Se){return Se.split("")}function Ba(Se){return Se.match(So)||[]}function $r(Se,De,Ke){var kt;return Ke(Se,function(Vt,vn,In){if(De(Vt,vn,In))return kt=vn,!1}),kt}function Qo(Se,De,Ke,kt){for(var Vt=Se.length,vn=Ke+(kt?1:-1);kt?vn--:++vn<Vt;)if(De(Se[vn],vn,Se))return vn;return-1}function Li(Se,De,Ke){return De===De?Ce(Se,De,Ke):Qo(Se,aa,Ke)}function ia(Se,De,Ke,kt){for(var Vt=Ke-1,vn=Se.length;++Vt<vn;)if(kt(Se[Vt],De))return Vt;return-1}function aa(Se){return Se!==Se}function qu(Se,De){var Ke=Se==null?0:Se.length;return Ke?ys(Se,De)/Ke:$t}function Da(Se){return function(De){return De==null?P:De[Se]}}function Mo(Se){return function(De){return Se==null?P:Se[De]}}function Hs(Se,De,Ke,kt,Vt){return Vt(Se,function(vn,In,xn){Ke=kt?(kt=!1,vn):De(Ke,vn,In,xn)}),Ke}function Ws(Se,De){var Ke=Se.length;for(Se.sort(De);Ke--;)Se[Ke]=Se[Ke].value;return Se}function ys(Se,De){for(var Ke,kt=-1,Vt=Se.length;++kt<Vt;){var vn=De(Se[kt]);vn!==P&&(Ke=Ke===P?vn:Ke+vn)}return Ke}function oo(Se,De){for(var Ke=-1,kt=Array(Se);++Ke<Se;)kt[Ke]=De(Ke);return kt}function qo(Se,De){return Dn(De,function(Ke){return[Ke,Se[Ke]]})}function so(Se){return Se&&Se.slice(0,ht(Se)+1).replace(ra,"")}function Ja(Se){return function(De){return Se(De)}}function Bu(Se,De){return Dn(De,function(Ke){return Se[Ke]})}function es(Se,De){return Se.has(De)}function Ui(Se,De){for(var Ke=-1,kt=Se.length;++Ke<kt&&Li(De,Se[Ke],0)>-1;);return Ke}function $s(Se,De){for(var Ke=Se.length;Ke--&&Li(De,Se[Ke],0)>-1;);return Ke}function _o(Se,De){for(var Ke=Se.length,kt=0;Ke--;)Se[Ke]===De&&++kt;return kt}var Ms=Mo(Ju),af=Mo(Jo);function Rl(Se){return"\\"+Qu[Se]}function uc(Se,De){return Se==null?P:Se[De]}function Ao(Se){return kl.test(Se)}function Nl(Se){return oc.test(Se)}function bs(Se){for(var De,Ke=[];!(De=Se.next()).done;)Ke.push(De.value);return Ke}function el(Se){var De=-1,Ke=Array(Se.size);return Se.forEach(function(kt,Vt){Ke[++De]=[Vt,kt]}),Ke}function y(Se,De){return function(Ke){return Se(De(Ke))}}function M(Se,De){for(var Ke=-1,kt=Se.length,Vt=0,vn=[];++Ke<kt;){var In=Se[Ke];(In===De||In===ne)&&(Se[Ke]=ne,vn[Vt++]=Ke)}return vn}function K(Se){var De=-1,Ke=Array(Se.size);return Se.forEach(function(kt){Ke[++De]=kt}),Ke}function he(Se){var De=-1,Ke=Array(Se.size);return Se.forEach(function(kt){Ke[++De]=[kt,kt]}),Ke}function Ce(Se,De,Ke){for(var kt=Ke-1,Vt=Se.length;++kt<Vt;)if(Se[kt]===De)return kt;return-1}function Re(Se,De,Ke){for(var kt=Ke+1;kt--;)if(Se[kt]===De)return kt;return kt}function We(Se){return Ao(Se)?Lt(Se):Ca(Se)}function Ye(Se){return Ao(Se)?_e(Se):ao(Se)}function ht(Se){for(var De=Se.length;De--&&$a.test(Se.charAt(De)););return De}var Ct=Mo(cu);function Lt(Se){for(var De=Pl.lastIndex=0;Pl.test(Se);)++De;return De}function _e(Se){return Se.match(Pl)||[]}function we(Se){return Se.match(Gf)||[]}var Ue=function Se(De){De=De==null?Aa:et.defaults(Aa.Object(),De,et.pick(Aa,nf));var Ke=De.Array,kt=De.Date,Vt=De.Error,vn=De.Function,In=De.Math,xn=De.Object,Mr=De.RegExp,xr=De.String,Er=De.TypeError,Tr=Ke.prototype,yi=vn.prototype,Xr=xn.prototype,pi=De["__core-js_shared__"],jr=yi.toString,Dr=Xr.hasOwnProperty,va=0,ts=function(){var g=/[^.]+$/.exec(pi&&pi.keys&&pi.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Ll=Xr.toString,lc=jr.call(xn),Zh=Aa._,ag=Mr("^"+jr.call(Dr).replace(ba,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),of=Us?De.Buffer:P,jl=De.Symbol,tl=De.Uint8Array,po=of?of.allocUnsafe:P,_l=y(xn.getPrototypeOf,xn),Jh=xn.create,Fl=Xr.propertyIsEnumerable,Uf=Tr.splice,Qh=jl?jl.isConcatSpreadable:P,Vf=jl?jl.iterator:P,cc=jl?jl.toStringTag:P,Ld=function(){try{var g=mn(xn,"defineProperty");return g({},"",{}),g}catch(w){}}(),Wp=De.clearTimeout!==Aa.clearTimeout&&De.clearTimeout,jd=kt&&kt.now!==Aa.Date.now&&kt.now,og=De.setTimeout!==Aa.setTimeout&&De.setTimeout,du=In.ceil,Hf=In.floor,fc=xn.getOwnPropertySymbols,$p=of?of.isBuffer:P,Wf=De.isFinite,Xp=Tr.join,Bl=y(xn.keys,xn),na=In.max,Fo=In.min,sg=kt.now,ug=De.parseInt,qh=In.random,lg=Tr.reverse,$f=mn(De,"DataView"),sf=mn(De,"Map"),_d=mn(De,"Promise"),dc=mn(De,"Set"),ns=mn(De,"WeakMap"),uf=mn(xn,"create"),Fd=ns&&new ns,Cs={},ev=Ea($f),hc=Ea(sf),Bd=Ea(_d),cg=Ea(dc),fg=Ea(ns),Xf=jl?jl.prototype:P,lf=Xf?Xf.valueOf:P,tv=Xf?Xf.toString:P;function je(g){if(uo(g)&&!bi(g)&&!(g instanceof Bi)){if(g instanceof Bo)return g;if(Dr.call(g,"__wrapped__"))return qr(g)}return new Bo(g)}var cf=function(){function g(){}return function(w){if(!qa(w))return{};if(Jh)return Jh(w);g.prototype=w;var L=new g;return g.prototype=P,L}}();function nl(){}function Bo(g,w){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!w,this.__index__=0,this.__values__=P}je.templateSettings={escape:_a,evaluate:Pa,interpolate:Ti,variable:"",imports:{_:je}},je.prototype=nl.prototype,je.prototype.constructor=je,Bo.prototype=cf(nl.prototype),Bo.prototype.constructor=Bo;function Bi(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ze,this.__views__=[]}function Kp(){var g=new Bi(this.__wrapped__);return g.__actions__=is(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=is(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=is(this.__views__),g}function Yp(){if(this.__filtered__){var g=new Bi(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function dg(){var g=this.__wrapped__.value(),w=this.__dir__,L=bi(g),J=w<0,xe=L?g.length:0,Ge=nr(0,xe,this.__views__),dt=Ge.start,xt=Ge.end,Gt=xt-dt,Un=J?xt:dt-1,Hn=this.__iteratees__,er=Hn.length,yr=0,_r=Fo(Gt,this.__takeCount__);if(!L||!J&&xe==Gt&&_r==Gt)return mu(g,this.__actions__);var ni=[];e:for(;Gt--&&yr<_r;){Un+=w;for(var Di=-1,li=g[Un];++Di<er;){var Vi=Hn[Di],Yi=Vi.iteratee,xu=Vi.type,Ds=Yi(li);if(xu==Ot)li=Ds;else if(!Ds){if(xu==Xe)continue e;break e}}ni[yr++]=li}return ni}Bi.prototype=cf(nl.prototype),Bi.prototype.constructor=Bi;function Gl(g){var w=-1,L=g==null?0:g.length;for(this.clear();++w<L;){var J=g[w];this.set(J[0],J[1])}}function hg(){this.__data__=uf?uf(null):{},this.size=0}function Zp(g){var w=this.has(g)&&delete this.__data__[g];return this.size-=w?1:0,w}function ff(g){var w=this.__data__;if(uf){var L=w[g];return L===Z?P:L}return Dr.call(w,g)?w[g]:P}function Gd(g){var w=this.__data__;return uf?w[g]!==P:Dr.call(w,g)}function Jp(g,w){var L=this.__data__;return this.size+=this.has(g)?0:1,L[g]=uf&&w===P?Z:w,this}Gl.prototype.clear=hg,Gl.prototype.delete=Zp,Gl.prototype.get=ff,Gl.prototype.has=Gd,Gl.prototype.set=Jp;function rl(g){var w=-1,L=g==null?0:g.length;for(this.clear();++w<L;){var J=g[w];this.set(J[0],J[1])}}function Qp(){this.__data__=[],this.size=0}function qp(g){var w=this.__data__,L=vu(w,g);if(L<0)return!1;var J=w.length-1;return L==J?w.pop():Uf.call(w,L,1),--this.size,!0}function em(g){var w=this.__data__,L=vu(w,g);return L<0?P:w[L][1]}function vg(g){return vu(this.__data__,g)>-1}function tm(g,w){var L=this.__data__,J=vu(L,g);return J<0?(++this.size,L.push([g,w])):L[J][1]=w,this}rl.prototype.clear=Qp,rl.prototype.delete=qp,rl.prototype.get=em,rl.prototype.has=vg,rl.prototype.set=tm;function il(g){var w=-1,L=g==null?0:g.length;for(this.clear();++w<L;){var J=g[w];this.set(J[0],J[1])}}function nm(){this.size=0,this.__data__={hash:new Gl,map:new(sf||rl),string:new Gl}}function rm(g){var w=Zt(this,g).delete(g);return this.size-=w?1:0,w}function im(g){return Zt(this,g).get(g)}function df(g){return Zt(this,g).has(g)}function am(g,w){var L=Zt(this,g),J=L.size;return L.set(g,w),this.size+=L.size==J?0:1,this}il.prototype.clear=nm,il.prototype.delete=rm,il.prototype.get=im,il.prototype.has=df,il.prototype.set=am;function vc(g){var w=-1,L=g==null?0:g.length;for(this.__data__=new il;++w<L;)this.add(g[w])}function nv(g){return this.__data__.set(g,Z),this}function Kf(g){return this.__data__.has(g)}vc.prototype.add=vc.prototype.push=nv,vc.prototype.has=Kf;function hu(g){var w=this.__data__=new rl(g);this.size=w.size}function gg(){this.__data__=new rl,this.size=0}function om(g){var w=this.__data__,L=w.delete(g);return this.size=w.size,L}function pg(g){return this.__data__.get(g)}function sm(g){return this.__data__.has(g)}function um(g,w){var L=this.__data__;if(L instanceof rl){var J=L.__data__;if(!sf||J.length<z-1)return J.push([g,w]),this.size=++L.size,this;L=this.__data__=new il(J)}return L.set(g,w),this.size=L.size,this}hu.prototype.clear=gg,hu.prototype.delete=om,hu.prototype.get=pg,hu.prototype.has=sm,hu.prototype.set=um;function mg(g,w){var L=bi(g),J=!L&&md(g),xe=!L&&!J&&xf(g),Ge=!L&&!J&&!xe&&yd(g),dt=L||J||xe||Ge,xt=dt?oo(g.length,xr):[],Gt=xt.length;for(var Un in g)(w||Dr.call(g,Un))&&!(dt&&(Un=="length"||xe&&(Un=="offset"||Un=="parent")||Ge&&(Un=="buffer"||Un=="byteLength"||Un=="byteOffset")||hr(Un,Gt)))&&xt.push(Un);return xt}function gc(g){var w=g.length;return w?g[cv(0,w-1)]:P}function lm(g,w){return Ra(is(g),al(w,0,g.length))}function zd(g){return Ra(is(g))}function Ud(g,w,L){(L!==P&&!hl(g[w],L)||L===P&&!(w in g))&&Es(g,w,L)}function Gu(g,w,L){var J=g[w];(!(Dr.call(g,w)&&hl(J,L))||L===P&&!(w in g))&&Es(g,w,L)}function vu(g,w){for(var L=g.length;L--;)if(hl(g[L][0],w))return L;return-1}function cm(g,w,L,J){return ol(g,function(xe,Ge,dt){w(J,xe,L(xe),dt)}),J}function pc(g,w){return g&&yu(w,Vo(w),g)}function mc(g,w){return g&&yu(w,Ys(w),g)}function Es(g,w,L){w=="__proto__"&&Ld?Ld(g,w,{configurable:!0,enumerable:!0,value:L,writable:!0}):g[w]=L}function Yf(g,w){for(var L=-1,J=w.length,xe=Ke(J),Ge=g==null;++L<J;)xe[L]=Ge?P:Dm(g,w[L]);return xe}function al(g,w,L){return g===g&&(L!==P&&(g=g<=L?g:L),w!==P&&(g=g>=w?g:w)),g}function Go(g,w,L,J,xe,Ge){var dt,xt=w&ie,Gt=w&te,Un=w&ce;if(L&&(dt=xe?L(g,J,xe,Ge):L(g)),dt!==P)return dt;if(!qa(g))return g;var Hn=bi(g);if(Hn){if(dt=zt(g),!xt)return is(g,dt)}else{var er=Pn(g),yr=er==Sn||er==st;if(xf(g))return bf(g,xt);if(er==Kt||er==Qn||yr&&!xe){if(dt=Gt||yr?{}:Ft(g),!xt)return Gt?pm(g,mc(dt,g)):gv(g,pc(dt,g))}else{if(!$i[er])return xe?g:{};dt=Ln(g,er,xt)}}Ge||(Ge=new hu);var _r=Ge.get(g);if(_r)return _r;Ge.set(g,dt),mb(g)?g.forEach(function(li){dt.add(Go(li,w,L,li,g,Ge))}):vb(g)&&g.forEach(function(li,Vi){dt.set(Vi,Go(li,w,L,Vi,g,Ge))});var ni=Un?Gt?ve:bv:Gt?Ys:Vo,Di=Hn?P:ni(g);return rt(Di||g,function(li,Vi){Di&&(Vi=li,li=g[Vi]),Gu(dt,Vi,Go(li,w,L,Vi,g,Ge))}),dt}function rv(g){var w=Vo(g);return function(L){return Vd(L,g,w)}}function Vd(g,w,L){var J=L.length;if(g==null)return!J;for(g=xn(g);J--;){var xe=L[J],Ge=w[xe],dt=g[xe];if(dt===P&&!(xe in g)||!Ge(dt))return!1}return!0}function Zf(g,w,L){if(typeof g!="function")throw new Er(q);return ui(function(){g.apply(P,L)},w)}function hf(g,w,L,J){var xe=-1,Ge=Kn,dt=!0,xt=g.length,Gt=[],Un=w.length;if(!xt)return Gt;L&&(w=Dn(w,Ja(L))),J?(Ge=Wt,dt=!1):w.length>=z&&(Ge=es,dt=!1,w=new vc(w));e:for(;++xe<xt;){var Hn=g[xe],er=L==null?Hn:L(Hn);if(Hn=J||Hn!==0?Hn:0,dt&&er===er){for(var yr=Un;yr--;)if(w[yr]===er)continue e;Gt.push(Hn)}else Ge(w,er,J)||Gt.push(Hn)}return Gt}var ol=bu(gu),iv=bu(Qf,!0);function yg(g,w){var L=!0;return ol(g,function(J,xe,Ge){return L=!!w(J,xe,Ge),L}),L}function Jf(g,w,L){for(var J=-1,xe=g.length;++J<xe;){var Ge=g[J],dt=w(Ge);if(dt!=null&&(xt===P?dt===dt&&!wu(dt):L(dt,xt)))var xt=dt,Gt=Ge}return Gt}function av(g,w,L,J){var xe=g.length;for(L=Oi(L),L<0&&(L=-L>xe?0:xe+L),J=J===P||J>xe?xe:Oi(J),J<0&&(J+=xe),J=L>J?0:km(J);L<J;)g[L++]=w;return g}function Hd(g,w){var L=[];return ol(g,function(J,xe,Ge){w(J,xe,Ge)&&L.push(J)}),L}function To(g,w,L,J,xe){var Ge=-1,dt=g.length;for(L||(L=rn),xe||(xe=[]);++Ge<dt;){var xt=g[Ge];w>0&&L(xt)?w>1?To(xt,w-1,L,J,xe):Fr(xe,xt):J||(xe[xe.length]=xt)}return xe}var Wd=pv(),ov=pv(!0);function gu(g,w){return g&&Wd(g,w,Vo)}function Qf(g,w){return g&&ov(g,w,Vo)}function qf(g,w){return fn(w,function(L){return kc(g[L])})}function zl(g,w){w=rs(w,g);for(var L=0,J=w.length;g!=null&&L<J;)g=g[pa(w[L++])];return L&&L==J?g:P}function $d(g,w,L){var J=w(g);return bi(g)?J:Fr(J,L(g))}function zo(g){return g==null?g===P?ir:_t:cc&&cc in xn(g)?Wn(g):si(g)}function Xd(g,w){return g>w}function sv(g,w){return g!=null&&Dr.call(g,w)}function bg(g,w){return g!=null&&w in xn(g)}function Cg(g,w,L){return g>=Fo(w,L)&&g<na(w,L)}function ed(g,w,L){for(var J=L?Wt:Kn,xe=g[0].length,Ge=g.length,dt=Ge,xt=Ke(Ge),Gt=Infinity,Un=[];dt--;){var Hn=g[dt];dt&&w&&(Hn=Dn(Hn,Ja(w))),Gt=Fo(Hn.length,Gt),xt[dt]=!L&&(w||xe>=120&&Hn.length>=120)?new vc(dt&&Hn):P}Hn=g[0];var er=-1,yr=xt[0];e:for(;++er<xe&&Un.length<Gt;){var _r=Hn[er],ni=w?w(_r):_r;if(_r=L||_r!==0?_r:0,!(yr?es(yr,ni):J(Un,ni,L))){for(dt=Ge;--dt;){var Di=xt[dt];if(!(Di?es(Di,ni):J(g[dt],ni,L)))continue e}yr&&yr.push(ni),Un.push(_r)}}return Un}function Sa(g,w,L,J){return gu(g,function(xe,Ge,dt){w(J,L(xe),Ge,dt)}),J}function vf(g,w,L){w=rs(w,g),g=oi(g,w);var J=g==null?g:g[pa(Et(w))];return J==null?P:ye(J,g,L)}function Kd(g){return uo(g)&&zo(g)==Qn}function uv(g){return uo(g)&&zo(g)==Qe}function zu(g){return uo(g)&&zo(g)==Qt}function As(g,w,L,J,xe){return g===w?!0:g==null||w==null||!uo(g)&&!uo(w)?g!==g&&w!==w:td(g,w,L,J,As,xe)}function td(g,w,L,J,xe,Ge){var dt=bi(g),xt=bi(w),Gt=dt?Pt:Pn(g),Un=xt?Pt:Pn(w);Gt=Gt==Qn?Kt:Gt,Un=Un==Qn?Kt:Un;var Hn=Gt==Kt,er=Un==Kt,yr=Gt==Un;if(yr&&xf(g)){if(!xf(w))return!1;dt=!0,Hn=!1}if(yr&&!Hn)return Ge||(Ge=new hu),dt||yd(g)?yv(g,w,L,J,xe,Ge):gd(g,w,Gt,L,J,xe,Ge);if(!(L&ee)){var _r=Hn&&Dr.call(g,"__wrapped__"),ni=er&&Dr.call(w,"__wrapped__");if(_r||ni){var Di=_r?g.value():g,li=ni?w.value():w;return Ge||(Ge=new hu),xe(Di,li,L,J,Ge)}}return yr?(Ge||(Ge=new hu),mm(g,w,L,J,xe,Ge)):!1}function sl(g){return uo(g)&&Pn(g)==At}function Uu(g,w,L,J){var xe=L.length,Ge=xe,dt=!J;if(g==null)return!Ge;for(g=xn(g);xe--;){var xt=L[xe];if(dt&&xt[2]?xt[1]!==g[xt[0]]:!(xt[0]in g))return!1}for(;++xe<Ge;){xt=L[xe];var Gt=xt[0],Un=g[Gt],Hn=xt[1];if(dt&&xt[2]){if(Un===P&&!(Gt in g))return!1}else{var er=new hu;if(J)var yr=J(Un,Hn,Gt,g,w,er);if(!(yr===P?As(Hn,Un,ee|Y,J,er):yr))return!1}}return!0}function Ul(g){if(!qa(g)||br(g))return!1;var w=kc(g)?ag:Du;return w.test(Ea(g))}function nd(g){return uo(g)&&zo(g)==A}function rd(g){return uo(g)&&Pn(g)==Jn}function Vl(g){return uo(g)&&_g(g.length)&&!!ta[zo(g)]}function Hl(g){return typeof g=="function"?g:g==null?Zs:typeof g=="object"?bi(g)?Zd(g[0],g[1]):Yd(g):Lb(g)}function ul(g){if(!Zn(g))return Bl(g);var w=[];for(var L in xn(g))Dr.call(g,L)&&L!="constructor"&&w.push(L);return w}function yc(g){if(!qa(g))return dr(g);var w=Zn(g),L=[];for(var J in g)J=="constructor"&&(w||!Dr.call(g,J))||L.push(J);return L}function gf(g,w){return g<w}function bc(g,w){var L=-1,J=Ks(g)?Ke(g.length):[];return ol(g,function(xe,Ge,dt){J[++L]=w(xe,Ge,dt)}),J}function Yd(g){var w=Bt(g);return w.length==1&&w[0][2]?hn(w[0][0],w[0][1]):function(L){return L===g||Uu(L,g,w)}}function Zd(g,w){return wn(g)&&zn(w)?hn(pa(g),w):function(L){var J=Dm(L,g);return J===P&&J===w?Im(L,g):As(w,J,ee|Y)}}function ll(g,w,L,J,xe){g!==w&&Wd(w,function(Ge,dt){if(xe||(xe=new hu),qa(Ge))pf(g,w,dt,L,ll,J,xe);else{var xt=J?J(Ia(g,dt),Ge,dt+"",g,w,xe):P;xt===P&&(xt=Ge),Ud(g,dt,xt)}},Ys)}function pf(g,w,L,J,xe,Ge,dt){var xt=Ia(g,L),Gt=Ia(w,L),Un=dt.get(Gt);if(Un){Ud(g,L,Un);return}var Hn=Ge?Ge(xt,Gt,L+"",g,w,dt):P,er=Hn===P;if(er){var yr=bi(Gt),_r=!yr&&xf(Gt),ni=!yr&&!_r&&yd(Gt);Hn=Gt,yr||_r||ni?bi(xt)?Hn=xt:yo(xt)?Hn=is(xt):_r?(er=!1,Hn=bf(Gt,!0)):ni?(er=!1,Hn=qd(Gt,!0)):Hn=[]:ah(Gt)||md(Gt)?(Hn=xt,md(xt)?Hn=Cb(xt):(!qa(xt)||kc(xt))&&(Hn=Ft(Gt))):er=!1}er&&(dt.set(Gt,Hn),xe(Hn,Gt,J,Ge,dt),dt.delete(Gt)),Ud(g,L,Hn)}function Eg(g,w){var L=g.length;if(!!L)return w+=w<0?L:0,hr(w,L)?g[w]:P}function lv(g,w,L){w.length?w=Dn(w,function(Ge){return bi(Ge)?function(dt){return zl(dt,Ge.length===1?Ge[0]:Ge)}:Ge}):w=[Zs];var J=-1;w=Dn(w,Ja(Mt()));var xe=bc(g,function(Ge,dt,xt){var Gt=Dn(w,function(Un){return Un(Ge)});return{criteria:Gt,index:++J,value:Ge}});return Ws(xe,function(Ge,dt){return gm(Ge,dt,L)})}function wg(g,w){return Wl(g,w,function(L,J){return Im(g,J)})}function Wl(g,w,L){for(var J=-1,xe=w.length,Ge={};++J<xe;){var dt=w[J],xt=zl(g,dt);L(xt,dt)&&ad(Ge,rs(dt,g),xt)}return Ge}function xg(g){return function(w){return zl(w,g)}}function id(g,w,L,J){var xe=J?ia:Li,Ge=-1,dt=w.length,xt=g;for(g===w&&(w=is(w)),L&&(xt=Dn(g,Ja(L)));++Ge<dt;)for(var Gt=0,Un=w[Ge],Hn=L?L(Un):Un;(Gt=xe(xt,Hn,Gt,J))>-1;)xt!==g&&Uf.call(xt,Gt,1),Uf.call(g,Gt,1);return g}function Cc(g,w){for(var L=g?w.length:0,J=L-1;L--;){var xe=w[L];if(L==J||xe!==Ge){var Ge=xe;hr(xe)?Uf.call(g,xe,1):ud(g,xe)}}return g}function cv(g,w){return g+Hf(qh()*(w-g+1))}function fm(g,w,L,J){for(var xe=-1,Ge=na(du((w-g)/(L||1)),0),dt=Ke(Ge);Ge--;)dt[J?Ge:++xe]=g,g+=L;return dt}function fv(g,w){var L="";if(!g||w<1||w>Jt)return L;do w%2&&(L+=g),w=Hf(w/2),w&&(g+=g);while(w);return L}function Ci(g,w){return za(zr(g,w,Zs),g+"")}function dm(g){return gc(oh(g))}function dv(g,w){var L=oh(g);return Ra(L,al(w,0,L.length))}function ad(g,w,L,J){if(!qa(g))return g;w=rs(w,g);for(var xe=-1,Ge=w.length,dt=Ge-1,xt=g;xt!=null&&++xe<Ge;){var Gt=pa(w[xe]),Un=L;if(Gt==="__proto__"||Gt==="constructor"||Gt==="prototype")return g;if(xe!=dt){var Hn=xt[Gt];Un=J?J(Hn,Gt,xt):P,Un===P&&(Un=qa(Hn)?Hn:hr(w[xe+1])?[]:{})}Gu(xt,Gt,Un),xt=xt[Gt]}return g}var Jd=Fd?function(g,w){return Fd.set(g,w),g}:Zs,hm=Ld?function(g,w){return Ld(g,"toString",{configurable:!0,enumerable:!1,value:Bm(w),writable:!0})}:Zs;function hv(g){return Ra(oh(g))}function Ts(g,w,L){var J=-1,xe=g.length;w<0&&(w=-w>xe?0:xe+w),L=L>xe?xe:L,L<0&&(L+=xe),xe=w>L?0:L-w>>>0,w>>>=0;for(var Ge=Ke(xe);++J<xe;)Ge[J]=g[J+w];return Ge}function vm(g,w){var L;return ol(g,function(J,xe,Ge){return L=w(J,xe,Ge),!L}),!!L}function od(g,w,L){var J=0,xe=g==null?J:g.length;if(typeof w=="number"&&w===w&&xe<=an){for(;J<xe;){var Ge=J+xe>>>1,dt=g[Ge];dt!==null&&!wu(dt)&&(L?dt<=w:dt<w)?J=Ge+1:xe=Ge}return xe}return Qd(g,w,Zs,L)}function Qd(g,w,L,J){var xe=0,Ge=g==null?0:g.length;if(Ge===0)return 0;w=L(w);for(var dt=w!==w,xt=w===null,Gt=wu(w),Un=w===P;xe<Ge;){var Hn=Hf((xe+Ge)/2),er=L(g[Hn]),yr=er!==P,_r=er===null,ni=er===er,Di=wu(er);if(dt)var li=J||ni;else Un?li=ni&&(J||yr):xt?li=ni&&yr&&(J||!_r):Gt?li=ni&&yr&&!_r&&(J||!Di):_r||Di?li=!1:li=J?er<=w:er<w;li?xe=Hn+1:Ge=Hn}return Fo(Ge,ue)}function sd(g,w){for(var L=-1,J=g.length,xe=0,Ge=[];++L<J;){var dt=g[L],xt=w?w(dt):dt;if(!L||!hl(xt,Gt)){var Gt=xt;Ge[xe++]=dt===0?0:dt}}return Ge}function mf(g){return typeof g=="number"?g:wu(g)?$t:+g}function Wo(g){if(typeof g=="string")return g;if(bi(g))return Dn(g,Wo)+"";if(wu(g))return tv?tv.call(g):"";var w=g+"";return w=="0"&&1/g==-Ut?"-0":w}function pu(g,w,L){var J=-1,xe=Kn,Ge=g.length,dt=!0,xt=[],Gt=xt;if(L)dt=!1,xe=Wt;else if(Ge>=z){var Un=w?null:Ac(g);if(Un)return K(Un);dt=!1,xe=es,Gt=new vc}else Gt=w?[]:xt;e:for(;++J<Ge;){var Hn=g[J],er=w?w(Hn):Hn;if(Hn=L||Hn!==0?Hn:0,dt&&er===er){for(var yr=Gt.length;yr--;)if(Gt[yr]===er)continue e;w&&Gt.push(er),xt.push(Hn)}else xe(Gt,er,L)||(Gt!==xt&&Gt.push(er),xt.push(Hn))}return xt}function ud(g,w){return w=rs(w,g),g=oi(g,w),g==null||delete g[pa(Et(w))]}function ld(g,w,L,J){return ad(g,w,L(zl(g,w)),J)}function Ec(g,w,L,J){for(var xe=g.length,Ge=J?xe:-1;(J?Ge--:++Ge<xe)&&w(g[Ge],Ge,g););return L?Ts(g,J?0:Ge,J?Ge+1:xe):Ts(g,J?Ge+1:0,J?xe:Ge)}function mu(g,w){var L=g;return L instanceof Bi&&(L=L.value()),Cr(w,function(J,xe){return xe.func.apply(xe.thisArg,Fr([J],xe.args))},L)}function Vu(g,w,L){var J=g.length;if(J<2)return J?pu(g[0]):[];for(var xe=-1,Ge=Ke(J);++xe<J;)for(var dt=g[xe],xt=-1;++xt<J;)xt!=xe&&(Ge[xe]=hf(Ge[xe]||dt,g[xt],w,L));return pu(To(Ge,1),w,L)}function cd(g,w,L){for(var J=-1,xe=g.length,Ge=w.length,dt={};++J<xe;){var xt=J<Ge?w[J]:P;L(dt,g[J],xt)}return dt}function wc(g){return yo(g)?g:[]}function xc(g){return typeof g=="function"?g:Zs}function rs(g,w){return bi(g)?g:wn(g,w)?[g]:Xa(ma(g))}var fd=Ci;function Ps(g,w,L){var J=g.length;return L=L===P?J:L,!w&&L>=J?g:Ts(g,w,L)}var yf=Wp||function(g){return Aa.clearTimeout(g)};function bf(g,w){if(w)return g.slice();var L=g.length,J=po?po(L):new g.constructor(L);return g.copy(J),J}function dd(g){var w=new g.constructor(g.byteLength);return new tl(w).set(new tl(g)),w}function Oc(g,w){var L=w?dd(g.buffer):g.buffer;return new g.constructor(L,g.byteOffset,g.byteLength)}function Sc(g){var w=new g.constructor(g.source,Ol.exec(g));return w.lastIndex=g.lastIndex,w}function Og(g){return lf?xn(lf.call(g)):{}}function qd(g,w){var L=w?dd(g.buffer):g.buffer;return new g.constructor(L,g.byteOffset,g.length)}function Sg(g,w){if(g!==w){var L=g!==P,J=g===null,xe=g===g,Ge=wu(g),dt=w!==P,xt=w===null,Gt=w===w,Un=wu(w);if(!xt&&!Un&&!Ge&&g>w||Ge&&dt&&Gt&&!xt&&!Un||J&&dt&&Gt||!L&&Gt||!xe)return 1;if(!J&&!Ge&&!Un&&g<w||Un&&L&&xe&&!J&&!Ge||xt&&L&&xe||!dt&&xe||!Gt)return-1}return 0}function gm(g,w,L){for(var J=-1,xe=g.criteria,Ge=w.criteria,dt=xe.length,xt=L.length;++J<dt;){var Gt=Sg(xe[J],Ge[J]);if(Gt){if(J>=xt)return Gt;var Un=L[J];return Gt*(Un=="desc"?-1:1)}}return g.index-w.index}function vv(g,w,L,J){for(var xe=-1,Ge=g.length,dt=L.length,xt=-1,Gt=w.length,Un=na(Ge-dt,0),Hn=Ke(Gt+Un),er=!J;++xt<Gt;)Hn[xt]=w[xt];for(;++xe<dt;)(er||xe<Ge)&&(Hn[L[xe]]=g[xe]);for(;Un--;)Hn[xt++]=g[xe++];return Hn}function cl(g,w,L,J){for(var xe=-1,Ge=g.length,dt=-1,xt=L.length,Gt=-1,Un=w.length,Hn=na(Ge-xt,0),er=Ke(Hn+Un),yr=!J;++xe<Hn;)er[xe]=g[xe];for(var _r=xe;++Gt<Un;)er[_r+Gt]=w[Gt];for(;++dt<xt;)(yr||xe<Ge)&&(er[_r+L[dt]]=g[xe++]);return er}function is(g,w){var L=-1,J=g.length;for(w||(w=Ke(J));++L<J;)w[L]=g[L];return w}function yu(g,w,L,J){var xe=!L;L||(L={});for(var Ge=-1,dt=w.length;++Ge<dt;){var xt=w[Ge],Gt=J?J(L[xt],g[xt],xt,L,g):P;Gt===P&&(Gt=g[xt]),xe?Es(L,xt,Gt):Gu(L,xt,Gt)}return L}function gv(g,w){return yu(g,Rn(g),w)}function pm(g,w){return yu(g,Nn(g),w)}function hd(g,w){return function(L,J){var xe=bi(L)?Fe:cm,Ge=w?w():{};return xe(L,g,Mt(J,2),Ge)}}function Cf(g){return Ci(function(w,L){var J=-1,xe=L.length,Ge=xe>1?L[xe-1]:P,dt=xe>2?L[2]:P;for(Ge=g.length>3&&typeof Ge=="function"?(xe--,Ge):P,dt&&yn(L[0],L[1],dt)&&(Ge=xe<3?P:Ge,xe=1),w=xn(w);++J<xe;){var xt=L[J];xt&&g(w,xt,J,Ge)}return w})}function bu(g,w){return function(L,J){if(L==null)return L;if(!Ks(L))return g(L,J);for(var xe=L.length,Ge=w?xe:-1,dt=xn(L);(w?Ge--:++Ge<xe)&&J(dt[Ge],Ge,dt)!==!1;);return L}}function pv(g){return function(w,L,J){for(var xe=-1,Ge=xn(w),dt=J(w),xt=dt.length;xt--;){var Gt=dt[g?xt:++xe];if(L(Ge[Gt],Gt,Ge)===!1)break}return w}}function $l(g,w,L){var J=w&le,xe=Mc(g);function Ge(){var dt=this&&this!==Aa&&this instanceof Ge?xe:g;return dt.apply(J?L:this,arguments)}return Ge}function fl(g){return function(w){w=ma(w);var L=Ao(w)?Ye(w):P,J=L?L[0]:w.charAt(0),xe=L?Ps(L,1).join(""):w.slice(1);return J[g]()+xe}}function dl(g){return function(w){return Cr(Rb(Lm(w).replace(Tl,"")),g,"")}}function Mc(g){return function(){var w=arguments;switch(w.length){case 0:return new g;case 1:return new g(w[0]);case 2:return new g(w[0],w[1]);case 3:return new g(w[0],w[1],w[2]);case 4:return new g(w[0],w[1],w[2],w[3]);case 5:return new g(w[0],w[1],w[2],w[3],w[4]);case 6:return new g(w[0],w[1],w[2],w[3],w[4],w[5]);case 7:return new g(w[0],w[1],w[2],w[3],w[4],w[5],w[6])}var L=cf(g.prototype),J=g.apply(L,w);return qa(J)?J:L}}function eh(g,w,L){var J=Mc(g);function xe(){for(var Ge=arguments.length,dt=Ke(Ge),xt=Ge,Gt=Rt(xe);xt--;)dt[xt]=arguments[xt];var Un=Ge<3&&dt[0]!==Gt&&dt[Ge-1]!==Gt?[]:M(dt,Gt);if(Ge-=Un.length,Ge<L)return rh(g,w,Cu,xe.placeholder,P,dt,Un,P,P,L-Ge);var Hn=this&&this!==Aa&&this instanceof xe?J:g;return ye(Hn,this,dt)}return xe}function mv(g){return function(w,L,J){var xe=xn(w);if(!Ks(w)){var Ge=Mt(L,3);w=Vo(w),L=function(xt){return Ge(xe[xt],xt,xe)}}var dt=g(w,L,J);return dt>-1?xe[Ge?w[dt]:dt]:P}}function $o(g){return ks(function(w){var L=w.length,J=L,xe=Bo.prototype.thru;for(g&&w.reverse();J--;){var Ge=w[J];if(typeof Ge!="function")throw new Er(q);if(xe&&!dt&&at(Ge)=="wrapper")var dt=new Bo([],!0)}for(J=dt?J:L;++J<L;){Ge=w[J];var xt=at(Ge),Gt=xt=="wrapper"?Me(Ge):P;Gt&&_n(Gt[0])&&Gt[1]==(j|ge|Te|ke)&&!Gt[4].length&&Gt[9]==1?dt=dt[at(Gt[0])].apply(dt,Gt[3]):dt=Ge.length==1&&_n(Ge)?dt[xt]():dt.thru(Ge)}return function(){var Un=arguments,Hn=Un[0];if(dt&&Un.length==1&&bi(Hn))return dt.plant(Hn).value();for(var er=0,yr=L?w[er].apply(this,Un):Hn;++er<L;)yr=w[er].call(this,yr);return yr}})}function Cu(g,w,L,J,xe,Ge,dt,xt,Gt,Un){var Hn=w&j,er=w&le,yr=w&re,_r=w&(ge|oe),ni=w&Je,Di=yr?P:Mc(g);function li(){for(var Vi=arguments.length,Yi=Ke(Vi),xu=Vi;xu--;)Yi[xu]=arguments[xu];if(_r)var Ds=Rt(li),Is=_o(Yi,Ds);if(J&&(Yi=vv(Yi,J,xe,_r)),Ge&&(Yi=cl(Yi,Ge,dt,_r)),Vi-=Is,_r&&Vi<Un){var bo=M(Yi,Ds);return rh(g,w,Cu,li.placeholder,L,Yi,bo,xt,Gt,Un-Vi)}var gl=er?L:this,Ic=yr?gl[g]:g;return Vi=Yi.length,xt?Yi=Pi(Yi,xt):ni&&Vi>1&&Yi.reverse(),Hn&&Gt<Vi&&(Yi.length=Gt),this&&this!==Aa&&this instanceof li&&(Ic=Di||Mc(Ic)),Ic.apply(gl,Yi)}return li}function Ga(g,w){return function(L,J){return Sa(L,g,w(J),{})}}function Uo(g,w){return function(L,J){var xe;if(L===P&&J===P)return w;if(L!==P&&(xe=L),J!==P){if(xe===P)return J;typeof L=="string"||typeof J=="string"?(L=Wo(L),J=Wo(J)):(L=mf(L),J=mf(J)),xe=g(L,J)}return xe}}function th(g){return ks(function(w){return w=Dn(w,Ja(Mt())),Ci(function(L){var J=this;return g(w,function(xe){return ye(xe,J,L)})})})}function nh(g,w){w=w===P?" ":Wo(w);var L=w.length;if(L<2)return L?fv(w,g):w;var J=fv(w,du(g/We(w)));return Ao(w)?Ps(Ye(J),0,g).join(""):J.slice(0,g)}function Ef(g,w,L,J){var xe=w&le,Ge=Mc(g);function dt(){for(var xt=-1,Gt=arguments.length,Un=-1,Hn=J.length,er=Ke(Hn+Gt),yr=this&&this!==Aa&&this instanceof dt?Ge:g;++Un<Hn;)er[Un]=J[Un];for(;Gt--;)er[Un++]=arguments[++xt];return ye(yr,xe?L:this,er)}return dt}function Mg(g){return function(w,L,J){return J&&typeof J!="number"&&yn(w,L,J)&&(L=J=P),w=Dc(w),L===P?(L=w,w=0):L=Dc(L),J=J===P?w<L?1:-1:Dc(J),fm(w,L,J,g)}}function vd(g){return function(w,L){return typeof w=="string"&&typeof L=="string"||(w=Hu(w),L=Hu(L)),g(w,L)}}function rh(g,w,L,J,xe,Ge,dt,xt,Gt,Un){var Hn=w&ge,er=Hn?dt:P,yr=Hn?P:dt,_r=Hn?Ge:P,ni=Hn?P:Ge;w|=Hn?Te:be,w&=~(Hn?be:Te),w&Q||(w&=~(le|re));var Di=[g,w,xe,_r,er,ni,yr,xt,Gt,Un],li=L.apply(P,Di);return _n(g)&&Qa(li,Di),li.placeholder=J,la(li,g,w)}function ih(g){var w=In[g];return function(L,J){if(L=Hu(L),J=J==null?0:Fo(Oi(J),292),J&&Wf(L)){var xe=(ma(L)+"e").split("e"),Ge=w(xe[0]+"e"+(+xe[1]+J));return xe=(ma(Ge)+"e").split("e"),+(xe[0]+"e"+(+xe[1]-J))}return w(L)}}var Ac=dc&&1/K(new dc([,-0]))[1]==Ut?function(g){return new dc(g)}:Um;function Ag(g){return function(w){var L=Pn(w);return L==At?el(w):L==Jn?he(w):qo(w,g(w))}}function ga(g,w,L,J,xe,Ge,dt,xt){var Gt=w&re;if(!Gt&&typeof g!="function")throw new Er(q);var Un=J?J.length:0;if(Un||(w&=~(Te|be),J=xe=P),dt=dt===P?dt:na(Oi(dt),0),xt=xt===P?xt:Oi(xt),Un-=xe?xe.length:0,w&be){var Hn=J,er=xe;J=xe=P}var yr=Gt?P:Me(g),_r=[g,w,L,J,xe,Hn,er,Ge,dt,xt];if(yr&&ai(_r,yr),g=_r[0],w=_r[1],L=_r[2],J=_r[3],xe=_r[4],xt=_r[9]=_r[9]===P?Gt?0:g.length:na(_r[9]-Un,0),!xt&&w&(ge|oe)&&(w&=~(ge|oe)),!w||w==le)var ni=$l(g,w,L);else w==ge||w==oe?ni=eh(g,w,xt):(w==Te||w==(le|Te))&&!xe.length?ni=Ef(g,w,L,J):ni=Cu.apply(P,_r);var Di=yr?Jd:Qa;return la(Di(ni,_r),g,w)}function Tg(g,w,L,J){return g===P||hl(g,Xr[L])&&!Dr.call(J,L)?w:g}function wf(g,w,L,J,xe,Ge){return qa(g)&&qa(w)&&(Ge.set(w,g),ll(g,w,P,wf,Ge),Ge.delete(w)),g}function Pg(g){return ah(g)?P:g}function yv(g,w,L,J,xe,Ge){var dt=L&ee,xt=g.length,Gt=w.length;if(xt!=Gt&&!(dt&&Gt>xt))return!1;var Un=Ge.get(g),Hn=Ge.get(w);if(Un&&Hn)return Un==w&&Hn==g;var er=-1,yr=!0,_r=L&Y?new vc:P;for(Ge.set(g,w),Ge.set(w,g);++er<xt;){var ni=g[er],Di=w[er];if(J)var li=dt?J(Di,ni,er,w,g,Ge):J(ni,Di,er,g,w,Ge);if(li!==P){if(li)continue;yr=!1;break}if(_r){if(!go(w,function(Vi,Yi){if(!es(_r,Yi)&&(ni===Vi||xe(ni,Vi,L,J,Ge)))return _r.push(Yi)})){yr=!1;break}}else if(!(ni===Di||xe(ni,Di,L,J,Ge))){yr=!1;break}}return Ge.delete(g),Ge.delete(w),yr}function gd(g,w,L,J,xe,Ge,dt){switch(L){case cn:if(g.byteLength!=w.byteLength||g.byteOffset!=w.byteOffset)return!1;g=g.buffer,w=w.buffer;case Qe:return!(g.byteLength!=w.byteLength||!Ge(new tl(g),new tl(w)));case rr:case Qt:case vt:return hl(+g,+w);case kn:return g.name==w.name&&g.message==w.message;case A:case Mn:return g==w+"";case At:var xt=el;case Jn:var Gt=J&ee;if(xt||(xt=K),g.size!=w.size&&!Gt)return!1;var Un=dt.get(g);if(Un)return Un==w;J|=Y,dt.set(g,w);var Hn=yv(xt(g),xt(w),J,xe,Ge,dt);return dt.delete(g),Hn;case sr:if(lf)return lf.call(g)==lf.call(w)}return!1}function mm(g,w,L,J,xe,Ge){var dt=L&ee,xt=bv(g),Gt=xt.length,Un=bv(w),Hn=Un.length;if(Gt!=Hn&&!dt)return!1;for(var er=Gt;er--;){var yr=xt[er];if(!(dt?yr in w:Dr.call(w,yr)))return!1}var _r=Ge.get(g),ni=Ge.get(w);if(_r&&ni)return _r==w&&ni==g;var Di=!0;Ge.set(g,w),Ge.set(w,g);for(var li=dt;++er<Gt;){yr=xt[er];var Vi=g[yr],Yi=w[yr];if(J)var xu=dt?J(Yi,Vi,yr,w,g,Ge):J(Vi,Yi,yr,g,w,Ge);if(!(xu===P?Vi===Yi||xe(Vi,Yi,L,J,Ge):xu)){Di=!1;break}li||(li=yr=="constructor")}if(Di&&!li){var Ds=g.constructor,Is=w.constructor;Ds!=Is&&"constructor"in g&&"constructor"in w&&!(typeof Ds=="function"&&Ds instanceof Ds&&typeof Is=="function"&&Is instanceof Is)&&(Di=!1)}return Ge.delete(g),Ge.delete(w),Di}function ks(g){return za(zr(g,P,Ve),g+"")}function bv(g){return $d(g,Vo,Rn)}function ve(g){return $d(g,Ys,Nn)}var Me=Fd?function(g){return Fd.get(g)}:Um;function at(g){for(var w=g.name+"",L=Cs[w],J=Dr.call(Cs,w)?L.length:0;J--;){var xe=L[J],Ge=xe.func;if(Ge==null||Ge==g)return xe.name}return w}function Rt(g){var w=Dr.call(je,"placeholder")?je:g;return w.placeholder}function Mt(){var g=je.iteratee||Gm;return g=g===Gm?Hl:g,arguments.length?g(arguments[0],arguments[1]):g}function Zt(g,w){var L=g.__data__;return On(w)?L[typeof w=="string"?"string":"hash"]:L.map}function Bt(g){for(var w=Vo(g),L=w.length;L--;){var J=w[L],xe=g[J];w[L]=[J,xe,zn(xe)]}return w}function mn(g,w){var L=uc(g,w);return Ul(L)?L:P}function Wn(g){var w=Dr.call(g,cc),L=g[cc];try{g[cc]=P;var J=!0}catch(Ge){}var xe=Ll.call(g);return J&&(w?g[cc]=L:delete g[cc]),xe}var Rn=fc?function(g){return g==null?[]:(g=xn(g),fn(fc(g),function(w){return Fl.call(g,w)}))}:Vm,Nn=fc?function(g){for(var w=[];g;)Fr(w,Rn(g)),g=_l(g);return w}:Vm,Pn=zo;($f&&Pn(new $f(new ArrayBuffer(1)))!=cn||sf&&Pn(new sf)!=At||_d&&Pn(_d.resolve())!=ln||dc&&Pn(new dc)!=Jn||ns&&Pn(new ns)!=Ie)&&(Pn=function(g){var w=zo(g),L=w==Kt?g.constructor:P,J=L?Ea(L):"";if(J)switch(J){case ev:return cn;case hc:return At;case Bd:return ln;case cg:return Jn;case fg:return Ie}return w});function nr(g,w,L){for(var J=-1,xe=L.length;++J<xe;){var Ge=L[J],dt=Ge.size;switch(Ge.type){case"drop":g+=dt;break;case"dropRight":w-=dt;break;case"take":w=Fo(w,g+dt);break;case"takeRight":g=na(g,w-dt);break}}return{start:g,end:w}}function Yn(g){var w=g.match(ka);return w?w[1].split(Ro):[]}function Bn(g,w,L){w=rs(w,g);for(var J=-1,xe=w.length,Ge=!1;++J<xe;){var dt=pa(w[J]);if(!(Ge=g!=null&&L(g,dt)))break;g=g[dt]}return Ge||++J!=xe?Ge:(xe=g==null?0:g.length,!!xe&&_g(xe)&&hr(dt,xe)&&(bi(g)||md(g)))}function zt(g){var w=g.length,L=new g.constructor(w);return w&&typeof g[0]=="string"&&Dr.call(g,"index")&&(L.index=g.index,L.input=g.input),L}function Ft(g){return typeof g.constructor=="function"&&!Zn(g)?cf(_l(g)):{}}function Ln(g,w,L){var J=g.constructor;switch(w){case Qe:return dd(g);case rr:case Qt:return new J(+g);case cn:return Oc(g,L);case En:case lr:case gi:case cr:case wr:case pr:case Sr:case Qr:case ya:return qd(g,L);case At:return new J;case vt:case Mn:return new J(g);case A:return Sc(g);case Jn:return new J;case sr:return Og(g)}}function ar(g,w){var L=w.length;if(!L)return g;var J=L-1;return w[J]=(L>1?"& ":"")+w[J],w=w.join(L>2?", ":" "),g.replace(ha,`{
/* [wrapped with `+w+`] */
`)}function rn(g){return bi(g)||md(g)||!!(Qh&&g&&g[Qh])}function hr(g,w){var L=typeof g;return w=w==null?Jt:w,!!w&&(L=="number"||L!="symbol"&&iu.test(g))&&g>-1&&g%1==0&&g<w}function yn(g,w,L){if(!qa(L))return!1;var J=typeof w;return(J=="number"?Ks(L)&&hr(w,L.length):J=="string"&&w in L)?hl(L[w],g):!1}function wn(g,w){if(bi(g))return!1;var L=typeof g;return L=="number"||L=="symbol"||L=="boolean"||g==null||wu(g)?!0:Ko.test(g)||!nu.test(g)||w!=null&&g in xn(w)}function On(g){var w=typeof g;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?g!=="__proto__":g===null}function _n(g){var w=at(g),L=je[w];if(typeof L!="function"||!(w in Bi.prototype))return!1;if(g===L)return!0;var J=Me(L);return!!J&&g===J[0]}function br(g){return!!ts&&ts in g}var Gr=pi?kc:Hm;function Zn(g){var w=g&&g.constructor,L=typeof w=="function"&&w.prototype||Xr;return g===L}function zn(g){return g===g&&!qa(g)}function hn(g,w){return function(L){return L==null?!1:L[g]===w&&(w!==P||g in xn(L))}}function Nr(g){var w=Ev(g,function(J){return L.size===X&&L.clear(),J}),L=w.cache;return w}function ai(g,w){var L=g[1],J=w[1],xe=L|J,Ge=xe<(le|re|j),dt=J==j&&L==ge||J==j&&L==ke&&g[7].length<=w[8]||J==(j|ke)&&w[7].length<=w[8]&&L==ge;if(!(Ge||dt))return g;J&le&&(g[2]=w[2],xe|=L&le?0:Q);var xt=w[3];if(xt){var Gt=g[3];g[3]=Gt?vv(Gt,xt,w[4]):xt,g[4]=Gt?M(g[3],ne):w[4]}return xt=w[5],xt&&(Gt=g[5],g[5]=Gt?cl(Gt,xt,w[6]):xt,g[6]=Gt?M(g[5],ne):w[6]),xt=w[7],xt&&(g[7]=xt),J&j&&(g[8]=g[8]==null?w[8]:Fo(g[8],w[8])),g[9]==null&&(g[9]=w[9]),g[0]=w[0],g[1]=xe,g}function dr(g){var w=[];if(g!=null)for(var L in xn(g))w.push(L);return w}function si(g){return Ll.call(g)}function zr(g,w,L){return w=na(w===P?g.length-1:w,0),function(){for(var J=arguments,xe=-1,Ge=na(J.length-w,0),dt=Ke(Ge);++xe<Ge;)dt[xe]=J[w+xe];xe=-1;for(var xt=Ke(w+1);++xe<w;)xt[xe]=J[xe];return xt[w]=L(dt),ye(g,this,xt)}}function oi(g,w){return w.length<2?g:zl(g,Ts(w,0,-1))}function Pi(g,w){for(var L=g.length,J=Fo(w.length,L),xe=is(g);J--;){var Ge=w[J];g[J]=hr(Ge,L)?xe[Ge]:P}return g}function Ia(g,w){if(!(w==="constructor"&&typeof g[w]=="function")&&w!="__proto__")return g[w]}var Qa=ca(Jd),ui=og||function(g,w){return Aa.setTimeout(g,w)},za=ca(hm);function la(g,w,L){var J=w+"";return za(g,ar(J,Ua(Yn(J),L)))}function ca(g){var w=0,L=0;return function(){var J=sg(),xe=k-(J-L);if(L=J,xe>0){if(++w>=ot)return arguments[0]}else w=0;return g.apply(P,arguments)}}function Ra(g,w){var L=-1,J=g.length,xe=J-1;for(w=w===P?J:w;++L<w;){var Ge=cv(L,xe),dt=g[Ge];g[Ge]=g[L],g[L]=dt}return g.length=w,g}var Xa=Nr(function(g){var w=[];return g.charCodeAt(0)===46&&w.push(""),g.replace(Yr,function(L,J,xe,Ge){w.push(xe?Ge.replace(ps,"$1"):J||L)}),w});function pa(g){if(typeof g=="string"||wu(g))return g;var w=g+"";return w=="0"&&1/g==-Ut?"-0":w}function Ea(g){if(g!=null){try{return jr.call(g)}catch(w){}try{return g+""}catch(w){}}return""}function Ua(g,w){return rt(nn,function(L){var J="_."+L[0];w&L[1]&&!Kn(g,J)&&g.push(J)}),g.sort()}function qr(g){if(g instanceof Bi)return g.clone();var w=new Bo(g.__wrapped__,g.__chain__);return w.__actions__=is(g.__actions__),w.__index__=g.__index__,w.__values__=g.__values__,w}function Po(g,w,L){(L?yn(g,w,L):w===P)?w=1:w=na(Oi(w),0);var J=g==null?0:g.length;if(!J||w<1)return[];for(var xe=0,Ge=0,dt=Ke(du(J/w));xe<J;)dt[Ge++]=Ts(g,xe,xe+=w);return dt}function Gi(g){for(var w=-1,L=g==null?0:g.length,J=0,xe=[];++w<L;){var Ge=g[w];Ge&&(xe[J++]=Ge)}return xe}function Ir(){var g=arguments.length;if(!g)return[];for(var w=Ke(g-1),L=arguments[0],J=g;J--;)w[J-1]=arguments[J];return Fr(bi(L)?is(L):[L],To(w,1))}var ei=Ci(function(g,w){return yo(g)?hf(g,To(w,1,yo,!0)):[]}),Ei=Ci(function(g,w){var L=Et(w);return yo(L)&&(L=P),yo(g)?hf(g,To(w,1,yo,!0),Mt(L,2)):[]}),mo=Ci(function(g,w){var L=Et(w);return yo(L)&&(L=P),yo(g)?hf(g,To(w,1,yo,!0),P,L):[]});function as(g,w,L){var J=g==null?0:g.length;return J?(w=L||w===P?1:Oi(w),Ts(g,w<0?0:w,J)):[]}function Tc(g,w,L){var J=g==null?0:g.length;return J?(w=L||w===P?1:Oi(w),w=J-w,Ts(g,0,w<0?0:w)):[]}function Ze(g,w){return g&&g.length?Ec(g,Mt(w,3),!0,!0):[]}function Ht(g,w){return g&&g.length?Ec(g,Mt(w,3),!0):[]}function Nt(g,w,L,J){var xe=g==null?0:g.length;return xe?(L&&typeof L!="number"&&yn(g,w,L)&&(L=0,J=xe),av(g,w,L,J)):[]}function ur(g,w,L){var J=g==null?0:g.length;if(!J)return-1;var xe=L==null?0:Oi(L);return xe<0&&(xe=na(J+xe,0)),Qo(g,Mt(w,3),xe)}function ti(g,w,L){var J=g==null?0:g.length;if(!J)return-1;var xe=J-1;return L!==P&&(xe=Oi(L),xe=L<0?na(J+xe,0):Fo(xe,J-1)),Qo(g,Mt(w,3),xe,!0)}function Ve(g){var w=g==null?0:g.length;return w?To(g,1):[]}function Ne(g){var w=g==null?0:g.length;return w?To(g,Ut):[]}function ct(g,w){var L=g==null?0:g.length;return L?(w=w===P?1:Oi(w),To(g,w)):[]}function St(g){for(var w=-1,L=g==null?0:g.length,J={};++w<L;){var xe=g[w];J[xe[0]]=xe[1]}return J}function Tt(g){return g&&g.length?g[0]:P}function mt(g,w,L){var J=g==null?0:g.length;if(!J)return-1;var xe=L==null?0:Oi(L);return xe<0&&(xe=na(J+xe,0)),Li(g,w,xe)}function ft(g){var w=g==null?0:g.length;return w?Ts(g,0,-1):[]}var wt=Ci(function(g){var w=Dn(g,wc);return w.length&&w[0]===g[0]?ed(w):[]}),He=Ci(function(g){var w=Et(g),L=Dn(g,wc);return w===Et(L)?w=P:L.pop(),L.length&&L[0]===g[0]?ed(L,Mt(w,2)):[]}),ut=Ci(function(g){var w=Et(g),L=Dn(g,wc);return w=typeof w=="function"?w:P,w&&L.pop(),L.length&&L[0]===g[0]?ed(L,P,w):[]});function Be(g,w){return g==null?"":Xp.call(g,w)}function Et(g){var w=g==null?0:g.length;return w?g[w-1]:P}function Dt(g,w,L){var J=g==null?0:g.length;if(!J)return-1;var xe=J;return L!==P&&(xe=Oi(L),xe=xe<0?na(J+xe,0):Fo(xe,J-1)),w===w?Re(g,w,xe):Qo(g,aa,xe,!0)}function on(g,w){return g&&g.length?Eg(g,Oi(w)):P}var un=Ci(qt);function qt(g,w){return g&&g.length&&w&&w.length?id(g,w):g}function Gn(g,w,L){return g&&g.length&&w&&w.length?id(g,w,Mt(L,2)):g}function mr(g,w,L){return g&&g.length&&w&&w.length?id(g,w,P,L):g}var ri=ks(function(g,w){var L=g==null?0:g.length,J=Yf(g,w);return Cc(g,Dn(w,function(xe){return hr(xe,L)?+xe:xe}).sort(Sg)),J});function vr(g,w){var L=[];if(!(g&&g.length))return L;var J=-1,xe=[],Ge=g.length;for(w=Mt(w,3);++J<Ge;){var dt=g[J];w(dt,J,g)&&(L.push(dt),xe.push(J))}return Cc(g,xe),L}function Ar(g){return g==null?g:lg.call(g)}function Kr(g,w,L){var J=g==null?0:g.length;return J?(L&&typeof L!="number"&&yn(g,w,L)?(w=0,L=J):(w=w==null?0:Oi(w),L=L===P?J:Oi(L)),Ts(g,w,L)):[]}function ki(g,w){return od(g,w)}function Na(g,w,L){return Qd(g,w,Mt(L,2))}function os(g,w){var L=g==null?0:g.length;if(L){var J=od(g,w);if(J<L&&hl(g[J],w))return J}return-1}function Cv(g,w){return od(g,w,!0)}function Xs(g,w,L){return Qd(g,w,Mt(L,2),!0)}function kg(g,w){var L=g==null?0:g.length;if(L){var J=od(g,w,!0)-1;if(hl(g[J],w))return J}return-1}function Eu(g){return g&&g.length?sd(g):[]}function Dg(g,w){return g&&g.length?sd(g,Mt(w,2)):[]}function DE(g){var w=g==null?0:g.length;return w?Ts(g,1,w):[]}function IE(g,w,L){return g&&g.length?(w=L||w===P?1:Oi(w),Ts(g,0,w<0?0:w)):[]}function RE(g,w,L){var J=g==null?0:g.length;return J?(w=L||w===P?1:Oi(w),w=J-w,Ts(g,w<0?0:w,J)):[]}function NE(g,w){return g&&g.length?Ec(g,Mt(w,3),!1,!0):[]}function LE(g,w){return g&&g.length?Ec(g,Mt(w,3)):[]}var jE=Ci(function(g){return pu(To(g,1,yo,!0))}),_E=Ci(function(g){var w=Et(g);return yo(w)&&(w=P),pu(To(g,1,yo,!0),Mt(w,2))}),FE=Ci(function(g){var w=Et(g);return w=typeof w=="function"?w:P,pu(To(g,1,yo,!0),P,w)});function BE(g){return g&&g.length?pu(g):[]}function Pc(g,w){return g&&g.length?pu(g,Mt(w,2)):[]}function GE(g,w){return w=typeof w=="function"?w:P,g&&g.length?pu(g,P,w):[]}function ym(g){if(!(g&&g.length))return[];var w=0;return g=fn(g,function(L){if(yo(L))return w=na(L.length,w),!0}),oo(w,function(L){return Dn(g,Da(L))})}function Yy(g,w){if(!(g&&g.length))return[];var L=ym(g);return w==null?L:Dn(L,function(J){return ye(w,P,J)})}var bm=Ci(function(g,w){return yo(g)?hf(g,w):[]}),Zy=Ci(function(g){return Vu(fn(g,yo))}),zE=Ci(function(g){var w=Et(g);return yo(w)&&(w=P),Vu(fn(g,yo),Mt(w,2))}),Cm=Ci(function(g){var w=Et(g);return w=typeof w=="function"?w:P,Vu(fn(g,yo),P,w)}),UE=Ci(ym);function Jy(g,w){return cd(g||[],w||[],Gu)}function VE(g,w){return cd(g||[],w||[],ad)}var Qy=Ci(function(g){var w=g.length,L=w>1?g[w-1]:P;return L=typeof L=="function"?(g.pop(),L):P,Yy(g,L)});function Em(g){var w=je(g);return w.__chain__=!0,w}function HE(g,w){return w(g),g}function Ig(g,w){return w(g)}var WE=ks(function(g){var w=g.length,L=w?g[0]:0,J=this.__wrapped__,xe=function(Ge){return Yf(Ge,g)};return w>1||this.__actions__.length||!(J instanceof Bi)||!hr(L)?this.thru(xe):(J=J.slice(L,+L+(w?1:0)),J.__actions__.push({func:Ig,args:[xe],thisArg:P}),new Bo(J,this.__chain__).thru(function(Ge){return w&&!Ge.length&&Ge.push(P),Ge}))});function wm(){return Em(this)}function $E(){return new Bo(this.value(),this.__chain__)}function qy(){this.__values__===P&&(this.__values__=bb(this.value()));var g=this.__index__>=this.__values__.length,w=g?P:this.__values__[this.__index__++];return{done:g,value:w}}function XE(){return this}function KE(g){for(var w,L=this;L instanceof nl;){var J=qr(L);J.__index__=0,J.__values__=P,w?xe.__wrapped__=J:w=J;var xe=J;L=L.__wrapped__}return xe.__wrapped__=g,w}function YE(){var g=this.__wrapped__;if(g instanceof Bi){var w=g;return this.__actions__.length&&(w=new Bi(this)),w=w.reverse(),w.__actions__.push({func:Ig,args:[Ar],thisArg:P}),new Bo(w,this.__chain__)}return this.thru(Ar)}function eb(){return mu(this.__wrapped__,this.__actions__)}var ZE=hd(function(g,w,L){Dr.call(g,L)?++g[L]:Es(g,L,1)});function JE(g,w,L){var J=bi(g)?Xt:yg;return L&&yn(g,w,L)&&(w=P),J(g,Mt(w,3))}function QE(g,w){var L=bi(g)?fn:Hd;return L(g,Mt(w,3))}var xm=mv(ur),qE=mv(ti);function Om(g,w){return To(Rg(g,w),1)}function ew(g,w){return To(Rg(g,w),Ut)}function pd(g,w,L){return L=L===P?1:Oi(L),To(Rg(g,w),L)}function tb(g,w){var L=bi(g)?rt:ol;return L(g,Mt(w,3))}function nb(g,w){var L=bi(g)?pt:iv;return L(g,Mt(w,3))}var tw=hd(function(g,w,L){Dr.call(g,L)?g[L].push(w):Es(g,L,[w])});function nw(g,w,L,J){g=Ks(g)?g:oh(g),L=L&&!J?Oi(L):0;var xe=g.length;return L<0&&(L=na(xe+L,0)),Fg(g)?L<=xe&&g.indexOf(w,L)>-1:!!xe&&Li(g,w,L)>-1}var rb=Ci(function(g,w,L){var J=-1,xe=typeof w=="function",Ge=Ks(g)?Ke(g.length):[];return ol(g,function(dt){Ge[++J]=xe?ye(w,dt,L):vf(dt,w,L)}),Ge}),Sm=hd(function(g,w,L){Es(g,L,w)});function Rg(g,w){var L=bi(g)?Dn:bc;return L(g,Mt(w,3))}function Ng(g,w,L,J){return g==null?[]:(bi(w)||(w=w==null?[]:[w]),L=J?P:L,bi(L)||(L=L==null?[]:[L]),lv(g,w,L))}var rw=hd(function(g,w,L){g[L?0:1].push(w)},function(){return[[],[]]});function iw(g,w,L){var J=bi(g)?Cr:Hs,xe=arguments.length<3;return J(g,Mt(w,4),L,xe,ol)}function aw(g,w,L){var J=bi(g)?Ji:Hs,xe=arguments.length<3;return J(g,Mt(w,4),L,xe,iv)}function ow(g,w){var L=bi(g)?fn:Hd;return L(g,jg(Mt(w,3)))}function sw(g){var w=bi(g)?gc:dm;return w(g)}function uw(g,w,L){(L?yn(g,w,L):w===P)?w=1:w=Oi(w);var J=bi(g)?lm:dv;return J(g,w)}function lw(g){var w=bi(g)?zd:hv;return w(g)}function cw(g){if(g==null)return 0;if(Ks(g))return Fg(g)?We(g):g.length;var w=Pn(g);return w==At||w==Jn?g.size:ul(g).length}function fw(g,w,L){var J=bi(g)?go:vm;return L&&yn(g,w,L)&&(w=P),J(g,Mt(w,3))}var dw=Ci(function(g,w){if(g==null)return[];var L=w.length;return L>1&&yn(g,w[0],w[1])?w=[]:L>2&&yn(w[0],w[1],w[2])&&(w=[w[0]]),lv(g,To(w,1),[])}),Lg=jd||function(){return Aa.Date.now()};function hw(g,w){if(typeof w!="function")throw new Er(q);return g=Oi(g),function(){if(--g<1)return w.apply(this,arguments)}}function ib(g,w,L){return w=L?P:w,w=g&&w==null?g.length:w,ga(g,j,P,P,P,P,w)}function ab(g,w){var L;if(typeof w!="function")throw new Er(q);return g=Oi(g),function(){return--g>0&&(L=w.apply(this,arguments)),g<=1&&(w=P),L}}var Mm=Ci(function(g,w,L){var J=le;if(L.length){var xe=M(L,Rt(Mm));J|=Te}return ga(g,J,w,L,xe)}),ob=Ci(function(g,w,L){var J=le|re;if(L.length){var xe=M(L,Rt(ob));J|=Te}return ga(w,J,g,L,xe)});function sb(g,w,L){w=L?P:w;var J=ga(g,ge,P,P,P,P,P,w);return J.placeholder=sb.placeholder,J}function ub(g,w,L){w=L?P:w;var J=ga(g,oe,P,P,P,P,P,w);return J.placeholder=ub.placeholder,J}function lb(g,w,L){var J,xe,Ge,dt,xt,Gt,Un=0,Hn=!1,er=!1,yr=!0;if(typeof g!="function")throw new Er(q);w=Hu(w)||0,qa(L)&&(Hn=!!L.leading,er="maxWait"in L,Ge=er?na(Hu(L.maxWait)||0,w):Ge,yr="trailing"in L?!!L.trailing:yr);function _r(bo){var gl=J,Ic=xe;return J=xe=P,Un=bo,dt=g.apply(Ic,gl),dt}function ni(bo){return Un=bo,xt=ui(Vi,w),Hn?_r(bo):dt}function Di(bo){var gl=bo-Gt,Ic=bo-Un,Bb=w-gl;return er?Fo(Bb,Ge-Ic):Bb}function li(bo){var gl=bo-Gt,Ic=bo-Un;return Gt===P||gl>=w||gl<0||er&&Ic>=Ge}function Vi(){var bo=Lg();if(li(bo))return Yi(bo);xt=ui(Vi,Di(bo))}function Yi(bo){return xt=P,yr&&J?_r(bo):(J=xe=P,dt)}function xu(){xt!==P&&yf(xt),Un=0,J=Gt=xe=xt=P}function Ds(){return xt===P?dt:Yi(Lg())}function Is(){var bo=Lg(),gl=li(bo);if(J=arguments,xe=this,Gt=bo,gl){if(xt===P)return ni(Gt);if(er)return yf(xt),xt=ui(Vi,w),_r(Gt)}return xt===P&&(xt=ui(Vi,w)),dt}return Is.cancel=xu,Is.flush=Ds,Is}var vw=Ci(function(g,w){return Zf(g,1,w)}),gw=Ci(function(g,w,L){return Zf(g,Hu(w)||0,L)});function pw(g){return ga(g,Je)}function Ev(g,w){if(typeof g!="function"||w!=null&&typeof w!="function")throw new Er(q);var L=function(){var J=arguments,xe=w?w.apply(this,J):J[0],Ge=L.cache;if(Ge.has(xe))return Ge.get(xe);var dt=g.apply(this,J);return L.cache=Ge.set(xe,dt)||Ge,dt};return L.cache=new(Ev.Cache||il),L}Ev.Cache=il;function jg(g){if(typeof g!="function")throw new Er(q);return function(){var w=arguments;switch(w.length){case 0:return!g.call(this);case 1:return!g.call(this,w[0]);case 2:return!g.call(this,w[0],w[1]);case 3:return!g.call(this,w[0],w[1],w[2])}return!g.apply(this,w)}}function mw(g){return ab(2,g)}var yw=fd(function(g,w){w=w.length==1&&bi(w[0])?Dn(w[0],Ja(Mt())):Dn(To(w,1),Ja(Mt()));var L=w.length;return Ci(function(J){for(var xe=-1,Ge=Fo(J.length,L);++xe<Ge;)J[xe]=w[xe].call(this,J[xe]);return ye(g,this,J)})}),Am=Ci(function(g,w){var L=M(w,Rt(Am));return ga(g,Te,P,w,L)}),cb=Ci(function(g,w){var L=M(w,Rt(cb));return ga(g,be,P,w,L)}),bw=ks(function(g,w){return ga(g,ke,P,P,P,w)});function Cw(g,w){if(typeof g!="function")throw new Er(q);return w=w===P?w:Oi(w),Ci(g,w)}function Ew(g,w){if(typeof g!="function")throw new Er(q);return w=w==null?0:na(Oi(w),0),Ci(function(L){var J=L[w],xe=Ps(L,0,w);return J&&Fr(xe,J),ye(g,this,xe)})}function ww(g,w,L){var J=!0,xe=!0;if(typeof g!="function")throw new Er(q);return qa(L)&&(J="leading"in L?!!L.leading:J,xe="trailing"in L?!!L.trailing:xe),lb(g,w,{leading:J,maxWait:w,trailing:xe})}function xw(g){return ib(g,1)}function Ow(g,w){return Am(xc(w),g)}function Sw(){if(!arguments.length)return[];var g=arguments[0];return bi(g)?g:[g]}function Mw(g){return Go(g,ce)}function fb(g,w){return w=typeof w=="function"?w:P,Go(g,ce,w)}function db(g){return Go(g,ie|ce)}function Aw(g,w){return w=typeof w=="function"?w:P,Go(g,ie|ce,w)}function Tw(g,w){return w==null||Vd(g,w,Vo(w))}function hl(g,w){return g===w||g!==g&&w!==w}var Pw=vd(Xd),kw=vd(function(g,w){return g>=w}),md=Kd(function(){return arguments}())?Kd:function(g){return uo(g)&&Dr.call(g,"callee")&&!Fl.call(g,"callee")},bi=Ke.isArray,Dw=U?Ja(U):uv;function Ks(g){return g!=null&&_g(g.length)&&!kc(g)}function yo(g){return uo(g)&&Ks(g)}function Iw(g){return g===!0||g===!1||uo(g)&&zo(g)==rr}var xf=$p||Hm,Rw=S?Ja(S):zu;function Nw(g){return uo(g)&&g.nodeType===1&&!ah(g)}function Lw(g){if(g==null)return!0;if(Ks(g)&&(bi(g)||typeof g=="string"||typeof g.splice=="function"||xf(g)||yd(g)||md(g)))return!g.length;var w=Pn(g);if(w==At||w==Jn)return!g.size;if(Zn(g))return!ul(g).length;for(var L in g)if(Dr.call(g,L))return!1;return!0}function jw(g,w){return As(g,w)}function _w(g,w,L){L=typeof L=="function"?L:P;var J=L?L(g,w):P;return J===P?As(g,w,P,L):!!J}function Tm(g){if(!uo(g))return!1;var w=zo(g);return w==kn||w==sn||typeof g.message=="string"&&typeof g.name=="string"&&!ah(g)}function Fw(g){return typeof g=="number"&&Wf(g)}function kc(g){if(!qa(g))return!1;var w=zo(g);return w==Sn||w==st||w==Tn||w==bt}function hb(g){return typeof g=="number"&&g==Oi(g)}function _g(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=Jt}function qa(g){var w=typeof g;return g!=null&&(w=="object"||w=="function")}function uo(g){return g!=null&&typeof g=="object"}var vb=G?Ja(G):sl;function Bw(g,w){return g===w||Uu(g,w,Bt(w))}function gb(g,w,L){return L=typeof L=="function"?L:P,Uu(g,w,Bt(w),L)}function Gw(g){return pb(g)&&g!=+g}function zw(g){if(Gr(g))throw new Vt(R);return Ul(g)}function Uw(g){return g===null}function Vw(g){return g==null}function pb(g){return typeof g=="number"||uo(g)&&zo(g)==vt}function ah(g){if(!uo(g)||zo(g)!=Kt)return!1;var w=_l(g);if(w===null)return!0;var L=Dr.call(w,"constructor")&&w.constructor;return typeof L=="function"&&L instanceof L&&jr.call(L)==lc}var Pm=V?Ja(V):nd;function Hw(g){return hb(g)&&g>=-Jt&&g<=Jt}var mb=ae?Ja(ae):rd;function Fg(g){return typeof g=="string"||!bi(g)&&uo(g)&&zo(g)==Mn}function wu(g){return typeof g=="symbol"||uo(g)&&zo(g)==sr}var yd=me?Ja(me):Vl;function Ww(g){return g===P}function $w(g){return uo(g)&&Pn(g)==Ie}function Xw(g){return uo(g)&&zo(g)==pe}var Kw=vd(gf),yb=vd(function(g,w){return g<=w});function bb(g){if(!g)return[];if(Ks(g))return Fg(g)?Ye(g):is(g);if(Vf&&g[Vf])return bs(g[Vf]());var w=Pn(g),L=w==At?el:w==Jn?K:oh;return L(g)}function Dc(g){if(!g)return g===0?g:0;if(g=Hu(g),g===Ut||g===-Ut){var w=g<0?-1:1;return w*nt}return g===g?g:0}function Oi(g){var w=Dc(g),L=w%1;return w===w?L?w-L:w:0}function km(g){return g?al(Oi(g),0,ze):0}function Hu(g){if(typeof g=="number")return g;if(wu(g))return $t;if(qa(g)){var w=typeof g.valueOf=="function"?g.valueOf():g;g=qa(w)?w+"":w}if(typeof g!="string")return g===0?g:+g;g=so(g);var L=Sl.test(g);return L||Iu.test(g)?zf(g.slice(2),L?2:8):No.test(g)?$t:+g}function Cb(g){return yu(g,Ys(g))}function Yw(g){return g?al(Oi(g),-Jt,Jt):g===0?g:0}function ma(g){return g==null?"":Wo(g)}var Zw=Cf(function(g,w){if(Zn(w)||Ks(w)){yu(w,Vo(w),g);return}for(var L in w)Dr.call(w,L)&&Gu(g,L,w[L])}),Eb=Cf(function(g,w){yu(w,Ys(w),g)}),Bg=Cf(function(g,w,L,J){yu(w,Ys(w),g,J)}),Jw=Cf(function(g,w,L,J){yu(w,Vo(w),g,J)}),Qw=ks(Yf);function qw(g,w){var L=cf(g);return w==null?L:pc(L,w)}var ex=Ci(function(g,w){g=xn(g);var L=-1,J=w.length,xe=J>2?w[2]:P;for(xe&&yn(w[0],w[1],xe)&&(J=1);++L<J;)for(var Ge=w[L],dt=Ys(Ge),xt=-1,Gt=dt.length;++xt<Gt;){var Un=dt[xt],Hn=g[Un];(Hn===P||hl(Hn,Xr[Un])&&!Dr.call(g,Un))&&(g[Un]=Ge[Un])}return g}),tx=Ci(function(g){return g.push(P,wf),ye(Ob,P,g)});function nx(g,w){return $r(g,Mt(w,3),gu)}function rx(g,w){return $r(g,Mt(w,3),Qf)}function ix(g,w){return g==null?g:Wd(g,Mt(w,3),Ys)}function ax(g,w){return g==null?g:ov(g,Mt(w,3),Ys)}function La(g,w){return g&&gu(g,Mt(w,3))}function Gg(g,w){return g&&Qf(g,Mt(w,3))}function wb(g){return g==null?[]:qf(g,Vo(g))}function ox(g){return g==null?[]:qf(g,Ys(g))}function Dm(g,w,L){var J=g==null?P:zl(g,w);return J===P?L:J}function sx(g,w){return g!=null&&Bn(g,w,sv)}function Im(g,w){return g!=null&&Bn(g,w,bg)}var ux=Ga(function(g,w,L){w!=null&&typeof w.toString!="function"&&(w=Ll.call(w)),g[w]=L},Bm(Zs)),lx=Ga(function(g,w,L){w!=null&&typeof w.toString!="function"&&(w=Ll.call(w)),Dr.call(g,w)?g[w].push(L):g[w]=[L]},Mt),cx=Ci(vf);function Vo(g){return Ks(g)?mg(g):ul(g)}function Ys(g){return Ks(g)?mg(g,!0):yc(g)}function fx(g,w){var L={};return w=Mt(w,3),gu(g,function(J,xe,Ge){Es(L,w(J,xe,Ge),J)}),L}function dx(g,w){var L={};return w=Mt(w,3),gu(g,function(J,xe,Ge){Es(L,xe,w(J,xe,Ge))}),L}var xb=Cf(function(g,w,L){ll(g,w,L)}),Ob=Cf(function(g,w,L,J){ll(g,w,L,J)}),hx=ks(function(g,w){var L={};if(g==null)return L;var J=!1;w=Dn(w,function(Ge){return Ge=rs(Ge,g),J||(J=Ge.length>1),Ge}),yu(g,ve(g),L),J&&(L=Go(L,ie|te|ce,Pg));for(var xe=w.length;xe--;)ud(L,w[xe]);return L});function vx(g,w){return Sb(g,jg(Mt(w)))}var gx=ks(function(g,w){return g==null?{}:wg(g,w)});function Sb(g,w){if(g==null)return{};var L=Dn(ve(g),function(J){return[J]});return w=Mt(w),Wl(g,L,function(J,xe){return w(J,xe[0])})}function px(g,w,L){w=rs(w,g);var J=-1,xe=w.length;for(xe||(xe=1,g=P);++J<xe;){var Ge=g==null?P:g[pa(w[J])];Ge===P&&(J=xe,Ge=L),g=kc(Ge)?Ge.call(g):Ge}return g}function $n(g,w,L){return g==null?g:ad(g,w,L)}function Xn(g,w,L,J){return J=typeof J=="function"?J:P,g==null?g:ad(g,w,L,J)}var Mb=Ag(Vo),Rm=Ag(Ys);function mx(g,w,L){var J=bi(g),xe=J||xf(g)||yd(g);if(w=Mt(w,4),L==null){var Ge=g&&g.constructor;xe?L=J?new Ge:[]:qa(g)?L=kc(Ge)?cf(_l(g)):{}:L={}}return(xe?rt:gu)(g,function(dt,xt,Gt){return w(L,dt,xt,Gt)}),L}function yx(g,w){return g==null?!0:ud(g,w)}function bx(g,w,L){return g==null?g:ld(g,w,xc(L))}function Ab(g,w,L,J){return J=typeof J=="function"?J:P,g==null?g:ld(g,w,xc(L),J)}function oh(g){return g==null?[]:Bu(g,Vo(g))}function Cx(g){return g==null?[]:Bu(g,Ys(g))}function Ex(g,w,L){return L===P&&(L=w,w=P),L!==P&&(L=Hu(L),L=L===L?L:0),w!==P&&(w=Hu(w),w=w===w?w:0),al(Hu(g),w,L)}function Nm(g,w,L){return w=Dc(w),L===P?(L=w,w=0):L=Dc(L),g=Hu(g),Cg(g,w,L)}function Tb(g,w,L){if(L&&typeof L!="boolean"&&yn(g,w,L)&&(w=L=P),L===P&&(typeof w=="boolean"?(L=w,w=P):typeof g=="boolean"&&(L=g,g=P)),g===P&&w===P?(g=0,w=1):(g=Dc(g),w===P?(w=g,g=0):w=Dc(w)),g>w){var J=g;g=w,w=J}if(L||g%1||w%1){var xe=qh();return Fo(g+xe*(w-g+Dl("1e-"+((xe+"").length-1))),w)}return cv(g,w)}var wx=dl(function(g,w,L){return w=w.toLowerCase(),g+(L?Pb(w):w)});function Pb(g){return _m(ma(g).toLowerCase())}function Lm(g){return g=ma(g),g&&g.replace(Ru,Ms).replace(Gs,"")}function xx(g,w,L){g=ma(g),w=Wo(w);var J=g.length;L=L===P?J:al(Oi(L),0,J);var xe=L;return L-=w.length,L>=0&&g.slice(L,xe)==w}function Ox(g){return g=ma(g),g&&Fi.test(g)?g.replace(Ka,af):g}function Sx(g){return g=ma(g),g&&gs.test(g)?g.replace(ba,"\\$&"):g}var Mx=dl(function(g,w,L){return g+(L?"-":"")+w.toLowerCase()}),jm=dl(function(g,w,L){return g+(L?" ":"")+w.toLowerCase()}),Ax=fl("toLowerCase");function Tx(g,w,L){g=ma(g),w=Oi(w);var J=w?We(g):0;if(!w||J>=w)return g;var xe=(w-J)/2;return nh(Hf(xe),L)+g+nh(du(xe),L)}function Px(g,w,L){g=ma(g),w=Oi(w);var J=w?We(g):0;return w&&J<w?g+nh(w-J,L):g}function kb(g,w,L){g=ma(g),w=Oi(w);var J=w?We(g):0;return w&&J<w?nh(w-J,L)+g:g}function kx(g,w,L){return L||w==null?w=0:w&&(w=+w),ug(ma(g).replace(ra,""),w||0)}function Dx(g,w,L){return(L?yn(g,w,L):w===P)?w=1:w=Oi(w),fv(ma(g),w)}function Db(){var g=arguments,w=ma(g[0]);return g.length<3?w:w.replace(g[1],g[2])}var Ix=dl(function(g,w,L){return g+(L?"_":"")+w.toLowerCase()});function Rx(g,w,L){return L&&typeof L!="number"&&yn(g,w,L)&&(w=L=P),L=L===P?ze:L>>>0,L?(g=ma(g),g&&(typeof w=="string"||w!=null&&!Pm(w))&&(w=Wo(w),!w&&Ao(g))?Ps(Ye(g),0,L):g.split(w,L)):[]}var Nx=dl(function(g,w,L){return g+(L?" ":"")+_m(w)});function Ib(g,w,L){return g=ma(g),L=L==null?0:al(Oi(L),0,g.length),w=Wo(w),g.slice(L,L+w.length)==w}function Lx(g,w,L){var J=je.templateSettings;L&&yn(g,w,L)&&(w=P),g=ma(g),w=Bg({},w,J,Tg);var xe=Bg({},w.imports,J.imports,Tg),Ge=Vo(xe),dt=Bu(xe,Ge),xt,Gt,Un=0,Hn=w.interpolate||Nu,er="__p += '",yr=Mr((w.escape||Nu).source+"|"+Hn.source+"|"+(Hn===Ti?ru:Nu).source+"|"+(w.evaluate||Nu).source+"|$","g"),_r="//# sourceURL="+(Dr.call(w,"sourceURL")?(w.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rf+"]")+`
`;g.replace(yr,function(li,Vi,Yi,xu,Ds,Is){return Yi||(Yi=xu),er+=g.slice(Un,Is).replace(au,Rl),Vi&&(xt=!0,er+=`' +
__e(`+Vi+`) +
'`),Ds&&(Gt=!0,er+=`';
`+Ds+`;
__p += '`),Yi&&(er+=`' +
((__t = (`+Yi+`)) == null ? '' : __t) +
'`),Un=Is+li.length,li}),er+=`';
`;var ni=Dr.call(w,"variable")&&w.variable;if(!ni)er=`with (obj) {
`+er+`
}
`;else if(ho.test(ni))throw new Vt(W);er=(Gt?er.replace(Ki,""):er).replace(vs,"$1").replace(tu,"$1;"),er="function("+(ni||"obj")+`) {
`+(ni?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(xt?", __e = _.escape":"")+(Gt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+er+`return __p
}`;var Di=Fm(function(){return vn(Ge,_r+"return "+er).apply(P,dt)});if(Di.source=er,Tm(Di))throw Di;return Di}function jx(g){return ma(g).toLowerCase()}function _x(g){return ma(g).toUpperCase()}function Fx(g,w,L){if(g=ma(g),g&&(L||w===P))return so(g);if(!g||!(w=Wo(w)))return g;var J=Ye(g),xe=Ye(w),Ge=Ui(J,xe),dt=$s(J,xe)+1;return Ps(J,Ge,dt).join("")}function zg(g,w,L){if(g=ma(g),g&&(L||w===P))return g.slice(0,ht(g)+1);if(!g||!(w=Wo(w)))return g;var J=Ye(g),xe=$s(J,Ye(w))+1;return Ps(J,0,xe).join("")}function Bx(g,w,L){if(g=ma(g),g&&(L||w===P))return g.replace(ra,"");if(!g||!(w=Wo(w)))return g;var J=Ye(g),xe=Ui(J,Ye(w));return Ps(J,xe).join("")}function Gx(g,w){var L=Pe,J=Ae;if(qa(w)){var xe="separator"in w?w.separator:xe;L="length"in w?Oi(w.length):L,J="omission"in w?Wo(w.omission):J}g=ma(g);var Ge=g.length;if(Ao(g)){var dt=Ye(g);Ge=dt.length}if(L>=Ge)return g;var xt=L-We(J);if(xt<1)return J;var Gt=dt?Ps(dt,0,xt).join(""):g.slice(0,xt);if(xe===P)return Gt+J;if(dt&&(xt+=Gt.length-xt),Pm(xe)){if(g.slice(xt).search(xe)){var Un,Hn=Gt;for(xe.global||(xe=Mr(xe.source,ma(Ol.exec(xe))+"g")),xe.lastIndex=0;Un=xe.exec(Hn);)var er=Un.index;Gt=Gt.slice(0,er===P?xt:er)}}else if(g.indexOf(Wo(xe),xt)!=xt){var yr=Gt.lastIndexOf(xe);yr>-1&&(Gt=Gt.slice(0,yr))}return Gt+J}function zx(g){return g=ma(g),g&&Ya.test(g)?g.replace(Wa,Ct):g}var Ux=dl(function(g,w,L){return g+(L?" ":"")+w.toUpperCase()}),_m=fl("toUpperCase");function Rb(g,w,L){return g=ma(g),w=L?P:w,w===P?Nl(g)?we(g):Ba(g):g.match(w)||[]}var Fm=Ci(function(g,w){try{return ye(g,P,w)}catch(L){return Tm(L)?L:new Vt(L)}}),Vx=ks(function(g,w){return rt(w,function(L){L=pa(L),Es(g,L,Mm(g[L],g))}),g});function Hx(g){var w=g==null?0:g.length,L=Mt();return g=w?Dn(g,function(J){if(typeof J[1]!="function")throw new Er(q);return[L(J[0]),J[1]]}):[],Ci(function(J){for(var xe=-1;++xe<w;){var Ge=g[xe];if(ye(Ge[0],this,J))return ye(Ge[1],this,J)}})}function Wx(g){return rv(Go(g,ie))}function Bm(g){return function(){return g}}function $x(g,w){return g==null||g!==g?w:g}var Of=$o(),Nb=$o(!0);function Zs(g){return g}function Gm(g){return Hl(typeof g=="function"?g:Go(g,ie))}function Ug(g){return Yd(Go(g,ie))}function Xx(g,w){return Zd(g,Go(w,ie))}var vl=Ci(function(g,w){return function(L){return vf(L,g,w)}}),Kx=Ci(function(g,w){return function(L){return vf(g,L,w)}});function zm(g,w,L){var J=Vo(w),xe=qf(w,J);L==null&&!(qa(w)&&(xe.length||!J.length))&&(L=w,w=g,g=this,xe=qf(w,Vo(w)));var Ge=!(qa(L)&&"chain"in L)||!!L.chain,dt=kc(g);return rt(xe,function(xt){var Gt=w[xt];g[xt]=Gt,dt&&(g.prototype[xt]=function(){var Un=this.__chain__;if(Ge||Un){var Hn=g(this.__wrapped__),er=Hn.__actions__=is(this.__actions__);return er.push({func:Gt,args:arguments,thisArg:g}),Hn.__chain__=Un,Hn}return Gt.apply(g,Fr([this.value()],arguments))})}),g}function Yx(){return Aa._===this&&(Aa._=Zh),this}function Um(){}function Zx(g){return g=Oi(g),Ci(function(w){return Eg(w,g)})}var Jx=th(Dn),Qx=th(Xt),Vg=th(go);function Lb(g){return wn(g)?Da(pa(g)):xg(g)}function qx(g){return function(w){return g==null?P:zl(g,w)}}var eO=Mg(),tO=Mg(!0);function Vm(){return[]}function Hm(){return!1}function nO(){return{}}function rO(){return""}function iO(){return!0}function sh(g,w){if(g=Oi(g),g<1||g>Jt)return[];var L=ze,J=Fo(g,ze);w=Mt(w),g-=ze;for(var xe=oo(J,w);++L<g;)w(L);return xe}function aO(g){return bi(g)?Dn(g,pa):wu(g)?[g]:is(Xa(ma(g)))}function oO(g){var w=++va;return ma(g)+w}var sO=Uo(function(g,w){return g+w},0),jb=ih("ceil"),uO=Uo(function(g,w){return g/w},1),_b=ih("floor");function lO(g){return g&&g.length?Jf(g,Zs,Xd):P}function cO(g,w){return g&&g.length?Jf(g,Mt(w,2),Xd):P}function Fb(g){return qu(g,Zs)}function fO(g,w){return qu(g,Mt(w,2))}function dO(g){return g&&g.length?Jf(g,Zs,gf):P}function hO(g,w){return g&&g.length?Jf(g,Mt(w,2),gf):P}var vO=Uo(function(g,w){return g*w},1),gO=ih("round"),pO=Uo(function(g,w){return g-w},0);function Wm(g){return g&&g.length?ys(g,Zs):0}function $m(g,w){return g&&g.length?ys(g,Mt(w,2)):0}return je.after=hw,je.ary=ib,je.assign=Zw,je.assignIn=Eb,je.assignInWith=Bg,je.assignWith=Jw,je.at=Qw,je.before=ab,je.bind=Mm,je.bindAll=Vx,je.bindKey=ob,je.castArray=Sw,je.chain=Em,je.chunk=Po,je.compact=Gi,je.concat=Ir,je.cond=Hx,je.conforms=Wx,je.constant=Bm,je.countBy=ZE,je.create=qw,je.curry=sb,je.curryRight=ub,je.debounce=lb,je.defaults=ex,je.defaultsDeep=tx,je.defer=vw,je.delay=gw,je.difference=ei,je.differenceBy=Ei,je.differenceWith=mo,je.drop=as,je.dropRight=Tc,je.dropRightWhile=Ze,je.dropWhile=Ht,je.fill=Nt,je.filter=QE,je.flatMap=Om,je.flatMapDeep=ew,je.flatMapDepth=pd,je.flatten=Ve,je.flattenDeep=Ne,je.flattenDepth=ct,je.flip=pw,je.flow=Of,je.flowRight=Nb,je.fromPairs=St,je.functions=wb,je.functionsIn=ox,je.groupBy=tw,je.initial=ft,je.intersection=wt,je.intersectionBy=He,je.intersectionWith=ut,je.invert=ux,je.invertBy=lx,je.invokeMap=rb,je.iteratee=Gm,je.keyBy=Sm,je.keys=Vo,je.keysIn=Ys,je.map=Rg,je.mapKeys=fx,je.mapValues=dx,je.matches=Ug,je.matchesProperty=Xx,je.memoize=Ev,je.merge=xb,je.mergeWith=Ob,je.method=vl,je.methodOf=Kx,je.mixin=zm,je.negate=jg,je.nthArg=Zx,je.omit=hx,je.omitBy=vx,je.once=mw,je.orderBy=Ng,je.over=Jx,je.overArgs=yw,je.overEvery=Qx,je.overSome=Vg,je.partial=Am,je.partialRight=cb,je.partition=rw,je.pick=gx,je.pickBy=Sb,je.property=Lb,je.propertyOf=qx,je.pull=un,je.pullAll=qt,je.pullAllBy=Gn,je.pullAllWith=mr,je.pullAt=ri,je.range=eO,je.rangeRight=tO,je.rearg=bw,je.reject=ow,je.remove=vr,je.rest=Cw,je.reverse=Ar,je.sampleSize=uw,je.set=$n,je.setWith=Xn,je.shuffle=lw,je.slice=Kr,je.sortBy=dw,je.sortedUniq=Eu,je.sortedUniqBy=Dg,je.split=Rx,je.spread=Ew,je.tail=DE,je.take=IE,je.takeRight=RE,je.takeRightWhile=NE,je.takeWhile=LE,je.tap=HE,je.throttle=ww,je.thru=Ig,je.toArray=bb,je.toPairs=Mb,je.toPairsIn=Rm,je.toPath=aO,je.toPlainObject=Cb,je.transform=mx,je.unary=xw,je.union=jE,je.unionBy=_E,je.unionWith=FE,je.uniq=BE,je.uniqBy=Pc,je.uniqWith=GE,je.unset=yx,je.unzip=ym,je.unzipWith=Yy,je.update=bx,je.updateWith=Ab,je.values=oh,je.valuesIn=Cx,je.without=bm,je.words=Rb,je.wrap=Ow,je.xor=Zy,je.xorBy=zE,je.xorWith=Cm,je.zip=UE,je.zipObject=Jy,je.zipObjectDeep=VE,je.zipWith=Qy,je.entries=Mb,je.entriesIn=Rm,je.extend=Eb,je.extendWith=Bg,zm(je,je),je.add=sO,je.attempt=Fm,je.camelCase=wx,je.capitalize=Pb,je.ceil=jb,je.clamp=Ex,je.clone=Mw,je.cloneDeep=db,je.cloneDeepWith=Aw,je.cloneWith=fb,je.conformsTo=Tw,je.deburr=Lm,je.defaultTo=$x,je.divide=uO,je.endsWith=xx,je.eq=hl,je.escape=Ox,je.escapeRegExp=Sx,je.every=JE,je.find=xm,je.findIndex=ur,je.findKey=nx,je.findLast=qE,je.findLastIndex=ti,je.findLastKey=rx,je.floor=_b,je.forEach=tb,je.forEachRight=nb,je.forIn=ix,je.forInRight=ax,je.forOwn=La,je.forOwnRight=Gg,je.get=Dm,je.gt=Pw,je.gte=kw,je.has=sx,je.hasIn=Im,je.head=Tt,je.identity=Zs,je.includes=nw,je.indexOf=mt,je.inRange=Nm,je.invoke=cx,je.isArguments=md,je.isArray=bi,je.isArrayBuffer=Dw,je.isArrayLike=Ks,je.isArrayLikeObject=yo,je.isBoolean=Iw,je.isBuffer=xf,je.isDate=Rw,je.isElement=Nw,je.isEmpty=Lw,je.isEqual=jw,je.isEqualWith=_w,je.isError=Tm,je.isFinite=Fw,je.isFunction=kc,je.isInteger=hb,je.isLength=_g,je.isMap=vb,je.isMatch=Bw,je.isMatchWith=gb,je.isNaN=Gw,je.isNative=zw,je.isNil=Vw,je.isNull=Uw,je.isNumber=pb,je.isObject=qa,je.isObjectLike=uo,je.isPlainObject=ah,je.isRegExp=Pm,je.isSafeInteger=Hw,je.isSet=mb,je.isString=Fg,je.isSymbol=wu,je.isTypedArray=yd,je.isUndefined=Ww,je.isWeakMap=$w,je.isWeakSet=Xw,je.join=Be,je.kebabCase=Mx,je.last=Et,je.lastIndexOf=Dt,je.lowerCase=jm,je.lowerFirst=Ax,je.lt=Kw,je.lte=yb,je.max=lO,je.maxBy=cO,je.mean=Fb,je.meanBy=fO,je.min=dO,je.minBy=hO,je.stubArray=Vm,je.stubFalse=Hm,je.stubObject=nO,je.stubString=rO,je.stubTrue=iO,je.multiply=vO,je.nth=on,je.noConflict=Yx,je.noop=Um,je.now=Lg,je.pad=Tx,je.padEnd=Px,je.padStart=kb,je.parseInt=kx,je.random=Tb,je.reduce=iw,je.reduceRight=aw,je.repeat=Dx,je.replace=Db,je.result=px,je.round=gO,je.runInContext=Se,je.sample=sw,je.size=cw,je.snakeCase=Ix,je.some=fw,je.sortedIndex=ki,je.sortedIndexBy=Na,je.sortedIndexOf=os,je.sortedLastIndex=Cv,je.sortedLastIndexBy=Xs,je.sortedLastIndexOf=kg,je.startCase=Nx,je.startsWith=Ib,je.subtract=pO,je.sum=Wm,je.sumBy=$m,je.template=Lx,je.times=sh,je.toFinite=Dc,je.toInteger=Oi,je.toLength=km,je.toLower=jx,je.toNumber=Hu,je.toSafeInteger=Yw,je.toString=ma,je.toUpper=_x,je.trim=Fx,je.trimEnd=zg,je.trimStart=Bx,je.truncate=Gx,je.unescape=zx,je.uniqueId=oO,je.upperCase=Ux,je.upperFirst=_m,je.each=tb,je.eachRight=nb,je.first=Tt,zm(je,function(){var g={};return gu(je,function(w,L){Dr.call(je.prototype,L)||(g[L]=w)}),g}(),{chain:!1}),je.VERSION=N,rt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){je[g].placeholder=je}),rt(["drop","take"],function(g,w){Bi.prototype[g]=function(L){L=L===P?1:na(Oi(L),0);var J=this.__filtered__&&!w?new Bi(this):this.clone();return J.__filtered__?J.__takeCount__=Fo(L,J.__takeCount__):J.__views__.push({size:Fo(L,ze),type:g+(J.__dir__<0?"Right":"")}),J},Bi.prototype[g+"Right"]=function(L){return this.reverse()[g](L).reverse()}}),rt(["filter","map","takeWhile"],function(g,w){var L=w+1,J=L==Xe||L==lt;Bi.prototype[g]=function(xe){var Ge=this.clone();return Ge.__iteratees__.push({iteratee:Mt(xe,3),type:L}),Ge.__filtered__=Ge.__filtered__||J,Ge}}),rt(["head","last"],function(g,w){var L="take"+(w?"Right":"");Bi.prototype[g]=function(){return this[L](1).value()[0]}}),rt(["initial","tail"],function(g,w){var L="drop"+(w?"":"Right");Bi.prototype[g]=function(){return this.__filtered__?new Bi(this):this[L](1)}}),Bi.prototype.compact=function(){return this.filter(Zs)},Bi.prototype.find=function(g){return this.filter(g).head()},Bi.prototype.findLast=function(g){return this.reverse().find(g)},Bi.prototype.invokeMap=Ci(function(g,w){return typeof g=="function"?new Bi(this):this.map(function(L){return vf(L,g,w)})}),Bi.prototype.reject=function(g){return this.filter(jg(Mt(g)))},Bi.prototype.slice=function(g,w){g=Oi(g);var L=this;return L.__filtered__&&(g>0||w<0)?new Bi(L):(g<0?L=L.takeRight(-g):g&&(L=L.drop(g)),w!==P&&(w=Oi(w),L=w<0?L.dropRight(-w):L.take(w-g)),L)},Bi.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},Bi.prototype.toArray=function(){return this.take(ze)},gu(Bi.prototype,function(g,w){var L=/^(?:filter|find|map|reject)|While$/.test(w),J=/^(?:head|last)$/.test(w),xe=je[J?"take"+(w=="last"?"Right":""):w],Ge=J||/^find/.test(w);!xe||(je.prototype[w]=function(){var dt=this.__wrapped__,xt=J?[1]:arguments,Gt=dt instanceof Bi,Un=xt[0],Hn=Gt||bi(dt),er=function(Vi){var Yi=xe.apply(je,Fr([Vi],xt));return J&&yr?Yi[0]:Yi};Hn&&L&&typeof Un=="function"&&Un.length!=1&&(Gt=Hn=!1);var yr=this.__chain__,_r=!!this.__actions__.length,ni=Ge&&!yr,Di=Gt&&!_r;if(!Ge&&Hn){dt=Di?dt:new Bi(this);var li=g.apply(dt,xt);return li.__actions__.push({func:Ig,args:[er],thisArg:P}),new Bo(li,yr)}return ni&&Di?g.apply(this,xt):(li=this.thru(er),ni?J?li.value()[0]:li.value():li)})}),rt(["pop","push","shift","sort","splice","unshift"],function(g){var w=Tr[g],L=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",J=/^(?:pop|shift)$/.test(g);je.prototype[g]=function(){var xe=arguments;if(J&&!this.__chain__){var Ge=this.value();return w.apply(bi(Ge)?Ge:[],xe)}return this[L](function(dt){return w.apply(bi(dt)?dt:[],xe)})}}),gu(Bi.prototype,function(g,w){var L=je[w];if(L){var J=L.name+"";Dr.call(Cs,J)||(Cs[J]=[]),Cs[J].push({name:w,func:L})}}),Cs[Cu(P,re).name]=[{name:"wrapper",func:P}],Bi.prototype.clone=Kp,Bi.prototype.reverse=Yp,Bi.prototype.value=dg,je.prototype.at=WE,je.prototype.chain=wm,je.prototype.commit=$E,je.prototype.next=qy,je.prototype.plant=KE,je.prototype.reverse=YE,je.prototype.toJSON=je.prototype.valueOf=je.prototype.value=eb,je.prototype.first=je.prototype.head,Vf&&(je.prototype[Vf]=XE),je},et=Ue();Aa._=et,_=function(){return et}.call(T,v,T,C),_!==P&&(C.exports=_)}).call(this)}).call(this,v("IyRk"),v("hOG+")(fe))},Lwbf:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B={},C=T.render=function(N,z,R,q){if(typeof document=="undefined"&&!q)return null;var W=q?new q:document.createElement("canvas");W.width=R*2,W.height=R*2;var Z=W.getContext("2d");return Z?(Z.fillStyle=N,Z.fillRect(0,0,W.width,W.height),Z.fillStyle=z,Z.fillRect(0,0,R,R),Z.translate(R,R),Z.fillRect(0,0,R,R),W.toDataURL()):null},_=T.get=function(N,z,R,q){var W=N+"-"+z+"-"+R+(q?"-server":"");if(B[W])return B[W];var Z=C(N,z,R,q);return B[W]=Z,Z}},"Lx/H":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Github=void 0;var B=v("q1tI"),C=te(B),_=v("17x9"),P=te(_),N=v("/FUP"),z=te(N),R=v("3WF5"),q=te(R),W=v("QkVN"),Z=te(W),X=v("TM95"),ne=v("iGDq"),ie=te(ne);function te(ee){return ee&&ee.__esModule?ee:{default:ee}}var ce=T.Github=function(Y){var le=Y.width,re=Y.colors,Q=Y.onChange,ge=Y.onSwatchHover,oe=Y.triangle,Te=Y.styles,be=Te===void 0?{}:Te,j=Y.className,ke=j===void 0?"":j,Je=(0,z.default)((0,Z.default)({default:{card:{width:le,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},be),{"hide-triangle":oe==="hide","top-left-triangle":oe==="top-left","top-right-triangle":oe==="top-right","bottom-left-triangle":oe==="bottom-left","bottom-right-triangle":oe==="bottom-right"}),Pe=function(ot,k){return Q({hex:ot,source:"hex"},k)};return C.default.createElement("div",{style:Je.card,className:"github-picker "+ke},C.default.createElement("div",{style:Je.triangleShadow}),C.default.createElement("div",{style:Je.triangle}),(0,q.default)(re,function(Ae){return C.default.createElement(ie.default,{color:Ae,key:Ae,onClick:Pe,onSwatchHover:ge})}))};ce.propTypes={width:P.default.oneOfType([P.default.string,P.default.number]),colors:P.default.arrayOf(P.default.string),triangle:P.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:P.default.object},ce.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},T.default=(0,X.ColorWrap)(ce)},"M5u/":function(fe,T){fe.exports=v;function v(B,C){var _=C[0]-B[0],P=C[1]-B[1];return Math.sqrt(_*_+P*P)}},MF6L:function(fe,T,v){fe.exports=v("u6oY")},MJZm:function(fe,T,v){"use strict";var B=v("fAei"),C=v("rePB"),_=v("U8pU"),P=v("wx14"),N=v("VTBJ"),z=v("q1tI"),R=v.n(z),q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},W=q,Z=v("6VBw"),X=function(sn,kn){return z.createElement(Z.a,Object(N.a)(Object(N.a)({},sn),{},{ref:kn,icon:W}))};X.displayName="HolderOutlined";var ne=z.forwardRef(X),ie=v("TSYQ"),te=v.n(ie),ce=v("H84U"),ee=v("EXcs"),Y=4;function le(Qt){var sn,kn=Qt.dropPosition,Sn=Qt.dropLevelOffset,st=Qt.prefixCls,At=Qt.indent,vt=Qt.direction,_t=vt===void 0?"ltr":vt,Kt=_t==="ltr"?"left":"right",ln=_t==="ltr"?"right":"left",bt=(sn={},Object(C.a)(sn,Kt,-Sn*At+Y),Object(C.a)(sn,ln,0),sn);switch(kn){case-1:bt.top=-3;break;case 1:bt.bottom=-3;break;default:bt.bottom=-3,bt[Kt]=At+Y;break}return R.a.createElement("div",{style:bt,className:"".concat(st,"-drop-indicator")})}var re=v("2jpz"),Q=z.forwardRef(function(Qt,sn){var kn,Sn=z.useContext(ce.b),st=Sn.getPrefixCls,At=Sn.direction,vt=Sn.virtual,_t=Qt.prefixCls,Kt=Qt.className,ln=Qt.showIcon,bt=ln===void 0?!1:ln,A=Qt.showLine,Jn=Qt.switcherIcon,Mn=Qt.blockNode,sr=Mn===void 0?!1:Mn,ir=Qt.children,Ie=Qt.checkable,pe=Ie===void 0?!1:Ie,Qe=Qt.selectable,cn=Qe===void 0?!0:Qe,En=Qt.draggable,lr=Qt.motion,gi=lr===void 0?Object(P.a)(Object(P.a)({},ee.a),{motionAppear:!1}):lr,cr=st("tree",_t),wr=Object(P.a)(Object(P.a)({},Qt),{checkable:pe,selectable:cn,showIcon:bt,motion:gi,blockNode:sr,showLine:Boolean(A),dropIndicatorRender:le}),pr=z.useMemo(function(){if(!En)return!1;var Sr={};switch(Object(_.a)(En)){case"function":Sr.nodeDraggable=En;break;case"object":Sr=Object(P.a)({},En);break;default:break}return Sr.icon!==!1&&(Sr.icon=Sr.icon||z.createElement(ne,null)),Sr},[En]);return z.createElement(B.b,Object(P.a)({itemHeight:20,ref:sn,virtual:vt},wr,{prefixCls:cr,className:te()((kn={},Object(C.a)(kn,"".concat(cr,"-icon-hide"),!bt),Object(C.a)(kn,"".concat(cr,"-block-node"),sr),Object(C.a)(kn,"".concat(cr,"-unselectable"),!cn),Object(C.a)(kn,"".concat(cr,"-rtl"),At==="rtl"),kn),Kt),direction:At,checkable:pe&&z.createElement("span",{className:"".concat(cr,"-checkbox-inner")}),selectable:cn,switcherIcon:function(Qr){return Object(re.a)(cr,Jn,A,Qr)},draggable:pr}),ir)}),ge=Q,oe=v("KQm4"),Te=v("ODXe"),be=v("9jjd"),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},ke=j,Je=function(sn,kn){return z.createElement(Z.a,Object(N.a)(Object(N.a)({},sn),{},{ref:kn,icon:ke}))};Je.displayName="FolderOpenOutlined";var Pe=z.forwardRef(Je),Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},ot=Ae,k=function(sn,kn){return z.createElement(Z.a,Object(N.a)(Object(N.a)({},sn),{},{ref:kn,icon:ot}))};k.displayName="FolderOutlined";var Xe=z.forwardRef(k),Ot=v("OZM5"),lt=v("815F"),Ut;(function(Qt){Qt[Qt.None=0]="None",Qt[Qt.Start=1]="Start",Qt[Qt.End=2]="End"})(Ut||(Ut={}));function Jt(Qt,sn){function kn(Sn){var st=Sn.key,At=Sn.children;sn(st,Sn)!==!1&&Jt(At||[],sn)}Qt.forEach(kn)}function nt(Qt){var sn=Qt.treeData,kn=Qt.expandedKeys,Sn=Qt.startKey,st=Qt.endKey,At=[],vt=Ut.None;if(Sn&&Sn===st)return[Sn];if(!Sn||!st)return[];function _t(Kt){return Kt===Sn||Kt===st}return Jt(sn,function(Kt){if(vt===Ut.End)return!1;if(_t(Kt)){if(At.push(Kt),vt===Ut.None)vt=Ut.Start;else if(vt===Ut.Start)return vt=Ut.End,!1}else vt===Ut.Start&&At.push(Kt);return kn.includes(Kt)}),At}function $t(Qt,sn){var kn=Object(oe.a)(sn),Sn=[];return Jt(Qt,function(st,At){var vt=kn.indexOf(st);return vt!==-1&&(Sn.push(At),kn.splice(vt,1)),!!kn.length}),Sn}var ze=function(Qt,sn){var kn={};for(var Sn in Qt)Object.prototype.hasOwnProperty.call(Qt,Sn)&&sn.indexOf(Sn)<0&&(kn[Sn]=Qt[Sn]);if(Qt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var st=0,Sn=Object.getOwnPropertySymbols(Qt);st<Sn.length;st++)sn.indexOf(Sn[st])<0&&Object.prototype.propertyIsEnumerable.call(Qt,Sn[st])&&(kn[Sn[st]]=Qt[Sn[st]]);return kn};function ue(Qt){var sn=Qt.isLeaf,kn=Qt.expanded;return sn?z.createElement(be.a,null):kn?z.createElement(Pe,null):z.createElement(Xe,null)}function an(Qt){var sn=Qt.treeData,kn=Qt.children;return sn||Object(lt.c)(kn)}var nn=function(sn,kn){var Sn=sn.defaultExpandAll,st=sn.defaultExpandParent,At=sn.defaultExpandedKeys,vt=ze(sn,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),_t=z.useRef(),Kt=z.useRef(),ln=function(){var Ka=Object(lt.a)(an(vt)),Ya=Ka.keyEntities,Fi;return Sn?Fi=Object.keys(Ya):st?Fi=Object(Ot.e)(vt.expandedKeys||At||[],Ya):Fi=vt.expandedKeys||At,Fi},bt=z.useState(vt.selectedKeys||vt.defaultSelectedKeys||[]),A=Object(Te.a)(bt,2),Jn=A[0],Mn=A[1],sr=z.useState(function(){return ln()}),ir=Object(Te.a)(sr,2),Ie=ir[0],pe=ir[1];z.useEffect(function(){"selectedKeys"in vt&&Mn(vt.selectedKeys)},[vt.selectedKeys]),z.useEffect(function(){"expandedKeys"in vt&&pe(vt.expandedKeys)},[vt.expandedKeys]);var Qe=function(Ka,Ya){var Fi;return"expandedKeys"in vt||pe(Ka),(Fi=vt.onExpand)===null||Fi===void 0?void 0:Fi.call(vt,Ka,Ya)},cn=function(Ka,Ya){var Fi,_a=vt.multiple,Pa=Ya.node,Ti=Ya.nativeEvent,nu=Pa.key,Ko=nu===void 0?"":nu,Yr=an(vt),ba=Object(P.a)(Object(P.a)({},Ya),{selected:!0}),gs=(Ti==null?void 0:Ti.ctrlKey)||(Ti==null?void 0:Ti.metaKey),ra=Ti==null?void 0:Ti.shiftKey,$a;_a&&gs?($a=Ka,_t.current=Ko,Kt.current=$a,ba.selectedNodes=$t(Yr,$a)):_a&&ra?($a=Array.from(new Set([].concat(Object(oe.a)(Kt.current||[]),Object(oe.a)(nt({treeData:Yr,expandedKeys:Ie,startKey:Ko,endKey:_t.current}))))),ba.selectedNodes=$t(Yr,$a)):($a=[Ko],_t.current=Ko,Kt.current=$a,ba.selectedNodes=$t(Yr,$a)),(Fi=vt.onSelect)===null||Fi===void 0||Fi.call(vt,$a,ba),"selectedKeys"in vt||Mn($a)},En=z.useContext(ce.b),lr=En.getPrefixCls,gi=En.direction,cr=vt.prefixCls,wr=vt.className,pr=vt.showIcon,Sr=pr===void 0?!0:pr,Qr=vt.expandAction,ya=Qr===void 0?"click":Qr,Ki=ze(vt,["prefixCls","className","showIcon","expandAction"]),vs=lr("tree",cr),tu=te()("".concat(vs,"-directory"),Object(C.a)({},"".concat(vs,"-directory-rtl"),gi==="rtl"),wr);return z.createElement(ge,Object(P.a)({icon:ue,ref:kn,blockNode:!0},Ki,{showIcon:Sr,expandAction:ya,prefixCls:vs,className:tu,expandedKeys:Ie,selectedKeys:Jn,onSelect:cn,onExpand:Qe}))},Qn=z.forwardRef(nn),Pt=Qn,Tn=ge;Tn.DirectoryTree=Pt,Tn.TreeNode=B.a;var rr=T.a=Tn},MON2:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.STACK_OVERFLOW=T.CIRCULAR_DEPENDENCY_IN_FACTORY=T.POST_CONSTRUCT_ERROR=T.MULTIPLE_POST_CONSTRUCT_METHODS=T.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=T.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=T.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=T.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=T.ARGUMENTS_LENGTH_MISMATCH=T.INVALID_DECORATOR_OPERATION=T.INVALID_TO_SELF_VALUE=T.INVALID_FUNCTION_BINDING=T.INVALID_MIDDLEWARE_RETURN=T.NO_MORE_SNAPSHOTS_AVAILABLE=T.INVALID_BINDING_TYPE=T.NOT_IMPLEMENTED=T.CIRCULAR_DEPENDENCY=T.UNDEFINED_INJECT_ANNOTATION=T.MISSING_INJECT_ANNOTATION=T.MISSING_INJECTABLE_ANNOTATION=T.NOT_REGISTERED=T.CANNOT_UNBIND=T.AMBIGUOUS_MATCH=T.KEY_NOT_FOUND=T.NULL_ARGUMENT=T.DUPLICATED_METADATA=T.DUPLICATED_INJECTABLE_DECORATOR=void 0,T.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",T.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",T.NULL_ARGUMENT="NULL argument",T.KEY_NOT_FOUND="Key Not Found",T.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",T.CANNOT_UNBIND="Could not unbind serviceIdentifier:",T.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",T.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",T.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var B=function(z){return"@inject called with undefined this could mean that the class "+z+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};T.UNDEFINED_INJECT_ANNOTATION=B,T.CIRCULAR_DEPENDENCY="Circular dependency found:",T.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",T.INVALID_BINDING_TYPE="Invalid binding type:",T.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",T.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",T.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",T.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",T.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var C=function(){for(var z=[],R=0;R<arguments.length;R++)z[R]=arguments[R];return"The number of constructor arguments in the derived class "+(z[0]+" must be >= than the number of constructor arguments of its base class.")};T.ARGUMENTS_LENGTH_MISMATCH=C,T.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",T.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",T.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",T.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",T.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var _=function(){for(var z=[],R=0;R<arguments.length;R++)z[R]=arguments[R];return"@postConstruct error in class "+z[0]+": "+z[1]};T.POST_CONSTRUCT_ERROR=_;var P=function(){for(var z=[],R=0;R<arguments.length;R++)z[R]=arguments[R];return"It looks like there is a circular dependency "+("in one of the '"+z[0]+"' bindings. Please investigate bindings with")+("service identifier '"+z[1]+"'.")};T.CIRCULAR_DEPENDENCY_IN_FACTORY=P,T.STACK_OVERFLOW="Maximum call stack size exceeded"},"Mn/Q":function(fe,T,v){"use strict";v.d(T,"a",function(){return Z});var B=v("lwsE"),C=v.n(B),_=v("W8MJ"),P=v.n(_),N=v("4cb6"),z=v.n(N),R,q,W,Z=(R=Object(N.injectable)(),R(q=(W=function(){function X(){C()(this,X),this.config=void 0}return P()(X,[{key:"get",value:function(){return this.config}},{key:"set",value:function(ie){this.config=ie}}]),X}(),W))||q)},My4P:function(fe,T){fe.exports=v;function v(B,C,_){return B[0]=C[0]*_,B[1]=C[1]*_,B}},N2HP:function(fe,T){fe.exports=v;function v(B,C,_){var P=C[0]*_[1]-C[1]*_[0];return B[0]=B[1]=0,B[2]=P,B}},NEPx:function(fe,T){fe.exports=1e-6},NSvM:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ChromePointer=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.ChromePointer=function(){var q=(0,P.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return C.default.createElement("div",{style:q.picker})};T.default=z},NirO:function(fe,T){},Nq3d:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Checkboard=void 0;var B=v("q1tI"),C=q(B),_=v("/FUP"),P=q(_),N=v("Lwbf"),z=R(N);function R(Z){if(Z&&Z.__esModule)return Z;var X={};if(Z!=null)for(var ne in Z)Object.prototype.hasOwnProperty.call(Z,ne)&&(X[ne]=Z[ne]);return X.default=Z,X}function q(Z){return Z&&Z.__esModule?Z:{default:Z}}var W=T.Checkboard=function(X){var ne=X.white,ie=X.grey,te=X.size,ce=X.renderers,ee=X.borderRadius,Y=X.boxShadow,le=(0,P.default)({default:{grid:{borderRadius:ee,boxShadow:Y,absolute:"0px 0px 0px 0px",background:"url("+z.get(ne,ie,te,ce.canvas)+") center left"}}});return C.default.createElement("div",{style:le.grid})};W.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},T.default=W},Nsbk:function(fe,T){function v(B){return fe.exports=v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(_){return _.__proto__||Object.getPrototypeOf(_)},fe.exports.__esModule=!0,fe.exports.default=fe.exports,v(B)}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},OYk8:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SliderSwatches=void 0;var B=v("q1tI"),C=R(B),_=v("/FUP"),P=R(_),N=v("PGcv"),z=R(N);function R(W){return W&&W.__esModule?W:{default:W}}var q=T.SliderSwatches=function(Z){var X=Z.onClick,ne=Z.hsl,ie=(0,P.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),te=.1;return C.default.createElement("div",{style:ie.swatches},C.default.createElement("div",{style:ie.swatch},C.default.createElement(z.default,{hsl:ne,offset:".80",active:Math.abs(ne.l-.8)<te&&Math.abs(ne.s-.5)<te,onClick:X,first:!0})),C.default.createElement("div",{style:ie.swatch},C.default.createElement(z.default,{hsl:ne,offset:".65",active:Math.abs(ne.l-.65)<te&&Math.abs(ne.s-.5)<te,onClick:X})),C.default.createElement("div",{style:ie.swatch},C.default.createElement(z.default,{hsl:ne,offset:".50",active:Math.abs(ne.l-.5)<te&&Math.abs(ne.s-.5)<te,onClick:X})),C.default.createElement("div",{style:ie.swatch},C.default.createElement(z.default,{hsl:ne,offset:".35",active:Math.abs(ne.l-.35)<te&&Math.abs(ne.s-.5)<te,onClick:X})),C.default.createElement("div",{style:ie.swatch},C.default.createElement(z.default,{hsl:ne,offset:".20",active:Math.abs(ne.l-.2)<te&&Math.abs(ne.s-.5)<te,onClick:X,last:!0})),C.default.createElement("div",{style:ie.clear}))};T.default=q},Oboc:function(fe,T){},Ojt5:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Raised=void 0;var B=v("q1tI"),C=W(B),_=v("17x9"),P=W(_),N=v("/FUP"),z=W(N),R=v("QkVN"),q=W(R);function W(X){return X&&X.__esModule?X:{default:X}}var Z=T.Raised=function(ne){var ie=ne.zDepth,te=ne.radius,ce=ne.background,ee=ne.children,Y=ne.styles,le=Y===void 0?{}:Y,re=(0,z.default)((0,q.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+ie+"px "+ie*4+"px rgba(0,0,0,.24)",borderRadius:te,background:ce}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},le),{"zDepth-1":ie===1});return C.default.createElement("div",{style:re.wrap},C.default.createElement("div",{style:re.bg}),C.default.createElement("div",{style:re.content},ee))};Z.propTypes={background:P.default.string,zDepth:P.default.oneOf([0,1,2,3,4,5]),radius:P.default.number,styles:P.default.object},Z.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},T.default=Z},OqSR:function(fe,T,v){"use strict";v.d(T,"a",function(){return Kt});var B=v("mNvP"),C=v("4cb6"),_=v("APxj"),P=v.n(_),N=v("oDt1"),z=v("yG8O"),R=v.n(z),q=v("lwsE"),W=v.n(q),Z=v("W8MJ"),X=v.n(Z),ne=v("U+yc"),ie=v.n(ne),te=v("1ABj"),ce=v("+uE7"),ee=v("k6w6"),Y,le,re,Q,ge,oe,Te=(Y=Object(C.injectable)(),le=Object(C.inject)(ce.a.RenderEngine),Y(re=(Q=(oe=function(){function ln(){W()(this,ln),R()(this,"engine",ge,this),this.resourcePool={}}return X()(ln,[{key:"getOrCreateResource",value:function(A){if(!this.resourcePool[A.name]){var Jn=A.descriptor,Mn=Jn.width,sr=Jn.height,ir=Jn.usage;this.resourcePool[A.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:Mn,height:sr,wrapS:ee.a.CLAMP_TO_EDGE,wrapT:ee.a.CLAMP_TO_EDGE,usage:ir})})}return this.resourcePool[A.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),ln}(),oe),ge=ie()(Q.prototype,"engine",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Q))||re),be=v("z5Mu"),j=v("0arJ"),ke=v("4dNS"),Je=v("ph3A"),Pe=v("RlxE"),Ae=v("baXp"),ot=v("6B+r"),k=v("kfnj"),Xe=v("g1CP"),Ot=v("FlHB"),lt=v("94HZ"),Ut=v("tyuB"),Jt=v("IQ25"),nt=v("7W2i"),$t=v.n(nt),ze=v("a1gu"),ue=v.n(ze),an=v("Nsbk"),nn=v.n(an);function Qn(ln){var bt=Pt();return function(){var Jn=nn()(ln),Mn;if(bt){var sr=nn()(this).constructor;Mn=Reflect.construct(Jn,arguments,sr)}else Mn=Jn.apply(this,arguments);return ue()(this,Mn)}}function Pt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ln){return!1}}var Tn=function(ln){$t()(A,ln);var bt=Qn(A);function A(Jn){var Mn;return W()(this,A),Mn=bt.call(this,Jn),Mn.name=void 0,Mn.name=Jn.name||"",Mn}return A}(N.a),rr=v("BFph"),Qt=v("Gc+X"),sn=v("Mn/Q"),kn=v("LGRX"),Sn=v("yZ5d"),st=new C.Container,At=P()(st,!1),vt=function(bt){var A=At.lazyInject(bt);return function(Jn,Mn,sr){A.call(this,Jn,Mn),sr&&(sr.initializer=function(){return Jn[Mn]})}},_t=function(bt){var A=At.lazyMultiInject(bt);return function(Jn,Mn,sr){A.call(this,Jn,Mn),sr&&(sr.initializer=function(){return Jn[Mn]})}};st.bind(ce.a.ShaderModuleService).to(Sn.a).inSingletonScope(),st.bind(ce.a.NameComponentManager).toConstantValue(new N.b(Tn)),st.bind(ce.a.HierarchyComponentManager).toConstantValue(new N.b(Jt.a)),st.bind(ce.a.TransformComponentManager).toConstantValue(new N.b(Qt.a)),st.bind(ce.a.MeshComponentManager).toConstantValue(new N.b(ot.a)),st.bind(ce.a.CullableComponentManager).toConstantValue(new N.b(Ae.a)),st.bind(ce.a.GeometryComponentManager).toConstantValue(new N.b(j.a)),st.bind(ce.a.MaterialComponentManager).toConstantValue(new N.b(Je.a));function Kt(){var ln=new C.Container;return ln.parent=st,ln.bind(ce.a.Systems).to(rr.a).inSingletonScope().whenTargetNamed(ce.a.SceneGraphSystem),ln.bind(ce.a.Systems).to(be.a).inSingletonScope().whenTargetNamed(ce.a.FrameGraphSystem),ln.bind(ce.a.Systems).to(k.a).inSingletonScope().whenTargetNamed(ce.a.MeshSystem),ln.bind(ce.a.Systems).to(ke.a).inSingletonScope().whenTargetNamed(ce.a.GeometrySystem),ln.bind(ce.a.Systems).to(Pe.a).inSingletonScope().whenTargetNamed(ce.a.MaterialSystem),ln.bind(ce.a.Systems).to(Ut.a).inSingletonScope().whenTargetNamed(ce.a.RendererSystem),ln.bind(ce.a.ResourcePool).to(Te).inSingletonScope(),ln.bind(ce.a.ConfigService).to(sn.a).inSingletonScope(),ln.bind(ce.a.InteractorService).to(kn.a).inSingletonScope(),ln.bind(ce.a.RenderPass).to(lt.a).inSingletonScope().whenTargetNamed(lt.a.IDENTIFIER),ln.bind(ce.a.RenderPass).to(Xe.a).inSingletonScope().whenTargetNamed(Xe.a.IDENTIFIER),ln.bind(ce.a.RenderPass).to(Ot.a).inSingletonScope().whenTargetNamed(Ot.a.IDENTIFIER),ln.bind(ce.a.RenderPassFactory).toFactory(function(bt){return function(A){return bt.container.getNamed(ce.a.RenderPass,A)}}),ln}},"P81+":function(fe,T,v){var B=v("ZtHU");fe.exports={Graph:B.Graph,json:v("PZtI"),alg:v("kVhV"),version:B.version}},PGcv:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SliderSwatch=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.SliderSwatch=function(q){var W=q.hsl,Z=q.offset,X=q.onClick,ne=X===void 0?function(){}:X,ie=q.active,te=q.first,ce=q.last,ee=(0,P.default)({default:{swatch:{height:"12px",background:"hsl("+W.h+", 50%, "+Z*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:ie,first:te,last:ce}),Y=function(re){return ne({h:W.h,s:.5,l:Z,source:"hsl"},re)};return C.default.createElement("div",{style:ee.swatch,onClick:Y})};T.default=z},PJYZ:function(fe,T){function v(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},PMMO:function(fe,T){fe.exports=v;function v(B,C){return B[0]=C[0],B[1]=C[1],B}},PZtI:function(fe,T,v){var B=v("3z9K"),C=v("QJPA");fe.exports={write:_,read:z};function _(R){var q={options:{directed:R.isDirected(),multigraph:R.isMultigraph(),compound:R.isCompound()},nodes:P(R),edges:N(R)};return B.isUndefined(R.graph())||(q.value=B.clone(R.graph())),q}function P(R){return B.map(R.nodes(),function(q){var W=R.node(q),Z=R.parent(q),X={v:q};return B.isUndefined(W)||(X.value=W),B.isUndefined(Z)||(X.parent=Z),X})}function N(R){return B.map(R.edges(),function(q){var W=R.edge(q),Z={v:q.v,w:q.w};return B.isUndefined(q.name)||(Z.name=q.name),B.isUndefined(W)||(Z.value=W),Z})}function z(R){var q=new C(R.options).setGraph(R.value);return B.each(R.nodes,function(W){q.setNode(W.v,W.value),W.parent&&q.setParent(W.v,W.parent)}),B.each(R.edges,function(W){q.setEdge({v:W.v,w:W.w,name:W.name},W.value)}),q}},PnFB:function(fe,T,v){var B=v("3z9K");fe.exports=C;function C(P,N,z){B.isArray(N)||(N=[N]);var R=(P.isDirected()?P.successors:P.neighbors).bind(P),q=[],W={};return B.each(N,function(Z){if(!P.hasNode(Z))throw new Error("Graph does not have node: "+Z);_(P,Z,z==="post",W,R,q)}),q}function _(P,N,z,R,q,W){B.has(R,N)||(R[N]=!0,z||W.push(N),B.each(q(N),function(Z){_(P,Z,z,R,q,W)}),z&&W.push(N))}},Pzom:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Slider=void 0;var B=v("q1tI"),C=te(B),_=v("17x9"),P=te(_),N=v("/FUP"),z=te(N),R=v("QkVN"),q=te(R),W=v("TM95"),Z=v("OYk8"),X=te(Z),ne=v("dATH"),ie=te(ne);function te(ee){return ee&&ee.__esModule?ee:{default:ee}}var ce=T.Slider=function(Y){var le=Y.hsl,re=Y.onChange,Q=Y.pointer,ge=Y.styles,oe=ge===void 0?{}:ge,Te=Y.className,be=Te===void 0?"":Te,j=(0,z.default)((0,q.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},oe));return C.default.createElement("div",{style:j.wrap||{},className:"slider-picker "+be},C.default.createElement("div",{style:j.hue},C.default.createElement(W.Hue,{style:j.Hue,hsl:le,pointer:Q,onChange:re})),C.default.createElement("div",{style:j.swatches},C.default.createElement(X.default,{hsl:le,onClick:re})))};ce.propTypes={styles:P.default.object},ce.defaultProps={pointer:ie.default,styles:{}},T.default=(0,W.ColorWrap)(ce)},QJPA:function(fe,T,v){"use strict";var B=v("3z9K");fe.exports=N;var C="\0",_="\0",P="";function N(X){this._isDirected=B.has(X,"directed")?X.directed:!0,this._isMultigraph=B.has(X,"multigraph")?X.multigraph:!1,this._isCompound=B.has(X,"compound")?X.compound:!1,this._label=void 0,this._defaultNodeLabelFn=B.constant(void 0),this._defaultEdgeLabelFn=B.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[_]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}N.prototype._nodeCount=0,N.prototype._edgeCount=0,N.prototype.isDirected=function(){return this._isDirected},N.prototype.isMultigraph=function(){return this._isMultigraph},N.prototype.isCompound=function(){return this._isCompound},N.prototype.setGraph=function(X){return this._label=X,this},N.prototype.graph=function(){return this._label},N.prototype.setDefaultNodeLabel=function(X){return B.isFunction(X)||(X=B.constant(X)),this._defaultNodeLabelFn=X,this},N.prototype.nodeCount=function(){return this._nodeCount},N.prototype.nodes=function(){return B.keys(this._nodes)},N.prototype.sources=function(){return B.filter(this.nodes(),B.bind(function(X){return B.isEmpty(this._in[X])},this))},N.prototype.sinks=function(){return B.filter(this.nodes(),B.bind(function(X){return B.isEmpty(this._out[X])},this))},N.prototype.setNodes=function(X,ne){var ie=arguments;return B.each(X,B.bind(function(te){ie.length>1?this.setNode(te,ne):this.setNode(te)},this)),this},N.prototype.setNode=function(X,ne){return B.has(this._nodes,X)?(arguments.length>1&&(this._nodes[X]=ne),this):(this._nodes[X]=arguments.length>1?ne:this._defaultNodeLabelFn(X),this._isCompound&&(this._parent[X]=_,this._children[X]={},this._children[_][X]=!0),this._in[X]={},this._preds[X]={},this._out[X]={},this._sucs[X]={},++this._nodeCount,this)},N.prototype.node=function(X){return this._nodes[X]},N.prototype.hasNode=function(X){return B.has(this._nodes,X)},N.prototype.removeNode=function(X){var ne=this;if(B.has(this._nodes,X)){var ie=function(ce){ne.removeEdge(ne._edgeObjs[ce])};delete this._nodes[X],this._isCompound&&(this._removeFromParentsChildList(X),delete this._parent[X],B.each(this.children(X),B.bind(function(te){this.setParent(te)},this)),delete this._children[X]),B.each(B.keys(this._in[X]),ie),delete this._in[X],delete this._preds[X],B.each(B.keys(this._out[X]),ie),delete this._out[X],delete this._sucs[X],--this._nodeCount}return this},N.prototype.setParent=function(X,ne){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(B.isUndefined(ne))ne=_;else{ne+="";for(var ie=ne;!B.isUndefined(ie);ie=this.parent(ie))if(ie===X)throw new Error("Setting "+ne+" as parent of "+X+" would create create a cycle");this.setNode(ne)}return this.setNode(X),this._removeFromParentsChildList(X),this._parent[X]=ne,this._children[ne][X]=!0,this},N.prototype._removeFromParentsChildList=function(X){delete this._children[this._parent[X]][X]},N.prototype.parent=function(X){if(this._isCompound){var ne=this._parent[X];if(ne!==_)return ne}},N.prototype.children=function(X){if(B.isUndefined(X)&&(X=_),this._isCompound){var ne=this._children[X];if(ne)return B.keys(ne)}else{if(X===_)return this.nodes();if(this.hasNode(X))return[]}},N.prototype.predecessors=function(X){var ne=this._preds[X];if(ne)return B.keys(ne)},N.prototype.successors=function(X){var ne=this._sucs[X];if(ne)return B.keys(ne)},N.prototype.neighbors=function(X){var ne=this.predecessors(X);if(ne)return B.union(ne,this.successors(X))},N.prototype.isLeaf=function(X){var ne;return this.isDirected()?ne=this.successors(X):ne=this.neighbors(X),ne.length===0},N.prototype.filterNodes=function(X){var ne=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});ne.setGraph(this.graph()),B.each(this._nodes,B.bind(function(ee,Y){X(Y)&&ne.setNode(Y,ee)},this)),B.each(this._edgeObjs,B.bind(function(ee){ne.hasNode(ee.v)&&ne.hasNode(ee.w)&&ne.setEdge(ee,this.edge(ee))},this));var ie=this,te={};function ce(ee){var Y=ie.parent(ee);return Y===void 0||ne.hasNode(Y)?(te[ee]=Y,Y):Y in te?te[Y]:ce(Y)}return this._isCompound&&B.each(ne.nodes(),function(ee){ne.setParent(ee,ce(ee))}),ne},N.prototype.setDefaultEdgeLabel=function(X){return B.isFunction(X)||(X=B.constant(X)),this._defaultEdgeLabelFn=X,this},N.prototype.edgeCount=function(){return this._edgeCount},N.prototype.edges=function(){return B.values(this._edgeObjs)},N.prototype.setPath=function(X,ne){var ie=this,te=arguments;return B.reduce(X,function(ce,ee){return te.length>1?ie.setEdge(ce,ee,ne):ie.setEdge(ce,ee),ee}),this},N.prototype.setEdge=function(){var X,ne,ie,te,ce=!1,ee=arguments[0];typeof ee=="object"&&ee!==null&&"v"in ee?(X=ee.v,ne=ee.w,ie=ee.name,arguments.length===2&&(te=arguments[1],ce=!0)):(X=ee,ne=arguments[1],ie=arguments[3],arguments.length>2&&(te=arguments[2],ce=!0)),X=""+X,ne=""+ne,B.isUndefined(ie)||(ie=""+ie);var Y=q(this._isDirected,X,ne,ie);if(B.has(this._edgeLabels,Y))return ce&&(this._edgeLabels[Y]=te),this;if(!B.isUndefined(ie)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(X),this.setNode(ne),this._edgeLabels[Y]=ce?te:this._defaultEdgeLabelFn(X,ne,ie);var le=W(this._isDirected,X,ne,ie);return X=le.v,ne=le.w,Object.freeze(le),this._edgeObjs[Y]=le,z(this._preds[ne],X),z(this._sucs[X],ne),this._in[ne][Y]=le,this._out[X][Y]=le,this._edgeCount++,this},N.prototype.edge=function(X,ne,ie){var te=arguments.length===1?Z(this._isDirected,arguments[0]):q(this._isDirected,X,ne,ie);return this._edgeLabels[te]},N.prototype.hasEdge=function(X,ne,ie){var te=arguments.length===1?Z(this._isDirected,arguments[0]):q(this._isDirected,X,ne,ie);return B.has(this._edgeLabels,te)},N.prototype.removeEdge=function(X,ne,ie){var te=arguments.length===1?Z(this._isDirected,arguments[0]):q(this._isDirected,X,ne,ie),ce=this._edgeObjs[te];return ce&&(X=ce.v,ne=ce.w,delete this._edgeLabels[te],delete this._edgeObjs[te],R(this._preds[ne],X),R(this._sucs[X],ne),delete this._in[ne][te],delete this._out[X][te],this._edgeCount--),this},N.prototype.inEdges=function(X,ne){var ie=this._in[X];if(ie){var te=B.values(ie);return ne?B.filter(te,function(ce){return ce.v===ne}):te}},N.prototype.outEdges=function(X,ne){var ie=this._out[X];if(ie){var te=B.values(ie);return ne?B.filter(te,function(ce){return ce.w===ne}):te}},N.prototype.nodeEdges=function(X,ne){var ie=this.inEdges(X,ne);if(ie)return ie.concat(this.outEdges(X,ne))};function z(X,ne){X[ne]?X[ne]++:X[ne]=1}function R(X,ne){--X[ne]||delete X[ne]}function q(X,ne,ie,te){var ce=""+ne,ee=""+ie;if(!X&&ce>ee){var Y=ce;ce=ee,ee=Y}return ce+P+ee+P+(B.isUndefined(te)?C:te)}function W(X,ne,ie,te){var ce=""+ne,ee=""+ie;if(!X&&ce>ee){var Y=ce;ce=ee,ee=Y}var le={v:ce,w:ee};return te&&(le.name=te),le}function Z(X,ne){return q(X,ne.v,ne.w,ne.name)}},QOyy:function(fe,T){fe.exports=v;function v(B,C){return B[0]=1/C[0],B[1]=1/C[1],B}},"R/W3":function(fe,T,v){var B=v("KwMD"),C=v("2ajD"),_=v("CZoQ");function P(N,z,R){return z===z?_(N,z,R):B(N,C,R)}fe.exports=P},RIqP:function(fe,T,v){var B=v("Ijbi"),C=v("EbDI"),_=v("ZhPi"),P=v("Bnag");function N(z){return B(z)||C(z)||_(z)||P()}fe.exports=N,fe.exports.__esModule=!0,fe.exports.default=fe.exports},"RR/i":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.typeConstraint=T.namedConstraint=T.taggedConstraint=T.traverseAncerstors=void 0;var B=v("xfSm"),C=v("GXnB"),_=function R(q,W){var Z=q.parentRequest;return Z!==null?W(Z)?!0:R(Z,W):!1};T.traverseAncerstors=_;var P=function(q){return function(W){var Z=function(ne){return ne!==null&&ne.target!==null&&ne.target.matchesTag(q)(W)};return Z.metaData=new C.Metadata(q,W),Z}};T.taggedConstraint=P;var N=P(B.NAMED_TAG);T.namedConstraint=N;var z=function(q){return function(W){var Z=null;if(W!==null)if(Z=W.bindings[0],typeof q=="string"){var X=Z.serviceIdentifier;return X===q}else{var ne=W.bindings[0].implementationType;return q===ne}return!1}};T.typeConstraint=z},RRY9:function(fe,T){fe.exports=v;function v(B,C){return B[0]===C[0]&&B[1]===C[1]}},Rkpk:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ChromeFields=void 0;var B=function(){function ee(Y,le){for(var re=0;re<le.length;re++){var Q=le[re];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(Y,Q.key,Q)}}return function(Y,le,re){return le&&ee(Y.prototype,le),re&&ee(Y,re),Y}}(),C=v("q1tI"),_=X(C),P=v("/FUP"),N=X(P),z=v("p8yl"),R=X(z),q=v("TM95"),W=v("9F0J"),Z=X(W);function X(ee){return ee&&ee.__esModule?ee:{default:ee}}function ne(ee,Y){if(!(ee instanceof Y))throw new TypeError("Cannot call a class as a function")}function ie(ee,Y){if(!ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:ee}function te(ee,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);ee.prototype=Object.create(Y&&Y.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(ee,Y):ee.__proto__=Y)}var ce=T.ChromeFields=function(ee){te(Y,ee);function Y(){var le,re,Q,ge;ne(this,Y);for(var oe=arguments.length,Te=Array(oe),be=0;be<oe;be++)Te[be]=arguments[be];return ge=(re=(Q=ie(this,(le=Y.__proto__||Object.getPrototypeOf(Y)).call.apply(le,[this].concat(Te))),Q),Q.state={view:""},Q.toggleViews=function(){Q.state.view==="hex"?Q.setState({view:"rgb"}):Q.state.view==="rgb"?Q.setState({view:"hsl"}):Q.state.view==="hsl"&&(Q.props.hsl.a===1?Q.setState({view:"hex"}):Q.setState({view:"rgb"}))},Q.handleChange=function(j,ke){j.hex?R.default.isValidHex(j.hex)&&Q.props.onChange({hex:j.hex,source:"hex"},ke):j.r||j.g||j.b?Q.props.onChange({r:j.r||Q.props.rgb.r,g:j.g||Q.props.rgb.g,b:j.b||Q.props.rgb.b,source:"rgb"},ke):j.a?(j.a<0?j.a=0:j.a>1&&(j.a=1),Q.props.onChange({h:Q.props.hsl.h,s:Q.props.hsl.s,l:Q.props.hsl.l,a:Math.round(j.a*100)/100,source:"rgb"},ke)):(j.h||j.s||j.l)&&(typeof j.s=="string"&&j.s.includes("%")&&(j.s=j.s.replace("%","")),typeof j.l=="string"&&j.l.includes("%")&&(j.l=j.l.replace("%","")),Q.props.onChange({h:j.h||Q.props.hsl.h,s:Number(j.s&&j.s||Q.props.hsl.s),l:Number(j.l&&j.l||Q.props.hsl.l),source:"hsl"},ke))},Q.showHighlight=function(j){j.currentTarget.style.background="#eee"},Q.hideHighlight=function(j){j.currentTarget.style.background="transparent"},re),ie(Q,ge)}return B(Y,[{key:"componentDidMount",value:function(){this.props.hsl.a===1&&this.state.view!=="hex"?this.setState({view:"hex"}):this.state.view!=="rgb"&&this.state.view!=="hsl"&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(re){re.hsl.a!==1&&this.state.view==="hex"&&this.setState({view:"rgb"})}},{key:"render",value:function(){var re=this,Q=(0,N.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),ge=void 0;return this.state.view==="hex"?ge=_.default.createElement("div",{style:Q.fields,className:"flexbox-fix"},_.default.createElement("div",{style:Q.field},_.default.createElement(q.EditableInput,{style:{input:Q.input,label:Q.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?ge=_.default.createElement("div",{style:Q.fields,className:"flexbox-fix"},_.default.createElement("div",{style:Q.field},_.default.createElement(q.EditableInput,{style:{input:Q.input,label:Q.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),_.default.createElement("div",{style:Q.field},_.default.createElement(q.EditableInput,{style:{input:Q.input,label:Q.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),_.default.createElement("div",{style:Q.field},_.default.createElement(q.EditableInput,{style:{input:Q.input,label:Q.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),_.default.createElement("div",{style:Q.alpha},_.default.createElement(q.EditableInput,{style:{input:Q.input,label:Q.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(ge=_.default.createElement("div",{style:Q.fields,className:"flexbox-fix"},_.default.createElement("div",{style:Q.field},_.default.createElement(q.EditableInput,{style:{input:Q.input,label:Q.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),_.default.createElement("div",{style:Q.field},_.default.createElement(q.EditableInput,{style:{input:Q.input,label:Q.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),_.default.createElement("div",{style:Q.field},_.default.createElement(q.EditableInput,{style:{input:Q.input,label:Q.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),_.default.createElement("div",{style:Q.alpha},_.default.createElement(q.EditableInput,{style:{input:Q.input,label:Q.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),_.default.createElement("div",{style:Q.wrap,className:"flexbox-fix"},ge,_.default.createElement("div",{style:Q.toggle},_.default.createElement("div",{style:Q.icon,onClick:this.toggleViews,ref:function(Te){return re.icon=Te}},_.default.createElement(Z.default,{style:Q.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}]),Y}(_.default.Component);T.default=ce},RlxE:function(fe,T,v){"use strict";v.d(T,"a",function(){return Ot});var B=v("lSNA"),C=v.n(B),_=v("o0o1"),P=v.n(_),N=v("yXPU"),z=v.n(N),R=v("yG8O"),q=v.n(R),W=v("lwsE"),Z=v.n(W),X=v("W8MJ"),ne=v.n(X),ie=v("U+yc"),te=v.n(ie),ce=v("1ABj"),ee=v.n(ce),Y=v("4cb6"),le=v.n(Y),re=v("Gj0h"),Q=v("+uE7"),ge,oe,Te,be,j,ke,Je,Pe,Ae,ot;function k(lt,Ut){var Jt=Object.keys(lt);if(Object.getOwnPropertySymbols){var nt=Object.getOwnPropertySymbols(lt);Ut&&(nt=nt.filter(function($t){return Object.getOwnPropertyDescriptor(lt,$t).enumerable})),Jt.push.apply(Jt,nt)}return Jt}function Xe(lt){for(var Ut=1;Ut<arguments.length;Ut++){var Jt=arguments[Ut]!=null?arguments[Ut]:{};Ut%2?k(Object(Jt),!0).forEach(function(nt){C()(lt,nt,Jt[nt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(lt,Object.getOwnPropertyDescriptors(Jt)):k(Object(Jt)).forEach(function(nt){Object.defineProperty(lt,nt,Object.getOwnPropertyDescriptor(Jt,nt))})}return lt}var Ot=(ge=Object(Y.injectable)(),oe=Object(Y.inject)(Q.a.MaterialComponentManager),Te=Object(Y.inject)(Q.a.RenderEngine),be=Object(Y.inject)(Q.a.ShaderModuleService),ge(j=(ke=(ot=function(){function lt(){Z()(this,lt),q()(this,"material",Je,this),q()(this,"engine",Pe,this),q()(this,"shaderModule",Ae,this)}return ne()(lt,[{key:"execute",value:function(){var Ut=z()(P.a.mark(function nt(){return P.a.wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:case"end":return ze.stop()}},nt)}));function Jt(){return Ut.apply(this,arguments)}return Jt}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(Jt){var nt=Object(re.createEntity)(),$t=Jt.vertexShader,ze=Jt.fragmentShader,ue=[];if(!this.engine.supportWebGPU){var an="material-".concat(nt);this.shaderModule.registerModule(an,{vs:Jt.vertexShader,fs:Jt.fragmentShader});var nn=this.shaderModule.getModule(an);$t=nn.vs,ze=nn.fs,nn.uniforms&&(ue=Object.keys(nn.uniforms).map(function(Qn){return{dirty:!0,name:Qn,data:nn.uniforms[Qn]}}))}return this.material.create(nt,Xe(Xe({vertexShaderGLSL:$t,fragmentShaderGLSL:ze},Jt),{},{uniforms:ue}))}}]),lt}(),ot),Je=te()(ke.prototype,"material",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe=te()(ke.prototype,"engine",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ae=te()(ke.prototype,"shaderModule",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke))||j)},S8zm:function(fe,T){fe.exports=v;function v(B){var C=new Float32Array(2);return C[0]=B[0],C[1]=B[1],C}},SGks:function(fe,T){fe.exports=v;function v(B){var C=B[0],_=B[1];return C*C+_*_}},SUTL:function(fe,T){fe.exports="2.1.4"},Sk89:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.postConstruct=void 0;var B=v("MON2"),C=v("xfSm"),_=v("GXnB");function P(){return function(N,z,R){var q=new _.Metadata(C.POST_CONSTRUCT,z);if(Reflect.hasOwnMetadata(C.POST_CONSTRUCT,N.constructor))throw new Error(B.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(C.POST_CONSTRUCT,q,N.constructor)}}T.postConstruct=P},"Ska/":function(fe,T){fe.exports=v;function v(B,C){return B[0]=Math.round(C[0]),B[1]=Math.round(C[1]),B}},SksO:function(fe,T){function v(B,C){return fe.exports=v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,N){return P.__proto__=N,P},fe.exports.__esModule=!0,fe.exports.default=fe.exports,v(B,C)}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},Ssa2:function(fe,T,v){"use strict";v.d(T,"a",function(){return _});var B=v("IOcx"),C=v("ENEI");function _(P){for(var N=new C.a,z=B.d.fromValues(P[0],P[1],P[2]),R=B.d.fromValues(P[0],P[1],P[2]),q=3;q<P.length;){var W=P[q++],Z=P[q++],X=P[q++];W<z[0]&&(z[0]=W),Z<z[1]&&(z[1]=Z),X<z[2]&&(z[2]=X),W>R[0]&&(R[0]=W),Z>R[1]&&(R[1]=Z),X>R[2]&&(R[2]=X)}return N.setMinMax(z,R),N}},Svbc:function(fe,T,v){fe.exports=v("Bu3x")},Syy6:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.AlphaPointer=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.AlphaPointer=function(q){var W=q.direction,Z=(0,P.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:W==="vertical"});return C.default.createElement("div",{style:Z.picker})};T.default=z},THLb:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B=T.calculateChange=function(_,P,N,z,R){_.preventDefault();var q=R.clientWidth,W=R.clientHeight,Z=typeof _.pageX=="number"?_.pageX:_.touches[0].pageX,X=typeof _.pageY=="number"?_.pageY:_.touches[0].pageY,ne=Z-(R.getBoundingClientRect().left+window.pageXOffset),ie=X-(R.getBoundingClientRect().top+window.pageYOffset);if(N==="vertical"){var te=void 0;if(ie<0?te=0:ie>W?te=1:te=Math.round(ie*100/W)/100,P.a!==te)return{h:P.h,s:P.s,l:P.l,a:te,source:"rgb"}}else{var ce=void 0;if(ne<0?ce=0:ne>q?ce=1:ce=Math.round(ne*100/q)/100,z!==ce)return{h:P.h,s:P.s,l:P.l,a:ce,source:"rgb"}}return null}},TM95:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B=v("yOY4");Object.defineProperty(T,"Alpha",{enumerable:!0,get:function(){return W(B).default}});var C=v("Nq3d");Object.defineProperty(T,"Checkboard",{enumerable:!0,get:function(){return W(C).default}});var _=v("AnK5");Object.defineProperty(T,"EditableInput",{enumerable:!0,get:function(){return W(_).default}});var P=v("HlQe");Object.defineProperty(T,"Hue",{enumerable:!0,get:function(){return W(P).default}});var N=v("Ojt5");Object.defineProperty(T,"Raised",{enumerable:!0,get:function(){return W(N).default}});var z=v("ccyi");Object.defineProperty(T,"Saturation",{enumerable:!0,get:function(){return W(z).default}});var R=v("UGzO");Object.defineProperty(T,"ColorWrap",{enumerable:!0,get:function(){return W(R).default}});var q=v("Ba7A");Object.defineProperty(T,"Swatch",{enumerable:!0,get:function(){return W(q).default}});function W(Z){return Z&&Z.__esModule?Z:{default:Z}}},TpwP:function(fe,T,v){},Twb9:function(fe,T){fe.exports=v;function v(B,C,_){var P=C[0],N=C[1];return B[0]=_[0]*P+_[3]*N+_[6],B[1]=_[1]*P+_[4]*N+_[7],B}},"U+yc":function(fe,T){function v(B,C,_,P,N){var z={};return Object.keys(P).forEach(function(R){z[R]=P[R]}),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=_.slice().reverse().reduce(function(R,q){return q(B,C,R)||R},z),N&&z.initializer!==void 0&&(z.value=z.initializer?z.initializer.call(N):void 0,z.initializer=void 0),z.initializer===void 0&&(Object.defineProperty(B,C,z),z=null),z}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},UGzO:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ColorWrap=void 0;var B=Object.assign||function(te){for(var ce=1;ce<arguments.length;ce++){var ee=arguments[ce];for(var Y in ee)Object.prototype.hasOwnProperty.call(ee,Y)&&(te[Y]=ee[Y])}return te},C=function(){function te(ce,ee){for(var Y=0;Y<ee.length;Y++){var le=ee[Y];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ce,le.key,le)}}return function(ce,ee,Y){return ee&&te(ce.prototype,ee),Y&&te(ce,Y),ce}}(),_=v("q1tI"),P=W(_),N=v("sEfC"),z=W(N),R=v("p8yl"),q=W(R);function W(te){return te&&te.__esModule?te:{default:te}}function Z(te,ce){if(!(te instanceof ce))throw new TypeError("Cannot call a class as a function")}function X(te,ce){if(!te)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:te}function ne(te,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);te.prototype=Object.create(ce&&ce.prototype,{constructor:{value:te,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(te,ce):te.__proto__=ce)}var ie=T.ColorWrap=function(ce){var ee=function(Y){ne(le,Y);function le(re){Z(this,le);var Q=X(this,(le.__proto__||Object.getPrototypeOf(le)).call(this));return Q.handleChange=function(ge,oe){var Te=q.default.simpleCheckForValidColor(ge);if(Te){var be=q.default.toState(ge,ge.h||Q.state.oldHue);Q.setState(be),Q.props.onChangeComplete&&Q.debounce(Q.props.onChangeComplete,be,oe),Q.props.onChange&&Q.props.onChange(be,oe)}},Q.handleSwatchHover=function(ge,oe){var Te=q.default.simpleCheckForValidColor(ge);if(Te){var be=q.default.toState(ge,ge.h||Q.state.oldHue);Q.setState(be),Q.props.onSwatchHover&&Q.props.onSwatchHover(be,oe)}},Q.state=B({},q.default.toState(re.color,0)),Q.debounce=(0,z.default)(function(ge,oe,Te){ge(oe,Te)},100),Q}return C(le,[{key:"componentWillReceiveProps",value:function(Q){this.setState(B({},q.default.toState(Q.color,this.state.oldHue)))}},{key:"render",value:function(){var Q={};return this.props.onSwatchHover&&(Q.onSwatchHover=this.handleSwatchHover),P.default.createElement(ce,B({},this.props,this.state,{onChange:this.handleChange},Q))}}]),le}(_.PureComponent||_.Component);return ee.propTypes=B({},ce.propTypes),ee.defaultProps=B({},ce.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),ee};T.default=ie},UTAp:function(fe,T,v){"use strict";fe.exports=v("yAXI")},Ucsi:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B=Symbol.for("INJECTION");function C(R,q,W,Z){function X(){return Z&&!Reflect.hasMetadata(B,this,q)&&Reflect.defineMetadata(B,W(),this,q),Reflect.hasMetadata(B,this,q)?Reflect.getMetadata(B,this,q):W()}function ne(ie){Reflect.defineMetadata(B,ie,this,q)}Object.defineProperty(R,q,{configurable:!0,enumerable:!0,get:X,set:ne})}function _(R,q){return function(W){return function(Z,X){var ne=function(){return R.get(W)};C(Z,X,ne,q)}}}T.makePropertyInjectDecorator=_;function P(R,q){return function(W,Z){return function(X,ne){var ie=function(){return R.getNamed(W,Z)};C(X,ne,ie,q)}}}T.makePropertyInjectNamedDecorator=P;function N(R,q){return function(W,Z,X){return function(ne,ie){var te=function(){return R.getTagged(W,Z,X)};C(ne,ie,te,q)}}}T.makePropertyInjectTaggedDecorator=N;function z(R,q){return function(W){return function(Z,X){var ne=function(){return R.getAll(W)};C(Z,X,ne,q)}}}T.makePropertyMultiInjectDecorator=z},"V/xP":function(fe,T,v){"use strict";var B;(function(C){C.Normal="normal",C.PostProcessing="post-processing"})(B||(B={}))},VA6q:function(fe,T,v){"use strict";var B=v("VTBJ"),C=v("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},P=_,N=v("6VBw"),z=function(W,Z){return C.createElement(N.a,Object(B.a)(Object(B.a)({},W),{},{ref:Z,icon:P}))};z.displayName="RedoOutlined";var R=T.a=C.forwardRef(z)},VVms:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B=T.calculateChange=function(_,P,N){_.preventDefault();var z=N.getBoundingClientRect(),R=z.width,q=z.height,W=typeof _.pageX=="number"?_.pageX:_.touches[0].pageX,Z=typeof _.pageY=="number"?_.pageY:_.touches[0].pageY,X=W-(N.getBoundingClientRect().left+window.pageXOffset),ne=Z-(N.getBoundingClientRect().top+window.pageYOffset);X<0?X=0:X>R?X=R:ne<0?ne=0:ne>q&&(ne=q);var ie=X*100/R,te=-(ne*100/q)+100;return{h:P.h,s:ie,v:te,a:P.a,source:"rgb"}}},"Vg/k":function(fe,T){(function(v){fe.exports=function(){var B={46:function(N){N.exports=function(z){if(!z.webpackPolyfill){var R=Object.create(z);R.children||(R.children=[]),Object.defineProperty(R,"loaded",{enumerable:!0,get:function(){return R.l}}),Object.defineProperty(R,"id",{enumerable:!0,get:function(){return R.i}}),Object.defineProperty(R,"exports",{enumerable:!0}),R.webpackPolyfill=1}return R}}},C={};function _(P){if(C[P])return C[P].exports;var N=C[P]={exports:{}},z=!0;try{B[P](N,N.exports,_),z=!1}finally{z&&delete C[P]}return N.exports}return _.ab=v+"/",_(46)}()}).call(this,"/")},W8MJ:function(fe,T,v){var B=v("o5UB");function C(P,N){for(var z=0;z<N.length;z++){var R=N[z];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(P,B(R.key),R)}}function _(P,N,z){return N&&C(P.prototype,N),z&&C(P,z),Object.defineProperty(P,"prototype",{writable:!1}),P}fe.exports=_,fe.exports.__esModule=!0,fe.exports.default=fe.exports},WFjJ:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.CustomPicker=T.TwitterPicker=T.SwatchesPicker=T.SliderPicker=T.SketchPicker=T.PhotoshopPicker=T.MaterialPicker=T.HuePicker=T.GithubPicker=T.CompactPicker=T.ChromePicker=T.default=T.CirclePicker=T.BlockPicker=T.AlphaPicker=void 0;var B=v("qo7Q");Object.defineProperty(T,"AlphaPicker",{enumerable:!0,get:function(){return ee(B).default}});var C=v("rJ8t");Object.defineProperty(T,"BlockPicker",{enumerable:!0,get:function(){return ee(C).default}});var _=v("7dW+");Object.defineProperty(T,"CirclePicker",{enumerable:!0,get:function(){return ee(_).default}});var P=v("JI00");Object.defineProperty(T,"ChromePicker",{enumerable:!0,get:function(){return ee(P).default}});var N=v("oPLb");Object.defineProperty(T,"CompactPicker",{enumerable:!0,get:function(){return ee(N).default}});var z=v("Lx/H");Object.defineProperty(T,"GithubPicker",{enumerable:!0,get:function(){return ee(z).default}});var R=v("wkyg");Object.defineProperty(T,"HuePicker",{enumerable:!0,get:function(){return ee(R).default}});var q=v("Jxpl");Object.defineProperty(T,"MaterialPicker",{enumerable:!0,get:function(){return ee(q).default}});var W=v("FbP/");Object.defineProperty(T,"PhotoshopPicker",{enumerable:!0,get:function(){return ee(W).default}});var Z=v("HTXX");Object.defineProperty(T,"SketchPicker",{enumerable:!0,get:function(){return ee(Z).default}});var X=v("Pzom");Object.defineProperty(T,"SliderPicker",{enumerable:!0,get:function(){return ee(X).default}});var ne=v("t8r4");Object.defineProperty(T,"SwatchesPicker",{enumerable:!0,get:function(){return ee(ne).default}});var ie=v("nW7/");Object.defineProperty(T,"TwitterPicker",{enumerable:!0,get:function(){return ee(ie).default}});var te=v("UGzO");Object.defineProperty(T,"CustomPicker",{enumerable:!0,get:function(){return ee(te).default}});var ce=ee(P);function ee(Y){return Y&&Y.__esModule?Y:{default:Y}}T.default=ce.default},WOAq:function(fe,T,v){"use strict";(function(B){var C=v("Ju5/"),_=v("L3Qv"),P=typeof exports=="object"&&exports&&!exports.nodeType&&exports,N=P&&typeof B=="object"&&B&&!B.nodeType&&B,z=N&&N.exports===P,R=z?C.a.Buffer:void 0,q=R?R.isBuffer:void 0,W=q||_.a;T.a=W}).call(this,v("Vg/k")(fe))},WZrV:function(fe,T,v){var B=v("3z9K");fe.exports=C;function C(){this._arr=[],this._keyIndices={}}C.prototype.size=function(){return this._arr.length},C.prototype.keys=function(){return this._arr.map(function(_){return _.key})},C.prototype.has=function(_){return B.has(this._keyIndices,_)},C.prototype.priority=function(_){var P=this._keyIndices[_];if(P!==void 0)return this._arr[P].priority},C.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},C.prototype.add=function(_,P){var N=this._keyIndices;if(_=String(_),!B.has(N,_)){var z=this._arr,R=z.length;return N[_]=R,z.push({key:_,priority:P}),this._decrease(R),!0}return!1},C.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var _=this._arr.pop();return delete this._keyIndices[_.key],this._heapify(0),_.key},C.prototype.decrease=function(_,P){var N=this._keyIndices[_];if(P>this._arr[N].priority)throw new Error("New priority is greater than current priority. Key: "+_+" Old: "+this._arr[N].priority+" New: "+P);this._arr[N].priority=P,this._decrease(N)},C.prototype._heapify=function(_){var P=this._arr,N=2*_,z=N+1,R=_;N<P.length&&(R=P[N].priority<P[R].priority?N:R,z<P.length&&(R=P[z].priority<P[R].priority?z:R),R!==_&&(this._swap(_,R),this._heapify(R)))},C.prototype._decrease=function(_){for(var P=this._arr,N=P[_].priority,z;_!==0&&(z=_>>1,!(P[z].priority<N));)this._swap(_,z),_=z},C.prototype._swap=function(_,P){var N=this._arr,z=this._keyIndices,R=N[_],q=N[P];N[_]=q,N[P]=R,z[q.key]=_,z[R.key]=P}},WkPL:function(fe,T){function v(B,C){(C==null||C>B.length)&&(C=B.length);for(var _=0,P=new Array(C);_<C;_++)P[_]=B[_];return P}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},XkVO:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B;(function(Ae){Ae.TextureCompressionBC="texture-compression-bc"})(B=T.ExtensionName||(T.ExtensionName={}));var C;(function(Ae){Ae.ClampToEdge="clamp-to-edge",Ae.Repeat="repeat",Ae.MirrorRepeat="mirror-repeat"})(C=T.AddressMode||(T.AddressMode={}));var _;(function(Ae){Ae.UniformBuffer="uniform-buffer",Ae.StorageBuffer="storage-buffer",Ae.ReadonlyStorageBuffer="readonly-storage-buffer",Ae.Sampler="sampler",Ae.ComparisonSampler="comparison-sampler",Ae.SampledTexture="sampled-texture",Ae.ReadonlyStorageTexture="readonly-storage-texture",Ae.WriteonlyStorageTexture="writeonly-storage-texture"})(_=T.BindingType||(T.BindingType={}));var P;(function(Ae){Ae.Zero="zero",Ae.One="one",Ae.SrcColor="src-color",Ae.OneMinusSrcColor="one-minus-src-color",Ae.SrcAlpha="src-alpha",Ae.OneMinusSrcAlpha="one-minus-src-alpha",Ae.DstColor="dst-color",Ae.OneMinusDstColor="one-minus-dst-color",Ae.DstAlpha="dst-alpha",Ae.OneMinusDstAlpha="one-minus-dst-alpha",Ae.SrcAlphaSaturated="src-alpha-saturated",Ae.BlendColor="blend-color",Ae.OneMinusBlendColor="one-minus-blend-color"})(P=T.BlendFactor||(T.BlendFactor={}));var N;(function(Ae){Ae.Add="add",Ae.Subtract="subtract",Ae.ReverseSubtract="reverse-subtract",Ae.Min="min",Ae.Max="max"})(N=T.BlendOperation||(T.BlendOperation={}));var z;(function(Ae){Ae.Never="never",Ae.Less="less",Ae.Equal="equal",Ae.LessEqual="less-equal",Ae.Greater="greater",Ae.NotEqual="not-equal",Ae.GreaterEqual="greater-equal",Ae.Always="always"})(z=T.CompareFunction||(T.CompareFunction={}));var R;(function(Ae){Ae.None="none",Ae.Front="front",Ae.Back="back"})(R=T.CullMode||(T.CullMode={}));var q;(function(Ae){Ae.Nearest="nearest",Ae.Linear="linear"})(q=T.FilterMode||(T.FilterMode={}));var W;(function(Ae){Ae.CCW="ccw",Ae.CW="cw"})(W=T.FrontFace||(T.FrontFace={}));var Z;(function(Ae){Ae.Uint16="uint16",Ae.Uint32="uint32"})(Z=T.IndexFormat||(T.IndexFormat={}));var X;(function(Ae){Ae.Vertex="vertex",Ae.Instance="instance"})(X=T.InputStepMode||(T.InputStepMode={}));var ne;(function(Ae){Ae.Load="load"})(ne=T.LoadOp||(T.LoadOp={}));var ie;(function(Ae){Ae.PointList="point-list",Ae.LineList="line-list",Ae.LineStrip="line-strip",Ae.TriangleList="triangle-list",Ae.TriangleStrip="triangle-strip"})(ie=T.PrimitiveTopology||(T.PrimitiveTopology={}));var te;(function(Ae){Ae.Keep="keep",Ae.Zero="zero",Ae.Replace="replace",Ae.Invert="invert",Ae.IncrementClamp="increment-clamp",Ae.DecrementClamp="decrement-clamp",Ae.IncrementWrap="increment-wrap",Ae.DecrementWrap="decrement-wrap"})(te=T.StencilOperation||(T.StencilOperation={}));var ce;(function(Ae){Ae.Store="store",Ae.Clear="clear"})(ce=T.StoreOp||(T.StoreOp={}));var ee;(function(Ae){Ae.E1d="1d",Ae.E2d="2d",Ae.E3d="3d"})(ee=T.TextureDimension||(T.TextureDimension={}));var Y;(function(Ae){Ae.R8Unorm="r8unorm",Ae.R8Snorm="r8snorm",Ae.R8Uint="r8uint",Ae.R8Sint="r8sint",Ae.R16Uint="r16uint",Ae.R16Sint="r16sint",Ae.R16Float="r16float",Ae.RG8Unorm="rg8unorm",Ae.RG8Snorm="rg8snorm",Ae.RG8Uint="rg8uint",Ae.RG8Sint="rg8sint",Ae.R32Uint="r32uint",Ae.R32Sint="r32sint",Ae.R32Float="r32float",Ae.RG16Uint="rg16uint",Ae.RG16Sint="rg16sint",Ae.RG16Float="rg16float",Ae.RGBA8Unorm="rgba8unorm",Ae.RGBA8UnormSRGB="rgba8unorm-srgb",Ae.RGBA8Snorm="rgba8snorm",Ae.RGBA8Uint="rgba8uint",Ae.RGBA8Sint="rgba8sint",Ae.BGRA8Unorm="bgra8unorm",Ae.BGRA8UnormSRGB="bgra8unorm-srgb",Ae.RGB10A2Unorm="rgb10a2unorm",Ae.RG11B10Float="rg11b10float",Ae.RG32Uint="rg32uint",Ae.RG32Sint="rg32sint",Ae.RG32Float="rg32float",Ae.RGBA16Uint="rgba16uint",Ae.RGBA16Sint="rgba16sint",Ae.RGBA16Float="rgba16float",Ae.RGBA32Uint="rgba32uint",Ae.RGBA32Sint="rgba32sint",Ae.RGBA32Float="rgba32float",Ae.Depth32Float="depth32float",Ae.Depth24Plus="depth24plus",Ae.Depth24PlusStencil8="depth24plus-stencil8"})(Y=T.TextureFormat||(T.TextureFormat={}));var le;(function(Ae){Ae.Float="float",Ae.Sint="sint",Ae.Uint="uint"})(le=T.TextureComponentType||(T.TextureComponentType={}));var re;(function(Ae){Ae.E1d="1d",Ae.E2d="2d",Ae.E2dArray="2d-array",Ae.Cube="cube",Ae.CubeArray="cube-array",Ae.E3d="3d"})(re=T.TextureViewDimension||(T.TextureViewDimension={}));var Q;(function(Ae){Ae.Uchar2="uchar2",Ae.Uchar4="uchar4",Ae.Char2="char2",Ae.Char4="char4",Ae.Uchar2Norm="uchar2norm",Ae.Uchar4Norm="uchar4norm",Ae.Char2Norm="char2norm",Ae.Char4Norm="char4norm",Ae.Ushort2="ushort2",Ae.Ushort4="ushort4",Ae.Short2="short2",Ae.Short4="short4",Ae.Ushort2Norm="ushort2norm",Ae.Ushort4Norm="ushort4norm",Ae.Short2Norm="short2norm",Ae.Short4Norm="short4norm",Ae.Half2="half2",Ae.Half4="half4",Ae.Float="float",Ae.Float2="float2",Ae.Float3="float3",Ae.Float4="float4",Ae.Uint="uint",Ae.Uint2="uint2",Ae.Uint3="uint3",Ae.Uint4="uint4",Ae.Int="int",Ae.Int2="int2",Ae.Int3="int3",Ae.Int4="int4"})(Q=T.VertexFormat||(T.VertexFormat={}));var ge;(function(Ae){Ae.All="all",Ae.StencilOnly="stencil-only",Ae.DepthOnly="depth-only"})(ge=T.TextureAspect||(T.TextureAspect={}));var oe;(function(Ae){Ae.Error="error",Ae.Warning="warning",Ae.Info="info"})(oe=T.CompilationMessageType||(T.CompilationMessageType={}));var Te;(function(Ae){Ae.Occlusion="occlusion"})(Te=T.QueryType||(T.QueryType={}));var be;(function(Ae){Ae[Ae.MapRead=1]="MapRead",Ae[Ae.MapWrite=2]="MapWrite",Ae[Ae.CopySrc=4]="CopySrc",Ae[Ae.CopyDst=8]="CopyDst",Ae[Ae.Index=16]="Index",Ae[Ae.Vertex=32]="Vertex",Ae[Ae.Uniform=64]="Uniform",Ae[Ae.Storage=128]="Storage",Ae[Ae.Indirect=256]="Indirect",Ae[Ae.QueryResolve=512]="QueryResolve"})(be=T.BufferUsage||(T.BufferUsage={}));var j;(function(Ae){Ae[Ae.Red=1]="Red",Ae[Ae.Green=2]="Green",Ae[Ae.Blue=4]="Blue",Ae[Ae.Alpha=8]="Alpha",Ae[Ae.All=15]="All"})(j=T.ColorWrite||(T.ColorWrite={}));var ke;(function(Ae){Ae[Ae.Vertex=1]="Vertex",Ae[Ae.Fragment=2]="Fragment",Ae[Ae.Compute=4]="Compute"})(ke=T.ShaderStage||(T.ShaderStage={}));var Je;(function(Ae){Ae[Ae.CopySrc=1]="CopySrc",Ae[Ae.CopyDst=2]="CopyDst",Ae[Ae.Sampled=4]="Sampled",Ae[Ae.Storage=8]="Storage",Ae[Ae.OutputAttachment=16]="OutputAttachment"})(Je=T.TextureUsage||(T.TextureUsage={}));var Pe;(function(Ae){Ae[Ae.Read=1]="Read",Ae[Ae.Write=2]="Write"})(Pe=T.MapMode||(T.MapMode={}))},XqMk:function(fe,T,v){"use strict";(function(B){var C=typeof B=="object"&&B&&B.Object===Object&&B;T.a=C}).call(this,v("IyRk"))},"Xt/L":function(fe,T){function v(B,C,_){for(var P=-1,N=B==null?0:B.length;++P<N;)if(_(C,B[P]))return!0;return!1}fe.exports=v},Yk9n:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.inject=T.LazyServiceIdentifer=void 0;var B=v("MON2"),C=v("xfSm"),_=v("GXnB"),P=v("Ztfv"),N=function(){function R(q){this._cb=q}return R.prototype.unwrap=function(){return this._cb()},R}();T.LazyServiceIdentifer=N;function z(R){return function(q,W,Z){if(R===void 0)throw new Error(B.UNDEFINED_INJECT_ANNOTATION(q.name));var X=new _.Metadata(C.INJECT_TAG,R);typeof Z=="number"?P.tagParameter(q,W,Z,X):P.tagProperty(q,W,X)}}T.inject=z},Yr8b:function(fe,T,v){fe.exports=v("SGks")},Yydy:function(fe,T){},ZKkB:function(fe,T,v){"use strict";v.d(T,"a",function(){return N});var B=v("oZsa"),C=v("iZzK");function _(z){return Function.toString.call(z).indexOf("[native code]")!==-1}var P=v("xdlL");function N(z){var R=typeof Map=="function"?new Map:void 0;return N=function(W){if(W===null||!_(W))return W;if(typeof W!="function")throw new TypeError("Super expression must either be null or a function");if(typeof R!="undefined"){if(R.has(W))return R.get(W);R.set(W,Z)}function Z(){return Object(P.a)(W,arguments,Object(B.a)(this).constructor)}return Z.prototype=Object.create(W.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),Object(C.a)(Z,W)},N(z)}},"ZQT/":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.CompactColor=void 0;var B=v("q1tI"),C=q(B),_=v("/FUP"),P=q(_),N=v("p8yl"),z=q(N),R=v("TM95");function q(Z){return Z&&Z.__esModule?Z:{default:Z}}var W=T.CompactColor=function(X){var ne=X.color,ie=X.onClick,te=ie===void 0?function(){}:ie,ce=X.onSwatchHover,ee=X.active,Y=(0,P.default)({default:{color:{background:ne,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:z.default.getContrastingColor(ne),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:ee,"color-#FFFFFF":ne==="#FFFFFF",transparent:ne==="transparent"});return C.default.createElement(R.Swatch,{style:Y.color,color:ne,onClick:te,onHover:ce,focusStyle:{boxShadow:"0 0 4px "+ne}},C.default.createElement("div",{style:Y.dot}))};T.default=W},ZhPi:function(fe,T,v){var B=v("WkPL");function C(_,P){if(!!_){if(typeof _=="string")return B(_,P);var N=Object.prototype.toString.call(_).slice(8,-1);if(N==="Object"&&_.constructor&&(N=_.constructor.name),N==="Map"||N==="Set")return Array.from(_);if(N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N))return B(_,P)}}fe.exports=C,fe.exports.__esModule=!0,fe.exports.default=fe.exports},ZjWs:function(fe,T){},"Znm+":function(fe,T,v){var B=v("NykK"),C=v("ExA7"),_="[object Boolean]";function P(N){return N===!0||N===!1||C(N)&&B(N)==_}fe.exports=P},ZtHU:function(fe,T,v){fe.exports={Graph:v("QJPA"),version:v("SUTL")}},Ztfv:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.tagProperty=T.tagParameter=T.decorate=void 0;var B=v("MON2"),C=v("xfSm");function _(W,Z,X,ne){var ie=C.TAGGED;N(ie,W,Z,ne,X)}T.tagParameter=_;function P(W,Z,X){var ne=C.TAGGED_PROP;N(ne,W.constructor,Z,X)}T.tagProperty=P;function N(W,Z,X,ne,ie){var te={},ce=typeof ie=="number",ee=ie!==void 0&&ce?ie.toString():X;if(ce&&X!==void 0)throw new Error(B.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(W,Z)&&(te=Reflect.getMetadata(W,Z));var Y=te[ee];if(!Array.isArray(Y))Y=[];else for(var le=0,re=Y;le<re.length;le++){var Q=re[le];if(Q.key===ne.key)throw new Error(B.DUPLICATED_METADATA+" "+Q.key.toString())}Y.push(ne),te[ee]=Y,Reflect.defineMetadata(W,te,Z)}function z(W,Z){Reflect.decorate(W,Z)}function R(W,Z){return function(X,ne){Z(X,ne,W)}}function q(W,Z,X){typeof X=="number"?z([R(X,W)],Z):typeof X=="string"?Reflect.decorate([W],Z,X):z([W],Z)}T.decorate=q},ZzCi:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.named=void 0;var B=v("xfSm"),C=v("GXnB"),_=v("Ztfv");function P(N){return function(z,R,q){var W=new C.Metadata(B.NAMED_TAG,N);typeof q=="number"?_.tagParameter(z,R,q,W):_.tagProperty(z,R,W)}}T.named=P},a1gu:function(fe,T,v){var B=v("cDf5").default,C=v("PJYZ");function _(P,N){if(N&&(B(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(P)}fe.exports=_,fe.exports.__esModule=!0,fe.exports.default=fe.exports},a8Yn:function(fe,T){fe.exports=v;function v(B,C){return B[0]*C[0]+B[1]*C[1]}},aPG5:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.resolve=void 0;var B=v("MON2"),C=v("FV85"),_=v("qK8v"),P=v("ujMp"),N=v("cSJO"),z=function(Z,X,ne){try{return ne()}catch(ie){throw _.isStackOverflowExeption(ie)?new Error(B.CIRCULAR_DEPENDENCY_IN_FACTORY(Z,X.toString())):ie}},R=function W(Z){return function(X){X.parentContext.setCurrentRequest(X);var ne=X.bindings,ie=X.childRequests,te=X.target&&X.target.isArray(),ce=!X.parentRequest||!X.parentRequest.target||!X.target||!X.parentRequest.target.matchesArray(X.target.serviceIdentifier);if(te&&ce)return ie.map(function(ge){var oe=W(Z);return oe(ge)});var ee=null;if(X.target.isOptional()&&ne.length===0)return;var Y=ne[0],le=Y.scope===C.BindingScopeEnum.Singleton,re=Y.scope===C.BindingScopeEnum.Request;if(le&&Y.activated)return Y.cache;if(re&&Z!==null&&Z.has(Y.id))return Z.get(Y.id);if(Y.type===C.BindingTypeEnum.ConstantValue)ee=Y.cache,Y.activated=!0;else if(Y.type===C.BindingTypeEnum.Function)ee=Y.cache,Y.activated=!0;else if(Y.type===C.BindingTypeEnum.Constructor)ee=Y.implementationType;else if(Y.type===C.BindingTypeEnum.DynamicValue&&Y.dynamicValue!==null)ee=z("toDynamicValue",Y.serviceIdentifier,function(){return Y.dynamicValue(X.parentContext)});else if(Y.type===C.BindingTypeEnum.Factory&&Y.factory!==null)ee=z("toFactory",Y.serviceIdentifier,function(){return Y.factory(X.parentContext)});else if(Y.type===C.BindingTypeEnum.Provider&&Y.provider!==null)ee=z("toProvider",Y.serviceIdentifier,function(){return Y.provider(X.parentContext)});else if(Y.type===C.BindingTypeEnum.Instance&&Y.implementationType!==null)ee=N.resolveInstance(Y.implementationType,ie,W(Z));else{var Q=P.getServiceIdentifierAsString(X.serviceIdentifier);throw new Error(B.INVALID_BINDING_TYPE+" "+Q)}return typeof Y.onActivation=="function"&&(ee=Y.onActivation(X.parentContext,ee)),le&&(Y.cache=ee,Y.activated=!0),re&&Z!==null&&!Z.has(Y.id)&&Z.set(Y.id,ee),ee}};function q(W){var Z=R(W.plan.rootRequest.requestScope);return Z(W.plan.rootRequest)}T.resolve=q},baXp:function(fe,T,v){"use strict";v.d(T,"a",function(){return ce});var B=v("lwsE"),C=v.n(B),_=v("PJYZ"),P=v.n(_),N=v("7W2i"),z=v.n(N),R=v("a1gu"),q=v.n(R),W=v("Nsbk"),Z=v.n(W),X=v("oDt1");function ne(ee){var Y=ie();return function(){var re=Z()(ee),Q;if(Y){var ge=Z()(this).constructor;Q=Reflect.construct(re,arguments,ge)}else Q=re.apply(this,arguments);return q()(this,Q)}}function ie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ee){return!1}}var te;(function(ee){ee[ee.Standard=0]="Standard"})(te||(te={}));var ce=function(ee){z()(le,ee);var Y=ne(le);function le(re){var Q;return C()(this,le),Q=Y.call(this,re),Q.strategy=te.Standard,Q.visibilityPlaneMask=0,Q.visible=!1,Object.assign(P()(Q),re),Q}return le}(X.a)},blMc:function(fe,T){fe.exports=v;function v(B,C,_){var P=C[0],N=C[1];return B[0]=_[0]*P+_[2]*N+_[4],B[1]=_[1]*P+_[3]*N+_[5],B}},cDf5:function(fe,T){function v(B){return fe.exports=v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},fe.exports.__esModule=!0,fe.exports.default=fe.exports,v(B)}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},cGwC:function(fe,T){fe.exports=v;function v(B,C,_){return B[0]=C[0]-_[0],B[1]=C[1]-_[1],B}},cSJO:function(fe,T,v){"use strict";var B=this&&this.__spreadArray||function(W,Z){for(var X=0,ne=Z.length,ie=W.length;X<ne;X++,ie++)W[ie]=Z[X];return W};Object.defineProperty(T,"__esModule",{value:!0}),T.resolveInstance=void 0;var C=v("MON2"),_=v("FV85"),P=v("xfSm");function N(W,Z,X){var ne=Z.filter(function(te){return te.target!==null&&te.target.type===_.TargetTypeEnum.ClassProperty}),ie=ne.map(X);return ne.forEach(function(te,ce){var ee="";ee=te.target.name.value();var Y=ie[ce];W[ee]=Y}),W}function z(W,Z){return new(W.bind.apply(W,B([void 0],Z)))}function R(W,Z){if(Reflect.hasMetadata(P.POST_CONSTRUCT,W)){var X=Reflect.getMetadata(P.POST_CONSTRUCT,W);try{Z[X.value]()}catch(ne){throw new Error(C.POST_CONSTRUCT_ERROR(W.name,ne.message))}}}function q(W,Z,X){var ne=null;if(Z.length>0){var ie=Z.filter(function(ce){return ce.target!==null&&ce.target.type===_.TargetTypeEnum.ConstructorArgument}),te=ie.map(X);ne=z(W,te),ne=N(ne,Z,X)}else ne=new W;return R(W,ne),ne}T.resolveInstance=q},cXWL:function(fe,T,v){"use strict";v.d(T,"a",function(){return z});var B=v("lwsE"),C=v.n(B),_=v("W8MJ"),P=v.n(_),N=v("IOcx"),z=function(){function R(q,W){C()(this,R),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=q||0,this.normal=W||N.d.fromValues(0,1,0),this.updatePNVertexFlag()}return P()(R,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(W){return N.d.dot(W,this.normal)-this.distance}},{key:"normalize",value:function(){var W=1/N.d.len(this.normal);N.d.scale(this.normal,this.normal,W),this.distance*=W}},{key:"intersectsLine",value:function(W,Z,X){var ne=this.distanceToPoint(W),ie=this.distanceToPoint(Z),te=ne/(ne-ie),ce=te>=0&&te<=1;return ce&&X&&N.d.lerp(X,W,Z,te),ce}}]),R}()},cZ5Q:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.injectable=void 0;var B=v("MON2"),C=v("xfSm");function _(){return function(P){if(Reflect.hasOwnMetadata(C.PARAM_TYPES,P))throw new Error(B.DUPLICATED_INJECTABLE_DECORATOR);var N=Reflect.getMetadata(C.DESIGN_PARAM_TYPES,P)||[];return Reflect.defineMetadata(C.PARAM_TYPES,N,P),P}}T.injectable=_},ccyi:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Saturation=void 0;var B=function(){function ee(Y,le){for(var re=0;re<le.length;re++){var Q=le[re];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(Y,Q.key,Q)}}return function(Y,le,re){return le&&ee(Y.prototype,le),re&&ee(Y,re),Y}}(),C=v("q1tI"),_=X(C),P=v("/FUP"),N=X(P),z=v("DzJC"),R=X(z),q=v("VVms"),W=Z(q);function Z(ee){if(ee&&ee.__esModule)return ee;var Y={};if(ee!=null)for(var le in ee)Object.prototype.hasOwnProperty.call(ee,le)&&(Y[le]=ee[le]);return Y.default=ee,Y}function X(ee){return ee&&ee.__esModule?ee:{default:ee}}function ne(ee,Y){if(!(ee instanceof Y))throw new TypeError("Cannot call a class as a function")}function ie(ee,Y){if(!ee)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:ee}function te(ee,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);ee.prototype=Object.create(Y&&Y.prototype,{constructor:{value:ee,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(ee,Y):ee.__proto__=Y)}var ce=T.Saturation=function(ee){te(Y,ee);function Y(le){ne(this,Y);var re=ie(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,le));return re.handleChange=function(Q){typeof re.props.onChange=="function"&&re.throttle(re.props.onChange,W.calculateChange(Q,re.props.hsl,re.container),Q)},re.handleMouseDown=function(Q){re.handleChange(Q),window.addEventListener("mousemove",re.handleChange),window.addEventListener("mouseup",re.handleMouseUp)},re.handleMouseUp=function(){re.unbindEventListeners()},re.throttle=(0,R.default)(function(Q,ge,oe){Q(ge,oe)},50),re}return B(Y,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var re=this,Q=this.props.style||{},ge=Q.color,oe=Q.white,Te=Q.black,be=Q.pointer,j=Q.circle,ke=(0,N.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:ge,white:oe,black:Te,pointer:be,circle:j}},{custom:!!this.props.style});return _.default.createElement("div",{style:ke.color,ref:function(Pe){return re.container=Pe},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},_.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),_.default.createElement("div",{style:ke.white,className:"saturation-white"},_.default.createElement("div",{style:ke.black,className:"saturation-black"}),_.default.createElement("div",{style:ke.pointer},this.props.pointer?_.default.createElement(this.props.pointer,this.props):_.default.createElement("div",{style:ke.circle}))))}}]),Y}(C.PureComponent||C.Component);T.default=ce},d9O0:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.id=void 0;var B=0;function C(){return B++}T.id=C},dATH:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SliderPointer=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.SliderPointer=function(){var q=(0,P.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return C.default.createElement("div",{style:q.picker})};T.default=z},dOXA:function(fe,T){fe.exports=v;function v(B,C,_){return B[0]=Math.min(C[0],_[0]),B[1]=Math.min(C[1],_[1]),B}},dQpi:function(fe,T,v){var B=v("yGk4"),C=v("vN+2"),_=v("rEGp"),P=1/0,N=B&&1/_(new B([,-0]))[1]==P?function(z){return new B(z)}:C;fe.exports=N},dX1H:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Target=void 0;var B=v("xfSm"),C=v("d9O0"),_=v("GXnB"),P=v("zxMA"),N=function(){function z(R,q,W,Z){this.id=C.id(),this.type=R,this.serviceIdentifier=W,this.name=new P.QueryableString(q||""),this.metadata=new Array;var X=null;typeof Z=="string"?X=new _.Metadata(B.NAMED_TAG,Z):Z instanceof _.Metadata&&(X=Z),X!==null&&this.metadata.push(X)}return z.prototype.hasTag=function(R){for(var q=0,W=this.metadata;q<W.length;q++){var Z=W[q];if(Z.key===R)return!0}return!1},z.prototype.isArray=function(){return this.hasTag(B.MULTI_INJECT_TAG)},z.prototype.matchesArray=function(R){return this.matchesTag(B.MULTI_INJECT_TAG)(R)},z.prototype.isNamed=function(){return this.hasTag(B.NAMED_TAG)},z.prototype.isTagged=function(){return this.metadata.some(function(R){return B.NON_CUSTOM_TAG_KEYS.every(function(q){return R.key!==q})})},z.prototype.isOptional=function(){return this.matchesTag(B.OPTIONAL_TAG)(!0)},z.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(R){return R.key===B.NAMED_TAG})[0]:null},z.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(R){return B.NON_CUSTOM_TAG_KEYS.every(function(q){return R.key!==q})}):null},z.prototype.matchesNamedTag=function(R){return this.matchesTag(B.NAMED_TAG)(R)},z.prototype.matchesTag=function(R){var q=this;return function(W){for(var Z=0,X=q.metadata;Z<X.length;Z++){var ne=X[Z];if(ne.key===R&&ne.value===W)return!0}return!1}},z}();T.Target=N},doU7:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BindingCount=void 0;var B={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};T.BindingCount=B},dxzI:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.AsyncContainerModule=T.ContainerModule=void 0;var B=v("d9O0"),C=function(){function P(N){this.id=B.id(),this.registry=N}return P}();T.ContainerModule=C;var _=function(){function P(N){this.id=B.id(),this.registry=N}return P}();T.AsyncContainerModule=_},eHBW:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SketchPresetColors=void 0;var B=Object.assign||function(X){for(var ne=1;ne<arguments.length;ne++){var ie=arguments[ne];for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(X[te]=ie[te])}return X},C=v("q1tI"),_=W(C),P=v("17x9"),N=W(P),z=v("/FUP"),R=W(z),q=v("TM95");function W(X){return X&&X.__esModule?X:{default:X}}var Z=T.SketchPresetColors=function(ne){var ie=ne.colors,te=ne.onClick,ce=te===void 0?function(){}:te,ee=ne.onSwatchHover,Y=(0,R.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!ie||!ie.length}),le=function(Q,ge){ce({hex:Q,source:"hex"},ge)};return _.default.createElement("div",{style:Y.colors,className:"flexbox-fix"},ie.map(function(re){var Q=typeof re=="string"?{color:re}:re,ge=""+Q.color+(Q.title||"");return _.default.createElement("div",{key:ge,style:Y.swatchWrap},_.default.createElement(q.Swatch,B({},Q,{style:Y.swatch,onClick:le,onHover:ee,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+Q.color}})))}))};Z.propTypes={colors:N.default.arrayOf(N.default.oneOfType([N.default.string,N.default.shape({color:N.default.string,title:N.default.string})])).isRequired},T.default=Z},fBpv:function(fe,T,v){var B=v("PnFB");fe.exports=C;function C(_,P){return B(_,P,"post")}},fbrv:function(fe,T,v){"use strict";var B=this&&this.__spreadArray||function(ce,ee){for(var Y=0,le=ee.length,re=ce.length;Y<le;Y++,re++)ce[re]=ee[Y];return ce};Object.defineProperty(T,"__esModule",{value:!0}),T.getFunctionName=T.getBaseClassDependencyCount=T.getDependencies=void 0;var C=v("Yk9n"),_=v("MON2"),P=v("FV85"),N=v("xfSm"),z=v("ujMp");Object.defineProperty(T,"getFunctionName",{enumerable:!0,get:function(){return z.getFunctionName}});var R=v("dX1H");function q(ce,ee){var Y=z.getFunctionName(ee),le=W(ce,Y,ee,!1);return le}T.getDependencies=q;function W(ce,ee,Y,le){var re=ce.getConstructorMetadata(Y),Q=re.compilerGeneratedMetadata;if(Q===void 0){var ge=_.MISSING_INJECTABLE_ANNOTATION+" "+ee+".";throw new Error(ge)}var oe=re.userGeneratedMetadata,Te=Object.keys(oe),be=Y.length===0&&Te.length>0,j=Te.length>Y.length,ke=be||j?Te.length:Y.length,Je=X(le,ee,Q,oe,ke),Pe=ne(ce,Y),Ae=B(B([],Je),Pe);return Ae}function Z(ce,ee,Y,le,re){var Q=re[ce.toString()]||[],ge=te(Q),oe=ge.unmanaged!==!0,Te=le[ce],be=ge.inject||ge.multiInject;if(Te=be||Te,Te instanceof C.LazyServiceIdentifer&&(Te=Te.unwrap()),oe){var j=Te===Object,ke=Te===Function,Je=Te===void 0,Pe=j||ke||Je;if(!ee&&Pe){var Ae=_.MISSING_INJECT_ANNOTATION+" argument "+ce+" in class "+Y+".";throw new Error(Ae)}var ot=new R.Target(P.TargetTypeEnum.ConstructorArgument,ge.targetName,Te);return ot.metadata=Q,ot}return null}function X(ce,ee,Y,le,re){for(var Q=[],ge=0;ge<re;ge++){var oe=ge,Te=Z(oe,ce,ee,Y,le);Te!==null&&Q.push(Te)}return Q}function ne(ce,ee){for(var Y=ce.getPropertiesMetadata(ee),le=[],re=Object.keys(Y),Q=0,ge=re;Q<ge.length;Q++){var oe=ge[Q],Te=Y[oe],be=te(Y[oe]),j=be.targetName||oe,ke=be.inject||be.multiInject,Je=new R.Target(P.TargetTypeEnum.ClassProperty,j,ke);Je.metadata=Te,le.push(Je)}var Pe=Object.getPrototypeOf(ee.prototype).constructor;if(Pe!==Object){var Ae=ne(ce,Pe);le=B(B([],le),Ae)}return le}function ie(ce,ee){var Y=Object.getPrototypeOf(ee.prototype).constructor;if(Y!==Object){var le=z.getFunctionName(Y),re=W(ce,le,Y,!0),Q=re.map(function(Te){return Te.metadata.filter(function(be){return be.key===N.UNMANAGED_TAG})}),ge=[].concat.apply([],Q).length,oe=re.length-ge;return oe>0?oe:ie(ce,Y)}else return 0}T.getBaseClassDependencyCount=ie;function te(ce){var ee={};return ce.forEach(function(Y){ee[Y.key.toString()]=Y.value}),{inject:ee[N.INJECT_TAG],multiInject:ee[N.MULTI_INJECT_TAG],targetName:ee[N.NAME_TAG],unmanaged:ee[N.UNMANAGED_TAG]}}},fbvF:function(fe,T,v){(function(B,C){fe.exports=C()})(this,function(){"use strict";var B=function(Me){return Me instanceof Uint8Array||Me instanceof Uint16Array||Me instanceof Uint32Array||Me instanceof Int8Array||Me instanceof Int16Array||Me instanceof Int32Array||Me instanceof Float32Array||Me instanceof Float64Array||Me instanceof Uint8ClampedArray},C=function(Me,at){for(var Rt=Object.keys(at),Mt=0;Mt<Rt.length;++Mt)Me[Rt[Mt]]=at[Rt[Mt]];return Me},_=`
`;function P(ve){return typeof atob!="undefined"?atob(ve):"base64:"+ve}function N(ve){var Me=new Error("(regl) "+ve);throw console.error(Me),Me}function z(ve,Me){ve||N(Me)}function R(ve){return ve?": "+ve:""}function q(ve,Me,at){ve in Me||N("unknown parameter ("+ve+")"+R(at)+". possible values: "+Object.keys(Me).join())}function W(ve,Me){B(ve)||N("invalid parameter type"+R(Me)+". must be a typed array")}function Z(ve,Me){switch(Me){case"number":return typeof ve=="number";case"object":return typeof ve=="object";case"string":return typeof ve=="string";case"boolean":return typeof ve=="boolean";case"function":return typeof ve=="function";case"undefined":return typeof ve=="undefined";case"symbol":return typeof ve=="symbol"}}function X(ve,Me,at){Z(ve,Me)||N("invalid parameter type"+R(at)+". expected "+Me+", got "+typeof ve)}function ne(ve,Me){ve>=0&&(ve|0)===ve||N("invalid parameter type, ("+ve+")"+R(Me)+". must be a nonnegative integer")}function ie(ve,Me,at){Me.indexOf(ve)<0&&N("invalid value"+R(at)+". must be one of: "+Me)}var te=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function ce(ve){Object.keys(ve).forEach(function(Me){te.indexOf(Me)<0&&N('invalid regl constructor argument "'+Me+'". must be one of '+te)})}function ee(ve,Me){for(ve=ve+"";ve.length<Me;)ve=" "+ve;return ve}function Y(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function le(ve,Me){this.number=ve,this.line=Me,this.errors=[]}function re(ve,Me,at){this.file=ve,this.line=Me,this.message=at}function Q(){var ve=new Error,Me=(ve.stack||ve).toString(),at=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Me);if(at)return at[1];var Rt=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Me);return Rt?Rt[1]:"unknown"}function ge(){var ve=new Error,Me=(ve.stack||ve).toString(),at=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Me);if(at)return at[1];var Rt=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Me);return Rt?Rt[1]:"unknown"}function oe(ve,Me){var at=ve.split(`
`),Rt=1,Mt=0,Zt={unknown:new Y,0:new Y};Zt.unknown.name=Zt[0].name=Me||Q(),Zt.unknown.lines.push(new le(0,""));for(var Bt=0;Bt<at.length;++Bt){var mn=at[Bt],Wn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(mn);if(Wn)switch(Wn[1]){case"line":var Rn=/(\d+)(\s+\d+)?/.exec(Wn[2]);Rn&&(Rt=Rn[1]|0,Rn[2]&&(Mt=Rn[2]|0,Mt in Zt||(Zt[Mt]=new Y)));break;case"define":var Nn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Wn[2]);Nn&&(Zt[Mt].name=Nn[1]?P(Nn[2]):Nn[2]);break}Zt[Mt].lines.push(new le(Rt++,mn))}return Object.keys(Zt).forEach(function(Pn){var nr=Zt[Pn];nr.lines.forEach(function(Yn){nr.index[Yn.number]=Yn})}),Zt}function Te(ve){var Me=[];return ve.split(`
`).forEach(function(at){if(!(at.length<5)){var Rt=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(at);Rt?Me.push(new re(Rt[1]|0,Rt[2]|0,Rt[3].trim())):at.length>0&&Me.push(new re("unknown",0,at))}}),Me}function be(ve,Me){Me.forEach(function(at){var Rt=ve[at.file];if(Rt){var Mt=Rt.index[at.line];if(Mt){Mt.errors.push(at),Rt.hasErrors=!0;return}}ve.unknown.hasErrors=!0,ve.unknown.lines[0].errors.push(at)})}function j(ve,Me,at,Rt,Mt){if(!ve.getShaderParameter(Me,ve.COMPILE_STATUS)){var Zt=ve.getShaderInfoLog(Me),Bt=Rt===ve.FRAGMENT_SHADER?"fragment":"vertex";Xe(at,"string",Bt+" shader source must be a string",Mt);var mn=oe(at,Mt),Wn=Te(Zt);be(mn,Wn),Object.keys(mn).forEach(function(Rn){var Nn=mn[Rn];if(!Nn.hasErrors)return;var Pn=[""],nr=[""];function Yn(Bn,zt){Pn.push(Bn),nr.push(zt||"")}Yn("file number "+Rn+": "+Nn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Nn.lines.forEach(function(Bn){if(Bn.errors.length>0){Yn(ee(Bn.number,4)+"|  ","background-color:yellow; font-weight:bold"),Yn(Bn.line+_,"color:red; background-color:yellow; font-weight:bold");var zt=0;Bn.errors.forEach(function(Ft){var Ln=Ft.message,ar=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Ln);if(ar){var rn=ar[1];switch(Ln=ar[2],rn){case"assign":rn="=";break}zt=Math.max(Bn.line.indexOf(rn,zt),0)}else zt=0;Yn(ee("| ",6)),Yn(ee("^^^",zt+3)+_,"font-weight:bold"),Yn(ee("| ",6)),Yn(Ln+_,"font-weight:bold")}),Yn(ee("| ",6)+_)}else Yn(ee(Bn.number,4)+"|  "),Yn(Bn.line+_,"color:red")}),typeof document!="undefined"&&!window.chrome?(nr[0]=Pn.join("%c"),console.log.apply(console,nr)):console.log(Pn.join(""))}),z.raise("Error compiling "+Bt+" shader, "+mn[0].name)}}function ke(ve,Me,at,Rt,Mt){if(!ve.getProgramParameter(Me,ve.LINK_STATUS)){var Zt=ve.getProgramInfoLog(Me),Bt=oe(at,Mt),mn=oe(Rt,Mt),Wn='Error linking program with vertex shader, "'+mn[0].name+'", and fragment shader "'+Bt[0].name+'"';typeof document!="undefined"?console.log("%c"+Wn+_+"%c"+Zt,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Wn+_+Zt),z.raise(Wn)}}function Je(ve){ve._commandRef=Q()}function Pe(ve,Me,at,Rt){Je(ve);function Mt(Wn){return Wn?Rt.id(Wn):0}ve._fragId=Mt(ve.static.frag),ve._vertId=Mt(ve.static.vert);function Zt(Wn,Rn){Object.keys(Rn).forEach(function(Nn){Wn[Rt.id(Nn)]=!0})}var Bt=ve._uniformSet={};Zt(Bt,Me.static),Zt(Bt,Me.dynamic);var mn=ve._attributeSet={};Zt(mn,at.static),Zt(mn,at.dynamic),ve._hasCount="count"in ve.static||"count"in ve.dynamic||"elements"in ve.static||"elements"in ve.dynamic}function Ae(ve,Me){var at=ge();N(ve+" in command "+(Me||Q())+(at==="unknown"?"":" called from "+at))}function ot(ve,Me,at){ve||Ae(Me,at||Q())}function k(ve,Me,at,Rt){ve in Me||Ae("unknown parameter ("+ve+")"+R(at)+". possible values: "+Object.keys(Me).join(),Rt||Q())}function Xe(ve,Me,at,Rt){Z(ve,Me)||Ae("invalid parameter type"+R(at)+". expected "+Me+", got "+typeof ve,Rt||Q())}function Ot(ve){ve()}function lt(ve,Me,at){ve.texture?ie(ve.texture._texture.internalformat,Me,"unsupported texture format for attachment"):ie(ve.renderbuffer._renderbuffer.format,at,"unsupported renderbuffer format for attachment")}var Ut=33071,Jt=9728,nt=9984,$t=9985,ze=9986,ue=9987,an=5120,nn=5121,Qn=5122,Pt=5123,Tn=5124,rr=5125,Qt=5126,sn=32819,kn=32820,Sn=33635,st=34042,At=36193,vt={};vt[an]=vt[nn]=1,vt[Qn]=vt[Pt]=vt[At]=vt[Sn]=vt[sn]=vt[kn]=2,vt[Tn]=vt[rr]=vt[Qt]=vt[st]=4;function _t(ve,Me){return ve===kn||ve===sn||ve===Sn?2:ve===st?4:vt[ve]*Me}function Kt(ve){return!(ve&ve-1)&&!!ve}function ln(ve,Me,at){var Rt,Mt=Me.width,Zt=Me.height,Bt=Me.channels;z(Mt>0&&Mt<=at.maxTextureSize&&Zt>0&&Zt<=at.maxTextureSize,"invalid texture shape"),(ve.wrapS!==Ut||ve.wrapT!==Ut)&&z(Kt(Mt)&&Kt(Zt),"incompatible wrap mode for texture, both width and height must be power of 2"),Me.mipmask===1?Mt!==1&&Zt!==1&&z(ve.minFilter!==nt&&ve.minFilter!==ze&&ve.minFilter!==$t&&ve.minFilter!==ue,"min filter requires mipmap"):(z(Kt(Mt)&&Kt(Zt),"texture must be a square power of 2 to support mipmapping"),z(Me.mipmask===(Mt<<1)-1,"missing or incomplete mipmap data")),Me.type===Qt&&(at.extensions.indexOf("oes_texture_float_linear")<0&&z(ve.minFilter===Jt&&ve.magFilter===Jt,"filter not supported, must enable oes_texture_float_linear"),z(!ve.genMipmaps,"mipmap generation not supported with float textures"));var mn=Me.images;for(Rt=0;Rt<16;++Rt)if(mn[Rt]){var Wn=Mt>>Rt,Rn=Zt>>Rt;z(Me.mipmask&1<<Rt,"missing mipmap data");var Nn=mn[Rt];if(z(Nn.width===Wn&&Nn.height===Rn,"invalid shape for mip images"),z(Nn.format===Me.format&&Nn.internalformat===Me.internalformat&&Nn.type===Me.type,"incompatible type for mip image"),!Nn.compressed)if(Nn.data){var Pn=Math.ceil(_t(Nn.type,Bt)*Wn/Nn.unpackAlignment)*Nn.unpackAlignment;z(Nn.data.byteLength===Pn*Rn,"invalid data for image, buffer size is inconsistent with image format")}else Nn.element||Nn.copy}else ve.genMipmaps||z((Me.mipmask&1<<Rt)==0,"extra mipmap data");Me.compressed&&z(!ve.genMipmaps,"mipmap generation for compressed images not supported")}function bt(ve,Me,at,Rt){var Mt=ve.width,Zt=ve.height,Bt=ve.channels;z(Mt>0&&Mt<=Rt.maxTextureSize&&Zt>0&&Zt<=Rt.maxTextureSize,"invalid texture shape"),z(Mt===Zt,"cube map must be square"),z(Me.wrapS===Ut&&Me.wrapT===Ut,"wrap mode not supported by cube map");for(var mn=0;mn<at.length;++mn){var Wn=at[mn];z(Wn.width===Mt&&Wn.height===Zt,"inconsistent cube map face shape"),Me.genMipmaps&&(z(!Wn.compressed,"can not generate mipmap for compressed textures"),z(Wn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Rn=Wn.images,Nn=0;Nn<16;++Nn){var Pn=Rn[Nn];if(Pn){var nr=Mt>>Nn,Yn=Zt>>Nn;z(Wn.mipmask&1<<Nn,"missing mipmap data"),z(Pn.width===nr&&Pn.height===Yn,"invalid shape for mip images"),z(Pn.format===ve.format&&Pn.internalformat===ve.internalformat&&Pn.type===ve.type,"incompatible type for mip image"),Pn.compressed||(Pn.data?z(Pn.data.byteLength===nr*Yn*Math.max(_t(Pn.type,Bt),Pn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Pn.element||Pn.copy)}}}}var A=C(z,{optional:Ot,raise:N,commandRaise:Ae,command:ot,parameter:q,commandParameter:k,constructor:ce,type:X,commandType:Xe,isTypedArray:W,nni:ne,oneOf:ie,shaderError:j,linkError:ke,callSite:ge,saveCommandRef:Je,saveDrawInfo:Pe,framebufferFormat:lt,guessCommand:Q,texture2D:ln,textureCube:bt}),Jn=0,Mn=0,sr=5,ir=6;function Ie(ve,Me){this.id=Jn++,this.type=ve,this.data=Me}function pe(ve){return ve.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Qe(ve){if(ve.length===0)return[];var Me=ve.charAt(0),at=ve.charAt(ve.length-1);if(ve.length>1&&Me===at&&(Me==='"'||Me==="'"))return['"'+pe(ve.substr(1,ve.length-2))+'"'];var Rt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ve);if(Rt)return Qe(ve.substr(0,Rt.index)).concat(Qe(Rt[1])).concat(Qe(ve.substr(Rt.index+Rt[0].length)));var Mt=ve.split(".");if(Mt.length===1)return['"'+pe(ve)+'"'];for(var Zt=[],Bt=0;Bt<Mt.length;++Bt)Zt=Zt.concat(Qe(Mt[Bt]));return Zt}function cn(ve){return"["+Qe(ve).join("][")+"]"}function En(ve,Me){return new Ie(ve,cn(Me+""))}function lr(ve){return typeof ve=="function"&&!ve._reglType||ve instanceof Ie}function gi(ve,Me){if(typeof ve=="function")return new Ie(Mn,ve);if(typeof ve=="number"||typeof ve=="boolean")return new Ie(sr,ve);if(Array.isArray(ve))return new Ie(ir,ve.map(function(at,Rt){return gi(at,Me+"["+Rt+"]")}));if(ve instanceof Ie)return ve;A(!1,"invalid option type in uniform "+Me)}var cr={DynamicVariable:Ie,define:En,isDynamic:lr,unbox:gi,accessor:cn},wr={next:typeof requestAnimationFrame=="function"?function(ve){return requestAnimationFrame(ve)}:function(ve){return setTimeout(ve,16)},cancel:typeof cancelAnimationFrame=="function"?function(ve){return cancelAnimationFrame(ve)}:clearTimeout},pr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Sr(){var ve={"":0},Me=[""];return{id:function(Rt){var Mt=ve[Rt];return Mt||(Mt=ve[Rt]=Me.length,Me.push(Rt),Mt)},str:function(Rt){return Me[Rt]}}}function Qr(ve,Me,at){var Rt=document.createElement("canvas");C(Rt.style,{border:0,margin:0,padding:0,top:0,left:0}),ve.appendChild(Rt),ve===document.body&&(Rt.style.position="absolute",C(ve.style,{margin:0,padding:0}));function Mt(){var mn=window.innerWidth,Wn=window.innerHeight;if(ve!==document.body){var Rn=ve.getBoundingClientRect();mn=Rn.right-Rn.left,Wn=Rn.bottom-Rn.top}Rt.width=at*mn,Rt.height=at*Wn,C(Rt.style,{width:mn+"px",height:Wn+"px"})}var Zt;ve!==document.body&&typeof ResizeObserver=="function"?(Zt=new ResizeObserver(function(){setTimeout(Mt)}),Zt.observe(ve)):window.addEventListener("resize",Mt,!1);function Bt(){Zt?Zt.disconnect():window.removeEventListener("resize",Mt),ve.removeChild(Rt)}return Mt(),{canvas:Rt,onDestroy:Bt}}function ya(ve,Me){function at(Rt){try{return ve.getContext(Rt,Me)}catch(Mt){return null}}return at("webgl")||at("experimental-webgl")||at("webgl-experimental")}function Ki(ve){return typeof ve.nodeName=="string"&&typeof ve.appendChild=="function"&&typeof ve.getBoundingClientRect=="function"}function vs(ve){return typeof ve.drawArrays=="function"||typeof ve.drawElements=="function"}function tu(ve){return typeof ve=="string"?ve.split():(A(Array.isArray(ve),"invalid extension array"),ve)}function Wa(ve){return typeof ve=="string"?(A(typeof document!="undefined","not supported outside of DOM"),document.querySelector(ve)):ve}function Ka(ve){var Me=ve||{},at,Rt,Mt,Zt,Bt={},mn=[],Wn=[],Rn=typeof window=="undefined"?1:window.devicePixelRatio,Nn=!1,Pn=function(zt){zt&&A.raise(zt)},nr=function(){};if(typeof Me=="string"?(A(typeof document!="undefined","selector queries only supported in DOM enviroments"),at=document.querySelector(Me),A(at,"invalid query string for element")):typeof Me=="object"?Ki(Me)?at=Me:vs(Me)?(Zt=Me,Mt=Zt.canvas):(A.constructor(Me),"gl"in Me?Zt=Me.gl:"canvas"in Me?Mt=Wa(Me.canvas):"container"in Me&&(Rt=Wa(Me.container)),"attributes"in Me&&(Bt=Me.attributes,A.type(Bt,"object","invalid context attributes")),"extensions"in Me&&(mn=tu(Me.extensions)),"optionalExtensions"in Me&&(Wn=tu(Me.optionalExtensions)),"onDone"in Me&&(A.type(Me.onDone,"function","invalid or missing onDone callback"),Pn=Me.onDone),"profile"in Me&&(Nn=!!Me.profile),"pixelRatio"in Me&&(Rn=+Me.pixelRatio,A(Rn>0,"invalid pixel ratio"))):A.raise("invalid arguments to regl"),at&&(at.nodeName.toLowerCase()==="canvas"?Mt=at:Rt=at),!Zt){if(!Mt){A(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Yn=Qr(Rt||document.body,Pn,Rn);if(!Yn)return null;Mt=Yn.canvas,nr=Yn.onDestroy}Bt.premultipliedAlpha===void 0&&(Bt.premultipliedAlpha=!0),Zt=ya(Mt,Bt)}return Zt?{gl:Zt,canvas:Mt,container:Rt,extensions:mn,optionalExtensions:Wn,pixelRatio:Rn,profile:Nn,onDone:Pn,onDestroy:nr}:(nr(),Pn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Ya(ve,Me){var at={};function Rt(Bt){A.type(Bt,"string","extension name must be string");var mn=Bt.toLowerCase(),Wn;try{Wn=at[mn]=ve.getExtension(mn)}catch(Rn){}return!!Wn}for(var Mt=0;Mt<Me.extensions.length;++Mt){var Zt=Me.extensions[Mt];if(!Rt(Zt))return Me.onDestroy(),Me.onDone('"'+Zt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Me.optionalExtensions.forEach(Rt),{extensions:at,restore:function(){Object.keys(at).forEach(function(mn){if(at[mn]&&!Rt(mn))throw new Error("(regl): error restoring extension "+mn)})}}}function Fi(ve,Me){for(var at=Array(ve),Rt=0;Rt<ve;++Rt)at[Rt]=Me(Rt);return at}var _a=5120,Pa=5121,Ti=5122,nu=5123,Ko=5124,Yr=5125,ba=5126;function gs(ve){for(var Me=16;Me<=1<<28;Me*=16)if(ve<=Me)return Me;return 0}function ra(ve){var Me,at;return Me=(ve>65535)<<4,ve>>>=Me,at=(ve>255)<<3,ve>>>=at,Me|=at,at=(ve>15)<<2,ve>>>=at,Me|=at,at=(ve>3)<<1,ve>>>=at,Me|=at,Me|ve>>1}function $a(){var ve=Fi(8,function(){return[]});function Me(Zt){var Bt=gs(Zt),mn=ve[ra(Bt)>>2];return mn.length>0?mn.pop():new ArrayBuffer(Bt)}function at(Zt){ve[ra(Zt.byteLength)>>2].push(Zt)}function Rt(Zt,Bt){var mn=null;switch(Zt){case _a:mn=new Int8Array(Me(Bt),0,Bt);break;case Pa:mn=new Uint8Array(Me(Bt),0,Bt);break;case Ti:mn=new Int16Array(Me(2*Bt),0,Bt);break;case nu:mn=new Uint16Array(Me(2*Bt),0,Bt);break;case Ko:mn=new Int32Array(Me(4*Bt),0,Bt);break;case Yr:mn=new Uint32Array(Me(4*Bt),0,Bt);break;case ba:mn=new Float32Array(Me(4*Bt),0,Bt);break;default:return null}return mn.length!==Bt?mn.subarray(0,Bt):mn}function Mt(Zt){at(Zt.buffer)}return{alloc:Me,free:at,allocType:Rt,freeType:Mt}}var ha=$a();ha.zero=$a();var ka=3408,Ro=3410,So=3411,ho=3412,ps=3413,ru=3414,Ol=3415,No=33901,Sl=33902,Du=3379,Iu=3386,iu=34921,Ru=36347,Nu=36348,au=35661,ou=35660,su=34930,Yt=36349,gn=34076,qn=34024,tr=7936,kr=7937,Fa=7938,ci=35724,fi=34047,Rr=36063,di=34852,Br=3553,Za=34067,Yo=34069,Bf=33984,Lo=6408,Fs=5126,Lu=5121,uu=36160,nc=36053,Qc=36064,rc=16384,Zo=function(Me,at){var Rt=1;at.ext_texture_filter_anisotropic&&(Rt=Me.getParameter(fi));var Mt=1,Zt=1;at.webgl_draw_buffers&&(Mt=Me.getParameter(di),Zt=Me.getParameter(Rr));var Bt=!!at.oes_texture_float;if(Bt){var mn=Me.createTexture();Me.bindTexture(Br,mn),Me.texImage2D(Br,0,Lo,1,1,0,Lo,Fs,null);var Wn=Me.createFramebuffer();if(Me.bindFramebuffer(uu,Wn),Me.framebufferTexture2D(uu,Qc,Br,mn,0),Me.bindTexture(Br,null),Me.checkFramebufferStatus(uu)!==nc)Bt=!1;else{Me.viewport(0,0,1,1),Me.clearColor(1,0,0,1),Me.clear(rc);var Rn=ha.allocType(Fs,4);Me.readPixels(0,0,1,1,Lo,Fs,Rn),Me.getError()?Bt=!1:(Me.deleteFramebuffer(Wn),Me.deleteTexture(mn),Bt=Rn[0]===1),ha.freeType(Rn)}}var Nn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Pn=!0;if(!Nn){var nr=Me.createTexture(),Yn=ha.allocType(Lu,36);Me.activeTexture(Bf),Me.bindTexture(Za,nr),Me.texImage2D(Yo,0,Lo,3,3,0,Lo,Lu,Yn),ha.freeType(Yn),Me.bindTexture(Za,null),Me.deleteTexture(nr),Pn=!Me.getError()}return{colorBits:[Me.getParameter(Ro),Me.getParameter(So),Me.getParameter(ho),Me.getParameter(ps)],depthBits:Me.getParameter(ru),stencilBits:Me.getParameter(Ol),subpixelBits:Me.getParameter(ka),extensions:Object.keys(at).filter(function(Bn){return!!at[Bn]}),maxAnisotropic:Rt,maxDrawbuffers:Mt,maxColorAttachments:Zt,pointSizeDims:Me.getParameter(No),lineWidthDims:Me.getParameter(Sl),maxViewportDims:Me.getParameter(Iu),maxCombinedTextureUnits:Me.getParameter(au),maxCubeMapSize:Me.getParameter(gn),maxRenderbufferSize:Me.getParameter(qn),maxTextureUnits:Me.getParameter(su),maxTextureSize:Me.getParameter(Du),maxAttributes:Me.getParameter(iu),maxVertexUniforms:Me.getParameter(Ru),maxVertexTextureUnits:Me.getParameter(ou),maxVaryingVectors:Me.getParameter(Nu),maxFragmentUniforms:Me.getParameter(Yt),glsl:Me.getParameter(ci),renderer:Me.getParameter(kr),vendor:Me.getParameter(tr),version:Me.getParameter(Fa),readFloat:Bt,npotTextureCube:Pn}};function jo(ve){return!!ve&&typeof ve=="object"&&Array.isArray(ve.shape)&&Array.isArray(ve.stride)&&typeof ve.offset=="number"&&ve.shape.length===ve.stride.length&&(Array.isArray(ve.data)||B(ve.data))}var ua=function(Me){return Object.keys(Me).map(function(at){return Me[at]})},ju={shape:lu,flatten:qc};function _u(ve,Me,at){for(var Rt=0;Rt<Me;++Rt)at[Rt]=ve[Rt]}function Bs(ve,Me,at,Rt){for(var Mt=0,Zt=0;Zt<Me;++Zt)for(var Bt=ve[Zt],mn=0;mn<at;++mn)Rt[Mt++]=Bt[mn]}function Ss(ve,Me,at,Rt,Mt,Zt){for(var Bt=Zt,mn=0;mn<Me;++mn)for(var Wn=ve[mn],Rn=0;Rn<at;++Rn)for(var Nn=Wn[Rn],Pn=0;Pn<Rt;++Pn)Mt[Bt++]=Nn[Pn]}function Ml(ve,Me,at,Rt,Mt){for(var Zt=1,Bt=at+1;Bt<Me.length;++Bt)Zt*=Me[Bt];var mn=Me[at];if(Me.length-at==4){var Wn=Me[at+1],Rn=Me[at+2],Nn=Me[at+3];for(Bt=0;Bt<mn;++Bt)Ss(ve[Bt],Wn,Rn,Nn,Rt,Mt),Mt+=Zt}else for(Bt=0;Bt<mn;++Bt)Ml(ve[Bt],Me,at+1,Rt,Mt),Mt+=Zt}function qc(ve,Me,at,Rt){var Mt=1;if(Me.length)for(var Zt=0;Zt<Me.length;++Zt)Mt*=Me[Zt];else Mt=0;var Bt=Rt||ha.allocType(at,Mt);switch(Me.length){case 0:break;case 1:_u(ve,Me[0],Bt);break;case 2:Bs(ve,Me[0],Me[1],Bt);break;case 3:Ss(ve,Me[0],Me[1],Me[2],Bt,0);break;default:Ml(ve,Me,0,Bt,0)}return Bt}function lu(ve){for(var Me=[],at=ve;at.length;at=at[0])Me.push(at.length);return Me}var Zu={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Al=5120,ic=5122,ac=5124,ef=5121,ms=5123,tf=5125,Fu=5126,Tl=5126,Gs={int8:Al,int16:ic,int32:ac,uint8:ef,uint16:ms,uint32:tf,float:Fu,float32:Tl},Pl=35048,Gf=35040,kl={dynamic:Pl,stream:Gf,static:35044},oc=ju.flatten,nf=ju.shape,rf=35044,ta=35040,$i=5121,Ju=5126,Jo=[];Jo[5120]=1,Jo[5122]=2,Jo[5124]=4,Jo[5121]=1,Jo[5123]=2,Jo[5125]=4,Jo[5126]=4;function cu(ve){return Zu[Object.prototype.toString.call(ve)]|0}function Qu(ve,Me){for(var at=0;at<Me.length;++at)ve[at]=Me[at]}function Dl(ve,Me,at,Rt,Mt,Zt,Bt){for(var mn=0,Wn=0;Wn<at;++Wn)for(var Rn=0;Rn<Rt;++Rn)ve[mn++]=Me[Mt*Wn+Zt*Rn+Bt]}function zf(ve,Me,at,Rt){var Mt=0,Zt={};function Bt(zt){this.id=Mt++,this.buffer=ve.createBuffer(),this.type=zt,this.usage=rf,this.byteLength=0,this.dimension=1,this.dtype=$i,this.persistentData=null,at.profile&&(this.stats={size:0})}Bt.prototype.bind=function(){ve.bindBuffer(this.type,this.buffer)},Bt.prototype.destroy=function(){nr(this)};var mn=[];function Wn(zt,Ft){var Ln=mn.pop();return Ln||(Ln=new Bt(zt)),Ln.bind(),Pn(Ln,Ft,ta,0,1,!1),Ln}function Rn(zt){mn.push(zt)}function Nn(zt,Ft,Ln){zt.byteLength=Ft.byteLength,ve.bufferData(zt.type,Ft,Ln)}function Pn(zt,Ft,Ln,ar,rn,hr){var yn;if(zt.usage=Ln,Array.isArray(Ft)){if(zt.dtype=ar||Ju,Ft.length>0){var wn;if(Array.isArray(Ft[0])){yn=nf(Ft);for(var On=1,_n=1;_n<yn.length;++_n)On*=yn[_n];zt.dimension=On,wn=oc(Ft,yn,zt.dtype),Nn(zt,wn,Ln),hr?zt.persistentData=wn:ha.freeType(wn)}else if(typeof Ft[0]=="number"){zt.dimension=rn;var br=ha.allocType(zt.dtype,Ft.length);Qu(br,Ft),Nn(zt,br,Ln),hr?zt.persistentData=br:ha.freeType(br)}else B(Ft[0])?(zt.dimension=Ft[0].length,zt.dtype=ar||cu(Ft[0])||Ju,wn=oc(Ft,[Ft.length,Ft[0].length],zt.dtype),Nn(zt,wn,Ln),hr?zt.persistentData=wn:ha.freeType(wn)):A.raise("invalid buffer data")}}else if(B(Ft))zt.dtype=ar||cu(Ft),zt.dimension=rn,Nn(zt,Ft,Ln),hr&&(zt.persistentData=new Uint8Array(new Uint8Array(Ft.buffer)));else if(jo(Ft)){yn=Ft.shape;var Gr=Ft.stride,Zn=Ft.offset,zn=0,hn=0,Nr=0,ai=0;yn.length===1?(zn=yn[0],hn=1,Nr=Gr[0],ai=0):yn.length===2?(zn=yn[0],hn=yn[1],Nr=Gr[0],ai=Gr[1]):A.raise("invalid shape"),zt.dtype=ar||cu(Ft.data)||Ju,zt.dimension=hn;var dr=ha.allocType(zt.dtype,zn*hn);Dl(dr,Ft.data,zn,hn,Nr,ai,Zn),Nn(zt,dr,Ln),hr?zt.persistentData=dr:ha.freeType(dr)}else Ft instanceof ArrayBuffer?(zt.dtype=$i,zt.dimension=rn,Nn(zt,Ft,Ln),hr&&(zt.persistentData=new Uint8Array(new Uint8Array(Ft)))):A.raise("invalid buffer data")}function nr(zt){Me.bufferCount--,Rt(zt);var Ft=zt.buffer;A(Ft,"buffer must not be deleted already"),ve.deleteBuffer(Ft),zt.buffer=null,delete Zt[zt.id]}function Yn(zt,Ft,Ln,ar){Me.bufferCount++;var rn=new Bt(Ft);Zt[rn.id]=rn;function hr(On){var _n=rf,br=null,Gr=0,Zn=0,zn=1;return Array.isArray(On)||B(On)||jo(On)||On instanceof ArrayBuffer?br=On:typeof On=="number"?Gr=On|0:On&&(A.type(On,"object","buffer arguments must be an object, a number or an array"),"data"in On&&(A(br===null||Array.isArray(br)||B(br)||jo(br),"invalid data for buffer"),br=On.data),"usage"in On&&(A.parameter(On.usage,kl,"invalid buffer usage"),_n=kl[On.usage]),"type"in On&&(A.parameter(On.type,Gs,"invalid buffer type"),Zn=Gs[On.type]),"dimension"in On&&(A.type(On.dimension,"number","invalid dimension"),zn=On.dimension|0),"length"in On&&(A.nni(Gr,"buffer length must be a nonnegative integer"),Gr=On.length|0)),rn.bind(),br?Pn(rn,br,_n,Zn,zn,ar):(Gr&&ve.bufferData(rn.type,Gr,_n),rn.dtype=Zn||$i,rn.usage=_n,rn.dimension=zn,rn.byteLength=Gr),at.profile&&(rn.stats.size=rn.byteLength*Jo[rn.dtype]),hr}function yn(On,_n){A(_n+On.byteLength<=rn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+On.byteLength+" starting from offset "+_n+" to a buffer of size "+rn.byteLength),ve.bufferSubData(rn.type,_n,On)}function wn(On,_n){var br=(_n||0)|0,Gr;if(rn.bind(),B(On)||On instanceof ArrayBuffer)yn(On,br);else if(Array.isArray(On)){if(On.length>0)if(typeof On[0]=="number"){var Zn=ha.allocType(rn.dtype,On.length);Qu(Zn,On),yn(Zn,br),ha.freeType(Zn)}else if(Array.isArray(On[0])||B(On[0])){Gr=nf(On);var zn=oc(On,Gr,rn.dtype);yn(zn,br),ha.freeType(zn)}else A.raise("invalid buffer data")}else if(jo(On)){Gr=On.shape;var hn=On.stride,Nr=0,ai=0,dr=0,si=0;Gr.length===1?(Nr=Gr[0],ai=1,dr=hn[0],si=0):Gr.length===2?(Nr=Gr[0],ai=Gr[1],dr=hn[0],si=hn[1]):A.raise("invalid shape");var zr=Array.isArray(On.data)?rn.dtype:cu(On.data),oi=ha.allocType(zr,Nr*ai);Dl(oi,On.data,Nr,ai,dr,si,On.offset),yn(oi,br),ha.freeType(oi)}else A.raise("invalid data for buffer subdata");return hr}return Ln||hr(zt),hr._reglType="buffer",hr._buffer=rn,hr.subdata=wn,at.profile&&(hr.stats=rn.stats),hr.destroy=function(){nr(rn)},hr}function Bn(){ua(Zt).forEach(function(zt){zt.buffer=ve.createBuffer(),ve.bindBuffer(zt.type,zt.buffer),ve.bufferData(zt.type,zt.persistentData||zt.byteLength,zt.usage)})}return at.profile&&(Me.getTotalBufferSize=function(){var zt=0;return Object.keys(Zt).forEach(function(Ft){zt+=Zt[Ft].stats.size}),zt}),{create:Yn,createStream:Wn,destroyStream:Rn,clear:function(){ua(Zt).forEach(nr),mn.forEach(nr)},getBuffer:function(Ft){return Ft&&Ft._buffer instanceof Bt?Ft._buffer:null},restore:Bn,_initBuffer:Pn}}var zs=0,sc=0,Aa=1,Il=1,fu=4,Us=4,Vs={points:zs,point:sc,lines:Aa,line:Il,triangles:fu,triangle:Us,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},vo=0,U=1,S=4,G=5120,V=5121,ae=5122,me=5123,ye=5124,Fe=5125,rt=34963,pt=35040,Xt=35044;function fn(ve,Me,at,Rt){var Mt={},Zt=0,Bt={uint8:V,uint16:me};Me.oes_element_index_uint&&(Bt.uint32=Fe);function mn(Bn){this.id=Zt++,Mt[this.id]=this,this.buffer=Bn,this.primType=S,this.vertCount=0,this.type=0}mn.prototype.bind=function(){this.buffer.bind()};var Wn=[];function Rn(Bn){var zt=Wn.pop();return zt||(zt=new mn(at.create(null,rt,!0,!1)._buffer)),Pn(zt,Bn,pt,-1,-1,0,0),zt}function Nn(Bn){Wn.push(Bn)}function Pn(Bn,zt,Ft,Ln,ar,rn,hr){Bn.buffer.bind();var yn;if(zt){var wn=hr;!hr&&(!B(zt)||jo(zt)&&!B(zt.data))&&(wn=Me.oes_element_index_uint?Fe:me),at._initBuffer(Bn.buffer,zt,Ft,wn,3)}else ve.bufferData(rt,rn,Ft),Bn.buffer.dtype=yn||V,Bn.buffer.usage=Ft,Bn.buffer.dimension=3,Bn.buffer.byteLength=rn;if(yn=hr,!hr){switch(Bn.buffer.dtype){case V:case G:yn=V;break;case me:case ae:yn=me;break;case Fe:case ye:yn=Fe;break;default:A.raise("unsupported type for element array")}Bn.buffer.dtype=yn}Bn.type=yn,A(yn!==Fe||!!Me.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var On=ar;On<0&&(On=Bn.buffer.byteLength,yn===me?On>>=1:yn===Fe&&(On>>=2)),Bn.vertCount=On;var _n=Ln;if(Ln<0){_n=S;var br=Bn.buffer.dimension;br===1&&(_n=vo),br===2&&(_n=U),br===3&&(_n=S)}Bn.primType=_n}function nr(Bn){Rt.elementsCount--,A(Bn.buffer!==null,"must not double destroy elements"),delete Mt[Bn.id],Bn.buffer.destroy(),Bn.buffer=null}function Yn(Bn,zt){var Ft=at.create(null,rt,!0),Ln=new mn(Ft._buffer);Rt.elementsCount++;function ar(rn){if(!rn)Ft(),Ln.primType=S,Ln.vertCount=0,Ln.type=V;else if(typeof rn=="number")Ft(rn),Ln.primType=S,Ln.vertCount=rn|0,Ln.type=V;else{var hr=null,yn=Xt,wn=-1,On=-1,_n=0,br=0;Array.isArray(rn)||B(rn)||jo(rn)?hr=rn:(A.type(rn,"object","invalid arguments for elements"),"data"in rn&&(hr=rn.data,A(Array.isArray(hr)||B(hr)||jo(hr),"invalid data for element buffer")),"usage"in rn&&(A.parameter(rn.usage,kl,"invalid element buffer usage"),yn=kl[rn.usage]),"primitive"in rn&&(A.parameter(rn.primitive,Vs,"invalid element buffer primitive"),wn=Vs[rn.primitive]),"count"in rn&&(A(typeof rn.count=="number"&&rn.count>=0,"invalid vertex count for elements"),On=rn.count|0),"type"in rn&&(A.parameter(rn.type,Bt,"invalid buffer type"),br=Bt[rn.type]),"length"in rn?_n=rn.length|0:(_n=On,br===me||br===ae?_n*=2:(br===Fe||br===ye)&&(_n*=4))),Pn(Ln,hr,yn,wn,On,_n,br)}return ar}return ar(Bn),ar._reglType="elements",ar._elements=Ln,ar.subdata=function(rn,hr){return Ft.subdata(rn,hr),ar},ar.destroy=function(){nr(Ln)},ar}return{create:Yn,createStream:Rn,destroyStream:Nn,getElements:function(zt){return typeof zt=="function"&&zt._elements instanceof mn?zt._elements:null},clear:function(){ua(Mt).forEach(nr)}}}var Kn=new Float32Array(1),Wt=new Uint32Array(Kn.buffer),Dn=5123;function Fr(ve){for(var Me=ha.allocType(Dn,ve.length),at=0;at<ve.length;++at)if(isNaN(ve[at]))Me[at]=65535;else if(ve[at]===Infinity)Me[at]=31744;else if(ve[at]===-Infinity)Me[at]=64512;else{Kn[0]=ve[at];var Rt=Wt[0],Mt=Rt>>>31<<15,Zt=(Rt<<1>>>24)-127,Bt=Rt>>13&(1<<10)-1;if(Zt<-24)Me[at]=Mt;else if(Zt<-14){var mn=-14-Zt;Me[at]=Mt+(Bt+(1<<10)>>mn)}else Zt>15?Me[at]=Mt+31744:Me[at]=Mt+(Zt+15<<10)+Bt}return Me}function Cr(ve){return Array.isArray(ve)||B(ve)}var Ji=function(Me){return!(Me&Me-1)&&!!Me},go=34467,Ca=3553,ao=34067,Ba=34069,$r=6408,Qo=6406,Li=6407,ia=6409,aa=6410,qu=32854,Da=32855,Mo=36194,Hs=32819,Ws=32820,ys=33635,oo=34042,qo=6402,so=34041,Ja=35904,Bu=35906,es=36193,Ui=33776,$s=33777,_o=33778,Ms=33779,af=35986,Rl=35987,uc=34798,Ao=35840,Nl=35841,bs=35842,el=35843,y=36196,M=5121,K=5123,he=5125,Ce=5126,Re=10242,We=10243,Ye=10497,ht=33071,Ct=33648,Lt=10240,_e=10241,we=9728,Ue=9729,et=9984,Se=9985,De=9986,Ke=9987,kt=33170,Vt=4352,vn=4353,In=4354,xn=34046,Mr=3317,xr=37440,Er=37441,Tr=37443,yi=37444,Xr=33984,pi=[et,De,Se,Ke],jr=[0,ia,aa,Li,$r],Dr={};Dr[ia]=Dr[Qo]=Dr[qo]=1,Dr[so]=Dr[aa]=2,Dr[Li]=Dr[Ja]=3,Dr[$r]=Dr[Bu]=4;function va(ve){return"[object "+ve+"]"}var ts=va("HTMLCanvasElement"),Ll=va("OffscreenCanvas"),lc=va("CanvasRenderingContext2D"),Zh=va("ImageBitmap"),ag=va("HTMLImageElement"),of=va("HTMLVideoElement"),jl=Object.keys(Zu).concat([ts,Ll,lc,Zh,ag,of]),tl=[];tl[M]=1,tl[Ce]=4,tl[es]=2,tl[K]=2,tl[he]=4;var po=[];po[qu]=2,po[Da]=2,po[Mo]=2,po[so]=4,po[Ui]=.5,po[$s]=.5,po[_o]=1,po[Ms]=1,po[af]=.5,po[Rl]=1,po[uc]=1,po[Ao]=.5,po[Nl]=.25,po[bs]=.5,po[el]=.25,po[y]=.5;function _l(ve){return Array.isArray(ve)&&(ve.length===0||typeof ve[0]=="number")}function Jh(ve){if(!Array.isArray(ve))return!1;var Me=ve.length;return!(Me===0||!Cr(ve[0]))}function Fl(ve){return Object.prototype.toString.call(ve)}function Uf(ve){return Fl(ve)===ts}function Qh(ve){return Fl(ve)===Ll}function Vf(ve){return Fl(ve)===lc}function cc(ve){return Fl(ve)===Zh}function Ld(ve){return Fl(ve)===ag}function Wp(ve){return Fl(ve)===of}function jd(ve){if(!ve)return!1;var Me=Fl(ve);return jl.indexOf(Me)>=0?!0:_l(ve)||Jh(ve)||jo(ve)}function og(ve){return Zu[Object.prototype.toString.call(ve)]|0}function du(ve,Me){var at=Me.length;switch(ve.type){case M:case K:case he:case Ce:var Rt=ha.allocType(ve.type,at);Rt.set(Me),ve.data=Rt;break;case es:ve.data=Fr(Me);break;default:A.raise("unsupported texture type, must specify a typed array")}}function Hf(ve,Me){return ha.allocType(ve.type===es?Ce:ve.type,Me)}function fc(ve,Me){ve.type===es?(ve.data=Fr(Me),ha.freeType(Me)):ve.data=Me}function $p(ve,Me,at,Rt,Mt,Zt){for(var Bt=ve.width,mn=ve.height,Wn=ve.channels,Rn=Bt*mn*Wn,Nn=Hf(ve,Rn),Pn=0,nr=0;nr<mn;++nr)for(var Yn=0;Yn<Bt;++Yn)for(var Bn=0;Bn<Wn;++Bn)Nn[Pn++]=Me[at*Yn+Rt*nr+Mt*Bn+Zt];fc(ve,Nn)}function Wf(ve,Me,at,Rt,Mt,Zt){var Bt;if(typeof po[ve]!="undefined"?Bt=po[ve]:Bt=Dr[ve]*tl[Me],Zt&&(Bt*=6),Mt){for(var mn=0,Wn=at;Wn>=1;)mn+=Bt*Wn*Wn,Wn/=2;return mn}else return Bt*at*Rt}function Xp(ve,Me,at,Rt,Mt,Zt,Bt){var mn={"don't care":Vt,"dont care":Vt,nice:In,fast:vn},Wn={repeat:Ye,clamp:ht,mirror:Ct},Rn={nearest:we,linear:Ue},Nn=C({mipmap:Ke,"nearest mipmap nearest":et,"linear mipmap nearest":Se,"nearest mipmap linear":De,"linear mipmap linear":Ke},Rn),Pn={none:0,browser:yi},nr={uint8:M,rgba4:Hs,rgb565:ys,"rgb5 a1":Ws},Yn={alpha:Qo,luminance:ia,"luminance alpha":aa,rgb:Li,rgba:$r,rgba4:qu,"rgb5 a1":Da,rgb565:Mo},Bn={};Me.ext_srgb&&(Yn.srgb=Ja,Yn.srgba=Bu),Me.oes_texture_float&&(nr.float32=nr.float=Ce),Me.oes_texture_half_float&&(nr.float16=nr["half float"]=es),Me.webgl_depth_texture&&(C(Yn,{depth:qo,"depth stencil":so}),C(nr,{uint16:K,uint32:he,"depth stencil":oo})),Me.webgl_compressed_texture_s3tc&&C(Bn,{"rgb s3tc dxt1":Ui,"rgba s3tc dxt1":$s,"rgba s3tc dxt3":_o,"rgba s3tc dxt5":Ms}),Me.webgl_compressed_texture_atc&&C(Bn,{"rgb atc":af,"rgba atc explicit alpha":Rl,"rgba atc interpolated alpha":uc}),Me.webgl_compressed_texture_pvrtc&&C(Bn,{"rgb pvrtc 4bppv1":Ao,"rgb pvrtc 2bppv1":Nl,"rgba pvrtc 4bppv1":bs,"rgba pvrtc 2bppv1":el}),Me.webgl_compressed_texture_etc1&&(Bn["rgb etc1"]=y);var zt=Array.prototype.slice.call(ve.getParameter(go));Object.keys(Bn).forEach(function(Ze){var Ht=Bn[Ze];zt.indexOf(Ht)>=0&&(Yn[Ze]=Ht)});var Ft=Object.keys(Yn);at.textureFormats=Ft;var Ln=[];Object.keys(Yn).forEach(function(Ze){var Ht=Yn[Ze];Ln[Ht]=Ze});var ar=[];Object.keys(nr).forEach(function(Ze){var Ht=nr[Ze];ar[Ht]=Ze});var rn=[];Object.keys(Rn).forEach(function(Ze){var Ht=Rn[Ze];rn[Ht]=Ze});var hr=[];Object.keys(Nn).forEach(function(Ze){var Ht=Nn[Ze];hr[Ht]=Ze});var yn=[];Object.keys(Wn).forEach(function(Ze){var Ht=Wn[Ze];yn[Ht]=Ze});var wn=Ft.reduce(function(Ze,Ht){var Nt=Yn[Ht];return Nt===ia||Nt===Qo||Nt===ia||Nt===aa||Nt===qo||Nt===so||Me.ext_srgb&&(Nt===Ja||Nt===Bu)?Ze[Nt]=Nt:Nt===Da||Ht.indexOf("rgba")>=0?Ze[Nt]=$r:Ze[Nt]=Li,Ze},{});function On(){this.internalformat=$r,this.format=$r,this.type=M,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=yi,this.width=0,this.height=0,this.channels=0}function _n(Ze,Ht){Ze.internalformat=Ht.internalformat,Ze.format=Ht.format,Ze.type=Ht.type,Ze.compressed=Ht.compressed,Ze.premultiplyAlpha=Ht.premultiplyAlpha,Ze.flipY=Ht.flipY,Ze.unpackAlignment=Ht.unpackAlignment,Ze.colorSpace=Ht.colorSpace,Ze.width=Ht.width,Ze.height=Ht.height,Ze.channels=Ht.channels}function br(Ze,Ht){if(!(typeof Ht!="object"||!Ht)){if("premultiplyAlpha"in Ht&&(A.type(Ht.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Ze.premultiplyAlpha=Ht.premultiplyAlpha),"flipY"in Ht&&(A.type(Ht.flipY,"boolean","invalid texture flip"),Ze.flipY=Ht.flipY),"alignment"in Ht&&(A.oneOf(Ht.alignment,[1,2,4,8],"invalid texture unpack alignment"),Ze.unpackAlignment=Ht.alignment),"colorSpace"in Ht&&(A.parameter(Ht.colorSpace,Pn,"invalid colorSpace"),Ze.colorSpace=Pn[Ht.colorSpace]),"type"in Ht){var Nt=Ht.type;A(Me.oes_texture_float||!(Nt==="float"||Nt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),A(Me.oes_texture_half_float||!(Nt==="half float"||Nt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),A(Me.webgl_depth_texture||!(Nt==="uint16"||Nt==="uint32"||Nt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),A.parameter(Nt,nr,"invalid texture type"),Ze.type=nr[Nt]}var ur=Ze.width,ti=Ze.height,Ve=Ze.channels,Ne=!1;"shape"in Ht?(A(Array.isArray(Ht.shape)&&Ht.shape.length>=2,"shape must be an array"),ur=Ht.shape[0],ti=Ht.shape[1],Ht.shape.length===3&&(Ve=Ht.shape[2],A(Ve>0&&Ve<=4,"invalid number of channels"),Ne=!0),A(ur>=0&&ur<=at.maxTextureSize,"invalid width"),A(ti>=0&&ti<=at.maxTextureSize,"invalid height")):("radius"in Ht&&(ur=ti=Ht.radius,A(ur>=0&&ur<=at.maxTextureSize,"invalid radius")),"width"in Ht&&(ur=Ht.width,A(ur>=0&&ur<=at.maxTextureSize,"invalid width")),"height"in Ht&&(ti=Ht.height,A(ti>=0&&ti<=at.maxTextureSize,"invalid height")),"channels"in Ht&&(Ve=Ht.channels,A(Ve>0&&Ve<=4,"invalid number of channels"),Ne=!0)),Ze.width=ur|0,Ze.height=ti|0,Ze.channels=Ve|0;var ct=!1;if("format"in Ht){var St=Ht.format;A(Me.webgl_depth_texture||!(St==="depth"||St==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),A.parameter(St,Yn,"invalid texture format");var Tt=Ze.internalformat=Yn[St];Ze.format=wn[Tt],St in nr&&("type"in Ht||(Ze.type=nr[St])),St in Bn&&(Ze.compressed=!0),ct=!0}!Ne&&ct?Ze.channels=Dr[Ze.format]:Ne&&!ct?Ze.channels!==jr[Ze.format]&&(Ze.format=Ze.internalformat=jr[Ze.channels]):ct&&Ne&&A(Ze.channels===Dr[Ze.format],"number of channels inconsistent with specified format")}}function Gr(Ze){ve.pixelStorei(xr,Ze.flipY),ve.pixelStorei(Er,Ze.premultiplyAlpha),ve.pixelStorei(Tr,Ze.colorSpace),ve.pixelStorei(Mr,Ze.unpackAlignment)}function Zn(){On.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function zn(Ze,Ht){var Nt=null;if(jd(Ht)?Nt=Ht:Ht&&(A.type(Ht,"object","invalid pixel data type"),br(Ze,Ht),"x"in Ht&&(Ze.xOffset=Ht.x|0),"y"in Ht&&(Ze.yOffset=Ht.y|0),jd(Ht.data)&&(Nt=Ht.data)),A(!Ze.compressed||Nt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Ht.copy){A(!Nt,"can not specify copy and data field for the same texture");var ur=Mt.viewportWidth,ti=Mt.viewportHeight;Ze.width=Ze.width||ur-Ze.xOffset,Ze.height=Ze.height||ti-Ze.yOffset,Ze.needsCopy=!0,A(Ze.xOffset>=0&&Ze.xOffset<ur&&Ze.yOffset>=0&&Ze.yOffset<ti&&Ze.width>0&&Ze.width<=ur&&Ze.height>0&&Ze.height<=ti,"copy texture read out of bounds")}else if(!Nt)Ze.width=Ze.width||1,Ze.height=Ze.height||1,Ze.channels=Ze.channels||4;else if(B(Nt))Ze.channels=Ze.channels||4,Ze.data=Nt,!("type"in Ht)&&Ze.type===M&&(Ze.type=og(Nt));else if(_l(Nt))Ze.channels=Ze.channels||4,du(Ze,Nt),Ze.alignment=1,Ze.needsFree=!0;else if(jo(Nt)){var Ve=Nt.data;!Array.isArray(Ve)&&Ze.type===M&&(Ze.type=og(Ve));var Ne=Nt.shape,ct=Nt.stride,St,Tt,mt,ft,wt,He;Ne.length===3?(mt=Ne[2],He=ct[2]):(A(Ne.length===2,"invalid ndarray pixel data, must be 2 or 3D"),mt=1,He=1),St=Ne[0],Tt=Ne[1],ft=ct[0],wt=ct[1],Ze.alignment=1,Ze.width=St,Ze.height=Tt,Ze.channels=mt,Ze.format=Ze.internalformat=jr[mt],Ze.needsFree=!0,$p(Ze,Ve,ft,wt,He,Nt.offset)}else if(Uf(Nt)||Qh(Nt)||Vf(Nt))Uf(Nt)||Qh(Nt)?Ze.element=Nt:Ze.element=Nt.canvas,Ze.width=Ze.element.width,Ze.height=Ze.element.height,Ze.channels=4;else if(cc(Nt))Ze.element=Nt,Ze.width=Nt.width,Ze.height=Nt.height,Ze.channels=4;else if(Ld(Nt))Ze.element=Nt,Ze.width=Nt.naturalWidth,Ze.height=Nt.naturalHeight,Ze.channels=4;else if(Wp(Nt))Ze.element=Nt,Ze.width=Nt.videoWidth,Ze.height=Nt.videoHeight,Ze.channels=4;else if(Jh(Nt)){var ut=Ze.width||Nt[0].length,Be=Ze.height||Nt.length,Et=Ze.channels;Cr(Nt[0][0])?Et=Et||Nt[0][0].length:Et=Et||1;for(var Dt=ju.shape(Nt),on=1,un=0;un<Dt.length;++un)on*=Dt[un];var qt=Hf(Ze,on);ju.flatten(Nt,Dt,"",qt),fc(Ze,qt),Ze.alignment=1,Ze.width=ut,Ze.height=Be,Ze.channels=Et,Ze.format=Ze.internalformat=jr[Et],Ze.needsFree=!0}Ze.type===Ce?A(at.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Ze.type===es&&A(at.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function hn(Ze,Ht,Nt){var ur=Ze.element,ti=Ze.data,Ve=Ze.internalformat,Ne=Ze.format,ct=Ze.type,St=Ze.width,Tt=Ze.height;Gr(Ze),ur?ve.texImage2D(Ht,Nt,Ne,Ne,ct,ur):Ze.compressed?ve.compressedTexImage2D(Ht,Nt,Ve,St,Tt,0,ti):Ze.needsCopy?(Rt(),ve.copyTexImage2D(Ht,Nt,Ne,Ze.xOffset,Ze.yOffset,St,Tt,0)):ve.texImage2D(Ht,Nt,Ne,St,Tt,0,Ne,ct,ti||null)}function Nr(Ze,Ht,Nt,ur,ti){var Ve=Ze.element,Ne=Ze.data,ct=Ze.internalformat,St=Ze.format,Tt=Ze.type,mt=Ze.width,ft=Ze.height;Gr(Ze),Ve?ve.texSubImage2D(Ht,ti,Nt,ur,St,Tt,Ve):Ze.compressed?ve.compressedTexSubImage2D(Ht,ti,Nt,ur,ct,mt,ft,Ne):Ze.needsCopy?(Rt(),ve.copyTexSubImage2D(Ht,ti,Nt,ur,Ze.xOffset,Ze.yOffset,mt,ft)):ve.texSubImage2D(Ht,ti,Nt,ur,mt,ft,St,Tt,Ne)}var ai=[];function dr(){return ai.pop()||new Zn}function si(Ze){Ze.needsFree&&ha.freeType(Ze.data),Zn.call(Ze),ai.push(Ze)}function zr(){On.call(this),this.genMipmaps=!1,this.mipmapHint=Vt,this.mipmask=0,this.images=Array(16)}function oi(Ze,Ht,Nt){var ur=Ze.images[0]=dr();Ze.mipmask=1,ur.width=Ze.width=Ht,ur.height=Ze.height=Nt,ur.channels=Ze.channels=4}function Pi(Ze,Ht){var Nt=null;if(jd(Ht))Nt=Ze.images[0]=dr(),_n(Nt,Ze),zn(Nt,Ht),Ze.mipmask=1;else if(br(Ze,Ht),Array.isArray(Ht.mipmap))for(var ur=Ht.mipmap,ti=0;ti<ur.length;++ti)Nt=Ze.images[ti]=dr(),_n(Nt,Ze),Nt.width>>=ti,Nt.height>>=ti,zn(Nt,ur[ti]),Ze.mipmask|=1<<ti;else Nt=Ze.images[0]=dr(),_n(Nt,Ze),zn(Nt,Ht),Ze.mipmask=1;_n(Ze,Ze.images[0]),Ze.compressed&&(Ze.internalformat===Ui||Ze.internalformat===$s||Ze.internalformat===_o||Ze.internalformat===Ms)&&A(Ze.width%4==0&&Ze.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Ia(Ze,Ht){for(var Nt=Ze.images,ur=0;ur<Nt.length;++ur){if(!Nt[ur])return;hn(Nt[ur],Ht,ur)}}var Qa=[];function ui(){var Ze=Qa.pop()||new zr;On.call(Ze),Ze.mipmask=0;for(var Ht=0;Ht<16;++Ht)Ze.images[Ht]=null;return Ze}function za(Ze){for(var Ht=Ze.images,Nt=0;Nt<Ht.length;++Nt)Ht[Nt]&&si(Ht[Nt]),Ht[Nt]=null;Qa.push(Ze)}function la(){this.minFilter=we,this.magFilter=we,this.wrapS=ht,this.wrapT=ht,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Vt}function ca(Ze,Ht){if("min"in Ht){var Nt=Ht.min;A.parameter(Nt,Nn),Ze.minFilter=Nn[Nt],pi.indexOf(Ze.minFilter)>=0&&!("faces"in Ht)&&(Ze.genMipmaps=!0)}if("mag"in Ht){var ur=Ht.mag;A.parameter(ur,Rn),Ze.magFilter=Rn[ur]}var ti=Ze.wrapS,Ve=Ze.wrapT;if("wrap"in Ht){var Ne=Ht.wrap;typeof Ne=="string"?(A.parameter(Ne,Wn),ti=Ve=Wn[Ne]):Array.isArray(Ne)&&(A.parameter(Ne[0],Wn),A.parameter(Ne[1],Wn),ti=Wn[Ne[0]],Ve=Wn[Ne[1]])}else{if("wrapS"in Ht){var ct=Ht.wrapS;A.parameter(ct,Wn),ti=Wn[ct]}if("wrapT"in Ht){var St=Ht.wrapT;A.parameter(St,Wn),Ve=Wn[St]}}if(Ze.wrapS=ti,Ze.wrapT=Ve,"anisotropic"in Ht){var Tt=Ht.anisotropic;A(typeof Tt=="number"&&Tt>=1&&Tt<=at.maxAnisotropic,"aniso samples must be between 1 and "),Ze.anisotropic=Ht.anisotropic}if("mipmap"in Ht){var mt=!1;switch(typeof Ht.mipmap){case"string":A.parameter(Ht.mipmap,mn,"invalid mipmap hint"),Ze.mipmapHint=mn[Ht.mipmap],Ze.genMipmaps=!0,mt=!0;break;case"boolean":mt=Ze.genMipmaps=Ht.mipmap;break;case"object":A(Array.isArray(Ht.mipmap),"invalid mipmap type"),Ze.genMipmaps=!1,mt=!0;break;default:A.raise("invalid mipmap type")}mt&&!("min"in Ht)&&(Ze.minFilter=et)}}function Ra(Ze,Ht){ve.texParameteri(Ht,_e,Ze.minFilter),ve.texParameteri(Ht,Lt,Ze.magFilter),ve.texParameteri(Ht,Re,Ze.wrapS),ve.texParameteri(Ht,We,Ze.wrapT),Me.ext_texture_filter_anisotropic&&ve.texParameteri(Ht,xn,Ze.anisotropic),Ze.genMipmaps&&(ve.hint(kt,Ze.mipmapHint),ve.generateMipmap(Ht))}var Xa=0,pa={},Ea=at.maxTextureUnits,Ua=Array(Ea).map(function(){return null});function qr(Ze){On.call(this),this.mipmask=0,this.internalformat=$r,this.id=Xa++,this.refCount=1,this.target=Ze,this.texture=ve.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new la,Bt.profile&&(this.stats={size:0})}function Po(Ze){ve.activeTexture(Xr),ve.bindTexture(Ze.target,Ze.texture)}function Gi(){var Ze=Ua[0];Ze?ve.bindTexture(Ze.target,Ze.texture):ve.bindTexture(Ca,null)}function Ir(Ze){var Ht=Ze.texture;A(Ht,"must not double destroy texture");var Nt=Ze.unit,ur=Ze.target;Nt>=0&&(ve.activeTexture(Xr+Nt),ve.bindTexture(ur,null),Ua[Nt]=null),ve.deleteTexture(Ht),Ze.texture=null,Ze.params=null,Ze.pixels=null,Ze.refCount=0,delete pa[Ze.id],Zt.textureCount--}C(qr.prototype,{bind:function(){var Ht=this;Ht.bindCount+=1;var Nt=Ht.unit;if(Nt<0){for(var ur=0;ur<Ea;++ur){var ti=Ua[ur];if(ti){if(ti.bindCount>0)continue;ti.unit=-1}Ua[ur]=Ht,Nt=ur;break}Nt>=Ea&&A.raise("insufficient number of texture units"),Bt.profile&&Zt.maxTextureUnits<Nt+1&&(Zt.maxTextureUnits=Nt+1),Ht.unit=Nt,ve.activeTexture(Xr+Nt),ve.bindTexture(Ht.target,Ht.texture)}return Nt},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Ir(this)}});function ei(Ze,Ht){var Nt=new qr(Ca);pa[Nt.id]=Nt,Zt.textureCount++;function ur(Ne,ct){var St=Nt.texInfo;la.call(St);var Tt=ui();return typeof Ne=="number"?typeof ct=="number"?oi(Tt,Ne|0,ct|0):oi(Tt,Ne|0,Ne|0):Ne?(A.type(Ne,"object","invalid arguments to regl.texture"),ca(St,Ne),Pi(Tt,Ne)):oi(Tt,1,1),St.genMipmaps&&(Tt.mipmask=(Tt.width<<1)-1),Nt.mipmask=Tt.mipmask,_n(Nt,Tt),A.texture2D(St,Tt,at),Nt.internalformat=Tt.internalformat,ur.width=Tt.width,ur.height=Tt.height,Po(Nt),Ia(Tt,Ca),Ra(St,Ca),Gi(),za(Tt),Bt.profile&&(Nt.stats.size=Wf(Nt.internalformat,Nt.type,Tt.width,Tt.height,St.genMipmaps,!1)),ur.format=Ln[Nt.internalformat],ur.type=ar[Nt.type],ur.mag=rn[St.magFilter],ur.min=hr[St.minFilter],ur.wrapS=yn[St.wrapS],ur.wrapT=yn[St.wrapT],ur}function ti(Ne,ct,St,Tt){A(!!Ne,"must specify image data");var mt=ct|0,ft=St|0,wt=Tt|0,He=dr();return _n(He,Nt),He.width=0,He.height=0,zn(He,Ne),He.width=He.width||(Nt.width>>wt)-mt,He.height=He.height||(Nt.height>>wt)-ft,A(Nt.type===He.type&&Nt.format===He.format&&Nt.internalformat===He.internalformat,"incompatible format for texture.subimage"),A(mt>=0&&ft>=0&&mt+He.width<=Nt.width&&ft+He.height<=Nt.height,"texture.subimage write out of bounds"),A(Nt.mipmask&1<<wt,"missing mipmap data"),A(He.data||He.element||He.needsCopy,"missing image data"),Po(Nt),Nr(He,Ca,mt,ft,wt),Gi(),si(He),ur}function Ve(Ne,ct){var St=Ne|0,Tt=ct|0||St;if(St===Nt.width&&Tt===Nt.height)return ur;ur.width=Nt.width=St,ur.height=Nt.height=Tt,Po(Nt);for(var mt=0;Nt.mipmask>>mt;++mt){var ft=St>>mt,wt=Tt>>mt;if(!ft||!wt)break;ve.texImage2D(Ca,mt,Nt.format,ft,wt,0,Nt.format,Nt.type,null)}return Gi(),Bt.profile&&(Nt.stats.size=Wf(Nt.internalformat,Nt.type,St,Tt,!1,!1)),ur}return ur(Ze,Ht),ur.subimage=ti,ur.resize=Ve,ur._reglType="texture2d",ur._texture=Nt,Bt.profile&&(ur.stats=Nt.stats),ur.destroy=function(){Nt.decRef()},ur}function Ei(Ze,Ht,Nt,ur,ti,Ve){var Ne=new qr(ao);pa[Ne.id]=Ne,Zt.cubeCount++;var ct=new Array(6);function St(ft,wt,He,ut,Be,Et){var Dt,on=Ne.texInfo;for(la.call(on),Dt=0;Dt<6;++Dt)ct[Dt]=ui();if(typeof ft=="number"||!ft){var un=ft|0||1;for(Dt=0;Dt<6;++Dt)oi(ct[Dt],un,un)}else if(typeof ft=="object")if(wt)Pi(ct[0],ft),Pi(ct[1],wt),Pi(ct[2],He),Pi(ct[3],ut),Pi(ct[4],Be),Pi(ct[5],Et);else if(ca(on,ft),br(Ne,ft),"faces"in ft){var qt=ft.faces;for(A(Array.isArray(qt)&&qt.length===6,"cube faces must be a length 6 array"),Dt=0;Dt<6;++Dt)A(typeof qt[Dt]=="object"&&!!qt[Dt],"invalid input for cube map face"),_n(ct[Dt],Ne),Pi(ct[Dt],qt[Dt])}else for(Dt=0;Dt<6;++Dt)Pi(ct[Dt],ft);else A.raise("invalid arguments to cube map");for(_n(Ne,ct[0]),at.npotTextureCube||A(Ji(Ne.width)&&Ji(Ne.height),"your browser does not support non power or two texture dimensions"),on.genMipmaps?Ne.mipmask=(ct[0].width<<1)-1:Ne.mipmask=ct[0].mipmask,A.textureCube(Ne,on,ct,at),Ne.internalformat=ct[0].internalformat,St.width=ct[0].width,St.height=ct[0].height,Po(Ne),Dt=0;Dt<6;++Dt)Ia(ct[Dt],Ba+Dt);for(Ra(on,ao),Gi(),Bt.profile&&(Ne.stats.size=Wf(Ne.internalformat,Ne.type,St.width,St.height,on.genMipmaps,!0)),St.format=Ln[Ne.internalformat],St.type=ar[Ne.type],St.mag=rn[on.magFilter],St.min=hr[on.minFilter],St.wrapS=yn[on.wrapS],St.wrapT=yn[on.wrapT],Dt=0;Dt<6;++Dt)za(ct[Dt]);return St}function Tt(ft,wt,He,ut,Be){A(!!wt,"must specify image data"),A(typeof ft=="number"&&ft===(ft|0)&&ft>=0&&ft<6,"invalid face");var Et=He|0,Dt=ut|0,on=Be|0,un=dr();return _n(un,Ne),un.width=0,un.height=0,zn(un,wt),un.width=un.width||(Ne.width>>on)-Et,un.height=un.height||(Ne.height>>on)-Dt,A(Ne.type===un.type&&Ne.format===un.format&&Ne.internalformat===un.internalformat,"incompatible format for texture.subimage"),A(Et>=0&&Dt>=0&&Et+un.width<=Ne.width&&Dt+un.height<=Ne.height,"texture.subimage write out of bounds"),A(Ne.mipmask&1<<on,"missing mipmap data"),A(un.data||un.element||un.needsCopy,"missing image data"),Po(Ne),Nr(un,Ba+ft,Et,Dt,on),Gi(),si(un),St}function mt(ft){var wt=ft|0;if(wt!==Ne.width){St.width=Ne.width=wt,St.height=Ne.height=wt,Po(Ne);for(var He=0;He<6;++He)for(var ut=0;Ne.mipmask>>ut;++ut)ve.texImage2D(Ba+He,ut,Ne.format,wt>>ut,wt>>ut,0,Ne.format,Ne.type,null);return Gi(),Bt.profile&&(Ne.stats.size=Wf(Ne.internalformat,Ne.type,St.width,St.height,!1,!0)),St}}return St(Ze,Ht,Nt,ur,ti,Ve),St.subimage=Tt,St.resize=mt,St._reglType="textureCube",St._texture=Ne,Bt.profile&&(St.stats=Ne.stats),St.destroy=function(){Ne.decRef()},St}function mo(){for(var Ze=0;Ze<Ea;++Ze)ve.activeTexture(Xr+Ze),ve.bindTexture(Ca,null),Ua[Ze]=null;ua(pa).forEach(Ir),Zt.cubeCount=0,Zt.textureCount=0}Bt.profile&&(Zt.getTotalTextureSize=function(){var Ze=0;return Object.keys(pa).forEach(function(Ht){Ze+=pa[Ht].stats.size}),Ze});function as(){for(var Ze=0;Ze<Ea;++Ze){var Ht=Ua[Ze];Ht&&(Ht.bindCount=0,Ht.unit=-1,Ua[Ze]=null)}ua(pa).forEach(function(Nt){Nt.texture=ve.createTexture(),ve.bindTexture(Nt.target,Nt.texture);for(var ur=0;ur<32;++ur)if((Nt.mipmask&1<<ur)!=0)if(Nt.target===Ca)ve.texImage2D(Ca,ur,Nt.internalformat,Nt.width>>ur,Nt.height>>ur,0,Nt.internalformat,Nt.type,null);else for(var ti=0;ti<6;++ti)ve.texImage2D(Ba+ti,ur,Nt.internalformat,Nt.width>>ur,Nt.height>>ur,0,Nt.internalformat,Nt.type,null);Ra(Nt.texInfo,Nt.target)})}function Tc(){for(var Ze=0;Ze<Ea;++Ze){var Ht=Ua[Ze];Ht&&(Ht.bindCount=0,Ht.unit=-1,Ua[Ze]=null),ve.activeTexture(Xr+Ze),ve.bindTexture(Ca,null),ve.bindTexture(ao,null)}}return{create2D:ei,createCube:Ei,clear:mo,getTexture:function(Ht){return null},restore:as,refresh:Tc}}var Bl=36161,na=32854,Fo=32855,sg=36194,ug=33189,qh=36168,lg=34041,$f=35907,sf=34836,_d=34842,dc=34843,ns=[];ns[na]=2,ns[Fo]=2,ns[sg]=2,ns[ug]=2,ns[qh]=1,ns[lg]=4,ns[$f]=4,ns[sf]=16,ns[_d]=8,ns[dc]=6;function uf(ve,Me,at){return ns[ve]*Me*at}var Fd=function(Me,at,Rt,Mt,Zt){var Bt={rgba4:na,rgb565:sg,"rgb5 a1":Fo,depth:ug,stencil:qh,"depth stencil":lg};at.ext_srgb&&(Bt.srgba=$f),at.ext_color_buffer_half_float&&(Bt.rgba16f=_d,Bt.rgb16f=dc),at.webgl_color_buffer_float&&(Bt.rgba32f=sf);var mn=[];Object.keys(Bt).forEach(function(Bn){var zt=Bt[Bn];mn[zt]=Bn});var Wn=0,Rn={};function Nn(Bn){this.id=Wn++,this.refCount=1,this.renderbuffer=Bn,this.format=na,this.width=0,this.height=0,Zt.profile&&(this.stats={size:0})}Nn.prototype.decRef=function(){--this.refCount<=0&&Pn(this)};function Pn(Bn){var zt=Bn.renderbuffer;A(zt,"must not double destroy renderbuffer"),Me.bindRenderbuffer(Bl,null),Me.deleteRenderbuffer(zt),Bn.renderbuffer=null,Bn.refCount=0,delete Rn[Bn.id],Mt.renderbufferCount--}function nr(Bn,zt){var Ft=new Nn(Me.createRenderbuffer());Rn[Ft.id]=Ft,Mt.renderbufferCount++;function Ln(rn,hr){var yn=0,wn=0,On=na;if(typeof rn=="object"&&rn){var _n=rn;if("shape"in _n){var br=_n.shape;A(Array.isArray(br)&&br.length>=2,"invalid renderbuffer shape"),yn=br[0]|0,wn=br[1]|0}else"radius"in _n&&(yn=wn=_n.radius|0),"width"in _n&&(yn=_n.width|0),"height"in _n&&(wn=_n.height|0);"format"in _n&&(A.parameter(_n.format,Bt,"invalid renderbuffer format"),On=Bt[_n.format])}else typeof rn=="number"?(yn=rn|0,typeof hr=="number"?wn=hr|0:wn=yn):rn?A.raise("invalid arguments to renderbuffer constructor"):yn=wn=1;if(A(yn>0&&wn>0&&yn<=Rt.maxRenderbufferSize&&wn<=Rt.maxRenderbufferSize,"invalid renderbuffer size"),!(yn===Ft.width&&wn===Ft.height&&On===Ft.format))return Ln.width=Ft.width=yn,Ln.height=Ft.height=wn,Ft.format=On,Me.bindRenderbuffer(Bl,Ft.renderbuffer),Me.renderbufferStorage(Bl,On,yn,wn),A(Me.getError()===0,"invalid render buffer format"),Zt.profile&&(Ft.stats.size=uf(Ft.format,Ft.width,Ft.height)),Ln.format=mn[Ft.format],Ln}function ar(rn,hr){var yn=rn|0,wn=hr|0||yn;return yn===Ft.width&&wn===Ft.height||(A(yn>0&&wn>0&&yn<=Rt.maxRenderbufferSize&&wn<=Rt.maxRenderbufferSize,"invalid renderbuffer size"),Ln.width=Ft.width=yn,Ln.height=Ft.height=wn,Me.bindRenderbuffer(Bl,Ft.renderbuffer),Me.renderbufferStorage(Bl,Ft.format,yn,wn),A(Me.getError()===0,"invalid render buffer format"),Zt.profile&&(Ft.stats.size=uf(Ft.format,Ft.width,Ft.height))),Ln}return Ln(Bn,zt),Ln.resize=ar,Ln._reglType="renderbuffer",Ln._renderbuffer=Ft,Zt.profile&&(Ln.stats=Ft.stats),Ln.destroy=function(){Ft.decRef()},Ln}Zt.profile&&(Mt.getTotalRenderbufferSize=function(){var Bn=0;return Object.keys(Rn).forEach(function(zt){Bn+=Rn[zt].stats.size}),Bn});function Yn(){ua(Rn).forEach(function(Bn){Bn.renderbuffer=Me.createRenderbuffer(),Me.bindRenderbuffer(Bl,Bn.renderbuffer),Me.renderbufferStorage(Bl,Bn.format,Bn.width,Bn.height)}),Me.bindRenderbuffer(Bl,null)}return{create:nr,clear:function(){ua(Rn).forEach(Pn)},restore:Yn}},Cs=36160,ev=36161,hc=3553,Bd=34069,cg=36064,fg=36096,Xf=36128,lf=33306,tv=36053,je=36054,cf=36055,nl=36057,Bo=36061,Bi=36193,Kp=5121,Yp=5126,dg=6407,Gl=6408,hg=6402,Zp=[dg,Gl],ff=[];ff[Gl]=4,ff[dg]=3;var Gd=[];Gd[Kp]=1,Gd[Yp]=4,Gd[Bi]=2;var Jp=32854,rl=32855,Qp=36194,qp=33189,em=36168,vg=34041,tm=35907,il=34836,nm=34842,rm=34843,im=[Jp,rl,Qp,tm,nm,rm,il],df={};df[tv]="complete",df[je]="incomplete attachment",df[nl]="incomplete dimensions",df[cf]="incomplete, missing attachment",df[Bo]="unsupported";function am(ve,Me,at,Rt,Mt,Zt){var Bt={cur:null,next:null,dirty:!1,setFBO:null},mn=["rgba"],Wn=["rgba4","rgb565","rgb5 a1"];Me.ext_srgb&&Wn.push("srgba"),Me.ext_color_buffer_half_float&&Wn.push("rgba16f","rgb16f"),Me.webgl_color_buffer_float&&Wn.push("rgba32f");var Rn=["uint8"];Me.oes_texture_half_float&&Rn.push("half float","float16"),Me.oes_texture_float&&Rn.push("float","float32");function Nn(Zn,zn,hn){this.target=Zn,this.texture=zn,this.renderbuffer=hn;var Nr=0,ai=0;zn?(Nr=zn.width,ai=zn.height):hn&&(Nr=hn.width,ai=hn.height),this.width=Nr,this.height=ai}function Pn(Zn){Zn&&(Zn.texture&&Zn.texture._texture.decRef(),Zn.renderbuffer&&Zn.renderbuffer._renderbuffer.decRef())}function nr(Zn,zn,hn){if(!!Zn)if(Zn.texture){var Nr=Zn.texture._texture,ai=Math.max(1,Nr.width),dr=Math.max(1,Nr.height);A(ai===zn&&dr===hn,"inconsistent width/height for supplied texture"),Nr.refCount+=1}else{var si=Zn.renderbuffer._renderbuffer;A(si.width===zn&&si.height===hn,"inconsistent width/height for renderbuffer"),si.refCount+=1}}function Yn(Zn,zn){zn&&(zn.texture?ve.framebufferTexture2D(Cs,Zn,zn.target,zn.texture._texture.texture,0):ve.framebufferRenderbuffer(Cs,Zn,ev,zn.renderbuffer._renderbuffer.renderbuffer))}function Bn(Zn){var zn=hc,hn=null,Nr=null,ai=Zn;typeof Zn=="object"&&(ai=Zn.data,"target"in Zn&&(zn=Zn.target|0)),A.type(ai,"function","invalid attachment data");var dr=ai._reglType;return dr==="texture2d"?(hn=ai,A(zn===hc)):dr==="textureCube"?(hn=ai,A(zn>=Bd&&zn<Bd+6,"invalid cube map target")):dr==="renderbuffer"?(Nr=ai,zn=ev):A.raise("invalid regl object for attachment"),new Nn(zn,hn,Nr)}function zt(Zn,zn,hn,Nr,ai){if(hn){var dr=Rt.create2D({width:Zn,height:zn,format:Nr,type:ai});return dr._texture.refCount=0,new Nn(hc,dr,null)}else{var si=Mt.create({width:Zn,height:zn,format:Nr});return si._renderbuffer.refCount=0,new Nn(ev,null,si)}}function Ft(Zn){return Zn&&(Zn.texture||Zn.renderbuffer)}function Ln(Zn,zn,hn){Zn&&(Zn.texture?Zn.texture.resize(zn,hn):Zn.renderbuffer&&Zn.renderbuffer.resize(zn,hn),Zn.width=zn,Zn.height=hn)}var ar=0,rn={};function hr(){this.id=ar++,rn[this.id]=this,this.framebuffer=ve.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function yn(Zn){Zn.colorAttachments.forEach(Pn),Pn(Zn.depthAttachment),Pn(Zn.stencilAttachment),Pn(Zn.depthStencilAttachment)}function wn(Zn){var zn=Zn.framebuffer;A(zn,"must not double destroy framebuffer"),ve.deleteFramebuffer(zn),Zn.framebuffer=null,Zt.framebufferCount--,delete rn[Zn.id]}function On(Zn){var zn;ve.bindFramebuffer(Cs,Zn.framebuffer);var hn=Zn.colorAttachments;for(zn=0;zn<hn.length;++zn)Yn(cg+zn,hn[zn]);for(zn=hn.length;zn<at.maxColorAttachments;++zn)ve.framebufferTexture2D(Cs,cg+zn,hc,null,0);ve.framebufferTexture2D(Cs,lf,hc,null,0),ve.framebufferTexture2D(Cs,fg,hc,null,0),ve.framebufferTexture2D(Cs,Xf,hc,null,0),Yn(fg,Zn.depthAttachment),Yn(Xf,Zn.stencilAttachment),Yn(lf,Zn.depthStencilAttachment);var Nr=ve.checkFramebufferStatus(Cs);!ve.isContextLost()&&Nr!==tv&&A.raise("framebuffer configuration not supported, status = "+df[Nr]),ve.bindFramebuffer(Cs,Bt.next?Bt.next.framebuffer:null),Bt.cur=Bt.next,ve.getError()}function _n(Zn,zn){var hn=new hr;Zt.framebufferCount++;function Nr(dr,si){var zr;A(Bt.next!==hn,"can not update framebuffer which is currently in use");var oi=0,Pi=0,Ia=!0,Qa=!0,ui=null,za=!0,la="rgba",ca="uint8",Ra=1,Xa=null,pa=null,Ea=null,Ua=!1;if(typeof dr=="number")oi=dr|0,Pi=si|0||oi;else if(!dr)oi=Pi=1;else{A.type(dr,"object","invalid arguments for framebuffer");var qr=dr;if("shape"in qr){var Po=qr.shape;A(Array.isArray(Po)&&Po.length>=2,"invalid shape for framebuffer"),oi=Po[0],Pi=Po[1]}else"radius"in qr&&(oi=Pi=qr.radius),"width"in qr&&(oi=qr.width),"height"in qr&&(Pi=qr.height);("color"in qr||"colors"in qr)&&(ui=qr.color||qr.colors,Array.isArray(ui)&&A(ui.length===1||Me.webgl_draw_buffers,"multiple render targets not supported")),ui||("colorCount"in qr&&(Ra=qr.colorCount|0,A(Ra>0,"invalid color buffer count")),"colorTexture"in qr&&(za=!!qr.colorTexture,la="rgba4"),"colorType"in qr&&(ca=qr.colorType,za?(A(Me.oes_texture_float||!(ca==="float"||ca==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),A(Me.oes_texture_half_float||!(ca==="half float"||ca==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ca==="half float"||ca==="float16"?(A(Me.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),la="rgba16f"):(ca==="float"||ca==="float32")&&(A(Me.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),la="rgba32f"),A.oneOf(ca,Rn,"invalid color type")),"colorFormat"in qr&&(la=qr.colorFormat,mn.indexOf(la)>=0?za=!0:Wn.indexOf(la)>=0?za=!1:za?A.oneOf(qr.colorFormat,mn,"invalid color format for texture"):A.oneOf(qr.colorFormat,Wn,"invalid color format for renderbuffer"))),("depthTexture"in qr||"depthStencilTexture"in qr)&&(Ua=!!(qr.depthTexture||qr.depthStencilTexture),A(!Ua||Me.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in qr&&(typeof qr.depth=="boolean"?Ia=qr.depth:(Xa=qr.depth,Qa=!1)),"stencil"in qr&&(typeof qr.stencil=="boolean"?Qa=qr.stencil:(pa=qr.stencil,Ia=!1)),"depthStencil"in qr&&(typeof qr.depthStencil=="boolean"?Ia=Qa=qr.depthStencil:(Ea=qr.depthStencil,Ia=!1,Qa=!1))}var Gi=null,Ir=null,ei=null,Ei=null;if(Array.isArray(ui))Gi=ui.map(Bn);else if(ui)Gi=[Bn(ui)];else for(Gi=new Array(Ra),zr=0;zr<Ra;++zr)Gi[zr]=zt(oi,Pi,za,la,ca);A(Me.webgl_draw_buffers||Gi.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),A(Gi.length<=at.maxColorAttachments,"too many color attachments, not supported"),oi=oi||Gi[0].width,Pi=Pi||Gi[0].height,Xa?Ir=Bn(Xa):Ia&&!Qa&&(Ir=zt(oi,Pi,Ua,"depth","uint32")),pa?ei=Bn(pa):Qa&&!Ia&&(ei=zt(oi,Pi,!1,"stencil","uint8")),Ea?Ei=Bn(Ea):!Xa&&!pa&&Qa&&Ia&&(Ei=zt(oi,Pi,Ua,"depth stencil","depth stencil")),A(!!Xa+!!pa+!!Ea<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var mo=null;for(zr=0;zr<Gi.length;++zr)if(nr(Gi[zr],oi,Pi),A(!Gi[zr]||Gi[zr].texture&&Zp.indexOf(Gi[zr].texture._texture.format)>=0||Gi[zr].renderbuffer&&im.indexOf(Gi[zr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+zr+" is invalid"),Gi[zr]&&Gi[zr].texture){var as=ff[Gi[zr].texture._texture.format]*Gd[Gi[zr].texture._texture.type];mo===null?mo=as:A(mo===as,"all color attachments much have the same number of bits per pixel.")}return nr(Ir,oi,Pi),A(!Ir||Ir.texture&&Ir.texture._texture.format===hg||Ir.renderbuffer&&Ir.renderbuffer._renderbuffer.format===qp,"invalid depth attachment for framebuffer object"),nr(ei,oi,Pi),A(!ei||ei.renderbuffer&&ei.renderbuffer._renderbuffer.format===em,"invalid stencil attachment for framebuffer object"),nr(Ei,oi,Pi),A(!Ei||Ei.texture&&Ei.texture._texture.format===vg||Ei.renderbuffer&&Ei.renderbuffer._renderbuffer.format===vg,"invalid depth-stencil attachment for framebuffer object"),yn(hn),hn.width=oi,hn.height=Pi,hn.colorAttachments=Gi,hn.depthAttachment=Ir,hn.stencilAttachment=ei,hn.depthStencilAttachment=Ei,Nr.color=Gi.map(Ft),Nr.depth=Ft(Ir),Nr.stencil=Ft(ei),Nr.depthStencil=Ft(Ei),Nr.width=hn.width,Nr.height=hn.height,On(hn),Nr}function ai(dr,si){A(Bt.next!==hn,"can not resize a framebuffer which is currently in use");var zr=Math.max(dr|0,1),oi=Math.max(si|0||zr,1);if(zr===hn.width&&oi===hn.height)return Nr;for(var Pi=hn.colorAttachments,Ia=0;Ia<Pi.length;++Ia)Ln(Pi[Ia],zr,oi);return Ln(hn.depthAttachment,zr,oi),Ln(hn.stencilAttachment,zr,oi),Ln(hn.depthStencilAttachment,zr,oi),hn.width=Nr.width=zr,hn.height=Nr.height=oi,On(hn),Nr}return Nr(Zn,zn),C(Nr,{resize:ai,_reglType:"framebuffer",_framebuffer:hn,destroy:function(){wn(hn),yn(hn)},use:function(si){Bt.setFBO({framebuffer:Nr},si)}})}function br(Zn){var zn=Array(6);function hn(ai){var dr;A(zn.indexOf(Bt.next)<0,"can not update framebuffer which is currently in use");var si={color:null},zr=0,oi=null,Pi="rgba",Ia="uint8",Qa=1;if(typeof ai=="number")zr=ai|0;else if(!ai)zr=1;else{A.type(ai,"object","invalid arguments for framebuffer");var ui=ai;if("shape"in ui){var za=ui.shape;A(Array.isArray(za)&&za.length>=2,"invalid shape for framebuffer"),A(za[0]===za[1],"cube framebuffer must be square"),zr=za[0]}else"radius"in ui&&(zr=ui.radius|0),"width"in ui?(zr=ui.width|0,"height"in ui&&A(ui.height===zr,"must be square")):"height"in ui&&(zr=ui.height|0);("color"in ui||"colors"in ui)&&(oi=ui.color||ui.colors,Array.isArray(oi)&&A(oi.length===1||Me.webgl_draw_buffers,"multiple render targets not supported")),oi||("colorCount"in ui&&(Qa=ui.colorCount|0,A(Qa>0,"invalid color buffer count")),"colorType"in ui&&(A.oneOf(ui.colorType,Rn,"invalid color type"),Ia=ui.colorType),"colorFormat"in ui&&(Pi=ui.colorFormat,A.oneOf(ui.colorFormat,mn,"invalid color format for texture"))),"depth"in ui&&(si.depth=ui.depth),"stencil"in ui&&(si.stencil=ui.stencil),"depthStencil"in ui&&(si.depthStencil=ui.depthStencil)}var la;if(oi)if(Array.isArray(oi))for(la=[],dr=0;dr<oi.length;++dr)la[dr]=oi[dr];else la=[oi];else{la=Array(Qa);var ca={radius:zr,format:Pi,type:Ia};for(dr=0;dr<Qa;++dr)la[dr]=Rt.createCube(ca)}for(si.color=Array(la.length),dr=0;dr<la.length;++dr){var Ra=la[dr];A(typeof Ra=="function"&&Ra._reglType==="textureCube","invalid cube map"),zr=zr||Ra.width,A(Ra.width===zr&&Ra.height===zr,"invalid cube map shape"),si.color[dr]={target:Bd,data:la[dr]}}for(dr=0;dr<6;++dr){for(var Xa=0;Xa<la.length;++Xa)si.color[Xa].target=Bd+dr;dr>0&&(si.depth=zn[0].depth,si.stencil=zn[0].stencil,si.depthStencil=zn[0].depthStencil),zn[dr]?zn[dr](si):zn[dr]=_n(si)}return C(hn,{width:zr,height:zr,color:la})}function Nr(ai){var dr,si=ai|0;if(A(si>0&&si<=at.maxCubeMapSize,"invalid radius for cube fbo"),si===hn.width)return hn;var zr=hn.color;for(dr=0;dr<zr.length;++dr)zr[dr].resize(si);for(dr=0;dr<6;++dr)zn[dr].resize(si);return hn.width=hn.height=si,hn}return hn(Zn),C(hn,{faces:zn,resize:Nr,_reglType:"framebufferCube",destroy:function(){zn.forEach(function(dr){dr.destroy()})}})}function Gr(){Bt.cur=null,Bt.next=null,Bt.dirty=!0,ua(rn).forEach(function(Zn){Zn.framebuffer=ve.createFramebuffer(),On(Zn)})}return C(Bt,{getFramebuffer:function(zn){if(typeof zn=="function"&&zn._reglType==="framebuffer"){var hn=zn._framebuffer;if(hn instanceof hr)return hn}return null},create:_n,createCube:br,clear:function(){ua(rn).forEach(wn)},restore:Gr})}var vc=5126,nv=34962;function Kf(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=vc,this.offset=0,this.stride=0,this.divisor=0}function hu(ve,Me,at,Rt,Mt){for(var Zt=at.maxAttributes,Bt=new Array(Zt),mn=0;mn<Zt;++mn)Bt[mn]=new Kf;var Wn=0,Rn={},Nn={Record:Kf,scope:{},state:Bt,currentVAO:null,targetVAO:null,restore:nr()?rn:function(){},createVAO:hr,getVAO:Bn,destroyBuffer:Pn,setVAO:nr()?zt:Ft,clear:nr()?Ln:function(){}};function Pn(yn){for(var wn=0;wn<Bt.length;++wn){var On=Bt[wn];On.buffer===yn&&(ve.disableVertexAttribArray(wn),On.buffer=null)}}function nr(){return Me.oes_vertex_array_object}function Yn(){return Me.angle_instanced_arrays}function Bn(yn){return typeof yn=="function"&&yn._vao?yn._vao:null}function zt(yn){if(yn!==Nn.currentVAO){var wn=nr();yn?wn.bindVertexArrayOES(yn.vao):wn.bindVertexArrayOES(null),Nn.currentVAO=yn}}function Ft(yn){if(yn!==Nn.currentVAO){if(yn)yn.bindAttrs();else for(var wn=Yn(),On=0;On<Bt.length;++On){var _n=Bt[On];_n.buffer?(ve.enableVertexAttribArray(On),ve.vertexAttribPointer(On,_n.size,_n.type,_n.normalized,_n.stride,_n.offfset),wn&&_n.divisor&&wn.vertexAttribDivisorANGLE(On,_n.divisor)):(ve.disableVertexAttribArray(On),ve.vertexAttrib4f(On,_n.x,_n.y,_n.z,_n.w))}Nn.currentVAO=yn}}function Ln(){ua(Rn).forEach(function(yn){yn.destroy()})}function ar(){this.id=++Wn,this.attributes=[];var yn=nr();yn?this.vao=yn.createVertexArrayOES():this.vao=null,Rn[this.id]=this,this.buffers=[]}ar.prototype.bindAttrs=function(){for(var yn=Yn(),wn=this.attributes,On=0;On<wn.length;++On){var _n=wn[On];_n.buffer?(ve.enableVertexAttribArray(On),ve.bindBuffer(nv,_n.buffer.buffer),ve.vertexAttribPointer(On,_n.size,_n.type,_n.normalized,_n.stride,_n.offset),yn&&_n.divisor&&yn.vertexAttribDivisorANGLE(On,_n.divisor)):(ve.disableVertexAttribArray(On),ve.vertexAttrib4f(On,_n.x,_n.y,_n.z,_n.w))}for(var br=wn.length;br<Zt;++br)ve.disableVertexAttribArray(br)},ar.prototype.refresh=function(){var yn=nr();yn&&(yn.bindVertexArrayOES(this.vao),this.bindAttrs(),Nn.currentVAO=this)},ar.prototype.destroy=function(){if(this.vao){var yn=nr();this===Nn.currentVAO&&(Nn.currentVAO=null,yn.bindVertexArrayOES(null)),yn.deleteVertexArrayOES(this.vao),this.vao=null}Rn[this.id]&&(delete Rn[this.id],Rt.vaoCount-=1)};function rn(){var yn=nr();yn&&ua(Rn).forEach(function(wn){wn.refresh()})}function hr(yn){var wn=new ar;Rt.vaoCount+=1;function On(_n){A(Array.isArray(_n),"arguments to vertex array constructor must be an array"),A(_n.length<Zt,"too many attributes"),A(_n.length>0,"must specify at least one attribute");var br={},Gr=wn.attributes;Gr.length=_n.length;for(var Zn=0;Zn<_n.length;++Zn){var zn=_n[Zn],hn=Gr[Zn]=new Kf,Nr=zn.data||zn;if(Array.isArray(Nr)||B(Nr)||jo(Nr)){var ai;wn.buffers[Zn]&&(ai=wn.buffers[Zn],B(Nr)&&ai._buffer.byteLength>=Nr.byteLength?ai.subdata(Nr):(ai.destroy(),wn.buffers[Zn]=null)),wn.buffers[Zn]||(ai=wn.buffers[Zn]=Mt.create(zn,nv,!1,!0)),hn.buffer=Mt.getBuffer(ai),hn.size=hn.buffer.dimension|0,hn.normalized=!1,hn.type=hn.buffer.dtype,hn.offset=0,hn.stride=0,hn.divisor=0,hn.state=1,br[Zn]=1}else Mt.getBuffer(zn)?(hn.buffer=Mt.getBuffer(zn),hn.size=hn.buffer.dimension|0,hn.normalized=!1,hn.type=hn.buffer.dtype,hn.offset=0,hn.stride=0,hn.divisor=0,hn.state=1):Mt.getBuffer(zn.buffer)?(hn.buffer=Mt.getBuffer(zn.buffer),hn.size=(+zn.size||hn.buffer.dimension)|0,hn.normalized=!!zn.normalized||!1,"type"in zn?(A.parameter(zn.type,Gs,"invalid buffer type"),hn.type=Gs[zn.type]):hn.type=hn.buffer.dtype,hn.offset=(zn.offset||0)|0,hn.stride=(zn.stride||0)|0,hn.divisor=(zn.divisor||0)|0,hn.state=1,A(hn.size>=1&&hn.size<=4,"size must be between 1 and 4"),A(hn.offset>=0,"invalid offset"),A(hn.stride>=0&&hn.stride<=255,"stride must be between 0 and 255"),A(hn.divisor>=0,"divisor must be positive"),A(!hn.divisor||!!Me.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in zn?(A(Zn>0,"first attribute must not be a constant"),hn.x=+zn.x||0,hn.y=+zn.y||0,hn.z=+zn.z||0,hn.w=+zn.w||0,hn.state=2):A(!1,"invalid attribute spec for location "+Zn)}for(var dr=0;dr<wn.buffers.length;++dr)!br[dr]&&wn.buffers[dr]&&(wn.buffers[dr].destroy(),wn.buffers[dr]=null);return wn.refresh(),On}return On.destroy=function(){for(var _n=0;_n<wn.buffers.length;++_n)wn.buffers[_n]&&wn.buffers[_n].destroy();wn.buffers.length=0,wn.destroy()},On._vao=wn,On._reglType="vao",On(yn)}return Nn}var gg=35632,om=35633,pg=35718,sm=35721;function um(ve,Me,at,Rt){var Mt={},Zt={};function Bt(zt,Ft,Ln,ar){this.name=zt,this.id=Ft,this.location=Ln,this.info=ar}function mn(zt,Ft){for(var Ln=0;Ln<zt.length;++Ln)if(zt[Ln].id===Ft.id){zt[Ln].location=Ft.location;return}zt.push(Ft)}function Wn(zt,Ft,Ln){var ar=zt===gg?Mt:Zt,rn=ar[Ft];if(!rn){var hr=Me.str(Ft);rn=ve.createShader(zt),ve.shaderSource(rn,hr),ve.compileShader(rn),A.shaderError(ve,rn,hr,zt,Ln),ar[Ft]=rn}return rn}var Rn={},Nn=[],Pn=0;function nr(zt,Ft){this.id=Pn++,this.fragId=zt,this.vertId=Ft,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Rt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Yn(zt,Ft,Ln){var ar,rn,hr=Wn(gg,zt.fragId),yn=Wn(om,zt.vertId),wn=zt.program=ve.createProgram();if(ve.attachShader(wn,hr),ve.attachShader(wn,yn),Ln)for(ar=0;ar<Ln.length;++ar){var On=Ln[ar];ve.bindAttribLocation(wn,On[0],On[1])}ve.linkProgram(wn),A.linkError(ve,wn,Me.str(zt.fragId),Me.str(zt.vertId),Ft);var _n=ve.getProgramParameter(wn,pg);Rt.profile&&(zt.stats.uniformsCount=_n);var br=zt.uniforms;for(ar=0;ar<_n;++ar)if(rn=ve.getActiveUniform(wn,ar),rn)if(rn.size>1)for(var Gr=0;Gr<rn.size;++Gr){var Zn=rn.name.replace("[0]","["+Gr+"]");mn(br,new Bt(Zn,Me.id(Zn),ve.getUniformLocation(wn,Zn),rn))}else mn(br,new Bt(rn.name,Me.id(rn.name),ve.getUniformLocation(wn,rn.name),rn));var zn=ve.getProgramParameter(wn,sm);Rt.profile&&(zt.stats.attributesCount=zn);var hn=zt.attributes;for(ar=0;ar<zn;++ar)rn=ve.getActiveAttrib(wn,ar),rn&&mn(hn,new Bt(rn.name,Me.id(rn.name),ve.getAttribLocation(wn,rn.name),rn))}Rt.profile&&(at.getMaxUniformsCount=function(){var zt=0;return Nn.forEach(function(Ft){Ft.stats.uniformsCount>zt&&(zt=Ft.stats.uniformsCount)}),zt},at.getMaxAttributesCount=function(){var zt=0;return Nn.forEach(function(Ft){Ft.stats.attributesCount>zt&&(zt=Ft.stats.attributesCount)}),zt});function Bn(){Mt={},Zt={};for(var zt=0;zt<Nn.length;++zt)Yn(Nn[zt],null,Nn[zt].attributes.map(function(Ft){return[Ft.location,Ft.name]}))}return{clear:function(){var Ft=ve.deleteShader.bind(ve);ua(Mt).forEach(Ft),Mt={},ua(Zt).forEach(Ft),Zt={},Nn.forEach(function(Ln){ve.deleteProgram(Ln.program)}),Nn.length=0,Rn={},at.shaderCount=0},program:function(Ft,Ln,ar,rn){A.command(Ft>=0,"missing vertex shader",ar),A.command(Ln>=0,"missing fragment shader",ar);var hr=Rn[Ln];hr||(hr=Rn[Ln]={});var yn=hr[Ft];if(yn&&(yn.refCount++,!rn))return yn;var wn=new nr(Ln,Ft);return at.shaderCount++,Yn(wn,ar,rn),yn||(hr[Ft]=wn),Nn.push(wn),C(wn,{destroy:function(){if(wn.refCount--,wn.refCount<=0){ve.deleteProgram(wn.program);var _n=Nn.indexOf(wn);Nn.splice(_n,1),at.shaderCount--}hr[wn.vertId].refCount<=0&&(ve.deleteShader(Zt[wn.vertId]),delete Zt[wn.vertId],delete Rn[wn.fragId][wn.vertId]),Object.keys(Rn[wn.fragId]).length||(ve.deleteShader(Mt[wn.fragId]),delete Mt[wn.fragId],delete Rn[wn.fragId])}})},restore:Bn,shader:Wn,frag:-1,vert:-1}}var mg=6408,gc=5121,lm=3333,zd=5126;function Ud(ve,Me,at,Rt,Mt,Zt,Bt){function mn(Nn){var Pn;Me.next===null?(A(Mt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Pn=gc):(A(Me.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Pn=Me.next.colorAttachments[0].texture._texture.type,Zt.oes_texture_float?(A(Pn===gc||Pn===zd,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Pn===zd&&A(Bt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):A(Pn===gc,"Reading from a framebuffer is only allowed for the type 'uint8'"));var nr=0,Yn=0,Bn=Rt.framebufferWidth,zt=Rt.framebufferHeight,Ft=null;B(Nn)?Ft=Nn:Nn&&(A.type(Nn,"object","invalid arguments to regl.read()"),nr=Nn.x|0,Yn=Nn.y|0,A(nr>=0&&nr<Rt.framebufferWidth,"invalid x offset for regl.read"),A(Yn>=0&&Yn<Rt.framebufferHeight,"invalid y offset for regl.read"),Bn=(Nn.width||Rt.framebufferWidth-nr)|0,zt=(Nn.height||Rt.framebufferHeight-Yn)|0,Ft=Nn.data||null),Ft&&(Pn===gc?A(Ft instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Pn===zd&&A(Ft instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),A(Bn>0&&Bn+nr<=Rt.framebufferWidth,"invalid width for read pixels"),A(zt>0&&zt+Yn<=Rt.framebufferHeight,"invalid height for read pixels"),at();var Ln=Bn*zt*4;return Ft||(Pn===gc?Ft=new Uint8Array(Ln):Pn===zd&&(Ft=Ft||new Float32Array(Ln))),A.isTypedArray(Ft,"data buffer for regl.read() must be a typedarray"),A(Ft.byteLength>=Ln,"data buffer for regl.read() too small"),ve.pixelStorei(lm,4),ve.readPixels(nr,Yn,Bn,zt,mg,Pn,Ft),Ft}function Wn(Nn){var Pn;return Me.setFBO({framebuffer:Nn.framebuffer},function(){Pn=mn(Nn)}),Pn}function Rn(Nn){return!Nn||!("framebuffer"in Nn)?mn(Nn):Wn(Nn)}return Rn}function Gu(ve){return Array.prototype.slice.call(ve)}function vu(ve){return Gu(ve).join("")}function cm(){var ve=0,Me=[],at=[];function Rt(Pn){for(var nr=0;nr<at.length;++nr)if(at[nr]===Pn)return Me[nr];var Yn="g"+ve++;return Me.push(Yn),at.push(Pn),Yn}function Mt(){var Pn=[];function nr(){Pn.push.apply(Pn,Gu(arguments))}var Yn=[];function Bn(){var zt="v"+ve++;return Yn.push(zt),arguments.length>0&&(Pn.push(zt,"="),Pn.push.apply(Pn,Gu(arguments)),Pn.push(";")),zt}return C(nr,{def:Bn,toString:function(){return vu([Yn.length>0?"var "+Yn.join(",")+";":"",vu(Pn)])}})}function Zt(){var Pn=Mt(),nr=Mt(),Yn=Pn.toString,Bn=nr.toString;function zt(Ft,Ln){nr(Ft,Ln,"=",Pn.def(Ft,Ln),";")}return C(function(){Pn.apply(Pn,Gu(arguments))},{def:Pn.def,entry:Pn,exit:nr,save:zt,set:function(Ln,ar,rn){zt(Ln,ar),Pn(Ln,ar,"=",rn,";")},toString:function(){return Yn()+Bn()}})}function Bt(){var Pn=vu(arguments),nr=Zt(),Yn=Zt(),Bn=nr.toString,zt=Yn.toString;return C(nr,{then:function(){return nr.apply(nr,Gu(arguments)),this},else:function(){return Yn.apply(Yn,Gu(arguments)),this},toString:function(){var Ln=zt();return Ln&&(Ln="else{"+Ln+"}"),vu(["if(",Pn,"){",Bn(),"}",Ln])}})}var mn=Mt(),Wn={};function Rn(Pn,nr){var Yn=[];function Bn(){var rn="a"+Yn.length;return Yn.push(rn),rn}nr=nr||0;for(var zt=0;zt<nr;++zt)Bn();var Ft=Zt(),Ln=Ft.toString,ar=Wn[Pn]=C(Ft,{arg:Bn,toString:function(){return vu(["function(",Yn.join(),"){",Ln(),"}"])}});return ar}function Nn(){var Pn=['"use strict";',mn,"return {"];Object.keys(Wn).forEach(function(Bn){Pn.push('"',Bn,'":',Wn[Bn].toString(),",")}),Pn.push("}");var nr=vu(Pn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Yn=Function.apply(null,Me.concat(nr));return Yn.apply(null,at)}return{global:mn,link:Rt,block:Mt,proc:Rn,scope:Zt,cond:Bt,compile:Nn}}var pc="xyzw".split(""),mc=5121,Es=1,Yf=2,al=0,Go=1,rv=2,Vd=3,Zf=4,hf=5,ol=6,iv="dither",yg="blend.enable",Jf="blend.color",av="blend.equation",Hd="blend.func",To="depth.enable",Wd="depth.func",ov="depth.range",gu="depth.mask",Qf="colorMask",qf="cull.enable",zl="cull.face",$d="frontFace",zo="lineWidth",Xd="polygonOffset.enable",sv="polygonOffset.offset",bg="sample.alpha",Cg="sample.enable",ed="sample.coverage",Sa="stencil.enable",vf="stencil.mask",Kd="stencil.func",uv="stencil.opFront",zu="stencil.opBack",As="scissor.enable",td="scissor.box",sl="viewport",Uu="profile",Ul="framebuffer",nd="vert",rd="frag",Vl="elements",Hl="primitive",ul="count",yc="offset",gf="instances",bc="vao",Yd="Width",Zd="Height",ll=Ul+Yd,pf=Ul+Zd,Eg=sl+Yd,lv=sl+Zd,wg="drawingBuffer",Wl=wg+Yd,xg=wg+Zd,id=[Hd,av,Kd,uv,zu,ed,sl,td,sv],Cc=34962,cv=34963,fm=35632,fv=35633,Ci=3553,dm=34067,dv=2884,ad=3042,Jd=3024,hm=2960,hv=2929,Ts=3089,vm=32823,od=32926,Qd=32928,sd=5126,mf=35664,Wo=35665,pu=35666,ud=5124,ld=35667,Ec=35668,mu=35669,Vu=35670,cd=35671,wc=35672,xc=35673,rs=35674,fd=35675,Ps=35676,yf=35678,bf=35680,dd=4,Oc=1028,Sc=1029,Og=2304,qd=2305,Sg=32775,gm=32776,vv=519,cl=7680,is=0,yu=1,gv=32774,pm=513,hd=36160,Cf=36064,bu={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},pv=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],$l={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},fl={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},dl={frag:fm,vert:fv},Mc={cw:Og,ccw:qd};function eh(ve){return Array.isArray(ve)||B(ve)||jo(ve)}function mv(ve){return ve.sort(function(Me,at){return Me===sl?-1:at===sl?1:Me<at?-1:1})}function $o(ve,Me,at,Rt){this.thisDep=ve,this.contextDep=Me,this.propDep=at,this.append=Rt}function Cu(ve){return ve&&!(ve.thisDep||ve.contextDep||ve.propDep)}function Ga(ve){return new $o(!1,!1,!1,ve)}function Uo(ve,Me){var at=ve.type;if(at===al){var Rt=ve.data.length;return new $o(!0,Rt>=1,Rt>=2,Me)}else if(at===Zf){var Mt=ve.data;return new $o(Mt.thisDep,Mt.contextDep,Mt.propDep,Me)}else{if(at===hf)return new $o(!1,!1,!1,Me);if(at===ol){for(var Zt=!1,Bt=!1,mn=!1,Wn=0;Wn<ve.data.length;++Wn){var Rn=ve.data[Wn];if(Rn.type===Go)mn=!0;else if(Rn.type===rv)Bt=!0;else if(Rn.type===Vd)Zt=!0;else if(Rn.type===al){Zt=!0;var Nn=Rn.data;Nn>=1&&(Bt=!0),Nn>=2&&(mn=!0)}else Rn.type===Zf&&(Zt=Zt||Rn.data.thisDep,Bt=Bt||Rn.data.contextDep,mn=mn||Rn.data.propDep)}return new $o(Zt,Bt,mn,Me)}else return new $o(at===Vd,at===rv,at===Go,Me)}}var th=new $o(!1,!1,!1,function(){});function nh(ve,Me,at,Rt,Mt,Zt,Bt,mn,Wn,Rn,Nn,Pn,nr,Yn,Bn){var zt=Rn.Record,Ft={add:32774,subtract:32778,"reverse subtract":32779};at.ext_blend_minmax&&(Ft.min=Sg,Ft.max=gm);var Ln=at.angle_instanced_arrays,ar=at.webgl_draw_buffers,rn={dirty:!0,profile:Bn.profile},hr={},yn=[],wn={},On={};function _n(Ve){return Ve.replace(".","_")}function br(Ve,Ne,ct){var St=_n(Ve);yn.push(Ve),hr[St]=rn[St]=!!ct,wn[St]=Ne}function Gr(Ve,Ne,ct){var St=_n(Ve);yn.push(Ve),Array.isArray(ct)?(rn[St]=ct.slice(),hr[St]=ct.slice()):rn[St]=hr[St]=ct,On[St]=Ne}br(iv,Jd),br(yg,ad),Gr(Jf,"blendColor",[0,0,0,0]),Gr(av,"blendEquationSeparate",[gv,gv]),Gr(Hd,"blendFuncSeparate",[yu,is,yu,is]),br(To,hv,!0),Gr(Wd,"depthFunc",pm),Gr(ov,"depthRange",[0,1]),Gr(gu,"depthMask",!0),Gr(Qf,Qf,[!0,!0,!0,!0]),br(qf,dv),Gr(zl,"cullFace",Sc),Gr($d,$d,qd),Gr(zo,zo,1),br(Xd,vm),Gr(sv,"polygonOffset",[0,0]),br(bg,od),br(Cg,Qd),Gr(ed,"sampleCoverage",[1,!1]),br(Sa,hm),Gr(vf,"stencilMask",-1),Gr(Kd,"stencilFunc",[vv,0,-1]),Gr(uv,"stencilOpSeparate",[Oc,cl,cl,cl]),Gr(zu,"stencilOpSeparate",[Sc,cl,cl,cl]),br(As,Ts),Gr(td,"scissor",[0,0,ve.drawingBufferWidth,ve.drawingBufferHeight]),Gr(sl,sl,[0,0,ve.drawingBufferWidth,ve.drawingBufferHeight]);var Zn={gl:ve,context:nr,strings:Me,next:hr,current:rn,draw:Pn,elements:Zt,buffer:Mt,shader:Nn,attributes:Rn.state,vao:Rn,uniforms:Wn,framebuffer:mn,extensions:at,timer:Yn,isBufferArgs:eh},zn={primTypes:Vs,compareFuncs:$l,blendFuncs:bu,blendEquations:Ft,stencilOps:fl,glTypes:Gs,orientationType:Mc};A.optional(function(){Zn.isArrayLike=Cr}),ar&&(zn.backBuffer=[Sc],zn.drawBuffer=Fi(Rt.maxDrawbuffers,function(Ve){return Ve===0?[0]:Fi(Ve,function(Ne){return Cf+Ne})}));var hn=0;function Nr(){var Ve=cm(),Ne=Ve.link,ct=Ve.global;Ve.id=hn++,Ve.batchId="0";var St=Ne(Zn),Tt=Ve.shared={props:"a0"};Object.keys(Zn).forEach(function(ut){Tt[ut]=ct.def(St,".",ut)}),A.optional(function(){Ve.CHECK=Ne(A),Ve.commandStr=A.guessCommand(),Ve.command=Ne(Ve.commandStr),Ve.assert=function(ut,Be,Et){ut("if(!(",Be,"))",this.CHECK,".commandRaise(",Ne(Et),",",this.command,");")},zn.invalidBlendCombinations=pv});var mt=Ve.next={},ft=Ve.current={};Object.keys(On).forEach(function(ut){Array.isArray(rn[ut])&&(mt[ut]=ct.def(Tt.next,".",ut),ft[ut]=ct.def(Tt.current,".",ut))});var wt=Ve.constants={};Object.keys(zn).forEach(function(ut){wt[ut]=ct.def(JSON.stringify(zn[ut]))}),Ve.invoke=function(ut,Be){switch(Be.type){case al:var Et=["this",Tt.context,Tt.props,Ve.batchId];return ut.def(Ne(Be.data),".call(",Et.slice(0,Math.max(Be.data.length+1,4)),")");case Go:return ut.def(Tt.props,Be.data);case rv:return ut.def(Tt.context,Be.data);case Vd:return ut.def("this",Be.data);case Zf:return Be.data.append(Ve,ut),Be.data.ref;case hf:return Be.data.toString();case ol:return Be.data.map(function(Dt){return Ve.invoke(ut,Dt)})}},Ve.attribCache={};var He={};return Ve.scopeAttrib=function(ut){var Be=Me.id(ut);if(Be in He)return He[Be];var Et=Rn.scope[Be];Et||(Et=Rn.scope[Be]=new zt);var Dt=He[Be]=Ne(Et);return Dt},Ve}function ai(Ve){var Ne=Ve.static,ct=Ve.dynamic,St;if(Uu in Ne){var Tt=!!Ne[Uu];St=Ga(function(ft,wt){return Tt}),St.enable=Tt}else if(Uu in ct){var mt=ct[Uu];St=Uo(mt,function(ft,wt){return ft.invoke(wt,mt)})}return St}function dr(Ve,Ne){var ct=Ve.static,St=Ve.dynamic;if(Ul in ct){var Tt=ct[Ul];return Tt?(Tt=mn.getFramebuffer(Tt),A.command(Tt,"invalid framebuffer object"),Ga(function(ft,wt){var He=ft.link(Tt),ut=ft.shared;wt.set(ut.framebuffer,".next",He);var Be=ut.context;return wt.set(Be,"."+ll,He+".width"),wt.set(Be,"."+pf,He+".height"),He})):Ga(function(ft,wt){var He=ft.shared;wt.set(He.framebuffer,".next","null");var ut=He.context;return wt.set(ut,"."+ll,ut+"."+Wl),wt.set(ut,"."+pf,ut+"."+xg),"null"})}else if(Ul in St){var mt=St[Ul];return Uo(mt,function(ft,wt){var He=ft.invoke(wt,mt),ut=ft.shared,Be=ut.framebuffer,Et=wt.def(Be,".getFramebuffer(",He,")");A.optional(function(){ft.assert(wt,"!"+He+"||"+Et,"invalid framebuffer object")}),wt.set(Be,".next",Et);var Dt=ut.context;return wt.set(Dt,"."+ll,Et+"?"+Et+".width:"+Dt+"."+Wl),wt.set(Dt,"."+pf,Et+"?"+Et+".height:"+Dt+"."+xg),Et})}else return null}function si(Ve,Ne,ct){var St=Ve.static,Tt=Ve.dynamic;function mt(He){if(He in St){var ut=St[He];A.commandType(ut,"object","invalid "+He,ct.commandStr);var Be=!0,Et=ut.x|0,Dt=ut.y|0,on,un;return"width"in ut?(on=ut.width|0,A.command(on>=0,"invalid "+He,ct.commandStr)):Be=!1,"height"in ut?(un=ut.height|0,A.command(un>=0,"invalid "+He,ct.commandStr)):Be=!1,new $o(!Be&&Ne&&Ne.thisDep,!Be&&Ne&&Ne.contextDep,!Be&&Ne&&Ne.propDep,function(mr,ri){var vr=mr.shared.context,Ar=on;"width"in ut||(Ar=ri.def(vr,".",ll,"-",Et));var Kr=un;return"height"in ut||(Kr=ri.def(vr,".",pf,"-",Dt)),[Et,Dt,Ar,Kr]})}else if(He in Tt){var qt=Tt[He],Gn=Uo(qt,function(mr,ri){var vr=mr.invoke(ri,qt);A.optional(function(){mr.assert(ri,vr+"&&typeof "+vr+'==="object"',"invalid "+He)});var Ar=mr.shared.context,Kr=ri.def(vr,".x|0"),ki=ri.def(vr,".y|0"),Na=ri.def('"width" in ',vr,"?",vr,".width|0:","(",Ar,".",ll,"-",Kr,")"),os=ri.def('"height" in ',vr,"?",vr,".height|0:","(",Ar,".",pf,"-",ki,")");return A.optional(function(){mr.assert(ri,Na+">=0&&"+os+">=0","invalid "+He)}),[Kr,ki,Na,os]});return Ne&&(Gn.thisDep=Gn.thisDep||Ne.thisDep,Gn.contextDep=Gn.contextDep||Ne.contextDep,Gn.propDep=Gn.propDep||Ne.propDep),Gn}else return Ne?new $o(Ne.thisDep,Ne.contextDep,Ne.propDep,function(mr,ri){var vr=mr.shared.context;return[0,0,ri.def(vr,".",ll),ri.def(vr,".",pf)]}):null}var ft=mt(sl);if(ft){var wt=ft;ft=new $o(ft.thisDep,ft.contextDep,ft.propDep,function(He,ut){var Be=wt.append(He,ut),Et=He.shared.context;return ut.set(Et,"."+Eg,Be[2]),ut.set(Et,"."+lv,Be[3]),Be})}return{viewport:ft,scissor_box:mt(td)}}function zr(Ve,Ne){var ct=Ve.static,St=typeof ct[rd]=="string"&&typeof ct[nd]=="string";if(St){if(Object.keys(Ne.dynamic).length>0)return null;var Tt=Ne.static,mt=Object.keys(Tt);if(mt.length>0&&typeof Tt[mt[0]]=="number"){for(var ft=[],wt=0;wt<mt.length;++wt)A(typeof Tt[mt[wt]]=="number","must specify all vertex attribute locations when using vaos"),ft.push([Tt[mt[wt]]|0,mt[wt]]);return ft}}return null}function oi(Ve,Ne,ct){var St=Ve.static,Tt=Ve.dynamic;function mt(Be){if(Be in St){var Et=Me.id(St[Be]);A.optional(function(){Nn.shader(dl[Be],Et,A.guessCommand())});var Dt=Ga(function(){return Et});return Dt.id=Et,Dt}else if(Be in Tt){var on=Tt[Be];return Uo(on,function(un,qt){var Gn=un.invoke(qt,on),mr=qt.def(un.shared.strings,".id(",Gn,")");return A.optional(function(){qt(un.shared.shader,".shader(",dl[Be],",",mr,",",un.command,");")}),mr})}return null}var ft=mt(rd),wt=mt(nd),He=null,ut;return Cu(ft)&&Cu(wt)?(He=Nn.program(wt.id,ft.id,null,ct),ut=Ga(function(Be,Et){return Be.link(He)})):ut=new $o(ft&&ft.thisDep||wt&&wt.thisDep,ft&&ft.contextDep||wt&&wt.contextDep,ft&&ft.propDep||wt&&wt.propDep,function(Be,Et){var Dt=Be.shared.shader,on;ft?on=ft.append(Be,Et):on=Et.def(Dt,".",rd);var un;wt?un=wt.append(Be,Et):un=Et.def(Dt,".",nd);var qt=Dt+".program("+un+","+on;return A.optional(function(){qt+=","+Be.command}),Et.def(qt+")")}),{frag:ft,vert:wt,progVar:ut,program:He}}function Pi(Ve,Ne){var ct=Ve.static,St=Ve.dynamic;function Tt(){if(Vl in ct){var Be=ct[Vl];eh(Be)?Be=Zt.getElements(Zt.create(Be,!0)):Be&&(Be=Zt.getElements(Be),A.command(Be,"invalid elements",Ne.commandStr));var Et=Ga(function(on,un){if(Be){var qt=on.link(Be);return on.ELEMENTS=qt,qt}return on.ELEMENTS=null,null});return Et.value=Be,Et}else if(Vl in St){var Dt=St[Vl];return Uo(Dt,function(on,un){var qt=on.shared,Gn=qt.isBufferArgs,mr=qt.elements,ri=on.invoke(un,Dt),vr=un.def("null"),Ar=un.def(Gn,"(",ri,")"),Kr=on.cond(Ar).then(vr,"=",mr,".createStream(",ri,");").else(vr,"=",mr,".getElements(",ri,");");return A.optional(function(){on.assert(Kr.else,"!"+ri+"||"+vr,"invalid elements")}),un.entry(Kr),un.exit(on.cond(Ar).then(mr,".destroyStream(",vr,");")),on.ELEMENTS=vr,vr})}return null}var mt=Tt();function ft(){if(Hl in ct){var Be=ct[Hl];return A.commandParameter(Be,Vs,"invalid primitve",Ne.commandStr),Ga(function(Dt,on){return Vs[Be]})}else if(Hl in St){var Et=St[Hl];return Uo(Et,function(Dt,on){var un=Dt.constants.primTypes,qt=Dt.invoke(on,Et);return A.optional(function(){Dt.assert(on,qt+" in "+un,"invalid primitive, must be one of "+Object.keys(Vs))}),on.def(un,"[",qt,"]")})}else if(mt)return Cu(mt)?mt.value?Ga(function(Dt,on){return on.def(Dt.ELEMENTS,".primType")}):Ga(function(){return dd}):new $o(mt.thisDep,mt.contextDep,mt.propDep,function(Dt,on){var un=Dt.ELEMENTS;return on.def(un,"?",un,".primType:",dd)});return null}function wt(Be,Et){if(Be in ct){var Dt=ct[Be]|0;return A.command(!Et||Dt>=0,"invalid "+Be,Ne.commandStr),Ga(function(un,qt){return Et&&(un.OFFSET=Dt),Dt})}else if(Be in St){var on=St[Be];return Uo(on,function(un,qt){var Gn=un.invoke(qt,on);return Et&&(un.OFFSET=Gn,A.optional(function(){un.assert(qt,Gn+">=0","invalid "+Be)})),Gn})}else if(Et&&mt)return Ga(function(un,qt){return un.OFFSET="0",0});return null}var He=wt(yc,!0);function ut(){if(ul in ct){var Be=ct[ul]|0;return A.command(typeof Be=="number"&&Be>=0,"invalid vertex count",Ne.commandStr),Ga(function(){return Be})}else if(ul in St){var Et=St[ul];return Uo(Et,function(un,qt){var Gn=un.invoke(qt,Et);return A.optional(function(){un.assert(qt,"typeof "+Gn+'==="number"&&'+Gn+">=0&&"+Gn+"===("+Gn+"|0)","invalid vertex count")}),Gn})}else if(mt)if(Cu(mt)){if(mt)return He?new $o(He.thisDep,He.contextDep,He.propDep,function(un,qt){var Gn=qt.def(un.ELEMENTS,".vertCount-",un.OFFSET);return A.optional(function(){un.assert(qt,Gn+">=0","invalid vertex offset/element buffer too small")}),Gn}):Ga(function(un,qt){return qt.def(un.ELEMENTS,".vertCount")});var Dt=Ga(function(){return-1});return A.optional(function(){Dt.MISSING=!0}),Dt}else{var on=new $o(mt.thisDep||He.thisDep,mt.contextDep||He.contextDep,mt.propDep||He.propDep,function(un,qt){var Gn=un.ELEMENTS;return un.OFFSET?qt.def(Gn,"?",Gn,".vertCount-",un.OFFSET,":-1"):qt.def(Gn,"?",Gn,".vertCount:-1")});return A.optional(function(){on.DYNAMIC=!0}),on}return null}return{elements:mt,primitive:ft(),count:ut(),instances:wt(gf,!1),offset:He}}function Ia(Ve,Ne){var ct=Ve.static,St=Ve.dynamic,Tt={};return yn.forEach(function(mt){var ft=_n(mt);function wt(He,ut){if(mt in ct){var Be=He(ct[mt]);Tt[ft]=Ga(function(){return Be})}else if(mt in St){var Et=St[mt];Tt[ft]=Uo(Et,function(Dt,on){return ut(Dt,on,Dt.invoke(on,Et))})}}switch(mt){case qf:case yg:case iv:case Sa:case To:case As:case Xd:case bg:case Cg:case gu:return wt(function(He){return A.commandType(He,"boolean",mt,Ne.commandStr),He},function(He,ut,Be){return A.optional(function(){He.assert(ut,"typeof "+Be+'==="boolean"',"invalid flag "+mt,He.commandStr)}),Be});case Wd:return wt(function(He){return A.commandParameter(He,$l,"invalid "+mt,Ne.commandStr),$l[He]},function(He,ut,Be){var Et=He.constants.compareFuncs;return A.optional(function(){He.assert(ut,Be+" in "+Et,"invalid "+mt+", must be one of "+Object.keys($l))}),ut.def(Et,"[",Be,"]")});case ov:return wt(function(He){return A.command(Cr(He)&&He.length===2&&typeof He[0]=="number"&&typeof He[1]=="number"&&He[0]<=He[1],"depth range is 2d array",Ne.commandStr),He},function(He,ut,Be){A.optional(function(){He.assert(ut,He.shared.isArrayLike+"("+Be+")&&"+Be+".length===2&&typeof "+Be+'[0]==="number"&&typeof '+Be+'[1]==="number"&&'+Be+"[0]<="+Be+"[1]","depth range must be a 2d array")});var Et=ut.def("+",Be,"[0]"),Dt=ut.def("+",Be,"[1]");return[Et,Dt]});case Hd:return wt(function(He){A.commandType(He,"object","blend.func",Ne.commandStr);var ut="srcRGB"in He?He.srcRGB:He.src,Be="srcAlpha"in He?He.srcAlpha:He.src,Et="dstRGB"in He?He.dstRGB:He.dst,Dt="dstAlpha"in He?He.dstAlpha:He.dst;return A.commandParameter(ut,bu,ft+".srcRGB",Ne.commandStr),A.commandParameter(Be,bu,ft+".srcAlpha",Ne.commandStr),A.commandParameter(Et,bu,ft+".dstRGB",Ne.commandStr),A.commandParameter(Dt,bu,ft+".dstAlpha",Ne.commandStr),A.command(pv.indexOf(ut+", "+Et)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+ut+", "+Et+")",Ne.commandStr),[bu[ut],bu[Et],bu[Be],bu[Dt]]},function(He,ut,Be){var Et=He.constants.blendFuncs;A.optional(function(){He.assert(ut,Be+"&&typeof "+Be+'==="object"',"invalid blend func, must be an object")});function Dt(vr,Ar){var Kr=ut.def('"',vr,Ar,'" in ',Be,"?",Be,".",vr,Ar,":",Be,".",vr);return A.optional(function(){He.assert(ut,Kr+" in "+Et,"invalid "+mt+"."+vr+Ar+", must be one of "+Object.keys(bu))}),Kr}var on=Dt("src","RGB"),un=Dt("dst","RGB");A.optional(function(){var vr=He.constants.invalidBlendCombinations;He.assert(ut,vr+".indexOf("+on+'+", "+'+un+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var qt=ut.def(Et,"[",on,"]"),Gn=ut.def(Et,"[",Dt("src","Alpha"),"]"),mr=ut.def(Et,"[",un,"]"),ri=ut.def(Et,"[",Dt("dst","Alpha"),"]");return[qt,mr,Gn,ri]});case av:return wt(function(He){if(typeof He=="string")return A.commandParameter(He,Ft,"invalid "+mt,Ne.commandStr),[Ft[He],Ft[He]];if(typeof He=="object")return A.commandParameter(He.rgb,Ft,mt+".rgb",Ne.commandStr),A.commandParameter(He.alpha,Ft,mt+".alpha",Ne.commandStr),[Ft[He.rgb],Ft[He.alpha]];A.commandRaise("invalid blend.equation",Ne.commandStr)},function(He,ut,Be){var Et=He.constants.blendEquations,Dt=ut.def(),on=ut.def(),un=He.cond("typeof ",Be,'==="string"');return A.optional(function(){function qt(Gn,mr,ri){He.assert(Gn,ri+" in "+Et,"invalid "+mr+", must be one of "+Object.keys(Ft))}qt(un.then,mt,Be),He.assert(un.else,Be+"&&typeof "+Be+'==="object"',"invalid "+mt),qt(un.else,mt+".rgb",Be+".rgb"),qt(un.else,mt+".alpha",Be+".alpha")}),un.then(Dt,"=",on,"=",Et,"[",Be,"];"),un.else(Dt,"=",Et,"[",Be,".rgb];",on,"=",Et,"[",Be,".alpha];"),ut(un),[Dt,on]});case Jf:return wt(function(He){return A.command(Cr(He)&&He.length===4,"blend.color must be a 4d array",Ne.commandStr),Fi(4,function(ut){return+He[ut]})},function(He,ut,Be){return A.optional(function(){He.assert(ut,He.shared.isArrayLike+"("+Be+")&&"+Be+".length===4","blend.color must be a 4d array")}),Fi(4,function(Et){return ut.def("+",Be,"[",Et,"]")})});case vf:return wt(function(He){return A.commandType(He,"number",ft,Ne.commandStr),He|0},function(He,ut,Be){return A.optional(function(){He.assert(ut,"typeof "+Be+'==="number"',"invalid stencil.mask")}),ut.def(Be,"|0")});case Kd:return wt(function(He){A.commandType(He,"object",ft,Ne.commandStr);var ut=He.cmp||"keep",Be=He.ref||0,Et="mask"in He?He.mask:-1;return A.commandParameter(ut,$l,mt+".cmp",Ne.commandStr),A.commandType(Be,"number",mt+".ref",Ne.commandStr),A.commandType(Et,"number",mt+".mask",Ne.commandStr),[$l[ut],Be,Et]},function(He,ut,Be){var Et=He.constants.compareFuncs;A.optional(function(){function qt(){He.assert(ut,Array.prototype.join.call(arguments,""),"invalid stencil.func")}qt(Be+"&&typeof ",Be,'==="object"'),qt('!("cmp" in ',Be,")||(",Be,".cmp in ",Et,")")});var Dt=ut.def('"cmp" in ',Be,"?",Et,"[",Be,".cmp]",":",cl),on=ut.def(Be,".ref|0"),un=ut.def('"mask" in ',Be,"?",Be,".mask|0:-1");return[Dt,on,un]});case uv:case zu:return wt(function(He){A.commandType(He,"object",ft,Ne.commandStr);var ut=He.fail||"keep",Be=He.zfail||"keep",Et=He.zpass||"keep";return A.commandParameter(ut,fl,mt+".fail",Ne.commandStr),A.commandParameter(Be,fl,mt+".zfail",Ne.commandStr),A.commandParameter(Et,fl,mt+".zpass",Ne.commandStr),[mt===zu?Sc:Oc,fl[ut],fl[Be],fl[Et]]},function(He,ut,Be){var Et=He.constants.stencilOps;A.optional(function(){He.assert(ut,Be+"&&typeof "+Be+'==="object"',"invalid "+mt)});function Dt(on){return A.optional(function(){He.assert(ut,'!("'+on+'" in '+Be+")||("+Be+"."+on+" in "+Et+")","invalid "+mt+"."+on+", must be one of "+Object.keys(fl))}),ut.def('"',on,'" in ',Be,"?",Et,"[",Be,".",on,"]:",cl)}return[mt===zu?Sc:Oc,Dt("fail"),Dt("zfail"),Dt("zpass")]});case sv:return wt(function(He){A.commandType(He,"object",ft,Ne.commandStr);var ut=He.factor|0,Be=He.units|0;return A.commandType(ut,"number",ft+".factor",Ne.commandStr),A.commandType(Be,"number",ft+".units",Ne.commandStr),[ut,Be]},function(He,ut,Be){A.optional(function(){He.assert(ut,Be+"&&typeof "+Be+'==="object"',"invalid "+mt)});var Et=ut.def(Be,".factor|0"),Dt=ut.def(Be,".units|0");return[Et,Dt]});case zl:return wt(function(He){var ut=0;return He==="front"?ut=Oc:He==="back"&&(ut=Sc),A.command(!!ut,ft,Ne.commandStr),ut},function(He,ut,Be){return A.optional(function(){He.assert(ut,Be+'==="front"||'+Be+'==="back"',"invalid cull.face")}),ut.def(Be,'==="front"?',Oc,":",Sc)});case zo:return wt(function(He){return A.command(typeof He=="number"&&He>=Rt.lineWidthDims[0]&&He<=Rt.lineWidthDims[1],"invalid line width, must be a positive number between "+Rt.lineWidthDims[0]+" and "+Rt.lineWidthDims[1],Ne.commandStr),He},function(He,ut,Be){return A.optional(function(){He.assert(ut,"typeof "+Be+'==="number"&&'+Be+">="+Rt.lineWidthDims[0]+"&&"+Be+"<="+Rt.lineWidthDims[1],"invalid line width")}),Be});case $d:return wt(function(He){return A.commandParameter(He,Mc,ft,Ne.commandStr),Mc[He]},function(He,ut,Be){return A.optional(function(){He.assert(ut,Be+'==="cw"||'+Be+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),ut.def(Be+'==="cw"?'+Og+":"+qd)});case Qf:return wt(function(He){return A.command(Cr(He)&&He.length===4,"color.mask must be length 4 array",Ne.commandStr),He.map(function(ut){return!!ut})},function(He,ut,Be){return A.optional(function(){He.assert(ut,He.shared.isArrayLike+"("+Be+")&&"+Be+".length===4","invalid color.mask")}),Fi(4,function(Et){return"!!"+Be+"["+Et+"]"})});case ed:return wt(function(He){A.command(typeof He=="object"&&He,ft,Ne.commandStr);var ut="value"in He?He.value:1,Be=!!He.invert;return A.command(typeof ut=="number"&&ut>=0&&ut<=1,"sample.coverage.value must be a number between 0 and 1",Ne.commandStr),[ut,Be]},function(He,ut,Be){A.optional(function(){He.assert(ut,Be+"&&typeof "+Be+'==="object"',"invalid sample.coverage")});var Et=ut.def('"value" in ',Be,"?+",Be,".value:1"),Dt=ut.def("!!",Be,".invert");return[Et,Dt]})}}),Tt}function Qa(Ve,Ne){var ct=Ve.static,St=Ve.dynamic,Tt={};return Object.keys(ct).forEach(function(mt){var ft=ct[mt],wt;if(typeof ft=="number"||typeof ft=="boolean")wt=Ga(function(){return ft});else if(typeof ft=="function"){var He=ft._reglType;He==="texture2d"||He==="textureCube"?wt=Ga(function(ut){return ut.link(ft)}):He==="framebuffer"||He==="framebufferCube"?(A.command(ft.color.length>0,'missing color attachment for framebuffer sent to uniform "'+mt+'"',Ne.commandStr),wt=Ga(function(ut){return ut.link(ft.color[0])})):A.commandRaise('invalid data for uniform "'+mt+'"',Ne.commandStr)}else Cr(ft)?wt=Ga(function(ut){var Be=ut.global.def("[",Fi(ft.length,function(Et){return A.command(typeof ft[Et]=="number"||typeof ft[Et]=="boolean","invalid uniform "+mt,ut.commandStr),ft[Et]}),"]");return Be}):A.commandRaise('invalid or missing data for uniform "'+mt+'"',Ne.commandStr);wt.value=ft,Tt[mt]=wt}),Object.keys(St).forEach(function(mt){var ft=St[mt];Tt[mt]=Uo(ft,function(wt,He){return wt.invoke(He,ft)})}),Tt}function ui(Ve,Ne){var ct=Ve.static,St=Ve.dynamic,Tt={};return Object.keys(ct).forEach(function(mt){var ft=ct[mt],wt=Me.id(mt),He=new zt;if(eh(ft))He.state=Es,He.buffer=Mt.getBuffer(Mt.create(ft,Cc,!1,!0)),He.type=0;else{var ut=Mt.getBuffer(ft);if(ut)He.state=Es,He.buffer=ut,He.type=0;else if(A.command(typeof ft=="object"&&ft,"invalid data for attribute "+mt,Ne.commandStr),"constant"in ft){var Be=ft.constant;He.buffer="null",He.state=Yf,typeof Be=="number"?He.x=Be:(A.command(Cr(Be)&&Be.length>0&&Be.length<=4,"invalid constant for attribute "+mt,Ne.commandStr),pc.forEach(function(mr,ri){ri<Be.length&&(He[mr]=Be[ri])}))}else{eh(ft.buffer)?ut=Mt.getBuffer(Mt.create(ft.buffer,Cc,!1,!0)):ut=Mt.getBuffer(ft.buffer),A.command(!!ut,'missing buffer for attribute "'+mt+'"',Ne.commandStr);var Et=ft.offset|0;A.command(Et>=0,'invalid offset for attribute "'+mt+'"',Ne.commandStr);var Dt=ft.stride|0;A.command(Dt>=0&&Dt<256,'invalid stride for attribute "'+mt+'", must be integer betweeen [0, 255]',Ne.commandStr);var on=ft.size|0;A.command(!("size"in ft)||on>0&&on<=4,'invalid size for attribute "'+mt+'", must be 1,2,3,4',Ne.commandStr);var un=!!ft.normalized,qt=0;"type"in ft&&(A.commandParameter(ft.type,Gs,"invalid type for attribute "+mt,Ne.commandStr),qt=Gs[ft.type]);var Gn=ft.divisor|0;"divisor"in ft&&(A.command(Gn===0||Ln,'cannot specify divisor for attribute "'+mt+'", instancing not supported',Ne.commandStr),A.command(Gn>=0,'invalid divisor for attribute "'+mt+'"',Ne.commandStr)),A.optional(function(){var mr=Ne.commandStr,ri=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(ft).forEach(function(vr){A.command(ri.indexOf(vr)>=0,'unknown parameter "'+vr+'" for attribute pointer "'+mt+'" (valid parameters are '+ri+")",mr)})}),He.buffer=ut,He.state=Es,He.size=on,He.normalized=un,He.type=qt||ut.dtype,He.offset=Et,He.stride=Dt,He.divisor=Gn}}Tt[mt]=Ga(function(mr,ri){var vr=mr.attribCache;if(wt in vr)return vr[wt];var Ar={isStream:!1};return Object.keys(He).forEach(function(Kr){Ar[Kr]=He[Kr]}),He.buffer&&(Ar.buffer=mr.link(He.buffer),Ar.type=Ar.type||Ar.buffer+".dtype"),vr[wt]=Ar,Ar})}),Object.keys(St).forEach(function(mt){var ft=St[mt];function wt(He,ut){var Be=He.invoke(ut,ft),Et=He.shared,Dt=He.constants,on=Et.isBufferArgs,un=Et.buffer;A.optional(function(){He.assert(ut,Be+"&&(typeof "+Be+'==="object"||typeof '+Be+'==="function")&&('+on+"("+Be+")||"+un+".getBuffer("+Be+")||"+un+".getBuffer("+Be+".buffer)||"+on+"("+Be+'.buffer)||("constant" in '+Be+"&&(typeof "+Be+'.constant==="number"||'+Et.isArrayLike+"("+Be+".constant))))",'invalid dynamic attribute "'+mt+'"')});var qt={isStream:ut.def(!1)},Gn=new zt;Gn.state=Es,Object.keys(Gn).forEach(function(Ar){qt[Ar]=ut.def(""+Gn[Ar])});var mr=qt.buffer,ri=qt.type;ut("if(",on,"(",Be,")){",qt.isStream,"=true;",mr,"=",un,".createStream(",Cc,",",Be,");",ri,"=",mr,".dtype;","}else{",mr,"=",un,".getBuffer(",Be,");","if(",mr,"){",ri,"=",mr,".dtype;",'}else if("constant" in ',Be,"){",qt.state,"=",Yf,";","if(typeof "+Be+'.constant === "number"){',qt[pc[0]],"=",Be,".constant;",pc.slice(1).map(function(Ar){return qt[Ar]}).join("="),"=0;","}else{",pc.map(function(Ar,Kr){return qt[Ar]+"="+Be+".constant.length>"+Kr+"?"+Be+".constant["+Kr+"]:0;"}).join(""),"}}else{","if(",on,"(",Be,".buffer)){",mr,"=",un,".createStream(",Cc,",",Be,".buffer);","}else{",mr,"=",un,".getBuffer(",Be,".buffer);","}",ri,'="type" in ',Be,"?",Dt.glTypes,"[",Be,".type]:",mr,".dtype;",qt.normalized,"=!!",Be,".normalized;");function vr(Ar){ut(qt[Ar],"=",Be,".",Ar,"|0;")}return vr("size"),vr("offset"),vr("stride"),vr("divisor"),ut("}}"),ut.exit("if(",qt.isStream,"){",un,".destroyStream(",mr,");","}"),qt}Tt[mt]=Uo(ft,wt)}),Tt}function za(Ve,Ne){var ct=Ve.static,St=Ve.dynamic;if(bc in ct){var Tt=ct[bc];return Tt!==null&&Rn.getVAO(Tt)===null&&(Tt=Rn.createVAO(Tt)),Ga(function(ft){return ft.link(Rn.getVAO(Tt))})}else if(bc in St){var mt=St[bc];return Uo(mt,function(ft,wt){var He=ft.invoke(wt,mt);return wt.def(ft.shared.vao+".getVAO("+He+")")})}return null}function la(Ve){var Ne=Ve.static,ct=Ve.dynamic,St={};return Object.keys(Ne).forEach(function(Tt){var mt=Ne[Tt];St[Tt]=Ga(function(ft,wt){return typeof mt=="number"||typeof mt=="boolean"?""+mt:ft.link(mt)})}),Object.keys(ct).forEach(function(Tt){var mt=ct[Tt];St[Tt]=Uo(mt,function(ft,wt){return ft.invoke(wt,mt)})}),St}function ca(Ve,Ne,ct,St,Tt){var mt=Ve.static,ft=Ve.dynamic;A.optional(function(){var vr=[Ul,nd,rd,Vl,Hl,yc,ul,gf,Uu,bc].concat(yn);function Ar(Kr){Object.keys(Kr).forEach(function(ki){A.command(vr.indexOf(ki)>=0,'unknown parameter "'+ki+'"',Tt.commandStr)})}Ar(mt),Ar(ft)});var wt=zr(Ve,Ne),He=dr(Ve,Tt),ut=si(Ve,He,Tt),Be=Pi(Ve,Tt),Et=Ia(Ve,Tt),Dt=oi(Ve,Tt,wt);function on(vr){var Ar=ut[vr];Ar&&(Et[vr]=Ar)}on(sl),on(_n(td));var un=Object.keys(Et).length>0,qt={framebuffer:He,draw:Be,shader:Dt,state:Et,dirty:un,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(qt.profile=ai(Ve,Tt),qt.uniforms=Qa(ct,Tt),qt.drawVAO=qt.scopeVAO=za(Ve,Tt),!qt.drawVAO&&Dt.program&&!wt&&at.angle_instanced_arrays){var Gn=!0,mr=Dt.program.attributes.map(function(vr){var Ar=Ne.static[vr];return Gn=Gn&&!!Ar,Ar});if(Gn&&mr.length>0){var ri=Rn.getVAO(Rn.createVAO(mr));qt.drawVAO=new $o(null,null,null,function(vr,Ar){return vr.link(ri)}),qt.useVAO=!0}}return wt?qt.useVAO=!0:qt.attributes=ui(Ne,Tt),qt.context=la(St,Tt),qt}function Ra(Ve,Ne,ct){var St=Ve.shared,Tt=St.context,mt=Ve.scope();Object.keys(ct).forEach(function(ft){Ne.save(Tt,"."+ft);var wt=ct[ft],He=wt.append(Ve,Ne);Array.isArray(He)?mt(Tt,".",ft,"=[",He.join(),"];"):mt(Tt,".",ft,"=",He,";")}),Ne(mt)}function Xa(Ve,Ne,ct,St){var Tt=Ve.shared,mt=Tt.gl,ft=Tt.framebuffer,wt;ar&&(wt=Ne.def(Tt.extensions,".webgl_draw_buffers"));var He=Ve.constants,ut=He.drawBuffer,Be=He.backBuffer,Et;ct?Et=ct.append(Ve,Ne):Et=Ne.def(ft,".next"),St||Ne("if(",Et,"!==",ft,".cur){"),Ne("if(",Et,"){",mt,".bindFramebuffer(",hd,",",Et,".framebuffer);"),ar&&Ne(wt,".drawBuffersWEBGL(",ut,"[",Et,".colorAttachments.length]);"),Ne("}else{",mt,".bindFramebuffer(",hd,",null);"),ar&&Ne(wt,".drawBuffersWEBGL(",Be,");"),Ne("}",ft,".cur=",Et,";"),St||Ne("}")}function pa(Ve,Ne,ct){var St=Ve.shared,Tt=St.gl,mt=Ve.current,ft=Ve.next,wt=St.current,He=St.next,ut=Ve.cond(wt,".dirty");yn.forEach(function(Be){var Et=_n(Be);if(!(Et in ct.state)){var Dt,on;if(Et in ft){Dt=ft[Et],on=mt[Et];var un=Fi(rn[Et].length,function(Gn){return ut.def(Dt,"[",Gn,"]")});ut(Ve.cond(un.map(function(Gn,mr){return Gn+"!=="+on+"["+mr+"]"}).join("||")).then(Tt,".",On[Et],"(",un,");",un.map(function(Gn,mr){return on+"["+mr+"]="+Gn}).join(";"),";"))}else{Dt=ut.def(He,".",Et);var qt=Ve.cond(Dt,"!==",wt,".",Et);ut(qt),Et in wn?qt(Ve.cond(Dt).then(Tt,".enable(",wn[Et],");").else(Tt,".disable(",wn[Et],");"),wt,".",Et,"=",Dt,";"):qt(Tt,".",On[Et],"(",Dt,");",wt,".",Et,"=",Dt,";")}}}),Object.keys(ct.state).length===0&&ut(wt,".dirty=false;"),Ne(ut)}function Ea(Ve,Ne,ct,St){var Tt=Ve.shared,mt=Ve.current,ft=Tt.current,wt=Tt.gl;mv(Object.keys(ct)).forEach(function(He){var ut=ct[He];if(!(St&&!St(ut))){var Be=ut.append(Ve,Ne);if(wn[He]){var Et=wn[He];Cu(ut)?Be?Ne(wt,".enable(",Et,");"):Ne(wt,".disable(",Et,");"):Ne(Ve.cond(Be).then(wt,".enable(",Et,");").else(wt,".disable(",Et,");")),Ne(ft,".",He,"=",Be,";")}else if(Cr(Be)){var Dt=mt[He];Ne(wt,".",On[He],"(",Be,");",Be.map(function(on,un){return Dt+"["+un+"]="+on}).join(";"),";")}else Ne(wt,".",On[He],"(",Be,");",ft,".",He,"=",Be,";")}})}function Ua(Ve,Ne){Ln&&(Ve.instancing=Ne.def(Ve.shared.extensions,".angle_instanced_arrays"))}function qr(Ve,Ne,ct,St,Tt){var mt=Ve.shared,ft=Ve.stats,wt=mt.current,He=mt.timer,ut=ct.profile;function Be(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Et,Dt;function on(vr){Et=Ne.def(),vr(Et,"=",Be(),";"),typeof Tt=="string"?vr(ft,".count+=",Tt,";"):vr(ft,".count++;"),Yn&&(St?(Dt=Ne.def(),vr(Dt,"=",He,".getNumPendingQueries();")):vr(He,".beginQuery(",ft,");"))}function un(vr){vr(ft,".cpuTime+=",Be(),"-",Et,";"),Yn&&(St?vr(He,".pushScopeStats(",Dt,",",He,".getNumPendingQueries(),",ft,");"):vr(He,".endQuery();"))}function qt(vr){var Ar=Ne.def(wt,".profile");Ne(wt,".profile=",vr,";"),Ne.exit(wt,".profile=",Ar,";")}var Gn;if(ut){if(Cu(ut)){ut.enable?(on(Ne),un(Ne.exit),qt("true")):qt("false");return}Gn=ut.append(Ve,Ne),qt(Gn)}else Gn=Ne.def(wt,".profile");var mr=Ve.block();on(mr),Ne("if(",Gn,"){",mr,"}");var ri=Ve.block();un(ri),Ne.exit("if(",Gn,"){",ri,"}")}function Po(Ve,Ne,ct,St,Tt){var mt=Ve.shared;function ft(He){switch(He){case mf:case ld:case cd:return 2;case Wo:case Ec:case wc:return 3;case pu:case mu:case xc:return 4;default:return 1}}function wt(He,ut,Be){var Et=mt.gl,Dt=Ne.def(He,".location"),on=Ne.def(mt.attributes,"[",Dt,"]"),un=Be.state,qt=Be.buffer,Gn=[Be.x,Be.y,Be.z,Be.w],mr=["buffer","normalized","offset","stride"];function ri(){Ne("if(!",on,".buffer){",Et,".enableVertexAttribArray(",Dt,");}");var Ar=Be.type,Kr;if(Be.size?Kr=Ne.def(Be.size,"||",ut):Kr=ut,Ne("if(",on,".type!==",Ar,"||",on,".size!==",Kr,"||",mr.map(function(Na){return on+"."+Na+"!=="+Be[Na]}).join("||"),"){",Et,".bindBuffer(",Cc,",",qt,".buffer);",Et,".vertexAttribPointer(",[Dt,Kr,Ar,Be.normalized,Be.stride,Be.offset],");",on,".type=",Ar,";",on,".size=",Kr,";",mr.map(function(Na){return on+"."+Na+"="+Be[Na]+";"}).join(""),"}"),Ln){var ki=Be.divisor;Ne("if(",on,".divisor!==",ki,"){",Ve.instancing,".vertexAttribDivisorANGLE(",[Dt,ki],");",on,".divisor=",ki,";}")}}function vr(){Ne("if(",on,".buffer){",Et,".disableVertexAttribArray(",Dt,");",on,".buffer=null;","}if(",pc.map(function(Ar,Kr){return on+"."+Ar+"!=="+Gn[Kr]}).join("||"),"){",Et,".vertexAttrib4f(",Dt,",",Gn,");",pc.map(function(Ar,Kr){return on+"."+Ar+"="+Gn[Kr]+";"}).join(""),"}")}un===Es?ri():un===Yf?vr():(Ne("if(",un,"===",Es,"){"),ri(),Ne("}else{"),vr(),Ne("}"))}St.forEach(function(He){var ut=He.name,Be=ct.attributes[ut],Et;if(Be){if(!Tt(Be))return;Et=Be.append(Ve,Ne)}else{if(!Tt(th))return;var Dt=Ve.scopeAttrib(ut);A.optional(function(){Ve.assert(Ne,Dt+".state","missing attribute "+ut)}),Et={},Object.keys(new zt).forEach(function(on){Et[on]=Ne.def(Dt,".",on)})}wt(Ve.link(He),ft(He.info.type),Et)})}function Gi(Ve,Ne,ct,St,Tt){for(var mt=Ve.shared,ft=mt.gl,wt,He=0;He<St.length;++He){var ut=St[He],Be=ut.name,Et=ut.info.type,Dt=ct.uniforms[Be],on=Ve.link(ut),un=on+".location",qt;if(Dt){if(!Tt(Dt))continue;if(Cu(Dt)){var Gn=Dt.value;if(A.command(Gn!==null&&typeof Gn!="undefined",'missing uniform "'+Be+'"',Ve.commandStr),Et===yf||Et===bf){A.command(typeof Gn=="function"&&(Et===yf&&(Gn._reglType==="texture2d"||Gn._reglType==="framebuffer")||Et===bf&&(Gn._reglType==="textureCube"||Gn._reglType==="framebufferCube")),"invalid texture for uniform "+Be,Ve.commandStr);var mr=Ve.link(Gn._texture||Gn.color[0]._texture);Ne(ft,".uniform1i(",un,",",mr+".bind());"),Ne.exit(mr,".unbind();")}else if(Et===rs||Et===fd||Et===Ps){A.optional(function(){A.command(Cr(Gn),"invalid matrix for uniform "+Be,Ve.commandStr),A.command(Et===rs&&Gn.length===4||Et===fd&&Gn.length===9||Et===Ps&&Gn.length===16,"invalid length for matrix uniform "+Be,Ve.commandStr)});var ri=Ve.global.def("new Float32Array(["+Array.prototype.slice.call(Gn)+"])"),vr=2;Et===fd?vr=3:Et===Ps&&(vr=4),Ne(ft,".uniformMatrix",vr,"fv(",un,",false,",ri,");")}else{switch(Et){case sd:A.commandType(Gn,"number","uniform "+Be,Ve.commandStr),wt="1f";break;case mf:A.command(Cr(Gn)&&Gn.length===2,"uniform "+Be,Ve.commandStr),wt="2f";break;case Wo:A.command(Cr(Gn)&&Gn.length===3,"uniform "+Be,Ve.commandStr),wt="3f";break;case pu:A.command(Cr(Gn)&&Gn.length===4,"uniform "+Be,Ve.commandStr),wt="4f";break;case Vu:A.commandType(Gn,"boolean","uniform "+Be,Ve.commandStr),wt="1i";break;case ud:A.commandType(Gn,"number","uniform "+Be,Ve.commandStr),wt="1i";break;case cd:A.command(Cr(Gn)&&Gn.length===2,"uniform "+Be,Ve.commandStr),wt="2i";break;case ld:A.command(Cr(Gn)&&Gn.length===2,"uniform "+Be,Ve.commandStr),wt="2i";break;case wc:A.command(Cr(Gn)&&Gn.length===3,"uniform "+Be,Ve.commandStr),wt="3i";break;case Ec:A.command(Cr(Gn)&&Gn.length===3,"uniform "+Be,Ve.commandStr),wt="3i";break;case xc:A.command(Cr(Gn)&&Gn.length===4,"uniform "+Be,Ve.commandStr),wt="4i";break;case mu:A.command(Cr(Gn)&&Gn.length===4,"uniform "+Be,Ve.commandStr),wt="4i";break}Ne(ft,".uniform",wt,"(",un,",",Cr(Gn)?Array.prototype.slice.call(Gn):Gn,");")}continue}else qt=Dt.append(Ve,Ne)}else{if(!Tt(th))continue;qt=Ne.def(mt.uniforms,"[",Me.id(Be),"]")}Et===yf?(A(!Array.isArray(qt),"must specify a scalar prop for textures"),Ne("if(",qt,"&&",qt,'._reglType==="framebuffer"){',qt,"=",qt,".color[0];","}")):Et===bf&&(A(!Array.isArray(qt),"must specify a scalar prop for cube maps"),Ne("if(",qt,"&&",qt,'._reglType==="framebufferCube"){',qt,"=",qt,".color[0];","}")),A.optional(function(){function os(Eu,Dg){Ve.assert(Ne,Eu,'bad data or missing for uniform "'+Be+'".  '+Dg)}function Cv(Eu){A(!Array.isArray(qt),"must not specify an array type for uniform"),os("typeof "+qt+'==="'+Eu+'"',"invalid type, expected "+Eu)}function Xs(Eu,Dg){Array.isArray(qt)?A(qt.length===Eu,"must have length "+Eu):os(mt.isArrayLike+"("+qt+")&&"+qt+".length==="+Eu,"invalid vector, should have length "+Eu,Ve.commandStr)}function kg(Eu){A(!Array.isArray(qt),"must not specify a value type"),os("typeof "+qt+'==="function"&&'+qt+'._reglType==="texture'+(Eu===Ci?"2d":"Cube")+'"',"invalid texture type",Ve.commandStr)}switch(Et){case ud:Cv("number");break;case ld:Xs(2,"number");break;case Ec:Xs(3,"number");break;case mu:Xs(4,"number");break;case sd:Cv("number");break;case mf:Xs(2,"number");break;case Wo:Xs(3,"number");break;case pu:Xs(4,"number");break;case Vu:Cv("boolean");break;case cd:Xs(2,"boolean");break;case wc:Xs(3,"boolean");break;case xc:Xs(4,"boolean");break;case rs:Xs(4,"number");break;case fd:Xs(9,"number");break;case Ps:Xs(16,"number");break;case yf:kg(Ci);break;case bf:kg(dm);break}});var Ar=1;switch(Et){case yf:case bf:var Kr=Ne.def(qt,"._texture");Ne(ft,".uniform1i(",un,",",Kr,".bind());"),Ne.exit(Kr,".unbind();");continue;case ud:case Vu:wt="1i";break;case ld:case cd:wt="2i",Ar=2;break;case Ec:case wc:wt="3i",Ar=3;break;case mu:case xc:wt="4i",Ar=4;break;case sd:wt="1f";break;case mf:wt="2f",Ar=2;break;case Wo:wt="3f",Ar=3;break;case pu:wt="4f",Ar=4;break;case rs:wt="Matrix2fv";break;case fd:wt="Matrix3fv";break;case Ps:wt="Matrix4fv";break}if(Ne(ft,".uniform",wt,"(",un,","),wt.charAt(0)==="M"){var ki=Math.pow(Et-rs+2,2),Na=Ve.global.def("new Float32Array(",ki,")");Array.isArray(qt)?Ne("false,(",Fi(ki,function(os){return Na+"["+os+"]="+qt[os]}),",",Na,")"):Ne("false,(Array.isArray(",qt,")||",qt," instanceof Float32Array)?",qt,":(",Fi(ki,function(os){return Na+"["+os+"]="+qt+"["+os+"]"}),",",Na,")")}else Ar>1?Ne(Fi(Ar,function(os){return Array.isArray(qt)?qt[os]:qt+"["+os+"]"})):(A(!Array.isArray(qt),"uniform value must not be an array"),Ne(qt));Ne(");")}}function Ir(Ve,Ne,ct,St){var Tt=Ve.shared,mt=Tt.gl,ft=Tt.draw,wt=St.draw;function He(){var Kr=wt.elements,ki,Na=Ne;return Kr?((Kr.contextDep&&St.contextDynamic||Kr.propDep)&&(Na=ct),ki=Kr.append(Ve,Na)):ki=Na.def(ft,".",Vl),ki&&Na("if("+ki+")"+mt+".bindBuffer("+cv+","+ki+".buffer.buffer);"),ki}function ut(){var Kr=wt.count,ki,Na=Ne;return Kr?((Kr.contextDep&&St.contextDynamic||Kr.propDep)&&(Na=ct),ki=Kr.append(Ve,Na),A.optional(function(){Kr.MISSING&&Ve.assert(Ne,"false","missing vertex count"),Kr.DYNAMIC&&Ve.assert(Na,ki+">=0","missing vertex count")})):(ki=Na.def(ft,".",ul),A.optional(function(){Ve.assert(Na,ki+">=0","missing vertex count")})),ki}var Be=He();function Et(Kr){var ki=wt[Kr];return ki?ki.contextDep&&St.contextDynamic||ki.propDep?ki.append(Ve,ct):ki.append(Ve,Ne):Ne.def(ft,".",Kr)}var Dt=Et(Hl),on=Et(yc),un=ut();if(typeof un=="number"){if(un===0)return}else ct("if(",un,"){"),ct.exit("}");var qt,Gn;Ln&&(qt=Et(gf),Gn=Ve.instancing);var mr=Be+".type",ri=wt.elements&&Cu(wt.elements);function vr(){function Kr(){ct(Gn,".drawElementsInstancedANGLE(",[Dt,un,mr,on+"<<(("+mr+"-"+mc+")>>1)",qt],");")}function ki(){ct(Gn,".drawArraysInstancedANGLE(",[Dt,on,un,qt],");")}Be?ri?Kr():(ct("if(",Be,"){"),Kr(),ct("}else{"),ki(),ct("}")):ki()}function Ar(){function Kr(){ct(mt+".drawElements("+[Dt,un,mr,on+"<<(("+mr+"-"+mc+")>>1)"]+");")}function ki(){ct(mt+".drawArrays("+[Dt,on,un]+");")}Be?ri?Kr():(ct("if(",Be,"){"),Kr(),ct("}else{"),ki(),ct("}")):ki()}Ln&&(typeof qt!="number"||qt>=0)?typeof qt=="string"?(ct("if(",qt,">0){"),vr(),ct("}else if(",qt,"<0){"),Ar(),ct("}")):vr():Ar()}function ei(Ve,Ne,ct,St,Tt){var mt=Nr(),ft=mt.proc("body",Tt);return A.optional(function(){mt.commandStr=Ne.commandStr,mt.command=mt.link(Ne.commandStr)}),Ln&&(mt.instancing=ft.def(mt.shared.extensions,".angle_instanced_arrays")),Ve(mt,ft,ct,St),mt.compile().body}function Ei(Ve,Ne,ct,St){Ua(Ve,Ne),ct.useVAO?ct.drawVAO?Ne(Ve.shared.vao,".setVAO(",ct.drawVAO.append(Ve,Ne),");"):Ne(Ve.shared.vao,".setVAO(",Ve.shared.vao,".targetVAO);"):(Ne(Ve.shared.vao,".setVAO(null);"),Po(Ve,Ne,ct,St.attributes,function(){return!0})),Gi(Ve,Ne,ct,St.uniforms,function(){return!0}),Ir(Ve,Ne,Ne,ct)}function mo(Ve,Ne){var ct=Ve.proc("draw",1);Ua(Ve,ct),Ra(Ve,ct,Ne.context),Xa(Ve,ct,Ne.framebuffer),pa(Ve,ct,Ne),Ea(Ve,ct,Ne.state),qr(Ve,ct,Ne,!1,!0);var St=Ne.shader.progVar.append(Ve,ct);if(ct(Ve.shared.gl,".useProgram(",St,".program);"),Ne.shader.program)Ei(Ve,ct,Ne,Ne.shader.program);else{ct(Ve.shared.vao,".setVAO(null);");var Tt=Ve.global.def("{}"),mt=ct.def(St,".id"),ft=ct.def(Tt,"[",mt,"]");ct(Ve.cond(ft).then(ft,".call(this,a0);").else(ft,"=",Tt,"[",mt,"]=",Ve.link(function(wt){return ei(Ei,Ve,Ne,wt,1)}),"(",St,");",ft,".call(this,a0);"))}Object.keys(Ne.state).length>0&&ct(Ve.shared.current,".dirty=true;")}function as(Ve,Ne,ct,St){Ve.batchId="a1",Ua(Ve,Ne);function Tt(){return!0}Po(Ve,Ne,ct,St.attributes,Tt),Gi(Ve,Ne,ct,St.uniforms,Tt),Ir(Ve,Ne,Ne,ct)}function Tc(Ve,Ne,ct,St){Ua(Ve,Ne);var Tt=ct.contextDep,mt=Ne.def(),ft="a0",wt="a1",He=Ne.def();Ve.shared.props=He,Ve.batchId=mt;var ut=Ve.scope(),Be=Ve.scope();Ne(ut.entry,"for(",mt,"=0;",mt,"<",wt,";++",mt,"){",He,"=",ft,"[",mt,"];",Be,"}",ut.exit);function Et(mr){return mr.contextDep&&Tt||mr.propDep}function Dt(mr){return!Et(mr)}if(ct.needsContext&&Ra(Ve,Be,ct.context),ct.needsFramebuffer&&Xa(Ve,Be,ct.framebuffer),Ea(Ve,Be,ct.state,Et),ct.profile&&Et(ct.profile)&&qr(Ve,Be,ct,!1,!0),St)ct.useVAO?ct.drawVAO?Et(ct.drawVAO)?Be(Ve.shared.vao,".setVAO(",ct.drawVAO.append(Ve,Be),");"):ut(Ve.shared.vao,".setVAO(",ct.drawVAO.append(Ve,ut),");"):ut(Ve.shared.vao,".setVAO(",Ve.shared.vao,".targetVAO);"):(ut(Ve.shared.vao,".setVAO(null);"),Po(Ve,ut,ct,St.attributes,Dt),Po(Ve,Be,ct,St.attributes,Et)),Gi(Ve,ut,ct,St.uniforms,Dt),Gi(Ve,Be,ct,St.uniforms,Et),Ir(Ve,ut,Be,ct);else{var on=Ve.global.def("{}"),un=ct.shader.progVar.append(Ve,Be),qt=Be.def(un,".id"),Gn=Be.def(on,"[",qt,"]");Be(Ve.shared.gl,".useProgram(",un,".program);","if(!",Gn,"){",Gn,"=",on,"[",qt,"]=",Ve.link(function(mr){return ei(as,Ve,ct,mr,2)}),"(",un,");}",Gn,".call(this,a0[",mt,"],",mt,");")}}function Ze(Ve,Ne){var ct=Ve.proc("batch",2);Ve.batchId="0",Ua(Ve,ct);var St=!1,Tt=!0;Object.keys(Ne.context).forEach(function(on){St=St||Ne.context[on].propDep}),St||(Ra(Ve,ct,Ne.context),Tt=!1);var mt=Ne.framebuffer,ft=!1;mt?(mt.propDep?St=ft=!0:mt.contextDep&&St&&(ft=!0),ft||Xa(Ve,ct,mt)):Xa(Ve,ct,null),Ne.state.viewport&&Ne.state.viewport.propDep&&(St=!0);function wt(on){return on.contextDep&&St||on.propDep}pa(Ve,ct,Ne),Ea(Ve,ct,Ne.state,function(on){return!wt(on)}),(!Ne.profile||!wt(Ne.profile))&&qr(Ve,ct,Ne,!1,"a1"),Ne.contextDep=St,Ne.needsContext=Tt,Ne.needsFramebuffer=ft;var He=Ne.shader.progVar;if(He.contextDep&&St||He.propDep)Tc(Ve,ct,Ne,null);else{var ut=He.append(Ve,ct);if(ct(Ve.shared.gl,".useProgram(",ut,".program);"),Ne.shader.program)Tc(Ve,ct,Ne,Ne.shader.program);else{ct(Ve.shared.vao,".setVAO(null);");var Be=Ve.global.def("{}"),Et=ct.def(ut,".id"),Dt=ct.def(Be,"[",Et,"]");ct(Ve.cond(Dt).then(Dt,".call(this,a0,a1);").else(Dt,"=",Be,"[",Et,"]=",Ve.link(function(on){return ei(Tc,Ve,Ne,on,2)}),"(",ut,");",Dt,".call(this,a0,a1);"))}}Object.keys(Ne.state).length>0&&ct(Ve.shared.current,".dirty=true;")}function Ht(Ve,Ne){var ct=Ve.proc("scope",3);Ve.batchId="a2";var St=Ve.shared,Tt=St.current;Ra(Ve,ct,Ne.context),Ne.framebuffer&&Ne.framebuffer.append(Ve,ct),mv(Object.keys(Ne.state)).forEach(function(ft){var wt=Ne.state[ft],He=wt.append(Ve,ct);Cr(He)?He.forEach(function(ut,Be){ct.set(Ve.next[ft],"["+Be+"]",ut)}):ct.set(St.next,"."+ft,He)}),qr(Ve,ct,Ne,!0,!0),[Vl,yc,ul,gf,Hl].forEach(function(ft){var wt=Ne.draw[ft];!wt||ct.set(St.draw,"."+ft,""+wt.append(Ve,ct))}),Object.keys(Ne.uniforms).forEach(function(ft){var wt=Ne.uniforms[ft].append(Ve,ct);Array.isArray(wt)&&(wt="["+wt.join()+"]"),ct.set(St.uniforms,"["+Me.id(ft)+"]",wt)}),Object.keys(Ne.attributes).forEach(function(ft){var wt=Ne.attributes[ft].append(Ve,ct),He=Ve.scopeAttrib(ft);Object.keys(new zt).forEach(function(ut){ct.set(He,"."+ut,wt[ut])})}),Ne.scopeVAO&&ct.set(St.vao,".targetVAO",Ne.scopeVAO.append(Ve,ct));function mt(ft){var wt=Ne.shader[ft];wt&&ct.set(St.shader,"."+ft,wt.append(Ve,ct))}mt(nd),mt(rd),Object.keys(Ne.state).length>0&&(ct(Tt,".dirty=true;"),ct.exit(Tt,".dirty=true;")),ct("a1(",Ve.shared.context,",a0,",Ve.batchId,");")}function Nt(Ve){if(!(typeof Ve!="object"||Cr(Ve))){for(var Ne=Object.keys(Ve),ct=0;ct<Ne.length;++ct)if(cr.isDynamic(Ve[Ne[ct]]))return!0;return!1}}function ur(Ve,Ne,ct){var St=Ne.static[ct];if(!St||!Nt(St))return;var Tt=Ve.global,mt=Object.keys(St),ft=!1,wt=!1,He=!1,ut=Ve.global.def("{}");mt.forEach(function(Et){var Dt=St[Et];if(cr.isDynamic(Dt)){typeof Dt=="function"&&(Dt=St[Et]=cr.unbox(Dt));var on=Uo(Dt,null);ft=ft||on.thisDep,He=He||on.propDep,wt=wt||on.contextDep}else{switch(Tt(ut,".",Et,"="),typeof Dt){case"number":Tt(Dt);break;case"string":Tt('"',Dt,'"');break;case"object":Array.isArray(Dt)&&Tt("[",Dt.join(),"]");break;default:Tt(Ve.link(Dt));break}Tt(";")}});function Be(Et,Dt){mt.forEach(function(on){var un=St[on];if(!!cr.isDynamic(un)){var qt=Et.invoke(Dt,un);Dt(ut,".",on,"=",qt,";")}})}Ne.dynamic[ct]=new cr.DynamicVariable(Zf,{thisDep:ft,contextDep:wt,propDep:He,ref:ut,append:Be}),delete Ne.static[ct]}function ti(Ve,Ne,ct,St,Tt){var mt=Nr();mt.stats=mt.link(Tt),Object.keys(Ne.static).forEach(function(wt){ur(mt,Ne,wt)}),id.forEach(function(wt){ur(mt,Ve,wt)});var ft=ca(Ve,Ne,ct,St,mt);return mo(mt,ft),Ht(mt,ft),Ze(mt,ft),C(mt.compile(),{destroy:function(){ft.shader.program.destroy()}})}return{next:hr,current:rn,procs:function(){var Ve=Nr(),Ne=Ve.proc("poll"),ct=Ve.proc("refresh"),St=Ve.block();Ne(St),ct(St);var Tt=Ve.shared,mt=Tt.gl,ft=Tt.next,wt=Tt.current;St(wt,".dirty=false;"),Xa(Ve,Ne),Xa(Ve,ct,null,!0);var He;Ln&&(He=Ve.link(Ln)),at.oes_vertex_array_object&&ct(Ve.link(at.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var ut=0;ut<Rt.maxAttributes;++ut){var Be=ct.def(Tt.attributes,"[",ut,"]"),Et=Ve.cond(Be,".buffer");Et.then(mt,".enableVertexAttribArray(",ut,");",mt,".bindBuffer(",Cc,",",Be,".buffer.buffer);",mt,".vertexAttribPointer(",ut,",",Be,".size,",Be,".type,",Be,".normalized,",Be,".stride,",Be,".offset);").else(mt,".disableVertexAttribArray(",ut,");",mt,".vertexAttrib4f(",ut,",",Be,".x,",Be,".y,",Be,".z,",Be,".w);",Be,".buffer=null;"),ct(Et),Ln&&ct(He,".vertexAttribDivisorANGLE(",ut,",",Be,".divisor);")}return ct(Ve.shared.vao,".currentVAO=null;",Ve.shared.vao,".setVAO(",Ve.shared.vao,".targetVAO);"),Object.keys(wn).forEach(function(Dt){var on=wn[Dt],un=St.def(ft,".",Dt),qt=Ve.block();qt("if(",un,"){",mt,".enable(",on,")}else{",mt,".disable(",on,")}",wt,".",Dt,"=",un,";"),ct(qt),Ne("if(",un,"!==",wt,".",Dt,"){",qt,"}")}),Object.keys(On).forEach(function(Dt){var on=On[Dt],un=rn[Dt],qt,Gn,mr=Ve.block();if(mr(mt,".",on,"("),Cr(un)){var ri=un.length;qt=Ve.global.def(ft,".",Dt),Gn=Ve.global.def(wt,".",Dt),mr(Fi(ri,function(vr){return qt+"["+vr+"]"}),");",Fi(ri,function(vr){return Gn+"["+vr+"]="+qt+"["+vr+"];"}).join("")),Ne("if(",Fi(ri,function(vr){return qt+"["+vr+"]!=="+Gn+"["+vr+"]"}).join("||"),"){",mr,"}")}else qt=St.def(ft,".",Dt),Gn=St.def(wt,".",Dt),mr(qt,");",wt,".",Dt,"=",qt,";"),Ne("if(",qt,"!==",Gn,"){",mr,"}");ct(mr)}),Ve.compile()}(),compile:ti}}function Ef(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Mg=34918,vd=34919,rh=35007,ih=function(Me,at){if(!at.ext_disjoint_timer_query)return null;var Rt=[];function Mt(){return Rt.pop()||at.ext_disjoint_timer_query.createQueryEXT()}function Zt(ar){Rt.push(ar)}var Bt=[];function mn(ar){var rn=Mt();at.ext_disjoint_timer_query.beginQueryEXT(rh,rn),Bt.push(rn),Bn(Bt.length-1,Bt.length,ar)}function Wn(){at.ext_disjoint_timer_query.endQueryEXT(rh)}function Rn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Nn=[];function Pn(){return Nn.pop()||new Rn}function nr(ar){Nn.push(ar)}var Yn=[];function Bn(ar,rn,hr){var yn=Pn();yn.startQueryIndex=ar,yn.endQueryIndex=rn,yn.sum=0,yn.stats=hr,Yn.push(yn)}var zt=[],Ft=[];function Ln(){var ar,rn,hr=Bt.length;if(hr!==0){Ft.length=Math.max(Ft.length,hr+1),zt.length=Math.max(zt.length,hr+1),zt[0]=0,Ft[0]=0;var yn=0;for(ar=0,rn=0;rn<Bt.length;++rn){var wn=Bt[rn];at.ext_disjoint_timer_query.getQueryObjectEXT(wn,vd)?(yn+=at.ext_disjoint_timer_query.getQueryObjectEXT(wn,Mg),Zt(wn)):Bt[ar++]=wn,zt[rn+1]=yn,Ft[rn+1]=ar}for(Bt.length=ar,ar=0,rn=0;rn<Yn.length;++rn){var On=Yn[rn],_n=On.startQueryIndex,br=On.endQueryIndex;On.sum+=zt[br]-zt[_n];var Gr=Ft[_n],Zn=Ft[br];Zn===Gr?(On.stats.gpuTime+=On.sum/1e6,nr(On)):(On.startQueryIndex=Gr,On.endQueryIndex=Zn,Yn[ar++]=On)}Yn.length=ar}}return{beginQuery:mn,endQuery:Wn,pushScopeStats:Bn,update:Ln,getNumPendingQueries:function(){return Bt.length},clear:function(){Rt.push.apply(Rt,Bt);for(var rn=0;rn<Rt.length;rn++)at.ext_disjoint_timer_query.deleteQueryEXT(Rt[rn]);Bt.length=0,Rt.length=0},restore:function(){Bt.length=0,Rt.length=0}}},Ac=16384,Ag=256,ga=1024,Tg=34962,wf="webglcontextlost",Pg="webglcontextrestored",yv=1,gd=2,mm=3;function ks(ve,Me){for(var at=0;at<ve.length;++at)if(ve[at]===Me)return at;return-1}function bv(ve){var Me=Ka(ve);if(!Me)return null;var at=Me.gl,Rt=at.getContextAttributes(),Mt=at.isContextLost(),Zt=Ya(at,Me);if(!Zt)return null;var Bt=Sr(),mn=Ef(),Wn=Zt.extensions,Rn=ih(at,Wn),Nn=pr(),Pn=at.drawingBufferWidth,nr=at.drawingBufferHeight,Yn={tick:0,time:0,viewportWidth:Pn,viewportHeight:nr,framebufferWidth:Pn,framebufferHeight:nr,drawingBufferWidth:Pn,drawingBufferHeight:nr,pixelRatio:Me.pixelRatio},Bn={},zt={elements:null,primitive:4,count:-1,offset:0,instances:-1},Ft=Zo(at,Wn),Ln=zf(at,mn,Me,rn),ar=hu(at,Wn,Ft,mn,Ln);function rn(Ir){return ar.destroyBuffer(Ir)}var hr=fn(at,Wn,Ln,mn),yn=um(at,Bt,mn,Me),wn=Xp(at,Wn,Ft,function(){br.procs.poll()},Yn,mn,Me),On=Fd(at,Wn,Ft,mn,Me),_n=am(at,Wn,Ft,wn,On,mn),br=nh(at,Bt,Wn,Ft,Ln,hr,wn,_n,Bn,ar,yn,zt,Yn,Rn,Me),Gr=Ud(at,_n,br.procs.poll,Yn,Rt,Wn,Ft),Zn=br.next,zn=at.canvas,hn=[],Nr=[],ai=[],dr=[Me.onDestroy],si=null;function zr(){if(hn.length===0){Rn&&Rn.update(),si=null;return}si=wr.next(zr),Ea();for(var Ir=hn.length-1;Ir>=0;--Ir){var ei=hn[Ir];ei&&ei(Yn,null,0)}at.flush(),Rn&&Rn.update()}function oi(){!si&&hn.length>0&&(si=wr.next(zr))}function Pi(){si&&(wr.cancel(zr),si=null)}function Ia(Ir){Ir.preventDefault(),Mt=!0,Pi(),Nr.forEach(function(ei){ei()})}function Qa(Ir){at.getError(),Mt=!1,Zt.restore(),yn.restore(),Ln.restore(),wn.restore(),On.restore(),_n.restore(),ar.restore(),Rn&&Rn.restore(),br.procs.refresh(),oi(),ai.forEach(function(ei){ei()})}zn&&(zn.addEventListener(wf,Ia,!1),zn.addEventListener(Pg,Qa,!1));function ui(){hn.length=0,Pi(),zn&&(zn.removeEventListener(wf,Ia),zn.removeEventListener(Pg,Qa)),yn.clear(),_n.clear(),On.clear(),wn.clear(),hr.clear(),Ln.clear(),ar.clear(),Rn&&Rn.clear(),dr.forEach(function(Ir){Ir()})}function za(Ir){A(!!Ir,"invalid args to regl({...})"),A.type(Ir,"object","invalid args to regl({...})");function ei(Tt){var mt=C({},Tt);delete mt.uniforms,delete mt.attributes,delete mt.context,delete mt.vao,"stencil"in mt&&mt.stencil.op&&(mt.stencil.opBack=mt.stencil.opFront=mt.stencil.op,delete mt.stencil.op);function ft(wt){if(wt in mt){var He=mt[wt];delete mt[wt],Object.keys(He).forEach(function(ut){mt[wt+"."+ut]=He[ut]})}}return ft("blend"),ft("depth"),ft("cull"),ft("stencil"),ft("polygonOffset"),ft("scissor"),ft("sample"),"vao"in Tt&&(mt.vao=Tt.vao),mt}function Ei(Tt,mt){var ft={},wt={};return Object.keys(Tt).forEach(function(He){var ut=Tt[He];if(cr.isDynamic(ut)){wt[He]=cr.unbox(ut,He);return}else if(mt&&Array.isArray(ut)){for(var Be=0;Be<ut.length;++Be)if(cr.isDynamic(ut[Be])){wt[He]=cr.unbox(ut,He);return}}ft[He]=ut}),{dynamic:wt,static:ft}}var mo=Ei(Ir.context||{},!0),as=Ei(Ir.uniforms||{},!0),Tc=Ei(Ir.attributes||{},!1),Ze=Ei(ei(Ir),!1),Ht={gpuTime:0,cpuTime:0,count:0},Nt=br.compile(Ze,Tc,as,mo,Ht),ur=Nt.draw,ti=Nt.batch,Ve=Nt.scope,Ne=[];function ct(Tt){for(;Ne.length<Tt;)Ne.push(null);return Ne}function St(Tt,mt){var ft;if(Mt&&A.raise("context lost"),typeof Tt=="function")return Ve.call(this,null,Tt,0);if(typeof mt=="function")if(typeof Tt=="number")for(ft=0;ft<Tt;++ft)Ve.call(this,null,mt,ft);else if(Array.isArray(Tt))for(ft=0;ft<Tt.length;++ft)Ve.call(this,Tt[ft],mt,ft);else return Ve.call(this,Tt,mt,0);else if(typeof Tt=="number"){if(Tt>0)return ti.call(this,ct(Tt|0),Tt|0)}else if(Array.isArray(Tt)){if(Tt.length)return ti.call(this,Tt,Tt.length)}else return ur.call(this,Tt)}return C(St,{stats:Ht,destroy:function(){Nt.destroy()}})}var la=_n.setFBO=za({framebuffer:cr.define.call(null,yv,"framebuffer")});function ca(Ir,ei){var Ei=0;br.procs.poll();var mo=ei.color;mo&&(at.clearColor(+mo[0]||0,+mo[1]||0,+mo[2]||0,+mo[3]||0),Ei|=Ac),"depth"in ei&&(at.clearDepth(+ei.depth),Ei|=Ag),"stencil"in ei&&(at.clearStencil(ei.stencil|0),Ei|=ga),A(!!Ei,"called regl.clear with no buffer specified"),at.clear(Ei)}function Ra(Ir){if(A(typeof Ir=="object"&&Ir,"regl.clear() takes an object as input"),"framebuffer"in Ir)if(Ir.framebuffer&&Ir.framebuffer_reglType==="framebufferCube")for(var ei=0;ei<6;++ei)la(C({framebuffer:Ir.framebuffer.faces[ei]},Ir),ca);else la(Ir,ca);else ca(null,Ir)}function Xa(Ir){A.type(Ir,"function","regl.frame() callback must be a function"),hn.push(Ir);function ei(){var Ei=ks(hn,Ir);A(Ei>=0,"cannot cancel a frame twice");function mo(){var as=ks(hn,mo);hn[as]=hn[hn.length-1],hn.length-=1,hn.length<=0&&Pi()}hn[Ei]=mo}return oi(),{cancel:ei}}function pa(){var Ir=Zn.viewport,ei=Zn.scissor_box;Ir[0]=Ir[1]=ei[0]=ei[1]=0,Yn.viewportWidth=Yn.framebufferWidth=Yn.drawingBufferWidth=Ir[2]=ei[2]=at.drawingBufferWidth,Yn.viewportHeight=Yn.framebufferHeight=Yn.drawingBufferHeight=Ir[3]=ei[3]=at.drawingBufferHeight}function Ea(){Yn.tick+=1,Yn.time=qr(),pa(),br.procs.poll()}function Ua(){wn.refresh(),pa(),br.procs.refresh(),Rn&&Rn.update()}function qr(){return(pr()-Nn)/1e3}Ua();function Po(Ir,ei){A.type(ei,"function","listener callback must be a function");var Ei;switch(Ir){case"frame":return Xa(ei);case"lost":Ei=Nr;break;case"restore":Ei=ai;break;case"destroy":Ei=dr;break;default:A.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ei.push(ei),{cancel:function(){for(var as=0;as<Ei.length;++as)if(Ei[as]===ei){Ei[as]=Ei[Ei.length-1],Ei.pop();return}}}}var Gi=C(za,{clear:Ra,prop:cr.define.bind(null,yv),context:cr.define.bind(null,gd),this:cr.define.bind(null,mm),draw:za({}),buffer:function(ei){return Ln.create(ei,Tg,!1,!1)},elements:function(ei){return hr.create(ei,!1)},texture:wn.create2D,cube:wn.createCube,renderbuffer:On.create,framebuffer:_n.create,framebufferCube:_n.createCube,vao:ar.createVAO,attributes:Rt,frame:Xa,on:Po,limits:Ft,hasExtension:function(ei){return Ft.extensions.indexOf(ei.toLowerCase())>=0},read:Gr,destroy:ui,_gl:at,_refresh:Ua,poll:function(){Ea(),Rn&&Rn.update()},now:qr,stats:mn});return Me.onDone(null,Gi),Gi}return bv})},fsL8:function(fe,T,v){var B=v("cDf5").default;function C(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */fe.exports=C=function(){return _},fe.exports.__esModule=!0,fe.exports.default=fe.exports;var _={},P=Object.prototype,N=P.hasOwnProperty,z=Object.defineProperty||function(k,Xe,Ot){k[Xe]=Ot.value},R=typeof Symbol=="function"?Symbol:{},q=R.iterator||"@@iterator",W=R.asyncIterator||"@@asyncIterator",Z=R.toStringTag||"@@toStringTag";function X(k,Xe,Ot){return Object.defineProperty(k,Xe,{value:Ot,enumerable:!0,configurable:!0,writable:!0}),k[Xe]}try{X({},"")}catch(k){X=function(Ot,lt,Ut){return Ot[lt]=Ut}}function ne(k,Xe,Ot,lt){var Ut=Xe&&Xe.prototype instanceof ce?Xe:ce,Jt=Object.create(Ut.prototype),nt=new Pe(lt||[]);return z(Jt,"_invoke",{value:be(k,Ot,nt)}),Jt}function ie(k,Xe,Ot){try{return{type:"normal",arg:k.call(Xe,Ot)}}catch(lt){return{type:"throw",arg:lt}}}_.wrap=ne;var te={};function ce(){}function ee(){}function Y(){}var le={};X(le,q,function(){return this});var re=Object.getPrototypeOf,Q=re&&re(re(Ae([])));Q&&Q!==P&&N.call(Q,q)&&(le=Q);var ge=Y.prototype=ce.prototype=Object.create(le);function oe(k){["next","throw","return"].forEach(function(Xe){X(k,Xe,function(Ot){return this._invoke(Xe,Ot)})})}function Te(k,Xe){function Ot(Ut,Jt,nt,$t){var ze=ie(k[Ut],k,Jt);if(ze.type!=="throw"){var ue=ze.arg,an=ue.value;return an&&B(an)=="object"&&N.call(an,"__await")?Xe.resolve(an.__await).then(function(nn){Ot("next",nn,nt,$t)},function(nn){Ot("throw",nn,nt,$t)}):Xe.resolve(an).then(function(nn){ue.value=nn,nt(ue)},function(nn){return Ot("throw",nn,nt,$t)})}$t(ze.arg)}var lt;z(this,"_invoke",{value:function(Jt,nt){function $t(){return new Xe(function(ze,ue){Ot(Jt,nt,ze,ue)})}return lt=lt?lt.then($t,$t):$t()}})}function be(k,Xe,Ot){var lt="suspendedStart";return function(Ut,Jt){if(lt==="executing")throw new Error("Generator is already running");if(lt==="completed"){if(Ut==="throw")throw Jt;return ot()}for(Ot.method=Ut,Ot.arg=Jt;;){var nt=Ot.delegate;if(nt){var $t=j(nt,Ot);if($t){if($t===te)continue;return $t}}if(Ot.method==="next")Ot.sent=Ot._sent=Ot.arg;else if(Ot.method==="throw"){if(lt==="suspendedStart")throw lt="completed",Ot.arg;Ot.dispatchException(Ot.arg)}else Ot.method==="return"&&Ot.abrupt("return",Ot.arg);lt="executing";var ze=ie(k,Xe,Ot);if(ze.type==="normal"){if(lt=Ot.done?"completed":"suspendedYield",ze.arg===te)continue;return{value:ze.arg,done:Ot.done}}ze.type==="throw"&&(lt="completed",Ot.method="throw",Ot.arg=ze.arg)}}}function j(k,Xe){var Ot=Xe.method,lt=k.iterator[Ot];if(lt===void 0)return Xe.delegate=null,Ot==="throw"&&k.iterator.return&&(Xe.method="return",Xe.arg=void 0,j(k,Xe),Xe.method==="throw")||Ot!=="return"&&(Xe.method="throw",Xe.arg=new TypeError("The iterator does not provide a '"+Ot+"' method")),te;var Ut=ie(lt,k.iterator,Xe.arg);if(Ut.type==="throw")return Xe.method="throw",Xe.arg=Ut.arg,Xe.delegate=null,te;var Jt=Ut.arg;return Jt?Jt.done?(Xe[k.resultName]=Jt.value,Xe.next=k.nextLoc,Xe.method!=="return"&&(Xe.method="next",Xe.arg=void 0),Xe.delegate=null,te):Jt:(Xe.method="throw",Xe.arg=new TypeError("iterator result is not an object"),Xe.delegate=null,te)}function ke(k){var Xe={tryLoc:k[0]};1 in k&&(Xe.catchLoc=k[1]),2 in k&&(Xe.finallyLoc=k[2],Xe.afterLoc=k[3]),this.tryEntries.push(Xe)}function Je(k){var Xe=k.completion||{};Xe.type="normal",delete Xe.arg,k.completion=Xe}function Pe(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(ke,this),this.reset(!0)}function Ae(k){if(k){var Xe=k[q];if(Xe)return Xe.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var Ot=-1,lt=function Ut(){for(;++Ot<k.length;)if(N.call(k,Ot))return Ut.value=k[Ot],Ut.done=!1,Ut;return Ut.value=void 0,Ut.done=!0,Ut};return lt.next=lt}}return{next:ot}}function ot(){return{value:void 0,done:!0}}return ee.prototype=Y,z(ge,"constructor",{value:Y,configurable:!0}),z(Y,"constructor",{value:ee,configurable:!0}),ee.displayName=X(Y,Z,"GeneratorFunction"),_.isGeneratorFunction=function(k){var Xe=typeof k=="function"&&k.constructor;return!!Xe&&(Xe===ee||(Xe.displayName||Xe.name)==="GeneratorFunction")},_.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,Y):(k.__proto__=Y,X(k,Z,"GeneratorFunction")),k.prototype=Object.create(ge),k},_.awrap=function(k){return{__await:k}},oe(Te.prototype),X(Te.prototype,W,function(){return this}),_.AsyncIterator=Te,_.async=function(k,Xe,Ot,lt,Ut){Ut===void 0&&(Ut=Promise);var Jt=new Te(ne(k,Xe,Ot,lt),Ut);return _.isGeneratorFunction(Xe)?Jt:Jt.next().then(function(nt){return nt.done?nt.value:Jt.next()})},oe(ge),X(ge,Z,"Generator"),X(ge,q,function(){return this}),X(ge,"toString",function(){return"[object Generator]"}),_.keys=function(k){var Xe=Object(k),Ot=[];for(var lt in Xe)Ot.push(lt);return Ot.reverse(),function Ut(){for(;Ot.length;){var Jt=Ot.pop();if(Jt in Xe)return Ut.value=Jt,Ut.done=!1,Ut}return Ut.done=!0,Ut}},_.values=Ae,Pe.prototype={constructor:Pe,reset:function(Xe){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Je),!Xe)for(var Ot in this)Ot.charAt(0)==="t"&&N.call(this,Ot)&&!isNaN(+Ot.slice(1))&&(this[Ot]=void 0)},stop:function(){this.done=!0;var Xe=this.tryEntries[0].completion;if(Xe.type==="throw")throw Xe.arg;return this.rval},dispatchException:function(Xe){if(this.done)throw Xe;var Ot=this;function lt(ue,an){return nt.type="throw",nt.arg=Xe,Ot.next=ue,an&&(Ot.method="next",Ot.arg=void 0),!!an}for(var Ut=this.tryEntries.length-1;Ut>=0;--Ut){var Jt=this.tryEntries[Ut],nt=Jt.completion;if(Jt.tryLoc==="root")return lt("end");if(Jt.tryLoc<=this.prev){var $t=N.call(Jt,"catchLoc"),ze=N.call(Jt,"finallyLoc");if($t&&ze){if(this.prev<Jt.catchLoc)return lt(Jt.catchLoc,!0);if(this.prev<Jt.finallyLoc)return lt(Jt.finallyLoc)}else if($t){if(this.prev<Jt.catchLoc)return lt(Jt.catchLoc,!0)}else{if(!ze)throw new Error("try statement without catch or finally");if(this.prev<Jt.finallyLoc)return lt(Jt.finallyLoc)}}}},abrupt:function(Xe,Ot){for(var lt=this.tryEntries.length-1;lt>=0;--lt){var Ut=this.tryEntries[lt];if(Ut.tryLoc<=this.prev&&N.call(Ut,"finallyLoc")&&this.prev<Ut.finallyLoc){var Jt=Ut;break}}Jt&&(Xe==="break"||Xe==="continue")&&Jt.tryLoc<=Ot&&Ot<=Jt.finallyLoc&&(Jt=null);var nt=Jt?Jt.completion:{};return nt.type=Xe,nt.arg=Ot,Jt?(this.method="next",this.next=Jt.finallyLoc,te):this.complete(nt)},complete:function(Xe,Ot){if(Xe.type==="throw")throw Xe.arg;return Xe.type==="break"||Xe.type==="continue"?this.next=Xe.arg:Xe.type==="return"?(this.rval=this.arg=Xe.arg,this.method="return",this.next="end"):Xe.type==="normal"&&Ot&&(this.next=Ot),te},finish:function(Xe){for(var Ot=this.tryEntries.length-1;Ot>=0;--Ot){var lt=this.tryEntries[Ot];if(lt.finallyLoc===Xe)return this.complete(lt.completion,lt.afterLoc),Je(lt),te}},catch:function(Xe){for(var Ot=this.tryEntries.length-1;Ot>=0;--Ot){var lt=this.tryEntries[Ot];if(lt.tryLoc===Xe){var Ut=lt.completion;if(Ut.type==="throw"){var Jt=Ut.arg;Je(lt)}return Jt}}throw new Error("illegal catch attempt")},delegateYield:function(Xe,Ot,lt){return this.delegate={iterator:Ae(Xe),resultName:Ot,nextLoc:lt},this.method==="next"&&(this.arg=void 0),te}},_}fe.exports=C,fe.exports.__esModule=!0,fe.exports.default=fe.exports},g1CP:function(fe,T,v){"use strict";v.d(T,"a",function(){return k});var B=v("o0o1"),C=v.n(B),_=v("yXPU"),P=v.n(_),N=v("yG8O"),z=v.n(N),R=v("lwsE"),q=v.n(R),W=v("U+yc"),Z=v.n(W),X=v("1ABj"),ne=v.n(X),ie=v("4cb6"),te=v.n(ie),ce=v("+uE7"),ee=v("k6w6"),Y=v("94HZ"),le,re,Q,ge,oe,Te,be,j,ke,Je=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Pe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ae=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,ot=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,k=(le=Object(ie.injectable)(),re=Object(ie.inject)(ce.a.RenderEngine),Q=Object(ie.inject)(ce.a.ResourcePool),le(ge=(oe=(ke=j=function Xe(){var Ot=this;q()(this,Xe),z()(this,"engine",Te,this),z()(this,"resourcePool",be,this),this.model=void 0,this.setup=function(lt,Ut,Jt){var nt=lt.getPass(Y.a.IDENTIFIER);if(nt){var $t=lt.createRenderTarget(Ut,"render to screen",{width:1,height:1});Jt.data={input:Ut.read(nt.data.output),output:Ut.write(lt,$t)}}},this.execute=function(){var lt=P()(C.a.mark(function Ut(Jt,nt){var $t,ze,ue,an,nn,Qn,Pt;return C.a.wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:if($t=Ot.engine,ze=$t.createModel,ue=$t.createAttribute,an=$t.createBuffer,Ot.model){rr.next=6;break}return rr.next=4,ze({vs:Ot.engine.supportWebGPU?ot:Pe,fs:Ot.engine.supportWebGPU?Ae:Je,attributes:{a_Position:ue({buffer:an({data:[-4,-4,4,-4,0,4],type:ee.a.FLOAT}),size:2,arrayStride:2*4,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:nn=rr.sent,Ot.model=nn;case 6:Qn=Jt.getResourceNode(nt.data.input),Pt=Ot.resourcePool.getOrCreateResource(Qn.resource),Ot.engine.useFramebuffer(null,function(){Ot.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),Ot.model.draw({uniforms:{u_Texture:Pt}})});case 9:case"end":return rr.stop()}},Ut)}));return function(Ut,Jt){return lt.apply(this,arguments)}}(),this.tearDown=function(){Ot.model=void 0}},j.IDENTIFIER="Copy Pass",ke),Te=Z()(oe.prototype,"engine",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),be=Z()(oe.prototype,"resourcePool",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oe))||ge)},gzZq:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BindingToSyntax=void 0;var B=v("MON2"),C=v("FV85"),_=v("D9lx"),P=v("LKzl"),N=function(){function z(R){this._binding=R}return z.prototype.to=function(R){return this._binding.type=C.BindingTypeEnum.Instance,this._binding.implementationType=R,new _.BindingInWhenOnSyntax(this._binding)},z.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+B.INVALID_TO_SELF_VALUE);var R=this._binding.serviceIdentifier;return this.to(R)},z.prototype.toConstantValue=function(R){return this._binding.type=C.BindingTypeEnum.ConstantValue,this._binding.cache=R,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=C.BindingScopeEnum.Singleton,new P.BindingWhenOnSyntax(this._binding)},z.prototype.toDynamicValue=function(R){return this._binding.type=C.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=R,this._binding.implementationType=null,new _.BindingInWhenOnSyntax(this._binding)},z.prototype.toConstructor=function(R){return this._binding.type=C.BindingTypeEnum.Constructor,this._binding.implementationType=R,this._binding.scope=C.BindingScopeEnum.Singleton,new P.BindingWhenOnSyntax(this._binding)},z.prototype.toFactory=function(R){return this._binding.type=C.BindingTypeEnum.Factory,this._binding.factory=R,this._binding.scope=C.BindingScopeEnum.Singleton,new P.BindingWhenOnSyntax(this._binding)},z.prototype.toFunction=function(R){if(typeof R!="function")throw new Error(B.INVALID_FUNCTION_BINDING);var q=this.toConstantValue(R);return this._binding.type=C.BindingTypeEnum.Function,this._binding.scope=C.BindingScopeEnum.Singleton,q},z.prototype.toAutoFactory=function(R){return this._binding.type=C.BindingTypeEnum.Factory,this._binding.factory=function(q){var W=function(){return q.container.get(R)};return W},this._binding.scope=C.BindingScopeEnum.Singleton,new P.BindingWhenOnSyntax(this._binding)},z.prototype.toProvider=function(R){return this._binding.type=C.BindingTypeEnum.Provider,this._binding.provider=R,this._binding.scope=C.BindingScopeEnum.Singleton,new P.BindingWhenOnSyntax(this._binding)},z.prototype.toService=function(R){this.toDynamicValue(function(q){return q.container.get(R)})},z}();T.BindingToSyntax=N},h7MG:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.getBindingDictionary=T.createMockRequest=T.plan=void 0;var B=v("doU7"),C=v("MON2"),_=v("FV85"),P=v("xfSm"),N=v("qK8v"),z=v("ujMp"),R=v("oy+k"),q=v("GXnB"),W=v("yMAV"),Z=v("fbrv"),X=v("xiII"),ne=v("dX1H");function ie(ge){return ge._bindingDictionary}T.getBindingDictionary=ie;function te(ge,oe,Te,be,j,ke){var Je=ge?P.MULTI_INJECT_TAG:P.INJECT_TAG,Pe=new q.Metadata(Je,Te),Ae=new ne.Target(oe,be,Te,Pe);if(j!==void 0){var ot=new q.Metadata(j,ke);Ae.metadata.push(ot)}return Ae}function ce(ge,oe,Te,be,j){var ke=le(Te.container,j.serviceIdentifier),Je=[];return ke.length===B.BindingCount.NoBindingsAvailable&&Te.container.options.autoBindInjectable&&typeof j.serviceIdentifier=="function"&&ge.getConstructorMetadata(j.serviceIdentifier).compilerGeneratedMetadata&&(Te.container.bind(j.serviceIdentifier).toSelf(),ke=le(Te.container,j.serviceIdentifier)),oe?Je=ke:Je=ke.filter(function(Pe){var Ae=new X.Request(Pe.serviceIdentifier,Te,be,Pe,j);return Pe.constraint(Ae)}),ee(j.serviceIdentifier,Je,j,Te.container),Je}function ee(ge,oe,Te,be){switch(oe.length){case B.BindingCount.NoBindingsAvailable:if(Te.isOptional())return oe;var j=z.getServiceIdentifierAsString(ge),ke=C.NOT_REGISTERED;throw ke+=z.listMetadataForTarget(j,Te),ke+=z.listRegisteredBindingsForServiceIdentifier(be,j,le),new Error(ke);case B.BindingCount.OnlyOneBindingAvailable:if(!Te.isArray())return oe;case B.BindingCount.MultipleBindingsAvailable:default:if(Te.isArray())return oe;var j=z.getServiceIdentifierAsString(ge),ke=C.AMBIGUOUS_MATCH+" "+j;throw ke+=z.listRegisteredBindingsForServiceIdentifier(be,j,le),new Error(ke)}}function Y(ge,oe,Te,be,j,ke){var Je,Pe;if(j===null){Je=ce(ge,oe,be,null,ke),Pe=new X.Request(Te,be,null,Je,ke);var Ae=new W.Plan(be,Pe);be.addPlan(Ae)}else Je=ce(ge,oe,be,j,ke),Pe=j.addChildRequest(ke.serviceIdentifier,Je,ke);Je.forEach(function(ot){var k=null;if(ke.isArray())k=Pe.addChildRequest(ot.serviceIdentifier,ot,ke);else{if(ot.cache)return;k=Pe}if(ot.type===_.BindingTypeEnum.Instance&&ot.implementationType!==null){var Xe=Z.getDependencies(ge,ot.implementationType);if(!be.container.options.skipBaseClassChecks){var Ot=Z.getBaseClassDependencyCount(ge,ot.implementationType);if(Xe.length<Ot){var lt=C.ARGUMENTS_LENGTH_MISMATCH(Z.getFunctionName(ot.implementationType));throw new Error(lt)}}Xe.forEach(function(Ut){Y(ge,!1,Ut.serviceIdentifier,be,k,Ut)})}})}function le(ge,oe){var Te=[],be=ie(ge);return be.hasKey(oe)?Te=be.get(oe):ge.parent!==null&&(Te=le(ge.parent,oe)),Te}function re(ge,oe,Te,be,j,ke,Je,Pe){Pe===void 0&&(Pe=!1);var Ae=new R.Context(oe),ot=te(Te,be,j,"",ke,Je);try{return Y(ge,Pe,j,Ae,null,ot),Ae}catch(k){throw N.isStackOverflowExeption(k)&&Ae.plan&&z.circularDependencyToException(Ae.plan.rootRequest),k}}T.plan=re;function Q(ge,oe,Te,be){var j=new ne.Target(_.TargetTypeEnum.Variable,"",oe,new q.Metadata(Te,be)),ke=new R.Context(ge),Je=new X.Request(oe,ke,null,[],j);return Je}T.createMockRequest=Q},iGDq:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.GithubSwatch=void 0;var B=v("q1tI"),C=z(B),_=v("/FUP"),P=z(_),N=v("TM95");function z(q){return q&&q.__esModule?q:{default:q}}var R=T.GithubSwatch=function(W){var Z=W.hover,X=W.color,ne=W.onClick,ie=W.onSwatchHover,te={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},ce=(0,P.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:te}},{hover:Z});return C.default.createElement("div",{style:ce.swatch},C.default.createElement(N.Swatch,{color:X,onClick:ne,onHover:ie,focusStyle:te}))};T.default=(0,_.handleHover)(R)},imBb:function(fe,T,v){var B;(function(C,_,P){if(!C)return;for(var N={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},z={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},R={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},q={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},W,Z=1;Z<20;++Z)N[111+Z]="f"+Z;for(Z=0;Z<=9;++Z)N[Z+96]=Z.toString();function X(be,j,ke){if(be.addEventListener){be.addEventListener(j,ke,!1);return}be.attachEvent("on"+j,ke)}function ne(be){if(be.type=="keypress"){var j=String.fromCharCode(be.which);return be.shiftKey||(j=j.toLowerCase()),j}return N[be.which]?N[be.which]:z[be.which]?z[be.which]:String.fromCharCode(be.which).toLowerCase()}function ie(be,j){return be.sort().join(",")===j.sort().join(",")}function te(be){var j=[];return be.shiftKey&&j.push("shift"),be.altKey&&j.push("alt"),be.ctrlKey&&j.push("ctrl"),be.metaKey&&j.push("meta"),j}function ce(be){if(be.preventDefault){be.preventDefault();return}be.returnValue=!1}function ee(be){if(be.stopPropagation){be.stopPropagation();return}be.cancelBubble=!0}function Y(be){return be=="shift"||be=="ctrl"||be=="alt"||be=="meta"}function le(){if(!W){W={};for(var be in N)be>95&&be<112||N.hasOwnProperty(be)&&(W[N[be]]=be)}return W}function re(be,j,ke){return ke||(ke=le()[be]?"keydown":"keypress"),ke=="keypress"&&j.length&&(ke="keydown"),ke}function Q(be){return be==="+"?["+"]:(be=be.replace(/\+{2}/g,"+plus"),be.split("+"))}function ge(be,j){var ke,Je,Pe,Ae=[];for(ke=Q(be),Pe=0;Pe<ke.length;++Pe)Je=ke[Pe],q[Je]&&(Je=q[Je]),j&&j!="keypress"&&R[Je]&&(Je=R[Je],Ae.push("shift")),Y(Je)&&Ae.push(Je);return j=re(Je,Ae,j),{key:Je,modifiers:Ae,action:j}}function oe(be,j){return be===null||be===_?!1:be===j?!0:oe(be.parentNode,j)}function Te(be){var j=this;if(be=be||_,!(j instanceof Te))return new Te(be);j.target=be,j._callbacks={},j._directMap={};var ke={},Je,Pe=!1,Ae=!1,ot=!1;function k($t){$t=$t||{};var ze=!1,ue;for(ue in ke){if($t[ue]){ze=!0;continue}ke[ue]=0}ze||(ot=!1)}function Xe($t,ze,ue,an,nn,Qn){var Pt,Tn,rr=[],Qt=ue.type;if(!j._callbacks[$t])return[];for(Qt=="keyup"&&Y($t)&&(ze=[$t]),Pt=0;Pt<j._callbacks[$t].length;++Pt)if(Tn=j._callbacks[$t][Pt],!(!an&&Tn.seq&&ke[Tn.seq]!=Tn.level)&&Qt==Tn.action&&(Qt=="keypress"&&!ue.metaKey&&!ue.ctrlKey||ie(ze,Tn.modifiers))){var sn=!an&&Tn.combo==nn,kn=an&&Tn.seq==an&&Tn.level==Qn;(sn||kn)&&j._callbacks[$t].splice(Pt,1),rr.push(Tn)}return rr}function Ot($t,ze,ue,an){j.stopCallback(ze,ze.target||ze.srcElement,ue,an)||$t(ze,ue)===!1&&(ce(ze),ee(ze))}j._handleKey=function($t,ze,ue){var an=Xe($t,ze,ue),nn,Qn={},Pt=0,Tn=!1;for(nn=0;nn<an.length;++nn)an[nn].seq&&(Pt=Math.max(Pt,an[nn].level));for(nn=0;nn<an.length;++nn){if(an[nn].seq){if(an[nn].level!=Pt)continue;Tn=!0,Qn[an[nn].seq]=1,Ot(an[nn].callback,ue,an[nn].combo,an[nn].seq);continue}Tn||Ot(an[nn].callback,ue,an[nn].combo)}var rr=ue.type=="keypress"&&Ae;ue.type==ot&&!Y($t)&&!rr&&k(Qn),Ae=Tn&&ue.type=="keydown"};function lt($t){typeof $t.which!="number"&&($t.which=$t.keyCode);var ze=ne($t);if(!!ze){if($t.type=="keyup"&&Pe===ze){Pe=!1;return}j.handleKey(ze,te($t),$t)}}function Ut(){clearTimeout(Je),Je=setTimeout(k,1e3)}function Jt($t,ze,ue,an){ke[$t]=0;function nn(Qt){return function(){ot=Qt,++ke[$t],Ut()}}function Qn(Qt){Ot(ue,Qt,$t),an!=="keyup"&&(Pe=ne(Qt)),setTimeout(k,10)}for(var Pt=0;Pt<ze.length;++Pt){var Tn=Pt+1===ze.length,rr=Tn?Qn:nn(an||ge(ze[Pt+1]).action);nt(ze[Pt],rr,an,$t,Pt)}}function nt($t,ze,ue,an,nn){j._directMap[$t+":"+ue]=ze,$t=$t.replace(/\s+/g," ");var Qn=$t.split(" "),Pt;if(Qn.length>1){Jt($t,Qn,ze,ue);return}Pt=ge($t,ue),j._callbacks[Pt.key]=j._callbacks[Pt.key]||[],Xe(Pt.key,Pt.modifiers,{type:Pt.action},an,$t,nn),j._callbacks[Pt.key][an?"unshift":"push"]({callback:ze,modifiers:Pt.modifiers,action:Pt.action,seq:an,level:nn,combo:$t})}j._bindMultiple=function($t,ze,ue){for(var an=0;an<$t.length;++an)nt($t[an],ze,ue)},X(be,"keypress",lt),X(be,"keydown",lt),X(be,"keyup",lt)}Te.prototype.bind=function(be,j,ke){var Je=this;return be=be instanceof Array?be:[be],Je._bindMultiple.call(Je,be,j,ke),Je},Te.prototype.unbind=function(be,j){var ke=this;return ke.bind.call(ke,be,function(){},j)},Te.prototype.trigger=function(be,j){var ke=this;return ke._directMap[be+":"+j]&&ke._directMap[be+":"+j]({},be),ke},Te.prototype.reset=function(){var be=this;return be._callbacks={},be._directMap={},be},Te.prototype.stopCallback=function(be,j){var ke=this;if((" "+j.className+" ").indexOf(" mousetrap ")>-1||oe(j,ke.target))return!1;if("composedPath"in be&&typeof be.composedPath=="function"){var Je=be.composedPath()[0];Je!==be.target&&(j=Je)}return j.tagName=="INPUT"||j.tagName=="SELECT"||j.tagName=="TEXTAREA"||j.isContentEditable},Te.prototype.handleKey=function(){var be=this;return be._handleKey.apply(be,arguments)},Te.addKeycodes=function(be){for(var j in be)be.hasOwnProperty(j)&&(N[j]=be[j]);W=null},Te.init=function(){var be=Te(_);for(var j in be)j.charAt(0)!=="_"&&(Te[j]=function(ke){return function(){return be[ke].apply(be,arguments)}}(j))},Te.init(),C.Mousetrap=Te,fe.exports&&(fe.exports=Te),B=function(){return Te}.call(T,v,T,fe),B!==P&&(fe.exports=B)})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)},"jIg/":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.multiInject=void 0;var B=v("xfSm"),C=v("GXnB"),_=v("Ztfv");function P(N){return function(z,R,q){var W=new C.Metadata(B.MULTI_INJECT_TAG,N);typeof q=="number"?_.tagParameter(z,R,q,W):_.tagProperty(z,R,W)}}T.multiInject=P},jYx5:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.optional=void 0;var B=v("xfSm"),C=v("GXnB"),_=v("Ztfv");function P(){return function(N,z,R){var q=new C.Metadata(B.OPTIONAL_TAG,!0);typeof R=="number"?_.tagParameter(N,z,R,q):_.tagProperty(N,z,q)}}T.optional=P},japM:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.handleFocus=void 0;var B=Object.assign||function(Z){for(var X=1;X<arguments.length;X++){var ne=arguments[X];for(var ie in ne)Object.prototype.hasOwnProperty.call(ne,ie)&&(Z[ie]=ne[ie])}return Z},C=function(){function Z(X,ne){for(var ie=0;ie<ne.length;ie++){var te=ne[ie];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(X,te.key,te)}}return function(X,ne,ie){return ne&&Z(X.prototype,ne),ie&&Z(X,ie),X}}(),_=v("q1tI"),P=N(_);function N(Z){return Z&&Z.__esModule?Z:{default:Z}}function z(Z,X){if(!(Z instanceof X))throw new TypeError("Cannot call a class as a function")}function R(Z,X){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X&&(typeof X=="object"||typeof X=="function")?X:Z}function q(Z,X){if(typeof X!="function"&&X!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof X);Z.prototype=Object.create(X&&X.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,X):Z.__proto__=X)}var W=T.handleFocus=function(X){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(ie){q(te,ie);function te(){var ce,ee,Y,le;z(this,te);for(var re=arguments.length,Q=Array(re),ge=0;ge<re;ge++)Q[ge]=arguments[ge];return le=(ee=(Y=R(this,(ce=te.__proto__||Object.getPrototypeOf(te)).call.apply(ce,[this].concat(Q))),Y),Y.state={focus:!1},Y.handleFocus=function(){return Y.setState({focus:!0})},Y.handleBlur=function(){return Y.setState({focus:!1})},ee),R(Y,le)}return C(te,[{key:"render",value:function(){return P.default.createElement(ne,{onFocus:this.handleFocus,onBlur:this.handleBlur},P.default.createElement(X,B({},this.props,this.state)))}}]),te}(P.default.Component)}},"jbM+":function(fe,T,v){var B=v("R/W3");function C(_,P){var N=_==null?0:_.length;return!!N&&B(_,P,0)>-1}fe.exports=C},k6w6:function(fe,T,v){"use strict";v.d(T,"a",function(){return B});var B;(function(C){C[C.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",C[C.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",C[C.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",C[C.POINTS=0]="POINTS",C[C.LINES=1]="LINES",C[C.LINE_LOOP=2]="LINE_LOOP",C[C.LINE_STRIP=3]="LINE_STRIP",C[C.TRIANGLES=4]="TRIANGLES",C[C.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",C[C.TRIANGLE_FAN=6]="TRIANGLE_FAN",C[C.ZERO=0]="ZERO",C[C.ONE=1]="ONE",C[C.SRC_COLOR=768]="SRC_COLOR",C[C.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",C[C.SRC_ALPHA=770]="SRC_ALPHA",C[C.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",C[C.DST_ALPHA=772]="DST_ALPHA",C[C.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",C[C.DST_COLOR=774]="DST_COLOR",C[C.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",C[C.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",C[C.FUNC_ADD=32774]="FUNC_ADD",C[C.BLEND_EQUATION=32777]="BLEND_EQUATION",C[C.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",C[C.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",C[C.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",C[C.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",C[C.MAX_EXT=32776]="MAX_EXT",C[C.MIN_EXT=32775]="MIN_EXT",C[C.BLEND_DST_RGB=32968]="BLEND_DST_RGB",C[C.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",C[C.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",C[C.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",C[C.CONSTANT_COLOR=32769]="CONSTANT_COLOR",C[C.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",C[C.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",C[C.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",C[C.BLEND_COLOR=32773]="BLEND_COLOR",C[C.ARRAY_BUFFER=34962]="ARRAY_BUFFER",C[C.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",C[C.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",C[C.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",C[C.STREAM_DRAW=35040]="STREAM_DRAW",C[C.STATIC_DRAW=35044]="STATIC_DRAW",C[C.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",C[C.BUFFER_SIZE=34660]="BUFFER_SIZE",C[C.BUFFER_USAGE=34661]="BUFFER_USAGE",C[C.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",C[C.FRONT=1028]="FRONT",C[C.BACK=1029]="BACK",C[C.FRONT_AND_BACK=1032]="FRONT_AND_BACK",C[C.CULL_FACE=2884]="CULL_FACE",C[C.BLEND=3042]="BLEND",C[C.DITHER=3024]="DITHER",C[C.STENCIL_TEST=2960]="STENCIL_TEST",C[C.DEPTH_TEST=2929]="DEPTH_TEST",C[C.SCISSOR_TEST=3089]="SCISSOR_TEST",C[C.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",C[C.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",C[C.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",C[C.NO_ERROR=0]="NO_ERROR",C[C.INVALID_ENUM=1280]="INVALID_ENUM",C[C.INVALID_VALUE=1281]="INVALID_VALUE",C[C.INVALID_OPERATION=1282]="INVALID_OPERATION",C[C.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",C[C.CW=2304]="CW",C[C.CCW=2305]="CCW",C[C.LINE_WIDTH=2849]="LINE_WIDTH",C[C.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",C[C.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",C[C.CULL_FACE_MODE=2885]="CULL_FACE_MODE",C[C.FRONT_FACE=2886]="FRONT_FACE",C[C.DEPTH_RANGE=2928]="DEPTH_RANGE",C[C.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",C[C.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",C[C.DEPTH_FUNC=2932]="DEPTH_FUNC",C[C.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",C[C.STENCIL_FUNC=2962]="STENCIL_FUNC",C[C.STENCIL_FAIL=2964]="STENCIL_FAIL",C[C.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",C[C.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",C[C.STENCIL_REF=2967]="STENCIL_REF",C[C.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",C[C.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",C[C.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",C[C.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",C[C.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",C[C.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",C[C.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",C[C.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",C[C.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",C[C.VIEWPORT=2978]="VIEWPORT",C[C.SCISSOR_BOX=3088]="SCISSOR_BOX",C[C.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",C[C.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",C[C.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",C[C.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",C[C.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",C[C.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",C[C.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",C[C.RED_BITS=3410]="RED_BITS",C[C.GREEN_BITS=3411]="GREEN_BITS",C[C.BLUE_BITS=3412]="BLUE_BITS",C[C.ALPHA_BITS=3413]="ALPHA_BITS",C[C.DEPTH_BITS=3414]="DEPTH_BITS",C[C.STENCIL_BITS=3415]="STENCIL_BITS",C[C.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",C[C.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",C[C.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",C[C.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",C[C.SAMPLES=32937]="SAMPLES",C[C.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",C[C.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",C[C.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",C[C.DONT_CARE=4352]="DONT_CARE",C[C.FASTEST=4353]="FASTEST",C[C.NICEST=4354]="NICEST",C[C.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",C[C.BYTE=5120]="BYTE",C[C.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",C[C.SHORT=5122]="SHORT",C[C.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",C[C.INT=5124]="INT",C[C.UNSIGNED_INT=5125]="UNSIGNED_INT",C[C.FLOAT=5126]="FLOAT",C[C.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",C[C.ALPHA=6406]="ALPHA",C[C.RGB=6407]="RGB",C[C.RGBA=6408]="RGBA",C[C.LUMINANCE=6409]="LUMINANCE",C[C.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",C[C.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",C[C.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",C[C.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",C[C.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",C[C.VERTEX_SHADER=35633]="VERTEX_SHADER",C[C.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",C[C.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",C[C.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",C[C.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",C[C.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",C[C.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",C[C.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",C[C.SHADER_TYPE=35663]="SHADER_TYPE",C[C.DELETE_STATUS=35712]="DELETE_STATUS",C[C.LINK_STATUS=35714]="LINK_STATUS",C[C.VALIDATE_STATUS=35715]="VALIDATE_STATUS",C[C.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",C[C.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",C[C.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",C[C.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",C[C.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",C[C.NEVER=512]="NEVER",C[C.LESS=513]="LESS",C[C.EQUAL=514]="EQUAL",C[C.LEQUAL=515]="LEQUAL",C[C.GREATER=516]="GREATER",C[C.NOTEQUAL=517]="NOTEQUAL",C[C.GEQUAL=518]="GEQUAL",C[C.ALWAYS=519]="ALWAYS",C[C.KEEP=7680]="KEEP",C[C.REPLACE=7681]="REPLACE",C[C.INCR=7682]="INCR",C[C.DECR=7683]="DECR",C[C.INVERT=5386]="INVERT",C[C.INCR_WRAP=34055]="INCR_WRAP",C[C.DECR_WRAP=34056]="DECR_WRAP",C[C.VENDOR=7936]="VENDOR",C[C.RENDERER=7937]="RENDERER",C[C.VERSION=7938]="VERSION",C[C.NEAREST=9728]="NEAREST",C[C.LINEAR=9729]="LINEAR",C[C.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",C[C.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",C[C.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",C[C.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",C[C.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",C[C.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",C[C.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",C[C.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",C[C.TEXTURE_2D=3553]="TEXTURE_2D",C[C.TEXTURE=5890]="TEXTURE",C[C.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",C[C.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",C[C.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",C[C.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",C[C.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",C[C.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",C[C.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",C[C.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",C[C.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",C[C.TEXTURE0=33984]="TEXTURE0",C[C.TEXTURE1=33985]="TEXTURE1",C[C.TEXTURE2=33986]="TEXTURE2",C[C.TEXTURE3=33987]="TEXTURE3",C[C.TEXTURE4=33988]="TEXTURE4",C[C.TEXTURE5=33989]="TEXTURE5",C[C.TEXTURE6=33990]="TEXTURE6",C[C.TEXTURE7=33991]="TEXTURE7",C[C.TEXTURE8=33992]="TEXTURE8",C[C.TEXTURE9=33993]="TEXTURE9",C[C.TEXTURE10=33994]="TEXTURE10",C[C.TEXTURE11=33995]="TEXTURE11",C[C.TEXTURE12=33996]="TEXTURE12",C[C.TEXTURE13=33997]="TEXTURE13",C[C.TEXTURE14=33998]="TEXTURE14",C[C.TEXTURE15=33999]="TEXTURE15",C[C.TEXTURE16=34e3]="TEXTURE16",C[C.TEXTURE17=34001]="TEXTURE17",C[C.TEXTURE18=34002]="TEXTURE18",C[C.TEXTURE19=34003]="TEXTURE19",C[C.TEXTURE20=34004]="TEXTURE20",C[C.TEXTURE21=34005]="TEXTURE21",C[C.TEXTURE22=34006]="TEXTURE22",C[C.TEXTURE23=34007]="TEXTURE23",C[C.TEXTURE24=34008]="TEXTURE24",C[C.TEXTURE25=34009]="TEXTURE25",C[C.TEXTURE26=34010]="TEXTURE26",C[C.TEXTURE27=34011]="TEXTURE27",C[C.TEXTURE28=34012]="TEXTURE28",C[C.TEXTURE29=34013]="TEXTURE29",C[C.TEXTURE30=34014]="TEXTURE30",C[C.TEXTURE31=34015]="TEXTURE31",C[C.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",C[C.REPEAT=10497]="REPEAT",C[C.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",C[C.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",C[C.FLOAT_VEC2=35664]="FLOAT_VEC2",C[C.FLOAT_VEC3=35665]="FLOAT_VEC3",C[C.FLOAT_VEC4=35666]="FLOAT_VEC4",C[C.INT_VEC2=35667]="INT_VEC2",C[C.INT_VEC3=35668]="INT_VEC3",C[C.INT_VEC4=35669]="INT_VEC4",C[C.BOOL=35670]="BOOL",C[C.BOOL_VEC2=35671]="BOOL_VEC2",C[C.BOOL_VEC3=35672]="BOOL_VEC3",C[C.BOOL_VEC4=35673]="BOOL_VEC4",C[C.FLOAT_MAT2=35674]="FLOAT_MAT2",C[C.FLOAT_MAT3=35675]="FLOAT_MAT3",C[C.FLOAT_MAT4=35676]="FLOAT_MAT4",C[C.SAMPLER_2D=35678]="SAMPLER_2D",C[C.SAMPLER_CUBE=35680]="SAMPLER_CUBE",C[C.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",C[C.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",C[C.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",C[C.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",C[C.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",C[C.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",C[C.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",C[C.COMPILE_STATUS=35713]="COMPILE_STATUS",C[C.LOW_FLOAT=36336]="LOW_FLOAT",C[C.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",C[C.HIGH_FLOAT=36338]="HIGH_FLOAT",C[C.LOW_INT=36339]="LOW_INT",C[C.MEDIUM_INT=36340]="MEDIUM_INT",C[C.HIGH_INT=36341]="HIGH_INT",C[C.FRAMEBUFFER=36160]="FRAMEBUFFER",C[C.RENDERBUFFER=36161]="RENDERBUFFER",C[C.RGBA4=32854]="RGBA4",C[C.RGB5_A1=32855]="RGB5_A1",C[C.RGB565=36194]="RGB565",C[C.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",C[C.STENCIL_INDEX=6401]="STENCIL_INDEX",C[C.STENCIL_INDEX8=36168]="STENCIL_INDEX8",C[C.DEPTH_STENCIL=34041]="DEPTH_STENCIL",C[C.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",C[C.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",C[C.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",C[C.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",C[C.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",C[C.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",C[C.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",C[C.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",C[C.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",C[C.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",C[C.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",C[C.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",C[C.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",C[C.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",C[C.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",C[C.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",C[C.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",C[C.NONE=0]="NONE",C[C.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",C[C.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",C[C.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",C[C.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",C[C.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",C[C.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",C[C.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",C[C.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",C[C.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",C[C.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",C[C.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",C[C.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",C[C.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",C[C.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",C[C.COPY_SRC=1]="COPY_SRC",C[C.COPY_DST=2]="COPY_DST",C[C.SAMPLED=4]="SAMPLED",C[C.STORAGE=8]="STORAGE",C[C.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(B||(B={}))},kVhV:function(fe,T,v){fe.exports={components:v("tpVr"),dijkstra:v("uP9N"),dijkstraAll:v("lFfV"),findCycles:v("BjIp"),floydWarshall:v("s8Cx"),isAcyclic:v("BkyA"),postorder:v("fBpv"),preorder:v("4l4a"),prim:v("AV2a"),tarjan:v("98GK"),topsort:v("swpM")}},kafh:function(fe,T,v){var B=v("+sJh"),C=v("4Hkj"),_=v("t8N9"),P=v("cGwC"),N=v("a8Yn"),z=[0,0];fe.exports.computeMiter=function(q,W,Z,X,ne){return B(q,Z,X),_(q,q),C(W,-q[1],q[0]),C(z,-Z[1],Z[0]),ne/N(W,z)},fe.exports.normal=function(q,W){return C(q,-W[1],W[0]),q},fe.exports.direction=function(q,W,Z){return P(q,W,Z),_(q,q),q}},kfnj:function(fe,T,v){"use strict";v.d(T,"a",function(){return $t});var B=v("o0o1"),C=v.n(B),_=v("yXPU"),P=v.n(_),N=v("yG8O"),z=v.n(N),R=v("lwsE"),q=v.n(R),W=v("W8MJ"),Z=v.n(W),X=v("U+yc"),ne=v.n(X),ie=v("1ABj"),te=v.n(ie),ce=v("IOcx"),ee=v("4cb6"),Y=v.n(ee),le=v("+uE7"),re=v("qfsk"),Q=v("+xCn"),ge,oe,Te,be,j,ke,Je,Pe,Ae,ot,k,Xe,Ot,lt;function Ut(ze,ue){var an;if(typeof Symbol=="undefined"||ze[Symbol.iterator]==null){if(Array.isArray(ze)||(an=Jt(ze))||ue&&ze&&typeof ze.length=="number"){an&&(ze=an);var nn=0,Qn=function(){};return{s:Qn,n:function(){return nn>=ze.length?{done:!0}:{done:!1,value:ze[nn++]}},e:function(sn){throw sn},f:Qn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Pt=!0,Tn=!1,rr;return{s:function(){an=ze[Symbol.iterator]()},n:function(){var sn=an.next();return Pt=sn.done,sn},e:function(sn){Tn=!0,rr=sn},f:function(){try{!Pt&&an.return!=null&&an.return()}finally{if(Tn)throw rr}}}}function Jt(ze,ue){if(!!ze){if(typeof ze=="string")return nt(ze,ue);var an=Object.prototype.toString.call(ze).slice(8,-1);if(an==="Object"&&ze.constructor&&(an=ze.constructor.name),an==="Map"||an==="Set")return Array.from(ze);if(an==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(an))return nt(ze,ue)}}function nt(ze,ue){(ue==null||ue>ze.length)&&(ue=ze.length);for(var an=0,nn=new Array(ue);an<ue;an++)nn[an]=ze[an];return nn}var $t=(ge=Object(ee.injectable)(),oe=Object(ee.inject)(le.a.MeshComponentManager),Te=Object(ee.inject)(le.a.CullableComponentManager),be=Object(ee.inject)(le.a.GeometryComponentManager),j=Object(ee.inject)(le.a.HierarchyComponentManager),ke=Object(ee.inject)(le.a.TransformComponentManager),ge(Je=(Pe=(lt=function(){function ze(){q()(this,ze),z()(this,"mesh",Ae,this),z()(this,"cullable",ot,this),z()(this,"geometry",k,this),z()(this,"hierarchy",Xe,this),z()(this,"transform",Ot,this),this.planes=void 0}return Z()(ze,[{key:"setFrustumPlanes",value:function(an){this.planes=an}},{key:"execute",value:function(){var ue=P()(C.a.mark(function nn(Qn){var Pt,Tn,rr,Qt,sn,kn,Sn,st,At,vt,_t,Kt,ln,bt,A,Jn,Mn,sr,ir,Ie,pe;return C.a.wrap(function(cn){for(;;)switch(cn.prev=cn.next){case 0:Pt=Ut(Qn);try{for(Pt.s();!(Tn=Pt.n()).done;){rr=Tn.value,Qt=rr.getScene(),sn=rr.getCamera(),kn=Ut(Qt.getEntities());try{for(kn.s();!(Sn=kn.n()).done;)st=Sn.value,At=this.mesh.getComponentByEntity(st),At&&(vt=this.hierarchy.getComponentByEntity(st),_t=this.cullable.getComponentByEntity(st),Kt=At.geometry,ln=this.transform.getComponentByEntity(st),Kt&&Kt.aabb&&ln&&At.aabbDirty&&(bt=ln.worldTransform,A=Kt.aabb,Jn=A.center,Mn=A.halfExtents,sr=ce.d.transformMat4(ce.d.create(),Jn,bt),ir=Object(Q.b)(bt,ce.a.create()),Ie=ce.d.transformMat3(ce.d.create(),Mn,ir),At.aabb.update(sr,Ie),At.aabbDirty=!1),_t&&Kt&&(pe=this.cullable.getComponentByEntity((vt==null?void 0:vt.parentID)||-1),_t.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(At.aabb,(pe==null?void 0:pe.visibilityPlaneMask)||re.b.INDETERMINATE,this.planes||sn.getFrustum().planes),_t.visible=_t.visibilityPlaneMask!==re.b.OUTSIDE))}catch(En){kn.e(En)}finally{kn.f()}}}catch(En){Pt.e(En)}finally{Pt.f()}case 2:case"end":return cn.stop()}},nn,this)}));function an(nn){return ue.apply(this,arguments)}return an}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(an,nn,Qn){if(nn===re.b.OUTSIDE||nn===re.b.INSIDE)return nn;for(var Pt=re.b.INSIDE,Tn=0,rr=Qn.length;Tn<rr;++Tn){var Qt=Tn<31?1<<Tn:0;if(!(Tn<31&&(nn&Qt)==0)){var sn=Qn[Tn],kn=sn.normal,Sn=sn.distance;if(ce.d.dot(kn,an.getNegativeFarPoint(Qn[Tn]))+Sn>0)return re.b.OUTSIDE;ce.d.dot(kn,an.getPositiveFarPoint(Qn[Tn]))+Sn>0&&(Pt|=Qt)}}return Pt}}]),ze}(),lt),Ae=ne()(Pe.prototype,"mesh",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=ne()(Pe.prototype,"cullable",[Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=ne()(Pe.prototype,"geometry",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=ne()(Pe.prototype,"hierarchy",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ot=ne()(Pe.prototype,"transform",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe))||Je)},lFfV:function(fe,T,v){var B=v("uP9N"),C=v("3z9K");fe.exports=_;function _(P,N,z){return C.transform(P.nodes(),function(R,q){R[q]=B(P,q,N,z)},{})}},lSNA:function(fe,T,v){var B=v("o5UB");function C(_,P,N){return P=B(P),P in _?Object.defineProperty(_,P,{value:N,enumerable:!0,configurable:!0,writable:!0}):_[P]=N,_}fe.exports=C,fe.exports.__esModule=!0,fe.exports.default=fe.exports},ljNz:function(fe,T,v){"use strict";v.d(T,"a",function(){return B});var B=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent)},lwsE:function(fe,T){function v(B,C){if(!(B instanceof C))throw new TypeError("Cannot call a class as a function")}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},m0LI:function(fe,T){function v(B,C){var _=B==null?null:typeof Symbol!="undefined"&&B[Symbol.iterator]||B["@@iterator"];if(_!=null){var P,N,z,R,q=[],W=!0,Z=!1;try{if(z=(_=_.call(B)).next,C===0){if(Object(_)!==_)return;W=!1}else for(;!(W=(P=z.call(_)).done)&&(q.push(P.value),q.length!==C);W=!0);}catch(X){Z=!0,N=X}finally{try{if(!W&&_.return!=null&&(R=_.return(),Object(R)!==R))return}finally{if(Z)throw N}}return q}}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},mNvP:function(fe,T,v){(function(B,C){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var _;(function(P){(function(N){var z=typeof C=="object"?C:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),R=q(P);typeof z.Reflect=="undefined"?z.Reflect=P:R=q(z.Reflect,R),N(R);function q(W,Z){return function(X,ne){typeof W[X]!="function"&&Object.defineProperty(W,X,{configurable:!0,writable:!0,value:ne}),Z&&Z(X,ne)}}})(function(N){var z=Object.prototype.hasOwnProperty,R=typeof Symbol=="function",q=R&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",W=R&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",Z=typeof Object.create=="function",X={__proto__:[]}instanceof Array,ne=!Z&&!X,ie={create:Z?function(){return Ie(Object.create(null))}:X?function(){return Ie({__proto__:null})}:function(){return Ie({})},has:ne?function(pe,Qe){return z.call(pe,Qe)}:function(pe,Qe){return Qe in pe},get:ne?function(pe,Qe){return z.call(pe,Qe)?pe[Qe]:void 0}:function(pe,Qe){return pe[Qe]}},te=Object.getPrototypeOf(Function),ce=typeof B=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",ee=!ce&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Mn(),Y=!ce&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:sr(),le=!ce&&typeof WeakMap=="function"?WeakMap:ir(),re=new le;function Q(pe,Qe,cn,En){if(an(cn)){if(!Sn(pe))throw new TypeError;if(!At(Qe))throw new TypeError;return ot(pe,Qe)}else{if(!Sn(pe))throw new TypeError;if(!Pt(Qe))throw new TypeError;if(!Pt(En)&&!an(En)&&!nn(En))throw new TypeError;return nn(En)&&(En=void 0),cn=kn(cn),k(pe,Qe,cn,En)}}N("decorate",Q);function ge(pe,Qe){function cn(En,lr){if(!Pt(En))throw new TypeError;if(!an(lr)&&!vt(lr))throw new TypeError;nt(pe,Qe,En,lr)}return cn}N("metadata",ge);function oe(pe,Qe,cn,En){if(!Pt(cn))throw new TypeError;return an(En)||(En=kn(En)),nt(pe,Qe,cn,En)}N("defineMetadata",oe);function Te(pe,Qe,cn){if(!Pt(Qe))throw new TypeError;return an(cn)||(cn=kn(cn)),Ot(pe,Qe,cn)}N("hasMetadata",Te);function be(pe,Qe,cn){if(!Pt(Qe))throw new TypeError;return an(cn)||(cn=kn(cn)),lt(pe,Qe,cn)}N("hasOwnMetadata",be);function j(pe,Qe,cn){if(!Pt(Qe))throw new TypeError;return an(cn)||(cn=kn(cn)),Ut(pe,Qe,cn)}N("getMetadata",j);function ke(pe,Qe,cn){if(!Pt(Qe))throw new TypeError;return an(cn)||(cn=kn(cn)),Jt(pe,Qe,cn)}N("getOwnMetadata",ke);function Je(pe,Qe){if(!Pt(pe))throw new TypeError;return an(Qe)||(Qe=kn(Qe)),$t(pe,Qe)}N("getMetadataKeys",Je);function Pe(pe,Qe){if(!Pt(pe))throw new TypeError;return an(Qe)||(Qe=kn(Qe)),ze(pe,Qe)}N("getOwnMetadataKeys",Pe);function Ae(pe,Qe,cn){if(!Pt(Qe))throw new TypeError;an(cn)||(cn=kn(cn));var En=Xe(Qe,cn,!1);if(an(En)||!En.delete(pe))return!1;if(En.size>0)return!0;var lr=re.get(Qe);return lr.delete(cn),lr.size>0||re.delete(Qe),!0}N("deleteMetadata",Ae);function ot(pe,Qe){for(var cn=pe.length-1;cn>=0;--cn){var En=pe[cn],lr=En(Qe);if(!an(lr)&&!nn(lr)){if(!At(lr))throw new TypeError;Qe=lr}}return Qe}function k(pe,Qe,cn,En){for(var lr=pe.length-1;lr>=0;--lr){var gi=pe[lr],cr=gi(Qe,cn,En);if(!an(cr)&&!nn(cr)){if(!Pt(cr))throw new TypeError;En=cr}}return En}function Xe(pe,Qe,cn){var En=re.get(pe);if(an(En)){if(!cn)return;En=new ee,re.set(pe,En)}var lr=En.get(Qe);if(an(lr)){if(!cn)return;lr=new ee,En.set(Qe,lr)}return lr}function Ot(pe,Qe,cn){var En=lt(pe,Qe,cn);if(En)return!0;var lr=Jn(Qe);return nn(lr)?!1:Ot(pe,lr,cn)}function lt(pe,Qe,cn){var En=Xe(Qe,cn,!1);return an(En)?!1:Qt(En.has(pe))}function Ut(pe,Qe,cn){var En=lt(pe,Qe,cn);if(En)return Jt(pe,Qe,cn);var lr=Jn(Qe);if(!nn(lr))return Ut(pe,lr,cn)}function Jt(pe,Qe,cn){var En=Xe(Qe,cn,!1);if(!an(En))return En.get(pe)}function nt(pe,Qe,cn,En){var lr=Xe(cn,En,!0);lr.set(pe,Qe)}function $t(pe,Qe){var cn=ze(pe,Qe),En=Jn(pe);if(En===null)return cn;var lr=$t(En,Qe);if(lr.length<=0)return cn;if(cn.length<=0)return lr;for(var gi=new Y,cr=[],wr=0,pr=cn;wr<pr.length;wr++){var Sr=pr[wr],Qr=gi.has(Sr);Qr||(gi.add(Sr),cr.push(Sr))}for(var ya=0,Ki=lr;ya<Ki.length;ya++){var Sr=Ki[ya],Qr=gi.has(Sr);Qr||(gi.add(Sr),cr.push(Sr))}return cr}function ze(pe,Qe){var cn=[],En=Xe(pe,Qe,!1);if(an(En))return cn;for(var lr=En.keys(),gi=Kt(lr),cr=0;;){var wr=bt(gi);if(!wr)return cn.length=cr,cn;var pr=ln(wr);try{cn[cr]=pr}catch(Sr){try{A(gi)}finally{throw Sr}}cr++}}function ue(pe){if(pe===null)return 1;switch(typeof pe){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return pe===null?1:6;default:return 6}}function an(pe){return pe===void 0}function nn(pe){return pe===null}function Qn(pe){return typeof pe=="symbol"}function Pt(pe){return typeof pe=="object"?pe!==null:typeof pe=="function"}function Tn(pe,Qe){switch(ue(pe)){case 0:return pe;case 1:return pe;case 2:return pe;case 3:return pe;case 4:return pe;case 5:return pe}var cn=Qe===3?"string":Qe===5?"number":"default",En=_t(pe,q);if(En!==void 0){var lr=En.call(pe,cn);if(Pt(lr))throw new TypeError;return lr}return rr(pe,cn==="default"?"number":cn)}function rr(pe,Qe){if(Qe==="string"){var cn=pe.toString;if(st(cn)){var En=cn.call(pe);if(!Pt(En))return En}var lr=pe.valueOf;if(st(lr)){var En=lr.call(pe);if(!Pt(En))return En}}else{var lr=pe.valueOf;if(st(lr)){var En=lr.call(pe);if(!Pt(En))return En}var gi=pe.toString;if(st(gi)){var En=gi.call(pe);if(!Pt(En))return En}}throw new TypeError}function Qt(pe){return!!pe}function sn(pe){return""+pe}function kn(pe){var Qe=Tn(pe,3);return Qn(Qe)?Qe:sn(Qe)}function Sn(pe){return Array.isArray?Array.isArray(pe):pe instanceof Object?pe instanceof Array:Object.prototype.toString.call(pe)==="[object Array]"}function st(pe){return typeof pe=="function"}function At(pe){return typeof pe=="function"}function vt(pe){switch(ue(pe)){case 3:return!0;case 4:return!0;default:return!1}}function _t(pe,Qe){var cn=pe[Qe];if(cn!=null){if(!st(cn))throw new TypeError;return cn}}function Kt(pe){var Qe=_t(pe,W);if(!st(Qe))throw new TypeError;var cn=Qe.call(pe);if(!Pt(cn))throw new TypeError;return cn}function ln(pe){return pe.value}function bt(pe){var Qe=pe.next();return Qe.done?!1:Qe}function A(pe){var Qe=pe.return;Qe&&Qe.call(pe)}function Jn(pe){var Qe=Object.getPrototypeOf(pe);if(typeof pe!="function"||pe===te||Qe!==te)return Qe;var cn=pe.prototype,En=cn&&Object.getPrototypeOf(cn);if(En==null||En===Object.prototype)return Qe;var lr=En.constructor;return typeof lr!="function"||lr===pe?Qe:lr}function Mn(){var pe={},Qe=[],cn=function(){function cr(wr,pr,Sr){this._index=0,this._keys=wr,this._values=pr,this._selector=Sr}return cr.prototype["@@iterator"]=function(){return this},cr.prototype[W]=function(){return this},cr.prototype.next=function(){var wr=this._index;if(wr>=0&&wr<this._keys.length){var pr=this._selector(this._keys[wr],this._values[wr]);return wr+1>=this._keys.length?(this._index=-1,this._keys=Qe,this._values=Qe):this._index++,{value:pr,done:!1}}return{value:void 0,done:!0}},cr.prototype.throw=function(wr){throw this._index>=0&&(this._index=-1,this._keys=Qe,this._values=Qe),wr},cr.prototype.return=function(wr){return this._index>=0&&(this._index=-1,this._keys=Qe,this._values=Qe),{value:wr,done:!0}},cr}();return function(){function cr(){this._keys=[],this._values=[],this._cacheKey=pe,this._cacheIndex=-2}return Object.defineProperty(cr.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),cr.prototype.has=function(wr){return this._find(wr,!1)>=0},cr.prototype.get=function(wr){var pr=this._find(wr,!1);return pr>=0?this._values[pr]:void 0},cr.prototype.set=function(wr,pr){var Sr=this._find(wr,!0);return this._values[Sr]=pr,this},cr.prototype.delete=function(wr){var pr=this._find(wr,!1);if(pr>=0){for(var Sr=this._keys.length,Qr=pr+1;Qr<Sr;Qr++)this._keys[Qr-1]=this._keys[Qr],this._values[Qr-1]=this._values[Qr];return this._keys.length--,this._values.length--,wr===this._cacheKey&&(this._cacheKey=pe,this._cacheIndex=-2),!0}return!1},cr.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=pe,this._cacheIndex=-2},cr.prototype.keys=function(){return new cn(this._keys,this._values,En)},cr.prototype.values=function(){return new cn(this._keys,this._values,lr)},cr.prototype.entries=function(){return new cn(this._keys,this._values,gi)},cr.prototype["@@iterator"]=function(){return this.entries()},cr.prototype[W]=function(){return this.entries()},cr.prototype._find=function(wr,pr){return this._cacheKey!==wr&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=wr)),this._cacheIndex<0&&pr&&(this._cacheIndex=this._keys.length,this._keys.push(wr),this._values.push(void 0)),this._cacheIndex},cr}();function En(cr,wr){return cr}function lr(cr,wr){return wr}function gi(cr,wr){return[cr,wr]}}function sr(){return function(){function pe(){this._map=new ee}return Object.defineProperty(pe.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),pe.prototype.has=function(Qe){return this._map.has(Qe)},pe.prototype.add=function(Qe){return this._map.set(Qe,Qe),this},pe.prototype.delete=function(Qe){return this._map.delete(Qe)},pe.prototype.clear=function(){this._map.clear()},pe.prototype.keys=function(){return this._map.keys()},pe.prototype.values=function(){return this._map.values()},pe.prototype.entries=function(){return this._map.entries()},pe.prototype["@@iterator"]=function(){return this.keys()},pe.prototype[W]=function(){return this.keys()},pe}()}function ir(){var pe=16,Qe=ie.create(),cn=En();return function(){function pr(){this._key=En()}return pr.prototype.has=function(Sr){var Qr=lr(Sr,!1);return Qr!==void 0?ie.has(Qr,this._key):!1},pr.prototype.get=function(Sr){var Qr=lr(Sr,!1);return Qr!==void 0?ie.get(Qr,this._key):void 0},pr.prototype.set=function(Sr,Qr){var ya=lr(Sr,!0);return ya[this._key]=Qr,this},pr.prototype.delete=function(Sr){var Qr=lr(Sr,!1);return Qr!==void 0?delete Qr[this._key]:!1},pr.prototype.clear=function(){this._key=En()},pr}();function En(){var pr;do pr="@@WeakMap@@"+wr();while(ie.has(Qe,pr));return Qe[pr]=!0,pr}function lr(pr,Sr){if(!z.call(pr,cn)){if(!Sr)return;Object.defineProperty(pr,cn,{value:ie.create()})}return pr[cn]}function gi(pr,Sr){for(var Qr=0;Qr<Sr;++Qr)pr[Qr]=Math.random()*255|0;return pr}function cr(pr){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(pr)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(pr)):gi(new Uint8Array(pr),pr):gi(new Array(pr),pr)}function wr(){var pr=cr(pe);pr[6]=pr[6]&79|64,pr[8]=pr[8]&191|128;for(var Sr="",Qr=0;Qr<pe;++Qr){var ya=pr[Qr];(Qr===4||Qr===6||Qr===8)&&(Sr+="-"),ya<16&&(Sr+="0"),Sr+=ya.toString(16).toLowerCase()}return Sr}}function Ie(pe){return pe.__=void 0,delete pe.__,pe}})})(_||(_={}))}).call(this,v("Q2Ig"),v("IyRk"))},n2J3:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.unmanaged=void 0;var B=v("xfSm"),C=v("GXnB"),_=v("Ztfv");function P(){return function(N,z,R){var q=new C.Metadata(B.UNMANAGED_TAG,!0);_.tagParameter(N,z,R,q)}}T.unmanaged=P},nO7B:function(fe,T){},"nW7/":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Twitter=void 0;var B=v("q1tI"),C=te(B),_=v("17x9"),P=te(_),N=v("/FUP"),z=te(N),R=v("3WF5"),q=te(R),W=v("QkVN"),Z=te(W),X=v("p8yl"),ne=te(X),ie=v("TM95");function te(ee){return ee&&ee.__esModule?ee:{default:ee}}var ce=T.Twitter=function(Y){var le=Y.onChange,re=Y.onSwatchHover,Q=Y.hex,ge=Y.colors,oe=Y.width,Te=Y.triangle,be=Y.styles,j=be===void 0?{}:be,ke=Y.className,Je=ke===void 0?"":ke,Pe=(0,z.default)((0,Z.default)({default:{card:{width:oe,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},j),{"hide-triangle":Te==="hide","top-left-triangle":Te==="top-left","top-right-triangle":Te==="top-right"}),Ae=function(k,Xe){ne.default.isValidHex(k)&&le({hex:k,source:"hex"},Xe)};return C.default.createElement("div",{style:Pe.card,className:"twitter-picker "+Je},C.default.createElement("div",{style:Pe.triangleShadow}),C.default.createElement("div",{style:Pe.triangle}),C.default.createElement("div",{style:Pe.body},(0,q.default)(ge,function(ot,k){return C.default.createElement(ie.Swatch,{key:k,color:ot,hex:ot,style:Pe.swatch,onClick:Ae,onHover:re,focusStyle:{boxShadow:"0 0 4px "+ot}})}),C.default.createElement("div",{style:Pe.hash},"#"),C.default.createElement(ie.EditableInput,{style:{input:Pe.input},value:Q.replace("#",""),onChange:Ae}),C.default.createElement("div",{style:Pe.clear})))};ce.propTypes={width:P.default.oneOfType([P.default.string,P.default.number]),triangle:P.default.oneOf(["hide","top-left","top-right"]),colors:P.default.arrayOf(P.default.string),styles:P.default.object},ce.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},T.default=(0,ie.ColorWrap)(ce)},o0o1:function(fe,T,v){var B=v("fsL8")();fe.exports=B;try{regeneratorRuntime=B}catch(C){typeof globalThis=="object"?globalThis.regeneratorRuntime=B:Function("r","regeneratorRuntime = r")(B)}},o5UB:function(fe,T,v){var B=v("cDf5").default,C=v("5Q0V");function _(P){var N=C(P,"string");return B(N)==="symbol"?N:String(N)}fe.exports=_,fe.exports.__esModule=!0,fe.exports.default=fe.exports},oDt1:function(fe,T,v){"use strict";v.d(T,"a",function(){return Z}),v.d(T,"b",function(){return X});var B=v("o0o1"),C=v.n(B),_=v("yXPU"),P=v.n(_),N=v("W8MJ"),z=v.n(N),R=v("lwsE"),q=v.n(R),W=v("9y2T"),Z=function ne(ie){q()(this,ne)},X=function(){function ne(ie){q()(this,ne),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=ie}return z()(ne,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(te){return this.lookup[te]>-1}},{key:"create",value:function(te,ce){this.lookup[te]=this.components.length;var ee=new this.clazz(ce||{});return this.components.push(ee),this.entities.push(te),ee}},{key:"remove",value:function(te){var ce=this.lookup[te];ce>-1&&ce<this.components.length-1&&(this.components[ce]=this.components[this.components.length-1],this.entities[ce]=this.entities[this.entities.length-1],this.lookup[this.entities[ce]]=ce),this.components.pop(),this.entities.pop(),delete this.lookup[te]}},{key:"removeKeepSorted",value:function(te){var ce=this.lookup[te];if(ce>-1){var ee=this.entities[ce];if(ce<this.components.length-1){for(var Y=ce+1;Y<this.components.length;++Y)this.components[Y-1]=this.components[Y];for(var le=ce+1;le<this.entities.length;++le)this.entities[le-1]=this.entities[le],this.lookup[this.entities[le-1]]=le-1}this.components.pop(),this.entities.pop(),delete this.lookup[ee]}}},{key:"moveItem",value:function(te,ce){if(te!==ce){for(var ee=this.components[te],Y=this.entities[te],le=te<ce?1:-1,re=te;re!==ce;re+=le){var Q=re+le;this.components[re]=this.components[Q],this.entities[re]=this.entities[Q],this.lookup[this.entities[re]]=re}this.components[ce]=ee,this.entities[ce]=Y,this.lookup[Y]=ce}}},{key:"getEntity",value:function(te){return this.entities[te]}},{key:"getComponent",value:function(te){return this.components[te]}},{key:"getComponentByEntity",value:function(te){var ce=this.lookup[te];return ce>-1?this.components[ce]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(te){for(var ce=0,ee=Object.keys(this.lookup);ce<ee.length;ce++){var Y=ee[ce],le=Number(Y);if(this.lookup[le]===te)return le}return W.a}},{key:"find",value:function(te){for(var ce=0;ce<this.getCount();ce++){var ee=this.getComponent(ce);if(te(ee,ce))return ee}return null}},{key:"findIndex",value:function(te){for(var ce=0;ce<this.getCount();ce++){var ee=this.getComponent(ce);if(te(ee,ce))return ce}return-1}},{key:"forEach",value:function(te){for(var ce=0,ee=Object.keys(this.lookup);ce<ee.length;ce++){var Y=ee[ce],le=Number(Y),re=this.lookup[le];te(le,this.getComponent(re))}}},{key:"forEachAsync",value:function(){var ie=P()(C.a.mark(function ce(ee){var Y,le,re,Q,ge;return C.a.wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:Y=0,le=Object.keys(this.lookup);case 1:if(!(Y<le.length)){Te.next=10;break}return re=le[Y],Q=Number(re),ge=this.lookup[Q],Te.next=7,ee(Q,this.getComponent(ge));case 7:Y++,Te.next=1;break;case 10:case"end":return Te.stop()}},ce,this)}));function te(ce){return ie.apply(this,arguments)}return te}()},{key:"map",value:function(te){for(var ce=[],ee=0,Y=Object.keys(this.lookup);ee<Y.length;ee++){var le=Y[ee],re=Number(le),Q=this.lookup[re];ce.push(te(re,this.getComponent(Q)))}return ce}}]),ne}()},oPLb:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Compact=void 0;var B=v("q1tI"),C=le(B),_=v("17x9"),P=le(_),N=v("/FUP"),z=le(N),R=v("3WF5"),q=le(R),W=v("QkVN"),Z=le(W),X=v("p8yl"),ne=le(X),ie=v("TM95"),te=v("ZQT/"),ce=le(te),ee=v("8J/B"),Y=le(ee);function le(Q){return Q&&Q.__esModule?Q:{default:Q}}var re=T.Compact=function(ge){var oe=ge.onChange,Te=ge.onSwatchHover,be=ge.colors,j=ge.hex,ke=ge.rgb,Je=ge.styles,Pe=Je===void 0?{}:Je,Ae=ge.className,ot=Ae===void 0?"":Ae,k=(0,z.default)((0,Z.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},Pe)),Xe=function(lt,Ut){lt.hex?ne.default.isValidHex(lt.hex)&&oe({hex:lt.hex,source:"hex"},Ut):oe(lt,Ut)};return C.default.createElement(ie.Raised,{style:k.Compact,styles:Pe},C.default.createElement("div",{style:k.compact,className:"compact-picker "+ot},C.default.createElement("div",null,(0,q.default)(be,function(Ot){return C.default.createElement(ce.default,{key:Ot,color:Ot,active:Ot.toLowerCase()===j,onClick:Xe,onSwatchHover:Te})}),C.default.createElement("div",{style:k.clear})),C.default.createElement(Y.default,{hex:j,rgb:ke,onChange:Xe})))};re.propTypes={colors:P.default.arrayOf(P.default.string),styles:P.default.object},re.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},T.default=(0,ie.ColorWrap)(re)},oaX6:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.targetName=void 0;var B=v("xfSm"),C=v("GXnB"),_=v("Ztfv");function P(N){return function(z,R,q){var W=new C.Metadata(B.NAME_TAG,N);_.tagParameter(z,R,q,W)}}T.targetName=P},olaO:function(fe,T){},"oy+k":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Context=void 0;var B=v("d9O0"),C=function(){function _(P){this.id=B.id(),this.container=P}return _.prototype.addPlan=function(P){this.plan=P},_.prototype.setCurrentRequest=function(P){this.currentRequest=P},_}();T.Context=C},p8yl:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.red=void 0;var B=v("xkGU"),C=N(B),_=v("lMfh"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}T.default={simpleCheckForValidColor:function(q){var W=["r","g","b","a","h","s","l","v"],Z=0,X=0;return(0,C.default)(W,function(ne){if(q[ne]&&(Z+=1,isNaN(q[ne])||(X+=1),ne==="s"||ne==="l")){var ie=/^\d+%$/;ie.test(q[ne])&&(X+=1)}}),Z===X?q:!1},toState:function(q,W){var Z=q.hex?(0,P.default)(q.hex):(0,P.default)(q),X=Z.toHsl(),ne=Z.toHsv(),ie=Z.toRgb(),te=Z.toHex();X.s===0&&(X.h=W||0,ne.h=W||0);var ce=te==="000000"&&ie.a===0;return{hsl:X,hex:ce?"transparent":"#"+te,rgb:ie,hsv:ne,oldHue:q.h||W||X.h,source:q.source}},isValidHex:function(q){var W=String(q).charAt(0)==="#"?1:0;return q.length!==4+W&&q.length<7+W&&(0,P.default)(q).isValid()},getContrastingColor:function(q){if(!q)return"#fff";var W=this.toState(q);if(W.hex==="transparent")return"rgba(0,0,0,0.4)";var Z=(W.rgb.r*299+W.rgb.g*587+W.rgb.b*114)/1e3;return Z>=128?"#000":"#fff"}};var z=T.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},ph3A:function(fe,T,v){"use strict";v.d(T,"a",function(){return ge});var B=v("lSNA"),C=v.n(B),_=v("lwsE"),P=v.n(_),N=v("W8MJ"),z=v.n(N),R=v("PJYZ"),q=v.n(R),W=v("7W2i"),Z=v.n(W),X=v("a1gu"),ne=v.n(X),ie=v("Nsbk"),te=v.n(ie),ce=v("Gj0h"),ee=v("oDt1");function Y(oe,Te){var be=Object.keys(oe);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(oe);Te&&(j=j.filter(function(ke){return Object.getOwnPropertyDescriptor(oe,ke).enumerable})),be.push.apply(be,j)}return be}function le(oe){for(var Te=1;Te<arguments.length;Te++){var be=arguments[Te]!=null?arguments[Te]:{};Te%2?Y(Object(be),!0).forEach(function(j){C()(oe,j,be[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(oe,Object.getOwnPropertyDescriptors(be)):Y(Object(be)).forEach(function(j){Object.defineProperty(oe,j,Object.getOwnPropertyDescriptor(be,j))})}return oe}function re(oe){var Te=Q();return function(){var j=te()(oe),ke;if(Te){var Je=te()(this).constructor;ke=Reflect.construct(j,arguments,Je)}else ke=j.apply(this,arguments);return ne()(this,ke)}}function Q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(oe){return!1}}var ge=function(oe){Z()(be,oe);var Te=re(be);function be(j){var ke;return P()(this,be),ke=Te.call(this,j),ke.vertexShaderGLSL=void 0,ke.fragmentShaderGLSL=void 0,ke.defines={},ke.dirty=!0,ke.uniforms=[],ke.cull={enable:!0,face:ce.gl.BACK},ke.depth={enable:!0},ke.blend=void 0,ke.entity=void 0,ke.type=void 0,Object.assign(q()(ke),j),ke}return z()(be,[{key:"setDefines",value:function(ke){return this.defines=le(le({},this.defines),ke),this}},{key:"setCull",value:function(ke){return this.cull=ke,this}},{key:"setDepth",value:function(ke){return this.depth=ke,this}},{key:"setBlend",value:function(ke){return this.blend=ke,this}},{key:"setUniform",value:function(ke,Je){var Pe=this;if(typeof ke!="string")return Object.keys(ke).forEach(function(ot){return Pe.setUniform(ot,ke[ot])}),this;var Ae=this.uniforms.find(function(ot){return ot.name===ke});return Ae?(Ae.dirty=!0,Ae.data=Je):this.uniforms.push({name:ke,dirty:!0,data:Je}),this.dirty=!0,this}}]),be}(ee.a)},plQd:function(fe,T,v){fe.exports=v("C3Dj")},qK8v:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.isStackOverflowExeption=void 0;var B=v("MON2");function C(_){return _ instanceof RangeError||_.message===B.STACK_OVERFLOW}T.isStackOverflowExeption=C},qPyV:function(fe,T,v){var B=v("ut/Y"),C=v("LGYb");function _(P,N){return P&&P.length?C(P,B(N,2)):[]}fe.exports=_},qfsk:function(fe,T,v){"use strict";v.d(T,"b",function(){return W}),v.d(T,"a",function(){return Z});var B=v("J4zp"),C=v.n(B),_=v("lwsE"),P=v.n(_),N=v("W8MJ"),z=v.n(N),R=v("IOcx"),q=v("cXWL"),W;(function(X){X[X.OUTSIDE=4294967295]="OUTSIDE",X[X.INSIDE=0]="INSIDE",X[X.INDETERMINATE=2147483647]="INDETERMINATE"})(W||(W={}));var Z=function(){function X(ne){if(P()(this,X),this.planes=[],ne)this.planes=ne;else for(var ie=0;ie<6;ie++)this.planes.push(new q.a)}return z()(X,[{key:"extractFromVPMatrix",value:function(ie){var te=C()(ie,16),ce=te[0],ee=te[1],Y=te[2],le=te[3],re=te[4],Q=te[5],ge=te[6],oe=te[7],Te=te[8],be=te[9],j=te[10],ke=te[11],Je=te[12],Pe=te[13],Ae=te[14],ot=te[15];R.d.set(this.planes[0].normal,le-ce,oe-re,ke-Te),this.planes[0].distance=-(ot-Je),R.d.set(this.planes[1].normal,le+ce,oe+re,ke+Te),this.planes[1].distance=-(ot+Je),R.d.set(this.planes[2].normal,le+ee,oe+Q,ke+be),this.planes[2].distance=-(ot+Pe),R.d.set(this.planes[3].normal,le-ee,oe-Q,ke-be),this.planes[3].distance=-(ot-Pe),R.d.set(this.planes[4].normal,le-Y,oe-ge,ke-j),this.planes[4].distance=-(ot-Ae),R.d.set(this.planes[5].normal,le+Y,oe+ge,ke+j),this.planes[5].distance=-(ot+Ae),this.planes.forEach(function(k){k.normalize(),k.updatePNVertexFlag()})}}]),X}()},"ql/k":function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B=Object.assign||function(R){for(var q=1;q<arguments.length;q++){var W=arguments[q];for(var Z in W)Object.prototype.hasOwnProperty.call(W,Z)&&(R[Z]=W[Z])}return R},C=v("q1tI"),_=P(C);function P(R){return R&&R.__esModule?R:{default:R}}function N(R,q){var W={};for(var Z in R)q.indexOf(Z)>=0||!Object.prototype.hasOwnProperty.call(R,Z)||(W[Z]=R[Z]);return W}var z=24;T.default=function(R){var q=R.fill,W=q===void 0?"currentColor":q,Z=R.width,X=Z===void 0?z:Z,ne=R.height,ie=ne===void 0?z:ne,te=R.style,ce=te===void 0?{}:te,ee=N(R,["fill","width","height","style"]);return _.default.createElement("svg",B({viewBox:"0 0 "+z+" "+z,style:B({fill:W,width:X,height:ie},ce)},ee),_.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},qo7Q:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.AlphaPicker=void 0;var B=Object.assign||function(X){for(var ne=1;ne<arguments.length;ne++){var ie=arguments[ne];for(var te in ie)Object.prototype.hasOwnProperty.call(ie,te)&&(X[te]=ie[te])}return X},C=v("q1tI"),_=W(C),P=v("/FUP"),N=W(P),z=v("TM95"),R=v("Syy6"),q=W(R);function W(X){return X&&X.__esModule?X:{default:X}}var Z=T.AlphaPicker=function(ne){var ie=ne.rgb,te=ne.hsl,ce=ne.width,ee=ne.height,Y=ne.onChange,le=ne.direction,re=ne.style,Q=ne.renderers,ge=ne.pointer,oe=ne.className,Te=oe===void 0?"":oe,be=(0,N.default)({default:{picker:{position:"relative",width:ce,height:ee},alpha:{radius:"2px",style:re}}});return _.default.createElement("div",{style:be.picker,className:"alpha-picker "+Te},_.default.createElement(z.Alpha,B({},be.alpha,{rgb:ie,hsl:te,pointer:ge,renderers:Q,onChange:Y,direction:le})))};Z.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:q.default},T.default=(0,z.ColorWrap)(Z)},r5xO:function(fe,T){fe.exports=function(P){return v(B(P),P)},fe.exports.array=v;function v(P,N){var z=P.length,R=new Array(z),q={},W=z,Z=C(N),X=_(P);for(N.forEach(function(ie){if(!X.has(ie[0])||!X.has(ie[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});W--;)q[W]||ne(P[W],W,new Set);return R;function ne(ie,te,ce){if(ce.has(ie)){var ee;try{ee=", node was:"+JSON.stringify(ie)}catch(re){ee=""}throw new Error("Cyclic dependency"+ee)}if(!X.has(ie))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(ie));if(!q[te]){q[te]=!0;var Y=Z.get(ie)||new Set;if(Y=Array.from(Y),te=Y.length){ce.add(ie);do{var le=Y[--te];ne(le,X.get(le),ce)}while(te);ce.delete(ie)}R[--z]=ie}}}function B(P){for(var N=new Set,z=0,R=P.length;z<R;z++){var q=P[z];N.add(q[0]),N.add(q[1])}return Array.from(N)}function C(P){for(var N=new Map,z=0,R=P.length;z<R;z++){var q=P[z];N.has(q[0])||N.set(q[0],new Set),N.has(q[1])||N.set(q[1],new Set),N.get(q[0]).add(q[1])}return N}function _(P){for(var N=new Map,z=0,R=P.length;z<R;z++)N.set(P[z],z);return N}},"rAM+":function(fe,T,v){"use strict";v.d(T,"a",function(){return C});var B=v("Qw5x");function C(_,P){var N=typeof Symbol!="undefined"&&_[Symbol.iterator]||_["@@iterator"];if(!N){if(Array.isArray(_)||(N=Object(B.a)(_))||P&&_&&typeof _.length=="number"){N&&(_=N);var z=0,R=function(){};return{s:R,n:function(){return z>=_.length?{done:!0}:{done:!1,value:_[z++]}},e:function(ne){throw ne},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q=!0,W=!1,Z;return{s:function(){N=N.call(_)},n:function(){var ne=N.next();return q=ne.done,ne},e:function(ne){W=!0,Z=ne},f:function(){try{!q&&N.return!=null&&N.return()}finally{if(W)throw Z}}}}},rJ8t:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Block=void 0;var B=v("q1tI"),C=te(B),_=v("17x9"),P=te(_),N=v("/FUP"),z=te(N),R=v("QkVN"),q=te(R),W=v("p8yl"),Z=te(W),X=v("TM95"),ne=v("uDUr"),ie=te(ne);function te(ee){return ee&&ee.__esModule?ee:{default:ee}}var ce=T.Block=function(Y){var le=Y.onChange,re=Y.onSwatchHover,Q=Y.hex,ge=Y.colors,oe=Y.width,Te=Y.triangle,be=Y.styles,j=be===void 0?{}:be,ke=Y.className,Je=ke===void 0?"":ke,Pe=Q==="transparent",Ae=function(Xe,Ot){Z.default.isValidHex(Xe)&&le({hex:Xe,source:"hex"},Ot)},ot=(0,z.default)((0,q.default)({default:{card:{width:oe,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:Q,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Z.default.getContrastingColor(Q),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+Q+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},j),{"hide-triangle":Te==="hide"});return C.default.createElement("div",{style:ot.card,className:"block-picker "+Je},C.default.createElement("div",{style:ot.triangle}),C.default.createElement("div",{style:ot.head},Pe&&C.default.createElement(X.Checkboard,{borderRadius:"6px 6px 0 0"}),C.default.createElement("div",{style:ot.label},Q)),C.default.createElement("div",{style:ot.body},C.default.createElement(ie.default,{colors:ge,onClick:Ae,onSwatchHover:re}),C.default.createElement(X.EditableInput,{style:{input:ot.input},value:Q,onChange:Ae})))};ce.propTypes={width:P.default.oneOfType([P.default.string,P.default.number]),colors:P.default.arrayOf(P.default.string),triangle:P.default.oneOf(["top","hide"]),styles:P.default.object},ce.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},T.default=(0,X.ColorWrap)(ce)},s8Cx:function(fe,T,v){var B=v("3z9K");fe.exports=_;var C=B.constant(1);function _(N,z,R){return P(N,z||C,R||function(q){return N.outEdges(q)})}function P(N,z,R){var q={},W=N.nodes();return W.forEach(function(Z){q[Z]={},q[Z][Z]={distance:0},W.forEach(function(X){Z!==X&&(q[Z][X]={distance:Number.POSITIVE_INFINITY})}),R(Z).forEach(function(X){var ne=X.v===Z?X.w:X.v,ie=z(X);q[Z][ne]={distance:ie,predecessor:Z}})}),W.forEach(function(Z){var X=q[Z];W.forEach(function(ne){var ie=q[ne];W.forEach(function(te){var ce=ie[Z],ee=X[te],Y=ie[te],le=ce.distance+ee.distance;le<Y.distance&&(Y.distance=le,Y.predecessor=ee.predecessor)})})}),q}},sVjb:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.PhotoshopPointerCircle=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.PhotoshopPointerCircle=function(){var q=(0,P.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return C.default.createElement("div",{style:q.pointer},C.default.createElement("div",{style:q.left},C.default.createElement("div",{style:q.leftInside})),C.default.createElement("div",{style:q.right},C.default.createElement("div",{style:q.rightInside})))};T.default=z},sfHF:function(fe,T,v){},si6p:function(fe,T,v){var B,C,_;/*!
* jQuery Mousewheel 3.1.13
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license
* http://jquery.org/license
*/(function(P){C=[v("EVdn")],B=P,_=typeof B=="function"?B.apply(T,C):B,_!==void 0&&(fe.exports=_)})(function(P){var N=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],z="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],R=Array.prototype.slice,q,W;if(P.event.fixHooks)for(var Z=N.length;Z;)P.event.fixHooks[N[--Z]]=P.event.mouseHooks;var X=P.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var ee=z.length;ee;)this.addEventListener(z[--ee],ne,!1);else this.onmousewheel=ne;P.data(this,"mousewheel-line-height",X.getLineHeight(this)),P.data(this,"mousewheel-page-height",X.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var ee=z.length;ee;)this.removeEventListener(z[--ee],ne,!1);else this.onmousewheel=null;P.removeData(this,"mousewheel-line-height"),P.removeData(this,"mousewheel-page-height")},getLineHeight:function(ee){var Y=P(ee),le=Y["offsetParent"in P.fn?"offsetParent":"parent"]();return le.length||(le=P("body")),parseInt(le.css("fontSize"),10)||parseInt(Y.css("fontSize"),10)||16},getPageHeight:function(ee){return P(ee).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};P.fn.extend({mousewheel:function(ee){return ee?this.bind("mousewheel",ee):this.trigger("mousewheel")},unmousewheel:function(ee){return this.unbind("mousewheel",ee)}});function ne(ce){var ee=ce||window.event,Y=R.call(arguments,1),le=0,re=0,Q=0,ge=0,oe=0,Te=0;if(ce=P.event.fix(ee),ce.type="mousewheel","detail"in ee&&(Q=ee.detail*-1),"wheelDelta"in ee&&(Q=ee.wheelDelta),"wheelDeltaY"in ee&&(Q=ee.wheelDeltaY),"wheelDeltaX"in ee&&(re=ee.wheelDeltaX*-1),"axis"in ee&&ee.axis===ee.HORIZONTAL_AXIS&&(re=Q*-1,Q=0),le=Q===0?re:Q,"deltaY"in ee&&(Q=ee.deltaY*-1,le=Q),"deltaX"in ee&&(re=ee.deltaX,Q===0&&(le=re*-1)),!(Q===0&&re===0)){if(ee.deltaMode===1){var be=P.data(this,"mousewheel-line-height");le*=be,Q*=be,re*=be}else if(ee.deltaMode===2){var j=P.data(this,"mousewheel-page-height");le*=j,Q*=j,re*=j}if(ge=Math.max(Math.abs(Q),Math.abs(re)),(!W||ge<W)&&(W=ge,te(ee,ge)&&(W/=40)),te(ee,ge)&&(le/=40,re/=40,Q/=40),le=Math[le>=1?"floor":"ceil"](le/W),re=Math[re>=1?"floor":"ceil"](re/W),Q=Math[Q>=1?"floor":"ceil"](Q/W),X.settings.normalizeOffset&&this.getBoundingClientRect){var ke=this.getBoundingClientRect();oe=ce.clientX-ke.left,Te=ce.clientY-ke.top}return ce.deltaX=re,ce.deltaY=Q,ce.deltaFactor=W,ce.offsetX=oe,ce.offsetY=Te,ce.deltaMode=0,Y.unshift(ce,le,re,Q),q&&clearTimeout(q),q=setTimeout(ie,200),(P.event.dispatch||P.event.handle).apply(this,Y)}}function ie(){W=null}function te(ce,ee){return X.settings.adjustOldDeltas&&ce.type==="mousewheel"&&ee%120==0}})},sj7I:function(fe,T){fe.exports=v;function v(B,C,_){var P=Math.cos(_),N=Math.sin(_),z=C[0],R=C[1];return B[0]=z*P-R*N,B[1]=z*N+R*P,B}},srvI:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var B=T.calculateChange=function(_,P,N,z){_.preventDefault();var R=z.clientWidth,q=z.clientHeight,W=typeof _.pageX=="number"?_.pageX:_.touches[0].pageX,Z=typeof _.pageY=="number"?_.pageY:_.touches[0].pageY,X=W-(z.getBoundingClientRect().left+window.pageXOffset),ne=Z-(z.getBoundingClientRect().top+window.pageYOffset);if(P==="vertical"){var ie=void 0;if(ne<0)ie=359;else if(ne>q)ie=0;else{var te=-(ne*100/q)+100;ie=360*te/100}if(N.h!==ie)return{h:ie,s:N.s,l:N.l,a:N.a,source:"rgb"}}else{var ce=void 0;if(X<0)ce=0;else if(X>R)ce=359;else{var ee=X*100/R;ce=360*ee/100}if(N.h!==ce)return{h:ce,s:N.s,l:N.l,a:N.a,source:"rgb"}}return null}},swpM:function(fe,T,v){var B=v("3z9K");fe.exports=C,C.CycleException=_;function C(P){var N={},z={},R=[];function q(W){if(B.has(z,W))throw new _;B.has(N,W)||(z[W]=!0,N[W]=!0,B.each(P.predecessors(W),q),delete z[W],R.push(W))}if(B.each(P.sinks(),q),B.size(N)!==P.nodeCount())throw new _;return R}function _(){}},t8N9:function(fe,T){fe.exports=v;function v(B,C){var _=C[0],P=C[1],N=_*_+P*P;return N>0&&(N=1/Math.sqrt(N),B[0]=C[0]*N,B[1]=C[1]*N),B}},t8r4:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Swatches=void 0;var B=v("q1tI"),C=re(B),_=v("17x9"),P=re(_),N=v("/FUP"),z=re(N),R=v("3WF5"),q=re(R),W=v("QkVN"),Z=re(W),X=v("p8yl"),ne=re(X),ie=v("wME1"),te=le(ie),ce=v("TM95"),ee=v("Efrf"),Y=re(ee);function le(ge){if(ge&&ge.__esModule)return ge;var oe={};if(ge!=null)for(var Te in ge)Object.prototype.hasOwnProperty.call(ge,Te)&&(oe[Te]=ge[Te]);return oe.default=ge,oe}function re(ge){return ge&&ge.__esModule?ge:{default:ge}}var Q=T.Swatches=function(oe){var Te=oe.width,be=oe.height,j=oe.onChange,ke=oe.onSwatchHover,Je=oe.colors,Pe=oe.hex,Ae=oe.styles,ot=Ae===void 0?{}:Ae,k=oe.className,Xe=k===void 0?"":k,Ot=(0,z.default)((0,Z.default)({default:{picker:{width:Te,height:be},overflow:{height:be,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},ot)),lt=function(Jt,nt){ne.default.isValidHex(Jt)&&j({hex:Jt,source:"hex"},nt)};return C.default.createElement("div",{style:Ot.picker,className:"swatches-picker "+Xe},C.default.createElement(ce.Raised,null,C.default.createElement("div",{style:Ot.overflow},C.default.createElement("div",{style:Ot.body},(0,q.default)(Je,function(Ut){return C.default.createElement(Y.default,{key:Ut.toString(),group:Ut,active:Pe,onClick:lt,onSwatchHover:ke})}),C.default.createElement("div",{style:Ot.clear})))))};Q.propTypes={width:P.default.oneOfType([P.default.string,P.default.number]),height:P.default.oneOfType([P.default.string,P.default.number]),colors:P.default.arrayOf(P.default.arrayOf(P.default.string)),styles:P.default.object},Q.defaultProps={width:320,height:240,colors:[[te.red["900"],te.red["700"],te.red["500"],te.red["300"],te.red["100"]],[te.pink["900"],te.pink["700"],te.pink["500"],te.pink["300"],te.pink["100"]],[te.purple["900"],te.purple["700"],te.purple["500"],te.purple["300"],te.purple["100"]],[te.deepPurple["900"],te.deepPurple["700"],te.deepPurple["500"],te.deepPurple["300"],te.deepPurple["100"]],[te.indigo["900"],te.indigo["700"],te.indigo["500"],te.indigo["300"],te.indigo["100"]],[te.blue["900"],te.blue["700"],te.blue["500"],te.blue["300"],te.blue["100"]],[te.lightBlue["900"],te.lightBlue["700"],te.lightBlue["500"],te.lightBlue["300"],te.lightBlue["100"]],[te.cyan["900"],te.cyan["700"],te.cyan["500"],te.cyan["300"],te.cyan["100"]],[te.teal["900"],te.teal["700"],te.teal["500"],te.teal["300"],te.teal["100"]],["#194D33",te.green["700"],te.green["500"],te.green["300"],te.green["100"]],[te.lightGreen["900"],te.lightGreen["700"],te.lightGreen["500"],te.lightGreen["300"],te.lightGreen["100"]],[te.lime["900"],te.lime["700"],te.lime["500"],te.lime["300"],te.lime["100"]],[te.yellow["900"],te.yellow["700"],te.yellow["500"],te.yellow["300"],te.yellow["100"]],[te.amber["900"],te.amber["700"],te.amber["500"],te.amber["300"],te.amber["100"]],[te.orange["900"],te.orange["700"],te.orange["500"],te.orange["300"],te.orange["100"]],[te.deepOrange["900"],te.deepOrange["700"],te.deepOrange["500"],te.deepOrange["300"],te.deepOrange["100"]],[te.brown["900"],te.brown["700"],te.brown["500"],te.brown["300"],te.brown["100"]],[te.blueGrey["900"],te.blueGrey["700"],te.blueGrey["500"],te.blueGrey["300"],te.blueGrey["100"]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},T.default=(0,ce.ColorWrap)(Q)},tpVr:function(fe,T,v){var B=v("3z9K");fe.exports=C;function C(_){var P={},N=[],z;function R(q){B.has(P,q)||(P[q]=!0,z.push(q),B.each(_.successors(q),R),B.each(_.predecessors(q),R))}return B.each(_.nodes(),function(q){z=[],R(q),z.length&&N.push(z)}),N}},trA2:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.SliderPointer=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.SliderPointer=function(q){var W=q.direction,Z=(0,P.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:W==="vertical"});return C.default.createElement("div",{style:Z.picker})};T.default=z},tu5P:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.ChromePointerCircle=void 0;var B=v("q1tI"),C=N(B),_=v("/FUP"),P=N(_);function N(R){return R&&R.__esModule?R:{default:R}}var z=T.ChromePointerCircle=function(){var q=(0,P.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return C.default.createElement("div",{style:q.picker})};T.default=z},tyuB:function(fe,T,v){"use strict";v.d(T,"a",function(){return lt});var B=v("o0o1"),C=v.n(B),_=v("yXPU"),P=v.n(_),N=v("yG8O"),z=v.n(N),R=v("lwsE"),q=v.n(R),W=v("W8MJ"),Z=v.n(W),X=v("U+yc"),ne=v.n(X),ie=v("1ABj"),te=v.n(ie),ce=v("4cb6"),ee=v.n(ce),Y=v("+uE7"),le=v("g1CP"),re=v("FlHB"),Q=v("94HZ"),ge,oe,Te,be,j,ke,Je,Pe,Ae,ot,k,Xe,Ot,lt=(ge=Object(ce.injectable)(),oe=Object(ce.inject)(Y.a.Systems),Te=Object(ce.named)(Y.a.FrameGraphSystem),be=Object(ce.inject)(Y.a.RenderPassFactory),j=Object(ce.inject)(Y.a.ConfigService),ke=Object(ce.inject)(Y.a.ResourcePool),ge(Je=(Pe=(Ot=function(){function Ut(){q()(this,Ut),z()(this,"frameGraphSystem",Ae,this),z()(this,"renderPassFactory",ot,this),z()(this,"configService",k,this),z()(this,"resourcePool",Xe,this)}return Z()(Ut,[{key:"execute",value:function(){var Jt=P()(C.a.mark(function $t(ze){var ue,an,nn,Qn,Pt,Tn,rr,Qt,sn;return C.a.wrap(function(Sn){for(;;)switch(Sn.prev=Sn.next){case 0:ue=this.renderPassFactory(Q.a.IDENTIFIER),an=ue.setup,nn=ue.execute,Qn=this.frameGraphSystem.addPass(Q.a.IDENTIFIER,an,nn),Pt=this.renderPassFactory(le.a.IDENTIFIER),Tn=Pt.setup,rr=Pt.execute,Qt=Pt.tearDown,sn=this.frameGraphSystem.addPass(le.a.IDENTIFIER,Tn,rr,Qt),this.frameGraphSystem.present(sn.data.output);case 5:case"end":return Sn.stop()}},$t,this)}));function nt($t){return Jt.apply(this,arguments)}return nt}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function(nt,$t){var ze=this.renderPassFactory(re.a.IDENTIFIER);return ze.pick(nt,$t)}}]),Ut}(),Ot),Ae=ne()(Pe.prototype,"frameGraphSystem",[oe,Te],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ot=ne()(Pe.prototype,"renderPassFactory",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=ne()(Pe.prototype,"configService",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xe=ne()(Pe.prototype,"resourcePool",[ke],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pe))||Je)},u6oY:function(fe,T){fe.exports=v;function v(B,C,_){return B[0]=C[0]*_[0],B[1]=C[1]*_[1],B}},uDUr:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BlockSwatches=void 0;var B=v("q1tI"),C=q(B),_=v("/FUP"),P=q(_),N=v("3WF5"),z=q(N),R=v("TM95");function q(Z){return Z&&Z.__esModule?Z:{default:Z}}var W=T.BlockSwatches=function(X){var ne=X.colors,ie=X.onClick,te=X.onSwatchHover,ce=(0,P.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return C.default.createElement("div",{style:ce.swatches},(0,z.default)(ne,function(ee){return C.default.createElement(R.Swatch,{key:ee,color:ee,style:ce.swatch,onClick:ie,onHover:te,focusStyle:{boxShadow:"0 0 4px "+ee}})}),C.default.createElement("div",{style:ce.clear}))};T.default=W},uP9N:function(fe,T,v){var B=v("3z9K"),C=v("WZrV");fe.exports=P;var _=B.constant(1);function P(z,R,q,W){return N(z,String(R),q||_,W||function(Z){return z.outEdges(Z)})}function N(z,R,q,W){var Z={},X=new C,ne,ie,te=function(ee){var Y=ee.v!==ne?ee.v:ee.w,le=Z[Y],re=q(ee),Q=ie.distance+re;if(re<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+ee+" Weight: "+re);Q<le.distance&&(le.distance=Q,le.predecessor=ne,X.decrease(Y,Q))};for(z.nodes().forEach(function(ce){var ee=ce===R?0:Number.POSITIVE_INFINITY;Z[ce]={distance:ee},X.add(ce,ee)});X.size()>0&&(ne=X.removeMin(),ie=Z[ne],ie.distance!==Number.POSITIVE_INFINITY);)W(ne).forEach(te);return Z}},uPCe:function(fe,T,v){fe.exports=v("cGwC")},ujMp:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.circularDependencyToException=T.listMetadataForTarget=T.listRegisteredBindingsForServiceIdentifier=T.getServiceIdentifierAsString=T.getFunctionName=void 0;var B=v("MON2");function C(W){if(typeof W=="function"){var Z=W;return Z.name}else{if(typeof W=="symbol")return W.toString();var Z=W;return Z}}T.getServiceIdentifierAsString=C;function _(W,Z,X){var ne="",ie=X(W,Z);return ie.length!==0&&(ne=`
Registered bindings:`,ie.forEach(function(te){var ce="Object";te.implementationType!==null&&(ce=q(te.implementationType)),ne=ne+`
 `+ce,te.constraint.metaData&&(ne=ne+" - "+te.constraint.metaData)})),ne}T.listRegisteredBindingsForServiceIdentifier=_;function P(W,Z){return W.parentRequest===null?!1:W.parentRequest.serviceIdentifier===Z?!0:P(W.parentRequest,Z)}function N(W){function Z(ne,ie){ie===void 0&&(ie=[]);var te=C(ne.serviceIdentifier);return ie.push(te),ne.parentRequest!==null?Z(ne.parentRequest,ie):ie}var X=Z(W);return X.reverse().join(" --> ")}function z(W){W.childRequests.forEach(function(Z){if(P(Z,Z.serviceIdentifier)){var X=N(Z);throw new Error(B.CIRCULAR_DEPENDENCY+" "+X)}else z(Z)})}T.circularDependencyToException=z;function R(W,Z){if(Z.isTagged()||Z.isNamed()){var X="",ne=Z.getNamedTag(),ie=Z.getCustomTags();return ne!==null&&(X+=ne.toString()+`
`),ie!==null&&ie.forEach(function(te){X+=te.toString()+`
`})," "+W+`
 `+W+" - "+X}else return" "+W}T.listMetadataForTarget=R;function q(W){if(W.name)return W.name;var Z=W.toString(),X=Z.match(/^function\s*([^\s(]+)/);return X?X[1]:"Anonymous function: "+Z}T.getFunctionName=q},"vN+2":function(fe,T){function v(){}fe.exports=v},vdMR:function(fe,T){},"vip/":function(fe,T,v){fe.exports=v("yEj1")},vlGe:function(fe,T,v){"use strict";v.r(T),function(B,C){v.d(T,"Container",function(){return ue}),v.d(T,"Contribution",function(){return Sn}),v.d(T,"DefaultContributionProvider",function(){return Pt}),v.d(T,"GlobalContainer",function(){return an}),v.d(T,"Module",function(){return sn}),v.d(T,"OptionSymbol",function(){return Jt}),v.d(T,"Provider",function(){return Qn}),v.d(T,"Syringe",function(){return re}),v.d(T,"SyringeModule",function(){return Qt}),v.d(T,"Utils",function(){return Q}),v.d(T,"contrib",function(){return kn}),v.d(T,"inject",function(){return lt}),v.d(T,"injectable",function(){return k}),v.d(T,"named",function(){return Ut}),v.d(T,"register",function(){return nn}),v.d(T,"registerSideOption",function(){return nt}),v.d(T,"singleton",function(){return Xe}),v.d(T,"transient",function(){return Ot});var _=v("4cb6"),P=v.n(_);v.d(T,"decorate",function(){return _.decorate}),v.d(T,"optional",function(){return _.optional}),v.d(T,"postConstruct",function(){return _.postConstruct}),v.d(T,"unmanaged",function(){return _.unmanaged});function N(st,At){var vt=Object.keys(st);if(Object.getOwnPropertySymbols){var _t=Object.getOwnPropertySymbols(st);At&&(_t=_t.filter(function(Kt){return Object.getOwnPropertyDescriptor(st,Kt).enumerable})),vt.push.apply(vt,_t)}return vt}function z(st){for(var At=1;At<arguments.length;At++){var vt=arguments[At]!=null?arguments[At]:{};At%2?N(Object(vt),!0).forEach(function(_t){X(st,_t,vt[_t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(st,Object.getOwnPropertyDescriptors(vt)):N(Object(vt)).forEach(function(_t){Object.defineProperty(st,_t,Object.getOwnPropertyDescriptor(vt,_t))})}return st}function R(st){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?R=function(vt){return typeof vt}:R=function(vt){return vt&&typeof Symbol=="function"&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt},R(st)}function q(st,At){if(!(st instanceof At))throw new TypeError("Cannot call a class as a function")}function W(st,At){for(var vt=0;vt<At.length;vt++){var _t=At[vt];_t.enumerable=_t.enumerable||!1,_t.configurable=!0,"value"in _t&&(_t.writable=!0),Object.defineProperty(st,_t.key,_t)}}function Z(st,At,vt){return At&&W(st.prototype,At),vt&&W(st,vt),st}function X(st,At,vt){return At in st?Object.defineProperty(st,At,{value:vt,enumerable:!0,configurable:!0,writable:!0}):st[At]=vt,st}function ne(st){return ie(st)||te(st)||ce(st)||Y()}function ie(st){if(Array.isArray(st))return ee(st)}function te(st){if(typeof Symbol!="undefined"&&st[Symbol.iterator]!=null||st["@@iterator"]!=null)return Array.from(st)}function ce(st,At){if(!!st){if(typeof st=="string")return ee(st,At);var vt=Object.prototype.toString.call(st).slice(8,-1);if(vt==="Object"&&st.constructor&&(vt=st.constructor.name),vt==="Map"||vt==="Set")return Array.from(st);if(vt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(vt))return ee(st,At)}}function ee(st,At){(At==null||At>st.length)&&(At=st.length);for(var vt=0,_t=new Array(At);vt<At;vt++)_t[vt]=st[vt];return _t}function Y(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var le;(function(st){(function(At){var vt=typeof C=="object"?C:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),_t=Kt(st);typeof vt.Reflect=="undefined"?vt.Reflect=st:_t=Kt(vt.Reflect,_t),At(_t);function Kt(ln,bt){return function(A,Jn){typeof ln[A]!="function"&&Object.defineProperty(ln,A,{configurable:!0,writable:!0,value:Jn}),bt&&bt(A,Jn)}}})(function(At){var vt=Object.prototype.hasOwnProperty,_t=typeof Symbol=="function",Kt=_t&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",ln=_t&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",bt=typeof Object.create=="function",A={__proto__:[]}instanceof Array,Jn=!bt&&!A,Mn={create:bt?function(){return su(Object.create(null))}:A?function(){return su({__proto__:null})}:function(){return su({})},has:Jn?function(Yt,gn){return vt.call(Yt,gn)}:function(Yt,gn){return gn in Yt},get:Jn?function(Yt,gn){return vt.call(Yt,gn)?Yt[gn]:void 0}:function(Yt,gn){return Yt[gn]}},sr=Object.getPrototypeOf(Function),ir=typeof B=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",Ie=!ir&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Nu(),pe=!ir&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:au(),Qe=!ir&&typeof WeakMap=="function"?WeakMap:ou(),cn=new Qe;function En(Yt,gn,qn,tr){if(Yr(qn)){if(!ho(Yt))throw new TypeError;if(!ru(gn))throw new TypeError;return vs(Yt,gn)}else{if(!ho(Yt))throw new TypeError;if(!ra(gn))throw new TypeError;if(!ra(tr)&&!Yr(tr)&&!ba(tr))throw new TypeError;return ba(tr)&&(tr=void 0),qn=So(qn),tu(Yt,gn,qn,tr)}}At("decorate",En);function lr(Yt,gn){function qn(tr,kr){if(!ra(tr))throw new TypeError;if(!Yr(kr)&&!Ol(kr))throw new TypeError;Pa(Yt,gn,tr,kr)}return qn}At("metadata",lr);function gi(Yt,gn,qn,tr){if(!ra(qn))throw new TypeError;return Yr(tr)||(tr=So(tr)),Pa(Yt,gn,qn,tr)}At("defineMetadata",gi);function cr(Yt,gn,qn){if(!ra(gn))throw new TypeError;return Yr(qn)||(qn=So(qn)),Ka(Yt,gn,qn)}At("hasMetadata",cr);function wr(Yt,gn,qn){if(!ra(gn))throw new TypeError;return Yr(qn)||(qn=So(qn)),Ya(Yt,gn,qn)}At("hasOwnMetadata",wr);function pr(Yt,gn,qn){if(!ra(gn))throw new TypeError;return Yr(qn)||(qn=So(qn)),Fi(Yt,gn,qn)}At("getMetadata",pr);function Sr(Yt,gn,qn){if(!ra(gn))throw new TypeError;return Yr(qn)||(qn=So(qn)),_a(Yt,gn,qn)}At("getOwnMetadata",Sr);function Qr(Yt,gn){if(!ra(Yt))throw new TypeError;return Yr(gn)||(gn=So(gn)),Ti(Yt,gn)}At("getMetadataKeys",Qr);function ya(Yt,gn){if(!ra(Yt))throw new TypeError;return Yr(gn)||(gn=So(gn)),nu(Yt,gn)}At("getOwnMetadataKeys",ya);function Ki(Yt,gn,qn){if(!ra(gn))throw new TypeError;Yr(qn)||(qn=So(qn));var tr=Wa(gn,qn,!1);if(Yr(tr)||!tr.delete(Yt))return!1;if(tr.size>0)return!0;var kr=cn.get(gn);return kr.delete(qn),kr.size>0||cn.delete(gn),!0}At("deleteMetadata",Ki);function vs(Yt,gn){for(var qn=Yt.length-1;qn>=0;--qn){var tr=Yt[qn],kr=tr(gn);if(!Yr(kr)&&!ba(kr)){if(!ru(kr))throw new TypeError;gn=kr}}return gn}function tu(Yt,gn,qn,tr){for(var kr=Yt.length-1;kr>=0;--kr){var Fa=Yt[kr],ci=Fa(gn,qn,tr);if(!Yr(ci)&&!ba(ci)){if(!ra(ci))throw new TypeError;tr=ci}}return tr}function Wa(Yt,gn,qn){var tr=cn.get(Yt);if(Yr(tr)){if(!qn)return;tr=new Ie,cn.set(Yt,tr)}var kr=tr.get(gn);if(Yr(kr)){if(!qn)return;kr=new Ie,tr.set(gn,kr)}return kr}function Ka(Yt,gn,qn){var tr=Ya(Yt,gn,qn);if(tr)return!0;var kr=Ru(gn);return ba(kr)?!1:Ka(Yt,kr,qn)}function Ya(Yt,gn,qn){var tr=Wa(gn,qn,!1);return Yr(tr)?!1:ka(tr.has(Yt))}function Fi(Yt,gn,qn){var tr=Ya(Yt,gn,qn);if(tr)return _a(Yt,gn,qn);var kr=Ru(gn);if(!ba(kr))return Fi(Yt,kr,qn)}function _a(Yt,gn,qn){var tr=Wa(gn,qn,!1);if(!Yr(tr))return tr.get(Yt)}function Pa(Yt,gn,qn,tr){var kr=Wa(qn,tr,!0);kr.set(Yt,gn)}function Ti(Yt,gn){var qn=nu(Yt,gn),tr=Ru(Yt);if(tr===null)return qn;var kr=Ti(tr,gn);if(kr.length<=0)return qn;if(qn.length<=0)return kr;for(var Fa=new pe,ci=[],fi=0,Rr=qn;fi<Rr.length;fi++){var di=Rr[fi],Br=Fa.has(di);Br||(Fa.add(di),ci.push(di))}for(var Za=0,Yo=kr;Za<Yo.length;Za++){var di=Yo[Za],Br=Fa.has(di);Br||(Fa.add(di),ci.push(di))}return ci}function nu(Yt,gn){var qn=[],tr=Wa(Yt,gn,!1);if(Yr(tr))return qn;for(var kr=tr.keys(),Fa=Sl(kr),ci=0;;){var fi=Iu(Fa);if(!fi)return qn.length=ci,qn;var Rr=Du(fi);try{qn[ci]=Rr}catch(di){try{iu(Fa)}finally{throw di}}ci++}}function Ko(Yt){if(Yt===null)return 1;switch(typeof Yt){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return Yt===null?1:6;default:return 6}}function Yr(Yt){return Yt===void 0}function ba(Yt){return Yt===null}function gs(Yt){return typeof Yt=="symbol"}function ra(Yt){return typeof Yt=="object"?Yt!==null:typeof Yt=="function"}function $a(Yt,gn){switch(Ko(Yt)){case 0:return Yt;case 1:return Yt;case 2:return Yt;case 3:return Yt;case 4:return Yt;case 5:return Yt}var qn=gn===3?"string":gn===5?"number":"default",tr=No(Yt,Kt);if(tr!==void 0){var kr=tr.call(Yt,qn);if(ra(kr))throw new TypeError;return kr}return ha(Yt,qn==="default"?"number":qn)}function ha(Yt,gn){if(gn==="string"){var qn=Yt.toString;if(ps(qn)){var tr=qn.call(Yt);if(!ra(tr))return tr}var kr=Yt.valueOf;if(ps(kr)){var tr=kr.call(Yt);if(!ra(tr))return tr}}else{var kr=Yt.valueOf;if(ps(kr)){var tr=kr.call(Yt);if(!ra(tr))return tr}var Fa=Yt.toString;if(ps(Fa)){var tr=Fa.call(Yt);if(!ra(tr))return tr}}throw new TypeError}function ka(Yt){return!!Yt}function Ro(Yt){return""+Yt}function So(Yt){var gn=$a(Yt,3);return gs(gn)?gn:Ro(gn)}function ho(Yt){return Array.isArray?Array.isArray(Yt):Yt instanceof Object?Yt instanceof Array:Object.prototype.toString.call(Yt)==="[object Array]"}function ps(Yt){return typeof Yt=="function"}function ru(Yt){return typeof Yt=="function"}function Ol(Yt){switch(Ko(Yt)){case 3:return!0;case 4:return!0;default:return!1}}function No(Yt,gn){var qn=Yt[gn];if(qn!=null){if(!ps(qn))throw new TypeError;return qn}}function Sl(Yt){var gn=No(Yt,ln);if(!ps(gn))throw new TypeError;var qn=gn.call(Yt);if(!ra(qn))throw new TypeError;return qn}function Du(Yt){return Yt.value}function Iu(Yt){var gn=Yt.next();return gn.done?!1:gn}function iu(Yt){var gn=Yt.return;gn&&gn.call(Yt)}function Ru(Yt){var gn=Object.getPrototypeOf(Yt);if(typeof Yt!="function"||Yt===sr||gn!==sr)return gn;var qn=Yt.prototype,tr=qn&&Object.getPrototypeOf(qn);if(tr==null||tr===Object.prototype)return gn;var kr=tr.constructor;return typeof kr!="function"||kr===Yt?gn:kr}function Nu(){var Yt={},gn=[],qn=function(){function ci(fi,Rr,di){this._index=0,this._keys=fi,this._values=Rr,this._selector=di}return ci.prototype["@@iterator"]=function(){return this},ci.prototype[ln]=function(){return this},ci.prototype.next=function(){var fi=this._index;if(fi>=0&&fi<this._keys.length){var Rr=this._selector(this._keys[fi],this._values[fi]);return fi+1>=this._keys.length?(this._index=-1,this._keys=gn,this._values=gn):this._index++,{value:Rr,done:!1}}return{value:void 0,done:!0}},ci.prototype.throw=function(fi){throw this._index>=0&&(this._index=-1,this._keys=gn,this._values=gn),fi},ci.prototype.return=function(fi){return this._index>=0&&(this._index=-1,this._keys=gn,this._values=gn),{value:fi,done:!0}},ci}();return function(){function ci(){this._keys=[],this._values=[],this._cacheKey=Yt,this._cacheIndex=-2}return Object.defineProperty(ci.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),ci.prototype.has=function(fi){return this._find(fi,!1)>=0},ci.prototype.get=function(fi){var Rr=this._find(fi,!1);return Rr>=0?this._values[Rr]:void 0},ci.prototype.set=function(fi,Rr){var di=this._find(fi,!0);return this._values[di]=Rr,this},ci.prototype.delete=function(fi){var Rr=this._find(fi,!1);if(Rr>=0){for(var di=this._keys.length,Br=Rr+1;Br<di;Br++)this._keys[Br-1]=this._keys[Br],this._values[Br-1]=this._values[Br];return this._keys.length--,this._values.length--,fi===this._cacheKey&&(this._cacheKey=Yt,this._cacheIndex=-2),!0}return!1},ci.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=Yt,this._cacheIndex=-2},ci.prototype.keys=function(){return new qn(this._keys,this._values,tr)},ci.prototype.values=function(){return new qn(this._keys,this._values,kr)},ci.prototype.entries=function(){return new qn(this._keys,this._values,Fa)},ci.prototype["@@iterator"]=function(){return this.entries()},ci.prototype[ln]=function(){return this.entries()},ci.prototype._find=function(fi,Rr){return this._cacheKey!==fi&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=fi)),this._cacheIndex<0&&Rr&&(this._cacheIndex=this._keys.length,this._keys.push(fi),this._values.push(void 0)),this._cacheIndex},ci}();function tr(ci,fi){return ci}function kr(ci,fi){return fi}function Fa(ci,fi){return[ci,fi]}}function au(){return function(){function Yt(){this._map=new Ie}return Object.defineProperty(Yt.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),Yt.prototype.has=function(gn){return this._map.has(gn)},Yt.prototype.add=function(gn){return this._map.set(gn,gn),this},Yt.prototype.delete=function(gn){return this._map.delete(gn)},Yt.prototype.clear=function(){this._map.clear()},Yt.prototype.keys=function(){return this._map.keys()},Yt.prototype.values=function(){return this._map.values()},Yt.prototype.entries=function(){return this._map.entries()},Yt.prototype["@@iterator"]=function(){return this.keys()},Yt.prototype[ln]=function(){return this.keys()},Yt}()}function ou(){var Yt=16,gn=Mn.create(),qn=tr();return function(){function Rr(){this._key=tr()}return Rr.prototype.has=function(di){var Br=kr(di,!1);return Br!==void 0?Mn.has(Br,this._key):!1},Rr.prototype.get=function(di){var Br=kr(di,!1);return Br!==void 0?Mn.get(Br,this._key):void 0},Rr.prototype.set=function(di,Br){var Za=kr(di,!0);return Za[this._key]=Br,this},Rr.prototype.delete=function(di){var Br=kr(di,!1);return Br!==void 0?delete Br[this._key]:!1},Rr.prototype.clear=function(){this._key=tr()},Rr}();function tr(){var Rr;do Rr="@@WeakMap@@"+fi();while(Mn.has(gn,Rr));return gn[Rr]=!0,Rr}function kr(Rr,di){if(!vt.call(Rr,qn)){if(!di)return;Object.defineProperty(Rr,qn,{value:Mn.create()})}return Rr[qn]}function Fa(Rr,di){for(var Br=0;Br<di;++Br)Rr[Br]=Math.random()*255|0;return Rr}function ci(Rr){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Rr)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Rr)):Fa(new Uint8Array(Rr),Rr):Fa(new Array(Rr),Rr)}function fi(){var Rr=ci(Yt);Rr[6]=Rr[6]&79|64,Rr[8]=Rr[8]&191|128;for(var di="",Br=0;Br<Yt;++Br){var Za=Rr[Br];(Br===4||Br===6||Br===8)&&(di+="-"),Za<16&&(di+="0"),di+=Za.toString(16).toLowerCase()}return di}}function su(Yt){return Yt.__=void 0,delete Yt.__,Yt}})})(le||(le={}));var re;(function(st){st.defineToken=function(Kt){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{multiple:!0};return new st.DefinedToken(Kt,ln)};var At=function Kt(ln){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};q(this,Kt),this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;var A=bt.multiple,Jn=A===void 0?!1:A;this.name=ln,this.symbol=Symbol(this.name),this.multiple=Jn};st.DefinedToken=At;function vt(Kt){return!!Kt&&R(Kt)==="object"&&"id"in Kt&&"registry"in Kt}st.isModule=vt;var _t;(function(Kt){Kt.singleton="singleton",Kt.transient="transient"})(_t=st.Lifecycle||(st.Lifecycle={})),st.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),st.DefaultOption={lifecycle:_t.transient}})(re||(re={}));var Q;(function(st){function At(A){return A instanceof Array?A:A!==void 0?[A]:[]}st.maybeArrayToArray=At;function vt(A){return!!(A&&typeof A=="function"&&"prototype"in A)}st.isClass=vt;function _t(A){return!!(A&&R(A)==="object"&&"symbol"in A&&"multiple"in A)}st.isDefinedToken=_t;function Kt(A){return!!(A&&R(A)==="object"&&"token"in A)}st.isInjectOption=Kt;function ln(A){return!!(A&&R(A)==="object"&&"token"in A&&"named"in A)}st.isNamedToken=ln;function bt(A){return st.isDefinedToken(A)&&A.multiple}st.isMultipleEnabled=bt})(Q||(Q={}));function ge(st){return st.inSingletonScope()}function oe(st){return st.inTransientScope()}function Te(st,At){return At.lifecycle===re.Lifecycle.singleton?ge(st):oe(st)}function be(st,At){st.whenTargetNamed(Pe(At))}function j(st,At){return At.container.bind(Ae(st))}function ke(st,At){var vt=At.container.parent,_t=vt&&vt.isBound(Ae(st));return At.container.isBound(Ae(st))&&!_t?At.container.rebind(Ae(st)):At.container.bind(Ae(st))}function Je(st){return st&&R(st)==="object"&&"container"in st&&"inversify"in st}function Pe(st){return Q.isDefinedToken(st)?st.symbol:st}function Ae(st){return Q.isDefinedToken(st)?st.symbol:st}var ot=new _.Container;function k(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},At=Object(_.injectable)();return function(vt){Reflect.defineMetadata(re.ClassOptionSymbol,z(z({},st),{},{target:vt}),vt),At(vt)}}function Xe(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return k(z(z({},st),{},{lifecycle:re.Lifecycle.singleton}))}function Ot(){var st=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return k(z(z({},st),{},{lifecycle:re.Lifecycle.transient}))}function lt(st){return Object(_.inject)(Ae(st))}function Ut(st){return Object(_.named)(Pe(st))}var Jt=Symbol("SyringeOptionSymbol"),nt=function(At,vt){Reflect.defineMetadata(Jt,At,vt)};function $t(st){var At=Q.maybeArrayToArray(st.token),vt=Q.maybeArrayToArray(st.useClass),_t=Q.maybeArrayToArray(st.useDynamic),Kt=Q.maybeArrayToArray(st.useFactory),ln=Q.maybeArrayToArray(st.contrib),bt=st.lifecycle||re.Lifecycle.transient,A={token:At,useClass:vt,lifecycle:ln.length>0?re.Lifecycle.singleton:bt,contrib:ln,useDynamic:_t,useFactory:Kt};return"useValue"in st&&(A.useValue=st.useValue),A}var ze=function(){function st(At,vt,_t){q(this,st),this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.context=void 0,this.mutiple=void 0,this.context=At,this.token=vt,this.option=_t,this.rawToken=Q.isNamedToken(vt)?vt.token:vt,this.named=Q.isNamedToken(vt)?vt.named:void 0,this.mutiple=!!this.named||Q.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return Z(st,[{key:"resolve",value:function(){var vt=this,_t=this.context;!Je(_t)||(this.mutiple?this.resolveMutilple(_t):(this.resolveMono(_t),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach(function(Kt){Q.isMultipleEnabled(Kt)?j(Kt,_t).toService(vt.generalToken):ke(Kt,_t).toService(vt.generalToken)})))}},{key:"resolveMono",value:function(vt){var _t=this;if("useValue"in this.option)return ke(this.generalToken,vt).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var Kt=this.option.useDynamic[this.option.useDynamic.length-1];return Te(ke(this.generalToken,vt).toDynamicValue(function(){return Kt({container:_t.context})}),this.option)}if(this.option.useFactory.length>0){var ln=this.option.useFactory[this.option.useFactory.length-1];return ke(this.generalToken,vt).toFactory(function(){return ln({container:_t.context})})}if(this.option.useClass.length>0){var bt=this.option.useClass[this.option.useClass.length-1];return Te(ke(this.generalToken,vt).to(bt),this.option)}}},{key:"resolveMutilple",value:function(vt){var _t=this,Kt=this.option.useClass.map(function(Jn){return Te(j(_t.generalToken,vt).to(Jn),_t.option)}),ln=this.option.useDynamic.map(function(Jn){return Te(j(_t.generalToken,vt).toDynamicValue(function(){return Jn({container:_t.context})}),_t.option)}),bt=this.option.useFactory.map(function(Jn){return j(_t.generalToken,vt).toFactory(function(){return Jn({container:_t.context})})}),A="useValue"in this.option?j(this.generalToken,vt).toConstantValue(this.option.useValue):void 0;this.named&&(Kt.forEach(function(Jn){return _t.named&&be(Jn,_t.named)}),ln.forEach(function(Jn){return _t.named&&be(Jn,_t.named)}),bt.forEach(function(Jn){return _t.named&&be(Jn,_t.named)}),A&&be(A,this.named))}}],[{key:"resolveTarget",value:function(vt,_t){var Kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{try{var ln=Reflect.getMetadata(Jt,_t);ln&&st.resolveOption(vt,ln)}catch(Mn){}if(Q.isClass(_t))if(!Kt.useClass)Kt.useClass=[_t];else{var bt=Q.maybeArrayToArray(Kt.useClass);bt.unshift(_t),Kt.useClass=bt}var A;try{A=Reflect.getMetadata(re.ClassOptionSymbol,_t)}catch(Mn){}if(A=z(z({},A||{}),Kt),!A.token)A.token=[_t];else{var Jn=Q.maybeArrayToArray(A.token);Jn.unshift(_t),A.token=Jn}st.resolveOption(vt,A)}catch(Mn){}}},{key:"resolveOption",value:function(vt,_t){var Kt=$t(z(z({},st.globalConfig),_t));Kt.useClass.length===0&&Kt.useDynamic.length===0&&Kt.useFactory.length===0&&!("useValue"in Kt)||Kt.token.forEach(function(ln){var bt=new st(vt,ln,z({},Kt));bt.resolve()})}}]),st}();ze.globalConfig=re.DefaultOption;var ue=function(){function st(At){q(this,st),this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,At?this.container=At:this.container=new _.Container}return Z(st,[{key:"load",value:function(vt,_t){(_t||!this.loadedModules.includes(vt.id))&&(vt.registry(this.register.bind(this),this.resolveContext()),this.loadedModules.push(vt.id))}},{key:"remove",value:function(vt){return this.container.unbind(Ae(vt))}},{key:"get",value:function(vt){return this.container.get(Ae(vt))}},{key:"getNamed",value:function(vt,_t){return this.container.getNamed(Ae(vt),Pe(_t))}},{key:"getAll",value:function(vt){return this.container.getAll(Ae(vt))}},{key:"getAllNamed",value:function(vt,_t){return this.container.getAllNamed(Ae(vt),Pe(_t))}},{key:"isBound",value:function(vt){return this.container.isBound(Ae(vt))}},{key:"isBoundNamed",value:function(vt,_t){return this.container.isBoundNamed(Ae(vt),Pe(_t))}},{key:"createChild",value:function(){var vt=this.container.createChild(),_t=new st(vt);return _t.parent=this,_t}},{key:"register",value:function(vt){var _t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Q.isInjectOption(vt)?ze.resolveOption(this,vt):ze.resolveTarget(this,vt,_t)}},{key:"resolveContext",value:function(){return{container:this}}}],[{key:"config",value:function(vt){ze.globalConfig=vt}}]),st}(),an=new ue(ot),nn=an.register.bind(an),Qn=re.defineToken("ContributionProvider"),Pt=function(){function st(At,vt,_t){q(this,st),this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=vt,this.serviceIdentifier=At,_t&&(this.option=z(z({},this.option),_t))}return Z(st,[{key:"setServices",value:function(vt){for(var _t=[],Kt=this.container;Kt;){if(Kt.isBound(this.serviceIdentifier)){var ln=Kt.getAll(this.serviceIdentifier);_t.push.apply(_t,ne(ln))}Kt=vt?Kt.parent:void 0}return _t}},{key:"getContributions",value:function(){var vt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_t=z(z({},this.option),vt),Kt=_t.cache,ln=_t.recursive;return(!Kt||this.services===void 0)&&(this.services=this.setServices(!!ln)),this.services}}]),st}();function Tn(st,At){return{token:{token:Qn,named:st},useDynamic:function(_t){return new Pt(st,_t.container,At)},lifecycle:re.Lifecycle.singleton}}function rr(st,At,vt){st({token:{token:Qn,named:At},useDynamic:function(Kt){return new Pt(At,Kt.container,vt)},lifecycle:re.Lifecycle.singleton})}var Qt=function(){function st(At){q(this,st),this.id=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,st.moduleId+=1,this.id=st.moduleId,this.baseRegistry=At}return Z(st,[{key:"registry",get:function(){var vt=this;return function(_t,Kt){vt.baseRegistry&&vt.baseRegistry(_t,Kt),vt.optionCollection&&vt.optionCollection.forEach(function(ln){return _t(ln)})}}},{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var vt=this,_t=arguments.length,Kt=new Array(_t),ln=0;ln<_t;ln++)Kt[ln]=arguments[ln];return Kt.forEach(function(bt){return vt.options.push(bt)}),this}},{key:"contribution",value:function(){for(var vt=this,_t=arguments.length,Kt=new Array(_t),ln=0;ln<_t;ln++)Kt[ln]=arguments[ln];return Kt.forEach(function(bt){return vt.options.push(Tn(bt))}),this}}]),st}();Qt.moduleId=0;function sn(st){return new Qt(st)}var kn=function(At){return function(vt,_t,Kt){Ut(At)(vt,_t,Kt),lt(Qn)(vt,_t,Kt)}},Sn;(function(st){st.Provider=Qn,st.register=rr})(Sn||(Sn={}))}.call(this,v("Q2Ig"),v("IyRk"))},w4Tj:function(fe,T,v){"use strict";v.d(T,"a",function(){return _});var B=v("oZsa");function C(P,N){for(;!Object.prototype.hasOwnProperty.call(P,N)&&(P=Object(B.a)(P),P!==null););return P}function _(){return typeof Reflect!="undefined"&&Reflect.get?_=Reflect.get.bind():_=function(N,z,R){var q=C(N,z);if(!!q){var W=Object.getOwnPropertyDescriptor(q,z);return W.get?W.get.call(arguments.length<3?N:R):W.value}},_.apply(this,arguments)}},wME1:function(fe,T,v){"use strict";v.r(T),v.d(T,"red",function(){return B}),v.d(T,"pink",function(){return C}),v.d(T,"purple",function(){return _}),v.d(T,"deepPurple",function(){return P}),v.d(T,"indigo",function(){return N}),v.d(T,"blue",function(){return z}),v.d(T,"lightBlue",function(){return R}),v.d(T,"cyan",function(){return q}),v.d(T,"teal",function(){return W}),v.d(T,"green",function(){return Z}),v.d(T,"lightGreen",function(){return X}),v.d(T,"lime",function(){return ne}),v.d(T,"yellow",function(){return ie}),v.d(T,"amber",function(){return te}),v.d(T,"orange",function(){return ce}),v.d(T,"deepOrange",function(){return ee}),v.d(T,"brown",function(){return Y}),v.d(T,"grey",function(){return le}),v.d(T,"blueGrey",function(){return re}),v.d(T,"darkText",function(){return Q}),v.d(T,"lightText",function(){return ge}),v.d(T,"darkIcons",function(){return oe}),v.d(T,"lightIcons",function(){return Te}),v.d(T,"white",function(){return be}),v.d(T,"black",function(){return j});var B={"50":"#ffebee","100":"#ffcdd2","200":"#ef9a9a","300":"#e57373","400":"#ef5350","500":"#f44336","600":"#e53935","700":"#d32f2f","800":"#c62828","900":"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},C={"50":"#fce4ec","100":"#f8bbd0","200":"#f48fb1","300":"#f06292","400":"#ec407a","500":"#e91e63","600":"#d81b60","700":"#c2185b","800":"#ad1457","900":"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},_={"50":"#f3e5f5","100":"#e1bee7","200":"#ce93d8","300":"#ba68c8","400":"#ab47bc","500":"#9c27b0","600":"#8e24aa","700":"#7b1fa2","800":"#6a1b9a","900":"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},P={"50":"#ede7f6","100":"#d1c4e9","200":"#b39ddb","300":"#9575cd","400":"#7e57c2","500":"#673ab7","600":"#5e35b1","700":"#512da8","800":"#4527a0","900":"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},N={"50":"#e8eaf6","100":"#c5cae9","200":"#9fa8da","300":"#7986cb","400":"#5c6bc0","500":"#3f51b5","600":"#3949ab","700":"#303f9f","800":"#283593","900":"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},z={"50":"#e3f2fd","100":"#bbdefb","200":"#90caf9","300":"#64b5f6","400":"#42a5f5","500":"#2196f3","600":"#1e88e5","700":"#1976d2","800":"#1565c0","900":"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},R={"50":"#e1f5fe","100":"#b3e5fc","200":"#81d4fa","300":"#4fc3f7","400":"#29b6f6","500":"#03a9f4","600":"#039be5","700":"#0288d1","800":"#0277bd","900":"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},q={"50":"#e0f7fa","100":"#b2ebf2","200":"#80deea","300":"#4dd0e1","400":"#26c6da","500":"#00bcd4","600":"#00acc1","700":"#0097a7","800":"#00838f","900":"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},W={"50":"#e0f2f1","100":"#b2dfdb","200":"#80cbc4","300":"#4db6ac","400":"#26a69a","500":"#009688","600":"#00897b","700":"#00796b","800":"#00695c","900":"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},Z={"50":"#e8f5e9","100":"#c8e6c9","200":"#a5d6a7","300":"#81c784","400":"#66bb6a","500":"#4caf50","600":"#43a047","700":"#388e3c","800":"#2e7d32","900":"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},X={"50":"#f1f8e9","100":"#dcedc8","200":"#c5e1a5","300":"#aed581","400":"#9ccc65","500":"#8bc34a","600":"#7cb342","700":"#689f38","800":"#558b2f","900":"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},ne={"50":"#f9fbe7","100":"#f0f4c3","200":"#e6ee9c","300":"#dce775","400":"#d4e157","500":"#cddc39","600":"#c0ca33","700":"#afb42b","800":"#9e9d24","900":"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},ie={"50":"#fffde7","100":"#fff9c4","200":"#fff59d","300":"#fff176","400":"#ffee58","500":"#ffeb3b","600":"#fdd835","700":"#fbc02d","800":"#f9a825","900":"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},te={"50":"#fff8e1","100":"#ffecb3","200":"#ffe082","300":"#ffd54f","400":"#ffca28","500":"#ffc107","600":"#ffb300","700":"#ffa000","800":"#ff8f00","900":"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},ce={"50":"#fff3e0","100":"#ffe0b2","200":"#ffcc80","300":"#ffb74d","400":"#ffa726","500":"#ff9800","600":"#fb8c00","700":"#f57c00","800":"#ef6c00","900":"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},ee={"50":"#fbe9e7","100":"#ffccbc","200":"#ffab91","300":"#ff8a65","400":"#ff7043","500":"#ff5722","600":"#f4511e","700":"#e64a19","800":"#d84315","900":"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Y={"50":"#efebe9","100":"#d7ccc8","200":"#bcaaa4","300":"#a1887f","400":"#8d6e63","500":"#795548","600":"#6d4c41","700":"#5d4037","800":"#4e342e","900":"#3e2723"},le={"50":"#fafafa","100":"#f5f5f5","200":"#eeeeee","300":"#e0e0e0","400":"#bdbdbd","500":"#9e9e9e","600":"#757575","700":"#616161","800":"#424242","900":"#212121"},re={"50":"#eceff1","100":"#cfd8dc","200":"#b0bec5","300":"#90a4ae","400":"#78909c","500":"#607d8b","600":"#546e7a","700":"#455a64","800":"#37474f","900":"#263238"},Q={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},ge={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},oe={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},Te={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},be="#ffffff",j="#000000";T.default={red:B,pink:C,purple:_,deepPurple:P,indigo:N,blue:z,lightBlue:R,cyan:q,teal:W,green:Z,lightGreen:X,lime:ne,yellow:ie,amber:te,orange:ce,deepOrange:ee,brown:Y,grey:le,blueGrey:re,darkText:Q,lightText:ge,darkIcons:oe,lightIcons:Te,white:be,black:j}},wTVA:function(fe,T){function v(B){if(Array.isArray(B))return B}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},wkBT:function(fe,T){function v(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},wkyg:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.HuePicker=void 0;var B=Object.assign||function(ce){for(var ee=1;ee<arguments.length;ee++){var Y=arguments[ee];for(var le in Y)Object.prototype.hasOwnProperty.call(Y,le)&&(ce[le]=Y[le])}return ce},C=v("q1tI"),_=ie(C),P=v("17x9"),N=ie(P),z=v("/FUP"),R=ie(z),q=v("QkVN"),W=ie(q),Z=v("TM95"),X=v("trA2"),ne=ie(X);function ie(ce){return ce&&ce.__esModule?ce:{default:ce}}var te=T.HuePicker=function(ee){var Y=ee.width,le=ee.height,re=ee.onChange,Q=ee.hsl,ge=ee.direction,oe=ee.pointer,Te=ee.styles,be=Te===void 0?{}:Te,j=ee.className,ke=j===void 0?"":j,Je=(0,R.default)((0,W.default)({default:{picker:{position:"relative",width:Y,height:le},hue:{radius:"2px"}}},be)),Pe=function(ot){return re({a:1,h:ot.h,l:.5,s:1})};return _.default.createElement("div",{style:Je.picker,className:"hue-picker "+ke},_.default.createElement(Z.Hue,B({},Je.hue,{hsl:Q,pointer:oe,onChange:Pe,direction:ge})))};te.propTypes={styles:N.default.object},te.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:ne.default,styles:{}},T.default=(0,Z.ColorWrap)(te)},wnjb:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.MetadataReader=void 0;var B=v("xfSm"),C=function(){function _(){}return _.prototype.getConstructorMetadata=function(P){var N=Reflect.getMetadata(B.PARAM_TYPES,P),z=Reflect.getMetadata(B.TAGGED,P);return{compilerGeneratedMetadata:N,userGeneratedMetadata:z||{}}},_.prototype.getPropertiesMetadata=function(P){var N=Reflect.getMetadata(B.TAGGED_PROP,P)||[];return N},_}();T.MetadataReader=C},xDUe:function(fe,T){fe.exports=v;function v(B,C,_,P){var N=C[0],z=C[1];return B[0]=N+P*(_[0]-N),B[1]=z+P*(_[1]-z),B}},xbjo:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.CircleSwatch=void 0;var B=v("q1tI"),C=z(B),_=v("/FUP"),P=z(_),N=v("TM95");function z(q){return q&&q.__esModule?q:{default:q}}var R=T.CircleSwatch=function(W){var Z=W.color,X=W.onClick,ne=W.onSwatchHover,ie=W.hover,te=W.active,ce=W.circleSize,ee=W.circleSpacing,Y=(0,P.default)({default:{swatch:{width:ce,height:ce,marginRight:ee,marginBottom:ee,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+ce/2+"px "+Z,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+Z}}},{hover:ie,active:te});return C.default.createElement("div",{style:Y.swatch},C.default.createElement(N.Swatch,{style:Y.Swatch,color:Z,onClick:X,onHover:ne,focusStyle:{boxShadow:Y.Swatch.boxShadow+", 0 0 5px "+Z}}))};R.defaultProps={circleSize:28,circleSpacing:14},T.default=(0,_.handleHover)(R)},xdlL:function(fe,T,v){"use strict";v.d(T,"a",function(){return _});var B=v("iZzK"),C=v("cHpt");function _(P,N,z){return Object(C.a)()?_=Reflect.construct.bind():_=function(q,W,Z){var X=[null];X.push.apply(X,W);var ne=Function.bind.apply(q,X),ie=new ne;return Z&&Object(B.a)(ie,Z.prototype),ie},_.apply(null,arguments)}},xfSm:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.NON_CUSTOM_TAG_KEYS=T.POST_CONSTRUCT=T.DESIGN_PARAM_TYPES=T.PARAM_TYPES=T.TAGGED_PROP=T.TAGGED=T.MULTI_INJECT_TAG=T.INJECT_TAG=T.OPTIONAL_TAG=T.UNMANAGED_TAG=T.NAME_TAG=T.NAMED_TAG=void 0,T.NAMED_TAG="named",T.NAME_TAG="name",T.UNMANAGED_TAG="unmanaged",T.OPTIONAL_TAG="optional",T.INJECT_TAG="inject",T.MULTI_INJECT_TAG="multi_inject",T.TAGGED="inversify:tagged",T.TAGGED_PROP="inversify:tagged_props",T.PARAM_TYPES="inversify:paramtypes",T.DESIGN_PARAM_TYPES="design:paramtypes",T.POST_CONSTRUCT="post_construct";function B(){return[T.INJECT_TAG,T.MULTI_INJECT_TAG,T.NAME_TAG,T.UNMANAGED_TAG,T.NAMED_TAG,T.OPTIONAL_TAG]}T.NON_CUSTOM_TAG_KEYS=B()},xiII:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Request=void 0;var B=v("d9O0"),C=function(){function _(P,N,z,R,q){this.id=B.id(),this.serviceIdentifier=P,this.parentContext=N,this.parentRequest=z,this.target=q,this.childRequests=[],this.bindings=Array.isArray(R)?R:[R],this.requestScope=z===null?new Map:null}return _.prototype.addChildRequest=function(P,N,z){var R=new _(P,this.parentContext,this,N,z);return this.childRequests.push(R),R},_}();T.Request=C},xutz:function(fe,T,v){"use strict";(function(B){var C=v("XqMk"),_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,P=_&&typeof B=="object"&&B&&!B.nodeType&&B,N=P&&P.exports===_,z=N&&C.a.process,R=function(){try{var q=P&&P.require&&P.require("util").types;return q||z&&z.binding&&z.binding("util")}catch(W){}}();T.a=R}).call(this,v("Vg/k")(fe))},yAXI:function(fe,T,v){"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B=typeof Symbol=="function"&&Symbol.for,C=B?Symbol.for("react.element"):60103,_=B?Symbol.for("react.portal"):60106,P=B?Symbol.for("react.fragment"):60107,N=B?Symbol.for("react.strict_mode"):60108,z=B?Symbol.for("react.profiler"):60114,R=B?Symbol.for("react.provider"):60109,q=B?Symbol.for("react.context"):60110,W=B?Symbol.for("react.async_mode"):60111,Z=B?Symbol.for("react.concurrent_mode"):60111,X=B?Symbol.for("react.forward_ref"):60112,ne=B?Symbol.for("react.suspense"):60113,ie=B?Symbol.for("react.suspense_list"):60120,te=B?Symbol.for("react.memo"):60115,ce=B?Symbol.for("react.lazy"):60116,ee=B?Symbol.for("react.block"):60121,Y=B?Symbol.for("react.fundamental"):60117,le=B?Symbol.for("react.responder"):60118,re=B?Symbol.for("react.scope"):60119;function Q(oe){if(typeof oe=="object"&&oe!==null){var Te=oe.$$typeof;switch(Te){case C:switch(oe=oe.type,oe){case W:case Z:case P:case z:case N:case ne:return oe;default:switch(oe=oe&&oe.$$typeof,oe){case q:case X:case ce:case te:case R:return oe;default:return Te}}case _:return Te}}}function ge(oe){return Q(oe)===Z}T.AsyncMode=W,T.ConcurrentMode=Z,T.ContextConsumer=q,T.ContextProvider=R,T.Element=C,T.ForwardRef=X,T.Fragment=P,T.Lazy=ce,T.Memo=te,T.Portal=_,T.Profiler=z,T.StrictMode=N,T.Suspense=ne,T.isAsyncMode=function(oe){return ge(oe)||Q(oe)===W},T.isConcurrentMode=ge,T.isContextConsumer=function(oe){return Q(oe)===q},T.isContextProvider=function(oe){return Q(oe)===R},T.isElement=function(oe){return typeof oe=="object"&&oe!==null&&oe.$$typeof===C},T.isForwardRef=function(oe){return Q(oe)===X},T.isFragment=function(oe){return Q(oe)===P},T.isLazy=function(oe){return Q(oe)===ce},T.isMemo=function(oe){return Q(oe)===te},T.isPortal=function(oe){return Q(oe)===_},T.isProfiler=function(oe){return Q(oe)===z},T.isStrictMode=function(oe){return Q(oe)===N},T.isSuspense=function(oe){return Q(oe)===ne},T.isValidElementType=function(oe){return typeof oe=="string"||typeof oe=="function"||oe===P||oe===Z||oe===z||oe===N||oe===ne||oe===ie||typeof oe=="object"&&oe!==null&&(oe.$$typeof===ce||oe.$$typeof===te||oe.$$typeof===R||oe.$$typeof===q||oe.$$typeof===X||oe.$$typeof===Y||oe.$$typeof===le||oe.$$typeof===re||oe.$$typeof===ee)},T.typeOf=Q},yEj1:function(fe,T){fe.exports=v;function v(B){var C=B[0],_=B[1];return Math.sqrt(C*C+_*_)}},yG8O:function(fe,T){function v(B,C,_,P){!_||Object.defineProperty(B,C,{enumerable:_.enumerable,configurable:_.configurable,writable:_.writable,value:_.initializer?_.initializer.call(P):void 0})}fe.exports=v,fe.exports.__esModule=!0,fe.exports.default=fe.exports},yMAV:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Plan=void 0;var B=function(){function C(_,P){this.parentContext=_,this.rootRequest=P}return C}();T.Plan=B},yOY4:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.Alpha=void 0;var B=Object.assign||function(Y){for(var le=1;le<arguments.length;le++){var re=arguments[le];for(var Q in re)Object.prototype.hasOwnProperty.call(re,Q)&&(Y[Q]=re[Q])}return Y},C=function(){function Y(le,re){for(var Q=0;Q<re.length;Q++){var ge=re[Q];ge.enumerable=ge.enumerable||!1,ge.configurable=!0,"value"in ge&&(ge.writable=!0),Object.defineProperty(le,ge.key,ge)}}return function(le,re,Q){return re&&Y(le.prototype,re),Q&&Y(le,Q),le}}(),_=v("q1tI"),P=ne(_),N=v("/FUP"),z=ne(N),R=v("THLb"),q=X(R),W=v("Nq3d"),Z=ne(W);function X(Y){if(Y&&Y.__esModule)return Y;var le={};if(Y!=null)for(var re in Y)Object.prototype.hasOwnProperty.call(Y,re)&&(le[re]=Y[re]);return le.default=Y,le}function ne(Y){return Y&&Y.__esModule?Y:{default:Y}}function ie(Y,le){if(!(Y instanceof le))throw new TypeError("Cannot call a class as a function")}function te(Y,le){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return le&&(typeof le=="object"||typeof le=="function")?le:Y}function ce(Y,le){if(typeof le!="function"&&le!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof le);Y.prototype=Object.create(le&&le.prototype,{constructor:{value:Y,enumerable:!1,writable:!0,configurable:!0}}),le&&(Object.setPrototypeOf?Object.setPrototypeOf(Y,le):Y.__proto__=le)}var ee=T.Alpha=function(Y){ce(le,Y);function le(){var re,Q,ge,oe;ie(this,le);for(var Te=arguments.length,be=Array(Te),j=0;j<Te;j++)be[j]=arguments[j];return oe=(Q=(ge=te(this,(re=le.__proto__||Object.getPrototypeOf(le)).call.apply(re,[this].concat(be))),ge),ge.handleChange=function(ke){var Je=q.calculateChange(ke,ge.props.hsl,ge.props.direction,ge.props.a,ge.container);Je&&typeof ge.props.onChange=="function"&&ge.props.onChange(Je,ke)},ge.handleMouseDown=function(ke){ge.handleChange(ke),window.addEventListener("mousemove",ge.handleChange),window.addEventListener("mouseup",ge.handleMouseUp)},ge.handleMouseUp=function(){ge.unbindEventListeners()},ge.unbindEventListeners=function(){window.removeEventListener("mousemove",ge.handleChange),window.removeEventListener("mouseup",ge.handleMouseUp)},Q),te(ge,oe)}return C(le,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var Q=this,ge=this.props.rgb,oe=(0,z.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+ge.r+","+ge.g+","+ge.b+`, 0) 0%,
           rgba(`+ge.r+","+ge.g+","+ge.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:ge.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+ge.r+","+ge.g+","+ge.b+`, 0) 0%,
           rgba(`+ge.r+","+ge.g+","+ge.b+", 1) 100%)"},pointer:{left:0,top:ge.a*100+"%"}},overwrite:B({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return P.default.createElement("div",{style:oe.alpha},P.default.createElement("div",{style:oe.checkboard},P.default.createElement(Z.default,{renderers:this.props.renderers})),P.default.createElement("div",{style:oe.gradient}),P.default.createElement("div",{style:oe.container,ref:function(be){return Q.container=be},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},P.default.createElement("div",{style:oe.pointer},this.props.pointer?P.default.createElement(this.props.pointer,this.props):P.default.createElement("div",{style:oe.slider}))))}}]),le}(_.PureComponent||_.Component);T.default=ee},yXPU:function(fe,T){function v(C,_,P,N,z,R,q){try{var W=C[R](q),Z=W.value}catch(X){P(X);return}W.done?_(Z):Promise.resolve(Z).then(N,z)}function B(C){return function(){var _=this,P=arguments;return new Promise(function(N,z){var R=C.apply(_,P);function q(Z){v(R,N,z,q,W,"next",Z)}function W(Z){v(R,N,z,q,W,"throw",Z)}q(void 0)})}}fe.exports=B,fe.exports.__esModule=!0,fe.exports.default=fe.exports},yZ5d:function(fe,T,v){"use strict";v.d(T,"a",function(){return Te});var B=v("lSNA"),C=v.n(B),_=v("lwsE"),P=v.n(_),N=v("W8MJ"),z=v.n(N),R=v("4cb6");function q(be){var j=0;switch(be){case"vec2":case"ivec2":j=2;break;case"vec3":case"ivec3":j=3;break;case"vec4":case"ivec4":case"mat2":j=4;break;case"mat3":j=9;break;case"mat4":j=16;break;default:}return j}var W=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function Z(be){var j={};return be=be.replace(W,function(ke,Je,Pe){var Ae=Pe.split(":"),ot=Ae[0].trim(),k="";switch(Ae.length>1&&(k=Ae[1].trim()),Je){case"bool":k=k==="true";break;case"float":case"int":k=Number(k);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":k?k=k.replace("[","").replace("]","").split(",").reduce(function(Xe,Ot){return Xe.push(Number(Ot.trim())),Xe},[]):k=new Array(q(Je)).fill(0);break;default:}return j[ot]=k,"uniform ".concat(Je," ").concat(ot,`;
`)}),{content:be,uniforms:j}}function X(be){return be.filter(function(j,ke,Je){return Je.indexOf(j)===ke})}var ne,ie,te;function ce(be,j){var ke=Object.keys(be);if(Object.getOwnPropertySymbols){var Je=Object.getOwnPropertySymbols(be);j&&(Je=Je.filter(function(Pe){return Object.getOwnPropertyDescriptor(be,Pe).enumerable})),ke.push.apply(ke,Je)}return ke}function ee(be){for(var j=1;j<arguments.length;j++){var ke=arguments[j]!=null?arguments[j]:{};j%2?ce(Object(ke),!0).forEach(function(Je){C()(be,Je,ke[Je])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(ke)):ce(Object(ke)).forEach(function(Je){Object.defineProperty(be,Je,Object.getOwnPropertyDescriptor(ke,Je))})}return be}var Y=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,le=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,re=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,Q=/precision\s+(high|low|medium)p\s+float/,ge=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,oe=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Te=(ne=Object(R.injectable)(),ne(ie=(te=function(){function be(){P()(this,be),this.moduleCache={},this.rawContentCache={}}return z()(be,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:le,fs:Y}),this.registerModule("sdf2d",{vs:"",fs:re})}},{key:"registerModule",value:function(ke,Je){if(!this.rawContentCache[ke]){var Pe=Je.vs,Ae=Pe===void 0?"":Pe,ot=Je.fs,k=ot===void 0?"":ot,Xe=Je.uniforms,Ot=Z(Ae),lt=Ot.content,Ut=Ot.uniforms,Jt=Z(k),nt=Jt.content,$t=Jt.uniforms;this.rawContentCache[ke]={fs:nt,uniforms:ee(ee(ee({},Ut),$t),Xe),vs:lt}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(ke){var Je=this;if(this.moduleCache[ke])return this.moduleCache[ke];var Pe=this.rawContentCache[ke].vs||"",Ae=this.rawContentCache[ke].fs||"",ot=this.processModule(Pe,[],"vs"),k=ot.content,Xe=ot.includeList,Ot=this.processModule(Ae,[],"fs"),lt=Ot.content,Ut=Ot.includeList,Jt=lt,nt=X(Xe.concat(Ut).concat(ke)).reduce(function($t,ze){return ee(ee({},$t),Je.rawContentCache[ze].uniforms)},{});return Q.test(lt)||(Jt=ge+lt),this.moduleCache[ke]={fs:Jt.trim(),uniforms:nt,vs:k.trim()},this.moduleCache[ke]}},{key:"processModule",value:function(ke,Je,Pe){var Ae=this,ot=ke.replace(oe,function(k,Xe){var Ot=Xe.split(" "),lt=Ot[0].replace(/"/g,"");if(Je.indexOf(lt)>-1)return"";var Ut=Ae.rawContentCache[lt][Pe];Je.push(lt);var Jt=Ae.processModule(Ut||"",Je,Pe),nt=Jt.content;return nt});return{content:ot,includeList:Je}}}]),be}(),te))||ie)},yaXH:function(fe,T){},z4Hk:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.BindingWhenSyntax=void 0;var B=v("406g"),C=v("RR/i"),_=function(){function P(N){this._binding=N}return P.prototype.when=function(N){return this._binding.constraint=N,new B.BindingOnSyntax(this._binding)},P.prototype.whenTargetNamed=function(N){return this._binding.constraint=C.namedConstraint(N),new B.BindingOnSyntax(this._binding)},P.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(N){var z=N.target!==null&&!N.target.isNamed()&&!N.target.isTagged();return z},new B.BindingOnSyntax(this._binding)},P.prototype.whenTargetTagged=function(N,z){return this._binding.constraint=C.taggedConstraint(N)(z),new B.BindingOnSyntax(this._binding)},P.prototype.whenInjectedInto=function(N){return this._binding.constraint=function(z){return C.typeConstraint(N)(z.parentRequest)},new B.BindingOnSyntax(this._binding)},P.prototype.whenParentNamed=function(N){return this._binding.constraint=function(z){return C.namedConstraint(N)(z.parentRequest)},new B.BindingOnSyntax(this._binding)},P.prototype.whenParentTagged=function(N,z){return this._binding.constraint=function(R){return C.taggedConstraint(N)(z)(R.parentRequest)},new B.BindingOnSyntax(this._binding)},P.prototype.whenAnyAncestorIs=function(N){return this._binding.constraint=function(z){return C.traverseAncerstors(z,C.typeConstraint(N))},new B.BindingOnSyntax(this._binding)},P.prototype.whenNoAncestorIs=function(N){return this._binding.constraint=function(z){return!C.traverseAncerstors(z,C.typeConstraint(N))},new B.BindingOnSyntax(this._binding)},P.prototype.whenAnyAncestorNamed=function(N){return this._binding.constraint=function(z){return C.traverseAncerstors(z,C.namedConstraint(N))},new B.BindingOnSyntax(this._binding)},P.prototype.whenNoAncestorNamed=function(N){return this._binding.constraint=function(z){return!C.traverseAncerstors(z,C.namedConstraint(N))},new B.BindingOnSyntax(this._binding)},P.prototype.whenAnyAncestorTagged=function(N,z){return this._binding.constraint=function(R){return C.traverseAncerstors(R,C.taggedConstraint(N)(z))},new B.BindingOnSyntax(this._binding)},P.prototype.whenNoAncestorTagged=function(N,z){return this._binding.constraint=function(R){return!C.traverseAncerstors(R,C.taggedConstraint(N)(z))},new B.BindingOnSyntax(this._binding)},P.prototype.whenAnyAncestorMatches=function(N){return this._binding.constraint=function(z){return C.traverseAncerstors(z,N)},new B.BindingOnSyntax(this._binding)},P.prototype.whenNoAncestorMatches=function(N){return this._binding.constraint=function(z){return!C.traverseAncerstors(z,N)},new B.BindingOnSyntax(this._binding)},P}();T.BindingWhenSyntax=_},z5Mu:function(fe,T,v){"use strict";v.d(T,"a",function(){return an});var B=v("J4zp"),C=v.n(B),_=v("o0o1"),P=v.n(_),N=v("yXPU"),z=v.n(N),R=v("yG8O"),q=v.n(R),W=v("lwsE"),Z=v.n(W),X=v("W8MJ"),ne=v.n(X),ie=v("U+yc"),te=v.n(ie),ce=v("1ABj"),ee=v("4cb6"),Y=v("+uE7"),le=function nn(){Z()(this,nn),this.index=void 0},re=function nn(){Z()(this,nn),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},Q=function(){function nn(){Z()(this,nn),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return ne()(nn,[{key:"read",value:function(Pt){return this.reads.find(function(Tn){return Tn.index===Pt.index})||this.reads.push(Pt),Pt}},{key:"sample",value:function(Pt){return this.read(Pt),Pt}},{key:"write",value:function(Pt,Tn){var rr=this.writes.find(function(Sn){return Sn.index===Tn.index});if(rr)return Tn;var Qt=Pt.getResourceNode(Tn);Qt.resource.version++,Qt.resource.imported&&(this.hasSideEffect=!0);var sn=Pt.createResourceNode(Qt.resource),kn=Pt.getResourceNode(sn);return kn.writer=this,this.writes.push(sn),sn}}]),nn}(),ge=v("7W2i"),oe=v.n(ge),Te=v("a1gu"),be=v.n(Te),j=v("Nsbk"),ke=v.n(j),Je=function nn(){Z()(this,nn),this.first=void 0,this.last=void 0};function Pe(nn){var Qn=Ae();return function(){var Tn=ke()(nn),rr;if(Qn){var Qt=ke()(this).constructor;rr=Reflect.construct(Tn,arguments,Qt)}else rr=Tn.apply(this,arguments);return be()(this,rr)}}function Ae(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(nn){return!1}}var ot=function(nn){oe()(Pt,nn);var Qn=Pe(Pt);function Pt(){var Tn;Z()(this,Pt);for(var rr=arguments.length,Qt=new Array(rr),sn=0;sn<rr;sn++)Qt[sn]=arguments[sn];return Tn=Qn.call.apply(Qn,[this].concat(Qt)),Tn.version=0,Tn.refs=0,Tn.name=void 0,Tn.imported=void 0,Tn.priority=void 0,Tn.discardStart=!0,Tn.discardEnd=!1,Tn.descriptor=void 0,Tn.resource=void 0,Tn}return ne()(Pt,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){!this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){!this.imported}}]),Pt}(Je),k=function nn(){Z()(this,nn),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},Xe,Ot,lt,Ut,Jt,nt;function $t(nn,Qn){var Pt;if(typeof Symbol=="undefined"||nn[Symbol.iterator]==null){if(Array.isArray(nn)||(Pt=ze(nn))||Qn&&nn&&typeof nn.length=="number"){Pt&&(nn=Pt);var Tn=0,rr=function(){};return{s:rr,n:function(){return Tn>=nn.length?{done:!0}:{done:!1,value:nn[Tn++]}},e:function(st){throw st},f:rr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Qt=!0,sn=!1,kn;return{s:function(){Pt=nn[Symbol.iterator]()},n:function(){var st=Pt.next();return Qt=st.done,st},e:function(st){sn=!0,kn=st},f:function(){try{!Qt&&Pt.return!=null&&Pt.return()}finally{if(sn)throw kn}}}}function ze(nn,Qn){if(!!nn){if(typeof nn=="string")return ue(nn,Qn);var Pt=Object.prototype.toString.call(nn).slice(8,-1);if(Pt==="Object"&&nn.constructor&&(Pt=nn.constructor.name),Pt==="Map"||Pt==="Set")return Array.from(nn);if(Pt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Pt))return ue(nn,Qn)}}function ue(nn,Qn){(Qn==null||Qn>nn.length)&&(Qn=nn.length);for(var Pt=0,Tn=new Array(Qn);Pt<Qn;Pt++)Tn[Pt]=nn[Pt];return Tn}var an=(Xe=Object(ee.injectable)(),Ot=Object(ee.inject)(Y.a.RenderEngine),Xe(lt=(Ut=(nt=function(){function nn(){Z()(this,nn),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],q()(this,"engine",Jt,this)}return ne()(nn,[{key:"execute",value:function(){var Qn=z()(P.a.mark(function Tn(rr){return P.a.wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return this.compile(),sn.next=3,this.executePassNodes(rr);case 3:case"end":return sn.stop()}},Tn,this)}));function Pt(Tn){return Qn.apply(this,arguments)}return Pt}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(Pt){Pt.tearDown&&Pt.tearDown()}),this.reset()}},{key:"addPass",value:function(Pt,Tn,rr,Qt){var sn=new re;sn.execute=rr,Qt&&(sn.tearDown=Qt),sn.name=Pt;var kn=new Q;return kn.name=Pt,this.passNodes.push(kn),this.frameGraphPasses.push(sn),Tn(this,kn,sn),sn}},{key:"getPass",value:function(Pt){return this.frameGraphPasses.find(function(Tn){return Tn.name===Pt})}},{key:"compile",value:function(){var Pt=this,Tn=$t(this.passNodes),rr;try{for(Tn.s();!(rr=Tn.n()).done;){var Qt=rr.value;Qt.refCount=Qt.writes.length+(Qt.hasSideEffect?1:0),Qt.reads.forEach(function(Ki){Pt.resourceNodes[Ki.index].readerCount++})}}catch(Ki){Tn.e(Ki)}finally{Tn.f()}var sn=[],kn=$t(this.resourceNodes),Sn;try{for(kn.s();!(Sn=kn.n()).done;){var st=Sn.value;st.readerCount===0&&sn.push(st)}}catch(Ki){kn.e(Ki)}finally{kn.f()}for(;sn.length;){var At=sn.pop(),vt=At&&At.writer;if(vt&&--vt.refCount==0){var _t=$t(vt.reads),Kt;try{for(_t.s();!(Kt=_t.n()).done;){var ln=Kt.value,bt=this.resourceNodes[ln.index];--bt.readerCount==0&&sn.push(bt)}}catch(Ki){_t.e(Ki)}finally{_t.f()}}}this.resourceNodes.forEach(function(Ki){Ki.resource.refs+=Ki.readerCount});var A=$t(this.passNodes),Jn;try{for(A.s();!(Jn=A.n()).done;){var Mn=Jn.value;if(!!Mn.refCount){var sr=$t(Mn.reads),ir;try{for(sr.s();!(ir=sr.n()).done;){var Ie=ir.value,pe=this.resourceNodes[Ie.index].resource;pe.first=pe.first?pe.first:Mn,pe.last=Mn}}catch(Ki){sr.e(Ki)}finally{sr.f()}var Qe=$t(Mn.writes),cn;try{for(Qe.s();!(cn=Qe.n()).done;){var En=cn.value,lr=this.resourceNodes[En.index].resource;lr.first=lr.first?lr.first:Mn,lr.last=Mn}}catch(Ki){Qe.e(Ki)}finally{Qe.f()}}}}catch(Ki){A.e(Ki)}finally{A.f()}for(var gi=0;gi<2;gi++){var cr=$t(this.resourceNodes),wr;try{for(cr.s();!(wr=cr.n()).done;){var pr=wr.value,Sr=pr.resource;if(Sr.priority===gi&&Sr.refs){var Qr=Sr.first,ya=Sr.last;Qr&&ya&&(Qr.devirtualize.push(Sr),ya.destroy.push(Sr))}}}catch(Ki){cr.e(Ki)}finally{cr.f()}}}},{key:"executePassNodes",value:function(){var Qn=z()(P.a.mark(function Tn(rr){var Qt,sn,kn,Sn,st,At,vt,_t,Kt,ln,bt,A,Jn,Mn,sr,ir,Ie;return P.a.wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:Qt=$t(this.passNodes.entries()),Qe.prev=1,Qt.s();case 3:if((sn=Qt.n()).done){Qe.next=18;break}if(kn=C()(sn.value,2),Sn=kn[0],st=kn[1],!st.refCount){Qe.next=16;break}At=$t(st.devirtualize);try{for(At.s();!(vt=At.n()).done;)_t=vt.value,_t.preExecuteDevirtualize(this.engine)}catch(cn){At.e(cn)}finally{At.f()}Kt=$t(st.destroy);try{for(Kt.s();!(ln=Kt.n()).done;)bt=ln.value,bt.preExecuteDestroy(this.engine)}catch(cn){Kt.e(cn)}finally{Kt.f()}return Qe.next=12,this.frameGraphPasses[Sn].execute(this,this.frameGraphPasses[Sn],rr);case 12:A=$t(st.devirtualize);try{for(A.s();!(Jn=A.n()).done;)Mn=Jn.value,Mn.postExecuteDevirtualize(this.engine)}catch(cn){A.e(cn)}finally{A.f()}sr=$t(st.destroy);try{for(sr.s();!(ir=sr.n()).done;)Ie=ir.value,Ie.postExecuteDestroy(this.engine)}catch(cn){sr.e(cn)}finally{sr.f()}case 16:Qe.next=3;break;case 18:Qe.next=23;break;case 20:Qe.prev=20,Qe.t0=Qe.catch(1),Qt.e(Qe.t0);case 23:return Qe.prev=23,Qt.f(),Qe.finish(23);case 26:this.reset();case 27:case"end":return Qe.stop()}},Tn,this,[[1,20,23,26]])}));function Pt(Tn){return Qn.apply(this,arguments)}return Pt}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(Pt){return this.resourceNodes[Pt.index]}},{key:"createResourceNode",value:function(Pt){var Tn=new k;Tn.resource=Pt,Tn.version=Pt.version,this.resourceNodes.push(Tn);var rr=new le;return rr.index=this.resourceNodes.length-1,rr}},{key:"createTexture",value:function(Pt,Tn,rr){var Qt=new ot;return Qt.name=Tn,Qt.descriptor=rr,this.createResourceNode(Qt)}},{key:"createRenderTarget",value:function(Pt,Tn,rr){var Qt=new ot;return Qt.name=Tn,Qt.descriptor=rr,this.createResourceNode(Qt)}},{key:"present",value:function(Pt){this.addPass("Present",function(Tn,rr){rr.read(Pt),rr.hasSideEffect=!0},z()(P.a.mark(function Tn(){return P.a.wrap(function(Qt){for(;;)switch(Qt.prev=Qt.next){case 0:case"end":return Qt.stop()}},Tn)})))}}]),nn}(),nt),Jt=te()(Ut.prototype,"engine",[Ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ut))||lt)},zLyj:function(fe,T){fe.exports=v;function v(B,C){return B[0]=Math.ceil(C[0]),B[1]=Math.ceil(C[1]),B}},zs7G:function(fe,T,v){"use strict";var B=v("VTBJ"),C=v("q1tI"),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},P=_,N=v("6VBw"),z=function(W,Z){return C.createElement(N.a,Object(B.a)(Object(B.a)({},W),{},{ref:Z,icon:P}))};z.displayName="DoubleRightOutlined";var R=T.a=C.forwardRef(z)},zxMA:function(fe,T,v){"use strict";Object.defineProperty(T,"__esModule",{value:!0}),T.QueryableString=void 0;var B=function(){function C(_){this.str=_}return C.prototype.startsWith=function(_){return this.str.indexOf(_)===0},C.prototype.endsWith=function(_){var P="",N=_.split("").reverse().join("");return P=this.str.split("").reverse().join(""),this.startsWith.call({str:P},N)},C.prototype.contains=function(_){return this.str.indexOf(_)!==-1},C.prototype.equals=function(_){return this.str===_},C.prototype.value=function(){return this.str},C}();T.QueryableString=B}}]);
