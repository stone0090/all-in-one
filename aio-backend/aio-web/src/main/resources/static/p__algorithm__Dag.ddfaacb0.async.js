(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"+A2u":function(ge,R){ge.exports=h;function h(B,p,S){return B[0]=Math.max(p[0],S[0]),B[1]=Math.max(p[1],S[1]),B}},"+RHd":function(ge,R){},"+n+1":function(ge,R){ge.exports=h;function h(B,p,S,E){return B[0]=p[0]+S[0]*E,B[1]=p[1]+S[1]*E,B}},"+sJh":function(ge,R){ge.exports=h;function h(B,p,S){return B[0]=p[0]+S[0],B[1]=p[1]+S[1],B}},"+uE7":function(ge,R,h){"use strict";h.d(R,"a",function(){return B});var B={HierarchyComponentManager:Symbol("HierarchyComponentManager"),TransformComponentManager:Symbol("TransformComponentManager"),NameComponentManager:Symbol("NameComponentManager"),SceneGraphSystem:Symbol("SceneGraphSystem"),FrameGraphSystem:Symbol("FrameGraphSystem"),ResourcePool:Symbol("ResourcePool"),ResourceHandleComponentManager:Symbol("ResourceHandleComponentManager"),PassNodeComponentManager:Symbol("PassNodeComponentManager"),RendererSystem:Symbol("RendererSystem"),RenderPass:Symbol("RenderPass"),RenderPassFactory:Symbol("Factory<IRenderPass>"),Renderable:Symbol("Factory<IRenderPass>"),MeshSystem:Symbol("MeshSystem"),MeshComponentManager:Symbol("MeshComponentManager"),CullableComponentManager:Symbol("CullableComponentManager"),Geometry:Symbol("Geometry"),GeometrySystem:Symbol("GeometrySystem"),GeometryComponentManager:Symbol("GeometryComponentManager"),Material:Symbol("Material"),MaterialSystem:Symbol("MaterialSystem"),MaterialComponentManager:Symbol("MaterialComponentManager"),ForwardRenderPath:Symbol("ForwardRenderPath"),ComputeSystem:Symbol("ComputeSystem"),ComputeComponentManager:Symbol("ComputeComponentManager"),ComputeStrategy:Symbol("ComputeStrategy"),Systems:Symbol("Systems"),World:Symbol("World"),RenderEngine:Symbol("RenderEngine"),WebGPUEngine:Symbol("WebGPUEngine"),WebGLEngine:Symbol("WebGLEngine"),ShaderModuleService:Symbol("ShaderModuleService"),ConfigService:Symbol("ConfigService"),InteractorService:Symbol("InteractorService"),IEventEmitter:Symbol("IEventEmitter"),Light:Symbol("Light")}},"+xCn":function(ge,R,h){"use strict";h.d(R,"b",function(){return M}),h.d(R,"a",function(){return U});var B=h("J4zp"),p=h.n(B),S=h("IOcx");function E($){return typeof $=="number"}function A($){return $===void 0?0:$>360||$<-360?$%360:$}function k($,W,Y){return E($)?S.d.fromValues($,W,Y):$.length===3?S.d.clone($):S.d.fromValues($[0],$[1],$[2])}function M($,W){return W[0]=$[0],W[1]=$[1],W[2]=$[2],W[3]=$[4],W[4]=$[5],W[5]=$[6],W[6]=$[8],W[7]=$[9],W[8]=$[10],W}function U($){var W=p()($,3),Y=W[0],ee=W[1],ne=W[2],ie=Y+ee*256+ne*65536-1;return ie}function V($){return[$+1&255,$+1>>8&255,$+1>>8>>8&255]}},"/kP8":function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="GroupOutlined";var M=R.a=p.forwardRef(k)},"0arJ":function(ge,R,h){"use strict";h.d(R,"a",function(){return yt});var B=h("lSNA"),p=h.n(B),S=h("lwsE"),E=h.n(S),A=h("W8MJ"),k=h.n(A),M=h("PJYZ"),U=h.n(M),V=h("7W2i"),$=h.n(V),W=h("a1gu"),Y=h.n(W),ee=h("Nsbk"),ne=h.n(ee),ie=h("IOcx"),re=h("oDt1"),J=h("cDf5"),ce=h.n(J),G=9007199254740991,Z="[object Arguments]",fe="[object Array]",se="[object Boolean]",ve="[object Date]",ae="[object Error]",j="[object Function]",de="[object Map]",ke="[object Number]",he="[object Object]",Oe="[object RegExp]",We="[object Set]",D="[object String]",je="[object WeakMap]",pt="[object ArrayBuffer]",nt="[object DataView]",Lt="[object Float32Array]",Gt="[object Float64Array]",$e="[object Int8Array]",jt="[object Int16Array]",Be="[object Int32Array]",pe="[object Uint8Array]",un="[object Uint8ClampedArray]",ln="[object Uint16Array]",Fn="[object Uint32Array]",Ft={};Ft[Lt]=Ft[Gt]=Ft[$e]=Ft[jt]=Ft[Be]=Ft[pe]=Ft[un]=Ft[ln]=Ft[Fn]=!0,Ft[Z]=Ft[fe]=Ft[pt]=Ft[se]=Ft[nt]=Ft[ve]=Ft[ae]=Ft[j]=Ft[de]=Ft[ke]=Ft[he]=Ft[Oe]=Ft[We]=Ft[D]=Ft[je]=!1;function Pn(tt){return function(I){return tt(I)}}var lr=Object.prototype,hn=lr.toString;function On(tt){return Dn(tt)&&jn(tt.length)&&!!Ft[hn.call(tt)]}function jn(tt){return typeof tt=="number"&&tt>-1&&tt%1==0&&tt<=G}function Dn(tt){return!!tt&&ce()(tt)==="object"}var ft=On;function Ut(tt,I){var Mn=Object.keys(tt);if(Object.getOwnPropertySymbols){var dt=Object.getOwnPropertySymbols(tt);I&&(dt=dt.filter(function(vt){return Object.getOwnPropertyDescriptor(tt,vt).enumerable})),Mn.push.apply(Mn,dt)}return Mn}function ct(tt){for(var I=1;I<arguments.length;I++){var Mn=arguments[I]!=null?arguments[I]:{};I%2?Ut(Object(Mn),!0).forEach(function(dt){p()(tt,dt,Mn[dt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(tt,Object.getOwnPropertyDescriptors(Mn)):Ut(Object(Mn)).forEach(function(dt){Object.defineProperty(tt,dt,Object.getOwnPropertyDescriptor(Mn,dt))})}return tt}function Ct(tt){var I=kt();return function(){var dt=ne()(tt),vt;if(I){var Bt=ne()(this).constructor;vt=Reflect.construct(dt,arguments,Bt)}else vt=dt.apply(this,arguments);return Y()(this,vt)}}function kt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(tt){return!1}}var yt=function(tt){$()(Mn,tt);var I=Ct(Mn);function Mn(dt){var vt;return E()(this,Mn),vt=I.call(this,dt),vt.dirty=!0,vt.attributes=[],vt.indices=void 0,vt.indicesBuffer=void 0,vt.vertexCount=0,vt.maxInstancedCount=void 0,vt.aabb=void 0,vt.entity=void 0,Object.assign(U()(vt),dt),vt}return k()(Mn,[{key:"setAttribute",value:function(vt,Bt,me,ue){var Re=this.attributes.find(function(Rt){return Rt.name===vt});return Re?(Re.data=Bt,Re.dirty=!0):this.attributes.push(ct(ct({dirty:!0,name:vt,data:Bt},me),{},{bufferGetter:ue})),this.dirty=!0,this}},{key:"setIndex",value:function(vt){return this.indices=new Uint32Array(vt.buffer?vt.buffer:vt),this.dirty=!0,this}},{key:"applyMatrix",value:function(vt){var Bt=this.attributes.find(function(Nr){var Rn=Nr.name;return Rn==="position"}),me=this.attributes.find(function(Nr){var Rn=Nr.name;return Rn==="normal"});if(Bt&&(Bt.dirty=!0,Bt.data&&Bt.data.length))for(var ue=0;ue<Bt.data.length;ue+=3){var Re=ie.e.fromValues(Bt.data[ue],Bt.data[ue+1],Bt.data[ue+2],1);ie.e.transformMat4(Re,Re,vt),ft(Bt.data)?Bt.data.set([Re[0],Re[1],Re[2]],ue):(Bt.data[ue]=Re[0],Bt.data[ue+1]=Re[1],Bt.data[ue+2]=Re[2])}if(me){var Rt=ie.a.normalFromMat4(ie.a.create(),vt);if(me.data&&me.data.length)for(var Kt=0;Kt<me.data.length;Kt+=3){var Bn=ie.d.fromValues(me.data[Kt],me.data[Kt+1],me.data[Kt+2]);ie.d.transformMat3(Bn,Bn,Rt),ie.d.normalize(Bn,Bn),ft(me.data)?me.data.set([Bn[0],Bn[1],Bn[2]],Kt):(me.data[Kt]=Bn[0],me.data[Kt+1]=Bn[1],me.data[Kt+2]=Bn[2])}}}}]),Mn}(re.a)},"0gSV":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.tagged=void 0;var B=h("GXnB"),p=h("Ztfv");function S(E,A){return function(k,M,U){var V=new B.Metadata(E,A);typeof U=="number"?p.tagParameter(k,M,U,V):p.tagProperty(k,M,V)}}R.tagged=S},"1ABj":function(ge,R){function h(B,p){throw new Error("Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.")}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},"1wcP":function(ge,R,h){},"26re":function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-600 72h560v208H232V136zm560 480H232V408h560v208zm0 272H232V680h560v208zM304 240a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0zm0 272a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"database",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="DatabaseOutlined";var M=R.a=p.forwardRef(k)},"2GVV":function(ge,R){ge.exports=h;function h(B,p){var S=new Float32Array(2);return S[0]=B,S[1]=p,S}},"2ajD":function(ge,R){function h(B){return B!==B}ge.exports=h},"2qtc":function(ge,R,h){"use strict";var B=h("EFp3"),p=h.n(B),S=h("1wcP"),E=h.n(S),A=h("+L6B")},"2zpl":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.PhotoshopPreviews=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.PhotoshopPreviews=function(U){var V=U.rgb,$=U.currentColor,W=(0,E.default)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+V.r+","+V.g+", "+V.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:$,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return p.default.createElement("div",null,p.default.createElement("div",{style:W.label},"new"),p.default.createElement("div",{style:W.swatches},p.default.createElement("div",{style:W.new}),p.default.createElement("div",{style:W.current})),p.default.createElement("div",{style:W.label},"current"))};R.default=k},"3/ER":function(ge,R,h){"use strict";(function(B){var p=h("Ju5/"),S=typeof exports=="object"&&exports&&!exports.nodeType&&exports,E=S&&typeof B=="object"&&B&&!B.nodeType&&B,A=E&&E.exports===S,k=A?p.a.Buffer:void 0,M=k?k.allocUnsafe:void 0;function U(V,$){if($)return V.slice();var W=V.length,Y=M?M(W):new V.constructor(W);return V.copy(Y),Y}R.a=U}).call(this,h("Vg/k")(ge))},"30v5":function(ge,R){ge.exports=h;function h(B,p,S){var E=p[0],A=p[1];return B[0]=S[0]*E+S[2]*A,B[1]=S[1]*E+S[3]*A,B}},"3R4v":function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M290 236.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L169 160c-5.1-.6-9.5 3.7-8.9 8.9L179 329.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L370 423.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L290 236.4zm352.7 187.3c3.1 3.1 8.2 3.1 11.3 0l133.7-133.6 43.7 43.7a8.01 8.01 0 0013.6-4.7L863.9 169c.6-5.1-3.7-9.5-8.9-8.9L694.8 179c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L600.3 370a8.03 8.03 0 000 11.3l42.4 42.4zM845 694.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L654 600.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L734 787.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L855 864c5.1.6 9.5-3.7 8.9-8.9L845 694.9zm-463.7-94.6a8.03 8.03 0 00-11.3 0L236.3 733.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L160.1 855c-.6 5.1 3.7 9.5 8.9 8.9L329.2 845c6.6-.8 9.4-8.9 4.7-13.6L290 787.6 423.7 654c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.4z"}}]},name:"fullscreen",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="FullscreenOutlined";var M=R.a=p.forwardRef(k)},"3z9K":function(ge,R,h){var B;try{B=h("LvDl")}catch(p){}B||(B=window._),ge.exports=B},"406g":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.BindingOnSyntax=void 0;var B=h("z4Hk"),p=function(){function S(E){this._binding=E}return S.prototype.onActivation=function(E){return this._binding.onActivation=E,new B.BindingWhenSyntax(this._binding)},S}();R.BindingOnSyntax=p},"48hD":function(ge,R,h){"use strict";h.d(R,"a",function(){return B.a}),h.d(R,"b",function(){return V.a});var B=h("ENEI"),p=h("lwsE"),S=h.n(p),E=h("W8MJ"),A=h.n(E),k=h("IOcx"),M=k.d.create(),U=function(){function J(ce,G){S()(this,J),this.center=void 0,this.radius=void 0,this.center=ce||k.d.create(),this.radius=G||.5}return A()(J,[{key:"containsPoint",value:function(G){return k.d.sub(M,G,this.center),k.d.length(M)<this.radius*this.radius}},{key:"intersects",value:function(G){k.d.sub(M,G.center,this.center);var Z=G.radius+this.radius;return k.d.length(M)<=Z*Z}}]),J}(),V=h("qfsk"),$=h("cXWL"),W=k.d.create(),Y=k.d.create(),ee=k.d.create(),ne=k.d.create(),ie=k.d.create(),re=function(){function J(ce,G){S()(this,J),this.origin=void 0,this.direction=void 0,this.origin=ce||k.d.create(),this.direction=G||k.d.fromValues(0,0,-1)}return A()(J,[{key:"intersectsAABB",value:function(G,Z){return Z?this.intersectAABBWithIntersection(G,Z):this.intersectsAABBWithoutIntersection(G)}},{key:"intersectsSphere",value:function(G,Z){var fe=k.d.sub(W,this.origin,G.center);k.d.normalize(Y,k.d.copy(Y,this.direction));var se=k.d.dot(fe,Y),ve=k.d.dot(fe,fe)-G.radius*G.radius;if(ve>0&&se>0)return null;var ae=se*se-ve;if(ae<0)return!1;var j=Math.abs(-se-Math.sqrt(ae));return Z&&(k.d.copy(Z,this.direction),k.d.scaleAndAdd(Z,this.origin,Z,j)),!0}},{key:"intersectsPlane",value:function(G,Z){var fe=(G.distance-k.d.dot(G.normal,this.origin))/k.d.dot(G.normal,this.direction),se=fe>=0;return se&&Z&&k.d.scaleAndAdd(Z,this.origin,this.direction,fe),se}},{key:"intersectsAABBWithoutIntersection",value:function(G){var Z=W,fe=Y,se=ee,ve=ne,ae=ie,j=this.direction;return k.d.sub(Z,this.origin,G.center),k.d.set(ve,Math.abs(Z[0]),Math.abs(Z[1]),Math.abs(Z[2])),k.d.mul(se,Z,j),ve[0]>G.halfExtents[0]&&se[0]>=0||ve[1]>G.halfExtents[1]&&se[1]>=0||ve[2]>G.halfExtents[2]&&se[2]>=0?!1:(k.d.set(ae,Math.abs(j[0]),Math.abs(j[1]),Math.abs(j[2])),k.d.cross(fe,j,Z),k.d.set(fe,Math.abs(fe[0]),Math.abs(fe[1]),Math.abs(fe[2])),!(fe[0]>G.halfExtents[1]*ae[2]+G.halfExtents[2]*ae[1]||fe[1]>G.halfExtents[0]*ae[2]+G.halfExtents[2]*ae[0]||fe[2]>G.halfExtents[0]*ae[1]+G.halfExtents[1]*ae[0]))}},{key:"intersectAABBWithIntersection",value:function(G,Z){var fe=k.d.copy(k.d.create(),G.getMin());k.d.sub(fe,fe,this.origin);var se=k.d.copy(k.d.create(),G.getMax());k.d.sub(se,se,this.origin);var ve=this.direction;ve[0]===0?(fe[0]=fe[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE,se[0]=se[0]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(fe[0]/=ve[0],se[0]/=ve[0]),ve[1]===0?(fe[1]=fe[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE,se[1]=se[1]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(fe[1]/=ve[1],se[1]/=ve[1]),ve[2]===0?(fe[2]=fe[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE,se[2]=se[2]<0?-Number.MAX_VALUE:Number.MAX_VALUE):(fe[2]/=ve[2],se[2]/=ve[2]);var ae=k.d.set(ee,Math.min(fe[0],se[0]),Math.min(fe[1],se[1]),Math.min(fe[2],se[2])),j=k.d.set(ne,Math.max(fe[0],se[0]),Math.max(fe[1],se[1]),Math.max(fe[2],se[2])),de=Math.min(Math.min(j[0],j[1]),j[2]),ke=Math.max(Math.max(ae[0],ae[1]),ae[2]),he=de>=ke&&ke>=0;return he&&(k.d.copy(Z,this.direction),k.d.scaleAndAdd(Z,this.origin,Z,ke)),he}}]),J}()},"4Hkj":function(ge,R){ge.exports=h;function h(B,p,S){return B[0]=p,B[1]=S,B}},"4XUm":function(ge,R,h){"use strict";var B=h("k6w6");h.d(R,"gl",function(){return B.a});var p=h("olaO"),S=h.n(p),E=h("A14R"),A=h.n(E),k=h("Oboc"),M=h.n(k),U=h("+RHd"),V=h.n(U),$=h("nO7B"),W=h.n($),Y=h("yaXH"),ee=h.n(Y),ne=h("V/xP"),ie=h("vdMR"),re=h.n(ie),J=h("NirO"),ce=h.n(J),G=h("JX23"),Z=h.n(G),fe=h("ZjWs"),se=h.n(fe)},"4cb6":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.multiBindToService=R.getServiceIdentifierAsString=R.typeConstraint=R.namedConstraint=R.taggedConstraint=R.traverseAncerstors=R.decorate=R.id=R.MetadataReader=R.postConstruct=R.targetName=R.multiInject=R.unmanaged=R.optional=R.LazyServiceIdentifer=R.inject=R.named=R.tagged=R.injectable=R.ContainerModule=R.AsyncContainerModule=R.TargetTypeEnum=R.BindingTypeEnum=R.BindingScopeEnum=R.Container=R.METADATA_KEY=void 0;var B=h("xfSm");R.METADATA_KEY=B;var p=h("9Fde");Object.defineProperty(R,"Container",{enumerable:!0,get:function(){return p.Container}});var S=h("FV85");Object.defineProperty(R,"BindingScopeEnum",{enumerable:!0,get:function(){return S.BindingScopeEnum}}),Object.defineProperty(R,"BindingTypeEnum",{enumerable:!0,get:function(){return S.BindingTypeEnum}}),Object.defineProperty(R,"TargetTypeEnum",{enumerable:!0,get:function(){return S.TargetTypeEnum}});var E=h("dxzI");Object.defineProperty(R,"AsyncContainerModule",{enumerable:!0,get:function(){return E.AsyncContainerModule}}),Object.defineProperty(R,"ContainerModule",{enumerable:!0,get:function(){return E.ContainerModule}});var A=h("cZ5Q");Object.defineProperty(R,"injectable",{enumerable:!0,get:function(){return A.injectable}});var k=h("0gSV");Object.defineProperty(R,"tagged",{enumerable:!0,get:function(){return k.tagged}});var M=h("ZzCi");Object.defineProperty(R,"named",{enumerable:!0,get:function(){return M.named}});var U=h("Yk9n");Object.defineProperty(R,"inject",{enumerable:!0,get:function(){return U.inject}}),Object.defineProperty(R,"LazyServiceIdentifer",{enumerable:!0,get:function(){return U.LazyServiceIdentifer}});var V=h("jYx5");Object.defineProperty(R,"optional",{enumerable:!0,get:function(){return V.optional}});var $=h("n2J3");Object.defineProperty(R,"unmanaged",{enumerable:!0,get:function(){return $.unmanaged}});var W=h("jIg/");Object.defineProperty(R,"multiInject",{enumerable:!0,get:function(){return W.multiInject}});var Y=h("oaX6");Object.defineProperty(R,"targetName",{enumerable:!0,get:function(){return Y.targetName}});var ee=h("Sk89");Object.defineProperty(R,"postConstruct",{enumerable:!0,get:function(){return ee.postConstruct}});var ne=h("wnjb");Object.defineProperty(R,"MetadataReader",{enumerable:!0,get:function(){return ne.MetadataReader}});var ie=h("d9O0");Object.defineProperty(R,"id",{enumerable:!0,get:function(){return ie.id}});var re=h("Ztfv");Object.defineProperty(R,"decorate",{enumerable:!0,get:function(){return re.decorate}});var J=h("RR/i");Object.defineProperty(R,"traverseAncerstors",{enumerable:!0,get:function(){return J.traverseAncerstors}}),Object.defineProperty(R,"taggedConstraint",{enumerable:!0,get:function(){return J.taggedConstraint}}),Object.defineProperty(R,"namedConstraint",{enumerable:!0,get:function(){return J.namedConstraint}}),Object.defineProperty(R,"typeConstraint",{enumerable:!0,get:function(){return J.typeConstraint}});var ce=h("ujMp");Object.defineProperty(R,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return ce.getServiceIdentifierAsString}});var G=h("78VC");Object.defineProperty(R,"multiBindToService",{enumerable:!0,get:function(){return G.multiBindToService}})},"4dNS":function(ge,R,h){"use strict";h.d(R,"a",function(){return he});var B=h("o0o1"),p=h.n(B),S=h("yXPU"),E=h.n(S),A=h("yG8O"),k=h.n(A),M=h("lwsE"),U=h.n(M),V=h("W8MJ"),$=h.n(V),W=h("U+yc"),Y=h.n(W),ee=h("1ABj"),ne=h.n(ee),ie=h("4cb6"),re=h.n(ie),J=h("Gj0h"),ce=h("+uE7"),G=h("k6w6"),Z,fe,se,ve,ae,j,de,ke,he=(Z=Object(ie.injectable)(),fe=Object(ie.inject)(ce.a.GeometryComponentManager),se=Object(ie.inject)(ce.a.RenderEngine),Z(ve=(ae=(ke=function(){function Oe(){U()(this,Oe),k()(this,"geometry",j,this),k()(this,"engine",de,this)}return $()(Oe,[{key:"execute",value:function(){var We=E()(p.a.mark(function je(){var pt=this;return p.a.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:this.geometry.forEach(function(Gt,$e){$e.dirty&&($e.attributes.forEach(function(jt){if(jt.dirty&&jt.data){if(!jt.buffer)jt.buffer=pt.engine.createBuffer({data:jt.data,type:G.a.FLOAT});else{var Be;(Be=jt.buffer)===null||Be===void 0||Be.subData({data:jt.data,offset:0})}jt.dirty=!1}}),$e.indices&&($e.indicesBuffer?$e.indicesBuffer.subData({data:$e.indices,offset:0}):$e.indicesBuffer=pt.engine.createElements({data:$e.indices,count:$e.indices.length,type:G.a.UNSIGNED_INT,usage:G.a.STATIC_DRAW})),$e.dirty=!1)});case 1:case"end":return Lt.stop()}},je,this)}));function D(){return We.apply(this,arguments)}return D}()},{key:"tearDown",value:function(){this.geometry.forEach(function(D,je){je.indicesBuffer&&je.indicesBuffer.destroy(),je.attributes.forEach(function(pt){pt.buffer&&pt.buffer.destroy()})}),this.geometry.clear()}},{key:"createBufferGeometry",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{vertexCount:3},je=D.vertexCount,pt=Object(J.createEntity)();return this.geometry.create(pt,{vertexCount:je})}},{key:"createInstancedBufferGeometry",value:function(D){var je=D.maxInstancedCount,pt=D.vertexCount,nt=Object(J.createEntity)();return this.geometry.create(nt,{maxInstancedCount:je,vertexCount:pt})}}]),Oe}(),ke),j=Y()(ae.prototype,"geometry",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=Y()(ae.prototype,"engine",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae))||ve)},"4hNi":function(ge,R,h){ge.exports={EPSILON:h("NEPx"),create:h("Ej2v"),clone:h("S8zm"),fromValues:h("2GVV"),copy:h("PMMO"),set:h("4Hkj"),equals:h("F4jT"),exactEquals:h("RRY9"),add:h("+sJh"),subtract:h("cGwC"),sub:h("uPCe"),multiply:h("u6oY"),mul:h("MF6L"),divide:h("Bu3x"),div:h("Svbc"),inverse:h("QOyy"),min:h("dOXA"),max:h("+A2u"),rotate:h("sj7I"),floor:h("Cq4r"),ceil:h("zLyj"),round:h("Ska/"),scale:h("My4P"),scaleAndAdd:h("+n+1"),distance:h("M5u/"),dist:h("CGoQ"),squaredDistance:h("C3Dj"),sqrDist:h("plQd"),length:h("yEj1"),len:h("vip/"),squaredLength:h("SGks"),sqrLen:h("Yr8b"),negate:h("AzzA"),normalize:h("t8N9"),dot:h("a8Yn"),cross:h("N2HP"),lerp:h("xDUe"),random:h("L26W"),transformMat2:h("30v5"),transformMat2d:h("blMc"),transformMat3:h("Twb9"),transformMat4:h("AEOw"),forEach:h("FKLu"),limit:h("5rkR")}},"4l4a":function(ge,R,h){var B=h("PnFB");ge.exports=p;function p(S,E){return B(S,E,"pre")}},"5Q0V":function(ge,R,h){var B=h("cDf5").default;function p(S,E){if(B(S)!=="object"||S===null)return S;var A=S[Symbol.toPrimitive];if(A!==void 0){var k=A.call(S,E||"default");if(B(k)!=="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(S)}ge.exports=p,ge.exports.__esModule=!0,ge.exports.default=ge.exports},"5rkR":function(ge,R){ge.exports=h;function h(B,p,S){var E=p[0]*p[0]+p[1]*p[1];if(E>S*S){var A=Math.sqrt(E);B[0]=p[0]/A*S,B[1]=p[1]/A*S}else B[0]=p[0],B[1]=p[1];return B}},"6AGu":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.BindingInSyntax=void 0;var B=h("FV85"),p=h("LKzl"),S=function(){function E(A){this._binding=A}return E.prototype.inRequestScope=function(){return this._binding.scope=B.BindingScopeEnum.Request,new p.BindingWhenOnSyntax(this._binding)},E.prototype.inSingletonScope=function(){return this._binding.scope=B.BindingScopeEnum.Singleton,new p.BindingWhenOnSyntax(this._binding)},E.prototype.inTransientScope=function(){return this._binding.scope=B.BindingScopeEnum.Transient,new p.BindingWhenOnSyntax(this._binding)},E}();R.BindingInSyntax=S},"6B+r":function(ge,R,h){"use strict";h.d(R,"a",function(){return ie});var B=h("lwsE"),p=h.n(B),S=h("PJYZ"),E=h.n(S),A=h("7W2i"),k=h.n(A),M=h("a1gu"),U=h.n(M),V=h("Nsbk"),$=h.n(V),W=h("oDt1"),Y=h("ENEI");function ee(re){var J=ne();return function(){var G=$()(re),Z;if(J){var fe=$()(this).constructor;Z=Reflect.construct(G,arguments,fe)}else Z=G.apply(this,arguments);return U()(this,Z)}}function ne(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(re){return!1}}var ie=function(re){k()(ce,re);var J=ee(ce);function ce(G){var Z;return p()(this,ce),Z=J.call(this,G),Z.material=void 0,Z.geometry=void 0,Z.aabb=new Y.a,Z.aabbDirty=!0,Z.model=void 0,Z.visible=!0,Z.children=[],Object.assign(E()(Z),G),Z}return ce}(W.a)},"78VC":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.multiBindToService=void 0;var B=function(S){return function(E){return function(){for(var A=[],k=0;k<arguments.length;k++)A[k]=arguments[k];return A.forEach(function(M){return S.bind(M).toService(E)})}}};R.multiBindToService=B},"7W2i":function(ge,R,h){var B=h("SksO");function p(S,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(E&&E.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),E&&B(S,E)}ge.exports=p,ge.exports.__esModule=!0,ge.exports.default=ge.exports},"7dW+":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Circle=void 0;var B=h("q1tI"),p=J(B),S=h("17x9"),E=J(S),A=h("/FUP"),k=J(A),M=h("3WF5"),U=J(M),V=h("QkVN"),$=J(V),W=h("wME1"),Y=re(W),ee=h("TM95"),ne=h("xbjo"),ie=J(ne);function re(G){if(G&&G.__esModule)return G;var Z={};if(G!=null)for(var fe in G)Object.prototype.hasOwnProperty.call(G,fe)&&(Z[fe]=G[fe]);return Z.default=G,Z}function J(G){return G&&G.__esModule?G:{default:G}}var ce=R.Circle=function(Z){var fe=Z.width,se=Z.onChange,ve=Z.onSwatchHover,ae=Z.colors,j=Z.hex,de=Z.circleSize,ke=Z.styles,he=ke===void 0?{}:ke,Oe=Z.circleSpacing,We=Z.className,D=We===void 0?"":We,je=(0,k.default)((0,$.default)({default:{card:{width:fe,display:"flex",flexWrap:"wrap",marginRight:-Oe,marginBottom:-Oe}}},he)),pt=function(Lt,Gt){return se({hex:Lt,source:"hex"},Gt)};return p.default.createElement("div",{style:je.card,className:"circle-picker "+D},(0,U.default)(ae,function(nt){return p.default.createElement(ie.default,{key:nt,color:nt,onClick:pt,onSwatchHover:ve,active:j===nt.toLowerCase(),circleSize:de,circleSpacing:Oe})}))};ce.propTypes={width:E.default.oneOfType([E.default.string,E.default.number]),circleSize:E.default.number,circleSpacing:E.default.number,styles:E.default.object},ce.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[Y.red["500"],Y.pink["500"],Y.purple["500"],Y.deepPurple["500"],Y.indigo["500"],Y.blue["500"],Y.lightBlue["500"],Y.cyan["500"],Y.teal["500"],Y.green["500"],Y.lightGreen["500"],Y.lime["500"],Y.yellow["500"],Y.amber["500"],Y.orange["500"],Y.deepOrange["500"],Y.brown["500"],Y.blueGrey["500"]],styles:{}},R.default=(0,ee.ColorWrap)(ce)},"81by":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.PhotoshopPicker=void 0;var B=h("q1tI"),p=U(B),S=h("/FUP"),E=U(S),A=h("p8yl"),k=U(A),M=h("TM95");function U($){return $&&$.__esModule?$:{default:$}}var V=R.PhotoshopPicker=function(W){var Y=W.onChange,ee=W.rgb,ne=W.hsv,ie=W.hex,re=(0,E.default)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),J=function(G,Z){G["#"]?k.default.isValidHex(G["#"])&&Y({hex:G["#"],source:"hex"},Z):G.r||G.g||G.b?Y({r:G.r||ee.r,g:G.g||ee.g,b:G.b||ee.b,source:"rgb"},Z):(G.h||G.s||G.v)&&Y({h:G.h||ne.h,s:G.s||ne.s,v:G.v||ne.v,source:"hsv"},Z)};return p.default.createElement("div",{style:re.fields},p.default.createElement(M.EditableInput,{style:{wrap:re.RGBwrap,input:re.RGBinput,label:re.RGBlabel},label:"h",value:Math.round(ne.h),onChange:J}),p.default.createElement(M.EditableInput,{style:{wrap:re.RGBwrap,input:re.RGBinput,label:re.RGBlabel},label:"s",value:Math.round(ne.s*100),onChange:J}),p.default.createElement(M.EditableInput,{style:{wrap:re.RGBwrap,input:re.RGBinput,label:re.RGBlabel},label:"v",value:Math.round(ne.v*100),onChange:J}),p.default.createElement("div",{style:re.divider}),p.default.createElement(M.EditableInput,{style:{wrap:re.RGBwrap,input:re.RGBinput,label:re.RGBlabel},label:"r",value:ee.r,onChange:J}),p.default.createElement(M.EditableInput,{style:{wrap:re.RGBwrap,input:re.RGBinput,label:re.RGBlabel},label:"g",value:ee.g,onChange:J}),p.default.createElement(M.EditableInput,{style:{wrap:re.RGBwrap,input:re.RGBinput,label:re.RGBlabel},label:"b",value:ee.b,onChange:J}),p.default.createElement("div",{style:re.divider}),p.default.createElement(M.EditableInput,{style:{wrap:re.HEXwrap,input:re.HEXinput,label:re.HEXlabel},label:"#",value:ie.replace("#",""),onChange:J}),p.default.createElement("div",{style:re.fieldSymbols},p.default.createElement("div",{style:re.symbol},"\xB0"),p.default.createElement("div",{style:re.symbol},"%"),p.default.createElement("div",{style:re.symbol},"%")))};R.default=V},"8J/B":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.CompactFields=void 0;var B=h("q1tI"),p=k(B),S=h("/FUP"),E=k(S),A=h("TM95");function k(U){return U&&U.__esModule?U:{default:U}}var M=R.CompactFields=function(V){var $=V.hex,W=V.rgb,Y=V.onChange,ee=(0,E.default)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:$},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),ne=function(re,J){re.r||re.g||re.b?Y({r:re.r||W.r,g:re.g||W.g,b:re.b||W.b,source:"rgb"},J):Y({hex:re.hex,source:"hex"},J)};return p.default.createElement("div",{style:ee.fields,className:"flexbox-fix"},p.default.createElement("div",{style:ee.active}),p.default.createElement(A.EditableInput,{style:{wrap:ee.HEXwrap,input:ee.HEXinput,label:ee.HEXlabel},label:"hex",value:$,onChange:ne}),p.default.createElement(A.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"r",value:W.r,onChange:ne}),p.default.createElement(A.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"g",value:W.g,onChange:ne}),p.default.createElement(A.EditableInput,{style:{wrap:ee.RGBwrap,input:ee.RGBinput,label:ee.RGBlabel},label:"b",value:W.b,onChange:ne}))};R.default=M},"8jh/":function(ge,R,h){"use strict";var B=h("Mn/Q"),p=h("LGRX"),S=h("yZ5d")},"94HZ":function(ge,R,h){"use strict";h.d(R,"a",function(){return hn});var B=h("o0o1"),p=h.n(B),S=h("yXPU"),E=h.n(S),A=h("yG8O"),k=h.n(A),M=h("lwsE"),U=h.n(M),V=h("W8MJ"),$=h.n(V),W=h("U+yc"),Y=h.n(W),ee=h("1ABj"),ne=h.n(ee),ie=h("IOcx"),re=h("4cb6"),J=h.n(re),ce=h("+uE7"),G=h("k6w6"),Z,fe,se,ve,ae,j,de,ke,he,Oe,We,D,je,pt,nt,Lt,Gt,$e,jt,Be,pe,un,ln,Fn;function Ft(On,jn){var Dn;if(typeof Symbol=="undefined"||On[Symbol.iterator]==null){if(Array.isArray(On)||(Dn=Pn(On))||jn&&On&&typeof On.length=="number"){Dn&&(On=Dn);var ft=0,Ut=function(){};return{s:Ut,n:function(){return ft>=On.length?{done:!0}:{done:!1,value:On[ft++]}},e:function(tt){throw tt},f:Ut}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ct=!0,Ct=!1,kt;return{s:function(){Dn=On[Symbol.iterator]()},n:function(){var tt=Dn.next();return ct=tt.done,tt},e:function(tt){Ct=!0,kt=tt},f:function(){try{!ct&&Dn.return!=null&&Dn.return()}finally{if(Ct)throw kt}}}}function Pn(On,jn){if(!!On){if(typeof On=="string")return lr(On,jn);var Dn=Object.prototype.toString.call(On).slice(8,-1);if(Dn==="Object"&&On.constructor&&(Dn=On.constructor.name),Dn==="Map"||Dn==="Set")return Array.from(On);if(Dn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Dn))return lr(On,jn)}}function lr(On,jn){(jn==null||jn>On.length)&&(jn=On.length);for(var Dn=0,ft=new Array(jn);Dn<jn;Dn++)ft[Dn]=On[Dn];return ft}var hn=(Z=Object(re.injectable)(),fe=Object(re.inject)(ce.a.MeshComponentManager),se=Object(re.inject)(ce.a.GeometryComponentManager),ve=Object(re.inject)(ce.a.MaterialComponentManager),ae=Object(re.inject)(ce.a.CullableComponentManager),j=Object(re.inject)(ce.a.TransformComponentManager),de=Object(re.inject)(ce.a.HierarchyComponentManager),ke=Object(re.inject)(ce.a.Systems),he=Object(re.named)(ce.a.FrameGraphSystem),Oe=Object(re.inject)(ce.a.RenderEngine),We=Object(re.inject)(ce.a.ResourcePool),Z(D=(je=(Fn=ln=function(){function On(){var jn=this;U()(this,On),k()(this,"mesh",pt,this),k()(this,"geometry",nt,this),k()(this,"material",Lt,this),k()(this,"cullable",Gt,this),k()(this,"transform",$e,this),k()(this,"hierarchy",jt,this),k()(this,"frameGraphSystem",Be,this),k()(this,"engine",pe,this),k()(this,"resourcePool",un,this),this.modelCache={},this.setup=function(Dn,ft,Ut){var ct=Dn.createRenderTarget(ft,"color buffer",{width:1,height:1,usage:G.a.RENDER_ATTACHMENT|G.a.SAMPLED|G.a.COPY_SRC});Ut.data={output:ft.write(Dn,ct)}},this.execute=function(){var Dn=E()(p.a.mark(function ft(Ut,ct,Ct){var kt,yt,tt,I,Mn,dt;return p.a.wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:kt=Ut.getResourceNode(ct.data.output),yt=jn.resourcePool.getOrCreateResource(kt.resource),tt=Ft(Ct),Bt.prev=3,tt.s();case 5:if((I=tt.n()).done){Bt.next=11;break}return Mn=I.value,Bt.next=9,jn.initView(Mn);case 9:Bt.next=5;break;case 11:Bt.next=16;break;case 13:Bt.prev=13,Bt.t0=Bt.catch(3),tt.e(Bt.t0);case 16:return Bt.prev=16,tt.f(),Bt.finish(16);case 19:dt=jn.engine.getCanvas(),yt.resize({width:dt.width,height:dt.height}),jn.engine.setScissor({enable:!1}),jn.engine.clear({framebuffer:yt,color:Ct[0].getClearColor(),depth:1}),jn.engine.useFramebuffer(yt,function(){var me=Ft(Ct),ue;try{for(me.s();!(ue=me.n()).done;){var Re=ue.value;jn.renderView(Re)}}catch(Rt){me.e(Rt)}finally{me.f()}});case 24:case"end":return Bt.stop()}},ft,null,[[3,13,16,19]])}));return function(ft,Ut,ct){return Dn.apply(this,arguments)}}()}return $()(On,[{key:"renderView",value:function(Dn){var ft=Dn.getScene(),Ut=Dn.getCamera(),ct=Ut.getViewTransform(),Ct=ie.b.multiply(ie.b.create(),Ut.getPerspective(),ct);Ut.getFrustum().extractFromVPMatrix(Ct);var kt=Dn.getViewport(),yt=kt.x,tt=kt.y,I=kt.width,Mn=kt.height;this.engine.viewport({x:yt,y:tt,width:I,height:Mn});var dt=Ft(ft.getEntities()),vt;try{for(dt.s();!(vt=dt.n()).done;){var Bt=vt.value;this.renderMesh(Bt,{camera:Ut,view:Dn,viewMatrix:ct})}}catch(me){dt.e(me)}finally{dt.f()}}},{key:"renderMesh",value:function(Dn,ft){var Ut=ft.camera,ct=ft.view,Ct=ft.viewMatrix,kt=this.mesh.getComponentByEntity(Dn);if(!(!kt||!kt.visible)){var yt=kt.material,tt=kt.geometry;if(!(!tt||tt.dirty||!yt)){var I=this.transform.getComponentByEntity(Dn),Mn=ie.b.multiply(ie.b.create(),Ct,I.worldTransform),dt=ct.getViewport(),vt=dt.width,Bt=dt.height;yt.setUniform({projectionMatrix:Ut.getPerspective(),modelViewMatrix:Mn,modelMatrix:I.worldTransform,viewMatrix:Ct,cameraPosition:Ut.getPosition(),u_viewport:[vt,Bt]}),kt.model&&(kt.model.draw({uniforms:yt.uniforms.reduce(function(me,ue){return me[ue.name]=ue.data,me},{})}),yt.uniforms.forEach(function(me){me.dirty=!1}),yt.dirty=!1)}}}},{key:"initMesh",value:function(){var jn=E()(p.a.mark(function ft(Ut,ct){var Ct,kt,yt,tt,I,Mn,dt,vt;return p.a.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(Ct=this.mesh.getComponentByEntity(Ut),Ct){me.next=3;break}return me.abrupt("return");case 3:if(kt=Ct.material,yt=Ct.geometry,!(!yt||yt.dirty||!kt)){me.next=7;break}return me.abrupt("return");case 7:if(Ct.model){me.next=24;break}if(tt="m-".concat(kt.entity,"-g-").concat(yt.entity),!this.modelCache[tt]){me.next=12;break}return Ct.model=this.modelCache[tt],me.abrupt("return");case 12:return kt.setUniform({projectionMatrix:1,modelViewMatrix:1,modelMatrix:1,viewMatrix:1,cameraPosition:1,u_viewport:1}),I=this.engine,Mn=I.createModel,dt=I.createAttribute,vt={vs:kt.vertexShaderGLSL,fs:kt.fragmentShaderGLSL,defines:kt.defines,attributes:yt.attributes.reduce(function(ue,Re){return Re.data&&Re.buffer&&(ue[Re.name]=dt({buffer:Re.buffer,attributes:Re.attributes,arrayStride:Re.arrayStride,stepMode:Re.stepMode,divisor:Re.stepMode==="vertex"?0:1})),ue},{}),uniforms:kt.uniforms.reduce(function(ue,Re){return ue[Re.name]=Re.data,ue},{}),scissor:{enable:!0,box:function(){return ct.getViewport()}}},kt.cull&&(vt.cull=kt.cull),kt.depth&&(vt.depth=kt.depth),kt.blend&&(vt.blend=kt.blend),yt.indicesBuffer&&(vt.elements=yt.indicesBuffer),yt.maxInstancedCount&&(vt.instances=yt.maxInstancedCount,vt.count=yt.vertexCount||3),me.next=22,Mn(vt);case 22:Ct.model=me.sent,this.modelCache[tt]=Ct.model;case 24:case"end":return me.stop()}},ft,this)}));function Dn(ft,Ut){return jn.apply(this,arguments)}return Dn}()},{key:"initView",value:function(){var jn=E()(p.a.mark(function ft(Ut){var ct,Ct,kt,yt;return p.a.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:ct=Ut.getScene(),Ct=Ft(ct.getEntities()),I.prev=2,Ct.s();case 4:if((kt=Ct.n()).done){I.next=10;break}return yt=kt.value,I.next=8,this.initMesh(yt,Ut);case 8:I.next=4;break;case 10:I.next=15;break;case 12:I.prev=12,I.t0=I.catch(2),Ct.e(I.t0);case 15:return I.prev=15,Ct.f(),I.finish(15);case 18:case"end":return I.stop()}},ft,this,[[2,12,15,18]])}));function Dn(ft){return jn.apply(this,arguments)}return Dn}()}]),On}(),ln.IDENTIFIER="Render Pass",Fn),pt=Y()(je.prototype,"mesh",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=Y()(je.prototype,"geometry",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt=Y()(je.prototype,"material",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gt=Y()(je.prototype,"cullable",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$e=Y()(je.prototype,"transform",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jt=Y()(je.prototype,"hierarchy",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Be=Y()(je.prototype,"frameGraphSystem",[ke,he],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe=Y()(je.prototype,"engine",[Oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),un=Y()(je.prototype,"resourcePool",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je))||D)},"98GK":function(ge,R,h){var B=h("3z9K");ge.exports=p;function p(S){var E=0,A=[],k={},M=[];function U(V){var $=k[V]={onStack:!0,lowlink:E,index:E++};if(A.push(V),S.successors(V).forEach(function(ee){B.has(k,ee)?k[ee].onStack&&($.lowlink=Math.min($.lowlink,k[ee].index)):(U(ee),$.lowlink=Math.min($.lowlink,k[ee].lowlink))}),$.lowlink===$.index){var W=[],Y;do Y=A.pop(),k[Y].onStack=!1,W.push(Y);while(V!==Y);M.push(W)}}return S.nodes().forEach(function(V){B.has(k,V)||U(V)}),M}},"9F0J":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=Object.assign||function(M){for(var U=1;U<arguments.length;U++){var V=arguments[U];for(var $ in V)Object.prototype.hasOwnProperty.call(V,$)&&(M[$]=V[$])}return M},p=h("q1tI"),S=E(p);function E(M){return M&&M.__esModule?M:{default:M}}function A(M,U){var V={};for(var $ in M)U.indexOf($)>=0||!Object.prototype.hasOwnProperty.call(M,$)||(V[$]=M[$]);return V}var k=24;R.default=function(M){var U=M.fill,V=U===void 0?"currentColor":U,$=M.width,W=$===void 0?k:$,Y=M.height,ee=Y===void 0?k:Y,ne=M.style,ie=ne===void 0?{}:ne,re=A(M,["fill","width","height","style"]);return S.default.createElement("svg",B({viewBox:"0 0 "+k+" "+k,style:B({fill:V,width:W,height:ee},ie)},re),S.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},"9Fde":function(ge,R,h){"use strict";var B=this&&this.__awaiter||function(J,ce,G,Z){function fe(se){return se instanceof G?se:new G(function(ve){ve(se)})}return new(G||(G=Promise))(function(se,ve){function ae(ke){try{de(Z.next(ke))}catch(he){ve(he)}}function j(ke){try{de(Z.throw(ke))}catch(he){ve(he)}}function de(ke){ke.done?se(ke.value):fe(ke.value).then(ae,j)}de((Z=Z.apply(J,ce||[])).next())})},p=this&&this.__generator||function(J,ce){var G={label:0,sent:function(){if(se[0]&1)throw se[1];return se[1]},trys:[],ops:[]},Z,fe,se,ve;return ve={next:ae(0),throw:ae(1),return:ae(2)},typeof Symbol=="function"&&(ve[Symbol.iterator]=function(){return this}),ve;function ae(de){return function(ke){return j([de,ke])}}function j(de){if(Z)throw new TypeError("Generator is already executing.");for(;G;)try{if(Z=1,fe&&(se=de[0]&2?fe.return:de[0]?fe.throw||((se=fe.return)&&se.call(fe),0):fe.next)&&!(se=se.call(fe,de[1])).done)return se;switch(fe=0,se&&(de=[de[0]&2,se.value]),de[0]){case 0:case 1:se=de;break;case 4:return G.label++,{value:de[1],done:!1};case 5:G.label++,fe=de[1],de=[0];continue;case 7:de=G.ops.pop(),G.trys.pop();continue;default:if(se=G.trys,!(se=se.length>0&&se[se.length-1])&&(de[0]===6||de[0]===2)){G=0;continue}if(de[0]===3&&(!se||de[1]>se[0]&&de[1]<se[3])){G.label=de[1];break}if(de[0]===6&&G.label<se[1]){G.label=se[1],se=de;break}if(se&&G.label<se[2]){G.label=se[2],G.ops.push(de);break}se[2]&&G.ops.pop(),G.trys.pop();continue}de=ce.call(J,G)}catch(ke){de=[6,ke],fe=0}finally{Z=se=0}if(de[0]&5)throw de[1];return{value:de[0]?de[1]:void 0,done:!0}}},S=this&&this.__spreadArray||function(J,ce){for(var G=0,Z=ce.length,fe=J.length;G<Z;G++,fe++)J[fe]=ce[G];return J};Object.defineProperty(R,"__esModule",{value:!0}),R.Container=void 0;var E=h("LgvC"),A=h("MON2"),k=h("FV85"),M=h("xfSm"),U=h("wnjb"),V=h("h7MG"),$=h("aPG5"),W=h("gzZq"),Y=h("d9O0"),ee=h("ujMp"),ne=h("HpQ9"),ie=h("AwBQ"),re=function(){function J(ce){this._appliedMiddleware=[];var G=ce||{};if(typeof G!="object")throw new Error(""+A.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(G.defaultScope===void 0)G.defaultScope=k.BindingScopeEnum.Transient;else if(G.defaultScope!==k.BindingScopeEnum.Singleton&&G.defaultScope!==k.BindingScopeEnum.Transient&&G.defaultScope!==k.BindingScopeEnum.Request)throw new Error(""+A.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(G.autoBindInjectable===void 0)G.autoBindInjectable=!1;else if(typeof G.autoBindInjectable!="boolean")throw new Error(""+A.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(G.skipBaseClassChecks===void 0)G.skipBaseClassChecks=!1;else if(typeof G.skipBaseClassChecks!="boolean")throw new Error(""+A.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:G.autoBindInjectable,defaultScope:G.defaultScope,skipBaseClassChecks:G.skipBaseClassChecks},this.id=Y.id(),this._bindingDictionary=new ie.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new U.MetadataReader}return J.merge=function(ce,G){for(var Z=[],fe=2;fe<arguments.length;fe++)Z[fe-2]=arguments[fe];var se=new J,ve=S([ce,G],Z).map(function(de){return V.getBindingDictionary(de)}),ae=V.getBindingDictionary(se);function j(de,ke){de.traverse(function(he,Oe){Oe.forEach(function(We){ke.add(We.serviceIdentifier,We.clone())})})}return ve.forEach(function(de){j(de,ae)}),se},J.prototype.load=function(){for(var ce=[],G=0;G<arguments.length;G++)ce[G]=arguments[G];for(var Z=this._getContainerModuleHelpersFactory(),fe=0,se=ce;fe<se.length;fe++){var ve=se[fe],ae=Z(ve.id);ve.registry(ae.bindFunction,ae.unbindFunction,ae.isboundFunction,ae.rebindFunction)}},J.prototype.loadAsync=function(){for(var ce=[],G=0;G<arguments.length;G++)ce[G]=arguments[G];return B(this,void 0,void 0,function(){var Z,fe,se,ve,ae;return p(this,function(j){switch(j.label){case 0:Z=this._getContainerModuleHelpersFactory(),fe=0,se=ce,j.label=1;case 1:return fe<se.length?(ve=se[fe],ae=Z(ve.id),[4,ve.registry(ae.bindFunction,ae.unbindFunction,ae.isboundFunction,ae.rebindFunction)]):[3,4];case 2:j.sent(),j.label=3;case 3:return fe++,[3,1];case 4:return[2]}})})},J.prototype.unload=function(){for(var ce=this,G=[],Z=0;Z<arguments.length;Z++)G[Z]=arguments[Z];var fe=function(ve){return function(ae){return ae.moduleId===ve}};G.forEach(function(se){var ve=fe(se.id);ce._bindingDictionary.removeByCondition(ve)})},J.prototype.bind=function(ce){var G=this.options.defaultScope||k.BindingScopeEnum.Transient,Z=new E.Binding(ce,G);return this._bindingDictionary.add(ce,Z),new W.BindingToSyntax(Z)},J.prototype.rebind=function(ce){return this.unbind(ce),this.bind(ce)},J.prototype.unbind=function(ce){try{this._bindingDictionary.remove(ce)}catch(G){throw new Error(A.CANNOT_UNBIND+" "+ee.getServiceIdentifierAsString(ce))}},J.prototype.unbindAll=function(){this._bindingDictionary=new ie.Lookup},J.prototype.isBound=function(ce){var G=this._bindingDictionary.hasKey(ce);return!G&&this.parent&&(G=this.parent.isBound(ce)),G},J.prototype.isBoundNamed=function(ce,G){return this.isBoundTagged(ce,M.NAMED_TAG,G)},J.prototype.isBoundTagged=function(ce,G,Z){var fe=!1;if(this._bindingDictionary.hasKey(ce)){var se=this._bindingDictionary.get(ce),ve=V.createMockRequest(this,ce,G,Z);fe=se.some(function(ae){return ae.constraint(ve)})}return!fe&&this.parent&&(fe=this.parent.isBoundTagged(ce,G,Z)),fe},J.prototype.snapshot=function(){this._snapshots.push(ne.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},J.prototype.restore=function(){var ce=this._snapshots.pop();if(ce===void 0)throw new Error(A.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=ce.bindings,this._middleware=ce.middleware},J.prototype.createChild=function(ce){var G=new J(ce||this.options);return G.parent=this,G},J.prototype.applyMiddleware=function(){for(var ce=[],G=0;G<arguments.length;G++)ce[G]=arguments[G];this._appliedMiddleware=this._appliedMiddleware.concat(ce);var Z=this._middleware?this._middleware:this._planAndResolve();this._middleware=ce.reduce(function(fe,se){return se(fe)},Z)},J.prototype.applyCustomMetadataReader=function(ce){this._metadataReader=ce},J.prototype.get=function(ce){return this._get(!1,!1,k.TargetTypeEnum.Variable,ce)},J.prototype.getTagged=function(ce,G,Z){return this._get(!1,!1,k.TargetTypeEnum.Variable,ce,G,Z)},J.prototype.getNamed=function(ce,G){return this.getTagged(ce,M.NAMED_TAG,G)},J.prototype.getAll=function(ce){return this._get(!0,!0,k.TargetTypeEnum.Variable,ce)},J.prototype.getAllTagged=function(ce,G,Z){return this._get(!1,!0,k.TargetTypeEnum.Variable,ce,G,Z)},J.prototype.getAllNamed=function(ce,G){return this.getAllTagged(ce,M.NAMED_TAG,G)},J.prototype.resolve=function(ce){var G=this.createChild();return G.bind(ce).toSelf(),this._appliedMiddleware.forEach(function(Z){G.applyMiddleware(Z)}),G.get(ce)},J.prototype._getContainerModuleHelpersFactory=function(){var ce=this,G=function(j,de){j._binding.moduleId=de},Z=function(j){return function(de){var ke=ce.bind.bind(ce),he=ke(de);return G(he,j),he}},fe=function(j){return function(de){var ke=ce.unbind.bind(ce);ke(de)}},se=function(j){return function(de){var ke=ce.isBound.bind(ce);return ke(de)}},ve=function(j){return function(de){var ke=ce.rebind.bind(ce),he=ke(de);return G(he,j),he}};return function(ae){return{bindFunction:Z(ae),isboundFunction:se(ae),rebindFunction:ve(ae),unbindFunction:fe(ae)}}},J.prototype._get=function(ce,G,Z,fe,se,ve){var ae=null,j={avoidConstraints:ce,contextInterceptor:function(ke){return ke},isMultiInject:G,key:se,serviceIdentifier:fe,targetType:Z,value:ve};if(this._middleware){if(ae=this._middleware(j),ae==null)throw new Error(A.INVALID_MIDDLEWARE_RETURN)}else ae=this._planAndResolve()(j);return ae},J.prototype._planAndResolve=function(){var ce=this;return function(G){var Z=V.plan(ce._metadataReader,ce,G.isMultiInject,G.targetType,G.serviceIdentifier,G.key,G.value,G.avoidConstraints);Z=G.contextInterceptor(Z);var fe=$.resolve(Z);return fe}},J}();R.Container=re},"9niD":function(ge,R,h){"use strict";h.d(R,"p",function(){return he}),h.d(R,"s",function(){return Oe}),h.d(R,"u",function(){return eM}),h.d(R,"v",function(){return O2}),h.d(R,"J",function(){return Yo}),h.d(R,"D",function(){return Xk}),h.d(R,"k",function(){return mi}),h.d(R,"A",function(){return no}),h.d(R,"x",function(){return Bo}),h.d(R,"z",function(){return Ws}),h.d(R,"y",function(){return di}),h.d(R,"B",function(){return MX}),h.d(R,"I",function(){return OD}),h.d(R,"E",function(){return TU}),h.d(R,"o",function(){return de}),h.d(R,"G",function(){return jU}),h.d(R,"q",function(){return QC}),h.d(R,"n",function(){return GX}),h.d(R,"F",function(){return zX}),h.d(R,"i",function(){return Bi}),h.d(R,"h",function(){return dl}),h.d(R,"K",function(){return $c}),h.d(R,"l",function(){return tf}),h.d(R,"e",function(){return KX}),h.d(R,"c",function(){return ZX}),h.d(R,"a",function(){return wY}),h.d(R,"C",function(){return xY}),h.d(R,"d",function(){return VY}),h.d(R,"f",function(){return hj}),h.d(R,"H",function(){return vj}),h.d(R,"b",function(){return KY}),h.d(R,"r",function(){return NJ}),h.d(R,"m",function(){return Bj}),h.d(R,"j",function(){return Uh}),h.d(R,"g",function(){return lZ}),h.d(R,"w",function(){return lE}),h.d(R,"t",function(){return hc});var B={};h.r(B),h.d(B,"isArray",function(){return ot}),h.d(B,"isArrayLike",function(){return Ro}),h.d(B,"uniq",function(){return ut}),h.d(B,"union",function(){return Wf}),h.d(B,"sortedIndex",function(){return Fd}),h.d(B,"sortedIndexBy",function(){return Vr}),h.d(B,"sortBy",function(){return No}),h.d(B,"groupBy",function(){return Lc}),h.d(B,"difference",function(){return Ga}),h.d(B,"max",function(){return Dt}),h.d(B,"diff",function(){return At});var p={};h.r(p),h.d(p,"has",function(){return Nn}),h.d(p,"pick",function(){return Dp}),h.d(p,"forIn",function(){return ym}),h.d(p,"merge",function(){return aO}),h.d(p,"extend",function(){return oO}),h.d(p,"isEqual",function(){return uO}),h.d(p,"isEmpty",function(){return hO}),h.d(p,"isObject",function(){return or}),h.d(p,"isPlainObject",function(){return wm}),h.d(p,"clone",function(){return sw}),h.d(p,"cloneDeep",function(){return cw}),h.d(p,"defaults",function(){return dw}),h.d(p,"defaultsDeep",function(){return Sb}),h.d(p,"applyMixins",function(){return gw}),h.d(p,"inherit",function(){return Rm}),h.d(p,"createClass",function(){return bw}),h.d(p,"ensure",function(){return Mb}),h.d(p,"getValue",function(){return oh}),h.d(p,"getNumber",function(){return Cw}),h.d(p,"getBoolean",function(){return Ew}),h.d(p,"isMaliciousProp",function(){return Nm}),h.d(p,"getByPath",function(){return Tb}),h.d(p,"setByPath",function(){return Ow}),h.d(p,"unsetByPath",function(){return Pb}),h.d(p,"flatten",function(){return jm});var S={};h.r(S),h.d(S,"isString",function(){return Sw}),h.d(S,"toString",function(){return oo}),h.d(S,"escape",function(){return Db}),h.d(S,"unescape",function(){return _w}),h.d(S,"startsWith",function(){return zm}),h.d(S,"endsWith",function(){return Um}),h.d(S,"split",function(){return ji}),h.d(S,"repeat",function(){return Nl}),h.d(S,"pad",function(){return VL}),h.d(S,"padEnd",function(){return WL}),h.d(S,"padStart",function(){return KL}),h.d(S,"truncate",function(){return QL}),h.d(S,"template",function(){return M4}),h.d(S,"uniqueId",function(){return k4}),h.d(S,"eval",function(){return D4}),h.d(S,"lowerFirst",function(){return __}),h.d(S,"upperFirst",function(){return Vb}),h.d(S,"camelCase",function(){return bx}),h.d(S,"kebabCase",function(){return mT}),h.d(S,"pascalCase",function(){return F_}),h.d(S,"constantCase",function(){return B_}),h.d(S,"dotCase",function(){return G_}),h.d(S,"pathCase",function(){return z_}),h.d(S,"sentenceCase",function(){return U_}),h.d(S,"titleCase",function(){return V_}),h.d(S,"hashcode",function(){return H_}),h.d(S,"uuid",function(){return W_}),h.d(S,"sanitizeHTML",function(){return $_}),h.d(S,"getSpellingSuggestion",function(){return K_});var E={};h.r(E),h.d(E,"isNaN",function(){return Q_}),h.d(E,"isNumber",function(){return yT}),h.d(E,"isFinite",function(){return t6}),h.d(E,"isInteger",function(){return bT}),h.d(E,"isSafeInteger",function(){return a6}),h.d(E,"clamp",function(){return o6}),h.d(E,"inRange",function(){return d6}),h.d(E,"toFinite",function(){return Up}),h.d(E,"toNumber",function(){return Mf}),h.d(E,"toInteger",function(){return Rl}),h.d(E,"toSafeInteger",function(){return v6}),h.d(E,"parseInt",function(){return y6}),h.d(E,"isNumeric",function(){return ao}),h.d(E,"mod",function(){return b6}),h.d(E,"random",function(){return C6}),h.d(E,"isPercentage",function(){return OT}),h.d(E,"normalizePercentage",function(){return E6}),h.d(E,"parseCssNumeric",function(){return O6}),h.d(E,"normalizeSides",function(){return w6});var A={};h.r(A),h.d(A,"isFunction",function(){return ha}),h.d(A,"once",function(){return T6}),h.d(A,"noop",function(){return Se}),h.d(A,"debounce",function(){return N6}),h.d(A,"defer",function(){return B6}),h.d(A,"apply",function(){return Ox}),h.d(A,"call",function(){return G6}),h.d(A,"cacher",function(){return U6}),h.d(A,"isAsyncLike",function(){return wT}),h.d(A,"isAsync",function(){return wx}),h.d(A,"toAsyncBoolean",function(){return xT}),h.d(A,"toDeferredBoolean",function(){return V6});var k={};h.r(k),h.d(k,"annotate",function(){return K6}),h.d(k,"findAnnotationsAtIndex",function(){return X6}),h.d(k,"findAnnotationsBetweenIndexes",function(){return Y6}),h.d(k,"shiftAnnotations",function(){return J6}),h.d(k,"sanitize",function(){return Z6});var M={};h.r(M),h.d(M,"requestAnimationFrame",function(){return q6}),h.d(M,"cancelAnimationFrame",function(){return eF}),h.d(M,"CASE_SENSITIVE_ATTR",function(){return FT}),h.d(M,"getAttribute",function(){return BT}),h.d(M,"removeAttribute",function(){return Ix}),h.d(M,"setAttribute",function(){return Xb}),h.d(M,"setAttributes",function(){return Rx}),h.d(M,"attr",function(){return gu}),h.d(M,"qualifyAttr",function(){return Nx}),h.d(M,"kebablizeAttrs",function(){return $6}),h.d(M,"styleToObject",function(){return Jm}),h.d(M,"mergeAttrs",function(){return Yb}),h.d(M,"uniqueId",function(){return AT}),h.d(M,"ensureId",function(){return MT}),h.d(M,"isSVGGraphicsElement",function(){return $p}),h.d(M,"ns",function(){return Tf}),h.d(M,"svgVersion",function(){return Mx}),h.d(M,"createElement",function(){return H6}),h.d(M,"createElementNS",function(){return TT}),h.d(M,"createSvgElement",function(){return Pf}),h.d(M,"createSvgDocument",function(){return Wb}),h.d(M,"parseXML",function(){return PT}),h.d(M,"tagName",function(){return $b}),h.d(M,"index",function(){return kT}),h.d(M,"find",function(){return DT}),h.d(M,"findOne",function(){return IT}),h.d(M,"findParentByClass",function(){return RT}),h.d(M,"contains",function(){return NT}),h.d(M,"remove",function(){return Kb}),h.d(M,"empty",function(){return Tx}),h.d(M,"append",function(){return Px}),h.d(M,"prepend",function(){return jT}),h.d(M,"before",function(){return kx}),h.d(M,"appendTo",function(){return LT}),h.d(M,"isHTMLElement",function(){return Dx}),h.d(M,"clickable",function(){return _T}),h.d(M,"isInputElement",function(){return W6}),h.d(M,"getClass",function(){return wv}),h.d(M,"hasClass",function(){return Hb}),h.d(M,"addClass",function(){return Xm}),h.d(M,"removeClass",function(){return Ym}),h.d(M,"toggleClass",function(){return Ax}),h.d(M,"setPrefixedStyle",function(){return aF}),h.d(M,"getComputedStyle",function(){return Jb}),h.d(M,"hasScrollbars",function(){return iF}),h.d(M,"getVendorPrefixedName",function(){return VT}),h.d(M,"clearSelection",function(){return oF}),h.d(M,"text",function(){return ZT}),h.d(M,"breakText",function(){return bF}),h.d(M,"KAPPA",function(){return a1}),h.d(M,"sample",function(){return zx}),h.d(M,"lineToPathData",function(){return QT}),h.d(M,"polygonToPathData",function(){return qT}),h.d(M,"polylineToPathData",function(){return eP}),h.d(M,"getPointsFromSvgElement",function(){return Zm}),h.d(M,"circleToPathData",function(){return nP}),h.d(M,"ellipseToPathData",function(){return rP}),h.d(M,"rectangleToPathData",function(){return aP}),h.d(M,"rectToPathData",function(){return iP}),h.d(M,"toPath",function(){return Ux}),h.d(M,"toPathData",function(){return Vx}),h.d(M,"createSlicePathData",function(){return CF}),h.d(M,"bbox",function(){return sP}),h.d(M,"getBBox",function(){return ch}),h.d(M,"getBBoxByElementAttr",function(){return PF}),h.d(M,"getMatrixByElementAttr",function(){return kF}),h.d(M,"getTransformToElement",function(){return fh}),h.d(M,"toLocalPoint",function(){return uP}),h.d(M,"toGeometryShape",function(){return lP}),h.d(M,"getIntersection",function(){return DF}),h.d(M,"animate",function(){return cP}),h.d(M,"animateTransform",function(){return fP}),h.d(M,"animateAlongPath",function(){return vP}),h.d(M,"getBoundingOffsetRect",function(){return pP}),h.d(M,"createSVGPoint",function(){return Hx}),h.d(M,"createSVGMatrix",function(){return Xp}),h.d(M,"createSVGTransform",function(){return Yp}),h.d(M,"transformStringToMatrix",function(){return i1}),h.d(M,"matrixToTransformString",function(){return Wx}),h.d(M,"parseTransformString",function(){return o1}),h.d(M,"decomposeMatrix",function(){return Kx}),h.d(M,"matrixToScale",function(){return wF}),h.d(M,"matrixToRotation",function(){return xF}),h.d(M,"matrixToTranslation",function(){return SF}),h.d(M,"transformPoint",function(){return s1}),h.d(M,"transformLine",function(){return AF}),h.d(M,"transformPolyline",function(){return MF}),h.d(M,"transformRectangle",function(){return u1}),h.d(M,"transform",function(){return Xx}),h.d(M,"translate",function(){return Yx}),h.d(M,"rotate",function(){return Jx}),h.d(M,"scale",function(){return l1}),h.d(M,"translateAndAutoOrient",function(){return gP}),h.d(M,"MouseWheelHandle",function(){return IF}),h.d(M,"isVector",function(){return RF}),h.d(M,"createVector",function(){return NF}),h.d(M,"createVectors",function(){return jF});var U={};h.r(U),h.d(U,"block",function(){return C5}),h.d(U,"classic",function(){return E5}),h.d(U,"diamond",function(){return w5}),h.d(U,"path",function(){return S5}),h.d(U,"cross",function(){return M5}),h.d(U,"async",function(){return P5}),h.d(U,"circle",function(){return RP}),h.d(U,"circlePlus",function(){return k5}),h.d(U,"ellipse",function(){return I5});var V={};h.r(V),h.d(V,"ref",function(){return GF}),h.d(V,"refX",function(){return yP}),h.d(V,"refY",function(){return bP}),h.d(V,"refDx",function(){return zF}),h.d(V,"refDy",function(){return UF}),h.d(V,"refWidth",function(){return CP}),h.d(V,"refHeight",function(){return EP}),h.d(V,"refRx",function(){return VF}),h.d(V,"refRy",function(){return HF}),h.d(V,"refRInscribed",function(){return OP}),h.d(V,"refRCircumscribed",function(){return WF}),h.d(V,"refCx",function(){return $F}),h.d(V,"refCy",function(){return KF}),h.d(V,"refDResetOffset",function(){return wP}),h.d(V,"refDKeepOffset",function(){return XF}),h.d(V,"refPointsResetOffset",function(){return xP}),h.d(V,"refPointsKeepOffset",function(){return YF}),h.d(V,"refR",function(){return JF}),h.d(V,"refD",function(){return ZF}),h.d(V,"refPoints",function(){return QF}),h.d(V,"refX2",function(){return qF}),h.d(V,"refY2",function(){return e5}),h.d(V,"refWidth2",function(){return t5}),h.d(V,"refHeight2",function(){return n5}),h.d(V,"fill",function(){return r5}),h.d(V,"stroke",function(){return a5}),h.d(V,"text",function(){return TP}),h.d(V,"textWrap",function(){return i5}),h.d(V,"lineHeight",function(){return o5}),h.d(V,"textVerticalAnchor",function(){return s5}),h.d(V,"textPath",function(){return u5}),h.d(V,"annotations",function(){return l5}),h.d(V,"eol",function(){return c5}),h.d(V,"displayEmpty",function(){return f5}),h.d(V,"title",function(){return d5}),h.d(V,"xAlign",function(){return h5}),h.d(V,"yAlign",function(){return v5}),h.d(V,"resetOffset",function(){return p5}),h.d(V,"style",function(){return g5}),h.d(V,"html",function(){return m5}),h.d(V,"filter",function(){return y5}),h.d(V,"port",function(){return b5}),h.d(V,"sourceMarker",function(){return N5}),h.d(V,"targetMarker",function(){return j5}),h.d(V,"vertexMarker",function(){return L5}),h.d(V,"connection",function(){return F5}),h.d(V,"atConnectionLengthKeepGradient",function(){return NP}),h.d(V,"atConnectionLengthIgnoreGradient",function(){return B5}),h.d(V,"atConnectionRatioKeepGradient",function(){return jP}),h.d(V,"atConnectionRatioIgnoreGradient",function(){return G5}),h.d(V,"atConnectionLength",function(){return z5}),h.d(V,"atConnectionRatio",function(){return U5});var $={};h.r($),h.d($,"dot",function(){return V5}),h.d($,"fixedDot",function(){return H5}),h.d($,"mesh",function(){return W5}),h.d($,"doubleMesh",function(){return $5});var W={};h.r(W),h.d(W,"outline",function(){return K5}),h.d(W,"highlight",function(){return X5}),h.d(W,"blur",function(){return Y5}),h.d(W,"dropShadow",function(){return J5}),h.d(W,"grayScale",function(){return Z5}),h.d(W,"sepia",function(){return Q5}),h.d(W,"saturate",function(){return q5}),h.d(W,"hueRotate",function(){return eB}),h.d(W,"invert",function(){return tB}),h.d(W,"brightness",function(){return nB}),h.d(W,"contrast",function(){return rB});var Y={};h.r(Y),h.d(Y,"flipX",function(){return LP}),h.d(Y,"flipY",function(){return _P}),h.d(Y,"flipXY",function(){return FP}),h.d(Y,"watermark",function(){return aB});var ee={};h.r(ee),h.d(ee,"className",function(){return iB}),h.d(ee,"opacity",function(){return oB}),h.d(ee,"stroke",function(){return uB});var ne={};h.r(ne),h.d(ne,"absolute",function(){return lB}),h.d(ne,"ellipse",function(){return cB}),h.d(ne,"ellipseSpread",function(){return fB}),h.d(ne,"line",function(){return hB}),h.d(ne,"left",function(){return vB}),h.d(ne,"right",function(){return pB}),h.d(ne,"top",function(){return gB}),h.d(ne,"bottom",function(){return mB});var ie={};h.r(ie),h.d(ie,"manual",function(){return bB}),h.d(ie,"left",function(){return CB}),h.d(ie,"right",function(){return EB}),h.d(ie,"top",function(){return OB}),h.d(ie,"bottom",function(){return wB}),h.d(ie,"outside",function(){return xB}),h.d(ie,"outsideOriented",function(){return SB}),h.d(ie,"inside",function(){return AB}),h.d(ie,"insideOriented",function(){return MB}),h.d(ie,"radial",function(){return TB}),h.d(ie,"radialOriented",function(){return PB});var re={};h.r(re),h.d(re,"noop",function(){return IB}),h.d(re,"pinRelative",function(){return jB}),h.d(re,"pinAbsolute",function(){return LB});var J={};h.r(J),h.d(J,"center",function(){return WB}),h.d(J,"top",function(){return $B}),h.d(J,"bottom",function(){return KB}),h.d(J,"left",function(){return XB}),h.d(J,"right",function(){return YB}),h.d(J,"topLeft",function(){return JB}),h.d(J,"topRight",function(){return ZB}),h.d(J,"bottomLeft",function(){return QB}),h.d(J,"bottomRight",function(){return qB}),h.d(J,"orth",function(){return tG}),h.d(J,"nodeCenter",function(){return nG}),h.d(J,"midSide",function(){return aG});var ce={};h.r(ce),h.d(ce,"ratio",function(){return iG}),h.d(ce,"length",function(){return oG}),h.d(ce,"orth",function(){return lG}),h.d(ce,"closest",function(){return sG});var G={};h.r(G),h.d(G,"bbox",function(){return rk}),h.d(G,"rect",function(){return fG}),h.d(G,"boundary",function(){return dG}),h.d(G,"anchor",function(){return vG});var Z={};h.r(Z),h.d(Z,"normal",function(){return pG}),h.d(Z,"oneSide",function(){return gG}),h.d(Z,"orth",function(){return ok}),h.d(Z,"metro",function(){return IG}),h.d(Z,"manhattan",function(){return gk}),h.d(Z,"er",function(){return RG}),h.d(Z,"loop",function(){return NG});var fe={};h.r(fe),h.d(fe,"normal",function(){return jG}),h.d(fe,"loop",function(){return LG}),h.d(fe,"rounded",function(){return _G}),h.d(fe,"smooth",function(){return FG}),h.d(fe,"jumpover",function(){return VG});var se={};h.r(se),h.d(se,"Attr",function(){return zc}),h.d(se,"Grid",function(){return Cd}),h.d(se,"Filter",function(){return Av}),h.d(se,"Background",function(){return Zp}),h.d(se,"Highlighter",function(){return Df}),h.d(se,"PortLayout",function(){return ph}),h.d(se,"PortLabelLayout",function(){return Mv}),h.d(se,"NodeTool",function(){return Dv}),h.d(se,"EdgeTool",function(){return Iv}),h.d(se,"Marker",function(){return bd}),h.d(se,"NodeAnchor",function(){return Rv}),h.d(se,"EdgeAnchor",function(){return Nv}),h.d(se,"ConnectionPoint",function(){return jv}),h.d(se,"Router",function(){return Od}),h.d(se,"Connector",function(){return bh}),h.d(se,"ConnectionStrategy",function(){return kv}),h.d(se,"Registry",function(){return Xo}),h.d(se,"create",function(){return HG});var ve={};h.r(ve),h.d(ve,"Empty",function(){return qG}),h.d(ve,"Rect",function(){return t8}),h.d(ve,"HeaderedRect",function(){return n8}),h.d(ve,"Circle",function(){return r8}),h.d(ve,"Cylinder",function(){return a8}),h.d(ve,"Ellipse",function(){return i8}),h.d(ve,"Polygon",function(){return s8}),h.d(ve,"Polyline",function(){return u8}),h.d(ve,"Path",function(){return c8}),h.d(ve,"TextBlock",function(){return d8}),h.d(ve,"Image",function(){return h8}),h.d(ve,"BorderedImage",function(){return v8}),h.d(ve,"EmbeddedImage",function(){return p8}),h.d(ve,"InscribedImage",function(){return g8}),h.d(ve,"Edge",function(){return fS}),h.d(ve,"ShadowEdge",function(){return m8}),h.d(ve,"DoubleEdge",function(){return y8}),h.d(ve,"HTML",function(){return Vc});var ae={};h.r(ae),h.d(ae,"AutoSave",function(){return R1}),h.d(ae,"Clipboard",function(){return Rk}),h.d(ae,"Halo",function(){return B1}),h.d(ae,"MiniMap",function(){return hS}),h.d(ae,"Scroller",function(){return h0}),h.d(ae,"Selection",function(){return L1}),h.d(ae,"Snapline",function(){return vS}),h.d(ae,"Transform",function(){return pS}),h.d(ae,"Knob",function(){return dS}),h.d(ae,"Dnd",function(){return tg}),h.d(ae,"Stencil",function(){return wS});var j={};h.r(j),h.d(j,"X6_NODE_PORTAL_NODE_VIEW",function(){return sz}),h.d(j,"XFLOW_PREFIX_CLS",function(){return SS}),h.d(j,"MIN_ZOOM",function(){return AS}),h.d(j,"MAX_ZOOM",function(){return MS}),h.d(j,"XFLOW_DEFAULT_NODE",function(){return z1}),h.d(j,"XFLOW_DEFAULT_GROUP_NODE",function(){return Fk}),h.d(j,"XFLOW_DEFAULT_EDGE",function(){return TS}),h.d(j,"LOCAL_STORAGE_KEY",function(){return ng}),h.d(j,"DEFAULT_NODE_HEIGHT",function(){return Bk}),h.d(j,"DEFAULT_NODE_WIDTH",function(){return Gk}),h.d(j,"XFLOW_GROUP_DEFAULT_COLLAPSED_SIZE",function(){return PS});var de={};h.r(de),h.d(de,"isModelExistUtil",function(){return DU}),h.d(de,"getModelUtil",function(){return os}),h.d(de,"useModelValueUtil",function(){return ss}),h.d(de,"GRAPH_ENABLE_MULTI_SELECT",function(){return a2}),h.d(de,"GRAPH_FULLSCREEN",function(){return D0}),h.d(de,"IS_NODE_SELECTED",function(){return i2}),h.d(de,"IS_GROUP_SELECTED",function(){return o2}),h.d(de,"IS_NORMAL_NODES_SELECTED",function(){return s2}),h.d(de,"SELECTED_CELL",function(){return u2}),h.d(de,"SELECTED_CELLS",function(){return Ah}),h.d(de,"SELECTED_NODE",function(){return l2}),h.d(de,"SELECTED_NODES",function(){return $v}),h.d(de,"SELECTED_EDGES",function(){return tA}),h.d(de,"SELECTED_GROUPS",function(){return c2}),h.d(de,"CONTEXTMENU_NODE",function(){return nA}),h.d(de,"CONTEXTMENU_EDGE",function(){return rA}),h.d(de,"CONTEXTMENU_TARGET",function(){return f2}),h.d(de,"GRAPH_META",function(){return d2}),h.d(de,"GRAPH_SCALE",function(){return h2}),h.d(de,"COMMAND_REDOABLE",function(){return v2}),h.d(de,"COMMAND_UNDOABLE",function(){return p2}),h.d(de,"COMMAND_GLOBALS",function(){return g2}),h.d(de,"HISTORY_UNDOABLE",function(){return m2}),h.d(de,"HISTORY_REDOABLE",function(){return y2});var ke={};h.r(ke),h.d(ke,"ProcessNode",function(){return PZ}),h.d(ke,"DecisionNode",function(){return kZ}),h.d(ke,"ConnectorNode",function(){return DZ}),h.d(ke,"DataIONode",function(){return IZ}),h.d(ke,"TerminalNode",function(){return RZ}),h.d(ke,"DatabaseNode",function(){return NZ}),h.d(ke,"HardDiskNode",function(){return jZ}),h.d(ke,"StroedDataNode",function(){return LZ}),h.d(ke,"DocumentNode",function(){return _Z}),h.d(ke,"MultiDocumentNode",function(){return FZ}),h.d(ke,"PredefinedProcessNode",function(){return BZ}),h.d(ke,"ExtractNode",function(){return GZ}),h.d(ke,"MergeNode",function(){return zZ}),h.d(ke,"OrNode",function(){return UZ}),h.d(ke,"ManualInputNode",function(){return VZ}),h.d(ke,"PreparationNode",function(){return HZ}),h.d(ke,"DelayNode",function(){return WZ}),h.d(ke,"ManualOperationNode",function(){return $Z}),h.d(ke,"DisplayNode",function(){return KZ}),h.d(ke,"OffPageLinkNode",function(){return XZ}),h.d(ke,"NoteLeftNode",function(){return YZ}),h.d(ke,"NoteRightNode",function(){return JZ}),h.d(ke,"InternalStorageNode",function(){return ZZ}),h.d(ke,"TextNode",function(){return QZ});var he=h("vlGe"),Oe;(function(o){var i;(function(n){n.TOP="top",n.BOTTOM="bottom",n.RIGHT="right",n.LEFT="left"})(i=o.AnchorGroup||(o.AnchorGroup={}));var r;(function(n){n.INPUT="input",n.OUTPUT="output"})(r=o.AnchorType||(o.AnchorType={}))})(Oe||(Oe={}));var We=h("oBTY"),D=h("qLMh"),je=h("tJVT");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var pt=function(i,r){return pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t])},pt(i,r)};function nt(o,i){pt(o,i);function r(){this.constructor=o}o.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}var Lt=function(){return Lt=Object.assign||function(r){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])}return r},Lt.apply(this,arguments)};function Gt(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r}function $e(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t}function jt(o,i){return function(r,n){i(r,n,o)}}function Be(o,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(o,i)}function pe(o,i,r,n){function e(t){return t instanceof r?t:new r(function(a){a(t)})}return new(r||(r=Promise))(function(t,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?t(c.value):e(c.value).then(s,u)}l((n=n.apply(o,i||[])).next())})}function un(o,i){var r={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},n,e,t,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,e&&(t=l[0]&2?e.return:l[0]?e.throw||((t=e.return)&&t.call(e),0):e.next)&&!(t=t.call(e,l[1])).done)return t;switch(e=0,t&&(l=[l[0]&2,t.value]),l[0]){case 0:case 1:t=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,e=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(t=r.trys,!(t=t.length>0&&t[t.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!t||l[1]>t[0]&&l[1]<t[3])){r.label=l[1];break}if(l[0]===6&&r.label<t[1]){r.label=t[1],t=l;break}if(t&&r.label<t[2]){r.label=t[2],r.ops.push(l);break}t[2]&&r.ops.pop(),r.trys.pop();continue}l=i.call(o,r)}catch(c){l=[6,c],e=0}finally{n=t=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ln(o,i,r,n){n===void 0&&(n=r),o[n]=i[r]}function Fn(o,i){for(var r in o)r!=="default"&&!i.hasOwnProperty(r)&&(i[r]=o[r])}function Ft(o){var i=typeof Symbol=="function"&&Symbol.iterator,r=i&&o[i],n=0;if(r)return r.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&n>=o.length&&(o=void 0),{value:o&&o[n++],done:!o}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pn(o,i){var r=typeof Symbol=="function"&&o[Symbol.iterator];if(!r)return o;var n=r.call(o),e,t=[],a;try{for(;(i===void 0||i-- >0)&&!(e=n.next()).done;)t.push(e.value)}catch(s){a={error:s}}finally{try{e&&!e.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return t}function lr(){for(var o=[],i=0;i<arguments.length;i++)o=o.concat(Pn(arguments[i]));return o}function hn(){for(var o=0,i=0,r=arguments.length;i<r;i++)o+=arguments[i].length;for(var n=Array(o),e=0,i=0;i<r;i++)for(var t=arguments[i],a=0,s=t.length;a<s;a++,e++)n[e]=t[a];return n}function On(o){return this instanceof On?(this.v=o,this):new On(o)}function jn(o,i,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(o,i||[]),e,t=[];return e={},a("next"),a("throw"),a("return"),e[Symbol.asyncIterator]=function(){return this},e;function a(d){n[d]&&(e[d]=function(v){return new Promise(function(m,y){t.push([d,v,m,y])>1||s(d,v)})})}function s(d,v){try{u(n[d](v))}catch(m){f(t[0][3],m)}}function u(d){d.value instanceof On?Promise.resolve(d.value.v).then(l,c):f(t[0][2],d)}function l(d){s("next",d)}function c(d){s("throw",d)}function f(d,v){d(v),t.shift(),t.length&&s(t[0][0],t[0][1])}}function Dn(o){var i,r;return i={},n("next"),n("throw",function(e){throw e}),n("return"),i[Symbol.iterator]=function(){return this},i;function n(e,t){i[e]=o[e]?function(a){return(r=!r)?{value:On(o[e](a)),done:e==="return"}:t?t(a):a}:t}}function ft(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=o[Symbol.asyncIterator],r;return i?i.call(o):(o=typeof Ft=="function"?Ft(o):o[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(t){r[t]=o[t]&&function(a){return new Promise(function(s,u){a=o[t](a),e(s,u,a.done,a.value)})}}function e(t,a,s,u){Promise.resolve(u).then(function(l){t({value:l,done:s})},a)}}function Ut(o,i){return Object.defineProperty?Object.defineProperty(o,"raw",{value:i}):o.raw=i,o}function ct(o){if(o&&o.__esModule)return o;var i={};if(o!=null)for(var r in o)Object.hasOwnProperty.call(o,r)&&(i[r]=o[r]);return i.default=o,i}function Ct(o){return o&&o.__esModule?o:{default:o}}function kt(o,i){if(!i.has(o))throw new TypeError("attempted to get private field on non-instance");return i.get(o)}function yt(o,i,r){if(!i.has(o))throw new TypeError("attempted to set private field on non-instance");return i.set(o,r),r}var tt=h("q1tI"),I=h.n(tt),Mn=h("TSYQ"),dt=h.n(Mn),vt=h("mNvP"),Bt=h("rAM+"),me=h("fWQN"),ue=h("mtLc"),Re=h("jrin"),Rt=h("EVdn"),Kt=h.n(Rt),Bn=h("si6p"),Nr=!1,Rn=!1,Cr=!1,tr=!1,jr=!1,zr=!1,Ua=!1,oa=!1,Za=!1,ba=!1,Pa=!1,ri=!1,li=!1,ka=!1,ai=!1,Qa=!1;if(typeof navigator=="object"){var aa=navigator.userAgent;Nr=aa.indexOf("Macintosh")>=0,Rn=!!aa.match(/(iPad|iPhone|iPod)/g),Cr=aa.indexOf("Windows")>=0,tr=aa.indexOf("MSIE")>=0,jr=!!aa.match(/Trident\/7\./),zr=!!aa.match(/Edge\//),Ua=aa.indexOf("Mozilla/")>=0&&aa.indexOf("MSIE")<0&&aa.indexOf("Edge/")<0,Za=aa.indexOf("Chrome/")>=0&&aa.indexOf("Edge/")<0,ba=aa.indexOf("Opera/")>=0||aa.indexOf("OPR/")>=0,Pa=aa.indexOf("Firefox/")>=0,ri=aa.indexOf("AppleWebKit/")>=0&&aa.indexOf("Chrome/")<0&&aa.indexOf("Edge/")<0,typeof document=="object"&&(Qa=!document.createElementNS||"".concat(document.createElementNS("http://www.w3.org/2000/svg","foreignObject"))!=="[object SVGForeignObjectElement]"||aa.indexOf("Opera/")>=0)}if(typeof window=="object"&&(oa=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,ka=window.PointerEvent!=null&&!Nr),typeof document=="object"){li="ontouchstart"in document.documentElement;try{var Gi=Object.defineProperty({},"passive",{get:function(){ai=!0}}),mo=document.createElement("div");mo.addEventListener&&mo.addEventListener("click",function(){},Gi)}catch(o){}}var sa;if(function(o){o.IS_MAC=Nr,o.IS_IOS=Rn,o.IS_WINDOWS=Cr,o.IS_IE=tr,o.IS_IE11=jr,o.IS_EDGE=zr,o.IS_NETSCAPE=Ua,o.IS_CHROME_APP=oa,o.IS_CHROME=Za,o.IS_OPERA=ba,o.IS_FIREFOX=Pa,o.IS_SAFARI=ri,o.SUPPORT_TOUCH=li,o.SUPPORT_POINTER=ka,o.SUPPORT_PASSIVE=ai,o.NO_FOREIGNOBJECT=Qa,o.SUPPORT_FOREIGNOBJECT=!o.NO_FOREIGNOBJECT}(sa||(sa={})),function(o){function i(){var t=window.module;return t!=null&&t.hot!=null&&t.hot.status!=null?t.hot.status():"unkonwn"}o.getHMRStatus=i;function r(){return i()==="apply"}o.isApplyingHMR=r;var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function e(t){var a=document.createElement(n[t]||"div"),s="on".concat(t),u=s in a;return u||(a.setAttribute(s,"return;"),u=typeof a[s]=="function"),u}o.isEventSupported=e}(sa||(sa={})),sa.SUPPORT_PASSIVE){Kt.a.event.special.touchstart={setup:function(i,r,n){if(!this.addEventListener)return!1;this.addEventListener("touchstart",n,{passive:!0})}};var yi=Kt.a.event.special.mousewheel;if(yi){var Io=yi.setup;yi.setup=function(){var o=this,i=this.addEventListener;if(!i)return!1;this.addEventListener=function(r,n){i.call(o,r,n,{passive:!0})},Io.call(this),this.addEventListener=i}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),function(o){o.forEach(function(i){Object.prototype.hasOwnProperty.call(i,"append")||Object.defineProperty(i,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){for(var n=document.createDocumentFragment(),e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];t.forEach(function(s){var u=s instanceof Node;n.appendChild(u?s:document.createTextNode(String(s)))}),this.appendChild(n)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype]);var Pi=function(i){return i&&i===i.window},ao=function(i){return!Array.isArray(i)&&i-parseFloat(i)+1>=0},ki=Array.isArray,ot=ki,It=h("Ju5/"),Ne=It.a.Symbol,St=Ne,Ve=Object.prototype,Xt=Ve.hasOwnProperty,gn=Ve.toString,pn=St?St.toStringTag:void 0;function en(o){var i=Xt.call(o,pn),r=o[pn];try{o[pn]=void 0;var n=!0}catch(t){}var e=gn.call(o);return n&&(i?o[pn]=r:delete o[pn]),e}var In=en,$r=Object.prototype,da=$r.toString;function Oa(o){return da.call(o)}var Ka=Oa,bi="[object Null]",_a="[object Undefined]",ti=St?St.toStringTag:void 0;function tn(o){return o==null?o===void 0?_a:bi:ti&&ti in Object(o)?In(o):Ka(o)}var mn=tn;function nr(o){var i=typeof o;return o!=null&&(i=="object"||i=="function")}var or=nr,Zr="[object AsyncFunction]",Vi="[object Function]",Da="[object GeneratorFunction]",Ea="[object Proxy]";function ta(o){if(!or(o))return!1;var i=mn(o);return i==Vi||i==Da||i==Zr||i==Ea}var ha=ta,Kr=9007199254740991;function qi(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=Kr}var So=qi;function Js(o){return o!=null&&So(o.length)&&!ha(o)}var Ro=Js,Zo=It.a["__core-js_shared__"],Ss=Zo,gs=function(){var o=/[^.]+$/.exec(Ss&&Ss.keys&&Ss.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function ou(o){return!!gs&&gs in o}var As=ou,Ms=Function.prototype,Vo=Ms.toString;function us(o){if(o!=null){try{return Vo.call(o)}catch(i){}try{return o+""}catch(i){}}return""}var Ki=us,Eu=/[\\^$.*+?()[\]{}|]/g,su=/^\[object .+?Constructor\]$/,Zs=Function.prototype,Is=Object.prototype,gl=Zs.toString,Vl=Is.hasOwnProperty,uu=RegExp("^"+gl.call(Vl).replace(Eu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rs(o){if(!or(o)||As(o))return!1;var i=ha(o)?uu:su;return i.test(Ki(o))}var el=Rs;function tl(o,i){return o==null?void 0:o[i]}var nl=tl;function Hl(o,i){var r=nl(o,i);return el(r)?r:void 0}var Ts=Hl,Wl=Ts(Object,"create"),Ou=Wl;function Nu(){this.__data__=Ou?Ou(null):{},this.size=0}var Qs=Nu;function rl(o){var i=this.has(o)&&delete this.__data__[o];return this.size-=i?1:0,i}var sf=rl,ml="__lodash_hash_undefined__",al=Object.prototype,pc=al.hasOwnProperty;function Et(o){var i=this.__data__;if(Ou){var r=i[o];return r===ml?void 0:r}return pc.call(i,o)?i[o]:void 0}var mt=Et,wt=Object.prototype,$t=wt.hasOwnProperty;function _t(o){var i=this.__data__;return Ou?i[o]!==void 0:$t.call(i,o)}var xn=_t,Ln="__lodash_hash_undefined__";function Yn(o,i){var r=this.__data__;return this.size+=this.has(o)?0:1,r[o]=Ou&&i===void 0?Ln:i,this}var Ar=Yn;function er(o){var i=-1,r=o==null?0:o.length;for(this.clear();++i<r;){var n=o[i];this.set(n[0],n[1])}}er.prototype.clear=Qs,er.prototype.delete=sf,er.prototype.get=mt,er.prototype.has=xn,er.prototype.set=Ar;var Mr=er;function rr(){this.__data__=[],this.size=0}var Rr=rr;function Dr(o,i){return o===i||o!==o&&i!==i}var qr=Dr;function qa(o,i){for(var r=o.length;r--;)if(qr(o[r][0],i))return r;return-1}var Gr=qa,K=Array.prototype,P=K.splice;function H(o){var i=this.__data__,r=Gr(i,o);if(r<0)return!1;var n=i.length-1;return r==n?i.pop():P.call(i,r,1),--this.size,!0}var X=H;function le(o){var i=this.__data__,r=Gr(i,o);return r<0?void 0:i[r][1]}var be=le;function xe(o){return Gr(this.__data__,o)>-1}var Ge=xe;function it(o,i){var r=this.__data__,n=Gr(r,o);return n<0?(++this.size,r.push([o,i])):r[n][1]=i,this}var bt=it;function bn(o){var i=-1,r=o==null?0:o.length;for(this.clear();++i<r;){var n=o[i];this.set(n[0],n[1])}}bn.prototype.clear=Rr,bn.prototype.delete=X,bn.prototype.get=be,bn.prototype.has=Ge,bn.prototype.set=bt;var _n=bn,Or=Ts(It.a,"Map"),Cn=Or;function ar(){this.size=0,this.__data__={hash:new Mr,map:new(Cn||_n),string:new Mr}}var Ca=ar;function Xr(o){var i=typeof o;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?o!=="__proto__":o===null}var Fi=Xr;function Qo(o,i){var r=o.__data__;return Fi(i)?r[typeof i=="string"?"string":"hash"]:r.map}var lo=Qo;function Ho(o){var i=lo(this,o).delete(o);return this.size-=i?1:0,i}var Ao=Ho;function Ia(o){return lo(this,o).get(o)}var Ns=Ia;function Ai(o){return lo(this,o).has(o)}var Yi=Ai;function Ji(o,i){var r=lo(this,o),n=r.size;return r.set(o,i),this.size+=r.size==n?0:1,this}var yl=Ji;function bo(o){var i=-1,r=o==null?0:o.length;for(this.clear();++i<r;){var n=o[i];this.set(n[0],n[1])}}bo.prototype.clear=Ca,bo.prototype.delete=Ao,bo.prototype.get=Ns,bo.prototype.has=Yi,bo.prototype.set=yl;var ls=bo,wu="__lodash_hash_undefined__";function xu(o){return this.__data__.set(o,wu),this}var qs=xu;function Wo(o){return this.__data__.has(o)}var js=Wo;function $o(o){var i=-1,r=o==null?0:o.length;for(this.__data__=new ls;++i<r;)this.add(o[i])}$o.prototype.add=$o.prototype.push=qs,$o.prototype.has=js;var jo=$o;function il(o,i,r,n){for(var e=o.length,t=r+(n?1:-1);n?t--:++t<e;)if(i(o[t],t,o))return t;return-1}var Ls=il;function Ni(o){return o!==o}var Su=Ni;function ms(o,i,r){for(var n=r-1,e=o.length;++n<e;)if(o[n]===i)return n;return-1}var lu=ms;function uf(o,i,r){return i===i?lu(o,i,r):Ls(o,Su,r)}var $l=uf;function gc(o,i){var r=o==null?0:o.length;return!!r&&$l(o,i,0)>-1}var cs=gc;function Kl(o,i,r){for(var n=-1,e=o==null?0:o.length;++n<e;)if(r(i,o[n]))return!0;return!1}var eu=Kl;function bl(o,i){return o.has(i)}var b=bl,N=Ts(It.a,"Set"),te=N;function Ee(){}var Se=Ee;function _e(o){var i=-1,r=Array(o.size);return o.forEach(function(n){r[++i]=n}),r}var Qe=_e,rt=1/0,Tt=te&&1/Qe(new te([,-0]))[1]==rt?function(o){return new te(o)}:Se,zt=Tt,on=200;function He(o,i,r){var n=-1,e=cs,t=o.length,a=!0,s=[],u=s;if(r)a=!1,e=eu;else if(t>=on){var l=i?null:zt(o);if(l)return Qe(l);a=!1,e=b,u=new jo}else u=i?[]:s;e:for(;++n<t;){var c=o[n],f=i?i(c):c;if(c=r||c!==0?c:0,a&&f===f){for(var d=u.length;d--;)if(u[d]===f)continue e;i&&u.push(f),s.push(c)}else e(u,f,r)||(u!==s&&u.push(f),s.push(c))}return s}var Me=He;function Ye(o){return o&&o.length?Me(o):[]}var ut=Ye;function De(o,i){for(var r=-1,n=i.length,e=o.length;++r<n;)o[e+r]=i[r];return o}var Le=De;function et(o){return o!=null&&typeof o=="object"}var Qt=et,yn="[object Arguments]";function Vn(o){return Qt(o)&&mn(o)==yn}var sr=Vn,Zn=Object.prototype,ia=Zn.hasOwnProperty,na=Zn.propertyIsEnumerable,ea=sr(function(){return arguments}())?sr:function(o){return Qt(o)&&ia.call(o,"callee")&&!na.call(o,"callee")},la=ea,si=St?St.isConcatSpreadable:void 0;function Ra(o){return ot(o)||la(o)||!!(si&&o&&o[si])}var ii=Ra;function ma(o,i,r,n,e){var t=-1,a=o.length;for(r||(r=ii),e||(e=[]);++t<a;){var s=o[t];i>0&&r(s)?i>1?ma(s,i-1,r,n,e):Le(e,s):n||(e[e.length]=s)}return e}var fa=ma;function io(o){return o}var _s=io;function Xl(o,i,r){switch(r.length){case 0:return o.call(i);case 1:return o.call(i,r[0]);case 2:return o.call(i,r[0],r[1]);case 3:return o.call(i,r[0],r[1],r[2])}return o.apply(i,r)}var mc=Xl,Jh=Math.max;function ip(o,i,r){return i=Jh(i===void 0?o.length-1:i,0),function(){for(var n=arguments,e=-1,t=Jh(n.length-i,0),a=Array(t);++e<t;)a[e]=n[i+e];e=-1;for(var s=Array(i+1);++e<i;)s[e]=n[e];return s[i]=r(a),mc(o,this,s)}}var lf=ip;function Yl(o){return function(){return o}}var Cl=Yl,qo=function(){try{var o=Ts(Object,"defineProperty");return o({},"",{}),o}catch(i){}}(),Jl=qo,Zh=Jl?function(o,i){return Jl(o,"toString",{configurable:!0,enumerable:!1,value:Cl(i),writable:!0})}:_s,Zl=Zh,Uf=800,Qh=16,Vf=Date.now;function yc(o){var i=0,r=0;return function(){var n=Vf(),e=Qh-(n-r);if(r=n,e>0){if(++i>=Uf)return arguments[0]}else i=0;return o.apply(void 0,arguments)}}var jd=yc,Wg=jd(Zl),Ld=Wg;function op(o,i){return Ld(lf(o,i,_s),o+"")}var ju=op;function Hf(o){return Qt(o)&&Ro(o)}var bc=Hf,$g=ju(function(o){return Me(fa(o,1,bc,!0))}),Wf=$g,Kg="[object Symbol]";function Ql(o){return typeof o=="symbol"||Qt(o)&&mn(o)==Kg}var Xi=Ql,ys=4294967295,sp=ys-1,up=Math.floor,qh=Math.min;function lp(o,i,r,n){var e=0,t=o==null?0:o.length;if(t===0)return 0;i=r(i);for(var a=i!==i,s=i===null,u=Xi(i),l=i===void 0;e<t;){var c=up((e+t)/2),f=r(o[c]),d=f!==void 0,v=f===null,m=f===f,y=Xi(f);if(a)var C=n||m;else l?C=m&&(n||d):s?C=m&&d&&(n||!v):u?C=m&&d&&!v&&(n||!y):v||y?C=!1:C=n?f<=i:f<i;C?e=c+1:t=c}return qh(t,sp)}var $f=lp,cf=4294967295,_d=cf>>>1;function Cc(o,i,r){var n=0,e=o==null?n:o.length;if(typeof i=="number"&&i===i&&e<=_d){for(;n<e;){var t=n+e>>>1,a=o[t];a!==null&&!Xi(a)&&(r?a<=i:a<i)?n=t+1:e=t}return e}return $f(o,i,_s,r)}var Fs=Cc;function ff(o,i){return Fs(o,i)}var Fd=ff;function tu(){this.__data__=new _n,this.size=0}var ev=tu;function Ec(o){var i=this.__data__,r=i.delete(o);return this.size=i.size,r}var Bd=Ec;function cp(o){return this.__data__.get(o)}var fp=cp;function Kf(o){return this.__data__.has(o)}var df=Kf,tv=200;function Ue(o,i){var r=this.__data__;if(r instanceof _n){var n=r.__data__;if(!Cn||n.length<tv-1)return n.push([o,i]),this.size=++r.size,this;r=this.__data__=new ls(n)}return r.set(o,i),this.size=r.size,this}var hf=Ue;function El(o){var i=this.__data__=new _n(o);this.size=i.size}El.prototype.clear=ev,El.prototype.delete=Bd,El.prototype.get=fp,El.prototype.has=df,El.prototype.set=hf;var bs=El;function Di(o,i){for(var r=-1,n=o==null?0:o.length;++r<n;)if(i(o[r],r,o))return!0;return!1}var Xg=Di,Yg=1,dp=2;function ql(o,i,r,n,e,t){var a=r&Yg,s=o.length,u=i.length;if(s!=u&&!(a&&u>s))return!1;var l=t.get(o),c=t.get(i);if(l&&c)return l==i&&c==o;var f=-1,d=!0,v=r&dp?new jo:void 0;for(t.set(o,i),t.set(i,o);++f<s;){var m=o[f],y=i[f];if(n)var C=a?n(y,m,f,i,o,t):n(m,y,f,o,i,t);if(C!==void 0){if(C)continue;d=!1;break}if(v){if(!Xg(i,function(O,x){if(!b(v,x)&&(m===O||e(m,O,r,n,t)))return v.push(x)})){d=!1;break}}else if(!(m===y||e(m,y,r,n,t))){d=!1;break}}return t.delete(o),t.delete(i),d}var hp=ql,Jg=It.a.Uint8Array,vf=Jg;function Gd(o){var i=-1,r=Array(o.size);return o.forEach(function(n,e){r[++i]=[e,n]}),r}var Zg=Gd,Ol=1,Qg=2,qg="[object Boolean]",em="[object Date]",vp="[object Error]",tm="[object Map]",wl="[object Number]",nm="[object RegExp]",rm="[object Set]",am="[object String]",pf="[object Symbol]",im="[object ArrayBuffer]",Oc="[object DataView]",nv=St?St.prototype:void 0,Xf=nv?nv.valueOf:void 0;function Lu(o,i,r,n,e,t,a){switch(r){case Oc:if(o.byteLength!=i.byteLength||o.byteOffset!=i.byteOffset)return!1;o=o.buffer,i=i.buffer;case im:return!(o.byteLength!=i.byteLength||!t(new vf(o),new vf(i)));case qg:case em:case wl:return qr(+o,+i);case vp:return o.name==i.name&&o.message==i.message;case nm:case am:return o==i+"";case tm:var s=Zg;case rm:var u=n&Ol;if(s||(s=Qe),o.size!=i.size&&!u)return!1;var l=a.get(o);if(l)return l==i;n|=Qg,a.set(o,i);var c=hp(s(o),s(i),n,e,t,a);return a.delete(o),c;case pf:if(Xf)return Xf.call(o)==Xf.call(i)}return!1}var pp=Lu;function om(o,i,r){var n=i(o);return ot(o)?n:Le(n,r(o))}var gp=om;function sm(o,i){for(var r=-1,n=o==null?0:o.length,e=0,t=[];++r<n;){var a=o[r];i(a,r,o)&&(t[e++]=a)}return t}var um=sm;function mp(){return[]}var wc=mp,lm=Object.prototype,zd=lm.propertyIsEnumerable,Ud=Object.getOwnPropertySymbols,ol=Ud?function(o){return o==null?[]:(o=Object(o),um(Ud(o),function(i){return zd.call(o,i)}))}:wc,_u=ol;function cm(o,i){for(var r=-1,n=Array(o);++r<o;)n[r]=i(r);return n}var xc=cm,Sc=h("WOAq"),nu=9007199254740991,Yf=/^(?:0|[1-9]\d*)$/;function xl(o,i){var r=typeof o;return i=i==null?nu:i,!!i&&(r=="number"||r!="symbol"&&Yf.test(o))&&o>-1&&o%1==0&&o<i}var Cs=xl,rv="[object Arguments]",Vd="[object Array]",Jf="[object Boolean]",gf="[object Date]",Sl="[object Error]",av="[object Function]",yp="[object Map]",Zf="[object Number]",iv="[object Object]",Hd="[object RegExp]",fs="[object Set]",Wd="[object String]",ov="[object WeakMap]",Fu="[object ArrayBuffer]",Qf="[object DataView]",qf="[object Float32Array]",ec="[object Float64Array]",$d="[object Int8Array]",Es="[object Int16Array]",Kd="[object Int32Array]",sv="[object Uint8Array]",bp="[object Uint8ClampedArray]",Cp="[object Uint16Array]",ed="[object Uint32Array]",po={};po[qf]=po[ec]=po[$d]=po[Es]=po[Kd]=po[sv]=po[bp]=po[Cp]=po[ed]=!0,po[rv]=po[Vd]=po[Fu]=po[Jf]=po[Qf]=po[gf]=po[Sl]=po[av]=po[yp]=po[Zf]=po[iv]=po[Hd]=po[fs]=po[Wd]=po[ov]=!1;function mf(o){return Qt(o)&&So(o.length)&&!!po[mn(o)]}var Xd=mf;function uv(o){return function(i){return o(i)}}var sl=uv,cu=h("xutz"),td=cu.a&&cu.a.isTypedArray,Al=td?sl(td):Xd,ul=Al,tc=Object.prototype,nd=tc.hasOwnProperty;function rd(o,i){var r=ot(o),n=!r&&la(o),e=!r&&!n&&Object(Sc.a)(o),t=!r&&!n&&!e&&ul(o),a=r||n||e||t,s=a?xc(o.length,String):[],u=s.length;for(var l in o)(i||nd.call(o,l))&&!(a&&(l=="length"||e&&(l=="offset"||l=="parent")||t&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Cs(l,u)))&&s.push(l);return s}var nc=rd,rc=Object.prototype;function Ml(o){var i=o&&o.constructor,r=typeof i=="function"&&i.prototype||rc;return o===r}var Ac=Ml;function yf(o,i){return function(r){return o(i(r))}}var Mc=yf,Yd=Mc(Object.keys,Object),Jd=Yd,Tl=Object.prototype,bf=Tl.hasOwnProperty;function Ep(o){if(!Ac(o))return Jd(o);var i=[];for(var r in Object(o))bf.call(o,r)&&r!="constructor"&&i.push(r);return i}var lv=Ep;function Op(o){return Ro(o)?nc(o):lv(o)}var ac=Op;function wp(o){return gp(o,ac,_u)}var ad=wp,Tc=1,cv=Object.prototype,fm=cv.hasOwnProperty;function fv(o,i,r,n,e,t){var a=r&Tc,s=ad(o),u=s.length,l=ad(i),c=l.length;if(u!=c&&!a)return!1;for(var f=u;f--;){var d=s[f];if(!(a?d in i:fm.call(i,d)))return!1}var v=t.get(o),m=t.get(i);if(v&&m)return v==i&&m==o;var y=!0;t.set(o,i),t.set(i,o);for(var C=a;++f<u;){d=s[f];var O=o[d],x=i[d];if(n)var T=a?n(x,O,d,i,o,t):n(O,x,d,o,i,t);if(!(T===void 0?O===x||e(O,x,r,n,t):T)){y=!1;break}C||(C=d=="constructor")}if(y&&!C){var L=o.constructor,_=i.constructor;L!=_&&"constructor"in o&&"constructor"in i&&!(typeof L=="function"&&L instanceof L&&typeof _=="function"&&_ instanceof _)&&(y=!1)}return t.delete(o),t.delete(i),y}var ci=fv,dm=Ts(It.a,"DataView"),dv=dm,id=Ts(It.a,"Promise"),Zd=id,hm=Ts(It.a,"WeakMap"),hv=hm,fu="[object Map]",vm="[object Object]",od="[object Promise]",Qd="[object Set]",sd="[object WeakMap]",Cf="[object DataView]",Ps=Ki(dv),Bu=Ki(Cn),ud=Ki(Zd),ld=Ki(te),Pc=Ki(hv),Gu=mn;(dv&&Gu(new dv(new ArrayBuffer(1)))!=Cf||Cn&&Gu(new Cn)!=fu||Zd&&Gu(Zd.resolve())!=od||te&&Gu(new te)!=Qd||hv&&Gu(new hv)!=sd)&&(Gu=function(i){var r=mn(i),n=r==vm?i.constructor:void 0,e=n?Ki(n):"";if(e)switch(e){case Ps:return Cf;case Bu:return fu;case ud:return od;case ld:return Qd;case Pc:return sd}return r});var ll=Gu,cd=1,kc="[object Arguments]",Dc="[object Array]",Bs="[object Object]",fd=Object.prototype,du=fd.hasOwnProperty;function Ef(o,i,r,n,e,t){var a=ot(o),s=ot(i),u=a?Dc:ll(o),l=s?Dc:ll(i);u=u==kc?Bs:u,l=l==kc?Bs:l;var c=u==Bs,f=l==Bs,d=u==l;if(d&&Object(Sc.a)(o)){if(!Object(Sc.a)(i))return!1;a=!0,c=!1}if(d&&!c)return t||(t=new bs),a||ul(o)?hp(o,i,r,n,e,t):pp(o,i,u,r,n,e,t);if(!(r&cd)){var v=c&&du.call(o,"__wrapped__"),m=f&&du.call(i,"__wrapped__");if(v||m){var y=v?o.value():o,C=m?i.value():i;return t||(t=new bs),e(y,C,r,n,t)}}return d?(t||(t=new bs),ci(o,i,r,n,e,t)):!1}var Of=Ef;function dd(o,i,r,n,e){return o===i?!0:o==null||i==null||!Qt(o)&&!Qt(i)?o!==o&&i!==i:Of(o,i,r,n,dd,e)}var Ic=dd,Rc=1,xp=2;function qd(o,i,r,n){var e=r.length,t=e,a=!n;if(o==null)return!t;for(o=Object(o);e--;){var s=r[e];if(a&&s[2]?s[1]!==o[s[0]]:!(s[0]in o))return!1}for(;++e<t;){s=r[e];var u=s[0],l=o[u],c=s[1];if(a&&s[2]){if(l===void 0&&!(u in o))return!1}else{var f=new bs;if(n)var d=n(l,c,u,o,i,f);if(!(d===void 0?Ic(c,l,Rc|xp,n,f):d))return!1}}return!0}var Sp=qd;function pm(o){return o===o&&!or(o)}var vv=pm;function Pl(o){for(var i=ac(o),r=i.length;r--;){var n=i[r],e=o[n];i[r]=[n,e,vv(e)]}return i}var Gs=Pl;function zu(o,i){return function(r){return r==null?!1:r[o]===i&&(i!==void 0||o in Object(r))}}var pv=zu;function gm(o){var i=Gs(o);return i.length==1&&i[0][2]?pv(i[0][0],i[0][1]):function(r){return r===o||Sp(r,o,i)}}var hd=gm,wf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Uu=/^\w*$/;function gv(o,i){if(ot(o))return!1;var r=typeof o;return r=="number"||r=="symbol"||r=="boolean"||o==null||Xi(o)?!0:Uu.test(o)||!wf.test(o)||i!=null&&o in Object(i)}var ic=gv,kl="Expected a function";function Dl(o,i){if(typeof o!="function"||i!=null&&typeof i!="function")throw new TypeError(kl);var r=function n(){var e=arguments,t=i?i.apply(this,e):e[0],a=n.cache;if(a.has(t))return a.get(t);var s=o.apply(this,e);return n.cache=a.set(t,s)||a,s};return r.cache=new(Dl.Cache||ls),r}Dl.Cache=ls;var Nc=Dl,eh=500;function mv(o){var i=Nc(o,function(n){return r.size===eh&&r.clear(),n}),r=i.cache;return i}var ks=mv,Vu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mo=/\\(\\)?/g,Os=ks(function(o){var i=[];return o.charCodeAt(0)===46&&i.push(""),o.replace(Vu,function(r,n,e,t){i.push(e?t.replace(Mo,"$1"):n||r)}),i}),th=Os;function nh(o,i){for(var r=-1,n=o==null?0:o.length,e=Array(n);++r<n;)e[r]=i(o[r],r,o);return e}var xf=nh,Ap=1/0,vd=St?St.prototype:void 0,rh=vd?vd.toString:void 0;function ah(o){if(typeof o=="string")return o;if(ot(o))return xf(o,ah)+"";if(Xi(o))return rh?rh.call(o):"";var i=o+"";return i=="0"&&1/o==-Ap?"-0":i}var jc=ah;function Mp(o){return o==null?"":jc(o)}var oo=Mp;function Tp(o,i){return ot(o)?o:ic(o,i)?[o]:th(oo(o))}var Sf=Tp,Pp=1/0;function yv(o){if(typeof o=="string"||Xi(o))return o;var i=o+"";return i=="0"&&1/o==-Pp?"-0":i}var pd=yv;function mm(o,i){i=Sf(i,o);for(var r=0,n=i.length;o!=null&&r<n;)o=o[pd(i[r++])];return r&&r==n?o:void 0}var hu=mm;function bv(o,i,r){var n=o==null?void 0:hu(o,i);return n===void 0?r:n}var we=bv;function Ie(o,i){return o!=null&&i in Object(o)}var gt=Ie;function rn(o,i,r){i=Sf(i,o);for(var n=-1,e=i.length,t=!1;++n<e;){var a=pd(i[n]);if(!(t=o!=null&&r(o,a)))break;o=o[a]}return t||++n!=e?t:(e=o==null?0:o.length,!!e&&So(e)&&Cs(a,e)&&(ot(o)||la(o)))}var Jt=rn;function wn(o,i){return o!=null&&Jt(o,i,gt)}var fn=wn,Wn=1,wr=2;function ur(o,i){return ic(o)&&vv(i)?pv(pd(o),i):function(r){var n=we(r,o);return n===void 0&&n===i?fn(r,o):Ic(i,n,Wn|wr)}}var cr=ur;function ir(o){return function(i){return i==null?void 0:i[o]}}var Ir=ir;function Tr(o){return function(i){return hu(i,o)}}var pr=Tr;function vn(o){return ic(o)?Ir(pd(o)):pr(o)}var cn=vn;function fr(o){return typeof o=="function"?o:o==null?_s:typeof o=="object"?ot(o)?cr(o[0],o[1]):hd(o):cn(o)}var Lr=fr;function kn(o,i,r){return $f(o,i,Lr(r,2))}var Vr=kn;function $n(o){return function(i,r,n){for(var e=-1,t=Object(i),a=n(i),s=a.length;s--;){var u=a[o?s:++e];if(r(t[u],u,t)===!1)break}return i}}var Jn=$n,Qn=Jn(),hr=Qn;function Qr(o,i){return o&&hr(o,i,ac)}var wa=Qr;function Pr(o,i){return function(r,n){if(r==null)return r;if(!Ro(r))return o(r,n);for(var e=r.length,t=i?e:-1,a=Object(r);(i?t--:++t<e)&&n(a[t],t,a)!==!1;);return r}}var mr=Pr,Un=mr(wa),pa=Un;function Wa(o,i){var r=-1,n=Ro(o)?Array(o.length):[];return pa(o,function(e,t,a){n[++r]=i(e,t,a)}),n}var Ur=Wa;function Xa(o,i){var r=o.length;for(o.sort(i);r--;)o[r]=o[r].value;return o}var xa=Xa;function $a(o,i){if(o!==i){var r=o!==void 0,n=o===null,e=o===o,t=Xi(o),a=i!==void 0,s=i===null,u=i===i,l=Xi(i);if(!s&&!l&&!t&&o>i||t&&a&&u&&!s&&!l||n&&a&&u||!r&&u||!e)return 1;if(!n&&!t&&!l&&o<i||l&&r&&e&&!n&&!t||s&&r&&e||!a&&e||!u)return-1}return 0}var Ci=$a;function Co(o,i,r){for(var n=-1,e=o.criteria,t=i.criteria,a=e.length,s=r.length;++n<a;){var u=Ci(e[n],t[n]);if(u){if(n>=s)return u;var l=r[n];return u*(l=="desc"?-1:1)}}return o.index-i.index}var Lo=Co;function Ya(o,i,r){i.length?i=xf(i,function(t){return ot(t)?function(a){return hu(a,t.length===1?t[0]:t)}:t}):i=[_s];var n=-1;i=xf(i,sl(Lr));var e=Ur(o,function(t,a,s){var u=xf(i,function(l){return l(t)});return{criteria:u,index:++n,value:t}});return xa(e,function(t,a){return Lo(t,a,r)})}var To=Ya;function eo(o,i,r){if(!or(r))return!1;var n=typeof i;return(n=="number"?Ro(r)&&Cs(i,r.length):n=="string"&&i in r)?qr(r[i],o):!1}var to=eo,Eo=ju(function(o,i){if(o==null)return[];var r=i.length;return r>1&&to(o,i[0],i[1])?i=[]:r>2&&to(i[0],i[1],i[2])&&(i=[i[0]]),To(o,fa(i,1),[])}),No=Eo;function so(o,i,r){i=="__proto__"&&Jl?Jl(o,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):o[i]=r}var co=so;function Po(o,i,r,n){for(var e=-1,t=o==null?0:o.length;++e<t;){var a=o[e];i(n,a,r(a),o)}return n}var Fa=Po;function ds(o,i,r,n){return pa(o,function(e,t,a){i(n,e,r(e),a)}),n}var Ii=ds;function va(o,i){return function(r,n){var e=ot(r)?Fa:Ii,t=i?i():{};return e(r,o,Lr(n,2),t)}}var Ba=va,fi=Object.prototype,es=fi.hasOwnProperty,zs=Ba(function(o,i,r){es.call(o,r)?o[r].push(i):co(o,r,[i])}),Lc=zs,at=200;function En(o,i,r,n){var e=-1,t=cs,a=!0,s=o.length,u=[],l=i.length;if(!s)return u;r&&(i=xf(i,sl(r))),n?(t=eu,a=!1):i.length>=at&&(t=b,a=!1,i=new jo(i));e:for(;++e<s;){var c=o[e],f=r==null?c:r(c);if(c=n||c!==0?c:0,a&&f===f){for(var d=l;d--;)if(i[d]===f)continue e;u.push(c)}else t(i,f,n)||u.push(c)}return u}var an=En,Fr=ju(function(o,i){return bc(o)?an(o,fa(i,1,bc,!0)):[]}),Ga=Fr;function Je(o,i,r){for(var n=-1,e=o.length;++n<e;){var t=o[n],a=i(t);if(a!=null&&(s===void 0?a===a&&!Xi(a):r(a,s)))var s=a,u=t}return u}var Fe=Je;function xt(o,i){return o>i}var Yt=xt;function Zt(o){return o&&o.length?Fe(o,_s,Yt):void 0}var Dt=Zt;function At(o,i,r){for(var n=Ht(o,r),e=Ht(i,r),t=e.free,a=n.keyIndex,s=e.keyIndex,u=[],l=[],c=0,f,d,v=0;c<o.length;){if(f=o[c],d=f[r],d)if(!s.hasOwnProperty(d))l.push(null);else{var m=s[d];l.push(i[m])}else{v+=1;var y=t[v];l.push(y||null)}c+=1}var C=l.slice(0);for(c=0;c<C.length;)C[c]===null?(Q(c),ye(c)):c+=1;for(var O=c=0;c<i.length;){f=i[c],d=f[r];var x=C[O];if(x){var T=x[r];if(d===T)O+=1;else if(!a.hasOwnProperty(d))q(c,f);else{var L=C[O+1];if(L){var _=L[r];_===d?(Q(c),ye(O),O+=1):q(c,f)}}}else q(c,f);c+=1}for(var z=C.length-O;(O+=1)<C.length;)z-=1,Q(z+c);function Q(Ce){var Ae={index:Ce,type:0,item:null};u.push(Ae)}function q(Ce,Ae){var Pe={index:Ce,item:Ae,type:1};u.push(Pe)}function ye(Ce){C.splice(Ce,1)}return{moves:u}}function Ht(o,i){for(var r={},n=[],e=0,t=o.length;e<t;e+=1){var a=o[e],s=a[i];s?r[s]=e:n.push(a)}return{keyIndex:r,free:n}}var Ze=Object.prototype,Ot=Ze.hasOwnProperty;function Ke(o,i){return o!=null&&Ot.call(o,i)}var Vt=Ke;function qt(o,i){return o!=null&&Jt(o,i,Vt)}var Nn=qt,Gn=Object.prototype,Sn=Gn.hasOwnProperty;function gr(o,i,r){var n=o[i];(!(Sn.call(o,i)&&qr(n,r))||r===void 0&&!(i in o))&&co(o,i,r)}var Yr=gr;function Va(o,i,r,n){if(!or(o))return o;i=Sf(i,o);for(var e=-1,t=i.length,a=t-1,s=o;s!=null&&++e<t;){var u=pd(i[e]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return o;if(e!=a){var c=s[u];l=n?n(c,u,s):void 0,l===void 0&&(l=or(c)?c:Cs(i[e+1])?[]:{})}Yr(s,u,l),s=s[u]}return o}var Hr=Va;function ua(o,i,r){for(var n=-1,e=i.length,t={};++n<e;){var a=i[n],s=hu(o,a);r(s,a)&&Hr(t,Sf(a,o),s)}return t}var Na=ua;function Ei(o,i){return Na(o,i,function(r,n){return fn(o,n)})}var Oo=Ei;function Us(o){var i=o==null?0:o.length;return i?fa(o,1):[]}var Cv=Us;function Au(o){return Ld(lf(o,void 0,Cv),o+"")}var kp=Au,Hu=kp(function(o,i){return o==null?{}:Oo(o,i)}),Dp=Hu;function DE(o){return typeof o=="function"?o:_s}var IE=DE;function RE(o){var i=[];if(o!=null)for(var r in Object(o))i.push(r);return i}var NE=RE,jE=Object.prototype,LE=jE.hasOwnProperty;function _E(o){if(!or(o))return NE(o);var i=Ac(o),r=[];for(var n in o)n=="constructor"&&(i||!LE.call(o,n))||r.push(n);return r}var FE=_E;function BE(o){return Ro(o)?nc(o,!0):FE(o)}var _c=BE;function GE(o,i){return o==null?o:hr(o,IE(i),_c)}var ym=GE;function Yy(o,i,r){(r!==void 0&&!qr(o[i],r)||r===void 0&&!(i in o))&&co(o,i,r)}var bm=Yy,Jy=h("3/ER");function zE(o){var i=new o.constructor(o.byteLength);return new vf(i).set(new vf(o)),i}var Cm=zE;function UE(o,i){var r=i?Cm(o.buffer):o.buffer;return new o.constructor(r,o.byteOffset,o.length)}var Zy=UE;function VE(o,i){var r=-1,n=o.length;for(i||(i=Array(n));++r<n;)i[r]=o[r];return i}var Qy=VE,Em=Object.create,HE=function(){function o(){}return function(i){if(!or(i))return{};if(Em)return Em(i);o.prototype=i;var r=new o;return o.prototype=void 0,r}}(),Ip=HE,WE=Mc(Object.getPrototypeOf,Object),Om=WE;function $E(o){return typeof o.constructor=="function"&&!Ac(o)?Ip(Om(o)):{}}var qy=$E,KE="[object Object]",XE=Function.prototype,YE=Object.prototype,eb=XE.toString,JE=YE.hasOwnProperty,ZE=eb.call(Object);function QE(o){if(!Qt(o)||mn(o)!=KE)return!1;var i=Om(o);if(i===null)return!0;var r=JE.call(i,"constructor")&&i.constructor;return typeof r=="function"&&r instanceof r&&eb.call(r)==ZE}var wm=QE;function qE(o,i){if(!(i==="constructor"&&typeof o[i]=="function")&&i!="__proto__")return o[i]}var xm=qE;function eO(o,i,r,n){var e=!r;r||(r={});for(var t=-1,a=i.length;++t<a;){var s=i[t],u=n?n(r[s],o[s],s,r,o):void 0;u===void 0&&(u=o[s]),e?co(r,s,u):Yr(r,s,u)}return r}var gd=eO;function tb(o){return gd(o,_c(o))}var nb=tb;function tO(o,i,r,n,e,t,a){var s=xm(o,r),u=xm(i,r),l=a.get(u);if(l){bm(o,r,l);return}var c=t?t(s,u,r+"",o,i,a):void 0,f=c===void 0;if(f){var d=ot(u),v=!d&&Object(Sc.a)(u),m=!d&&!v&&ul(u);c=u,d||v||m?ot(s)?c=s:bc(s)?c=Qy(s):v?(f=!1,c=Object(Jy.a)(u,!0)):m?(f=!1,c=Zy(u,!0)):c=[]:wm(u)||la(u)?(c=s,la(s)?c=nb(s):(!or(s)||ha(s))&&(c=qy(u))):f=!1}f&&(a.set(u,c),e(c,u,n,t,a),a.delete(u)),bm(o,r,c)}var nO=tO;function rb(o,i,r,n,e){o!==i&&hr(i,function(t,a){if(e||(e=new bs),or(t))nO(o,i,a,r,rb,n,e);else{var s=n?n(xm(o,a),t,a+"",o,i,e):void 0;s===void 0&&(s=t),bm(o,a,s)}},_c)}var Sm=rb;function Rp(o){return ju(function(i,r){var n=-1,e=r.length,t=e>1?r[e-1]:void 0,a=e>2?r[2]:void 0;for(t=o.length>3&&typeof t=="function"?(e--,t):void 0,a&&to(r[0],r[1],a)&&(t=e<3?void 0:t,e=1),i=Object(i);++n<e;){var s=r[n];s&&o(i,s,n,t)}return i})}var Np=Rp,rO=Np(function(o,i,r){Sm(o,i,r)}),aO=rO,iO=Np(function(o,i){gd(i,_c(i),o)}),oO=iO;function sO(o,i){return Ic(o,i)}var uO=sO,lO="[object Map]",cO="[object Set]",fO=Object.prototype,dO=fO.hasOwnProperty;function jp(o){if(o==null)return!0;if(Ro(o)&&(ot(o)||typeof o=="string"||typeof o.splice=="function"||Object(Sc.a)(o)||ul(o)||la(o)))return!o.length;var i=ll(o);if(i==lO||i==cO)return!o.size;if(Ac(o))return!lv(o).length;for(var r in o)if(dO.call(o,r))return!1;return!0}var hO=jp;function ab(o,i){for(var r=-1,n=o==null?0:o.length;++r<n&&i(o[r],r,o)!==!1;);return o}var ib=ab;function Am(o,i){return o&&gd(i,ac(i),o)}var ob=Am;function sb(o,i){return o&&gd(i,_c(i),o)}var ub=sb;function lb(o,i){return gd(o,_u(o),i)}var vO=lb,pO=Object.getOwnPropertySymbols,gO=pO?function(o){for(var i=[];o;)Le(i,_u(o)),o=Om(o);return i}:wc,Ev=gO;function Lp(o,i){return gd(o,Ev(o),i)}var mO=Lp;function yO(o){return gp(o,_c,Ev)}var Mm=yO,cb=Object.prototype,bO=cb.hasOwnProperty;function CO(o){var i=o.length,r=new o.constructor(i);return i&&typeof o[0]=="string"&&bO.call(o,"index")&&(r.index=o.index,r.input=o.input),r}var EO=CO;function OO(o,i){var r=i?Cm(o.buffer):o.buffer;return new o.constructor(r,o.byteOffset,o.byteLength)}var wO=OO,xO=/\w*$/;function SO(o){var i=new o.constructor(o.source,xO.exec(o));return i.lastIndex=o.lastIndex,i}var AO=SO,fb=St?St.prototype:void 0,db=fb?fb.valueOf:void 0;function MO(o){return db?Object(db.call(o)):{}}var TO=MO,Il="[object Boolean]",PO="[object Date]",kO="[object Map]",md="[object Number]",ui="[object RegExp]",DO="[object Set]",Mu="[object String]",ts="[object Symbol]",IO="[object ArrayBuffer]",Af="[object DataView]",RO="[object Float32Array]",NO="[object Float64Array]",jO="[object Int8Array]",LO="[object Int16Array]",_O="[object Int32Array]",Tm="[object Uint8Array]",FO="[object Uint8ClampedArray]",Fc="[object Uint16Array]",hb="[object Uint32Array]";function _p(o,i,r){var n=o.constructor;switch(i){case IO:return Cm(o);case Il:case PO:return new n(+o);case Af:return wO(o,r);case RO:case NO:case jO:case LO:case _O:case Tm:case FO:case Fc:case hb:return Zy(o,r);case kO:return new n;case md:case Mu:return new n(o);case ui:return AO(o);case DO:return new n;case ts:return TO(o)}}var _o=_p,Ko="[object Map]";function vb(o){return Qt(o)&&ll(o)==Ko}var BO=vb,pb=cu.a&&cu.a.isMap,GO=pb?sl(pb):BO,zO=GO,UO="[object Set]";function VO(o){return Qt(o)&&ll(o)==UO}var gb=VO,ih=cu.a&&cu.a.isSet,Pm=ih?sl(ih):gb,HO=Pm,mb=1,Fp=2,Wu=4,yd="[object Arguments]",WO="[object Array]",$O="[object Boolean]",KO="[object Date]",XO="[object Error]",yb="[object Function]",bb="[object GeneratorFunction]",Bc="[object Map]",vi="[object Number]",km="[object Object]",cl="[object RegExp]",Cb="[object Set]",YO="[object String]",uo="[object Symbol]",JO="[object WeakMap]",Eb="[object ArrayBuffer]",Bp="[object DataView]",ZO="[object Float32Array]",QO="[object Float64Array]",qO="[object Int8Array]",ew="[object Int16Array]",tw="[object Int32Array]",nw="[object Uint8Array]",rw="[object Uint8ClampedArray]",aw="[object Uint16Array]",iw="[object Uint32Array]",wo={};wo[yd]=wo[WO]=wo[Eb]=wo[Bp]=wo[$O]=wo[KO]=wo[ZO]=wo[QO]=wo[qO]=wo[ew]=wo[tw]=wo[Bc]=wo[vi]=wo[km]=wo[cl]=wo[Cb]=wo[YO]=wo[uo]=wo[nw]=wo[rw]=wo[aw]=wo[iw]=!0,wo[XO]=wo[yb]=wo[JO]=!1;function Gp(o,i,r,n,e,t){var a,s=i&mb,u=i&Fp,l=i&Wu;if(r&&(a=e?r(o,n,e,t):r(o)),a!==void 0)return a;if(!or(o))return o;var c=ot(o);if(c){if(a=EO(o),!s)return Qy(o,a)}else{var f=ll(o),d=f==yb||f==bb;if(Object(Sc.a)(o))return Object(Jy.a)(o,s);if(f==km||f==yd||d&&!e){if(a=u||d?{}:qy(o),!s)return u?mO(o,ub(a,o)):vO(o,ob(a,o))}else{if(!wo[f])return e?o:{};a=_o(o,f,s)}}t||(t=new bs);var v=t.get(o);if(v)return v;t.set(o,a),HO(o)?o.forEach(function(C){a.add(Gp(C,i,r,C,o,t))}):zO(o)&&o.forEach(function(C,O){a.set(O,Gp(C,i,r,O,o,t))});var m=l?u?Mm:ad:u?_c:ac,y=c?void 0:m(o);return ib(y||o,function(C,O){y&&(O=C,C=o[O]),Yr(a,O,Gp(C,i,r,O,o,t))}),a}var Ob=Gp,ow=4;function Dm(o){return Ob(o,ow)}var sw=Dm,Im=1,uw=4;function lw(o){return Ob(o,Im|uw)}var cw=lw,ws=Object.prototype,Tu=ws.hasOwnProperty,fw=ju(function(o,i){o=Object(o);var r=-1,n=i.length,e=n>2?i[2]:void 0;for(e&&to(i[0],i[1],e)&&(n=1);++r<n;)for(var t=i[r],a=_c(t),s=-1,u=a.length;++s<u;){var l=a[s],c=o[l];(c===void 0||qr(c,ws[l])&&!Tu.call(o,l))&&(o[l]=t[l])}return o}),dw=fw;function wb(o,i,r,n,e,t){return or(o)&&or(i)&&(t.set(i,o),Sm(o,i,void 0,wb,t),t.delete(i)),o}var xb=wb,hw=Np(function(o,i,r,n){Sm(o,i,r,n)}),vw=hw,pw=ju(function(o){return o.push(void 0,xb),mc(vw,void 0,o)}),Sb=pw;function gw(o){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];r.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(t){t!=="constructor"&&Object.defineProperty(o.prototype,t,Object.getOwnPropertyDescriptor(e.prototype,t))})})}var xr=h("yKVA"),Sr=h("879j"),Ab=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,i){o.__proto__=i}||function(o,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(o[r]=i[r])};function Rm(o,i){Ab(o,i);function r(){this.constructor=o}o.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}var mw=Object(ue.a)(function o(){Object(me.a)(this,o)}),yw=/^\s*class\s+/.test("".concat(mw))||/^\s*class\s*\{/.test("".concat(function(){function o(){Object(me.a)(this,o)}return Object(ue.a)(o)}()));function bw(o,i){var r;return yw?r=function(n){Object(xr.a)(t,n);var e=Object(Sr.a)(t);function t(){return Object(me.a)(this,t),e.apply(this,arguments)}return Object(ue.a)(t)}(i):(r=function(){return i.apply(this,arguments)},Rm(r,i)),Object.defineProperty(r,"name",{value:o}),r}function Mb(o,i){return o!=null?o:i}function oh(o,i,r){var n=o!=null?o[i]:null;return r!==void 0?Mb(n,r):n}function Cw(o,i,r){var n=o!=null?o[i]:null;return n==null||(n=+n,Number.isNaN(n)||!Number.isFinite(n))?r:n}function Ew(o,i,r){var n=o!=null?o[i]:null;return n==null?r:!!n}function Nm(o){return o==="__proto__"}function Tb(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n,e=Array.isArray(i)?i:i.split(r);if(e.length)for(n=o;e.length;){var t=e.shift();if(Object(n)===n&&t&&t in n)n=n[t];else return}return n}function Ow(o,i,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",e=Array.isArray(i)?i:i.split(n),t=e.pop();if(t&&!Nm(t)){var a=o;e.forEach(function(s){Nm(s)||(a[s]==null&&(a[s]={}),a=a[s])}),a[t]=r}return o}function Pb(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",n=Array.isArray(i)?i.slice():i.split(r),e=n.pop();if(e)if(n.length>0){var t=Tb(o,n);t&&delete t[e]}else delete o[e];return o}function jm(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"/",r=arguments.length>2?arguments[2]:void 0,n={};Object.keys(o).forEach(function(t){var a=o[t],s=typeof a=="object"||Array.isArray(a);if(s&&r&&r(a)&&(s=!1),s){var u=jm(a,i,r);Object.keys(u).forEach(function(l){n[t+i+l]=u[l]})}else n[t]=a});for(var e in o)!!Object.prototype.hasOwnProperty.call(o,e);return n}var ww="[object String]";function xw(o){return typeof o=="string"||!ot(o)&&Qt(o)&&mn(o)==ww}var Sw=xw;function Aw(o){return function(i){return o==null?void 0:o[i]}}var Lm=Aw,Mw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tw=Lm(Mw),Pw=Tw,kb=/[&<>"']/g,kw=RegExp(kb.source);function Dw(o){return o=oo(o),o&&kw.test(o)?o.replace(kb,Pw):o}var Db=Dw,Iw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Rw=Lm(Iw),Nw=Rw,Ib=/&(?:amp|lt|gt|quot|#39);/g,jw=RegExp(Ib.source);function Lw(o){return o=oo(o),o&&jw.test(o)?o.replace(Ib,Nw):o}var _w=Lw;function Fw(o,i,r){return o===o&&(r!==void 0&&(o=o<=r?o:r),i!==void 0&&(o=o>=i?o:i)),o}var zp=Fw,Bw=/\s/;function Gw(o){for(var i=o.length;i--&&Bw.test(o.charAt(i)););return i}var zw=Gw,Uw=/^\s+/;function _m(o){return o&&o.slice(0,zw(o)+1).replace(Uw,"")}var Rb=_m,Fm=0/0,Vw=/^[-+]0x[0-9a-f]+$/i,Hw=/^0b[01]+$/i,Ww=/^0o[0-7]+$/i,Bm=parseInt;function $w(o){if(typeof o=="number")return o;if(Xi(o))return Fm;if(or(o)){var i=typeof o.valueOf=="function"?o.valueOf():o;o=or(i)?i+"":i}if(typeof o!="string")return o===0?o:+o;o=Rb(o);var r=Hw.test(o);return r||Ww.test(o)?Bm(o.slice(2),r?2:8):Vw.test(o)?Fm:+o}var Mf=$w,Nb=1/0,Pu=17976931348623157e292;function Gm(o){if(!o)return o===0?o:0;if(o=Mf(o),o===Nb||o===-Nb){var i=o<0?-1:1;return i*Pu}return o===o?o:0}var Up=Gm;function Kw(o){var i=Up(o),r=i%1;return i===i?r?i-r:i:0}var Rl=Kw;function Xw(o,i,r){return o=oo(o),r=r==null?0:zp(Rl(r),0,o.length),i=jc(i),o.slice(r,r+i.length)==i}var zm=Xw;function Yw(o,i,r){o=oo(o),i=jc(i);var n=o.length;r=r===void 0?n:zp(Rl(r),0,n);var e=r;return r-=i.length,r>=0&&o.slice(r,e)==i}var Um=Yw;function Jw(o,i,r){var n=-1,e=o.length;i<0&&(i=-i>e?0:e+i),r=r>e?e:r,r<0&&(r+=e),e=i>r?0:r-i>>>0,i>>>=0;for(var t=Array(e);++n<e;)t[n]=o[n+i];return t}var Zw=Jw;function Qw(o,i,r){var n=o.length;return r=r===void 0?n:r,!i&&r>=n?o:Zw(o,i,r)}var Vp=Qw,jb="\\ud800-\\udfff",qw="\\u0300-\\u036f",ex="\\ufe20-\\ufe2f",tx="\\u20d0-\\u20ff",Vm=qw+ex+tx,Hm="\\ufe0e\\ufe0f",nx="\\u200d",rx=RegExp("["+nx+jb+Vm+Hm+"]");function ax(o){return rx.test(o)}var sh=ax,ix="[object RegExp]";function ox(o){return Qt(o)&&mn(o)==ix}var sx=ox,Lb=cu.a&&cu.a.isRegExp,ux=Lb?sl(Lb):sx,_b=ux;function lx(o){return o.split("")}var cx=lx,Fb="\\ud800-\\udfff",fx="\\u0300-\\u036f",dx="\\ufe20-\\ufe2f",hx="\\u20d0-\\u20ff",vx=fx+dx+hx,px="\\ufe0e\\ufe0f",gx="["+Fb+"]",Wm="["+vx+"]",$m="\\ud83c[\\udffb-\\udfff]",g="(?:"+Wm+"|"+$m+")",w="[^"+Fb+"]",F="(?:\\ud83c[\\udde6-\\uddff]){2}",oe="[\\ud800-\\udbff][\\udc00-\\udfff]",Te="\\u200d",Xe=g+"?",Mt="["+px+"]?",Wt="(?:"+Te+"(?:"+[w,F,oe].join("|")+")"+Mt+Xe+")*",dn=Mt+Xe+Wt,yr="(?:"+[w+Wm+"?",Wm,F,oe,gx].join("|")+")",Er=RegExp($m+"(?="+$m+")|"+yr+dn,"g");function kr(o){return o.match(Er)||[]}var Jr=kr;function ya(o){return sh(o)?Jr(o):cx(o)}var za=ya,Oi=4294967295;function Ja(o,i,r){return r&&typeof r!="number"&&to(o,i,r)&&(i=r=void 0),r=r===void 0?Oi:r>>>0,r?(o=oo(o),o&&(typeof i=="string"||i!=null&&!_b(i))&&(i=jc(i),!i&&sh(o))?Vp(za(o),0,r):o.split(i,r)):[]}var ji=Ja,zi=9007199254740991,$u=Math.floor;function vu(o,i){var r="";if(!o||i<1||i>zi)return r;do i%2&&(r+=o),i=$u(i/2),i&&(o+=o);while(i);return r}var pu=vu;function ns(o,i,r){return(r?to(o,i,r):i===void 0)?i=1:i=Rl(i),pu(oo(o),i)}var Nl=ns,Gc=Ir("length"),Bb=Gc,FM="\\ud800-\\udfff",xL="\\u0300-\\u036f",SL="\\ufe20-\\ufe2f",AL="\\u20d0-\\u20ff",ML=xL+SL+AL,TL="\\ufe0e\\ufe0f",PL="["+FM+"]",mx="["+ML+"]",yx="\\ud83c[\\udffb-\\udfff]",kL="(?:"+mx+"|"+yx+")",BM="[^"+FM+"]",GM="(?:\\ud83c[\\udde6-\\uddff]){2}",zM="[\\ud800-\\udbff][\\udc00-\\udfff]",DL="\\u200d",UM=kL+"?",VM="["+TL+"]?",IL="(?:"+DL+"(?:"+[BM,GM,zM].join("|")+")"+VM+UM+")*",RL=VM+UM+IL,NL="(?:"+[BM+mx+"?",mx,GM,zM,PL].join("|")+")",HM=RegExp(yx+"(?="+yx+")|"+NL+RL,"g");function jL(o){for(var i=HM.lastIndex=0;HM.test(o);)++i;return i}var LL=jL;function _L(o){return sh(o)?LL(o):Bb(o)}var Km=_L,FL=Math.ceil;function BL(o,i){i=i===void 0?" ":jc(i);var r=i.length;if(r<2)return r?pu(i,o):i;var n=pu(i,FL(o/Km(i)));return sh(i)?Vp(za(n),0,o).join(""):n.slice(0,o)}var Gb=BL,GL=Math.ceil,zL=Math.floor;function UL(o,i,r){o=oo(o),i=Rl(i);var n=i?Km(o):0;if(!i||n>=i)return o;var e=(i-n)/2;return Gb(zL(e),r)+o+Gb(GL(e),r)}var VL=UL;function HL(o,i,r){o=oo(o),i=Rl(i);var n=i?Km(o):0;return i&&n<i?o+Gb(i-n,r):o}var WL=HL;function $L(o,i,r){o=oo(o),i=Rl(i);var n=i?Km(o):0;return i&&n<i?Gb(i-n,r)+o:o}var KL=$L,XL=30,YL="...",JL=/\w*$/;function ZL(o,i){var r=XL,n=YL;if(or(i)){var e="separator"in i?i.separator:e;r="length"in i?Rl(i.length):r,n="omission"in i?jc(i.omission):n}o=oo(o);var t=o.length;if(sh(o)){var a=za(o);t=a.length}if(r>=t)return o;var s=r-Km(n);if(s<1)return n;var u=a?Vp(a,0,s).join(""):o.slice(0,s);if(e===void 0)return u+n;if(a&&(s+=u.length-s),_b(e)){if(o.slice(s).search(e)){var l,c=u;for(e.global||(e=RegExp(e.source,oo(JL.exec(e))+"g")),e.lastIndex=0;l=e.exec(c);)var f=l.index;u=u.slice(0,f===void 0?s:f)}}else if(o.indexOf(jc(e),s)!=s){var d=u.lastIndexOf(e);d>-1&&(u=u.slice(0,d))}return u+n}var QL=ZL,qL=Np(function(o,i,r,n){gd(i,_c(i),o,n)}),WM=qL,e4="[object DOMException]",t4="[object Error]";function n4(o){if(!Qt(o))return!1;var i=mn(o);return i==t4||i==e4||typeof o.message=="string"&&typeof o.name=="string"&&!wm(o)}var $M=n4,r4=ju(function(o,i){try{return mc(o,void 0,i)}catch(r){return $M(r)?r:new Error(r)}}),a4=r4;function i4(o,i){return xf(i,function(r){return o[r]})}var o4=i4,KM=Object.prototype,s4=KM.hasOwnProperty;function u4(o,i,r,n){return o===void 0||qr(o,KM[r])&&!s4.call(n,r)?i:o}var XM=u4,l4={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function c4(o){return"\\"+l4[o]}var f4=c4,d4=/<%=([\s\S]+?)%>/g,YM=d4,h4=/<%-([\s\S]+?)%>/g,v4=h4,p4=/<%([\s\S]+?)%>/g,g4=p4,m4={escape:v4,evaluate:g4,interpolate:YM,variable:"",imports:{_:{escape:Db}}},JM=m4,y4="Invalid `variable` option passed into `_.template`",b4=/\b__p \+= '';/g,C4=/\b(__p \+=) '' \+/g,E4=/(__e\(.*?\)|\b__t\)) \+\n'';/g,O4=/[()=,{}\[\]\/\s]/,w4=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,zb=/($^)/,x4=/['\n\r\u2028\u2029\\]/g,S4=Object.prototype,ZM=S4.hasOwnProperty;function A4(o,i,r){var n=JM.imports._.templateSettings||JM;r&&to(o,i,r)&&(i=void 0),o=oo(o),i=WM({},i,n,XM);var e=WM({},i.imports,n.imports,XM),t=ac(e),a=o4(e,t),s,u,l=0,c=i.interpolate||zb,f="__p += '",d=RegExp((i.escape||zb).source+"|"+c.source+"|"+(c===YM?w4:zb).source+"|"+(i.evaluate||zb).source+"|$","g"),v=ZM.call(i,"sourceURL")?"//# sourceURL="+(i.sourceURL+"").replace(/\s/g," ")+`
`:"";o.replace(d,function(C,O,x,T,L,_){return x||(x=T),f+=o.slice(l,_).replace(x4,f4),O&&(s=!0,f+=`' +
__e(`+O+`) +
'`),L&&(u=!0,f+=`';
`+L+`;
__p += '`),x&&(f+=`' +
((__t = (`+x+`)) == null ? '' : __t) +
'`),l=_+C.length,C}),f+=`';
`;var m=ZM.call(i,"variable")&&i.variable;if(!m)f=`with (obj) {
`+f+`
}
`;else if(O4.test(m))throw new Error(y4);f=(u?f.replace(b4,""):f).replace(C4,"$1").replace(E4,"$1;"),f="function("+(m||"obj")+`) {
`+(m?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(u?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+f+`return __p
}`;var y=a4(function(){return Function(t,v+"return "+f).apply(void 0,a)});if(y.source=f,$M(y))throw y;return y}var M4=A4,T4=0;function P4(o){var i=++T4;return oo(o)+i}var k4=P4;function D4(o){var i=null;try{i=window.eval(o)}catch(r){}return i}function I4(o,i,r,n){var e=-1,t=o==null?0:o.length;for(n&&t&&(r=o[++e]);++e<t;)r=i(r,o[e],e,o);return r}var R4=I4,N4={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},j4=Lm(N4),L4=j4,_4=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,F4="\\u0300-\\u036f",B4="\\ufe20-\\ufe2f",G4="\\u20d0-\\u20ff",z4=F4+B4+G4,U4="["+z4+"]",V4=RegExp(U4,"g");function H4(o){return o=oo(o),o&&o.replace(_4,L4).replace(V4,"")}var W4=H4,$4=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function K4(o){return o.match($4)||[]}var X4=K4,Y4=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function J4(o){return Y4.test(o)}var Z4=J4,QM="\\ud800-\\udfff",Q4="\\u0300-\\u036f",q4="\\ufe20-\\ufe2f",e_="\\u20d0-\\u20ff",t_=Q4+q4+e_,qM="\\u2700-\\u27bf",eT="a-z\\xdf-\\xf6\\xf8-\\xff",n_="\\xac\\xb1\\xd7\\xf7",r_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",a_="\\u2000-\\u206f",i_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tT="A-Z\\xc0-\\xd6\\xd8-\\xde",o_="\\ufe0e\\ufe0f",nT=n_+r_+a_+i_,rT="['\u2019]",aT="["+nT+"]",s_="["+t_+"]",iT="\\d+",u_="["+qM+"]",oT="["+eT+"]",sT="[^"+QM+nT+iT+qM+eT+tT+"]",l_="\\ud83c[\\udffb-\\udfff]",c_="(?:"+s_+"|"+l_+")",f_="[^"+QM+"]",uT="(?:\\ud83c[\\udde6-\\uddff]){2}",lT="[\\ud800-\\udbff][\\udc00-\\udfff]",Hp="["+tT+"]",d_="\\u200d",cT="(?:"+oT+"|"+sT+")",h_="(?:"+Hp+"|"+sT+")",fT="(?:"+rT+"(?:d|ll|m|re|s|t|ve))?",dT="(?:"+rT+"(?:D|LL|M|RE|S|T|VE))?",hT=c_+"?",vT="["+o_+"]?",v_="(?:"+d_+"(?:"+[f_,uT,lT].join("|")+")"+vT+hT+")*",p_="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",g_="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",m_=vT+hT+v_,y_="(?:"+[u_,uT,lT].join("|")+")"+m_,b_=RegExp([Hp+"?"+oT+"+"+fT+"(?="+[aT,Hp,"$"].join("|")+")",h_+"+"+dT+"(?="+[aT,Hp+cT,"$"].join("|")+")",Hp+"?"+cT+"+"+fT,Hp+"+"+dT,g_,p_,iT,y_].join("|"),"g");function C_(o){return o.match(b_)||[]}var E_=C_;function O_(o,i,r){return o=oo(o),i=r?void 0:i,i===void 0?Z4(o)?E_(o):X4(o):o.match(i)||[]}var w_=O_,x_="['\u2019]",S_=RegExp(x_,"g");function A_(o){return function(i){return R4(w_(W4(i).replace(S_,"")),o,"")}}var Ub=A_;function M_(o){return function(i){i=oo(i);var r=sh(i)?za(i):void 0,n=r?r[0]:i.charAt(0),e=r?Vp(r,1).join(""):i.slice(1);return n[o]()+e}}var pT=M_,T_=pT("toUpperCase"),Vb=T_,P_=Ub(function(o,i,r){return o+(r?" ":"")+Vb(i)}),gT=P_;function k_(o){return Vb(oo(o).toLowerCase())}var D_=k_,I_=Ub(function(o,i,r){return i=i.toLowerCase(),o+(r?D_(i):i)}),bx=I_,R_=Ub(function(o,i,r){return o+(r?" ":"")+i.toUpperCase()}),N_=R_,j_=Ub(function(o,i,r){return o+(r?" ":"")+i.toLowerCase()}),Cx=j_,L_=pT("toLowerCase"),__=L_,Ov=function(i){var r=Object.create(null);return function(n){var e=r[n];return e||(r[n]=i(n))}},mT=Ov(function(o){return o.replace(/\B([A-Z])/g,"-$1").toLowerCase()}),F_=Ov(function(o){return gT(bx(o)).replace(/ /g,"")}),B_=Ov(function(o){return N_(o).replace(/ /g,"_")}),G_=Ov(function(o){return Cx(o).replace(/ /g,".")}),z_=Ov(function(o){return Cx(o).replace(/ /g,"/")}),U_=Ov(function(o){return Vb(Cx(o))}),V_=Ov(function(o){return gT(bx(o))});function H_(o){for(var i=2166136261,r=!1,n=o,e=0,t=n.length;e<t;e+=1){var a=n.charCodeAt(e);a>127&&!r&&(n=unescape(encodeURIComponent(n)),a=n.charCodeAt(e),r=!0),i^=a,i+=(i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24)}return i>>>0}function W_(){for(var o="",i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",r=0,n=i.length;r<n;r+=1){var e=i[r],t=Math.random()*16|0,a=e==="x"?t:e==="y"?t&3|8:e;o+=a.toString(16)}return o}function $_(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=Kt.a.parseHTML(o,null,!1);return r.forEach(function(n){var e=n;if(e){var t=e.attributes;if(t)for(var a=0,s=t.length;a<s;a+=1){var u=t.item(a);if(u){var l=u.value.toLowerCase(),c=u.name.toLowerCase();(c.startsWith("on")||l.startsWith("javascript:")||l.startsWith("data:")||l.startsWith("vbscript:"))&&e.removeAttribute(c)}}}}),i.raw?r:Kt()("<div/>").append(r).html()}function K_(o,i,r){var n=Math.min(2,Math.floor(o.length*.34)),e=Math.floor(o.length*.4)+1,t,a=!1,s=o.toLowerCase(),u=Object(Bt.a)(i),l;try{for(u.s();!(l=u.n()).done;){var c=l.value,f=r(c);if(f!==void 0&&Math.abs(f.length-s.length)<=n){var d=f.toLowerCase();if(d===s){if(f===o)continue;return c}if(a||f.length<3)continue;var v=X_(s,d,e-1);if(v===void 0)continue;v<3?(a=!0,t=c):(e=v,t=c)}}}catch(m){u.e(m)}finally{u.f()}return t}function X_(o,i,r){for(var n=new Array(i.length+1),e=new Array(i.length+1),t=r+1,a=0;a<=i.length;a+=1)n[a]=a;for(var s=1;s<=o.length;s+=1){var u=o.charCodeAt(s-1),l=s>r?s-r:1,c=i.length>r+s?r+s:i.length;e[0]=s;for(var f=s,d=1;d<l;d+=1)e[d]=t;for(var v=l;v<=c;v+=1){var m=u===i.charCodeAt(v-1)?n[v-1]:Math.min(n[v]+1,e[v-1]+1,n[v-1]+2);e[v]=m,f=Math.min(f,m)}for(var y=c+1;y<=i.length;y+=1)e[y]=t;if(f>r)return;var C=n;n=e,e=C}var O=n[i.length];return O>r?void 0:O}var Y_="[object Number]";function J_(o){return typeof o=="number"||Qt(o)&&mn(o)==Y_}var yT=J_;function Z_(o){return yT(o)&&o!=+o}var Q_=Z_,q_=It.a.isFinite;function e6(o){return typeof o=="number"&&q_(o)}var t6=e6;function n6(o){return typeof o=="number"&&o==Rl(o)}var bT=n6,CT=9007199254740991;function r6(o){return bT(o)&&o>=-CT&&o<=CT}var a6=r6;function i6(o,i,r){return r===void 0&&(r=i,i=void 0),r!==void 0&&(r=Mf(r),r=r===r?r:0),i!==void 0&&(i=Mf(i),i=i===i?i:0),zp(Mf(o),i,r)}var o6=i6,s6=Math.max,u6=Math.min;function l6(o,i,r){return o>=u6(i,r)&&o<s6(i,r)}var c6=l6;function f6(o,i,r){return i=Up(i),r===void 0?(r=i,i=0):r=Up(r),o=Mf(o),c6(o,i,r)}var d6=f6,ET=9007199254740991;function h6(o){return o?zp(Rl(o),-ET,ET):o===0?o:0}var v6=h6,p6=/^\s+/,g6=It.a.parseInt;function m6(o,i,r){return r||i==null?i=0:i&&(i=+i),g6(oo(o).replace(p6,""),i||0)}var y6=m6;function b6(o,i){return(o%i+i)%i}function C6(o,i){if(i==null)i=o==null?1:o,o=0;else if(i<o){var r=o;o=i,i=r}return Math.floor(Math.random()*(i-o+1)+o)}function OT(o){return typeof o=="string"&&o.slice(-1)==="%"}function E6(o,i){if(o==null)return 0;var r;if(typeof o=="string"){if(r=parseFloat(o),OT(o)&&(r/=100,Number.isFinite(r)))return r*i}else r=o;return Number.isFinite(r)?r>0&&r<1?r*i:r:0}function O6(o,i){function r(a){var s=new RegExp("(?:\\d+(?:\\.\\d+)*)(".concat(a,")$")).exec(o);return s?s[1]:null}var n=parseFloat(o);if(Number.isNaN(n))return null;var e;if(i==null)e="[A-Za-z]*";else if(Array.isArray(i)){if(i.length===0)return null;e=i.join("|")}else typeof i=="string"&&(e=i);var t=r(e);return t===null?null:{unit:t,value:n}}function w6(o){if(typeof o=="object"){var i=0,r=0,n=0,e=0;return o.vertical!=null&&Number.isFinite(o.vertical)&&(r=e=o.vertical),o.horizontal!=null&&Number.isFinite(o.horizontal)&&(n=i=o.horizontal),o.left!=null&&Number.isFinite(o.left)&&(i=o.left),o.top!=null&&Number.isFinite(o.top)&&(r=o.top),o.right!=null&&Number.isFinite(o.right)&&(n=o.right),o.bottom!=null&&Number.isFinite(o.bottom)&&(e=o.bottom),{top:r,right:n,bottom:e,left:i}}var t=0;return o!=null&&Number.isFinite(o)&&(t=o),{top:t,right:t,bottom:t,left:t}}var x6="Expected a function";function S6(o,i){var r;if(typeof i!="function")throw new TypeError(x6);return o=Rl(o),function(){return--o>0&&(r=i.apply(this,arguments)),o<=1&&(i=void 0),r}}var A6=S6;function M6(o){return A6(2,o)}var T6=M6,P6=function(){return It.a.Date.now()},Ex=P6,k6="Expected a function",D6=Math.max,I6=Math.min;function R6(o,i,r){var n,e,t,a,s,u,l=0,c=!1,f=!1,d=!0;if(typeof o!="function")throw new TypeError(k6);i=Mf(i)||0,or(r)&&(c=!!r.leading,f="maxWait"in r,t=f?D6(Mf(r.maxWait)||0,i):t,d="trailing"in r?!!r.trailing:d);function v(z){var Q=n,q=e;return n=e=void 0,l=z,a=o.apply(q,Q),a}function m(z){return l=z,s=setTimeout(O,i),c?v(z):a}function y(z){var Q=z-u,q=z-l,ye=i-Q;return f?I6(ye,t-q):ye}function C(z){var Q=z-u,q=z-l;return u===void 0||Q>=i||Q<0||f&&q>=t}function O(){var z=Ex();if(C(z))return x(z);s=setTimeout(O,y(z))}function x(z){return s=void 0,d&&n?v(z):(n=e=void 0,a)}function T(){s!==void 0&&clearTimeout(s),l=0,n=u=e=s=void 0}function L(){return s===void 0?a:x(Ex())}function _(){var z=Ex(),Q=C(z);if(n=arguments,e=this,u=z,Q){if(s===void 0)return m(u);if(f)return clearTimeout(s),s=setTimeout(O,i),v(u)}return s===void 0&&(s=setTimeout(O,i)),a}return _.cancel=T,_.flush=L,_}var N6=R6,j6="Expected a function";function L6(o,i,r){if(typeof o!="function")throw new TypeError(j6);return setTimeout(function(){o.apply(void 0,r)},i)}var _6=L6,F6=ju(function(o,i){return _6(o,1,i)}),B6=F6;function Ox(o,i,r){if(r)switch(r.length){case 0:return o.call(i);case 1:return o.call(i,r[0]);case 2:return o.call(i,r[0],r[1]);case 3:return o.call(i,r[0],r[1],r[2]);case 4:return o.call(i,r[0],r[1],r[2],r[3]);case 5:return o.call(i,r[0],r[1],r[2],r[3],r[4]);case 6:return o.call(i,r[0],r[1],r[2],r[3],r[4],r[5]);default:return o.apply(i,r)}return o.call(i)}function G6(o,i){for(var r=arguments.length,n=new Array(r>2?r-2:0),e=2;e<r;e++)n[e-2]=arguments[e];return Ox(o,i,n)}function z6(o,i){for(var r=0,n=o.length;r<n;r+=1)if(o[r]===i)return o.push(o.splice(r,1)[0])}function U6(o,i,r){var n=[],e={},t=function(){for(var s=!1,u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var f=l.join("\u2400");return f in e?(s=!0,z6(n,f)):(n.length>=1e3&&delete e[n.shift()],n.push(f),e[f]=Ox(o,i||null,l)),r?r(e[f],s):e[f]};return t}function wT(o){return typeof o=="object"&&o.then&&typeof o.then=="function"}function wx(o){return o!=null&&(o instanceof Promise||wT(o))}function xT(){for(var o=[],i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];r.forEach(function(a){Array.isArray(a)?o.push.apply(o,Object(We.a)(a)):o.push(a)});var e=o.some(function(a){return wx(a)});if(e){var t=o.map(function(a){return wx(a)?a:Promise.resolve(a!==!1)});return Promise.all(t).then(function(a){return a.reduce(function(s,u){return u!==!1&&s},!0)})}return o.every(function(a){return a!==!1})}function V6(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];var n=xT(i);return typeof n=="boolean"?Promise.resolve(n):n}var xx=/[\t\r\n\f]/g,Sx=/\S+/g,Wp=function(i){return" ".concat(i," ")};function wv(o){return o&&o.getAttribute&&o.getAttribute("class")||""}function Hb(o,i){if(o==null||i==null)return!1;var r=Wp(wv(o)),n=Wp(i);return o.nodeType===1?r.replace(xx," ").includes(n):!1}function Xm(o,i){if(!(o==null||i==null)){if(typeof i=="function")return Xm(o,i(wv(o)));if(typeof i=="string"&&o.nodeType===1){var r=i.match(Sx)||[],n=Wp(wv(o)).replace(xx," "),e=r.reduce(function(t,a){return t.indexOf(Wp(a))<0?"".concat(t).concat(a," "):t},n);e=e.trim(),n!==e&&o.setAttribute("class",e)}}}function Ym(o,i){if(o!=null){if(typeof i=="function")return Ym(o,i(wv(o)));if((!i||typeof i=="string")&&o.nodeType===1){var r=(i||"").match(Sx)||[],n=Wp(wv(o)).replace(xx," "),e=r.reduce(function(t,a){var s=Wp(a);return t.indexOf(s)>-1?t.replace(s," "):t},n);e=i?e.trim():"",n!==e&&o.setAttribute("class",e)}}}function Ax(o,i,r){if(!(o==null||i==null)){if(r!=null&&typeof i=="string"){r?Xm(o,i):Ym(o,i);return}if(typeof i=="function")return Ax(o,i(wv(o),r),r);if(typeof i=="string"){var n=i.match(Sx)||[];n.forEach(function(e){Hb(o,e)?Ym(o,e):Xm(o,e)})}}}var ST=0;function AT(){return ST+=1,"v".concat(ST)}function MT(o){return(o.id==null||o.id==="")&&(o.id=AT()),o.id}function $p(o){return o==null?!1:typeof o.getScreenCTM=="function"&&o instanceof SVGElement}var Tf={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},Mx="1.1";function H6(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return i.createElement(o)}function TT(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tf.xhtml,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return r.createElementNS(i,o)}function Pf(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return TT(o,Tf.svg,i)}function Wb(o){if(o){var i='<svg xmlns="'.concat(Tf.svg,'" xmlns:xlink="').concat(Tf.xlink,'" version="').concat(Mx,'">').concat(o,"</svg>"),r=PT(i,{async:!1}),n=r.documentElement;return n}var e=document.createElementNS(Tf.svg,"svg");return e.setAttributeNS(Tf.xmlns,"xmlns:xlink",Tf.xlink),e.setAttribute("version",Mx),e}function PT(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r;try{var n=new DOMParser;if(i.async!=null){var e=n;e.async=i.async}r=n.parseFromString(o,i.mimeType||"text/xml")}catch(t){r=void 0}if(!r||r.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: ".concat(o));return r}function $b(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=o.nodeName;return i?r.toLowerCase():r.toUpperCase()}function kT(o){for(var i=0,r=o.previousSibling;r;)r.nodeType===1&&(i+=1),r=r.previousSibling;return i}function DT(o,i){return o.querySelectorAll(i)}function IT(o,i){return o.querySelector(i)}function RT(o,i,r){for(var n=o.ownerSVGElement,e=o.parentNode;e&&e!==r&&e!==n;){if(Hb(e,i))return e;e=e.parentNode}return null}function NT(o,i){var r=i&&i.parentNode;return o===r||!!(r&&r.nodeType===1&&o.compareDocumentPosition(r)&16)}function Kb(o){o.parentNode&&o.parentNode.removeChild(o)}function Tx(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Px(o,i){var r=Array.isArray(i)?i:[i];r.forEach(function(n){n!=null&&o.appendChild(n)})}function jT(o,i){var r=o.firstChild;return r?kx(r,i):Px(o,i)}function kx(o,i){var r=o.parentNode;if(r){var n=Array.isArray(i)?i:[i];n.forEach(function(e){e!=null&&r.insertBefore(e,o)})}}function LT(o,i){i!=null&&i.appendChild(o)}function Dx(o){try{return o instanceof HTMLElement}catch(i){return typeof o=="object"&&o.nodeType===1&&typeof o.style=="object"&&typeof o.ownerDocument=="object"}}function _T(o){return!o||!Dx(o)?!1:["a","button"].includes($b(o))||o.getAttribute("role")==="button"||o.getAttribute("type")==="button"?!0:_T(o.parentNode)}function W6(o){var i=$b(o);if(i==="input"){var r=o.getAttribute("type");if(r==null||["text","password","number","email","search","tel","url"].includes(r))return!0}return!1}var FT=["viewBox","attributeName","attributeType","repeatCount"];function BT(o,i){return o.getAttribute(i)}function Ix(o,i){var r=Nx(i);r.ns?o.hasAttributeNS(r.ns,r.local)&&o.removeAttributeNS(r.ns,r.local):o.hasAttribute(i)&&o.removeAttribute(i)}function Xb(o,i,r){if(r==null)return Ix(o,i);var n=Nx(i);n.ns&&typeof r=="string"?o.setAttributeNS(n.ns,i,r):i==="id"?o.id="".concat(r):o.setAttribute(i,"".concat(r))}function Rx(o,i){Object.keys(i).forEach(function(r){Xb(o,r,i[r])})}function gu(o,i,r){if(i==null){for(var n=o.attributes,e={},t=0;t<n.length;t+=1)e[n[t].name]=n[t].value;return e}if(typeof i=="string"&&r===void 0)return o.getAttribute(i);typeof i=="object"?Rx(o,i):Xb(o,i,r)}function Nx(o){if(o.indexOf(":")!==-1){var i=o.split(":");return{ns:Tf[i[0]],local:i[1]}}return{ns:null,local:o}}function $6(o){var i={};return Object.keys(o).forEach(function(r){var n=FT.includes(r)?r:mT(r);i[n]=o[r]}),i}function Jm(o){var i={},r=o.split(";");return r.forEach(function(n){var e=n.trim();if(e){var t=e.split("=");t.length&&(i[t[0].trim()]=t[1]?t[1].trim():"")}}),i}function Yb(o,i){return Object.keys(i).forEach(function(r){if(r==="class")o[r]=o[r]?"".concat(o[r]," ").concat(i[r]):i[r];else if(r==="style"){var n=typeof o[r]=="object",e=typeof i[r]=="object",t,a;n&&e?(t=o[r],a=i[r]):n?(t=o[r],a=Jm(i[r])):e?(t=Jm(o[r]),a=i[r]):(t=Jm(o[r]),a=Jm(i[r])),o[r]=Yb(t,a)}else o[r]=i[r]}),o}function K6(o,i){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=r.offset||0,e=[],t=[],a,s,u=null,l=0;l<o.length;l+=1){a=t[l]=o[l];for(var c=0,f=i.length;c<f;c+=1){var d=i[c],v=d.start+n,m=d.end+n;l>=v&&l<m&&(typeof a=="string"?a=t[l]={t:o[l],attrs:d.attrs}:a.attrs=Yb(Yb({},a.attrs),d.attrs),r.includeAnnotationIndices&&(a.annotations==null&&(a.annotations=[]),a.annotations.push(c)))}s=t[l-1],s?p.isObject(a)&&p.isObject(s)?(u=u,JSON.stringify(a.attrs)===JSON.stringify(s.attrs)?u.t+=a.t:(e.push(u),u=a)):p.isObject(a)||p.isObject(s)?(u=u,e.push(u),u=a):u=(u||"")+a:u=a}return u!=null&&e.push(u),e}function X6(o,i){return o?o.filter(function(r){return r.start<i&&i<=r.end}):[]}function Y6(o,i,r){return o?o.filter(function(n){return i>=n.start&&i<n.end||r>n.start&&r<=n.end||n.start>=i&&n.end<r}):[]}function J6(o,i,r){return o&&o.forEach(function(n){n.start<i&&n.end>=i?n.end+=r:n.start>=i&&(n.start+=r,n.end+=r)}),o}function Z6(o){return o.replace(/ /g,"\xA0")}var GT;(function(o){o.emptyObject=Object.freeze({}),o.emptyArray=Object.freeze([]);function i(c){return c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"}o.isPrimitive=i;function r(c){return Array.isArray(c)}o.isArray=r;function n(c){return!i(c)&&!r(c)}o.isObject=n;function e(c,f){if(c===f)return!0;if(i(c)||i(f))return!1;var d=r(c),v=r(f);return d!==v?!1:d&&v?a(c,f):s(c,f)}o.deepEqual=e;function t(c){return i(c)?c:r(c)?u(c):l(c)}o.deepCopy=t;function a(c,f){if(c===f)return!0;if(c.length!==f.length)return!1;for(var d=0,v=c.length;d<v;d+=1)if(!e(c[d],f[d]))return!1;return!0}function s(c,f){if(c===f)return!0;for(var d in c)if(!(d in f))return!1;for(var v in f)if(!(v in c))return!1;for(var m in c)if(!e(c[m],f[m]))return!1;return!0}function u(c){for(var f=new Array(c.length),d=0,v=c.length;d<v;d+=1)f[d]=t(c[d]);return f}function l(c){var f={};return Object.keys(c).forEach(function(d){f[d]=t(c[d])}),f}})(GT||(GT={}));var jx;(function(o){function i(l){var c="data:";return l.substr(0,c.length)===c}o.isDataUrl=i;function r(l,c){if(!l||i(l)){setTimeout(function(){return c(null,l)});return}var f=function(){c(new Error("Failed to load image: ".concat(l)))},d=window.FileReader?function(m){if(m.status===200){var y=new FileReader;y.onload=function(C){var O=C.target.result;c(null,O)},y.onerror=f,y.readAsDataURL(m.response)}else f()}:function(m){var y=function(_){for(var z=32768,Q=[],q=0;q<_.length;q+=z)Q.push(String.fromCharCode.apply(null,_.subarray(q,q+z)));return Q.join("")};if(m.status===200){var C=l.split(".").pop()||"png";C==="svg"&&(C="svg+xml");var O="data:image/".concat(C,";base64,"),x=new Uint8Array(m.response),T=O+btoa(y(x));c(null,T)}else f()},v=new XMLHttpRequest;v.responseType=window.FileReader?"blob":"arraybuffer",v.open("GET",l,!0),v.addEventListener("error",f),v.addEventListener("load",function(){return d(v)}),v.send()}o.imageToDataUri=r;function n(l){var c=l.replace(/\s/g,"");c=decodeURIComponent(c);var f=c.indexOf(","),d=c.slice(0,f),v=d.split(":")[1].split(";")[0],m=c.slice(f+1),y;d.indexOf("base64")>=0?y=atob(m):y=unescape(encodeURIComponent(m));for(var C=new Uint8Array(y.length),O=0;O<y.length;O+=1)C[O]=y.charCodeAt(O);return new Blob([C],{type:v})}o.dataUriToBlob=n;function e(l,c){var f=window.navigator.msSaveBlob;if(f)f(l,c);else{var d=window.URL.createObjectURL(l),v=document.createElement("a");v.href=d,v.download=c,document.body.appendChild(v),v.click(),document.body.removeChild(v),window.URL.revokeObjectURL(d)}}o.downloadBlob=e;function t(l,c){var f=n(l);e(f,c)}o.downloadDataUri=t;function a(l){var c=l.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return c&&c[2]?c[2].replace(/\s+/," ").split(" "):null}function s(l){var c=parseFloat(l);return Number.isNaN(c)?null:c}function u(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=null,d=function(L){return f==null&&(f=a(l)),f!=null?s(f[L]):null},v=function(L){var _=l.match(L);return _&&_[2]?s(_[2]):null},m=c.width;if(m==null&&(m=v(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),m==null&&(m=d(2)),m==null)throw new Error("Can not parse width from svg string");var y=c.height;if(y==null&&(y=v(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),y==null&&(y=d(3)),y==null)throw new Error("Can not parse height from svg string");var C=encodeURIComponent(l).replace(/'/g,"%27").replace(/"/g,"%22"),O="data:image/svg+xml",x="".concat(O,",").concat(C);return x}o.svgToDataUrl=u})(jx||(jx={}));var xv,Q6={px:function(i){return i},mm:function(i){return xv*i},cm:function(i){return xv*i*10},in:function(i){return xv*i*25.4},pt:function(i){return xv*(25.4*i/72)},pc:function(i){return xv*(25.4*i/6)}},Lx;(function(o){function i(n,e,t){var a=Kt()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:n+(t||""),height:e+(t||"")}).appendTo(document.body),s={width:a.width()||0,height:a.height()||0};return a.remove(),s}o.measure=i;function r(n,e){xv==null&&(xv=i("1","1","mm").width);var t=e?Q6[e]:null;return t?t(n):n}o.toPx=r})(Lx||(Lx={}));var q6=function(){var o,i=window;if(i!=null&&(o=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame,o!=null&&(o=o.bind(i))),o==null){var r=0;o=function(e){var t=new Date().getTime(),a=Math.max(0,16-(t-r)),s=setTimeout(function(){e(t+a)},a);return r=t+a,s}}return o}(),eF=function(){var o,i=window;return i!=null&&(o=i.cancelAnimationFrame||i.webkitCancelAnimationFrame||i.webkitCancelRequestAnimationFrame||i.msCancelAnimationFrame||i.msCancelRequestAnimationFrame||i.oCancelAnimationFrame||i.oCancelRequestAnimationFrame||i.mozCancelAnimationFrame||i.mozCancelRequestAnimationFrame,o&&(o=o.bind(i))),o==null&&(o=clearTimeout),o}(),tF=/-(.)/g;function nF(o){return o.replace(tF,function(i,r){return r.toUpperCase()})}var _x={},zT=["Webkit","ms","Moz","O"],UT=document?document.createElement("div").style:{};function rF(o){for(var i=0;i<zT.length;i+=1){var r=zT[i]+o;if(r in UT)return r}return null}function VT(o){var i=nF(o);if(_x[i]==null){var r=i.charAt(0).toUpperCase()+i.slice(1);_x[i]=i in UT?i:rF(r)}return _x[i]}function aF(o,i,r){var n=VT(i);n!=null&&(o[n]=r),o[i]=r}function Jb(o,i){var r=o.ownerDocument&&o.ownerDocument.defaultView&&o.ownerDocument.defaultView.opener?o.ownerDocument.defaultView.getComputedStyle(o,null):window.getComputedStyle(o,null);return r&&i?r.getPropertyValue(i)||r[i]:r}function iF(o){var i=Jb(o);return i!=null&&(i.overflow==="scroll"||i.overflow==="auto")}var oF=function(){var o=document;return o.selection?function(){o.selection.empty()}:window.getSelection?function(){var i=window.getSelection();i&&(i.empty?i.empty():i.removeAllRanges&&i.removeAllRanges())}:function(){}}(),Mi;(function(o){function i(n){return 180*n/Math.PI%360}o.toDeg=i,o.toRad=function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=e?n:n%360;return t*Math.PI/180};function r(n){return n%360+(n<0?360:0)}o.normalize=r})(Mi||(Mi={}));function Sv(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Number.isInteger(o)?o:+o.toFixed(i)}function HT(o,i){var r,n;if(i==null?(n=o==null?1:o,r=0):(n=i,r=o==null?0:o),n<r){var e=r;r=n,n=e}return Math.floor(Math.random()*(n-r+1)+r)}function Kp(o,i,r){return Number.isNaN(o)?NaN:Number.isNaN(i)||Number.isNaN(r)?0:i<r?o<i?i:o>r?r:o:o<r?r:o>i?i:o}function Fx(o,i){return i*Math.round(o/i)}function WT(o,i){return i!=null&&o!=null&&i.x>=o.x&&i.x<=o.x+o.width&&i.y>=o.y&&i.y<=o.y+o.height}function $T(o,i){var r=o.x-i.x,n=o.y-i.y;return r*r+n*n}var uh=function(){function o(){Object(me.a)(this,o)}return Object(ue.a)(o,[{key:"valueOf",value:function(){return this.toJSON()}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),o}(),Pt=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(e,t){var a;return Object(me.a)(this,n),a=r.call(this),a.x=e==null?0:e,a.y=t==null?0:t,a}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"round",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Sv(this.x,t),this.y=Sv(this.y,t),this}},{key:"add",value:function(t,a){var s=n.create(t,a);return this.x+=s.x,this.y+=s.y,this}},{key:"update",value:function(t,a){var s=n.create(t,a);return this.x=s.x,this.y=s.y,this}},{key:"translate",value:function(t,a){var s=n.create(t,a);return this.x+=s.x,this.y+=s.y,this}},{key:"rotate",value:function(t,a){var s=n.rotate(this,t,a);return this.x=s.x,this.y=s.y,this}},{key:"scale",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new n,u=n.create(s);return this.x=u.x+t*(this.x-u.x),this.y=u.y+a*(this.y-u.y),this}},{key:"closest",value:function(t){var a=this;if(t.length===1)return n.create(t[0]);var s=null,u=Infinity;return t.forEach(function(l){var c=a.squaredDistance(l);c<u&&(s=l,u=c)}),s?n.create(s):null}},{key:"distance",value:function(t){return Math.sqrt(this.squaredDistance(t))}},{key:"squaredDistance",value:function(t){var a=n.create(t),s=this.x-a.x,u=this.y-a.y;return s*s+u*u}},{key:"manhattanDistance",value:function(t){var a=n.create(t);return Math.abs(a.x-this.x)+Math.abs(a.y-this.y)}},{key:"magnitude",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}},{key:"theta",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new n,a=n.create(t),s=-(a.y-this.y),u=a.x-this.x,l=Math.atan2(s,u);return l<0&&(l=2*Math.PI+l),180*l/Math.PI}},{key:"angleBetween",value:function(t,a){if(this.equals(t)||this.equals(a))return NaN;var s=this.theta(a)-this.theta(t);return s<0&&(s+=360),s}},{key:"vectorAngle",value:function(t){var a=new n(0,0);return a.angleBetween(this,t)}},{key:"toPolar",value:function(t){return this.update(n.toPolar(this,t)),this}},{key:"changeInAngle",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new n;return this.clone().translate(-t,-a).theta(s)-this.theta(s)}},{key:"adhereToRect",value:function(t){return WT(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this}},{key:"bearing",value:function(t){var a=n.create(t),s=Mi.toRad(this.y),u=Mi.toRad(a.y),l=this.x,c=a.x,f=Mi.toRad(c-l),d=Math.sin(f)*Math.cos(u),v=Math.cos(s)*Math.sin(u)-Math.sin(s)*Math.cos(u)*Math.cos(f),m=Mi.toDeg(Math.atan2(d,v)),y=["NE","E","SE","S","SW","W","NW","N"],C=m-22.5;return C<0&&(C+=360),C=parseInt(C/45,10),y[C]}},{key:"cross",value:function(t,a){if(t!=null&&a!=null){var s=n.create(t),u=n.create(a);return(u.x-this.x)*(s.y-this.y)-(u.y-this.y)*(s.x-this.x)}return NaN}},{key:"dot",value:function(t){var a=n.create(t);return this.x*a.x+this.y*a.y}},{key:"diff",value:function(t,a){if(typeof t=="number")return new n(this.x-t,this.y-a);var s=n.create(t);return new n(this.x-s.x,this.y-s.y)}},{key:"lerp",value:function(t,a){var s=n.create(t);return new n((1-a)*this.x+a*s.x,(1-a)*this.y+a*s.y)}},{key:"normalize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,a=t/this.magnitude();return this.scale(a,a)}},{key:"move",value:function(t,a){var s=n.create(t),u=Mi.toRad(s.theta(this));return this.translate(Math.cos(u)*a,-Math.sin(u)*a)}},{key:"reflection",value:function(t){return n.create(t).move(this,this.distance(t))}},{key:"snapToGrid",value:function(t,a){return this.x=Fx(this.x,t),this.y=Fx(this.y,a==null?t:a),this}},{key:"equals",value:function(t){var a=n.create(t);return a!=null&&a.x===this.x&&a.y===this.y}},{key:"clone",value:function(){return n.clone(this)}},{key:"toJSON",value:function(){return n.toJSON(this)}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y)}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.toPolar=="function"}o.isPoint=i})(Pt||(Pt={})),function(o){function i(n){return n!=null&&typeof n=="object"&&typeof n.x=="number"&&typeof n.y=="number"}o.isPointLike=i;function r(n){return n!=null&&Array.isArray(n)&&n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"}o.isPointData=r}(Pt||(Pt={})),function(o){function i(f,d){return f==null||typeof f=="number"?new o(f,d):r(f)}o.create=i;function r(f){return o.isPoint(f)?new o(f.x,f.y):Array.isArray(f)?new o(f[0],f[1]):new o(f.x,f.y)}o.clone=r;function n(f){return o.isPoint(f)?{x:f.x,y:f.y}:Array.isArray(f)?{x:f[0],y:f[1]}:{x:f.x,y:f.y}}o.toJSON=n;function e(f,d){var v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new o,m=Math.abs(f*Math.cos(d)),y=Math.abs(f*Math.sin(d)),C=r(v),O=Mi.normalize(Mi.toDeg(d));return O<90?y=-y:O<180?(m=-m,y=-y):O<270&&(m=-m),new o(C.x+m,C.y+y)}o.fromPolar=e;function t(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new o,v=r(f),m=r(d),y=v.x-m.x,C=v.y-m.y;return new o(Math.sqrt(y*y+C*C),Mi.toRad(m.theta(v)))}o.toPolar=t;function a(f,d){return f===d?!0:f!=null&&d!=null?f.x===d.x&&f.y===d.y:!1}o.equals=a;function s(f,d){if(f==null&&d!=null||f!=null&&d==null||f!=null&&d!=null&&f.length!==d.length)return!1;if(f!=null&&d!=null){for(var v=0,m=f.length;v<m;v+=1)if(!a(f[v],d[v]))return!1}return!0}o.equalPoints=s;function u(f,d,v,m){return new o(HT(f,d),HT(v,m))}o.random=u;function l(f,d,v){var m=Mi.toRad(Mi.normalize(-d)),y=Math.sin(m),C=Math.cos(m);return c(f,C,y,v)}o.rotate=l;function c(f,d,v){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:new o,y=r(f),C=r(m),O=y.x-C.x,x=y.y-C.y,T=O*d-x*v,L=x*d+O*v;return new o(T+C.x,L+C.y)}o.rotateEx=c}(Pt||(Pt={}));var Br=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(e,t,a,s){var u;return Object(me.a)(this,n),u=r.call(this),u.x=e==null?0:e,u.y=t==null?0:t,u.width=a==null?0:a,u.height=s==null?0:s,u}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"left",get:function(){return this.x}},{key:"top",get:function(){return this.y}},{key:"right",get:function(){return this.x+this.width}},{key:"bottom",get:function(){return this.y+this.height}},{key:"origin",get:function(){return new Pt(this.x,this.y)}},{key:"topLeft",get:function(){return new Pt(this.x,this.y)}},{key:"topCenter",get:function(){return new Pt(this.x+this.width/2,this.y)}},{key:"topRight",get:function(){return new Pt(this.x+this.width,this.y)}},{key:"center",get:function(){return new Pt(this.x+this.width/2,this.y+this.height/2)}},{key:"bottomLeft",get:function(){return new Pt(this.x,this.y+this.height)}},{key:"bottomCenter",get:function(){return new Pt(this.x+this.width/2,this.y+this.height)}},{key:"bottomRight",get:function(){return new Pt(this.x+this.width,this.y+this.height)}},{key:"corner",get:function(){return new Pt(this.x+this.width,this.y+this.height)}},{key:"rightMiddle",get:function(){return new Pt(this.x+this.width,this.y+this.height/2)}},{key:"leftMiddle",get:function(){return new Pt(this.x,this.y+this.height/2)}},{key:"topLine",get:function(){return new Sa(this.topLeft,this.topRight)}},{key:"rightLine",get:function(){return new Sa(this.topRight,this.bottomRight)}},{key:"bottomLine",get:function(){return new Sa(this.bottomLeft,this.bottomRight)}},{key:"leftLine",get:function(){return new Sa(this.topLeft,this.bottomLeft)}},{key:"getOrigin",value:function(){return this.origin}},{key:"getTopLeft",value:function(){return this.topLeft}},{key:"getTopCenter",value:function(){return this.topCenter}},{key:"getTopRight",value:function(){return this.topRight}},{key:"getCenter",value:function(){return this.center}},{key:"getCenterX",value:function(){return this.x+this.width/2}},{key:"getCenterY",value:function(){return this.y+this.height/2}},{key:"getBottomLeft",value:function(){return this.bottomLeft}},{key:"getBottomCenter",value:function(){return this.bottomCenter}},{key:"getBottomRight",value:function(){return this.bottomRight}},{key:"getCorner",value:function(){return this.corner}},{key:"getRightMiddle",value:function(){return this.rightMiddle}},{key:"getLeftMiddle",value:function(){return this.leftMiddle}},{key:"getTopLine",value:function(){return this.topLine}},{key:"getRightLine",value:function(){return this.rightLine}},{key:"getBottomLine",value:function(){return this.bottomLine}},{key:"getLeftLine",value:function(){return this.leftLine}},{key:"bbox",value:function(t){if(!t)return this.clone();var a=Mi.toRad(t),s=Math.abs(Math.sin(a)),u=Math.abs(Math.cos(a)),l=this.width*u+this.height*s,c=this.width*s+this.height*u;return new n(this.x+(this.width-l)/2,this.y+(this.height-c)/2,l,c)}},{key:"round",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.x=Sv(this.x,t),this.y=Sv(this.y,t),this.width=Sv(this.width,t),this.height=Sv(this.height,t),this}},{key:"add",value:function(t,a,s,u){var l=n.create(t,a,s,u),c=Math.min(this.x,l.x),f=Math.min(this.y,l.y),d=Math.max(this.x+this.width,l.x+l.width),v=Math.max(this.y+this.height,l.y+l.height);return this.x=c,this.y=f,this.width=d-c,this.height=v-f,this}},{key:"update",value:function(t,a,s,u){var l=n.create(t,a,s,u);return this.x=l.x,this.y=l.y,this.width=l.width,this.height=l.height,this}},{key:"inflate",value:function(t,a){var s=t,u=a!=null?a:t;return this.x-=s,this.y-=u,this.width+=2*s,this.height+=2*u,this}},{key:"snapToGrid",value:function(t,a){var s=this.origin.snapToGrid(t,a),u=this.corner.snapToGrid(t,a);return this.x=s.x,this.y=s.y,this.width=u.x-s.x,this.height=u.y-s.y,this}},{key:"translate",value:function(t,a){var s=Pt.create(t,a);return this.x+=s.x,this.y+=s.y,this}},{key:"scale",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Pt,u=this.origin.scale(t,a,s);return this.x=u.x,this.y=u.y,this.width*=t,this.height*=a,this}},{key:"rotate",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getCenter();if(t!==0){var s=Mi.toRad(t),u=Math.cos(s),l=Math.sin(s),c=this.getOrigin(),f=this.getTopRight(),d=this.getBottomRight(),v=this.getBottomLeft();c=Pt.rotateEx(c,u,l,a),f=Pt.rotateEx(f,u,l,a),d=Pt.rotateEx(d,u,l,a),v=Pt.rotateEx(v,u,l,a);var m=new n(c.x,c.y,0,0);m.add(f.x,f.y,0,0),m.add(d.x,d.y,0,0),m.add(v.x,v.y,0,0),this.update(m)}return this}},{key:"rotate90",value:function(){var t=(this.width-this.height)/2;this.x+=t,this.y-=t;var a=this.width;return this.width=this.height,this.height=a,this}},{key:"moveAndExpand",value:function(t){var a=n.clone(t);return this.x+=a.x||0,this.y+=a.y||0,this.width+=a.width||0,this.height+=a.height||0,this}},{key:"getMaxScaleToFit",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,s=n.clone(t),u=a.x,l=a.y,c=Infinity,f=Infinity,d=Infinity,v=Infinity,m=Infinity,y=Infinity,C=Infinity,O=Infinity,x=s.topLeft;x.x<u&&(c=(this.x-u)/(x.x-u)),x.y<l&&(m=(this.y-l)/(x.y-l));var T=s.bottomRight;T.x>u&&(f=(this.x+this.width-u)/(T.x-u)),T.y>l&&(y=(this.y+this.height-l)/(T.y-l));var L=s.topRight;L.x>u&&(d=(this.x+this.width-u)/(L.x-u)),L.y<l&&(C=(this.y-l)/(L.y-l));var _=s.bottomLeft;return _.x<u&&(v=(this.x-u)/(_.x-u)),_.y>l&&(O=(this.y+this.height-l)/(_.y-l)),{sx:Math.min(c,f,d,v),sy:Math.min(m,y,C,O)}}},{key:"getMaxUniformScaleToFit",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.center,s=this.getMaxScaleToFit(t,a);return Math.min(s.sx,s.sy)}},{key:"containsPoint",value:function(t,a){return WT(this,Pt.create(t,a))}},{key:"containsRect",value:function(t,a,s,u){var l=n.create(t,a,s,u),c=this.x,f=this.y,d=this.width,v=this.height,m=l.x,y=l.y,C=l.width,O=l.height;return d===0||v===0||C===0||O===0?!1:m>=c&&y>=f&&m+C<=c+d&&y+O<=f+v}},{key:"intersectsWithLine",value:function(t){var a=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],s=[],u=[];return a.forEach(function(l){var c=t.intersectsWithLine(l);c!==null&&u.indexOf(c.toString())<0&&(s.push(c),u.push(c.toString()))}),s.length>0?s:null}},{key:"intersectsWithLineFromCenterToPoint",value:function(t,a){var s=Pt.clone(t),u=this.center,l=null;a!=null&&a!==0&&s.rotate(a,u);for(var c=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],f=new Sa(u,s),d=c.length-1;d>=0;d-=1){var v=c[d].intersectsWithLine(f);if(v!==null){l=v;break}}return l&&a!=null&&a!==0&&l.rotate(-a,u),l}},{key:"intersectsWithRect",value:function(t,a,s,u){var l=n.create(t,a,s,u);if(!this.isIntersectWithRect(l))return null;var c=this.origin,f=this.corner,d=l.origin,v=l.corner,m=Math.max(c.x,d.x),y=Math.max(c.y,d.y);return new n(m,y,Math.min(f.x,v.x)-m,Math.min(f.y,v.y)-y)}},{key:"isIntersectWithRect",value:function(t,a,s,u){var l=n.create(t,a,s,u),c=this.origin,f=this.corner,d=l.origin,v=l.corner;return!(v.x<=c.x||v.y<=c.y||d.x>=f.x||d.y>=f.y)}},{key:"normalize",value:function(){var t=this.x,a=this.y,s=this.width,u=this.height;return this.width<0&&(t=this.x+this.width,s=-this.width),this.height<0&&(a=this.y+this.height,u=-this.height),this.x=t,this.y=a,this.width=s,this.height=u,this}},{key:"union",value:function(t){var a=n.clone(t),s=this.origin,u=this.corner,l=a.origin,c=a.corner,f=Math.min(s.x,l.x),d=Math.min(s.y,l.y),v=Math.max(u.x,c.x),m=Math.max(u.y,c.y);return new n(f,d,v-f,m-d)}},{key:"getNearestSideToPoint",value:function(t){var a=Pt.clone(t),s=a.x-this.x,u=this.x+this.width-a.x,l=a.y-this.y,c=this.y+this.height-a.y,f=s,d="left";return u<f&&(f=u,d="right"),l<f&&(f=l,d="top"),c<f&&(d="bottom"),d}},{key:"getNearestPointToPoint",value:function(t){var a=Pt.clone(t);if(this.containsPoint(a)){var s=this.getNearestSideToPoint(a);switch(s){case"right":return new Pt(this.x+this.width,a.y);case"left":return new Pt(this.x,a.y);case"bottom":return new Pt(a.x,this.y+this.height);case"top":return new Pt(a.x,this.y);default:break}}return a.adhereToRect(this)}},{key:"equals",value:function(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}},{key:"clone",value:function(){return new n(this.x,this.y,this.width,this.height)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.width," ").concat(this.height)}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.width=="number"&&typeof e.height=="number"&&typeof e.inflate=="function"&&typeof e.moveAndExpand=="function"}o.isRectangle=i})(Br||(Br={})),function(o){function i(r){return r!=null&&typeof r=="object"&&typeof r.x=="number"&&typeof r.y=="number"&&typeof r.width=="number"&&typeof r.height=="number"}o.isRectangleLike=i}(Br||(Br={})),function(o){function i(a,s,u,l){return a==null||typeof a=="number"?new o(a,s,u,l):r(a)}o.create=i;function r(a){return o.isRectangle(a)?a.clone():Array.isArray(a)?new o(a[0],a[1],a[2],a[3]):new o(a.x,a.y,a.width,a.height)}o.clone=r;function n(a){return new o(0,0,a.width,a.height)}o.fromSize=n;function e(a,s){return new o(a.x,a.y,s.width,s.height)}o.fromPositionAndSize=e;function t(a){return new o(a.x-a.a,a.y-a.b,2*a.a,2*a.b)}o.fromEllipse=t}(Br||(Br={}));var Sa=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(e,t,a,s){var u;return Object(me.a)(this,n),u=r.call(this),typeof e=="number"&&typeof t=="number"?(u.start=new Pt(e,t),u.end=new Pt(a,s)):(u.start=Pt.create(e),u.end=Pt.create(t)),u}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"center",get:function(){return new Pt((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}},{key:"getCenter",value:function(){return this.center}},{key:"round",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.start.round(t),this.end.round(t),this}},{key:"translate",value:function(t,a){return typeof t=="number"?(this.start.translate(t,a),this.end.translate(t,a)):(this.start.translate(t),this.end.translate(t)),this}},{key:"rotate",value:function(t,a){return this.start.rotate(t,a),this.end.rotate(t,a),this}},{key:"scale",value:function(t,a,s){return this.start.scale(t,a,s),this.end.scale(t,a,s),this}},{key:"length",value:function(){return Math.sqrt(this.squaredLength())}},{key:"squaredLength",value:function(){var t=this.start.x-this.end.x,a=this.start.y-this.end.y;return t*t+a*a}},{key:"setLength",value:function(t){var a=this.length();if(!a)return this;var s=t/a;return this.scale(s,s,this.start)}},{key:"parallel",value:function(t){var a=this.clone();if(!a.isDifferentiable())return a;var s=a.start,u=a.end,l=s.clone().rotate(270,u),c=u.clone().rotate(90,s);return s.move(c,t),u.move(l,t),a}},{key:"vector",value:function(){return new Pt(this.end.x-this.start.x,this.end.y-this.start.y)}},{key:"angle",value:function(){var t=new Pt(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}},{key:"bbox",value:function(){var t=Math.min(this.start.x,this.end.x),a=Math.min(this.start.y,this.end.y),s=Math.max(this.start.x,this.end.x),u=Math.max(this.start.y,this.end.y);return new Br(t,a,s-t,u-a)}},{key:"bearing",value:function(){return this.start.bearing(this.end)}},{key:"closestPoint",value:function(t){return this.pointAt(this.closestPointNormalizedLength(t))}},{key:"closestPointLength",value:function(t){return this.closestPointNormalizedLength(t)*this.length()}},{key:"closestPointTangent",value:function(t){return this.tangentAt(this.closestPointNormalizedLength(t))}},{key:"closestPointNormalizedLength",value:function(t){var a=this.vector().dot(new n(this.start,t).vector()),s=Math.min(1,Math.max(0,a/this.squaredLength()));return Number.isNaN(s)?0:s}},{key:"pointAt",value:function(t){var a=this.start,s=this.end;return t<=0?a.clone():t>=1?s.clone():a.lerp(s,t)}},{key:"pointAtLength",value:function(t){var a=this.start,s=this.end,u=!0;t<0&&(u=!1,t=-t);var l=this.length();if(t>=l)return u?s.clone():a.clone();var c=(u?t:l-t)/l;return this.pointAt(c)}},{key:"divideAt",value:function(t){var a=this.pointAt(t);return[new n(this.start,a),new n(a,this.end)]}},{key:"divideAtLength",value:function(t){var a=this.pointAtLength(t);return[new n(this.start,a),new n(a,this.end)]}},{key:"containsPoint",value:function(t){var a=this.start,s=this.end;if(a.cross(t,s)!==0)return!1;var u=this.length();return!(new n(a,t).length()>u||new n(t,s).length()>u)}},{key:"intersect",value:function(t,a){var s=t.intersectsWithLine(this,a);return s?Array.isArray(s)?s:[s]:null}},{key:"intersectsWithLine",value:function(t){var a=new Pt(this.end.x-this.start.x,this.end.y-this.start.y),s=new Pt(t.end.x-t.start.x,t.end.y-t.start.y),u=a.x*s.y-a.y*s.x,l=new Pt(t.start.x-this.start.x,t.start.y-this.start.y),c=l.x*s.y-l.y*s.x,f=l.x*a.y-l.y*a.x;if(u===0||c*u<0||f*u<0)return null;if(u>0){if(c>u||f>u)return null}else if(c<u||f<u)return null;return new Pt(this.start.x+c*a.x/u,this.start.y+c*a.y/u)}},{key:"isDifferentiable",value:function(){return!this.start.equals(this.end)}},{key:"pointOffset",value:function(t){var a=Pt.clone(t),s=this.start,u=this.end,l=(u.x-s.x)*(a.y-s.y)-(u.y-s.y)*(a.x-s.x);return l/this.length()}},{key:"pointSquaredDistance",value:function(t,a){var s=Pt.create(t,a);return this.closestPoint(s).squaredDistance(s)}},{key:"pointDistance",value:function(t,a){var s=Pt.create(t,a);return this.closestPoint(s).distance(s)}},{key:"tangentAt",value:function(t){if(!this.isDifferentiable())return null;var a=this.start,s=this.end,u=this.pointAt(t),l=new n(a,s);return l.translate(u.x-a.x,u.y-a.y),l}},{key:"tangentAtLength",value:function(t){if(!this.isDifferentiable())return null;var a=this.start,s=this.end,u=this.pointAtLength(t),l=new n(a,s);return l.translate(u.x-a.x,u.y-a.y),l}},{key:"relativeCcw",value:function(t,a){var s=Pt.create(t,a),u=s.x-this.start.x,l=s.y-this.start.y,c=this.end.x-this.start.x,f=this.end.y-this.start.y,d=u*f-l*c;return d===0&&(d=u*c+l*f,d>0&&(u-=c,l-=f,d=u*c+l*f,d<0&&(d=0))),d<0?-1:d>0?1:0}},{key:"equals",value:function(t){return t!=null&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}},{key:"clone",value:function(){return new n(this.start,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.end.serialize()].join(" ")}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;try{if((n==null||n===o.toStringTag)&&Pt.isPoint(e.start)&&Pt.isPoint(e.end)&&typeof e.vector=="function"&&typeof e.bearing=="function"&&typeof e.parallel=="function"&&typeof e.intersect=="function")return!0}catch(t){return!1}return!1}o.isLine=i})(Sa||(Sa={}));var lh=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(e,t,a,s){var u;return Object(me.a)(this,n),u=r.call(this),u.x=e==null?0:e,u.y=t==null?0:t,u.a=a==null?0:a,u.b=s==null?0:s,u}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"center",get:function(){return new Pt(this.x,this.y)}},{key:"bbox",value:function(){return Br.fromEllipse(this)}},{key:"getCenter",value:function(){return this.center}},{key:"inflate",value:function(t,a){var s=t,u=a!=null?a:t;return this.a+=2*s,this.b+=2*u,this}},{key:"normalizedDistance",value:function(t,a){var s=Pt.create(t,a),u=s.x-this.x,l=s.y-this.y,c=this.a,f=this.b;return u*u/(c*c)+l*l/(f*f)}},{key:"containsPoint",value:function(t,a){return this.normalizedDistance(t,a)<=1}},{key:"intersectsWithLine",value:function(t){var a=[],s=this.a,u=this.b,l=t.start,c=t.end,f=t.vector(),d=l.diff(new Pt(this.x,this.y)),v=new Pt(f.x/(s*s),f.y/(u*u)),m=new Pt(d.x/(s*s),d.y/(u*u)),y=f.dot(v),C=f.dot(m),O=d.dot(m)-1,x=C*C-y*O;if(x<0)return null;if(x>0){var T=Math.sqrt(x),L=(-C-T)/y,_=(-C+T)/y;if((L<0||L>1)&&(_<0||_>1))return null;L>=0&&L<=1&&a.push(l.lerp(c,L)),_>=0&&_<=1&&a.push(l.lerp(c,_))}else{var z=-C/y;if(z>=0&&z<=1)a.push(l.lerp(c,z));else return null}return a}},{key:"intersectsWithLineFromCenterToPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Pt.clone(t);a&&s.rotate(a,this.getCenter());var u=s.x-this.x,l=s.y-this.y,c;if(u===0)return c=this.bbox().getNearestPointToPoint(s),a?c.rotate(-a,this.getCenter()):c;var f=l/u,d=f*f,v=this.a*this.a,m=this.b*this.b,y=Math.sqrt(1/(1/v+d/m));y=u<0?-y:y;var C=f*y;return c=new Pt(this.x+y,this.y+C),a?c.rotate(-a,this.getCenter()):c}},{key:"tangentTheta",value:function(t){var a=Pt.clone(t),s=a.x,u=a.y,l=this.a,c=this.b,f=this.bbox().center,d=f.x,v=f.y,m=30,y=s>f.x+l/2,C=s<f.x-l/2,O,x;return y||C?(x=s>f.x?u-m:u+m,O=l*l/(s-d)-l*l*(u-v)*(x-v)/(c*c*(s-d))+d):(O=u>f.y?s+m:s-m,x=c*c/(u-v)-c*c*(s-d)*(O-d)/(l*l*(u-v))+v),new Pt(O,x).theta(a)}},{key:"scale",value:function(t,a){return this.a*=t,this.b*=a,this}},{key:"rotate",value:function(t,a){var s=Br.fromEllipse(this);s.rotate(t,a);var u=n.fromRect(s);return this.a=u.a,this.b=u.b,this.x=u.x,this.y=u.y,this}},{key:"translate",value:function(t,a){var s=Pt.create(t,a);return this.x+=s.x,this.y+=s.y,this}},{key:"equals",value:function(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}},{key:"clone",value:function(){return new n(this.x,this.y,this.a,this.b)}},{key:"toJSON",value:function(){return{x:this.x,y:this.y,a:this.a,b:this.b}}},{key:"serialize",value:function(){return"".concat(this.x," ").concat(this.y," ").concat(this.a," ").concat(this.b)}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.a=="number"&&typeof e.b=="number"&&typeof e.inflate=="function"&&typeof e.normalizedDistance=="function"}o.isEllipse=i})(lh||(lh={})),function(o){function i(e,t,a,s){return e==null||typeof e=="number"?new o(e,t,a,s):r(e)}o.create=i;function r(e){return o.isEllipse(e)?e.clone():Array.isArray(e)?new o(e[0],e[1],e[2],e[3]):new o(e.x,e.y,e.a,e.b)}o.parse=r;function n(e){var t=e.center;return new o(t.x,t.y,e.width/2,e.height/2)}o.fromRect=n}(lh||(lh={}));var Bx=h("Nsem"),ku=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(e){var t;if(Object(me.a)(this,n),t=r.call(this),e!=null){if(typeof e=="string")return Object(Bx.a)(t,n.parse(e));t.points=e.map(function(a){return Pt.create(a)})}else t.points=[];return t}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"start",get:function(){return this.points.length===0?null:this.points[0]}},{key:"end",get:function(){return this.points.length===0?null:this.points[this.points.length-1]}},{key:"scale",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new Pt;return this.points.forEach(function(u){return u.scale(t,a,s)}),this}},{key:"rotate",value:function(t,a){return this.points.forEach(function(s){return s.rotate(t,a)}),this}},{key:"translate",value:function(t,a){var s=Pt.create(t,a);return this.points.forEach(function(u){return u.translate(s.x,s.y)}),this}},{key:"bbox",value:function(){if(this.points.length===0)return new Br;for(var t=Infinity,a=-Infinity,s=Infinity,u=-Infinity,l=this.points,c=0,f=l.length;c<f;c+=1){var d=l[c],v=d.x,m=d.y;v<t&&(t=v),v>a&&(a=v),m<s&&(s=m),m>u&&(u=m)}return new Br(t,s,a-t,u-s)}},{key:"closestPoint",value:function(t){var a=this.closestPointLength(t);return this.pointAtLength(a)}},{key:"closestPointLength",value:function(t){var a=this.points,s=a.length;if(s===0||s===1)return 0;for(var u=0,l=0,c=Infinity,f=0,d=s-1;f<d;f+=1){var v=new Sa(a[f],a[f+1]),m=v.length(),y=v.closestPointNormalizedLength(t),C=v.pointAt(y),O=C.squaredDistance(t);O<c&&(c=O,l=u+y*m),u+=m}return l}},{key:"closestPointNormalizedLength",value:function(t){var a=this.closestPointLength(t);if(a===0)return 0;var s=this.length();return s===0?0:a/s}},{key:"closestPointTangent",value:function(t){var a=this.closestPointLength(t);return this.tangentAtLength(a)}},{key:"containsPoint",value:function(t){if(this.points.length===0)return!1;for(var a=Pt.clone(t),s=a.x,u=a.y,l=this.points,c=l.length,f=c-1,d=0,v=0;v<c;v+=1){var m=l[f],y=l[v];if(a.equals(m))return!0;var C=new Sa(m,y);if(C.containsPoint(t))return!0;if(u<=m.y&&u>y.y||u>m.y&&u<=y.y){var O=m.x-s>y.x-s?m.x-s:y.x-s;if(O>=0){var x=new Pt(s+O,u),T=new Sa(t,x);C.intersectsWithLine(T)&&(d+=1)}}f=v}return d%2==1}},{key:"intersectsWithLine",value:function(t){for(var a=[],s=0,u=this.points.length-1;s<u;s+=1){var l=this.points[s],c=this.points[s+1],f=t.intersectsWithLine(new Sa(l,c));f&&a.push(f)}return a.length>0?a:null}},{key:"isDifferentiable",value:function(){for(var t=0,a=this.points.length-1;t<a;t+=1){var s=this.points[t],u=this.points[t+1],l=new Sa(s,u);if(l.isDifferentiable())return!0}return!1}},{key:"length",value:function(){for(var t=0,a=0,s=this.points.length-1;a<s;a+=1){var u=this.points[a],l=this.points[a+1];t+=u.distance(l)}return t}},{key:"pointAt",value:function(t){var a=this.points,s=a.length;if(s===0)return null;if(s===1||t<=0)return a[0].clone();if(t>=1)return a[s-1].clone();var u=this.length(),l=u*t;return this.pointAtLength(l)}},{key:"pointAtLength",value:function(t){var a=this.points,s=a.length;if(s===0)return null;if(s===1)return a[0].clone();var u=!0;t<0&&(u=!1,t=-t);for(var l=0,c=0,f=s-1;c<f;c+=1){var d=u?c:f-1-c,v=a[d],m=a[d+1],y=new Sa(v,m),C=v.distance(m);if(t<=l+C)return y.pointAtLength((u?1:-1)*(t-l));l+=C}var O=u?a[s-1]:a[0];return O.clone()}},{key:"tangentAt",value:function(t){var a=this.points,s=a.length;if(s===0||s===1)return null;t<0&&(t=0),t>1&&(t=1);var u=this.length(),l=u*t;return this.tangentAtLength(l)}},{key:"tangentAtLength",value:function(t){var a=this.points,s=a.length;if(s===0||s===1)return null;var u=!0;t<0&&(u=!1,t=-t);for(var l,c=0,f=0,d=s-1;f<d;f+=1){var v=u?f:d-1-f,m=a[v],y=a[v+1],C=new Sa(m,y),O=m.distance(y);if(C.isDifferentiable()){if(t<=c+O)return C.tangentAtLength((u?1:-1)*(t-c));l=C}c+=O}if(l){var x=u?1:0;return l.tangentAt(x)}return null}},{key:"simplify",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.points;if(a.length<3)return this;for(var s=t.threshold||0,u=0;a[u+2];){var l=u,c=u+1,f=u+2,d=a[l],v=a[c],m=a[f],y=new Sa(d,m),C=y.closestPoint(v),O=C.distance(v);O<=s?a.splice(c,1):u+=1}return this}},{key:"toHull",value:function(){var t=this.points,a=t.length;if(a===0)return new n;for(var s=t[0],u=1;u<a;u+=1)(t[u].y<s.y||t[u].y===s.y&&t[u].x>s.x)&&(s=t[u]);for(var l=[],c=0;c<a;c+=1){var f=s.theta(t[c]);f===0&&(f=360),l.push([t[c],c,f])}if(l.sort(function(An,br){var sn=An[2]-br[2];return sn===0&&(sn=br[1]-An[1]),sn}),l.length>2){var d=l[l.length-1];l.unshift(d)}for(var v={},m=[],y=function(br){return"".concat(br[0].toString(),"@").concat(br[1])};l.length!==0;){var C=l.pop(),O=C[0];if(!v[y(C)])for(var x=!1;!x;)if(m.length<2)m.push(C),x=!0;else{var T=m.pop(),L=T[0],_=m.pop(),z=_[0],Q=z.cross(L,O);if(Q<0)m.push(_),m.push(T),m.push(C),x=!0;else if(Q===0){var q=1e-10,ye=L.angleBetween(z,O);Math.abs(ye-180)<q||L.equals(O)||z.equals(L)?(v[y(T)]=L,m.push(_)):Math.abs((ye+1)%360-1)<q&&(m.push(_),l.push(T))}else v[y(T)]=L,m.push(_)}}m.length>2&&m.pop();for(var Ce,Ae=-1,Pe=0,qe=m.length;Pe<qe;Pe+=1){var lt=m[Pe][1];(Ce===void 0||lt<Ce)&&(Ce=lt,Ae=Pe)}var ze=[];if(Ae>0){var ht=m.slice(Ae),nn=m.slice(0,Ae);ze=ht.concat(nn)}else ze=m;for(var Tn=[],Kn=0,zn=ze.length;Kn<zn;Kn+=1)Tn.push(ze[Kn][0]);return new n(Tn)}},{key:"equals",value:function(t){var a=this;return t==null||t.points.length!==this.points.length?!1:t.points.every(function(s,u){return s.equals(a.points[u])})}},{key:"clone",value:function(){return new n(this.points.map(function(t){return t.clone()}))}},{key:"toJSON",value:function(){return this.points.map(function(t){return t.toJSON()})}},{key:"serialize",value:function(){return this.points.map(function(t){return"".concat(t.x,", ").concat(t.y)}).join(" ")}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.toHull=="function"&&typeof e.simplify=="function"}o.isPolyline=i})(ku||(ku={})),function(o){function i(r){var n=r.trim();if(n==="")return new o;for(var e=[],t=n.split(/\s*,\s*|\s+/),a=0,s=t.length;a<s;a+=2)e.push({x:+t[a],y:+t[a+1]});return new o(e)}o.parse=i}(ku||(ku={}));var jl=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(e,t,a,s){var u;return Object(me.a)(this,n),u=r.call(this),u.PRECISION=3,u.start=Pt.create(e),u.controlPoint1=Pt.create(t),u.controlPoint2=Pt.create(a),u.end=Pt.create(s),u}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"bbox",value:function(){for(var t=this.start,a=this.controlPoint1,s=this.controlPoint2,u=this.end,l=t.x,c=t.y,f=a.x,d=a.y,v=s.x,m=s.y,y=u.x,C=u.y,O=[],x=[],T=[[],[]],L,_,z,Q,q,ye,Ce,Ae,Pe=0;Pe<2;Pe+=1){if(Pe===0?(_=6*l-12*f+6*v,L=-3*l+9*f-9*v+3*y,z=3*f-3*l):(_=6*c-12*d+6*m,L=-3*c+9*d-9*m+3*C,z=3*d-3*c),Math.abs(L)<1e-12){if(Math.abs(_)<1e-12)continue;Q=-z/_,Q>0&&Q<1&&x.push(Q);continue}Ce=_*_-4*z*L,Ae=Math.sqrt(Ce),!(Ce<0)&&(q=(-_+Ae)/(2*L),q>0&&q<1&&x.push(q),ye=(-_-Ae)/(2*L),ye>0&&ye<1&&x.push(ye))}for(var qe,lt,ze,ht=x.length,nn=ht;ht;)ht-=1,Q=x[ht],ze=1-Q,qe=ze*ze*ze*l+3*ze*ze*Q*f+3*ze*Q*Q*v+Q*Q*Q*y,T[0][ht]=qe,lt=ze*ze*ze*c+3*ze*ze*Q*d+3*ze*Q*Q*m+Q*Q*Q*C,T[1][ht]=lt,O[ht]={X:qe,Y:lt};x[nn]=0,x[nn+1]=1,O[nn]={X:l,Y:c},O[nn+1]={X:y,Y:C},T[0][nn]=l,T[1][nn]=c,T[0][nn+1]=y,T[1][nn+1]=C,x.length=nn+2,T[0].length=nn+2,T[1].length=nn+2,O.length=nn+2;var Tn=Math.min.apply(null,T[0]),Kn=Math.min.apply(null,T[1]),zn=Math.max.apply(null,T[0]),An=Math.max.apply(null,T[1]);return new Br(Tn,Kn,zn-Tn,An-Kn)}},{key:"closestPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.pointAtT(this.closestPointT(t,a))}},{key:"closestPointLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(a);return this.lengthAtT(this.closestPointT(t,s),s)}},{key:"closestPointNormalizedLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(a),u=this.closestPointLength(t,s);if(!u)return 0;var l=this.length(s);return l===0?0:u/l}},{key:"closestPointT",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getPrecision(a),u=this.getDivisions(a),l=Math.pow(10,-s),c=null,f=0,d=0,v=0,m=0,y=0,C=null,O=u.length,x=O>0?1/O:0;for(u.forEach(function(ht,nn){var Tn=ht.start.distance(t),Kn=ht.end.distance(t),zn=Tn+Kn;(C==null||zn<C)&&(c=ht,f=nn*x,d=(nn+1)*x,v=Tn,m=Kn,C=zn,y=ht.endpointDistance())});;){var T=v?Math.abs(v-m)/v:0,L=m!=null?Math.abs(v-m)/m:0,_=T<l||L<l,z=v?v<y*l:!0,Q=m?m<y*l:!0,q=z||Q;if(_||q)return v<=m?f:d;var ye=c.divide(.5);x/=2;var Ce=ye[0].start.distance(t),Ae=ye[0].end.distance(t),Pe=Ce+Ae,qe=ye[1].start.distance(t),lt=ye[1].end.distance(t),ze=qe+lt;Pe<=ze?(c=ye[0],d-=x,v=Ce,m=Ae):(c=ye[1],f+=x,v=qe,m=lt)}}},{key:"closestPointTangent",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.tangentAtT(this.closestPointT(t,a))}},{key:"containsPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.toPolyline(a);return s.containsPoint(t)}},{key:"divideAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);var s=this.tAt(t,a);return this.divideAtT(s)}},{key:"divideAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.tAtLength(t,a);return this.divideAtT(s)}},{key:"divide",value:function(t){return this.divideAtT(t)}},{key:"divideAtT",value:function(t){var a=this.start,s=this.controlPoint1,u=this.controlPoint2,l=this.end;if(t<=0)return[new n(a,a,a,a),new n(a,s,u,l)];if(t>=1)return[new n(a,s,u,l),new n(l,l,l,l)];var c=this.getSkeletonPoints(t),f=c.startControlPoint1,d=c.startControlPoint2,v=c.divider,m=c.dividerControlPoint1,y=c.dividerControlPoint2;return[new n(a,f,d,v),new n(v,m,y,l)]}},{key:"endpointDistance",value:function(){return this.start.distance(this.end)}},{key:"getSkeletonPoints",value:function(t){var a=this.start,s=this.controlPoint1,u=this.controlPoint2,l=this.end;if(t<=0)return{startControlPoint1:a.clone(),startControlPoint2:a.clone(),divider:a.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:u.clone()};if(t>=1)return{startControlPoint1:s.clone(),startControlPoint2:u.clone(),divider:l.clone(),dividerControlPoint1:l.clone(),dividerControlPoint2:l.clone()};var c=new Sa(a,s).pointAt(t),f=new Sa(s,u).pointAt(t),d=new Sa(u,l).pointAt(t),v=new Sa(c,f).pointAt(t),m=new Sa(f,d).pointAt(t),y=new Sa(v,m).pointAt(t);return{startControlPoint1:c,startControlPoint2:v,divider:y,dividerControlPoint1:m,dividerControlPoint2:d}}},{key:"getSubdivisions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getPrecision(t),s=[new n(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(a===0)return s;for(var u=this.endpointDistance(),l=Math.pow(10,-a),c=0,f=function(){c+=1;var m=[];s.forEach(function(O){var x=O.divide(.5);m.push(x[0],x[1])});var y=m.reduce(function(O,x){return O+x.endpointDistance()},0),C=y!==0?(y-u)/y:0;if(c>1&&C<l)return{v:m};s=m,u=y};;){var d=f();if(typeof d=="object")return d.v}}},{key:"length",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getDivisions(t);return a.reduce(function(s,u){return s+u.endpointDistance()},0)}},{key:"lengthAtT",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return 0;var s=a.precision===void 0?this.PRECISION:a.precision,u=this.divide(t)[0];return u.length({precision:s})}},{key:"pointAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var s=this.tAt(t,a);return this.pointAtT(s)}},{key:"pointAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.tAtLength(t,a);return this.pointAtT(s)}},{key:"pointAtT",value:function(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}},{key:"isDifferentiable",value:function(){var t=this.start,a=this.controlPoint1,s=this.controlPoint2,u=this.end;return!(t.equals(a)&&a.equals(s)&&s.equals(u))}},{key:"tangentAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);var s=this.tAt(t,a);return this.tangentAtT(s)}},{key:"tangentAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isDifferentiable())return null;var s=this.tAtLength(t,a);return this.tangentAtT(s)}},{key:"tangentAtT",value:function(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);var a=this.getSkeletonPoints(t),s=a.startControlPoint2,u=a.dividerControlPoint1,l=a.divider,c=new Sa(s,u);return c.translate(l.x-s.x,l.y-s.y),c}},{key:"getPrecision",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.precision==null?this.PRECISION:t.precision}},{key:"getDivisions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.subdivisions!=null)return t.subdivisions;var a=this.getPrecision(t);return this.getSubdivisions({precision:a})}},{key:"getOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getPrecision(t),s=this.getDivisions(t);return{precision:a,subdivisions:s}}},{key:"tAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t<=0)return 0;if(t>=1)return 1;var s=this.getOptions(a),u=this.length(s),l=u*t;return this.tAtLength(l,s)}},{key:"tAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(a),l=this.getDivisions(a),c={precision:u,subdivisions:l},f=null,d,v,m=0,y=0,C=0,O=l.length,x=O>0?1/O:0,T=0;T<O;T+=1){var L=s?T:O-1-T,_=l[T],z=_.endpointDistance();if(t<=C+z){f=_,d=L*x,v=(L+1)*x,m=s?t-C:z+C-t,y=s?z+C-t:t-C;break}C+=z}if(f==null)return s?1:0;for(var Q=this.length(c),q=Math.pow(10,-u);;){var ye=void 0;if(ye=Q!==0?m/Q:0,ye<q)return d;if(ye=Q!==0?y/Q:0,ye<q)return v;var Ce=void 0,Ae=void 0,Pe=f.divide(.5);x/=2;var qe=Pe[0].endpointDistance(),lt=Pe[1].endpointDistance();m<=qe?(f=Pe[0],v-=x,Ce=m,Ae=qe-Ce):(f=Pe[1],d+=x,Ce=m-qe,Ae=lt-Ce),m=Ce,y=Ae}}},{key:"toPoints",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getDivisions(t),s=[a[0].start.clone()];return a.forEach(function(u){return s.push(u.end.clone())}),s}},{key:"toPolyline",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new ku(this.toPoints(t))}},{key:"scale",value:function(t,a,s){return this.start.scale(t,a,s),this.controlPoint1.scale(t,a,s),this.controlPoint2.scale(t,a,s),this.end.scale(t,a,s),this}},{key:"rotate",value:function(t,a){return this.start.rotate(t,a),this.controlPoint1.rotate(t,a),this.controlPoint2.rotate(t,a),this.end.rotate(t,a),this}},{key:"translate",value:function(t,a){return typeof t=="number"?(this.start.translate(t,a),this.controlPoint1.translate(t,a),this.controlPoint2.translate(t,a),this.end.translate(t,a)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}},{key:"equals",value:function(t){return t!=null&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}},{key:"clone",value:function(){return new n(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;try{if((n==null||n===o.toStringTag)&&Pt.isPoint(e.start)&&Pt.isPoint(e.controlPoint1)&&Pt.isPoint(e.controlPoint2)&&Pt.isPoint(e.end)&&typeof e.toPoints=="function"&&typeof e.toPolyline=="function")return!0}catch(t){return!1}return!1}o.isCurve=i})(jl||(jl={})),function(o){function i(e){var t=e.length,a=[],s=[],u=2;a[0]=e[0]/u;for(var l=1;l<t;l+=1)s[l]=1/u,u=(l<t-1?4:3.5)-s[l],a[l]=(e[l]-a[l-1])/u;for(var c=1;c<t;c+=1)a[t-c-1]-=s[t-c]*a[t-c];return a}function r(e){var t=e.map(function(y){return Pt.clone(y)}),a=[],s=[],u=t.length-1;if(u===1)return a[0]=new Pt((2*t[0].x+t[1].x)/3,(2*t[0].y+t[1].y)/3),s[0]=new Pt(2*a[0].x-t[0].x,2*a[0].y-t[0].y),[a,s];for(var l=[],c=1;c<u-1;c+=1)l[c]=4*t[c].x+2*t[c+1].x;l[0]=t[0].x+2*t[1].x,l[u-1]=(8*t[u-1].x+t[u].x)/2;for(var f=i(l),d=1;d<u-1;d+=1)l[d]=4*t[d].y+2*t[d+1].y;l[0]=t[0].y+2*t[1].y,l[u-1]=(8*t[u-1].y+t[u].y)/2;for(var v=i(l),m=0;m<u;m+=1)a.push(new Pt(f[m],v[m])),m<u-1?s.push(new Pt(2*t[m+1].x-f[m+1],2*t[m+1].y-v[m+1])):s.push(new Pt((t[u].x+f[u-1])/2,(t[u].y+v[u-1])/2));return[a,s]}function n(e){if(e==null||Array.isArray(e)&&e.length<2)throw new Error("At least 2 points are required");for(var t=r(e),a=[],s=0,u=t[0].length;s<u;s+=1){var l=new Pt(t[0][s].x,t[0][s].y),c=new Pt(t[1][s].x,t[1][s].y);a.push(new o(e[s],l,c,e[s+1]))}return a}o.throughPoints=n}(jl||(jl={}));var Zb=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.isVisible=!0,n.isSegment=!0,n.isSubpathStart=!1,n}return Object(ue.a)(r,[{key:"end",get:function(){return this.endPoint}},{key:"start",get:function(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}},{key:"closestPointT",value:function(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}},{key:"lengthAtT",value:function(e,t){if(e<=0)return 0;var a=this.length();return e>=1?a:a*e}},{key:"divideAtT",value:function(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}},{key:"pointAtT",value:function(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}},{key:"tangentAtT",value:function(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}]),r}(uh),kf=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n,e){var t;return Object(me.a)(this,r),t=i.call(this),Sa.isLine(n)?t.endPoint=n.end.clone().round(2):t.endPoint=Pt.create(n,e).round(2),t}return Object(ue.a)(r,[{key:"type",get:function(){return"L"}},{key:"line",get:function(){return new Sa(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[new r(t[0]),new r(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[new r(t[0]),new r(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return this.previousSegment==null?!1:!this.start.equals(this.end)}},{key:"clone",value:function(){return new r(this.end)}},{key:"scale",value:function(e,t,a){return this.end.scale(e,t,a),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}}]),r}(Zb);(function(o){function i(){for(var r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];var t=n.length,a=n[0];if(Sa.isLine(a))return new o(a);if(Pt.isPointLike(a))return t===1?new o(a):n.map(function(f){return new o(f)});if(t===2)return new o(+n[0],+n[1]);for(var s=[],u=0;u<t;u+=2){var l=+n[u],c=+n[u+1];s.push(new o(l,c))}return s}o.create=i})(kf||(kf={}));var Qb=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"end",get:function(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}},{key:"type",get:function(){return"Z"}},{key:"line",get:function(){return new Sa(this.start,this.end)}},{key:"bbox",value:function(){return this.line.bbox()}},{key:"closestPoint",value:function(e){return this.line.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.line.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.line.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.line.closestPointTangent(e)}},{key:"length",value:function(){return this.line.length()}},{key:"divideAt",value:function(e){var t=this.line.divideAt(e);return[t[1].isDifferentiable()?new kf(t[0]):this.clone(),new kf(t[1])]}},{key:"divideAtLength",value:function(e){var t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new kf(t[0]):this.clone(),new kf(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.line.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.line.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.line.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.line.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}},{key:"scale",value:function(){return this}},{key:"rotate",value:function(){return this}},{key:"translate",value:function(){return this}},{key:"equals",value:function(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}},{key:"clone",value:function(){return new r}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){return this.type}}]),r}(Zb);(function(o){function i(){return new o}o.create=i})(Qb||(Qb={}));var qb=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n,e){var t;return Object(me.a)(this,r),t=i.call(this),t.isVisible=!1,t.isSubpathStart=!0,Sa.isLine(n)||jl.isCurve(n)?t.endPoint=n.end.clone().round(2):t.endPoint=Pt.create(n,e).round(2),t}return Object(ue.a)(r,[{key:"start",get:function(){throw new Error("Illegal access. Moveto segments should not need a start property.")}},{key:"type",get:function(){return"M"}},{key:"bbox",value:function(){return null}},{key:"closestPoint",value:function(){return this.end.clone()}},{key:"closestPointLength",value:function(){return 0}},{key:"closestPointNormalizedLength",value:function(){return 0}},{key:"closestPointT",value:function(){return 1}},{key:"closestPointTangent",value:function(){return null}},{key:"length",value:function(){return 0}},{key:"lengthAtT",value:function(){return 0}},{key:"divideAt",value:function(){return[this.clone(),this.clone()]}},{key:"divideAtLength",value:function(){return[this.clone(),this.clone()]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(){return this.end.clone()}},{key:"pointAtLength",value:function(){return this.end.clone()}},{key:"pointAtT",value:function(){return this.end.clone()}},{key:"tangentAt",value:function(){return null}},{key:"tangentAtLength",value:function(){return null}},{key:"tangentAtT",value:function(){return null}},{key:"isDifferentiable",value:function(){return!1}},{key:"scale",value:function(e,t,a){return this.end.scale(e,t,a),this}},{key:"rotate",value:function(e,t){return this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?this.end.translate(e,t):this.end.translate(e),this}},{key:"clone",value:function(){return new r(this.end)}},{key:"equals",value:function(e){return this.type===e.type&&this.end.equals(e.end)}},{key:"toJSON",value:function(){return{type:this.type,end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.end;return"".concat(this.type," ").concat(e.x," ").concat(e.y)}}]),r}(Zb);(function(o){function i(){var r=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(Sa.isLine(n))return new o(n);if(jl.isCurve(n))return new o(n);if(Pt.isPointLike(n)){if(r===1)return new o(n);for(var e=[],t=0;t<r;t+=1)t===0?e.push(new o(t<0||arguments.length<=t?void 0:arguments[t])):e.push(new kf(t<0||arguments.length<=t?void 0:arguments[t]));return e}if(r===2)return new o(+(arguments.length<=0?void 0:arguments[0]),+(arguments.length<=1?void 0:arguments[1]));for(var a=[],s=0;s<r;s+=2){var u=+(s<0||arguments.length<=s?void 0:arguments[s]),l=+(s+1<0||arguments.length<=s+1?void 0:arguments[s+1]);s===0?a.push(new o(u,l)):a.push(new kf(u,l))}return a}o.create=i})(qb||(qb={}));var e1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n,e,t,a,s,u){var l;return Object(me.a)(this,r),l=i.call(this),jl.isCurve(n)?(l.controlPoint1=n.controlPoint1.clone().round(2),l.controlPoint2=n.controlPoint2.clone().round(2),l.endPoint=n.end.clone().round(2)):typeof n=="number"?(l.controlPoint1=new Pt(n,e).round(2),l.controlPoint2=new Pt(t,a).round(2),l.endPoint=new Pt(s,u).round(2)):(l.controlPoint1=Pt.create(n).round(2),l.controlPoint2=Pt.create(e).round(2),l.endPoint=Pt.create(t).round(2)),l}return Object(ue.a)(r,[{key:"type",get:function(){return"C"}},{key:"curve",get:function(){return new jl(this.start,this.controlPoint1,this.controlPoint2,this.end)}},{key:"bbox",value:function(){return this.curve.bbox()}},{key:"closestPoint",value:function(e){return this.curve.closestPoint(e)}},{key:"closestPointLength",value:function(e){return this.curve.closestPointLength(e)}},{key:"closestPointNormalizedLength",value:function(e){return this.curve.closestPointNormalizedLength(e)}},{key:"closestPointTangent",value:function(e){return this.curve.closestPointTangent(e)}},{key:"length",value:function(){return this.curve.length()}},{key:"divideAt",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.curve.divideAt(e,t);return[new r(a[0]),new r(a[1])]}},{key:"divideAtLength",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.curve.divideAtLength(e,t);return[new r(a[0]),new r(a[1])]}},{key:"divideAtT",value:function(e){var t=this.curve.divideAtT(e);return[new r(t[0]),new r(t[1])]}},{key:"getSubdivisions",value:function(){return[]}},{key:"pointAt",value:function(e){return this.curve.pointAt(e)}},{key:"pointAtLength",value:function(e){return this.curve.pointAtLength(e)}},{key:"tangentAt",value:function(e){return this.curve.tangentAt(e)}},{key:"tangentAtLength",value:function(e){return this.curve.tangentAtLength(e)}},{key:"isDifferentiable",value:function(){if(!this.previousSegment)return!1;var e=this.start,t=this.controlPoint1,a=this.controlPoint2,s=this.end;return!(e.equals(t)&&t.equals(a)&&a.equals(s))}},{key:"scale",value:function(e,t,a){return this.controlPoint1.scale(e,t,a),this.controlPoint2.scale(e,t,a),this.end.scale(e,t,a),this}},{key:"rotate",value:function(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}},{key:"translate",value:function(e,t){return typeof e=="number"?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}},{key:"equals",value:function(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}},{key:"clone",value:function(){return new r(this.controlPoint1,this.controlPoint2,this.end)}},{key:"toJSON",value:function(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}},{key:"serialize",value:function(){var e=this.controlPoint1,t=this.controlPoint2,a=this.end;return[this.type,e.x,e.y,t.x,t.y,a.x,a.y].join(" ")}}]),r}(Zb);(function(o){function i(){var r=arguments.length,n=arguments.length<=0?void 0:arguments[0];if(jl.isCurve(n))return new o(n);if(Pt.isPointLike(n)){if(r===3)return new o(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]);for(var e=[],t=0;t<r;t+=3)e.push(new o(t<0||arguments.length<=t?void 0:arguments[t],t+1<0||arguments.length<=t+1?void 0:arguments[t+1],t+2<0||arguments.length<=t+2?void 0:arguments[t+2]));return e}if(r===6)return new o(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2],arguments.length<=3?void 0:arguments[3],arguments.length<=4?void 0:arguments[4],arguments.length<=5?void 0:arguments[5]);for(var a=[],s=0;s<r;s+=6)a.push(new o(s<0||arguments.length<=s?void 0:arguments[s],s+1<0||arguments.length<=s+1?void 0:arguments[s+1],s+2<0||arguments.length<=s+2?void 0:arguments[s+2],s+3<0||arguments.length<=s+3?void 0:arguments[s+3],s+4<0||arguments.length<=s+4?void 0:arguments[s+4],s+5<0||arguments.length<=s+5?void 0:arguments[s+5]));return a}o.create=i})(e1||(e1={}));function t1(o,i,r){return{x:o*Math.cos(r)-i*Math.sin(r),y:o*Math.sin(r)+i*Math.cos(r)}}function KT(o,i,r,n,e,t){var a=1/3,s=2/3;return[a*o+s*r,a*i+s*n,a*e+s*r,a*t+s*n,e,t]}function XT(o,i,r,n,e,t,a,s,u,l){var c=Math.PI*120/180,f=Math.PI/180*(+e||0),d=[],v,m,y,C,O;if(l)m=l[0],y=l[1],C=l[2],O=l[3];else{v=t1(o,i,-f),o=v.x,i=v.y,v=t1(s,u,-f),s=v.x,u=v.y;var x=(o-s)/2,T=(i-u)/2,L=x*x/(r*r)+T*T/(n*n);L>1&&(L=Math.sqrt(L),r=L*r,n=L*n);var _=r*r,z=n*n,Q=(t===a?-1:1)*Math.sqrt(Math.abs((_*z-_*T*T-z*x*x)/(_*T*T+z*x*x)));C=Q*r*T/n+(o+s)/2,O=Q*-n*x/r+(i+u)/2,m=Math.asin((i-O)/n),y=Math.asin((u-O)/n),m=o<C?Math.PI-m:m,y=s<C?Math.PI-y:y,m<0&&(m=Math.PI*2+m),y<0&&(y=Math.PI*2+y),a&&m>y&&(m-=Math.PI*2),!a&&y>m&&(y-=Math.PI*2)}var q=y-m;if(Math.abs(q)>c){var ye=y,Ce=s,Ae=u;y=m+c*(a&&y>m?1:-1),s=C+r*Math.cos(y),u=O+n*Math.sin(y),d=XT(s,u,r,n,e,0,a,Ce,Ae,[y,ye,C,O])}q=y-m;var Pe=Math.cos(m),qe=Math.sin(m),lt=Math.cos(y),ze=Math.sin(y),ht=Math.tan(q/4),nn=4/3*(r*ht),Tn=4/3*(n*ht),Kn=[o,i],zn=[o+nn*qe,i-Tn*Pe],An=[s+nn*ze,u-Tn*lt],br=[s,u];if(zn[0]=2*Kn[0]-zn[0],zn[1]=2*Kn[1]-zn[1],l)return[zn,An,br].concat(d);{d=[zn,An,br].concat(d).join().split(",");for(var sn=[],Xn=d.length,dr=0;dr<Xn;dr+=1)sn[dr]=dr%2?t1(+d[dr-1],+d[dr],f).y:t1(+d[dr],+d[dr+1],f).x;return sn}}function sF(o){if(!o)return null;var i=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,r=new RegExp("([a-z])[".concat(i,",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[").concat(i,"]*,?[").concat(i,"]*)+)"),"ig"),n=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[".concat(i,"]*,?[").concat(i,"]*"),"ig"),e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},t=[];return o.replace(r,function(a,s,u){var l=[],c=s.toLowerCase();u.replace(n,function(d,v){return v&&l.push(+v),d}),c==="m"&&l.length>2&&(t.push([s].concat(Object(We.a)(l.splice(0,2)))),c="l",s=s==="m"?"l":"L");for(var f=e[c];l.length>=f&&(t.push([s].concat(Object(We.a)(l.splice(0,f)))),!!f););return a}),t}function uF(o){var i=sF(o);if(!i||!i.length)return[["M",0,0]];for(var r=0,n=0,e=0,t=0,a=[],s=0,u=i.length;s<u;s+=1){var l=[];a.push(l);var c=i[s],f=c[0];if(f!==f.toUpperCase())switch(l[0]=f.toUpperCase(),l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+c[6]+r,l[7]=+c[7]+n;break;case"V":l[1]=+c[1]+n;break;case"H":l[1]=+c[1]+r;break;case"M":e=+c[1]+r,t=+c[2]+n;for(var d=1,v=c.length;d<v;d+=1)l[d]=+c[d]+(d%2?r:n);break;default:for(var m=1,y=c.length;m<y;m+=1)l[m]=+c[m]+(m%2?r:n);break}else for(var C=0,O=c.length;C<O;C+=1)l[C]=c[C];switch(l[0]){case"Z":r=+e,n=+t;break;case"H":r=l[1];break;case"V":n=l[1];break;case"M":e=l[l.length-2],t=l[l.length-1],r=l[l.length-2],n=l[l.length-1];break;default:r=l[l.length-2],n=l[l.length-1];break}}return a}function lF(o){var i=uF(o),r={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(d,v,m){var y,C;if(!d)return["C",v.x,v.y,v.x,v.y,v.x,v.y];switch(d[0]in{T:1,Q:1}||(v.qx=null,v.qy=null),d[0]){case"M":v.X=d[1],v.Y=d[2];break;case"A":return parseFloat(d[1])===0||parseFloat(d[2])===0?["L",d[6],d[7]]:["C"].concat(XT.apply(0,[v.x,v.y].concat(d.slice(1))));case"S":return m==="C"||m==="S"?(y=v.x*2-v.bx,C=v.y*2-v.by):(y=v.x,C=v.y),["C",y,C].concat(d.slice(1));case"T":return m==="Q"||m==="T"?(v.qx=v.x*2-v.qx,v.qy=v.y*2-v.qy):(v.qx=v.x,v.qy=v.y),["C"].concat(KT(v.x,v.y,v.qx,v.qy,d[1],d[2]));case"Q":return v.qx=d[1],v.qy=d[2],["C"].concat(KT(v.x,v.y,d[1],d[2],d[3],d[4]));case"H":return["L"].concat(d[1],v.y);case"V":return["L"].concat(v.x,d[1]);case"L":break;case"Z":break;default:break}return d}function e(d,v){if(d[v].length>7){d[v].shift();for(var m=d[v];m.length;)t[v]="A",v+=1,d.splice(v,0,["C"].concat(m.splice(0,6)));d.splice(v,1),s=i.length}}for(var t=[],a="",s=i.length,u=0;u<s;u+=1){var l="";i[u]&&(l=i[u][0]),l!=="C"&&(t[u]=l,u>0&&(a=t[u-1])),i[u]=n(i[u],r,a),t[u]!=="A"&&l==="C"&&(t[u]="C"),e(i,u);var c=i[u],f=c.length;r.x=c[f-2],r.y=c[f-1],r.bx=parseFloat(c[f-4])||r.x,r.by=parseFloat(c[f-3])||r.y}return(!i[0][0]||i[0][0]!=="M")&&i.unshift(["M",0,0]),i}function cF(o){return lF(o).map(function(i){return i.map(function(r){return typeof r=="string"?r:Sv(r,2)})}).join(",").split(",").join(" ")}var fF=new RegExp("^[\\s\\dLMCZz,.]*$");function dF(o){return typeof o!="string"?!1:fF.test(o)}function Gx(o,i){return(o%i+i)%i}function hF(o,i,r,n,e){var t=[],a=o[o.length-1],s=i!=null&&i>0,u=i||0;if(n&&s){o=o.slice();var l=o[0],c=new Pt(a.x+(l.x-a.x)/2,a.y+(l.y-a.y)/2);o.splice(0,0,c)}var f=o[0],d=1;for(r?t.push("M",f.x,f.y):t.push("L",f.x,f.y);d<(n?o.length:o.length-1);){var v=o[Gx(d,o.length)],m=f.x-v.x,y=f.y-v.y;if(s&&(m!==0||y!==0)&&(e==null||e.indexOf(d-1)<0)){var C=Math.sqrt(m*m+y*y),O=m*Math.min(u,C/2)/C,x=y*Math.min(u,C/2)/C,T=v.x+O,L=v.y+x;t.push("L",T,L);for(var _=o[Gx(d+1,o.length)];d<o.length-2&&Math.round(_.x-v.x)===0&&Math.round(_.y-v.y)===0;)_=o[Gx(d+2,o.length)],d+=1;m=_.x-v.x,y=_.y-v.y,C=Math.max(1,Math.sqrt(m*m+y*y));var z=m*Math.min(u,C/2)/C,Q=y*Math.min(u,C/2)/C,q=v.x+z,ye=v.y+Q;t.push("Q",v.x,v.y,q,ye),v=new Pt(q,ye)}else t.push("L",v.x,v.y);f=v,d+=1}return n?t.push("Z"):t.push("L",a.x,a.y),t.map(function(Ce){return typeof Ce=="string"?Ce:+Ce.toFixed(3)}).join(" ")}function YT(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=[];return o&&o.length&&o.forEach(function(n){Array.isArray(n)?r.push({x:n[0],y:n[1]}):r.push({x:n.x,y:n.y})}),hF(r,i.round,i.initialMove==null||i.initialMove,i.close,i.exclude)}function n1(o,i,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0;if(r===0||n===0)return[];s-=o,u-=i,r=Math.abs(r),n=Math.abs(n);var l=-s/2,c=-u/2,f=Math.cos(e*Math.PI/180),d=Math.sin(e*Math.PI/180),v=f*l+d*c,m=-1*d*l+f*c,y=v*v,C=m*m,O=r*r,x=n*n,T=y/O+C/x,L;if(T>1)r=Math.sqrt(T)*r,n=Math.sqrt(T)*n,L=0;else{var _=1;t===a&&(_=-1),L=_*Math.sqrt((O*x-O*C-x*y)/(O*C+x*y))}var z=L*r*m/n,Q=-1*L*n*v/r,q=f*z-d*Q+s/2,ye=d*z+f*Q+u/2,Ce=Math.atan2((m-Q)/n,(v-z)/r)-Math.atan2(0,1),Ae=Ce>=0?Ce:2*Math.PI+Ce;Ce=Math.atan2((-m-Q)/n,(-v-z)/r)-Math.atan2((m-Q)/n,(v-z)/r);var Pe=Ce>=0?Ce:2*Math.PI+Ce;a===0&&Pe>0?Pe-=2*Math.PI:a!==0&&Pe<0&&(Pe+=2*Math.PI);for(var qe=Pe*2/Math.PI,lt=Math.ceil(qe<0?-1*qe:qe),ze=Pe/lt,ht=8/3*Math.sin(ze/4)*Math.sin(ze/4)/Math.sin(ze/2),nn=f*r,Tn=f*n,Kn=d*r,zn=d*n,An=Math.cos(Ae),br=Math.sin(Ae),sn=-ht*(nn*br+zn*An),Xn=-ht*(Kn*br-Tn*An),dr=0,ga=0,ca=[],Ta=0;Ta<lt;Ta+=1){Ae+=ze,An=Math.cos(Ae),br=Math.sin(Ae),dr=nn*An-zn*br+q,ga=Kn*An+Tn*br+ye;var La=-ht*(nn*br+zn*An),yo=-ht*(Kn*br-Tn*An),Jo=Ta*6;ca[Jo]=Number(sn+o),ca[Jo+1]=Number(Xn+i),ca[Jo+2]=Number(dr-La+o),ca[Jo+3]=Number(ga-yo+i),ca[Jo+4]=Number(dr+o),ca[Jo+5]=Number(ga+i),sn=dr+La,Xn=ga+yo}return ca.map(function(Ti){return+Ti.toFixed(2)})}function vF(o,i,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0,s=arguments.length>7?arguments[7]:void 0,u=arguments.length>8?arguments[8]:void 0,l=[],c=n1(o,i,r,n,e,t,a,s,u);if(c!=null)for(var f=0,d=c.length;f<d;f+=6)l.push("C",c[f],c[f+1],c[f+2],c[f+3],c[f+4],c[f+5]);return l.join(" ")}var pi=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(e){var t;if(Object(me.a)(this,n),t=r.call(this),t.PRECISION=3,t.segments=[],Array.isArray(e))if(Sa.isLine(e[0])||jl.isCurve(e[0])){var a=null,s=e;s.forEach(function(l,c){c===0&&t.appendSegment(n.createSegment("M",l.start)),a!=null&&!a.end.equals(l.start)&&t.appendSegment(n.createSegment("M",l.start)),Sa.isLine(l)?t.appendSegment(n.createSegment("L",l.end)):jl.isCurve(l)&&t.appendSegment(n.createSegment("C",l.controlPoint1,l.controlPoint2,l.end)),a=l})}else{var u=e;u.forEach(function(l){l.isSegment&&t.appendSegment(l)})}else e!=null&&(Sa.isLine(e)?(t.appendSegment(n.createSegment("M",e.start)),t.appendSegment(n.createSegment("L",e.end))):jl.isCurve(e)?(t.appendSegment(n.createSegment("M",e.start)),t.appendSegment(n.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):ku.isPolyline(e)?e.points&&e.points.length&&e.points.forEach(function(l,c){var f=c===0?n.createSegment("M",l):n.createSegment("L",l);t.appendSegment(f)}):e.isSegment&&t.appendSegment(e));return t}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"start",get:function(){var t=this.segments,a=t.length;if(a===0)return null;for(var s=0;s<a;s+=1){var u=t[s];if(u.isVisible)return u.start}return t[a-1].end}},{key:"end",get:function(){var t=this.segments,a=t.length;if(a===0)return null;for(var s=a-1;s>=0;s-=1){var u=t[s];if(u.isVisible)return u.end}return t[a-1].end}},{key:"moveTo",value:function(){for(var t,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.appendSegment((t=qb.create).call.apply(t,[null].concat(s)))}},{key:"lineTo",value:function(){for(var t,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.appendSegment((t=kf.create).call.apply(t,[null].concat(s)))}},{key:"curveTo",value:function(){for(var t,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return this.appendSegment((t=e1.create).call.apply(t,[null].concat(s)))}},{key:"arcTo",value:function(t,a,s,u,l,c,f){var d=this.end||new Pt,v=typeof c=="number"?n1(d.x,d.y,t,a,s,u,l,c,f):n1(d.x,d.y,t,a,s,u,l,c.x,c.y);if(v!=null)for(var m=0,y=v.length;m<y;m+=6)this.curveTo(v[m],v[m+1],v[m+2],v[m+3],v[m+4],v[m+5]);return this}},{key:"quadTo",value:function(t,a,s,u){var l=this.end||new Pt,c=["M",l.x,l.y];if(typeof t=="number")c.push("Q",t,a,s,u);else{var f=a;c.push("Q",t.x,t.y,f.x,f.y)}var d=n.parse(c.join(" "));return this.appendSegment(d.segments.slice(1)),this}},{key:"close",value:function(){return this.appendSegment(Qb.create())}},{key:"drawPoints",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=YT(t,a),u=n.parse(s);u&&u.segments&&this.appendSegment(u.segments)}},{key:"bbox",value:function(){var t=this.segments,a=t.length;if(a===0)return null;for(var s,u=0;u<a;u+=1){var l=t[u];if(l.isVisible){var c=l.bbox();c!=null&&(s=s?s.union(c):c)}}if(s!=null)return s;var f=t[a-1];return new Br(f.end.x,f.end.y,0,0)}},{key:"appendSegment",value:function(t){var a=this.segments.length,s=a!==0?this.segments[a-1]:null,u,l=null;if(Array.isArray(t))for(var c=0,f=t.length;c<f;c+=1){var d=t[c];u=this.prepareSegment(d,s,l),this.segments.push(u),s=u}else t!=null&&t.isSegment&&(u=this.prepareSegment(t,s,l),this.segments.push(u));return this}},{key:"insertSegment",value:function(t,a){var s=this.segments.length;if(t<0&&(t=s+t+1),t>s||t<0)throw new Error("Index out of range.");var u,l=null,c=null;if(s!==0&&(t>=1?(l=this.segments[t-1],c=l.nextSegment):(l=null,c=this.segments[0])),!Array.isArray(a))u=this.prepareSegment(a,l,c),this.segments.splice(t,0,u);else for(var f=0,d=a.length;f<d;f+=1){var v=a[f];u=this.prepareSegment(v,l,c),this.segments.splice(t+f,0,u),l=u}return this}},{key:"removeSegment",value:function(t){var a=this.fixIndex(t),s=this.segments.splice(a,1)[0],u=s.previousSegment,l=s.nextSegment;return u&&(u.nextSegment=l),l&&(l.previousSegment=u),s.isSubpathStart&&l&&this.updateSubpathStartSegment(l),s}},{key:"replaceSegment",value:function(t,a){var s=this.fixIndex(t),u,l=this.segments[s],c=l.previousSegment,f=l.nextSegment,d=l.isSubpathStart;if(!Array.isArray(a))u=this.prepareSegment(a,c,f),this.segments.splice(s,1,u),d&&u.isSubpathStart&&(d=!1);else{this.segments.splice(t,1);for(var v=0,m=a.length;v<m;v+=1){var y=a[v];u=this.prepareSegment(y,c,f),this.segments.splice(t+v,0,u),c=u,d&&u.isSubpathStart&&(d=!1)}}d&&f&&this.updateSubpathStartSegment(f)}},{key:"getSegment",value:function(t){var a=this.fixIndex(t);return this.segments[a]}},{key:"fixIndex",value:function(t){var a=this.segments.length;if(a===0)throw new Error("Path has no segments.");for(var s=t;s<0;)s=a+s;if(s>=a||s<0)throw new Error("Index out of range.");return s}},{key:"segmentAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segmentIndexAt(t,a);return s?this.getSegment(s):null}},{key:"segmentAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segmentIndexAtLength(t,a);return s?this.getSegment(s):null}},{key:"segmentIndexAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=Kp(t,0,1),u=this.getOptions(a),l=this.length(u),c=l*s;return this.segmentIndexAtLength(c,u)}},{key:"segmentIndexAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segments.length;if(s===0)return null;var u=!0;t<0&&(u=!1,t=-t);for(var l=this.getPrecision(a),c=this.getSubdivisions(a),f=0,d=null,v=0;v<s;v+=1){var m=u?v:s-1-v,y=this.segments[m],C=c[m],O=y.length({precision:l,subdivisions:C});if(y.isVisible){if(t<=f+O)return m;d=m}f+=O}return d}},{key:"getSegmentSubdivisions",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getPrecision(t),s=[],u=0,l=this.segments.length;u<l;u+=1){var c=this.segments[u],f=c.getSubdivisions({precision:a});s.push(f)}return s}},{key:"updateSubpathStartSegment",value:function(t){for(var a=t.previousSegment,s=t;s&&!s.isSubpathStart;)a!=null?s.subpathStartSegment=a.subpathStartSegment:s.subpathStartSegment=null,a=s,s=s.nextSegment}},{key:"prepareSegment",value:function(t,a,s){t.previousSegment=a,t.nextSegment=s,a!=null&&(a.nextSegment=t),s!=null&&(s.previousSegment=t);var u=t;return t.isSubpathStart&&(t.subpathStartSegment=t,u=s),u!=null&&this.updateSubpathStartSegment(u),t}},{key:"closestPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.closestPointT(t,a);return s?this.pointAtT(s):null}},{key:"closestPointLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(a),u=this.closestPointT(t,s);return u?this.lengthAtT(u,s):0}},{key:"closestPointNormalizedLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getOptions(a),u=this.closestPointLength(t,s);if(u===0)return 0;var l=this.length(s);return l===0?0:u/l}},{key:"closestPointT",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var s=this.getPrecision(a),u=this.getSubdivisions(a),l,c=Infinity,f=0,d=this.segments.length;f<d;f+=1){var v=this.segments[f],m=u[f];if(v.isVisible){var y=v.closestPointT(t,{precision:s,subdivisions:m}),C=v.pointAtT(y),O=$T(C,t);O<c&&(l={segmentIndex:f,value:y},c=O)}}return l||{segmentIndex:this.segments.length-1,value:1}}},{key:"closestPointTangent",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;for(var s=this.getPrecision(a),u=this.getSubdivisions(a),l,c=Infinity,f=0,d=this.segments.length;f<d;f+=1){var v=this.segments[f],m=u[f];if(v.isDifferentiable()){var y=v.closestPointT(t,{precision:s,subdivisions:m}),C=v.pointAtT(y),O=$T(C,t);O<c&&(l=v.tangentAtT(y),c=O)}}return l||null}},{key:"containsPoint",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.toPolylines(a);if(!s)return!1;for(var u=0,l=0,c=s.length;l<c;l+=1){var f=s[l];f.containsPoint(t)&&(u+=1)}return u%2==1}},{key:"pointAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();var s=this.getOptions(a),u=this.length(s),l=u*t;return this.pointAtLength(l,s)}},{key:"pointAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;if(t===0)return this.start.clone();var s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(a),l=this.getSubdivisions(a),c,f=0,d=0,v=this.segments.length;d<v;d+=1){var m=s?d:v-1-d,y=this.segments[m],C=l[m],O=y.length({precision:u,subdivisions:C});if(y.isVisible){if(t<=f+O)return y.pointAtLength((s?1:-1)*(t-f),{precision:u,subdivisions:C});c=y}f+=O}if(c)return s?c.end:c.start;var x=this.segments[this.segments.length-1];return x.end.clone()}},{key:"pointAtT",value:function(t){var a=this.segments,s=a.length;if(s===0)return null;var u=t.segmentIndex;if(u<0)return a[0].pointAtT(0);if(u>=s)return a[s-1].pointAtT(1);var l=Kp(t.value,0,1);return a[u].pointAtT(l)}},{key:"divideAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=Kp(t,0,1),u=this.getOptions(a),l=this.length(u),c=l*s;return this.divideAtLength(c,u)}},{key:"divideAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(a),l=this.getSubdivisions(a),c=0,f,d,v,m,y,C=0,O=this.segments.length;C<O;C+=1){var x=s?C:O-1-C,T=this.getSegment(x),L=l[x],_={precision:u,subdivisions:L},z=T.length(_);if(T.isDifferentiable()&&(v=T,m=x,t<=c+z)){d=x,f=T.divideAtLength((s?1:-1)*(t-c),_);break}c+=z}if(!v)return null;f||(d=m,y=s?1:0,f=v.divideAtT(y));var Q=this.clone(),q=d;Q.replaceSegment(q,f);var ye=q,Ce=q+1,Ae=q+2;f[0].isDifferentiable()||(Q.removeSegment(ye),Ce-=1,Ae-=1);var Pe=Q.getSegment(Ce).start;Q.insertSegment(Ce,n.createSegment("M",Pe)),Ae+=1,f[1].isDifferentiable()||(Q.removeSegment(Ae-1),Ae-=1);for(var qe=Ae-ye-1,lt=Ae,ze=Q.segments.length;lt<ze;lt+=1){var ht=this.getSegment(lt-qe),nn=Q.getSegment(lt);if(nn.type==="Z"&&!ht.subpathStartSegment.end.equals(nn.subpathStartSegment.end)){var Tn=n.createSegment("L",ht.end);Q.replaceSegment(lt,Tn)}}var Kn=new n(Q.segments.slice(0,Ce)),zn=new n(Q.segments.slice(Ce));return[Kn,zn]}},{key:"intersectsWithLine",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.toPolylines(a);if(s==null)return null;for(var u=null,l=0,c=s.length;l<c;l+=1){var f=s[l],d=t.intersect(f);if(d)if(u==null&&(u=[]),Array.isArray(d)){var v;(v=u).push.apply(v,Object(We.a)(d))}else u.push(d)}return u}},{key:"isDifferentiable",value:function(){for(var t=0,a=this.segments.length;t<a;t+=1){var s=this.segments[t];if(s.isDifferentiable())return!0}return!1}},{key:"isValid",value:function(){var t=this.segments,a=t.length===0||t[0].type==="M";return a}},{key:"length",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.segments.length===0)return 0;for(var a=this.getSubdivisions(t),s=0,u=0,l=this.segments.length;u<l;u+=1){var c=this.segments[u],f=a[u];s+=c.length({subdivisions:f})}return s}},{key:"lengthAtT",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.segments.length;if(s===0)return 0;var u=t.segmentIndex;if(u<0)return 0;var l=Kp(t.value,0,1);u>=s&&(u=s-1,l=1);for(var c=this.getPrecision(a),f=this.getSubdivisions(a),d=0,v=0;v<u;v+=1){var m=this.segments[v],y=f[v];d+=m.length({precision:c,subdivisions:y})}var C=this.segments[u],O=f[u];return d+=C.lengthAtT(l,{precision:c,subdivisions:O}),d}},{key:"tangentAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=Kp(t,0,1),u=this.getOptions(a),l=this.length(u),c=l*s;return this.tangentAtLength(c,u)}},{key:"tangentAtLength",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.segments.length===0)return null;var s=!0;t<0&&(s=!1,t=-t);for(var u=this.getPrecision(a),l=this.getSubdivisions(a),c,f=0,d=0,v=this.segments.length;d<v;d+=1){var m=s?d:v-1-d,y=this.segments[m],C=l[m],O=y.length({precision:u,subdivisions:C});if(y.isDifferentiable()){if(t<=f+O)return y.tangentAtLength((s?1:-1)*(t-f),{precision:u,subdivisions:C});c=y}f+=O}if(c){var x=s?1:0;return c.tangentAtT(x)}return null}},{key:"tangentAtT",value:function(t){var a=this.segments.length;if(a===0)return null;var s=t.segmentIndex;if(s<0)return this.segments[0].tangentAtT(0);if(s>=a)return this.segments[a-1].tangentAtT(1);var u=Kp(t.value,0,1);return this.segments[s].tangentAtT(u)}},{key:"getPrecision",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.precision==null?this.PRECISION:t.precision}},{key:"getSubdivisions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.segmentSubdivisions==null){var a=this.getPrecision(t);return this.getSegmentSubdivisions({precision:a})}return t.segmentSubdivisions}},{key:"getOptions",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getPrecision(t),s=this.getSubdivisions(t);return{precision:a,segmentSubdivisions:s}}},{key:"toPoints",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.segments,s=a.length;if(s===0)return null;for(var u=this.getSubdivisions(t),l=[],c=[],f=0;f<s;f+=1){var d=a[f];if(d.isVisible){var v=u[f];v.length>0?v.forEach(function(m){return c.push(m.start)}):c.push(d.start)}else c.length>0&&(c.push(a[f-1].end),l.push(c),c=[])}return c.length>0&&(c.push(this.end),l.push(c)),l}},{key:"toPolylines",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.toPoints(t);return a?a.map(function(s){return new ku(s)}):null}},{key:"scale",value:function(t,a,s){return this.segments.forEach(function(u){return u.scale(t,a,s)}),this}},{key:"rotate",value:function(t,a){return this.segments.forEach(function(s){return s.rotate(t,a)}),this}},{key:"translate",value:function(t,a){return typeof t=="number"?this.segments.forEach(function(s){return s.translate(t,a)}):this.segments.forEach(function(s){return s.translate(t)}),this}},{key:"clone",value:function(){var t=new n;return this.segments.forEach(function(a){return t.appendSegment(a.clone())}),t}},{key:"equals",value:function(t){if(t==null)return!1;var a=this.segments,s=t.segments,u=a.length;if(s.length!==u)return!1;for(var l=0;l<u;l+=1){var c=a[l],f=s[l];if(c.type!==f.type||!c.equals(f))return!1}return!0}},{key:"toJSON",value:function(){return this.segments.map(function(t){return t.toJSON()})}},{key:"serialize",value:function(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(function(t){return t.serialize()}).join(" ")}},{key:"toString",value:function(){return this.serialize()}}]),n}(uh,Symbol.toStringTag);(function(o){o.toStringTag="X6.Geometry.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return!!((n==null||n===o.toStringTag)&&Array.isArray(e.segments)&&typeof e.moveTo=="function"&&typeof e.lineTo=="function"&&typeof e.curveTo=="function")}o.isPath=i})(pi||(pi={})),function(o){function i(n){if(!n)return new o;var e=new o,t=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,a=o.normalize(n).match(t);if(a!=null)for(var s=0,u=a.length;s<u;s+=1){var l=a[s],c=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,f=l.match(c);if(f!=null){var d=f[0],v=f.slice(1).map(function(y){return+y}),m=r.call.apply(r,[null,d].concat(Object(We.a)(v)));e.appendSegment(m)}}return e}o.parse=i;function r(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];if(n==="M"){var s;return(s=qb.create).call.apply(s,[null].concat(t))}if(n==="L"){var u;return(u=kf.create).call.apply(u,[null].concat(t))}if(n==="C"){var l;return(l=e1.create).call.apply(l,[null].concat(t))}if(n==="z"||n==="Z")return Qb.create();throw new Error('Invalid path segment type "'.concat(n,'"'))}o.createSegment=r}(pi||(pi={})),function(o){o.normalize=cF,o.isValid=dF,o.drawArc=vF,o.drawPoints=YT,o.arcToCurves=n1}(pi||(pi={}));var oi=function(o){function i(r,n,e){if(Object(me.a)(this,i),!r)throw new TypeError("Invalid element to create vector");var t;if(i.isVector(r))t=r.node;else if(typeof r=="string")if(r.toLowerCase()==="svg")t=Wb();else if(r[0]==="<"){var a=Wb(r);t=document.importNode(a.firstChild,!0)}else t=document.createElementNS(Tf.svg,r);else t=r;this.node=t,n&&this.setAttributes(n),e&&this.append(e)}return Object(ue.a)(i,[{key:o,get:function(){return i.toStringTag}},{key:"type",get:function(){return this.node.nodeName}},{key:"id",get:function(){return this.node.id}},{key:"id",set:function(n){this.node.id=n}},{key:"transform",value:function(n,e){return n==null?Xx(this.node):(Xx(this.node,n,e),this)}},{key:"translate",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return n==null?Yx(this.node):(Yx(this.node,n,e,t),this)}},{key:"rotate",value:function(n,e,t){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n==null?Jx(this.node):(Jx(this.node,n,e,t,a),this)}},{key:"scale",value:function(n,e){return n==null?l1(this.node):(l1(this.node,n,e),this)}},{key:"getTransformToElement",value:function(n){var e=i.toNode(n);return fh(this.node,e)}},{key:"removeAttribute",value:function(n){return Ix(this.node,n),this}},{key:"getAttribute",value:function(n){return BT(this.node,n)}},{key:"setAttribute",value:function(n,e){return Xb(this.node,n,e),this}},{key:"setAttributes",value:function(n){return Rx(this.node,n),this}},{key:"attr",value:function(n,e){return n==null?gu(this.node):typeof n=="string"&&e===void 0?gu(this.node,n):(typeof n=="object"?gu(this.node,n):gu(this.node,n,e),this)}},{key:"svg",value:function(){return this.node instanceof SVGSVGElement?this:i.create(this.node.ownerSVGElement)}},{key:"defs",value:function(){var n=this.svg()||this,e=n.node.getElementsByTagName("defs")[0];return e?i.create(e):i.create("defs").appendTo(n)}},{key:"text",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ZT(this.node,n,e),this}},{key:"tagName",value:function(){return $b(this.node)}},{key:"clone",value:function(){return i.create(this.node.cloneNode(!0))}},{key:"remove",value:function(){return Kb(this.node),this}},{key:"empty",value:function(){return Tx(this.node),this}},{key:"append",value:function(n){return Px(this.node,i.toNodes(n)),this}},{key:"appendTo",value:function(n){return LT(this.node,i.isVector(n)?n.node:n),this}},{key:"prepend",value:function(n){return jT(this.node,i.toNodes(n)),this}},{key:"before",value:function(n){return kx(this.node,i.toNodes(n)),this}},{key:"replace",value:function(n){return this.node.parentNode&&this.node.parentNode.replaceChild(i.toNode(n),this.node),i.create(n)}},{key:"first",value:function(){return this.node.firstChild?i.create(this.node.firstChild):null}},{key:"last",value:function(){return this.node.lastChild?i.create(this.node.lastChild):null}},{key:"get",value:function(n){var e=this.node.childNodes[n];return e?i.create(e):null}},{key:"indexOf",value:function(n){var e=Array.prototype.slice.call(this.node.childNodes);return e.indexOf(i.toNode(n))}},{key:"find",value:function(n){var e=[],t=DT(this.node,n);if(t)for(var a=0,s=t.length;a<s;a+=1)e.push(i.create(t[a]));return e}},{key:"findOne",value:function(n){var e=IT(this.node,n);return e?i.create(e):null}},{key:"findParentByClass",value:function(n,e){var t=RT(this.node,n,e);return t?i.create(t):null}},{key:"matches",value:function(n){var e=this.node,t=this.node.matches,a=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return a&&a.call(e,n)}},{key:"contains",value:function(n){return NT(this.node,i.isVector(n)?n.node:n)}},{key:"wrap",value:function(n){var e=i.create(n),t=this.node.parentNode;return t!=null&&t.insertBefore(e.node,this.node),e.append(this)}},{key:"parent",value:function(n){var e=this;if(e.node.parentNode==null)return null;if(e=i.create(e.node.parentNode),n==null)return e;do if(typeof n=="string"?e.matches(n):e instanceof n)return e;while(e=i.create(e.node.parentNode));return e}},{key:"children",value:function(){for(var n=this.node.childNodes,e=[],t=0;t<n.length;t+=1){var a=n[t];a.nodeType===1&&e.push(i.create(n[t]))}return e}},{key:"eachChild",value:function(n,e){for(var t=this.children(),a=0,s=t.length;a<s;a+=1)n.call(t[a],t[a],a,t),e&&t[a].eachChild(n,e);return this}},{key:"index",value:function(){return kT(this.node)}},{key:"hasClass",value:function(n){return Hb(this.node,n)}},{key:"addClass",value:function(n){return Xm(this.node,n),this}},{key:"removeClass",value:function(n){return Ym(this.node,n),this}},{key:"toggleClass",value:function(n,e){return Ax(this.node,n,e),this}},{key:"toLocalPoint",value:function(n,e){return uP(this.node,n,e)}},{key:"toGeometryShape",value:function(){return lP(this.node)}},{key:"translateCenterToPoint",value:function(n){var e=this.getBBox({target:this.svg()}),t=e.getCenter();return this.translate(n.x-t.x,n.y-t.y),this}},{key:"translateAndAutoOrient",value:function(n,e,t){return gP(this.node,n,e,t),this}},{key:"animate",value:function(n){return cP(this.node,n)}},{key:"animateTransform",value:function(n){return fP(this.node,n)}},{key:"animateAlongPath",value:function(n,e){return vP(this.node,n,e)}},{key:"normalizePath",value:function(){var n=this.tagName();return n==="path"&&this.attr("d",pi.normalize(this.attr("d"))),this}},{key:"bbox",value:function(n,e){return sP(this.node,n,e)}},{key:"getBBox",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ch(this.node,{recursive:n.recursive,target:n.target?i.toNode(n.target):null})}},{key:"sample",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.node instanceof SVGPathElement?zx(this.node,n):[]}},{key:"toPath",value:function(){return i.create(Ux(this.node))}},{key:"toPathData",value:function(){return Vx(this.node)}}]),i}(Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(a){if(a==null)return!1;if(a instanceof o)return!0;var s=a[Symbol.toStringTag],u=a;return(s==null||s===o.toStringTag)&&u.node instanceof SVGElement&&typeof u.animate=="function"&&typeof u.sample=="function"&&typeof u.normalizePath=="function"&&typeof u.toPath=="function"}o.isVector=i;function r(a,s,u){return new o(a,s,u)}o.create=r;function n(a){if(a[0]==="<"){for(var s=Wb(a),u=[],l=0,c=s.childNodes.length;l<c;l+=1){var f=s.childNodes[l];u.push(r(document.importNode(f,!0)))}return u}return[r(a)]}o.createVectors=n;function e(a){return i(a)?a.node:a}o.toNode=e;function t(a){return Array.isArray(a)?a.map(function(s){return e(s)}):[e(a)]}o.toNodes=t})(oi||(oi={}));function pF(o,i){var r=oi.create(i),n=oi.create("textPath"),e=o.d;if(e&&o["xlink:href"]===void 0){var t=oi.create("path").attr("d",e).appendTo(r.defs());n.attr("xlink:href","#".concat(t.id))}return typeof o=="object"&&n.attr(o),n.node}function gF(o,i,r){for(var n=r.eol,e=r.baseSize,t=r.lineHeight,a=0,s,u={},l=i.length-1,c=0;c<=l;c+=1){var f=i[c],d=null;if(typeof f=="object"){var v=f.attrs,m=oi.create("tspan",v);s=m.node;var y=f.t;n&&c===l&&(y+=n),s.textContent=y;var C=v.class;C&&m.addClass(C),r.includeAnnotationIndices&&m.attr("annotations",f.annotations.join(",")),d=parseFloat(v["font-size"]),d===void 0&&(d=e),d&&d>a&&(a=d)}else n&&c===l&&(f+=n),s=document.createTextNode(f||" "),e&&e>a&&(a=e);o.appendChild(s)}return a&&(u.maxFontSize=a),t?u.lineHeight=t:a&&(u.lineHeight=a*1.2),u}var JT=/em$/;function r1(o,i){var r=parseFloat(o);return JT.test(o)?r*i:r}function mF(o,i,r,n){if(!Array.isArray(i))return 0;var e=i.length;if(!e)return 0;for(var t=i[0],a=r1(t.maxFontSize,r)||r,s=0,u=r1(n,r),l=1;l<e;l+=1){t=i[l];var c=r1(t.lineHeight,r)||u;s+=c}var f=r1(t.maxFontSize,r)||r,d;switch(o){case"middle":d=a/2-.15*f-s/2;break;case"bottom":d=-(.25*f)-s;break;default:case"top":d=.8*a;break}return d}function ZT(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};i=k.sanitize(i);var n=r.eol,e=r.textPath,t=r.textVerticalAnchor,a=t==="middle"||t==="bottom"||t==="top",s=r.x;s===void 0&&(s=o.getAttribute("x")||0);var u=r.includeAnnotationIndices,l=r.annotations;l&&!Array.isArray(l)&&(l=[l]);var c=r.lineHeight,f=c==="auto",d=f?"1.5em":c||"1em";Tx(o),gu(o,{"xml:space":"preserve",display:i||r.displayEmpty?null:"none"});var v=gu(o,"font-size"),m=parseFloat(v);m||(m=16,(a||l)&&!v&&gu(o,"font-size","".concat(m)));var y;e?(typeof e=="string"&&(e={d:e}),y=pF(e,o)):y=document.createDocumentFragment();for(var C,O=0,x,T=i.split(`
`),L=[],_=T.length-1,z=0;z<=_;z+=1){C=d;var Q="v-line",q=Pf("tspan"),ye=void 0,Ce=T[z];if(Ce)if(l){var Ae=k.annotate(Ce,l,{offset:-O,includeAnnotationIndices:u});ye=gF(q,Ae,{eol:z!==_&&n,baseSize:m,lineHeight:f?null:d,includeAnnotationIndices:u});var Pe=ye.lineHeight;Pe&&f&&z!==0&&(C=Pe),z===0&&(x=ye.maxFontSize*.8)}else n&&z!==_&&(Ce+=n),q.textContent=Ce;else{q.textContent="-",Q+=" v-empty-line";var qe=q.style;qe.fillOpacity=0,qe.strokeOpacity=0,l&&(ye={})}ye&&L.push(ye),z>0&&q.setAttribute("dy",C),(z>0||e)&&q.setAttribute("x",s),q.className.baseVal=Q,y.appendChild(q),O+=Ce.length+1}if(a)if(l)C=mF(t,L,m,d);else if(t==="top")C="0.8em";else{var lt;switch(_>0?(lt=parseFloat(d)||1,lt*=_,JT.test(d)||(lt/=m)):lt=0,t){case"middle":C="".concat(.3-lt/2,"em");break;case"bottom":C="".concat(-lt-.3,"em");break;default:break}}else t===0?C="0em":t?C=t:(C=0,o.getAttribute("y")==null&&o.setAttribute("y","".concat(x||"0.8em")));var ze=y.firstChild;ze.setAttribute("dy",C),o.appendChild(y)}function yF(o,i,r,n){var e=[],t=[];if(i!=null){var a=o.split(i);if(e.push.apply(e,Object(We.a)(a)),typeof i=="string")for(var s=0,u=a.length-1;s<u;s+=1)t.push(i);else for(var l=o.match(new RegExp(i,"g")),c=0,f=a.length-1;c<f;c+=1)t.push(l?l[c]:"")}else{for(var d="",v=0,m=o.length;v<m;v+=1){var y=o[v];y===" "?(e.push(d),t.push(" "),d=""):y.match(/[^\x00-\xff]/)?(d.length&&(e.push(d),t.push("")),e.push(y),t.push(""),d=""):d+=y}d.length&&e.push(d)}for(var C=0;C<e.length;C+=1){var O=e[C];if(O.indexOf(r)>=0&&O.length>1){for(var x=O.split(r),T=0,L=x.length-1;T<L;T+=1)x.splice(2*T+1,0,r);var _=x.filter(function(Ce){return Ce!==""});e.splice.apply(e,[C,1].concat(Object(We.a)(_)));var z=_.map(function(){return""});z.pop(),t.splice.apply(t,[C,0].concat(Object(We.a)(z)))}}for(var Q=0;Q<e.length;Q+=1){var q=e[Q],ye=q.search(n);ye>0&&ye<q.length-1&&(e.splice(Q,1,q.substring(0,ye+1),q.substring(ye+1)),t.splice(Q,0,""))}return{words:e,separators:t}}function bF(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=i.width,t=i.height,a=n.svgDocument||Pf("svg"),s=Pf("text"),u=Pf("tspan"),l=document.createTextNode("");gu(s,r),s.appendChild(u),s.style.opacity="0",s.style.display="block",u.style.display="block",u.appendChild(l),a.appendChild(s);var c=a.parentNode==null;c&&document.body.appendChild(a);for(var f=n.eol||`
`,d=n.separator||" ",v=n.hyphen?new RegExp(n.hyphen):/[^\w\d]/,m=n.breakWord!==!1,y=[],C={},O=[],x,T,L,_=yF(o,n.separator,f,v),z=_.words,Q=_.separators,q=0,ye=0,Ce=z.length;q<Ce;q+=1){var Ae=z[q];if(!!Ae){if(Ae===f){y[ye]=!0,ye+=1,O[ye]="";continue}if(O[ye]!=null?(L=Q[q-1]||"",l.data="".concat(O[ye]).concat(L).concat(Ae)):l.data=Ae,u.getComputedTextLength()<=e)O[ye]=l.data,C[ye]=Q[q],x&&(y[ye]=!0,ye+=1,x=0);else{if(m){if(!O[ye]||x){var Pe=!!x,qe=Ae.length===1;if(x=Ae.length-1,Pe||qe){if(qe){if(!O[ye]){O=[];break}z.splice(q,2,Ae+z[q+1]),Q.splice(q+1,1),y[ye]=!0,ye+=1,Ce-=1,q-=1;continue}z[q]=Ae.substring(0,x),z[q+1]=Ae.substring(x)+z[q+1]}else z.splice(q,1,Ae.substring(0,x),Ae.substring(x)),Q.splice(q,0,""),Ce+=1,ye&&!y[ye-1]&&(ye-=1);q-=1;continue}}else if(!O[ye]){O[ye]=Ae,y[ye]=!0,ye+=1;continue}ye+=1,q-=1}if(t!=null){if(T==null){var lt=void 0;r.lineHeight==="auto"?lt={value:1.5,unit:"em"}:lt=E.parseCssNumeric(r.lineHeight,["em"])||{value:1,unit:"em"},T=lt.value,lt.unit==="em"&&(sa.IS_FIREFOX?T*=u.getBBox().height:T*=s.getBBox().height)}if(T*O.length>t){var ze=Math.floor(t/T)-1,ht=O[ze],nn=O[ze+1];if(O.splice(ze+1),ht==null)break;var Tn=n.ellipsis;if(!Tn)break;typeof Tn!="string"&&(Tn="\u2026");var Kn=ht;nn&&m&&(Kn+=L+nn);var zn=Kn.length,An=void 0,br=void 0;do{if(br=Kn[zn],An=Kn.substring(0,zn),br?br.match(d)&&(An+=br):An+=C[ze],An+=Tn,l.data=An,u.getComputedTextLength()<=e){O[ze]=An;break}zn-=1}while(zn>=0);break}}}}return Kb(c?a:s),O.join(f)}var a1=.551784;function mu(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN,n=o.getAttribute(i);if(n==null)return r;var e=parseFloat(n);return Number.isNaN(e)?r:e}function zx(o){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=o.getTotalLength(),n=[],e=0,t;e<r;)t=o.getPointAtLength(e),n.push({distance:e,x:t.x,y:t.y}),e+=i;return n}function QT(o){return["M",mu(o,"x1"),mu(o,"y1"),"L",mu(o,"x2"),mu(o,"y2")].join(" ")}function qT(o){var i=Zm(o);return i.length===0?null:"".concat(tP(i)," Z")}function eP(o){var i=Zm(o);return i.length===0?null:tP(i)}function tP(o){var i=o.map(function(r){return"".concat(r.x," ").concat(r.y)});return"M ".concat(i.join(" L"))}function Zm(o){var i=[],r=o.points;if(r)for(var n=0,e=r.numberOfItems;n<e;n+=1)i.push(r.getItem(n));return i}function nP(o){var i=mu(o,"cx",0),r=mu(o,"cy",0),n=mu(o,"r"),e=n*a1;return["M",i,r-n,"C",i+e,r-n,i+n,r-e,i+n,r,"C",i+n,r+e,i+e,r+n,i,r+n,"C",i-e,r+n,i-n,r+e,i-n,r,"C",i-n,r-e,i-e,r-n,i,r-n,"Z"].join(" ")}function rP(o){var i=mu(o,"cx",0),r=mu(o,"cy",0),n=mu(o,"rx"),e=mu(o,"ry")||n,t=n*a1,a=e*a1,s=["M",i,r-e,"C",i+t,r-e,i+n,r-a,i+n,r,"C",i+n,r+a,i+t,r+e,i,r+e,"C",i-t,r+e,i-n,r+a,i-n,r,"C",i-n,r-a,i-t,r-e,i,r-e,"Z"].join(" ");return s}function aP(o){return iP({x:mu(o,"x",0),y:mu(o,"y",0),width:mu(o,"width",0),height:mu(o,"height",0),rx:mu(o,"rx",0),ry:mu(o,"ry",0)})}function iP(o){var i,r=o.x,n=o.y,e=o.width,t=o.height,a=Math.min(o.rx||o["top-rx"]||0,e/2),s=Math.min(o.rx||o["bottom-rx"]||0,e/2),u=Math.min(o.ry||o["top-ry"]||0,t/2),l=Math.min(o.ry||o["bottom-ry"]||0,t/2);return a||s||u||l?i=["M",r,n+u,"v",t-u-l,"a",s,l,0,0,0,s,l,"h",e-2*s,"a",s,l,0,0,0,s,-l,"v",-(t-l-u),"a",a,u,0,0,0,-a,-u,"h",-(e-2*a),"a",a,u,0,0,0,-a,u,"Z"]:i=["M",r,n,"H",r+e,"V",n+t,"H",r,"V",n,"Z"],i.join(" ")}function Ux(o){var i=Pf("path");gu(i,gu(o));var r=Vx(o);return r&&i.setAttribute("d",r),i}function Vx(o){var i=o.tagName.toLowerCase();switch(i){case"path":return o.getAttribute("d");case"line":return QT(o);case"polygon":return qT(o);case"polyline":return eP(o);case"ellipse":return rP(o);case"circle":return nP(o);case"rect":return aP(o);default:break}throw new Error('"'.concat(i,'" cannot be converted to svg path element.'))}function CF(o,i,r,n){var e=2*Math.PI-1e-6,t=o,a=i,s=r,u=n;if(u<s){var l=s;s=u,u=l}var c=u-s,f=c<Math.PI?"0":"1",d=Math.cos(s),v=Math.sin(s),m=Math.cos(u),y=Math.sin(u);return c>=e?t?"M0,".concat(a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(-a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(a,"M0,").concat(t,"A").concat(t,",").concat(t," 0 1,0 0,").concat(-t,"A").concat(t,",").concat(t," 0 1,0 0,").concat(t,"Z"):"M0,".concat(a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(-a,"A").concat(a,",").concat(a," 0 1,1 0,").concat(a,"Z"):t?"M".concat(a*d,",").concat(a*v,"A").concat(a,",").concat(a," 0 ").concat(f,",1 ").concat(a*m,",").concat(a*y,"L").concat(t*m,",").concat(t*y,"A").concat(t,",").concat(t," 0 ").concat(f,",0 ").concat(t*d,",").concat(t*v,"Z"):"M".concat(a*d,",").concat(a*v,"A").concat(a,",").concat(a," 0 ").concat(f,",1 ").concat(a*m,",").concat(a*y,"L0,0")+"Z"}var Qm=Pf("svg"),EF=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,oP=/[ ,]+/,OF=/^(\w+)\((.*)\)/;function Hx(o,i){var r=Qm.createSVGPoint();return r.x=o,r.y=i,r}function Xp(o){var i=Qm.createSVGMatrix();if(o!=null){var r=o,n=i;for(var e in r)n[e]=r[e]}return i}function Yp(o){return o!=null?(o instanceof DOMMatrix||(o=Xp(o)),Qm.createSVGTransformFromMatrix(o)):Qm.createSVGTransform()}function i1(o){var i=Xp(),r=o!=null&&o.match(EF);if(!r)return i;for(var n=0,e=r.length;n<e;n+=1){var t=r[n],a=t.match(OF);if(a){var s=void 0,u=void 0,l=void 0,c=void 0,f=void 0,d=Xp(),v=a[2].split(oP);switch(a[1].toLowerCase()){case"scale":s=parseFloat(v[0]),u=v[1]===void 0?s:parseFloat(v[1]),d=d.scaleNonUniform(s,u);break;case"translate":l=parseFloat(v[0]),c=parseFloat(v[1]),d=d.translate(l,c);break;case"rotate":f=parseFloat(v[0]),l=parseFloat(v[1])||0,c=parseFloat(v[2])||0,l!==0||c!==0?d=d.translate(l,c).rotate(f).translate(-l,-c):d=d.rotate(f);break;case"skewx":f=parseFloat(v[0]),d=d.skewX(f);break;case"skewy":f=parseFloat(v[0]),d=d.skewY(f);break;case"matrix":d.a=parseFloat(v[0]),d.b=parseFloat(v[1]),d.c=parseFloat(v[2]),d.d=parseFloat(v[3]),d.e=parseFloat(v[4]),d.f=parseFloat(v[5]);break;default:continue}i=i.multiply(d)}}return i}function Wx(o){var i=o||{},r=i.a!=null?i.a:1,n=i.b!=null?i.b:0,e=i.c!=null?i.c:0,t=i.d!=null?i.d:1,a=i.e!=null?i.e:0,s=i.f!=null?i.f:0;return"matrix(".concat(r,",").concat(n,",").concat(e,",").concat(t,",").concat(a,",").concat(s,")")}function o1(o){var i,r,n;if(o){var e=oP;if(o.trim().indexOf("matrix")>=0){var t=i1(o),a=Kx(t);i=[a.translateX,a.translateY],r=[a.rotation],n=[a.scaleX,a.scaleY];var s=[];(i[0]!==0||i[1]!==0)&&s.push("translate(".concat(i.join(","),")")),(n[0]!==1||n[1]!==1)&&s.push("scale(".concat(n.join(","),")")),r[0]!==0&&s.push("rotate(".concat(r[0],")")),o=s.join(" ")}else{var u=o.match(/translate\((.*?)\)/);u&&(i=u[1].split(e));var l=o.match(/rotate\((.*?)\)/);l&&(r=l[1].split(e));var c=o.match(/scale\((.*?)\)/);c&&(n=c[1].split(e))}}var f=n&&n[0]?parseFloat(n[0]):1;return{raw:o||"",translation:{tx:i&&i[0]?parseInt(i[0],10):0,ty:i&&i[1]?parseInt(i[1],10):0},rotation:{angle:r&&r[0]?parseInt(r[0],10):0,cx:r&&r[1]?parseInt(r[1],10):void 0,cy:r&&r[2]?parseInt(r[2],10):void 0},scale:{sx:f,sy:n&&n[1]?parseFloat(n[1]):f}}}function $x(o,i){var r=i.x*o.a+i.y*o.c+0,n=i.x*o.b+i.y*o.d+0;return{x:r,y:n}}function Kx(o){var i=$x(o,{x:0,y:1}),r=$x(o,{x:1,y:0}),n=180/Math.PI*Math.atan2(i.y,i.x)-90,e=180/Math.PI*Math.atan2(r.y,r.x);return{skewX:n,skewY:e,translateX:o.e,translateY:o.f,scaleX:Math.sqrt(o.a*o.a+o.b*o.b),scaleY:Math.sqrt(o.c*o.c+o.d*o.d),rotation:n}}function wF(o){var i,r,n,e;return o?(i=o.a==null?1:o.a,e=o.d==null?1:o.d,r=o.b,n=o.c):i=e=1,{sx:r?Math.sqrt(i*i+r*r):i,sy:n?Math.sqrt(n*n+e*e):e}}function xF(o){var i={x:0,y:1};return o&&(i=$x(o,i)),{angle:Mi.normalize(Mi.toDeg(Math.atan2(i.y,i.x))-90)}}function SF(o){return{tx:o&&o.e||0,ty:o&&o.f||0}}function s1(o,i){var r=Hx(o.x,o.y).matrixTransform(i);return new Pt(r.x,r.y)}function AF(o,i){return new Sa(s1(o.start,i),s1(o.end,i))}function MF(o,i){var r=o instanceof ku?o.points:o;return Array.isArray(r)||(r=[]),new ku(r.map(function(n){return s1(n,i)}))}function u1(o,i){var r=Qm.createSVGPoint();r.x=o.x,r.y=o.y;var n=r.matrixTransform(i);r.x=o.x+o.width,r.y=o.y;var e=r.matrixTransform(i);r.x=o.x+o.width,r.y=o.y+o.height;var t=r.matrixTransform(i);r.x=o.x,r.y=o.y+o.height;var a=r.matrixTransform(i),s=Math.min(n.x,e.x,t.x,a.x),u=Math.max(n.x,e.x,t.x,a.x),l=Math.min(n.y,e.y,t.y,a.y),c=Math.max(n.y,e.y,t.y,a.y);return new Br(s,l,u-s,c-l)}var TF=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r};function sP(o,i,r){var n,e=o.ownerSVGElement;if(!e)return new Br(0,0,0,0);try{n=o.getBBox()}catch(a){n={x:o.clientLeft,y:o.clientTop,width:o.clientWidth,height:o.clientHeight}}if(i)return Br.create(n);var t=fh(o,r||e);return u1(n,t)}function ch(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,n=o.ownerSVGElement;if(!n||!$p(o)){if(Dx(o)){var e=pP(o),t=e.left,a=e.top,s=e.width,u=e.height;return new Br(t,a,s,u)}return new Br(0,0,0,0)}var l=i.target,c=i.recursive;if(!c){try{r=o.getBBox()}catch(O){r={x:o.clientLeft,y:o.clientTop,width:o.clientWidth,height:o.clientHeight}}if(!l)return Br.create(r);var f=fh(o,l);return u1(r,f)}{var d=o.childNodes,v=d.length;if(v===0)return ch(o,{target:l});l||(l=o);for(var m=0;m<v;m+=1){var y=d[m],C=void 0;y.childNodes.length===0?C=ch(y,{target:l}):C=ch(y,{target:l,recursive:!0}),r?r=r.union(C):r=C}return r}}function PF(o){for(var i=o,r=i?i.tagName.toLowerCase():"";r==="g";)i=i.firstElementChild,r=i?i.tagName.toLowerCase():"";var n=function(s){var u=i.getAttribute(s),l=u?parseFloat(u):0;return Number.isNaN(l)?0:l},e,t;switch(r){case"rect":t=new Br(n("x"),n("y"),n("width"),n("height"));break;case"circle":e=n("r"),t=new Br(n("cx")-e,n("cy")-e,2*e,2*e);break;default:break}return t}function kF(o,i){var r=Xp();if($p(i)&&$p(o)){for(var n=o,e=[];n&&n!==i;){var t=n.getAttribute("transform")||null,a=i1(t);e.push(a),n=n.parentNode}e.reverse().forEach(function(s){r=r.multiply(s)})}return r}function fh(o,i){if($p(i)&&$p(o)){var r=i.getScreenCTM(),n=o.getScreenCTM();if(r&&n)return r.inverse().multiply(n)}return Xp()}function uP(o,i,r){var n=o instanceof SVGSVGElement?o:o.ownerSVGElement,e=n.createSVGPoint();e.x=i,e.y=r;try{var t=n.getScreenCTM(),a=e.matrixTransform(t.inverse()),s=fh(o,n).inverse();return a.matrixTransform(s)}catch(u){return e}}function lP(o){var i=function(a){var s=o.getAttribute(a),u=s?parseFloat(s):0;return Number.isNaN(u)?0:u};switch(o instanceof SVGElement&&o.nodeName.toLowerCase()){case"rect":return new Br(i("x"),i("y"),i("width"),i("height"));case"circle":return new lh(i("cx"),i("cy"),i("r"),i("r"));case"ellipse":return new lh(i("cx"),i("cy"),i("rx"),i("ry"));case"polyline":{var r=Zm(o);return new ku(r)}case"polygon":{var n=Zm(o);return n.length>1&&n.push(n[0]),new ku(n)}case"path":{var e=o.getAttribute("d");return pi.isValid(e)||(e=pi.normalize(e)),pi.parse(e)}case"line":return new Sa(i("x1"),i("y1"),i("x2"),i("y2"));default:break}return ch(o)}function DF(o,i,r){var n=o instanceof SVGSVGElement?o:o.ownerSVGElement;r=r||n;var e=ch(r),t=e.getCenter();if(!e.intersectsWithLineFromCenterToPoint(i))return null;var a=null,s=o.tagName.toLowerCase();if(s==="rect"){var u=new Br(parseFloat(o.getAttribute("x")||"0"),parseFloat(o.getAttribute("y")||"0"),parseFloat(o.getAttribute("width")||"0"),parseFloat(o.getAttribute("height")||"0")),l=fh(o,r),c=Kx(l),f=n.createSVGTransform();f.setRotate(-c.rotation,t.x,t.y);var d=u1(u,f.matrix.multiply(l));a=Br.create(d).intersectsWithLineFromCenterToPoint(i,c.rotation)}else if(s==="path"||s==="polygon"||s==="polyline"||s==="circle"||s==="ellipse"){for(var v=s==="path"?o:Ux(o),m=zx(v),y=Infinity,C=[],O=0,x=m.length;O<x;O+=1){var T=m[O],L=Hx(T.x,T.y);L=L.matrixTransform(fh(o,r));var _=Pt.create(L),z=_.distance(t),Q=_.distance(i)*1.1,q=z+Q;q<y?(y=q,C=[{sample:T,refDistance:Q}]):q<y+1&&C.push({sample:T,refDistance:Q})}C.sort(function(ye,Ce){return ye.refDistance-Ce.refDistance}),C[0]&&(a=Pt.create(C[0].sample))}return a}function cP(o,i){return dP(o,i,"animate")}function fP(o,i){return dP(o,i,"animateTransform")}function dP(o,i,r){var n=Pf(r);o.appendChild(n);try{return hP(n,i)}catch(e){}return function(){}}function hP(o,i){var r=i.start,n=i.complete,e=i.repeat,t=TF(i,["start","complete","repeat"]);gu(o,t),r&&o.addEventListener("beginEvent",r),n&&o.addEventListener("endEvent",n),e&&o.addEventListener("repeatEvent",e);var a=o;return setTimeout(function(){a.beginElement()}),function(){return a.endElement()}}function vP(o,i,r){var n=MT(r),e=Pf("animateMotion"),t=Pf("mpath");gu(t,{"xlink:href":"#".concat(n)}),e.appendChild(t),o.appendChild(e);try{return hP(e,i)}catch(m){if(document.documentElement.getAttribute("smiling")==="fake"){var a=e;a.animators=[];var s=window,u=a.getAttribute("id");u&&(s.id2anim[u]=a);for(var l=s.getTargets(a),c=0,f=l.length;c<f;c+=1){var d=l[c],v=new s.Animator(a,d,c);s.animators.push(v),a.animators[c]=v,v.register()}}}return function(){}}function pP(o){var i=0,r=0,n=0,e=0;if(o){for(var t=o;t;)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent,t&&(i+=parseInt(Jb(t,"borderLeft"),10),r+=parseInt(Jb(t,"borderTop"),10));n=o.offsetWidth,e=o.offsetHeight}return{left:i,top:r,width:n,height:e}}function Xx(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i==null)return i1(gu(o,"transform"));if(r.absolute){o.setAttribute("transform",Wx(i));return}var n=o.transform,e=Yp(i);n.baseVal.appendItem(e)}function Yx(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=gu(o,"transform"),t=o1(e);if(i==null)return t.translation;e=t.raw,e=e.replace(/translate\([^)]*\)/g,"").trim();var a=n.absolute?i:t.translation.tx+i,s=n.absolute?r:t.translation.ty+r,u="translate(".concat(a,",").concat(s,")");o.setAttribute("transform","".concat(u," ").concat(e).trim())}function Jx(o,i,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=gu(o,"transform"),a=o1(t);if(i==null)return a.rotation;t=a.raw,t=t.replace(/rotate\([^)]*\)/g,"").trim(),i%=360;var s=e.absolute?i:a.rotation.angle+i,u=r!=null&&n!=null?",".concat(r,",").concat(n):"",l="rotate(".concat(s).concat(u,")");o.setAttribute("transform","".concat(t," ").concat(l).trim())}function l1(o,i,r){var n=gu(o,"transform"),e=o1(n);if(i==null)return e.scale;r=r==null?i:r,n=e.raw,n=n.replace(/scale\([^)]*\)/g,"").trim();var t="scale(".concat(i,",").concat(r,")");o.setAttribute("transform","".concat(n," ").concat(t).trim())}function gP(o,i,r,n){var e=Pt.create(i),t=Pt.create(r);if(!n){var a=o instanceof SVGSVGElement?o:o.ownerSVGElement;n=a}var s=l1(o);o.setAttribute("transform","");var u=ch(o,{target:n}).scale(s.sx,s.sy),l=Yp();l.setTranslate(-u.x-u.width/2,-u.y-u.height/2);var c=Yp(),f=e.angleBetween(t,e.clone().translate(1,0));f&&c.setRotate(f,0,0);var d=Yp(),v=e.clone().move(t,u.width/2);d.setTranslate(2*e.x-v.x,2*e.y-v.y);var m=fh(o,n),y=Yp();y.setMatrix(d.matrix.multiply(c.matrix.multiply(l.matrix.multiply(m.scale(s.sx,s.sy))))),o.setAttribute("transform",Wx(y.matrix))}var IF=function(){function o(i,r,n){Object(me.a)(this,o),this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=sa.isEventSupported("wheel")?"wheel":"mousewheel",this.target=i,this.onWheelCallback=r,this.onWheelGuard=n,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}return Object(ue.a)(o,[{key:"enable",value:function(){sa.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):Kt()(this.target).on("mousewheel",this.onWheel)}},{key:"disable",value:function(){sa.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):Kt()(this.target).off("mousewheel")}},{key:"onWheel",value:function(r){var n=this;if(!(this.onWheelGuard!=null&&!this.onWheelGuard(r))){this.deltaX+=r.deltaX,this.deltaY+=r.deltaY,r.preventDefault();var e;(this.deltaX!==0||this.deltaY!==0)&&(r.stopPropagation(),e=!0),e===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(function(){n.didWheel(r)}))}}},{key:"didWheel",value:function(r){this.animationFrameId=0,this.onWheelCallback(r,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}]),o}(),RF=oi.isVector,NF=oi.create,jF=oi.createVectors;function mP(o){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,n=null;return function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n&&clearTimeout(n),n=window.setTimeout(function(){o.apply(i,t)},r)}}function LF(o){var i=null,r=[],n=function(){if(getComputedStyle(o).position==="static"){var l=o.style;l.position="relative"}var c=document.createElement("object");return c.onload=function(){c.contentDocument.defaultView.addEventListener("resize",e),e()},c.style.display="block",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.height="100%",c.style.width="100%",c.style.overflow="hidden",c.style.pointerEvents="none",c.style.zIndex="-1",c.style.opacity="0",c.setAttribute("tabindex","-1"),c.type="text/html",o.appendChild(c),c.data="about:blank",c},e=mP(function(){r.forEach(function(u){return u(o)})}),t=function(l){i||(i=n()),r.indexOf(l)===-1&&r.push(l)},a=function(){i&&i.parentNode&&(i.contentDocument&&i.contentDocument.defaultView.removeEventListener("resize",e),i.parentNode.removeChild(i),i=null,r=[])},s=function(l){var c=r.indexOf(l);c!==-1&&r.splice(c,1),r.length===0&&i&&a()};return{element:o,bind:t,destroy:a,unbind:s}}function _F(o){var i=null,r=[],n=mP(function(){r.forEach(function(u){u(o)})}),e=function(){var l=new ResizeObserver(n);return l.observe(o),n(),l},t=function(l){i||(i=e()),r.indexOf(l)===-1&&r.push(l)},a=function(){i&&(i.disconnect(),r=[],i=null)},s=function(l){var c=r.indexOf(l);c!==-1&&r.splice(c,1),r.length===0&&i&&a()};return{element:o,bind:t,destroy:a,unbind:s}}var FF=typeof ResizeObserver!="undefined"?_F:LF,c1;(function(o){var i=new WeakMap;function r(e){var t=i.get(e);return t||(t=FF(e),i.set(e,t),t)}function n(e){e.destroy(),i.delete(e.element)}o.bind=function(e,t){var a=r(e);return a.bind(t),function(){return a.unbind(t)}},o.clear=function(e){var t=r(e);n(t)}})(c1||(c1={}));var qm;(function(o){var i=[],r=1e3/60,n=[],e=0,t=function(){return performance.now()},a=function(f){return f[0]},s=function(f){return n.push(f)===1&&u()},u=function(){var c=function(){var y,C;return(C=(y=n.splice(0,n.length))[0])===null||C===void 0?void 0:C.call(y)};if(typeof MessageChannel!="undefined"){var f=new MessageChannel,d=f.port1,v=f.port2;return d.onmessage=c,function(){return v.postMessage(null)}}return function(){return setTimeout(c)}}(),l=function c(){e=t()+r;for(var f=a(i);f&&!o.shouldYield();){var d=f,v=d.callback,m=d.data;f.callback=null;var y=v&&v(m);y?f.callback=y:i.shift(),f=a(i)}f&&s(c)};o.scheduleTask=function(c,f){var d={callback:c,data:f};i.push(d),s(l)},o.shouldYield=function(){var c,f;return((f=(c=navigator)===null||c===void 0?void 0:c.scheduling)===null||f===void 0?void 0:f.isInputPending())||t()>=e}})(qm||(qm={}));var Aa=h("w4Tj"),Ma=h("oZsa"),Xo=function(){function o(i){Object(me.a)(this,o),this.options=Object.assign({},i),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}return Object(ue.a)(o,[{key:"names",get:function(){return Object.keys(this.data)}},{key:"register",value:function(r,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof r=="object"){Object.keys(r).forEach(function(u){e.register(u,r[u],n)});return}this.exist(r)&&!t&&!sa.isApplyingHMR()&&this.onDuplicated(r);var a=this.options.process,s=a?A.call(a,this,r,n):n;return this.data[r]=s,s}},{key:"unregister",value:function(r){var n=r?this.data[r]:null;return delete this.data[r],n}},{key:"get",value:function(r){return r?this.data[r]:null}},{key:"exist",value:function(r){return r?this.data[r]!=null:!1}},{key:"onDuplicated",value:function(r){try{throw this.options.onConflict&&A.call(this.options.onConflict,this,r),new Error("".concat(S.upperFirst(this.options.type)," with name '").concat(r,"' already registered."))}catch(n){throw n}}},{key:"onNotFound",value:function(r,n){throw new Error(this.getSpellingSuggestion(r,n))}},{key:"getSpellingSuggestion",value:function(r,n){var e=this.getSpellingSuggestionForName(r),t=n?"".concat(n," ").concat(S.lowerFirst(this.options.type)):this.options.type;return"".concat(S.upperFirst(t)," with name '").concat(r,"' does not exist.").concat(e?" Did you mean '".concat(e,"'?"):"")}},{key:"getSpellingSuggestionForName",value:function(r){return S.getSpellingSuggestion(r,Object.keys(this.data),function(n){return n})}}]),o}();(function(o){function i(r){return new o(r)}o.create=i})(Xo||(Xo={}));var BF={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},GF={},yP={position:f1("x","width","origin")},bP={position:f1("y","height","origin")},zF={position:f1("x","width","corner")},UF={position:f1("y","height","corner")},CP={set:dh("width","width")},EP={set:dh("height","height")},VF={set:dh("rx","width")},HF={set:dh("ry","height")},OP={set:function(o){var i=dh(o,"width"),r=dh(o,"height");return function(n,e){var t=e.refBBox,a=t.height>t.width?i:r;return A.call(a,this,n,e)}}("r")},WF={set:function(i,r){var n=r.refBBox,e=parseFloat(i),t=E.isPercentage(i);t&&(e/=100);var a=Math.sqrt(n.height*n.height+n.width*n.width),s;return Number.isFinite(e)&&(t||e>=0&&e<=1?s=e*a:s=Math.max(e+a,0)),{r:s}}},$F={set:dh("cx","width")},KF={set:dh("cy","height")},wP={set:AP({resetOffset:!0})},XF={set:AP({resetOffset:!1})},xP={set:MP({resetOffset:!0})},YF={set:MP({resetOffset:!1})},JF=OP,ZF=wP,QF=xP,qF=yP,e5=bP,t5=CP,n5=EP;function f1(o,i,r){return function(n,e){var t=e.refBBox;if(n==null)return null;var a=parseFloat(n),s=E.isPercentage(n);s&&(a/=100);var u;if(Number.isFinite(a)){var l=t[r];s||a>0&&a<1?u=l[o]+t[i]*a:u=l[o]+a}var c=new Pt;return c[o]=u||0,c}}function dh(o,i){return function(r,n){var e=n.refBBox,t=parseFloat(r),a=E.isPercentage(r);a&&(t/=100);var s={};if(Number.isFinite(t)){var u=a||t>=0&&t<=1?t*e[i]:Math.max(t+e[i],0);s[o]=u}return s}}function SP(o,i){var r="x6-shape",n=i&&i.resetOffset;return function(e,t){var a=t.view,s=t.elem,u=t.refBBox,l=a.$(s),c=l.data(r);if(!c||c.value!==e){var f=o(e);c={value:e,shape:f,shapeBBox:f.bbox()},l.data(r,c)}var d=c.shape.clone(),v=c.shapeBBox.clone(),m=v.getOrigin(),y=u.getOrigin();v.x=y.x,v.y=y.y;var C=u.getMaxScaleToFit(v,y),O=v.width===0||u.width===0?1:C.sx,x=v.height===0||u.height===0?1:C.sy;return d.scale(O,x,m),n&&d.translate(-m.x,-m.y),d}}function AP(o){function i(n){return pi.parse(n)}var r=SP(i,o);return function(n,e){var t=r(n,e);return{d:t.serialize()}}}function MP(o){var i=SP(function(r){return new ku(r)},o);return function(r,n){var e=i(r,n);return{points:e.serialize()}}}var r5={qualify:p.isPlainObject,set:function(i,r){var n=r.view;return"url(#".concat(n.graph.defineGradient(i),")")}},a5={qualify:p.isPlainObject,set:function(i,r){var n=r.view,e=n.cell,t=Object.assign({},i);if(e.isEdge()&&t.type==="linearGradient"){var a=n,s=a.sourcePoint,u=a.targetPoint;t.id="gradient-".concat(t.type,"-").concat(e.id),t.attrs=Object.assign(Object.assign({},t.attrs),{x1:s.x,y1:s.y,x2:u.x,y2:u.y,gradientUnits:"userSpaceOnUse"}),n.graph.defs.remove(t.id)}return"url(#".concat(n.graph.defineGradient(t),")")}},TP={qualify:function(i,r){var n=r.attrs;return n.textWrap==null||!p.isPlainObject(n.textWrap)},set:function(i,r){var n=r.view,e=r.elem,t=r.attrs,a="x6-text",s=n.$(e),u=s.data(a),l=function(O){try{return JSON.parse(O)}catch(x){return O}},c={x:t.x,eol:t.eol,annotations:l(t.annotations),textPath:l(t["text-path"]||t.textPath),textVerticalAnchor:t["text-vertical-anchor"]||t.textVerticalAnchor,displayEmpty:(t["display-empty"]||t.displayEmpty)==="true",lineHeight:t["line-height"]||t.lineHeight},f=t["font-size"]||t.fontSize,d=JSON.stringify([i,c]);if(f&&e.setAttribute("font-size",f),u==null||u!==d){var v=c.textPath;if(v!=null&&typeof v=="object"){var m=v.selector;if(typeof m=="string"){var y=n.find(m)[0];y instanceof SVGPathElement&&(M.ensureId(y),c.textPath=Object.assign({"xlink:href":"#".concat(y.id)},v))}}M.text(e,"".concat(i),c),s.data(a,d)}}},i5={qualify:p.isPlainObject,set:function(i,r){var n=r.view,e=r.elem,t=r.attrs,a=r.refBBox,s=i,u=s.width||0;E.isPercentage(u)?a.width*=parseFloat(u)/100:u<=0?a.width+=u:a.width=u;var l=s.height||0;E.isPercentage(l)?a.height*=parseFloat(l)/100:l<=0?a.height+=l:a.height=l;var c,f=s.text;f==null&&(f=t.text),f!=null?c=M.breakText("".concat(f),a,{"font-weight":t["font-weight"]||t.fontWeight,"font-size":t["font-size"]||t.fontSize,"font-family":t["font-family"]||t.fontFamily,lineHeight:t.lineHeight},{svgDocument:n.graph.view.svg,ellipsis:s.ellipsis,hyphen:s.hyphen,breakWord:s.breakWord}):c="",A.call(TP.set,this,c,{view:n,elem:e,attrs:t,refBBox:a,cell:n.cell})}},Jp=function(i,r){var n=r.attrs;return n.text!==void 0},o5={qualify:Jp},s5={qualify:Jp},u5={qualify:Jp},l5={qualify:Jp},c5={qualify:Jp},f5={qualify:Jp},d5={qualify:function(i,r){var n=r.elem;return n instanceof SVGElement},set:function(i,r){var n=r.view,e=r.elem,t="x6-title",a="".concat(i),s=n.$(e),u=s.data(t);if(u==null||u!==a){s.data(t,a);var l=e.firstChild;if(l&&l.tagName.toUpperCase()==="TITLE"){var c=l;c.textContent=a}else{var f=document.createElementNS(e.namespaceURI,"title");f.textContent=a,e.insertBefore(f,l)}}}},h5={offset:PP("x","width","right")},v5={offset:PP("y","height","bottom")},p5={offset:function(i,r){var n=r.refBBox;return i?{x:-n.x,y:-n.y}:{x:0,y:0}}};function PP(o,i,r){return function(n,e){var t=e.refBBox,a=new Pt,s;return n==="middle"?s=t[i]/2:n===r?s=t[i]:typeof n=="number"&&Number.isFinite(n)?s=n>-1&&n<1?-t[i]*n:-n:E.isPercentage(n)?s=t[i]*parseFloat(n)/100:s=0,a[o]=-(t[o]+s),a}}var g5={qualify:p.isPlainObject,set:function(i,r){var n=r.view,e=r.elem;n.$(e).css(i)}},m5={set:function(i,r){var n=r.view,e=r.elem;n.$(e).html("".concat(i))}},y5={qualify:p.isPlainObject,set:function(i,r){var n=r.view;return"url(#".concat(n.graph.defineFilter(i),")")}},b5={set:function(i){return i!=null&&typeof i=="object"&&i.id?i.id:i}};function hh(o,i,r){var n,e;typeof i=="object"?(n=i.x,e=i.y):(n=i,e=r);var t=pi.parse(o),a=t.bbox();if(a){var s=-a.height/2-a.y,u=-a.width/2-a.x;typeof n=="number"&&(u-=n),typeof e=="number"&&(s-=e),t.translate(u,s)}return t.serialize()}var kP=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},C5=function(i){var r=i.size,n=i.width,e=i.height,t=i.offset,a=i.open,s=kP(i,["size","width","height","offset","open"]);return DP({size:r,width:n,height:e,offset:t},a===!0,!0,void 0,s)},E5=function(i){var r=i.size,n=i.width,e=i.height,t=i.offset,a=i.factor,s=kP(i,["size","width","height","offset","factor"]);return DP({size:r,width:n,height:e,offset:t},!1,!1,a,s)};function DP(o,i,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:3/4,e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=o.size||10,a=o.width||t,s=o.height||t,u=new pi,l={};if(i)u.moveTo(a,0).lineTo(0,s/2).lineTo(a,s),l.fill="none";else{if(u.moveTo(0,s/2),u.lineTo(a,0),!r){var c=E.clamp(n,0,1);u.lineTo(a*c,s/2)}u.lineTo(a,s),u.close()}return Object.assign(Object.assign(Object.assign({},l),e),{tagName:"path",d:hh(u.serialize(),{x:o.offset!=null?o.offset:-a/2})})}var O5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},w5=function(i){var r=i.size,n=i.width,e=i.height,t=i.offset,a=O5(i,["size","width","height","offset"]),s=r||10,u=n||s,l=e||s,c=new pi;return c.moveTo(0,l/2).lineTo(u/2,0).lineTo(u,l/2).lineTo(u/2,l).close(),Object.assign(Object.assign({},a),{tagName:"path",d:hh(c.serialize(),t==null?-u/2:t)})},x5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},S5=function(i){var r=i.d,n=i.offsetX,e=i.offsetY,t=x5(i,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},t),{tagName:"path",d:hh(r,n,e)})},A5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},M5=function(i){var r=i.size,n=i.width,e=i.height,t=i.offset,a=A5(i,["size","width","height","offset"]),s=r||10,u=n||s,l=e||s,c=new pi;return c.moveTo(0,0).lineTo(u,l).moveTo(0,l).lineTo(u,0),Object.assign(Object.assign({},a),{tagName:"path",fill:"none",d:hh(c.serialize(),t||-u/2)})},T5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},P5=function(i){var r=i.width,n=i.height,e=i.offset,t=i.open,a=i.flip,s=T5(i,["width","height","offset","open","flip"]),u=n||6,l=r||10,c=t===!0,f=a===!0,d=Object.assign(Object.assign({},s),{tagName:"path"});f&&(u=-u);var v=new pi;return v.moveTo(0,u).lineTo(l,0),c?d.fill="none":(v.lineTo(l,u),v.close()),d.d=hh(v.serialize(),{x:e||-l/2,y:u/2}),d},IP=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},RP=function(i){var r=i.r,n=IP(i,["r"]),e=r||5;return Object.assign(Object.assign({cx:e},n),{tagName:"circle",r:e})},k5=function(i){var r=i.r,n=IP(i,["r"]),e=r||5,t=new pi;return t.moveTo(e,0).lineTo(e,e*2),t.moveTo(0,e).lineTo(e*2,e),{children:[Object.assign(Object.assign({},RP({r:e})),{fill:"none"}),Object.assign(Object.assign({},n),{tagName:"path",d:hh(t.serialize(),-e)})]}},D5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},I5=function(i){var r=i.rx,n=i.ry,e=D5(i,["rx","ry"]),t=r||5,a=n||5;return Object.assign(Object.assign({cx:t},e),{tagName:"ellipse",rx:t,ry:a})},bd;(function(o){o.presets=U,o.registry=Xo.create({type:"marker"}),o.registry.register(o.presets,!0)})(bd||(bd={})),function(o){o.normalize=hh}(bd||(bd={}));var R5=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r};function Zx(o){return typeof o=="string"||p.isPlainObject(o)}var N5={qualify:Zx,set:function(i,r){var n=r.view,e=r.attrs;return Qx("marker-start",i,n,e)}},j5={qualify:Zx,set:function(i,r){var n=r.view,e=r.attrs;return Qx("marker-end",i,n,e,{transform:"rotate(180)"})}},L5={qualify:Zx,set:function(i,r){var n=r.view,e=r.attrs;return Qx("marker-mid",i,n,e)}};function Qx(o,i,r,n){var e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{},t=typeof i=="string"?{name:i}:i,a=t.name,s=t.args,u=R5(t,["name","args"]),l=u;if(a&&typeof a=="string"){var c=bd.registry.get(a);if(c)l=c(Object.assign(Object.assign({},u),s));else return bd.registry.onNotFound(a)}var f=Object.assign(Object.assign(Object.assign({},_5(n,o)),e),l);return Object(Re.a)({},o,"url(#".concat(r.graph.defineMarker(f),")"))}function _5(o,i){var r={},n=o.stroke;typeof n=="string"&&(r.stroke=n,r.fill=n);var e=o.strokeOpacity;if(e==null&&(e=o["stroke-opacity"]),e==null&&(e=o.opacity),e!=null&&(r["stroke-opacity"]=e,r["fill-opacity"]=e),i!=="marker-mid"){var t=parseFloat(o.strokeWidth||o["stroke-width"]);if(Number.isFinite(t)&&t>1){var a=Math.ceil(t/2);r.refX=i==="marker-start"?a:-a}}return r}var e0=function(i,r){var n=r.view;return n.cell.isEdge()},F5={qualify:e0,set:function(i,r){var n,e,t,a,s=r.view,u=i.reverse||!1,l=i.stubs||0,c;if(Number.isFinite(l)&&l!==0)if(u){var C,O,x=s.getConnectionLength()||0;l<0?(C=(x+l)/2,O=-l):(C=l,O=x-l*2);var T=s.getConnection();c=(a=(t=(e=(n=T==null?void 0:T.divideAtLength(C))===null||n===void 0?void 0:n[1])===null||e===void 0?void 0:e.divideAtLength(O))===null||t===void 0?void 0:t[0])===null||a===void 0?void 0:a.serialize()}else{var f;if(l<0){var d=s.getConnectionLength()||0;f=(d+l)/2}else f=l;var v=s.getConnection();if(v){var m=v.divideAtLength(f),y=v.divideAtLength(-f);m&&y&&(c="".concat(m[0].serialize()," ").concat(y[1].serialize()))}}return{d:c||s.getConnectionPathData()}}},NP={qualify:e0,set:d1("getTangentAtLength",{rotate:!0})},B5={qualify:e0,set:d1("getTangentAtLength",{rotate:!1})},jP={qualify:e0,set:d1("getTangentAtRatio",{rotate:!0})},G5={qualify:e0,set:d1("getTangentAtRatio",{rotate:!1})},z5=NP,U5=jP;function d1(o,i){var r={x:1,y:0};return function(n,e){var t,a,s=e.view,u=s[o](Number(n));return u?(a=i.rotate?u.vector().vectorAngle(r):0,t=u.start):(t=s.path.start,a=0),a===0?{transform:"translate(".concat(t.x,",").concat(t.y,"')")}:{transform:"translate(".concat(t.x,",").concat(t.y,"') rotate(").concat(a,")")}}}var zc;(function(o){function i(r,n,e){return!!(r!=null&&(typeof r=="string"||typeof r.qualify!="function"||A.call(r.qualify,this,n,e)))}o.isValidDefinition=i})(zc||(zc={})),function(o){o.presets=Object.assign(Object.assign({},BF),V),o.registry=Xo.create({type:"attribute definition"}),o.registry.register(o.presets,!0)}(zc||(zc={}));var V5={color:"#aaaaaa",thickness:1,markup:"rect",update:function(i,r){var n=r.thickness*r.sx,e=r.thickness*r.sy;M.attr(i,{width:n,height:e,rx:n,ry:e,fill:r.color})}},H5={color:"#aaaaaa",thickness:1,markup:"rect",update:function(i,r){var n=r.sx<=1?r.thickness*r.sx:r.thickness;M.attr(i,{width:n,height:n,rx:n,ry:n,fill:r.color})}},W5={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(i,r){var n,e=r.width,t=r.height,a=r.thickness;e-a>=0&&t-a>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",M.attr(i,{d:n,stroke:r.color,"stroke-width":r.thickness})}},$5=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update:function(i,r){var n,e=r.width,t=r.height,a=r.thickness;e-a>=0&&t-a>=0?n=["M",e,0,"H0 M0 0 V0",t].join(" "):n="M 0 0 0 0",M.attr(i,{d:n,stroke:r.color,"stroke-width":r.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update:function(i,r){var n,e=r.factor||1,t=r.width*e,a=r.height*e,s=r.thickness;t-s>=0&&a-s>=0?n=["M",t,0,"H0 M0 0 V0",a].join(" "):n="M 0 0 0 0",r.width=t,r.height=a,M.attr(i,{d:n,stroke:r.color,"stroke-width":r.thickness})}}],Cd=function(){function o(){Object(me.a)(this,o),this.patterns={},this.root=oi.create(M.createSvgDocument(),{width:"100%",height:"100%"},[M.createSvgElement("defs")]).node}return Object(ue.a)(o,[{key:"add",value:function(r,n){var e=this.root.childNodes[0];e&&e.appendChild(n),this.patterns[r]=n,oi.create("rect",{width:"100%",height:"100%",fill:"url(#".concat(r,")")}).appendTo(this.root)}},{key:"get",value:function(r){return this.patterns[r]}},{key:"has",value:function(r){return this.patterns[r]!=null}}]),o}();(function(o){o.presets=$,o.registry=Xo.create({type:"grid"}),o.registry.register(o.presets,!0)})(Cd||(Cd={}));function qx(o,i){return o!=null?o:i}function ru(o,i){return o!=null&&Number.isFinite(o)?o:i}function K5(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=qx(o.color,"blue"),r=ru(o.width,1),n=ru(o.margin,2),e=ru(o.opacity,1),t=n,a=n+r;return`
    <filter>
      <feFlood flood-color="`.concat(i,'" flood-opacity="').concat(e,`" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="`).concat(a,`" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="`).concat(t,`" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `).trim()}function X5(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=qx(o.color,"red"),r=ru(o.blur,0),n=ru(o.width,1),e=ru(o.opacity,1);return`
      <filter>
        <feFlood flood-color="`.concat(i,'" flood-opacity="').concat(e,`" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="`).concat(n,`"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="`).concat(r,`"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `).trim()}function Y5(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=ru(o.x,2),r=o.y!=null&&Number.isFinite(o.y)?[i,o.y]:i;return`
    <filter>
      <feGaussianBlur stdDeviation="`.concat(r,`"/>
    </filter>
  `).trim()}function J5(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=ru(o.dx,0),r=ru(o.dy,0),n=qx(o.color,"black"),e=ru(o.blur,4),t=ru(o.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="`.concat(e,'" dx="').concat(i,'" dy="').concat(r,'" flood-color="').concat(n,'" flood-opacity="').concat(t,`" />
       </filter>`).trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="`.concat(e,`" />
         <feOffset dx="`).concat(i,'" dy="').concat(r,`" result="offsetblur" />
         <feFlood flood-color="`).concat(n,`" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="`).concat(t,`" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`).trim()}function Z5(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=ru(o.amount,1),r=.2126+.7874*(1-i),n=.7152-.7152*(1-i),e=.0722-.0722*(1-i),t=.2126-.2126*(1-i),a=.7152+.2848*(1-i),s=.0722-.0722*(1-i),u=.2126-.2126*(1-i),l=.0722+.9278*(1-i);return`
    <filter>
      <feColorMatrix type="matrix" values="`.concat(r," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(a," ").concat(s," 0 0 ").concat(u," ").concat(n," ").concat(l,` 0 0 0 0 0 1 0"/>
    </filter>
  `).trim()}function Q5(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=ru(o.amount,1),r=.393+.607*(1-i),n=.769-.769*(1-i),e=.189-.189*(1-i),t=.349-.349*(1-i),a=.686+.314*(1-i),s=.168-.168*(1-i),u=.272-.272*(1-i),l=.534-.534*(1-i),c=.131+.869*(1-i);return`
      <filter>
        <feColorMatrix type="matrix" values="`.concat(r," ").concat(n," ").concat(e," 0 0 ").concat(t," ").concat(a," ").concat(s," 0 0 ").concat(u," ").concat(l," ").concat(c,` 0 0 0 0 0 1 0"/>
      </filter>
    `).trim()}function q5(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=ru(o.amount,1);return`
      <filter>
        <feColorMatrix type="saturate" values="`.concat(1-i,`"/>
      </filter>
    `).trim()}function eB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=ru(o.angle,0);return`
      <filter>
        <feColorMatrix type="hueRotate" values="`.concat(i,`"/>
      </filter>
    `).trim()}function tB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=ru(o.amount,1),r=1-i;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="`.concat(i," ").concat(r,`"/>
          <feFuncG type="table" tableValues="`).concat(i," ").concat(r,`"/>
          <feFuncB type="table" tableValues="`).concat(i," ").concat(r,`"/>
        </feComponentTransfer>
      </filter>
    `).trim()}function nB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=ru(o.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(i,`"/>
        <feFuncG type="linear" slope="`).concat(i,`"/>
        <feFuncB type="linear" slope="`).concat(i,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}function rB(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=ru(o.amount,1),r=.5-i/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="`.concat(i,'" intercept="').concat(r,`"/>
        <feFuncG type="linear" slope="`).concat(i,'" intercept="').concat(r,`"/>
        <feFuncB type="linear" slope="`).concat(i,'" intercept="').concat(r,`"/>
      </feComponentTransfer>
    </filter>
  `).trim()}var Av;(function(o){o.presets=W,o.registry=Xo.create({type:"filter"}),o.registry.register(o.presets,!0)})(Av||(Av={}));var LP=function(i){var r=document.createElement("canvas"),n=i.width,e=i.height;r.width=n*2,r.height=e;var t=r.getContext("2d");return t.drawImage(i,0,0,n,e),t.translate(2*n,0),t.scale(-1,1),t.drawImage(i,0,0,n,e),r},_P=function(i){var r=document.createElement("canvas"),n=i.width,e=i.height;r.width=n,r.height=e*2;var t=r.getContext("2d");return t.drawImage(i,0,0,n,e),t.translate(0,2*e),t.scale(1,-1),t.drawImage(i,0,0,n,e),r},FP=function(i){var r=document.createElement("canvas"),n=i.width,e=i.height;r.width=2*n,r.height=2*e;var t=r.getContext("2d");return t.drawImage(i,0,0,n,e),t.setTransform(-1,0,0,-1,r.width,r.height),t.drawImage(i,0,0,n,e),t.setTransform(-1,0,0,1,r.width,0),t.drawImage(i,0,0,n,e),t.setTransform(1,0,0,-1,0,r.height),t.drawImage(i,0,0,n,e),r},aB=function(i,r){var n=i.width,e=i.height,t=document.createElement("canvas");t.width=n*3,t.height=e*3;for(var a=t.getContext("2d"),s=r.angle!=null?-r.angle:-20,u=Mi.toRad(s),l=t.width/4,c=t.height/4,f=0;f<4;f+=1)for(var d=0;d<4;d+=1)(f+d)%2>0&&(a.setTransform(1,0,0,1,(2*f-1)*l,(2*d-1)*c),a.rotate(u),a.drawImage(i,-n/2,-e/2,n,e));return t},Zp;(function(o){o.presets=Object.assign({},Y),o.presets["flip-x"]=LP,o.presets["flip-y"]=_P,o.presets["flip-xy"]=FP,o.registry=Xo.create({type:"background pattern"}),o.registry.register(o.presets,!0)})(Zp||(Zp={}));var Ll={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track:function(i){Ll.trackable=i}},hs;(function(o){o.snapToGrid=Fx,o.normalizeMarker=hh;function i(r){return"".concat(Ll.prefixCls,"-").concat(r)}o.prefix=i})(hs||(hs={})),function(o){function i(r,n,e){var t=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],s=typeof n.children=="function"?n.children(r):r[n.children||"children"];return e||(e=n.createNode(r),a.push(e)),Array.isArray(s)&&s.forEach(function(u){var l=n.createNode(u),c=n.createEdge(e,l);a.push(l,c),t.makeTree(u,n,l,a)}),a}o.makeTree=i}(hs||(hs={}));var BP=hs.prefix("highlighted"),iB={highlight:function(i,r,n){var e=n&&n.className||BP;M.addClass(r,e)},unhighlight:function(i,r,n){var e=n&&n.className||BP;M.removeClass(r,e)}},GP=hs.prefix("highlight-opacity"),oB={highlight:function(i,r){M.addClass(r,GP)},unhighlight:function(i,r){M.removeClass(r,GP)}},sB={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},uB={highlight:function(i,r,n){var e=vh.getHighlighterId(r,n);if(!vh.hasCache(e)){n=p.defaultsDeep({},n,sB);var t=oi.create(r),a,s;try{a=t.toPathData()}catch(L){s=t.bbox(!0),a=M.rectToPathData(Object.assign(Object.assign({},n),s))}var u=M.createSvgElement("path");if(M.attr(u,Object.assign({d:a,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},n.attrs?M.kebablizeAttrs(n.attrs):null)),i.isEdgeElement(r))M.attr(u,"d",i.getConnectionPathData());else{var l=t.getTransformToElement(i.container),c=n.padding;if(c){s==null&&(s=t.bbox(!0));var f=s.x+s.width/2,d=s.y+s.height/2;s=M.transformRectangle(s,l);var v=Math.max(s.width,1),m=Math.max(s.height,1),y=(v+c)/v,C=(m+c)/m,O=M.createSVGMatrix({a:y,b:0,c:0,d:C,e:f-y*f,f:d-C*d});l=l.multiply(O)}M.transform(u,l)}M.addClass(u,hs.prefix("highlight-stroke"));var x=i.cell,T=function(){return vh.removeHighlighter(e)};x.on("removed",T),x.model&&x.model.on("reseted",T),i.container.appendChild(u),vh.setCache(e,u)}},unhighlight:function(i,r,n){vh.removeHighlighter(vh.getHighlighterId(r,n))}},vh;(function(o){function i(a,s){return M.ensureId(a),a.id+JSON.stringify(s)}o.getHighlighterId=i;var r={};function n(a,s){r[a]=s}o.setCache=n;function e(a){return r[a]!=null}o.hasCache=e;function t(a){var s=r[a];s&&(M.remove(s),delete r[a])}o.removeHighlighter=t})(vh||(vh={}));var Df;(function(o){function i(r,n){if(typeof n.highlight!="function")throw new Error("Highlighter '".concat(r,"' is missing required `highlight()` method"));if(typeof n.unhighlight!="function")throw new Error("Highlighter '".concat(r,"' is missing required `unhighlight()` method"))}o.check=i})(Df||(Df={})),function(o){o.presets=ee,o.registry=Xo.create({type:"highlighter"}),o.registry.register(o.presets,!0)}(Df||(Df={}));function eS(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Pt(E.normalizePercentage(i.x,o.width),E.normalizePercentage(i.y,o.height))}function tS(o,i,r){return Object.assign({angle:i,position:o.toJSON()},r)}var lB=function(i,r){return i.map(function(n){var e=n.x,t=n.y,a=n.angle;return tS(eS(r,{x:e,y:t}),a||0)})},cB=function(i,r,n){var e=n.start||0,t=n.step||20;return zP(i,r,e,function(a,s){return(a+.5-s/2)*t})},fB=function(i,r,n){var e=n.start||0,t=n.step||360/i.length;return zP(i,r,e,function(a){return a*t})};function zP(o,i,r,n){var e=i.getCenter(),t=i.getTopCenter(),a=i.width/i.height,s=lh.fromRect(i),u=o.length;return o.map(function(l,c){var f=r+n(c,u),d=t.clone().rotate(-f,e).scale(a,1,e),v=l.compensateRotate?-s.tangentTheta(d):0;return(l.dx||l.dy)&&d.translate(l.dx||0,l.dy||0),l.dr&&d.move(e,l.dr),tS(d.round(),v,l)})}var dB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},hB=function(i,r,n){var e=eS(r,n.start||r.getOrigin()),t=eS(r,n.end||r.getCorner());return t0(i,e,t,n)},vB=function(i,r,n){return t0(i,r.getTopLeft(),r.getBottomLeft(),n)},pB=function(i,r,n){return t0(i,r.getTopRight(),r.getBottomRight(),n)},gB=function(i,r,n){return t0(i,r.getTopLeft(),r.getTopRight(),n)},mB=function(i,r,n){return t0(i,r.getBottomLeft(),r.getBottomRight(),n)};function t0(o,i,r,n){var e=new Sa(i,r),t=o.length;return o.map(function(a,s){var u=a.strict,l=dB(a,["strict"]),c=u||n.strict?(s+1)/(t+1):(s+.5)/t,f=e.pointAt(c);return(l.dx||l.dy)&&f.translate(l.dx||0,l.dy||0),tS(f.round(),0,l)})}var ph;(function(o){o.presets=ne,o.registry=Xo.create({type:"port layout"}),o.registry.register(o.presets,!0)})(ph||(ph={}));var yB={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function gh(o,i){var r=i||{},n=r.x,e=r.y,t=r.angle,a=r.attrs;return p.defaultsDeep({},{angle:t,attrs:a,position:{x:n,y:e}},o,yB)}var bB=function(i,r,n){return gh({position:r.getTopLeft()},n)},CB=function(i,r,n){return gh({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n)},EB=function(i,r,n){return gh({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n)},OB=function(i,r,n){return gh({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n)},wB=function(i,r,n){return gh({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n)},xB=function(i,r,n){return UP(i,r,!1,n)},SB=function(i,r,n){return UP(i,r,!0,n)},AB=function(i,r,n){return VP(i,r,!1,n)},MB=function(i,r,n){return VP(i,r,!0,n)};function UP(o,i,r,n){var e=n.offset!=null?n.offset:15,t=i.getCenter().theta(o),a=HP(i),s,u,l,c,f=0;return t<a[1]||t>a[2]?(s=".3em",u=e,l=0,c="start"):t<a[0]?(s="0",u=0,l=-e,r?(f=-90,c="start"):c="middle"):t<a[3]?(s=".3em",u=-e,l=0,c="end"):(s=".6em",u=0,l=e,r?(f=90,c="start"):c="middle"),gh({position:{x:Math.round(u),y:Math.round(l)},angle:f,attrs:{".":{y:s,"text-anchor":c}}},n)}function VP(o,i,r,n){var e=n.offset!=null?n.offset:15,t=i.getCenter().theta(o),a=HP(i),s,u,l,c,f=0;return t<a[1]||t>a[2]?(s=".3em",u=-e,l=0,c="end"):t<a[0]?(s=".6em",u=0,l=e,r?(f=90,c="start"):c="middle"):t<a[3]?(s=".3em",u=e,l=0,c="start"):(s="0em",u=0,l=-e,r?(f=-90,c="start"):c="middle"),gh({position:{x:Math.round(u),y:Math.round(l)},angle:f,attrs:{".":{y:s,"text-anchor":c}}},n)}function HP(o){var i=o.getCenter(),r=i.theta(o.getTopLeft()),n=i.theta(o.getBottomLeft()),e=i.theta(o.getBottomRight()),t=i.theta(o.getTopRight());return[r,t,e,n]}var TB=function(i,r,n){return WP(i.diff(r.getCenter()),!1,n)},PB=function(i,r,n){return WP(i.diff(r.getCenter()),!0,n)};function WP(o,i,r){var n=r.offset!=null?r.offset:20,e=new Pt(0,0),t=-o.theta(e),a=o.clone().move(e,n).diff(o).round(),s=".3em",u,l=t;return(t+90)%180==0?(u=i?"end":"middle",!i&&t===-270&&(s="0em")):t>-270&&t<-90?(u="start",l=t-180):u="end",gh({position:a.round().toJSON(),angle:i?l:0,attrs:{".":{y:s,"text-anchor":u}}},r)}var Mv;(function(o){o.presets=ie,o.registry=Xo.create({type:"port label layout"}),o.registry.register(o.presets,!0)})(Mv||(Mv={}));var rs=h("tS8v"),h1=function(){function o(i,r,n,e){if(Object(me.a)(this,o),i==null)return this.set(255,255,255,1);if(typeof i=="number")return this.set(i,r,n,e);if(typeof i=="string")return o.fromString(i)||this;if(Array.isArray(i))return this.set(i);this.set(i.r,i.g,i.b,i.a==null?1:i.a)}return Object(ue.a)(o,[{key:"blend",value:function(r,n,e){this.set(r.r+(n.r-r.r)*e,r.g+(n.g-r.g)*e,r.b+(n.b-r.b)*e,r.a+(n.a-r.a)*e)}},{key:"lighten",value:function(r){var n=o.lighten(this.toArray(),r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}},{key:"darken",value:function(r){this.lighten(-r)}},{key:"set",value:function(r,n,e,t){var a=Array.isArray(r)?r[0]:r,s=Array.isArray(r)?r[1]:n,u=Array.isArray(r)?r[2]:e,l=Array.isArray(r)?r[3]:t;return this.r=Math.round(E.clamp(a,0,255)),this.g=Math.round(E.clamp(s,0,255)),this.b=Math.round(E.clamp(u,0,255)),this.a=l==null?1:E.clamp(l,0,1),this}},{key:"toHex",value:function(){var r=this,n=["r","g","b"].map(function(e){var t=r[e].toString(16);return t.length<2?"0".concat(t):t});return"#".concat(n.join(""))}},{key:"toRGBA",value:function(){return this.toArray()}},{key:"toHSLA",value:function(){return o.rgba2hsla(this.r,this.g,this.b,this.a)}},{key:"toCSS",value:function(r){var n="".concat(this.r,",").concat(this.g,",").concat(this.b,",");return r?"rgb(".concat(n,")"):"rgba(".concat(n,",").concat(this.a,")")}},{key:"toGrey",value:function(){return o.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}},{key:"toArray",value:function(){return[this.r,this.g,this.b,this.a]}},{key:"toString",value:function(){return this.toCSS()}}]),o}();(function(o){function i(T){return new o(T)}o.fromArray=i;function r(T){return new o([].concat(Object(We.a)(m(T)),[1]))}o.fromHex=r;function n(T){var L=T.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(L){var _=L[1].split(/\s*,\s*/).map(function(z){return parseInt(z,10)});return new o(_)}return null}o.fromRGBA=n;function e(T,L,_){_<0&&++_,_>1&&--_;var z=6*_;return z<1?T+(L-T)*z:2*_<1?L:3*_<2?T+(L-T)*(2/3-_)*6:T}function t(T){var L=T.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(L){var _=L[2].split(/\s*,\s*/),z=(parseFloat(_[0])%360+360)%360/360,Q=parseFloat(_[1])/100,q=parseFloat(_[2])/100,ye=_[3]==null?1:parseInt(_[3],10);return new o(l(z,Q,q,ye))}return null}o.fromHSLA=t;function a(T){if(T.startsWith("#"))return r(T);if(T.startsWith("rgb"))return n(T);var L=o.named[T];return L?r(L):t(T)}o.fromString=a;function s(T,L){return o.fromArray([T,T,T,L])}o.makeGrey=s;function u(T,L,_,z){var Q=Array.isArray(T)?T[0]:T,q=Array.isArray(T)?T[1]:L,ye=Array.isArray(T)?T[2]:_,Ce=Array.isArray(T)?T[3]:z,Ae=Math.max(Q,q,ye),Pe=Math.min(Q,q,ye),qe=(Ae+Pe)/2,lt=0,ze=0;if(Pe!==Ae){var ht=Ae-Pe;switch(ze=qe>.5?ht/(2-Ae-Pe):ht/(Ae+Pe),Ae){case Q:lt=(q-ye)/ht+(q<ye?6:0);break;case q:lt=(ye-Q)/ht+2;break;case ye:lt=(Q-q)/ht+4;break;default:break}lt/=6}return[lt,ze,qe,Ce==null?1:Ce]}o.rgba2hsla=u;function l(T,L,_,z){var Q=Array.isArray(T)?T[0]:T,q=Array.isArray(T)?T[1]:L,ye=Array.isArray(T)?T[2]:_,Ce=Array.isArray(T)?T[3]:z,Ae=ye<=.5?ye*(q+1):ye+q-ye*q,Pe=2*ye-Ae;return[e(Pe,Ae,Q+1/3)*256,e(Pe,Ae,Q)*256,e(Pe,Ae,Q-1/3)*256,Ce==null?1:Ce]}o.hsla2rgba=l;function c(T){return new o(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),T?void 0:parseFloat(Math.random().toFixed(2)))}o.random=c;function f(){for(var T="0123456789ABCDEF",L="#",_=0;_<6;_+=1)L+=T[Math.floor(Math.random()*16)];return L}o.randomHex=f;function d(T){return c(T).toString()}o.randomRGBA=d;function v(T,L){if(typeof T=="string"){var _=T[0]==="#",z=m(T),Q=Object(je.a)(z,3),q=Q[0],ye=Q[1],Ce=Q[2];return L?q*.299+ye*.587+Ce*.114>186?"#000000":"#ffffff":"".concat(_?"#":"").concat(y(255-q,255-ye,255-Ce))}var Ae=T[0],Pe=T[1],qe=T[2],lt=T[3];return L?Ae*.299+Pe*.587+qe*.114>186?[0,0,0,lt]:[255,255,255,lt]:[255-Ae,255-Pe,255-qe,lt]}o.invert=v;function m(T){var L=T.indexOf("#")===0?T:"#".concat(T),_=Number("0x".concat(L.substr(1)));if(!(L.length===4||L.length===7)||Number.isNaN(_))throw new Error("Invalid hex color.");var z=L.length===4?4:8,Q=(1<<z)-1,q=["b","g","r"].map(function(){var ye=_&Q;return _>>=z,z===4?17*ye:ye});return[q[2],q[1],q[0]]}function y(T,L,_){var z=function(q){return q.length<2?"0".concat(q):q};return"".concat(z(T.toString(16))).concat(z(L.toString(16))).concat(z(_.toString(16)))}function C(T,L){return x(T,L)}o.lighten=C;function O(T,L){return x(T,-L)}o.darken=O;function x(T,L){if(typeof T=="string"){var _=T[0]==="#",z=parseInt(_?T.substr(1):T,16),Q=E.clamp((z>>16)+L,0,255),q=E.clamp((z>>8&255)+L,0,255),ye=E.clamp((z&255)+L,0,255);return"".concat(_?"#":"").concat((ye|q<<8|Q<<16).toString(16))}var Ce=y(T[0],T[1],T[2]),Ae=m(x(Ce,L));return[Ae[0],Ae[1],Ae[2],T[3]]}})(h1||(h1={})),function(o){o.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(h1||(h1={}));var kB=function(){function o(){Object(me.a)(this,o),this.listeners={}}return Object(ue.a)(o,[{key:"on",value:function(r,n,e){if(n==null)return this;this.listeners[r]||(this.listeners[r]=[]);var t=this.listeners[r];return t.push(n,e),this}},{key:"once",value:function(r,n,e){var t=this,a=function s(){t.off(r,s);for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return n0.call([n,e],l)};return this.on(r,a,this)}},{key:"off",value:function(r,n,e){if(!(r||n||e))return this.listeners={},this;var t=this.listeners,a=r?[r]:Object.keys(t);return a.forEach(function(s){var u=t[s];if(!!u){if(!(n||e)){delete t[s];return}for(var l=u.length-2;l>=0;l-=2)n&&u[l]!==n||e&&u[l+1]!==e||u.splice(l,2)}}),this}},{key:"trigger",value:function(r){for(var n=!0,e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];if(r!=="*"){var s=this.listeners[r];s!=null&&(n=n0.call(Object(We.a)(s),t))}var u=this.listeners["*"];return u!=null?A.toAsyncBoolean([n,n0.call(Object(We.a)(u),[r].concat(t))]):n}},{key:"emit",value:function(r){for(var n=arguments.length,e=new Array(n>1?n-1:0),t=1;t<n;t++)e[t-1]=arguments[t];return this.trigger.apply(this,[r].concat(e))}}]),o}(),n0;(function(o){function i(r,n){for(var e=[],t=0;t<r.length;t+=2){var a=r[t],s=r[t+1],u=Array.isArray(n)?n:[n],l=A.apply(a,s,u);e.push(l)}return A.toAsyncBoolean(e)}o.call=i})(n0||(n0={}));var Uc=function(){function o(){Object(me.a)(this,o)}return Object(ue.a)(o,[{key:"disposed",get:function(){return this._disposed===!0}},{key:"dispose",value:function(){this._disposed=!0}}]),o}();(function(o){function i(){return function(r,n,e){var t=e.value,a=r.__proto__;e.value=function(){this.disposed||(t.call(this),a.dispose.call(this))}}}o.dispose=i})(Uc||(Uc={}));var $Q=function(){function o(i){Object(me.a)(this,o),this.callback=i}return Object(ue.a)(o,[{key:"disposed",get:function(){return!this.callback}},{key:"dispose",value:function(){if(!!this.callback){var r=this.callback;this.callback=null,r()}}}]),o}(),$P=function(){function o(){Object(me.a)(this,o),this.isDisposed=!1,this.items=new Set}return Object(ue.a)(o,[{key:"disposed",get:function(){return this.isDisposed}},{key:"dispose",value:function(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(function(r){r.dispose()}),this.items.clear())}},{key:"contains",value:function(r){return this.items.has(r)}},{key:"add",value:function(r){this.items.add(r)}},{key:"remove",value:function(r){this.items.delete(r)}},{key:"clear",value:function(){this.items.clear()}}]),o}();(function(o){function i(r){var n=new o;return r.forEach(function(e){n.add(e)}),n}o.from=i})($P||($P={}));var yu=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r)}(kB);(function(o){o.dispose=Uc.dispose})(yu||(yu={})),p.applyMixins(yu,Uc);var KP=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"disabled",get:function(){return this._disabled===!0}},{key:"enable",value:function(){delete this._disabled}},{key:"disable",value:function(){this._disabled=!0}}]),r}(yu),DB=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},v1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.call(this),n.clear(),n}return Object(ue.a)(r,[{key:"clear",value:function(){this.map=new WeakMap,this.arr=[]}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e){return this.map.get(e)}},{key:"set",value:function(e,t){this.map.set(e,t),this.arr.push(e)}},{key:"delete",value:function(e){var t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);var a=this.map.get(e);return this.map.delete(e),a}},{key:"each",value:function(e){var t=this;this.arr.forEach(function(a){var s=t.map.get(a);e(s,a)})}},{key:"dispose",value:function(){this.clear()}}]),r}(Uc);DB([Uc.dispose()],v1.prototype,"dispose",null);var nS=function(){function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(me.a)(this,o),this.comparator=i.comparator||o.defaultComparator,this.index={},this.data=i.data||[],this.heapify()}return Object(ue.a)(o,[{key:"isEmpty",value:function(){return this.data.length===0}},{key:"insert",value:function(r,n,e){var t={priority:r,value:n},a=this.data.length;return e&&(t.id=e,this.index[e]=a),this.data.push(t),this.bubbleUp(a),this}},{key:"peek",value:function(){return this.data[0]?this.data[0].value:null}},{key:"peekPriority",value:function(){return this.data[0]?this.data[0].priority:null}},{key:"updatePriority",value:function(r,n){var e=this.index[r];if(typeof e=="undefined")throw new Error("Node with id '".concat(r,"' was not found in the heap."));var t=this.data,a=t[e].priority,s=this.comparator(n,a);s<0?(t[e].priority=n,this.bubbleUp(e)):s>0&&(t[e].priority=n,this.bubbleDown(e))}},{key:"remove",value:function(){var r=this.data,n=r[0],e=r.pop();return n.id&&delete this.index[n.id],r.length>0&&(r[0]=e,e.id&&(this.index[e.id]=0),this.bubbleDown(0)),n?n.value:null}},{key:"heapify",value:function(){for(var r=0;r<this.data.length;r+=1)this.bubbleUp(r)}},{key:"bubbleUp",value:function(r){for(var n=this.data,e,t,a=r;a>0&&(t=a-1>>>1,this.comparator(n[a].priority,n[t].priority)<0);){e=n[t],n[t]=n[a];var s=n[a].id;s!=null&&(this.index[s]=t),n[a]=e,s=n[a].id,s!=null&&(this.index[s]=a),a=t}}},{key:"bubbleDown",value:function(r){for(var n=this.data,e=n.length-1,t=r;;){var a=(t<<1)+1,s=a+1,u=t;if(a<=e&&this.comparator(n[a].priority,n[u].priority)<0&&(u=a),s<=e&&this.comparator(n[s].priority,n[u].priority)<0&&(u=s),u!==t){var l=n[u];n[u]=n[t];var c=n[t].id;c!=null&&(this.index[c]=u),n[t]=l,c=n[t].id,c!=null&&(this.index[c]=t),t=u}else break}}}]),o}();(function(o){o.defaultComparator=function(i,r){return i-r}})(nS||(nS={}));var rS;(function(o){function i(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(m,y){return 1},t={},a={},s={},u=new nS;for(t[n]=0,Object.keys(r).forEach(function(m){m!==n&&(t[m]=Infinity),u.insert(t[m],m,m)});!u.isEmpty();){var l=u.remove();s[l]=!0;for(var c=r[l]||[],f=0;f<c.length;f+=1){var d=c[f];if(!s[d]){var v=t[l]+e(l,d);v<t[d]&&(t[d]=v,a[d]=l,u.updatePriority(d,v))}}}return a}o.run=i})(rS||(rS={}));var Tv;(function(o){o.linear=function(i){return i},o.quad=function(i){return i*i},o.cubic=function(i){return i*i*i},o.inout=function(i){if(i<=0)return 0;if(i>=1)return 1;var r=i*i,n=r*i;return 4*(i<.5?n:3*(i-r)+n-.75)},o.exponential=function(i){return Math.pow(2,10*(i-1))},o.bounce=function(i){for(var r=0,n=1;;r+=n,n/=2)if(i>=(7-4*r)/11){var e=(11-6*r-11*i)/4;return-e*e+n*n}}})(Tv||(Tv={})),function(o){o.decorators={reverse:function(r){return function(n){return 1-r(1-n)}},reflect:function(r){return function(n){return .5*(n<.5?r(2*n):2-r(2-2*n))}},clamp:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return function(t){var a=r(t);return a<n?n:a>e?e:a}},back:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.70158;return function(n){return n*n*((r+1)*n-r)}},elastic:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1.5;return function(n){return Math.pow(2,10*(n-1))*Math.cos(20*Math.PI*r/3*n)}}}}(Tv||(Tv={})),function(o){function i(ze){return-1*Math.cos(ze*(Math.PI/2))+1}o.easeInSine=i;function r(ze){return Math.sin(ze*(Math.PI/2))}o.easeOutSine=r;function n(ze){return-.5*(Math.cos(Math.PI*ze)-1)}o.easeInOutSine=n;function e(ze){return ze*ze}o.easeInQuad=e;function t(ze){return ze*(2-ze)}o.easeOutQuad=t;function a(ze){return ze<.5?2*ze*ze:-1+(4-2*ze)*ze}o.easeInOutQuad=a;function s(ze){return ze*ze*ze}o.easeInCubic=s;function u(ze){var ht=ze-1;return ht*ht*ht+1}o.easeOutCubic=u;function l(ze){return ze<.5?4*ze*ze*ze:(ze-1)*(2*ze-2)*(2*ze-2)+1}o.easeInOutCubic=l;function c(ze){return ze*ze*ze*ze}o.easeInQuart=c;function f(ze){var ht=ze-1;return 1-ht*ht*ht*ht}o.easeOutQuart=f;function d(ze){var ht=ze-1;return ze<.5?8*ze*ze*ze*ze:1-8*ht*ht*ht*ht}o.easeInOutQuart=d;function v(ze){return ze*ze*ze*ze*ze}o.easeInQuint=v;function m(ze){var ht=ze-1;return 1+ht*ht*ht*ht*ht}o.easeOutQuint=m;function y(ze){var ht=ze-1;return ze<.5?16*ze*ze*ze*ze*ze:1+16*ht*ht*ht*ht*ht}o.easeInOutQuint=y;function C(ze){return ze===0?0:Math.pow(2,10*(ze-1))}o.easeInExpo=C;function O(ze){return ze===1?1:-Math.pow(2,-10*ze)+1}o.easeOutExpo=O;function x(ze){if(ze===0||ze===1)return ze;var ht=ze*2,nn=ht-1;return ht<1?.5*Math.pow(2,10*nn):.5*(-Math.pow(2,-10*nn)+2)}o.easeInOutExpo=x;function T(ze){var ht=ze/1;return-1*(Math.sqrt(1-ht*ze)-1)}o.easeInCirc=T;function L(ze){var ht=ze-1;return Math.sqrt(1-ht*ht)}o.easeOutCirc=L;function _(ze){var ht=ze*2,nn=ht-2;return ht<1?-.5*(Math.sqrt(1-ht*ht)-1):.5*(Math.sqrt(1-nn*nn)+1)}o.easeInOutCirc=_;function z(ze){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158;return ze*ze*((ht+1)*ze-ht)}o.easeInBack=z;function Q(ze){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,nn=ze/1-1;return nn*nn*((ht+1)*nn+ht)+1}o.easeOutBack=Q;function q(ze){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1.70158,nn=ze*2,Tn=nn-2,Kn=ht*1.525;return nn<1?.5*nn*nn*((Kn+1)*nn-Kn):.5*(Tn*Tn*((Kn+1)*Tn+Kn)+2)}o.easeInOutBack=q;function ye(ze){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7;if(ze===0||ze===1)return ze;var nn=ze/1,Tn=nn-1,Kn=1-ht,zn=Kn/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*Tn)*Math.sin((Tn-zn)*(2*Math.PI)/Kn))}o.easeInElastic=ye;function Ce(ze){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.7,nn=1-ht,Tn=ze*2;if(ze===0||ze===1)return ze;var Kn=nn/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Tn)*Math.sin((Tn-Kn)*(2*Math.PI)/nn)+1}o.easeOutElastic=Ce;function Ae(ze){var ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.65,nn=1-ht;if(ze===0||ze===1)return ze;var Tn=ze*2,Kn=Tn-1,zn=nn/(2*Math.PI)*Math.asin(1);return Tn<1?-.5*(Math.pow(2,10*Kn)*Math.sin((Kn-zn)*(2*Math.PI)/nn)):Math.pow(2,-10*Kn)*Math.sin((Kn-zn)*(2*Math.PI)/nn)*.5+1}o.easeInOutElastic=Ae;function Pe(ze){var ht=ze/1;if(ht<1/2.75)return 7.5625*ht*ht;if(ht<2/2.75){var nn=ht-1.5/2.75;return 7.5625*nn*nn+.75}if(ht<2.5/2.75){var Tn=ht-2.25/2.75;return 7.5625*Tn*Tn+.9375}{var Kn=ht-2.625/2.75;return 7.5625*Kn*Kn+.984375}}o.easeOutBounce=Pe;function qe(ze){return 1-Pe(1-ze)}o.easeInBounce=qe;function lt(ze){return ze<.5?qe(ze*2)*.5:Pe(ze*2-1)*.5+.5}o.easeInOutBounce=lt}(Tv||(Tv={}));var Pv;(function(o){o.number=function(i,r){var n=r-i;return function(e){return i+n*e}},o.object=function(i,r){var n=Object.keys(i);return function(e){for(var t={},a=n.length-1;a!==-1;a-=1){var s=n[a];t[s]=i[s]+(r[s]-i[s])*e}return t}},o.unit=function(i,r){var n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,e=n.exec(i),t=n.exec(r),a=t?t[1]:"",s=e?+e[1]:0,u=t?+t[1]:0,l=a.indexOf("."),c=l>0?a[1].length-l-1:0,f=u-s,d=e?e[2]:"";return function(v){return(s+f*v).toFixed(c)+d}},o.color=function(i,r){var n=parseInt(i.slice(1),16),e=parseInt(r.slice(1),16),t=n&255,a=(e&255)-t,s=n&65280,u=(e&65280)-s,l=n&16711680,c=(e&16711680)-l;return function(f){var d=t+a*f&255,v=s+u*f&65280,m=l+c*f&16711680;return"#".concat((1<<24|d|v|m).toString(16).slice(1))}}})(Pv||(Pv={}));var XP;(function(o){var i="".concat(Ll.prefixCls,".storage");function r(f,d,v){var m=d.id||S.uniqueId("doc-"),y=u(f);y.keys.push(m),a(l(f,m),d),a(c(f),y),t(v,null,Object.assign(Object.assign({},d),{id:m}))}o.insert=r;function n(f,d,v){var m=u(f),y=[];if(d==null)m.keys.forEach(function(O){var x=s(l(f,O));x?y.push(x):t(v,new Error("No document found for an ID '".concat(O,"' from index.")))}),t(v,null,y);else if(d.id){var C=s(l(f,d.id));t(v,null,C?[C]:[])}else t(v,null,[])}o.find=n;function e(f,d,v){var m=u(f);if(d==null)m.keys.forEach(function(C){localStorage.removeItem(l(f,C))}),localStorage.removeItem(c(f)),t(v,null);else if(d.id){var y=m.keys.indexOf(d.id);y>=0&&m.keys.splice(y,1),localStorage.removeItem(l(f,d.id)),a(c(f),m),t(v,null)}}o.remove=e;function t(f,d,v){f&&A.defer(function(){f(d,v)})}function a(f,d){localStorage.setItem(f,JSON.stringify(d))}function s(f){var d=localStorage.getItem(f);return d?JSON.parse(d):null}function u(f){var d=s(c(f));return d?(d.keys==null&&(d.keys=[]),d):{keys:[]}}function l(f,d){return"".concat(i,".").concat(f,".docs.").concat(d)}function c(f){return"".concat(i,".").concat(f,".index")}})(XP||(XP={}));var Zi=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.call(this),n.cid=aS.uniqueId(),r.views[n.cid]=Object(rs.a)(n),n}return Object(ue.a)(r,[{key:"priority",get:function(){return 2}},{key:"confirmUpdate",value:function(e,t){return 0}},{key:"$",value:function(e){return r.$(e)}},{key:"empty",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).empty(),this}},{key:"unmount",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.$(e).remove(),this}},{key:"remove",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete r.views[this.cid]),this.unmount(e),this}},{key:"onRemove",value:function(){}},{key:"setClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;t.classList.value=Array.isArray(e)?e.join(" "):e}},{key:"addClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}},{key:"removeClass",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}},{key:"setStyle",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return this.$(t).css(e),this}},{key:"setAttrs",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;return e!=null&&t!=null&&(t instanceof SVGElement?M.attr(t,e):this.$(t).attr(e)),this}},{key:"findAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,a=t;a&&a.nodeType===1;){var s=a.getAttribute(e);if(s!=null)return s;if(a===this.container)return null;a=a.parentNode}return null}},{key:"find",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors;return r.find(e,t,a).elems}},{key:"findOne",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectors,s=this.find(e,t,a);return s.length>0?s[0]:null}},{key:"findByAttr",value:function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container,a=t;a&&a.getAttribute;){var s=a.getAttribute(e);if((s!=null||a===this.container)&&s!=="false")return a;a=a.parentNode}return null}},{key:"getSelector",value:function(e,t){var a;if(e===this.container)return typeof t=="string"&&(a="> ".concat(t)),a;if(e){var s=M.index(e)+1;a="".concat(e.tagName.toLowerCase(),":nth-child(").concat(s,")"),t&&(a+=" > ".concat(t)),a=this.getSelector(e.parentNode,a)}return a}},{key:"prefixClassName",value:function(e){return hs.prefix(e)}},{key:"delegateEvents",value:function(e,t){var a=this;if(e==null)return this;t||this.undelegateEvents();var s=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(function(u){var l=u.match(s);if(l!=null){var c=a.getEventHandler(e[u]);typeof c=="function"&&a.delegateEvent(l[1],l[2],c)}}),this}},{key:"undelegateEvents",value:function(){return this.$(this.container).off(this.getEventNamespace()),this}},{key:"delegateDocumentEvents",value:function(e,t){return this.addEventListeners(document,e,t),this}},{key:"undelegateDocumentEvents",value:function(){return this.removeEventListeners(document),this}},{key:"delegateEvent",value:function(e,t,a){return this.$(this.container).on(e+this.getEventNamespace(),t,a),this}},{key:"undelegateEvent",value:function(e,t,a){var s=e+this.getEventNamespace();return t==null?this.$(this.container).off(s):typeof t=="string"?this.$(this.container).off(s,t,a):this.$(this.container).off(s,t),this}},{key:"addEventListeners",value:function(e,t,a){var s=this;if(t==null)return this;var u=this.getEventNamespace(),l=this.$(e);return Object.keys(t).forEach(function(c){var f=s.getEventHandler(t[c]);typeof f=="function"&&l.on(c+u,a,f)}),this}},{key:"removeEventListeners",value:function(e){return e!=null&&this.$(e).off(this.getEventNamespace()),this}},{key:"getEventNamespace",value:function(){return".".concat(Ll.prefixCls,"-event-").concat(this.cid)}},{key:"getEventHandler",value:function(e){var t=this,a;if(typeof e=="string"){var s=this[e];typeof s=="function"&&(a=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return s.call.apply(s,[t].concat(c))})}else a=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];return e.call.apply(e,[t].concat(c))};return a}},{key:"getEventTarget",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.target,s=e.type,u=e.clientX,l=u===void 0?0:u,c=e.clientY,f=c===void 0?0:c;return t.fromPoint||s==="touchmove"||s==="touchend"?document.elementFromPoint(l,f):a}},{key:"stopPropagation",value:function(e){return this.setEventData(e,{propagationStopped:!0}),this}},{key:"isPropagationStopped",value:function(e){return this.getEventData(e).propagationStopped===!0}},{key:"getEventData",value:function(e){return this.eventData(e)}},{key:"setEventData",value:function(e,t){return this.eventData(e,t)}},{key:"eventData",value:function(e,t){if(e==null)throw new TypeError("Event object required");var a=e.data,s="__".concat(this.cid,"__");return t==null?a==null?{}:a[s]||{}:(a==null&&(a=e.data={}),a[s]==null?a[s]=Object.assign({},t):a[s]=Object.assign(Object.assign({},a[s]),t),a[s])}},{key:"normalizeEvent",value:function(e){return r.normalizeEvent(e)}}]),r}(yu);(function(o){function i(t){return Kt()(t)}o.$=i;function r(t,a){return a?M.createSvgElement(t||"g"):M.createElementNS(t||"div")}o.createElement=r;function n(t,a,s){if(!t||t===".")return{elems:[a]};if(s){var u=s[t];if(u)return{elems:Array.isArray(u)?u:[u]}}return Ll.useCSSSelector?{isCSSSelector:!0,elems:i(a).find(t).toArray()}:{elems:[]}}o.find=n;function e(t){var a=t,s=t.originalEvent,u=s&&s.changedTouches&&s.changedTouches[0];if(u){for(var l in t)u[l]===void 0&&(u[l]=t[l]);a=u}var c=a.target;if(c){var f=c.correspondingUseElement;f&&(a.target=f)}return a}o.normalizeEvent=e})(Zi||(Zi={})),function(o){o.views={};function i(r){return o.views[r]||null}o.getView=i}(Zi||(Zi={}));var aS;(function(o){var i=0;function r(){var n="v".concat(i);return i+=1,n}o.uniqueId=r})(aS||(aS={}));var IB=function(i){return i};function YP(o,i){return i===0?"0%":"".concat(Math.round(o/i*100),"%")}function JP(o){var i=function(n,e,t,a){return e.isEdgeElement(t)?NB(o,n,e,t,a):RB(o,n,e,t,a)};return i}function RB(o,i,r,n,e){var t=r.cell,a=t.getAngle(),s=r.getUnrotatedBBoxOfElement(n),u=t.getBBox().getCenter(),l=Pt.create(e).rotate(a,u),c=l.x-s.x,f=l.y-s.y;return o&&(c=YP(c,s.width),f=YP(f,s.height)),i.anchor={name:"topLeft",args:{dx:c,dy:f,rotate:!0}},i}function NB(o,i,r,n,e){var t=r.getConnection();if(!t)return i;var a=t.closestPointLength(e);if(o){var s=t.length();i.anchor={name:"ratio",args:{ratio:a/s}}}else i.anchor={name:"length",args:{length:a}};return i}var jB=JP(!0),LB=JP(!1),kv;(function(o){o.presets=re,o.registry=Xo.create({type:"connection strategy"}),o.registry.register(o.presets,!0)})(kv||(kv={}));var _B=function(){function o(i){Object(me.a)(this,o),this.view=i,this.clean()}return Object(ue.a)(o,[{key:"clean",value:function(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new v1,this.pathCache={}}},{key:"get",value:function(r){var n=this.elemCache;return n.has(r)||this.elemCache.set(r,{}),this.elemCache.get(r)}},{key:"getData",value:function(r){var n=this.get(r);return n.data||(n.data={}),n.data}},{key:"getMatrix",value:function(r){var n=this.get(r);if(n.matrix==null){var e=this.view.rotatableNode||this.view.container;n.matrix=M.getTransformToElement(r,e)}return M.createSVGMatrix(n.matrix)}},{key:"getShape",value:function(r){var n=this.get(r);return n.shape==null&&(n.shape=M.toGeometryShape(r)),n.shape.clone()}},{key:"getBoundingRect",value:function(r){var n=this.get(r);return n.boundingRect==null&&(n.boundingRect=M.getBBox(r)),n.boundingRect.clone()}}]),o}(),Li;(function(o){function i(c){return c!=null&&!r(c)}o.isJSONMarkup=i;function r(c){return c!=null&&typeof c=="string"}o.isStringMarkup=r;function n(c){return c==null||r(c)?c:p.cloneDeep(c)}o.clone=n;function e(c){return"".concat(c).trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}o.sanitize=e;function t(c){var f=document.createDocumentFragment(),d={},v={},m=e(c),y=S.sanitizeHTML(m,{raw:!0});return y.forEach(function(C){f.appendChild(C)}),{fragment:f,selectors:v,groups:d}}o.parseStringMarkup=t;function a(c){for(var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:M.ns.svg},d=document.createDocumentFragment(),v={},m={},y=[{markup:Array.isArray(c)?c:[c],parent:d,ns:f.ns}],C=function(){var x=y.pop(),T=x.ns||M.ns.svg,L=x.markup,_=x.parent;L.forEach(function(z){var Q=z.tagName;if(!Q)throw new TypeError("Invalid tagName");z.ns&&(T=z.ns);var q=T===M.ns.svg,ye=T?M.createElementNS(Q,T):M.createElement(Q),Ce=z.attrs;Ce&&(q?M.attr(ye,M.kebablizeAttrs(Ce)):Kt()(ye).attr(Ce));var Ae=z.style;Ae&&Kt()(ye).css(Ae);var Pe=z.className;Pe!=null&&ye.setAttribute("class",Array.isArray(Pe)?Pe.join(" "):Pe),z.textContent&&(ye.textContent=z.textContent);var qe=z.selector;if(qe!=null){if(m[qe])throw new TypeError("Selector must be unique");m[qe]=ye}if(z.groupSelector){var lt=z.groupSelector;Array.isArray(lt)||(lt=[lt]),lt.forEach(function(ht){v[ht]||(v[ht]=[]),v[ht].push(ye)})}_.appendChild(ye);var ze=z.children;Array.isArray(ze)&&y.push({ns:T,markup:ze,parent:ye})})};y.length>0;)C();return Object.keys(v).forEach(function(O){if(m[O])throw new Error("Ambiguous group selector");m[O]=v[O]}),{fragment:d,selectors:m,groups:v}}o.parseJSONMarkup=a;function s(c){return c instanceof SVGElement?M.createSvgElement("g"):M.createElement("div")}function u(c){if(r(c)){var f=oi.createVectors(c),d=f.length;if(d===1)return{elem:f[0].node};if(d>1){var v=s(f[0].node);return f.forEach(function(O){v.appendChild(O.node)}),{elem:v}}return{}}var m=a(c),y=m.fragment,C=null;return y.childNodes.length>1?(C=s(y.firstChild),C.appendChild(y)):C=y.firstChild,{elem:C,selectors:m.selectors}}o.renderMarkup=u;function l(c){for(var f=oi.createVectors(c),d=document.createDocumentFragment(),v=0,m=f.length;v<m;v+=1){var y=f[v].node;d.appendChild(y)}return{fragment:d,selectors:{}}}o.parseLabelStringMarkup=l})(Li||(Li={})),function(o){function i(e,t,a){if(e!=null){var s,u=e.tagName.toLowerCase();if(e===t)return typeof a=="string"?s="> ".concat(u," > ").concat(a):s="> ".concat(u),s;var l=e.parentNode;if(l&&l.childNodes.length>1){var c=M.index(e)+1;s="".concat(u,":nth-child(").concat(c,")")}else s=u;return a&&(s+=" > ".concat(a)),i(e.parentNode,t,s)}return a}o.getSelector=i;function r(e,t,a){if(e.nodeName==="#text")return null;var s=null,u=null,l=null,c=!1,f={tagName:e.tagName};if(e.attributes){l={};for(var d=0,v=e.attributes.length;d<v;d+=1){var m=e.attributes[d],y=m.nodeName,C=m.nodeValue;y==="selector"?s=C:y==="groupSelector"?u=C:y==="class"?f.attrs={class:C}:l[y]=C}}return s==null&&(c=!0,s=i(e,t)),e.namespaceURI&&(f.ns=e.namespaceURI),f.ns==null&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(e.tagName)?f.ns=M.ns.xhtml:a&&(f.ns=a)),s&&(f.selector=s),u!=null&&(f.groupSelector=u),{markup:f,attrs:l,isCSSSelector:c}}function n(e){var t=o.sanitize(e),a=M.parseXML(t,{mimeType:"image/svg+xml"}),s=Array.prototype.slice.call(a.childNodes),u={},l=new WeakMap,c=function d(v,m,y){var C=r(v,m,y);if(C==null){var O=l.get(v.parentNode);O&&v.textContent&&(O.textContent=v.textContent)}else{var x=C.markup,T=C.attrs,L=C.isCSSSelector;if(l.set(v,x),x.selector&&T!=null&&(Object.keys(T).length&&(u[x.selector]=T),L&&delete x.selector),v.childNodes&&v.childNodes.length>0)for(var _=0,z=v.childNodes.length;_<z;_+=1){var Q=v.childNodes[_],q=d(Q,m,x.ns);q&&(x.children==null&&(x.children=[]),x.children.push(q))}return x}},f=s.map(function(d){return c(d,d)}).filter(function(d){return d!=null});return{markup:f,attrs:u}}o.xml2json=n}(Li||(Li={})),function(o){function i(){return"g"}o.getPortContainerMarkup=i;function r(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}o.getPortMarkup=r;function n(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}o.getPortLabelMarkup=n}(Li||(Li={})),function(o){function i(){return o.sanitize(`
    <path class="connection" stroke="black" d="M 0 0 0 0"/>
    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>
    <path class="connection-wrap" d="M 0 0 0 0"/>
    <g class="labels"/>
    <g class="vertices"/>
    <g class="arrowheads"/>
    <g class="tools"/>
  `)}o.getEdgeMarkup=i;function r(){return o.sanitize(`
    <g class="edge-tool">
      <g class="tool-remove" event="edge:remove">
        <circle r="11" />
        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />
        <title>Remove edge.</title>
      </g>
      <g class="tool-options" event="edge:options">
        <circle r="11" transform="translate(25)"/>
        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>
        <title>Edge options.</title>
      </g>
    </g>
  `)}o.getEdgeToolMarkup=r;function n(){return o.sanitize(`
    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">
      <circle class="vertex" data-index="<%= index %>" r="10" />
      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>
      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">
      <title>Remove vertex.</title>
      </path>
    </g>
  `)}o.getEdgeVertexMarkup=n;function e(){return o.sanitize(`
    <g class="arrowhead-group arrowhead-group-<%= end %>">
      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />
    </g>
  `)}o.getEdgeArrowheadMarkup=e}(Li||(Li={})),function(o){function i(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return{tagName:"foreignObject",selector:"fo",children:[{ns:M.ns.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:M.ns.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:r?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}o.getForeignObjectMarkup=i}(Li||(Li={}));var p1=function(){function o(i){Object(me.a)(this,o),this.view=i}return Object(ue.a)(o,[{key:"cell",get:function(){return this.view.cell}},{key:"getDefinition",value:function(r){return this.cell.getAttrDefinition(r)}},{key:"processAttrs",value:function(r,n){var e=this,t,a,s,u,l,c=[];return Object.keys(n).forEach(function(f){var d=n[f],v=e.getDefinition(f),m=A.call(zc.isValidDefinition,e.view,v,d,{elem:r,attrs:n,cell:e.cell,view:e.view});if(v&&m)typeof v=="string"?(t==null&&(t={}),t[v]=d):d!==null&&c.push({name:f,definition:v});else{t==null&&(t={});var y=M.CASE_SENSITIVE_ATTR.includes(f)?f:S.kebabCase(f);t[y]=d}}),c.forEach(function(f){var d=f.name,v=f.definition,m=n[d],y=v;typeof y.set=="function"&&(!M.isHTMLElement(r)&&o.DELAY_ATTRS.includes(d)?(l==null&&(l={}),l[d]=m):(a==null&&(a={}),a[d]=m));var C=v;typeof C.offset=="function"&&(s==null&&(s={}),s[d]=m);var O=v;typeof O.position=="function"&&(u==null&&(u={}),u[d]=m)}),{raw:n,normal:t,set:a,offset:s,position:u,delay:l}}},{key:"mergeProcessedAttrs",value:function(r,n){r.set=Object.assign(Object.assign({},r.set),n.set),r.position=Object.assign(Object.assign({},r.position),n.position),r.offset=Object.assign(Object.assign({},r.offset),n.offset);var e=r.normal&&r.normal.transform;e!=null&&n.normal&&(n.normal.transform=e),r.normal=n.normal}},{key:"findAttrs",value:function(r,n,e,t){var a=[],s=new v1;return Object.keys(r).forEach(function(u){var l=r[u];if(!!p.isPlainObject(l)){var c=Zi.find(u,n,t),f=c.isCSSSelector,d=c.elems;e[u]=d;for(var v=0,m=d.length;v<m;v+=1){var y=d[v],C=t&&t[u]===y,O=s.get(y);if(O){O.array||(a.push(y),O.array=!0,O.attrs=[O.attrs],O.priority=[O.priority]);var x=O.attrs,T=O.priority;if(C)x.unshift(l),T.unshift(-1);else{var L=B.sortedIndex(T,f?-1:m);x.splice(L,0,l),T.splice(L,0,m)}}else s.set(y,{elem:y,attrs:l,priority:C?-1:m,array:!1})}}}),a.forEach(function(u){var l=s.get(u),c=l.attrs;l.attrs=c.reduceRight(function(f,d){return p.merge(f,d)},{})}),s}},{key:"updateRelativeAttrs",value:function(r,n,e,t){var a=this,s=n.raw||{},u=n.normal||{},l=n.set,c=n.position,f=n.offset,d=n.delay,v=function(){return{elem:r,cell:a.cell,view:a.view,attrs:s,refBBox:e.clone()}};if(l!=null&&Object.keys(l).forEach(function(Ce){var Ae=l[Ce],Pe=a.getDefinition(Ce);if(Pe!=null){var qe=A.call(Pe.set,a.view,Ae,v());typeof qe=="object"?u=Object.assign(Object.assign({},u),qe):qe!=null&&(u[Ce]=qe)}}),M.isHTMLElement(r)){this.view.setAttrs(u,r);return}var m=u.transform,y=m?"".concat(m):null,C=M.transformStringToMatrix(y),O=new Pt(C.e,C.f);m&&(delete u.transform,C.e=0,C.f=0);var x=1,T=1;if(c||f){var L=this.view.getScaleOfElement(r,t.scalableNode);x=L.sx,T=L.sy}var _=!1;c!=null&&Object.keys(c).forEach(function(Ce){var Ae=c[Ce],Pe=a.getDefinition(Ce);if(Pe!=null){var qe=A.call(Pe.position,a.view,Ae,v());qe!=null&&(_=!0,O.translate(Pt.create(qe).scale(x,T)))}}),this.view.setAttrs(u,r);var z=!1;if(f!=null){var Q=this.view.getBoundingRectOfElement(r);if(Q.width>0&&Q.height>0){var q=M.transformRectangle(Q,C).scale(1/x,1/T);Object.keys(f).forEach(function(Ce){var Ae=f[Ce],Pe=a.getDefinition(Ce);if(Pe!=null){var qe=A.call(Pe.offset,a.view,Ae,{elem:r,cell:a.cell,view:a.view,attrs:s,refBBox:q});qe!=null&&(z=!0,O.translate(Pt.create(qe).scale(x,T)))}})}}(m!=null||_||z)&&(O.round(1),C.e=O.x,C.f=O.y,r.setAttribute("transform",M.matrixToTransformString(C)));var ye=function(){d!=null&&Object.keys(d).forEach(function(Ae){var Pe=d[Ae],qe=a.getDefinition(Ae);if(qe!=null){var lt=A.call(qe.set,a.view,Pe,v());typeof lt=="object"?a.view.setAttrs(lt,r):lt!=null&&a.view.setAttrs(Object(Re.a)({},Ae,lt),r)}})};t.forceSync?ye():qm.scheduleTask(ye)}},{key:"update",value:function(r,n,e){var t=this,a={},s=this.findAttrs(e.attrs||n,r,a,e.selectors),u=e.attrs?this.findAttrs(n,r,a,e.selectors):s,l=[];s.each(function(d){var v=d.elem,m=d.attrs,y=t.processAttrs(v,m);if(y.set==null&&y.position==null&&y.offset==null&&y.delay==null)t.view.setAttrs(y.normal,v);else{var C=u.get(v),O=C?C.attrs:null,x=O&&m.ref==null?O.ref:m.ref,T;if(x){if(T=(a[x]||t.view.find(x,r,e.selectors))[0],!T)throw new Error('"'.concat(x,'" reference does not exist.'))}else T=null;var L={node:v,refNode:T,attributes:O,processedAttributes:y},_=l.findIndex(function(z){return z.refNode===v});_>-1?l.splice(_,0,L):l.push(L)}});var c=new v1,f;l.forEach(function(d){var v=d.node,m=d.refNode,y,C=m!=null&&e.rotatableNode!=null&&M.contains(e.rotatableNode,m);if(m&&(y=c.get(m)),!y){var O=C?e.rotatableNode:r;y=m?M.getBBox(m,{target:O}):e.rootBBox,m&&c.set(m,y)}var x;e.attrs&&d.attributes?(x=t.processAttrs(v,d.attributes),t.mergeProcessedAttrs(x,d.processedAttributes)):x=d.processedAttributes;var T=y;C&&e.rotatableNode!=null&&!e.rotatableNode.contains(v)&&(f||(f=M.transformStringToMatrix(M.attr(e.rotatableNode,"transform"))),T=M.transformRectangle(y,f));var L=l.find(function(_){return _.refNode===v});L&&(e.forceSync=!0),t.updateRelativeAttrs(v,x,T,e)})}}]),o}();(function(o){o.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"]})(p1||(p1={}));var ZP=function(){function o(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];Object(me.a)(this,o),this.view=i;var e={},t={},a=0;Object.keys(r).forEach(function(u){var l=r[u];Array.isArray(l)||(l=[l]),l.forEach(function(c){var f=e[c];f||(a+=1,f=e[c]=1<<a),t[u]|=f})});var s=n;if(Array.isArray(s)||(s=[s]),s.forEach(function(u){e[u]||(a+=1,e[u]=1<<a)}),a>25)throw new Error("Maximum number of flags exceeded.");this.flags=e,this.attrs=t,this.bootstrap=n}return Object(ue.a)(o,[{key:"cell",get:function(){return this.view.cell}},{key:"getFlag",value:function(r){var n=this.flags;return n==null?0:Array.isArray(r)?r.reduce(function(e,t){return e|n[t]},0):n[r]|0}},{key:"hasAction",value:function(r,n){return r&this.getFlag(n)}},{key:"removeAction",value:function(r,n){return r^r&this.getFlag(n)}},{key:"getBootstrapFlag",value:function(){return this.getFlag(this.bootstrap)}},{key:"getChangedFlag",value:function(){var r=this,n=0;return this.attrs&&Object.keys(this.attrs).forEach(function(e){r.cell.hasChanged(e)&&(n|=r.attrs[e])}),n}}]),o}(),FB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},as=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(e){var t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(me.a)(this,n),t=r.call(this),t.cell=e,t.options=t.ensureOptions(a),t.graph=t.options.graph,t.attr=new p1(Object(rs.a)(t)),t.flag=new ZP(Object(rs.a)(t),t.options.actions,t.options.bootstrap),t.cache=new _B(Object(rs.a)(t)),t.setContainer(t.ensureContainer()),t.setup(),t.$(t.container).data("view",Object(rs.a)(t)),t.init(),t}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"init",value:function(){}},{key:"onRemove",value:function(){this.removeTools()}},{key:"priority",get:function(){return this.options.priority}},{key:"rootSelector",get:function(){return this.options.rootSelector}},{key:"getConstructor",value:function(){return this.constructor}},{key:"ensureOptions",value:function(t){return this.getConstructor().getOptions(t)}},{key:"getContainerTagName",value:function(){return this.options.isSvgElement?"g":"div"}},{key:"getContainerStyle",value:function(){}},{key:"getContainerAttrs",value:function(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}},{key:"getContainerClassName",value:function(){return this.prefixClassName("cell")}},{key:"ensureContainer",value:function(){return Zi.createElement(this.getContainerTagName(),this.options.isSvgElement)}},{key:"setContainer",value:function(t){if(this.container!==t){this.undelegateEvents(),this.container=t,this.options.events!=null&&this.delegateEvents(this.options.events);var a=this.getContainerAttrs();a!=null&&this.setAttrs(a,t);var s=this.getContainerStyle();s!=null&&this.setStyle(s,t);var u=this.getContainerClassName();u!=null&&this.addClass(u,t)}return this}},{key:"isNodeView",value:function(){return!1}},{key:"isEdgeView",value:function(){return!1}},{key:"render",value:function(){return this}},{key:"confirmUpdate",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return 0}},{key:"getBootstrapFlag",value:function(){return this.flag.getBootstrapFlag()}},{key:"getFlag",value:function(t){return this.flag.getFlag(t)}},{key:"hasAction",value:function(t,a){return this.flag.hasAction(t,a)}},{key:"removeAction",value:function(t,a){return this.flag.removeAction(t,a)}},{key:"handleAction",value:function(t,a,s,u){if(this.hasAction(t,a)){s();var l=[a];return u&&(typeof u=="string"?l.push(u):l.push.apply(l,Object(We.a)(u))),this.removeAction(t,l)}return t}},{key:"setup",value:function(){var t=this;this.cell.on("changed",function(a){var s=a.options;return t.onAttrsChange(s)})}},{key:"onAttrsChange",value:function(t){var a=this.flag.getChangedFlag();t.updated||!a||(t.dirty&&this.hasAction(a,"update")&&(a|=this.getFlag("render")),t.toolId&&(t.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,a,this.priority,t))}},{key:"parseJSONMarkup",value:function(t,a){var s=Li.parseJSONMarkup(t),u=s.selectors,l=this.rootSelector;if(a&&l){if(u[l])throw new Error("Invalid root selector");u[l]=a}return s}},{key:"can",value:function(t){var a=this.graph.options.interacting;if(typeof a=="function"&&(a=A.call(a,this.graph,this)),typeof a=="object"){var s=a[t];return typeof s=="function"&&(s=A.call(s,this.graph,this)),s!==!1}return typeof a=="boolean"?a:!1}},{key:"cleanCache",value:function(){return this.cache.clean(),this}},{key:"getCache",value:function(t){return this.cache.get(t)}},{key:"getDataOfElement",value:function(t){return this.cache.getData(t)}},{key:"getMatrixOfElement",value:function(t){return this.cache.getMatrix(t)}},{key:"getShapeOfElement",value:function(t){return this.cache.getShape(t)}},{key:"getScaleOfElement",value:function(t,a){var s,u;if(a&&a.contains(t)){var l=M.scale(a);s=1/l.sx,u=1/l.sy}else s=1,u=1;return{sx:s,sy:u}}},{key:"getBoundingRectOfElement",value:function(t){return this.cache.getBoundingRect(t)}},{key:"getBBoxOfElement",value:function(t){var a=this.getBoundingRectOfElement(t),s=this.getMatrixOfElement(t),u=this.getRootRotatedMatrix(),l=this.getRootTranslatedMatrix();return M.transformRectangle(a,l.multiply(u).multiply(s))}},{key:"getUnrotatedBBoxOfElement",value:function(t){var a=this.getBoundingRectOfElement(t),s=this.getMatrixOfElement(t),u=this.getRootTranslatedMatrix();return M.transformRectangle(a,u.multiply(s))}},{key:"getBBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a;if(t.useCellGeometry){var s=this.cell,u=s.isNode()?s.getAngle():0;a=s.getBBox().bbox(u)}else a=this.getBBoxOfElement(this.container);return this.graph.localToGraph(a)}},{key:"getRootTranslatedMatrix",value:function(){var t=this.cell,a=t.isNode()?t.getPosition():{x:0,y:0};return M.createSVGMatrix().translate(a.x,a.y)}},{key:"getRootRotatedMatrix",value:function(){var t=M.createSVGMatrix(),a=this.cell,s=a.isNode()?a.getAngle():0;if(s){var u=a.getBBox(),l=u.width/2,c=u.height/2;t=t.translate(l,c).rotate(s).translate(-l,-c)}return t}},{key:"findMagnet",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.container;return this.findByAttr("magnet",t)}},{key:"updateAttrs",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.rootBBox==null&&(s.rootBBox=new Br),s.selectors==null&&(s.selectors=this.selectors),this.attr.update(t,a,s)}},{key:"isEdgeElement",value:function(t){return this.cell.isEdge()&&(t==null||t===this.container)}},{key:"prepareHighlight",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t&&this.$(t)[0]||this.container;return a.partial=s===this.container,s}},{key:"highlight",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.prepareHighlight(t,a);return this.notify("cell:highlight",{magnet:s,options:a,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:s,options:a,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:s,options:a,view:this,node:this.cell,cell:this.cell}),this}},{key:"unhighlight",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.prepareHighlight(t,a);return this.notify("cell:unhighlight",{magnet:s,options:a,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:s,options:a,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:s,options:a,view:this,edge:this.cell,cell:this.cell}),this}},{key:"notifyUnhighlight",value:function(t,a){}},{key:"getEdgeTerminal",value:function(t,a,s,u,l){var c=this.cell,f=this.findAttr("port",t),d=t.getAttribute("data-selector"),v={cell:c.id};return d!=null&&(v.magnet=d),f!=null?(v.port=f,c.isNode()&&!c.hasPort(f)&&d==null&&(v.selector=this.getSelector(t))):d==null&&this.container!==t&&(v.selector=this.getSelector(t)),this.customizeEdgeTerminal(v,t,a,s,u,l)}},{key:"customizeEdgeTerminal",value:function(t,a,s,u,l,c){var f=l.getStrategy()||this.graph.options.connecting.strategy;if(f){var d=typeof f=="string"?f:f.name,v=typeof f=="string"?{}:f.args||{},m=kv.registry;if(d){var y=m.get(d);if(y==null)return m.onNotFound(d);var C=A.call(y,this.graph,t,this,a,new Pt(s,u),l,c,v);if(C)return C}}return t}},{key:"getMagnetFromEdgeTerminal",value:function(t){var a=this.cell,s=this.container,u=t.port,l=t.magnet,c;return u!=null&&a.isNode()&&a.hasPort(u)?c=this.findPortElem(u,l)||s:(l||(l=t.selector),!l&&u!=null&&(l='[port="'.concat(u,'"]')),c=this.findOne(l,s,this.selectors)),c}},{key:"animate",value:function(t,a){var s=typeof t=="string"?this.findOne(t):t;if(s==null)throw new Error("Invalid animation element.");var u=s.parentNode,l=function(){u||M.remove(s)},c=oi.create(s);u||c.appendTo(this.graph.view.stage);var f=a.complete;return a.complete=function(d){l(),f&&f(d)},c.animate(a)}},{key:"animateTransform",value:function(t,a){var s=typeof t=="string"?this.findOne(t):t;if(s==null)throw new Error("Invalid animation element.");var u=s.parentNode,l=function(){u||M.remove(s)},c=oi.create(s);u||c.appendTo(this.graph.view.stage);var f=a.complete;return a.complete=function(d){l(),f&&f(d)},c.animateTransform(a)}},{key:"hasTools",value:function(t){var a=this.tools;return a==null?!1:t==null?!0:a.name===t}},{key:"addTools",value:function(t){if(!this.can("toolsAddable"))return this;if(this.removeTools(),t){var a=Du.isToolsView(t)?t:new Du(t);this.tools=a,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),a.config({view:this}),a.mount()}return this}},{key:"updateTools",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.tools&&this.tools.update(t),this}},{key:"removeTools",value:function(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}},{key:"hideTools",value:function(){return this.tools&&this.tools.hide(),this}},{key:"showTools",value:function(){return this.tools&&this.tools.show(),this}},{key:"renderTools",value:function(){var t=this.cell.getTools();return this.addTools(t),this}},{key:"notify",value:function(t,a){return this.trigger(t,a),this.graph.trigger(t,a),this}},{key:"getEventArgs",value:function(t,a,s){var u=this,l=u.cell;return a==null||s==null?{e:t,view:u,cell:l}:{e:t,x:a,y:s,view:u,cell:l}}},{key:"onClick",value:function(t,a,s){this.notify("cell:click",this.getEventArgs(t,a,s))}},{key:"onDblClick",value:function(t,a,s){this.notify("cell:dblclick",this.getEventArgs(t,a,s))}},{key:"onContextMenu",value:function(t,a,s){this.notify("cell:contextmenu",this.getEventArgs(t,a,s))}},{key:"onMouseDown",value:function(t,a,s){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,a,s))}},{key:"onMouseUp",value:function(t,a,s){this.notify("cell:mouseup",this.getEventArgs(t,a,s)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}},{key:"onMouseMove",value:function(t,a,s){this.notify("cell:mousemove",this.getEventArgs(t,a,s))}},{key:"onMouseOver",value:function(t){this.notify("cell:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){this.notify("cell:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){this.notify("cell:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){this.notify("cell:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,a,s,u){this.notify("cell:mousewheel",Object.assign({delta:u},this.getEventArgs(t,a,s)))}},{key:"onCustomEvent",value:function(t,a,s,u){this.notify("cell:customevent",Object.assign({name:a},this.getEventArgs(t,s,u))),this.notify(a,Object.assign({},this.getEventArgs(t,s,u)))}},{key:"onMagnetMouseDown",value:function(t,a,s,u){}},{key:"onMagnetDblClick",value:function(t,a,s,u){}},{key:"onMagnetContextMenu",value:function(t,a,s,u){}},{key:"onLabelMouseDown",value:function(t,a,s){}},{key:"checkMouseleave",value:function(t){var a=this.graph;a.renderer.isAsync()&&a.renderer.dumpView(this);var s=this.getEventTarget(t,{fromPoint:!0}),u=a.renderer.findViewByElem(s);u!==this&&(this.onMouseLeave(t),!!u&&u.onMouseEnter(t))}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(t){this.defaults=this.getOptions(t)}},{key:"getOptions",value:function(t){var a=function(m,y){return y!=null?B.uniq([].concat(Object(We.a)(Array.isArray(m)?m:[m]),Object(We.a)(Array.isArray(y)?y:[y]))):Array.isArray(m)?Object(We.a)(m):[m]},s=p.cloneDeep(this.getDefaults()),u=t.bootstrap,l=t.actions,c=t.events,f=t.documentEvents,d=FB(t,["bootstrap","actions","events","documentEvents"]);return u&&(s.bootstrap=a(s.bootstrap,u)),l&&Object.keys(l).forEach(function(v){var m=l[v],y=s.actions[v];m&&y?s.actions[v]=a(y,m):m&&(s.actions[v]=a(m))}),c&&(s.events=Object.assign(Object.assign({},s.events),c)),t.documentEvents&&(s.documentEvents=Object.assign(Object.assign({},s.documentEvents),f)),p.merge(s,d)}}]),n}(Zi,Symbol.toStringTag);as.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},function(o){o.Flag=ZP,o.Attr=p1}(as||(as={})),function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"}o.isCellView=i}(as||(as={})),function(o){function i(n){return function(e){e.config({priority:n})}}o.priority=i;function r(n){return function(e){e.config({bootstrap:n})}}o.bootstrap=r}(as||(as={})),function(o){o.registry=Xo.create({type:"view"})}(as||(as={}));var Du=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(me.a)(this,n),e=r.call(this),e.svgContainer=e.createContainer(!0,t),e.htmlContainer=e.createContainer(!1,t),e.config(t),e}return Object(ue.a)(n,[{key:"name",get:function(){return this.options.name}},{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:i,get:function(){return n.toStringTag}},{key:"createContainer",value:function(t,a){var s=t?Zi.createElement("g",!0):Zi.createElement("div",!1);return M.addClass(s,this.prefixClassName("cell-tools")),a.className&&M.addClass(s,a.className),s}},{key:"config",value:function(t){if(this.options=Object.assign(Object.assign({},this.options),t),!as.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(M.addClass(this.svgContainer,this.prefixClassName("edge-tools")),M.addClass(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(M.addClass(this.svgContainer,this.prefixClassName("node-tools")),M.addClass(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));var a=this.options.items;if(!Array.isArray(a))return this;this.tools=[];var s=[];a.forEach(function(C){if(n.ToolItem.isToolItem(C))C.name==="vertices"?s.unshift(C):s.push(C);else{var O=typeof C=="object"?C.name:C;O==="vertices"?s.unshift(C):s.push(C)}});for(var u=0;u<s.length;u+=1){var l=s[u],c=void 0;if(n.ToolItem.isToolItem(l))c=l;else{var f=typeof l=="object"?l.name:l,d=typeof l=="object"?l.args||{}:{};if(f){if(this.cell.isNode()){var v=Dv.registry.get(f);if(v)c=new v(d);else return Dv.registry.onNotFound(f)}else if(this.cell.isEdge()){var m=Iv.registry.get(f);if(m)c=new m(d);else return Iv.registry.onNotFound(f)}}}if(c){c.config(this.cellView,this),c.render();var y=c.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer;y.appendChild(c.container),this.tools.push(c)}}return this}},{key:"update",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.tools;return a&&a.forEach(function(s){t.toolId!==s.cid&&s.isVisible()&&s.update()}),this}},{key:"focus",value:function(t){var a=this.tools;return a&&a.forEach(function(s){t===s?s.show():s.hide()}),this}},{key:"blur",value:function(t){var a=this.tools;return a&&a.forEach(function(s){s!==t&&!s.isVisible()&&(s.show(),s.update())}),this}},{key:"hide",value:function(){return this.focus(null)}},{key:"show",value:function(){return this.blur(null)}},{key:"remove",value:function(){var t=this.tools;return t&&(t.forEach(function(a){return a.remove()}),this.tools=null),M.remove(this.svgContainer),M.remove(this.htmlContainer),Object(Aa.a)(Object(Ma.a)(n.prototype),"remove",this).call(this)}},{key:"mount",value:function(){var t=this.tools,a=this.cellView;if(a&&t){var s=t.some(function(c){return c.options.isSVGElement!==!1}),u=t.some(function(c){return c.options.isSVGElement===!1});if(s){var l=this.options.local?a.container:a.graph.view.decorator;l.appendChild(this.svgContainer)}u&&this.graph.container.appendChild(this.htmlContainer)}return this}}]),n}(Zi,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&e.graph!=null&&e.cell!=null&&typeof e.config=="function"&&typeof e.update=="function"&&typeof e.focus=="function"&&typeof e.blur=="function"&&typeof e.show=="function"&&typeof e.hide=="function"}o.isToolsView=i})(Du||(Du={})),function(o){var i=function(r,n){Object(xr.a)(t,r);var e=Object(Sr.a)(t);function t(){var a,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(me.a)(this,t),a=e.call(this),a.visible=!0,a.options=a.getOptions(s),a.container=Zi.createElement(a.options.tagName||"g",a.options.isSVGElement!==!1),M.addClass(a.container,a.prefixClassName("cell-tool")),typeof a.options.className=="string"&&M.addClass(a.container,a.options.className),a.init(),a}return Object(ue.a)(t,[{key:"graph",get:function(){return this.cellView.graph}},{key:"cell",get:function(){return this.cellView.cell}},{key:"name",get:function(){return this.options.name}},{key:n,get:function(){return t.toStringTag}},{key:"init",value:function(){}},{key:"getOptions",value:function(s){var u=this.constructor;return u.getOptions(s)}},{key:"delegateEvents",value:function(){return this.options.events&&Object(Aa.a)(Object(Ma.a)(t.prototype),"delegateEvents",this).call(this,this.options.events),this}},{key:"config",value:function(s,u){return this.cellView=s,this.parent=u,this.stamp(this.container),this.cell.isEdge()?M.addClass(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&M.addClass(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}},{key:"render",value:function(){this.empty();var s=this.options.markup;if(s){var u=Li.isStringMarkup(s)?Li.parseStringMarkup(s):Li.parseJSONMarkup(s);this.container.appendChild(u.fragment),this.childNodes=u.selectors}return this.onRender(),this}},{key:"onRender",value:function(){}},{key:"update",value:function(){return this}},{key:"stamp",value:function(s){s&&s.setAttribute("data-cell-id",this.cellView.cell.id)}},{key:"show",value:function(){return this.container.style.display="",this.visible=!0,this}},{key:"hide",value:function(){return this.container.style.display="none",this.visible=!1,this}},{key:"isVisible",value:function(){return!!this.visible}},{key:"focus",value:function(){var s=this.options.focusOpacity;return s!=null&&Number.isFinite(s)&&(this.container.style.opacity="".concat(s)),this.parent.focus(this),this}},{key:"blur",value:function(){return this.container.style.opacity="",this.parent.blur(this),this}},{key:"guard",value:function(s){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(s,this.cellView)}}],[{key:"getDefaults",value:function(){return this.defaults}},{key:"config",value:function(s){this.defaults=this.getOptions(s)}},{key:"getOptions",value:function(s){return p.merge(p.cloneDeep(this.getDefaults()),s)}}]),t}(Zi,Symbol.toStringTag);i.defaults={isSVGElement:!0,tagName:"g"},o.ToolItem=i,function(r){var n=0;function e(a){return a?S.pascalCase(a):(n+=1,"CustomTool".concat(n))}function t(a){var s=p.createClass(e(a.name),this);return s.config(a),s}r.define=t}(i=o.ToolItem||(o.ToolItem={})),function(r){r.toStringTag="X6.".concat(r.name);function n(e){if(e==null)return!1;if(e instanceof r)return!0;var t=e[Symbol.toStringTag],a=e;return(t==null||t===r.toStringTag)&&a.graph!=null&&a.cell!=null&&typeof a.config=="function"&&typeof a.update=="function"&&typeof a.focus=="function"&&typeof a.blur=="function"&&typeof a.show=="function"&&typeof a.hide=="function"&&typeof a.isVisible=="function"}r.isToolItem=n}(i=o.ToolItem||(o.ToolItem={}))}(Du||(Du={}));function QP(o,i,r,n){var e=A.call(kv.presets.pinRelative,this.graph,{},i,r,o,this.cell,n,{});return e.anchor}function qP(o,i){return i?o.cell.getBBox():o.cell.isEdge()?o.getConnection().bbox():o.getUnrotatedBBoxOfElement(o.container)}var mh=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"onRender",value:function(){M.addClass(this.container,this.prefixClassName("cell-tool-button")),this.update()}},{key:"update",value:function(){return this.updatePosition(),this}},{key:"updatePosition",value:function(){var e=this.cellView,t=e.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();M.transform(this.container,t,{absolute:!0})}},{key:"getNodeMatrix",value:function(){var e=this.cellView,t=this.options,a=t.x,s=a===void 0?0:a,u=t.y,l=u===void 0?0:u,c=t.offset,f=t.useCellGeometry,d=t.rotate,v=qP(e,f),m=e.cell.getAngle();d||(v=v.bbox(m));var y=0,C=0;typeof c=="number"?(y=c,C=c):typeof c=="object"&&(y=c.x,C=c.y),s=E.normalizePercentage(s,v.width),l=E.normalizePercentage(l,v.height);var O=M.createSVGMatrix().translate(v.x+v.width/2,v.y+v.height/2);return d&&(O=O.rotate(m)),O=O.translate(s+y-v.width/2,l+C-v.height/2),O}},{key:"getEdgeMatrix",value:function(){var e=this.cellView,t=this.options,a=t.offset,s=a===void 0?0:a,u=t.distance,l=u===void 0?0:u,c=t.rotate,f,d,v,m=E.normalizePercentage(l,1);m>=0&&m<=1?f=e.getTangentAtRatio(m):f=e.getTangentAtLength(m),f?(d=f.start,v=f.vector().vectorAngle(new Pt(1,0))||0):(d=e.getConnection().start,v=0);var y=M.createSVGMatrix().translate(d.x,d.y).rotate(v);return typeof s=="object"?y=y.translate(s.x||0,s.y||0):y=y.translate(0,s),c||(y=y.rotate(-v)),y}},{key:"onMouseDown",value:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.options.onClick;typeof t=="function"&&A.call(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}}]),r}(Du.ToolItem);(function(o){o.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(mh||(mh={})),function(o){o.Remove=o.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick:function(r){var n=r.view,e=r.btn;e.parent.remove(),n.cell.remove({ui:!0,toolId:e.cid})}})}(mh||(mh={}));var BB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},g1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"onRender",value:function(){if(M.addClass(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){var e=this.options.attrs,t=e.class,a=BB(e,["class"]);M.attr(this.container,M.kebablizeAttrs(a)),t&&M.addClass(this.container,t)}this.update()}},{key:"update",value:function(){var e=this.cellView,t=this.options,a=t.useCellGeometry,s=t.rotate,u=E.normalizeSides(t.padding),l=qP(e,a).moveAndExpand({x:-u.left,y:-u.top,width:u.left+u.right,height:u.top+u.bottom}),c=e.cell;if(c.isNode()){var f=c.getAngle();if(f)if(s){var d=c.getBBox().getCenter();M.rotate(this.container,f,d.x,d.y,{absolute:!0})}else l=l.bbox(f)}return M.attr(this.container,l.toJSON()),this}}]),r}(Du.ToolItem);(function(o){o.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(g1||(g1={}));var r0=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.handles=[],n}return Object(ue.a)(r,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"onRender",value:function(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}},{key:"update",value:function(){var e=this.vertices;return e.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(a){e.stopHandleListening(a),a.remove()})}},{key:"renderHandles",value:function(){for(var e=this,t=this.vertices,a=0,s=t.length;a<s;a+=1){var u=t[a],l=this.options.createHandle,c=this.options.processHandle,f=l({index:a,graph:this.graph,guard:function(v){return e.guard(v)},attrs:this.options.attrs||{}});c&&c(f),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:f}),f.updatePosition(u.x,u.y),this.stamp(f.container),this.container.appendChild(f.container),this.handles.push(f),this.startHandleListening(f)}}},{key:"updateHandles",value:function(){for(var e=this.vertices,t=0,a=e.length;t<a;t+=1){var s=e[t],u=this.handles[t];u&&u.updatePosition(s.x,s.y)}}},{key:"updatePath",value:function(){var e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}},{key:"startHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}},{key:"stopHandleListening",value:function(e){var t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}},{key:"getNeighborPoints",value:function(e){var t=this.cellView,a=this.vertices,s=e>0?a[e-1]:t.sourceAnchor,u=e<a.length-1?a[e+1]:t.targetAnchor;return{prev:Pt.create(s),next:Pt.create(u)}}},{key:"getMouseEventArgs",value:function(e){var t=this.normalizeEvent(e),a=this.graph.snapToGrid(t.clientX,t.clientY),s=a.x,u=a.y;return{e:t,x:s,y:u}}},{key:"onHandleChange",value:function(e){var t=e.e;this.focus();var a=this.cellView;if(a.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){var s=this.getMouseEventArgs(t),u=s.e,l=s.x,c=s.y;a.notifyMouseDown(u,l,c)}}},{key:"onHandleChanging",value:function(e){var t=e.handle,a=e.e,s=this.cellView,u=t.options.index,l=this.getMouseEventArgs(a),c=l.e,f=l.x,d=l.y,v={x:f,y:d};this.snapVertex(v,u),s.cell.setVertexAt(u,v,{ui:!0,toolId:this.cid}),t.updatePosition(v.x,v.y),this.options.stopPropagation||s.notifyMouseMove(c,f,d)}},{key:"onHandleChanged",value:function(e){var t=e.e,a=this.options,s=this.cellView;if(a.addable&&this.updatePath(),!!a.removeRedundancies){var u=s.removeRedundantLinearVertices({ui:!0,toolId:this.cid});u&&this.render(),this.blur(),s.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(t).vertexAdded&&s.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});var l=this.getMouseEventArgs(t),c=l.e,f=l.x,d=l.y;this.options.stopPropagation||s.notifyMouseUp(c,f,d),s.checkMouseleave(c),a.onChanged&&a.onChanged({edge:s.cell,edgeView:s})}}},{key:"snapVertex",value:function(e,t){var a=this.options.snapRadius||0;if(a>0){var s=this.getNeighborPoints(t),u=s.prev,l=s.next;Math.abs(e.x-u.x)<a?e.x=u.x:Math.abs(e.x-l.x)<a&&(e.x=l.x),Math.abs(e.y-u.y)<a?e.y=s.prev.y:Math.abs(e.y-l.y)<a&&(e.y=l.y)}}},{key:"onHandleRemove",value:function(e){var t=e.handle,a=e.e;if(this.options.removable){var s=t.options.index,u=this.cellView;u.cell.removeVertexAt(s,{ui:!0}),this.options.addable&&this.updatePath(),u.checkMouseleave(this.normalizeEvent(a))}}},{key:"onPathMouseDown",value:function(e){var t=this.cellView;if(!(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))){e.stopPropagation(),e.preventDefault();var a=this.normalizeEvent(e),s=this.graph.snapToGrid(a.clientX,a.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});var u=t.getVertexIndex(s.x,s.y);this.snapVertex(s,u),t.cell.insertVertex(s,u,{ui:!0,toolId:this.cid}),this.render();var l=this.handles[u];this.eventData(a,{vertexAdded:!0}),l.onMouseDown(a)}}},{key:"onRemove",value:function(){this.resetHandles()}}]),r}(Du.ToolItem);(function(o){var i=function(r){Object(xr.a)(e,r);var n=Object(Sr.a)(e);function e(t){var a;return Object(me.a)(this,e),a=n.call(this),a.options=t,a.render(),a.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"}),a}return Object(ue.a)(e,[{key:"graph",get:function(){return this.options.graph}},{key:"render",value:function(){this.container=Zi.createElement("circle",!0);var a=this.options.attrs;if(typeof a=="function"){var s=o.getDefaults();this.setAttrs(Object.assign(Object.assign({},s.attrs),a(this)))}else this.setAttrs(a);this.addClass(this.prefixClassName("edge-tool-vertex"))}},{key:"updatePosition",value:function(a,s){this.setAttrs({cx:a,cy:s})}},{key:"onMouseDown",value:function(a){this.options.guard(a)||(a.stopPropagation(),a.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},a.data),this.emit("change",{e:a,handle:this}))}},{key:"onMouseMove",value:function(a){this.emit("changing",{e:a,handle:this})}},{key:"onMouseUp",value:function(a){this.emit("changed",{e:a,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}},{key:"onDoubleClick",value:function(a){this.emit("remove",{e:a,handle:this})}}]),e}(Zi);o.Handle=i})(r0||(r0={})),function(o){var i,r=hs.prefix("edge-tool-vertex-path");o.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:function(e){return new o.Handle(e)},markup:[{tagName:"path",selector:"connection",className:r,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:(i={},Object(Re.a)(i,"mousedown .".concat(r),"onPathMouseDown"),Object(Re.a)(i,"touchstart .".concat(r),"onPathMouseDown"),i)})}(r0||(r0={}));var a0=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.handles=[],n}return Object(ue.a)(r,[{key:"vertices",get:function(){return this.cellView.cell.getVertices()}},{key:"update",value:function(){return this.render(),this}},{key:"onRender",value:function(){M.addClass(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();var e=this.cellView,t=Object(We.a)(this.vertices);t.unshift(e.sourcePoint),t.push(e.targetPoint);for(var a=0,s=t.length;a<s-1;a+=1){var u=t[a],l=t[a+1],c=this.renderHandle(u,l,a);this.stamp(c.container),this.handles.push(c)}return this}},{key:"renderHandle",value:function(e,t,a){var s=this,u=this.options.createHandle({index:a,graph:this.graph,guard:function(c){return s.guard(c)},attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(u),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:u}),this.updateHandle(u,e,t),this.container.appendChild(u.container),this.startHandleListening(u),u}},{key:"startHandleListening",value:function(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}},{key:"stopHandleListening",value:function(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}},{key:"resetHandles",value:function(){var e=this,t=this.handles;this.handles=[],t&&t.forEach(function(a){e.stopHandleListening(a),a.remove()})}},{key:"shiftHandleIndexes",value:function(e){for(var t=this.handles,a=0,s=t.length;a<s;a+=1)t[a].options.index+=e}},{key:"resetAnchor",value:function(e,t){var a=this.cellView.cell,s={ui:!0,toolId:this.cid};t?a.prop([e,"anchor"],t,s):a.removeProp([e,"anchor"],s)}},{key:"snapHandle",value:function(e,t,a){var s=e.options.axis,u=e.options.index,l=this.cellView,c=l.cell,f=c.getVertices(),d=f[u-2]||a.sourceAnchor,v=f[u+1]||a.targetAnchor,m=this.options.snapRadius;return Math.abs(t[s]-d[s])<m?t[s]=d[s]:Math.abs(t[s]-v[s])<m&&(t[s]=v[s]),t}},{key:"onHandleChanging",value:function(e){var t=e.handle,a=e.e,s=this.graph,u=this.options,l=this.cellView,c=u.anchor,f=t.options.axis,d=t.options.index-1,v=this.getEventData(a),m=this.normalizeEvent(a),y=s.snapToGrid(m.clientX,m.clientY),C=this.snapHandle(t,y.clone(),v),O=p.cloneDeep(this.vertices),x=O[d],T=O[d+1],L=l.sourceView,_=l.sourceBBox,z=!1,Q=!1;if(x?d===0?_.containsPoint(x)?(O.shift(),this.shiftHandleIndexes(-1),z=!0):(x[f]=C[f],Q=!0):x[f]=C[f]:(x=l.sourceAnchor.toJSON(),x[f]=C[f],_.containsPoint(x)?z=!0:(O.unshift(x),this.shiftHandleIndexes(1),Q=!0)),typeof c=="function"&&L){if(z){var q=v.sourceAnchor.clone();q[f]=C[f];var ye=A.call(c,l,q,L,l.sourceMagnet||L.container,"source",l,this);this.resetAnchor("source",ye)}Q&&this.resetAnchor("source",v.sourceAnchorDef)}var Ce=l.targetView,Ae=l.targetBBox,Pe=!1,qe=!1;if(T?d===O.length-2?Ae.containsPoint(T)?(O.pop(),Pe=!0):(T[f]=C[f],qe=!0):T[f]=C[f]:(T=l.targetAnchor.toJSON(),T[f]=C[f],Ae.containsPoint(T)?Pe=!0:(O.push(T),qe=!0)),typeof c=="function"&&Ce){if(Pe){var lt=v.targetAnchor.clone();lt[f]=C[f];var ze=A.call(c,l,lt,Ce,l.targetMagnet||Ce.container,"target",l,this);this.resetAnchor("target",ze)}qe&&this.resetAnchor("target",v.targetAnchorDef)}Pt.equalPoints(O,this.vertices)||this.cellView.cell.setVertices(O,{ui:!0,toolId:this.cid}),this.updateHandle(t,x,T,0),u.stopPropagation||l.notifyMouseMove(m,y.x,y.y)}},{key:"onHandleChange",value:function(e){var t=e.handle,a=e.e,s=this.options,u=this.handles,l=this.cellView,c=t.options.index;if(!!Array.isArray(u)){for(var f=0,d=u.length;f<d;f+=1)f!==c&&u[f].hide();if(this.focus(),this.setEventData(a,{sourceAnchor:l.sourceAnchor.clone(),targetAnchor:l.targetAnchor.clone(),sourceAnchorDef:p.cloneDeep(this.cell.prop(["source","anchor"])),targetAnchorDef:p.cloneDeep(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!s.stopPropagation){var v=this.normalizeEvent(a),m=this.graph.snapToGrid(v.clientX,v.clientY);l.notifyMouseDown(v,m.x,m.y)}}}},{key:"onHandleChanged",value:function(e){var t=e.e,a=this.options,s=this.cellView;a.removeRedundancies&&s.removeRedundantLinearVertices({ui:!0,toolId:this.cid});var u=this.normalizeEvent(t),l=this.graph.snapToGrid(u.clientX,u.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),a.stopPropagation||s.notifyMouseUp(u,l.x,l.y),s.checkMouseleave(u),a.onChanged&&a.onChanged({edge:s.cell,edgeView:s})}},{key:"updateHandle",value:function(e,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=this.options.precision||0,l=Math.abs(t.x-a.x)<u,c=Math.abs(t.y-a.y)<u;if(l||c){var f=new Sa(t,a),d=f.length();if(d<this.options.threshold)e.hide();else{var v=f.getCenter(),m=l?"x":"y";v[m]+=s||0;var y=f.vector().vectorAngle(new Pt(1,0));e.updatePosition(v.x,v.y,y,this.cellView),e.show(),e.options.axis=m}}else e.hide()}},{key:"onRemove",value:function(){this.resetHandles()}}]),r}(Du.ToolItem);(function(o){var i=function(r){Object(xr.a)(e,r);var n=Object(Sr.a)(e);function e(t){var a;return Object(me.a)(this,e),a=n.call(this),a.options=t,a.render(),a.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),a}return Object(ue.a)(e,[{key:"render",value:function(){this.container=Zi.createElement("rect",!0);var a=this.options.attrs;if(typeof a=="function"){var s=o.getDefaults();this.setAttrs(Object.assign(Object.assign({},s.attrs),a(this)))}else this.setAttrs(a);this.addClass(this.prefixClassName("edge-tool-segment"))}},{key:"updatePosition",value:function(a,s,u,l){var c=l.getClosestPoint(new Pt(a,s))||new Pt(a,s),f=M.createSVGMatrix().translate(c.x,c.y);if(c.equals({x:a,y:s}))f=f.rotate(u);else{var d=new Sa(a,s,c.x,c.y),v=d.vector().vectorAngle(new Pt(1,0));v!==0&&(v+=90),f=f.rotate(v)}this.setAttrs({transform:M.matrixToTransformString(f),cursor:u%180==0?"row-resize":"col-resize"})}},{key:"onMouseDown",value:function(a){this.options.guard(a)||(this.trigger("change",{e:a,handle:this}),a.stopPropagation(),a.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},a.data))}},{key:"onMouseMove",value:function(a){this.emit("changing",{e:a,handle:this})}},{key:"onMouseUp",value:function(a){this.emit("changed",{e:a,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}},{key:"show",value:function(){this.container.style.display=""}},{key:"hide",value:function(){this.container.style.display="none"}}]),e}(Zi);o.Handle=i})(a0||(a0={})),function(o){o.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:function(r){return new o.Handle(r)},anchor:QP})}(a0||(a0={}));var m1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"type",get:function(){return this.options.type}},{key:"onRender",value:function(){M.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-anchor"))),this.toggleArea(!1),this.update()}},{key:"update",value:function(){var e=this.type,t=this.cellView,a=t.getTerminalView(e);return a?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}},{key:"updateAnchor",value:function(){var e=this.childNodes;if(!!e){var t=e.anchor;if(!!t){var a=this.type,s=this.cellView,u=this.options,l=s.getTerminalAnchor(a),c=s.cell.prop([a,"anchor"]);t.setAttribute("transform","translate(".concat(l.x,", ").concat(l.y,")"));var f=c?u.customAnchorAttrs:u.defaultAnchorAttrs;f&&Object.keys(f).forEach(function(d){t.setAttribute(d,f[d])})}}}},{key:"updateArea",value:function(){var e=this.childNodes;if(!!e){var t=e.area;if(!!t){var a=this.type,s=this.cellView,u=s.getTerminalView(a);if(u){var l=u.cell,c=s.getTerminalMagnet(a),f=this.options.areaPadding||0;Number.isFinite(f)||(f=0);var d,v,m;u.isEdgeElement(c)?(d=u.getBBox(),v=0,m=d.getCenter()):(d=u.getUnrotatedBBoxOfElement(c),v=l.getAngle(),m=d.getCenter(),v&&m.rotate(-v,l.getBBox().getCenter())),d.inflate(f),M.attr(t,{x:-d.width/2,y:-d.height/2,width:d.width,height:d.height,transform:"translate(".concat(m.x,", ").concat(m.y,") rotate(").concat(v,")")})}}}}},{key:"toggleArea",value:function(e){if(this.childNodes){var t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}},{key:"onMouseDown",value:function(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}},{key:"resetAnchor",value:function(e){var t=this.type,a=this.cell;e?a.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):a.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}},{key:"onMouseMove",value:function(e){var t=this.type,a=this.cellView,s=a.getTerminalView(t);if(s!=null){var u=this.normalizeEvent(e),l=s.cell,c=a.getTerminalMagnet(t),f=this.graph.clientToLocal(u.clientX,u.clientY),d=this.options.snap;if(typeof d=="function"){var v=A.call(d,a,f,s,c,t,a,this);f=Pt.create(v)}if(this.options.restrictArea)if(s.isEdgeElement(c)){var m=s.getClosestPoint(f);m&&(f=m)}else{var y=s.getUnrotatedBBoxOfElement(c),C=l.getAngle(),O=l.getBBox().getCenter(),x=f.clone().rotate(C,O);y.containsPoint(x)||(f=y.getNearestPointToPoint(x).rotate(-C,O))}var T,L=this.options.anchor;typeof L=="function"&&(T=A.call(L,a,f,s,c,t,a,this)),this.resetAnchor(T),this.update()}}},{key:"onMouseUp",value:function(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);var t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}},{key:"onDblClick",value:function(){var e=this.options.resetAnchor;e&&this.resetAnchor(e===!0?void 0:e),this.update()}}]),r}(Du.ToolItem);(function(o){o.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:QP,snap:function(r,n,e,t,a,s){var u=s.options.snapRadius||0,l=t==="source",c=l?0:-1,f=this.cell.getVertexAt(c)||this.getTerminalAnchor(l?"target":"source");return f&&(Math.abs(f.x-r.x)<u&&(r.x=f.x),Math.abs(f.y-r.y)<u&&(r.y=f.y)),r}})})(m1||(m1={}));var GB=m1.define({name:"source-anchor",type:"source"}),zB=m1.define({name:"target-anchor",type:"target"}),UB=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},y1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"type",get:function(){return this.options.type}},{key:"ratio",get:function(){return this.options.ratio}},{key:"init",value:function(){if(this.options.attrs){var e=this.options.attrs,t=e.class,a=UB(e,["class"]);this.setAttrs(a,this.container),t&&M.addClass(this.container,t)}}},{key:"onRender",value:function(){M.addClass(this.container,this.prefixClassName("edge-tool-".concat(this.type,"-arrowhead"))),this.update()}},{key:"update",value:function(){var e=this.ratio,t=this.cellView,a=t.getTangentAtRatio(e),s=a?a.start:t.getPointAtRatio(e),u=a&&a.vector().vectorAngle(new Pt(1,0))||0;if(!s)return this;var l=M.createSVGMatrix().translate(s.x,s.y).rotate(u);return M.transform(this.container,l,{absolute:!0}),this}},{key:"onMouseDown",value:function(e){if(!this.guard(e)){e.stopPropagation(),e.preventDefault();var t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});var a=this.graph.snapToGrid(e.clientX,e.clientY),s=t.prepareArrowheadDragging(this.type,{x:a.x,y:a.y,options:{toolId:this.cid}});this.cellView.setEventData(e,s),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}}},{key:"onMouseMove",value:function(e){var t=this.normalizeEvent(e),a=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,a.x,a.y),this.update()}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),a=this.cellView,s=this.graph.snapToGrid(t.clientX,t.clientY);a.onMouseUp(t,s.x,s.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",a.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}]),r}(Du.ToolItem);(function(o){o.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(y1||(y1={}));var VB=y1.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),HB=y1.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Qp=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.labelIndex=-1,n.distance=.5,n}return Object(ue.a)(r,[{key:"render",value:function(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}},{key:"createElement",value:function(){var e=this.cell,t=[this.prefixClassName("".concat(e.isEdge()?"edge":"node","-tool-editor")),this.prefixClassName("cell-tool-editor")];this.editor=Du.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}},{key:"updateEditor",value:function(){var e=this.graph,t=this.cell,a=this.editor,s=a.style,u=new Pt,l=20;if(t.isNode())u=t.getBBox().center,l=t.size().width-4;else if(t.isEdge()){var c=this.options.event,f=c.target,d=f.parentElement,v=d&&M.hasClass(d,this.prefixClassName("edge-label"));if(v){var m=d.getAttribute("data-index")||"0";this.labelIndex=parseInt(m,10);var y=d.getAttribute("transform"),C=M.parseTransformString(y),O=C.translation;u=new Pt(O.tx,O.ty),l=M.getBBox(f).width}else{if(!this.options.labelAddable)return this;u=e.clientToLocal(Pt.create(c.clientX,c.clientY));var x=this.cellView,T=x.path.closestPointLength(u);this.distance=T}}u=e.localToGraph(u),s.left="".concat(u.x,"px"),s.top="".concat(u.y,"px"),s.minWidth="".concat(l,"px");var L=e.scale();s.transform="scale(".concat(L.sx,", ").concat(L.sy,") translate(-50%, -50%)");var _=this.options.attrs;s.fontSize="".concat(_.fontSize,"px"),s.fontFamily=_.fontFamily,s.color=_.color,s.backgroundColor=_.backgroundColor;var z=this.options.getText,Q;return typeof z=="function"&&(Q=A.call(z,this.cellView,{cell:this.cell,index:this.labelIndex})),a.innerText=Q||"",this}},{key:"onDocumentMouseDown",value:function(e){if(e.target!==this.editor){var t=this.cell,a=this.editor.innerText.replace(/\n$/,"")||"",s=this.options.setText;typeof s=="function"&&A.call(s,this.cellView,{cell:this.cell,value:a,index:this.labelIndex,distance:this.distance}),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}},{key:"onDblClick",value:function(e){e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.stopPropagation()}},{key:"autoFocus",value:function(){var e=this;setTimeout(function(){e.editor.focus(),e.selectText()})}},{key:"selectText",value:function(){if(window.getSelection){var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}]),r}(Du.ToolItem);(function(o){o.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(Qp||(Qp={})),function(o){o.NodeEditor=o.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:function(r){var n=r.cell;return n.attr("text/text")},setText:function(r){var n=r.cell,e=r.value;n.attr("text/text",e)}}),o.EdgeEditor=o.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:function(r){var n=r.cell,e=r.index;return e===-1?"":n.prop("labels/".concat(e,"/attrs/label/text"))},setText:function(r){var n=r.cell,e=r.value,t=r.index,a=r.distance,s=n;t===-1?s.appendLabel({position:{distance:a},attrs:{label:{text:e}}}):e?s.prop("labels/".concat(t,"/attrs/label/text"),e):typeof t=="number"&&s.removeLabelAt(t)}})}(Qp||(Qp={}));var ek=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Dv;(function(o){o.presets={boundary:g1,button:mh,"button-remove":mh.Remove,"node-editor":Qp.NodeEditor},o.registry=Xo.create({type:"node tool",process:function(r,n){if(typeof n=="function")return n;var e=Du.ToolItem,t=n.inherit,a=ek(n,["inherit"]);if(t){var s=this.get(t);s==null?this.onNotFound(t,"inherited"):e=s}return a.name==null&&(a.name=r),e.define.call(e,a)}}),o.registry.register(o.presets,!0)})(Dv||(Dv={}));var Iv;(function(o){o.presets={boundary:g1,vertices:r0,segments:a0,button:mh,"button-remove":mh.Remove,"source-anchor":GB,"target-anchor":zB,"source-arrowhead":VB,"target-arrowhead":HB,"edge-editor":Qp.EdgeEditor},o.registry=Xo.create({type:"edge tool",process:function(r,n){if(typeof n=="function")return n;var e=Du.ToolItem,t=n.inherit,a=ek(n,["inherit"]);if(t){var s=this.get(t);s==null?this.onNotFound(t,"inherited"):e=s}return a.name==null&&(a.name=r),e.define.call(e,a)}}),o.registry.register(o.presets,!0)})(Iv||(Iv={}));var WB=Ed("center"),$B=Ed("topCenter"),KB=Ed("bottomCenter"),XB=Ed("leftMiddle"),YB=Ed("rightMiddle"),JB=Ed("topLeft"),ZB=Ed("topRight"),QB=Ed("bottomLeft"),qB=Ed("bottomRight");function Ed(o){return function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=e.rotate?i.getUnrotatedBBoxOfElement(r):i.getBBoxOfElement(r),a=t[o];a.x+=E.normalizePercentage(e.dx,t.width),a.y+=E.normalizePercentage(e.dy,t.height);var s=i.cell;return e.rotate?a.rotate(-s.getAngle(),s.getBBox().getCenter()):a}}function b1(o){return function(i,r,n,e){if(n instanceof Element){var t=this.graph.renderer.findViewByElem(n),a;if(t)if(t.isEdgeElement(n)){var s=e.fixedAt!=null?e.fixedAt:"50%";a=tk(t,s)}else a=t.getBBoxOfElement(n).getCenter();else a=new Pt;return o.call(this,i,r,a,e)}return o.apply(this,arguments)}}function tk(o,i){var r=E.isPercentage(i),n=typeof i=="string"?parseFloat(i):i;return r?o.getPointAtRatio(n/100):o.getPointAtLength(n)}var eG=function(i,r,n,e){var t=i.cell.getAngle(),a=i.getBBoxOfElement(r),s=a.getCenter(),u=a.getTopLeft(),l=a.getBottomRight(),c=e.padding;if(Number.isFinite(c)||(c=0),u.y+c<=n.y&&n.y<=l.y-c){var f=n.y-s.y;s.x+=t===0||t===180?0:f*1/Math.tan(Mi.toRad(t)),s.y+=f}else if(u.x+c<=n.x&&n.x<=l.x-c){var d=n.x-s.x;s.y+=t===90||t===270?0:d*Math.tan(Mi.toRad(t)),s.x+=d}return s},tG=b1(eG),nG=function(i,r,n,e,t){var a=i.cell.getConnectionPoint(this.cell,t);return(e.dx||e.dy)&&a.translate(e.dx||0,e.dy||0),a},rG=function(i,r,n,e){var t,a=0,s,u=i.cell;e.rotate?(t=i.getUnrotatedBBoxOfElement(r),s=u.getBBox().getCenter(),a=u.getAngle()):t=i.getBBoxOfElement(r);var l=e.padding;l!=null&&Number.isFinite(l)&&t.inflate(l),e.rotate&&n.rotate(a,s);var c=t.getNearestSideToPoint(n),f;switch(c){case"left":f=t.getLeftMiddle();break;case"right":f=t.getRightMiddle();break;case"top":f=t.getTopCenter();break;case"bottom":f=t.getBottomCenter();break;default:break}var d=e.direction;return d==="H"?(c==="top"||c==="bottom")&&(n.x<=t.x+t.width?f=t.getLeftMiddle():f=t.getRightMiddle()):d==="V"&&(n.y<=t.y+t.height?f=t.getTopCenter():f=t.getBottomCenter()),e.rotate?f.rotate(-a,s):f},aG=b1(rG),Rv;(function(o){o.presets=J,o.registry=Xo.create({type:"node endpoint"}),o.registry.register(o.presets,!0)})(Rv||(Rv={}));var iG=function(i,r,n,e){var t=e.ratio!=null?e.ratio:.5;return t>1&&(t/=100),i.getPointAtRatio(t)},oG=function(i,r,n,e){var t=e.length!=null?e.length:20;return i.getPointAtLength(t)},nk=function(i,r,n,e){var t=i.getClosestPoint(n);return t!=null?t:new Pt},sG=b1(nk),uG=function(i,r,n,e){var t=1e6,a=i.getConnection(),s=i.getConnectionSubdivisions(),u=new Sa(n.clone().translate(0,t),n.clone().translate(0,-t)),l=new Sa(n.clone().translate(t,0),n.clone().translate(-t,0)),c=u.intersect(a,{segmentSubdivisions:s}),f=l.intersect(a,{segmentSubdivisions:s}),d=[];return c&&d.push.apply(d,Object(We.a)(c)),f&&d.push.apply(d,Object(We.a)(f)),d.length>0?n.closest(d):e.fallbackAt!=null?tk(i,e.fallbackAt):A.call(nk,this,i,r,n,e)},lG=b1(uG),Nv;(function(o){o.presets=ce,o.registry=Xo.create({type:"edge endpoint"}),o.registry.register(o.presets,!0)})(Nv||(Nv={}));function C1(o,i,r){var n;if(typeof r=="object"){if(Number.isFinite(r.y)){var e=new Sa(i,o),t=e.parallel(r.y),a=t.start,s=t.end;i=a,o=s}n=r.x}else n=r;if(n==null||!Number.isFinite(n))return o;var u=o.distance(i);return n===0&&u>0?o:o.move(i,-Math.min(n,u-1))}function E1(o){var i=o.getAttribute("stroke-width");return i===null?0:parseFloat(i)||0}function cG(o){if(o==null)return null;var i=o;do{var r=i.tagName;if(typeof r!="string")return null;if(r=r.toUpperCase(),r==="G")i=i.firstElementChild;else if(r==="TITLE")i=i.nextElementSibling;else break}while(i);return i}var rk=function(i,r,n,e){var t=r.getBBoxOfElement(n);e.stroked&&t.inflate(E1(n)/2);var a=i.intersect(t),s=a&&a.length?i.start.closest(a):i.end;return C1(s,i.start,e.offset)},fG=function(i,r,n,e,t){var a=r.cell,s=a.isNode()?a.getAngle():0;if(s===0)return A.call(rk,this,i,r,n,e,t);var u=r.getUnrotatedBBoxOfElement(n);e.stroked&&u.inflate(E1(n)/2);var l=u.getCenter(),c=i.clone().rotate(s,l),f=c.setLength(1e6).intersect(u),d=f&&f.length?c.start.closest(f).rotate(-s,l):i.end;return C1(d,i.start,e.offset)},dG=function(i,r,n,e){var t,a,s=i.end,u=e.selector;if(typeof u=="string"?t=r.findOne(u):Array.isArray(u)?t=p.getByPath(n,u):t=cG(n),!M.isSVGGraphicsElement(t)){if(t===n||!M.isSVGGraphicsElement(n))return s;t=n}var l=r.getShapeOfElement(t),c=r.getMatrixOfElement(t),f=r.getRootTranslatedMatrix(),d=r.getRootRotatedMatrix(),v=f.multiply(d).multiply(c),m=v.inverse(),y=M.transformLine(i,m),C=y.start.clone(),O=r.getDataOfElement(t);if(e.insideout===!1){O.shapeBBox==null&&(O.shapeBBox=l.bbox());var x=O.shapeBBox;if(x!=null&&x.containsPoint(C))return s}e.extrapolate===!0&&y.setLength(1e6);var T;if(pi.isPath(l)){var L=e.precision||2;O.segmentSubdivisions==null&&(O.segmentSubdivisions=l.getSegmentSubdivisions({precision:L})),T={precision:L,segmentSubdivisions:O.segmentSubdivisions},a=y.intersect(l,T)}else a=y.intersect(l);a?Array.isArray(a)&&(a=C.closest(a)):e.sticky===!0&&(Br.isRectangle(l)?a=l.getNearestPointToPoint(C):lh.isEllipse(l)?a=l.intersectsWithLineFromCenterToPoint(C):a=l.closestPoint(C,T));var _=a?M.transformPoint(a,v):s,z=e.offset||0;return e.stroked!==!1&&(typeof z=="object"?(z=Object.assign({},z),z.x==null&&(z.x=0),z.x+=E1(t)/2):z+=E1(t)/2),C1(_,i.start,z)};function hG(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=o.start,e=o.end,t,a,s,u;switch(i){case"left":u="x",t=e,a=n,s=-1;break;case"right":u="x",t=n,a=e,s=1;break;case"top":u="y",t=e,a=n,s=-1;break;case"bottom":u="y",t=n,a=e,s=1;break;default:return}n[u]<e[u]?t[u]=a[u]:a[u]=t[u],Number.isFinite(r)&&(t[u]+=s*r,a[u]+=s*r)}var vG=function(i,r,n,e){var t=e.alignOffset,a=e.align;return a&&hG(i,a,t),C1(i.end,i.start,e.offset)},jv;(function(o){o.presets=G,o.registry=Xo.create({type:"connection point"}),o.registry.register(o.presets,!0)})(jv||(jv={}));var pG=function(i){return Object(We.a)(i)},gG=function(i,r,n){var e=r.side||"bottom",t=E.normalizeSides(r.padding||40),a=n.sourceBBox,s=n.targetBBox,u=a.getCenter(),l=s.getCenter(),c,f,d;switch(e){case"top":d=-1,c="y",f="height";break;case"left":d=-1,c="x",f="width";break;case"right":d=1,c="x",f="width";break;case"bottom":default:d=1,c="y",f="height";break}return u[c]+=d*(a[f]/2+t[e]),l[c]+=d*(s[f]/2+t[e]),d*(u[c]-l[c])>0?l[c]=u[c]:u[c]=l[c],[u.toJSON()].concat(Object(We.a)(i),[l.toJSON()])};function O1(o){return new Br(o.x,o.y,0,0)}function w1(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=E.normalizeSides(o.padding||20);return{x:-i.left,y:-i.top,width:i.left+i.right,height:i.top+i.bottom}}function ak(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.sourceBBox.clone().moveAndExpand(w1(i))}function ik(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.targetBBox.clone().moveAndExpand(w1(i))}function mG(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.sourceAnchor)return o.sourceAnchor;var r=ak(o,i);return r.getCenter()}function yG(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o.targetAnchor)return o.targetAnchor;var r=ik(o,i);return r.getCenter()}var ok=function(i,r,n){var e=ak(n,r),t=ik(n,r),a=mG(n,r),s=yG(n,r);e=e.union(O1(a)),t=t.union(O1(s));var u=i.map(function(x){return Pt.create(x)});u.unshift(a),u.push(s);for(var l=null,c=[],f=0,d=u.length-1;f<d;f+=1){var v=null,m=u[f],y=u[f+1],C=oc.getBearing(m,y)!=null;if(f===0)f+1===d?e.intersectsWithRect(t.clone().inflate(1))?v=oc.insideNode(m,y,e,t):C||(v=oc.nodeToNode(m,y,e,t)):e.containsPoint(y)?v=oc.insideNode(m,y,e,O1(y).moveAndExpand(w1(r))):C||(v=oc.nodeToVertex(m,y,e));else if(f+1===d){var O=C&&oc.getBearing(y,m)===l;t.containsPoint(m)||O?v=oc.insideNode(m,y,O1(m).moveAndExpand(w1(r)),t,l):C||(v=oc.vertexToNode(m,y,t,l))}else C||(v=oc.vertexToVertex(m,y,l));v?(c.push.apply(c,Object(We.a)(v.points)),l=v.direction):l=oc.getBearing(m,y),f+1<d&&c.push(y)}return c},oc;(function(o){var i={N:"S",S:"N",E:"W",W:"E"},r={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function n(f,d,v){var m=new Pt(f.x,d.y);return v.containsPoint(m)&&(m=new Pt(d.x,f.y)),m}function e(f,d){return f[d==="W"||d==="E"?"width":"height"]}o.getBBoxSize=e;function t(f,d){return f.x===d.x?f.y>d.y?"N":"S":f.y===d.y?f.x>d.x?"W":"E":null}o.getBearing=t;function a(f,d,v){var m=new Pt(f.x,d.y),y=new Pt(d.x,f.y),C=t(f,m),O=t(f,y),x=v?i[v]:null,T=C===v||C!==x&&(O===x||O!==v)?m:y;return{points:[T],direction:t(T,d)}}o.vertexToVertex=a;function s(f,d,v){var m=n(f,d,v);return{points:[m],direction:t(m,d)}}o.nodeToVertex=s;function u(f,d,v,m){var y=[new Pt(f.x,d.y),new Pt(d.x,f.y)],C=y.filter(function(_){return!v.containsPoint(_)}),O=C.filter(function(_){return t(_,f)!==m}),x;if(O.length>0)return x=O.filter(function(_){return t(f,_)===m}).pop(),x=x||O[0],{points:[x],direction:t(x,d)};{x=B.difference(y,C)[0];var T=Pt.create(d).move(x,-e(v,m)/2),L=n(T,f,v);return{points:[L,T],direction:t(T,d)}}}o.vertexToNode=u;function l(f,d,v,m){var y=s(d,f,m),C=y.points[0];if(v.containsPoint(C)){y=s(f,d,v);var O=y.points[0];if(m.containsPoint(O)){var x=Pt.create(f).move(O,-e(v,t(f,O))/2),T=Pt.create(d).move(C,-e(m,t(d,C))/2),L=new Sa(x,T).getCenter(),_=s(f,L,v),z=a(L,d,_.direction);y.points=[_.points[0],z.points[0]],y.direction=z.direction}}return y}o.nodeToNode=l;function c(f,d,v,m,y){var C=v.union(m).inflate(1),O=C.getCenter(),x=O.distance(d)>O.distance(f),T=x?d:f,L=x?f:d,_,z,Q;y?(_=Pt.fromPolar(C.width+C.height,r[y],T),_=C.getNearestPointToPoint(_).move(_,-1)):_=C.getNearestPointToPoint(T).move(T,1),z=n(_,L,C);var q;_.round().equals(z.round())?(z=Pt.fromPolar(C.width+C.height,Mi.toRad(_.theta(T))+Math.PI/2,L),z=C.getNearestPointToPoint(z).move(L,1).round(),Q=n(_,z,C),q=x?[z,Q,_]:[_,Q,z]):q=x?[z,_]:[_,z];var ye=t(x?_:z,d);return{points:q,direction:ye}}o.insideNode=c})(oc||(oc={}));var bG={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeNodes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost:function(){var i=yh(this.step,this);return i},directions:function(){var i=yh(this.step,this),r=yh(this.cost,this);return[{cost:r,offsetX:i,offsetY:0},{cost:r,offsetX:-i,offsetY:0},{cost:r,offsetX:0,offsetY:i},{cost:r,offsetX:0,offsetY:-i}]},penalties:function(){var i=yh(this.step,this);return{0:0,45:i/2,90:i/2}},paddingBox:function(){var i=yh(this.step,this);return{x:-i,y:-i,width:2*i,height:2*i}},fallbackRouter:ok,draggingRouter:null};function yh(o,i){return typeof o=="function"?o.call(i):o}function CG(o){var i=Object.keys(o).reduce(function(n,e){var t=n;return e==="fallbackRouter"||e==="draggingRouter"||e==="fallbackRoute"?t[e]=o[e]:t[e]=yh(o[e],o),n},{});if(i.padding){var r=E.normalizeSides(i.padding);i.paddingBox={x:-r.left,y:-r.top,width:r.left+r.right,height:r.top+r.bottom}}return i.directions.forEach(function(n){var e=new Pt(0,0),t=new Pt(n.offsetX,n.offsetY);n.angle=Mi.normalize(e.theta(t))}),i}var sk=1,uk=2,EG=function(){function o(){Object(me.a)(this,o),this.items=[],this.hash={},this.values={}}return Object(ue.a)(o,[{key:"add",value:function(r,n){var e=this;this.hash[r]?this.items.splice(this.items.indexOf(r),1):this.hash[r]=sk,this.values[r]=n;var t=B.sortedIndexBy(this.items,r,function(a){return e.values[a]});this.items.splice(t,0,r)}},{key:"pop",value:function(){var r=this.items.shift();return r&&(this.hash[r]=uk),r}},{key:"isOpen",value:function(r){return this.hash[r]===sk}},{key:"isClose",value:function(r){return this.hash[r]===uk}},{key:"isEmpty",value:function(){return this.items.length===0}}]),o}(),OG=function(){function o(i){Object(me.a)(this,o),this.options=i,this.mapGridSize=100,this.map={}}return Object(ue.a)(o,[{key:"build",value:function(r,n){var e=this.options,t=e.excludeTerminals.reduce(function(c,f){var d=n[f];if(d){var v=r.getCell(d.cell);v&&c.push(v)}return c},[]),a=[],s=r.getCell(n.getSourceCellId());s&&(a=B.union(a,s.getAncestors().map(function(c){return c.id})));var u=r.getCell(n.getTargetCellId());u&&(a=B.union(a,u.getAncestors().map(function(c){return c.id})));var l=this.mapGridSize;return r.getNodes().reduce(function(c,f){var d=f.shape,v=e.excludeShapes,m=d?v.includes(d):!1,y=t.some(function(Ce){return Ce.id===f.id}),C=e.excludeNodes.some(function(Ce){return typeof Ce=="string"?f.id===Ce:Ce===f}),O=a.includes(f.id),x=e.excludeHiddenNodes&&!f.isVisible(),T=m||y||C||O||x;if(!T)for(var L=f.getBBox().moveAndExpand(e.paddingBox),_=L.getOrigin().snapToGrid(l),z=L.getCorner().snapToGrid(l),Q=_.x;Q<=z.x;Q+=l)for(var q=_.y;q<=z.y;q+=l){var ye=new Pt(Q,q).toString();c[ye]==null&&(c[ye]=[]),c[ye].push(L)}return c},this.map),this}},{key:"isAccessible",value:function(r){var n=r.clone().snapToGrid(this.mapGridSize).toString(),e=this.map[n];return e?e.every(function(t){return!t.containsPoint(r)}):!0}}]),o}();function lk(o,i){var r=o.sourceBBox.clone();return i&&i.paddingBox?r.moveAndExpand(i.paddingBox):r}function ck(o,i){var r=o.targetBBox.clone();return i&&i.paddingBox?r.moveAndExpand(i.paddingBox):r}function fk(o,i){if(o.sourceAnchor)return o.sourceAnchor;var r=lk(o,i);return r.getCenter()}function wG(o,i){if(o.targetAnchor)return o.targetAnchor;var r=ck(o,i);return r.getCenter()}function iS(o,i,r,n,e){var t=360/r,a=o.theta(xG(o,i,n,e)),s=Mi.normalize(a+t/2);return t*Math.floor(s/t)}function xG(o,i,r,n){var e=n.step,t=i.x-o.x,a=i.y-o.y,s=t/r.x,u=a/r.y,l=s*e,c=u*e;return new Pt(o.x+l,o.y+c)}function dk(o,i){var r=Math.abs(o-i);return r>180?360-r:r}function SG(o,i){var r=i.step;return i.directions.forEach(function(n){n.gridOffsetX=n.offsetX/r*o.x,n.gridOffsetY=n.offsetY/r*o.y}),i.directions}function AG(o,i,r){return{source:i.clone(),x:hk(r.x-i.x,o),y:hk(r.y-i.y,o)}}function hk(o,i){if(!o)return i;var r=Math.abs(o),n=Math.round(r/i);if(!n)return r;var e=n*i,t=r-e,a=t/n;return i+a}function MG(o,i){var r=i.source,n=hs.snapToGrid(o.x-r.x,i.x)+r.x,e=hs.snapToGrid(o.y-r.y,i.y)+r.y;return new Pt(n,e)}function i0(o,i){return o.round(i)}function x1(o,i,r){return i0(MG(o.clone(),i),r)}function o0(o){return o.toString()}function oS(o){return new Pt(o.x===0?0:Math.abs(o.x)/o.x,o.y===0?0:Math.abs(o.y)/o.y)}function vk(o,i){for(var r=Infinity,n=0,e=i.length;n<e;n+=1){var t=o.manhattanDistance(i[n]);t<r&&(r=t)}return r}function pk(o,i,r,n,e){var t=e.precision,a=e.directionMap,s=o.diff(i.getCenter()),u=Object.keys(a).reduce(function(l,c){if(r.includes(c)){for(var f=a[c],d=new Pt(o.x+f.x*(Math.abs(s.x)+i.width),o.y+f.y*(Math.abs(s.y)+i.height)),v=new Sa(o,d),m=v.intersect(i)||[],y,C=null,O=0;O<m.length;O+=1){var x=m[O],T=o.squaredDistance(x);(y==null||T>y)&&(y=T,C=x)}if(C){var L=x1(C,n,t);i.containsPoint(L)&&(L=x1(L.translate(f.x*n.x,f.y*n.y),n,t)),l.push(L)}}return l},[]);return i.containsPoint(o)||u.push(x1(o,n,t)),u}function TG(o,i,r,n,e){for(var t=[],a=oS(e.diff(r)),s=o0(r),u=o[s],l;u;){l=i[s];var c=oS(l.diff(u));c.equals(a)||(t.unshift(l),a=c),s=o0(u),u=o[s]}var f=i[s],d=oS(f.diff(n));return d.equals(a)||t.unshift(f),t}function PG(o,i,r,n,e){var t=e.precision,a,s;Br.isRectangle(i)?a=i0(fk(o,e).clone(),t):a=i0(i.clone(),t),Br.isRectangle(r)?s=i0(wG(o,e).clone(),t):s=i0(r.clone(),t);var u=AG(e.step,a,s),l=a,c=s,f,d;if(Br.isRectangle(i)?f=pk(l,i,e.startDirections,u,e):f=[l],Br.isRectangle(r)?d=pk(s,r,e.endDirections,u,e):d=[c],f=f.filter(function(Ti){return n.isAccessible(Ti)}),d=d.filter(function(Ti){return n.isAccessible(Ti)}),f.length>0&&d.length>0){for(var v=new EG,m={},y={},C={},O=0,x=f.length;O<x;O+=1){var T=f[O],L=o0(T);v.add(L,vk(T,d)),m[L]=T,C[L]=0}for(var _=e.previousDirectionAngle,z=_===void 0,Q,q,ye=SG(u,e),Ce=ye.length,Ae=d.reduce(function(Ti,Qu){var nf=o0(Qu);return Ti.push(nf),Ti},[]),Pe=Pt.equalPoints(f,d),qe=e.maxLoopCount;!v.isEmpty()&&qe>0;){var lt=v.pop(),ze=m[lt],ht=y[lt],nn=C[lt],Tn=ze.equals(l),Kn=ht==null,zn=void 0;Kn?z?Tn?zn=null:zn=iS(l,ze,Ce,u,e):zn=_:zn=iS(ht,ze,Ce,u,e);var An=Kn&&Pe;if(!An&&Ae.indexOf(lt)>=0)return e.previousDirectionAngle=zn,TG(y,m,ze,l,c);for(var br=0;br<Ce;br+=1){Q=ye[br];var sn=Q.angle;if(q=dk(zn,sn),!(!(z&&Tn)&&q>e.maxDirectionChange)){var Xn=x1(ze.clone().translate(Q.gridOffsetX||0,Q.gridOffsetY||0),u,t),dr=o0(Xn);if(!(v.isClose(dr)||!n.isAccessible(Xn))){if(Ae.indexOf(dr)>=0){var ga=Xn.equals(c);if(!ga){var ca=iS(Xn,c,Ce,u,e),Ta=dk(sn,ca);if(Ta>e.maxDirectionChange)continue}}var La=Q.cost,yo=Tn?0:e.penalties[q],Jo=nn+La+yo;(!v.isOpen(dr)||Jo<C[dr])&&(m[dr]=Xn,y[dr]=ze,C[dr]=Jo,v.add(dr,Jo+vk(Xn,d)))}}}qe-=1}}return e.fallbackRoute?A.call(e.fallbackRoute,this,l,c,e):null}var kG=function(i,r,n){for(var e=CG(r),t=lk(n,e),a=ck(n,e),s=fk(n,e),u=new OG(e).build(n.graph.model,n.cell),l=i.map(function(z){return Pt.create(z)}),c=[],f=s,d,v,m=0,y=l.length;m<=y;m+=1){var C=null;if(d=v||t,v=l[m],v==null){v=a;var O=n.cell,x=O.getSourceCellId()==null||O.getTargetCellId()==null;if(x&&typeof e.draggingRouter=="function"){var T=d===t?s:d,L=v.getOrigin();C=A.call(e.draggingRouter,n,T,L,e)}}if(C==null&&(C=PG(n,d,v,u,e)),C===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),A.call(e.fallbackRouter,this,i,e,n);var _=C[0];_&&_.equals(f)&&C.shift(),f=C[C.length-1]||f,c.push.apply(c,Object(We.a)(C))}return c},gk=function(i,r,n){return A.call(kG,this,i,Object.assign(Object.assign({},bG),r),n)},DG={maxDirectionChange:45,directions:function(){var i=yh(this.step,this),r=yh(this.cost,this),n=Math.ceil(Math.sqrt(i*i<<1));return[{cost:r,offsetX:i,offsetY:0},{cost:n,offsetX:i,offsetY:i},{cost:r,offsetX:0,offsetY:i},{cost:n,offsetX:-i,offsetY:i},{cost:r,offsetX:-i,offsetY:0},{cost:n,offsetX:-i,offsetY:-i},{cost:r,offsetX:0,offsetY:-i},{cost:n,offsetX:i,offsetY:-i}]},fallbackRoute:function(i,r,n){var e=i.theta(r),t=[],a={x:r.x,y:i.y},s={x:i.x,y:r.y};if(e%180>90){var u=a;a=s,s=u}var l=e%90<45?a:s,c=new Sa(i,l),f=90*Math.ceil(e/90),d=Pt.fromPolar(c.squaredLength(),Mi.toRad(f+135),l),v=new Sa(r,d),m=c.intersectsWithLine(v),y=m||r,C=m?y:i,O=360/n.directions.length,x=C.theta(r),T=Mi.normalize(x+O/2),L=O*Math.floor(T/O);return n.previousDirectionAngle=L,y&&t.push(y.round()),t.push(r),t}},IG=function(i,r,n){return A.call(gk,this,i,Object.assign(Object.assign({},DG),r),n)},RG=function(i,r,n){var e=r.offset||32,t=r.min==null?16:r.min,a=0,s=r.direction,u=n.sourceBBox,l=n.targetBBox,c=u.getCenter(),f=l.getCenter();if(typeof e=="number"&&(a=e),s==null){var d=l.left-u.right,v=l.top-u.bottom;d>=0&&v>=0?s=d>=v?"L":"T":d<=0&&v>=0?(d=u.left-l.right,d>=0?s=d>=v?"R":"T":s="T"):d>=0&&v<=0?(v=u.top-l.bottom,v>=0?s=d>=v?"L":"B":s="L"):(d=u.left-l.right,v=u.top-l.bottom,d>=0&&v>=0?s=d>=v?"R":"B":d<=0&&v>=0?s="B":d>=0&&v<=0?s="R":s=Math.abs(d)>Math.abs(v)?"R":"B")}s==="H"?s=f.x-c.x>=0?"L":"R":s==="V"&&(s=f.y-c.y>=0?"T":"B"),e==="center"&&(s==="L"?a=(l.left-u.right)/2:s==="R"?a=(u.left-l.right)/2:s==="T"?a=(l.top-u.bottom)/2:s==="B"&&(a=(u.top-l.bottom)/2));var m,y,C,O=s==="L"||s==="R";if(O){if(f.y===c.y)return Object(We.a)(i);C=s==="L"?1:-1,m="x",y="width"}else{if(f.x===c.x)return Object(We.a)(i);C=s==="T"?1:-1,m="y",y="height"}var x=c.clone(),T=f.clone();if(x[m]+=C*(u[y]/2+a),T[m]-=C*(l[y]/2+a),O){var L=x.x,_=T.x,z=u.width/2+t,Q=l.width/2+t;f.x>c.x?_<=L&&(x.x=Math.max(_,c.x+z),T.x=Math.min(L,f.x-Q)):_>=L&&(x.x=Math.min(_,c.x-z),T.x=Math.max(L,f.x+Q))}else{var q=x.y,ye=T.y,Ce=u.height/2+t,Ae=l.height/2+t;f.y>c.y?ye<=q&&(x.y=Math.max(ye,c.y+Ce),T.y=Math.min(q,f.y-Ae)):ye>=q&&(x.y=Math.min(ye,c.y-Ce),T.y=Math.max(q,f.y+Ae))}return[x.toJSON()].concat(Object(We.a)(i),[T.toJSON()])};function qp(o,i){if(i!=null&&i!==!1){var r=typeof i=="boolean"?0:i;if(r>0){var n=Pt.create(o[1]).move(o[2],r),e=Pt.create(o[1]).move(o[0],r);return[n.toJSON()].concat(Object(We.a)(o),[e.toJSON()])}{var t=o[1];return[Object.assign({},t)].concat(Object(We.a)(o),[Object.assign({},t)])}}return o}var NG=function(i,r,n){var e=r.width||50,t=r.height||80,a=t/2,s=r.angle||"auto",u=n.sourceAnchor,l=n.targetAnchor,c=n.sourceBBox,f=n.targetBBox;if(u.equals(l)){var d=function(Kn){var zn=Mi.toRad(Kn),An=Math.sin(zn),br=Math.cos(zn),sn=new Pt(u.x+br*e,u.y+An*e),Xn=new Pt(sn.x-br*a,sn.y-An*a),dr=Xn.clone().rotate(-90,sn),ga=Xn.clone().rotate(90,sn);return[dr.toJSON(),sn.toJSON(),ga.toJSON()]},v=function(Kn){var zn=u.clone().move(Kn,-1),An=new Sa(zn,Kn);return!c.containsPoint(Kn)&&!c.intersectsWithLine(An)},m=[0,90,180,270,45,135,225,315];if(typeof s=="number")return qp(d(s),r.merge);var y=c.getCenter();if(y.equals(u))return qp(d(0),r.merge);var C=y.angleBetween(u,y.clone().translate(1,0)),O=d(C);if(v(O[1]))return qp(O,r.merge);for(var x=1,T=m.length;x<T;x+=1)if(O=d(C+m[x]),v(O[1]))return qp(O,r.merge);return qp(O,r.merge)}{var L=new Sa(u,l),_=L.parallel(-e),z=_.getCenter(),Q=_.start.clone().move(_.end,a),q=_.end.clone().move(_.start,a),ye=L.parallel(-1),Ce=new Sa(ye.start,z),Ae=new Sa(ye.end,z);if((c.containsPoint(z)||f.containsPoint(z)||c.intersectsWithLine(Ce)||c.intersectsWithLine(Ae)||f.intersectsWithLine(Ce)||f.intersectsWithLine(Ae))&&(_=L.parallel(e),z=_.getCenter(),Q=_.start.clone().move(_.end,a),q=_.end.clone().move(_.start,a)),r.merge){var Pe=new Sa(u,l),qe=new Sa(z,Pe.center).setLength(Number.MAX_SAFE_INTEGER),lt=c.intersectsWithLine(qe),ze=f.intersectsWithLine(qe),ht=lt?Array.isArray(lt)?lt:[lt]:[];ze&&(Array.isArray(ze)?ht.push.apply(ht,Object(We.a)(ze)):ht.push(ze));var nn=Pe.center.closest(ht);nn?(n.sourceAnchor=nn.clone(),n.targetAnchor=nn.clone()):(n.sourceAnchor=Pe.center.clone(),n.targetAnchor=Pe.center.clone())}return qp([Q.toJSON(),z.toJSON(),q.toJSON()],r.merge)}},Od;(function(o){o.presets=Z,o.registry=Xo.create({type:"router"}),o.registry.register(o.presets,!0)})(Od||(Od={}));var jG=function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=[i].concat(Object(We.a)(n),[r]),a=new ku(t),s=new pi(a);return e.raw?s:s.serialize()},LG=function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=n.length===3?0:1,a=Pt.create(n[0+t]),s=Pt.create(n[2+t]),u=Pt.create(n[1+t]);if(!Pt.equals(i,r)){var l=new Pt((i.x+r.x)/2,(i.y+r.y)/2),c=l.angleBetween(Pt.create(i).rotate(90,l),u);c>1&&(a.rotate(180-c,l),s.rotate(180-c,l),u.rotate(180-c,l))}var f=`
     M `.concat(i.x," ").concat(i.y,`
     Q `).concat(a.x," ").concat(a.y," ").concat(u.x," ").concat(u.y,`
     Q `).concat(s.x," ").concat(s.y," ").concat(r.x," ").concat(r.y,`
  `);return e.raw?pi.parse(f):f},_G=function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t=new pi;t.appendSegment(pi.createSegment("M",i));for(var a=1/3,s=2/3,u=e.radius||10,l,c,f=0,d=n.length;f<d;f+=1){var v=Pt.create(n[f]),m=n[f-1]||i,y=n[f+1]||r;l=c||v.distance(m)/2,c=v.distance(y)/2;var C=-Math.min(u,l),O=-Math.min(u,c),x=v.clone().move(m,C).round(),T=v.clone().move(y,O).round(),L=new Pt(a*x.x+s*v.x,s*v.y+a*x.y),_=new Pt(a*T.x+s*v.x,s*v.y+a*T.y);t.appendSegment(pi.createSegment("L",x)),t.appendSegment(pi.createSegment("C",L,_,T))}return t.appendSegment(pi.createSegment("L",r)),e.raw?t:t.serialize()},FG=function(i,r,n){var e=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},t,a=e.direction;if(n&&n.length!==0){var s=[i].concat(Object(We.a)(n),[r]),u=jl.throughPoints(s);t=new pi(u)}else if(t=new pi,t.appendSegment(pi.createSegment("M",i)),a||(a=Math.abs(i.x-r.x)>=Math.abs(i.y-r.y)?"H":"V"),a==="H"){var l=(i.x+r.x)/2;t.appendSegment(pi.createSegment("C",l,i.y,l,r.y,r.x,r.y))}else{var c=(i.y+r.y)/2;t.appendSegment(pi.createSegment("C",i.x,c,r.x,c,r.x,r.y))}return e.raw?t:t.serialize()},mk=1,S1=1/3,A1=2/3;function BG(o){var i=o.graph._jumpOverUpdateList;if(i==null&&(i=o.graph._jumpOverUpdateList=[],o.graph.on("cell:mouseup",function(){for(var n=o.graph._jumpOverUpdateList,e=0;e<n.length;e+=1)n[e].update()}),o.graph.on("model:reseted",function(){i=o.graph._jumpOverUpdateList=[]})),i.indexOf(o)<0){i.push(o);var r=function(){return i.splice(i.indexOf(o),1)};o.cell.once("change:connector",r),o.cell.once("removed",r)}}function sS(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=[o].concat(Object(We.a)(r),[i]),e=[];return n.forEach(function(t,a){var s=n[a+1];s!=null&&e.push(new Sa(t,s))}),e}function GG(o,i){var r=[];return i.forEach(function(n){var e=o.intersectsWithLine(n);e&&r.push(e)}),r}function yk(o,i){return new Sa(o,i).squaredLength()}function zG(o,i,r){return i.reduce(function(n,e,t){if(M1.includes(e))return n;var a=n.pop()||o,s=Pt.create(e).move(a.start,-r),u=Pt.create(e).move(a.start,+r),l=i[t+1];if(l!=null){var c=u.distance(l);c<=r&&(u=l.move(a.start,c),M1.push(l))}else{var f=s.distance(a.end);if(f<r*2+mk)return n.push(a),n}var d=u.distance(a.start);if(d<r*2+mk)return n.push(a),n;var v=new Sa(s,u);return s0.push(v),n.push(new Sa(a.start,s),v,new Sa(u,a.end)),n},[])}function bk(o,i,r,n){var e=new pi,t;return t=pi.createSegment("M",o[0].start),e.appendSegment(t),o.forEach(function(a,s){if(s0.includes(a)){var u,l,c,f;if(r==="arc"){u=-90,l=a.start.diff(a.end);var d=l.x<0||l.x===0&&l.y<0;d&&(u+=180);var v=a.getCenter(),m=new Sa(v,a.end).rotate(u,v),y;y=new Sa(a.start,v),c=y.pointAt(2/3).rotate(u,a.start),f=m.pointAt(1/3).rotate(-u,m.end),t=pi.createSegment("C",c,f,m.end),e.appendSegment(t),y=new Sa(v,a.end),c=m.pointAt(1/3).rotate(u,m.end),f=y.pointAt(1/3).rotate(-u,a.end),t=pi.createSegment("C",c,f,a.end),e.appendSegment(t)}else if(r==="gap")t=pi.createSegment("M",a.end),e.appendSegment(t);else if(r==="cubic"){u=a.start.theta(a.end);var C=i*.6,O=i*1.35;l=a.start.diff(a.end);var x=l.x<0||l.x===0&&l.y<0;x&&(O*=-1),c=new Pt(a.start.x+C,a.start.y+O).rotate(u,a.start),f=new Pt(a.end.x-C,a.end.y+O).rotate(u,a.end),t=pi.createSegment("C",c,f,a.end),e.appendSegment(t)}}else{var T=o[s+1];n===0||!T||s0.includes(T)?(t=pi.createSegment("L",a.end),e.appendSegment(t)):UG(n,e,a.end,a.start,T.end)}}),e}function UG(o,i,r,n,e){var t=r.distance(n)/2,a=r.distance(e)/2,s=-Math.min(o,t),u=-Math.min(o,a),l=r.clone().move(n,s).round(),c=r.clone().move(e,u).round(),f=new Pt(S1*l.x+A1*r.x,A1*r.y+S1*l.y),d=new Pt(S1*c.x+A1*r.x,A1*r.y+S1*c.y),v;v=pi.createSegment("L",l),i.appendSegment(v),v=pi.createSegment("C",f,d,c),i.appendSegment(v)}var s0,M1,VG=function(i,r,n){var e=this,t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};s0=[],M1=[],BG(this);var a=t.size||5,s=t.type||"arc",u=t.radius||0,l=t.ignoreConnectors||["smooth"],c=this.graph,f=c.model,d=f.getEdges();if(d.length===1)return bk(sS(i,r,n),a,s,u);var v=this.cell,m=d.indexOf(v),y=c.options.connecting.connector||{},C=d.filter(function(z,Q){var q=z.getConnector()||y;return l.includes(q.name)?!1:Q>m?q.name!=="jumpover":!0}),O=C.map(function(z){return c.renderer.findViewByCell(z)}),x=sS(i,r,n),T=O.map(function(z){return z==null?[]:z===e?x:sS(z.sourcePoint,z.targetPoint,z.routePoints)}),L=[];x.forEach(function(z){var Q=C.reduce(function(q,ye,Ce){if(ye!==v){var Ae=GG(z,T[Ce]);q.push.apply(q,Object(We.a)(Ae))}return q},[]).sort(function(q,ye){return yk(z.start,q)-yk(z.start,ye)});Q.length>0?L.push.apply(L,Object(We.a)(zG(z,Q,a))):L.push(z)});var _=bk(L,a,s,u);return s0=[],M1=[],t.raw?_:_.serialize()},bh;(function(o){o.presets=fe,o.registry=Xo.create({type:"connector"}),o.registry.register(o.presets,!0)})(bh||(bh={}));var HG=Xo.create,uS=function(){function o(i){Object(me.a)(this,o),this.cell=i,this.ids={},this.cache={}}return Object(ue.a)(o,[{key:"get",value:function(){return Object.keys(this.ids)}},{key:"start",value:function(r,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/",s=this.cell.getPropByPath(r),u=p.defaults(t,o.defaultOptions),l=this.getTiming(u.timing),c=this.getInterp(u.interp,s,n),f=0,d=Array.isArray(r)?r.join(a):r,v=Array.isArray(r)?r:r.split(a),m=function y(){var C=new Date().getTime();f===0&&(f=C);var O=C-f,x=O/u.duration;x<1?e.ids[d]=M.requestAnimationFrame(y):x=1;var T=c(l(x));e.cell.setPropByPath(v,T),t.progress&&t.progress(Object.assign({progress:x,currentValue:T},e.getArgs(d))),x===1&&(e.cell.notify("transition:end",e.getArgs(d)),e.cell.notify("transition:complete",e.getArgs(d)),t.complete&&t.complete(e.getArgs(d)),e.cell.notify("transition:finish",e.getArgs(d)),t.finish&&t.finish(e.getArgs(d)),e.clean(d))};return setTimeout(function(){e.stop(r,void 0,a),e.cache[d]={startValue:s,targetValue:n,options:u},e.ids[d]=M.requestAnimationFrame(m),e.cell.notify("transition:begin",e.getArgs(d)),e.cell.notify("transition:start",e.getArgs(d)),t.start&&t.start(e.getArgs(d))},t.delay),this.stop.bind(this,r,a,t)}},{key:"stop",value:function(r){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/",a=Array.isArray(r)?r:r.split(t);return Object.keys(this.ids).filter(function(s){return p.isEqual(a,s.split(t).slice(0,a.length))}).forEach(function(s){M.cancelAnimationFrame(n.ids[s]);var u=n.cache[s],l=n.getArgs(s),c=Object.assign(Object.assign({},u.options),e),f=c.jumpedToEnd;f&&u.targetValue!=null&&(n.cell.setPropByPath(s,u.targetValue),n.cell.notify("transition:end",Object.assign({},l)),n.cell.notify("transition:complete",Object.assign({},l)),c.complete&&c.complete(Object.assign({},l)));var d=Object.assign({jumpedToEnd:f},l);n.cell.notify("transition:stop",Object.assign({},d)),c.stop&&c.stop(Object.assign({},d)),n.cell.notify("transition:finish",Object.assign({},l)),c.finish&&c.finish(Object.assign({},l)),n.clean(s)}),this}},{key:"clean",value:function(r){delete this.ids[r],delete this.cache[r]}},{key:"getTiming",value:function(r){return typeof r=="string"?Tv[r]:r}},{key:"getInterp",value:function(r,n,e){return r?r(n,e):typeof e=="number"?Pv.number(n,e):typeof e=="string"?e[0]==="#"?Pv.color(n,e):Pv.unit(n,e):Pv.object(n,e)}},{key:"getArgs",value:function(r){var n=this.cache[r];return{path:r,startValue:n.startValue,targetValue:n.targetValue,cell:this.cell}}}]),o}();(function(o){o.defaultOptions={delay:10,duration:100,timing:"linear"}})(uS||(uS={}));var WG=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Ck=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(me.a)(this,r),n=i.call(this),n.pending=!1,n.changing=!1,n.data={},n.mutate(p.cloneDeep(e)),n.changed={},n}return Object(ue.a)(r,[{key:"mutate",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.unset===!0,u=a.silent===!0,l=[],c=this.changing;this.changing=!0,c||(this.previous=p.cloneDeep(this.data),this.changed={});var f=this.data,d=this.previous,v=this.changed;if(Object.keys(e).forEach(function(m){var y=m,C=e[y];p.isEqual(f[y],C)||l.push(y),p.isEqual(d[y],C)?delete v[y]:v[y]=C,s?delete f[y]:f[y]=C}),!u&&l.length>0&&(this.pending=!0,this.pendingOptions=a,l.forEach(function(m){t.emit("change:*",{key:m,options:a,store:t,current:f[m],previous:d[m]})})),c)return this;if(!u)for(;this.pending;)this.pending=!1,this.emit("changed",{current:f,previous:d,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}},{key:"get",value:function(e,t){if(e==null)return this.data;var a=this.data[e];return a==null?t:a}},{key:"getPrevious",value:function(e){if(this.previous){var t=this.previous[e];return t==null?void 0:t}}},{key:"set",value:function(e,t,a){return e!=null&&(typeof e=="object"?this.mutate(e,t):this.mutate(Object(Re.a)({},e,t),a)),this}},{key:"remove",value:function(e,t){var a=void 0,s={},u;if(typeof e=="string")s[e]=a,u=t;else if(Array.isArray(e))e.forEach(function(c){return s[c]=a}),u=t;else{for(var l in this.data)s[l]=a;u=e}return this.mutate(s,Object.assign(Object.assign({},u),{unset:!0})),this}},{key:"getByPath",value:function(e){return p.getByPath(this.data,e,"/")}},{key:"setByPath",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s="/",u=Array.isArray(e)?Object(We.a)(e):e.split(s),l=Array.isArray(e)?e.join(s):e,c=u[0],f=u.length;if(a.propertyPath=l,a.propertyValue=t,a.propertyPathArray=u,f===1)this.set(c,t,a);else{for(var d={},v=d,m=c,y=1;y<f;y+=1){var C=u[y],O=Number.isFinite(Number(C));v=v[m]=O?[]:{},m=C}p.setByPath(d,u,t,s);var x=p.cloneDeep(this.data);a.rewrite&&p.unsetByPath(x,e,s);var T=p.merge(x,d);this.set(c,T[c],a)}return this}},{key:"removeByPath",value:function(e,t){var a=Array.isArray(e)?e:e.split("/"),s=a[0];if(a.length===1)this.remove(s,t);else{var u=a.slice(1),l=p.cloneDeep(this.get(s));l&&p.unsetByPath(l,u),this.set(s,l,t)}return this}},{key:"hasChanged",value:function(e){return e==null?Object.keys(this.changed).length>0:e in this.changed}},{key:"getChanges",value:function(e){if(e==null)return this.hasChanged()?p.cloneDeep(this.changed):null;var t=this.changing?this.previous:this.data,a={},s;for(var u in e){var l=e[u];p.isEqual(t[u],l)||(a[u]=l,s=!0)}return s?p.cloneDeep(a):null}},{key:"toJSON",value:function(){return p.cloneDeep(this.data)}},{key:"clone",value:function(){var e=this.constructor;return new e(this.data)}},{key:"dispose",value:function(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}]),r}(yu);WG([yu.dispose()],Ck.prototype,"dispose",null);var $G=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Ek=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Ui=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(me.a)(this,n),e=r.call(this);var a=e.constructor,s=a.getDefaults(!0),u=p.merge({},e.preprocess(s),e.preprocess(t));return e.id=u.id||S.uuid(),e.store=new Ck(u),e.animation=new uS(Object(rs.a)(e)),e.setup(),e.init(),e.postprocess(t),e}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"init",value:function(){}},{key:"model",get:function(){return this._model}},{key:"model",set:function(t){this._model!==t&&(this._model=t)}},{key:"preprocess",value:function(t,a){var s=t.id,u=this.constructor,l=u.applyPropHooks(this,t);return s==null&&a!==!0&&(l.id=S.uuid()),l}},{key:"postprocess",value:function(t){}},{key:"setup",value:function(){var t=this;this.store.on("change:*",function(a){var s=a.key,u=a.current,l=a.previous,c=a.options;t.notify("change:*",{key:s,options:c,current:u,previous:l,cell:t}),t.notify("change:".concat(s),{options:c,current:u,previous:l,cell:t});var f=s;(f==="source"||f==="target")&&t.notify("change:terminal",{type:f,current:u,previous:l,options:c,cell:t})}),this.store.on("changed",function(a){var s=a.options;return t.notify("changed",{options:s,cell:t})})}},{key:"notify",value:function(t,a){this.trigger(t,a);var s=this.model;return s&&(s.notify("cell:".concat(t),a),this.isNode()?s.notify("node:".concat(t),Object.assign(Object.assign({},a),{node:this})):this.isEdge()&&s.notify("edge:".concat(t),Object.assign(Object.assign({},a),{edge:this}))),this}},{key:"isNode",value:function(){return!1}},{key:"isEdge",value:function(){return!1}},{key:"isSameStore",value:function(t){return this.store===t.store}},{key:"view",get:function(){return this.store.get("view")}},{key:"shape",get:function(){return this.store.get("shape","")}},{key:"getProp",value:function(t,a){return t==null?this.store.get():this.store.get(t,a)}},{key:"setProp",value:function(t,a,s){if(typeof t=="string")this.store.set(t,a,s);else{var u=this.preprocess(t,!0);this.store.set(p.merge({},this.getProp(),u),a),this.postprocess(t)}return this}},{key:"removeProp",value:function(t,a){return typeof t=="string"||Array.isArray(t)?this.store.removeByPath(t,a):this.store.remove(a),this}},{key:"hasChanged",value:function(t){return t==null?this.store.hasChanged():this.store.hasChanged(t)}},{key:"getPropByPath",value:function(t){return this.store.getByPath(t)}},{key:"setPropByPath",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model&&(t==="children"?this._children=a?a.map(function(l){return s.model.getCell(l)}).filter(function(l){return l!=null}):null:t==="parent"&&(this._parent=a?this.model.getCell(a):null)),this.store.setByPath(t,a,u),this}},{key:"removePropByPath",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Array.isArray(t)?t:t.split("/");return s[0]==="attrs"&&(a.dirty=!0),this.store.removeByPath(s,a),this}},{key:"prop",value:function(t,a,s){return t==null?this.getProp():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getPropByPath(t):a==null?this.removePropByPath(t,s||{}):this.setPropByPath(t,a,s||{}):this.setProp(t,a||{})}},{key:"previous",value:function(t){return this.store.getPrevious(t)}},{key:"zIndex",get:function(){return this.getZIndex()}},{key:"zIndex",set:function(t){t==null?this.removeZIndex():this.setZIndex(t)}},{key:"getZIndex",value:function(){return this.store.get("zIndex")}},{key:"setZIndex",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("zIndex",t,a),this}},{key:"removeZIndex",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("zIndex",t),this}},{key:"toFront",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.model;if(a){var s=a.getMaxZIndex(),u;t.deep?(u=this.getDescendants({deep:!0,breadthFirst:!0}),u.unshift(this)):u=[this],s=s-u.length+1;var l=a.total(),c=a.indexOf(this)!==l-u.length;c||(c=u.some(function(f,d){return f.getZIndex()!==s+d})),c&&this.batchUpdate("to-front",function(){s+=u.length,u.forEach(function(f,d){f.setZIndex(s+d,t)})})}return this}},{key:"toBack",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.model;if(a){var s=a.getMinZIndex(),u;t.deep?(u=this.getDescendants({deep:!0,breadthFirst:!0}),u.unshift(this)):u=[this];var l=a.indexOf(this)!==0;l||(l=u.some(function(c,f){return c.getZIndex()!==s+f})),l&&this.batchUpdate("to-back",function(){s-=u.length,u.forEach(function(c,f){c.setZIndex(s+f,t)})})}return this}},{key:"markup",get:function(){return this.getMarkup()}},{key:"markup",set:function(t){t==null?this.removeMarkup():this.setMarkup(t)}},{key:"getMarkup",value:function(){var t=this.store.get("markup");if(t==null){var a=this.constructor;t=a.getMarkup()}return t}},{key:"setMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("markup",t,a),this}},{key:"removeMarkup",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("markup",t),this}},{key:"attrs",get:function(){return this.getAttrs()}},{key:"attrs",set:function(t){t==null?this.removeAttrs():this.setAttrs(t)}},{key:"getAttrs",value:function(){var t=this.store.get("attrs");return t?Object.assign({},t):{}}},{key:"setAttrs",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null)this.removeAttrs(s);else{var u=function(f){return a.store.set("attrs",f,s)};if(s.overwrite===!0)u(t);else{var l=this.getAttrs();s.deep===!1?u(Object.assign(Object.assign({},l),t)):u(p.merge({},l,t))}}return this}},{key:"replaceAttrs",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(t,Object.assign(Object.assign({},a),{overwrite:!0}))}},{key:"updateAttrs",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setAttrs(t,Object.assign(Object.assign({},a),{deep:!1}))}},{key:"removeAttrs",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("attrs",t),this}},{key:"getAttrDefinition",value:function(t){if(!t)return null;var a=this.constructor,s=a.getAttrHooks()||{},u=s[t]||zc.registry.get(t);if(!u){var l=S.camelCase(t);u=s[l]||zc.registry.get(l)}return u||null}},{key:"getAttrByPath",value:function(t){return t==null||t===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))}},{key:"setAttrByPath",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setPropByPath(this.prefixAttrPath(t),a,s),this}},{key:"removeAttrByPath",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePropByPath(this.prefixAttrPath(t),a),this}},{key:"prefixAttrPath",value:function(t){return Array.isArray(t)?["attrs"].concat(t):"attrs/".concat(t)}},{key:"attr",value:function(t,a,s){return t==null?this.getAttrByPath():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getAttrByPath(t):a==null?this.removeAttrByPath(t,s||{}):this.setAttrByPath(t,a,s||{}):this.setAttrs(t,a||{})}},{key:"visible",get:function(){return this.isVisible()}},{key:"visible",set:function(t){this.setVisible(t)}},{key:"setVisible",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("visible",t,a),this}},{key:"isVisible",value:function(){return this.store.get("visible")!==!1}},{key:"show",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()||this.setVisible(!0,t),this}},{key:"hide",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.isVisible()&&this.setVisible(!1,t),this}},{key:"toggleVisible",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=typeof t=="boolean"?t:!this.isVisible(),u=typeof t=="boolean"?a:t;return s?this.show(u):this.hide(u),this}},{key:"data",get:function(){return this.getData()}},{key:"data",set:function(t){this.setData(t)}},{key:"getData",value:function(){return this.store.get("data")}},{key:"setData",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null)this.removeData(s);else{var u=function(f){return a.store.set("data",f,s)};if(s.overwrite===!0)u(t);else{var l=this.getData();s.deep===!1?u(typeof t=="object"?Object.assign(Object.assign({},l),t):t):u(p.merge({},l,t))}}return this}},{key:"replaceData",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(t,Object.assign(Object.assign({},a),{overwrite:!0}))}},{key:"updateData",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.setData(t,Object.assign(Object.assign({},a),{deep:!1}))}},{key:"removeData",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("data",t),this}},{key:"parent",get:function(){return this.getParent()}},{key:"children",get:function(){return this.getChildren()}},{key:"getParentId",value:function(){return this.store.get("parent")}},{key:"getParent",value:function(){var t=this.getParentId();if(t&&this.model){var a=this.model.getCell(t);return this._parent=a,a}return null}},{key:"getChildren",value:function(){var t=this,a=this.store.get("children");if(a&&a.length&&this.model){var s=a.map(function(u){var l;return(l=t.model)===null||l===void 0?void 0:l.getCell(u)}).filter(function(u){return u!=null});return this._children=s,Object(We.a)(s)}return null}},{key:"hasParent",value:function(){return this.parent!=null}},{key:"isParentOf",value:function(t){return t!=null&&t.getParent()===this}},{key:"isChildOf",value:function(t){return t!=null&&this.getParent()===t}},{key:"eachChild",value:function(t,a){return this.children&&this.children.forEach(t,a),this}},{key:"filterChild",value:function(t,a){return this.children?this.children.filter(t,a):[]}},{key:"getChildCount",value:function(){return this.children==null?0:this.children.length}},{key:"getChildIndex",value:function(t){return this.children==null?-1:this.children.indexOf(t)}},{key:"getChildAt",value:function(t){return this.children!=null&&t>=0?this.children[t]:null}},{key:"getAncestors",value:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=[],s=this.getParent();s;)a.push(s),s=t.deep!==!1?s.getParent():null;return a}},{key:"getDescendants",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.deep!==!1){if(t.breadthFirst){for(var a=[],s=this.getChildren()||[];s.length>0;){var u=s.shift(),l=u.getChildren();a.push(u),l&&s.push.apply(s,Object(We.a)(l))}return a}{var c=this.getChildren()||[];return c.forEach(function(f){c.push.apply(c,Object(We.a)(f.getDescendants(t)))}),c}}return this.getChildren()||[]}},{key:"isDescendantOf",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null)return!1;if(a.deep!==!1){for(var s=this.getParent();s;){if(s===t)return!0;s=s.getParent()}return!1}return this.isChildOf(t)}},{key:"isAncestorOf",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t==null?!1:t.isDescendantOf(this,a)}},{key:"contains",value:function(t){return this.isAncestorOf(t)}},{key:"getCommonAncestor",value:function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return n.getCommonAncestor.apply(n,[this].concat(a))}},{key:"setParent",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._parent=t,t?this.store.set("parent",t.id,a):this.store.remove("parent",a),this}},{key:"setChildren",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._children=t,t!=null?this.store.set("children",t.map(function(s){return s.id}),a):this.store.remove("children",a),this}},{key:"unembed",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.children;if(s!=null&&t!=null){var u=this.getChildIndex(t);u!==-1&&(s.splice(u,1),t.setParent(null,a),this.setChildren(s,a))}return this}},{key:"embed",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.addTo(this,a),this}},{key:"addTo",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n.isCell(t)?t.addChild(this,a):t.addCell(this,a),this}},{key:"insertTo",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.insertChild(this,a,s),this}},{key:"addChild",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertChild(t,void 0,a)}},{key:"insertChild",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null&&t!==this){var u=t.getParent(),l=this!==u,c=a;if(c==null&&(c=this.getChildCount(),l||(c-=1)),u){var f=u.getChildren();if(f){var d=f.indexOf(t);d>=0&&(t.setParent(null,s),f.splice(d,1),u.setChildren(f,s))}}var v=this.children;if(v==null?(v=[],v.push(t)):v.splice(c,0,t),t.setParent(this,s),this.setChildren(v,s),l&&this.model){var m=this.model.getIncomingEdges(this),y=this.model.getOutgoingEdges(this);m&&m.forEach(function(C){return C.updateParent(s)}),y&&y.forEach(function(C){return C.updateParent(s)})}this.model&&this.model.addCell(t,s)}return this}},{key:"removeFromParent",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getParent();if(a!=null){var s=a.getChildIndex(this);a.removeChildAt(s,t)}return this}},{key:"removeChild",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getChildIndex(t);return this.removeChildAt(s,a)}},{key:"removeChildAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getChildAt(t),u=this.children;return u!=null&&s!=null&&(this.unembed(s,a),s.remove(a)),s}},{key:"remove",value:function(){var t=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.batchUpdate("remove",function(){var s=t.getParent();s&&s.removeChild(t,a),a.deep!==!1&&t.eachChild(function(u){return u.remove(a)}),t.model&&t.model.removeCell(t,a)}),this}},{key:"transition",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"/";return this.animation.start(t,a,s,u)}},{key:"stopTransition",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"/";return this.animation.stop(t,a,s),this}},{key:"getTransitions",value:function(){return this.animation.get()}},{key:"translate",value:function(t,a,s){return this}},{key:"scale",value:function(t,a,s,u){return this}},{key:"addTools",value:function(t,a,s){var u=Array.isArray(t)?t:[t],l=typeof a=="string"?a:null,c=typeof a=="object"?a:typeof s=="object"?s:{};if(c.reset)return this.setTools({name:l,items:u,local:c.local},c);var f=p.cloneDeep(this.getTools());if(f==null||l==null||f.name===l)return f==null&&(f={}),f.items||(f.items=[]),f.name=l,f.items=[].concat(Object(We.a)(f.items),Object(We.a)(u)),this.setTools(Object.assign({},f),c)}},{key:"setTools",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t==null?this.removeTools():this.store.set("tools",n.normalizeTools(t),a),this}},{key:"getTools",value:function(){return this.store.get("tools")}},{key:"removeTools",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("tools",t),this}},{key:"hasTools",value:function(t){var a=this.getTools();return a==null?!1:t==null?!0:a.name===t}},{key:"hasTool",value:function(t){var a=this.getTools();return a==null?!1:a.items.some(function(s){return typeof s=="string"?s===t:s.name===t})}},{key:"removeTool",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=p.cloneDeep(this.getTools());if(s){var u=!1,l=s.items.slice(),c=function(y){l.splice(y,1),u=!0};if(typeof t=="number")c(t);else for(var f=l.length-1;f>=0;f-=1){var d=l[f],v=typeof d=="string"?d===t:d.name===t;v&&c(f)}u&&(s.items=l,this.setTools(s,a))}return this}},{key:"getBBox",value:function(t){return new Br}},{key:"getConnectionPoint",value:function(t,a){return new Pt}},{key:"toJSON",value:function(){var t=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=Object.assign({},this.store.get()),u=Object.prototype.toString,l=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!s.shape){var c=this.constructor;throw new Error("Unable to serialize ".concat(l,' missing "shape" prop, check the ').concat(l,' "').concat(c.name||u.call(c),'"'))}var f=this.constructor,d=a.diff===!0,v=s.attrs||{},m=f.getDefaults(!0),y=d?this.preprocess(m,!0):m,C=y.attrs||{},O={};Object.keys(s).forEach(function(L){var _=s[L];if(_!=null&&!Array.isArray(_)&&typeof _=="object"&&!p.isPlainObject(_))throw new Error("Can only serialize ".concat(l,' with plain-object props, but got a "').concat(u.call(_),'" type of key "').concat(L,'" on ').concat(l,' "').concat(t.id,'"'));if(L!=="attrs"&&L!=="shape"&&d){var z=y[L];p.isEqual(_,z)&&delete s[L]}}),Object.keys(v).forEach(function(L){var _=v[L],z=C[L];Object.keys(_).forEach(function(Q){var q=_[Q],ye=z?z[Q]:null;q!=null&&typeof q=="object"&&!Array.isArray(q)?Object.keys(q).forEach(function(Ce){var Ae=q[Ce];if(z==null||ye==null||!p.isObject(ye)||!p.isEqual(ye[Ce],Ae)){O[L]==null&&(O[L]={}),O[L][Q]==null&&(O[L][Q]={});var Pe=O[L][Q];Pe[Ce]=Ae}}):(z==null||!p.isEqual(ye,q))&&(O[L]==null&&(O[L]={}),O[L][Q]=q)})});var x=Object.assign(Object.assign({},s),{attrs:p.isEmpty(O)?void 0:O});x.attrs==null&&delete x.attrs;var T=x;return T.angle===0&&delete T.angle,p.cloneDeep(T)}},{key:"clone",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!t.deep){var a=Object.assign({},this.store.get());t.keepId||delete a.id,delete a.parent,delete a.children;var s=this.constructor;return new s(a)}var u=n.deepClone(this);return u[this.id]}},{key:"findView",value:function(t){return t.renderer.findViewByCell(this)}},{key:"startBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return this.notify("batch:start",{name:t,data:a,cell:this}),s&&s.startBatch(t,Object.assign(Object.assign({},a),{cell:this})),this}},{key:"stopBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.model;return s&&s.stopBatch(t,Object.assign(Object.assign({},a),{cell:this})),this.notify("batch:stop",{name:t,data:a,cell:this}),this}},{key:"batchUpdate",value:function(t,a,s){var u=this.model;this.startBatch(t,s,u);var l=a();return this.stopBatch(t,s,u),l}},{key:"dispose",value:function(){this.removeFromParent(),this.store.dispose()}}],[{key:"config",value:function(t){var a=this,s=t.markup,u=t.propHooks,l=t.attrHooks,c=Ek(t,["markup","propHooks","attrHooks"]);if(s!=null&&(this.markup=s),u)if(this.propHooks=this.propHooks.slice(),Array.isArray(u)){var f;(f=this.propHooks).push.apply(f,Object(We.a)(u))}else typeof u=="function"?this.propHooks.push(u):Object.keys(u).forEach(function(d){var v=u[d];typeof v=="function"&&a.propHooks.push(v)});l&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),l)),this.defaults=p.merge({},this.defaults,c)}},{key:"getMarkup",value:function(){return this.markup}},{key:"getDefaults",value:function(t){return t?this.defaults:p.cloneDeep(this.defaults)}},{key:"getAttrHooks",value:function(){return this.attrHooks}},{key:"applyPropHooks",value:function(t,a){return this.propHooks.reduce(function(s,u){return u?A.call(u,t,s):s},a)}}]),n}(yu,Symbol.toStringTag);Ui.defaults={},Ui.attrHooks={},Ui.propHooks=[],$G([yu.dispose()],Ui.prototype,"dispose",null),function(o){function i(r){return typeof r=="string"?{items:[r]}:Array.isArray(r)?{items:r}:r.items?r:{items:[r]}}o.normalizeTools=i}(Ui||(Ui={})),function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"}o.isCell=i}(Ui||(Ui={})),function(o){function i(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var u=a.filter(function(c){return c!=null}).map(function(c){return c.getAncestors()}).sort(function(c,f){return c.length-f.length}),l=u.shift();return l.find(function(c){return u.every(function(f){return f.includes(c)})})||null}o.getCommonAncestor=i;function r(t){for(var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=null,u=0,l=t.length;u<l;u+=1){var c=t[u],f=c.getBBox(a);if(f){if(c.isNode()){var d=c.getAngle();d!=null&&d!==0&&(f=f.bbox(d))}s=s==null?f:s.union(f)}}return s}o.getCellsBBox=r;function n(t){var a=[t].concat(Object(We.a)(t.getDescendants({deep:!0})));return o.cloneCells(a)}o.deepClone=n;function e(t){var a=B.uniq(t),s=a.reduce(function(u,l){return u[l.id]=l.clone(),u},{});return a.forEach(function(u){var l=s[u.id];if(l.isEdge()){var c=l.getSourceCellId(),f=l.getTargetCellId();c&&s[c]&&l.setSource(Object.assign(Object.assign({},l.getSource()),{cell:s[c].id})),f&&s[f]&&l.setTarget(Object.assign(Object.assign({},l.getTarget()),{cell:s[f].id}))}var d=u.getParent();d&&s[d.id]&&l.setParent(s[d.id]);var v=u.getChildren();if(v&&v.length){var m=v.reduce(function(y,C){return s[C.id]&&y.push(s[C.id]),y},[]);m.length>0&&l.setChildren(m)}}),s}o.cloneCells=e}(Ui||(Ui={})),function(o){o.config({propHooks:function(r){var n=r.tools,e=Ek(r,["tools"]);return n&&(e.tools=o.normalizeTools(n)),e}})}(Ui||(Ui={}));var eg;(function(o){var i,r;function n(a,s){return s?i!=null&&i.exist(a):r!=null&&r.exist(a)}o.exist=n;function e(a){i=a}o.setEdgeRegistry=e;function t(a){r=a}o.setNodeRegistry=t})(eg||(eg={}));var KG=function(){function o(i){Object(me.a)(this,o),this.ports=[],this.groups={},this.init(p.cloneDeep(i))}return Object(ue.a)(o,[{key:"getPorts",value:function(){return this.ports}},{key:"getGroup",value:function(r){return r!=null?this.groups[r]:null}},{key:"getPortsByGroup",value:function(r){return this.ports.filter(function(n){return n.group===r||n.group==null&&r==null})}},{key:"getPortsLayoutByGroup",value:function(r,n){var e=this,t=this.getPortsByGroup(r),a=r?this.getGroup(r):null,s=a?a.position:null,u=s?s.name:null,l;if(u!=null){var c=ph.registry.get(u);if(c==null)return ph.registry.onNotFound(u);l=c}else l=ph.presets.left;var f=t.map(function(m){return m&&m.position&&m.position.args||{}}),d=s&&s.args||{},v=l(f,n,d);return v.map(function(m,y){var C=t[y];return{portLayout:m,portId:C.id,portSize:C.size,portAttrs:C.attrs,labelSize:C.label.size,labelLayout:e.getPortLabelLayout(C,Pt.create(m.position),n)}})}},{key:"init",value:function(r){var n=this,e=r.groups,t=r.items;e!=null&&Object.keys(e).forEach(function(a){n.groups[a]=n.parseGroup(e[a])}),Array.isArray(t)&&t.forEach(function(a){n.ports.push(n.parsePort(a))})}},{key:"parseGroup",value:function(r){return Object.assign(Object.assign({},r),{label:this.getLabel(r,!0),position:this.getPortPosition(r.position,!0)})}},{key:"parsePort",value:function(r){var n=Object.assign({},r),e=this.getGroup(r.group)||{};return n.markup=n.markup||e.markup,n.attrs=p.merge({},e.attrs,n.attrs),n.position=this.createPosition(e,n),n.label=p.merge({},e.label,this.getLabel(n)),n.zIndex=this.getZIndex(e,n),n.size=Object.assign(Object.assign({},e.size),n.size),n}},{key:"getZIndex",value:function(r,n){return typeof n.zIndex=="number"?n.zIndex:typeof r.zIndex=="number"||r.zIndex==="auto"?r.zIndex:"auto"}},{key:"createPosition",value:function(r,n){return p.merge({name:"left",args:{}},r.position,{args:n.args})}},{key:"getPortPosition",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r==null){if(n)return{name:"left",args:{}}}else{if(typeof r=="string")return{name:r,args:{}};if(Array.isArray(r))return{name:"absolute",args:{x:r[0],y:r[1]}};if(typeof r=="object")return r}return{args:{}}}},{key:"getPortLabelPosition",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r==null){if(n)return{name:"left",args:{}}}else{if(typeof r=="string")return{name:r,args:{}};if(typeof r=="object")return r}return{args:{}}}},{key:"getLabel",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=r.label||{};return e.position=this.getPortLabelPosition(e.position,n),e}},{key:"getPortLabelLayout",value:function(r,n,e){var t=r.label.position.name||"left",a=r.label.position.args||{},s=Mv.registry.get(t)||Mv.presets.left;return s?s(n,e,a):null}}]),o}(),T1=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},fo=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(me.a)(this,n),e=r.call(this,t),e.initPorts(),e}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"preprocess",value:function(t,a){var s=t.x,u=t.y,l=t.width,c=t.height,f=T1(t,["x","y","width","height"]);if(s!=null||u!=null){var d=f.position;f.position=Object.assign(Object.assign({},d),{x:s!=null?s:d?d.x:0,y:u!=null?u:d?d.y:0})}if(l!=null||c!=null){var v=f.size;f.size=Object.assign(Object.assign({},v),{width:l!=null?l:v?v.width:0,height:c!=null?c:v?v.height:0})}return Object(Aa.a)(Object(Ma.a)(n.prototype),"preprocess",this).call(this,f,a)}},{key:"isNode",value:function(){return!0}},{key:"size",value:function(t,a,s){return t===void 0?this.getSize():typeof t=="number"?this.setSize(t,a,s):this.setSize(t,a)}},{key:"getSize",value:function(){var t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}},{key:"setSize",value:function(t,a,s){return typeof t=="object"?this.resize(t.width,t.height,a):this.resize(t,a,s),this}},{key:"resize",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch("resize",s);var u=s.direction;if(u){var l=this.getSize();switch(u){case"left":case"right":a=l.height;break;case"top":case"bottom":t=l.width;break;default:break}var c={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3},f=c[u],d=Mi.normalize(this.getAngle()||0);s.absolute&&(f+=Math.floor((d+45)/90),f%=4);var v=this.getBBox(),m;f===0?m=v.getBottomLeft():f===1?m=v.getCorner():f===2?m=v.getTopRight():m=v.getOrigin();var y=m.clone().rotate(-d,v.getCenter()),C=Math.sqrt(t*t+a*a)/2,O=f*Math.PI/2;O+=Math.atan(f%2==0?a/t:t/a),O-=Mi.toRad(d);var x=Pt.fromPolar(C,O,y),T=x.clone().translate(t/-2,a/-2);this.store.set("size",{width:t,height:a},s),this.setPosition(T.x,T.y,s)}else this.store.set("size",{width:t,height:a},s);return this.stopBatch("resize",s),this}},{key:"scale",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.getBBox().scale(t,a,s==null?void 0:s);return this.startBatch("scale",u),this.setPosition(l.x,l.y,u),this.resize(l.width,l.height,u),this.stopBatch("scale"),this}},{key:"position",value:function(t,a,s){return typeof t=="number"?this.setPosition(t,a,s):this.getPosition(t)}},{key:"getPosition",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.relative){var a=this.getParent();if(a!=null&&a.isNode()){var s=this.getPosition(),u=a.getPosition();return{x:s.x-u.x,y:s.y-u.y}}}var l=this.store.get("position");return l?Object.assign({},l):{x:0,y:0}}},{key:"setPosition",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u,l,c;if(typeof t=="object"?(u=t.x,l=t.y,c=a||{}):(u=t,l=a,c=s||{}),c.relative){var f=this.getParent();if(f!=null&&f.isNode()){var d=f.getPosition();u+=d.x,l+=d.y}}if(c.deep){var v=this.getPosition();this.translate(u-v.x,l-v.y,c)}else this.store.set("position",{x:u,y:l},c);return this}},{key:"translate",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t===0&&a===0)return this;s.translateBy=s.translateBy||this.id;var u=this.getPosition();if(s.restrict!=null&&s.translateBy===this.id){var l=this.getBBox({deep:!0}),c=s.restrict,f=u.x-l.x,d=u.y-l.y,v=Math.max(c.x+f,Math.min(c.x+c.width+f-l.width,u.x+t)),m=Math.max(c.y+d,Math.min(c.y+c.height+d-l.height,u.y+a));t=v-u.x,a=m-u.y}var y={x:u.x+t,y:u.y+a};return s.tx=t,s.ty=a,s.transition?(typeof s.transition!="object"&&(s.transition={}),this.transition("position",y,Object.assign(Object.assign({},s.transition),{interp:Pv.object})),this.eachChild(function(C){var O,x=(O=s.exclude)===null||O===void 0?void 0:O.includes(C);x||C.translate(t,a,s)})):(this.startBatch("translate",s),this.store.set("position",y,s),this.eachChild(function(C){var O,x=(O=s.exclude)===null||O===void 0?void 0:O.includes(C);x||C.translate(t,a,s)}),this.stopBatch("translate",s)),this}},{key:"angle",value:function(t,a){return t==null?this.getAngle():this.rotate(t,a)}},{key:"getAngle",value:function(){return this.store.get("angle",0)}},{key:"rotate",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getAngle();if(a.center){var u=this.getSize(),l=this.getPosition(),c=this.getBBox().getCenter();c.rotate(s-t,a.center);var f=c.x-u.width/2-l.x,d=c.y-u.height/2-l.y;this.startBatch("rotate",{angle:t,options:a}),this.setPosition(l.x+f,l.y+d,a),this.rotate(t,Object.assign(Object.assign({},a),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",a.absolute?t:(s+t)%360,a);return this}},{key:"getBBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(t.deep){var a=this.getDescendants({deep:!0,breadthFirst:!0});return a.push(this),Ui.getCellsBBox(a)}return Br.fromPositionAndSize(this.getPosition(),this.getSize())}},{key:"getConnectionPoint",value:function(t,a){var s=this.getBBox(),u=s.getCenter(),l=t.getTerminal(a);if(l==null)return u;var c=l.port;if(!c||!this.hasPort(c))return u;var f=this.getPort(c);if(!f||!f.group)return u;var d=this.getPortsPosition(f.group),v=d[c].position,m=Pt.create(v).translate(s.getOrigin()),y=this.getAngle();return y&&m.rotate(-y,u),m}},{key:"fit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getChildren()||[],s=a.filter(function(m){return m.isNode()});if(s.length===0)return this;this.startBatch("fit-embeds",t),t.deep&&s.forEach(function(m){return m.fit(t)});var u=Ui.getCellsBBox(s),l=u.x,c=u.y,f=u.width,d=u.height,v=E.normalizeSides(t.padding);return l-=v.left,c-=v.top,f+=v.left+v.right,d+=v.bottom+v.top,this.store.set({position:{x:l,y:c},size:{width:f,height:d}},t),this.stopBatch("fit-embeds"),this}},{key:"portContainerMarkup",get:function(){return this.getPortContainerMarkup()}},{key:"portContainerMarkup",set:function(t){this.setPortContainerMarkup(t)}},{key:"getDefaultPortContainerMarkup",value:function(){return this.store.get("defaultPortContainerMarkup")||Li.getPortContainerMarkup()}},{key:"getPortContainerMarkup",value:function(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}},{key:"setPortContainerMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portContainerMarkup",Li.clone(t),a),this}},{key:"portMarkup",get:function(){return this.getPortMarkup()}},{key:"portMarkup",set:function(t){this.setPortMarkup(t)}},{key:"getDefaultPortMarkup",value:function(){return this.store.get("defaultPortMarkup")||Li.getPortMarkup()}},{key:"getPortMarkup",value:function(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}},{key:"setPortMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portMarkup",Li.clone(t),a),this}},{key:"portLabelMarkup",get:function(){return this.getPortLabelMarkup()}},{key:"portLabelMarkup",set:function(t){this.setPortLabelMarkup(t)}},{key:"getDefaultPortLabelMarkup",value:function(){return this.store.get("defaultPortLabelMarkup")||Li.getPortLabelMarkup()}},{key:"getPortLabelMarkup",value:function(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}},{key:"setPortLabelMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("portLabelMarkup",Li.clone(t),a),this}},{key:"ports",get:function(){var t=this.store.get("ports",{items:[]});return t.items==null&&(t.items=[]),t}},{key:"getPorts",value:function(){return p.cloneDeep(this.ports.items)}},{key:"getPortsByGroup",value:function(t){return this.getPorts().filter(function(a){return a.group===t})}},{key:"getPort",value:function(t){return p.cloneDeep(this.ports.items.find(function(a){return a.id&&a.id===t}))}},{key:"getPortAt",value:function(t){return this.ports.items[t]||null}},{key:"hasPorts",value:function(){return this.ports.items.length>0}},{key:"hasPort",value:function(t){return this.getPortIndex(t)!==-1}},{key:"getPortIndex",value:function(t){var a=typeof t=="string"?t:t.id;return a!=null?this.ports.items.findIndex(function(s){return s.id===a}):-1}},{key:"getPortsPosition",value:function(t){var a=this.getSize(),s=this.port.getPortsLayoutByGroup(t,new Br(0,0,a.width,a.height));return s.reduce(function(u,l){var c=l.portLayout;return u[l.portId]={position:Object.assign({},c.position),angle:c.angle||0},u},{})}},{key:"getPortProp",value:function(t,a){return this.getPropByPath(this.prefixPortPath(t,a))}},{key:"setPortProp",value:function(t,a,s,u){if(typeof a=="string"||Array.isArray(a)){var l=this.prefixPortPath(t,a),c=s;return this.setPropByPath(l,c,u)}var f=this.prefixPortPath(t),d=a;return this.setPropByPath(f,d,s)}},{key:"removePortProp",value:function(t,a,s){return typeof a=="string"||Array.isArray(a)?this.removePropByPath(this.prefixPortPath(t,a),s):this.removePropByPath(this.prefixPortPath(t),a)}},{key:"portProp",value:function(t,a,s,u){return a==null?this.getPortProp(t):typeof a=="string"||Array.isArray(a)?arguments.length===2?this.getPortProp(t,a):s==null?this.removePortProp(t,a,u):this.setPortProp(t,a,s,u):this.setPortProp(t,a,s)}},{key:"prefixPortPath",value:function(t,a){var s=this.getPortIndex(t);if(s===-1)throw new Error('Unable to find port with id: "'.concat(t,'"'));return a==null||a===""?["ports","items","".concat(s)]:Array.isArray(a)?["ports","items","".concat(s)].concat(Object(We.a)(a)):"ports/items/".concat(s,"/").concat(a)}},{key:"addPort",value:function(t,a){var s=Object(We.a)(this.ports.items);return s.push(t),this.setPropByPath("ports/items",s,a),this}},{key:"addPorts",value:function(t,a){return this.setPropByPath("ports/items",[].concat(Object(We.a)(this.ports.items),Object(We.a)(t)),a),this}},{key:"insertPort",value:function(t,a,s){var u=Object(We.a)(this.ports.items);return u.splice(t,0,a),this.setPropByPath("ports/items",u,s),this}},{key:"removePort",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.removePortAt(this.getPortIndex(t),a)}},{key:"removePortAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t>=0){var s=Object(We.a)(this.ports.items);s.splice(t,1),a.rewrite=!0,this.setPropByPath("ports/items",s,a)}return this}},{key:"removePorts",value:function(t,a){var s;if(Array.isArray(t)){if(s=a||{},t.length){s.rewrite=!0;var u=Object(We.a)(this.ports.items),l=u.filter(function(c){return!t.some(function(f){var d=typeof f=="string"?f:f.id;return c.id===d})});this.setPropByPath("ports/items",l,s)}}else s=t||{},s.rewrite=!0,this.setPropByPath("ports/items",[],s);return this}},{key:"getParsedPorts",value:function(){return this.port.getPorts()}},{key:"getParsedGroups",value:function(){return this.port.groups}},{key:"getPortsLayoutByGroup",value:function(t,a){return this.port.getPortsLayoutByGroup(t,a)}},{key:"initPorts",value:function(){var t=this;this.updatePortData(),this.on("change:ports",function(){t.processRemovedPort(),t.updatePortData()})}},{key:"processRemovedPort",value:function(){var t=this.ports,a={};t.items.forEach(function(d){d.id&&(a[d.id]=!0)});var s={},u=this.store.getPrevious("ports")||{items:[]};u.items.forEach(function(d){d.id&&!a[d.id]&&(s[d.id]=!0)});var l=this.model;if(l&&!p.isEmpty(s)){var c=l.getConnectedEdges(this,{incoming:!0});c.forEach(function(d){var v=d.getTargetPortId();v&&s[v]&&d.remove()});var f=l.getConnectedEdges(this,{outgoing:!0});f.forEach(function(d){var v=d.getSourcePortId();v&&s[v]&&d.remove()})}}},{key:"validatePorts",value:function(){var t=this,a={},s=[];return this.ports.items.forEach(function(u){typeof u!="object"&&s.push("Invalid port ".concat(u,".")),u.id==null&&(u.id=t.generatePortId()),a[u.id]&&s.push("Duplicitied port id."),a[u.id]=!0}),s}},{key:"generatePortId",value:function(){return S.uuid()}},{key:"updatePortData",value:function(){var t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));var a=this.port?this.port.getPorts():null;this.port=new KG(this.ports);var s=this.port.getPorts(),u=a?s.filter(function(c){return a.find(function(f){return f.id===c.id})?null:c}):Object(We.a)(s),l=a?a.filter(function(c){return s.find(function(f){return f.id===c.id})?null:c}):[];u.length>0&&this.notify("ports:added",{added:u,cell:this,node:this}),l.length>0&&this.notify("ports:removed",{removed:l,cell:this,node:this})}}]),n}(Ui,Symbol.toStringTag);fo.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.size=="function"&&typeof e.position=="function"}o.isNode=i}(fo||(fo={})),function(o){o.config({propHooks:function(r){var n=r.ports,e=T1(r,["ports"]);return n&&(e.ports=Array.isArray(n)?{items:n}:n),e}})}(fo||(fo={})),function(o){o.registry=Xo.create({type:"node",process:function(r,n){if(eg.exist(r,!0))throw new Error("Node with name '".concat(r,"' was registered by anthor Edge"));if(typeof n=="function")return n.config({shape:r}),n;var e=o,t=n.inherit,a=T1(n,["inherit"]);if(t)if(typeof t=="string"){var s=this.get(t);s==null?this.onNotFound(t,"inherited"):e=s}else e=t;a.constructorName==null&&(a.constructorName=r);var u=e.define.call(e,a);return u.config({shape:r}),u}}),eg.setNodeRegistry(o.registry)}(fo||(fo={})),function(o){var i=0;function r(t){return t?S.pascalCase(t):(i+=1,"CustomNode".concat(i))}function n(t){var a=t.constructorName,s=t.overwrite,u=T1(t,["constructorName","overwrite"]),l=p.createClass(r(a||u.shape),this);return l.config(u),u.shape&&o.registry.register(u.shape,l,s),l}o.define=n;function e(t){var a=t.shape||"rect",s=o.registry.get(a);return s?new s(t):o.registry.onNotFound(a)}o.create=e}(fo||(fo={}));var XG=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},au=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"label",get:function(){return this.getLabel()},set:function(e){this.setLabel(e)}},{key:"getLabel",value:function(){return this.getAttrByPath("text/text")}},{key:"setLabel",value:function(e,t){return e==null?this.removeLabel():this.setAttrByPath("text/text",e,t),this}},{key:"removeLabel",value:function(){return this.removeAttrByPath("text/text"),this}}]),r}(fo);(function(o){o.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},o.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},o.config({attrs:{text:Object.assign({},o.labelAttr)},propHooks:function(r){var n=r.label,e=XG(r,["label"]);return n&&p.setByPath(e,"attrs/text/text",n),e},visible:!0})})(au||(au={}));var YG=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r};function JG(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return'<g class="rotatable"><g class="scalable"><'.concat(o,"/></g>").concat(i?"":"<text/>","</g>")}function lS(o){return"basic.".concat(o)}function u0(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"xlink:href",i=function(n){var e=n.imageUrl,t=n.imageWidth,a=n.imageHeight,s=YG(n,["imageUrl","imageWidth","imageHeight"]);if(e!=null||t!=null||a!=null){var u=function(){if(s.attrs){var c=s.attrs.image;e!=null&&(c[o]=e),t!=null&&(c.width=t),a!=null&&(c.height=a),s.attrs.image=c}};s.attrs?(s.attrs.image==null&&(s.attrs.image={}),u()):(s.attrs={image:{}},u())}return s};return i}function If(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=lS(o),e={constructorName:n,attrs:Object(Re.a)({".":{fill:"#ffffff",stroke:"none"}},o,{fill:"#ffffff",stroke:"#000000"})};r.ignoreMarkup||(e.markup=JG(o,r.noText===!0));var t=r.parent||au;return t.define(p.merge(e,i,{shape:n}))}var KQ=If("rect",{attrs:{rect:{width:100,height:60}}}),XQ=If("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),YQ=If("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),JQ=If("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),ZQ=If("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),QQ=If("image",{attrs:{text:{refY:null,refDy:16}},propHooks:u0()}),ZG=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Ok=If("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks:function(i){var r=i.d,n=ZG(i,["d"]);return r!=null&&p.setByPath(n,"attrs/path/d",r),n}}),qQ=If("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:Ok,ignoreMarkup:!0}),eq=If("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:Ok,ignoreMarkup:!0}),P1=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Fo=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(me.a)(this,n),r.call(this,e)}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"preprocess",value:function(t,a){var s=t.source,u=t.sourceCell,l=t.sourcePort,c=t.sourcePoint,f=t.target,d=t.targetCell,v=t.targetPort,m=t.targetPoint,y=P1(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),C=y,O=function(ye){return typeof ye=="string"||typeof ye=="number"};if(s!=null)if(Ui.isCell(s))C.source={cell:s.id};else if(O(s))C.source={cell:s};else if(Pt.isPoint(s))C.source=s.toJSON();else if(Array.isArray(s))C.source={x:s[0],y:s[1]};else{var x=s.cell;Ui.isCell(x)?C.source=Object.assign(Object.assign({},s),{cell:x.id}):C.source=s}if(u!=null||l!=null){var T=C.source;if(u!=null){var L=O(u)?u:u.id;T?T.cell=L:T=C.source={cell:L}}l!=null&&T&&(T.port=l)}else c!=null&&(C.source=Pt.create(c).toJSON());if(f!=null)if(Ui.isCell(f))C.target={cell:f.id};else if(O(f))C.target={cell:f};else if(Pt.isPoint(f))C.target=f.toJSON();else if(Array.isArray(f))C.target={x:f[0],y:f[1]};else{var _=f.cell;Ui.isCell(_)?C.target=Object.assign(Object.assign({},f),{cell:_.id}):C.target=f}if(d!=null||v!=null){var z=C.target;if(d!=null){var Q=O(d)?d:d.id;z?z.cell=Q:z=C.target={cell:Q}}v!=null&&z&&(z.port=v)}else m!=null&&(C.target=Pt.create(m).toJSON());return Object(Aa.a)(Object(Ma.a)(n.prototype),"preprocess",this).call(this,C,a)}},{key:"setup",value:function(){var t=this;Object(Aa.a)(Object(Ma.a)(n.prototype),"setup",this).call(this),this.on("change:labels",function(a){return t.onLabelsChanged(a)}),this.on("change:vertices",function(a){return t.onVertexsChanged(a)})}},{key:"isEdge",value:function(){return!0}},{key:"disconnect",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}},{key:"source",get:function(){return this.getSource()}},{key:"source",set:function(t){this.setSource(t)}},{key:"getSource",value:function(){return this.getTerminal("source")}},{key:"getSourceCellId",value:function(){return this.source.cell}},{key:"getSourcePortId",value:function(){return this.source.port}},{key:"setSource",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("source",t,a,s)}},{key:"target",get:function(){return this.getTarget()}},{key:"target",set:function(t){this.setTarget(t)}},{key:"getTarget",value:function(){return this.getTerminal("target")}},{key:"getTargetCellId",value:function(){return this.target.cell}},{key:"getTargetPortId",value:function(){return this.target.port}},{key:"setTarget",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.setTerminal("target",t,a,s)}},{key:"getTerminal",value:function(t){return Object.assign({},this.store.get(t))}},{key:"setTerminal",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(Ui.isCell(a))return this.store.set(t,p.merge({},s,{cell:a.id}),u),this;var l=a;return Pt.isPoint(a)||l.x!=null&&l.y!=null?(this.store.set(t,p.merge({},s,{x:l.x,y:l.y}),u),this):(this.store.set(t,p.cloneDeep(a),u),this)}},{key:"getSourcePoint",value:function(){return this.getTerminalPoint("source")}},{key:"getTargetPoint",value:function(){return this.getTerminalPoint("target")}},{key:"getTerminalPoint",value:function(t){var a=this[t];if(Pt.isPointLike(a))return Pt.create(a);var s=this.getTerminalCell(t);return s?s.getConnectionPoint(this,t):new Pt}},{key:"getSourceCell",value:function(){return this.getTerminalCell("source")}},{key:"getTargetCell",value:function(){return this.getTerminalCell("target")}},{key:"getTerminalCell",value:function(t){if(this.model){var a=t==="source"?this.getSourceCellId():this.getTargetCellId();if(a)return this.model.getCell(a)}return null}},{key:"getSourceNode",value:function(){return this.getTerminalNode("source")}},{key:"getTargetNode",value:function(){return this.getTerminalNode("target")}},{key:"getTerminalNode",value:function(t){for(var a=this,s={};a&&a.isEdge();){if(s[a.id])return null;s[a.id]=!0,a=a.getTerminalCell(t)}return a&&a.isNode()?a:null}},{key:"router",get:function(){return this.getRouter()}},{key:"router",set:function(t){t==null?this.removeRouter():this.setRouter(t)}},{key:"getRouter",value:function(){return this.store.get("router")}},{key:"setRouter",value:function(t,a,s){return typeof t=="object"?this.store.set("router",t,a):this.store.set("router",{name:t,args:a},s),this}},{key:"removeRouter",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("router",t),this}},{key:"connector",get:function(){return this.getConnector()}},{key:"connector",set:function(t){t==null?this.removeConnector():this.setConnector(t)}},{key:"getConnector",value:function(){return this.store.get("connector")}},{key:"setConnector",value:function(t,a,s){return typeof t=="object"?this.store.set("connector",t,a):this.store.set("connector",{name:t,args:a},s),this}},{key:"removeConnector",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("connector",t)}},{key:"strategy",get:function(){return this.getStrategy()}},{key:"strategy",set:function(t){t==null?this.removeStrategy():this.setStrategy(t)}},{key:"getStrategy",value:function(){return this.store.get("strategy")}},{key:"setStrategy",value:function(t,a,s){return typeof t=="object"?this.store.set("strategy",t,a):this.store.set("strategy",{name:t,args:a},s),this}},{key:"removeStrategy",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("strategy",t)}},{key:"getDefaultLabel",value:function(){var t=this.constructor,a=this.store.get("defaultLabel")||t.defaultLabel||{};return p.cloneDeep(a)}},{key:"labels",get:function(){return this.getLabels()}},{key:"labels",set:function(t){this.setLabels(t)}},{key:"getLabels",value:function(){var t=this;return Object(We.a)(this.store.get("labels",[])).map(function(a){return t.parseLabel(a)})}},{key:"setLabels",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("labels",Array.isArray(t)?t:[t],a),this}},{key:"insertLabel",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=this.getLabels(),l=u.length,c=a!=null&&Number.isFinite(a)?a:l;return c<0&&(c=l+c+1),u.splice(c,0,this.parseLabel(t)),this.setLabels(u,s)}},{key:"appendLabel",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertLabel(t,-1,a)}},{key:"getLabelAt",value:function(t){var a=this.getLabels();return t!=null&&Number.isFinite(t)?this.parseLabel(a[t]):null}},{key:"setLabelAt",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null&&Number.isFinite(t)){var u=this.getLabels();u[t]=this.parseLabel(a),this.setLabels(u,s)}return this}},{key:"removeLabelAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getLabels(),u=t!=null&&Number.isFinite(t)?t:-1,l=s.splice(u,1);return this.setLabels(s,a),l.length?l[0]:null}},{key:"parseLabel",value:function(t){if(typeof t=="string"){var a=this.constructor;return a.parseStringLabel(t)}return t}},{key:"onLabelsChanged",value:function(t){var a=t.previous,s=t.current,u=a&&s?s.filter(function(c){return a.find(function(f){return c===f||p.isEqual(c,f)})?null:c}):s?Object(We.a)(s):[],l=a&&s?a.filter(function(c){return s.find(function(f){return c===f||p.isEqual(c,f)})?null:c}):a?Object(We.a)(a):[];u.length>0&&this.notify("labels:added",{added:u,cell:this,edge:this}),l.length>0&&this.notify("labels:removed",{removed:l,cell:this,edge:this})}},{key:"vertexMarkup",get:function(){return this.getVertexMarkup()}},{key:"vertexMarkup",set:function(t){this.setVertexMarkup(t)}},{key:"getDefaultVertexMarkup",value:function(){return this.store.get("defaultVertexMarkup")||Li.getEdgeVertexMarkup()}},{key:"getVertexMarkup",value:function(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}},{key:"setVertexMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("vertexMarkup",Li.clone(t),a),this}},{key:"vertices",get:function(){return this.getVertices()}},{key:"vertices",set:function(t){this.setVertices(t)}},{key:"getVertices",value:function(){return Object(We.a)(this.store.get("vertices",[]))}},{key:"setVertices",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Array.isArray(t)?t:[t];return this.store.set("vertices",s.map(function(u){return Pt.toJSON(u)}),a),this}},{key:"insertVertex",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=this.getVertices(),l=u.length,c=a!=null&&Number.isFinite(a)?a:l;return c<0&&(c=l+c+1),u.splice(c,0,Pt.toJSON(t)),this.setVertices(u,s)}},{key:"appendVertex",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.insertVertex(t,-1,a)}},{key:"getVertexAt",value:function(t){if(t!=null&&Number.isFinite(t)){var a=this.getVertices();return a[t]}return null}},{key:"setVertexAt",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t!=null&&Number.isFinite(t)){var u=this.getVertices();u[t]=a,this.setVertices(u,s)}return this}},{key:"removeVertexAt",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getVertices(),u=t!=null&&Number.isFinite(t)?t:-1;return s.splice(u,1),this.setVertices(s,a)}},{key:"onVertexsChanged",value:function(t){var a=t.previous,s=t.current,u=a&&s?s.filter(function(c){return a.find(function(f){return Pt.equals(c,f)})?null:c}):s?Object(We.a)(s):[],l=a&&s?a.filter(function(c){return s.find(function(f){return Pt.equals(c,f)})?null:c}):a?Object(We.a)(a):[];u.length>0&&this.notify("vertexs:added",{added:u,cell:this,edge:this}),l.length>0&&this.notify("vertexs:removed",{removed:l,cell:this,edge:this})}},{key:"getDefaultMarkup",value:function(){return this.store.get("defaultMarkup")||Li.getEdgeMarkup()}},{key:"getMarkup",value:function(){return Object(Aa.a)(Object(Ma.a)(n.prototype),"getMarkup",this).call(this)||this.getDefaultMarkup()}},{key:"toolMarkup",get:function(){return this.getToolMarkup()}},{key:"toolMarkup",set:function(t){this.setToolMarkup(t)}},{key:"getDefaultToolMarkup",value:function(){return this.store.get("defaultToolMarkup")||Li.getEdgeToolMarkup()}},{key:"getToolMarkup",value:function(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}},{key:"setToolMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("toolMarkup",t,a),this}},{key:"doubleToolMarkup",get:function(){return this.getDoubleToolMarkup()}},{key:"doubleToolMarkup",set:function(t){this.setDoubleToolMarkup(t)}},{key:"getDefaultDoubleToolMarkup",value:function(){return this.store.get("defaultDoubleToolMarkup")}},{key:"getDoubleToolMarkup",value:function(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}},{key:"setDoubleToolMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("doubleToolMarkup",t,a),this}},{key:"arrowheadMarkup",get:function(){return this.getArrowheadMarkup()}},{key:"arrowheadMarkup",set:function(t){this.setArrowheadMarkup(t)}},{key:"getDefaultArrowheadMarkup",value:function(){return this.store.get("defaultArrowheadMarkup")||Li.getEdgeArrowheadMarkup()}},{key:"getArrowheadMarkup",value:function(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}},{key:"setArrowheadMarkup",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.store.set("arrowheadMarkup",t,a),this}},{key:"translate",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return s.translateBy=s.translateBy||this.id,s.tx=t,s.ty=a,this.applyToPoints(function(u){return{x:(u.x||0)+t,y:(u.y||0)+a}},s)}},{key:"scale",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.applyToPoints(function(l){return Pt.create(l).scale(t,a,s).toJSON()},u)}},{key:"applyToPoints",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s={},u=this.getSource(),l=this.getTarget();Pt.isPointLike(u)&&(s.source=t(u)),Pt.isPointLike(l)&&(s.target=t(l));var c=this.getVertices();return c.length>0&&(s.vertices=c.map(t)),this.store.set(s,a),this}},{key:"getBBox",value:function(){return this.getPolyline().bbox()}},{key:"getConnectionPoint",value:function(){return this.getPolyline().pointAt(.5)}},{key:"getPolyline",value:function(){var t=[this.getSourcePoint()].concat(Object(We.a)(this.getVertices().map(function(a){return Pt.create(a)})),[this.getTargetPoint()]);return new ku(t)}},{key:"updateParent",value:function(t){var a=null,s=this.getSourceCell(),u=this.getTargetCell(),l=this.getParent();return s&&u&&(s===u||s.isDescendantOf(u)?a=u:u.isDescendantOf(s)?a=s:a=Ui.getCommonAncestor(s,u)),l&&(!a||a.id!==l.id)&&l.unembed(this,t),a&&a.embed(this,t),a}},{key:"hasLoop",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getSource(),s=this.getTarget(),u=a.cell,l=s.cell;if(!u||!l)return!1;var c=u===l;if(!c&&t.deep&&this._model){var f=this.getSourceCell(),d=this.getTargetCell();f&&d&&(c=f.isAncestorOf(d,t)||d.isAncestorOf(f,t))}return c}},{key:"getFragmentAncestor",value:function(){var t=[this,this.getSourceNode(),this.getTargetNode()].filter(function(a){return a!=null});return this.getCommonAncestor.apply(this,Object(We.a)(t))}},{key:"isFragmentDescendantOf",value:function(t){var a=this.getFragmentAncestor();return!!a&&(a.id===t.id||a.isDescendantOf(t))}}]),n}(Ui,Symbol.toStringTag);Fo.defaults={},function(o){function i(r,n){var e=r,t=n;return e.cell===t.cell?e.port===t.port||e.port==null&&t.port==null:!1}o.equalTerminals=i}(Fo||(Fo={})),function(o){o.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function i(r){return{attrs:{label:{text:r}}}}o.parseStringLabel=i}(Fo||(Fo={})),function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNode=="function"&&typeof e.isEdge=="function"&&typeof e.prop=="function"&&typeof e.attr=="function"&&typeof e.disconnect=="function"&&typeof e.getSource=="function"&&typeof e.getTarget=="function"}o.isEdge=i}(Fo||(Fo={})),function(o){o.registry=Xo.create({type:"edge",process:function(r,n){if(eg.exist(r,!1))throw new Error("Edge with name '".concat(r,"' was registered by anthor Node"));if(typeof n=="function")return n.config({shape:r}),n;var e=o,t=n.inherit,a=t===void 0?"edge":t,s=P1(n,["inherit"]);if(typeof a=="string"){var u=this.get(a||"edge");u==null&&a?this.onNotFound(a,"inherited"):e=u}else e=a;s.constructorName==null&&(s.constructorName=r);var l=e.define.call(e,s);return l.config({shape:r}),l}}),eg.setEdgeRegistry(o.registry)}(Fo||(Fo={})),function(o){var i=0;function r(t){return t?S.pascalCase(t):(i+=1,"CustomEdge".concat(i))}function n(t){var a=t.constructorName,s=t.overwrite,u=P1(t,["constructorName","overwrite"]),l=p.createClass(r(a||u.shape),this);return l.config(u),u.shape&&o.registry.register(u.shape,l,s),l}o.define=n;function e(t){var a=t.shape||"edge",s=o.registry.get(a);return s?new s(t):o.registry.onNotFound(a)}o.create=e}(Fo||(Fo={})),function(o){var i="basic.edge";o.config({shape:i,propHooks:function(n){var e=n.label,t=n.vertices,a=P1(n,["label","vertices"]);if(e){a.labels==null&&(a.labels=[]);var s=typeof e=="string"?o.parseStringLabel(e):e;a.labels.push(s)}return t&&Array.isArray(t)&&(a.vertices=t.map(function(u){return Pt.create(u).toJSON()})),a}}),o.registry.register(i,o)}(Fo||(Fo={}));var QG=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Lv=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(){var e;return Object(me.a)(this,n),e=r.apply(this,arguments),e.POINT_ROUNDING=2,e.markerCache={},e}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"getContainerClassName",value:function(){return[Object(Aa.a)(Object(Ma.a)(n.prototype),"getContainerClassName",this).call(this),this.prefixClassName("edge")].join(" ")}},{key:"sourceBBox",get:function(){var t=this.sourceView;if(!t){var a=this.cell.getSource();return new Br(a.x,a.y)}var s=this.sourceMagnet;return t.isEdgeElement(s)?new Br(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(s||t.container)}},{key:"targetBBox",get:function(){var t=this.targetView;if(!t){var a=this.cell.getTarget();return new Br(a.x,a.y)}var s=this.targetMagnet;return t.isEdgeElement(s)?new Br(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(s||t.container)}},{key:"isEdgeView",value:function(){return!0}},{key:"confirmUpdate",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t;if(this.hasAction(u,"source")){if(!this.updateTerminalProperties("source"))return u;u=this.removeAction(u,"source")}if(this.hasAction(u,"target")){if(!this.updateTerminalProperties("target"))return u;u=this.removeAction(u,"target")}var l=this.graph,c=this.sourceView,f=this.targetView;return l&&(c&&!l.renderer.isViewMounted(c)||f&&!l.renderer.isViewMounted(f))?u:this.hasAction(u,"render")?(this.render(),u=this.removeAction(u,["render","update","vertices","labels","tools","widget"]),u):(u=this.handleAction(u,"vertices",function(){return a.renderVertexMarkers()}),u=this.handleAction(u,"update",function(){return a.update(null,s)}),u=this.handleAction(u,"labels",function(){return a.onLabelsChange(s)}),u=this.handleAction(u,"tools",function(){a.renderTools(),a.updateToolsPosition()}),u=this.handleAction(u,"widget",function(){return a.renderExternalTools()}),u)}},{key:"onLabelsChange",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}},{key:"shouldRerenderLabels",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.cell.previous("labels");if(a==null)return!0;if("propertyPathArray"in t&&"propertyValue"in t){var s=t.propertyPathArray||[],u=s.length;if(u>1){var l=s[1];if(a[l]){if(u===2)return typeof t.propertyValue=="object"&&p.has(t.propertyValue,"markup");if(s[2]!=="markup")return!1}}}return!0}},{key:"render",value:function(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this}},{key:"renderMarkup",value:function(){var t=this.cell.markup;if(t)return typeof t=="string"?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid edge markup.")}},{key:"renderJSONMarkup",value:function(t){var a=this.parseJSONMarkup(t,this.container);this.selectors=a.selectors,this.container.append(a.fragment)}},{key:"renderStringMarkup",value:function(t){var a=this.containers,s=oi.createVectors(t);s.forEach(function(u){var l=u.attr("class");l&&(a[S.camelCase(l)]=u.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),M.append(this.container,s.map(function(u){return u.node}))}},{key:"renderLabels",value:function(){var t=this.cell,a=t.getLabels(),s=a.length,u=this.containers.labels;if(this.labelCache={},this.labelSelectors={},s<=0)return u&&u.parentNode&&u.parentNode.removeChild(u),this;u?this.empty(u):(u=M.createSvgElement("g"),this.addClass(this.prefixClassName("edge-labels"),u),this.containers.labels=u);for(var l=0,c=a.length;l<c;l+=1){var f=a[l],d=this.normalizeLabelMarkup(this.parseLabelMarkup(f.markup)),v=void 0,m=void 0;if(d)v=d.node,m=d.selectors;else{var y=t.getDefaultLabel(),C=this.normalizeLabelMarkup(this.parseLabelMarkup(y.markup));v=C.node,m=C.selectors}v.setAttribute("data-index","".concat(l)),u.appendChild(v);var O=this.rootSelector;if(m[O])throw new Error("Ambiguous label root selector.");m[O]=v,this.labelCache[l]=v,this.labelSelectors[l]=m}return u.parentNode==null&&this.container.appendChild(u),this.updateLabels(),this.customizeLabels(),this}},{key:"parseLabelMarkup",value:function(t){return t?typeof t=="string"?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null}},{key:"parseLabelStringMarkup",value:function(t){for(var a=oi.createVectors(t),s=document.createDocumentFragment(),u=0,l=a.length;u<l;u+=1){var c=a[u].node;s.appendChild(c)}return{fragment:s,selectors:{}}}},{key:"normalizeLabelMarkup",value:function(t){if(t!=null){var a=t.fragment;if(!(a instanceof DocumentFragment)||!a.hasChildNodes())throw new Error("Invalid label markup.");var s,u=a.childNodes;return u.length>1||u[0].nodeName.toUpperCase()!=="G"?s=oi.create("g").append(a):s=oi.create(u[0]),s.addClass(this.prefixClassName("edge-label")),{node:s.node,selectors:t.selectors}}}},{key:"updateLabels",value:function(){if(this.containers.labels)for(var t=this.cell,a=t.labels,s=this.can("edgeLabelMovable"),u=t.getDefaultLabel(),l=0,c=a.length;l<c;l+=1){var f=this.labelCache[l],d=this.labelSelectors[l];f.setAttribute("cursor",s?"move":"default");var v=a[l],m=p.merge({},u.attrs,v.attrs);this.updateAttrs(f,m,{selectors:d,rootBBox:v.size?Br.fromSize(v.size):void 0})}}},{key:"mergeLabelAttrs",value:function(t,a,s){if(a===null)return null;if(a===void 0)return s===null?null:s===void 0?void 0:t?s:p.merge({},s);if(t)return p.merge({},s,a)}},{key:"customizeLabels",value:function(){if(this.containers.labels)for(var t=this.cell,a=t.labels,s=0,u=a.length;s<u;s+=1){var l=a[s],c=this.labelCache[s],f=this.labelSelectors[s];this.graph.hook.onEdgeLabelRendered({edge:t,label:l,container:c,selectors:f})}}},{key:"renderTools",value:function(){var t=this.containers.tools;if(t==null)return this;var a=this.cell.toolMarkup,s=this.$(t).empty();if(Li.isStringMarkup(a)){var u=S.template(a),l=oi.create(u());if(s.append(l.node),this.toolCache=l.node,this.options.doubleTools){var c,f=this.cell.doubleToolMarkup;Li.isStringMarkup(f)?(u=S.template(f),c=oi.create(u())):c=l.clone(),s.append(c.node),this.tool2Cache=c.node}}return this}},{key:"renderExternalTools",value:function(){var t=this.cell.getTools();return this.addTools(t),this}},{key:"renderVertexMarkers",value:function(){var t=this.containers.vertices;if(t==null)return this;var a=this.cell.vertexMarkup,s=this.$(t).empty();if(Li.isStringMarkup(a)){var u=S.template(a);this.cell.getVertices().forEach(function(l,c){s.append(oi.create(u(Object.assign({index:c},l))).node)})}return this}},{key:"renderArrowheadMarkers",value:function(){var t=this.containers.arrowheads;if(t==null)return this;var a=this.cell.arrowheadMarkup,s=this.$(t).empty();if(Li.isStringMarkup(a)){var u=S.template(a),l=oi.create(u({end:"source"})).node,c=oi.create(u({end:"target"})).node;this.containers.sourceArrowhead=l,this.containers.targetArrowhead=c,s.append(l,c)}return this}},{key:"update",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.cleanCache(),this.updateConnection(a);var s=this.cell.getAttrs();return s!=null&&this.updateAttrs(this.container,s,{attrs:t===s?null:t,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(a),this}},{key:"removeRedundantLinearVertices",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.cell,s=a.getVertices(),u=[this.sourceAnchor].concat(Object(We.a)(s),[this.targetAnchor]),l=u.length,c=new ku(u);c.simplify({threshold:.01});var f=c.points.map(function(v){return v.toJSON()}),d=f.length;return l===d?0:(a.setVertices(f.slice(1,d-1),t),l-d)}},{key:"updateConnectionPath",value:function(){var t=this.containers;if(t.connection){var a=this.getConnectionPathData();t.connection.setAttribute("d",a)}if(t.connectionWrap){var s=this.getConnectionPathData();t.connectionWrap.setAttribute("d",s)}t.sourceMarker&&t.targetMarker&&this.translateAndAutoOrientArrows(t.sourceMarker,t.targetMarker)}},{key:"getTerminalView",value:function(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalAnchor",value:function(t){switch(t){case"source":return Pt.create(this.sourceAnchor);case"target":return Pt.create(this.targetAnchor);default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalConnectionPoint",value:function(t){switch(t){case"source":return Pt.create(this.sourcePoint);case"target":return Pt.create(this.targetPoint);default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"getTerminalMagnet",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case"source":{if(a.raw)return this.sourceMagnet;var s=this.sourceView;return s?this.sourceMagnet||s.container:null}case"target":{if(a.raw)return this.targetMagnet;var u=this.targetView;return u?this.targetMagnet||u.container:null}default:throw new Error("Unknown terminal type '".concat(t,"'"))}}},{key:"updateConnection",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.cell;if(t.translateBy&&a.isFragmentDescendantOf(t.translateBy)){var s=t.tx||0,u=t.ty||0;this.routePoints=new ku(this.routePoints).translate(s,u).points,this.translateConnectionPoints(s,u),this.path.translate(s,u)}else{var l=a.getVertices(),c=this.findAnchors(l);this.sourceAnchor=c.source,this.targetAnchor=c.target,this.routePoints=this.findRoutePoints(l);var f=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=f.source,this.targetPoint=f.target;var d=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,d.source||this.sourcePoint,d.target||this.targetPoint)}this.cleanCache()}},{key:"findAnchors",value:function(t){var a=this.cell,s=a.source,u=a.target,l=t[0],c=t[t.length-1];return u.priority&&!s.priority?this.findAnchorsOrdered("target",c,"source",l):this.findAnchorsOrdered("source",l,"target",c)}},{key:"findAnchorsOrdered",value:function(t,a,s,u){var l,c,f,d=this.cell,v=d[t],m=d[s],y=this.getTerminalView(t),C=this.getTerminalView(s),O=this.getTerminalMagnet(t),x=this.getTerminalMagnet(s);if(y){var T;a?T=Pt.create(a):C?T=x:T=Pt.create(m),c=this.getAnchor(v.anchor,y,O,T,t)}else c=Pt.create(v);if(C){var L=Pt.create(u||c);f=this.getAnchor(m.anchor,C,x,L,s)}else f=Pt.isPointLike(m)?Pt.create(m):new Pt;return l={},Object(Re.a)(l,t,c),Object(Re.a)(l,s,f),l}},{key:"getAnchor",value:function(t,a,s,u,l){var c=a.isEdgeElement(s),f=this.graph.options.connecting,d=typeof t=="string"?{name:t}:t;if(!d){var v=c?(l==="source"?f.sourceEdgeAnchor:f.targetEdgeAnchor)||f.edgeAnchor:(l==="source"?f.sourceAnchor:f.targetAnchor)||f.anchor;d=typeof v=="string"?{name:v}:v}if(!d)throw new Error("Anchor should be specified.");var m,y=d.name;if(c){var C=Nv.registry.get(y);if(typeof C!="function")return Nv.registry.onNotFound(y);m=A.call(C,this,a,s,u,d.args||{},l)}else{var O=Rv.registry.get(y);if(typeof O!="function")return Rv.registry.onNotFound(y);m=A.call(O,this,a,s,u,d.args||{},l)}return m?m.round(this.POINT_ROUNDING):new Pt}},{key:"findRoutePoints",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=this.graph.options.connecting.router||Od.presets.normal,s=this.cell.getRouter()||a,u;if(typeof s=="function")u=A.call(s,this,t,{},this);else{var l=typeof s=="string"?s:s.name,c=typeof s=="string"?{}:s.args||{},f=l?Od.registry.get(l):Od.presets.normal;if(typeof f!="function")return Od.registry.onNotFound(l);u=A.call(f,this,t,c,this)}return u==null?t.map(function(d){return Pt.create(d)}):u.map(function(d){return Pt.create(d)})}},{key:"findConnectionPoints",value:function(t,a,s){var u=this.cell,l=this.graph.options.connecting,c=u.getSource(),f=u.getTarget(),d=this.sourceView,v=this.targetView,m=t[0],y=t[t.length-1],C;if(d&&!d.isEdgeElement(this.sourceMagnet)){var O=this.sourceMagnet||d.container,x=m||s,T=new Sa(x,a),L=c.connectionPoint||l.sourceConnectionPoint||l.connectionPoint;C=this.getConnectionPoint(L,d,O,T,"source")}else C=a;var _;if(v&&!v.isEdgeElement(this.targetMagnet)){var z=this.targetMagnet||v.container,Q=f.connectionPoint||l.targetConnectionPoint||l.connectionPoint,q=y||a,ye=new Sa(q,s);_=this.getConnectionPoint(Q,v,z,ye,"target")}else _=s;return{source:C,target:_}}},{key:"getConnectionPoint",value:function(t,a,s,u,l){var c=u.end;if(t==null)return c;var f=typeof t=="string"?t:t.name,d=typeof t=="string"?{}:t.args,v=jv.registry.get(f);if(typeof v!="function")return jv.registry.onNotFound(f);var m=A.call(v,this,u,a,s,d||{},l);return m?m.round(this.POINT_ROUNDING):c}},{key:"updateMarkerAttr",value:function(t){var a=this.cell.getAttrs(),s=".".concat(t,"-marker"),u=a&&a[s];u&&this.updateAttrs(this.container,{},{attrs:Object(Re.a)({},s,u),selectors:this.selectors})}},{key:"findMarkerPoints",value:function(t,a,s){var u=this,l=function(z){for(var Q=u.cell.getAttrs(),q=Object.keys(Q),ye=0,Ce=q.length;ye<Ce;ye+=1){var Ae=Q[q[ye]];if(Ae["".concat(z,"Marker")]||Ae["".concat(z,"-marker")]){var Pe=Ae.strokeWidth||Ae["stroke-width"];if(Pe)return parseFloat(Pe);break}}return null},c=t[0],f=t[t.length-1],d=this.containers.sourceMarker,v=this.containers.targetMarker,m=this.markerCache,y,C;if(d){if(this.updateMarkerAttr("source"),m.sourceBBox=m.sourceBBox||M.getBBox(d),m.sourceBBox.width>0){var O=M.scale(d);y=a.clone().move(c||s,m.sourceBBox.width*O.sx*-1)}}else{var x=l("source");x&&(y=a.clone().move(c||s,-x))}if(v){if(this.updateMarkerAttr("target"),m.targetBBox=m.targetBBox||M.getBBox(v),m.targetBBox.width>0){var T=M.scale(v);C=s.clone().move(f||a,m.targetBBox.width*T.sx*-1)}}else{var L=l("target");L&&(C=s.clone().move(f||a,-L))}return m.sourcePoint=y||a.clone(),m.targetPoint=C||s.clone(),{source:y,target:C}}},{key:"findPath",value:function(t,a,s){var u=this.cell.getConnector()||this.graph.options.connecting.connector,l,c,f;if(typeof u=="string"?l=u:(l=u.name,c=u.args),l){var d=bh.registry.get(l);if(typeof d!="function")return bh.registry.onNotFound(l);f=d}else f=bh.presets.normal;var v=A.call(f,this,a,s,t,Object.assign(Object.assign({},c),{raw:!0}),this);return typeof v=="string"?pi.parse(v):v}},{key:"translateConnectionPoints",value:function(t,a){var s=this.markerCache;s.sourcePoint&&s.sourcePoint.translate(t,a),s.targetPoint&&s.targetPoint.translate(t,a),this.sourcePoint.translate(t,a),this.targetPoint.translate(t,a),this.sourceAnchor.translate(t,a),this.targetAnchor.translate(t,a)}},{key:"updateLabelPositions",value:function(){if(this.containers.labels==null)return this;var t=this.path;if(!t)return this;var a=this.cell,s=a.getLabels();if(s.length===0)return this;for(var u=a.getDefaultLabel(),l=this.normalizeLabelPosition(u.position),c=0,f=s.length;c<f;c+=1){var d=s[c],v=this.labelCache[c];if(!!v){var m=this.normalizeLabelPosition(d.position),y=p.merge({},l,m),C=this.getLabelTransformationMatrix(y);v.setAttribute("transform",M.matrixToTransformString(C))}}return this}},{key:"updateToolsPosition",value:function(){if(this.containers.tools==null)return this;var t="",a=this.options.toolsOffset,s=this.getConnectionLength();if(s!=null){s<this.options.shortLength&&(t="scale(.5)",a/=2);var u=this.getPointAtLength(a);if(u!=null&&M.attr(this.toolCache,"transform","translate(".concat(u.x,",").concat(u.y,") ").concat(t)),this.options.doubleTools&&s>=this.options.longLength){var l=this.options.doubleToolsOffset||a;u=this.getPointAtLength(s-l),u!=null&&M.attr(this.tool2Cache,"transform","translate(".concat(u.x,",").concat(u.y,") ").concat(t)),M.attr(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&M.attr(this.tool2Cache,"visibility","hidden")}return this}},{key:"updateArrowheadMarkers",value:function(){var t=this.containers.arrowheads;if(t==null)return this;if(t.style.display==="none")return this;var a=this.containers.sourceArrowhead,s=this.containers.targetArrowhead;if(a&&s){var u=this.getConnectionLength()||0,l=u<this.options.shortLength?.5:1;M.scale(a,l),M.scale(s,l),this.translateAndAutoOrientArrows(a,s)}return this}},{key:"updateTerminalProperties",value:function(t){var a=this.cell,s=this.graph,u=a[t],l=u&&u.cell,c="".concat(t,"View");if(!l)return this[c]=null,this.updateTerminalMagnet(t),!0;var f=s.getCellById(l);if(!f)throw new Error("Edge's ".concat(t,' node with id "').concat(l,'" not exists'));var d=f.findView(s);return d?(this[c]=d,this.updateTerminalMagnet(t),!0):!1}},{key:"updateTerminalMagnet",value:function(t){var a="".concat(t,"Magnet"),s=this.getTerminalView(t);if(s){var u=s.getMagnetFromEdgeTerminal(this.cell[t]);u===s.container&&(u=null),this[a]=u}else this[a]=null}},{key:"translateAndAutoOrientArrows",value:function(t,a){var s=this.routePoints;t&&M.translateAndAutoOrient(t,this.sourcePoint,s[0]||this.targetPoint,this.graph.view.stage),a&&M.translateAndAutoOrient(a,this.targetPoint,s[s.length-1]||this.sourcePoint,this.graph.view.stage)}},{key:"getLabelPositionAngle",value:function(t){var a=this.cell.getLabelAt(t);return a&&a.position&&typeof a.position=="object"&&a.position.angle||0}},{key:"getLabelPositionArgs",value:function(t){var a=this.cell.getLabelAt(t);if(a&&a.position&&typeof a.position=="object")return a.position.options}},{key:"getDefaultLabelPositionArgs",value:function(){var t=this.cell.getDefaultLabel();if(t&&t.position&&typeof t.position=="object")return t.position.options}},{key:"mergeLabelPositionArgs",value:function(t,a){return t===null?null:t===void 0?a===null?null:a:p.merge({},a,t)}},{key:"addLabel",value:function(t,a,s,u){var l,c,f=0,d;typeof t!="number"?(l=t.x,c=t.y,typeof a=="number"?(f=a,d=s):d=a):(l=t,c=a,typeof s=="number"?(f=s,d=u):d=s);var v=this.getDefaultLabelPositionArgs(),m=d,y=this.mergeLabelPositionArgs(m,v),C={position:this.getLabelPosition(l,c,f,y)},O=-1;return this.cell.insertLabel(C,O,d),O}},{key:"addVertex",value:function(t,a,s){var u=typeof t!="number",l=u?t.x:t,c=u?t.y:a,f=u?a:s,d={x:l,y:c},v=this.getVertexIndex(l,c);return this.cell.insertVertex(d,v,f),v}},{key:"sendToken",value:function(t,a,s){var u,l,c,f,d="linear";typeof a=="object"?(u=a.duration,l=a.reversed===!0,c=a.selector,a.rotate===!1?f="":a.rotate===!0?f="auto":a.rotate!=null&&(f="".concat(a.rotate)),a.timing&&(d=a.timing)):(u=a,l=!1,c=null),u=u||1e3;var v={dur:"".concat(u,"ms"),repeatCount:"1",calcMode:d,fill:"freeze"};if(f&&(v.rotate=f),l&&(v.keyPoints="1;0",v.keyTimes="0;1"),typeof a=="object"){var m=a.duration,y=a.reversed,C=a.selector,O=a.rotate,x=a.timing,T=QG(a,["duration","reversed","selector","rotate","timing"]);Object.keys(T).forEach(function(Ae){v[Ae]=T[Ae]})}var L;if(typeof c=="string"?L=this.findOne(c,this.container,this.selectors):L=this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(L instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");var _=typeof t=="string"?this.findOne(t):t;if(_==null)throw new Error("Token animation requires a valid token element.");var z=_.parentNode,Q=function(){z||M.remove(_)},q=oi.create(_);z||q.appendTo(this.graph.view.stage);var ye=v.complete;v.complete=function(Ae){Q(),s&&s(),ye&&ye(Ae)};var Ce=q.animateAlongPath(v,L);return function(){Q(),Ce()}}},{key:"getConnection",value:function(){return this.path!=null?this.path.clone():null}},{key:"getConnectionPathData",value:function(){if(this.path==null)return"";var t=this.cache.pathCache;return p.has(t,"data")||(t.data=this.path.serialize()),t.data||""}},{key:"getConnectionSubdivisions",value:function(){if(this.path==null)return null;var t=this.cache.pathCache;return p.has(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions}},{key:"getConnectionLength",value:function(){if(this.path==null)return 0;var t=this.cache.pathCache;return p.has(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length}},{key:"getPointAtLength",value:function(t){return this.path==null?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getPointAtRatio",value:function(t){return this.path==null?null:(E.isPercentage(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))}},{key:"getTangentAtLength",value:function(t){return this.path==null?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getTangentAtRatio",value:function(t){return this.path==null?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPoint",value:function(t){return this.path==null?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointLength",value:function(t){return this.path==null?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getClosestPointRatio",value:function(t){return this.path==null?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}},{key:"getLabelPosition",value:function(t,a,s,u){var l={distance:0},c=0,f;typeof s=="number"?(c=s,f=u):f=s,f!=null&&(l.options=f);var d=f&&f.absoluteOffset,v=!(f&&f.absoluteDistance),m=f&&f.absoluteDistance&&f.reverseDistance,y=this.path,C={segmentSubdivisions:this.getConnectionSubdivisions()},O=new Pt(t,a),x=y.closestPointT(O,C),T=this.getConnectionLength()||0,L=y.lengthAtT(x,C);v&&(L=T>0?L/T:0),m&&(L=-1*(T-L)||1),l.distance=L;var _;d||(_=y.tangentAtT(x));var z;if(_)z=_.pointOffset(O);else{var Q=y.pointAtT(x),q=O.diff(Q);z={x:q.x,y:q.y}}return l.offset=z,l.angle=c,l}},{key:"normalizeLabelPosition",value:function(t){return typeof t=="number"?{distance:t}:t}},{key:"getLabelTransformationMatrix",value:function(t){var a=this.normalizeLabelPosition(t),s=a.options||{},u=a.angle||0,l=a.distance,c=l>0&&l<=1,f=0,d={x:0,y:0},v=a.offset;v&&(typeof v=="number"?f=v:(v.x!=null&&(d.x=v.x),v.y!=null&&(d.y=v.y)));var m=d.x!==0||d.y!==0||f===0,y=s.keepGradient,C=s.ensureLegibility,O=this.path,x={segmentSubdivisions:this.getConnectionSubdivisions()},T=c?l*this.getConnectionLength():l,L=O.tangentAtLength(T,x),_,z=u;if(L){if(m)_=L.start,_.translate(d);else{var Q=L.clone();Q.rotate(-90,L.start),Q.setLength(f),_=Q.end}y&&(z=L.angle()+u,C&&(z=Mi.normalize((z+90)%180-90)))}else _=O.start,m&&_.translate(d);return M.createSVGMatrix().translate(_.x,_.y).rotate(z)}},{key:"getLabelCoordinates",value:function(t){var a=this.getLabelTransformationMatrix(t);return new Pt(a.e,a.f)}},{key:"getVertexIndex",value:function(t,a){var s=this.cell,u=s.getVertices(),l=this.getClosestPointLength(new Pt(t,a)),c=0;if(l!=null)for(var f=u.length;c<f;c+=1){var d=u[c],v=this.getClosestPointLength(d);if(v!=null&&l<v)break}return c}},{key:"getEventArgs",value:function(t,a,s){var u=this,l=u.cell,c=l;return a==null||s==null?{e:t,view:u,edge:l,cell:c}:{e:t,x:a,y:s,view:u,edge:l,cell:c}}},{key:"notifyUnhandledMouseDown",value:function(t,a,s){this.notify("edge:unhandled:mousedown",{e:t,x:a,y:s,view:this,cell:this.cell,edge:this.cell})}},{key:"notifyMouseDown",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseDown",this).call(this,t,a,s),this.notify("edge:mousedown",this.getEventArgs(t,a,s))}},{key:"notifyMouseMove",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseMove",this).call(this,t,a,s),this.notify("edge:mousemove",this.getEventArgs(t,a,s))}},{key:"notifyMouseUp",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseUp",this).call(this,t,a,s),this.notify("edge:mouseup",this.getEventArgs(t,a,s))}},{key:"onClick",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onClick",this).call(this,t,a,s),this.notify("edge:click",this.getEventArgs(t,a,s))}},{key:"onDblClick",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onDblClick",this).call(this,t,a,s),this.notify("edge:dblclick",this.getEventArgs(t,a,s))}},{key:"onContextMenu",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onContextMenu",this).call(this,t,a,s),this.notify("edge:contextmenu",this.getEventArgs(t,a,s))}},{key:"onMouseDown",value:function(t,a,s){this.notifyMouseDown(t,a,s);var u=t.target.getAttribute("class");switch(u){case"vertex":{this.startVertexDragging(t,a,s);return}case"vertex-remove":case"vertex-remove-area":{this.handleVertexRemoving(t,a,s);return}case"connection":case"connection-wrap":{this.handleVertexAdding(t,a,s);return}case"arrowhead":{this.startArrowheadDragging(t,a,s);return}case"source-marker":case"target-marker":{this.notifyUnhandledMouseDown(t,a,s);return}default:break}this.startEdgeDragging(t,a,s)}},{key:"onMouseMove",value:function(t,a,s){var u=this.getEventData(t);switch(u.action){case"drag-vertex":{this.dragVertex(t,a,s);break}case"drag-label":{this.dragLabel(t,a,s);break}case"drag-arrowhead":{this.dragArrowhead(t,a,s);break}case"drag-edge":{this.dragEdge(t,a,s);break}default:break}return this.notifyMouseMove(t,a,s),u}},{key:"onMouseUp",value:function(t,a,s){var u=this.getEventData(t);switch(u.action){case"drag-vertex":{this.stopVertexDragging(t,a,s);break}case"drag-label":{this.stopLabelDragging(t,a,s);break}case"drag-arrowhead":{this.stopArrowheadDragging(t,a,s);break}case"drag-edge":{this.stopEdgeDragging(t,a,s);break}default:break}return this.notifyMouseUp(t,a,s),this.checkMouseleave(t),u}},{key:"onMouseOver",value:function(t){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseOver",this).call(this,t),this.notify("edge:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseOut",this).call(this,t),this.notify("edge:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseEnter",this).call(this,t),this.notify("edge:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseLeave",this).call(this,t),this.notify("edge:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,a,s,u){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseWheel",this).call(this,t,a,s,u),this.notify("edge:mousewheel",Object.assign({delta:u},this.getEventArgs(t,a,s)))}},{key:"onCustomEvent",value:function(t,a,s,u){var l=M.findParentByClass(t.target,"edge-tool",this.container);if(l){if(t.stopPropagation(),this.can("useEdgeTools")){if(a==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:a},this.getEventArgs(t,s,u)))}this.notifyMouseDown(t,s,u)}else this.notify("edge:customevent",Object.assign({name:a},this.getEventArgs(t,s,u))),Object(Aa.a)(Object(Ma.a)(n.prototype),"onCustomEvent",this).call(this,t,a,s,u)}},{key:"onLabelMouseDown",value:function(t,a,s){this.notifyMouseDown(t,a,s),this.startLabelDragging(t,a,s);var u=this.getEventData(t).stopPropagation;u&&t.stopPropagation()}},{key:"startEdgeDragging",value:function(t,a,s){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(t,a,s);return}this.setEventData(t,{x:a,y:s,moving:!1,action:"drag-edge"})}},{key:"dragEdge",value:function(t,a,s){var u=this.getEventData(t);u.moving||(u.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:a,y:s,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(a-u.x,s-u.y,{ui:!0}),this.setEventData(t,{x:a,y:s}),this.notify("edge:moving",{e:t,x:a,y:s,view:this,cell:this.cell,edge:this.cell})}},{key:"stopEdgeDragging",value:function(t,a,s){var u=this.getEventData(t);u.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:a,y:s,view:this,cell:this.cell,edge:this.cell})),u.moving=!1}},{key:"prepareArrowheadDragging",value:function(t,a){var s=this.getTerminalMagnet(t),u={action:"drag-arrowhead",x:a.x,y:a.y,isNewEdge:a.isNewEdge===!0,terminalType:t,initialMagnet:s,initialTerminal:p.clone(this.cell[t]),fallbackAction:a.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:a.options};return this.beforeArrowheadDragging(u),u}},{key:"createValidateConnectionArgs",value:function(t){var a=[];a[4]=t,a[5]=this;var s,u=0,l=0;t==="source"?(u=2,s="target"):(l=2,s="source");var c=this.cell[s],f=c.cell;if(f){var d,v=a[u]=this.graph.renderer.findViewByCell(f);v&&(d=v.getMagnetFromEdgeTerminal(c),d===v.container&&(d=void 0)),a[u+1]=d}return function(m,y){return a[l]=m,a[l+1]=m.container===y?void 0:y,a}}},{key:"beforeArrowheadDragging",value:function(t){t.zIndex=this.cell.zIndex,this.cell.toFront();var a=this.container.style;t.pointerEvents=a.pointerEvents,a.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)}},{key:"afterArrowheadDragging",value:function(t){t.zIndex!=null&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null);var a=this.container;a.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)}},{key:"arrowheadDragging",value:function(t,a,s,u){if(u.x=a,u.y=s,u.currentTarget!==t)if(u.currentMagnet&&u.currentView&&u.currentView.unhighlight(u.currentMagnet,{type:"magnetAdsorbed"}),u.currentView=this.graph.renderer.findViewByElem(t),u.currentView){var l;u.currentMagnet=u.currentView.findMagnet(t),u.currentMagnet&&(l=this.graph.hook).validateConnection.apply(l,Object(We.a)(u.getValidateConnectionArgs(u.currentView,u.currentMagnet)).concat([u.currentView.getEdgeTerminal(u.currentMagnet,a,s,this.cell,u.terminalType)]))?u.currentView.highlight(u.currentMagnet,{type:"magnetAdsorbed"}):u.currentMagnet=null}else u.currentMagnet=null;u.currentTarget=t,this.cell.prop(u.terminalType,{x:a,y:s},Object.assign(Object.assign({},u.options),{ui:!0}))}},{key:"arrowheadDragged",value:function(t,a,s){var u=t.currentView,l=t.currentMagnet;if(!(!l||!u)){u.unhighlight(l,{type:"magnetAdsorbed"});var c=t.terminalType,f=u.getEdgeTerminal(l,a,s,this.cell,c);this.cell.setTerminal(c,f,{ui:!0})}}},{key:"snapArrowhead",value:function(t,a,s){var u=this,l=this.graph,c=l.options.connecting,f=c.snap,d=c.allowEdge,v=typeof f=="object"&&f.radius||50,m={x:t-v,y:a-v,width:2*v,height:2*v},y=l.renderer.findViewsInArea(m);if(d){var C=l.renderer.findEdgeViewsInArea(m).filter(function(Ae){return Ae!==u});y.push.apply(y,Object(We.a)(C))}var O=s.closestView||null,x=s.closestMagnet||null;s.closestView=null,s.closestMagnet=null;var T,L=Number.MAX_SAFE_INTEGER,_=new Pt(t,a);y.forEach(function(Ae){if(Ae.container.getAttribute("magnet")!=="false"&&(T=Ae.cell.getBBox().getCenter().distance(_),T<v&&T<L)){var Pe;(x===Ae.container||(Pe=l.hook).validateConnection.apply(Pe,Object(We.a)(s.getValidateConnectionArgs(Ae,null)).concat([Ae.getEdgeTerminal(Ae.container,t,a,u.cell,s.terminalType)])))&&(L=T,s.closestView=Ae,s.closestMagnet=Ae.container)}Ae.container.querySelectorAll("[magnet]").forEach(function(qe){if(qe.getAttribute("magnet")!=="false"){var lt=Ae.getBBoxOfElement(qe);if(T=_.distance(lt.getCenter()),T<v&&T<L){var ze;(x===qe||(ze=l.hook).validateConnection.apply(ze,Object(We.a)(s.getValidateConnectionArgs(Ae,qe)).concat([Ae.getEdgeTerminal(qe,t,a,u.cell,s.terminalType)])))&&(L=T,s.closestView=Ae,s.closestMagnet=qe)}}})});var z,Q=s.terminalType,q=s.closestView,ye=s.closestMagnet,Ce=x!==ye;if(O&&Ce&&O.unhighlight(x,{type:"magnetAdsorbed"}),q){if(!Ce)return;q.highlight(ye,{type:"magnetAdsorbed"}),z=q.getEdgeTerminal(ye,t,a,this.cell,Q)}else z={x:t,y:a};this.cell.setTerminal(Q,z,{},Object.assign(Object.assign({},s.options),{ui:!0}))}},{key:"snapArrowheadEnd",value:function(t){var a=t.closestView,s=t.closestMagnet;a&&s&&(a.unhighlight(s,{type:"magnetAdsorbed"}),t.currentMagnet=a.findMagnet(s)),t.closestView=null,t.closestMagnet=null}},{key:"finishEmbedding",value:function(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)}},{key:"fallbackConnection",value:function(t){switch(t.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0});break}}},{key:"notifyConnectionEvent",value:function(t,a){var s=t.terminalType,u=t.initialTerminal,l=this.cell[s],c=l&&!Fo.equalTerminals(u,l);if(c){var f=this.graph,d=u,v=d.cell?f.getCellById(d.cell):null,m=d.port,y=v?f.findViewByCell(v):null,C=v||t.isNewEdge?null:Pt.create(u).toJSON(),O=l,x=O.cell?f.getCellById(O.cell):null,T=O.port,L=x?f.findViewByCell(x):null,_=x?null:Pt.create(l).toJSON();this.notify("edge:connected",{e:a,previousCell:v,previousPort:m,previousView:y,previousPoint:C,currentCell:x,currentView:L,currentPort:T,currentPoint:_,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:s,isNew:t.isNewEdge})}}},{key:"highlightAvailableMagnets",value:function(t){var a=this,s=this.graph,u=s.model.getCells();t.marked={};for(var l=function(m,y){var C=s.renderer.findViewByCell(u[m]);if(!C)return"continue";var O=Array.prototype.slice.call(C.container.querySelectorAll("[magnet]"));C.container.getAttribute("magnet")!=="false"&&O.push(C.container);var x=O.filter(function(_){var z;return(z=s.hook).validateConnection.apply(z,Object(We.a)(t.getValidateConnectionArgs(C,_)).concat([C.getEdgeTerminal(_,t.x,t.y,a.cell,t.terminalType)]))});if(x.length>0){for(var T=0,L=x.length;T<L;T+=1)C.highlight(x[T],{type:"magnetAvailable"});C.highlight(null,{type:"nodeAvailable"}),t.marked[C.cell.id]=x}},c=0,f=u.length;c<f;c+=1)var d=l(c,f)}},{key:"unhighlightAvailableMagnets",value:function(t){var a=this,s=t.marked||{};Object.keys(s).forEach(function(u){var l=a.graph.renderer.findViewByCell(u);if(l){var c=s[u];c.forEach(function(f){l.unhighlight(f,{type:"magnetAvailable"})}),l.unhighlight(null,{type:"nodeAvailable"})}}),t.marked=null}},{key:"startArrowheadDragging",value:function(t,a,s){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(t,a,s);return}var u=t.target,l=u.getAttribute("data-terminal"),c=this.prepareArrowheadDragging(l,{x:a,y:s});this.setEventData(t,c)}},{key:"dragArrowhead",value:function(t,a,s){var u=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(a,s,u):this.arrowheadDragging(this.getEventTarget(t),a,s,u)}},{key:"stopArrowheadDragging",value:function(t,a,s){var u=this.graph,l=this.getEventData(t);u.options.connecting.snap?this.snapArrowheadEnd(l):this.arrowheadDragged(l,a,s);var c=u.hook.validateEdge(this.cell,l.terminalType,l.initialTerminal);c?(this.finishEmbedding(l),this.notifyConnectionEvent(l,t)):this.fallbackConnection(l),this.afterArrowheadDragging(l)}},{key:"startLabelDragging",value:function(t,a,s){if(this.can("edgeLabelMovable")){var u=t.currentTarget,l=parseInt(u.getAttribute("data-index"),10),c=this.getLabelPositionAngle(l),f=this.getLabelPositionArgs(l),d=this.getDefaultLabelPositionArgs(),v=this.mergeLabelPositionArgs(f,d);this.setEventData(t,{index:l,positionAngle:c,positionArgs:v,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)}},{key:"dragLabel",value:function(t,a,s){var u=this.getEventData(t),l=this.cell.getLabelAt(u.index),c=p.merge({},l,{position:this.getLabelPosition(a,s,u.positionAngle,u.positionArgs)});this.cell.setLabelAt(u.index,c)}},{key:"stopLabelDragging",value:function(t,a,s){}},{key:"handleVertexAdding",value:function(t,a,s){if(!this.can("vertexAddable")){this.notifyUnhandledMouseDown(t,a,s);return}var u=this.addVertex({x:a,y:s},{ui:!0});this.setEventData(t,{index:u,action:"drag-vertex"})}},{key:"handleVertexRemoving",value:function(t,a,s){if(!this.can("vertexDeletable")){this.notifyUnhandledMouseDown(t,a,s);return}var u=t.target,l=parseInt(u.getAttribute("idx"),10);this.cell.removeVertexAt(l)}},{key:"startVertexDragging",value:function(t,a,s){if(!this.can("vertexMovable")){this.notifyUnhandledMouseDown(t,a,s);return}var u=t.target,l=parseInt(u.getAttribute("idx"),10);this.setEventData(t,{index:l,action:"drag-vertex"})}},{key:"dragVertex",value:function(t,a,s){var u=this.getEventData(t);this.cell.setVertexAt(u.index,{x:a,y:s},{ui:!0})}},{key:"stopVertexDragging",value:function(t,a,s){}}]),n}(as,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"&&typeof e.update=="function"&&typeof e.getConnection=="function"}o.isEdgeView=i})(Lv||(Lv={})),Lv.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),Lv.registry.register("edge",Lv,!0);var Vs=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(){var e;return Object(me.a)(this,n),e=r.apply(this,arguments),e.scalableNode=null,e.rotatableNode=null,e.scalableSelector="scalable",e.rotatableSelector="rotatable",e.defaultPortMarkup=Li.getPortMarkup(),e.defaultPortLabelMarkup=Li.getPortLabelMarkup(),e.defaultPortContainerMarkup=Li.getPortContainerMarkup(),e.portsCache={},e}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"getContainerClassName",value:function(){var t=[Object(Aa.a)(Object(Ma.a)(n.prototype),"getContainerClassName",this).call(this),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")}},{key:"updateClassName",value:function(t){var a=t.target;if(a.hasAttribute("magnet")){var s=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?M.removeClass(a,s):M.addClass(a,s)}else{var u=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(u):this.addClass(u)}}},{key:"isNodeView",value:function(){return!0}},{key:"confirmUpdate",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t;return this.hasAction(u,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(u,"render")?(this.render(),u=this.removeAction(u,["render","update","resize","translate","rotate","ports","tools"])):(u=this.handleAction(u,"resize",function(){return a.resize(s)},"update"),u=this.handleAction(u,"update",function(){return a.update()},Ll.useCSSSelector?"ports":null),u=this.handleAction(u,"translate",function(){return a.translate()}),u=this.handleAction(u,"rotate",function(){return a.rotate()}),u=this.handleAction(u,"ports",function(){return a.renderPorts()}),u=this.handleAction(u,"tools",function(){return a.renderTools()})),u}},{key:"update",value:function(t){this.cleanCache(),Ll.useCSSSelector&&this.removePorts();var a=this.cell,s=a.getSize(),u=a.getAttrs();this.updateAttrs(this.container,u,{attrs:t===u?null:t,rootBBox:new Br(0,0,s.width,s.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),Ll.useCSSSelector&&this.renderPorts()}},{key:"renderMarkup",value:function(){var t=this.cell.markup;if(t)return typeof t=="string"?this.renderStringMarkup(t):this.renderJSONMarkup(t);throw new TypeError("Invalid node markup.")}},{key:"renderJSONMarkup",value:function(t){var a=this.parseJSONMarkup(t,this.container),s=function(l){return Array.isArray(l)?l[0]:l};this.selectors=a.selectors,this.rotatableNode=s(this.selectors[this.rotatableSelector]),this.scalableNode=s(this.selectors[this.scalableSelector]),this.container.appendChild(a.fragment)}},{key:"renderStringMarkup",value:function(t){M.append(this.container,oi.toNodes(oi.createVectors(t))),this.rotatableNode=M.findOne(this.container,".".concat(this.rotatableSelector)),this.scalableNode=M.findOne(this.container,".".concat(this.scalableSelector)),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}},{key:"render",value:function(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),Ll.useCSSSelector||this.renderPorts(),this.renderTools(),this}},{key:"resize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.scalableNode)return this.updateSize(t);this.cell.getAngle()&&this.rotate(),this.update()}},{key:"translate",value:function(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}},{key:"rotate",value:function(){if(this.rotatableNode){this.updateRotation(),this.update();return}this.updateTransform()}},{key:"getTranslationString",value:function(){var t=this.cell.getPosition();return"translate(".concat(t.x,",").concat(t.y,")")}},{key:"getRotationString",value:function(){var t=this.cell.getAngle();if(t){var a=this.cell.getSize();return"rotate(".concat(t,",").concat(a.width/2,",").concat(a.height/2,")")}}},{key:"updateTransform",value:function(){var t=this.getTranslationString(),a=this.getRotationString();a&&(t+=" ".concat(a)),this.container.setAttribute("transform",t)}},{key:"updateRotation",value:function(){if(this.rotatableNode!=null){var t=this.getRotationString();t!=null?this.rotatableNode.setAttribute("transform",t):this.rotatableNode.removeAttribute("transform")}}},{key:"updateTranslation",value:function(){this.container.setAttribute("transform",this.getTranslationString())}},{key:"updateSize",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.cell,s=a.getSize(),u=a.getAngle(),l=this.scalableNode,c=!1;l.getElementsByTagName("path").length>0&&(c=!0);var f=M.getBBox(l,{recursive:c}),d=s.width/(f.width||1),v=s.height/(f.height||1);l.setAttribute("transform","scale(".concat(d,",").concat(v,")"));var m=this.rotatableNode;if(m!=null){var y=m.getAttribute("transform");if(y){m.setAttribute("transform","".concat(y," rotate(").concat(-u,",").concat(s.width/2,",").concat(s.height/2,")"));var C=M.getBBox(l,{target:this.graph.view.stage});a.prop("position",{x:C.x,y:C.y},Object.assign({updated:!0},t)),this.translate(),this.rotate()}}this.update()}},{key:"findPortElem",value:function(t,a){var s=t?this.portsCache[t]:null;if(!s)return null;var u=s.portContentElement,l=s.portContentSelectors||{};return this.findOne(a,u,l)}},{key:"initializePorts",value:function(){this.cleanPortsCache()}},{key:"refreshPorts",value:function(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}},{key:"cleanPortsCache",value:function(){this.portsCache={}}},{key:"removePorts",value:function(){var t=this;Object.keys(this.portsCache).forEach(function(a){var s=t.portsCache[a];M.remove(s.portElement)})}},{key:"renderPorts",value:function(){var t=this,a=this.getPortsContainer(),s=[];a.childNodes.forEach(function(c){s.push(c)});var u=B.groupBy(this.cell.getParsedPorts(),"zIndex"),l="auto";u[l]&&u[l].forEach(function(c){var f=t.getPortElement(c);a.append(f),s.push(f)}),Object.keys(u).forEach(function(c){if(c!==l){var f=parseInt(c,10);t.appendPorts(u[c],f,s)}}),this.updatePorts()}},{key:"getPortsContainer",value:function(){return this.rotatableNode||this.container}},{key:"appendPorts",value:function(t,a,s){var u=this,l=t.map(function(c){return u.getPortElement(c)});s[a]||a<0?M.before(s[Math.max(a,0)],l):M.append(this.getPortsContainer(),l)}},{key:"getPortElement",value:function(t){var a=this.portsCache[t.id];return a?a.portElement:this.createPortElement(t)}},{key:"createPortElement",value:function(t){var a=Li.renderMarkup(this.getPortContainerMarkup()),s=a.elem;if(s==null)throw new Error("Invalid port container markup.");a=Li.renderMarkup(this.getPortMarkup(t));var u=a.elem,l=a.selectors;if(u==null)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},u),a=Li.renderMarkup(this.getPortLabelMarkup(t.label));var c=a.elem,f=a.selectors;if(c==null)throw new Error("Invalid port label markup.");var d;if(l&&f){for(var v in f)if(l[v]&&v!==this.rootSelector)throw new Error("Selectors within port must be unique.");d=Object.assign(Object.assign({},l),f)}else d=l||f;var m="x6-port";return t.group&&(m+=" x6-port-".concat(t.group)),M.addClass(s,m),M.addClass(u,"x6-port-body"),M.addClass(c,"x6-port-label"),s.appendChild(u),s.appendChild(c),this.portsCache[t.id]={portElement:s,portSelectors:d,portLabelElement:c,portLabelSelectors:f,portContentElement:u,portContentSelectors:l},this.graph.hook.onPortRendered({port:t,node:this.cell,container:s,selectors:d,labelContainer:c,labelSelectors:f,contentContainer:u,contentSelectors:l}),s}},{key:"updatePorts",value:function(){var t=this;this.updatePortGroup();var a=this.cell.getParsedGroups();Object.keys(a).forEach(function(s){return t.updatePortGroup(s)})}},{key:"updatePortGroup",value:function(t){for(var a=Br.fromSize(this.cell.getSize()),s=this.cell.getPortsLayoutByGroup(t,a),u=0,l=s.length;u<l;u+=1){var c=s[u],f=c.portId,d=this.portsCache[f]||{},v=c.portLayout;if(this.applyPortTransform(d.portElement,v),c.portAttrs!=null){var m={selectors:d.portSelectors||{}};c.portSize&&(m.rootBBox=Br.fromSize(c.portSize)),this.updateAttrs(d.portElement,c.portAttrs,m)}var y=c.labelLayout;if(y&&(this.applyPortTransform(d.portLabelElement,y,-(v.angle||0)),y.attrs)){var C={selectors:d.portLabelSelectors||{}};c.labelSize&&(C.rootBBox=Br.fromSize(c.labelSize)),this.updateAttrs(d.portLabelElement,y.attrs,C)}}}},{key:"applyPortTransform",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=a.angle,l=a.position,c=M.createSVGMatrix().rotate(s).translate(l.x||0,l.y||0).rotate(u||0);M.transform(t,c,{absolute:!0})}},{key:"getPortContainerMarkup",value:function(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}},{key:"getPortMarkup",value:function(t){return t.markup||this.cell.portMarkup||this.defaultPortMarkup}},{key:"getPortLabelMarkup",value:function(t){return t.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}},{key:"getEventArgs",value:function(t,a,s){var u=this,l=u.cell,c=l;return a==null||s==null?{e:t,view:u,node:l,cell:c}:{e:t,x:a,y:s,view:u,node:l,cell:c}}},{key:"notifyMouseDown",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseDown",this).call(this,t,a,s),this.notify("node:mousedown",this.getEventArgs(t,a,s))}},{key:"notifyMouseMove",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseMove",this).call(this,t,a,s),this.notify("node:mousemove",this.getEventArgs(t,a,s))}},{key:"notifyMouseUp",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseUp",this).call(this,t,a,s),this.notify("node:mouseup",this.getEventArgs(t,a,s))}},{key:"onClick",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onClick",this).call(this,t,a,s),this.notify("node:click",this.getEventArgs(t,a,s))}},{key:"onDblClick",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onDblClick",this).call(this,t,a,s),this.notify("node:dblclick",this.getEventArgs(t,a,s))}},{key:"onContextMenu",value:function(t,a,s){Object(Aa.a)(Object(Ma.a)(n.prototype),"onContextMenu",this).call(this,t,a,s),this.notify("node:contextmenu",this.getEventArgs(t,a,s))}},{key:"onMouseDown",value:function(t,a,s){if(!this.isPropagationStopped(t)){var u=t.target;M.clickable(u)||M.isInputElement(u)||(this.notifyMouseDown(t,a,s),this.startNodeDragging(t,a,s))}}},{key:"onMouseMove",value:function(t,a,s){var u=this.getEventData(t),l=u.action;if(l==="magnet")this.dragMagnet(t,a,s);else{if(l==="move"){var c=u,f=c.targetView||this;f.dragNode(t,a,s),f.notify("node:moving",{e:t,x:a,y:s,view:f,cell:f.cell,node:f.cell})}this.notifyMouseMove(t,a,s)}this.setEventData(t,u)}},{key:"onMouseUp",value:function(t,a,s){var u=this.getEventData(t),l=u.action;if(l==="magnet")this.stopMagnetDragging(t,a,s);else{var c=t.target;if(M.clickable(c)||M.isInputElement(c))return;if(this.notifyMouseUp(t,a,s),l==="move"){var f=u,d=f.targetView||this;d.stopNodeDragging(t,a,s)}}var v=u.targetMagnet;v&&this.onMagnetClick(t,v,a,s),this.checkMouseleave(t)}},{key:"onMouseOver",value:function(t){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseOver",this).call(this,t),this.notify("node:mouseover",this.getEventArgs(t))}},{key:"onMouseOut",value:function(t){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseOut",this).call(this,t),this.notify("node:mouseout",this.getEventArgs(t))}},{key:"onMouseEnter",value:function(t){this.updateClassName(t),Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseEnter",this).call(this,t),this.notify("node:mouseenter",this.getEventArgs(t))}},{key:"onMouseLeave",value:function(t){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseLeave",this).call(this,t),this.notify("node:mouseleave",this.getEventArgs(t))}},{key:"onMouseWheel",value:function(t,a,s,u){Object(Aa.a)(Object(Ma.a)(n.prototype),"onMouseWheel",this).call(this,t,a,s,u),this.notify("node:mousewheel",Object.assign({delta:u},this.getEventArgs(t,a,s)))}},{key:"onMagnetClick",value:function(t,a,s,u){var l=this.graph.view.getMouseMovedCount(t);l>this.graph.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:a},this.getEventArgs(t,s,u)))}},{key:"onMagnetDblClick",value:function(t,a,s,u){this.notify("node:magnet:dblclick",Object.assign({magnet:a},this.getEventArgs(t,s,u)))}},{key:"onMagnetContextMenu",value:function(t,a,s,u){this.notify("node:magnet:contextmenu",Object.assign({magnet:a},this.getEventArgs(t,s,u)))}},{key:"onMagnetMouseDown",value:function(t,a,s,u){this.startMagnetDragging(t,s,u)}},{key:"onCustomEvent",value:function(t,a,s,u){this.notify("node:customevent",Object.assign({name:a},this.getEventArgs(t,s,u))),Object(Aa.a)(Object(Ma.a)(n.prototype),"onCustomEvent",this).call(this,t,a,s,u)}},{key:"prepareEmbedding",value:function(t){var a=this.getEventData(t),s=a.cell||this.cell,u=this.graph.findViewByCell(s),l=this.graph.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:s,view:u,cell:s,x:l.x,y:l.y,currentParent:s.getParent()})}},{key:"processEmbedding",value:function(t,a){var s=this,u=a.cell||this.cell,l=a.graph||this.graph,c=l.options.embedding,f=c.findParent,d=typeof f=="function"?A.call(f,l,{view:this,node:this.cell}).filter(function(z){return Ui.isCell(z)&&s.cell.id!==z.id&&!z.isDescendantOf(s.cell)}):l.model.getNodesUnderNode(u,{by:f});if(c.frontOnly&&d.length>0){var v=B.groupBy(d,"zIndex"),m=B.max(Object.keys(v).map(function(z){return parseInt(z,10)}));m&&(d=v[m])}d=d.filter(function(z){return z.visible});for(var y=null,C=a.candidateEmbedView,O=c.validate,x=d.length-1;x>=0;x-=1){var T=d[x];if(C&&C.cell.id===T.id){y=C;break}else{var L=T.findView(l);if(A.call(O,l,{child:this.cell,parent:L.cell,childView:this,parentView:L})){y=L;break}}}this.clearEmbedding(a),y&&y.highlight(null,{type:"embedding"}),a.candidateEmbedView=y;var _=l.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:u,node:u,view:l.findViewByCell(u),x:_.x,y:_.y,currentParent:u.getParent(),candidateParent:y?y.cell:null})}},{key:"clearEmbedding",value:function(t){var a=t.candidateEmbedView;a&&(a.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)}},{key:"finalizeEmbedding",value:function(t,a){this.graph.startBatch("embedding");var s=a.cell||this.cell,u=a.graph||this.graph,l=u.findViewByCell(s),c=s.getParent(),f=a.candidateEmbedView;if(f?(f.unhighlight(null,{type:"embedding"}),a.candidateEmbedView=null,(c==null||c.id!==f.cell.id)&&f.cell.insertChild(s,void 0,{ui:!0})):c&&c.unembed(s,{ui:!0}),u.model.getConnectedEdges(s,{deep:!0}).forEach(function(v){v.updateParent({ui:!0})}),l&&f){var d=u.snapToGrid(t.clientX,t.clientY);l.notify("node:embedded",{e:t,cell:s,x:d.x,y:d.y,node:s,view:u.findViewByCell(s),previousParent:c,currentParent:s.getParent()})}this.graph.stopBatch("embedding")}},{key:"getDelegatedView",value:function(){for(var t=this.cell,a=this;a&&!t.isEdge();){if(!t.hasParent()||a.can("stopDelegateOnDragging"))return a;t=t.getParent(),a=this.graph.renderer.findViewByCell(t)}return null}},{key:"startMagnetDragging",value:function(t,a,s){if(!!this.can("magnetConnectable")){t.stopPropagation();var u=t.currentTarget,l=this.graph;this.setEventData(t,{targetMagnet:u}),l.hook.validateMagnet(this,u,t)?(l.options.magnetThreshold<=0&&this.startConnectting(t,u,a,s),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):((M.hasClass(u,"x6-port-body")||Kt()(u).closest(".x6-port-body").length>0)&&this.stopPropagation(t),this.onMouseDown(t,a,s)),l.view.delegateDragEvents(t,this)}}},{key:"startConnectting",value:function(t,a,s,u){this.graph.model.startBatch("add-edge");var l=this.createEdgeFromMagnet(a,s,u);l.notifyMouseDown(t,s,u),l.setEventData(t,l.prepareArrowheadDragging("target",{x:s,y:u,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:l})}},{key:"createEdgeFromMagnet",value:function(t,a,s){var u=this.graph,l=u.model,c=u.hook.getDefaultEdge(this,t);return c.setSource(Object.assign(Object.assign({},c.getSource()),this.getEdgeTerminal(t,a,s,c,"source"))),c.setTarget(Object.assign(Object.assign({},c.getTarget()),{x:a,y:s})),c.addTo(l,{async:!1,ui:!0}),c.findView(u)}},{key:"dragMagnet",value:function(t,a,s){var u=this.getEventData(t),l=u.edgeView;if(l)l.onMouseMove(t,a,s),this.autoScrollGraph(t.clientX,t.clientY);else{var c=this.graph,f=c.options.magnetThreshold,d=this.getEventTarget(t),v=u.targetMagnet;if(f==="onleave"){if(v===d||v.contains(d))return}else if(c.view.getMouseMovedCount(t)<=f)return;this.startConnectting(t,v,a,s)}}},{key:"stopMagnetDragging",value:function(t,a,s){var u=this.eventData(t),l=u.edgeView;l&&(l.onMouseUp(t,a,s),this.graph.model.stopBatch("add-edge"))}},{key:"notifyUnhandledMouseDown",value:function(t,a,s){this.notify("node:unhandled:mousedown",{e:t,x:a,y:s,view:this,cell:this.cell,node:this.cell})}},{key:"notifyNodeMove",value:function(t,a,s,u,l){var c=this,f=[l],d=this.graph.selection.widget;if(d&&d.options.movable){var v=this.graph.getSelectedCells();v.includes(l)&&(f=v.filter(function(m){return m.isNode()}))}f.forEach(function(m){c.notify(t,{e:a,x:s,y:u,cell:m,node:m,view:m.findView(c.graph)})})}},{key:"startNodeDragging",value:function(t,a,s){var u=this.getDelegatedView();if(u==null||!u.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,a,s);this.setEventData(t,{targetView:u,action:"move"});var l=Pt.create(u.cell.getPosition());u.setEventData(t,{moving:!1,offset:l.diff(a,s),restrict:this.graph.hook.getRestrictArea(u)})}},{key:"dragNode",value:function(t,a,s){var u=this.cell,l=this.graph,c=l.getGridSize(),f=this.getEventData(t),d=f.offset,v=f.restrict;f.moving||(f.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,a,s,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);var m=hs.snapToGrid(a+d.x,c),y=hs.snapToGrid(s+d.y,c);u.setPosition(m,y,{restrict:v,deep:!0,ui:!0}),l.options.embedding.enabled&&(f.embedding||(this.prepareEmbedding(t),f.embedding=!0),this.processEmbedding(t,f))}},{key:"stopNodeDragging",value:function(t,a,s){var u=this.getEventData(t);u.embedding&&this.finalizeEmbedding(t,u),u.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,a,s,this.cell)),u.moving=!1,u.embedding=!1}},{key:"autoScrollGraph",value:function(t,a){var s=this.graph.scroller.widget;s&&s.autoScroll(t,a)}}]),n}(as,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.isNodeView=="function"&&typeof e.isEdgeView=="function"&&typeof e.confirmUpdate=="function"&&typeof e.update=="function"&&typeof e.findPortElem=="function"&&typeof e.resize=="function"&&typeof e.rotate=="function"&&typeof e.translate=="function"}o.isNodeView=i})(Vs||(Vs={})),Vs.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),Vs.registry.register("node",Vs,!0);var wk=lS("text"),xk=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r)}(If("text",{view:wk,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0}));(function(o){var i=function(r){Object(xr.a)(e,r);var n=Object(Sr.a)(e);function e(){return Object(me.a)(this,e),n.apply(this,arguments)}return Object(ue.a)(e,[{key:"confirmUpdate",value:function(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=Object(Aa.a)(Object(Ma.a)(e.prototype),"confirmUpdate",this).call(this,a,s);return this.hasAction(u,"scale")&&(this.resize(),u=this.removeAction(u,"scale")),u}}]),e}(Vs);o.View=i,i.config({actions:{attrs:["scale"]}}),Vs.registry.register(wk,i)})(xk||(xk={}));var Sk=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object(me.a)(this,r),e=i.call(this),e.length=0,e.comparator=t.comparator||"zIndex",e.clean(),n&&e.reset(n,{silent:!0}),e}return Object(ue.a)(r,[{key:"toJSON",value:function(){return this.cells.map(function(e){return e.toJSON()})}},{key:"add",value:function(e,t,a){var s=this,u,l;typeof t=="number"?(u=t,l=Object.assign({merge:!1},a)):(u=this.length,l=Object.assign({merge:!1},t)),u>this.length&&(u=this.length),u<0&&(u+=this.length+1);var c=Array.isArray(e)?e:[e],f=this.comparator&&typeof t!="number"&&l.sort!==!1,d=this.comparator||null,v=!1,m=[],y=[];if(c.forEach(function(O){var x=s.get(O);x?l.merge&&!O.isSameStore(x)&&(x.setProp(O.getProp(),a),y.push(x),f&&!v&&(d==null||typeof d=="function"?v=x.hasChanged():typeof d=="string"?v=x.hasChanged(d):v=d.some(function(T){return x.hasChanged(T)}))):(m.push(O),s.reference(O))}),m.length){var C;f&&(v=!0),(C=this.cells).splice.apply(C,[u,0].concat(m)),this.length=this.cells.length}return v&&this.sort({silent:!0}),l.silent||(m.forEach(function(O,x){var T={cell:O,index:u+x,options:l};s.trigger("added",T),l.dryrun||O.notify("added",Object.assign({},T))}),v&&this.trigger("sorted"),(m.length||y.length)&&this.trigger("updated",{added:m,merged:y,removed:[],options:l})),this}},{key:"remove",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Array.isArray(e)?e:[e],s=this.removeCells(a,t);return!t.silent&&s.length>0&&this.trigger("updated",{options:t,removed:s,added:[],merged:[]}),Array.isArray(e)?s:s[0]}},{key:"removeCells",value:function(e,t){for(var a=[],s=0;s<e.length;s+=1){var u=this.get(e[s]);if(u!=null){var l=this.cells.indexOf(u);this.cells.splice(l,1),this.length-=1,delete this.map[u.id],a.push(u),this.unreference(u),t.dryrun||u.remove(),t.silent||(this.trigger("removed",{cell:u,index:l,options:t}),t.dryrun||u.notify("removed",{cell:u,index:l,options:t}))}}return a}},{key:"reset",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.cells.slice();if(s.forEach(function(f){return t.unreference(f)}),this.clean(),this.add(e,Object.assign({silent:!0},a)),!a.silent){var u=this.cells.slice();this.trigger("reseted",{options:a,previous:s,current:u});var l=[],c=[];u.forEach(function(f){var d=s.some(function(v){return v.id===f.id});d||l.push(f)}),s.forEach(function(f){var d=u.some(function(v){return v.id===f.id});d||c.push(f)}),this.trigger("updated",{options:a,added:l,removed:c,merged:[]})}return this}},{key:"push",value:function(e,t){return this.add(e,this.length,t)}},{key:"pop",value:function(e){var t=this.at(this.length-1);return this.remove(t,e)}},{key:"unshift",value:function(e,t){return this.add(e,0,t)}},{key:"shift",value:function(e){var t=this.at(0);return this.remove(t,e)}},{key:"get",value:function(e){if(e==null)return null;var t=typeof e=="string"||typeof e=="number"?e:e.id;return this.map[t]||null}},{key:"has",value:function(e){return this.get(e)!=null}},{key:"at",value:function(e){return e<0&&(e+=this.length),this.cells[e]||null}},{key:"first",value:function(){return this.at(0)}},{key:"last",value:function(){return this.at(-1)}},{key:"indexOf",value:function(e){return this.cells.indexOf(e)}},{key:"toArray",value:function(){return this.cells.slice()}},{key:"sort",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.comparator!=null&&(this.cells=B.sortBy(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}},{key:"clone",value:function(){var e=this.constructor;return new e(this.cells.slice(),{comparator:this.comparator})}},{key:"reference",value:function(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}},{key:"unreference",value:function(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}},{key:"notifyCellEvent",value:function(e,t){var a=t.cell;this.trigger("cell:".concat(e),t),a&&(a.isNode()?this.trigger("node:".concat(e),Object.assign(Object.assign({},t),{node:a})):a.isEdge()&&this.trigger("edge:".concat(e),Object.assign(Object.assign({},t),{edge:a})))}},{key:"clean",value:function(){this.length=0,this.cells=[],this.map={}}}]),r}(yu),_l=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Object(me.a)(this,n),e=r.call(this),e.batches={},e.addings=new WeakMap,e.nodes={},e.edges={},e.outgoings={},e.incomings={},e.collection=new Sk(t),e.setup(),e}return Object(ue.a)(n,[{key:i,get:function(){return n.toStringTag}},{key:"notify",value:function(t,a){this.trigger(t,a);var s=this.graph;return s&&(t==="sorted"||t==="reseted"||t==="updated"?s.trigger("model:".concat(t),a):s.trigger(t,a)),this}},{key:"setup",value:function(){var t=this,a=this.collection;a.on("sorted",function(){return t.notify("sorted",null)}),a.on("updated",function(s){return t.notify("updated",s)}),a.on("cell:change:zIndex",function(){return t.sortOnChangeZ()}),a.on("added",function(s){var u=s.cell;t.onCellAdded(u)}),a.on("removed",function(s){var u=s.cell;t.onCellRemoved(u,s.options),t.notify("cell:removed",s),u.isNode()?t.notify("node:removed",Object.assign(Object.assign({},s),{node:u})):u.isEdge()&&t.notify("edge:removed",Object.assign(Object.assign({},s),{edge:u}))}),a.on("reseted",function(s){t.onReset(s.current),t.notify("reseted",s)}),a.on("edge:change:source",function(s){var u=s.edge;return t.onEdgeTerminalChanged(u,"source")}),a.on("edge:change:target",function(s){var u=s.edge;t.onEdgeTerminalChanged(u,"target")})}},{key:"sortOnChangeZ",value:function(){this.collection.sort()}},{key:"onCellAdded",value:function(t){var a=t.id;t.isEdge()?(t.updateParent(),this.edges[a]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[a]=!0}},{key:"onCellRemoved",value:function(t,a){var s=t.id;if(t.isEdge()){delete this.edges[s];var u=t.getSource(),l=t.getTarget();if(u&&u.cell){var c=this.outgoings[u.cell],f=c?c.indexOf(s):-1;f>=0&&(c.splice(f,1),c.length===0&&delete this.outgoings[u.cell])}if(l&&l.cell){var d=this.incomings[l.cell],v=d?d.indexOf(s):-1;v>=0&&(d.splice(v,1),d.length===0&&delete this.incomings[l.cell])}}else delete this.nodes[s];a.clear||(a.disconnectEdges?this.disconnectConnectedEdges(t,a):this.removeConnectedEdges(t,a)),t.model===this&&(t.model=null)}},{key:"onReset",value:function(t){var a=this;this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(function(s){return a.onCellAdded(s)})}},{key:"onEdgeTerminalChanged",value:function(t,a){var s=a==="source"?this.outgoings:this.incomings,u=t.previous(a);if(u&&u.cell){var l=Ui.isCell(u.cell)?u.cell.id:u.cell,c=s[l],f=c?c.indexOf(t.id):-1;f>=0&&(c.splice(f,1),c.length===0&&delete s[l])}var d=t.getTerminal(a);if(d&&d.cell){var v=Ui.isCell(d.cell)?d.cell.id:d.cell,m=s[v]||[],y=m.indexOf(t.id);y===-1&&m.push(t.id),s[v]=m}}},{key:"prepareCell",value:function(t,a){return!t.model&&(!a||!a.dryrun)&&(t.model=this),t.zIndex==null&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t}},{key:"resetCells",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.map(function(u){return a.prepareCell(u,Object.assign(Object.assign({},s),{dryrun:!0}))}),this.collection.reset(t,s),t.map(function(u){return a.prepareCell(u,{options:s})}),this}},{key:"clear",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.getCells();if(a.length===0)return this;var s=Object.assign(Object.assign({},t),{clear:!0});return this.batchUpdate("clear",function(){for(var u=a.sort(function(c,f){var d=c.isEdge()?1:2,v=f.isEdge()?1:2;return d-v});u.length>0;){var l=u.shift();l&&l.remove(s)}},s),this}},{key:"addNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=fo.isNode(t)?t:this.createNode(t);return this.addCell(s,a),s}},{key:"createNode",value:function(t){return fo.create(t)}},{key:"addEdge",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Fo.isEdge(t)?t:this.createEdge(t);return this.addCell(s,a),s}},{key:"createEdge",value:function(t){return Fo.create(t)}},{key:"addCell",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Array.isArray(t)?this.addCells(t,s):(!this.collection.has(t)&&!this.addings.has(t)&&(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,s),s),t.eachChild(function(u){return a.addCell(u,s)}),this.addings.delete(t)),this)}},{key:"addCells",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=t.length;if(u===0)return this;var l=Object.assign(Object.assign({},s),{position:u-1,maxPosition:u-1});return this.startBatch("add",Object.assign(Object.assign({},l),{cells:t})),t.forEach(function(c){a.addCell(c,l),l.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},l),{cells:t})),this}},{key:"removeCell",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=typeof t=="string"?this.getCell(t):t;return s&&this.has(s)?this.collection.remove(s,a):null}},{key:"updateCellId",value:function(t,a){this.startBatch("update",{id:a}),t.prop("id",a);var s=t.clone({keepId:!0});this.addCell(s);var u=this.getConnectedEdges(t);return u.forEach(function(l){var c=l.getSourceCell(),f=l.getTargetCell();c===t&&l.setSource(Object.assign(Object.assign({},l.getSource()),{cell:a})),f===t&&l.setTarget(Object.assign(Object.assign({},l.getTarget()),{cell:a}))}),this.removeCell(t),this.stopBatch("update",{id:a}),s}},{key:"removeCells",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.length?this.batchUpdate("remove",function(){return t.map(function(u){return a.removeCell(u,s)})}):[]}},{key:"removeConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getConnectedEdges(t);return s.forEach(function(u){u.remove(a)}),s}},{key:"disconnectConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=typeof t=="string"?t:t.id;this.getConnectedEdges(t).forEach(function(u){var l=u.getSourceCell(),c=u.getTargetCell();l&&l.id===s&&u.setSource({x:0,y:0},a),c&&c.id===s&&u.setTarget({x:0,y:0},a)})}},{key:"has",value:function(t){return this.collection.has(t)}},{key:"total",value:function(){return this.collection.length}},{key:"indexOf",value:function(t){return this.collection.indexOf(t)}},{key:"getCell",value:function(t){return this.collection.get(t)}},{key:"getCells",value:function(){return this.collection.toArray()}},{key:"getFirstCell",value:function(){return this.collection.first()}},{key:"getLastCell",value:function(){return this.collection.last()}},{key:"getMinZIndex",value:function(){var t=this.collection.first();return t&&t.getZIndex()||0}},{key:"getMaxZIndex",value:function(){var t=this.collection.last();return t&&t.getZIndex()||0}},{key:"getCellsFromCache",value:function(t){var a=this;return t?Object.keys(t).map(function(s){return a.getCell(s)}).filter(function(s){return s!=null}):[]}},{key:"getNodes",value:function(){return this.getCellsFromCache(this.nodes)}},{key:"getEdges",value:function(){return this.getCellsFromCache(this.edges)}},{key:"getOutgoingEdges",value:function(t){var a=this,s=typeof t=="string"?t:t.id,u=this.outgoings[s];return u?u.map(function(l){return a.getCell(l)}).filter(function(l){return l&&l.isEdge()}):null}},{key:"getIncomingEdges",value:function(t){var a=this,s=typeof t=="string"?t:t.id,u=this.incomings[s];return u?u.map(function(l){return a.getCell(l)}).filter(function(l){return l&&l.isEdge()}):null}},{key:"getConnectedEdges",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[],l=typeof t=="string"?this.getCell(t):t;if(l==null)return u;var c={},f=s.indirect,d=s.incoming,v=s.outgoing;d==null&&v==null&&(d=v=!0);var m=function x(T,L){var _=L?a.getOutgoingEdges(T):a.getIncomingEdges(T);if(_!=null&&_.forEach(function(Q){c[Q.id]||(u.push(Q),c[Q.id]=!0,f&&(d&&x(Q,!1),v&&x(Q,!0)))}),f&&T.isEdge()){var z=L?T.getTargetCell():T.getSourceCell();z&&z.isEdge()&&(c[z.id]||(u.push(z),x(z,L)))}};if(v&&m(l,!0),d&&m(l,!1),s.deep){var y=l.getDescendants({deep:!0}),C={};y.forEach(function(x){x.isNode()&&(C[x.id]=!0)});var O=function(T,L){var _=L?a.getOutgoingEdges(T.id):a.getIncomingEdges(T.id);_!=null&&_.forEach(function(z){if(!c[z.id]){var Q=z.getSourceCell(),q=z.getTargetCell();if(!s.enclosed&&Q&&C[Q.id]&&q&&C[q.id])return;u.push(z),c[z.id]=!0}})};y.forEach(function(x){x.isEdge()||(v&&O(x,!0),d&&O(x,!1))})}return u}},{key:"isBoundary",value:function(t,a){var s=typeof t=="string"?this.getCell(t):t,u=a?this.getIncomingEdges(s):this.getOutgoingEdges(s);return u==null||u.length===0}},{key:"getBoundaryNodes",value:function(t){var a=this,s=[];return Object.keys(this.nodes).forEach(function(u){if(a.isBoundary(u,t)){var l=a.getCell(u);l&&s.push(l)}}),s}},{key:"getRoots",value:function(){return this.getBoundaryNodes(!0)}},{key:"getLeafs",value:function(){return this.getBoundaryNodes(!1)}},{key:"isRoot",value:function(t){return this.isBoundary(t,!0)}},{key:"isLeaf",value:function(t){return this.isBoundary(t,!1)}},{key:"getNeighbors",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.incoming,u=a.outgoing;s==null&&u==null&&(s=u=!0);var l=this.getConnectedEdges(t,a),c=l.reduce(function(v,m){var y=m.hasLoop(a),C=m.getSourceCell(),O=m.getTargetCell();return s&&C&&C.isNode()&&!v[C.id]&&(y||C!==t&&(!a.deep||!C.isDescendantOf(t)))&&(v[C.id]=C),u&&O&&O.isNode()&&!v[O.id]&&(y||O!==t&&(!a.deep||!O.isDescendantOf(t)))&&(v[O.id]=O),v},{});if(t.isEdge()){if(s){var f=t.getSourceCell();f&&f.isNode()&&!c[f.id]&&(c[f.id]=f)}if(u){var d=t.getTargetCell();d&&d.isNode()&&!c[d.id]&&(c[d.id]=d)}}return Object.keys(c).map(function(v){return c[v]})}},{key:"isNeighbor",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=s.incoming,l=s.outgoing;return u==null&&l==null&&(u=l=!0),this.getConnectedEdges(t,s).some(function(c){var f=c.getSourceCell(),d=c.getTargetCell();return!!(u&&f&&f.id===a.id||l&&d&&d.id===a.id)})}},{key:"getSuccessors",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[];return this.search(t,function(l,c){l!==t&&a.matchDistance(c,s.distance)&&u.push(l)},Object.assign(Object.assign({},s),{outgoing:!0})),u}},{key:"isSuccessor",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=!1;return this.search(t,function(c,f){if(c===a&&c!==t&&s.matchDistance(f,u.distance))return l=!0,!1},Object.assign(Object.assign({},u),{outgoing:!0})),l}},{key:"getPredecessors",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[];return this.search(t,function(l,c){l!==t&&a.matchDistance(c,s.distance)&&u.push(l)},Object.assign(Object.assign({},s),{incoming:!0})),u}},{key:"isPredecessor",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=!1;return this.search(t,function(c,f){if(c===a&&c!==t&&s.matchDistance(f,u.distance))return l=!0,!1},Object.assign(Object.assign({},u),{incoming:!0})),l}},{key:"matchDistance",value:function(t,a){return a==null?!0:typeof a=="function"?a(t):Array.isArray(a)&&a.includes(t)?!0:t===a}},{key:"getCommonAncestor",value:function(){for(var t=[],a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return s.forEach(function(l){l&&(Array.isArray(l)?t.push.apply(t,Object(We.a)(l)):t.push(l))}),Ui.getCommonAncestor.apply(Ui,t)}},{key:"getSubGraph",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=[],l={},c=[],f=[],d=function(m){l[m.id]||(u.push(m),l[m.id]=m,m.isEdge()&&f.push(m),m.isNode()&&c.push(m))};return t.forEach(function(v){if(d(v),s.deep){var m=v.getDescendants({deep:!0});m.forEach(function(y){return d(y)})}}),f.forEach(function(v){var m=v.getSourceCell(),y=v.getTargetCell();m&&!l[m.id]&&(u.push(m),l[m.id]=m,m.isNode()&&c.push(m)),y&&!l[y.id]&&(u.push(y),l[y.id]=y,y.isNode()&&c.push(y))}),c.forEach(function(v){var m=a.getConnectedEdges(v,s);m.forEach(function(y){var C=y.getSourceCell(),O=y.getTargetCell();!l[y.id]&&C&&l[C.id]&&O&&l[O.id]&&(u.push(y),l[y.id]=y)})}),u}},{key:"cloneSubGraph",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getSubGraph(t,a);return this.cloneCells(s)}},{key:"cloneCells",value:function(t){return Ui.cloneCells(t)}},{key:"getNodesFromPoint",value:function(t,a){var s=typeof t=="number"?{x:t,y:a||0}:t;return this.getNodes().filter(function(u){return u.getBBox().containsPoint(s)})}},{key:"getNodesInArea",value:function(t,a,s,u,l){var c=typeof t=="number"?new Br(t,a,s,u):Br.create(t),f=typeof t=="number"?l:a,d=f&&f.strict;return this.getNodes().filter(function(v){var m=v.getBBox();return d?c.containsRect(m):c.isIntersectWithRect(m)})}},{key:"getEdgesInArea",value:function(t,a,s,u,l){var c=typeof t=="number"?new Br(t,a,s,u):Br.create(t),f=typeof t=="number"?l:a,d=f&&f.strict;return this.getEdges().filter(function(v){var m=v.getBBox();return m.width===0?m.inflate(1,0):m.height===0&&m.inflate(0,1),d?c.containsRect(m):c.isIntersectWithRect(m)})}},{key:"getNodesUnderNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=t.getBBox(),u=a.by==null||a.by==="bbox"?this.getNodesInArea(s):this.getNodesFromPoint(s[a.by]);return u.filter(function(l){return t.id!==l.id&&!l.isDescendantOf(t)})}},{key:"getAllCellsBBox",value:function(){return this.getCellsBBox(this.getCells())}},{key:"getCellsBBox",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ui.getCellsBBox(t,a)}},{key:"search",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};s.breadthFirst?this.breadthFirstSearch(t,a,s):this.depthFirstSearch(t,a,s)}},{key:"breadthFirstSearch",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=[],c={},f={};l.push(t),f[t.id]=0;for(var d=function(){var y=l.shift();if(y==null||c[y.id]||(c[y.id]=!0,A.call(a,s,y,f[y.id])===!1))return"continue";var C=s.getNeighbors(y,u);C.forEach(function(O){f[O.id]=f[y.id]+1,l.push(O)})};l.length>0;)var v=d()}},{key:"depthFirstSearch",value:function(t,a){var s=this,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=[],c={},f={};l.push(t),f[t.id]=0;for(var d=function(){var y=l.pop();if(y==null||c[y.id]||(c[y.id]=!0,A.call(a,s,y,f[y.id])===!1))return"continue";var C=s.getNeighbors(y,u),O=l.length;C.forEach(function(x){f[x.id]=f[y.id]+1,l.splice(O,0,x)})};l.length>0;)var v=d()}},{key:"getShortestPath",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u={};this.getEdges().forEach(function(v){var m=v.getSourceCellId(),y=v.getTargetCellId();m&&y&&(u[m]||(u[m]=[]),u[y]||(u[y]=[]),u[m].push(y),s.directed||u[y].push(m))});var l=typeof t=="string"?t:t.id,c=rS.run(u,l,s.weight),f=[],d=typeof a=="string"?a:a.id;for(c[d]&&f.push(d);d=c[d];)f.unshift(d);return f}},{key:"translate",value:function(t,a,s){return this.getCells().filter(function(u){return!u.hasParent()}).forEach(function(u){return u.translate(t,a,s)}),this}},{key:"resize",value:function(t,a,s){return this.resizeCells(t,a,this.getCells(),s)}},{key:"resizeCells",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.getCellsBBox(s);if(l){var c=Math.max(t/l.width,0),f=Math.max(a/l.height,0),d=l.getOrigin();s.forEach(function(v){return v.scale(c,f,d,u)})}return this}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return n.toJSON(this.getCells(),t)}},{key:"parseJSON",value:function(t){return n.fromJSON(t)}},{key:"fromJSON",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.parseJSON(t);return this.resetCells(s,a),this}},{key:"startBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:a}),this}},{key:"stopBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:a}),this}},{key:"batchUpdate",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.startBatch(t,s);var u=a();return this.stopBatch(t,s),u}},{key:"hasActiveBatch",value:function(){var t=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Object.keys(this.batches),s=Array.isArray(a)?a:[a];return s.some(function(u){return t.batches[u]>0})}}]),n}(yu,Symbol.toStringTag);(function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&typeof e.addNode=="function"&&typeof e.addEdge=="function"&&e.collection!=null}o.isModel=i})(_l||(_l={})),function(o){function i(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{cells:n.map(function(t){return t.toJSON(e)})}}o.toJSON=i;function r(n){var e=[];return Array.isArray(n)?e.push.apply(e,Object(We.a)(n)):(n.cells&&e.push.apply(e,Object(We.a)(n.cells)),n.nodes&&n.nodes.forEach(function(t){t.shape==null&&(t.shape="rect"),e.push(t)}),n.edges&&n.edges.forEach(function(t){t.shape==null&&(t.shape="edge"),e.push(t)})),e.map(function(t){var a=t.shape;if(a){if(fo.registry.exist(a))return fo.create(t);if(Fo.registry.exist(a))return Fo.create(t)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}o.fromJSON=r}(_l||(_l={}));var Rf=".text-block-content",k1=lS("text-block"),D1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"content",get:function(){return this.getContent()},set:function(e){this.setContent(e)}},{key:"getContent",value:function(){return this.store.get("content","")}},{key:"setContent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.store.set("content",e,t)}},{key:"setup",value:function(){var e=this;Object(Aa.a)(Object(Ma.a)(r.prototype),"setup",this).call(this),this.store.on("change:*",function(t){var a=t.key;a==="content"?e.updateContent(e.getContent()):a==="size"&&e.updateSize(e.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}},{key:"updateSize",value:function(e){sa.SUPPORT_FOREIGNOBJECT&&this.setAttrs(Object(Re.a)({foreignObject:Object.assign({},e)},Rf,{style:Object.assign({},e)}))}},{key:"updateContent",value:function(e){sa.SUPPORT_FOREIGNOBJECT?this.setAttrs(Object(Re.a)({},Rf,{html:e?S.sanitizeHTML(e):""})):this.setAttrs(Object(Re.a)({},Rf,{text:e}))}}]),r}(fo);(function(o){o.config({type:k1,view:k1,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',sa.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">','<div class="'.concat(Rf.substr(1),'" />'),"</body>","</foreignObject>"].join(""):'<text class="'.concat(Rf.substr(1),'"/>'),"</g>"].join(""),attrs:Object(Re.a)({".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}}},Rf,{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}})}),fo.registry.register(k1,o)})(D1||(D1={})),function(o){var i="content",r=function(n){Object(xr.a)(t,n);var e=Object(Sr.a)(t);function t(){return Object(me.a)(this,t),e.apply(this,arguments)}return Object(ue.a)(t,[{key:"confirmUpdate",value:function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=Object(Aa.a)(Object(Ma.a)(t.prototype),"confirmUpdate",this).call(this,s,u);return this.hasAction(l,i)&&(this.updateContent(),l=this.removeAction(l,i)),l}},{key:"update",value:function(s){if(sa.SUPPORT_FOREIGNOBJECT)Object(Aa.a)(Object(Ma.a)(t.prototype),"update",this).call(this,s);else{var u=this.cell,l=Object.assign({},s||u.getAttrs());delete l[Rf],Object(Aa.a)(Object(Ma.a)(t.prototype),"update",this).call(this,l),(!s||p.has(s,Rf))&&this.updateContent(s)}}},{key:"updateContent",value:function(s){if(sa.SUPPORT_FOREIGNOBJECT)Object(Aa.a)(Object(Ma.a)(t.prototype),"update",this).call(this,s);else{var u=this.cell,l=(s||u.getAttrs())[Rf],c=M.breakText(u.getContent(),u.getSize(),l,{svgDocument:this.graph.view.svg}),f=Object(Re.a)({},Rf,p.merge({},l,{text:c}));Object(Aa.a)(Object(Ma.a)(t.prototype),"update",this).call(this,f)}}}]),t}(Vs);o.View=r,function(n){n.config({bootstrap:["render",i],actions:sa.SUPPORT_FOREIGNOBJECT?{}:{size:i,content:i}}),Vs.registry.register(k1,n)}(r=o.View||(o.View={}))}(D1||(D1={}));var qG=au.define({shape:"empty"});function e8(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body";return[{tagName:o,selector:i},{tagName:"text",selector:"label"}]}function wd(o,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n={constructorName:o,markup:e8(o,r.selector),attrs:Object(Re.a)({},o,Object.assign({},au.bodyAttr))},e=r.parent||au;return e.define(p.merge(n,i,{shape:o}))}var t8=wd("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),n8=fo.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},au.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},au.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},au.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},au.labelAttr),{refY2:15})}}),r8=wd("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),cS=10,a8=au.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},au.bodyAttr),{lateral:cS}),top:Object.assign(Object.assign({},au.bodyAttr),{refCx:"50%",refRx:"50%",cy:cS,ry:cS})},attrHooks:{lateral:{set:function(i,r){var n=r.refBBox,e=E.isPercentage(i);e&&(i=parseFloat(i)/100);var t=n.x,a=n.y,s=n.width,u=n.height,l=s/2,c=e?u*i:i,f=.551784,d=f*l,v=f*c,m=t,y=t+s/2,C=t+s,O=a+c,x=O-c,T=a+u-c,L=a+u,_=["M",m,O,"L",m,T,"C",t,T+v,y-d,L,y,L,"C",y+d,L,C,T+v,C,T,"L",C,O,"C",C,O-v,y+d,x,y,x,"C",y-d,x,m,O-v,m,O,"Z"];return{d:_.join(" ")}}}},knob:{enabled:!0,position:function(i){var r=i.node,n=r.attr("body/lateral");return{x:0,y:n}},onMouseMove:function(i){var r=i.node,n=i.data,e=i.deltaY;if(e!==0){var t=r.getBBox(),a=r.attr("body/lateral");n.round==null&&(n.round=a);var s=0,u=t.height/2,l=E.clamp(n.round+e,s,u);l!==a&&r.attr({body:{lateral:l},top:{cy:l,ry:l}})}}}}),i8=wd("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}}),o8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},I1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"points",get:function(){return this.getPoints()},set:function(e){this.setPoints(e)}},{key:"getPoints",value:function(){return this.getAttrByPath("body/refPoints")}},{key:"setPoints",value:function(e,t){return e==null?this.removePoints():this.setAttrByPath("body/refPoints",r.pointsToString(e),t),this}},{key:"removePoints",value:function(){return this.removeAttrByPath("body/refPoints"),this}}]),r}(au);(function(o){function i(r){return typeof r=="string"?r:r.map(function(n){return Array.isArray(n)?n.join(","):Pt.isPointLike(n)?"".concat(n.x,", ").concat(n.y):""}).join(" ")}o.pointsToString=i,o.config({propHooks:function(n){var e=n.points,t=o8(n,["points"]);if(e){var a=i(e);a&&p.setByPath(t,"attrs/body/refPoints",a)}return t}})})(I1||(I1={}));var s8=wd("polygon",{},{parent:I1}),u8=wd("polyline",{},{parent:I1}),l8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},c8=au.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks:function(i){var r=i.path,n=l8(i,["path"]);return r&&p.setByPath(n,"attrs/body/refD",r),n}}),f8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},d8=au.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},sa.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:M.ns.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},au.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks:function(i){var r=i.text,n=f8(i,["text"]);return r&&p.setByPath(n,"attrs/label/text",r),n},attrHooks:{text:{set:function(i,r){var n=r.cell,e=r.view,t=r.refBBox,a=r.elem,s=r.attrs;if(a instanceof HTMLElement)a.textContent=i;else{var u=s.style||{},l={text:i,width:-5,height:"100%"},c=Object.assign({textVerticalAnchor:"middle"},u),f=zc.presets.textWrap;return A.call(f.set,this,l,{cell:n,view:e,elem:a,refBBox:t,attrs:c}),{fill:u.color||null}}},position:function(i,r){var n=r.refBBox,e=r.elem;if(e instanceof SVGElement)return n.getCenter()}}}}),h8=wd("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:u0()},{selector:"image"}),v8=wd("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:u0()}),p8=wd("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:u0()}),g8=wd("image-inscribed",{propHooks:u0(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}}),fS=Fo.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),m8=Fo.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),y8=Fo.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}}),Vc=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"html",get:function(){return this.getHTML()},set:function(e){this.setHTML(e)}},{key:"getHTML",value:function(){return this.store.get("html")}},{key:"setHTML",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeHTML(t):this.store.set("html",e,t),this}},{key:"removeHTML",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("html",e)}}]),r}(au);(function(o){var i=function(r){Object(xr.a)(e,r);var n=Object(Sr.a)(e);function e(){return Object(me.a)(this,e),n.apply(this,arguments)}return Object(ue.a)(e,[{key:"init",value:function(){var a=this;Object(Aa.a)(Object(Ma.a)(e.prototype),"init",this).call(this),this.cell.on("change:*",function(){var s=a.graph.hook.shouldUpdateHTMLComponent(a.cell);s&&a.renderHTMLComponent()})}},{key:"confirmUpdate",value:function(a){var s=this,u=Object(Aa.a)(Object(Ma.a)(e.prototype),"confirmUpdate",this).call(this,a);return this.handleAction(u,e.action,function(){return s.renderHTMLComponent()})}},{key:"renderHTMLComponent",value:function(){var a=this.selectors.foContent;if(a){var s=this.$(a).empty(),u=this.graph.hook.getHTMLComponent(this.cell);u&&(typeof u=="string"?s.html(u):s.append(u))}}}]),e}(Vs);o.View=i,function(r){r.action="html",r.config({bootstrap:[r.action],actions:{html:r.action}}),Vs.registry.register("html-view",r)}(i=o.View||(o.View={}))})(Vc||(Vc={})),function(o){o.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Li.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),fo.registry.register("html",o)}(Vc||(Vc={})),function(o){o.componentRegistry=Xo.create({type:"html componnet"})}(Vc||(Vc={}));var b8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},R1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.delay=10,e.throttle=2,e.threshold=5,e.changeCount=0,e.timestamp=0,e.options=Object.assign(Object.assign({},r.defaultOptions),n),e.graph.model.on("cell:change:*",e.onModelChanged,Object(rs.a)(e)),e}return Object(ue.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"onModelChanged",value:function(){if(!this.disabled){var e=new Date().getTime(),t=(e-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}}},{key:"save",value:function(){this.trigger("save")}},{key:"reset",value:function(){this.changeCount=0,this.timestamp=new Date().getTime()}},{key:"dispose",value:function(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}}]),r}(KP);b8([KP.dispose()],R1.prototype,"dispose",null),function(o){o.defaultOptions={delay:10,throttle:2,threshold:5}}(R1||(R1={}));var ho=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.graph=n,e.init(),e}return Object(ue.a)(r,[{key:"options",get:function(){return this.graph.options}},{key:"model",get:function(){return this.graph.model}},{key:"view",get:function(){return this.graph.view}},{key:"init",value:function(){}}]),r}(Uc),C8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Ch=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;Object(me.a)(this,r),e=i.call(this),e.graph=n;var t=Li.parseJSONMarkup(r.markup),a=t.selectors,s=t.fragment;return e.background=a.background,e.grid=a.grid,e.svg=a.svg,e.defs=a.defs,e.viewport=a.viewport,e.primer=a.primer,e.stage=a.stage,e.decorator=a.decorator,e.overlay=a.overlay,e.container=e.options.container,e.restore=r.snapshoot(e.container),e.$(e.container).addClass(e.prefixClassName("graph")).append(s),e.delegateEvents(),e}return Object(ue.a)(r,[{key:"model",get:function(){return this.graph.model}},{key:"options",get:function(){return this.graph.options}},{key:"delegateEvents",value:function(){var e=this.constructor;return Object(Aa.a)(Object(Ma.a)(r.prototype),"delegateEvents",this).call(this,e.events),this}},{key:"guard",value:function(e,t){return e.type==="mousedown"&&e.button===2||this.options.guard&&this.options.guard(e,t)?!0:e.data&&e.data.guarded!==void 0?e.data.guarded:!(t&&t.cell&&Ui.isCell(t.cell)||this.svg===e.target||this.container===e.target||Kt.a.contains(this.svg,e.target))}},{key:"findView",value:function(e){return this.graph.renderer.findViewByElem(e)}},{key:"onDblClick",value:function(e){this.options.preventDefaultDblClick&&e.preventDefault();var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){var s=this.graph.snapToGrid(t.clientX,t.clientY);a?a.onDblClick(t,s.x,s.y):this.graph.trigger("blank:dblclick",{e:t,x:s.x,y:s.y})}}},{key:"onClick",value:function(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){var t=this.normalizeEvent(e),a=this.findView(t.target);if(this.guard(t,a))return;var s=this.graph.snapToGrid(t.clientX,t.clientY);a?a.onClick(t,s.x,s.y):this.graph.trigger("blank:click",{e:t,x:s.x,y:s.y})}}},{key:"isPreventDefaultContextMenu",value:function(e,t){var a=this.options.preventDefaultContextMenu;return typeof a=="function"&&(a=A.call(a,this.graph,{view:t})),a}},{key:"onContextMenu",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(this.isPreventDefaultContextMenu(t,a)&&e.preventDefault(),!this.guard(t,a)){var s=this.graph.snapToGrid(t.clientX,t.clientY);a?a.onContextMenu(t,s.x,s.y):this.graph.trigger("blank:contextmenu",{e:t,x:s.x,y:s.y})}}},{key:"delegateDragEvents",value:function(e,t){e.data==null&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});var a=this.constructor;this.delegateDocumentEvents(a.documentEvents,e.data),this.undelegateEvents()}},{key:"getMouseMovedCount",value:function(e){var t=this.getEventData(e);return t.mouseMovedCount||0}},{key:"onMouseDown",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){this.options.preventDefaultMouseDown&&t.preventDefault();var s=this.graph.snapToGrid(t.clientX,t.clientY);a?a.onMouseDown(t,s.x,s.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:s.x,y:s.y})),this.delegateDragEvents(t,a)}}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),a=t.startPosition;if(!(a&&a.x===e.clientX&&a.y===e.clientY)){t.mouseMovedCount==null&&(t.mouseMovedCount=0),t.mouseMovedCount+=1;var s=t.mouseMovedCount;if(!(s<=this.options.moveThreshold)){var u=this.normalizeEvent(e),l=this.graph.snapToGrid(u.clientX,u.clientY),c=t.currentView;c?c.onMouseMove(u,l.x,l.y):this.graph.trigger("blank:mousemove",{e:u,x:l.x,y:l.y}),this.setEventData(u,t)}}}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents();var t=this.normalizeEvent(e),a=this.graph.snapToGrid(t.clientX,t.clientY),s=this.getEventData(e),u=s.currentView;u?u.onMouseUp(t,a.x,a.y):this.graph.trigger("blank:mouseup",{e:t,x:a.x,y:a.y}),e.isPropagationStopped()||this.onClick(Kt.a.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}},{key:"onMouseOver",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a))if(a)a.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}},{key:"onMouseOut",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a))if(a)a.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}},{key:"onMouseEnter",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){var s=this.graph.renderer.findViewByElem(t.relatedTarget);if(a){if(s===a)return;a.onMouseEnter(t)}else{if(s)return;this.graph.trigger("graph:mouseenter",{e:t})}}}},{key:"onMouseLeave",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){var s=this.graph.renderer.findViewByElem(t.relatedTarget);if(a){if(s===a)return;a.onMouseLeave(t)}else{if(s)return;this.graph.trigger("graph:mouseleave",{e:t})}}}},{key:"onMouseWheel",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);if(!this.guard(t,a)){var s=t.originalEvent,u=this.graph.snapToGrid(s.clientX,s.clientY),l=Math.max(-1,Math.min(1,s.wheelDelta||-s.detail));a?a.onMouseWheel(t,u.x,u.y,l):this.graph.trigger("blank:mousewheel",{e:t,delta:l,x:u.x,y:u.y})}}},{key:"onCustomEvent",value:function(e){var t=e.currentTarget,a=t.getAttribute("event")||t.getAttribute("data-event");if(a){var s=this.findView(t);if(s){var u=this.normalizeEvent(e);if(this.guard(u,s))return;var l=this.graph.snapToGrid(u.clientX,u.clientY);s.onCustomEvent(u,a,l.x,l.y)}}}},{key:"handleMagnetEvent",value:function(e,t){var a=e.currentTarget,s=a.getAttribute("magnet");if(s&&s.toLowerCase()!=="false"){var u=this.findView(a);if(u){var l=this.normalizeEvent(e);if(this.guard(l,u))return;var c=this.graph.snapToGrid(l.clientX,l.clientY);A.call(t,this.graph,u,l,a,c.x,c.y)}}}},{key:"onMagnetMouseDown",value:function(e){this.handleMagnetEvent(e,function(t,a,s,u,l){t.onMagnetMouseDown(a,s,u,l)})}},{key:"onMagnetDblClick",value:function(e){this.handleMagnetEvent(e,function(t,a,s,u,l){t.onMagnetDblClick(a,s,u,l)})}},{key:"onMagnetContextMenu",value:function(e){var t=this.normalizeEvent(e),a=this.findView(t.target);this.isPreventDefaultContextMenu(t,a)&&t.preventDefault(),this.handleMagnetEvent(t,function(s,u,l,c,f){s.onMagnetContextMenu(u,l,c,f)})}},{key:"onLabelMouseDown",value:function(e){var t=e.currentTarget,a=this.findView(t);if(a){var s=this.normalizeEvent(e);if(this.guard(s,a))return;var u=this.graph.snapToGrid(s.clientX,s.clientY);a.onLabelMouseDown(s,u.x,u.y)}}},{key:"onImageDragStart",value:function(){return!1}},{key:"dispose",value:function(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=function(){}}}]),r}(Zi);C8([Zi.dispose()],Ch.prototype,"dispose",null),function(o){var i="".concat(Ll.prefixCls,"-graph");o.markup=[{ns:M.ns.xhtml,tagName:"div",selector:"background",className:"".concat(i,"-background")},{ns:M.ns.xhtml,tagName:"div",selector:"grid",className:"".concat(i,"-grid")},{ns:M.ns.svg,tagName:"svg",selector:"svg",className:"".concat(i,"-svg"),attrs:{width:"100%",height:"100%","xmlns:xlink":M.ns.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:"".concat(i,"-svg-viewport"),children:[{tagName:"g",selector:"primer",className:"".concat(i,"-svg-primer")},{tagName:"g",selector:"stage",className:"".concat(i,"-svg-stage")},{tagName:"g",selector:"decorator",className:"".concat(i,"-svg-decorator")},{tagName:"g",selector:"overlay",className:"".concat(i,"-svg-overlay")}]}]}];function r(n){var e=n.cloneNode();return n.childNodes.forEach(function(t){return e.appendChild(t)}),function(){for(M.empty(n);n.attributes.length>0;)n.removeAttribute(n.attributes[0].name);for(var t=0,a=e.attributes.length;t<a;t+=1){var s=e.attributes[t];n.setAttribute(s.name,s.value)}e.childNodes.forEach(function(u){return n.appendChild(u)})}}o.snapshoot=r}(Ch||(Ch={})),function(o){var i,r=Ll.prefixCls;o.events=(i={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel"},Object(Re.a)(i,"mouseenter  .".concat(r,"-cell"),"onMouseEnter"),Object(Re.a)(i,"mouseleave  .".concat(r,"-cell"),"onMouseLeave"),Object(Re.a)(i,"mouseenter  .".concat(r,"-cell-tools"),"onMouseEnter"),Object(Re.a)(i,"mouseleave  .".concat(r,"-cell-tools"),"onMouseLeave"),Object(Re.a)(i,"mousedown   .".concat(r,"-cell [event]"),"onCustomEvent"),Object(Re.a)(i,"touchstart  .".concat(r,"-cell [event]"),"onCustomEvent"),Object(Re.a)(i,"mousedown   .".concat(r,"-cell [data-event]"),"onCustomEvent"),Object(Re.a)(i,"touchstart  .".concat(r,"-cell [data-event]"),"onCustomEvent"),Object(Re.a)(i,"dblclick    .".concat(r,"-cell [magnet]"),"onMagnetDblClick"),Object(Re.a)(i,"contextmenu .".concat(r,"-cell [magnet]"),"onMagnetContextMenu"),Object(Re.a)(i,"mousedown   .".concat(r,"-cell [magnet]"),"onMagnetMouseDown"),Object(Re.a)(i,"touchstart  .".concat(r,"-cell [magnet]"),"onMagnetMouseDown"),Object(Re.a)(i,"dblclick    .".concat(r,"-cell [data-magnet]"),"onMagnetDblClick"),Object(Re.a)(i,"contextmenu .".concat(r,"-cell [data-magnet]"),"onMagnetContextMenu"),Object(Re.a)(i,"mousedown   .".concat(r,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(Re.a)(i,"touchstart  .".concat(r,"-cell [data-magnet]"),"onMagnetMouseDown"),Object(Re.a)(i,"dragstart   .".concat(r,"-cell image"),"onImageDragStart"),Object(Re.a)(i,"mousedown   .".concat(r,"-edge .").concat(r,"-edge-label"),"onLabelMouseDown"),Object(Re.a)(i,"touchstart  .".concat(r,"-edge .").concat(r,"-edge-label"),"onLabelMouseDown"),i),o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(Ch||(Ch={}));var sc;(function(o){function i(r,n){return function(e,t,a){var s=a.value;a.value=function(){var u=this.scroller.widget;if(u==null){var l="Shoule enable scroller to use method '".concat(t,"'");if(r!==!1)throw console.error(l),new Error(l);return n!==!1&&console.warn(l),this}for(var c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];return s.call.apply(s,[this].concat(f))}}}o.checkScroller=i})(sc||(sc={}));var E8=`.x6-graph {
  position: relative;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
@keyframes halo-pie-visibility {
  0% {
    visibility: hidden;
  }
  100% {
    visibility: visible;
  }
}
@keyframes halo-pie-opening {
  0% {
    transform: scale(0.4) rotate(-20deg);
  }
  100% {
    transform: scale(1) rotate(0);
  }
}
.x6-widget-handle {
  position: absolute;
  width: 20px;
  height: 20px;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  background-size: 20px 20px;
  cursor: pointer;
  user-select: none;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle.hidden {
  display: none;
}
.x6-widget-handle-selected {
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}
.x6-widget-handle-remove {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: pointer;
}
.x6-widget-handle-remove:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-rotate {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-rotate:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-resize {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
  cursor: se-resize;
}
.x6-widget-handle-resize:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-clone {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-clone:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-link {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
  cursor: move;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
.x6-widget-handle-link:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-fork {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
  cursor: move;
}
.x6-widget-handle-fork:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-unlink:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');
}
.x6-widget-handle-direction {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-direction:hover {
  background-image: url("data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E");
}
.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {
  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;
}
.x6-widget-handle-surround .x6-widget-handle-pos-se {
  right: -25px;
  bottom: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-nw {
  top: -21px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-n {
  top: -22px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-e {
  top: -webkit-calc(40%);
  top: calc(50% - 10px);
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-ne {
  top: -21px;
  right: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-w {
  top: 50%;
  left: -25px;
  margin-top: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-sw {
  bottom: -25px;
  left: -25px;
}
.x6-widget-handle-surround .x6-widget-handle-pos-s {
  bottom: -24px;
  left: 50%;
  margin-left: -10px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {
  width: 15px;
  height: 15px;
  font-size: 15px;
  background-size: 15px 15px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {
  right: -19px;
  bottom: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {
  top: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {
  top: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {
  top: -webkit-calc(42%);
  top: calc(50% - 8px);
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {
  top: -19px;
  right: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {
  left: -19px;
  margin-top: -8px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {
  bottom: -19px;
  left: -19px;
}
.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {
  bottom: -19px;
  margin-left: -7.5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {
  width: 10px;
  height: 10px;
  font-size: 10px;
  background-size: 10px 10px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {
  right: -15px;
  bottom: -13px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {
  top: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {
  top: -13px;
  margin-left: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {
  top: -webkit-calc(45%);
  top: calc(50% - 5px);
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {
  top: -13px;
  right: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {
  left: -15px;
  margin-top: -5px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {
  bottom: -13px;
  left: -15px;
}
.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {
  bottom: -13px;
  margin-left: -5px;
}
.x6-widget-handle-toolbar {
  position: absolute;
  top: -50px;
  display: table-row;
  padding: 7px 5px;
}
.x6-widget-handle-toolbar::after {
  position: absolute;
  top: 100%;
  left: 10px;
  width: 0;
  height: 0;
  margin-top: 4px;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
  content: '';
}
.x6-widget-handle-toolbar .x6-widget-handle {
  position: relative;
  display: table-cell;
  min-width: 20px;
  margin: 0 2px;
  background-position: 3px 3px;
  background-size: 16px 16px;
}
.x6-widget-handle-toolbar .x6-widget-handle::after {
  position: absolute;
  bottom: -11px;
  width: 100%;
  content: '';
}
.x6-widget-handle-pie {
  position: absolute;
  top: -webkit-calc(0%);
  top: calc(50% - 50px);
  right: -50px;
  z-index: 1;
  display: none;
  width: 100px;
  height: 100px;
  margin: -2px -2px 0 0;
  border-radius: 50%;
  cursor: default;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie .x6-widget-handle {
  width: 1px;
  height: auto;
  pointer-events: visiblePainted;
}
.x6-widget-handle-pie-slice-svg {
  width: 100%;
  height: 100%;
  overflow: visible !important;
}
.x6-widget-handle-pie-slice-img,
.x6-widget-handle-pie-slice-txt {
  display: none;
  pointer-events: none;
}
.x6-widget-handle-pie[data-pie-toggle-position='e'] {
  top: calc(50% - 50px);
  right: -50px;
  left: auto;
}
.x6-widget-handle-pie[data-pie-toggle-position='w'] {
  top: calc(50% - 50px);
  right: auto;
  left: -52px;
}
.x6-widget-handle-pie[data-pie-toggle-position='n'] {
  top: -50px;
  right: auto;
  bottom: auto;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie[data-pie-toggle-position='s'] {
  top: auto;
  right: auto;
  bottom: -52px;
  left: calc(50% - 52px);
}
.x6-widget-handle-pie-opened {
  display: block;
  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;
  animation-timing-function: step-end, ease;
  animation-delay: 0s, 0.1s;
}
.x6-widget-handle-pie-toggle {
  position: absolute;
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  z-index: 2;
  display: block;
  box-sizing: border-box;
  width: 30px;
  height: 30px;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 20px 20px;
  border-radius: 50%;
  cursor: pointer;
  user-select: none;
  pointer-events: visiblePainted;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-handle-pie-toggle-pos-e {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: -15px;
  bottom: auto;
  left: auto;
}
.x6-widget-handle-pie-toggle-pos-w {
  top: -webkit-calc(35%);
  top: calc(50% - 15px);
  right: auto;
  bottom: auto;
  left: -15px;
}
.x6-widget-handle-pie-toggle-pos-n {
  top: -15px;
  right: auto;
  bottom: auto;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-pos-s {
  top: auto;
  right: auto;
  bottom: -15px;
  left: -webkit-calc(35%);
  left: calc(50% - 15px);
}
.x6-widget-handle-pie-toggle-opened {
  transition: 0.1s background-image;
}
.x6-widget-handle-toolbar {
  position: static;
  display: inline-block;
  margin-top: -50px;
  margin-left: 45px;
  white-space: nowrap;
  vertical-align: top;
  background-color: #f5f5f5;
  border-bottom: 3px solid #333;
  border-radius: 5px;
  box-shadow: 0 1px 2px #222;
}
.x6-widget-handle-toolbar::after {
  top: -12px;
  left: 55px;
  margin-top: 0;
  border-top: 6px solid #333;
  border-right: 10px solid transparent;
  border-left: 10px solid transparent;
}
.x6-widget-handle-toolbar .x6-widget-handle {
  display: inline-block;
  vertical-align: top;
}
.x6-widget-handle-toolbar .x6-widget-handle:hover::after {
  border-bottom: 4px solid #fc6cb8;
}
.x6-widget-handle-toolbar .x6-widget-handle-rotate {
  position: absolute;
  top: 100%;
  right: 100%;
  margin-top: 3px;
  margin-right: 6px;
}
.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,
.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {
  border-bottom: none;
}
.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {
  margin-left: 4px;
}
.x6-widget-handle-pie {
  box-sizing: content-box;
  background-color: #f5f5f5;
  border: 2px solid #404040;
}
.x6-widget-handle-pie-slice {
  fill: transparent;
  stroke: #e9e9e9;
  stroke-width: 1;
}
.x6-widget-handle-pie-slice:hover {
  fill: #fff;
}
.x6-widget-handle-pie-slice-img {
  display: block;
}
.x6-widget-handle-selected .x6-widget-handle-pie-slice {
  fill: #fff;
}
.x6-widget-handle-pie-toggle {
  background-color: #f6f6f6;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  background-size: 16px 16px;
  border: 2px solid #3b425f;
}
.x6-widget-handle-pie-toggle:hover {
  background-color: #fff;
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');
  border-color: #fd6eb6;
}
.x6-widget-handle-pie-toggle-opened {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-handle-pie-toggle-opened:hover {
  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');
}
.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-halo {
  position: absolute;
  pointer-events: none;
}
.x6-widget-halo-content {
  position: absolute;
  top: 100%;
  padding: 6px;
  font-size: 10px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-halo-handles + .x6-widget-halo-content {
  right: -20px;
  left: -20px;
  margin-top: 30px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 25px;
}
.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {
  margin-top: 20px;
}
.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {
  right: 0;
  left: 0;
  margin-top: 10px;
}
.x6-widget-halo-content {
  color: #fff;
  background-color: #6a6b8a;
}
.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {
  position: absolute;
  right: 100%;
  bottom: 100%;
  margin-right: 6px;
  margin-bottom: 3px;
}
.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {
  background-color: #fff;
  border-radius: 50%;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar {
  margin-top: -60px;
  margin-left: -18px;
}
.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {
  top: -22px;
  left: -9px;
}
.x6-widget-minimap {
  position: relative;
  display: table-cell;
  box-sizing: border-box;
  overflow: hidden;
  text-align: center;
  vertical-align: middle;
  background-color: #fff;
  user-select: none;
}
.x6-widget-minimap .x6-graph {
  display: inline-block;
  box-shadow: 0 0 4px 0 #eee;
  cursor: pointer;
}
.x6-widget-minimap .x6-graph > svg {
  pointer-events: none;
  shape-rendering: optimizeSpeed;
}
.x6-widget-minimap .x6-graph .x6-node * {
  /* stylelint-disable-next-line */
  vector-effect: initial;
}
.x6-widget-minimap-viewport {
  position: absolute;
  box-sizing: content-box !important;
  margin: -2px 0 0 -2px;
  border: 2px solid #31d0c6;
  cursor: move;
}
.x6-widget-minimap-viewport-zoom {
  position: absolute;
  right: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 12px;
  height: 12px;
  margin: 0 -6px -6px 0;
  background-color: #fff;
  border: 2px solid #31d0c6;
  border-radius: 50%;
  cursor: nwse-resize;
}
.x6-graph-scroller {
  position: relative;
  box-sizing: border-box;
  overflow: scroll;
  outline: none;
}
.x6-graph-scroller-content {
  position: relative;
}
.x6-graph-scroller-background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-scroller .x6-graph {
  position: absolute;
  display: inline-block;
  margin: 0;
  box-shadow: none;
}
.x6-graph-scroller .x6-graph > svg {
  display: block;
}
.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {
  box-shadow: 0 0 4px 0 #eee;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-graph-pagebreak {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-pagebreak-vertical {
  position: absolute;
  top: 0;
  bottom: 0;
  box-sizing: border-box;
  width: 1px;
  border-left: 1px dashed #bdbdbd;
}
.x6-graph-pagebreak-horizontal {
  position: absolute;
  right: 0;
  left: 0;
  box-sizing: border-box;
  height: 1px;
  border-top: 1px dashed #bdbdbd;
}
.x6-widget-selection {
  position: absolute;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
.x6-widget-snapline {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  pointer-events: none;
}
.x6-widget-snapline-vertical,
.x6-widget-snapline-horizontal {
  stroke: #2ecc71;
  stroke-width: 1px;
}
.x6-widget-stencil {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-widget-stencil::after {
  position: absolute;
  top: 0;
  display: block;
  width: 100%;
  height: 20px;
  padding: 8px 0;
  line-height: 20px;
  text-align: center;
  opacity: 0;
  transition: top 0.1s linear, opacity 0.1s linear;
  content: ' ';
  pointer-events: none;
}
.x6-widget-stencil-content {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  height: auto;
  overflow-x: hidden;
  overflow-y: auto;
}
.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {
  pointer-events: none;
}
.x6-widget-stencil-group {
  padding: 0;
  padding-bottom: 8px;
  overflow: hidden;
  user-select: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  padding-bottom: 0;
}
.x6-widget-stencil-group-title {
  position: relative;
  margin-top: 0;
  margin-bottom: 0;
  padding: 4px;
  cursor: pointer;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  user-select: none;
}
.x6-widget-stencil .unmatched {
  opacity: 0.3;
}
.x6-widget-stencil .x6-node.unmatched {
  display: none;
}
.x6-widget-stencil-group.unmatched {
  display: none;
}
.x6-widget-stencil-search-text {
  position: relative;
  z-index: 1;
  box-sizing: border-box;
  width: 100%;
  height: 30px;
  max-height: 30px;
  line-height: 30px;
  outline: 0;
}
.x6-widget-stencil.not-found::after {
  opacity: 1;
  content: attr(data-not-found-text);
}
.x6-widget-stencil.not-found.searchable::after {
  top: 30px;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 50px;
}
.x6-widget-stencil {
  color: #333;
  background: #f5f5f5;
}
.x6-widget-stencil-content {
  position: absolute;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-content {
  top: 32px;
}
.x6-widget-stencil.searchable > .x6-widget-stencil-content {
  top: 80px;
}
.x6-widget-stencil.not-found::after {
  position: absolute;
}
.x6-widget-stencil.not-found.searchable.collapsable::after {
  top: 80px;
}
.x6-widget-stencil.not-found.searchable::after {
  top: 60px;
}
.x6-widget-stencil-group {
  height: auto;
  margin-bottom: 1px;
  padding: 0;
  transition: none;
}
.x6-widget-stencil-group .x6-graph {
  background: transparent;
  box-shadow: none;
}
.x6-widget-stencil-group.collapsed {
  height: auto;
  max-height: 31px;
}
.x6-widget-stencil-title,
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  position: relative;
  left: 0;
  box-sizing: border-box;
  width: 100%;
  height: 32px;
  padding: 0 5px 0 8px;
  color: #666;
  font-weight: 700;
  font-size: 12px;
  line-height: 32px;
  cursor: default;
  transition: all 0.3;
}
.x6-widget-stencil-title:hover,
.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {
  color: #444;
}
.x6-widget-stencil-title {
  background: #e9e9e9;
}
.x6-widget-stencil-group > .x6-widget-stencil-group-title {
  background: #ededed;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {
  padding-left: 32px;
  cursor: pointer;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  position: absolute;
  top: 6px;
  left: 8px;
  display: block;
  width: 18px;
  height: 18px;
  margin: 0;
  padding: 0;
  background-color: transparent;
  background-repeat: no-repeat;
  background-position: 0 0;
  border: none;
  content: ' ';
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');
  opacity: 0.4;
  transition: all 0.3s;
}
.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {
  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');
  opacity: 0.4;
}
.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,
.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {
  opacity: 0.6;
}
.x6-widget-stencil input[type='search'] {
  -webkit-appearance: textfield;
}
.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,
.x6-widget-stencil input[type='search']::-webkit-search-decoration {
  -webkit-appearance: none;
}
.x6-widget-stencil-search-text {
  display: block;
  width: 90%;
  margin: 8px 5%;
  padding-left: 8px;
  color: #333;
  background: #fff;
  border: 1px solid #e9e9e9;
  border-radius: 12px;
  outline: 0;
}
.x6-widget-stencil-search-text:focus {
  outline: 0;
}
.x6-widget-stencil::after {
  color: #808080;
  font-weight: 600;
  font-size: 12px;
  background: 0 0;
}
.x6-widget-transform {
  position: absolute;
  box-sizing: content-box !important;
  margin: -5px 0 0 -5px;
  padding: 4px;
  border: 1px dashed #000;
  border-radius: 5px;
  user-select: none;
  pointer-events: none;
}
.x6-widget-transform > div {
  position: absolute;
  box-sizing: border-box;
  background-color: #fff;
  border: 1px solid #000;
  transition: background-color 0.2s;
  pointer-events: auto;
  -webkit-user-drag: none;
  user-drag: none;
  /* stylelint-disable-line */
}
.x6-widget-transform > div:hover {
  background-color: #d3d3d3;
}
.x6-widget-transform-cursor-n {
  cursor: n-resize;
}
.x6-widget-transform-cursor-s {
  cursor: s-resize;
}
.x6-widget-transform-cursor-e {
  cursor: e-resize;
}
.x6-widget-transform-cursor-w {
  cursor: w-resize;
}
.x6-widget-transform-cursor-ne {
  cursor: ne-resize;
}
.x6-widget-transform-cursor-nw {
  cursor: nw-resize;
}
.x6-widget-transform-cursor-se {
  cursor: se-resize;
}
.x6-widget-transform-cursor-sw {
  cursor: sw-resize;
}
.x6-widget-transform-resize {
  width: 10px;
  height: 10px;
  border-radius: 6px;
}
.x6-widget-transform-resize[data-position='top-left'] {
  top: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='top-right'] {
  top: -5px;
  right: -5px;
}
.x6-widget-transform-resize[data-position='bottom-left'] {
  bottom: -5px;
  left: -5px;
}
.x6-widget-transform-resize[data-position='bottom-right'] {
  right: -5px;
  bottom: -5px;
}
.x6-widget-transform-resize[data-position='top'] {
  top: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='bottom'] {
  bottom: -5px;
  left: 50%;
  margin-left: -5px;
}
.x6-widget-transform-resize[data-position='left'] {
  top: 50%;
  left: -5px;
  margin-top: -5px;
}
.x6-widget-transform-resize[data-position='right'] {
  top: 50%;
  right: -5px;
  margin-top: -5px;
}
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {
  display: none;
}
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],
.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {
  display: none;
}
.x6-widget-transform.no-resize .x6-widget-transform-resize {
  display: none;
}
.x6-widget-transform-rotate {
  top: -20px;
  left: -20px;
  width: 12px;
  height: 12px;
  border-radius: 6px;
  cursor: crosshair;
}
.x6-widget-transform.no-rotate .x6-widget-transform-rotate {
  display: none;
}
.x6-widget-transform-active {
  border-color: transparent;
  pointer-events: all;
}
.x6-widget-transform-active > div {
  display: none;
}
.x6-widget-transform-active > .x6-widget-transform-active-handle {
  display: block;
  background-color: #808080;
}
.x6-widget-knob {
  position: absolute;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  margin-top: -8px;
  margin-left: -8px;
  cursor: pointer;
  user-select: none;
}
.x6-widget-knob::before,
.x6-widget-knob::after {
  position: absolute;
  transform: rotate(45deg);
  content: '';
}
.x6-widget-knob::before {
  top: 4px;
  left: 4px;
  box-sizing: border-box;
  width: 8px;
  height: 8px;
  background-color: #fff;
}
.x6-widget-knob::after {
  top: 5px;
  left: 5px;
  box-sizing: border-box;
  width: 6px;
  height: 6px;
  background-color: #fca000;
}
.x6-graph-print {
  position: relative;
}
.x6-graph-print .x6-graph-print-ready {
  display: none;
}
.x6-graph-print .x6-graph-print-preview {
  overflow: hidden !important;
  background: #fff !important;
}
@media print {
  html,
  html > body.x6-graph-printing {
    position: relative !important;
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }
  html > body.x6-graph-printing > * {
    display: none !important;
  }
  html > body.x6-graph-printing > .x6-graph-print {
    display: block !important;
  }
  .x6-graph-print {
    top: 0 !important;
    left: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
    overflow: hidden !important;
    page-break-after: always;
    background: #fff !important;
  }
  .x6-graph-print .x6-graph-print-ready {
    display: none;
  }
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`,O8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},l0=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"init",value:function(){Ll.autoInsertCSS&&r.ensure()}},{key:"dispose",value:function(){r.clean()}}]),r}(ho);O8([l0.dispose()],l0.prototype,"dispose",null),function(o){var i,r=0;function n(){if(r+=1,!(r>1)&&!sa.isApplyingHMR()){i=document.createElement("style"),i.setAttribute("type","text/css"),i.textContent=E8;var t=document.querySelector("head");t&&t.insertBefore(i,t.firstChild)}}o.ensure=n;function e(){r-=1,!(r>0)&&(i&&i.parentNode&&i.parentNode.removeChild(i),i=null)}o.clean=e}(l0||(l0={}));var w8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},c0=function(){function o(){Object(me.a)(this,o)}return Object(ue.a)(o,[{key:"handleClassName",get:function(){return vo.handle}},{key:"pie",get:function(){return Object.assign(Object.assign({},o.defaultPieOptions),this.handleOptions.pie)}},{key:"initHandles",value:function(){var r=this,n;if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(function(a){return r.addHandle(a)}),this.handleOptions.type==="pie"){if(this.pie.toggles){var e=vo.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(function(a){var s=r.$("<div/>");r.applyAttrs(s,a.attrs),s.addClass(e).addClass("".concat(e,"-pos-").concat(a.position||"e")).attr("data-name",a.name).appendTo(r.container),r.$pieToggles[a.name]=s})}this.setPieIcons()}if(this.$handleContainer){var t=this.handleOptions.type||"surround";this.$handleContainer.addClass(vo.wrap).addClass(vo.animate).addClass("".concat(vo.handle,"-").concat(t))}this.delegateEvents((n={},Object(Re.a)(n,"mousedown .".concat(vo.handle),"onHandleMouseDown"),Object(Re.a)(n,"touchstart .".concat(vo.handle),"onHandleMouseDown"),Object(Re.a)(n,"mousedown .".concat(vo.pieToggle),"onPieToggleMouseDown"),Object(Re.a)(n,"touchstart .".concat(vo.pieToggle),"onPieToggleMouseDown"),n))}},{key:"onHandleMouseDown",value:function(r){var n=this.$(r.currentTarget).closest(".".concat(vo.handle)).attr("data-action");n&&(r.preventDefault(),r.stopPropagation(),this.setEventData(r,{action:n,clientX:r.clientX,clientY:r.clientY,startX:r.clientX,startY:r.clientY}),r.type==="mousedown"&&r.button===2?this.triggerHandleAction(n,"contextmenu",r):(this.triggerHandleAction(n,"mousedown",r),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},r.data)))}},{key:"onHandleMouseMove",value:function(r){var n=this.getEventData(r),e=n.action;e&&this.triggerHandleAction(e,"mousemove",r)}},{key:"onHandleMouseUp",value:function(r){var n=this.getEventData(r),e=n.action;e&&(this.triggerHandleAction(e,"mouseup",r),this.undelegateDocumentEvents())}},{key:"triggerHandleAction",value:function(r,n,e,t){e.preventDefault(),e.stopPropagation();var a=this.normalizeEvent(e),s=this.getEventData(a),u=this.graph.snapToGrid(a.clientX,a.clientY),l=this.graph.snapToGrid(s.clientX,s.clientY),c=u.x-l.x,f=u.y-l.y;this.trigger("action:".concat(r,":").concat(n),Object.assign({e:a,dx:c,dy:f,x:u.x,y:u.y,offsetX:e.clientX-s.startX,offsetY:e.clientY-s.startY},t)),s.clientX=e.clientX,s.clientY=e.clientY}},{key:"onPieToggleMouseDown",value:function(r){r.stopPropagation();var n=this.$(r.target).closest(".".concat(vo.pieToggle)).attr("data-name");this.isOpen(n)||this.isOpen()&&this.toggleState(),this.toggleState(n)}},{key:"setPieIcons",value:function(){var r=this;this.handleOptions.type==="pie"&&this.$handleContainer.find(".".concat(vo.handle)).each(function(n,e){var t=r.$(e),a=t.attr("data-action"),s=vo.pieSlice,u=r.getHandle(a);if(!u||!u.icon){var l=window.getComputedStyle(e,":before").getPropertyValue("content");if(l&&l!=="none"){var c=t.find(".".concat(s,"-txt"));c.length&&oi.create(c[0]).text(l.replace(/['"]/g,""))}var f=t.css("background-image");if(f){var d=f.match(/url\(['"]?([^'"]+)['"]?\)/);if(d){var v=d[1],m=t.find(".".concat(s,"-img"));m.length>0&&oi.create(m[0]).attr("xlink:href",v)}}}})}},{key:"getHandleIdx",value:function(r){return this.handles.findIndex(function(n){return n.name===r})}},{key:"hasHandle",value:function(r){return this.getHandleIdx(r)>=0}},{key:"getHandle",value:function(r){return this.handles.find(function(n){return n.name===r})}},{key:"renderHandle",value:function(r){var n=this.$("<div/>").addClass("".concat(vo.handle," ").concat(vo.handle,"-").concat(r.name)).attr("data-action",r.name).prop("draggable",!1);if(this.handleOptions.type==="pie"){var e=this.getHandleIdx(r.name),t=this.pie,a=t.outerRadius,s=t.innerRadius,u=(a+s)/2,l=new Pt(a,a),c=Mi.toRad(t.sliceAngle),f=e*c+Mi.toRad(t.startAngle),d=f+c,v=M.createSlicePathData(s,a,f,d),m=oi.create("svg").addClass("".concat(vo.pieSlice,"-svg")),y=oi.create("path").addClass(vo.pieSlice).attr("d",v).translate(a,a),C=Pt.fromPolar(u,-f-c/2,l).toJSON(),O=t.iconSize,x=oi.create("image").attr(C).addClass("".concat(vo.pieSlice,"-img"));C.y=C.y+O-2;var T=oi.create("text",{"font-size":O}).attr(C).addClass("".concat(vo.pieSlice,"-txt"));x.attr({width:O,height:O}),x.translate(-O/2,-O/2),T.translate(-O/2,-O/2),m.append([y,x,T]),n.append(m.node)}else n.addClass("".concat(vo.handle,"-pos-").concat(r.position)),r.content&&(typeof r.content=="string"?n.html(r.content):n.append(r.content));return this.updateHandleIcon(n,r.icon),this.applyAttrs(n,r.attrs),n}},{key:"addHandle",value:function(r){var n=this;if(!this.hasHandle(r.name)){this.handles.push(r);var e=r.events;e&&Object.keys(e).forEach(function(t){var a=e[t],s="action:".concat(r.name,":").concat(t);typeof a=="string"?n.on(s,n[a],n):n.on(s,a)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(r))}return this}},{key:"addHandles",value:function(r){var n=this;return r.forEach(function(e){return n.addHandle(e)}),this}},{key:"removeHandles",value:function(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}},{key:"removeHandle",value:function(r){var n=this,e=this.getHandleIdx(r),t=this.handles[e];return t&&(t.events&&Object.keys(t.events).forEach(function(a){n.off("action:".concat(r,":").concat(a))}),this.getHandleElem(r).remove(),this.handles.splice(e,1)),this}},{key:"changeHandle",value:function(r,n){var e=this.getHandle(r);return e&&(this.removeHandle(r),this.addHandle(Object.assign(Object.assign({},e),n))),this}},{key:"toggleHandle",value:function(r,n){var e=this.getHandle(r);if(e){var t=this.getHandleElem(r),a="".concat(vo.handle,"-selected");n===void 0&&(n=!t.hasClass(a)),t.toggleClass(a,n);var s=n?e.iconSelected:e.icon;s&&this.updateHandleIcon(t,s)}return this}},{key:"selectHandle",value:function(r){return this.toggleHandle(r,!0)}},{key:"deselectHandle",value:function(r){return this.toggleHandle(r,!1)}},{key:"deselectAllHandles",value:function(){var r=this;return this.handles.forEach(function(n){return r.deselectHandle(n.name)}),this}},{key:"getHandleElem",value:function(r){return this.$handleContainer.find(".".concat(vo.handle,"-").concat(r))}},{key:"updateHandleIcon",value:function(r,n){if(this.handleOptions.type==="pie"){var e=r.find(".".concat(vo.pieSliceImg));this.$(e[0]).attr("xlink:href",n||"")}else r.css("background-image",n?"url(".concat(n,")"):"")}},{key:"isRendered",value:function(){return this.$handleContainer!=null}},{key:"isOpen",value:function(r){return this.isRendered()?r?this.$pieToggles[r].hasClass(vo.pieToggleOpened):this.$handleContainer.hasClass("".concat(vo.pieOpended)):!1}},{key:"toggleState",value:function(r){var n=this;if(this.isRendered()){var e=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(function(s){var u=n.$pieToggles[s];u.removeClass(vo.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:r}),e.removeClass(vo.pieOpended);else{if(this.trigger("pie:open",{name:r}),r){var t=this.pie.toggles,a=t&&t.find(function(s){return s.name===r});a&&e.attr({"data-pie-toggle-name":a.name,"data-pie-toggle-position":a.position}),this.$pieToggles[r].addClass(vo.pieToggleOpened)}e.addClass(vo.pieOpended)}}}},{key:"applyAttrs",value:function(r,n){if(n){var e=Zi.$(r);Object.keys(n).forEach(function(t){var a=e.find(t).addBack().filter(t),s=n[t],u=s.class,l=w8(s,["class"]);u&&a.addClass(u),a.attr(l)})}}}]),o}();(function(o){o.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}})(c0||(c0={}));var vo;(function(o){o.handle=Zi.prototype.prefixClassName("widget-handle"),o.wrap="".concat(o.handle,"-wrap"),o.animate="".concat(o.handle,"-animate"),o.pieOpended="".concat(o.handle,"-pie-opened"),o.pieToggle="".concat(o.handle,"-pie-toggle"),o.pieToggleOpened="".concat(o.handle,"-pie-toggle-opened"),o.pieSlice="".concat(o.handle,"-pie-slice"),o.pieSliceImg="".concat(o.handle,"-pie-slice-img")})(vo||(vo={}));var x8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},S8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},f0=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;Object(me.a)(this,r),e=i.call(this);var t=n,a=t.view,s=t.cell,u=t.node,l=t.edge,c=t.graph,f=S8(t,["view","cell","node","edge","graph"]);a?(e.view=a,e.cell=a.cell,e.graph=a.graph,e.model=e.graph.model):(s||l||u)&&c&&(e.cell=u||l||s,e.view=c.renderer.findViewByCell(e.cell),e.graph=c,e.model=e.graph.model);var d=e.constructor;return n.clearAll!==!1&&d.removeInstances(e.graph),d.register(Object(rs.a)(e)),e.init(f),e}return Object(ue.a)(r,[{key:"init",value:function(e){}},{key:"render",value:function(){return this}},{key:"startListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.on("blank:mousedown",this.remove,this)}},{key:"stopListening",value:function(){this.options.clearOnBlankMouseDown!==!1&&this.graph.off("blank:mousedown",this.remove,this)}},{key:"remove",value:function(){this.stopListening();var e=this.constructor;return e.unregister(this),Object(Aa.a)(Object(Ma.a)(r.prototype),"remove",this).call(this)}},{key:"dispose",value:function(){this.remove()}}],[{key:"ensureCache",value:function(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}},{key:"register",value:function(e,t){t==null&&(t=e.graph);var a=this.ensureCache(),s=a[t.view.cid];s==null&&(s=a[t.view.cid]={}),s[e.cid]=e}},{key:"unregister",value:function(e,t){t==null&&(t=e.graph);var a=this.ensureCache();a[t.view.cid]&&delete a[t.view.cid][e.cid]}},{key:"removeInstances",value:function(e){var t=this.ensureCache(),a=t[e.view.cid];a&&Object.keys(a).forEach(function(s){var u=a[s];u&&u.remove()})}},{key:"getInstances",value:function(e){var t=this.ensureCache();return t[e.view.cid]||{}}}]),r}(Zi);f0.instanceCache=new WeakMap,x8([Zi.dispose()],f0.prototype,"dispose",null);var dS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"node",get:function(){return this.cell}},{key:"metadata",get:function(){var e=this.cell.prop("knob");return Array.isArray(e)?this.options.index!=null?e[this.options.index]:null:e}},{key:"init",value:function(e){this.options=Object.assign({},e),this.render(),this.startListening()}},{key:"startListening",value:function(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),Object(Aa.a)(Object(Ma.a)(r.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),Object(Aa.a)(Object(Ma.a)(r.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){return this.container=document.createElement("div"),M.addClass(this.container,this.prefixClassName("widget-knob")),this.options.className&&M.addClass(this.container,this.options.className),this.view.addClass(_v.KNOB),this.graph.container.appendChild(this.container),this.update(),this}},{key:"remove",value:function(){return this.view.removeClass(_v.KNOB),Object(Aa.a)(Object(Ma.a)(r.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.metadata){var e=this.metadata,t=e.update,a=e.position,s={knob:this,cell:this.cell,node:this.node};if(a){var u=a.call(this.graph,Object.assign({},s));if(u){var l=this.graph.matrix(),c=this.node.getBBox(),f=Mi.normalize(this.node.getAngle()),d=Pt.create(u);f!==0&&d.rotate(-f,{x:c.width/2,y:c.height/2}),d.translate(c).scale(l.a,l.d).translate(l.e,l.f),this.container.style.left="".concat(d.x,"px"),this.container.style.top="".concat(d.y,"px")}}t&&t.call(this.graph,Object.assign({},s))}}},{key:"hide",value:function(){this.container.style.display="none"}},{key:"show",value:function(){this.container.style.display=""}},{key:"onTransform",value:function(){this.hide()}},{key:"onTransformed",value:function(){this.show()}},{key:"onKnobMouseDown",value:function(e){var t=e.knob;this.cid!==t.cid&&this.hide()}},{key:"onKnobMouseUp",value:function(){this.show()}},{key:"notify",value:function(e,t){if(this.view){var a=this.view.normalizeEvent(t),s=this.graph.snapToGrid(a.clientX,a.clientY);this.view.notify("cell:".concat(e),{e:a,view:this.view,node:this.node,cell:this.cell,x:s.x,y:s.y,knob:this}),this.cell.isNode()?this.view.notify("node:".concat(e),{e:a,view:this.view,node:this.node,cell:this.cell,x:s.x,y:s.y,knob:this}):this.cell.isEdge()&&this.view.notify("edge:".concat(e),{e:a,view:this.view,edge:this.cell,cell:this.cell,x:s.x,y:s.y,knob:this})}}},{key:"onMouseDown",value:function(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(_v.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}},{key:"onMouseMove",value:function(e){var t=this.getEventData(e),a=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,a&&(a.addClass(_v.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){var s=this.graph.matrix(),u=(e.clientX-t.originX)/s.a,l=(e.clientY-t.originY)/s.d,c=this.node.getAngle(),f=new Pt(u,l).rotate(c);this.metadata.onMouseMove.call(this.graph,{e,data:t,deltaX:f.x,deltaY:f.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}},{key:"onMouseUp",value:function(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.getEventData(e),a=this.graph.findViewByCell(this.node);t.knobbing&&(a&&a.removeClass(_v.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}}]),r}(f0),_v;(function(o){o.KNOB="has-widget-knob",o.KNOBBING="node-knobbing",o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"}})(_v||(_v={}));var A8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},d0;(function(o){o.root="widget-minimap",o.viewport="".concat(o.root,"-viewport"),o.zoom="".concat(o.viewport,"-zoom")})(d0||(d0={}));var hS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;Object(me.a)(this,r),e=i.call(this),e.options=Object.assign(Object.assign({},N1.defaultOptions),n),e.updateViewport=A.debounce(e.updateViewport.bind(Object(rs.a)(e)),0),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(d0.root));var t=document.createElement("div");e.container.appendChild(t),e.$viewport=e.$("<div>").addClass(e.prefixClassName(d0.viewport)),e.options.scalable&&(e.zoomHandle=e.$("<div>").addClass(e.prefixClassName(d0.zoom)).appendTo(e.$viewport).get(0)),e.$container.append(e.$viewport).css({width:e.options.width,height:e.options.height,padding:e.options.padding}),e.options.container&&e.options.container.appendChild(e.container),e.sourceGraph=e.graph;var a=Object.assign(Object.assign({},e.options.graphOptions),{container:t,model:e.sourceGraph.model,frozen:!0,async:e.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});return e.targetGraph=e.options.createGraph?e.options.createGraph(a):new _i(a),e.targetGraph.renderer.unfreeze(),e.updatePaper(e.sourceGraph.options.width,e.sourceGraph.options.height),e.startListening(),e}return Object(ue.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"scroller",get:function(){return this.graph.scroller.widget}},{key:"graphContainer",get:function(){return this.scroller?this.scroller.container:this.graph.container}},{key:"$graphContainer",get:function(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}},{key:"startListening",value:function(){var e;this.scroller?this.$graphContainer.on("scroll".concat(this.getEventNamespace()),this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents((e={mousedown:"startAction",touchstart:"startAction"},Object(Re.a)(e,"mousedown .".concat(this.prefixClassName("graph")),"scrollTo"),Object(Re.a)(e,"touchstart .".concat(this.prefixClassName("graph")),"scrollTo"),e))}},{key:"stopListening",value:function(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}},{key:"onRemove",value:function(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}},{key:"onTransform",value:function(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}},{key:"onModelUpdated",value:function(){this.targetGraph.zoomToFit()}},{key:"updatePaper",value:function(e,t){var a,s;typeof e=="object"?(a=e.width,s=e.height):(a=e,s=t);var u=this.sourceGraph.options,l=this.sourceGraph.transform.getScale(),c=this.options.width-2*this.options.padding,f=this.options.height-2*this.options.padding;a/=l.sx,s/=l.sy,this.ratio=Math.min(c/a,f/s);var d=this.ratio,v=u.x*d/l.sx,m=u.y*d/l.sy;return a*=d,s*=d,this.targetGraph.resizeGraph(a,s),this.targetGraph.translate(v,m),this.scroller?this.targetGraph.scale(d,d):this.targetGraph.zoomToFit(),this.updateViewport(),this}},{key:"updateViewport",value:function(){var e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale(),a=null;this.scroller?a=this.scroller.clientToLocalPoint(0,0):a=this.graph.graphToLocal(0,0);var s=this.$(this.targetGraph.container).position(),u=this.targetGraph.translate();u.ty=u.ty||0,this.geometry={top:s.top+a.y*t.sy+u.ty,left:s.left+a.x*t.sx+u.tx,width:this.$graphContainer.innerWidth()*t.sx/e.sx,height:this.$graphContainer.innerHeight()*t.sy/e.sy},this.$viewport.css(this.geometry)}},{key:"startAction",value:function(e){var t=this.normalizeEvent(e),a=t.target===this.zoomHandle?"zooming":"panning",s=this.sourceGraph.translate(),u=s.tx,l=s.ty,c={action:a,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:u,translateY:l};this.targetGraphTransforming=!0,this.delegateDocumentEvents(N1.documentEvents,c)}},{key:"doAction",value:function(e){var t=this,a=this.normalizeEvent(e),s=a.clientX,u=a.clientY,l=a.data;switch(l.action){case"panning":{var c=this.sourceGraph.transform.getScale(),f=(s-l.clientX)*c.sx,d=(u-l.clientY)*c.sy;this.scroller?(this.graphContainer.scrollLeft=l.scrollLeft+f/this.ratio,this.graphContainer.scrollTop=l.scrollTop+d/this.ratio):this.sourceGraph.translate(l.translateX-f/this.ratio,l.translateY-d/this.ratio);break}case"zooming":{var v=l.scale,m=l.geometry,y=1+(l.clientX-s)/m.width/v.sx;l.frameId&&cancelAnimationFrame(l.frameId),l.frameId=requestAnimationFrame(function(){t.sourceGraph.zoom(y*l.zoom,{absolute:!0,minScale:t.options.minScale,maxScale:t.options.maxScale})});break}default:break}}},{key:"stopAction",value:function(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}},{key:"scrollTo",value:function(e){var t=this.normalizeEvent(e),a,s,u=this.targetGraph.translate();if(u.ty=u.ty||0,t.offsetX==null){var l=this.$(this.targetGraph.container).offset();a=t.pageX-l.left,s=t.pageY-l.top}else a=t.offsetX,s=t.offsetY;var c=(a-u.tx)/this.ratio,f=(s-u.ty)/this.ratio;this.sourceGraph.centerPoint(c,f)}},{key:"dispose",value:function(){this.remove()}}]),r}(Zi);A8([Zi.dispose()],hS.prototype,"dispose",null);var N1;(function(o){o.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:function(r){return new _i(r)}},o.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}})(N1||(N1={}));var M8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},T8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},vS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;Object(me.a)(this,r),e=i.call(this);var t=n.graph,a=T8(n,["graph"]);return e.graph=t,e.options=Object.assign({tolerance:10},a),e.offset={x:0,y:0},e.render(),e.parseFilter(),e.disabled||e.startListening(),e}return Object(ue.a)(r,[{key:"model",get:function(){return this.graph.model}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-snapline")}},{key:"verticalClassName",get:function(){return"".concat(this.containerClassName,"-vertical")}},{key:"horizontalClassName",get:function(){return"".concat(this.containerClassName,"-horizontal")}},{key:"disabled",get:function(){return this.options.enabled!==!0||this.graph.options.snapline.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}},{key:"setFilter",value:function(e){this.options.filter=e,this.parseFilter()}},{key:"render",value:function(){var e=this.containerWrapper=new oi("svg"),t=this.horizontal=new oi("line"),a=this.vertical=new oi("line");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),a.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),a.setAttribute("display","none"),e.append([t,a]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}},{key:"startListening",value:function(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}},{key:"stopListening",value:function(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}},{key:"parseFilter",value:function(){var e=this;this.filterShapes={},this.filterCells={},this.filterFunction=null;var t=this.options.filter;Array.isArray(t)?t.forEach(function(a){typeof a=="string"?e.filterShapes[a]=!0:e.filterCells[a.id]=!0}):typeof t=="function"&&(this.filterFunction=t)}},{key:"onBatchStop",value:function(e){var t=e.name,a=e.data;t==="resize"&&this.snapOnResizing(a.cell,a)}},{key:"captureCursorOffset",value:function(e){var t=e.view,a=e.x,s=e.y,u=t.getDelegatedView();if(u&&this.isNodeMovable(u)){var l=t.cell.getPosition();this.offset={x:a-l.x,y:s-l.y}}}},{key:"isNodeMovable",value:function(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}},{key:"snapOnResizing",value:function(e,t){var a=this;if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){var s=this.graph.renderer.findViewByCell(e);if(s&&s.cell.isNode()){var u=e.getBBox(),l=u.bbox(e.getAngle()),c=l.getTopLeft(),f=l.getBottomRight(),d=Mi.normalize(e.getAngle()),v=this.options.tolerance||0,m,y,C,O,x,T,L={vertical:0,horizontal:0},_=t.direction,z=t.trueDirection,Q=t.relativeDirection;z.indexOf("right")!==-1?L.vertical=f.x:L.vertical=c.x,z.indexOf("bottom")!==-1?L.horizontal=f.y:L.horizontal=c.y,this.model.getNodes().some(function(Kn){if(a.isIgnored(e,Kn))return!1;var zn=Kn.getBBox().bbox(Kn.getAngle()),An=zn.getTopLeft(),br=zn.getBottomRight(),sn={vertical:[An.x,br.x],horizontal:[An.y,br.y]},Xn={};return Object.keys(sn).forEach(function(dr){var ga=dr,ca=sn[ga].map(function(Ta){return{position:Ta,distance:Math.abs(Ta-L[ga])}}).filter(function(Ta){return Ta.distance<=v});Xn[ga]=B.sortBy(ca,function(Ta){return Ta.distance})}),m==null&&Xn.vertical.length>0&&(m=Xn.vertical[0].position,y=Math.min(l.y,zn.y),C=Math.max(f.y,br.y)-y),O==null&&Xn.horizontal.length>0&&(O=Xn.horizontal[0].position,x=Math.min(l.x,zn.x),T=Math.max(f.x,br.x)-x),m!=null&&O!=null}),this.hide();var q=0,ye=0;(O!=null||m!=null)&&(m!=null&&(q=z.indexOf("right")!==-1?m-f.x:c.x-m),O!=null&&(ye=z.indexOf("bottom")!==-1?O-f.y:c.y-O));var Ce=0,Ae=0;if(d%90==0)d===90||d===270?(Ce=ye,Ae=q):(Ce=q,Ae=ye);else{var Pe=d>=0&&d<90?1:d>=90&&d<180?4:d>=180&&d<270?3:2;O!=null&&m!=null&&(q<ye?(ye=0,O=void 0):(q=0,m=void 0));var qe=Mi.toRad(d%90);q&&(Ce=Pe===3?q/Math.cos(qe):q/Math.sin(qe)),ye&&(Ae=Pe===3?ye/Math.cos(qe):ye/Math.sin(qe));var lt=Pe===1||Pe===3;switch(Q){case"top":case"bottom":Ae=ye?ye/(lt?Math.cos(qe):Math.sin(qe)):q/(lt?Math.sin(qe):Math.cos(qe));break;case"left":case"right":Ce=q?q/(lt?Math.cos(qe):Math.sin(qe)):ye/(lt?Math.sin(qe):Math.cos(qe));break;default:break}}switch(Q){case"top":case"bottom":Ce=0;break;case"left":case"right":Ae=0;break;default:break}var ze=this.graph.getGridSize(),ht=Math.max(u.width+Ce,ze),nn=Math.max(u.height+Ae,ze);t.minWidth&&t.minWidth>ze&&(ht=Math.max(ht,t.minWidth)),t.minHeight&&t.minHeight>ze&&(nn=Math.max(nn,t.minHeight)),t.maxWidth&&(ht=Math.min(ht,t.maxWidth)),t.maxHeight&&(nn=Math.min(nn,t.maxHeight)),t.preserveAspectRatio&&(Ae<Ce?nn=ht*(u.height/u.width):ht=nn*(u.width/u.height)),(ht!==u.width||nn!==u.height)&&(e.resize(ht,nn,{direction:_,relativeDirection:Q,trueDirection:z,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(s)}),C&&(C+=nn-u.height),T&&(T+=ht-u.width));var Tn=e.getBBox().bbox(d);m&&Math.abs(Tn.x-m)>1&&Math.abs(Tn.width+Tn.x-m)>1&&(m=void 0),O&&Math.abs(Tn.y-O)>1&&Math.abs(Tn.height+Tn.y-O)>1&&(O=void 0),this.update({verticalLeft:m,verticalTop:y,verticalHeight:C,horizontalTop:O,horizontalLeft:x,horizontalWidth:T})}}}},{key:"snapOnMoving",value:function(e){var t=this,a=e.view,s=e.e,u=e.x,l=e.y,c=a.getEventData(s).delegatedView||a;if(!!this.isNodeMovable(c)){var f=c.cell,d=f.getSize(),v=f.getPosition(),m=new Br(u-this.offset.x,l-this.offset.y,d.width,d.height),y=f.getAngle(),C=m.getCenter(),O=m.bbox(y),x=O.getTopLeft(),T=O.getBottomRight(),L=this.options.tolerance||0,_,z,Q,q,ye,Ce,Ae=0,Pe=0;if(this.model.getNodes().some(function(Tn){if(t.isIgnored(f,Tn))return!1;var Kn=Tn.getBBox().bbox(Tn.getAngle()),zn=Kn.getCenter(),An=Kn.getTopLeft(),br=Kn.getBottomRight();return _==null&&(Math.abs(zn.x-C.x)<L?(_=zn.x,Ae=.5):Math.abs(An.x-x.x)<L?(_=An.x,Ae=0):Math.abs(An.x-T.x)<L?(_=An.x,Ae=1):Math.abs(br.x-T.x)<L?(_=br.x,Ae=1):Math.abs(br.x-x.x)<L&&(_=br.x),_!=null&&(z=Math.min(O.y,Kn.y),Q=Math.max(T.y,br.y)-z)),q==null&&(Math.abs(zn.y-C.y)<L?(q=zn.y,Pe=.5):Math.abs(An.y-x.y)<L?q=An.y:Math.abs(An.y-T.y)<L?(q=An.y,Pe=1):Math.abs(br.y-T.y)<L?(q=br.y,Pe=1):Math.abs(br.y-x.y)<L&&(q=br.y),q!=null&&(ye=Math.min(O.x,Kn.x),Ce=Math.max(T.x,br.x)-ye)),_!=null&&q!=null}),this.hide(),q!=null||_!=null){q!=null&&(O.y=q-Pe*O.height),_!=null&&(O.x=_-Ae*O.width);var qe=O.getCenter(),lt=qe.x-m.width/2,ze=qe.y-m.height/2,ht=lt-v.x,nn=ze-v.y;(ht!==0||nn!==0)&&(f.translate(ht,nn,{snapped:!0,restrict:this.graph.hook.getRestrictArea(c)}),Ce&&(Ce+=ht),Q&&(Q+=nn)),this.update({verticalLeft:_,verticalTop:z,verticalHeight:Q,horizontalTop:q,horizontalLeft:ye,horizontalWidth:Ce})}}}},{key:"isIgnored",value:function(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&A.call(this.filterFunction,this.graph,t)}},{key:"update",value:function(e){if(e.horizontalTop){var t=this.graph.localToGraph(new Pt(e.horizontalLeft,e.horizontalTop)),a=this.graph.localToGraph(new Pt(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?"".concat(t.x):"0",y1:"".concat(t.y),x2:this.options.sharp?"".concat(a.x):"100%",y2:"".concat(a.y),display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){var s=this.graph.localToGraph(new Pt(e.verticalLeft,e.verticalTop)),u=this.graph.localToGraph(new Pt(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({x1:"".concat(s.x),y1:this.options.sharp?"".concat(s.y):"0",x2:"".concat(u.x),y2:this.options.sharp?"".concat(u.y):"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}},{key:"resetTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"show",value:function(){return this.resetTimer(),this.container.parentNode==null&&this.graph.container.appendChild(this.container),this}},{key:"hide",value:function(){var e=this;this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");var t=this.options.clean,a=typeof t=="number"?t:t!==!1?3e3:0;return a>0&&(this.timer=window.setTimeout(function(){e.container.parentNode!==null&&e.unmount()},a)),this}},{key:"onRemove",value:function(){this.stopListening(),this.hide()}},{key:"dispose",value:function(){this.remove()}}]),r}(Zi);M8([Zi.dispose()],vS.prototype,"dispose",null);var P8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Fv=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"init",value:function(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}},{key:"startListening",value:function(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"stopListening",value:function(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}},{key:"resetUpdates",value:function(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}},{key:"onSortModel",value:function(){this.model.hasActiveBatch(r.SORT_DELAYING_BATCHES)||this.sortViews()}},{key:"onModelReseted",value:function(e){var t=e.options;this.removeZPivots(),this.resetViews(this.model.getCells(),t)}},{key:"onBatchStop",value:function(e){var t=e.name,a=e.data;if(!this.isFrozen()){var s=this.model;if(!this.isAsync()){var u=r.UPDATE_DELAYING_BATCHES;u.includes(t)&&!s.hasActiveBatch(u)&&this.updateViews(a)}var l=r.SORT_DELAYING_BATCHES;l.includes(t)&&!s.hasActiveBatch(l)&&this.sortViews()}}},{key:"onCellAdded",value:function(e){var t=e.cell,a=e.options,s=a.position;this.isAsync()||typeof s!="number"?this.renderView(t,a):(a.maxPosition===s&&this.freeze({key:"addCells"}),this.renderView(t,a),s===0&&this.unfreeze({key:"addCells"}))}},{key:"onCellRemoved",value:function(e){var t=e.cell,a=e.options,s=this.findViewByCell(t);s&&this.requestViewUpdate(s,r.FLAG_REMOVE,s.priority,a)}},{key:"onCellZIndexChanged",value:function(e){var t=e.cell,a=e.options;if(this.options.sorting==="approx"){var s=this.findViewByCell(t);s&&this.requestViewUpdate(s,r.FLAG_INSERT,s.priority,a)}}},{key:"onCellVisibleChanged",value:function(e){var t=e.cell,a=e.current,s=e.options;a||this.processEdgeOnTerminalVisibleChanged(t,!1);var u=this.findViewByCell(t);!a&&u?this.removeView(t):a&&u==null&&this.renderView(t,s),a&&this.processEdgeOnTerminalVisibleChanged(t,!0)}},{key:"processEdgeOnTerminalVisibleChanged",value:function(e,t){var a=function(u,l){var c=u.getSourceCellId();if(c!==l.id)return u.getSourceCell();var f=u.getTargetCellId();return f!==l.id?u.getTargetCell():null};this.model.getConnectedEdges(e).forEach(function(s){var u=a(s,e);(u==null||u.isVisible())&&(t?s.show():s.hide())})}},{key:"isEdgeTerminalVisible",value:function(e,t){var a=t==="source"?e.getSourceCellId():e.getTargetCellId(),s=a?this.model.getCell(a):null;return!(s&&!s.isVisible())}},{key:"requestConnectedEdgesUpdate",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(as.isCellView(e))for(var a=e.cell,s=this.model.getConnectedEdges(a),u=0,l=s.length;u<l;u+=1){var c=s[u],f=this.findViewByCell(c);if(!!f){var d=["update"];c.getTargetCell()===a&&d.push("target"),c.getSourceCell()===a&&d.push("source"),this.scheduleViewUpdate(f,f.getFlag(d),f.priority,t)}}}},{key:"forcePostponedViewUpdate",value:function(e,t){if(!e||!as.isCellView(e))return!1;var a=e.cell;if(a.isNode())return!1;var s=e;if(a.isEdge()&&(t&e.getFlag(["source","target"]))==0){var u=0,l=this.findViewByCell(a.getSourceCell());l&&!this.isViewMounted(l)&&(u=this.dumpView(l),s.updateTerminalMagnet("source"));var c=0,f=this.findViewByCell(a.getTargetCell());if(f&&!this.isViewMounted(f)&&(c=this.dumpView(f),s.updateTerminalMagnet("target")),u===0&&c===0)return!this.dumpView(s)}return!1}},{key:"scheduleViewUpdate",value:function(e,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=e.cid,l=this.updates,c=l.priorities[a];c||(c=l.priorities[a]={});var f=c[u]||0;(f&t)!==t&&(f||(l.count+=1),t&r.FLAG_REMOVE&&f&r.FLAG_INSERT?c[u]^=r.FLAG_INSERT:t&r.FLAG_INSERT&&f&r.FLAG_REMOVE&&(c[u]^=r.FLAG_REMOVE),c[u]|=t,this.graph.hook.onViewUpdated(e,t,s))}},{key:"requestViewUpdate",value:function(e,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.scheduleViewUpdate(e,t,a,s);var u=this.isAsync();if(!(this.isFrozen()||u&&s.async!==!1||this.model.hasActiveBatch(r.UPDATE_DELAYING_BATCHES))){var l=this.updateViews(s);u&&this.graph.trigger("render:done",{stats:l,options:s})}}},{key:"dumpView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null)return 0;var a=e.cid,s=this.updates,u=s.priorities[e.priority],l=this.registerMountedView(e)|u[a];return delete u[a],l?this.updateView(e,l,t):0}},{key:"dumpViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.checkView(e),this.updateViews(e)}},{key:"requireView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.findViewByCell(e);return a==null?null:(this.dumpView(a,t),a)}},{key:"updateView",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e==null)return 0;if(as.isCellView(e)){if(t&r.FLAG_REMOVE)return this.removeView(e.cell),0;t&r.FLAG_INSERT&&(this.insertView(e),t^=r.FLAG_INSERT)}return t?e.confirmUpdate(t,a):0}},{key:"updateViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t,a=0,s=0,u=r.MIN_PRIORITY;do t=this.updateViewsBatch(e),a+=1,s+=t.updatedCount,u=Math.min(t.priority,u);while(!t.empty);return{priority:u,batchCount:a,updatedCount:s}}},{key:"updateViewsBatch",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.updates,a=t.priorities,s=e.batchSize||r.UPDATE_BATCH_SIZE,u=!0,l=r.MIN_PRIORITY,c=0,f=0,d=0,v=0,m=e.checkView||this.options.checkView;typeof m!="function"&&(m=null);e:for(var y=0,C=a.length;y<C;y+=1){var O=a[y];for(var x in O){if(d>=s){u=!1;break e}var T=Zi.views[x];if(!T){delete O[x];continue}var L=O[x];if((L&r.FLAG_REMOVE)==0){var _=x in t.unmounted;if(m&&!A.call(m,this.graph,{view:T,unmounted:_})){_||(this.registerUnmountedView(T),T.unmount()),t.unmounted[x]|=L,delete O[x],f+=1;continue}_&&(L|=r.FLAG_INSERT,c+=1),L|=this.registerMountedView(T)}var z=T,Q=this.updateView(T,L,e);if(Q>0){var q=z.cell;q&&q.isEdge()&&(z.hasAction(Q,"source")&&!this.isEdgeTerminalVisible(q,"source")&&(Q=z.removeAction(Q,"source"),Q|=r.FLAG_REMOVE),z.hasAction(Q,"target")&&!this.isEdgeTerminalVisible(q,"target")&&(Q=z.removeAction(Q,"target"),Q|=r.FLAG_REMOVE))}if(Q>0&&(O[x]=Q,!this.graph.hook.onViewPostponed(z,Q,e)||O[x])){v+=1,u=!1;continue}l>y&&(l=y),d+=1,delete O[x]}}return{empty:u,priority:l,mountedCount:c,unmountedCount:f,updatedCount:d,postponedCount:v}}},{key:"updateViewsAsync",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{processed:0,priority:r.MIN_PRIORITY},s=this.updates,u=s.animationId;if(u){if(M.cancelAnimationFrame(u),a.processed===0){var l=t.before;typeof l=="function"&&A.call(l,this.graph,this.graph)}var c=this.updateViewsBatch(t),f=this.checkViewImpl({checkView:t.checkView,mountedBatchSize:r.MOUNT_BATCH_SIZE-c.mountedCount,unmountedBatchSize:r.MOUNT_BATCH_SIZE-c.unmountedCount}),d=a.processed,v=s.count,m=f.mountedCount,y=f.unmountedCount;c.updatedCount>0&&(d+=c.updatedCount+c.unmountedCount,a.priority=Math.min(c.priority,a.priority),c.empty&&m===0?(c.priority=a.priority,c.mountedCount+=m,c.unmountedCount+=y,this.graph.trigger("render:done",{stats:c,options:t}),a.processed=0,s.count=0):a.processed=d);var C=t.progress;if(v&&typeof C=="function"&&A.call(C,this.graph,{total:v,done:c.empty,current:d}),s.animationId!==u)return}s.animationId=M.requestAnimationFrame(function(){e.updateViewsAsync(t,a)})}},{key:"registerMountedView",value:function(e){var t=e.cid,a=this.updates;if(t in a.mounted)return 0;a.mounted[t]=!0,a.mountedCids.push(t);var s=a.unmounted[t]||0;return delete a.unmounted[t],s}},{key:"registerUnmountedView",value:function(e){var t=e.cid,a=this.updates;if(t in a.unmounted)return 0;a.unmounted[t]|=r.FLAG_INSERT;var s=a.unmounted[t];return a.unmountedCids.push(t),delete a.mounted[t],s}},{key:"isViewMounted",value:function(e){if(e==null)return!1;var t=e.cid;return t in this.updates.mounted}},{key:"getMountedViews",value:function(){return Object.keys(this.updates.mounted).map(function(e){return as.views[e]})}},{key:"getUnmountedViews",value:function(){return Object.keys(this.updates.unmounted).map(function(e){return as.views[e]})}},{key:"checkMountedViews",value:function(e,t){var a=0;if(typeof e!="function")return a;for(var s=this.updates,u=s.mounted,l=s.mountedCids,c=t==null?l.length:Math.min(l.length,t),f=0;f<c;f+=1){var d=l[f];if(d in u){var v=as.views[d];if(v!=null){var m=A.call(e,this.graph,{view:v,unmounted:!0});if(m){l.push(d);continue}a+=1;var y=this.registerUnmountedView(v);y&&v.unmount()}}}return l.splice(0,c),a}},{key:"checkUnmountedViews",value:function(e,t){var a=0;typeof e!="function"&&(e=null);for(var s=this.updates,u=s.unmounted,l=s.unmountedCids,c=t==null?l.length:Math.min(l.length,t),f=0;f<c;f+=1){var d=l[f];if(d in u){var v=as.views[d];if(v!=null){if(e&&!A.call(e,this.graph,{view:v,unmounted:!1})){l.push(d);continue}a+=1;var m=this.registerMountedView(v);m&&this.scheduleViewUpdate(v,m,v.priority,{mounting:!0})}}}return l.splice(0,c),a}},{key:"checkViewImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER},t=e.checkView||this.options.checkView,a=this.checkMountedViews(t,e.unmountedBatchSize),s=this.checkUnmountedViews(t,a>0?Math.min(this.updates.unmountedCids.length-a,e.mountedBatchSize):e.mountedBatchSize);return{mountedCount:s,unmountedCount:a}}},{key:"checkView",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.checkViewImpl(e)}},{key:"isFrozen",value:function(){return!!this.options.frozen}},{key:"freeze",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.key,a=this.updates,s=this.options.frozen,u=a.freezeKey;if(t&&t!==u){if(s&&u)return;a.frozen=s,a.freezeKey=t}this.options.frozen=!0;var l=a.animationId;a.animationId=null,this.isAsync()&&l!=null&&M.cancelAnimationFrame(l),this.graph.trigger("freeze",{key:t})}},{key:"unfreeze",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=t.key,s=this.updates,u=s.freezeKey;if(!(a&&u&&a!==u)&&(s.freezeKey=null,!(a&&a===u&&s.frozen))){var l=function(){e.options.frozen=s.frozen=!1,s.sort&&(e.sortViews(),s.sort=!1);var d=t.after;d&&A.call(d,e.graph,e.graph),e.graph.trigger("unfreeze",{key:a})};if(this.isAsync()){this.freeze();var c=t.progress;this.updateViewsAsync(Object.assign(Object.assign({},t),{progress:function(d){var v=d.done,m=d.current,y=d.total;c&&A.call(c,e.graph,{done:v,current:m,total:y}),v&&l()}}))}else this.updateViews(t),l()}}},{key:"isAsync",value:function(){return!!this.options.async}},{key:"setAsync",value:function(e){this.options.async=e}},{key:"onRemove",value:function(){this.freeze(),this.removeViews()}},{key:"resetViews",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(var a=0,s=e.length;a<s;a+=1)this.renderView(e[a],t);this.unfreeze({key:"reset"}),this.sortViews()}},{key:"removeView",value:function(e){var t=this.views[e.id];if(t){var a=t.cid,s=this.updates,u=s.mounted,l=s.unmounted;t.remove(),delete this.views[e.id],delete u[a],delete l[a]}return t}},{key:"removeViews",value:function(){var e=this;this.views&&Object.keys(this.views).forEach(function(t){var a=e.views[t];a&&e.removeView(a.cell)}),this.views={}}},{key:"renderView",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.id,s=this.views,u=0,l=s[a];if(!!e.isVisible()&&!(e.isEdge()&&(!this.isEdgeTerminalVisible(e,"source")||!this.isEdgeTerminalVisible(e,"target")))){if(l)u=r.FLAG_INSERT;else{var c=this.graph.hook.createCellView(e);c&&(l=s[e.id]=c,l.graph=this.graph,u=this.registerUnmountedView(l)|l.getBootstrapFlag())}l&&this.requestViewUpdate(l,u,l.priority,t)}}},{key:"isExactSorting",value:function(){return this.options.sorting==="exact"}},{key:"sortViews",value:function(){if(!!this.isExactSorting()){if(this.isFrozen()){this.updates.sort=!0;return}this.sortViewsExact()}}},{key:"sortElements",value:function(e,t){var a=e.map(function(s){var u=s.parentNode,l=u.insertBefore(document.createTextNode(""),s.nextSibling);return function(c){if(u===c)throw new Error("You can't sort elements if any one is a descendant of another.");u.insertBefore(c,l),u.removeChild(l)}});e.sort(t).forEach(function(s,u){return a[u](s)})}},{key:"sortViewsExact",value:function(){var e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,function(a,s){var u=t.getCell(a.getAttribute("data-cell-id")||""),l=t.getCell(s.getAttribute("data-cell-id")||""),c=u.getZIndex()||0,f=l.getZIndex()||0;return c===f?0:c<f?-1:1})}},{key:"addZPivot",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zPivots==null&&(this.zPivots={});var t=this.zPivots,a=t[e];if(a)return a;a=t[e]=document.createComment("z-index:".concat(e+1));var s=-Infinity;for(var u in t){var l=+u;!(l<e&&l>s&&(s=l,s===e-1))}var c=this.view.stage;if(s!==-Infinity){var f=t[s];c.insertBefore(a,f.nextSibling)}else c.insertBefore(a,c.firstChild);return a}},{key:"removeZPivots",value:function(){var e=this;this.zPivots&&Object.keys(this.zPivots).forEach(function(t){var a=e.zPivots[t];a&&a.parentNode&&a.parentNode.removeChild(a)}),this.zPivots={}}},{key:"insertView",value:function(e){var t=this.view.stage;switch(this.options.sorting){case"approx":{var a=e.cell.getZIndex(),s=this.addZPivot(a);t.insertBefore(e.container,s);break}case"exact":default:t.appendChild(e.container);break}}},{key:"findViewByCell",value:function(e){if(e==null)return null;var t=Ui.isCell(e)?e.id:e;return this.views[t]}},{key:"findViewByElem",value:function(e){if(e==null)return null;var t=typeof e=="string"?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){var a=this.view.findAttr("data-cell-id",t);if(a)return this.views[a]}return null}},{key:"findViewsFromPoint",value:function(e){var t=this,a={x:e.x,y:e.y};return this.model.getCells().map(function(s){return t.findViewByCell(s)}).filter(function(s){return s!=null?M.getBBox(s.container,{target:t.view.stage}).containsPoint(a):!1})}},{key:"findEdgeViewsInArea",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Br.create(e);return this.model.getEdges().map(function(u){return t.findViewByCell(u)}).filter(function(u){if(u){var l=M.getBBox(u.container,{target:t.view.stage});return l.width===0?l.inflate(1,0):l.height===0&&l.inflate(0,1),a.strict?s.containsRect(l):s.isIntersectWithRect(l)}return!1})}},{key:"findViewsInArea",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=Br.create(e);return this.model.getNodes().map(function(u){return t.findViewByCell(u)}).filter(function(u){if(u){var l=M.getBBox(u.container,{target:t.view.stage});return a.strict?s.containsRect(l):s.isIntersectWithRect(l)}return!1})}},{key:"dispose",value:function(){this.resetUpdates(),this.stopListening()}}]),r}(ho);P8([ho.dispose()],Fv.prototype,"dispose",null),function(o){o.FLAG_INSERT=1<<30,o.FLAG_REMOVE=1<<29,o.MOUNT_BATCH_SIZE=1e3,o.UPDATE_BATCH_SIZE=1e3,o.MIN_PRIORITY=2,o.SORT_DELAYING_BATCHES=["add","to-front","to-back"],o.UPDATE_DELAYING_BATCHES=["translate"]}(Fv||(Fv={}));var k8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},j1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"elem",get:function(){return this.view.background}},{key:"init",value:function(){this.startListening(),this.options.background&&this.draw(this.options.background)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"updateBackgroundImage",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.size||"auto auto",a=e.position||"center",s=this.graph.transform.getScale(),u=this.graph.translate();if(typeof a=="object"){var l=u.tx+s.sx*(a.x||0),c=u.ty+s.sy*(a.y||0);a="".concat(l,"px ").concat(c,"px")}typeof t=="object"&&(t=Br.fromSize(t).scale(s.sx,s.sy),t="".concat(t.width,"px ").concat(t.height,"px")),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=a}},{key:"drawBackgroundImage",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(e instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}var a=this.optionsCache;if(!(a&&a.image!==t.image)){var s,u=t.opacity,l=t.size,c=t.repeat||"no-repeat",f=Zp.registry.get(c);if(typeof f=="function"){var d=t.quality||1;e.width*=d,e.height*=d;var v=f(e,t);if(!(v instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");s=v.toDataURL("image/png"),t.repeat&&c!==t.repeat?c=t.repeat:c="repeat",typeof l=="object"?(l.width*=v.width/e.width,l.height*=v.height/e.height):l===void 0&&(t.size={width:v.width/d,height:v.height/d})}else s=e.src,l===void 0&&(t.size={width:e.width,height:e.height});a!=null&&typeof t.size=="object"&&t.image===a.image&&t.repeat===a.repeat&&t.quality===a.quality&&(a.size=p.clone(t.size));var m=this.elem.style;m.backgroundImage="url(".concat(s,")"),m.backgroundRepeat=c,m.opacity=u==null||u>=1?"":"".concat(u),this.updateBackgroundImage(t)}}},{key:"updateBackgroundColor",value:function(e){this.elem.style.backgroundColor=e||""}},{key:"updateBackgroundOptions",value:function(e){this.graph.options.background=e}},{key:"update",value:function(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}},{key:"draw",value:function(e){var t=this,a=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(a.color),a.image){this.optionsCache=p.clone(a);var s=document.createElement("img");s.onload=function(){return t.drawBackgroundImage(s,e)},s.setAttribute("crossorigin","anonymous"),s.src=a.image}else this.drawBackgroundImage(null),this.optionsCache=null}},{key:"clear",value:function(){this.draw()}},{key:"dispose",value:function(){this.clear(),this.stopListening()}}]),r}(ho);k8([ho.dispose()],j1.prototype,"dispose",null);var D8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},I8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},h0=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;Object(me.a)(this,r),e=i.call(this),e.padding={left:0,top:0,right:0,bottom:0},e.options=uc.getOptions(n);var t=e.graph.transform.getScale();e.sx=t.sx,e.sy=t.sy;var a=e.options.width||e.graph.options.width,s=e.options.height||e.graph.options.height;e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(uc.containerClass)).css({width:a,height:s}),e.options.pageVisible&&e.$container.addClass(e.prefixClassName(uc.pagedClass)),e.options.className&&e.$container.addClass(e.options.className);var u=e.graph.container;u.parentNode&&e.$container.insertBefore(u);var l=u.getAttribute("style");if(l){var c={},f=l.split(";");f.forEach(function(d){var v=d.trim();if(v){var m=v.split(":");m.length&&(c[m[0].trim()]=m[1]?m[1].trim():"")}}),Object.keys(c).forEach(function(d){d==="width"||d==="height"||(u.style[d]="",e.container.style[d]=c[d])})}return e.content=document.createElement("div"),e.$content=e.$(e.content).addClass(e.prefixClassName(uc.contentClass)).css({width:e.graph.options.width,height:e.graph.options.height}),e.background=document.createElement("div"),e.$background=e.$(e.background).addClass(e.prefixClassName(uc.backgroundClass)),e.$content.append(e.background),e.options.pageVisible||e.$content.append(e.graph.view.grid),e.$content.append(u),e.$content.appendTo(e.container),e.startListening(),e.options.pageVisible||e.graph.grid.update(),e.backgroundManager=new r.Background(Object(rs.a)(e)),e.options.autoResize||e.update(),e}return Object(ue.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"model",get:function(){return this.graph.model}},{key:"startListening",value:function(){var e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}},{key:"stopListening",value:function(){var e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}},{key:"enableAutoResize",value:function(){this.options.autoResize=!0}},{key:"disableAutoResize",value:function(){this.options.autoResize=!1}},{key:"onUpdate",value:function(){this.graph.isAsync()||!this.options.autoResize||this.update()}},{key:"onBatchStop",value:function(e){this.graph.isAsync()||!this.options.autoResize||Fv.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}},{key:"delegateBackgroundEvents",value:function(e){var t=this,a=e||Ch.events;this.delegatedHandlers=Object.keys(a).reduce(function(s,u){var l=a[u];if(u.indexOf(" ")===-1)if(typeof l=="function")s[u]=l;else{var c=t.graph.view[l];typeof c=="function"&&(c=c.bind(t.graph.view),s[u]=c)}return s},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(function(s){t.delegateEvent(s,{guarded:!1},t.onBackgroundEvent)})}},{key:"undelegateBackgroundEvents",value:function(){var e=this;Object.keys(this.delegatedHandlers).forEach(function(t){e.undelegateEvent(t,e.onBackgroundEvent)})}},{key:"onBackgroundEvent",value:function(e){var t=!1,a=e.target;if(this.options.pageVisible)this.options.background?t=this.background===a:t=this.content===a;else{var s=this.graph.view;t=s.background===a||s.grid===a}if(t){var u=this.delegatedHandlers[e.type];typeof u=="function"&&u.apply(this.graph,arguments)}}},{key:"onRenderDone",value:function(e){var t=e.stats;this.options.autoResize&&t.priority<2&&this.update()}},{key:"onResize",value:function(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}},{key:"onScale",value:function(e){var t=e.sx,a=e.sy,s=e.ox,u=e.oy;this.updateScale(t,a),(s||u)&&(this.centerPoint(s,u),this.updatePageBreak());var l=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof l=="function"&&this.update()}},{key:"storeScrollPosition",value:function(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}},{key:"restoreScrollPosition",value:function(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}},{key:"storeClientSize",value:function(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"restoreClientSize",value:function(){this.cachedClientSize=null}},{key:"beforeManipulation",value:function(){(sa.IS_IE||sa.IS_EDGE)&&this.$container.css("visibility","hidden")}},{key:"afterManipulation",value:function(){(sa.IS_IE||sa.IS_EDGE)&&this.$container.css("visibility","visible")}},{key:"updatePageSize",value:function(e,t){e!=null&&(this.options.pageWidth=e),t!=null&&(this.options.pageHeight=t),this.updatePageBreak()}},{key:"updatePageBreak",value:function(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){var e=this.graph.options.width,t=this.graph.options.height,a=this.options.pageWidth*this.sx,s=this.options.pageHeight*this.sy;if(a===0||s===0)return;if(e>a||t>s){for(var u=!1,l=document.createElement("div"),c=1,f=Math.floor(e/a);c<f;c+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:c*a}).appendTo(l),u=!0;for(var d=1,v=Math.floor(t/s);d<v;d+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:d*s}).appendTo(l),u=!0;u&&(M.addClass(l,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(l),this.pageBreak=l)}}}},{key:"update",value:function(){var e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);var t=this.options.autoResizeOptions||this.options.fitTocontentOptions;typeof t=="function"&&(t=A.call(t,this,this));var a=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative",contentArea:this.calcContextArea(t)},t);this.graph.fitToContent(this.getFitToContentOptions(a))}},{key:"calcContextArea",value:function(e){var t=e==null?void 0:e.direction;if(!t)return this.graph.transform.getContentArea(e);function a(c){var f=c.getBBox();if(f&&c.isNode()){var d=c.getAngle();d!=null&&d!==0&&(f=f.bbox(d))}return f}var s=this.options.pageWidth||1,u=this.options.pageHeight||1,l=this.graph.getCells();return t.includes("top")||(l=l.filter(function(c){var f=a(c);return f.y>=0})),t.includes("left")||(l=l.filter(function(c){var f=a(c);return f.x>=0})),t.includes("right")||(l=l.filter(function(c){var f=a(c);return f.x+f.width<=s})),t.includes("bottom")||(l=l.filter(function(c){var f=a(c);return f.y+f.height<=u})),this.model.getCellsBBox(l)||new Br}},{key:"getFitToContentOptions",value:function(e){var t=this.sx,a=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=a),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=a),typeof e.padding=="object"?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*a,bottom:(e.padding.bottom||0)*a}:typeof e.padding=="number"&&(e.padding*=t),this.options.autoResize||(e.contentArea=Br.create()),e}},{key:"updateScale",value:function(e,t){var a=this.graph.options,s=e/this.sx,u=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(a.x*s,a.y*u),this.graph.resizeGraph(a.width*s,a.height*u)}},{key:"scrollbarPosition",value:function(e,t,a){if(e==null&&t==null)return{left:this.container.scrollLeft,top:this.container.scrollTop};var s={};return typeof e=="number"&&(s.scrollLeft=e),typeof t=="number"&&(s.scrollTop=t),a&&a.animation?this.$container.animate(s,a.animation):this.$container.prop(s),this}},{key:"scrollToPoint",value:function(e,t,a){var s=this.getClientSize(),u=this.graph.matrix(),l={};return typeof e=="number"&&(l.scrollLeft=e-s.width/2+u.e+(this.padding.left||0)),typeof t=="number"&&(l.scrollTop=t-s.height/2+u.f+(this.padding.top||0)),a&&a.animation?this.$container.animate(l,a.animation):this.$container.prop(l),this}},{key:"scrollToContent",value:function(e){var t=this.sx,a=this.sy,s=this.graph.getContentArea().getCenter();return this.scrollToPoint(s.x*t,s.y*a,e)}},{key:"scrollToCell",value:function(e,t){var a=this.sx,s=this.sy,u=e.getBBox().getCenter();return this.scrollToPoint(u.x*a,u.y*s,t)}},{key:"center",value:function(e){return this.centerPoint(e)}},{key:"centerPoint",value:function(e,t,a){var s=this.graph.matrix(),u=s.a,l=s.d,c=-s.e,f=-s.f,d=c+this.graph.options.width,v=f+this.graph.options.height,m;if(this.storeClientSize(),typeof e=="number"||typeof t=="number"){m=a;var y=this.getVisibleArea().getCenter();typeof e=="number"?e*=u:e=y.x,typeof t=="number"?t*=l:t=y.y}else m=e,e=(c+d)/2,t=(f+v)/2;if(m&&m.padding)return this.positionPoint({x:e,y:t},"50%","50%",m);var C=this.getPadding(),O=this.getClientSize(),x=O.width/2,T=O.height/2,L=x-C.left-e+c,_=x-C.right+e-d,z=T-C.top-t+f,Q=T-C.bottom+t-v;this.addPadding(Math.max(L,0),Math.max(_,0),Math.max(z,0),Math.max(Q,0));var q=this.scrollToPoint(e,t,m||void 0);return this.restoreClientSize(),q}},{key:"centerContent",value:function(e){return this.positionContent("center",e)}},{key:"centerCell",value:function(e,t){return this.positionCell(e,"center",t)}},{key:"positionContent",value:function(e,t){var a=this.graph.getContentArea(t);return this.positionRect(a,e,t)}},{key:"positionCell",value:function(e,t,a){var s=e.getBBox();return this.positionRect(s,t,a)}},{key:"positionRect",value:function(e,t,a){var s=Br.create(e);switch(t){case"center":return this.positionPoint(s.getCenter(),"50%","50%",a);case"top":return this.positionPoint(s.getTopCenter(),"50%",0,a);case"top-right":return this.positionPoint(s.getTopRight(),"100%",0,a);case"right":return this.positionPoint(s.getRightMiddle(),"100%","50%",a);case"bottom-right":return this.positionPoint(s.getBottomRight(),"100%","100%",a);case"bottom":return this.positionPoint(s.getBottomCenter(),"50%","100%",a);case"bottom-left":return this.positionPoint(s.getBottomLeft(),0,"100%",a);case"left":return this.positionPoint(s.getLeftMiddle(),0,"50%",a);case"top-left":return this.positionPoint(s.getTopLeft(),0,0,a);default:return this}}},{key:"positionPoint",value:function(e,t,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=s.padding,l=I8(s,["padding"]),c=E.normalizeSides(u),f=Br.fromSize(this.getClientSize()),d=f.clone().moveAndExpand({x:c.left,y:c.top,width:-c.right-c.left,height:-c.top-c.bottom});t=E.normalizePercentage(t,Math.max(0,d.width)),t<0&&(t=d.width+t),a=E.normalizePercentage(a,Math.max(0,d.height)),a<0&&(a=d.height+a);var v=d.getTopLeft().translate(t,a),m=f.getCenter().diff(v),y=this.zoom(),C=m.scale(1/y,1/y),O=Pt.create(e).translate(C);return this.centerPoint(O.x,O.y,l)}},{key:"zoom",value:function(e,t){if(e==null)return this.sx;t=t||{};var a,s,u=this.getClientSize(),l=this.clientToLocalPoint(u.width/2,u.height/2),c=e,f=e;if(t.absolute||(c+=this.sx,f+=this.sy),t.scaleGrid&&(c=Math.round(c/t.scaleGrid)*t.scaleGrid,f=Math.round(f/t.scaleGrid)*t.scaleGrid),t.maxScale&&(c=Math.min(t.maxScale,c),f=Math.min(t.maxScale,f)),t.minScale&&(c=Math.max(t.minScale,c),f=Math.max(t.minScale,f)),c=this.graph.transform.clampScale(c),f=this.graph.transform.clampScale(f),t.center){var d=c/this.sx,v=f/this.sy;a=t.center.x-(t.center.x-l.x)/d,s=t.center.y-(t.center.y-l.y)/v}else a=l.x,s=l.y;return this.beforeManipulation(),this.graph.transform.scale(c,f),this.centerPoint(a,s),this.afterManipulation(),this}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Br.create(e),s=this.graph;t.contentArea=a,t.viewportArea==null&&(t.viewportArea={x:s.options.x,y:s.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),s.transform.scaleContentToFitImpl(t,!1);var u=a.getCenter();return this.centerPoint(u.x,u.y),this.afterManipulation(),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.graph.getContentArea(e),e)}},{key:"transitionToPoint",value:function(e,t,a){var s=this;typeof e=="object"?(a=t,t=e.y,e=e.x):t=t,a==null&&(a={});var u,l,c=this.sx,f=Math.max(a.scale||c,1e-6),d=this.getClientSize(),v=new Pt(e,t),m=this.clientToLocalPoint(d.width/2,d.height/2);if(c===f){var y=m.diff(v).scale(c,c).round();u="translate(".concat(y.x,"px,").concat(y.y,"px)")}else{var C=f/(c-f)*v.distance(m),O=m.clone().move(v,C),x=this.localToBackgroundPoint(O).round();u="scale(".concat(f/c,")"),l="".concat(x.x,"px ").concat(x.y,"px")}var T=a.onTransitionEnd;return this.$container.addClass(uc.transitionClassName),this.$content.off(uc.transitionEventName).on(uc.transitionEventName,function(L){s.syncTransition(f,{x:e,y:t}),typeof T=="function"&&A.call(T,s,L.originalEvent)}).css({transform:u,transformOrigin:l,transition:"transform",transitionDuration:a.duration||"1s",transitionDelay:a.delay,transitionTimingFunction:a.timing}),this}},{key:"syncTransition",value:function(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}},{key:"removeTransition",value:function(){return this.$container.removeClass(uc.transitionClassName),this.$content.off(uc.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}},{key:"transitionToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Br.create(e),s=t.maxScale||Infinity,u=t.minScale||Number.MIN_VALUE,l=t.scaleGrid||null,c=t.visibility||1,f=t.center?Pt.create(t.center):a.getCenter(),d=this.getClientSize(),v=d.width*c,m=d.height*c,y=new Br(f.x-v/2,f.y-m/2,v,m).getMaxUniformScaleToFit(a,f);return y=Math.min(y,s),l&&(y=Math.floor(y/l)*l),y=Math.max(u,y),this.transitionToPoint(f,Object.assign({scale:y},t))}},{key:"startPanning",value:function(e){var t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.normalizeEvent(e),a=t.clientX-this.clientX,s=t.clientY-this.clientY;this.container.scrollTop-=s,this.container.scrollLeft-=a,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}},{key:"stopPanning",value:function(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e})}},{key:"clientToLocalPoint",value:function(e,t){var a=typeof e=="object"?e.x:e,s=typeof e=="object"?e.y:t,u=this.graph.matrix();return a+=this.container.scrollLeft-this.padding.left-u.e,s+=this.container.scrollTop-this.padding.top-u.f,new Pt(a/u.a,s/u.d)}},{key:"localToBackgroundPoint",value:function(e,t){var a=typeof e=="object"?Pt.create(e):new Pt(e,t),s=this.graph.matrix(),u=this.padding;return M.transformPoint(a,s).translate(u.left,u.top)}},{key:"resize",value:function(e,t){var a=e!=null?e:this.container.offsetWidth,s=t!=null?t:this.container.offsetHeight;typeof a=="number"&&(a=Math.round(a)),typeof s=="number"&&(s=Math.round(s)),this.options.width=a,this.options.height=s,this.$container.css({width:a,height:s}),this.update()}},{key:"getClientSize",value:function(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}},{key:"autoScroll",value:function(e,t){var a=10,s=this.container,u=s.getBoundingClientRect(),l=0,c=0;return e<=u.left+a&&(l=-a),t<=u.top+a&&(c=-a),e>=u.right-a&&(l=a),t>=u.bottom-a&&(c=a),l!==0&&(s.scrollLeft+=l),c!==0&&(s.scrollTop+=c),{scrollerX:l,scrollerY:c}}},{key:"addPadding",value:function(e,t,a,s){var u=this.getPadding();this.padding={left:Math.round(u.left+(e||0)),top:Math.round(u.top+(a||0)),bottom:Math.round(u.bottom+(s||0)),right:Math.round(u.right+(t||0))},u=this.padding,this.$content.css({width:u.left+this.graph.options.width+u.right,height:u.top+this.graph.options.height+u.bottom});var l=this.graph.container;return l.style.left="".concat(this.padding.left,"px"),l.style.top="".concat(this.padding.top,"px"),this}},{key:"getPadding",value:function(){var e=this.options.padding;return typeof e=="function"?E.normalizeSides(A.call(e,this,this)):E.normalizeSides(e)}},{key:"getVisibleArea",value:function(){var e=this.graph.matrix(),t=this.getClientSize(),a={x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},s=M.transformRectangle(a,e.inverse());return s.x-=(this.padding.left||0)/this.sx,s.y-=(this.padding.top||0)/this.sy,s}},{key:"isCellVisible",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=e.getBBox(),s=this.getVisibleArea();return t.strict?s.containsRect(a):s.isIntersectWithRect(a)}},{key:"isPointVisible",value:function(e){return this.getVisibleArea().containsPoint(e)}},{key:"lock",value:function(){return this.$container.css("overflow","hidden"),this}},{key:"unlock",value:function(){return this.$container.css("overflow","scroll"),this}},{key:"onRemove",value:function(){this.stopListening()}},{key:"dispose",value:function(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}}]),r}(Zi);D8([Zi.dispose()],h0.prototype,"dispose",null),function(o){var i=function(r){Object(xr.a)(e,r);var n=Object(Sr.a)(e);function e(t){var a;return Object(me.a)(this,e),a=n.call(this,t.graph),a.scroller=t,t.options.background&&a.draw(t.options.background),a}return Object(ue.a)(e,[{key:"elem",get:function(){return this.scroller.background}},{key:"init",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"updateBackgroundOptions",value:function(a){this.scroller.options.background=a}}]),e}(j1);o.Background=i}(h0||(h0={}));var uc;(function(o){o.containerClass="graph-scroller",o.panningClass="".concat(o.containerClass,"-panning"),o.pannableClass="".concat(o.containerClass,"-pannable"),o.pagedClass="".concat(o.containerClass,"-paged"),o.contentClass="".concat(o.containerClass,"-content"),o.backgroundClass="".concat(o.containerClass,"-background"),o.transitionClassName="transition-in-progress",o.transitionEventName="transitionend.graph-scroller-transition",o.defaultOptions={padding:function(){var n=this.getClientSize(),e=Math.max(this.options.minVisibleWidth||0,1)||1,t=Math.max(this.options.minVisibleHeight||0,1)||1,a=Math.max(n.width-e,0),s=Math.max(n.height-t,0);return{left:a,top:s,right:a,bottom:s}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0};function i(r){var n=p.merge({},o.defaultOptions,r);return n.pageWidth==null&&(n.pageWidth=r.graph.options.width),n.pageHeight==null&&(n.pageHeight=r.graph.options.height),n}o.getOptions=i})(uc||(uc={}));function Ds(o,i,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(r){var e=r.graph,t=e.view.normalizeEvent(i),a=e.snapToGrid(t.clientX,t.clientY);r.notify(o,Object.assign({e:t,view:r,node:r.cell,cell:r.cell,x:a.x,y:a.y},n))}}var R8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},L1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.options=p.merge({},Ku.defaultOptions,n),e.options.model&&(e.options.collection=e.options.model.collection),e.options.collection?e.collection=e.options.collection:(e.collection=new Sk([],{comparator:Ku.depthComparator}),e.options.collection=e.collection),e.boxCount=0,e.createContainer(),e.initHandles(),e.startListening(),e}return Object(ue.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"boxClassName",get:function(){return this.prefixClassName(Ku.classNames.box)}},{key:"$boxes",get:function(){return this.$container.children(".".concat(this.boxClassName))}},{key:"handleOptions",get:function(){return this.options}},{key:"startListening",value:function(){var e,t=this.graph,a=this.collection;this.delegateEvents((e={},Object(Re.a)(e,"mousedown .".concat(this.boxClassName),"onSelectionBoxMouseDown"),Object(Re.a)(e,"touchstart .".concat(this.boxClassName),"onSelectionBoxMouseDown"),e),!0),t.on("scale",this.onGraphTransformed,this),t.on("translate",this.onGraphTransformed,this),t.model.on("updated",this.onModelUpdated,this),a.on("added",this.onCellAdded,this),a.on("removed",this.onCellRemoved,this),a.on("reseted",this.onReseted,this),a.on("updated",this.onCollectionUpdated,this),a.on("node:change:position",this.onNodePositionChanged,this),a.on("cell:changed",this.onCellChanged,this)}},{key:"stopListening",value:function(){var e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}},{key:"onRemove",value:function(){this.stopListening()}},{key:"onGraphTransformed",value:function(){this.updateSelectionBoxes({async:!1})}},{key:"onCellChanged",value:function(){this.updateSelectionBoxes()}},{key:"onNodePositionChanged",value:function(e){var t=e.node,a=e.options,s=this.options,u=s.showNodeSelectionBox,l=s.pointerEvents,c=a.ui,f=a.selection,d=a.translateBy,v=a.snapped,m=(u!==!0||l==="none")&&!this.translating&&!f,y=c&&d&&t.id===d;if(m&&(y||v)){this.translating=!0;var C=t.position(),O=t.previous("position"),x=C.x-O.x,T=C.y-O.y;(x!==0||T!==0)&&this.translateSelectedNodes(x,T,t,a),this.translating=!1}}},{key:"onModelUpdated",value:function(e){var t=e.removed;t&&t.length&&this.unselect(t)}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.collection.has(e)}},{key:"length",get:function(){return this.collection.length}},{key:"cells",get:function(){return this.collection.toArray()}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.dryrun=!0;var a=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(a,t),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e){if(t.batch){var a=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(a,Object.assign(Object.assign({},t),{ui:!0})),this}var s=this.cells,u=this.filter(Array.isArray(e)?e:[e]),l={},c={};s.forEach(function(v){return l[v.id]=v}),u.forEach(function(v){return c[v.id]=v});var f=[],d=[];return u.forEach(function(v){l[v.id]||f.push(v)}),s.forEach(function(v){c[v.id]||d.push(v)}),d.length&&this.unselect(d,Object.assign(Object.assign({},t),{ui:!0})),f.length&&this.select(f,Object.assign(Object.assign({},t),{ui:!0})),d.length===0&&f.length===0&&this.updateContainer(),this}return this.clean(t)}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.length&&(e.batch===!1?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}},{key:"setFilter",value:function(e){this.options.filter=e}},{key:"setContent",value:function(e){this.options.content=e}},{key:"startSelecting",value:function(e){e=this.normalizeEvent(e),this.clean();var t,a,s=this.graph.container;if(e.offsetX!=null&&e.offsetY!=null&&s.contains(e.target))t=e.offsetX,a=e.offsetY;else{var u=this.$(s).offset(),l=s.scrollLeft,c=s.scrollTop;t=e.clientX-u.left+window.pageXOffset+l,a=e.clientY-u.top+window.pageYOffset+c}this.$container.css({top:a,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:a,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(Ku.documentEvents,e.data)}},{key:"filter",value:function(e){var t=this,a=this.options.filter;return Array.isArray(a)?e.filter(function(s){return!a.includes(s)&&!a.includes(s.shape)}):typeof a=="function"?e.filter(function(s){return A.call(a,t.graph,s)}):e}},{key:"stopSelecting",value:function(e){var t=this.graph,a=this.getEventData(e),s=a.action;switch(s){case"selecting":{var u=this.$container.width(),l=this.$container.height(),c=this.$container.offset(),f=t.pageToLocal(c.left,c.top),d=t.transform.getScale();u/=d.sx,l/=d.sy;var v=new Br(f.x,f.y,u,l),m=this.getCellViewsInArea(v).map(function(O){return O.cell});this.reset(m,{batch:!0}),this.hideRubberband();break}case"translating":{var y=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){var C=a;this.updateSelectedNodesPosition({dx:C.clientX-C.originX,dy:C.clientY-C.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,y.x,y.y);break}default:{this.clean();break}}}},{key:"onMouseUp",value:function(e){var t=this.getEventData(e).action;t&&(this.stopSelecting(e),this.undelegateDocumentEvents())}},{key:"onSelectionBoxMouseDown",value:function(e){this.options.following||e.stopPropagation();var t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);var a=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:a});var s=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,s.x,s.y),this.delegateDocumentEvents(Ku.documentEvents,t.data)}},{key:"startTranslating",value:function(e){this.graph.model.startBatch("move-selection");var t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}},{key:"getSelectionOffset",value:function(e,t){var a=e.x-t.clientX,s=e.y-t.clientY,u=this.graph.hook.getRestrictArea();if(u){var l=this.collection.toArray(),c=Ui.getCellsBBox(l,{deep:!0})||Br.create(),f=u.x-c.x,d=u.y-c.y,v=u.x+u.width-(c.x+c.width),m=u.y+u.height-(c.y+c.height);if(a<f&&(a=f),s<d&&(s=d),v<a&&(a=v),m<s&&(s=m),!this.options.following){var y=e.x-t.originX,C=e.y-t.originY;a=y<=f||y>=v?0:a,s=C<=d||C>=m?0:s}}return{dx:a,dy:s}}},{key:"updateSelectedNodesPosition",value:function(e){var t=e.dx,a=e.dy;if(t||a)if(this.translateSelectedNodes(t,a),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{var s=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:"+=".concat(t*s.sx),top:"+=".concat(a*s.sy)})}}},{key:"autoScrollGraph",value:function(e,t){var a=this.graph.scroller.widget;return a?a.autoScroll(e,t):{scrollerX:0,scrollerY:0}}},{key:"adjustSelection",value:function(e){var t=this.normalizeEvent(e),a=this.getEventData(t),s=a.action;switch(s){case"selecting":{var u=a;u.moving!==!0&&(this.$container.appendTo(this.graph.container),this.showRubberband(),u.moving=!0);var l=this.autoScrollGraph(t.clientX,t.clientY),c=l.scrollerX,f=l.scrollerY;u.scrollerX+=c,u.scrollerY+=f;var d=t.clientX-u.clientX+u.scrollerX,v=t.clientY-u.clientY+u.scrollerY,m=parseInt(this.$container.css("left"),10),y=parseInt(this.$container.css("top"),10);this.$container.css({left:d<0?u.offsetX+d:m,top:v<0?u.offsetY+v:y,width:Math.abs(d),height:Math.abs(v)});break}case"translating":{var C=this.graph.snapToGrid(t.clientX,t.clientY),O=a,x=this.getSelectionOffset(C,O);this.options.following?this.updateSelectedNodesPosition(x):this.updateContainerPosition(x),x.dx&&(O.clientX=C.x),x.dy&&(O.clientY=C.y),this.notifyBoxEvent("box:mousemove",e,C.x,C.y);break}default:break}this.boxesUpdated=!1}},{key:"translateSelectedNodes",value:function(e,t,a,s){var u=this,l={},c=[];if(a&&(l[a.id]=!0),this.collection.toArray().forEach(function(d){d.getDescendants({deep:!0}).forEach(function(v){l[v.id]=!0})}),s&&s.translateBy){var f=this.graph.getCellById(s.translateBy);f&&(l[f.id]=!0,f.getDescendants({deep:!0}).forEach(function(d){l[d.id]=!0}),c.push(f))}this.collection.toArray().forEach(function(d){if(!l[d.id]){var v=Object.assign(Object.assign({},s),{selection:u.cid,exclude:c});d.translate(e,t,v),u.graph.model.getConnectedEdges(d).forEach(function(m){l[m.id]||(m.translate(e,t,v),l[m.id]=!0)})}})}},{key:"getCellViewsInArea",value:function(e){var t=this.graph,a={strict:this.options.strict},s=[];return this.options.rubberNode&&(this.options.useCellGeometry?s=s.concat(t.model.getNodesInArea(e,a).map(function(u){return t.renderer.findViewByCell(u)}).filter(function(u){return u!=null})):s=s.concat(t.renderer.findViewsInArea(e,a))),this.options.rubberEdge&&(this.options.useCellGeometry?s=s.concat(t.model.getEdgesInArea(e,a).map(function(u){return t.renderer.findViewByCell(u)}).filter(function(u){return u!=null})):s=s.concat(t.renderer.findEdgeViewsInArea(e,a))),s}},{key:"notifyBoxEvent",value:function(e,t,a,s){var u=this.getEventData(t),l=u.activeView;this.trigger(e,{e:t,view:l,x:a,y:s,cell:l.cell})}},{key:"getSelectedClassName",value:function(e){return this.prefixClassName("".concat(e.isNode()?"node":"edge","-selected"))}},{key:"addCellSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}},{key:"removeCellUnSelectedClassName",value:function(e){var t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}},{key:"destroySelectionBox",value:function(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find('[data-cell-id="'.concat(e.id,'"]')).remove(),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}},{key:"destroyAllSelectionBoxes",value:function(e){var t=this;e.forEach(function(a){return t.removeCellUnSelectedClassName(a)}),this.hide(),this.$boxes.remove(),this.boxCount=0}},{key:"hide",value:function(){this.$container.removeClass(this.prefixClassName(Ku.classNames.rubberband)).removeClass(this.prefixClassName(Ku.classNames.selected))}},{key:"showRubberband",value:function(){this.$container.addClass(this.prefixClassName(Ku.classNames.rubberband))}},{key:"hideRubberband",value:function(){this.$container.removeClass(this.prefixClassName(Ku.classNames.rubberband))}},{key:"showSelected",value:function(){this.$container.removeAttr("style").addClass(this.prefixClassName(Ku.classNames.selected))}},{key:"createContainer",value:function(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(Ku.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(Ku.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(Ku.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}},{key:"updateContainerPosition",value:function(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:"+=".concat(e.dx),top:"+=".concat(e.dy)})}},{key:"updateContainer",value:function(){var e=this,t={x:Infinity,y:Infinity},a={x:0,y:0},s=this.collection.toArray().filter(function(c){return e.canShowSelectionBox(c)});s.forEach(function(c){var f=e.graph.renderer.findViewByCell(c);if(f){var d=f.getBBox({useCellGeometry:e.options.useCellGeometry});t.x=Math.min(t.x,d.x),t.y=Math.min(t.y,d.y),a.x=Math.max(a.x,d.x+d.width),a.y=Math.max(a.y,d.y+d.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:t.x,top:t.y,width:a.x-t.x,height:a.y-t.y}).attr("data-selection-length",this.collection.length);var u=this.options.content;if(u)if(typeof u=="function"){var l=A.call(u,this.graph,this,this.$selectionContent[0]);l&&this.$selectionContent.html(l)}else this.$selectionContent.html(u);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}},{key:"canShowSelectionBox",value:function(e){return e.isNode()&&this.options.showNodeSelectionBox===!0||e.isEdge()&&this.options.showEdgeSelectionBox===!0}},{key:"createSelectionBox",value:function(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){var t=this.graph.renderer.findViewByCell(e);if(t){var a=t.getBBox({useCellGeometry:this.options.useCellGeometry}),s=this.boxClassName;this.$("<div/>").addClass(s).addClass("".concat(s,"-").concat(e.isNode()?"node":"edge")).attr("data-cell-id",e.id).css({position:"absolute",left:a.x,top:a.y,width:a.width,height:a.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}},{key:"updateSelectionBoxes",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}},{key:"confirmUpdate",value:function(){var e=this;return this.boxCount&&(this.hide(),this.$boxes.each(function(t,a){var s=e.$(a).remove().attr("data-cell-id"),u=e.collection.get(s);u&&e.createSelectionBox(u)}),this.updateContainer()),0}},{key:"getCellViewFromElem",value:function(e){var t=e.getAttribute("data-cell-id");if(t){var a=this.collection.get(t);if(a)return this.graph.renderer.findViewByCell(a)}return null}},{key:"onCellRemoved",value:function(e){var t=e.cell;this.destroySelectionBox(t),this.updateContainer()}},{key:"onReseted",value:function(e){var t=this,a=e.previous,s=e.current;this.destroyAllSelectionBoxes(a),s.forEach(function(u){t.listenCellRemoveEvent(u),t.createSelectionBox(u)}),this.updateContainer()}},{key:"onCellAdded",value:function(e){var t=e.cell;this.listenCellRemoveEvent(t),this.createSelectionBox(t),this.updateContainer()}},{key:"listenCellRemoveEvent",value:function(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}},{key:"onCollectionUpdated",value:function(e){var t=this,a=e.added,s=e.removed,u=e.options;a.forEach(function(c){t.trigger("cell:selected",{cell:c,options:u}),t.graph.trigger("cell:selected",{cell:c,options:u}),c.isNode()?(t.trigger("node:selected",{cell:c,options:u,node:c}),t.graph.trigger("node:selected",{cell:c,options:u,node:c})):c.isEdge()&&(t.trigger("edge:selected",{cell:c,options:u,edge:c}),t.graph.trigger("edge:selected",{cell:c,options:u,edge:c}))}),s.forEach(function(c){t.trigger("cell:unselected",{cell:c,options:u}),t.graph.trigger("cell:unselected",{cell:c,options:u}),c.isNode()?(t.trigger("node:unselected",{cell:c,options:u,node:c}),t.graph.trigger("node:unselected",{cell:c,options:u,node:c})):c.isEdge()&&(t.trigger("edge:unselected",{cell:c,options:u,edge:c}),t.graph.trigger("edge:unselected",{cell:c,options:u,edge:c}))});var l={added:a,removed:s,options:u,selected:this.cells.filter(function(c){return!!t.graph.getCellById(c.id)})};this.trigger("selection:changed",l),this.graph.trigger("selection:changed",l)}},{key:"deleteSelectedCells",value:function(){var e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}},{key:"startRotate",value:function(e){var t=e.e,a=this.collection.toArray(),s=Ui.getCellsBBox(a).getCenter(),u=this.graph.snapToGrid(t.clientX,t.clientY),l=a.reduce(function(c,f){return c[f.id]=Mi.normalize(f.getAngle()),c},{});this.setEventData(t,{center:s,angles:l,start:u.theta(s)})}},{key:"doRotate",value:function(e){var t=this,a=e.e,s=this.getEventData(a),u=this.graph.options.rotating.grid,l=typeof u=="function"?A.call(u,this.graph,null):u,c=this.graph.snapToGrid(a.clientX,a.clientY),f=s.start-c.theta(s.center);s.rotated||(s.rotated=!0),Math.abs(f)>.001&&(this.collection.toArray().forEach(function(d){var v=hs.snapToGrid(s.angles[d.id]+f,l||15);d.rotate(v,{absolute:!0,center:s.center,selection:t.cid})}),this.updateSelectionBoxes())}},{key:"stopRotate",value:function(e){var t=this,a=e.e,s=this.getEventData(a);s.rotated&&(s.rotated=!1,this.collection.toArray().forEach(function(u){Ds("node:rotated",a,t.graph.findViewByCell(u))}))}},{key:"startResize",value:function(e){var t=e.e,a=this.graph.getGridSize(),s=this.collection.toArray(),u=Ui.getCellsBBox(s),l=s.map(function(d){return d.getBBox()}),c=l.reduce(function(d,v){return v.width<d?v.width:d},Infinity),f=l.reduce(function(d,v){return v.height<d?v.height:d},Infinity);this.setEventData(t,{bbox:u,cells:this.graph.model.getSubGraph(s),minWidth:a*u.width/c,minHeight:a*u.height/f})}},{key:"doResize",value:function(e){var t=e.e,a=e.dx,s=e.dy,u=this.eventData(t),l=u.bbox,c=l.width,f=l.height,d=Math.max(c+a,u.minWidth),v=Math.max(f+s,u.minHeight);u.resized||(u.resized=!0),(Math.abs(c-d)>.001||Math.abs(f-v)>.001)&&(this.graph.model.resizeCells(d,v,u.cells,{selection:this.cid}),l.width=d,l.height=v,this.updateSelectionBoxes())}},{key:"stopResize",value:function(e){var t=this,a=e.e,s=this.eventData(a);s.resized&&(s.resized=!1,this.collection.toArray().forEach(function(u){Ds("node:resized",a,t.graph.findViewByCell(u))}))}},{key:"dispose",value:function(){this.clean(),this.remove()}}]),r}(Zi);R8([Zi.dispose()],L1.prototype,"dispose",null),p.applyMixins(L1,c0);var Ku;(function(o){var i="widget-selection";o.classNames={root:i,inner:"".concat(i,"-inner"),box:"".concat(i,"-box"),content:"".concat(i,"-content"),rubberband:"".concat(i,"-rubberband"),selected:"".concat(i,"-selected")},o.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},o.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content:function(e){return S.template('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:e.length})},handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]};function r(n){return n.getAncestors().length}o.depthComparator=r})(Ku||(Ku={}));var pS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"node",get:function(){return this.cell}},{key:"containerClassName",get:function(){return this.prefixClassName("widget-transform")}},{key:"resizeClassName",get:function(){return"".concat(this.containerClassName,"-resize")}},{key:"rotateClassName",get:function(){return"".concat(this.containerClassName,"-rotate")}},{key:"init",value:function(e){this.options=Object.assign(Object.assign({},Hs.defaultOptions),e),this.render(),this.startListening()}},{key:"startListening",value:function(){var e;this.delegateEvents((e={},Object(Re.a)(e,"mousedown .".concat(this.resizeClassName),"startResizing"),Object(Re.a)(e,"touchstart .".concat(this.resizeClassName),"startResizing"),Object(Re.a)(e,"mousedown .".concat(this.rotateClassName),"startRotating"),Object(Re.a)(e,"touchstart .".concat(this.rotateClassName),"startRotating"),e)),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),Object(Aa.a)(Object(Ma.a)(r.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),Object(Aa.a)(Object(Ma.a)(r.prototype),"stopListening",this).call(this)}},{key:"renderHandles",value:function(){var e=this;this.container=document.createElement("div"),this.$container=this.$(this.container);var t=this.$("<div/>").prop("draggable",!1),a=t.clone().addClass(this.rotateClassName),s=Hs.POSITIONS.map(function(u){return t.clone().addClass(e.resizeClassName).attr("data-position",u)});this.empty(),this.$container.append(s,a)}},{key:"render",value:function(){return this.renderHandles(),this.view.addClass(Hs.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}},{key:"update",value:function(){var e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;var a=Mi.normalize(this.node.getAngle()),s=a!==0?"rotate(".concat(a,"deg)"):"";return this.$container.css({transform:s,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}},{key:"remove",value:function(){return this.view.removeClass(Hs.NODE_CLS),Object(Aa.a)(Object(Ma.a)(r.prototype),"remove",this).call(this)}},{key:"onKnobMouseDown",value:function(){this.startHandle()}},{key:"onKnobMouseUp",value:function(){this.stopHandle()}},{key:"updateResizerDirections",value:function(){var e=this,t=Mi.normalize(this.node.getAngle()),a=Math.floor(t*(Hs.DIRECTIONS.length/360));if(a!==this.prevShift){var s=Hs.DIRECTIONS.slice(a).concat(Hs.DIRECTIONS.slice(0,a)),u=function(c){return"".concat(e.containerClassName,"-cursor-").concat(c)};this.$container.find(".".concat(this.resizeClassName)).removeClass(Hs.DIRECTIONS.map(function(l){return u(l)}).join(" ")).each(function(l,c){e.$(c).addClass(u(s[l]))}),this.prevShift=a}}},{key:"getTrueDirection",value:function(e){var t=Mi.normalize(this.node.getAngle()),a=Hs.POSITIONS.indexOf(e);return a+=Math.floor(t*(Hs.POSITIONS.length/360)),a%=Hs.POSITIONS.length,Hs.POSITIONS[a]}},{key:"toValidResizeDirection",value:function(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}},{key:"startResizing",value:function(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});var t=this.$(e.target).attr("data-position"),a=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),Ds("node:resize:mousedown",e,a)}},{key:"prepareResizing",value:function(e,t){var a=this.getTrueDirection(t),s=0,u=0;t.split("-").forEach(function(d){s={left:-1,right:1}[d]||s,u={top:-1,bottom:1}[d]||u});var l=this.toValidResizeDirection(t),c={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[l],f=Mi.normalize(this.node.getAngle());this.setEventData(e,{selector:c,direction:l,trueDirection:a,relativeDirection:t,angle:f,resizeX:s,resizeY:u,action:"resizing"})}},{key:"startRotating",value:function(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});var t=this.graph.findViewByCell(this.node),a=this.node.getBBox().getCenter(),s=this.normalizeEvent(e),u=this.graph.snapToGrid(s.clientX,s.clientY);this.setEventData(e,{center:a,action:"rotating",angle:Mi.normalize(this.node.getAngle()),start:Pt.create(u).theta(a)}),this.startAction(e),Ds("node:rotate:mousedown",e,t)}},{key:"onMouseMove",value:function(e){var t=this.graph.findViewByCell(this.node),a=this.getEventData(e);if(a.action){var s=this.normalizeEvent(e),u=s.clientX,l=s.clientY,c=this.graph.scroller.widget,f=this.options.restrictedResizing;if(f===!0||typeof f=="number"){var d=f===!0?0:f,v=c?Math.max(d,8):d,m=this.graph.container.getBoundingClientRect();u=E.clamp(u,m.left+v,m.right-v),l=E.clamp(l,m.top+v,m.bottom-v)}else this.options.autoScrollOnResizing&&c&&c.autoScroll(u,l);var y=this.graph.snapToGrid(u,l),C=this.graph.getGridSize(),O=this.node,x=this.options;if(a.action==="resizing"){a=a,a.resized||(t&&(t.addClass("node-resizing"),Ds("node:resize",e,t)),a.resized=!0);var T=O.getBBox(),L=Pt.create(y).rotate(a.angle,T.getCenter()).diff(T[a.selector]),_=a.resizeX?L.x*a.resizeX:T.width,z=a.resizeY?L.y*a.resizeY:T.height,Q=_,q=z;if(_=hs.snapToGrid(_,C),z=hs.snapToGrid(z,C),_=Math.max(_,x.minWidth||C),z=Math.max(z,x.minHeight||C),_=Math.min(_,x.maxWidth||Infinity),z=Math.min(z,x.maxHeight||Infinity),x.preserveAspectRatio){var ye=T.width*z/T.height,Ce=T.height*_/T.width;_<ye?z=Ce:_=ye}var Ae=a.relativeDirection;if(x.allowReverse&&(Q<=-_||q<=-z)){var Pe;Ae==="left"?Q<=-_&&(Pe="right"):Ae==="right"?Q<=-_&&(Pe="left"):Ae==="top"?q<=-z&&(Pe="bottom"):Ae==="bottom"?q<=-z&&(Pe="top"):Ae==="top-left"?Q<=-_&&q<=-z?Pe="bottom-right":Q<=-_?Pe="top-right":q<=-z&&(Pe="bottom-left"):Ae==="top-right"?Q<=-_&&q<=-z?Pe="bottom-left":Q<=-_?Pe="top-left":q<=-z&&(Pe="bottom-right"):Ae==="bottom-left"?Q<=-_&&q<=-z?Pe="top-right":Q<=-_?Pe="bottom-right":q<=-z&&(Pe="top-left"):Ae==="bottom-right"&&(Q<=-_&&q<=-z?Pe="top-left":Q<=-_?Pe="bottom-left":q<=-z&&(Pe="top-right"));var qe=Pe;this.stopHandle();var lt=this.$container.find(".".concat(this.resizeClassName,'[data-position="').concat(qe,'"]'));this.startHandle(lt[0]),this.prepareResizing(e,qe),this.onMouseMove(e)}if(T.width!==_||T.height!==z){var ze={ui:!0,direction:a.direction,relativeDirection:a.relativeDirection,trueDirection:a.trueDirection,minWidth:x.minWidth,minHeight:x.minHeight,maxWidth:x.maxWidth,maxHeight:x.maxHeight,preserveAspectRatio:x.preserveAspectRatio===!0};O.resize(_,z,ze),Ds("node:resizing",e,t)}Ds("node:resize:mousemove",e,t)}else if(a.action==="rotating"){a=a,a.rotated||(t&&(t.addClass("node-rotating"),Ds("node:rotate",e,t)),a.rotated=!0);var ht=O.getAngle(),nn=a.start-Pt.create(y).theta(a.center),Tn=a.angle+nn;x.rotateGrid&&(Tn=hs.snapToGrid(Tn,x.rotateGrid)),Tn=Mi.normalize(Tn),ht!==Tn&&(O.rotate(Tn,{absolute:!0}),Ds("node:rotating",e,t)),Ds("node:rotate:mousemove",e,t)}}}},{key:"onMouseUp",value:function(e){var t=this.graph.findViewByCell(this.node),a=this.getEventData(e);a.action&&(this.stopAction(e),this.model.stopBatch(a.action==="resizing"?"resize":"rotate",{cid:this.cid}),a.action==="resizing"?Ds("node:resize:mouseup",e,t):a.action==="rotating"&&Ds("node:rotate:mouseup",e,t))}},{key:"startHandle",value:function(e){if(this.handle=e||null,this.$container.addClass("".concat(this.containerClassName,"-active")),e){this.$(e).addClass("".concat(this.containerClassName,"-active-handle"));var t=e.getAttribute("data-position");if(t){var a=Hs.DIRECTIONS[Hs.POSITIONS.indexOf(t)];this.$container.addClass("".concat(this.containerClassName,"-cursor-").concat(a))}}}},{key:"stopHandle",value:function(){if(this.$container.removeClass("".concat(this.containerClassName,"-active")),this.handle){this.$(this.handle).removeClass("".concat(this.containerClassName,"-active-handle"));var e=this.handle.getAttribute("data-position");if(e){var t=Hs.DIRECTIONS[Hs.POSITIONS.indexOf(e)];this.$container.removeClass("".concat(this.containerClassName,"-cursor-").concat(t))}this.handle=null}}},{key:"startAction",value:function(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Hs.documentEvents,e.data)}},{key:"stopAction",value:function(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();var t=this.graph.findViewByCell(this.node),a=this.getEventData(e);t&&(t.removeClass("node-".concat(a.action)),a.action==="resizing"&&a.resized?Ds("node:resized",e,t):a.action==="rotating"&&a.rotated&&Ds("node:rotated",e,t))}}]),r}(f0),Hs;(function(o){o.NODE_CLS="has-widget-transform",o.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],o.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],o.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},o.defaultOptions={minWidth:0,minHeight:0,maxWidth:Infinity,maxHeight:Infinity,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}})(Hs||(Hs={}));var N8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Hc;(function(o){function i(r,n,e){var t={};return Object.keys(e||{}).forEach(function(a){var s=e[a];t[a]=typeof s=="function"?s.call(r,n):s}),t}o.parseOptionGroup=i})(Hc||(Hc={})),function(o){function i(r){var n=r.grid,e=r.panning,t=r.selecting,a=r.embedding,s=r.snapline,u=r.resizing,l=r.rotating,c=r.knob,f=r.clipboard,d=r.history,v=r.scroller,m=r.minimap,y=r.keyboard,C=r.mousewheel,O=N8(r,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),x=r.container;if(x!=null)O.width==null&&(O.width=x.clientWidth),O.height==null&&(O.height=x.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");var T=p.merge({},o.defaults,O),L={size:10,visible:!1};typeof n=="number"?T.grid={size:n,visible:!1}:typeof n=="boolean"?T.grid=Object.assign(Object.assign({},L),{visible:n}):T.grid=Object.assign(Object.assign({},L),n);var _=["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"];return _.forEach(function(z){var Q=r[z];typeof Q=="boolean"?T[z].enabled=Q:T[z]=Object.assign(Object.assign({},T[z]),Q)}),T.background&&T.scroller.enabled&&T.scroller.background==null&&(T.scroller.background=T.background,delete T.background),T}o.get=i}(Hc||(Hc={})),function(o){o.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:hs.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:hs.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:function(r){var n=r.type,e=r.sourceView,t=r.targetView,a=n==="target"?t:e;return a!=null},createEdge:function(){return new fS}},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:function(){return!0}},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:function(){return!1}}}(Hc||(Hc={}));var Ak=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},Mk=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"cid",get:function(){return this.graph.view.cid}},{key:"svg",get:function(){return this.view.svg}},{key:"defs",get:function(){return this.view.defs}},{key:"isDefined",value:function(e){return this.svg.getElementById(e)!=null}},{key:"filter",value:function(e){var t=e.id,a=e.name;if(t||(t="filter-".concat(a,"-").concat(this.cid,"-").concat(S.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var s=Av.registry.get(a);if(s==null)return Av.registry.onNotFound(a);var u=s(e.args||{}),l=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});oi.create(Li.sanitize(u),l).appendTo(this.defs)}return t}},{key:"gradient",value:function(e){var t=e.id,a=e.type;if(t||(t="gradient-".concat(a,"-").concat(this.cid,"-").concat(S.hashcode(JSON.stringify(e)))),!this.isDefined(t)){var s=e.stops,u=s.map(function(f){var d=f.opacity!=null&&Number.isFinite(f.opacity)?f.opacity:1;return'<stop offset="'.concat(f.offset,'" stop-color="').concat(f.color,'" stop-opacity="').concat(d,'"/>')}),l="<".concat(a,">").concat(u.join(""),"</").concat(a,">"),c=Object.assign({id:t},e.attrs);oi.create(l,c).appendTo(this.defs)}return t}},{key:"marker",value:function(e){var t=e.id,a=e.refX,s=e.refY,u=e.markerUnits,l=e.markerOrient,c=e.tagName,f=e.children,d=Ak(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]),v=t;if(v||(v="marker-".concat(this.cid,"-").concat(S.hashcode(JSON.stringify(e)))),!this.isDefined(v)){c!=="path"&&delete d.d;var m=oi.create("marker",{refX:a,refY:s,id:v,overflow:"visible",orient:l!=null?l:"auto",markerUnits:u||"userSpaceOnUse"},f?f.map(function(y){var C=y.tagName,O=Ak(y,["tagName"]);return oi.create("".concat(C)||"path",M.kebablizeAttrs(Object.assign(Object.assign({},d),O)))}):[oi.create(c||"path",M.kebablizeAttrs(d))]);this.defs.appendChild(m.node)}return v}},{key:"remove",value:function(e){var t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}]),r}(ho),j8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},L8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},gS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"elem",get:function(){return this.view.grid}},{key:"grid",get:function(){return this.options.grid}},{key:"init",value:function(){this.startListening(),this.draw(this.grid)}},{key:"startListening",value:function(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}},{key:"stopListening",value:function(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}},{key:"setVisible",value:function(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}},{key:"getGridSize",value:function(){return this.grid.size}},{key:"setGridSize",value:function(e){this.grid.size=Math.max(e,1),this.update()}},{key:"show",value:function(){this.setVisible(!0),this.update()}},{key:"hide",value:function(){this.setVisible(!1),this.update()}},{key:"clear",value:function(){this.elem.style.backgroundImage=""}},{key:"draw",value:function(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();var a=this.graph.matrix(),s=this.getInstance(),u=Array.isArray(e)?e:[e];this.patterns.forEach(function(f,d){var v="pattern_".concat(d),m=a.a||1,y=a.d||1,C=f.update,O=f.markup,x=L8(f,["update","markup"]),T=Object.assign(Object.assign(Object.assign({},x),u[d]),{sx:m,sy:y,ox:a.e||0,oy:a.f||0,width:t*m,height:t*y});s.has(v)||s.add(v,oi.create("pattern",{id:v,patternUnits:"userSpaceOnUse"},oi.createVectors(O)).node);var L=s.get(v);typeof C=="function"&&C(L.childNodes[0],T);var _=T.ox%T.width;_<0&&(_+=T.width);var z=T.oy%T.height;z<0&&(z+=T.height),M.attr(L,{x:_,y:z,width:T.width,height:T.height})});var l=new XMLSerializer().serializeToString(s.root),c="url(data:image/svg+xml;base64,".concat(btoa(l),")");this.elem.style.backgroundImage=c}},{key:"getInstance",value:function(){return this.instance||(this.instance=new Cd),this.instance}},{key:"resolveGrid",value:function(e){if(!e)return[];var t=e.type;if(t==null)return[Object.assign(Object.assign({},Cd.presets.dot),e.args)];var a=Cd.registry.get(t);if(a){var s=e.args||[];return Array.isArray(s)||(s=[s]),Array.isArray(a)?a.map(function(u,l){return Object.assign(Object.assign({},u),s[l])}):[Object.assign(Object.assign({},a),s[0])]}return Cd.registry.onNotFound(t)}},{key:"dispose",value:function(){this.stopListening(),this.clear()}}]),r}(ho);j8([ho.dispose()],gS.prototype,"dispose",null);var Tk=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"getClientMatrix",value:function(){return M.createSVGMatrix(this.view.stage.getScreenCTM())}},{key:"getClientOffset",value:function(){var e=this.view.svg.getBoundingClientRect();return new Pt(e.left,e.top)}},{key:"getPageOffset",value:function(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}},{key:"snapToGrid",value:function(e,t){var a=typeof e=="number"?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y);return a.snapToGrid(this.graph.getGridSize())}},{key:"localToGraphPoint",value:function(e,t){var a=Pt.create(e,t);return M.transformPoint(a,this.graph.matrix())}},{key:"localToClientPoint",value:function(e,t){var a=Pt.create(e,t);return M.transformPoint(a,this.getClientMatrix())}},{key:"localToPagePoint",value:function(e,t){var a=typeof e=="number"?this.localToGraphPoint(e,t):this.localToGraphPoint(e);return a.translate(this.getPageOffset())}},{key:"localToGraphRect",value:function(e,t,a,s){var u=Br.create(e,t,a,s);return M.transformRectangle(u,this.graph.matrix())}},{key:"localToClientRect",value:function(e,t,a,s){var u=Br.create(e,t,a,s);return M.transformRectangle(u,this.getClientMatrix())}},{key:"localToPageRect",value:function(e,t,a,s){var u=typeof e=="number"?this.localToGraphRect(e,t,a,s):this.localToGraphRect(e);return u.translate(this.getPageOffset())}},{key:"graphToLocalPoint",value:function(e,t){var a=Pt.create(e,t);return M.transformPoint(a,this.graph.matrix().inverse())}},{key:"clientToLocalPoint",value:function(e,t){var a=Pt.create(e,t);return M.transformPoint(a,this.getClientMatrix().inverse())}},{key:"clientToGraphPoint",value:function(e,t){var a=Pt.create(e,t);return M.transformPoint(a,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalPoint",value:function(e,t){var a=Pt.create(e,t),s=a.diff(this.getPageOffset());return this.graphToLocalPoint(s)}},{key:"graphToLocalRect",value:function(e,t,a,s){var u=Br.create(e,t,a,s);return M.transformRectangle(u,this.graph.matrix().inverse())}},{key:"clientToLocalRect",value:function(e,t,a,s){var u=Br.create(e,t,a,s);return M.transformRectangle(u,this.getClientMatrix().inverse())}},{key:"clientToGraphRect",value:function(e,t,a,s){var u=Br.create(e,t,a,s);return M.transformRectangle(u,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}},{key:"pageToLocalRect",value:function(e,t,a,s){var u=Br.create(e,t,a,s),l=this.getPageOffset();return u.x-=l.x,u.y-=l.y,this.graphToLocalRect(u)}}]),r}(ho),_8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},mS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.widget=n.graph.hook.createSnapline(),n}return Object(ue.a)(r,[{key:"dispose",value:function(){this.widget.dispose()}}]),r}(ho);_8([ho.dispose()],mS.prototype,"dispose",null);var Eh;(function(o){function i(e){var t=[],a=[];return Array.isArray(e)?t.push.apply(t,Object(We.a)(e)):e.split("|").forEach(function(s){s.indexOf("&")===-1?t.push(s):a.push.apply(a,Object(We.a)(s.split("&")))}),{or:t,and:a}}o.parse=i;function r(e,t){if(e!=null&&t!=null){var a=i(e),s=i(t),u=a.or.sort(),l=s.or.sort(),c=a.and.sort(),f=s.and.sort(),d=function(m,y){return m.length===y.length&&(m.length===0||m.every(function(C,O){return C===y[O]}))};return d(u,l)&&d(c,f)}return e==null&&t==null}o.equals=r;function n(e,t,a){if(t==null||Array.isArray(t)&&t.length===0)return a?e.altKey!==!0&&e.ctrlKey!==!0&&e.metaKey!==!0&&e.shiftKey!==!0:!0;var s=i(t),u=s.or,l=s.and,c=function(d){var v="".concat(d.toLowerCase(),"Key");return e[v]===!0};return u.some(function(f){return c(f)})&&l.every(function(f){return c(f)})}o.isMatch=n})(Eh||(Eh={}));var F8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},yS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"widgetOptions",get:function(){return this.options.scroller}},{key:"pannable",get:function(){return this.widgetOptions?typeof this.widgetOptions.pannable=="object"?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable:!1}},{key:"init",value:function(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}},{key:"startListening",value:function(){var e=[],t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}},{key:"stopListening",value:function(){var e=[],t=this.widgetOptions.pannable;typeof t=="object"?e=t.eventTypes||[]:e=["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}},{key:"onRightMouseDown",value:function(e){var t=this;e.button===2&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",function(){return t.updateClassName(!1)}))}},{key:"preparePanning",value:function(e){var t=this,a=e.e;this.widget&&(this.allowPanning(a,!0)||this.allowPanning(a)&&!this.graph.selection.allowRubberband(a,!0))&&(this.updateClassName(!0),this.widget.startPanning(a),this.widget.once("pan:stop",function(){return t.updateClassName(!1)}))}},{key:"allowPanning",value:function(e,t){return this.widget&&this.pannable&&Eh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"updateClassName",value:function(e){if(this.widget!=null){var t=this.widget.container,a=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(M.addClass(t,a),t.dataset.panning=(!!e).toString()):M.removeClass(t,a)}}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}},{key:"lock",value:function(){this.widget&&this.widget.lock()}},{key:"unlock",value:function(){this.widget&&this.widget.unlock()}},{key:"update",value:function(){this.widget&&this.widget.update()}},{key:"enableAutoResize",value:function(){this.widget&&this.widget.enableAutoResize()}},{key:"disableAutoResize",value:function(){this.widget&&this.widget.disableAutoResize()}},{key:"resize",value:function(e,t){this.widget&&this.widget.resize(e,t)}},{key:"dispose",value:function(){this.widget&&this.widget.dispose(),this.stopListening()}}]),r}(ho);F8([ho.dispose()],yS.prototype,"dispose",null);var B8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},G8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},bS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"commonOptions",get:function(){var e=this.instanceOptions,t=e.enabled,a=G8(e,["enabled"]);return a}},{key:"instanceOptions",get:function(){return this.options.clipboard}},{key:"cells",get:function(){return this.widget.cells}},{key:"disabled",get:function(){return this.instanceOptions.enabled!==!0}},{key:"init",value:function(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}},{key:"enable",value:function(){this.disabled&&(this.instanceOptions.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.instanceOptions.enabled=!1)}},{key:"copy",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||(this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}},{key:"cut",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.disabled||(this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}},{key:"paste",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.graph;return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}},{key:"clean",value:function(e){(!this.disabled||e)&&(this.widget.clean(),this.graph.trigger("clipboard:changed",{cells:[]}))}},{key:"isEmpty",value:function(){return this.widget.isEmpty()}},{key:"dispose",value:function(){this.clean(!0)}}]),r}(ho);B8([ho.dispose()],bS.prototype,"dispose",null);var z8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},_1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.highlights={},n}return Object(ue.a)(r,[{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"stopListening",value:function(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}},{key:"onCellHighlight",value:function(e){var t=e.view,a=e.magnet,s=e.options,u=s===void 0?{}:s,l=this.resolveHighlighter(u);if(!!l){var c=this.getHighlighterId(a,l);if(!this.highlights[c]){var f=l.highlighter;f.highlight(t,a,Object.assign({},l.args)),this.highlights[c]={cellView:t,magnet:a,highlighter:f,args:l.args}}}}},{key:"onCellUnhighlight",value:function(e){var t=e.magnet,a=e.options,s=a===void 0?{}:a,u=this.resolveHighlighter(s);if(!!u){var l=this.getHighlighterId(t,u);this.unhighlight(l)}}},{key:"resolveHighlighter",value:function(e){var t=this.options,a=e.highlighter;if(a==null){var s=e.type;a=s&&t.highlighting[s]||t.highlighting.default}if(a==null)return null;var u=typeof a=="string"?{name:a}:a,l=u.name,c=Df.registry.get(l);return c==null?Df.registry.onNotFound(l):(Df.check(l,c),{name:l,highlighter:c,args:u.args||{}})}},{key:"getHighlighterId",value:function(e,t){return M.ensureId(e),t.name+e.id+JSON.stringify(t.args)}},{key:"unhighlight",value:function(e){var t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}},{key:"dispose",value:function(){var e=this;Object.keys(this.highlights).forEach(function(t){return e.unhighlight(t)}),this.stopListening()}}]),r}(ho);z8([_1.dispose()],_1.prototype,"dispose",null);var U8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},F1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.widgets=new Map,n}return Object(ue.a)(r,[{key:"container",get:function(){return this.graph.view.container}},{key:"viewport",get:function(){return this.graph.view.viewport}},{key:"isSelectionEnabled",get:function(){return this.options.selecting.enabled===!0}},{key:"init",value:function(){this.startListening(),this.resize()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var a=this.graph.hook.createTransform(t,{clearAll:!0});a&&this.widgets.set(t,a)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var a=this.graph.hook.createTransform(t,{clearAll:!1});a&&this.widgets.set(t,a)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var a=this.widgets.get(t);a&&a.dispose(),this.widgets.delete(t)}}},{key:"getMatrix",value:function(){var e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),M.createSVGMatrix(this.viewportMatrix)}},{key:"setMatrix",value:function(e){var t=M.createSVGMatrix(e),a=M.matrixToTransformString(t);this.viewport.setAttribute("transform",a),this.viewportMatrix=t,this.viewportTransformString=a}},{key:"resize",value:function(e,t){var a=e===void 0?this.options.width:e,s=t===void 0?this.options.height:t;this.options.width=a,this.options.height=s,typeof a=="number"&&(a=Math.round(a)),typeof s=="number"&&(s=Math.round(s)),this.container.style.width=a==null?"":"".concat(a,"px"),this.container.style.height=s==null?"":"".concat(s,"px");var u=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},u)),this}},{key:"getComputedSize",value:function(){var e=this.options.width,t=this.options.height;return E.isNumber(e)||(e=this.container.clientWidth),E.isNumber(t)||(t=this.container.clientHeight),{width:e,height:t}}},{key:"getScale",value:function(){return M.matrixToScale(this.getMatrix())}},{key:"scale",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};if(e=this.clampScale(e),t=this.clampScale(t),a||s){var l=this.getTranslation(),c=l.tx-a*(e-1),f=l.ty-s*(t-1);(c!==l.tx||f!==l.ty)&&this.translate(c,f)}var d=this.getMatrix();return d.a=e,d.d=t,this.setMatrix(d),this.graph.trigger("scale",Object.assign({sx:e,sy:t,ox:a,oy:s},u)),this}},{key:"clampScale",value:function(e){var t=this.graph.options.scaling;return E.clamp(e,t.min||.01,t.max||16)}},{key:"getZoom",value:function(){return this.getScale().sx}},{key:"zoom",value:function(e,t){t=t||{};var a=e,s=e,u=this.getScale(),l=this.getComputedSize(),c=l.width/2,f=l.height/2;if(t.absolute||(a+=u.sx,s+=u.sy),t.scaleGrid&&(a=Math.round(a/t.scaleGrid)*t.scaleGrid,s=Math.round(s/t.scaleGrid)*t.scaleGrid),t.maxScale&&(a=Math.min(t.maxScale,a),s=Math.min(t.maxScale,s)),t.minScale&&(a=Math.max(t.minScale,a),s=Math.max(t.minScale,s)),t.center&&(c=t.center.x,f=t.center.y),a=this.clampScale(a),s=this.clampScale(s),c||f){var d=this.getTranslation(),v=c-(c-d.tx)*(a/u.sx),m=f-(f-d.ty)*(s/u.sy);(v!==d.tx||m!==d.ty)&&this.translate(v,m,{ui:t.ui})}return this.scale(a,s,0,0,{ui:t.ui}),this}},{key:"getRotation",value:function(){return M.matrixToRotation(this.getMatrix())}},{key:"rotate",value:function(e,t,a){if(t==null||a==null){var s=M.getBBox(this.graph.view.stage);t=s.width/2,a=s.height/2}var u=this.getMatrix().translate(t,a).rotate(e).translate(-t,-a);return this.setMatrix(u),this}},{key:"getTranslation",value:function(){return M.matrixToTranslation(this.getMatrix())}},{key:"translate",value:function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getMatrix();s.e=e||0,s.f=t||0,this.setMatrix(s);var u=this.getTranslation();return this.options.x=u.tx,this.options.y=u.ty,this.graph.trigger("translate",Object.assign(Object.assign({},u),a)),this}},{key:"setOrigin",value:function(e,t){return this.translate(e||0,t||0)}},{key:"fitToContent",value:function(e,t,a,s){if(typeof e=="object"){var u=e;e=u.gridWidth||1,t=u.gridHeight||1,a=u.padding||0,s=u}else e=e||1,t=t||1,a=a||0,s==null&&(s={});var l=E.normalizeSides(a),c=s.border||0,f=s.contentArea?Br.create(s.contentArea):this.getContentArea(s);c>0&&f.inflate(c);var d=this.getScale(),v=this.getTranslation(),m=d.sx,y=d.sy;f.x*=m,f.y*=y,f.width*=m,f.height*=y;var C=Math.max(Math.ceil((f.width+f.x)/e),1)*e,O=Math.max(Math.ceil((f.height+f.y)/t),1)*t,x=0,T=0;(s.allowNewOrigin==="negative"&&f.x<0||s.allowNewOrigin==="positive"&&f.x>=0||s.allowNewOrigin==="any")&&(x=Math.ceil(-f.x/e)*e,x+=l.left,C+=x),(s.allowNewOrigin==="negative"&&f.y<0||s.allowNewOrigin==="positive"&&f.y>=0||s.allowNewOrigin==="any")&&(T=Math.ceil(-f.y/t)*t,T+=l.top,O+=T),C+=l.right,O+=l.bottom,C=Math.max(C,s.minWidth||0),O=Math.max(O,s.minHeight||0),C=Math.min(C,s.maxWidth||Number.MAX_SAFE_INTEGER),O=Math.min(O,s.maxHeight||Number.MAX_SAFE_INTEGER);var L=this.getComputedSize(),_=C!==L.width||O!==L.height,z=x!==v.tx||T!==v.ty;return z&&this.translate(x,T),_&&this.resize(C,O),new Br(-x/m,-T/y,C/m,O/y)}},{key:"scaleContentToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.scaleContentToFitImpl(e)}},{key:"scaleContentToFitImpl",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a,s;if(e.contentArea){var u=e.contentArea;a=this.graph.localToGraph(u),s=Pt.create(u)}else a=this.getContentBBox(e),s=this.graph.graphToLocal(a);if(!(!a.width||!a.height)){var l=E.normalizeSides(e.padding),c=e.minScale||0,f=e.maxScale||Number.MAX_SAFE_INTEGER,d=e.minScaleX||c,v=e.maxScaleX||f,m=e.minScaleY||c,y=e.maxScaleY||f,C;if(e.viewportArea)C=e.viewportArea;else{var O=this.getComputedSize(),x=this.getTranslation();C={x:x.tx,y:x.ty,width:O.width,height:O.height}}C=Br.create(C).moveAndExpand({x:l.left,y:l.top,width:-l.left-l.right,height:-l.top-l.bottom});var T=this.getScale(),L=C.width/a.width*T.sx,_=C.height/a.height*T.sy;e.preserveAspectRatio!==!1&&(L=_=Math.min(L,_));var z=e.scaleGrid;if(z&&(L=z*Math.floor(L/z),_=z*Math.floor(_/z)),L=E.clamp(L,d,v),_=E.clamp(_,m,y),this.scale(L,_),t){var Q=this.options,q=C.x-s.x*L-Q.x,ye=C.y-s.y*_-Q.y;this.translate(q,ye)}}}},{key:"getContentArea",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.useCellGeometry?this.model.getAllCellsBBox()||new Br:M.getBBox(this.graph.view.stage)}},{key:"getContentBBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.graph.localToGraph(this.getContentArea(e))}},{key:"getGraphArea",value:function(){var e=Br.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}},{key:"zoomToRect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=Br.create(e),s=this.graph;t.contentArea=a,t.viewportArea==null&&(t.viewportArea={x:s.options.x,y:s.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);var u=a.getCenter();return this.centerPoint(u.x,u.y),this}},{key:"zoomToFit",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.zoomToRect(this.getContentArea(e),e)}},{key:"centerPoint",value:function(e,t){var a=this.getComputedSize(),s=this.getScale(),u=this.getTranslation(),l=a.width/2,c=a.height/2;e=typeof e=="number"?e:l,t=typeof t=="number"?t:c,e=l-e*s.sx,t=c-t*s.sy,(u.tx!==e||u.ty!==t)&&this.translate(e,t)}},{key:"centerContent",value:function(e){var t=this.graph.getContentArea(e),a=t.getCenter();this.centerPoint(a.x,a.y)}},{key:"centerCell",value:function(e){return this.positionCell(e,"center")}},{key:"positionPoint",value:function(e,t,a){var s=this.getComputedSize();t=E.normalizePercentage(t,Math.max(0,s.width)),t<0&&(t=s.width+t),a=E.normalizePercentage(a,Math.max(0,s.height)),a<0&&(a=s.height+a);var u=this.getTranslation(),l=this.getScale(),c=t-e.x*l.sx,f=a-e.y*l.sy;(u.tx!==c||u.ty!==f)&&this.translate(c,f)}},{key:"positionRect",value:function(e,t){var a=Br.create(e);switch(t){case"center":return this.positionPoint(a.getCenter(),"50%","50%");case"top":return this.positionPoint(a.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(a.getTopRight(),"100%",0);case"right":return this.positionPoint(a.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(a.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(a.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(a.getBottomLeft(),0,"100%");case"left":return this.positionPoint(a.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(a.getTopLeft(),0,0);default:return this}}},{key:"positionCell",value:function(e,t){var a=e.getBBox();return this.positionRect(a,t)}},{key:"positionContent",value:function(e,t){var a=this.graph.getContentArea(t);return this.positionRect(a,e)}},{key:"dispose",value:function(){this.widgets.forEach(function(e){return e.dispose()}),this.widgets.clear(),this.stopListening()}}]),r}(ho);U8([F1.dispose()],F1.prototype,"dispose",null);var V8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},CS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.movedMap=new WeakMap,n.unselectMap=new WeakMap,n}return Object(ue.a)(r,[{key:"widgetOptions",get:function(){return this.options.selecting}},{key:"rubberbandDisabled",get:function(){return this.widgetOptions.enabled!==!0||this.widgetOptions.rubberband!==!0}},{key:"disabled",get:function(){return this.widgetOptions.enabled!==!0}},{key:"length",get:function(){return this.widget.length}},{key:"cells",get:function(){return this.widget.cells}},{key:"init",value:function(){this.widget=this.graph.hook.createSelection(),this.startListening()}},{key:"startListening",value:function(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}},{key:"stopListening",value:function(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}},{key:"onBlankMouseDown",value:function(e){var t=e.e;(this.allowRubberband(t,!0)||this.allowRubberband(t)&&!this.graph.scroller.allowPanning(t,!0)&&!this.graph.panning.allowPanning(t,!0))&&this.startRubberband(t)}},{key:"onBlankClick",value:function(){this.clean()}},{key:"allowRubberband",value:function(e,t){return!this.rubberbandDisabled&&Eh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}},{key:"allowMultipleSelection",value:function(e){return this.isMultiple()&&Eh.isMatch(e,this.widgetOptions.multipleSelectionModifiers)}},{key:"onCellMouseMove",value:function(e){var t=e.cell;this.movedMap.set(t,!0)}},{key:"onCellMouseUp",value:function(e){var t=e.e,a=e.cell,s=this.widgetOptions,u=this.disabled;!u&&this.movedMap.has(a)&&(u=s.selectCellOnMoved===!1,u||(u=s.selectNodeOnMoved===!1&&a.isNode()),u||(u=s.selectEdgeOnMoved===!1&&a.isEdge())),u||(this.allowMultipleSelection(t)?this.unselectMap.has(a)?this.unselectMap.delete(a):this.isSelected(a)?this.unselect(a):this.select(a):this.reset(a)),this.movedMap.delete(a)}},{key:"onBoxMouseDown",value:function(e){var t=e.e,a=e.cell;this.disabled||this.allowMultipleSelection(t)&&(this.unselect(a),this.unselectMap.set(a,!0))}},{key:"isEmpty",value:function(){return this.length<=0}},{key:"isSelected",value:function(e){return this.widget.isSelected(e)}},{key:"getCells",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(a){return typeof a=="string"?t.graph.getCellById(a):a}).filter(function(a){return a!=null})}},{key:"select",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getCells(e);return a.length&&(this.isMultiple()?this.widget.select(a,t):this.reset(a.slice(0,1),t)),this}},{key:"unselect",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.unselect(this.getCells(e),t),this}},{key:"reset",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.widget.reset(e?this.getCells(e):[],t),this}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.widget.clean(e),this}},{key:"enable",value:function(){return this.disabled&&(this.widgetOptions.enabled=!0),this}},{key:"disable",value:function(){return this.disabled||(this.widgetOptions.enabled=!1),this}},{key:"startRubberband",value:function(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}},{key:"enableRubberband",value:function(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}},{key:"disableRubberband",value:function(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}},{key:"isMultiple",value:function(){return this.widgetOptions.multiple!==!1}},{key:"enableMultiple",value:function(){return this.widgetOptions.multiple=!0,this}},{key:"disableMultiple",value:function(){return this.widgetOptions.multiple=!1,this}},{key:"setModifiers",value:function(e){return this.widgetOptions.modifiers=e,this}},{key:"setContent",value:function(e){return this.widget.setContent(e),this}},{key:"setFilter",value:function(e){return this.widget.setFilter(e),this}},{key:"dispose",value:function(){this.stopListening(),this.widget.dispose()}}]),r}(ho);V8([ho.dispose()],CS.prototype,"dispose",null);var Pk=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},H8=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},v0=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.batchCommands=null,e.batchLevel=0,e.lastBatchIndex=-1,e.freezed=!1,e.handlers=[],e.graph=n.graph,e.model=n.graph.model,e.options=is.getOptions(n),e.validator=new r.Validator({history:Object(rs.a)(e),cancelInvalid:e.options.cancelInvalid}),e.clean(),e.startListening(),e}return Object(ue.a)(r,[{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0)}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1)}},{key:"undo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}},{key:"redo",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}},{key:"cancel",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.disabled){var t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}},{key:"clean",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}},{key:"canUndo",value:function(){return!this.disabled&&this.undoStack.length>0}},{key:"canRedo",value:function(){return!this.disabled&&this.redoStack.length>0}},{key:"validate",value:function(e){for(var t,a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return(t=this.validator).validate.apply(t,[e].concat(s)),this}},{key:"dispose",value:function(){this.validator.dispose(),this.clean(),this.stopListening()}},{key:"startListening",value:function(){var e=this;this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(function(t,a){e.handlers[a]=e.addCommand.bind(e,t),e.model.on(t,e.handlers[a])}),this.validator.on("invalid",function(t){return e.trigger("invalid",t)})}},{key:"stopListening",value:function(){var e=this;this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(function(t,a){e.model.off(t,e.handlers[a])}),this.handlers.length=0),this.validator.off("invalid")}},{key:"createCommand",value:function(e){return{batch:e?e.batch:!1,data:{}}}},{key:"revertCommand",value:function(e,t){this.freezed=!0;for(var a=Array.isArray(e)?is.sortBatchCommands(e):[e],s=a.length-1;s>=0;s-=1){var u=a[s],l=Object.assign(Object.assign({},t),p.pick(u.options,this.options.revertOptionsList||[]));this.executeCommand(u,!0,l)}this.freezed=!1}},{key:"applyCommand",value:function(e,t){this.freezed=!0;for(var a=Array.isArray(e)?is.sortBatchCommands(e):[e],s=0;s<a.length;s+=1){var u=a[s],l=Object.assign(Object.assign({},t),p.pick(u.options,this.options.applyOptionsList||[]));this.executeCommand(u,!1,l)}this.freezed=!1}},{key:"executeCommand",value:function(e,t,a){var s=this.model,u=s.getCell(e.data.id),l=e.event;if(is.isAddEvent(l)&&t||is.isRemoveEvent(l)&&!t)u&&u.remove(a);else if(is.isAddEvent(l)&&!t||is.isRemoveEvent(l)&&t){var c=e.data;c.node?s.addNode(c.props,a):c.edge&&s.addEdge(c.props,a)}else if(is.isChangeEvent(l)){var f=e.data,d=f.key;if(d&&u){var v=t?f.prev[d]:f.next[d];u.prop(d,v,a)}}else{var m=this.options.executeCommand;m&&A.call(m,this,e,t,a)}}},{key:"addCommand",value:function(e,t){if(!(this.freezed||this.disabled)){var a=t,s=a.options||{};if(!s.dryrun&&!(is.isAddEvent(e)&&this.options.ignoreAdd||is.isRemoveEvent(e)&&this.options.ignoreRemove||is.isChangeEvent(e)&&this.options.ignoreChange)){var u=this.options.beforeAddCommand;if(!(u!=null&&A.call(u,this,e,t)===!1)){e==="cell:change:*"&&(e="cell:change:".concat(a.key));var l=a.cell,c=_l.isModel(l),f;if(this.batchCommands){f=this.batchCommands[Math.max(this.lastBatchIndex,0)];var d=c&&!f.modelChange||f.data.id!==l.id,v=f.event!==e;if(this.lastBatchIndex>=0&&(d||v)){var m=this.batchCommands.findIndex(function(T){return(c&&T.modelChange||T.data.id===l.id)&&T.event===e});m<0||is.isAddEvent(e)||is.isRemoveEvent(e)?f=this.createCommand({batch:!0}):(f=this.batchCommands[m],this.batchCommands.splice(m,1)),this.batchCommands.push(f),this.lastBatchIndex=this.batchCommands.length-1}}else f=this.createCommand({batch:!1});if(is.isAddEvent(e)||is.isRemoveEvent(e)){var y=f.data;return f.event=e,f.options=s,y.id=l.id,y.props=p.cloneDeep(l.toJSON()),l.isEdge()?y.edge=!0:l.isNode()&&(y.node=!0),this.push(f,s)}if(is.isChangeEvent(e)){var C=t.key,O=f.data;return(!f.batch||!f.event)&&(f.event=e,f.options=s,O.key=C,O.prev==null&&(O.prev={}),O.prev[C]=p.clone(l.previous(C)),c?f.modelChange=!0:O.id=l.id),O.next==null&&(O.next={}),O.next[C]=p.clone(l.prop(C)),this.push(f,s)}var x=this.options.afterAddCommand;x&&A.call(x,this,e,t,f),this.push(f,s)}}}}},{key:"initBatchCommand",value:function(e){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}},{key:"storeBatchCommand",value:function(e){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){var t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.consolidateCommands(),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}},{key:"filterBatchCommand",value:function(e){for(var t=e.slice(),a=[],s=function(){var c=t.shift(),f=c.event,d=c.data.id;if(f!=null&&(d!=null||c.modelChange)){if(is.isAddEvent(f)){var v=t.findIndex(function(C){return is.isRemoveEvent(C.event)&&C.data.id===d});if(v>=0)return t=t.filter(function(C,O){return v<O||C.data.id!==d}),"continue"}else if(is.isRemoveEvent(f)){var m=t.findIndex(function(C){return is.isAddEvent(C.event)&&C.data.id===d});if(m>=0)return t.splice(m,1),"continue"}else if(is.isChangeEvent(f)){var y=c.data;if(p.isEqual(y.prev,y.next))return"continue"}a.push(c)}};t.length>0;)var u=s();return a}},{key:"notify",value:function(e,t,a){var s=t==null?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:s,options:a}),this.emit("change",{cmds:s,options:a})}},{key:"push",value:function(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.consolidateCommands(),this.notify("add",e,t))}},{key:"consolidateCommands",value:function(){var e,t=this.undoStack[this.undoStack.length-1],a=this.undoStack[this.undoStack.length-2];if(!!Array.isArray(t)){var s=new Set(t.map(function(l){return l.event}));if(!(s.size!==2||!s.has("cell:change:parent")||!s.has("cell:change:children"))&&!!t.every(function(l){var c;return l.batch&&((c=l.options)===null||c===void 0?void 0:c.ui)})&&!(!Array.isArray(a)||a.length!==1)){var u=a[0];u.event!=="cell:change:position"||!((e=u.options)===null||e===void 0?void 0:e.ui)||(a.push.apply(a,Object(We.a)(t)),this.undoStack.pop())}}}}]),r}(yu);Pk([yu.dispose()],v0.prototype,"dispose",null),function(o){var i=function(r){Object(xr.a)(e,r);var n=Object(Sr.a)(e);function e(t){var a;return Object(me.a)(this,e),a=n.call(this),a.map={},a.command=t.history,a.cancelInvalid=t.cancelInvalid!==!1,a.command.on("add",a.onCommandAdded,Object(rs.a)(a)),a}return Object(ue.a)(e,[{key:"onCommandAdded",value:function(a){var s=this,u=a.cmds;return Array.isArray(u)?u.every(function(l){return s.isValidCommand(l)}):this.isValidCommand(u)}},{key:"isValidCommand",value:function(a){if(a.options&&a.options.validation===!1)return!0;var s=a.event&&this.map[a.event]||[],u=null;return s.forEach(function(l){var c=0,f=function d(v){var m=l[c];c+=1;try{if(m)m(v,a,d);else{u=v;return}}catch(y){d(y)}};f(u)}),u?(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:u}),!1):!0}},{key:"validate",value:function(a){for(var s=this,u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];var f=Array.isArray(a)?a:a.split(/\s+/);return l.forEach(function(d){if(typeof d!="function")throw new Error("".concat(f.join(" ")," requires callback functions."))}),f.forEach(function(d){s.map[d]==null&&(s.map[d]=[]),s.map[d].push(l)}),this}},{key:"dispose",value:function(){this.command.off("add",this.onCommandAdded,this)}}]),e}(yu);Pk([yu.dispose()],i.prototype,"dispose",null),o.Validator=i}(v0||(v0={}));var is;(function(o){function i(a){return a==="cell:added"}o.isAddEvent=i;function r(a){return a==="cell:removed"}o.isRemoveEvent=r;function n(a){return a!=null&&a.startsWith("cell:change:")}o.isChangeEvent=n;function e(a){var s=a.graph,u=H8(a,["graph"]),l=["cell:added","cell:removed","cell:change:*"],c=["batch:start","batch:stop"],f=a.eventNames?a.eventNames.filter(function(d){return!(o.isChangeEvent(d)||l.includes(d)||c.includes(d))}):l;return Object.assign(Object.assign({},u),{eventNames:f,applyOptionsList:a.applyOptionsList||["propertyPath"],revertOptionsList:a.revertOptionsList||["propertyPath"]})}o.getOptions=e;function t(a){for(var s=[],u=0,l=a.length;u<l;u+=1){var c=a[u],f=null;if(o.isAddEvent(c.event)){for(var d=c.data.id,v=0;v<u;v+=1)if(a[v].data.id===d){f=v;break}}f!==null?s.splice(f,0,c):s.push(c)}return s}o.sortBatchCommands=t})(is||(is={}));var W8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},ES=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"widgetOptions",get:function(){return this.options.minimap}},{key:"init",value:function(){this.widget=this.graph.hook.createMiniMap()}},{key:"dispose",value:function(){this.widget&&this.widget.dispose()}}]),r}(ho);W8([ho.dispose()],ES.prototype,"dispose",null);var $8=h("imBb"),K8=h.n($8),X8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},p0=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;Object(me.a)(this,r),e=i.call(this),e.options=n;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,n.global?e.target=document:(e.target=e.container,e.disabled||e.target.setAttribute("tabindex","-1"),e.graph.on("cell:mouseup",e.focus,Object(rs.a)(e)),e.graph.on("blank:mouseup",e.focus,Object(rs.a)(e))),e.mousetrap=r.createMousetrap(Object(rs.a)(e)),e}return Object(ue.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"on",value:function(e,t,a){this.mousetrap.bind(this.getKeys(e),t,a)}},{key:"off",value:function(e,t){this.mousetrap.unbind(this.getKeys(e),t)}},{key:"focus",value:function(e){var t=this.isInputEvent(e.e);if(!t){var a=this.target;a.focus({preventScroll:!0})}}},{key:"getKeys",value:function(e){var t=this;return(Array.isArray(e)?e:[e]).map(function(a){return t.formatkey(a)})}},{key:"formatkey",value:function(e){var t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),a=this.options.format;return a?A.call(a,this.graph,t):t}},{key:"isGraphEvent",value:function(e){var t=e.srcElement||e.target,a=e.currentTarget;return t?t===this.target||a===this.target||t===document.body?!0:M.contains(this.container,t):!1}},{key:"isInputEvent",value:function(e){var t,a=e.target,s=(t=a==null?void 0:a.tagName)===null||t===void 0?void 0:t.toLowerCase();return["input","textarea"].includes(s)}},{key:"isEnabledForEvent",value:function(e){var t=!this.disabled&&this.isGraphEvent(e),a=this.isInputEvent(e);if(t){var s=e.keyCode||e.which;if(a&&(s===8||s===46))return!1;if(this.options.guard)return A.call(this.options.guard,this.graph,e)}return t}},{key:"dispose",value:function(){this.mousetrap.reset()}}]),r}(Uc);X8([Uc.dispose()],p0.prototype,"dispose",null),function(o){function i(r){var n=new K8.a(r.target),e=n.stopCallback;return n.stopCallback=function(t,a,s){return r.isEnabledForEvent(t)?e?e.call(n,t,a,s):!1:!0},n}o.createMousetrap=i}(p0||(p0={}));var Y8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},OS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;Object(me.a)(this,r),e=i.call(this),e.options=n,e.cumulatedFactor=1;var t=e.graph.scroller.widget;return e.container=t?t.container:e.graph.container,e.target=e.options.global?document:e.container,e.mousewheelHandle=new M.MouseWheelHandle(e.target,e.onMouseWheel.bind(Object(rs.a)(e)),e.allowMouseWheel.bind(Object(rs.a)(e))),e.options.enabled&&e.enable(!0),e}return Object(ue.a)(r,[{key:"graph",get:function(){return this.options.graph}},{key:"disabled",get:function(){return this.options.enabled!==!0}},{key:"enable",value:function(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}},{key:"disable",value:function(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}},{key:"allowMouseWheel",value:function(e){var t=e.originalEvent||e,a=this.options.guard;return(a==null||a.call(this.graph,t))&&Eh.isMatch(t,this.options.modifiers)}},{key:"onMouseWheel",value:function(e){var t=e.originalEvent||e,a=this.options.guard;if((a==null||a.call(this.graph,t))&&Eh.isMatch(t,this.options.modifiers)){var s=this.options.factor||1.2;this.currentScale==null&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx);var u=e.deltaY;u<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*s*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/s)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);var l=this.graph.scroller.widget,c=this.currentScale,f=this.graph.transform.clampScale(c*this.cumulatedFactor),d=this.options.minScale||Number.MIN_SAFE_INTEGER,v=this.options.maxScale||Number.MAX_SAFE_INTEGER;if(f=E.clamp(f,d,v),f!==c)if(l)if(this.options.zoomAtMousePosition){var m=this.graph.coord.clientToLocalPoint(this.startPos);l.zoom(f,{absolute:!0,center:m.clone()})}else l.zoom(f,{absolute:!0});else if(this.options.zoomAtMousePosition){var y=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(f,{absolute:!0,center:y.clone(),ui:!0})}else this.graph.transform.zoom(f,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}}},{key:"dispose",value:function(){this.disable()}}]),r}(Uc);Y8([Uc.dispose()],OS.prototype,"dispose",null);var J8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},g0=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"show",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=Object.assign(Object.assign({},r.defaultOptions),t),s=this.createPrintPages(a);a.ready(s,function(u){return e.showPrintWindow(u,a)},{sheetSize:this.getSheetSize(a)})}},{key:"className",get:function(){return this.view.prefixClassName("graph-print")}},{key:"showPrintWindow",value:function(e,t){var a=this;if(e){var s=Kt()(document.body),u=Kt()(this.view.container),l=this.view.prefixClassName("graph-printing");s.addClass(l);var c=u.children().detach();e.forEach(function(v){v.removeClass("".concat(a.className,"-preview")).addClass("".concat(a.className,"-ready")).appendTo(s)});var f=!1,d=function v(){f||(f=!0,s.removeClass(l),e.forEach(function(m){return m.remove()}),u.append(c),Kt()("#".concat(a.styleSheetId)).remove(),a.graph.trigger("after:print",t),Kt()(window).off("afterprint",v))};Kt()(window).one("afterprint",d),setTimeout(d,200),window.print()}}},{key:"createPrintPage",value:function(e,t){this.graph.trigger("before:print",t);var a=Kt()("<div/>").addClass(this.className),s=Kt()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&a.addClass("".concat(this.className,"-size-").concat(t.size));var u=oi.create(this.view.svg).clone(),l=u.findOne(".".concat(this.view.prefixClassName("graph-svg-stage")));s.append(u.node);var c=this.getSheetSize(t),f=this.graph.transform.getGraphArea(),d=this.graph.transform.getScale(),v=this.graph.translate(),m=M.createSVGMatrix().translate(v.tx/d.sx,v.ty/d.sy),y=this.getPageInfo(f,e,c),C=y.scale,O=y.bbox;return s.css({left:0,top:0}),u.attr({width:O.width*C,height:O.height*C,style:"position:relative",viewBox:[O.x,O.y,O.width,O.height].join(" ")}),l.attr("transform",M.matrixToTransformString(m)),a.append(s),a.addClass("".concat(this.className,"-preview")),{$page:a,sheetSize:c}}},{key:"createPrintPages",value:function(e){var t=this,a,s=this.getPrintArea(e),u=[];if(e.page){var l=this.getPageSize(s,e.page),c=this.getPageAreas(s,l);c.forEach(function(d){a=t.createPrintPage(d,e),u.push(a.$page)})}else a=this.createPrintPage(s,e),u.push(a.$page);if(a){var f={width:a.sheetSize.cssWidth,height:a.sheetSize.cssHeight};this.updatePrintStyle(f,e)}return u}},{key:"styleSheetId",get:function(){return this.view.prefixClassName("graph-print-style")}},{key:"updatePrintStyle",value:function(e,t){var a=Object.keys(e).reduce(function(v,m){return"".concat(v," ").concat(m,":").concat(e[m],";")},""),s=E.normalizeSides(t.margin),u=t.marginUnit||"",l=t.sheetUnit||"",c=`
      @media print {
        .`.concat(this.className,".").concat(this.className,`-ready {
          `).concat(a,`
        }

        @page {
          margin:
          `).concat([s.top+u,s.right+u,s.bottom+u,s.left+u].join(" "),`;
          size: `).concat(t.sheet.width+l," ").concat(t.sheet.height+l,`;

        .`).concat(this.className,".").concat(this.className,`-preview {
          `).concat(a,`
        }
      }`),f=this.styleSheetId,d=Kt()("#".concat(f));d.length?d.html(c):Kt()("head").append(`'<style type="text/css" id="`.concat(f,'">').concat(c,"</style>'"))}},{key:"getPrintArea",value:function(e){var t=e.area;if(!t){var a=E.normalizeSides(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-a.left,y:-a.top,width:a.left+a.right,height:a.top+a.bottom})}return t}},{key:"getPageSize",value:function(e,t){if(typeof t=="object"){var a=t,s={width:a.width,height:a.height};return s.width==null&&(s.width=Math.ceil(e.width/(a.columns||1))),s.height==null&&(s.height=Math.ceil(e.height/(a.rows||1))),s}return{width:e.width,height:e.height}}},{key:"getPageAreas",value:function(e,t){for(var a=[],s=t.width,u=t.height,l=0,c=0;l<e.height&&c<200;l+=u,c+=1)for(var f=0,d=0;f<e.width&&d<200;f+=s,d+=1)a.push(new Br(e.x+f,e.y+l,s,u));return a}},{key:"getSheetSize",value:function(e){var t=e.sheet,a=E.normalizeSides(e.margin),s=e.marginUnit||"",u=e.sheetUnit||"",l="calc(".concat(t.width).concat(u," - ").concat(a.left+a.right).concat(s,")"),c="calc(".concat(t.height).concat(u," - ").concat(a.top+a.bottom).concat(s,")"),f=Lx.measure(l,c);return{cssWidth:l,cssHeight:c,width:f.width,height:f.height}}},{key:"getPageInfo",value:function(e,t,a){var s=new Br(t.x-e.x,t.y-e.y,t.width,t.height),u=s.width/s.height,l=a.width/a.height;return{bbox:s,scale:l<u?a.width/s.width:a.height/s.height,fitHorizontal:l<u}}},{key:"dispose",value:function(){}}]),r}(ho);J8([ho.dispose()],g0.prototype,"dispose",null),function(o){o.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:function(r,n){return n(r)}}}(g0||(g0={}));var kk=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"toSVG",value:function(e){var t=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.graph.trigger("before:export",a);var s=this.view.svg,u=oi.create(s).clone(),l=u.node,c=u.findOne(".".concat(this.view.prefixClassName("graph-svg-stage"))),f=a.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),d=a.preserveDimensions;if(d){var v=typeof d=="boolean"?f:d;u.attr({width:v.width,height:v.height})}if(u.removeAttribute("style").attr("viewBox",[f.x,f.y,f.width,f.height].join(" ")),c.removeAttribute("transform"),a.copyStyles!==!1){for(var m=s.ownerDocument,y=Array.from(s.querySelectorAll("*")),C=Array.from(l.querySelectorAll("*")),O=m.styleSheets.length,x=[],T=O-1;T>=0;T-=1)x[T]=m.styleSheets[T],m.styleSheets[T].disabled=!0;var L={};y.forEach(function(Ae,Pe){var qe=window.getComputedStyle(Ae,null),lt={};Object.keys(qe).forEach(function(ze){lt[ze]=qe.getPropertyValue(ze)}),L[Pe]=lt}),O!==m.styleSheets.length&&x.forEach(function(Ae,Pe){m.styleSheets[Pe]=Ae});for(var _=0;_<O;_+=1)m.styleSheets[_].disabled=!1;var z={};y.forEach(function(Ae,Pe){var qe=window.getComputedStyle(Ae,null),lt=L[Pe],ze={};Object.keys(qe).forEach(function(ht){!E.isNumeric(ht)&&qe.getPropertyValue(ht)!==lt[ht]&&(ze[ht]=qe.getPropertyValue(ht))}),z[Pe]=ze}),C.forEach(function(Ae,Pe){Kt()(Ae).css(z[Pe])})}var Q=a.stylesheet;if(typeof Q=="string"){var q=s.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(Q);u.prepend(oi.create("style",{type:"text/css"},[q]))}var ye=function(){var Pe=a.beforeSerialize;if(typeof Pe=="function"){var qe=A.call(Pe,t.graph,l);qe instanceof SVGSVGElement&&(l=qe)}var lt=new XMLSerializer().serializeToString(l).replace(/&nbsp;/g,"\xA0");t.graph.trigger("after:export",a),e(lt)};if(a.serializeImages){var Ce=u.find("image").map(function(Ae){return new Promise(function(Pe){var qe=Ae.attr("xlink:href")||Ae.attr("href");jx.imageToDataUri(qe,function(lt,ze){!lt&&ze&&Ae.attr("xlink:href",ze),Pe()})})});Promise.all(Ce).then(ye)}else ye()}},{key:"toDataURL",value:function(e,t){var a=t.viewBox||this.graph.getContentBBox(),s=E.normalizeSides(t.padding);t.width&&t.height&&(s.left+s.right>=t.width&&(s.left=s.right=0),s.top+s.bottom>=t.height&&(s.top=s.bottom=0));var u=new Br(-s.left,-s.top,s.left+s.right,s.top+s.bottom);if(t.width&&t.height){var l=a.width+s.left+s.right,c=a.height+s.top+s.bottom;u.scale(l/t.width,c/t.height)}a=Br.create(a).moveAndExpand(u);var f=typeof t.width=="number"&&typeof t.height=="number"?{width:t.width,height:t.height}:a,d=t.ratio?parseFloat(t.ratio):1;(!Number.isFinite(d)||d===0)&&(d=1);var v={width:Math.max(Math.round(f.width*d),1),height:Math.max(Math.round(f.height*d),1)};{var m=document.createElement("canvas"),y=m.getContext("2d");m.width=v.width,m.height=v.height;var C=v.width-1,O=v.height-1;y.fillStyle="rgb(1,1,1)",y.fillRect(C,O,1,1);var x=y.getImageData(C,O,1,1).data;if(x[0]!==1||x[1]!==1||x[2]!==1)throw new Error("size exceeded")}var T=new Image;T.onload=function(){var L=document.createElement("canvas");L.width=v.width,L.height=v.height;var _=L.getContext("2d");_.fillStyle=t.backgroundColor||"white",_.fillRect(0,0,v.width,v.height);try{_.drawImage(T,0,0,v.width,v.height);var z=L.toDataURL(t.type,t.quality);e(z)}catch(Q){}},this.toSVG(function(L){T.src="data:image/svg+xml,".concat(encodeURIComponent(L))},Object.assign(Object.assign({},t),{viewBox:a,serializeImages:!0,preserveDimensions:Object.assign({},v)}))}},{key:"toPNG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}},{key:"toJPEG",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}]),r}(ho),Z8=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.widgets=new Map,n}return Object(ue.a)(r,[{key:"isSelectionEnabled",get:function(){return this.options.selecting.enabled===!0}},{key:"init",value:function(){this.startListening()}},{key:"startListening",value:function(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}},{key:"stopListening",value:function(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}},{key:"onNodeMouseUp",value:function(e){var t=e.node;if(!this.isSelectionEnabled){var a=this.graph.hook.createKnob(t,{clearAll:!0});a&&this.widgets.set(t,a)}}},{key:"onNodeSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var a=this.graph.hook.createKnob(t,{clearAll:!1});a&&this.widgets.set(t,a)}}},{key:"onNodeUnSelected",value:function(e){var t=e.node;if(this.isSelectionEnabled){var a=this.widgets.get(t);a&&a.forEach(function(s){return s.dispose()}),this.widgets.delete(t)}}}]),r}(ho),Q8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Dk=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"widgetOptions",get:function(){return this.options.panning}},{key:"pannable",get:function(){return this.widgetOptions&&this.widgetOptions.enabled===!0}},{key:"init",value:function(){this.startListening(),this.updateClassName()}},{key:"startListening",value:function(){var e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new M.MouseWheelHandle(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}},{key:"stopListening",value:function(){var e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}},{key:"preparePanning",value:function(e){var t=e.e;(this.allowPanning(t,!0)||this.allowPanning(t)&&!this.graph.selection.allowRubberband(t,!0))&&this.startPanning(t)}},{key:"allowPanning",value:function(e,t){return this.pannable&&Eh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}},{key:"startPanning",value:function(e){var t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}},{key:"pan",value:function(e){var t=this.view.normalizeEvent(e),a=t.clientX-this.clientX,s=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY;var u=this.graph.transform.getTranslation(),l=u.tx+a,c=u.ty+s;this.graph.transform.translate(l,c,{ui:!0})}},{key:"stopPanning",value:function(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}},{key:"updateClassName",value:function(){var e=this.view.container,t=this.view.prefixClassName("graph-panning"),a=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(M.addClass(e,t),M.removeClass(e,a)):(M.removeClass(e,t),M.addClass(e,a)):(M.removeClass(e,t),M.removeClass(e,a))}},{key:"onRightMouseDown",value:function(e){e.button===2&&this.allowPanning(e,!0)&&this.startPanning(e)}},{key:"allowMouseWheel",value:function(e){return this.pannable&&!e.ctrlKey}},{key:"onMouseWheel",value:function(e,t,a){e.ctrlKey||this.graph.translateBy(-t,-a)}},{key:"autoPanning",value:function(e,t){var a=10,s=this.graph.getGraphArea(),u=0,l=0;e<=s.left+a&&(u=-a),t<=s.top+a&&(l=-a),e>=s.right-a&&(u=a),t>=s.bottom-a&&(l=a),(u!==0||l!==0)&&this.graph.translateBy(-u,-l)}},{key:"enablePanning",value:function(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}},{key:"disablePanning",value:function(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}},{key:"dispose",value:function(){this.stopListening()}}]),r}(ho);Q8([ho.dispose()],Dk.prototype,"dispose",null);var q8=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},Ik=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"hasScroller",value:function(){return this.graph.scroller.widget!=null}},{key:"getContainer",value:function(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}},{key:"init",value:function(){var e=this,t=this.options.autoResize;if(t){var a=typeof t=="boolean"?this.getContainer():t;c1.bind(a,function(){var s=e.getContainer(),u=s.offsetWidth,l=s.offsetHeight;e.resize(u,l)})}}},{key:"resize",value:function(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}},{key:"resizeGraph",value:function(e,t){this.graph.transform.resize(e,t)}},{key:"resizeScroller",value:function(e,t){this.graph.scroller.resize(e,t)}},{key:"resizePage",value:function(e,t){var a=this.graph.scroller.widget;a&&a.updatePageSize(e,t)}},{key:"dispose",value:function(){c1.clear(this.getContainer())}}]),r}(ho);q8([ho.dispose()],Ik.prototype,"dispose",null);var Ri=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},ez=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},wi;(function(o){function i(n,e){return function(t,a,s){var u=s.value,l=e||a;s.value=function(){for(var c=this.options[l],f=arguments.length,d=new Array(f),v=0;v<f;v++)d[v]=arguments[v];if(c!=null){this.getNativeValue=u.bind.apply(u,[this].concat(d));var m=A.call.apply(A,[c,this.graph].concat(d));if(this.getNativeValue=null,m!=null||n===!0&&m===null)return m}return u.call.apply(u,[this].concat(d))}}}o.hook=i;function r(n){return function(e,t,a){var s=a.value,u=n||t;a.value=function(){for(var l=arguments.length,c=new Array(l),f=0;f<l;f++)c[f]=arguments[f];var d=s.call.apply(s,[this].concat(c)),v=this.options[u];return v!=null&&(d=A.call.apply(A,[v,this.graph].concat(c))&&d),d}}}o.after=r})(wi||(wi={}));var xi=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"createModel",value:function(){if(this.options.model)return this.options.model;var e=new _l;return e.graph=this.graph,e}},{key:"createView",value:function(){return new Ch(this.graph)}},{key:"createRenderer",value:function(){return new Fv(this.graph)}},{key:"createDefsManager",value:function(){return new Mk(this.graph)}},{key:"createGridManager",value:function(){return new gS(this.graph)}},{key:"createCoordManager",value:function(){return new Tk(this.graph)}},{key:"createKnobManager",value:function(){return new Z8(this.graph)}},{key:"createTransform",value:function(e,t){var a=this.getTransformOptions(e);return a.resizable||a.rotatable?new pS(Object.assign(Object.assign({node:e,graph:this.graph},a),t)):(a.clearAll&&pS.removeInstances(this.graph),null)}},{key:"createKnob",value:function(e,t){var a=this,s=Hc.parseOptionGroup(this.graph,e,this.options.knob),u=Object.assign(Object.assign({},s),t);u.clearAll&&dS.removeInstances(this.graph),u.clearAll=!1;var l=e.prop("knob"),c=[],f=Array.isArray(l)?l:[l];return f.forEach(function(d,v){if(d){if(d.enabled===!1||typeof d.enabled=="function"&&d.enabled.call(a.graph,e)===!1)return}else return;s.enabled&&c.push(new dS(Object.assign({node:e,index:v,graph:a.graph},u)))}),c}},{key:"getTransformOptions",value:function(e){var t=Hc.parseOptionGroup(this.graph,e,this.options.resizing),a=Hc.parseOptionGroup(this.graph,e,this.options.rotating),s=Hc.parseOptionGroup(this.graph,e,this.options.transforming),u=Object.assign(Object.assign({},s),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:t.restrict!=null?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:a.enabled,rotateGrid:a.grid});return u}},{key:"createTransformManager",value:function(){return new F1(this.graph)}},{key:"createHighlightManager",value:function(){return new _1(this.graph)}},{key:"createBackgroundManager",value:function(){return new j1(this.graph)}},{key:"createClipboard",value:function(){return new Rk}},{key:"createClipboardManager",value:function(){return new bS(this.graph)}},{key:"createSnapline",value:function(){return new vS(Object.assign({graph:this.graph},this.options.snapline))}},{key:"createSnaplineManager",value:function(){return new mS(this.graph)}},{key:"createSelection",value:function(){return new L1(Object.assign({graph:this.graph},this.options.selecting))}},{key:"createSelectionManager",value:function(){return new CS(this.graph)}},{key:"allowRubberband",value:function(e){return!0}},{key:"createHistoryManager",value:function(){return new v0(Object.assign({graph:this.graph},this.options.history))}},{key:"createScroller",value:function(){return this.options.scroller.enabled?new h0(Object.assign({graph:this.graph},this.options.scroller)):null}},{key:"createScrollerManager",value:function(){return new yS(this.graph)}},{key:"allowPanning",value:function(e){return!0}},{key:"createMiniMap",value:function(){var e=this.options.minimap,t=e.enabled,a=ez(e,["enabled"]);return t?new hS(Object.assign({graph:this.graph},a)):null}},{key:"createMiniMapManager",value:function(){return new ES(this.graph)}},{key:"createKeyboard",value:function(){return new p0(Object.assign({graph:this.graph},this.options.keyboard))}},{key:"createMouseWheel",value:function(){return new OS(Object.assign({graph:this.graph},this.options.mousewheel))}},{key:"createPrintManager",value:function(){return new g0(this.graph)}},{key:"createFormatManager",value:function(){return new kk(this.graph)}},{key:"createPanningManager",value:function(){return new Dk(this.graph)}},{key:"createSizeManager",value:function(){return new Ik(this.graph)}},{key:"allowConnectToBlank",value:function(e){var t=this.options.connecting,a=t.allowBlank!=null?t.allowBlank:t.dangling;if(typeof a!="function")return!!a;var s=this.graph.findViewByCell(e),u=e.getSourceCell(),l=e.getTargetCell(),c=this.graph.findViewByCell(u),f=this.graph.findViewByCell(l);return A.call(a,this.graph,{edge:e,edgeView:s,sourceCell:u,targetCell:l,sourceView:c,targetView:f,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:s.sourceMagnet,targetMagnet:s.targetMagnet})}},{key:"validateEdge",value:function(e,t,a){if(!this.allowConnectToBlank(e)){var s=e.getSourceCellId(),u=e.getTargetCellId();if(!(s&&u))return!1}var l=this.options.connecting.validateEdge;return l?A.call(l,this.graph,{edge:e,type:t,previous:a}):!0}},{key:"validateMagnet",value:function(e,t,a){if(t.getAttribute("magnet")!=="passive"){var s=this.options.connecting.validateMagnet;return s?A.call(s,this.graph,{e:a,magnet:t,view:e,cell:e.cell}):!0}return!1}},{key:"getDefaultEdge",value:function(e,t){var a,s=this.options.connecting.createEdge;return s&&(a=A.call(s,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),a==null&&(a=new fS),a}},{key:"validateConnection",value:function(e,t,a,s,u,l,c){var f=this,d=this.options.connecting,v=d.allowLoop,m=d.allowNode,y=d.allowEdge,C=d.allowPort,O=d.allowMulti!=null?d.allowMulti:d.multi,x=d.validateConnection,T=l?l.cell:null,L=u==="target"?a:e,_=u==="target"?s:t,z=!0,Q=function(ht){var nn=u==="source"?c?c.port:null:T?T.getSourcePortId():null,Tn=u==="target"?c?c.port:null:T?T.getTargetPortId():null;return A.call(ht,f.graph,{edge:T,edgeView:l,sourceView:e,targetView:a,sourcePort:nn,targetPort:Tn,sourceMagnet:t,targetMagnet:s,sourceCell:e?e.cell:null,targetCell:a?a.cell:null,type:u})};if(v!=null&&(typeof v=="boolean"?!v&&e===a&&(z=!1):z=Q(v)),z&&C!=null&&(typeof C=="boolean"?!C&&_&&(z=!1):z=Q(C)),z&&y!=null&&(typeof y=="boolean"?!y&&Lv.isEdgeView(L)&&(z=!1):z=Q(y)),z&&m!=null&&_==null&&(typeof m=="boolean"?!m&&Vs.isNodeView(L)&&(z=!1):z=Q(m)),z&&O!=null&&l){var q=l.cell,ye=u==="source"?c:q.getSource(),Ce=u==="target"?c:q.getTarget(),Ae=c?this.graph.getCellById(c.cell):null;if(ye&&Ce&&ye.cell&&Ce.cell&&Ae)if(typeof O=="function")z=Q(O);else{var Pe=this.model.getConnectedEdges(Ae,{outgoing:u==="source",incoming:u==="target"});if(Pe.length){if(O==="withPort"){var qe=Pe.some(function(ze){var ht=ze.getSource(),nn=ze.getTarget();return ht&&nn&&ht.cell===ye.cell&&nn.cell===Ce.cell&&ht.port!=null&&ht.port===ye.port&&nn.port!=null&&nn.port===Ce.port});qe&&(z=!1)}else if(!O){var lt=Pe.some(function(ze){var ht=ze.getSource(),nn=ze.getTarget();return ht&&nn&&ht.cell===ye.cell&&nn.cell===Ce.cell});lt&&(z=!1)}}}}return z&&x!=null&&(z=Q(x)),z}},{key:"getRestrictArea",value:function(e){var t=this.options.translating.restrict,a=typeof t=="function"?A.call(t,this.graph,e):t;return typeof a=="number"?this.graph.transform.getGraphArea().inflate(a):a===!0?this.graph.transform.getGraphArea():a||null}},{key:"onViewUpdated",value:function(e,t,a){t&Fv.FLAG_INSERT||a.mounting||this.graph.renderer.requestConnectedEdgesUpdate(e,a)}},{key:"onViewPostponed",value:function(e,t,a){return this.graph.renderer.forcePostponedViewUpdate(e,t)}},{key:"getCellView",value:function(e){return null}},{key:"createCellView",value:function(e){var t={graph:this.graph},a=this.getCellView(e);if(a)return new a(e,t);var s=e.view;if(s!=null&&typeof s=="string"){var u=as.registry.get(s);return u?new u(e,t):as.registry.onNotFound(s)}return e.isNode()?new Vs(e,t):e.isEdge()?new Lv(e,t):null}},{key:"getHTMLComponent",value:function(e){var t=e.getHTML();return typeof t=="string"&&(t=Vc.componentRegistry.get(t)||t),p.isPlainObject(t)&&(t=t.render),typeof t=="function"?A.call(t,this.graph,e):t}},{key:"shouldUpdateHTMLComponent",value:function(e){var t=e.getHTML();if(typeof t=="string"&&(t=Vc.componentRegistry.get(t)||t),p.isPlainObject(t)){var a=t.shouldComponentUpdate;return typeof a=="function"?A.call(a,this.graph,e):!!a}return!1}},{key:"onEdgeLabelRendered",value:function(e){}},{key:"onPortRendered",value:function(e){}},{key:"onToolItemCreated",value:function(e){}}]),r}(ho);Ri([wi.hook()],xi.prototype,"createModel",null),Ri([wi.hook()],xi.prototype,"createView",null),Ri([wi.hook()],xi.prototype,"createRenderer",null),Ri([wi.hook()],xi.prototype,"createDefsManager",null),Ri([wi.hook()],xi.prototype,"createGridManager",null),Ri([wi.hook()],xi.prototype,"createCoordManager",null),Ri([wi.hook()],xi.prototype,"createKnobManager",null),Ri([wi.hook()],xi.prototype,"createTransform",null),Ri([wi.hook()],xi.prototype,"createKnob",null),Ri([wi.hook()],xi.prototype,"createTransformManager",null),Ri([wi.hook()],xi.prototype,"createHighlightManager",null),Ri([wi.hook()],xi.prototype,"createBackgroundManager",null),Ri([wi.hook()],xi.prototype,"createClipboard",null),Ri([wi.hook()],xi.prototype,"createClipboardManager",null),Ri([wi.hook()],xi.prototype,"createSnapline",null),Ri([wi.hook()],xi.prototype,"createSnaplineManager",null),Ri([wi.hook()],xi.prototype,"createSelection",null),Ri([wi.hook()],xi.prototype,"createSelectionManager",null),Ri([wi.hook()],xi.prototype,"allowRubberband",null),Ri([wi.hook()],xi.prototype,"createHistoryManager",null),Ri([wi.hook()],xi.prototype,"createScroller",null),Ri([wi.hook()],xi.prototype,"createScrollerManager",null),Ri([wi.hook()],xi.prototype,"allowPanning",null),Ri([wi.hook()],xi.prototype,"createMiniMap",null),Ri([wi.hook()],xi.prototype,"createMiniMapManager",null),Ri([wi.hook()],xi.prototype,"createKeyboard",null),Ri([wi.hook()],xi.prototype,"createMouseWheel",null),Ri([wi.hook()],xi.prototype,"createPrintManager",null),Ri([wi.hook()],xi.prototype,"createFormatManager",null),Ri([wi.hook()],xi.prototype,"createPanningManager",null),Ri([wi.hook()],xi.prototype,"createSizeManager",null),Ri([wi.after()],xi.prototype,"onViewUpdated",null),Ri([wi.after()],xi.prototype,"onViewPostponed",null),Ri([wi.hook()],xi.prototype,"getCellView",null),Ri([wi.hook(!0)],xi.prototype,"createCellView",null),Ri([wi.hook()],xi.prototype,"getHTMLComponent",null),Ri([wi.hook()],xi.prototype,"shouldUpdateHTMLComponent",null),Ri([wi.hook()],xi.prototype,"onEdgeLabelRendered",null),Ri([wi.hook()],xi.prototype,"onPortRendered",null),Ri([wi.hook()],xi.prototype,"onToolItemCreated",null);var Wc=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},_i=function(o,i){Object(xr.a)(n,o);var r=Object(Sr.a)(n);function n(e){var t;return Object(me.a)(this,n),t=r.call(this),t.options=Hc.get(e),t.css=new l0(Object(rs.a)(t)),t.hook=new xi(Object(rs.a)(t)),t.view=t.hook.createView(),t.defs=t.hook.createDefsManager(),t.coord=t.hook.createCoordManager(),t.transform=t.hook.createTransformManager(),t.knob=t.hook.createKnobManager(),t.highlight=t.hook.createHighlightManager(),t.grid=t.hook.createGridManager(),t.background=t.hook.createBackgroundManager(),t.model=t.hook.createModel(),t.renderer=t.hook.createRenderer(),t.clipboard=t.hook.createClipboardManager(),t.snapline=t.hook.createSnaplineManager(),t.selection=t.hook.createSelectionManager(),t.history=t.hook.createHistoryManager(),t.scroller=t.hook.createScrollerManager(),t.minimap=t.hook.createMiniMapManager(),t.keyboard=t.hook.createKeyboard(),t.mousewheel=t.hook.createMouseWheel(),t.print=t.hook.createPrintManager(),t.format=t.hook.createFormatManager(),t.panning=t.hook.createPanningManager(),t.size=t.hook.createSizeManager(),t}return Object(ue.a)(n,[{key:"container",get:function(){return this.view.container}},{key:i,get:function(){return n.toStringTag}},{key:"isNode",value:function(t){return t.isNode()}},{key:"isEdge",value:function(t){return t.isEdge()}},{key:"resetCells",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.resetCells(t,a),this}},{key:"clearCells",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.clear(t),this}},{key:"toJSON",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.model.toJSON(t)}},{key:"parseJSON",value:function(t){return this.model.parseJSON(t)}},{key:"fromJSON",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.fromJSON(t,a),this}},{key:"getCellById",value:function(t){return this.model.getCell(t)}},{key:"addNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addNode(t,a)}},{key:"addNodes",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addCell(t.map(function(u){return fo.isNode(u)?u:a.createNode(u)}),s)}},{key:"createNode",value:function(t){return this.model.createNode(t)}},{key:"removeNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(t,a)}},{key:"addEdge",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addEdge(t,a)}},{key:"addEdges",value:function(t){var a=this,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.addCell(t.map(function(u){return Fo.isEdge(u)?u:a.createEdge(u)}),s)}},{key:"removeEdge",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(t,a)}},{key:"createEdge",value:function(t){return this.model.createEdge(t)}},{key:"addCell",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.addCell(t,a),this}},{key:"removeCell",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCell(t,a)}},{key:"removeCells",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeCells(t,a)}},{key:"removeConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.removeConnectedEdges(t,a)}},{key:"disconnectConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.disconnectConnectedEdges(t,a),this}},{key:"hasCell",value:function(t){return this.model.has(t)}},{key:"getCell",value:function(t){return this.model.getCell(t)}},{key:"getCells",value:function(){return this.model.getCells()}},{key:"getCellCount",value:function(){return this.model.total()}},{key:"getNodes",value:function(){return this.model.getNodes()}},{key:"getEdges",value:function(){return this.model.getEdges()}},{key:"getOutgoingEdges",value:function(t){return this.model.getOutgoingEdges(t)}},{key:"getIncomingEdges",value:function(t){return this.model.getIncomingEdges(t)}},{key:"getConnectedEdges",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getConnectedEdges(t,a)}},{key:"getRootNodes",value:function(){return this.model.getRoots()}},{key:"getLeafNodes",value:function(){return this.model.getLeafs()}},{key:"isRootNode",value:function(t){return this.model.isRoot(t)}},{key:"isLeafNode",value:function(t){return this.model.isLeaf(t)}},{key:"getNeighbors",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNeighbors(t,a)}},{key:"isNeighbor",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isNeighbor(t,a,s)}},{key:"getSuccessors",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSuccessors(t,a)}},{key:"isSuccessor",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isSuccessor(t,a,s)}},{key:"getPredecessors",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getPredecessors(t,a)}},{key:"isPredecessor",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.isPredecessor(t,a,s)}},{key:"getCommonAncestor",value:function(){var t;return(t=this.model).getCommonAncestor.apply(t,arguments)}},{key:"getSubGraph",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getSubGraph(t,a)}},{key:"cloneSubGraph",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.cloneSubGraph(t,a)}},{key:"cloneCells",value:function(t){return this.model.cloneCells(t)}},{key:"getNodesFromPoint",value:function(t,a){return this.model.getNodesFromPoint(t,a)}},{key:"getNodesInArea",value:function(t,a,s,u,l){return this.model.getNodesInArea(t,a,s,u,l)}},{key:"getNodesUnderNode",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getNodesUnderNode(t,a)}},{key:"searchCell",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.search(t,a,s),this}},{key:"getShortestPath",value:function(t,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.model.getShortestPath(t,a,s)}},{key:"getAllCellsBBox",value:function(){return this.model.getAllCellsBBox()}},{key:"getCellsBBox",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.model.getCellsBBox(t,a)}},{key:"startBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.startBatch(t,a)}},{key:"stopBatch",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.model.stopBatch(t,a)}},{key:"batchUpdate",value:function(t,a,s){var u=typeof t=="string"?t:"update",l=typeof t=="string"?a:t,c=typeof a=="function"?s:a;this.startBatch(u,c);var f=l();return this.stopBatch(u,c),f}},{key:"updateCellId",value:function(t,a){return this.model.updateCellId(t,a)}},{key:"isFrozen",value:function(){return this.renderer.isFrozen()}},{key:"freeze",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.freeze(t),this}},{key:"unfreeze",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.renderer.unfreeze(t),this}},{key:"isAsync",value:function(){return this.renderer.isAsync()}},{key:"setAsync",value:function(t){return this.renderer.setAsync(t),this}},{key:"findView",value:function(t){return Ui.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)}},{key:"findViews",value:function(t){return Br.isRectangleLike(t)?this.findViewsInArea(t):Pt.isPointLike(t)?this.findViewsFromPoint(t):[]}},{key:"findViewByCell",value:function(t){return this.renderer.findViewByCell(t)}},{key:"findViewByElem",value:function(t){return this.renderer.findViewByElem(t)}},{key:"findViewsFromPoint",value:function(t,a){var s=typeof t=="number"?{x:t,y:a}:t;return this.renderer.findViewsFromPoint(s)}},{key:"findViewsInArea",value:function(t,a,s,u,l){var c=typeof t=="number"?{x:t,y:a,width:s,height:u}:t,f=typeof t=="number"?l:a;return this.renderer.findViewsInArea(c,f)}},{key:"isViewMounted",value:function(t){return this.renderer.isViewMounted(t)}},{key:"getMountedViews",value:function(){return this.renderer.getMountedViews()}},{key:"getUnmountedViews",value:function(){return this.renderer.getUnmountedViews()}},{key:"matrix",value:function(t){return typeof t=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(t),this)}},{key:"resize",value:function(t,a){return this.size.resize(t,a),this}},{key:"resizeGraph",value:function(t,a){return this.size.resizeGraph(t,a),this}},{key:"resizeScroller",value:function(t,a){return this.size.resizeScroller(t,a),this}},{key:"resizePage",value:function(t,a){return this.size.resizePage(t,a),this}},{key:"scale",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return typeof t=="undefined"?this.transform.getScale():(this.transform.scale(t,a,s,u),this)}},{key:"zoom",value:function(t,a){var s=this.scroller.widget;if(s){if(typeof t=="undefined")return s.zoom();s.zoom(t,a)}else{if(typeof t=="undefined")return this.transform.getZoom();this.transform.zoom(t,a)}return this}},{key:"zoomTo",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.scroller.widget;return s?s.zoom(t,Object.assign(Object.assign({},a),{absolute:!0})):this.transform.zoom(t,Object.assign(Object.assign({},a),{absolute:!0})),this}},{key:"zoomToRect",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.scroller.widget;return s?s.zoomToRect(t,a):this.transform.zoomToRect(t,a),this}},{key:"zoomToFit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=this.scroller.widget;return a?a.zoomToFit(t):this.transform.zoomToFit(t),this}},{key:"rotate",value:function(t,a,s){return typeof t=="undefined"?this.transform.getRotation():(this.transform.rotate(t,a,s),this)}},{key:"translate",value:function(t,a){return typeof t=="undefined"?this.transform.getTranslation():(this.transform.translate(t,a),this)}},{key:"translateBy",value:function(t,a){var s=this.translate(),u=s.tx+t,l=s.ty+a;return this.translate(u,l)}},{key:"getArea",value:function(){return this.transform.getGraphArea()}},{key:"getGraphArea",value:function(){return this.transform.getGraphArea()}},{key:"getContentArea",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentArea(t)}},{key:"getContentBBox",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.getContentBBox(t)}},{key:"fitToContent",value:function(t,a,s,u){return this.transform.fitToContent(t,a,s,u)}},{key:"scaleContentToFit",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.transform.scaleContentToFit(t),this}},{key:"center",value:function(t){return this.centerPoint(t)}},{key:"centerPoint",value:function(t,a,s){var u=this.scroller.widget;return u?u.centerPoint(t,a,s):this.transform.centerPoint(t,a),this}},{key:"centerContent",value:function(t){var a=this.scroller.widget;return a?a.centerContent(t):this.transform.centerContent(t),this}},{key:"centerCell",value:function(t,a){var s=this.scroller.widget;return s?s.centerCell(t,a):this.transform.centerCell(t),this}},{key:"positionPoint",value:function(t,a,s){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=this.scroller.widget;return l?l.positionPoint(t,a,s,u):this.transform.positionPoint(t,a,s),this}},{key:"positionRect",value:function(t,a,s){var u=this.scroller.widget;return u?u.positionRect(t,a,s):this.transform.positionRect(t,a),this}},{key:"positionCell",value:function(t,a,s){var u=this.scroller.widget;return u?u.positionCell(t,a,s):this.transform.positionCell(t,a),this}},{key:"positionContent",value:function(t,a){var s=this.scroller.widget;return s?s.positionContent(t,a):this.transform.positionContent(t,a),this}},{key:"getClientMatrix",value:function(){return this.coord.getClientMatrix()}},{key:"getClientOffset",value:function(){return this.coord.getClientOffset()}},{key:"getPageOffset",value:function(){return this.coord.getPageOffset()}},{key:"snapToGrid",value:function(t,a){return this.coord.snapToGrid(t,a)}},{key:"pageToLocal",value:function(t,a,s,u){return Br.isRectangleLike(t)?this.coord.pageToLocalRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.pageToLocalRect(t,a,s,u):this.coord.pageToLocalPoint(t,a)}},{key:"localToPage",value:function(t,a,s,u){return Br.isRectangleLike(t)?this.coord.localToPageRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.localToPageRect(t,a,s,u):this.coord.localToPagePoint(t,a)}},{key:"clientToLocal",value:function(t,a,s,u){return Br.isRectangleLike(t)?this.coord.clientToLocalRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.clientToLocalRect(t,a,s,u):this.coord.clientToLocalPoint(t,a)}},{key:"localToClient",value:function(t,a,s,u){return Br.isRectangleLike(t)?this.coord.localToClientRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.localToClientRect(t,a,s,u):this.coord.localToClientPoint(t,a)}},{key:"localToGraph",value:function(t,a,s,u){return Br.isRectangleLike(t)?this.coord.localToGraphRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.localToGraphRect(t,a,s,u):this.coord.localToGraphPoint(t,a)}},{key:"graphToLocal",value:function(t,a,s,u){return Br.isRectangleLike(t)?this.coord.graphToLocalRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.graphToLocalRect(t,a,s,u):this.coord.graphToLocalPoint(t,a)}},{key:"clientToGraph",value:function(t,a,s,u){return Br.isRectangleLike(t)?this.coord.clientToGraphRect(t):typeof t=="number"&&typeof a=="number"&&typeof s=="number"&&typeof u=="number"?this.coord.clientToGraphRect(t,a,s,u):this.coord.clientToGraphPoint(t,a)}},{key:"defineFilter",value:function(t){return this.defs.filter(t)}},{key:"defineGradient",value:function(t){return this.defs.gradient(t)}},{key:"defineMarker",value:function(t){return this.defs.marker(t)}},{key:"getGridSize",value:function(){return this.grid.getGridSize()}},{key:"setGridSize",value:function(t){return this.grid.setGridSize(t),this}},{key:"showGrid",value:function(){return this.grid.show(),this}},{key:"hideGrid",value:function(){return this.grid.hide(),this}},{key:"clearGrid",value:function(){return this.grid.clear(),this}},{key:"drawGrid",value:function(t){return this.grid.draw(t),this}},{key:"updateBackground",value:function(){return this.background.update(),this}},{key:"drawBackground",value:function(t,a){var s=this.scroller.widget;return s!=null&&(this.options.background==null||!a)?s.backgroundManager.draw(t):this.background.draw(t),this}},{key:"clearBackground",value:function(t){var a=this.scroller.widget;return a!=null&&(this.options.background==null||!t)?a.backgroundManager.clear():this.background.clear(),this}},{key:"isClipboardEnabled",value:function(){return!this.clipboard.disabled}},{key:"enableClipboard",value:function(){return this.clipboard.enable(),this}},{key:"disableClipboard",value:function(){return this.clipboard.disable(),this}},{key:"toggleClipboard",value:function(t){return t!=null?t!==this.isClipboardEnabled()&&(t?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}},{key:"isClipboardEmpty",value:function(){return this.clipboard.isEmpty()}},{key:"getCellsInClipboard",value:function(){return this.clipboard.cells}},{key:"cleanClipboard",value:function(){return this.clipboard.clean(),this}},{key:"copy",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.copy(t,a),this}},{key:"cut",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.clipboard.cut(t,a),this}},{key:"paste",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this;return this.clipboard.paste(t,a)}},{key:"isHistoryEnabled",value:function(){return!this.history.disabled}},{key:"enableHistory",value:function(){return this.history.enable(),this}},{key:"disableHistory",value:function(){return this.history.disable(),this}},{key:"toggleHistory",value:function(t){return t!=null?t!==this.isHistoryEnabled()&&(t?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}},{key:"undo",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.undo(t),this}},{key:"undoAndCancel",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.cancel(t),this}},{key:"redo",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.history.redo(t),this}},{key:"canUndo",value:function(){return this.history.canUndo()}},{key:"canRedo",value:function(){return this.history.canRedo()}},{key:"cleanHistory",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.history.clean(t)}},{key:"isKeyboardEnabled",value:function(){return!this.keyboard.disabled}},{key:"enableKeyboard",value:function(){return this.keyboard.enable(),this}},{key:"disableKeyboard",value:function(){return this.keyboard.disable(),this}},{key:"toggleKeyboard",value:function(t){return t!=null?t!==this.isKeyboardEnabled()&&(t?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}},{key:"bindKey",value:function(t,a,s){return this.keyboard.on(t,a,s),this}},{key:"unbindKey",value:function(t,a){return this.keyboard.off(t,a),this}},{key:"isMouseWheelEnabled",value:function(){return!this.mousewheel.disabled}},{key:"enableMouseWheel",value:function(){return this.mousewheel.enable(),this}},{key:"disableMouseWheel",value:function(){return this.mousewheel.disable(),this}},{key:"toggleMouseWheel",value:function(t){return t==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this}},{key:"isPannable",value:function(){var t=this.scroller.widget;return t?this.scroller.pannable:this.panning.pannable}},{key:"enablePanning",value:function(){var t=this.scroller.widget;return t?this.scroller.enablePanning():this.panning.enablePanning(),this}},{key:"disablePanning",value:function(){var t=this.scroller.widget;return t?this.scroller.disablePanning():this.panning.disablePanning(),this}},{key:"togglePanning",value:function(t){return t==null?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}},{key:"lockScroller",value:function(){var t;(t=this.scroller.widget)===null||t===void 0||t.lock()}},{key:"unlockScroller",value:function(){var t;(t=this.scroller.widget)===null||t===void 0||t.unlock()}},{key:"updateScroller",value:function(){var t;(t=this.scroller.widget)===null||t===void 0||t.update()}},{key:"getScrollbarPosition",value:function(){var t=this.scroller.widget;return t.scrollbarPosition()}},{key:"setScrollbarPosition",value:function(t,a,s){var u=this.scroller.widget;return u.scrollbarPosition(t,a,s),this}},{key:"scrollToPoint",value:function(t,a,s){var u=this.scroller.widget;return u.scrollToPoint(t,a,s),this}},{key:"scrollToContent",value:function(t){var a=this.scroller.widget;return a.scrollToContent(t),this}},{key:"scrollToCell",value:function(t,a){var s=this.scroller.widget;return s.scrollToCell(t,a),this}},{key:"transitionToPoint",value:function(t,a,s){var u=this.scroller.widget;return u.transitionToPoint(t,a,s),this}},{key:"transitionToRect",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.scroller.widget;return s.transitionToRect(t,a),this}},{key:"isSelectionEnabled",value:function(){return!this.selection.disabled}},{key:"enableSelection",value:function(){return this.selection.enable(),this}},{key:"disableSelection",value:function(){return this.selection.disable(),this}},{key:"toggleSelection",value:function(t){return t!=null?t!==this.isSelectionEnabled()&&(t?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}},{key:"isMultipleSelection",value:function(){return this.selection.isMultiple()}},{key:"enableMultipleSelection",value:function(){return this.selection.enableMultiple(),this}},{key:"disableMultipleSelection",value:function(){return this.selection.disableMultiple(),this}},{key:"toggleMultipleSelection",value:function(t){return t!=null?t!==this.isMultipleSelection()&&(t?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}},{key:"isSelectionMovable",value:function(){return this.selection.widget.options.movable!==!1}},{key:"enableSelectionMovable",value:function(){return this.selection.widget.options.movable=!0,this}},{key:"disableSelectionMovable",value:function(){return this.selection.widget.options.movable=!1,this}},{key:"toggleSelectionMovable",value:function(t){return t!=null?t!==this.isSelectionMovable()&&(t?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}},{key:"isRubberbandEnabled",value:function(){return!this.selection.rubberbandDisabled}},{key:"enableRubberband",value:function(){return this.selection.enableRubberband(),this}},{key:"disableRubberband",value:function(){return this.selection.disableRubberband(),this}},{key:"toggleRubberband",value:function(t){return t!=null?t!==this.isRubberbandEnabled()&&(t?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}},{key:"isStrictRubberband",value:function(){return this.selection.widget.options.strict===!0}},{key:"enableStrictRubberband",value:function(){return this.selection.widget.options.strict=!0,this}},{key:"disableStrictRubberband",value:function(){return this.selection.widget.options.strict=!1,this}},{key:"toggleStrictRubberband",value:function(t){return t!=null?t!==this.isStrictRubberband()&&(t?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}},{key:"setRubberbandModifiers",value:function(t){this.selection.setModifiers(t)}},{key:"setSelectionFilter",value:function(t){return this.selection.setFilter(t),this}},{key:"setSelectionDisplayContent",value:function(t){return this.selection.setContent(t),this}},{key:"isSelectionEmpty",value:function(){return this.selection.isEmpty()}},{key:"cleanSelection",value:function(t){return this.selection.clean(t),this}},{key:"resetSelection",value:function(t,a){return this.selection.reset(t,a),this}},{key:"getSelectedCells",value:function(){return this.selection.cells}},{key:"getSelectedCellCount",value:function(){return this.selection.length}},{key:"isSelected",value:function(t){return this.selection.isSelected(t)}},{key:"select",value:function(t,a){return this.selection.select(t,a),this}},{key:"unselect",value:function(t,a){return this.selection.unselect(t,a),this}},{key:"isSnaplineEnabled",value:function(){return!this.snapline.widget.disabled}},{key:"enableSnapline",value:function(){return this.snapline.widget.enable(),this}},{key:"disableSnapline",value:function(){return this.snapline.widget.disable(),this}},{key:"toggleSnapline",value:function(t){if(t!=null)t!==this.isSnaplineEnabled()&&(t?this.enableSnapline():this.disableSnapline());else return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this}},{key:"hideSnapline",value:function(){return this.snapline.widget.hide(),this}},{key:"setSnaplineFilter",value:function(t){return this.snapline.widget.setFilter(t),this}},{key:"isSnaplineOnResizingEnabled",value:function(){return this.snapline.widget.options.resizing===!0}},{key:"enableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!0,this}},{key:"disableSnaplineOnResizing",value:function(){return this.snapline.widget.options.resizing=!1,this}},{key:"toggleSnaplineOnResizing",value:function(t){return t!=null?t!==this.isSnaplineOnResizingEnabled()&&(t?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}},{key:"isSharpSnapline",value:function(){return this.snapline.widget.options.sharp===!0}},{key:"enableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!0,this}},{key:"disableSharpSnapline",value:function(){return this.snapline.widget.options.sharp=!1,this}},{key:"toggleSharpSnapline",value:function(t){return t!=null?t!==this.isSharpSnapline()&&(t?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}},{key:"getSnaplineTolerance",value:function(){return this.snapline.widget.options.tolerance}},{key:"setSnaplineTolerance",value:function(t){return this.snapline.widget.options.tolerance=t,this}},{key:"removeTools",value:function(){return this.emit("tools:remove"),this}},{key:"hideTools",value:function(){return this.emit("tools:hide"),this}},{key:"showTools",value:function(){return this.emit("tools:show"),this}},{key:"toSVG",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toSVG(t,a)}},{key:"toDataURL",value:function(t,a){this.format.toDataURL(t,a)}},{key:"toPNG",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toPNG(t,a)}},{key:"toJPEG",value:function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.format.toJPEG(t,a)}},{key:"printPreview",value:function(t){this.print.show(t)}},{key:"dispose",value:function(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}}]),n}(yu,Symbol.toStringTag);Wc([sc.checkScroller()],_i.prototype,"lockScroller",null),Wc([sc.checkScroller()],_i.prototype,"unlockScroller",null),Wc([sc.checkScroller()],_i.prototype,"updateScroller",null),Wc([sc.checkScroller()],_i.prototype,"getScrollbarPosition",null),Wc([sc.checkScroller()],_i.prototype,"setScrollbarPosition",null),Wc([sc.checkScroller()],_i.prototype,"scrollToPoint",null),Wc([sc.checkScroller()],_i.prototype,"scrollToContent",null),Wc([sc.checkScroller()],_i.prototype,"scrollToCell",null),Wc([sc.checkScroller()],_i.prototype,"transitionToPoint",null),Wc([sc.checkScroller()],_i.prototype,"transitionToRect",null),Wc([yu.dispose()],_i.prototype,"dispose",null),function(o){o.View=Ch,o.Hook=xi,o.Renderer=Fv,o.Keyboard=p0,o.MouseWheel=OS,o.BaseManager=ho,o.DefsManager=Mk,o.GridManager=gS,o.CoordManager=Tk,o.PrintManager=g0,o.FormatManager=kk,o.MiniMapManager=ES,o.HistoryManager=v0,o.SnaplineManager=mS,o.ScrollerManager=yS,o.ClipboardManager=bS,o.TransformManager=F1,o.HighlightManager=_1,o.BackgroundManager=j1,o.SelectionManager=CS}(_i||(_i={})),function(o){o.toStringTag="X6.".concat(o.name);function i(r){if(r==null)return!1;if(r instanceof o)return!0;var n=r[Symbol.toStringTag],e=r;return(n==null||n===o.toStringTag)&&e.hook!=null&&e.view!=null&&e.model!=null}o.isGraph=i}(_i||(_i={})),function(o){function i(r,n){var e=r instanceof HTMLElement?new o({container:r}):new o(r);return n!=null&&e.fromJSON(n),e}o.render=i}(_i||(_i={})),function(o){o.registerNode=fo.registry.register,o.registerEdge=Fo.registry.register,o.registerView=as.registry.register,o.registerAttr=zc.registry.register,o.registerGrid=Cd.registry.register,o.registerFilter=Av.registry.register,o.registerNodeTool=Dv.registry.register,o.registerEdgeTool=Iv.registry.register,o.registerBackground=Zp.registry.register,o.registerHighlighter=Df.registry.register,o.registerPortLayout=ph.registry.register,o.registerPortLabelLayout=Mv.registry.register,o.registerMarker=bd.registry.register,o.registerRouter=Od.registry.register,o.registerConnector=bh.registry.register,o.registerAnchor=Rv.registry.register,o.registerEdgeAnchor=Nv.registry.register,o.registerConnectionPoint=jv.registry.register,o.registerConnectionStrategy=kv.registry.register,o.registerHTMLComponent=Vc.componentRegistry.register}(_i||(_i={})),function(o){o.unregisterNode=fo.registry.unregister,o.unregisterEdge=Fo.registry.unregister,o.unregisterView=as.registry.unregister,o.unregisterAttr=zc.registry.unregister,o.unregisterGrid=Cd.registry.unregister,o.unregisterFilter=Av.registry.unregister,o.unregisterNodeTool=Dv.registry.unregister,o.unregisterEdgeTool=Iv.registry.unregister,o.unregisterBackground=Zp.registry.unregister,o.unregisterHighlighter=Df.registry.unregister,o.unregisterPortLayout=ph.registry.unregister,o.unregisterPortLabelLayout=Mv.registry.unregister,o.unregisterMarker=bd.registry.unregister,o.unregisterRouter=Od.registry.unregister,o.unregisterConnector=bh.registry.unregister,o.unregisterAnchor=Rv.registry.unregister,o.unregisterEdgeAnchor=Nv.registry.unregister,o.unregisterConnectionPoint=jv.registry.unregister,o.unregisterConnectionStrategy=kv.registry.unregister,o.unregisterHTMLComponent=Vc.componentRegistry.unregister}(_i||(_i={}));var Rk=function(){function o(){Object(me.a)(this,o),this.cells=[]}return Object(ue.a)(o,[{key:"copy",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.options=Object.assign({},e);var t=_l.isModel(n)?n:n.model,a=t.cloneSubGraph(r,e);this.cells=B.sortBy(Object.keys(a).map(function(s){return a[s]}),function(s){return s.isEdge()?2:1}),this.serialize(e)}},{key:"cut",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.copy(r,n,e);var t=_i.isGraph(n)?n.model:n;t.batchUpdate("cut",function(){r.forEach(function(a){return a.remove()})})}},{key:"paste",value:function(r){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=Object.assign(Object.assign({},this.options),e),a=t.offset,s=t.edgeProps,u=t.nodeProps,l=20,c=20;a&&(l=typeof a=="number"?a:a.dx,c=typeof a=="number"?a:a.dy),this.deserialize(t);var f=this.cells;f.forEach(function(v){v.model=null,v.removeProp("zIndex"),(l||c)&&v.translate(l,c),u&&v.isNode()&&v.prop(u),s&&v.isEdge()&&v.prop(s)});var d=_i.isGraph(r)?r.model:r;return d.batchUpdate("paste",function(){d.addCells(n.cells)}),this.copy(f,r,e),f}},{key:"serialize",value:function(r){r.useLocalStorage!==!1&&m0.save(this.cells)}},{key:"deserialize",value:function(r){if(r.useLocalStorage){var n=m0.fetch();n&&(this.cells=n)}}},{key:"isEmpty",value:function(){return this.cells.length<=0}},{key:"clean",value:function(){this.options={},this.cells=[],m0.clean()}}]),o}(),m0;(function(o){var i="".concat(Ll.prefixCls,".clipboard.cells");function r(t){if(window.localStorage){var a=t.map(function(s){return s.toJSON()});localStorage.setItem(i,JSON.stringify(a))}}o.save=r;function n(){if(window.localStorage){var t=localStorage.getItem(i),a=t?JSON.parse(t):[];if(a)return _l.fromJSON(a)}}o.fetch=n;function e(){window.localStorage&&localStorage.removeItem(i)}o.clean=e})(m0||(m0={}));var tz=function(){function o(i){Object(me.a)(this,o),this.halo=i}return Object(ue.a)(o,[{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"node",get:function(){return this.cell}},{key:"getPresets",value:function(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox:function(n){if(this.options.useCellGeometry){var e=n.cell;return e.getBBox()}return n.getBBox()},content:function(n){var e=S.template("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),t=n.cell,a=t.getBBox();return e({x:Math.floor(a.x),y:Math.floor(a.y),width:Math.floor(a.width),height:Math.floor(a.height),angle:Math.floor(t.getAngle())})},magnet:function(n){return n.container},tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}},{key:"removeCell",value:function(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}},{key:"startLink",value:function(r){var n=r.x,e=r.y;this.halo.startBatch();var t=this.graph,a=this.createEdgeConnectedToSource();a.setTarget({x:n,y:e}),this.model.addEdge(a,{validation:!1,halo:this.halo.cid,async:!1}),t.view.undelegateEvents(),this.edgeView=t.renderer.findViewByCell(a),this.edgeView.prepareArrowheadDragging("target",{x:n,y:e,fallbackAction:"remove"})}},{key:"createEdgeConnectedToSource",value:function(){var r=this.getMagnet(this.view,"source"),n=this.getEdgeTerminal(this.view,r),e=this.graph.hook.getDefaultEdge(this.view,r);return e.setSource(n),e}},{key:"getMagnet",value:function(r,n){var e=this.options.magnet;if(typeof e=="function"){var t=A.call(e,this.halo,r,n);if(t instanceof SVGElement)return t}throw new Error("`magnet()` has to return an SVGElement")}},{key:"getEdgeTerminal",value:function(r,n){var e={cell:r.cell.id};if(n!==r.container){var t=n.getAttribute("port");t?e.port=t:e.selector=r.getSelector(n)}return e}},{key:"doLink",value:function(r){var n=r.e,e=r.x,t=r.y;this.edgeView&&this.edgeView.onMouseMove(n,e,t)}},{key:"stopLink",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.edgeView;if(a){a.onMouseUp(n,e,t);var s=a.cell;s.hasLoop()&&this.makeLoopEdge(s),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:s}),this.edgeView=null}this.graph.view.delegateEvents()}},{key:"makeLoopEdge",value:function(r){var n=null,e=null,t=this.options.loopEdgeWidth,a=this.graph.options,s=new Br(0,0,a.width,a.height),u=this.graph.graphToLocal(this.view.getBBox()),l=[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(function(c){var f=null,d=0,v=0;switch(c){case"top":f=new Pt(u.x+u.width/2,u.y-t),d=t/2;break;case"bottom":f=new Pt(u.x+u.width/2,u.y+u.height+t),d=t/2;break;case"left":f=new Pt(u.x-t,u.y+u.height/2),v=t/2;break;case"right":f=new Pt(u.x+u.width+t,u.y+u.height/2),v=t/2;break;default:break}return f?(n=f.translate(-d,-v),e=f.translate(d,v),s.containsPoint(n)&&s.containsPoint(e)):!1});l&&n&&e&&r.setVertices([n,e])}},{key:"startResize",value:function(r){var n=r.e;this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(Mi.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),Ds("node:resize",n,this.view)}},{key:"doResize",value:function(r){var n=r.e,e=r.dx,t=r.dy,a=this.node.getSize(),s=Math.max(a.width+(this.flip?e:t),1),u=Math.max(a.height+(this.flip?t:e),1);this.node.resize(s,u,{absolute:!0}),Ds("node:resizing",n,this.view)}},{key:"stopResize",value:function(r){var n=r.e;this.view.removeClass("node-resizing"),Ds("node:resized",n,this.view),this.halo.stopBatch()}},{key:"startClone",value:function(r){var n=r.e,e=r.x,t=r.y;this.halo.startBatch();var a=this.options,s=a.clone(this.cell,{clone:!0});if(!Ui.isCell(s))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(s,e,t),this.model.addCell(s,{halo:this.halo.cid,async:!1});var u=this.graph.renderer.findViewByCell(s);u.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:u})}},{key:"centerNodeAtCursor",value:function(r,n,e){var t=r.getBBox().getCenter(),a=n-t.x,s=e-t.y;r.translate(a,s)}},{key:"doClone",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.halo.getEventData(n).cloneView;a&&a.onMouseMove(n,e,t)}},{key:"stopClone",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.halo.getEventData(n).cloneView;a&&a.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startFork",value:function(r){var n=r.e,e=r.x,t=r.y;this.halo.startBatch();var a=this.options.clone(this.cell,{fork:!0});if(!Ui.isCell(a))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(a,e,t),this.model.addCell(a,{halo:this.halo.cid,async:!1});var s=this.createEdgeConnectedToSource(),u=this.graph.renderer.findViewByCell(a),l=this.getMagnet(u,"target"),c=this.getEdgeTerminal(u,l);s.setTarget(c),this.model.addEdge(s,{halo:this.halo.cid,async:!1}),u.onMouseDown(n,e,t),this.halo.setEventData(n,{cloneView:u})}},{key:"doFork",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.halo.getEventData(n).cloneView;a&&a.onMouseMove(n,e,t)}},{key:"stopFork",value:function(r){var n=r.e,e=r.x,t=r.y,a=this.halo.getEventData(n).cloneView;a&&a.onMouseUp(n,e,t),this.halo.stopBatch()}},{key:"startRotate",value:function(r){var n=this,e=r.e,t=r.x,a=r.y;this.halo.startBatch();var s=this.node.getBBox().getCenter(),u=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce(function(l,c){return c.isNode()&&l.push(c),l},u),this.halo.setEventData(e,{center:s,nodes:u,rotateStartAngles:u.map(function(l){return l.getAngle()}),clientStartAngle:new Pt(t,a).theta(s)}),u.forEach(function(l){var c=n.graph.findViewByCell(l);c&&(c.addClass("node-rotating"),Ds("node:rotate",e,c))})}},{key:"doRotate",value:function(r){var n=this,e=r.e,t=r.x,a=r.y,s=this.halo.getEventData(e),u=s.clientStartAngle-new Pt(t,a).theta(s.center);s.nodes.forEach(function(l,c){var f=s.rotateStartAngles[c],d=hs.snapToGrid(f+u,n.options.rotateGrid);l.rotate(d,{absolute:!0,center:s.center,halo:n.halo.cid}),Ds("node:rotating",e,n.graph.findViewByCell(l))})}},{key:"stopRotate",value:function(r){var n=this,e=r.e,t=this.halo.getEventData(e);t.nodes.forEach(function(a){var s=n.graph.findViewByCell(a);s.removeClass("node-rotating"),Ds("node:rotated",e,s)}),this.halo.stopBatch()}},{key:"unlink",value:function(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}}]),o}(),nz=function(){function o(i){Object(me.a)(this,o),this.halo=i}return Object(ue.a)(o,[{key:"options",get:function(){return this.halo.options}},{key:"graph",get:function(){return this.halo.graph}},{key:"model",get:function(){return this.halo.model}},{key:"view",get:function(){return this.halo.view}},{key:"cell",get:function(){return this.halo.cell}},{key:"edge",get:function(){return this.cell}},{key:"getPresets",value:function(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:function(n){return n.graph.localToGraph(n.getPointAtRatio(.5))},tinyThreshold:-1,smallThreshold:-1}}},{key:"removeEdge",value:function(){this.cell.remove()}},{key:"directionSwap",value:function(){var r=this.edge.getSource(),n=this.edge.getTarget();this.edge.prop({source:n,target:r})}}]),o}(),B1=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"type",get:function(){return this.options.type||"surround"}},{key:"handleOptions",get:function(){return this.options}},{key:"init",value:function(e){this.options=p.merge(r.defaultOptions,this.cell.isNode()?new tz(this).getPresets():this.cell.isEdge()?new nz(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}},{key:"startListening",value:function(){var e=this.model,t=this.graph,a=this.view.cell;a.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),Object(Aa.a)(Object(Ma.a)(r.prototype),"startListening",this).call(this)}},{key:"stopListening",value:function(){var e=this.model,t=this.graph,a=this.view.cell;this.undelegateEvents(),a.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),Object(Aa.a)(Object(Ma.a)(r.prototype),"stopListening",this).call(this)}},{key:"render",value:function(){var e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(G1.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass("".concat(t,"-handles")).appendTo(this.container),this.$content=this.$("<div/>").addClass("".concat(t,"-content")).appendTo(this.container),this.$container.appendTo(this.graph.container),this}},{key:"remove",value:function(){return this.stopBatch(),this.view.removeClass(G1.NODE_CLS),Object(Aa.a)(Object(Ma.a)(r.prototype),"remove",this).call(this)}},{key:"update",value:function(){if(this.isRendered()){this.updateContent();var e=this.getBBox(),t=this.options.tinyThreshold||0,a=this.options.smallThreshold||0;this.$handleContainer.toggleClass("".concat(this.handleClassName,"-tiny"),e.width<t&&e.height<t);var s="".concat(this.handleClassName,"-small");this.$handleContainer.toggleClass(s,!this.$handleContainer.hasClass(s)&&e.width<a&&e.height<a),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),(this.type==="surround"||this.type==="toolbar")&&this.hasHandle("fork")&&this.toggleFork()}}},{key:"updateContent",value:function(){var e=this.options.content;if(typeof e=="function"){var t=A.call(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}},{key:"getBBox",value:function(){var e=this.view,t=this.options.bbox,a=typeof t=="function"?A.call(t,this,e):t;return Br.create(Object.assign({x:0,y:0,width:1,height:1},a))}},{key:"removeCell",value:function(){this.cell.remove()}},{key:"toggleFork",value:function(){var e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),a=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!a),t.remove()}},{key:"toggleUnlink",value:function(){var e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}},{key:"startBatch",value:function(){this.model.startBatch("halo",{halo:this.cid})}},{key:"stopBatch",value:function(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}}]),r}(f0);(function(o){o.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:function(r){return r.clone().removeZIndex()}}})(B1||(B1={})),Object.getOwnPropertyNames(c0.prototype).forEach(function(o){o!=="constructor"&&Object.defineProperty(B1.prototype,o,Object.getOwnPropertyDescriptor(c0.prototype,o))});var G1;(function(o){o.NODE_CLS="has-widget-halo"})(G1||(G1={}));var rz=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},tg=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.options=Object.assign(Object.assign({},r.defaults),n),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName("widget-dnd")),e.draggingGraph=new _i(Object.assign(Object.assign({},e.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),e.$container.append(e.draggingGraph.container),e}return Object(ue.a)(r,[{key:"targetScroller",get:function(){var e=this.options.target;return _i.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return _i.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"snapline",get:function(){return this.targetGraph.snapline.widget}},{key:"start",value:function(e,t){var a=t;a.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.draggingContainer||document.body),this.sourceNode=e,this.prepareDragging(e,a.clientX,a.clientY);var s=this.updateNodePosition(a.clientX,a.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:a,node:e,cell:e,view:this.draggingView,x:s.x,y:s.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(r.documentEvents,a.data)}},{key:"isSnaplineEnabled",value:function(){return this.snapline&&!this.snapline.disabled}},{key:"prepareDragging",value:function(e,t,a){var s=this.draggingGraph,u=s.model,l=this.options.getDragNode(e,{sourceNode:e,draggingGraph:s,targetGraph:this.targetGraph});l.position(0,0);var c=5;if(this.isSnaplineEnabled()&&(c+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){var f=this.targetGraph.transform.getScale();s.scale(f.sx,f.sy),c*=Math.max(f.sx,f.sy)}else s.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),u.resetCells([l]);var d=s.findViewByCell(l);d.undelegateEvents(),d.cell.off("changed"),s.fitToContent({padding:c,allowNewOrigin:"any"});var v=d.getBBox();this.geometryBBox=d.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(v.getTopLeft()),this.draggingNode=l,this.draggingView=d,this.draggingBBox=l.getBBox(),this.padding=c,this.originOffset=this.updateGraphPosition(t,a)}},{key:"updateGraphPosition",value:function(e,t){var a=document.body.scrollTop||document.documentElement.scrollTop,s=this.delta,u=this.geometryBBox,l=this.padding||5,c={left:e-s.x-u.width/2-l,top:t-s.y-u.height/2-l+a};return this.draggingGraph&&this.$container.offset(c),c}},{key:"updateNodePosition",value:function(e,t){var a=this.targetGraph.clientToLocal(e,t),s=this.draggingBBox;return a.x-=s.width/2,a.y-=s.height/2,this.draggingNode.position(a.x,a.y),a}},{key:"snap",value:function(e){var t=e.cell,a=e.current,s=e.options,u=t;if(s.snapped){var l=this.draggingBBox;u.position(l.x+s.tx,l.y+s.ty,{silent:!0}),this.draggingView.translate(),u.position(a.x,a.y,{silent:!0}),this.snapOffset={x:s.tx,y:s.ty}}else this.snapOffset=null}},{key:"onDragging",value:function(e){var t=this.draggingView;if(t){e.preventDefault();var a=this.normalizeEvent(e),s=a.clientX,u=a.clientY;this.updateGraphPosition(s,u);var l=this.updateNodePosition(s,u),c=this.targetGraph.options.embedding.enabled,f=(c||this.isSnaplineEnabled())&&this.isInsideValidArea({x:s,y:u});if(c){t.setEventData(a,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});var d=t.getEventData(a);f?t.processEmbedding(a,d):t.clearEmbedding(d),this.candidateEmbedView=d.candidateEmbedView}this.isSnaplineEnabled()&&(f?this.snapline.snapOnMoving({e:a,view:t,x:l.x,y:l.y}):this.snapline.hide())}}},{key:"onDragEnd",value:function(e){var t=this,a=this.draggingNode;if(a){var s=this.normalizeEvent(e),u=this.draggingView,l=this.draggingBBox,c=this.snapOffset,f=l.x,d=l.y;c&&(f+=c.x,d+=c.y),a.position(f,d,{silent:!0});var v=this.drop(a,{x:s.clientX,y:s.clientY}),m=function(C){C?(t.onDropped(a),t.targetGraph.options.embedding.enabled&&u&&(u.setEventData(s,{cell:C,graph:t.targetGraph,candidateEmbedView:t.candidateEmbedView}),u.finalizeEmbedding(s,u.getEventData(s)))):t.onDropInvalid(),t.candidateEmbedView=null,t.targetModel.stopBatch("dnd")};A.isAsync(v)?(this.undelegateDocumentEvents(),v.then(m)):m(v)}}},{key:"clearDragging",value:function(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}},{key:"onDropped",value:function(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}},{key:"onDropInvalid",value:function(){var e=this,t=this.draggingNode;if(t){var a=this.options.animation;if(a){var s=typeof a=="object"&&a.duration||150,u=typeof a=="object"&&a.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,s,u,function(){return e.onDropped(t)})}else this.onDropped(t)}}},{key:"isInsideValidArea",value:function(e){var t,a=null,s=this.targetGraph,u=this.targetScroller;this.options.dndContainer&&(a=this.getDropArea(this.options.dndContainer));var l=a&&a.containsPoint(e);if(u)if(u.options.autoResize)t=this.getDropArea(u.container);else{var c=this.getDropArea(u.container);t=this.getDropArea(s.container).intersectsWithRect(c)}else t=this.getDropArea(s.container);return!l&&t&&t.containsPoint(e)}},{key:"getDropArea",value:function(e){var t=this.$(e),a=t.offset(),s=document.body.scrollTop||document.documentElement.scrollTop,u=document.body.scrollLeft||document.documentElement.scrollLeft;return Br.create({x:a.left+parseInt(t.css("border-left-width"),10)-u,y:a.top+parseInt(t.css("border-top-width"),10)-s,width:t.innerWidth(),height:t.innerHeight()})}},{key:"drop",value:function(e,t){var a=this;if(this.isInsideValidArea(t)){var s=this.targetGraph,u=s.model,l=s.clientToLocal(t),c=this.sourceNode,f=this.options.getDropNode(e,{sourceNode:c,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),d=f.getBBox();l.x+=d.x-d.width/2,l.y+=d.y-d.height/2;var v=this.snapOffset?1:s.getGridSize();f.position(hs.snapToGrid(l.x,v),hs.snapToGrid(l.y,v)),f.removeZIndex();var m=this.options.validateNode,y=m?m(f,{sourceNode:c,draggingNode:e,droppingNode:f,targetGraph:s,draggingGraph:this.draggingGraph}):!0;return typeof y=="boolean"?y?(u.addCell(f,{stencil:this.cid}),f):null:A.toDeferredBoolean(y).then(function(C){return C?(u.addCell(f,{stencil:a.cid}),f):null})}return null}},{key:"onRemove",value:function(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}},{key:"dispose",value:function(){this.remove()}}]),r}(Zi);rz([Zi.dispose()],tg.prototype,"dispose",null),function(o){o.defaults={animation:!1,getDragNode:function(r){return r.clone()},getDropNode:function(r){return r.clone()}},o.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(tg||(tg={}));function az(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=_l.isModel(o)?o:new _l().resetCells(o,{sort:!1,dryrun:!0}),n=r.getNodes(),e=i.columns||1,t=Math.ceil(n.length/e),a=i.dx||0,s=i.dy||0,u=i.center!==!1,l=i.resizeToFit===!0,c=i.marginX||0,f=i.marginY||0,d=[],v=i.columnWidth;if(v==="compact")for(var m=0;m<e;m+=1){var y=Nf.getNodesInColumn(n,m,e);d.push(Nf.getMaxDim(y,"width")+a)}else{(v==null||v==="auto")&&(v=Nf.getMaxDim(n,"width")+a);for(var C=0;C<e;C+=1)d.push(v)}var O=Nf.accumulate(d,c),x=[],T=i.rowHeight;if(T==="compact")for(var L=0;L<t;L+=1){var _=Nf.getNodesInRow(n,L,e);x.push(Nf.getMaxDim(_,"height")+s)}else{(T==null||T==="auto")&&(T=Nf.getMaxDim(n,"height")+s);for(var z=0;z<t;z+=1)x.push(T)}var Q=Nf.accumulate(x,f);r.startBatch("layout"),n.forEach(function(q,ye){var Ce=ye%e,Ae=Math.floor(ye/e),Pe=d[Ce],qe=x[Ae],lt=0,ze=0,ht=q.getSize();if(l){var nn=Pe-2*a,Tn=qe-2*s,Kn=ht.height*(ht.width?nn/ht.width:1),zn=ht.width*(ht.height?Tn/ht.height:1);qe<Kn?nn=zn:Tn=Kn,ht={width:nn,height:Tn},q.setSize(ht,i)}u&&(lt=(Pe-ht.width)/2,ze=(qe-ht.height)/2),q.position(O[Ce]+a+lt,Q[Ae]+s+ze,i)}),r.stopBatch("layout")}var Nf;(function(o){function i(t,a){return t.reduce(function(s,u){return Math.max(u.getSize()[a],s)},0)}o.getMaxDim=i;function r(t,a,s){for(var u=[],l=s*a,c=l+s;l<c;l+=1)u.push(t[l]);return u}o.getNodesInRow=r;function n(t,a,s){for(var u=[],l=a,c=t.length;l<c;l+=s)u.push(t[l]);return u}o.getNodesInColumn=n;function e(t,a){return t.reduce(function(s,u,l){return s.push(s[l]+u),s},[a||0])}o.accumulate=e})(Nf||(Nf={}));var wS=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;if(Object(me.a)(this,r),e=i.call(this),e.graphs={},e.$groups={},e.options=Object.assign(Object.assign({},r.defaultOptions),n),e.dnd=new tg(e.options),e.onSearch=A.debounce(e.onSearch,200),e.container=document.createElement("div"),e.$container=e.$(e.container).addClass(e.prefixClassName(fl.base)).attr("data-not-found-text",e.options.notFoundText||"No matches found"),e.options.collapsable=n.collapsable&&n.groups&&n.groups.some(function(u){return u.collapsable!==!1}),e.options.collapsable){e.$container.addClass("collapsable");var t=n.groups&&n.groups.every(function(u){return u.collapsed||u.collapsable===!1});t&&e.$container.addClass("collapsed")}e.$("<div/>").addClass(e.prefixClassName(fl.title)).html(e.options.title).appendTo(e.$container),n.search&&e.$container.addClass("searchable").append(e.renderSearch()),e.$content=e.$("<div/>").addClass(e.prefixClassName(fl.content)).appendTo(e.$container);var a=n.stencilGraphOptions||{};if(n.groups&&n.groups.length)n.groups.forEach(function(u){var l=e.$("<div/>").addClass(e.prefixClassName(fl.group)).attr("data-name",u.name);(u.collapsable==null&&n.collapsable||u.collapsable!==!1)&&l.addClass("collapsable"),l.toggleClass("collapsed",u.collapsed===!0);var c=e.$("<h3/>").addClass(e.prefixClassName(fl.groupTitle)).html(u.title||u.name),f=e.$("<div/>").addClass(e.prefixClassName(fl.groupContent)),d=u.graphOptions,v=new _i(Object.assign(Object.assign(Object.assign({},a),d),{container:document.createElement("div"),model:a.model||new _l,width:u.graphWidth||n.stencilGraphWidth,height:u.graphHeight||n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));f.append(v.container),l.append(c,f).appendTo(e.$content),e.$groups[u.name]=l,e.graphs[u.name]=v});else{var s=new _i(Object.assign(Object.assign({},a),{container:document.createElement("div"),model:a.model||new _l,width:n.stencilGraphWidth,height:n.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));e.$content.append(s.container),e.graphs[y0.defaultGroupName]=s}return e.startListening(),Object(Bx.a)(e,Object(rs.a)(e))}return Object(ue.a)(r,[{key:"targetScroller",get:function(){var e=this.options.target;return _i.isGraph(e)?e.scroller.widget:e}},{key:"targetGraph",get:function(){var e=this.options.target;return _i.isGraph(e)?e:e.graph}},{key:"targetModel",get:function(){return this.targetGraph.model}},{key:"renderSearch",value:function(){return this.$("<div/>").addClass(this.prefixClassName(fl.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(fl.searchText)))}},{key:"startListening",value:function(){var e,t=this,a=this.prefixClassName(fl.title),s=this.prefixClassName(fl.searchText),u=this.prefixClassName(fl.groupTitle);this.delegateEvents((e={},Object(Re.a)(e,"click .".concat(a),"onTitleClick"),Object(Re.a)(e,"touchstart .".concat(a),"onTitleClick"),Object(Re.a)(e,"click .".concat(u),"onGroupTitleClick"),Object(Re.a)(e,"touchstart .".concat(u),"onGroupTitleClick"),Object(Re.a)(e,"input .".concat(s),"onSearch"),Object(Re.a)(e,"focusin .".concat(s),"onSearchFocusIn"),Object(Re.a)(e,"focusout .".concat(s),"onSearchFocusOut"),e)),Object.keys(this.graphs).forEach(function(l){var c=t.graphs[l];c.on("cell:mousedown",t.onDragStart,t)})}},{key:"stopListening",value:function(){var e=this;this.undelegateEvents(),Object.keys(this.graphs).forEach(function(t){var a=e.graphs[t];a.off("cell:mousedown",e.onDragStart,e)})}},{key:"load",value:function(e,t){var a=this;return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(function(s){e[s]&&a.loadGroup(e[s],s)}),this}},{key:"loadGroup",value:function(e,t){var a=this.getModel(t);if(a){var s=e.map(function(d){return fo.isNode(d)?d:fo.create(d)});a.resetCells(s)}var u=this.getGroup(t),l=this.options.stencilGraphHeight;u&&u.graphHeight!=null&&(l=u.graphHeight);var c=u&&u.layout||this.options.layout;if(c&&a&&A.call(c,this,a,u),!l){var f=this.getGraph(t);f.fitToContent({minWidth:f.options.width,gridHeight:1,padding:u&&u.graphPadding||this.options.stencilGraphPadding||10})}return this}},{key:"onDragStart",value:function(e){var t=e.e,a=e.node;this.dnd.start(a,t)}},{key:"filter",value:function(e,t){var a=this,s=Object.keys(this.graphs).reduce(function(u,l){var c=a.graphs[l],f=l===y0.defaultGroupName?null:l,d=c.model.getNodes().filter(function(C){var O=!1;typeof t=="function"?O=A.call(t,a,C,e,f,a):typeof t=="boolean"?O=t:O=a.isCellMatched(C,e,t,e.toLowerCase()!==e);var x=c.renderer.findViewByCell(C);return x&&x.$(x.container).toggleClass("unmatched",!O),O}),v=d.length>0,m=a.options,y=new _l;return y.resetCells(d),m.layout&&A.call(m.layout,a,y,a.getGroup(l)),a.$groups[l]&&a.$groups[l].toggleClass("unmatched",!v),c.fitToContent({gridWidth:1,gridHeight:1,padding:m.stencilGraphPadding||10}),u||v},!1);this.$container.toggleClass("not-found",!s)}},{key:"isCellMatched",value:function(e,t,a,s){return t&&a?Object.keys(a).some(function(u){if(u==="*"||e.shape===u){var l=a[u];if(typeof l=="boolean")return l;var c=Array.isArray(l)?l:[l];return c.some(function(f){var d=e.getPropByPath(f);return d!=null?(d="".concat(d),s||(d=d.toLowerCase()),d.indexOf(t)>=0):!1})}return!1}):!0}},{key:"onSearch",value:function(e){this.filter(e.target.value,this.options.search)}},{key:"onSearchFocusIn",value:function(){this.$container.addClass("is-focused")}},{key:"onSearchFocusOut",value:function(){this.$container.removeClass("is-focused")}},{key:"onTitleClick",value:function(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}},{key:"onGroupTitleClick",value:function(e){var t=this,a=this.$(e.target).closest(".".concat(this.prefixClassName(fl.group)));this.toggleGroup(a.attr("data-name")||"");var s=Object.keys(this.$groups).every(function(u){var l=t.getGroup(u),c=t.$groups[u];return l&&l.collapsable===!1||c.hasClass("collapsed")});this.$container.toggleClass("collapsed",s)}},{key:"getModel",value:function(e){var t=this.getGraph(e);return t?t.model:null}},{key:"getGraph",value:function(e){return this.graphs[e||y0.defaultGroupName]}},{key:"getGroup",value:function(e){var t=this.options.groups;return e!=null&&t&&t.length?t.find(function(a){return a.name===e}):null}},{key:"toggleGroup",value:function(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}},{key:"collapseGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}},{key:"expandGroup",value:function(e){if(this.isGroupCollapsable(e)){var t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}},{key:"isGroupCollapsable",value:function(e){var t=this.$groups[e];return t.hasClass("collapsable")}},{key:"isGroupCollapsed",value:function(e){var t=this.$groups[e];return t&&t.hasClass("collapsed")}},{key:"collapseGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.collapseGroup(t)}),this}},{key:"expandGroups",value:function(){var e=this;return Object.keys(this.$groups).forEach(function(t){return e.expandGroup(t)}),this}},{key:"resizeGroup",value:function(e,t){var a=this.graphs[e];return a&&a.resize(t.width,t.height),this}},{key:"onRemove",value:function(){var e=this;Object.keys(this.graphs).forEach(function(t){var a=e.graphs[t];a.view.remove(),delete e.graphs[t]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}}]),r}(Zi);(function(o){o.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout:function(r,n){var e={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};az(r,Object.assign(Object.assign(Object.assign({},e),this.options.layoutOptions),n?n.layoutOptions:{}))}},tg.defaults)})(wS||(wS={}));var fl;(function(o){o.base="widget-stencil",o.title="".concat(o.base,"-title"),o.search="".concat(o.base,"-search"),o.searchText="".concat(o.search,"-text"),o.content="".concat(o.base,"-content"),o.group="".concat(o.base,"-group"),o.groupTitle="".concat(o.group,"-title"),o.groupContent="".concat(o.group,"-content")})(fl||(fl={}));var y0;(function(o){o.defaultGroupName="__default__"})(y0||(y0={}));var Nk=h("i8i4"),Bv=h.n(Nk),iz=h("9og8"),xS;(function(o){function i(n){return!!n&&typeof n=="object"&&"dispose"in n&&typeof n.dispose=="function"}o.is=i;function r(n){return{dispose:n}}o.create=r,o.NONE=r(function(){})})(xS||(xS={}));var jk,Lk;(function(o){o.None=function(){return xS.NONE};function i(r,n){return function(e,t){return r(function(a){return e.call(t,n(a))},void 0)}}o.map=i})(Lk||(Lk={})),jk=Symbol.iterator;var oz=function(o){function i(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Object(me.a)(this,i),this.mono=void 0,this._callbacks=void 0,this.mono=r}return Object(ue.a)(i,[{key:"callbacks",get:function(){return this._callbacks||(this._callbacks=[]),this._callbacks}},{key:"length",get:function(){return this.callbacks.length}},{key:"add",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.callbacks.push([n,e])}},{key:"remove",value:function(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(!this.isEmpty()){for(var t=!1,a=0;a<this.length;a+=1)if(this.callbacks[a][0]===n){if(this.callbacks[a][1]===e){this.callbacks.splice(a,1);return}t=!0}if(t)throw new Error("You should remove it with the same context you add it")}}},{key:o,value:function(){if(this.isEmpty())return[][Symbol.iterator]();var n=this.callbacks.slice(0);return n.map(function(e){return function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e[0].apply(e[1],a)}})[Symbol.iterator]()}},{key:"invoke",value:function(){var n=[],e=Object(Bt.a)(this),t;try{for(e.s();!(t=e.n()).done;){var a=t.value;try{n.push(a.apply(void 0,arguments))}catch(s){console.error(s)}}}catch(s){e.e(s)}finally{e.f()}return n}},{key:"isEmpty",value:function(){return this.callbacks.length===0}},{key:"dispose",value:function(){this._callbacks=void 0}}]),i}(jk),_k=function(){function o(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object(me.a)(this,o),this.options=void 0,this._event=void 0,this._callbacks=void 0,this.disposed=!1,this.options=i}return Object(ue.a)(o,[{key:"callbacks",get:function(){return this._callbacks||(this._callbacks=new oz),this._callbacks}},{key:"event",get:function(){var r=this;return this._event||(this._event=function(n,e){r.options.onFirstListenerAdd&&r.callbacks.isEmpty()&&r.options.onFirstListenerAdd(r),r.callbacks.add(n,e);var t={dispose:function(){t.dispose=o.noop,r.disposed||(r.callbacks.remove(n,e),t.dispose=o.noop,r.options.onLastListenerRemove&&r.callbacks.isEmpty()&&r.options.onLastListenerRemove(r))}};return t}),this._event}},{key:"fire",value:function(r){!this._callbacks||this.callbacks.invoke(r)}},{key:"sequence",value:function(){var i=Object(iz.a)(Object(D.a)().mark(function n(e){var t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:t=Object(Bt.a)(this.callbacks),c.prev=1,t.s();case 3:if((a=t.n()).done){c.next=12;break}return s=a.value,c.next=7,e(s);case 7:if(u=c.sent,u){c.next=10;break}return c.abrupt("break",12);case 10:c.next=3;break;case 12:c.next=17;break;case 14:c.prev=14,c.t0=c.catch(1),t.e(c.t0);case 17:return c.prev=17,t.f(),c.finish(17);case 20:case"end":return c.stop()}},n,this,[[1,14,17,20]])}));function r(n){return i.apply(this,arguments)}return r}()},{key:"dispose",value:function(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0),this.disposed=!0}}]),o}();_k.noop=function(){};var ra;(function(o){function i(n){return!!n&&typeof n=="object"&&"dispose"in n&&typeof n.dispose=="function"}o.is=i;function r(n){return{dispose:n}}o.create=r,o.NULL=r(function(){})})(ra||(ra={}));var Bi=function(){function o(){var i=this;Object(me.a)(this,o),this.disposables=[],this.onDisposeEmitter=new _k,this.disposingElements=!1;for(var r=arguments.length,n=new Array(r),e=0;e<r;e++)n[e]=arguments[e];n.forEach(function(t){return i.push(t)})}return Object(ue.a)(o,[{key:"onDispose",get:function(){return this.onDisposeEmitter.event}},{key:"checkDisposed",value:function(){this.disposed&&!this.disposingElements&&(this.onDisposeEmitter.fire(void 0),this.onDisposeEmitter.dispose())}},{key:"disposed",get:function(){return this.disposables.length===0}},{key:"dispose",value:function(){return pe(this,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.disposed||this.disposingElements)){t.next=2;break}return t.abrupt("return");case 2:this.disposingElements=!0;case 3:if(this.disposed){t.next=15;break}return t.prev=4,n=this.disposables.pop(),t.next=8,n.dispose();case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),console.error(t.t0);case 13:t.next=3;break;case 15:this.disposingElements=!1,this.checkDisposed();case 17:case"end":return t.stop()}},r,this,[[4,10]])}))}},{key:"push",value:function(r){var n=this,e=this.disposables;e.push(r);var t=r.dispose.bind(r),a=ra.create(function(){var s=e.indexOf(r);s!==-1&&e.splice(s,1),n.checkDisposed()});return r.dispose=function(){a.dispose(),t()},a}},{key:"pushAll",value:function(r){var n=this;return r.map(function(e){return n.push(e)})}}]),o}(),dl=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.isResolved=!1,this.isRejected=!1,this.promise=new Promise(function(r,n){i.resolve=function(){i.isResolved=!0,r.apply(void 0,arguments)},i.reject=function(){i.isRejected=!0,n.apply(void 0,arguments)}})}),sz="X6_NODE_PORTAL_NODE_VIEW",SS="xflow",AS=.01,MS=1.5,z1="XFLOW_DEFAULT_NODE",Fk="XFLOW_DEFAULT_GROUP_NODE",TS="XFLOW_DEFAULT_EDGE",ng="XFLOW_COPY_ITEMS",Bk=36,Gk=180,PS={width:Gk,height:Bk};function $c(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var i=Math.random()*16|0,r=o=="x"?i:i&3|8;return r.toString(16)})}var zk=h("xGfz"),Uk=h("gUdW"),b0=I.a.createContext(null);b0.displayName="XFlowAppContext";var Yo=function(){var i=I.a.useContext(b0);return i&&i.getApp?i.getApp():null},uz=function(){return I.a.useContext(b0)},Vk=Object(ue.a)(function o(){var i=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;Object(me.a)(this,o),this.cache=null,this.setApp=function(n){i.cache=n,i.onAppChangeCallback&&i.onAppChangeCallback(n)},this.isUserDefined=function(){return i.isUserDefinedFlag},this.getApp=function(){return i.cache},this.onAppChange=function(n){i.onAppChangeCallback=n},this.dispose=function(){i.cache=null},this.isUserDefinedFlag=r}),Hk=function(i){var r=uz(),n=I.a.useState(null),e=Object(je.a)(n,2),t=e[1],a=I.a.useMemo(function(){return r&&r.isUserDefined()?r:new Vk(!1)},[]);return a.isUserDefined()||a.onAppChange(function(){return t(0)}),I.a.useEffect(function(){i.app&&a.setApp(i.app)},[i.app]),a.isUserDefined()?I.a.createElement(I.a.Fragment,null,i.children):I.a.createElement(b0.Provider,{value:Object.assign({},a)},i.children)};Hk.displayName="XFlowAppInternalProvider";var lz=function(i){var r=i.children,n=I.a.useState(null),e=Object(je.a)(n,2),t=e[1],a=I.a.useMemo(function(){return new Vk(!0)},[]);return a.onAppChange(function(){return t(0)}),I.a.createElement(b0.Provider,{value:Object.assign({},a)},r)};lz.displayName="XFlowAppProvider";var no;(function(o){var i="\u8282\u70B9\u64CD\u4F5C";o.ADD_NODE={id:"xflow:add-node",label:"\u6DFB\u52A0\u8282\u70B9",category:i},o.DEL_NODE={id:"xflow:del-node",label:"\u5220\u9664\u8282\u70B9",category:i},o.UPDATE_NODE_PORT={id:"xflow:update-node-port",label:"\u5220\u9664\u8FDE\u63A5\u6869",category:i},o.UPDATE_NODE={id:"xflow:update-node",label:"\u66F4\u65B0\u8282\u70B9",category:i},o.HIGHLIGHT_NODE={id:"xflow:highlight-node",label:"\u9AD8\u4EAE\u8282\u70B9",category:i},o.SELECT_NODE={id:"xflow:select-node",label:"\u9009\u4E2D\u8282\u70B9",category:i},o.MOVE_NODE={id:"xflow:move-node",label:"Move Node",category:i},o.CENTER_NODE={id:"xflow:center-node",label:"\u5C45\u4E2D\u8282\u70B9",category:i},o.FRONT_NODE={id:"xflow:front-node",label:"\u524D\u7F6E\u8282\u70B9",category:i},o.BACK_NODE={id:"xflow:back-node",label:"\u540E\u7F6E\u8282\u70B9",category:i}})(no||(no={}));var Bo;(function(o){var i="\u8FB9\u64CD\u4F5C";o.ADD_EDGE={id:"xflow:add-edge",label:"\u6DFB\u52A0\u8FB9",category:i},o.DEL_EDGE={id:"xflow:del-edge",label:"\u5220\u9664\u8FB9",category:i},o.UPDATE_EDGE={id:"xflow:update-edge",label:"\u66F4\u65B0\u8FB9",category:i},o.HIGHLIGHT_EDGE={id:"xflow:highlight-edge",label:"\u9AD8\u4EAE\u8FB9",category:i},o.FRONT_EDGE={id:"xflow:front-edge",label:"\u524D\u7F6E\u53D8",category:i},o.BACK_EDGE={id:"xflow:back-edge",label:"\u540E\u7F6E\u8FB9",category:i}})(Bo||(Bo={}));var di;(function(o){var i="\u753B\u5E03\u64CD\u4F5C";o.LOAD_META={id:"xflow:load-meta",label:"\u83B7\u53D6\u5143\u6570\u636E",category:i},o.LOAD_DATA={id:"xflow:load-data",label:"\u83B7\u53D6\u56FE\u6570\u636E",category:i},o.SAVE_GRAPH_DATA={id:"xflow:save-graph-data",label:"\u4FDD\u5B58",category:i},o.GRAPH_LAYOUT={id:"xflow:layout",label:"\u8BA1\u7B97\u5E03\u5C40",category:i},o.GRAPH_RENDER={id:"xflow:graph-render",label:"\u6E32\u67D3\u753B\u5E03",category:i},o.UNDO_CMD={id:"xflow:undo-cmd",label:"\u64A4\u9500",category:i},o.REDO_CMD={id:"xflow:redo-cmd",label:"\u91CD\u505A",category:i},o.GRAPH_INSTANCE_COMMAND={id:"xflow:graph-instacne-cmd",label:"Graph\u901A\u7528Command",category:i},o.GRAPH_ZOOM={id:"xflow:graph-zoom",label:"\u7F29\u653E\u753B\u5E03",category:i},o.GRAPH_FULLSCREEN={id:"xflow:graph-fullscreen",label:"\u5168\u5C4F",category:i},o.GRAPH_RESIZE={id:"xflow:graph-resize",label:"\u8C03\u6574\u7A97\u53E3\u5927\u5C0F",category:i},o.GRAPH_COPY={id:"xflow:graph-copy-selection",label:"\u590D\u5236",category:i},o.GRAPH_PASTE={id:"xflow:graph-paste-selection",label:"\u7C98\u8D34",category:i},o.GRAPH_TOGGLE_MULTI_SELECT={id:"xflow:graph-toggle-multi-select",label:"\u542F\u7528\u6846\u9009",category:i},o.GRAPH_ADD_TOOL={id:"xflow:add-tool",label:"\u6DFB\u52A0\u5DE5\u5177",category:i},o.GRAPH_DEL_TOOL={id:"xflow:del-tool",label:"\u5220\u9664\u5DE5\u5177",category:i},o.GRAPH_HISTORY_UNDO={id:"xflow:history-undo",label:"history undo",category:i},o.GRAPH_HISTORY_REDO={id:"xflow:history-redo",label:"history redo",category:i},o.GRAPH_HISTORY_RESET={id:"xflow:history-reset",label:"history reset",category:i},o.GRAPH_HISTORY_TOGGLE={id:"xflow:history-toggle",label:"history toggle",category:i}})(di||(di={}));var rg;(function(o){var i="\u72B6\u6001\u64CD\u4F5C";o.UPDATE_MODEL={id:"xflow:update-model",label:"\u8BBE\u7F6E\u72B6\u6001\u503C",category:i}})(rg||(rg={}));var Ws;(function(o){var i="\u7FA4\u7EC4\u64CD\u4F5C";o.INIT_GROUP={id:"xflow:init-group",label:"\u521D\u59CB\u5316\u7FA4\u7EC4",category:i},o.ADD_GROUP={id:"xflow:add-group",label:"\u65B0\u5EFA\u7FA4\u7EC4",category:i},o.DEL_GROUP={id:"xflow:del-group",label:"\u89E3\u6563\u7FA4\u7EC4",category:i},o.COLLAPSE_GROUP={id:"xflow:collapse-group",label:"\u6298\u53E0\u7FA4\u7EC4",category:i}})(Ws||(Ws={}));var Wk=function(i){var r=i.cell,n=Yo(),e=i.data.isCollapsed||!1,t=function(u){u.preventDefault(),n.executeCommand(Ws.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1})},a=function(u){u.preventDefault(),n.executeCommand(Ws.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,gap:3})};return I.a.createElement("div",{className:"xflow-default-group-node"},I.a.createElement("div",{className:"xflow-group-header"},I.a.createElement("div",{className:"header-left"},i.data.label),I.a.createElement("div",{className:"header-right"},e&&I.a.createElement(zk.a,{onClick:t}),!e&&I.a.createElement(Uk.a,{onClick:a}))))};Wk.displayName="XFlowDefaultGroupNode";var cz=h("VA6q"),fz=h("2BaD"),dz=h("Ue1A"),hz=h("RCxd"),vz=h("+YFz"),pz=h("26re"),gz={fontSize:"16px",color:"#3057e3"},Gv;(function(o){o.SUCCESS="success",o.PROCESSING="processing",o.ERROR="error",o.DEFAULT="default",o.WARNING="warning"})(Gv||(Gv={}));var mz=function(i){if(i.hide)return null;switch(i.status){case Gv.PROCESSING:return I.a.createElement(cz.a,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case Gv.ERROR:return I.a.createElement(fz.a,{style:{color:"#ff4d4f",fontSize:"16px"}});case Gv.SUCCESS:return I.a.createElement(dz.a,{style:{color:"#39ca74cc",fontSize:"16px"}});case Gv.WARNING:return I.a.createElement(hz.a,{style:{color:"#faad14",fontSize:"16px"}});case Gv.DEFAULT:return I.a.createElement(vz.a,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},$k=function(i){var r=I.a.isValidElement(i.data.icon)?i.data.icon:I.a.createElement(pz.a,{style:gz});return I.a.createElement("div",{className:"xflow-default-node ".concat(i.isNodeTreePanel?"panel-node":"")},I.a.createElement("span",{className:"icon"},r),I.a.createElement("span",{className:"label"},i.data.label),I.a.createElement("span",{className:"status"},I.a.createElement(mz,{status:i.data&&i.data.status,hide:i.isNodeTreePanel})))};$k.displayName="XFlowDefaultNode";var ag;(function(o){o.CONFIG_TYPE="GraphConfig",o.defaultNodeTypeParser=function(i){return i.renderKey},o.defaultEdgeTypeParser=function(i){return i.renderKey},o.defaultNodeMapValue=[[z1,$k],[Fk,Wk]]})(ag||(ag={}));var Kk=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.CONFIG_TYPE=ag.CONFIG_TYPE,this.x6Options=new dl,this.rootContainer=new dl,this.graphContainer=new dl,this.nodeRender=new Map(ag.defaultNodeMapValue),this.edgeRender=new Map,this.nodeTypeParser=ag.defaultNodeTypeParser,this.edgeTypeParser=ag.defaultEdgeTypeParser,this.events=[],this.mergeX6Config=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.getX6Config();case 2:return e=a.sent,a.abrupt("return",Object.assign(e,r));case 4:case"end":return a.stop()}},n,this)}))},this.getX6Config=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x6Options.promise;case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},r,this)}))},this.setX6Config=function(r){var n,e=i.getDefaultGraphOptions();(n=i.x6Options)===null||n===void 0||n.resolve(Object.assign(Object.assign({},e),r))},this.setAppContainer=function(r){i.appContainer=r},this.setRootContainer=function(r){r&&(i==null||i.rootContainer.resolve(r))},this.setGraphContainer=function(r){var n;r&&((n=i.graphContainer)===null||n===void 0||n.resolve(r))},this.setEvents=function(r){i.events=r},this.setDefaultNodeRender=function(r){i.nodeRender.set(z1,r)},this.setDefaultEdgeRender=function(r){i.edgeRender.set(TS,r)},this.setNodeRender=function(r,n){i.nodeRender.set(r,n)},this.setEdgeRender=function(r,n){i.edgeRender.set(r,n)},this.setNodeTypeParser=function(r){i.nodeTypeParser=r},this.setEdgeTypeParser=function(r){i.edgeTypeParser=r},this.getConfig=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Promise.all([this.rootContainer.promise,this.graphContainer.promise,this.x6Options.promise]);case 2:return n=c.sent,e=Object(je.a)(n,3),t=e[0],a=e[1],s=e[2],u={xflowInstanceId:this.xflowInstanceId,graphId:this.graphId,nodeViewId:this.graphId,appContainer:this.appContainer,rootContainer:t,graphContainer:a,x6Options:s,events:this.events,nodeRender:this.nodeRender,edgeRender:this.edgeRender,nodeTypeParser:this.nodeTypeParser,edgeTypeParser:this.edgeTypeParser},c.abrupt("return",u);case 9:case"end":return c.stop()}},r,this)}))},this.getDefaultGraphOptions=function(){var r={rotating:!1,resizing:!1,connecting:{snap:!0,dangling:!1,highlight:!1,connectionPoint:"rect",router:{name:"er"},connector:{name:"rounded",args:{radius:15}}},background:{},grid:{visible:!0},selecting:{strict:!0,enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},snapline:{enabled:!1},history:{enabled:!1},clipboard:{enabled:!0,useLocalStorage:!0},scroller:{enabled:!1},mousewheel:{enabled:!0,minScale:AS,maxScale:MS,factor:1.1,modifiers:["ctrl","meta"]},panning:{enabled:!0},scaling:{min:AS,max:MS},keyboard:{enabled:!0},interacting:{nodeMovable:!0,edgeLabelMovable:!1},async:!1};return r},this.dispose=function(){i.rootContainer=new dl,i.graphContainer=new dl,i.x6Options=new dl},this.graphId=$c()}),C0=Symbol("IGraphOptionProvider"),yz=function(i,r){i(C0,{lifecycle:he.Syringe.Lifecycle.singleton,useDynamic:function(){return{getOptions:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r.getConfig());case 1:case"end":return s.stop()}},t)}))}}}})},Xk=function(i){return function(r){var n=I.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=I.a.useMemo(function(){var t=new Kk;return i(t,n),t},[n]);return e}},bz=function(){return Array.isArray||function(o){return o&&typeof o.length=="number"}}();function Yk(o){return o!==null&&typeof o=="object"}function kS(o){return typeof o=="function"}var Cz=function(){function o(i){return Error.call(this),this.message=i?i.length+` errors occurred during unsubscription:
`+i.map(function(r,n){return n+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=i,this}return o.prototype=Object.create(Error.prototype),o}(),U1=Cz,ig=function(){function o(i){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,i&&(this._ctorUnsubscribe=!0,this._unsubscribe=i)}return o.prototype.unsubscribe=function(){var i;if(!this.closed){var r=this,n=r._parentOrParents,e=r._ctorUnsubscribe,t=r._unsubscribe,a=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof o)n.remove(this);else if(n!==null)for(var s=0;s<n.length;++s){var u=n[s];u.remove(this)}if(kS(t)){e&&(this._unsubscribe=void 0);try{t.call(this)}catch(f){i=f instanceof U1?Jk(f.errors):[f]}}if(bz(a))for(var s=-1,l=a.length;++s<l;){var c=a[s];if(Yk(c))try{c.unsubscribe()}catch(d){i=i||[],d instanceof U1?i=i.concat(Jk(d.errors)):i.push(d)}}if(i)throw new U1(i)}},o.prototype.add=function(i){var r=i;if(!i)return o.EMPTY;switch(typeof i){case"function":r=new o(i);case"object":if(r===this||r.closed||typeof r.unsubscribe!="function")return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof o)){var n=r;r=new o,r._subscriptions=[n]}break;default:throw new Error("unrecognized teardown "+i+" added to Subscription.")}var e=r._parentOrParents;if(e===null)r._parentOrParents=this;else if(e instanceof o){if(e===this)return r;r._parentOrParents=[e,this]}else if(e.indexOf(this)===-1)e.push(this);else return r;var t=this._subscriptions;return t===null?this._subscriptions=[r]:t.push(r),r},o.prototype.remove=function(i){var r=this._subscriptions;if(r){var n=r.indexOf(i);n!==-1&&r.splice(n,1)}},o.EMPTY=function(i){return i.closed=!0,i}(new o),o}();function Jk(o){return o.reduce(function(i,r){return i.concat(r instanceof U1?r.errors:r)},[])}var Ez=function(o){nt(i,o);function i(r,n){return o.call(this)||this}return i.prototype.schedule=function(r,n){return n===void 0&&(n=0),this},i}(ig),Oz=function(o){nt(i,o);function i(r,n){var e=o.call(this,r,n)||this;return e.scheduler=r,e.work=n,e.pending=!1,e}return i.prototype.schedule=function(r,n){if(n===void 0&&(n=0),this.closed)return this;this.state=r;var e=this.id,t=this.scheduler;return e!=null&&(this.id=this.recycleAsyncId(t,e,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(t,this.id,n),this},i.prototype.requestAsyncId=function(r,n,e){return e===void 0&&(e=0),setInterval(r.flush.bind(r,this),e)},i.prototype.recycleAsyncId=function(r,n,e){if(e===void 0&&(e=0),e!==null&&this.delay===e&&this.pending===!1)return n;clearInterval(n)},i.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var e=this._execute(r,n);if(e)return e;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(r,n){var e=!1,t=void 0;try{this.work(r)}catch(a){e=!0,t=!!a&&a||new Error(a)}if(e)return this.unsubscribe(),t},i.prototype._unsubscribe=function(){var r=this.id,n=this.scheduler,e=n.actions,t=e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,t!==-1&&e.splice(t,1),r!=null&&(this.id=this.recycleAsyncId(n,r,null)),this.delay=null},i}(Ez),Zk=function(){function o(i,r){r===void 0&&(r=o.now),this.SchedulerAction=i,this.now=r}return o.prototype.schedule=function(i,r,n){return r===void 0&&(r=0),new this.SchedulerAction(this,i).schedule(n,r)},o.now=function(){return Date.now()},o}(),wz=function(o){nt(i,o);function i(r,n){n===void 0&&(n=Zk.now);var e=o.call(this,r,function(){return i.delegate&&i.delegate!==e?i.delegate.now():n()})||this;return e.actions=[],e.active=!1,e.scheduled=void 0,e}return i.prototype.schedule=function(r,n,e){return n===void 0&&(n=0),i.delegate&&i.delegate!==this?i.delegate.schedule(r,n,e):o.prototype.schedule.call(this,r,n,e)},i.prototype.flush=function(r){var n=this.actions;if(this.active){n.push(r);return}var e;this.active=!0;do if(e=r.execute(r.state,r.delay))break;while(r=n.shift());if(this.active=!1,e){for(;r=n.shift();)r.unsubscribe();throw e}},i}(Zk),Qk=new wz(Oz),xz=Qk,DS=!1,Kc={Promise:void 0,set useDeprecatedSynchronousErrorHandling(o){if(o){var i=new Error;""+i.stack}DS=o},get useDeprecatedSynchronousErrorHandling(){return DS}};function og(o){setTimeout(function(){throw o},0)}var V1={closed:!0,next:function(i){},error:function(i){if(Kc.useDeprecatedSynchronousErrorHandling)throw i;og(i)},complete:function(){}},E0=function(){return typeof Symbol=="function"?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),tq=E0,Fl=function(o){nt(i,o);function i(r,n,e){var t=o.call(this)||this;switch(t.syncErrorValue=null,t.syncErrorThrown=!1,t.syncErrorThrowable=!1,t.isStopped=!1,arguments.length){case 0:t.destination=V1;break;case 1:if(!r){t.destination=V1;break}if(typeof r=="object"){r instanceof i?(t.syncErrorThrowable=r.syncErrorThrowable,t.destination=r,r.add(t)):(t.syncErrorThrowable=!0,t.destination=new qk(t,r));break}default:t.syncErrorThrowable=!0,t.destination=new qk(t,r,n,e);break}return t}return i.prototype[E0]=function(){return this},i.create=function(r,n,e){var t=new i(r,n,e);return t.syncErrorThrowable=!1,t},i.prototype.next=function(r){this.isStopped||this._next(r)},i.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this))},i.prototype._next=function(r){this.destination.next(r)},i.prototype._error=function(r){this.destination.error(r),this.unsubscribe()},i.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},i.prototype._unsubscribeAndRecycle=function(){var r=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=r,this},i}(ig),qk=function(o){nt(i,o);function i(r,n,e,t){var a=o.call(this)||this;a._parentSubscriber=r;var s,u=a;return kS(n)?s=n:n&&(s=n.next,e=n.error,t=n.complete,n!==V1&&(u=Object.create(n),kS(u.unsubscribe)&&a.add(u.unsubscribe.bind(u)),u.unsubscribe=a.unsubscribe.bind(a))),a._context=u,a._next=s,a._error=e,a._complete=t,a}return i.prototype.next=function(r){if(!this.isStopped&&this._next){var n=this._parentSubscriber;!Kc.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?this.__tryOrUnsub(this._next,r):this.__tryOrSetError(n,this._next,r)&&this.unsubscribe()}},i.prototype.error=function(r){if(!this.isStopped){var n=this._parentSubscriber,e=Kc.useDeprecatedSynchronousErrorHandling;if(this._error)!e||!n.syncErrorThrowable?(this.__tryOrUnsub(this._error,r),this.unsubscribe()):(this.__tryOrSetError(n,this._error,r),this.unsubscribe());else if(n.syncErrorThrowable)e?(n.syncErrorValue=r,n.syncErrorThrown=!0):og(r),this.unsubscribe();else{if(this.unsubscribe(),e)throw r;og(r)}}},i.prototype.complete=function(){var r=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var e=function(){return r._complete.call(r._context)};!Kc.useDeprecatedSynchronousErrorHandling||!n.syncErrorThrowable?(this.__tryOrUnsub(e),this.unsubscribe()):(this.__tryOrSetError(n,e),this.unsubscribe())}else this.unsubscribe()}},i.prototype.__tryOrUnsub=function(r,n){try{r.call(this._context,n)}catch(e){if(this.unsubscribe(),Kc.useDeprecatedSynchronousErrorHandling)throw e;og(e)}},i.prototype.__tryOrSetError=function(r,n,e){if(!Kc.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,e)}catch(t){return Kc.useDeprecatedSynchronousErrorHandling?(r.syncErrorValue=t,r.syncErrorThrown=!0,!0):(og(t),!0)}return!1},i.prototype._unsubscribe=function(){var r=this._parentSubscriber;this._context=null,this._parentSubscriber=null,r.unsubscribe()},i}(Fl);function Sz(o){for(;o;){var i=o,r=i.closed,n=i.destination,e=i.isStopped;if(r||e)return!1;n&&n instanceof Fl?o=n:o=null}return!0}function Az(o,i,r){if(o){if(o instanceof Fl)return o;if(o[E0])return o[E0]()}return!o&&!i&&!r?new Fl(V1):new Fl(o,i,r)}var IS=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Mz(o){return o}function nq(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];return eD(o)}function eD(o){return o.length===0?Mz:o.length===1?o[0]:function(r){return o.reduce(function(n,e){return e(n)},r)}}var RS=function(){function o(i){this._isScalar=!1,i&&(this._subscribe=i)}return o.prototype.lift=function(i){var r=new o;return r.source=this,r.operator=i,r},o.prototype.subscribe=function(i,r,n){var e=this.operator,t=Az(i,r,n);if(e?t.add(e.call(t,this.source)):t.add(this.source||Kc.useDeprecatedSynchronousErrorHandling&&!t.syncErrorThrowable?this._subscribe(t):this._trySubscribe(t)),Kc.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable&&(t.syncErrorThrowable=!1,t.syncErrorThrown))throw t.syncErrorValue;return t},o.prototype._trySubscribe=function(i){try{return this._subscribe(i)}catch(r){Kc.useDeprecatedSynchronousErrorHandling&&(i.syncErrorThrown=!0,i.syncErrorValue=r),Sz(i)?i.error(r):console.warn(r)}},o.prototype.forEach=function(i,r){var n=this;return r=tD(r),new r(function(e,t){var a;a=n.subscribe(function(s){try{i(s)}catch(u){t(u),a&&a.unsubscribe()}},t,e)})},o.prototype._subscribe=function(i){var r=this.source;return r&&r.subscribe(i)},o.prototype[IS]=function(){return this},o.prototype.pipe=function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return i.length===0?this:eD(i)(this)},o.prototype.toPromise=function(i){var r=this;return i=tD(i),new i(function(n,e){var t;r.subscribe(function(a){return t=a},function(a){return e(a)},function(){return n(t)})})},o.create=function(i){return new o(i)},o}();function tD(o){if(o||(o=Kc.Promise||Promise),!o)throw new Error("no Promise impl found");return o}var Tz=function(){function o(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return o.prototype=Object.create(Error.prototype),o}(),sg=Tz,Pz=function(o){nt(i,o);function i(r,n){var e=o.call(this)||this;return e.subject=r,e.subscriber=n,e.closed=!1,e}return i.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var r=this.subject,n=r.observers;if(this.subject=null,!(!n||n.length===0||r.isStopped||r.closed)){var e=n.indexOf(this.subscriber);e!==-1&&n.splice(e,1)}}},i}(ig),kz=function(o){nt(i,o);function i(r){var n=o.call(this,r)||this;return n.destination=r,n}return i}(Fl),nD=function(o){nt(i,o);function i(){var r=o.call(this)||this;return r.observers=[],r.closed=!1,r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return i.prototype[E0]=function(){return new kz(this)},i.prototype.lift=function(r){var n=new rD(this,this);return n.operator=r,n},i.prototype.next=function(r){if(this.closed)throw new sg;if(!this.isStopped)for(var n=this.observers,e=n.length,t=n.slice(),a=0;a<e;a++)t[a].next(r)},i.prototype.error=function(r){if(this.closed)throw new sg;this.hasError=!0,this.thrownError=r,this.isStopped=!0;for(var n=this.observers,e=n.length,t=n.slice(),a=0;a<e;a++)t[a].error(r);this.observers.length=0},i.prototype.complete=function(){if(this.closed)throw new sg;this.isStopped=!0;for(var r=this.observers,n=r.length,e=r.slice(),t=0;t<n;t++)e[t].complete();this.observers.length=0},i.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},i.prototype._trySubscribe=function(r){if(this.closed)throw new sg;return o.prototype._trySubscribe.call(this,r)},i.prototype._subscribe=function(r){if(this.closed)throw new sg;return this.hasError?(r.error(this.thrownError),ig.EMPTY):this.isStopped?(r.complete(),ig.EMPTY):(this.observers.push(r),new Pz(this,r))},i.prototype.asObservable=function(){var r=new RS;return r.source=this,r},i.create=function(r,n){return new rD(r,n)},i}(RS),rD=function(o){nt(i,o);function i(r,n){var e=o.call(this)||this;return e.destination=r,e.source=n,e}return i.prototype.next=function(r){var n=this.destination;n&&n.next&&n.next(r)},i.prototype.error=function(r){var n=this.destination;n&&n.error&&this.destination.error(r)},i.prototype.complete=function(){var r=this.destination;r&&r.complete&&this.destination.complete()},i.prototype._subscribe=function(r){var n=this.source;return n?this.source.subscribe(r):ig.EMPTY},i}(nD),Dz=function(o){nt(i,o);function i(r){var n=o.call(this)||this;return n._value=r,n}return Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),i.prototype._subscribe=function(r){var n=o.prototype._subscribe.call(this,r);return n&&!n.closed&&r.next(this._value),n},i.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new sg;return this._value},i.prototype.next=function(r){o.prototype.next.call(this,this._value=r)},i}(nD);function Iz(o,i){return function(r){return r.lift(new Rz(o,i))}}var Rz=function(){function o(i,r){this.compare=i,this.keySelector=r}return o.prototype.call=function(i,r){return r.subscribe(new Nz(i,this.compare,this.keySelector))},o}(),Nz=function(o){nt(i,o);function i(r,n,e){var t=o.call(this,r)||this;return t.keySelector=e,t.hasKey=!1,typeof n=="function"&&(t.compare=n),t}return i.prototype.compare=function(r,n){return r===n},i.prototype._next=function(r){var n;try{var e=this.keySelector;n=e?e(r):r}catch(s){return this.destination.error(s)}var t=!1;if(this.hasKey)try{var a=this.compare;t=a(this.key,n)}catch(s){return this.destination.error(s)}else this.hasKey=!0;t||(this.key=n,this.destination.next(r))},i}(Fl);function jz(o,i){return function(n){return n.lift(new Lz(o,i))}}var Lz=function(){function o(i,r){this.predicate=i,this.thisArg=r}return o.prototype.call=function(i,r){return r.subscribe(new _z(i,this.predicate,this.thisArg))},o}(),_z=function(o){nt(i,o);function i(r,n,e){var t=o.call(this,r)||this;return t.predicate=n,t.thisArg=e,t.count=0,t}return i.prototype._next=function(r){var n;try{n=this.predicate.call(this.thisArg,r,this.count++)}catch(e){this.destination.error(e);return}n&&this.destination.next(r)},i}(Fl),Fz=function(i){return function(r){for(var n=0,e=i.length;n<e&&!r.closed;n++)r.next(i[n]);r.complete()}},Bz=function(i){return function(r){return i.then(function(n){r.closed||(r.next(n),r.complete())},function(n){return r.error(n)}).then(null,og),r}};function Gz(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var NS=Gz(),rq=NS,zz=function(i){return function(r){var n=i[NS]();do{var e=void 0;try{e=n.next()}catch(t){return r.error(t),r}if(e.done){r.complete();break}if(r.next(e.value),r.closed)break}while(!0);return typeof n.return=="function"&&r.add(function(){n.return&&n.return()}),r}},Uz=function(i){return function(r){var n=i[IS]();if(typeof n.subscribe!="function")throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(r)}},Vz=function(i){return i&&typeof i.length=="number"&&typeof i!="function"};function Hz(o){return!!o&&typeof o.subscribe!="function"&&typeof o.then=="function"}var Wz=function(i){if(!!i&&typeof i[IS]=="function")return Uz(i);if(Vz(i))return Fz(i);if(Hz(i))return Bz(i);if(!!i&&typeof i[NS]=="function")return zz(i);var r=Yk(i)?"an invalid object":"'"+i+"'",n="You provided "+r+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)},$z=function(o){nt(i,o);function i(r){var n=o.call(this)||this;return n.parent=r,n}return i.prototype._next=function(r){this.parent.notifyNext(r)},i.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},i.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},i}(Fl),aq=function(o){nt(i,o);function i(r,n,e){var t=o.call(this)||this;return t.parent=r,t.outerValue=n,t.outerIndex=e,t}return i.prototype._next=function(r){this.parent.notifyNext(this.outerValue,r,this.outerIndex,this)},i.prototype._error=function(r){this.parent.notifyError(r),this.unsubscribe()},i.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},i}(Fl),Kz=function(o){nt(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return i.prototype.notifyNext=function(r){this.destination.next(r)},i.prototype.notifyError=function(r){this.destination.error(r)},i.prototype.notifyComplete=function(){this.destination.complete()},i}(Fl),iq=function(o){nt(i,o);function i(){return o!==null&&o.apply(this,arguments)||this}return i.prototype.notifyNext=function(r,n,e,t){this.destination.next(n)},i.prototype.notifyError=function(r){this.destination.error(r)},i.prototype.notifyComplete=function(r){this.destination.complete()},i}(Fl);function Xz(o,i){if(!i.closed){if(o instanceof RS)return o.subscribe(i);var r;try{r=Wz(o)(i)}catch(n){i.error(n)}return r}}var aD={leading:!0,trailing:!1};function oq(o,i){return i===void 0&&(i=aD),function(r){return r.lift(new Yz(o,!!i.leading,!!i.trailing))}}var Yz=function(){function o(i,r,n){this.durationSelector=i,this.leading=r,this.trailing=n}return o.prototype.call=function(i,r){return r.subscribe(new Jz(i,this.durationSelector,this.leading,this.trailing))},o}(),Jz=function(o){nt(i,o);function i(r,n,e,t){var a=o.call(this,r)||this;return a.destination=r,a.durationSelector=n,a._leading=e,a._trailing=t,a._hasValue=!1,a}return i.prototype._next=function(r){this._hasValue=!0,this._sendValue=r,this._throttled||(this._leading?this.send():this.throttle(r))},i.prototype.send=function(){var r=this,n=r._hasValue,e=r._sendValue;n&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},i.prototype.throttle=function(r){var n=this.tryDurationSelector(r);n&&this.add(this._throttled=Xz(n,new $z(this)))},i.prototype.tryDurationSelector=function(r){try{return this.durationSelector(r)}catch(n){return this.destination.error(n),null}},i.prototype.throttlingDone=function(){var r=this,n=r._throttled,e=r._trailing;n&&n.unsubscribe(),this._throttled=void 0,e&&this.send()},i.prototype.notifyNext=function(){this.throttlingDone()},i.prototype.notifyComplete=function(){this.throttlingDone()},i}(Kz);function Zz(o,i,r){return i===void 0&&(i=xz),r===void 0&&(r=aD),function(n){return n.lift(new Qz(o,i,r.leading,r.trailing))}}var Qz=function(){function o(i,r,n,e){this.duration=i,this.scheduler=r,this.leading=n,this.trailing=e}return o.prototype.call=function(i,r){return r.subscribe(new qz(i,this.duration,this.scheduler,this.leading,this.trailing))},o}(),qz=function(o){nt(i,o);function i(r,n,e,t,a){var s=o.call(this,r)||this;return s.duration=n,s.scheduler=e,s.leading=t,s.trailing=a,s._hasTrailingValue=!1,s._trailingValue=null,s}return i.prototype._next=function(r){this.throttled?this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(eU,this.duration,{subscriber:this})),this.leading?this.destination.next(r):this.trailing&&(this._trailingValue=r,this._hasTrailingValue=!0))},i.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},i.prototype.clearThrottle=function(){var r=this.throttled;r&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),r.unsubscribe(),this.remove(r),this.throttled=null)},i}(Fl);function eU(o){var i=o.subscriber;i.clearThrottle()}function $s(o){for(var i=arguments.length,r=Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];if(!1)var e,t;throw Error("[Immer] minified error nr: "+o+(r.length?" "+r.map(function(a){return"'"+a+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function xd(o){return!!o&&!!o[Si]}function jf(o){var i;return!!o&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var e=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return e===Object||typeof e=="function"&&Function.toString.call(e)===uU}(o)||Array.isArray(o)||!!o[S0]||!!((i=o.constructor)===null||i===void 0?void 0:i[S0])||W1(o)||$1(o))}function sq(o){return xd(o)||$s(23,o),o[Si].t}function Sd(o,i,r){r===void 0&&(r=!1),Oh(o)===0?(r?Object.keys:ug)(o).forEach(function(n){r&&typeof n=="symbol"||i(n,o[n],o)}):o.forEach(function(n,e){return i(e,n,o)})}function Oh(o){var i=o[Si];return i?i.i>3?i.i-4:i.i:Array.isArray(o)?1:W1(o)?2:$1(o)?3:0}function wh(o,i){return Oh(o)===2?o.has(i):Object.prototype.hasOwnProperty.call(o,i)}function H1(o,i){return Oh(o)===2?o.get(i):o[i]}function iD(o,i,r){var n=Oh(o);n===2?o.set(i,r):n===3?o.add(r):o[i]=r}function oD(o,i){return o===i?o!==0||1/o==1/i:o!=o&&i!=i}function W1(o){return oU&&o instanceof Map}function $1(o){return sU&&o instanceof Set}function Ks(o){return o.o||o.t}function jS(o){if(Array.isArray(o))return Array.prototype.slice.call(o);var i=vD(o);delete i[Si];for(var r=ug(i),n=0;n<r.length;n++){var e=r[n],t=i[e];t.writable===!1&&(t.writable=!0,t.configurable=!0),(t.get||t.set)&&(i[e]={configurable:!0,writable:!0,enumerable:t.enumerable,value:o[e]})}return Object.create(Object.getPrototypeOf(o),i)}function LS(o,i){return i===void 0&&(i=!1),_S(o)||xd(o)||!jf(o)||(Oh(o)>1&&(o.set=o.add=o.clear=o.delete=tU),Object.freeze(o),i&&Sd(o,function(r,n){return LS(n,!0)},!0)),o}function tU(){$s(2)}function _S(o){return o==null||typeof o!="object"||Object.isFrozen(o)}function Lf(o){var i=$S[o];return i||$s(18,o),i}function FS(o,i){$S[o]||($S[o]=i)}function O0(){return x0}function BS(o,i){i&&(Lf("Patches"),o.u=[],o.s=[],o.v=i)}function K1(o){GS(o),o.p.forEach(nU),o.p=null}function GS(o){o===x0&&(x0=o.l)}function sD(o){return x0={p:[],l:x0,h:o,m:!0,_:0}}function nU(o){var i=o[Si];i.i===0||i.i===1?i.j():i.g=!0}function zS(o,i){i._=i.p.length;var r=i.p[0],n=o!==void 0&&o!==r;return i.h.O||Lf("ES5").S(i,o,n),n?(r[Si].P&&(K1(i),$s(4)),jf(o)&&(o=X1(i,o),i.l||Y1(i,o)),i.u&&Lf("Patches").M(r[Si].t,o,i.u,i.s)):o=X1(i,r,[]),K1(i),i.u&&i.v(i.u,i.s),o!==WS?o:void 0}function X1(o,i,r){if(_S(i))return i;var n=i[Si];if(!n)return Sd(i,function(s,u){return uD(o,n,i,s,u,r)},!0),i;if(n.A!==o)return i;if(!n.P)return Y1(o,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var e=n.i===4||n.i===5?n.o=jS(n.k):n.o,t=e,a=!1;n.i===3&&(t=new Set(e),e.clear(),a=!0),Sd(t,function(s,u){return uD(o,n,e,s,u,r,a)}),Y1(o,e,!1),r&&o.u&&Lf("Patches").N(n,r,o.u,o.s)}return n.o}function uD(o,i,r,n,e,t,a){if(xd(e)){var s=X1(o,e,t&&i&&i.i!==3&&!wh(i.R,n)?t.concat(n):void 0);if(iD(r,n,s),!xd(s))return;o.m=!1}else a&&r.add(e);if(jf(e)&&!_S(e)){if(!o.h.D&&o._<1)return;X1(o,e),i&&i.A.l||Y1(o,e)}}function Y1(o,i,r){r===void 0&&(r=!1),!o.l&&o.h.D&&o.m&&LS(i,r)}function US(o,i){var r=o[Si];return(r?Ks(r):o)[i]}function lD(o,i){if(i in o)for(var r=Object.getPrototypeOf(o);r;){var n=Object.getOwnPropertyDescriptor(r,i);if(n)return n;r=Object.getPrototypeOf(r)}}function hl(o){o.P||(o.P=!0,o.l&&hl(o.l))}function VS(o){o.o||(o.o=jS(o.t))}function w0(o,i,r){var n=W1(i)?Lf("MapSet").F(i,r):$1(i)?Lf("MapSet").T(i,r):o.O?function(e,t){var a=Array.isArray(e),s={i:a?1:0,A:t?t.A:O0(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},u=s,l=A0;a&&(u=[s],l=M0);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return s.k=d,s.j=f,d}(i,r):Lf("ES5").J(i,r);return(r?r.A:O0()).p.push(n),n}function rU(o){return xd(o)||$s(22,o),function i(r){if(!jf(r))return r;var n,e=r[Si],t=Oh(r);if(e){if(!e.P&&(e.i<4||!Lf("ES5").K(e)))return e.t;e.I=!0,n=cD(r,t),e.I=!1}else n=cD(r,t);return Sd(n,function(a,s){e&&H1(e.t,a)===s||iD(n,a,i(s))}),t===3?new Set(n):n}(o)}function cD(o,i){switch(i){case 2:return new Map(o);case 3:return Array.from(o)}return jS(o)}function aU(){function o(a,s){var u=t[a];return u?u.enumerable=s:t[a]=u={configurable:!0,enumerable:s,get:function(){var c=this[Si];return A0.get(c,a)},set:function(c){var f=this[Si];A0.set(f,a,c)}},u}function i(a){for(var s=a.length-1;s>=0;s--){var u=a[s][Si];if(!u.P)switch(u.i){case 5:n(u)&&hl(u);break;case 4:r(u)&&hl(u)}}}function r(a){for(var s=a.t,u=a.k,l=ug(u),c=l.length-1;c>=0;c--){var f=l[c];if(f!==Si){var d=s[f];if(d===void 0&&!wh(s,f))return!0;var v=u[f],m=v&&v[Si];if(m?m.t!==d:!oD(v,d))return!0}}var y=!!s[Si];return l.length!==ug(s).length+(y?0:1)}function n(a){var s=a.k;if(s.length!==a.t.length)return!0;var u=Object.getOwnPropertyDescriptor(s,s.length-1);if(u&&!u.get)return!0;for(var l=0;l<s.length;l++)if(!s.hasOwnProperty(l))return!0;return!1}function e(a){a.g&&$s(3,JSON.stringify(Ks(a)))}var t={};FS("ES5",{J:function(s,u){var l=Array.isArray(s),c=function(d,v){if(d){for(var m=Array(v.length),y=0;y<v.length;y++)Object.defineProperty(m,""+y,o(y,!0));return m}var C=vD(v);delete C[Si];for(var O=ug(C),x=0;x<O.length;x++){var T=O[x];C[T]=o(T,d||!!C[T].enumerable)}return Object.create(Object.getPrototypeOf(v),C)}(l,s),f={i:l?5:4,A:u?u.A:O0(),P:!1,I:!1,R:{},l:u,t:s,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,Si,{value:f,writable:!0}),c},S:function(s,u,l){l?xd(u)&&u[Si].A===s&&i(s.p):(s.u&&function c(f){if(f&&typeof f=="object"){var d=f[Si];if(d){var v=d.t,m=d.k,y=d.R,C=d.i;if(C===4)Sd(m,function(_){_!==Si&&(v[_]!==void 0||wh(v,_)?y[_]||c(m[_]):(y[_]=!0,hl(d)))}),Sd(v,function(_){m[_]!==void 0||wh(m,_)||(y[_]=!1,hl(d))});else if(C===5){if(n(d)&&(hl(d),y.length=!0),m.length<v.length)for(var O=m.length;O<v.length;O++)y[O]=!1;else for(var x=v.length;x<m.length;x++)y[x]=!0;for(var T=Math.min(m.length,v.length),L=0;L<T;L++)m.hasOwnProperty(L)||(y[L]=!0),y[L]===void 0&&c(m[L])}}}}(s.p[0]),i(s.p))},K:function(s){return s.i===4?r(s):n(s)}})}function iU(){function o(n){if(!jf(n))return n;if(Array.isArray(n))return n.map(o);if(W1(n))return new Map(Array.from(n.entries()).map(function(a){return[a[0],o(a[1])]}));if($1(n))return new Set(Array.from(n).map(o));var e=Object.create(Object.getPrototypeOf(n));for(var t in n)e[t]=o(n[t]);return wh(n,S0)&&(e[S0]=n[S0]),e}function i(n){return xd(n)?o(n):n}var r="add";FS("Patches",{$:function(e,t){return t.forEach(function(a){for(var s=a.path,u=a.op,l=e,c=0;c<s.length-1;c++){var f=Oh(l),d=s[c];typeof d!="string"&&typeof d!="number"&&(d=""+d),f!==0&&f!==1||d!=="__proto__"&&d!=="constructor"||$s(24),typeof l=="function"&&d==="prototype"&&$s(24),typeof(l=H1(l,d))!="object"&&$s(15,s.join("/"))}var v=Oh(l),m=o(a.value),y=s[s.length-1];switch(u){case"replace":switch(v){case 2:return l.set(y,m);case 3:$s(16);default:return l[y]=m}case r:switch(v){case 1:return y==="-"?l.push(m):l.splice(y,0,m);case 2:return l.set(y,m);case 3:return l.add(m);default:return l[y]=m}case"remove":switch(v){case 1:return l.splice(y,1);case 2:return l.delete(y);case 3:return l.delete(a.value);default:return delete l[y]}default:$s(17,u)}}),e},N:function(e,t,a,s){switch(e.i){case 0:case 4:case 2:return function(u,l,c,f){var d=u.t,v=u.o;Sd(u.R,function(m,y){var C=H1(d,m),O=H1(v,m),x=y?wh(d,m)?"replace":r:"remove";if(C!==O||x!=="replace"){var T=l.concat(m);c.push(x==="remove"?{op:x,path:T}:{op:x,path:T,value:O}),f.push(x===r?{op:"remove",path:T}:x==="remove"?{op:r,path:T,value:i(C)}:{op:"replace",path:T,value:i(C)})}})}(e,t,a,s);case 5:case 1:return function(u,l,c,f){var d=u.t,v=u.R,m=u.o;if(m.length<d.length){var y=[m,d];d=y[0],m=y[1];var C=[f,c];c=C[0],f=C[1]}for(var O=0;O<d.length;O++)if(v[O]&&m[O]!==d[O]){var x=l.concat([O]);c.push({op:"replace",path:x,value:i(m[O])}),f.push({op:"replace",path:x,value:i(d[O])})}for(var T=d.length;T<m.length;T++){var L=l.concat([T]);c.push({op:r,path:L,value:i(m[T])})}d.length<m.length&&f.push({op:"replace",path:l.concat(["length"]),value:d.length})}(e,t,a,s);case 3:return function(u,l,c,f){var d=u.t,v=u.o,m=0;d.forEach(function(y){if(!v.has(y)){var C=l.concat([m]);c.push({op:"remove",path:C,value:y}),f.unshift({op:r,path:C,value:y})}m++}),m=0,v.forEach(function(y){if(!d.has(y)){var C=l.concat([m]);c.push({op:r,path:C,value:y}),f.unshift({op:"remove",path:C,value:y})}m++})}(e,t,a,s)}},M:function(e,t,a,s){a.push({op:"replace",path:[],value:t===WS?void 0:t}),s.push({op:"replace",path:[],value:e})}})}function fD(){function o(s,u){function l(){this.constructor=s}e(s,u),s.prototype=(l.prototype=u.prototype,new l)}function i(s){s.o||(s.R=new Map,s.o=new Map(s.t))}function r(s){s.o||(s.o=new Set,s.t.forEach(function(u){if(jf(u)){var l=w0(s.A.h,u,s);s.p.set(u,l),s.o.add(l)}else s.o.add(u)}))}function n(s){s.g&&$s(3,JSON.stringify(Ks(s)))}var e=function(u,l){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var d in f)f.hasOwnProperty(d)&&(c[d]=f[d])})(u,l)},t=function(){function s(l,c){return this[Si]={i:2,l:c,A:c?c.A:O0(),P:!1,I:!1,o:void 0,R:void 0,t:l,k:this,C:!1,g:!1},this}o(s,Map);var u=s.prototype;return Object.defineProperty(u,"size",{get:function(){return Ks(this[Si]).size}}),u.has=function(l){return Ks(this[Si]).has(l)},u.set=function(l,c){var f=this[Si];return n(f),Ks(f).has(l)&&Ks(f).get(l)===c||(i(f),hl(f),f.R.set(l,!0),f.o.set(l,c),f.R.set(l,!0)),this},u.delete=function(l){if(!this.has(l))return!1;var c=this[Si];return n(c),i(c),hl(c),c.t.has(l)?c.R.set(l,!1):c.R.delete(l),c.o.delete(l),!0},u.clear=function(){var l=this[Si];n(l),Ks(l).size&&(i(l),hl(l),l.R=new Map,Sd(l.t,function(c){l.R.set(c,!1)}),l.o.clear())},u.forEach=function(l,c){var f=this;Ks(this[Si]).forEach(function(d,v){l.call(c,f.get(v),v,f)})},u.get=function(l){var c=this[Si];n(c);var f=Ks(c).get(l);if(c.I||!jf(f)||f!==c.t.get(l))return f;var d=w0(c.A.h,f,c);return i(c),c.o.set(l,d),d},u.keys=function(){return Ks(this[Si]).keys()},u.values=function(){var l,c=this,f=this.keys();return(l={})[J1]=function(){return c.values()},l.next=function(){var d=f.next();return d.done?d:{done:!1,value:c.get(d.value)}},l},u.entries=function(){var l,c=this,f=this.keys();return(l={})[J1]=function(){return c.entries()},l.next=function(){var d=f.next();if(d.done)return d;var v=c.get(d.value);return{done:!1,value:[d.value,v]}},l},u[J1]=function(){return this.entries()},s}(),a=function(){function s(l,c){return this[Si]={i:3,l:c,A:c?c.A:O0(),P:!1,I:!1,o:void 0,t:l,k:this,p:new Map,g:!1,C:!1},this}o(s,Set);var u=s.prototype;return Object.defineProperty(u,"size",{get:function(){return Ks(this[Si]).size}}),u.has=function(l){var c=this[Si];return n(c),c.o?!!c.o.has(l)||!(!c.p.has(l)||!c.o.has(c.p.get(l))):c.t.has(l)},u.add=function(l){var c=this[Si];return n(c),this.has(l)||(r(c),hl(c),c.o.add(l)),this},u.delete=function(l){if(!this.has(l))return!1;var c=this[Si];return n(c),r(c),hl(c),c.o.delete(l)||!!c.p.has(l)&&c.o.delete(c.p.get(l))},u.clear=function(){var l=this[Si];n(l),Ks(l).size&&(r(l),hl(l),l.o.clear())},u.values=function(){var l=this[Si];return n(l),r(l),l.o.values()},u.entries=function(){var l=this[Si];return n(l),r(l),l.o.entries()},u.keys=function(){return this.values()},u[J1]=function(){return this.values()},u.forEach=function(l,c){for(var f=this.values(),d=f.next();!d.done;)l.call(c,d.value,d.value,this),d=f.next()},s}();FS("MapSet",{F:function(u,l){return new t(u,l)},T:function(u,l){return new a(u,l)}})}function uq(){aU(),fD(),iU()}function lq(o){return o}function cq(o){return o}var dD,x0,HS=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",oU=typeof Map!="undefined",sU=typeof Set!="undefined",hD=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",WS=HS?Symbol.for("immer-nothing"):((dD={})["immer-nothing"]=!0,dD),S0=HS?Symbol.for("immer-draftable"):"__$immer_draftable",Si=HS?Symbol.for("immer-state"):"__$immer_state",J1=typeof Symbol!="undefined"&&Symbol.iterator||"@@iterator",fq={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(i){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+i},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(i){return"Cannot apply patch, path doesn't resolve: "+i},16:'Sets cannot have "replace" patches.',17:function(i){return"Unsupported patch operation: "+i},18:function(i){return"The plugin for '"+i+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+i+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(i){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+i+"'"},22:function(i){return"'current' expects a draft, got: "+i},23:function(i){return"'original' expects a draft, got: "+i},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},uU=""+Object.prototype.constructor,ug=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(o){return Object.getOwnPropertyNames(o).concat(Object.getOwnPropertySymbols(o))}:Object.getOwnPropertyNames,vD=Object.getOwnPropertyDescriptors||function(o){var i={};return ug(o).forEach(function(r){i[r]=Object.getOwnPropertyDescriptor(o,r)}),i},$S={},A0={get:function(i,r){if(r===Si)return i;var n=Ks(i);if(!wh(n,r))return function(t,a,s){var u,l=lD(a,s);return l?"value"in l?l.value:(u=l.get)===null||u===void 0?void 0:u.call(t.k):void 0}(i,n,r);var e=n[r];return i.I||!jf(e)?e:e===US(i.t,r)?(VS(i),i.o[r]=w0(i.A.h,e,i)):e},has:function(i,r){return r in Ks(i)},ownKeys:function(i){return Reflect.ownKeys(Ks(i))},set:function(i,r,n){var e=lD(Ks(i),r);if(e==null?void 0:e.set)return e.set.call(i.k,n),!0;if(!i.P){var t=US(Ks(i),r),a=t==null?void 0:t[Si];if(a&&a.t===n)return i.o[r]=n,i.R[r]=!1,!0;if(oD(n,t)&&(n!==void 0||wh(i.t,r)))return!0;VS(i),hl(i)}return i.o[r]===n&&(n!==void 0||r in i.o)||Number.isNaN(n)&&Number.isNaN(i.o[r])||(i.o[r]=n,i.R[r]=!0),!0},deleteProperty:function(i,r){return US(i.t,r)!==void 0||r in i.t?(i.R[r]=!1,VS(i),hl(i)):delete i.R[r],i.o&&delete i.o[r],!0},getOwnPropertyDescriptor:function(i,r){var n=Ks(i),e=Reflect.getOwnPropertyDescriptor(n,r);return e&&{writable:!0,configurable:i.i!==1||r!=="length",enumerable:e.enumerable,value:n[r]}},defineProperty:function(){$s(11)},getPrototypeOf:function(i){return Object.getPrototypeOf(i.t)},setPrototypeOf:function(){$s(12)}},M0={};Sd(A0,function(o,i){M0[o]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),M0.deleteProperty=function(o,i){return M0.set.call(this,o,i,void 0)},M0.set=function(o,i,r){return A0.set.call(this,o[0],i,r,o[0])};var lU=function(){function o(r){var n=this;this.O=hD,this.D=!0,this.produce=function(e,t,a){if(typeof e=="function"&&typeof t!="function"){var s=t;t=e;var u=n;return function(y){var C=this;y===void 0&&(y=s);for(var O=arguments.length,x=Array(O>1?O-1:0),T=1;T<O;T++)x[T-1]=arguments[T];return u.produce(y,function(L){var _;return(_=t).call.apply(_,[C,L].concat(x))})}}var l;if(typeof t!="function"&&$s(6),a!==void 0&&typeof a!="function"&&$s(7),jf(e)){var c=sD(n),f=w0(n,e,void 0),d=!0;try{l=t(f),d=!1}finally{d?K1(c):GS(c)}return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(y){return BS(c,a),zS(y,c)},function(y){throw K1(c),y}):(BS(c,a),zS(l,c))}if(!e||typeof e!="object"){if((l=t(e))===void 0&&(l=e),l===WS&&(l=void 0),n.D&&LS(l,!0),a){var v=[],m=[];Lf("Patches").M(e,l,v,m),a(v,m)}return l}$s(21,e)},this.produceWithPatches=function(e,t){if(typeof e=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return n.produceWithPatches(l,function(v){return e.apply(void 0,[v].concat(f))})};var a,s,u=n.produce(e,t,function(l,c){a=l,s=c});return typeof Promise!="undefined"&&u instanceof Promise?u.then(function(l){return[l,a,s]}):[u,a,s]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var i=o.prototype;return i.createDraft=function(r){jf(r)||$s(8),xd(r)&&(r=rU(r));var n=sD(this),e=w0(this,r,void 0);return e[Si].C=!0,GS(n),e},i.finishDraft=function(r,n){var e=r&&r[Si],t=e.A;return BS(t,n),zS(void 0,t)},i.setAutoFreeze=function(r){this.D=r},i.setUseProxies=function(r){r&&!hD&&$s(20),this.O=r},i.applyPatches=function(r,n){var e;for(e=n.length-1;e>=0;e--){var t=n[e];if(t.path.length===0&&t.op==="replace"){r=t.value;break}}e>-1&&(n=n.slice(e+1));var a=Lf("Patches").$;return xd(r)?a(r,n):this.produce(r,function(s){return a(s,n)})},o}(),Bl=new lU,pD=Bl.produce,dq=Bl.produceWithPatches.bind(Bl),cU=Bl.setAutoFreeze.bind(Bl),hq=Bl.setUseProxies.bind(Bl),vq=Bl.applyPatches.bind(Bl),fU=Bl.createDraft.bind(Bl),dU=Bl.finishDraft.bind(Bl),pq=pD;fD(),cU(!1);var Xc;(function(o){o.EMPTY_VALUE=Symbol("EMPTY_MODEL_VALUE");function i(n){return n!==o.EMPTY_VALUE}o.isValidValue=i;function r(n){return n.pipe(Iz(),jz(function(e){return i(e)}),Zz(17,Qk,{leading:!1,trailing:!0}))}o.defaultPipeFunction=r})(Xc||(Xc={}));var zv=Object(ue.a)(function o(){var i=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xc.EMPTY_VALUE,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:30;Object(me.a)(this,o),this.toDispose=new Bi,this.watch=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xc.defaultPipeFunction;i.subject$.observers.length+1>i.maxSubscription&&console.warn("".concat(i.subject$," reach maxSubscription limitation, please check"));var a=t?t(i.subject$):i.subject$,s=a.subscribe(e);return ra.create(function(){s.unsubscribe()})},this.getValue=function(){return i.subject$.getValue()},this.setValue=function(e){if(!!i.subject$){if(typeof e=="function"){var t=i.subject$.getValue(),a=pD(t,function(s){e(s)});Xc.isValidValue(a)&&i.setValue(a);return}i.subject$.next(e)}},this.hasValidValue=function(){var e=i.getValue();return Xc.isValidValue(e)},this.getValidValue=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function e(){var t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=new dl,!this.hasValidValue()){u.next=3;break}return u.abrupt("return",this.getValue());case 3:return a=this.watch(function(l){Xc.isValidValue(l)&&(t.resolve(l),a.dispose())}),u.abrupt("return",t.promise);case 5:case"end":return u.stop()}},e,this)}))},this.dispose=function(){i.toDispose.dispose()},this.subject$=new Dz(r||Xc.EMPTY_VALUE),this.maxSubscription=n,this.toDispose.push(ra.create(function(){i.subject$.complete(),i.subject$.unsubscribe(),i.subject$=null}))}),xh=he.Syringe.defineToken("IFrontendApplicationContribution"),Uv=Symbol("IGraphCommandService"),gi=he.Syringe.defineToken("ICommandHandler"),mi=Symbol("ICommandContextProvider"),KS=Symbol("IGraphCommandFactory"),Z1=he.Syringe.defineToken("IGraphCommandContribution"),XS;(function(o){function i(e){return!!e&&e===Object(e)&&"id"in e}o.is=i;function r(e,t){if(e.label&&t.label){var a=(e.category?"".concat(e.category,": ").concat(e.label):e.label).toLowerCase(),s=(t.category?"".concat(t.category,": ").concat(t.label):t.label).toLowerCase();return a.localeCompare(s)}else return 0}o.compareCommands=r;function n(e,t){return e.id===t.id&&e.label===t.label&&e.iconName===t.iconName&&e.category===t.category}o.equals=n})(XS||(XS={}));var YS=function(){function o(i){var r=this;Object(me.a)(this,o),this.contributionProvider=i,this.redoStack=[],this.undoStack=[],this.commands=new Map,this.factories=new Map,this.disposables=new Map,this.cmdChangeEvent=new zv(null),this.Globals=new zv(new Map),this.setGlobal=function(n,e){r.Globals.setValue(function(t){t.set(n,e)})},this.getGlobal=function(n){var e=r.Globals.getValue();return e.get(n)},this.undoCommand=function(){return pe(r,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=this.undoStack.pop(),e){a.next=4;break}return console.error("empty undo stack"),a.abrupt("return");case 4:return a.next=6,e.undo();case 6:this.redoStack.push(e),this.cmdChangeEvent.setValue(null);case 8:case"end":return a.stop()}},n,this)}))},this.redoCommand=function(){return pe(r,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=this.redoStack.pop(),e){a.next=4;break}return console.error("empty undo stack"),a.abrupt("return");case 4:return a.next=6,e.redo();case 6:this.undoStack.push(e),this.cmdChangeEvent.setValue(null);case 8:case"end":return a.stop()}},n,this)}))},this.registerDisposableCommand=function(n){var e=new Bi,t={registerCommand:function(s,u){var l=r.registerCommand(s,u);return e.push(l),l}};return n(t),e}}return Object(ue.a)(o,[{key:"watchChange",get:function(){return this.cmdChangeEvent.watch}},{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Bt.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerGraphCommands(this)}}catch(a){n.e(a)}finally{n.f()}}},{key:"executeCommandPipeline",value:function(r){return pe(this,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:e=null,t=Object(Bt.a)(r),v.prev=2,t.s();case 4:if((a=t.n()).done){v.next=17;break}return s=a.value,u=e==null?void 0:e.contextProvider(),v.next=9,s==null?void 0:s.getCommandOption(u);case 9:return l=v.sent,c=l.args,f=l.hooks,v.next=14,this.executeCommand(s==null?void 0:s.commandId,c,f);case 14:e=v.sent;case 15:v.next=4;break;case 17:v.next=22;break;case 19:v.prev=19,v.t0=v.catch(2),t.e(v.t0);case 22:return v.prev=22,t.f(),v.finish(22);case 25:return this.cmdChangeEvent.setValue(null),v.abrupt("return",e);case 27:case"end":return v.stop()}},n,this,[[2,19,22,25]])}))}},{key:"executeCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return pe(this,void 0,void 0,Object(D.a)().mark(function t(){var a,s;return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=this.getFactory(r),!a){l.next=10;break}return l.next=4,a.createCommand(r,n,e);case 4:return s=l.sent,l.next=7,s.execute();case 7:return s.isUndoable()&&this.undoStack.push(s),this.cmdChangeEvent.setValue(null),l.abrupt("return",s);case 10:throw Object.assign(new Error("The command '".concat(r,"' cannot be executed. There are no active handlers available for the command.")),{code:"NO_ACTIVE_HANDLER"});case 11:case"end":return l.stop()}},t,this)}))}},{key:"executeUndoCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return pe(this,void 0,void 0,Object(D.a)().mark(function t(){var a,s;return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=this.getFactory(r),!a){l.next=8;break}return l.next=4,a.createCommand(r,n,e);case 4:return s=l.sent,l.next=7,s.execute();case 7:return l.abrupt("return",s);case 8:throw Object.assign(new Error("The command '".concat(r,"' cannot be executed. There are no active handlers available for the command.")),{code:"NO_ACTIVE_HANDLER"});case 9:case"end":return l.stop()}},t,this)}))}},{key:"createCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return pe(this,void 0,void 0,Object(D.a)().mark(function t(){var a,s;return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(a=this.getFactory(r),!a){l.next=6;break}return l.next=4,a.createCommand(r,n,e);case 4:return s=l.sent,l.abrupt("return",s);case 6:throw Object.assign(new Error("The command '".concat(r,"' cannot be executed. There are no active handlers available for the command.")),{code:"NO_ACTIVE_HANDLER"});case 7:case"end":return l.stop()}},t,this)}))}},{key:"isUndoable",get:function(){return this.undoStack.length>0}},{key:"isRedoable",get:function(){return this.redoStack.length>0}},{key:"hasCommand",value:function(r){return this.commands.has(r)}},{key:"getCommand",value:function(r){return this.commands.get(r)}},{key:"registerCommand",value:function(r,n){var e=this;if(this.factories.has(r.id))return console.warn("A command ".concat(r.id," is already registered.")),ra.NULL;var t=new Bi(this.doRegisterCommand(r),this.registerFactory(r.id,n),ra.create(function(){return e.disposables.delete(r.id)}));return this.disposables.set(r.id,t),t}},{key:"doRegisterCommand",value:function(r){var n=this;return this.commands.set(r.id,r),ra.create(function(){return n.disposables.delete(r.id)})}},{key:"unregisterCommand",value:function(r){var n=XS.is(r)?r.id:r,e=this.disposables.get(n);e&&e.dispose()}},{key:"hasFactory",value:function(r){var n=this.factories.get(r);return!!n}},{key:"getFactory",value:function(r){var n=this.factories.get(r);return n}},{key:"registerFactory",value:function(r,n){var e=this,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.hasFactory(r)&&t===!1&&console.error("cannot register command:",r),this.factories.set(r,n),ra.create(function(){e.factories.delete(r)})}},{key:"getAllFactories",value:function(){return Array.from(this.factories.entries())}}]),o}();YS=$e([Object(he.singleton)({contrib:[xh,Uv]}),jt(0,Object(he.contrib)(Z1)),Be("design:paramtypes",[Object])],YS);var hU=Object(he.Module)(function(o){he.Contribution.register(o,Z1),o(YS)}),Vv=he.Syringe.defineToken("IModelService"),Hv=he.Syringe.defineToken("IModelContribution"),gD=Symbol("IModelOptionProvider"),T0;(function(o){o.ASYNC_SRRIES="ASYNC_SRRIES",o.ASYNC_PARALLEL="ASYNC_PARALLEL"})(T0||(T0={}));var vU=h("xdlL"),pU=h("ZKkB"),gU=h("r5xO"),mU=h.n(gU),lg;(function(o){var i;(function(e){e.INVALID_HOOK_BEFORE="INVALID_HOOK_BEFORE",e.INVALID_HOOK_AFTER="INVALID_HOOK_AFTER",e.INVALID_HOOK_ARGS_LENGTH="INVALID_HOOK_ARGS_LENGTH"})(i=o.ErrorEnum||(o.ErrorEnum={}));var r=function(e){Object(xr.a)(a,e);var t=Object(Sr.a)(a);function a(s,u){var l;Object(me.a)(this,a),Array.isArray(u)&&(u=u.filter(function(v){return!!v}).join(" ")),l=t.call(this,"".concat(s,": ").concat(u)),Error.captureStackTrace&&Error.captureStackTrace(Object(rs.a)(l),a),l.code=s,l.contexts={};for(var c=arguments.length,f=new Array(c>2?c-2:0),d=2;d<c;d++)f[d-2]=arguments[d];return f.forEach(function(v){typeof v=="object"&&Object.entries(v).forEach(function(m){var y=Object(je.a)(m,2),C=y[0],O=y[1];C!=="key"&&O&&(l.contexts[C]=JSON.parse(JSON.stringify(O)))})}),l}return Object(ue.a)(a,[{key:"toString",value:function(){return"".concat(this.code,": ").concat(this.message)}}]),a}(Object(pU.a)(Error));o.HookError=r;var n=function(t,a){for(var s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];return Object(vU.a)(r,[t,a].concat(u))};o.HookBeforeError=function(){return n(i.INVALID_HOOK_BEFORE,["hook require a before dependency but not exist in hookmap"])},o.HookAfterError=function(){return n(i.INVALID_HOOK_AFTER,["hook require a after dependency but not exist in hookmap"])},o.InvalidHookArguments=function(e){return n(i.INVALID_HOOK_ARGS_LENGTH,["hook handlers must have 0 to 2 arguments","but got ".concat(e.handler.length)])}})(lg||(lg={}));var Q1;(function(o){o.normalize=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=Array.isArray(i)?i:[i],e=[];return r.forEach(function(t){e.push(t)}),[].concat(e,Object(We.a)(n)).filter(function(t){return t&&!!t.handler})},o.sort=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,n=[];i.forEach(function(t){if(t.before){if(!r.has(t.before))throw lg.HookBeforeError();var a=[t,r.get(t.before)];n.push(a)}if(t.after){if(!r.has(t.after))throw lg.HookBeforeError();var s=[r.get(t.after),t];n.push(s)}});var e=mU.a.array(i,n);return e}})(Q1||(Q1={}));var yU=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.isResolved=!1,this.isRejected=!1,this.promise=new Promise(function(r,n){i.resolve=function(e){i.isResolved=!0,r(e)},i.reject=function(e){i.isRejected=!0,n(e)}})}),Yc=Object(ue.a)(function o(i){var r=this,n;Object(me.a)(this,o),this.scheduleType=T0.ASYNC_SRRIES,this.hasHook=function(e){return r.hookMap.has(e)},this.getHooks=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=Q1.normalize(e,r.hookMap);return t?Q1.sort(a,r.hookMap):a},this.registerHook=function(e){return r.hookMap.has(e.name)&&console.error("".concat(e.name," is duplicated in hookmap")),r.hookMap.set(e.name,e),{dispose:function(){r.hookMap.delete(e.name)}}},this.call=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s){return pe(r,void 0,void 0,Object(D.a)().mark(function u(){return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",s);case 1:case"end":return c.stop()}},u)}))},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return pe(r,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return u=this.getHooks(a,!0),l=this.schedulers[this.scheduleType],f.abrupt("return",l(e,t,u));case 3:case"end":return f.stop()}},s,this)}))},this.schedulers=(n={},Object(Re.a)(n,T0.ASYNC_SRRIES,function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return pe(r,void 0,void 0,Object(D.a)().mark(function s(){var u,l,c,f,d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:u=t,l=Object(Bt.a)(a),y.prev=2,l.s();case 4:if((c=l.n()).done){y.next=26;break}if(f=c.value,![0,1].includes(f.handler.length)){y.next=10;break}return y.next=9,f.handler.call(this,e);case 9:return y.abrupt("continue",24);case 10:if(!([2].includes(f.handler.length)&&u!==null)){y.next=22;break}return y.next=13,f.handler.call(this,e,u);case 13:if(d=y.sent,d!==null){y.next=19;break}return u=null,y.abrupt("break",26);case 19:if(typeof d!="function"){y.next=22;break}return u=d,y.abrupt("continue",24);case 22:throw v=lg.InvalidHookArguments(f),v;case 24:y.next=4;break;case 26:y.next=31;break;case 28:y.prev=28,y.t0=y.catch(2),l.e(y.t0);case 31:return y.prev=31,l.f(),y.finish(31);case 34:if(!u){y.next=38;break}return y.next=37,u.call(this,e);case 37:return y.abrupt("return",y.sent);case 38:case"end":return y.stop()}},s,this,[[2,28,31,34]])}))}),Object(Re.a)(n,T0.ASYNC_PARALLEL,function(e,t){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return pe(r,void 0,void 0,Object(D.a)().mark(function s(){var u=this,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(l=a.map(function(v){if([0,1].includes(v.handler.length))return v.handler.call(u,e);if([2].includes(v.handler.length))return v.handler.call(u,e,t);throw lg.InvalidHookArguments(v)}),c=new yU,Promise.all(l).then(function(v){return c.resolve(v)}),!t){d.next=7;break}return d.next=6,t.call(this,c);case 6:return d.abrupt("return",d.sent);case 7:case"end":return d.stop()}},s,this)}))}),n),this.hookMap=new Map,i&&i.type&&(this.scheduleType=i.type)}),JS=he.Syringe.defineToken("IHookService"),lc=he.Syringe.defineToken("IHookContribution"),bU=function(){return{graphOptions:new Yc,reactNodeRender:new Yc,reactEdgeLabelRender:new Yc,afterGraphInit:new Yc,beforeGraphDestroy:new Yc,x6Events:new Yc}},mD=function(){return{dispose:function(){}}},ZS;(function(o){o.CONFIG_TYPE="XFlowHook"})(ZS||(ZS={}));var P0=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.CONFIG_TYPE=ZS.CONFIG_TYPE,this.time=Date.now(),this.setRegisterHook=function(r){i.hookRegisterFunc=r},this.setRegisterHookhub=function(r){i.hookhubRegisterFn=r},this.getConfig=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={CONFIG_TYPE:this.CONFIG_TYPE,hookRegisterFn:this.hookRegisterFunc||mD,hookhubRegisterFn:this.hookhubRegisterFn||mD},t.abrupt("return",n);case 2:case"end":return t.stop()}},r,this)}))},this.dispose=function(){}}),q1=function(){function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.hookProvider=function(){return i.hooks},this.registerHook=function(r){return r(i.hooks)},this.registerHookHub=function(r,n){return i.hooks[r]=n,{dispose:function(){delete i.hooks[r]}}},this.onStart=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:n=this.contributionProvider.getContributions(),e=Object(Bt.a)(n);try{for(e.s();!(t=e.n()).done;)a=t.value,a.registerHookHub(this)}catch(d){e.e(d)}finally{e.f()}s=Object(Bt.a)(n);try{for(s.s();!(u=s.n()).done;)l=u.value,l.registerHook(this.hooks)}catch(d){s.e(d)}finally{s.f()}case 5:case"end":return f.stop()}},r,this)}))},this.hooks=bU()}return Object(ue.a)(o,[{key:"onStop",value:function(){this.toDispose.dispose()}}]),o}();$e([Object(he.contrib)(lc),Be("design:type",Object)],q1.prototype,"contributionProvider",void 0),q1=$e([Object(he.singleton)({contrib:[xh,JS]}),Be("design:paramtypes",[])],q1);var yD;(function(o){o.pluginId="GraphEventPlugin"})(yD||(yD={}));var e2=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.hookConfig.getConfig();case 2:return e=u.sent,t=e.hookRegisterFn,a=t(r),u.abrupt("return",ra.create(function(){a.dispose()}));case 6:case"end":return u.stop()}},n,this)}))},this.registerHookHub=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.hookConfig.getConfig();case 2:return e=u.sent,t=e.hookhubRegisterFn,a=t(r),u.abrupt("return",ra.create(function(){a.dispose()}));case 6:case"end":return u.stop()}},n,this)}))}});$e([Object(he.inject)(P0),Be("design:type",P0)],e2.prototype,"hookConfig",void 0),e2=$e([Object(he.singleton)({contrib:lc})],e2);var CU=function(){return null},bD={dispose:CU};function gq(o,i){var r;return function(){clearTimeout(r),r=window.setTimeout(o,i)}}function EU(o){var i;return function(){i||(i=requestAnimationFrame(function(){i=null,o()}))}}var CD=function(i){var r=document.createElement("style");return r.setAttribute("type","text/css"),document.head.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),r};function OU(o){return typeof o=="function"&&!!o.prototype.isReactComponent}function wU(o){return typeof o=="function"&&String(o).includes("return React.createElement")}function t2(o){return OU(o)||wU(o)}var k0;(function(o){o.pluginId="base-graph-events"})(k0||(k0={}));var n2=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.registerHookHub=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ra.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Bi,a=[r.x6Events.registerHook({name:k0.pluginId,handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.graphOptions.getOptions();case 2:d=y.sent,v=d.events,v.forEach(function(C){c.push(C)});case 5:case"end":return y.stop()}},f,this)}))}}),r.afterGraphInit.registerHook({name:k0.pluginId,handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v,m,y,C;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return v=c.commandService,m=c.modelService,y=c.graph,x.next=3,r.x6Events.call([],function(T){return pe(d,void 0,void 0,Object(D.a)().mark(function L(){return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt("return",T.map(function(Q){var q=function(Ce){Q.callback(Ce,v,m,y)};return y.on(Q.eventName,q),{dispose:function(){y.off(Q.eventName,q)}}}));case 1:case"end":return z.stop()}},L)}))});case 3:C=x.sent,t.pushAll(C);case 5:case"end":return x.stop()}},f)}))}}),r.afterGraphInit.registerHook({name:"add auto resize event",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d,v,m,y,C,O;return Object(D.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:d=c.commandService,v=c.options,m=c.graph,y=EU(function(){d.executeCommand(di.GRAPH_RESIZE.id,{})}),window.addEventListener("resize",y),C=v.rootContainer,O=new ResizeObserver(function(){return m.resize(C.clientWidth)}),C&&O.observe(C),t.push(ra.create(function(){window.removeEventListener("resize",y)}));case 7:case"end":return T.stop()}},f)}))}}),r.beforeGraphDestroy.registerHook({name:k0.pluginId,handler:function(){return pe(e,void 0,void 0,Object(D.a)().mark(function c(){return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:t.dispose();case 1:case"end":return d.stop()}},c)}))}})],t.pushAll(a),u.abrupt("return",t);case 4:case"end":return u.stop()}},n)}))}});$e([Object(he.inject)(C0),Be("design:type",Object)],n2.prototype,"graphOptions",void 0),n2=$e([Object(he.singleton)({contrib:lc})],n2);var xU=function(i){return Object(he.Module)(function(r){he.Contribution.register(r,lc),r(e2),r(n2),r(q1),r(P0,{useValue:i})})},Jc=h("LvDl"),SU=function(){function o(){var i=this;Object(me.a)(this,o),this.extensions=[],this.containerClassNames=new Set,this.addCoreModule=function(r){return i.extensions.unshift(r),ra.create(function(){i.removeExtension(r)})},this.addExtension=function(r){return i.extensions.push(r),ra.create(function(){i.removeExtension(r)})},this.getExtension=function(r){return Object(Jc.find)(i.extensions,function(n){return Object(Jc.get)(n,"config.CONFIG_TYPE")===r})},this.removeExtension=function(r){var n=i.extensions.indexOf(r);n>-1&&i.extensions.splice(n,1)},this.getInstanceId=function(){return i.instanceId},this.addContainerClassNames=function(r){return i.containerClassNames.add(r)},this.getContainerClassNames=function(){return Array.from(i.containerClassNames)},this.getAllExtensions=function(){return i.extensions},this.getAllExtensionConfigs=function(){return i.extensions.map(function(r){return r.config})},this.instanceId=$c()}return Object(ue.a)(o,[{key:"has",value:function(r){return this.extensions.some(function(n){return n.config.CONFIG_TYPE===r})}}]),o}(),AU=function(){var i=I.a.useMemo(function(){return new SU},[]);return i},ED=I.a.createContext({}),cc=function(){return I.a.useContext(ED)},MU=function(i){var r=cc(),n=I.a.useMemo(function(){return i.config?i.config:new P0},[]);return I.a.useEffect(function(){var e=r.addCoreModule({config:n,createModule:xU});return function(){e.dispose(),n.dispose()}},[r,n]),null},TU=function(i){return function(r){var n=I.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=I.a.useMemo(function(){var t=new P0;return i(t,n),t},[n]);return e}},QS=I.a.createContext({cell:null,x6Graph:null,commands:null,modelService:null}),OD=function(){return I.a.useContext(QS)};function r2(o,i,r){return function(n){var e=this,t=n==null?void 0:n.getData(),a=n==null?void 0:n.getSize(),s=n==null?void 0:n.getPosition(),u=function(){return I.a.createElement(QS.Provider,{value:{cell:n,x6Graph:e,commands:i,modelService:r}},I.a.createElement(o,{cell:n,data:t,size:a,position:s}))};return I.a.createElement(u,null)}}function PU(o,i,r){return function(n){var e=this,t=n==null?void 0:n.getData(),a=function(){return I.a.createElement(QS.Provider,{value:{cell:n,x6Graph:e,commands:i,modelService:r}},I.a.createElement(o,{data:t,cell:n}))};return I.a.createElement(a,null)}}var mq=function(){var i=I.a.useState(!1),r=Object(je.a)(i,2),n=r[0],e=r[1],t=OD(),a=t.x6Graph,s=t.cell;return I.a.useEffect(function(){var u=function(c){var f=c.added,d=c.removed,v=f.filter(function(y){return y.isNode()}).some(function(y){y.id,s.id});if(v){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!0})),e(!0);return}var m=d.filter(function(y){return y.isNode()}).some(function(y){y.id,s.id});if(m){s.setData(Object.assign(Object.assign({},s.getData()),{isNodeSelected:!1})),e(!1);return}};return a.on("selection:changed",u),function(){a.off("selection:changed",u)}},[a]),[n]},Wv=Symbol("IGraphProvider"),wD=Symbol("ICommandServiceProvider"),xD=Symbol("IModelServiceProvider"),Sh=function(){function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.graphMap=new Map,this.getGraph=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a,s,u,l,c,f,d,v,m,y,C,O,x;return Object(D.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(t=this.graphMap.get(r),t){L.next=31;break}return t=new dl,this.graphMap.set(r,t),L.next=6,this.optionProvider.getOptions();case 6:return a=L.sent,s=this.hookService.hookProvider(),L.next=10,s.graphOptions.call(a.x6Options);case 10:return u=L.sent,l=a.graphContainer,c=a.edgeRender,f=a.nodeRender,d=a.edgeTypeParser,L.next=14,s.reactEdgeLabelRender.call(c);case 14:return v=L.sent,L.next=17,s.reactNodeRender.call(f);case 17:return m=l.clientHeight,y=l.clientWidth,L.next=20,this.commandServiceProvider.getCommandService();case 20:return C=L.sent,L.next=23,this.modelServiceProvider.getModelService();case 23:return O=L.sent,x=new _i(Object.assign(Object.assign({container:l,width:y,height:m},u),{onEdgeLabelRendered:function(z){var Q=z.edge,q=z.container;e.renderEdgeReactLabel({edge:Q,container:q,edgeRenderMap:v,edgeTypeParser:d,modelService:O,commandService:C})}})),L.next=27,s.afterGraphInit.call({graph:x,commandService:C,modelService:O,options:a});case 27:t.resolve(x),x.on("node:moved",function(_){var z=_.node,Q=z.getData(),q=z.position();z.setData(Object.assign(Object.assign({},Q),{x:q==null?void 0:q.x,y:q==null?void 0:q.y}))}),x.on("node:resized",function(_){var z=_.node,Q=z.getData(),q=z.size();z.setData(Object.assign(Object.assign({},Q),{width:q==null?void 0:q.width,height:q==null?void 0:q.height}))}),this.toDispose.push(ra.create(function(){return pe(e,void 0,void 0,Object(D.a)().mark(function _(){return Object(D.a)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,s.beforeGraphDestroy.call({graph:x,commandService:C,modelService:O,options:a});case 2:this.graphMap.delete(r),x.dispose();case 4:case"end":return Q.stop()}},_,this)}))}));case 31:return L.abrupt("return",t.promise);case 32:case"end":return L.stop()}},n,this)}))},this.renderEdgeReactLabel=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u,l,c,f,d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(e=r.container,t=r.edgeTypeParser,a=r.edge,s=r.edgeRenderMap,u=r.commandService,l=r.modelService,c=t(a==null?void 0:a.data)||TS,f=s.get(c),f){y.next=5;break}return y.abrupt("return");case 5:a&&(a==null?void 0:a.data)&&f&&(d=this.edgeAppendForeignObject(a,e),v=PU(f,u,l)(a),Bv.a.render(v,d));case 6:case"end":return y.stop()}},n,this)}))}}return Object(ue.a)(o,[{key:"edgeAppendForeignObject",value:function(r,n){var e=M.createSvgElement("foreignObject"),t=M.createElementNS("body",M.ns.xhtml),a=M.createElementNS("div",M.ns.xhtml),s=r==null?void 0:r.data,u=(s==null?void 0:s.edgeContentWidth)||100,l=(s==null?void 0:s.edgeContentHeight)||30;return e.setAttribute("width","".concat(u)),e.setAttribute("height","".concat(l)),e.setAttribute("x","".concat(-1*u/2)),e.setAttribute("y","".concat(-1*l/2)),t.setAttribute("xhtmls",M.ns.xhtml),t.style.width="100%",t.style.height="100%",t.style.padding="0",t.style.margin="0",t.style.background="unset",t.style.overflow="visible",t.className="xflow-edge-label-body",a.style.width="100%",a.style.height="100%",t.appendChild(a),e.appendChild(t),n.appendChild(e),a}},{key:"dispose",value:function(){this.toDispose.dispose()}}]),o}();$e([Object(he.inject)(C0),Be("design:type",Object)],Sh.prototype,"optionProvider",void 0),$e([Object(he.inject)(JS),Be("design:type",Object)],Sh.prototype,"hookService",void 0),$e([Object(he.inject)(wD),Be("design:type",Object)],Sh.prototype,"commandServiceProvider",void 0),$e([Object(he.inject)(xD),Be("design:type",Object)],Sh.prototype,"modelServiceProvider",void 0),Sh=$e([Object(he.singleton)()],Sh);var kU=function(i){i(Sh),i(Wv,{lifecycle:he.Syringe.Lifecycle.singleton,useDynamic:function(n){return{getGraphInstance:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){var a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return a=n.container.get(Sh),s=n.container.get(C0),f.next=4,s==null?void 0:s.getOptions();case 4:return u=f.sent,f.next=7,a==null?void 0:a.getGraph(u.graphId);case 7:return l=f.sent,f.abrupt("return",l);case 9:case"end":return f.stop()}},t)}))},getGraphOptions:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){var a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=n.container.get(C0),u.abrupt("return",a==null?void 0:a.getOptions());case 2:case"end":return u.stop()}},t)}))}}}}),i(wD,{lifecycle:he.Syringe.Lifecycle.singleton,useDynamic:function(n){return{getCommandService:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){var a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=n.container.get(Uv),u.abrupt("return",a);case 2:case"end":return u.stop()}},t)}))}}}}),i(xD,{lifecycle:he.Syringe.Lifecycle.singleton,useDynamic:function(n){return{getModelService:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){var a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=n.container.get(Vv),u.abrupt("return",a);case 2:case"end":return u.stop()}},t)}))}}}})},qS;(function(o){o.CONFIG_TYPE="MODEL_SERVICE_CONFIG"})(qS||(qS={}));var eA=function(){return ra.create(function(){})},SD=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.CONFIG_TYPE=qS.CONFIG_TYPE,this.registerModelFn=eA,this.isMounted=new dl,this.registerModel=function(r){i.registerModelFn=r},this.setMountState=function(){i.isMounted.resolve(!0)},this.getConfig=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isMounted.promise;case 2:return e.abrupt("return",{CONFIG_TYPE:this.CONFIG_TYPE,modelRegisterFunc:this.registerModelFn||eA});case 3:case"end":return e.stop()}},r,this)}))},this.dispose=function(){i.registerModelFn=eA,i.isMounted=new dl}}),cg=function(){function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.deferredModelMap=new Map,this.registerModel=function(r){var n=r.id,e=r.getInitialValue,t=r.modelFactory,a=new Bi,s=i.ensureModel(n);if(s.isResolved){console.error(r,"model has been registerd");return}var u=e?e():Xc.EMPTY_VALUE,l=t?t():new zv(u);return Xc.isValidValue(u)&&s.resolve(l),r.watchChange&&r.watchChange(l,i).then(function(c){s.isResolved||s.resolve(l),i.toDispose.pushAll([c,a]),a.push(c)}),a},this.findDeferredModel=function(r){return i.deferredModelMap.get(r)},this.awaitModel=function(r){var n=i.ensureModel(r);return n.promise},this.registerRuntimeModel=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.modelOptionProvider.getOption();case 2:return n=s.sent,e=n.modelRegisterFunc,s.next=6,this.graphProvider.getGraphInstance();case 6:t=s.sent,e&&e(this,t);case 8:case"end":return s.stop()}},r,this)}))},this.ensureModel=function(r){var n=i.deferredModelMap.get(r);if(n)return n;var e=new dl;return i.deferredModelMap.set(r,e),i.toDispose.push(ra.create(function(){return i.deferredModelMap.delete(r)})),e}}return Object(ue.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Bt.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerModel(this)}}catch(a){n.e(a)}finally{n.f()}this.registerRuntimeModel()}},{key:"onStop",value:function(){this.toDispose.dispose()}}]),o}();$e([Object(he.contrib)(Hv),Be("design:type",Object)],cg.prototype,"contributionProvider",void 0),$e([Object(he.inject)(gD),Be("design:type",Object)],cg.prototype,"modelOptionProvider",void 0),$e([Object(he.inject)(Wv),Be("design:type",Object)],cg.prototype,"graphProvider",void 0),cg=$e([Object(he.singleton)({contrib:[xh,Vv]})],cg);var DU=function(i){return function(r){var n=r.findDeferredModel(i);return!!(n&&n.promise)}},os=function(i){return function(r){return pe(void 0,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.awaitModel(i);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},n)}))}},ss=function(i){return function(r){return pe(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.awaitModel(i);case 2:return e=a.sent,a.abrupt("return",e.getValidValue());case 4:case"end":return a.stop()}},n)}))}},a2;(function(o){o.id="GRAPH_ENABLE_MULTI_SELECT",o.getModel=os(o.id),o.useValue=ss(o.id)})(a2||(a2={}));var D0;(function(o){o.id="GRAPH_FULLSCREEN",o.getModel=os(o.id),o.useValue=ss(o.id)})(D0||(D0={}));var i2;(function(o){o.id="IS_NODE_SELECTED",o.getModel=os(o.id),o.useValue=ss(o.id)})(i2||(i2={}));var o2;(function(o){o.id="IS_GROUP_SELECTED",o.getModel=os(o.id),o.useValue=ss(o.id)})(o2||(o2={}));var s2;(function(o){o.id="IS_NORMAL_NODES_SELECTED",o.getModel=os(o.id),o.useValue=ss(o.id)})(s2||(s2={}));var u2;(function(o){o.id="LAST_SELECTED_CELL",o.getModel=os(o.id),o.useValue=ss(o.id)})(u2||(u2={}));var Ah;(function(o){o.id="SELECTED_CELLS",o.getModel=os(o.id),o.useValue=ss(o.id)})(Ah||(Ah={}));var l2;(function(o){o.id="LAST_SELECTED_NODE",o.getModel=os(o.id),o.useValue=ss(o.id)})(l2||(l2={}));var $v;(function(o){o.id="SELECTED_NODES",o.getModel=os(o.id),o.useValue=ss(o.id)})($v||($v={}));var tA;(function(o){o.id="SELECTED_EDGES",o.getModel=os(o.id),o.useValue=ss(o.id)})(tA||(tA={}));var c2;(function(o){o.id="SELECTED_GROUPS",o.getModel=os(o.id),o.useValue=ss(o.id)})(c2||(c2={}));var nA;(function(o){o.id="CONTEXTMENU_NODE",o.getModel=os(o.id),o.useValue=ss(o.id)})(nA||(nA={}));var rA;(function(o){o.id="CONTEXTMENU_EDGE",o.getModel=os(o.id),o.useValue=ss(o.id)})(rA||(rA={}));var f2;(function(o){o.id="CONTEXTMENU_TARGET",o.getModel=os(o.id),o.useValue=ss(o.id)})(f2||(f2={}));var d2;(function(o){o.id="GRAPH_META",o.getModel=os(o.id),o.useValue=ss(o.id)})(d2||(d2={}));var h2;(function(o){o.id="GRAPH_SCALE",o.getModel=os(o.id),o.useValue=ss(o.id)})(h2||(h2={}));var v2;(function(o){o.id="COMMAND_REDOABLE",o.getModel=os(o.id),o.useValue=ss(o.id)})(v2||(v2={}));var p2;(function(o){o.id="COMMAND_UNDOABLE",o.getModel=os(o.id),o.useValue=ss(o.id)})(p2||(p2={}));var g2;(function(o){o.id="COMMAND_GLOBALS",o.getModel=os(o.id),o.useValue=ss(o.id)})(g2||(g2={}));var m2;(function(o){o.id="HISTORY_UNDOABLE",o.getModel=os(o.id),o.useValue=ss(o.id)})(m2||(m2={}));var y2;(function(o){o.id="HISTORY_REDOABLE",o.getModel=os(o.id),o.useValue=ss(o.id)})(y2||(y2={}));var b2=function(){function o(){Object(me.a)(this,o)}return Object(ue.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:v2.id,getInitialValue:function(){return n.commands.isRedoable},watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return u=this.commands.watchChange(function(){t.setValue(s.commands.isRedoable)}),c.abrupt("return",u);case 2:case"end":return c.stop()}},a,this)}))}}),r.registerModel({id:p2.id,getInitialValue:function(){return n.commands.isUndoable},watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return u=this.commands.watchChange(function(){t.setValue(s.commands.isUndoable)}),c.abrupt("return",u);case 2:case"end":return c.stop()}},a,this)}))}}),r.registerModel({id:g2.id,modelFactory:function(){return n.commands.Globals}})}}]),o}();$e([Object(he.inject)(Uv),Be("design:type",Object)],b2.prototype,"commands",void 0),b2=$e([Object(he.singleton)({contrib:Hv})],b2);var aA=function(i,r,n){return i.on(r,n),ra.create(function(){i.off(r,n)})},C2=function(){function o(){var i=this;Object(me.a)(this,o),this.getGraphInstance=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return n=a.sent,a.next=5,this.graphProvider.getGraphOptions();case 5:return e=a.sent,a.abrupt("return",{graph:n,config:e});case 7:case"end":return a.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:d2.id,getInitialValue:function(){return{flowId:"-1"}},watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",ra.create(function(){t.setValue({flowId:"-1"})}));case 1:case"end":return u.stop()}},a)}))}}),r.registerModel({id:a2.id,getInitialValue:function(){return{isEnable:!1}},watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",ra.create(function(){t.setValue({isEnable:!1})}));case 1:case"end":return u.stop()}},a)}))}}),r.registerModel({id:D0.id,getInitialValue:function(){return!1},watchChange:function(t,a){return pe(n,void 0,void 0,Object(D.a)().mark(function s(){var u=this,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l=function(){return pe(u,void 0,void 0,Object(D.a)().mark(function v(){var m,y;return Object(D.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return m=!!document.fullscreenElement,O.next=3,D0.getModel(a);case 3:y=O.sent,y.setValue(m);case 5:case"end":return O.stop()}},v)}))},document.addEventListener("fullscreenchange",l,!1),f.abrupt("return",ra.create(function(){document.removeEventListener("fullscreenchange",l),t.setValue(!1)}));case 3:case"end":return f.stop()}},s)}))}}),r.registerModel({id:Ah.id,getInitialValue:function(){return[]},watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(v){var m=v.selected;t.setValue(m)},u.on("selection:changed",l),f.abrupt("return",ra.create(function(){return u.off("selection:changed",l)}));case 7:case"end":return f.stop()}},a,this)}))}}),r.registerModel({id:u2.id,watchChange:function(t,a){return pe(n,void 0,void 0,Object(D.a)().mark(function s(){var u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Ah.getModel(a);case 2:return u=c.sent,c.abrupt("return",u.watch(function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.setValue(Object(We.a)(f).pop()||null)}));case 4:case"end":return c.stop()}},s)}))}}),r.registerModel({id:$v.id,getInitialValue:function(){return[]},watchChange:function(t,a){return pe(n,void 0,void 0,Object(D.a)().mark(function s(){var u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Ah.getModel(a);case 2:return u=c.sent,c.abrupt("return",u.watch(function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],d=f.filter(function(v){return v.isNode()});t.setValue(d)}));case 4:case"end":return c.stop()}},s)}))}}),r.registerModel({id:l2.id,watchChange:function(t,a){return pe(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,$v.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){t.setValue(Object(We.a)(d).pop()||null)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:i2.id,watchChange:function(t,a){return pe(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,$v.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){t.setValue(d.length>0)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:o2.id,getInitialValue:function(){return!1},watchChange:function(t,a){return pe(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Ah.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){var v=d.every(function(m){return m&&m.getProp("isGroup")===!0});t.setValue(v)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:c2.id,getInitialValue:function(){return[]},watchChange:function(t,a){return pe(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,$v.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){var v=d.filter(function(m){return m&&m.getProp("isGroup")===!0});t.setValue(v)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:s2.id,getInitialValue:function(){return!1},watchChange:function(t,a){return pe(n,void 0,void 0,Object(D.a)().mark(function s(){var u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Ah.getModel(a);case 2:return u=f.sent,l=u.watch(function(d){var v=d.every(function(y){var C=!(y&&y.getProp("isGroup")),O=!(y&&y.getProp("group"));return C&&O}),m=d.length>0&&v;t.setValue(m)}),f.abrupt("return",l);case 5:case"end":return f.stop()}},s)}))}}),r.registerModel({id:h2.id,getInitialValue:function(){return{zoomFactor:-1}},watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(v){var m=u.zoom();t.setValue(Object.assign(Object.assign({},v),{zoomFactor:m}))},u.on("scale",l),f.abrupt("return",ra.create(function(){return u.off("scale",l)}));case 7:case"end":return f.stop()}},a,this)}))}}),r.registerModel({id:f2.id,watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.getGraphInstance();case 2:return s=v.sent,u=s.graph,l=s.config,c=function(y){return function(C){var O=C.x,x=C.y,T=u.localToClient({x:O,y:x}),L=l.rootContainer.getBoundingClientRect(),_={x:T.x-((L==null?void 0:L.x)||0),y:T.y-((L==null?void 0:L.y)||0)};t.setValue({type:y,anchor:_,data:C,cell:C.cell})}},f=new Bi,f.pushAll([aA(u,"node:contextmenu",c("node")),aA(u,"edge:contextmenu",c("edge")),aA(u,"blank:contextmenu",c("blank"))]),v.abrupt("return",f);case 9:case"end":return v.stop()}},a,this)}))}}),r.registerModel({id:y2.id,getInitialValue:function(){return!1},watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(){var v=u.history.canRedo();t.setValue(v)},u.history&&u.history.on("change",l),f.abrupt("return",ra.create(function(){return u.history.off("change",l)}));case 7:case"end":return f.stop()}},a,this)}))}}),r.registerModel({id:m2.id,getInitialValue:function(){return!1},watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,this.getGraphInstance();case 2:return s=f.sent,u=s.graph,l=function(){var v=u.history.canUndo();t.setValue(v)},u.history&&u.history.on("change",l),f.abrupt("return",ra.create(function(){return u.history.off("change",l)}));case 7:case"end":return f.stop()}},a,this)}))}})}}]),o}();$e([Object(he.inject)(Wv),Be("design:type",Object)],C2.prototype,"graphProvider",void 0),C2=$e([Object(he.singleton)({contrib:Hv})],C2);var IU=Object(he.Module)(function(o){he.Contribution.register(o,Hv),o(cg),o(C2),o(b2)}),RU=function(i,r){i({token:gD,useDynamic:function(){return{getOption:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r.getConfig());case 1:case"end":return s.stop()}},t)}))}}},lifecycle:he.Syringe.Lifecycle.singleton})},NU=function(i){return Object(he.Module)(function(r){RU(r,i)})},AD=function(i){var r=i.config,n=cc(),e=I.a.useMemo(function(){return r||new SD},[]);return I.a.useEffect(function(){var t=n.addCoreModule({config:e,createModule:NU});return e.setMountState(),function(){t.dispose(),e.dispose()}},[]),null};AD.defaultProps={XFlowModuleType:"ModelServiceConfig"};var jU=function(i){return function(r){var n=I.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=I.a.useMemo(function(){var t=new SD;return i(t,n),t},[n]);return e}},LU=function(i){var r=i.getChildren(),n=i.getSize(),e=i.getData()||{},t=i.getPosition(),a=i.getParentId(),s=e.isCollapsed,u=e.groupCollapsedSize||(s?n:null);return Object.assign(Object.assign({},e),{id:i.id,width:n.width,height:n.height,x:t.x,y:t.y,group:a,groupChildren:r?r.map(function(l){return l.id}):null,groupCollapsedSize:u})},_U=function(i){var r=i.getData()||{};return Object.assign(Object.assign({},r),{id:i.id,source:i.getSourceCellId(),target:i.getTargetCellId(),sourcePortId:i.getSourcePortId(),targetPortId:i.getTargetPortId(),sourcePort:i.getSourcePortId(),targetPort:i.getTargetPortId()})},MD=function(i){var r=[],n=[],e=function(a){a.isNode()&&r.push(LU(a)),a.isEdge()&&n.push(_U(a))};return i.map(function(t){return e(t)}),{nodes:r,edges:n}},FU=100,Mh=function(){function o(){var i=this;Object(me.a)(this,o),this.getGraphInstance=function(){return i.graphProvider.getGraphInstance()},this.getGraphConfig=function(){return i.graphProvider.getGraphOptions()},this.getGraphData=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return n=a.sent,e=n.getCells(),a.abrupt("return",MD(e));case 5:case"end":return a.stop()}},r,this)}))},this.getAllNodes=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.graphProvider.getGraphInstance();case 2:return n=t.sent,t.abrupt("return",n.getNodes());case 4:case"end":return t.stop()}},r,this)}))},this.getNodeById=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return e=a.sent,a.abrupt("return",e.getCellById(r));case 4:case"end":return a.stop()}},n,this)}))},this.getAllEdges=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.graphProvider.getGraphInstance();case 2:return n=t.sent,t.abrupt("return",n.getEdges());case 4:case"end":return t.stop()}},r,this)}))},this.getEdgeById=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return e=a.sent,a.abrupt("return",e.getCellById(r));case 4:case"end":return a.stop()}},n,this)}))},this.updateNodeAttrs=function(r,n){return pe(i,void 0,void 0,Object(D.a)().mark(function e(){var t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(r instanceof fo)){s.next=4;break}r.setAttrs(n),s.next=8;break;case 4:return s.next=6,this.getNodeById(r);case 6:t=s.sent,t.setAttrs(n);case 8:case"end":return s.stop()}},e,this)}))},this.updateEdgeAttrs=function(r,n){return pe(i,void 0,void 0,Object(D.a)().mark(function e(){var t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(r instanceof Fo)){s.next=4;break}r.setAttrs(n),s.next=8;break;case 4:return s.next=6,this.getEdgeById(r);case 6:t=s.sent,t.setAttrs(n);case 8:case"end":return s.stop()}},e,this)}))},this.translateGraph=function(r,n){return pe(i,void 0,void 0,Object(D.a)().mark(function e(){var t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.graphProvider.getGraphInstance();case 2:t=u.sent,a=t.translate(),t.translate(a.tx+r,a.ty+n);case 5:case"end":return u.stop()}},e,this)}))}}return Object(ue.a)(o,[{key:"start",value:function(){return pe(this,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.startContributions();case 2:this.registerEventListeners();case 3:case"end":return e.stop()}},r,this)}))}},{key:"executeCommand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return this.commandService.executeCommand(r,n,e)}},{key:"executeCommandPipeline",value:function(r){return this.commandService.executeCommandPipeline(r)}},{key:"registerEventListeners",value:function(){var r=this;window.addEventListener("unload",function(){r.stopContributions()})}},{key:"startContributions",value:function(){return pe(this,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:console.log(this.contributions.getContributions()),e=Object(Bt.a)(this.contributions.getContributions()),u.prev=2,a=Object(D.a)().mark(function l(){var c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(c=t.value,!c.onStart){d.next=10;break}return d.prev=2,d.next=5,n.measure("".concat(c.constructor.name,".onStart"),function(){return c.onStart(n)});case 5:d.next=10;break;case 7:d.prev=7,d.t0=d.catch(2),console.error("Could not start contribution",d.t0);case 10:case"end":return d.stop()}},l,null,[[2,7]])}),e.s();case 5:if((t=e.n()).done){u.next=9;break}return u.delegateYield(a(),"t0",7);case 7:u.next=5;break;case 9:u.next=14;break;case 11:u.prev=11,u.t1=u.catch(2),e.e(u.t1);case 14:return u.prev=14,e.f(),u.finish(14);case 17:case"end":return u.stop()}},r,this,[[2,11,14,17]])}))}},{key:"stopContributions",value:function(){console.info(">>> Stopping frontend contributions...");var r=Object(Bt.a)(this.contributions.getContributions()),n;try{for(r.s();!(n=r.n()).done;){var e=n.value;if(e.onStop)try{e.onStop(this)}catch(t){console.error("Could not stop contribution",t)}}}catch(t){r.e(t)}finally{r.f()}console.info("<<< All frontend contributions have been stopped.")}},{key:"measure",value:function(r,n){return pe(this,void 0,void 0,Object(D.a)().mark(function e(){var t,a,s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return t="".concat(r,"-start"),a="".concat(r,"-end"),performance.mark(t),v.next=5,n();case 5:s=v.sent,performance.mark(a),performance.measure(r,t,a),u=Object(Bt.a)(performance.getEntriesByName(r));try{for(u.s();!(l=u.n()).done;)c=l.value,f="Frontend ".concat(c.name),c.duration>FU?console.warn("".concat(f," is slow, took: ").concat(c.duration.toFixed(1)," ms")):console.debug("".concat(f," took: ").concat(c.duration.toFixed(1)," ms"))}catch(m){u.e(m)}finally{u.f()}return performance.clearMeasures(r),v.abrupt("return",s);case 12:case"end":return v.stop()}},e)}))}}]),o}();$e([Object(he.contrib)(xh),Be("design:type",Object)],Mh.prototype,"contributions",void 0),$e([Object(he.inject)(Wv),Be("design:type",Object)],Mh.prototype,"graphProvider",void 0),$e([Object(he.inject)(Uv),Be("design:type",Object)],Mh.prototype,"commandService",void 0),$e([Object(he.inject)(Vv),Be("design:type",Object)],Mh.prototype,"modelService",void 0),Mh=$e([Object(he.singleton)()],Mh);var BU=Object(he.Module)(function(o){he.Contribution.register(o,xh),o(Mh)}),GU=function(i){var r=i.getAllExtensions(),n=new he.Container,e=r.map(function(a){var s=a.createModule,u=a.config;return s(u)});n.load(BU),n.load(hU),n.load(IU),e.forEach(function(a){n.load(a)});var t=n.get(Mh);return t},yq=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.xflowPrefixCls=SS,this.getXflowPrefixCls=function(r){return"".concat(i.xflowPrefixCls,"-").concat(r)},this.setXflowPrefixCls=function(r){return i.xflowPrefixCls=r}}),zU=I.a.createContext({configProvider:null}),UU=function(){return I.a.useContext(zU)},fg=function(i){var r=UU();return I.a.useMemo(function(){return r.configProvider?r.configProvider.getXflowPrefixCls(i):"".concat(SS,"-").concat(i)},[i])};function I0(o){var i=this,r=o.createModule,n=o.children,e=cc(),t=I.a.useMemo(function(){return o.config||{CONFIG_TYPE:"",getConfig:function(){return pe(i,void 0,void 0,Object(D.a)().mark(function s(){return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{});case 1:case"end":return l.stop()}},s)}))}}},[]);return I.a.useEffect(function(){var a=e.addExtension({config:t,createModule:r});return function(){a.dispose()}},[]),Array.isArray(n)||I.a.isValidElement(n)?I.a.createElement(I.a.Fragment,null," ",n," "):null}var Gl=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object(tt.useMemo)(function(){var r=Object.entries(i),n=r.length>0?{position:"absolute"}:{};return r.forEach(function(e){var t=Object(je.a)(e,2),a=t[0],s=t[1],u=s===void 0?0:s;n[a]="".concat(u,"px")}),n},[i])},VU=function(i){return Object(he.Module)(function(r){kU(r),yz(r,i)})},E2=se.create({type:"react componnet"});_i.registerReactComponent=E2.register,_i.unregisterReactComponent=E2.unregister,_i.Hook.prototype.getReactComponent=function(o){var i=this.options.getReactComponent;if(typeof i=="function"){var r=A.call(i,this.graph,o);if(r!=null)return r}var n=o.getComponent();if(typeof n=="string"){var e=E2.get(n);if(e==null)return E2.onNotFound(n);n=e}return n};var R0=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"component",get:function(){return this.getComponent()},set:function(e){this.setComponent(e)}},{key:"getComponent",value:function(){return this.store.get("component")}},{key:"setComponent",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e==null?this.removeComponent(t):this.store.set("component",e,t),this}},{key:"removeComponent",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.store.remove("component",e),this}}]),r}(fo);(function(o){function i(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"rect",t=[],a=n?Li.getForeignObjectMarkup():{tagName:"g",selector:"content"};return r?t.push(a):t.push.apply(t,[{tagName:e,selector:"body"},a,{tagName:"text",selector:"label"}]),t}o.config({view:"react-shape-view",markup:i(!1,!0),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}},propHooks:function(n){if(n.markup==null){var e=n.primer,t=n.useForeignObject!==!1;if(e&&e!=="rect"){n.markup=i(!1,t,e);var a={};e==="circle"?a={refCx:"50%",refCy:"50%",refR:"50%"}:e==="ellipse"&&(a={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}),n.attrs=p.merge({},{body:Object.assign({refWidth:null,refHeight:null},a)},n.attrs||{})}else n.simple&&(n.markup=i(!0,t),n.attrs=p.merge({},{body:null,label:null},n.attrs||{}))}return n}}),fo.registry.register("react-shape",o,!0)})(R0||(R0={}));var dg;(function(o){var i=!1,r,n=function(l,c){var f=c.payload;switch(c.type){case"add":{var d=l.findIndex(function(y){return y.id===f.id});return d>=0?(l[d]=f,Object(We.a)(l)):[].concat(Object(We.a)(l),[f])}case"remove":{var v=l.findIndex(function(y){return y.id===f.id});if(v>=0){var m=Object(We.a)(l);return m.splice(v,1),m}break}default:break}return l};function e(u,l){i&&r({type:"add",payload:{id:u,portal:l}})}o.connect=e;function t(u){i&&r({type:"remove",payload:{id:u}})}o.disconnect=t;function a(){return i}o.isActive=a;function s(){return function(){i=!0;var u=Object(tt.useReducer)(n,[]),l=Object(je.a)(u,2),c=l[0],f=l[1];return r=f,I.a.createElement(I.a.Fragment,{children:c.map(function(d){return d.portal})})}}o.getProvider=s})(dg||(dg={}));var iA=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this,n),e.scheduledAnimationFrame=!1,e.throttleUpdateFunc=function(){e.scheduledAnimationFrame||(e.scheduledAnimationFrame=!0,window.requestAnimationFrame(function(){e.setState(function(t){return e.scheduledAnimationFrame=!1,{tick:t.tick+1}})}))},e.onChange=function(t){if(r.throttleChangeTypes.includes(t.key)){e.throttleUpdateFunc();return}e.setState({tick:e.state.tick+1})},e.state={tick:0},e}return Object(ue.a)(r,[{key:"componentDidMount",value:function(){this.props.node.on("change:*",this.onChange)}},{key:"componentWillUnmount",value:function(){this.props.node.off("change:*",this.onChange)}},{key:"clone",value:function(e){var t=this.props.node;return typeof e.type=="string"?I.a.cloneElement(e):I.a.cloneElement(e,{node:t})}},{key:"render",value:function(){var e=this.props,t=e.graph,a=e.node,s=e.component;if(I.a.isValidElement(s))return this.clone(s);if(typeof s=="function"){var u=A.call(s,t,a);if(I.a.isValidElement(u))return this.clone(u)}return s}}]),r}(I.a.PureComponent);iA.throttleChangeTypes=["position","size"];var TD=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"init",value:function(){var e=this;Object(Aa.a)(Object(Ma.a)(r.prototype),"init",this).call(this),this.cell.on("removed",function(){dg.disconnect(e.cell.id)})}},{key:"getComponentContainer",value:function(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}},{key:"confirmUpdate",value:function(e){var t=this,a=Object(Aa.a)(Object(Ma.a)(r.prototype),"confirmUpdate",this).call(this,e);return this.handleAction(a,r.action,function(){qm?qm.scheduleTask(function(){t.renderReactComponent()}):t.renderReactComponent()})}},{key:"renderReactComponent",value:function(){this.unmountReactComponent();var e=this.getComponentContainer(),t=this.cell,a=this.graph;if(e){var s=this.graph.hook.getReactComponent(t),u=I.a.createElement(iA,{graph:a,node:t,component:s});dg.isActive()?dg.connect(this.cell.id,Bv.a.createPortal(u,e)):Bv.a.render(u,e)}}},{key:"unmountReactComponent",value:function(){var e=this.getComponentContainer();return e&&Bv.a.unmountComponentAtNode(e),e}},{key:"unmount",value:function(){return dg.disconnect(this.cell.id),this.unmountReactComponent(),Object(Aa.a)(Object(Ma.a)(r.prototype),"unmount",this).call(this),this}}]),r}(Vs);(function(o){o.action="react",o.config({bootstrap:[o.action],actions:{component:o.action}}),Vs.registry.register("react-shape-view",o,!0)})(TD||(TD={}));var HU=function(o,i,r,n){var e=arguments.length,t=e<3?i:n===null?n=Object.getOwnPropertyDescriptor(i,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")t=Reflect.decorate(o,i,r,n);else for(var s=o.length-1;s>=0;s--)(a=o[s])&&(t=(e<3?a(t):e>3?a(i,r,t):a(i,r))||t);return e>3&&t&&Object.defineProperty(i,r,t),t},oA="react";function WU(o){var i={current:function(){}},r=function(c){i.current(c)},n,e;function t(l,c){n({id:l,portal:c})}function a(l){e(l)}var s=function(){var c=Object(tt.useState)([]),f=Object(je.a)(c,2),d=f[0],v=f[1],m=Object(tt.useState)(),y=Object(je.a)(m,2),C=y[0],O=y[1],x=Object(tt.useRef)([]),T=Object(tt.useRef)([]);i.current=O;var L=Object(tt.useCallback)(function(q){var ye=q.id;if(x.current.includes(ye)){var Ce=T.current,Ae=Ce.findIndex(function(Pe){return Pe.id===ye});Ae>-1?Ce[Ae]=q:Ce.push(q),T.current=Ce}else v(function(Pe){var qe=Object(We.a)(Pe),lt=qe.findIndex(function(ze){return ze.id===ye});return lt>-1?qe[lt]=q:qe.push(q),qe})},[]);n=L;var _=Object(tt.useCallback)(function(q){x.current.includes(q)&&(x.current=x.current.filter(function(ye){return ye!==q})),T.current.map(function(ye){return ye.id}).includes(q)&&(T.current=T.current.filter(function(ye){return ye.id!==q})),v(function(ye){return ye.filter(function(Ce){return Ce.id!==q})})},[]);e=_;var z=Object(tt.useCallback)(function(q){var ye=q.name,Ce=q.data,Ae=Ce||{},Pe=Ae.cells,qe=Pe===void 0?[]:Pe;if(ye==="add"){var lt=qe.filter(function(ze){return ze.isNode()}).map(function(ze){return ze.id});x.current=Array.from(new Set([].concat(Object(We.a)(x.current),Object(We.a)(lt))))}},[]),Q=Object(tt.useCallback)(function(q){var ye=q.name;if(ye==="add"){var Ce=T.current;if(Ce.length){var Ae=Ce.map(function(Pe){return Pe.id});x.current=x.current.filter(function(Pe){return!Ae.includes(Pe)}),T.current=[],v(function(Pe){var qe=Object(We.a)(Pe);return Ce.forEach(function(lt){var ze=qe.findIndex(function(ht){return ht.id===lt.id});ze>-1?qe[ze]=lt:qe.push(lt)}),qe})}}},[]);return Object(tt.useLayoutEffect)(function(){return C&&(C.on("batch:start",z),C.on("batch:stop",Q)),function(){C&&(C.off("batch:start",z),C.off("batch:stop",Q),v([]),x.current=[],T.current=[])}},[C,z,Q]),I.a.createElement.apply(I.a,[I.a.Fragment,null].concat(Object(We.a)(d.map(function(q){return q.portal}))))},u=function(l){Object(xr.a)(f,l);var c=Object(Sr.a)(f);function f(){return Object(me.a)(this,f),c.apply(this,arguments)}return Object(ue.a)(f,[{key:"init",value:function(){var v=this;Object(Aa.a)(Object(Ma.a)(f.prototype),"init",this).call(this),this.cell.on("removed",function(){a(v.cell.id)})}},{key:"getComponentContainer",value:function(){return this.cell.prop("useForeignObject")===!1?this.selectors.content:this.selectors.foContent}},{key:"confirmUpdate",value:function(v){var m=this,y=Object(Aa.a)(Object(Ma.a)(f.prototype),"confirmUpdate",this).call(this,v);return this.handleAction(y,oA,function(){return m.renderReactComponent()})}},{key:"renderReactComponent",value:function(){this.unmountReactComponent();var v=this.getComponentContainer(),m=this.cell,y=this.graph;if(v){var C=this.graph.hook.getReactComponent(m),O=I.a.createElement(iA,{graph:y,node:m,component:C});t(this.cell.id,Bv.a.createPortal(O,v))}}},{key:"unmountReactComponent",value:function(){var v=this.getComponentContainer();return v&&Bv.a.unmountComponentAtNode(v),v}},{key:"onMouseDown",value:function(v,m,y){var C=v.target,O=C.tagName.toLowerCase();if(O==="input"){var x=C.getAttribute("type");if(x==null||["text","password","number","email","search","tel","url"].includes(x))return}Object(Aa.a)(Object(Ma.a)(f.prototype),"onMouseDown",this).call(this,v,m,y)}},{key:"dispose",value:function(){a(this.cell.id),this.unmountReactComponent()}}]),f}(Vs);return HU([Vs.dispose()],u.prototype,"dispose",null),u.config({bootstrap:[oA],actions:{component:oA}}),Vs.registry.register(o,u,!0),{Portal:s,setGraph:r}}function $U(o){var i=Object(tt.useRef)(!1),r=Object(tt.useState)(function(){return i.current?{}:(i.current=!0,WU(o))}),n=Object(je.a)(r,1),e=n[0];return[e.Portal,e.setGraph]}var O2=function(i){var r=Yo(),n=I.a.useRef(null),e=I.a.useRef(null),t=cc(),a=I.a.useMemo(function(){var m=i.config?i.config:new Kk;return m.setX6Config(),m},[]),s=$U(a.graphId),u=Object(je.a)(s,2),l=u[0],c=u[1];I.a.useEffect(function(){r&&r.getGraphInstance().then(function(m){c(m)})},[r,c]),I.a.useEffect(function(){a.setRootContainer(n.current),a.setGraphContainer(e.current),a.xflowInstanceId=t.getInstanceId(),t.addCoreModule({config:a,createModule:VU});var m=function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function C(){return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:a.dispose();case 1:case"end":return x.stop()}},C)}))};return function(){m()}},[]);var f=Gl(i.position),d=fg("canvas-root"),v=fg("x6-canvas");return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{ref:n,className:d,style:f,id:a.graphId,tabIndex:0},I.a.createElement("div",{ref:e,className:v}),i.children),I.a.createElement(l,null))};O2.defaultProps={isXFlowCanvas:!0};var Ad=function(){function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.runtimeHooks=[],this.getX6Graph=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.graph){t.next=2;break}return t.abrupt("return",this.graph);case 2:return t.next=4,this.graphProvider.getGraphInstance();case 4:return n=t.sent,this.graph=n,t.abrupt("return",n);case 7:case"end":return t.stop()}},r,this)}))},this.getGraphConfig=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.graphProvider.getGraphOptions());case 1:case"end":return e.stop()}},r,this)}))},this.getGraphMeta=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n=this.getModelService(),a.t0=this.graphMeta,a.t0){a.next=6;break}return a.next=5,de.GRAPH_META.useValue(n);case 5:a.t0=a.sent;case 6:return e=a.t0,a.abrupt("return",e);case 8:case"end":return a.stop()}},r,this)}))},this.setArgs=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return i.args=r,i.runtimeHooks=n,{args:r,hooks:n}},this.getArgs=function(){var r=Object.assign(Object.assign({},i.args),{modelService:i.getModelService(),commandService:i.getCommands(),getGraphMeta:i.getGraphMeta,getX6Graph:i.getX6Graph,getGraphConfig:i.getGraphConfig});return{args:r,hooks:i.runtimeHooks}},this.setResult=function(r){return i.result=r,i.result},this.getResult=function(){return i.result},this.getHooks=function(){return i.hookService.hookProvider()},this.getCommands=function(){return i.commandService},this.getModelService=function(){return i.modelService},this.addUndo=function(r){if(!Array.isArray(r))return i.addUndo([r]);i.toDispose.pushAll(r)},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toDispose.dispose();case 2:case"end":return e.stop()}},r,this)}))},this.isUndoable=function(){return!i.toDispose.disposed},this.getDisposables=function(){return i.toDispose},this.setGlobal=function(r,n){i.commandService.setGlobal(r,n)},this.getGlobal=function(r){return i.commandService.getGlobal(r)}}return Object(ue.a)(o,[{key:"init",value:function(){var r=this;this.getGraphMeta().then(function(n){r.graphMeta=n})}}]),o}();$e([Object(he.inject)(Wv),Be("design:type",Object)],Ad.prototype,"graphProvider",void 0),$e([Object(he.inject)(JS),Be("design:type",Object)],Ad.prototype,"hookService",void 0),$e([Object(he.inject)(Uv),Be("design:type",Object)],Ad.prototype,"commandService",void 0),$e([Object(he.inject)(Vv),Be("design:type",Object)],Ad.prototype,"modelService",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Ad.prototype,"init",null),Ad=$e([Object(he.injectable)()],Ad);var KU="CommandConfig",XU=function(){return[]},hg=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.setCommandContributions=function(r){i.getContributions=r},this.getCommandContributions=function(){return i.getContributions()},this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.registerHookFn){t.next=2;break}return t.abrupt("return",this.registerHookFn(r));case 2:return t.abrupt("return",bD);case 3:case"end":return t.stop()}},n,this)}))},this.registerHookHub=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.registerHookHubFn){t.next=2;break}return t.abrupt("return",this.registerHookHubFn(r));case 2:return t.abrupt("return",bD);case 3:case"end":return t.stop()}},n,this)}))},this.CONFIG_TYPE=KU,this.setRegisterHookFn=function(r){i.registerHookFn=r},this.setRegisterHookHubFn=function(r){i.registerHookHubFn=r},this.getConfig=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{registerHookFn:this.registerHookFn,getContributions:this.getContributions,CONFIG_TYPE:this.CONFIG_TYPE});case 1:case"end":return e.stop()}},r,this)}))},this.getContributions=XU}),bq=function(){return new hg},YU=function(i,r){i({token:hg,contrib:[lc],lifecycle:he.Syringe.Lifecycle.singleton,useDynamic:function(){return r}})},w2;(function(o){o.command=no.ADD_NODE,o.hookKey="addNode"})(w2||(w2={}));var x2=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.addNode.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O,x,T,L,_,z,Q,q,ye;return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return y=d.createNodeService,C=d.cellFactory,O=d.commandService,x=d.options,Ae.next=3,e.getX6Graph();case 3:if(T=Ae.sent,L=d.nodeConfig,!y){Ae.next=12;break}return Ae.next=8,y(d);case 8:if(_=Ae.sent,typeof _!="boolean"){Ae.next=11;break}return Ae.abrupt("return",{err:"createNodeService rejected"});case 11:L=_;case 12:return Ae.next=14,this.processNodeConfig(L);case 14:if(z=Ae.sent,q=Object.assign(Object.assign({},x),{isCommand:!0}),!C){Ae.next=23;break}return Ae.next=19,C(z,this);case 19:ye=Ae.sent,Q=T.addNode(ye,q),Ae.next=24;break;case 23:Q=T.addNode(z,q);case 24:return e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function Pe(){var qe;return Object(D.a)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:qe=Object.assign({id:Q.id},Q.getData()),O.executeCommand(no.DEL_NODE.id,{nodeConfig:qe});case 2:case"end":return ze.stop()}},Pe)}))})),Ae.abrupt("return",{nodeConfig:z,nodeCell:Q});case 26:case"end":return Ae.stop()}},v,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.processNodeConfig=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=this.contextProvider(),r.data=Object.assign({},r),!r.shape){c.next=4;break}return c.abrupt("return",r);case 4:if(r.view){c.next=9;break}return c.next=7,e.getGraphConfig();case 7:t=c.sent,r.view=t.graphId;case 9:if(r.component){c.next=17;break}return c.next=12,this.getNodeReactComponent(r);case 12:a=c.sent,s=e.getCommands(),u=e.getModelService(),r.shape="react-shape",r.component=r2(a,s,u);case 17:return c.abrupt("return",r);case 18:case"end":return c.stop()}},n,this)}))},this.getNodeReactComponent=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getHooks(),f.next=4,e.getGraphConfig();case 4:return a=f.sent,f.next=7,t.reactNodeRender.call(a.nodeRender);case 7:return s=f.sent,u=a.nodeTypeParser(r)||z1,l=s.get(u),l||console.error("react node component is missing:",a.nodeRender,u,l),f.abrupt("return",l);case 12:case"end":return f.stop()}},n,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],x2.prototype,"contextProvider",void 0),x2=$e([Object(he.injectable)({token:{token:gi,named:w2.command.id}})],x2);var S2;(function(o){o.command=no.DEL_NODE,o.hookKey="delNode",o.createHook=function(){return new Yc}})(S2||(S2={}));var A2=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.delNode.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O,x,T,L,_,z,Q;return Object(D.a)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return y=d.commandService,C=d.deleteNodeService,O=d.options,ye.next=3,e.getX6Graph();case 3:if(x=ye.sent,!C){ye.next=10;break}return ye.next=7,C(d);case 7:if(T=ye.sent,T){ye.next=10;break}return ye.abrupt("return",{err:" service rejected"});case 10:if(L=(d.x6Node||d.nodeConfig).id,_=x.getCellById(L),!(_&&_.isNode())){ye.next=20;break}return z=[].concat(Object(We.a)(x.getIncomingEdges(_)||[]),Object(We.a)(x.getOutgoingEdges(_)||[])),ye.next=16,Promise.all(z.map(function(Ce){return y.executeCommand(Bo.DEL_EDGE.id,{x6Edge:Ce})}));case 16:return Q=_.getData(),_.remove(Object.assign(Object.assign({},O),{isCommand:!0})),e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function Ce(){return Object(D.a)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,y.executeCommand(no.ADD_NODE.id,{nodeConfig:Q});case 2:case"end":return Pe.stop()}},Ce)}))})),ye.abrupt("return",{err:null,nodeConfig:Q});case 20:return ye.abrupt("return",{err:"node is not exist"});case 21:case"end":return ye.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.isUndoable()&&(n=this.contextProvider(),n.undo()),t.abrupt("return",this);case 2:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],A2.prototype,"contextProvider",void 0),A2=$e([Object(he.injectable)({token:{token:gi,named:S2.command.id}})],A2);var M2;(function(o){o.command=no.SELECT_NODE,o.hookKey="selectNode"})(M2||(M2={}));var N0=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.selectNode.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O;return Object(D.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.ctx.getX6Graph();case 2:return v=T.sent,m=v.getSelectedCells().map(function(L){return L.id}),y=f.nodeIds,C=f.resetSelection,O=f.commandService,C?v.resetSelection(y):v.select(y),this.ctx.addUndo({dispose:function(){O.executeUndoCommand(no.SELECT_NODE.id,{nodeIds:m,resetSelection:!0})}}),T.abrupt("return",{});case 8:case"end":return T.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],N0.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],N0.prototype,"init",null),N0=$e([Object(he.injectable)({token:{token:gi,named:M2.command.id}})],N0);var T2;(function(o){o.command=no.MOVE_NODE,o.hookKey="moveNode",o.createHook=function(){return new Yc}})(T2||(T2={}));var P2=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.moveNode.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m,y,C,O,x,T,L,_,z,Q,q,ye,Ce,Ae,Pe,qe,lt,ze,ht;return Object(D.a)().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:if(m=d.nodePositionService,!m){Tn.next=7;break}return Tn.next=4,m(d);case 4:if(y=Tn.sent,y){Tn.next=7;break}return Tn.abrupt("return",{err:"service rejected"});case 7:return C=d.position,O=C.dx,x=O===void 0?0:O,T=C.dy,L=T===void 0?0:T,_=C.x,z=C.y,Q=C.duration,q=Q===void 0?150:Q,Tn.next=10,e.getX6Graph();case 10:if(ye=Tn.sent,Ce=ye.getCellById(d.id),!Ce){Tn.next=20;break}return Ae=_,Pe=z,qe=Ce.position(),lt=qe.x,ze=qe.y,ht=function(){Ce.position(lt,ze,{silent:!1})},x||L?(Ae=x+lt,Pe=L+ze,Ce.translate(x,L,{transition:{duration:q}}),ht=function(){return Ce.translate(-x,-L,{transition:{duration:q}})}):Ce.position(Ae,Pe,{silent:!1}),e.addUndo(ra.create(function(){ht()})),Tn.abrupt("return",{err:null,nextX:Ae,nextY:Pe});case 20:case"end":return Tn.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],P2.prototype,"contextProvider",void 0),P2=$e([Object(he.injectable)({token:{token:gi,named:T2.command.id}})],P2);var JU=h("Znm+"),k2=h.n(JU),Kv;(function(o){o.command=no.UPDATE_NODE,o.hookKey="updateNode",o.XFlowNodeSetOptions={overwrite:!0},o.NODE_WIDTH=200,o.NODE_HEIGHT=40})(Kv||(Kv={}));var j0=function(){function o(){var i=this;Object(me.a)(this,o),this.setNodeConfig=function(r,n,e){r.setData(n,e),r.setPosition((n==null?void 0:n.x)||0,(n==null?void 0:n.y)||0),r.setSize((n==null?void 0:n.width)||Kv.NODE_WIDTH,(n==null?void 0:n.height)||Kv.NODE_HEIGHT),r.angle((n==null?void 0:n.angle)||0,{absolute:!0}),k2()(n==null?void 0:n.visible)&&r.setVisible(n==null?void 0:n.visible),!(r instanceof R0)&&!!r.getAttrByPath("text/text")&&r.setAttrByPath("text/text",n.label),n.attrs&&r.setAttrs(n.attrs),Array.isArray(n.ports)&&r.setPropByPath("ports/items",n.ports,Object.assign({rewrite:!0},e))},this.getNodeConfig=function(r){var n=r.getData(),e=r.getPosition(),t=r.getSize();return Object.assign(Object.assign(Object.assign({},n),e),t)},this.getNodeCell=function(r,n){var e=n.nodeConfig,t=n.setNodeConfig,a="";if(t&&t.node&&typeof t.node=="string"?a=t.node:e&&e.id&&typeof e.id=="string"&&(a=e.id),a)return r==null?void 0:r.getCellById(a);if(t&&t.node instanceof fo)return t.node},this.getNextNodeConfig=function(r,n){return pe(i,void 0,void 0,Object(D.a)().mark(function e(){var t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(r&&r.setNodeConfig&&r.setNodeConfig.callback)){s.next=3;break}return t=this.getNodeConfig(n),s.abrupt("return",r.setNodeConfig.callback(t));case 3:return s.abrupt("return",r.nodeConfig);case 4:case"end":return s.stop()}},e,this)}))},this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.updateNode.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O;return Object(D.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return v=f.options,m=v===void 0?Kv.XFlowNodeSetOptions:v,T.next=3,this.ctx.getX6Graph();case 3:return y=T.sent,C=this.getNodeCell(y,f),T.next=7,this.getNextNodeConfig(f,C);case 7:return O=T.sent,this.setNodeConfig(C,O,m),T.abrupt("return",{nodeConfig:O,nodeCell:C});case 10:case"end":return T.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],j0.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],j0.prototype,"init",null),j0=$e([Object(he.injectable)({token:{token:gi,named:Kv.command.id}})],j0);var D2;(function(o){o.command=no.CENTER_NODE,o.hookKey="centerNode"})(D2||(D2={}));var L0=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.centerNode.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y;return Object(D.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.ctx.getX6Graph();case 2:return v=O.sent,m=f.nodeConfig,y=v==null?void 0:v.getCellById(m==null?void 0:m.id),v==null||v.centerCell(y),O.abrupt("return",{x6Node:y});case 7:case"end":return O.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],L0.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],L0.prototype,"init",null),L0=$e([Object(he.injectable)({token:{token:gi,named:D2.command.id}})],L0);var I2;(function(o){o.command=no.FRONT_NODE,o.hookKey="frontNode"})(I2||(I2={}));var _0=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.frontNode.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O;return Object(D.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.ctx.getX6Graph();case 2:return y=T.sent,C=d.nodeId,O=y==null?void 0:y.getCellById(C),O?(O.toFront(),e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function L(){return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:d.commandService.executeCommand(no.BACK_NODE.id,{nodeId:C});case 1:case"end":return z.stop()}},L)}))}))):console.error(C,"this nodeId is not exist"),T.abrupt("return",{});case 7:case"end":return T.stop()}},v,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],_0.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],_0.prototype,"init",null),_0=$e([Object(he.injectable)({token:{token:gi,named:I2.command.id}})],_0);var R2;(function(o){o.command=no.BACK_NODE,o.hookKey="backNode"})(R2||(R2={}));var F0=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.backNode.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,m,y,C;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.ctx.getX6Graph();case 2:return m=x.sent,y=f.nodeId,C=m==null?void 0:m.getCellById(y),C?(C.toBack(),this.ctx.addUndo(ra.create(function(){return pe(v,void 0,void 0,Object(D.a)().mark(function T(){return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:f.commandService.executeCommand(no.FRONT_NODE.id,{nodeId:y});case 1:case"end":return _.stop()}},T)}))}))):console.error(y,"this nodeId is not exist"),x.abrupt("return",{});case 7:case"end":return x.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],F0.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],F0.prototype,"init",null),F0=$e([Object(he.injectable)({token:{token:gi,named:R2.command.id}})],F0);var N2;(function(o){o.command=no.HIGHLIGHT_NODE,o.hookKey="highlightNode"})(N2||(N2={}));var B0=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.highlightNode.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O,x,T,L;return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.ctx.getX6Graph();case 2:if(v=z.sent,m=f.nodeId,y=f.stroke,C=f.strokeWidth,O=v==null?void 0:v.getCellById(m),O){z.next=10;break}return console.error(m,"this nodeId is not exist"),z.abrupt("return",{err:"this nodeId is not exist"});case 10:O==null||O.setAttrs({body:{stroke:y||"#7c68fc",strokeWidth:C||2}}),(f==null?void 0:f.isHighlightRelatedLines)&&(x=f.edgeStroke,T=f.edgeStrokeWidth,L=v==null?void 0:v.getEdges(),L.forEach(function(Q){var q=Q==null?void 0:Q.getData();f==null||f.commandService.executeCommand(Bo.HIGHLIGHT_EDGE.id,{edgeId:q==null?void 0:q.id,strokeColor:x,strokeWidth:T})}));case 12:return z.abrupt("return",{err:null});case 13:case"end":return z.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],B0.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],B0.prototype,"init",null),B0=$e([Object(he.injectable)({token:{token:gi,named:N2.command.id}})],B0);var j2;(function(o){o.command=no.UPDATE_NODE_PORT,o.hookKey="updateNodePort"})(j2||(j2={}));var L2=function(){function o(){var i=this;Object(me.a)(this,o),this.getCell=function(r,n){return typeof n=="string"?r.getCellById(n):n},this.getNodeConfig=function(r){var n=r.getData(),e=r.getPosition(),t=r.getSize();return Object.assign(Object.assign(Object.assign({},n),e),t)},this.updatePortsOfNodeConfig=function(r,n,e){var t=i.getNodeConfig(r);i.isNodeAnchors(t.ports)&&(t.ports=Object(We.a)(n)),i.isPortMetaData(t.ports)&&(t.ports.items=Object(We.a)(n)),r.setData(t,e)},this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),d.next=5,e.getX6Graph();case 5:return l=d.sent,d.next=8,u.updateNodePort.call(a,function(v){return pe(n,void 0,void 0,Object(D.a)().mark(function m(){var y=this,C,O,x,T,L,_,z;return Object(D.a)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(C=v.node,O=v.updatePorts,x=v.options,T=v.commandService,L=this.getCell(l,C),!(!L||L.isEdge())){q.next=5;break}return console.error("node_is _not_exsit",C),q.abrupt("return",{err:"node_is _not_exsit"});case 5:return _=L.getPorts(),q.next=8,O(Object(We.a)(_),L,l);case 8:if(z=q.sent,z!==!1){q.next=11;break}return q.abrupt("return",{err:"service rejected"});case 11:return L.setPropByPath("ports/items",z,Object.assign({rewrite:!0},x)),this.updatePortsOfNodeConfig(L,z,x),e.addUndo(ra.create(function(){return pe(y,void 0,void 0,Object(D.a)().mark(function ye(){var Ce=this;return Object(D.a)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:T.executeCommand(no.UPDATE_NODE_PORT.id,{node:C,updatePorts:function(){return pe(Ce,void 0,void 0,Object(D.a)().mark(function lt(){return Object(D.a)().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return ht.abrupt("return",_);case 1:case"end":return ht.stop()}},lt)}))}});case 1:case"end":return Pe.stop()}},ye)}))})),q.abrupt("return",{ports:z});case 15:case"end":return q.stop()}},m,this)}))},s);case 8:return c=d.sent,e.setResult(c),d.abrupt("return",this);case 11:case"end":return d.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isNodeAnchors",value:function(r){return Array.isArray(r)}},{key:"isPortMetaData",value:function(r){return r.items&&Array.isArray(r.items)}},{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],L2.prototype,"contextProvider",void 0),L2=$e([Object(he.injectable)({token:{token:gi,named:j2.command.id}})],L2);var ZU=function(i){i(x2),i(A2),i(N0),i(P2),i(j0),i(L0),i(_0),i(F0),i(B0),i(L2)},QU=[w2,S2,M2,T2,Kv,D2,I2,R2,N2,j2],_2;(function(o){o.command=di.LOAD_META,o.hookKey="graphMeta"})(_2||(_2={}));var G0=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),d.next=4,s.graphMeta.call(t,function(v){return pe(n,void 0,void 0,Object(D.a)().mark(function m(){var y,C;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(y=v.graphMetaService,!y){x.next=7;break}return x.next=4,y(v);case 4:x.t0=x.sent,x.next=8;break;case 7:x.t0=Object.assign({},v==null?void 0:v.meta);case 8:return C=x.t0,x.abrupt("return",Object.assign({flowId:C==null?void 0:C.flowId},C));case 10:case"end":return x.stop()}},m)}))},a);case 4:return u=d.sent,l=this.ctx.getModelService(),d.next=8,de.GRAPH_META.getModel(l);case 8:return c=d.sent,c.setValue(u),this.ctx.setResult(u),d.abrupt("return",this);case 12:case"end":return d.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],G0.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],G0.prototype,"init",null),G0=$e([Object(he.injectable)({token:{token:gi,named:_2.command.id}})],G0);var F2;(function(o){o.command=di.SAVE_GRAPH_DATA,o.hookKey="saveGraphData"})(F2||(F2={}));var z0=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return e=this.ctx,t=e.getArgs(),a=e.getHooks(),u.next=5,a.saveGraphData.call(t.args,function(l){return pe(n,void 0,void 0,Object(D.a)().mark(function c(){var f,d,v,m,y,C,O,x,T,L;return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return f=l.saveGraphDataService,d=l.includeAttrs,z.next=3,e.getX6Graph();case 3:return v=z.sent,m=v.getNodes(),y=v.getEdges(),C=m.map(function(Q){var q=Q.getData(),ye=Q.position(),Ce=Q.size(),Ae=Object.assign(Object.assign(Object.assign({id:Q.id},q),ye),Ce);return d&&(Ae.attrs=Q.getAttrs()),Ae}),O=y.map(function(Q){var q=Q.getData(),ye=Object.assign({id:Q.id},q);return d&&(ye.attrs=Q.getAttrs()),ye}),x={nodes:C,edges:O},z.next=11,this.ctx.getGraphMeta();case 11:if(T=z.sent,!f){z.next=17;break}return z.next=15,f(T,x);case 15:L=z.sent,L&&this.ctx.setResult(L);case 17:return z.abrupt("return",{});case 18:case"end":return z.stop()}},c,this)}))},t.hooks);case 5:return u.abrupt("return",this);case 6:case"end":return u.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],z0.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],z0.prototype,"init",null),z0=$e([Object(he.injectable)({token:{token:gi,named:F2.command.id}})],z0);var B2;(function(o){o.command=di.LOAD_DATA,o.hookKey="loadData",o.createHook=function(){return new Yc}})(B2||(B2={}));var U0=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.loadData.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y;return Object(D.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return v=f.loadDataService,O.next=3,this.ctx.getGraphMeta();case 3:return m=O.sent,O.next=6,v(m);case 6:return y=O.sent,O.abrupt("return",{graphData:y});case 8:case"end":return O.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],U0.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],U0.prototype,"init",null),U0=$e([Object(he.injectable)({token:{token:gi,named:B2.command.id}})],U0);var Iu=function(){function o(){Object(me.a)(this,o),this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return Object(ue.a)(o,[{key:"layout",value:function(r){return this.init(r),this.execute(!0)}},{key:"init",value:function(r){this.nodes=r.nodes||[],this.edges=r.edges||[],this.combos=r.combos||[]}},{key:"execute",value:function(r){}},{key:"executeWithWorker",value:function(){}},{key:"getDefaultCfg",value:function(){return{}}},{key:"updateCfg",value:function(r){r&&Object.assign(this,r)}},{key:"getType",value:function(){return"base"}},{key:"destroy",value:function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}]),o}(),V0=function(i){return typeof i=="string"},qU=function(i){var r=Object.create(null);return function(n){var e=r[n];return e||(r[n]=i(n))}},e7=/-(\w)/g,Cq=qU(function(o){return o.replace(e7,function(i,r){return r?r.toUpperCase():""})}),bu=Array.isArray,Wr=function(i){return typeof i=="number"},G2=function(i){return Number.isNaN(Number(i))},Eq=function(i){var r=parseFloat(i);return G2(r)?i:r},_f=function(i){return i!==null&&typeof i=="object"},sA=function o(i){if(i===null)return i;if(i instanceof Date)return new Date(i.getTime());if(i instanceof Array){var r=[];return i.forEach(function(e){r.push(e)}),r.map(function(e){return o(e)})}if(typeof i=="object"&&i!=={}){var n=Object.assign({},i);return Object.keys(n).forEach(function(e){n[e]=o(n[e])}),n}return i},Hi=function(i,r){var n=i[r];return _f(n)?n.cell:n},H0=function(i,r,n){for(var e=[],t=0;t<i;t++)e[t]=0;return n&&n.forEach(function(a){var s=Hi(a,"source"),u=Hi(a,"target");s&&(e[r[s]]+=1),u&&(e[r[u]]+=1)}),e},PD=function(i){for(var r=[],n=i.length,e=0;e<n;e+=1){r[e]=[];for(var t=0;t<n;t+=1)e===t?r[e][t]=0:i[e][t]===0||!i[e][t]?r[e][t]=Infinity:r[e][t]=i[e][t]}for(var a=0;a<n;a+=1)for(var s=0;s<n;s+=1)for(var u=0;u<n;u+=1)r[s][u]>r[s][a]+r[a][u]&&(r[s][u]=r[s][a]+r[a][u]);return r},kD=function(i,r){var n=i.nodes,e=i.edges,t=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach(function(s,u){a[s.id]=u;var l=[];t.push(l)}),e&&e.forEach(function(s){var u=Hi(s,"source"),l=Hi(s,"target"),c=a[u],f=a[l];t[c][f]=1,r||(t[f][c]=1)}),t},t7=function(i,r){var n=[];return i.forEach(function(e){var t=[];e.forEach(function(a){t.push(a*r)}),n.push(t)}),n},n7=function o(i,r){if(i&&i.children){for(var n=i.children.length-1;n>=0;n--)if(!o(i.children[n],r))return}return!!r(i)},z2=function(i,r){typeof r=="function"&&n7(i,r)},Th=function(i){return typeof i=="function"},Ph=new Map,Oq=function(i,r){if(Ph.get(i)&&console.warn("The layout with the name ".concat(i," exists already, it will be overridden")),_f(r)){var n=function(e){Object(xr.a)(a,e);var t=Object(Sr.a)(a);function a(s){var u;Object(me.a)(this,a),u=t.call(this);var l=Object(rs.a)(u),c={},f=l.getDefaultCfg();return Object.assign(c,f,r,s),Object.keys(c).forEach(function(d){var v=c[d];l[d]=v}),u}return Object(ue.a)(a)}(Iu);Ph.set(i,n)}else Ph.set(i,r);return Ph.get(i)},wq=function(i){Ph.has(i)&&Ph.delete(i)},r7=function(i){return Ph.has(i)?Ph.get(i):null},a7=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges,s=t.length,u=e.begin;if(s===0)return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:a};if(s===1)return t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:a};var l=[];t.forEach(function(z){l.push(z)});var c={};if(l.forEach(function(z,Q){c[z.id]=Q}),(e.sortBy==="degree"||!V0(e.sortBy)||l[0][e.sortBy]===void 0)&&(e.sortBy="degree",G2(t[0].degree))){var f=H0(l.length,c,a);l.forEach(function(z,Q){z.degree=f[Q]})}l.sort(function(z,Q){return Q[e.sortBy]-z[e.sortBy]}),!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);var d=e.rows,v=e.cols!=null?e.cols:e.columns;if(e.cells=s,d!=null&&v!=null?(e.rows=d,e.cols=v):d!=null&&v==null?(e.rows=d,e.cols=Math.ceil(e.cells/e.rows)):d==null&&v!=null?(e.cols=v,e.rows=Math.ceil(e.cells/e.cols)):(e.splits=Math.sqrt(e.cells*e.height/e.width),e.rows=Math.round(e.splits),e.cols=Math.round(e.width/e.height*e.splits)),e.cols*e.rows>e.cells){var m=e.small(),y=e.large();(m-1)*y>=e.cells?e.small(m-1):(y-1)*m>=e.cells&&e.large(y-1)}else for(;e.cols*e.rows<e.cells;){var C=e.small(),O=e.large();(O+1)*C>=e.cells?e.large(O+1):e.small(C+1)}e.cellWidth=e.width/e.cols,e.cellHeight=e.height/e.rows,e.condense&&(e.cellWidth=0,e.cellHeight=0),e.preventOverlap&&l.forEach(function(z){(!z.x||!z.y)&&(z.x=0,z.y=0);var Q,q;bu(z.size)?(Q=z.size[0],q=z.size[1]):Wr(z.size)?(Q=z.size,q=z.size):_f(z.size)&&(Q=z.size.width,q=z.size.height),(Q===void 0||q===void 0)&&(bu(e.nodeSize)?(Q=e.nodeSize[0],q=e.nodeSize[1]):Wr(e.nodeSize)?(Q=e.nodeSize,q=e.nodeSize):(Q=30,q=30));var ye=e.preventOverlapPadding,Ce=Q+ye,Ae=q+ye;e.cellWidth=Math.max(e.cellWidth,Ce),e.cellHeight=Math.max(e.cellHeight,Ae)}),e.cellUsed={},e.row=0,e.col=0,e.id2manPos={};for(var x=0;x<l.length;x++){var T=l[x],L=void 0;if(e.position&&(L=e.position(T)),L&&(L.row!==void 0||L.col!==void 0)){var _={row:L.row,col:L.col};if(_.col===void 0)for(_.col=0;e.used(_.row,_.col);)_.col++;else if(_.row===void 0)for(_.row=0;e.used(_.row,_.col);)_.row++;e.id2manPos[T.id]=_,e.use(_.row,_.col)}e.getPos(T)}return e.onLayoutEnd&&e.onLayoutEnd(),{edges:a,nodes:l}}},{key:"small",value:function(e){var t=this,a,s=t.rows||5,u=t.cols||5;if(e==null)a=Math.min(s,u);else{var l=Math.min(s,u);l===t.rows?t.rows=e:t.cols=e}return a}},{key:"large",value:function(e){var t=this,a,s=t.rows||5,u=t.cols||5;if(e==null)a=Math.max(s,u);else{var l=Math.max(s,u);l===t.rows?t.rows=e:t.cols=e}return a}},{key:"used",value:function(e,t){var a=this;return a.cellUsed["c-".concat(e,"-").concat(t)]||!1}},{key:"use",value:function(e,t){var a=this;a.cellUsed["c-".concat(e,"-").concat(t)]=!0}},{key:"moveToNextCell",value:function(){var e=this,t=e.cols||5;e.col++,e.col>=t&&(e.col=0,e.row++)}},{key:"getPos",value:function(e){var t=this,a=t.begin,s=t.cellWidth,u=t.cellHeight,l,c,f=t.id2manPos[e.id];if(f)l=f.col*s+s/2+a[0],c=f.row*u+u/2+a[1];else{for(;t.used(t.row,t.col);)t.moveToNextCell();l=t.col*s+s/2+a[0],c=t.row*u+u/2+a[1],t.use(t.row,t.col),t.moveToNextCell()}e.x=l,e.y=c}},{key:"getType",value:function(){return"grid"}}]),r}(Iu),i7=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{center:[0,0],width:300,height:300}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=.9,s=e.center;return!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),t&&t.forEach(function(u){u.x=(Math.random()-.5)*a*e.width+s[0],u.y=(Math.random()-.5)*a*e.height+s[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:this.edges}}},{key:"getType",value:function(){return"random"}}]),r}(Iu),uA=function(i,r){var n;return i?Wr(i)?n=function(t){return i}:n=i:n=function(t){return r||1},n},o7=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.workerEnabled=!1,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.preventOverlap=!0,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:500,gravity:10,enableTick:!0}}},{key:"execute",value:function(){var e,t,a=this,s=a.nodes;if(a.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(a.timeInterval),!s||s.length===0){(e=a.onLayoutEnd)===null||e===void 0||e.call(a);return}!a.width&&typeof window!="undefined"&&(a.width=window.innerWidth),!a.height&&typeof window!="undefined"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]);var u=a.center;if(s.length===1){s[0].x=u[0],s[0].y=u[1],(t=a.onLayoutEnd)===null||t===void 0||t.call(a);return}var l={},c={};s.forEach(function(C,O){Wr(C.x)||(C.x=Math.random()*a.width),Wr(C.y)||(C.y=Math.random()*a.height),l[C.id]=C,c[C.id]=O}),a.nodeMap=l,a.nodeIdxMap=c,a.linkDistance=uA(a.linkDistance,1),a.nodeStrength=uA(a.nodeStrength,1),a.edgeStrength=uA(a.edgeStrength,1);var f=a.nodeSize,d;if(a.preventOverlap){var v=a.nodeSpacing,m;Wr(v)?m=function(){return v}:Th(v)?m=v:m=function(){return 0},f?bu(f)?d=function(O){var x=f[0]>f[1]?f[0]:f[1];return x+m(O)}:d=function(O){return f+m(O)}:d=function(O){if(O.size){if(bu(O.size)){var x=O.size[0]>O.size[1]?O.size[0]:O.size[1];return x+m(O)}if(_f(O.size)){var T=O.size.width>O.size.height?O.size.width:O.size.height;return T+m(O)}return O.size+m(O)}return 10+m(O)}}a.nodeSize=d;var y=a.edges;a.degrees=H0(s.length,a.nodeIdxMap,y),a.getMass||(a.getMass=function(C){var O=a.degrees[a.nodeIdxMap[C.id]]||1;return O}),a.run()}},{key:"run",value:function(){var e,t=this,a=t.maxIteration,s=t.nodes,u=t.workerEnabled,l=t.minMovement;if(!!s)if(u){for(var c=0;c<a;c++){var f=t.runOneStep(c);if(t.reachMoveThreshold(s,f,l))break}(e=t.onLayoutEnd)===null||e===void 0||e.call(t)}else{if(typeof window=="undefined")return;var d=0;this.timeInterval=window.setInterval(function(){var v,m;if(!!s){var y=t.runOneStep(d)||[];t.reachMoveThreshold(s,y,l)&&((v=t.onLayoutEnd)===null||v===void 0||v.call(t),window.clearInterval(t.timeInterval)),d++,d>=a&&((m=t.onLayoutEnd)===null||m===void 0||m.call(t),window.clearInterval(t.timeInterval))}},0)}}},{key:"reachMoveThreshold",value:function(e,t,a){var s=0;return e.forEach(function(u,l){var c=u.x-t[l].x,f=u.y-t[l].y;s+=Math.sqrt(c*c+f*f)}),s/=e.length,s<a}},{key:"runOneStep",value:function(e){var t,a=this,s=a.nodes,u=a.edges,l=[],c=[];if(!!s){s.forEach(function(v,m){l[2*m]=0,l[2*m+1]=0,c[2*m]=0,c[2*m+1]=0}),a.calRepulsive(l,s),u&&a.calAttractive(l,u),a.calGravity(l,s);var f=Math.max(.02,a.interval-e*.002);a.updateVelocity(l,c,f,s);var d=[];return s.forEach(function(v){d.push({x:v.x,y:v.y})}),a.updatePosition(c,f,s),(t=a.tick)===null||t===void 0||t.call(a),d}}},{key:"calRepulsive",value:function(e,t){var a=this,s=a.getMass,u=a.nodeStrength,l=a.factor,c=a.coulombDisScale,f=a.preventOverlap,d=a.nodeSize;t.forEach(function(v,m){var y=s?s(v):1;t.forEach(function(C,O){if(!(m>=O)){var x=v.x-C.x,T=v.y-C.y,L=Math.sqrt(x*x+T*T)+.01,_=(L+.1)*c,z=x/L,Q=T/L,q=(u(v)+u(C))/2*l/(_*_),ye=s?s(C):1;if(e[2*m]+=z*q,e[2*m+1]+=Q*q,e[2*O]-=z*q,e[2*O+1]-=Q*q,f&&L<(d(v)+d(C))/2){var Ce=(u(v)+u(C))/2/(L*L);e[2*m]+=z*Ce/y,e[2*m+1]+=Q*Ce/y,e[2*O]-=z*Ce/ye,e[2*O+1]-=Q*Ce/ye}}})})}},{key:"calAttractive",value:function(e,t){var a=this,s=a.nodeMap,u=a.nodeIdxMap,l=a.linkDistance,c=a.edgeStrength,f=a.getMass;t.forEach(function(d,v){var m=Hi(d,"source"),y=Hi(d,"target"),C=s[m],O=s[y],x=O.x-C.x,T=O.y-C.y,L=Math.sqrt(x*x+T*T)+.01,_=x/L,z=T/L,Q=l(d)||1,q=Q-L,ye=q*c(d),Ce=u[m],Ae=u[y],Pe=f?f(C):1,qe=f?f(O):1;e[2*Ce]-=_*ye/Pe,e[2*Ce+1]-=z*ye/Pe,e[2*Ae]+=_*ye/qe,e[2*Ae+1]+=z*ye/qe})}},{key:"calGravity",value:function(e,t){for(var a=this,s=a.center,u=a.gravity,l=a.degrees,c=t.length,f=0;f<c;f++){var d=t[f],v=d.x-s[0],m=d.y-s[1],y=u;if(a.getCenter){var C=a.getCenter(d,l[f]);C&&Wr(C[0])&&Wr(C[1])&&Wr(C[2])&&(v=d.x-C[0],m=d.y-C[1],y=C[2])}!y||(e[2*f]-=y*v,e[2*f+1]-=y*m)}}},{key:"updateVelocity",value:function(e,t,a,s){var u=this,l=a*u.damping;s.forEach(function(c,f){var d=e[2*f]*l||.01,v=e[2*f+1]*l||.01,m=Math.sqrt(d*d+v*v);if(m>u.maxSpeed){var y=u.maxSpeed/m;d=y*d,v=y*v}t[2*f]=d,t[2*f+1]=v})}},{key:"updatePosition",value:function(e,t,a){a.forEach(function(s,u){if(Wr(s.fx)&&Wr(s.fy)){s.x=s.fx,s.y=s.fy;return}var l=e[2*u]*t,c=e[2*u+1]*t;s.x+=l,s.y+=c})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){var e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}},{key:"getType",value:function(){return"gForce"}}]),r}(Iu),s7=function(o){var i=+this._x.call(null,o),r=+this._y.call(null,o);return DD(this.cover(i,r),i,r,o)};function DD(o,i,r,n){if(isNaN(i)||isNaN(r))return o;var e,t=o._root,a={data:n},s=o._x0,u=o._y0,l=o._x1,c=o._y1,f,d,v,m,y,C,O,x;if(!t)return o._root=a,o;for(;t.length;)if((y=i>=(f=(s+l)/2))?s=f:l=f,(C=r>=(d=(u+c)/2))?u=d:c=d,e=t,!(t=t[O=C<<1|y]))return e[O]=a,o;if(v=+o._x.call(null,t.data),m=+o._y.call(null,t.data),i===v&&r===m)return a.next=t,e?e[O]=a:o._root=a,o;do e=e?e[O]=new Array(4):o._root=new Array(4),(y=i>=(f=(s+l)/2))?s=f:l=f,(C=r>=(d=(u+c)/2))?u=d:c=d;while((O=C<<1|y)==(x=(m>=d)<<1|v>=f));return e[x]=t,e[O]=a,o}function u7(o){var i,r,n=o.length,e,t,a=new Array(n),s=new Array(n),u=Infinity,l=Infinity,c=-Infinity,f=-Infinity;for(r=0;r<n;++r)isNaN(e=+this._x.call(null,i=o[r]))||isNaN(t=+this._y.call(null,i))||(a[r]=e,s[r]=t,e<u&&(u=e),e>c&&(c=e),t<l&&(l=t),t>f&&(f=t));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),r=0;r<n;++r)DD(this,a[r],s[r],o[r]);return this}var l7=function(o,i){if(isNaN(o=+o)||isNaN(i=+i))return this;var r=this._x0,n=this._y0,e=this._x1,t=this._y1;if(isNaN(r))e=(r=Math.floor(o))+1,t=(n=Math.floor(i))+1;else{for(var a=e-r||1,s=this._root,u,l;r>o||o>=e||n>i||i>=t;)switch(l=(i<n)<<1|o<r,u=new Array(4),u[l]=s,s=u,a*=2,l){case 0:e=r+a,t=n+a;break;case 1:r=e-a,t=n+a;break;case 2:e=r+a,n=t-a;break;case 3:r=e-a,n=t-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=r,this._y0=n,this._x1=e,this._y1=t,this},c7=function(){var o=[];return this.visit(function(i){if(!i.length)do o.push(i.data);while(i=i.next)}),o},f7=function(o){return arguments.length?this.cover(+o[0][0],+o[0][1]).cover(+o[1][0],+o[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Xu=function(o,i,r,n,e){this.node=o,this.x0=i,this.y0=r,this.x1=n,this.y1=e},d7=function(o,i,r){var n,e=this._x0,t=this._y0,a,s,u,l,c=this._x1,f=this._y1,d=[],v=this._root,m,y;for(v&&d.push(new Xu(v,e,t,c,f)),r==null?r=Infinity:(e=o-r,t=i-r,c=o+r,f=i+r,r*=r);m=d.pop();)if(!(!(v=m.node)||(a=m.x0)>c||(s=m.y0)>f||(u=m.x1)<e||(l=m.y1)<t))if(v.length){var C=(a+u)/2,O=(s+l)/2;d.push(new Xu(v[3],C,O,u,l),new Xu(v[2],a,O,C,l),new Xu(v[1],C,s,u,O),new Xu(v[0],a,s,C,O)),(y=(i>=O)<<1|o>=C)&&(m=d[d.length-1],d[d.length-1]=d[d.length-1-y],d[d.length-1-y]=m)}else{var x=o-+this._x.call(null,v.data),T=i-+this._y.call(null,v.data),L=x*x+T*T;if(L<r){var _=Math.sqrt(r=L);e=o-_,t=i-_,c=o+_,f=i+_,n=v.data}}return n},h7=function(o){if(isNaN(c=+this._x.call(null,o))||isNaN(f=+this._y.call(null,o)))return this;var i,r=this._root,n,e,t,a=this._x0,s=this._y0,u=this._x1,l=this._y1,c,f,d,v,m,y,C,O;if(!r)return this;if(r.length)for(;;){if((m=c>=(d=(a+u)/2))?a=d:u=d,(y=f>=(v=(s+l)/2))?s=v:l=v,i=r,!(r=r[C=y<<1|m]))return this;if(!r.length)break;(i[C+1&3]||i[C+2&3]||i[C+3&3])&&(n=i,O=C)}for(;r.data!==o;)if(e=r,!(r=r.next))return this;return(t=r.next)&&delete r.next,e?(t?e.next=t:delete e.next,this):i?(t?i[C]=t:delete i[C],(r=i[0]||i[1]||i[2]||i[3])&&r===(i[3]||i[2]||i[1]||i[0])&&!r.length&&(n?n[O]=r:this._root=r),this):(this._root=t,this)};function v7(o){for(var i=0,r=o.length;i<r;++i)this.remove(o[i]);return this}var p7=function(){return this._root},g7=function(){var o=0;return this.visit(function(i){if(!i.length)do++o;while(i=i.next)}),o},m7=function(o){var i=[],r,n=this._root,e,t,a,s,u;for(n&&i.push(new Xu(n,this._x0,this._y0,this._x1,this._y1));r=i.pop();)if(!o(n=r.node,t=r.x0,a=r.y0,s=r.x1,u=r.y1)&&n.length){var l=(t+s)/2,c=(a+u)/2;(e=n[3])&&i.push(new Xu(e,l,c,s,u)),(e=n[2])&&i.push(new Xu(e,t,c,l,u)),(e=n[1])&&i.push(new Xu(e,l,a,s,c)),(e=n[0])&&i.push(new Xu(e,t,a,l,c))}return this},y7=function(o){var i=[],r=[],n;for(this._root&&i.push(new Xu(this._root,this._x0,this._y0,this._x1,this._y1));n=i.pop();){var e=n.node;if(e.length){var t,a=n.x0,s=n.y0,u=n.x1,l=n.y1,c=(a+u)/2,f=(s+l)/2;(t=e[0])&&i.push(new Xu(t,a,s,c,f)),(t=e[1])&&i.push(new Xu(t,c,s,u,f)),(t=e[2])&&i.push(new Xu(t,a,f,c,l)),(t=e[3])&&i.push(new Xu(t,c,f,u,l))}r.push(n)}for(;n=r.pop();)o(n.node,n.x0,n.y0,n.x1,n.y1);return this};function b7(o){return o[0]}var C7=function(o){return arguments.length?(this._x=o,this):this._x};function E7(o){return o[1]}var O7=function(o){return arguments.length?(this._y=o,this):this._y};function lA(o,i,r){var n=new cA(i==null?b7:i,r==null?E7:r,NaN,NaN,NaN,NaN);return o==null?n:n.addAll(o)}function cA(o,i,r,n,e,t){this._x=o,this._y=i,this._x0=r,this._y0=n,this._x1=e,this._y1=t,this._root=void 0}function ID(o){for(var i={data:o.data},r=i;o=o.next;)r=r.next={data:o.data};return i}var Yu=lA.prototype=cA.prototype;Yu.copy=function(){var o=new cA(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root,r,n;if(!i)return o;if(!i.length)return o._root=ID(i),o;for(r=[{source:i,target:o._root=new Array(4)}];i=r.pop();)for(var e=0;e<4;++e)(n=i.source[e])&&(n.length?r.push({source:n,target:i.target[e]=new Array(4)}):i.target[e]=ID(n));return o},Yu.add=s7,Yu.addAll=u7,Yu.cover=l7,Yu.data=c7,Yu.extent=f7,Yu.find=d7,Yu.remove=h7,Yu.removeAll=v7,Yu.root=p7,Yu.size=g7,Yu.visit=m7,Yu.visitAfter=y7,Yu.x=C7,Yu.y=O7;var Ju=function(o){return function(){return o}},kh=function(o){return(o()-.5)*1e-6},w7={value:function(){}};function RD(){for(var o=0,i=arguments.length,r={},n;o<i;++o){if(!(n=arguments[o]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new U2(r)}function U2(o){this._=o}function x7(o,i){return o.trim().split(/^|\s+/).map(function(r){var n="",e=r.indexOf(".");if(e>=0&&(n=r.slice(e+1),r=r.slice(0,e)),r&&!i.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}U2.prototype=RD.prototype={constructor:U2,on:function(i,r){var n=this._,e=x7(i+"",n),t,a=-1,s=e.length;if(arguments.length<2){for(;++a<s;)if((t=(i=e[a]).type)&&(t=S7(n[t],i.name)))return t;return}if(r!=null&&typeof r!="function")throw new Error("invalid callback: "+r);for(;++a<s;)if(t=(i=e[a]).type)n[t]=ND(n[t],i.name,r);else if(r==null)for(t in n)n[t]=ND(n[t],i.name,null);return this},copy:function(){var i={},r=this._;for(var n in r)i[n]=r[n].slice();return new U2(i)},call:function(i,r){if((t=arguments.length-2)>0)for(var n=new Array(t),e=0,t,a;e<t;++e)n[e]=arguments[e+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(a=this._[i],e=0,t=a.length;e<t;++e)a[e].value.apply(r,n)},apply:function(i,r,n){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var e=this._[i],t=0,a=e.length;t<a;++t)e[t].value.apply(r,n)}};function S7(o,i){for(var r=0,n=o.length,e;r<n;++r)if((e=o[r]).name===i)return e.value}function ND(o,i,r){for(var n=0,e=o.length;n<e;++n)if(o[n].name===i){o[n]=w7,o=o.slice(0,n).concat(o.slice(n+1));break}return r!=null&&o.push({name:i,value:r}),o}var A7=RD,vg=0,W0=0,$0=0,jD=1e3,V2,K0,H2=0,Xv=0,W2=0,X0=typeof performance=="object"&&performance.now?performance:Date,LD=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(o){setTimeout(o,17)};function _D(){return Xv||(LD(M7),Xv=X0.now()+W2)}function M7(){Xv=0}function fA(){this._call=this._time=this._next=null}fA.prototype=FD.prototype={constructor:fA,restart:function(i,r,n){if(typeof i!="function")throw new TypeError("callback is not a function");n=(n==null?_D():+n)+(r==null?0:+r),!this._next&&K0!==this&&(K0?K0._next=this:V2=this,K0=this),this._call=i,this._time=n,dA()},stop:function(){this._call&&(this._call=null,this._time=Infinity,dA())}};function FD(o,i,r){var n=new fA;return n.restart(o,i,r),n}function T7(){_D(),++vg;for(var o=V2,i;o;)(i=Xv-o._time)>=0&&o._call.call(null,i),o=o._next;--vg}function BD(){Xv=(H2=X0.now())+W2,vg=W0=0;try{T7()}finally{vg=0,k7(),Xv=0}}function P7(){var o=X0.now(),i=o-H2;i>jD&&(W2-=i,H2=o)}function k7(){for(var o,i=V2,r,n=Infinity;i;)i._call?(n>i._time&&(n=i._time),o=i,i=i._next):(r=i._next,i._next=null,i=o?o._next=r:V2=r);K0=o,dA(n)}function dA(o){if(!vg){W0&&(W0=clearTimeout(W0));var i=o-Xv;i>24?(o<Infinity&&(W0=setTimeout(BD,o-X0.now()-W2)),$0&&($0=clearInterval($0))):($0||(H2=X0.now(),$0=setInterval(P7,jD)),vg=1,LD(BD))}}var D7=1664525,I7=1013904223,GD=4294967296,R7=function(){var o=1;return function(){return(o=(D7*o+I7)%GD)/GD}};function N7(o){return o.x}function j7(o){return o.y}var L7=10,_7=Math.PI*(3-Math.sqrt(5)),hA=function(o){var i,r=1,n=.001,e=1-Math.pow(n,1/300),t=0,a=.6,s=new Map,u=FD(f),l=A7("tick","end"),c=R7();o==null&&(o=[]);function f(){d(),l.call("tick",i),r<n&&(u.stop(),l.call("end",i))}function d(y){var C,O=o.length,x;y===void 0&&(y=1);for(var T=0;T<y;++T)for(r+=(t-r)*e,s.forEach(function(L){L(r)}),C=0;C<O;++C)x=o[C],x.fx==null?x.x+=x.vx*=a:(x.x=x.fx,x.vx=0),x.fy==null?x.y+=x.vy*=a:(x.y=x.fy,x.vy=0);return i}function v(){for(var y=0,C=o.length,O;y<C;++y){if(O=o[y],O.index=y,O.fx!=null&&(O.x=O.fx),O.fy!=null&&(O.y=O.fy),isNaN(O.x)||isNaN(O.y)){var x=L7*Math.sqrt(.5+y),T=y*_7;O.x=x*Math.cos(T),O.y=x*Math.sin(T)}(isNaN(O.vx)||isNaN(O.vy))&&(O.vx=O.vy=0)}}function m(y){return y.initialize&&y.initialize(o,c),y}return v(),i={tick:d,restart:function(){return u.restart(f),i},stop:function(){return u.stop(),i},nodes:function(C){return arguments.length?(o=C,v(),s.forEach(m),i):o},alpha:function(C){return arguments.length?(r=+C,i):r},alphaMin:function(C){return arguments.length?(n=+C,i):n},alphaDecay:function(C){return arguments.length?(e=+C,i):+e},alphaTarget:function(C){return arguments.length?(t=+C,i):t},velocityDecay:function(C){return arguments.length?(a=1-C,i):1-a},randomSource:function(C){return arguments.length?(c=C,s.forEach(m),i):c},force:function(C,O){return arguments.length>1?(O==null?s.delete(C):s.set(C,m(O)),i):s.get(C)},find:function(C,O,x){var T=0,L=o.length,_,z,Q,q,ye;for(x==null?x=Infinity:x*=x,T=0;T<L;++T)q=o[T],_=C-q.x,z=O-q.y,Q=_*_+z*z,Q<x&&(ye=q,x=Q);return ye},on:function(C,O){return arguments.length>1?(l.on(C,O),i):l.on(C)}}},vA=function(){var o,i,r,n,e=Ju(-30),t,a=1,s=Infinity,u=.81;function l(v){var m,y=o.length,C=lA(o,N7,j7).visitAfter(f);for(n=v,m=0;m<y;++m)i=o[m],C.visit(d)}function c(){if(!!o){var v,m=o.length,y;for(t=new Array(m),v=0;v<m;++v)y=o[v],t[y.index]=+e(y,v,o)}}function f(v){var m=0,y,C,O=0,x,T,L;if(v.length){for(x=T=L=0;L<4;++L)(y=v[L])&&(C=Math.abs(y.value))&&(m+=y.value,O+=C,x+=C*y.x,T+=C*y.y);v.x=x/O,v.y=T/O}else{y=v,y.x=y.data.x,y.y=y.data.y;do m+=t[y.data.index];while(y=y.next)}v.value=m}function d(v,m,y,C){if(!v.value)return!0;var O=v.x-i.x,x=v.y-i.y,T=C-m,L=O*O+x*x;if(T*T/u<L)return L<s&&(O===0&&(O=kh(r),L+=O*O),x===0&&(x=kh(r),L+=x*x),L<a&&(L=Math.sqrt(a*L)),i.vx+=O*v.value*n/L,i.vy+=x*v.value*n/L),!0;if(v.length||L>=s)return;(v.data!==i||v.next)&&(O===0&&(O=kh(r),L+=O*O),x===0&&(x=kh(r),L+=x*x),L<a&&(L=Math.sqrt(a*L)));do v.data!==i&&(T=t[v.data.index]*n/L,i.vx+=O*T,i.vy+=x*T);while(v=v.next)}return l.initialize=function(v,m){o=v,r=m,c()},l.strength=function(v){return arguments.length?(e=typeof v=="function"?v:Ju(+v),c(),l):e},l.distanceMin=function(v){return arguments.length?(a=v*v,l):Math.sqrt(a)},l.distanceMax=function(v){return arguments.length?(s=v*v,l):Math.sqrt(s)},l.theta=function(v){return arguments.length?(u=v*v,l):Math.sqrt(u)},l},zD=function(o,i){var r,n=1;o==null&&(o=0),i==null&&(i=0);function e(){var t,a=r.length,s,u=0,l=0;for(t=0;t<a;++t)s=r[t],u+=s.x,l+=s.y;for(u=(u/a-o)*n,l=(l/a-i)*n,t=0;t<a;++t)s=r[t],s.x-=u,s.y-=l}return e.initialize=function(t){r=t},e.x=function(t){return arguments.length?(o=+t,e):o},e.y=function(t){return arguments.length?(i=+t,e):i},e.strength=function(t){return arguments.length?(n=+t,e):n},e};function F7(o){return o.index}function UD(o,i){var r=o.get(i);if(!r)throw new Error("node not found: "+i);return r}var $2=function(o){var i=F7,r=f,n,e=Ju(30),t,a,s,u,l,c=1;o==null&&(o=[]);function f(C){return 1/Math.min(s[C.source.index],s[C.target.index])}function d(C){for(var O=0,x=o.length;O<c;++O)for(var T=0,L,_,z,Q,q,ye,Ce;T<x;++T)L=o[T],_=L.source,z=L.target,Q=z.x+z.vx-_.x-_.vx||kh(l),q=z.y+z.vy-_.y-_.vy||kh(l),ye=Math.sqrt(Q*Q+q*q),ye=(ye-t[T])/ye*C*n[T],Q*=ye,q*=ye,z.vx-=Q*(Ce=u[T]),z.vy-=q*Ce,_.vx+=Q*(Ce=1-Ce),_.vy+=q*Ce}function v(){if(!!a){var C,O=a.length,x=o.length,T=new Map(a.map(function(_,z){return[i(_,z,a),_]})),L;for(C=0,s=new Array(O);C<x;++C)L=o[C],L.index=C,typeof L.source!="object"&&(L.source=UD(T,L.source)),typeof L.target!="object"&&(L.target=UD(T,L.target)),s[L.source.index]=(s[L.source.index]||0)+1,s[L.target.index]=(s[L.target.index]||0)+1;for(C=0,u=new Array(x);C<x;++C)L=o[C],u[C]=s[L.source.index]/(s[L.source.index]+s[L.target.index]);n=new Array(x),m(),t=new Array(x),y()}}function m(){if(!!a)for(var C=0,O=o.length;C<O;++C)n[C]=+r(o[C],C,o)}function y(){if(!!a)for(var C=0,O=o.length;C<O;++C)t[C]=+e(o[C],C,o)}return d.initialize=function(C,O){a=C,l=O,v()},d.links=function(C){return arguments.length?(o=C,v(),d):o},d.id=function(C){return arguments.length?(i=C,d):i},d.iterations=function(C){return arguments.length?(c=+C,d):c},d.strength=function(C){return arguments.length?(r=typeof C=="function"?C:Ju(+C),m(),d):r},d.distance=function(C){return arguments.length?(e=typeof C=="function"?C:Ju(+C),y(),d):e},d};function B7(o){return o.x+o.vx}function G7(o){return o.y+o.vy}var VD=function(o){var i,r,n,e=1,t=1;typeof o!="function"&&(o=Ju(o==null?1:+o));function a(){for(var l,c=i.length,f,d,v,m,y,C,O=0;O<t;++O)for(f=lA(i,B7,G7).visitAfter(s),l=0;l<c;++l)d=i[l],y=r[d.index],C=y*y,v=d.x+d.vx,m=d.y+d.vy,f.visit(x);function x(T,L,_,z,Q){var q=T.data,ye=T.r,Ce=y+ye;if(q){if(q.index>d.index){var Ae=v-q.x-q.vx,Pe=m-q.y-q.vy,qe=Ae*Ae+Pe*Pe;qe<Ce*Ce&&(Ae===0&&(Ae=kh(n),qe+=Ae*Ae),Pe===0&&(Pe=kh(n),qe+=Pe*Pe),qe=(Ce-(qe=Math.sqrt(qe)))/qe*e,d.vx+=(Ae*=qe)*(Ce=(ye*=ye)/(C+ye)),d.vy+=(Pe*=qe)*Ce,q.vx-=Ae*(Ce=1-Ce),q.vy-=Pe*Ce)}return}return L>v+Ce||z<v-Ce||_>m+Ce||Q<m-Ce}}function s(l){if(l.data)return l.r=r[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(!!i){var l,c=i.length,f;for(r=new Array(c),l=0;l<c;++l)f=i[l],r[f.index]=+o(f,l,i)}}return a.initialize=function(l,c){i=l,n=c,u()},a.iterations=function(l){return arguments.length?(t=+l,a):t},a.strength=function(l){return arguments.length?(e=+l,a):e},a.radius=function(l){return arguments.length?(o=typeof l=="function"?l:Ju(+l),u(),a):o},a},HD=function(o){var i=Ju(.1),r,n,e;typeof o!="function"&&(o=Ju(o==null?0:+o));function t(s){for(var u=0,l=r.length,c;u<l;++u)c=r[u],c.vx+=(e[u]-c.x)*n[u]*s}function a(){if(!!r){var s,u=r.length;for(n=new Array(u),e=new Array(u),s=0;s<u;++s)n[s]=isNaN(e[s]=+o(r[s],s,r))?0:+i(r[s],s,r)}}return t.initialize=function(s){r=s,a()},t.strength=function(s){return arguments.length?(i=typeof s=="function"?s:Ju(+s),a(),t):i},t.x=function(s){return arguments.length?(o=typeof s=="function"?s:Ju(+s),a(),t):o},t},WD=function(o){var i=Ju(.1),r,n,e;typeof o!="function"&&(o=Ju(o==null?0:+o));function t(s){for(var u=0,l=r.length,c;u<l;++u)c=r[u],c.vy+=(e[u]-c.y)*n[u]*s}function a(){if(!!r){var s,u=r.length;for(n=new Array(u),e=new Array(u),s=0;s<u;++s)n[s]=isNaN(e[s]=+o(r[s],s,r))?0:+i(r[s],s,r)}}return t.initialize=function(s){r=s,a()},t.strength=function(s){return arguments.length?(i=typeof s=="function"?s:Ju(+s),a(),t):i},t.y=function(s){return arguments.length?(o=typeof s=="function"?s:Ju(+s),a(),t):o},t};function z7(){function o(Xn){return function(){return Xn}}var i=function(dr){return dr.cluster},r=o(1),n=o(-1),e=o(100),t=o(.1),a=[0,0],s=[],u={},l=[],c=100,f=100,d={none:{x:0,y:0}},v=[],m,y="force",C=!0,O=.1;function x(Xn){if(!C)return x;m.tick(),q();for(var dr=0,ga=s.length,ca,Ta=Xn*O;dr<ga;++dr)ca=s[dr],ca.vx+=(d[i(ca)].x-ca.x)*Ta,ca.vy+=(d[i(ca)].y-ca.y)*Ta}function T(){!s||L()}function L(){if(!(!s||!s.length)){if(i(s[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Xn=_();m=hA(Xn.nodes).force("x",HD(c).strength(.1)).force("y",WD(f).strength(.1)).force("collide",VD(function(dr){return dr.r}).iterations(4)).force("charge",vA().strength(n)).force("links",$2(Xn.nodes.length?Xn.links:[]).distance(e).strength(t)),v=m.nodes(),q()}}function _(){var Xn=[],dr=[],ga={},ca=[],Ta={},La=[];return Ta=z(s),La=Q(l),ca=Object.keys(Ta),ca.forEach(function(yo,Jo){var Ti=Ta[yo];Xn.push({id:yo,size:Ti.count,r:Math.sqrt(Ti.sumforceNodeSize/Math.PI)}),ga[yo]=Jo}),La.forEach(function(yo){var Jo=Hi(yo,"source"),Ti=Hi(yo,"target"),Qu=ga[Jo],nf=ga[Ti];Qu!==void 0&&nf!==void 0&&dr.push({source:Qu,target:nf,count:yo.count})}),{nodes:Xn,links:dr}}function z(Xn){var dr={};return Xn.forEach(function(ga){var ca=i(ga);dr[ca]||(dr[ca]={count:0,sumforceNodeSize:0})}),Xn.forEach(function(ga){var ca=i(ga),Ta=r(ga),La=dr[ca];La.count=La.count+1,La.sumforceNodeSize=La.sumforceNodeSize+Math.PI*(Ta*Ta)*1.3,dr[ca]=La}),dr}function Q(Xn){var dr={},ga=[];Xn.forEach(function(Ta){var La=ye(Ta),yo=0;dr[La]!==void 0&&(yo=dr[La]),yo+=1,dr[La]=yo});var ca=Object.entries(dr);return ca.forEach(function(Ta){var La=Object(je.a)(Ta,2),yo=La[0],Jo=La[1],Ti=yo.split("~")[0],Qu=yo.split("~")[1];Ti!==void 0&&Qu!==void 0&&ga.push({source:Ti,target:Qu,count:Jo})}),ga}function q(){return d={none:{x:0,y:0}},v.forEach(function(Xn){d[Xn.id]={x:Xn.x-a[0],y:Xn.y-a[1]}}),d}function ye(Xn){var dr=Hi(Xn,"source"),ga=Hi(Xn,"target"),ca=i(u[dr]),Ta=i(u[ga]);return ca<=Ta?"".concat(ca,"~").concat(Ta):"".concat(Ta,"~").concat(ca)}function Ce(Xn){u={},Xn.forEach(function(dr){u[dr.id]=dr})}function Ae(Xn){return arguments.length?(y=Xn,T(),x):y}function Pe(Xn){return arguments.length?typeof Xn=="string"?(i=function(ga){return ga[Xn]},x):(i=Xn,x):i}function qe(Xn){return arguments.length?(C=Xn,x):C}function lt(Xn){return arguments.length?(O=Xn,x):O}function ze(Xn){return arguments.length?(c=Xn,x):c}function ht(Xn){return arguments.length?(f=Xn,x):f}function nn(Xn){return arguments.length?(Ce(Xn||[]),s=Xn||[],x):s}function Tn(Xn){return arguments.length?(l=Xn||[],T(),x):l}function Kn(Xn){return arguments.length?(typeof Xn=="function"?r=Xn:r=o(+Xn),T(),x):r}function zn(Xn){return arguments.length?(typeof Xn=="function"?n=Xn:n=o(+Xn),T(),x):n}function An(Xn){return arguments.length?(typeof Xn=="function"?e=Xn:e=o(+Xn),T(),x):e}function br(Xn){return arguments.length?(typeof Xn=="function"?t=Xn:t=o(+Xn),T(),x):t}function sn(Xn){return arguments.length?(a=Xn,x):a}return x.initialize=function(Xn){s=Xn,T()},x.template=Ae,x.groupBy=Pe,x.enableGrouping=qe,x.strength=lt,x.centerX=ze,x.centerY=ht,x.nodes=nn,x.links=Tn,x.forceNodeSize=Kn,x.nodeSize=x.forceNodeSize,x.forceCharge=zn,x.forceLinkDistance=An,x.forceLinkStrength=br,x.offset=sn,x.getFocis=q,x}var pA={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},U7=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.ticking=void 0,n&&e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}}},{key:"init",value:function(e){var t=this;t.nodes=e.nodes||[];var a=e.edges||[];t.edges=a.map(function(s){var u={},l=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(s).forEach(function(c){l.indexOf(c)>-1||(u[c]=s[c])}),u}),t.ticking=!1}},{key:"execute",value:function(e){var t=this,a=t.nodes,s=t.edges;if(!t.ticking){var u=t.forceSimulation,l=t.alphaMin,c=t.alphaDecay,f=t.alpha;if(u){if(e){if(t.clustering&&t.clusterForce&&(t.clusterForce.nodes(a),t.clusterForce.links(s)),u.nodes(a),s&&t.edgeForce)t.edgeForce.links(s);else if(s&&!t.edgeForce){var O=$2().id(function(x){return x.id}).links(s);t.edgeStrength&&O.strength(t.edgeStrength),t.linkDistance&&O.distance(t.linkDistance),t.edgeForce=O,u.force("link",O)}}t.preventOverlap&&t.overlapProcess(u),u.alpha(f).restart(),this.ticking=!0}else try{var d=vA();if(t.nodeStrength&&d.strength(t.nodeStrength),u=hA().nodes(a),t.clustering){var v=z7();v.centerX(t.center[0]).centerY(t.center[1]).template("force").strength(t.clusterFociStrength),s&&v.links(s),a&&v.nodes(a),v.forceLinkDistance(t.clusterEdgeDistance).forceLinkStrength(t.clusterEdgeStrength).forceCharge(t.clusterNodeStrength).forceNodeSize(t.clusterNodeSize),t.clusterForce=v,u.force("group",v)}if(u.force("center",zD(t.center[0],t.center[1])).force("charge",d).alpha(f).alphaDecay(c).alphaMin(l),t.preventOverlap&&t.overlapProcess(u),s){var m=$2().id(function(x){return x.id}).links(s);t.edgeStrength&&m.strength(t.edgeStrength),t.linkDistance&&m.distance(t.linkDistance),t.edgeForce=m,u.force("link",m)}if(t.workerEnabled&&!H7()&&(t.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!t.workerEnabled)u.on("tick",function(){t.tick()}).on("end",function(){t.ticking=!1,t.onLayoutEnd&&t.onLayoutEnd()}),t.ticking=!0;else{u.stop();for(var y=V7(u),C=1;C<=y;C++)u.tick(),postMessage({nodes:a,currentTick:C,totalTicks:y,type:pA.TICK},void 0);t.ticking=!1}t.forceSimulation=u,t.ticking=!0}catch(x){t.ticking=!1,console.warn(x)}}}},{key:"overlapProcess",value:function(e){var t=this,a=t.nodeSize,s=t.nodeSpacing,u,l,c=t.collideStrength;if(Wr(s)?l=function(){return s}:Th(s)?l=s:l=function(){return 0},!a)u=function(y){if(y.size){if(bu(y.size)){var C=y.size[0]>y.size[1]?y.size[0]:y.size[1];return C/2+l(y)}if(_f(y.size)){var O=y.size.width>y.size.height?y.size.width:y.size.height;return O/2+l(y)}return y.size/2+l(y)}return 10+l(y)};else if(Th(a))u=function(y){var C=a(y);return C+l(y)};else if(bu(a)){var f=a[0]>a[1]?a[0]:a[1],d=f/2;u=function(y){return d+l(y)}}else if(Wr(a)){var v=a/2;u=function(y){return v+l(y)}}else u=function(){return 10};e.force("collisionForce",VD(u).strength(c))}},{key:"updateCfg",value:function(e){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.forceSimulation=null,Object.assign(t,e)}},{key:"destroy",value:function(){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.nodes=null,e.edges=null,e.destroyed=!0}}]),r}(Iu);function V7(o){var i=o.alphaMin(),r=o.alphaTarget(),n=o.alpha(),e=Math.log((i-r)/(n-r))/Math.log(1-o.alphaDecay()),t=Math.ceil(e);return t}function H7(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function W7(o,i,r,n){o.forEach(function(e,t){o[t].children=[],o[t].parent=[]}),n?i.forEach(function(e){var t=Hi(e,"source"),a=Hi(e,"target"),s=0;t&&(s=r[t]);var u=0;a&&(u=r[a]);var l=o[s].children,c=o[u].parent;l.push(o[u].id),c.push(o[s].id)}):i.forEach(function(e){var t=Hi(e,"source"),a=Hi(e,"target"),s=0;t&&(s=r[t]);var u=0;a&&(u=r[a]);var l=o[s].children,c=o[u].children;l.push(o[u].id),c.push(o[s].id)})}function $7(o,i,r){for(var n=r.length,e=0;e<n;e++){var t=Hi(r[e],"source"),a=Hi(r[e],"target");if(o.id===t&&i.id===a||i.id===t&&o.id===a)return!0}return!1}function K7(o,i){var r=o.degree,n=i.degree;return r<n?-1:r>n?1:0}var X7=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges,s=t.length;if(s===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var u=e.center;if(s===1){t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd();return}var l=e.radius,c=e.startRadius,f=e.endRadius,d=e.divisions,v=e.startAngle,m=e.endAngle,y=(m-v)/s,C={};t.forEach(function(Ae,Pe){C[Ae.id]=Pe}),e.nodeMap=C;var O=H0(t.length,C,a);e.degrees=O,!l&&!c&&!f?l=e.height>e.width?e.width/2:e.height/2:!c&&f?c=f:c&&!f&&(f=c);var x=e.angleRatio,T=y*x,L=e.ordering,_=[];L==="topology"?_=e.topologyOrdering():L==="topology-directed"?_=e.topologyOrdering(!0):L==="degree"?_=e.degreeOrdering():_=t;for(var z=e.clockwise,Q=Math.ceil(s/d),q=0;q<s;++q){var ye=l;!ye&&c!==null&&f!==null&&(ye=c+q*(f-c)/(s-1)),ye||(ye=10+q*100/(s-1));var Ce=v+q%Q*T+2*Math.PI/d*Math.floor(q/Q);z||(Ce=m-q%Q*T-2*Math.PI/d*Math.floor(q/Q)),_[q].x=u[0]+Math.cos(Ce)*ye,_[q].y=u[1]+Math.sin(Ce)*ye,_[q].weight=O[q]}return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:_,edges:this.edges}}},{key:"topologyOrdering",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this,a=t.degrees,s=t.edges,u=t.nodes,l=sA(u),c=t.nodeMap,f=[l[0]],d=[u[0]],v=[],m=u.length;v[0]=!0,W7(l,s,c,e);var y=0;return l.forEach(function(C,O){if(O!==0)if((O===m-1||a[O]!==a[O+1]||$7(f[y],C,s))&&!v[O])f.push(C),d.push(u[c[C.id]]),v[O]=!0,y++;else{for(var x=f[y].children,T=!1,L=0;L<x.length;L++){var _=c[x[L]];if(a[_]===a[O]&&!v[_]){f.push(l[_]),d.push(u[c[l[_].id]]),v[_]=!0,T=!0;break}}for(var z=0;!T&&(v[z]||(f.push(l[z]),d.push(u[c[l[z].id]]),v[z]=!0,T=!0),z++,z!==m););}}),d}},{key:"degreeOrdering",value:function(){var e=this,t=e.nodes,a=[],s=e.degrees;return t.forEach(function(u,l){u.degree=s[l],a.push(u)}),a.sort(K7),a}},{key:"getType",value:function(){return"circular"}}]),r}(Iu),Y7=h("P81+"),J7=h.n(Y7),gA=J7.a;!gA&&typeof window!="undefined"&&(gA=window.graphlib),Array.prototype.flat||(Array.prototype.flat=function(o){var i=o||1;if(!!isFinite(i)){var r=this.length,n=[];if(this.length===0)return this;for(;i--;){var e=[],t=!1;if(n.length===0){t=!0;for(var a=0;a<r;a++)if(this[a]instanceof Array){var s;(s=n).push.apply(s,Object(We.a)(this[a]))}else n.push(this[a])}else{for(var u=0;u<n.length;u++)n[u]instanceof Array?(t=!0,e.push.apply(e,Object(We.a)(n[u]))):e.push(n[u]);n=e}if(!t&&i===Infinity)break}return n}});var Md=gA,$D=function(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev},Z7=function(i,r){if(i!=="_next"&&i!=="_prev")return r},Q7=function(){function o(){Object(me.a)(this,o);var i={};i._next=i._prev=i,this.isentinel=i}return Object(ue.a)(o,[{key:"dequeue",value:function(){var r=this.isentinel,n=r._prev;if(n!==r)return $D(n),n}},{key:"enqueue",value:function(){var r=this.isentinel,n=r._prev;if(n!==r)return $D(n),n}},{key:"toString",value:function(){for(var r=[],n=this.isentinel,e=n._prev;e!==n;)r.push(JSON.stringify(e,Z7)),e=e._prev;return"[".concat(r.join(", "),"]")}}]),o}(),q7=Q7,e9=Md.Graph,t9=function(){return 1},n9=function(i,r){var n;if(i.nodeCount()<=1)return[];var e=a9(i,r||t9),t=r9(e.graph,e.buckets,e.zeroIdx);return(n=t.map(function(a){return i.outEdges(a.v,a.w)}))===null||n===void 0?void 0:n.flat()},r9=function(i,r,n){for(var e=[],t=r[r.length-1],a=r[0],s;i.nodeCount();){for(;s=a.dequeue();)mA(i,r,n,s);for(;s=t.dequeue();)mA(i,r,n,s);if(i.nodeCount()){for(var u=r.length-2;u>0;--u)if(s=r[u].dequeue(),s){e=e.concat(mA(i,r,n,s,!0));break}}}return e},mA=function(i,r,n,e,t){var a,s,u=t?[]:void 0;return(a=i.inEdges(e.v))===null||a===void 0||a.forEach(function(l){var c=i.edge(l),f=i.node(l.v);t&&u.push({v:l.v,w:l.w}),f.out===void 0&&(f.out=0),f.out-=c,yA(r,n,f)}),(s=i.outEdges(e.v))===null||s===void 0||s.forEach(function(l){var c=i.edge(l),f=l.w,d=i.node(f);d.in===void 0&&(d.in=0),d.in-=c,yA(r,n,d)}),i.removeNode(e.v),u},a9=function(i,r){var n=new e9,e=0,t=0;i.nodes().forEach(function(c){n.setNode(c,{v:c,in:0,out:0})}),i.edges().forEach(function(c){var f=n.edge(c.v,c.w)||0,d=r==null?void 0:r(c),v=f+d;n.setEdge(c.v,c.w,v),t=Math.max(t,n.node(c.v).out+=d),e=Math.max(e,n.node(c.w).in+=d)});for(var a=[],s=t+e+3,u=0;u<s;u++)a.push(new q7);var l=e+1;return n.nodes().forEach(function(c){yA(a,l,n.node(c))}),{buckets:a,zeroIdx:l,graph:n}},yA=function(i,r,n){n.out?n.in?i[n.out-n.in+r].enqueue(n):i[i.length-1].enqueue(n):i[0].enqueue(n)},i9=n9,o9=function(i){var r=function(t){return function(a){return t.edge(a).weight}},n=i.graph().acyclicer==="greedy"?i9(i,r(i)):s9(i);n==null||n.forEach(function(e){var t=i.edge(e);i.removeEdge(e),t.forwardName=e.name,t.reversed=!0,i.setEdge(e.w,e.v,t,"rev-".concat(Math.random()))})},s9=function(i){var r=[],n={},e={},t=function a(s){var u;e.hasOwnProperty(s)||(e[s]=!0,n[s]=!0,(u=i.outEdges(s))===null||u===void 0||u.forEach(function(l){n.hasOwnProperty(l.w)?r.push(l):a(l.w)}),delete n[s])};return i.nodes().forEach(t),r},u9=function(i){i.edges().forEach(function(r){var n=i.edge(r);if(n.reversed){i.removeEdge(r);var e=n.forwardName;delete n.reversed,delete n.forwardName,i.setEdge(r.w,r.v,n,e)}})},KD={run:o9,undo:u9},XD=Md.Graph,YD=function(i,r,n,e){var t;do t="".concat(e).concat(Math.random());while(i.hasNode(t));return n.dummy=r,i.setNode(t,n),t},JD=function(i){var r=new XD().setGraph(i.graph());return i.nodes().forEach(function(n){r.setNode(n,i.node(n))}),i.edges().forEach(function(n){var e=r.edge(n.v,n.w)||{weight:0,minlen:1},t=i.edge(n);r.setEdge(n.v,n.w,{weight:e.weight+t.weight,minlen:Math.max(e.minlen,t.minlen)})}),r},l9=function(i){var r=new XD({multigraph:i.isMultigraph()}).setGraph(i.graph());return i.nodes().forEach(function(n){var e;((e=i.children(n))===null||e===void 0?void 0:e.length)||r.setNode(n,i.node(n))}),i.edges().forEach(function(n){return r.setEdge(n,i.edge(n))}),r},K2=function(i,r){var n={};return i==null||i.forEach(function(e,t){n[e]=r[t]}),n},c9=function(i){var r=i.nodes().map(function(n){var e,t={};return(e=i.outEdges(n))===null||e===void 0||e.forEach(function(a){t[a.w]=(t[a.w]||0)+i.edge(a).weight}),t});return K2(i.nodes(),r)},f9=function(i){var r=i.nodes().map(function(n){var e,t={};return(e=i.inEdges(n))===null||e===void 0||e.forEach(function(a){t[a.v]=(t[a.v]||0)+i.edge(a).weight}),t});return K2(i.nodes(),r)},d9=function(i,r){var n=i.x,e=i.y,t=r.x-n,a=r.y-e,s=i.width/2,u=i.height/2;if(!t&&!a)return{x:0,y:0};var l,c;return Math.abs(a)*s>Math.abs(t)*u?(a<0&&(u=-u),l=u*t/a,c=u):(t<0&&(s=-s),l=s,c=s*a/t),{x:n+l,y:e+c}},h9=function(i){for(var r=[],n=[],e=qD(i)+1,t=0;t<e;t++)r.push([]),n.push([]);return i.nodes().forEach(function(a){var s=i.node(a),u=s.rank;u!==void 0&&r[u]&&n[u].push(a)}),n==null||n.forEach(function(a,s){a==null||a.sort(function(u,l){var c,f;return((c=i.node(u))===null||c===void 0?void 0:c.order)-((f=i.node(l))===null||f===void 0?void 0:f.order)}),a.forEach(function(u){r[s].push(u)})}),r},ZD=function(i){var r=i.nodes().filter(function(e){return i.node(e).rank!==void 0}).map(function(e){return i.node(e).rank}),n=Math.min.apply(Math,Object(We.a)(r));i.nodes().forEach(function(e){var t=i.node(e);t.hasOwnProperty("rank")&&(t.rank||(t.rank=0),t.rank-=n)})},QD=function(i){var r=i.nodes().filter(function(l){return i.node(l).rank!==void 0}).map(function(l){return i.node(l).rank}),n=Math.min.apply(Math,Object(We.a)(r)),e=[];i.nodes().forEach(function(l){var c,f=(((c=i.node(l))===null||c===void 0?void 0:c.rank)||0)-n;e[f]||(e[f]=[]),e[f].push(l)});for(var t=0,a=i.graph().nodeRankFactor||0,s=0;s<e.length;s++){var u=e[s];u===void 0&&s%a!=0?--t:t&&(u==null||u.forEach(function(l){i.node(l).rank||(i.node(l).rank=0),i.node(l).rank+=t}))}},v9=function(i,r,n,e){var t={width:0,height:0};return Wr(n)&&Wr(e)&&(t.rank=n,t.order=e),YD(i,"border",t,r)},qD=function(i){var r=i.nodes().map(function(n){var e=i.node(n).rank;return e!==void 0?e:-Infinity});return Math.max.apply(Math,Object(We.a)(r))},p9=function(i,r){var n={lhs:[],rhs:[]};return i==null||i.forEach(function(e){r(e)?n.lhs.push(e):n.rhs.push(e)}),n},e3=function(i,r){var n=Date.now();try{return r()}finally{console.log("".concat(i," time: ").concat(Date.now()-n,"ms"))}},t3=function(i,r){return r()},bA=function(i,r){var n=Infinity,e;return i==null||i.forEach(function(t){var a=r(t);n>a&&(n=a,e=t)}),e},vs={addDummyNode:YD,simplify:JD,asNonCompoundGraph:l9,successorWeights:c9,predecessorWeights:f9,intersectRect:d9,buildLayerMatrix:h9,normalizeRanks:ZD,removeEmptyRanks:QD,addBorderNode:v9,maxRank:qD,partition:p9,time:e3,notime:t3,zipObject:K2,minBy:bA},g9=function(i){i.graph().dummyChains=[],i.edges().forEach(function(r){return m9(i,r)})},m9=function(i,r){var n,e,t=r.v,a=i.node(t).rank,s=r.w,u=i.node(s).rank,l=r.name,c=i.edge(r),f=c.labelRank;if(u!==a+1){i.removeEdge(r);var d,v,m;for(m=0,++a;a<u;++m,++a)c.points=[],v={edgeLabel:c,width:0,height:0,edgeObj:r,rank:a},d=vs.addDummyNode(i,"edge",v,"_d"),a===f&&(v.width=c.width,v.height=c.height,v.dummy="edge-label",v.labelpos=c.labelpos),i.setEdge(t,d,{weight:c.weight},l),m===0&&(i.graph().dummyChains||(i.graph().dummyChains=[]),(e=(n=i.graph())===null||n===void 0?void 0:n.dummyChains)===null||e===void 0||e.push(d)),t=d;i.setEdge(t,s,{weight:c.weight},l)}},y9=function(i){var r;(r=i.graph().dummyChains)===null||r===void 0||r.forEach(function(n){var e,t=i.node(n),a=t.edgeLabel,s;t.edgeObj&&i.setEdge(t.edgeObj,a);for(var u=n;t.dummy;)s=(e=i.successors(u))===null||e===void 0?void 0:e[0],i.removeNode(u),a.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(a.x=t.x,a.y=t.y,a.width=t.width,a.height=t.height),u=s,t=i.node(u)})},n3={run:g9,undo:y9},CA=function(i){var r,n={},e=function t(a){var s,u=i.node(a);if(n.hasOwnProperty(a))return u.rank;n[a]=!0;var l=(s=i.outEdges(a))===null||s===void 0?void 0:s.map(function(f){return t(f.w)-i.edge(f).minlen||Infinity}),c=Math.min.apply(Math,Object(We.a)(l));return(c===Number.POSITIVE_INFINITY||c===void 0||c===null)&&(c=0),u.rank=c,c};(r=i.sources())===null||r===void 0||r.forEach(function(t){return e(t)})},r3=function(i){var r,n={},e=0,t=function s(u){var l,c=i.node(u);if(n.hasOwnProperty(u))return c.rank;n[u]=!0;var f=(l=i.outEdges(u))===null||l===void 0?void 0:l.map(function(v){return s(v.w)-i.edge(v).minlen||Infinity}),d=Math.min.apply(Math,Object(We.a)(f));return(d===Number.POSITIVE_INFINITY||d===void 0||d===null)&&(d=0),c.rank=d,e=Math.min(c.rank,e),c.rank};(r=i.sources())===null||r===void 0||r.forEach(function(s){return t(s)}),e+=1;var a=function s(u,l){var c,f=i.node(u),d=isNaN(f.layer)?l:f.layer;(f.rank===void 0||f.rank<d)&&(f.rank=d),(c=i.outEdges(u))===null||c===void 0||c.map(function(v){s(v.w,d+i.edge(v).minlen)})};i.nodes().forEach(function(s){var u=i.node(s);isNaN(u.layer)?u.rank-=e:a(s,u.layer)})},Td=function(i,r){return i.node(r.w).rank-i.node(r.v).rank-i.edge(r).minlen},xq={longestPath:CA,longestPathWithLayer:r3,slack:Td},a3=Md.Graph,i3=function(i){var r=new a3({directed:!1}),n=i.nodes()[0],e=i.nodeCount();r.setNode(n,{});for(var t,a;b9(r,i)<e;)t=s3(r,i),a=r.hasNode(t.v)?Td(i,t):-Td(i,t),u3(r,i,a);return r},b9=function(i,r){var n=function e(t){r.nodeEdges(t).forEach(function(a){var s=a.v,u=t===s?a.w:s;!i.hasNode(u)&&!Td(r,a)&&(i.setNode(u,{}),i.setEdge(t,u,{}),e(u))})};return i.nodes().forEach(n),i.nodeCount()},o3=function(i){var r=new a3({directed:!1}),n=i.nodes()[0],e=i.nodeCount();r.setNode(n,{});for(var t,a;C9(r,i)<e;)t=s3(r,i),a=r.hasNode(t.v)?Td(i,t):-Td(i,t),u3(r,i,a);return r},C9=function(i,r){var n=function e(t){var a;(a=r.nodeEdges(t))===null||a===void 0||a.forEach(function(s){var u=s.v,l=t===u?s.w:u;!i.hasNode(l)&&(r.node(l).layer!==void 0||!Td(r,s))&&(i.setNode(l,{}),i.setEdge(t,l,{}),e(l))})};return i.nodes().forEach(n),i.nodeCount()},s3=function(i,r){return bA(r.edges(),function(n){return i.hasNode(n.v)!==i.hasNode(n.w)?Td(r,n):Infinity})},u3=function(i,r,n){i.nodes().forEach(function(e){r.node(e).rank||(r.node(e).rank=0),r.node(e).rank+=n})},Sq={feasibleTree:i3,feasibleTreeWithLayer:o3},l3=Md.alg,E9=l3.preorder,O9=l3.postorder,Yv=function(i){i=JD(i),CA(i);var r=i3(i);OA(r),EA(r,i);for(var n,e;n=f3(r);)e=d3(r,i,n),h3(r,i,n,e)},EA=function(i,r){var n=O9(i,i.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(function(e){w9(i,r,e)})},w9=function(i,r,n){var e=i.node(n),t=e.parent;i.edge(n,t).cutvalue=c3(i,r,n)},c3=function(i,r,n){var e,t=i.node(n),a=t.parent,s=!0,u=r.edge(n,a),l=0;return u||(s=!1,u=r.edge(a,n)),l=u.weight,(e=r.nodeEdges(n))===null||e===void 0||e.forEach(function(c){var f=c.v===n,d=f?c.w:c.v;if(d!==a){var v=f===s,m=r.edge(c).weight;if(l+=v?m:-m,A9(i,n,d)){var y=i.edge(n,d).cutvalue;l+=v?-y:y}}}),l},OA=function(i,r){r!==void 0&&(r=i.nodes()[0]),x9(i,{},1,r)},x9=function o(i,r,n,e,t){var a,s=n,u=n,l=i.node(e);return r[e]=!0,(a=i.neighbors(e))===null||a===void 0||a.forEach(function(c){r.hasOwnProperty(c)||(u=o(i,r,u,c,e))}),l.low=s,l.lim=u++,t?l.parent=t:delete l.parent,u},f3=function(i){return i.edges().find(function(r){return i.edge(r).cutvalue<0})},d3=function(i,r,n){var e=n.v,t=n.w;r.hasEdge(e,t)||(e=n.w,t=n.v);var a=i.node(e),s=i.node(t),u=a,l=!1;a.lim>s.lim&&(u=s,l=!0);var c=r.edges().filter(function(f){return l===v3(i,i.node(f.v),u)&&l!==v3(i,i.node(f.w),u)});return bA(c,function(f){return Td(r,f)})},h3=function(i,r,n,e){var t=n.v,a=n.w;i.removeEdge(t,a),i.setEdge(e.v,e.w,{}),OA(i),EA(i,r),S9(i,r)},S9=function(i,r){var n=i.nodes().find(function(t){return!r.node(t).parent}),e=E9(i,n);e=e==null?void 0:e.slice(1),e==null||e.forEach(function(t){var a=i.node(t).parent,s=r.edge(t,a),u=!1;s||(s=r.edge(a,t),u=!0),r.node(t).rank=r.node(a).rank+(u?s.minlen:-s.minlen)})},A9=function(i,r,n){return i.hasEdge(r,n)},v3=function(i,r,n){return n.low<=r.lim&&r.lim<=n.lim};Yv.initLowLimValues=OA,Yv.initCutValues=EA,Yv.calcCutValue=c3,Yv.leaveEdge=f3,Yv.enterEdge=d3,Yv.exchangeEdges=h3;var M9=Yv,T9=function(i){switch(i.graph().ranker){case"network-simplex":k9(i);break;case"tight-tree":p3(i);break;case"longest-path":P9(i);break;default:p3(i)}},P9=CA,p3=function(i){r3(i),o3(i)},k9=function(i){M9(i)},D9=T9,I9=function(i){var r,n=N9(i);(r=i.graph().dummyChains)===null||r===void 0||r.forEach(function(e){var t,a,s=i.node(e),u=s.edgeObj;if(!!u)for(var l=R9(i,n,u.v,u.w),c=l.path,f=l.lca,d=0,v=c[d],m=!0;e!==u.w;){if(s=i.node(e),m){for(;(v=c[d])!==f&&i.node(v).maxRank<s.rank;)d++;v===f&&(m=!1)}if(!m){for(;d<c.length-1&&((t=i.node(v=c[d+1]))===null||t===void 0?void 0:t.minRank)<=s.rank;)d++;v=c[d]}i.setParent(e,v),e=(a=i.successors(e))===null||a===void 0?void 0:a[0]}})},R9=function(i,r,n,e){var t=[],a=[],s=Math.min(r[n].low,r[e].low),u=Math.max(r[n].lim,r[e].lim),l,c;l=n;do l=i.parent(l),t.push(l);while(l&&(r[l].low>s||u>r[l].lim));for(c=l,l=e;(l=i.parent(l))!==c;)a.push(l);return{lca:c,path:t.concat(a.reverse())}},N9=function(i){var r,n={},e=0,t=function a(s){var u,l=e;(u=i.children(s))===null||u===void 0||u.forEach(a),n[s]={low:l,lim:e++}};return(r=i.children())===null||r===void 0||r.forEach(t),n},j9=I9,L9=function(i){var r,n=vs.addDummyNode(i,"root",{},"_root"),e=F9(i),t=Math.max.apply(Math,Object(We.a)(Object.values(e)))-1,a=2*t+1;i.graph().nestingRoot=n,i.edges().forEach(function(u){i.edge(u).minlen*=a});var s=B9(i)+1;(r=i.children())===null||r===void 0||r.forEach(function(u){_9(i,n,a,s,t,e,u)}),i.graph().nodeRankFactor=a},_9=function o(i,r,n,e,t,a,s){var u=i.children(s);if(!(u==null?void 0:u.length)){s!==r&&i.setEdge(r,s,{weight:0,minlen:n});return}var l=vs.addBorderNode(i,"_bt"),c=vs.addBorderNode(i,"_bb"),f=i.node(s);i.setParent(l,s),f.borderTop=l,i.setParent(c,s),f.borderBottom=c,u==null||u.forEach(function(d){o(i,r,n,e,t,a,d);var v=i.node(d),m=v.borderTop?v.borderTop:d,y=v.borderBottom?v.borderBottom:d,C=v.borderTop?e:2*e,O=m!==y?1:t-a[s]+1;i.setEdge(l,m,{minlen:O,weight:C,nestingEdge:!0}),i.setEdge(y,c,{minlen:O,weight:C,nestingEdge:!0})}),i.parent(s)||i.setEdge(r,l,{weight:0,minlen:t+a[s]})},F9=function(i){var r,n={},e=function t(a,s){var u=i.children(a);u==null||u.forEach(function(l){return t(l,s+1)}),n[a]=s};return(r=i.children())===null||r===void 0||r.forEach(function(t){return e(t,1)}),n},B9=function(i){var r=0;return i.edges().forEach(function(n){r+=i.edge(n).weight}),r},G9=function(i){var r=i.graph();r.nestingRoot&&i.removeNode(r.nestingRoot),delete r.nestingRoot,i.edges().forEach(function(n){var e=i.edge(n);e.nestingEdge&&i.removeEdge(n)})},g3={run:L9,cleanup:G9},z9=function(i){var r,n=function e(t){var a=i.children(t),s=i.node(t);if((a==null?void 0:a.length)&&a.forEach(function(c){return e(c)}),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(var u=s.minRank,l=s.maxRank+1;u<l;++u)m3(i,"borderLeft","_bl",t,s,u),m3(i,"borderRight","_br",t,s,u)}};(r=i.children())===null||r===void 0||r.forEach(function(e){return n(e)})},m3=function(i,r,n,e,t,a){var s={rank:a,width:0,height:0,borderType:r},u=t[r][a-1],l=vs.addDummyNode(i,"border",s,n);t[r][a]=l,i.setParent(l,e),u&&i.setEdge(u,l,{weight:1})},U9=z9,V9=function(i){var r,n=(r=i.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(n==="lr"||n==="rl")&&y3(i)},H9=function(i){var r,n=(r=i.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(n==="bt"||n==="rl")&&W9(i),(n==="lr"||n==="rl")&&($9(i),y3(i))},y3=function(i){i.nodes().forEach(function(r){b3(i.node(r))}),i.edges().forEach(function(r){b3(i.edge(r))})},b3=function(i){var r=i.width;i.width=i.height,i.height=r},W9=function(i){i.nodes().forEach(function(r){wA(i.node(r))}),i.edges().forEach(function(r){var n,e=i.edge(r);(n=e.points)===null||n===void 0||n.forEach(function(t){return wA(t)}),e.hasOwnProperty("y")&&wA(e)})},wA=function(i){i.y=-i.y},$9=function(i){i.nodes().forEach(function(r){xA(i.node(r))}),i.edges().forEach(function(r){var n,e=i.edge(r);(n=e.points)===null||n===void 0||n.forEach(function(t){return xA(t)}),e.hasOwnProperty("x")&&xA(e)})},xA=function(i){var r=i.x;i.x=i.y,i.y=r},C3={adjust:V9,undo:H9},K9=function(i){for(var r={},n=i.nodes().filter(function(d){var v;return!((v=i.children(d))===null||v===void 0?void 0:v.length)}),e=n.map(function(d){return i.node(d).rank}),t=Math.max.apply(Math,Object(We.a)(e)),a=[],s=0;s<t+1;s++)a.push([]);var u=function d(v){var m;if(!r.hasOwnProperty(v)){r[v]=!0;var y=i.node(v);isNaN(y.rank)||a[y.rank].push(v),(m=i.successors(v))===null||m===void 0||m.forEach(function(C){return d(C)})}},l=n.sort(function(d,v){return i.node(d).rank-i.node(v).rank}),c=l.filter(function(d){return i.node(d).fixorder!==void 0}),f=c.sort(function(d,v){return i.node(d).fixorder-i.node(v).fixorder});return f==null||f.forEach(function(d){isNaN(i.node(d).rank)||a[i.node(d).rank].push(d),r[d]=!0}),l==null||l.forEach(u),a},E3=K9,X9=function(i,r,n){for(var e=K2(n,n.map(function(f,d){return d})),t=r.map(function(f){var d,v=(d=i.outEdges(f))===null||d===void 0?void 0:d.map(function(m){return{pos:e[m.w]||0,weight:i.edge(m).weight}});return v==null?void 0:v.sort(function(m,y){return m.pos-y.pos})}),a=t.flat().filter(function(f){return f!==void 0}),s=1;s<n.length;)s<<=1;var u=2*s-1;s-=1;var l=Array(u).fill(0,0,u),c=0;return a==null||a.forEach(function(f){var d=f.pos+s;l[d]+=f.weight;for(var v=0;d>0;)d%2&&(v+=l[d+1]),d=d-1>>1,l[d]+=f.weight;c+=f.weight*v}),c},Y9=function(i,r){for(var n=0,e=1;e<(r==null?void 0:r.length);++e)n+=X9(i,r[e-1],r[e]);return n},O3=Y9,J9=Md.Graph,Z9=function(i,r,n){var e=Q9(i),t=new J9({compound:!0}).setGraph({root:e}).setDefaultNodeLabel(function(a){return i.node(a)});return i.nodes().forEach(function(a){var s=i.node(a),u=i.parent(a);(s.rank===r||s.minRank<=r&&r<=s.maxRank)&&(t.setNode(a),t.setParent(a,u||e),i[n](a).forEach(function(l){var c=l.v===a?l.w:l.v,f=t.edge(c,a),d=f!==void 0?f.weight:0;t.setEdge(c,a,{weight:i.edge(l).weight+d})}),s.hasOwnProperty("minRank")&&t.setNode(a,{borderLeft:s.borderLeft[r],borderRight:s.borderRight[r]}))}),t},Q9=function(i){for(var r;i.hasNode(r="_root".concat(Math.random())););return r},q9=Z9,eV=function(i,r,n){var e={},t;n==null||n.forEach(function(a){for(var s=i.parent(a),u,l;s;){if(u=i.parent(s),u?(l=e[u],e[u]=s):(l=t,t=s),l&&l!==s){r.setEdge(l,s);return}s=u}})},tV=eV,nV=function(i,r){return r.map(function(n){var e=i.inEdges(n);if(!(e==null?void 0:e.length))return{v:n};{var t={sum:0,weight:0};return e==null||e.forEach(function(a){var s=i.edge(a),u=i.node(a.v);t.sum+=s.weight*u.order,t.weight+=s.weight}),{v:n,barycenter:t.sum/t.weight,weight:t.weight}}})},rV=nV,aV=function(i,r){var n,e,t,a={};i==null||i.forEach(function(u,l){var c=a[u.v]={i:l,indegree:0,in:[],out:[],vs:[u.v]};u.barycenter!==void 0&&(c.barycenter=u.barycenter,c.weight=u.weight)}),(n=r.edges())===null||n===void 0||n.forEach(function(u){var l=a[u.v],c=a[u.w];l!==void 0&&c!==void 0&&(c.indegree++,l.out.push(a[u.w]))});var s=(t=(e=Object.values(a)).filter)===null||t===void 0?void 0:t.call(e,function(u){return!u.indegree});return iV(s)},iV=function(i){for(var r,n,e=[],t=function(f){return function(d){d.merged||(d.barycenter===void 0||f.barycenter===void 0||d.barycenter>=f.barycenter)&&oV(f,d)}},a=function(f){return function(d){d.in.push(f),--d.indegree==0&&i.push(d)}},s=function(){var f=i.pop();e.push(f),(r=f.in.reverse())===null||r===void 0||r.forEach(function(d){return t(f)(d)}),(n=f.out)===null||n===void 0||n.forEach(function(d){return a(f)(d)})};i==null?void 0:i.length;)s();var u=e.filter(function(c){return!c.merged}),l=["vs","i","barycenter","weight"];return u.map(function(c){var f={};return l==null||l.forEach(function(d){c[d]!==void 0&&(f[d]=c[d])}),f})},oV=function(i,r){var n,e=0,t=0;i.weight&&(e+=i.barycenter*i.weight,t+=i.weight),r.weight&&(e+=r.barycenter*r.weight,t+=r.weight),i.vs=(n=r.vs)===null||n===void 0?void 0:n.concat(i.vs),i.barycenter=e/t,i.weight=t,i.i=Math.min(r.i,i.i),r.merged=!0},sV=aV,uV=function(i,r,n){var e=vs.partition(i,function(d){return d.hasOwnProperty("fixorder")&&!isNaN(d.fixorder)||d.hasOwnProperty("barycenter")}),t=e.lhs,a=e.rhs.sort(function(d,v){return-d.i- -v.i}),s=[],u=0,l=0,c=0;t==null||t.sort(lV(!!r,!!n)),c=w3(s,a,c),t==null||t.forEach(function(d){var v;c+=(v=d.vs)===null||v===void 0?void 0:v.length,s.push(d.vs),u+=d.barycenter*d.weight,l+=d.weight,c=w3(s,a,c)});var f={vs:s.flat()};return l&&(f.barycenter=u/l,f.weight=l),f},w3=function(i,r,n){for(var e=n,t;r.length&&(t=r[r.length-1]).i<=e;)r.pop(),i==null||i.push(t.vs),e++;return e},lV=function(i,r){return function(n,e){if(n.fixorder!==void 0&&e.fixorder!==void 0)return n.fixorder-e.fixorder;if(n.barycenter<e.barycenter)return-1;if(n.barycenter>e.barycenter)return 1;if(r&&n.order!==void 0&&e.order!==void 0){if(n.order<e.order)return-1;if(n.order>e.order)return 1}return i?e.i-n.i:n.i-e.i}},cV=uV,fV=function o(i,r,n,e,t){var a,s,u,l,c=i.children(r),f=i.node(r),d=f?f.borderLeft:void 0,v=f?f.borderRight:void 0,m={};d&&(c=c==null?void 0:c.filter(function(L){return L!==d&&L!==v}));var y=rV(i,c||[]);y==null||y.forEach(function(L){var _;if((_=i.children(L.v))===null||_===void 0?void 0:_.length){var z=o(i,L.v,n,e);m[L.v]=z,z.hasOwnProperty("barycenter")&&hV(L,z)}});var C=sV(y,n);dV(C,m),(a=C.filter(function(L){var _;return!!L.vs||((_=L.vs)===null||_===void 0?void 0:_.length)>0}))===null||a===void 0||a.forEach(function(L){var _=i.node(L.vs[0]);L.fixorder=_.fixorder,L.order=_.order});var O=cV(C,e,t);if(d&&(O.vs=[d,O.vs,v].flat(),(s=i.predecessors(d))===null||s===void 0?void 0:s.length)){var x=i.node(((u=i.predecessors(d))===null||u===void 0?void 0:u[0])||{}),T=i.node(((l=i.predecessors(v))===null||l===void 0?void 0:l[0])||{});O.hasOwnProperty("barycenter")||(O.barycenter=0,O.weight=0),O.barycenter=(O.barycenter*O.weight+x.order+T.order)/(O.weight+2),O.weight+=2}return O},dV=function(i,r){i==null||i.forEach(function(n){var e,t=(e=n.vs)===null||e===void 0?void 0:e.map(function(a){return r[a]?r[a].vs:a});n.vs=t.flat()})},hV=function(i,r){i.barycenter!==void 0?(i.barycenter=(i.barycenter*i.weight+r.barycenter*r.weight)/(i.weight+r.weight),i.weight+=r.weight):(i.barycenter=r.barycenter,i.weight=r.weight)},vV=fV,pV=Md.Graph,gV=function(i){for(var r=vs.maxRank(i),n=[],e=[],t=1;t<r+1;t++)n.push(t);for(var a=r-1;a>-1;a--)e.push(a);var s=x3(i,n,"inEdges"),u=x3(i,e,"outEdges"),l=E3(i);SA(i,l);for(var c=Number.POSITIVE_INFINITY,f,d=0,v=0;v<4;++d,++v){S3(d%2?s:u,d%4>=2),l=vs.buildLayerMatrix(i);var m=O3(i,l);m<c&&(v=0,f=sA(l),c=m)}l=E3(i),SA(i,l);for(var y=0,C=0;C<4;++y,++C){S3(y%2?s:u,y%4>=2,!0),l=vs.buildLayerMatrix(i);var O=O3(i,l);O<c&&(C=0,f=sA(l),c=O)}SA(i,f)},x3=function(i,r,n){return r.map(function(e){return q9(i,e,n)})},S3=function(i,r,n){var e=new pV;i==null||i.forEach(function(t){for(var a,s=t.graph().root,u=vV(t,s,e,r,n),l=0;l<((a=u.vs)===null||a===void 0?void 0:a.length);l++)t.node(u.vs[l]).order=l;tV(t,e,u.vs)})},SA=function(i,r){r==null||r.forEach(function(n){n==null||n.forEach(function(e,t){i.node(e).order=t})})},mV=gV,yV=Md.Graph,AA=function(i,r){var n={},e=function(a,s){var u=0,l=0,c=a.length,f=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach(function(d,v){var m,y=bV(i,d),C=y?i.node(y).order:c;(y||d===f)&&((m=s.slice(l,v+1))===null||m===void 0||m.forEach(function(O){var x;(x=i.predecessors(O))===null||x===void 0||x.forEach(function(T){var L=i.node(T),_=L.order;(_<u||C<_)&&!(L.dummy&&i.node(O).dummy)&&TA(n,T,O)})}),l=v+1,u=C)}),s};return(r==null?void 0:r.length)&&r.reduce(e),n},MA=function(i,r){var n={},e=function(s,u,l,c,f){for(var d,v=[],m=u;m<l;m++)v.push(m);v.forEach(function(y){var C;d=s[y],i.node(d).dummy&&((C=i.predecessors(d))===null||C===void 0||C.forEach(function(O){var x=i.node(O);x.dummy&&(x.order<c||x.order>f)&&TA(n,O,d)}))})},t=function(s,u){var l=-1,c,f=0;return u==null||u.forEach(function(d,v){if(i.node(d).dummy==="border"){var m=i.predecessors(d)||[];m.length&&(c=i.node(m[0]).order,e(u,f,v,l,c),f=v,l=c)}e(u,f,u.length,c,s.length)}),u};return(r==null?void 0:r.length)&&r.reduce(t),n},bV=function(i,r){var n;if(i.node(r).dummy)return(n=i.predecessors(r))===null||n===void 0?void 0:n.find(function(e){return i.node(e).dummy})},TA=function(i,r,n){var e=r,t=n;if(e>t){var a=e;e=t,t=a}var s=i[e];s||(i[e]=s={}),s[t]=!0},A3=function(i,r,n){var e=r,t=n;if(e>t){var a=r;e=t,t=a}return i[e]&&i[e].hasOwnProperty(t)},PA=function(i,r,n,e){var t={},a={},s={};return r==null||r.forEach(function(u){u==null||u.forEach(function(l,c){t[l]=l,a[l]=l,s[l]=c})}),r==null||r.forEach(function(u){var l=-1;u==null||u.forEach(function(c){var f=e(c);if(f.length){f=f.sort(function(C,O){return s[C]-s[O]});for(var d=(f.length-1)/2,v=Math.floor(d),m=Math.ceil(d);v<=m;++v){var y=f[v];a[c]===c&&l<s[y]&&!A3(n,c,y)&&(a[y]=c,a[c]=t[c]=t[y],l=s[y])}}})}),{root:t,align:a}},kA=function(i,r,n,e,t){var a,s={},u=CV(i,r,n,t),l=t?"borderLeft":"borderRight",c=function(m,y){for(var C=u.nodes(),O=C.pop(),x={};O;)x[O]?m(O):(x[O]=!0,C.push(O),C=C.concat(y(O))),O=C.pop()},f=function(m){s[m]=(u.inEdges(m)||[]).reduce(function(y,C){return Math.max(y,(s[C.v]||0)+u.edge(C))},0)},d=function(m){var y=(u.outEdges(m)||[]).reduce(function(O,x){return Math.min(O,(s[x.w]||0)-u.edge(x))},Number.POSITIVE_INFINITY),C=i.node(m);y!==Number.POSITIVE_INFINITY&&C.borderType!==l&&(s[m]=Math.max(s[m],y))};return c(f,u.predecessors.bind(u)),c(d,u.successors.bind(u)),(a=Object.values(e))===null||a===void 0||a.forEach(function(v){s[v]=s[n[v]]}),s},CV=function(i,r,n,e){var t=new yV,a=i.graph(),s=OV(a.nodesep,a.edgesep,e);return r==null||r.forEach(function(u){var l;u==null||u.forEach(function(c){var f=n[c];if(t.setNode(f),l){var d=n[l],v=t.edge(d,f);t.setEdge(d,f,Math.max(s(i,c,l),v||0))}l=c})}),t},DA=function(i,r){return vs.minBy(Object.values(r),function(n){var e,t=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return(e=Object.keys(n))===null||e===void 0||e.forEach(function(s){var u=n[s],l=wV(i,s)/2;t=Math.max(u+l,t),a=Math.min(u-l,a)}),t-a})};function IA(o,i){var r=Object.values(i),n=Math.min.apply(Math,r),e=Math.max.apply(Math,r);["u","d"].forEach(function(t){["l","r"].forEach(function(a){var s=t+a,u=o[s],l;if(u!==i){var c=Object.values(u);l=a==="l"?n-Math.min.apply(Math,c):e-Math.max.apply(Math,c),l&&(o[s]={},Object.keys(u).forEach(function(f){o[s][f]=u[f]+l}))}})})}var RA=function(i,r){var n={};return Object.keys(i.ul).forEach(function(e){if(r)n[e]=i[r.toLowerCase()][e];else{var t=Object.values(i).map(function(s){return s[e]}),a=t.sort(function(s,u){return s-u});n[e]=(a[1]+a[2])/2}}),n},EV=function(i){var r=vs.buildLayerMatrix(i),n=Object.assign(AA(i,r),MA(i,r)),e={},t;["u","d"].forEach(function(s){t=s==="u"?r:Object.values(r).reverse(),["l","r"].forEach(function(u){u==="r"&&(t=t.map(function(d){return Object.values(d).reverse()}));var l=(s==="u"?i.predecessors:i.successors).bind(i),c=PA(i,t,n,l),f=kA(i,t,c.root,c.align,u==="r");u==="r"&&(f=Object.values(f).map(function(d){return-d})),e[s+u]=f})});var a=DA(i,e);return IA(e,a),RA(e,i.graph().align)},OV=function(i,r,n){return function(e,t,a){var s=e.node(t),u=e.node(a),l=0,c;if(l+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":c=-s.width/2;break;case"r":c=s.width/2;break}if(c&&(l+=n?c:-c),c=0,l+=(s.dummy?r:i)/2,l+=(u.dummy?r:i)/2,l+=u.width/2,u.hasOwnProperty("labelpos"))switch((u.labelpos||"").toLowerCase()){case"l":c=u.width/2;break;case"r":c=-u.width/2;break}return c&&(l+=n?c:-c),c=0,l}},wV=function(i,r){var n;return((n=i.node(r))===null||n===void 0?void 0:n.width)||0},Aq={positionX:EV,findType1Conflicts:AA,findType2Conflicts:MA,addConflict:TA,hasConflict:A3,verticalAlignment:PA,horizontalCompaction:kA,alignCoordinates:IA,findSmallestWidthAlignment:DA,balance:RA},xV=function(i){var r=vs.buildLayerMatrix(i),n=i.graph().ranksep,e=0;r==null||r.forEach(function(t){var a=t.map(function(u){return i.node(u).height}),s=Math.max.apply(Math,Object(We.a)(a));t==null||t.forEach(function(u){i.node(u).y=e+s/2}),e+=s+n})},SV=function(i){var r=vs.buildLayerMatrix(i),n=Object.assign(AA(i,r),MA(i,r)),e={},t;["u","d"].forEach(function(s){t=s==="u"?r:Object.values(r).reverse(),["l","r"].forEach(function(u){u==="r"&&(t=t.map(function(d){return Object.values(d).reverse()}));var l=(s==="u"?i.predecessors:i.successors).bind(i),c=PA(i,t,n,l),f=kA(i,t,c.root,c.align,u==="r");u==="r"&&Object.keys(f).forEach(function(d){return f[d]=-f[d]}),e[s+u]=f})});var a=DA(i,e);return a&&IA(e,a),RA(e,i.graph().align)},AV=function(i){var r;i=vs.asNonCompoundGraph(i),xV(i);var n=SV(i);(r=Object.keys(n))===null||r===void 0||r.forEach(function(e){i.node(e).x=n[e]})},MV=AV,TV=function(i,r){for(var n=i.nodes().filter(function(u){var l;return!((l=i.children(u))===null||l===void 0?void 0:l.length)}),e=n.map(function(u){return i.node(u).rank}),t=Math.max.apply(Math,Object(We.a)(e)),a=[],s=0;s<t+1;s++)a.push([]);r==null||r.forEach(function(u){var l=i.node(u);!l||l.dummy||isNaN(l.rank)||(l.fixorder=a[l.rank].length,a[l.rank].push(u))})},PV=TV,kV=Md.Graph,DV=function(i,r){var n=r&&r.debugTiming?vs.time:vs.notime;n("layout",function(){r&&!r.keepNodeOrder&&r.prevGraph&&n("  inheritOrder",function(){RV(i,r.prevGraph)});var e=n("  buildLayoutGraph",function(){return GV(i)});r&&r.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",function(){zV(e)});try{n("  runLayout",function(){IV(e,n,r)})}catch(t){if(t.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,t);return}throw t}n("  updateInputGraph",function(){NV(i,e)})})},IV=function(i,r,n){r("    removeSelfEdges",function(){JV(i)}),r("    acyclic",function(){KD.run(i)}),r("    nestingGraph.run",function(){g3.run(i)}),r("    rank",function(){D9(vs.asNonCompoundGraph(i))}),r("    injectEdgeLabelProxies",function(){UV(i)}),r("    removeEmptyRanks",function(){QD(i)}),r("    nestingGraph.cleanup",function(){g3.cleanup(i)}),r("    normalizeRanks",function(){ZD(i)}),r("    assignRankMinMax",function(){VV(i)}),r("    removeEdgeLabelProxies",function(){HV(i)}),r("    normalize.run",function(){n3.run(i)}),r("    parentDummyChains",function(){j9(i)}),r("    addBorderSegments",function(){U9(i)}),n&&n.keepNodeOrder&&r("    initDataOrder",function(){PV(i,n.nodeOrder)}),r("    order",function(){mV(i)}),r("    insertSelfEdges",function(){ZV(i)}),r("    adjustCoordinateSystem",function(){C3.adjust(i)}),r("    position",function(){MV(i)}),r("    positionSelfEdges",function(){QV(i)}),r("    removeBorderNodes",function(){YV(i)}),r("    normalize.undo",function(){n3.undo(i)}),r("    fixupEdgeLabelCoords",function(){KV(i)}),r("    undoCoordinateSystem",function(){C3.undo(i)}),r("    translateGraph",function(){WV(i)}),r("    assignNodeIntersects",function(){$V(i)}),r("    reversePoints",function(){XV(i)}),r("    acyclic.undo",function(){KD.undo(i)})},RV=function(i,r){var n=r._nodes||{};i.nodes().forEach(function(e){var t=i.node(e);n[e]!==void 0?(t.fixorder=n[e]._order,delete n[e]._order):delete t.fixorder})},NV=function(i,r){i.nodes().forEach(function(n){var e,t=i.node(n),a=r.node(n);t&&(t.x=a.x,t.y=a.y,t._order=a.order,t._rank=a.rank,((e=r.children(n))===null||e===void 0?void 0:e.length)&&(t.width=a.width,t.height=a.height))}),i.edges().forEach(function(n){var e=i.edge(n),t=r.edge(n);e.points=t.points,t.hasOwnProperty("x")&&(e.x=t.x,e.y=t.y)}),i.graph().width=r.graph().width,i.graph().height=r.graph().height},jV=["nodesep","edgesep","ranksep","marginx","marginy"],LV={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},NA=["acyclicer","ranker","rankdir","align"],_V=["width","height","layer","fixorder"],M3={width:0,height:0},FV=["minlen","weight","width","height","labeloffset"],BV={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},jA=["labelpos"],GV=function(i){var r=new kV({multigraph:!0,compound:!0}),n=_A(i.graph()),e={};return NA==null||NA.forEach(function(t){n[t]!==void 0&&(e[t]=n[t])}),r.setGraph(Object.assign({},LV,LA(n,jV),e)),i.nodes().forEach(function(t){var a=_A(i.node(t)),s=LA(a,_V);Object.keys(M3).forEach(function(u){s[u]===void 0&&(s[u]=M3[u])}),r.setNode(t,s),r.setParent(t,i.parent(t))}),i.edges().forEach(function(t){var a=_A(i.edge(t)),s={};jA==null||jA.forEach(function(u){a[u]!==void 0&&(s[u]=a[u])}),r.setEdge(t,Object.assign({},BV,LA(a,FV),s))}),r},zV=function(i){var r=i.graph();r.ranksep||(r.ranksep=0),r.ranksep/=2,i.nodes().forEach(function(n){var e=i.node(n);isNaN(e.layer)||(e.layer?e.layer*=2:e.layer=0)}),i.edges().forEach(function(n){var e,t=i.edge(n);t.minlen*=2,((e=t.labelpos)===null||e===void 0?void 0:e.toLowerCase())!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?t.width+=t.labeloffset:t.height+=t.labeloffset)})},UV=function(i){i.edges().forEach(function(r){var n=i.edge(r);if(n.width&&n.height){var e=i.node(r.v),t=i.node(r.w),a={e:r,rank:(t.rank-e.rank)/2+e.rank};vs.addDummyNode(i,"edge-proxy",a,"_ep")}})},VV=function(i){var r=0;i.nodes().forEach(function(n){var e=i.node(n);e.borderTop&&(e.minRank=i.node(e.borderTop).rank,e.maxRank=i.node(e.borderBottom).rank,r=Math.max(r,e.maxRank||-Infinity))}),i.graph().maxRank=r},HV=function(i){i.nodes().forEach(function(r){var n=i.node(r);n.dummy==="edge-proxy"&&(i.edge(n.e).labelRank=n.rank,i.removeNode(r))})},WV=function(i){var r=Number.POSITIVE_INFINITY,n=0,e=Number.POSITIVE_INFINITY,t=0,a=i.graph(),s=a.marginx||0,u=a.marginy||0,l=function(f){if(!!f){var d=f.x,v=f.y,m=f.width,y=f.height;!isNaN(d)&&!isNaN(m)&&(r=Math.min(r,d-m/2),n=Math.max(n,d+m/2)),!isNaN(v)&&!isNaN(y)&&(e=Math.min(e,v-y/2),t=Math.max(t,v+y/2))}};i.nodes().forEach(function(c){l(i.node(c))}),i.edges().forEach(function(c){var f=i.edge(c);f.hasOwnProperty("x")&&l(f)}),r-=s,e-=u,i.nodes().forEach(function(c){var f=i.node(c);f.x-=r,f.y-=e}),i.edges().forEach(function(c){var f,d=i.edge(c);(f=d.points)===null||f===void 0||f.forEach(function(v){v.x-=r,v.y-=e}),d.hasOwnProperty("x")&&(d.x-=r),d.hasOwnProperty("y")&&(d.y-=e)}),a.width=n-r+s,a.height=t-e+u},$V=function(i){i.edges().forEach(function(r){var n=i.edge(r),e=i.node(r.v),t=i.node(r.w),a,s;n.points?(a=n.points[0],s=n.points[n.points.length-1]):(n.points=[],a=t,s=e),n.points.unshift(vs.intersectRect(e,a)),n.points.push(vs.intersectRect(t,s))})},KV=function(i){i.edges().forEach(function(r){var n=i.edge(r);if(n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},XV=function(i){i.edges().forEach(function(r){var n=i.edge(r);n.reversed&&n.points.reverse()})},YV=function(i){i.nodes().forEach(function(r){var n,e,t;if((n=i.children(r))===null||n===void 0?void 0:n.length){var a=i.node(r),s=i.node(a.borderTop),u=i.node(a.borderBottom),l=i.node(a.borderLeft[((e=a.borderLeft)===null||e===void 0?void 0:e.length)-1]),c=i.node(a.borderRight[((t=a.borderRight)===null||t===void 0?void 0:t.length)-1]);a.width=Math.abs((c==null?void 0:c.x)-(l==null?void 0:l.x))||10,a.height=Math.abs((u==null?void 0:u.y)-(s==null?void 0:s.y))||10,a.x=((l==null?void 0:l.x)||0)+a.width/2,a.y=((s==null?void 0:s.y)||0)+a.height/2}}),i.nodes().forEach(function(r){i.node(r).dummy==="border"&&i.removeNode(r)})},JV=function(i){i.edges().forEach(function(r){if(r.v===r.w){var n=i.node(r.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:r,label:i.edge(r)}),i.removeEdge(r)}})},ZV=function(i){var r=vs.buildLayerMatrix(i);r==null||r.forEach(function(n){var e=0;n==null||n.forEach(function(t,a){var s,u=i.node(t);u.order=a+e,(s=u.selfEdges)===null||s===void 0||s.forEach(function(l){vs.addDummyNode(i,"selfedge",{width:l.label.width,height:l.label.height,rank:u.rank,order:a+ ++e,e:l.e,label:l.label},"_se")}),delete u.selfEdges})})},QV=function(i){i.nodes().forEach(function(r){var n=i.node(r);if(n.dummy==="selfedge"){var e=i.node(n.e.v),t=e.x+e.width/2,a=e.y,s=n.x-t,u=e.height/2;i.setEdge(n.e,n.label),i.removeNode(r),n.label.points=[{x:t+2*s/3,y:a-u},{x:t+5*s/6,y:a-u},{y:a,x:t+s},{x:t+5*s/6,y:a+u},{x:t+2*s/3,y:a+u}],n.label.x=n.x,n.label.y=n.y}})},LA=function(i,r){var n={};return r==null||r.forEach(function(e){i[e]!==void 0&&(n[e]=+i[e])}),n},_A=function(i){var r={};return Object.keys(i).forEach(function(n){var e=i[n];r[n.toLowerCase()]=e}),r},qV=DV,FA={graphlib:Md,layout:qV,util:{time:e3,notime:t3}},T3=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e.edgeLabelSpace=!0,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.layoutNode=function(t){var a=Object(rs.a)(e),s=a.nodes,u=s.find(function(c){return c.id===t});if(u){var l=u.layout!==!1;return l}return!0},e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}}},{key:"execute",value:function(){var e=this,t=this,a=t.nodes,s=t.nodeSize,u=t.rankdir,l=t.combos,c=t.begin;if(!!a){var f=t.edges||[],d=new FA.graphlib.Graph({multigraph:!0,compound:!0}),v;s?bu(s)?v=function(){return s}:v=function(){return[s,s]}:v=function(z){return z.size?bu(z.size)?z.size:_f(z.size)?[z.size.width||40,z.size.height||40]:[z.size,z.size]:[40,40]};var m=X2(t.nodesepFunc,t.nodesep,50),y=X2(t.ranksepFunc,t.ranksep,50);(u==="LR"||u==="RL")&&(m=X2(t.ranksepFunc,t.ranksep,50),y=X2(t.nodesepFunc,t.nodesep,50)),d.setDefaultEdgeLabel(function(){return{}}),d.setGraph(t);var C={};a.filter(function(_){return _.layout!==!1}).forEach(function(_){var z=v(_),Q=y(_),q=m(_),ye=z[0]+2*q,Ce=z[1]+2*Q,Ae=_.layer;Wr(Ae)?d.setNode(_.id,{width:ye,height:Ce,layer:Ae}):d.setNode(_.id,{width:ye,height:Ce}),e.sortByCombo&&_.comboId&&(C[_.comboId]||(C[_.comboId]=!0,d.setNode(_.comboId,{})),d.setParent(_.id,_.comboId))}),this.sortByCombo&&l&&l.forEach(function(_){!_.parentId||(C[_.parentId]||(C[_.parentId]=!0,d.setNode(_.parentId,{})),d.setParent(_.id,_.parentId))}),f.forEach(function(_){var z=Hi(_,"source"),Q=Hi(_,"target");e.layoutNode(z)&&e.layoutNode(Q)&&d.setEdge(z,Q,{weight:_.weight||1})});var O=void 0;t.preset&&(O=new FA.graphlib.Graph({multigraph:!0,compound:!0}),t.preset.nodes.forEach(function(_){O==null||O.setNode(_.id,_)})),FA.layout(d,{prevGraph:O,edgeLabelSpace:t.edgeLabelSpace,keepNodeOrder:Boolean(!!t.nodeOrder),nodeOrder:t.nodeOrder});var x=[0,0];if(c){var T=Infinity,L=Infinity;d.nodes().forEach(function(_){var z=d.node(_);T>z.x&&(T=z.x),L>z.y&&(L=z.y)}),d.edges().forEach(function(_){var z=d.edge(_);z.points.forEach(function(Q){T>Q.x&&(T=Q.x),L>Q.y&&(L=Q.y)})}),x[0]=c[0]-T,x[1]=c[1]-L}return d.nodes().forEach(function(_){var z=d.node(_),Q=a.findIndex(function(q){return q.id===_});!a[Q]||(a[Q].x=z.x+x[0],a[Q].y=z.y+x[1],a[Q]._order=z._order)}),d.edges().forEach(function(_){var z=d.edge(_),Q=f.findIndex(function(q){var ye=Hi(q,"source"),Ce=Hi(q,"target");return ye===_.v&&Ce===_.w});t.edgeLabelSpace&&t.controlPoints&&f[Q].type!=="loop"&&(f[Q].controlPoints=z.points.slice(1,z.points.length-1),f[Q].controlPoints.forEach(function(q){q.x+=x[0],q.y+=x[1]}))}),t.onLayoutEnd&&t.onLayoutEnd(),{nodes:a,edges:f}}}},{key:"getType",value:function(){return"dagre"}}]),r}(Iu);function X2(o,i,r){var n;return o?n=o:Wr(i)?n=function(){return i}:n=function(){return r},n}var eH=Object.prototype.toString;function zl(o){var i=eH.call(o);return i.endsWith("Array]")&&!i.includes("Big")}function tH(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!zl(o))throw new TypeError("input must be an array");if(o.length===0)throw new TypeError("input must not be empty");var r=i.fromIndex,n=r===void 0?0:r,e=i.toIndex,t=e===void 0?o.length:e;if(n<0||n>=o.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(t<=n||t>o.length||!Number.isInteger(t))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=o[n],s=n+1;s<t;s++)o[s]>a&&(a=o[s]);return a}function nH(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!zl(o))throw new TypeError("input must be an array");if(o.length===0)throw new TypeError("input must not be empty");var r=i.fromIndex,n=r===void 0?0:r,e=i.toIndex,t=e===void 0?o.length:e;if(n<0||n>=o.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(t<=n||t>o.length||!Number.isInteger(t))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=o[n],s=n+1;s<t;s++)o[s]<a&&(a=o[s]);return a}function P3(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(zl(o)){if(o.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var r;if(i.output!==void 0){if(!zl(i.output))throw new TypeError("output option must be an array if specified");r=i.output}else r=new Array(o.length);var n=nH(o),e=tH(o);if(n===e)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var t=i.min,a=t===void 0?i.autoMinMax?n:0:t,s=i.max,u=s===void 0?i.autoMinMax?e:1:s;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var l=(u-a)/(e-n),c=0;c<o.length;c++)r[c]=(o[c]-n)*l+a;return r}var Y2=" ".repeat(2),k3=" ".repeat(4);function rH(){return D3(this)}function D3(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=i.maxRows,n=r===void 0?15:r,e=i.maxColumns,t=e===void 0?10:e,a=i.maxNumSize,s=a===void 0?8:a,u=i.padMinus,l=u===void 0?"auto":u;return"".concat(o.constructor.name,` {
`).concat(Y2,`[
`).concat(k3).concat(aH(o,n,t,s,l),`
`).concat(Y2,`]
`).concat(Y2,"rows: ").concat(o.rows,`
`).concat(Y2,"columns: ").concat(o.columns,`
}`)}function aH(o,i,r,n,e){var t=o.rows,a=o.columns,s=Math.min(t,i),u=Math.min(a,r),l=[];if(e==="auto"){e=!1;e:for(var c=0;c<s;c++)for(var f=0;f<u;f++)if(o.get(c,f)<0){e=!0;break e}}for(var d=0;d<s;d++){for(var v=[],m=0;m<u;m++)v.push(iH(o.get(d,m),n,e));l.push("".concat(v.join(" ")))}return u!==a&&(l[l.length-1]+=" ... ".concat(a-r," more columns")),s!==t&&l.push("... ".concat(t-i," more rows")),l.join(`
`.concat(k3))}function iH(o,i,r){return(o>=0&&r?" ".concat(I3(o,i-1)):I3(o,i)).padEnd(i)}function I3(o,i){var r=o.toString();if(r.length<=i)return r;var n=o.toFixed(i);if(n.length>i&&(n=o.toFixed(Math.max(0,i-(n.length-i)))),n.length<=i&&!n.startsWith("0.000")&&!n.startsWith("-0.000"))return n;var e=o.toExponential(i);return e.length>i&&(e=o.toExponential(Math.max(0,i-(e.length-i)))),e.slice(0)}function oH(o,i){o.prototype.add=function(n){return typeof n=="number"?this.addS(n):this.addM(n)},o.prototype.addS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n);return this},o.prototype.addM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)+n.get(e,t));return this},o.add=function(n,e){var t=new i(n);return t.add(e)},o.prototype.sub=function(n){return typeof n=="number"?this.subS(n):this.subM(n)},o.prototype.subS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n);return this},o.prototype.subM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)-n.get(e,t));return this},o.sub=function(n,e){var t=new i(n);return t.sub(e)},o.prototype.subtract=o.prototype.sub,o.prototype.subtractS=o.prototype.subS,o.prototype.subtractM=o.prototype.subM,o.subtract=o.sub,o.prototype.mul=function(n){return typeof n=="number"?this.mulS(n):this.mulM(n)},o.prototype.mulS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n);return this},o.prototype.mulM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)*n.get(e,t));return this},o.mul=function(n,e){var t=new i(n);return t.mul(e)},o.prototype.multiply=o.prototype.mul,o.prototype.multiplyS=o.prototype.mulS,o.prototype.multiplyM=o.prototype.mulM,o.multiply=o.mul,o.prototype.div=function(n){return typeof n=="number"?this.divS(n):this.divM(n)},o.prototype.divS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n);return this},o.prototype.divM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)/n.get(e,t));return this},o.div=function(n,e){var t=new i(n);return t.div(e)},o.prototype.divide=o.prototype.div,o.prototype.divideS=o.prototype.divS,o.prototype.divideM=o.prototype.divM,o.divide=o.div,o.prototype.mod=function(n){return typeof n=="number"?this.modS(n):this.modM(n)},o.prototype.modS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%n);return this},o.prototype.modM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)%n.get(e,t));return this},o.mod=function(n,e){var t=new i(n);return t.mod(e)},o.prototype.modulus=o.prototype.mod,o.prototype.modulusS=o.prototype.modS,o.prototype.modulusM=o.prototype.modM,o.modulus=o.mod,o.prototype.and=function(n){return typeof n=="number"?this.andS(n):this.andM(n)},o.prototype.andS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&n);return this},o.prototype.andM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)&n.get(e,t));return this},o.and=function(n,e){var t=new i(n);return t.and(e)},o.prototype.or=function(n){return typeof n=="number"?this.orS(n):this.orM(n)},o.prototype.orS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|n);return this},o.prototype.orM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)|n.get(e,t));return this},o.or=function(n,e){var t=new i(n);return t.or(e)},o.prototype.xor=function(n){return typeof n=="number"?this.xorS(n):this.xorM(n)},o.prototype.xorS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^n);return this},o.prototype.xorM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)^n.get(e,t));return this},o.xor=function(n,e){var t=new i(n);return t.xor(e)},o.prototype.leftShift=function(n){return typeof n=="number"?this.leftShiftS(n):this.leftShiftM(n)},o.prototype.leftShiftS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<n);return this},o.prototype.leftShiftM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)<<n.get(e,t));return this},o.leftShift=function(n,e){var t=new i(n);return t.leftShift(e)},o.prototype.signPropagatingRightShift=function(n){return typeof n=="number"?this.signPropagatingRightShiftS(n):this.signPropagatingRightShiftM(n)},o.prototype.signPropagatingRightShiftS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>n);return this},o.prototype.signPropagatingRightShiftM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>n.get(e,t));return this},o.signPropagatingRightShift=function(n,e){var t=new i(n);return t.signPropagatingRightShift(e)},o.prototype.rightShift=function(n){return typeof n=="number"?this.rightShiftS(n):this.rightShiftM(n)},o.prototype.rightShiftS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>n);return this},o.prototype.rightShiftM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,this.get(e,t)>>>n.get(e,t));return this},o.rightShift=function(n,e){var t=new i(n);return t.rightShift(e)},o.prototype.zeroFillRightShift=o.prototype.rightShift,o.prototype.zeroFillRightShiftS=o.prototype.rightShiftS,o.prototype.zeroFillRightShiftM=o.prototype.rightShiftM,o.zeroFillRightShift=o.rightShift,o.prototype.not=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,~this.get(n,e));return this},o.not=function(n){var e=new i(n);return e.not()},o.prototype.abs=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.abs(this.get(n,e)));return this},o.abs=function(n){var e=new i(n);return e.abs()},o.prototype.acos=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.acos(this.get(n,e)));return this},o.acos=function(n){var e=new i(n);return e.acos()},o.prototype.acosh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.acosh(this.get(n,e)));return this},o.acosh=function(n){var e=new i(n);return e.acosh()},o.prototype.asin=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.asin(this.get(n,e)));return this},o.asin=function(n){var e=new i(n);return e.asin()},o.prototype.asinh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.asinh(this.get(n,e)));return this},o.asinh=function(n){var e=new i(n);return e.asinh()},o.prototype.atan=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.atan(this.get(n,e)));return this},o.atan=function(n){var e=new i(n);return e.atan()},o.prototype.atanh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.atanh(this.get(n,e)));return this},o.atanh=function(n){var e=new i(n);return e.atanh()},o.prototype.cbrt=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.cbrt(this.get(n,e)));return this},o.cbrt=function(n){var e=new i(n);return e.cbrt()},o.prototype.ceil=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.ceil(this.get(n,e)));return this},o.ceil=function(n){var e=new i(n);return e.ceil()},o.prototype.clz32=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.clz32(this.get(n,e)));return this},o.clz32=function(n){var e=new i(n);return e.clz32()},o.prototype.cos=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.cos(this.get(n,e)));return this},o.cos=function(n){var e=new i(n);return e.cos()},o.prototype.cosh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.cosh(this.get(n,e)));return this},o.cosh=function(n){var e=new i(n);return e.cosh()},o.prototype.exp=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.exp(this.get(n,e)));return this},o.exp=function(n){var e=new i(n);return e.exp()},o.prototype.expm1=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.expm1(this.get(n,e)));return this},o.expm1=function(n){var e=new i(n);return e.expm1()},o.prototype.floor=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.floor(this.get(n,e)));return this},o.floor=function(n){var e=new i(n);return e.floor()},o.prototype.fround=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.fround(this.get(n,e)));return this},o.fround=function(n){var e=new i(n);return e.fround()},o.prototype.log=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log(this.get(n,e)));return this},o.log=function(n){var e=new i(n);return e.log()},o.prototype.log1p=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log1p(this.get(n,e)));return this},o.log1p=function(n){var e=new i(n);return e.log1p()},o.prototype.log10=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log10(this.get(n,e)));return this},o.log10=function(n){var e=new i(n);return e.log10()},o.prototype.log2=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.log2(this.get(n,e)));return this},o.log2=function(n){var e=new i(n);return e.log2()},o.prototype.round=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.round(this.get(n,e)));return this},o.round=function(n){var e=new i(n);return e.round()},o.prototype.sign=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sign(this.get(n,e)));return this},o.sign=function(n){var e=new i(n);return e.sign()},o.prototype.sin=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sin(this.get(n,e)));return this},o.sin=function(n){var e=new i(n);return e.sin()},o.prototype.sinh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sinh(this.get(n,e)));return this},o.sinh=function(n){var e=new i(n);return e.sinh()},o.prototype.sqrt=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.sqrt(this.get(n,e)));return this},o.sqrt=function(n){var e=new i(n);return e.sqrt()},o.prototype.tan=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.tan(this.get(n,e)));return this},o.tan=function(n){var e=new i(n);return e.tan()},o.prototype.tanh=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.tanh(this.get(n,e)));return this},o.tanh=function(n){var e=new i(n);return e.tanh()},o.prototype.trunc=function(){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,Math.trunc(this.get(n,e)));return this},o.trunc=function(n){var e=new i(n);return e.trunc()},o.pow=function(n,e){var t=new i(n);return t.pow(e)},o.prototype.pow=function(n){return typeof n=="number"?this.powS(n):this.powM(n)},o.prototype.powS=function(n){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),n));return this},o.prototype.powM=function(n){if(n=i.checkMatrix(n),this.rows!==n.rows||this.columns!==n.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.set(e,t,Math.pow(this.get(e,t),n.get(e,t)));return this}}function Zc(o,i,r){var n=r?o.rows:o.rows-1;if(i<0||i>n)throw new RangeError("Row index out of range")}function Qc(o,i,r){var n=r?o.columns:o.columns-1;if(i<0||i>n)throw new RangeError("Column index out of range")}function pg(o,i){if(i.to1DArray&&(i=i.to1DArray()),i.length!==o.columns)throw new RangeError("vector size must be the same as the number of columns");return i}function gg(o,i){if(i.to1DArray&&(i=i.to1DArray()),i.length!==o.rows)throw new RangeError("vector size must be the same as the number of rows");return i}function sH(o,i){if(!zl(i))throw new TypeError("row indices must be an array");for(var r=0;r<i.length;r++)if(i[r]<0||i[r]>=o.rows)throw new RangeError("row indices are out of range")}function uH(o,i){if(!zl(i))throw new TypeError("column indices must be an array");for(var r=0;r<i.length;r++)if(i[r]<0||i[r]>=o.columns)throw new RangeError("column indices are out of range")}function R3(o,i,r,n,e){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Z2("startRow",i),Z2("endRow",r),Z2("startColumn",n),Z2("endColumn",e),i>r||n>e||i<0||i>=o.rows||r<0||r>=o.rows||n<0||n>=o.columns||e<0||e>=o.columns)throw new RangeError("Submatrix indices are out of range")}function J2(o){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=[],n=0;n<o;n++)r.push(i);return r}function Z2(o,i){if(typeof i!="number")throw new TypeError("".concat(o," must be a number"))}function mg(o){if(o.isEmpty())throw new Error("Empty matrix has no elements to index")}function lH(o){for(var i=J2(o.rows),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)i[r]+=o.get(r,n);return i}function cH(o){for(var i=J2(o.columns),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)i[n]+=o.get(r,n);return i}function fH(o){for(var i=0,r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)i+=o.get(r,n);return i}function dH(o){for(var i=J2(o.rows,1),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)i[r]*=o.get(r,n);return i}function hH(o){for(var i=J2(o.columns,1),r=0;r<o.rows;++r)for(var n=0;n<o.columns;++n)i[n]*=o.get(r,n);return i}function vH(o){for(var i=1,r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)i*=o.get(r,n);return i}function pH(o,i,r){for(var n=o.rows,e=o.columns,t=[],a=0;a<n;a++){for(var s=0,u=0,l=0,c=0;c<e;c++)l=o.get(a,c)-r[a],s+=l,u+=l*l;i?t.push((u-s*s/e)/(e-1)):t.push((u-s*s/e)/e)}return t}function gH(o,i,r){for(var n=o.rows,e=o.columns,t=[],a=0;a<e;a++){for(var s=0,u=0,l=0,c=0;c<n;c++)l=o.get(c,a)-r[a],s+=l,u+=l*l;i?t.push((u-s*s/n)/(n-1)):t.push((u-s*s/n)/n)}return t}function mH(o,i,r){for(var n=o.rows,e=o.columns,t=n*e,a=0,s=0,u=0,l=0;l<n;l++)for(var c=0;c<e;c++)u=o.get(l,c)-r,a+=u,s+=u*u;return i?(s-a*a/t)/(t-1):(s-a*a/t)/t}function yH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)-i[r])}function bH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)-i[n])}function CH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)-i)}function EH(o){for(var i=[],r=0;r<o.rows;r++){for(var n=0,e=0;e<o.columns;e++)n+=Math.pow(o.get(r,e),2)/(o.columns-1);i.push(Math.sqrt(n))}return i}function OH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)/i[r])}function wH(o){for(var i=[],r=0;r<o.columns;r++){for(var n=0,e=0;e<o.rows;e++)n+=Math.pow(o.get(e,r),2)/(o.rows-1);i.push(Math.sqrt(n))}return i}function xH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)/i[n])}function SH(o){for(var i=o.size-1,r=0,n=0;n<o.columns;n++)for(var e=0;e<o.rows;e++)r+=Math.pow(o.get(e,n),2)/i;return Math.sqrt(r)}function AH(o,i){for(var r=0;r<o.rows;r++)for(var n=0;n<o.columns;n++)o.set(r,n,o.get(r,n)/i)}var Xs=function(){function o(){Object(me.a)(this,o)}return Object(ue.a)(o,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(r){if(typeof r!="function")throw new TypeError("callback must be a function");for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.call(this,n,e);return this}},{key:"to1DArray",value:function(){for(var r=[],n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.push(this.get(n,e));return r}},{key:"to2DArray",value:function(){for(var r=[],n=0;n<this.rows;n++){r.push([]);for(var e=0;e<this.columns;e++)r[n].push(this.get(n,e))}return r}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var r=0;r<this.rows;r++)for(var n=0;n<=r;n++)if(this.get(r,n)!==this.get(n,r))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var r=0,n=0,e=-1,t=!0,a=!1;r<this.rows&&t;){for(n=0,a=!1;n<this.columns&&a===!1;)this.get(r,n)===0?n++:this.get(r,n)===1&&n>e?(a=!0,e=n):(t=!1,a=!0);r++}return t}},{key:"isReducedEchelonForm",value:function(){for(var r=0,n=0,e=-1,t=!0,a=!1;r<this.rows&&t;){for(n=0,a=!1;n<this.columns&&a===!1;)this.get(r,n)===0?n++:this.get(r,n)===1&&n>e?(a=!0,e=n):(t=!1,a=!0);for(var s=n+1;s<this.rows;s++)this.get(r,s)!==0&&(t=!1);r++}return t}},{key:"echelonForm",value:function(){for(var r=this.clone(),n=0,e=0;n<r.rows&&e<r.columns;){for(var t=n,a=n;a<r.rows;a++)r.get(a,e)>r.get(t,e)&&(t=a);if(r.get(t,e)===0)e++;else{r.swapRows(n,t);for(var s=r.get(n,e),u=e;u<r.columns;u++)r.set(n,u,r.get(n,u)/s);for(var l=n+1;l<r.rows;l++){var c=r.get(l,e)/r.get(n,e);r.set(l,e,0);for(var f=e+1;f<r.columns;f++)r.set(l,f,r.get(l,f)-r.get(n,f)*c)}n++,e++}}return r}},{key:"reducedEchelonForm",value:function(){for(var r=this.echelonForm(),n=r.columns,e=r.rows,t=e-1;t>=0;)if(r.maxRow(t)===0)t--;else{for(var a=0,s=!1;a<e&&s===!1;)r.get(t,a)===1?s=!0:a++;for(var u=0;u<t;u++)for(var l=r.get(u,a),c=a;c<n;c++){var f=r.get(u,c)-l*r.get(t,c);r.set(u,c,f)}t--}return r}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="object")throw new TypeError("options must be an object");var n=r.rows,e=n===void 0?1:n,t=r.columns,a=t===void 0?1:t;if(!Number.isInteger(e)||e<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(a)||a<=0)throw new TypeError("columns must be a positive integer");for(var s=new ei(this.rows*e,this.columns*a),u=0;u<e;u++)for(var l=0;l<a;l++)s.setSubMatrix(this,this.rows*u,this.columns*l);return s}},{key:"fill",value:function(r){for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,r);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(r){Zc(this,r);for(var n=[],e=0;e<this.columns;e++)n.push(this.get(r,e));return n}},{key:"getRowVector",value:function(r){return ei.rowVector(this.getRow(r))}},{key:"setRow",value:function(r,n){Zc(this,r),n=pg(this,n);for(var e=0;e<this.columns;e++)this.set(r,e,n[e]);return this}},{key:"swapRows",value:function(r,n){Zc(this,r),Zc(this,n);for(var e=0;e<this.columns;e++){var t=this.get(r,e);this.set(r,e,this.get(n,e)),this.set(n,e,t)}return this}},{key:"getColumn",value:function(r){Qc(this,r);for(var n=[],e=0;e<this.rows;e++)n.push(this.get(e,r));return n}},{key:"getColumnVector",value:function(r){return ei.columnVector(this.getColumn(r))}},{key:"setColumn",value:function(r,n){Qc(this,r),n=gg(this,n);for(var e=0;e<this.rows;e++)this.set(e,r,n[e]);return this}},{key:"swapColumns",value:function(r,n){Qc(this,r),Qc(this,n);for(var e=0;e<this.rows;e++){var t=this.get(e,r);this.set(e,r,this.get(e,n)),this.set(e,n,t)}return this}},{key:"addRowVector",value:function(r){r=pg(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)+r[e]);return this}},{key:"subRowVector",value:function(r){r=pg(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)-r[e]);return this}},{key:"mulRowVector",value:function(r){r=pg(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)*r[e]);return this}},{key:"divRowVector",value:function(r){r=pg(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)/r[e]);return this}},{key:"addColumnVector",value:function(r){r=gg(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)+r[n]);return this}},{key:"subColumnVector",value:function(r){r=gg(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)-r[n]);return this}},{key:"mulColumnVector",value:function(r){r=gg(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)*r[n]);return this}},{key:"divColumnVector",value:function(r){r=gg(this,r);for(var n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)this.set(n,e,this.get(n,e)/r[n]);return this}},{key:"mulRow",value:function(r,n){Zc(this,r);for(var e=0;e<this.columns;e++)this.set(r,e,this.get(r,e)*n);return this}},{key:"mulColumn",value:function(r,n){Qc(this,r);for(var e=0;e<this.rows;e++)this.set(e,r,this.get(e,r)*n);return this}},{key:"max",value:function(r){if(this.isEmpty())return NaN;switch(r){case"row":{for(var n=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)>n[e]&&(n[e]=this.get(e,t));return n}case"column":{for(var a=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),s=0;s<this.rows;s++)for(var u=0;u<this.columns;u++)this.get(s,u)>a[u]&&(a[u]=this.get(s,u));return a}case void 0:{for(var l=this.get(0,0),c=0;c<this.rows;c++)for(var f=0;f<this.columns;f++)this.get(c,f)>l&&(l=this.get(c,f));return l}default:throw new Error("invalid option: ".concat(r))}}},{key:"maxIndex",value:function(){mg(this);for(var r=this.get(0,0),n=[0,0],e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)>r&&(r=this.get(e,t),n[0]=e,n[1]=t);return n}},{key:"min",value:function(r){if(this.isEmpty())return NaN;switch(r){case"row":{for(var n=new Array(this.rows).fill(Number.POSITIVE_INFINITY),e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)<n[e]&&(n[e]=this.get(e,t));return n}case"column":{for(var a=new Array(this.columns).fill(Number.POSITIVE_INFINITY),s=0;s<this.rows;s++)for(var u=0;u<this.columns;u++)this.get(s,u)<a[u]&&(a[u]=this.get(s,u));return a}case void 0:{for(var l=this.get(0,0),c=0;c<this.rows;c++)for(var f=0;f<this.columns;f++)this.get(c,f)<l&&(l=this.get(c,f));return l}default:throw new Error("invalid option: ".concat(r))}}},{key:"minIndex",value:function(){mg(this);for(var r=this.get(0,0),n=[0,0],e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)this.get(e,t)<r&&(r=this.get(e,t),n[0]=e,n[1]=t);return n}},{key:"maxRow",value:function(r){if(Zc(this,r),this.isEmpty())return NaN;for(var n=this.get(r,0),e=1;e<this.columns;e++)this.get(r,e)>n&&(n=this.get(r,e));return n}},{key:"maxRowIndex",value:function(r){Zc(this,r),mg(this);for(var n=this.get(r,0),e=[r,0],t=1;t<this.columns;t++)this.get(r,t)>n&&(n=this.get(r,t),e[1]=t);return e}},{key:"minRow",value:function(r){if(Zc(this,r),this.isEmpty())return NaN;for(var n=this.get(r,0),e=1;e<this.columns;e++)this.get(r,e)<n&&(n=this.get(r,e));return n}},{key:"minRowIndex",value:function(r){Zc(this,r),mg(this);for(var n=this.get(r,0),e=[r,0],t=1;t<this.columns;t++)this.get(r,t)<n&&(n=this.get(r,t),e[1]=t);return e}},{key:"maxColumn",value:function(r){if(Qc(this,r),this.isEmpty())return NaN;for(var n=this.get(0,r),e=1;e<this.rows;e++)this.get(e,r)>n&&(n=this.get(e,r));return n}},{key:"maxColumnIndex",value:function(r){Qc(this,r),mg(this);for(var n=this.get(0,r),e=[0,r],t=1;t<this.rows;t++)this.get(t,r)>n&&(n=this.get(t,r),e[0]=t);return e}},{key:"minColumn",value:function(r){if(Qc(this,r),this.isEmpty())return NaN;for(var n=this.get(0,r),e=1;e<this.rows;e++)this.get(e,r)<n&&(n=this.get(e,r));return n}},{key:"minColumnIndex",value:function(r){Qc(this,r),mg(this);for(var n=this.get(0,r),e=[0,r],t=1;t<this.rows;t++)this.get(t,r)<n&&(n=this.get(t,r),e[0]=t);return e}},{key:"diag",value:function(){for(var r=Math.min(this.rows,this.columns),n=[],e=0;e<r;e++)n.push(this.get(e,e));return n}},{key:"norm",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",n=0;if(r==="max")return this.max();if(r==="frobenius"){for(var e=0;e<this.rows;e++)for(var t=0;t<this.columns;t++)n=n+this.get(e,t)*this.get(e,t);return Math.sqrt(n)}else throw new RangeError("unknown norm type: ".concat(r))}},{key:"cumulativeSum",value:function(){for(var r=0,n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r+=this.get(n,e),this.set(n,e,r);return this}},{key:"dot",value:function(r){o.isMatrix(r)&&(r=r.to1DArray());var n=this.to1DArray();if(n.length!==r.length)throw new RangeError("vectors do not have the same size");for(var e=0,t=0;t<n.length;t++)e+=n[t]*r[t];return e}},{key:"mmul",value:function(r){r=ei.checkMatrix(r);for(var n=this.rows,e=this.columns,t=r.columns,a=new ei(n,t),s=new Float64Array(e),u=0;u<t;u++){for(var l=0;l<e;l++)s[l]=r.get(l,u);for(var c=0;c<n;c++){for(var f=0,d=0;d<e;d++)f+=this.get(c,d)*s[d];a.set(c,u,f)}}return a}},{key:"strassen2x2",value:function(r){r=ei.checkMatrix(r);var n=new ei(2,2),e=this.get(0,0),t=r.get(0,0),a=this.get(0,1),s=r.get(0,1),u=this.get(1,0),l=r.get(1,0),c=this.get(1,1),f=r.get(1,1),d=(e+c)*(t+f),v=(u+c)*t,m=e*(s-f),y=c*(l-t),C=(e+a)*f,O=(u-e)*(t+s),x=(a-c)*(l+f),T=d+y-C+x,L=m+C,_=v+y,z=d-v+m+O;return n.set(0,0,T),n.set(0,1,L),n.set(1,0,_),n.set(1,1,z),n}},{key:"strassen3x3",value:function(r){r=ei.checkMatrix(r);var n=new ei(3,3),e=this.get(0,0),t=this.get(0,1),a=this.get(0,2),s=this.get(1,0),u=this.get(1,1),l=this.get(1,2),c=this.get(2,0),f=this.get(2,1),d=this.get(2,2),v=r.get(0,0),m=r.get(0,1),y=r.get(0,2),C=r.get(1,0),O=r.get(1,1),x=r.get(1,2),T=r.get(2,0),L=r.get(2,1),_=r.get(2,2),z=(e+t+a-s-u-f-d)*O,Q=(e-s)*(-m+O),q=u*(-v+m+C-O-x-T+_),ye=(-e+s+u)*(v-m+O),Ce=(s+u)*(-v+m),Ae=e*v,Pe=(-e+c+f)*(v-y+x),qe=(-e+c)*(y-x),lt=(c+f)*(-v+y),ze=(e+t+a-u-l-c-f)*x,ht=f*(-v+y+C-O-x-T+L),nn=(-a+f+d)*(O+T-L),Tn=(a-d)*(O-L),Kn=a*T,zn=(f+d)*(-T+L),An=(-a+u+l)*(x+T-_),br=(a-l)*(x-_),sn=(u+l)*(-T+_),Xn=t*C,dr=l*L,ga=s*y,ca=c*m,Ta=d*_,La=Ae+Kn+Xn,yo=z+ye+Ce+Ae+nn+Kn+zn,Jo=Ae+Pe+lt+ze+Kn+An+sn,Ti=Q+q+ye+Ae+Kn+An+br,Qu=Q+ye+Ce+Ae+dr,nf=Kn+An+br+sn+ga,Bg=Ae+Pe+qe+ht+nn+Tn+Kn,np=nn+Tn+Kn+zn+ca,Gg=Ae+Pe+qe+lt+Ta;return n.set(0,0,La),n.set(0,1,yo),n.set(0,2,Jo),n.set(1,0,Ti),n.set(1,1,Qu),n.set(1,2,nf),n.set(2,0,Bg),n.set(2,1,np),n.set(2,2,Gg),n}},{key:"mmulStrassen",value:function(r){r=ei.checkMatrix(r);var n=this.clone(),e=n.rows,t=n.columns,a=r.rows,s=r.columns;t!==a&&console.warn("Multiplying ".concat(e," x ").concat(t," and ").concat(a," x ").concat(s," matrix: dimensions do not match."));function u(d,v,m){var y=d.rows,C=d.columns;if(y===v&&C===m)return d;var O=o.zeros(v,m);return O=O.setSubMatrix(d,0,0),O}var l=Math.max(e,a),c=Math.max(t,s);n=u(n,l,c),r=u(r,l,c);function f(d,v,m,y){if(m<=512||y<=512)return d.mmul(v);m%2==1&&y%2==1?(d=u(d,m+1,y+1),v=u(v,m+1,y+1)):m%2==1?(d=u(d,m+1,y),v=u(v,m+1,y)):y%2==1&&(d=u(d,m,y+1),v=u(v,m,y+1));var C=parseInt(d.rows/2,10),O=parseInt(d.columns/2,10),x=d.subMatrix(0,C-1,0,O-1),T=v.subMatrix(0,C-1,0,O-1),L=d.subMatrix(0,C-1,O,d.columns-1),_=v.subMatrix(0,C-1,O,v.columns-1),z=d.subMatrix(C,d.rows-1,0,O-1),Q=v.subMatrix(C,v.rows-1,0,O-1),q=d.subMatrix(C,d.rows-1,O,d.columns-1),ye=v.subMatrix(C,v.rows-1,O,v.columns-1),Ce=f(o.add(x,q),o.add(T,ye),C,O),Ae=f(o.add(z,q),T,C,O),Pe=f(x,o.sub(_,ye),C,O),qe=f(q,o.sub(Q,T),C,O),lt=f(o.add(x,L),ye,C,O),ze=f(o.sub(z,x),o.add(T,_),C,O),ht=f(o.sub(L,q),o.add(Q,ye),C,O),nn=o.add(Ce,qe);nn.sub(lt),nn.add(ht);var Tn=o.add(Pe,lt),Kn=o.add(Ae,qe),zn=o.sub(Ce,Ae);zn.add(Pe),zn.add(ze);var An=o.zeros(2*nn.rows,2*nn.columns);return An=An.setSubMatrix(nn,0,0),An=An.setSubMatrix(Tn,nn.rows,0),An=An.setSubMatrix(Kn,0,nn.columns),An=An.setSubMatrix(zn,nn.rows,nn.columns),An.subMatrix(0,m-1,0,y-1)}return f(n,r,l,c)}},{key:"scaleRows",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="object")throw new TypeError("options must be an object");var n=r.min,e=n===void 0?0:n,t=r.max,a=t===void 0?1:t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(e>=a)throw new RangeError("min must be smaller than max");for(var s=new ei(this.rows,this.columns),u=0;u<this.rows;u++){var l=this.getRow(u);l.length>0&&P3(l,{min:e,max:a,output:l}),s.setRow(u,l)}return s}},{key:"scaleColumns",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(typeof r!="object")throw new TypeError("options must be an object");var n=r.min,e=n===void 0?0:n,t=r.max,a=t===void 0?1:t;if(!Number.isFinite(e))throw new TypeError("min must be a number");if(!Number.isFinite(a))throw new TypeError("max must be a number");if(e>=a)throw new RangeError("min must be smaller than max");for(var s=new ei(this.rows,this.columns),u=0;u<this.columns;u++){var l=this.getColumn(u);l.length&&P3(l,{min:e,max:a,output:l}),s.setColumn(u,l)}return s}},{key:"flipRows",value:function(){for(var r=Math.ceil(this.columns/2),n=0;n<this.rows;n++)for(var e=0;e<r;e++){var t=this.get(n,e),a=this.get(n,this.columns-1-e);this.set(n,e,a),this.set(n,this.columns-1-e,t)}return this}},{key:"flipColumns",value:function(){for(var r=Math.ceil(this.rows/2),n=0;n<this.columns;n++)for(var e=0;e<r;e++){var t=this.get(e,n),a=this.get(this.rows-1-e,n);this.set(e,n,a),this.set(this.rows-1-e,n,t)}return this}},{key:"kroneckerProduct",value:function(r){r=ei.checkMatrix(r);for(var n=this.rows,e=this.columns,t=r.rows,a=r.columns,s=new ei(n*t,e*a),u=0;u<n;u++)for(var l=0;l<e;l++)for(var c=0;c<t;c++)for(var f=0;f<a;f++)s.set(t*u+c,a*l+f,this.get(u,l)*r.get(c,f));return s}},{key:"kroneckerSum",value:function(r){if(r=ei.checkMatrix(r),!this.isSquare()||!r.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var n=this.rows,e=r.rows,t=this.kroneckerProduct(ei.eye(e,e)),a=ei.eye(n,n).kroneckerProduct(r);return t.add(a)}},{key:"transpose",value:function(){for(var r=new ei(this.columns,this.rows),n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.set(e,n,this.get(n,e));return r}},{key:"sortRows",value:function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N3,n=0;n<this.rows;n++)this.setRow(n,this.getRow(n).sort(r));return this}},{key:"sortColumns",value:function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N3,n=0;n<this.columns;n++)this.setColumn(n,this.getColumn(n).sort(r));return this}},{key:"subMatrix",value:function(r,n,e,t){R3(this,r,n,e,t);for(var a=new ei(n-r+1,t-e+1),s=r;s<=n;s++)for(var u=e;u<=t;u++)a.set(s-r,u-e,this.get(s,u));return a}},{key:"subMatrixRow",value:function(r,n,e){if(n===void 0&&(n=0),e===void 0&&(e=this.columns-1),n>e||n<0||n>=this.columns||e<0||e>=this.columns)throw new RangeError("Argument out of range");for(var t=new ei(r.length,e-n+1),a=0;a<r.length;a++)for(var s=n;s<=e;s++){if(r[a]<0||r[a]>=this.rows)throw new RangeError("Row index out of range: ".concat(r[a]));t.set(a,s-n,this.get(r[a],s))}return t}},{key:"subMatrixColumn",value:function(r,n,e){if(n===void 0&&(n=0),e===void 0&&(e=this.rows-1),n>e||n<0||n>=this.rows||e<0||e>=this.rows)throw new RangeError("Argument out of range");for(var t=new ei(e-n+1,r.length),a=0;a<r.length;a++)for(var s=n;s<=e;s++){if(r[a]<0||r[a]>=this.columns)throw new RangeError("Column index out of range: ".concat(r[a]));t.set(s-n,a,this.get(s,r[a]))}return t}},{key:"setSubMatrix",value:function(r,n,e){if(r=ei.checkMatrix(r),r.isEmpty())return this;var t=n+r.rows-1,a=e+r.columns-1;R3(this,n,t,e,a);for(var s=0;s<r.rows;s++)for(var u=0;u<r.columns;u++)this.set(n+s,e+u,r.get(s,u));return this}},{key:"selection",value:function(r,n){sH(this,r),uH(this,n);for(var e=new ei(r.length,n.length),t=0;t<r.length;t++)for(var a=r[t],s=0;s<n.length;s++){var u=n[s];e.set(t,s,this.get(a,u))}return e}},{key:"trace",value:function(){for(var r=Math.min(this.rows,this.columns),n=0,e=0;e<r;e++)n+=this.get(e,e);return n}},{key:"clone",value:function(){for(var r=new ei(this.rows,this.columns),n=0;n<this.rows;n++)for(var e=0;e<this.columns;e++)r.set(n,e,this.get(n,e));return r}},{key:"sum",value:function(r){switch(r){case"row":return lH(this);case"column":return cH(this);case void 0:return fH(this);default:throw new Error("invalid option: ".concat(r))}}},{key:"product",value:function(r){switch(r){case"row":return dH(this);case"column":return hH(this);case void 0:return vH(this);default:throw new Error("invalid option: ".concat(r))}}},{key:"mean",value:function(r){var n=this.sum(r);switch(r){case"row":{for(var e=0;e<this.rows;e++)n[e]/=this.columns;return n}case"column":{for(var t=0;t<this.columns;t++)n[t]/=this.rows;return n}case void 0:return n/this.size;default:throw new Error("invalid option: ".concat(r))}}},{key:"variance",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="object"&&(n=r,r=void 0),typeof n!="object")throw new TypeError("options must be an object");var e=n,t=e.unbiased,a=t===void 0?!0:t,s=e.mean,u=s===void 0?this.mean(r):s;if(typeof a!="boolean")throw new TypeError("unbiased must be a boolean");switch(r){case"row":{if(!zl(u))throw new TypeError("mean must be an array");return pH(this,a,u)}case"column":{if(!zl(u))throw new TypeError("mean must be an array");return gH(this,a,u)}case void 0:{if(typeof u!="number")throw new TypeError("mean must be a number");return mH(this,a,u)}default:throw new Error("invalid option: ".concat(r))}}},{key:"standardDeviation",value:function(r,n){typeof r=="object"&&(n=r,r=void 0);var e=this.variance(r,n);if(r===void 0)return Math.sqrt(e);for(var t=0;t<e.length;t++)e[t]=Math.sqrt(e[t]);return e}},{key:"center",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="object"&&(n=r,r=void 0),typeof n!="object")throw new TypeError("options must be an object");var e=n,t=e.center,a=t===void 0?this.mean(r):t;switch(r){case"row":{if(!zl(a))throw new TypeError("center must be an array");return yH(this,a),this}case"column":{if(!zl(a))throw new TypeError("center must be an array");return bH(this,a),this}case void 0:{if(typeof a!="number")throw new TypeError("center must be a number");return CH(this,a),this}default:throw new Error("invalid option: ".concat(r))}}},{key:"scale",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof r=="object"&&(n=r,r=void 0),typeof n!="object")throw new TypeError("options must be an object");var e=n.scale;switch(r){case"row":{if(e===void 0)e=EH(this);else if(!zl(e))throw new TypeError("scale must be an array");return OH(this,e),this}case"column":{if(e===void 0)e=wH(this);else if(!zl(e))throw new TypeError("scale must be an array");return xH(this,e),this}case void 0:{if(e===void 0)e=SH(this);else if(typeof e!="number")throw new TypeError("scale must be a number");return AH(this,e),this}default:throw new Error("invalid option: ".concat(r))}}},{key:"toString",value:function(r){return D3(this,r)}}],[{key:"from1DArray",value:function(r,n,e){var t=r*n;if(t!==e.length)throw new RangeError("data length does not match given dimensions");for(var a=new ei(r,n),s=0;s<r;s++)for(var u=0;u<n;u++)a.set(s,u,e[s*n+u]);return a}},{key:"rowVector",value:function(r){for(var n=new ei(1,r.length),e=0;e<r.length;e++)n.set(0,e,r[e]);return n}},{key:"columnVector",value:function(r){for(var n=new ei(r.length,1),e=0;e<r.length;e++)n.set(e,0,r[e]);return n}},{key:"zeros",value:function(r,n){return new ei(r,n)}},{key:"ones",value:function(r,n){return new ei(r,n).fill(1)}},{key:"rand",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e!="object")throw new TypeError("options must be an object");for(var t=e.random,a=t===void 0?Math.random:t,s=new ei(r,n),u=0;u<r;u++)for(var l=0;l<n;l++)s.set(u,l,a());return s}},{key:"randInt",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e!="object")throw new TypeError("options must be an object");var t=e.min,a=t===void 0?0:t,s=e.max,u=s===void 0?1e3:s,l=e.random,c=l===void 0?Math.random:l;if(!Number.isInteger(a))throw new TypeError("min must be an integer");if(!Number.isInteger(u))throw new TypeError("max must be an integer");if(a>=u)throw new RangeError("min must be smaller than max");for(var f=u-a,d=new ei(r,n),v=0;v<r;v++)for(var m=0;m<n;m++){var y=a+Math.round(c()*f);d.set(v,m,y)}return d}},{key:"eye",value:function(r,n,e){n===void 0&&(n=r),e===void 0&&(e=1);for(var t=Math.min(r,n),a=this.zeros(r,n),s=0;s<t;s++)a.set(s,s,e);return a}},{key:"diag",value:function(r,n,e){var t=r.length;n===void 0&&(n=t),e===void 0&&(e=n);for(var a=Math.min(t,n,e),s=this.zeros(n,e),u=0;u<a;u++)s.set(u,u,r[u]);return s}},{key:"min",value:function(r,n){r=this.checkMatrix(r),n=this.checkMatrix(n);for(var e=r.rows,t=r.columns,a=new ei(e,t),s=0;s<e;s++)for(var u=0;u<t;u++)a.set(s,u,Math.min(r.get(s,u),n.get(s,u)));return a}},{key:"max",value:function(r,n){r=this.checkMatrix(r),n=this.checkMatrix(n);for(var e=r.rows,t=r.columns,a=new this(e,t),s=0;s<e;s++)for(var u=0;u<t;u++)a.set(s,u,Math.max(r.get(s,u),n.get(s,u)));return a}},{key:"checkMatrix",value:function(r){return o.isMatrix(r)?r:new ei(r)}},{key:"isMatrix",value:function(r){return r!=null&&r.klass==="Matrix"}}]),o}();Xs.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Xs.prototype[Symbol.for("nodejs.util.inspect.custom")]=rH);function N3(o,i){return o-i}function MH(o){return o.every(function(i){return typeof i=="number"})}Xs.random=Xs.rand,Xs.randomInt=Xs.randInt,Xs.diagonal=Xs.diag,Xs.prototype.diagonal=Xs.prototype.diag,Xs.identity=Xs.eye,Xs.prototype.negate=Xs.prototype.neg,Xs.prototype.tensorProduct=Xs.prototype.kroneckerProduct;var ei=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n,e){var t;if(Object(me.a)(this,r),t=i.call(this),r.isMatrix(n))return Object(Bx.a)(t,n.clone());if(Number.isInteger(n)&&n>=0)if(t.data=[],Number.isInteger(e)&&e>=0)for(var a=0;a<n;a++)t.data.push(new Float64Array(e));else throw new TypeError("nColumns must be a positive integer");else if(zl(n)){var s=n;if(n=s.length,e=n?s[0].length:0,typeof e!="number")throw new TypeError("Data must be a 2D array with at least one element");t.data=[];for(var u=0;u<n;u++){if(s[u].length!==e)throw new RangeError("Inconsistent array dimensions");if(!MH(s[u]))throw new TypeError("Input data contains non-numeric values");t.data.push(Float64Array.from(s[u]))}}else throw new TypeError("First argument must be a positive number or an array");return t.rows=n,t.columns=e,t}return Object(ue.a)(r,[{key:"set",value:function(e,t,a){return this.data[e][t]=a,this}},{key:"get",value:function(e,t){return this.data[e][t]}},{key:"removeRow",value:function(e){return Zc(this,e),this.data.splice(e,1),this.rows-=1,this}},{key:"addRow",value:function(e,t){return t===void 0&&(t=e,e=this.rows),Zc(this,e,!0),t=Float64Array.from(pg(this,t)),this.data.splice(e,0,t),this.rows+=1,this}},{key:"removeColumn",value:function(e){Qc(this,e);for(var t=0;t<this.rows;t++){for(var a=new Float64Array(this.columns-1),s=0;s<e;s++)a[s]=this.data[t][s];for(var u=e+1;u<this.columns;u++)a[u-1]=this.data[t][u];this.data[t]=a}return this.columns-=1,this}},{key:"addColumn",value:function(e,t){typeof t=="undefined"&&(t=e,e=this.columns),Qc(this,e,!0),t=gg(this,t);for(var a=0;a<this.rows;a++){for(var s=new Float64Array(this.columns+1),u=0;u<e;u++)s[u]=this.data[a][u];for(s[u++]=t[a];u<this.columns+1;u++)s[u]=this.data[a][u-1];this.data[a]=s}return this.columns+=1,this}}]),r}(Xs);oH(Xs,ei);var TH=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.data=n,e.rows=n.length,e.columns=n[0].length,e}return Object(ue.a)(r,[{key:"set",value:function(e,t,a){return this.data[e][t]=a,this}},{key:"get",value:function(e,t){return this.data[e][t]}}]),r}(Xs);function yg(o,i){var r=0;return Math.abs(o)>Math.abs(i)?(r=i/o,Math.abs(o)*Math.sqrt(1+r*r)):i!==0?(r=o/i,Math.abs(i)*Math.sqrt(1+r*r)):0}var j3=function(){function o(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object(me.a)(this,o),i=TH.checkMatrix(i),i.isEmpty())throw new Error("Matrix must be non-empty");var n=i.rows,e=i.columns,t=r.computeLeftSingularVectors,a=t===void 0?!0:t,s=r.computeRightSingularVectors,u=s===void 0?!0:s,l=r.autoTranspose,c=l===void 0?!1:l,f=Boolean(a),d=Boolean(u),v=!1,m;if(n<e)if(!c)m=i.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{m=i.transpose(),n=m.rows,e=m.columns,v=!0;var y=f;f=d,d=y}else m=i.clone();for(var C=Math.min(n,e),O=Math.min(n+1,e),x=new Float64Array(O),T=new ei(n,C),L=new ei(e,e),_=new Float64Array(e),z=new Float64Array(n),Q=new Float64Array(O),q=0;q<O;q++)Q[q]=q;for(var ye=Math.min(n-1,e),Ce=Math.max(0,Math.min(e-2,n)),Ae=Math.max(ye,Ce),Pe=0;Pe<Ae;Pe++){if(Pe<ye){x[Pe]=0;for(var qe=Pe;qe<n;qe++)x[Pe]=yg(x[Pe],m.get(qe,Pe));if(x[Pe]!==0){m.get(Pe,Pe)<0&&(x[Pe]=-x[Pe]);for(var lt=Pe;lt<n;lt++)m.set(lt,Pe,m.get(lt,Pe)/x[Pe]);m.set(Pe,Pe,m.get(Pe,Pe)+1)}x[Pe]=-x[Pe]}for(var ze=Pe+1;ze<e;ze++){if(Pe<ye&&x[Pe]!==0){for(var ht=0,nn=Pe;nn<n;nn++)ht+=m.get(nn,Pe)*m.get(nn,ze);ht=-ht/m.get(Pe,Pe);for(var Tn=Pe;Tn<n;Tn++)m.set(Tn,ze,m.get(Tn,ze)+ht*m.get(Tn,Pe))}_[ze]=m.get(Pe,ze)}if(f&&Pe<ye)for(var Kn=Pe;Kn<n;Kn++)T.set(Kn,Pe,m.get(Kn,Pe));if(Pe<Ce){_[Pe]=0;for(var zn=Pe+1;zn<e;zn++)_[Pe]=yg(_[Pe],_[zn]);if(_[Pe]!==0){_[Pe+1]<0&&(_[Pe]=0-_[Pe]);for(var An=Pe+1;An<e;An++)_[An]/=_[Pe];_[Pe+1]+=1}if(_[Pe]=-_[Pe],Pe+1<n&&_[Pe]!==0){for(var br=Pe+1;br<n;br++)z[br]=0;for(var sn=Pe+1;sn<n;sn++)for(var Xn=Pe+1;Xn<e;Xn++)z[sn]+=_[Xn]*m.get(sn,Xn);for(var dr=Pe+1;dr<e;dr++)for(var ga=-_[dr]/_[Pe+1],ca=Pe+1;ca<n;ca++)m.set(ca,dr,m.get(ca,dr)+ga*z[ca])}if(d)for(var Ta=Pe+1;Ta<e;Ta++)L.set(Ta,Pe,_[Ta])}}var La=Math.min(e,n+1);if(ye<e&&(x[ye]=m.get(ye,ye)),n<La&&(x[La-1]=0),Ce+1<La&&(_[Ce]=m.get(Ce,La-1)),_[La-1]=0,f){for(var yo=ye;yo<C;yo++){for(var Jo=0;Jo<n;Jo++)T.set(Jo,yo,0);T.set(yo,yo,1)}for(var Ti=ye-1;Ti>=0;Ti--)if(x[Ti]!==0){for(var Qu=Ti+1;Qu<C;Qu++){for(var nf=0,Bg=Ti;Bg<n;Bg++)nf+=T.get(Bg,Ti)*T.get(Bg,Qu);nf=-nf/T.get(Ti,Ti);for(var np=Ti;np<n;np++)T.set(np,Qu,T.get(np,Qu)+nf*T.get(np,Ti))}for(var Gg=Ti;Gg<n;Gg++)T.set(Gg,Ti,-T.get(Gg,Ti));T.set(Ti,Ti,1+T.get(Ti,Ti));for(var MM=0;MM<Ti-1;MM++)T.set(MM,Ti,0)}else{for(var TM=0;TM<n;TM++)T.set(TM,Ti,0);T.set(Ti,Ti,1)}}if(d)for(var pl=e-1;pl>=0;pl--){if(pl<Ce&&_[pl]!==0)for(var zy=pl+1;zy<e;zy++){for(var AE=0,ME=pl+1;ME<e;ME++)AE+=L.get(ME,pl)*L.get(ME,zy);AE=-AE/L.get(pl+1,pl);for(var Uy=pl+1;Uy<e;Uy++)L.set(Uy,zy,L.get(Uy,zy)+AE*L.get(Uy,pl))}for(var PM=0;PM<e;PM++)L.set(PM,pl,0);L.set(pl,pl,1)}for(var EL=La-1,kM=0,OL=Number.EPSILON;La>0;){var Ha=void 0,Vy=void 0;for(Ha=La-2;Ha>=-1&&Ha!==-1;Ha--){var UQ=Number.MIN_VALUE+OL*Math.abs(x[Ha]+Math.abs(x[Ha+1]));if(Math.abs(_[Ha])<=UQ||Number.isNaN(_[Ha])){_[Ha]=0;break}}if(Ha===La-2)Vy=4;else{var Ul=void 0;for(Ul=La-1;Ul>=Ha&&Ul!==Ha;Ul--){var VQ=(Ul!==La?Math.abs(_[Ul]):0)+(Ul!==Ha+1?Math.abs(_[Ul-1]):0);if(Math.abs(x[Ul])<=OL*VQ){x[Ul]=0;break}}Ul===Ha?Vy=3:Ul===La-1?Vy=1:(Vy=2,Ha=Ul)}switch(Ha++,Vy){case 1:{var DM=_[La-2];_[La-2]=0;for(var vc=La-2;vc>=Ha;vc--){var Hy=yg(x[vc],DM),IM=x[vc]/Hy,RM=DM/Hy;if(x[vc]=Hy,vc!==Ha&&(DM=-RM*_[vc-1],_[vc-1]=IM*_[vc-1]),d)for(var $h=0;$h<e;$h++)Hy=IM*L.get($h,vc)+RM*L.get($h,La-1),L.set($h,La-1,-RM*L.get($h,vc)+IM*L.get($h,La-1)),L.set($h,vc,Hy)}break}case 2:{var NM=_[Ha-1];_[Ha-1]=0;for(var rf=Ha;rf<La;rf++){var Wy=yg(x[rf],NM),jM=x[rf]/Wy,LM=NM/Wy;if(x[rf]=Wy,NM=-LM*_[rf],_[rf]=jM*_[rf],f)for(var Kh=0;Kh<n;Kh++)Wy=jM*T.get(Kh,rf)+LM*T.get(Kh,Ha-1),T.set(Kh,Ha-1,-LM*T.get(Kh,rf)+jM*T.get(Kh,Ha-1)),T.set(Kh,rf,Wy)}break}case 3:{var $y=Math.max(Math.abs(x[La-1]),Math.abs(x[La-2]),Math.abs(_[La-2]),Math.abs(x[Ha]),Math.abs(_[Ha])),zg=x[La-1]/$y,wL=x[La-2]/$y,TE=_[La-2]/$y,_M=x[Ha]/$y,HQ=_[Ha]/$y,rp=((wL+zg)*(wL-zg)+TE*TE)/2,PE=zg*TE*(zg*TE),Ky=0;(rp!==0||PE!==0)&&(rp<0?Ky=0-Math.sqrt(rp*rp+PE):Ky=Math.sqrt(rp*rp+PE),Ky=PE/(rp+Ky));for(var ap=(_M+zg)*(_M-zg)+Ky,Ug=_M*HQ,Qi=Ha;Qi<La-1;Qi++){var qu=yg(ap,Ug);qu===0&&(qu=Number.MIN_VALUE);var af=ap/qu,of=Ug/qu;if(Qi!==Ha&&(_[Qi-1]=qu),ap=af*x[Qi]+of*_[Qi],_[Qi]=af*_[Qi]-of*x[Qi],Ug=of*x[Qi+1],x[Qi+1]=af*x[Qi+1],d)for(var Xh=0;Xh<e;Xh++)qu=af*L.get(Xh,Qi)+of*L.get(Xh,Qi+1),L.set(Xh,Qi+1,-of*L.get(Xh,Qi)+af*L.get(Xh,Qi+1)),L.set(Xh,Qi,qu);if(qu=yg(ap,Ug),qu===0&&(qu=Number.MIN_VALUE),af=ap/qu,of=Ug/qu,x[Qi]=qu,ap=af*_[Qi]+of*x[Qi+1],x[Qi+1]=-of*_[Qi]+af*x[Qi+1],Ug=of*_[Qi+1],_[Qi+1]=af*_[Qi+1],f&&Qi<n-1)for(var Yh=0;Yh<n;Yh++)qu=af*T.get(Yh,Qi)+of*T.get(Yh,Qi+1),T.set(Yh,Qi+1,-of*T.get(Yh,Qi)+af*T.get(Yh,Qi+1)),T.set(Yh,Qi,qu)}_[La-2]=ap,kM=kM+1;break}case 4:{if(x[Ha]<=0&&(x[Ha]=x[Ha]<0?-x[Ha]:0,d))for(var kE=0;kE<=EL;kE++)L.set(kE,Ha,-L.get(kE,Ha));for(;Ha<EL&&!(x[Ha]>=x[Ha+1]);){var Xy=x[Ha];if(x[Ha]=x[Ha+1],x[Ha+1]=Xy,d&&Ha<e-1)for(var Vg=0;Vg<e;Vg++)Xy=L.get(Vg,Ha+1),L.set(Vg,Ha+1,L.get(Vg,Ha)),L.set(Vg,Ha,Xy);if(f&&Ha<n-1)for(var Hg=0;Hg<n;Hg++)Xy=T.get(Hg,Ha+1),T.set(Hg,Ha+1,T.get(Hg,Ha)),T.set(Hg,Ha,Xy);Ha++}kM=0,La--;break}}}if(v){var WQ=L;L=T,T=WQ}this.m=n,this.n=e,this.s=x,this.U=T,this.V=L}return Object(ue.a)(o,[{key:"solve",value:function(r){for(var n=r,e=this.threshold,t=this.s.length,a=ei.zeros(t,t),s=0;s<t;s++)Math.abs(this.s[s])<=e?a.set(s,s,0):a.set(s,s,1/this.s[s]);for(var u=this.U,l=this.rightSingularVectors,c=l.mmul(a),f=l.rows,d=u.rows,v=ei.zeros(f,d),m=0;m<f;m++)for(var y=0;y<d;y++){for(var C=0,O=0;O<t;O++)C+=c.get(m,O)*u.get(y,O);v.set(m,y,C)}return v.mmul(n)}},{key:"solveForDiagonal",value:function(r){return this.solve(ei.diag(r))}},{key:"inverse",value:function(){for(var r=this.V,n=this.threshold,e=r.rows,t=r.columns,a=new ei(e,this.s.length),s=0;s<e;s++)for(var u=0;u<t;u++)Math.abs(this.s[u])>n&&a.set(s,u,r.get(s,u)/this.s[u]);for(var l=this.U,c=l.rows,f=l.columns,d=new ei(e,c),v=0;v<e;v++)for(var m=0;m<c;m++){for(var y=0,C=0;C<f;C++)y+=a.get(v,C)*l.get(m,C);d.set(v,m,y)}return d}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var r=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,n=0,e=this.s,t=0,a=e.length;t<a;t++)e[t]>r&&n++;return n}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return ei.diag(this.s)}}]),o}(),PH=function(){function o(i){Object(me.a)(this,o),this.distances=i.distances,this.dimension=i.dimension||2,this.linkDistance=i.linkDistance}return Object(ue.a)(o,[{key:"layout",value:function(){var r=this,n=r.dimension,e=r.distances,t=r.linkDistance;try{var a=ei.mul(ei.pow(e,2),-.5),s=a.mean("row"),u=a.mean("column"),l=a.mean();a.add(l).subRowVector(s).subColumnVector(u);var c=new j3(a),f=ei.sqrt(c.diagonalMatrix).diagonal();return c.leftSingularVectors.toJSON().map(function(C){return ei.mul([C],[f]).toJSON()[0].splice(0,n)})}catch(C){for(var d=[],v=0;v<e.length;v++){var m=Math.random()*t,y=Math.random()*t;d.push([m,y])}return d}}}]),o}(),kH=800,DH=function(){function o(i){Object(me.a)(this,o),this.disp=[],this.positions=i.positions,this.adjMatrix=i.adjMatrix,this.focusID=i.focusID,this.radii=i.radii,this.iterations=i.iterations||10,this.height=i.height||10,this.width=i.width||10,this.speed=i.speed||100,this.gravity=i.gravity||10,this.nodeSizeFunc=i.nodeSizeFunc,this.k=i.k||5,this.strictRadial=i.strictRadial,this.nodes=i.nodes}return Object(ue.a)(o,[{key:"layout",value:function(){var r=this,n=r.positions,e=[],t=r.iterations,a=r.width/10;r.maxDisplace=a,r.disp=e;for(var s=0;s<t;s++)n.forEach(function(u,l){e[l]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return n}},{key:"getRepulsion",value:function(){var r=this,n=r.positions,e=r.nodes,t=r.disp,a=r.k,s=r.radii||[];n.forEach(function(u,l){t[l]={x:0,y:0},n.forEach(function(c,f){if(l!==f&&s[l]===s[f]){var d=u[0]-c[0],v=u[1]-c[1],m=Math.sqrt(d*d+v*v);if(m===0){m=1;var y=l>f?1:-1;d=.01*y,v=.01*y}if(m<r.nodeSizeFunc(e[l])/2+r.nodeSizeFunc(e[f])/2){var C=a*a/m;t[l].x+=d/m*C,t[l].y+=v/m*C}}})})}},{key:"updatePositions",value:function(){var r=this,n=r.positions,e=r.disp,t=r.speed,a=r.strictRadial,s=r.focusID,u=r.maxDisplace||r.width/10;a&&e.forEach(function(c,f){var d=n[f][0]-n[s][0],v=n[f][1]-n[s][1],m=Math.sqrt(d*d+v*v),y=v/m,C=-d/m,O=Math.sqrt(c.x*c.x+c.y*c.y),x=Math.acos((y*c.x+C*c.y)/O);x>Math.PI/2&&(x-=Math.PI/2,y*=-1,C*=-1);var T=Math.cos(x)*O;c.x=y*T,c.y=C*T});var l=r.radii;n.forEach(function(c,f){if(f!==s){var d=Math.sqrt(e[f].x*e[f].x+e[f].y*e[f].y);if(d>0&&f!==s){var v=Math.min(u*(t/kH),d);if(c[0]+=e[f].x/d*v,c[1]+=e[f].y/d*v,a){var m=c[0]-n[s][0],y=c[1]-n[s][1],C=Math.sqrt(m*m+y*y);m=m/C*l[f],y=y/C*l[f],c[0]=n[s][0]+m,c[1]=n[s][1]+y}}}})}}]),o}();function IH(o){for(var i=o.length,r=o[0].length,n=[],e=0;e<i;e++){for(var t=[],a=0;a<r;a++)o[e][a]!==0?t.push(1/(o[e][a]*o[e][a])):t.push(0);n.push(t)}return n}function RH(o,i){var r=-1;return o.forEach(function(n,e){n.id===i&&(r=e)}),r}function L3(o,i){return Math.sqrt((o[0]-i[0])*(o[0]-i[0])+(o[1]-i[1])*(o[1]-i[1]))}var NH=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e.nodes=[],e.edges=[],e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges||[];if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var s=e.center;if(t.length===1){t[0].x=s[0],t[0].y=s[1],e.onLayoutEnd&&e.onLayoutEnd();return}var u=e.linkDistance,l=null;if(V0(e.focusNode)){for(var c=!1,f=0;f<t.length;f++)t[f].id===e.focusNode&&(l=t[f],e.focusNode=l,c=!0,f=t.length);c||(l=null)}else l=e.focusNode;l||(l=t[0],e.focusNode=l);var d=RH(t,l.id);e.focusIndex=d;var v=kD({nodes:t,edges:a},!1),m=PD(v),y=e.maxToFocus(m,d);e.handleInfinity(m,d,y+1),e.distances=m;var C=m[d],O=e.width||500,x=e.height||500,T=O-s[0]>s[0]?s[0]:O-s[0],L=x-s[1]>s[1]?s[1]:x-s[1];T===0&&(T=O/2),L===0&&(L=x/2);var _=L>T?T:L,z=Math.max.apply(Math,Object(We.a)(C)),Q=[];C.forEach(function(zn,An){e.unitRadius||(e.unitRadius=_/z),Q[An]=zn*e.unitRadius}),e.radii=Q;var q=e.eIdealDisMatrix();e.eIdealDistances=q;var ye=IH(q);e.weights=ye;var Ce=new PH({linkDistance:u,distances:q}),Ae=Ce.layout();Ae.forEach(function(zn){G2(zn[0])&&(zn[0]=Math.random()*u),G2(zn[1])&&(zn[1]=Math.random()*u)}),e.positions=Ae,Ae.forEach(function(zn,An){t[An].x=zn[0]+s[0],t[An].y=zn[1]+s[1]}),Ae.forEach(function(zn){zn[0]-=Ae[d][0],zn[1]-=Ae[d][1]}),e.run();var Pe=e.preventOverlap,qe=e.nodeSize,lt,ze=e.strictRadial;if(Pe){var ht=e.nodeSpacing,nn;Wr(ht)?nn=function(){return ht}:Th(ht)?nn=ht:nn=function(){return 0},qe?bu(qe)?lt=function(An){var br=qe[0]>qe[1]?qe[0]:qe[1];return br+nn(An)}:lt=function(An){return qe+nn(An)}:lt=function(An){if(An.size){if(bu(An.size)){var br=An.size[0]>An.size[1]?An.size[0]:An.size[1];return br+nn(An)}if(_f(An.size)){var sn=An.size.width>An.size.height?An.size.width:An.size.height;return sn+nn(An)}return An.size+nn(An)}return 10+nn(An)};var Tn={nodes:t,nodeSizeFunc:lt,adjMatrix:v,positions:Ae,radii:Q,height:x,width:O,strictRadial:ze,focusID:d,iterations:e.maxPreventOverlapIteration||200,k:Ae.length/4.5},Kn=new DH(Tn);Ae=Kn.layout()}return Ae.forEach(function(zn,An){t[An].x=zn[0]+s[0],t[An].y=zn[1]+s[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:a}}},{key:"run",value:function(){for(var e=this,t=e.maxIteration,a=e.positions||[],s=e.weights||[],u=e.eIdealDistances||[],l=e.radii||[],c=0;c<=t;c++){var f=c/t;e.oneIteration(f,a,l,u,s)}}},{key:"oneIteration",value:function(e,t,a,s,u){var l=this,c=1-e,f=l.focusIndex;t.forEach(function(d,v){var m=L3(d,[0,0]),y=m===0?0:1/m;if(v!==f){var C=0,O=0,x=0;t.forEach(function(L,_){if(v!==_){var z=L3(d,L),Q=z===0?0:1/z,q=s[_][v];x+=u[v][_],C+=u[v][_]*(L[0]+q*(d[0]-L[0])*Q),O+=u[v][_]*(L[1]+q*(d[1]-L[1])*Q)}});var T=a[v]===0?0:1/a[v];x*=c,x+=e*T*T,C*=c,C+=e*T*d[0]*y,d[0]=C/x,O*=c,O+=e*T*d[1]*y,d[1]=O/x}})}},{key:"eIdealDisMatrix",value:function(){var e=this,t=e.nodes;if(!t)return[];var a=e.distances,s=e.linkDistance,u=e.radii||[],l=e.unitRadius||50,c=[];return a&&a.forEach(function(f,d){var v=[];f.forEach(function(m,y){if(d===y)v.push(0);else if(u[d]===u[y])if(e.sortBy==="data")v.push(m*(Math.abs(d-y)*e.sortStrength)/(u[d]/l));else if(e.sortBy){var C=t[d][e.sortBy]||0,O=t[y][e.sortBy]||0;V0(C)&&(C=C.charCodeAt(0)),V0(O)&&(O=O.charCodeAt(0)),v.push(m*(Math.abs(C-O)*e.sortStrength)/(u[d]/l))}else v.push(m*s/(u[d]/l));else{var x=(s+l)/2;v.push(m*x)}}),c.push(v)}),c}},{key:"handleInfinity",value:function(e,t,a){for(var s=e.length,u=0;u<s;u++)if(e[t][u]===Infinity){e[t][u]=a,e[u][t]=a;for(var l=0;l<s;l++)e[u][l]!==Infinity&&e[t][l]===Infinity&&(e[t][l]=a+e[u][l],e[l][t]=a+e[u][l])}for(var c=0;c<s;c++)if(c!==t){for(var f=0;f<s;f++)if(e[c][f]===Infinity){var d=Math.abs(e[t][c]-e[t][f]);d=d===0?1:d,e[c][f]=d}}}},{key:"maxToFocus",value:function(e,t){for(var a=0,s=0;s<e[t].length;s++)e[t][s]!==Infinity&&(a=e[t][s]>a?e[t][s]:a);return a}},{key:"getType",value:function(){return"radial"}}]),r}(Iu),jH=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=3/2*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges,s=t.length;if(s===0){e.onLayoutEnd&&e.onLayoutEnd();return}!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var u=e.center;if(s===1){t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd();return}var l=[],c;bu(e.nodeSize)?c=Math.max(e.nodeSize[0],e.nodeSize[1]):c=e.nodeSize,t.forEach(function(Ce){l.push(Ce);var Ae=c;bu(Ce.size)?Ae=Math.max(Ce.size[0],Ce.size[1]):Wr(Ce.size)?Ae=Ce.size:_f(Ce.size)&&(Ae=Math.max(Ce.size.width,Ce.size.height)),c=Math.max(c,Ae)}),e.clockwise=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise;var f={},d={};if(l.forEach(function(Ce,Ae){f[Ce.id]=Ce,d[Ce.id]=Ae}),(e.sortBy==="degree"||!V0(e.sortBy)||l[0][e.sortBy]===void 0)&&(e.sortBy="degree",!Wr(t[0].degree))){var v=H0(t.length,d,a);l.forEach(function(Ce,Ae){Ce.degree=v[Ae]})}l.sort(function(Ce,Ae){return Ae[e.sortBy]-Ce[e.sortBy]}),e.maxValueNode=l[0],e.maxLevelDiff=e.maxLevelDiff||e.maxValueNode[e.sortBy]/4;var m=[[]],y=m[0];l.forEach(function(Ce){if(y.length>0){var Ae=Math.abs(y[0][e.sortBy]-Ce[e.sortBy]);e.maxLevelDiff&&Ae>=e.maxLevelDiff&&(y=[],m.push(y))}y.push(Ce)});var C=c+e.minNodeSpacing;if(!e.preventOverlap){var O=m.length>0&&m[0].length>1,x=Math.min(e.width,e.height)/2-C,T=x/(m.length+(O?1:0));C=Math.min(C,T)}var L=0;if(m.forEach(function(Ce){var Ae=e.sweep;Ae===void 0&&(Ae=2*Math.PI-2*Math.PI/Ce.length);var Pe=Ce.dTheta=Ae/Math.max(1,Ce.length-1);if(Ce.length>1&&e.preventOverlap){var qe=Math.cos(Pe)-Math.cos(0),lt=Math.sin(Pe)-Math.sin(0),ze=Math.sqrt(C*C/(qe*qe+lt*lt));L=Math.max(ze,L)}Ce.r=L,L+=C}),e.equidistant){for(var _=0,z=0,Q=0;Q<m.length;Q++){var q=m[Q],ye=q.r-z;_=Math.max(_,ye)}z=0,m.forEach(function(Ce,Ae){Ae===0&&(z=Ce.r),Ce.r=z,z+=_})}return m.forEach(function(Ce){var Ae=Ce.dTheta,Pe=Ce.r;Ce.forEach(function(qe,lt){var ze=e.startAngle+(e.clockwise?1:-1)*Ae*lt;qe.x=u[0]+Pe*Math.cos(ze),qe.y=u[1]+Pe*Math.sin(ze)})}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:a}}},{key:"getType",value:function(){return"concentric"}}]),r}(Iu),LH=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.center=[0,0],e.linkDistance=50,e.nodes=[],e.edges=[],e.onLayoutEnd=function(){},e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{center:[0,0],linkDistance:50}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges,s=a===void 0?[]:a,u=e.center;if(!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}if(t.length===1){t[0].x=u[0],t[0].y=u[1],e.onLayoutEnd&&e.onLayoutEnd();return}var l=e.linkDistance,c=kD({nodes:t,edges:s},!1),f=PD(c);e.handleInfinity(f);var d=t7(f,l);e.scaledDistances=d;var v=e.runMDS();return e.positions=v,v.forEach(function(m,y){t[y].x=m[0]+u[0],t[y].y=m[1]+u[1]}),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:s}}},{key:"runMDS",value:function(){var e=this,t=2,a=e.scaledDistances,s=ei.mul(ei.pow(a,2),-.5),u=s.mean("row"),l=s.mean("column"),c=s.mean();s.add(c).subRowVector(u).subColumnVector(l);var f=new j3(s),d=ei.sqrt(f.diagonalMatrix).diagonal();return f.leftSingularVectors.toJSON().map(function(v){return ei.mul([v],[d]).toJSON()[0].splice(0,t)})}},{key:"handleInfinity",value:function(e){var t=-999999;e.forEach(function(a){a.forEach(function(s){s!==Infinity&&t<s&&(t=s)})}),e.forEach(function(a,s){a.forEach(function(u,l){u===Infinity&&(e[s][l]=t)})})}},{key:"getType",value:function(){return"mds"}}]),r}(Iu),_H=800,FH=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.workerEnabled=!1,e.gravity=10,e.speed=5,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.onLayoutEnd=function(){},e.tick=function(){},e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){var e=this,t,a,s=this,u=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),!u||u.length===0){(t=s.onLayoutEnd)===null||t===void 0||t.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);var l=s.center;if(u.length===1){u[0].x=l[0],u[0].y=l[1],(a=s.onLayoutEnd)===null||a===void 0||a.call(s);return}var c={},f={};return u.forEach(function(d,v){Wr(d.x)||(d.x=Math.random()*e.width),Wr(d.y)||(d.y=Math.random()*e.height),c[d.id]=d,f[d.id]=v}),s.nodeMap=c,s.nodeIdxMap=f,s.run()}},{key:"run",value:function(){var e,t=this,a=t.nodes;if(!!a){var s=t.edges,u=t.maxIteration,l=t.workerEnabled,c=t.clustering,f={};if(c&&a.forEach(function(m){f[m.cluster]===void 0&&(f[m.cluster]={name:m.cluster,cx:0,cy:0,count:0})}),l){for(var d=0;d<u;d++)t.runOneStep(f);(e=t.onLayoutEnd)===null||e===void 0||e.call(t)}else{if(typeof window=="undefined")return;var v=0;this.timeInterval=window.setInterval(function(){var m;t.runOneStep(f),v++,v>=u&&((m=t.onLayoutEnd)===null||m===void 0||m.call(t),window.clearInterval(t.timeInterval))},0)}return{nodes:a,edges:s}}}},{key:"runOneStep",value:function(e){var t,a=this,s=a.nodes;if(!!s){var u=a.edges,l=a.center,c=a.gravity,f=a.speed,d=a.clustering,v=a.height*a.width,m=Math.sqrt(v)/10,y=v/(s.length+1),C=Math.sqrt(y),O=[];if(s.forEach(function(_,z){O[z]={x:0,y:0}}),a.applyCalculate(s,u,O,C,y),d){for(var x in e)e[x].cx=0,e[x].cy=0,e[x].count=0;s.forEach(function(_){var z=e[_.cluster];Wr(_.x)&&(z.cx+=_.x),Wr(_.y)&&(z.cy+=_.y),z.count++});for(var T in e)e[T].cx/=e[T].count,e[T].cy/=e[T].count;var L=a.clusterGravity||c;s.forEach(function(_,z){if(!(!Wr(_.x)||!Wr(_.y))){var Q=e[_.cluster],q=Math.sqrt((_.x-Q.cx)*(_.x-Q.cx)+(_.y-Q.cy)*(_.y-Q.cy)),ye=C*L;O[z].x-=ye*(_.x-Q.cx)/q,O[z].y-=ye*(_.y-Q.cy)/q}})}s.forEach(function(_,z){if(!(!Wr(_.x)||!Wr(_.y))){var Q=.01*C*c;O[z].x-=Q*(_.x-l[0]),O[z].y-=Q*(_.y-l[1])}}),s.forEach(function(_,z){if(Wr(_.fx)&&Wr(_.fy)){_.x=_.fx,_.y=_.fy;return}if(!(!Wr(_.x)||!Wr(_.y))){var Q=Math.sqrt(O[z].x*O[z].x+O[z].y*O[z].y);if(Q>0){var q=Math.min(m*(f/_H),Q);_.x+=O[z].x/Q*q,_.y+=O[z].y/Q*q}}}),(t=a.tick)===null||t===void 0||t.call(a)}}},{key:"applyCalculate",value:function(e,t,a,s,u){var l=this;l.calRepulsive(e,a,u),t&&l.calAttractive(t,a,s)}},{key:"calRepulsive",value:function(e,t,a){e.forEach(function(s,u){t[u]={x:0,y:0},e.forEach(function(l,c){if(u!==c&&!(!Wr(s.x)||!Wr(l.x)||!Wr(s.y)||!Wr(l.y))){var f=s.x-l.x,d=s.y-l.y,v=f*f+d*d;if(v===0){v=1;var m=u>c?1:-1;f=.01*m,d=.01*m}var y=a/v;t[u].x+=f*y,t[u].y+=d*y}})})}},{key:"calAttractive",value:function(e,t,a){var s=this;e.forEach(function(u){var l=Hi(u,"source"),c=Hi(u,"target");if(!(!l||!c)){var f=s.nodeIdxMap[l],d=s.nodeIdxMap[c];if(f!==d){var v=s.nodeMap[l],m=s.nodeMap[c];if(!(!Wr(m.x)||!Wr(v.x)||!Wr(m.y)||!Wr(v.y))){var y=m.x-v.x,C=m.y-v.y,O=Math.sqrt(y*y+C*C),x=O*O/a;t[d].x-=y/O*x,t[d].y-=C/O*x,t[f].x+=y/O*x,t[f].y+=C/O*x}}}})}},{key:"stop",value:function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}},{key:"destroy",value:function(){var e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0}},{key:"getType",value:function(){return"fruchterman"}}]),r}(Iu),BH=h("yG8O"),ko=h.n(BH),GH=h("lwsE"),Wi=h.n(GH),zH=h("W8MJ"),$i=h.n(zH),UH=h("U+yc"),Do=h.n(UH),Mq=h("1ABj"),st=h("Gj0h"),qn=h("IOcx"),ja=h("4cb6");function BA(o){return typeof o=="number"}function Pd(o){return o===void 0?0:o>360||o<-360?o%360:o}function Jv(o,i,r){return BA(o)?qn.d.fromValues(o,i,r):o.length===3?qn.d.clone(o):qn.d.fromValues(o[0],o[1],o[2])}var _3=function(){function o(i,r){Wi()(this,o),this.name=void 0,this.matrix=void 0,this.right=void 0,this.up=void 0,this.forward=void 0,this.position=void 0,this.focalPoint=void 0,this.distanceVector=void 0,this.distance=void 0,this.dollyingStep=void 0,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.name=i,this.matrix=qn.b.clone(r.matrix),this.right=qn.d.clone(r.right),this.up=qn.d.clone(r.up),this.forward=qn.d.clone(r.forward),this.position=qn.d.clone(r.position),this.focalPoint=qn.d.clone(r.focalPoint),this.distanceVector=qn.d.clone(r.distanceVector),this.azimuth=r.azimuth,this.elevation=r.elevation,this.roll=r.roll,this.relAzimuth=r.relAzimuth,this.relElevation=r.relElevation,this.relRoll=r.relRoll,this.dollyingStep=r.dollyingStep,this.distance=r.distance}return $i()(o,[{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getRoll",value:function(){return this.roll}},{key:"retrieve",value:function(r){r.matrix=qn.b.copy(r.matrix,this.matrix),r.right=qn.d.copy(r.right,this.right),r.up=qn.d.copy(r.up,this.up),r.forward=qn.d.copy(r.forward,this.forward),r.position=qn.d.copy(r.position,this.position),r.focalPoint=qn.d.copy(r.focalPoint,this.focalPoint),r.distanceVector=qn.d.copy(r.distanceVector,this.distanceVector),r.azimuth=this.azimuth,r.elevation=this.elevation,r.roll=this.roll,r.relAzimuth=this.relAzimuth,r.relElevation=this.relElevation,r.relRoll=this.relRoll,r.dollyingStep=this.dollyingStep,r.distance=this.distance}}]),o}(),F3,B3,G3,GA,z3,U3,V3,go;(function(o){o.ORBITING="ORBITING",o.EXPLORING="EXPLORING",o.TRACKING="TRACKING"})(go||(go={}));var Q2;(function(o){o.DEFAULT="DEFAULT",o.ROTATIONAL="ROTATIONAL",o.TRANSLATIONAL="TRANSLATIONAL",o.CINEMATIC="CINEMATIC"})(Q2||(Q2={}));var Zv;(function(o){o.ORTHOGRAPHIC="ORTHOGRAPHIC",o.PERSPECTIVE="PERSPECTIVE"})(Zv||(Zv={}));var kd=Math.PI/180,Dh=180/Math.PI,H3=(F3=Object(ja.injectable)(),B3=Object(ja.inject)(st.IDENTIFIER.InteractorService),F3(G3=(GA=(V3=U3=function(){function o(){Wi()(this,o),this.matrix=qn.b.create(),this.right=qn.d.fromValues(1,0,0),this.up=qn.d.fromValues(0,1,0),this.forward=qn.d.fromValues(0,0,1),this.position=qn.d.fromValues(0,0,1),this.focalPoint=qn.d.fromValues(0,0,0),this.distanceVector=qn.d.fromValues(0,0,0),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=Infinity,this.minDistance=-Infinity,this.rotateWorld=!1,ko()(this,"interactor",z3,this),this.fov=30,this.near=.1,this.far=1e4,this.aspect=1,this.left=void 0,this.rright=void 0,this.top=void 0,this.bottom=void 0,this.zoom=1,this.perspective=qn.b.create(),this.view=void 0,this.following=void 0,this.type=go.EXPLORING,this.trackingMode=Q2.DEFAULT,this.projectionMode=Zv.PERSPECTIVE,this.frustum=new st.Frustum,this.landmarks=[],this.landmarkAnimationID=void 0}return $i()(o,[{key:"clone",value:function(){var r=new o;return r.setType(this.type,void 0),r.interactor=this.interactor,r}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.perspective}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"setType",value:function(r,n){return this.type=r,this.type===go.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===go.TRACKING&&n!==void 0&&this.setTrackingMode(n),this}},{key:"setProjectionMode",value:function(r){return this.projectionMode=r,this}},{key:"setTrackingMode",value:function(r){if(this.type!==go.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=r,this}},{key:"setWorldRotation",value:function(r){this.rotateWorld=r,this._getAngles()}},{key:"getViewTransform",value:function(){return qn.b.invert(qn.b.create(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"setMatrix",value:function(r){return this.matrix=r,this._update(),this}},{key:"setAspect",value:function(r){return this.setPerspective(this.near,this.far,this.fov,r),this}},{key:"setViewOffset",value:function(r,n,e,t,a,s){return this.aspect=r/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=r,this.view.fullHeight=n,this.view.offsetX=e,this.view.offsetY=t,this.view.width=a,this.view.height=s,this.projectionMode===Zv.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===Zv.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setPerspective",value:function(r,n,e,t){return this.projectionMode=Zv.PERSPECTIVE,this.fov=e,this.near=r,this.far=n,this.aspect=t,qn.b.perspective(this.perspective,this.fov*kd,this.aspect,this.near,this.far),this}},{key:"setOrthographic",value:function(r,n,e,t,a,s){this.projectionMode=Zv.ORTHOGRAPHIC,this.rright=n,this.left=r,this.top=e,this.bottom=t,this.near=a,this.far=s;var u=(this.rright-this.left)/(2*this.zoom),l=(this.top-this.bottom)/(2*this.zoom),c=(this.rright+this.left)/2,f=(this.top+this.bottom)/2,d=c-u,v=c+u,m=f+l,y=f-l;if(this.view!==void 0&&this.view.enabled){var C=(this.rright-this.left)/this.view.fullWidth/this.zoom,O=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=C*this.view.offsetX,v=d+C*this.view.width,m-=O*this.view.offsetY,y=m-O*this.view.height}return qn.b.ortho(this.perspective,d,v,m,y,a,s),this}},{key:"setPosition",value:function(r,n,e){return this._setPosition(r,n,e),this.setFocalPoint(this.focalPoint),this}},{key:"setFocalPoint",value:function(r,n,e){var t=qn.d.fromValues(0,1,0);if(this.focalPoint=Jv(r,n,e),this.trackingMode===Q2.CINEMATIC){var a=qn.d.subtract(qn.d.create(),this.focalPoint,this.position);r=a[0],n=a[1],e=a[2];var s=qn.d.length(a),u=Math.asin(n/s)*Dh,l=90+Math.atan2(e,r)*Dh,c=qn.b.create();qn.b.rotateY(c,c,l*kd),qn.b.rotateX(c,c,u*kd),t=qn.d.transformMat4(qn.d.create(),[0,1,0],c)}return qn.b.invert(this.matrix,qn.b.lookAt(qn.b.create(),this.position,this.focalPoint,t)),this._getAxes(),this._getDistance(),this._getAngles(),this}},{key:"setDistance",value:function(r){if(!(this.distance===r||r<0)){this.distance=r,this.distance<2e-4&&(this.distance=2e-4),this.dollyingStep=this.distance/100;var n=qn.d.create();r=this.distance;var e=this.forward,t=this.focalPoint;return n[0]=r*e[0]+t[0],n[1]=r*e[1]+t[1],n[2]=r*e[2]+t[2],this._setPosition(n),this}}},{key:"setMaxDistance",value:function(r){return this.maxDistance=r,this}},{key:"setMinDistance",value:function(r){return this.minDistance=r,this}},{key:"changeAzimuth",value:function(r){return this.setAzimuth(this.azimuth+r),this}},{key:"changeElevation",value:function(r){return this.setElevation(this.elevation+r),this}},{key:"changeRoll",value:function(r){return this.setRoll(this.roll+r),this}},{key:"setAzimuth",value:function(r){return this.azimuth=Pd(r),this.computeMatrix(),this._getAxes(),this.type===go.ORBITING||this.type===go.EXPLORING?this._getPosition():this.type===go.TRACKING&&this._getFocalPoint(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(r){return this.elevation=Pd(r),this.computeMatrix(),this._getAxes(),this.type===go.ORBITING||this.type===go.EXPLORING?this._getPosition():this.type===go.TRACKING&&this._getFocalPoint(),this}},{key:"setRoll",value:function(r){return this.roll=Pd(r),this.computeMatrix(),this._getAxes(),this.type===go.ORBITING||this.type===go.EXPLORING?this._getPosition():this.type===go.TRACKING&&this._getFocalPoint(),this}},{key:"rotate",value:function(r,n,e){if(this.type===go.EXPLORING){r=Pd(r),n=Pd(n),e=Pd(e);var t=qn.c.setAxisAngle(qn.c.create(),[1,0,0],(this.rotateWorld?1:-1)*n*kd),a=qn.c.setAxisAngle(qn.c.create(),[0,1,0],(this.rotateWorld?1:-1)*r*kd),s=qn.c.setAxisAngle(qn.c.create(),[0,0,1],e*kd),u=qn.c.multiply(qn.c.create(),a,t);u=qn.c.multiply(qn.c.create(),u,s);var l=qn.b.fromQuat(qn.b.create(),u);qn.b.translate(this.matrix,this.matrix,[0,0,-this.distance]),qn.b.multiply(this.matrix,this.matrix,l),qn.b.translate(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation+n)>90)return;this.relElevation=Pd(n),this.relAzimuth=Pd(r),this.relRoll=Pd(e),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.computeMatrix()}return this._getAxes(),this.type===go.ORBITING||this.type===go.EXPLORING?this._getPosition():this.type===go.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(r,n){var e=Jv(r,n,0),t=qn.d.clone(this.position);return qn.d.add(t,t,qn.d.scale(qn.d.create(),this.right,e[0])),qn.d.add(t,t,qn.d.scale(qn.d.create(),this.up,e[1])),this._setPosition(t),this}},{key:"dolly",value:function(r){var n=this.forward,e=qn.d.clone(this.position),t=r*this.dollyingStep,a=this.distance+r*this.dollyingStep;return t=Math.max(Math.min(a,this.maxDistance),this.minDistance)-this.distance,e[0]+=t*n[0],e[1]+=t*n[1],e[2]+=t*n[2],this._setPosition(e),this.type===go.ORBITING||this.type===go.EXPLORING?this._getDistance():this.type===go.TRACKING&&qn.d.add(this.focalPoint,e,this.distanceVector),this}},{key:"createLandmark",value:function(r,n){var e=this.clone();e.setPosition(n.position),e.setFocalPoint(n.focalPoint),n.roll!==void 0&&e.setRoll(n.roll);var t=new _3(r,e);return this.landmarks.push(t),t}},{key:"setLandmark",value:function(r){var n=new _3(r,this);return this.landmarks.push(n),this}},{key:"gotoLandmark",value:function(r){var n=this,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3,t=this.landmarks.find(function(f){return f.name===r});if(t){if(e===0){t.retrieve(this);return}this.landmarkAnimationID!==void 0&&window.cancelAnimationFrame(this.landmarkAnimationID),this.interactor.disconnect();var a=t.getPosition(),s=t.getFocalPoint(),u=t.getRoll(),l,c=function f(d){l===void 0&&(l=d);var v=d-l,m=(1-Math.cos(v/e*Math.PI))/2,y=qn.d.create(),C=qn.d.create(),O=0;qn.d.lerp(y,n.focalPoint,s,m),qn.d.lerp(C,n.position,a,m),O=n.roll*(1-m)+u*m,n.setFocalPoint(y),n.setPosition(C),n.setRoll(O),n.computeMatrix();var x=qn.d.dist(y,s)+qn.d.dist(C,a);if(!(x>.01)){n.setFocalPoint(y),n.setPosition(C),n.setRoll(O),n.computeMatrix(),n.interactor.connect();return}v<e&&(n.landmarkAnimationID=window.requestAnimationFrame(f))};window.requestAnimationFrame(c)}}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles()}},{key:"computeMatrix",value:function(){var r,n,e=qn.c.setAxisAngle(qn.c.create(),[0,0,1],this.roll*kd);qn.b.identity(this.matrix),r=qn.c.setAxisAngle(qn.c.create(),[1,0,0],(this.rotateWorld&&this.type!==go.TRACKING||this.type===go.TRACKING?1:-1)*this.elevation*kd),n=qn.c.setAxisAngle(qn.c.create(),[0,1,0],(this.rotateWorld&&this.type!==go.TRACKING||this.type===go.TRACKING?1:-1)*this.azimuth*kd);var t=qn.c.multiply(qn.c.create(),n,r);t=qn.c.multiply(qn.c.create(),t,e);var a=qn.b.fromQuat(qn.b.create(),t);this.type===go.ORBITING||this.type===go.EXPLORING?(qn.b.translate(this.matrix,this.matrix,this.focalPoint),qn.b.multiply(this.matrix,this.matrix,a),qn.b.translate(this.matrix,this.matrix,[0,0,this.distance])):this.type===go.TRACKING&&(qn.b.translate(this.matrix,this.matrix,this.position),qn.b.multiply(this.matrix,this.matrix,a))}},{key:"_setPosition",value:function(r,n,e){this.position=Jv(r,n,e);var t=this.matrix;t[12]=this.position[0],t[13]=this.position[1],t[14]=this.position[2],t[15]=1}},{key:"_getAxes",value:function(){qn.d.copy(this.right,Jv(qn.e.transformMat4(qn.e.create(),[1,0,0,0],this.matrix))),qn.d.copy(this.up,Jv(qn.e.transformMat4(qn.e.create(),[0,1,0,0],this.matrix))),qn.d.copy(this.forward,Jv(qn.e.transformMat4(qn.e.create(),[0,0,1,0],this.matrix))),qn.d.normalize(this.right,this.right),qn.d.normalize(this.up,this.up),qn.d.normalize(this.forward,this.forward)}},{key:"_getAngles",value:function(){var r=this.distanceVector[0],n=this.distanceVector[1],e=this.distanceVector[2],t=qn.d.length(this.distanceVector);if(t===0){this.elevation=0,this.azimuth=0;return}this.type===go.TRACKING?(this.elevation=Math.asin(n/t)*Dh,this.azimuth=Math.atan2(-r,-e)*Dh):this.rotateWorld?(this.elevation=Math.asin(n/t)*Dh,this.azimuth=Math.atan2(-r,-e)*Dh):(this.elevation=-Math.asin(n/t)*Dh,this.azimuth=-Math.atan2(-r,-e)*Dh)}},{key:"_getPosition",value:function(){qn.d.copy(this.position,Jv(qn.e.transformMat4(qn.e.create(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){qn.d.transformMat3(this.distanceVector,[0,0,-this.distance],qn.a.fromMat4(qn.a.create(),this.matrix)),qn.d.add(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=qn.d.subtract(qn.d.create(),this.focalPoint,this.position),this.distance=qn.d.length(this.distanceVector),this.dollyingStep=this.distance/100}}]),o}(),U3.ProjectionMode={ORTHOGRAPHIC:"ORTHOGRAPHIC",PERSPECTIVE:"PERSPECTIVE"},V3),z3=Do()(GA.prototype,"interactor",[B3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GA))||G3),W3,$3,K3,zA,X3,Y0,Y3,Ih=(W3=Object(ja.injectable)(),$3=Object(ja.inject)(st.IDENTIFIER.GeometryComponentManager),W3(K3=(zA=(Y3=Y0=function(){function o(){Wi()(this,o),this.config=void 0,ko()(this,"geometry",X3,this),this.entity=void 0,this.component=void 0}return $i()(o,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(r){this.config=r}},{key:"setEntity",value:function(r){this.entity=r,this.component=this.geometry.create(r),this.component.entity=r,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),o}(),Y0.BOX="box",Y0.SPHERE="sphere",Y0.PLANE="plane",Y0.MERGED="merged",Y3),X3=Do()(zA.prototype,"geometry",[$3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zA))||K3),VH=h("o0o1"),hi=h.n(VH),HH=h("yXPU"),ps=h.n(HH),WH=h("lSNA"),Hn=h.n(WH),_r=h("XkVO");function J3(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}var $H={}.toString,KH=function(i,r){return $H.call(i)==="[object "+r+"]"},XH=KH,YH=function(o){return Array.isArray?Array.isArray(o):XH(o,"Array")},JH=h("cDf5"),J0=h.n(JH),ZH=9007199254740991,QH="[object Arguments]",qH="[object Array]",eW="[object Boolean]",tW="[object Date]",nW="[object Error]",rW="[object Function]",aW="[object Map]",iW="[object Number]",oW="[object Object]",sW="[object RegExp]",uW="[object Set]",lW="[object String]",cW="[object WeakMap]",fW="[object ArrayBuffer]",dW="[object DataView]",hW="[object Float32Array]",vW="[object Float64Array]",pW="[object Int8Array]",gW="[object Int16Array]",mW="[object Int32Array]",yW="[object Uint8Array]",bW="[object Uint8ClampedArray]",CW="[object Uint16Array]",EW="[object Uint32Array]",Go={};Go[hW]=Go[vW]=Go[pW]=Go[gW]=Go[mW]=Go[yW]=Go[bW]=Go[CW]=Go[EW]=!0,Go[QH]=Go[qH]=Go[fW]=Go[eW]=Go[dW]=Go[tW]=Go[nW]=Go[rW]=Go[aW]=Go[iW]=Go[oW]=Go[sW]=Go[uW]=Go[lW]=Go[cW]=!1;function Tq(o){return function(i){return o(i)}}var OW=Object.prototype,wW=OW.toString;function xW(o){return AW(o)&&SW(o.length)&&!!Go[wW.call(o)]}function SW(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=ZH}function AW(o){return!!o&&J0()(o)==="object"}var Z3=xW,Q3,q3,eI,tI,q2,nI,rI,aI;function iI(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function oI(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?iI(Object(r),!0).forEach(function(n){Hn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):iI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var sI=(Q3=Object(ja.injectable)(),q3=Object(ja.inject)(st.IDENTIFIER.RenderEngine),eI=Object(ja.inject)(st.IDENTIFIER.ConfigService),Q3(tI=(q2=(aI=function(){function o(){Wi()(this,o),ko()(this,"engine",nI,this),ko()(this,"configService",rI,this),this.entity=Object(st.createEntity)(),this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return $i()(o,[{key:"init",value:function(){var r=this.configService.get(),n=r.canvas,e=r.engineOptions;this.initPromise=this.engine.init(oI({canvas:n||J3(),swapChainFormat:_r.TextureFormat.BGRA8Unorm,antialiasing:!1},e))}},{key:"setBundle",value:function(r){this.compiledBundle=JSON.parse(JSON.stringify(r))}},{key:"setDispatch",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=r),this}},{key:"setMaxIteration",value:function(r){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=r),this}},{key:"setBinding",value:function(r,n){var e=this;if(typeof r=="string"){var t=BA(n)||Z3(n)||YH(n);if(this.compiledBundle&&this.compiledBundle.context){var a=this.compiledBundle.context.defines.find(function(u){return u.name===r});if(a)return a.value=n,this;var s=this.compiledBundle.context.uniforms.find(function(u){return u.name===r});s&&(t?(s.data=n,s.isReferer=!1,s.storageClass===st.STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(r,n):this.model&&this.model.updateBuffer(r,n)):(s.isReferer=!0,s.data=n))}}else Object.keys(r).forEach(function(u){e.setBinding(u,r[u])});return this}},{key:"execute",value:function(){var i=ps()(hi.a.mark(function n(){var e=this,t,a,s=arguments;return hi.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(t=s.length>0&&s[0]!==void 0?s[0]:1,!this.dirty){l.next=6;break}return this.compiledBundle.context&&(t>1?this.compiledBundle.context.maxIteration=t:this.compiledBundle.context.maxIteration++),l.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(c){var f=c.isReferer;return f}).forEach(function(c){var f=c.data,d=c.name;e.model.confirmInput(f.model,d)}),a=0;a<t;a++)this.model.run();return this.engine.endFrame(),l.abrupt("return",this);case 12:case"end":return l.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"getOutput",value:function(){var i=ps()(hi.a.mark(function n(){return hi.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.model.readData());case 1:case"end":return t.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"compile",value:function(){var i=ps()(hi.a.mark(function n(){var e,t,a;return hi.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.initPromise;case 2:return e=oI({},this.compiledBundle.context),t=this.engine.supportWebGPU?this.engine.useWGSL?st.Target.WGSL:st.Target.GLSL450:st.Target.GLSL100,a=this.compiledBundle.shaders[t],e.defines.filter(function(l){return l.runtime}).forEach(function(l){var c="".concat(st.DefineValuePlaceholder).concat(l.name);a=a.replace(c,"".concat(l.value))}),e.shader=a,e.uniforms.forEach(function(l){if(!l.data&&l.storageClass===st.STORAGE_CLASS.StorageBuffer){var c=1;l.type===st.AST_TOKEN_TYPES.FloatArray?c=1:l.type===st.AST_TOKEN_TYPES.Vector4FloatArray&&(c=4),l.data=new Float32Array(e.output.length*c).fill(0)}}),this.compiledBundle.context=e,u.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=u.sent;case 12:case"end":return u.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()}]),o}(),aI),nI=Do()(q2.prototype,"engine",[q3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rI=Do()(q2.prototype,"configService",[eI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q2))||tI),uI,lI,cI,UA,fI,dI,hI,vI=(uI=Object(ja.injectable)(),lI=Object(ja.inject)(st.IDENTIFIER.MaterialComponentManager),uI(cI=(UA=(hI=dI=function(){function o(){Wi()(this,o),this.config=void 0,ko()(this,"material",fI,this),this.entity=void 0,this.component=void 0}return $i()(o,[{key:"getEntity",value:function(){return this.entity}},{key:"getComponent",value:function(){return this.component}},{key:"setConfig",value:function(r){this.config=r}},{key:"setEntity",value:function(r,n){this.entity=r,this.component=this.material.create(r),this.component.entity=r,this.component.type=n,this.onEntityCreated()}},{key:"onEntityCreated",value:function(){}}]),o}(),dI.BASIC="basic",hI),fI=Do()(UA.prototype,"material",[lI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UA))||cI),pI,gI,mI,yI,bI,CI,EI,bg,OI,wI,xI,SI,eC,AI,Rh=(pI=Object(ja.injectable)(),gI=Object(ja.inject)(st.IDENTIFIER.MeshComponentManager),mI=Object(ja.inject)(st.IDENTIFIER.CullableComponentManager),yI=Object(ja.inject)(st.IDENTIFIER.TransformComponentManager),bI=Object(ja.inject)(st.IDENTIFIER.Systems),CI=Object(ja.named)(st.IDENTIFIER.SceneGraphSystem),pI(EI=(bg=(AI=eC=function(){function o(){Wi()(this,o),this.attributes={},this.config=void 0,ko()(this,"mesh",OI,this),ko()(this,"cullable",wI,this),ko()(this,"transform",xI,this),ko()(this,"sceneGraphSystem",SI,this),this.meshComponent=void 0,this.transformComponent=void 0,this.entity=void 0}return $i()(o,[{key:"getEntity",value:function(){return this.entity}},{key:"getTransformComponent",value:function(){return this.transformComponent}},{key:"getMeshComponent",value:function(){return this.meshComponent}},{key:"setConfig",value:function(r){this.config=r}},{key:"setEntity",value:function(r){this.entity=r,this.cullable.create(r),this.meshComponent=this.mesh.create(r),this.transformComponent=this.transform.create(r),this.onEntityCreated()}},{key:"setMaterial",value:function(r){return this.meshComponent.material=r,this}},{key:"setGeometry",value:function(r){return this.meshComponent.geometry=r,this}},{key:"setAttributes",value:function(r){var n=this;Object.keys(r).forEach(function(e){r[e]!==void 0&&r[e]!==n.attributes[e]&&(n.onAttributeChanged({name:e,data:r[e]}),n.attributes[e]=r[e])})}},{key:"setVisible",value:function(r){var n=this;return this.meshComponent.visible=r,this.meshComponent.children.forEach(function(e){var t=n.mesh.getComponentByEntity(e);t&&(t.visible=r)}),this}},{key:"isVisible",value:function(){return this.meshComponent.visible}},{key:"attach",value:function(r){return this.sceneGraphSystem.attach(this.entity,r.entity),this}},{key:"detach",value:function(){return this.sceneGraphSystem.detach(this.entity),this}},{key:"detachChildren",value:function(){return this.sceneGraphSystem.detachChildren(this.entity),this}},{key:"onEntityCreated",value:function(){}},{key:"onAttributeChanged",value:function(r){var n=r.name,e=r.data;this.meshComponent&&this.meshComponent.material&&this.meshComponent.material.setUniform(this.convertAttributeName2UniformName(n),e)}},{key:"convertAttributeName2UniformName",value:function(r){return r}}]),o}(),eC.POINT="point",eC.LINE="line",eC.GRID="grid",AI),OI=Do()(bg.prototype,"mesh",[gI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wI=Do()(bg.prototype,"cullable",[mI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xI=Do()(bg.prototype,"transform",[yI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SI=Do()(bg.prototype,"sceneGraphSystem",[bI,CI],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bg))||EI),MW=h("fbvF"),TW=h.n(MW),PW=function(){function o(i,r){Wi()(this,o),this.attribute=void 0,this.buffer=void 0;var n=r.buffer,e=r.offset,t=r.stride,a=r.normalized,s=r.size,u=r.divisor;this.buffer=n,this.attribute={buffer:n.get(),offset:e||0,stride:t||0,normalized:a||!1,divisor:u||0},s&&(this.attribute.size=s)}return $i()(o,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),Dd,Z0,Id,fc,Q0,Nh,q0,tC,Ff,Qv,Cu,Bf,Gf,nC,kW=(Dd={},Hn()(Dd,st.gl.POINTS,"points"),Hn()(Dd,st.gl.LINES,"lines"),Hn()(Dd,st.gl.LINE_LOOP,"line loop"),Hn()(Dd,st.gl.LINE_STRIP,"line strip"),Hn()(Dd,st.gl.TRIANGLES,"triangles"),Hn()(Dd,st.gl.TRIANGLE_FAN,"triangle fan"),Hn()(Dd,st.gl.TRIANGLE_STRIP,"triangle strip"),Dd),MI=(Z0={},Hn()(Z0,st.gl.STATIC_DRAW,"static"),Hn()(Z0,st.gl.DYNAMIC_DRAW,"dynamic"),Hn()(Z0,st.gl.STREAM_DRAW,"stream"),Z0),VA=(Id={},Hn()(Id,st.gl.BYTE,"int8"),Hn()(Id,st.gl.UNSIGNED_INT,"int16"),Hn()(Id,st.gl.INT,"int32"),Hn()(Id,st.gl.UNSIGNED_BYTE,"uint8"),Hn()(Id,st.gl.UNSIGNED_SHORT,"uint16"),Hn()(Id,st.gl.UNSIGNED_INT,"uint32"),Hn()(Id,st.gl.FLOAT,"float"),Id),DW=(fc={},Hn()(fc,st.gl.ALPHA,"alpha"),Hn()(fc,st.gl.LUMINANCE,"luminance"),Hn()(fc,st.gl.LUMINANCE_ALPHA,"luminance alpha"),Hn()(fc,st.gl.RGB,"rgb"),Hn()(fc,st.gl.RGBA,"rgba"),Hn()(fc,st.gl.RGBA4,"rgba4"),Hn()(fc,st.gl.RGB5_A1,"rgb5 a1"),Hn()(fc,st.gl.RGB565,"rgb565"),Hn()(fc,st.gl.DEPTH_COMPONENT,"depth"),Hn()(fc,st.gl.DEPTH_STENCIL,"depth stencil"),fc),IW=(Q0={},Hn()(Q0,st.gl.DONT_CARE,"dont care"),Hn()(Q0,st.gl.NICEST,"nice"),Hn()(Q0,st.gl.FASTEST,"fast"),Q0),TI=(Nh={},Hn()(Nh,st.gl.NEAREST,"nearest"),Hn()(Nh,st.gl.LINEAR,"linear"),Hn()(Nh,st.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),Hn()(Nh,st.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),Hn()(Nh,st.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),Hn()(Nh,st.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Nh),PI=(q0={},Hn()(q0,st.gl.REPEAT,"repeat"),Hn()(q0,st.gl.CLAMP_TO_EDGE,"clamp"),Hn()(q0,st.gl.MIRRORED_REPEAT,"mirror"),q0),RW=(tC={},Hn()(tC,st.gl.NONE,"none"),Hn()(tC,st.gl.BROWSER_DEFAULT_WEBGL,"browser"),tC),NW=(Ff={},Hn()(Ff,st.gl.NEVER,"never"),Hn()(Ff,st.gl.ALWAYS,"always"),Hn()(Ff,st.gl.LESS,"less"),Hn()(Ff,st.gl.LEQUAL,"lequal"),Hn()(Ff,st.gl.GREATER,"greater"),Hn()(Ff,st.gl.GEQUAL,"gequal"),Hn()(Ff,st.gl.EQUAL,"equal"),Hn()(Ff,st.gl.NOTEQUAL,"notequal"),Ff),kI=(Qv={},Hn()(Qv,st.gl.FUNC_ADD,"add"),Hn()(Qv,st.gl.MIN_EXT,"min"),Hn()(Qv,st.gl.MAX_EXT,"max"),Hn()(Qv,st.gl.FUNC_SUBTRACT,"subtract"),Hn()(Qv,st.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Qv),rC=(Cu={},Hn()(Cu,st.gl.ZERO,"zero"),Hn()(Cu,st.gl.ONE,"one"),Hn()(Cu,st.gl.SRC_COLOR,"src color"),Hn()(Cu,st.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),Hn()(Cu,st.gl.SRC_ALPHA,"src alpha"),Hn()(Cu,st.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),Hn()(Cu,st.gl.DST_COLOR,"dst color"),Hn()(Cu,st.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),Hn()(Cu,st.gl.DST_ALPHA,"dst alpha"),Hn()(Cu,st.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),Hn()(Cu,st.gl.CONSTANT_COLOR,"constant color"),Hn()(Cu,st.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),Hn()(Cu,st.gl.CONSTANT_ALPHA,"constant alpha"),Hn()(Cu,st.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),Hn()(Cu,st.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),Cu),jW=(Bf={},Hn()(Bf,st.gl.NEVER,"never"),Hn()(Bf,st.gl.ALWAYS,"always"),Hn()(Bf,st.gl.LESS,"less"),Hn()(Bf,st.gl.LEQUAL,"lequal"),Hn()(Bf,st.gl.GREATER,"greater"),Hn()(Bf,st.gl.GEQUAL,"gequal"),Hn()(Bf,st.gl.EQUAL,"equal"),Hn()(Bf,st.gl.NOTEQUAL,"notequal"),Bf),Cg=(Gf={},Hn()(Gf,st.gl.ZERO,"zero"),Hn()(Gf,st.gl.KEEP,"keep"),Hn()(Gf,st.gl.REPLACE,"replace"),Hn()(Gf,st.gl.INVERT,"invert"),Hn()(Gf,st.gl.INCR,"increment"),Hn()(Gf,st.gl.DECR,"decrement"),Hn()(Gf,st.gl.INCR_WRAP,"increment wrap"),Hn()(Gf,st.gl.DECR_WRAP,"decrement wrap"),Gf),LW=(nC={},Hn()(nC,st.gl.FRONT,"front"),Hn()(nC,st.gl.BACK,"back"),nC),_W=function(){function o(i,r){Wi()(this,o),this.buffer=void 0;var n=r.data,e=r.usage,t=r.type;this.buffer=i.buffer({data:n,usage:MI[e||st.gl.STATIC_DRAW],type:VA[t||st.gl.UNSIGNED_BYTE]})}return $i()(o,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(r){var n=r.data,e=r.offset;this.buffer.subdata(n,e)}}]),o}(),FW=h("RIqP"),xs=h.n(FW),BW=9007199254740991,GW="[object Arguments]",zW="[object Array]",UW="[object Boolean]",VW="[object Date]",HW="[object Error]",WW="[object Function]",$W="[object Map]",KW="[object Number]",XW="[object Object]",YW="[object RegExp]",JW="[object Set]",ZW="[object String]",QW="[object WeakMap]",qW="[object ArrayBuffer]",e$="[object DataView]",t$="[object Float32Array]",n$="[object Float64Array]",r$="[object Int8Array]",a$="[object Int16Array]",i$="[object Int32Array]",o$="[object Uint8Array]",s$="[object Uint8ClampedArray]",u$="[object Uint16Array]",l$="[object Uint32Array]",zo={};zo[t$]=zo[n$]=zo[r$]=zo[a$]=zo[i$]=zo[o$]=zo[s$]=zo[u$]=zo[l$]=!0,zo[GW]=zo[zW]=zo[qW]=zo[UW]=zo[e$]=zo[VW]=zo[HW]=zo[WW]=zo[$W]=zo[KW]=zo[XW]=zo[YW]=zo[JW]=zo[ZW]=zo[QW]=!1;function Pq(o){return function(i){return o(i)}}var c$=Object.prototype,f$=c$.toString;function d$(o){return v$(o)&&h$(o.length)&&!!zo[f$.call(o)]}function h$(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=BW}function v$(o){return!!o&&J0()(o)==="object"}var HA=d$;function DI(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function II(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?DI(Object(r),!0).forEach(function(n){Hn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):DI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var p$=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,RI=0,aC=!1,g$=function(){function o(i,r){var n=this;Wi()(this,o),this.reGl=i,this.context=r,this.entity=Object(st.createEntity)(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var e={};this.context.uniforms.forEach(function(l){var c=l.name,f=l.type,d=l.data,v=l.isReferer,m=l.storageClass;if(m===st.STORAGE_CLASS.StorageBuffer){if(v)n.textureCache[c]={data:void 0},e["".concat(c,"Size")]=function(){return d.compiledBundle.context.output.textureSize};else{n.textureCache[c]=n.calcDataTexture(c,f,d);var y=n.textureCache[c],C=y.textureWidth,O=y.isOutput;e["".concat(c,"Size")]=[C,C],O&&(n.outputTextureName=c,n.context.needPingpong&&(n.outputTextureName="".concat(c,"Output"),n.textureCache[n.outputTextureName]=n.calcDataTexture(c,f,d)))}e[c]=function(){return aC&&console.log("[".concat(n.entity,"]: ").concat(c," ").concat(n.textureCache[c].id)),n.textureCache[c].texture}}else if(m===st.STORAGE_CLASS.Uniform){if(d&&(Array.isArray(d)||HA(d))&&d.length>16)throw new Error("invalid data type ".concat(f));e[c]=function(){return l.data}}});var t=this.getOuputDataTexture(),a=t.textureWidth,s=t.texelCount;e.u_OutputTextureSize=[a,a],e.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var u={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:e,vert:p$,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(u)}return $i()(o,[{key:"run",value:function(){var r=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){r.computeCommand()}),aC&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var i=ps()(hi.a.mark(function n(){var e=this,t,a,s,u,l,c,f,d;return hi.a.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){t=e.reGl.read()}),!t){m.next=6;break}if(a=this.getOuputDataTexture(),s=a.originalDataLength,u=a.elementsPerTexel,l=a.typedArrayConstructor,c=l===void 0?Float32Array:l,f=[],u!==4)for(d=0;d<t.length;d+=4)u===1?f.push(t[d]):u===2?f.push(t[d],t[d+1]):f.push(t[d],t[d+1],t[d+2]);else f=t;return m.abrupt("return",new c(f.slice(0,s)));case 6:return m.abrupt("return",new Float32Array);case 7:case"end":return m.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"confirmInput",value:function(r,n){var e;this.entity===r.entity?(this.dynamicPingpong=!0,e=this):e=r,this.textureCache[n].id=e.getOuputDataTexture().id,this.textureCache[n].texture=e.getOuputDataTexture().texture,aC&&console.log("[".concat(this.entity,"]: confirm input ").concat(n," from model ").concat(e.entity,", ").concat(e.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=this.context.uniforms.find(function(l){var c=l.name;return c===r});if(t){var a=this.calcDataTexture(r,t.type,n),s=a.texture,u=a.data;this.textureCache[r].data=u,this.textureCache[r].texture=s}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var r=this.context.output.name;this.textureCache[r].id=this.getOuputDataTexture().id,this.textureCache[r].texture=this.getOuputDataTexture().texture}var n=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=n,aC&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var r=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=r}},{key:"cloneDataTexture",value:function(r){var n=r.data,e=r.textureWidth;return II(II({},r),{},{id:RI++,texture:this.reGl.texture({width:e,height:e,data:n,type:"float"})})}},{key:"calcDataTexture",value:function(r,n,e){var t=1;n===st.AST_TOKEN_TYPES.Vector4FloatArray&&(t=4);for(var a=[],s=0;s<e.length;s+=t)t===1?a.push(e[s],0,0,0):t===2?a.push(e[s],e[s+1],0,0):t===3?a.push(e[s],e[s+1],e[s+2],0):t===4&&a.push(e[s],e[s+1],e[s+2],e[s+3]);var u=e.length,l=Math.ceil(u/t),c=Math.ceil(Math.sqrt(l)),f=c*c;l<f&&a.push.apply(a,xs()(new Array((f-l)*4).fill(0)));var d=this.reGl.texture({width:c,height:c,data:a,type:"float"});return{id:RI++,data:a,originalDataLength:u,typedArrayConstructor:HA(e)?e.constructor:void 0,textureWidth:c,texture:d,texelCount:l,elementsPerTexel:t,isOutput:r===this.context.output.name}}}]),o}(),m$=function(){function o(i,r){Wi()(this,o),this.elements=void 0;var n=r.data,e=r.usage,t=r.type,a=r.count;this.elements=i.elements({data:n,usage:MI[e||st.gl.STATIC_DRAW],type:VA[t||st.gl.UNSIGNED_BYTE],count:a})}return $i()(o,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(r){var n=r.data;this.elements.subdata(n)}},{key:"destroy",value:function(){this.elements.destroy()}}]),o}(),y$=function(){function o(i,r){Wi()(this,o),this.framebuffer=void 0;var n=r.width,e=r.height,t=r.color,a=r.colors,s=r.depth,u=r.stencil,l={width:n,height:e};Array.isArray(a)&&(l.colors=a.map(function(c){return c.get()})),t&&typeof t!="boolean"&&(l.color=t.get()),this.framebuffer=i.framebuffer(l)}return $i()(o,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(r){var n=r.width,e=r.height;this.framebuffer.resize(n,e)}}]),o}();function b$(o){var i=J0()(o);return o!=null&&(i==="object"||i==="function")}function ey(o){var i={};return Object.keys(o).forEach(function(r){WA(r,o[r],i,"")}),i}function WA(o,i,r,n){if(i===null||typeof i=="number"||typeof i=="boolean"||Array.isArray(i)&&typeof i[0]=="number"||HA(i)||i===""||i.resize!==void 0){r["".concat(n&&n+".").concat(o)]=i;return}b$(i)&&Object.keys(i).forEach(function(e){WA(e,i[e],r,"".concat(n&&n+".").concat(o))}),Array.isArray(i)&&i.forEach(function(e,t){Object.keys(e).forEach(function(a){WA(a,e[a],r,"".concat(n&&n+".").concat(o,"[").concat(t,"]"))})})}function NI(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function Eg(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?NI(Object(r),!0).forEach(function(n){Hn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):NI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var C$=function(){function o(i,r){Wi()(this,o),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=i;var n=r.vs,e=r.fs,t=r.defines,a=r.attributes,s=r.uniforms,u=r.primitive,l=r.count,c=r.elements,f=r.depth,d=r.blend,v=r.stencil,m=r.cull,y=r.instances,C=r.scissor,O=r.viewport,x={};s&&(this.uniforms=ey(s),Object.keys(s).forEach(function(z){x[z]=i.prop(z)}));var T={};Object.keys(a).forEach(function(z){T[z]=a[z].get()});var L=t&&this.generateDefines(t)||"",_={attributes:T,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(L,`
`).concat(e),uniforms:x,vert:`
`.concat(L,`
`).concat(n),primitive:kW[u===void 0?st.gl.TRIANGLES:u]};y&&(_.instances=y),l&&(_.count=l),c&&(_.elements=c.get()),C&&(_.scissor=C),O&&(_.viewport=O),this.initDepthDrawParams({depth:f},_),this.initBlendDrawParams({blend:d},_),this.initStencilDrawParams({stencil:v},_),this.initCullDrawParams({cull:m},_),this.drawCommand=i(_)}return $i()(o,[{key:"addUniforms",value:function(r){this.uniforms=Eg(Eg({},this.uniforms),ey(r))}},{key:"draw",value:function(r){var n=Eg(Eg({},this.uniforms),ey(r.uniforms||{})),e={};Object.keys(n).forEach(function(t){var a=J0()(n[t]);a==="boolean"||a==="number"||Array.isArray(n[t])||n[t].BYTES_PER_ELEMENT?e[t]=n[t]:a==="string"||(e[t]=n[t].get())}),this.drawCommand(e)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(r,n){var e=r.depth;e&&(n.depth={enable:e.enable===void 0?!0:!!e.enable,mask:e.mask===void 0?!0:!!e.mask,func:NW[e.func||st.gl.LESS],range:e.range||[0,1]})}},{key:"initBlendDrawParams",value:function(r,n){var e=r.blend;if(e){var t=e.enable,a=e.func,s=e.equation,u=e.color,l=u===void 0?[0,0,0,0]:u;n.blend={enable:!!t,func:{srcRGB:rC[a&&a.srcRGB||st.gl.SRC_ALPHA],srcAlpha:rC[a&&a.srcAlpha||st.gl.SRC_ALPHA],dstRGB:rC[a&&a.dstRGB||st.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:rC[a&&a.dstAlpha||st.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:kI[s&&s.rgb||st.gl.FUNC_ADD],alpha:kI[s&&s.alpha||st.gl.FUNC_ADD]},color:l}}}},{key:"initStencilDrawParams",value:function(r,n){var e=r.stencil;if(e){var t=e.enable,a=e.mask,s=a===void 0?-1:a,u=e.func,l=u===void 0?{cmp:st.gl.ALWAYS,ref:0,mask:-1}:u,c=e.opFront,f=c===void 0?{fail:st.gl.KEEP,zfail:st.gl.KEEP,zpass:st.gl.KEEP}:c,d=e.opBack,v=d===void 0?{fail:st.gl.KEEP,zfail:st.gl.KEEP,zpass:st.gl.KEEP}:d;n.stencil={enable:!!t,mask:s,func:Eg(Eg({},l),{},{cmp:jW[l.cmp]}),opFront:{fail:Cg[f.fail],zfail:Cg[f.zfail],zpass:Cg[f.zpass]},opBack:{fail:Cg[v.fail],zfail:Cg[v.zfail],zpass:Cg[v.zpass]}}}}},{key:"initCullDrawParams",value:function(r,n){var e=r.cull;if(e){var t=e.enable,a=e.face,s=a===void 0?st.gl.BACK:a;n.cull={enable:!!t,face:LW[s]}}}},{key:"generateDefines",value:function(r){return Object.keys(r).map(function(n){return"#define ".concat(n," ").concat(Number(r[n]))}).join(`
`)}}]),o}(),E$=function(){function o(i,r){Wi()(this,o),this.texture=void 0,this.width=void 0,this.height=void 0;var n=r.data,e=r.type,t=e===void 0?st.gl.UNSIGNED_BYTE:e,a=r.width,s=r.height,u=r.flipY,l=u===void 0?!1:u,c=r.format,f=c===void 0?st.gl.RGBA:c,d=r.mipmap,v=d===void 0?!1:d,m=r.wrapS,y=m===void 0?st.gl.CLAMP_TO_EDGE:m,C=r.wrapT,O=C===void 0?st.gl.CLAMP_TO_EDGE:C,x=r.aniso,T=x===void 0?0:x,L=r.alignment,_=L===void 0?1:L,z=r.premultiplyAlpha,Q=z===void 0?!1:z,q=r.mag,ye=q===void 0?st.gl.NEAREST:q,Ce=r.min,Ae=Ce===void 0?st.gl.NEAREST:Ce,Pe=r.colorSpace,qe=Pe===void 0?st.gl.BROWSER_DEFAULT_WEBGL:Pe;this.width=a,this.height=s;var lt={width:a,height:s,type:VA[t],format:DW[f],wrapS:PI[y],wrapT:PI[O],mag:TI[ye],min:TI[Ae],alignment:_,flipY:l,colorSpace:RW[qe],premultiplyAlpha:Q,aniso:T};n&&(lt.data=n),typeof v=="number"?lt.mipmap=IW[v]:typeof v=="boolean"&&(lt.mipmap=v),this.texture=i.texture(lt)}return $i()(o,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(r){var n=r.width,e=r.height;this.texture.resize(n,e),this.width=n,this.height=e}},{key:"destroy",value:function(){this.texture.destroy()}}]),o}(),jI,LI,_I,O$=(jI=Object(ja.injectable)(),jI(LI=(_I=function(){function o(){var i=this;Wi()(this,o),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var r=ps()(hi.a.mark(function n(e){return hi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.uniforms){a.next=3;break}return a.next=3,Promise.all(Object.keys(e.uniforms).map(function(){var s=ps()(hi.a.mark(function u(l){var c;return hi.a.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!(e.uniforms[l]&&e.uniforms[l].load!==void 0)){d.next=5;break}return d.next=3,e.uniforms[l].load();case 3:c=d.sent,e.uniforms[l]=c;case 5:case"end":return d.stop()}},u)}));return function(u){return s.apply(this,arguments)}}()));case 3:return a.abrupt("return",new C$(i.gl,e));case 4:case"end":return a.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new PW(i.gl,r)},this.createBuffer=function(r){return new _W(i.gl,r)},this.createElements=function(r){return new m$(i.gl,r)},this.createTexture2D=function(r){return new E$(i.gl,r)},this.createFramebuffer=function(r){return new y$(i.gl,r)},this.useFramebuffer=function(r,n){i.gl({framebuffer:r?r.get():null})(n)},this.createComputeModel=function(){var r=ps()(hi.a.mark(function n(e){return hi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new g$(i.gl,e));case 1:case"end":return a.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.clear=function(r){var n=r.color,e=r.depth,t=r.stencil,a=r.framebuffer,s=a===void 0?null:a,u={color:n,depth:e,stencil:t};u.framebuffer=s===null?s:s.get(),i.gl.clear(u)},this.setScissor=function(r){i.gl&&i.gl._gl&&(r.enable&&r.box?(i.gl._gl.enable(st.gl.SCISSOR_TEST),i.gl._gl.scissor(r.box.x,r.box.y,r.box.width,r.box.height)):i.gl._gl.disable(st.gl.SCISSOR_TEST),i.gl._refresh())},this.viewport=function(r){var n=r.x,e=r.y,t=r.width,a=r.height;i.gl&&i.gl._gl&&(i.gl._gl.viewport(n,e,t,a),i.gl._refresh())},this.readPixels=function(r){var n=r.framebuffer,e=r.x,t=r.y,a=r.width,s=r.height,u={x:e,y:t,width:a,height:s};return n&&(u.framebuffer=n.get()),i.gl.read(u)},this.getCanvas=function(){return i.$canvas},this.getGLContext=function(){return i.gl._gl},this.destroy=function(){i.gl&&(i.gl.destroy(),i.inited=!1)}}return $i()(o,[{key:"init",value:function(){var i=ps()(hi.a.mark(function n(e){return hi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.inited){a.next=2;break}return a.abrupt("return");case 2:return this.$canvas=e.canvas,a.next=5,new Promise(function(s,u){TW()({canvas:e.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(c,f){(c||!f)&&u(c),s(f)}})});case 5:this.gl=a.sent,this.inited=!0;case 7:case"end":return a.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),o}(),_I))||LI);function w$(){return typeof window!="undefined"}function x$(o,i,r,n){if(!!w$()){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src",o),n&&(t.id=n),t.onload=function(){i&&i()},t.onerror=function(a){r&&r("Unable to load script '".concat(o,"'"),a)},e.appendChild(t)}}function S$(o,i){return new Promise(function(r,n){x$(o,function(){r()},function(e,t){n(t)})})}var iC,A$=function(){return $A.apply(this,arguments)};function $A(){return $A=ps()(hi.a.mark(function o(){return hi.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!iC){r.next=2;break}return r.abrupt("return",iC);case 2:return r.next=4,S$("https://preview.babylonjs.com/glslang/glslang.js");case 4:return iC=window.glslang("https://preview.babylonjs.com/glslang/glslang.wasm"),r.abrupt("return",iC);case 6:case"end":return r.stop()}},o)})),$A.apply(this,arguments)}var M$=function(){function o(i,r){Wi()(this,o),this.engine=i,this.options=r,this.attribute=void 0,this.buffer=void 0;var n=r,e=n.buffer,t=n.offset,a=n.stride,s=n.normalized,u=n.size,l=n.divisor,c=n.arrayStride,f=n.attributes,d=n.stepMode;this.buffer=e,this.attribute={buffer:e.get(),offset:t||0,stride:a||0,normalized:s||!1,divisor:l||0,arrayStride:c||0,attributes:f,stepMode:d||"vertex"},u&&(this.attribute.size=u)}return $i()(o,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),Og=function(){function o(i,r){Wi()(this,o),this.engine=i,this.options=r,this.buffer=void 0;var n=r,e=n.data,t=n.usage,a=n.type;this.buffer=this.createBuffer(e instanceof Array?new Float32Array(e):e,t||_r.BufferUsage.Vertex|_r.BufferUsage.CopyDst)}return $i()(o,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(r){var n=r.data,e=r.offset;this.setSubData(this.buffer,e,n instanceof Array?new Float32Array(n):n)}},{key:"createBuffer",value:function(r,n){var e=r.byteLength%4,t={size:r.byteLength+e,usage:n},a=this.engine.device.createBuffer(t);return this.setSubData(a,0,r),a}},{key:"setSubData",value:function(r,n,e){var t=st.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue;t.writeBuffer(r,n,e)}}]),o}();function T$(o){return typeof o=="number"}var P$=function(){function o(i,r){Wi()(this,o),this.engine=i,this.context=r,this.entity=Object(st.createEntity)(),this.uniformGPUBufferLayout=[],this.uniformBuffer=void 0,this.vertexBuffers={},this.outputBuffer=void 0,this.bindGroupEntries=void 0,this.bindGroup=void 0,this.computePipeline=void 0}return $i()(o,[{key:"init",value:function(){var i=ps()(hi.a.mark(function n(){var e=this,t,a,s,u,l,c,f;return hi.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.compileComputePipelineStageDescriptor(this.context.shader);case 2:t=v.sent,a=t.computeStage,s=this.context.uniforms.filter(function(m){return m.storageClass===st.STORAGE_CLASS.StorageBuffer}),u=this.context.uniforms.filter(function(m){return m.storageClass===st.STORAGE_CLASS.Uniform}),l=u.length?1:0,this.bindGroupEntries=[],l&&(c=0,f=[],u.forEach(function(m){if(T$(m.data))e.uniformGPUBufferLayout.push({name:m.name,offset:c}),c+=4,f.push(m.data);else{var y,C=((y=m.data)===null||y===void 0?void 0:y.length)||1;C===3&&(C=4,m.data.push(0));var O=c/4%4;if(O>0){var x=4-O;if(C>1&&C<=x)C===2&&(x===3&&(c+=4,f.push(0)),f.push.apply(f,xs()(m.data)),e.uniformGPUBufferLayout.push({name:m.name,offset:c}));else{for(var T=0;T<x;T++)c+=4,f.push(0);f.push.apply(f,xs()(m.data)),e.uniformGPUBufferLayout.push({name:m.name,offset:c})}}c+=4*C}}),this.uniformBuffer=new Og(this.engine,{data:f instanceof Array?new Float32Array(f):f,usage:_r.BufferUsage.Uniform|_r.BufferUsage.CopyDst}),this.bindGroupEntries.push({binding:0,resource:{buffer:this.uniformBuffer.get()}})),s.forEach(function(m){if(m.data!==null&&(m.type===st.AST_TOKEN_TYPES.Vector4FloatArray||m.type===st.AST_TOKEN_TYPES.FloatArray)){var y;m.name===e.context.output.name?(y=new Og(e.engine,{data:isFinite(Number(m.data))?[m.data]:m.data,usage:_r.BufferUsage.Storage|_r.BufferUsage.CopyDst|_r.BufferUsage.CopySrc}),e.outputBuffer=y,e.context.output={name:m.name,length:isFinite(Number(m.data))?1:m.data.length,typedArrayConstructor:Float32Array,gpuBuffer:y.get()}):m.isReferer?m.data.model&&m.data.model.outputBuffer&&(y=m.data.model.outputBuffer):y=new Og(e.engine,{data:isFinite(Number(m.data))?[m.data]:m.data,usage:_r.BufferUsage.Storage|_r.BufferUsage.CopyDst|_r.BufferUsage.CopySrc}),e.vertexBuffers[m.name]=y,e.bindGroupEntries.push({binding:l,resource:{name:m.name,refer:y?void 0:m.data,buffer:y?y.get():void 0}}),l++}}),this.computePipeline=this.engine.device.createComputePipeline({computeStage:a}),console.log(this.bindGroupEntries),this.bindGroup=this.engine.device.createBindGroup({layout:this.computePipeline.getBindGroupLayout(0),entries:this.bindGroupEntries});case 13:case"end":return v.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"destroy",value:function(){var r=this;this.uniformBuffer&&this.uniformBuffer.destroy(),Object.keys(this.vertexBuffers).forEach(function(n){return r.vertexBuffers[n].destroy()})}},{key:"readData",value:function(){var i=ps()(hi.a.mark(function n(){var e,t,a,s,u,l,c,f,d,v;return hi.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(e=this.context.output,!e){y.next=16;break}if(t=e.length,a=e.typedArrayConstructor,s=e.gpuBuffer,!s){y.next=16;break}return u=t*a.BYTES_PER_ELEMENT,l=this.engine.device.createBuffer({size:u,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),c=this.engine.device.createCommandEncoder(),c.copyBufferToBuffer(s,0,l,0,u),f=st.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue,f.submit([c.finish()]),y.next=12,l.mapAsync(_r.MapMode.Read);case 12:return d=l.getMappedRange(),v=new a(d.slice(0)),l.unmap(),y.abrupt("return",v);case 16:return y.abrupt("return",new Float32Array);case 17:case"end":return y.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"run",value:function(){if(this.engine.currentComputePass){var r;this.engine.currentComputePass.setPipeline(this.computePipeline),this.engine.currentComputePass.setBindGroup(0,this.bindGroup),(r=this.engine.currentComputePass).dispatch.apply(r,xs()(this.context.dispatch))}}},{key:"updateBuffer",value:function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,t=this.vertexBuffers[r];t&&t.subData({data:n,offset:e})}},{key:"updateUniform",value:function(r,n){var e=this.uniformGPUBufferLayout.find(function(t){return t.name===r});e&&this.uniformBuffer.subData({data:Number.isFinite(n)?new Float32Array([n]):new Float32Array(n),offset:e.offset})}},{key:"confirmInput",value:function(r,n){var e=this.vertexBuffers[n],t=r.outputBuffer;if(e&&t&&e!==t){var a=this.engine.device.createCommandEncoder(),s=r.context.output,u=s.length,l=s.typedArrayConstructor,c=u*l.BYTES_PER_ELEMENT;a.copyBufferToBuffer(t.get(),0,e.get(),0,c);var f=st.isSafari?this.engine.device.getQueue():this.engine.device.defaultQueue;f.submit([a.finish()])}}},{key:"compileShaderToSpirV",value:function(r,n,e){return this.compileRawShaderToSpirV(e+r,n)}},{key:"compileRawShaderToSpirV",value:function(r,n){return this.engine.glslang.compileGLSL(r,n)}},{key:"compileComputePipelineStageDescriptor",value:function(){var i=ps()(hi.a.mark(function n(e){var t,a;return hi.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(t=e,a=`#version 450
`,this.engine.options.useWGSL){u.next=6;break}return u.next=5,this.compileShaderToSpirV(e,"compute",a);case 5:t=u.sent;case 6:return u.abrupt("return",{computeStage:{module:this.engine.device.createShaderModule({code:t,isWHLSL:st.isSafari}),entryPoint:"main"}});case 7:case"end":return u.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()}]),o}(),k$=function(){function o(i,r){Wi()(this,o),this.engine=i,this.options=r,this.indexCount=void 0,this.buffer=void 0;var n=r,e=n.data,t=n.usage,a=n.type,s=n.count;this.indexCount=s||0,this.buffer=new Og(i,{data:e instanceof Array?new Uint16Array(e):e,usage:_r.BufferUsage.Index|_r.BufferUsage.CopyDst})}return $i()(o,[{key:"get",value:function(){return this.buffer}},{key:"subData",value:function(r){this.buffer.subData(r)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),o}(),D$=function(){function o(i,r){Wi()(this,o),this.engine=i,this.options=r,this.colorTexture=void 0,this.depthTexture=void 0,this.width=0,this.height=0;var n=r,e=n.width,t=n.height,a=n.color,s=n.colors,u=n.depth,l=n.stencil;a&&(this.colorTexture=a),u&&(this.depthTexture=u)}return $i()(o,[{key:"get",value:function(){var r,n;return{color:(r=this.colorTexture)===null||r===void 0?void 0:r.get(),depth:(n=this.depthTexture)===null||n===void 0?void 0:n.get()}}},{key:"destroy",value:function(){var r,n;(r=this.colorTexture)===null||r===void 0||r.destroy(),(n=this.depthTexture)===null||n===void 0||n.destroy()}},{key:"resize",value:function(r){var n=r.width,e=r.height;if(n!==this.width||e!==this.height){var t,a;(t=this.colorTexture)===null||t===void 0||t.resize({width:n,height:e}),(a=this.depthTexture)===null||a===void 0||a.resize({width:n,height:e})}this.width=n,this.height=e}}]),o}(),Rd,zf,qv,Zu,wg,oC,ty,I$=(Rd={},Hn()(Rd,st.gl.POINTS,_r.PrimitiveTopology.PointList),Hn()(Rd,st.gl.LINES,_r.PrimitiveTopology.LineList),Hn()(Rd,st.gl.LINE_LOOP,_r.PrimitiveTopology.LineList),Hn()(Rd,st.gl.LINE_STRIP,_r.PrimitiveTopology.LineStrip),Hn()(Rd,st.gl.TRIANGLES,_r.PrimitiveTopology.TriangleList),Hn()(Rd,st.gl.TRIANGLE_FAN,_r.PrimitiveTopology.TriangleList),Hn()(Rd,st.gl.TRIANGLE_STRIP,_r.PrimitiveTopology.TriangleStrip),Rd),R$=(zf={},Hn()(zf,st.gl.NEVER,_r.CompareFunction.Never),Hn()(zf,st.gl.ALWAYS,_r.CompareFunction.Always),Hn()(zf,st.gl.LESS,_r.CompareFunction.Less),Hn()(zf,st.gl.LEQUAL,_r.CompareFunction.LessEqual),Hn()(zf,st.gl.GREATER,_r.CompareFunction.Greater),Hn()(zf,st.gl.GEQUAL,_r.CompareFunction.GreaterEqual),Hn()(zf,st.gl.EQUAL,_r.CompareFunction.Equal),Hn()(zf,st.gl.NOTEQUAL,_r.CompareFunction.NotEqual),zf),FI=(qv={},Hn()(qv,st.gl.FUNC_ADD,_r.BlendOperation.Add),Hn()(qv,st.gl.MIN_EXT,_r.BlendOperation.Min),Hn()(qv,st.gl.MAX_EXT,_r.BlendOperation.Max),Hn()(qv,st.gl.FUNC_SUBTRACT,_r.BlendOperation.Subtract),Hn()(qv,st.gl.FUNC_REVERSE_SUBTRACT,_r.BlendOperation.ReverseSubtract),qv),sC=(Zu={},Hn()(Zu,st.gl.ZERO,_r.BlendFactor.Zero),Hn()(Zu,st.gl.ONE,_r.BlendFactor.One),Hn()(Zu,st.gl.SRC_COLOR,_r.BlendFactor.SrcColor),Hn()(Zu,st.gl.ONE_MINUS_SRC_COLOR,_r.BlendFactor.OneMinusSrcColor),Hn()(Zu,st.gl.SRC_ALPHA,_r.BlendFactor.SrcAlpha),Hn()(Zu,st.gl.ONE_MINUS_SRC_ALPHA,_r.BlendFactor.OneMinusSrcAlpha),Hn()(Zu,st.gl.DST_COLOR,_r.BlendFactor.DstColor),Hn()(Zu,st.gl.ONE_MINUS_DST_COLOR,_r.BlendFactor.OneMinusDstColor),Hn()(Zu,st.gl.DST_ALPHA,_r.BlendFactor.DstAlpha),Hn()(Zu,st.gl.ONE_MINUS_DST_ALPHA,_r.BlendFactor.OneMinusDstAlpha),Hn()(Zu,st.gl.CONSTANT_COLOR,_r.BlendFactor.BlendColor),Hn()(Zu,st.gl.ONE_MINUS_CONSTANT_COLOR,_r.BlendFactor.OneMinusBlendColor),Hn()(Zu,st.gl.SRC_ALPHA_SATURATE,_r.BlendFactor.SrcAlphaSaturated),Zu),N$=(wg={},Hn()(wg,st.gl.ALPHA,"r8unorm"),Hn()(wg,st.gl.RGBA,"rgba8unorm"),Hn()(wg,st.gl.DEPTH_COMPONENT,"depth32float"),Hn()(wg,st.gl.DEPTH_STENCIL,"depth24plus-stencil8"),wg),BI=(oC={},Hn()(oC,st.gl.NEAREST,"nearest"),Hn()(oC,st.gl.LINEAR,"linear"),oC),KA=(ty={},Hn()(ty,st.gl.REPEAT,"repeat"),Hn()(ty,st.gl.CLAMP_TO_EDGE,"clamp-to-edge"),Hn()(ty,st.gl.MIRRORED_REPEAT,"mirror-repeat"),ty);function j$(o){var i=o.cull;if(!i||!i.enable)return _r.CullMode.None;if(i.face)return i.face===st.gl.FRONT?_r.CullMode.Front:_r.CullMode.Back}function L$(o){var i=o.depth,r=o.stencil,n={compare:_r.CompareFunction.Always,depthFailOp:_r.StencilOperation.Keep,failOp:_r.StencilOperation.Keep,passOp:_r.StencilOperation.Keep};return{depthWriteEnabled:i&&i.enable,depthCompare:R$[(i==null?void 0:i.func)||st.gl.ALWAYS],format:_r.TextureFormat.Depth24PlusStencil8,stencilFront:n,stencilBack:n,stencilReadMask:4294967295,stencilWriteMask:4294967295}}function _$(o,i){var r=o.blend;return[{format:i,alphaBlend:{srcFactor:sC[r&&r.func&&r.func.srcAlpha||st.gl.ONE],dstFactor:sC[r&&r.func&&r.func.dstAlpha||st.gl.ZERO],operation:FI[r&&r.equation&&r.equation.alpha||st.gl.FUNC_ADD]},colorBlend:{srcFactor:sC[r&&r.func&&r.func.srcRGB||st.gl.ONE],dstFactor:sC[r&&r.func&&r.func.dstRGB||st.gl.ZERO],operation:FI[r&&r.equation&&r.equation.rgb||st.gl.FUNC_ADD]},writeMask:_r.ColorWrite.All}]}function GI(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function xg(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?GI(Object(r),!0).forEach(function(n){Hn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}function F$(o){for(var i=0,r=arguments.length,n=new Array(r>1?r-1:0),e=1;e<r;e++)n[e-1]=arguments[e];for(var t=0,a=n;t<a.length;t++){var s=a[t];i+=s.length}for(var u=new o(i),l=0,c=0,f=n;c<f.length;c++){var d=f[c];u.set(d,l),l+=d.length}return u}var B$=function(){function o(i,r){Wi()(this,o),this.engine=i,this.options=r,this.pipelineLayout=void 0,this.renderPipeline=void 0,this.uniformsBindGroupLayout=void 0,this.uniformBindGroup=void 0,this.uniformBuffer=void 0,this.uniforms={},this.uniformGPUBufferLayout=[],this.attributeCache={},this.indexBuffer=void 0,this.indexCount=void 0}return $i()(o,[{key:"init",value:function(){var i=ps()(hi.a.mark(function n(){var e=this,t,a,s,u,l,c,f,d,v,m,y,C,O,x,T,L,_,z;return hi.a.wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return t=this.options,a=t.vs,s=t.fs,u=t.attributes,l=t.uniforms,c=t.primitive,f=t.count,d=t.elements,v=t.depth,m=t.blend,y=t.stencil,C=t.cull,O=t.instances,q.next=3,this.compilePipelineStageDescriptor(a,s,null);case 3:x=q.sent,T=x.vertexStage,L=x.fragmentStage,l&&this.buildUniformBindGroup(l),d&&(this.indexBuffer=d.get(),this.indexCount=d.indexCount),_={vertexBuffers:Object.keys(u).map(function(ye,Ce){var Ae=u[ye],Pe=Ae.get(),qe=Pe.arrayStride,lt=Pe.stepMode,ze=Pe.attributes;return e.attributeCache[ye]=Ae,{arrayStride:qe,stepMode:lt,attributes:ze}})},z={sampleCount:this.engine.mainPassSampleCount,primitiveTopology:I$[c||st.gl.TRIANGLES],rasterizationState:xg(xg({},this.getDefaultRasterizationStateDescriptor()),{},{cullMode:j$({cull:C})}),depthStencilState:L$({depth:v,stencil:y}),colorStates:_$({blend:m},this.engine.options.swapChainFormat),layout:this.pipelineLayout,vertexStage:T,fragmentStage:L,vertexState:_},this.renderPipeline=this.engine.device.createRenderPipeline(z);case 11:case"end":return q.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"addUniforms",value:function(r){this.uniforms=xg(xg({},this.uniforms),ey(r))}},{key:"draw",value:function(r){var n=this,e=this.engine.getCurrentRenderPass(),t=xg(xg({},this.uniforms),ey(r.uniforms||{})),a=[];Object.keys(t).forEach(function(s){var u=J0()(t[s]);if(u==="boolean"||u==="number"||Array.isArray(t[s])||t[s].BYTES_PER_ELEMENT){var l,c=(l=n.uniformGPUBufferLayout.find(function(O){var x=O.name;return x===s}))===null||l===void 0?void 0:l.offset;c!==null&&n.uniformBuffer.subData({data:t[s],offset:c})}else{var f,d=(f=n.uniformGPUBufferLayout.find(function(O){var x=O.name;return x===s}))===null||f===void 0?void 0:f.offset;if(d!==null){var v=t[s].get(),m=v.color||v,y=m.texture,C=m.sampler;C&&(a.push({binding:d,resource:C}),d++),a.push({binding:d,resource:y.createView()})}}}),this.uniformBuffer&&(a[0]={binding:0,resource:{buffer:this.uniformBuffer.get()}}),this.uniformBindGroup=this.engine.device.createBindGroup({layout:this.uniformsBindGroupLayout,entries:a}),this.renderPipeline&&e.setPipeline(this.renderPipeline),e.setBindGroup(0,this.uniformBindGroup),this.indexBuffer&&e.setIndexBuffer(this.indexBuffer.get(),_r.IndexFormat.Uint32,0),Object.keys(this.attributeCache).forEach(function(s,u){e.setVertexBuffer(0+u,n.attributeCache[s].get().buffer,0)}),this.indexBuffer?e.drawIndexed(this.indexCount,this.options.instances||1,0,0,0):e.draw(this.options.count||0,this.options.instances||0,0,0)}},{key:"destroy",value:function(){throw new Error("Method not implemented.")}},{key:"compilePipelineStageDescriptor",value:function(){var i=ps()(hi.a.mark(function n(e,t,a){var s,u,l;return hi.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=`#version 450
`,u=e,l=t,this.engine.options.useWGSL){f.next=10;break}return f.next=6,this.compileShaderToSpirV(e,"vertex",s);case 6:return u=f.sent,f.next=9,this.compileShaderToSpirV(t,"fragment",s);case 9:l=f.sent;case 10:return f.abrupt("return",this.createPipelineStageDescriptor(u,l));case 11:case"end":return f.stop()}},n,this)}));function r(n,e,t){return i.apply(this,arguments)}return r}()},{key:"compileShaderToSpirV",value:function(r,n,e){return this.compileRawShaderToSpirV(e+r,n)}},{key:"compileRawShaderToSpirV",value:function(r,n){return this.engine.glslang.compileGLSL(r,n)}},{key:"createPipelineStageDescriptor",value:function(r,n){return{vertexStage:{module:this.engine.device.createShaderModule({code:r,isWHLSL:st.isSafari}),entryPoint:"main"},fragmentStage:{module:this.engine.device.createShaderModule({code:n,isWHLSL:st.isSafari}),entryPoint:"main"}}}},{key:"getDefaultRasterizationStateDescriptor",value:function(){return{frontFace:_r.FrontFace.CCW,cullMode:_r.CullMode.None,depthBias:0,depthBiasSlopeScale:0,depthBiasClamp:0}}},{key:"buildUniformBindGroup",value:function(r){var n=this,e=0,t=F$.apply(void 0,[Float32Array].concat(xs()(Object.keys(r).map(function(u){return r[u]?(n.uniformGPUBufferLayout.push({name:u,offset:e}),e+=(r[u].length||1)*4,r[u]):[]})))),a=[],s=!1;t.length&&(s=!0,a.push({binding:0,visibility:_r.ShaderStage.Fragment|_r.ShaderStage.Vertex,type:_r.BindingType.UniformBuffer})),Object.keys(r).filter(function(u){return r[u]===null}).forEach(function(u,l){n.uniformGPUBufferLayout.push({name:u,offset:l*2+(s?1:0)}),a.push({binding:l*2+(s?1:0),visibility:_r.ShaderStage.Fragment,type:_r.BindingType.Sampler},{binding:l*2+(s?1:0)+1,visibility:_r.ShaderStage.Fragment,type:_r.BindingType.SampledTexture})}),this.uniformsBindGroupLayout=this.engine.device.createBindGroupLayout({entries:a}),this.pipelineLayout=this.engine.device.createPipelineLayout({bindGroupLayouts:[this.uniformsBindGroupLayout]}),s&&(this.uniformBuffer=new Og(this.engine,{data:t instanceof Array?new Float32Array(t):t,usage:_r.BufferUsage.Uniform|_r.BufferUsage.CopyDst}))}}]),o}(),G$=function(){function o(i,r){Wi()(this,o),this.engine=i,this.options=r,this.texture=void 0,this.sampler=void 0,this.width=void 0,this.height=void 0,this.createTexture()}return $i()(o,[{key:"get",value:function(){return{texture:this.texture,sampler:this.sampler}}},{key:"update",value:function(){}},{key:"resize",value:function(r){var n=r.width,e=r.height;(n!==this.width||e!==this.height)&&(this.destroy(),this.createTexture()),this.width=n,this.height=e}},{key:"destroy",value:function(){this.texture&&this.texture.destroy()}},{key:"createTexture",value:function(){var r=this.options,n=r.data,e=r.type,t=e===void 0?st.gl.UNSIGNED_BYTE:e,a=r.width,s=r.height,u=r.flipY,l=u===void 0?!1:u,c=r.format,f=c===void 0?st.gl.RGBA:c,d=r.mipmap,v=d===void 0?!1:d,m=r.wrapS,y=m===void 0?st.gl.CLAMP_TO_EDGE:m,C=r.wrapT,O=C===void 0?st.gl.CLAMP_TO_EDGE:C,x=r.aniso,T=x===void 0?0:x,L=r.alignment,_=L===void 0?1:L,z=r.premultiplyAlpha,Q=z===void 0?!1:z,q=r.mag,ye=q===void 0?st.gl.NEAREST:q,Ce=r.min,Ae=Ce===void 0?st.gl.NEAREST:Ce,Pe=r.colorSpace,qe=Pe===void 0?st.gl.BROWSER_DEFAULT_WEBGL:Pe,lt=r.usage;this.width=a,this.height=s,this.texture=this.engine.device.createTexture({size:[a,s,1],mipLevelCount:1,sampleCount:1,dimension:_r.TextureDimension.E2d,format:N$[f],usage:lt||_r.TextureUsage.Sampled|_r.TextureUsage.CopyDst}),(!lt||lt&_r.TextureUsage.Sampled)&&(this.sampler=this.engine.device.createSampler({addressModeU:KA[y],addressModeV:KA[O],addressModeW:KA[y],magFilter:BI[ye],minFilter:BI[Ae],maxAnisotropy:T}))}}]),o}(),zI,UI,VI,z$=(zI=Object(ja.injectable)(),zI(UI=(VI=function(){function o(){var i=this;Wi()(this,o),this.supportWebGPU=!0,this.useWGSL=!1,this.options=void 0,this.canvas=void 0,this.context=void 0,this.glslang=void 0,this.adapter=void 0,this.device=void 0,this.swapChain=void 0,this.mainPassSampleCount=void 0,this.mainTexture=void 0,this.depthTexture=void 0,this.mainColorAttachments=void 0,this.mainTextureExtends=void 0,this.mainDepthAttachment=void 0,this.uploadEncoder=void 0,this.renderEncoder=void 0,this.computeEncoder=void 0,this.renderTargetEncoder=void 0,this.commandBuffers=new Array(4).fill(void 0),this.currentRenderPass=null,this.mainRenderPass=null,this.currentRenderTargetViewDescriptor=void 0,this.currentComputePass=null,this.bundleEncoder=void 0,this.tempBuffers=[],this.currentRenderTarget=null,this.uploadEncoderDescriptor={label:"upload"},this.renderEncoderDescriptor={label:"render"},this.renderTargetEncoderDescriptor={label:"renderTarget"},this.computeEncoderDescriptor={label:"compute"},this.pipelines={},this.computePipelines={},this.defaultSampleCount=4,this.clearDepthValue=1,this.clearStencilValue=0,this.transientViewport={x:Infinity,y:0,width:0,height:0},this.cachedViewport={x:0,y:0,width:0,height:0},this.clear=function(r){var n=r.framebuffer,e=r.color,t=r.depth,a=r.stencil;i.options.supportCompute&&i.startComputePass(),i.currentRenderTarget?(i.currentRenderPass&&i.endRenderTargetRenderPass(),i.startRenderTargetRenderPass(i.currentRenderTarget,e||null,!!t,!!a)):(i.mainColorAttachments[0].loadValue=e||_r.LoadOp.Load,i.mainDepthAttachment.depthLoadValue=t||_r.LoadOp.Load,i.mainDepthAttachment.stencilLoadValue=a?i.clearStencilValue:_r.LoadOp.Load,i.mainRenderPass&&i.endMainRenderPass(),i.startMainRenderPass())},this.createModel=function(){var r=ps()(hi.a.mark(function n(e){var t;return hi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=new B$(i,e),s.next=3,t.init();case 3:return s.abrupt("return",t);case 4:case"end":return s.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.createAttribute=function(r){return new M$(i,r)},this.createBuffer=function(r){return new Og(i,r)},this.createElements=function(r){return new k$(i,r)},this.createTexture2D=function(r){return new G$(i,r)},this.createFramebuffer=function(r){return new D$(i,r)},this.useFramebuffer=function(r,n){i.currentRenderTarget&&i.unbindFramebuffer(i.currentRenderTarget),i.currentRenderTarget=r,i.currentRenderTargetViewDescriptor={dimension:_r.TextureViewDimension.E2d,arrayLayerCount:1,aspect:_r.TextureAspect.All},i.currentRenderPass=null,n()},this.createComputeModel=function(){var r=ps()(hi.a.mark(function n(e){var t;return hi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=new P$(i,e),s.next=3,t.init();case 3:return s.abrupt("return",t);case 4:case"end":return s.stop()}},n)}));return function(n){return r.apply(this,arguments)}}(),this.getCanvas=function(){return i.canvas},this.getGLContext=function(){throw new Error("Method not implemented.")},this.viewport=function(r){var n=r.x,e=r.y,t=r.width,a=r.height;if(!i.currentRenderPass)i.transientViewport={x:n,y:e,width:t,height:a};else if(i.transientViewport.x!==Infinity){var s=i.getCurrentRenderPass();s.setViewport(i.transientViewport.x,i.transientViewport.y,i.transientViewport.width,i.transientViewport.height,0,1)}else if(n!==i.cachedViewport.x||e!==i.cachedViewport.y||t!==i.cachedViewport.width||a!==i.cachedViewport.height){i.cachedViewport={x:n,y:e,width:t,height:a};var u=i.getCurrentRenderPass();u.setViewport(n,e,t,a,0,1)}},this.readPixels=function(r){throw new Error("Method not implemented.")}}return $i()(o,[{key:"isFloatSupported",value:function(){return!0}},{key:"init",value:function(){var i=ps()(hi.a.mark(function n(e){return hi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return this.canvas=e.canvas,this.options=e,this.useWGSL=!!e.useWGSL,this.mainPassSampleCount=e.antialiasing?this.defaultSampleCount:1,a.next=6,this.initGlslang();case 6:this.initContextAndSwapChain(),this.initMainAttachments();case 8:case"end":return a.stop()}},n,this)}));function r(n){return i.apply(this,arguments)}return r}()},{key:"setScissor",value:function(r){throw new Error("Method not implemented.")}},{key:"destroy",value:function(){this.mainTexture&&this.mainTexture.destroy(),this.depthTexture&&this.depthTexture.destroy(),this.tempBuffers.forEach(function(r){return r.destroy()}),this.tempBuffers=[]}},{key:"beginFrame",value:function(){this.uploadEncoder=this.device.createCommandEncoder(this.uploadEncoderDescriptor),this.renderEncoder=this.device.createCommandEncoder(this.renderEncoderDescriptor),this.renderTargetEncoder=this.device.createCommandEncoder(this.renderTargetEncoderDescriptor),this.options.supportCompute&&(this.computeEncoder=this.device.createCommandEncoder(this.computeEncoderDescriptor))}},{key:"endFrame",value:function(){this.options.supportCompute&&this.endComputePass(),this.endMainRenderPass(),this.commandBuffers[0]=this.uploadEncoder.finish(),this.commandBuffers[1]=this.renderEncoder.finish(),this.options.supportCompute&&(this.commandBuffers[2]=this.computeEncoder.finish()),this.commandBuffers[3]=this.renderTargetEncoder.finish(),st.isSafari?this.device.getQueue().submit(this.commandBuffers.filter(function(r){return r})):this.device.defaultQueue.submit(this.commandBuffers.filter(function(r){return r}))}},{key:"getCurrentRenderPass",value:function(){return this.currentRenderTarget&&!this.currentRenderPass?this.startRenderTargetRenderPass(this.currentRenderTarget,null,!1,!1):this.currentRenderPass||this.startMainRenderPass(),this.currentRenderPass}},{key:"initGlslang",value:function(){var i=ps()(hi.a.mark(function n(){var e,t;return hi.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,A$();case 2:return this.glslang=s.sent,s.next=5,(e=navigator)===null||e===void 0||(t=e.gpu)===null||t===void 0?void 0:t.requestAdapter();case 5:return this.adapter=s.sent,s.next=8,this.adapter.requestDevice();case 8:this.device=s.sent;case 9:case"end":return s.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"initContextAndSwapChain",value:function(){this.context=this.canvas.getContext(st.isSafari?"gpu":"gpupresent"),this.swapChain=this.context.configureSwapChain({device:this.device,format:this.options.swapChainFormat,usage:_r.TextureUsage.OutputAttachment|_r.TextureUsage.CopySrc})}},{key:"initMainAttachments",value:function(){if(this.mainTextureExtends={width:this.canvas.width,height:this.canvas.height,depth:1},this.options.antialiasing){var r={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:_r.TextureDimension.E2d,format:_r.TextureFormat.BGRA8Unorm,usage:_r.TextureUsage.OutputAttachment};this.mainTexture&&this.mainTexture.destroy(),this.mainTexture=this.device.createTexture(r),this.mainColorAttachments=[{attachment:st.isSafari?this.mainTexture.createDefaultView():this.mainTexture.createView(),loadValue:[0,0,0,1],storeOp:_r.StoreOp.Store}]}else this.mainColorAttachments=[{attachment:st.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),loadValue:[0,0,0,1],storeOp:_r.StoreOp.Store}];var n={size:this.mainTextureExtends,mipLevelCount:1,sampleCount:this.mainPassSampleCount,dimension:_r.TextureDimension.E2d,format:st.isSafari?"depth32float-stencil8":_r.TextureFormat.Depth24PlusStencil8,usage:_r.TextureUsage.OutputAttachment};this.depthTexture&&this.depthTexture.destroy(),this.depthTexture=this.device.createTexture(n),this.mainDepthAttachment={attachment:st.isSafari?this.depthTexture.createDefaultView():this.depthTexture.createView(),depthLoadValue:this.clearDepthValue,depthStoreOp:_r.StoreOp.Store,stencilLoadValue:this.clearStencilValue,stencilStoreOp:_r.StoreOp.Store}}},{key:"startComputePass",value:function(){this.currentComputePass&&this.endComputePass(),this.currentComputePass=this.computeEncoder.beginComputePass()}},{key:"startMainRenderPass",value:function(){this.currentRenderPass&&!this.currentRenderTarget&&this.endMainRenderPass(),this.options.antialiasing?this.mainColorAttachments[0].resolveTarget=st.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView():this.mainColorAttachments[0].attachment=st.isSafari?this.swapChain.getCurrentTexture().createDefaultView():this.swapChain.getCurrentTexture().createView(),this.currentRenderPass=this.renderEncoder.beginRenderPass({colorAttachments:this.mainColorAttachments,depthStencilAttachment:this.mainDepthAttachment}),this.mainRenderPass=this.currentRenderPass,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"startRenderTargetRenderPass",value:function(r,n,e){var t,a,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=(t=r.get().color)===null||t===void 0?void 0:t.texture,l;u&&(l=u.createView(this.currentRenderTargetViewDescriptor));var c=(a=r.get().depth)===null||a===void 0?void 0:a.texture,f;c&&(f=c.createView());var d=this.renderTargetEncoder.beginRenderPass({colorAttachments:[{attachment:l,loadValue:n!==null?n:_r.LoadOp.Load,storeOp:_r.StoreOp.Store}],depthStencilAttachment:c&&f?{attachment:f,depthLoadValue:e?this.clearDepthValue:_r.LoadOp.Load,depthStoreOp:_r.StoreOp.Store,stencilLoadValue:s?this.clearStencilValue:_r.LoadOp.Load,stencilStoreOp:_r.StoreOp.Store}:void 0});this.currentRenderPass=d,this.cachedViewport&&this.viewport(this.cachedViewport)}},{key:"endMainRenderPass",value:function(){this.currentRenderPass===this.mainRenderPass&&this.currentRenderPass!==null&&(this.currentRenderPass.endPass(),this.resetCachedViewport(),this.currentRenderPass=null,this.mainRenderPass=null)}},{key:"endComputePass",value:function(){this.currentComputePass&&(this.currentComputePass.endPass(),this.currentComputePass=null)}},{key:"endRenderTargetRenderPass",value:function(){this.currentRenderPass&&(this.currentRenderPass.endPass(),this.resetCachedViewport())}},{key:"resetCachedViewport",value:function(){this.cachedViewport={x:0,y:0,width:0,height:0}}},{key:"unbindFramebuffer",value:function(r){this.currentRenderPass&&this.currentRenderPass!==this.mainRenderPass&&this.endRenderTargetRenderPass(),this.transientViewport.x=Infinity,this.currentRenderTarget=null,this.currentRenderPass=this.mainRenderPass}}]),o}(),VI))||UI),U$=h("J4zp"),V$=h.n(U$),H$=h("7W2i"),jh=h.n(H$),W$=h("a1gu"),Lh=h.n(W$),$$=h("Nsbk"),Ru=h.n($$),HI,WI;function K$(o){var i=X$();return function(){var n=Ru()(o),e;if(i){var t=Ru()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function X$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var XA=4/64,$I=1-XA*2,Y$=(HI=Object(ja.injectable)(),HI(WI=function(o){jh()(r,o);var i=K$(r);function r(){return Wi()(this,r),i.apply(this,arguments)}return $i()(r,[{key:"onEntityCreated",value:function(){var e=this.config,t=e.widthSegments,a=t===void 0?1:t,s=e.heightSegments,u=s===void 0?1:s,l=e.depthSegments,c=l===void 0?1:l,f=e.halfExtents,d=f===void 0?qn.d.fromValues(.5,.5,.5):f,v=a,m=u,y=c,C=V$()(d,3),O=C[0],x=C[1],T=C[2],L=[qn.d.fromValues(-O,-x,T),qn.d.fromValues(O,-x,T),qn.d.fromValues(O,x,T),qn.d.fromValues(-O,x,T),qn.d.fromValues(O,-x,-T),qn.d.fromValues(-O,-x,-T),qn.d.fromValues(-O,x,-T),qn.d.fromValues(O,x,-T)],_=[[0,1,3],[4,5,7],[3,2,6],[1,0,4],[1,4,2],[5,0,6]],z=[[0,0,1],[0,0,-1],[0,1,0],[0,-1,0],[1,0,0],[-1,0,0]],Q={FRONT:0,BACK:1,TOP:2,BOTTOM:3,RIGHT:4,LEFT:5},q=[],ye=[],Ce=[],Ae=[],Pe=[],qe=0,lt=function(Tn,Kn,zn){var An,br,sn,Xn;for(sn=0;sn<=Kn;sn++)for(Xn=0;Xn<=zn;Xn++){var dr=qn.d.create(),ga=qn.d.create(),ca=qn.d.create(),Ta=qn.d.create();qn.d.lerp(dr,L[_[Tn][0]],L[_[Tn][1]],sn/Kn),qn.d.lerp(ga,L[_[Tn][0]],L[_[Tn][2]],Xn/zn),qn.d.sub(ca,ga,L[_[Tn][0]]),qn.d.add(Ta,dr,ca),An=sn/Kn,br=Xn/zn,q.push(Ta[0],Ta[1],Ta[2]),ye.push(z[Tn][0],z[Tn][1],z[Tn][2]),Ce.push(An,br),An/=3,br/=3,An=An*$I+XA,br=br*$I+XA,An+=Tn%3/3,br+=Math.floor(Tn/3)/3,Ae.push(An,br),sn<Kn&&Xn<zn&&(Pe.push(qe+zn+1,qe+1,qe),Pe.push(qe+zn+1,qe+zn+2,qe+1)),qe++}};lt(Q.FRONT,v,m),lt(Q.BACK,v,m),lt(Q.TOP,v,y),lt(Q.BOTTOM,v,y),lt(Q.RIGHT,y,m),lt(Q.LEFT,y,m);var ze=Object(st.generateAABBFromVertices)(q),ht=this.getComponent();ht.indices=Uint32Array.from(Pe),ht.aabb=ze,ht.vertexCount=qe,ht.attributes=[{dirty:!0,name:"position",data:Float32Array.from(q),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(ye),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(Ce),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),r}(Ih))||WI);function J$(o,i){if(!o&&!i)throw new Error("Please specify valid arguments for parameters a and b.");if(!i||i.length===0)return o;if(!o||o.length===0)return i;if(Object.prototype.toString.call(o)!==Object.prototype.toString.call(i))throw new Error("The types of the two arguments passed for parameters a and b do not match.");var r=new o.constructor(o.length+i.length);return r.set(o),r.set(i,o.length),r}var KI,XI;function Z$(o){var i=Q$();return function(){var n=Ru()(o),e;if(i){var t=Ru()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function Q$(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var q$=(KI=Object(ja.injectable)(),KI(XI=function(o){jh()(r,o);var i=Z$(r);function r(){return Wi()(this,r),i.apply(this,arguments)}return $i()(r,[{key:"onEntityCreated",value:function(){var e=this.config.geometries,t=e===void 0?[]:e,a=this.getComponent();a.aabb=new st.AABB;var s=[],u=[],l=0;t.forEach(function(c){var f=c.aabb,d=c.indices,v=c.vertexCount,m=c.attributes;a.aabb.add(f),a.vertexCount+=v,d&&u.push.apply(u,xs()(d.map(function(y){return y+l}))),l+=v,m.forEach(function(y,C){s[C]?y.data&&(BA(y.data)?s[C].push(y.data):Z3(y.data)?s[C].data=J$(s[C].data,y.data):s[C].data=s[C].data.concat(y.data)):(s[C]=y,s[C].dirty=!0)})}),a.attributes=s,a.indices=Uint32Array.from(u),a.dirty=!0}}]),r}(Ih))||XI),YI,JI;function eK(o){var i=tK();return function(){var n=Ru()(o),e;if(i){var t=Ru()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function tK(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var nK=(YI=Object(ja.injectable)(),YI(JI=function(o){jh()(r,o);var i=eK(r);function r(){return Wi()(this,r),i.apply(this,arguments)}return $i()(r,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.halfExtents,a=t===void 0?[.5,.5]:t,s=e.widthSegments,u=s===void 0?5:s,l=e.lengthSegments,c=l===void 0?5:l,f=[],d=[],v=[],m=[],y=0,C=0;C<=u;C++)for(var O=0;O<=c;O++){var x=-a[0]+2*a[0]*C/u,T=0,L=-(-a[1]+2*a[1]*O/c),_=C/u,z=O/c;f.push(x,T,L),d.push(0,1,0),v.push(_,z),C<u&&O<c&&(m.push(y+c+1,y+1,y),m.push(y+c+1,y+c+2,y+1)),y++}var Q=Object(st.generateAABBFromVertices)(f),q=this.getComponent();q.indices=Uint32Array.from(m),q.aabb=Q,q.vertexCount=y,q.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(v),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),r}(Ih))||JI),ZI,QI;function rK(o){var i=aK();return function(){var n=Ru()(o),e;if(i){var t=Ru()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function aK(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var iK=(ZI=Object(ja.injectable)(),ZI(QI=function(o){jh()(r,o);var i=rK(r);function r(){return Wi()(this,r),i.apply(this,arguments)}return $i()(r,[{key:"onEntityCreated",value:function(){for(var e=this.config,t=e.radius,a=t===void 0?.5:t,s=e.latitudeBands,u=s===void 0?16:s,l=e.longitudeBands,c=l===void 0?16:l,f=[],d=[],v=[],m=[],y=0;y<=u;y++)for(var C=y*Math.PI/u,O=Math.sin(C),x=Math.cos(C),T=0;T<=c;T++){var L=T*2*Math.PI/c-Math.PI/2,_=Math.sin(L),z=Math.cos(L),Q=z*O,q=x,ye=_*O,Ce=1-T/c,Ae=1-y/u;f.push(Q*a,q*a,ye*a),d.push(Q,q,ye),v.push(Ce,Ae)}for(var Pe=0;Pe<u;++Pe)for(var qe=0;qe<c;++qe){var lt=Pe*(c+1)+qe,ze=lt+c+1;m.push(lt+1,ze,lt),m.push(lt+1,ze+1,ze)}var ht=Object(st.generateAABBFromVertices)(f),nn=this.getComponent();nn.indices=Uint32Array.from(m),nn.aabb=ht,nn.vertexCount=f.length/3,nn.attributes=[{dirty:!0,name:"position",data:Float32Array.from(f),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float3"}]},{dirty:!0,name:"normal",data:Float32Array.from(d),arrayStride:4*3,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float3"}]},{dirty:!0,name:"uv",data:Float32Array.from(v),arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float2"}]}]}}]),r}(Ih))||QI),oK=h("PJYZ"),qc=h.n(oK),qI,eR,tR,nR,uC,rR,aR,iR;function sK(o){var i=uK();return function(){var n=Ru()(o),e;if(i){var t=Ru()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function uK(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var lK=`varying vec4 fragColor;

#pragma include "uv.frag.declaration"
#pragma include "map.frag.declaration"

void main() {
  vec4 diffuseColor = fragColor;

  #pragma include "map.frag.main"

  gl_FragColor = diffuseColor;
}`,cK=`attribute vec3 position;
attribute vec3 normal;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform vec4 color;

varying vec4 fragColor;

#pragma include "uv.vert.declaration"

void main() {
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  fragColor = color;

  #pragma include "uv.vert.main"
}`,fK=`// layout(set = 0, binding = 1) uniform WireframeUniforms {
//   float lineWidth;
//   vec4 lineColor;
// } wireframe;

layout(location = 0) in vec4 fragColor;
// layout(location = 1) in vec3 v_Barycentric;

layout(location = 0) out vec4 outColor;

// wireframe
// float edgeFactor() {
//   vec3 d = fwidth(v_Barycentric);
//   vec3 a3 = smoothstep(vec3(0.0), d * wireframe.lineWidth, v_Barycentric);
//   return min(min(a3.x, a3.y), a3.z);
// }

void main() {
  // outColor = mix(fragColor, wireframe.lineColor, (1.0 - edgeFactor()));
  outColor = fragColor;
}`,dK=`layout(set = 0, binding = 0) uniform Uniforms {
  vec4 color;
  mat4 projectionMatrix;
  mat4 modelViewMatrix;
} uniforms;

layout(location = 0) in vec3 position;
// layout(location = 1) in vec3 barycentric;

layout(location = 0) out vec4 fragColor;
// layout(location = 1) out vec3 v_Barycentric;

void main() {
  gl_Position = uniforms.projectionMatrix * uniforms.modelViewMatrix * vec4(position, 1.0);
  fragColor = uniforms.color;
  // v_Barycentric = barycentric;
}`,hK=(qI=Object(ja.injectable)(),eR=Object(ja.inject)(st.IDENTIFIER.RenderEngine),tR=Object(ja.inject)(st.IDENTIFIER.ShaderModuleService),qI(nR=(uC=(iR=function(o){jh()(r,o);var i=sK(r);function r(){var n;Wi()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),ko()(n,"engine",rR,qc()(n)),ko()(n,"shaderModuleService",aR,qc()(n)),n}return $i()(r,[{key:"onEntityCreated",value:function(){var e=this.getComponent(),t=this.engine.supportWebGPU?dK:cK,a=this.engine.supportWebGPU?fK:lK;this.shaderModuleService.registerModule("material-basic",{vs:t,fs:a});var s=this.shaderModuleService.getModule("material-basic"),u=s.vs,l=s.fs,c=s.uniforms;e.vertexShaderGLSL=u,e.fragmentShaderGLSL=l,e.setUniform(c),this.config.map&&(e.setDefines({USE_UV:1,USE_MAP:1}),e.setUniform({map:this.config.map,uvTransform:qn.a.create()}))}}]),r}(vI),iR),rR=Do()(uC.prototype,"engine",[eR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aR=Do()(uC.prototype,"shaderModuleService",[tR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uC))||nR),oR,sR,uR,lR,cR,fR,dR,ny,hR,vR,pR,gR;function vK(o){var i=pK();return function(){var n=Ru()(o),e;if(i){var t=Ru()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function pK(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var gK=`// generate grid, borrow from clay.gl viewer
// @see https://github.com/pissang/clay-viewer/blob/master/src/graphic/ground.glsl
#extension GL_OES_standard_derivatives : enable

varying vec3 v_Position;
// varying vec3 v_Normal;

uniform float u_GridSize : 5;
uniform float u_GridSize2 : .5;
uniform vec4 u_GridColor : [0, 0, 0, 1];
uniform vec4 u_GridColor2 : [0.3, 0.3, 0.3, 1];
uniform bool u_GridEnabled : true;

// uniform vec3 u_LightDirection;
// uniform vec3 u_LightColor;
// uniform vec3 u_Camera;

void main() {
  // vec3 n = v_Normal;
  // vec3 l = normalize(u_LightDirection);
  // float NdotL = clamp(dot(n, l), 0.001, 1.0);

  gl_FragColor = vec4(1.);

  if (u_GridEnabled) {
    float wx = v_Position.x;
    float wz = v_Position.z;
    // float x0 = abs(fract(wx / u_GridSize - 0.5) - 0.5) / fwidth(wx) * u_GridSize / 2.0;
    // float z0 = abs(fract(wz / u_GridSize - 0.5) - 0.5) / fwidth(wz) * u_GridSize / 2.0;

    float x1 = abs(fract(wx / u_GridSize2 - 0.5) - 0.5) / fwidth(wx) * u_GridSize2;
    float z1 = abs(fract(wz / u_GridSize2 - 0.5) - 0.5) / fwidth(wz) * u_GridSize2;

    // float v0 = 1.0 - clamp(min(x0, z0), 0.0, 1.0);
    float v1 = 1.0 - clamp(min(x1, z1), 0.0, 1.0);
    // if (v0 > 0.1) {
        // gl_FragColor = mix(gl_FragColor, u_GridColor, v0);
    // }
    // else {
        gl_FragColor = mix(gl_FragColor, u_GridColor2, v1);
    // }
  }

  // float shadowFactor = calcShadow(u_ShadowMap, v_PositionFromLight, l, n);
  // vec3 diffuseColor = u_LightColor * NdotL * shadowFactor;

  // gl_FragColor.rgb *= diffuseColor;
}`,mK=`attribute vec3 a_Position;

varying vec3 v_Position;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

void main() {
  v_Position = a_Position;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_Position, 1.);
}`,yK=(oR=Object(ja.injectable)(),sR=Object(ja.inject)(st.IDENTIFIER.Systems),uR=Object(ja.named)(st.IDENTIFIER.MaterialSystem),lR=Object(ja.inject)(st.IDENTIFIER.Systems),cR=Object(ja.named)(st.IDENTIFIER.GeometrySystem),fR=Object(ja.inject)(st.IDENTIFIER.ShaderModuleService),oR(dR=(ny=(gR=function(o){jh()(r,o);var i=vK(r);function r(){var n;Wi()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),ko()(n,"materialSystem",hR,qc()(n)),ko()(n,"geometrySystem",vR,qc()(n)),ko()(n,"shaderModuleService",pR,qc()(n)),n}return $i()(r,[{key:"onAttributeChanged",value:function(e){var t=e.name,a=e.data,s=this.getMeshComponent();s&&s.material&&(t==="gridColor"?(s.material.setUniform("u_GridColor",a),s.material.setUniform("u_GridColor2",a)):t==="gridSize"&&(s.material.setUniform("u_GridSize",a),s.material.setUniform("u_GridSize2",a)))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:mK,fs:gK});var e=this.shaderModuleService.getModule("grid"),t=e.vs,a=e.fs,s=e.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:a});this.setMaterial(u);var l=this.geometrySystem.createBufferGeometry({vertexCount:4});this.setGeometry(l),u.setCull({enable:!1,face:st.gl.BACK}).setDepth({enable:!0,func:st.gl.LESS}),u.setUniform(s),this.setAttributes({gridColor:this.config.gridColor,gridSize:this.config.gridSize}),l.setIndex([0,3,2,2,1,0]),l.setAttribute("a_Position",Float32Array.from([-4,-1,-4,4,-1,-4,4,-1,4,-4,-1,4]),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})}}]),r}(Rh),gR),hR=Do()(ny.prototype,"materialSystem",[sR,uR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vR=Do()(ny.prototype,"geometrySystem",[lR,cR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pR=Do()(ny.prototype,"shaderModuleService",[fR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ny))||dR),lC=h("4hNi"),ep=h("kafh");function cC(o,i,r,n,e){ry(i,n,-e),ry(i,n,e),o.push(r),o.push(r)}function ry(o,i,r){o.push([[i[0],i[1]],r])}var bK=function(o,i,r){var n=[0,0],e=[0,0],t=[0,0],a=[0,0],s=-1,u=!1,l=null,c=Object(lC.create)(),f=r||0,d=3,v=[],m=[],y=[],C=[0,0];i&&(o=o.slice(),o.push(o[0]));for(var O=o.length,x=1;x<O;x++){var T=f,L=o[x-1],_=o[x],z=x<o.length-1?o[x+1]:null;if(C.push(x/O,x/O),Object(ep.direction)(n,_,L),l||(l=[0,0],Object(ep.normal)(l,n)),u||(u=!0,cC(m,v,L,l,1)),y.push([T+0,T+1,T+2]),!z)Object(ep.normal)(l,n),cC(m,v,_,l,1),y.push(s===1?[T,T+2,T+3]:[T+2,T+1,T+3]),f+=2;else{Object(ep.direction)(e,z,_);var Q=Object(ep.computeMiter)(t,a,n,e,1),q=Object(lC.dot)(t,l)<0?-1:1,ye=Q>d;if(!isFinite(Q)){Object(ep.normal)(l,n),cC(m,v,_,l,1),y.push(s===1?[T,T+2,T+3]:[T+2,T+1,T+3]),f+=2,s=q;continue}ye?(Q=d,C.push(x/O),ry(v,l,-q),m.push(_),ry(v,a,Q*q),m.push(_),y.push(s!==-q?[T,T+2,T+3]:[T+2,T+1,T+3]),y.push([T+2,T+3,T+4]),Object(ep.normal)(c,e),Object(lC.copy)(l,c),ry(v,l,-q),m.push(_),f+=3):(cC(m,v,_,a,Q),y.push(s===1?[T,T+2,T+3]:[T+2,T+1,T+3]),q=-1,Object(lC.copy)(l,a),f+=2),s=q}}return{normals:v,attrIndex:y,attrPos:m,attrCounters:C}},mR,yR,bR,CR,ER,OR,wR,ay,xR,SR,AR,MR;function CK(o){var i=EK();return function(){var n=Ru()(o),e;if(i){var t=Ru()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function EK(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var OK=`uniform float u_dash_array : 0.02;
uniform float u_dash_offset : 0;
uniform float u_dash_ratio : 0;
uniform float u_thickness : 0.02;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
    float blur = 1. - smoothstep(0.98, 1., length(v_normal));

    gl_FragColor = v_color;
    gl_FragColor.a *= blur * ceil(mod(v_counters + u_dash_offset, u_dash_array) - (u_dash_array * u_dash_ratio));
}`,wK=`attribute vec2 a_pos;
attribute vec4 a_color;
attribute float a_line_miter;
attribute vec2 a_line_normal;
attribute float a_counters;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
uniform float u_thickness : 0.02;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec2 v_normal;
varying float v_counters;

void main() {
  v_color = a_color;
  v_counters = a_counters;

  vec3 normal = normalize(vec3(a_line_normal, 0.0));

  vec4 offset = vec4(normal * u_thickness / 2.0 * a_line_miter, 0.0);

  v_normal = vec2(normal * sign(a_line_miter));

  gl_Position = projectionMatrix * modelViewMatrix * vec4(a_pos, 0.0, 1.0) + offset;
}
`,xK=(mR=Object(ja.injectable)(),yR=Object(ja.inject)(st.IDENTIFIER.Systems),bR=Object(ja.named)(st.IDENTIFIER.MaterialSystem),CR=Object(ja.inject)(st.IDENTIFIER.Systems),ER=Object(ja.named)(st.IDENTIFIER.GeometrySystem),OR=Object(ja.inject)(st.IDENTIFIER.ShaderModuleService),mR(wR=(ay=(MR=function(o){jh()(r,o);var i=CK(r);function r(){var n;Wi()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),ko()(n,"materialSystem",xR,qc()(n)),ko()(n,"geometrySystem",SR,qc()(n)),ko()(n,"shaderModuleService",AR,qc()(n)),n.vertexCount=void 0,n}return $i()(r,[{key:"onAttributeChanged",value:function(e){var t=e.name,a=e.data,s=this.getMeshComponent();if(s&&s.material)switch(t){case"dashArray":s.material.setUniform("u_dash_array",a);break;case"dashOffset":s.material.setUniform("u_dash_offset",a);break;case"dashRatio":s.material.setUniform("u_dash_ratio",a);break;case"thickness":s.material.setUniform("u_thickness",a);break;case"color":var u=new Array(this.vertexCount).fill(void 0).map(function(){return a}).reduce(function(l,c){return[].concat(xs()(l),xs()(c))},[]);s.geometry.setAttribute("a_color",Float32Array.from(u),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]});break}}},{key:"onEntityCreated",value:function(){var e=this;this.shaderModuleService.registerModule("line",{vs:wK,fs:OK});var t=this.shaderModuleService.getModule("line"),a=t.vs,s=t.fs,u=t.uniforms,l=this.materialSystem.createShaderMaterial({vertexShader:a,fragmentShader:s}),c=bK(this.config.points,!1),f=c.normals,d=c.attrIndex,v=c.attrPos,m=c.attrCounters,y=v.length;this.vertexCount=y;var C=this.geometrySystem.createBufferGeometry({vertexCount:y});this.setMaterial(l),this.setGeometry(C),l.setCull({enable:!1,face:st.gl.BACK}).setUniform(u),this.setAttributes({dashArray:this.config.dashArray,dashOffset:this.config.dashOffset,dashRatio:this.config.dashRatio,thickness:this.config.thickness});var O=[],x=[];f.forEach(function(L){var _=L[0],z=L[1];O.push([_[0],_[1]]),x.push(z)}),C.setIndex(d.reduce(function(L,_){return[].concat(xs()(L),xs()(_))},[])),C.setAttribute("a_pos",Float32Array.from(v.reduce(function(L,_){return[].concat(xs()(L),xs()(_))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]});var T=new Array(y).fill(void 0).map(function(){return xs()(e.config.color)}).reduce(function(L,_){return[].concat(xs()(L),xs()(_))},[]);C.setAttribute("a_color",Float32Array.from(T),{arrayStride:4*4,stepMode:"vertex",attributes:[{shaderLocation:1,offset:0,format:"float4"}]}),C.setAttribute("a_line_miter",Float32Array.from(x),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:2,offset:0,format:"float"}]}),C.setAttribute("a_line_normal",Float32Array.from(O.reduce(function(L,_){return[].concat(xs()(L),xs()(_))},[])),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:3,offset:0,format:"float2"}]}),C.setAttribute("a_counters",Float32Array.from(m),{arrayStride:4*1,stepMode:"vertex",attributes:[{shaderLocation:4,offset:0,format:"float"}]})}}]),r}(Rh),MR),xR=Do()(ay.prototype,"materialSystem",[yR,bR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),SR=Do()(ay.prototype,"geometrySystem",[CR,ER],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),AR=Do()(ay.prototype,"shaderModuleService",[OR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ay))||wR);function SK(o){return[o+1&255,o+1>>8&255,o+1>>8>>8&255]}var TR,PR,kR,DR,IR,RR,NR,iy,jR,LR,_R,FR;function BR(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function AK(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?BR(Object(r),!0).forEach(function(n){Hn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):BR(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}function MK(o){var i=TK();return function(){var n=Ru()(o),e;if(i){var t=Ru()(this).constructor;e=Reflect.construct(n,arguments,t)}else e=n.apply(this,arguments);return Lh()(this,e)}}function TK(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(o){return!1}}var PK=`uniform float u_blur : 0.05;
uniform float u_opacity : 0.7;
uniform float u_stroke_width : 0.01;
uniform vec4 u_stroke_color : [0, 0, 0, 0];
uniform float u_stroke_opacity : 1;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "sdf2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  float antialiasblur = v_data.z;
  float antialiased_blur = -max(u_blur, antialiasblur);
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  // if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  // } else if (shape == 1) {
  //   outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
  //   inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  // } else if (shape == 2) {
  //   outer_df = sdBox(v_data.xy, vec2(1.));
  //   inner_df = sdBox(v_data.xy, vec2(r));
  // } else if (shape == 3) {
  //   outer_df = sdPentagon(v_data.xy, 0.8);
  //   inner_df = sdPentagon(v_data.xy, r * 0.8);
  // } else if (shape == 4) {
  //   outer_df = sdHexagon(v_data.xy, 0.8);
  //   inner_df = sdHexagon(v_data.xy, r * 0.8);
  // } else if (shape == 5) {
  //   outer_df = sdOctogon(v_data.xy, 1.0);
  //   inner_df = sdOctogon(v_data.xy, r);
  // } else if (shape == 6) {
  //   outer_df = sdHexagram(v_data.xy, 0.52);
  //   inner_df = sdHexagram(v_data.xy, r * 0.52);
  // } else if (shape == 7) {
  //   outer_df = sdRhombus(v_data.xy, vec2(1.0));
  //   inner_df = sdRhombus(v_data.xy, vec2(r));
  // } else if (shape == 8) {
  //   outer_df = sdVesica(v_data.xy, 1.1, 0.8);
  //   inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  // }

  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiased_blur,
    0.0,
    inner_df
  );
  vec4 strokeColor = u_stroke_color == vec4(0) ? v_color : u_stroke_color;

  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  gl_FragColor.a = gl_FragColor.a * opacity_t;

  gl_FragColor = filterColor(gl_FragColor);
}`,kK=`attribute vec2 position;
attribute vec4 color;
attribute float shape;
attribute vec2 offset;
attribute float size;

uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;

uniform float u_stroke_width : 0.01;
uniform float u_device_pixel_ratio;
uniform vec2 u_viewport;

varying vec4 v_color;
varying vec4 v_data;
varying float v_radius;

#pragma include "picking"

void main() {
  v_color = color;
  v_radius = size;

  lowp float antialiasblur = 1.0 / u_device_pixel_ratio * (size + u_stroke_width);

  // construct point coords
  v_data = vec4(position, antialiasblur, shape);

  gl_Position = projectionMatrix * modelViewMatrix
    * vec4(position * size + offset, 0.0, 1.0);

  setPickingColor(a_PickingColor);
}`,DK=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],IK=(TR=Object(ja.injectable)(),PR=Object(ja.inject)(st.IDENTIFIER.Systems),kR=Object(ja.named)(st.IDENTIFIER.MaterialSystem),DR=Object(ja.inject)(st.IDENTIFIER.Systems),IR=Object(ja.named)(st.IDENTIFIER.GeometrySystem),RR=Object(ja.inject)(st.IDENTIFIER.ShaderModuleService),TR(NR=(iy=(FR=function(o){jh()(r,o);var i=MK(r);function r(){var n;Wi()(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),ko()(n,"materialSystem",jR,qc()(n)),ko()(n,"geometrySystem",LR,qc()(n)),ko()(n,"shaderModuleService",_R,qc()(n)),n}return $i()(r,[{key:"onAttributeChanged",value:function(e){var t=e.name,a=e.data,s=this.getMeshComponent();s&&s.material&&(t==="strokeWidth"?s.material.setUniform("u_stroke_width",a):t==="strokeColor"?s.material.setUniform("u_stroke_color",a):t==="strokeOpacity"?s.material.setUniform("u_stroke_opacity",a):t==="opacity"?s.material.setUniform("u_opacity",a):t==="blur"&&s.material.setUniform("u_blur",a))}},{key:"onEntityCreated",value:function(){this.shaderModuleService.registerModule("grid",{vs:kK,fs:PK});var e=this.shaderModuleService.getModule("grid"),t=e.vs,a=e.fs,s=e.uniforms,u=this.materialSystem.createShaderMaterial({vertexShader:t,fragmentShader:a,cull:{enable:!1},depth:{enable:!1},blend:{enable:!0,func:{srcRGB:st.gl.SRC_ALPHA,dstRGB:st.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}});u.setUniform(AK({u_device_pixel_ratio:window.devicePixelRatio},s));var l=this.buildAttributes(),c=this.geometrySystem.createInstancedBufferGeometry({maxInstancedCount:l.instancedOffsets.length/2,vertexCount:6});c.setIndex([0,2,1,0,3,2]),c.setAttribute("position",Float32Array.from(l.positions),{arrayStride:4*2,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]}),c.setAttribute("offset",Float32Array.from(l.instancedOffsets),{arrayStride:4*2,stepMode:"instance",attributes:[{shaderLocation:1,offset:0,format:"float2"}]}),c.setAttribute("color",Float32Array.from(l.instancedColors),{arrayStride:4*4,stepMode:"instance",attributes:[{shaderLocation:2,offset:0,format:"float4"}]}),c.setAttribute("size",Float32Array.from(l.instancedSizes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:3,offset:0,format:"float"}]}),c.setAttribute("shape",Float32Array.from(l.instancedShapes),{arrayStride:4,stepMode:"instance",attributes:[{shaderLocation:4,offset:0,format:"float"}]}),c.setAttribute("a_PickingColor",Float32Array.from(l.instancedPickingColors),{arrayStride:4*3,stepMode:"instance",attributes:[{shaderLocation:6,offset:0,format:"float3"}]}),this.setMaterial(u),this.setGeometry(c)}},{key:"buildAttribute",value:function(e,t,a){var s,u,l,c;(s=t.instancedPickingColors).push.apply(s,xs()(SK(e.id||a))),t.instancedShapes.push(DK.indexOf(e.shape||"circle")),(u=t.instancedColors).push.apply(u,xs()(e.color||[1,0,0,1])),(l=t.instancedOffsets).push.apply(l,xs()(e.position||[0,0])),(c=t.instancedSizes).push.apply(c,xs()(e.size||[.2,.2]))}},{key:"buildAttributes",value:function(){var e=this,t={positions:[1,1,1,-1,-1,-1,-1,1],instancedOffsets:[],instancedColors:[],instancedSizes:[],instancedShapes:[],instancedPickingColors:[]};return Array.isArray(this.config)?this.config.forEach(function(a,s){e.buildAttribute(a,t,s)}):this.buildAttribute(this.config,t,0),t}}]),r}(Rh),FR),jR=Do()(iy.prototype,"materialSystem",[PR,kR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LR=Do()(iy.prototype,"geometrySystem",[DR,IR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_R=Do()(iy.prototype,"shaderModuleService",[RR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iy))||NR),GR,zR,UR,VR,HR,oy,WR,$R,KR,XR;function YR(o,i){var r;if(typeof Symbol=="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(r=RK(o))||i&&o&&typeof o.length=="number"){r&&(o=r);var n=0,e=function(){};return{s:e,n:function(){return n>=o.length?{done:!0}:{done:!1,value:o[n++]}},e:function(l){throw l},f:e}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t=!0,a=!1,s;return{s:function(){r=o[Symbol.iterator]()},n:function(){var l=r.next();return t=l.done,l},e:function(l){a=!0,s=l},f:function(){try{!t&&r.return!=null&&r.return()}finally{if(a)throw s}}}}function RK(o,i){if(!!o){if(typeof o=="string")return JR(o,i);var r=Object.prototype.toString.call(o).slice(8,-1);if(r==="Object"&&o.constructor&&(r=o.constructor.name),r==="Map"||r==="Set")return Array.from(o);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JR(o,i)}}function JR(o,i){(i==null||i>o.length)&&(i=o.length);for(var r=0,n=new Array(i);r<i;r++)n[r]=o[r];return n}var NK=`#ifdef USE_MAP
  uniform sampler2D map;
#endif`,jK=`#ifdef USE_MAP
  vec4 texelColor = texture2D(map, vUv);
  // texelColor = mapTexelToLinear(texelColor);
  diffuseColor *= texelColor;
#endif`,LK=`#if (defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ))
  varying vec2 vUv;
#endif`,_K=`#ifdef USE_UV
  attribute vec2 uv;
	#ifdef UVS_VERTEX_ONLY
    vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,FK=`#ifdef USE_UV
  vUv = (uvTransform * vec3(uv, 1)).xy;
#endif`,ZR=(GR=Object(ja.injectable)(),zR=Object(ja.inject)(st.IDENTIFIER.RenderEngine),UR=Object(ja.inject)(st.IDENTIFIER.ShaderModuleService),VR=Object(ja.inject)(st.IDENTIFIER.ConfigService),GR(HR=(oy=(XR=function(){function o(){Wi()(this,o),this.container=void 0,ko()(this,"engine",WR,this),ko()(this,"shaderModule",$R,this),ko()(this,"configService",KR,this),this.inited=!1,this.rendering=!1,this.pendings=[],this.views=[],this.size=void 0}return $i()(o,[{key:"init",value:function(){var i=ps()(hi.a.mark(function n(){var e,t,a,s,u;return hi.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(this.shaderModule.registerBuiltinModules(),this.shaderModule.registerModule("uv.vert.declaration",{vs:_K}),this.shaderModule.registerModule("uv.vert.main",{vs:FK}),this.shaderModule.registerModule("uv.frag.declaration",{fs:LK}),this.shaderModule.registerModule("map.frag.declaration",{fs:NK}),this.shaderModule.registerModule("map.frag.main",{fs:jK}),e=this.container.getAll(st.IDENTIFIER.Systems),t=this.configService.get(),!t.canvas){c.next=30;break}return c.next=11,this.engine.init({canvas:t.canvas,swapChainFormat:_r.TextureFormat.BGRA8Unorm,antialiasing:!1});case 11:a=YR(e),c.prev=12,a.s();case 14:if((s=a.n()).done){c.next=21;break}if(u=s.value,!u.initialize){c.next=19;break}return c.next=19,u.initialize();case 19:c.next=14;break;case 21:c.next=26;break;case 23:c.prev=23,c.t0=c.catch(12),a.e(c.t0);case 26:return c.prev=26,a.f(),c.finish(26);case 29:this.inited=!0;case 30:case"end":return c.stop()}},n,this,[[12,23,26,29]])}));function r(){return i.apply(this,arguments)}return r}()},{key:"render",value:function(){var i=ps()(hi.a.mark(function n(){var e,t,a,s,u,l,c,f=arguments;return hi.a.wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!(!this.inited||this.rendering)){v.next=2;break}return v.abrupt("return");case 2:for(this.pendings.length&&this.pendings.forEach(function(m){m()}),this.rendering=!0,this.engine.beginFrame(),e=this.container.getAll(st.IDENTIFIER.Systems),t=f.length,a=new Array(t),s=0;s<t;s++)a[s]=f[s];u=YR(e),v.prev=8,u.s();case 10:if((l=u.n()).done){v.next=17;break}if(c=l.value,!c.execute){v.next=15;break}return v.next=15,c.execute(a);case 15:v.next=10;break;case 17:v.next=22;break;case 19:v.prev=19,v.t0=v.catch(8),u.e(v.t0);case 22:return v.prev=22,u.f(),v.finish(22);case 25:this.engine.endFrame(),this.rendering=!1;case 27:case"end":return v.stop()}},n,this,[[8,19,22,25]])}));function r(){return i.apply(this,arguments)}return r}()},{key:"clear",value:function(r){var n=this;return this.inited?this.engine.clear(r):this.pendings.unshift(function(){n.engine.clear(r),n.pendings.shift()}),this}},{key:"setSize",value:function(r){var n=r.width,e=r.height,t=this.engine.getCanvas();return this.size={width:n,height:e},t.width=n,t.height=e,this}},{key:"getSize",value:function(){return this.size}}]),o}(),XR),WR=Do()(oy.prototype,"engine",[zR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$R=Do()(oy.prototype,"shaderModule",[UR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),KR=Do()(oy.prototype,"configService",[VR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oy))||HR),QR,qR,eN,tN=(QR=Object(ja.injectable)(),QR(qR=(eN=function(){function o(){Wi()(this,o),this.entities=[]}return $i()(o,[{key:"getEntities",value:function(){return this.entities}},{key:"addRenderable",value:function(r){return this.addEntity(r.getEntity()),this}},{key:"removeRenderable",value:function(r){return this.removeEntity(r.getEntity()),this}},{key:"addLight",value:function(){}},{key:"addEntity",value:function(r){return this.entities.indexOf(r)===-1&&this.entities.push(r),this}},{key:"removeEntity",value:function(r){var n=this.entities.indexOf(r);return this.entities.splice(n,1),this}}]),o}(),eN))||qR),nN,rN,aN,iN=(nN=Object(ja.injectable)(),nN(rN=(aN=function(){function o(){Wi()(this,o),this.cache={}}return $i()(o,[{key:"get",value:function(r){return this.cache[r]}},{key:"set",value:function(r,n){this.cache[r]=n}}]),o}(),aN))||rN),oN,sN,uN,lN,fC,cN,fN,dN;function hN(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function vN(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?hN(Object(r),!0).forEach(function(n){Hn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var pN=(oN=Object(ja.injectable)(),sN=Object(ja.inject)(iN),uN=Object(ja.inject)(st.IDENTIFIER.RenderEngine),oN(lN=(fC=(dN=function(){function o(){Wi()(this,o),ko()(this,"textureCache",cN,this),ko()(this,"engine",fN,this),this.config=void 0,this.loaded=!1,this.texture=void 0}return $i()(o,[{key:"setConfig",value:function(r){this.config=r}},{key:"isLoaded",value:function(){return this.loaded}},{key:"load",value:function(){var i=ps()(hi.a.mark(function n(){var e=this;return hi.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!this.config.url){a.next=4;break}return a.abrupt("return",new Promise(function(s,u){var l=e.textureCache.get(e.config.url);if(l)s(l);else{var c=new Image;c.crossOrigin="Anonymous",c.src=e.config.url,c.onload=function(){var f=e.engine.createTexture2D(vN(vN({},e.config),{},{data:c,width:c.width,height:c.height,flipY:!0}));e.textureCache.set(e.config.url,f),e.texture=f,e.loaded=!0,s(f)},c.onerror=function(){u()}}}));case 4:return this.loaded=!0,this.texture=this.engine.createTexture2D(this.config),a.abrupt("return",this.texture);case 7:case"end":return a.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()}]),o}(),dN),cN=Do()(fC.prototype,"textureCache",[sN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fN=Do()(fC.prototype,"engine",[uN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fC))||lN),gN,mN,yN,bN,YA,CN,EN,ON=(gN=Object(ja.injectable)(),mN=Object(ja.inject)(st.IDENTIFIER.Systems),yN=Object(ja.named)(st.IDENTIFIER.RendererSystem),gN(bN=(YA=(EN=function(){function o(){Wi()(this,o),ko()(this,"rendererSystem",CN,this),this.camera=void 0,this.scene=void 0,this.viewport={x:0,y:0,width:0,height:0},this.clearColor=[1,1,1,1]}return $i()(o,[{key:"getCamera",value:function(){return this.camera}},{key:"getScene",value:function(){return this.scene}},{key:"getViewport",value:function(){return this.viewport}},{key:"getClearColor",value:function(){return this.clearColor}},{key:"setCamera",value:function(r){return this.camera=r,this}},{key:"setScene",value:function(r){return this.scene=r,this}},{key:"setViewport",value:function(r){return this.viewport=r,this}},{key:"setClearColor",value:function(r){return this.clearColor=r,this}},{key:"pick",value:function(r){return this.rendererSystem.pick(r,this)}}]),o}(),EN),CN=Do()(YA.prototype,"rendererSystem",[mN,yN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),YA))||bN),wN,xN,SN,JA,AN,MN;function TN(o,i){var r=Object.keys(o);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(o);i&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),r.push.apply(r,n)}return r}function BK(o){for(var i=1;i<arguments.length;i++){var r=arguments[i]!=null?arguments[i]:{};i%2?TN(Object(r),!0).forEach(function(n){Hn()(o,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):TN(Object(r)).forEach(function(n){Object.defineProperty(o,n,Object.getOwnPropertyDescriptor(r,n))})}return o}var dC=(wN=Object(ja.injectable)(),xN=Object(ja.inject)(st.IDENTIFIER.ConfigService),wN(SN=(JA=(MN=function(){function o(){Wi()(this,o),ko()(this,"configService",AN,this),this.container=void 0}return $i()(o,[{key:"getEngine",value:function(){var i=ps()(hi.a.mark(function n(){var e,t,a,s;return hi.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return e=this.container.get(st.IDENTIFIER.RenderEngine),t=this.configService.get(),a=t.canvas,s=t.engineOptions,l.next=4,e.init(BK({canvas:a||J3(),swapChainFormat:_r.TextureFormat.BGRA8Unorm,antialiasing:!1},s));case 4:return l.abrupt("return",e);case 5:case"end":return l.stop()}},n,this)}));function r(){return i.apply(this,arguments)}return r}()},{key:"getTransformComponent",value:function(r){var n=this.container.get(st.IDENTIFIER.TransformComponentManager);return n.getComponentByEntity(r)}},{key:"getMeshComponent",value:function(r){var n=this.container.get(st.IDENTIFIER.MeshComponentManager);return n.getComponentByEntity(r)}},{key:"setConfig",value:function(r){this.configService.set(r)}},{key:"setContainer",value:function(r){this.container=r}},{key:"getContainer",value:function(){return this.container}},{key:"createEntity",value:function(){return Object(st.createEntity)()}},{key:"createScene",value:function(){return this.container.get(tN)}},{key:"createCamera",value:function(){return this.container.get(H3)}},{key:"createView",value:function(){return this.container.get(ON)}},{key:"createRenderable",value:function(r,n){var e=r?this.container.getNamed(st.IDENTIFIER.Renderable,r):this.container.get(Rh),t=Object(st.createEntity)();return e.setConfig(n||{}),e.setEntity(t),e}},{key:"createGeometry",value:function(r,n){var e=this.container.getNamed(st.IDENTIFIER.Geometry,r),t=Object(st.createEntity)();return e.setConfig(n||{}),e.setEntity(t),e.getComponent()}},{key:"createMaterial",value:function(r,n){var e=this.container.getNamed(st.IDENTIFIER.Material,r),t=Object(st.createEntity)();return e.setConfig(n||{}),e.setEntity(t,r),e.getComponent()}},{key:"createTexture2D",value:function(r){var n=this.container.get(pN);return n.setConfig(r),n}},{key:"createBufferGeometry",value:function(r){var n=this.container.getNamed(st.IDENTIFIER.Systems,st.IDENTIFIER.GeometrySystem);return n.createBufferGeometry(r)}},{key:"createInstancedBufferGeometry",value:function(r){var n=this.container.getNamed(st.IDENTIFIER.Systems,st.IDENTIFIER.GeometrySystem);return n.createInstancedBufferGeometry(r)}},{key:"createShaderMaterial",value:function(r){var n=this.container.getNamed(st.IDENTIFIER.Systems,st.IDENTIFIER.MaterialSystem);return n.createShaderMaterial(r)}},{key:"createKernel",value:function(r){var n=this.container.get(sI);return typeof r=="string"?n.setBundle(JSON.parse(r)):n.setBundle(r),n.init(),n}},{key:"createRenderer",value:function(){var r=this.container.get(ZR);return r.container=this.container,r.init(),r}},{key:"destroy",value:function(){var r=this.container.getAll(st.IDENTIFIER.Systems);r.forEach(function(t){t.tearDown&&t.tearDown()});var n=this.container.get(st.IDENTIFIER.RenderEngine);n.destroy();var e=this.container.get(st.IDENTIFIER.InteractorService);e.destroy()}}],[{key:"create",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=Object(st.createWorldContainer)(),e=navigator.gpu?z$:O$;n.isBound(st.IDENTIFIER.RenderEngine)||n.bind(st.IDENTIFIER.RenderEngine).to(e).inSingletonScope(),n.bind(ZR).toSelf(),n.bind(sI).toSelf(),n.bind(Rh).toSelf(),n.bind(ON).toSelf(),n.bind(H3).toSelf(),n.bind(tN).toSelf(),n.bind(o).toSelf(),n.bind(iN).toSelf(),n.bind(pN).toSelf(),n.bind(st.IDENTIFIER.Geometry).to(Y$).whenTargetNamed(Ih.BOX),n.bind(st.IDENTIFIER.Geometry).to(iK).whenTargetNamed(Ih.SPHERE),n.bind(st.IDENTIFIER.Geometry).to(nK).whenTargetNamed(Ih.PLANE),n.bind(st.IDENTIFIER.Geometry).to(q$).whenTargetNamed(Ih.MERGED),n.bind(st.IDENTIFIER.Material).to(hK).whenTargetNamed(vI.BASIC),n.bind(st.IDENTIFIER.Renderable).to(IK).whenTargetNamed(Rh.POINT),n.bind(st.IDENTIFIER.Renderable).to(xK).whenTargetNamed(Rh.LINE),n.bind(st.IDENTIFIER.Renderable).to(yK).whenTargetNamed(Rh.GRID);var t=n.get(o);return t.setContainer(n),t.setConfig(r),t}}]),o}(),MN),AN=Do()(JA.prototype,"configService",[xN],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),JA))||SN),Sg=function(i,r){var n;return i?Wr(i)?n=function(){return i}:n=i:n=function(){return r||1},n},GK=function(i,r){var n=[],e=[],t={},a=0;for(a=0;a<i.length;a++){var s=i[a];t[s.id]=a,n.push(s.x),n.push(s.y),n.push(0),n.push(0),e.push([])}for(a=0;a<r.length;a++){var u=r[a],l=Hi(u,"source"),c=Hi(u,"target");e[t[l]].push(t[c]),e[t[c]].push(t[l])}var f=0;for(a=0;a<i.length;a++){var d=n.length,v=e[a],m=v.length;n[a*4+2]=d,n[a*4+3]=v.length,f=Math.max(f,v.length);for(var y=0;y<m;++y){var C=v[y];n.push(+C)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:f,array:new Float32Array(n)}},zK=function(i,r,n,e){var t=[],a=[],s={},u=0;for(u=0;u<i.length;u++){var l=i[u];s[l.id]=u,t.push(l.x),t.push(l.y),t.push(0),t.push(0),a.push([])}for(u=0;u<r.length;u++){var c=r[u],f=Hi(c,"source"),d=Hi(c,"target");a[s[f]].push(s[d]),a[s[f]].push(n(c)),a[s[f]].push(e(c)),a[s[f]].push(0),a[s[d]].push(s[f]),a[s[d]].push(n(c)),a[s[d]].push(e(c)),a[s[d]].push(0)}var v=0;for(u=0;u<i.length;u++){var m=t.length,y=a[u],C=y.length;t[u*4+2]=m+1048576*C/4,t[u*4+3]=0,v=Math.max(v,C/4);for(var O=0;O<C;++O){var x=y[O];t.push(+x)}}for(;t.length%4!=0;)t.push(0);return{maxEdgePerVetex:v,array:new Float32Array(t)}},UK=function(i,r){var n=[],e=i.length,t={};return r.forEach(function(a){i.forEach(function(s,u){if(t[a[s]]===void 0&&(t[a[s]]=Object.keys(t).length),n.push(t[a[s]]),u===e-1)for(;n.length%4!=0;)n.push(0)})}),{array:new Float32Array(n),count:Object.keys(t).length}},PN=function(i){for(var r=[],n=i.length,e=i[0].length,t=function(u){i.forEach(function(l,c){if(r.push(l[u]),c===n-1)for(;r.length%4!=0;)r.push(0)})},a=0;a<e;a++)t(a);return new Float32Array(r)},kq=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,VK='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_K : f32;\\n  [[offset 4]] u_K2 : f32;\\n  [[offset 8]] u_Center : vec2<f32>;\\n  [[offset 16]] u_Gravity : f32;\\n  [[offset 20]] u_ClusterGravity : f32;\\n  [[offset 24]] u_Speed : f32;\\n  [[offset 28]] u_MaxDisplace : f32;\\n  [[offset 32]] u_Clustering : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AttributeArray : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar param : f32 = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx = dx + param * xDist;\\ndy = dy + param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < j);\\ndx = dx + param * std::sign;\\ndy = dy + param * std::sign;}}}}\\nreturn vec2<f32>(dx, dy);}\\nfn calcGravity(currentNode : vec4<f32>, nodeAttributes : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar vx : f32 = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nvar vy : f32 = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nvar gf : f32 = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {var clusterIdx : i32 = i32(nodeAttributes.x);\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nvar cvx : f32 = currentNode.x - center.x;\\nvar cvy : f32 = currentNode.y - center.y;\\nvar dist : f32 = std::sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nvar parma : f32 = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx = dx + parma * cvx;\\ndy = dy + parma * cvy;}\\nreturn vec2<f32>(dx, dy);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nvar arr_offset : i32 = i32(std::floor(currentNode.z + 0.5));\\nvar length : i32 = i32(std::floor(currentNode.w + 0.5));\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + i32(p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = select(node_buffer.x, select(node_buffer.y, select(node_buffer.z, node_buffer.w, buf_offset == 2), buf_offset == 1), buf_offset == 0);\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar xDist : f32 = currentNode.x - nextNode.x;\\nvar yDist : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nvar attractiveF : f32 = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx = dx - xDist * attractiveF;\\ndy = dy - yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {var sign : f32 = select(1.0, -1.0, i < i32(float_j));\\ndx = dx - std::sign * attractiveF;\\ndy = dy - std::sign * attractiveF;}}}\\nreturn vec2<f32>(dx, dy);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar dx : f32 = 0.0;\\nvar dy : f32 = 0.0;\\nif (i >= __DefineValuePlaceholder__VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes : vec4<f32> = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\ndx = dx + repulsive.x;\\ndy = dy + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode);\\ndx = dx + attractive.x;\\ndy = dy + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(currentNode, nodeAttributes);\\ndx = dx - gravity.x;\\ndy = dy - gravity.y;\\ndx = dx * gWebGPUUniformParams.u_Speed;\\ndy = dy * gWebGPUUniformParams.u_Speed;\\nvar distLength : f32 = std::sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {var limitedDist : f32 = std::min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_K;\\n  float u_K2;\\n  vec2 u_Center;\\n  float u_Gravity;\\n  float u_ClusterGravity;\\n  float u_Speed;\\n  float u_MaxDisplace;\\n  float u_Clustering;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AttributeArray[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvec2 calcRepulsive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = gWebGPUUniformParams.u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {float dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - gWebGPUUniformParams.u_Center.x;\\nfloat vy = currentNode.y - gWebGPUUniformParams.u_Center.y;\\nfloat gf = (0.01 * gWebGPUUniformParams.u_K) * gWebGPUUniformParams.u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (gWebGPUUniformParams.u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[clusterIdx];\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (gWebGPUUniformParams.u_K * gWebGPUUniformParams.u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {float dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / gWebGPUUniformParams.u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes = gWebGPUBuffer1.u_AttributeArray[i];\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w);\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= gWebGPUUniformParams.u_Speed;\\ndy *= gWebGPUUniformParams.u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(gWebGPUUniformParams.u_MaxDisplace * gWebGPUUniformParams.u_Speed, distLength);\\ngWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Dq=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,HK='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\n\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 0, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributes : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_ClusterCenters : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar center : vec4<f32> = gWebGPUBuffer2.u_ClusterCenters[i];\\nvar sumx : f32 = 0.0;\\nvar sumy : f32 = 0.0;\\nvar count : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var attributes : vec4<f32> = gWebGPUBuffer1.u_NodeAttributes[j];\\nvar clusterIdx : i32 = i32(attributes.x);\\nvar vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx = sumx + vertex.x;\\nsumy = sumy + vertex.y;\\ncount = count + 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4<f32>(sumx / count, sumy / count, count, i);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\n\\nlayout(std430, set = 0, binding = 0) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_NodeAttributes[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer2 {\\n  vec4 u_ClusterCenters[];\\n} gWebGPUBuffer2;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {int i = globalInvocationID.x;\\nvec4 center = gWebGPUBuffer2.u_ClusterCenters[i];\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = gWebGPUBuffer1.u_NodeAttributes[j];\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = gWebGPUBuffer0.u_Data[j];\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngWebGPUBuffer2.u_ClusterCenters[i] = vec4(sumx / count, sumy / count, count, i);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}',hC=function(o,i,r,n){function e(t){return t instanceof r?t:new r(function(a){a(t)})}return new(r||(r=Promise))(function(t,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?t(c.value):e(c.value).then(s,u)}l((n=n.apply(o,i||[])).next())})},WK=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterField="cluster",e.clusterGravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return hC(this,void 0,void 0,Object(D.a)().mark(function e(){var t=this,a,s,u,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(a=this,s=a.nodes,!(!s||s.length===0)){d.next=5;break}return a.onLayoutEnd&&a.onLayoutEnd(),d.abrupt("return");case 5:if(!a.width&&typeof window!="undefined"&&(a.width=window.innerWidth),!a.height&&typeof window!="undefined"&&(a.height=window.innerHeight),a.center||(a.center=[a.width/2,a.height/2]),u=a.center,s.length!==1){d.next=14;break}return s[0].x=u[0],s[0].y=u[1],a.onLayoutEnd&&a.onLayoutEnd(),d.abrupt("return");case 14:return l={},c={},s.forEach(function(v,m){Wr(v.x)||(v.x=Math.random()*t.width),Wr(v.y)||(v.y=Math.random()*t.height),l[v.id]=v,c[v.id]=m}),a.nodeMap=l,a.nodeIdxMap=c,d.next=21,a.run();case 21:case"end":return d.stop()}},e,this)}))}},{key:"executeWithWorker",value:function(e,t){return hC(this,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u,l,c,f,d;return Object(D.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(u=this,l=u.nodes,c=u.center,!(!l||l.length===0)){m.next=5;break}return m.abrupt("return");case 5:if(l.length!==1){m.next=9;break}return l[0].x=c[0],l[0].y=c[1],m.abrupt("return");case 9:return f={},d={},l.forEach(function(y,C){Wr(y.x)||(y.x=Math.random()*s.width),Wr(y.y)||(y.y=Math.random()*s.height),f[y.id]=y,d[y.id]=C}),u.nodeMap=f,u.nodeIdxMap=d,m.next=16,u.run(e,t);case 16:case"end":return m.stop()}},a,this)}))}},{key:"run",value:function(e,t){return hC(this,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u,l,c,f,d,v,m,y,C,O,x,T,L,_,z,Q,q,ye,Ce,Ae,Pe,qe,lt,ze,ht,nn;return Object(D.a)().wrap(function(Kn){for(;;)switch(Kn.prev=Kn.next){case 0:for(u=this,l=u.nodes,c=u.edges,f=u.maxIteration,d=u.center,v=u.height*u.width,m=Math.sqrt(v)/10,y=v/(l.length+1),C=Math.sqrt(y),O=u.speed,x=u.clustering,T=UK([u.clusterField],l),L=T.array,_=T.count,l.forEach(function(zn,An){var br=0,sn=0;Wr(zn.fx)&&Wr(zn.fy)&&(br=zn.fx||.001,sn=zn.fy||.001),L[4*An+1]=br,L[4*An+2]=sn}),z=l.length,Q=GK(l,c),q=Q.maxEdgePerVetex,ye=Q.array,Ce=u.workerEnabled,Ce?Ae=dC.create({canvas:e,engineOptions:{supportCompute:!0}}):Ae=dC.create({engineOptions:{supportCompute:!0}}),Pe=u.onLayoutEnd,qe=[],lt=0;lt<_;lt++)qe.push(0,0,0,0);return ze=Ae.createKernel(VK).setDispatch([z,1,1]).setBinding({u_Data:ye,u_K:C,u_K2:y,u_Gravity:u.gravity,u_ClusterGravity:u.clusterGravity||u.gravity||1,u_Speed:O,u_MaxDisplace:m,u_Clustering:x?1:0,u_Center:d,u_AttributeArray:L,u_ClusterCenters:qe,MAX_EDGE_PER_VERTEX:q,VERTEX_COUNT:z}),x&&(ht=Ae.createKernel(HK).setDispatch([_,1,1]).setBinding({u_Data:ye,u_NodeAttributes:L,u_ClusterCenters:qe,VERTEX_COUNT:z,CLUSTER_COUNT:_})),nn=function(){return hC(s,void 0,void 0,Object(D.a)().mark(function An(){var br,sn;return Object(D.a)().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:br=0;case 1:if(!(br<f)){dr.next=13;break}return dr.next=4,ze.execute();case 4:if(!x){dr.next=9;break}return ht.setBinding({u_Data:ze}),dr.next=8,ht.execute();case 8:ze.setBinding({u_ClusterCenters:ht});case 9:ze.setBinding({u_MaxDisplace:m*=.99});case 10:br++,dr.next=1;break;case 13:return dr.next=15,ze.getOutput();case 15:sn=dr.sent,e?t.postMessage({type:pA.GPUEND,vertexEdgeData:sn}):l.forEach(function(ga,ca){var Ta=sn[4*ca],La=sn[4*ca+1];ga.x=Ta,ga.y=La}),Pe&&Pe();case 18:case"end":return dr.stop()}},An)}))},Kn.next=25,nn();case 25:case"end":return Kn.stop()}},a,this)}))}},{key:"getType",value:function(){return"fruchterman-gpu"}}]),r}(Iu),Iq=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,$K='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_damping : f32;\\n  [[offset 4]] u_maxSpeed : f32;\\n  [[offset 8]] u_minMovement : f32;\\n  \\n  [[offset 12]] u_coulombDisScale : f32;\\n  [[offset 16]] u_factor : f32;\\n  \\n  \\n  [[offset 20]] u_interval : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\ntype GWebGPUBuffer2 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray1 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 3, set 0]] var<storage_buffer> gWebGPUBuffer2 : GWebGPUBuffer2;\\ntype GWebGPUBuffer3 = [[block]] struct {\\n  [[offset 0]] u_NodeAttributeArray2 : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 4, set 0]] var<storage_buffer> gWebGPUBuffer3 : GWebGPUBuffer3;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nfn unpack_float(packedValue : f32) -> vec2<i32> {var packedIntValue : i32 = i32(packedValue);\\nvar v0 : i32 = packedIntValue / 1048576;\\nreturn vec2<i32>(v0, packedIntValue - (v0 * 1048576));}\\nfn calcRepulsive(i : i32, currentNode : vec4<f32>) -> vec2<f32> {var ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {if (i != j) {var nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nvar vx : f32 = currentNode.x - nextNode.x;\\nvar vy : f32 = currentNode.y - nextNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar n_dist : f32 = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar attributesi : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar attributesj : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nvar massi : f32 = attributesi.x;\\nvar nodeStrengthi : f32 = attributesi.z;\\nvar nodeStrengthj : f32 = attributesj.z;\\nvar nodeStrength : f32 = (nodeStrengthi + nodeStrengthj) / 2.0;\\nvar param : f32 = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax = ax + direx * param;\\nay = ay + direy * param;}}\\nreturn vec2<f32>(ax, ay);}\\nfn calcGravity(i : i32, currentNode : vec4<f32>, attributes2 : vec4<f32>) -> vec2<f32> {var vx : f32 = currentNode.x - attributes2.x;\\nvar vy : f32 = currentNode.y - attributes2.y;\\nvar ax : f32 = vx * attributes2.z;\\nvar ay : f32 = vy * attributes2.z;\\nreturn vec2<f32>(ax, ay);}\\nfn calcAttractive(i : i32, currentNode : vec4<f32>, attributes1 : vec4<f32>) -> vec2<f32> {var mass : f32 = attributes1.x;\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nvar compressed : vec2<i32> = unpack_float(currentNode.z);\\nvar length : i32 = compressed.x;\\nvar arr_offset : i32 = compressed.y;\\nvar node_buffer : vec4<f32>;\\nfor (var p : i32 = 0; p < __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX; p = p + 1) {if (p >= length) {break;}\\nvar arr_idx : i32 = arr_offset + (4 * p);\\nvar buf_offset : i32 = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[i32(arr_idx / 4)];}\\nvar float_j : f32 = node_buffer.x;\\nvar nextNode : vec4<f32> = gWebGPUBuffer0.u_Data[i32(float_j)];\\nvar vx : f32 = nextNode.x - currentNode.x;\\nvar vy : f32 = nextNode.y - currentNode.y;\\nvar dist : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.01;\\nvar direx : f32 = vx / dist;\\nvar direy : f32 = vy / dist;\\nvar edgeLength : f32 = node_buffer.y;\\nvar edgeStrength : f32 = node_buffer.z;\\nvar diff : f32 = edgeLength - dist;\\nvar param : f32 = (diff * edgeStrength) / mass;\\nax = ax - direx * param;\\nay = ay - direy * param;}\\nreturn vec2<f32>(ax, ay);}\\nfn main() -> void {var i : i32 = globalInvocationID.x;\\nvar currentNode : vec4<f32> = gWebGPUBuffer0.u_Data[i];\\nvar movement : vec4<f32> = gWebGPUBuffer1.u_AveMovement[0];\\nvar ax : f32 = 0.0;\\nvar ay : f32 = 0.0;\\nif ((i >= __DefineValuePlaceholder__VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvar nodeAttributes1 : vec4<f32> = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvar nodeAttributes2 : vec4<f32> = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvar repulsive : vec2<f32> = calcRepulsive(i, currentNode);\\nax = ax + repulsive.x;\\nay = ay + repulsive.y;\\nvar attractive : vec2<f32> = calcAttractive(i, currentNode, nodeAttributes1);\\nax = ax + attractive.x;\\nay = ay + attractive.y;\\nvar gravity : vec2<f32> = calcGravity(i, currentNode, nodeAttributes2);\\nax = ax - gravity.x;\\nay = ay - gravity.y;\\nvar param : f32 = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nvar vx : f32 = ax * param;\\nvar vy : f32 = ay * param;\\nvar vlength : f32 = std::sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {var param2 : f32 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nvar distx : f32 = vx * gWebGPUUniformParams.u_interval;\\nvar disty : f32 = vy * gWebGPUUniformParams.u_interval;\\nvar distLength : f32 = std::sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4<f32>(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4<f32>(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_damping;\\n  float u_maxSpeed;\\n  float u_minMovement;\\n  \\n  float u_coulombDisScale;\\n  float u_factor;\\n  \\n  \\n  float u_interval;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer   GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer readonly  GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\nlayout(std430, set = 0, binding = 3) buffer readonly  GWebGPUBuffer2 {\\n  vec4 u_NodeAttributeArray1[];\\n} gWebGPUBuffer2;\\n\\nlayout(std430, set = 0, binding = 4) buffer readonly  GWebGPUBuffer3 {\\n  vec4 u_NodeAttributeArray2[];\\n} gWebGPUBuffer3;\\n\\n\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nivec2 unpack_float(float packedValue) {int packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {float ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = gWebGPUBuffer0.u_Data[j];\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * gWebGPUUniformParams.u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 attributesj = gWebGPUBuffer2.u_NodeAttributeArray1[j];\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * gWebGPUUniformParams.u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {float vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {float mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = gWebGPUBuffer0.u_Data[int(arr_idx / 4)];}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = gWebGPUBuffer0.u_Data[int(float_j)];\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {int i = globalInvocationID.x;\\nvec4 currentNode = gWebGPUBuffer0.u_Data[i];\\nvec4 movement = gWebGPUBuffer1.u_AveMovement[0];\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < gWebGPUUniformParams.u_minMovement)) {gWebGPUBuffer0.u_Data[i] = currentNode;\\nreturn ;}\\nvec4 nodeAttributes1 = gWebGPUBuffer2.u_NodeAttributeArray1[i];\\nvec4 nodeAttributes2 = gWebGPUBuffer3.u_NodeAttributeArray2[i];\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = gWebGPUUniformParams.u_interval * gWebGPUUniformParams.u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > gWebGPUUniformParams.u_maxSpeed) {float param2 = gWebGPUUniformParams.u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * gWebGPUUniformParams.u_interval;\\nfloat disty = vy * gWebGPUUniformParams.u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gWebGPUBuffer0.u_Data[i] = vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0);}else {gWebGPUBuffer0.u_Data[i] = vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength);}}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nfloat distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {gl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Rq=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,KK='{"shaders":{"WGSL":"import \\"GLSL.std.450\\" as std;\\n\\n\\n# var gWebGPUDebug : bool = false;\\n# var gWebGPUDebugOutput : vec4<f32> = vec4<f32>(0.0);\\n\\n[[builtin global_invocation_id]] var<in> globalInvocationID : vec3<u32>;\\n# [[builtin work_group_size]] var<in> workGroupSize : vec3<u32>;\\n# [[builtin work_group_id]] var<in> workGroupID : vec3<u32>;\\n[[builtin local_invocation_id]] var<in> localInvocationID : vec3<u32>;\\n# [[builtin num_work_groups]] var<in> numWorkGroups : vec3<u32>;\\n[[builtin local_invocation_idx]] var<in> localInvocationIndex : u32;\\n\\ntype GWebGPUParams = [[block]] struct {\\n  [[offset 0]] u_iter : f32;\\n};\\n[[binding 0, set 0]] var<uniform> gWebGPUUniformParams : GWebGPUParams;\\ntype GWebGPUBuffer0 = [[block]] struct {\\n  [[offset 0]] u_Data : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 1, set 0]] var<storage_buffer> gWebGPUBuffer0 : GWebGPUBuffer0;\\ntype GWebGPUBuffer1 = [[block]] struct {\\n  [[offset 0]] u_AveMovement : [[stride 16]] array<vec4<f32>>;\\n};\\n[[binding 2, set 0]] var<storage_buffer> gWebGPUBuffer1 : GWebGPUBuffer1;\\n\\n\\n\\n\\n\\n\\n\\n\\nfn main() -> void {var movement : f32 = 0.0;\\nfor (var j : i32 = 0; j < __DefineValuePlaceholder__VERTEX_COUNT; j = j + 1) {var vertex : vec4<f32> = gWebGPUBuffer0.u_Data[j];\\nmovement = movement + vertex.w;}\\nmovement = movement / f32(__DefineValuePlaceholder__VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4<f32>(movement, 0.0, 0.0, 0.0);\\nreturn;}\\n\\nentry_point compute as \\"main\\" = main;\\n","GLSL450":"\\n\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\nivec3 globalInvocationID = ivec3(gl_GlobalInvocationID);\\nivec3 workGroupSize = ivec3(1,1,1);\\nivec3 workGroupID = ivec3(gl_WorkGroupID);\\nivec3 localInvocationID = ivec3(gl_LocalInvocationID);\\nivec3 numWorkGroups = ivec3(gl_NumWorkGroups);\\nint localInvocationIndex = int(gl_LocalInvocationIndex);\\n\\nlayout(std140, set = 0, binding = 0) uniform GWebGPUParams {\\n  float u_iter;\\n} gWebGPUUniformParams;\\nlayout(std430, set = 0, binding = 1) buffer readonly  GWebGPUBuffer0 {\\n  vec4 u_Data[];\\n} gWebGPUBuffer0;\\n\\nlayout(std430, set = 0, binding = 2) buffer   GWebGPUBuffer1 {\\n  vec4 u_AveMovement[];\\n} gWebGPUBuffer1;\\n\\n\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\nlayout (\\n  local_size_x = 1,\\n  local_size_y = 1,\\n  local_size_z = 1\\n) in;\\n\\n\\n\\nvoid main() {float movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = gWebGPUBuffer0.u_Data[j];\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngWebGPUBuffer1.u_AveMovement[0] = vec4(movement, 0.0, 0.0, 0.0);}\\n","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}',ZA=function(o,i,r,n){function e(t){return t instanceof r?t:new r(function(a){a(t)})}return new(r||(r=Promise))(function(t,a){function s(c){try{l(n.next(c))}catch(f){a(f)}}function u(c){try{l(n.throw(c))}catch(f){a(f)}}function l(c){c.done?t(c.value):e(c.value).then(s,u)}l((n=n.apply(o,i||[])).next())})},XK=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.maxIteration=1e3,e.edgeStrength=200,e.nodeStrength=1e3,e.coulombDisScale=.005,e.damping=.9,e.maxSpeed=1e3,e.minMovement=.5,e.interval=.02,e.factor=1,e.linkDistance=1,e.gravity=10,e.workerEnabled=!1,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}},{key:"execute",value:function(){return ZA(this,void 0,void 0,Object(D.a)().mark(function e(){var t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=this,a=t.nodes,!(!a||a.length===0)){f.next=5;break}return t.onLayoutEnd&&t.onLayoutEnd(),f.abrupt("return");case 5:if(!t.width&&typeof window!="undefined"&&(t.width=window.innerWidth),!t.height&&typeof window!="undefined"&&(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]),s=t.center,a.length!==1){f.next=14;break}return a[0].x=s[0],a[0].y=s[1],t.onLayoutEnd&&t.onLayoutEnd(),f.abrupt("return");case 14:return u={},l={},a.forEach(function(d,v){Wr(d.x)||(d.x=Math.random()*t.width),Wr(d.y)||(d.y=Math.random()*t.height),u[d.id]=d,l[d.id]=v}),t.nodeMap=u,t.nodeIdxMap=l,t.nodeStrength=Sg(t.nodeStrength,1),t.edgeStrength=Sg(t.edgeStrength,1),f.next=23,t.run();case 23:case"end":return f.stop()}},e,this)}))}},{key:"executeWithWorker",value:function(e,t){var a=this,s=a.nodes,u=a.center;if(!(!s||s.length===0)){if(s.length===1){s[0].x=u[0],s[0].y=u[1];return}var l={},c={};s.forEach(function(f,d){Wr(f.x)||(f.x=Math.random()*a.width),Wr(f.y)||(f.y=Math.random()*a.height),l[f.id]=f,c[f.id]=d}),a.nodeMap=l,a.nodeIdxMap=c,a.nodeStrength=Sg(a.nodeStrength,1),a.edgeStrength=Sg(a.edgeStrength,1),a.run(e,t)}}},{key:"run",value:function(e,t){return ZA(this,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u,l,c,f,d,v,m,y,C,O,x,T,L,_,z,Q,q,ye,Ce,Ae,Pe,qe,lt,ze,ht,nn,Tn;return Object(D.a)().wrap(function(zn){for(;;)switch(zn.prev=zn.next){case 0:for(u=this,l=u.nodes,c=u.edges,f=u.maxIteration,!u.width&&typeof window!="undefined"&&(u.width=window.innerWidth),!u.height&&typeof window!="undefined"&&(u.height=window.innerHeight),d=l.length,u.linkDistance=Sg(u.linkDistance),u.edgeStrength=Sg(u.edgeStrength),v=zK(l,c,u.linkDistance,u.edgeStrength),m=v.maxEdgePerVetex,y=v.array,u.degrees=H0(l.length,u.nodeIdxMap,c),C=[],O=[],x=[],T=[],L=[],_=[],z=[],u.getMass||(u.getMass=function(An){return u.degrees[u.nodeIdxMap[An.id]]||1}),Q=u.gravity,q=u.center,l.forEach(function(An,br){C.push(u.getMass(An)),O.push(u.nodeStrength(An)),u.degrees[br]||(u.degrees[br]=0);var sn=[q[0],q[1],Q];if(u.getCenter){var Xn=u.getCenter(An,u.degrees[br]);Xn&&Wr(Xn[0])&&Wr(Xn[1])&&Wr(Xn[2])&&(sn=Xn)}x.push(sn[0]),T.push(sn[1]),L.push(sn[2]),Wr(An.fx)&&Wr(An.fy)?(_.push(An.fx||.001),z.push(An.fy||.001)):(_.push(0),z.push(0))}),ye=PN([C,u.degrees,O,_]),Ce=PN([x,T,L,z]),Ae=u.workerEnabled,Ae?Pe=dC.create({canvas:e,engineOptions:{supportCompute:!0}}):Pe=dC.create({engineOptions:{supportCompute:!0}}),qe=u.onLayoutEnd,lt=[],y.forEach(function(An){lt.push(An)}),ze=0;ze<4;ze++)lt.push(0);return ht=Pe.createKernel($K).setDispatch([d,1,1]).setBinding({u_Data:y,u_damping:u.damping,u_maxSpeed:u.maxSpeed,u_minMovement:u.minMovement,u_coulombDisScale:u.coulombDisScale,u_factor:u.factor,u_NodeAttributeArray1:ye,u_NodeAttributeArray2:Ce,MAX_EDGE_PER_VERTEX:m,VERTEX_COUNT:d,u_AveMovement:lt,u_interval:u.interval}),nn=Pe.createKernel(KK).setDispatch([1,1,1]).setBinding({u_Data:y,VERTEX_COUNT:d,u_AveMovement:[0,0,0,0]}),Tn=function(){return ZA(s,void 0,void 0,Object(D.a)().mark(function br(){var sn,Xn,dr;return Object(D.a)().wrap(function(ca){for(;;)switch(ca.prev=ca.next){case 0:sn=0;case 1:if(!(sn<f)){ca.next=12;break}return ca.next=4,ht.execute();case 4:return nn.setBinding({u_Data:ht}),ca.next=7,nn.execute();case 7:Xn=Math.max(.02,u.interval-sn*.002),ht.setBinding({u_interval:Xn,u_AveMovement:nn});case 9:sn++,ca.next=1;break;case 12:return ca.next=14,ht.getOutput();case 14:dr=ca.sent,e?t.postMessage({type:pA.GPUEND,vertexEdgeData:dr}):l.forEach(function(Ta,La){var yo=dr[4*La],Jo=dr[4*La+1];Ta.x=yo,Ta.y=Jo}),qe&&qe();case 17:case"end":return ca.stop()}},br)}))},zn.next=35,Tn();case 35:case"end":return zn.stop()}},a,this)}))}},{key:"getType",value:function(){return"gForce-gpu"}}]),r}(Iu),YK=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.6,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=.5,e.comboCollideStrength=.5,e.comboSpacing=20,e.comboPadding=10,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=1,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.indexMap={},e.comboMap={},e.previousLayouted=!1,e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.center;if(e.comboTree={id:"comboTreeRoot",depth:-1,children:e.comboTrees},!t||t.length===0){e.onLayoutEnd&&e.onLayoutEnd();return}if(t.length===1){t[0].x=a[0],t[0].y=a[1],e.onLayoutEnd&&e.onLayoutEnd();return}e.initVals(),e.run(),e.onLayoutEnd&&e.onLayoutEnd()}},{key:"run",value:function(){var e=this,t=e.nodes,a=e.previousLayouted?e.maxIteration/5:e.maxIteration;!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);var s=e.center,u=e.velocityDecay,l=e.comboMap;e.previousLayouted||e.initPos(l);for(var c=function(y){var C=[];t.forEach(function(O,x){C[x]={x:0,y:0}}),e.applyCalculate(C),e.applyComboCenterForce(C),t.forEach(function(O,x){!Wr(O.x)||!Wr(O.y)||(O.x+=C[x].x*u,O.y+=C[x].y*u)}),e.alpha+=(e.alphaTarget-e.alpha)*e.alphaDecay,e.onTick()},f=0;f<a;f++)c(f);var d=[0,0];t.forEach(function(m){!Wr(m.x)||!Wr(m.y)||(d[0]+=m.x,d[1]+=m.y)}),d[0]/=t.length,d[1]/=t.length;var v=[s[0]-d[0],s[1]-d[1]];t.forEach(function(m,y){!Wr(m.x)||!Wr(m.y)||(m.x+=v[0],m.y+=v[1])}),e.combos.forEach(function(m){var y=l[m.id];y&&y.empty&&(m.x=y.cx||m.x,m.y=y.cy||m.y)}),e.previousLayouted=!0}},{key:"initVals",value:function(){var e=this,t=e.edges,a=e.nodes,s=e.combos,u={},l={},c={};a.forEach(function(br,sn){l[br.id]=br,c[br.id]=sn}),e.nodeMap=l,e.indexMap=c;var f={};s.forEach(function(br){f[br.id]=br}),e.oriComboMap=f,e.comboMap=e.getComboMap();var d=e.preventOverlap;e.preventComboOverlap=e.preventComboOverlap||d,e.preventNodeOverlap=e.preventNodeOverlap||d;var v=e.collideStrength;v&&(e.comboCollideStrength=v,e.nodeCollideStrength=v),e.comboCollideStrength=e.comboCollideStrength?e.comboCollideStrength:0,e.nodeCollideStrength=e.nodeCollideStrength?e.nodeCollideStrength:0;for(var m=0;m<t.length;++m){var y=Hi(t[m],"source"),C=Hi(t[m],"target");u[y]?u[y]++:u[y]=1,u[C]?u[C]++:u[C]=1}for(var O=[],x=0;x<t.length;++x){var T=Hi(t[x],"source"),L=Hi(t[x],"target");O[x]=u[T]/(u[T]+u[L])}this.bias=O;var _=e.nodeSize,z=e.nodeSpacing,Q,q;if(Wr(z)?q=function(){return z}:Th(z)?q=z:q=function(){return 0},this.nodeSpacing=q,!_)Q=function(sn){if(sn.size){if(bu(sn.size)){var Xn=sn.size[0]>sn.size[1]?sn.size[0]:sn.size[1];return Xn/2}if(_f(sn.size)){var dr=sn.size.width>sn.size.height?sn.size.width:sn.size.height;return dr/2}return sn.size/2}return 10};else if(Th(_))Q=function(sn){return _(sn)};else if(bu(_)){var ye=_[0]>_[1]?_[0]:_[1],Ce=ye/2;Q=function(sn){return Ce}}else{var Ae=_/2;Q=function(sn){return Ae}}this.nodeSize=Q;var Pe=e.comboSpacing,qe;Wr(Pe)?qe=function(){return Pe}:Th(Pe)?qe=Pe:qe=function(){return 0},this.comboSpacing=qe;var lt=e.comboPadding,ze;Wr(lt)?ze=function(){return lt}:bu(lt)?ze=function(){return Math.max.apply(null,lt)}:Th(lt)?ze=lt:ze=function(){return 0},this.comboPadding=ze;var ht=this.linkDistance,nn;ht||(ht=10),Wr(ht)?nn=function(sn){return ht}:nn=ht,this.linkDistance=nn;var Tn=this.edgeStrength,Kn;Tn||(Tn=1),Wr(Tn)?Kn=function(sn){return Tn}:Kn=Tn,this.edgeStrength=Kn;var zn=this.nodeStrength,An;zn||(zn=30),Wr(zn)?An=function(sn){return zn}:An=zn,this.nodeStrength=An}},{key:"initPos",value:function(e){var t=this,a=t.nodes;a.forEach(function(s,u){var l=s.comboId,c=e[l];l&&c?(s.x=c.cx+100/(u+1),s.y=c.cy+100/(u+1)):(s.x=100/(u+1),s.y=100/(u+1))})}},{key:"getComboMap",value:function(){var e=this,t=e.nodeMap,a=e.comboTrees,s=e.oriComboMap,u={};return(a||[]).forEach(function(l){var c=[];z2(l,function(f){if(f.itemType==="node"||!s[f.id])return!0;if(u[f.id]===void 0){var d={id:f.id,name:f.id,cx:0,cy:0,count:0,depth:e.oriComboMap[f.id].depth||0,children:[]};u[f.id]=d}var v=f.children;v&&v.forEach(function(C){if(!u[C.id]&&!t[C.id])return!0;c.push(C)});var m=u[f.id];if(m.cx=0,m.cy=0,c.length===0){m.empty=!0;var y=s[f.id];m.cx=y.x,m.cy=y.y}return c.forEach(function(C){if(m.count++,C.itemType!=="node"){var O=u[C.id];Wr(O.cx)&&(m.cx+=O.cx),Wr(O.cy)&&(m.cy+=O.cy);return}var x=t[C.id];!x||(Wr(x.x)&&(m.cx+=x.x),Wr(x.y)&&(m.cy+=x.y))}),m.cx/=m.count||1,m.cy/=m.count||1,m.children=c,!0})}),u}},{key:"applyComboCenterForce",value:function(e){var t=this,a=t.gravity,s=t.comboGravity||a,u=this.alpha,l=t.comboTrees,c=t.indexMap,f=t.nodeMap,d=t.comboMap;(l||[]).forEach(function(v){z2(v,function(m){if(m.itemType==="node")return!0;var y=d[m.id];if(!y)return!0;var C=d[m.id],O=(C.depth+1)/10*.5,x=C.cx,T=C.cy;return C.cx=0,C.cy=0,C.children.forEach(function(L){if(L.itemType!=="node"){var _=d[L.id];_&&Wr(_.cx)&&(C.cx+=_.cx),_&&Wr(_.cy)&&(C.cy+=_.cy);return}var z=f[L.id],Q=z.x-x||.005,q=z.y-T||.005,ye=Math.sqrt(Q*Q+q*q),Ce=c[z.id],Ae=s*u/ye*O;e[Ce].x-=Q*Ae,e[Ce].y-=q*Ae,Wr(z.x)&&(C.cx+=z.x),Wr(z.y)&&(C.cy+=z.y)}),C.cx/=C.count||1,C.cy/=C.count||1,!0})})}},{key:"applyCalculate",value:function(e){var t=this,a=t.comboMap,s=t.nodes,u={};s.forEach(function(c,f){s.forEach(function(d,v){if(!(f<v)){var m=c.x-d.x||.005,y=c.y-d.y||.005,C=m*m+y*y,O=Math.sqrt(C);C<1&&(C=O),u["".concat(c.id,"-").concat(d.id)]={vx:m,vy:y,vl2:C,vl:O},u["".concat(d.id,"-").concat(c.id)]={vl2:C,vl:O,vx:-m,vy:-y}}})}),t.updateComboSizes(a),t.calRepulsive(e,u),t.calAttractive(e,u);var l=t.preventComboOverlap;l&&t.comboNonOverlapping(e,a)}},{key:"updateComboSizes",value:function(e){var t=this,a=t.comboTrees,s=t.nodeMap,u=t.nodeSize,l=t.comboSpacing,c=t.comboPadding;(a||[]).forEach(function(f){var d=[];z2(f,function(v){if(v.itemType==="node")return!0;var m=e[v.id];if(!m)return!1;var y=v.children;y&&y.forEach(function(x){!e[x.id]&&!s[x.id]||d.push(x)}),m.minX=Infinity,m.minY=Infinity,m.maxX=-Infinity,m.maxY=-Infinity,d.forEach(function(x){if(x.itemType!=="node")return!0;var T=s[x.id];if(!T)return!0;var L=u(T),_=T.x-L,z=T.y-L,Q=T.x+L,q=T.y+L;m.minX>_&&(m.minX=_),m.minY>z&&(m.minY=z),m.maxX<Q&&(m.maxX=Q),m.maxY<q&&(m.maxY=q)});var C=t.oriComboMap[v.id].size||10;bu(C)&&(C=C[0]);var O=Math.max(m.maxX-m.minX,m.maxY-m.minY,C);return m.r=O/2+l(m)/2+c(m),!0})})}},{key:"comboNonOverlapping",value:function(e,t){var a=this,s=a.comboTree,u=a.comboCollideStrength,l=a.indexMap,c=a.nodeMap;z2(s,function(f){if(!t[f.id]&&!c[f.id]&&f.id!=="comboTreeRoot")return!1;var d=f.children;return d&&d.length>1&&d.forEach(function(v,m){if(v.itemType==="node")return!1;var y=t[v.id];!y||d.forEach(function(C,O){if(m<=O||C.itemType==="node")return!1;var x=t[C.id];if(!x)return!1;var T=y.cx-x.cx||.005,L=y.cy-x.cy||.005,_=T*T+L*L,z=y.r||1,Q=x.r||1,q=z+Q,ye=Q*Q,Ce=z*z;if(_<q*q){var Ae=v.children;if(!Ae||Ae.length===0)return!1;var Pe=C.children;if(!Pe||Pe.length===0)return!1;var qe=Math.sqrt(_),lt=(q-qe)/qe*u,ze=T*lt,ht=L*lt,nn=ye/(Ce+ye),Tn=1-nn;Ae.forEach(function(Kn){if(Kn.itemType!=="node")return!1;if(!!c[Kn.id]){var zn=l[Kn.id];Pe.forEach(function(An){if(An.itemType!=="node"||!c[An.id])return!1;var br=l[An.id];e[zn].x+=ze*nn,e[zn].y+=ht*nn,e[br].x-=ze*Tn,e[br].y-=ht*Tn})}})}})}),!0})}},{key:"calRepulsive",value:function(e,t){var a=this,s=a.nodes,u=a.width*a.optimizeRangeFactor,l=a.nodeStrength,c=a.alpha,f=a.nodeCollideStrength,d=a.preventNodeOverlap,v=a.nodeSize,m=a.nodeSpacing,y=a.depthRepulsiveForceScale,C=a.center;s.forEach(function(O,x){if(!(!O.x||!O.y)){if(C){var T=a.gravity,L=O.x-C[0]||.005,_=O.y-C[1]||.005,z=Math.sqrt(L*L+_*_);e[x].x-=L*T*c/z,e[x].y-=_*T*c/z}s.forEach(function(Q,q){if(x!==q&&!(!Q.x||!Q.y)){var ye=t["".concat(O.id,"-").concat(Q.id)],Ce=ye.vl2,Ae=ye.vl;if(!(Ae>u)){var Pe=t["".concat(O.id,"-").concat(Q.id)],qe=Pe.vx,lt=Pe.vy,ze=Math.log(Math.abs(Q.depth-O.depth)/10)+1||1;ze=ze<1?1:ze,Q.comboId!==O.comboId&&(ze+=1);var ht=ze?Math.pow(y,ze):1,nn=l(Q)*c/Ce*ht;if(e[x].x+=qe*nn,e[x].y+=lt*nn,x<q&&d){var Tn=v(O)+m(O)||1,Kn=v(Q)+m(Q)||1,zn=Tn+Kn;if(Ce<zn*zn){var An=(zn-Ae)/Ae*f,br=Kn*Kn,sn=br/(Tn*Tn+br),Xn=qe*An,dr=lt*An;e[x].x+=Xn*sn,e[x].y+=dr*sn,sn=1-sn,e[q].x-=Xn*sn,e[q].y-=dr*sn}}}}})}})}},{key:"calAttractive",value:function(e,t){var a=this,s=a.edges,u=a.linkDistance,l=a.alpha,c=a.edgeStrength,f=a.bias,d=a.depthAttractiveForceScale;s.forEach(function(v,m){var y=Hi(v,"source"),C=Hi(v,"target");if(!(!y||!C||y===C)){var O=a.indexMap[y],x=a.indexMap[C],T=a.nodeMap[y],L=a.nodeMap[C];if(!(!T||!L)){var _=T.depth===L.depth?0:Math.log(Math.abs(T.depth-L.depth)/10);T.comboId===L.comboId&&(_=_/2);var z=_?Math.pow(d,_):1;if(T.comboId!==L.comboId&&z===1?z=d/2:T.comboId===L.comboId&&(z=2),!(!Wr(L.x)||!Wr(T.x)||!Wr(L.y)||!Wr(T.y))){var Q=t["".concat(C,"-").concat(y)],q=Q.vl,ye=Q.vx,Ce=Q.vy,Ae=(q-u(v))/q*l*c(v)*z,Pe=ye*Ae,qe=Ce*Ae,lt=f[m];e[x].x-=Pe*lt,e[x].y-=qe*lt,e[O].x+=Pe*(1-lt),e[O].y+=qe*(1-lt)}}}})}},{key:"getType",value:function(){return"comboForce"}}]),r}(Iu),JK=function(){function o(i){Object(me.a)(this,o),this.id=i.id||0,this.rx=i.rx,this.ry=i.ry,this.fx=0,this.fy=0,this.mass=i.mass,this.degree=i.degree,this.g=i.g||0}return Object(ue.a)(o,[{key:"distanceTo",value:function(r){var n=this.rx-r.rx,e=this.ry-r.ry;return Math.hypot(n,e)}},{key:"setPos",value:function(r,n){this.rx=r,this.ry=n}},{key:"resetForce",value:function(){this.fx=0,this.fy=0}},{key:"addForce",value:function(r){var n=r.rx-this.rx,e=r.ry-this.ry,t=Math.hypot(n,e);t=t<1e-4?1e-4:t;var a=this.g*(this.degree+1)*(r.degree+1)/t;this.fx+=a*n/t,this.fy+=a*e/t}},{key:"in",value:function(r){return r.contains(this.rx,this.ry)}},{key:"add",value:function(r){var n=this.mass+r.mass,e=(this.rx*this.mass+r.rx*r.mass)/n,t=(this.ry*this.mass+r.ry*r.mass)/n,a=this.degree+r.degree,s={rx:e,ry:t,mass:n,degree:a};return new o(s)}}]),o}(),ZK=function(){function o(i){Object(me.a)(this,o),this.xmid=i.xmid,this.ymid=i.ymid,this.length=i.length,this.massCenter=i.massCenter||[0,0],this.mass=i.mass||1}return Object(ue.a)(o,[{key:"getLength",value:function(){return this.length}},{key:"contains",value:function(r,n){var e=this.length/2;return r<=this.xmid+e&&r>=this.xmid-e&&n<=this.ymid+e&&n>=this.ymid-e}},{key:"NW",value:function(){var r=this.xmid-this.length/4,n=this.ymid+this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},a=new o(t);return a}},{key:"NE",value:function(){var r=this.xmid+this.length/4,n=this.ymid+this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},a=new o(t);return a}},{key:"SW",value:function(){var r=this.xmid-this.length/4,n=this.ymid-this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},a=new o(t);return a}},{key:"SE",value:function(){var r=this.xmid+this.length/4,n=this.ymid-this.length/4,e=this.length/2,t={xmid:r,ymid:n,length:e},a=new o(t);return a}}]),o}(),QK=function(){function o(i){Object(me.a)(this,o),this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,i!=null&&(this.quad=i)}return Object(ue.a)(o,[{key:"insert",value:function(r){if(this.body==null){this.body=r;return}this._isExternal()?(this.quad&&(this.NW=new o(this.quad.NW()),this.NE=new o(this.quad.NE()),this.SW=new o(this.quad.SW()),this.SE=new o(this.quad.SE())),this._putBody(this.body),this._putBody(r),this.body=this.body.add(r)):(this.body=this.body.add(r),this._putBody(r))}},{key:"_putBody",value:function(r){!this.quad||(r.in(this.quad.NW())&&this.NW?this.NW.insert(r):r.in(this.quad.NE())&&this.NE?this.NE.insert(r):r.in(this.quad.SW())&&this.SW?this.SW.insert(r):r.in(this.quad.SE())&&this.SE&&this.SE.insert(r))}},{key:"_isExternal",value:function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}},{key:"updateForce",value:function(r){if(!(this.body==null||r===this.body))if(this._isExternal())r.addForce(this.body);else{var n=this.quad?this.quad.getLength():0,e=this.body.distanceTo(r);n/e<this.theta?r.addForce(this.body):(this.NW&&this.NW.updateForce(r),this.NE&&this.NE.updateForce(r),this.SW&&this.SW.updateForce(r),this.SE&&this.SE.updateForce(r))}}}]),o}(),qK=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.center=[0,0],e.width=300,e.height=300,e.nodes=[],e.edges=[],e.kr=5,e.kg=1,e.mode="normal",e.preventOverlap=!1,e.dissuadeHubs=!1,e.barnesHut=void 0,e.maxIteration=0,e.ks=.1,e.ksmax=10,e.tao=.1,e.onLayoutEnd=function(){},e.prune=void 0,e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.onLayoutEnd,s=e.prune,u=e.maxIteration;!e.width&&typeof window!="undefined"&&(e.width=window.innerWidth),!e.height&&typeof window!="undefined"&&(e.height=window.innerHeight);for(var l=[],c=t.length,f=0;f<c;f+=1){var d=t[f],v=10,m=10;Wr(d.size)&&(v=d.size,m=d.size),bu(d.size)?(isNaN(d.size[0])||(v=d.size[0]),isNaN(d.size[1])||(m=d.size[1])):_f(d.size)&&(v=d.size.width,m=d.size.height),e.getWidth&&!isNaN(e.getWidth(d))&&(m=e.getWidth(d)),e.getHeight&&!isNaN(e.getHeight(d))&&(v=e.getHeight(d));var y=Math.max(v,m);l.push(y)}e.barnesHut===void 0&&c>250&&(e.barnesHut=!0),e.prune===void 0&&c>100&&(e.prune=!0),this.maxIteration===0&&!e.prune?(u=250,c<=200&&c>100?u=1e3:c>200&&(u=1200),this.maxIteration=u):this.maxIteration===0&&s&&(u=100,c<=200&&c>100?u=500:c>200&&(u=950),this.maxIteration=u),e.kr||(e.kr=50,c>100&&c<=500?e.kr=20:c>500&&(e.kr=1)),e.kg||(e.kg=20,c>100&&c<=500?e.kg=10:c>500&&(e.kg=1)),this.nodes=e.updateNodesByForces(l),a()}},{key:"updateNodesByForces",value:function(e){for(var t=this,a=t.edges,s=t.maxIteration,u=t.nodes,l=a.filter(function(Ae){var Pe=Hi(Ae,"source"),qe=Hi(Ae,"target");return Pe!==qe}),c=u.length,f=l.length,d=[],v={},m={},y=[],C=0;C<c;C+=1)v[u[C].id]=C,d[C]=0,(u[C].x===void 0||isNaN(u[C].x))&&(u[C].x=Math.random()*1e3),(u[C].y===void 0||isNaN(u[C].y))&&(u[C].y=Math.random()*1e3),y.push({x:u[C].x,y:u[C].y});for(var O=0;O<f;O+=1){for(var x=void 0,T=void 0,L=0,_=0,z=0;z<c;z+=1){var Q=Hi(l[O],"source"),q=Hi(l[O],"target");u[z].id===Q?(x=u[z],L=z):u[z].id===q&&(T=u[z],_=z),m[O]={sourceIdx:L,targetIdx:_}}x&&(d[v[x.id]]+=1),T&&(d[v[T.id]]+=1)}var ye=s;if(u=this.iterate(ye,v,m,f,d,e),t.prune){for(var Ce=0;Ce<f;Ce+=1)d[m[Ce].sourceIdx]<=1?(u[m[Ce].sourceIdx].x=u[m[Ce].targetIdx].x,u[m[Ce].sourceIdx].y=u[m[Ce].targetIdx].y):d[m[Ce].targetIdx]<=1&&(u[m[Ce].targetIdx].x=u[m[Ce].sourceIdx].x,u[m[Ce].targetIdx].y=u[m[Ce].sourceIdx].y);t.prune=!1,t.barnesHut=!1,ye=100,u=this.iterate(ye,v,m,f,d,e)}return u}},{key:"iterate",value:function(e,t,a,s,u,l){for(var c=this,f=c.nodes,d=c.kr,v=c.preventOverlap,m=c.barnesHut,y=f.length,C=0,O=100,x=e,T=50,L=[],_=[],z=[],Q=0;Q<y;Q+=1)if(L[2*Q]=0,L[2*Q+1]=0,m){var q={id:Q,rx:f[Q].x,ry:f[Q].y,mass:1,g:d,degree:u[Q]};z[Q]=new JK(q)}for(;x>0;){for(var ye=0;ye<y;ye+=1)_[2*ye]=L[2*ye],_[2*ye+1]=L[2*ye+1],L[2*ye]=0,L[2*ye+1]=0;L=this.getAttrForces(x,T,s,t,a,u,l,L),m&&(v&&x>T||!v)?L=this.getOptRepGraForces(L,z,u):L=this.getRepGraForces(x,T,L,O,l,u);var Ce=this.updatePos(L,_,C,u);f=Ce.nodes,C=Ce.sg,x--,c.tick&&c.tick()}return f}},{key:"getAttrForces",value:function(e,t,a,s,u,l,c,f){for(var d=this,v=d.nodes,m=d.preventOverlap,y=d.dissuadeHubs,C=d.mode,O=d.prune,x=0;x<a;x+=1){var T=v[u[x].sourceIdx],L=u[x].sourceIdx,_=v[u[x].targetIdx],z=u[x].targetIdx;if(!(O&&(l[L]<=1||l[z]<=1))){var Q=[_.x-T.x,_.y-T.y],q=Math.hypot(Q[0],Q[1]);q=q<1e-4?1e-4:q,Q[0]=Q[0]/q,Q[1]=Q[1]/q,m&&e<t&&(q=q-c[L]-c[z]);var ye=q,Ce=ye;C==="linlog"&&(ye=Math.log(1+q),Ce=ye),y&&(ye=q/l[L],Ce=q/l[z]),m&&e<t&&q<=0?(ye=0,Ce=0):m&&e<t&&q>0&&(ye=q,Ce=q),f[2*s[T.id]]+=ye*Q[0],f[2*s[_.id]]-=Ce*Q[0],f[2*s[T.id]+1]+=ye*Q[1],f[2*s[_.id]+1]-=Ce*Q[1]}}return f}},{key:"getRepGraForces",value:function(e,t,a,s,u,l){for(var c=this,f=c.nodes,d=c.preventOverlap,v=c.kr,m=c.kg,y=c.center,C=c.prune,O=f.length,x=0;x<O;x+=1){for(var T=x+1;T<O;T+=1)if(!(C&&(l[x]<=1||l[T]<=1))){var L=[f[T].x-f[x].x,f[T].y-f[x].y],_=Math.hypot(L[0],L[1]);_=_<1e-4?1e-4:_,L[0]=L[0]/_,L[1]=L[1]/_,d&&e<t&&(_=_-u[x]-u[T]);var z=v*(l[x]+1)*(l[T]+1)/_;d&&e<t&&_<0?z=s*(l[x]+1)*(l[T]+1):d&&e<t&&_===0?z=0:d&&e<t&&_>0&&(z=v*(l[x]+1)*(l[T]+1)/_),a[2*x]-=z*L[0],a[2*T]+=z*L[0],a[2*x+1]-=z*L[1],a[2*T+1]+=z*L[1]}var Q=[f[x].x-y[0],f[x].y-y[1]],q=Math.hypot(Q[0],Q[1]);Q[0]=Q[0]/q,Q[1]=Q[1]/q;var ye=m*(l[x]+1);a[2*x]-=ye*Q[0],a[2*x+1]-=ye*Q[1]}return a}},{key:"getOptRepGraForces",value:function(e,t,a){for(var s=this,u=s.nodes,l=s.kg,c=s.center,f=s.prune,d=u.length,v=9e10,m=-9e10,y=9e10,C=-9e10,O=0;O<d;O+=1)f&&a[O]<=1||(t[O].setPos(u[O].x,u[O].y),u[O].x>=m&&(m=u[O].x),u[O].x<=v&&(v=u[O].x),u[O].y>=C&&(C=u[O].y),u[O].y<=y&&(y=u[O].y));for(var x=Math.max(m-v,C-y),T={xmid:(m+v)/2,ymid:(C+y)/2,length:x,massCenter:c,mass:d},L=new ZK(T),_=new QK(L),z=0;z<d;z+=1)f&&a[z]<=1||t[z].in(L)&&_.insert(t[z]);for(var Q=0;Q<d;Q+=1)if(!(f&&a[Q]<=1)){t[Q].resetForce(),_.updateForce(t[Q]),e[2*Q]-=t[Q].fx,e[2*Q+1]-=t[Q].fy;var q=[u[Q].x-c[0],u[Q].y-c[1]],ye=Math.hypot(q[0],q[1]);ye=ye<1e-4?1e-4:ye,q[0]=q[0]/ye,q[1]=q[1]/ye;var Ce=l*(a[Q]+1);e[2*Q]-=Ce*q[0],e[2*Q+1]-=Ce*q[1]}return e}},{key:"updatePos",value:function(e,t,a,s){for(var u=this,l=u.nodes,c=u.ks,f=u.tao,d=u.prune,v=u.ksmax,m=l.length,y=[],C=[],O=0,x=0,T=0;T<m;T+=1)if(!(d&&s[T]<=1)){var L=[e[2*T]-t[2*T],e[2*T+1]-t[2*T+1]],_=Math.hypot(L[0],L[1]),z=[e[2*T]+t[2*T],e[2*T+1]+t[2*T+1]],Q=Math.hypot(z[0],z[1]);y[T]=_,C[T]=Q/2,O+=(s[T]+1)*y[T],x+=(s[T]+1)*C[T]}var q=a;a=f*x/O,q!==0&&(a=a>1.5*q?1.5*q:a);for(var ye=0;ye<m;ye+=1)if(!(d&&s[ye]<=1)){var Ce=c*a/(1+a*Math.sqrt(y[ye])),Ae=Math.hypot(e[2*ye],e[2*ye+1]);Ae=Ae<1e-4?1e-4:Ae;var Pe=v/Ae;Ce=Ce>Pe?Pe:Ce;var qe=Ce*e[2*ye],lt=Ce*e[2*ye+1];l[ye].x+=qe,l[ye].y+=lt}return{nodes:l,sg:a}}}]),r}(Iu),vC=function(){function o(){Object(me.a)(this,o),this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return Object(ue.a)(o,[{key:"init",value:function(r,n,e){this.cells=[],this.CELL_W=e.CELL_W||o.DEFAULT_CELL_W,this.CELL_H=e.CELL_H||o.DEFAULT_CELL_H,this.columnNum=Math.ceil(r/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),o.MIN_DIST=Math.pow(r,2)+Math.pow(n,2);for(var t=0;t<this.columnNum;t++){for(var a=[],s=0;s<this.rowNum;s++){var u={dx:t,dy:s,x:t*this.CELL_W,y:s*this.CELL_H,occupied:!1};a.push(u)}this.cells.push(a)}}},{key:"findGridByNodeId",value:function(r){for(var n,e,t=0;t<this.columnNum;t++)for(var a=0;a<this.rowNum;a++)if(this.cells[t][a].node&&((e=(n=this.cells[t][a])===null||n===void 0?void 0:n.node)===null||e===void 0?void 0:e.id)===r)return{column:t,row:a};return null}},{key:"sqdist",value:function(r,n){return Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2)}},{key:"occupyNearest",value:function(r){for(var n=o.MIN_DIST,e,t=null,a=0;a<this.columnNum;a++)for(var s=0;s<this.rowNum;s++)!this.cells[a][s].occupied&&(e=this.sqdist(r,this.cells[a][s]))<n&&(n=e,t=this.cells[a][s]);return t&&(t.occupied=!0),t}},{key:"insertColumn",value:function(r,n){if(!(n<=0)){for(var e=0;e<n;e++){this.cells[e+this.columnNum]=[];for(var t=0;t<this.rowNum;t++)this.cells[e+this.columnNum][t]={dx:e,dy:t,x:e*this.CELL_W,y:t*this.CELL_H,occupied:!1,node:null}}for(var a=this.columnNum-1;a>r;a--)for(var s=0;s<this.rowNum;s++)this.cells[a+n][s]=Object.assign(Object.assign({},this.cells[a][s]),{x:(a+n)*this.CELL_W,y:s*this.CELL_H}),this.cells[a][s]={x:a*this.CELL_W,y:s*this.CELL_H,occupied:!0,node:null};for(var u=0;u<this.additionColumn.length;u++)this.additionColumn[u]>=r&&(this.additionColumn[u]+=n);for(var l=0;l<n;l++)this.additionColumn.push(r+l+1);this.columnNum+=n}}},{key:"insertRow",value:function(r,n){if(!(n<=0)){for(var e=0;e<n;e++)for(var t=0;t<this.columnNum;t++)this.cells[t][e+this.rowNum]={dx:t,dy:e,x:t*this.CELL_W,y:e*this.CELL_H,occupied:!1,node:null};for(var a=0;a<this.columnNum;a++)for(var s=this.rowNum-1;s>r;s--)this.cells[a][s+n]=Object.assign(Object.assign({},this.cells[a][s]),{dx:a,dy:s+n,x:a*this.CELL_W,y:(s+n)*this.CELL_H}),this.cells[a][s]={dx:a,dy:s,x:a*this.CELL_W,y:s*this.CELL_H,occupied:!1,node:null};for(var u=0;u<this.additionRow.length;u++)this.additionRow[u]>=r&&(this.additionRow[u]+=n);for(var l=0;l<n;l++)this.additionRow.push(r+l+1);this.rowNum+=n}}},{key:"getNodes",value:function(){for(var r=[],n=0;n<this.columnNum;n++)for(var e=0;e<this.rowNum;e++)this.cells[n][e].node&&r.push(this.cells[n][e]);return r}}]),o}();vC.MIN_DIST=50,vC.DEFAULT_CELL_W=80,vC.DEFAULT_CELL_H=80;function eX(o,i){if(!o.nodes||o.nodes.length===0)return o;var r=i.width,n=i.height,e=i.nodeMinGap,t=1e4,a=1e4;o.nodes.forEach(function(q){var ye=q.size[0]||50,Ce=q.size[1]||50;t=Math.min(ye,t),a=Math.min(Ce,a)});var s=new vC;s.init(r,n,{CELL_H:a,CELL_W:t}),o.nodes.forEach(function(q){var ye=s.occupyNearest(q);ye&&(ye.node={id:q.id,size:q.size},q.x=ye.x,q.y=ye.y,q.dx=ye.dx,q.dy=ye.dy)});for(var u=0;u<o.nodes.length;u++){var l=o.nodes[u],c=s.findGridByNodeId(l.id);if(!c)throw new Error("can not find node cell");var f=c.column,d=c.row;if(l.size[0]+e>t){for(var v=Math.ceil((l.size[0]+e)/t)-1,m=v,y=0;y<v;y++){var C=s.additionColumn.indexOf(f+y+1)>-1;if(C&&!s.cells[f+y+1][d].node)m--;else break}s.insertColumn(f,m)}if(l.size[1]+e>a){for(var O=Math.ceil((l.size[1]+e)/a)-1,x=O,T=0;T<O;T++){var L=s.additionRow.indexOf(d+T+1)>-1;if(L&&!s.cells[f][d+T+1].node)x--;else break}s.insertRow(d,x)}}for(var _=0;_<s.columnNum;_++)for(var z=function(ye){var Ce=s.cells[_][ye];if(Ce.node){var Ae=o.nodes.find(function(Pe){var qe;return Pe.id===((qe=Ce==null?void 0:Ce.node)===null||qe===void 0?void 0:qe.id)});Ae&&(Ae.x=Ce.x+Ae.size[0]/2,Ae.y=Ce.y+Ae.size[1]/2)}},Q=0;Q<s.rowNum;Q++)z(Q)}var kN=1200,DN=800,pC=1e7,sy=10,IN=3.141592653589793,QA=1.5707963267948966,tX=IN*.375,nX=IN*.625,gC=new Map,rX=10,aX=10,qA=.8,RN=.1,iX=.5;function oX(o,i,r){var n=o.x-o.size[0]/2,e=o.y-o.size[1]/2,t=o.x+o.size[0]/2,a=o.y+o.size[1]/2,s=i.x-i.size[0]/2,u=i.y-i.size[1]/2,l=i.x+i.size[0]/2,c=i.y+i.size[1]/2,f=o.x,d=o.y,v=i.x,m=i.y,y=v-f,C=Math.atan2(y,m-d),O=0,x=0,T=0,L=0;C>QA?(x=e-c,O=s-t,T=parseFloat(x?(x/Math.cos(C)).toFixed(2):O.toFixed(2)),L=parseFloat(O?(O/Math.sin(C)).toFixed(2):x.toFixed(2))):0<C&&C<=QA?(x=u-a,O=s-t,x>O?T=L=parseFloat(x?(x/Math.cos(C)).toFixed(2):O.toFixed(2)):T=L=parseFloat(O?(O/Math.sin(C)).toFixed(2):x.toFixed(2))):C<-QA?(x=e-c,O=-(l-n),x>O?T=L=parseFloat(x?(x/Math.cos(C)).toFixed(2):O.toFixed(2)):T=L=parseFloat(O?(O/Math.sin(C)).toFixed(2):x.toFixed(2))):(x=u-a,Math.abs(y)>(t-n)/2?O=n-l:O=y,x>O?T=L=parseFloat(x?(x/Math.cos(C)).toFixed(2):O.toFixed(2)):T=L=parseFloat(O&&C!==0?(O/Math.sin(C)).toFixed(2):x.toFixed(2)));var _=parseFloat(C.toFixed(2)),z=r;return r&&(z=tX<_&&_<nX),{distance:Math.abs(T<L?T:L),isHoriz:z}}function NN(o,i){var r=gC.get(o.id)||[],n=r.find(function(ht){return ht.source===i.id||ht.target===i.id}),e=o.size[0]*o.size[1],t=i.size[0]*i.size[1],a=e>t?i:o,s=e>t?o:i,u=a.x-a.size[0]/2,l=a.y-a.size[1]/2,c=a.x+a.size[0]/2,f=a.y+a.size[1]/2,d=s.x-s.size[0]/2,v=s.y-s.size[1]/2,m=s.x+s.size[0]/2,y=s.y+s.size[1]/2,C=a.x,O=a.y,x=s.x,T=s.y,L=c>=d&&m>=u&&f>=v&&y>=l,_=0,z=0;if(L){z=Math.sqrt(Math.pow(x-C,2)+Math.pow(T-O,2));var Q=u>d?u:d,q=l>v?l:v,ye=c<m?c:m,Ce=f<y?f:y,Ae=ye-Q,Pe=Ce-q,qe=Ae*Pe;z===0&&(z=1e-7),_=sy*1/z*100+qe,_*=pC}else{var lt=!1,ze=oX(a,s,lt);z=ze.distance,lt=ze.isHoriz,z<=sy?z!==0?n?_+=sy+pC*1/z:_+=sy+pC*sy/z:_+=pC:(_+=z,n&&(_+=z*z))}return _}function jN(o){for(var i=0,r=0;r<o.length;r++){var n=o[r];(n.x<0||n.y<0||n.x>kN||n.y>DN)&&(i+=1e12);for(var e=r+1;e<o.length;e++)i+=NN(n,o[e])}return i}function sX(o,i,r,n){var e=new Map;r.forEach(function(C,O){e.set(C.id,C)});var t=n.filter(function(C){return C.source===o.id||C.target===o.id})||[],a=[];t.forEach(function(C){var O=C.source===o.id?C.target:C.source,x=e.get(O);x&&a.push(x)});for(var s=!0,u=0;u<a.length;u++){var l=a[u],c=Math.atan((o.y-l.y)/(l.x-o.y))*180,f=Math.atan((i.y-l.y)/(l.x-i.y))*180,d=c<30||c>150,v=f<30||f>150,m=c>70&&c<110,y=f>70&&f<110;if(d&&!v||c*f<0){s=!1;break}else if(m&&!y||c*f<0){s=!1;break}else if((l.x-o.x)*(l.x-i.x)<0){s=!1;break}else if((l.y-o.y)*(l.y-i.y)<0){s=!1;break}}return s}function uX(o,i){for(var r=!1,n=1,e=rX*n,t=aX*n,a=[e,-e,0,0],s=[0,0,t,-t],u=0;u<o.length;++u)for(var l=o[u],c=LN(l,o),f=0;f<a.length;f++){var d=sX(l,{x:l.x+a[f],y:l.y+s[f]},o,i);if(d){l.x+=a[f],l.y+=s[f];var v=LN(l,o),m=Math.random();v<c||m<qA&&m>RN?(c=v,r=!0):(l.x-=a[f],l.y-=s[f])}}return qA>RN&&(qA*=iX),r?jN(o):0}function LN(o,i){var r=0;(o.x<0||o.y<0||o.x+o.size[0]+20>kN||o.y+o.size[1]+20>DN)&&(r+=1e12);for(var n=0;n<i.length;++n)o.id!==i[n].id&&(r+=NN(o,i[n]));return r}function lX(o,i){if(o.length===0)return{nodes:o,edges:i};o.forEach(function(l){var c=i.filter(function(f){return f.source===l.id||f.target===l.id});gC.set(l,c)}),o.sort(function(l,c){var f,d;return((f=gC.get(l.id))===null||f===void 0?void 0:f.length)-((d=gC.get(c.id))===null||d===void 0?void 0:d.length)});for(var r=jN(o),n=20,e=1,t=0,a=50,s=0;n>0&&(s++,!(s>=a));){var u=uX(o,i);u!==0&&(t=u),e=t-r,r=t,e===0?--n:n=20}return o.forEach(function(l){l.x=l.x-l.size[0]/2,l.y=l.y-l.size[1]/2}),{nodes:o,edges:i}}var cX=lX;function fX(o,i){var r=o.nodes,n=o.edges,e=i.width,t=i.height;if(!(r==null?void 0:r.length))return Promise.resolve();var a=[];r.forEach(function(y){var C=n.filter(function(x){return x.source===y.id||x.target===y.id});if(C.length>1){var O=Object.assign({},y);delete O.size,a.push(O)}});var s=[];n.forEach(function(y){var C=a.find(function(x){return x.id===y.source}),O=a.find(function(x){return x.id===y.target});C&&O&&s.push(y)});var u=new T3({type:"dagre",ranksep:i.nodeMinGap,nodesep:i.nodeMinGap}),l=u.layout({nodes:a,edges:s}),c=l.nodes;r.forEach(function(y){var C=(c||[]).find(function(O){return O.id===y.id});y.x=(C==null?void 0:C.x)||e/2,y.y=(C==null?void 0:C.y)||t/2});var f=JSON.parse(JSON.stringify(r)),d=JSON.parse(JSON.stringify(n)),v=hA().nodes(f).force("link",$2(d).id(function(y){return y.id}).distance(function(y){var C=s.find(function(O){return O.source===y.source&&O.target===y.target});return C?30:20})).force("charge",vA()).force("center",zD(e/2,t/2)).force("x",HD(e/2)).force("y",WD(t/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),m=new Promise(function(y){v.on("end",function(){r.forEach(function(z){var Q=f.find(function(q){return q.id===z.id});Q&&(z.x=Q.x,z.y=Q.y)});var C=Math.min.apply(Math,Object(We.a)(r.map(function(z){return z.x}))),O=Math.max.apply(Math,Object(We.a)(r.map(function(z){return z.x}))),x=Math.min.apply(Math,Object(We.a)(r.map(function(z){return z.y}))),T=Math.max.apply(Math,Object(We.a)(r.map(function(z){return z.y}))),L=e/(O-C),_=t/(T-x);r.forEach(function(z){z.x!==void 0&&L<1&&(z.x=(z.x-C)*L),z.y!==void 0&&_<1&&(z.y=(z.y-x)*_)}),r.forEach(function(z){z.sizeTemp=z.size,z.size=[10,10]}),cX(r,n),r.forEach(function(z){z.size=z.sizeTemp||[],delete z.sizeTemp}),eX({nodes:r,edges:n},i),y()})});return m}var dX=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(n){var e;return Object(me.a)(this,r),e=i.call(this),e.width=300,e.height=300,e.nodeMinGap=50,e.onLayoutEnd=function(){},n&&e.updateCfg(n),e}return Object(ue.a)(r,[{key:"getDefaultCfg",value:function(){return{width:300,height:300,nodeMinGap:50}}},{key:"execute",value:function(){var e=this,t=e.nodes,a=e.edges;return t==null||t.forEach(function(s){s.size||(s.size=[50,50])}),fX({nodes:t,edges:a},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){e.onLayoutEnd&&e.onLayoutEnd()})}},{key:"getType",value:function(){return"er"}}]),r}(Iu),Nq=function(){function o(i){Object(me.a)(this,o);var r=r7(i.type);this.layoutInstance=new r(i)}return Object(ue.a)(o,[{key:"layout",value:function(r){return this.layoutInstance.layout(r)}},{key:"updateCfg",value:function(r){this.layoutInstance.updateCfg(r)}},{key:"init",value:function(r){this.layoutInstance.init(r)}},{key:"execute",value:function(){this.layoutInstance.execute()}},{key:"getDefaultCfg",value:function(){return this.layoutInstance.getDefaultCfg()}},{key:"destroy",value:function(){return this.layoutInstance.destroy()}}]),o}(),hX={force:U7,fruchterman:FH,forceAtlas2:qK,gForce:o7,dagre:T3,circular:X7,radial:NH,concentric:jH,grid:a7,mds:LH,comboForce:YK,random:i7,"gForce-gpu":XK,"fruchterman-gpu":WK,er:dX},mC;(function(o){o.command=di.GRAPH_LAYOUT,o.hookKey="graphLayout"})(mC||(mC={}));var uy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.graphLayout.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O;return Object(D.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return v=f.layoutType,m=f.layoutOptions,y=f.customLayout,C=function(_){var z=hX[v],Q=new z(Object.assign({},m));return Q.layout(_)},O=y||C,T.next=5,O(f.graphData);case 5:return T.abrupt("return",{graphData:f.graphData});case 6:case"end":return T.stop()}},d)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],uy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],uy.prototype,"init",null),uy=$e([Object(he.injectable)({token:{token:gi,named:mC.command.id}})],uy);var yC;(function(o){function i(n,e){return Object(Jc.isEqual)(n,e)}o.isNodeEqual=i;function r(n,e){return Object(Jc.isEqual)(n,e)}o.isEdgeEqual=r})(yC||(yC={}));var bC;(function(o){o.command=di.GRAPH_RENDER,o.hookKey="graphRender"})(bC||(bC={}));var ly=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.graphRender.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O,x,T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,this.ctx.getX6Graph();case 2:return v=_.sent,_.next=5,this.ctx.getGraphMeta();case 5:return m=_.sent,y=f.beforeRender,C=f.graphData,O=f.isNodeEqual,x=f.isEdgeEqual,T=f.afterRender,y&&y(m),_.next=10,this.doLoadGraph(v,C,O,x);case 10:return T&&T(C,m),_.abrupt("return",{});case 12:case"end":return _.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))},this.doLoadGraph=function(r,n,e,t){return pe(i,void 0,void 0,Object(D.a)().mark(function a(){var s=this,u,l,c,f,d,v,m,y,C,O,x,T,L,_,z,Q,q,ye,Ce,Ae,Pe,qe,lt,ze,ht,nn,Tn,Kn,zn,An;return Object(D.a)().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:(r==null?void 0:r.isFrozen())||r==null||r.freeze(),u=this.ctx.getCommands(),l=this.graphDataDiff(r,n,e,t),c=l.addNodeConfigs,f=l.addEdgeConfigs,d=l.removeNodes,v=l.removeEdges,m=l.updateNodes,y=l.updateEdges,C=Object(Bt.a)(m),sn.prev=4,C.s();case 6:if((O=C.n()).done){sn.next=13;break}return x=O.value,T=x==null?void 0:x.getData(),sn.next=11,u.executeCommand(no.UPDATE_NODE.id,{nodeConfig:T});case 11:sn.next=6;break;case 13:sn.next=18;break;case 15:sn.prev=15,sn.t0=sn.catch(4),C.e(sn.t0);case 18:return sn.prev=18,C.f(),sn.finish(18);case 21:L=Object(Bt.a)(y),sn.prev=22,L.s();case 24:if((_=L.n()).done){sn.next=31;break}return z=_.value,Q=z==null?void 0:z.getData(),sn.next=29,u.executeCommand(Bo.UPDATE_EDGE.id,{edgeConfig:Q});case 29:sn.next=24;break;case 31:sn.next=36;break;case 33:sn.prev=33,sn.t1=sn.catch(22),L.e(sn.t1);case 36:return sn.prev=36,L.f(),sn.finish(36);case 39:q=Object(Bt.a)(c),sn.prev=40,q.s();case 42:if((ye=q.n()).done){sn.next=48;break}return Ce=ye.value,sn.next=46,u.executeCommand(no.ADD_NODE.id,{nodeConfig:Ce,options:{isRenderGraph:!0}},{name:"remove servcie",handler:function(dr){return pe(s,void 0,void 0,Object(D.a)().mark(function ga(){return Object(D.a)().wrap(function(Ta){for(;;)switch(Ta.prev=Ta.next){case 0:delete dr.createNodeService;case 1:case"end":return Ta.stop()}},ga)}))}});case 46:sn.next=42;break;case 48:sn.next=53;break;case 50:sn.prev=50,sn.t2=sn.catch(40),q.e(sn.t2);case 53:return sn.prev=53,q.f(),sn.finish(53);case 56:return sn.next=58,u.executeCommand(Ws.INIT_GROUP.id,{graphData:{nodes:c,edges:[]}});case 58:Ae=Object(Bt.a)(f),sn.prev=59,Ae.s();case 61:if((Pe=Ae.n()).done){sn.next=67;break}return qe=Pe.value,sn.next=65,u.executeCommand(Bo.ADD_EDGE.id,{edgeConfig:qe,options:{isRenderGraph:!0}},{name:"remove servcie",handler:function(dr){return pe(s,void 0,void 0,Object(D.a)().mark(function ga(){return Object(D.a)().wrap(function(Ta){for(;;)switch(Ta.prev=Ta.next){case 0:delete dr.createEdgeService;case 1:case"end":return Ta.stop()}},ga)}))}});case 65:sn.next=61;break;case 67:sn.next=72;break;case 69:sn.prev=69,sn.t3=sn.catch(59),Ae.e(sn.t3);case 72:return sn.prev=72,Ae.f(),sn.finish(72);case 75:lt=Object(Bt.a)(d),sn.prev=76,lt.s();case 78:if((ze=lt.n()).done){sn.next=90;break}if(ht=ze.value,nn=ht==null?void 0:ht.getData(),!nn.isGroup){sn.next=86;break}return sn.next=84,u.executeCommand(Ws.DEL_GROUP.id,{nodeConfig:nn});case 84:sn.next=88;break;case 86:return sn.next=88,u.executeCommand(no.DEL_NODE.id,{nodeConfig:nn});case 88:sn.next=78;break;case 90:sn.next=95;break;case 92:sn.prev=92,sn.t4=sn.catch(76),lt.e(sn.t4);case 95:return sn.prev=95,lt.f(),sn.finish(95);case 98:Tn=Object(Bt.a)(v),sn.prev=99,Tn.s();case 101:if((Kn=Tn.n()).done){sn.next=108;break}return zn=Kn.value,An=zn==null?void 0:zn.getData(),sn.next=106,u.executeCommand(Bo.DEL_EDGE.id,{edgeConfig:An});case 106:sn.next=101;break;case 108:sn.next=113;break;case 110:sn.prev=110,sn.t5=sn.catch(99),Tn.e(sn.t5);case 113:return sn.prev=113,Tn.f(),sn.finish(113);case 116:(r==null?void 0:r.isFrozen())&&(r==null||r.unfreeze());case 117:case"end":return sn.stop()}},a,this,[[4,15,18,21],[22,33,36,39],[40,50,53,56],[59,69,72,75],[76,92,95,98],[99,110,113,116]])}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}},{key:"graphDataDiff",value:function(r,n,e,t){var a=n.nodes,s=n.edges,u=[];a.forEach(function(x){var T=r.getCellById(x==null?void 0:x.id);T||u.push(x)});var l=[],c=[],f=[],d=r.getNodes();d.forEach(function(x){var T=a.find(function(_){return(_==null?void 0:_.id)===(x==null?void 0:x.id)});if(!T)f.push(x);else{var L=!0;e?L=e(x==null?void 0:x.data,T):(x==null?void 0:x.data)&&T&&(L=yC.isNodeEqual(x==null?void 0:x.data,T)),L||x.setData(T,{deep:!1}),L===!0?l.push(x):c.push(x)}});var v=[];s.forEach(function(x){var T=r.getCellById(x==null?void 0:x.id);T||v.push(x)});var m=[],y=[],C=[],O=r.getEdges();return O.forEach(function(x){var T=s.find(function(_){return(_==null?void 0:_.id)===(x==null?void 0:x.id)});if(!T)C.push(x);else{var L=!0;t?L=t(x==null?void 0:x.data,T):(x==null?void 0:x.data)&&T&&(L=yC.isEdgeEqual(x==null?void 0:x.data,T)),L||x.setData(T,{deep:!1}),L===!0?m.push(x):y.push(x)}}),{addNodeConfigs:u,addEdgeConfigs:v,retainNodes:l,retainEdges:m,removeNodes:f,removeEdges:C,updateNodes:c,updateEdges:y}}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],ly.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],ly.prototype,"init",null),ly=$e([Object(he.injectable)({token:{token:gi,named:bC.command.id}})],ly);var CC;(function(o){o.command=di.GRAPH_RESIZE,o.hookKey="graphResize"})(CC||(CC={}));var cy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),v.next=4,this.ctx.getGraphConfig();case 4:return u=v.sent,l=u.rootContainer.clientHeight,c=u.rootContainer.clientWidth,v.next=9,s.graphResize.call(t,function(m){return pe(n,void 0,void 0,Object(D.a)().mark(function y(){var C,O,x,T,L;return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.ctx.getX6Graph();case 2:return C=z.sent,O=m.width,x=O===void 0?c:O,T=m.height,L=T===void 0?l:T,C==null||C.resize(x,L),z.abrupt("return",{});case 6:case"end":return z.stop()}},y,this)}))},a);case 9:return f=v.sent,this.ctx.setResult(f),v.abrupt("return",this);case 12:case"end":return v.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],cy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],cy.prototype,"init",null),cy=$e([Object(he.injectable)({token:{token:gi,named:CC.command.id}})],cy);var EC;(function(o){o.command=di.GRAPH_FULLSCREEN,o.hookKey="graphFullscreen"})(EC||(EC={}));var fy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),d.next=4,this.ctx.getGraphConfig();case 4:if(u=d.sent,l=u.appContainer,l){d.next=8;break}return d.abrupt("return");case 8:return d.next=10,s.graphFullscreen.call(t,function(){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m,y,C;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return C=!1,document.fullscreenElement?(y=document.exitFullscreen)===null||y===void 0||y.call(document):((m=l.requestFullscreen)===null||m===void 0||m.call(l),C=!0),x.abrupt("return",{fulllscreen:C});case 3:case"end":return x.stop()}},v)}))},a);case 10:return c=d.sent,this.ctx.setResult(c),d.abrupt("return",this);case 13:case"end":return d.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],fy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],fy.prototype,"init",null),fy=$e([Object(he.injectable)({token:{token:gi,named:EC.command.id}})],fy);var dy;(function(o){o.command=di.GRAPH_ZOOM,o.MAX_SCALE=1.5,o.MIN_SCALE=.05,o.defaultZoomOptions={maxScale:o.MAX_SCALE,minScale:o.MIN_SCALE},o.hookKey="graphZoom"})(dy||(dy={}));var hy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.graphZoom.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O,x;return Object(D.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,this.ctx.getX6Graph();case 2:return v=L.sent,m=f.factor,y=f.zoomFitPadding,C=y===void 0?12:y,O=f.zoomOptions,x=O===void 0?dy.defaultZoomOptions:O,typeof m=="number"?v==null||v.zoom(m,x||{}):m==="fit"?v==null||v.zoomToFit(Object.assign(Object.assign({},x),{padding:C})):m==="real"&&(v==null||v.scale(1),v==null||v.centerContent()),L.abrupt("return",{factor:m,zoomFitPadding:C,zoomOptions:x});case 6:case"end":return L.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],hy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],hy.prototype,"init",null),hy=$e([Object(he.injectable)({token:{token:gi,named:dy.command.id}})],hy);var OC;(function(o){o.command=di.GRAPH_COPY,o.hookKey="graphCopySelection"})(OC||(OC={}));var wC=function(){function o(){var i=this;Object(me.a)(this,o),this.parseCells=function(r){r.forEach(function(a){var s=a.getData();if(a.isNode()&&s.isGroup){var u=a.getChildren();u.forEach(function(l){r.push(l)})}});var n=r.filter(function(a){return a.isNode()}).map(function(a){return a.id}),e=r.reduce(function(a,s){if(s.isEdge()){var u=s.getSourceCellId(),l=s.getTargetCellId();u&&l&&n.includes(u)&&n.includes(l)&&a.set(s.id,s)}else a.set(s.id,s);return a},new Map),t=Array.from(e.values());return MD(t)},this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.graphCopySelection.call(a,function(){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,m,y,C,O,x;return Object(D.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,e.getX6Graph();case 2:return m=L.sent,y=m.getSelectedCells(),C=m.getEdges(),O=this.parseCells([].concat(Object(We.a)(y),Object(We.a)(C))),x=window.localStorage.getItem(ng),window.localStorage.setItem(ng,JSON.stringify(O)),e.addUndo(ra.create(function(){return pe(v,void 0,void 0,Object(D.a)().mark(function _(){return Object(D.a)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:window.localStorage.setItem(ng,x);case 1:case"end":return Q.stop()}},_)}))})),L.abrupt("return",{err:null});case 10:case"end":return L.stop()}},d,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],wC.prototype,"contextProvider",void 0),wC=$e([Object(he.injectable)({token:{token:gi,named:OC.command.id}})],wC);function vX(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{var r=JSON.parse(o);return r||i}catch(n){return console.error(n),i}}var vy=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.groupNodeMap=new Map,this.nodeMap=new Map,this.nodeMappingRecord=new Map,this.portMap=new Map,this.portMappingRecord=new Map,this.edgeMap=new Map,this.edgeMappingRecord=new Map,this.getNodesByType=function(r){return r.reduce(function(n,e){return e.isGroup?n.groupNodes.push(e):n.normalNodes.push(e),n},{normalNodes:[],groupNodes:[]})},this.getNodePorts=function(r){return Array.isArray(r.ports)?r.ports:r.ports&&Array.isArray(r.ports.items)?r.ports.items:[]},this.addNodes=function(r){r.forEach(function(n){if(n.isGroup)i.groupNodeMap.set(n.id,n);else{var e=i.getNodePorts(n);i.nodeMap.set(n.id,n),e.forEach(function(t){i.portMap.set(t.id,t)})}})},this.addEdge=function(r){r.forEach(function(n){i.edgeMap.set(n.id,n)})},this.buildNodeMapping=function(r,n){var e=r.id||r.originalId,t=n.id;i.nodeMappingRecord.set(e,t);var a=i.getNodePorts(r);a.forEach(function(s,u){var l=n.ports[u];l&&(i.portMap.set(l.id,l),i.portMappingRecord.set(s.id,l.id))})},this.createEdgeBetweenNodes=function(r){var n=r.id,e=r.source,t=r.sourcePortId,a=r.target,s=r.targetPortId,u=Gt(r,["id","source","sourcePortId","target","targetPortId"]);return Object.assign(Object.assign({},u),{id:void 0,originalId:n,source:i.nodeMappingRecord.get(e),target:i.nodeMappingRecord.get(a),sourcePortId:i.portMappingRecord.get(t),targetPortId:i.portMappingRecord.get(s),sourcePort:i.portMappingRecord.get(t),targetPort:i.portMappingRecord.get(s)})},this.buildGroupRelations=function(r){var n=r.groupChildren,e=n.map(function(t){return i.nodeMappingRecord.get(t)});return Object.assign(Object.assign({},r),{groupChildren:e})}});vy=$e([Object(he.injectable)()],vy);var py,xC;(function(o){o.command=di.GRAPH_PASTE,o.hookKey="graphPasteSelection"})(xC||(xC={}));function SC(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Math.floor(Math.random()*(o-i)+i)}var Ag=py=function(){function o(){var i=this;Object(me.a)(this,o),this.updateNodeCopiedProps=function(r,n){var e=SC(100),t=SC(100);return r&&(e=n.x-r.x+SC(30),t=n.y-r.y+SC(30)),n.x+=e,n.y+=t,n.originalId=n.id,delete n.id,n.label=n.label?"".concat(n.label,"_copied"):"",n.isCollapsed=!1,n},this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),!py.doing){f.next=5;break}return f.abrupt("return",this);case 5:return py.doing=!0,f.next=8,u.graphPasteSelection.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O,x,T,L,_,z,Q,q,ye;return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return y=d.commandService,C=d.position,O=window.localStorage.getItem(ng),x=vX(O,{nodes:[],edges:[]}),T=x.nodes,L=T===void 0?[]:T,_=x.edges,z=_===void 0?[]:_,Q=this.mappingHelper.getNodesByType(L),q=Q.normalNodes,ye=Q.groupNodes,this.mappingHelper.addNodes(L),Ae.next=8,Promise.all(q.map(function(Pe){return pe(m,void 0,void 0,Object(D.a)().mark(function qe(){var lt,ze,ht;return Object(D.a)().wrap(function(Tn){for(;;)switch(Tn.prev=Tn.next){case 0:return Tn.next=2,y.executeCommand(no.ADD_NODE.id,{nodeConfig:this.updateNodeCopiedProps(C,Pe)});case 2:lt=Tn.sent,ze=lt.contextProvider(),ht=ze.getResult(),this.mappingHelper.buildNodeMapping(Pe,ht.nodeConfig);case 6:case"end":return Tn.stop()}},qe,this)}))}));case 8:return Ae.next=10,Promise.all(ye.map(function(Pe){return pe(m,void 0,void 0,Object(D.a)().mark(function qe(){var lt;return Object(D.a)().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return lt=this.mappingHelper.buildGroupRelations(Pe),ht.next=3,y.executeCommand(Ws.ADD_GROUP.id,{nodeConfig:this.updateNodeCopiedProps(C,lt)});case 3:case"end":return ht.stop()}},qe,this)}))}));case 10:return Ae.next=12,Promise.all(z.map(function(Pe){var qe=m.mappingHelper.createEdgeBetweenNodes(Pe);return y.executeCommand(Bo.ADD_EDGE.id,{edgeConfig:qe})}));case 12:return e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function Pe(){return Object(D.a)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:window.localStorage.setItem(ng,null);case 1:case"end":return lt.stop()}},Pe)}))})),Ae.abrupt("return",{err:null});case 14:case"end":return Ae.stop()}},v,this)}))},s);case 8:return l=f.sent,e.setResult(l),py.doing=!1,f.abrupt("return",this);case 12:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();Ag.doing=!1,$e([Object(he.inject)(mi),Be("design:type",Object)],Ag.prototype,"contextProvider",void 0),$e([Object(he.inject)(vy),Be("design:type",vy)],Ag.prototype,"mappingHelper",void 0),Ag=py=$e([Object(he.injectable)({token:{token:gi,named:xC.command.id}})],Ag);var AC;(function(o){o.command=di.GRAPH_TOGGLE_MULTI_SELECT,o.hookKey="toggleMultiSelect"})(AC||(AC={}));var gy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.toggleMultiSelect.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O,x;return Object(D.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,this.ctx.getX6Graph();case 2:return v=L.sent,L.next=5,this.ctx.getGraphConfig();case 5:return m=L.sent,y=f.isEnable,C=f.modelService,L.next=9,de.GRAPH_ENABLE_MULTI_SELECT.getModel(C);case 9:return O=L.sent,x=typeof y=="boolean"?y:!v.isRubberbandEnabled(),x?(v.enableRubberband(),v.scroller&&v.scroller.widget?v.scroller.disablePanning():v.disablePanning(),m.graphContainer.style.cursor="crosshair"):(v.disableRubberband(),v.scroller&&v.scroller.widget?v.scroller.enablePanning():v.enablePanning(),m.graphContainer.style.cursor="grab"),O.setValue({isEnable:x}),L.abrupt("return",{isEnable:x});case 14:case"end":return L.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],gy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],gy.prototype,"init",null),gy=$e([Object(he.injectable)({token:{token:gi,named:AC.command.id}})],gy);var MC;(function(o){o.command=di.GRAPH_HISTORY_UNDO,o.hookKey="historyUndo"})(MC||(MC={}));var TC=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyUndo.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y;return Object(D.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,e.getX6Graph();case 2:if(y=O.sent,y.isHistoryEnabled()!==!1){O.next=5;break}return O.abrupt("return",{err:"history is disabled"});case 5:return y.undo(),e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function x(){var T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:T=d.commandService,T.executeCommand(di.GRAPH_HISTORY_REDO.id,{});case 2:case"end":return _.stop()}},x)}))})),O.abrupt("return",{err:null});case 8:case"end":return O.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],TC.prototype,"contextProvider",void 0),TC=$e([Object(he.injectable)({token:{token:gi,named:MC.command.id}})],TC);var PC;(function(o){o.command=di.GRAPH_HISTORY_REDO,o.hookKey="historyRedo"})(PC||(PC={}));var kC=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyRedo.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y;return Object(D.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,e.getX6Graph();case 2:if(y=O.sent,y.isHistoryEnabled()!==!1){O.next=5;break}return O.abrupt("return",{err:"history is disabled"});case 5:return y.redo(),e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function x(){var T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:T=d.commandService,T.executeCommand(di.GRAPH_HISTORY_UNDO.id,{});case 2:case"end":return _.stop()}},x)}))})),O.abrupt("return",{err:null});case 8:case"end":return O.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],kC.prototype,"contextProvider",void 0),kC=$e([Object(he.injectable)({token:{token:gi,named:PC.command.id}})],kC);var DC;(function(o){o.command=di.GRAPH_HISTORY_TOGGLE,o.hookKey="historyToggle"})(DC||(DC={}));var IC=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyToggle.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O;return Object(D.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,e.getX6Graph();case 2:if(y=T.sent,y.isHistoryEnabled()!==!1){T.next=5;break}return T.abrupt("return",{err:"history is disabled"});case 5:return C=y.isHistoryEnabled(),O=d.enabled,y.toggleHistory(O),e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function L(){var _;return Object(D.a)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:_=d.commandService,_.executeCommand(di.GRAPH_HISTORY_TOGGLE.id,{enabled:C});case 2:case"end":return Q.stop()}},L)}))})),T.abrupt("return",{err:null});case 10:case"end":return T.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],IC.prototype,"contextProvider",void 0),IC=$e([Object(he.injectable)({token:{token:gi,named:DC.command.id}})],IC);var RC;(function(o){o.command=di.GRAPH_HISTORY_RESET,o.hookKey="historyReset"})(RC||(RC={}));var NC=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.historyReset.call(a,function(){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,e.getX6Graph();case 2:return v=y.sent,v.cleanHistory(),y.abrupt("return",{err:null});case 5:case"end":return y.stop()}},d)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],NC.prototype,"contextProvider",void 0),NC=$e([Object(he.injectable)({token:{token:gi,named:RC.command.id}})],NC);var jC;(function(o){o.command=di.GRAPH_ADD_TOOL,o.hookKey="addTool"})(jC||(jC={}));var LC=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.addTool.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O,x,T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return y=d.cellId,C=d.toolConfig,O=d.commandService,_.next=3,e.getX6Graph();case 3:return x=_.sent,T=x.getCellById(y),T&&(T.addTools(C.items,C.options),e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function z(){return Object(D.a)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:Array.isArray(C.items)&&C.items.forEach(function(ye){O.executeCommand(di.GRAPH_DEL_TOOL.id,{cellId:y,toolname:ye})});case 1:case"end":return q.stop()}},z)}))}))),_.abrupt("return",{err:null});case 7:case"end":return _.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],LC.prototype,"contextProvider",void 0),LC=$e([Object(he.injectable)({token:{token:gi,named:jC.command.id}})],LC);var _C;(function(o){o.command=di.GRAPH_DEL_TOOL,o.hookKey="delTool"})(_C||(_C={}));var FC=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.delTool.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m,y,C,O,x;return Object(D.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return m=d.cellId,y=d.toolName,C=d.toolConfig,L.next=3,e.getX6Graph();case 3:return O=L.sent,x=O.getCellById(m),x&&(y==="*"?x.removeTools(C):x.removeTool(y,C)),L.abrupt("return",{err:null});case 7:case"end":return L.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],FC.prototype,"contextProvider",void 0),FC=$e([Object(he.injectable)({token:{token:gi,named:_C.command.id}})],FC);var BC;(function(o){o.command=di.REDO_CMD,o.hookKey="redoCommand"})(BC||(BC={}));var my=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx,t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),c.next=5,u.redoCommand.call(a,function(){return pe(n,void 0,void 0,Object(D.a)().mark(function f(){var d;return Object(D.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=e.getCommands(),d.isRedoable&&d.redoCommand(),this.ctx.addUndo(ra.create(function(){d.redoCommand()})),m.abrupt("return",{});case 4:case"end":return m.stop()}},f,this)}))},s);case 5:return c.abrupt("return",this);case 6:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],my.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],my.prototype,"init",null),my=$e([Object(he.injectable)({token:{token:gi,named:BC.command.id}})],my);var GC;(function(o){o.command=di.UNDO_CMD,o.hookKey="undoCommand"})(GC||(GC={}));var yy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx,t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),c.next=5,u.undoCommand.call(a,function(){return pe(n,void 0,void 0,Object(D.a)().mark(function f(){var d;return Object(D.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=e.getCommands(),d.isUndoable&&d.undoCommand(),this.ctx.addUndo(ra.create(function(){d.redoCommand()})),m.abrupt("return",{});case 4:case"end":return m.stop()}},f,this)}))},s);case 5:return c.abrupt("return",this);case 6:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],yy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],yy.prototype,"init",null),yy=$e([Object(he.injectable)({token:{token:gi,named:GC.command.id}})],yy);var pX=function(i){i(G0),i(U0),i(z0),i(uy),i(ly),i(cy),i(TC),i(kC),i(IC),i(NC),i(my),i(yy),i(hy),i(gy),i(wC),i(Ag),i(fy),i(LC),i(FC)},gX=[_2,F2,B2,MC,PC,RC,DC,mC,bC,CC,EC,BC,GC,dy,AC,OC,xC,jC,_C],by;(function(o){o.command=Bo.ADD_EDGE,o.hookKey="addEdge",o.createEdgeId=function(n){if(S.isString(n.source))return"".concat(n.source,":").concat(n.sourcePortId,"-").concat(n.target,":").concat(n.targetPortId);if(i(n)){var e=n;return"".concat(e.source.cell,":").concat(e.source.port,"-").concat(e.target.cell,":").concat(e.target.port)}if(r(n)){var t=n;return"".concat(t.sourceCell,":").concat(t.sourcePort,"-").concat(t.targetCell,":").concat(t.targetPort)}};function i(n){return n.source&&n.source.cell&&S.isString(n.source.cell)}o.isX6EdgeConfig=i;function r(n){return n.sourceCell&&S.isString(n.sourceCell)}o.isX6EdgePlainConfig=r})(by||(by={}));var Cy=function(){function o(){var i=this;Object(me.a)(this,o),this.processEdgeConfig=function(r,n){return pe(i,void 0,void 0,Object(D.a)().mark(function e(){var t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(n.id){u.next=5;break}return t=r.createIdService,a=t===void 0?by.createEdgeId:t,u.next=4,a(n);case 4:n.id=u.sent;case 5:return n.sourcePortId&&!n.sourcePort&&(n.sourcePort=n.sourcePortId,n.targetPort=n.targetPortId),u.abrupt("return",n);case 7:case"end":return u.stop()}},e)}))},this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.addEdge.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O,x,T,L,_,z,Q,q;return Object(D.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return v=f.cellFactory,m=f.createEdgeService,y=f.commandService,C=f.options,Ce.next=3,this.ctx.getX6Graph();case 3:if(O=Ce.sent,x=f.edgeConfig,!m){Ce.next=12;break}return Ce.next=8,m(f);case 8:if(T=Ce.sent,typeof T!="boolean"){Ce.next=11;break}return Ce.abrupt("return",{err:"createEdgeService rejected"});case 11:x=T;case 12:return Ce.next=14,this.processEdgeConfig(f,x);case 14:if(L=Ce.sent,z=Object.assign(Object.assign({},C),{isCommand:!0}),!v){Ce.next=23;break}return Ce.next=19,v(L,this);case 19:Q=Ce.sent,_=O.addEdge(Q,z),Ce.next=24;break;case 23:_=O.addEdge(Object.assign(Object.assign({},L),{label:(L==null?void 0:L.label)||L,data:Object.assign({},L)}),z);case 24:return q=ra.create(function(){y.executeCommand(Bo.DEL_EDGE.id,{x6Edge:_})}),this.ctx.addUndo(q),Ce.abrupt("return",{edgeConfig:L,edgeCell:_});case 27:case"end":return Ce.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],Cy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Cy.prototype,"init",null),Cy=$e([Object(he.injectable)({token:{token:gi,named:by.command.id}})],Cy);var ef;(function(o){o.command=Bo.DEL_EDGE,o.hookKey="delEdge";var i;(function(r){r.EDGE_NOT_EXIST="edge is not exist",r.EDGE_INVALID_CELL="this is not a valid cell",r.X6_DELETE_FAILED="x6 throw err when call delete edge",r.SERVICE_REJECT="service reject to delete"})(i=o.ErrEnum||(o.ErrEnum={}))})(ef||(ef={}));var Ey=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.delEdge.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O,x,T,L,_,z,Q,q,ye,Ce,Ae;return Object(D.a)().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:if(v=f.edgeConfig,m=f.x6Edge,y=f.deleteEdgeService,C=f.commandService,O=f.options,x=m,x){qe.next=9;break}return qe.next=5,this.findEdgeById(v);case 5:if(x=qe.sent,x){qe.next=9;break}return console.error(ef.ErrEnum.EDGE_NOT_EXIST,v),qe.abrupt("return",{err:ef.ErrEnum.EDGE_NOT_EXIST});case 9:if(T=x&&x.isEdge(),T){qe.next=13;break}return console.error(ef.ErrEnum.EDGE_NOT_EXIST,x),qe.abrupt("return",{err:ef.ErrEnum.EDGE_NOT_EXIST});case 13:if(!y){qe.next=19;break}return qe.next=16,y(f);case 16:if(L=qe.sent,L){qe.next=19;break}return qe.abrupt("return",{err:ef.ErrEnum.SERVICE_REJECT});case 19:return qe.prev=19,_=x.getTargetCell(),z=x.getSourceCell(),Q=x.getSourcePortId(),q=x.getTargetPortId(),ye=z?z.id:z.source,Ce=_?_.id:_.target,x.remove(Object.assign(Object.assign({},O),{isCommand:!0})),Ae=ra.create(function(){C.executeCommand(Bo.ADD_EDGE.id,{edgeConfig:{source:ye,target:Ce,sourcePortId:Q,targetPortId:q}})}),this.ctx.addUndo(Ae),qe.abrupt("return",{err:null,edgeConfig:{source:ye,target:Ce,sourcePortId:Q,targetPortId:q},targetCell:_,sourceCell:z,sourcePortId:Q,targetPortId:q});case 32:return qe.prev=32,qe.t0=qe.catch(19),console.error(ef.ErrEnum.X6_DELETE_FAILED,qe.t0),qe.abrupt("return",{err:ef.ErrEnum.X6_DELETE_FAILED});case 36:case"end":return qe.stop()}},d,this,[[19,32]])}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.findEdgeById=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.ctx.getX6Graph();case 2:return e=s.sent,t=e.getCellById(r.id),s.abrupt("return",t);case 5:case"end":return s.stop()}},n,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],Ey.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Ey.prototype,"init",null),Ey=$e([Object(he.injectable)({token:{token:gi,named:ef.command.id}})],Ey);var mX=h("GoyQ"),_N=h.n(mX),Mg;(function(o){var i=this;o.command=Bo.UPDATE_EDGE,o.hookKey="updateEdge",o.XFlowEdgeSetOptions={overwrite:!0},o.XFlowUpdateLabelService=function(r,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:o.XFlowEdgeSetOptions;return pe(i,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:r==null||r.setLabelAt(0,(n==null?void 0:n.label)||n,e);case 1:case"end":return s.stop()}},t)}))}})(Mg||(Mg={}));var Oy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.updateEdge.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O,x,T,L;return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,this.ctx.getX6Graph();case 2:if(v=z.sent,m=f.updateEdgeService,y=f.updateEdgeLabelService,C=y===void 0?Mg.XFlowUpdateLabelService:y,O=f.options,x=O===void 0?Mg.XFlowEdgeSetOptions:O,!m){z.next=10;break}return z.next=7,m(f);case 7:z.t0=z.sent,z.next=11;break;case 10:z.t0=f==null?void 0:f.edgeConfig;case 11:if(T=z.t0,L=v==null?void 0:v.getCellById(T==null?void 0:T.id),L==null||L.setData(T,x),!(T==null?void 0:T.hasOwnProperty("label"))){z.next=17;break}return z.next=17,C(L,T,x);case 17:return k2()(T==null?void 0:T.visible)&&L.setVisible(T==null?void 0:T.visible),T.attrs&&L.setAttrs(T.attrs),T.vertices&&L.setVertices(T.vertices),T.router&&L.setRouter(T.router),T.connector&&L.setConnector(T.connector),_N()(T.source)&&L.setSource(T.source),_N()(T.target)&&L.setTarget(T.target),z.abrupt("return",{edgeConfig:T,edgeCell:L});case 25:case"end":return z.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],Oy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Oy.prototype,"init",null),Oy=$e([Object(he.injectable)({token:{token:gi,named:Mg.command.id}})],Oy);var zC;(function(o){o.command=Bo.HIGHLIGHT_EDGE,o.hookKey="highlightEdge"})(zC||(zC={}));var wy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.highlightEdge.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v,m,y,C,O,x,T,L,_,z;return Object(D.a)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,this.ctx.getX6Graph();case 2:return y=q.sent,C=f.edgeId,O=f.strokeColor,x=f.strokeWidth,T=y.getEdges(),L=T.find(function(ye){return ye.id===C}),_=T.filter(function(ye){return ye.id!==C}),L?(z=L.getAttrs(),((v=z==null?void 0:z.line)===null||v===void 0?void 0:v.stroke)===O&&((m=z==null?void 0:z.line)===null||m===void 0?void 0:m.strokeWidth)===x||(L==null||L.setAttrs({line:{stroke:O,strokeWidth:x||2}}),_.forEach(function(ye){ye.setAttrs({line:z==null?void 0:z.line})}),f.commandService.executeCommand(Bo.FRONT_EDGE.id,{edgeId:C}))):console.error(C,"this edgeId is not exist"),q.abrupt("return",{});case 9:case"end":return q.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],wy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],wy.prototype,"init",null),wy=$e([Object(he.injectable)({token:{token:gi,named:zC.command.id}})],wy);var UC;(function(o){o.command=Bo.FRONT_EDGE,o.hookKey="frontEdge"})(UC||(UC={}));var xy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.frontEdge.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,m,y,C;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.ctx.getX6Graph();case 2:return m=x.sent,y=f.edgeId,C=m==null?void 0:m.getCellById(y),C?(C.toFront(),this.ctx.addUndo(ra.create(function(){return pe(v,void 0,void 0,Object(D.a)().mark(function T(){return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:f.commandService.executeCommand(Bo.BACK_EDGE.id,{edgeId:y});case 1:case"end":return _.stop()}},T)}))}))):console.error(y,"this edgeId is not exist"),x.abrupt("return",{});case 7:case"end":return x.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],xy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],xy.prototype,"init",null),xy=$e([Object(he.injectable)({token:{token:gi,named:UC.command.id}})],xy);var VC;(function(o){o.command=Bo.BACK_EDGE,o.hookKey="frontEdge"})(VC||(VC={}));var Sy=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.frontEdge.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,m,y,C;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.ctx.getX6Graph();case 2:return m=x.sent,y=f.edgeId,C=m==null?void 0:m.getCellById(y),C?(C.toBack(),this.ctx.addUndo(ra.create(function(){return pe(v,void 0,void 0,Object(D.a)().mark(function T(){return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:f.commandService.executeCommand(Bo.FRONT_EDGE.id,{edgeId:y});case 1:case"end":return _.stop()}},T)}))}))):console.error(y,"this edgeId is not exist"),x.abrupt("return",{});case 7:case"end":return x.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],Sy.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Sy.prototype,"init",null),Sy=$e([Object(he.injectable)({token:{token:gi,named:VC.command.id}})],Sy);var yX=function(i){i(Cy),i(Ey),i(Oy),i(wy),i(xy),i(Sy)},bX=[by,ef,Mg,zC,UC,VC],Tg;(function(o){o.command=Ws.ADD_GROUP,o.hookKey="addGroup",o.GROUP_PADDING=12,o.GROUP_HEADER_HEIGHT=40})(Tg||(Tg={}));var HC=function(){function o(){var i=this;Object(me.a)(this,o),this.getBBox=function(r,n,e){var t=n.groupHeaderHeight,a=t===void 0?Tg.GROUP_HEADER_HEIGHT:t,s=n.groupPadding,u=s===void 0?Tg.GROUP_PADDING:s,l=e.getCellsBBox(r.children);return l.moveAndExpand({x:-u,y:-(u+a),width:u*2,height:u*2+a}),l},this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.addGroup.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O,x,T,L,_,z,Q,q,ye;return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return y=d.nodeConfig,C=d.createService,O=d.cellFactory,x=d.commandService,Ae.next=3,e.getX6Graph();case 3:return T=Ae.sent,Ae.next=6,x.executeCommand(no.ADD_NODE.id,{cellFactory:O,createNodeService:C,nodeConfig:y});case 6:if(L=Ae.sent,_=L.contextProvider().getResult(),z=_.nodeCell,Q=z.id,q=y.groupChildren,q.length&&(q.forEach(function(Pe){var qe=T.getCellById(Pe);qe&&(qe.setData(Object.assign(Object.assign({},qe.getData()),{group:Q,isCollapsed:!1})),qe.prop("group",Q),z.addChild(qe),T.unselect(qe))}),ye=this.getBBox(z,y,T),z.position(ye.x,ye.y),z.size(ye.width,ye.height),z.setZIndex(0),z.prop("isGroup",!0),z.setData(Object.assign(Object.assign({},z.getData()),{width:ye.width,height:ye.height,groupChildrenSize:{width:ye.width,height:ye.height},x:ye.x,y:ye.y,isGroup:!0})),T.select(z)),!y.isCollapsed){Ae.next=14;break}return Ae.next=14,x.executeCommand(Ws.COLLAPSE_GROUP.id,{nodeId:y.id,isCollapsed:y.isCollapsed});case 14:return e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function Pe(){return Object(D.a)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:x.executeCommand(Ws.DEL_GROUP.id,{nodeConfig:y});case 1:case"end":return lt.stop()}},Pe)}))})),Ae.abrupt("return",{nodeConfig:y,nodeCell:z});case 16:case"end":return Ae.stop()}},v,this)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],HC.prototype,"contextProvider",void 0),HC=$e([Object(he.injectable)({token:{token:gi,named:Tg.command.id}})],HC);var WC;(function(o){o.command=Ws.DEL_GROUP,o.hookKey="delGroup"})(WC||(WC={}));var $C=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.delGroup.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O,x,T,L,_,z,Q,q;return Object(D.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,e.getX6Graph();case 2:if(y=Ce.sent,C=d.nodeConfig,O=d.commandService,x=d.deleteService,T=C.id,L=y.getCellById(T),!x){Ce.next=12;break}return Ce.next=9,x(d);case 9:if(_=Ce.sent,_){Ce.next=12;break}return Ce.abrupt("return",{err:"service rejected"});case 12:if(L){Ce.next=14;break}return Ce.abrupt("return",{err:"target node is not exist"});case 14:if(L.getProp("isGroup")===!0){Ce.next=16;break}return Ce.abrupt("return",{err:"target node is not group"});case 16:if(z=L.getData(),Q=z.isCollapsed,!Q){Ce.next=20;break}return Ce.next=20,O.executeCommand(Ws.COLLAPSE_GROUP.id,{nodeId:L.id,isCollapsed:!1,collapsedSize:{width:0,height:0}});case 20:return q=L.getChildren(),q&&q.forEach(function(Ae){L.unembed(Ae),Ae.prop("group",""),Ae.setData(Object.assign(Object.assign({},Ae.getData()),{group:""}))}),Ce.next=24,O.executeCommand(no.DEL_NODE.id,{nodeConfig:C});case 24:return e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function Ae(){return Object(D.a)().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:O.executeCommand(Ws.ADD_GROUP.id,{nodeConfig:C});case 1:case"end":return qe.stop()}},Ae)}))})),Ce.abrupt("return",{err:null});case 26:case"end":return Ce.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],$C.prototype,"contextProvider",void 0),$C=$e([Object(he.injectable)({token:{token:gi,named:WC.command.id}})],$C);var KC;(function(o){o.command=Ws.INIT_GROUP,o.hookKey="initGroup"})(KC||(KC={}));var XC=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.initGroup.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O,x,T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return y=d.graphData,C=d.commandService,_.next=3,e.getX6Graph();case 3:return O=_.sent,x=y.nodes,T={},x.forEach(function(z){var Q=z.id,q=z.group;q&&(T[q]?T[q].push(Q):T[q]=[Q])}),Object.keys(T).forEach(function(z){return pe(m,void 0,void 0,Object(D.a)().mark(function Q(){var q,ye,Ce,Ae,Pe,qe;return Object(D.a)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(q=O.getCellById(z),ye=q.getData(),Ce=T[z]||[],q.prop("isGroup",!0),q.setData(Object.assign(Object.assign({},ye),{isGroup:!0,groupChildren:Ce})),Ce.forEach(function(ht){var nn=O.getCellById(ht);q.embed(nn)}),q.toBack(),Ae=ye.isCollapsed,Pe=ye.groupCollapsedSize,!Ae){ze.next=12;break}return qe=d.collapsedSize||Pe||PS,ze.next=12,C.executeCommand(Ws.COLLAPSE_GROUP.id,{collapsedSize:qe,isCollapsed:!0,nodeId:q.id});case 12:case"end":return ze.stop()}},Q)}))}),_.abrupt("return",{});case 9:case"end":return _.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],XC.prototype,"contextProvider",void 0),XC=$e([Object(he.injectable)({token:{token:gi,named:KC.command.id}})],XC);var YC;(function(o){o.command=Ws.COLLAPSE_GROUP,o.hookKey="collapseGroup"})(YC||(YC={}));var Ay=function(){function o(){var i=this;Object(me.a)(this,o),this.toggleVisible=function(r,n,e){r.forEach(function(t){var a=e.findViewByCell(t).container;a.style.visibility=n?"visible":"hidden"})},this.toggleCollapse=function(r,n,e){var t=r.getChildren().filter(function(f){return f.isNode()}),a=r.getData(),s=e.isCollapsed,u=e.gap,l=u===void 0?0:u;if(s){var c=e.collapsedSize||a.groupCollapsedSize||PS;r.prop("previousSize",r.size()),r.size(c)}else r.size(r.prop("previousSize"));t&&t.forEach(function(f){var d=r.position(),v=n.getConnectedEdges(f).filter(function(O){var x=O.getSourceNode(),T=O.getTargetNode();return t.includes(x)&&t.includes(T)});if(s){i.toggleVisible([f].concat(Object(We.a)(v)),!1,n),f.prop("previousSize",f.size()),f.prop("previousRelativePosition",f.position({relative:!0})),f.position(d.x+l,d.y+l);var m=r.size();f.size({width:m.width-l*2,height:m.height-l*2})}else{i.toggleVisible([f].concat(Object(We.a)(v)),!0,n);var y=f.prop("previousRelativePosition"),C=f.prop("previousSize");f.position(y.x,y.y,{relative:!0}),f.size(C)}}),r.prop("isCollapsed",s),r.setData(Object.assign(Object.assign({},r.getData()),{isCollapsed:s}))},this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return e=this.ctx.getArgs(),t=e.args,a=e.hooks,s=this.ctx.getHooks(),c.next=4,s.collapseGroup.call(t,function(f){return pe(n,void 0,void 0,Object(D.a)().mark(function d(){var v=this,m,y,C,O;return Object(D.a)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,this.ctx.getX6Graph();case 2:if(m=T.sent,y=m.getCellById(t.nodeId),C=f.toggleService,!C){T.next=11;break}return T.next=8,C(f);case 8:if(O=T.sent,O){T.next=11;break}return T.abrupt("return",{err:"service rejected"});case 11:return y&&(this.toggleCollapse(y,m,t),this.ctx.addUndo(ra.create(function(){return pe(v,void 0,void 0,Object(D.a)().mark(function L(){return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:y&&this.toggleCollapse(y,m,Object.assign(t,{isCollapsed:!t.isCollapsed}));case 1:case"end":return z.stop()}},L,this)}))}))),T.abrupt("return",{err:null});case 13:case"end":return T.stop()}},d,this)}))},a);case 4:return u=c.sent,this.ctx.setResult(u),c.abrupt("return",this);case 7:case"end":return c.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ctx.undo(),e.abrupt("return",this);case 2:case"end":return e.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ctx.isUndoable){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"init",value:function(){this.ctx=this.contextProvider()}},{key:"isUndoable",value:function(){return this.ctx.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],Ay.prototype,"contextProvider",void 0),$e([Object(he.postConstruct)(),Be("design:type",Function),Be("design:paramtypes",[]),Be("design:returntype",void 0)],Ay.prototype,"init",null),Ay=$e([Object(he.injectable)({token:{token:gi,named:YC.command.id}})],Ay);var CX=function(i){i(HC),i($C),i(XC),i(Ay)},EX=[Tg,WC,KC,YC],JC;(function(o){o.command=rg.UPDATE_MODEL,o.hookKey="updateModel"})(JC||(JC={}));var ZC=function(){function o(){var i=this;Object(me.a)(this,o),this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,u.updateModel.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O,x,T,L,_;return Object(D.a)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return y=d.updateModel,C=d.getModel,O=d.modelService,Q.next=3,C(O);case 3:return x=Q.sent,T=x.getValue(),L=fU(T),Q.next=8,y(L);case 8:return _=dU(L),x.setValue(_),e.addUndo(ra.create(function(){return pe(m,void 0,void 0,Object(D.a)().mark(function q(){return Object(D.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:x.setValue(_);case 1:case"end":return Ce.stop()}},q)}))})),Q.abrupt("return",{model:x,value:_});case 12:case"end":return Q.stop()}},v)}))},s);case 5:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 8:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([Object(he.inject)(mi),Be("design:type",Object)],ZC.prototype,"contextProvider",void 0),ZC=$e([Object(he.injectable)({token:{token:gi,named:JC.command.id}})],ZC);var jq=function(){},OX=function(i){i(ZC)},wX=[JC],FN=[].concat(Object(We.a)(QU),Object(We.a)(bX),Object(We.a)(EX),Object(We.a)(gX),Object(We.a)(wX)),BN=function(){return new Yc},My=function(){function o(){var i=this;Object(me.a)(this,o),this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=r.x6Events.registerHook({name:"bind group node move event",handler:function(l){return pe(e,void 0,void 0,Object(D.a)().mark(function c(){var f=this,d;return Object(D.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:d={eventName:"node:moving",callback:function(C){var O=C.node;return pe(f,void 0,void 0,Object(D.a)().mark(function x(){var T,L,_,z,Q,q,ye,Ce,Ae,Pe,qe,lt,ze,ht,nn;return Object(D.a)().wrap(function(Kn){for(;;)switch(Kn.prev=Kn.next){case 0:if(T=O.prop("isGroup"),!T){Kn.next=4;break}return O.prop("originPosition",O.getPosition()),Kn.abrupt("return");case 4:if(L=O.model.graph,_=O.getData(),z=_.group,Q=L.getNodes().find(function(zn){return zn.id===z}),Q){Kn.next=9;break}return Kn.abrupt("return");case 9:q=Q.getProp("isCollapsed"),ye=Q.getProp("originSize"),Ce=!1,ye==null&&(ye=Q.size(),Q.prop("originSize",ye)),Ae=Q.prop("originPosition"),Ae==null&&(Ae=Q.getPosition(),Q.prop("originPosition",Ae)),Pe=Ae.x,qe=Ae.y,lt=Ae.x+ye.width,ze=Ae.y+ye.height,ht=Q.getChildren(),ht&&ht.forEach(function(zn){var An=zn.getBBox().inflate(12),br=An.getCorner();An.x<Pe&&(Pe=An.x,Ce=!0),An.y<qe&&(qe=An.y,Ce=!0),br.x>lt&&(lt=br.x,Ce=!0),br.y>ze&&(ze=br.y,Ce=!0)}),Ce&&(Q.prop({position:{x:Pe,y:qe},size:{width:lt-Pe,height:ze-qe}}),nn=Object.assign(Object.assign({},Q.getData()),{x:Pe,y:qe,width:lt-Pe,height:ze-qe}),q!==!0&&(nn.groupChildrenSize={width:lt-Pe,height:ze-qe}),Q.setData(nn));case 22:case"end":return Kn.stop()}},x)}))}},l.push(d);case 2:case"end":return m.stop()}},c)}))}}),s.abrupt("return",ra.create(function(){t.dispose()}));case 2:case"end":return s.stop()}},n)}))},this.registerHookHub=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=new Bi,FN.forEach(function(s){var u=s.hookKey,l=s.createHook,c=l===void 0?BN:l,f=r.registerHookHub(u,c());e.push(f)}),this.commandConfig.getConfig().then(function(s){var u=s.getContributions,l=u();l.forEach(function(c){var f=c.hookKey,d=c.createHook,v=d===void 0?BN:d,m=r.registerHookHub(f,v());e.push(m)})}),a.abrupt("return",e);case 4:case"end":return a.stop()}},n,this)}))}}return Object(ue.a)(o,[{key:"registerGraphCommands",value:function(r){var n=this;FN.forEach(function(e){var t=e.command;r.registerCommand(t,{createCommand:n.commandFactory})}),this.commandConfig.getConfig().then(function(e){var t=e.getContributions,a=t();a.forEach(function(s){r.registerCommand(s.command,{createCommand:n.commandFactory})})})}}]),o}();$e([Object(he.inject)(KS),Be("design:type",Function)],My.prototype,"commandFactory",void 0),$e([Object(he.inject)(hg),Be("design:type",hg)],My.prototype,"commandConfig",void 0),My=$e([Object(he.singleton)({contrib:[Z1,lc]})],My);var xX=function(i,r){var n=r.getCommandContributions();n.forEach(function(e){var t=e.CommandHandler,a=e.command;i({token:{token:gi,named:a.id},useClass:t})}),pX(i),ZU(i),yX(i),CX(i),OX(i),i(My)},SX=function(i){return Object(he.Module)(function(r){r(vy),YU(r,i),xX(r,i),r(Ad),r(KS,{useFactory:function(e){return function(t,a,s){var u=e.container.createChild(),l=u.get(Ad);u.register(mi,{useDynamic:function(){return function(){return l}}});var c=u.getNamed(gi,t);return l.setArgs(a,s),l.handlerInstance=c,c}}})})},AX=function(i){var r=cc(),n=I.a.useMemo(function(){return i.config?i.config:new hg},[]);return I.a.useEffect(function(){r.addCoreModule({config:n,createModule:SX})},[]),null},MX=function(i){return function(r){var n=I.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=I.a.useMemo(function(){var t=new hg;return i(t,n),t},[n]);return e}},TX=Symbol("IToolbarService"),GN=he.Syringe.defineToken("IToolbarContribution");function zN(o){if(o==null)throw new TypeError("Cannot destructure undefined")}var PX=h("sEfC"),kX=h.n(PX),DX=h("BkRI"),UN=h.n(DX),Pg=function(){function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.toolbarItems=new Map,this.onDidChangeEvent=new zv(null),this.onDidChange=this.onDidChangeEvent.watch,this.fireOnDidChange=kX()(function(){return i.onDidChangeEvent.setValue(void 0)},16),this.registerDisposableToolbar=function(r){var n=new Bi,e={registerToolbarItem:function(a){var s=i.registerItem(a);return n.push(s),s}};return r(e),i.toDispose.push(n),n},this.getToolbarModel=function(r){var n=r.layout,e=r.mainGroups,t=e===void 0?[]:e,a=r.extraGroups,s=a===void 0?[]:a;return new zv({layout:n,mainGroups:i.createToolbarGroupModel(t),extraGroups:i.createToolbarGroupModel(s)})},this.createToolbarGroupModel=function(r){var n=r.map(function(e){var t=e.items,a=t===void 0?[]:t;return Object.assign(Object.assign({},e),{items:a.map(function(s){return i.createToolbarModel({id:s.id})}).filter(function(s){return!!s})})});return n}}return Object(ue.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Bt.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerToolbarItems(this)}}catch(a){n.e(a)}finally{n.f()}}},{key:"onStop",value:function(){this.toDispose.dispose()}},{key:"registerItem",value:function(r){var n=this;this.toolbarItems.has(r.id)&&console.warn("ToolbarRegistry ".concat(r.id," is duplicated, in"),r),this.toolbarItems.set(r.id,r),this.fireOnDidChange();var e=new Bi(ra.create(function(){return n.fireOnDidChange()}),ra.create(function(){return n.toolbarItems.delete(r.id)}));return e}},{key:"createToolbarModel",value:function(r){var n=UN()(this.toolbarItems.get(r.id)),e=k2()(n.isEnabled)?n.isEnabled:!0,t=k2()(n.isVisible)?n.isVisible:!0,a=Object.assign(Object.assign({},n),{isEnabled:e,isVisible:t,iconName:n.iconName,text:n.text});return a}}]),o}();$e([Object(he.inject)(Uv),Be("design:type",Object)],Pg.prototype,"commandService",void 0),$e([Object(he.inject)(Vv),Be("design:type",Object)],Pg.prototype,"modelService",void 0),$e([Object(he.contrib)(GN),Be("design:type",Object)],Pg.prototype,"contributionProvider",void 0),Pg=$e([Object(he.singleton)({contrib:[xh,TX]})],Pg);var IX=function(){return Object(he.Module)(function(i){he.Contribution.register(i,GN),i(Pg)})},VN=function(i){zN(i);var r=cc();return I.a.useEffect(function(){var n=r.addCoreModule({config:{CONFIG_TYPE:"ToolbarRegistry",getConfig:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:case"end":return s.stop()}},t)}))}},createModule:IX});return function(){n.dispose()}},[r]),null};VN.defaultProps={XFlowModuleType:"ToolbarRegistry"};var Lq=Symbol("xflow-menu-root"),RX=Symbol("IMenuService"),HN=he.Syringe.defineToken("IMenuContribution"),QC;(function(o){o.Separator="separator",o.Submenu="submenu",o.Root="root",o.Leaf="leaf"})(QC||(QC={}));var qC=function(){function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.menuMap=new Map,this.getMenu=function(r){return i.menuMap.get(r)},this.registerDisposableMenu=function(r){var n=new Bi,e={registerMenu:function(a){var s=i.registerMenu(a);return n.push(s),s}};return r(e),i.toDispose.push(n),n}}return Object(ue.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Bt.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerMenu(this)}}catch(a){n.e(a)}finally{n.f()}}},{key:"onStop",value:function(){this.toDispose.dispose()}},{key:"registerMenu",value:function(r){var n=this;return this.menuMap.set(r.id,r),ra.create(function(){return n.menuMap.delete(r.id)})}}]),o}();$e([Object(he.contrib)(HN),Be("design:type",Object)],qC.prototype,"contributionProvider",void 0),qC=$e([Object(he.singleton)({contrib:[xh,RX]})],qC);var NX=function(){return Object(he.Module)(function(i){he.Contribution.register(i,HN),i(qC)})},WN=function(i){zN(i);var r=cc();return I.a.useEffect(function(){var n=r.addCoreModule({config:{CONFIG_TYPE:"MenuRegistry",getConfig:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:case"end":return s.stop()}},t)}))}},createModule:NX});return function(){n.dispose()}},[]),null};WN.defaultProps={XFlowModuleType:"MenuRegistry"};var eM=function(i){var r=i.meta,n=i.graphConfig,e=i.graphData,t=i.graphLayout,a=i.onLoad,s=i.isAutoCenter,u=i.hookConfig,l=i.modelServiceConfig,c=i.commandConfig,f=i.onAppConfigReady,d=i.onAppDestroy,v=i.children,m=v===void 0?[]:v,y=i.className,C=i.style,O=I.a.useState(),x=Object(je.a)(O,2),T=x[0],L=x[1],_=I.a.useRef(null),z=AU();I.a.useEffect(function(){f&&f(z);var ye=GU(z);ye.start().then(function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function Ae(){var Pe;return Object(D.a)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(L(ye),(Pe=z.getExtension("GraphConfig"))===null||Pe===void 0||Pe.config.setAppContainer(_.current),!r){lt.next=5;break}return lt.next=5,ye.commandService.executeCommand(di.LOAD_META.id,{meta:r});case 5:if(a&&a(ye,z),!e){lt.next=12;break}if(!t){lt.next=10;break}return lt.next=10,ye.commandService.executeCommand(di.GRAPH_LAYOUT.id,Object.assign({graphData:e},t));case 10:return lt.next=12,ye.commandService.executeCommand(di.GRAPH_RENDER.id,{graphData:e});case 12:case"end":return lt.stop()}},Ae)}))});var Ce=function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function Pe(){return Object(D.a)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:d&&d(ye);case 1:case"end":return lt.stop()}},Pe)}))};return function(){Ce()}},[]),I.a.useEffect(function(){T&&T.commandService.executeCommand(di.LOAD_META.id,{meta:r})},[r]),I.a.useEffect(function(){var ye=function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function Ae(){var Pe;return Object(D.a)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(!T){lt.next=11;break}if(!(e&&t)){lt.next=4;break}return lt.next=4,T.commandService.executeCommand(di.GRAPH_LAYOUT.id,Object.assign({graphData:e},t));case 4:return lt.next=6,T.commandService.executeCommand(di.GRAPH_RENDER.id,{graphData:e});case 6:if(!s){lt.next=11;break}return lt.next=9,T.getGraphInstance();case 9:Pe=lt.sent,Pe.centerContent();case 11:case"end":return lt.stop()}},Ae)}))};ye()},[e]);var Q=dt.a.apply(void 0,["xflow-app-workspace",y].concat(Object(We.a)(z.getContainerClassNames()))),q=(Array.isArray(m)?m:[m]).some(function(ye){return ye&&ye.props.isXFlowCanvas});return I.a.createElement(Hk,{app:T},I.a.createElement(ED.Provider,{value:z},I.a.createElement("div",{className:Q,id:z.getInstanceId(),ref:_,style:C},!q&&I.a.createElement(O2,{config:n,position:{top:0,bottom:0,left:0,right:0}}),m,I.a.createElement(AD,{config:l}),I.a.createElement(AX,{config:c}),I.a.createElement(MU,{config:u}),I.a.createElement(VN,null),I.a.createElement(WN,null))))};eM.defaultProps={};var _q=eM,jX=function(i){return i&&i.current},$N=function(){var i=I.a.useRef(!0);return I.a.useEffect(function(){return function(){i.current=!1}},[]),i},KN=function(i){var r=$N(),n=I.a.useState(i.getValue()),e=Object(je.a)(n,2),t=e[0],a=e[1];I.a.useEffect(function(){var c=i.watch(function(f){jX(r)&&a(f)});return function(){c.dispose()}},[a]);var s=t,u=Xc.isValidValue(s),l=I.a.useCallback(function(c){return i.setValue(c)},[i]);return[s,l,u]},kg=function(i){var r=I.a.useMemo(function(){return new zv(i)},[]),n=KN(r),e=Object(je.a)(n,3),t=e[0],a=e[1],s=e[2];return I.a.useEffect(function(){return function(){r.dispose()}},[r]),[t,a,r,s]},LX=function(i){var r=i.getModel,n=i.initialState,e=$N(),t=I.a.useRef(),a=I.a.useState(n),s=Object(je.a)(a,2),u=s[0],l=s[1];return I.a.useEffect(function(){var c;return r().then(function(f){return pe(void 0,void 0,void 0,Object(D.a)().mark(function d(){var v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return t.current=f,y.next=3,f.getValidValue();case 3:if(v=y.sent,e.current){y.next=6;break}return y.abrupt("return");case 6:l(v),c=f.watch(function(C){e.current&&l(C)});case 8:case"end":return y.stop()}},d)}))}),function(){c&&c.dispose&&c.dispose()}},[]),[u,l,t.current]},_X=Symbol("IKeyBindingService"),XN=he.Syringe.defineToken("IKeyBindingContribution"),YN=Symbol("IKeyBindingOptionProvider"),_h=function(){function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.keyBindingMap=new Map,this.enabledKeyBindingMap=new Map,this.registerExternalKeybindings=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.optionProvider.getOption();case 2:return n=a.sent,e=n.registerKeybindingFunc,a.abrupt("return",e(this));case 5:case"end":return a.stop()}},r,this)}))},this.registerKeybinding=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=new Bi;return r.forEach(function(e){i.keyBindingMap.set(e.id,e),i.enableKeyBindings(e.id).then(function(t){n.push(ra.create(function(){t.dispose(),i.keyBindingMap.delete(e.id)}))})}),i.toDispose.push(n),n},this.enableKeyBindings=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return this.disableKeyBindings([r]),t=this.keyBindingMap.get(r),c.next=4,this.getX6Graph();case 4:return a=c.sent,s=this.runCommand(t),a.bindKey(t.keybinding,s),u=ra.create(function(){a.unbindKey(t.keybinding),e.enabledKeyBindingMap.delete(t.id)}),this.enabledKeyBindingMap.set(t.id,u),c.abrupt("return",u);case 10:case"end":return c.stop()}},n,this)}))},this.disableKeyBindings=function(r){r.forEach(function(n){var e=i.enabledKeyBindingMap.get(n);e&&e.dispose()})},this.runCommand=function(r){return function(n){return pe(i,void 0,void 0,Object(D.a)().mark(function e(){return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.callback(r,this.modelService,this.commandService,n);case 2:case"end":return a.stop()}},e,this)}))}},this.getX6Graph=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.graphProvider.getGraphInstance();case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"onStart",value:function(){var r=this.contributionProvider.getContributions(),n=Object(Bt.a)(r),e;try{for(n.s();!(e=n.n()).done;){var t=e.value;t.registerKeybinding(this)}}catch(a){n.e(a)}finally{n.f()}this.registerExternalKeybindings()}},{key:"onStop",value:function(){this.toDispose.dispose()}}]),o}();$e([Object(he.inject)(YN),Be("design:type",Object)],_h.prototype,"optionProvider",void 0),$e([Object(he.inject)(Uv),Be("design:type",Object)],_h.prototype,"commandService",void 0),$e([Object(he.inject)(Vv),Be("design:type",Object)],_h.prototype,"modelService",void 0),$e([Object(he.contrib)(XN),Be("design:type",Object)],_h.prototype,"contributionProvider",void 0),$e([Object(he.inject)(Wv),Be("design:type",Object)],_h.prototype,"graphProvider",void 0),_h=$e([Object(he.singleton)({contrib:[xh,_X]})],_h);var FX=function(i,r){i(YN,{useDynamic:function(){return{getOption:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r.getConfig());case 1:case"end":return s.stop()}},t)}))}}},lifecycle:he.Syringe.Lifecycle.singleton})},BX=function(i){return Object(he.Module)(function(r){FX(r,i),he.Contribution.register(r,XN),r(_h)})},tM;(function(o){o.CONFIG_TYPE="CONTEXT_CONFIG"})(tM||(tM={}));var JN=function(){return ra.create(function(){})},ZN=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.CONFIG_TYPE=tM.CONFIG_TYPE,this.keybindingFunc=JN,this.isMounted=new dl,this.setKeybindingFunc=function(r){i.keybindingFunc=r},this.setMountState=function(){i.isMounted.resolve(!0)},this.getConfig=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.isMounted.promise;case 2:return e.abrupt("return",{CONFIG_TYPE:this.CONFIG_TYPE,registerKeybindingFunc:this.keybindingFunc});case 3:case"end":return e.stop()}},r,this)}))},this.dispose=function(){i.keybindingFunc=JN,i.isMounted=new dl}}),GX=function(i){var r=i.config,n=cc(),e=I.a.useMemo(function(){return r||new ZN},[r]);return I.a.useEffect(function(){var t=n.addCoreModule({config:e,createModule:BX});return e.setMountState(),function(){t.dispose(),e.dispose()}},[n,e]),null},zX=function(i){return function(r){var n=I.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=I.a.useMemo(function(){var t=new ZN;return i(t,n),t},[n]);return e}};function UX(o){return new Promise(function(i){return setTimeout(function(){return i(!0)},o)})}var eE=h("Lyp1"),VX=function(){function o(){Object(me.a)(this,o),this.map=new Map([["default",eE.a],["QuestionCircleOutlined",eE.a]]),this.map.set("default",eE.a),this.map.set("QuestionCircleOutlined",eE.a)}return Object(ue.a)(o,[{key:"get",value:function(r){var n=this.map.get(r);return n}},{key:"set",value:function(r,n){this.map.set(r,n)}},{key:"has",value:function(r){return this.map.has(r)}}]),o}(),tf=new VX,Fq=tf,nM=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.registerHookHub=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ra.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Bi,a=[r.graphOptions.registerHook({name:"add snapline options",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:c.snapline={enabled:!0,className:"xflow-snapline",clean:5e3};case 1:case"end":return v.stop()}},f)}))}})],t.pushAll(a),u.abrupt("return",ra.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});nM=$e([he.singleton({contrib:lc})],nM);var HX=function(){return he.Module(function(i){i(nM)})},WX="CanvasSnapline",$X="#faad14",KX=function(i){var r=i.color,n=r===void 0?$X:r,e=cc(),t=I.a.useMemo(function(){return{CONFIG_TYPE:WX,getConfig:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function s(){return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",{});case 1:case"end":return l.stop()}},s)}))}}},[]);return I.a.useEffect(function(){var a="xflow-snapline-".concat(Date.now());e.addContainerClassNames(a);var s=`
    .`.concat(a,` .xflow-snapline .x6-widget-snapline-horizontal,
    .`).concat(a,` .xflow-snapline .x6-widget-snapline-vertical {
      border-color: `).concat(n,`;
    }`),u=CD(s);return function(){document.head.removeChild(u)}},[n,e]),I.a.createElement(I0,{config:t,createModule:HX})},tE=h("3S7+"),Fh;(function(o){o.MOUSE_ENTER="node-port:mouseenter",o.MOUSE_LEAVE="node-port:mouseleave"})(Fh||(Fh={}));var nE;(function(o){var i=this;o.id="ACTIVE_NODE_PORT",o.useModel=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,r.awaitModel(o.id);case 2:return e=s.sent,s.next=5,e.getValidValue();case 5:return t=s.sent,s.abrupt("return",{data:t,model:e});case 7:case"end":return s.stop()}},n)}))}})(nE||(nE={}));var rE=function(){function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.getGraphInstance=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.graphProvider.getGraphInstance();case 2:return n=a.sent,a.next=5,this.graphProvider.getGraphOptions();case 5:return e=a.sent,a.abrupt("return",{graph:n,config:e});case 7:case"end":return a.stop()}},r,this)}))},this.getPortRenderConfig=function(){var r={onPortRendered:function(e){var t=this,a=e.port,s=e.node,u=e.contentSelectors,l=u&&u["xflow-port-group"];l instanceof Element&&(l.setAttribute("class",dt()("xflow-port-group",{connected:a.connected&&a.group!=="out",groupPort:(s==null?void 0:s.isGroup)&&(s==null?void 0:s.isGroup())})),l.addEventListener("mouseenter",function(c){var f={e:c,portId:a.id,nodeId:s.id,portData:a,nodeData:s.getData(),tooltip:a.tooltip,placement:a.group};t.trigger(Fh.MOUSE_ENTER,f)}),l.addEventListener("mouseleave",function(c){var f={e:c,portId:a.id,nodeId:s.id,portData:a,nodeData:s.getData(),tooltip:a.tooltip,placement:a.group};t.trigger(Fh.MOUSE_LEAVE,f)}))}};return r},this.registerHookHub=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ra.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Bi,a=[r.graphOptions.registerHook({name:"add onPortRendered options ",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:Object.assign(c,this.getPortRenderConfig());case 1:case"end":return v.stop()}},f,this)}))}})],t.pushAll(a),u.abrupt("return",ra.create(function(){}));case 4:case"end":return u.stop()}},n)}))}}return Object(ue.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:nE.id,watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u,l,c,f,d;return Object(D.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.getGraphInstance();case 2:return s=m.sent,u=s.graph,l=s.config,c=function(C){var O=C.target.getBoundingClientRect(),x=O.x,T=O.y,L=O.width,_=O.height,z=l.rootContainer.getBoundingClientRect(),Q={x:x-((z==null?void 0:z.x)||0)+L/2,y:T-((z==null?void 0:z.y)||0)+_/2};return Q},f=function(C){t.setValue(Object.assign(Object.assign({},C),{position:c(C.e)}))},d=function(){t.setValue(null)},u.on(Fh.MOUSE_ENTER,f),u.on(Fh.MOUSE_LEAVE,d),u.on("cell:mouseleave",d),m.abrupt("return",ra.create(function(){u.off(Fh.MOUSE_ENTER,f),u.off(Fh.MOUSE_LEAVE,d)}));case 12:case"end":return m.stop()}},a,this)}))}})}}]),o}();$e([he.inject(Wv),Be("design:type",Object)],rE.prototype,"graphProvider",void 0),rE=$e([he.singleton({contrib:[lc,Hv]})],rE);var XX=function(){return he.Module(function(i){i(rE)})},YX="CanvasNodePortTooltip",JX=function(i){var r=Yo(),n=kg(null),e=Object(je.a)(n,3),t=e[0],a=e[2];I.a.useEffect(function(){if(!!r){var l=function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function d(){var v,m;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,nE.useModel(r.modelService);case 2:return v=C.sent,m=v.model,C.abrupt("return",m.watch(function(O){a.setValue(O)}));case 5:case"end":return C.stop()}},d)}))},c=l();return function(){c.then(function(f){f.dispose()})}}},[a,r]);var s=!!(t&&t.position&&t.position.x);if(!s)return null;var u=i.getTooltip?i.getTooltip(t):t.tooltip;return I.a.createElement(tE.a,{visible:s,title:u,placement:t.placement||"top"},I.a.createElement("span",{className:"canvas-node-port-tooltip",style:{position:"absolute",left:t.position.x,top:t.position.y}}))},ZX=function(i){var r=I.a.useCallback(function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}},n)}))},[]);return I.a.createElement(I0,{createModule:XX,config:{CONFIG_TYPE:YX,getConfig:r}},I.a.createElement(JX,Object.assign({},i)))},rM;(function(o){o.CONFIG_TYPE="ContextMenuConfig"})(rM||(rM={}));var Ty=function(){function o(i){var r=this;Object(me.a)(this,o),this.CONFIG_TYPE=rM.CONFIG_TYPE,this.setMenuModelService=function(n){r.menuModelService=n},this.setCustomMenuRender=function(n){r.menuCustomRender=n},this.getConfig=function(){return pe(r,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{CONFIG_TYPE:this.CONFIG_TYPE,menuCustomRender:this.menuCustomRender,menuModelService:this.menuModelService});case 1:case"end":return t.stop()}},n,this)}))},this.moduleId=i||$c()}return Object(ue.a)(o,[{key:"dispose",value:function(){}}]),o}(),aE;(function(o){o.id="CONTEXT_MENU_MODEL",o.useValue=de.useModelValueUtil(o.id),o.getModel=de.getModelUtil(o.id)})(aE||(aE={}));var QN=he.inject,QX=he.singleton,Py=function(){function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.getMenuModelValue=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s,u,l,c,f;return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,this.menuConfig.getConfig();case 2:if(e=v.sent,t=r.anchor,a=r.type,s=r.cell,u=new Bi,this.toDispose.push(u),l=s?s.getData():null,c=new zv({id:"menuroot",type:QC.Root,submenu:[]}),u.push(ra.create(function(){c.dispose()})),f={toDispose:u,anchor:t,target:{data:l,type:a},customRender:null,menuModel:c},!e.menuCustomRender){v.next=14;break}return v.next=13,e.menuCustomRender(r,this.modelService);case 13:f.customRender=v.sent;case 14:if(!e.menuModelService){v.next=17;break}return v.next=17,e.menuModelService(r,f.menuModel,this.modelService,u);case 17:return v.abrupt("return",f);case 18:case"end":return v.stop()}},n,this)}))}}return Object(ue.a)(o,[{key:"registerModel",value:function(r){var n=this,e=[r.registerModel({id:aE.id,getInitialValue:function(){return null},watchChange:function(a,s){return pe(n,void 0,void 0,Object(D.a)().mark(function u(){var l=this,c;return Object(D.a)().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,de.CONTEXTMENU_TARGET.getModel(s);case 2:return c=d.sent,d.abrupt("return",c.watch(function(v){return pe(l,void 0,void 0,Object(D.a)().mark(function m(){var y;return Object(D.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,this.getMenuModelValue(v);case 2:y=O.sent,a.setValue(y);case 4:case"end":return O.stop()}},m,this)}))}));case 4:case"end":return d.stop()}},u)}))}})];this.toDispose.pushAll(e)}}]),o}();$e([QN(Ty),Be("design:type",Ty)],Py.prototype,"menuConfig",void 0),$e([QN(Vv),Be("design:type",Object)],Py.prototype,"modelService",void 0),Py=$e([QX({contrib:[Hv]})],Py);var qX=function(i){return he.Module(function(r){r(Py),r(Ty,{useValue:i})})},vl=h("VTBJ"),iu=h("rePB"),qN=h("ODXe"),ej=h("Ff2n"),eY=h("uciX"),Dg={adjustX:1,adjustY:1},Ig=[0,0],tY={topLeft:{points:["bl","tl"],overflow:Dg,offset:[0,-4],targetOffset:Ig},topCenter:{points:["bc","tc"],overflow:Dg,offset:[0,-4],targetOffset:Ig},topRight:{points:["br","tr"],overflow:Dg,offset:[0,-4],targetOffset:Ig},bottomLeft:{points:["tl","bl"],overflow:Dg,offset:[0,4],targetOffset:Ig},bottomCenter:{points:["tc","bc"],overflow:Dg,offset:[0,4],targetOffset:Ig},bottomRight:{points:["tr","br"],overflow:Dg,offset:[0,4],targetOffset:Ig}},nY=tY,ni={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(i){var r=i.keyCode;if(i.altKey&&!i.ctrlKey||i.metaKey||r>=ni.F1&&r<=ni.F12)return!1;switch(r){case ni.ALT:case ni.CAPS_LOCK:case ni.CONTEXT_MENU:case ni.CTRL:case ni.DOWN:case ni.END:case ni.ESC:case ni.HOME:case ni.INSERT:case ni.LEFT:case ni.MAC_FF_META:case ni.META:case ni.NUMLOCK:case ni.NUM_CENTER:case ni.PAGE_DOWN:case ni.PAGE_UP:case ni.PAUSE:case ni.PRINT_SCREEN:case ni.RIGHT:case ni.SHIFT:case ni.UP:case ni.WIN_KEY:case ni.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(i){if(i>=ni.ZERO&&i<=ni.NINE||i>=ni.NUM_ZERO&&i<=ni.NUM_MULTIPLY||i>=ni.A&&i<=ni.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&i===0)return!0;switch(i){case ni.SPACE:case ni.QUESTION_MARK:case ni.NUM_PLUS:case ni.NUM_MINUS:case ni.NUM_PERIOD:case ni.NUM_DIVISION:case ni.SEMICOLON:case ni.DASH:case ni.EQUALS:case ni.COMMA:case ni.PERIOD:case ni.SLASH:case ni.APOSTROPHE:case ni.SINGLE_QUOTE:case ni.OPEN_SQUARE_BRACKET:case ni.BACKSLASH:case ni.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},tj=ni,nj=function(i){return+setTimeout(i,16)},rj=function(i){return clearTimeout(i)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(nj=function(i){return window.requestAnimationFrame(i)},rj=function(i){return window.cancelAnimationFrame(i)});var aj=0,aM=new Map;function ij(o){aM.delete(o)}var oj=function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;aj+=1;var n=aj;function e(t){if(t===0)ij(n),i();else{var a=nj(function(){e(t-1)});aM.set(n,a)}}return e(r),n};oj.cancel=function(o){var i=aM.get(o);return ij(i),rj(i)};var rY=oj,aY=tj.ESC,iY=tj.TAB;function oY(o){var i=o.visible,r=o.setTriggerVisible,n=o.triggerRef,e=o.menuRef,t=o.onVisibleChange,a=o.autoFocus,s=tt.useRef(!1),u=function(){if(i&&n.current){var d,v,m,y;(d=n.current)===null||d===void 0||(v=d.triggerRef)===null||v===void 0||(m=v.current)===null||m===void 0||(y=m.focus)===null||y===void 0||y.call(m),r(!1),typeof t=="function"&&t(!1)}},l=function(){var d,v;(d=e.current)===null||d===void 0||(v=d.focus)===null||v===void 0||v.call(d),s.current=!0},c=function(d){var v;switch(d.keyCode){case aY:u();break;case iY:!s.current&&((v=e.current)===null||v===void 0?void 0:v.focus)?(d.preventDefault(),l()):u();break}};tt.useEffect(function(){return i?(window.addEventListener("keydown",c),a&&rY(l,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}},[i])}var sj=h("U8pU"),sY=h("UTAp");function uY(o,i,r){var n=tt.useRef({});return(!("value"in n.current)||r(n.current.condition,i))&&(n.current.value=o(),n.current.condition=i),n.current.value}function lY(o,i){typeof o=="function"?o(i):Object(sj.a)(o)==="object"&&o&&"current"in o&&(o.current=i)}function uj(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];var n=i.filter(function(e){return e});return n.length<=1?n[0]:function(e){i.forEach(function(t){lY(t,e)})}}function Bq(){for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return uY(function(){return uj.apply(void 0,i)},i,function(n,e){return n.length===e.length&&n.every(function(t,a){return t===e[a]})})}function cY(o){var i,r,n=Object(sY.isMemo)(o)?o.type.type:o.type;return!(typeof n=="function"&&!((i=n.prototype)!==null&&i!==void 0&&i.render)||typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render))}var fY=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function dY(o,i){var r=o.arrow,n=r===void 0?!1:r,e=o.prefixCls,t=e===void 0?"rc-dropdown":e,a=o.transitionName,s=o.animation,u=o.align,l=o.placement,c=l===void 0?"bottomLeft":l,f=o.placements,d=f===void 0?nY:f,v=o.getPopupContainer,m=o.showAction,y=o.hideAction,C=o.overlayClassName,O=o.overlayStyle,x=o.visible,T=o.trigger,L=T===void 0?["hover"]:T,_=o.autoFocus,z=Object(ej.a)(o,fY),Q=tt.useState(),q=Object(qN.a)(Q,2),ye=q[0],Ce=q[1],Ae="visible"in o?x:ye,Pe=tt.useRef(null);tt.useImperativeHandle(i,function(){return Pe.current});var qe=tt.useRef(null),lt="".concat(t,"-menu");oY({visible:Ae,setTriggerVisible:Ce,triggerRef:Pe,menuRef:qe,onVisibleChange:o.onVisibleChange,autoFocus:_});var ze=function(){var dr=o.overlay,ga;return typeof dr=="function"?ga=dr():ga=dr,ga},ht=function(dr){var ga=o.onOverlayClick,ca=ze().props;Ce(!1),ga&&ga(dr),ca.onClick&&ca.onClick(dr)},nn=function(dr){var ga=o.onVisibleChange;Ce(dr),typeof ga=="function"&&ga(dr)},Tn=function(){var dr,ga=ze(),ca=uj(qe,ga.ref),Ta=(dr={prefixCls:lt},Object(iu.a)(dr,"data-dropdown-inject",!0),Object(iu.a)(dr,"onClick",ht),Object(iu.a)(dr,"ref",cY(ga)?ca:void 0),dr);return typeof ga.type=="string"&&(delete Ta.prefixCls,delete Ta["data-dropdown-inject"]),tt.createElement(tt.Fragment,null,n&&tt.createElement("div",{className:"".concat(t,"-arrow")}),tt.cloneElement(ga,Ta))},Kn=function(){var dr=o.overlay;return typeof dr=="function"?Tn:Tn()},zn=function(){var dr=o.minOverlayWidthMatchTrigger,ga=o.alignPoint;return"minOverlayWidthMatchTrigger"in o?dr:!ga},An=function(){var dr=o.openClassName;return dr!==void 0?dr:"".concat(t,"-open")},br=function(){var dr=o.children,ga=dr.props?dr.props:{},ca=dt()(ga.className,An());return Ae&&dr?tt.cloneElement(dr,{className:ca}):dr},sn=y;return!sn&&L.indexOf("contextMenu")!==-1&&(sn=["click"]),tt.createElement(eY.a,Object(vl.a)(Object(vl.a)({builtinPlacements:d},z),{},{prefixCls:t,ref:Pe,popupClassName:dt()(C,Object(iu.a)({},"".concat(t,"-show-arrow"),n)),popupStyle:O,action:L,showAction:m,hideAction:sn||[],popupPlacement:c,popupAlign:u,popupTransitionName:a,popupAnimation:s,popupVisible:Ae,stretch:zn()?"minWidth":"",popup:Kn(),onPopupVisibleChange:nn,getPopupContainer:v}),br())}var hY=tt.forwardRef(dY),vY=hY,iE=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.trigger,s=e.disabled,u="".concat(this.props.prefixCls,"-dropdown"),l=I.a.Children.only(t),c=I.a.cloneElement(l,{className:dt()(t.props.className,"".concat(u,"-trigger")),disabled:s}),f=s?[]:Array.isArray(a)?a:[a],d=!1;f&&f.indexOf("contextMenu")!==-1&&(d=!0);var v=I.a.Children.only(this.props.overlay),m=I.a.createElement("div",{className:"".concat(u,"-overlay")},v);return I.a.createElement(vY,Object.assign({},this.props,{prefixCls:u,overlay:m,alignPoint:d,trigger:f}),c)}}]),r}(I.a.Component);(function(o){o.defaultProps={trigger:"hover",prefixCls:"x6",mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft"}})(iE||(iE={}));var oE=I.a.createContext({}),ky=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.onHotkey=function(){n.triggerHandler()},n.onClick=function(e){n.triggerHandler(e)},n}return Object(ue.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.hotkey;e&&this.props.context.registerHotkey(e,this.onHotkey)}},{key:"componentWillUnmount",value:function(){var e=this.props.hotkey;e&&this.props.context.unregisterHotkey(e,this.onHotkey)}},{key:"triggerHandler",value:function(e){!this.props.disabled&&!this.props.hidden&&(this.props.name&&this.props.context.onClick(this.props.name,e),this.props.onClick&&this.props.onClick())}},{key:"render",value:function(){return I.a.createElement("div",Object.assign({},r.getProps(this.props)),r.getContent(this.props,this.onClick))}}]),r}(I.a.PureComponent);(function(o){function i(n,e){var t,a=n.className,s=n.disabled,u=n.active,l=n.hidden,c=n.context.prefixCls,f="".concat(c,"-item");return{className:dt()(f,e,(t={},Object(Re.a)(t,"".concat(f,"-active"),u),Object(Re.a)(t,"".concat(f,"-hidden"),l),Object(Re.a)(t,"".concat(f,"-disabled"),s),t),a)}}o.getProps=i;function r(n,e,t,a){var s=n.icon,u=n.text,l=n.hotkey,c=n.children,f=n.context.prefixCls,d="".concat(f,"-item");return I.a.createElement(I.a.Fragment,null,I.a.createElement("button",{type:"button",className:"".concat(d,"-button"),onClick:e},s&&I.a.isValidElement(s)&&I.a.createElement("span",{className:"".concat(d,"-icon")},s),I.a.createElement("span",{className:"".concat(d,"-text")},u||c),l&&I.a.createElement("span",{className:"".concat(d,"-hotkey")},l),t),a)}o.getContent=r})(ky||(ky={}));var pY=function(i){return I.a.createElement(oE.Consumer,null,function(r){return I.a.createElement(ky,Object.assign({context:r},i))})},gY=function(){return I.a.createElement(oE.Consumer,null,function(i){var r=i.prefixCls;return I.a.createElement("div",{className:"".concat(r,"-item ").concat(r,"-item-divider")})})},mY=function(o,i){var r={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&i.indexOf(n)<0&&(r[n]=o[n]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var e=0,n=Object.getOwnPropertySymbols(o);e<n.length;e++)i.indexOf(n[e])<0&&Object.prototype.propertyIsEnumerable.call(o,n[e])&&(r[n[e]]=o[n[e]]);return r},yY=function(i){var r=i.hotkey,n=i.children,e=mY(i,["hotkey","children"]);return I.a.createElement(oE.Consumer,null,function(t){var a=t.prefixCls,s=ky.getProps(Object.assign({context:t},i),"".concat(a,"-submenu"));return I.a.createElement("div",Object.assign({},s),ky.getContent(Object.assign({context:t},e),null,I.a.createElement("span",{className:"".concat(a,"-submenu-arrow")}),I.a.createElement("div",{className:"".concat(a,"-submenu-menu")},n)))})},Bh=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.onClick=function(e,t){n.props.stopPropagation&&t!=null&&t.stopPropagation(),n.props.onClick&&n.props.onClick(e)},n.registerHotkey=function(e,t){n.props.registerHotkey&&n.props.registerHotkey(e,t)},n.unregisterHotkey=function(e,t){n.props.unregisterHotkey&&n.props.unregisterHotkey(e,t)},n}return Object(ue.a)(r,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.className,s=e.children,u=e.hasIcon,l="".concat(t,"-menu"),c=oE.Provider,f={prefixCls:l,onClick:this.onClick,registerHotkey:this.registerHotkey,unregisterHotkey:this.unregisterHotkey};return I.a.createElement("div",{className:dt()(l,Object(Re.a)({},"".concat(l,"-has-icon"),u),a)},I.a.createElement(c,{value:f},s))}}]),r}(I.a.PureComponent);(function(o){o.Item=pY,o.Divider=gY,o.SubMenu=yY,o.defaultProps={prefixCls:"x6",stopPropagation:!1}})(Bh||(Bh={}));var bY=function o(i){var r=i.idx,n=i.menuOptions,e=i.target,t=i.modelService,a=i.commandService,s=i.onHide,u=n.id,l=n.label,c=n.isEnabled,f=c===void 0?!0:c,d=n.isVisible,v=d===void 0?!0:d,m=n.iconName,y=n.submenu,C=y===void 0?[]:y,O=n.active,x=n.hotkey,T=n.render,L=n.onClick;if(!v)return null;if(n.type==="separator")return I.a.createElement(Bh.Divider,{key:String(n.id)+r});if(n.type==="root")return I.a.createElement(Bh,{hasIcon:!0},C.map(function(q,ye){return o({idx:ye,target:e,commandService:a,modelService:t,menuOptions:q,onHide:s})}));if(n.submenu&&Array.isArray(n.submenu)){var _=tf.get(m),z=!f;return I.a.createElement(Bh.SubMenu,{key:String(u),text:l,disabled:z||C.length===0,icon:_?I.a.createElement(_,null):null,active:O,hotkey:x},C.map(function(q,ye){return o({idx:ye,target:e,commandService:a,modelService:t,menuOptions:q,onHide:s})}))}var Q=tf.get(m);return T?I.a.createElement(T,{menuItem:n,target:e,commandService:a,modelService:t,onHide:s},[I.a.createElement(Bh.Item,{key:String(u),text:l,disabled:!f,icon:Q?I.a.createElement(Q,null):null,active:O,hotkey:x})]):I.a.createElement(Bh.Item,{key:String(u),text:l,disabled:!f,icon:Q?I.a.createElement(Q,null):null,active:O,hotkey:x,onClick:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function ye(){return Object(D.a)().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return Ae.next=2,L({menuItem:n,target:e,commandService:a,modelService:t});case 2:s&&s();case 3:case"end":return Ae.stop()}},ye)}))}})},CY=function(i){var r=i.menuModel,n=i.target,e=i.onHide,t=Yo(),a=t.modelService,s=t.commandService,u=KN(r),l=Object(je.a)(u,1),c=l[0];return bY({idx:-1,target:n,commandService:s,modelService:a,menuOptions:c,onHide:e})},EY=function(i){var r=i.toDispose;return I.a.useEffect(function(){return function(){r.dispose()}},[r]),null},OY=function(){var i=I.a.useRef(),r=Yo(),n=LX({getModel:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function y(){return Object(D.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,aE.getModel(r.modelService);case 2:return O.abrupt("return",O.sent);case 3:case"end":return O.stop()}},y)}))},initialState:{anchor:null,menuModel:null,target:null,customRender:null,toDispose:null}}),e=Object(je.a)(n,3),t=e[0],a=e[2],s=t.target,u=t.anchor,l=t.menuModel,c=t.customRender,f=t.toDispose;if(!s||!u||!l)return null;var d=function(){a.setValue({anchor:null,menuModel:null,target:null,customRender:null,toDispose:null})},v=c?I.a.createElement(c,{target:s,modelService:r.modelService,onHide:d}):I.a.createElement(CY,{target:s,menuModel:l,onHide:d});return I.a.createElement("div",{className:"xflow-menu-mask",ref:i,onClick:d,onContextMenu:function(y){y.preventDefault(),y.stopPropagation()}},I.a.createElement(EY,{toDispose:f}),I.a.createElement(iE,{visible:!0,getPopupContainer:function(){return i.current},overlay:v},I.a.createElement("div",{className:"xflow-context-menu-anchor",style:{top:u.y,left:u.x}})))},Gq="CanvasContextMenu",wY=function(i){var r=Yo(),n=!!r,e=I.a.useMemo(function(){return i.config?i.config:new Ty},[i.config]);return I.a.createElement(I0,{createModule:qX,config:e},n&&I.a.createElement(OY,{config:e}))},xY=function(i){return function(r){var n=I.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=I.a.useMemo(function(){var t=new Ty;return i(t,n),t},[n]);return e}},iM="CanvasToolbar",lj=function(){function o(){var i=this;Object(me.a)(this,o),this.CONFIG_TYPE=iM,this.setToolbarName=function(r){i.moduleId=iM+"__"+r},this.setToolbarModelService=function(r){i.toolbarModelService=r},this.setCustomToolbarRender=function(r){i.customRenderService=r},this.getConfig=function(){return{CONFIG_TYPE:i.CONFIG_TYPE,toolbarCustomRender:i.customRenderService,toolbarModelService:i.toolbarModelService}},this.moduleId=iM+"__"+$c()}return Object(ue.a)(o,[{key:"dispose",value:function(){}}]),o}(),cj=h("W9HT"),oM=I.a.createContext({}),SY=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.handleClick=function(){n.processClick()},n.handleDropdownItemClick=function(e){n.processClick(e,!1)},n}return Object(ue.a)(r,[{key:"processClick",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.name,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.props.dropdown;!this.props.disabled&&!t&&(e&&this.props.context.onClick(e),this.props.onClick&&this.props.onClick(e))}},{key:"renderButton",value:function(){var e,t=this.props,a=t.className,s=t.hidden,u=t.disabled,l=t.active,c=t.icon,f=t.text,d=t.dropdown,v=t.dropdownArrow,m=t.tooltip,y=t.tooltipProps,C=t.tooltipAsTitle,O=t.children,x=this.props.context.prefixCls,T="".concat(x,"-item"),L={onClick:this.handleClick,className:dt()(T,(e={},Object(Re.a)(e,"".concat(T,"-hidden"),s),Object(Re.a)(e,"".concat(T,"-active"),l),Object(Re.a)(e,"".concat(T,"-disabled"),u),Object(Re.a)(e,"".concat(T,"-dropdown"),d),e),a)};m&&C&&(L.title=m);var _=I.a.createElement("button",Object.assign({type:"button"},L),c&&I.a.isValidElement(c)&&I.a.createElement("span",{className:"".concat(T,"-icon")},c),(f||O)&&I.a.createElement("span",{className:"".concat(T,"-text")},f||O),d&&v&&I.a.createElement("span",{className:"".concat(T,"-dropdown-arrow")}));return m&&!C&&!u?I.a.createElement(tE.a,Object.assign({title:m,placement:"bottom",mouseEnterDelay:0,mouseLeaveDelay:0},y),_):_}},{key:"render",value:function(){var e=this.props,t=e.dropdown,a=e.dropdownProps,s=e.disabled,u=this.renderButton();if(t!=null&&!s){var l=I.a.createElement("div",null,t.type===Bh?I.a.cloneElement(t,{onClick:this.handleDropdownItemClick}):t),c=Object.assign(Object.assign({trigger:["click"]},a),{disabled:s,overlay:l});return I.a.createElement(iE,Object.assign({},c),u)}return u}}]),r}(I.a.PureComponent),fj=function(i){return I.a.createElement(oM.Consumer,null,function(r){return I.a.createElement(SY,Object.assign({context:r},i))})};fj.defaultProps={dropdownArrow:!0};var AY=function(i){var r=i.children,n=i.className;return I.a.createElement(oM.Consumer,null,function(e){var t=e.prefixCls;return I.a.createElement("div",{className:dt()("".concat(t,"-group"),n)},r)})},Rg=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){var n;return Object(me.a)(this,r),n=i.apply(this,arguments),n.onClick=function(e,t){n.props.onClick&&n.props.onClick(e,t)},n}return Object(ue.a)(r,[{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,s=t.className,u=t.children,l=t.extra,c=t.size,f=t.align,d=t.hoverEffect,v="".concat(a,"-toolbar");return I.a.createElement("div",{className:dt()(v,s,(e={},Object(Re.a)(e,"".concat(v,"-").concat(c),c),Object(Re.a)(e,"".concat(v,"-align-right"),f==="right"),Object(Re.a)(e,"".concat(v,"-hover-effect"),d),e))},I.a.createElement("div",{className:"".concat(v,"-content")},I.a.createElement("div",{className:"".concat(v,"-content-inner")},I.a.createElement(oM.Provider,{value:{prefixCls:v,onClick:this.onClick}},u)),l&&I.a.createElement("div",{className:"".concat(v,"-content-extras")},l)))}}]),r}(I.a.PureComponent);(function(o){o.Item=fj,o.Group=AY,o.defaultProps={prefixCls:"x6",hoverEffect:!1}})(Rg||(Rg={}));var MY=function(i){var r=Yo(),n=i.item,e=i.layout,t=dt()(Object(Re.a)({},"xflow-toolbar-item",!0)),a=e==="vertical"?"":n.text,s=void 0;if(n.icon)s=n.icon;else if(n.iconName){var u=tf.get(n.iconName);s=I.a.createElement(u,null)}var l=n.render,c=n.isEnabled,f=c===void 0?!0:c,d=r.commandService,v=r.modelService,m=function(){n.onClick&&n.onClick({toolbarItem:n,commandService:d,modelService:v})};return l?I.a.createElement(l,Object.assign({},n,{onClick:m}),I.a.createElement(Rg.Item,Object.assign({},n,{icon:s,text:a,className:t,disabled:!f,tooltip:n.tooltip||n.text,tooltipProps:Object.assign({placement:e==="vertical"?"left":"bottom"},n.tooltipProps),onClick:function(){}}))):I.a.createElement(Rg.Item,Object.assign({},n,{icon:s,text:a,className:t,hidden:!n,disabled:!f,tooltip:n.tooltip||n.text,onClick:m,tooltipProps:Object.assign(Object.assign({},n.tooltipProps),{placement:e==="vertical"?"left":"bottom"})}))},TY=function(i){var r=i.group,n=i.layout,e=I.a.useMemo(function(){return r.name||$c()},[r.name]),t=r.items,a=t===void 0?[]:t;if(a.length===0)return null;var s=dt()(Object(Re.a)({},"xflow-toolbar-group",!0));return I.a.createElement(Rg.Group,{className:s,key:e},a.map(function(u){return I.a.createElement(MY,{item:u,layout:n,key:u.id})}))},PY=function(i){var r=i.config,n=r.moduleId,e=Yo(),t=kg({name:n,layout:i.layout,mainGroups:[],extraGroups:[],customRender:null}),a=Object(je.a)(t,4),s=a[0],u=a[1],l=a[2],c=a[3];return I.a.useEffect(function(){var f=new Bi,d=e.modelService.findDeferredModel(n);if(!d){var v=r.getConfig(),m=v.toolbarCustomRender,y=v.toolbarModelService,C=e.modelService.registerModel({id:n,modelFactory:function(){return l},watchChange:function(x){return pe(void 0,void 0,void 0,Object(D.a)().mark(function T(){var L;return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!y){z.next=3;break}return z.next=3,y(x,e.modelService,f);case 3:if(!m){z.next=7;break}return L=function(q){x.setValue(function(ye){return ye.customRender=q})},z.next=7,m(e.modelService,L);case 7:return z.abrupt("return",f);case 8:case"end":return z.stop()}},T)}))}});f.push(C)}return function(){f.dispose()}},[]),{isModelReady:c,state:s,setState:u,toolbarModel:l}},dj=function(i){var r=i.idx,n=i.groups,e=i.layout,t=i.toolbarOptions,a=t.hoverEffect,s=a===void 0?!0:a;return I.a.createElement(Rg,{hoverEffect:s},n.map(function(u,l){var c=r+l;return I.a.createElement(TY,{key:c,group:u,layout:e})}))},kY=function(i){var r,n=PY(i),e=n.isModelReady,t=n.state,a=Gl(i.position),s=t.mainGroups,u=s===void 0?[]:s,l=t.extraGroups,c=l===void 0?[]:l,f=t.layout,d=t.customRender,v=dt()(i.className,f,"xflow-toolbar"),m=dt()((r={},Object(Re.a)(r,f,!0),Object(Re.a)(r,"xflow-toolbar-root",!0),r));return e?d?I.a.createElement("div",{className:v,style:Object.assign(Object.assign({},a),i.style)},I.a.createElement(d,{config:t})):I.a.createElement("div",{className:v,style:Object.assign(Object.assign({},a),i.style)},I.a.createElement("div",{className:m},u.length>0&&I.a.createElement(dj,{idx:"mainGroups",groups:u,layout:f,toolbarOptions:t}),c.length>0&&I.a.createElement(dj,{idx:"extraGroups",groups:c,layout:f,toolbarOptions:t}))):I.a.createElement("div",{className:v,style:Object.assign(Object.assign({},a),i.style)},I.a.createElement(cj.a,{spinning:!0,size:"small"}))},DY=I.a.memo(kY),hj=function(i){var r=Yo(),n=!!r,e=I.a.useMemo(function(){return i.config?i.config:new lj},[i.config]);return n?I.a.createElement(DY,Object.assign({},i,{config:e})):null},vj=function(i){return function(r){var n=I.a.useMemo(function(){return{getValue:function(){return{}}}},[]);n.getValue=function(){return r};var e=I.a.useMemo(function(){var t=new lj;return i(t,n),t},[n]);return e}},IY=h("C/nq"),RY=h("CqGu"),NY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zm196-50c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zm0-140c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}},{tag:"path",attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z"}}]},name:"one-to-one",theme:"outlined"},jY=NY,Ng=h("6VBw"),pj=function(i,r){return tt.createElement(Ng.a,Object(vl.a)(Object(vl.a)({},i),{},{ref:r,icon:jY}))};pj.displayName="OneToOneOutlined";var LY=tt.forwardRef(pj),_Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},FY=_Y,gj=function(i,r){return tt.createElement(Ng.a,Object(vl.a)(Object(vl.a)({},i),{},{ref:r,icon:FY}))};gj.displayName="CompressOutlined";var BY=tt.forwardRef(gj),GY=h("3R4v"),zY=h("IehP"),Dy;(function(o){tf.set("ZoomInOutlined",IY.a),tf.set("ZoomOutOutlined",RY.a),tf.set("OneToOneOutlined",LY),tf.set("CompressOutlined",BY),tf.set("FullscreenOutlined",GY.a),tf.set("FullscreenExitOutlined",zY.a),o.ZOOM_IN=di.GRAPH_ZOOM.id+"-zoom-in",o.ZOOM_OUT=di.GRAPH_ZOOM.id+"-zoom-out",o.SCALE_TO_ONE=di.GRAPH_ZOOM.id+"-scale-to-one",o.SCALE_TO_FIT=di.GRAPH_ZOOM.id+"-scale-to-fit",o.FULLSCREEN=di.GRAPH_ZOOM.id+"-fullscreen",o.MAX_SCALE=1.5,o.MIN_SCALE=.05,o.zoomOptions={maxScale:o.MAX_SCALE,minScale:o.MIN_SCALE},o.getToolbarConfig=function(i){var r=i.zoomFactor,n=i.fullscreen;return[{name:"main",items:[{id:o.ZOOM_IN,tooltip:"\u653E\u5927",iconName:"ZoomInOutlined",onClick:function(t){var a=t.commandService;a.executeCommand(di.GRAPH_ZOOM.id,{factor:.1,zoomOptions:o.zoomOptions})}},{id:o.ZOOM_OUT,tooltip:"\u7F29\u5C0F",iconName:"ZoomOutOutlined",onClick:function(t){var a=t.commandService;a.executeCommand(di.GRAPH_ZOOM.id,{factor:-.1,zoomOptions:o.zoomOptions})}},{id:o.SCALE_TO_ONE,iconName:"OneToOneOutlined",tooltip:"\u7F29\u653E\u52301:1",isEnabled:r!==1,onClick:function(t){var a=t.commandService;a.executeCommand(di.GRAPH_ZOOM.id,{factor:"real",zoomOptions:o.zoomOptions})}},{id:o.SCALE_TO_FIT,tooltip:"\u7F29\u653E\u5230\u9002\u5E94\u5C4F\u5E55",iconName:"CompressOutlined",onClick:function(t){var a=t.commandService;a.executeCommand(di.GRAPH_ZOOM.id,{factor:"fit",zoomOptions:o.zoomOptions})}},{id:o.FULLSCREEN,tooltip:n?"\u9000\u51FA\u5168\u5C4F":"\u5168\u5C4F",iconName:n?"FullscreenExitOutlined":"FullscreenOutlined",onClick:function(t){var a=t.commandService;a.executeCommand(di.GRAPH_FULLSCREEN.id,{})}}]}]}})(Dy||(Dy={}));var zq="CANVAS_SCALE_TOOLBAR",UY=vj(function(o){o.setToolbarModelService(function(i,r){return pe(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,de.GRAPH_SCALE.useValue(r);case 2:return e=u.sent,i.setValue(function(l){l.mainGroups=Dy.getToolbarConfig({zoomFactor:e.zoomFactor,fullscreen:!1})}),u.next=6,de.GRAPH_FULLSCREEN.getModel(r);case 6:return t=u.sent,t.setValue(!1),t.watch(function(l){i.setValue(function(c){c.mainGroups=Dy.getToolbarConfig({zoomFactor:e.zoomFactor,fullscreen:l})})}),u.next=11,de.GRAPH_SCALE.getModel(r);case 11:a=u.sent,a.watch(function(l){var c=l.zoomFactor;return pe(void 0,void 0,void 0,Object(D.a)().mark(function f(){var d;return Object(D.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,de.GRAPH_FULLSCREEN.useValue(r);case 2:d=m.sent,i.setValue(function(y){y.mainGroups=Dy.getToolbarConfig({zoomFactor:c,fullscreen:d})});case 4:case"end":return m.stop()}},f)}))});case 13:case"end":return u.stop()}},n)}))})}),VY=function(i){var r=UY(i);return I.a.createElement(hj,Object.assign({layout:"vertical"},i,{config:r,position:i.position||{top:12,right:12}}))},dc=h("Vl3Y"),sM=h("2/Rp");function Uq(o){var i=o.className,r=o.layout,n=o.initialValues,e=o.form,t=o.formItems,a=t===void 0?[]:t,s=o.onFinish,u=o.submitButton,l=o.buttonProps;if(!e)return null;var c=r==="vertical"?{padding:"0px 12px"}:{padding:"8px 12px"};return I.a.createElement(dc.a,{size:"small",form:e,style:c,layout:r,onFinish:s,className:i,initialValues:n,labelCol:r==="vertical"?{span:24}:{span:8},wrapperCol:r==="vertical"?{span:24}:{span:16}},a.map(function(f){return I.a.createElement(dc.a.Item,Object.assign({label:f.label,name:f.name,rules:f.rules},f.itemProps),I.a.createElement(f.render,f.renderProps))}),I.a.createElement(dc.a.Item,{wrapperCol:{offset:0,span:24}},u||I.a.createElement(sM.a,Object.assign({type:"primary",htmlType:"submit",style:{width:"100%"}},l),"\u6267\u884C\u547D\u4EE4")))}function Vq(o,i){return Math.floor(Math.random()*(i-o)+o)}var mj=Symbol("IMinimapConfigProvider"),sE=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.registerHookHub=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ra.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Bi,a=[r.graphOptions.registerHook({name:"add minimap options",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d;return Object(D.a)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,this.minimapConfig.getConfig();case 2:d=m.sent,c.minimap=Object.assign({},d);case 4:case"end":return m.stop()}},f,this)}))}})],t.pushAll(a),u.abrupt("return",ra.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});$e([he.inject(mj),Be("design:type",Object)],sE.prototype,"minimapConfig",void 0),sE=$e([he.singleton({contrib:lc})],sE);var HY=function(i){return he.Module(function(r){r(mj,{useDynamic:function(){return i}}),r(sE)})},Iy=function(o){Object(xr.a)(r,o);var i=Object(Sr.a)(r);function r(){return Object(me.a)(this,r),i.apply(this,arguments)}return Object(ue.a)(r,[{key:"renderMarkup",value:function(){return this.renderJSONMarkup({tagName:"rect",selector:"body"})}},{key:"update",value:function(){Object(Aa.a)(Object(Ma.a)(r.prototype),"update",this).call(this,{body:{refWidth:"100%",refHeight:"100%",fill:r.nodeFillColor}})}}]),r}(Vs);Iy.nodeFillColor="#31d0c6",Iy.setNodeFillColor=function(o){Iy.nodeFillColor=o};var WY="CanvasMiniMap",$Y=function(){return{grid:!1,enabled:!0,width:200,height:120,padding:8,graphOptions:{async:!0,getCellView:function(r){if(r.isNode())return Iy},createCellView:function(r){if(r.isEdge())return null}}}},KY=function(i){var r=i.nodeFillColor,n=i.borderColor,e=n===void 0?"#ced4de":n,t=i.handlerColor,a=t===void 0?"rgba(0,0,0,.3)":t,s=i.miniMapClz,u=s===void 0?"":s,l=i.position,c=l===void 0?{bottom:12,right:12}:l,f=i.minimapOptions,d=f===void 0?{}:f,v=I.a.useRef(null),m=I.a.useRef(i.minimapOptions),y=I.a.useMemo(function(){return new Set([u,"xflow-minimap","minimap-instacne-"+Date.now().toString()])},[u]),C=I.a.useMemo(function(){return function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function T(){return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.abrupt("return",Object.assign(Object.assign(Object.assign({},$Y()),m.current),{container:v.current}));case 1:case"end":return _.stop()}},T)}))}},[v]),O=Gl(c);I.a.useEffect(function(){m.current=d},[m,d]),I.a.useEffect(function(){r&&Iy.setNodeFillColor(r)},[r]),I.a.useEffect(function(){var T=Array.from(y).reduce(function(z,Q){return Q?"".concat(z,".").concat(Q):z},""),L=`
      `.concat(T,` .x6-widget-minimap-viewport {
        border: 1px solid `).concat(e,`;
        margin: 0;
      }
      `).concat(T,` .x6-widget-minimap-viewport-zoom {
        border: 1px solid `).concat(a,`;
      }
    `),_=CD(L);return function(){document.head.removeChild(_)}},[e,y,a]);var x=Array.from(y).join(" ");return I.a.createElement(I0,{config:{getConfig:C,CONFIG_TYPE:WY},createModule:HY},I.a.createElement("div",{ref:v,className:x,style:O}))},XY=function(){function o(){Object(me.a)(this,o),this.getValue=function(){return{}}}return Object(ue.a)(o,[{key:"dispose",value:function(){this.getValue=function(){return null}}}]),o}(),Hq=function(){function o(i){Object(me.a)(this,o),this.moduleId=i}return Object(ue.a)(o,[{key:"dispose",value:function(){}}]),o}(),yj=I.a.createContext({propsProxy:null,commandService:null,modelService:null}),Gh=function(){return I.a.useContext(yj)},zh=function(i){var r,n=i.className,e=i.position,t=i.style,a=i.children,s=Yo(),u=Gl(e),l=I.a.useMemo(function(){return new XY},[]);if(I.a.useEffect(function(){return function(){l.dispose()}},[l]),!s||!s.modelService)return null;l.getValue=function(){return i};var c=dt()((r={},Object(Re.a)(r,n,!!n),Object(Re.a)(r,"xflow-workspace-panel",!0),r)),f=s.commandService,d=s.modelService;return I.a.createElement(yj.Provider,{value:{propsProxy:l,commandService:f,modelService:d}},I.a.createElement("div",{className:c,style:Object.assign(Object.assign({},u),t)},a))},bj=h("MJZm"),Cj=h("diRs"),tp=h("ECub"),YY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zm-180 0H238c-13 0-24.8 7.9-29.7 20L136 643.2V256h188.5l119.6 114.4H748V444z"}}]},name:"folder-open",theme:"filled"},JY=YY,Ej=function(i,r){return tt.createElement(Ng.a,Object(vl.a)(Object(vl.a)({},i),{},{ref:r,icon:JY}))};Ej.displayName="FolderOpenFilled";var ZY=tt.forwardRef(Ej),QY={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32z"}}]},name:"folder",theme:"filled"},qY=QY,Oj=function(i,r){return tt.createElement(Ng.a,Object(vl.a)(Object(vl.a)({},i),{},{ref:r,icon:qY}))};Oj.displayName="FolderFilled";var eJ=tt.forwardRef(Oj),jg={HORIRONTAL_NODE:"xflow-node-horizontal-edge",VERTICAL_NODE:"xflow-node-vertical-edge",VERTICAL_GROUP:"xflow-group-vertical-edge"},uE={EDGE:"xflow-edge"},uM="XFLOW_NODE_SHAPE",wj="processing",tJ=160,nJ=32,Lg;(function(o){o.id="GRAPH_STATUS_INFO";var i;(function(r){r.SUCCESS="success",r.PROCESSING="processing",r.ERROR="error",r.DEFAULT="default",r.WARNING="warning"})(i=o.StatusEnum||(o.StatusEnum={})),o.getModel=os(o.id),o.useValue=ss(o.id)})(Lg||(Lg={}));var lE;(function(o){o.QUERY_GRAPH_STATUS={id:"xflow:query-graph-status",label:"\u67E5\u8BE2\u753B\u5E03\u8282\u70B9\u72B6\u6001"}})(lE||(lE={}));var Ry,cE=Oe.AnchorGroup;fo.registry.exist(uM)?Ry=fo.registry.get(uM):Ry=R0.define({width:tJ,height:nJ,shape:uM,view:j.X6_NODE_PORTAL_NODE_VIEW,ports:{groups:{top:{zIndex:2,position:{name:cE.TOP}},bottom:{zIndex:2,position:{name:cE.BOTTOM}},right:{zIndex:2,position:{name:cE.RIGHT}},left:{zIndex:2,position:{name:cE.LEFT}}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%",zIndex:1}},portMarkup:[{tagName:"g",selector:"xflow-port-group",className:"xflow-port-group",attrs:{width:8,height:8,x:-4,y:-4,zIndex:10,magnet:"true"},children:[{tagName:"circle",selector:"xflow-port",className:"xflow-port",attrs:{r:4,fill:"#fff",stroke:"#d9d9d9",zIndex:12}},{tagName:"polygon",selector:"xflow-port-arrow",className:"xflow-port-arrow",attrs:{points:"0,0 8,0 4,4 ",fill:"#d9d9d9",stroke:"#d9d9d9",zIndex:13,transform:"translate(-4,0)"}}]}]});var rJ=bj.a.DirectoryTree,xj=bj.a.TreeNode,aJ=function(i){var r=i.expanded;return r?I.a.createElement(ZY,null):I.a.createElement(eJ,null)},Sj=function(i){return new Ry(i)},Aj=function(i){var r=i.nodeConfig,n=i.onMouseDown,e=i.graphConfig,t=i.modelService,a=i.commandService;if(!e)return I.a.createElement("div",null);if(r.renderComponent)return I.a.createElement("div",{onMouseDown:n},I.a.createElement(r.renderComponent,{data:r,isNodeTreePanel:!0}));var s=e.nodeTypeParser(r)||j.XFLOW_DEFAULT_NODE,u=e.nodeRender.get(s);return I.a.createElement("div",{onMouseDown:n},I.a.createElement(u,{commandService:a,modelService:t,data:r,isNodeTreePanel:!0}))},lM=function(i){var r=Object(tt.useState)(!1),n=Object(je.a)(r,2),e=n[0],t=n[1],a=Object(tt.useState)(),s=Object(je.a)(a,2),u=s[0],l=s[1],c=Yo(),f=c.getGraphConfig;I.a.useEffect(function(){f().then(function(T){l(T.appContainer)})});var d=i.prefixClz,v=i.graphConfig,m=i.commandService,y=i.modelService,C=i.popoverContent,O=i.onMouseDown,x=i.item;return I.a.createElement(I.a.Fragment,null,C&&I.a.createElement(Cj.a,{placement:"right",destroyTooltipOnHide:!0,content:C,visible:e,onVisibleChange:function(L){t(L)},getPopupContainer:function(){return u||document.body}},I.a.createElement("div",{className:"".concat(d,"-node-wrapper"),onMouseEnter:function(){t(!0)}},Aj({graphConfig:v,commandService:m,onMouseDown:O,modelService:y,nodeConfig:x}))),!C&&I.a.createElement("div",{className:"".concat(d,"-node-wrapper"),onMouseEnter:function(){t(!0)}},Aj({graphConfig:v,commandService:m,onMouseDown:O,modelService:y,nodeConfig:x})))},iJ=function(i){var r=i.x6NodeFactory,n=i.dndOptions,e=i.onNodeDrop,t=i.state,a=i.onFolderExpand,s=i.prefixClz,u=Yo(),l=u.graphProvider,c=u.modelService,f=u.commandService,d=I.a.useState(),v=Object(je.a)(d,2),m=v[0],y=v[1],C=I.a.useState(),O=Object(je.a)(C,2),x=O[0],T=O[1],L=I.a.useState(),_=Object(je.a)(L,2),z=_[0],Q=_[1];I.a.useEffect(function(){l.getGraphInstance().then(function(Ce){Q(Ce)})}),I.a.useEffect(function(){if(l.getGraphOptions().then(function(Ae){y(Ae)}),!!z){var Ce=new ae.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},n),{target:z,validateNode:function(Pe){return pe(void 0,void 0,void 0,Object(D.a)().mark(function qe(){var lt;return Object(D.a)().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(lt=Object.assign(Object.assign({},Pe.getData()),Pe.getPosition()),!e){ht.next=6;break}return ht.next=4,e(lt,f,c);case 4:ht.next=7;break;case 6:console.error("onNodeDrop method is required in NodeTree Panel");case 7:return ht.abrupt("return",!1);case 8:case"end":return ht.stop()}},qe)}))}}));T(Ce)}},[f,n,z,l,c,e]);var q=I.a.useCallback(function(Ce){return function(Ae){if(!(!z||!x||!m)){var Pe=m.nodeTypeParser(Ce),qe=Ce.renderComponent?Ce.renderComponent:m.nodeRender.get(Pe),lt=r2(qe,f,c),ze={data:Ce,width:Ce.width||180,height:Ce.height||40,view:m.graphId,component:lt},ht=r?r(ze):Sj(ze);x.start(ht,Ae.nativeEvent)}}},[f,x,z,m,c,r]),ye=I.a.useCallback(function(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Ce.map(function(Ae){var Pe=Ae.isDirectory,qe=Ae.children,lt=Ae.popoverContent;return Pe?I.a.createElement(xj,{icon:aJ,key:Ae.id,title:Ae.label,className:"".concat(s,"-tree-folder")},ye(qe)):I.a.createElement(xj,{isLeaf:!0,key:Ae.id,className:"".concat(s,"-tree-leaf"),icon:I.a.createElement("span",null),title:I.a.createElement(lM,{item:Ae,onMouseDown:q(Ae),popoverContent:lt,prefixClz:s,modelService:c,commandService:f,graphConfig:m})})})},[f,m,c,q,s]);return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(s,"-body"),style:i.style},!t.keyword&&I.a.createElement(rJ,{showIcon:!0,selectable:!1,autoExpandParent:!1,onExpand:a,expandedKeys:t.expandedKeys,className:"".concat(s,"-tree")},ye(t.treeData)),t.searchList.length>0&&I.a.createElement("ul",{className:"".concat(s,"-body-list")},t.searchList.map(function(Ce){return I.a.createElement("li",{key:Ce.id,className:"".concat(s,"-body-list-item")},I.a.createElement(lM,{item:Ce,onMouseDown:q(Ce),popoverContent:Ce.popoverContent,prefixClz:s,modelService:c,commandService:f,graphConfig:m}))})),t.keyword&&t.searchList.length===0&&I.a.createElement(tp.a,{style:{marginTop:"48px"}})))},_g=h("5rEg"),oJ=function(i){var r=i.prefixClz,n=i.onKeywordChange,e=Gh(),t=e.propsProxy,a=t.getValue();return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(r,"-header"),style:i.style},a.header&&I.a.isValidElement(a.header)&&a.header,a.searchService&&I.a.createElement("div",{className:"".concat(r,"-header-search")},I.a.createElement(_g.a,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:function(u){return n(u.target.value)},style:{width:"100%",border:0}}))))},sJ=function(i){var r=i.prefixClz,n=Gh(),e=n.propsProxy,t=e.getValue();return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(r,"-footer"),style:i.style},t.footer&&I.a.isValidElement(t.footer)&&t.footer))},uJ=40,lJ=40,Mj="XFLOW_TREE_PANEL_ROOT_ID",Tj=function(i){var r=i&&i.headerPosition&&i.headerPosition.height||uJ,n=i.footerPosition&&i.footerPosition.height||lJ;return{headerStyle:Gl(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},i.headerPosition)),bodyStyle:Gl(Object.assign({left:0,right:0,top:r,bottom:n},i.bodyPosition)),footerStyle:Gl(Object.assign({left:0,right:0,lineHeight:n,height:n,bottom:0},i.footerPosition))}},cJ=h("qPyV"),fJ=h.n(cJ),Ny;(function(o){var i=this;o.id="TREE_PANEL_MODEL",o.useModel=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.awaitModel(o.id));case 1:case"end":return t.stop()}},n)}))}})(Ny||(Ny={}));var Wq=function(i,r){i.executeCommand(rg.UPDATE_MODEL.id,{getModel:function(e){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Ny.useModel(e));case 1:case"end":return s.stop()}},t)}))},updateModel:r})},dJ=function(i){var r=i.treeDataService,n=i.searchService,e=Yo(),t=e.modelService,a=kg({treeData:[],searchList:[],treeNodeList:[],expandedKeys:[],defaultExpandAll:!1,keyword:""}),s=Object(je.a)(a,3),u=s[0],l=s[1],c=s[2];I.a.useEffect(function(){t.findDeferredModel(Ny.id)||t.registerModel({id:Ny.id,modelFactory:function(){return c},watchChange:function(m){return pe(void 0,void 0,void 0,Object(D.a)().mark(function y(){var C,O,x;return Object(D.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return L.next=2,de.GRAPH_META.getModel(t);case 2:return C=L.sent,O=function(z){return pe(void 0,void 0,void 0,Object(D.a)().mark(function Q(){var q,ye,Ce,Ae,Pe,qe;return Object(D.a)().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:return ze.next=2,r(z,t);case 2:return q=ze.sent,ye=hJ(q),Ce=ye.treeData,Ae=ye.rootNodes,ze.next=6,m.getValidValue();case 6:return Pe=ze.sent,qe=Pe.expandedKeys.length>0?Pe.expandedKeys:Ae.map(function(ht){return ht.id}),ze.abrupt("return",{listData:q,treeData:Ce,expandedKeys:qe});case 9:case"end":return ze.stop()}},Q)}))},x=C.watch(function(_){return pe(void 0,void 0,void 0,Object(D.a)().mark(function z(){var Q;return Object(D.a)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,O(_);case 2:Q=ye.sent,m.setValue({treeNodeList:Q.listData,treeData:Q.treeData,expandedKeys:Q.expandedKeys,defaultExpandAll:!1,keyword:"",searchList:[]});case 4:case"end":return ye.stop()}},z)}))}),L.abrupt("return",ra.create(function(){x.dispose()}));case 6:case"end":return L.stop()}},y)}))}})},[]);var f=I.a.useCallback(function(v){l(function(m){m.expandedKeys=v})},[l]),d=I.a.useCallback(function(v){return pe(void 0,void 0,void 0,Object(D.a)().mark(function m(){var y;return Object(D.a)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(n){O.next=2;break}return O.abrupt("return",console.warn("searchService is not defined"));case 2:if(!v){O.next=9;break}return O.next=5,n(u.treeNodeList,v);case 5:y=O.sent,l(function(x){x.keyword=v,x.searchList=y}),O.next=10;break;case 9:l(function(x){x.keyword="",x.searchList=[]});case 10:case"end":return O.stop()}},m)}))},[n,u.treeNodeList]);return{state:u,setState:l,onKeywordChange:d,onFolderExpand:f}};function hJ(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=function(s){var u=fJ()(s,"id"),l=u.reduce(function(c,f){var d=f.parentId||Mj;c.has(d)||c.set(d,[]);var v=c.get(d);return v.push(f),c},new Map);return l},r=i(UN()(o));function n(a,s){return a.map(function(u){if(s.has(u.id)){var l=s.get(u.id);u.key=u.id,u.isDirectory=!0,u.children=n(l,s)||[]}else u.isLeaf=!0;return u})}var e=r.get(Mj)||[],t=n(e,r);return{treeData:t,rootNodes:e}}var Pj;(function(o){o.id="TREE_PANEL_DATA"})(Pj||(Pj={}));var vJ=function(i){var r=Tj(i),n=r.headerStyle,e=r.bodyStyle,t=r.footerStyle,a=dJ(i),s=a.state,u=a.onFolderExpand,l=a.onKeywordChange;return I.a.createElement(I.a.Fragment,null,I.a.createElement(oJ,Object.assign({},i,{state:s,style:n,onKeywordChange:l})),I.a.createElement(iJ,Object.assign({},i,{state:s,style:e,onFolderExpand:u})),I.a.createElement(sJ,Object.assign({},i,{state:s,style:t})))},$q=function(i){var r=fg("node-dnd-panel");return I.a.createElement(zh,Object.assign({},i,{className:r}),I.a.createElement(vJ,Object.assign({},i,{prefixClz:r})))},pJ=function(i){return new Ry(i)},gJ=function(i){var r=i.x6NodeFactory,n=i.dndOptions,e=i.onNodeDrop,t=Yo(),a=t.graphProvider,s=t.modelService,u=t.commandService,l=I.a.useState(),c=Object(je.a)(l,2),f=c[0],d=c[1],v=I.a.useState(),m=Object(je.a)(v,2),y=m[0],C=m[1],O=I.a.useState(),x=Object(je.a)(O,2),T=x[0],L=x[1];I.a.useEffect(function(){a.getGraphInstance().then(function(z){L(z)}),a.getGraphOptions().then(function(z){d(z)})},[a,L,d]),I.a.useEffect(function(){if(!!T){var z=new ae.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},n),{target:T,validateNode:function(q){return pe(void 0,void 0,void 0,Object(D.a)().mark(function ye(){var Ce;return Object(D.a)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(Ce=Object.assign(Object.assign({},q.getData()),q.getPosition()),!e){Pe.next=6;break}return Pe.next=4,e(Ce,u,s);case 4:Pe.next=7;break;case 6:console.error("onNodeDrop method is required in NodeTree Panel");case 7:return Pe.abrupt("return",!1);case 8:case"end":return Pe.stop()}},ye)}))}}));return C(z),function(){z.dispose()}}},[u,s,n,T,e]);var _=I.a.useCallback(function(z){return function(Q){if(!(!T||!y||!f)&&!z.isDisabled){var q=f.nodeTypeParser(z),ye=z.renderComponent?z.renderComponent:f.nodeRender.get(q),Ce=r2(ye,u,s),Ae={data:z,width:z.width||180,height:z.height||40,view:f.graphId,component:Ce},Pe=r?r(Ae):pJ(Ae);y.start(Pe,Q.nativeEvent)}}},[u,y,T,f,s,r]);return{graphConfig:f,onMouseDown:_,modelService:s,commandService:u}},kj=function(i){var r=i.nodeConfig,n=i.onMouseDown,e=i.graphConfig,t=i.modelService,a=i.commandService;if(!e)return I.a.createElement("div",null);if(r.renderComponent)return I.a.createElement("div",{onMouseDown:n},I.a.createElement(r.renderComponent,{data:r,isNodePanel:!0}));var s=e.nodeTypeParser(r)||j.XFLOW_DEFAULT_NODE,u=e.nodeRender.get(s);return I.a.createElement("div",{onMouseDown:n},I.a.createElement(u,{commandService:a,modelService:t,data:r,isNodeTreePanel:!0}))},Dj=function(i){var r=I.a.useState(!1),n=Object(je.a)(r,2),e=n[0],t=n[1],a=i.prefixClz,s=i.graphConfig,u=i.commandService,l=i.modelService,c=i.popoverContent,f=i.onMouseDown,d=i.item;return I.a.createElement(I.a.Fragment,null,c?I.a.createElement(Cj.a,{placement:"right",destroyTooltipOnHide:!0,content:c,visible:e,onVisibleChange:function(m){t(m)}},I.a.createElement("div",{className:"".concat(a,"-node-wrapper"),onMouseEnter:function(){t(!0)}},kj({graphConfig:s,commandService:u,onMouseDown:f,modelService:l,nodeConfig:d}))):I.a.createElement("div",{className:"".concat(a,"-node-wrapper")},kj({graphConfig:s,commandService:u,onMouseDown:f,modelService:l,nodeConfig:d})))},mJ=function(i){var r=i.searchResult,n=i.prefixClz,e=i.onMouseDown,t=i.modelService,a=i.commandService,s=i.graphConfig;return r.length===0?I.a.createElement(tp.a,{style:{marginTop:"24px"}}):I.a.createElement("ul",{className:"xflow-collapse-search-list"},r.map(function(u){return I.a.createElement("li",{className:"xflow-collapse-search-list-item ".concat(u.isDisabled?"disabled":""),key:u.id},I.a.createElement(Dj,{item:u,onMouseDown:e(u),popoverContent:u.popoverContent,prefixClz:n,modelService:t,commandService:a,graphConfig:s}))}))},yJ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},bJ=yJ,Ij=function(i,r){return tt.createElement(Ng.a,Object(vl.a)(Object(vl.a)({},i),{},{ref:r,icon:bJ}))};Ij.displayName="CaretRightOutlined";var CJ=tt.forwardRef(Ij),EJ=function(i){var r=i.onActiveKeyChange,n=i.collapseData,e=i.prefixClz,t=i.onMouseDown,a=i.modelService,s=i.commandService,u=i.graphConfig,l=function(d){var v=d.header,m=d.extra,y=d.icon,C=d.isCollapsed,O=function(T){T.preventDefault(),r(d.id)};return I.a.createElement("div",{className:"xflow-collapse-header",onClick:O},I.a.createElement("div",{className:"xflow-collapse-header-icon"},t2(y)?I.a.createElement(y,{isCollapsed:C}):I.a.createElement(CJ,{rotate:C?0:90,style:{fontSize:"12px"}})),I.a.createElement("div",{className:"xflow-collapse-header-label"},t2(v)?I.a.createElement(v,d):v),I.a.createElement("div",{className:"xflow-collapse-header-extra"},t2(m)?I.a.createElement(m,d):m))},c=function(d){return I.a.createElement("div",{className:"xflow-collapse-content"},d.map(function(v){return I.a.createElement("div",{className:"xflow-collapse-content-item ".concat(v.isDisabled?"disabled":""),key:v.id},I.a.createElement(Dj,{item:v,onMouseDown:t(v),popoverContent:v.popoverContent,prefixClz:e,modelService:a,commandService:s,graphConfig:u}))}))};return I.a.createElement("ul",{className:"xflow-collapse-list"},n.length===0&&I.a.createElement(tp.a,{style:{marginTop:"24px"}}),n.map(function(f){var d=f.children,v=d===void 0?[]:d,m=f.isCollapsed,y=f.render,C=m?"close":"open";return I.a.createElement("li",{className:"xflow-collapse-list-item ".concat(C),key:f.id},l(f),t2(y)?I.a.createElement(y,f):c(v))}))},OJ=function(i){var r=i.state,n=i.prefixClz,e=i.onActiveKeyChange,t=gJ(i),a=t.graphConfig,s=t.onMouseDown,u=t.modelService,l=t.commandService,c=r.searchResult,f=r.collapseData,d=r.keyword;return I.a.createElement("div",{className:"".concat(n,"-body"),style:i.style},d.length===0&&I.a.createElement(EJ,{onActiveKeyChange:e,collapseData:f,onMouseDown:s,modelService:u,commandService:l,graphConfig:a,prefixClz:n}),d.length>0&&I.a.createElement(mJ,{searchResult:c,onMouseDown:s,modelService:u,commandService:l,graphConfig:a,prefixClz:n}))},wJ=function(i){var r=i.prefixClz,n=i.onKeywordChange,e=i.state,t=Gh(),a=t.propsProxy,s=a.getValue(),u=function(c){var f=e.collapseData.reduce(function(d,v){return v.children&&d.push.apply(d,Object(We.a)(v.children)),d},[]);n(c.target.value,f)};return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(r,"-header"),style:i.style},s.header&&I.a.isValidElement(s.header)&&s.header,s.searchService&&I.a.createElement("div",{className:"".concat(r,"-header-search")},I.a.createElement(_g.a,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:function(c){return u(c)},style:{width:"100%",border:0}}))))},xJ=function(i){var r=i.prefixClz,n=Gh(),e=n.propsProxy,t=e.getValue();return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(r,"-footer"),style:i.style},t.footer&&I.a.isValidElement(t.footer)&&t.footer))},SJ={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M689 165.1L308.2 493.5c-10.9 9.4-10.9 27.5 0 37L689 858.9c14.2 12.2 35 1.2 35-18.5V183.6c0-19.7-20.8-30.7-35-18.5z"}}]},name:"caret-left",theme:"outlined"},AJ=SJ,Rj=function(i,r){return tt.createElement(Ng.a,Object(vl.a)(Object(vl.a)({},i),{},{ref:r,icon:AJ}))};Rj.displayName="CaretLeftOutlined";var MJ=tt.forwardRef(Rj),TJ=function(i){var r=i.prefixClz,n=i.onCollapseBtnClick,e=i.isCollapsed,t=i.collapseButtonStyle,a=i.style;return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(r,"-header"),style:Object.assign(Object.assign({},a),t),onClick:n},I.a.createElement(MJ,{rotate:e?180:0})))},PJ=40,kJ=40,DJ=function(i){var r=i&&i.headerPosition&&i.headerPosition.height||PJ,n=i.footerPosition&&i.footerPosition.height||kJ;return{headerStyle:Gl(Object.assign({height:r,lineHeight:r,top:0,left:0,right:0},i.headerPosition)),bodyStyle:Gl(Object.assign({left:0,right:0,top:r,bottom:n},i.bodyPosition)),footerStyle:Gl(Object.assign({left:0,right:0,lineHeight:n,height:n,bottom:0},i.footerPosition))}},jy;(function(o){var i=this;o.id="COLLAPSE_PANEL_DATA",o.useModel=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.awaitModel(o.id));case 1:case"end":return t.stop()}},n)}))}})(jy||(jy={}));var Kq=function(i,r){i.executeCommand(rg.UPDATE_MODEL.id,{getModel:function(e){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",jy.useModel(e));case 1:case"end":return s.stop()}},t)}))},updateModel:r})},IJ=function(i){var r=i.collapsible,n=i.nodeDataService,e=i.searchService,t=i.onCollapseChange,a=Yo(),s=a.modelService,u=kg({keyword:"",collapseData:[],searchResult:[]}),l=Object(je.a)(u,3),c=l[0],f=l[1],d=l[2];I.a.useEffect(function(){s.findDeferredModel(jy.id)||s.registerModel({id:jy.id,modelFactory:function(){return d},watchChange:function(C){return pe(void 0,void 0,void 0,Object(D.a)().mark(function O(){var x,T,L;return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,de.GRAPH_META.getModel(s);case 2:return x=z.sent,T=function(q){return pe(void 0,void 0,void 0,Object(D.a)().mark(function ye(){var Ce;return Object(D.a)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,n(q,s);case 2:return Ce=Pe.sent,Pe.abrupt("return",{collapseData:Ce});case 4:case"end":return Pe.stop()}},ye)}))},L=x.watch(function(Q){return pe(void 0,void 0,void 0,Object(D.a)().mark(function q(){var ye,Ce;return Object(D.a)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return Pe.next=2,T(Q);case 2:ye=Pe.sent,Ce=ye.collapseData,C.setValue(function(qe){qe.keyword="",qe.collapseData=Ce,qe.searchResult=[]});case 5:case"end":return Pe.stop()}},q)}))}),z.abrupt("return",ra.create(function(){L.dispose()}));case 6:case"end":return z.stop()}},O)}))}})},[]);var v=I.a.useCallback(function(y){f(function(C){C.collapseData.forEach(function(O){O.id===y&&O.collapsible!==!1&&(O.isCollapsed=!O.isCollapsed)})})},[f]),m=I.a.useCallback(function(y,C){return pe(void 0,void 0,void 0,Object(D.a)().mark(function O(){var x;return Object(D.a)().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(e){L.next=2;break}return L.abrupt("return",console.warn("searchService is not defined"));case 2:if(!y){L.next=9;break}return L.next=5,e(C,y);case 5:x=L.sent,f(function(_){_.keyword=y,_.searchResult=x}),L.next=10;break;case 9:f(function(_){_.keyword="",_.searchResult=[]});case 10:case"end":return L.stop()}},O)}))},[e]);return{state:c,collapsible:r,setState:f,onKeywordChange:m,onActiveKeyChange:v,onCollapseChange:t}},RJ=function(i){var r=DJ(i),n=r.headerStyle,e=r.bodyStyle,t=r.footerStyle,a=IJ(i),s=a.state,u=a.onActiveKeyChange,l=a.onKeywordChange;return I.a.createElement(I.a.Fragment,null,I.a.createElement(wJ,Object.assign({},i,{state:s,style:n,onKeywordChange:l})),I.a.createElement(OJ,Object.assign({},i,{state:s,style:e,onActiveKeyChange:u})),I.a.createElement(xJ,Object.assign({},i,{state:s,style:t})))},NJ=function(i){var r=i.position,n=i.collapsible,e=i.onCollapseChange,t=r.width,a=t===void 0?200:t,s=r.left,u=fg("collapse-panel"),l=Object(tt.useState)(!1),c=Object(je.a)(l,2),f=c[0],d=c[1],v=Object(tt.useCallback)(function(){d(!f),e(!f)},[f,e]);return I.a.createElement(zh,Object.assign({},i,{className:u,position:Object.assign(Object.assign({},r),{left:f?-a:s}),style:{transition:"left 0.5s"}}),I.a.createElement(RJ,Object.assign({},i,{prefixClz:u})),n&&I.a.createElement(TJ,Object.assign({},i,{prefixClz:u,isCollapsed:f,onCollapseBtnClick:v,style:{position:"absolute",zIndex:1,width:13,right:-13,bottom:20,padding:"12px 0px",textAlign:"center",borderWidth:"1px 1px 1px 0",borderStyle:"solid solid solid",borderColor:"rgb(232, 232, 232) rgb(232, 232, 232) rgb(232, 232, 232)",cursor:"pointer"}})))},jJ=function(i){var r=i.state,n=Gh(),e=n.propsProxy,t=e.getValue(),a=Yo(),s=t.footer&&typeof t.footer=="function";return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(i.prefixClz,"-footer"),style:i.style},s&&I.a.createElement(t.footer,Object.assign(Object.assign({},i),{headerStyle:{},bodyStyle:{},footerStyle:i.style,targetData:r.targetData,targetType:r.targetType,modelService:a.modelService,commandService:a.commandService})),!t.footer&&I.a.createElement("div",{className:"".concat(i.prefixClz,"-footer-title")},t.footerText)))},LJ=function(i){var r=i.prefixClz,n=i.hasSchema,e=i.state,t=Gh(),a=t.propsProxy,s=a.getValue(),u=Yo();if(n)return null;var l=s.header&&typeof s.header=="function";return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(r,"-header"),style:i.style},l&&I.a.createElement(s.header,Object.assign(Object.assign({},i),{headerStyle:i.style,bodyStyle:{},footerStyle:{},targetData:e.targetData,targetType:e.targetType,modelService:u.modelService,commandService:u.commandService})),!s.header&&I.a.createElement("div",{className:"".concat(r,"-header-title")},s.headerText||"Panel")))},Nj=h("ZTPi"),_J=function(i){var r=i.text,n=Gt(i,["text"]);return r?I.a.createElement(tE.a,Object.assign({placement:"left",title:r},n),I.a.createElement("div",{className:"text-truncate"},r)):null};function Fg(o){if(!!o)return I.a.createElement(_J,{text:o})}var FJ=h("mwIZ"),jj=h.n(FJ);function BJ(o,i){return function(r,n){var e=o.some(function(t){return typeof(t==null?void 0:t.condition)=="function"});return e?(typeof i=="function"&&i(void 0),!0):o.some(function(t){var a=t.name;if(!a)return console.error("[Schema form]: A dependent name must be provided in the updater when the dependency condition is not a function."),!1;var s=jj()(r,a)!==jj()(n,a);return s?(typeof i=="function"&&i(a),!0):!1})}}function GJ(o){return o===""||o===void 0}function zJ(o,i,r){var n=o.getFieldValue,e=o.getFieldsValue,t=i.dependencies,a=i.hidden,s=i.disabled,u=a,l=s;return t==null||t.forEach(function(c){var f=c.name,d=c.condition,v=c.hidden,m=c.disabled;if(!(typeof d!="function"&&r&&f!==r)){var y=!1;if(typeof d=="function"){var C=e();y=!!d(C)}else{if(!f){console.error("[Schema form]: A dependent name must be provided in the props genarator when the dependency condition is not a function.");return}y=n(f)===d}y&&(v!==void 0&&(u=v),m!==void 0&&(l=m))}}),{hidden:u,disabled:l}}var Uh=function(i){var r=i.schema,n=i.children,e=Object(tt.useState)(),t=Object(je.a)(e,2),a=t[0],s=t[1],u=r.dependencies,l=r.value,c=r.defaultValue,f=r.hidden,d=r.disabled,v=Object(tt.useMemo)(function(){return(u==null?void 0:u.length)?BJ(u,s):void 0},[u]);if(typeof n!="function")throw new Error("[Schema Form]: chilren of FormItemWrapper should be a render prop.");var m=GJ(l)?c:l;return v?I.a.createElement(dc.a.Item,{noStyle:!0,shouldUpdate:v},function(y){var C=zJ(y,r,a),O=C.hidden,x=C.disabled;return n({hidden:O,disabled:x,initialValue:m})}):n({hidden:f,disabled:d,initialValue:m})},Lj=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.placeholder,l=r.rules;return I.a.createElement(Uh,{schema:r},function(c){var f=c.disabled,d=c.hidden,v=c.initialValue;return I.a.createElement(dc.a.Item,{name:a,label:s,initialValue:v,tooltip:e,extra:Fg(t),required:n,hidden:d,rules:l},I.a.createElement(_g.a,{className:"xflow-form-input",allowClear:!0,placeholder:u,disabled:f}))})},UJ=h("kaz8"),VJ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.rules;return I.a.createElement(Uh,{schema:r},function(l){var c=l.hidden,f=l.disabled,d=l.initialValue;return I.a.createElement(dc.a.Item,{className:"xflow-form-checkbox",name:a,rules:u,initialValue:d,tooltip:e,extra:Fg(t),required:n,hidden:c,valuePropName:"checked",getValueProps:function(m){var y={true:!0,false:!1};return{checked:!!y[m]}}},I.a.createElement(UJ.a,{disabled:f},s))})},HJ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.placeholder,l=r.rules;return I.a.createElement(Uh,{schema:r},function(c){var f=c.hidden,d=c.disabled,v=c.initialValue;return I.a.createElement(dc.a.Item,{name:a,label:s,initialValue:v,tooltip:e,extra:Fg(t),required:n,hidden:f,rules:l},I.a.createElement(_g.a.TextArea,{allowClear:!0,placeholder:u,rows:3,disabled:d}))})},cM=h("2fM7"),WJ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.placeholder,l=r.options,c=l===void 0?[]:l,f=r.rules;return I.a.createElement(Uh,{schema:r},function(d){var v=d.hidden,m=d.disabled,y=d.initialValue;return I.a.createElement(dc.a.Item,{name:a,label:s,initialValue:y,tooltip:e,extra:Fg(t),required:n,hidden:v,rules:f},I.a.createElement(cM.a,{disabled:m,placeholder:u},c.map(function(C){var O=C.title,x=C.value;return I.a.createElement(cM.a.Option,{key:x.toString(),value:x},O)})))})},$J=h("+eQT"),KJ=h("wd/R"),fM=h.n(KJ),XJ=function(i){var r=i.className,n=i.style,e=i.disabled,t=i.value,a=i.onChange,s=Object(tt.useState)(t?fM()(t):void 0),u=Object(je.a)(s,2),l=u[0],c=u[1],f=Object(tt.useRef)(!1);Object(tt.useEffect)(function(){if(!f.current){f.current=!0;return}var v=fM()(t);v.isValid()&&c(v)},[t]);var d=Object(tt.useCallback)(function(v,m){var y=fM()(m);c(y.isValid()?y:void 0),typeof a=="function"&&a(y.isValid()?y.format("YYYY-MM-DD HH:mm:ss"):"")},[a]);return I.a.createElement($J.a,{showTime:!0,allowClear:!0,className:r,style:n,disabled:e,value:l,onChange:d})},YJ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.rules;return I.a.createElement(Uh,{schema:r},function(l){var c=l.disabled,f=l.hidden,d=l.initialValue;return I.a.createElement(dc.a.Item,{name:a,label:s,initialValue:d,tooltip:e,extra:Fg(t),required:n,hidden:f,rules:u},I.a.createElement(XJ,{style:{width:"100%"},disabled:c}))})},dM=h("fyUT");function fE(o){var i=Number(o);return Number.isNaN(i)?void 0:i}var JJ=function(i){var r=i.disabled,n=i.placeholder,e=i.value,t=i.onChange,a=Object(tt.useState)(fE(e)),s=Object(je.a)(a,2),u=s[0],l=s[1],c=Object(tt.useRef)(!1);Object(tt.useEffect)(function(){c.current||(c.current=!0),l(fE(e))},[e]);var f=Object(tt.useCallback)(function(d){l(d),typeof t=="function"&&(d===void 0?t(""):typeof fE(d)=="number"&&t(fE(d)))},[t]);return I.a.createElement(dM.a,{style:{width:"100%"},size:"small",placeholder:n,value:u,onChange:f,disabled:r})},ZJ=function(i){var r=i.controlSchema,n=r.required,e=r.tooltip,t=r.extra,a=r.name,s=r.label,u=r.placeholder,l=r.rules;return I.a.createElement(Uh,{schema:r},function(c){var f=c.disabled,d=c.hidden,v=c.initialValue;return I.a.createElement(dc.a.Item,{name:a,label:s,initialValue:v,tooltip:e,extra:Fg(t),required:n,hidden:d,rules:l},I.a.createElement(JJ,{placeholder:u,disabled:f}))})},Vh;(function(o){o.INPUT="input",o.CHECKBOX="checkbox",o.TEXTAREA="textArea",o.SELECT="select",o.DATETIME="datetime",o.FLOAT="float"})(Vh||(Vh={}));var _j=[[Vh.INPUT,Lj],[Vh.CHECKBOX,VJ],[Vh.TEXTAREA,HJ],[Vh.DATETIME,YJ],[Vh.SELECT,WJ],[Vh.FLOAT,ZJ]],Fj=function(i){var r=new Map;return i.forEach(function(n){var e=Object(je.a)(n,2),t=e[0],a=e[1],s=t.toLowerCase();r.has(s)&&console.error("".concat(t," is duplicated in controlMap:"),r),r.set(s,a)}),r},QJ=function(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Lj;if(r.has(i))return r.get(i);var e=i.toLowerCase();return r.has(e)?r.get(e):(console.warn("".concat(i," is not exist in controlmap, fallback to defaultControl")),n)},qJ=Nj.a.TabPane,eZ=function(i){var r,n,e=i.schema,t=i.form,a=i.className,s=i.triggerUpdate,u=i.defaultControlRender,l=i.afterUpdatingCb,c=i.controlMap,f=Gt(i,["schema","form","className","triggerUpdate","defaultControlRender","afterUpdatingCb","controlMap"]),d=e.tabs,v=dc.a.useForm(t),m=Object(je.a)(v,1),y=m[0],C=I.a.useMemo(function(){return i.controlMap?i.controlMap:Fj(_j)},[i.controlMap]),O=Object(tt.useCallback)(function(T){typeof s=="function"&&s(y,T)},[y,s]);Object(tt.useEffect)(function(){y.setFieldsValue({})},[y]);var x=Object(tt.useCallback)(function(){requestAnimationFrame(function(){y.setFieldsValue({})})},[y]);return I.a.createElement(dc.a,Object.assign({size:"small",form:y,layout:"vertical",className:dt()("xflow-json-form",a)},f),I.a.createElement(Nj.a,{type:"card",defaultActiveKey:(n=d[0])===null||n===void 0?void 0:n.name,className:dt()((r={},Object(Re.a)(r,"tabs",!0),Object(Re.a)(r,"xTab",!0),Object(Re.a)(r,"singleTab",(d==null?void 0:d.length)===1),Object(Re.a)(r,"coupleTab",(d==null?void 0:d.length)===2),Object(Re.a)(r,"ternateTab",(d==null?void 0:d.length)===3),r)),onTabClick:x},d.map(function(T){var L=T.name,_=T.groups;return I.a.createElement(qJ,{key:L,tab:L},_.length===0&&I.a.createElement(tp.a,{style:{padding:"24px 0"}}),_.length>0&&_.map(function(z){var Q=z.controls,q=Q===void 0?[]:Q;return q.length===0?I.a.createElement(tp.a,{style:{padding:"24px 0"}}):q.map(function(ye){var Ce=ye.shape,Ae=ye.name,Pe=QJ(Ce,C,u);return Pe?I.a.createElement(Pe,{key:Ae,form:y,controlSchema:ye,triggerUpdate:O,afterUpdatingCb:l}):(console.error("\u672A\u627E\u5230\u5BF9\u5E94\u7684\u63A7\u4EF6:",Ce),null)})}))})))},tZ=function(i){var r=i.schema,n=r===void 0?{tabs:[]}:r,e=i.triggerUpdate,t=i.onFieldsChange,a=i.afterUpdatingCb,s=i.defaultControlRender,u=i.loading,l=i.controlMapService,c=i.defaultControls,f=c===void 0?[]:c,d=I.a.useMemo(function(){var v=Fj([].concat(Object(We.a)(_j),Object(We.a)(f)));return l&&l(v),v},[l,f]);return u?I.a.createElement("div",{className:"".concat(i.prefixClz,"-body"),style:Object.assign(Object.assign({},i.style),{display:"flex",justifyContent:"center",alignItems:"center"})},I.a.createElement(cj.a,{spinning:!0})):I.a.createElement("div",{className:"".concat(i.prefixClz,"-body"),style:i.style},n.tabs.length>0&&I.a.createElement(eZ,{schema:n,onFieldsChange:t,controlMap:d,defaultControlRender:s,afterUpdatingCb:a,triggerUpdate:e}),n.tabs.length===0&&I.a.createElement(tp.a,{style:{paddingTop:"64px"}}))},nZ=40,rZ=40,aZ=function(i,r){var n=i&&i.headerPosition&&i.headerPosition.height||nZ,e=i.footerPosition&&i.footerPosition.height||rZ;return{headerStyle:Gl(Object.assign(Object.assign({height:0,top:0,left:0,right:0},r?{height:n,lineHeight:n}:{}),i.headerPosition)),bodyStyle:Gl(Object.assign(Object.assign({left:0,right:0,top:0},r?{top:n,bottom:e}:{bottom:e}),i.bodyPosition)),footerStyle:Gl(Object.assign(Object.assign({left:0,right:0,lineHeight:e,height:e,bottom:0},r?{lineHeight:e,height:e}:{bottom:0}),i.footerPosition))}},Ly;(function(o){var i=this;o.id="XFLOW_JSON_SCHEMA_FORM",o.useModel=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.awaitModel(o.id));case 1:case"end":return t.stop()}},n)}))}})(Ly||(Ly={}));var Xq=function(i,r){i.executeCommand(rg.UPDATE_MODEL.id,{getModel:function(e){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",Ly.useModel(e));case 1:case"end":return s.stop()}},t)}))},updateModel:r})},iZ=function(i){var r=Yo(),n=r.commandService,e=r.modelService,t=r.getGraphInstance,a=i.formSchemaService,s=kg({schema:{tabs:[]},targetType:null,targetData:null,targetCell:null,loading:!1}),u=Object(je.a)(s,4),l=u[0],c=u[1],f=u[2],d=u[3];return I.a.useEffect(function(){if(!(!r||!r.modelService)){var v=new Bi,m=r.modelService.findDeferredModel(Ly.id);if(!m){var y=r.modelService.registerModel({id:Ly.id,modelFactory:function(){return f},watchChange:function(O,x){return pe(void 0,void 0,void 0,Object(D.a)().mark(function T(){var L,_;return Object(D.a)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,de.SELECTED_CELL.getModel(x);case 2:return L=Q.sent,_=L.watch(function(q){return pe(void 0,void 0,void 0,Object(D.a)().mark(function ye(){var Ce,Ae,Pe;return Object(D.a)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(Ce=function(ht,nn){return pe(void 0,void 0,void 0,Object(D.a)().mark(function Tn(){var Kn,zn,An;return Object(D.a)().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:if(O.setValue(function(Xn){Xn.loading=!0,Xn.schema={tabs:[]},Xn.targetType=null,Xn.targetData=null,Xn.targetCell=null}),Kn=ht?ht.getData():null,a){sn.next=4;break}return sn.abrupt("return");case 4:return sn.next=6,t();case 6:return zn=sn.sent,sn.next=9,a({commandService:n,modelService:e,targetData:Kn,cell:ht,targetType:nn,graph:zn});case 9:An=sn.sent,O.setValue({loading:!1,schema:An,targetType:nn,targetCell:ht,targetData:Kn});case 11:case"end":return sn.stop()}},Tn)}))},Ae=function(ht){return ht?ht.isNode&&ht.isNode()&&ht.getProp("isGroup")?"group":ht.isNode&&ht.isNode()?"node":ht.isEdge&&ht.isEdge()?"edge":"canvas":"canvas"},Pe=Ae(q),!(i.targetType||["node","canvas"]).includes(Pe)){lt.next=6;break}return lt.next=6,Ce(q,Pe);case 6:case"end":return lt.stop()}},ye)}))}),Q.abrupt("return",ra.create(function(){_.dispose(),v.push(_)}));case 5:case"end":return Q.stop()}},T)}))}});v.push(y)}return function(){v.dispose()}}},[]),{commandService:n,modelService:e,state:l,setState:c,model:f,isModelReady:d}},oZ=function(i){var r=i.prefixClz,n=i.getCustomRenderComponent,e=i.afterUpdatingCb,t=i.formValueUpdateService,a=t===void 0?function(){}:t,s=iZ(i),u=s.state,l=s.commandService,c=s.modelService,f=I.a.useCallback(function(T){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return pe(void 0,void 0,void 0,Object(D.a)().mark(function _(){var z,Q,q;return Object(D.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return T.setFieldsValue(L),z=Object.entries(L).map(function(Ae){var Pe=Object(je.a)(Ae,2),qe=Pe[0],lt=Pe[1];return{name:qe,value:lt}}),Q=Object.entries(u.targetData).map(function(Ae){var Pe=Object(je.a)(Ae,2),qe=Pe[0],lt=Pe[1];return{name:qe,value:lt}}),Ce.next=5,a({allFields:Q,values:z,modelService:c,commandService:l,targetData:u.targetData,targetType:u.targetType});case 5:q=Ce.sent,e&&e(q);case 7:case"end":return Ce.stop()}},_)}))},[e,l,a,c,u.targetData,u.targetType]),d=I.a.useCallback(function(T,L){return pe(void 0,void 0,void 0,Object(D.a)().mark(function _(){var z;return Object(D.a)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,a({values:T,allFields:L,modelService:c,commandService:l,targetData:u.targetData,targetType:u.targetType});case 2:z=q.sent,e&&e(z);case 4:case"end":return q.stop()}},_)}))},[e,l,a,c,u.targetData,u.targetType]),v=I.a.useMemo(function(){try{return u.schema.tabs.length===0||!u.schema}catch(T){return!0}},[u.schema]),m=aZ(i,v),y=m.headerStyle,C=m.bodyStyle,O=m.footerStyle;if(n){var x=n(u.targetType,u.targetData,c,l);if(x)return I.a.createElement(x,Object.assign(Object.assign({},i),{headerStyle:y,bodyStyle:C,footerStyle:O,targetData:u.targetData,targetType:u.targetType,modelService:c,commandService:l}))}return I.a.createElement("div",{className:r},I.a.createElement(LJ,Object.assign({hasSchema:!v},i,{state:u,style:y,prefixClz:i.prefixClz})),I.a.createElement(tZ,Object.assign({},i,{key:u.targetData&&u.targetData.id,style:C,prefixClz:i.prefixClz,loading:u.loading,schema:u.schema,triggerUpdate:f,onFieldsChange:d})),I.a.createElement(jJ,Object.assign({},i,{state:u,style:O})))},Bj=function(i){var r=fg("json-schema-form");return I.a.createElement(zh,Object.assign({},i,{className:r}),I.a.createElement(oZ,Object.assign({},i,{prefixClz:r})))};se.Connector.registry.exist(jg.VERTICAL_NODE)||_i.registerConnector(jg.VERTICAL_NODE,function(o,i){var r=16,n=Math.abs(i.y-o.y),e=Math.floor(n/3*2),t={x:o.x,y:o.y+r+e},a={x:i.x,y:i.y-r-e};return pi.normalize("M ".concat(o.x," ").concat(o.y,`
         L `).concat(o.x," ").concat(o.y+r,`
         C `).concat(t.x," ").concat(t.y," ").concat(a.x," ").concat(a.y," ").concat(i.x," ").concat(i.y-r,`
         L `).concat(i.x," ").concat(i.y,`
        `))},!0),se.Connector.registry.exist(jg.VERTICAL_GROUP)||_i.registerConnector(jg.VERTICAL_GROUP,function(o,i){var r=4,n=Math.abs(i.y-o.y),e={x:o.x,y:o.y+r+n},t={x:i.x,y:i.y-r-n};return pi.normalize("M ".concat(o.x," ").concat(o.y,`
       L `).concat(o.x," ").concat(o.y+r,`
       C `).concat(e.x," ").concat(e.y," ").concat(t.x," ").concat(t.y," ").concat(i.x," ").concat(i.y-r,`
       L `).concat(i.x," ").concat(i.y,`
      `))},!0),se.Connector.registry.exist(jg.HORIRONTAL_NODE)||_i.registerConnector(jg.HORIRONTAL_NODE,function(o,i){var r=4,n=Math.abs(i.y-o.y),e=Math.floor(n/3*2),t={x:o.x,y:o.y+r+e},a={x:i.x,y:i.y-r-e};return pi.normalize("M ".concat(o.x," ").concat(o.y,`
         L `).concat(o.x," ").concat(o.y+r,`
         C `).concat(t.x," ").concat(t.y," ").concat(a.x," ").concat(a.y," ").concat(i.x," ").concat(i.y-r,`
         L `).concat(i.x," ").concat(i.y,`
        `))},!0);var hM=ve.Edge.registry.get(uE.EDGE);ve.Edge.registry.exist(uE.EDGE)||(hM=ve.Edge.registry.register(uE.EDGE,ve.Edge.define({zIndex:1,highlight:!1,shape:uE.EDGE}),!0));var hc;(function(o){var i=this;o.MODEL=Lg,o.command=lE.QUERY_GRAPH_STATUS,o.hookKey="queryGraphStatus";var r;(function(n){n.SUCCESS="success",n.PROCESSING="processing",n.ERROR="error",n.DEFAULT="default",n.WARNING="warning"})(r=o.StatusEnum||(o.StatusEnum={})),o.initStatusMap=function(){var n;return n={},Object(Re.a)(n,o.StatusEnum.DEFAULT,[]),Object(Re.a)(n,o.StatusEnum.PROCESSING,[]),Object(Re.a)(n,o.StatusEnum.ERROR,[]),Object(Re.a)(n,o.StatusEnum.WARNING,[]),Object(Re.a)(n,o.StatusEnum.SUCCESS,[]),n},o.groupByStatus=function(n){var e=o.initStatusMap();return Object.entries(n).reduce(function(t,a){var s=Object(je.a)(a,2),u=s[0],l=s[1];return t[l.status].push(u),t},e)},o.statusDiff=function(n,e){var t=new Set([].concat(Object(We.a)(n),Object(We.a)(e))),a={current:[],add:[],remove:[]};return t.forEach(function(s){e.includes(s)&&!n.includes(s)&&a.add.push(s),!e.includes(s)&&n.includes(s)&&a.remove.push(s)}),a},o.shouldStop=function(n){return pe(i,void 0,void 0,Object(D.a)().mark(function e(){return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",[r.ERROR,r.SUCCESS].includes(n.graphStatus));case 1:case"end":return a.stop()}},e)}))}})(hc||(hc={}));var dE=function(){function o(){var i=this;Object(me.a)(this,o),this.statusInfo=hc.initStatusMap(),this.getStatusModel=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return n=this.contextProvider(),e=n.getModelService(),s.next=4,Lg.getModel(e);case 4:return t=s.sent,s.abrupt("return",t);case 6:case"end":return s.stop()}},r,this)}))},this.updateModelValue=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.getStatusModel();case 2:e=a.sent,e.setValue(r);case 4:case"end":return a.stop()}},n,this)}))},this.stopCurrentStatusLooping=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.getStatusModel();case 2:return n=s.sent,s.next=5,n.getValidValue();case 5:e=s.sent,t=e.subscription,t.dispose();case 8:case"end":return s.stop()}},r,this)}))},this.addStopDispose=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.getStatusModel();case 2:return e=u.sent,u.next=5,e.getValidValue();case 5:t=u.sent,a=t.subscription,a.push({dispose:function(){n.updateEdges(n.statusInfo,hc.initStatusMap()),n.isLooping=!1}});case 8:case"end":return u.stop()}},r,this)}))},this.updateGraph=function(r,n,e){i.updateNodes(r,n,e),i.updateEdges(r,n)},this.updateNodeData=function(r,n){var e=i.x6Graph.getCellById(r);!e||e.setData(Object.assign(Object.assign(Object.assign(Object.assign({},e.getData()),e.getSize()),e.getPosition()),n))},this.updateNodes=function(r,n,e){Object.keys(r).forEach(function(t){var a=hc.statusDiff(r[t],n[t]);a.add.forEach(function(s){i.updateNodeData(s,e[s])}),a.remove.forEach(function(s){i.updateNodeData(s,e[s])})})},this.updateEdges=function(r,n){var e=hc.statusDiff(r.processing,n.processing),t=i.x6Graph.getEdges();t.forEach(function(a){var s,u=(s=i.x6Graph)===null||s===void 0?void 0:s.findViewByCell(a.id),l=a.getTargetCellId();if(!!l){var c=l.toString();if(!!u){if(e.add.includes(c))return u.addClass(wj);if(e.remove.includes(c))return u.removeClass(wj)}}})},this.execute=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n=this,e,t,a,s,u,l;return Object(D.a)().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e=this.contextProvider(),t=e.getArgs(),a=t.args,s=t.hooks,u=e.getHooks(),f.next=5,e.getX6Graph();case 5:return this.x6Graph=f.sent,f.next=8,u.queryGraphStatus.call(a,function(d){return pe(n,void 0,void 0,Object(D.a)().mark(function v(){var m=this,y,C,O,x,T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return y=d.graphStatusService,C=d.shouldStop,O=C===void 0?hc.shouldStop:C,x=d.doOnce,_.next=3,this.stopCurrentStatusLooping();case 3:return T=function z(Q){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e4;return pe(m,void 0,void 0,Object(D.a)().mark(function ye(){var Ce,Ae,Pe;return Object(D.a)().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return lt.next=2,Q(d);case 2:return Ce=lt.sent,this.updateModelValue(function(ze){Object.entries(Ce.statusMap).forEach(function(ht){var nn=Object(je.a)(ht,2),Tn=nn[0],Kn=nn[1];ze.statusMap.set(Tn,Kn)}),ze.graphStatus=Ce.graphStatus}),Ae=hc.groupByStatus(Ce.statusMap),this.updateGraph(this.statusInfo,Ae,Ce.statusMap),this.statusInfo=Ae,lt.next=9,UX(q);case 9:if(this.isLooping){lt.next=11;break}return lt.abrupt("return");case 11:if(!O){lt.next=17;break}return lt.next=14,O(Ce,d);case 14:if(Pe=lt.sent,!Pe){lt.next=17;break}return lt.abrupt("return");case 17:return lt.next=19,z(Q,q);case 19:case"end":return lt.stop()}},ye,this)}))},this.isLooping=d.loop===void 0?!0:d.loop,_.next=7,this.addStopDispose();case 7:if(!x){_.next=10;break}return _.next=10,x(d);case 10:return T(y,d.loopInterval),_.abrupt("return",{});case 12:case"end":return _.stop()}},v,this)}))},s);case 8:return l=f.sent,e.setResult(l),f.abrupt("return",this);case 11:case"end":return f.stop()}},r,this)}))},this.undo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.contextProvider(),this.isUndoable()&&n.undo(),t.abrupt("return",this);case 3:case"end":return t.stop()}},r,this)}))},this.redo=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isUndoable()){e.next=3;break}return e.next=3,this.execute();case 3:return e.abrupt("return",this);case 4:case"end":return e.stop()}},r,this)}))}}return Object(ue.a)(o,[{key:"isUndoable",value:function(){var r=this.contextProvider();return r.isUndoable()}}]),o}();$e([he.inject(mi),Be("design:type",Object)],dE.prototype,"contextProvider",void 0),dE=$e([he.injectable({token:{token:gi,named:hc.command.id}})],dE);var Yq=function(){},Hh;(function(o){o.TOP_BOTTOM="TB",o.LEFT_RIGHT="LR"})(Hh||(Hh={}));var Gj=he.Syringe.defineToken("DAG_EXTENSION_CONFIG"),hE;(function(o){o.EVENT_NAME="ADD_EDGE_CMD_EVENT"})(hE||(hE={}));var vE;(function(o){o.router={name:"manhattan"},o.connector={name:"rounded",args:{radius:15}}})(vE||(vE={}));var Jq="ant",sZ=function(i){var r=i.layout,n=i.router,e=n===void 0?vE.router:n,t=i.connector,a=t===void 0?vE.connector:t,s={grid:!1,keyboard:{enabled:!0},selecting:{enabled:!0,multiple:!0,selectCellOnMoved:!0,showNodeSelectionBox:!1,rubberEdge:!0,rubberNode:!0,movable:!0},connecting:{sourceAnchor:r?r===Hh.TOP_BOTTOM?"bottom":"right":"center",targetAnchor:r?r===Hh.TOP_BOTTOM?"center":"left":"center",connectionPoint:"anchor",snap:{radius:20},router:e,connector:a,highlight:!0,dangling:!1,createEdge:function(){var l=this,c=new hM({attrs:{line:{strokeDasharray:"5 5",stroke:"#888",strokeWidth:1,targetMarker:{name:"block",args:{size:"6"}}}}}),f=function(v){var m=v.isNew,y=v.edge;if(m&&y.isEdge()&&y===c){var C=y.getTargetPortId(),O=y.getTargetCell();if(O&&O.isNode()){O.setPortProp(C,"connected",!1),y.attr({line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5"}});var x=y.getTargetPortId(),T=y.getSourcePortId(),L=y.getSourceCellId(),_=y.getTargetCellId();l.trigger(hE.EVENT_NAME,{targetPortId:x,sourcePortId:T,source:L,target:_,edge:c})}}};return l.once("edge:connected",f),c},validateEdge:function(l){var c,f=l.edge;return!!((c=f==null?void 0:f.target)===null||c===void 0?void 0:c.port)},validateMagnet:function(l){var c=l.magnet,f=l.cell,d=f.getData().ports.filter(function(v){return v.type===Oe.AnchorType.INPUT});return d.length>0?c.getAttribute("port-group")!==d[0].group:!1},validateConnection:function(l){var c=l.sourceView,f=l.targetView,d=l.sourceMagnet,v=l.targetMagnet;if(c===f||!d||!v)return!1;if(r){var m=r===Hh.TOP_BOTTOM?Oe.AnchorGroup.TOP:Oe.AnchorGroup.LEFT;if(d.getAttribute("port-group")===m||v.getAttribute("port-group")!==m)return!1}var y=c.cell,C=d.getAttribute("port");if(!C)return!1;var O=y.getPort(C);if(O.type!==Oe.AnchorType.OUTPUT)return!1;var x=f.cell,T=v.getAttribute("port");if(!T)return!1;var L=x.getPort(T);return L.type!==Oe.AnchorType.INPUT?!1:!(L&&L.connected)}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},scaling:{max:1.05,min:.01}};return s},_y=function(){function o(){var i=this;Object(me.a)(this,o),this.registerGraphCommands=function(r){r.registerCommand(hc.command,{createCommand:i.commandFactory})},this.toDispose=new Bi,this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Bi,a=[r.addNode.registerHook({name:"dag-add-node",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:v=function(O){return pe(d,void 0,void 0,Object(D.a)().mark(function x(){var T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return T=new Ry(Object.assign({},O)),_.abrupt("return",T);case 2:case"end":return _.stop()}},x)}))},c.cellFactory=v;case 2:case"end":return y.stop()}},f)}))}}),r.addEdge.registerHook({name:"dag-add-edge",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v,m,y,C;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.propConfig.getConfig();case 2:v=x.sent,m=v.layout,y=m===void 0?Hh.TOP_BOTTOM:m,C=function(L){return pe(d,void 0,void 0,Object(D.a)().mark(function _(){var z;return Object(D.a)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return z=new hM(Object.assign(Object.assign({},L),{id:L.id,source:{cell:L.source,port:L.sourcePortId,anchor:{name:y===Hh.TOP_BOTTOM?"bottom":"right"}},target:{cell:L.target,port:L.targetPortId,anchor:{name:y===Hh.TOP_BOTTOM?"center":"right"}},attrs:{line:{strokeDasharray:"",targetMarker:"",stroke:"#d5d5d5",strokeWidth:1}},data:Object.assign({},L)})),q.abrupt("return",z);case 2:case"end":return q.stop()}},_)}))},c.cellFactory=C;case 7:case"end":return x.stop()}},f,this)}))}}),r.addEdge.registerHook({name:"after add edge, set target port props",handler:function(c,f){return pe(e,void 0,void 0,Object(D.a)().mark(function d(){var v=this,m;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return m=function(x){return pe(v,void 0,void 0,Object(D.a)().mark(function T(){var L,_,z;return Object(D.a)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,f(x);case 2:return L=q.sent,L&&L.edgeCell&&(_=L.edgeCell.getTargetCell(),z=L.edgeCell.getTargetPortId(),_.setPortProp(z,"connected",!0)),q.abrupt("return",L);case 5:case"end":return q.stop()}},T)}))},C.abrupt("return",m);case 2:case"end":return C.stop()}},d)}))}}),r.delEdge.registerHook({name:"afetr del edge, reset target node port props",handler:function(c,f){return pe(e,void 0,void 0,Object(D.a)().mark(function d(){var v=this,m;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return m=function(x){return pe(v,void 0,void 0,Object(D.a)().mark(function T(){var L,_,z;return Object(D.a)().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,f(x);case 2:return L=q.sent,_=L.targetCell,z=L.targetPortId,_&&_.isNode()&&z&&_.setPortProp(z,"connected",!1),q.abrupt("return",L);case 6:case"end":return q.stop()}},T)}))},C.abrupt("return",m);case 2:case"end":return C.stop()}},d)}))}}),r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:d=c.commandService,v=c.graph,v.on(hE.EVENT_NAME,function(C){d.executeCommand(Bo.ADD_EDGE.id,{edgeConfig:C}),C.edge.remove()});case 2:case"end":return y.stop()}},f)}))}}),r.graphOptions.registerHook({name:"dag-extension-x6-options",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,this.propConfig.getConfig();case 2:d=y.sent,v=sZ(d),Object.assign(c,v);case 5:case"end":return y.stop()}},f,this)}))}})],t.pushAll(a),u.abrupt("return",ra.create(function(){}));case 4:case"end":return u.stop()}},n)}))},this.registerHookHub=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.registerHookHub(hc.hookKey,new Yc));case 1:case"end":return t.stop()}},n)}))}}return Object(ue.a)(o,[{key:"registerModel",value:function(r){var n=this;r.registerModel({id:Lg.id,getInitialValue:function(){return{statusMap:new Map,subscription:new Bi,graphStatus:Lg.StatusEnum.DEFAULT}},watchChange:function(t){return pe(n,void 0,void 0,Object(D.a)().mark(function a(){var s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.getValidValue();case 2:return s=c.sent,u=s.subscription,c.abrupt("return",u);case 5:case"end":return c.stop()}},a)}))}})}}]),o}();$e([he.inject(KS),Be("design:type",Function)],_y.prototype,"commandFactory",void 0),$e([he.inject(Gj),Be("design:type",Object)],_y.prototype,"propConfig",void 0),_y=$e([he.singleton({contrib:[lc,Hv,Z1]})],_y);var uZ=function(i){return he.Module(function(r){r(_y),r(dE),r(Gj,{useValue:i})})},lZ=function(i){var r=cc();I.a.useEffect(function(){r.addContainerClassNames("dag-extension-container");var e=i.layout||"TB";r.addContainerClassNames(e==="TB"?"layout-top-bottom":"layout-left-right")},[r,i.layout]);var n=I.a.useMemo(function(){return{CONFIG_TYPE:"DAG_EXTENSION",getConfig:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function t(){return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",i);case 1:case"end":return s.stop()}},t)}))}}},[i]);return I.a.createElement(I0,{config:n,createModule:uZ})},vM="XFLOW_FLOW_NODE_SHAPE",cZ=150,fZ=60,pM,pE=Oe.AnchorGroup,gE={circle:{r:4,magnet:!0,stroke:"#5F95FF",strokeWidth:1,fill:"#fff",style:{visibility:"hidden"}}};fo.registry.exist(vM)?pM=fo.registry.get(vM):pM=R0.define({width:cZ,height:fZ,shape:vM,view:j.X6_NODE_PORTAL_NODE_VIEW,ports:{groups:{top:{position:pE.TOP,attrs:gE},bottom:{position:pE.BOTTOM,attrs:gE},right:{position:pE.RIGHT,attrs:gE},left:{position:pE.LEFT,attrs:gE}}},attrs:{body:{magnet:!1,fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"}}});var dZ={grid:!0,mousewheel:{enabled:!0,zoomAtMousePosition:!0,modifiers:"ctrl",minScale:.5,maxScale:3},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge:function(){return new ve.Edge({attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:0})},validateConnection:function(i){var r=i.targetMagnet;return!!r}},highlighting:{magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#5F95FF",stroke:"#5F95FF"}}}},resizing:!0,rotating:!0,selecting:{enabled:!0,rubberband:!0,showNodeSelectionBox:!0,modifiers:"shift"},snapline:!0,keyboard:!0,clipboard:!0},gM=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.registerHookHub=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ra.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Bi,a=[r.addNode.registerHook({name:"flow-add-node",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:v=function(O){return pe(d,void 0,void 0,Object(D.a)().mark(function x(){var T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return T=new pM(Object.assign({},O)),_.abrupt("return",T);case 2:case"end":return _.stop()}},x)}))},c.cellFactory=v;case 2:case"end":return y.stop()}},f)}))}}),r.addEdge.registerHook({name:"flow-add-edge",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v;return Object(D.a)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:v=function(O){return pe(d,void 0,void 0,Object(D.a)().mark(function x(){var T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return delete O.id,T=new ve.Edge({source:{cell:O.source,port:O.sourcePortId},target:{cell:O.target,port:O.targetPortId},attrs:{line:{stroke:"#A2B1C3",strokeWidth:2,targetMarker:{name:"block",width:12,height:8}}},zIndex:-1,data:Object.assign({},O)}),_.abrupt("return",T);case 3:case"end":return _.stop()}},x)}))},c.cellFactory=v;case 2:case"end":return y.stop()}},f)}))}}),r.graphOptions.registerHook({name:"assign options ",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){return Object(D.a)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:Object.assign(c,dZ);case 1:case"end":return v.stop()}},f)}))}})],t.pushAll(a),u.abrupt("return",ra.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});gM=$e([he.singleton({contrib:lc})],gM);var hZ=function(){return he.Module(function(i){i(gM)})},Zq=function(){var i=cc(),r=I.a.useMemo(function(){return{CONFIG_TYPE:"DAG_EXTENSION",getConfig:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function e(){return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},e)}))}}},[]);return I.a.useEffect(function(){var n=i.addExtension({config:r,createModule:hZ});return i.addContainerClassNames("flow-extension-container"),function(){n.dispose()}},[r,i]),null},vZ=h("wEI+"),pZ=h("QkVN"),zj=h.n(pZ),Uj=h("zs7G"),Vj=h("JaaR"),mM={config:{}},Hj=function(i){mM.config=Object.assign({},mM.config,i)},Fy=function(i){var r;return(r=mM.config)===null||r===void 0?void 0:r[i]},Wj=new Map,$j=new Map,gZ=function(i){return pe(void 0,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.getGraphInstance();case 2:n=t.sent,Wj.set("x6graph",n),$j.set("app",i);case 5:case"end":return t.stop()}},r)}))},Kj=function(){return Wj.get("x6graph")},mZ=function(){return $j.get("app")},yZ=function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function i(){var r;return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=mZ(),e.abrupt("return",r.getGraphData());case 2:case"end":return e.stop()}},i)}))},By=Object(Jc.debounce)(function(o){var i=Fy("onConfigChange");if(!(!i||typeof i!="function"))return i(Object.assign({data:yZ()},o))},300,{trailing:!0}),bZ=function(i,r){return pe(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e,t,a,s;return Object(D.a)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=i.node,e){l.next=3;break}return l.abrupt("return");case 3:return t=e.data,(t==null?void 0:t.groupChildren)&&(a=Kj(),t==null||t.groupChildren.forEach(function(c){return pe(void 0,void 0,void 0,Object(D.a)().mark(function f(){var d,v,m;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(m=a.getCellById(c),!(m&&m.isNode())){C.next=4;break}return C.next=4,r.executeCommand(no.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign(Object.assign({},m.data),(d=m.getSize)===null||d===void 0?void 0:d.call(m)),(v=m.getPosition)===null||v===void 0?void 0:v.call(m))});case 4:case"end":return C.stop()}},f)}))})),s=Object.assign(Object.assign(Object.assign({},e.data),e.getPosition()),e.getSize()),l.next=8,r.executeCommand(no.UPDATE_NODE.id,{nodeConfig:s});case 8:By({type:"move:node",config:s});case 9:case"end":return l.stop()}},n)}))},CZ=function(i,r){return pe(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e,t;return Object(D.a)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=i.node,e){s.next=3;break}return s.abrupt("return");case 3:return t=Object.assign(Object.assign(Object.assign({},e.data),e.getPosition()),e.size()),s.next=6,r.executeCommand(no.UPDATE_NODE.id,{nodeConfig:t});case 6:By({type:"resize:node",config:t});case 7:case"end":return s.stop()}},n)}))},EZ=function(i){var r,n=(r=i==null?void 0:i.e)===null||r===void 0?void 0:r.currentTarget;if(!n)return document.getElementsByClassName("xflow-canvas-root");for(var e=null;!e;){var t=n.getElementsByClassName("xflow-canvas-root");(t==null?void 0:t.length)>0&&(e=t),n=n.parentNode}return e},OZ=function(i){var r=document.getElementsByClassName("x6-node-selected");if(!!r){var n=r[0];return Array.from(r).forEach(function(e){e.getAttribute("data-cell-id")===i&&(n=e)}),n.getElementsByClassName("x6-port")}},Xj=function(i,r){var n=i.getAttribute("transform"),e=n.split(",");e[0]="matrix(".concat(Number(e[0].split("(")[1])*r),e[3]=Number(e[3])*r,i.setAttribute("transform",e.join(","))},wZ=function(i){if(!!(i==null?void 0:i.length)){var r=2;i.forEach(function(n){n.getAttribute("data-scale")||(Xj(n,r),n.setAttribute("data-scale","".concat(r)))})}},xZ=function(){var i=document.getElementsByClassName("x6-port");!i||Array.from(i).forEach(function(r){var n=r.getAttribute("data-scale");n&&(Xj(r,1/Number(n)),r.removeAttribute("data-scale"))})},yM=function(i,r,n){var e;i||xZ();var t=EZ(r),a=Kj(),s=(e=a.getSelectedCells())===null||e===void 0?void 0:e[0];(s==null?void 0:s.isNode())&&n&&wZ(OZ(s.id)),Array.from(t).forEach(function(u){for(var l=u.querySelectorAll(".x6-port-body"),c=s==null?void 0:s.isNode(),f=0,d=l.length;f<d;f=f+1)l[f].style.visibility=(!c||n)&&i?"visible":"hidden"})},SZ=function(i){return pe(void 0,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.edge,n){t.next=3;break}return t.abrupt("return");case 3:n.addTools("vertices","ondbclick");case 4:case"end":return t.stop()}},r)}))},AZ=function(i,r){return pe(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=i.edge,e){a.next=3;break}return a.abrupt("return");case 3:e.hasTools("ondbclick")&&(r.executeCommand(Bo.UPDATE_EDGE.id,{edgeConfig:Object.assign(Object.assign({},Object(Jc.get)(e,"data")),{vertices:e.getVertices()})}),e.removeTools());case 4:case"end":return a.stop()}},n)}))},Yj=40,mE="xflow-node-panel-collpase",MZ="GROUP_NODE_RENDER_ID",Uo=60,ro=40,Nt=1,vr={stroke:"#A2B1C3",fill:"#FFFFFF",fontFill:"#000",fontSize:12,label:""},Jj=[{name:"Terminal"},{name:"Process"},{name:"Decision"},{name:"Multi Document"},{name:"Connector",width:ro,height:ro},{name:"DataIO",ports:["top","bottom"]},{name:"Database"},{name:"Hard Disk"},{name:"Stroed Data"},{name:"Document"},{name:"Predefined Process"},{name:"Extract"},{name:"Merge"},{name:"Or",width:ro,height:ro},{name:"Manual Input"},{name:"Preparation"},{name:"Delay"},{name:"Manual Operation"},{name:"Display"},{name:"Off Page Link"},{name:"Note Left",label:"\u2263"},{name:"Note Right",label:"\u2263"},{name:"Internal Storage"},{name:"Text",label:"text"}],TZ=["Connector","Or"],PZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=[["M",Nt,Nt],["L",C-2*Nt,Nt],["L",C-2*Nt,O-2*Nt],["L",Nt,O-2*Nt],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(x),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},kZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=[["M",C/2,Nt],["L",C-2*Nt,O/2],["L",C/2,O-2*Nt],["L",Nt,O/2],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(x),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},DZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=O-2*Nt;return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:"M ".concat(Nt,",").concat(O/2," a ").concat(x/2," ").concat(x/2," 0 1 1 0 1 z"),fill:f,stroke:s}),I.a.createElement("text",{x:O/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},IZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=O/2,T=[["M",x-Nt,Nt],["L",C-2*Nt,Nt],["L",C-x,O-2*Nt],["L",Nt,O-2*Nt],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(T),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},RZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=Math.min(O,C)/2,T=[["M",x,Nt],["L",C-x,Nt],["C",C-2*Nt,Nt,C-2*Nt,O/2],["",C-2*Nt,O/2],["C",C-2*Nt,O/2,C-2*Nt,O-2*Nt],["",C-x,O-2*Nt],["L",x,O-2*Nt],["C",Nt,O-2*Nt,Nt,O/2],["",Nt,O/2],["C",Nt,O/2,Nt,Nt],["",x,Nt]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(T),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},NZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=C/4,T=Math.min(O/10,12),L=[["M",Nt,Nt+T],["C",Nt+x,Nt,Nt+C-x,Nt],["",C-2*Nt,Nt+T],["L",C-2*Nt,O-2*Nt-T],["C",C-2*Nt-x,O-2*Nt,Nt+x,O-2*Nt],["",Nt,O-2*Nt-T],["Z"]],_=[["M",Nt,Nt+T],["C",Nt+x,Nt+2*T,Nt+C-x,Nt+2*T],["",C-2*Nt,Nt+T]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(L),fill:f,stroke:s}),I.a.createElement("path",{d:xo(_),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},jZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=Math.min(C/10,O/4),T=Math.min(O/4,C/4),L=[["M",Nt+x,Nt],["L",C-2*Nt-x,Nt],["C",C-2*Nt,Nt+T,C-2*Nt,O-2*Nt-T],["",C-2*Nt-x,O-2*Nt],["L",Nt+x,O-2*Nt],["C",Nt,O-2*Nt-T,Nt,Nt+T],["",Nt+x,Nt]],_=[["M",C-2*Nt-x,Nt],["C",C-2*Nt-2*x,Nt+T,C-2*Nt-2*x,O-2*Nt-T],["",C-2*Nt-x,O-2*Nt]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(L),fill:f,stroke:s}),I.a.createElement("path",{d:xo(_),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},LZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=Math.min(C/10,O/4),T=Math.min(O/4,C/4),L=[["M",Nt+x,Nt],["L",C-2*Nt-x,Nt],["C",C-2*Nt-2*x,Nt+T,C-2*Nt-2*x,O-2*Nt-T],["",C-2*Nt-x,O-2*Nt],["L",Nt+x,O-2*Nt],["C",Nt,O-2*Nt-T,Nt,Nt+T],["",Nt+x,Nt]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(L),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},_Z=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=C/8,T=O/8,L=[["M",Nt,Nt],["L",C-2*Nt,Nt],["L",C-2*Nt,O-2*Nt-T],["C",C-2*Nt-x,O-2*Nt-2*T,C/2+x,O-2*Nt-2*T],["",C/2,O-2*Nt-T],["S",C/4,O-2*Nt,Nt,O-2*Nt-2*T],["L",Nt,Nt]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(L),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},FZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=6,O=Nt,x=C/2,T=n.width,L=n.height;T+=C,L+=C;var _=T/8,z=L/8,Q=[["M",O+x,O],["L",T-2*O,O],["L",T-2*O,L-2*O-z],["C",T-2*O-_,L-2*O-2*z,T/2+_,L-2*O-2*z],["",T/2,L-2*O-z],["S",T/4,L-2*O,O+x,L-2*O-2*z],["L",O+x,O]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(T," ").concat(L),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(Q),fill:f,stroke:s}),I.a.createElement("path",{d:xo(Q,-C/2,C/2),fill:f,stroke:s}),I.a.createElement("text",{x:T/2,y:L/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},BZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=C/8,T=[["M",Nt,Nt],["L",C-2*Nt,Nt],["L",C-2*Nt,O-2*Nt],["L",Nt,O-2*Nt],["Z"]],L=[["M",x,Nt],["L",x,O-2*Nt]],_=[["M",C-x,Nt],["L",C-x,O-2*Nt]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(T),fill:f,stroke:s}),I.a.createElement("path",{d:xo(L),stroke:s}),I.a.createElement("path",{d:xo(_),stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},GZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=[["M",C/2,Nt],["L",C-2*Nt,O-2*Nt],["L",Nt,O-2*Nt],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(x),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},zZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=[["M",Nt,Nt],["L",C-2*Nt,Nt],["L",C/2,O-2*Nt],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(x),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},UZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=[["M",O/2,Nt],["L",O/2,O-2*Nt]],T=[["M",Nt,O/2],["L",O-2*Nt,O/2]],L=O-2*Nt;return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:"M ".concat(Nt,",").concat(O/2," a ").concat(L/2," ").concat(L/2," 0 1 1 0 1 z"),fill:f,stroke:s}),I.a.createElement("path",{d:xo(x),stroke:s}),I.a.createElement("path",{d:xo(T),stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},VZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=[["M",Nt,O/5],["L",C-2*Nt,Nt],["L",C-2*Nt,O-2*Nt],["L",Nt,O-2*Nt],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(x),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},HZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=Math.tan(Math.PI/6)*(O/2),T=[["M",x,Nt],["L",C-x,Nt],["L",C-2*Nt,O/2],["L",C-x,O-2*Nt],["L",x,O-2*Nt],["L",Nt,O/2],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(T),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},WZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=Math.min(O,C)/2,T=[["M",Nt,Nt],["L",C-x,Nt],["C",C-2*Nt,Nt,C-2*Nt,O/2],["",C-2*Nt,O/2],["C",C-2*Nt,O/2,C-2*Nt,O-2*Nt],["",C-x,O-2*Nt],["L",Nt,O-2*Nt],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(T),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},$Z=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=Math.min(Math.tan(Math.PI/6)*O,C/2),T=[["M",Nt,Nt],["L",C-2*Nt,Nt],["L",C-x,O-2*Nt],["L",x,O-2*Nt],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(T),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},KZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=Math.min(O,C)/3,T=Math.min(Math.tan(Math.PI/6)*(O/2),C/3),L=[["M",T,Nt],["L",C-x,Nt],["C",C-2*Nt,Nt,C-2*Nt,O/2],["",C-2*Nt,O/2],["C",C-2*Nt,O/2,C-2*Nt,O-2*Nt],["",C-x,O-2*Nt],["L",T,O-2*Nt],["L",Nt,O/2],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(L),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},XZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=Math.min(Math.tan(Math.PI/6)*(C/2),O/4),T=[["M",Nt,Nt],["L",C-2*Nt,Nt],["L",C-2*Nt,O-x],["L",C/2,O-2*Nt],["L",Nt,O-x],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(T),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},YZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?"transparent":c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=6,T=C-2*Nt,L=[["M",T,Nt],["C",T-x,Nt,T-x,x],["",T-x,(O-x)/2],["L",T-2*x,O/2],["L",T-x,(O+x)/2],["L",T-x,O-2*Nt-x],["C",T-x,O-2*Nt,T,O-2*Nt],["",T,O-2*Nt]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(L),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},JZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?"transparent":c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=6,T=[["M",Nt,Nt],["C",x,Nt,x,x],["",x,(O-x)/2],["L",2*x,O/2],["L",x,(O+x)/2],["L",x,O-2*Nt-x],["C",x,O-2*Nt,Nt,O-2*Nt],["",Nt,O-2*Nt]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(T),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},ZZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.stroke,s=a===void 0?vr.stroke:a,u=t.label,l=u===void 0?vr.label:u,c=t.fill,f=c===void 0?vr.fill:c,d=t.fontFill,v=d===void 0?vr.fontFill:d,m=t.fontSize,y=m===void 0?vr.fontSize:m,C=n.width,O=n.height,x=C-2*Nt,T=O-2*Nt,L=6,_=[["M",Nt,Nt],["L",x-L,Nt],["C",x,Nt,x,L],["",x,O/2],["L",x,T-L],["C",x,T,x-L,T],["",x-L,T],["L",L,T],["C",Nt,T,Nt,T-L],["",Nt,T-L],["Z"]];return I.a.createElement("svg",{viewBox:"0 0 ".concat(C," ").concat(O),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("path",{d:xo(_),fill:f,stroke:s}),I.a.createElement("path",{d:"M ".concat(Nt,",").concat(L," L ").concat(x-1," ").concat(L," "),fill:f,stroke:s}),I.a.createElement("path",{d:"M ".concat(L,",").concat(Nt," L ").concat(L," ").concat(T," "),fill:f,stroke:s}),I.a.createElement("text",{x:C/2,y:O/2,fill:v,textAnchor:"middle",alignmentBaseline:"middle",fontSize:y},l),"Sorry, your browser does not support inline SVG.")},QZ=function(i){var r=i.size,n=r===void 0?{width:Uo,height:ro}:r,e=i.data,t=e===void 0?{}:e,a=t.label,s=a===void 0?vr.label:a,u=t.fontFill,l=u===void 0?vr.fontFill:u,c=t.fontSize,f=c===void 0?vr.fontSize:c,d=n.width,v=n.height,m=2;return I.a.createElement("svg",{viewBox:"0 0 ".concat(d/m," ").concat(v/m),xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%"},I.a.createElement("text",{x:d/(2*m),y:v/(2*m),fill:l,textAnchor:"middle",alignmentBaseline:"middle",fontSize:f},s),"Sorry, your browser does not support inline SVG.")},yE=function(i){return{position:{name:i},attrs:{circle:{r:4,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff",style:{visibility:"hidden"}}},zIndex:10}},Zj=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["top","right","bottom","left"];return{items:i.map(function(r){return{group:r,id:$c()}}),groups:{top:yE("top"),right:yE("right"),bottom:yE("bottom"),left:yE("left")}}},qZ=function(i){return(i||[]).map(function(r){var n=r.name,e=r.popover,t=r.label,a=t===void 0?"":t,s=r.width,u=s===void 0?ro:s,l=r.height,c=l===void 0?ro:l,f=r.ports,d=r.parentKey,v=$c();return{id:v,renderKey:n,name:n,label:a,popoverContent:e,width:u,height:c,ports:f||Zj(),originData:Object.assign({},r),isCustom:!0,parentKey:d}})},eQ=function(i){return pe(void 0,void 0,void 0,Object(D.a)().mark(function r(){var n;return Object(D.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=qZ(i),t.abrupt("return",[].concat(Object(We.a)(n),Object(We.a)(Jj.map(function(a){var s=a.name,u=a.ports,l=a.width,c=l===void 0?Uo:l,f=a.height,d=f===void 0?ro:f,v=a.label,m=v===void 0?"":v;return{id:$c(),renderKey:s,name:s,label:m,popoverContent:function(){return s},width:c,height:d,ports:Zj(u)}}))));case 2:case"end":return t.stop()}},r)}))},Qj=function(i){var r=i?Object(Jc.isArray)(i)?i:[i]:[],n=[];r.forEach(function(a){n=n.concat(a.nodes.map(function(s){return Object.assign(Object.assign({},s),{parentKey:a.key})}))}),n.length&&Hj({registerNode:n});var e=Fy("graphConfig"),t=Fy("registerNode");!e||!(t==null?void 0:t.length)||t.forEach(function(a){var s=a.name,u=a.component;e.setNodeRender(s,u)})},tQ=function(i){Qj(),i.nodeRender.get("Terminal")||Jj.forEach(function(r){i.setNodeRender(r.name,ke["".concat(r.name.replace(/\s+/g,""),"Node")])})},xo=function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(!i.length)return null;var e="";return i.forEach(function(t){var a=Object(je.a)(t,5),s=a[0],u=a[1],l=a[2],c=a[3],f=a[4];e+=Object(Jc.isNumber)(l)?" ".concat(s," ").concat(u+r," ").concat(l+n):" ".concat(s),f&&(e+=" ".concat(c+r," ").concat(f+n))}),e},Wh=h("wx14"),nQ=h("UESt"),rQ=h("KQm4"),qj=h("1OyB"),eL=h("vuIU"),tL=h("Ji7U"),nL=h("LK+K"),rL=h("Zm9Q"),aQ=h("Gytx"),bM=h.n(aQ),iQ=h("8XRh"),aL=tt.forwardRef(function(o,i){var r,n=o.prefixCls,e=o.forceRender,t=o.className,a=o.style,s=o.children,u=o.isActive,l=o.role,c=tt.useState(u||e),f=Object(qN.a)(c,2),d=f[0],v=f[1];return tt.useEffect(function(){(e||u)&&v(!0)},[e,u]),d?tt.createElement("div",{ref:i,className:dt()("".concat(n,"-content"),(r={},Object(iu.a)(r,"".concat(n,"-content-active"),u),Object(iu.a)(r,"".concat(n,"-content-inactive"),!u),r),t),style:a,role:l},tt.createElement("div",{className:"".concat(n,"-content-box")},s)):null});aL.displayName="PanelContent";var oQ=aL,sQ=["className","id","style","prefixCls","headerClass","children","isActive","destroyInactivePanel","accordion","forceRender","openMotion","extra","collapsible"],iL=function(o){Object(tL.a)(r,o);var i=Object(nL.a)(r);function r(){var n;Object(qj.a)(this,r);for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return n=i.call.apply(i,[this].concat(t)),n.onItemClick=function(){var s=n.props,u=s.onItemClick,l=s.panelKey;typeof u=="function"&&u(l)},n.handleKeyPress=function(s){(s.key==="Enter"||s.keyCode===13||s.which===13)&&n.onItemClick()},n.renderIcon=function(){var s=n.props,u=s.showArrow,l=s.expandIcon,c=s.prefixCls,f=s.collapsible;if(!u)return null;var d=typeof l=="function"?l(n.props):tt.createElement("i",{className:"arrow"});return d&&tt.createElement("div",{className:"".concat(c,"-expand-icon"),onClick:f==="header"||f==="icon"?n.onItemClick:null},d)},n.renderTitle=function(){var s=n.props,u=s.header,l=s.prefixCls,c=s.collapsible;return tt.createElement("span",{className:"".concat(l,"-header-text"),onClick:c==="header"?n.onItemClick:null},u)},n}return Object(eL.a)(r,[{key:"shouldComponentUpdate",value:function(e){return!bM()(this.props,e)}},{key:"render",value:function(){var e,t,a=this.props,s=a.className,u=a.id,l=a.style,c=a.prefixCls,f=a.headerClass,d=a.children,v=a.isActive,m=a.destroyInactivePanel,y=a.accordion,C=a.forceRender,O=a.openMotion,x=a.extra,T=a.collapsible,L=Object(ej.a)(a,sQ),_=T==="disabled",z=T==="header",Q=T==="icon",q=dt()((e={},Object(iu.a)(e,"".concat(c,"-item"),!0),Object(iu.a)(e,"".concat(c,"-item-active"),v),Object(iu.a)(e,"".concat(c,"-item-disabled"),_),e),s),ye=dt()("".concat(c,"-header"),(t={},Object(iu.a)(t,f,f),Object(iu.a)(t,"".concat(c,"-header-collapsible-only"),z),Object(iu.a)(t,"".concat(c,"-icon-collapsible-only"),Q),t)),Ce={className:ye,"aria-expanded":v,"aria-disabled":_,onKeyPress:this.handleKeyPress};!z&&!Q&&(Ce.onClick=this.onItemClick,Ce.role=y?"tab":"button",Ce.tabIndex=_?-1:0);var Ae=x!=null&&typeof x!="boolean";return delete L.header,delete L.panelKey,delete L.onItemClick,delete L.showArrow,delete L.expandIcon,tt.createElement("div",Object(Wh.a)({},L,{className:q,style:l,id:u}),tt.createElement("div",Ce,this.renderIcon(),this.renderTitle(),Ae&&tt.createElement("div",{className:"".concat(c,"-extra")},x)),tt.createElement(iQ.b,Object(Wh.a)({visible:v,leavedClassName:"".concat(c,"-content-hidden")},O,{forceRender:C,removeOnLeave:m}),function(Pe,qe){var lt=Pe.className,ze=Pe.style;return tt.createElement(oQ,{ref:qe,prefixCls:c,className:lt,style:ze,isActive:v,forceRender:C,role:y?"tabpanel":null},d)}))}}]),r}(tt.Component);iL.defaultProps={showArrow:!0,isActive:!1,onItemClick:function(){},headerClass:"",forceRender:!1};var uQ=iL;function oL(o){var i=o;if(!Array.isArray(i)){var r=Object(sj.a)(i);i=r==="number"||r==="string"?[i]:[]}return i.map(function(n){return String(n)})}var CM=function(o){Object(tL.a)(r,o);var i=Object(nL.a)(r);function r(n){var e;Object(qj.a)(this,r),e=i.call(this,n),e.onClickItem=function(u){var l=e.state.activeKey;if(e.props.accordion)l=l[0]===u?[]:[u];else{l=Object(rQ.a)(l);var c=l.indexOf(u),f=c>-1;f?l.splice(c,1):l.push(u)}e.setActiveKey(l)},e.getNewChild=function(u,l){if(!u)return null;var c=e.state.activeKey,f=e.props,d=f.prefixCls,v=f.openMotion,m=f.accordion,y=f.destroyInactivePanel,C=f.expandIcon,O=f.collapsible,x=u.key||String(l),T=u.props,L=T.header,_=T.headerClass,z=T.destroyInactivePanel,Q=T.collapsible,q=!1;m?q=c[0]===x:q=c.indexOf(x)>-1;var ye=Q!=null?Q:O,Ce={key:x,panelKey:x,header:L,headerClass:_,isActive:q,prefixCls:d,destroyInactivePanel:z!=null?z:y,openMotion:v,accordion:m,children:u.props.children,onItemClick:ye==="disabled"?null:e.onClickItem,expandIcon:C,collapsible:ye};return typeof u.type=="string"?u:(Object.keys(Ce).forEach(function(Ae){typeof Ce[Ae]=="undefined"&&delete Ce[Ae]}),tt.cloneElement(u,Ce))},e.getItems=function(){var u=e.props.children;return Object(rL.a)(u).map(e.getNewChild)},e.setActiveKey=function(u){"activeKey"in e.props||e.setState({activeKey:u}),e.props.onChange(e.props.accordion?u[0]:u)};var t=n.activeKey,a=n.defaultActiveKey,s=a;return"activeKey"in n&&(s=t),e.state={activeKey:oL(s)},e}return Object(eL.a)(r,[{key:"shouldComponentUpdate",value:function(e,t){return!bM()(this.props,e)||!bM()(this.state,t)}},{key:"render",value:function(){var e,t=this.props,a=t.prefixCls,s=t.className,u=t.style,l=t.accordion,c=dt()((e={},Object(iu.a)(e,a,!0),Object(iu.a)(e,s,!!s),e));return tt.createElement("div",{className:c,style:u,role:l?"tablist":null},this.getItems())}}],[{key:"getDerivedStateFromProps",value:function(e){var t={};return"activeKey"in e&&(t.activeKey=oL(e.activeKey)),t}}]),r}(tt.Component);CM.defaultProps={prefixCls:"rc-collapse",onChange:function(){},accordion:!1,destroyInactivePanel:!1},CM.Panel=uQ;var sL=CM,uL=sL,Qq=sL.Panel,lQ=h("bT9E"),lL=h("H84U"),cQ=h("EXcs"),cL=h("0n0R"),fQ=function(i){var r=tt.useContext(lL.b),n=r.getPrefixCls,e=i.prefixCls,t=i.className,a=t===void 0?"":t,s=i.showArrow,u=s===void 0?!0:s,l=n("collapse",e),c=dt()(Object(iu.a)({},"".concat(l,"-no-arrow"),!u),a);return tt.createElement(uL.Panel,Object(Wh.a)({},i,{prefixCls:l,className:c}))},dQ=fQ,fL=function(i){var r,n=tt.useContext(lL.b),e=n.getPrefixCls,t=n.direction,a=i.prefixCls,s=i.className,u=s===void 0?"":s,l=i.bordered,c=l===void 0?!0:l,f=i.ghost,d=i.expandIconPosition,v=d===void 0?"start":d,m=e("collapse",a),y=tt.useMemo(function(){return v==="left"?"start":v==="right"?"end":v},[v]),C=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},z=i.expandIcon,Q=z?z(_):tt.createElement(nQ.a,{rotate:_.isActive?90:void 0});return Object(cL.a)(Q,function(){return{className:dt()(Q.props.className,"".concat(m,"-arrow"))}})},O=dt()("".concat(m,"-icon-position-").concat(y),(r={},Object(iu.a)(r,"".concat(m,"-borderless"),!c),Object(iu.a)(r,"".concat(m,"-rtl"),t==="rtl"),Object(iu.a)(r,"".concat(m,"-ghost"),!!f),r),u),x=Object(Wh.a)(Object(Wh.a)({},cQ.a),{motionAppear:!1,leavedClassName:"".concat(m,"-content-hidden")}),T=function(){var _=i.children;return Object(rL.a)(_).map(function(z,Q){var q;if((q=z.props)===null||q===void 0?void 0:q.disabled){var ye=z.key||String(Q),Ce=z.props,Ae=Ce.disabled,Pe=Ce.collapsible,qe=Object(Wh.a)(Object(Wh.a)({},Object(lQ.a)(z.props,["disabled"])),{key:ye,collapsible:Pe!=null?Pe:Ae?"disabled":void 0});return Object(cL.a)(z,qe)}return z})};return tt.createElement(uL,Object(Wh.a)({openMotion:x},i,{expandIcon:C,prefixCls:m,className:O}),T())};fL.Panel=dQ;var hQ=fL,dL=hQ,hL=dL.Panel,vQ=function(i){var r=i.x6NodeFactory,n=i.dndOptions,e=i.state,t=i.prefixClz,a=i.defaultActiveKey,s=a===void 0?["official"]:a,u=i.showOfficial,l=u===void 0?!0:u,c=i.registerNode?Object(Jc.isArray)(i.registerNode)?i.registerNode:[i.registerNode]:[],f=Yo(),d=f.graphProvider,v=f.modelService,m=f.commandService,y=I.a.useState(),C=Object(je.a)(y,2),O=C[0],x=C[1],T=I.a.useState(),L=Object(je.a)(T,2),_=L[0],z=L[1];I.a.useEffect(function(){d.getGraphInstance().then(function(ze){z(ze)})});var Q=void 0;d.getGraphOptions().then(function(ze){Q=ze});var q=Object(tt.useCallback)(function(ze){return pe(void 0,void 0,void 0,Object(D.a)().mark(function ht(){var nn,Tn,Kn,zn,An;return Object(D.a)().wrap(function(sn){for(;;)switch(sn.prev=sn.next){case 0:return Tn=ze.ports,Kn=Object.assign(Object.assign({},ze),{id:"node-".concat($c()),zIndex:10,ports:Object.assign(Object.assign({},Tn),{items:(nn=Tn.items)===null||nn===void 0?void 0:nn.map(function(Xn){return Object.assign(Object.assign({},Xn),{id:$c()})})})}),zn={nodeConfig:Kn},sn.next=5,m.executeCommand(no.ADD_NODE.id,zn);case 5:An=Fy("onAddNode"),typeof An=="function"&&An(Kn);case 7:case"end":return sn.stop()}},ht)}))},[m]);I.a.useEffect(function(){if(!!_){var ze=new ae.Dnd(Object.assign(Object.assign({scaled:!1,animation:!1},n),{target:_,validateNode:function(nn){return pe(void 0,void 0,void 0,Object(D.a)().mark(function Tn(){var Kn;return Object(D.a)().wrap(function(An){for(;;)switch(An.prev=An.next){case 0:return Kn=Object.assign(Object.assign({},nn.getData()),nn.getPosition()),An.next=3,q(Kn);case 3:return An.abrupt("return",!1);case 4:case"end":return An.stop()}},Tn)}))}}));x(ze)}},[m,n,_,v,q]);var ye=I.a.useCallback(function(ze){return function(ht){if(!(!_||!O||!Q)){var nn=Q.nodeTypeParser(ze),Tn=ze.width,Kn=Tn===void 0?180:Tn,zn=ze.height,An=zn===void 0?40:zn,br=Q.nodeRender.get(nn),sn=r2(br,m,v),Xn={data:ze,width:Kn,height:An,view:Q.graphId,component:sn},dr=r?r(Xn):Sj(Xn);O.start(dr,ht.nativeEvent)}}},[m,O,_,Q,v,r]),Ce=I.a.useCallback(function(){var ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ze.map(function(ht){var nn=ht.popoverContent;return I.a.createElement(lM,{item:ht,key:ht.id,onMouseDown:ye(ht),popoverContent:nn,prefixClz:t,modelService:v,commandService:m,graphConfig:Q})})},[m,Q,v,ye,t]),Ae=e.nodeList.filter(function(ze){return!ze.isCustom}),Pe=e.searchList.filter(function(ze){return!ze.isCustom}),qe=function(ht){return e.nodeList.filter(function(nn){return nn.isCustom&&nn.parentKey===ht})},lt=function(ht){return e.searchList.filter(function(nn){return nn.isCustom&&nn.parentKey===ht})};return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(t,"-body")},I.a.createElement(dL,{defaultActiveKey:s,style:{border:"none"}},l&&I.a.createElement(hL,{header:"\u901A\u7528\u8282\u70B9",key:"official",style:{border:"none"}},!e.keyword&&I.a.createElement("div",{className:"".concat(t,"-official")},Ce(Ae)),e.searchList.length>0&&I.a.createElement("div",{className:"".concat(t,"-official")},Ce(Pe))),(c==null?void 0:c.length)>0&&c.map(function(ze){return!ze.hidden&&ze.nodes.length>0&&I.a.createElement(hL,{header:ze.title,key:ze.key,style:{border:"none"}},!e.keyword&&I.a.createElement("div",{className:"".concat(t,"-custom")},Ce(qe(ze.key))),e.searchList.length>0&&I.a.createElement("div",{className:"".concat(t,"-custom")},Ce(lt(ze.key))))})),e.keyword&&e.searchList.length===0&&I.a.createElement(tp.a,{style:{marginTop:"48px"}})))},pQ=function(i){var r=i.prefixClz,n=i.onKeywordChange,e=Gh(),t=e.propsProxy,a=t.getValue();return I.a.createElement(I.a.Fragment,null,I.a.createElement("div",{className:"".concat(r,"-header"),style:Object.assign({zIndex:1},i.style)},a.header&&I.a.isValidElement(a.header)&&a.header,I.a.createElement("div",{className:"".concat(r,"-header-search")},I.a.createElement(_g.a,{placeholder:"\u641C\u7D22\u7EC4\u4EF6",allowClear:!0,onChange:function(u){return n(u.target.value)},style:{width:"100%",border:0}}))))},bE;(function(o){o.id="NODE_PANEL_DATA"})(bE||(bE={}));var gQ=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return pe(void 0,void 0,void 0,Object(D.a)().mark(function n(){var e;return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=i.filter(function(s){var u,l;return s.isDirectory||((u=s.label)===null||u===void 0?void 0:u.includes(r))||((l=s.name)===null||l===void 0?void 0:l.includes(r))}),a.abrupt("return",e);case 2:case"end":return a.stop()}},n)}))},mQ=function(i){var r=i.searchService,n=r===void 0?gQ:r,e=i.registerNode?Object(Jc.isArray)(i.registerNode)?i.registerNode:[i.registerNode]:[],t=[];e.forEach(function(m){t=t.concat(m.nodes.map(function(y){return Object.assign(Object.assign({},y),{parentKey:m.key})}))});var a=Yo(),s=a.modelService,u=kg({searchList:[],nodeList:[],defaultExpandAll:!1,keyword:""}),l=Object(je.a)(u,3),c=l[0],f=l[1],d=l[2];I.a.useEffect(function(){s.findDeferredModel(bE.id)||s.registerModel({id:bE.id,modelFactory:function(){return d},watchChange:function(y){return pe(void 0,void 0,void 0,Object(D.a)().mark(function C(){var O,x,T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,de.GRAPH_META.getModel(s);case 2:return O=_.sent,x=function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function Q(){var q;return Object(D.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,eQ(t);case 2:return q=Ce.sent,Ce.abrupt("return",{listData:q});case 4:case"end":return Ce.stop()}},Q)}))},T=O.watch(function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function z(){var Q;return Object(D.a)().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ye.next=2,x();case 2:Q=ye.sent,y.setValue({nodeList:Q.listData,defaultExpandAll:!1,keyword:"",searchList:[]});case 4:case"end":return ye.stop()}},z)}))}),_.abrupt("return",ra.create(function(){T.dispose()}));case 6:case"end":return _.stop()}},C)}))}})},[]);var v=I.a.useCallback(function(m){return pe(void 0,void 0,void 0,Object(D.a)().mark(function y(){var C;return Object(D.a)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(n){x.next=2;break}return x.abrupt("return");case 2:if(!m){x.next=9;break}return x.next=5,n(c.nodeList,m);case 5:C=x.sent,f(function(T){T.keyword=m,T.searchList=C}),x.next=10;break;case 9:f(function(T){T.keyword="",T.searchList=[]});case 10:case"end":return x.stop()}},y)}))},[n,c.nodeList,f]);return{state:c,setState:f,onKeywordChange:v}},yQ=function(i){var r=i.cell,n=i.data,e=n.label,t=n.stroke,a=n.fill,s=n.fontSize,u=n.fontFill,l=n.width,c=l===void 0?200:l,f=n.isCollapsed,d=f===void 0?!1:f,v=Yo(),m=function(){v.executeCommand(Ws.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!1,collapsedSize:{width:c,height:40}})},y=function(){v.executeCommand(Ws.COLLAPSE_GROUP.id,{nodeId:r.id,isCollapsed:!0,collapsedSize:{width:c,height:40},gap:3})};return I.a.createElement("div",{className:"xflow-group-node",style:{borderColor:t,backgroundColor:a,fontSize:s,color:u}},I.a.createElement("div",{className:"xflow-group-header"},I.a.createElement("div",{className:"header-left"},e),I.a.createElement("div",{className:"header-right"},d&&I.a.createElement(zk.a,{onClick:m}),!d&&I.a.createElement(Uk.a,{onClick:y}))))},bQ=function(i){i.setNodeRender(MZ,yQ)},vL;(function(o){o.id="FLOWCHART_PANEL_DATA"})(vL||(vL={}));var CQ=function(i){var r=i.prefixClz,n=i.position,e=n===void 0?{width:240,top:0,bottom:0,left:0}:n,t=i.showHeader,a=t===void 0?!0:t,s=Gt(i,["prefixClz","position","showHeader"]),u=e.width,l=u===void 0?200:u,c=Tj(i),f=c.headerStyle,d=c.bodyStyle,v=mQ(i),m=v.state,y=v.onKeywordChange;return I.a.createElement(I.a.Fragment,null,a&&I.a.createElement(zh,Object.assign({},s,{position:{top:0,left:0,height:Yj,width:l}}),I.a.createElement(pQ,Object.assign({},i,{state:m,style:f,onKeywordChange:y}))),I.a.createElement(zh,Object.assign({className:"".concat(mE,"-nodes")},s,{position:Object.assign(Object.assign({},e),{top:a?Yj:0})}),I.a.createElement(vQ,Object.assign({},i,{state:m,style:d}))))},qq=function(i){Qj(Object(Jc.get)(i,"registerNode"));var r=fg("node-panel"),n=Object(tt.useState)(!1),e=Object(je.a)(n,2),t=e[0],a=e[1],s=i.show,u=s===void 0?!0:s,l=i.position,c=l===void 0?{width:240,top:40,bottom:0,left:0}:l,f=Gt(i,["show","position"]);if(!u)return null;var d=c.width,v=d===void 0?200:d,m=c.left;return I.a.createElement(zh,{className:mE,position:Object.assign(Object.assign({},c),{left:t?-v:m})},I.a.createElement("div",{className:"".concat(mE,"-wrapper")},I.a.createElement(zh,Object.assign({className:r},f,{position:{top:0,bottom:0,left:0,right:0}}),I.a.createElement(CQ,Object.assign({},i,{prefixClz:r,position:c}))),I.a.createElement("div",{className:"".concat(mE,"-icon"),style:{top:21,right:t?-20:-10,borderRadius:t?"0 50% 50% 0":"50%",borderLeft:t?"none":""},onClick:function(){a(!t)}},t?I.a.createElement(Uj.a,null):I.a.createElement(Vj.a,null))))},EQ="flowchart-connecting-edge",OQ="ant",CE;(function(o){o.EVENT_NAME="ADD_FLOWCHART_EDGE_CMD_EVENT"})(CE||(CE={}));var pL={attrs:{line:{stroke:"#A2B1C3",targetMarker:{name:"block",width:12,height:8},strokeDasharray:"5 5",strokeWidth:1}}},wQ=ve.Edge.registry.register("xflow",ve.Edge.define({zIndex:1,highlight:!0,name:EQ,label:"",anchor:{name:"midSide",args:{dx:10}},attrs:pL.attrs,data:{label:""}}),!0),xQ=Xk(function(o,i){var r=i.getValue(),n=r.config,e=n===void 0?{}:n,t=r.useConfig,a=r.mode,s=a===void 0?"edit":a,u=r.showPortsOnNodeSelected,l=u===void 0?!1:u,c=r.edgeConfig,f=c===void 0?{}:c;o.setEdgeTypeParser(function(d){return d==null?void 0:d.renderKey}),Hj(Object.assign(Object.assign({},i.getValue()),{graphConfig:o})),tQ(o),bQ(o),o.setX6Config(zj()({grid:!0,history:!0,resizing:{enabled:!0,minWidth:ro,minHeight:ro,preserveAspectRatio:function(v){var m=v.data;return TZ.includes(m.name)}},snapline:{enabled:!0},connecting:{router:"manhattan",connector:{name:"rounded",args:{radius:8}},anchor:"center",connectionPoint:"anchor",allowBlank:!1,snap:{radius:20},createEdge:function(){var v=this,m=new wQ({});return this.once("edge:connected",function(y){var C=y.edge,O=y.isNew;if(O&&C&&C.isEdge()&&m===C){var x=C.getTargetCell();if(x&&x.isNode()){var T=C.getTargetPortId(),L=C.getSourcePortId(),_=C.getSourceCellId(),z=C.getTargetCellId(),Q=typeof f=="function"?f(C):f;v.trigger(CE.EVENT_NAME,Object.assign({targetPortId:T,sourcePortId:L,source:_,target:z,edge:C,tempEdgeId:m.id},zj()(pL,Q)))}}}),m},validateEdge:function(v){var m,y=v.edge;return!!((m=y==null?void 0:y.target)===null||m===void 0?void 0:m.port)},validateMagnet:function(){return!0},validateConnection:function(v){var m=v.sourceView,y=v.targetView,C=v.targetMagnet;if(m===y)return!1;var O=y.cell;if(C){var x=C.getAttribute("port"),T=O.getPort(x);return!(T&&T.connected)}}},highlighting:{nodeAvailable:{name:"className",args:{className:"available"}},magnetAvailable:{name:"className",args:{className:"available"}},magnetAdsorbed:{name:"className",args:{className:"adsorbed"}}},onPortRendered:function(v){var m=v.port,y=v.contentSelectors,C=y&&y.content,O=m.group,x=dt()("xflow-port",{connected:m.connected});C&&Bv.a.render(I.a.createElement(vZ.a,{prefixCls:OQ},I.a.createElement(tE.a,{title:m.tooltip,placement:O},I.a.createElement("span",{className:x}))),C)}},e)),o.setEvents([{eventName:"node:selected",callback:function(){s==="edit"&&yM(!1)}},{eventName:"edge:dblclick",callback:function(v){SZ(v)}},{eventName:"edge:mouseleave",callback:function(v,m){AZ(v,m)}},{eventName:"node:mouseenter",callback:function(v){s==="edit"&&yM(!0,v,l)}},{eventName:"node:mouseleave",callback:function(v){yM(!1,v)}},{eventName:"node:moved",callback:function(v,m){bZ(v,m)}},{eventName:"node:resized",callback:function(v,m){CZ(v,m)}}]),typeof t=="function"&&t(o)}),EM=Object(ue.a)(function o(){var i=this;Object(me.a)(this,o),this.toDispose=new Bi,this.registerHookHub=function(){return pe(i,void 0,void 0,Object(D.a)().mark(function r(){return Object(D.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ra.create(function(){}));case 1:case"end":return e.stop()}},r)}))},this.registerHook=function(r){return pe(i,void 0,void 0,Object(D.a)().mark(function n(){var e=this,t,a;return Object(D.a)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=new Bi,a=[r.afterGraphInit.registerHook({name:"call add edge to replace temp edge",handler:function(c){return pe(e,void 0,void 0,Object(D.a)().mark(function f(){var d=this,v,m;return Object(D.a)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:v=c.commandService,m=c.graph,m.on(CE.EVENT_NAME,function(O){return pe(d,void 0,void 0,Object(D.a)().mark(function x(){var T,L,_,z,Q,q,ye,Ce;return Object(D.a)().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:return T=O.edge,L=Gt(O,["edge"]),_=L.tempEdgeId,z=Gt(L,["tempEdgeId"]),Q={edgeConfig:Object.assign(Object.assign({},z),{source:{cell:L.source,port:L.sourcePortId},target:{cell:L.target,port:L.targetPortId},zIndex:1,data:Object.assign({},z)})},Pe.next=5,v.executeCommand(Bo.ADD_EDGE.id,Q);case 5:return Pe.next=7,v.executeCommand(Bo.DEL_EDGE.id,{edgeConfig:{id:_}});case 7:return q=m.getCellById(L.source),ye=m.getCellById(L.target),Pe.next=11,v.executeCommand(no.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},q.data),{incomingEdges:m.getIncomingEdges(q),outgoingEdges:m.getOutgoingEdges(q)})});case 11:return Pe.next=13,v.executeCommand(no.UPDATE_NODE.id,{nodeConfig:Object.assign(Object.assign({},ye.data),{incomingEdges:m.getIncomingEdges(ye),outgoingEdges:m.getOutgoingEdges(ye)})});case 13:Ce=Fy("onAddEdge"),typeof Ce=="function"&&Ce(Q.edgeConfig),O.edge.remove();case 16:case"end":return Pe.stop()}},x)}))});case 2:case"end":return C.stop()}},f)}))}})],t.pushAll(a),u.abrupt("return",ra.create(function(){}));case 4:case"end":return u.stop()}},n)}))}});EM=$e([Object(he.singleton)({contrib:lc})],EM);var eee=function(){var i=cc(),r=I.a.useMemo(function(){return{CONFIG_TYPE:"FLOWCHART_EXTENSION",getConfig:function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function e(){return Object(D.a)().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:case"end":return a.stop()}},e)}))}}},[]);return I.a.useEffect(function(){var n=i.addExtension({config:r,createModule:SQ});return i.addContainerClassNames("flowchart-extension-container"),function(){n.dispose()}},[r,i]),null},SQ=function(){return Object(he.Module)(function(i){i(EM)})},AQ=function(i){var r=i.position,n=r===void 0?{top:40,left:240,right:240,bottom:0}:r,e=xQ(i),t=Yo();return Object(tt.useEffect)(function(){t&&gZ(t)},[t]),I.a.createElement(O2,Object.assign({},i,{config:e,position:n}),i.children)};AQ.defaultProps={isXFlowCanvas:!0};var MQ=function(i){return pe(void 0,void 0,void 0,Object(D.a)().mark(function r(){var n,e,t,a,s,u;return Object(D.a)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=i.targetType,t=(n=i.targetData)===null||n===void 0?void 0:n.isGroup,a={tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"\u5206\u7EC4\u540D",name:"group-service",shape:"group-service",placeholder:"\u5206\u7EC4\u540D\u79F0"}]}]}]},s={tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"\u8282\u70B9\u540D",name:"node-service",shape:"node-service",placeholder:"\u8282\u70B9\u540D\u79F0"}]}]}]},u={tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"\u8FB9",name:"edge-service",shape:"edge-service",placeholder:"\u8FB9\u540D\u79F0"}]}]}]},!t){c.next=7;break}return c.abrupt("return",a);case 7:if(e!=="node"){c.next=9;break}return c.abrupt("return",s);case 9:if(e!=="edge"){c.next=11;break}return c.abrupt("return",u);case 11:return c.abrupt("return",{tabs:[{name:"\u8BBE\u7F6E",groups:[{name:"groupName",controls:[{label:"",name:"canvas-service",shape:"canvas-service"}]}]}]});case 12:case"end":return c.stop()}},r)}))};function TQ(o){var i=Object(tt.useState)({loading:!0}),r=Object(je.a)(i,2),n=r[0],e=r[1],t=Object(tt.useCallback)(function(){o().then(function(a){e({loading:!1,data:a})},function(a){e({loading:!1}),console.error(a)})},[o]);return Object(tt.useEffect)(function(){t()},[t]),n}var OM=function(i){var r=i.controlSchema,n=i.children,e=i.type,t=e===void 0?"node":e,a=Gh(),s=a.commandService,u=a.modelService,l=Object(tt.useCallback)(function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function O(){var x,T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,de.SELECTED_NODE.useValue(u);case 2:return x=_.sent,T=x.data,_.abrupt("return",T);case 5:case"end":return _.stop()}},O)}))},[u]),c=Object(tt.useCallback)(function(){return pe(void 0,void 0,void 0,Object(D.a)().mark(function O(){var x,T;return Object(D.a)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,de.SELECTED_CELL.useValue(u);case 2:return x=_.sent,T=x.getData(),_.abrupt("return",Object.assign({id:x.id},T));case 5:case"end":return _.stop()}},O)}))},[u]),f=TQ(t==="edge"?c:l),d=f.data,v=f.loading;I.a.useEffect(function(){s.executeCommand(di.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(x,T){return pe(void 0,void 0,void 0,Object(D.a)().mark(function L(){return Object(D.a)().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.abrupt("return",{err:null,data:T,meta:x});case 1:case"end":return z.stop()}},L)}))}})},[s]);var m=function(x){return pe(void 0,void 0,void 0,Object(D.a)().mark(function T(){var L,_;return Object(D.a)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,l();case 2:return L=Q.sent,_=Object.assign(Object.assign({},L),x),Q.next=6,s.executeCommand(no.UPDATE_NODE.id,{nodeConfig:_});case 6:By({type:"update:node",config:_});case 7:case"end":return Q.stop()}},T)}))},y=function(x){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"line",L=arguments.length>2?arguments[2]:void 0;return pe(void 0,void 0,void 0,Object(D.a)().mark(function _(){var z,Q,q;return Object(D.a)().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.next=2,c();case 2:return Q=Ce.sent,q=Object.assign(Object.assign(Object.assign({},Q),L?x[L]:x),{attrs:Object.assign(Object.assign({},Q.attrs),Object(Re.a)({},T,Object.assign(Object.assign({},(z=Q.attrs)===null||z===void 0?void 0:z[T]),L?x[L]:x)))}),Ce.next=6,s.executeCommand(Bo.UPDATE_EDGE.id,{edgeConfig:q});case 6:By({type:"update:edge",config:q});case 7:case"end":return Ce.stop()}},_)}))},C=function(x){return pe(void 0,void 0,void 0,Object(D.a)().mark(function T(){var L,_;return Object(D.a)().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,l();case 2:return L=Q.sent,_=Object.assign(Object.assign({},L),x),Q.next=6,s.executeCommand(no.UPDATE_NODE.id,{nodeConfig:_});case 6:By({type:"update:group",config:_});case 7:case"end":return Q.stop()}},T)}))};return v?null:I.a.createElement(Uh,{schema:r},function(){return n(Object.assign({},d),{updateNode:m,updateEdge:y,updateGroup:C})})},Ys="flowchart-editor",EE=24,gL={attrs:{line:{stroke:"#A2B1C3",strokeWidth:1},text:{fill:"#000",fontSize:12,textAnchor:"middle",textVerticalAnchor:"middle"}}},OE={width:12,height:8,name:"block"},wE={width:0,height:0,name:""},PQ={target:{sourceMarker:wE,targetMarker:OE},source:{sourceMarker:OE,targetMarker:wE},all:{sourceMarker:OE,targetMarker:OE},none:{sourceMarker:wE,targetMarker:wE}},kQ={solid:[0,0],dash:[5,5]},DQ=function(i){var r=i.label,n=r===void 0?"\u6807\u7B7E":r,e=i.value,t=i.onChange;return I.a.createElement("div",{className:"group"},I.a.createElement("label",null,n),I.a.createElement(_g.a,{value:e,style:{height:EE},onChange:function(s){t==null||t(s.target.value)}}))},xE=DQ,IQ=h("WFjJ"),RQ=function(i){var r=i.label,n=i.value,e=n===void 0?"":n,t=i.onChange,a=i.getContainer,s=Object(tt.useState)(!1),u=Object(je.a)(s,2),l=u[0],c=u[1],f=Object(tt.useRef)(e),d=Object(tt.useRef)(),v=Yo(),m=v.graphProvider,y=Object(tt.useRef)();m.getGraphOptions().then(function(T){y.current=T});var C=function(){return I.a.createElement("div",{className:"".concat(Ys,"-pick-color-container")},I.a.createElement("div",{className:"".concat(Ys,"-popover")},I.a.createElement(IQ.SketchPicker,{onChange:function(_){f.current=_.hex}}),I.a.createElement("div",{className:"foolter"},I.a.createElement(sM.a,{onClick:function(){c(!1)}},"\u53D6\u6D88"),I.a.createElement(sM.a,{type:"primary",onClick:function(){t==null||t(f.current),c(!1)}},"\u786E\u8BA4"))))},O=function(L,_){var z=document.getElementsByClassName(_);if(z.length===1)return z[0];for(var Q=null,q=L.parentElement;!Q;){var ye=q.getElementsByClassName(_);(ye==null?void 0:ye.length)>0&&(Q=ye[0]),q=q.parentElement}return Q},x=function(){var L,_=(L=a==null?void 0:a())!==null&&L!==void 0?L:O(d.current,"flowchart-editor-panel-body");return Object(Nk.createPortal)(I.a.createElement(C,null),_)};return I.a.createElement("div",{className:"group",ref:d},r&&I.a.createElement("label",null,r),I.a.createElement("div",{className:"".concat(Ys,"-color-container"),onClick:function(){c(!0)}},I.a.createElement("div",{className:"".concat(Ys,"-color"),style:{backgroundColor:e,height:"100%"}})),l&&x())},Nd=Object(tt.memo)(RQ,function(o,i){return o.label===i.label&&o.value===i.value}),NQ=function(i){var r=i.label,n=i.value,e=i.onChange,t=i.min,a=i.width;return I.a.createElement("div",{className:"group"},r&&I.a.createElement("label",null,r),I.a.createElement(dM.a,{value:n,min:t,style:{width:a,height:EE},onChange:function(u){e==null||e(u)}}))},Gy=NQ,SE=function(i){var r=i.value,n=i.onChangeItem,e=i.addonBefore;return I.a.createElement("div",{className:"addon-before-group"},I.a.createElement(dM.a,{value:r,style:{height:EE,border:"none"},onChange:function(a){n(a)}}),I.a.createElement("span",null,e))},jQ=function(i){var r=i.label,n=r===void 0?"\u4F4D\u7F6E":r,e=i.x,t=i.y,a=i.onChange;return I.a.createElement("div",{className:"group"},I.a.createElement("label",null,n),I.a.createElement("div",{className:"split"},I.a.createElement(SE,{addonBefore:"X",value:e,onChangeItem:function(u){a==null||a("x",u)}}),I.a.createElement(SE,{addonBefore:"Y",value:t,onChangeItem:function(u){a==null||a("y",u)}})))},wM=jQ,LQ=function(i){var r=i.width,n=i.height,e=i.label,t=e===void 0?"\u5C3A\u5BF8":e,a=i.onChange;return I.a.createElement("div",{className:"group"},I.a.createElement("label",null,t),I.a.createElement("div",{className:"split"},I.a.createElement(SE,{addonBefore:"W",value:r,onChangeItem:function(u){a==null||a("width",u)}}),I.a.createElement(SE,{addonBefore:"H",value:n,onChangeItem:function(u){a==null||a("height",u)}})))},xM=LQ,_Q=function(i){var r=i.label,n=r===void 0?"\u7BAD\u5934":r,e=i.value,t=i.onChange,a=i.options,s=a===void 0?[]:a,u=i.width;return I.a.createElement("div",{className:"group"},I.a.createElement("label",null,n),I.a.createElement(cM.a,{size:"small",value:e,style:{width:u,height:EE},getPopupContainer:function(c){return c.parentNode},optionFilterProp:"children",onChange:function(c){t==null||t(c)},filterOption:function(c,f){var d=f.label,v=d===void 0?"":d;return typeof v=="string"?v.toLowerCase().indexOf(c.toLowerCase())>=0:v.toString().indexOf(c.toLowerCase())>=0},options:s}))},SM=_Q,tee={InputFiled:xE,ColorPicker:Nd,InputNumberFiled:Gy,Size:xM,Position:wM,SelectField:SM},FQ=function(i){var r=i.config,n=i.plugin,e=n===void 0?{}:n,t=e.updateNode,a=Object(tt.useState)(Object.assign(Object.assign({},vr),r)),s=Object(je.a)(a,2),u=s[0],l=s[1],c=function(d,v){l(Object.assign(Object.assign({},u),Object(Re.a)({},d,v))),t(Object(Re.a)({},d,v))};return Object(tt.useEffect)(function(){l(Object.assign(Object.assign({},vr),r))},[r]),I.a.createElement("div",{className:"".concat(Ys,"-panel-body")},I.a.createElement("div",{className:"".concat(Ys,"-panel-group")},I.a.createElement("h5",null,"\u5185\u5BB9"),I.a.createElement(xE,{label:"\u6807\u9898",value:u.label,onChange:function(d){c("label",d)}})),I.a.createElement("div",{className:"".concat(Ys,"-panel-group")},I.a.createElement("h5",null,"\u6837\u5F0F"),I.a.createElement(wM,{x:u.x,y:u.y,onChange:function(d,v){c(d,v)}}),I.a.createElement(xM,{width:u.width,height:u.height,onChange:function(d,v){c(d,v)}}),I.a.createElement(Nd,{label:"\u586B\u5145",value:u.fill,onChange:function(d){c("fill",d)}}),I.a.createElement(Nd,{label:"\u8FB9\u6846",value:u.stroke,onChange:function(d){c("stroke",d)}}),I.a.createElement("div",{className:"".concat(Ys,"-node-text-style")},I.a.createElement(Gy,{label:"\u5B57\u53F7",value:u.fontSize,width:68,onChange:function(d){c("fontSize",d)}}),I.a.createElement(Nd,{value:u.fontFill,onChange:function(d){c("fontFill",d)}}))))},mL=function(i){return I.a.createElement(OM,Object.assign({},i),function(r,n){return I.a.createElement(FQ,Object.assign({},i,{plugin:n,config:r}))})},BQ=function(i){var r=i.config,n=i.plugin,e=n===void 0?{}:n,t=e.updateEdge,a=Object(tt.useState)(Object.assign(Object.assign({},gL),r)),s=Object(je.a)(a,2),u=s[0],l=s[1];Object(tt.useEffect)(function(){l(Object.assign(Object.assign({},gL),r))},[r]);var c=function(y){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"line",O,x=u.attrs,T=x===void 0?{}:x;return(O=T[C])===null||O===void 0?void 0:O[y]},f=function(){var y,C,O,x,T,L=u.attrs,_=L===void 0?{}:L,z=_.line,Q=z===void 0?{}:z;return((y=Q.sourceMarker)===null||y===void 0?void 0:y.name)&&((C=Q.targetMarker)===null||C===void 0?void 0:C.name)?"all":!((O=Q.sourceMarker)===null||O===void 0?void 0:O.name)&&!((x=Q.targetMarker)===null||x===void 0?void 0:x.name)?"none":((T=Q.sourceMarker)===null||T===void 0?void 0:T.name)?"source":"target"},d=function(){var y=u.attrs,C=y===void 0?{}:y,O=C.line,x=O===void 0?{}:O;return x.strokeDasharray?"dash":"solid"},v=function(y,C){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"line",x,T;if(y==="arrow")l(Object.assign(Object.assign({},u),{attrs:Object.assign(Object.assign({},u.attrs),Object(Re.a)({},O,Object.assign(Object.assign({},(x=u.attrs)===null||x===void 0?void 0:x[O]),C)))}));else{var L;l(Object.assign(Object.assign({},u),(L={},Object(Re.a)(L,y,C),Object(Re.a)(L,"attrs",Object.assign(Object.assign({},u.attrs),Object(Re.a)({},O,Object.assign(Object.assign({},(T=u.attrs)===null||T===void 0?void 0:T[O]),Object(Re.a)({},y,C))))),L)))}t(Object(Re.a)({},y,C),O,y==="arrow"?"arrow":"")};return I.a.createElement("div",{className:"".concat(Ys,"-panel-body")},I.a.createElement("div",{className:"".concat(Ys,"-panel-group")},I.a.createElement("h5",null,"\u5185\u5BB9"),I.a.createElement(xE,{label:"\u6807\u7B7E",value:u.label,onChange:function(y){v("label",y)}})),I.a.createElement("h5",{style:{marginBottom:12}},"\u6837\u5F0F"),I.a.createElement("div",{className:"".concat(Ys,"-panel-group"),style:{marginBottom:0}},I.a.createElement("h5",null,"\u7EBF"),I.a.createElement(SM,{label:"\u7BAD\u5934",value:f(),width:"100%",options:[{label:"\u6B63\u5411",value:"target"},{label:"\u9006\u5411",value:"source"},{label:"\u53CC\u5411",value:"all"},{label:"\u65E0",value:"none"}],onChange:function(y){v("arrow",PQ[y],"line")}}),I.a.createElement("div",{className:"".concat(Ys,"-edge-stroke-style")},I.a.createElement(SM,{label:"\u7EBF\u5F62",width:68,value:d(),options:[{label:"\u5B9E\u7EBF",value:"solid"},{label:"\u865A\u7EBF",value:"dash"}],onChange:function(y){v("strokeDasharray",kQ[y],"line")}}),I.a.createElement(Gy,{value:c("strokeWidth"),min:1,onChange:function(y){v("strokeWidth",y,"line")}})),I.a.createElement(Nd,{label:"\u8FB9\u6846",value:c("stroke"),onChange:function(y){v("stroke",y,"line")}})),I.a.createElement("div",{className:"".concat(Ys,"-panel-group")},I.a.createElement("h5",null,"\u6807\u7B7E"),I.a.createElement("div",{className:"".concat(Ys,"-edge-text-style")},I.a.createElement(Gy,{label:"\u5B57\u53F7",min:10,width:68,value:c("fontSize","text")||12,onChange:function(y){v("fontSize",y,"text")}}),I.a.createElement(Nd,{value:c("fill","text")||"#000",onChange:function(y){v("fill",y,"text")}}))))},yL=function(i){return I.a.createElement(OM,Object.assign({},i,{type:"edge"}),function(r,n){return I.a.createElement(BQ,Object.assign({},i,{plugin:n,config:r}))})},GQ=function(i){var r=i.config,n=i.plugin,e=n===void 0?{}:n,t=e.updateGroup,a=Object(tt.useState)(Object.assign(Object.assign({},vr),r)),s=Object(je.a)(a,2),u=s[0],l=s[1],c=function(d,v){l(Object.assign(Object.assign({},u),Object(Re.a)({},d,v))),t(Object(Re.a)({},d,v))};return Object(tt.useEffect)(function(){l(Object.assign(Object.assign({},vr),r))},[r]),I.a.createElement("div",{className:"".concat(Ys,"-panel-body")},I.a.createElement("div",{className:"".concat(Ys,"-panel-group")},I.a.createElement("h5",null,"\u5185\u5BB9"),I.a.createElement(xE,{label:"\u6807\u9898",value:u.label,onChange:function(d){c("label",d)}})),I.a.createElement("div",{className:"".concat(Ys,"-panel-group")},I.a.createElement("h5",null,"\u6837\u5F0F"),I.a.createElement(wM,{x:u.x,y:u.y,onChange:function(d,v){c(d,v)}}),I.a.createElement(xM,{width:u.width,height:u.height,onChange:function(d,v){c(d,v)}}),I.a.createElement(Nd,{label:"\u586B\u5145",value:u.fill,onChange:function(d){c("fill",d)}}),I.a.createElement(Nd,{label:"\u8FB9\u6846",value:u.stroke,onChange:function(d){c("stroke",d)}}),I.a.createElement("div",{className:"".concat(Ys,"-node-text-style")},I.a.createElement(Gy,{label:"\u5B57\u53F7",value:u.fontSize,width:68,onChange:function(d){c("fontSize",d)}}),I.a.createElement(Nd,{value:u.fontFill,onChange:function(d){c("fontFill",d)}}))))},bL=function(i){return I.a.createElement(OM,Object.assign({},i),function(r,n){return I.a.createElement(GQ,Object.assign({},i,{plugin:n,config:r}))})},CL=function(){return I.a.createElement("div",{className:"".concat(Ys,"-canvas-panel")},I.a.createElement("span",null,"\u672A\u9009\u4E2D"))},zQ=function(i){return i.set("node-service",mL),i.set("edge-service",yL),i.set("group-service",bL),i.set("canvas-service",CL),i},nee={NodeService:mL,EdgeService:yL,GroupService:bL,CanvasService:CL},AM="xflow-editor-panel-collpase",ree=function(i){var r=Object(tt.useState)(!1),n=Object(je.a)(r,2),e=n[0],t=n[1],a=i.controlMapService,s=a===void 0?zQ:a,u=i.formSchemaService,l=u===void 0?MQ:u,c=i.position,f=c===void 0?{width:240,top:0,bottom:0,right:0}:c,d=i.show,v=d===void 0?!0:d,m=Gt(i,["controlMapService","formSchemaService","position","show"]);if(!v)return null;var y=f.width,C=y===void 0?200:y,O=f.right;return I.a.createElement(zh,{className:AM,position:Object.assign(Object.assign({},f),{right:e?-C:O})},I.a.createElement("div",{className:"".concat(AM,"-wrapper")},I.a.createElement(Bj,Object.assign({targetType:["node","edge","canvas","group"],controlMapService:s,formSchemaService:l,position:Object.assign(Object.assign({},f),{top:0}),prefixClz:"xflow-form-editor"},m)),I.a.createElement("div",{className:"".concat(AM,"-icon"),style:{top:21,left:e?-20:-10,borderRadius:e?"50% 0 0  50%":"50%",borderRight:e?"none":""},onClick:function(){t(!e)}},e?I.a.createElement(Vj.a,null):I.a.createElement(Uj.a,null))))}},"9y2T":function(ge,R,h){"use strict";h.d(R,"a",function(){return B}),h.d(R,"b",function(){return S});var B=-1,p=1;function S(){return p++}},A14R:function(ge,R){},AEOw:function(ge,R){ge.exports=h;function h(B,p,S){var E=p[0],A=p[1];return B[0]=S[0]*E+S[4]*A+S[12],B[1]=S[1]*E+S[5]*A+S[13],B}},APxj:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=h("Ucsi");function p(S,E){E===void 0&&(E=!0);var A=B.makePropertyInjectDecorator(S,E),k=B.makePropertyInjectNamedDecorator(S,E),M=B.makePropertyInjectTaggedDecorator(S,E),U=B.makePropertyMultiInjectDecorator(S,E);return{lazyInject:A,lazyInjectNamed:k,lazyInjectTagged:M,lazyMultiInject:U}}R.default=p},AV2a:function(ge,R,h){var B=h("3z9K"),p=h("QJPA"),S=h("WZrV");ge.exports=E;function E(A,k){var M=new p,U={},V=new S,$;function W(ee){var ne=ee.v===$?ee.w:ee.v,ie=V.priority(ne);if(ie!==void 0){var re=k(ee);re<ie&&(U[ne]=$,V.decrease(ne,re))}}if(A.nodeCount()===0)return M;B.each(A.nodes(),function(ee){V.add(ee,Number.POSITIVE_INFINITY),M.setNode(ee)}),V.decrease(A.nodes()[0],0);for(var Y=!1;V.size()>0;){if($=V.removeMin(),B.has(U,$))M.setEdge($,U[$]);else{if(Y)throw new Error("Input graph is not connected: "+A);Y=!0}A.nodeEdges($).forEach(W)}return M}},AnK5:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.EditableInput=void 0;var B=function(){function Z(fe,se){for(var ve=0;ve<se.length;ve++){var ae=se[ve];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(fe,ae.key,ae)}}return function(fe,se,ve){return se&&Z(fe.prototype,se),ve&&Z(fe,ve),fe}}(),p=h("q1tI"),S=k(p),E=h("/FUP"),A=k(E);function k(Z){return Z&&Z.__esModule?Z:{default:Z}}function M(Z,fe,se){return fe in Z?Object.defineProperty(Z,fe,{value:se,enumerable:!0,configurable:!0,writable:!0}):Z[fe]=se,Z}function U(Z,fe){if(!(Z instanceof fe))throw new TypeError("Cannot call a class as a function")}function V(Z,fe){if(!Z)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe&&(typeof fe=="object"||typeof fe=="function")?fe:Z}function $(Z,fe){if(typeof fe!="function"&&fe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof fe);Z.prototype=Object.create(fe&&fe.prototype,{constructor:{value:Z,enumerable:!1,writable:!0,configurable:!0}}),fe&&(Object.setPrototypeOf?Object.setPrototypeOf(Z,fe):Z.__proto__=fe)}var W=1,Y=38,ee=40,ne=[Y,ee],ie=function(fe){return ne.indexOf(fe)>-1},re=function(fe){return fe+"%"},J=function(fe){return Number(String(fe).replace(/%/g,""))},ce=function(fe){return String(fe).indexOf("%")>-1},G=R.EditableInput=function(Z){$(fe,Z);function fe(se){U(this,fe);var ve=V(this,(fe.__proto__||Object.getPrototypeOf(fe)).call(this));return ve.handleBlur=function(){ve.state.blurValue&&ve.setState({value:ve.state.blurValue,blurValue:null})},ve.handleChange=function(ae){ve.setUpdatedValue(ae.target.value,ae)},ve.handleKeyDown=function(ae){var j=J(ae.target.value);if(!isNaN(j)&&ie(ae.keyCode)){var de=ve.getArrowOffset(),ke=ae.keyCode===Y?j+de:j-de;ve.setUpdatedValue(ke,ae)}},ve.handleDrag=function(ae){if(ve.props.dragLabel){var j=Math.round(ve.props.value+ae.movementX);j>=0&&j<=ve.props.dragMax&&ve.props.onChange&&ve.props.onChange(ve.getValueObjectWithLabel(j),ae)}},ve.handleMouseDown=function(ae){ve.props.dragLabel&&(ae.preventDefault(),ve.handleDrag(ae),window.addEventListener("mousemove",ve.handleDrag),window.addEventListener("mouseup",ve.handleMouseUp))},ve.handleMouseUp=function(){ve.unbindEventListeners()},ve.unbindEventListeners=function(){window.removeEventListener("mousemove",ve.handleDrag),window.removeEventListener("mouseup",ve.handleMouseUp)},ve.state={value:String(se.value).toUpperCase(),blurValue:String(se.value).toUpperCase()},ve}return B(fe,[{key:"componentWillReceiveProps",value:function(ve){var ae=this.input;ve.value!==this.state.value&&(ae===document.activeElement?this.setState({blurValue:String(ve.value).toUpperCase()}):this.setState({value:String(ve.value).toUpperCase(),blurValue:!this.state.blurValue&&String(ve.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(ve){return M({},this.props.label,ve)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||W}},{key:"setUpdatedValue",value:function(ve,ae){var j=this.props.label!==null?this.getValueObjectWithLabel(ve):ve;this.props.onChange&&this.props.onChange(j,ae);var de=ce(ae.target.value);this.setState({value:de?re(ve):ve})}},{key:"render",value:function(){var ve=this,ae=(0,A.default)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return S.default.createElement("div",{style:ae.wrap},S.default.createElement("input",{style:ae.input,ref:function(de){return ve.input=de},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?S.default.createElement("span",{style:ae.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),fe}(p.PureComponent||p.Component);R.default=G},AwBQ:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Lookup=void 0;var B=h("MON2"),p=function(){function S(){this._map=new Map}return S.prototype.getMap=function(){return this._map},S.prototype.add=function(E,A){if(E==null)throw new Error(B.NULL_ARGUMENT);if(A==null)throw new Error(B.NULL_ARGUMENT);var k=this._map.get(E);k!==void 0?(k.push(A),this._map.set(E,k)):this._map.set(E,[A])},S.prototype.get=function(E){if(E==null)throw new Error(B.NULL_ARGUMENT);var A=this._map.get(E);if(A!==void 0)return A;throw new Error(B.KEY_NOT_FOUND)},S.prototype.remove=function(E){if(E==null)throw new Error(B.NULL_ARGUMENT);if(!this._map.delete(E))throw new Error(B.KEY_NOT_FOUND)},S.prototype.removeByCondition=function(E){var A=this;this._map.forEach(function(k,M){var U=k.filter(function(V){return!E(V)});U.length>0?A._map.set(M,U):A._map.delete(M)})},S.prototype.hasKey=function(E){if(E==null)throw new Error(B.NULL_ARGUMENT);return this._map.has(E)},S.prototype.clone=function(){var E=new S;return this._map.forEach(function(A,k){A.forEach(function(M){return E.add(k,M.clone())})}),E},S.prototype.traverse=function(E){this._map.forEach(function(A,k){E(k,A)})},S}();R.Lookup=p},AzWu:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M442.3 677.6l199.4-156.7a11.3 11.3 0 000-17.7L442.3 346.4c-7.4-5.8-18.3-.6-18.3 8.8v313.5c0 9.4 10.9 14.7 18.3 8.9z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"play-square",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="PlaySquareOutlined";var M=R.a=p.forwardRef(k)},AzzA:function(ge,R){ge.exports=h;function h(B,p){return B[0]=-p[0],B[1]=-p[1],B}},BFph:function(ge,R,h){"use strict";h.d(R,"a",function(){return Oe});var B=h("o0o1"),p=h.n(B),S=h("yXPU"),E=h.n(S),A=h("yG8O"),k=h.n(A),M=h("lwsE"),U=h.n(M),V=h("W8MJ"),$=h.n(V),W=h("U+yc"),Y=h.n(W),ee=h("1ABj"),ne=h.n(ee),ie=h("IOcx"),re=h("4cb6"),J=h.n(re),ce=h("+uE7"),G,Z,fe,se,ve,ae,j,de,ke,he,Oe=(G=Object(re.injectable)(),Z=Object(re.inject)(ce.a.HierarchyComponentManager),fe=Object(re.inject)(ce.a.TransformComponentManager),se=Object(re.inject)(ce.a.MeshComponentManager),G(ve=(ae=(he=function(){function We(){U()(this,We),k()(this,"hierarchy",j,this),k()(this,"transform",de,this),k()(this,"mesh",ke,this)}return $()(We,[{key:"execute",value:function(){var D=E()(p.a.mark(function pt(){return p.a.wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:this.runTransformUpdateSystem(),this.runHierarchyUpdateSystem();case 2:case"end":return Lt.stop()}},pt,this)}));function je(){return D.apply(this,arguments)}return je}()},{key:"tearDown",value:function(){this.hierarchy.clear(),this.transform.clear()}},{key:"getHierarchyComponentManager",value:function(){return this.hierarchy}},{key:"getTransformComponentManager",value:function(){return this.transform}},{key:"runTransformUpdateSystem",value:function(){var je=this;this.transform.forEach(function(pt,nt){(nt.isDirty()||nt.isLocalDirty())&&(je.setMeshAABBDirty(je.mesh.getComponentByEntity(pt)),nt.updateTransform())})}},{key:"runHierarchyUpdateSystem",value:function(){var je=this;this.hierarchy.forEach(function(pt,nt){var Lt=je.transform.getComponentByEntity(pt),Gt=je.transform.getComponentByEntity(nt.parentID);Lt!==null&&Gt!==null&&Lt.updateTransformWithParent(Gt)})}},{key:"attach",value:function(je,pt,nt){this.hierarchy.contains(je)&&this.detach(je),this.hierarchy.create(je,{parentID:pt});var Lt=this.mesh.getComponentByEntity(pt);if(this.setMeshAABBDirty(Lt),Lt&&Lt.children.indexOf(je)===-1&&Lt.children.push(je),this.hierarchy.getCount()>1)for(var Gt=this.hierarchy.getCount()-1;Gt>0;--Gt)for(var $e=this.hierarchy.getEntity(Gt),jt=0;jt<Gt;++jt){var Be=this.hierarchy.getComponent(jt);if(Be.parentID===$e){this.hierarchy.moveItem(Gt,jt),++Gt;break}}var pe=this.hierarchy.getComponentByEntity(je),un=this.transform.getComponentByEntity(pt);un===null&&(un=this.transform.create(pt));var ln=this.transform.getComponentByEntity(je);ln===null&&(ln=this.transform.create(je),un=this.transform.getComponentByEntity(pt)),ln.parent=un,!nt&&un&&(ln.matrixTransform(ie.b.invert(ie.b.create(),un.worldTransform)),ln.updateTransform()),un&&ln.updateTransformWithParent(un)}},{key:"detach",value:function(je){var pt=this.hierarchy.getComponentByEntity(je);if(pt!==null){var nt=this.transform.getComponentByEntity(je);nt!==null&&(nt.parent=null,nt.applyTransform()),this.hierarchy.removeKeepSorted(je);var Lt=this.mesh.getComponentByEntity(pt.parentID);if(Lt){var Gt=Lt.children.indexOf(je);Lt.children.splice(Gt,1)}this.setMeshAABBDirty(Lt)}}},{key:"detachChildren",value:function(je){var pt=this.mesh.getComponentByEntity(je);pt&&(pt.children=[]);for(var nt=0;nt<this.hierarchy.getCount();){var Lt;if(((Lt=this.hierarchy.getComponent(nt))===null||Lt===void 0?void 0:Lt.parentID)===je){var Gt=this.hierarchy.getEntity(nt);this.detach(Gt)}else++nt}}},{key:"setMeshAABBDirty",value:function(je){je&&(je.aabbDirty=!0)}}]),We}(),he),j=Y()(ae.prototype,"hierarchy",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de=Y()(ae.prototype,"transform",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ke=Y()(ae.prototype,"mesh",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae))||ve)},BKMn:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.PhotoshopPointerCircle=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.PhotoshopPointerCircle=function(U){var V=U.hsl,$=(0,E.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":V.l>.5});return p.default.createElement("div",{style:$.picker})};R.default=k},Ba7A:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Swatch=void 0;var B=Object.assign||function(Y){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee];for(var ie in ne)Object.prototype.hasOwnProperty.call(ne,ie)&&(Y[ie]=ne[ie])}return Y},p=h("q1tI"),S=V(p),E=h("/FUP"),A=V(E),k=h("japM"),M=h("Nq3d"),U=V(M);function V(Y){return Y&&Y.__esModule?Y:{default:Y}}var $=13,W=R.Swatch=function(ee){var ne=ee.color,ie=ee.style,re=ee.onClick,J=re===void 0?function(){}:re,ce=ee.onHover,G=ee.title,Z=G===void 0?ne:G,fe=ee.children,se=ee.focus,ve=ee.focusStyle,ae=ve===void 0?{}:ve,j=ne==="transparent",de=(0,A.default)({default:{swatch:B({background:ne,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},ie,se?ae:{})}}),ke=function(je){return J(ne,je)},he=function(je){return je.keyCode===$&&J(ne,je)},Oe=function(je){return ce(ne,je)},We={};return ce&&(We.onMouseOver=Oe),S.default.createElement("div",B({style:de.swatch,onClick:ke,title:Z,tabIndex:0,onKeyDown:he},We),fe,j&&S.default.createElement(U.default,{borderRadius:de.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};R.default=(0,k.handleFocus)(W)},BjIp:function(ge,R,h){var B=h("3z9K"),p=h("98GK");ge.exports=S;function S(E){return B.filter(p(E),function(A){return A.length>1||A.length===1&&E.hasEdge(A[0],A[0])})}},BkyA:function(ge,R,h){var B=h("swpM");ge.exports=p;function p(S){try{B(S)}catch(E){if(E instanceof B.CycleException)return!1;throw E}return!0}},BmQL:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SwatchesColor=void 0;var B=h("q1tI"),p=$(B),S=h("/FUP"),E=$(S),A=h("p8yl"),k=$(A),M=h("TM95"),U=h("ql/k"),V=$(U);function $(Y){return Y&&Y.__esModule?Y:{default:Y}}var W=R.SwatchesColor=function(ee){var ne=ee.color,ie=ee.onClick,re=ie===void 0?function(){}:ie,J=ee.onSwatchHover,ce=ee.first,G=ee.last,Z=ee.active,fe=(0,E.default)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:ne,marginBottom:"1px"},check:{color:k.default.getContrastingColor(ne),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:ce,last:G,active:Z,"color-#FFFFFF":ne==="#FFFFFF",transparent:ne==="transparent"});return p.default.createElement(M.Swatch,{color:ne,style:fe.color,onClick:re,onHover:J,focusStyle:{boxShadow:"0 0 4px "+ne}},p.default.createElement("div",{style:fe.check},p.default.createElement(V.default,null)))};R.default=W},Bnag:function(ge,R){function h(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},Bu3x:function(ge,R){ge.exports=h;function h(B,p,S){return B[0]=p[0]/S[0],B[1]=p[1]/S[1],B}},C3Dj:function(ge,R){ge.exports=h;function h(B,p){var S=p[0]-B[0],E=p[1]-B[1];return S*S+E*E}},CGoQ:function(ge,R,h){ge.exports=h("M5u/")},CZoQ:function(ge,R){function h(B,p,S){for(var E=S-1,A=B.length;++E<A;)if(B[E]===p)return E;return-1}ge.exports=h},Cq4r:function(ge,R){ge.exports=h;function h(B,p){return B[0]=Math.floor(p[0]),B[1]=Math.floor(p[1]),B}},D9lx:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.BindingInWhenOnSyntax=void 0;var B=h("6AGu"),p=h("406g"),S=h("z4Hk"),E=function(){function A(k){this._binding=k,this._bindingWhenSyntax=new S.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new p.BindingOnSyntax(this._binding),this._bindingInSyntax=new B.BindingInSyntax(k)}return A.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},A.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},A.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},A.prototype.when=function(k){return this._bindingWhenSyntax.when(k)},A.prototype.whenTargetNamed=function(k){return this._bindingWhenSyntax.whenTargetNamed(k)},A.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},A.prototype.whenTargetTagged=function(k,M){return this._bindingWhenSyntax.whenTargetTagged(k,M)},A.prototype.whenInjectedInto=function(k){return this._bindingWhenSyntax.whenInjectedInto(k)},A.prototype.whenParentNamed=function(k){return this._bindingWhenSyntax.whenParentNamed(k)},A.prototype.whenParentTagged=function(k,M){return this._bindingWhenSyntax.whenParentTagged(k,M)},A.prototype.whenAnyAncestorIs=function(k){return this._bindingWhenSyntax.whenAnyAncestorIs(k)},A.prototype.whenNoAncestorIs=function(k){return this._bindingWhenSyntax.whenNoAncestorIs(k)},A.prototype.whenAnyAncestorNamed=function(k){return this._bindingWhenSyntax.whenAnyAncestorNamed(k)},A.prototype.whenAnyAncestorTagged=function(k,M){return this._bindingWhenSyntax.whenAnyAncestorTagged(k,M)},A.prototype.whenNoAncestorNamed=function(k){return this._bindingWhenSyntax.whenNoAncestorNamed(k)},A.prototype.whenNoAncestorTagged=function(k,M){return this._bindingWhenSyntax.whenNoAncestorTagged(k,M)},A.prototype.whenAnyAncestorMatches=function(k){return this._bindingWhenSyntax.whenAnyAncestorMatches(k)},A.prototype.whenNoAncestorMatches=function(k){return this._bindingWhenSyntax.whenNoAncestorMatches(k)},A.prototype.onActivation=function(k){return this._bindingOnSyntax.onActivation(k)},A}();R.BindingInWhenOnSyntax=E},DE2O:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M811.4 368.9C765.6 248 648.9 162 512.2 162S258.8 247.9 213 368.8C126.9 391.5 63.5 470.2 64 563.6 64.6 668 145.6 752.9 247.6 762c4.7.4 8.7-3.3 8.7-8v-60.4c0-4-3-7.4-7-7.9-27-3.4-52.5-15.2-72.1-34.5-24-23.5-37.2-55.1-37.2-88.6 0-28 9.1-54.4 26.2-76.4 16.7-21.4 40.2-36.9 66.1-43.7l37.9-10 13.9-36.7c8.6-22.8 20.6-44.2 35.7-63.5 14.9-19.2 32.6-36 52.4-50 41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.3c19.9 14 37.5 30.8 52.4 50 15.1 19.3 27.1 40.7 35.7 63.5l13.8 36.6 37.8 10c54.2 14.4 92.1 63.7 92.1 120 0 33.6-13.2 65.1-37.2 88.6-19.5 19.2-44.9 31.1-71.9 34.5-4 .5-6.9 3.9-6.9 7.9V754c0 4.7 4.1 8.4 8.8 8 101.7-9.2 182.5-94 183.2-198.2.6-93.4-62.7-172.1-148.6-194.9z"}},{tag:"path",attrs:{d:"M376.9 656.4c1.8-33.5 15.7-64.7 39.5-88.6 25.4-25.5 60-39.8 96-39.8 36.2 0 70.3 14.1 96 39.8 1.4 1.4 2.7 2.8 4.1 4.3l-25 19.6a8 8 0 003 14.1l98.2 24c5 1.2 9.9-2.6 9.9-7.7l.5-101.3c0-6.7-7.6-10.5-12.9-6.3L663 532.7c-36.6-42-90.4-68.6-150.5-68.6-107.4 0-195 85.1-199.4 191.7-.2 4.5 3.4 8.3 8 8.3H369c4.2-.1 7.7-3.4 7.9-7.7zM703 664h-47.9c-4.2 0-7.7 3.3-8 7.6-1.8 33.5-15.7 64.7-39.5 88.6-25.4 25.5-60 39.8-96 39.8-36.2 0-70.3-14.1-96-39.8-1.4-1.4-2.7-2.8-4.1-4.3l25-19.6a8 8 0 00-3-14.1l-98.2-24c-5-1.2-9.9 2.6-9.9 7.7l-.4 101.4c0 6.7 7.6 10.5 12.9 6.3l23.2-18.2c36.6 42 90.4 68.6 150.5 68.6 107.4 0 195-85.1 199.4-191.7.2-4.5-3.4-8.3-8-8.3z"}}]},name:"cloud-sync",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="CloudSyncOutlined";var M=R.a=p.forwardRef(k)},DRdP:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.PhotoshopButton=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.PhotoshopButton=function(U){var V=U.onClick,$=U.label,W=U.children,Y=U.active,ee=(0,E.default)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:Y});return p.default.createElement("div",{style:ee.button,onClick:V},$||W)};R.default=k},E5AX:function(ge,R,h){},ENEI:function(ge,R,h){"use strict";h.d(R,"a",function(){return k});var B=h("lwsE"),p=h.n(B),S=h("W8MJ"),E=h.n(S),A=h("IOcx"),k=function(){function M(U,V){p()(this,M),this.center=void 0,this.halfExtents=void 0,this.min=A.d.create(),this.max=A.d.create(),this.update(U,V)}return E()(M,[{key:"update",value:function(V,$){this.center=V||A.d.create(),this.halfExtents=$||A.d.fromValues(.5,.5,.5),this.min=A.d.sub(this.min,this.center,this.halfExtents),this.max=A.d.add(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(V,$){A.d.add(this.center,$,V),A.d.scale(this.center,this.center,.5),A.d.sub(this.halfExtents,$,V),A.d.scale(this.halfExtents,this.halfExtents,.5),A.d.copy(this.min,V),A.d.copy(this.max,$)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(V){var $=this.center,W=$[0],Y=$[1],ee=$[2],ne=this.halfExtents,ie=ne[0],re=ne[1],J=ne[2],ce=W-ie,G=W+ie,Z=Y-re,fe=Y+re,se=ee-J,ve=ee+J,ae=V.center,j=ae[0],de=ae[1],ke=ae[2],he=V.halfExtents,Oe=he[0],We=he[1],D=he[2],je=j-Oe,pt=j+Oe,nt=de-We,Lt=de+We,Gt=ke-D,$e=ke+D;je<ce&&(ce=je),pt>G&&(G=pt),nt<Z&&(Z=nt),Lt>fe&&(fe=Lt),Gt<se&&(se=Gt),$e>ve&&(ve=$e),$[0]=(ce+G)*.5,$[1]=(Z+fe)*.5,$[2]=(se+ve)*.5,ne[0]=(G-ce)*.5,ne[1]=(fe-Z)*.5,ne[2]=(ve-se)*.5,this.min[0]=ce,this.min[1]=Z,this.min[2]=se,this.max[0]=G,this.max[1]=fe,this.max[2]=ve}},{key:"intersects",value:function(V){var $=this.getMax(),W=this.getMin(),Y=V.getMax(),ee=V.getMin();return W[0]<=Y[0]&&$[0]>=ee[0]&&W[1]<=Y[1]&&$[1]>=ee[1]&&W[2]<=Y[2]&&$[2]>=ee[2]}},{key:"containsPoint",value:function(V){var $=this.getMin(),W=this.getMax();return!(V[0]<$[0]||V[0]>W[0]||V[1]<$[1]||V[1]>W[1]||V[2]<$[2]||V[2]>W[2])}},{key:"getNegativeFarPoint",value:function(V){return V.pnVertexFlag===273?A.d.copy(A.d.create(),this.min):V.pnVertexFlag===272?A.d.fromValues(this.min[0],this.min[1],this.max[2]):V.pnVertexFlag===257?A.d.fromValues(this.min[0],this.max[1],this.min[2]):V.pnVertexFlag===256?A.d.fromValues(this.min[0],this.max[1],this.max[2]):V.pnVertexFlag===17?A.d.fromValues(this.max[0],this.min[1],this.min[2]):V.pnVertexFlag===16?A.d.fromValues(this.max[0],this.min[1],this.max[2]):V.pnVertexFlag===1?A.d.fromValues(this.max[0],this.max[1],this.min[2]):A.d.fromValues(this.max[0],this.max[1],this.max[2])}},{key:"getPositiveFarPoint",value:function(V){return V.pnVertexFlag===273?A.d.copy(A.d.create(),this.max):V.pnVertexFlag===272?A.d.fromValues(this.max[0],this.max[1],this.min[2]):V.pnVertexFlag===257?A.d.fromValues(this.max[0],this.min[1],this.max[2]):V.pnVertexFlag===256?A.d.fromValues(this.max[0],this.min[1],this.min[2]):V.pnVertexFlag===17?A.d.fromValues(this.min[0],this.max[1],this.max[2]):V.pnVertexFlag===16?A.d.fromValues(this.min[0],this.max[1],this.min[2]):V.pnVertexFlag===1?A.d.fromValues(this.min[0],this.min[1],this.max[2]):A.d.fromValues(this.min[0],this.min[1],this.min[2])}}]),M}()},EVdn:function(ge,R,h){var B,p;/*!
* jQuery JavaScript Library v3.7.0
* https://jquery.com/
*
* Copyright OpenJS Foundation and other contributors
* Released under the MIT license
* https://jquery.org/license
*
* Date: 2023-05-11T18:29Z
*/(function(S,E){"use strict";typeof ge.exports=="object"?ge.exports=S.document?E(S,!0):function(A){if(!A.document)throw new Error("jQuery requires a window with a document");return E(A)}:E(S)})(typeof window!="undefined"?window:this,function(S,E){"use strict";var A=[],k=Object.getPrototypeOf,M=A.slice,U=A.flat?function(K){return A.flat.call(K)}:function(K){return A.concat.apply([],K)},V=A.push,$=A.indexOf,W={},Y=W.toString,ee=W.hasOwnProperty,ne=ee.toString,ie=ne.call(Object),re={},J=function(P){return typeof P=="function"&&typeof P.nodeType!="number"&&typeof P.item!="function"},ce=function(P){return P!=null&&P===P.window},G=S.document,Z={type:!0,src:!0,nonce:!0,noModule:!0};function fe(K,P,H){H=H||G;var X,le,be=H.createElement("script");if(be.text=K,P)for(X in Z)le=P[X]||P.getAttribute&&P.getAttribute(X),le&&be.setAttribute(X,le);H.head.appendChild(be).parentNode.removeChild(be)}function se(K){return K==null?K+"":typeof K=="object"||typeof K=="function"?W[Y.call(K)]||"object":typeof K}var ve="3.7.0",ae=/HTML$/i,j=function K(P,H){return new K.fn.init(P,H)};j.fn=j.prototype={jquery:ve,constructor:j,length:0,toArray:function(){return M.call(this)},get:function(P){return P==null?M.call(this):P<0?this[P+this.length]:this[P]},pushStack:function(P){var H=j.merge(this.constructor(),P);return H.prevObject=this,H},each:function(P){return j.each(this,P)},map:function(P){return this.pushStack(j.map(this,function(H,X){return P.call(H,X,H)}))},slice:function(){return this.pushStack(M.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(j.grep(this,function(P,H){return(H+1)%2}))},odd:function(){return this.pushStack(j.grep(this,function(P,H){return H%2}))},eq:function(P){var H=this.length,X=+P+(P<0?H:0);return this.pushStack(X>=0&&X<H?[this[X]]:[])},end:function(){return this.prevObject||this.constructor()},push:V,sort:A.sort,splice:A.splice},j.extend=j.fn.extend=function(){var K,P,H,X,le,be,xe=arguments[0]||{},Ge=1,it=arguments.length,bt=!1;for(typeof xe=="boolean"&&(bt=xe,xe=arguments[Ge]||{},Ge++),typeof xe!="object"&&!J(xe)&&(xe={}),Ge===it&&(xe=this,Ge--);Ge<it;Ge++)if((K=arguments[Ge])!=null)for(P in K)X=K[P],!(P==="__proto__"||xe===X)&&(bt&&X&&(j.isPlainObject(X)||(le=Array.isArray(X)))?(H=xe[P],le&&!Array.isArray(H)?be=[]:!le&&!j.isPlainObject(H)?be={}:be=H,le=!1,xe[P]=j.extend(bt,be,X)):X!==void 0&&(xe[P]=X));return xe},j.extend({expando:"jQuery"+(ve+Math.random()).replace(/\D/g,""),isReady:!0,error:function(P){throw new Error(P)},noop:function(){},isPlainObject:function(P){var H,X;return!P||Y.call(P)!=="[object Object]"?!1:(H=k(P),H?(X=ee.call(H,"constructor")&&H.constructor,typeof X=="function"&&ne.call(X)===ie):!0)},isEmptyObject:function(P){var H;for(H in P)return!1;return!0},globalEval:function(P,H,X){fe(P,{nonce:H&&H.nonce},X)},each:function(P,H){var X,le=0;if(de(P))for(X=P.length;le<X&&H.call(P[le],le,P[le])!==!1;le++);else for(le in P)if(H.call(P[le],le,P[le])===!1)break;return P},text:function(P){var H,X="",le=0,be=P.nodeType;if(be){if(be===1||be===9||be===11)return P.textContent;if(be===3||be===4)return P.nodeValue}else for(;H=P[le++];)X+=j.text(H);return X},makeArray:function(P,H){var X=H||[];return P!=null&&(de(Object(P))?j.merge(X,typeof P=="string"?[P]:P):V.call(X,P)),X},inArray:function(P,H,X){return H==null?-1:$.call(H,P,X)},isXMLDoc:function(P){var H=P&&P.namespaceURI,X=P&&(P.ownerDocument||P).documentElement;return!ae.test(H||X&&X.nodeName||"HTML")},merge:function(P,H){for(var X=+H.length,le=0,be=P.length;le<X;le++)P[be++]=H[le];return P.length=be,P},grep:function(P,H,X){for(var le,be=[],xe=0,Ge=P.length,it=!X;xe<Ge;xe++)le=!H(P[xe],xe),le!==it&&be.push(P[xe]);return be},map:function(P,H,X){var le,be,xe=0,Ge=[];if(de(P))for(le=P.length;xe<le;xe++)be=H(P[xe],xe,X),be!=null&&Ge.push(be);else for(xe in P)be=H(P[xe],xe,X),be!=null&&Ge.push(be);return U(Ge)},guid:1,support:re}),typeof Symbol=="function"&&(j.fn[Symbol.iterator]=A[Symbol.iterator]),j.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(K,P){W["[object "+P+"]"]=P.toLowerCase()});function de(K){var P=!!K&&"length"in K&&K.length,H=se(K);return J(K)||ce(K)?!1:H==="array"||P===0||typeof P=="number"&&P>0&&P-1 in K}function ke(K,P){return K.nodeName&&K.nodeName.toLowerCase()===P.toLowerCase()}var he=A.pop,Oe=A.sort,We=A.splice,D="[\\x20\\t\\r\\n\\f]",je=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g");j.contains=function(K,P){var H=P&&P.parentNode;return K===H||!!(H&&H.nodeType===1&&(K.contains?K.contains(H):K.compareDocumentPosition&&K.compareDocumentPosition(H)&16))};var pt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function nt(K,P){return P?K==="\0"?"\uFFFD":K.slice(0,-1)+"\\"+K.charCodeAt(K.length-1).toString(16)+" ":"\\"+K}j.escapeSelector=function(K){return(K+"").replace(pt,nt)};var Lt=G,Gt=V;(function(){var K,P,H,X,le,be=Gt,xe,Ge,it,bt,bn,_n=j.expando,Or=0,Cn=0,ar=Su(),Ca=Su(),Xr=Su(),Fi=Su(),Qo=function(Me,Ye){return Me===Ye&&(le=!0),0},lo="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ho="(?:\\\\[\\da-fA-F]{1,6}"+D+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ao="\\["+D+"*("+Ho+")(?:"+D+"*([*^$|!~]?=)"+D+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ho+"))|)"+D+"*\\]",Ia=":("+Ho+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ao+")*)|.*)\\)|)",Ns=new RegExp(D+"+","g"),Ai=new RegExp("^"+D+"*,"+D+"*"),Yi=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),Ji=new RegExp(D+"|>"),yl=new RegExp(Ia),bo=new RegExp("^"+Ho+"$"),ls={ID:new RegExp("^#("+Ho+")"),CLASS:new RegExp("^\\.("+Ho+")"),TAG:new RegExp("^("+Ho+"|[*])"),ATTR:new RegExp("^"+Ao),PSEUDO:new RegExp("^"+Ia),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+lo+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},wu=/^(?:input|select|textarea|button)$/i,xu=/^h\d$/i,qs=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Wo=/[+~]/,js=new RegExp("\\\\[\\da-fA-F]{1,6}"+D+"?|\\\\([^\\r\\n\\f])","g"),$o=function(Me,Ye){var ut="0x"+Me.slice(1)-65536;return Ye||(ut<0?String.fromCharCode(ut+65536):String.fromCharCode(ut>>10|55296,ut&1023|56320))},jo=function(){eu()},il=te(function(He){return He.disabled===!0&&ke(He,"fieldset")},{dir:"parentNode",next:"legend"});function Ls(){try{return xe.activeElement}catch(He){}}try{be.apply(A=M.call(Lt.childNodes),Lt.childNodes),A[Lt.childNodes.length].nodeType}catch(He){be={apply:function(Ye,ut){Gt.apply(Ye,M.call(ut))},call:function(Ye){Gt.apply(Ye,M.call(arguments,1))}}}function Ni(He,Me,Ye,ut){var De,Le,et,Qt,yn,Vn,sr,Zn=Me&&Me.ownerDocument,ia=Me?Me.nodeType:9;if(Ye=Ye||[],typeof He!="string"||!He||ia!==1&&ia!==9&&ia!==11)return Ye;if(!ut&&(eu(Me),Me=Me||xe,it)){if(ia!==11&&(yn=qs.exec(He)))if(De=yn[1]){if(ia===9)if(et=Me.getElementById(De)){if(et.id===De)return be.call(Ye,et),Ye}else return Ye;else if(Zn&&(et=Zn.getElementById(De))&&Ni.contains(Me,et)&&et.id===De)return be.call(Ye,et),Ye}else{if(yn[2])return be.apply(Ye,Me.getElementsByTagName(He)),Ye;if((De=yn[3])&&Me.getElementsByClassName)return be.apply(Ye,Me.getElementsByClassName(De)),Ye}if(!Fi[He+" "]&&(!bt||!bt.test(He))){if(sr=He,Zn=Me,ia===1&&(Ji.test(He)||Yi.test(He))){for(Zn=Wo.test(He)&&Kl(Me.parentNode)||Me,(Zn!=Me||!re.scope)&&((Qt=Me.getAttribute("id"))?Qt=j.escapeSelector(Qt):Me.setAttribute("id",Qt=_n)),Vn=b(He),Le=Vn.length;Le--;)Vn[Le]=(Qt?"#"+Qt:":scope")+" "+N(Vn[Le]);sr=Vn.join(",")}try{return be.apply(Ye,Zn.querySelectorAll(sr)),Ye}catch(na){Fi(He,!0)}finally{Qt===_n&&Me.removeAttribute("id")}}}return on(He.replace(je,"$1"),Me,Ye,ut)}function Su(){var He=[];function Me(Ye,ut){return He.push(Ye+" ")>P.cacheLength&&delete Me[He.shift()],Me[Ye+" "]=ut}return Me}function ms(He){return He[_n]=!0,He}function lu(He){var Me=xe.createElement("fieldset");try{return!!He(Me)}catch(Ye){return!1}finally{Me.parentNode&&Me.parentNode.removeChild(Me),Me=null}}function uf(He){return function(Me){return ke(Me,"input")&&Me.type===He}}function $l(He){return function(Me){return(ke(Me,"input")||ke(Me,"button"))&&Me.type===He}}function gc(He){return function(Me){return"form"in Me?Me.parentNode&&Me.disabled===!1?"label"in Me?"label"in Me.parentNode?Me.parentNode.disabled===He:Me.disabled===He:Me.isDisabled===He||Me.isDisabled!==!He&&il(Me)===He:Me.disabled===He:"label"in Me?Me.disabled===He:!1}}function cs(He){return ms(function(Me){return Me=+Me,ms(function(Ye,ut){for(var De,Le=He([],Ye.length,Me),et=Le.length;et--;)Ye[De=Le[et]]&&(Ye[De]=!(ut[De]=Ye[De]))})})}function Kl(He){return He&&typeof He.getElementsByTagName!="undefined"&&He}function eu(He){var Me,Ye=He?He.ownerDocument||He:Lt;return Ye==xe||Ye.nodeType!==9||!Ye.documentElement||(xe=Ye,Ge=xe.documentElement,it=!j.isXMLDoc(xe),bn=Ge.matches||Ge.webkitMatchesSelector||Ge.msMatchesSelector,Lt!=xe&&(Me=xe.defaultView)&&Me.top!==Me&&Me.addEventListener("unload",jo),re.getById=lu(function(ut){return Ge.appendChild(ut).id=j.expando,!xe.getElementsByName||!xe.getElementsByName(j.expando).length}),re.disconnectedMatch=lu(function(ut){return bn.call(ut,"*")}),re.scope=lu(function(){return xe.querySelectorAll(":scope")}),re.cssHas=lu(function(){try{return xe.querySelector(":has(*,:jqfake)"),!1}catch(ut){return!0}}),re.getById?(P.filter.ID=function(ut){var De=ut.replace(js,$o);return function(Le){return Le.getAttribute("id")===De}},P.find.ID=function(ut,De){if(typeof De.getElementById!="undefined"&&it){var Le=De.getElementById(ut);return Le?[Le]:[]}}):(P.filter.ID=function(ut){var De=ut.replace(js,$o);return function(Le){var et=typeof Le.getAttributeNode!="undefined"&&Le.getAttributeNode("id");return et&&et.value===De}},P.find.ID=function(ut,De){if(typeof De.getElementById!="undefined"&&it){var Le,et,Qt,yn=De.getElementById(ut);if(yn){if(Le=yn.getAttributeNode("id"),Le&&Le.value===ut)return[yn];for(Qt=De.getElementsByName(ut),et=0;yn=Qt[et++];)if(Le=yn.getAttributeNode("id"),Le&&Le.value===ut)return[yn]}return[]}}),P.find.TAG=function(ut,De){return typeof De.getElementsByTagName!="undefined"?De.getElementsByTagName(ut):De.querySelectorAll(ut)},P.find.CLASS=function(ut,De){if(typeof De.getElementsByClassName!="undefined"&&it)return De.getElementsByClassName(ut)},bt=[],lu(function(ut){var De;Ge.appendChild(ut).innerHTML="<a id='"+_n+"' href='' disabled='disabled'></a><select id='"+_n+"-\r\\' disabled='disabled'><option selected=''></option></select>",ut.querySelectorAll("[selected]").length||bt.push("\\["+D+"*(?:value|"+lo+")"),ut.querySelectorAll("[id~="+_n+"-]").length||bt.push("~="),ut.querySelectorAll("a#"+_n+"+*").length||bt.push(".#.+[+~]"),ut.querySelectorAll(":checked").length||bt.push(":checked"),De=xe.createElement("input"),De.setAttribute("type","hidden"),ut.appendChild(De).setAttribute("name","D"),Ge.appendChild(ut).disabled=!0,ut.querySelectorAll(":disabled").length!==2&&bt.push(":enabled",":disabled"),De=xe.createElement("input"),De.setAttribute("name",""),ut.appendChild(De),ut.querySelectorAll("[name='']").length||bt.push("\\["+D+"*name"+D+"*="+D+`*(?:''|"")`)}),re.cssHas||bt.push(":has"),bt=bt.length&&new RegExp(bt.join("|")),Qo=function(De,Le){if(De===Le)return le=!0,0;var et=!De.compareDocumentPosition-!Le.compareDocumentPosition;return et||(et=(De.ownerDocument||De)==(Le.ownerDocument||Le)?De.compareDocumentPosition(Le):1,et&1||!re.sortDetached&&Le.compareDocumentPosition(De)===et?De===xe||De.ownerDocument==Lt&&Ni.contains(Lt,De)?-1:Le===xe||Le.ownerDocument==Lt&&Ni.contains(Lt,Le)?1:X?$.call(X,De)-$.call(X,Le):0:et&4?-1:1)}),xe}Ni.matches=function(He,Me){return Ni(He,null,null,Me)},Ni.matchesSelector=function(He,Me){if(eu(He),it&&!Fi[Me+" "]&&(!bt||!bt.test(Me)))try{var Ye=bn.call(He,Me);if(Ye||re.disconnectedMatch||He.document&&He.document.nodeType!==11)return Ye}catch(ut){Fi(Me,!0)}return Ni(Me,xe,null,[He]).length>0},Ni.contains=function(He,Me){return(He.ownerDocument||He)!=xe&&eu(He),j.contains(He,Me)},Ni.attr=function(He,Me){(He.ownerDocument||He)!=xe&&eu(He);var Ye=P.attrHandle[Me.toLowerCase()],ut=Ye&&ee.call(P.attrHandle,Me.toLowerCase())?Ye(He,Me,!it):void 0;return ut!==void 0?ut:He.getAttribute(Me)},Ni.error=function(He){throw new Error("Syntax error, unrecognized expression: "+He)},j.uniqueSort=function(He){var Me,Ye=[],ut=0,De=0;if(le=!re.sortStable,X=!re.sortStable&&M.call(He,0),Oe.call(He,Qo),le){for(;Me=He[De++];)Me===He[De]&&(ut=Ye.push(De));for(;ut--;)We.call(He,Ye[ut],1)}return X=null,He},j.fn.uniqueSort=function(){return this.pushStack(j.uniqueSort(M.apply(this)))},P=j.expr={cacheLength:50,createPseudo:ms,match:ls,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Me){return Me[1]=Me[1].replace(js,$o),Me[3]=(Me[3]||Me[4]||Me[5]||"").replace(js,$o),Me[2]==="~="&&(Me[3]=" "+Me[3]+" "),Me.slice(0,4)},CHILD:function(Me){return Me[1]=Me[1].toLowerCase(),Me[1].slice(0,3)==="nth"?(Me[3]||Ni.error(Me[0]),Me[4]=+(Me[4]?Me[5]+(Me[6]||1):2*(Me[3]==="even"||Me[3]==="odd")),Me[5]=+(Me[7]+Me[8]||Me[3]==="odd")):Me[3]&&Ni.error(Me[0]),Me},PSEUDO:function(Me){var Ye,ut=!Me[6]&&Me[2];return ls.CHILD.test(Me[0])?null:(Me[3]?Me[2]=Me[4]||Me[5]||"":ut&&yl.test(ut)&&(Ye=b(ut,!0))&&(Ye=ut.indexOf(")",ut.length-Ye)-ut.length)&&(Me[0]=Me[0].slice(0,Ye),Me[2]=ut.slice(0,Ye)),Me.slice(0,3))}},filter:{TAG:function(Me){var Ye=Me.replace(js,$o).toLowerCase();return Me==="*"?function(){return!0}:function(ut){return ke(ut,Ye)}},CLASS:function(Me){var Ye=ar[Me+" "];return Ye||(Ye=new RegExp("(^|"+D+")"+Me+"("+D+"|$)"))&&ar(Me,function(ut){return Ye.test(typeof ut.className=="string"&&ut.className||typeof ut.getAttribute!="undefined"&&ut.getAttribute("class")||"")})},ATTR:function(Me,Ye,ut){return function(De){var Le=Ni.attr(De,Me);return Le==null?Ye==="!=":Ye?(Le+="",Ye==="="?Le===ut:Ye==="!="?Le!==ut:Ye==="^="?ut&&Le.indexOf(ut)===0:Ye==="*="?ut&&Le.indexOf(ut)>-1:Ye==="$="?ut&&Le.slice(-ut.length)===ut:Ye==="~="?(" "+Le.replace(Ns," ")+" ").indexOf(ut)>-1:Ye==="|="?Le===ut||Le.slice(0,ut.length+1)===ut+"-":!1):!0}},CHILD:function(Me,Ye,ut,De,Le){var et=Me.slice(0,3)!=="nth",Qt=Me.slice(-4)!=="last",yn=Ye==="of-type";return De===1&&Le===0?function(Vn){return!!Vn.parentNode}:function(Vn,sr,Zn){var ia,na,ea,la,si,Ra=et!==Qt?"nextSibling":"previousSibling",ii=Vn.parentNode,ma=yn&&Vn.nodeName.toLowerCase(),fa=!Zn&&!yn,io=!1;if(ii){if(et){for(;Ra;){for(ea=Vn;ea=ea[Ra];)if(yn?ke(ea,ma):ea.nodeType===1)return!1;si=Ra=Me==="only"&&!si&&"nextSibling"}return!0}if(si=[Qt?ii.firstChild:ii.lastChild],Qt&&fa){for(na=ii[_n]||(ii[_n]={}),ia=na[Me]||[],la=ia[0]===Or&&ia[1],io=la&&ia[2],ea=la&&ii.childNodes[la];ea=++la&&ea&&ea[Ra]||(io=la=0)||si.pop();)if(ea.nodeType===1&&++io&&ea===Vn){na[Me]=[Or,la,io];break}}else if(fa&&(na=Vn[_n]||(Vn[_n]={}),ia=na[Me]||[],la=ia[0]===Or&&ia[1],io=la),io===!1)for(;(ea=++la&&ea&&ea[Ra]||(io=la=0)||si.pop())&&!((yn?ke(ea,ma):ea.nodeType===1)&&++io&&(fa&&(na=ea[_n]||(ea[_n]={}),na[Me]=[Or,io]),ea===Vn)););return io-=Le,io===De||io%De==0&&io/De>=0}}},PSEUDO:function(Me,Ye){var ut,De=P.pseudos[Me]||P.setFilters[Me.toLowerCase()]||Ni.error("unsupported pseudo: "+Me);return De[_n]?De(Ye):De.length>1?(ut=[Me,Me,"",Ye],P.setFilters.hasOwnProperty(Me.toLowerCase())?ms(function(Le,et){for(var Qt,yn=De(Le,Ye),Vn=yn.length;Vn--;)Qt=$.call(Le,yn[Vn]),Le[Qt]=!(et[Qt]=yn[Vn])}):function(Le){return De(Le,0,ut)}):De}},pseudos:{not:ms(function(He){var Me=[],Ye=[],ut=zt(He.replace(je,"$1"));return ut[_n]?ms(function(De,Le,et,Qt){for(var yn,Vn=ut(De,null,Qt,[]),sr=De.length;sr--;)(yn=Vn[sr])&&(De[sr]=!(Le[sr]=yn))}):function(De,Le,et){return Me[0]=De,ut(Me,null,et,Ye),Me[0]=null,!Ye.pop()}}),has:ms(function(He){return function(Me){return Ni(He,Me).length>0}}),contains:ms(function(He){return He=He.replace(js,$o),function(Me){return(Me.textContent||j.text(Me)).indexOf(He)>-1}}),lang:ms(function(He){return bo.test(He||"")||Ni.error("unsupported lang: "+He),He=He.replace(js,$o).toLowerCase(),function(Me){var Ye;do if(Ye=it?Me.lang:Me.getAttribute("xml:lang")||Me.getAttribute("lang"))return Ye=Ye.toLowerCase(),Ye===He||Ye.indexOf(He+"-")===0;while((Me=Me.parentNode)&&Me.nodeType===1);return!1}}),target:function(Me){var Ye=S.location&&S.location.hash;return Ye&&Ye.slice(1)===Me.id},root:function(Me){return Me===Ge},focus:function(Me){return Me===Ls()&&xe.hasFocus()&&!!(Me.type||Me.href||~Me.tabIndex)},enabled:gc(!1),disabled:gc(!0),checked:function(Me){return ke(Me,"input")&&!!Me.checked||ke(Me,"option")&&!!Me.selected},selected:function(Me){return Me.parentNode&&Me.parentNode.selectedIndex,Me.selected===!0},empty:function(Me){for(Me=Me.firstChild;Me;Me=Me.nextSibling)if(Me.nodeType<6)return!1;return!0},parent:function(Me){return!P.pseudos.empty(Me)},header:function(Me){return xu.test(Me.nodeName)},input:function(Me){return wu.test(Me.nodeName)},button:function(Me){return ke(Me,"input")&&Me.type==="button"||ke(Me,"button")},text:function(Me){var Ye;return ke(Me,"input")&&Me.type==="text"&&((Ye=Me.getAttribute("type"))==null||Ye.toLowerCase()==="text")},first:cs(function(){return[0]}),last:cs(function(He,Me){return[Me-1]}),eq:cs(function(He,Me,Ye){return[Ye<0?Ye+Me:Ye]}),even:cs(function(He,Me){for(var Ye=0;Ye<Me;Ye+=2)He.push(Ye);return He}),odd:cs(function(He,Me){for(var Ye=1;Ye<Me;Ye+=2)He.push(Ye);return He}),lt:cs(function(He,Me,Ye){var ut;for(Ye<0?ut=Ye+Me:Ye>Me?ut=Me:ut=Ye;--ut>=0;)He.push(ut);return He}),gt:cs(function(He,Me,Ye){for(var ut=Ye<0?Ye+Me:Ye;++ut<Me;)He.push(ut);return He})}},P.pseudos.nth=P.pseudos.eq;for(K in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})P.pseudos[K]=uf(K);for(K in{submit:!0,reset:!0})P.pseudos[K]=$l(K);function bl(){}bl.prototype=P.filters=P.pseudos,P.setFilters=new bl;function b(He,Me){var Ye,ut,De,Le,et,Qt,yn,Vn=Ca[He+" "];if(Vn)return Me?0:Vn.slice(0);for(et=He,Qt=[],yn=P.preFilter;et;){(!Ye||(ut=Ai.exec(et)))&&(ut&&(et=et.slice(ut[0].length)||et),Qt.push(De=[])),Ye=!1,(ut=Yi.exec(et))&&(Ye=ut.shift(),De.push({value:Ye,type:ut[0].replace(je," ")}),et=et.slice(Ye.length));for(Le in P.filter)(ut=ls[Le].exec(et))&&(!yn[Le]||(ut=yn[Le](ut)))&&(Ye=ut.shift(),De.push({value:Ye,type:Le,matches:ut}),et=et.slice(Ye.length));if(!Ye)break}return Me?et.length:et?Ni.error(He):Ca(He,Qt).slice(0)}function N(He){for(var Me=0,Ye=He.length,ut="";Me<Ye;Me++)ut+=He[Me].value;return ut}function te(He,Me,Ye){var ut=Me.dir,De=Me.next,Le=De||ut,et=Ye&&Le==="parentNode",Qt=Cn++;return Me.first?function(yn,Vn,sr){for(;yn=yn[ut];)if(yn.nodeType===1||et)return He(yn,Vn,sr);return!1}:function(yn,Vn,sr){var Zn,ia,na=[Or,Qt];if(sr){for(;yn=yn[ut];)if((yn.nodeType===1||et)&&He(yn,Vn,sr))return!0}else for(;yn=yn[ut];)if(yn.nodeType===1||et)if(ia=yn[_n]||(yn[_n]={}),De&&ke(yn,De))yn=yn[ut]||yn;else{if((Zn=ia[Le])&&Zn[0]===Or&&Zn[1]===Qt)return na[2]=Zn[2];if(ia[Le]=na,na[2]=He(yn,Vn,sr))return!0}return!1}}function Ee(He){return He.length>1?function(Me,Ye,ut){for(var De=He.length;De--;)if(!He[De](Me,Ye,ut))return!1;return!0}:He[0]}function Se(He,Me,Ye){for(var ut=0,De=Me.length;ut<De;ut++)Ni(He,Me[ut],Ye);return Ye}function _e(He,Me,Ye,ut,De){for(var Le,et=[],Qt=0,yn=He.length,Vn=Me!=null;Qt<yn;Qt++)(Le=He[Qt])&&(!Ye||Ye(Le,ut,De))&&(et.push(Le),Vn&&Me.push(Qt));return et}function Qe(He,Me,Ye,ut,De,Le){return ut&&!ut[_n]&&(ut=Qe(ut)),De&&!De[_n]&&(De=Qe(De,Le)),ms(function(et,Qt,yn,Vn){var sr,Zn,ia,na,ea=[],la=[],si=Qt.length,Ra=et||Se(Me||"*",yn.nodeType?[yn]:yn,[]),ii=He&&(et||!Me)?_e(Ra,ea,He,yn,Vn):Ra;if(Ye?(na=De||(et?He:si||ut)?[]:Qt,Ye(ii,na,yn,Vn)):na=ii,ut)for(sr=_e(na,la),ut(sr,[],yn,Vn),Zn=sr.length;Zn--;)(ia=sr[Zn])&&(na[la[Zn]]=!(ii[la[Zn]]=ia));if(et){if(De||He){if(De){for(sr=[],Zn=na.length;Zn--;)(ia=na[Zn])&&sr.push(ii[Zn]=ia);De(null,na=[],sr,Vn)}for(Zn=na.length;Zn--;)(ia=na[Zn])&&(sr=De?$.call(et,ia):ea[Zn])>-1&&(et[sr]=!(Qt[sr]=ia))}}else na=_e(na===Qt?na.splice(si,na.length):na),De?De(null,Qt,na,Vn):be.apply(Qt,na)})}function rt(He){for(var Me,Ye,ut,De=He.length,Le=P.relative[He[0].type],et=Le||P.relative[" "],Qt=Le?1:0,yn=te(function(Zn){return Zn===Me},et,!0),Vn=te(function(Zn){return $.call(Me,Zn)>-1},et,!0),sr=[function(Zn,ia,na){var ea=!Le&&(na||ia!=H)||((Me=ia).nodeType?yn(Zn,ia,na):Vn(Zn,ia,na));return Me=null,ea}];Qt<De;Qt++)if(Ye=P.relative[He[Qt].type])sr=[te(Ee(sr),Ye)];else{if(Ye=P.filter[He[Qt].type].apply(null,He[Qt].matches),Ye[_n]){for(ut=++Qt;ut<De&&!P.relative[He[ut].type];ut++);return Qe(Qt>1&&Ee(sr),Qt>1&&N(He.slice(0,Qt-1).concat({value:He[Qt-2].type===" "?"*":""})).replace(je,"$1"),Ye,Qt<ut&&rt(He.slice(Qt,ut)),ut<De&&rt(He=He.slice(ut)),ut<De&&N(He))}sr.push(Ye)}return Ee(sr)}function Tt(He,Me){var Ye=Me.length>0,ut=He.length>0,De=function(et,Qt,yn,Vn,sr){var Zn,ia,na,ea=0,la="0",si=et&&[],Ra=[],ii=H,ma=et||ut&&P.find.TAG("*",sr),fa=Or+=ii==null?1:Math.random()||.1,io=ma.length;for(sr&&(H=Qt==xe||Qt||sr);la!==io&&(Zn=ma[la])!=null;la++){if(ut&&Zn){for(ia=0,!Qt&&Zn.ownerDocument!=xe&&(eu(Zn),yn=!it);na=He[ia++];)if(na(Zn,Qt||xe,yn)){be.call(Vn,Zn);break}sr&&(Or=fa)}Ye&&((Zn=!na&&Zn)&&ea--,et&&si.push(Zn))}if(ea+=la,Ye&&la!==ea){for(ia=0;na=Me[ia++];)na(si,Ra,Qt,yn);if(et){if(ea>0)for(;la--;)si[la]||Ra[la]||(Ra[la]=he.call(Vn));Ra=_e(Ra)}be.apply(Vn,Ra),sr&&!et&&Ra.length>0&&ea+Me.length>1&&j.uniqueSort(Vn)}return sr&&(Or=fa,H=ii),si};return Ye?ms(De):De}function zt(He,Me){var Ye,ut=[],De=[],Le=Xr[He+" "];if(!Le){for(Me||(Me=b(He)),Ye=Me.length;Ye--;)Le=rt(Me[Ye]),Le[_n]?ut.push(Le):De.push(Le);Le=Xr(He,Tt(De,ut)),Le.selector=He}return Le}function on(He,Me,Ye,ut){var De,Le,et,Qt,yn,Vn=typeof He=="function"&&He,sr=!ut&&b(He=Vn.selector||He);if(Ye=Ye||[],sr.length===1){if(Le=sr[0]=sr[0].slice(0),Le.length>2&&(et=Le[0]).type==="ID"&&Me.nodeType===9&&it&&P.relative[Le[1].type]){if(Me=(P.find.ID(et.matches[0].replace(js,$o),Me)||[])[0],Me)Vn&&(Me=Me.parentNode);else return Ye;He=He.slice(Le.shift().value.length)}for(De=ls.needsContext.test(He)?0:Le.length;De--&&(et=Le[De],!P.relative[Qt=et.type]);)if((yn=P.find[Qt])&&(ut=yn(et.matches[0].replace(js,$o),Wo.test(Le[0].type)&&Kl(Me.parentNode)||Me))){if(Le.splice(De,1),He=ut.length&&N(Le),!He)return be.apply(Ye,ut),Ye;break}}return(Vn||zt(He,sr))(ut,Me,!it,Ye,!Me||Wo.test(He)&&Kl(Me.parentNode)||Me),Ye}re.sortStable=_n.split("").sort(Qo).join("")===_n,eu(),re.sortDetached=lu(function(He){return He.compareDocumentPosition(xe.createElement("fieldset"))&1}),j.find=Ni,j.expr[":"]=j.expr.pseudos,j.unique=j.uniqueSort,Ni.compile=zt,Ni.select=on,Ni.setDocument=eu,Ni.escape=j.escapeSelector,Ni.getText=j.text,Ni.isXML=j.isXMLDoc,Ni.selectors=j.expr,Ni.support=j.support,Ni.uniqueSort=j.uniqueSort})();var $e=function(P,H,X){for(var le=[],be=X!==void 0;(P=P[H])&&P.nodeType!==9;)if(P.nodeType===1){if(be&&j(P).is(X))break;le.push(P)}return le},jt=function(P,H){for(var X=[];P;P=P.nextSibling)P.nodeType===1&&P!==H&&X.push(P);return X},Be=j.expr.match.needsContext,pe=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function un(K,P,H){return J(P)?j.grep(K,function(X,le){return!!P.call(X,le,X)!==H}):P.nodeType?j.grep(K,function(X){return X===P!==H}):typeof P!="string"?j.grep(K,function(X){return $.call(P,X)>-1!==H}):j.filter(P,K,H)}j.filter=function(K,P,H){var X=P[0];return H&&(K=":not("+K+")"),P.length===1&&X.nodeType===1?j.find.matchesSelector(X,K)?[X]:[]:j.find.matches(K,j.grep(P,function(le){return le.nodeType===1}))},j.fn.extend({find:function(P){var H,X,le=this.length,be=this;if(typeof P!="string")return this.pushStack(j(P).filter(function(){for(H=0;H<le;H++)if(j.contains(be[H],this))return!0}));for(X=this.pushStack([]),H=0;H<le;H++)j.find(P,be[H],X);return le>1?j.uniqueSort(X):X},filter:function(P){return this.pushStack(un(this,P||[],!1))},not:function(P){return this.pushStack(un(this,P||[],!0))},is:function(P){return!!un(this,typeof P=="string"&&Be.test(P)?j(P):P||[],!1).length}});var ln,Fn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Ft=j.fn.init=function(K,P,H){var X,le;if(!K)return this;if(H=H||ln,typeof K=="string")if(K[0]==="<"&&K[K.length-1]===">"&&K.length>=3?X=[null,K,null]:X=Fn.exec(K),X&&(X[1]||!P))if(X[1]){if(P=P instanceof j?P[0]:P,j.merge(this,j.parseHTML(X[1],P&&P.nodeType?P.ownerDocument||P:G,!0)),pe.test(X[1])&&j.isPlainObject(P))for(X in P)J(this[X])?this[X](P[X]):this.attr(X,P[X]);return this}else return le=G.getElementById(X[2]),le&&(this[0]=le,this.length=1),this;else return!P||P.jquery?(P||H).find(K):this.constructor(P).find(K);else{if(K.nodeType)return this[0]=K,this.length=1,this;if(J(K))return H.ready!==void 0?H.ready(K):K(j)}return j.makeArray(K,this)};Ft.prototype=j.fn,ln=j(G);var Pn=/^(?:parents|prev(?:Until|All))/,lr={children:!0,contents:!0,next:!0,prev:!0};j.fn.extend({has:function(P){var H=j(P,this),X=H.length;return this.filter(function(){for(var le=0;le<X;le++)if(j.contains(this,H[le]))return!0})},closest:function(P,H){var X,le=0,be=this.length,xe=[],Ge=typeof P!="string"&&j(P);if(!Be.test(P)){for(;le<be;le++)for(X=this[le];X&&X!==H;X=X.parentNode)if(X.nodeType<11&&(Ge?Ge.index(X)>-1:X.nodeType===1&&j.find.matchesSelector(X,P))){xe.push(X);break}}return this.pushStack(xe.length>1?j.uniqueSort(xe):xe)},index:function(P){return P?typeof P=="string"?$.call(j(P),this[0]):$.call(this,P.jquery?P[0]:P):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(P,H){return this.pushStack(j.uniqueSort(j.merge(this.get(),j(P,H))))},addBack:function(P){return this.add(P==null?this.prevObject:this.prevObject.filter(P))}});function hn(K,P){for(;(K=K[P])&&K.nodeType!==1;);return K}j.each({parent:function(P){var H=P.parentNode;return H&&H.nodeType!==11?H:null},parents:function(P){return $e(P,"parentNode")},parentsUntil:function(P,H,X){return $e(P,"parentNode",X)},next:function(P){return hn(P,"nextSibling")},prev:function(P){return hn(P,"previousSibling")},nextAll:function(P){return $e(P,"nextSibling")},prevAll:function(P){return $e(P,"previousSibling")},nextUntil:function(P,H,X){return $e(P,"nextSibling",X)},prevUntil:function(P,H,X){return $e(P,"previousSibling",X)},siblings:function(P){return jt((P.parentNode||{}).firstChild,P)},children:function(P){return jt(P.firstChild)},contents:function(P){return P.contentDocument!=null&&k(P.contentDocument)?P.contentDocument:(ke(P,"template")&&(P=P.content||P),j.merge([],P.childNodes))}},function(K,P){j.fn[K]=function(H,X){var le=j.map(this,P,H);return K.slice(-5)!=="Until"&&(X=H),X&&typeof X=="string"&&(le=j.filter(X,le)),this.length>1&&(lr[K]||j.uniqueSort(le),Pn.test(K)&&le.reverse()),this.pushStack(le)}});var On=/[^\x20\t\r\n\f]+/g;function jn(K){var P={};return j.each(K.match(On)||[],function(H,X){P[X]=!0}),P}j.Callbacks=function(K){K=typeof K=="string"?jn(K):j.extend({},K);var P,H,X,le,be=[],xe=[],Ge=-1,it=function(){for(le=le||K.once,X=P=!0;xe.length;Ge=-1)for(H=xe.shift();++Ge<be.length;)be[Ge].apply(H[0],H[1])===!1&&K.stopOnFalse&&(Ge=be.length,H=!1);K.memory||(H=!1),P=!1,le&&(H?be=[]:be="")},bt={add:function(){return be&&(H&&!P&&(Ge=be.length-1,xe.push(H)),function _n(Or){j.each(Or,function(Cn,ar){J(ar)?(!K.unique||!bt.has(ar))&&be.push(ar):ar&&ar.length&&se(ar)!=="string"&&_n(ar)})}(arguments),H&&!P&&it()),this},remove:function(){return j.each(arguments,function(_n,Or){for(var Cn;(Cn=j.inArray(Or,be,Cn))>-1;)be.splice(Cn,1),Cn<=Ge&&Ge--}),this},has:function(_n){return _n?j.inArray(_n,be)>-1:be.length>0},empty:function(){return be&&(be=[]),this},disable:function(){return le=xe=[],be=H="",this},disabled:function(){return!be},lock:function(){return le=xe=[],!H&&!P&&(be=H=""),this},locked:function(){return!!le},fireWith:function(_n,Or){return le||(Or=Or||[],Or=[_n,Or.slice?Or.slice():Or],xe.push(Or),P||it()),this},fire:function(){return bt.fireWith(this,arguments),this},fired:function(){return!!X}};return bt};function Dn(K){return K}function ft(K){throw K}function Ut(K,P,H,X){var le;try{K&&J(le=K.promise)?le.call(K).done(P).fail(H):K&&J(le=K.then)?le.call(K,P,H):P.apply(void 0,[K].slice(X))}catch(be){H.apply(void 0,[be])}}j.extend({Deferred:function(P){var H=[["notify","progress",j.Callbacks("memory"),j.Callbacks("memory"),2],["resolve","done",j.Callbacks("once memory"),j.Callbacks("once memory"),0,"resolved"],["reject","fail",j.Callbacks("once memory"),j.Callbacks("once memory"),1,"rejected"]],X="pending",le={state:function(){return X},always:function(){return be.done(arguments).fail(arguments),this},catch:function(Ge){return le.then(null,Ge)},pipe:function(){var Ge=arguments;return j.Deferred(function(it){j.each(H,function(bt,bn){var _n=J(Ge[bn[4]])&&Ge[bn[4]];be[bn[1]](function(){var Or=_n&&_n.apply(this,arguments);Or&&J(Or.promise)?Or.promise().progress(it.notify).done(it.resolve).fail(it.reject):it[bn[0]+"With"](this,_n?[Or]:arguments)})}),Ge=null}).promise()},then:function(Ge,it,bt){var bn=0;function _n(Or,Cn,ar,Ca){return function(){var Xr=this,Fi=arguments,Qo=function(){var Ao,Ia;if(!(Or<bn)){if(Ao=ar.apply(Xr,Fi),Ao===Cn.promise())throw new TypeError("Thenable self-resolution");Ia=Ao&&(typeof Ao=="object"||typeof Ao=="function")&&Ao.then,J(Ia)?Ca?Ia.call(Ao,_n(bn,Cn,Dn,Ca),_n(bn,Cn,ft,Ca)):(bn++,Ia.call(Ao,_n(bn,Cn,Dn,Ca),_n(bn,Cn,ft,Ca),_n(bn,Cn,Dn,Cn.notifyWith))):(ar!==Dn&&(Xr=void 0,Fi=[Ao]),(Ca||Cn.resolveWith)(Xr,Fi))}},lo=Ca?Qo:function(){try{Qo()}catch(Ho){j.Deferred.exceptionHook&&j.Deferred.exceptionHook(Ho,lo.error),Or+1>=bn&&(ar!==ft&&(Xr=void 0,Fi=[Ho]),Cn.rejectWith(Xr,Fi))}};Or?lo():(j.Deferred.getErrorHook?lo.error=j.Deferred.getErrorHook():j.Deferred.getStackHook&&(lo.error=j.Deferred.getStackHook()),S.setTimeout(lo))}}return j.Deferred(function(Or){H[0][3].add(_n(0,Or,J(bt)?bt:Dn,Or.notifyWith)),H[1][3].add(_n(0,Or,J(Ge)?Ge:Dn)),H[2][3].add(_n(0,Or,J(it)?it:ft))}).promise()},promise:function(Ge){return Ge!=null?j.extend(Ge,le):le}},be={};return j.each(H,function(xe,Ge){var it=Ge[2],bt=Ge[5];le[Ge[1]]=it.add,bt&&it.add(function(){X=bt},H[3-xe][2].disable,H[3-xe][3].disable,H[0][2].lock,H[0][3].lock),it.add(Ge[3].fire),be[Ge[0]]=function(){return be[Ge[0]+"With"](this===be?void 0:this,arguments),this},be[Ge[0]+"With"]=it.fireWith}),le.promise(be),P&&P.call(be,be),be},when:function(P){var H=arguments.length,X=H,le=Array(X),be=M.call(arguments),xe=j.Deferred(),Ge=function(bt){return function(bn){le[bt]=this,be[bt]=arguments.length>1?M.call(arguments):bn,--H||xe.resolveWith(le,be)}};if(H<=1&&(Ut(P,xe.done(Ge(X)).resolve,xe.reject,!H),xe.state()==="pending"||J(be[X]&&be[X].then)))return xe.then();for(;X--;)Ut(be[X],Ge(X),xe.reject);return xe.promise()}});var ct=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;j.Deferred.exceptionHook=function(K,P){S.console&&S.console.warn&&K&&ct.test(K.name)&&S.console.warn("jQuery.Deferred exception: "+K.message,K.stack,P)},j.readyException=function(K){S.setTimeout(function(){throw K})};var Ct=j.Deferred();j.fn.ready=function(K){return Ct.then(K).catch(function(P){j.readyException(P)}),this},j.extend({isReady:!1,readyWait:1,ready:function(P){(P===!0?--j.readyWait:j.isReady)||(j.isReady=!0,!(P!==!0&&--j.readyWait>0)&&Ct.resolveWith(G,[j]))}}),j.ready.then=Ct.then;function kt(){G.removeEventListener("DOMContentLoaded",kt),S.removeEventListener("load",kt),j.ready()}G.readyState==="complete"||G.readyState!=="loading"&&!G.documentElement.doScroll?S.setTimeout(j.ready):(G.addEventListener("DOMContentLoaded",kt),S.addEventListener("load",kt));var yt=function K(P,H,X,le,be,xe,Ge){var it=0,bt=P.length,bn=X==null;if(se(X)==="object"){be=!0;for(it in X)K(P,H,it,X[it],!0,xe,Ge)}else if(le!==void 0&&(be=!0,J(le)||(Ge=!0),bn&&(Ge?(H.call(P,le),H=null):(bn=H,H=function(Or,Cn,ar){return bn.call(j(Or),ar)})),H))for(;it<bt;it++)H(P[it],X,Ge?le:le.call(P[it],it,H(P[it],X)));return be?P:bn?H.call(P):bt?H(P[0],X):xe},tt=/^-ms-/,I=/-([a-z])/g;function Mn(K,P){return P.toUpperCase()}function dt(K){return K.replace(tt,"ms-").replace(I,Mn)}var vt=function(P){return P.nodeType===1||P.nodeType===9||!+P.nodeType};function Bt(){this.expando=j.expando+Bt.uid++}Bt.uid=1,Bt.prototype={cache:function(P){var H=P[this.expando];return H||(H={},vt(P)&&(P.nodeType?P[this.expando]=H:Object.defineProperty(P,this.expando,{value:H,configurable:!0}))),H},set:function(P,H,X){var le,be=this.cache(P);if(typeof H=="string")be[dt(H)]=X;else for(le in H)be[dt(le)]=H[le];return be},get:function(P,H){return H===void 0?this.cache(P):P[this.expando]&&P[this.expando][dt(H)]},access:function(P,H,X){return H===void 0||H&&typeof H=="string"&&X===void 0?this.get(P,H):(this.set(P,H,X),X!==void 0?X:H)},remove:function(P,H){var X,le=P[this.expando];if(le!==void 0){if(H!==void 0)for(Array.isArray(H)?H=H.map(dt):(H=dt(H),H=H in le?[H]:H.match(On)||[]),X=H.length;X--;)delete le[H[X]];(H===void 0||j.isEmptyObject(le))&&(P.nodeType?P[this.expando]=void 0:delete P[this.expando])}},hasData:function(P){var H=P[this.expando];return H!==void 0&&!j.isEmptyObject(H)}};var me=new Bt,ue=new Bt,Re=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Rt=/[A-Z]/g;function Kt(K){return K==="true"?!0:K==="false"?!1:K==="null"?null:K===+K+""?+K:Re.test(K)?JSON.parse(K):K}function Bn(K,P,H){var X;if(H===void 0&&K.nodeType===1)if(X="data-"+P.replace(Rt,"-$&").toLowerCase(),H=K.getAttribute(X),typeof H=="string"){try{H=Kt(H)}catch(le){}ue.set(K,P,H)}else H=void 0;return H}j.extend({hasData:function(P){return ue.hasData(P)||me.hasData(P)},data:function(P,H,X){return ue.access(P,H,X)},removeData:function(P,H){ue.remove(P,H)},_data:function(P,H,X){return me.access(P,H,X)},_removeData:function(P,H){me.remove(P,H)}}),j.fn.extend({data:function(P,H){var X,le,be,xe=this[0],Ge=xe&&xe.attributes;if(P===void 0){if(this.length&&(be=ue.get(xe),xe.nodeType===1&&!me.get(xe,"hasDataAttrs"))){for(X=Ge.length;X--;)Ge[X]&&(le=Ge[X].name,le.indexOf("data-")===0&&(le=dt(le.slice(5)),Bn(xe,le,be[le])));me.set(xe,"hasDataAttrs",!0)}return be}return typeof P=="object"?this.each(function(){ue.set(this,P)}):yt(this,function(it){var bt;if(xe&&it===void 0)return bt=ue.get(xe,P),bt!==void 0||(bt=Bn(xe,P),bt!==void 0)?bt:void 0;this.each(function(){ue.set(this,P,it)})},null,H,arguments.length>1,null,!0)},removeData:function(P){return this.each(function(){ue.remove(this,P)})}}),j.extend({queue:function(P,H,X){var le;if(P)return H=(H||"fx")+"queue",le=me.get(P,H),X&&(!le||Array.isArray(X)?le=me.access(P,H,j.makeArray(X)):le.push(X)),le||[]},dequeue:function(P,H){H=H||"fx";var X=j.queue(P,H),le=X.length,be=X.shift(),xe=j._queueHooks(P,H),Ge=function(){j.dequeue(P,H)};be==="inprogress"&&(be=X.shift(),le--),be&&(H==="fx"&&X.unshift("inprogress"),delete xe.stop,be.call(P,Ge,xe)),!le&&xe&&xe.empty.fire()},_queueHooks:function(P,H){var X=H+"queueHooks";return me.get(P,X)||me.access(P,X,{empty:j.Callbacks("once memory").add(function(){me.remove(P,[H+"queue",X])})})}}),j.fn.extend({queue:function(P,H){var X=2;return typeof P!="string"&&(H=P,P="fx",X--),arguments.length<X?j.queue(this[0],P):H===void 0?this:this.each(function(){var le=j.queue(this,P,H);j._queueHooks(this,P),P==="fx"&&le[0]!=="inprogress"&&j.dequeue(this,P)})},dequeue:function(P){return this.each(function(){j.dequeue(this,P)})},clearQueue:function(P){return this.queue(P||"fx",[])},promise:function(P,H){var X,le=1,be=j.Deferred(),xe=this,Ge=this.length,it=function(){--le||be.resolveWith(xe,[xe])};for(typeof P!="string"&&(H=P,P=void 0),P=P||"fx";Ge--;)X=me.get(xe[Ge],P+"queueHooks"),X&&X.empty&&(le++,X.empty.add(it));return it(),be.promise(H)}});var Nr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Rn=new RegExp("^(?:([+-])=|)("+Nr+")([a-z%]*)$","i"),Cr=["Top","Right","Bottom","Left"],tr=G.documentElement,jr=function(P){return j.contains(P.ownerDocument,P)},zr={composed:!0};tr.getRootNode&&(jr=function(P){return j.contains(P.ownerDocument,P)||P.getRootNode(zr)===P.ownerDocument});var Ua=function(P,H){return P=H||P,P.style.display==="none"||P.style.display===""&&jr(P)&&j.css(P,"display")==="none"};function oa(K,P,H,X){var le,be,xe=20,Ge=X?function(){return X.cur()}:function(){return j.css(K,P,"")},it=Ge(),bt=H&&H[3]||(j.cssNumber[P]?"":"px"),bn=K.nodeType&&(j.cssNumber[P]||bt!=="px"&&+it)&&Rn.exec(j.css(K,P));if(bn&&bn[3]!==bt){for(it=it/2,bt=bt||bn[3],bn=+it||1;xe--;)j.style(K,P,bn+bt),(1-be)*(1-(be=Ge()/it||.5))<=0&&(xe=0),bn=bn/be;bn=bn*2,j.style(K,P,bn+bt),H=H||[]}return H&&(bn=+bn||+it||0,le=H[1]?bn+(H[1]+1)*H[2]:+H[2],X&&(X.unit=bt,X.start=bn,X.end=le)),le}var Za={};function ba(K){var P,H=K.ownerDocument,X=K.nodeName,le=Za[X];return le||(P=H.body.appendChild(H.createElement(X)),le=j.css(P,"display"),P.parentNode.removeChild(P),le==="none"&&(le="block"),Za[X]=le,le)}function Pa(K,P){for(var H,X,le=[],be=0,xe=K.length;be<xe;be++)X=K[be],!!X.style&&(H=X.style.display,P?(H==="none"&&(le[be]=me.get(X,"display")||null,le[be]||(X.style.display="")),X.style.display===""&&Ua(X)&&(le[be]=ba(X))):H!=="none"&&(le[be]="none",me.set(X,"display",H)));for(be=0;be<xe;be++)le[be]!=null&&(K[be].style.display=le[be]);return K}j.fn.extend({show:function(){return Pa(this,!0)},hide:function(){return Pa(this)},toggle:function(P){return typeof P=="boolean"?P?this.show():this.hide():this.each(function(){Ua(this)?j(this).show():j(this).hide()})}});var ri=/^(?:checkbox|radio)$/i,li=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ka=/^$|^module$|\/(?:java|ecma)script/i;(function(){var K=G.createDocumentFragment(),P=K.appendChild(G.createElement("div")),H=G.createElement("input");H.setAttribute("type","radio"),H.setAttribute("checked","checked"),H.setAttribute("name","t"),P.appendChild(H),re.checkClone=P.cloneNode(!0).cloneNode(!0).lastChild.checked,P.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!P.cloneNode(!0).lastChild.defaultValue,P.innerHTML="<option></option>",re.option=!!P.lastChild})();var ai={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ai.tbody=ai.tfoot=ai.colgroup=ai.caption=ai.thead,ai.th=ai.td,re.option||(ai.optgroup=ai.option=[1,"<select multiple='multiple'>","</select>"]);function Qa(K,P){var H;return typeof K.getElementsByTagName!="undefined"?H=K.getElementsByTagName(P||"*"):typeof K.querySelectorAll!="undefined"?H=K.querySelectorAll(P||"*"):H=[],P===void 0||P&&ke(K,P)?j.merge([K],H):H}function aa(K,P){for(var H=0,X=K.length;H<X;H++)me.set(K[H],"globalEval",!P||me.get(P[H],"globalEval"))}var Gi=/<|&#?\w+;/;function mo(K,P,H,X,le){for(var be,xe,Ge,it,bt,bn,_n=P.createDocumentFragment(),Or=[],Cn=0,ar=K.length;Cn<ar;Cn++)if(be=K[Cn],be||be===0)if(se(be)==="object")j.merge(Or,be.nodeType?[be]:be);else if(!Gi.test(be))Or.push(P.createTextNode(be));else{for(xe=xe||_n.appendChild(P.createElement("div")),Ge=(li.exec(be)||["",""])[1].toLowerCase(),it=ai[Ge]||ai._default,xe.innerHTML=it[1]+j.htmlPrefilter(be)+it[2],bn=it[0];bn--;)xe=xe.lastChild;j.merge(Or,xe.childNodes),xe=_n.firstChild,xe.textContent=""}for(_n.textContent="",Cn=0;be=Or[Cn++];){if(X&&j.inArray(be,X)>-1){le&&le.push(be);continue}if(bt=jr(be),xe=Qa(_n.appendChild(be),"script"),bt&&aa(xe),H)for(bn=0;be=xe[bn++];)ka.test(be.type||"")&&H.push(be)}return _n}var sa=/^([^.]*)(?:\.(.+)|)/;function yi(){return!0}function Io(){return!1}function Pi(K,P,H,X,le,be){var xe,Ge;if(typeof P=="object"){typeof H!="string"&&(X=X||H,H=void 0);for(Ge in P)Pi(K,Ge,H,X,P[Ge],be);return K}if(X==null&&le==null?(le=H,X=H=void 0):le==null&&(typeof H=="string"?(le=X,X=void 0):(le=X,X=H,H=void 0)),le===!1)le=Io;else if(!le)return K;return be===1&&(xe=le,le=function(bt){return j().off(bt),xe.apply(this,arguments)},le.guid=xe.guid||(xe.guid=j.guid++)),K.each(function(){j.event.add(this,P,le,X,H)})}j.event={global:{},add:function(P,H,X,le,be){var xe,Ge,it,bt,bn,_n,Or,Cn,ar,Ca,Xr,Fi=me.get(P);if(!!vt(P))for(X.handler&&(xe=X,X=xe.handler,be=xe.selector),be&&j.find.matchesSelector(tr,be),X.guid||(X.guid=j.guid++),(bt=Fi.events)||(bt=Fi.events=Object.create(null)),(Ge=Fi.handle)||(Ge=Fi.handle=function(Qo){return typeof j!="undefined"&&j.event.triggered!==Qo.type?j.event.dispatch.apply(P,arguments):void 0}),H=(H||"").match(On)||[""],bn=H.length;bn--;)it=sa.exec(H[bn])||[],ar=Xr=it[1],Ca=(it[2]||"").split(".").sort(),!!ar&&(Or=j.event.special[ar]||{},ar=(be?Or.delegateType:Or.bindType)||ar,Or=j.event.special[ar]||{},_n=j.extend({type:ar,origType:Xr,data:le,handler:X,guid:X.guid,selector:be,needsContext:be&&j.expr.match.needsContext.test(be),namespace:Ca.join(".")},xe),(Cn=bt[ar])||(Cn=bt[ar]=[],Cn.delegateCount=0,(!Or.setup||Or.setup.call(P,le,Ca,Ge)===!1)&&P.addEventListener&&P.addEventListener(ar,Ge)),Or.add&&(Or.add.call(P,_n),_n.handler.guid||(_n.handler.guid=X.guid)),be?Cn.splice(Cn.delegateCount++,0,_n):Cn.push(_n),j.event.global[ar]=!0)},remove:function(P,H,X,le,be){var xe,Ge,it,bt,bn,_n,Or,Cn,ar,Ca,Xr,Fi=me.hasData(P)&&me.get(P);if(!(!Fi||!(bt=Fi.events))){for(H=(H||"").match(On)||[""],bn=H.length;bn--;){if(it=sa.exec(H[bn])||[],ar=Xr=it[1],Ca=(it[2]||"").split(".").sort(),!ar){for(ar in bt)j.event.remove(P,ar+H[bn],X,le,!0);continue}for(Or=j.event.special[ar]||{},ar=(le?Or.delegateType:Or.bindType)||ar,Cn=bt[ar]||[],it=it[2]&&new RegExp("(^|\\.)"+Ca.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ge=xe=Cn.length;xe--;)_n=Cn[xe],(be||Xr===_n.origType)&&(!X||X.guid===_n.guid)&&(!it||it.test(_n.namespace))&&(!le||le===_n.selector||le==="**"&&_n.selector)&&(Cn.splice(xe,1),_n.selector&&Cn.delegateCount--,Or.remove&&Or.remove.call(P,_n));Ge&&!Cn.length&&((!Or.teardown||Or.teardown.call(P,Ca,Fi.handle)===!1)&&j.removeEvent(P,ar,Fi.handle),delete bt[ar])}j.isEmptyObject(bt)&&me.remove(P,"handle events")}},dispatch:function(P){var H,X,le,be,xe,Ge,it=new Array(arguments.length),bt=j.event.fix(P),bn=(me.get(this,"events")||Object.create(null))[bt.type]||[],_n=j.event.special[bt.type]||{};for(it[0]=bt,H=1;H<arguments.length;H++)it[H]=arguments[H];if(bt.delegateTarget=this,!(_n.preDispatch&&_n.preDispatch.call(this,bt)===!1)){for(Ge=j.event.handlers.call(this,bt,bn),H=0;(be=Ge[H++])&&!bt.isPropagationStopped();)for(bt.currentTarget=be.elem,X=0;(xe=be.handlers[X++])&&!bt.isImmediatePropagationStopped();)(!bt.rnamespace||xe.namespace===!1||bt.rnamespace.test(xe.namespace))&&(bt.handleObj=xe,bt.data=xe.data,le=((j.event.special[xe.origType]||{}).handle||xe.handler).apply(be.elem,it),le!==void 0&&(bt.result=le)===!1&&(bt.preventDefault(),bt.stopPropagation()));return _n.postDispatch&&_n.postDispatch.call(this,bt),bt.result}},handlers:function(P,H){var X,le,be,xe,Ge,it=[],bt=H.delegateCount,bn=P.target;if(bt&&bn.nodeType&&!(P.type==="click"&&P.button>=1)){for(;bn!==this;bn=bn.parentNode||this)if(bn.nodeType===1&&!(P.type==="click"&&bn.disabled===!0)){for(xe=[],Ge={},X=0;X<bt;X++)le=H[X],be=le.selector+" ",Ge[be]===void 0&&(Ge[be]=le.needsContext?j(be,this).index(bn)>-1:j.find(be,this,null,[bn]).length),Ge[be]&&xe.push(le);xe.length&&it.push({elem:bn,handlers:xe})}}return bn=this,bt<H.length&&it.push({elem:bn,handlers:H.slice(bt)}),it},addProp:function(P,H){Object.defineProperty(j.Event.prototype,P,{enumerable:!0,configurable:!0,get:J(H)?function(){if(this.originalEvent)return H(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[P]},set:function(le){Object.defineProperty(this,P,{enumerable:!0,configurable:!0,writable:!0,value:le})}})},fix:function(P){return P[j.expando]?P:new j.Event(P)},special:{load:{noBubble:!0},click:{setup:function(P){var H=this||P;return ri.test(H.type)&&H.click&&ke(H,"input")&&ao(H,"click",!0),!1},trigger:function(P){var H=this||P;return ri.test(H.type)&&H.click&&ke(H,"input")&&ao(H,"click"),!0},_default:function(P){var H=P.target;return ri.test(H.type)&&H.click&&ke(H,"input")&&me.get(H,"click")||ke(H,"a")}},beforeunload:{postDispatch:function(P){P.result!==void 0&&P.originalEvent&&(P.originalEvent.returnValue=P.result)}}}};function ao(K,P,H){if(!H){me.get(K,P)===void 0&&j.event.add(K,P,yi);return}me.set(K,P,!1),j.event.add(K,P,{namespace:!1,handler:function(le){var be,xe=me.get(this,P);if(le.isTrigger&1&&this[P]){if(xe)(j.event.special[P]||{}).delegateType&&le.stopPropagation();else if(xe=M.call(arguments),me.set(this,P,xe),this[P](),be=me.get(this,P),me.set(this,P,!1),xe!==be)return le.stopImmediatePropagation(),le.preventDefault(),be}else xe&&(me.set(this,P,j.event.trigger(xe[0],xe.slice(1),this)),le.stopPropagation(),le.isImmediatePropagationStopped=yi)}})}j.removeEvent=function(K,P,H){K.removeEventListener&&K.removeEventListener(P,H)},j.Event=function(K,P){if(!(this instanceof j.Event))return new j.Event(K,P);K&&K.type?(this.originalEvent=K,this.type=K.type,this.isDefaultPrevented=K.defaultPrevented||K.defaultPrevented===void 0&&K.returnValue===!1?yi:Io,this.target=K.target&&K.target.nodeType===3?K.target.parentNode:K.target,this.currentTarget=K.currentTarget,this.relatedTarget=K.relatedTarget):this.type=K,P&&j.extend(this,P),this.timeStamp=K&&K.timeStamp||Date.now(),this[j.expando]=!0},j.Event.prototype={constructor:j.Event,isDefaultPrevented:Io,isPropagationStopped:Io,isImmediatePropagationStopped:Io,isSimulated:!1,preventDefault:function(){var P=this.originalEvent;this.isDefaultPrevented=yi,P&&!this.isSimulated&&P.preventDefault()},stopPropagation:function(){var P=this.originalEvent;this.isPropagationStopped=yi,P&&!this.isSimulated&&P.stopPropagation()},stopImmediatePropagation:function(){var P=this.originalEvent;this.isImmediatePropagationStopped=yi,P&&!this.isSimulated&&P.stopImmediatePropagation(),this.stopPropagation()}},j.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},j.event.addProp),j.each({focus:"focusin",blur:"focusout"},function(K,P){function H(X){if(G.documentMode){var le=me.get(this,"handle"),be=j.event.fix(X);be.type=X.type==="focusin"?"focus":"blur",be.isSimulated=!0,le(X),be.target===be.currentTarget&&le(be)}else j.event.simulate(P,X.target,j.event.fix(X))}j.event.special[K]={setup:function(){var le;if(ao(this,K,!0),G.documentMode)le=me.get(this,P),le||this.addEventListener(P,H),me.set(this,P,(le||0)+1);else return!1},trigger:function(){return ao(this,K),!0},teardown:function(){var le;if(G.documentMode)le=me.get(this,P)-1,le?me.set(this,P,le):(this.removeEventListener(P,H),me.remove(this,P));else return!1},_default:function(le){return me.get(le.target,K)},delegateType:P},j.event.special[P]={setup:function(){var le=this.ownerDocument||this.document||this,be=G.documentMode?this:le,xe=me.get(be,P);xe||(G.documentMode?this.addEventListener(P,H):le.addEventListener(K,H,!0)),me.set(be,P,(xe||0)+1)},teardown:function(){var le=this.ownerDocument||this.document||this,be=G.documentMode?this:le,xe=me.get(be,P)-1;xe?me.set(be,P,xe):(G.documentMode?this.removeEventListener(P,H):le.removeEventListener(K,H,!0),me.remove(be,P))}}}),j.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(K,P){j.event.special[K]={delegateType:P,bindType:P,handle:function(X){var le,be=this,xe=X.relatedTarget,Ge=X.handleObj;return(!xe||xe!==be&&!j.contains(be,xe))&&(X.type=Ge.origType,le=Ge.handler.apply(this,arguments),X.type=P),le}}}),j.fn.extend({on:function(P,H,X,le){return Pi(this,P,H,X,le)},one:function(P,H,X,le){return Pi(this,P,H,X,le,1)},off:function(P,H,X){var le,be;if(P&&P.preventDefault&&P.handleObj)return le=P.handleObj,j(P.delegateTarget).off(le.namespace?le.origType+"."+le.namespace:le.origType,le.selector,le.handler),this;if(typeof P=="object"){for(be in P)this.off(be,H,P[be]);return this}return(H===!1||typeof H=="function")&&(X=H,H=void 0),X===!1&&(X=Io),this.each(function(){j.event.remove(this,P,X,H)})}});var ki=/<script|<style|<link/i,ot=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ne(K,P){return ke(K,"table")&&ke(P.nodeType!==11?P:P.firstChild,"tr")&&j(K).children("tbody")[0]||K}function St(K){return K.type=(K.getAttribute("type")!==null)+"/"+K.type,K}function Ve(K){return(K.type||"").slice(0,5)==="true/"?K.type=K.type.slice(5):K.removeAttribute("type"),K}function Xt(K,P){var H,X,le,be,xe,Ge,it;if(P.nodeType===1){if(me.hasData(K)&&(be=me.get(K),it=be.events,it)){me.remove(P,"handle events");for(le in it)for(H=0,X=it[le].length;H<X;H++)j.event.add(P,le,it[le][H])}ue.hasData(K)&&(xe=ue.access(K),Ge=j.extend({},xe),ue.set(P,Ge))}}function gn(K,P){var H=P.nodeName.toLowerCase();H==="input"&&ri.test(K.type)?P.checked=K.checked:(H==="input"||H==="textarea")&&(P.defaultValue=K.defaultValue)}function pn(K,P,H,X){P=U(P);var le,be,xe,Ge,it,bt,bn=0,_n=K.length,Or=_n-1,Cn=P[0],ar=J(Cn);if(ar||_n>1&&typeof Cn=="string"&&!re.checkClone&&ot.test(Cn))return K.each(function(Ca){var Xr=K.eq(Ca);ar&&(P[0]=Cn.call(this,Ca,Xr.html())),pn(Xr,P,H,X)});if(_n&&(le=mo(P,K[0].ownerDocument,!1,K,X),be=le.firstChild,le.childNodes.length===1&&(le=be),be||X)){for(xe=j.map(Qa(le,"script"),St),Ge=xe.length;bn<_n;bn++)it=le,bn!==Or&&(it=j.clone(it,!0,!0),Ge&&j.merge(xe,Qa(it,"script"))),H.call(K[bn],it,bn);if(Ge)for(bt=xe[xe.length-1].ownerDocument,j.map(xe,Ve),bn=0;bn<Ge;bn++)it=xe[bn],ka.test(it.type||"")&&!me.access(it,"globalEval")&&j.contains(bt,it)&&(it.src&&(it.type||"").toLowerCase()!=="module"?j._evalUrl&&!it.noModule&&j._evalUrl(it.src,{nonce:it.nonce||it.getAttribute("nonce")},bt):fe(it.textContent.replace(It,""),it,bt))}return K}function en(K,P,H){for(var X,le=P?j.filter(P,K):K,be=0;(X=le[be])!=null;be++)!H&&X.nodeType===1&&j.cleanData(Qa(X)),X.parentNode&&(H&&jr(X)&&aa(Qa(X,"script")),X.parentNode.removeChild(X));return K}j.extend({htmlPrefilter:function(P){return P},clone:function(P,H,X){var le,be,xe,Ge,it=P.cloneNode(!0),bt=jr(P);if(!re.noCloneChecked&&(P.nodeType===1||P.nodeType===11)&&!j.isXMLDoc(P))for(Ge=Qa(it),xe=Qa(P),le=0,be=xe.length;le<be;le++)gn(xe[le],Ge[le]);if(H)if(X)for(xe=xe||Qa(P),Ge=Ge||Qa(it),le=0,be=xe.length;le<be;le++)Xt(xe[le],Ge[le]);else Xt(P,it);return Ge=Qa(it,"script"),Ge.length>0&&aa(Ge,!bt&&Qa(P,"script")),it},cleanData:function(P){for(var H,X,le,be=j.event.special,xe=0;(X=P[xe])!==void 0;xe++)if(vt(X)){if(H=X[me.expando]){if(H.events)for(le in H.events)be[le]?j.event.remove(X,le):j.removeEvent(X,le,H.handle);X[me.expando]=void 0}X[ue.expando]&&(X[ue.expando]=void 0)}}}),j.fn.extend({detach:function(P){return en(this,P,!0)},remove:function(P){return en(this,P)},text:function(P){return yt(this,function(H){return H===void 0?j.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=H)})},null,P,arguments.length)},append:function(){return pn(this,arguments,function(P){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var H=Ne(this,P);H.appendChild(P)}})},prepend:function(){return pn(this,arguments,function(P){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var H=Ne(this,P);H.insertBefore(P,H.firstChild)}})},before:function(){return pn(this,arguments,function(P){this.parentNode&&this.parentNode.insertBefore(P,this)})},after:function(){return pn(this,arguments,function(P){this.parentNode&&this.parentNode.insertBefore(P,this.nextSibling)})},empty:function(){for(var P,H=0;(P=this[H])!=null;H++)P.nodeType===1&&(j.cleanData(Qa(P,!1)),P.textContent="");return this},clone:function(P,H){return P=P==null?!1:P,H=H==null?P:H,this.map(function(){return j.clone(this,P,H)})},html:function(P){return yt(this,function(H){var X=this[0]||{},le=0,be=this.length;if(H===void 0&&X.nodeType===1)return X.innerHTML;if(typeof H=="string"&&!ki.test(H)&&!ai[(li.exec(H)||["",""])[1].toLowerCase()]){H=j.htmlPrefilter(H);try{for(;le<be;le++)X=this[le]||{},X.nodeType===1&&(j.cleanData(Qa(X,!1)),X.innerHTML=H);X=0}catch(xe){}}X&&this.empty().append(H)},null,P,arguments.length)},replaceWith:function(){var P=[];return pn(this,arguments,function(H){var X=this.parentNode;j.inArray(this,P)<0&&(j.cleanData(Qa(this)),X&&X.replaceChild(H,this))},P)}}),j.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(K,P){j.fn[K]=function(H){for(var X,le=[],be=j(H),xe=be.length-1,Ge=0;Ge<=xe;Ge++)X=Ge===xe?this:this.clone(!0),j(be[Ge])[P](X),V.apply(le,X.get());return this.pushStack(le)}});var In=new RegExp("^("+Nr+")(?!px)[a-z%]+$","i"),$r=/^--/,da=function(P){var H=P.ownerDocument.defaultView;return(!H||!H.opener)&&(H=S),H.getComputedStyle(P)},Oa=function(P,H,X){var le,be,xe={};for(be in H)xe[be]=P.style[be],P.style[be]=H[be];le=X.call(P);for(be in H)P.style[be]=xe[be];return le},Ka=new RegExp(Cr.join("|"),"i");(function(){function K(){if(!!bt){it.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",bt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",tr.appendChild(it).appendChild(bt);var bn=S.getComputedStyle(bt);H=bn.top!=="1%",Ge=P(bn.marginLeft)===12,bt.style.right="60%",be=P(bn.right)===36,X=P(bn.width)===36,bt.style.position="absolute",le=P(bt.offsetWidth/3)===12,tr.removeChild(it),bt=null}}function P(bn){return Math.round(parseFloat(bn))}var H,X,le,be,xe,Ge,it=G.createElement("div"),bt=G.createElement("div");!bt.style||(bt.style.backgroundClip="content-box",bt.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle=bt.style.backgroundClip==="content-box",j.extend(re,{boxSizingReliable:function(){return K(),X},pixelBoxStyles:function(){return K(),be},pixelPosition:function(){return K(),H},reliableMarginLeft:function(){return K(),Ge},scrollboxSize:function(){return K(),le},reliableTrDimensions:function(){var _n,Or,Cn,ar;return xe==null&&(_n=G.createElement("table"),Or=G.createElement("tr"),Cn=G.createElement("div"),_n.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Or.style.cssText="border:1px solid",Or.style.height="1px",Cn.style.height="9px",Cn.style.display="block",tr.appendChild(_n).appendChild(Or).appendChild(Cn),ar=S.getComputedStyle(Or),xe=parseInt(ar.height,10)+parseInt(ar.borderTopWidth,10)+parseInt(ar.borderBottomWidth,10)===Or.offsetHeight,tr.removeChild(_n)),xe}}))})();function bi(K,P,H){var X,le,be,xe,Ge=$r.test(P),it=K.style;return H=H||da(K),H&&(xe=H.getPropertyValue(P)||H[P],Ge&&xe&&(xe=xe.replace(je,"$1")||void 0),xe===""&&!jr(K)&&(xe=j.style(K,P)),!re.pixelBoxStyles()&&In.test(xe)&&Ka.test(P)&&(X=it.width,le=it.minWidth,be=it.maxWidth,it.minWidth=it.maxWidth=it.width=xe,xe=H.width,it.width=X,it.minWidth=le,it.maxWidth=be)),xe!==void 0?xe+"":xe}function _a(K,P){return{get:function(){if(K()){delete this.get;return}return(this.get=P).apply(this,arguments)}}}var ti=["Webkit","Moz","ms"],tn=G.createElement("div").style,mn={};function nr(K){for(var P=K[0].toUpperCase()+K.slice(1),H=ti.length;H--;)if(K=ti[H]+P,K in tn)return K}function or(K){var P=j.cssProps[K]||mn[K];return P||(K in tn?K:mn[K]=nr(K)||K)}var Zr=/^(none|table(?!-c[ea]).+)/,Vi={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"};function Ea(K,P,H){var X=Rn.exec(P);return X?Math.max(0,X[2]-(H||0))+(X[3]||"px"):P}function ta(K,P,H,X,le,be){var xe=P==="width"?1:0,Ge=0,it=0,bt=0;if(H===(X?"border":"content"))return 0;for(;xe<4;xe+=2)H==="margin"&&(bt+=j.css(K,H+Cr[xe],!0,le)),X?(H==="content"&&(it-=j.css(K,"padding"+Cr[xe],!0,le)),H!=="margin"&&(it-=j.css(K,"border"+Cr[xe]+"Width",!0,le))):(it+=j.css(K,"padding"+Cr[xe],!0,le),H!=="padding"?it+=j.css(K,"border"+Cr[xe]+"Width",!0,le):Ge+=j.css(K,"border"+Cr[xe]+"Width",!0,le));return!X&&be>=0&&(it+=Math.max(0,Math.ceil(K["offset"+P[0].toUpperCase()+P.slice(1)]-be-it-Ge-.5))||0),it+bt}function ha(K,P,H){var X=da(K),le=!re.boxSizingReliable()||H,be=le&&j.css(K,"boxSizing",!1,X)==="border-box",xe=be,Ge=bi(K,P,X),it="offset"+P[0].toUpperCase()+P.slice(1);if(In.test(Ge)){if(!H)return Ge;Ge="auto"}return(!re.boxSizingReliable()&&be||!re.reliableTrDimensions()&&ke(K,"tr")||Ge==="auto"||!parseFloat(Ge)&&j.css(K,"display",!1,X)==="inline")&&K.getClientRects().length&&(be=j.css(K,"boxSizing",!1,X)==="border-box",xe=it in K,xe&&(Ge=K[it])),Ge=parseFloat(Ge)||0,Ge+ta(K,P,H||(be?"border":"content"),xe,X,Ge)+"px"}j.extend({cssHooks:{opacity:{get:function(P,H){if(H){var X=bi(P,"opacity");return X===""?"1":X}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(P,H,X,le){if(!(!P||P.nodeType===3||P.nodeType===8||!P.style)){var be,xe,Ge,it=dt(H),bt=$r.test(H),bn=P.style;if(bt||(H=or(it)),Ge=j.cssHooks[H]||j.cssHooks[it],X!==void 0){if(xe=typeof X,xe==="string"&&(be=Rn.exec(X))&&be[1]&&(X=oa(P,H,be),xe="number"),X==null||X!==X)return;xe==="number"&&!bt&&(X+=be&&be[3]||(j.cssNumber[it]?"":"px")),!re.clearCloneStyle&&X===""&&H.indexOf("background")===0&&(bn[H]="inherit"),(!Ge||!("set"in Ge)||(X=Ge.set(P,X,le))!==void 0)&&(bt?bn.setProperty(H,X):bn[H]=X)}else return Ge&&"get"in Ge&&(be=Ge.get(P,!1,le))!==void 0?be:bn[H]}},css:function(P,H,X,le){var be,xe,Ge,it=dt(H),bt=$r.test(H);return bt||(H=or(it)),Ge=j.cssHooks[H]||j.cssHooks[it],Ge&&"get"in Ge&&(be=Ge.get(P,!0,X)),be===void 0&&(be=bi(P,H,le)),be==="normal"&&H in Da&&(be=Da[H]),X===""||X?(xe=parseFloat(be),X===!0||isFinite(xe)?xe||0:be):be}}),j.each(["height","width"],function(K,P){j.cssHooks[P]={get:function(X,le,be){if(le)return Zr.test(j.css(X,"display"))&&(!X.getClientRects().length||!X.getBoundingClientRect().width)?Oa(X,Vi,function(){return ha(X,P,be)}):ha(X,P,be)},set:function(X,le,be){var xe,Ge=da(X),it=!re.scrollboxSize()&&Ge.position==="absolute",bt=it||be,bn=bt&&j.css(X,"boxSizing",!1,Ge)==="border-box",_n=be?ta(X,P,be,bn,Ge):0;return bn&&it&&(_n-=Math.ceil(X["offset"+P[0].toUpperCase()+P.slice(1)]-parseFloat(Ge[P])-ta(X,P,"border",!1,Ge)-.5)),_n&&(xe=Rn.exec(le))&&(xe[3]||"px")!=="px"&&(X.style[P]=le,le=j.css(X,P)),Ea(X,le,_n)}}}),j.cssHooks.marginLeft=_a(re.reliableMarginLeft,function(K,P){if(P)return(parseFloat(bi(K,"marginLeft"))||K.getBoundingClientRect().left-Oa(K,{marginLeft:0},function(){return K.getBoundingClientRect().left}))+"px"}),j.each({margin:"",padding:"",border:"Width"},function(K,P){j.cssHooks[K+P]={expand:function(X){for(var le=0,be={},xe=typeof X=="string"?X.split(" "):[X];le<4;le++)be[K+Cr[le]+P]=xe[le]||xe[le-2]||xe[0];return be}},K!=="margin"&&(j.cssHooks[K+P].set=Ea)}),j.fn.extend({css:function(P,H){return yt(this,function(X,le,be){var xe,Ge,it={},bt=0;if(Array.isArray(le)){for(xe=da(X),Ge=le.length;bt<Ge;bt++)it[le[bt]]=j.css(X,le[bt],!1,xe);return it}return be!==void 0?j.style(X,le,be):j.css(X,le)},P,H,arguments.length>1)}});function Kr(K,P,H,X,le){return new Kr.prototype.init(K,P,H,X,le)}j.Tween=Kr,Kr.prototype={constructor:Kr,init:function(P,H,X,le,be,xe){this.elem=P,this.prop=X,this.easing=be||j.easing._default,this.options=H,this.start=this.now=this.cur(),this.end=le,this.unit=xe||(j.cssNumber[X]?"":"px")},cur:function(){var P=Kr.propHooks[this.prop];return P&&P.get?P.get(this):Kr.propHooks._default.get(this)},run:function(P){var H,X=Kr.propHooks[this.prop];return this.options.duration?this.pos=H=j.easing[this.easing](P,this.options.duration*P,0,1,this.options.duration):this.pos=H=P,this.now=(this.end-this.start)*H+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),X&&X.set?X.set(this):Kr.propHooks._default.set(this),this}},Kr.prototype.init.prototype=Kr.prototype,Kr.propHooks={_default:{get:function(P){var H;return P.elem.nodeType!==1||P.elem[P.prop]!=null&&P.elem.style[P.prop]==null?P.elem[P.prop]:(H=j.css(P.elem,P.prop,""),!H||H==="auto"?0:H)},set:function(P){j.fx.step[P.prop]?j.fx.step[P.prop](P):P.elem.nodeType===1&&(j.cssHooks[P.prop]||P.elem.style[or(P.prop)]!=null)?j.style(P.elem,P.prop,P.now+P.unit):P.elem[P.prop]=P.now}}},Kr.propHooks.scrollTop=Kr.propHooks.scrollLeft={set:function(P){P.elem.nodeType&&P.elem.parentNode&&(P.elem[P.prop]=P.now)}},j.easing={linear:function(P){return P},swing:function(P){return .5-Math.cos(P*Math.PI)/2},_default:"swing"},j.fx=Kr.prototype.init,j.fx.step={};var qi,So,Js=/^(?:toggle|show|hide)$/,Ro=/queueHooks$/;function Zo(){So&&(G.hidden===!1&&S.requestAnimationFrame?S.requestAnimationFrame(Zo):S.setTimeout(Zo,j.fx.interval),j.fx.tick())}function Ss(){return S.setTimeout(function(){qi=void 0}),qi=Date.now()}function gs(K,P){var H,X=0,le={height:K};for(P=P?1:0;X<4;X+=2-P)H=Cr[X],le["margin"+H]=le["padding"+H]=K;return P&&(le.opacity=le.width=K),le}function ou(K,P,H){for(var X,le=(Vo.tweeners[P]||[]).concat(Vo.tweeners["*"]),be=0,xe=le.length;be<xe;be++)if(X=le[be].call(H,P,K))return X}function As(K,P,H){var X,le,be,xe,Ge,it,bt,bn,_n="width"in P||"height"in P,Or=this,Cn={},ar=K.style,Ca=K.nodeType&&Ua(K),Xr=me.get(K,"fxshow");H.queue||(xe=j._queueHooks(K,"fx"),xe.unqueued==null&&(xe.unqueued=0,Ge=xe.empty.fire,xe.empty.fire=function(){xe.unqueued||Ge()}),xe.unqueued++,Or.always(function(){Or.always(function(){xe.unqueued--,j.queue(K,"fx").length||xe.empty.fire()})}));for(X in P)if(le=P[X],Js.test(le)){if(delete P[X],be=be||le==="toggle",le===(Ca?"hide":"show"))if(le==="show"&&Xr&&Xr[X]!==void 0)Ca=!0;else continue;Cn[X]=Xr&&Xr[X]||j.style(K,X)}if(it=!j.isEmptyObject(P),!(!it&&j.isEmptyObject(Cn))){_n&&K.nodeType===1&&(H.overflow=[ar.overflow,ar.overflowX,ar.overflowY],bt=Xr&&Xr.display,bt==null&&(bt=me.get(K,"display")),bn=j.css(K,"display"),bn==="none"&&(bt?bn=bt:(Pa([K],!0),bt=K.style.display||bt,bn=j.css(K,"display"),Pa([K]))),(bn==="inline"||bn==="inline-block"&&bt!=null)&&j.css(K,"float")==="none"&&(it||(Or.done(function(){ar.display=bt}),bt==null&&(bn=ar.display,bt=bn==="none"?"":bn)),ar.display="inline-block")),H.overflow&&(ar.overflow="hidden",Or.always(function(){ar.overflow=H.overflow[0],ar.overflowX=H.overflow[1],ar.overflowY=H.overflow[2]})),it=!1;for(X in Cn)it||(Xr?"hidden"in Xr&&(Ca=Xr.hidden):Xr=me.access(K,"fxshow",{display:bt}),be&&(Xr.hidden=!Ca),Ca&&Pa([K],!0),Or.done(function(){Ca||Pa([K]),me.remove(K,"fxshow");for(X in Cn)j.style(K,X,Cn[X])})),it=ou(Ca?Xr[X]:0,X,Or),X in Xr||(Xr[X]=it.start,Ca&&(it.end=it.start,it.start=0))}}function Ms(K,P){var H,X,le,be,xe;for(H in K)if(X=dt(H),le=P[X],be=K[H],Array.isArray(be)&&(le=be[1],be=K[H]=be[0]),H!==X&&(K[X]=be,delete K[H]),xe=j.cssHooks[X],xe&&"expand"in xe){be=xe.expand(be),delete K[X];for(H in be)H in K||(K[H]=be[H],P[H]=le)}else P[X]=le}function Vo(K,P,H){var X,le,be=0,xe=Vo.prefilters.length,Ge=j.Deferred().always(function(){delete it.elem}),it=function(){if(le)return!1;for(var Or=qi||Ss(),Cn=Math.max(0,bt.startTime+bt.duration-Or),ar=Cn/bt.duration||0,Ca=1-ar,Xr=0,Fi=bt.tweens.length;Xr<Fi;Xr++)bt.tweens[Xr].run(Ca);return Ge.notifyWith(K,[bt,Ca,Cn]),Ca<1&&Fi?Cn:(Fi||Ge.notifyWith(K,[bt,1,0]),Ge.resolveWith(K,[bt]),!1)},bt=Ge.promise({elem:K,props:j.extend({},P),opts:j.extend(!0,{specialEasing:{},easing:j.easing._default},H),originalProperties:P,originalOptions:H,startTime:qi||Ss(),duration:H.duration,tweens:[],createTween:function(Or,Cn){var ar=j.Tween(K,bt.opts,Or,Cn,bt.opts.specialEasing[Or]||bt.opts.easing);return bt.tweens.push(ar),ar},stop:function(Or){var Cn=0,ar=Or?bt.tweens.length:0;if(le)return this;for(le=!0;Cn<ar;Cn++)bt.tweens[Cn].run(1);return Or?(Ge.notifyWith(K,[bt,1,0]),Ge.resolveWith(K,[bt,Or])):Ge.rejectWith(K,[bt,Or]),this}}),bn=bt.props;for(Ms(bn,bt.opts.specialEasing);be<xe;be++)if(X=Vo.prefilters[be].call(bt,K,bn,bt.opts),X)return J(X.stop)&&(j._queueHooks(bt.elem,bt.opts.queue).stop=X.stop.bind(X)),X;return j.map(bn,ou,bt),J(bt.opts.start)&&bt.opts.start.call(K,bt),bt.progress(bt.opts.progress).done(bt.opts.done,bt.opts.complete).fail(bt.opts.fail).always(bt.opts.always),j.fx.timer(j.extend(it,{elem:K,anim:bt,queue:bt.opts.queue})),bt}j.Animation=j.extend(Vo,{tweeners:{"*":[function(K,P){var H=this.createTween(K,P);return oa(H.elem,K,Rn.exec(P),H),H}]},tweener:function(P,H){J(P)?(H=P,P=["*"]):P=P.match(On);for(var X,le=0,be=P.length;le<be;le++)X=P[le],Vo.tweeners[X]=Vo.tweeners[X]||[],Vo.tweeners[X].unshift(H)},prefilters:[As],prefilter:function(P,H){H?Vo.prefilters.unshift(P):Vo.prefilters.push(P)}}),j.speed=function(K,P,H){var X=K&&typeof K=="object"?j.extend({},K):{complete:H||!H&&P||J(K)&&K,duration:K,easing:H&&P||P&&!J(P)&&P};return j.fx.off?X.duration=0:typeof X.duration!="number"&&(X.duration in j.fx.speeds?X.duration=j.fx.speeds[X.duration]:X.duration=j.fx.speeds._default),(X.queue==null||X.queue===!0)&&(X.queue="fx"),X.old=X.complete,X.complete=function(){J(X.old)&&X.old.call(this),X.queue&&j.dequeue(this,X.queue)},X},j.fn.extend({fadeTo:function(P,H,X,le){return this.filter(Ua).css("opacity",0).show().end().animate({opacity:H},P,X,le)},animate:function(P,H,X,le){var be=j.isEmptyObject(P),xe=j.speed(H,X,le),Ge=function(){var bt=Vo(this,j.extend({},P),xe);(be||me.get(this,"finish"))&&bt.stop(!0)};return Ge.finish=Ge,be||xe.queue===!1?this.each(Ge):this.queue(xe.queue,Ge)},stop:function(P,H,X){var le=function(xe){var Ge=xe.stop;delete xe.stop,Ge(X)};return typeof P!="string"&&(X=H,H=P,P=void 0),H&&this.queue(P||"fx",[]),this.each(function(){var be=!0,xe=P!=null&&P+"queueHooks",Ge=j.timers,it=me.get(this);if(xe)it[xe]&&it[xe].stop&&le(it[xe]);else for(xe in it)it[xe]&&it[xe].stop&&Ro.test(xe)&&le(it[xe]);for(xe=Ge.length;xe--;)Ge[xe].elem===this&&(P==null||Ge[xe].queue===P)&&(Ge[xe].anim.stop(X),be=!1,Ge.splice(xe,1));(be||!X)&&j.dequeue(this,P)})},finish:function(P){return P!==!1&&(P=P||"fx"),this.each(function(){var H,X=me.get(this),le=X[P+"queue"],be=X[P+"queueHooks"],xe=j.timers,Ge=le?le.length:0;for(X.finish=!0,j.queue(this,P,[]),be&&be.stop&&be.stop.call(this,!0),H=xe.length;H--;)xe[H].elem===this&&xe[H].queue===P&&(xe[H].anim.stop(!0),xe.splice(H,1));for(H=0;H<Ge;H++)le[H]&&le[H].finish&&le[H].finish.call(this);delete X.finish})}}),j.each(["toggle","show","hide"],function(K,P){var H=j.fn[P];j.fn[P]=function(X,le,be){return X==null||typeof X=="boolean"?H.apply(this,arguments):this.animate(gs(P,!0),X,le,be)}}),j.each({slideDown:gs("show"),slideUp:gs("hide"),slideToggle:gs("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(K,P){j.fn[K]=function(H,X,le){return this.animate(P,H,X,le)}}),j.timers=[],j.fx.tick=function(){var K,P=0,H=j.timers;for(qi=Date.now();P<H.length;P++)K=H[P],!K()&&H[P]===K&&H.splice(P--,1);H.length||j.fx.stop(),qi=void 0},j.fx.timer=function(K){j.timers.push(K),j.fx.start()},j.fx.interval=13,j.fx.start=function(){So||(So=!0,Zo())},j.fx.stop=function(){So=null},j.fx.speeds={slow:600,fast:200,_default:400},j.fn.delay=function(K,P){return K=j.fx&&j.fx.speeds[K]||K,P=P||"fx",this.queue(P,function(H,X){var le=S.setTimeout(H,K);X.stop=function(){S.clearTimeout(le)}})},function(){var K=G.createElement("input"),P=G.createElement("select"),H=P.appendChild(G.createElement("option"));K.type="checkbox",re.checkOn=K.value!=="",re.optSelected=H.selected,K=G.createElement("input"),K.value="t",K.type="radio",re.radioValue=K.value==="t"}();var us,Ki=j.expr.attrHandle;j.fn.extend({attr:function(P,H){return yt(this,j.attr,P,H,arguments.length>1)},removeAttr:function(P){return this.each(function(){j.removeAttr(this,P)})}}),j.extend({attr:function(P,H,X){var le,be,xe=P.nodeType;if(!(xe===3||xe===8||xe===2)){if(typeof P.getAttribute=="undefined")return j.prop(P,H,X);if((xe!==1||!j.isXMLDoc(P))&&(be=j.attrHooks[H.toLowerCase()]||(j.expr.match.bool.test(H)?us:void 0)),X!==void 0){if(X===null){j.removeAttr(P,H);return}return be&&"set"in be&&(le=be.set(P,X,H))!==void 0?le:(P.setAttribute(H,X+""),X)}return be&&"get"in be&&(le=be.get(P,H))!==null?le:(le=j.find.attr(P,H),le==null?void 0:le)}},attrHooks:{type:{set:function(P,H){if(!re.radioValue&&H==="radio"&&ke(P,"input")){var X=P.value;return P.setAttribute("type",H),X&&(P.value=X),H}}}},removeAttr:function(P,H){var X,le=0,be=H&&H.match(On);if(be&&P.nodeType===1)for(;X=be[le++];)P.removeAttribute(X)}}),us={set:function(P,H,X){return H===!1?j.removeAttr(P,X):P.setAttribute(X,X),X}},j.each(j.expr.match.bool.source.match(/\w+/g),function(K,P){var H=Ki[P]||j.find.attr;Ki[P]=function(X,le,be){var xe,Ge,it=le.toLowerCase();return be||(Ge=Ki[it],Ki[it]=xe,xe=H(X,le,be)!=null?it:null,Ki[it]=Ge),xe}});var Eu=/^(?:input|select|textarea|button)$/i,su=/^(?:a|area)$/i;j.fn.extend({prop:function(P,H){return yt(this,j.prop,P,H,arguments.length>1)},removeProp:function(P){return this.each(function(){delete this[j.propFix[P]||P]})}}),j.extend({prop:function(P,H,X){var le,be,xe=P.nodeType;if(!(xe===3||xe===8||xe===2))return(xe!==1||!j.isXMLDoc(P))&&(H=j.propFix[H]||H,be=j.propHooks[H]),X!==void 0?be&&"set"in be&&(le=be.set(P,X,H))!==void 0?le:P[H]=X:be&&"get"in be&&(le=be.get(P,H))!==null?le:P[H]},propHooks:{tabIndex:{get:function(P){var H=j.find.attr(P,"tabindex");return H?parseInt(H,10):Eu.test(P.nodeName)||su.test(P.nodeName)&&P.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),re.optSelected||(j.propHooks.selected={get:function(P){var H=P.parentNode;return H&&H.parentNode&&H.parentNode.selectedIndex,null},set:function(P){var H=P.parentNode;H&&(H.selectedIndex,H.parentNode&&H.parentNode.selectedIndex)}}),j.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){j.propFix[this.toLowerCase()]=this});function Zs(K){var P=K.match(On)||[];return P.join(" ")}function Is(K){return K.getAttribute&&K.getAttribute("class")||""}function gl(K){return Array.isArray(K)?K:typeof K=="string"?K.match(On)||[]:[]}j.fn.extend({addClass:function(P){var H,X,le,be,xe,Ge;return J(P)?this.each(function(it){j(this).addClass(P.call(this,it,Is(this)))}):(H=gl(P),H.length?this.each(function(){if(le=Is(this),X=this.nodeType===1&&" "+Zs(le)+" ",X){for(xe=0;xe<H.length;xe++)be=H[xe],X.indexOf(" "+be+" ")<0&&(X+=be+" ");Ge=Zs(X),le!==Ge&&this.setAttribute("class",Ge)}}):this)},removeClass:function(P){var H,X,le,be,xe,Ge;return J(P)?this.each(function(it){j(this).removeClass(P.call(this,it,Is(this)))}):arguments.length?(H=gl(P),H.length?this.each(function(){if(le=Is(this),X=this.nodeType===1&&" "+Zs(le)+" ",X){for(xe=0;xe<H.length;xe++)for(be=H[xe];X.indexOf(" "+be+" ")>-1;)X=X.replace(" "+be+" "," ");Ge=Zs(X),le!==Ge&&this.setAttribute("class",Ge)}}):this):this.attr("class","")},toggleClass:function(P,H){var X,le,be,xe,Ge=typeof P,it=Ge==="string"||Array.isArray(P);return J(P)?this.each(function(bt){j(this).toggleClass(P.call(this,bt,Is(this),H),H)}):typeof H=="boolean"&&it?H?this.addClass(P):this.removeClass(P):(X=gl(P),this.each(function(){if(it)for(xe=j(this),be=0;be<X.length;be++)le=X[be],xe.hasClass(le)?xe.removeClass(le):xe.addClass(le);else(P===void 0||Ge==="boolean")&&(le=Is(this),le&&me.set(this,"__className__",le),this.setAttribute&&this.setAttribute("class",le||P===!1?"":me.get(this,"__className__")||""))}))},hasClass:function(P){var H,X,le=0;for(H=" "+P+" ";X=this[le++];)if(X.nodeType===1&&(" "+Zs(Is(X))+" ").indexOf(H)>-1)return!0;return!1}});var Vl=/\r/g;j.fn.extend({val:function(P){var H,X,le,be=this[0];return arguments.length?(le=J(P),this.each(function(xe){var Ge;this.nodeType===1&&(le?Ge=P.call(this,xe,j(this).val()):Ge=P,Ge==null?Ge="":typeof Ge=="number"?Ge+="":Array.isArray(Ge)&&(Ge=j.map(Ge,function(it){return it==null?"":it+""})),H=j.valHooks[this.type]||j.valHooks[this.nodeName.toLowerCase()],(!H||!("set"in H)||H.set(this,Ge,"value")===void 0)&&(this.value=Ge))})):be?(H=j.valHooks[be.type]||j.valHooks[be.nodeName.toLowerCase()],H&&"get"in H&&(X=H.get(be,"value"))!==void 0?X:(X=be.value,typeof X=="string"?X.replace(Vl,""):X==null?"":X)):void 0}}),j.extend({valHooks:{option:{get:function(P){var H=j.find.attr(P,"value");return H!=null?H:Zs(j.text(P))}},select:{get:function(P){var H,X,le,be=P.options,xe=P.selectedIndex,Ge=P.type==="select-one",it=Ge?null:[],bt=Ge?xe+1:be.length;for(xe<0?le=bt:le=Ge?xe:0;le<bt;le++)if(X=be[le],(X.selected||le===xe)&&!X.disabled&&(!X.parentNode.disabled||!ke(X.parentNode,"optgroup"))){if(H=j(X).val(),Ge)return H;it.push(H)}return it},set:function(P,H){for(var X,le,be=P.options,xe=j.makeArray(H),Ge=be.length;Ge--;)le=be[Ge],(le.selected=j.inArray(j.valHooks.option.get(le),xe)>-1)&&(X=!0);return X||(P.selectedIndex=-1),xe}}}}),j.each(["radio","checkbox"],function(){j.valHooks[this]={set:function(P,H){if(Array.isArray(H))return P.checked=j.inArray(j(P).val(),H)>-1}},re.checkOn||(j.valHooks[this].get=function(K){return K.getAttribute("value")===null?"on":K.value})});var uu=S.location,Rs={guid:Date.now()},el=/\?/;j.parseXML=function(K){var P,H;if(!K||typeof K!="string")return null;try{P=new S.DOMParser().parseFromString(K,"text/xml")}catch(X){}return H=P&&P.getElementsByTagName("parsererror")[0],(!P||H)&&j.error("Invalid XML: "+(H?j.map(H.childNodes,function(X){return X.textContent}).join(`
`):K)),P};var tl=/^(?:focusinfocus|focusoutblur)$/,nl=function(P){P.stopPropagation()};j.extend(j.event,{trigger:function(P,H,X,le){var be,xe,Ge,it,bt,bn,_n,Or,Cn=[X||G],ar=ee.call(P,"type")?P.type:P,Ca=ee.call(P,"namespace")?P.namespace.split("."):[];if(xe=Or=Ge=X=X||G,!(X.nodeType===3||X.nodeType===8)&&!tl.test(ar+j.event.triggered)&&(ar.indexOf(".")>-1&&(Ca=ar.split("."),ar=Ca.shift(),Ca.sort()),bt=ar.indexOf(":")<0&&"on"+ar,P=P[j.expando]?P:new j.Event(ar,typeof P=="object"&&P),P.isTrigger=le?2:3,P.namespace=Ca.join("."),P.rnamespace=P.namespace?new RegExp("(^|\\.)"+Ca.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,P.result=void 0,P.target||(P.target=X),H=H==null?[P]:j.makeArray(H,[P]),_n=j.event.special[ar]||{},!(!le&&_n.trigger&&_n.trigger.apply(X,H)===!1))){if(!le&&!_n.noBubble&&!ce(X)){for(it=_n.delegateType||ar,tl.test(it+ar)||(xe=xe.parentNode);xe;xe=xe.parentNode)Cn.push(xe),Ge=xe;Ge===(X.ownerDocument||G)&&Cn.push(Ge.defaultView||Ge.parentWindow||S)}for(be=0;(xe=Cn[be++])&&!P.isPropagationStopped();)Or=xe,P.type=be>1?it:_n.bindType||ar,bn=(me.get(xe,"events")||Object.create(null))[P.type]&&me.get(xe,"handle"),bn&&bn.apply(xe,H),bn=bt&&xe[bt],bn&&bn.apply&&vt(xe)&&(P.result=bn.apply(xe,H),P.result===!1&&P.preventDefault());return P.type=ar,!le&&!P.isDefaultPrevented()&&(!_n._default||_n._default.apply(Cn.pop(),H)===!1)&&vt(X)&&bt&&J(X[ar])&&!ce(X)&&(Ge=X[bt],Ge&&(X[bt]=null),j.event.triggered=ar,P.isPropagationStopped()&&Or.addEventListener(ar,nl),X[ar](),P.isPropagationStopped()&&Or.removeEventListener(ar,nl),j.event.triggered=void 0,Ge&&(X[bt]=Ge)),P.result}},simulate:function(P,H,X){var le=j.extend(new j.Event,X,{type:P,isSimulated:!0});j.event.trigger(le,null,H)}}),j.fn.extend({trigger:function(P,H){return this.each(function(){j.event.trigger(P,H,this)})},triggerHandler:function(P,H){var X=this[0];if(X)return j.event.trigger(P,H,X,!0)}});var Hl=/\[\]$/,Ts=/\r?\n/g,Wl=/^(?:submit|button|image|reset|file)$/i,Ou=/^(?:input|select|textarea|keygen)/i;function Nu(K,P,H,X){var le;if(Array.isArray(P))j.each(P,function(be,xe){H||Hl.test(K)?X(K,xe):Nu(K+"["+(typeof xe=="object"&&xe!=null?be:"")+"]",xe,H,X)});else if(!H&&se(P)==="object")for(le in P)Nu(K+"["+le+"]",P[le],H,X);else X(K,P)}j.param=function(K,P){var H,X=[],le=function(xe,Ge){var it=J(Ge)?Ge():Ge;X[X.length]=encodeURIComponent(xe)+"="+encodeURIComponent(it==null?"":it)};if(K==null)return"";if(Array.isArray(K)||K.jquery&&!j.isPlainObject(K))j.each(K,function(){le(this.name,this.value)});else for(H in K)Nu(H,K[H],P,le);return X.join("&")},j.fn.extend({serialize:function(){return j.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var P=j.prop(this,"elements");return P?j.makeArray(P):this}).filter(function(){var P=this.type;return this.name&&!j(this).is(":disabled")&&Ou.test(this.nodeName)&&!Wl.test(P)&&(this.checked||!ri.test(P))}).map(function(P,H){var X=j(this).val();return X==null?null:Array.isArray(X)?j.map(X,function(le){return{name:H.name,value:le.replace(Ts,`\r
`)}}):{name:H.name,value:X.replace(Ts,`\r
`)}}).get()}});var Qs=/%20/g,rl=/#.*$/,sf=/([?&])_=[^&]*/,ml=/^(.*?):[ \t]*([^\r\n]*)$/mg,al=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pc=/^(?:GET|HEAD)$/,Et=/^\/\//,mt={},wt={},$t="*/".concat("*"),_t=G.createElement("a");_t.href=uu.href;function xn(K){return function(P,H){typeof P!="string"&&(H=P,P="*");var X,le=0,be=P.toLowerCase().match(On)||[];if(J(H))for(;X=be[le++];)X[0]==="+"?(X=X.slice(1)||"*",(K[X]=K[X]||[]).unshift(H)):(K[X]=K[X]||[]).push(H)}}function Ln(K,P,H,X){var le={},be=K===wt;function xe(Ge){var it;return le[Ge]=!0,j.each(K[Ge]||[],function(bt,bn){var _n=bn(P,H,X);if(typeof _n=="string"&&!be&&!le[_n])return P.dataTypes.unshift(_n),xe(_n),!1;if(be)return!(it=_n)}),it}return xe(P.dataTypes[0])||!le["*"]&&xe("*")}function Yn(K,P){var H,X,le=j.ajaxSettings.flatOptions||{};for(H in P)P[H]!==void 0&&((le[H]?K:X||(X={}))[H]=P[H]);return X&&j.extend(!0,K,X),K}function Ar(K,P,H){for(var X,le,be,xe,Ge=K.contents,it=K.dataTypes;it[0]==="*";)it.shift(),X===void 0&&(X=K.mimeType||P.getResponseHeader("Content-Type"));if(X){for(le in Ge)if(Ge[le]&&Ge[le].test(X)){it.unshift(le);break}}if(it[0]in H)be=it[0];else{for(le in H){if(!it[0]||K.converters[le+" "+it[0]]){be=le;break}xe||(xe=le)}be=be||xe}if(be)return be!==it[0]&&it.unshift(be),H[be]}function er(K,P,H,X){var le,be,xe,Ge,it,bt={},bn=K.dataTypes.slice();if(bn[1])for(xe in K.converters)bt[xe.toLowerCase()]=K.converters[xe];for(be=bn.shift();be;)if(K.responseFields[be]&&(H[K.responseFields[be]]=P),!it&&X&&K.dataFilter&&(P=K.dataFilter(P,K.dataType)),it=be,be=bn.shift(),be){if(be==="*")be=it;else if(it!=="*"&&it!==be){if(xe=bt[it+" "+be]||bt["* "+be],!xe){for(le in bt)if(Ge=le.split(" "),Ge[1]===be&&(xe=bt[it+" "+Ge[0]]||bt["* "+Ge[0]],xe)){xe===!0?xe=bt[le]:bt[le]!==!0&&(be=Ge[0],bn.unshift(Ge[1]));break}}if(xe!==!0)if(xe&&K.throws)P=xe(P);else try{P=xe(P)}catch(_n){return{state:"parsererror",error:xe?_n:"No conversion from "+it+" to "+be}}}}return{state:"success",data:P}}j.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:uu.href,type:"GET",isLocal:al.test(uu.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":j.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(P,H){return H?Yn(Yn(P,j.ajaxSettings),H):Yn(j.ajaxSettings,P)},ajaxPrefilter:xn(mt),ajaxTransport:xn(wt),ajax:function(P,H){typeof P=="object"&&(H=P,P=void 0),H=H||{};var X,le,be,xe,Ge,it,bt,bn,_n,Or,Cn=j.ajaxSetup({},H),ar=Cn.context||Cn,Ca=Cn.context&&(ar.nodeType||ar.jquery)?j(ar):j.event,Xr=j.Deferred(),Fi=j.Callbacks("once memory"),Qo=Cn.statusCode||{},lo={},Ho={},Ao="canceled",Ia={readyState:0,getResponseHeader:function(Yi){var Ji;if(bt){if(!xe)for(xe={};Ji=ml.exec(be);)xe[Ji[1].toLowerCase()+" "]=(xe[Ji[1].toLowerCase()+" "]||[]).concat(Ji[2]);Ji=xe[Yi.toLowerCase()+" "]}return Ji==null?null:Ji.join(", ")},getAllResponseHeaders:function(){return bt?be:null},setRequestHeader:function(Yi,Ji){return bt==null&&(Yi=Ho[Yi.toLowerCase()]=Ho[Yi.toLowerCase()]||Yi,lo[Yi]=Ji),this},overrideMimeType:function(Yi){return bt==null&&(Cn.mimeType=Yi),this},statusCode:function(Yi){var Ji;if(Yi)if(bt)Ia.always(Yi[Ia.status]);else for(Ji in Yi)Qo[Ji]=[Qo[Ji],Yi[Ji]];return this},abort:function(Yi){var Ji=Yi||Ao;return X&&X.abort(Ji),Ns(0,Ji),this}};if(Xr.promise(Ia),Cn.url=((P||Cn.url||uu.href)+"").replace(Et,uu.protocol+"//"),Cn.type=H.method||H.type||Cn.method||Cn.type,Cn.dataTypes=(Cn.dataType||"*").toLowerCase().match(On)||[""],Cn.crossDomain==null){it=G.createElement("a");try{it.href=Cn.url,it.href=it.href,Cn.crossDomain=_t.protocol+"//"+_t.host!=it.protocol+"//"+it.host}catch(Ai){Cn.crossDomain=!0}}if(Cn.data&&Cn.processData&&typeof Cn.data!="string"&&(Cn.data=j.param(Cn.data,Cn.traditional)),Ln(mt,Cn,H,Ia),bt)return Ia;bn=j.event&&Cn.global,bn&&j.active++==0&&j.event.trigger("ajaxStart"),Cn.type=Cn.type.toUpperCase(),Cn.hasContent=!pc.test(Cn.type),le=Cn.url.replace(rl,""),Cn.hasContent?Cn.data&&Cn.processData&&(Cn.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(Cn.data=Cn.data.replace(Qs,"+")):(Or=Cn.url.slice(le.length),Cn.data&&(Cn.processData||typeof Cn.data=="string")&&(le+=(el.test(le)?"&":"?")+Cn.data,delete Cn.data),Cn.cache===!1&&(le=le.replace(sf,"$1"),Or=(el.test(le)?"&":"?")+"_="+Rs.guid+++Or),Cn.url=le+Or),Cn.ifModified&&(j.lastModified[le]&&Ia.setRequestHeader("If-Modified-Since",j.lastModified[le]),j.etag[le]&&Ia.setRequestHeader("If-None-Match",j.etag[le])),(Cn.data&&Cn.hasContent&&Cn.contentType!==!1||H.contentType)&&Ia.setRequestHeader("Content-Type",Cn.contentType),Ia.setRequestHeader("Accept",Cn.dataTypes[0]&&Cn.accepts[Cn.dataTypes[0]]?Cn.accepts[Cn.dataTypes[0]]+(Cn.dataTypes[0]!=="*"?", "+$t+"; q=0.01":""):Cn.accepts["*"]);for(_n in Cn.headers)Ia.setRequestHeader(_n,Cn.headers[_n]);if(Cn.beforeSend&&(Cn.beforeSend.call(ar,Ia,Cn)===!1||bt))return Ia.abort();if(Ao="abort",Fi.add(Cn.complete),Ia.done(Cn.success),Ia.fail(Cn.error),X=Ln(wt,Cn,H,Ia),!X)Ns(-1,"No Transport");else{if(Ia.readyState=1,bn&&Ca.trigger("ajaxSend",[Ia,Cn]),bt)return Ia;Cn.async&&Cn.timeout>0&&(Ge=S.setTimeout(function(){Ia.abort("timeout")},Cn.timeout));try{bt=!1,X.send(lo,Ns)}catch(Ai){if(bt)throw Ai;Ns(-1,Ai)}}function Ns(Ai,Yi,Ji,yl){var bo,ls,wu,xu,qs,Wo=Yi;bt||(bt=!0,Ge&&S.clearTimeout(Ge),X=void 0,be=yl||"",Ia.readyState=Ai>0?4:0,bo=Ai>=200&&Ai<300||Ai===304,Ji&&(xu=Ar(Cn,Ia,Ji)),!bo&&j.inArray("script",Cn.dataTypes)>-1&&j.inArray("json",Cn.dataTypes)<0&&(Cn.converters["text script"]=function(){}),xu=er(Cn,xu,Ia,bo),bo?(Cn.ifModified&&(qs=Ia.getResponseHeader("Last-Modified"),qs&&(j.lastModified[le]=qs),qs=Ia.getResponseHeader("etag"),qs&&(j.etag[le]=qs)),Ai===204||Cn.type==="HEAD"?Wo="nocontent":Ai===304?Wo="notmodified":(Wo=xu.state,ls=xu.data,wu=xu.error,bo=!wu)):(wu=Wo,(Ai||!Wo)&&(Wo="error",Ai<0&&(Ai=0))),Ia.status=Ai,Ia.statusText=(Yi||Wo)+"",bo?Xr.resolveWith(ar,[ls,Wo,Ia]):Xr.rejectWith(ar,[Ia,Wo,wu]),Ia.statusCode(Qo),Qo=void 0,bn&&Ca.trigger(bo?"ajaxSuccess":"ajaxError",[Ia,Cn,bo?ls:wu]),Fi.fireWith(ar,[Ia,Wo]),bn&&(Ca.trigger("ajaxComplete",[Ia,Cn]),--j.active||j.event.trigger("ajaxStop")))}return Ia},getJSON:function(P,H,X){return j.get(P,H,X,"json")},getScript:function(P,H){return j.get(P,void 0,H,"script")}}),j.each(["get","post"],function(K,P){j[P]=function(H,X,le,be){return J(X)&&(be=be||le,le=X,X=void 0),j.ajax(j.extend({url:H,type:P,dataType:be,data:X,success:le},j.isPlainObject(H)&&H))}}),j.ajaxPrefilter(function(K){var P;for(P in K.headers)P.toLowerCase()==="content-type"&&(K.contentType=K.headers[P]||"")}),j._evalUrl=function(K,P,H){return j.ajax({url:K,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(le){j.globalEval(le,P,H)}})},j.fn.extend({wrapAll:function(P){var H;return this[0]&&(J(P)&&(P=P.call(this[0])),H=j(P,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&H.insertBefore(this[0]),H.map(function(){for(var X=this;X.firstElementChild;)X=X.firstElementChild;return X}).append(this)),this},wrapInner:function(P){return J(P)?this.each(function(H){j(this).wrapInner(P.call(this,H))}):this.each(function(){var H=j(this),X=H.contents();X.length?X.wrapAll(P):H.append(P)})},wrap:function(P){var H=J(P);return this.each(function(X){j(this).wrapAll(H?P.call(this,X):P)})},unwrap:function(P){return this.parent(P).not("body").each(function(){j(this).replaceWith(this.childNodes)}),this}}),j.expr.pseudos.hidden=function(K){return!j.expr.pseudos.visible(K)},j.expr.pseudos.visible=function(K){return!!(K.offsetWidth||K.offsetHeight||K.getClientRects().length)},j.ajaxSettings.xhr=function(){try{return new S.XMLHttpRequest}catch(K){}};var Mr={0:200,1223:204},rr=j.ajaxSettings.xhr();re.cors=!!rr&&"withCredentials"in rr,re.ajax=rr=!!rr,j.ajaxTransport(function(K){var P,H;if(re.cors||rr&&!K.crossDomain)return{send:function(le,be){var xe,Ge=K.xhr();if(Ge.open(K.type,K.url,K.async,K.username,K.password),K.xhrFields)for(xe in K.xhrFields)Ge[xe]=K.xhrFields[xe];K.mimeType&&Ge.overrideMimeType&&Ge.overrideMimeType(K.mimeType),!K.crossDomain&&!le["X-Requested-With"]&&(le["X-Requested-With"]="XMLHttpRequest");for(xe in le)Ge.setRequestHeader(xe,le[xe]);P=function(bt){return function(){P&&(P=H=Ge.onload=Ge.onerror=Ge.onabort=Ge.ontimeout=Ge.onreadystatechange=null,bt==="abort"?Ge.abort():bt==="error"?typeof Ge.status!="number"?be(0,"error"):be(Ge.status,Ge.statusText):be(Mr[Ge.status]||Ge.status,Ge.statusText,(Ge.responseType||"text")!=="text"||typeof Ge.responseText!="string"?{binary:Ge.response}:{text:Ge.responseText},Ge.getAllResponseHeaders()))}},Ge.onload=P(),H=Ge.onerror=Ge.ontimeout=P("error"),Ge.onabort!==void 0?Ge.onabort=H:Ge.onreadystatechange=function(){Ge.readyState===4&&S.setTimeout(function(){P&&H()})},P=P("abort");try{Ge.send(K.hasContent&&K.data||null)}catch(it){if(P)throw it}},abort:function(){P&&P()}}}),j.ajaxPrefilter(function(K){K.crossDomain&&(K.contents.script=!1)}),j.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(P){return j.globalEval(P),P}}}),j.ajaxPrefilter("script",function(K){K.cache===void 0&&(K.cache=!1),K.crossDomain&&(K.type="GET")}),j.ajaxTransport("script",function(K){if(K.crossDomain||K.scriptAttrs){var P,H;return{send:function(le,be){P=j("<script>").attr(K.scriptAttrs||{}).prop({charset:K.scriptCharset,src:K.url}).on("load error",H=function(Ge){P.remove(),H=null,Ge&&be(Ge.type==="error"?404:200,Ge.type)}),G.head.appendChild(P[0])},abort:function(){H&&H()}}}});var Rr=[],Dr=/(=)\?(?=&|$)|\?\?/;j.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var P=Rr.pop()||j.expando+"_"+Rs.guid++;return this[P]=!0,P}}),j.ajaxPrefilter("json jsonp",function(K,P,H){var X,le,be,xe=K.jsonp!==!1&&(Dr.test(K.url)?"url":typeof K.data=="string"&&(K.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Dr.test(K.data)&&"data");if(xe||K.dataTypes[0]==="jsonp")return X=K.jsonpCallback=J(K.jsonpCallback)?K.jsonpCallback():K.jsonpCallback,xe?K[xe]=K[xe].replace(Dr,"$1"+X):K.jsonp!==!1&&(K.url+=(el.test(K.url)?"&":"?")+K.jsonp+"="+X),K.converters["script json"]=function(){return be||j.error(X+" was not called"),be[0]},K.dataTypes[0]="json",le=S[X],S[X]=function(){be=arguments},H.always(function(){le===void 0?j(S).removeProp(X):S[X]=le,K[X]&&(K.jsonpCallback=P.jsonpCallback,Rr.push(X)),be&&J(le)&&le(be[0]),be=le=void 0}),"script"}),re.createHTMLDocument=function(){var K=G.implementation.createHTMLDocument("").body;return K.innerHTML="<form></form><form></form>",K.childNodes.length===2}(),j.parseHTML=function(K,P,H){if(typeof K!="string")return[];typeof P=="boolean"&&(H=P,P=!1);var X,le,be;return P||(re.createHTMLDocument?(P=G.implementation.createHTMLDocument(""),X=P.createElement("base"),X.href=G.location.href,P.head.appendChild(X)):P=G),le=pe.exec(K),be=!H&&[],le?[P.createElement(le[1])]:(le=mo([K],P,be),be&&be.length&&j(be).remove(),j.merge([],le.childNodes))},j.fn.load=function(K,P,H){var X,le,be,xe=this,Ge=K.indexOf(" ");return Ge>-1&&(X=Zs(K.slice(Ge)),K=K.slice(0,Ge)),J(P)?(H=P,P=void 0):P&&typeof P=="object"&&(le="POST"),xe.length>0&&j.ajax({url:K,type:le||"GET",dataType:"html",data:P}).done(function(it){be=arguments,xe.html(X?j("<div>").append(j.parseHTML(it)).find(X):it)}).always(H&&function(it,bt){xe.each(function(){H.apply(this,be||[it.responseText,bt,it])})}),this},j.expr.pseudos.animated=function(K){return j.grep(j.timers,function(P){return K===P.elem}).length},j.offset={setOffset:function(P,H,X){var le,be,xe,Ge,it,bt,bn,_n=j.css(P,"position"),Or=j(P),Cn={};_n==="static"&&(P.style.position="relative"),it=Or.offset(),xe=j.css(P,"top"),bt=j.css(P,"left"),bn=(_n==="absolute"||_n==="fixed")&&(xe+bt).indexOf("auto")>-1,bn?(le=Or.position(),Ge=le.top,be=le.left):(Ge=parseFloat(xe)||0,be=parseFloat(bt)||0),J(H)&&(H=H.call(P,X,j.extend({},it))),H.top!=null&&(Cn.top=H.top-it.top+Ge),H.left!=null&&(Cn.left=H.left-it.left+be),"using"in H?H.using.call(P,Cn):Or.css(Cn)}},j.fn.extend({offset:function(P){if(arguments.length)return P===void 0?this:this.each(function(be){j.offset.setOffset(this,P,be)});var H,X,le=this[0];if(!!le)return le.getClientRects().length?(H=le.getBoundingClientRect(),X=le.ownerDocument.defaultView,{top:H.top+X.pageYOffset,left:H.left+X.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var P,H,X,le=this[0],be={top:0,left:0};if(j.css(le,"position")==="fixed")H=le.getBoundingClientRect();else{for(H=this.offset(),X=le.ownerDocument,P=le.offsetParent||X.documentElement;P&&(P===X.body||P===X.documentElement)&&j.css(P,"position")==="static";)P=P.parentNode;P&&P!==le&&P.nodeType===1&&(be=j(P).offset(),be.top+=j.css(P,"borderTopWidth",!0),be.left+=j.css(P,"borderLeftWidth",!0))}return{top:H.top-be.top-j.css(le,"marginTop",!0),left:H.left-be.left-j.css(le,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var P=this.offsetParent;P&&j.css(P,"position")==="static";)P=P.offsetParent;return P||tr})}}),j.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(K,P){var H=P==="pageYOffset";j.fn[K]=function(X){return yt(this,function(le,be,xe){var Ge;if(ce(le)?Ge=le:le.nodeType===9&&(Ge=le.defaultView),xe===void 0)return Ge?Ge[P]:le[be];Ge?Ge.scrollTo(H?Ge.pageXOffset:xe,H?xe:Ge.pageYOffset):le[be]=xe},K,X,arguments.length)}}),j.each(["top","left"],function(K,P){j.cssHooks[P]=_a(re.pixelPosition,function(H,X){if(X)return X=bi(H,P),In.test(X)?j(H).position()[P]+"px":X})}),j.each({Height:"height",Width:"width"},function(K,P){j.each({padding:"inner"+K,content:P,"":"outer"+K},function(H,X){j.fn[X]=function(le,be){var xe=arguments.length&&(H||typeof le!="boolean"),Ge=H||(le===!0||be===!0?"margin":"border");return yt(this,function(it,bt,bn){var _n;return ce(it)?X.indexOf("outer")===0?it["inner"+K]:it.document.documentElement["client"+K]:it.nodeType===9?(_n=it.documentElement,Math.max(it.body["scroll"+K],_n["scroll"+K],it.body["offset"+K],_n["offset"+K],_n["client"+K])):bn===void 0?j.css(it,bt,Ge):j.style(it,bt,bn,Ge)},P,xe?le:void 0,xe)}})}),j.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(K,P){j.fn[P]=function(H){return this.on(P,H)}}),j.fn.extend({bind:function(P,H,X){return this.on(P,null,H,X)},unbind:function(P,H){return this.off(P,null,H)},delegate:function(P,H,X,le){return this.on(H,P,X,le)},undelegate:function(P,H,X){return arguments.length===1?this.off(P,"**"):this.off(H,P||"**",X)},hover:function(P,H){return this.mouseenter(P).mouseleave(H||P)}}),j.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(K,P){j.fn[P]=function(H,X){return arguments.length>0?this.on(P,null,H,X):this.trigger(P)}});var qr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;j.proxy=function(K,P){var H,X,le;if(typeof P=="string"&&(H=K[P],P=K,K=H),!!J(K))return X=M.call(arguments,2),le=function(){return K.apply(P||this,X.concat(M.call(arguments)))},le.guid=K.guid=K.guid||j.guid++,le},j.holdReady=function(K){K?j.readyWait++:j.ready(!0)},j.isArray=Array.isArray,j.parseJSON=JSON.parse,j.nodeName=ke,j.isFunction=J,j.isWindow=ce,j.camelCase=dt,j.type=se,j.now=Date.now,j.isNumeric=function(K){var P=j.type(K);return(P==="number"||P==="string")&&!isNaN(K-parseFloat(K))},j.trim=function(K){return K==null?"":(K+"").replace(qr,"$1")},B=[],p=function(){return j}.apply(R,B),p!==void 0&&(ge.exports=p);var qa=S.jQuery,Gr=S.$;return j.noConflict=function(K){return S.$===j&&(S.$=Gr),K&&S.jQuery===j&&(S.jQuery=qa),j},typeof E=="undefined"&&(S.jQuery=S.$=j),j})},EbDI:function(ge,R){function h(B){if(typeof Symbol!="undefined"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},Efrf:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SwatchesGroup=void 0;var B=h("q1tI"),p=V(B),S=h("/FUP"),E=V(S),A=h("3WF5"),k=V(A),M=h("BmQL"),U=V(M);function V(W){return W&&W.__esModule?W:{default:W}}var $=R.SwatchesGroup=function(Y){var ee=Y.onClick,ne=Y.onSwatchHover,ie=Y.group,re=Y.active,J=(0,E.default)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return p.default.createElement("div",{style:J.group},(0,k.default)(ie,function(ce,G){return p.default.createElement(U.default,{key:ce,color:ce,active:ce.toLowerCase()===re,first:G===0,last:G===ie.length-1,onClick:ee,onSwatchHover:ne})}))};R.default=$},Ej2v:function(ge,R){ge.exports=h;function h(){var B=new Float32Array(2);return B[0]=0,B[1]=0,B}},F4jT:function(ge,R,h){ge.exports=p;var B=h("NEPx");function p(S,E){var A=S[0],k=S[1],M=E[0],U=E[1];return Math.abs(A-M)<=B*Math.max(1,Math.abs(A),Math.abs(M))&&Math.abs(k-U)<=B*Math.max(1,Math.abs(k),Math.abs(U))}},FKLu:function(ge,R,h){ge.exports=p;var B=h("Ej2v")();function p(S,E,A,k,M,U){var V,$;for(E||(E=2),A||(A=0),k?$=Math.min(k*E+A,S.length):$=S.length,V=A;V<$;V+=E)B[0]=S[V],B[1]=S[V+1],M(B,B,U),S[V]=B[0],S[V+1]=B[1];return S}},FV85:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.TargetTypeEnum=R.BindingTypeEnum=R.BindingScopeEnum=void 0;var B={Request:"Request",Singleton:"Singleton",Transient:"Transient"};R.BindingScopeEnum=B;var p={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};R.BindingTypeEnum=p;var S={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"};R.TargetTypeEnum=S},FXSy:function(ge,R){},"FbP/":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Photoshop=void 0;var B=function(){function de(ke,he){for(var Oe=0;Oe<he.length;Oe++){var We=he[Oe];We.enumerable=We.enumerable||!1,We.configurable=!0,"value"in We&&(We.writable=!0),Object.defineProperty(ke,We.key,We)}}return function(ke,he,Oe){return he&&de(ke.prototype,he),Oe&&de(ke,Oe),ke}}(),p=h("q1tI"),S=fe(p),E=h("17x9"),A=fe(E),k=h("/FUP"),M=fe(k),U=h("QkVN"),V=fe(U),$=h("TM95"),W=h("81by"),Y=fe(W),ee=h("BKMn"),ne=fe(ee),ie=h("sVjb"),re=fe(ie),J=h("DRdP"),ce=fe(J),G=h("2zpl"),Z=fe(G);function fe(de){return de&&de.__esModule?de:{default:de}}function se(de,ke){if(!(de instanceof ke))throw new TypeError("Cannot call a class as a function")}function ve(de,ke){if(!de)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ke&&(typeof ke=="object"||typeof ke=="function")?ke:de}function ae(de,ke){if(typeof ke!="function"&&ke!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ke);de.prototype=Object.create(ke&&ke.prototype,{constructor:{value:de,enumerable:!1,writable:!0,configurable:!0}}),ke&&(Object.setPrototypeOf?Object.setPrototypeOf(de,ke):de.__proto__=ke)}var j=R.Photoshop=function(de){ae(ke,de);function ke(he){se(this,ke);var Oe=ve(this,(ke.__proto__||Object.getPrototypeOf(ke)).call(this));return Oe.state={currentColor:he.hex},Oe}return B(ke,[{key:"render",value:function(){var Oe=this.props,We=Oe.styles,D=We===void 0?{}:We,je=Oe.className,pt=je===void 0?"":je,nt=(0,M.default)((0,V.default)({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},D));return S.default.createElement("div",{style:nt.picker,className:"photoshop-picker "+pt},S.default.createElement("div",{style:nt.head},this.props.header),S.default.createElement("div",{style:nt.body,className:"flexbox-fix"},S.default.createElement("div",{style:nt.saturation},S.default.createElement($.Saturation,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:ne.default,onChange:this.props.onChange})),S.default.createElement("div",{style:nt.hue},S.default.createElement($.Hue,{direction:"vertical",hsl:this.props.hsl,pointer:re.default,onChange:this.props.onChange})),S.default.createElement("div",{style:nt.controls},S.default.createElement("div",{style:nt.top,className:"flexbox-fix"},S.default.createElement("div",{style:nt.previews},S.default.createElement(Z.default,{rgb:this.props.rgb,currentColor:this.state.currentColor})),S.default.createElement("div",{style:nt.actions},S.default.createElement(ce.default,{label:"OK",onClick:this.props.onAccept,active:!0}),S.default.createElement(ce.default,{label:"Cancel",onClick:this.props.onCancel}),S.default.createElement(Y.default,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),ke}(S.default.Component);j.propTypes={header:A.default.string,styles:A.default.object},j.defaultProps={header:"Color Picker",styles:{}},R.default=(0,$.ColorWrap)(j)},FlHB:function(ge,R,h){"use strict";h.d(R,"a",function(){return $e});var B=h("o0o1"),p=h.n(B),S=h("yXPU"),E=h.n(S),A=h("yG8O"),k=h.n(A),M=h("lwsE"),U=h.n(M),V=h("W8MJ"),$=h.n(V),W=h("U+yc"),Y=h.n(W),ee=h("1ABj"),ne=h.n(ee),ie=h("4cb6"),re=h.n(ie),J=h("+uE7"),ce=h("+xCn"),G=h("94HZ"),Z,fe,se,ve,ae,j,de,ke,he,Oe,We,D,je;function pt(jt,Be){var pe;if(typeof Symbol=="undefined"||jt[Symbol.iterator]==null){if(Array.isArray(jt)||(pe=nt(jt))||Be&&jt&&typeof jt.length=="number"){pe&&(jt=pe);var un=0,ln=function(){};return{s:ln,n:function(){return un>=jt.length?{done:!0}:{done:!1,value:jt[un++]}},e:function(hn){throw hn},f:ln}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Fn=!0,Ft=!1,Pn;return{s:function(){pe=jt[Symbol.iterator]()},n:function(){var hn=pe.next();return Fn=hn.done,hn},e:function(hn){Ft=!0,Pn=hn},f:function(){try{!Fn&&pe.return!=null&&pe.return()}finally{if(Ft)throw Pn}}}}function nt(jt,Be){if(!!jt){if(typeof jt=="string")return Lt(jt,Be);var pe=Object.prototype.toString.call(jt).slice(8,-1);if(pe==="Object"&&jt.constructor&&(pe=jt.constructor.name),pe==="Map"||pe==="Set")return Array.from(jt);if(pe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(pe))return Lt(jt,Be)}}function Lt(jt,Be){(Be==null||Be>jt.length)&&(Be=jt.length);for(var pe=0,un=new Array(Be);pe<Be;pe++)un[pe]=jt[pe];return un}var Gt={NONE:0,ENCODE:1,HIGHLIGHT:2},$e=(Z=Object(ie.injectable)(),fe=Object(ie.inject)(J.a.RenderEngine),se=Object(ie.inject)(J.a.ResourcePool),ve=Object(ie.inject)(J.a.RenderPassFactory),ae=Object(ie.inject)(J.a.MeshComponentManager),Z(j=(de=(je=D=function(){function jt(){var Be=this;U()(this,jt),k()(this,"engine",ke,this),k()(this,"resourcePool",he,this),k()(this,"renderPassFactory",Oe,this),k()(this,"mesh",We,this),this.pickingFBO=void 0,this.views=void 0,this.highlightEnabled=!0,this.highlightColor=[255,0,0,255],this.alreadyInRendering=!1,this.setup=function(pe,un,ln){var Fn=pe.createRenderTarget(un,"picking fbo",{width:1,height:1});ln.data={output:un.write(pe,Fn)},un.hasSideEffect=!0},this.execute=function(){var pe=E()(p.a.mark(function un(ln,Fn,Ft){var Pn,lr,hn;return p.a.wrap(function(jn){for(;;)switch(jn.prev=jn.next){case 0:if(Be.views=Ft,!Be.alreadyInRendering){jn.next=3;break}return jn.abrupt("return");case 3:Pn=pt(Ft);try{for(hn=function(){var ft=lr.value,Ut=ft.getViewport(),ct=Ut.width,Ct=Ut.height;Be.alreadyInRendering=!0;var kt=ln.getResourceNode(Fn.data.output);Be.pickingFBO=Be.resourcePool.getOrCreateResource(kt.resource),Be.pickingFBO.resize({width:ct,height:Ct}),Be.engine.useFramebuffer(Be.pickingFBO,function(){Be.engine.clear({framebuffer:Be.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var yt=Be.renderPassFactory(G.a.IDENTIFIER),tt=[],I=ft.getScene(),Mn=pt(I.getEntities()),dt;try{for(Mn.s();!(dt=Mn.n()).done;){var vt=dt.value,Bt=Be.mesh.getComponentByEntity(vt),me=Bt.material;me.setUniform("u_PickingStage",Gt.ENCODE),tt.push(Bt)}}catch(ue){Mn.e(ue)}finally{Mn.f()}yt.renderView(ft),tt.forEach(function(ue){var Re=ue.material;Re.setUniform("u_PickingStage",Gt.HIGHLIGHT)}),Be.alreadyInRendering=!1})},Pn.s();!(lr=Pn.n()).done;)hn()}catch(Dn){Pn.e(Dn)}finally{Pn.f()}case 5:case"end":return jn.stop()}},un)}));return function(un,ln,Fn){return pe.apply(this,arguments)}}(),this.pick=function(pe,un){var ln=pe.x,Fn=pe.y,Ft=Be.engine,Pn=Ft.readPixels,lr=Ft.useFramebuffer,hn=un.getViewport(),On=hn.width,jn=hn.height,Dn=ln*window.devicePixelRatio,ft=Fn*window.devicePixelRatio;if(!(Dn>On||Dn<0||ft>jn||ft<0)){var Ut,ct;return lr(Be.pickingFBO,function(){Ut=Pn({x:Math.round(Dn),y:Math.round(jn-(Fn+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:Be.pickingFBO}),(Ut[0]!==0||Ut[1]!==0||Ut[2]!==0)&&(ct=Object(ce.a)(Ut),Be.highlightEnabled&&Be.highlightPickedFeature(Ut,un))}),ct}}}return $()(jt,[{key:"enableHighlight",value:function(pe){this.highlightEnabled=pe}},{key:"setHighlightColor",value:function(pe){this.highlightColor=pe}},{key:"highlightPickedFeature",value:function(pe,un){if(pe){var ln=pt(un.getScene().getEntities()),Fn;try{for(ln.s();!(Fn=ln.n()).done;){var Ft=Fn.value,Pn=this.mesh.getComponentByEntity(Ft),lr=Pn.material;lr.setUniform("u_PickingStage",Gt.HIGHLIGHT),lr.setUniform("u_PickingColor",[pe[0],pe[1],pe[2]]),lr.setUniform("u_HighlightColor",this.highlightColor)}}catch(hn){ln.e(hn)}finally{ln.f()}}}}]),jt}(),D.IDENTIFIER="PixelPicking Pass",je),ke=Y()(de.prototype,"engine",[fe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=Y()(de.prototype,"resourcePool",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=Y()(de.prototype,"renderPassFactory",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=Y()(de.prototype,"mesh",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de))||j)},G3dp:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="EditOutlined";var M=R.a=p.forwardRef(k)},GXnB:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Metadata=void 0;var B=h("xfSm"),p=function(){function S(E,A){this.key=E,this.value=A}return S.prototype.toString=function(){return this.key===B.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},S}();R.Metadata=p},"Gc+X":function(ge,R,h){"use strict";h.d(R,"a",function(){return J});var B=h("lwsE"),p=h.n(B),S=h("W8MJ"),E=h.n(S),A=h("PJYZ"),k=h.n(A),M=h("7W2i"),U=h.n(M),V=h("a1gu"),$=h.n(V),W=h("Nsbk"),Y=h.n(W),ee=h("IOcx"),ne=h("oDt1");function ie(ce){var G=re();return function(){var fe=Y()(ce),se;if(G){var ve=Y()(this).constructor;se=Reflect.construct(fe,arguments,ve)}else se=fe.apply(this,arguments);return $()(this,se)}}function re(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ce){return!1}}var J=function(ce){U()(Z,ce);var G=ie(Z);function Z(fe){var se;return p()(this,Z),se=G.call(this,fe),se.dirtyFlag=void 0,se.localDirtyFlag=void 0,se.parent=null,se.localPosition=ee.d.fromValues(0,0,0),se.localRotation=ee.c.fromValues(0,0,0,1),se.localScale=ee.d.fromValues(1,1,1),se.localTransform=ee.b.create(),se.position=ee.d.fromValues(0,0,0),se.rotation=ee.c.fromValues(0,0,0,1),se.scaling=ee.d.fromValues(1,1,1),se.worldTransform=ee.b.create(),se.matrixTransform=function(){var ve=ee.b.create();return function(ae){ee.b.multiply(ve,se.getLocalTransform(),ae),ee.b.getScaling(se.localScale,ve),ee.b.getTranslation(se.localPosition,ve),ee.b.getRotation(se.localRotation,ve)}}(),se.rotateRollPitchYaw=function(){var ve=ee.c.create(),ae=ee.c.create(),j=ee.c.create();return function(de,ke,he){se.setDirty(),ee.c.fromEuler(ve,de,0,0),ee.c.fromEuler(ae,0,ke,0),ee.c.fromEuler(j,0,0,he),ee.c.multiply(se.localRotation,ve,se.localRotation),ee.c.multiply(se.localRotation,se.localRotation,ae),ee.c.multiply(se.localRotation,j,se.localRotation),ee.c.normalize(se.localRotation,se.localRotation)}}(),se.lerp=function(){var ve=ee.d.create(),ae=ee.c.create(),j=ee.d.create(),de=ee.d.create(),ke=ee.c.create(),he=ee.d.create();return function(Oe,We,D){se.setDirty(),ee.b.getScaling(ve,Oe.worldTransform),ee.b.getTranslation(j,Oe.worldTransform),ee.b.getRotation(ae,Oe.worldTransform),ee.b.getScaling(de,We.worldTransform),ee.b.getTranslation(he,We.worldTransform),ee.b.getRotation(ke,We.worldTransform),ee.d.lerp(se.localScale,ve,de,D),ee.c.slerp(se.localRotation,ae,ke,D),ee.d.lerp(se.localPosition,j,he,D)}}(),se.translate=function(){var ve=ee.d.create();return function(ae){return ee.d.add(ve,se.getPosition(),ae),se.setPosition(ve),se.setDirty(!0),k()(se)}}(),se.translateLocal=function(){return function(ve){return ee.d.transformQuat(ve,ve,se.localRotation),ee.d.add(se.localPosition,se.localPosition,ve),se.setLocalDirty(!0),k()(se)}}(),se.setPosition=function(){var ve=ee.b.create();return function(ae){return se.position=ae,se.setLocalDirty(!0),se.parent===null?ee.d.copy(se.localPosition,ae):(ee.b.copy(ve,se.parent.worldTransform),ee.b.invert(ve,ve),ee.d.transformMat4(se.localPosition,ae,ve)),k()(se)}}(),se.rotate=function(){var ve=ee.c.create();return function(ae){if(se.parent===null)ee.c.multiply(se.localRotation,se.localRotation,ae),ee.c.normalize(se.localRotation,se.localRotation);else{var j=se.getRotation(),de=se.parent.getRotation();ee.c.copy(ve,de),ee.c.invert(ve,ve),ee.c.multiply(ve,ve,ae),ee.c.multiply(se.localRotation,ae,j),ee.c.normalize(se.localRotation,se.localRotation)}return se.setLocalDirty(),k()(se)}}(),se.rotateLocal=function(){return function(ve){return ee.c.multiply(se.localRotation,se.localRotation,ve),ee.c.normalize(se.localRotation,se.localRotation),se.setLocalDirty(!0),k()(se)}}(),se.setRotation=function(){var ve=ee.c.create();return function(ae){return se.parent===null?ee.c.copy(se.localRotation,ae):(ee.c.copy(ve,se.parent.getRotation()),ee.c.invert(ve,ve),ee.c.copy(se.localRotation,ve),ee.c.mul(se.localRotation,se.localRotation,ae)),se.setLocalDirty(!0),k()(se)}}(),se}return E()(Z,[{key:"setLocalPosition",value:function(se){ee.d.copy(this.localPosition,se),this.setLocalDirty(!0)}},{key:"setLocalScale",value:function(se){ee.d.copy(this.localScale,se),this.setLocalDirty(!0)}},{key:"setLocalRotation",value:function(se){return ee.c.copy(this.localRotation,se),this.setLocalDirty(!0),this}},{key:"isDirty",value:function(){return this.dirtyFlag}},{key:"setDirty",value:function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;se?this.dirtyFlag|=Z.DIRTY:this.dirtyFlag&=~Z.DIRTY}},{key:"isLocalDirty",value:function(){return this.localDirtyFlag}},{key:"setLocalDirty",value:function(){var se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;se?(this.localDirtyFlag|=Z.DIRTY,this.setDirty(!0)):this.localDirtyFlag&=~Z.DIRTY}},{key:"updateTransform",value:function(){this.isLocalDirty()&&this.getLocalTransform(),this.isDirty()&&this.parent===null&&(ee.b.copy(this.worldTransform,this.getLocalTransform()),this.setDirty(!1))}},{key:"updateTransformWithParent",value:function(se){ee.b.multiply(this.worldTransform,se.worldTransform,this.getLocalTransform())}},{key:"applyTransform",value:function(){this.setDirty(),ee.b.getScaling(this.localScale,this.worldTransform),ee.b.getTranslation(this.localPosition,this.worldTransform),ee.b.getRotation(this.localRotation,this.worldTransform)}},{key:"clearTransform",value:function(){this.setDirty(),this.localPosition=ee.d.fromValues(0,0,0),this.localRotation=ee.c.fromValues(0,0,0,1),this.localScale=ee.d.fromValues(1,1,1)}},{key:"scaleLocal",value:function(se){return this.setLocalDirty(),ee.d.multiply(this.localScale,this.localScale,se),this}},{key:"getLocalPosition",value:function(){return this.localPosition}},{key:"getLocalRotation",value:function(){return this.localRotation}},{key:"getLocalScale",value:function(){return this.localScale}},{key:"getLocalTransform",value:function(){return this.localDirtyFlag&&(ee.b.fromRotationTranslationScale(this.localTransform,this.localRotation,this.localPosition,this.localScale),this.setLocalDirty(!1)),this.localTransform}},{key:"getWorldTransform",value:function(){return!this.isLocalDirty()&&!this.isDirty()?this.worldTransform:(this.parent&&this.parent.getWorldTransform(),this.updateTransform(),this.worldTransform)}},{key:"getPosition",value:function(){return ee.b.getTranslation(this.position,this.worldTransform),this.position}},{key:"getRotation",value:function(){return ee.b.getRotation(this.rotation,this.worldTransform),this.rotation}},{key:"getScale",value:function(){return ee.b.getScaling(this.scaling,this.worldTransform),this.scaling}}]),Z}(ne.a);J.DIRTY=1<<0},GiOz:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SketchFields=void 0;var B=h("q1tI"),p=U(B),S=h("/FUP"),E=U(S),A=h("p8yl"),k=U(A),M=h("TM95");function U($){return $&&$.__esModule?$:{default:$}}var V=R.SketchFields=function(W){var Y=W.onChange,ee=W.rgb,ne=W.hsl,ie=W.hex,re=W.disableAlpha,J=(0,E.default)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:re}),ce=function(Z,fe){Z.hex?k.default.isValidHex(Z.hex)&&Y({hex:Z.hex,source:"hex"},fe):Z.r||Z.g||Z.b?Y({r:Z.r||ee.r,g:Z.g||ee.g,b:Z.b||ee.b,a:ee.a,source:"rgb"},fe):Z.a&&(Z.a<0?Z.a=0:Z.a>100&&(Z.a=100),Z.a/=100,Y({h:ne.h,s:ne.s,l:ne.l,a:Z.a,source:"rgb"},fe))};return p.default.createElement("div",{style:J.fields,className:"flexbox-fix"},p.default.createElement("div",{style:J.double},p.default.createElement(M.EditableInput,{style:{input:J.input,label:J.label},label:"hex",value:ie.replace("#",""),onChange:ce})),p.default.createElement("div",{style:J.single},p.default.createElement(M.EditableInput,{style:{input:J.input,label:J.label},label:"r",value:ee.r,onChange:ce,dragLabel:"true",dragMax:"255"})),p.default.createElement("div",{style:J.single},p.default.createElement(M.EditableInput,{style:{input:J.input,label:J.label},label:"g",value:ee.g,onChange:ce,dragLabel:"true",dragMax:"255"})),p.default.createElement("div",{style:J.single},p.default.createElement(M.EditableInput,{style:{input:J.input,label:J.label},label:"b",value:ee.b,onChange:ce,dragLabel:"true",dragMax:"255"})),p.default.createElement("div",{style:J.alpha},p.default.createElement(M.EditableInput,{style:{input:J.input,label:J.label},label:"a",value:Math.round(ee.a*100),onChange:ce,dragLabel:"true",dragMax:"100"})))};R.default=V},Gj0h:function(ge,R,h){"use strict";h.d(R,"AST_TOKEN_TYPES",function(){return Oe}),h.d(R,"STORAGE_CLASS",function(){return D}),h.d(R,"Target",function(){return je}),h.d(R,"DefineValuePlaceholder",function(){return pt});var B=h("mNvP"),p=h.n(B),S=h("oDt1"),E=h("z5Mu"),A=h("0arJ"),k=h("4dNS"),M=h("ph3A"),U=h("RlxE"),V=h("baXp"),$=h("6B+r"),W=h("kfnj"),Y=h("FlHB"),ee=h("tyuB"),ne=h("IQ25"),ie=h("BFph"),re=h("Gc+X"),J=h("9y2T");h.d(R,"createEntity",function(){return J.b});var ce=h("+uE7");h.d(R,"IDENTIFIER",function(){return ce.a});var G=h("OqSR");h.d(R,"createWorldContainer",function(){return G.a});var Z=h("Ssa2");h.d(R,"generateAABBFromVertices",function(){return Z.a});var fe=h("ljNz");h.d(R,"isSafari",function(){return fe.a});var se=h("8jh/"),ve=h("48hD");h.d(R,"AABB",function(){return ve.a}),h.d(R,"Frustum",function(){return ve.b});var ae=h("4XUm");h.o(ae,"gl")&&h.d(R,"gl",function(){return ae.gl});var j=h("FXSy"),de=h.n(j);h.o(j,"gl")&&h.d(R,"gl",function(){return j.gl});var ke=h("Yydy"),he=h.n(ke);h.o(ke,"gl")&&h.d(R,"gl",function(){return ke.gl}),h.o(ae,"gl")&&h.d(R,"gl",function(){return ae.gl});var Oe;(function(nt){nt.Void="Void",nt.Boolean="Boolean",nt.Float="Float",nt.Uint32="Uint32",nt.Int32="Int32",nt.Vector="Vector",nt.Vector2Float="vec2<f32>",nt.Vector3Float="vec3<f32>",nt.Vector4Float="vec4<f32>",nt.Vector2Boolean="vec2<bool>",nt.Vector3Boolean="vec3<bool>",nt.Vector4Boolean="vec4<bool>",nt.Vector2Uint="vec2<u32>",nt.Vector3Uint="vec3<u32>",nt.Vector4Uint="vec4<u32>",nt.Vector2Int="vec2<i32>",nt.Vector3Int="vec3<i32>",nt.Vector4Int="vec4<i32>",nt.Matrix="Matrix",nt.Matrix3x3Float="mat3x3<f32>",nt.Matrix4x4Float="mat4x4<i32>",nt.Struct="Struct",nt.FloatArray="Float[]",nt.Vector4FloatArray="vec4<f32>[]"})(Oe||(Oe={}));var We;(function(nt){nt.Program="Program",nt.Identifier="Identifier",nt.VariableDeclaration="VariableDeclaration",nt.BlockStatement="BlockStatement",nt.ReturnStatement="ReturnStatement",nt.FunctionDeclaration="FunctionDeclaration",nt.VariableDeclarator="VariableDeclarator",nt.AssignmentExpression="AssignmentExpression",nt.LogicalExpression="LogicalExpression",nt.BinaryExpression="BinaryExpression",nt.ArrayExpression="ArrayExpression",nt.UnaryExpression="UnaryExpression",nt.UpdateExpression="UpdateExpression",nt.FunctionExpression="FunctionExpression",nt.MemberExpression="MemberExpression",nt.ConditionalExpression="ConditionalExpression",nt.ExpressionStatement="ExpressionStatement",nt.CallExpression="CallExpression",nt.NumThreadStatement="NumThreadStatement",nt.StorageStatement="StorageStatement",nt.DoWhileStatement="DoWhileStatement",nt.WhileStatement="WhileStatement",nt.ForStatement="ForStatement",nt.BreakStatement="BreakStatement",nt.ContinueStatement="ContinueStatement",nt.IfStatement="IfStatement",nt.ImportedFunctionStatement="ImportedFunctionStatement"})(We||(We={}));var D;(function(nt){nt.Input="Input",nt.Output="Output",nt.Uniform="Uniform",nt.Workgroup="Workgroup",nt.UniformConstant="UniformConstant",nt.Image="Image",nt.StorageBuffer="StorageBuffer",nt.Private="Private",nt.Function="Function"})(D||(D={}));var je;(function(nt){nt.GLSL100="GLSL100",nt.GLSL450="GLSL450",nt.WGSL="WGSL"})(je||(je={}));var pt="__DefineValuePlaceholder__"},HTXX:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Sketch=void 0;var B=Object.assign||function(J){for(var ce=1;ce<arguments.length;ce++){var G=arguments[ce];for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(J[Z]=G[Z])}return J},p=h("q1tI"),S=ie(p),E=h("17x9"),A=ie(E),k=h("/FUP"),M=ie(k),U=h("QkVN"),V=ie(U),$=h("TM95"),W=h("GiOz"),Y=ie(W),ee=h("eHBW"),ne=ie(ee);function ie(J){return J&&J.__esModule?J:{default:J}}var re=R.Sketch=function(ce){var G=ce.width,Z=ce.rgb,fe=ce.hex,se=ce.hsv,ve=ce.hsl,ae=ce.onChange,j=ce.onSwatchHover,de=ce.disableAlpha,ke=ce.presetColors,he=ce.renderers,Oe=ce.styles,We=Oe===void 0?{}:Oe,D=ce.className,je=D===void 0?"":D,pt=(0,M.default)((0,V.default)({default:B({picker:{width:G,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+Z.r+","+Z.g+","+Z.b+","+Z.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},We),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},We),{disableAlpha:de});return S.default.createElement("div",{style:pt.picker,className:"sketch-picker "+je},S.default.createElement("div",{style:pt.saturation},S.default.createElement($.Saturation,{style:pt.Saturation,hsl:ve,hsv:se,onChange:ae})),S.default.createElement("div",{style:pt.controls,className:"flexbox-fix"},S.default.createElement("div",{style:pt.sliders},S.default.createElement("div",{style:pt.hue},S.default.createElement($.Hue,{style:pt.Hue,hsl:ve,onChange:ae})),S.default.createElement("div",{style:pt.alpha},S.default.createElement($.Alpha,{style:pt.Alpha,rgb:Z,hsl:ve,renderers:he,onChange:ae}))),S.default.createElement("div",{style:pt.color},S.default.createElement($.Checkboard,null),S.default.createElement("div",{style:pt.activeColor}))),S.default.createElement(Y.default,{rgb:Z,hsl:ve,hex:fe,onChange:ae,disableAlpha:de}),S.default.createElement(ne.default,{colors:ke,onClick:ae,onSwatchHover:j}))};re.propTypes={disableAlpha:A.default.bool,width:A.default.oneOfType([A.default.string,A.default.number]),styles:A.default.object},re.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]},R.default=(0,$.ColorWrap)(re)},HlQe:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Hue=void 0;var B=function(){function ne(ie,re){for(var J=0;J<re.length;J++){var ce=re[J];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(ie,ce.key,ce)}}return function(ie,re,J){return re&&ne(ie.prototype,re),J&&ne(ie,J),ie}}(),p=h("q1tI"),S=V(p),E=h("/FUP"),A=V(E),k=h("srvI"),M=U(k);function U(ne){if(ne&&ne.__esModule)return ne;var ie={};if(ne!=null)for(var re in ne)Object.prototype.hasOwnProperty.call(ne,re)&&(ie[re]=ne[re]);return ie.default=ne,ie}function V(ne){return ne&&ne.__esModule?ne:{default:ne}}function $(ne,ie){if(!(ne instanceof ie))throw new TypeError("Cannot call a class as a function")}function W(ne,ie){if(!ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:ne}function Y(ne,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);ne.prototype=Object.create(ie&&ie.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(ne,ie):ne.__proto__=ie)}var ee=R.Hue=function(ne){Y(ie,ne);function ie(){var re,J,ce,G;$(this,ie);for(var Z=arguments.length,fe=Array(Z),se=0;se<Z;se++)fe[se]=arguments[se];return G=(J=(ce=W(this,(re=ie.__proto__||Object.getPrototypeOf(ie)).call.apply(re,[this].concat(fe))),ce),ce.handleChange=function(ve){var ae=M.calculateChange(ve,ce.props.direction,ce.props.hsl,ce.container);ae&&typeof ce.props.onChange=="function"&&ce.props.onChange(ae,ve)},ce.handleMouseDown=function(ve){ce.handleChange(ve),window.addEventListener("mousemove",ce.handleChange),window.addEventListener("mouseup",ce.handleMouseUp)},ce.handleMouseUp=function(){ce.unbindEventListeners()},J),W(ce,G)}return B(ie,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var J=this,ce=this.props.direction,G=ce===void 0?"horizontal":ce,Z=(0,A.default)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:G==="vertical"});return S.default.createElement("div",{style:Z.hue},S.default.createElement("div",{className:"hue-"+G,style:Z.container,ref:function(se){return J.container=se},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},S.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),S.default.createElement("div",{style:Z.pointer},this.props.pointer?S.default.createElement(this.props.pointer,this.props):S.default.createElement("div",{style:Z.slider}))))}}]),ie}(p.PureComponent||p.Component);R.default=ee},HpQ9:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.ContainerSnapshot=void 0;var B=function(){function p(){}return p.of=function(S,E){var A=new p;return A.bindings=S,A.middleware=E,A},p}();R.ContainerSnapshot=B},IOcx:function(ge,R,h){"use strict";h.d(R,"a",function(){return B}),h.d(R,"b",function(){return p}),h.d(R,"c",function(){return A}),h.d(R,"d",function(){return S}),h.d(R,"e",function(){return E});var B={};h.r(B),h.d(B,"create",function(){return ee}),h.d(B,"fromMat4",function(){return ne}),h.d(B,"clone",function(){return ie}),h.d(B,"copy",function(){return re}),h.d(B,"fromValues",function(){return J}),h.d(B,"set",function(){return ce}),h.d(B,"identity",function(){return G}),h.d(B,"transpose",function(){return Z}),h.d(B,"invert",function(){return fe}),h.d(B,"adjoint",function(){return se}),h.d(B,"determinant",function(){return ve}),h.d(B,"multiply",function(){return ae}),h.d(B,"translate",function(){return j}),h.d(B,"rotate",function(){return de}),h.d(B,"scale",function(){return ke}),h.d(B,"fromTranslation",function(){return he}),h.d(B,"fromRotation",function(){return Oe}),h.d(B,"fromScaling",function(){return We}),h.d(B,"fromMat2d",function(){return D}),h.d(B,"fromQuat",function(){return je}),h.d(B,"normalFromMat4",function(){return pt}),h.d(B,"projection",function(){return nt}),h.d(B,"str",function(){return Lt}),h.d(B,"frob",function(){return Gt}),h.d(B,"add",function(){return $e}),h.d(B,"subtract",function(){return jt}),h.d(B,"multiplyScalar",function(){return Be}),h.d(B,"multiplyScalarAndAdd",function(){return pe}),h.d(B,"exactEquals",function(){return un}),h.d(B,"equals",function(){return ln}),h.d(B,"mul",function(){return Fn}),h.d(B,"sub",function(){return Ft});var p={};h.r(p),h.d(p,"create",function(){return Pn}),h.d(p,"clone",function(){return lr}),h.d(p,"copy",function(){return hn}),h.d(p,"fromValues",function(){return On}),h.d(p,"set",function(){return jn}),h.d(p,"identity",function(){return Dn}),h.d(p,"transpose",function(){return ft}),h.d(p,"invert",function(){return Ut}),h.d(p,"adjoint",function(){return ct}),h.d(p,"determinant",function(){return Ct}),h.d(p,"multiply",function(){return kt}),h.d(p,"translate",function(){return yt}),h.d(p,"scale",function(){return tt}),h.d(p,"rotate",function(){return I}),h.d(p,"rotateX",function(){return Mn}),h.d(p,"rotateY",function(){return dt}),h.d(p,"rotateZ",function(){return vt}),h.d(p,"fromTranslation",function(){return Bt}),h.d(p,"fromScaling",function(){return me}),h.d(p,"fromRotation",function(){return ue}),h.d(p,"fromXRotation",function(){return Re}),h.d(p,"fromYRotation",function(){return Rt}),h.d(p,"fromZRotation",function(){return Kt}),h.d(p,"fromRotationTranslation",function(){return Bn}),h.d(p,"fromQuat2",function(){return Nr}),h.d(p,"getTranslation",function(){return Rn}),h.d(p,"getScaling",function(){return Cr}),h.d(p,"getRotation",function(){return tr}),h.d(p,"fromRotationTranslationScale",function(){return jr}),h.d(p,"fromRotationTranslationScaleOrigin",function(){return zr}),h.d(p,"fromQuat",function(){return Ua}),h.d(p,"frustum",function(){return oa}),h.d(p,"perspectiveNO",function(){return Za}),h.d(p,"perspective",function(){return ba}),h.d(p,"perspectiveZO",function(){return Pa}),h.d(p,"perspectiveFromFieldOfView",function(){return ri}),h.d(p,"orthoNO",function(){return li}),h.d(p,"ortho",function(){return ka}),h.d(p,"orthoZO",function(){return ai}),h.d(p,"lookAt",function(){return Qa}),h.d(p,"targetTo",function(){return aa}),h.d(p,"str",function(){return Gi}),h.d(p,"frob",function(){return mo}),h.d(p,"add",function(){return sa}),h.d(p,"subtract",function(){return yi}),h.d(p,"multiplyScalar",function(){return Io}),h.d(p,"multiplyScalarAndAdd",function(){return Pi}),h.d(p,"exactEquals",function(){return ao}),h.d(p,"equals",function(){return ki}),h.d(p,"mul",function(){return ot}),h.d(p,"sub",function(){return It});var S={};h.r(S),h.d(S,"create",function(){return Ne}),h.d(S,"clone",function(){return St}),h.d(S,"length",function(){return Ve}),h.d(S,"fromValues",function(){return Xt}),h.d(S,"copy",function(){return gn}),h.d(S,"set",function(){return pn}),h.d(S,"add",function(){return en}),h.d(S,"subtract",function(){return In}),h.d(S,"multiply",function(){return $r}),h.d(S,"divide",function(){return da}),h.d(S,"ceil",function(){return Oa}),h.d(S,"floor",function(){return Ka}),h.d(S,"min",function(){return bi}),h.d(S,"max",function(){return _a}),h.d(S,"round",function(){return ti}),h.d(S,"scale",function(){return tn}),h.d(S,"scaleAndAdd",function(){return mn}),h.d(S,"distance",function(){return nr}),h.d(S,"squaredDistance",function(){return or}),h.d(S,"squaredLength",function(){return Zr}),h.d(S,"negate",function(){return Vi}),h.d(S,"inverse",function(){return Da}),h.d(S,"normalize",function(){return Ea}),h.d(S,"dot",function(){return ta}),h.d(S,"cross",function(){return ha}),h.d(S,"lerp",function(){return Kr}),h.d(S,"hermite",function(){return qi}),h.d(S,"bezier",function(){return So}),h.d(S,"random",function(){return Js}),h.d(S,"transformMat4",function(){return Ro}),h.d(S,"transformMat3",function(){return Zo}),h.d(S,"transformQuat",function(){return Ss}),h.d(S,"rotateX",function(){return gs}),h.d(S,"rotateY",function(){return ou}),h.d(S,"rotateZ",function(){return As}),h.d(S,"angle",function(){return Ms}),h.d(S,"zero",function(){return Vo}),h.d(S,"str",function(){return us}),h.d(S,"exactEquals",function(){return Ki}),h.d(S,"equals",function(){return Eu}),h.d(S,"sub",function(){return su}),h.d(S,"mul",function(){return Zs}),h.d(S,"div",function(){return Is}),h.d(S,"dist",function(){return gl}),h.d(S,"sqrDist",function(){return Vl}),h.d(S,"len",function(){return uu}),h.d(S,"sqrLen",function(){return Rs}),h.d(S,"forEach",function(){return el});var E={};h.r(E),h.d(E,"create",function(){return tl}),h.d(E,"clone",function(){return nl}),h.d(E,"fromValues",function(){return Hl}),h.d(E,"copy",function(){return Ts}),h.d(E,"set",function(){return Wl}),h.d(E,"add",function(){return Ou}),h.d(E,"subtract",function(){return Nu}),h.d(E,"multiply",function(){return Qs}),h.d(E,"divide",function(){return rl}),h.d(E,"ceil",function(){return sf}),h.d(E,"floor",function(){return ml}),h.d(E,"min",function(){return al}),h.d(E,"max",function(){return pc}),h.d(E,"round",function(){return Et}),h.d(E,"scale",function(){return mt}),h.d(E,"scaleAndAdd",function(){return wt}),h.d(E,"distance",function(){return $t}),h.d(E,"squaredDistance",function(){return _t}),h.d(E,"length",function(){return xn}),h.d(E,"squaredLength",function(){return Ln}),h.d(E,"negate",function(){return Yn}),h.d(E,"inverse",function(){return Ar}),h.d(E,"normalize",function(){return er}),h.d(E,"dot",function(){return Mr}),h.d(E,"cross",function(){return rr}),h.d(E,"lerp",function(){return Rr}),h.d(E,"random",function(){return Dr}),h.d(E,"transformMat4",function(){return qr}),h.d(E,"transformQuat",function(){return qa}),h.d(E,"zero",function(){return Gr}),h.d(E,"str",function(){return K}),h.d(E,"exactEquals",function(){return P}),h.d(E,"equals",function(){return H}),h.d(E,"sub",function(){return X}),h.d(E,"mul",function(){return le}),h.d(E,"div",function(){return be}),h.d(E,"dist",function(){return xe}),h.d(E,"sqrDist",function(){return Ge}),h.d(E,"len",function(){return it}),h.d(E,"sqrLen",function(){return bt}),h.d(E,"forEach",function(){return bn});var A={};h.r(A),h.d(A,"create",function(){return _n}),h.d(A,"identity",function(){return Or}),h.d(A,"setAxisAngle",function(){return Cn}),h.d(A,"getAxisAngle",function(){return ar}),h.d(A,"getAngle",function(){return Ca}),h.d(A,"multiply",function(){return Xr}),h.d(A,"rotateX",function(){return Fi}),h.d(A,"rotateY",function(){return Qo}),h.d(A,"rotateZ",function(){return lo}),h.d(A,"calculateW",function(){return Ho}),h.d(A,"exp",function(){return Ao}),h.d(A,"ln",function(){return Ia}),h.d(A,"pow",function(){return Ns}),h.d(A,"slerp",function(){return Ai}),h.d(A,"random",function(){return Yi}),h.d(A,"invert",function(){return Ji}),h.d(A,"conjugate",function(){return yl}),h.d(A,"fromMat3",function(){return bo}),h.d(A,"fromEuler",function(){return ls}),h.d(A,"str",function(){return wu}),h.d(A,"clone",function(){return xu}),h.d(A,"fromValues",function(){return qs}),h.d(A,"copy",function(){return Wo}),h.d(A,"set",function(){return js}),h.d(A,"add",function(){return $o}),h.d(A,"mul",function(){return jo}),h.d(A,"scale",function(){return il}),h.d(A,"dot",function(){return Ls}),h.d(A,"lerp",function(){return Ni}),h.d(A,"length",function(){return Su}),h.d(A,"len",function(){return ms}),h.d(A,"squaredLength",function(){return lu}),h.d(A,"sqrLen",function(){return uf}),h.d(A,"normalize",function(){return $l}),h.d(A,"exactEquals",function(){return gc}),h.d(A,"equals",function(){return cs}),h.d(A,"rotationTo",function(){return Kl}),h.d(A,"sqlerp",function(){return eu}),h.d(A,"setAxes",function(){return bl});var k=1e-6,M=typeof Float32Array!="undefined"?Float32Array:Array,U=Math.random;function V(b){M=b}var $=Math.PI/180;function W(b){return b*$}function Y(b,N){return Math.abs(b-N)<=k*Math.max(1,Math.abs(b),Math.abs(N))}Math.hypot||(Math.hypot=function(){for(var b=0,N=arguments.length;N--;)b+=arguments[N]*arguments[N];return Math.sqrt(b)});function ee(){var b=new M(9);return M!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[5]=0,b[6]=0,b[7]=0),b[0]=1,b[4]=1,b[8]=1,b}function ne(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[4],b[4]=N[5],b[5]=N[6],b[6]=N[8],b[7]=N[9],b[8]=N[10],b}function ie(b){var N=new M(9);return N[0]=b[0],N[1]=b[1],N[2]=b[2],N[3]=b[3],N[4]=b[4],N[5]=b[5],N[6]=b[6],N[7]=b[7],N[8]=b[8],N}function re(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[3],b[4]=N[4],b[5]=N[5],b[6]=N[6],b[7]=N[7],b[8]=N[8],b}function J(b,N,te,Ee,Se,_e,Qe,rt,Tt){var zt=new M(9);return zt[0]=b,zt[1]=N,zt[2]=te,zt[3]=Ee,zt[4]=Se,zt[5]=_e,zt[6]=Qe,zt[7]=rt,zt[8]=Tt,zt}function ce(b,N,te,Ee,Se,_e,Qe,rt,Tt,zt){return b[0]=N,b[1]=te,b[2]=Ee,b[3]=Se,b[4]=_e,b[5]=Qe,b[6]=rt,b[7]=Tt,b[8]=zt,b}function G(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function Z(b,N){if(b===N){var te=N[1],Ee=N[2],Se=N[5];b[1]=N[3],b[2]=N[6],b[3]=te,b[5]=N[7],b[6]=Ee,b[7]=Se}else b[0]=N[0],b[1]=N[3],b[2]=N[6],b[3]=N[1],b[4]=N[4],b[5]=N[7],b[6]=N[2],b[7]=N[5],b[8]=N[8];return b}function fe(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=N[4],rt=N[5],Tt=N[6],zt=N[7],on=N[8],He=on*Qe-rt*zt,Me=-on*_e+rt*Tt,Ye=zt*_e-Qe*Tt,ut=te*He+Ee*Me+Se*Ye;return ut?(ut=1/ut,b[0]=He*ut,b[1]=(-on*Ee+Se*zt)*ut,b[2]=(rt*Ee-Se*Qe)*ut,b[3]=Me*ut,b[4]=(on*te-Se*Tt)*ut,b[5]=(-rt*te+Se*_e)*ut,b[6]=Ye*ut,b[7]=(-zt*te+Ee*Tt)*ut,b[8]=(Qe*te-Ee*_e)*ut,b):null}function se(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=N[4],rt=N[5],Tt=N[6],zt=N[7],on=N[8];return b[0]=Qe*on-rt*zt,b[1]=Se*zt-Ee*on,b[2]=Ee*rt-Se*Qe,b[3]=rt*Tt-_e*on,b[4]=te*on-Se*Tt,b[5]=Se*_e-te*rt,b[6]=_e*zt-Qe*Tt,b[7]=Ee*Tt-te*zt,b[8]=te*Qe-Ee*_e,b}function ve(b){var N=b[0],te=b[1],Ee=b[2],Se=b[3],_e=b[4],Qe=b[5],rt=b[6],Tt=b[7],zt=b[8];return N*(zt*_e-Qe*Tt)+te*(-zt*Se+Qe*rt)+Ee*(Tt*Se-_e*rt)}function ae(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3],rt=N[4],Tt=N[5],zt=N[6],on=N[7],He=N[8],Me=te[0],Ye=te[1],ut=te[2],De=te[3],Le=te[4],et=te[5],Qt=te[6],yn=te[7],Vn=te[8];return b[0]=Me*Ee+Ye*Qe+ut*zt,b[1]=Me*Se+Ye*rt+ut*on,b[2]=Me*_e+Ye*Tt+ut*He,b[3]=De*Ee+Le*Qe+et*zt,b[4]=De*Se+Le*rt+et*on,b[5]=De*_e+Le*Tt+et*He,b[6]=Qt*Ee+yn*Qe+Vn*zt,b[7]=Qt*Se+yn*rt+Vn*on,b[8]=Qt*_e+yn*Tt+Vn*He,b}function j(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3],rt=N[4],Tt=N[5],zt=N[6],on=N[7],He=N[8],Me=te[0],Ye=te[1];return b[0]=Ee,b[1]=Se,b[2]=_e,b[3]=Qe,b[4]=rt,b[5]=Tt,b[6]=Me*Ee+Ye*Qe+zt,b[7]=Me*Se+Ye*rt+on,b[8]=Me*_e+Ye*Tt+He,b}function de(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3],rt=N[4],Tt=N[5],zt=N[6],on=N[7],He=N[8],Me=Math.sin(te),Ye=Math.cos(te);return b[0]=Ye*Ee+Me*Qe,b[1]=Ye*Se+Me*rt,b[2]=Ye*_e+Me*Tt,b[3]=Ye*Qe-Me*Ee,b[4]=Ye*rt-Me*Se,b[5]=Ye*Tt-Me*_e,b[6]=zt,b[7]=on,b[8]=He,b}function ke(b,N,te){var Ee=te[0],Se=te[1];return b[0]=Ee*N[0],b[1]=Ee*N[1],b[2]=Ee*N[2],b[3]=Se*N[3],b[4]=Se*N[4],b[5]=Se*N[5],b[6]=N[6],b[7]=N[7],b[8]=N[8],b}function he(b,N){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=1,b[5]=0,b[6]=N[0],b[7]=N[1],b[8]=1,b}function Oe(b,N){var te=Math.sin(N),Ee=Math.cos(N);return b[0]=Ee,b[1]=te,b[2]=0,b[3]=-te,b[4]=Ee,b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function We(b,N){return b[0]=N[0],b[1]=0,b[2]=0,b[3]=0,b[4]=N[1],b[5]=0,b[6]=0,b[7]=0,b[8]=1,b}function D(b,N){return b[0]=N[0],b[1]=N[1],b[2]=0,b[3]=N[2],b[4]=N[3],b[5]=0,b[6]=N[4],b[7]=N[5],b[8]=1,b}function je(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=te+te,rt=Ee+Ee,Tt=Se+Se,zt=te*Qe,on=Ee*Qe,He=Ee*rt,Me=Se*Qe,Ye=Se*rt,ut=Se*Tt,De=_e*Qe,Le=_e*rt,et=_e*Tt;return b[0]=1-He-ut,b[3]=on-et,b[6]=Me+Le,b[1]=on+et,b[4]=1-zt-ut,b[7]=Ye-De,b[2]=Me-Le,b[5]=Ye+De,b[8]=1-zt-He,b}function pt(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=N[4],rt=N[5],Tt=N[6],zt=N[7],on=N[8],He=N[9],Me=N[10],Ye=N[11],ut=N[12],De=N[13],Le=N[14],et=N[15],Qt=te*rt-Ee*Qe,yn=te*Tt-Se*Qe,Vn=te*zt-_e*Qe,sr=Ee*Tt-Se*rt,Zn=Ee*zt-_e*rt,ia=Se*zt-_e*Tt,na=on*De-He*ut,ea=on*Le-Me*ut,la=on*et-Ye*ut,si=He*Le-Me*De,Ra=He*et-Ye*De,ii=Me*et-Ye*Le,ma=Qt*ii-yn*Ra+Vn*si+sr*la-Zn*ea+ia*na;return ma?(ma=1/ma,b[0]=(rt*ii-Tt*Ra+zt*si)*ma,b[1]=(Tt*la-Qe*ii-zt*ea)*ma,b[2]=(Qe*Ra-rt*la+zt*na)*ma,b[3]=(Se*Ra-Ee*ii-_e*si)*ma,b[4]=(te*ii-Se*la+_e*ea)*ma,b[5]=(Ee*la-te*Ra-_e*na)*ma,b[6]=(De*ia-Le*Zn+et*sr)*ma,b[7]=(Le*Vn-ut*ia-et*yn)*ma,b[8]=(ut*Zn-De*Vn+et*Qt)*ma,b):null}function nt(b,N,te){return b[0]=2/N,b[1]=0,b[2]=0,b[3]=0,b[4]=-2/te,b[5]=0,b[6]=-1,b[7]=1,b[8]=1,b}function Lt(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"}function Gt(b){return Math.hypot(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])}function $e(b,N,te){return b[0]=N[0]+te[0],b[1]=N[1]+te[1],b[2]=N[2]+te[2],b[3]=N[3]+te[3],b[4]=N[4]+te[4],b[5]=N[5]+te[5],b[6]=N[6]+te[6],b[7]=N[7]+te[7],b[8]=N[8]+te[8],b}function jt(b,N,te){return b[0]=N[0]-te[0],b[1]=N[1]-te[1],b[2]=N[2]-te[2],b[3]=N[3]-te[3],b[4]=N[4]-te[4],b[5]=N[5]-te[5],b[6]=N[6]-te[6],b[7]=N[7]-te[7],b[8]=N[8]-te[8],b}function Be(b,N,te){return b[0]=N[0]*te,b[1]=N[1]*te,b[2]=N[2]*te,b[3]=N[3]*te,b[4]=N[4]*te,b[5]=N[5]*te,b[6]=N[6]*te,b[7]=N[7]*te,b[8]=N[8]*te,b}function pe(b,N,te,Ee){return b[0]=N[0]+te[0]*Ee,b[1]=N[1]+te[1]*Ee,b[2]=N[2]+te[2]*Ee,b[3]=N[3]+te[3]*Ee,b[4]=N[4]+te[4]*Ee,b[5]=N[5]+te[5]*Ee,b[6]=N[6]+te[6]*Ee,b[7]=N[7]+te[7]*Ee,b[8]=N[8]+te[8]*Ee,b}function un(b,N){return b[0]===N[0]&&b[1]===N[1]&&b[2]===N[2]&&b[3]===N[3]&&b[4]===N[4]&&b[5]===N[5]&&b[6]===N[6]&&b[7]===N[7]&&b[8]===N[8]}function ln(b,N){var te=b[0],Ee=b[1],Se=b[2],_e=b[3],Qe=b[4],rt=b[5],Tt=b[6],zt=b[7],on=b[8],He=N[0],Me=N[1],Ye=N[2],ut=N[3],De=N[4],Le=N[5],et=N[6],Qt=N[7],yn=N[8];return Math.abs(te-He)<=k*Math.max(1,Math.abs(te),Math.abs(He))&&Math.abs(Ee-Me)<=k*Math.max(1,Math.abs(Ee),Math.abs(Me))&&Math.abs(Se-Ye)<=k*Math.max(1,Math.abs(Se),Math.abs(Ye))&&Math.abs(_e-ut)<=k*Math.max(1,Math.abs(_e),Math.abs(ut))&&Math.abs(Qe-De)<=k*Math.max(1,Math.abs(Qe),Math.abs(De))&&Math.abs(rt-Le)<=k*Math.max(1,Math.abs(rt),Math.abs(Le))&&Math.abs(Tt-et)<=k*Math.max(1,Math.abs(Tt),Math.abs(et))&&Math.abs(zt-Qt)<=k*Math.max(1,Math.abs(zt),Math.abs(Qt))&&Math.abs(on-yn)<=k*Math.max(1,Math.abs(on),Math.abs(yn))}var Fn=ae,Ft=jt;function Pn(){var b=new M(16);return M!=Float32Array&&(b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=0,b[12]=0,b[13]=0,b[14]=0),b[0]=1,b[5]=1,b[10]=1,b[15]=1,b}function lr(b){var N=new M(16);return N[0]=b[0],N[1]=b[1],N[2]=b[2],N[3]=b[3],N[4]=b[4],N[5]=b[5],N[6]=b[6],N[7]=b[7],N[8]=b[8],N[9]=b[9],N[10]=b[10],N[11]=b[11],N[12]=b[12],N[13]=b[13],N[14]=b[14],N[15]=b[15],N}function hn(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[3],b[4]=N[4],b[5]=N[5],b[6]=N[6],b[7]=N[7],b[8]=N[8],b[9]=N[9],b[10]=N[10],b[11]=N[11],b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15],b}function On(b,N,te,Ee,Se,_e,Qe,rt,Tt,zt,on,He,Me,Ye,ut,De){var Le=new M(16);return Le[0]=b,Le[1]=N,Le[2]=te,Le[3]=Ee,Le[4]=Se,Le[5]=_e,Le[6]=Qe,Le[7]=rt,Le[8]=Tt,Le[9]=zt,Le[10]=on,Le[11]=He,Le[12]=Me,Le[13]=Ye,Le[14]=ut,Le[15]=De,Le}function jn(b,N,te,Ee,Se,_e,Qe,rt,Tt,zt,on,He,Me,Ye,ut,De,Le){return b[0]=N,b[1]=te,b[2]=Ee,b[3]=Se,b[4]=_e,b[5]=Qe,b[6]=rt,b[7]=Tt,b[8]=zt,b[9]=on,b[10]=He,b[11]=Me,b[12]=Ye,b[13]=ut,b[14]=De,b[15]=Le,b}function Dn(b){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function ft(b,N){if(b===N){var te=N[1],Ee=N[2],Se=N[3],_e=N[6],Qe=N[7],rt=N[11];b[1]=N[4],b[2]=N[8],b[3]=N[12],b[4]=te,b[6]=N[9],b[7]=N[13],b[8]=Ee,b[9]=_e,b[11]=N[14],b[12]=Se,b[13]=Qe,b[14]=rt}else b[0]=N[0],b[1]=N[4],b[2]=N[8],b[3]=N[12],b[4]=N[1],b[5]=N[5],b[6]=N[9],b[7]=N[13],b[8]=N[2],b[9]=N[6],b[10]=N[10],b[11]=N[14],b[12]=N[3],b[13]=N[7],b[14]=N[11],b[15]=N[15];return b}function Ut(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=N[4],rt=N[5],Tt=N[6],zt=N[7],on=N[8],He=N[9],Me=N[10],Ye=N[11],ut=N[12],De=N[13],Le=N[14],et=N[15],Qt=te*rt-Ee*Qe,yn=te*Tt-Se*Qe,Vn=te*zt-_e*Qe,sr=Ee*Tt-Se*rt,Zn=Ee*zt-_e*rt,ia=Se*zt-_e*Tt,na=on*De-He*ut,ea=on*Le-Me*ut,la=on*et-Ye*ut,si=He*Le-Me*De,Ra=He*et-Ye*De,ii=Me*et-Ye*Le,ma=Qt*ii-yn*Ra+Vn*si+sr*la-Zn*ea+ia*na;return ma?(ma=1/ma,b[0]=(rt*ii-Tt*Ra+zt*si)*ma,b[1]=(Se*Ra-Ee*ii-_e*si)*ma,b[2]=(De*ia-Le*Zn+et*sr)*ma,b[3]=(Me*Zn-He*ia-Ye*sr)*ma,b[4]=(Tt*la-Qe*ii-zt*ea)*ma,b[5]=(te*ii-Se*la+_e*ea)*ma,b[6]=(Le*Vn-ut*ia-et*yn)*ma,b[7]=(on*ia-Me*Vn+Ye*yn)*ma,b[8]=(Qe*Ra-rt*la+zt*na)*ma,b[9]=(Ee*la-te*Ra-_e*na)*ma,b[10]=(ut*Zn-De*Vn+et*Qt)*ma,b[11]=(He*Vn-on*Zn-Ye*Qt)*ma,b[12]=(rt*ea-Qe*si-Tt*na)*ma,b[13]=(te*si-Ee*ea+Se*na)*ma,b[14]=(De*yn-ut*sr-Le*Qt)*ma,b[15]=(on*sr-He*yn+Me*Qt)*ma,b):null}function ct(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=N[4],rt=N[5],Tt=N[6],zt=N[7],on=N[8],He=N[9],Me=N[10],Ye=N[11],ut=N[12],De=N[13],Le=N[14],et=N[15];return b[0]=rt*(Me*et-Ye*Le)-He*(Tt*et-zt*Le)+De*(Tt*Ye-zt*Me),b[1]=-(Ee*(Me*et-Ye*Le)-He*(Se*et-_e*Le)+De*(Se*Ye-_e*Me)),b[2]=Ee*(Tt*et-zt*Le)-rt*(Se*et-_e*Le)+De*(Se*zt-_e*Tt),b[3]=-(Ee*(Tt*Ye-zt*Me)-rt*(Se*Ye-_e*Me)+He*(Se*zt-_e*Tt)),b[4]=-(Qe*(Me*et-Ye*Le)-on*(Tt*et-zt*Le)+ut*(Tt*Ye-zt*Me)),b[5]=te*(Me*et-Ye*Le)-on*(Se*et-_e*Le)+ut*(Se*Ye-_e*Me),b[6]=-(te*(Tt*et-zt*Le)-Qe*(Se*et-_e*Le)+ut*(Se*zt-_e*Tt)),b[7]=te*(Tt*Ye-zt*Me)-Qe*(Se*Ye-_e*Me)+on*(Se*zt-_e*Tt),b[8]=Qe*(He*et-Ye*De)-on*(rt*et-zt*De)+ut*(rt*Ye-zt*He),b[9]=-(te*(He*et-Ye*De)-on*(Ee*et-_e*De)+ut*(Ee*Ye-_e*He)),b[10]=te*(rt*et-zt*De)-Qe*(Ee*et-_e*De)+ut*(Ee*zt-_e*rt),b[11]=-(te*(rt*Ye-zt*He)-Qe*(Ee*Ye-_e*He)+on*(Ee*zt-_e*rt)),b[12]=-(Qe*(He*Le-Me*De)-on*(rt*Le-Tt*De)+ut*(rt*Me-Tt*He)),b[13]=te*(He*Le-Me*De)-on*(Ee*Le-Se*De)+ut*(Ee*Me-Se*He),b[14]=-(te*(rt*Le-Tt*De)-Qe*(Ee*Le-Se*De)+ut*(Ee*Tt-Se*rt)),b[15]=te*(rt*Me-Tt*He)-Qe*(Ee*Me-Se*He)+on*(Ee*Tt-Se*rt),b}function Ct(b){var N=b[0],te=b[1],Ee=b[2],Se=b[3],_e=b[4],Qe=b[5],rt=b[6],Tt=b[7],zt=b[8],on=b[9],He=b[10],Me=b[11],Ye=b[12],ut=b[13],De=b[14],Le=b[15],et=N*Qe-te*_e,Qt=N*rt-Ee*_e,yn=N*Tt-Se*_e,Vn=te*rt-Ee*Qe,sr=te*Tt-Se*Qe,Zn=Ee*Tt-Se*rt,ia=zt*ut-on*Ye,na=zt*De-He*Ye,ea=zt*Le-Me*Ye,la=on*De-He*ut,si=on*Le-Me*ut,Ra=He*Le-Me*De;return et*Ra-Qt*si+yn*la+Vn*ea-sr*na+Zn*ia}function kt(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3],rt=N[4],Tt=N[5],zt=N[6],on=N[7],He=N[8],Me=N[9],Ye=N[10],ut=N[11],De=N[12],Le=N[13],et=N[14],Qt=N[15],yn=te[0],Vn=te[1],sr=te[2],Zn=te[3];return b[0]=yn*Ee+Vn*rt+sr*He+Zn*De,b[1]=yn*Se+Vn*Tt+sr*Me+Zn*Le,b[2]=yn*_e+Vn*zt+sr*Ye+Zn*et,b[3]=yn*Qe+Vn*on+sr*ut+Zn*Qt,yn=te[4],Vn=te[5],sr=te[6],Zn=te[7],b[4]=yn*Ee+Vn*rt+sr*He+Zn*De,b[5]=yn*Se+Vn*Tt+sr*Me+Zn*Le,b[6]=yn*_e+Vn*zt+sr*Ye+Zn*et,b[7]=yn*Qe+Vn*on+sr*ut+Zn*Qt,yn=te[8],Vn=te[9],sr=te[10],Zn=te[11],b[8]=yn*Ee+Vn*rt+sr*He+Zn*De,b[9]=yn*Se+Vn*Tt+sr*Me+Zn*Le,b[10]=yn*_e+Vn*zt+sr*Ye+Zn*et,b[11]=yn*Qe+Vn*on+sr*ut+Zn*Qt,yn=te[12],Vn=te[13],sr=te[14],Zn=te[15],b[12]=yn*Ee+Vn*rt+sr*He+Zn*De,b[13]=yn*Se+Vn*Tt+sr*Me+Zn*Le,b[14]=yn*_e+Vn*zt+sr*Ye+Zn*et,b[15]=yn*Qe+Vn*on+sr*ut+Zn*Qt,b}function yt(b,N,te){var Ee=te[0],Se=te[1],_e=te[2],Qe,rt,Tt,zt,on,He,Me,Ye,ut,De,Le,et;return N===b?(b[12]=N[0]*Ee+N[4]*Se+N[8]*_e+N[12],b[13]=N[1]*Ee+N[5]*Se+N[9]*_e+N[13],b[14]=N[2]*Ee+N[6]*Se+N[10]*_e+N[14],b[15]=N[3]*Ee+N[7]*Se+N[11]*_e+N[15]):(Qe=N[0],rt=N[1],Tt=N[2],zt=N[3],on=N[4],He=N[5],Me=N[6],Ye=N[7],ut=N[8],De=N[9],Le=N[10],et=N[11],b[0]=Qe,b[1]=rt,b[2]=Tt,b[3]=zt,b[4]=on,b[5]=He,b[6]=Me,b[7]=Ye,b[8]=ut,b[9]=De,b[10]=Le,b[11]=et,b[12]=Qe*Ee+on*Se+ut*_e+N[12],b[13]=rt*Ee+He*Se+De*_e+N[13],b[14]=Tt*Ee+Me*Se+Le*_e+N[14],b[15]=zt*Ee+Ye*Se+et*_e+N[15]),b}function tt(b,N,te){var Ee=te[0],Se=te[1],_e=te[2];return b[0]=N[0]*Ee,b[1]=N[1]*Ee,b[2]=N[2]*Ee,b[3]=N[3]*Ee,b[4]=N[4]*Se,b[5]=N[5]*Se,b[6]=N[6]*Se,b[7]=N[7]*Se,b[8]=N[8]*_e,b[9]=N[9]*_e,b[10]=N[10]*_e,b[11]=N[11]*_e,b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15],b}function I(b,N,te,Ee){var Se=Ee[0],_e=Ee[1],Qe=Ee[2],rt=Math.hypot(Se,_e,Qe),Tt,zt,on,He,Me,Ye,ut,De,Le,et,Qt,yn,Vn,sr,Zn,ia,na,ea,la,si,Ra,ii,ma,fa;return rt<k?null:(rt=1/rt,Se*=rt,_e*=rt,Qe*=rt,Tt=Math.sin(te),zt=Math.cos(te),on=1-zt,He=N[0],Me=N[1],Ye=N[2],ut=N[3],De=N[4],Le=N[5],et=N[6],Qt=N[7],yn=N[8],Vn=N[9],sr=N[10],Zn=N[11],ia=Se*Se*on+zt,na=_e*Se*on+Qe*Tt,ea=Qe*Se*on-_e*Tt,la=Se*_e*on-Qe*Tt,si=_e*_e*on+zt,Ra=Qe*_e*on+Se*Tt,ii=Se*Qe*on+_e*Tt,ma=_e*Qe*on-Se*Tt,fa=Qe*Qe*on+zt,b[0]=He*ia+De*na+yn*ea,b[1]=Me*ia+Le*na+Vn*ea,b[2]=Ye*ia+et*na+sr*ea,b[3]=ut*ia+Qt*na+Zn*ea,b[4]=He*la+De*si+yn*Ra,b[5]=Me*la+Le*si+Vn*Ra,b[6]=Ye*la+et*si+sr*Ra,b[7]=ut*la+Qt*si+Zn*Ra,b[8]=He*ii+De*ma+yn*fa,b[9]=Me*ii+Le*ma+Vn*fa,b[10]=Ye*ii+et*ma+sr*fa,b[11]=ut*ii+Qt*ma+Zn*fa,N!==b&&(b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15]),b)}function Mn(b,N,te){var Ee=Math.sin(te),Se=Math.cos(te),_e=N[4],Qe=N[5],rt=N[6],Tt=N[7],zt=N[8],on=N[9],He=N[10],Me=N[11];return N!==b&&(b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[3],b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15]),b[4]=_e*Se+zt*Ee,b[5]=Qe*Se+on*Ee,b[6]=rt*Se+He*Ee,b[7]=Tt*Se+Me*Ee,b[8]=zt*Se-_e*Ee,b[9]=on*Se-Qe*Ee,b[10]=He*Se-rt*Ee,b[11]=Me*Se-Tt*Ee,b}function dt(b,N,te){var Ee=Math.sin(te),Se=Math.cos(te),_e=N[0],Qe=N[1],rt=N[2],Tt=N[3],zt=N[8],on=N[9],He=N[10],Me=N[11];return N!==b&&(b[4]=N[4],b[5]=N[5],b[6]=N[6],b[7]=N[7],b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15]),b[0]=_e*Se-zt*Ee,b[1]=Qe*Se-on*Ee,b[2]=rt*Se-He*Ee,b[3]=Tt*Se-Me*Ee,b[8]=_e*Ee+zt*Se,b[9]=Qe*Ee+on*Se,b[10]=rt*Ee+He*Se,b[11]=Tt*Ee+Me*Se,b}function vt(b,N,te){var Ee=Math.sin(te),Se=Math.cos(te),_e=N[0],Qe=N[1],rt=N[2],Tt=N[3],zt=N[4],on=N[5],He=N[6],Me=N[7];return N!==b&&(b[8]=N[8],b[9]=N[9],b[10]=N[10],b[11]=N[11],b[12]=N[12],b[13]=N[13],b[14]=N[14],b[15]=N[15]),b[0]=_e*Se+zt*Ee,b[1]=Qe*Se+on*Ee,b[2]=rt*Se+He*Ee,b[3]=Tt*Se+Me*Ee,b[4]=zt*Se-_e*Ee,b[5]=on*Se-Qe*Ee,b[6]=He*Se-rt*Ee,b[7]=Me*Se-Tt*Ee,b}function Bt(b,N){return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=N[0],b[13]=N[1],b[14]=N[2],b[15]=1,b}function me(b,N){return b[0]=N[0],b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=N[1],b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=N[2],b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function ue(b,N,te){var Ee=te[0],Se=te[1],_e=te[2],Qe=Math.hypot(Ee,Se,_e),rt,Tt,zt;return Qe<k?null:(Qe=1/Qe,Ee*=Qe,Se*=Qe,_e*=Qe,rt=Math.sin(N),Tt=Math.cos(N),zt=1-Tt,b[0]=Ee*Ee*zt+Tt,b[1]=Se*Ee*zt+_e*rt,b[2]=_e*Ee*zt-Se*rt,b[3]=0,b[4]=Ee*Se*zt-_e*rt,b[5]=Se*Se*zt+Tt,b[6]=_e*Se*zt+Ee*rt,b[7]=0,b[8]=Ee*_e*zt+Se*rt,b[9]=Se*_e*zt-Ee*rt,b[10]=_e*_e*zt+Tt,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b)}function Re(b,N){var te=Math.sin(N),Ee=Math.cos(N);return b[0]=1,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=Ee,b[6]=te,b[7]=0,b[8]=0,b[9]=-te,b[10]=Ee,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function Rt(b,N){var te=Math.sin(N),Ee=Math.cos(N);return b[0]=Ee,b[1]=0,b[2]=-te,b[3]=0,b[4]=0,b[5]=1,b[6]=0,b[7]=0,b[8]=te,b[9]=0,b[10]=Ee,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function Kt(b,N){var te=Math.sin(N),Ee=Math.cos(N);return b[0]=Ee,b[1]=te,b[2]=0,b[3]=0,b[4]=-te,b[5]=Ee,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=1,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function Bn(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3],rt=Ee+Ee,Tt=Se+Se,zt=_e+_e,on=Ee*rt,He=Ee*Tt,Me=Ee*zt,Ye=Se*Tt,ut=Se*zt,De=_e*zt,Le=Qe*rt,et=Qe*Tt,Qt=Qe*zt;return b[0]=1-(Ye+De),b[1]=He+Qt,b[2]=Me-et,b[3]=0,b[4]=He-Qt,b[5]=1-(on+De),b[6]=ut+Le,b[7]=0,b[8]=Me+et,b[9]=ut-Le,b[10]=1-(on+Ye),b[11]=0,b[12]=te[0],b[13]=te[1],b[14]=te[2],b[15]=1,b}function Nr(b,N){var te=new M(3),Ee=-N[0],Se=-N[1],_e=-N[2],Qe=N[3],rt=N[4],Tt=N[5],zt=N[6],on=N[7],He=Ee*Ee+Se*Se+_e*_e+Qe*Qe;return He>0?(te[0]=(rt*Qe+on*Ee+Tt*_e-zt*Se)*2/He,te[1]=(Tt*Qe+on*Se+zt*Ee-rt*_e)*2/He,te[2]=(zt*Qe+on*_e+rt*Se-Tt*Ee)*2/He):(te[0]=(rt*Qe+on*Ee+Tt*_e-zt*Se)*2,te[1]=(Tt*Qe+on*Se+zt*Ee-rt*_e)*2,te[2]=(zt*Qe+on*_e+rt*Se-Tt*Ee)*2),Bn(b,N,te),b}function Rn(b,N){return b[0]=N[12],b[1]=N[13],b[2]=N[14],b}function Cr(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[4],Qe=N[5],rt=N[6],Tt=N[8],zt=N[9],on=N[10];return b[0]=Math.hypot(te,Ee,Se),b[1]=Math.hypot(_e,Qe,rt),b[2]=Math.hypot(Tt,zt,on),b}function tr(b,N){var te=new M(3);Cr(te,N);var Ee=1/te[0],Se=1/te[1],_e=1/te[2],Qe=N[0]*Ee,rt=N[1]*Se,Tt=N[2]*_e,zt=N[4]*Ee,on=N[5]*Se,He=N[6]*_e,Me=N[8]*Ee,Ye=N[9]*Se,ut=N[10]*_e,De=Qe+on+ut,Le=0;return De>0?(Le=Math.sqrt(De+1)*2,b[3]=.25*Le,b[0]=(He-Ye)/Le,b[1]=(Me-Tt)/Le,b[2]=(rt-zt)/Le):Qe>on&&Qe>ut?(Le=Math.sqrt(1+Qe-on-ut)*2,b[3]=(He-Ye)/Le,b[0]=.25*Le,b[1]=(rt+zt)/Le,b[2]=(Me+Tt)/Le):on>ut?(Le=Math.sqrt(1+on-Qe-ut)*2,b[3]=(Me-Tt)/Le,b[0]=(rt+zt)/Le,b[1]=.25*Le,b[2]=(He+Ye)/Le):(Le=Math.sqrt(1+ut-Qe-on)*2,b[3]=(rt-zt)/Le,b[0]=(Me+Tt)/Le,b[1]=(He+Ye)/Le,b[2]=.25*Le),b}function jr(b,N,te,Ee){var Se=N[0],_e=N[1],Qe=N[2],rt=N[3],Tt=Se+Se,zt=_e+_e,on=Qe+Qe,He=Se*Tt,Me=Se*zt,Ye=Se*on,ut=_e*zt,De=_e*on,Le=Qe*on,et=rt*Tt,Qt=rt*zt,yn=rt*on,Vn=Ee[0],sr=Ee[1],Zn=Ee[2];return b[0]=(1-(ut+Le))*Vn,b[1]=(Me+yn)*Vn,b[2]=(Ye-Qt)*Vn,b[3]=0,b[4]=(Me-yn)*sr,b[5]=(1-(He+Le))*sr,b[6]=(De+et)*sr,b[7]=0,b[8]=(Ye+Qt)*Zn,b[9]=(De-et)*Zn,b[10]=(1-(He+ut))*Zn,b[11]=0,b[12]=te[0],b[13]=te[1],b[14]=te[2],b[15]=1,b}function zr(b,N,te,Ee,Se){var _e=N[0],Qe=N[1],rt=N[2],Tt=N[3],zt=_e+_e,on=Qe+Qe,He=rt+rt,Me=_e*zt,Ye=_e*on,ut=_e*He,De=Qe*on,Le=Qe*He,et=rt*He,Qt=Tt*zt,yn=Tt*on,Vn=Tt*He,sr=Ee[0],Zn=Ee[1],ia=Ee[2],na=Se[0],ea=Se[1],la=Se[2],si=(1-(De+et))*sr,Ra=(Ye+Vn)*sr,ii=(ut-yn)*sr,ma=(Ye-Vn)*Zn,fa=(1-(Me+et))*Zn,io=(Le+Qt)*Zn,_s=(ut+yn)*ia,Xl=(Le-Qt)*ia,mc=(1-(Me+De))*ia;return b[0]=si,b[1]=Ra,b[2]=ii,b[3]=0,b[4]=ma,b[5]=fa,b[6]=io,b[7]=0,b[8]=_s,b[9]=Xl,b[10]=mc,b[11]=0,b[12]=te[0]+na-(si*na+ma*ea+_s*la),b[13]=te[1]+ea-(Ra*na+fa*ea+Xl*la),b[14]=te[2]+la-(ii*na+io*ea+mc*la),b[15]=1,b}function Ua(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=te+te,rt=Ee+Ee,Tt=Se+Se,zt=te*Qe,on=Ee*Qe,He=Ee*rt,Me=Se*Qe,Ye=Se*rt,ut=Se*Tt,De=_e*Qe,Le=_e*rt,et=_e*Tt;return b[0]=1-He-ut,b[1]=on+et,b[2]=Me-Le,b[3]=0,b[4]=on-et,b[5]=1-zt-ut,b[6]=Ye+De,b[7]=0,b[8]=Me+Le,b[9]=Ye-De,b[10]=1-zt-He,b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b}function oa(b,N,te,Ee,Se,_e,Qe){var rt=1/(te-N),Tt=1/(Se-Ee),zt=1/(_e-Qe);return b[0]=_e*2*rt,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=_e*2*Tt,b[6]=0,b[7]=0,b[8]=(te+N)*rt,b[9]=(Se+Ee)*Tt,b[10]=(Qe+_e)*zt,b[11]=-1,b[12]=0,b[13]=0,b[14]=Qe*_e*2*zt,b[15]=0,b}function Za(b,N,te,Ee,Se){var _e=1/Math.tan(N/2),Qe;return b[0]=_e/te,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=_e,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,Se!=null&&Se!==Infinity?(Qe=1/(Ee-Se),b[10]=(Se+Ee)*Qe,b[14]=2*Se*Ee*Qe):(b[10]=-1,b[14]=-2*Ee),b}var ba=Za;function Pa(b,N,te,Ee,Se){var _e=1/Math.tan(N/2),Qe;return b[0]=_e/te,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=_e,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[11]=-1,b[12]=0,b[13]=0,b[15]=0,Se!=null&&Se!==Infinity?(Qe=1/(Ee-Se),b[10]=Se*Qe,b[14]=Se*Ee*Qe):(b[10]=-1,b[14]=-Ee),b}function ri(b,N,te,Ee){var Se=Math.tan(N.upDegrees*Math.PI/180),_e=Math.tan(N.downDegrees*Math.PI/180),Qe=Math.tan(N.leftDegrees*Math.PI/180),rt=Math.tan(N.rightDegrees*Math.PI/180),Tt=2/(Qe+rt),zt=2/(Se+_e);return b[0]=Tt,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=zt,b[6]=0,b[7]=0,b[8]=-((Qe-rt)*Tt*.5),b[9]=(Se-_e)*zt*.5,b[10]=Ee/(te-Ee),b[11]=-1,b[12]=0,b[13]=0,b[14]=Ee*te/(te-Ee),b[15]=0,b}function li(b,N,te,Ee,Se,_e,Qe){var rt=1/(N-te),Tt=1/(Ee-Se),zt=1/(_e-Qe);return b[0]=-2*rt,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*Tt,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=2*zt,b[11]=0,b[12]=(N+te)*rt,b[13]=(Se+Ee)*Tt,b[14]=(Qe+_e)*zt,b[15]=1,b}var ka=li;function ai(b,N,te,Ee,Se,_e,Qe){var rt=1/(N-te),Tt=1/(Ee-Se),zt=1/(_e-Qe);return b[0]=-2*rt,b[1]=0,b[2]=0,b[3]=0,b[4]=0,b[5]=-2*Tt,b[6]=0,b[7]=0,b[8]=0,b[9]=0,b[10]=zt,b[11]=0,b[12]=(N+te)*rt,b[13]=(Se+Ee)*Tt,b[14]=_e*zt,b[15]=1,b}function Qa(b,N,te,Ee){var Se,_e,Qe,rt,Tt,zt,on,He,Me,Ye,ut=N[0],De=N[1],Le=N[2],et=Ee[0],Qt=Ee[1],yn=Ee[2],Vn=te[0],sr=te[1],Zn=te[2];return Math.abs(ut-Vn)<k&&Math.abs(De-sr)<k&&Math.abs(Le-Zn)<k?Dn(b):(on=ut-Vn,He=De-sr,Me=Le-Zn,Ye=1/Math.hypot(on,He,Me),on*=Ye,He*=Ye,Me*=Ye,Se=Qt*Me-yn*He,_e=yn*on-et*Me,Qe=et*He-Qt*on,Ye=Math.hypot(Se,_e,Qe),Ye?(Ye=1/Ye,Se*=Ye,_e*=Ye,Qe*=Ye):(Se=0,_e=0,Qe=0),rt=He*Qe-Me*_e,Tt=Me*Se-on*Qe,zt=on*_e-He*Se,Ye=Math.hypot(rt,Tt,zt),Ye?(Ye=1/Ye,rt*=Ye,Tt*=Ye,zt*=Ye):(rt=0,Tt=0,zt=0),b[0]=Se,b[1]=rt,b[2]=on,b[3]=0,b[4]=_e,b[5]=Tt,b[6]=He,b[7]=0,b[8]=Qe,b[9]=zt,b[10]=Me,b[11]=0,b[12]=-(Se*ut+_e*De+Qe*Le),b[13]=-(rt*ut+Tt*De+zt*Le),b[14]=-(on*ut+He*De+Me*Le),b[15]=1,b)}function aa(b,N,te,Ee){var Se=N[0],_e=N[1],Qe=N[2],rt=Ee[0],Tt=Ee[1],zt=Ee[2],on=Se-te[0],He=_e-te[1],Me=Qe-te[2],Ye=on*on+He*He+Me*Me;Ye>0&&(Ye=1/Math.sqrt(Ye),on*=Ye,He*=Ye,Me*=Ye);var ut=Tt*Me-zt*He,De=zt*on-rt*Me,Le=rt*He-Tt*on;return Ye=ut*ut+De*De+Le*Le,Ye>0&&(Ye=1/Math.sqrt(Ye),ut*=Ye,De*=Ye,Le*=Ye),b[0]=ut,b[1]=De,b[2]=Le,b[3]=0,b[4]=He*Le-Me*De,b[5]=Me*ut-on*Le,b[6]=on*De-He*ut,b[7]=0,b[8]=on,b[9]=He,b[10]=Me,b[11]=0,b[12]=Se,b[13]=_e,b[14]=Qe,b[15]=1,b}function Gi(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+b[15]+")"}function mo(b){return Math.hypot(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15])}function sa(b,N,te){return b[0]=N[0]+te[0],b[1]=N[1]+te[1],b[2]=N[2]+te[2],b[3]=N[3]+te[3],b[4]=N[4]+te[4],b[5]=N[5]+te[5],b[6]=N[6]+te[6],b[7]=N[7]+te[7],b[8]=N[8]+te[8],b[9]=N[9]+te[9],b[10]=N[10]+te[10],b[11]=N[11]+te[11],b[12]=N[12]+te[12],b[13]=N[13]+te[13],b[14]=N[14]+te[14],b[15]=N[15]+te[15],b}function yi(b,N,te){return b[0]=N[0]-te[0],b[1]=N[1]-te[1],b[2]=N[2]-te[2],b[3]=N[3]-te[3],b[4]=N[4]-te[4],b[5]=N[5]-te[5],b[6]=N[6]-te[6],b[7]=N[7]-te[7],b[8]=N[8]-te[8],b[9]=N[9]-te[9],b[10]=N[10]-te[10],b[11]=N[11]-te[11],b[12]=N[12]-te[12],b[13]=N[13]-te[13],b[14]=N[14]-te[14],b[15]=N[15]-te[15],b}function Io(b,N,te){return b[0]=N[0]*te,b[1]=N[1]*te,b[2]=N[2]*te,b[3]=N[3]*te,b[4]=N[4]*te,b[5]=N[5]*te,b[6]=N[6]*te,b[7]=N[7]*te,b[8]=N[8]*te,b[9]=N[9]*te,b[10]=N[10]*te,b[11]=N[11]*te,b[12]=N[12]*te,b[13]=N[13]*te,b[14]=N[14]*te,b[15]=N[15]*te,b}function Pi(b,N,te,Ee){return b[0]=N[0]+te[0]*Ee,b[1]=N[1]+te[1]*Ee,b[2]=N[2]+te[2]*Ee,b[3]=N[3]+te[3]*Ee,b[4]=N[4]+te[4]*Ee,b[5]=N[5]+te[5]*Ee,b[6]=N[6]+te[6]*Ee,b[7]=N[7]+te[7]*Ee,b[8]=N[8]+te[8]*Ee,b[9]=N[9]+te[9]*Ee,b[10]=N[10]+te[10]*Ee,b[11]=N[11]+te[11]*Ee,b[12]=N[12]+te[12]*Ee,b[13]=N[13]+te[13]*Ee,b[14]=N[14]+te[14]*Ee,b[15]=N[15]+te[15]*Ee,b}function ao(b,N){return b[0]===N[0]&&b[1]===N[1]&&b[2]===N[2]&&b[3]===N[3]&&b[4]===N[4]&&b[5]===N[5]&&b[6]===N[6]&&b[7]===N[7]&&b[8]===N[8]&&b[9]===N[9]&&b[10]===N[10]&&b[11]===N[11]&&b[12]===N[12]&&b[13]===N[13]&&b[14]===N[14]&&b[15]===N[15]}function ki(b,N){var te=b[0],Ee=b[1],Se=b[2],_e=b[3],Qe=b[4],rt=b[5],Tt=b[6],zt=b[7],on=b[8],He=b[9],Me=b[10],Ye=b[11],ut=b[12],De=b[13],Le=b[14],et=b[15],Qt=N[0],yn=N[1],Vn=N[2],sr=N[3],Zn=N[4],ia=N[5],na=N[6],ea=N[7],la=N[8],si=N[9],Ra=N[10],ii=N[11],ma=N[12],fa=N[13],io=N[14],_s=N[15];return Math.abs(te-Qt)<=k*Math.max(1,Math.abs(te),Math.abs(Qt))&&Math.abs(Ee-yn)<=k*Math.max(1,Math.abs(Ee),Math.abs(yn))&&Math.abs(Se-Vn)<=k*Math.max(1,Math.abs(Se),Math.abs(Vn))&&Math.abs(_e-sr)<=k*Math.max(1,Math.abs(_e),Math.abs(sr))&&Math.abs(Qe-Zn)<=k*Math.max(1,Math.abs(Qe),Math.abs(Zn))&&Math.abs(rt-ia)<=k*Math.max(1,Math.abs(rt),Math.abs(ia))&&Math.abs(Tt-na)<=k*Math.max(1,Math.abs(Tt),Math.abs(na))&&Math.abs(zt-ea)<=k*Math.max(1,Math.abs(zt),Math.abs(ea))&&Math.abs(on-la)<=k*Math.max(1,Math.abs(on),Math.abs(la))&&Math.abs(He-si)<=k*Math.max(1,Math.abs(He),Math.abs(si))&&Math.abs(Me-Ra)<=k*Math.max(1,Math.abs(Me),Math.abs(Ra))&&Math.abs(Ye-ii)<=k*Math.max(1,Math.abs(Ye),Math.abs(ii))&&Math.abs(ut-ma)<=k*Math.max(1,Math.abs(ut),Math.abs(ma))&&Math.abs(De-fa)<=k*Math.max(1,Math.abs(De),Math.abs(fa))&&Math.abs(Le-io)<=k*Math.max(1,Math.abs(Le),Math.abs(io))&&Math.abs(et-_s)<=k*Math.max(1,Math.abs(et),Math.abs(_s))}var ot=kt,It=yi;function Ne(){var b=new M(3);return M!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b}function St(b){var N=new M(3);return N[0]=b[0],N[1]=b[1],N[2]=b[2],N}function Ve(b){var N=b[0],te=b[1],Ee=b[2];return Math.hypot(N,te,Ee)}function Xt(b,N,te){var Ee=new M(3);return Ee[0]=b,Ee[1]=N,Ee[2]=te,Ee}function gn(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b}function pn(b,N,te,Ee){return b[0]=N,b[1]=te,b[2]=Ee,b}function en(b,N,te){return b[0]=N[0]+te[0],b[1]=N[1]+te[1],b[2]=N[2]+te[2],b}function In(b,N,te){return b[0]=N[0]-te[0],b[1]=N[1]-te[1],b[2]=N[2]-te[2],b}function $r(b,N,te){return b[0]=N[0]*te[0],b[1]=N[1]*te[1],b[2]=N[2]*te[2],b}function da(b,N,te){return b[0]=N[0]/te[0],b[1]=N[1]/te[1],b[2]=N[2]/te[2],b}function Oa(b,N){return b[0]=Math.ceil(N[0]),b[1]=Math.ceil(N[1]),b[2]=Math.ceil(N[2]),b}function Ka(b,N){return b[0]=Math.floor(N[0]),b[1]=Math.floor(N[1]),b[2]=Math.floor(N[2]),b}function bi(b,N,te){return b[0]=Math.min(N[0],te[0]),b[1]=Math.min(N[1],te[1]),b[2]=Math.min(N[2],te[2]),b}function _a(b,N,te){return b[0]=Math.max(N[0],te[0]),b[1]=Math.max(N[1],te[1]),b[2]=Math.max(N[2],te[2]),b}function ti(b,N){return b[0]=Math.round(N[0]),b[1]=Math.round(N[1]),b[2]=Math.round(N[2]),b}function tn(b,N,te){return b[0]=N[0]*te,b[1]=N[1]*te,b[2]=N[2]*te,b}function mn(b,N,te,Ee){return b[0]=N[0]+te[0]*Ee,b[1]=N[1]+te[1]*Ee,b[2]=N[2]+te[2]*Ee,b}function nr(b,N){var te=N[0]-b[0],Ee=N[1]-b[1],Se=N[2]-b[2];return Math.hypot(te,Ee,Se)}function or(b,N){var te=N[0]-b[0],Ee=N[1]-b[1],Se=N[2]-b[2];return te*te+Ee*Ee+Se*Se}function Zr(b){var N=b[0],te=b[1],Ee=b[2];return N*N+te*te+Ee*Ee}function Vi(b,N){return b[0]=-N[0],b[1]=-N[1],b[2]=-N[2],b}function Da(b,N){return b[0]=1/N[0],b[1]=1/N[1],b[2]=1/N[2],b}function Ea(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=te*te+Ee*Ee+Se*Se;return _e>0&&(_e=1/Math.sqrt(_e)),b[0]=N[0]*_e,b[1]=N[1]*_e,b[2]=N[2]*_e,b}function ta(b,N){return b[0]*N[0]+b[1]*N[1]+b[2]*N[2]}function ha(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=te[0],rt=te[1],Tt=te[2];return b[0]=Se*Tt-_e*rt,b[1]=_e*Qe-Ee*Tt,b[2]=Ee*rt-Se*Qe,b}function Kr(b,N,te,Ee){var Se=N[0],_e=N[1],Qe=N[2];return b[0]=Se+Ee*(te[0]-Se),b[1]=_e+Ee*(te[1]-_e),b[2]=Qe+Ee*(te[2]-Qe),b}function qi(b,N,te,Ee,Se,_e){var Qe=_e*_e,rt=Qe*(2*_e-3)+1,Tt=Qe*(_e-2)+_e,zt=Qe*(_e-1),on=Qe*(3-2*_e);return b[0]=N[0]*rt+te[0]*Tt+Ee[0]*zt+Se[0]*on,b[1]=N[1]*rt+te[1]*Tt+Ee[1]*zt+Se[1]*on,b[2]=N[2]*rt+te[2]*Tt+Ee[2]*zt+Se[2]*on,b}function So(b,N,te,Ee,Se,_e){var Qe=1-_e,rt=Qe*Qe,Tt=_e*_e,zt=rt*Qe,on=3*_e*rt,He=3*Tt*Qe,Me=Tt*_e;return b[0]=N[0]*zt+te[0]*on+Ee[0]*He+Se[0]*Me,b[1]=N[1]*zt+te[1]*on+Ee[1]*He+Se[1]*Me,b[2]=N[2]*zt+te[2]*on+Ee[2]*He+Se[2]*Me,b}function Js(b,N){N=N||1;var te=U()*2*Math.PI,Ee=U()*2-1,Se=Math.sqrt(1-Ee*Ee)*N;return b[0]=Math.cos(te)*Se,b[1]=Math.sin(te)*Se,b[2]=Ee*N,b}function Ro(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=te[3]*Ee+te[7]*Se+te[11]*_e+te[15];return Qe=Qe||1,b[0]=(te[0]*Ee+te[4]*Se+te[8]*_e+te[12])/Qe,b[1]=(te[1]*Ee+te[5]*Se+te[9]*_e+te[13])/Qe,b[2]=(te[2]*Ee+te[6]*Se+te[10]*_e+te[14])/Qe,b}function Zo(b,N,te){var Ee=N[0],Se=N[1],_e=N[2];return b[0]=Ee*te[0]+Se*te[3]+_e*te[6],b[1]=Ee*te[1]+Se*te[4]+_e*te[7],b[2]=Ee*te[2]+Se*te[5]+_e*te[8],b}function Ss(b,N,te){var Ee=te[0],Se=te[1],_e=te[2],Qe=te[3],rt=N[0],Tt=N[1],zt=N[2],on=Se*zt-_e*Tt,He=_e*rt-Ee*zt,Me=Ee*Tt-Se*rt,Ye=Se*Me-_e*He,ut=_e*on-Ee*Me,De=Ee*He-Se*on,Le=Qe*2;return on*=Le,He*=Le,Me*=Le,Ye*=2,ut*=2,De*=2,b[0]=rt+on+Ye,b[1]=Tt+He+ut,b[2]=zt+Me+De,b}function gs(b,N,te,Ee){var Se=[],_e=[];return Se[0]=N[0]-te[0],Se[1]=N[1]-te[1],Se[2]=N[2]-te[2],_e[0]=Se[0],_e[1]=Se[1]*Math.cos(Ee)-Se[2]*Math.sin(Ee),_e[2]=Se[1]*Math.sin(Ee)+Se[2]*Math.cos(Ee),b[0]=_e[0]+te[0],b[1]=_e[1]+te[1],b[2]=_e[2]+te[2],b}function ou(b,N,te,Ee){var Se=[],_e=[];return Se[0]=N[0]-te[0],Se[1]=N[1]-te[1],Se[2]=N[2]-te[2],_e[0]=Se[2]*Math.sin(Ee)+Se[0]*Math.cos(Ee),_e[1]=Se[1],_e[2]=Se[2]*Math.cos(Ee)-Se[0]*Math.sin(Ee),b[0]=_e[0]+te[0],b[1]=_e[1]+te[1],b[2]=_e[2]+te[2],b}function As(b,N,te,Ee){var Se=[],_e=[];return Se[0]=N[0]-te[0],Se[1]=N[1]-te[1],Se[2]=N[2]-te[2],_e[0]=Se[0]*Math.cos(Ee)-Se[1]*Math.sin(Ee),_e[1]=Se[0]*Math.sin(Ee)+Se[1]*Math.cos(Ee),_e[2]=Se[2],b[0]=_e[0]+te[0],b[1]=_e[1]+te[1],b[2]=_e[2]+te[2],b}function Ms(b,N){var te=b[0],Ee=b[1],Se=b[2],_e=N[0],Qe=N[1],rt=N[2],Tt=Math.sqrt(te*te+Ee*Ee+Se*Se),zt=Math.sqrt(_e*_e+Qe*Qe+rt*rt),on=Tt*zt,He=on&&ta(b,N)/on;return Math.acos(Math.min(Math.max(He,-1),1))}function Vo(b){return b[0]=0,b[1]=0,b[2]=0,b}function us(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"}function Ki(b,N){return b[0]===N[0]&&b[1]===N[1]&&b[2]===N[2]}function Eu(b,N){var te=b[0],Ee=b[1],Se=b[2],_e=N[0],Qe=N[1],rt=N[2];return Math.abs(te-_e)<=k*Math.max(1,Math.abs(te),Math.abs(_e))&&Math.abs(Ee-Qe)<=k*Math.max(1,Math.abs(Ee),Math.abs(Qe))&&Math.abs(Se-rt)<=k*Math.max(1,Math.abs(Se),Math.abs(rt))}var su=In,Zs=$r,Is=da,gl=nr,Vl=or,uu=Ve,Rs=Zr,el=function(){var b=Ne();return function(N,te,Ee,Se,_e,Qe){var rt,Tt;for(te||(te=3),Ee||(Ee=0),Se?Tt=Math.min(Se*te+Ee,N.length):Tt=N.length,rt=Ee;rt<Tt;rt+=te)b[0]=N[rt],b[1]=N[rt+1],b[2]=N[rt+2],_e(b,b,Qe),N[rt]=b[0],N[rt+1]=b[1],N[rt+2]=b[2];return N}}();function tl(){var b=new M(4);return M!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0,b[3]=0),b}function nl(b){var N=new M(4);return N[0]=b[0],N[1]=b[1],N[2]=b[2],N[3]=b[3],N}function Hl(b,N,te,Ee){var Se=new M(4);return Se[0]=b,Se[1]=N,Se[2]=te,Se[3]=Ee,Se}function Ts(b,N){return b[0]=N[0],b[1]=N[1],b[2]=N[2],b[3]=N[3],b}function Wl(b,N,te,Ee,Se){return b[0]=N,b[1]=te,b[2]=Ee,b[3]=Se,b}function Ou(b,N,te){return b[0]=N[0]+te[0],b[1]=N[1]+te[1],b[2]=N[2]+te[2],b[3]=N[3]+te[3],b}function Nu(b,N,te){return b[0]=N[0]-te[0],b[1]=N[1]-te[1],b[2]=N[2]-te[2],b[3]=N[3]-te[3],b}function Qs(b,N,te){return b[0]=N[0]*te[0],b[1]=N[1]*te[1],b[2]=N[2]*te[2],b[3]=N[3]*te[3],b}function rl(b,N,te){return b[0]=N[0]/te[0],b[1]=N[1]/te[1],b[2]=N[2]/te[2],b[3]=N[3]/te[3],b}function sf(b,N){return b[0]=Math.ceil(N[0]),b[1]=Math.ceil(N[1]),b[2]=Math.ceil(N[2]),b[3]=Math.ceil(N[3]),b}function ml(b,N){return b[0]=Math.floor(N[0]),b[1]=Math.floor(N[1]),b[2]=Math.floor(N[2]),b[3]=Math.floor(N[3]),b}function al(b,N,te){return b[0]=Math.min(N[0],te[0]),b[1]=Math.min(N[1],te[1]),b[2]=Math.min(N[2],te[2]),b[3]=Math.min(N[3],te[3]),b}function pc(b,N,te){return b[0]=Math.max(N[0],te[0]),b[1]=Math.max(N[1],te[1]),b[2]=Math.max(N[2],te[2]),b[3]=Math.max(N[3],te[3]),b}function Et(b,N){return b[0]=Math.round(N[0]),b[1]=Math.round(N[1]),b[2]=Math.round(N[2]),b[3]=Math.round(N[3]),b}function mt(b,N,te){return b[0]=N[0]*te,b[1]=N[1]*te,b[2]=N[2]*te,b[3]=N[3]*te,b}function wt(b,N,te,Ee){return b[0]=N[0]+te[0]*Ee,b[1]=N[1]+te[1]*Ee,b[2]=N[2]+te[2]*Ee,b[3]=N[3]+te[3]*Ee,b}function $t(b,N){var te=N[0]-b[0],Ee=N[1]-b[1],Se=N[2]-b[2],_e=N[3]-b[3];return Math.hypot(te,Ee,Se,_e)}function _t(b,N){var te=N[0]-b[0],Ee=N[1]-b[1],Se=N[2]-b[2],_e=N[3]-b[3];return te*te+Ee*Ee+Se*Se+_e*_e}function xn(b){var N=b[0],te=b[1],Ee=b[2],Se=b[3];return Math.hypot(N,te,Ee,Se)}function Ln(b){var N=b[0],te=b[1],Ee=b[2],Se=b[3];return N*N+te*te+Ee*Ee+Se*Se}function Yn(b,N){return b[0]=-N[0],b[1]=-N[1],b[2]=-N[2],b[3]=-N[3],b}function Ar(b,N){return b[0]=1/N[0],b[1]=1/N[1],b[2]=1/N[2],b[3]=1/N[3],b}function er(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=te*te+Ee*Ee+Se*Se+_e*_e;return Qe>0&&(Qe=1/Math.sqrt(Qe)),b[0]=te*Qe,b[1]=Ee*Qe,b[2]=Se*Qe,b[3]=_e*Qe,b}function Mr(b,N){return b[0]*N[0]+b[1]*N[1]+b[2]*N[2]+b[3]*N[3]}function rr(b,N,te,Ee){var Se=te[0]*Ee[1]-te[1]*Ee[0],_e=te[0]*Ee[2]-te[2]*Ee[0],Qe=te[0]*Ee[3]-te[3]*Ee[0],rt=te[1]*Ee[2]-te[2]*Ee[1],Tt=te[1]*Ee[3]-te[3]*Ee[1],zt=te[2]*Ee[3]-te[3]*Ee[2],on=N[0],He=N[1],Me=N[2],Ye=N[3];return b[0]=He*zt-Me*Tt+Ye*rt,b[1]=-(on*zt)+Me*Qe-Ye*_e,b[2]=on*Tt-He*Qe+Ye*Se,b[3]=-(on*rt)+He*_e-Me*Se,b}function Rr(b,N,te,Ee){var Se=N[0],_e=N[1],Qe=N[2],rt=N[3];return b[0]=Se+Ee*(te[0]-Se),b[1]=_e+Ee*(te[1]-_e),b[2]=Qe+Ee*(te[2]-Qe),b[3]=rt+Ee*(te[3]-rt),b}function Dr(b,N){N=N||1;var te,Ee,Se,_e,Qe,rt;do te=U()*2-1,Ee=U()*2-1,Qe=te*te+Ee*Ee;while(Qe>=1);do Se=U()*2-1,_e=U()*2-1,rt=Se*Se+_e*_e;while(rt>=1);var Tt=Math.sqrt((1-Qe)/rt);return b[0]=N*te,b[1]=N*Ee,b[2]=N*Se*Tt,b[3]=N*_e*Tt,b}function qr(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3];return b[0]=te[0]*Ee+te[4]*Se+te[8]*_e+te[12]*Qe,b[1]=te[1]*Ee+te[5]*Se+te[9]*_e+te[13]*Qe,b[2]=te[2]*Ee+te[6]*Se+te[10]*_e+te[14]*Qe,b[3]=te[3]*Ee+te[7]*Se+te[11]*_e+te[15]*Qe,b}function qa(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=te[0],rt=te[1],Tt=te[2],zt=te[3],on=zt*Ee+rt*_e-Tt*Se,He=zt*Se+Tt*Ee-Qe*_e,Me=zt*_e+Qe*Se-rt*Ee,Ye=-Qe*Ee-rt*Se-Tt*_e;return b[0]=on*zt+Ye*-Qe+He*-Tt-Me*-rt,b[1]=He*zt+Ye*-rt+Me*-Qe-on*-Tt,b[2]=Me*zt+Ye*-Tt+on*-rt-He*-Qe,b[3]=N[3],b}function Gr(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b}function K(b){return"vec4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"}function P(b,N){return b[0]===N[0]&&b[1]===N[1]&&b[2]===N[2]&&b[3]===N[3]}function H(b,N){var te=b[0],Ee=b[1],Se=b[2],_e=b[3],Qe=N[0],rt=N[1],Tt=N[2],zt=N[3];return Math.abs(te-Qe)<=k*Math.max(1,Math.abs(te),Math.abs(Qe))&&Math.abs(Ee-rt)<=k*Math.max(1,Math.abs(Ee),Math.abs(rt))&&Math.abs(Se-Tt)<=k*Math.max(1,Math.abs(Se),Math.abs(Tt))&&Math.abs(_e-zt)<=k*Math.max(1,Math.abs(_e),Math.abs(zt))}var X=Nu,le=Qs,be=rl,xe=$t,Ge=_t,it=xn,bt=Ln,bn=function(){var b=tl();return function(N,te,Ee,Se,_e,Qe){var rt,Tt;for(te||(te=4),Ee||(Ee=0),Se?Tt=Math.min(Se*te+Ee,N.length):Tt=N.length,rt=Ee;rt<Tt;rt+=te)b[0]=N[rt],b[1]=N[rt+1],b[2]=N[rt+2],b[3]=N[rt+3],_e(b,b,Qe),N[rt]=b[0],N[rt+1]=b[1],N[rt+2]=b[2],N[rt+3]=b[3];return N}}();function _n(){var b=new M(4);return M!=Float32Array&&(b[0]=0,b[1]=0,b[2]=0),b[3]=1,b}function Or(b){return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b}function Cn(b,N,te){te=te*.5;var Ee=Math.sin(te);return b[0]=Ee*N[0],b[1]=Ee*N[1],b[2]=Ee*N[2],b[3]=Math.cos(te),b}function ar(b,N){var te=Math.acos(N[3])*2,Ee=Math.sin(te/2);return Ee>k?(b[0]=N[0]/Ee,b[1]=N[1]/Ee,b[2]=N[2]/Ee):(b[0]=1,b[1]=0,b[2]=0),te}function Ca(b,N){var te=Ls(b,N);return Math.acos(2*te*te-1)}function Xr(b,N,te){var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3],rt=te[0],Tt=te[1],zt=te[2],on=te[3];return b[0]=Ee*on+Qe*rt+Se*zt-_e*Tt,b[1]=Se*on+Qe*Tt+_e*rt-Ee*zt,b[2]=_e*on+Qe*zt+Ee*Tt-Se*rt,b[3]=Qe*on-Ee*rt-Se*Tt-_e*zt,b}function Fi(b,N,te){te*=.5;var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3],rt=Math.sin(te),Tt=Math.cos(te);return b[0]=Ee*Tt+Qe*rt,b[1]=Se*Tt+_e*rt,b[2]=_e*Tt-Se*rt,b[3]=Qe*Tt-Ee*rt,b}function Qo(b,N,te){te*=.5;var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3],rt=Math.sin(te),Tt=Math.cos(te);return b[0]=Ee*Tt-_e*rt,b[1]=Se*Tt+Qe*rt,b[2]=_e*Tt+Ee*rt,b[3]=Qe*Tt-Se*rt,b}function lo(b,N,te){te*=.5;var Ee=N[0],Se=N[1],_e=N[2],Qe=N[3],rt=Math.sin(te),Tt=Math.cos(te);return b[0]=Ee*Tt+Se*rt,b[1]=Se*Tt-Ee*rt,b[2]=_e*Tt+Qe*rt,b[3]=Qe*Tt-_e*rt,b}function Ho(b,N){var te=N[0],Ee=N[1],Se=N[2];return b[0]=te,b[1]=Ee,b[2]=Se,b[3]=Math.sqrt(Math.abs(1-te*te-Ee*Ee-Se*Se)),b}function Ao(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=Math.sqrt(te*te+Ee*Ee+Se*Se),rt=Math.exp(_e),Tt=Qe>0?rt*Math.sin(Qe)/Qe:0;return b[0]=te*Tt,b[1]=Ee*Tt,b[2]=Se*Tt,b[3]=rt*Math.cos(Qe),b}function Ia(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=Math.sqrt(te*te+Ee*Ee+Se*Se),rt=Qe>0?Math.atan2(Qe,_e)/Qe:0;return b[0]=te*rt,b[1]=Ee*rt,b[2]=Se*rt,b[3]=.5*Math.log(te*te+Ee*Ee+Se*Se+_e*_e),b}function Ns(b,N,te){return Ia(b,N),il(b,b,te),Ao(b,b),b}function Ai(b,N,te,Ee){var Se=N[0],_e=N[1],Qe=N[2],rt=N[3],Tt=te[0],zt=te[1],on=te[2],He=te[3],Me,Ye,ut,De,Le;return Ye=Se*Tt+_e*zt+Qe*on+rt*He,Ye<0&&(Ye=-Ye,Tt=-Tt,zt=-zt,on=-on,He=-He),1-Ye>k?(Me=Math.acos(Ye),ut=Math.sin(Me),De=Math.sin((1-Ee)*Me)/ut,Le=Math.sin(Ee*Me)/ut):(De=1-Ee,Le=Ee),b[0]=De*Se+Le*Tt,b[1]=De*_e+Le*zt,b[2]=De*Qe+Le*on,b[3]=De*rt+Le*He,b}function Yi(b){var N=U(),te=U(),Ee=U(),Se=Math.sqrt(1-N),_e=Math.sqrt(N);return b[0]=Se*Math.sin(2*Math.PI*te),b[1]=Se*Math.cos(2*Math.PI*te),b[2]=_e*Math.sin(2*Math.PI*Ee),b[3]=_e*Math.cos(2*Math.PI*Ee),b}function Ji(b,N){var te=N[0],Ee=N[1],Se=N[2],_e=N[3],Qe=te*te+Ee*Ee+Se*Se+_e*_e,rt=Qe?1/Qe:0;return b[0]=-te*rt,b[1]=-Ee*rt,b[2]=-Se*rt,b[3]=_e*rt,b}function yl(b,N){return b[0]=-N[0],b[1]=-N[1],b[2]=-N[2],b[3]=N[3],b}function bo(b,N){var te=N[0]+N[4]+N[8],Ee;if(te>0)Ee=Math.sqrt(te+1),b[3]=.5*Ee,Ee=.5/Ee,b[0]=(N[5]-N[7])*Ee,b[1]=(N[6]-N[2])*Ee,b[2]=(N[1]-N[3])*Ee;else{var Se=0;N[4]>N[0]&&(Se=1),N[8]>N[Se*3+Se]&&(Se=2);var _e=(Se+1)%3,Qe=(Se+2)%3;Ee=Math.sqrt(N[Se*3+Se]-N[_e*3+_e]-N[Qe*3+Qe]+1),b[Se]=.5*Ee,Ee=.5/Ee,b[3]=(N[_e*3+Qe]-N[Qe*3+_e])*Ee,b[_e]=(N[_e*3+Se]+N[Se*3+_e])*Ee,b[Qe]=(N[Qe*3+Se]+N[Se*3+Qe])*Ee}return b}function ls(b,N,te,Ee){var Se=.5*Math.PI/180;N*=Se,te*=Se,Ee*=Se;var _e=Math.sin(N),Qe=Math.cos(N),rt=Math.sin(te),Tt=Math.cos(te),zt=Math.sin(Ee),on=Math.cos(Ee);return b[0]=_e*Tt*on-Qe*rt*zt,b[1]=Qe*rt*on+_e*Tt*zt,b[2]=Qe*Tt*zt-_e*rt*on,b[3]=Qe*Tt*on+_e*rt*zt,b}function wu(b){return"quat("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"}var xu=nl,qs=Hl,Wo=Ts,js=Wl,$o=Ou,jo=Xr,il=mt,Ls=Mr,Ni=Rr,Su=xn,ms=Su,lu=Ln,uf=lu,$l=er,gc=P,cs=H,Kl=function(){var b=Ne(),N=Xt(1,0,0),te=Xt(0,1,0);return function(Ee,Se,_e){var Qe=ta(Se,_e);return Qe<-.999999?(ha(b,N,Se),uu(b)<1e-6&&ha(b,te,Se),Ea(b,b),Cn(Ee,b,Math.PI),Ee):Qe>.999999?(Ee[0]=0,Ee[1]=0,Ee[2]=0,Ee[3]=1,Ee):(ha(b,Se,_e),Ee[0]=b[0],Ee[1]=b[1],Ee[2]=b[2],Ee[3]=1+Qe,$l(Ee,Ee))}}(),eu=function(){var b=_n(),N=_n();return function(te,Ee,Se,_e,Qe,rt){return Ai(b,Ee,Qe,rt),Ai(N,Se,_e,rt),Ai(te,b,N,2*rt*(1-rt)),te}}(),bl=function(){var b=ee();return function(N,te,Ee,Se){return b[0]=Ee[0],b[3]=Ee[1],b[6]=Ee[2],b[1]=Se[0],b[4]=Se[1],b[7]=Se[2],b[2]=-te[0],b[5]=-te[1],b[8]=-te[2],$l(N,bo(N,b))}}()},IQ25:function(ge,R,h){"use strict";h.d(R,"a",function(){return ne});var B=h("lwsE"),p=h.n(B),S=h("PJYZ"),E=h.n(S),A=h("7W2i"),k=h.n(A),M=h("a1gu"),U=h.n(M),V=h("Nsbk"),$=h.n(V),W=h("oDt1");function Y(ie){var re=ee();return function(){var ce=$()(ie),G;if(re){var Z=$()(this).constructor;G=Reflect.construct(ce,arguments,Z)}else G=ce.apply(this,arguments);return U()(this,G)}}function ee(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ie){return!1}}var ne=function(ie){k()(J,ie);var re=Y(J);function J(ce){var G;return p()(this,J),G=re.call(this,ce),G.parentID=void 0,Object.assign(E()(G),ce),G}return J}(W.a)},IehP:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M391 240.9c-.8-6.6-8.9-9.4-13.6-4.7l-43.7 43.7L200 146.3a8.03 8.03 0 00-11.3 0l-42.4 42.3a8.03 8.03 0 000 11.3L280 333.6l-43.9 43.9a8.01 8.01 0 004.7 13.6L401 410c5.1.6 9.5-3.7 8.9-8.9L391 240.9zm10.1 373.2L240.8 633c-6.6.8-9.4 8.9-4.7 13.6l43.9 43.9L146.3 824a8.03 8.03 0 000 11.3l42.4 42.3c3.1 3.1 8.2 3.1 11.3 0L333.7 744l43.7 43.7A8.01 8.01 0 00391 783l18.9-160.1c.6-5.1-3.7-9.4-8.8-8.8zm221.8-204.2L783.2 391c6.6-.8 9.4-8.9 4.7-13.6L744 333.6 877.7 200c3.1-3.1 3.1-8.2 0-11.3l-42.4-42.3a8.03 8.03 0 00-11.3 0L690.3 279.9l-43.7-43.7a8.01 8.01 0 00-13.6 4.7L614.1 401c-.6 5.2 3.7 9.5 8.8 8.9zM744 690.4l43.9-43.9a8.01 8.01 0 00-4.7-13.6L623 614c-5.1-.6-9.5 3.7-8.9 8.9L633 783.1c.8 6.6 8.9 9.4 13.6 4.7l43.7-43.7L824 877.7c3.1 3.1 8.2 3.1 11.3 0l42.4-42.3c3.1-3.1 3.1-8.2 0-11.3L744 690.4z"}}]},name:"fullscreen-exit",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="FullscreenExitOutlined";var M=R.a=p.forwardRef(k)},Ijbi:function(ge,R,h){var B=h("WkPL");function p(S){if(Array.isArray(S))return B(S)}ge.exports=p,ge.exports.__esModule=!0,ge.exports.default=ge.exports},IzEo:function(ge,R,h){"use strict";var B=h("EFp3"),p=h.n(B),S=h("lnY3"),E=h.n(S),A=h("cWXX"),k=h("Znn+")},J4zp:function(ge,R,h){var B=h("wTVA"),p=h("m0LI"),S=h("ZhPi"),E=h("wkBT");function A(k,M){return B(k)||p(k,M)||S(k,M)||E()}ge.exports=A,ge.exports.__esModule=!0,ge.exports.default=ge.exports},JI00:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Chrome=void 0;var B=h("q1tI"),p=re(B),S=h("17x9"),E=re(S),A=h("/FUP"),k=re(A),M=h("QkVN"),U=re(M),V=h("TM95"),$=h("Rkpk"),W=re($),Y=h("NSvM"),ee=re(Y),ne=h("tu5P"),ie=re(ne);function re(ce){return ce&&ce.__esModule?ce:{default:ce}}var J=R.Chrome=function(G){var Z=G.width,fe=G.onChange,se=G.disableAlpha,ve=G.rgb,ae=G.hsl,j=G.hsv,de=G.hex,ke=G.renderers,he=G.styles,Oe=he===void 0?{}:he,We=G.className,D=We===void 0?"":We,je=(0,k.default)((0,U.default)({default:{picker:{width:Z,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+ve.r+", "+ve.g+", "+ve.b+", "+ve.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},Oe),{disableAlpha:se});return p.default.createElement("div",{style:je.picker,className:"chrome-picker "+D},p.default.createElement("div",{style:je.saturation},p.default.createElement(V.Saturation,{style:je.Saturation,hsl:ae,hsv:j,pointer:ie.default,onChange:fe})),p.default.createElement("div",{style:je.body},p.default.createElement("div",{style:je.controls,className:"flexbox-fix"},p.default.createElement("div",{style:je.color},p.default.createElement("div",{style:je.swatch},p.default.createElement("div",{style:je.active}),p.default.createElement(V.Checkboard,{renderers:ke}))),p.default.createElement("div",{style:je.toggles},p.default.createElement("div",{style:je.hue},p.default.createElement(V.Hue,{style:je.Hue,hsl:ae,pointer:ee.default,onChange:fe})),p.default.createElement("div",{style:je.alpha},p.default.createElement(V.Alpha,{style:je.Alpha,rgb:ve,hsl:ae,pointer:ee.default,renderers:ke,onChange:fe})))),p.default.createElement(W.default,{rgb:ve,hsl:ae,hex:de,onChange:fe,disableAlpha:se})))};J.propTypes={width:E.default.oneOfType([E.default.string,E.default.number]),disableAlpha:E.default.bool,styles:E.default.object},J.defaultProps={width:225,disableAlpha:!1,styles:{}},R.default=(0,V.ColorWrap)(J)},JX23:function(ge,R){},JaaR:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="DoubleLeftOutlined";var M=R.a=p.forwardRef(k)},"Ju5/":function(ge,R,h){"use strict";var B=h("XqMk"),p=typeof self=="object"&&self&&self.Object===Object&&self,S=B.a||p||Function("return this")();R.a=S},Jxpl:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Material=void 0;var B=h("q1tI"),p=$(B),S=h("/FUP"),E=$(S),A=h("QkVN"),k=$(A),M=h("p8yl"),U=$(M),V=h("TM95");function $(Y){return Y&&Y.__esModule?Y:{default:Y}}var W=R.Material=function(ee){var ne=ee.onChange,ie=ee.hex,re=ee.rgb,J=ee.styles,ce=J===void 0?{}:J,G=ee.className,Z=G===void 0?"":G,fe=(0,E.default)((0,k.default)({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+ie,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},ce)),se=function(ae,j){ae.hex?U.default.isValidHex(ae.hex)&&ne({hex:ae.hex,source:"hex"},j):(ae.r||ae.g||ae.b)&&ne({r:ae.r||re.r,g:ae.g||re.g,b:ae.b||re.b,source:"rgb"},j)};return p.default.createElement(V.Raised,{styles:ce},p.default.createElement("div",{style:fe.material,className:"material-picker "+Z},p.default.createElement(V.EditableInput,{style:{wrap:fe.HEXwrap,input:fe.HEXinput,label:fe.HEXlabel},label:"hex",value:ie,onChange:se}),p.default.createElement("div",{style:fe.split,className:"flexbox-fix"},p.default.createElement("div",{style:fe.third},p.default.createElement(V.EditableInput,{style:{wrap:fe.RGBwrap,input:fe.RGBinput,label:fe.RGBlabel},label:"r",value:re.r,onChange:se})),p.default.createElement("div",{style:fe.third},p.default.createElement(V.EditableInput,{style:{wrap:fe.RGBwrap,input:fe.RGBinput,label:fe.RGBlabel},label:"g",value:re.g,onChange:se})),p.default.createElement("div",{style:fe.third},p.default.createElement(V.EditableInput,{style:{wrap:fe.RGBwrap,input:fe.RGBinput,label:fe.RGBlabel},label:"b",value:re.b,onChange:se})))))};R.default=(0,V.ColorWrap)(W)},KwMD:function(ge,R){function h(B,p,S,E){for(var A=B.length,k=S+(E?1:-1);E?k--:++k<A;)if(p(B[k],k,B))return k;return-1}ge.exports=h},L26W:function(ge,R){ge.exports=h;function h(B,p){p=p||1;var S=Math.random()*2*Math.PI;return B[0]=Math.cos(S)*p,B[1]=Math.sin(S)*p,B}},L3Qv:function(ge,R,h){"use strict";function B(){return!1}R.a=B},LGRX:function(ge,R,h){"use strict";h.d(R,"a",function(){return $});var B=h("lwsE"),p=h.n(B),S=h("W8MJ"),E=h.n(S),A=h("4cb6"),k=h.n(A),M,U,V;(function(W){W.PANSTART="PANSTART",W.PANEND="PANEND",W.PANMOVE="PANMOVE",W.PINCH="PINCH",W.KEYDOWN="KEYDOWN",W.KEYUP="KEYUP",W.HOVER="HOVER"})(V||(V={}));var $=(M=Object(A.injectable)(),M(U=function(){function W(){p()(this,W)}return E()(W,[{key:"listen",value:function(ee){}},{key:"on",value:function(ee,ne){}},{key:"connect",value:function(){}},{key:"disconnect",value:function(){}},{key:"destroy",value:function(){}}]),W}())||U)},LGYb:function(ge,R,h){var B=h("1hJj"),p=h("jbM+"),S=h("Xt/L"),E=h("xYSL"),A=h("dQpi"),k=h("rEGp"),M=200;function U(V,$,W){var Y=-1,ee=p,ne=V.length,ie=!0,re=[],J=re;if(W)ie=!1,ee=S;else if(ne>=M){var ce=$?null:A(V);if(ce)return k(ce);ie=!1,ee=E,J=new B}else J=$?[]:re;e:for(;++Y<ne;){var G=V[Y],Z=$?$(G):G;if(G=W||G!==0?G:0,ie&&Z===Z){for(var fe=J.length;fe--;)if(J[fe]===Z)continue e;$&&J.push(Z),re.push(G)}else ee(J,Z,W)||(J!==re&&J.push(Z),re.push(G))}return re}ge.exports=U},LKzl:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.BindingWhenOnSyntax=void 0;var B=h("406g"),p=h("z4Hk"),S=function(){function E(A){this._binding=A,this._bindingWhenSyntax=new p.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new B.BindingOnSyntax(this._binding)}return E.prototype.when=function(A){return this._bindingWhenSyntax.when(A)},E.prototype.whenTargetNamed=function(A){return this._bindingWhenSyntax.whenTargetNamed(A)},E.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},E.prototype.whenTargetTagged=function(A,k){return this._bindingWhenSyntax.whenTargetTagged(A,k)},E.prototype.whenInjectedInto=function(A){return this._bindingWhenSyntax.whenInjectedInto(A)},E.prototype.whenParentNamed=function(A){return this._bindingWhenSyntax.whenParentNamed(A)},E.prototype.whenParentTagged=function(A,k){return this._bindingWhenSyntax.whenParentTagged(A,k)},E.prototype.whenAnyAncestorIs=function(A){return this._bindingWhenSyntax.whenAnyAncestorIs(A)},E.prototype.whenNoAncestorIs=function(A){return this._bindingWhenSyntax.whenNoAncestorIs(A)},E.prototype.whenAnyAncestorNamed=function(A){return this._bindingWhenSyntax.whenAnyAncestorNamed(A)},E.prototype.whenAnyAncestorTagged=function(A,k){return this._bindingWhenSyntax.whenAnyAncestorTagged(A,k)},E.prototype.whenNoAncestorNamed=function(A){return this._bindingWhenSyntax.whenNoAncestorNamed(A)},E.prototype.whenNoAncestorTagged=function(A,k){return this._bindingWhenSyntax.whenNoAncestorTagged(A,k)},E.prototype.whenAnyAncestorMatches=function(A){return this._bindingWhenSyntax.whenAnyAncestorMatches(A)},E.prototype.whenNoAncestorMatches=function(A){return this._bindingWhenSyntax.whenNoAncestorMatches(A)},E.prototype.onActivation=function(A){return this._bindingOnSyntax.onActivation(A)},E}();R.BindingWhenOnSyntax=S},LgvC:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Binding=void 0;var B=h("FV85"),p=h("d9O0"),S=function(){function E(A,k){this.id=p.id(),this.activated=!1,this.serviceIdentifier=A,this.scope=k,this.type=B.BindingTypeEnum.Invalid,this.constraint=function(M){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return E.prototype.clone=function(){var A=new E(this.serviceIdentifier,this.scope);return A.activated=A.scope===B.BindingScopeEnum.Singleton?this.activated:!1,A.implementationType=this.implementationType,A.dynamicValue=this.dynamicValue,A.scope=this.scope,A.type=this.type,A.factory=this.factory,A.provider=this.provider,A.constraint=this.constraint,A.onActivation=this.onActivation,A.cache=this.cache,A},E}();R.Binding=S},LvDl:function(ge,R,h){(function(B,p){var S;/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(){var E,A="4.17.21",k=200,M="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",U="Expected a function",V="Invalid `variable` option passed into `_.template`",$="__lodash_hash_undefined__",W=500,Y="__lodash_placeholder__",ee=1,ne=2,ie=4,re=1,J=2,ce=1,G=2,Z=4,fe=8,se=16,ve=32,ae=64,j=128,de=256,ke=512,he=30,Oe="...",We=800,D=16,je=1,pt=2,nt=3,Lt=1/0,Gt=9007199254740991,$e=17976931348623157e292,jt=0/0,Be=4294967295,pe=Be-1,un=Be>>>1,ln=[["ary",j],["bind",ce],["bindKey",G],["curry",fe],["curryRight",se],["flip",ke],["partial",ve],["partialRight",ae],["rearg",de]],Fn="[object Arguments]",Ft="[object Array]",Pn="[object AsyncFunction]",lr="[object Boolean]",hn="[object Date]",On="[object DOMException]",jn="[object Error]",Dn="[object Function]",ft="[object GeneratorFunction]",Ut="[object Map]",ct="[object Number]",Ct="[object Null]",kt="[object Object]",yt="[object Promise]",tt="[object Proxy]",I="[object RegExp]",Mn="[object Set]",dt="[object String]",vt="[object Symbol]",Bt="[object Undefined]",me="[object WeakMap]",ue="[object WeakSet]",Re="[object ArrayBuffer]",Rt="[object DataView]",Kt="[object Float32Array]",Bn="[object Float64Array]",Nr="[object Int8Array]",Rn="[object Int16Array]",Cr="[object Int32Array]",tr="[object Uint8Array]",jr="[object Uint8ClampedArray]",zr="[object Uint16Array]",Ua="[object Uint32Array]",oa=/\b__p \+= '';/g,Za=/\b(__p \+=) '' \+/g,ba=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pa=/&(?:amp|lt|gt|quot|#39);/g,ri=/[&<>"']/g,li=RegExp(Pa.source),ka=RegExp(ri.source),ai=/<%-([\s\S]+?)%>/g,Qa=/<%([\s\S]+?)%>/g,aa=/<%=([\s\S]+?)%>/g,Gi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mo=/^\w*$/,sa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yi=/[\\^$.*+?()[\]{}|]/g,Io=RegExp(yi.source),Pi=/^\s+/,ao=/\s/,ki=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,It=/,? & /,Ne=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,St=/[()=,{}\[\]\/\s]/,Ve=/\\(\\)?/g,Xt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gn=/\w*$/,pn=/^[-+]0x[0-9a-f]+$/i,en=/^0b[01]+$/i,In=/^\[object .+?Constructor\]$/,$r=/^0o[0-7]+$/i,da=/^(?:0|[1-9]\d*)$/,Oa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ka=/($^)/,bi=/['\n\r\u2028\u2029\\]/g,_a="\\ud800-\\udfff",ti="\\u0300-\\u036f",tn="\\ufe20-\\ufe2f",mn="\\u20d0-\\u20ff",nr=ti+tn+mn,or="\\u2700-\\u27bf",Zr="a-z\\xdf-\\xf6\\xf8-\\xff",Vi="\\xac\\xb1\\xd7\\xf7",Da="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ea="\\u2000-\\u206f",ta=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ha="A-Z\\xc0-\\xd6\\xd8-\\xde",Kr="\\ufe0e\\ufe0f",qi=Vi+Da+Ea+ta,So="['\u2019]",Js="["+_a+"]",Ro="["+qi+"]",Zo="["+nr+"]",Ss="\\d+",gs="["+or+"]",ou="["+Zr+"]",As="[^"+_a+qi+Ss+or+Zr+ha+"]",Ms="\\ud83c[\\udffb-\\udfff]",Vo="(?:"+Zo+"|"+Ms+")",us="[^"+_a+"]",Ki="(?:\\ud83c[\\udde6-\\uddff]){2}",Eu="[\\ud800-\\udbff][\\udc00-\\udfff]",su="["+ha+"]",Zs="\\u200d",Is="(?:"+ou+"|"+As+")",gl="(?:"+su+"|"+As+")",Vl="(?:"+So+"(?:d|ll|m|re|s|t|ve))?",uu="(?:"+So+"(?:D|LL|M|RE|S|T|VE))?",Rs=Vo+"?",el="["+Kr+"]?",tl="(?:"+Zs+"(?:"+[us,Ki,Eu].join("|")+")"+el+Rs+")*",nl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ts=el+Rs+tl,Wl="(?:"+[gs,Ki,Eu].join("|")+")"+Ts,Ou="(?:"+[us+Zo+"?",Zo,Ki,Eu,Js].join("|")+")",Nu=RegExp(So,"g"),Qs=RegExp(Zo,"g"),rl=RegExp(Ms+"(?="+Ms+")|"+Ou+Ts,"g"),sf=RegExp([su+"?"+ou+"+"+Vl+"(?="+[Ro,su,"$"].join("|")+")",gl+"+"+uu+"(?="+[Ro,su+Is,"$"].join("|")+")",su+"?"+Is+"+"+Vl,su+"+"+uu,Hl,nl,Ss,Wl].join("|"),"g"),ml=RegExp("["+Zs+_a+nr+Kr+"]"),al=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pc=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Et=-1,mt={};mt[Kt]=mt[Bn]=mt[Nr]=mt[Rn]=mt[Cr]=mt[tr]=mt[jr]=mt[zr]=mt[Ua]=!0,mt[Fn]=mt[Ft]=mt[Re]=mt[lr]=mt[Rt]=mt[hn]=mt[jn]=mt[Dn]=mt[Ut]=mt[ct]=mt[kt]=mt[I]=mt[Mn]=mt[dt]=mt[me]=!1;var wt={};wt[Fn]=wt[Ft]=wt[Re]=wt[Rt]=wt[lr]=wt[hn]=wt[Kt]=wt[Bn]=wt[Nr]=wt[Rn]=wt[Cr]=wt[Ut]=wt[ct]=wt[kt]=wt[I]=wt[Mn]=wt[dt]=wt[vt]=wt[tr]=wt[jr]=wt[zr]=wt[Ua]=!0,wt[jn]=wt[Dn]=wt[me]=!1;var $t={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},_t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ln={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yn=parseFloat,Ar=parseInt,er=typeof B=="object"&&B&&B.Object===Object&&B,Mr=typeof self=="object"&&self&&self.Object===Object&&self,rr=er||Mr||Function("return this")(),Rr=R&&!R.nodeType&&R,Dr=Rr&&typeof p=="object"&&p&&!p.nodeType&&p,qr=Dr&&Dr.exports===Rr,qa=qr&&er.process,Gr=function(){try{var De=Dr&&Dr.require&&Dr.require("util").types;return De||qa&&qa.binding&&qa.binding("util")}catch(Le){}}(),K=Gr&&Gr.isArrayBuffer,P=Gr&&Gr.isDate,H=Gr&&Gr.isMap,X=Gr&&Gr.isRegExp,le=Gr&&Gr.isSet,be=Gr&&Gr.isTypedArray;function xe(De,Le,et){switch(et.length){case 0:return De.call(Le);case 1:return De.call(Le,et[0]);case 2:return De.call(Le,et[0],et[1]);case 3:return De.call(Le,et[0],et[1],et[2])}return De.apply(Le,et)}function Ge(De,Le,et,Qt){for(var yn=-1,Vn=De==null?0:De.length;++yn<Vn;){var sr=De[yn];Le(Qt,sr,et(sr),De)}return Qt}function it(De,Le){for(var et=-1,Qt=De==null?0:De.length;++et<Qt&&Le(De[et],et,De)!==!1;);return De}function bt(De,Le){for(var et=De==null?0:De.length;et--&&Le(De[et],et,De)!==!1;);return De}function bn(De,Le){for(var et=-1,Qt=De==null?0:De.length;++et<Qt;)if(!Le(De[et],et,De))return!1;return!0}function _n(De,Le){for(var et=-1,Qt=De==null?0:De.length,yn=0,Vn=[];++et<Qt;){var sr=De[et];Le(sr,et,De)&&(Vn[yn++]=sr)}return Vn}function Or(De,Le){var et=De==null?0:De.length;return!!et&&Ai(De,Le,0)>-1}function Cn(De,Le,et){for(var Qt=-1,yn=De==null?0:De.length;++Qt<yn;)if(et(Le,De[Qt]))return!0;return!1}function ar(De,Le){for(var et=-1,Qt=De==null?0:De.length,yn=Array(Qt);++et<Qt;)yn[et]=Le(De[et],et,De);return yn}function Ca(De,Le){for(var et=-1,Qt=Le.length,yn=De.length;++et<Qt;)De[yn+et]=Le[et];return De}function Xr(De,Le,et,Qt){var yn=-1,Vn=De==null?0:De.length;for(Qt&&Vn&&(et=De[++yn]);++yn<Vn;)et=Le(et,De[yn],yn,De);return et}function Fi(De,Le,et,Qt){var yn=De==null?0:De.length;for(Qt&&yn&&(et=De[--yn]);yn--;)et=Le(et,De[yn],yn,De);return et}function Qo(De,Le){for(var et=-1,Qt=De==null?0:De.length;++et<Qt;)if(Le(De[et],et,De))return!0;return!1}var lo=bo("length");function Ho(De){return De.split("")}function Ao(De){return De.match(Ne)||[]}function Ia(De,Le,et){var Qt;return et(De,function(yn,Vn,sr){if(Le(yn,Vn,sr))return Qt=Vn,!1}),Qt}function Ns(De,Le,et,Qt){for(var yn=De.length,Vn=et+(Qt?1:-1);Qt?Vn--:++Vn<yn;)if(Le(De[Vn],Vn,De))return Vn;return-1}function Ai(De,Le,et){return Le===Le?Se(De,Le,et):Ns(De,Ji,et)}function Yi(De,Le,et,Qt){for(var yn=et-1,Vn=De.length;++yn<Vn;)if(Qt(De[yn],Le))return yn;return-1}function Ji(De){return De!==De}function yl(De,Le){var et=De==null?0:De.length;return et?qs(De,Le)/et:jt}function bo(De){return function(Le){return Le==null?E:Le[De]}}function ls(De){return function(Le){return De==null?E:De[Le]}}function wu(De,Le,et,Qt,yn){return yn(De,function(Vn,sr,Zn){et=Qt?(Qt=!1,Vn):Le(et,Vn,sr,Zn)}),et}function xu(De,Le){var et=De.length;for(De.sort(Le);et--;)De[et]=De[et].value;return De}function qs(De,Le){for(var et,Qt=-1,yn=De.length;++Qt<yn;){var Vn=Le(De[Qt]);Vn!==E&&(et=et===E?Vn:et+Vn)}return et}function Wo(De,Le){for(var et=-1,Qt=Array(De);++et<De;)Qt[et]=Le(et);return Qt}function js(De,Le){return ar(Le,function(et){return[et,De[et]]})}function $o(De){return De&&De.slice(0,Tt(De)+1).replace(Pi,"")}function jo(De){return function(Le){return De(Le)}}function il(De,Le){return ar(Le,function(et){return De[et]})}function Ls(De,Le){return De.has(Le)}function Ni(De,Le){for(var et=-1,Qt=De.length;++et<Qt&&Ai(Le,De[et],0)>-1;);return et}function Su(De,Le){for(var et=De.length;et--&&Ai(Le,De[et],0)>-1;);return et}function ms(De,Le){for(var et=De.length,Qt=0;et--;)De[et]===Le&&++Qt;return Qt}var lu=ls($t),uf=ls(_t);function $l(De){return"\\"+Ln[De]}function gc(De,Le){return De==null?E:De[Le]}function cs(De){return ml.test(De)}function Kl(De){return al.test(De)}function eu(De){for(var Le,et=[];!(Le=De.next()).done;)et.push(Le.value);return et}function bl(De){var Le=-1,et=Array(De.size);return De.forEach(function(Qt,yn){et[++Le]=[yn,Qt]}),et}function b(De,Le){return function(et){return De(Le(et))}}function N(De,Le){for(var et=-1,Qt=De.length,yn=0,Vn=[];++et<Qt;){var sr=De[et];(sr===Le||sr===Y)&&(De[et]=Y,Vn[yn++]=et)}return Vn}function te(De){var Le=-1,et=Array(De.size);return De.forEach(function(Qt){et[++Le]=Qt}),et}function Ee(De){var Le=-1,et=Array(De.size);return De.forEach(function(Qt){et[++Le]=[Qt,Qt]}),et}function Se(De,Le,et){for(var Qt=et-1,yn=De.length;++Qt<yn;)if(De[Qt]===Le)return Qt;return-1}function _e(De,Le,et){for(var Qt=et+1;Qt--;)if(De[Qt]===Le)return Qt;return Qt}function Qe(De){return cs(De)?on(De):lo(De)}function rt(De){return cs(De)?He(De):Ho(De)}function Tt(De){for(var Le=De.length;Le--&&ao.test(De.charAt(Le)););return Le}var zt=ls(xn);function on(De){for(var Le=rl.lastIndex=0;rl.test(De);)++Le;return Le}function He(De){return De.match(rl)||[]}function Me(De){return De.match(sf)||[]}var Ye=function De(Le){Le=Le==null?rr:ut.defaults(rr.Object(),Le,ut.pick(rr,pc));var et=Le.Array,Qt=Le.Date,yn=Le.Error,Vn=Le.Function,sr=Le.Math,Zn=Le.Object,ia=Le.RegExp,na=Le.String,ea=Le.TypeError,la=et.prototype,si=Vn.prototype,Ra=Zn.prototype,ii=Le["__core-js_shared__"],ma=si.toString,fa=Ra.hasOwnProperty,io=0,_s=function(){var g=/[^.]+$/.exec(ii&&ii.keys&&ii.keys.IE_PROTO||"");return g?"Symbol(src)_1."+g:""}(),Xl=Ra.toString,mc=ma.call(Zn),Jh=rr._,ip=ia("^"+ma.call(fa).replace(yi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lf=qr?Le.Buffer:E,Yl=Le.Symbol,Cl=Le.Uint8Array,qo=lf?lf.allocUnsafe:E,Jl=b(Zn.getPrototypeOf,Zn),Zh=Zn.create,Zl=Ra.propertyIsEnumerable,Uf=la.splice,Qh=Yl?Yl.isConcatSpreadable:E,Vf=Yl?Yl.iterator:E,yc=Yl?Yl.toStringTag:E,jd=function(){try{var g=Wn(Zn,"defineProperty");return g({},"",{}),g}catch(w){}}(),Wg=Le.clearTimeout!==rr.clearTimeout&&Le.clearTimeout,Ld=Qt&&Qt.now!==rr.Date.now&&Qt.now,op=Le.setTimeout!==rr.setTimeout&&Le.setTimeout,ju=sr.ceil,Hf=sr.floor,bc=Zn.getOwnPropertySymbols,$g=lf?lf.isBuffer:E,Wf=Le.isFinite,Kg=la.join,Ql=b(Zn.keys,Zn),Xi=sr.max,ys=sr.min,sp=Qt.now,up=Le.parseInt,qh=sr.random,lp=la.reverse,$f=Wn(Le,"DataView"),cf=Wn(Le,"Map"),_d=Wn(Le,"Promise"),Cc=Wn(Le,"Set"),Fs=Wn(Le,"WeakMap"),ff=Wn(Zn,"create"),Fd=Fs&&new Fs,tu={},ev=co($f),Ec=co(cf),Bd=co(_d),cp=co(Cc),fp=co(Fs),Kf=Yl?Yl.prototype:E,df=Kf?Kf.valueOf:E,tv=Kf?Kf.toString:E;function Ue(g){if(Ko(g)&&!ui(g)&&!(g instanceof Di)){if(g instanceof bs)return g;if(fa.call(g,"__wrapped__"))return Fa(g)}return new bs(g)}var hf=function(){function g(){}return function(w){if(!_o(w))return{};if(Zh)return Zh(w);g.prototype=w;var F=new g;return g.prototype=E,F}}();function El(){}function bs(g,w){this.__wrapped__=g,this.__actions__=[],this.__chain__=!!w,this.__index__=0,this.__values__=E}Ue.templateSettings={escape:ai,evaluate:Qa,interpolate:aa,variable:"",imports:{_:Ue}},Ue.prototype=El.prototype,Ue.prototype.constructor=Ue,bs.prototype=hf(El.prototype),bs.prototype.constructor=bs;function Di(g){this.__wrapped__=g,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Be,this.__views__=[]}function Xg(){var g=new Di(this.__wrapped__);return g.__actions__=Gs(this.__actions__),g.__dir__=this.__dir__,g.__filtered__=this.__filtered__,g.__iteratees__=Gs(this.__iteratees__),g.__takeCount__=this.__takeCount__,g.__views__=Gs(this.__views__),g}function Yg(){if(this.__filtered__){var g=new Di(this);g.__dir__=-1,g.__filtered__=!0}else g=this.clone(),g.__dir__*=-1;return g}function dp(){var g=this.__wrapped__.value(),w=this.__dir__,F=ui(g),oe=w<0,Te=F?g.length:0,Xe=Ir(0,Te,this.__views__),Mt=Xe.start,Wt=Xe.end,dn=Wt-Mt,yr=oe?Wt:Mt-1,Er=this.__iteratees__,kr=Er.length,Jr=0,ya=ys(dn,this.__takeCount__);if(!F||!oe&&Te==dn&&ya==dn)return Gu(g,this.__actions__);var za=[];e:for(;dn--&&Jr<ya;){yr+=w;for(var Oi=-1,Ja=g[yr];++Oi<kr;){var ji=Er[Oi],zi=ji.iteratee,$u=ji.type,vu=zi(Ja);if($u==pt)Ja=vu;else if(!vu){if($u==je)continue e;break e}}za[Jr++]=Ja}return za}Di.prototype=hf(El.prototype),Di.prototype.constructor=Di;function ql(g){var w=-1,F=g==null?0:g.length;for(this.clear();++w<F;){var oe=g[w];this.set(oe[0],oe[1])}}function hp(){this.__data__=ff?ff(null):{},this.size=0}function Jg(g){var w=this.has(g)&&delete this.__data__[g];return this.size-=w?1:0,w}function vf(g){var w=this.__data__;if(ff){var F=w[g];return F===$?E:F}return fa.call(w,g)?w[g]:E}function Gd(g){var w=this.__data__;return ff?w[g]!==E:fa.call(w,g)}function Zg(g,w){var F=this.__data__;return this.size+=this.has(g)?0:1,F[g]=ff&&w===E?$:w,this}ql.prototype.clear=hp,ql.prototype.delete=Jg,ql.prototype.get=vf,ql.prototype.has=Gd,ql.prototype.set=Zg;function Ol(g){var w=-1,F=g==null?0:g.length;for(this.clear();++w<F;){var oe=g[w];this.set(oe[0],oe[1])}}function Qg(){this.__data__=[],this.size=0}function qg(g){var w=this.__data__,F=_u(w,g);if(F<0)return!1;var oe=w.length-1;return F==oe?w.pop():Uf.call(w,F,1),--this.size,!0}function em(g){var w=this.__data__,F=_u(w,g);return F<0?E:w[F][1]}function vp(g){return _u(this.__data__,g)>-1}function tm(g,w){var F=this.__data__,oe=_u(F,g);return oe<0?(++this.size,F.push([g,w])):F[oe][1]=w,this}Ol.prototype.clear=Qg,Ol.prototype.delete=qg,Ol.prototype.get=em,Ol.prototype.has=vp,Ol.prototype.set=tm;function wl(g){var w=-1,F=g==null?0:g.length;for(this.clear();++w<F;){var oe=g[w];this.set(oe[0],oe[1])}}function nm(){this.size=0,this.__data__={hash:new ql,map:new(cf||Ol),string:new ql}}function rm(g){var w=wn(this,g).delete(g);return this.size-=w?1:0,w}function am(g){return wn(this,g).get(g)}function pf(g){return wn(this,g).has(g)}function im(g,w){var F=wn(this,g),oe=F.size;return F.set(g,w),this.size+=F.size==oe?0:1,this}wl.prototype.clear=nm,wl.prototype.delete=rm,wl.prototype.get=am,wl.prototype.has=pf,wl.prototype.set=im;function Oc(g){var w=-1,F=g==null?0:g.length;for(this.__data__=new wl;++w<F;)this.add(g[w])}function nv(g){return this.__data__.set(g,$),this}function Xf(g){return this.__data__.has(g)}Oc.prototype.add=Oc.prototype.push=nv,Oc.prototype.has=Xf;function Lu(g){var w=this.__data__=new Ol(g);this.size=w.size}function pp(){this.__data__=new Ol,this.size=0}function om(g){var w=this.__data__,F=w.delete(g);return this.size=w.size,F}function gp(g){return this.__data__.get(g)}function sm(g){return this.__data__.has(g)}function um(g,w){var F=this.__data__;if(F instanceof Ol){var oe=F.__data__;if(!cf||oe.length<k-1)return oe.push([g,w]),this.size=++F.size,this;F=this.__data__=new wl(oe)}return F.set(g,w),this.size=F.size,this}Lu.prototype.clear=pp,Lu.prototype.delete=om,Lu.prototype.get=gp,Lu.prototype.has=sm,Lu.prototype.set=um;function mp(g,w){var F=ui(g),oe=!F&&md(g),Te=!F&&!oe&&Af(g),Xe=!F&&!oe&&!Te&&yd(g),Mt=F||oe||Te||Xe,Wt=Mt?Wo(g.length,na):[],dn=Wt.length;for(var yr in g)(w||fa.call(g,yr))&&!(Mt&&(yr=="length"||Te&&(yr=="offset"||yr=="parent")||Xe&&(yr=="buffer"||yr=="byteLength"||yr=="byteOffset")||Vr(yr,dn)))&&Wt.push(yr);return Wt}function wc(g){var w=g.length;return w?g[cv(0,w-1)]:E}function lm(g,w){return Eo(Gs(g),xl(w,0,g.length))}function zd(g){return Eo(Gs(g))}function Ud(g,w,F){(F!==E&&!Il(g[w],F)||F===E&&!(w in g))&&nu(g,w,F)}function ol(g,w,F){var oe=g[w];(!(fa.call(g,w)&&Il(oe,F))||F===E&&!(w in g))&&nu(g,w,F)}function _u(g,w){for(var F=g.length;F--;)if(Il(g[F][0],w))return F;return-1}function cm(g,w,F,oe){return Sl(g,function(Te,Xe,Mt){w(oe,Te,F(Te),Mt)}),oe}function xc(g,w){return g&&zu(w,ws(w),g)}function Sc(g,w){return g&&zu(w,Tu(w),g)}function nu(g,w,F){w=="__proto__"&&jd?jd(g,w,{configurable:!0,enumerable:!0,value:F,writable:!0}):g[w]=F}function Yf(g,w){for(var F=-1,oe=w.length,Te=et(oe),Xe=g==null;++F<oe;)Te[F]=Xe?E:Dm(g,w[F]);return Te}function xl(g,w,F){return g===g&&(F!==E&&(g=g<=F?g:F),w!==E&&(g=g>=w?g:w)),g}function Cs(g,w,F,oe,Te,Xe){var Mt,Wt=w&ee,dn=w&ne,yr=w&ie;if(F&&(Mt=Te?F(g,oe,Te,Xe):F(g)),Mt!==E)return Mt;if(!_o(g))return g;var Er=ui(g);if(Er){if(Mt=vn(g),!Wt)return Gs(g,Mt)}else{var kr=ir(g),Jr=kr==Dn||kr==ft;if(Af(g))return Of(g,Wt);if(kr==kt||kr==Fn||Jr&&!Te){if(Mt=dn||Jr?{}:cn(g),!Wt)return dn?gm(g,Sc(Mt,g)):pv(g,xc(Mt,g))}else{if(!wt[kr])return Te?g:{};Mt=fr(g,kr,Wt)}}Xe||(Xe=new Lu);var ya=Xe.get(g);if(ya)return ya;Xe.set(g,Mt),mb(g)?g.forEach(function(Ja){Mt.add(Cs(Ja,w,F,Ja,g,Xe))}):vb(g)&&g.forEach(function(Ja,ji){Mt.set(ji,Cs(Ja,w,F,ji,g,Xe))});var za=yr?dn?we:bv:dn?Tu:ws,Oi=Er?E:za(g);return it(Oi||g,function(Ja,ji){Oi&&(ji=Ja,Ja=g[ji]),ol(Mt,ji,Cs(Ja,w,F,ji,g,Xe))}),Mt}function rv(g){var w=ws(g);return function(F){return Vd(F,g,w)}}function Vd(g,w,F){var oe=F.length;if(g==null)return!oe;for(g=Zn(g);oe--;){var Te=F[oe],Xe=w[Te],Mt=g[Te];if(Mt===E&&!(Te in g)||!Xe(Mt))return!1}return!0}function Jf(g,w,F){if(typeof g!="function")throw new ea(U);return Ya(function(){g.apply(E,F)},w)}function gf(g,w,F,oe){var Te=-1,Xe=Or,Mt=!0,Wt=g.length,dn=[],yr=w.length;if(!Wt)return dn;F&&(w=ar(w,jo(F))),oe?(Xe=Cn,Mt=!1):w.length>=k&&(Xe=Ls,Mt=!1,w=new Oc(w));e:for(;++Te<Wt;){var Er=g[Te],kr=F==null?Er:F(Er);if(Er=oe||Er!==0?Er:0,Mt&&kr===kr){for(var Jr=yr;Jr--;)if(w[Jr]===kr)continue e;dn.push(Er)}else Xe(w,kr,oe)||dn.push(Er)}return dn}var Sl=Uu(Fu),av=Uu(Qf,!0);function yp(g,w){var F=!0;return Sl(g,function(oe,Te,Xe){return F=!!w(oe,Te,Xe),F}),F}function Zf(g,w,F){for(var oe=-1,Te=g.length;++oe<Te;){var Xe=g[oe],Mt=w(Xe);if(Mt!=null&&(Wt===E?Mt===Mt&&!Wu(Mt):F(Mt,Wt)))var Wt=Mt,dn=Xe}return dn}function iv(g,w,F,oe){var Te=g.length;for(F=vi(F),F<0&&(F=-F>Te?0:Te+F),oe=oe===E||oe>Te?Te:vi(oe),oe<0&&(oe+=Te),oe=F>oe?0:km(oe);F<oe;)g[F++]=w;return g}function Hd(g,w){var F=[];return Sl(g,function(oe,Te,Xe){w(oe,Te,Xe)&&F.push(oe)}),F}function fs(g,w,F,oe,Te){var Xe=-1,Mt=g.length;for(F||(F=kn),Te||(Te=[]);++Xe<Mt;){var Wt=g[Xe];w>0&&F(Wt)?w>1?fs(Wt,w-1,F,oe,Te):Ca(Te,Wt):oe||(Te[Te.length]=Wt)}return Te}var Wd=gv(),ov=gv(!0);function Fu(g,w){return g&&Wd(g,w,ws)}function Qf(g,w){return g&&ov(g,w,ws)}function qf(g,w){return _n(w,function(F){return Fc(g[F])})}function ec(g,w){w=Bs(w,g);for(var F=0,oe=w.length;g!=null&&F<oe;)g=g[so(w[F++])];return F&&F==oe?g:E}function $d(g,w,F){var oe=w(g);return ui(g)?oe:Ca(oe,F(g))}function Es(g){return g==null?g===E?Bt:Ct:yc&&yc in Zn(g)?wr(g):Xa(g)}function Kd(g,w){return g>w}function sv(g,w){return g!=null&&fa.call(g,w)}function bp(g,w){return g!=null&&w in Zn(g)}function Cp(g,w,F){return g>=ys(w,F)&&g<Xi(w,F)}function ed(g,w,F){for(var oe=F?Cn:Or,Te=g[0].length,Xe=g.length,Mt=Xe,Wt=et(Xe),dn=Infinity,yr=[];Mt--;){var Er=g[Mt];Mt&&w&&(Er=ar(Er,jo(w))),dn=ys(Er.length,dn),Wt[Mt]=!F&&(w||Te>=120&&Er.length>=120)?new Oc(Mt&&Er):E}Er=g[0];var kr=-1,Jr=Wt[0];e:for(;++kr<Te&&yr.length<dn;){var ya=Er[kr],za=w?w(ya):ya;if(ya=F||ya!==0?ya:0,!(Jr?Ls(Jr,za):oe(yr,za,F))){for(Mt=Xe;--Mt;){var Oi=Wt[Mt];if(!(Oi?Ls(Oi,za):oe(g[Mt],za,F)))continue e}Jr&&Jr.push(za),yr.push(ya)}}return yr}function po(g,w,F,oe){return Fu(g,function(Te,Xe,Mt){w(oe,F(Te),Xe,Mt)}),oe}function mf(g,w,F){w=Bs(w,g),g=$a(g,w);var oe=g==null?g:g[so(Vt(w))];return oe==null?E:xe(oe,g,F)}function Xd(g){return Ko(g)&&Es(g)==Fn}function uv(g){return Ko(g)&&Es(g)==Re}function sl(g){return Ko(g)&&Es(g)==hn}function cu(g,w,F,oe,Te){return g===w?!0:g==null||w==null||!Ko(g)&&!Ko(w)?g!==g&&w!==w:td(g,w,F,oe,cu,Te)}function td(g,w,F,oe,Te,Xe){var Mt=ui(g),Wt=ui(w),dn=Mt?Ft:ir(g),yr=Wt?Ft:ir(w);dn=dn==Fn?kt:dn,yr=yr==Fn?kt:yr;var Er=dn==kt,kr=yr==kt,Jr=dn==yr;if(Jr&&Af(g)){if(!Af(w))return!1;Mt=!0,Er=!1}if(Jr&&!Er)return Xe||(Xe=new Lu),Mt||yd(g)?yv(g,w,F,oe,Te,Xe):pd(g,w,dn,F,oe,Te,Xe);if(!(F&re)){var ya=Er&&fa.call(g,"__wrapped__"),za=kr&&fa.call(w,"__wrapped__");if(ya||za){var Oi=ya?g.value():g,Ja=za?w.value():w;return Xe||(Xe=new Lu),Te(Oi,Ja,F,oe,Xe)}}return Jr?(Xe||(Xe=new Lu),mm(g,w,F,oe,Te,Xe)):!1}function Al(g){return Ko(g)&&ir(g)==Ut}function ul(g,w,F,oe){var Te=F.length,Xe=Te,Mt=!oe;if(g==null)return!Xe;for(g=Zn(g);Te--;){var Wt=F[Te];if(Mt&&Wt[2]?Wt[1]!==g[Wt[0]]:!(Wt[0]in g))return!1}for(;++Te<Xe;){Wt=F[Te];var dn=Wt[0],yr=g[dn],Er=Wt[1];if(Mt&&Wt[2]){if(yr===E&&!(dn in g))return!1}else{var kr=new Lu;if(oe)var Jr=oe(yr,Er,dn,g,w,kr);if(!(Jr===E?cu(Er,yr,re|J,oe,kr):Jr))return!1}}return!0}function tc(g){if(!_o(g)||Qr(g))return!1;var w=Fc(g)?ip:In;return w.test(co(g))}function nd(g){return Ko(g)&&Es(g)==I}function rd(g){return Ko(g)&&ir(g)==Mn}function nc(g){return Ko(g)&&_p(g.length)&&!!mt[Es(g)]}function rc(g){return typeof g=="function"?g:g==null?Pu:typeof g=="object"?ui(g)?Jd(g[0],g[1]):Yd(g):jb(g)}function Ml(g){if(!Pr(g))return Ql(g);var w=[];for(var F in Zn(g))fa.call(g,F)&&F!="constructor"&&w.push(F);return w}function Ac(g){if(!_o(g))return Ur(g);var w=Pr(g),F=[];for(var oe in g)oe=="constructor"&&(w||!fa.call(g,oe))||F.push(oe);return F}function yf(g,w){return g<w}function Mc(g,w){var F=-1,oe=Mu(g)?et(g.length):[];return Sl(g,function(Te,Xe,Mt){oe[++F]=w(Te,Xe,Mt)}),oe}function Yd(g){var w=fn(g);return w.length==1&&w[0][2]?Un(w[0][0],w[0][1]):function(F){return F===g||ul(F,g,w)}}function Jd(g,w){return Jn(g)&&mr(w)?Un(so(g),w):function(F){var oe=Dm(F,g);return oe===E&&oe===w?Im(F,g):cu(w,oe,re|J)}}function Tl(g,w,F,oe,Te){g!==w&&Wd(w,function(Xe,Mt){if(Te||(Te=new Lu),_o(Xe))bf(g,w,Mt,F,Tl,oe,Te);else{var Wt=oe?oe(Co(g,Mt),Xe,Mt+"",g,w,Te):E;Wt===E&&(Wt=Xe),Ud(g,Mt,Wt)}},Tu)}function bf(g,w,F,oe,Te,Xe,Mt){var Wt=Co(g,F),dn=Co(w,F),yr=Mt.get(dn);if(yr){Ud(g,F,yr);return}var Er=Xe?Xe(Wt,dn,F+"",g,w,Mt):E,kr=Er===E;if(kr){var Jr=ui(dn),ya=!Jr&&Af(dn),za=!Jr&&!ya&&yd(dn);Er=dn,Jr||ya||za?ui(Wt)?Er=Wt:ts(Wt)?Er=Gs(Wt):ya?(kr=!1,Er=Of(dn,!0)):za?(kr=!1,Er=qd(dn,!0)):Er=[]:ih(dn)||md(dn)?(Er=Wt,md(Wt)?Er=Cb(Wt):(!_o(Wt)||Fc(Wt))&&(Er=cn(dn))):kr=!1}kr&&(Mt.set(dn,Er),Te(Er,dn,oe,Xe,Mt),Mt.delete(dn)),Ud(g,F,Er)}function Ep(g,w){var F=g.length;if(!!F)return w+=w<0?F:0,Vr(w,F)?g[w]:E}function lv(g,w,F){w.length?w=ar(w,function(Xe){return ui(Xe)?function(Mt){return ec(Mt,Xe.length===1?Xe[0]:Xe)}:Xe}):w=[Pu];var oe=-1;w=ar(w,jo(Jt()));var Te=Mc(g,function(Xe,Mt,Wt){var dn=ar(w,function(yr){return yr(Xe)});return{criteria:dn,index:++oe,value:Xe}});return xu(Te,function(Xe,Mt){return pm(Xe,Mt,F)})}function Op(g,w){return ac(g,w,function(F,oe){return Im(g,oe)})}function ac(g,w,F){for(var oe=-1,Te=w.length,Xe={};++oe<Te;){var Mt=w[oe],Wt=ec(g,Mt);F(Wt,Mt)&&id(Xe,Bs(Mt,g),Wt)}return Xe}function wp(g){return function(w){return ec(w,g)}}function ad(g,w,F,oe){var Te=oe?Yi:Ai,Xe=-1,Mt=w.length,Wt=g;for(g===w&&(w=Gs(w)),F&&(Wt=ar(g,jo(F)));++Xe<Mt;)for(var dn=0,yr=w[Xe],Er=F?F(yr):yr;(dn=Te(Wt,Er,dn,oe))>-1;)Wt!==g&&Uf.call(Wt,dn,1),Uf.call(g,dn,1);return g}function Tc(g,w){for(var F=g?w.length:0,oe=F-1;F--;){var Te=w[F];if(F==oe||Te!==Xe){var Xe=Te;Vr(Te)?Uf.call(g,Te,1):ud(g,Te)}}return g}function cv(g,w){return g+Hf(qh()*(w-g+1))}function fm(g,w,F,oe){for(var Te=-1,Xe=Xi(ju((w-g)/(F||1)),0),Mt=et(Xe);Xe--;)Mt[oe?Xe:++Te]=g,g+=F;return Mt}function fv(g,w){var F="";if(!g||w<1||w>Gt)return F;do w%2&&(F+=g),w=Hf(w/2),w&&(g+=g);while(w);return F}function ci(g,w){return To(xa(g,w,Pu),g+"")}function dm(g){return wc(oh(g))}function dv(g,w){var F=oh(g);return Eo(F,xl(w,0,F.length))}function id(g,w,F,oe){if(!_o(g))return g;w=Bs(w,g);for(var Te=-1,Xe=w.length,Mt=Xe-1,Wt=g;Wt!=null&&++Te<Xe;){var dn=so(w[Te]),yr=F;if(dn==="__proto__"||dn==="constructor"||dn==="prototype")return g;if(Te!=Mt){var Er=Wt[dn];yr=oe?oe(Er,dn,Wt):E,yr===E&&(yr=_o(Er)?Er:Vr(w[Te+1])?[]:{})}ol(Wt,dn,yr),Wt=Wt[dn]}return g}var Zd=Fd?function(g,w){return Fd.set(g,w),g}:Pu,hm=jd?function(g,w){return jd(g,"toString",{configurable:!0,enumerable:!1,value:Bm(w),writable:!0})}:Pu;function hv(g){return Eo(oh(g))}function fu(g,w,F){var oe=-1,Te=g.length;w<0&&(w=-w>Te?0:Te+w),F=F>Te?Te:F,F<0&&(F+=Te),Te=w>F?0:F-w>>>0,w>>>=0;for(var Xe=et(Te);++oe<Te;)Xe[oe]=g[oe+w];return Xe}function vm(g,w){var F;return Sl(g,function(oe,Te,Xe){return F=w(oe,Te,Xe),!F}),!!F}function od(g,w,F){var oe=0,Te=g==null?oe:g.length;if(typeof w=="number"&&w===w&&Te<=un){for(;oe<Te;){var Xe=oe+Te>>>1,Mt=g[Xe];Mt!==null&&!Wu(Mt)&&(F?Mt<=w:Mt<w)?oe=Xe+1:Te=Xe}return Te}return Qd(g,w,Pu,F)}function Qd(g,w,F,oe){var Te=0,Xe=g==null?0:g.length;if(Xe===0)return 0;w=F(w);for(var Mt=w!==w,Wt=w===null,dn=Wu(w),yr=w===E;Te<Xe;){var Er=Hf((Te+Xe)/2),kr=F(g[Er]),Jr=kr!==E,ya=kr===null,za=kr===kr,Oi=Wu(kr);if(Mt)var Ja=oe||za;else yr?Ja=za&&(oe||Jr):Wt?Ja=za&&Jr&&(oe||!ya):dn?Ja=za&&Jr&&!ya&&(oe||!Oi):ya||Oi?Ja=!1:Ja=oe?kr<=w:kr<w;Ja?Te=Er+1:Xe=Er}return ys(Xe,pe)}function sd(g,w){for(var F=-1,oe=g.length,Te=0,Xe=[];++F<oe;){var Mt=g[F],Wt=w?w(Mt):Mt;if(!F||!Il(Wt,dn)){var dn=Wt;Xe[Te++]=Mt===0?0:Mt}}return Xe}function Cf(g){return typeof g=="number"?g:Wu(g)?jt:+g}function Ps(g){if(typeof g=="string")return g;if(ui(g))return ar(g,Ps)+"";if(Wu(g))return tv?tv.call(g):"";var w=g+"";return w=="0"&&1/g==-Lt?"-0":w}function Bu(g,w,F){var oe=-1,Te=Or,Xe=g.length,Mt=!0,Wt=[],dn=Wt;if(F)Mt=!1,Te=Cn;else if(Xe>=k){var yr=w?null:jc(g);if(yr)return te(yr);Mt=!1,Te=Ls,dn=new Oc}else dn=w?[]:Wt;e:for(;++oe<Xe;){var Er=g[oe],kr=w?w(Er):Er;if(Er=F||Er!==0?Er:0,Mt&&kr===kr){for(var Jr=dn.length;Jr--;)if(dn[Jr]===kr)continue e;w&&dn.push(kr),Wt.push(Er)}else Te(dn,kr,F)||(dn!==Wt&&dn.push(kr),Wt.push(Er))}return Wt}function ud(g,w){return w=Bs(w,g),g=$a(g,w),g==null||delete g[so(Vt(w))]}function ld(g,w,F,oe){return id(g,w,F(ec(g,w)),oe)}function Pc(g,w,F,oe){for(var Te=g.length,Xe=oe?Te:-1;(oe?Xe--:++Xe<Te)&&w(g[Xe],Xe,g););return F?fu(g,oe?0:Xe,oe?Xe+1:Te):fu(g,oe?Xe+1:0,oe?Te:Xe)}function Gu(g,w){var F=g;return F instanceof Di&&(F=F.value()),Xr(w,function(oe,Te){return Te.func.apply(Te.thisArg,Ca([oe],Te.args))},F)}function ll(g,w,F){var oe=g.length;if(oe<2)return oe?Bu(g[0]):[];for(var Te=-1,Xe=et(oe);++Te<oe;)for(var Mt=g[Te],Wt=-1;++Wt<oe;)Wt!=Te&&(Xe[Te]=gf(Xe[Te]||Mt,g[Wt],w,F));return Bu(fs(Xe,1),w,F)}function cd(g,w,F){for(var oe=-1,Te=g.length,Xe=w.length,Mt={};++oe<Te;){var Wt=oe<Xe?w[oe]:E;F(Mt,g[oe],Wt)}return Mt}function kc(g){return ts(g)?g:[]}function Dc(g){return typeof g=="function"?g:Pu}function Bs(g,w){return ui(g)?g:Jn(g,w)?[g]:No(uo(g))}var fd=ci;function du(g,w,F){var oe=g.length;return F=F===E?oe:F,!w&&F>=oe?g:fu(g,w,F)}var Ef=Wg||function(g){return rr.clearTimeout(g)};function Of(g,w){if(w)return g.slice();var F=g.length,oe=qo?qo(F):new g.constructor(F);return g.copy(oe),oe}function dd(g){var w=new g.constructor(g.byteLength);return new Cl(w).set(new Cl(g)),w}function Ic(g,w){var F=w?dd(g.buffer):g.buffer;return new g.constructor(F,g.byteOffset,g.byteLength)}function Rc(g){var w=new g.constructor(g.source,gn.exec(g));return w.lastIndex=g.lastIndex,w}function xp(g){return df?Zn(df.call(g)):{}}function qd(g,w){var F=w?dd(g.buffer):g.buffer;return new g.constructor(F,g.byteOffset,g.length)}function Sp(g,w){if(g!==w){var F=g!==E,oe=g===null,Te=g===g,Xe=Wu(g),Mt=w!==E,Wt=w===null,dn=w===w,yr=Wu(w);if(!Wt&&!yr&&!Xe&&g>w||Xe&&Mt&&dn&&!Wt&&!yr||oe&&Mt&&dn||!F&&dn||!Te)return 1;if(!oe&&!Xe&&!yr&&g<w||yr&&F&&Te&&!oe&&!Xe||Wt&&F&&Te||!Mt&&Te||!dn)return-1}return 0}function pm(g,w,F){for(var oe=-1,Te=g.criteria,Xe=w.criteria,Mt=Te.length,Wt=F.length;++oe<Mt;){var dn=Sp(Te[oe],Xe[oe]);if(dn){if(oe>=Wt)return dn;var yr=F[oe];return dn*(yr=="desc"?-1:1)}}return g.index-w.index}function vv(g,w,F,oe){for(var Te=-1,Xe=g.length,Mt=F.length,Wt=-1,dn=w.length,yr=Xi(Xe-Mt,0),Er=et(dn+yr),kr=!oe;++Wt<dn;)Er[Wt]=w[Wt];for(;++Te<Mt;)(kr||Te<Xe)&&(Er[F[Te]]=g[Te]);for(;yr--;)Er[Wt++]=g[Te++];return Er}function Pl(g,w,F,oe){for(var Te=-1,Xe=g.length,Mt=-1,Wt=F.length,dn=-1,yr=w.length,Er=Xi(Xe-Wt,0),kr=et(Er+yr),Jr=!oe;++Te<Er;)kr[Te]=g[Te];for(var ya=Te;++dn<yr;)kr[ya+dn]=w[dn];for(;++Mt<Wt;)(Jr||Te<Xe)&&(kr[ya+F[Mt]]=g[Te++]);return kr}function Gs(g,w){var F=-1,oe=g.length;for(w||(w=et(oe));++F<oe;)w[F]=g[F];return w}function zu(g,w,F,oe){var Te=!F;F||(F={});for(var Xe=-1,Mt=w.length;++Xe<Mt;){var Wt=w[Xe],dn=oe?oe(F[Wt],g[Wt],Wt,F,g):E;dn===E&&(dn=g[Wt]),Te?nu(F,Wt,dn):ol(F,Wt,dn)}return F}function pv(g,w){return zu(g,ur(g),w)}function gm(g,w){return zu(g,cr(g),w)}function hd(g,w){return function(F,oe){var Te=ui(F)?Ge:cm,Xe=w?w():{};return Te(F,g,Jt(oe,2),Xe)}}function wf(g){return ci(function(w,F){var oe=-1,Te=F.length,Xe=Te>1?F[Te-1]:E,Mt=Te>2?F[2]:E;for(Xe=g.length>3&&typeof Xe=="function"?(Te--,Xe):E,Mt&&$n(F[0],F[1],Mt)&&(Xe=Te<3?E:Xe,Te=1),w=Zn(w);++oe<Te;){var Wt=F[oe];Wt&&g(w,Wt,oe,Xe)}return w})}function Uu(g,w){return function(F,oe){if(F==null)return F;if(!Mu(F))return g(F,oe);for(var Te=F.length,Xe=w?Te:-1,Mt=Zn(F);(w?Xe--:++Xe<Te)&&oe(Mt[Xe],Xe,Mt)!==!1;);return F}}function gv(g){return function(w,F,oe){for(var Te=-1,Xe=Zn(w),Mt=oe(w),Wt=Mt.length;Wt--;){var dn=Mt[g?Wt:++Te];if(F(Xe[dn],dn,Xe)===!1)break}return w}}function ic(g,w,F){var oe=w&ce,Te=Nc(g);function Xe(){var Mt=this&&this!==rr&&this instanceof Xe?Te:g;return Mt.apply(oe?F:this,arguments)}return Xe}function kl(g){return function(w){w=uo(w);var F=cs(w)?rt(w):E,oe=F?F[0]:w.charAt(0),Te=F?du(F,1).join(""):w.slice(1);return oe[g]()+Te}}function Dl(g){return function(w){return Xr(Rb(jm(w).replace(Nu,"")),g,"")}}function Nc(g){return function(){var w=arguments;switch(w.length){case 0:return new g;case 1:return new g(w[0]);case 2:return new g(w[0],w[1]);case 3:return new g(w[0],w[1],w[2]);case 4:return new g(w[0],w[1],w[2],w[3]);case 5:return new g(w[0],w[1],w[2],w[3],w[4]);case 6:return new g(w[0],w[1],w[2],w[3],w[4],w[5]);case 7:return new g(w[0],w[1],w[2],w[3],w[4],w[5],w[6])}var F=hf(g.prototype),oe=g.apply(F,w);return _o(oe)?oe:F}}function eh(g,w,F){var oe=Nc(g);function Te(){for(var Xe=arguments.length,Mt=et(Xe),Wt=Xe,dn=rn(Te);Wt--;)Mt[Wt]=arguments[Wt];var yr=Xe<3&&Mt[0]!==dn&&Mt[Xe-1]!==dn?[]:N(Mt,dn);if(Xe-=yr.length,Xe<F)return rh(g,w,Vu,Te.placeholder,E,Mt,yr,E,E,F-Xe);var Er=this&&this!==rr&&this instanceof Te?oe:g;return xe(Er,this,Mt)}return Te}function mv(g){return function(w,F,oe){var Te=Zn(w);if(!Mu(w)){var Xe=Jt(F,3);w=ws(w),F=function(Wt){return Xe(Te[Wt],Wt,Te)}}var Mt=g(w,F,oe);return Mt>-1?Te[Xe?w[Mt]:Mt]:E}}function ks(g){return hu(function(w){var F=w.length,oe=F,Te=bs.prototype.thru;for(g&&w.reverse();oe--;){var Xe=w[oe];if(typeof Xe!="function")throw new ea(U);if(Te&&!Mt&&gt(Xe)=="wrapper")var Mt=new bs([],!0)}for(oe=Mt?oe:F;++oe<F;){Xe=w[oe];var Wt=gt(Xe),dn=Wt=="wrapper"?Ie(Xe):E;dn&&hr(dn[0])&&dn[1]==(j|fe|ve|de)&&!dn[4].length&&dn[9]==1?Mt=Mt[gt(dn[0])].apply(Mt,dn[3]):Mt=Xe.length==1&&hr(Xe)?Mt[Wt]():Mt.thru(Xe)}return function(){var yr=arguments,Er=yr[0];if(Mt&&yr.length==1&&ui(Er))return Mt.plant(Er).value();for(var kr=0,Jr=F?w[kr].apply(this,yr):Er;++kr<F;)Jr=w[kr].call(this,Jr);return Jr}})}function Vu(g,w,F,oe,Te,Xe,Mt,Wt,dn,yr){var Er=w&j,kr=w&ce,Jr=w&G,ya=w&(fe|se),za=w&ke,Oi=Jr?E:Nc(g);function Ja(){for(var ji=arguments.length,zi=et(ji),$u=ji;$u--;)zi[$u]=arguments[$u];if(ya)var vu=rn(Ja),pu=ms(zi,vu);if(oe&&(zi=vv(zi,oe,Te,ya)),Xe&&(zi=Pl(zi,Xe,Mt,ya)),ji-=pu,ya&&ji<yr){var ns=N(zi,vu);return rh(g,w,Vu,Ja.placeholder,F,zi,ns,Wt,dn,yr-ji)}var Nl=kr?F:this,Gc=Jr?Nl[g]:g;return ji=zi.length,Wt?zi=Ci(zi,Wt):za&&ji>1&&zi.reverse(),Er&&dn<ji&&(zi.length=dn),this&&this!==rr&&this instanceof Ja&&(Gc=Oi||Nc(Gc)),Gc.apply(Nl,zi)}return Ja}function Mo(g,w){return function(F,oe){return po(F,g,w(oe),{})}}function Os(g,w){return function(F,oe){var Te;if(F===E&&oe===E)return w;if(F!==E&&(Te=F),oe!==E){if(Te===E)return oe;typeof F=="string"||typeof oe=="string"?(F=Ps(F),oe=Ps(oe)):(F=Cf(F),oe=Cf(oe)),Te=g(F,oe)}return Te}}function th(g){return hu(function(w){return w=ar(w,jo(Jt())),ci(function(F){var oe=this;return g(w,function(Te){return xe(Te,oe,F)})})})}function nh(g,w){w=w===E?" ":Ps(w);var F=w.length;if(F<2)return F?fv(w,g):w;var oe=fv(w,ju(g/Qe(w)));return cs(w)?du(rt(oe),0,g).join(""):oe.slice(0,g)}function xf(g,w,F,oe){var Te=w&ce,Xe=Nc(g);function Mt(){for(var Wt=-1,dn=arguments.length,yr=-1,Er=oe.length,kr=et(Er+dn),Jr=this&&this!==rr&&this instanceof Mt?Xe:g;++yr<Er;)kr[yr]=oe[yr];for(;dn--;)kr[yr++]=arguments[++Wt];return xe(Jr,Te?F:this,kr)}return Mt}function Ap(g){return function(w,F,oe){return oe&&typeof oe!="number"&&$n(w,F,oe)&&(F=oe=E),w=Bc(w),F===E?(F=w,w=0):F=Bc(F),oe=oe===E?w<F?1:-1:Bc(oe),fm(w,F,oe,g)}}function vd(g){return function(w,F){return typeof w=="string"&&typeof F=="string"||(w=cl(w),F=cl(F)),g(w,F)}}function rh(g,w,F,oe,Te,Xe,Mt,Wt,dn,yr){var Er=w&fe,kr=Er?Mt:E,Jr=Er?E:Mt,ya=Er?Xe:E,za=Er?E:Xe;w|=Er?ve:ae,w&=~(Er?ae:ve),w&Z||(w&=~(ce|G));var Oi=[g,w,Te,ya,kr,za,Jr,Wt,dn,yr],Ja=F.apply(E,Oi);return hr(g)&&Lo(Ja,Oi),Ja.placeholder=oe,eo(Ja,g,w)}function ah(g){var w=sr[g];return function(F,oe){if(F=cl(F),oe=oe==null?0:ys(vi(oe),292),oe&&Wf(F)){var Te=(uo(F)+"e").split("e"),Xe=w(Te[0]+"e"+(+Te[1]+oe));return Te=(uo(Xe)+"e").split("e"),+(Te[0]+"e"+(+Te[1]-oe))}return w(F)}}var jc=Cc&&1/te(new Cc([,-0]))[1]==Lt?function(g){return new Cc(g)}:Um;function Mp(g){return function(w){var F=ir(w);return F==Ut?bl(w):F==Mn?Ee(w):js(w,g(w))}}function oo(g,w,F,oe,Te,Xe,Mt,Wt){var dn=w&G;if(!dn&&typeof g!="function")throw new ea(U);var yr=oe?oe.length:0;if(yr||(w&=~(ve|ae),oe=Te=E),Mt=Mt===E?Mt:Xi(vi(Mt),0),Wt=Wt===E?Wt:vi(Wt),yr-=Te?Te.length:0,w&ae){var Er=oe,kr=Te;oe=Te=E}var Jr=dn?E:Ie(g),ya=[g,w,F,oe,Te,Er,kr,Xe,Mt,Wt];if(Jr&&Wa(ya,Jr),g=ya[0],w=ya[1],F=ya[2],oe=ya[3],Te=ya[4],Wt=ya[9]=ya[9]===E?dn?0:g.length:Xi(ya[9]-yr,0),!Wt&&w&(fe|se)&&(w&=~(fe|se)),!w||w==ce)var za=ic(g,w,F);else w==fe||w==se?za=eh(g,w,Wt):(w==ve||w==(ce|ve))&&!Te.length?za=xf(g,w,F,oe):za=Vu.apply(E,ya);var Oi=Jr?Zd:Lo;return eo(Oi(za,ya),g,w)}function Tp(g,w,F,oe){return g===E||Il(g,Ra[F])&&!fa.call(oe,F)?w:g}function Sf(g,w,F,oe,Te,Xe){return _o(g)&&_o(w)&&(Xe.set(w,g),Tl(g,w,E,Sf,Xe),Xe.delete(w)),g}function Pp(g){return ih(g)?E:g}function yv(g,w,F,oe,Te,Xe){var Mt=F&re,Wt=g.length,dn=w.length;if(Wt!=dn&&!(Mt&&dn>Wt))return!1;var yr=Xe.get(g),Er=Xe.get(w);if(yr&&Er)return yr==w&&Er==g;var kr=-1,Jr=!0,ya=F&J?new Oc:E;for(Xe.set(g,w),Xe.set(w,g);++kr<Wt;){var za=g[kr],Oi=w[kr];if(oe)var Ja=Mt?oe(Oi,za,kr,w,g,Xe):oe(za,Oi,kr,g,w,Xe);if(Ja!==E){if(Ja)continue;Jr=!1;break}if(ya){if(!Qo(w,function(ji,zi){if(!Ls(ya,zi)&&(za===ji||Te(za,ji,F,oe,Xe)))return ya.push(zi)})){Jr=!1;break}}else if(!(za===Oi||Te(za,Oi,F,oe,Xe))){Jr=!1;break}}return Xe.delete(g),Xe.delete(w),Jr}function pd(g,w,F,oe,Te,Xe,Mt){switch(F){case Rt:if(g.byteLength!=w.byteLength||g.byteOffset!=w.byteOffset)return!1;g=g.buffer,w=w.buffer;case Re:return!(g.byteLength!=w.byteLength||!Xe(new Cl(g),new Cl(w)));case lr:case hn:case ct:return Il(+g,+w);case jn:return g.name==w.name&&g.message==w.message;case I:case dt:return g==w+"";case Ut:var Wt=bl;case Mn:var dn=oe&re;if(Wt||(Wt=te),g.size!=w.size&&!dn)return!1;var yr=Mt.get(g);if(yr)return yr==w;oe|=J,Mt.set(g,w);var Er=yv(Wt(g),Wt(w),oe,Te,Xe,Mt);return Mt.delete(g),Er;case vt:if(df)return df.call(g)==df.call(w)}return!1}function mm(g,w,F,oe,Te,Xe){var Mt=F&re,Wt=bv(g),dn=Wt.length,yr=bv(w),Er=yr.length;if(dn!=Er&&!Mt)return!1;for(var kr=dn;kr--;){var Jr=Wt[kr];if(!(Mt?Jr in w:fa.call(w,Jr)))return!1}var ya=Xe.get(g),za=Xe.get(w);if(ya&&za)return ya==w&&za==g;var Oi=!0;Xe.set(g,w),Xe.set(w,g);for(var Ja=Mt;++kr<dn;){Jr=Wt[kr];var ji=g[Jr],zi=w[Jr];if(oe)var $u=Mt?oe(zi,ji,Jr,w,g,Xe):oe(ji,zi,Jr,g,w,Xe);if(!($u===E?ji===zi||Te(ji,zi,F,oe,Xe):$u)){Oi=!1;break}Ja||(Ja=Jr=="constructor")}if(Oi&&!Ja){var vu=g.constructor,pu=w.constructor;vu!=pu&&"constructor"in g&&"constructor"in w&&!(typeof vu=="function"&&vu instanceof vu&&typeof pu=="function"&&pu instanceof pu)&&(Oi=!1)}return Xe.delete(g),Xe.delete(w),Oi}function hu(g){return To(xa(g,E,Je),g+"")}function bv(g){return $d(g,ws,ur)}function we(g){return $d(g,Tu,cr)}var Ie=Fd?function(g){return Fd.get(g)}:Um;function gt(g){for(var w=g.name+"",F=tu[w],oe=fa.call(tu,w)?F.length:0;oe--;){var Te=F[oe],Xe=Te.func;if(Xe==null||Xe==g)return Te.name}return w}function rn(g){var w=fa.call(Ue,"placeholder")?Ue:g;return w.placeholder}function Jt(){var g=Ue.iteratee||Gm;return g=g===Gm?rc:g,arguments.length?g(arguments[0],arguments[1]):g}function wn(g,w){var F=g.__data__;return Qn(w)?F[typeof w=="string"?"string":"hash"]:F.map}function fn(g){for(var w=ws(g),F=w.length;F--;){var oe=w[F],Te=g[oe];w[F]=[oe,Te,mr(Te)]}return w}function Wn(g,w){var F=gc(g,w);return tc(F)?F:E}function wr(g){var w=fa.call(g,yc),F=g[yc];try{g[yc]=E;var oe=!0}catch(Xe){}var Te=Xl.call(g);return oe&&(w?g[yc]=F:delete g[yc]),Te}var ur=bc?function(g){return g==null?[]:(g=Zn(g),_n(bc(g),function(w){return Zl.call(g,w)}))}:Vm,cr=bc?function(g){for(var w=[];g;)Ca(w,ur(g)),g=Jl(g);return w}:Vm,ir=Es;($f&&ir(new $f(new ArrayBuffer(1)))!=Rt||cf&&ir(new cf)!=Ut||_d&&ir(_d.resolve())!=yt||Cc&&ir(new Cc)!=Mn||Fs&&ir(new Fs)!=me)&&(ir=function(g){var w=Es(g),F=w==kt?g.constructor:E,oe=F?co(F):"";if(oe)switch(oe){case ev:return Rt;case Ec:return Ut;case Bd:return yt;case cp:return Mn;case fp:return me}return w});function Ir(g,w,F){for(var oe=-1,Te=F.length;++oe<Te;){var Xe=F[oe],Mt=Xe.size;switch(Xe.type){case"drop":g+=Mt;break;case"dropRight":w-=Mt;break;case"take":w=ys(w,g+Mt);break;case"takeRight":g=Xi(g,w-Mt);break}}return{start:g,end:w}}function Tr(g){var w=g.match(ot);return w?w[1].split(It):[]}function pr(g,w,F){w=Bs(w,g);for(var oe=-1,Te=w.length,Xe=!1;++oe<Te;){var Mt=so(w[oe]);if(!(Xe=g!=null&&F(g,Mt)))break;g=g[Mt]}return Xe||++oe!=Te?Xe:(Te=g==null?0:g.length,!!Te&&_p(Te)&&Vr(Mt,Te)&&(ui(g)||md(g)))}function vn(g){var w=g.length,F=new g.constructor(w);return w&&typeof g[0]=="string"&&fa.call(g,"index")&&(F.index=g.index,F.input=g.input),F}function cn(g){return typeof g.constructor=="function"&&!Pr(g)?hf(Jl(g)):{}}function fr(g,w,F){var oe=g.constructor;switch(w){case Re:return dd(g);case lr:case hn:return new oe(+g);case Rt:return Ic(g,F);case Kt:case Bn:case Nr:case Rn:case Cr:case tr:case jr:case zr:case Ua:return qd(g,F);case Ut:return new oe;case ct:case dt:return new oe(g);case I:return Rc(g);case Mn:return new oe;case vt:return xp(g)}}function Lr(g,w){var F=w.length;if(!F)return g;var oe=F-1;return w[oe]=(F>1?"& ":"")+w[oe],w=w.join(F>2?", ":" "),g.replace(ki,`{
/* [wrapped with `+w+`] */
`)}function kn(g){return ui(g)||md(g)||!!(Qh&&g&&g[Qh])}function Vr(g,w){var F=typeof g;return w=w==null?Gt:w,!!w&&(F=="number"||F!="symbol"&&da.test(g))&&g>-1&&g%1==0&&g<w}function $n(g,w,F){if(!_o(F))return!1;var oe=typeof w;return(oe=="number"?Mu(F)&&Vr(w,F.length):oe=="string"&&w in F)?Il(F[w],g):!1}function Jn(g,w){if(ui(g))return!1;var F=typeof g;return F=="number"||F=="symbol"||F=="boolean"||g==null||Wu(g)?!0:mo.test(g)||!Gi.test(g)||w!=null&&g in Zn(w)}function Qn(g){var w=typeof g;return w=="string"||w=="number"||w=="symbol"||w=="boolean"?g!=="__proto__":g===null}function hr(g){var w=gt(g),F=Ue[w];if(typeof F!="function"||!(w in Di.prototype))return!1;if(g===F)return!0;var oe=Ie(F);return!!oe&&g===oe[0]}function Qr(g){return!!_s&&_s in g}var wa=ii?Fc:Hm;function Pr(g){var w=g&&g.constructor,F=typeof w=="function"&&w.prototype||Ra;return g===F}function mr(g){return g===g&&!_o(g)}function Un(g,w){return function(F){return F==null?!1:F[g]===w&&(w!==E||g in Zn(F))}}function pa(g){var w=Ev(g,function(oe){return F.size===W&&F.clear(),oe}),F=w.cache;return w}function Wa(g,w){var F=g[1],oe=w[1],Te=F|oe,Xe=Te<(ce|G|j),Mt=oe==j&&F==fe||oe==j&&F==de&&g[7].length<=w[8]||oe==(j|de)&&w[7].length<=w[8]&&F==fe;if(!(Xe||Mt))return g;oe&ce&&(g[2]=w[2],Te|=F&ce?0:Z);var Wt=w[3];if(Wt){var dn=g[3];g[3]=dn?vv(dn,Wt,w[4]):Wt,g[4]=dn?N(g[3],Y):w[4]}return Wt=w[5],Wt&&(dn=g[5],g[5]=dn?Pl(dn,Wt,w[6]):Wt,g[6]=dn?N(g[5],Y):w[6]),Wt=w[7],Wt&&(g[7]=Wt),oe&j&&(g[8]=g[8]==null?w[8]:ys(g[8],w[8])),g[9]==null&&(g[9]=w[9]),g[0]=w[0],g[1]=Te,g}function Ur(g){var w=[];if(g!=null)for(var F in Zn(g))w.push(F);return w}function Xa(g){return Xl.call(g)}function xa(g,w,F){return w=Xi(w===E?g.length-1:w,0),function(){for(var oe=arguments,Te=-1,Xe=Xi(oe.length-w,0),Mt=et(Xe);++Te<Xe;)Mt[Te]=oe[w+Te];Te=-1;for(var Wt=et(w+1);++Te<w;)Wt[Te]=oe[Te];return Wt[w]=F(Mt),xe(g,this,Wt)}}function $a(g,w){return w.length<2?g:ec(g,fu(w,0,-1))}function Ci(g,w){for(var F=g.length,oe=ys(w.length,F),Te=Gs(g);oe--;){var Xe=w[oe];g[oe]=Vr(Xe,F)?Te[Xe]:E}return g}function Co(g,w){if(!(w==="constructor"&&typeof g[w]=="function")&&w!="__proto__")return g[w]}var Lo=to(Zd),Ya=op||function(g,w){return rr.setTimeout(g,w)},To=to(hm);function eo(g,w,F){var oe=w+"";return To(g,Lr(oe,Po(Tr(oe),F)))}function to(g){var w=0,F=0;return function(){var oe=sp(),Te=D-(oe-F);if(F=oe,Te>0){if(++w>=We)return arguments[0]}else w=0;return g.apply(E,arguments)}}function Eo(g,w){var F=-1,oe=g.length,Te=oe-1;for(w=w===E?oe:w;++F<w;){var Xe=cv(F,Te),Mt=g[Xe];g[Xe]=g[F],g[F]=Mt}return g.length=w,g}var No=pa(function(g){var w=[];return g.charCodeAt(0)===46&&w.push(""),g.replace(sa,function(F,oe,Te,Xe){w.push(Te?Xe.replace(Ve,"$1"):oe||F)}),w});function so(g){if(typeof g=="string"||Wu(g))return g;var w=g+"";return w=="0"&&1/g==-Lt?"-0":w}function co(g){if(g!=null){try{return ma.call(g)}catch(w){}try{return g+""}catch(w){}}return""}function Po(g,w){return it(ln,function(F){var oe="_."+F[0];w&F[1]&&!Or(g,oe)&&g.push(oe)}),g.sort()}function Fa(g){if(g instanceof Di)return g.clone();var w=new bs(g.__wrapped__,g.__chain__);return w.__actions__=Gs(g.__actions__),w.__index__=g.__index__,w.__values__=g.__values__,w}function ds(g,w,F){(F?$n(g,w,F):w===E)?w=1:w=Xi(vi(w),0);var oe=g==null?0:g.length;if(!oe||w<1)return[];for(var Te=0,Xe=0,Mt=et(ju(oe/w));Te<oe;)Mt[Xe++]=fu(g,Te,Te+=w);return Mt}function Ii(g){for(var w=-1,F=g==null?0:g.length,oe=0,Te=[];++w<F;){var Xe=g[w];Xe&&(Te[oe++]=Xe)}return Te}function va(){var g=arguments.length;if(!g)return[];for(var w=et(g-1),F=arguments[0],oe=g;oe--;)w[oe-1]=arguments[oe];return Ca(ui(F)?Gs(F):[F],fs(w,1))}var Ba=ci(function(g,w){return ts(g)?gf(g,fs(w,1,ts,!0)):[]}),fi=ci(function(g,w){var F=Vt(w);return ts(F)&&(F=E),ts(g)?gf(g,fs(w,1,ts,!0),Jt(F,2)):[]}),es=ci(function(g,w){var F=Vt(w);return ts(F)&&(F=E),ts(g)?gf(g,fs(w,1,ts,!0),E,F):[]});function zs(g,w,F){var oe=g==null?0:g.length;return oe?(w=F||w===E?1:vi(w),fu(g,w<0?0:w,oe)):[]}function Lc(g,w,F){var oe=g==null?0:g.length;return oe?(w=F||w===E?1:vi(w),w=oe-w,fu(g,0,w<0?0:w)):[]}function at(g,w){return g&&g.length?Pc(g,Jt(w,3),!0,!0):[]}function En(g,w){return g&&g.length?Pc(g,Jt(w,3),!0):[]}function an(g,w,F,oe){var Te=g==null?0:g.length;return Te?(F&&typeof F!="number"&&$n(g,w,F)&&(F=0,oe=Te),iv(g,w,F,oe)):[]}function Fr(g,w,F){var oe=g==null?0:g.length;if(!oe)return-1;var Te=F==null?0:vi(F);return Te<0&&(Te=Xi(oe+Te,0)),Ns(g,Jt(w,3),Te)}function Ga(g,w,F){var oe=g==null?0:g.length;if(!oe)return-1;var Te=oe-1;return F!==E&&(Te=vi(F),Te=F<0?Xi(oe+Te,0):ys(Te,oe-1)),Ns(g,Jt(w,3),Te,!0)}function Je(g){var w=g==null?0:g.length;return w?fs(g,1):[]}function Fe(g){var w=g==null?0:g.length;return w?fs(g,Lt):[]}function xt(g,w){var F=g==null?0:g.length;return F?(w=w===E?1:vi(w),fs(g,w)):[]}function Yt(g){for(var w=-1,F=g==null?0:g.length,oe={};++w<F;){var Te=g[w];oe[Te[0]]=Te[1]}return oe}function Zt(g){return g&&g.length?g[0]:E}function Dt(g,w,F){var oe=g==null?0:g.length;if(!oe)return-1;var Te=F==null?0:vi(F);return Te<0&&(Te=Xi(oe+Te,0)),Ai(g,w,Te)}function At(g){var w=g==null?0:g.length;return w?fu(g,0,-1):[]}var Ht=ci(function(g){var w=ar(g,kc);return w.length&&w[0]===g[0]?ed(w):[]}),Ze=ci(function(g){var w=Vt(g),F=ar(g,kc);return w===Vt(F)?w=E:F.pop(),F.length&&F[0]===g[0]?ed(F,Jt(w,2)):[]}),Ot=ci(function(g){var w=Vt(g),F=ar(g,kc);return w=typeof w=="function"?w:E,w&&F.pop(),F.length&&F[0]===g[0]?ed(F,E,w):[]});function Ke(g,w){return g==null?"":Kg.call(g,w)}function Vt(g){var w=g==null?0:g.length;return w?g[w-1]:E}function qt(g,w,F){var oe=g==null?0:g.length;if(!oe)return-1;var Te=oe;return F!==E&&(Te=vi(F),Te=Te<0?Xi(oe+Te,0):ys(Te,oe-1)),w===w?_e(g,w,Te):Ns(g,Ji,Te,!0)}function Nn(g,w){return g&&g.length?Ep(g,vi(w)):E}var Gn=ci(Sn);function Sn(g,w){return g&&g.length&&w&&w.length?ad(g,w):g}function gr(g,w,F){return g&&g.length&&w&&w.length?ad(g,w,Jt(F,2)):g}function Yr(g,w,F){return g&&g.length&&w&&w.length?ad(g,w,E,F):g}var Va=hu(function(g,w){var F=g==null?0:g.length,oe=Yf(g,w);return Tc(g,ar(w,function(Te){return Vr(Te,F)?+Te:Te}).sort(Sp)),oe});function Hr(g,w){var F=[];if(!(g&&g.length))return F;var oe=-1,Te=[],Xe=g.length;for(w=Jt(w,3);++oe<Xe;){var Mt=g[oe];w(Mt,oe,g)&&(F.push(Mt),Te.push(oe))}return Tc(g,Te),F}function ua(g){return g==null?g:lp.call(g)}function Na(g,w,F){var oe=g==null?0:g.length;return oe?(F&&typeof F!="number"&&$n(g,w,F)?(w=0,F=oe):(w=w==null?0:vi(w),F=F===E?oe:vi(F)),fu(g,w,F)):[]}function Ei(g,w){return od(g,w)}function Oo(g,w,F){return Qd(g,w,Jt(F,2))}function Us(g,w){var F=g==null?0:g.length;if(F){var oe=od(g,w);if(oe<F&&Il(g[oe],w))return oe}return-1}function Cv(g,w){return od(g,w,!0)}function Au(g,w,F){return Qd(g,w,Jt(F,2),!0)}function kp(g,w){var F=g==null?0:g.length;if(F){var oe=od(g,w,!0)-1;if(Il(g[oe],w))return oe}return-1}function Hu(g){return g&&g.length?sd(g):[]}function Dp(g,w){return g&&g.length?sd(g,Jt(w,2)):[]}function DE(g){var w=g==null?0:g.length;return w?fu(g,1,w):[]}function IE(g,w,F){return g&&g.length?(w=F||w===E?1:vi(w),fu(g,0,w<0?0:w)):[]}function RE(g,w,F){var oe=g==null?0:g.length;return oe?(w=F||w===E?1:vi(w),w=oe-w,fu(g,w<0?0:w,oe)):[]}function NE(g,w){return g&&g.length?Pc(g,Jt(w,3),!1,!0):[]}function jE(g,w){return g&&g.length?Pc(g,Jt(w,3)):[]}var LE=ci(function(g){return Bu(fs(g,1,ts,!0))}),_E=ci(function(g){var w=Vt(g);return ts(w)&&(w=E),Bu(fs(g,1,ts,!0),Jt(w,2))}),FE=ci(function(g){var w=Vt(g);return w=typeof w=="function"?w:E,Bu(fs(g,1,ts,!0),E,w)});function BE(g){return g&&g.length?Bu(g):[]}function _c(g,w){return g&&g.length?Bu(g,Jt(w,2)):[]}function GE(g,w){return w=typeof w=="function"?w:E,g&&g.length?Bu(g,E,w):[]}function ym(g){if(!(g&&g.length))return[];var w=0;return g=_n(g,function(F){if(ts(F))return w=Xi(F.length,w),!0}),Wo(w,function(F){return ar(g,bo(F))})}function Yy(g,w){if(!(g&&g.length))return[];var F=ym(g);return w==null?F:ar(F,function(oe){return xe(w,E,oe)})}var bm=ci(function(g,w){return ts(g)?gf(g,w):[]}),Jy=ci(function(g){return ll(_n(g,ts))}),zE=ci(function(g){var w=Vt(g);return ts(w)&&(w=E),ll(_n(g,ts),Jt(w,2))}),Cm=ci(function(g){var w=Vt(g);return w=typeof w=="function"?w:E,ll(_n(g,ts),E,w)}),UE=ci(ym);function Zy(g,w){return cd(g||[],w||[],ol)}function VE(g,w){return cd(g||[],w||[],id)}var Qy=ci(function(g){var w=g.length,F=w>1?g[w-1]:E;return F=typeof F=="function"?(g.pop(),F):E,Yy(g,F)});function Em(g){var w=Ue(g);return w.__chain__=!0,w}function HE(g,w){return w(g),g}function Ip(g,w){return w(g)}var WE=hu(function(g){var w=g.length,F=w?g[0]:0,oe=this.__wrapped__,Te=function(Xe){return Yf(Xe,g)};return w>1||this.__actions__.length||!(oe instanceof Di)||!Vr(F)?this.thru(Te):(oe=oe.slice(F,+F+(w?1:0)),oe.__actions__.push({func:Ip,args:[Te],thisArg:E}),new bs(oe,this.__chain__).thru(function(Xe){return w&&!Xe.length&&Xe.push(E),Xe}))});function Om(){return Em(this)}function $E(){return new bs(this.value(),this.__chain__)}function qy(){this.__values__===E&&(this.__values__=bb(this.value()));var g=this.__index__>=this.__values__.length,w=g?E:this.__values__[this.__index__++];return{done:g,value:w}}function KE(){return this}function XE(g){for(var w,F=this;F instanceof El;){var oe=Fa(F);oe.__index__=0,oe.__values__=E,w?Te.__wrapped__=oe:w=oe;var Te=oe;F=F.__wrapped__}return Te.__wrapped__=g,w}function YE(){var g=this.__wrapped__;if(g instanceof Di){var w=g;return this.__actions__.length&&(w=new Di(this)),w=w.reverse(),w.__actions__.push({func:Ip,args:[ua],thisArg:E}),new bs(w,this.__chain__)}return this.thru(ua)}function eb(){return Gu(this.__wrapped__,this.__actions__)}var JE=hd(function(g,w,F){fa.call(g,F)?++g[F]:nu(g,F,1)});function ZE(g,w,F){var oe=ui(g)?bn:yp;return F&&$n(g,w,F)&&(w=E),oe(g,Jt(w,3))}function QE(g,w){var F=ui(g)?_n:Hd;return F(g,Jt(w,3))}var wm=mv(Fr),qE=mv(Ga);function xm(g,w){return fs(Rp(g,w),1)}function eO(g,w){return fs(Rp(g,w),Lt)}function gd(g,w,F){return F=F===E?1:vi(F),fs(Rp(g,w),F)}function tb(g,w){var F=ui(g)?it:Sl;return F(g,Jt(w,3))}function nb(g,w){var F=ui(g)?bt:av;return F(g,Jt(w,3))}var tO=hd(function(g,w,F){fa.call(g,F)?g[F].push(w):nu(g,F,[w])});function nO(g,w,F,oe){g=Mu(g)?g:oh(g),F=F&&!oe?vi(F):0;var Te=g.length;return F<0&&(F=Xi(Te+F,0)),Fp(g)?F<=Te&&g.indexOf(w,F)>-1:!!Te&&Ai(g,w,F)>-1}var rb=ci(function(g,w,F){var oe=-1,Te=typeof w=="function",Xe=Mu(g)?et(g.length):[];return Sl(g,function(Mt){Xe[++oe]=Te?xe(w,Mt,F):mf(Mt,w,F)}),Xe}),Sm=hd(function(g,w,F){nu(g,F,w)});function Rp(g,w){var F=ui(g)?ar:Mc;return F(g,Jt(w,3))}function Np(g,w,F,oe){return g==null?[]:(ui(w)||(w=w==null?[]:[w]),F=oe?E:F,ui(F)||(F=F==null?[]:[F]),lv(g,w,F))}var rO=hd(function(g,w,F){g[F?0:1].push(w)},function(){return[[],[]]});function aO(g,w,F){var oe=ui(g)?Xr:wu,Te=arguments.length<3;return oe(g,Jt(w,4),F,Te,Sl)}function iO(g,w,F){var oe=ui(g)?Fi:wu,Te=arguments.length<3;return oe(g,Jt(w,4),F,Te,av)}function oO(g,w){var F=ui(g)?_n:Hd;return F(g,Lp(Jt(w,3)))}function sO(g){var w=ui(g)?wc:dm;return w(g)}function uO(g,w,F){(F?$n(g,w,F):w===E)?w=1:w=vi(w);var oe=ui(g)?lm:dv;return oe(g,w)}function lO(g){var w=ui(g)?zd:hv;return w(g)}function cO(g){if(g==null)return 0;if(Mu(g))return Fp(g)?Qe(g):g.length;var w=ir(g);return w==Ut||w==Mn?g.size:Ml(g).length}function fO(g,w,F){var oe=ui(g)?Qo:vm;return F&&$n(g,w,F)&&(w=E),oe(g,Jt(w,3))}var dO=ci(function(g,w){if(g==null)return[];var F=w.length;return F>1&&$n(g,w[0],w[1])?w=[]:F>2&&$n(w[0],w[1],w[2])&&(w=[w[0]]),lv(g,fs(w,1),[])}),jp=Ld||function(){return rr.Date.now()};function hO(g,w){if(typeof w!="function")throw new ea(U);return g=vi(g),function(){if(--g<1)return w.apply(this,arguments)}}function ab(g,w,F){return w=F?E:w,w=g&&w==null?g.length:w,oo(g,j,E,E,E,E,w)}function ib(g,w){var F;if(typeof w!="function")throw new ea(U);return g=vi(g),function(){return--g>0&&(F=w.apply(this,arguments)),g<=1&&(w=E),F}}var Am=ci(function(g,w,F){var oe=ce;if(F.length){var Te=N(F,rn(Am));oe|=ve}return oo(g,oe,w,F,Te)}),ob=ci(function(g,w,F){var oe=ce|G;if(F.length){var Te=N(F,rn(ob));oe|=ve}return oo(w,oe,g,F,Te)});function sb(g,w,F){w=F?E:w;var oe=oo(g,fe,E,E,E,E,E,w);return oe.placeholder=sb.placeholder,oe}function ub(g,w,F){w=F?E:w;var oe=oo(g,se,E,E,E,E,E,w);return oe.placeholder=ub.placeholder,oe}function lb(g,w,F){var oe,Te,Xe,Mt,Wt,dn,yr=0,Er=!1,kr=!1,Jr=!0;if(typeof g!="function")throw new ea(U);w=cl(w)||0,_o(F)&&(Er=!!F.leading,kr="maxWait"in F,Xe=kr?Xi(cl(F.maxWait)||0,w):Xe,Jr="trailing"in F?!!F.trailing:Jr);function ya(ns){var Nl=oe,Gc=Te;return oe=Te=E,yr=ns,Mt=g.apply(Gc,Nl),Mt}function za(ns){return yr=ns,Wt=Ya(ji,w),Er?ya(ns):Mt}function Oi(ns){var Nl=ns-dn,Gc=ns-yr,Bb=w-Nl;return kr?ys(Bb,Xe-Gc):Bb}function Ja(ns){var Nl=ns-dn,Gc=ns-yr;return dn===E||Nl>=w||Nl<0||kr&&Gc>=Xe}function ji(){var ns=jp();if(Ja(ns))return zi(ns);Wt=Ya(ji,Oi(ns))}function zi(ns){return Wt=E,Jr&&oe?ya(ns):(oe=Te=E,Mt)}function $u(){Wt!==E&&Ef(Wt),yr=0,oe=dn=Te=Wt=E}function vu(){return Wt===E?Mt:zi(jp())}function pu(){var ns=jp(),Nl=Ja(ns);if(oe=arguments,Te=this,dn=ns,Nl){if(Wt===E)return za(dn);if(kr)return Ef(Wt),Wt=Ya(ji,w),ya(dn)}return Wt===E&&(Wt=Ya(ji,w)),Mt}return pu.cancel=$u,pu.flush=vu,pu}var vO=ci(function(g,w){return Jf(g,1,w)}),pO=ci(function(g,w,F){return Jf(g,cl(w)||0,F)});function gO(g){return oo(g,ke)}function Ev(g,w){if(typeof g!="function"||w!=null&&typeof w!="function")throw new ea(U);var F=function(){var oe=arguments,Te=w?w.apply(this,oe):oe[0],Xe=F.cache;if(Xe.has(Te))return Xe.get(Te);var Mt=g.apply(this,oe);return F.cache=Xe.set(Te,Mt)||Xe,Mt};return F.cache=new(Ev.Cache||wl),F}Ev.Cache=wl;function Lp(g){if(typeof g!="function")throw new ea(U);return function(){var w=arguments;switch(w.length){case 0:return!g.call(this);case 1:return!g.call(this,w[0]);case 2:return!g.call(this,w[0],w[1]);case 3:return!g.call(this,w[0],w[1],w[2])}return!g.apply(this,w)}}function mO(g){return ib(2,g)}var yO=fd(function(g,w){w=w.length==1&&ui(w[0])?ar(w[0],jo(Jt())):ar(fs(w,1),jo(Jt()));var F=w.length;return ci(function(oe){for(var Te=-1,Xe=ys(oe.length,F);++Te<Xe;)oe[Te]=w[Te].call(this,oe[Te]);return xe(g,this,oe)})}),Mm=ci(function(g,w){var F=N(w,rn(Mm));return oo(g,ve,E,w,F)}),cb=ci(function(g,w){var F=N(w,rn(cb));return oo(g,ae,E,w,F)}),bO=hu(function(g,w){return oo(g,de,E,E,E,w)});function CO(g,w){if(typeof g!="function")throw new ea(U);return w=w===E?w:vi(w),ci(g,w)}function EO(g,w){if(typeof g!="function")throw new ea(U);return w=w==null?0:Xi(vi(w),0),ci(function(F){var oe=F[w],Te=du(F,0,w);return oe&&Ca(Te,oe),xe(g,this,Te)})}function OO(g,w,F){var oe=!0,Te=!0;if(typeof g!="function")throw new ea(U);return _o(F)&&(oe="leading"in F?!!F.leading:oe,Te="trailing"in F?!!F.trailing:Te),lb(g,w,{leading:oe,maxWait:w,trailing:Te})}function wO(g){return ab(g,1)}function xO(g,w){return Mm(Dc(w),g)}function SO(){if(!arguments.length)return[];var g=arguments[0];return ui(g)?g:[g]}function AO(g){return Cs(g,ie)}function fb(g,w){return w=typeof w=="function"?w:E,Cs(g,ie,w)}function db(g){return Cs(g,ee|ie)}function MO(g,w){return w=typeof w=="function"?w:E,Cs(g,ee|ie,w)}function TO(g,w){return w==null||Vd(g,w,ws(w))}function Il(g,w){return g===w||g!==g&&w!==w}var PO=vd(Kd),kO=vd(function(g,w){return g>=w}),md=Xd(function(){return arguments}())?Xd:function(g){return Ko(g)&&fa.call(g,"callee")&&!Zl.call(g,"callee")},ui=et.isArray,DO=K?jo(K):uv;function Mu(g){return g!=null&&_p(g.length)&&!Fc(g)}function ts(g){return Ko(g)&&Mu(g)}function IO(g){return g===!0||g===!1||Ko(g)&&Es(g)==lr}var Af=$g||Hm,RO=P?jo(P):sl;function NO(g){return Ko(g)&&g.nodeType===1&&!ih(g)}function jO(g){if(g==null)return!0;if(Mu(g)&&(ui(g)||typeof g=="string"||typeof g.splice=="function"||Af(g)||yd(g)||md(g)))return!g.length;var w=ir(g);if(w==Ut||w==Mn)return!g.size;if(Pr(g))return!Ml(g).length;for(var F in g)if(fa.call(g,F))return!1;return!0}function LO(g,w){return cu(g,w)}function _O(g,w,F){F=typeof F=="function"?F:E;var oe=F?F(g,w):E;return oe===E?cu(g,w,E,F):!!oe}function Tm(g){if(!Ko(g))return!1;var w=Es(g);return w==jn||w==On||typeof g.message=="string"&&typeof g.name=="string"&&!ih(g)}function FO(g){return typeof g=="number"&&Wf(g)}function Fc(g){if(!_o(g))return!1;var w=Es(g);return w==Dn||w==ft||w==Pn||w==tt}function hb(g){return typeof g=="number"&&g==vi(g)}function _p(g){return typeof g=="number"&&g>-1&&g%1==0&&g<=Gt}function _o(g){var w=typeof g;return g!=null&&(w=="object"||w=="function")}function Ko(g){return g!=null&&typeof g=="object"}var vb=H?jo(H):Al;function BO(g,w){return g===w||ul(g,w,fn(w))}function pb(g,w,F){return F=typeof F=="function"?F:E,ul(g,w,fn(w),F)}function GO(g){return gb(g)&&g!=+g}function zO(g){if(wa(g))throw new yn(M);return tc(g)}function UO(g){return g===null}function VO(g){return g==null}function gb(g){return typeof g=="number"||Ko(g)&&Es(g)==ct}function ih(g){if(!Ko(g)||Es(g)!=kt)return!1;var w=Jl(g);if(w===null)return!0;var F=fa.call(w,"constructor")&&w.constructor;return typeof F=="function"&&F instanceof F&&ma.call(F)==mc}var Pm=X?jo(X):nd;function HO(g){return hb(g)&&g>=-Gt&&g<=Gt}var mb=le?jo(le):rd;function Fp(g){return typeof g=="string"||!ui(g)&&Ko(g)&&Es(g)==dt}function Wu(g){return typeof g=="symbol"||Ko(g)&&Es(g)==vt}var yd=be?jo(be):nc;function WO(g){return g===E}function $O(g){return Ko(g)&&ir(g)==me}function KO(g){return Ko(g)&&Es(g)==ue}var XO=vd(yf),yb=vd(function(g,w){return g<=w});function bb(g){if(!g)return[];if(Mu(g))return Fp(g)?rt(g):Gs(g);if(Vf&&g[Vf])return eu(g[Vf]());var w=ir(g),F=w==Ut?bl:w==Mn?te:oh;return F(g)}function Bc(g){if(!g)return g===0?g:0;if(g=cl(g),g===Lt||g===-Lt){var w=g<0?-1:1;return w*$e}return g===g?g:0}function vi(g){var w=Bc(g),F=w%1;return w===w?F?w-F:w:0}function km(g){return g?xl(vi(g),0,Be):0}function cl(g){if(typeof g=="number")return g;if(Wu(g))return jt;if(_o(g)){var w=typeof g.valueOf=="function"?g.valueOf():g;g=_o(w)?w+"":w}if(typeof g!="string")return g===0?g:+g;g=$o(g);var F=en.test(g);return F||$r.test(g)?Ar(g.slice(2),F?2:8):pn.test(g)?jt:+g}function Cb(g){return zu(g,Tu(g))}function YO(g){return g?xl(vi(g),-Gt,Gt):g===0?g:0}function uo(g){return g==null?"":Ps(g)}var JO=wf(function(g,w){if(Pr(w)||Mu(w)){zu(w,ws(w),g);return}for(var F in w)fa.call(w,F)&&ol(g,F,w[F])}),Eb=wf(function(g,w){zu(w,Tu(w),g)}),Bp=wf(function(g,w,F,oe){zu(w,Tu(w),g,oe)}),ZO=wf(function(g,w,F,oe){zu(w,ws(w),g,oe)}),QO=hu(Yf);function qO(g,w){var F=hf(g);return w==null?F:xc(F,w)}var ew=ci(function(g,w){g=Zn(g);var F=-1,oe=w.length,Te=oe>2?w[2]:E;for(Te&&$n(w[0],w[1],Te)&&(oe=1);++F<oe;)for(var Xe=w[F],Mt=Tu(Xe),Wt=-1,dn=Mt.length;++Wt<dn;){var yr=Mt[Wt],Er=g[yr];(Er===E||Il(Er,Ra[yr])&&!fa.call(g,yr))&&(g[yr]=Xe[yr])}return g}),tw=ci(function(g){return g.push(E,Sf),xe(xb,E,g)});function nw(g,w){return Ia(g,Jt(w,3),Fu)}function rw(g,w){return Ia(g,Jt(w,3),Qf)}function aw(g,w){return g==null?g:Wd(g,Jt(w,3),Tu)}function iw(g,w){return g==null?g:ov(g,Jt(w,3),Tu)}function wo(g,w){return g&&Fu(g,Jt(w,3))}function Gp(g,w){return g&&Qf(g,Jt(w,3))}function Ob(g){return g==null?[]:qf(g,ws(g))}function ow(g){return g==null?[]:qf(g,Tu(g))}function Dm(g,w,F){var oe=g==null?E:ec(g,w);return oe===E?F:oe}function sw(g,w){return g!=null&&pr(g,w,sv)}function Im(g,w){return g!=null&&pr(g,w,bp)}var uw=Mo(function(g,w,F){w!=null&&typeof w.toString!="function"&&(w=Xl.call(w)),g[w]=F},Bm(Pu)),lw=Mo(function(g,w,F){w!=null&&typeof w.toString!="function"&&(w=Xl.call(w)),fa.call(g,w)?g[w].push(F):g[w]=[F]},Jt),cw=ci(mf);function ws(g){return Mu(g)?mp(g):Ml(g)}function Tu(g){return Mu(g)?mp(g,!0):Ac(g)}function fw(g,w){var F={};return w=Jt(w,3),Fu(g,function(oe,Te,Xe){nu(F,w(oe,Te,Xe),oe)}),F}function dw(g,w){var F={};return w=Jt(w,3),Fu(g,function(oe,Te,Xe){nu(F,Te,w(oe,Te,Xe))}),F}var wb=wf(function(g,w,F){Tl(g,w,F)}),xb=wf(function(g,w,F,oe){Tl(g,w,F,oe)}),hw=hu(function(g,w){var F={};if(g==null)return F;var oe=!1;w=ar(w,function(Xe){return Xe=Bs(Xe,g),oe||(oe=Xe.length>1),Xe}),zu(g,we(g),F),oe&&(F=Cs(F,ee|ne|ie,Pp));for(var Te=w.length;Te--;)ud(F,w[Te]);return F});function vw(g,w){return Sb(g,Lp(Jt(w)))}var pw=hu(function(g,w){return g==null?{}:Op(g,w)});function Sb(g,w){if(g==null)return{};var F=ar(we(g),function(oe){return[oe]});return w=Jt(w),ac(g,F,function(oe,Te){return w(oe,Te[0])})}function gw(g,w,F){w=Bs(w,g);var oe=-1,Te=w.length;for(Te||(Te=1,g=E);++oe<Te;){var Xe=g==null?E:g[so(w[oe])];Xe===E&&(oe=Te,Xe=F),g=Fc(Xe)?Xe.call(g):Xe}return g}function xr(g,w,F){return g==null?g:id(g,w,F)}function Sr(g,w,F,oe){return oe=typeof oe=="function"?oe:E,g==null?g:id(g,w,F,oe)}var Ab=Mp(ws),Rm=Mp(Tu);function mw(g,w,F){var oe=ui(g),Te=oe||Af(g)||yd(g);if(w=Jt(w,4),F==null){var Xe=g&&g.constructor;Te?F=oe?new Xe:[]:_o(g)?F=Fc(Xe)?hf(Jl(g)):{}:F={}}return(Te?it:Fu)(g,function(Mt,Wt,dn){return w(F,Mt,Wt,dn)}),F}function yw(g,w){return g==null?!0:ud(g,w)}function bw(g,w,F){return g==null?g:ld(g,w,Dc(F))}function Mb(g,w,F,oe){return oe=typeof oe=="function"?oe:E,g==null?g:ld(g,w,Dc(F),oe)}function oh(g){return g==null?[]:il(g,ws(g))}function Cw(g){return g==null?[]:il(g,Tu(g))}function Ew(g,w,F){return F===E&&(F=w,w=E),F!==E&&(F=cl(F),F=F===F?F:0),w!==E&&(w=cl(w),w=w===w?w:0),xl(cl(g),w,F)}function Nm(g,w,F){return w=Bc(w),F===E?(F=w,w=0):F=Bc(F),g=cl(g),Cp(g,w,F)}function Tb(g,w,F){if(F&&typeof F!="boolean"&&$n(g,w,F)&&(w=F=E),F===E&&(typeof w=="boolean"?(F=w,w=E):typeof g=="boolean"&&(F=g,g=E)),g===E&&w===E?(g=0,w=1):(g=Bc(g),w===E?(w=g,g=0):w=Bc(w)),g>w){var oe=g;g=w,w=oe}if(F||g%1||w%1){var Te=qh();return ys(g+Te*(w-g+Yn("1e-"+((Te+"").length-1))),w)}return cv(g,w)}var Ow=Dl(function(g,w,F){return w=w.toLowerCase(),g+(F?Pb(w):w)});function Pb(g){return _m(uo(g).toLowerCase())}function jm(g){return g=uo(g),g&&g.replace(Oa,lu).replace(Qs,"")}function ww(g,w,F){g=uo(g),w=Ps(w);var oe=g.length;F=F===E?oe:xl(vi(F),0,oe);var Te=F;return F-=w.length,F>=0&&g.slice(F,Te)==w}function xw(g){return g=uo(g),g&&ka.test(g)?g.replace(ri,uf):g}function Sw(g){return g=uo(g),g&&Io.test(g)?g.replace(yi,"\\$&"):g}var Aw=Dl(function(g,w,F){return g+(F?"-":"")+w.toLowerCase()}),Lm=Dl(function(g,w,F){return g+(F?" ":"")+w.toLowerCase()}),Mw=kl("toLowerCase");function Tw(g,w,F){g=uo(g),w=vi(w);var oe=w?Qe(g):0;if(!w||oe>=w)return g;var Te=(w-oe)/2;return nh(Hf(Te),F)+g+nh(ju(Te),F)}function Pw(g,w,F){g=uo(g),w=vi(w);var oe=w?Qe(g):0;return w&&oe<w?g+nh(w-oe,F):g}function kb(g,w,F){g=uo(g),w=vi(w);var oe=w?Qe(g):0;return w&&oe<w?nh(w-oe,F)+g:g}function kw(g,w,F){return F||w==null?w=0:w&&(w=+w),up(uo(g).replace(Pi,""),w||0)}function Dw(g,w,F){return(F?$n(g,w,F):w===E)?w=1:w=vi(w),fv(uo(g),w)}function Db(){var g=arguments,w=uo(g[0]);return g.length<3?w:w.replace(g[1],g[2])}var Iw=Dl(function(g,w,F){return g+(F?"_":"")+w.toLowerCase()});function Rw(g,w,F){return F&&typeof F!="number"&&$n(g,w,F)&&(w=F=E),F=F===E?Be:F>>>0,F?(g=uo(g),g&&(typeof w=="string"||w!=null&&!Pm(w))&&(w=Ps(w),!w&&cs(g))?du(rt(g),0,F):g.split(w,F)):[]}var Nw=Dl(function(g,w,F){return g+(F?" ":"")+_m(w)});function Ib(g,w,F){return g=uo(g),F=F==null?0:xl(vi(F),0,g.length),w=Ps(w),g.slice(F,F+w.length)==w}function jw(g,w,F){var oe=Ue.templateSettings;F&&$n(g,w,F)&&(w=E),g=uo(g),w=Bp({},w,oe,Tp);var Te=Bp({},w.imports,oe.imports,Tp),Xe=ws(Te),Mt=il(Te,Xe),Wt,dn,yr=0,Er=w.interpolate||Ka,kr="__p += '",Jr=ia((w.escape||Ka).source+"|"+Er.source+"|"+(Er===aa?Xt:Ka).source+"|"+(w.evaluate||Ka).source+"|$","g"),ya="//# sourceURL="+(fa.call(w,"sourceURL")?(w.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Et+"]")+`
`;g.replace(Jr,function(Ja,ji,zi,$u,vu,pu){return zi||(zi=$u),kr+=g.slice(yr,pu).replace(bi,$l),ji&&(Wt=!0,kr+=`' +
__e(`+ji+`) +
'`),vu&&(dn=!0,kr+=`';
`+vu+`;
__p += '`),zi&&(kr+=`' +
((__t = (`+zi+`)) == null ? '' : __t) +
'`),yr=pu+Ja.length,Ja}),kr+=`';
`;var za=fa.call(w,"variable")&&w.variable;if(!za)kr=`with (obj) {
`+kr+`
}
`;else if(St.test(za))throw new yn(V);kr=(dn?kr.replace(oa,""):kr).replace(Za,"$1").replace(ba,"$1;"),kr="function("+(za||"obj")+`) {
`+(za?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Wt?", __e = _.escape":"")+(dn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+kr+`return __p
}`;var Oi=Fm(function(){return Vn(Xe,ya+"return "+kr).apply(E,Mt)});if(Oi.source=kr,Tm(Oi))throw Oi;return Oi}function Lw(g){return uo(g).toLowerCase()}function _w(g){return uo(g).toUpperCase()}function Fw(g,w,F){if(g=uo(g),g&&(F||w===E))return $o(g);if(!g||!(w=Ps(w)))return g;var oe=rt(g),Te=rt(w),Xe=Ni(oe,Te),Mt=Su(oe,Te)+1;return du(oe,Xe,Mt).join("")}function zp(g,w,F){if(g=uo(g),g&&(F||w===E))return g.slice(0,Tt(g)+1);if(!g||!(w=Ps(w)))return g;var oe=rt(g),Te=Su(oe,rt(w))+1;return du(oe,0,Te).join("")}function Bw(g,w,F){if(g=uo(g),g&&(F||w===E))return g.replace(Pi,"");if(!g||!(w=Ps(w)))return g;var oe=rt(g),Te=Ni(oe,rt(w));return du(oe,Te).join("")}function Gw(g,w){var F=he,oe=Oe;if(_o(w)){var Te="separator"in w?w.separator:Te;F="length"in w?vi(w.length):F,oe="omission"in w?Ps(w.omission):oe}g=uo(g);var Xe=g.length;if(cs(g)){var Mt=rt(g);Xe=Mt.length}if(F>=Xe)return g;var Wt=F-Qe(oe);if(Wt<1)return oe;var dn=Mt?du(Mt,0,Wt).join(""):g.slice(0,Wt);if(Te===E)return dn+oe;if(Mt&&(Wt+=dn.length-Wt),Pm(Te)){if(g.slice(Wt).search(Te)){var yr,Er=dn;for(Te.global||(Te=ia(Te.source,uo(gn.exec(Te))+"g")),Te.lastIndex=0;yr=Te.exec(Er);)var kr=yr.index;dn=dn.slice(0,kr===E?Wt:kr)}}else if(g.indexOf(Ps(Te),Wt)!=Wt){var Jr=dn.lastIndexOf(Te);Jr>-1&&(dn=dn.slice(0,Jr))}return dn+oe}function zw(g){return g=uo(g),g&&li.test(g)?g.replace(Pa,zt):g}var Uw=Dl(function(g,w,F){return g+(F?" ":"")+w.toUpperCase()}),_m=kl("toUpperCase");function Rb(g,w,F){return g=uo(g),w=F?E:w,w===E?Kl(g)?Me(g):Ao(g):g.match(w)||[]}var Fm=ci(function(g,w){try{return xe(g,E,w)}catch(F){return Tm(F)?F:new yn(F)}}),Vw=hu(function(g,w){return it(w,function(F){F=so(F),nu(g,F,Am(g[F],g))}),g});function Hw(g){var w=g==null?0:g.length,F=Jt();return g=w?ar(g,function(oe){if(typeof oe[1]!="function")throw new ea(U);return[F(oe[0]),oe[1]]}):[],ci(function(oe){for(var Te=-1;++Te<w;){var Xe=g[Te];if(xe(Xe[0],this,oe))return xe(Xe[1],this,oe)}})}function Ww(g){return rv(Cs(g,ee))}function Bm(g){return function(){return g}}function $w(g,w){return g==null||g!==g?w:g}var Mf=ks(),Nb=ks(!0);function Pu(g){return g}function Gm(g){return rc(typeof g=="function"?g:Cs(g,ee))}function Up(g){return Yd(Cs(g,ee))}function Kw(g,w){return Jd(g,Cs(w,ee))}var Rl=ci(function(g,w){return function(F){return mf(F,g,w)}}),Xw=ci(function(g,w){return function(F){return mf(g,F,w)}});function zm(g,w,F){var oe=ws(w),Te=qf(w,oe);F==null&&!(_o(w)&&(Te.length||!oe.length))&&(F=w,w=g,g=this,Te=qf(w,ws(w)));var Xe=!(_o(F)&&"chain"in F)||!!F.chain,Mt=Fc(g);return it(Te,function(Wt){var dn=w[Wt];g[Wt]=dn,Mt&&(g.prototype[Wt]=function(){var yr=this.__chain__;if(Xe||yr){var Er=g(this.__wrapped__),kr=Er.__actions__=Gs(this.__actions__);return kr.push({func:dn,args:arguments,thisArg:g}),Er.__chain__=yr,Er}return dn.apply(g,Ca([this.value()],arguments))})}),g}function Yw(){return rr._===this&&(rr._=Jh),this}function Um(){}function Jw(g){return g=vi(g),ci(function(w){return Ep(w,g)})}var Zw=th(ar),Qw=th(bn),Vp=th(Qo);function jb(g){return Jn(g)?bo(so(g)):wp(g)}function qw(g){return function(w){return g==null?E:ec(g,w)}}var ex=Ap(),tx=Ap(!0);function Vm(){return[]}function Hm(){return!1}function nx(){return{}}function rx(){return""}function ax(){return!0}function sh(g,w){if(g=vi(g),g<1||g>Gt)return[];var F=Be,oe=ys(g,Be);w=Jt(w),g-=Be;for(var Te=Wo(oe,w);++F<g;)w(F);return Te}function ix(g){return ui(g)?ar(g,so):Wu(g)?[g]:Gs(No(uo(g)))}function ox(g){var w=++io;return uo(g)+w}var sx=Os(function(g,w){return g+w},0),Lb=ah("ceil"),ux=Os(function(g,w){return g/w},1),_b=ah("floor");function lx(g){return g&&g.length?Zf(g,Pu,Kd):E}function cx(g,w){return g&&g.length?Zf(g,Jt(w,2),Kd):E}function Fb(g){return yl(g,Pu)}function fx(g,w){return yl(g,Jt(w,2))}function dx(g){return g&&g.length?Zf(g,Pu,yf):E}function hx(g,w){return g&&g.length?Zf(g,Jt(w,2),yf):E}var vx=Os(function(g,w){return g*w},1),px=ah("round"),gx=Os(function(g,w){return g-w},0);function Wm(g){return g&&g.length?qs(g,Pu):0}function $m(g,w){return g&&g.length?qs(g,Jt(w,2)):0}return Ue.after=hO,Ue.ary=ab,Ue.assign=JO,Ue.assignIn=Eb,Ue.assignInWith=Bp,Ue.assignWith=ZO,Ue.at=QO,Ue.before=ib,Ue.bind=Am,Ue.bindAll=Vw,Ue.bindKey=ob,Ue.castArray=SO,Ue.chain=Em,Ue.chunk=ds,Ue.compact=Ii,Ue.concat=va,Ue.cond=Hw,Ue.conforms=Ww,Ue.constant=Bm,Ue.countBy=JE,Ue.create=qO,Ue.curry=sb,Ue.curryRight=ub,Ue.debounce=lb,Ue.defaults=ew,Ue.defaultsDeep=tw,Ue.defer=vO,Ue.delay=pO,Ue.difference=Ba,Ue.differenceBy=fi,Ue.differenceWith=es,Ue.drop=zs,Ue.dropRight=Lc,Ue.dropRightWhile=at,Ue.dropWhile=En,Ue.fill=an,Ue.filter=QE,Ue.flatMap=xm,Ue.flatMapDeep=eO,Ue.flatMapDepth=gd,Ue.flatten=Je,Ue.flattenDeep=Fe,Ue.flattenDepth=xt,Ue.flip=gO,Ue.flow=Mf,Ue.flowRight=Nb,Ue.fromPairs=Yt,Ue.functions=Ob,Ue.functionsIn=ow,Ue.groupBy=tO,Ue.initial=At,Ue.intersection=Ht,Ue.intersectionBy=Ze,Ue.intersectionWith=Ot,Ue.invert=uw,Ue.invertBy=lw,Ue.invokeMap=rb,Ue.iteratee=Gm,Ue.keyBy=Sm,Ue.keys=ws,Ue.keysIn=Tu,Ue.map=Rp,Ue.mapKeys=fw,Ue.mapValues=dw,Ue.matches=Up,Ue.matchesProperty=Kw,Ue.memoize=Ev,Ue.merge=wb,Ue.mergeWith=xb,Ue.method=Rl,Ue.methodOf=Xw,Ue.mixin=zm,Ue.negate=Lp,Ue.nthArg=Jw,Ue.omit=hw,Ue.omitBy=vw,Ue.once=mO,Ue.orderBy=Np,Ue.over=Zw,Ue.overArgs=yO,Ue.overEvery=Qw,Ue.overSome=Vp,Ue.partial=Mm,Ue.partialRight=cb,Ue.partition=rO,Ue.pick=pw,Ue.pickBy=Sb,Ue.property=jb,Ue.propertyOf=qw,Ue.pull=Gn,Ue.pullAll=Sn,Ue.pullAllBy=gr,Ue.pullAllWith=Yr,Ue.pullAt=Va,Ue.range=ex,Ue.rangeRight=tx,Ue.rearg=bO,Ue.reject=oO,Ue.remove=Hr,Ue.rest=CO,Ue.reverse=ua,Ue.sampleSize=uO,Ue.set=xr,Ue.setWith=Sr,Ue.shuffle=lO,Ue.slice=Na,Ue.sortBy=dO,Ue.sortedUniq=Hu,Ue.sortedUniqBy=Dp,Ue.split=Rw,Ue.spread=EO,Ue.tail=DE,Ue.take=IE,Ue.takeRight=RE,Ue.takeRightWhile=NE,Ue.takeWhile=jE,Ue.tap=HE,Ue.throttle=OO,Ue.thru=Ip,Ue.toArray=bb,Ue.toPairs=Ab,Ue.toPairsIn=Rm,Ue.toPath=ix,Ue.toPlainObject=Cb,Ue.transform=mw,Ue.unary=wO,Ue.union=LE,Ue.unionBy=_E,Ue.unionWith=FE,Ue.uniq=BE,Ue.uniqBy=_c,Ue.uniqWith=GE,Ue.unset=yw,Ue.unzip=ym,Ue.unzipWith=Yy,Ue.update=bw,Ue.updateWith=Mb,Ue.values=oh,Ue.valuesIn=Cw,Ue.without=bm,Ue.words=Rb,Ue.wrap=xO,Ue.xor=Jy,Ue.xorBy=zE,Ue.xorWith=Cm,Ue.zip=UE,Ue.zipObject=Zy,Ue.zipObjectDeep=VE,Ue.zipWith=Qy,Ue.entries=Ab,Ue.entriesIn=Rm,Ue.extend=Eb,Ue.extendWith=Bp,zm(Ue,Ue),Ue.add=sx,Ue.attempt=Fm,Ue.camelCase=Ow,Ue.capitalize=Pb,Ue.ceil=Lb,Ue.clamp=Ew,Ue.clone=AO,Ue.cloneDeep=db,Ue.cloneDeepWith=MO,Ue.cloneWith=fb,Ue.conformsTo=TO,Ue.deburr=jm,Ue.defaultTo=$w,Ue.divide=ux,Ue.endsWith=ww,Ue.eq=Il,Ue.escape=xw,Ue.escapeRegExp=Sw,Ue.every=ZE,Ue.find=wm,Ue.findIndex=Fr,Ue.findKey=nw,Ue.findLast=qE,Ue.findLastIndex=Ga,Ue.findLastKey=rw,Ue.floor=_b,Ue.forEach=tb,Ue.forEachRight=nb,Ue.forIn=aw,Ue.forInRight=iw,Ue.forOwn=wo,Ue.forOwnRight=Gp,Ue.get=Dm,Ue.gt=PO,Ue.gte=kO,Ue.has=sw,Ue.hasIn=Im,Ue.head=Zt,Ue.identity=Pu,Ue.includes=nO,Ue.indexOf=Dt,Ue.inRange=Nm,Ue.invoke=cw,Ue.isArguments=md,Ue.isArray=ui,Ue.isArrayBuffer=DO,Ue.isArrayLike=Mu,Ue.isArrayLikeObject=ts,Ue.isBoolean=IO,Ue.isBuffer=Af,Ue.isDate=RO,Ue.isElement=NO,Ue.isEmpty=jO,Ue.isEqual=LO,Ue.isEqualWith=_O,Ue.isError=Tm,Ue.isFinite=FO,Ue.isFunction=Fc,Ue.isInteger=hb,Ue.isLength=_p,Ue.isMap=vb,Ue.isMatch=BO,Ue.isMatchWith=pb,Ue.isNaN=GO,Ue.isNative=zO,Ue.isNil=VO,Ue.isNull=UO,Ue.isNumber=gb,Ue.isObject=_o,Ue.isObjectLike=Ko,Ue.isPlainObject=ih,Ue.isRegExp=Pm,Ue.isSafeInteger=HO,Ue.isSet=mb,Ue.isString=Fp,Ue.isSymbol=Wu,Ue.isTypedArray=yd,Ue.isUndefined=WO,Ue.isWeakMap=$O,Ue.isWeakSet=KO,Ue.join=Ke,Ue.kebabCase=Aw,Ue.last=Vt,Ue.lastIndexOf=qt,Ue.lowerCase=Lm,Ue.lowerFirst=Mw,Ue.lt=XO,Ue.lte=yb,Ue.max=lx,Ue.maxBy=cx,Ue.mean=Fb,Ue.meanBy=fx,Ue.min=dx,Ue.minBy=hx,Ue.stubArray=Vm,Ue.stubFalse=Hm,Ue.stubObject=nx,Ue.stubString=rx,Ue.stubTrue=ax,Ue.multiply=vx,Ue.nth=Nn,Ue.noConflict=Yw,Ue.noop=Um,Ue.now=jp,Ue.pad=Tw,Ue.padEnd=Pw,Ue.padStart=kb,Ue.parseInt=kw,Ue.random=Tb,Ue.reduce=aO,Ue.reduceRight=iO,Ue.repeat=Dw,Ue.replace=Db,Ue.result=gw,Ue.round=px,Ue.runInContext=De,Ue.sample=sO,Ue.size=cO,Ue.snakeCase=Iw,Ue.some=fO,Ue.sortedIndex=Ei,Ue.sortedIndexBy=Oo,Ue.sortedIndexOf=Us,Ue.sortedLastIndex=Cv,Ue.sortedLastIndexBy=Au,Ue.sortedLastIndexOf=kp,Ue.startCase=Nw,Ue.startsWith=Ib,Ue.subtract=gx,Ue.sum=Wm,Ue.sumBy=$m,Ue.template=jw,Ue.times=sh,Ue.toFinite=Bc,Ue.toInteger=vi,Ue.toLength=km,Ue.toLower=Lw,Ue.toNumber=cl,Ue.toSafeInteger=YO,Ue.toString=uo,Ue.toUpper=_w,Ue.trim=Fw,Ue.trimEnd=zp,Ue.trimStart=Bw,Ue.truncate=Gw,Ue.unescape=zw,Ue.uniqueId=ox,Ue.upperCase=Uw,Ue.upperFirst=_m,Ue.each=tb,Ue.eachRight=nb,Ue.first=Zt,zm(Ue,function(){var g={};return Fu(Ue,function(w,F){fa.call(Ue.prototype,F)||(g[F]=w)}),g}(),{chain:!1}),Ue.VERSION=A,it(["bind","bindKey","curry","curryRight","partial","partialRight"],function(g){Ue[g].placeholder=Ue}),it(["drop","take"],function(g,w){Di.prototype[g]=function(F){F=F===E?1:Xi(vi(F),0);var oe=this.__filtered__&&!w?new Di(this):this.clone();return oe.__filtered__?oe.__takeCount__=ys(F,oe.__takeCount__):oe.__views__.push({size:ys(F,Be),type:g+(oe.__dir__<0?"Right":"")}),oe},Di.prototype[g+"Right"]=function(F){return this.reverse()[g](F).reverse()}}),it(["filter","map","takeWhile"],function(g,w){var F=w+1,oe=F==je||F==nt;Di.prototype[g]=function(Te){var Xe=this.clone();return Xe.__iteratees__.push({iteratee:Jt(Te,3),type:F}),Xe.__filtered__=Xe.__filtered__||oe,Xe}}),it(["head","last"],function(g,w){var F="take"+(w?"Right":"");Di.prototype[g]=function(){return this[F](1).value()[0]}}),it(["initial","tail"],function(g,w){var F="drop"+(w?"":"Right");Di.prototype[g]=function(){return this.__filtered__?new Di(this):this[F](1)}}),Di.prototype.compact=function(){return this.filter(Pu)},Di.prototype.find=function(g){return this.filter(g).head()},Di.prototype.findLast=function(g){return this.reverse().find(g)},Di.prototype.invokeMap=ci(function(g,w){return typeof g=="function"?new Di(this):this.map(function(F){return mf(F,g,w)})}),Di.prototype.reject=function(g){return this.filter(Lp(Jt(g)))},Di.prototype.slice=function(g,w){g=vi(g);var F=this;return F.__filtered__&&(g>0||w<0)?new Di(F):(g<0?F=F.takeRight(-g):g&&(F=F.drop(g)),w!==E&&(w=vi(w),F=w<0?F.dropRight(-w):F.take(w-g)),F)},Di.prototype.takeRightWhile=function(g){return this.reverse().takeWhile(g).reverse()},Di.prototype.toArray=function(){return this.take(Be)},Fu(Di.prototype,function(g,w){var F=/^(?:filter|find|map|reject)|While$/.test(w),oe=/^(?:head|last)$/.test(w),Te=Ue[oe?"take"+(w=="last"?"Right":""):w],Xe=oe||/^find/.test(w);!Te||(Ue.prototype[w]=function(){var Mt=this.__wrapped__,Wt=oe?[1]:arguments,dn=Mt instanceof Di,yr=Wt[0],Er=dn||ui(Mt),kr=function(ji){var zi=Te.apply(Ue,Ca([ji],Wt));return oe&&Jr?zi[0]:zi};Er&&F&&typeof yr=="function"&&yr.length!=1&&(dn=Er=!1);var Jr=this.__chain__,ya=!!this.__actions__.length,za=Xe&&!Jr,Oi=dn&&!ya;if(!Xe&&Er){Mt=Oi?Mt:new Di(this);var Ja=g.apply(Mt,Wt);return Ja.__actions__.push({func:Ip,args:[kr],thisArg:E}),new bs(Ja,Jr)}return za&&Oi?g.apply(this,Wt):(Ja=this.thru(kr),za?oe?Ja.value()[0]:Ja.value():Ja)})}),it(["pop","push","shift","sort","splice","unshift"],function(g){var w=la[g],F=/^(?:push|sort|unshift)$/.test(g)?"tap":"thru",oe=/^(?:pop|shift)$/.test(g);Ue.prototype[g]=function(){var Te=arguments;if(oe&&!this.__chain__){var Xe=this.value();return w.apply(ui(Xe)?Xe:[],Te)}return this[F](function(Mt){return w.apply(ui(Mt)?Mt:[],Te)})}}),Fu(Di.prototype,function(g,w){var F=Ue[w];if(F){var oe=F.name+"";fa.call(tu,oe)||(tu[oe]=[]),tu[oe].push({name:w,func:F})}}),tu[Vu(E,G).name]=[{name:"wrapper",func:E}],Di.prototype.clone=Xg,Di.prototype.reverse=Yg,Di.prototype.value=dp,Ue.prototype.at=WE,Ue.prototype.chain=Om,Ue.prototype.commit=$E,Ue.prototype.next=qy,Ue.prototype.plant=XE,Ue.prototype.reverse=YE,Ue.prototype.toJSON=Ue.prototype.valueOf=Ue.prototype.value=eb,Ue.prototype.first=Ue.prototype.head,Vf&&(Ue.prototype[Vf]=KE),Ue},ut=Ye();rr._=ut,S=function(){return ut}.call(R,h,R,p),S!==E&&(p.exports=S)}).call(this)}).call(this,h("IyRk"),h("hOG+")(ge))},Lwbf:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B={},p=R.render=function(A,k,M,U){if(typeof document=="undefined"&&!U)return null;var V=U?new U:document.createElement("canvas");V.width=M*2,V.height=M*2;var $=V.getContext("2d");return $?($.fillStyle=A,$.fillRect(0,0,V.width,V.height),$.fillStyle=k,$.fillRect(0,0,M,M),$.translate(M,M),$.fillRect(0,0,M,M),V.toDataURL()):null},S=R.get=function(A,k,M,U){var V=A+"-"+k+"-"+M+(U?"-server":"");if(B[V])return B[V];var $=p(A,k,M,U);return B[V]=$,$}},"Lx/H":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Github=void 0;var B=h("q1tI"),p=ne(B),S=h("17x9"),E=ne(S),A=h("/FUP"),k=ne(A),M=h("3WF5"),U=ne(M),V=h("QkVN"),$=ne(V),W=h("TM95"),Y=h("iGDq"),ee=ne(Y);function ne(re){return re&&re.__esModule?re:{default:re}}var ie=R.Github=function(J){var ce=J.width,G=J.colors,Z=J.onChange,fe=J.onSwatchHover,se=J.triangle,ve=J.styles,ae=ve===void 0?{}:ve,j=J.className,de=j===void 0?"":j,ke=(0,k.default)((0,$.default)({default:{card:{width:ce,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},ae),{"hide-triangle":se==="hide","top-left-triangle":se==="top-left","top-right-triangle":se==="top-right","bottom-left-triangle":se==="bottom-left","bottom-right-triangle":se==="bottom-right"}),he=function(We,D){return Z({hex:We,source:"hex"},D)};return p.default.createElement("div",{style:ke.card,className:"github-picker "+de},p.default.createElement("div",{style:ke.triangleShadow}),p.default.createElement("div",{style:ke.triangle}),(0,U.default)(G,function(Oe){return p.default.createElement(ee.default,{color:Oe,key:Oe,onClick:he,onSwatchHover:fe})}))};ie.propTypes={width:E.default.oneOfType([E.default.string,E.default.number]),colors:E.default.arrayOf(E.default.string),triangle:E.default.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:E.default.object},ie.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},R.default=(0,W.ColorWrap)(ie)},"M5u/":function(ge,R){ge.exports=h;function h(B,p){var S=p[0]-B[0],E=p[1]-B[1];return Math.sqrt(S*S+E*E)}},MF6L:function(ge,R,h){ge.exports=h("u6oY")},MJZm:function(ge,R,h){"use strict";var B=h("fAei"),p=h("rePB"),S=h("U8pU"),E=h("wx14"),A=h("VTBJ"),k=h("q1tI"),M=h.n(k),U={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"},V=U,$=h("6VBw"),W=function(On,jn){return k.createElement($.a,Object(A.a)(Object(A.a)({},On),{},{ref:jn,icon:V}))};W.displayName="HolderOutlined";var Y=k.forwardRef(W),ee=h("TSYQ"),ne=h.n(ee),ie=h("H84U"),re=h("EXcs"),J=4;function ce(hn){var On,jn=hn.dropPosition,Dn=hn.dropLevelOffset,ft=hn.prefixCls,Ut=hn.indent,ct=hn.direction,Ct=ct===void 0?"ltr":ct,kt=Ct==="ltr"?"left":"right",yt=Ct==="ltr"?"right":"left",tt=(On={},Object(p.a)(On,kt,-Dn*Ut+J),Object(p.a)(On,yt,0),On);switch(jn){case-1:tt.top=-3;break;case 1:tt.bottom=-3;break;default:tt.bottom=-3,tt[kt]=Ut+J;break}return M.a.createElement("div",{style:tt,className:"".concat(ft,"-drop-indicator")})}var G=h("2jpz"),Z=k.forwardRef(function(hn,On){var jn,Dn=k.useContext(ie.b),ft=Dn.getPrefixCls,Ut=Dn.direction,ct=Dn.virtual,Ct=hn.prefixCls,kt=hn.className,yt=hn.showIcon,tt=yt===void 0?!1:yt,I=hn.showLine,Mn=hn.switcherIcon,dt=hn.blockNode,vt=dt===void 0?!1:dt,Bt=hn.children,me=hn.checkable,ue=me===void 0?!1:me,Re=hn.selectable,Rt=Re===void 0?!0:Re,Kt=hn.draggable,Bn=hn.motion,Nr=Bn===void 0?Object(E.a)(Object(E.a)({},re.a),{motionAppear:!1}):Bn,Rn=ft("tree",Ct),Cr=Object(E.a)(Object(E.a)({},hn),{checkable:ue,selectable:Rt,showIcon:tt,motion:Nr,blockNode:vt,showLine:Boolean(I),dropIndicatorRender:ce}),tr=k.useMemo(function(){if(!Kt)return!1;var jr={};switch(Object(S.a)(Kt)){case"function":jr.nodeDraggable=Kt;break;case"object":jr=Object(E.a)({},Kt);break;default:break}return jr.icon!==!1&&(jr.icon=jr.icon||k.createElement(Y,null)),jr},[Kt]);return k.createElement(B.b,Object(E.a)({itemHeight:20,ref:On,virtual:ct},Cr,{prefixCls:Rn,className:ne()((jn={},Object(p.a)(jn,"".concat(Rn,"-icon-hide"),!tt),Object(p.a)(jn,"".concat(Rn,"-block-node"),vt),Object(p.a)(jn,"".concat(Rn,"-unselectable"),!Rt),Object(p.a)(jn,"".concat(Rn,"-rtl"),Ut==="rtl"),jn),kt),direction:Ut,checkable:ue&&k.createElement("span",{className:"".concat(Rn,"-checkbox-inner")}),selectable:Rt,switcherIcon:function(zr){return Object(G.a)(Rn,Mn,I,zr)},draggable:tr}),Bt)}),fe=Z,se=h("KQm4"),ve=h("ODXe"),ae=h("9jjd"),j={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"},de=j,ke=function(On,jn){return k.createElement($.a,Object(A.a)(Object(A.a)({},On),{},{ref:jn,icon:de}))};ke.displayName="FolderOpenOutlined";var he=k.forwardRef(ke),Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},We=Oe,D=function(On,jn){return k.createElement($.a,Object(A.a)(Object(A.a)({},On),{},{ref:jn,icon:We}))};D.displayName="FolderOutlined";var je=k.forwardRef(D),pt=h("OZM5"),nt=h("815F"),Lt;(function(hn){hn[hn.None=0]="None",hn[hn.Start=1]="Start",hn[hn.End=2]="End"})(Lt||(Lt={}));function Gt(hn,On){function jn(Dn){var ft=Dn.key,Ut=Dn.children;On(ft,Dn)!==!1&&Gt(Ut||[],On)}hn.forEach(jn)}function $e(hn){var On=hn.treeData,jn=hn.expandedKeys,Dn=hn.startKey,ft=hn.endKey,Ut=[],ct=Lt.None;if(Dn&&Dn===ft)return[Dn];if(!Dn||!ft)return[];function Ct(kt){return kt===Dn||kt===ft}return Gt(On,function(kt){if(ct===Lt.End)return!1;if(Ct(kt)){if(Ut.push(kt),ct===Lt.None)ct=Lt.Start;else if(ct===Lt.Start)return ct=Lt.End,!1}else ct===Lt.Start&&Ut.push(kt);return jn.includes(kt)}),Ut}function jt(hn,On){var jn=Object(se.a)(On),Dn=[];return Gt(hn,function(ft,Ut){var ct=jn.indexOf(ft);return ct!==-1&&(Dn.push(Ut),jn.splice(ct,1)),!!jn.length}),Dn}var Be=function(hn,On){var jn={};for(var Dn in hn)Object.prototype.hasOwnProperty.call(hn,Dn)&&On.indexOf(Dn)<0&&(jn[Dn]=hn[Dn]);if(hn!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Dn=Object.getOwnPropertySymbols(hn);ft<Dn.length;ft++)On.indexOf(Dn[ft])<0&&Object.prototype.propertyIsEnumerable.call(hn,Dn[ft])&&(jn[Dn[ft]]=hn[Dn[ft]]);return jn};function pe(hn){var On=hn.isLeaf,jn=hn.expanded;return On?k.createElement(ae.a,null):jn?k.createElement(he,null):k.createElement(je,null)}function un(hn){var On=hn.treeData,jn=hn.children;return On||Object(nt.c)(jn)}var ln=function(On,jn){var Dn=On.defaultExpandAll,ft=On.defaultExpandParent,Ut=On.defaultExpandedKeys,ct=Be(On,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),Ct=k.useRef(),kt=k.useRef(),yt=function(){var ri=Object(nt.a)(un(ct)),li=ri.keyEntities,ka;return Dn?ka=Object.keys(li):ft?ka=Object(pt.e)(ct.expandedKeys||Ut||[],li):ka=ct.expandedKeys||Ut,ka},tt=k.useState(ct.selectedKeys||ct.defaultSelectedKeys||[]),I=Object(ve.a)(tt,2),Mn=I[0],dt=I[1],vt=k.useState(function(){return yt()}),Bt=Object(ve.a)(vt,2),me=Bt[0],ue=Bt[1];k.useEffect(function(){"selectedKeys"in ct&&dt(ct.selectedKeys)},[ct.selectedKeys]),k.useEffect(function(){"expandedKeys"in ct&&ue(ct.expandedKeys)},[ct.expandedKeys]);var Re=function(ri,li){var ka;return"expandedKeys"in ct||ue(ri),(ka=ct.onExpand)===null||ka===void 0?void 0:ka.call(ct,ri,li)},Rt=function(ri,li){var ka,ai=ct.multiple,Qa=li.node,aa=li.nativeEvent,Gi=Qa.key,mo=Gi===void 0?"":Gi,sa=un(ct),yi=Object(E.a)(Object(E.a)({},li),{selected:!0}),Io=(aa==null?void 0:aa.ctrlKey)||(aa==null?void 0:aa.metaKey),Pi=aa==null?void 0:aa.shiftKey,ao;ai&&Io?(ao=ri,Ct.current=mo,kt.current=ao,yi.selectedNodes=jt(sa,ao)):ai&&Pi?(ao=Array.from(new Set([].concat(Object(se.a)(kt.current||[]),Object(se.a)($e({treeData:sa,expandedKeys:me,startKey:mo,endKey:Ct.current}))))),yi.selectedNodes=jt(sa,ao)):(ao=[mo],Ct.current=mo,kt.current=ao,yi.selectedNodes=jt(sa,ao)),(ka=ct.onSelect)===null||ka===void 0||ka.call(ct,ao,yi),"selectedKeys"in ct||dt(ao)},Kt=k.useContext(ie.b),Bn=Kt.getPrefixCls,Nr=Kt.direction,Rn=ct.prefixCls,Cr=ct.className,tr=ct.showIcon,jr=tr===void 0?!0:tr,zr=ct.expandAction,Ua=zr===void 0?"click":zr,oa=Be(ct,["prefixCls","className","showIcon","expandAction"]),Za=Bn("tree",Rn),ba=ne()("".concat(Za,"-directory"),Object(p.a)({},"".concat(Za,"-directory-rtl"),Nr==="rtl"),Cr);return k.createElement(fe,Object(E.a)({icon:pe,ref:jn,blockNode:!0},oa,{showIcon:jr,expandAction:Ua,prefixCls:Za,className:ba,expandedKeys:me,selectedKeys:Mn,onSelect:Rt,onExpand:Re}))},Fn=k.forwardRef(ln),Ft=Fn,Pn=fe;Pn.DirectoryTree=Ft,Pn.TreeNode=B.a;var lr=R.a=Pn},MON2:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.STACK_OVERFLOW=R.CIRCULAR_DEPENDENCY_IN_FACTORY=R.POST_CONSTRUCT_ERROR=R.MULTIPLE_POST_CONSTRUCT_METHODS=R.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=R.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=R.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=R.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=R.ARGUMENTS_LENGTH_MISMATCH=R.INVALID_DECORATOR_OPERATION=R.INVALID_TO_SELF_VALUE=R.INVALID_FUNCTION_BINDING=R.INVALID_MIDDLEWARE_RETURN=R.NO_MORE_SNAPSHOTS_AVAILABLE=R.INVALID_BINDING_TYPE=R.NOT_IMPLEMENTED=R.CIRCULAR_DEPENDENCY=R.UNDEFINED_INJECT_ANNOTATION=R.MISSING_INJECT_ANNOTATION=R.MISSING_INJECTABLE_ANNOTATION=R.NOT_REGISTERED=R.CANNOT_UNBIND=R.AMBIGUOUS_MATCH=R.KEY_NOT_FOUND=R.NULL_ARGUMENT=R.DUPLICATED_METADATA=R.DUPLICATED_INJECTABLE_DECORATOR=void 0,R.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",R.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",R.NULL_ARGUMENT="NULL argument",R.KEY_NOT_FOUND="Key Not Found",R.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",R.CANNOT_UNBIND="Could not unbind serviceIdentifier:",R.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",R.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",R.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";var B=function(k){return"@inject called with undefined this could mean that the class "+k+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."};R.UNDEFINED_INJECT_ANNOTATION=B,R.CIRCULAR_DEPENDENCY="Circular dependency found:",R.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",R.INVALID_BINDING_TYPE="Invalid binding type:",R.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",R.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",R.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",R.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",R.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";var p=function(){for(var k=[],M=0;M<arguments.length;M++)k[M]=arguments[M];return"The number of constructor arguments in the derived class "+(k[0]+" must be >= than the number of constructor arguments of its base class.")};R.ARGUMENTS_LENGTH_MISMATCH=p,R.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",R.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",R.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",R.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",R.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";var S=function(){for(var k=[],M=0;M<arguments.length;M++)k[M]=arguments[M];return"@postConstruct error in class "+k[0]+": "+k[1]};R.POST_CONSTRUCT_ERROR=S;var E=function(){for(var k=[],M=0;M<arguments.length;M++)k[M]=arguments[M];return"It looks like there is a circular dependency "+("in one of the '"+k[0]+"' bindings. Please investigate bindings with")+("service identifier '"+k[1]+"'.")};R.CIRCULAR_DEPENDENCY_IN_FACTORY=E,R.STACK_OVERFLOW="Maximum call stack size exceeded"},"Mn/Q":function(ge,R,h){"use strict";h.d(R,"a",function(){return $});var B=h("lwsE"),p=h.n(B),S=h("W8MJ"),E=h.n(S),A=h("4cb6"),k=h.n(A),M,U,V,$=(M=Object(A.injectable)(),M(U=(V=function(){function W(){p()(this,W),this.config=void 0}return E()(W,[{key:"get",value:function(){return this.config}},{key:"set",value:function(ee){this.config=ee}}]),W}(),V))||U)},My4P:function(ge,R){ge.exports=h;function h(B,p,S){return B[0]=p[0]*S,B[1]=p[1]*S,B}},N2HP:function(ge,R){ge.exports=h;function h(B,p,S){var E=p[0]*S[1]-p[1]*S[0];return B[0]=B[1]=0,B[2]=E,B}},NEPx:function(ge,R){ge.exports=1e-6},NJEC:function(ge,R,h){"use strict";var B=h("wx14"),p=h("ODXe"),S=h("IMoZ"),E=h("TSYQ"),A=h.n(E),k=h("6cGi"),M=h("4IlW"),U=h("q1tI"),V=h("H84U"),$=h("diRs"),W=h("0n0R"),Y=h("2/Rp"),ee=h("zvFY"),ne=h("lkze"),ie=h("YMnH"),re=h("ZvpZ"),J=h("bogI"),ce=function(ae){var j=ae.prefixCls,de=ae.okButtonProps,ke=ae.cancelButtonProps,he=ae.title,Oe=ae.cancelText,We=ae.okText,D=ae.okType,je=ae.icon,pt=ae.showCancel,nt=pt===void 0?!0:pt,Lt=ae.close,Gt=ae.onConfirm,$e=ae.onCancel,jt=U.useContext(V.b),Be=jt.getPrefixCls;return U.createElement(ie.a,{componentName:"Popconfirm",defaultLocale:re.a.Popconfirm},function(pe){return U.createElement("div",{className:"".concat(j,"-inner-content")},U.createElement("div",{className:"".concat(j,"-message")},je&&U.createElement("span",{className:"".concat(j,"-message-icon")},je),U.createElement("div",{className:"".concat(j,"-message-title")},Object(J.a)(he))),U.createElement("div",{className:"".concat(j,"-buttons")},nt&&U.createElement(Y.a,Object(B.a)({onClick:$e,size:"small"},ke),Oe!=null?Oe:pe.cancelText),U.createElement(ne.a,{buttonProps:Object(B.a)(Object(B.a)({size:"small"},Object(ee.a)(D)),de),actionFn:Gt,close:Lt,prefixCls:Be("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},We!=null?We:pe.okText)))})},G=void 0,Z=function(ve,ae){var j={};for(var de in ve)Object.prototype.hasOwnProperty.call(ve,de)&&ae.indexOf(de)<0&&(j[de]=ve[de]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ke=0,de=Object.getOwnPropertySymbols(ve);ke<de.length;ke++)ae.indexOf(de[ke])<0&&Object.prototype.propertyIsEnumerable.call(ve,de[ke])&&(j[de[ke]]=ve[de[ke]]);return j},fe=U.forwardRef(function(ve,ae){var j=U.useContext(V.b),de=j.getPrefixCls,ke=Object(k.a)(!1,{value:ve.open!==void 0?ve.open:ve.visible,defaultValue:ve.defaultOpen!==void 0?ve.defaultOpen:ve.defaultVisible}),he=Object(p.a)(ke,2),Oe=he[0],We=he[1],D=function(ct,Ct){var kt,yt;We(ct,!0),(kt=ve.onVisibleChange)===null||kt===void 0||kt.call(ve,ct,Ct),(yt=ve.onOpenChange)===null||yt===void 0||yt.call(ve,ct,Ct)},je=function(ct){D(!1,ct)},pt=function(ct){var Ct;return(Ct=ve.onConfirm)===null||Ct===void 0?void 0:Ct.call(G,ct)},nt=function(ct){var Ct;D(!1,ct),(Ct=ve.onCancel)===null||Ct===void 0||Ct.call(G,ct)},Lt=function(ct){ct.keyCode===M.a.ESC&&Oe&&D(!1,ct)},Gt=function(ct){var Ct=ve.disabled,kt=Ct===void 0?!1:Ct;kt||D(ct)},$e=ve.prefixCls,jt=ve.placement,Be=jt===void 0?"top":jt,pe=ve.trigger,un=pe===void 0?"click":pe,ln=ve.okType,Fn=ln===void 0?"primary":ln,Ft=ve.icon,Pn=Ft===void 0?U.createElement(S.a,null):Ft,lr=ve.children,hn=ve.overlayClassName,On=Z(ve,["prefixCls","placement","trigger","okType","icon","children","overlayClassName"]),jn=de("popover",$e),Dn=de("popconfirm",$e),ft=A()(Dn,hn);return U.createElement($.a,Object(B.a)({},On,{trigger:un,prefixCls:jn,placement:Be,onOpenChange:Gt,open:Oe,ref:ae,overlayClassName:ft,_overlay:U.createElement(ce,Object(B.a)({okType:Fn,icon:Pn},ve,{prefixCls:jn,close:je,onConfirm:pt,onCancel:nt}))}),Object(W.a)(lr,{onKeyDown:function(ct){var Ct,kt;U.isValidElement(lr)&&((kt=lr==null?void 0:(Ct=lr.props).onKeyDown)===null||kt===void 0||kt.call(Ct,ct)),Lt(ct)}}))}),se=R.a=fe},NSvM:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.ChromePointer=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.ChromePointer=function(){var U=(0,E.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return p.default.createElement("div",{style:U.picker})};R.default=k},NirO:function(ge,R){},Nq3d:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Checkboard=void 0;var B=h("q1tI"),p=U(B),S=h("/FUP"),E=U(S),A=h("Lwbf"),k=M(A);function M($){if($&&$.__esModule)return $;var W={};if($!=null)for(var Y in $)Object.prototype.hasOwnProperty.call($,Y)&&(W[Y]=$[Y]);return W.default=$,W}function U($){return $&&$.__esModule?$:{default:$}}var V=R.Checkboard=function(W){var Y=W.white,ee=W.grey,ne=W.size,ie=W.renderers,re=W.borderRadius,J=W.boxShadow,ce=(0,E.default)({default:{grid:{borderRadius:re,boxShadow:J,absolute:"0px 0px 0px 0px",background:"url("+k.get(Y,ee,ne,ie.canvas)+") center left"}}});return p.default.createElement("div",{style:ce.grid})};V.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}},R.default=V},Nsbk:function(ge,R){function h(B){return ge.exports=h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(S){return S.__proto__||Object.getPrototypeOf(S)},ge.exports.__esModule=!0,ge.exports.default=ge.exports,h(B)}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},OY0T:function(ge,R,h){},OYk8:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SliderSwatches=void 0;var B=h("q1tI"),p=M(B),S=h("/FUP"),E=M(S),A=h("PGcv"),k=M(A);function M(V){return V&&V.__esModule?V:{default:V}}var U=R.SliderSwatches=function($){var W=$.onClick,Y=$.hsl,ee=(0,E.default)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),ne=.1;return p.default.createElement("div",{style:ee.swatches},p.default.createElement("div",{style:ee.swatch},p.default.createElement(k.default,{hsl:Y,offset:".80",active:Math.abs(Y.l-.8)<ne&&Math.abs(Y.s-.5)<ne,onClick:W,first:!0})),p.default.createElement("div",{style:ee.swatch},p.default.createElement(k.default,{hsl:Y,offset:".65",active:Math.abs(Y.l-.65)<ne&&Math.abs(Y.s-.5)<ne,onClick:W})),p.default.createElement("div",{style:ee.swatch},p.default.createElement(k.default,{hsl:Y,offset:".50",active:Math.abs(Y.l-.5)<ne&&Math.abs(Y.s-.5)<ne,onClick:W})),p.default.createElement("div",{style:ee.swatch},p.default.createElement(k.default,{hsl:Y,offset:".35",active:Math.abs(Y.l-.35)<ne&&Math.abs(Y.s-.5)<ne,onClick:W})),p.default.createElement("div",{style:ee.swatch},p.default.createElement(k.default,{hsl:Y,offset:".20",active:Math.abs(Y.l-.2)<ne&&Math.abs(Y.s-.5)<ne,onClick:W,last:!0})),p.default.createElement("div",{style:ee.clear}))};R.default=U},Oboc:function(ge,R){},Ojt5:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Raised=void 0;var B=h("q1tI"),p=V(B),S=h("17x9"),E=V(S),A=h("/FUP"),k=V(A),M=h("QkVN"),U=V(M);function V(W){return W&&W.__esModule?W:{default:W}}var $=R.Raised=function(Y){var ee=Y.zDepth,ne=Y.radius,ie=Y.background,re=Y.children,J=Y.styles,ce=J===void 0?{}:J,G=(0,k.default)((0,U.default)({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+ee+"px "+ee*4+"px rgba(0,0,0,.24)",borderRadius:ne,background:ie}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},ce),{"zDepth-1":ee===1});return p.default.createElement("div",{style:G.wrap},p.default.createElement("div",{style:G.bg}),p.default.createElement("div",{style:G.content},re))};$.propTypes={background:E.default.string,zDepth:E.default.oneOf([0,1,2,3,4,5]),radius:E.default.number,styles:E.default.object},$.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}},R.default=$},OqSR:function(ge,R,h){"use strict";h.d(R,"a",function(){return kt});var B=h("mNvP"),p=h("4cb6"),S=h("APxj"),E=h.n(S),A=h("oDt1"),k=h("yG8O"),M=h.n(k),U=h("lwsE"),V=h.n(U),$=h("W8MJ"),W=h.n($),Y=h("U+yc"),ee=h.n(Y),ne=h("1ABj"),ie=h("+uE7"),re=h("k6w6"),J,ce,G,Z,fe,se,ve=(J=Object(p.injectable)(),ce=Object(p.inject)(ie.a.RenderEngine),J(G=(Z=(se=function(){function yt(){V()(this,yt),M()(this,"engine",fe,this),this.resourcePool={}}return W()(yt,[{key:"getOrCreateResource",value:function(I){if(!this.resourcePool[I.name]){var Mn=I.descriptor,dt=Mn.width,vt=Mn.height,Bt=Mn.usage;this.resourcePool[I.name]=this.engine.createFramebuffer({color:this.engine.createTexture2D({width:dt,height:vt,wrapS:re.a.CLAMP_TO_EDGE,wrapT:re.a.CLAMP_TO_EDGE,usage:Bt})})}return this.resourcePool[I.name]}},{key:"clean",value:function(){this.resourcePool={}}}]),yt}(),se),fe=ee()(Z.prototype,"engine",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z))||G),ae=h("z5Mu"),j=h("0arJ"),de=h("4dNS"),ke=h("ph3A"),he=h("RlxE"),Oe=h("baXp"),We=h("6B+r"),D=h("kfnj"),je=h("g1CP"),pt=h("FlHB"),nt=h("94HZ"),Lt=h("tyuB"),Gt=h("IQ25"),$e=h("7W2i"),jt=h.n($e),Be=h("a1gu"),pe=h.n(Be),un=h("Nsbk"),ln=h.n(un);function Fn(yt){var tt=Ft();return function(){var Mn=ln()(yt),dt;if(tt){var vt=ln()(this).constructor;dt=Reflect.construct(Mn,arguments,vt)}else dt=Mn.apply(this,arguments);return pe()(this,dt)}}function Ft(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(yt){return!1}}var Pn=function(yt){jt()(I,yt);var tt=Fn(I);function I(Mn){var dt;return V()(this,I),dt=tt.call(this,Mn),dt.name=void 0,dt.name=Mn.name||"",dt}return I}(A.a),lr=h("BFph"),hn=h("Gc+X"),On=h("Mn/Q"),jn=h("LGRX"),Dn=h("yZ5d"),ft=new p.Container,Ut=E()(ft,!1),ct=function(tt){var I=Ut.lazyInject(tt);return function(Mn,dt,vt){I.call(this,Mn,dt),vt&&(vt.initializer=function(){return Mn[dt]})}},Ct=function(tt){var I=Ut.lazyMultiInject(tt);return function(Mn,dt,vt){I.call(this,Mn,dt),vt&&(vt.initializer=function(){return Mn[dt]})}};ft.bind(ie.a.ShaderModuleService).to(Dn.a).inSingletonScope(),ft.bind(ie.a.NameComponentManager).toConstantValue(new A.b(Pn)),ft.bind(ie.a.HierarchyComponentManager).toConstantValue(new A.b(Gt.a)),ft.bind(ie.a.TransformComponentManager).toConstantValue(new A.b(hn.a)),ft.bind(ie.a.MeshComponentManager).toConstantValue(new A.b(We.a)),ft.bind(ie.a.CullableComponentManager).toConstantValue(new A.b(Oe.a)),ft.bind(ie.a.GeometryComponentManager).toConstantValue(new A.b(j.a)),ft.bind(ie.a.MaterialComponentManager).toConstantValue(new A.b(ke.a));function kt(){var yt=new p.Container;return yt.parent=ft,yt.bind(ie.a.Systems).to(lr.a).inSingletonScope().whenTargetNamed(ie.a.SceneGraphSystem),yt.bind(ie.a.Systems).to(ae.a).inSingletonScope().whenTargetNamed(ie.a.FrameGraphSystem),yt.bind(ie.a.Systems).to(D.a).inSingletonScope().whenTargetNamed(ie.a.MeshSystem),yt.bind(ie.a.Systems).to(de.a).inSingletonScope().whenTargetNamed(ie.a.GeometrySystem),yt.bind(ie.a.Systems).to(he.a).inSingletonScope().whenTargetNamed(ie.a.MaterialSystem),yt.bind(ie.a.Systems).to(Lt.a).inSingletonScope().whenTargetNamed(ie.a.RendererSystem),yt.bind(ie.a.ResourcePool).to(ve).inSingletonScope(),yt.bind(ie.a.ConfigService).to(On.a).inSingletonScope(),yt.bind(ie.a.InteractorService).to(jn.a).inSingletonScope(),yt.bind(ie.a.RenderPass).to(nt.a).inSingletonScope().whenTargetNamed(nt.a.IDENTIFIER),yt.bind(ie.a.RenderPass).to(je.a).inSingletonScope().whenTargetNamed(je.a.IDENTIFIER),yt.bind(ie.a.RenderPass).to(pt.a).inSingletonScope().whenTargetNamed(pt.a.IDENTIFIER),yt.bind(ie.a.RenderPassFactory).toFactory(function(tt){return function(I){return tt.container.getNamed(ie.a.RenderPass,I)}}),yt}},P2fV:function(ge,R,h){"use strict";var B=h("EFp3"),p=h.n(B),S=h("+L6B"),E=h("Q9mQ"),A=h("sE09"),k=h.n(A)},"P81+":function(ge,R,h){var B=h("ZtHU");ge.exports={Graph:B.Graph,json:h("PZtI"),alg:h("kVhV"),version:B.version}},PGcv:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SliderSwatch=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.SliderSwatch=function(U){var V=U.hsl,$=U.offset,W=U.onClick,Y=W===void 0?function(){}:W,ee=U.active,ne=U.first,ie=U.last,re=(0,E.default)({default:{swatch:{height:"12px",background:"hsl("+V.h+", 50%, "+$*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:ee,first:ne,last:ie}),J=function(G){return Y({h:V.h,s:.5,l:$,source:"hsl"},G)};return p.default.createElement("div",{style:re.swatch,onClick:J})};R.default=k},PJYZ:function(ge,R){function h(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},PMMO:function(ge,R){ge.exports=h;function h(B,p){return B[0]=p[0],B[1]=p[1],B}},PZtI:function(ge,R,h){var B=h("3z9K"),p=h("QJPA");ge.exports={write:S,read:k};function S(M){var U={options:{directed:M.isDirected(),multigraph:M.isMultigraph(),compound:M.isCompound()},nodes:E(M),edges:A(M)};return B.isUndefined(M.graph())||(U.value=B.clone(M.graph())),U}function E(M){return B.map(M.nodes(),function(U){var V=M.node(U),$=M.parent(U),W={v:U};return B.isUndefined(V)||(W.value=V),B.isUndefined($)||(W.parent=$),W})}function A(M){return B.map(M.edges(),function(U){var V=M.edge(U),$={v:U.v,w:U.w};return B.isUndefined(U.name)||($.name=U.name),B.isUndefined(V)||($.value=V),$})}function k(M){var U=new p(M.options).setGraph(M.value);return B.each(M.nodes,function(V){U.setNode(V.v,V.value),V.parent&&U.setParent(V.v,V.parent)}),B.each(M.edges,function(V){U.setEdge({v:V.v,w:V.w,name:V.name},V.value)}),U}},PnFB:function(ge,R,h){var B=h("3z9K");ge.exports=p;function p(E,A,k){B.isArray(A)||(A=[A]);var M=(E.isDirected()?E.successors:E.neighbors).bind(E),U=[],V={};return B.each(A,function($){if(!E.hasNode($))throw new Error("Graph does not have node: "+$);S(E,$,k==="post",V,M,U)}),U}function S(E,A,k,M,U,V){B.has(M,A)||(M[A]=!0,k||V.push(A),B.each(U(A),function($){S(E,$,k,M,U,V)}),k&&V.push(A))}},Pzom:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Slider=void 0;var B=h("q1tI"),p=ne(B),S=h("17x9"),E=ne(S),A=h("/FUP"),k=ne(A),M=h("QkVN"),U=ne(M),V=h("TM95"),$=h("OYk8"),W=ne($),Y=h("dATH"),ee=ne(Y);function ne(re){return re&&re.__esModule?re:{default:re}}var ie=R.Slider=function(J){var ce=J.hsl,G=J.onChange,Z=J.pointer,fe=J.styles,se=fe===void 0?{}:fe,ve=J.className,ae=ve===void 0?"":ve,j=(0,k.default)((0,U.default)({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},se));return p.default.createElement("div",{style:j.wrap||{},className:"slider-picker "+ae},p.default.createElement("div",{style:j.hue},p.default.createElement(V.Hue,{style:j.Hue,hsl:ce,pointer:Z,onChange:G})),p.default.createElement("div",{style:j.swatches},p.default.createElement(W.default,{hsl:ce,onClick:G})))};ie.propTypes={styles:E.default.object},ie.defaultProps={pointer:ee.default,styles:{}},R.default=(0,V.ColorWrap)(ie)},QJPA:function(ge,R,h){"use strict";var B=h("3z9K");ge.exports=A;var p="\0",S="\0",E="";function A(W){this._isDirected=B.has(W,"directed")?W.directed:!0,this._isMultigraph=B.has(W,"multigraph")?W.multigraph:!1,this._isCompound=B.has(W,"compound")?W.compound:!1,this._label=void 0,this._defaultNodeLabelFn=B.constant(void 0),this._defaultEdgeLabelFn=B.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[S]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}A.prototype._nodeCount=0,A.prototype._edgeCount=0,A.prototype.isDirected=function(){return this._isDirected},A.prototype.isMultigraph=function(){return this._isMultigraph},A.prototype.isCompound=function(){return this._isCompound},A.prototype.setGraph=function(W){return this._label=W,this},A.prototype.graph=function(){return this._label},A.prototype.setDefaultNodeLabel=function(W){return B.isFunction(W)||(W=B.constant(W)),this._defaultNodeLabelFn=W,this},A.prototype.nodeCount=function(){return this._nodeCount},A.prototype.nodes=function(){return B.keys(this._nodes)},A.prototype.sources=function(){return B.filter(this.nodes(),B.bind(function(W){return B.isEmpty(this._in[W])},this))},A.prototype.sinks=function(){return B.filter(this.nodes(),B.bind(function(W){return B.isEmpty(this._out[W])},this))},A.prototype.setNodes=function(W,Y){var ee=arguments;return B.each(W,B.bind(function(ne){ee.length>1?this.setNode(ne,Y):this.setNode(ne)},this)),this},A.prototype.setNode=function(W,Y){return B.has(this._nodes,W)?(arguments.length>1&&(this._nodes[W]=Y),this):(this._nodes[W]=arguments.length>1?Y:this._defaultNodeLabelFn(W),this._isCompound&&(this._parent[W]=S,this._children[W]={},this._children[S][W]=!0),this._in[W]={},this._preds[W]={},this._out[W]={},this._sucs[W]={},++this._nodeCount,this)},A.prototype.node=function(W){return this._nodes[W]},A.prototype.hasNode=function(W){return B.has(this._nodes,W)},A.prototype.removeNode=function(W){var Y=this;if(B.has(this._nodes,W)){var ee=function(ie){Y.removeEdge(Y._edgeObjs[ie])};delete this._nodes[W],this._isCompound&&(this._removeFromParentsChildList(W),delete this._parent[W],B.each(this.children(W),B.bind(function(ne){this.setParent(ne)},this)),delete this._children[W]),B.each(B.keys(this._in[W]),ee),delete this._in[W],delete this._preds[W],B.each(B.keys(this._out[W]),ee),delete this._out[W],delete this._sucs[W],--this._nodeCount}return this},A.prototype.setParent=function(W,Y){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(B.isUndefined(Y))Y=S;else{Y+="";for(var ee=Y;!B.isUndefined(ee);ee=this.parent(ee))if(ee===W)throw new Error("Setting "+Y+" as parent of "+W+" would create create a cycle");this.setNode(Y)}return this.setNode(W),this._removeFromParentsChildList(W),this._parent[W]=Y,this._children[Y][W]=!0,this},A.prototype._removeFromParentsChildList=function(W){delete this._children[this._parent[W]][W]},A.prototype.parent=function(W){if(this._isCompound){var Y=this._parent[W];if(Y!==S)return Y}},A.prototype.children=function(W){if(B.isUndefined(W)&&(W=S),this._isCompound){var Y=this._children[W];if(Y)return B.keys(Y)}else{if(W===S)return this.nodes();if(this.hasNode(W))return[]}},A.prototype.predecessors=function(W){var Y=this._preds[W];if(Y)return B.keys(Y)},A.prototype.successors=function(W){var Y=this._sucs[W];if(Y)return B.keys(Y)},A.prototype.neighbors=function(W){var Y=this.predecessors(W);if(Y)return B.union(Y,this.successors(W))},A.prototype.isLeaf=function(W){var Y;return this.isDirected()?Y=this.successors(W):Y=this.neighbors(W),Y.length===0},A.prototype.filterNodes=function(W){var Y=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});Y.setGraph(this.graph()),B.each(this._nodes,B.bind(function(re,J){W(J)&&Y.setNode(J,re)},this)),B.each(this._edgeObjs,B.bind(function(re){Y.hasNode(re.v)&&Y.hasNode(re.w)&&Y.setEdge(re,this.edge(re))},this));var ee=this,ne={};function ie(re){var J=ee.parent(re);return J===void 0||Y.hasNode(J)?(ne[re]=J,J):J in ne?ne[J]:ie(J)}return this._isCompound&&B.each(Y.nodes(),function(re){Y.setParent(re,ie(re))}),Y},A.prototype.setDefaultEdgeLabel=function(W){return B.isFunction(W)||(W=B.constant(W)),this._defaultEdgeLabelFn=W,this},A.prototype.edgeCount=function(){return this._edgeCount},A.prototype.edges=function(){return B.values(this._edgeObjs)},A.prototype.setPath=function(W,Y){var ee=this,ne=arguments;return B.reduce(W,function(ie,re){return ne.length>1?ee.setEdge(ie,re,Y):ee.setEdge(ie,re),re}),this},A.prototype.setEdge=function(){var W,Y,ee,ne,ie=!1,re=arguments[0];typeof re=="object"&&re!==null&&"v"in re?(W=re.v,Y=re.w,ee=re.name,arguments.length===2&&(ne=arguments[1],ie=!0)):(W=re,Y=arguments[1],ee=arguments[3],arguments.length>2&&(ne=arguments[2],ie=!0)),W=""+W,Y=""+Y,B.isUndefined(ee)||(ee=""+ee);var J=U(this._isDirected,W,Y,ee);if(B.has(this._edgeLabels,J))return ie&&(this._edgeLabels[J]=ne),this;if(!B.isUndefined(ee)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(W),this.setNode(Y),this._edgeLabels[J]=ie?ne:this._defaultEdgeLabelFn(W,Y,ee);var ce=V(this._isDirected,W,Y,ee);return W=ce.v,Y=ce.w,Object.freeze(ce),this._edgeObjs[J]=ce,k(this._preds[Y],W),k(this._sucs[W],Y),this._in[Y][J]=ce,this._out[W][J]=ce,this._edgeCount++,this},A.prototype.edge=function(W,Y,ee){var ne=arguments.length===1?$(this._isDirected,arguments[0]):U(this._isDirected,W,Y,ee);return this._edgeLabels[ne]},A.prototype.hasEdge=function(W,Y,ee){var ne=arguments.length===1?$(this._isDirected,arguments[0]):U(this._isDirected,W,Y,ee);return B.has(this._edgeLabels,ne)},A.prototype.removeEdge=function(W,Y,ee){var ne=arguments.length===1?$(this._isDirected,arguments[0]):U(this._isDirected,W,Y,ee),ie=this._edgeObjs[ne];return ie&&(W=ie.v,Y=ie.w,delete this._edgeLabels[ne],delete this._edgeObjs[ne],M(this._preds[Y],W),M(this._sucs[W],Y),delete this._in[Y][ne],delete this._out[W][ne],this._edgeCount--),this},A.prototype.inEdges=function(W,Y){var ee=this._in[W];if(ee){var ne=B.values(ee);return Y?B.filter(ne,function(ie){return ie.v===Y}):ne}},A.prototype.outEdges=function(W,Y){var ee=this._out[W];if(ee){var ne=B.values(ee);return Y?B.filter(ne,function(ie){return ie.w===Y}):ne}},A.prototype.nodeEdges=function(W,Y){var ee=this.inEdges(W,Y);if(ee)return ee.concat(this.outEdges(W,Y))};function k(W,Y){W[Y]?W[Y]++:W[Y]=1}function M(W,Y){--W[Y]||delete W[Y]}function U(W,Y,ee,ne){var ie=""+Y,re=""+ee;if(!W&&ie>re){var J=ie;ie=re,re=J}return ie+E+re+E+(B.isUndefined(ne)?p:ne)}function V(W,Y,ee,ne){var ie=""+Y,re=""+ee;if(!W&&ie>re){var J=ie;ie=re,re=J}var ce={v:ie,w:re};return ne&&(ce.name=ne),ce}function $(W,Y){return U(W,Y.v,Y.w,Y.name)}},"QKg/":function(ge,R,h){},QOyy:function(ge,R){ge.exports=h;function h(B,p){return B[0]=1/p[0],B[1]=1/p[1],B}},"R/W3":function(ge,R,h){var B=h("KwMD"),p=h("2ajD"),S=h("CZoQ");function E(A,k,M){return k===k?S(A,k,M):B(A,p,M)}ge.exports=E},RIqP:function(ge,R,h){var B=h("Ijbi"),p=h("EbDI"),S=h("ZhPi"),E=h("Bnag");function A(k){return B(k)||p(k)||S(k)||E()}ge.exports=A,ge.exports.__esModule=!0,ge.exports.default=ge.exports},"RR/i":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.typeConstraint=R.namedConstraint=R.taggedConstraint=R.traverseAncerstors=void 0;var B=h("xfSm"),p=h("GXnB"),S=function M(U,V){var $=U.parentRequest;return $!==null?V($)?!0:M($,V):!1};R.traverseAncerstors=S;var E=function(U){return function(V){var $=function(Y){return Y!==null&&Y.target!==null&&Y.target.matchesTag(U)(V)};return $.metaData=new p.Metadata(U,V),$}};R.taggedConstraint=E;var A=E(B.NAMED_TAG);R.namedConstraint=A;var k=function(U){return function(V){var $=null;if(V!==null)if($=V.bindings[0],typeof U=="string"){var W=$.serviceIdentifier;return W===U}else{var Y=V.bindings[0].implementationType;return U===Y}return!1}};R.typeConstraint=k},RRY9:function(ge,R){ge.exports=h;function h(B,p){return B[0]===p[0]&&B[1]===p[1]}},Rkpk:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.ChromeFields=void 0;var B=function(){function re(J,ce){for(var G=0;G<ce.length;G++){var Z=ce[G];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(J,Z.key,Z)}}return function(J,ce,G){return ce&&re(J.prototype,ce),G&&re(J,G),J}}(),p=h("q1tI"),S=W(p),E=h("/FUP"),A=W(E),k=h("p8yl"),M=W(k),U=h("TM95"),V=h("9F0J"),$=W(V);function W(re){return re&&re.__esModule?re:{default:re}}function Y(re,J){if(!(re instanceof J))throw new TypeError("Cannot call a class as a function")}function ee(re,J){if(!re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:re}function ne(re,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);re.prototype=Object.create(J&&J.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(re,J):re.__proto__=J)}var ie=R.ChromeFields=function(re){ne(J,re);function J(){var ce,G,Z,fe;Y(this,J);for(var se=arguments.length,ve=Array(se),ae=0;ae<se;ae++)ve[ae]=arguments[ae];return fe=(G=(Z=ee(this,(ce=J.__proto__||Object.getPrototypeOf(J)).call.apply(ce,[this].concat(ve))),Z),Z.state={view:""},Z.toggleViews=function(){Z.state.view==="hex"?Z.setState({view:"rgb"}):Z.state.view==="rgb"?Z.setState({view:"hsl"}):Z.state.view==="hsl"&&(Z.props.hsl.a===1?Z.setState({view:"hex"}):Z.setState({view:"rgb"}))},Z.handleChange=function(j,de){j.hex?M.default.isValidHex(j.hex)&&Z.props.onChange({hex:j.hex,source:"hex"},de):j.r||j.g||j.b?Z.props.onChange({r:j.r||Z.props.rgb.r,g:j.g||Z.props.rgb.g,b:j.b||Z.props.rgb.b,source:"rgb"},de):j.a?(j.a<0?j.a=0:j.a>1&&(j.a=1),Z.props.onChange({h:Z.props.hsl.h,s:Z.props.hsl.s,l:Z.props.hsl.l,a:Math.round(j.a*100)/100,source:"rgb"},de)):(j.h||j.s||j.l)&&(typeof j.s=="string"&&j.s.includes("%")&&(j.s=j.s.replace("%","")),typeof j.l=="string"&&j.l.includes("%")&&(j.l=j.l.replace("%","")),Z.props.onChange({h:j.h||Z.props.hsl.h,s:Number(j.s&&j.s||Z.props.hsl.s),l:Number(j.l&&j.l||Z.props.hsl.l),source:"hsl"},de))},Z.showHighlight=function(j){j.currentTarget.style.background="#eee"},Z.hideHighlight=function(j){j.currentTarget.style.background="transparent"},G),ee(Z,fe)}return B(J,[{key:"componentDidMount",value:function(){this.props.hsl.a===1&&this.state.view!=="hex"?this.setState({view:"hex"}):this.state.view!=="rgb"&&this.state.view!=="hsl"&&this.setState({view:"rgb"})}},{key:"componentWillReceiveProps",value:function(G){G.hsl.a!==1&&this.state.view==="hex"&&this.setState({view:"rgb"})}},{key:"render",value:function(){var G=this,Z=(0,A.default)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),fe=void 0;return this.state.view==="hex"?fe=S.default.createElement("div",{style:Z.fields,className:"flexbox-fix"},S.default.createElement("div",{style:Z.field},S.default.createElement(U.EditableInput,{style:{input:Z.input,label:Z.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?fe=S.default.createElement("div",{style:Z.fields,className:"flexbox-fix"},S.default.createElement("div",{style:Z.field},S.default.createElement(U.EditableInput,{style:{input:Z.input,label:Z.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),S.default.createElement("div",{style:Z.field},S.default.createElement(U.EditableInput,{style:{input:Z.input,label:Z.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),S.default.createElement("div",{style:Z.field},S.default.createElement(U.EditableInput,{style:{input:Z.input,label:Z.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),S.default.createElement("div",{style:Z.alpha},S.default.createElement(U.EditableInput,{style:{input:Z.input,label:Z.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(fe=S.default.createElement("div",{style:Z.fields,className:"flexbox-fix"},S.default.createElement("div",{style:Z.field},S.default.createElement(U.EditableInput,{style:{input:Z.input,label:Z.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),S.default.createElement("div",{style:Z.field},S.default.createElement(U.EditableInput,{style:{input:Z.input,label:Z.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),S.default.createElement("div",{style:Z.field},S.default.createElement(U.EditableInput,{style:{input:Z.input,label:Z.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),S.default.createElement("div",{style:Z.alpha},S.default.createElement(U.EditableInput,{style:{input:Z.input,label:Z.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),S.default.createElement("div",{style:Z.wrap,className:"flexbox-fix"},fe,S.default.createElement("div",{style:Z.toggle},S.default.createElement("div",{style:Z.icon,onClick:this.toggleViews,ref:function(ve){return G.icon=ve}},S.default.createElement($.default,{style:Z.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}]),J}(S.default.Component);R.default=ie},RlxE:function(ge,R,h){"use strict";h.d(R,"a",function(){return pt});var B=h("lSNA"),p=h.n(B),S=h("o0o1"),E=h.n(S),A=h("yXPU"),k=h.n(A),M=h("yG8O"),U=h.n(M),V=h("lwsE"),$=h.n(V),W=h("W8MJ"),Y=h.n(W),ee=h("U+yc"),ne=h.n(ee),ie=h("1ABj"),re=h.n(ie),J=h("4cb6"),ce=h.n(J),G=h("Gj0h"),Z=h("+uE7"),fe,se,ve,ae,j,de,ke,he,Oe,We;function D(nt,Lt){var Gt=Object.keys(nt);if(Object.getOwnPropertySymbols){var $e=Object.getOwnPropertySymbols(nt);Lt&&($e=$e.filter(function(jt){return Object.getOwnPropertyDescriptor(nt,jt).enumerable})),Gt.push.apply(Gt,$e)}return Gt}function je(nt){for(var Lt=1;Lt<arguments.length;Lt++){var Gt=arguments[Lt]!=null?arguments[Lt]:{};Lt%2?D(Object(Gt),!0).forEach(function($e){p()(nt,$e,Gt[$e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(Gt)):D(Object(Gt)).forEach(function($e){Object.defineProperty(nt,$e,Object.getOwnPropertyDescriptor(Gt,$e))})}return nt}var pt=(fe=Object(J.injectable)(),se=Object(J.inject)(Z.a.MaterialComponentManager),ve=Object(J.inject)(Z.a.RenderEngine),ae=Object(J.inject)(Z.a.ShaderModuleService),fe(j=(de=(We=function(){function nt(){$()(this,nt),U()(this,"material",ke,this),U()(this,"engine",he,this),U()(this,"shaderModule",Oe,this)}return Y()(nt,[{key:"execute",value:function(){var Lt=k()(E.a.mark(function $e(){return E.a.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:case"end":return Be.stop()}},$e)}));function Gt(){return Lt.apply(this,arguments)}return Gt}()},{key:"tearDown",value:function(){this.material.clear()}},{key:"createShaderMaterial",value:function(Gt){var $e=Object(G.createEntity)(),jt=Gt.vertexShader,Be=Gt.fragmentShader,pe=[];if(!this.engine.supportWebGPU){var un="material-".concat($e);this.shaderModule.registerModule(un,{vs:Gt.vertexShader,fs:Gt.fragmentShader});var ln=this.shaderModule.getModule(un);jt=ln.vs,Be=ln.fs,ln.uniforms&&(pe=Object.keys(ln.uniforms).map(function(Fn){return{dirty:!0,name:Fn,data:ln.uniforms[Fn]}}))}return this.material.create($e,je(je({vertexShaderGLSL:jt,fragmentShaderGLSL:Be},Gt),{},{uniforms:pe}))}}]),nt}(),We),ke=ne()(de.prototype,"material",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=ne()(de.prototype,"engine",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oe=ne()(de.prototype,"shaderModule",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),de))||j)},S2Tr:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 392c8.8 0 16-7.2 16-16V192c0-8.8-7.2-16-16-16H744c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h56v240H96c-8.8 0-16 7.2-16 16v184c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h184c8.8 0 16-7.2 16-16V648c0-8.8-7.2-16-16-16h-56V392h56zM792 240h88v88h-88v-88zm-648 88v-88h88v88h-88zm88 456h-88v-88h88v88zm648-88v88h-88v-88h88zm-80-64h-56c-8.8 0-16 7.2-16 16v56H296v-56c0-8.8-7.2-16-16-16h-56V392h56c8.8 0 16-7.2 16-16v-56h432v56c0 8.8 7.2 16 16 16h56v240z"}}]},name:"gateway",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="GatewayOutlined";var M=R.a=p.forwardRef(k)},S8zm:function(ge,R){ge.exports=h;function h(B){var p=new Float32Array(2);return p[0]=B[0],p[1]=B[1],p}},SGks:function(ge,R){ge.exports=h;function h(B){var p=B[0],S=B[1];return p*p+S*S}},SUTL:function(ge,R){ge.exports="2.1.4"},Sk89:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.postConstruct=void 0;var B=h("MON2"),p=h("xfSm"),S=h("GXnB");function E(){return function(A,k,M){var U=new S.Metadata(p.POST_CONSTRUCT,k);if(Reflect.hasOwnMetadata(p.POST_CONSTRUCT,A.constructor))throw new Error(B.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(p.POST_CONSTRUCT,U,A.constructor)}}R.postConstruct=E},"Ska/":function(ge,R){ge.exports=h;function h(B,p){return B[0]=Math.round(p[0]),B[1]=Math.round(p[1]),B}},SksO:function(ge,R){function h(B,p){return ge.exports=h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(E,A){return E.__proto__=A,E},ge.exports.__esModule=!0,ge.exports.default=ge.exports,h(B,p)}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},Ssa2:function(ge,R,h){"use strict";h.d(R,"a",function(){return S});var B=h("IOcx"),p=h("ENEI");function S(E){for(var A=new p.a,k=B.d.fromValues(E[0],E[1],E[2]),M=B.d.fromValues(E[0],E[1],E[2]),U=3;U<E.length;){var V=E[U++],$=E[U++],W=E[U++];V<k[0]&&(k[0]=V),$<k[1]&&(k[1]=$),W<k[2]&&(k[2]=W),V>M[0]&&(M[0]=V),$>M[1]&&(M[1]=$),W>M[2]&&(M[2]=W)}return A.setMinMax(k,M),A}},Svbc:function(ge,R,h){ge.exports=h("Bu3x")},Syy6:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.AlphaPointer=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.AlphaPointer=function(U){var V=U.direction,$=(0,E.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:V==="vertical"});return p.default.createElement("div",{style:$.picker})};R.default=k},THLb:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=R.calculateChange=function(S,E,A,k,M){S.preventDefault();var U=M.clientWidth,V=M.clientHeight,$=typeof S.pageX=="number"?S.pageX:S.touches[0].pageX,W=typeof S.pageY=="number"?S.pageY:S.touches[0].pageY,Y=$-(M.getBoundingClientRect().left+window.pageXOffset),ee=W-(M.getBoundingClientRect().top+window.pageYOffset);if(A==="vertical"){var ne=void 0;if(ee<0?ne=0:ee>V?ne=1:ne=Math.round(ee*100/V)/100,E.a!==ne)return{h:E.h,s:E.s,l:E.l,a:ne,source:"rgb"}}else{var ie=void 0;if(Y<0?ie=0:Y>U?ie=1:ie=Math.round(Y*100/U)/100,k!==ie)return{h:E.h,s:E.s,l:E.l,a:ie,source:"rgb"}}return null}},TM95:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=h("yOY4");Object.defineProperty(R,"Alpha",{enumerable:!0,get:function(){return V(B).default}});var p=h("Nq3d");Object.defineProperty(R,"Checkboard",{enumerable:!0,get:function(){return V(p).default}});var S=h("AnK5");Object.defineProperty(R,"EditableInput",{enumerable:!0,get:function(){return V(S).default}});var E=h("HlQe");Object.defineProperty(R,"Hue",{enumerable:!0,get:function(){return V(E).default}});var A=h("Ojt5");Object.defineProperty(R,"Raised",{enumerable:!0,get:function(){return V(A).default}});var k=h("ccyi");Object.defineProperty(R,"Saturation",{enumerable:!0,get:function(){return V(k).default}});var M=h("UGzO");Object.defineProperty(R,"ColorWrap",{enumerable:!0,get:function(){return V(M).default}});var U=h("Ba7A");Object.defineProperty(R,"Swatch",{enumerable:!0,get:function(){return V(U).default}});function V($){return $&&$.__esModule?$:{default:$}}},Twb9:function(ge,R){ge.exports=h;function h(B,p,S){var E=p[0],A=p[1];return B[0]=S[0]*E+S[3]*A+S[6],B[1]=S[1]*E+S[4]*A+S[7],B}},"U+yc":function(ge,R){function h(B,p,S,E,A){var k={};return Object.keys(E).forEach(function(M){k[M]=E[M]}),k.enumerable=!!k.enumerable,k.configurable=!!k.configurable,("value"in k||k.initializer)&&(k.writable=!0),k=S.slice().reverse().reduce(function(M,U){return U(B,p,M)||M},k),A&&k.initializer!==void 0&&(k.value=k.initializer?k.initializer.call(A):void 0,k.initializer=void 0),k.initializer===void 0&&(Object.defineProperty(B,p,k),k=null),k}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},UGzO:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.ColorWrap=void 0;var B=Object.assign||function(ne){for(var ie=1;ie<arguments.length;ie++){var re=arguments[ie];for(var J in re)Object.prototype.hasOwnProperty.call(re,J)&&(ne[J]=re[J])}return ne},p=function(){function ne(ie,re){for(var J=0;J<re.length;J++){var ce=re[J];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(ie,ce.key,ce)}}return function(ie,re,J){return re&&ne(ie.prototype,re),J&&ne(ie,J),ie}}(),S=h("q1tI"),E=V(S),A=h("sEfC"),k=V(A),M=h("p8yl"),U=V(M);function V(ne){return ne&&ne.__esModule?ne:{default:ne}}function $(ne,ie){if(!(ne instanceof ie))throw new TypeError("Cannot call a class as a function")}function W(ne,ie){if(!ne)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ie&&(typeof ie=="object"||typeof ie=="function")?ie:ne}function Y(ne,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ie);ne.prototype=Object.create(ie&&ie.prototype,{constructor:{value:ne,enumerable:!1,writable:!0,configurable:!0}}),ie&&(Object.setPrototypeOf?Object.setPrototypeOf(ne,ie):ne.__proto__=ie)}var ee=R.ColorWrap=function(ie){var re=function(J){Y(ce,J);function ce(G){$(this,ce);var Z=W(this,(ce.__proto__||Object.getPrototypeOf(ce)).call(this));return Z.handleChange=function(fe,se){var ve=U.default.simpleCheckForValidColor(fe);if(ve){var ae=U.default.toState(fe,fe.h||Z.state.oldHue);Z.setState(ae),Z.props.onChangeComplete&&Z.debounce(Z.props.onChangeComplete,ae,se),Z.props.onChange&&Z.props.onChange(ae,se)}},Z.handleSwatchHover=function(fe,se){var ve=U.default.simpleCheckForValidColor(fe);if(ve){var ae=U.default.toState(fe,fe.h||Z.state.oldHue);Z.setState(ae),Z.props.onSwatchHover&&Z.props.onSwatchHover(ae,se)}},Z.state=B({},U.default.toState(G.color,0)),Z.debounce=(0,k.default)(function(fe,se,ve){fe(se,ve)},100),Z}return p(ce,[{key:"componentWillReceiveProps",value:function(Z){this.setState(B({},U.default.toState(Z.color,this.state.oldHue)))}},{key:"render",value:function(){var Z={};return this.props.onSwatchHover&&(Z.onSwatchHover=this.handleSwatchHover),E.default.createElement(ie,B({},this.props,this.state,{onChange:this.handleChange},Z))}}]),ce}(S.PureComponent||S.Component);return re.propTypes=B({},ie.propTypes),re.defaultProps=B({},ie.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),re};R.default=ee},UTAp:function(ge,R,h){"use strict";ge.exports=h("yAXI")},Ucsi:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=Symbol.for("INJECTION");function p(M,U,V,$){function W(){return $&&!Reflect.hasMetadata(B,this,U)&&Reflect.defineMetadata(B,V(),this,U),Reflect.hasMetadata(B,this,U)?Reflect.getMetadata(B,this,U):V()}function Y(ee){Reflect.defineMetadata(B,ee,this,U)}Object.defineProperty(M,U,{configurable:!0,enumerable:!0,get:W,set:Y})}function S(M,U){return function(V){return function($,W){var Y=function(){return M.get(V)};p($,W,Y,U)}}}R.makePropertyInjectDecorator=S;function E(M,U){return function(V,$){return function(W,Y){var ee=function(){return M.getNamed(V,$)};p(W,Y,ee,U)}}}R.makePropertyInjectNamedDecorator=E;function A(M,U){return function(V,$,W){return function(Y,ee){var ne=function(){return M.getTagged(V,$,W)};p(Y,ee,ne,U)}}}R.makePropertyInjectTaggedDecorator=A;function k(M,U){return function(V){return function($,W){var Y=function(){return M.getAll(V)};p($,W,Y,U)}}}R.makePropertyMultiInjectDecorator=k},"V/xP":function(ge,R,h){"use strict";var B;(function(p){p.Normal="normal",p.PostProcessing="post-processing"})(B||(B={}))},VA6q:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="RedoOutlined";var M=R.a=p.forwardRef(k)},VIWh:function(ge,R,h){"use strict";h.d(R,"a",function(){return B});function B(p,S,E,A,k){var M={};return Object.keys(A).forEach(function(U){M[U]=A[U]}),M.enumerable=!!M.enumerable,M.configurable=!!M.configurable,("value"in M||M.initializer)&&(M.writable=!0),M=E.slice().reverse().reduce(function(U,V){return V(p,S,U)||U},M),k&&M.initializer!==void 0&&(M.value=M.initializer?M.initializer.call(k):void 0,M.initializer=void 0),M.initializer===void 0&&(Object.defineProperty(p,S,M),M=null),M}},VVms:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=R.calculateChange=function(S,E,A){S.preventDefault();var k=A.getBoundingClientRect(),M=k.width,U=k.height,V=typeof S.pageX=="number"?S.pageX:S.touches[0].pageX,$=typeof S.pageY=="number"?S.pageY:S.touches[0].pageY,W=V-(A.getBoundingClientRect().left+window.pageXOffset),Y=$-(A.getBoundingClientRect().top+window.pageYOffset);W<0?W=0:W>M?W=M:Y<0?Y=0:Y>U&&(Y=U);var ee=W*100/M,ne=-(Y*100/U)+100;return{h:E.h,s:ee,v:ne,a:E.a,source:"rgb"}}},"Vg/k":function(ge,R){(function(h){ge.exports=function(){var B={46:function(A){A.exports=function(k){if(!k.webpackPolyfill){var M=Object.create(k);M.children||(M.children=[]),Object.defineProperty(M,"loaded",{enumerable:!0,get:function(){return M.l}}),Object.defineProperty(M,"id",{enumerable:!0,get:function(){return M.i}}),Object.defineProperty(M,"exports",{enumerable:!0}),M.webpackPolyfill=1}return M}}},p={};function S(E){if(p[E])return p[E].exports;var A=p[E]={exports:{}},k=!0;try{B[E](A,A.exports,S),k=!1}finally{k&&delete p[E]}return A.exports}return S.ab=h+"/",S(46)}()}).call(this,"/")},W8MJ:function(ge,R,h){var B=h("o5UB");function p(E,A){for(var k=0;k<A.length;k++){var M=A[k];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(E,B(M.key),M)}}function S(E,A,k){return A&&p(E.prototype,A),k&&p(E,k),Object.defineProperty(E,"prototype",{writable:!1}),E}ge.exports=S,ge.exports.__esModule=!0,ge.exports.default=ge.exports},WFjJ:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.CustomPicker=R.TwitterPicker=R.SwatchesPicker=R.SliderPicker=R.SketchPicker=R.PhotoshopPicker=R.MaterialPicker=R.HuePicker=R.GithubPicker=R.CompactPicker=R.ChromePicker=R.default=R.CirclePicker=R.BlockPicker=R.AlphaPicker=void 0;var B=h("qo7Q");Object.defineProperty(R,"AlphaPicker",{enumerable:!0,get:function(){return re(B).default}});var p=h("rJ8t");Object.defineProperty(R,"BlockPicker",{enumerable:!0,get:function(){return re(p).default}});var S=h("7dW+");Object.defineProperty(R,"CirclePicker",{enumerable:!0,get:function(){return re(S).default}});var E=h("JI00");Object.defineProperty(R,"ChromePicker",{enumerable:!0,get:function(){return re(E).default}});var A=h("oPLb");Object.defineProperty(R,"CompactPicker",{enumerable:!0,get:function(){return re(A).default}});var k=h("Lx/H");Object.defineProperty(R,"GithubPicker",{enumerable:!0,get:function(){return re(k).default}});var M=h("wkyg");Object.defineProperty(R,"HuePicker",{enumerable:!0,get:function(){return re(M).default}});var U=h("Jxpl");Object.defineProperty(R,"MaterialPicker",{enumerable:!0,get:function(){return re(U).default}});var V=h("FbP/");Object.defineProperty(R,"PhotoshopPicker",{enumerable:!0,get:function(){return re(V).default}});var $=h("HTXX");Object.defineProperty(R,"SketchPicker",{enumerable:!0,get:function(){return re($).default}});var W=h("Pzom");Object.defineProperty(R,"SliderPicker",{enumerable:!0,get:function(){return re(W).default}});var Y=h("t8r4");Object.defineProperty(R,"SwatchesPicker",{enumerable:!0,get:function(){return re(Y).default}});var ee=h("nW7/");Object.defineProperty(R,"TwitterPicker",{enumerable:!0,get:function(){return re(ee).default}});var ne=h("UGzO");Object.defineProperty(R,"CustomPicker",{enumerable:!0,get:function(){return re(ne).default}});var ie=re(E);function re(J){return J&&J.__esModule?J:{default:J}}R.default=ie.default},WOAq:function(ge,R,h){"use strict";(function(B){var p=h("Ju5/"),S=h("L3Qv"),E=typeof exports=="object"&&exports&&!exports.nodeType&&exports,A=E&&typeof B=="object"&&B&&!B.nodeType&&B,k=A&&A.exports===E,M=k?p.a.Buffer:void 0,U=M?M.isBuffer:void 0,V=U||S.a;R.a=V}).call(this,h("Vg/k")(ge))},WZrV:function(ge,R,h){var B=h("3z9K");ge.exports=p;function p(){this._arr=[],this._keyIndices={}}p.prototype.size=function(){return this._arr.length},p.prototype.keys=function(){return this._arr.map(function(S){return S.key})},p.prototype.has=function(S){return B.has(this._keyIndices,S)},p.prototype.priority=function(S){var E=this._keyIndices[S];if(E!==void 0)return this._arr[E].priority},p.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},p.prototype.add=function(S,E){var A=this._keyIndices;if(S=String(S),!B.has(A,S)){var k=this._arr,M=k.length;return A[S]=M,k.push({key:S,priority:E}),this._decrease(M),!0}return!1},p.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var S=this._arr.pop();return delete this._keyIndices[S.key],this._heapify(0),S.key},p.prototype.decrease=function(S,E){var A=this._keyIndices[S];if(E>this._arr[A].priority)throw new Error("New priority is greater than current priority. Key: "+S+" Old: "+this._arr[A].priority+" New: "+E);this._arr[A].priority=E,this._decrease(A)},p.prototype._heapify=function(S){var E=this._arr,A=2*S,k=A+1,M=S;A<E.length&&(M=E[A].priority<E[M].priority?A:M,k<E.length&&(M=E[k].priority<E[M].priority?k:M),M!==S&&(this._swap(S,M),this._heapify(M)))},p.prototype._decrease=function(S){for(var E=this._arr,A=E[S].priority,k;S!==0&&(k=S>>1,!(E[k].priority<A));)this._swap(S,k),S=k},p.prototype._swap=function(S,E){var A=this._arr,k=this._keyIndices,M=A[S],U=A[E];A[S]=U,A[E]=M,k[U.key]=S,k[M.key]=E}},WkPL:function(ge,R){function h(B,p){(p==null||p>B.length)&&(p=B.length);for(var S=0,E=new Array(p);S<p;S++)E[S]=B[S];return E}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},XkVO:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B;(function(Oe){Oe.TextureCompressionBC="texture-compression-bc"})(B=R.ExtensionName||(R.ExtensionName={}));var p;(function(Oe){Oe.ClampToEdge="clamp-to-edge",Oe.Repeat="repeat",Oe.MirrorRepeat="mirror-repeat"})(p=R.AddressMode||(R.AddressMode={}));var S;(function(Oe){Oe.UniformBuffer="uniform-buffer",Oe.StorageBuffer="storage-buffer",Oe.ReadonlyStorageBuffer="readonly-storage-buffer",Oe.Sampler="sampler",Oe.ComparisonSampler="comparison-sampler",Oe.SampledTexture="sampled-texture",Oe.ReadonlyStorageTexture="readonly-storage-texture",Oe.WriteonlyStorageTexture="writeonly-storage-texture"})(S=R.BindingType||(R.BindingType={}));var E;(function(Oe){Oe.Zero="zero",Oe.One="one",Oe.SrcColor="src-color",Oe.OneMinusSrcColor="one-minus-src-color",Oe.SrcAlpha="src-alpha",Oe.OneMinusSrcAlpha="one-minus-src-alpha",Oe.DstColor="dst-color",Oe.OneMinusDstColor="one-minus-dst-color",Oe.DstAlpha="dst-alpha",Oe.OneMinusDstAlpha="one-minus-dst-alpha",Oe.SrcAlphaSaturated="src-alpha-saturated",Oe.BlendColor="blend-color",Oe.OneMinusBlendColor="one-minus-blend-color"})(E=R.BlendFactor||(R.BlendFactor={}));var A;(function(Oe){Oe.Add="add",Oe.Subtract="subtract",Oe.ReverseSubtract="reverse-subtract",Oe.Min="min",Oe.Max="max"})(A=R.BlendOperation||(R.BlendOperation={}));var k;(function(Oe){Oe.Never="never",Oe.Less="less",Oe.Equal="equal",Oe.LessEqual="less-equal",Oe.Greater="greater",Oe.NotEqual="not-equal",Oe.GreaterEqual="greater-equal",Oe.Always="always"})(k=R.CompareFunction||(R.CompareFunction={}));var M;(function(Oe){Oe.None="none",Oe.Front="front",Oe.Back="back"})(M=R.CullMode||(R.CullMode={}));var U;(function(Oe){Oe.Nearest="nearest",Oe.Linear="linear"})(U=R.FilterMode||(R.FilterMode={}));var V;(function(Oe){Oe.CCW="ccw",Oe.CW="cw"})(V=R.FrontFace||(R.FrontFace={}));var $;(function(Oe){Oe.Uint16="uint16",Oe.Uint32="uint32"})($=R.IndexFormat||(R.IndexFormat={}));var W;(function(Oe){Oe.Vertex="vertex",Oe.Instance="instance"})(W=R.InputStepMode||(R.InputStepMode={}));var Y;(function(Oe){Oe.Load="load"})(Y=R.LoadOp||(R.LoadOp={}));var ee;(function(Oe){Oe.PointList="point-list",Oe.LineList="line-list",Oe.LineStrip="line-strip",Oe.TriangleList="triangle-list",Oe.TriangleStrip="triangle-strip"})(ee=R.PrimitiveTopology||(R.PrimitiveTopology={}));var ne;(function(Oe){Oe.Keep="keep",Oe.Zero="zero",Oe.Replace="replace",Oe.Invert="invert",Oe.IncrementClamp="increment-clamp",Oe.DecrementClamp="decrement-clamp",Oe.IncrementWrap="increment-wrap",Oe.DecrementWrap="decrement-wrap"})(ne=R.StencilOperation||(R.StencilOperation={}));var ie;(function(Oe){Oe.Store="store",Oe.Clear="clear"})(ie=R.StoreOp||(R.StoreOp={}));var re;(function(Oe){Oe.E1d="1d",Oe.E2d="2d",Oe.E3d="3d"})(re=R.TextureDimension||(R.TextureDimension={}));var J;(function(Oe){Oe.R8Unorm="r8unorm",Oe.R8Snorm="r8snorm",Oe.R8Uint="r8uint",Oe.R8Sint="r8sint",Oe.R16Uint="r16uint",Oe.R16Sint="r16sint",Oe.R16Float="r16float",Oe.RG8Unorm="rg8unorm",Oe.RG8Snorm="rg8snorm",Oe.RG8Uint="rg8uint",Oe.RG8Sint="rg8sint",Oe.R32Uint="r32uint",Oe.R32Sint="r32sint",Oe.R32Float="r32float",Oe.RG16Uint="rg16uint",Oe.RG16Sint="rg16sint",Oe.RG16Float="rg16float",Oe.RGBA8Unorm="rgba8unorm",Oe.RGBA8UnormSRGB="rgba8unorm-srgb",Oe.RGBA8Snorm="rgba8snorm",Oe.RGBA8Uint="rgba8uint",Oe.RGBA8Sint="rgba8sint",Oe.BGRA8Unorm="bgra8unorm",Oe.BGRA8UnormSRGB="bgra8unorm-srgb",Oe.RGB10A2Unorm="rgb10a2unorm",Oe.RG11B10Float="rg11b10float",Oe.RG32Uint="rg32uint",Oe.RG32Sint="rg32sint",Oe.RG32Float="rg32float",Oe.RGBA16Uint="rgba16uint",Oe.RGBA16Sint="rgba16sint",Oe.RGBA16Float="rgba16float",Oe.RGBA32Uint="rgba32uint",Oe.RGBA32Sint="rgba32sint",Oe.RGBA32Float="rgba32float",Oe.Depth32Float="depth32float",Oe.Depth24Plus="depth24plus",Oe.Depth24PlusStencil8="depth24plus-stencil8"})(J=R.TextureFormat||(R.TextureFormat={}));var ce;(function(Oe){Oe.Float="float",Oe.Sint="sint",Oe.Uint="uint"})(ce=R.TextureComponentType||(R.TextureComponentType={}));var G;(function(Oe){Oe.E1d="1d",Oe.E2d="2d",Oe.E2dArray="2d-array",Oe.Cube="cube",Oe.CubeArray="cube-array",Oe.E3d="3d"})(G=R.TextureViewDimension||(R.TextureViewDimension={}));var Z;(function(Oe){Oe.Uchar2="uchar2",Oe.Uchar4="uchar4",Oe.Char2="char2",Oe.Char4="char4",Oe.Uchar2Norm="uchar2norm",Oe.Uchar4Norm="uchar4norm",Oe.Char2Norm="char2norm",Oe.Char4Norm="char4norm",Oe.Ushort2="ushort2",Oe.Ushort4="ushort4",Oe.Short2="short2",Oe.Short4="short4",Oe.Ushort2Norm="ushort2norm",Oe.Ushort4Norm="ushort4norm",Oe.Short2Norm="short2norm",Oe.Short4Norm="short4norm",Oe.Half2="half2",Oe.Half4="half4",Oe.Float="float",Oe.Float2="float2",Oe.Float3="float3",Oe.Float4="float4",Oe.Uint="uint",Oe.Uint2="uint2",Oe.Uint3="uint3",Oe.Uint4="uint4",Oe.Int="int",Oe.Int2="int2",Oe.Int3="int3",Oe.Int4="int4"})(Z=R.VertexFormat||(R.VertexFormat={}));var fe;(function(Oe){Oe.All="all",Oe.StencilOnly="stencil-only",Oe.DepthOnly="depth-only"})(fe=R.TextureAspect||(R.TextureAspect={}));var se;(function(Oe){Oe.Error="error",Oe.Warning="warning",Oe.Info="info"})(se=R.CompilationMessageType||(R.CompilationMessageType={}));var ve;(function(Oe){Oe.Occlusion="occlusion"})(ve=R.QueryType||(R.QueryType={}));var ae;(function(Oe){Oe[Oe.MapRead=1]="MapRead",Oe[Oe.MapWrite=2]="MapWrite",Oe[Oe.CopySrc=4]="CopySrc",Oe[Oe.CopyDst=8]="CopyDst",Oe[Oe.Index=16]="Index",Oe[Oe.Vertex=32]="Vertex",Oe[Oe.Uniform=64]="Uniform",Oe[Oe.Storage=128]="Storage",Oe[Oe.Indirect=256]="Indirect",Oe[Oe.QueryResolve=512]="QueryResolve"})(ae=R.BufferUsage||(R.BufferUsage={}));var j;(function(Oe){Oe[Oe.Red=1]="Red",Oe[Oe.Green=2]="Green",Oe[Oe.Blue=4]="Blue",Oe[Oe.Alpha=8]="Alpha",Oe[Oe.All=15]="All"})(j=R.ColorWrite||(R.ColorWrite={}));var de;(function(Oe){Oe[Oe.Vertex=1]="Vertex",Oe[Oe.Fragment=2]="Fragment",Oe[Oe.Compute=4]="Compute"})(de=R.ShaderStage||(R.ShaderStage={}));var ke;(function(Oe){Oe[Oe.CopySrc=1]="CopySrc",Oe[Oe.CopyDst=2]="CopyDst",Oe[Oe.Sampled=4]="Sampled",Oe[Oe.Storage=8]="Storage",Oe[Oe.OutputAttachment=16]="OutputAttachment"})(ke=R.TextureUsage||(R.TextureUsage={}));var he;(function(Oe){Oe[Oe.Read=1]="Read",Oe[Oe.Write=2]="Write"})(he=R.MapMode||(R.MapMode={}))},XqMk:function(ge,R,h){"use strict";(function(B){var p=typeof B=="object"&&B&&B.Object===Object&&B;R.a=p}).call(this,h("IyRk"))},"Xt/L":function(ge,R){function h(B,p,S){for(var E=-1,A=B==null?0:B.length;++E<A;)if(S(p,B[E]))return!0;return!1}ge.exports=h},Y06g:function(ge,R,h){"use strict";h.r(R),h.d(R,"Dag",function(){return al});var B={};h.r(B),h.d(B,"extract",function(){return Lt}),h.d(B,"parse",function(){return Gt}),h.d(B,"stringify",function(){return $e}),h.d(B,"parseUrl",function(){return jt}),h.d(B,"stringifyUrl",function(){return Be}),h.d(B,"pick",function(){return pe}),h.d(B,"exclude",function(){return un});var p=h("qLMh"),S=h("9og8"),E=h("q1tI"),A=h.n(E),k=h("9niD"),M=h("Ty5D"),U=h("jrin"),V=h("tJVT"),$=h("rAM+"),W=h("k1fw"),Y=h("oBTY"),ee="%[a-f0-9]{2}",ne=new RegExp("("+ee+")|([^%]+?)","gi"),ie=new RegExp("("+ee+")+","gi");function re(Et,mt){try{return[decodeURIComponent(Et.join(""))]}catch(_t){}if(Et.length===1)return Et;mt=mt||1;var wt=Et.slice(0,mt),$t=Et.slice(mt);return Array.prototype.concat.call([],re(wt),re($t))}function J(Et){try{return decodeURIComponent(Et)}catch($t){for(var mt=Et.match(ne)||[],wt=1;wt<mt.length;wt++)Et=re(mt,wt).join(""),mt=Et.match(ne)||[];return Et}}function ce(Et){for(var mt={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},wt=ie.exec(Et);wt;){try{mt[wt[0]]=decodeURIComponent(wt[0])}catch(Ar){var $t=J(wt[0]);$t!==wt[0]&&(mt[wt[0]]=$t)}wt=ie.exec(Et)}mt["%C2"]="\uFFFD";for(var _t=Object.keys(mt),xn=0,Ln=_t;xn<Ln.length;xn++){var Yn=Ln[xn];Et=Et.replace(new RegExp(Yn,"g"),mt[Yn])}return Et}function G(Et){if(typeof Et!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof Et+"`");try{return decodeURIComponent(Et)}catch(mt){return ce(Et)}}function Z(Et,mt){if(!(typeof Et=="string"&&typeof mt=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(Et===""||mt==="")return[];var wt=Et.indexOf(mt);return wt===-1?[]:[Et.slice(0,wt),Et.slice(wt+mt.length)]}function fe(Et,mt){var wt={};if(Array.isArray(mt)){var $t=Object($.a)(mt),_t;try{for($t.s();!(_t=$t.n()).done;){var xn=_t.value,Ln=Object.getOwnPropertyDescriptor(Et,xn);Ln!=null&&Ln.enumerable&&Object.defineProperty(wt,xn,Ln)}}catch(Rr){$t.e(Rr)}finally{$t.f()}}else{var Yn=Object($.a)(Reflect.ownKeys(Et)),Ar;try{for(Yn.s();!(Ar=Yn.n()).done;){var er=Ar.value,Mr=Object.getOwnPropertyDescriptor(Et,er);if(Mr.enumerable){var rr=Et[er];mt(er,rr,Et)&&Object.defineProperty(wt,er,Mr)}}}catch(Rr){Yn.e(Rr)}finally{Yn.f()}}return wt}function se(Et,mt){if(Array.isArray(mt)){var wt=new Set(mt);return fe(Et,function($t){return!wt.has($t)})}return fe(Et,function($t,_t,xn){return!mt($t,_t,xn)})}var ve=function(mt){return mt==null},ae=function(mt){return encodeURIComponent(mt).replace(/[!'()*]/g,function(wt){return"%".concat(wt.charCodeAt(0).toString(16).toUpperCase())})},j=Symbol("encodeFragmentIdentifier");function de(Et){switch(Et.arrayFormat){case"index":return function(wt){return function($t,_t){var xn=$t.length;return _t===void 0||Et.skipNull&&_t===null||Et.skipEmptyString&&_t===""?$t:_t===null?[].concat(Object(Y.a)($t),[[Oe(wt,Et),"[",xn,"]"].join("")]):[].concat(Object(Y.a)($t),[[Oe(wt,Et),"[",Oe(xn,Et),"]=",Oe(_t,Et)].join("")])}};case"bracket":return function(wt){return function($t,_t){return _t===void 0||Et.skipNull&&_t===null||Et.skipEmptyString&&_t===""?$t:_t===null?[].concat(Object(Y.a)($t),[[Oe(wt,Et),"[]"].join("")]):[].concat(Object(Y.a)($t),[[Oe(wt,Et),"[]=",Oe(_t,Et)].join("")])}};case"colon-list-separator":return function(wt){return function($t,_t){return _t===void 0||Et.skipNull&&_t===null||Et.skipEmptyString&&_t===""?$t:_t===null?[].concat(Object(Y.a)($t),[[Oe(wt,Et),":list="].join("")]):[].concat(Object(Y.a)($t),[[Oe(wt,Et),":list=",Oe(_t,Et)].join("")])}};case"comma":case"separator":case"bracket-separator":{var mt=Et.arrayFormat==="bracket-separator"?"[]=":"=";return function(wt){return function($t,_t){return _t===void 0||Et.skipNull&&_t===null||Et.skipEmptyString&&_t===""?$t:(_t=_t===null?"":_t,$t.length===0?[[Oe(wt,Et),mt,Oe(_t,Et)].join("")]:[[$t,Oe(_t,Et)].join(Et.arrayFormatSeparator)])}}}default:return function(wt){return function($t,_t){return _t===void 0||Et.skipNull&&_t===null||Et.skipEmptyString&&_t===""?$t:_t===null?[].concat(Object(Y.a)($t),[Oe(wt,Et)]):[].concat(Object(Y.a)($t),[[Oe(wt,Et),"=",Oe(_t,Et)].join("")])}}}}function ke(Et){var mt;switch(Et.arrayFormat){case"index":return function(wt,$t,_t){if(mt=/\[(\d*)]$/.exec(wt),wt=wt.replace(/\[\d*]$/,""),!mt){_t[wt]=$t;return}_t[wt]===void 0&&(_t[wt]={}),_t[wt][mt[1]]=$t};case"bracket":return function(wt,$t,_t){if(mt=/(\[])$/.exec(wt),wt=wt.replace(/\[]$/,""),!mt){_t[wt]=$t;return}if(_t[wt]===void 0){_t[wt]=[$t];return}_t[wt]=[].concat(Object(Y.a)(_t[wt]),[$t])};case"colon-list-separator":return function(wt,$t,_t){if(mt=/(:list)$/.exec(wt),wt=wt.replace(/:list$/,""),!mt){_t[wt]=$t;return}if(_t[wt]===void 0){_t[wt]=[$t];return}_t[wt]=[].concat(Object(Y.a)(_t[wt]),[$t])};case"comma":case"separator":return function(wt,$t,_t){var xn=typeof $t=="string"&&$t.includes(Et.arrayFormatSeparator),Ln=typeof $t=="string"&&!xn&&We($t,Et).includes(Et.arrayFormatSeparator);$t=Ln?We($t,Et):$t;var Yn=xn||Ln?$t.split(Et.arrayFormatSeparator).map(function(Ar){return We(Ar,Et)}):$t===null?$t:We($t,Et);_t[wt]=Yn};case"bracket-separator":return function(wt,$t,_t){var xn=/(\[])$/.test(wt);if(wt=wt.replace(/\[]$/,""),!xn){_t[wt]=$t&&We($t,Et);return}var Ln=$t===null?[]:$t.split(Et.arrayFormatSeparator).map(function(Yn){return We(Yn,Et)});if(_t[wt]===void 0){_t[wt]=Ln;return}_t[wt]=[].concat(Object(Y.a)(_t[wt]),Object(Y.a)(Ln))};default:return function(wt,$t,_t){if(_t[wt]===void 0){_t[wt]=$t;return}_t[wt]=[].concat(Object(Y.a)([_t[wt]].flat()),[$t])}}}function he(Et){if(typeof Et!="string"||Et.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Oe(Et,mt){return mt.encode?mt.strict?ae(Et):encodeURIComponent(Et):Et}function We(Et,mt){return mt.decode?G(Et):Et}function D(Et){return Array.isArray(Et)?Et.sort():typeof Et=="object"?D(Object.keys(Et)).sort(function(mt,wt){return Number(mt)-Number(wt)}).map(function(mt){return Et[mt]}):Et}function je(Et){var mt=Et.indexOf("#");return mt!==-1&&(Et=Et.slice(0,mt)),Et}function pt(Et){var mt="",wt=Et.indexOf("#");return wt!==-1&&(mt=Et.slice(wt)),mt}function nt(Et,mt){return mt.parseNumbers&&!Number.isNaN(Number(Et))&&typeof Et=="string"&&Et.trim()!==""?Et=Number(Et):mt.parseBooleans&&Et!==null&&(Et.toLowerCase()==="true"||Et.toLowerCase()==="false")&&(Et=Et.toLowerCase()==="true"),Et}function Lt(Et){Et=je(Et);var mt=Et.indexOf("?");return mt===-1?"":Et.slice(mt+1)}function Gt(Et,mt){mt=Object(W.a)({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},mt),he(mt.arrayFormatSeparator);var wt=ke(mt),$t=Object.create(null);if(typeof Et!="string"||(Et=Et.trim().replace(/^[?#&]/,""),!Et))return $t;var _t=Object($.a)(Et.split("&")),xn;try{for(_t.s();!(xn=_t.n()).done;){var Ln=xn.value;if(Ln!==""){var Yn=mt.decode?Ln.replace(/\+/g," "):Ln,Ar=Z(Yn,"="),er=Object(V.a)(Ar,2),Mr=er[0],rr=er[1];Mr===void 0&&(Mr=Yn),rr=rr===void 0?null:["comma","separator","bracket-separator"].includes(mt.arrayFormat)?rr:We(rr,mt),wt(We(Mr,mt),rr,$t)}}}catch(Ge){_t.e(Ge)}finally{_t.f()}for(var Rr=0,Dr=Object.entries($t);Rr<Dr.length;Rr++){var qr=Dr[Rr],qa=Object(V.a)(qr,2),Gr=qa[0],K=qa[1];if(typeof K=="object"&&K!==null)for(var P=0,H=Object.entries(K);P<H.length;P++){var X=H[P],le=Object(V.a)(X,2),be=le[0],xe=le[1];K[be]=nt(xe,mt)}else $t[Gr]=nt(K,mt)}return mt.sort===!1?$t:(mt.sort===!0?Object.keys($t).sort():Object.keys($t).sort(mt.sort)).reduce(function(Ge,it){var bt=$t[it];return Boolean(bt)&&typeof bt=="object"&&!Array.isArray(bt)?Ge[it]=D(bt):Ge[it]=bt,Ge},Object.create(null))}function $e(Et,mt){if(!Et)return"";mt=Object(W.a)({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},mt),he(mt.arrayFormatSeparator);for(var wt=function(Dr){return mt.skipNull&&ve(Et[Dr])||mt.skipEmptyString&&Et[Dr]===""},$t=de(mt),_t={},xn=0,Ln=Object.entries(Et);xn<Ln.length;xn++){var Yn=Ln[xn],Ar=Object(V.a)(Yn,2),er=Ar[0],Mr=Ar[1];wt(er)||(_t[er]=Mr)}var rr=Object.keys(_t);return mt.sort!==!1&&rr.sort(mt.sort),rr.map(function(Rr){var Dr=Et[Rr];return Dr===void 0?"":Dr===null?Oe(Rr,mt):Array.isArray(Dr)?Dr.length===0&&mt.arrayFormat==="bracket-separator"?Oe(Rr,mt)+"[]":Dr.reduce($t(Rr),[]).join("&"):Oe(Rr,mt)+"="+Oe(Dr,mt)}).filter(function(Rr){return Rr.length>0}).join("&")}function jt(Et,mt){var wt,$t,_t;mt=Object(W.a)({decode:!0},mt);var xn=Z(Et,"#"),Ln=Object(V.a)(xn,2),Yn=Ln[0],Ar=Ln[1];return Yn===void 0&&(Yn=Et),Object(W.a)({url:(wt=($t=Yn)===null||$t===void 0||(_t=$t.split("?"))===null||_t===void 0?void 0:_t[0])!==null&&wt!==void 0?wt:"",query:Gt(Lt(Et),mt)},mt&&mt.parseFragmentIdentifier&&Ar?{fragmentIdentifier:We(Ar,mt)}:{})}function Be(Et,mt){mt=Object(W.a)(Object(U.a)({encode:!0,strict:!0},j,!0),mt);var wt=je(Et.url).split("?")[0]||"",$t=Lt(Et.url),_t=Object(W.a)(Object(W.a)({},Gt($t,{sort:!1})),Et.query),xn=$e(_t,mt);xn&&(xn="?".concat(xn));var Ln=pt(Et.url);if(Et.fragmentIdentifier){var Yn=new URL(wt);Yn.hash=Et.fragmentIdentifier,Ln=mt[j]?Yn.hash:"#".concat(Et.fragmentIdentifier)}return"".concat(wt).concat(xn).concat(Ln)}function pe(Et,mt,wt){wt=Object(W.a)(Object(U.a)({parseFragmentIdentifier:!0},j,!1),wt);var $t=jt(Et,wt),_t=$t.url,xn=$t.query,Ln=$t.fragmentIdentifier;return Be({url:_t,query:fe(xn,mt),fragmentIdentifier:Ln},wt)}function un(Et,mt,wt){var $t=Array.isArray(mt)?function(_t){return!mt.includes(_t)}:function(_t,xn){return!mt(_t,xn)};return pe(Et,$t,wt)}var ln=B,Fn="DND_NDOE",Ft="GROUP_NODE_RENDER_ID",Pn=180,lr=36,hn=h("VA6q"),On=h("2BaD"),jn=h("Ue1A"),Dn=h("RCxd"),ft=h("+YFz"),Ut=h("26re"),ct=h("r3hA"),Ct=h("nKUr"),kt={fontSize:"16px",color:"#3057e3"},yt=function(mt){if(mt.hide)return null;switch(mt.status){case k.t.StatusEnum.PROCESSING:return Object(Ct.jsx)(hn.a,{spin:!0,style:{color:"#c1cdf7",fontSize:"16px"}});case k.t.StatusEnum.ERROR:return Object(Ct.jsx)(On.a,{style:{color:"#ff4d4f",fontSize:"16px"}});case k.t.StatusEnum.SUCCESS:return Object(Ct.jsx)(jn.a,{style:{color:"#39ca74cc",fontSize:"16px"}});case k.t.StatusEnum.WARNING:return Object(Ct.jsx)(Dn.a,{style:{color:"#faad14",fontSize:"16px"}});case k.t.StatusEnum.DEFAULT:return Object(Ct.jsx)(ft.a,{style:{color:"#d9d9d9",fontSize:"16px"}});default:return null}},tt=function(mt){return Object(Ct.jsxs)("div",{className:"xflow-algo-node ".concat(mt.isNodeTreePanel?"panel-node":""),children:[Object(Ct.jsx)("span",{className:"icon",children:Object(Ct.jsx)(Ut.a,{style:kt})}),Object(Ct.jsx)("span",{className:"label",children:mt.data.label}),Object(Ct.jsx)("span",{className:"status",children:Object(Ct.jsx)(yt,{status:mt.data&&mt.data.status,hide:mt.isNodeTreePanel})})]})},I=h("xGfz"),Mn=h("gUdW"),dt=h("OY0T"),vt=function(mt){var wt=mt.cell,$t=Object(k.J)(),_t=mt.data.isCollapsed||!1,xn=function(){$t.executeCommand(k.z.COLLAPSE_GROUP.id,{nodeId:wt.id,isCollapsed:!1,collapsedSize:{width:200,height:40}})},Ln=function(){$t.executeCommand(k.z.COLLAPSE_GROUP.id,{nodeId:wt.id,isCollapsed:!0,collapsedSize:{width:200,height:40},gap:3})};return Object(Ct.jsx)("div",{className:"xflow-group-node",children:Object(Ct.jsxs)("div",{className:"xflow-group-header",children:[Object(Ct.jsx)("div",{className:"header-left",children:mt.data.label}),Object(Ct.jsxs)("div",{className:"header-right",children:[_t&&Object(Ct.jsx)(I.a,{onClick:xn}),!_t&&Object(Ct.jsx)(Mn.a,{onClick:Ln})]})]})})},Bt=Object(k.E)(function(Et,mt){var wt=mt.getValue();console.log("get main props",wt),Et.setRegisterHook(function($t){var _t=[$t.reactNodeRender.registerHook({name:"add react node",handler:function(){var Ln=Object(S.a)(Object(p.a)().mark(function Ar(er){return Object(p.a)().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:er.set(Fn,tt),er.set(Ft,vt);case 2:case"end":return rr.stop()}},Ar)}));function Yn(Ar){return Ln.apply(this,arguments)}return Yn}()}),$t.graphOptions.registerHook({name:"custom-x6-options",after:"dag-extension-x6-options",handler:function(){var Ln=Object(S.a)(Object(p.a)().mark(function Ar(er){return Object(p.a)().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:er.grid=!1,er.keyboard={enabled:!0};case 2:case"end":return rr.stop()}},Ar)}));function Yn(Ar){return Ln.apply(this,arguments)}return Yn}()}),$t.x6Events.registerHook({name:"add",handler:function(){var Ln=Object(S.a)(Object(p.a)().mark(function Ar(er){return Object(p.a)().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:er.push({eventName:"node:moved",callback:function(Dr,qr){var qa=Dr.node;qr.executeCommand(k.A.MOVE_NODE.id,{id:qa.id,position:qa.getPosition()})}});case 1:case"end":return rr.stop()}},Ar)}));function Yn(Ar){return Ln.apply(this,arguments)}return Yn}()})],xn=new k.i;return xn.pushAll(_t),xn})}),me=h("miYZ"),ue=h("tsqr"),Re=h("Dp36"),Rt;(function(Et){var mt=Et.NODE_COMMON_PROPS={renderKey:Fn,width:Pn,height:lr},wt=Et.queryGraphMeta=function(){var Gr=Object(S.a)(Object(p.a)().mark(function K(P){var H,X,le,be;return Object(p.a)().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return console.log("queryGraphMeta",P),H={},X=[],Ge.next=4,Object(Re.a)("/aio/experiment/get",{id:P.meta.flowId});case 4:return le=Ge.sent,le!=null&&le.success?H=le.data:ue.default.error("\u83B7\u53D6\u753B\u5E03\u8BE6\u60C5\u5931\u8D25\uFF01"),Ge.next=8,Object(Re.a)("/aio/dag/listOpGroups");case 8:return be=Ge.sent,be!=null&&be.success?X=be.data:ue.default.error("\u83B7\u53D6\u7B97\u6CD5\u7EC4\u4EF6\u5931\u8D25\uFF01"),Ge.next=12,Promise.all([le,be]);case 12:return Ge.abrupt("return",Object(W.a)(Object(W.a)({},P),{},{flowId:P.meta.flowId,experiment:H,opGroups:X}));case 13:case"end":return Ge.stop()}},K)}));return function(K){return Gr.apply(this,arguments)}}(),$t=Et.loadGraphData=function(){var Gr=Object(S.a)(Object(p.a)().mark(function K(P){var H,X,le,be,xe,Ge;return Object(p.a)().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return console.log("loadGraphData",P),H=(P==null?void 0:P.experiment)||{},X=H.nodeDag,le=X===void 0?{}:X,be=JSON.parse(le),xe=be.nodes,Ge=be.edges,bt.abrupt("return",{nodes:xe,edges:Ge});case 6:case"end":return bt.stop()}},K)}));return function(K){return Gr.apply(this,arguments)}}(),_t=Et.saveGraphData=function(){var Gr=Object(S.a)(Object(p.a)().mark(function K(P,H){var X,le;return Object(p.a)().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return console.log("saveGraphData",P,H),X={id:P.flowId,nodeDag:JSON.stringify(H)},xe.next=4,Object(Re.b)("/aio/experiment/editDetail",X);case 4:return le=xe.sent,le!=null&&le.success&&ue.default.success("\u4FDD\u5B58\u6210\u529F\uFF01"),xe.abrupt("return",{success:!0,data:H});case 7:case"end":return xe.stop()}},K)}));return function(K,P){return Gr.apply(this,arguments)}}(),xn=Et.deployDagService=function(){var Gr=Object(S.a)(Object(p.a)().mark(function K(P,H){return Object(p.a)().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return console.log("deployService api",P,H),le.abrupt("return",{success:!0,data:H});case 2:case"end":return le.stop()}},K)}));return function(K,P){return Gr.apply(this,arguments)}}(),Ln=Et.addNode=function(){var Gr=Object(S.a)(Object(p.a)().mark(function K(P){var H,X,le,be,xe,Ge,it,bt,bn,_n,Or,Cn,ar;return Object(p.a)().wrap(function(Xr){for(;;)switch(Xr.prev=Xr.next){case 0:console.info("addNode service running, add node:",P),H=P.nodeConfig.operator,X=JSON.parse(H.inputParam),le=JSON.parse(H.outputParam),be=[];for(xe in X)be.push({type:k.s.AnchorType.INPUT,group:k.s.AnchorGroup.TOP,tooltip:X[xe].name+" ("+X[xe].type+")"});for(Ge in le)be.push({type:k.s.AnchorType.OUTPUT,group:k.s.AnchorGroup.BOTTOM,tooltip:le[Ge].name+" ("+le[Ge].type+")"});return it=P.nodeConfig,bt=it.id,bn=it.ports,_n=bn===void 0?be:bn,Or=it.groupChildren,Cn=bt||Object(k.K)(),ar=Object(W.a)(Object(W.a)(Object(W.a)({},mt),P.nodeConfig),{},{id:Cn,ports:_n.map(function(Fi){return Object(W.a)(Object(W.a)({},Fi),{},{id:Object(k.K)()})})}),Or&&Or.length&&(ar.ports=[]),Xr.abrupt("return",ar);case 12:case"end":return Xr.stop()}},K)}));return function(K){return Gr.apply(this,arguments)}}(),Yn=Et.renameNode=function(){var Gr=Object(S.a)(Object(p.a)().mark(function K(P,H,X){return Object(p.a)().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return console.log("rename node",H,P,X),be.abrupt("return",{err:null,nodeName:P});case 2:case"end":return be.stop()}},K)}));return function(K,P,H){return Gr.apply(this,arguments)}}(),Ar=Et.delNode=function(){var Gr=Object(S.a)(Object(p.a)().mark(function K(P){return Object(p.a)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return console.info("delNode service running, del node:",P.nodeConfig.id),X.abrupt("return",!0);case 2:case"end":return X.stop()}},K)}));return function(K){return Gr.apply(this,arguments)}}(),er=Et.addEdge=function(){var Gr=Object(S.a)(Object(p.a)().mark(function K(P){var H;return Object(p.a)().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return console.info("addEdge service running, add edge:",P),H=P.edgeConfig,le.abrupt("return",Object(W.a)(Object(W.a)({},H),{},{id:Object(k.K)()}));case 3:case"end":return le.stop()}},K)}));return function(K){return Gr.apply(this,arguments)}}(),Mr=Et.delEdge=function(){var Gr=Object(S.a)(Object(p.a)().mark(function K(P){return Object(p.a)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return console.info("delEdge service running, del edge:",P),X.abrupt("return",!0);case 2:case"end":return X.stop()}},K)}));return function(K){return Gr.apply(this,arguments)}}(),rr=0,Rr={},Dr=k.t.StatusEnum.DEFAULT,qr=Et.graphStatusService=Object(S.a)(Object(p.a)().mark(function Gr(){return Object(p.a)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return rr<4?(Rr["node".concat(rr)]={status:k.t.StatusEnum.SUCCESS},Rr["node".concat(rr+1)]={status:k.t.StatusEnum.PROCESSING},rr+=1,Dr=k.t.StatusEnum.PROCESSING):(rr=0,Rr.node4={status:k.t.StatusEnum.SUCCESS},Dr=k.t.StatusEnum.SUCCESS),P.abrupt("return",{graphStatus:Dr,statusMap:Rr});case 2:case"end":return P.stop()}},Gr)})),qa=Et.stopGraphStatusService=Object(S.a)(Object(p.a)().mark(function Gr(){return Object(p.a)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return Object.entries(Rr).forEach(function(H){var X=Object(V.a)(H,2),le=X[1],be=le,xe=be.status;xe===k.t.StatusEnum.PROCESSING&&(le.status=k.t.StatusEnum.ERROR)}),P.abrupt("return",{graphStatus:k.t.StatusEnum.ERROR,statusMap:Rr});case 2:case"end":return P.stop()}},Gr)}))})(Rt||(Rt={}));var Kt=h("dO6L"),Bn=h("fWQN"),Nr=h("mtLc"),Rn=h("VIWh"),Cr=h("iceA"),tr;(function(Et){var mt="\u8282\u70B9\u64CD\u4F5C",wt=Et.TEST_ASYNC_CMD={id:"xflow:async-cmd",label:"\u5F02\u6B65\u8BF7\u6C42",category:mt},$t=Et.SHOW_RENAME_MODAL={id:"xflow:rename-node-modal",label:"\u6253\u5F00\u91CD\u547D\u540D\u5F39\u7A97",category:mt},_t=Et.DEPLOY_SERVICE={id:"xflow:deploy-service",label:"\u90E8\u7F72\u670D\u52A1",category:mt}})(tr||(tr={}));var jr,zr,Ua,oa,Za,ba,Pa=k.p.inject,ri=k.p.injectable,li;(function(Et){var mt=Et.command=tr.TEST_ASYNC_CMD,wt=Et.hookKey="testCmd"})(li||(li={}));var ka=(jr=ri(),zr=Pa(k.k),Ua=Reflect.metadata("design:type",Object),jr(oa=(Za=function(){function Et(){var mt=this;Object(Bn.a)(this,Et),Object(Kt.a)(this,"contextProvider",ba,this),this.execute=Object(S.a)(Object(p.a)().mark(function wt(){var $t,_t,xn,Ln,Yn,Ar,er;return Object(p.a)().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return $t=mt.contextProvider(),_t=$t.getHooks(),xn=$t.getArgs(),Ln=xn.args,Yn=xn.hooks,rr.next=5,$t.getX6Graph();case 5:return Ar=rr.sent,rr.next=8,_t.testCmd.call(Ln,function(){var Rr=Object(S.a)(Object(p.a)().mark(function Dr(qr){var qa,Gr,K,P;return Object(p.a)().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return qa=qr.commandService,Gr=qr.modelService,K=qr.graphMeta,P=qr.test,console.log(Ar,qa,Gr,K,P),X.abrupt("return",{test:!0});case 3:case"end":return X.stop()}},Dr)}));return function(Dr){return Rr.apply(this,arguments)}}(),Yn);case 8:return er=rr.sent,$t.setResult(er),rr.abrupt("return",mt);case 11:case"end":return rr.stop()}},wt)})),this.undo=Object(S.a)(Object(p.a)().mark(function wt(){var $t;return Object(p.a)().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return mt.isUndoable()&&($t=mt.contextProvider(),$t.undo()),xn.abrupt("return",mt);case 2:case"end":return xn.stop()}},wt)})),this.redo=Object(S.a)(Object(p.a)().mark(function wt(){return Object(p.a)().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(mt.isUndoable()){_t.next=3;break}return _t.next=3,mt.execute();case 3:return _t.abrupt("return",mt);case 4:case"end":return _t.stop()}},wt)}))}return Object(Nr.a)(Et,[{key:"isUndoable",value:function(){var wt=this.contextProvider();return wt.isUndoable()}}]),Et}(),ba=Object(Rn.a)(Za.prototype,"contextProvider",[zr,Ua],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Za))||oa),ai,Qa,aa,Gi,mo,sa,yi;(function(Et){var mt=Et.command=tr.DEPLOY_SERVICE,wt=Et.hookKey="deployDag"})(yi||(yi={}));var Io=(ai=k.p.injectable(),Qa=k.p.inject(k.k),aa=Reflect.metadata("design:type",Object),ai(Gi=(mo=function(){function Et(){var mt=this;Object(Bn.a)(this,Et),Object(Kt.a)(this,"contextProvider",sa,this),this.execute=Object(S.a)(Object(p.a)().mark(function wt(){var $t,_t,xn,Ln,Yn;return Object(p.a)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return $t=mt.contextProvider(),_t=$t.getArgs(),xn=_t.args,Ln=$t.getHooks(),er.next=5,Ln.deployDag.call(xn,function(){var Mr=Object(S.a)(Object(p.a)().mark(function rr(Rr){var Dr,qr;return Object(p.a)().wrap(function(Gr){for(;;)switch(Gr.prev=Gr.next){case 0:return Dr=Rr.commandService,qr=Rr.deployDagService,Gr.next=3,Dr.executeCommand(k.y.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(){var K=Object(S.a)(Object(p.a)().mark(function H(X,le){return Object(p.a)().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.next=2,qr(X,le);case 2:case"end":return xe.stop()}},H)}));function P(H,X){return K.apply(this,arguments)}return P}()});case 3:return Gr.abrupt("return",{success:!0});case 4:case"end":return Gr.stop()}},rr)}));return function(rr){return Mr.apply(this,arguments)}}());case 5:return Yn=er.sent,$t.setResult(Yn),er.abrupt("return",mt);case 8:case"end":return er.stop()}},wt)})),this.undo=Object(S.a)(Object(p.a)().mark(function wt(){var $t;return Object(p.a)().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return mt.isUndoable()&&($t=mt.contextProvider(),$t.undo()),xn.abrupt("return",mt);case 2:case"end":return xn.stop()}},wt)})),this.redo=Object(S.a)(Object(p.a)().mark(function wt(){return Object(p.a)().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(mt.isUndoable()){_t.next=3;break}return _t.next=3,mt.execute();case 3:return _t.abrupt("return",mt);case 4:case"end":return _t.stop()}},wt)}))}return Object(Nr.a)(Et,[{key:"isUndoable",value:function(){var wt=this.contextProvider();return wt.isUndoable()}}]),Et}(),sa=Object(Rn.a)(mo.prototype,"contextProvider",[Qa,aa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mo))||Gi),Pi=h("2qtc"),ao=h("kLXV"),ki=h("GNNt"),ot=h("wEI+"),It=h("5NDa"),Ne=h("5rEg"),St=h("y8nQ"),Ve=h("Vl3Y"),Xt=h("QKg/"),gn,pn,en,In,$r,da,Oa;(function(Et){var mt=Et.command=tr.SHOW_RENAME_MODAL,wt=Et.hookKey="renameNode"})(Oa||(Oa={}));var Ka=(gn=k.p.injectable(),pn=k.p.inject(k.k),en=Reflect.metadata("design:type",Object),gn(In=($r=function(){function Et(){var mt=this;Object(Bn.a)(this,Et),Object(Kt.a)(this,"contextProvider",da,this),this.execute=Object(S.a)(Object(p.a)().mark(function wt(){var $t,_t,xn,Ln,Yn,Ar;return Object(p.a)().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:return $t=mt.contextProvider(),_t=$t.getArgs(),xn=_t.args,Ln=_t.hooks,Yn=$t.getHooks(),Mr.next=5,Yn.renameNode.call(xn,function(){var rr=Object(S.a)(Object(p.a)().mark(function Rr(Dr){var qr,qa,Gr,K,P,H,X,le,be,xe,Ge;return Object(p.a)().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:return qr=Dr.nodeConfig,qa=Dr.graphMeta,Gr=Dr.commandService,K=Dr.modelService,P=Dr.updateNodeNameService,H=qr.label,X=function(){return{graphMeta:qa,commandService:Gr,modelService:K,updateNodeNameService:P}},bt.next=5,$t.getX6Graph();case 5:if(le=bt.sent,be=le.getCellById(qr.id),!(!be||!be.isNode())){bt.next=9;break}throw new Error("".concat(qr.id," is not a valid node"));case 9:return bt.next=11,_a(qr,X);case 11:if(xe=bt.sent,!xe){bt.next=16;break}return Ge=be.getData(),be.setData(Object(W.a)(Object(W.a)({},Ge),{},{label:xe})),bt.abrupt("return",{err:null,preNodeName:H,currentNodeName:xe});case 16:return bt.abrupt("return",{err:null,preNodeName:H,currentNodeName:""});case 17:case"end":return bt.stop()}},Rr)}));return function(Rr){return rr.apply(this,arguments)}}());case 5:return Ar=Mr.sent,$t.setResult(Ar),Mr.abrupt("return",mt);case 8:case"end":return Mr.stop()}},wt)})),this.undo=Object(S.a)(Object(p.a)().mark(function wt(){var $t;return Object(p.a)().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return mt.isUndoable()&&($t=mt.contextProvider(),$t.undo()),xn.abrupt("return",mt);case 2:case"end":return xn.stop()}},wt)})),this.redo=Object(S.a)(Object(p.a)().mark(function wt(){return Object(p.a)().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(mt.isUndoable()){_t.next=3;break}return _t.next=3,mt.execute();case 3:return _t.abrupt("return",mt);case 4:case"end":return _t.stop()}},wt)}))}return Object(Nr.a)(Et,[{key:"isUndoable",value:function(){var wt=this.contextProvider();return wt.isUndoable()}}]),Et}(),da=Object(Rn.a)($r.prototype,"contextProvider",[pn,en],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$r))||In),bi={labelCol:{span:5},wrapperCol:{span:19}};function _a(Et,mt){var wt=new k.h,$t=Object(Nr.a)(function er(){Object(Bn.a)(this,er)});$t.modal=void 0,$t.form=void 0;var _t=function(){var er=Object(S.a)(Object(p.a)().mark(function Mr(){var rr,Rr,Dr,qr,qa,Gr,K,P,H,X;return Object(p.a)().wrap(function(be){for(;;)switch(be.prev=be.next){case 0:return rr=$t.form,Rr=$t.modal,Dr=mt(),qr=Dr.updateNodeNameService,qa=Dr.graphMeta,be.prev=3,Rr.update({okButtonProps:{loading:!0}}),be.next=7,rr.validateFields();case 7:return be.next=9,rr.getFieldsValue();case 9:if(Gr=be.sent,K=Gr.newNodeName,!qr){be.next=20;break}return be.next=14,qr(K,Et,qa);case 14:if(P=be.sent,H=P.err,X=P.nodeName,!H){be.next=19;break}throw new Error(H);case 19:wt.resolve(X);case 20:xn(),be.next=27;break;case 23:be.prev=23,be.t0=be.catch(3),console.error(be.t0),Rr.update({okButtonProps:{loading:!1}});case 27:case"end":return be.stop()}},Mr,null,[[3,23]])}));return function(){return er.apply(this,arguments)}}(),xn=function(){Ar.destroy(),$t.form=null,$t.modal=null,Yn.destroy()},Ln=function(){var Mr=Ve.a.useForm(),rr=Object(V.a)(Mr,1),Rr=rr[0];return $t.form=Rr,Object(Ct.jsx)("div",{children:Object(Ct.jsx)(ot.a,{children:Object(Ct.jsx)(Ve.a,Object(W.a)(Object(W.a)({form:Rr},bi),{},{initialValues:{newNodeName:Et.label},children:Object(Ct.jsx)(Ve.a.Item,{name:"newNodeName",label:"\u8282\u70B9\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u8282\u70B9\u540D"},{min:3,message:"\u8282\u70B9\u540D\u4E0D\u80FD\u5C11\u4E8E3\u4E2A\u5B57\u7B26"}],children:Object(Ct.jsx)(Ne.a,{})})}))})})},Yn=ti(),Ar=ao.a.confirm({title:"\u91CD\u547D\u540D",content:Object(Ct.jsx)(Ln,{}),getContainer:function(){return Yn.element},okButtonProps:{onClick:function(Mr){Mr.stopPropagation(),_t()}},onCancel:function(){xn()},afterClose:function(){xn()}});return $t.modal=Ar,wt.promise}var ti=function(){var mt=document.createElement("div");return mt.classList.add("xflow-modal-container"),window.document.body.append(mt),{element:mt,destroy:function(){window.document.body.removeChild(mt)}}},tn=[Object(W.a)(Object(W.a)({},li),{},{CommandHandler:ka}),Object(W.a)(Object(W.a)({},yi),{},{CommandHandler:Io}),Object(W.a)(Object(W.a)({},Oa),{},{CommandHandler:Ka})],mn=Object(k.B)(function(Et){Et.setCommandContributions(function(){return tn}),Et.setRegisterHookFn(function(mt){var wt=[mt.graphMeta.registerHook({name:"get graph meta from backend",handler:function(){var _t=Object(S.a)(Object(p.a)().mark(function Ln(Yn){return Object(p.a)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:Yn.graphMetaService=Rt.queryGraphMeta;case 1:case"end":return er.stop()}},Ln)}));function xn(Ln){return _t.apply(this,arguments)}return xn}()}),mt.saveGraphData.registerHook({name:"save graph data",handler:function(){var _t=Object(S.a)(Object(p.a)().mark(function Ln(Yn){return Object(p.a)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:Yn.saveGraphDataService||(Yn.saveGraphDataService=Rt.saveGraphData);case 1:case"end":return er.stop()}},Ln)}));function xn(Ln){return _t.apply(this,arguments)}return xn}()}),mt.addNode.registerHook({name:"get node config from backend api",handler:function(){var _t=Object(S.a)(Object(p.a)().mark(function Ln(Yn){return Object(p.a)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:Yn.createNodeService=Rt.addNode;case 1:case"end":return er.stop()}},Ln)}));function xn(Ln){return _t.apply(this,arguments)}return xn}()}),mt.delNode.registerHook({name:"get edge config from backend api",handler:function(){var _t=Object(S.a)(Object(p.a)().mark(function Ln(Yn){return Object(p.a)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:Yn.deleteNodeService=Rt.delNode;case 1:case"end":return er.stop()}},Ln)}));function xn(Ln){return _t.apply(this,arguments)}return xn}()}),mt.addEdge.registerHook({name:"get edge config from backend api",handler:function(){var _t=Object(S.a)(Object(p.a)().mark(function Ln(Yn){return Object(p.a)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:Yn.createEdgeService=Rt.addEdge,Yn.edgeConfig=Object(W.a)(Object(W.a)({},Yn.edgeConfig),{},{connector:{name:"rounded"},router:{name:"manhattan"}});case 2:case"end":return er.stop()}},Ln)}));function xn(Ln){return _t.apply(this,arguments)}return xn}()}),mt.delEdge.registerHook({name:"get edge config from backend api",handler:function(){var _t=Object(S.a)(Object(p.a)().mark(function Ln(Yn){return Object(p.a)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:Yn.deleteEdgeService=Rt.delEdge;case 1:case"end":return er.stop()}},Ln)}));function xn(Ln){return _t.apply(this,arguments)}return xn}()})],$t=new k.i;return $t.pushAll(wt),$t})}),nr=function(mt){mt.executeCommandPipeline([{commandId:k.y.LOAD_DATA.id,getCommandOption:function(){var wt=Object(S.a)(Object(p.a)().mark(function _t(){return Object(p.a)().wrap(function(Ln){for(;;)switch(Ln.prev=Ln.next){case 0:return Ln.abrupt("return",{args:{loadDataService:Rt.loadGraphData}});case 1:case"end":return Ln.stop()}},_t)}));function $t(){return wt.apply(this,arguments)}return $t}()},{commandId:k.y.GRAPH_LAYOUT.id,getCommandOption:function(){var wt=Object(S.a)(Object(p.a)().mark(function _t(xn){var Ln,Yn;return Object(p.a)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return Ln=xn.getResult(),Yn=Ln.graphData,er.abrupt("return",{args:{layoutType:"dagre",layoutOptions:{type:"dagre",rankdir:"TB",nodesep:60,ranksep:30},graphData:Yn}});case 2:case"end":return er.stop()}},_t)}));function $t(_t){return wt.apply(this,arguments)}return $t}()},{commandId:k.y.GRAPH_RENDER.id,getCommandOption:function(){var wt=Object(S.a)(Object(p.a)().mark(function _t(xn){var Ln,Yn;return Object(p.a)().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return Ln=xn.getResult(),Yn=Ln.graphData,er.abrupt("return",{args:{graphData:Yn}});case 2:case"end":return er.stop()}},_t)}));function $t(_t){return wt.apply(this,arguments)}return $t}()},{commandId:k.y.GRAPH_ZOOM.id,getCommandOption:function(){var wt=Object(S.a)(Object(p.a)().mark(function _t(){return Object(p.a)().wrap(function(Ln){for(;;)switch(Ln.prev=Ln.next){case 0:return Ln.abrupt("return",{args:{factor:"fit",zoomOptions:{maxScale:.9}}});case 1:case"end":return Ln.stop()}},_t)}));function $t(){return wt.apply(this,arguments)}return $t}()}])},or;(function(Et){var mt=Et.id="test"})(or||(or={}));var Zr=Object(k.G)(function(Et){Et.registerModel(function(mt){return mt.registerModel({id:or.id,getInitialValue:function(){e:;}})})}),Vi=function(){var Et=Object(S.a)(Object(p.a)().mark(function mt(wt){var $t;return Object(p.a)().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return xn.next=2,wt.awaitModel(or.id);case 2:return $t=xn.sent,xn.abrupt("return",$t.getValidValue());case 4:case"end":return xn.stop()}},mt)}));return function(wt){return Et.apply(this,arguments)}}(),Da=h("/MfK"),Ea=h("G3dp"),ta=h("jrDe"),ha;(function(Et){k.l.set("DeleteOutlined",Da.a),k.l.set("EditOutlined",Ea.a),k.l.set("StopOutlined",ta.a);var mt=Et.DELETE_EDGE={id:k.x.DEL_EDGE.id,label:"\u5220\u9664\u8FB9",iconName:"DeleteOutlined",onClick:function(){var Ln=Object(S.a)(Object(p.a)().mark(function Ar(er){var Mr,rr;return Object(p.a)().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:Mr=er.target,rr=er.commandService,rr.executeCommand(k.x.DEL_EDGE.id,{edgeConfig:Mr.data});case 2:case"end":return Dr.stop()}},Ar)}));function Yn(Ar){return Ln.apply(this,arguments)}return Yn}()},wt=Et.DELETE_NODE={id:k.A.DEL_NODE.id,label:"\u5220\u9664\u8282\u70B9",iconName:"DeleteOutlined",onClick:function(){var Ln=Object(S.a)(Object(p.a)().mark(function Ar(er){var Mr,rr;return Object(p.a)().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:Mr=er.target,rr=er.commandService,rr.executeCommand(k.A.DEL_NODE.id,{nodeConfig:{id:Mr.data.id}});case 2:case"end":return Dr.stop()}},Ar)}));function Yn(Ar){return Ln.apply(this,arguments)}return Yn}()},$t=Et.EMPTY_MENU={id:"EMPTY_MENU_ITEM",label:"\u6682\u65E0\u53EF\u7528",isEnabled:!1,iconName:"DeleteOutlined"},_t=Et.RENAME_NODE={id:tr.SHOW_RENAME_MODAL.id,label:"\u91CD\u547D\u540D",isVisible:!0,iconName:"EditOutlined",onClick:function(){var Ln=Object(S.a)(Object(p.a)().mark(function Ar(er){var Mr,rr,Rr;return Object(p.a)().wrap(function(qr){for(;;)switch(qr.prev=qr.next){case 0:Mr=er.target,rr=er.commandService,Rr=Mr.data,rr.executeCommand(tr.SHOW_RENAME_MODAL.id,{nodeConfig:Rr,updateNodeNameService:Rt.renameNode});case 3:case"end":return qr.stop()}},Ar)}));function Yn(Ar){return Ln.apply(this,arguments)}return Yn}()},xn=Et.SEPARATOR={id:"separator",type:k.q.Separator}})(ha||(ha={}));var Kr=Object(k.C)(function(Et){Et.setMenuModelService(function(){var mt=Object(S.a)(Object(p.a)().mark(function wt($t,_t,xn,Ln){var Yn,Ar;return Object(p.a)().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:Yn=$t.type,Ar=$t.cell,console.log(Yn),Mr.t0=Yn,Mr.next=Mr.t0==="node"?5:Mr.t0==="edge"?7:Mr.t0==="blank"?9:11;break;case 5:return _t.setValue({id:"root",type:k.q.Root,submenu:[ha.DELETE_NODE,ha.RENAME_NODE]}),Mr.abrupt("break",13);case 7:return _t.setValue({id:"root",type:k.q.Root,submenu:[ha.DELETE_EDGE]}),Mr.abrupt("break",13);case 9:return _t.setValue({id:"root",type:k.q.Root,submenu:[ha.EMPTY_MENU]}),Mr.abrupt("break",13);case 11:return _t.setValue({id:"root",type:k.q.Root,submenu:[ha.EMPTY_MENU]}),Mr.abrupt("break",13);case 13:case"end":return Mr.stop()}},wt)}));return function(wt,$t,_t,xn){return mt.apply(this,arguments)}}())}),qi=h("P2fV"),So=h("NJEC"),Js=h("ga3A"),Ro=h("DE2O"),Zo=h("S2Tr"),Ss=h("/kP8"),gs=h("s2cm"),ou=h("AzWu"),As;(function(Et){k.l.set("SaveOutlined",Js.a),k.l.set("CloudSyncOutlined",Ro.a),k.l.set("GatewayOutlined",Zo.a),k.l.set("GroupOutlined",Ss.a),k.l.set("UngroupOutlined",gs.a),k.l.set("PlaySquareOutlined",ou.a),k.l.set("StopOutlined",ta.a);var mt=Et.getDependencies=function(){var _t=Object(S.a)(Object(p.a)().mark(function xn(Ln){return Object(p.a)().wrap(function(Ar){for(;;)switch(Ar.prev=Ar.next){case 0:return Ar.next=2,k.o.SELECTED_CELLS.getModel(Ln);case 2:return Ar.t0=Ar.sent,Ar.next=5,k.o.GRAPH_ENABLE_MULTI_SELECT.getModel(Ln);case 5:return Ar.t1=Ar.sent,Ar.next=8,k.t.MODEL.getModel(Ln);case 8:return Ar.t2=Ar.sent,Ar.abrupt("return",[Ar.t0,Ar.t1,Ar.t2]);case 10:case"end":return Ar.stop()}},xn)}));return function(xn){return _t.apply(this,arguments)}}(),wt=Et.getToolbarState=function(){var _t=Object(S.a)(Object(p.a)().mark(function xn(Ln){var Yn,Ar,er,Mr,rr;return Object(p.a)().wrap(function(Dr){for(;;)switch(Dr.prev=Dr.next){case 0:return Dr.next=2,k.o.GRAPH_ENABLE_MULTI_SELECT.useValue(Ln);case 2:return Yn=Dr.sent,Ar=Yn.isEnable,Dr.next=6,k.o.IS_GROUP_SELECTED.useValue(Ln);case 6:return er=Dr.sent,Dr.next=9,k.o.IS_NORMAL_NODES_SELECTED.useValue(Ln);case 9:return Mr=Dr.sent,Dr.next=12,k.t.MODEL.useValue(Ln);case 12:return rr=Dr.sent,Dr.abrupt("return",{isNodeSelected:Mr,isGroupSelected:er,isMultiSelectionActive:Ar,isProcessing:rr.graphStatus===k.t.StatusEnum.PROCESSING});case 14:case"end":return Dr.stop()}},xn)}));return function(xn){return _t.apply(this,arguments)}}(),$t=Et.getToolbarItems=function(){var _t=Object(S.a)(Object(p.a)().mark(function xn(Ln){var Yn,Ar;return Object(p.a)().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:return Yn=[],Ar=[],Yn.push({id:k.y.SAVE_GRAPH_DATA.id,iconName:"SaveOutlined",tooltip:"\u4FDD\u5B58\u6570\u636E",onClick:function(){var rr=Object(S.a)(Object(p.a)().mark(function Dr(qr){var qa;return Object(p.a)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:qa=qr.commandService,qa.executeCommand(k.y.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(H,X){return Rt.saveGraphData(H,X)}});case 2:case"end":return K.stop()}},Dr)}));function Rr(Dr){return rr.apply(this,arguments)}return Rr}()}),Yn.push({id:k.y.GRAPH_TOGGLE_MULTI_SELECT.id,tooltip:"\u5F00\u542F\u6846\u9009",iconName:"GatewayOutlined",active:Ln.isMultiSelectionActive,onClick:function(){var rr=Object(S.a)(Object(p.a)().mark(function Dr(qr){var qa;return Object(p.a)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:qa=qr.commandService,qa.executeCommand(k.y.GRAPH_TOGGLE_MULTI_SELECT.id,{});case 2:case"end":return K.stop()}},Dr)}));function Rr(Dr){return rr.apply(this,arguments)}return Rr}()}),Ar.push({iconName:"CloudSyncOutlined",tooltip:"\u90E8\u7F72",id:tr.DEPLOY_SERVICE.id,onClick:function(Rr){var Dr=Rr.commandService;Dr.executeCommand(tr.DEPLOY_SERVICE.id,{deployDagService:function(qa,Gr){return Rt.deployDagService(qa,Gr)}})}}),Ar.push({id:k.w.QUERY_GRAPH_STATUS.id+"stop",tooltip:"\u5F3A\u5236\u505C\u6B62",iconName:"StopOutlined",isEnabled:Ln.isProcessing,onClick:function(){var rr=Object(S.a)(Object(p.a)().mark(function Dr(qr){var qa;return Object(p.a)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:qa=qr.commandService,qa.executeCommand(k.w.QUERY_GRAPH_STATUS.id,{graphStatusService:Rt.stopGraphStatusService,loopInterval:5e3});case 2:case"end":return K.stop()}},Dr)}));function Rr(Dr){return rr.apply(this,arguments)}return Rr}(),render:function(Rr){return Object(Ct.jsx)(So.a,{title:"\u786E\u5B9A\u505C\u6B62\u6267\u884C\uFF1F",onConfirm:function(){Rr.onClick()},children:Rr.children})}}),Ar.push({id:k.w.QUERY_GRAPH_STATUS.id+"play",tooltip:"API\u8C03\u7528",iconName:"PlaySquareOutlined",isEnabled:Ln.isProcessing,onClick:function(){var rr=Object(S.a)(Object(p.a)().mark(function Dr(qr){var qa;return Object(p.a)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:qa=qr.commandService,qa.executeCommand(k.w.QUERY_GRAPH_STATUS.id,{graphStatusService:Rt.graphStatusService,loopInterval:3e3});case 2:case"end":return K.stop()}},Dr)}));function Rr(Dr){return rr.apply(this,arguments)}return Rr}()}),Mr.abrupt("return",[{name:"graphData",items:Yn},{name:"groupOperations",items:Ar}]);case 8:case"end":return Mr.stop()}},xn)}));return function(xn){return _t.apply(this,arguments)}}()})(As||(As={}));var Ms=Object(k.H)(function(Et){Et.setToolbarModelService(function(){var mt=Object(S.a)(Object(p.a)().mark(function wt($t,_t,xn){var Ln,Yn,Ar;return Object(p.a)().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:return Ln=function(){var rr=Object(S.a)(Object(p.a)().mark(function Rr(){var Dr,qr;return Object(p.a)().wrap(function(Gr){for(;;)switch(Gr.prev=Gr.next){case 0:return Gr.next=2,As.getToolbarState(_t);case 2:return Dr=Gr.sent,Gr.next=5,As.getToolbarItems(Dr);case 5:qr=Gr.sent,$t.setValue(function(K){K.mainGroups=qr});case 7:case"end":return Gr.stop()}},Rr)}));return function(){return rr.apply(this,arguments)}}(),Mr.next=3,As.getDependencies(_t);case 3:Yn=Mr.sent,Ar=Yn.map(function(rr){return rr.watch(Object(S.a)(Object(p.a)().mark(function Rr(){return Object(p.a)().wrap(function(qr){for(;;)switch(qr.prev=qr.next){case 0:Ln();case 1:case"end":return qr.stop()}},Rr)})))}),xn.pushAll(Ar);case 6:case"end":return Mr.stop()}},wt)}));return function(wt,$t,_t){return mt.apply(this,arguments)}}())}),Vo=Object(k.F)(function(Et){Et.setKeybindingFunc(function(mt){return mt.registerKeybinding([{id:"delete node or edge",keybinding:"backspace",callback:function(){var wt=Object(S.a)(Object(p.a)().mark(function _t(xn,Ln,Yn,Ar){var er;return Object(p.a)().wrap(function(rr){for(;;)switch(rr.prev=rr.next){case 0:return rr.next=2,k.o.SELECTED_CELLS.useValue(Ln);case 2:return er=rr.sent,rr.next=5,Promise.all(er.map(function(Rr){if(Rr.isEdge())return Yn.executeCommand(k.x.DEL_EDGE.id,{edgeConfig:Object(W.a)(Object(W.a)({},Rr.getData()),{},{id:Rr.id})})}));case 5:return rr.next=7,Promise.all(er.map(function(Rr){if(Rr.isNode())return Yn.executeCommand(k.A.DEL_NODE.id,{nodeConfig:Object(W.a)(Object(W.a)({},Rr.getData()),{},{id:Rr.id})})}));case 7:case"end":return rr.stop()}},_t)}));function $t(_t,xn,Ln,Yn){return wt.apply(this,arguments)}return $t}()},{id:"copy",keybinding:["command+c","ctrl+c"],callback:function(){var wt=Object(S.a)(Object(p.a)().mark(function _t(xn,Ln,Yn,Ar){return Object(p.a)().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:Ar.preventDefault(),console.log(xn),Yn.executeCommand(k.y.GRAPH_COPY.id,{});case 3:case"end":return Mr.stop()}},_t)}));function $t(_t,xn,Ln,Yn){return wt.apply(this,arguments)}return $t}()},{id:"paste",keybinding:["command+v","ctrl+v"],callback:function(){var wt=Object(S.a)(Object(p.a)().mark(function _t(xn,Ln,Yn,Ar){return Object(p.a)().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:Ar.preventDefault(),Yn.executeCommand(k.y.GRAPH_PASTE.id,{});case 2:case"end":return Mr.stop()}},_t)}));function $t(_t,xn,Ln,Yn){return wt.apply(this,arguments)}return $t}()}])})}),us=h("IzEo"),Ki=h("bx4M"),Eu=h("ovOe"),su=h.n(Eu),Zs=function(mt){var wt=mt.controlSchema,$t=wt.required,_t=wt.tooltip,xn=wt.extra,Ln=wt.name,Yn=wt.label,Ar=wt.placeholder;return Object(Ct.jsx)(k.j,{schema:wt,children:function(Mr){var rr=Mr.disabled,Rr=Mr.hidden,Dr=Mr.initialValue;return Object(Ct.jsx)(Ve.a.Item,{name:Ln,label:Yn,initialValue:Dr,tooltip:_t,extra:xn,required:$t,hidden:Rr,children:Object(Ct.jsx)(Is,{controlSchema:wt,placeholder:Ar,disabled:rr})})}})},Is=function(mt){var wt=mt.placeholder,$t=mt.disabled,_t=mt.onChange,xn=mt.value,Ln=Object(k.J)(),Yn=Ln.commandService,Ar=Ln.modelService;return A.a.useEffect(function(){Yn.executeCommand(k.y.SAVE_GRAPH_DATA.id,{saveGraphDataService:function(){var er=Object(S.a)(Object(p.a)().mark(function rr(Rr,Dr){var qr;return Object(p.a)().wrap(function(Gr){for(;;)switch(Gr.prev=Gr.next){case 0:return Gr.next=2,k.o.SELECTED_NODES.useValue(Ar);case 2:return qr=Gr.sent,console.log(Dr),_t(JSON.stringify(Dr)),Gr.abrupt("return",{err:null,data:Dr,meta:Rr});case 6:case"end":return Gr.stop()}},rr)}));function Mr(rr,Rr){return er.apply(this,arguments)}return Mr}()})}),Object(Ct.jsx)(Ne.a.TextArea,{value:xn,placeholder:wt,disabled:$t,rows:10})},gl=h("OaEy"),Vl=h("2fM7"),uu=function(mt){var wt=mt.controlSchema,$t=wt.required,_t=wt.tooltip,xn=wt.extra,Ln=wt.name,Yn=wt.label;return wt.value=="SECOND_SCHEDULING"&&ue.default.warn("\u6682\u4E0D\u652F\u6301\u3010\u79D2\u7EA7\u8C03\u5EA6\u3011\uFF0C\u5DF2\u5207\u6362\u4E3A\u3010API\u670D\u52A1\u3011\uFF01"),Object(Ct.jsx)(k.j,{schema:wt,children:function(er){var Mr=er.hidden,rr=er.initialValue;return Object(Ct.jsx)("div",{children:Object(Ct.jsx)(Ve.a.Item,{name:Ln,label:Yn,initialValue:"API_SERVICE",tooltip:_t,extra:xn,required:$t,hidden:Mr,children:Object(Ct.jsx)(Vl.a,{style:{width:"100%"},options:[{value:"API_SERVICE",label:"API\u670D\u52A1"}]})})})}})},Rs;(function(Et){Et.EDITOR="EDITOR",Et.PUBLISHTYPE="PUBLISHTYPE"})(Rs||(Rs={}));var el=function(mt){return mt.set(Rs.EDITOR,Zs),mt.set(Rs.PUBLISHTYPE,uu),mt};function tl(Et){return new Promise(function(mt){return setTimeout(function(){return mt(!0)},Et)})}var nl=!0,Hl=function(){var Et=Object(S.a)(Object(p.a)().mark(function mt(wt){var $t,_t,xn,Ln,Yn,Ar,er,Mr,rr,Rr;return Object(p.a)().wrap(function(qr){for(;;)switch(qr.prev=qr.next){case 0:if(!nl){qr.next=4;break}return qr.next=3,tl(200);case 3:nl=!1;case 4:return $t=wt.targetData,_t=wt.modelService,xn=wt.targetType,qr.next=7,k.o.GRAPH_META.useValue(_t);case 7:if(Ln=qr.sent,Yn=Ln.flowId,Ar=Ln.experiment,er=Ar===void 0?{}:Ar,Mr=Ln.opGroups,rr=Mr===void 0?[]:Mr,console.log("formSchemaService",xn,$t,Ln,wt,Yn,er,rr),xn!=="canvas"){qr.next=12;break}return qr.abrupt("return",{tabs:[{name:"\u753B\u5E03\u914D\u7F6E",groups:[{name:"groupName",controls:[{name:"exName",label:"\u753B\u5E03\u540D\u79F0",shape:"Input",disabled:!0,required:!0,placeholder:"please write something",value:er==null?void 0:er.exName,defaultValue:"\u753B\u5E03\u540D\u79F0",hidden:!1},{label:"\u90E8\u7F72\u7C7B\u578B",name:"publishType",shape:Rs.PUBLISHTYPE,disabled:!1,required:!0,value:er==null?void 0:er.publishType,defaultValue:"",hidden:!1}]}]}]});case 12:return Rr={tabs:[{name:"\u8282\u70B9\u914D\u7F6E",groups:[{name:"groupName",controls:[{name:"nodeName",label:"\u8282\u70B9\u540D\u79F0",shape:"Input",disabled:!0,required:!0,placeholder:"\u8BF7\u8F93\u5165\u8282\u70B9\u540D\u79F0",value:$t==null?void 0:$t.label,defaultValue:"\u8282\u70B9\u540D\u79F0",hidden:!1}]}]}]},qr.abrupt("return",Rr);case 14:case"end":return qr.stop()}},mt)}));return function(wt){return Et.apply(this,arguments)}}(),Ts=function(){var Et=Object(S.a)(Object(p.a)().mark(function mt(wt){return Object(p.a)().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:console.log("formValueUpdateService",wt);case 1:case"end":return _t.stop()}},mt)}));return function(wt){return Et.apply(this,arguments)}}(),Wl=function(){var Et=Object(S.a)(Object(p.a)().mark(function mt(wt,$t,_t){var xn;return Object(p.a)().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:xn={nodeConfig:Object(W.a)(Object(W.a)({},wt),{},{id:Object(k.K)()})},$t.executeCommand(k.A.ADD_NODE.id,xn);case 2:case"end":return Yn.stop()}},mt)}));return function(wt,$t,_t){return Et.apply(this,arguments)}}(),Ou=function(mt){return Object(Ct.jsxs)(Ki.a,{size:"small",title:mt.operator.opName,style:{width:"300px"},bordered:!1,children:["\u7B97\u5B50\u5165\u53C2\uFF1A",Object(Ct.jsx)(su.a,{name:null,src:JSON.parse(mt.operator.inputParam),displayDataTypes:!1}),Object(Ct.jsx)("br",{}),"\u7B97\u5B50\u51FA\u53C2\uFF1A",Object(Ct.jsx)(su.a,{name:null,src:JSON.parse(mt.operator.outputParam),displayDataTypes:!1})]})},Nu=!0,Qs=function(){var Et=Object(S.a)(Object(p.a)().mark(function mt(wt,$t){var _t,xn,Ln,Yn,Ar;return Object(p.a)().wrap(function(Mr){for(;;)switch(Mr.prev=Mr.next){case 0:if(!Nu){Mr.next=4;break}return Mr.next=3,tl(200);case 3:Nu=!1;case 4:return _t=wt.flowId,xn=wt.experiment,Ln=xn===void 0?{}:xn,Yn=wt.opGroups,Ar=Yn===void 0?[]:Yn,console.log("nodeDataService",wt,$t,_t,Ln,Ar),Mr.abrupt("return",Ar.map(function(rr){return{id:rr.id,header:rr.groupName,children:rr.operatorList.map(function(Rr){return{id:Rr.id,label:Rr.opName,parentId:rr.id,renderKey:Fn,operator:Rr,popoverContent:Object(Ct.jsx)(Ou,{operator:Rr})}})}}));case 7:case"end":return Mr.stop()}},mt)}));return function(wt,$t){return Et.apply(this,arguments)}}(),rl=function(){var Et=Object(S.a)(Object(p.a)().mark(function mt(){var wt,$t,_t,xn=arguments;return Object(p.a)().wrap(function(Yn){for(;;)switch(Yn.prev=Yn.next){case 0:return wt=xn.length>0&&xn[0]!==void 0?xn[0]:[],$t=xn.length>1?xn[1]:void 0,_t=wt.filter(function(Ar){return Ar.label.includes($t)}),console.log(_t,$t,wt),Yn.abrupt("return",_t);case 5:case"end":return Yn.stop()}},mt)}));return function(){return Et.apply(this,arguments)}}(),sf=h("E5AX"),ml=h("sfHF"),al=function(mt){var wt=ln.parse(Object(M.k)().search),$t={flowId:wt.id},_t=Bt(mt),xn=Ms(),Ln=Kr(),Yn=mn(),Ar=Zr(),er=Vo(),Mr=A.a.useMemo(function(){return{app:null}},[]),rr=function(){var Rr=Object(S.a)(Object(p.a)().mark(function Dr(qr){return Object(p.a)().wrap(function(Gr){for(;;)switch(Gr.prev=Gr.next){case 0:Mr.app=qr,nr(Mr.app);case 2:case"end":return Gr.stop()}},Dr)}));return function(qr){return Rr.apply(this,arguments)}}();return A.a.useEffect(function(){Mr.app&&nr(Mr.app)},[Mr.app,$t]),Object(Ct.jsxs)(k.u,{className:"dag-user-custom-clz",hookConfig:_t,modelServiceConfig:Ar,commandConfig:Yn,onLoad:rr,meta:$t,children:[Object(Ct.jsx)(k.g,{}),Object(Ct.jsx)(k.r,{className:"xflow-node-panel",searchService:rl,nodeDataService:Qs,onNodeDrop:Wl,position:{width:230,top:0,bottom:0,left:0},footerPosition:{height:0},bodyPosition:{top:40,bottom:0,left:0}}),Object(Ct.jsx)(k.f,{className:"xflow-workspace-toolbar-top",layout:"horizontal",config:xn,position:{top:0,left:230,right:290,bottom:0}}),Object(Ct.jsxs)(k.v,{position:{top:40,left:230,right:290,bottom:0},children:[Object(Ct.jsx)(k.d,{position:{top:12,right:12}}),Object(Ct.jsx)(k.a,{config:Ln}),Object(Ct.jsx)(k.e,{color:"#faad14"}),Object(Ct.jsx)(k.c,{})]}),Object(Ct.jsx)(k.m,{controlMapService:el,formSchemaService:Hl,formValueUpdateService:Ts,bodyPosition:{top:0,bottom:0,right:0},position:{width:290,top:0,bottom:0,right:0},footerPosition:{height:0}}),Object(Ct.jsx)(k.n,{config:er})]})},pc=R.default=al},Yk9n:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.inject=R.LazyServiceIdentifer=void 0;var B=h("MON2"),p=h("xfSm"),S=h("GXnB"),E=h("Ztfv"),A=function(){function M(U){this._cb=U}return M.prototype.unwrap=function(){return this._cb()},M}();R.LazyServiceIdentifer=A;function k(M){return function(U,V,$){if(M===void 0)throw new Error(B.UNDEFINED_INJECT_ANNOTATION(U.name));var W=new S.Metadata(p.INJECT_TAG,M);typeof $=="number"?E.tagParameter(U,V,$,W):E.tagProperty(U,V,W)}}R.inject=k},Yr8b:function(ge,R,h){ge.exports=h("SGks")},Yydy:function(ge,R){},ZKkB:function(ge,R,h){"use strict";h.d(R,"a",function(){return A});var B=h("oZsa"),p=h("iZzK");function S(k){return Function.toString.call(k).indexOf("[native code]")!==-1}var E=h("xdlL");function A(k){var M=typeof Map=="function"?new Map:void 0;return A=function(V){if(V===null||!S(V))return V;if(typeof V!="function")throw new TypeError("Super expression must either be null or a function");if(typeof M!="undefined"){if(M.has(V))return M.get(V);M.set(V,$)}function $(){return Object(E.a)(V,arguments,Object(B.a)(this).constructor)}return $.prototype=Object.create(V.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),Object(p.a)($,V)},A(k)}},"ZQT/":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.CompactColor=void 0;var B=h("q1tI"),p=U(B),S=h("/FUP"),E=U(S),A=h("p8yl"),k=U(A),M=h("TM95");function U($){return $&&$.__esModule?$:{default:$}}var V=R.CompactColor=function(W){var Y=W.color,ee=W.onClick,ne=ee===void 0?function(){}:ee,ie=W.onSwatchHover,re=W.active,J=(0,E.default)({default:{color:{background:Y,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:k.default.getContrastingColor(Y),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:re,"color-#FFFFFF":Y==="#FFFFFF",transparent:Y==="transparent"});return p.default.createElement(M.Swatch,{style:J.color,color:Y,onClick:ne,onHover:ie,focusStyle:{boxShadow:"0 0 4px "+Y}},p.default.createElement("div",{style:J.dot}))};R.default=V},ZhPi:function(ge,R,h){var B=h("WkPL");function p(S,E){if(!!S){if(typeof S=="string")return B(S,E);var A=Object.prototype.toString.call(S).slice(8,-1);if(A==="Object"&&S.constructor&&(A=S.constructor.name),A==="Map"||A==="Set")return Array.from(S);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return B(S,E)}}ge.exports=p,ge.exports.__esModule=!0,ge.exports.default=ge.exports},ZjWs:function(ge,R){},"Znm+":function(ge,R,h){var B=h("NykK"),p=h("ExA7"),S="[object Boolean]";function E(A){return A===!0||A===!1||p(A)&&B(A)==S}ge.exports=E},ZtHU:function(ge,R,h){ge.exports={Graph:h("QJPA"),version:h("SUTL")}},Ztfv:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.tagProperty=R.tagParameter=R.decorate=void 0;var B=h("MON2"),p=h("xfSm");function S(V,$,W,Y){var ee=p.TAGGED;A(ee,V,$,Y,W)}R.tagParameter=S;function E(V,$,W){var Y=p.TAGGED_PROP;A(Y,V.constructor,$,W)}R.tagProperty=E;function A(V,$,W,Y,ee){var ne={},ie=typeof ee=="number",re=ee!==void 0&&ie?ee.toString():W;if(ie&&W!==void 0)throw new Error(B.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(V,$)&&(ne=Reflect.getMetadata(V,$));var J=ne[re];if(!Array.isArray(J))J=[];else for(var ce=0,G=J;ce<G.length;ce++){var Z=G[ce];if(Z.key===Y.key)throw new Error(B.DUPLICATED_METADATA+" "+Z.key.toString())}J.push(Y),ne[re]=J,Reflect.defineMetadata(V,ne,$)}function k(V,$){Reflect.decorate(V,$)}function M(V,$){return function(W,Y){$(W,Y,V)}}function U(V,$,W){typeof W=="number"?k([M(W,V)],$):typeof W=="string"?Reflect.decorate([V],$,W):k([V],$)}R.decorate=U},ZzCi:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.named=void 0;var B=h("xfSm"),p=h("GXnB"),S=h("Ztfv");function E(A){return function(k,M,U){var V=new p.Metadata(B.NAMED_TAG,A);typeof U=="number"?S.tagParameter(k,M,U,V):S.tagProperty(k,M,V)}}R.named=E},a1gu:function(ge,R,h){var B=h("cDf5").default,p=h("PJYZ");function S(E,A){if(A&&(B(A)==="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p(E)}ge.exports=S,ge.exports.__esModule=!0,ge.exports.default=ge.exports},a8Yn:function(ge,R){ge.exports=h;function h(B,p){return B[0]*p[0]+B[1]*p[1]}},aPG5:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.resolve=void 0;var B=h("MON2"),p=h("FV85"),S=h("qK8v"),E=h("ujMp"),A=h("cSJO"),k=function($,W,Y){try{return Y()}catch(ee){throw S.isStackOverflowExeption(ee)?new Error(B.CIRCULAR_DEPENDENCY_IN_FACTORY($,W.toString())):ee}},M=function V($){return function(W){W.parentContext.setCurrentRequest(W);var Y=W.bindings,ee=W.childRequests,ne=W.target&&W.target.isArray(),ie=!W.parentRequest||!W.parentRequest.target||!W.target||!W.parentRequest.target.matchesArray(W.target.serviceIdentifier);if(ne&&ie)return ee.map(function(fe){var se=V($);return se(fe)});var re=null;if(W.target.isOptional()&&Y.length===0)return;var J=Y[0],ce=J.scope===p.BindingScopeEnum.Singleton,G=J.scope===p.BindingScopeEnum.Request;if(ce&&J.activated)return J.cache;if(G&&$!==null&&$.has(J.id))return $.get(J.id);if(J.type===p.BindingTypeEnum.ConstantValue)re=J.cache,J.activated=!0;else if(J.type===p.BindingTypeEnum.Function)re=J.cache,J.activated=!0;else if(J.type===p.BindingTypeEnum.Constructor)re=J.implementationType;else if(J.type===p.BindingTypeEnum.DynamicValue&&J.dynamicValue!==null)re=k("toDynamicValue",J.serviceIdentifier,function(){return J.dynamicValue(W.parentContext)});else if(J.type===p.BindingTypeEnum.Factory&&J.factory!==null)re=k("toFactory",J.serviceIdentifier,function(){return J.factory(W.parentContext)});else if(J.type===p.BindingTypeEnum.Provider&&J.provider!==null)re=k("toProvider",J.serviceIdentifier,function(){return J.provider(W.parentContext)});else if(J.type===p.BindingTypeEnum.Instance&&J.implementationType!==null)re=A.resolveInstance(J.implementationType,ee,V($));else{var Z=E.getServiceIdentifierAsString(W.serviceIdentifier);throw new Error(B.INVALID_BINDING_TYPE+" "+Z)}return typeof J.onActivation=="function"&&(re=J.onActivation(W.parentContext,re)),ce&&(J.cache=re,J.activated=!0),G&&$!==null&&!$.has(J.id)&&$.set(J.id,re),re}};function U(V){var $=M(V.plan.rootRequest.requestScope);return $(V.plan.rootRequest)}R.resolve=U},baXp:function(ge,R,h){"use strict";h.d(R,"a",function(){return ie});var B=h("lwsE"),p=h.n(B),S=h("PJYZ"),E=h.n(S),A=h("7W2i"),k=h.n(A),M=h("a1gu"),U=h.n(M),V=h("Nsbk"),$=h.n(V),W=h("oDt1");function Y(re){var J=ee();return function(){var G=$()(re),Z;if(J){var fe=$()(this).constructor;Z=Reflect.construct(G,arguments,fe)}else Z=G.apply(this,arguments);return U()(this,Z)}}function ee(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(re){return!1}}var ne;(function(re){re[re.Standard=0]="Standard"})(ne||(ne={}));var ie=function(re){k()(ce,re);var J=Y(ce);function ce(G){var Z;return p()(this,ce),Z=J.call(this,G),Z.strategy=ne.Standard,Z.visibilityPlaneMask=0,Z.visible=!1,Object.assign(E()(Z),G),Z}return ce}(W.a)},blMc:function(ge,R){ge.exports=h;function h(B,p,S){var E=p[0],A=p[1];return B[0]=S[0]*E+S[2]*A+S[4],B[1]=S[1]*E+S[3]*A+S[5],B}},bx4M:function(ge,R,h){"use strict";var B=h("rePB"),p=h("wx14"),S=h("TSYQ"),E=h.n(S),A=h("bT9E"),k=h("q1tI"),M=h("H84U"),U=h("3Nzz"),V=h("/ezw"),$=h("ZTPi"),W=function(ve,ae){var j={};for(var de in ve)Object.prototype.hasOwnProperty.call(ve,de)&&ae.indexOf(de)<0&&(j[de]=ve[de]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ke=0,de=Object.getOwnPropertySymbols(ve);ke<de.length;ke++)ae.indexOf(de[ke])<0&&Object.prototype.propertyIsEnumerable.call(ve,de[ke])&&(j[de[ke]]=ve[de[ke]]);return j},Y=function(ae){var j=ae.prefixCls,de=ae.className,ke=ae.hoverable,he=ke===void 0?!0:ke,Oe=W(ae,["prefixCls","className","hoverable"]);return k.createElement(M.a,null,function(We){var D=We.getPrefixCls,je=D("card",j),pt=E()("".concat(je,"-grid"),de,Object(B.a)({},"".concat(je,"-grid-hoverable"),he));return k.createElement("div",Object(p.a)({},Oe,{className:pt}))})},ee=Y,ne=function(ve,ae){var j={};for(var de in ve)Object.prototype.hasOwnProperty.call(ve,de)&&ae.indexOf(de)<0&&(j[de]=ve[de]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ke=0,de=Object.getOwnPropertySymbols(ve);ke<de.length;ke++)ae.indexOf(de[ke])<0&&Object.prototype.propertyIsEnumerable.call(ve,de[ke])&&(j[de[ke]]=ve[de[ke]]);return j};function ie(ve){var ae=ve.map(function(j,de){return k.createElement("li",{style:{width:"".concat(100/ve.length,"%")},key:"action-".concat(de)},k.createElement("span",null,j))});return ae}var re=k.forwardRef(function(ve,ae){var j,de,ke=k.useContext(M.b),he=ke.getPrefixCls,Oe=ke.direction,We=k.useContext(U.b),D=function(Rn){var Cr;(Cr=ve.onTabChange)===null||Cr===void 0||Cr.call(ve,Rn)},je=function(){var Rn;return k.Children.forEach(ve.children,function(Cr){Cr&&Cr.type&&Cr.type===ee&&(Rn=!0)}),Rn},pt=ve.prefixCls,nt=ve.className,Lt=ve.extra,Gt=ve.headStyle,$e=Gt===void 0?{}:Gt,jt=ve.bodyStyle,Be=jt===void 0?{}:jt,pe=ve.title,un=ve.loading,ln=ve.bordered,Fn=ln===void 0?!0:ln,Ft=ve.size,Pn=ve.type,lr=ve.cover,hn=ve.actions,On=ve.tabList,jn=ve.children,Dn=ve.activeTabKey,ft=ve.defaultActiveTabKey,Ut=ve.tabBarExtraContent,ct=ve.hoverable,Ct=ve.tabProps,kt=Ct===void 0?{}:Ct,yt=ne(ve,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),tt=he("card",pt),I=k.createElement(V.a,{loading:!0,active:!0,paragraph:{rows:4},title:!1},jn),Mn=Dn!==void 0,dt=Object(p.a)(Object(p.a)({},kt),(j={},Object(B.a)(j,Mn?"activeKey":"defaultActiveKey",Mn?Dn:ft),Object(B.a)(j,"tabBarExtraContent",Ut),j)),vt,Bt=On&&On.length?k.createElement($.a,Object(p.a)({size:"large"},dt,{className:"".concat(tt,"-head-tabs"),onChange:D,items:On.map(function(Nr){var Rn;return{label:Nr.tab,key:Nr.key,disabled:(Rn=Nr.disabled)!==null&&Rn!==void 0?Rn:!1}})})):null;(pe||Lt||Bt)&&(vt=k.createElement("div",{className:"".concat(tt,"-head"),style:$e},k.createElement("div",{className:"".concat(tt,"-head-wrapper")},pe&&k.createElement("div",{className:"".concat(tt,"-head-title")},pe),Lt&&k.createElement("div",{className:"".concat(tt,"-extra")},Lt)),Bt));var me=lr?k.createElement("div",{className:"".concat(tt,"-cover")},lr):null,ue=k.createElement("div",{className:"".concat(tt,"-body"),style:Be},un?I:jn),Re=hn&&hn.length?k.createElement("ul",{className:"".concat(tt,"-actions")},ie(hn)):null,Rt=Object(A.a)(yt,["onTabChange"]),Kt=Ft||We,Bn=E()(tt,(de={},Object(B.a)(de,"".concat(tt,"-loading"),un),Object(B.a)(de,"".concat(tt,"-bordered"),Fn),Object(B.a)(de,"".concat(tt,"-hoverable"),ct),Object(B.a)(de,"".concat(tt,"-contain-grid"),je()),Object(B.a)(de,"".concat(tt,"-contain-tabs"),On&&On.length),Object(B.a)(de,"".concat(tt,"-").concat(Kt),Kt),Object(B.a)(de,"".concat(tt,"-type-").concat(Pn),!!Pn),Object(B.a)(de,"".concat(tt,"-rtl"),Oe==="rtl"),de),nt);return k.createElement("div",Object(p.a)({ref:ae},Rt,{className:Bn}),vt,me,ue,Re)}),J=re,ce=function(ve,ae){var j={};for(var de in ve)Object.prototype.hasOwnProperty.call(ve,de)&&ae.indexOf(de)<0&&(j[de]=ve[de]);if(ve!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ke=0,de=Object.getOwnPropertySymbols(ve);ke<de.length;ke++)ae.indexOf(de[ke])<0&&Object.prototype.propertyIsEnumerable.call(ve,de[ke])&&(j[de[ke]]=ve[de[ke]]);return j},G=function(ae){return k.createElement(M.a,null,function(j){var de=j.getPrefixCls,ke=ae.prefixCls,he=ae.className,Oe=ae.avatar,We=ae.title,D=ae.description,je=ce(ae,["prefixCls","className","avatar","title","description"]),pt=de("card",ke),nt=E()("".concat(pt,"-meta"),he),Lt=Oe?k.createElement("div",{className:"".concat(pt,"-meta-avatar")},Oe):null,Gt=We?k.createElement("div",{className:"".concat(pt,"-meta-title")},We):null,$e=D?k.createElement("div",{className:"".concat(pt,"-meta-description")},D):null,jt=Gt||$e?k.createElement("div",{className:"".concat(pt,"-meta-detail")},Gt,$e):null;return k.createElement("div",Object(p.a)({},je,{className:nt}),Lt,jt)})},Z=G,fe=J;fe.Grid=ee,fe.Meta=Z;var se=R.a=fe},cDf5:function(ge,R){function h(B){return ge.exports=h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},ge.exports.__esModule=!0,ge.exports.default=ge.exports,h(B)}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},cGwC:function(ge,R){ge.exports=h;function h(B,p,S){return B[0]=p[0]-S[0],B[1]=p[1]-S[1],B}},cSJO:function(ge,R,h){"use strict";var B=this&&this.__spreadArray||function(V,$){for(var W=0,Y=$.length,ee=V.length;W<Y;W++,ee++)V[ee]=$[W];return V};Object.defineProperty(R,"__esModule",{value:!0}),R.resolveInstance=void 0;var p=h("MON2"),S=h("FV85"),E=h("xfSm");function A(V,$,W){var Y=$.filter(function(ne){return ne.target!==null&&ne.target.type===S.TargetTypeEnum.ClassProperty}),ee=Y.map(W);return Y.forEach(function(ne,ie){var re="";re=ne.target.name.value();var J=ee[ie];V[re]=J}),V}function k(V,$){return new(V.bind.apply(V,B([void 0],$)))}function M(V,$){if(Reflect.hasMetadata(E.POST_CONSTRUCT,V)){var W=Reflect.getMetadata(E.POST_CONSTRUCT,V);try{$[W.value]()}catch(Y){throw new Error(p.POST_CONSTRUCT_ERROR(V.name,Y.message))}}}function U(V,$,W){var Y=null;if($.length>0){var ee=$.filter(function(ie){return ie.target!==null&&ie.target.type===S.TargetTypeEnum.ConstructorArgument}),ne=ee.map(W);Y=k(V,ne),Y=A(Y,$,W)}else Y=new V;return M(V,Y),Y}R.resolveInstance=U},cXWL:function(ge,R,h){"use strict";h.d(R,"a",function(){return k});var B=h("lwsE"),p=h.n(B),S=h("W8MJ"),E=h.n(S),A=h("IOcx"),k=function(){function M(U,V){p()(this,M),this.distance=void 0,this.normal=void 0,this.pnVertexFlag=void 0,this.distance=U||0,this.normal=V||A.d.fromValues(0,1,0),this.updatePNVertexFlag()}return E()(M,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(Number(this.normal[0]>=0)<<8)+(Number(this.normal[1]>=0)<<4)+Number(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(V){return A.d.dot(V,this.normal)-this.distance}},{key:"normalize",value:function(){var V=1/A.d.len(this.normal);A.d.scale(this.normal,this.normal,V),this.distance*=V}},{key:"intersectsLine",value:function(V,$,W){var Y=this.distanceToPoint(V),ee=this.distanceToPoint($),ne=Y/(Y-ee),ie=ne>=0&&ne<=1;return ie&&W&&A.d.lerp(W,V,$,ne),ie}}]),M}()},cZ5Q:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.injectable=void 0;var B=h("MON2"),p=h("xfSm");function S(){return function(E){if(Reflect.hasOwnMetadata(p.PARAM_TYPES,E))throw new Error(B.DUPLICATED_INJECTABLE_DECORATOR);var A=Reflect.getMetadata(p.DESIGN_PARAM_TYPES,E)||[];return Reflect.defineMetadata(p.PARAM_TYPES,A,E),E}}R.injectable=S},ccyi:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Saturation=void 0;var B=function(){function re(J,ce){for(var G=0;G<ce.length;G++){var Z=ce[G];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(J,Z.key,Z)}}return function(J,ce,G){return ce&&re(J.prototype,ce),G&&re(J,G),J}}(),p=h("q1tI"),S=W(p),E=h("/FUP"),A=W(E),k=h("DzJC"),M=W(k),U=h("VVms"),V=$(U);function $(re){if(re&&re.__esModule)return re;var J={};if(re!=null)for(var ce in re)Object.prototype.hasOwnProperty.call(re,ce)&&(J[ce]=re[ce]);return J.default=re,J}function W(re){return re&&re.__esModule?re:{default:re}}function Y(re,J){if(!(re instanceof J))throw new TypeError("Cannot call a class as a function")}function ee(re,J){if(!re)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return J&&(typeof J=="object"||typeof J=="function")?J:re}function ne(re,J){if(typeof J!="function"&&J!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof J);re.prototype=Object.create(J&&J.prototype,{constructor:{value:re,enumerable:!1,writable:!0,configurable:!0}}),J&&(Object.setPrototypeOf?Object.setPrototypeOf(re,J):re.__proto__=J)}var ie=R.Saturation=function(re){ne(J,re);function J(ce){Y(this,J);var G=ee(this,(J.__proto__||Object.getPrototypeOf(J)).call(this,ce));return G.handleChange=function(Z){typeof G.props.onChange=="function"&&G.throttle(G.props.onChange,V.calculateChange(Z,G.props.hsl,G.container),Z)},G.handleMouseDown=function(Z){G.handleChange(Z),window.addEventListener("mousemove",G.handleChange),window.addEventListener("mouseup",G.handleMouseUp)},G.handleMouseUp=function(){G.unbindEventListeners()},G.throttle=(0,M.default)(function(Z,fe,se){Z(fe,se)},50),G}return B(J,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var G=this,Z=this.props.style||{},fe=Z.color,se=Z.white,ve=Z.black,ae=Z.pointer,j=Z.circle,de=(0,A.default)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:fe,white:se,black:ve,pointer:ae,circle:j}},{custom:!!this.props.style});return S.default.createElement("div",{style:de.color,ref:function(he){return G.container=he},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},S.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),S.default.createElement("div",{style:de.white,className:"saturation-white"},S.default.createElement("div",{style:de.black,className:"saturation-black"}),S.default.createElement("div",{style:de.pointer},this.props.pointer?S.default.createElement(this.props.pointer,this.props):S.default.createElement("div",{style:de.circle}))))}}]),J}(p.PureComponent||p.Component);R.default=ie},d9O0:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.id=void 0;var B=0;function p(){return B++}R.id=p},dATH:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SliderPointer=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.SliderPointer=function(){var U=(0,E.default)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return p.default.createElement("div",{style:U.picker})};R.default=k},dO6L:function(ge,R,h){"use strict";h.d(R,"a",function(){return B});function B(p,S,E,A){!E||Object.defineProperty(p,S,{enumerable:E.enumerable,configurable:E.configurable,writable:E.writable,value:E.initializer?E.initializer.call(A):void 0})}},dOXA:function(ge,R){ge.exports=h;function h(B,p,S){return B[0]=Math.min(p[0],S[0]),B[1]=Math.min(p[1],S[1]),B}},dQpi:function(ge,R,h){var B=h("yGk4"),p=h("vN+2"),S=h("rEGp"),E=1/0,A=B&&1/S(new B([,-0]))[1]==E?function(k){return new B(k)}:p;ge.exports=A},dX1H:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Target=void 0;var B=h("xfSm"),p=h("d9O0"),S=h("GXnB"),E=h("zxMA"),A=function(){function k(M,U,V,$){this.id=p.id(),this.type=M,this.serviceIdentifier=V,this.name=new E.QueryableString(U||""),this.metadata=new Array;var W=null;typeof $=="string"?W=new S.Metadata(B.NAMED_TAG,$):$ instanceof S.Metadata&&(W=$),W!==null&&this.metadata.push(W)}return k.prototype.hasTag=function(M){for(var U=0,V=this.metadata;U<V.length;U++){var $=V[U];if($.key===M)return!0}return!1},k.prototype.isArray=function(){return this.hasTag(B.MULTI_INJECT_TAG)},k.prototype.matchesArray=function(M){return this.matchesTag(B.MULTI_INJECT_TAG)(M)},k.prototype.isNamed=function(){return this.hasTag(B.NAMED_TAG)},k.prototype.isTagged=function(){return this.metadata.some(function(M){return B.NON_CUSTOM_TAG_KEYS.every(function(U){return M.key!==U})})},k.prototype.isOptional=function(){return this.matchesTag(B.OPTIONAL_TAG)(!0)},k.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(M){return M.key===B.NAMED_TAG})[0]:null},k.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(M){return B.NON_CUSTOM_TAG_KEYS.every(function(U){return M.key!==U})}):null},k.prototype.matchesNamedTag=function(M){return this.matchesTag(B.NAMED_TAG)(M)},k.prototype.matchesTag=function(M){var U=this;return function(V){for(var $=0,W=U.metadata;$<W.length;$++){var Y=W[$];if(Y.key===M&&Y.value===V)return!0}return!1}},k}();R.Target=A},doU7:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.BindingCount=void 0;var B={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};R.BindingCount=B},dxzI:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.AsyncContainerModule=R.ContainerModule=void 0;var B=h("d9O0"),p=function(){function E(A){this.id=B.id(),this.registry=A}return E}();R.ContainerModule=p;var S=function(){function E(A){this.id=B.id(),this.registry=A}return E}();R.AsyncContainerModule=S},eHBW:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SketchPresetColors=void 0;var B=Object.assign||function(W){for(var Y=1;Y<arguments.length;Y++){var ee=arguments[Y];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(W[ne]=ee[ne])}return W},p=h("q1tI"),S=V(p),E=h("17x9"),A=V(E),k=h("/FUP"),M=V(k),U=h("TM95");function V(W){return W&&W.__esModule?W:{default:W}}var $=R.SketchPresetColors=function(Y){var ee=Y.colors,ne=Y.onClick,ie=ne===void 0?function(){}:ne,re=Y.onSwatchHover,J=(0,M.default)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!ee||!ee.length}),ce=function(Z,fe){ie({hex:Z,source:"hex"},fe)};return S.default.createElement("div",{style:J.colors,className:"flexbox-fix"},ee.map(function(G){var Z=typeof G=="string"?{color:G}:G,fe=""+Z.color+(Z.title||"");return S.default.createElement("div",{key:fe,style:J.swatchWrap},S.default.createElement(U.Swatch,B({},Z,{style:J.swatch,onClick:ce,onHover:re,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+Z.color}})))}))};$.propTypes={colors:A.default.arrayOf(A.default.oneOfType([A.default.string,A.default.shape({color:A.default.string,title:A.default.string})])).isRequired},R.default=$},fBpv:function(ge,R,h){var B=h("PnFB");ge.exports=p;function p(S,E){return B(S,E,"post")}},fbrv:function(ge,R,h){"use strict";var B=this&&this.__spreadArray||function(ie,re){for(var J=0,ce=re.length,G=ie.length;J<ce;J++,G++)ie[G]=re[J];return ie};Object.defineProperty(R,"__esModule",{value:!0}),R.getFunctionName=R.getBaseClassDependencyCount=R.getDependencies=void 0;var p=h("Yk9n"),S=h("MON2"),E=h("FV85"),A=h("xfSm"),k=h("ujMp");Object.defineProperty(R,"getFunctionName",{enumerable:!0,get:function(){return k.getFunctionName}});var M=h("dX1H");function U(ie,re){var J=k.getFunctionName(re),ce=V(ie,J,re,!1);return ce}R.getDependencies=U;function V(ie,re,J,ce){var G=ie.getConstructorMetadata(J),Z=G.compilerGeneratedMetadata;if(Z===void 0){var fe=S.MISSING_INJECTABLE_ANNOTATION+" "+re+".";throw new Error(fe)}var se=G.userGeneratedMetadata,ve=Object.keys(se),ae=J.length===0&&ve.length>0,j=ve.length>J.length,de=ae||j?ve.length:J.length,ke=W(ce,re,Z,se,de),he=Y(ie,J),Oe=B(B([],ke),he);return Oe}function $(ie,re,J,ce,G){var Z=G[ie.toString()]||[],fe=ne(Z),se=fe.unmanaged!==!0,ve=ce[ie],ae=fe.inject||fe.multiInject;if(ve=ae||ve,ve instanceof p.LazyServiceIdentifer&&(ve=ve.unwrap()),se){var j=ve===Object,de=ve===Function,ke=ve===void 0,he=j||de||ke;if(!re&&he){var Oe=S.MISSING_INJECT_ANNOTATION+" argument "+ie+" in class "+J+".";throw new Error(Oe)}var We=new M.Target(E.TargetTypeEnum.ConstructorArgument,fe.targetName,ve);return We.metadata=Z,We}return null}function W(ie,re,J,ce,G){for(var Z=[],fe=0;fe<G;fe++){var se=fe,ve=$(se,ie,re,J,ce);ve!==null&&Z.push(ve)}return Z}function Y(ie,re){for(var J=ie.getPropertiesMetadata(re),ce=[],G=Object.keys(J),Z=0,fe=G;Z<fe.length;Z++){var se=fe[Z],ve=J[se],ae=ne(J[se]),j=ae.targetName||se,de=ae.inject||ae.multiInject,ke=new M.Target(E.TargetTypeEnum.ClassProperty,j,de);ke.metadata=ve,ce.push(ke)}var he=Object.getPrototypeOf(re.prototype).constructor;if(he!==Object){var Oe=Y(ie,he);ce=B(B([],ce),Oe)}return ce}function ee(ie,re){var J=Object.getPrototypeOf(re.prototype).constructor;if(J!==Object){var ce=k.getFunctionName(J),G=V(ie,ce,J,!0),Z=G.map(function(ve){return ve.metadata.filter(function(ae){return ae.key===A.UNMANAGED_TAG})}),fe=[].concat.apply([],Z).length,se=G.length-fe;return se>0?se:ee(ie,J)}else return 0}R.getBaseClassDependencyCount=ee;function ne(ie){var re={};return ie.forEach(function(J){re[J.key.toString()]=J.value}),{inject:re[A.INJECT_TAG],multiInject:re[A.MULTI_INJECT_TAG],targetName:re[A.NAME_TAG],unmanaged:re[A.UNMANAGED_TAG]}}},fbvF:function(ge,R,h){(function(B,p){ge.exports=p()})(this,function(){"use strict";var B=function(Ie){return Ie instanceof Uint8Array||Ie instanceof Uint16Array||Ie instanceof Uint32Array||Ie instanceof Int8Array||Ie instanceof Int16Array||Ie instanceof Int32Array||Ie instanceof Float32Array||Ie instanceof Float64Array||Ie instanceof Uint8ClampedArray},p=function(Ie,gt){for(var rn=Object.keys(gt),Jt=0;Jt<rn.length;++Jt)Ie[rn[Jt]]=gt[rn[Jt]];return Ie},S=`
`;function E(we){return typeof atob!="undefined"?atob(we):"base64:"+we}function A(we){var Ie=new Error("(regl) "+we);throw console.error(Ie),Ie}function k(we,Ie){we||A(Ie)}function M(we){return we?": "+we:""}function U(we,Ie,gt){we in Ie||A("unknown parameter ("+we+")"+M(gt)+". possible values: "+Object.keys(Ie).join())}function V(we,Ie){B(we)||A("invalid parameter type"+M(Ie)+". must be a typed array")}function $(we,Ie){switch(Ie){case"number":return typeof we=="number";case"object":return typeof we=="object";case"string":return typeof we=="string";case"boolean":return typeof we=="boolean";case"function":return typeof we=="function";case"undefined":return typeof we=="undefined";case"symbol":return typeof we=="symbol"}}function W(we,Ie,gt){$(we,Ie)||A("invalid parameter type"+M(gt)+". expected "+Ie+", got "+typeof we)}function Y(we,Ie){we>=0&&(we|0)===we||A("invalid parameter type, ("+we+")"+M(Ie)+". must be a nonnegative integer")}function ee(we,Ie,gt){Ie.indexOf(we)<0&&A("invalid value"+M(gt)+". must be one of: "+Ie)}var ne=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function ie(we){Object.keys(we).forEach(function(Ie){ne.indexOf(Ie)<0&&A('invalid regl constructor argument "'+Ie+'". must be one of '+ne)})}function re(we,Ie){for(we=we+"";we.length<Ie;)we=" "+we;return we}function J(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function ce(we,Ie){this.number=we,this.line=Ie,this.errors=[]}function G(we,Ie,gt){this.file=we,this.line=Ie,this.message=gt}function Z(){var we=new Error,Ie=(we.stack||we).toString(),gt=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Ie);if(gt)return gt[1];var rn=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Ie);return rn?rn[1]:"unknown"}function fe(){var we=new Error,Ie=(we.stack||we).toString(),gt=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Ie);if(gt)return gt[1];var rn=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Ie);return rn?rn[1]:"unknown"}function se(we,Ie){var gt=we.split(`
`),rn=1,Jt=0,wn={unknown:new J,0:new J};wn.unknown.name=wn[0].name=Ie||Z(),wn.unknown.lines.push(new ce(0,""));for(var fn=0;fn<gt.length;++fn){var Wn=gt[fn],wr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Wn);if(wr)switch(wr[1]){case"line":var ur=/(\d+)(\s+\d+)?/.exec(wr[2]);ur&&(rn=ur[1]|0,ur[2]&&(Jt=ur[2]|0,Jt in wn||(wn[Jt]=new J)));break;case"define":var cr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(wr[2]);cr&&(wn[Jt].name=cr[1]?E(cr[2]):cr[2]);break}wn[Jt].lines.push(new ce(rn++,Wn))}return Object.keys(wn).forEach(function(ir){var Ir=wn[ir];Ir.lines.forEach(function(Tr){Ir.index[Tr.number]=Tr})}),wn}function ve(we){var Ie=[];return we.split(`
`).forEach(function(gt){if(!(gt.length<5)){var rn=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(gt);rn?Ie.push(new G(rn[1]|0,rn[2]|0,rn[3].trim())):gt.length>0&&Ie.push(new G("unknown",0,gt))}}),Ie}function ae(we,Ie){Ie.forEach(function(gt){var rn=we[gt.file];if(rn){var Jt=rn.index[gt.line];if(Jt){Jt.errors.push(gt),rn.hasErrors=!0;return}}we.unknown.hasErrors=!0,we.unknown.lines[0].errors.push(gt)})}function j(we,Ie,gt,rn,Jt){if(!we.getShaderParameter(Ie,we.COMPILE_STATUS)){var wn=we.getShaderInfoLog(Ie),fn=rn===we.FRAGMENT_SHADER?"fragment":"vertex";je(gt,"string",fn+" shader source must be a string",Jt);var Wn=se(gt,Jt),wr=ve(wn);ae(Wn,wr),Object.keys(Wn).forEach(function(ur){var cr=Wn[ur];if(!cr.hasErrors)return;var ir=[""],Ir=[""];function Tr(pr,vn){ir.push(pr),Ir.push(vn||"")}Tr("file number "+ur+": "+cr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),cr.lines.forEach(function(pr){if(pr.errors.length>0){Tr(re(pr.number,4)+"|  ","background-color:yellow; font-weight:bold"),Tr(pr.line+S,"color:red; background-color:yellow; font-weight:bold");var vn=0;pr.errors.forEach(function(cn){var fr=cn.message,Lr=/^\s*'(.*)'\s*:\s*(.*)$/.exec(fr);if(Lr){var kn=Lr[1];switch(fr=Lr[2],kn){case"assign":kn="=";break}vn=Math.max(pr.line.indexOf(kn,vn),0)}else vn=0;Tr(re("| ",6)),Tr(re("^^^",vn+3)+S,"font-weight:bold"),Tr(re("| ",6)),Tr(fr+S,"font-weight:bold")}),Tr(re("| ",6)+S)}else Tr(re(pr.number,4)+"|  "),Tr(pr.line+S,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ir[0]=ir.join("%c"),console.log.apply(console,Ir)):console.log(ir.join(""))}),k.raise("Error compiling "+fn+" shader, "+Wn[0].name)}}function de(we,Ie,gt,rn,Jt){if(!we.getProgramParameter(Ie,we.LINK_STATUS)){var wn=we.getProgramInfoLog(Ie),fn=se(gt,Jt),Wn=se(rn,Jt),wr='Error linking program with vertex shader, "'+Wn[0].name+'", and fragment shader "'+fn[0].name+'"';typeof document!="undefined"?console.log("%c"+wr+S+"%c"+wn,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(wr+S+wn),k.raise(wr)}}function ke(we){we._commandRef=Z()}function he(we,Ie,gt,rn){ke(we);function Jt(wr){return wr?rn.id(wr):0}we._fragId=Jt(we.static.frag),we._vertId=Jt(we.static.vert);function wn(wr,ur){Object.keys(ur).forEach(function(cr){wr[rn.id(cr)]=!0})}var fn=we._uniformSet={};wn(fn,Ie.static),wn(fn,Ie.dynamic);var Wn=we._attributeSet={};wn(Wn,gt.static),wn(Wn,gt.dynamic),we._hasCount="count"in we.static||"count"in we.dynamic||"elements"in we.static||"elements"in we.dynamic}function Oe(we,Ie){var gt=fe();A(we+" in command "+(Ie||Z())+(gt==="unknown"?"":" called from "+gt))}function We(we,Ie,gt){we||Oe(Ie,gt||Z())}function D(we,Ie,gt,rn){we in Ie||Oe("unknown parameter ("+we+")"+M(gt)+". possible values: "+Object.keys(Ie).join(),rn||Z())}function je(we,Ie,gt,rn){$(we,Ie)||Oe("invalid parameter type"+M(gt)+". expected "+Ie+", got "+typeof we,rn||Z())}function pt(we){we()}function nt(we,Ie,gt){we.texture?ee(we.texture._texture.internalformat,Ie,"unsupported texture format for attachment"):ee(we.renderbuffer._renderbuffer.format,gt,"unsupported renderbuffer format for attachment")}var Lt=33071,Gt=9728,$e=9984,jt=9985,Be=9986,pe=9987,un=5120,ln=5121,Fn=5122,Ft=5123,Pn=5124,lr=5125,hn=5126,On=32819,jn=32820,Dn=33635,ft=34042,Ut=36193,ct={};ct[un]=ct[ln]=1,ct[Fn]=ct[Ft]=ct[Ut]=ct[Dn]=ct[On]=ct[jn]=2,ct[Pn]=ct[lr]=ct[hn]=ct[ft]=4;function Ct(we,Ie){return we===jn||we===On||we===Dn?2:we===ft?4:ct[we]*Ie}function kt(we){return!(we&we-1)&&!!we}function yt(we,Ie,gt){var rn,Jt=Ie.width,wn=Ie.height,fn=Ie.channels;k(Jt>0&&Jt<=gt.maxTextureSize&&wn>0&&wn<=gt.maxTextureSize,"invalid texture shape"),(we.wrapS!==Lt||we.wrapT!==Lt)&&k(kt(Jt)&&kt(wn),"incompatible wrap mode for texture, both width and height must be power of 2"),Ie.mipmask===1?Jt!==1&&wn!==1&&k(we.minFilter!==$e&&we.minFilter!==Be&&we.minFilter!==jt&&we.minFilter!==pe,"min filter requires mipmap"):(k(kt(Jt)&&kt(wn),"texture must be a square power of 2 to support mipmapping"),k(Ie.mipmask===(Jt<<1)-1,"missing or incomplete mipmap data")),Ie.type===hn&&(gt.extensions.indexOf("oes_texture_float_linear")<0&&k(we.minFilter===Gt&&we.magFilter===Gt,"filter not supported, must enable oes_texture_float_linear"),k(!we.genMipmaps,"mipmap generation not supported with float textures"));var Wn=Ie.images;for(rn=0;rn<16;++rn)if(Wn[rn]){var wr=Jt>>rn,ur=wn>>rn;k(Ie.mipmask&1<<rn,"missing mipmap data");var cr=Wn[rn];if(k(cr.width===wr&&cr.height===ur,"invalid shape for mip images"),k(cr.format===Ie.format&&cr.internalformat===Ie.internalformat&&cr.type===Ie.type,"incompatible type for mip image"),!cr.compressed)if(cr.data){var ir=Math.ceil(Ct(cr.type,fn)*wr/cr.unpackAlignment)*cr.unpackAlignment;k(cr.data.byteLength===ir*ur,"invalid data for image, buffer size is inconsistent with image format")}else cr.element||cr.copy}else we.genMipmaps||k((Ie.mipmask&1<<rn)==0,"extra mipmap data");Ie.compressed&&k(!we.genMipmaps,"mipmap generation for compressed images not supported")}function tt(we,Ie,gt,rn){var Jt=we.width,wn=we.height,fn=we.channels;k(Jt>0&&Jt<=rn.maxTextureSize&&wn>0&&wn<=rn.maxTextureSize,"invalid texture shape"),k(Jt===wn,"cube map must be square"),k(Ie.wrapS===Lt&&Ie.wrapT===Lt,"wrap mode not supported by cube map");for(var Wn=0;Wn<gt.length;++Wn){var wr=gt[Wn];k(wr.width===Jt&&wr.height===wn,"inconsistent cube map face shape"),Ie.genMipmaps&&(k(!wr.compressed,"can not generate mipmap for compressed textures"),k(wr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var ur=wr.images,cr=0;cr<16;++cr){var ir=ur[cr];if(ir){var Ir=Jt>>cr,Tr=wn>>cr;k(wr.mipmask&1<<cr,"missing mipmap data"),k(ir.width===Ir&&ir.height===Tr,"invalid shape for mip images"),k(ir.format===we.format&&ir.internalformat===we.internalformat&&ir.type===we.type,"incompatible type for mip image"),ir.compressed||(ir.data?k(ir.data.byteLength===Ir*Tr*Math.max(Ct(ir.type,fn),ir.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):ir.element||ir.copy)}}}}var I=p(k,{optional:pt,raise:A,commandRaise:Oe,command:We,parameter:U,commandParameter:D,constructor:ie,type:W,commandType:je,isTypedArray:V,nni:Y,oneOf:ee,shaderError:j,linkError:de,callSite:fe,saveCommandRef:ke,saveDrawInfo:he,framebufferFormat:nt,guessCommand:Z,texture2D:yt,textureCube:tt}),Mn=0,dt=0,vt=5,Bt=6;function me(we,Ie){this.id=Mn++,this.type=we,this.data=Ie}function ue(we){return we.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Re(we){if(we.length===0)return[];var Ie=we.charAt(0),gt=we.charAt(we.length-1);if(we.length>1&&Ie===gt&&(Ie==='"'||Ie==="'"))return['"'+ue(we.substr(1,we.length-2))+'"'];var rn=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(we);if(rn)return Re(we.substr(0,rn.index)).concat(Re(rn[1])).concat(Re(we.substr(rn.index+rn[0].length)));var Jt=we.split(".");if(Jt.length===1)return['"'+ue(we)+'"'];for(var wn=[],fn=0;fn<Jt.length;++fn)wn=wn.concat(Re(Jt[fn]));return wn}function Rt(we){return"["+Re(we).join("][")+"]"}function Kt(we,Ie){return new me(we,Rt(Ie+""))}function Bn(we){return typeof we=="function"&&!we._reglType||we instanceof me}function Nr(we,Ie){if(typeof we=="function")return new me(dt,we);if(typeof we=="number"||typeof we=="boolean")return new me(vt,we);if(Array.isArray(we))return new me(Bt,we.map(function(gt,rn){return Nr(gt,Ie+"["+rn+"]")}));if(we instanceof me)return we;I(!1,"invalid option type in uniform "+Ie)}var Rn={DynamicVariable:me,define:Kt,isDynamic:Bn,unbox:Nr,accessor:Rt},Cr={next:typeof requestAnimationFrame=="function"?function(we){return requestAnimationFrame(we)}:function(we){return setTimeout(we,16)},cancel:typeof cancelAnimationFrame=="function"?function(we){return cancelAnimationFrame(we)}:clearTimeout},tr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function jr(){var we={"":0},Ie=[""];return{id:function(rn){var Jt=we[rn];return Jt||(Jt=we[rn]=Ie.length,Ie.push(rn),Jt)},str:function(rn){return Ie[rn]}}}function zr(we,Ie,gt){var rn=document.createElement("canvas");p(rn.style,{border:0,margin:0,padding:0,top:0,left:0}),we.appendChild(rn),we===document.body&&(rn.style.position="absolute",p(we.style,{margin:0,padding:0}));function Jt(){var Wn=window.innerWidth,wr=window.innerHeight;if(we!==document.body){var ur=we.getBoundingClientRect();Wn=ur.right-ur.left,wr=ur.bottom-ur.top}rn.width=gt*Wn,rn.height=gt*wr,p(rn.style,{width:Wn+"px",height:wr+"px"})}var wn;we!==document.body&&typeof ResizeObserver=="function"?(wn=new ResizeObserver(function(){setTimeout(Jt)}),wn.observe(we)):window.addEventListener("resize",Jt,!1);function fn(){wn?wn.disconnect():window.removeEventListener("resize",Jt),we.removeChild(rn)}return Jt(),{canvas:rn,onDestroy:fn}}function Ua(we,Ie){function gt(rn){try{return we.getContext(rn,Ie)}catch(Jt){return null}}return gt("webgl")||gt("experimental-webgl")||gt("webgl-experimental")}function oa(we){return typeof we.nodeName=="string"&&typeof we.appendChild=="function"&&typeof we.getBoundingClientRect=="function"}function Za(we){return typeof we.drawArrays=="function"||typeof we.drawElements=="function"}function ba(we){return typeof we=="string"?we.split():(I(Array.isArray(we),"invalid extension array"),we)}function Pa(we){return typeof we=="string"?(I(typeof document!="undefined","not supported outside of DOM"),document.querySelector(we)):we}function ri(we){var Ie=we||{},gt,rn,Jt,wn,fn={},Wn=[],wr=[],ur=typeof window=="undefined"?1:window.devicePixelRatio,cr=!1,ir=function(vn){vn&&I.raise(vn)},Ir=function(){};if(typeof Ie=="string"?(I(typeof document!="undefined","selector queries only supported in DOM enviroments"),gt=document.querySelector(Ie),I(gt,"invalid query string for element")):typeof Ie=="object"?oa(Ie)?gt=Ie:Za(Ie)?(wn=Ie,Jt=wn.canvas):(I.constructor(Ie),"gl"in Ie?wn=Ie.gl:"canvas"in Ie?Jt=Pa(Ie.canvas):"container"in Ie&&(rn=Pa(Ie.container)),"attributes"in Ie&&(fn=Ie.attributes,I.type(fn,"object","invalid context attributes")),"extensions"in Ie&&(Wn=ba(Ie.extensions)),"optionalExtensions"in Ie&&(wr=ba(Ie.optionalExtensions)),"onDone"in Ie&&(I.type(Ie.onDone,"function","invalid or missing onDone callback"),ir=Ie.onDone),"profile"in Ie&&(cr=!!Ie.profile),"pixelRatio"in Ie&&(ur=+Ie.pixelRatio,I(ur>0,"invalid pixel ratio"))):I.raise("invalid arguments to regl"),gt&&(gt.nodeName.toLowerCase()==="canvas"?Jt=gt:rn=gt),!wn){if(!Jt){I(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Tr=zr(rn||document.body,ir,ur);if(!Tr)return null;Jt=Tr.canvas,Ir=Tr.onDestroy}fn.premultipliedAlpha===void 0&&(fn.premultipliedAlpha=!0),wn=Ua(Jt,fn)}return wn?{gl:wn,canvas:Jt,container:rn,extensions:Wn,optionalExtensions:wr,pixelRatio:ur,profile:cr,onDone:ir,onDestroy:Ir}:(Ir(),ir("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function li(we,Ie){var gt={};function rn(fn){I.type(fn,"string","extension name must be string");var Wn=fn.toLowerCase(),wr;try{wr=gt[Wn]=we.getExtension(Wn)}catch(ur){}return!!wr}for(var Jt=0;Jt<Ie.extensions.length;++Jt){var wn=Ie.extensions[Jt];if(!rn(wn))return Ie.onDestroy(),Ie.onDone('"'+wn+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ie.optionalExtensions.forEach(rn),{extensions:gt,restore:function(){Object.keys(gt).forEach(function(Wn){if(gt[Wn]&&!rn(Wn))throw new Error("(regl): error restoring extension "+Wn)})}}}function ka(we,Ie){for(var gt=Array(we),rn=0;rn<we;++rn)gt[rn]=Ie(rn);return gt}var ai=5120,Qa=5121,aa=5122,Gi=5123,mo=5124,sa=5125,yi=5126;function Io(we){for(var Ie=16;Ie<=1<<28;Ie*=16)if(we<=Ie)return Ie;return 0}function Pi(we){var Ie,gt;return Ie=(we>65535)<<4,we>>>=Ie,gt=(we>255)<<3,we>>>=gt,Ie|=gt,gt=(we>15)<<2,we>>>=gt,Ie|=gt,gt=(we>3)<<1,we>>>=gt,Ie|=gt,Ie|we>>1}function ao(){var we=ka(8,function(){return[]});function Ie(wn){var fn=Io(wn),Wn=we[Pi(fn)>>2];return Wn.length>0?Wn.pop():new ArrayBuffer(fn)}function gt(wn){we[Pi(wn.byteLength)>>2].push(wn)}function rn(wn,fn){var Wn=null;switch(wn){case ai:Wn=new Int8Array(Ie(fn),0,fn);break;case Qa:Wn=new Uint8Array(Ie(fn),0,fn);break;case aa:Wn=new Int16Array(Ie(2*fn),0,fn);break;case Gi:Wn=new Uint16Array(Ie(2*fn),0,fn);break;case mo:Wn=new Int32Array(Ie(4*fn),0,fn);break;case sa:Wn=new Uint32Array(Ie(4*fn),0,fn);break;case yi:Wn=new Float32Array(Ie(4*fn),0,fn);break;default:return null}return Wn.length!==fn?Wn.subarray(0,fn):Wn}function Jt(wn){gt(wn.buffer)}return{alloc:Ie,free:gt,allocType:rn,freeType:Jt}}var ki=ao();ki.zero=ao();var ot=3408,It=3410,Ne=3411,St=3412,Ve=3413,Xt=3414,gn=3415,pn=33901,en=33902,In=3379,$r=3386,da=34921,Oa=36347,Ka=36348,bi=35661,_a=35660,ti=34930,tn=36349,mn=34076,nr=34024,or=7936,Zr=7937,Vi=7938,Da=35724,Ea=34047,ta=36063,ha=34852,Kr=3553,qi=34067,So=34069,Js=33984,Ro=6408,Zo=5126,Ss=5121,gs=36160,ou=36053,As=36064,Ms=16384,Vo=function(Ie,gt){var rn=1;gt.ext_texture_filter_anisotropic&&(rn=Ie.getParameter(Ea));var Jt=1,wn=1;gt.webgl_draw_buffers&&(Jt=Ie.getParameter(ha),wn=Ie.getParameter(ta));var fn=!!gt.oes_texture_float;if(fn){var Wn=Ie.createTexture();Ie.bindTexture(Kr,Wn),Ie.texImage2D(Kr,0,Ro,1,1,0,Ro,Zo,null);var wr=Ie.createFramebuffer();if(Ie.bindFramebuffer(gs,wr),Ie.framebufferTexture2D(gs,As,Kr,Wn,0),Ie.bindTexture(Kr,null),Ie.checkFramebufferStatus(gs)!==ou)fn=!1;else{Ie.viewport(0,0,1,1),Ie.clearColor(1,0,0,1),Ie.clear(Ms);var ur=ki.allocType(Zo,4);Ie.readPixels(0,0,1,1,Ro,Zo,ur),Ie.getError()?fn=!1:(Ie.deleteFramebuffer(wr),Ie.deleteTexture(Wn),fn=ur[0]===1),ki.freeType(ur)}}var cr=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ir=!0;if(!cr){var Ir=Ie.createTexture(),Tr=ki.allocType(Ss,36);Ie.activeTexture(Js),Ie.bindTexture(qi,Ir),Ie.texImage2D(So,0,Ro,3,3,0,Ro,Ss,Tr),ki.freeType(Tr),Ie.bindTexture(qi,null),Ie.deleteTexture(Ir),ir=!Ie.getError()}return{colorBits:[Ie.getParameter(It),Ie.getParameter(Ne),Ie.getParameter(St),Ie.getParameter(Ve)],depthBits:Ie.getParameter(Xt),stencilBits:Ie.getParameter(gn),subpixelBits:Ie.getParameter(ot),extensions:Object.keys(gt).filter(function(pr){return!!gt[pr]}),maxAnisotropic:rn,maxDrawbuffers:Jt,maxColorAttachments:wn,pointSizeDims:Ie.getParameter(pn),lineWidthDims:Ie.getParameter(en),maxViewportDims:Ie.getParameter($r),maxCombinedTextureUnits:Ie.getParameter(bi),maxCubeMapSize:Ie.getParameter(mn),maxRenderbufferSize:Ie.getParameter(nr),maxTextureUnits:Ie.getParameter(ti),maxTextureSize:Ie.getParameter(In),maxAttributes:Ie.getParameter(da),maxVertexUniforms:Ie.getParameter(Oa),maxVertexTextureUnits:Ie.getParameter(_a),maxVaryingVectors:Ie.getParameter(Ka),maxFragmentUniforms:Ie.getParameter(tn),glsl:Ie.getParameter(Da),renderer:Ie.getParameter(Zr),vendor:Ie.getParameter(or),version:Ie.getParameter(Vi),readFloat:fn,npotTextureCube:ir}};function us(we){return!!we&&typeof we=="object"&&Array.isArray(we.shape)&&Array.isArray(we.stride)&&typeof we.offset=="number"&&we.shape.length===we.stride.length&&(Array.isArray(we.data)||B(we.data))}var Ki=function(Ie){return Object.keys(Ie).map(function(gt){return Ie[gt]})},Eu={shape:uu,flatten:Vl};function su(we,Ie,gt){for(var rn=0;rn<Ie;++rn)gt[rn]=we[rn]}function Zs(we,Ie,gt,rn){for(var Jt=0,wn=0;wn<Ie;++wn)for(var fn=we[wn],Wn=0;Wn<gt;++Wn)rn[Jt++]=fn[Wn]}function Is(we,Ie,gt,rn,Jt,wn){for(var fn=wn,Wn=0;Wn<Ie;++Wn)for(var wr=we[Wn],ur=0;ur<gt;++ur)for(var cr=wr[ur],ir=0;ir<rn;++ir)Jt[fn++]=cr[ir]}function gl(we,Ie,gt,rn,Jt){for(var wn=1,fn=gt+1;fn<Ie.length;++fn)wn*=Ie[fn];var Wn=Ie[gt];if(Ie.length-gt==4){var wr=Ie[gt+1],ur=Ie[gt+2],cr=Ie[gt+3];for(fn=0;fn<Wn;++fn)Is(we[fn],wr,ur,cr,rn,Jt),Jt+=wn}else for(fn=0;fn<Wn;++fn)gl(we[fn],Ie,gt+1,rn,Jt),Jt+=wn}function Vl(we,Ie,gt,rn){var Jt=1;if(Ie.length)for(var wn=0;wn<Ie.length;++wn)Jt*=Ie[wn];else Jt=0;var fn=rn||ki.allocType(gt,Jt);switch(Ie.length){case 0:break;case 1:su(we,Ie[0],fn);break;case 2:Zs(we,Ie[0],Ie[1],fn);break;case 3:Is(we,Ie[0],Ie[1],Ie[2],fn,0);break;default:gl(we,Ie,0,fn,0)}return fn}function uu(we){for(var Ie=[],gt=we;gt.length;gt=gt[0])Ie.push(gt.length);return Ie}var Rs={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},el=5120,tl=5122,nl=5124,Hl=5121,Ts=5123,Wl=5125,Ou=5126,Nu=5126,Qs={int8:el,int16:tl,int32:nl,uint8:Hl,uint16:Ts,uint32:Wl,float:Ou,float32:Nu},rl=35048,sf=35040,ml={dynamic:rl,stream:sf,static:35044},al=Eu.flatten,pc=Eu.shape,Et=35044,mt=35040,wt=5121,$t=5126,_t=[];_t[5120]=1,_t[5122]=2,_t[5124]=4,_t[5121]=1,_t[5123]=2,_t[5125]=4,_t[5126]=4;function xn(we){return Rs[Object.prototype.toString.call(we)]|0}function Ln(we,Ie){for(var gt=0;gt<Ie.length;++gt)we[gt]=Ie[gt]}function Yn(we,Ie,gt,rn,Jt,wn,fn){for(var Wn=0,wr=0;wr<gt;++wr)for(var ur=0;ur<rn;++ur)we[Wn++]=Ie[Jt*wr+wn*ur+fn]}function Ar(we,Ie,gt,rn){var Jt=0,wn={};function fn(vn){this.id=Jt++,this.buffer=we.createBuffer(),this.type=vn,this.usage=Et,this.byteLength=0,this.dimension=1,this.dtype=wt,this.persistentData=null,gt.profile&&(this.stats={size:0})}fn.prototype.bind=function(){we.bindBuffer(this.type,this.buffer)},fn.prototype.destroy=function(){Ir(this)};var Wn=[];function wr(vn,cn){var fr=Wn.pop();return fr||(fr=new fn(vn)),fr.bind(),ir(fr,cn,mt,0,1,!1),fr}function ur(vn){Wn.push(vn)}function cr(vn,cn,fr){vn.byteLength=cn.byteLength,we.bufferData(vn.type,cn,fr)}function ir(vn,cn,fr,Lr,kn,Vr){var $n;if(vn.usage=fr,Array.isArray(cn)){if(vn.dtype=Lr||$t,cn.length>0){var Jn;if(Array.isArray(cn[0])){$n=pc(cn);for(var Qn=1,hr=1;hr<$n.length;++hr)Qn*=$n[hr];vn.dimension=Qn,Jn=al(cn,$n,vn.dtype),cr(vn,Jn,fr),Vr?vn.persistentData=Jn:ki.freeType(Jn)}else if(typeof cn[0]=="number"){vn.dimension=kn;var Qr=ki.allocType(vn.dtype,cn.length);Ln(Qr,cn),cr(vn,Qr,fr),Vr?vn.persistentData=Qr:ki.freeType(Qr)}else B(cn[0])?(vn.dimension=cn[0].length,vn.dtype=Lr||xn(cn[0])||$t,Jn=al(cn,[cn.length,cn[0].length],vn.dtype),cr(vn,Jn,fr),Vr?vn.persistentData=Jn:ki.freeType(Jn)):I.raise("invalid buffer data")}}else if(B(cn))vn.dtype=Lr||xn(cn),vn.dimension=kn,cr(vn,cn,fr),Vr&&(vn.persistentData=new Uint8Array(new Uint8Array(cn.buffer)));else if(us(cn)){$n=cn.shape;var wa=cn.stride,Pr=cn.offset,mr=0,Un=0,pa=0,Wa=0;$n.length===1?(mr=$n[0],Un=1,pa=wa[0],Wa=0):$n.length===2?(mr=$n[0],Un=$n[1],pa=wa[0],Wa=wa[1]):I.raise("invalid shape"),vn.dtype=Lr||xn(cn.data)||$t,vn.dimension=Un;var Ur=ki.allocType(vn.dtype,mr*Un);Yn(Ur,cn.data,mr,Un,pa,Wa,Pr),cr(vn,Ur,fr),Vr?vn.persistentData=Ur:ki.freeType(Ur)}else cn instanceof ArrayBuffer?(vn.dtype=wt,vn.dimension=kn,cr(vn,cn,fr),Vr&&(vn.persistentData=new Uint8Array(new Uint8Array(cn)))):I.raise("invalid buffer data")}function Ir(vn){Ie.bufferCount--,rn(vn);var cn=vn.buffer;I(cn,"buffer must not be deleted already"),we.deleteBuffer(cn),vn.buffer=null,delete wn[vn.id]}function Tr(vn,cn,fr,Lr){Ie.bufferCount++;var kn=new fn(cn);wn[kn.id]=kn;function Vr(Qn){var hr=Et,Qr=null,wa=0,Pr=0,mr=1;return Array.isArray(Qn)||B(Qn)||us(Qn)||Qn instanceof ArrayBuffer?Qr=Qn:typeof Qn=="number"?wa=Qn|0:Qn&&(I.type(Qn,"object","buffer arguments must be an object, a number or an array"),"data"in Qn&&(I(Qr===null||Array.isArray(Qr)||B(Qr)||us(Qr),"invalid data for buffer"),Qr=Qn.data),"usage"in Qn&&(I.parameter(Qn.usage,ml,"invalid buffer usage"),hr=ml[Qn.usage]),"type"in Qn&&(I.parameter(Qn.type,Qs,"invalid buffer type"),Pr=Qs[Qn.type]),"dimension"in Qn&&(I.type(Qn.dimension,"number","invalid dimension"),mr=Qn.dimension|0),"length"in Qn&&(I.nni(wa,"buffer length must be a nonnegative integer"),wa=Qn.length|0)),kn.bind(),Qr?ir(kn,Qr,hr,Pr,mr,Lr):(wa&&we.bufferData(kn.type,wa,hr),kn.dtype=Pr||wt,kn.usage=hr,kn.dimension=mr,kn.byteLength=wa),gt.profile&&(kn.stats.size=kn.byteLength*_t[kn.dtype]),Vr}function $n(Qn,hr){I(hr+Qn.byteLength<=kn.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Qn.byteLength+" starting from offset "+hr+" to a buffer of size "+kn.byteLength),we.bufferSubData(kn.type,hr,Qn)}function Jn(Qn,hr){var Qr=(hr||0)|0,wa;if(kn.bind(),B(Qn)||Qn instanceof ArrayBuffer)$n(Qn,Qr);else if(Array.isArray(Qn)){if(Qn.length>0)if(typeof Qn[0]=="number"){var Pr=ki.allocType(kn.dtype,Qn.length);Ln(Pr,Qn),$n(Pr,Qr),ki.freeType(Pr)}else if(Array.isArray(Qn[0])||B(Qn[0])){wa=pc(Qn);var mr=al(Qn,wa,kn.dtype);$n(mr,Qr),ki.freeType(mr)}else I.raise("invalid buffer data")}else if(us(Qn)){wa=Qn.shape;var Un=Qn.stride,pa=0,Wa=0,Ur=0,Xa=0;wa.length===1?(pa=wa[0],Wa=1,Ur=Un[0],Xa=0):wa.length===2?(pa=wa[0],Wa=wa[1],Ur=Un[0],Xa=Un[1]):I.raise("invalid shape");var xa=Array.isArray(Qn.data)?kn.dtype:xn(Qn.data),$a=ki.allocType(xa,pa*Wa);Yn($a,Qn.data,pa,Wa,Ur,Xa,Qn.offset),$n($a,Qr),ki.freeType($a)}else I.raise("invalid data for buffer subdata");return Vr}return fr||Vr(vn),Vr._reglType="buffer",Vr._buffer=kn,Vr.subdata=Jn,gt.profile&&(Vr.stats=kn.stats),Vr.destroy=function(){Ir(kn)},Vr}function pr(){Ki(wn).forEach(function(vn){vn.buffer=we.createBuffer(),we.bindBuffer(vn.type,vn.buffer),we.bufferData(vn.type,vn.persistentData||vn.byteLength,vn.usage)})}return gt.profile&&(Ie.getTotalBufferSize=function(){var vn=0;return Object.keys(wn).forEach(function(cn){vn+=wn[cn].stats.size}),vn}),{create:Tr,createStream:wr,destroyStream:ur,clear:function(){Ki(wn).forEach(Ir),Wn.forEach(Ir)},getBuffer:function(cn){return cn&&cn._buffer instanceof fn?cn._buffer:null},restore:pr,_initBuffer:ir}}var er=0,Mr=0,rr=1,Rr=1,Dr=4,qr=4,qa={points:er,point:Mr,lines:rr,line:Rr,triangles:Dr,triangle:qr,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Gr=0,K=1,P=4,H=5120,X=5121,le=5122,be=5123,xe=5124,Ge=5125,it=34963,bt=35040,bn=35044;function _n(we,Ie,gt,rn){var Jt={},wn=0,fn={uint8:X,uint16:be};Ie.oes_element_index_uint&&(fn.uint32=Ge);function Wn(pr){this.id=wn++,Jt[this.id]=this,this.buffer=pr,this.primType=P,this.vertCount=0,this.type=0}Wn.prototype.bind=function(){this.buffer.bind()};var wr=[];function ur(pr){var vn=wr.pop();return vn||(vn=new Wn(gt.create(null,it,!0,!1)._buffer)),ir(vn,pr,bt,-1,-1,0,0),vn}function cr(pr){wr.push(pr)}function ir(pr,vn,cn,fr,Lr,kn,Vr){pr.buffer.bind();var $n;if(vn){var Jn=Vr;!Vr&&(!B(vn)||us(vn)&&!B(vn.data))&&(Jn=Ie.oes_element_index_uint?Ge:be),gt._initBuffer(pr.buffer,vn,cn,Jn,3)}else we.bufferData(it,kn,cn),pr.buffer.dtype=$n||X,pr.buffer.usage=cn,pr.buffer.dimension=3,pr.buffer.byteLength=kn;if($n=Vr,!Vr){switch(pr.buffer.dtype){case X:case H:$n=X;break;case be:case le:$n=be;break;case Ge:case xe:$n=Ge;break;default:I.raise("unsupported type for element array")}pr.buffer.dtype=$n}pr.type=$n,I($n!==Ge||!!Ie.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Qn=Lr;Qn<0&&(Qn=pr.buffer.byteLength,$n===be?Qn>>=1:$n===Ge&&(Qn>>=2)),pr.vertCount=Qn;var hr=fr;if(fr<0){hr=P;var Qr=pr.buffer.dimension;Qr===1&&(hr=Gr),Qr===2&&(hr=K),Qr===3&&(hr=P)}pr.primType=hr}function Ir(pr){rn.elementsCount--,I(pr.buffer!==null,"must not double destroy elements"),delete Jt[pr.id],pr.buffer.destroy(),pr.buffer=null}function Tr(pr,vn){var cn=gt.create(null,it,!0),fr=new Wn(cn._buffer);rn.elementsCount++;function Lr(kn){if(!kn)cn(),fr.primType=P,fr.vertCount=0,fr.type=X;else if(typeof kn=="number")cn(kn),fr.primType=P,fr.vertCount=kn|0,fr.type=X;else{var Vr=null,$n=bn,Jn=-1,Qn=-1,hr=0,Qr=0;Array.isArray(kn)||B(kn)||us(kn)?Vr=kn:(I.type(kn,"object","invalid arguments for elements"),"data"in kn&&(Vr=kn.data,I(Array.isArray(Vr)||B(Vr)||us(Vr),"invalid data for element buffer")),"usage"in kn&&(I.parameter(kn.usage,ml,"invalid element buffer usage"),$n=ml[kn.usage]),"primitive"in kn&&(I.parameter(kn.primitive,qa,"invalid element buffer primitive"),Jn=qa[kn.primitive]),"count"in kn&&(I(typeof kn.count=="number"&&kn.count>=0,"invalid vertex count for elements"),Qn=kn.count|0),"type"in kn&&(I.parameter(kn.type,fn,"invalid buffer type"),Qr=fn[kn.type]),"length"in kn?hr=kn.length|0:(hr=Qn,Qr===be||Qr===le?hr*=2:(Qr===Ge||Qr===xe)&&(hr*=4))),ir(fr,Vr,$n,Jn,Qn,hr,Qr)}return Lr}return Lr(pr),Lr._reglType="elements",Lr._elements=fr,Lr.subdata=function(kn,Vr){return cn.subdata(kn,Vr),Lr},Lr.destroy=function(){Ir(fr)},Lr}return{create:Tr,createStream:ur,destroyStream:cr,getElements:function(vn){return typeof vn=="function"&&vn._elements instanceof Wn?vn._elements:null},clear:function(){Ki(Jt).forEach(Ir)}}}var Or=new Float32Array(1),Cn=new Uint32Array(Or.buffer),ar=5123;function Ca(we){for(var Ie=ki.allocType(ar,we.length),gt=0;gt<we.length;++gt)if(isNaN(we[gt]))Ie[gt]=65535;else if(we[gt]===Infinity)Ie[gt]=31744;else if(we[gt]===-Infinity)Ie[gt]=64512;else{Or[0]=we[gt];var rn=Cn[0],Jt=rn>>>31<<15,wn=(rn<<1>>>24)-127,fn=rn>>13&(1<<10)-1;if(wn<-24)Ie[gt]=Jt;else if(wn<-14){var Wn=-14-wn;Ie[gt]=Jt+(fn+(1<<10)>>Wn)}else wn>15?Ie[gt]=Jt+31744:Ie[gt]=Jt+(wn+15<<10)+fn}return Ie}function Xr(we){return Array.isArray(we)||B(we)}var Fi=function(Ie){return!(Ie&Ie-1)&&!!Ie},Qo=34467,lo=3553,Ho=34067,Ao=34069,Ia=6408,Ns=6406,Ai=6407,Yi=6409,Ji=6410,yl=32854,bo=32855,ls=36194,wu=32819,xu=32820,qs=33635,Wo=34042,js=6402,$o=34041,jo=35904,il=35906,Ls=36193,Ni=33776,Su=33777,ms=33778,lu=33779,uf=35986,$l=35987,gc=34798,cs=35840,Kl=35841,eu=35842,bl=35843,b=36196,N=5121,te=5123,Ee=5125,Se=5126,_e=10242,Qe=10243,rt=10497,Tt=33071,zt=33648,on=10240,He=10241,Me=9728,Ye=9729,ut=9984,De=9985,Le=9986,et=9987,Qt=33170,yn=4352,Vn=4353,sr=4354,Zn=34046,ia=3317,na=37440,ea=37441,la=37443,si=37444,Ra=33984,ii=[ut,Le,De,et],ma=[0,Yi,Ji,Ai,Ia],fa={};fa[Yi]=fa[Ns]=fa[js]=1,fa[$o]=fa[Ji]=2,fa[Ai]=fa[jo]=3,fa[Ia]=fa[il]=4;function io(we){return"[object "+we+"]"}var _s=io("HTMLCanvasElement"),Xl=io("OffscreenCanvas"),mc=io("CanvasRenderingContext2D"),Jh=io("ImageBitmap"),ip=io("HTMLImageElement"),lf=io("HTMLVideoElement"),Yl=Object.keys(Rs).concat([_s,Xl,mc,Jh,ip,lf]),Cl=[];Cl[N]=1,Cl[Se]=4,Cl[Ls]=2,Cl[te]=2,Cl[Ee]=4;var qo=[];qo[yl]=2,qo[bo]=2,qo[ls]=2,qo[$o]=4,qo[Ni]=.5,qo[Su]=.5,qo[ms]=1,qo[lu]=1,qo[uf]=.5,qo[$l]=1,qo[gc]=1,qo[cs]=.5,qo[Kl]=.25,qo[eu]=.5,qo[bl]=.25,qo[b]=.5;function Jl(we){return Array.isArray(we)&&(we.length===0||typeof we[0]=="number")}function Zh(we){if(!Array.isArray(we))return!1;var Ie=we.length;return!(Ie===0||!Xr(we[0]))}function Zl(we){return Object.prototype.toString.call(we)}function Uf(we){return Zl(we)===_s}function Qh(we){return Zl(we)===Xl}function Vf(we){return Zl(we)===mc}function yc(we){return Zl(we)===Jh}function jd(we){return Zl(we)===ip}function Wg(we){return Zl(we)===lf}function Ld(we){if(!we)return!1;var Ie=Zl(we);return Yl.indexOf(Ie)>=0?!0:Jl(we)||Zh(we)||us(we)}function op(we){return Rs[Object.prototype.toString.call(we)]|0}function ju(we,Ie){var gt=Ie.length;switch(we.type){case N:case te:case Ee:case Se:var rn=ki.allocType(we.type,gt);rn.set(Ie),we.data=rn;break;case Ls:we.data=Ca(Ie);break;default:I.raise("unsupported texture type, must specify a typed array")}}function Hf(we,Ie){return ki.allocType(we.type===Ls?Se:we.type,Ie)}function bc(we,Ie){we.type===Ls?(we.data=Ca(Ie),ki.freeType(Ie)):we.data=Ie}function $g(we,Ie,gt,rn,Jt,wn){for(var fn=we.width,Wn=we.height,wr=we.channels,ur=fn*Wn*wr,cr=Hf(we,ur),ir=0,Ir=0;Ir<Wn;++Ir)for(var Tr=0;Tr<fn;++Tr)for(var pr=0;pr<wr;++pr)cr[ir++]=Ie[gt*Tr+rn*Ir+Jt*pr+wn];bc(we,cr)}function Wf(we,Ie,gt,rn,Jt,wn){var fn;if(typeof qo[we]!="undefined"?fn=qo[we]:fn=fa[we]*Cl[Ie],wn&&(fn*=6),Jt){for(var Wn=0,wr=gt;wr>=1;)Wn+=fn*wr*wr,wr/=2;return Wn}else return fn*gt*rn}function Kg(we,Ie,gt,rn,Jt,wn,fn){var Wn={"don't care":yn,"dont care":yn,nice:sr,fast:Vn},wr={repeat:rt,clamp:Tt,mirror:zt},ur={nearest:Me,linear:Ye},cr=p({mipmap:et,"nearest mipmap nearest":ut,"linear mipmap nearest":De,"nearest mipmap linear":Le,"linear mipmap linear":et},ur),ir={none:0,browser:si},Ir={uint8:N,rgba4:wu,rgb565:qs,"rgb5 a1":xu},Tr={alpha:Ns,luminance:Yi,"luminance alpha":Ji,rgb:Ai,rgba:Ia,rgba4:yl,"rgb5 a1":bo,rgb565:ls},pr={};Ie.ext_srgb&&(Tr.srgb=jo,Tr.srgba=il),Ie.oes_texture_float&&(Ir.float32=Ir.float=Se),Ie.oes_texture_half_float&&(Ir.float16=Ir["half float"]=Ls),Ie.webgl_depth_texture&&(p(Tr,{depth:js,"depth stencil":$o}),p(Ir,{uint16:te,uint32:Ee,"depth stencil":Wo})),Ie.webgl_compressed_texture_s3tc&&p(pr,{"rgb s3tc dxt1":Ni,"rgba s3tc dxt1":Su,"rgba s3tc dxt3":ms,"rgba s3tc dxt5":lu}),Ie.webgl_compressed_texture_atc&&p(pr,{"rgb atc":uf,"rgba atc explicit alpha":$l,"rgba atc interpolated alpha":gc}),Ie.webgl_compressed_texture_pvrtc&&p(pr,{"rgb pvrtc 4bppv1":cs,"rgb pvrtc 2bppv1":Kl,"rgba pvrtc 4bppv1":eu,"rgba pvrtc 2bppv1":bl}),Ie.webgl_compressed_texture_etc1&&(pr["rgb etc1"]=b);var vn=Array.prototype.slice.call(we.getParameter(Qo));Object.keys(pr).forEach(function(at){var En=pr[at];vn.indexOf(En)>=0&&(Tr[at]=En)});var cn=Object.keys(Tr);gt.textureFormats=cn;var fr=[];Object.keys(Tr).forEach(function(at){var En=Tr[at];fr[En]=at});var Lr=[];Object.keys(Ir).forEach(function(at){var En=Ir[at];Lr[En]=at});var kn=[];Object.keys(ur).forEach(function(at){var En=ur[at];kn[En]=at});var Vr=[];Object.keys(cr).forEach(function(at){var En=cr[at];Vr[En]=at});var $n=[];Object.keys(wr).forEach(function(at){var En=wr[at];$n[En]=at});var Jn=cn.reduce(function(at,En){var an=Tr[En];return an===Yi||an===Ns||an===Yi||an===Ji||an===js||an===$o||Ie.ext_srgb&&(an===jo||an===il)?at[an]=an:an===bo||En.indexOf("rgba")>=0?at[an]=Ia:at[an]=Ai,at},{});function Qn(){this.internalformat=Ia,this.format=Ia,this.type=N,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=si,this.width=0,this.height=0,this.channels=0}function hr(at,En){at.internalformat=En.internalformat,at.format=En.format,at.type=En.type,at.compressed=En.compressed,at.premultiplyAlpha=En.premultiplyAlpha,at.flipY=En.flipY,at.unpackAlignment=En.unpackAlignment,at.colorSpace=En.colorSpace,at.width=En.width,at.height=En.height,at.channels=En.channels}function Qr(at,En){if(!(typeof En!="object"||!En)){if("premultiplyAlpha"in En&&(I.type(En.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),at.premultiplyAlpha=En.premultiplyAlpha),"flipY"in En&&(I.type(En.flipY,"boolean","invalid texture flip"),at.flipY=En.flipY),"alignment"in En&&(I.oneOf(En.alignment,[1,2,4,8],"invalid texture unpack alignment"),at.unpackAlignment=En.alignment),"colorSpace"in En&&(I.parameter(En.colorSpace,ir,"invalid colorSpace"),at.colorSpace=ir[En.colorSpace]),"type"in En){var an=En.type;I(Ie.oes_texture_float||!(an==="float"||an==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),I(Ie.oes_texture_half_float||!(an==="half float"||an==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),I(Ie.webgl_depth_texture||!(an==="uint16"||an==="uint32"||an==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),I.parameter(an,Ir,"invalid texture type"),at.type=Ir[an]}var Fr=at.width,Ga=at.height,Je=at.channels,Fe=!1;"shape"in En?(I(Array.isArray(En.shape)&&En.shape.length>=2,"shape must be an array"),Fr=En.shape[0],Ga=En.shape[1],En.shape.length===3&&(Je=En.shape[2],I(Je>0&&Je<=4,"invalid number of channels"),Fe=!0),I(Fr>=0&&Fr<=gt.maxTextureSize,"invalid width"),I(Ga>=0&&Ga<=gt.maxTextureSize,"invalid height")):("radius"in En&&(Fr=Ga=En.radius,I(Fr>=0&&Fr<=gt.maxTextureSize,"invalid radius")),"width"in En&&(Fr=En.width,I(Fr>=0&&Fr<=gt.maxTextureSize,"invalid width")),"height"in En&&(Ga=En.height,I(Ga>=0&&Ga<=gt.maxTextureSize,"invalid height")),"channels"in En&&(Je=En.channels,I(Je>0&&Je<=4,"invalid number of channels"),Fe=!0)),at.width=Fr|0,at.height=Ga|0,at.channels=Je|0;var xt=!1;if("format"in En){var Yt=En.format;I(Ie.webgl_depth_texture||!(Yt==="depth"||Yt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),I.parameter(Yt,Tr,"invalid texture format");var Zt=at.internalformat=Tr[Yt];at.format=Jn[Zt],Yt in Ir&&("type"in En||(at.type=Ir[Yt])),Yt in pr&&(at.compressed=!0),xt=!0}!Fe&&xt?at.channels=fa[at.format]:Fe&&!xt?at.channels!==ma[at.format]&&(at.format=at.internalformat=ma[at.channels]):xt&&Fe&&I(at.channels===fa[at.format],"number of channels inconsistent with specified format")}}function wa(at){we.pixelStorei(na,at.flipY),we.pixelStorei(ea,at.premultiplyAlpha),we.pixelStorei(la,at.colorSpace),we.pixelStorei(ia,at.unpackAlignment)}function Pr(){Qn.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function mr(at,En){var an=null;if(Ld(En)?an=En:En&&(I.type(En,"object","invalid pixel data type"),Qr(at,En),"x"in En&&(at.xOffset=En.x|0),"y"in En&&(at.yOffset=En.y|0),Ld(En.data)&&(an=En.data)),I(!at.compressed||an instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),En.copy){I(!an,"can not specify copy and data field for the same texture");var Fr=Jt.viewportWidth,Ga=Jt.viewportHeight;at.width=at.width||Fr-at.xOffset,at.height=at.height||Ga-at.yOffset,at.needsCopy=!0,I(at.xOffset>=0&&at.xOffset<Fr&&at.yOffset>=0&&at.yOffset<Ga&&at.width>0&&at.width<=Fr&&at.height>0&&at.height<=Ga,"copy texture read out of bounds")}else if(!an)at.width=at.width||1,at.height=at.height||1,at.channels=at.channels||4;else if(B(an))at.channels=at.channels||4,at.data=an,!("type"in En)&&at.type===N&&(at.type=op(an));else if(Jl(an))at.channels=at.channels||4,ju(at,an),at.alignment=1,at.needsFree=!0;else if(us(an)){var Je=an.data;!Array.isArray(Je)&&at.type===N&&(at.type=op(Je));var Fe=an.shape,xt=an.stride,Yt,Zt,Dt,At,Ht,Ze;Fe.length===3?(Dt=Fe[2],Ze=xt[2]):(I(Fe.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Dt=1,Ze=1),Yt=Fe[0],Zt=Fe[1],At=xt[0],Ht=xt[1],at.alignment=1,at.width=Yt,at.height=Zt,at.channels=Dt,at.format=at.internalformat=ma[Dt],at.needsFree=!0,$g(at,Je,At,Ht,Ze,an.offset)}else if(Uf(an)||Qh(an)||Vf(an))Uf(an)||Qh(an)?at.element=an:at.element=an.canvas,at.width=at.element.width,at.height=at.element.height,at.channels=4;else if(yc(an))at.element=an,at.width=an.width,at.height=an.height,at.channels=4;else if(jd(an))at.element=an,at.width=an.naturalWidth,at.height=an.naturalHeight,at.channels=4;else if(Wg(an))at.element=an,at.width=an.videoWidth,at.height=an.videoHeight,at.channels=4;else if(Zh(an)){var Ot=at.width||an[0].length,Ke=at.height||an.length,Vt=at.channels;Xr(an[0][0])?Vt=Vt||an[0][0].length:Vt=Vt||1;for(var qt=Eu.shape(an),Nn=1,Gn=0;Gn<qt.length;++Gn)Nn*=qt[Gn];var Sn=Hf(at,Nn);Eu.flatten(an,qt,"",Sn),bc(at,Sn),at.alignment=1,at.width=Ot,at.height=Ke,at.channels=Vt,at.format=at.internalformat=ma[Vt],at.needsFree=!0}at.type===Se?I(gt.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):at.type===Ls&&I(gt.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Un(at,En,an){var Fr=at.element,Ga=at.data,Je=at.internalformat,Fe=at.format,xt=at.type,Yt=at.width,Zt=at.height;wa(at),Fr?we.texImage2D(En,an,Fe,Fe,xt,Fr):at.compressed?we.compressedTexImage2D(En,an,Je,Yt,Zt,0,Ga):at.needsCopy?(rn(),we.copyTexImage2D(En,an,Fe,at.xOffset,at.yOffset,Yt,Zt,0)):we.texImage2D(En,an,Fe,Yt,Zt,0,Fe,xt,Ga||null)}function pa(at,En,an,Fr,Ga){var Je=at.element,Fe=at.data,xt=at.internalformat,Yt=at.format,Zt=at.type,Dt=at.width,At=at.height;wa(at),Je?we.texSubImage2D(En,Ga,an,Fr,Yt,Zt,Je):at.compressed?we.compressedTexSubImage2D(En,Ga,an,Fr,xt,Dt,At,Fe):at.needsCopy?(rn(),we.copyTexSubImage2D(En,Ga,an,Fr,at.xOffset,at.yOffset,Dt,At)):we.texSubImage2D(En,Ga,an,Fr,Dt,At,Yt,Zt,Fe)}var Wa=[];function Ur(){return Wa.pop()||new Pr}function Xa(at){at.needsFree&&ki.freeType(at.data),Pr.call(at),Wa.push(at)}function xa(){Qn.call(this),this.genMipmaps=!1,this.mipmapHint=yn,this.mipmask=0,this.images=Array(16)}function $a(at,En,an){var Fr=at.images[0]=Ur();at.mipmask=1,Fr.width=at.width=En,Fr.height=at.height=an,Fr.channels=at.channels=4}function Ci(at,En){var an=null;if(Ld(En))an=at.images[0]=Ur(),hr(an,at),mr(an,En),at.mipmask=1;else if(Qr(at,En),Array.isArray(En.mipmap))for(var Fr=En.mipmap,Ga=0;Ga<Fr.length;++Ga)an=at.images[Ga]=Ur(),hr(an,at),an.width>>=Ga,an.height>>=Ga,mr(an,Fr[Ga]),at.mipmask|=1<<Ga;else an=at.images[0]=Ur(),hr(an,at),mr(an,En),at.mipmask=1;hr(at,at.images[0]),at.compressed&&(at.internalformat===Ni||at.internalformat===Su||at.internalformat===ms||at.internalformat===lu)&&I(at.width%4==0&&at.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Co(at,En){for(var an=at.images,Fr=0;Fr<an.length;++Fr){if(!an[Fr])return;Un(an[Fr],En,Fr)}}var Lo=[];function Ya(){var at=Lo.pop()||new xa;Qn.call(at),at.mipmask=0;for(var En=0;En<16;++En)at.images[En]=null;return at}function To(at){for(var En=at.images,an=0;an<En.length;++an)En[an]&&Xa(En[an]),En[an]=null;Lo.push(at)}function eo(){this.minFilter=Me,this.magFilter=Me,this.wrapS=Tt,this.wrapT=Tt,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=yn}function to(at,En){if("min"in En){var an=En.min;I.parameter(an,cr),at.minFilter=cr[an],ii.indexOf(at.minFilter)>=0&&!("faces"in En)&&(at.genMipmaps=!0)}if("mag"in En){var Fr=En.mag;I.parameter(Fr,ur),at.magFilter=ur[Fr]}var Ga=at.wrapS,Je=at.wrapT;if("wrap"in En){var Fe=En.wrap;typeof Fe=="string"?(I.parameter(Fe,wr),Ga=Je=wr[Fe]):Array.isArray(Fe)&&(I.parameter(Fe[0],wr),I.parameter(Fe[1],wr),Ga=wr[Fe[0]],Je=wr[Fe[1]])}else{if("wrapS"in En){var xt=En.wrapS;I.parameter(xt,wr),Ga=wr[xt]}if("wrapT"in En){var Yt=En.wrapT;I.parameter(Yt,wr),Je=wr[Yt]}}if(at.wrapS=Ga,at.wrapT=Je,"anisotropic"in En){var Zt=En.anisotropic;I(typeof Zt=="number"&&Zt>=1&&Zt<=gt.maxAnisotropic,"aniso samples must be between 1 and "),at.anisotropic=En.anisotropic}if("mipmap"in En){var Dt=!1;switch(typeof En.mipmap){case"string":I.parameter(En.mipmap,Wn,"invalid mipmap hint"),at.mipmapHint=Wn[En.mipmap],at.genMipmaps=!0,Dt=!0;break;case"boolean":Dt=at.genMipmaps=En.mipmap;break;case"object":I(Array.isArray(En.mipmap),"invalid mipmap type"),at.genMipmaps=!1,Dt=!0;break;default:I.raise("invalid mipmap type")}Dt&&!("min"in En)&&(at.minFilter=ut)}}function Eo(at,En){we.texParameteri(En,He,at.minFilter),we.texParameteri(En,on,at.magFilter),we.texParameteri(En,_e,at.wrapS),we.texParameteri(En,Qe,at.wrapT),Ie.ext_texture_filter_anisotropic&&we.texParameteri(En,Zn,at.anisotropic),at.genMipmaps&&(we.hint(Qt,at.mipmapHint),we.generateMipmap(En))}var No=0,so={},co=gt.maxTextureUnits,Po=Array(co).map(function(){return null});function Fa(at){Qn.call(this),this.mipmask=0,this.internalformat=Ia,this.id=No++,this.refCount=1,this.target=at,this.texture=we.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new eo,fn.profile&&(this.stats={size:0})}function ds(at){we.activeTexture(Ra),we.bindTexture(at.target,at.texture)}function Ii(){var at=Po[0];at?we.bindTexture(at.target,at.texture):we.bindTexture(lo,null)}function va(at){var En=at.texture;I(En,"must not double destroy texture");var an=at.unit,Fr=at.target;an>=0&&(we.activeTexture(Ra+an),we.bindTexture(Fr,null),Po[an]=null),we.deleteTexture(En),at.texture=null,at.params=null,at.pixels=null,at.refCount=0,delete so[at.id],wn.textureCount--}p(Fa.prototype,{bind:function(){var En=this;En.bindCount+=1;var an=En.unit;if(an<0){for(var Fr=0;Fr<co;++Fr){var Ga=Po[Fr];if(Ga){if(Ga.bindCount>0)continue;Ga.unit=-1}Po[Fr]=En,an=Fr;break}an>=co&&I.raise("insufficient number of texture units"),fn.profile&&wn.maxTextureUnits<an+1&&(wn.maxTextureUnits=an+1),En.unit=an,we.activeTexture(Ra+an),we.bindTexture(En.target,En.texture)}return an},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&va(this)}});function Ba(at,En){var an=new Fa(lo);so[an.id]=an,wn.textureCount++;function Fr(Fe,xt){var Yt=an.texInfo;eo.call(Yt);var Zt=Ya();return typeof Fe=="number"?typeof xt=="number"?$a(Zt,Fe|0,xt|0):$a(Zt,Fe|0,Fe|0):Fe?(I.type(Fe,"object","invalid arguments to regl.texture"),to(Yt,Fe),Ci(Zt,Fe)):$a(Zt,1,1),Yt.genMipmaps&&(Zt.mipmask=(Zt.width<<1)-1),an.mipmask=Zt.mipmask,hr(an,Zt),I.texture2D(Yt,Zt,gt),an.internalformat=Zt.internalformat,Fr.width=Zt.width,Fr.height=Zt.height,ds(an),Co(Zt,lo),Eo(Yt,lo),Ii(),To(Zt),fn.profile&&(an.stats.size=Wf(an.internalformat,an.type,Zt.width,Zt.height,Yt.genMipmaps,!1)),Fr.format=fr[an.internalformat],Fr.type=Lr[an.type],Fr.mag=kn[Yt.magFilter],Fr.min=Vr[Yt.minFilter],Fr.wrapS=$n[Yt.wrapS],Fr.wrapT=$n[Yt.wrapT],Fr}function Ga(Fe,xt,Yt,Zt){I(!!Fe,"must specify image data");var Dt=xt|0,At=Yt|0,Ht=Zt|0,Ze=Ur();return hr(Ze,an),Ze.width=0,Ze.height=0,mr(Ze,Fe),Ze.width=Ze.width||(an.width>>Ht)-Dt,Ze.height=Ze.height||(an.height>>Ht)-At,I(an.type===Ze.type&&an.format===Ze.format&&an.internalformat===Ze.internalformat,"incompatible format for texture.subimage"),I(Dt>=0&&At>=0&&Dt+Ze.width<=an.width&&At+Ze.height<=an.height,"texture.subimage write out of bounds"),I(an.mipmask&1<<Ht,"missing mipmap data"),I(Ze.data||Ze.element||Ze.needsCopy,"missing image data"),ds(an),pa(Ze,lo,Dt,At,Ht),Ii(),Xa(Ze),Fr}function Je(Fe,xt){var Yt=Fe|0,Zt=xt|0||Yt;if(Yt===an.width&&Zt===an.height)return Fr;Fr.width=an.width=Yt,Fr.height=an.height=Zt,ds(an);for(var Dt=0;an.mipmask>>Dt;++Dt){var At=Yt>>Dt,Ht=Zt>>Dt;if(!At||!Ht)break;we.texImage2D(lo,Dt,an.format,At,Ht,0,an.format,an.type,null)}return Ii(),fn.profile&&(an.stats.size=Wf(an.internalformat,an.type,Yt,Zt,!1,!1)),Fr}return Fr(at,En),Fr.subimage=Ga,Fr.resize=Je,Fr._reglType="texture2d",Fr._texture=an,fn.profile&&(Fr.stats=an.stats),Fr.destroy=function(){an.decRef()},Fr}function fi(at,En,an,Fr,Ga,Je){var Fe=new Fa(Ho);so[Fe.id]=Fe,wn.cubeCount++;var xt=new Array(6);function Yt(At,Ht,Ze,Ot,Ke,Vt){var qt,Nn=Fe.texInfo;for(eo.call(Nn),qt=0;qt<6;++qt)xt[qt]=Ya();if(typeof At=="number"||!At){var Gn=At|0||1;for(qt=0;qt<6;++qt)$a(xt[qt],Gn,Gn)}else if(typeof At=="object")if(Ht)Ci(xt[0],At),Ci(xt[1],Ht),Ci(xt[2],Ze),Ci(xt[3],Ot),Ci(xt[4],Ke),Ci(xt[5],Vt);else if(to(Nn,At),Qr(Fe,At),"faces"in At){var Sn=At.faces;for(I(Array.isArray(Sn)&&Sn.length===6,"cube faces must be a length 6 array"),qt=0;qt<6;++qt)I(typeof Sn[qt]=="object"&&!!Sn[qt],"invalid input for cube map face"),hr(xt[qt],Fe),Ci(xt[qt],Sn[qt])}else for(qt=0;qt<6;++qt)Ci(xt[qt],At);else I.raise("invalid arguments to cube map");for(hr(Fe,xt[0]),gt.npotTextureCube||I(Fi(Fe.width)&&Fi(Fe.height),"your browser does not support non power or two texture dimensions"),Nn.genMipmaps?Fe.mipmask=(xt[0].width<<1)-1:Fe.mipmask=xt[0].mipmask,I.textureCube(Fe,Nn,xt,gt),Fe.internalformat=xt[0].internalformat,Yt.width=xt[0].width,Yt.height=xt[0].height,ds(Fe),qt=0;qt<6;++qt)Co(xt[qt],Ao+qt);for(Eo(Nn,Ho),Ii(),fn.profile&&(Fe.stats.size=Wf(Fe.internalformat,Fe.type,Yt.width,Yt.height,Nn.genMipmaps,!0)),Yt.format=fr[Fe.internalformat],Yt.type=Lr[Fe.type],Yt.mag=kn[Nn.magFilter],Yt.min=Vr[Nn.minFilter],Yt.wrapS=$n[Nn.wrapS],Yt.wrapT=$n[Nn.wrapT],qt=0;qt<6;++qt)To(xt[qt]);return Yt}function Zt(At,Ht,Ze,Ot,Ke){I(!!Ht,"must specify image data"),I(typeof At=="number"&&At===(At|0)&&At>=0&&At<6,"invalid face");var Vt=Ze|0,qt=Ot|0,Nn=Ke|0,Gn=Ur();return hr(Gn,Fe),Gn.width=0,Gn.height=0,mr(Gn,Ht),Gn.width=Gn.width||(Fe.width>>Nn)-Vt,Gn.height=Gn.height||(Fe.height>>Nn)-qt,I(Fe.type===Gn.type&&Fe.format===Gn.format&&Fe.internalformat===Gn.internalformat,"incompatible format for texture.subimage"),I(Vt>=0&&qt>=0&&Vt+Gn.width<=Fe.width&&qt+Gn.height<=Fe.height,"texture.subimage write out of bounds"),I(Fe.mipmask&1<<Nn,"missing mipmap data"),I(Gn.data||Gn.element||Gn.needsCopy,"missing image data"),ds(Fe),pa(Gn,Ao+At,Vt,qt,Nn),Ii(),Xa(Gn),Yt}function Dt(At){var Ht=At|0;if(Ht!==Fe.width){Yt.width=Fe.width=Ht,Yt.height=Fe.height=Ht,ds(Fe);for(var Ze=0;Ze<6;++Ze)for(var Ot=0;Fe.mipmask>>Ot;++Ot)we.texImage2D(Ao+Ze,Ot,Fe.format,Ht>>Ot,Ht>>Ot,0,Fe.format,Fe.type,null);return Ii(),fn.profile&&(Fe.stats.size=Wf(Fe.internalformat,Fe.type,Yt.width,Yt.height,!1,!0)),Yt}}return Yt(at,En,an,Fr,Ga,Je),Yt.subimage=Zt,Yt.resize=Dt,Yt._reglType="textureCube",Yt._texture=Fe,fn.profile&&(Yt.stats=Fe.stats),Yt.destroy=function(){Fe.decRef()},Yt}function es(){for(var at=0;at<co;++at)we.activeTexture(Ra+at),we.bindTexture(lo,null),Po[at]=null;Ki(so).forEach(va),wn.cubeCount=0,wn.textureCount=0}fn.profile&&(wn.getTotalTextureSize=function(){var at=0;return Object.keys(so).forEach(function(En){at+=so[En].stats.size}),at});function zs(){for(var at=0;at<co;++at){var En=Po[at];En&&(En.bindCount=0,En.unit=-1,Po[at]=null)}Ki(so).forEach(function(an){an.texture=we.createTexture(),we.bindTexture(an.target,an.texture);for(var Fr=0;Fr<32;++Fr)if((an.mipmask&1<<Fr)!=0)if(an.target===lo)we.texImage2D(lo,Fr,an.internalformat,an.width>>Fr,an.height>>Fr,0,an.internalformat,an.type,null);else for(var Ga=0;Ga<6;++Ga)we.texImage2D(Ao+Ga,Fr,an.internalformat,an.width>>Fr,an.height>>Fr,0,an.internalformat,an.type,null);Eo(an.texInfo,an.target)})}function Lc(){for(var at=0;at<co;++at){var En=Po[at];En&&(En.bindCount=0,En.unit=-1,Po[at]=null),we.activeTexture(Ra+at),we.bindTexture(lo,null),we.bindTexture(Ho,null)}}return{create2D:Ba,createCube:fi,clear:es,getTexture:function(En){return null},restore:zs,refresh:Lc}}var Ql=36161,Xi=32854,ys=32855,sp=36194,up=33189,qh=36168,lp=34041,$f=35907,cf=34836,_d=34842,Cc=34843,Fs=[];Fs[Xi]=2,Fs[ys]=2,Fs[sp]=2,Fs[up]=2,Fs[qh]=1,Fs[lp]=4,Fs[$f]=4,Fs[cf]=16,Fs[_d]=8,Fs[Cc]=6;function ff(we,Ie,gt){return Fs[we]*Ie*gt}var Fd=function(Ie,gt,rn,Jt,wn){var fn={rgba4:Xi,rgb565:sp,"rgb5 a1":ys,depth:up,stencil:qh,"depth stencil":lp};gt.ext_srgb&&(fn.srgba=$f),gt.ext_color_buffer_half_float&&(fn.rgba16f=_d,fn.rgb16f=Cc),gt.webgl_color_buffer_float&&(fn.rgba32f=cf);var Wn=[];Object.keys(fn).forEach(function(pr){var vn=fn[pr];Wn[vn]=pr});var wr=0,ur={};function cr(pr){this.id=wr++,this.refCount=1,this.renderbuffer=pr,this.format=Xi,this.width=0,this.height=0,wn.profile&&(this.stats={size:0})}cr.prototype.decRef=function(){--this.refCount<=0&&ir(this)};function ir(pr){var vn=pr.renderbuffer;I(vn,"must not double destroy renderbuffer"),Ie.bindRenderbuffer(Ql,null),Ie.deleteRenderbuffer(vn),pr.renderbuffer=null,pr.refCount=0,delete ur[pr.id],Jt.renderbufferCount--}function Ir(pr,vn){var cn=new cr(Ie.createRenderbuffer());ur[cn.id]=cn,Jt.renderbufferCount++;function fr(kn,Vr){var $n=0,Jn=0,Qn=Xi;if(typeof kn=="object"&&kn){var hr=kn;if("shape"in hr){var Qr=hr.shape;I(Array.isArray(Qr)&&Qr.length>=2,"invalid renderbuffer shape"),$n=Qr[0]|0,Jn=Qr[1]|0}else"radius"in hr&&($n=Jn=hr.radius|0),"width"in hr&&($n=hr.width|0),"height"in hr&&(Jn=hr.height|0);"format"in hr&&(I.parameter(hr.format,fn,"invalid renderbuffer format"),Qn=fn[hr.format])}else typeof kn=="number"?($n=kn|0,typeof Vr=="number"?Jn=Vr|0:Jn=$n):kn?I.raise("invalid arguments to renderbuffer constructor"):$n=Jn=1;if(I($n>0&&Jn>0&&$n<=rn.maxRenderbufferSize&&Jn<=rn.maxRenderbufferSize,"invalid renderbuffer size"),!($n===cn.width&&Jn===cn.height&&Qn===cn.format))return fr.width=cn.width=$n,fr.height=cn.height=Jn,cn.format=Qn,Ie.bindRenderbuffer(Ql,cn.renderbuffer),Ie.renderbufferStorage(Ql,Qn,$n,Jn),I(Ie.getError()===0,"invalid render buffer format"),wn.profile&&(cn.stats.size=ff(cn.format,cn.width,cn.height)),fr.format=Wn[cn.format],fr}function Lr(kn,Vr){var $n=kn|0,Jn=Vr|0||$n;return $n===cn.width&&Jn===cn.height||(I($n>0&&Jn>0&&$n<=rn.maxRenderbufferSize&&Jn<=rn.maxRenderbufferSize,"invalid renderbuffer size"),fr.width=cn.width=$n,fr.height=cn.height=Jn,Ie.bindRenderbuffer(Ql,cn.renderbuffer),Ie.renderbufferStorage(Ql,cn.format,$n,Jn),I(Ie.getError()===0,"invalid render buffer format"),wn.profile&&(cn.stats.size=ff(cn.format,cn.width,cn.height))),fr}return fr(pr,vn),fr.resize=Lr,fr._reglType="renderbuffer",fr._renderbuffer=cn,wn.profile&&(fr.stats=cn.stats),fr.destroy=function(){cn.decRef()},fr}wn.profile&&(Jt.getTotalRenderbufferSize=function(){var pr=0;return Object.keys(ur).forEach(function(vn){pr+=ur[vn].stats.size}),pr});function Tr(){Ki(ur).forEach(function(pr){pr.renderbuffer=Ie.createRenderbuffer(),Ie.bindRenderbuffer(Ql,pr.renderbuffer),Ie.renderbufferStorage(Ql,pr.format,pr.width,pr.height)}),Ie.bindRenderbuffer(Ql,null)}return{create:Ir,clear:function(){Ki(ur).forEach(ir)},restore:Tr}},tu=36160,ev=36161,Ec=3553,Bd=34069,cp=36064,fp=36096,Kf=36128,df=33306,tv=36053,Ue=36054,hf=36055,El=36057,bs=36061,Di=36193,Xg=5121,Yg=5126,dp=6407,ql=6408,hp=6402,Jg=[dp,ql],vf=[];vf[ql]=4,vf[dp]=3;var Gd=[];Gd[Xg]=1,Gd[Yg]=4,Gd[Di]=2;var Zg=32854,Ol=32855,Qg=36194,qg=33189,em=36168,vp=34041,tm=35907,wl=34836,nm=34842,rm=34843,am=[Zg,Ol,Qg,tm,nm,rm,wl],pf={};pf[tv]="complete",pf[Ue]="incomplete attachment",pf[El]="incomplete dimensions",pf[hf]="incomplete, missing attachment",pf[bs]="unsupported";function im(we,Ie,gt,rn,Jt,wn){var fn={cur:null,next:null,dirty:!1,setFBO:null},Wn=["rgba"],wr=["rgba4","rgb565","rgb5 a1"];Ie.ext_srgb&&wr.push("srgba"),Ie.ext_color_buffer_half_float&&wr.push("rgba16f","rgb16f"),Ie.webgl_color_buffer_float&&wr.push("rgba32f");var ur=["uint8"];Ie.oes_texture_half_float&&ur.push("half float","float16"),Ie.oes_texture_float&&ur.push("float","float32");function cr(Pr,mr,Un){this.target=Pr,this.texture=mr,this.renderbuffer=Un;var pa=0,Wa=0;mr?(pa=mr.width,Wa=mr.height):Un&&(pa=Un.width,Wa=Un.height),this.width=pa,this.height=Wa}function ir(Pr){Pr&&(Pr.texture&&Pr.texture._texture.decRef(),Pr.renderbuffer&&Pr.renderbuffer._renderbuffer.decRef())}function Ir(Pr,mr,Un){if(!!Pr)if(Pr.texture){var pa=Pr.texture._texture,Wa=Math.max(1,pa.width),Ur=Math.max(1,pa.height);I(Wa===mr&&Ur===Un,"inconsistent width/height for supplied texture"),pa.refCount+=1}else{var Xa=Pr.renderbuffer._renderbuffer;I(Xa.width===mr&&Xa.height===Un,"inconsistent width/height for renderbuffer"),Xa.refCount+=1}}function Tr(Pr,mr){mr&&(mr.texture?we.framebufferTexture2D(tu,Pr,mr.target,mr.texture._texture.texture,0):we.framebufferRenderbuffer(tu,Pr,ev,mr.renderbuffer._renderbuffer.renderbuffer))}function pr(Pr){var mr=Ec,Un=null,pa=null,Wa=Pr;typeof Pr=="object"&&(Wa=Pr.data,"target"in Pr&&(mr=Pr.target|0)),I.type(Wa,"function","invalid attachment data");var Ur=Wa._reglType;return Ur==="texture2d"?(Un=Wa,I(mr===Ec)):Ur==="textureCube"?(Un=Wa,I(mr>=Bd&&mr<Bd+6,"invalid cube map target")):Ur==="renderbuffer"?(pa=Wa,mr=ev):I.raise("invalid regl object for attachment"),new cr(mr,Un,pa)}function vn(Pr,mr,Un,pa,Wa){if(Un){var Ur=rn.create2D({width:Pr,height:mr,format:pa,type:Wa});return Ur._texture.refCount=0,new cr(Ec,Ur,null)}else{var Xa=Jt.create({width:Pr,height:mr,format:pa});return Xa._renderbuffer.refCount=0,new cr(ev,null,Xa)}}function cn(Pr){return Pr&&(Pr.texture||Pr.renderbuffer)}function fr(Pr,mr,Un){Pr&&(Pr.texture?Pr.texture.resize(mr,Un):Pr.renderbuffer&&Pr.renderbuffer.resize(mr,Un),Pr.width=mr,Pr.height=Un)}var Lr=0,kn={};function Vr(){this.id=Lr++,kn[this.id]=this,this.framebuffer=we.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function $n(Pr){Pr.colorAttachments.forEach(ir),ir(Pr.depthAttachment),ir(Pr.stencilAttachment),ir(Pr.depthStencilAttachment)}function Jn(Pr){var mr=Pr.framebuffer;I(mr,"must not double destroy framebuffer"),we.deleteFramebuffer(mr),Pr.framebuffer=null,wn.framebufferCount--,delete kn[Pr.id]}function Qn(Pr){var mr;we.bindFramebuffer(tu,Pr.framebuffer);var Un=Pr.colorAttachments;for(mr=0;mr<Un.length;++mr)Tr(cp+mr,Un[mr]);for(mr=Un.length;mr<gt.maxColorAttachments;++mr)we.framebufferTexture2D(tu,cp+mr,Ec,null,0);we.framebufferTexture2D(tu,df,Ec,null,0),we.framebufferTexture2D(tu,fp,Ec,null,0),we.framebufferTexture2D(tu,Kf,Ec,null,0),Tr(fp,Pr.depthAttachment),Tr(Kf,Pr.stencilAttachment),Tr(df,Pr.depthStencilAttachment);var pa=we.checkFramebufferStatus(tu);!we.isContextLost()&&pa!==tv&&I.raise("framebuffer configuration not supported, status = "+pf[pa]),we.bindFramebuffer(tu,fn.next?fn.next.framebuffer:null),fn.cur=fn.next,we.getError()}function hr(Pr,mr){var Un=new Vr;wn.framebufferCount++;function pa(Ur,Xa){var xa;I(fn.next!==Un,"can not update framebuffer which is currently in use");var $a=0,Ci=0,Co=!0,Lo=!0,Ya=null,To=!0,eo="rgba",to="uint8",Eo=1,No=null,so=null,co=null,Po=!1;if(typeof Ur=="number")$a=Ur|0,Ci=Xa|0||$a;else if(!Ur)$a=Ci=1;else{I.type(Ur,"object","invalid arguments for framebuffer");var Fa=Ur;if("shape"in Fa){var ds=Fa.shape;I(Array.isArray(ds)&&ds.length>=2,"invalid shape for framebuffer"),$a=ds[0],Ci=ds[1]}else"radius"in Fa&&($a=Ci=Fa.radius),"width"in Fa&&($a=Fa.width),"height"in Fa&&(Ci=Fa.height);("color"in Fa||"colors"in Fa)&&(Ya=Fa.color||Fa.colors,Array.isArray(Ya)&&I(Ya.length===1||Ie.webgl_draw_buffers,"multiple render targets not supported")),Ya||("colorCount"in Fa&&(Eo=Fa.colorCount|0,I(Eo>0,"invalid color buffer count")),"colorTexture"in Fa&&(To=!!Fa.colorTexture,eo="rgba4"),"colorType"in Fa&&(to=Fa.colorType,To?(I(Ie.oes_texture_float||!(to==="float"||to==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),I(Ie.oes_texture_half_float||!(to==="half float"||to==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):to==="half float"||to==="float16"?(I(Ie.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),eo="rgba16f"):(to==="float"||to==="float32")&&(I(Ie.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),eo="rgba32f"),I.oneOf(to,ur,"invalid color type")),"colorFormat"in Fa&&(eo=Fa.colorFormat,Wn.indexOf(eo)>=0?To=!0:wr.indexOf(eo)>=0?To=!1:To?I.oneOf(Fa.colorFormat,Wn,"invalid color format for texture"):I.oneOf(Fa.colorFormat,wr,"invalid color format for renderbuffer"))),("depthTexture"in Fa||"depthStencilTexture"in Fa)&&(Po=!!(Fa.depthTexture||Fa.depthStencilTexture),I(!Po||Ie.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Fa&&(typeof Fa.depth=="boolean"?Co=Fa.depth:(No=Fa.depth,Lo=!1)),"stencil"in Fa&&(typeof Fa.stencil=="boolean"?Lo=Fa.stencil:(so=Fa.stencil,Co=!1)),"depthStencil"in Fa&&(typeof Fa.depthStencil=="boolean"?Co=Lo=Fa.depthStencil:(co=Fa.depthStencil,Co=!1,Lo=!1))}var Ii=null,va=null,Ba=null,fi=null;if(Array.isArray(Ya))Ii=Ya.map(pr);else if(Ya)Ii=[pr(Ya)];else for(Ii=new Array(Eo),xa=0;xa<Eo;++xa)Ii[xa]=vn($a,Ci,To,eo,to);I(Ie.webgl_draw_buffers||Ii.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),I(Ii.length<=gt.maxColorAttachments,"too many color attachments, not supported"),$a=$a||Ii[0].width,Ci=Ci||Ii[0].height,No?va=pr(No):Co&&!Lo&&(va=vn($a,Ci,Po,"depth","uint32")),so?Ba=pr(so):Lo&&!Co&&(Ba=vn($a,Ci,!1,"stencil","uint8")),co?fi=pr(co):!No&&!so&&Lo&&Co&&(fi=vn($a,Ci,Po,"depth stencil","depth stencil")),I(!!No+!!so+!!co<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var es=null;for(xa=0;xa<Ii.length;++xa)if(Ir(Ii[xa],$a,Ci),I(!Ii[xa]||Ii[xa].texture&&Jg.indexOf(Ii[xa].texture._texture.format)>=0||Ii[xa].renderbuffer&&am.indexOf(Ii[xa].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+xa+" is invalid"),Ii[xa]&&Ii[xa].texture){var zs=vf[Ii[xa].texture._texture.format]*Gd[Ii[xa].texture._texture.type];es===null?es=zs:I(es===zs,"all color attachments much have the same number of bits per pixel.")}return Ir(va,$a,Ci),I(!va||va.texture&&va.texture._texture.format===hp||va.renderbuffer&&va.renderbuffer._renderbuffer.format===qg,"invalid depth attachment for framebuffer object"),Ir(Ba,$a,Ci),I(!Ba||Ba.renderbuffer&&Ba.renderbuffer._renderbuffer.format===em,"invalid stencil attachment for framebuffer object"),Ir(fi,$a,Ci),I(!fi||fi.texture&&fi.texture._texture.format===vp||fi.renderbuffer&&fi.renderbuffer._renderbuffer.format===vp,"invalid depth-stencil attachment for framebuffer object"),$n(Un),Un.width=$a,Un.height=Ci,Un.colorAttachments=Ii,Un.depthAttachment=va,Un.stencilAttachment=Ba,Un.depthStencilAttachment=fi,pa.color=Ii.map(cn),pa.depth=cn(va),pa.stencil=cn(Ba),pa.depthStencil=cn(fi),pa.width=Un.width,pa.height=Un.height,Qn(Un),pa}function Wa(Ur,Xa){I(fn.next!==Un,"can not resize a framebuffer which is currently in use");var xa=Math.max(Ur|0,1),$a=Math.max(Xa|0||xa,1);if(xa===Un.width&&$a===Un.height)return pa;for(var Ci=Un.colorAttachments,Co=0;Co<Ci.length;++Co)fr(Ci[Co],xa,$a);return fr(Un.depthAttachment,xa,$a),fr(Un.stencilAttachment,xa,$a),fr(Un.depthStencilAttachment,xa,$a),Un.width=pa.width=xa,Un.height=pa.height=$a,Qn(Un),pa}return pa(Pr,mr),p(pa,{resize:Wa,_reglType:"framebuffer",_framebuffer:Un,destroy:function(){Jn(Un),$n(Un)},use:function(Xa){fn.setFBO({framebuffer:pa},Xa)}})}function Qr(Pr){var mr=Array(6);function Un(Wa){var Ur;I(mr.indexOf(fn.next)<0,"can not update framebuffer which is currently in use");var Xa={color:null},xa=0,$a=null,Ci="rgba",Co="uint8",Lo=1;if(typeof Wa=="number")xa=Wa|0;else if(!Wa)xa=1;else{I.type(Wa,"object","invalid arguments for framebuffer");var Ya=Wa;if("shape"in Ya){var To=Ya.shape;I(Array.isArray(To)&&To.length>=2,"invalid shape for framebuffer"),I(To[0]===To[1],"cube framebuffer must be square"),xa=To[0]}else"radius"in Ya&&(xa=Ya.radius|0),"width"in Ya?(xa=Ya.width|0,"height"in Ya&&I(Ya.height===xa,"must be square")):"height"in Ya&&(xa=Ya.height|0);("color"in Ya||"colors"in Ya)&&($a=Ya.color||Ya.colors,Array.isArray($a)&&I($a.length===1||Ie.webgl_draw_buffers,"multiple render targets not supported")),$a||("colorCount"in Ya&&(Lo=Ya.colorCount|0,I(Lo>0,"invalid color buffer count")),"colorType"in Ya&&(I.oneOf(Ya.colorType,ur,"invalid color type"),Co=Ya.colorType),"colorFormat"in Ya&&(Ci=Ya.colorFormat,I.oneOf(Ya.colorFormat,Wn,"invalid color format for texture"))),"depth"in Ya&&(Xa.depth=Ya.depth),"stencil"in Ya&&(Xa.stencil=Ya.stencil),"depthStencil"in Ya&&(Xa.depthStencil=Ya.depthStencil)}var eo;if($a)if(Array.isArray($a))for(eo=[],Ur=0;Ur<$a.length;++Ur)eo[Ur]=$a[Ur];else eo=[$a];else{eo=Array(Lo);var to={radius:xa,format:Ci,type:Co};for(Ur=0;Ur<Lo;++Ur)eo[Ur]=rn.createCube(to)}for(Xa.color=Array(eo.length),Ur=0;Ur<eo.length;++Ur){var Eo=eo[Ur];I(typeof Eo=="function"&&Eo._reglType==="textureCube","invalid cube map"),xa=xa||Eo.width,I(Eo.width===xa&&Eo.height===xa,"invalid cube map shape"),Xa.color[Ur]={target:Bd,data:eo[Ur]}}for(Ur=0;Ur<6;++Ur){for(var No=0;No<eo.length;++No)Xa.color[No].target=Bd+Ur;Ur>0&&(Xa.depth=mr[0].depth,Xa.stencil=mr[0].stencil,Xa.depthStencil=mr[0].depthStencil),mr[Ur]?mr[Ur](Xa):mr[Ur]=hr(Xa)}return p(Un,{width:xa,height:xa,color:eo})}function pa(Wa){var Ur,Xa=Wa|0;if(I(Xa>0&&Xa<=gt.maxCubeMapSize,"invalid radius for cube fbo"),Xa===Un.width)return Un;var xa=Un.color;for(Ur=0;Ur<xa.length;++Ur)xa[Ur].resize(Xa);for(Ur=0;Ur<6;++Ur)mr[Ur].resize(Xa);return Un.width=Un.height=Xa,Un}return Un(Pr),p(Un,{faces:mr,resize:pa,_reglType:"framebufferCube",destroy:function(){mr.forEach(function(Ur){Ur.destroy()})}})}function wa(){fn.cur=null,fn.next=null,fn.dirty=!0,Ki(kn).forEach(function(Pr){Pr.framebuffer=we.createFramebuffer(),Qn(Pr)})}return p(fn,{getFramebuffer:function(mr){if(typeof mr=="function"&&mr._reglType==="framebuffer"){var Un=mr._framebuffer;if(Un instanceof Vr)return Un}return null},create:hr,createCube:Qr,clear:function(){Ki(kn).forEach(Jn)},restore:wa})}var Oc=5126,nv=34962;function Xf(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Oc,this.offset=0,this.stride=0,this.divisor=0}function Lu(we,Ie,gt,rn,Jt){for(var wn=gt.maxAttributes,fn=new Array(wn),Wn=0;Wn<wn;++Wn)fn[Wn]=new Xf;var wr=0,ur={},cr={Record:Xf,scope:{},state:fn,currentVAO:null,targetVAO:null,restore:Ir()?kn:function(){},createVAO:Vr,getVAO:pr,destroyBuffer:ir,setVAO:Ir()?vn:cn,clear:Ir()?fr:function(){}};function ir($n){for(var Jn=0;Jn<fn.length;++Jn){var Qn=fn[Jn];Qn.buffer===$n&&(we.disableVertexAttribArray(Jn),Qn.buffer=null)}}function Ir(){return Ie.oes_vertex_array_object}function Tr(){return Ie.angle_instanced_arrays}function pr($n){return typeof $n=="function"&&$n._vao?$n._vao:null}function vn($n){if($n!==cr.currentVAO){var Jn=Ir();$n?Jn.bindVertexArrayOES($n.vao):Jn.bindVertexArrayOES(null),cr.currentVAO=$n}}function cn($n){if($n!==cr.currentVAO){if($n)$n.bindAttrs();else for(var Jn=Tr(),Qn=0;Qn<fn.length;++Qn){var hr=fn[Qn];hr.buffer?(we.enableVertexAttribArray(Qn),we.vertexAttribPointer(Qn,hr.size,hr.type,hr.normalized,hr.stride,hr.offfset),Jn&&hr.divisor&&Jn.vertexAttribDivisorANGLE(Qn,hr.divisor)):(we.disableVertexAttribArray(Qn),we.vertexAttrib4f(Qn,hr.x,hr.y,hr.z,hr.w))}cr.currentVAO=$n}}function fr(){Ki(ur).forEach(function($n){$n.destroy()})}function Lr(){this.id=++wr,this.attributes=[];var $n=Ir();$n?this.vao=$n.createVertexArrayOES():this.vao=null,ur[this.id]=this,this.buffers=[]}Lr.prototype.bindAttrs=function(){for(var $n=Tr(),Jn=this.attributes,Qn=0;Qn<Jn.length;++Qn){var hr=Jn[Qn];hr.buffer?(we.enableVertexAttribArray(Qn),we.bindBuffer(nv,hr.buffer.buffer),we.vertexAttribPointer(Qn,hr.size,hr.type,hr.normalized,hr.stride,hr.offset),$n&&hr.divisor&&$n.vertexAttribDivisorANGLE(Qn,hr.divisor)):(we.disableVertexAttribArray(Qn),we.vertexAttrib4f(Qn,hr.x,hr.y,hr.z,hr.w))}for(var Qr=Jn.length;Qr<wn;++Qr)we.disableVertexAttribArray(Qr)},Lr.prototype.refresh=function(){var $n=Ir();$n&&($n.bindVertexArrayOES(this.vao),this.bindAttrs(),cr.currentVAO=this)},Lr.prototype.destroy=function(){if(this.vao){var $n=Ir();this===cr.currentVAO&&(cr.currentVAO=null,$n.bindVertexArrayOES(null)),$n.deleteVertexArrayOES(this.vao),this.vao=null}ur[this.id]&&(delete ur[this.id],rn.vaoCount-=1)};function kn(){var $n=Ir();$n&&Ki(ur).forEach(function(Jn){Jn.refresh()})}function Vr($n){var Jn=new Lr;rn.vaoCount+=1;function Qn(hr){I(Array.isArray(hr),"arguments to vertex array constructor must be an array"),I(hr.length<wn,"too many attributes"),I(hr.length>0,"must specify at least one attribute");var Qr={},wa=Jn.attributes;wa.length=hr.length;for(var Pr=0;Pr<hr.length;++Pr){var mr=hr[Pr],Un=wa[Pr]=new Xf,pa=mr.data||mr;if(Array.isArray(pa)||B(pa)||us(pa)){var Wa;Jn.buffers[Pr]&&(Wa=Jn.buffers[Pr],B(pa)&&Wa._buffer.byteLength>=pa.byteLength?Wa.subdata(pa):(Wa.destroy(),Jn.buffers[Pr]=null)),Jn.buffers[Pr]||(Wa=Jn.buffers[Pr]=Jt.create(mr,nv,!1,!0)),Un.buffer=Jt.getBuffer(Wa),Un.size=Un.buffer.dimension|0,Un.normalized=!1,Un.type=Un.buffer.dtype,Un.offset=0,Un.stride=0,Un.divisor=0,Un.state=1,Qr[Pr]=1}else Jt.getBuffer(mr)?(Un.buffer=Jt.getBuffer(mr),Un.size=Un.buffer.dimension|0,Un.normalized=!1,Un.type=Un.buffer.dtype,Un.offset=0,Un.stride=0,Un.divisor=0,Un.state=1):Jt.getBuffer(mr.buffer)?(Un.buffer=Jt.getBuffer(mr.buffer),Un.size=(+mr.size||Un.buffer.dimension)|0,Un.normalized=!!mr.normalized||!1,"type"in mr?(I.parameter(mr.type,Qs,"invalid buffer type"),Un.type=Qs[mr.type]):Un.type=Un.buffer.dtype,Un.offset=(mr.offset||0)|0,Un.stride=(mr.stride||0)|0,Un.divisor=(mr.divisor||0)|0,Un.state=1,I(Un.size>=1&&Un.size<=4,"size must be between 1 and 4"),I(Un.offset>=0,"invalid offset"),I(Un.stride>=0&&Un.stride<=255,"stride must be between 0 and 255"),I(Un.divisor>=0,"divisor must be positive"),I(!Un.divisor||!!Ie.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in mr?(I(Pr>0,"first attribute must not be a constant"),Un.x=+mr.x||0,Un.y=+mr.y||0,Un.z=+mr.z||0,Un.w=+mr.w||0,Un.state=2):I(!1,"invalid attribute spec for location "+Pr)}for(var Ur=0;Ur<Jn.buffers.length;++Ur)!Qr[Ur]&&Jn.buffers[Ur]&&(Jn.buffers[Ur].destroy(),Jn.buffers[Ur]=null);return Jn.refresh(),Qn}return Qn.destroy=function(){for(var hr=0;hr<Jn.buffers.length;++hr)Jn.buffers[hr]&&Jn.buffers[hr].destroy();Jn.buffers.length=0,Jn.destroy()},Qn._vao=Jn,Qn._reglType="vao",Qn($n)}return cr}var pp=35632,om=35633,gp=35718,sm=35721;function um(we,Ie,gt,rn){var Jt={},wn={};function fn(vn,cn,fr,Lr){this.name=vn,this.id=cn,this.location=fr,this.info=Lr}function Wn(vn,cn){for(var fr=0;fr<vn.length;++fr)if(vn[fr].id===cn.id){vn[fr].location=cn.location;return}vn.push(cn)}function wr(vn,cn,fr){var Lr=vn===pp?Jt:wn,kn=Lr[cn];if(!kn){var Vr=Ie.str(cn);kn=we.createShader(vn),we.shaderSource(kn,Vr),we.compileShader(kn),I.shaderError(we,kn,Vr,vn,fr),Lr[cn]=kn}return kn}var ur={},cr=[],ir=0;function Ir(vn,cn){this.id=ir++,this.fragId=vn,this.vertId=cn,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,rn.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Tr(vn,cn,fr){var Lr,kn,Vr=wr(pp,vn.fragId),$n=wr(om,vn.vertId),Jn=vn.program=we.createProgram();if(we.attachShader(Jn,Vr),we.attachShader(Jn,$n),fr)for(Lr=0;Lr<fr.length;++Lr){var Qn=fr[Lr];we.bindAttribLocation(Jn,Qn[0],Qn[1])}we.linkProgram(Jn),I.linkError(we,Jn,Ie.str(vn.fragId),Ie.str(vn.vertId),cn);var hr=we.getProgramParameter(Jn,gp);rn.profile&&(vn.stats.uniformsCount=hr);var Qr=vn.uniforms;for(Lr=0;Lr<hr;++Lr)if(kn=we.getActiveUniform(Jn,Lr),kn)if(kn.size>1)for(var wa=0;wa<kn.size;++wa){var Pr=kn.name.replace("[0]","["+wa+"]");Wn(Qr,new fn(Pr,Ie.id(Pr),we.getUniformLocation(Jn,Pr),kn))}else Wn(Qr,new fn(kn.name,Ie.id(kn.name),we.getUniformLocation(Jn,kn.name),kn));var mr=we.getProgramParameter(Jn,sm);rn.profile&&(vn.stats.attributesCount=mr);var Un=vn.attributes;for(Lr=0;Lr<mr;++Lr)kn=we.getActiveAttrib(Jn,Lr),kn&&Wn(Un,new fn(kn.name,Ie.id(kn.name),we.getAttribLocation(Jn,kn.name),kn))}rn.profile&&(gt.getMaxUniformsCount=function(){var vn=0;return cr.forEach(function(cn){cn.stats.uniformsCount>vn&&(vn=cn.stats.uniformsCount)}),vn},gt.getMaxAttributesCount=function(){var vn=0;return cr.forEach(function(cn){cn.stats.attributesCount>vn&&(vn=cn.stats.attributesCount)}),vn});function pr(){Jt={},wn={};for(var vn=0;vn<cr.length;++vn)Tr(cr[vn],null,cr[vn].attributes.map(function(cn){return[cn.location,cn.name]}))}return{clear:function(){var cn=we.deleteShader.bind(we);Ki(Jt).forEach(cn),Jt={},Ki(wn).forEach(cn),wn={},cr.forEach(function(fr){we.deleteProgram(fr.program)}),cr.length=0,ur={},gt.shaderCount=0},program:function(cn,fr,Lr,kn){I.command(cn>=0,"missing vertex shader",Lr),I.command(fr>=0,"missing fragment shader",Lr);var Vr=ur[fr];Vr||(Vr=ur[fr]={});var $n=Vr[cn];if($n&&($n.refCount++,!kn))return $n;var Jn=new Ir(fr,cn);return gt.shaderCount++,Tr(Jn,Lr,kn),$n||(Vr[cn]=Jn),cr.push(Jn),p(Jn,{destroy:function(){if(Jn.refCount--,Jn.refCount<=0){we.deleteProgram(Jn.program);var hr=cr.indexOf(Jn);cr.splice(hr,1),gt.shaderCount--}Vr[Jn.vertId].refCount<=0&&(we.deleteShader(wn[Jn.vertId]),delete wn[Jn.vertId],delete ur[Jn.fragId][Jn.vertId]),Object.keys(ur[Jn.fragId]).length||(we.deleteShader(Jt[Jn.fragId]),delete Jt[Jn.fragId],delete ur[Jn.fragId])}})},restore:pr,shader:wr,frag:-1,vert:-1}}var mp=6408,wc=5121,lm=3333,zd=5126;function Ud(we,Ie,gt,rn,Jt,wn,fn){function Wn(cr){var ir;Ie.next===null?(I(Jt.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),ir=wc):(I(Ie.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),ir=Ie.next.colorAttachments[0].texture._texture.type,wn.oes_texture_float?(I(ir===wc||ir===zd,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),ir===zd&&I(fn.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):I(ir===wc,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ir=0,Tr=0,pr=rn.framebufferWidth,vn=rn.framebufferHeight,cn=null;B(cr)?cn=cr:cr&&(I.type(cr,"object","invalid arguments to regl.read()"),Ir=cr.x|0,Tr=cr.y|0,I(Ir>=0&&Ir<rn.framebufferWidth,"invalid x offset for regl.read"),I(Tr>=0&&Tr<rn.framebufferHeight,"invalid y offset for regl.read"),pr=(cr.width||rn.framebufferWidth-Ir)|0,vn=(cr.height||rn.framebufferHeight-Tr)|0,cn=cr.data||null),cn&&(ir===wc?I(cn instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):ir===zd&&I(cn instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),I(pr>0&&pr+Ir<=rn.framebufferWidth,"invalid width for read pixels"),I(vn>0&&vn+Tr<=rn.framebufferHeight,"invalid height for read pixels"),gt();var fr=pr*vn*4;return cn||(ir===wc?cn=new Uint8Array(fr):ir===zd&&(cn=cn||new Float32Array(fr))),I.isTypedArray(cn,"data buffer for regl.read() must be a typedarray"),I(cn.byteLength>=fr,"data buffer for regl.read() too small"),we.pixelStorei(lm,4),we.readPixels(Ir,Tr,pr,vn,mp,ir,cn),cn}function wr(cr){var ir;return Ie.setFBO({framebuffer:cr.framebuffer},function(){ir=Wn(cr)}),ir}function ur(cr){return!cr||!("framebuffer"in cr)?Wn(cr):wr(cr)}return ur}function ol(we){return Array.prototype.slice.call(we)}function _u(we){return ol(we).join("")}function cm(){var we=0,Ie=[],gt=[];function rn(ir){for(var Ir=0;Ir<gt.length;++Ir)if(gt[Ir]===ir)return Ie[Ir];var Tr="g"+we++;return Ie.push(Tr),gt.push(ir),Tr}function Jt(){var ir=[];function Ir(){ir.push.apply(ir,ol(arguments))}var Tr=[];function pr(){var vn="v"+we++;return Tr.push(vn),arguments.length>0&&(ir.push(vn,"="),ir.push.apply(ir,ol(arguments)),ir.push(";")),vn}return p(Ir,{def:pr,toString:function(){return _u([Tr.length>0?"var "+Tr.join(",")+";":"",_u(ir)])}})}function wn(){var ir=Jt(),Ir=Jt(),Tr=ir.toString,pr=Ir.toString;function vn(cn,fr){Ir(cn,fr,"=",ir.def(cn,fr),";")}return p(function(){ir.apply(ir,ol(arguments))},{def:ir.def,entry:ir,exit:Ir,save:vn,set:function(fr,Lr,kn){vn(fr,Lr),ir(fr,Lr,"=",kn,";")},toString:function(){return Tr()+pr()}})}function fn(){var ir=_u(arguments),Ir=wn(),Tr=wn(),pr=Ir.toString,vn=Tr.toString;return p(Ir,{then:function(){return Ir.apply(Ir,ol(arguments)),this},else:function(){return Tr.apply(Tr,ol(arguments)),this},toString:function(){var fr=vn();return fr&&(fr="else{"+fr+"}"),_u(["if(",ir,"){",pr(),"}",fr])}})}var Wn=Jt(),wr={};function ur(ir,Ir){var Tr=[];function pr(){var kn="a"+Tr.length;return Tr.push(kn),kn}Ir=Ir||0;for(var vn=0;vn<Ir;++vn)pr();var cn=wn(),fr=cn.toString,Lr=wr[ir]=p(cn,{arg:pr,toString:function(){return _u(["function(",Tr.join(),"){",fr(),"}"])}});return Lr}function cr(){var ir=['"use strict";',Wn,"return {"];Object.keys(wr).forEach(function(pr){ir.push('"',pr,'":',wr[pr].toString(),",")}),ir.push("}");var Ir=_u(ir).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Tr=Function.apply(null,Ie.concat(Ir));return Tr.apply(null,gt)}return{global:Wn,link:rn,block:Jt,proc:ur,scope:wn,cond:fn,compile:cr}}var xc="xyzw".split(""),Sc=5121,nu=1,Yf=2,xl=0,Cs=1,rv=2,Vd=3,Jf=4,gf=5,Sl=6,av="dither",yp="blend.enable",Zf="blend.color",iv="blend.equation",Hd="blend.func",fs="depth.enable",Wd="depth.func",ov="depth.range",Fu="depth.mask",Qf="colorMask",qf="cull.enable",ec="cull.face",$d="frontFace",Es="lineWidth",Kd="polygonOffset.enable",sv="polygonOffset.offset",bp="sample.alpha",Cp="sample.enable",ed="sample.coverage",po="stencil.enable",mf="stencil.mask",Xd="stencil.func",uv="stencil.opFront",sl="stencil.opBack",cu="scissor.enable",td="scissor.box",Al="viewport",ul="profile",tc="framebuffer",nd="vert",rd="frag",nc="elements",rc="primitive",Ml="count",Ac="offset",yf="instances",Mc="vao",Yd="Width",Jd="Height",Tl=tc+Yd,bf=tc+Jd,Ep=Al+Yd,lv=Al+Jd,Op="drawingBuffer",ac=Op+Yd,wp=Op+Jd,ad=[Hd,iv,Xd,uv,sl,ed,Al,td,sv],Tc=34962,cv=34963,fm=35632,fv=35633,ci=3553,dm=34067,dv=2884,id=3042,Zd=3024,hm=2960,hv=2929,fu=3089,vm=32823,od=32926,Qd=32928,sd=5126,Cf=35664,Ps=35665,Bu=35666,ud=5124,ld=35667,Pc=35668,Gu=35669,ll=35670,cd=35671,kc=35672,Dc=35673,Bs=35674,fd=35675,du=35676,Ef=35678,Of=35680,dd=4,Ic=1028,Rc=1029,xp=2304,qd=2305,Sp=32775,pm=32776,vv=519,Pl=7680,Gs=0,zu=1,pv=32774,gm=513,hd=36160,wf=36064,Uu={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},gv=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ic={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},kl={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Dl={frag:fm,vert:fv},Nc={cw:xp,ccw:qd};function eh(we){return Array.isArray(we)||B(we)||us(we)}function mv(we){return we.sort(function(Ie,gt){return Ie===Al?-1:gt===Al?1:Ie<gt?-1:1})}function ks(we,Ie,gt,rn){this.thisDep=we,this.contextDep=Ie,this.propDep=gt,this.append=rn}function Vu(we){return we&&!(we.thisDep||we.contextDep||we.propDep)}function Mo(we){return new ks(!1,!1,!1,we)}function Os(we,Ie){var gt=we.type;if(gt===xl){var rn=we.data.length;return new ks(!0,rn>=1,rn>=2,Ie)}else if(gt===Jf){var Jt=we.data;return new ks(Jt.thisDep,Jt.contextDep,Jt.propDep,Ie)}else{if(gt===gf)return new ks(!1,!1,!1,Ie);if(gt===Sl){for(var wn=!1,fn=!1,Wn=!1,wr=0;wr<we.data.length;++wr){var ur=we.data[wr];if(ur.type===Cs)Wn=!0;else if(ur.type===rv)fn=!0;else if(ur.type===Vd)wn=!0;else if(ur.type===xl){wn=!0;var cr=ur.data;cr>=1&&(fn=!0),cr>=2&&(Wn=!0)}else ur.type===Jf&&(wn=wn||ur.data.thisDep,fn=fn||ur.data.contextDep,Wn=Wn||ur.data.propDep)}return new ks(wn,fn,Wn,Ie)}else return new ks(gt===Vd,gt===rv,gt===Cs,Ie)}}var th=new ks(!1,!1,!1,function(){});function nh(we,Ie,gt,rn,Jt,wn,fn,Wn,wr,ur,cr,ir,Ir,Tr,pr){var vn=ur.Record,cn={add:32774,subtract:32778,"reverse subtract":32779};gt.ext_blend_minmax&&(cn.min=Sp,cn.max=pm);var fr=gt.angle_instanced_arrays,Lr=gt.webgl_draw_buffers,kn={dirty:!0,profile:pr.profile},Vr={},$n=[],Jn={},Qn={};function hr(Je){return Je.replace(".","_")}function Qr(Je,Fe,xt){var Yt=hr(Je);$n.push(Je),Vr[Yt]=kn[Yt]=!!xt,Jn[Yt]=Fe}function wa(Je,Fe,xt){var Yt=hr(Je);$n.push(Je),Array.isArray(xt)?(kn[Yt]=xt.slice(),Vr[Yt]=xt.slice()):kn[Yt]=Vr[Yt]=xt,Qn[Yt]=Fe}Qr(av,Zd),Qr(yp,id),wa(Zf,"blendColor",[0,0,0,0]),wa(iv,"blendEquationSeparate",[pv,pv]),wa(Hd,"blendFuncSeparate",[zu,Gs,zu,Gs]),Qr(fs,hv,!0),wa(Wd,"depthFunc",gm),wa(ov,"depthRange",[0,1]),wa(Fu,"depthMask",!0),wa(Qf,Qf,[!0,!0,!0,!0]),Qr(qf,dv),wa(ec,"cullFace",Rc),wa($d,$d,qd),wa(Es,Es,1),Qr(Kd,vm),wa(sv,"polygonOffset",[0,0]),Qr(bp,od),Qr(Cp,Qd),wa(ed,"sampleCoverage",[1,!1]),Qr(po,hm),wa(mf,"stencilMask",-1),wa(Xd,"stencilFunc",[vv,0,-1]),wa(uv,"stencilOpSeparate",[Ic,Pl,Pl,Pl]),wa(sl,"stencilOpSeparate",[Rc,Pl,Pl,Pl]),Qr(cu,fu),wa(td,"scissor",[0,0,we.drawingBufferWidth,we.drawingBufferHeight]),wa(Al,Al,[0,0,we.drawingBufferWidth,we.drawingBufferHeight]);var Pr={gl:we,context:Ir,strings:Ie,next:Vr,current:kn,draw:ir,elements:wn,buffer:Jt,shader:cr,attributes:ur.state,vao:ur,uniforms:wr,framebuffer:Wn,extensions:gt,timer:Tr,isBufferArgs:eh},mr={primTypes:qa,compareFuncs:ic,blendFuncs:Uu,blendEquations:cn,stencilOps:kl,glTypes:Qs,orientationType:Nc};I.optional(function(){Pr.isArrayLike=Xr}),Lr&&(mr.backBuffer=[Rc],mr.drawBuffer=ka(rn.maxDrawbuffers,function(Je){return Je===0?[0]:ka(Je,function(Fe){return wf+Fe})}));var Un=0;function pa(){var Je=cm(),Fe=Je.link,xt=Je.global;Je.id=Un++,Je.batchId="0";var Yt=Fe(Pr),Zt=Je.shared={props:"a0"};Object.keys(Pr).forEach(function(Ot){Zt[Ot]=xt.def(Yt,".",Ot)}),I.optional(function(){Je.CHECK=Fe(I),Je.commandStr=I.guessCommand(),Je.command=Fe(Je.commandStr),Je.assert=function(Ot,Ke,Vt){Ot("if(!(",Ke,"))",this.CHECK,".commandRaise(",Fe(Vt),",",this.command,");")},mr.invalidBlendCombinations=gv});var Dt=Je.next={},At=Je.current={};Object.keys(Qn).forEach(function(Ot){Array.isArray(kn[Ot])&&(Dt[Ot]=xt.def(Zt.next,".",Ot),At[Ot]=xt.def(Zt.current,".",Ot))});var Ht=Je.constants={};Object.keys(mr).forEach(function(Ot){Ht[Ot]=xt.def(JSON.stringify(mr[Ot]))}),Je.invoke=function(Ot,Ke){switch(Ke.type){case xl:var Vt=["this",Zt.context,Zt.props,Je.batchId];return Ot.def(Fe(Ke.data),".call(",Vt.slice(0,Math.max(Ke.data.length+1,4)),")");case Cs:return Ot.def(Zt.props,Ke.data);case rv:return Ot.def(Zt.context,Ke.data);case Vd:return Ot.def("this",Ke.data);case Jf:return Ke.data.append(Je,Ot),Ke.data.ref;case gf:return Ke.data.toString();case Sl:return Ke.data.map(function(qt){return Je.invoke(Ot,qt)})}},Je.attribCache={};var Ze={};return Je.scopeAttrib=function(Ot){var Ke=Ie.id(Ot);if(Ke in Ze)return Ze[Ke];var Vt=ur.scope[Ke];Vt||(Vt=ur.scope[Ke]=new vn);var qt=Ze[Ke]=Fe(Vt);return qt},Je}function Wa(Je){var Fe=Je.static,xt=Je.dynamic,Yt;if(ul in Fe){var Zt=!!Fe[ul];Yt=Mo(function(At,Ht){return Zt}),Yt.enable=Zt}else if(ul in xt){var Dt=xt[ul];Yt=Os(Dt,function(At,Ht){return At.invoke(Ht,Dt)})}return Yt}function Ur(Je,Fe){var xt=Je.static,Yt=Je.dynamic;if(tc in xt){var Zt=xt[tc];return Zt?(Zt=Wn.getFramebuffer(Zt),I.command(Zt,"invalid framebuffer object"),Mo(function(At,Ht){var Ze=At.link(Zt),Ot=At.shared;Ht.set(Ot.framebuffer,".next",Ze);var Ke=Ot.context;return Ht.set(Ke,"."+Tl,Ze+".width"),Ht.set(Ke,"."+bf,Ze+".height"),Ze})):Mo(function(At,Ht){var Ze=At.shared;Ht.set(Ze.framebuffer,".next","null");var Ot=Ze.context;return Ht.set(Ot,"."+Tl,Ot+"."+ac),Ht.set(Ot,"."+bf,Ot+"."+wp),"null"})}else if(tc in Yt){var Dt=Yt[tc];return Os(Dt,function(At,Ht){var Ze=At.invoke(Ht,Dt),Ot=At.shared,Ke=Ot.framebuffer,Vt=Ht.def(Ke,".getFramebuffer(",Ze,")");I.optional(function(){At.assert(Ht,"!"+Ze+"||"+Vt,"invalid framebuffer object")}),Ht.set(Ke,".next",Vt);var qt=Ot.context;return Ht.set(qt,"."+Tl,Vt+"?"+Vt+".width:"+qt+"."+ac),Ht.set(qt,"."+bf,Vt+"?"+Vt+".height:"+qt+"."+wp),Vt})}else return null}function Xa(Je,Fe,xt){var Yt=Je.static,Zt=Je.dynamic;function Dt(Ze){if(Ze in Yt){var Ot=Yt[Ze];I.commandType(Ot,"object","invalid "+Ze,xt.commandStr);var Ke=!0,Vt=Ot.x|0,qt=Ot.y|0,Nn,Gn;return"width"in Ot?(Nn=Ot.width|0,I.command(Nn>=0,"invalid "+Ze,xt.commandStr)):Ke=!1,"height"in Ot?(Gn=Ot.height|0,I.command(Gn>=0,"invalid "+Ze,xt.commandStr)):Ke=!1,new ks(!Ke&&Fe&&Fe.thisDep,!Ke&&Fe&&Fe.contextDep,!Ke&&Fe&&Fe.propDep,function(Yr,Va){var Hr=Yr.shared.context,ua=Nn;"width"in Ot||(ua=Va.def(Hr,".",Tl,"-",Vt));var Na=Gn;return"height"in Ot||(Na=Va.def(Hr,".",bf,"-",qt)),[Vt,qt,ua,Na]})}else if(Ze in Zt){var Sn=Zt[Ze],gr=Os(Sn,function(Yr,Va){var Hr=Yr.invoke(Va,Sn);I.optional(function(){Yr.assert(Va,Hr+"&&typeof "+Hr+'==="object"',"invalid "+Ze)});var ua=Yr.shared.context,Na=Va.def(Hr,".x|0"),Ei=Va.def(Hr,".y|0"),Oo=Va.def('"width" in ',Hr,"?",Hr,".width|0:","(",ua,".",Tl,"-",Na,")"),Us=Va.def('"height" in ',Hr,"?",Hr,".height|0:","(",ua,".",bf,"-",Ei,")");return I.optional(function(){Yr.assert(Va,Oo+">=0&&"+Us+">=0","invalid "+Ze)}),[Na,Ei,Oo,Us]});return Fe&&(gr.thisDep=gr.thisDep||Fe.thisDep,gr.contextDep=gr.contextDep||Fe.contextDep,gr.propDep=gr.propDep||Fe.propDep),gr}else return Fe?new ks(Fe.thisDep,Fe.contextDep,Fe.propDep,function(Yr,Va){var Hr=Yr.shared.context;return[0,0,Va.def(Hr,".",Tl),Va.def(Hr,".",bf)]}):null}var At=Dt(Al);if(At){var Ht=At;At=new ks(At.thisDep,At.contextDep,At.propDep,function(Ze,Ot){var Ke=Ht.append(Ze,Ot),Vt=Ze.shared.context;return Ot.set(Vt,"."+Ep,Ke[2]),Ot.set(Vt,"."+lv,Ke[3]),Ke})}return{viewport:At,scissor_box:Dt(td)}}function xa(Je,Fe){var xt=Je.static,Yt=typeof xt[rd]=="string"&&typeof xt[nd]=="string";if(Yt){if(Object.keys(Fe.dynamic).length>0)return null;var Zt=Fe.static,Dt=Object.keys(Zt);if(Dt.length>0&&typeof Zt[Dt[0]]=="number"){for(var At=[],Ht=0;Ht<Dt.length;++Ht)I(typeof Zt[Dt[Ht]]=="number","must specify all vertex attribute locations when using vaos"),At.push([Zt[Dt[Ht]]|0,Dt[Ht]]);return At}}return null}function $a(Je,Fe,xt){var Yt=Je.static,Zt=Je.dynamic;function Dt(Ke){if(Ke in Yt){var Vt=Ie.id(Yt[Ke]);I.optional(function(){cr.shader(Dl[Ke],Vt,I.guessCommand())});var qt=Mo(function(){return Vt});return qt.id=Vt,qt}else if(Ke in Zt){var Nn=Zt[Ke];return Os(Nn,function(Gn,Sn){var gr=Gn.invoke(Sn,Nn),Yr=Sn.def(Gn.shared.strings,".id(",gr,")");return I.optional(function(){Sn(Gn.shared.shader,".shader(",Dl[Ke],",",Yr,",",Gn.command,");")}),Yr})}return null}var At=Dt(rd),Ht=Dt(nd),Ze=null,Ot;return Vu(At)&&Vu(Ht)?(Ze=cr.program(Ht.id,At.id,null,xt),Ot=Mo(function(Ke,Vt){return Ke.link(Ze)})):Ot=new ks(At&&At.thisDep||Ht&&Ht.thisDep,At&&At.contextDep||Ht&&Ht.contextDep,At&&At.propDep||Ht&&Ht.propDep,function(Ke,Vt){var qt=Ke.shared.shader,Nn;At?Nn=At.append(Ke,Vt):Nn=Vt.def(qt,".",rd);var Gn;Ht?Gn=Ht.append(Ke,Vt):Gn=Vt.def(qt,".",nd);var Sn=qt+".program("+Gn+","+Nn;return I.optional(function(){Sn+=","+Ke.command}),Vt.def(Sn+")")}),{frag:At,vert:Ht,progVar:Ot,program:Ze}}function Ci(Je,Fe){var xt=Je.static,Yt=Je.dynamic;function Zt(){if(nc in xt){var Ke=xt[nc];eh(Ke)?Ke=wn.getElements(wn.create(Ke,!0)):Ke&&(Ke=wn.getElements(Ke),I.command(Ke,"invalid elements",Fe.commandStr));var Vt=Mo(function(Nn,Gn){if(Ke){var Sn=Nn.link(Ke);return Nn.ELEMENTS=Sn,Sn}return Nn.ELEMENTS=null,null});return Vt.value=Ke,Vt}else if(nc in Yt){var qt=Yt[nc];return Os(qt,function(Nn,Gn){var Sn=Nn.shared,gr=Sn.isBufferArgs,Yr=Sn.elements,Va=Nn.invoke(Gn,qt),Hr=Gn.def("null"),ua=Gn.def(gr,"(",Va,")"),Na=Nn.cond(ua).then(Hr,"=",Yr,".createStream(",Va,");").else(Hr,"=",Yr,".getElements(",Va,");");return I.optional(function(){Nn.assert(Na.else,"!"+Va+"||"+Hr,"invalid elements")}),Gn.entry(Na),Gn.exit(Nn.cond(ua).then(Yr,".destroyStream(",Hr,");")),Nn.ELEMENTS=Hr,Hr})}return null}var Dt=Zt();function At(){if(rc in xt){var Ke=xt[rc];return I.commandParameter(Ke,qa,"invalid primitve",Fe.commandStr),Mo(function(qt,Nn){return qa[Ke]})}else if(rc in Yt){var Vt=Yt[rc];return Os(Vt,function(qt,Nn){var Gn=qt.constants.primTypes,Sn=qt.invoke(Nn,Vt);return I.optional(function(){qt.assert(Nn,Sn+" in "+Gn,"invalid primitive, must be one of "+Object.keys(qa))}),Nn.def(Gn,"[",Sn,"]")})}else if(Dt)return Vu(Dt)?Dt.value?Mo(function(qt,Nn){return Nn.def(qt.ELEMENTS,".primType")}):Mo(function(){return dd}):new ks(Dt.thisDep,Dt.contextDep,Dt.propDep,function(qt,Nn){var Gn=qt.ELEMENTS;return Nn.def(Gn,"?",Gn,".primType:",dd)});return null}function Ht(Ke,Vt){if(Ke in xt){var qt=xt[Ke]|0;return I.command(!Vt||qt>=0,"invalid "+Ke,Fe.commandStr),Mo(function(Gn,Sn){return Vt&&(Gn.OFFSET=qt),qt})}else if(Ke in Yt){var Nn=Yt[Ke];return Os(Nn,function(Gn,Sn){var gr=Gn.invoke(Sn,Nn);return Vt&&(Gn.OFFSET=gr,I.optional(function(){Gn.assert(Sn,gr+">=0","invalid "+Ke)})),gr})}else if(Vt&&Dt)return Mo(function(Gn,Sn){return Gn.OFFSET="0",0});return null}var Ze=Ht(Ac,!0);function Ot(){if(Ml in xt){var Ke=xt[Ml]|0;return I.command(typeof Ke=="number"&&Ke>=0,"invalid vertex count",Fe.commandStr),Mo(function(){return Ke})}else if(Ml in Yt){var Vt=Yt[Ml];return Os(Vt,function(Gn,Sn){var gr=Gn.invoke(Sn,Vt);return I.optional(function(){Gn.assert(Sn,"typeof "+gr+'==="number"&&'+gr+">=0&&"+gr+"===("+gr+"|0)","invalid vertex count")}),gr})}else if(Dt)if(Vu(Dt)){if(Dt)return Ze?new ks(Ze.thisDep,Ze.contextDep,Ze.propDep,function(Gn,Sn){var gr=Sn.def(Gn.ELEMENTS,".vertCount-",Gn.OFFSET);return I.optional(function(){Gn.assert(Sn,gr+">=0","invalid vertex offset/element buffer too small")}),gr}):Mo(function(Gn,Sn){return Sn.def(Gn.ELEMENTS,".vertCount")});var qt=Mo(function(){return-1});return I.optional(function(){qt.MISSING=!0}),qt}else{var Nn=new ks(Dt.thisDep||Ze.thisDep,Dt.contextDep||Ze.contextDep,Dt.propDep||Ze.propDep,function(Gn,Sn){var gr=Gn.ELEMENTS;return Gn.OFFSET?Sn.def(gr,"?",gr,".vertCount-",Gn.OFFSET,":-1"):Sn.def(gr,"?",gr,".vertCount:-1")});return I.optional(function(){Nn.DYNAMIC=!0}),Nn}return null}return{elements:Dt,primitive:At(),count:Ot(),instances:Ht(yf,!1),offset:Ze}}function Co(Je,Fe){var xt=Je.static,Yt=Je.dynamic,Zt={};return $n.forEach(function(Dt){var At=hr(Dt);function Ht(Ze,Ot){if(Dt in xt){var Ke=Ze(xt[Dt]);Zt[At]=Mo(function(){return Ke})}else if(Dt in Yt){var Vt=Yt[Dt];Zt[At]=Os(Vt,function(qt,Nn){return Ot(qt,Nn,qt.invoke(Nn,Vt))})}}switch(Dt){case qf:case yp:case av:case po:case fs:case cu:case Kd:case bp:case Cp:case Fu:return Ht(function(Ze){return I.commandType(Ze,"boolean",Dt,Fe.commandStr),Ze},function(Ze,Ot,Ke){return I.optional(function(){Ze.assert(Ot,"typeof "+Ke+'==="boolean"',"invalid flag "+Dt,Ze.commandStr)}),Ke});case Wd:return Ht(function(Ze){return I.commandParameter(Ze,ic,"invalid "+Dt,Fe.commandStr),ic[Ze]},function(Ze,Ot,Ke){var Vt=Ze.constants.compareFuncs;return I.optional(function(){Ze.assert(Ot,Ke+" in "+Vt,"invalid "+Dt+", must be one of "+Object.keys(ic))}),Ot.def(Vt,"[",Ke,"]")});case ov:return Ht(function(Ze){return I.command(Xr(Ze)&&Ze.length===2&&typeof Ze[0]=="number"&&typeof Ze[1]=="number"&&Ze[0]<=Ze[1],"depth range is 2d array",Fe.commandStr),Ze},function(Ze,Ot,Ke){I.optional(function(){Ze.assert(Ot,Ze.shared.isArrayLike+"("+Ke+")&&"+Ke+".length===2&&typeof "+Ke+'[0]==="number"&&typeof '+Ke+'[1]==="number"&&'+Ke+"[0]<="+Ke+"[1]","depth range must be a 2d array")});var Vt=Ot.def("+",Ke,"[0]"),qt=Ot.def("+",Ke,"[1]");return[Vt,qt]});case Hd:return Ht(function(Ze){I.commandType(Ze,"object","blend.func",Fe.commandStr);var Ot="srcRGB"in Ze?Ze.srcRGB:Ze.src,Ke="srcAlpha"in Ze?Ze.srcAlpha:Ze.src,Vt="dstRGB"in Ze?Ze.dstRGB:Ze.dst,qt="dstAlpha"in Ze?Ze.dstAlpha:Ze.dst;return I.commandParameter(Ot,Uu,At+".srcRGB",Fe.commandStr),I.commandParameter(Ke,Uu,At+".srcAlpha",Fe.commandStr),I.commandParameter(Vt,Uu,At+".dstRGB",Fe.commandStr),I.commandParameter(qt,Uu,At+".dstAlpha",Fe.commandStr),I.command(gv.indexOf(Ot+", "+Vt)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ot+", "+Vt+")",Fe.commandStr),[Uu[Ot],Uu[Vt],Uu[Ke],Uu[qt]]},function(Ze,Ot,Ke){var Vt=Ze.constants.blendFuncs;I.optional(function(){Ze.assert(Ot,Ke+"&&typeof "+Ke+'==="object"',"invalid blend func, must be an object")});function qt(Hr,ua){var Na=Ot.def('"',Hr,ua,'" in ',Ke,"?",Ke,".",Hr,ua,":",Ke,".",Hr);return I.optional(function(){Ze.assert(Ot,Na+" in "+Vt,"invalid "+Dt+"."+Hr+ua+", must be one of "+Object.keys(Uu))}),Na}var Nn=qt("src","RGB"),Gn=qt("dst","RGB");I.optional(function(){var Hr=Ze.constants.invalidBlendCombinations;Ze.assert(Ot,Hr+".indexOf("+Nn+'+", "+'+Gn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Sn=Ot.def(Vt,"[",Nn,"]"),gr=Ot.def(Vt,"[",qt("src","Alpha"),"]"),Yr=Ot.def(Vt,"[",Gn,"]"),Va=Ot.def(Vt,"[",qt("dst","Alpha"),"]");return[Sn,Yr,gr,Va]});case iv:return Ht(function(Ze){if(typeof Ze=="string")return I.commandParameter(Ze,cn,"invalid "+Dt,Fe.commandStr),[cn[Ze],cn[Ze]];if(typeof Ze=="object")return I.commandParameter(Ze.rgb,cn,Dt+".rgb",Fe.commandStr),I.commandParameter(Ze.alpha,cn,Dt+".alpha",Fe.commandStr),[cn[Ze.rgb],cn[Ze.alpha]];I.commandRaise("invalid blend.equation",Fe.commandStr)},function(Ze,Ot,Ke){var Vt=Ze.constants.blendEquations,qt=Ot.def(),Nn=Ot.def(),Gn=Ze.cond("typeof ",Ke,'==="string"');return I.optional(function(){function Sn(gr,Yr,Va){Ze.assert(gr,Va+" in "+Vt,"invalid "+Yr+", must be one of "+Object.keys(cn))}Sn(Gn.then,Dt,Ke),Ze.assert(Gn.else,Ke+"&&typeof "+Ke+'==="object"',"invalid "+Dt),Sn(Gn.else,Dt+".rgb",Ke+".rgb"),Sn(Gn.else,Dt+".alpha",Ke+".alpha")}),Gn.then(qt,"=",Nn,"=",Vt,"[",Ke,"];"),Gn.else(qt,"=",Vt,"[",Ke,".rgb];",Nn,"=",Vt,"[",Ke,".alpha];"),Ot(Gn),[qt,Nn]});case Zf:return Ht(function(Ze){return I.command(Xr(Ze)&&Ze.length===4,"blend.color must be a 4d array",Fe.commandStr),ka(4,function(Ot){return+Ze[Ot]})},function(Ze,Ot,Ke){return I.optional(function(){Ze.assert(Ot,Ze.shared.isArrayLike+"("+Ke+")&&"+Ke+".length===4","blend.color must be a 4d array")}),ka(4,function(Vt){return Ot.def("+",Ke,"[",Vt,"]")})});case mf:return Ht(function(Ze){return I.commandType(Ze,"number",At,Fe.commandStr),Ze|0},function(Ze,Ot,Ke){return I.optional(function(){Ze.assert(Ot,"typeof "+Ke+'==="number"',"invalid stencil.mask")}),Ot.def(Ke,"|0")});case Xd:return Ht(function(Ze){I.commandType(Ze,"object",At,Fe.commandStr);var Ot=Ze.cmp||"keep",Ke=Ze.ref||0,Vt="mask"in Ze?Ze.mask:-1;return I.commandParameter(Ot,ic,Dt+".cmp",Fe.commandStr),I.commandType(Ke,"number",Dt+".ref",Fe.commandStr),I.commandType(Vt,"number",Dt+".mask",Fe.commandStr),[ic[Ot],Ke,Vt]},function(Ze,Ot,Ke){var Vt=Ze.constants.compareFuncs;I.optional(function(){function Sn(){Ze.assert(Ot,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Sn(Ke+"&&typeof ",Ke,'==="object"'),Sn('!("cmp" in ',Ke,")||(",Ke,".cmp in ",Vt,")")});var qt=Ot.def('"cmp" in ',Ke,"?",Vt,"[",Ke,".cmp]",":",Pl),Nn=Ot.def(Ke,".ref|0"),Gn=Ot.def('"mask" in ',Ke,"?",Ke,".mask|0:-1");return[qt,Nn,Gn]});case uv:case sl:return Ht(function(Ze){I.commandType(Ze,"object",At,Fe.commandStr);var Ot=Ze.fail||"keep",Ke=Ze.zfail||"keep",Vt=Ze.zpass||"keep";return I.commandParameter(Ot,kl,Dt+".fail",Fe.commandStr),I.commandParameter(Ke,kl,Dt+".zfail",Fe.commandStr),I.commandParameter(Vt,kl,Dt+".zpass",Fe.commandStr),[Dt===sl?Rc:Ic,kl[Ot],kl[Ke],kl[Vt]]},function(Ze,Ot,Ke){var Vt=Ze.constants.stencilOps;I.optional(function(){Ze.assert(Ot,Ke+"&&typeof "+Ke+'==="object"',"invalid "+Dt)});function qt(Nn){return I.optional(function(){Ze.assert(Ot,'!("'+Nn+'" in '+Ke+")||("+Ke+"."+Nn+" in "+Vt+")","invalid "+Dt+"."+Nn+", must be one of "+Object.keys(kl))}),Ot.def('"',Nn,'" in ',Ke,"?",Vt,"[",Ke,".",Nn,"]:",Pl)}return[Dt===sl?Rc:Ic,qt("fail"),qt("zfail"),qt("zpass")]});case sv:return Ht(function(Ze){I.commandType(Ze,"object",At,Fe.commandStr);var Ot=Ze.factor|0,Ke=Ze.units|0;return I.commandType(Ot,"number",At+".factor",Fe.commandStr),I.commandType(Ke,"number",At+".units",Fe.commandStr),[Ot,Ke]},function(Ze,Ot,Ke){I.optional(function(){Ze.assert(Ot,Ke+"&&typeof "+Ke+'==="object"',"invalid "+Dt)});var Vt=Ot.def(Ke,".factor|0"),qt=Ot.def(Ke,".units|0");return[Vt,qt]});case ec:return Ht(function(Ze){var Ot=0;return Ze==="front"?Ot=Ic:Ze==="back"&&(Ot=Rc),I.command(!!Ot,At,Fe.commandStr),Ot},function(Ze,Ot,Ke){return I.optional(function(){Ze.assert(Ot,Ke+'==="front"||'+Ke+'==="back"',"invalid cull.face")}),Ot.def(Ke,'==="front"?',Ic,":",Rc)});case Es:return Ht(function(Ze){return I.command(typeof Ze=="number"&&Ze>=rn.lineWidthDims[0]&&Ze<=rn.lineWidthDims[1],"invalid line width, must be a positive number between "+rn.lineWidthDims[0]+" and "+rn.lineWidthDims[1],Fe.commandStr),Ze},function(Ze,Ot,Ke){return I.optional(function(){Ze.assert(Ot,"typeof "+Ke+'==="number"&&'+Ke+">="+rn.lineWidthDims[0]+"&&"+Ke+"<="+rn.lineWidthDims[1],"invalid line width")}),Ke});case $d:return Ht(function(Ze){return I.commandParameter(Ze,Nc,At,Fe.commandStr),Nc[Ze]},function(Ze,Ot,Ke){return I.optional(function(){Ze.assert(Ot,Ke+'==="cw"||'+Ke+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ot.def(Ke+'==="cw"?'+xp+":"+qd)});case Qf:return Ht(function(Ze){return I.command(Xr(Ze)&&Ze.length===4,"color.mask must be length 4 array",Fe.commandStr),Ze.map(function(Ot){return!!Ot})},function(Ze,Ot,Ke){return I.optional(function(){Ze.assert(Ot,Ze.shared.isArrayLike+"("+Ke+")&&"+Ke+".length===4","invalid color.mask")}),ka(4,function(Vt){return"!!"+Ke+"["+Vt+"]"})});case ed:return Ht(function(Ze){I.command(typeof Ze=="object"&&Ze,At,Fe.commandStr);var Ot="value"in Ze?Ze.value:1,Ke=!!Ze.invert;return I.command(typeof Ot=="number"&&Ot>=0&&Ot<=1,"sample.coverage.value must be a number between 0 and 1",Fe.commandStr),[Ot,Ke]},function(Ze,Ot,Ke){I.optional(function(){Ze.assert(Ot,Ke+"&&typeof "+Ke+'==="object"',"invalid sample.coverage")});var Vt=Ot.def('"value" in ',Ke,"?+",Ke,".value:1"),qt=Ot.def("!!",Ke,".invert");return[Vt,qt]})}}),Zt}function Lo(Je,Fe){var xt=Je.static,Yt=Je.dynamic,Zt={};return Object.keys(xt).forEach(function(Dt){var At=xt[Dt],Ht;if(typeof At=="number"||typeof At=="boolean")Ht=Mo(function(){return At});else if(typeof At=="function"){var Ze=At._reglType;Ze==="texture2d"||Ze==="textureCube"?Ht=Mo(function(Ot){return Ot.link(At)}):Ze==="framebuffer"||Ze==="framebufferCube"?(I.command(At.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Dt+'"',Fe.commandStr),Ht=Mo(function(Ot){return Ot.link(At.color[0])})):I.commandRaise('invalid data for uniform "'+Dt+'"',Fe.commandStr)}else Xr(At)?Ht=Mo(function(Ot){var Ke=Ot.global.def("[",ka(At.length,function(Vt){return I.command(typeof At[Vt]=="number"||typeof At[Vt]=="boolean","invalid uniform "+Dt,Ot.commandStr),At[Vt]}),"]");return Ke}):I.commandRaise('invalid or missing data for uniform "'+Dt+'"',Fe.commandStr);Ht.value=At,Zt[Dt]=Ht}),Object.keys(Yt).forEach(function(Dt){var At=Yt[Dt];Zt[Dt]=Os(At,function(Ht,Ze){return Ht.invoke(Ze,At)})}),Zt}function Ya(Je,Fe){var xt=Je.static,Yt=Je.dynamic,Zt={};return Object.keys(xt).forEach(function(Dt){var At=xt[Dt],Ht=Ie.id(Dt),Ze=new vn;if(eh(At))Ze.state=nu,Ze.buffer=Jt.getBuffer(Jt.create(At,Tc,!1,!0)),Ze.type=0;else{var Ot=Jt.getBuffer(At);if(Ot)Ze.state=nu,Ze.buffer=Ot,Ze.type=0;else if(I.command(typeof At=="object"&&At,"invalid data for attribute "+Dt,Fe.commandStr),"constant"in At){var Ke=At.constant;Ze.buffer="null",Ze.state=Yf,typeof Ke=="number"?Ze.x=Ke:(I.command(Xr(Ke)&&Ke.length>0&&Ke.length<=4,"invalid constant for attribute "+Dt,Fe.commandStr),xc.forEach(function(Yr,Va){Va<Ke.length&&(Ze[Yr]=Ke[Va])}))}else{eh(At.buffer)?Ot=Jt.getBuffer(Jt.create(At.buffer,Tc,!1,!0)):Ot=Jt.getBuffer(At.buffer),I.command(!!Ot,'missing buffer for attribute "'+Dt+'"',Fe.commandStr);var Vt=At.offset|0;I.command(Vt>=0,'invalid offset for attribute "'+Dt+'"',Fe.commandStr);var qt=At.stride|0;I.command(qt>=0&&qt<256,'invalid stride for attribute "'+Dt+'", must be integer betweeen [0, 255]',Fe.commandStr);var Nn=At.size|0;I.command(!("size"in At)||Nn>0&&Nn<=4,'invalid size for attribute "'+Dt+'", must be 1,2,3,4',Fe.commandStr);var Gn=!!At.normalized,Sn=0;"type"in At&&(I.commandParameter(At.type,Qs,"invalid type for attribute "+Dt,Fe.commandStr),Sn=Qs[At.type]);var gr=At.divisor|0;"divisor"in At&&(I.command(gr===0||fr,'cannot specify divisor for attribute "'+Dt+'", instancing not supported',Fe.commandStr),I.command(gr>=0,'invalid divisor for attribute "'+Dt+'"',Fe.commandStr)),I.optional(function(){var Yr=Fe.commandStr,Va=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(At).forEach(function(Hr){I.command(Va.indexOf(Hr)>=0,'unknown parameter "'+Hr+'" for attribute pointer "'+Dt+'" (valid parameters are '+Va+")",Yr)})}),Ze.buffer=Ot,Ze.state=nu,Ze.size=Nn,Ze.normalized=Gn,Ze.type=Sn||Ot.dtype,Ze.offset=Vt,Ze.stride=qt,Ze.divisor=gr}}Zt[Dt]=Mo(function(Yr,Va){var Hr=Yr.attribCache;if(Ht in Hr)return Hr[Ht];var ua={isStream:!1};return Object.keys(Ze).forEach(function(Na){ua[Na]=Ze[Na]}),Ze.buffer&&(ua.buffer=Yr.link(Ze.buffer),ua.type=ua.type||ua.buffer+".dtype"),Hr[Ht]=ua,ua})}),Object.keys(Yt).forEach(function(Dt){var At=Yt[Dt];function Ht(Ze,Ot){var Ke=Ze.invoke(Ot,At),Vt=Ze.shared,qt=Ze.constants,Nn=Vt.isBufferArgs,Gn=Vt.buffer;I.optional(function(){Ze.assert(Ot,Ke+"&&(typeof "+Ke+'==="object"||typeof '+Ke+'==="function")&&('+Nn+"("+Ke+")||"+Gn+".getBuffer("+Ke+")||"+Gn+".getBuffer("+Ke+".buffer)||"+Nn+"("+Ke+'.buffer)||("constant" in '+Ke+"&&(typeof "+Ke+'.constant==="number"||'+Vt.isArrayLike+"("+Ke+".constant))))",'invalid dynamic attribute "'+Dt+'"')});var Sn={isStream:Ot.def(!1)},gr=new vn;gr.state=nu,Object.keys(gr).forEach(function(ua){Sn[ua]=Ot.def(""+gr[ua])});var Yr=Sn.buffer,Va=Sn.type;Ot("if(",Nn,"(",Ke,")){",Sn.isStream,"=true;",Yr,"=",Gn,".createStream(",Tc,",",Ke,");",Va,"=",Yr,".dtype;","}else{",Yr,"=",Gn,".getBuffer(",Ke,");","if(",Yr,"){",Va,"=",Yr,".dtype;",'}else if("constant" in ',Ke,"){",Sn.state,"=",Yf,";","if(typeof "+Ke+'.constant === "number"){',Sn[xc[0]],"=",Ke,".constant;",xc.slice(1).map(function(ua){return Sn[ua]}).join("="),"=0;","}else{",xc.map(function(ua,Na){return Sn[ua]+"="+Ke+".constant.length>"+Na+"?"+Ke+".constant["+Na+"]:0;"}).join(""),"}}else{","if(",Nn,"(",Ke,".buffer)){",Yr,"=",Gn,".createStream(",Tc,",",Ke,".buffer);","}else{",Yr,"=",Gn,".getBuffer(",Ke,".buffer);","}",Va,'="type" in ',Ke,"?",qt.glTypes,"[",Ke,".type]:",Yr,".dtype;",Sn.normalized,"=!!",Ke,".normalized;");function Hr(ua){Ot(Sn[ua],"=",Ke,".",ua,"|0;")}return Hr("size"),Hr("offset"),Hr("stride"),Hr("divisor"),Ot("}}"),Ot.exit("if(",Sn.isStream,"){",Gn,".destroyStream(",Yr,");","}"),Sn}Zt[Dt]=Os(At,Ht)}),Zt}function To(Je,Fe){var xt=Je.static,Yt=Je.dynamic;if(Mc in xt){var Zt=xt[Mc];return Zt!==null&&ur.getVAO(Zt)===null&&(Zt=ur.createVAO(Zt)),Mo(function(At){return At.link(ur.getVAO(Zt))})}else if(Mc in Yt){var Dt=Yt[Mc];return Os(Dt,function(At,Ht){var Ze=At.invoke(Ht,Dt);return Ht.def(At.shared.vao+".getVAO("+Ze+")")})}return null}function eo(Je){var Fe=Je.static,xt=Je.dynamic,Yt={};return Object.keys(Fe).forEach(function(Zt){var Dt=Fe[Zt];Yt[Zt]=Mo(function(At,Ht){return typeof Dt=="number"||typeof Dt=="boolean"?""+Dt:At.link(Dt)})}),Object.keys(xt).forEach(function(Zt){var Dt=xt[Zt];Yt[Zt]=Os(Dt,function(At,Ht){return At.invoke(Ht,Dt)})}),Yt}function to(Je,Fe,xt,Yt,Zt){var Dt=Je.static,At=Je.dynamic;I.optional(function(){var Hr=[tc,nd,rd,nc,rc,Ac,Ml,yf,ul,Mc].concat($n);function ua(Na){Object.keys(Na).forEach(function(Ei){I.command(Hr.indexOf(Ei)>=0,'unknown parameter "'+Ei+'"',Zt.commandStr)})}ua(Dt),ua(At)});var Ht=xa(Je,Fe),Ze=Ur(Je,Zt),Ot=Xa(Je,Ze,Zt),Ke=Ci(Je,Zt),Vt=Co(Je,Zt),qt=$a(Je,Zt,Ht);function Nn(Hr){var ua=Ot[Hr];ua&&(Vt[Hr]=ua)}Nn(Al),Nn(hr(td));var Gn=Object.keys(Vt).length>0,Sn={framebuffer:Ze,draw:Ke,shader:qt,state:Vt,dirty:Gn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Sn.profile=Wa(Je,Zt),Sn.uniforms=Lo(xt,Zt),Sn.drawVAO=Sn.scopeVAO=To(Je,Zt),!Sn.drawVAO&&qt.program&&!Ht&&gt.angle_instanced_arrays){var gr=!0,Yr=qt.program.attributes.map(function(Hr){var ua=Fe.static[Hr];return gr=gr&&!!ua,ua});if(gr&&Yr.length>0){var Va=ur.getVAO(ur.createVAO(Yr));Sn.drawVAO=new ks(null,null,null,function(Hr,ua){return Hr.link(Va)}),Sn.useVAO=!0}}return Ht?Sn.useVAO=!0:Sn.attributes=Ya(Fe,Zt),Sn.context=eo(Yt,Zt),Sn}function Eo(Je,Fe,xt){var Yt=Je.shared,Zt=Yt.context,Dt=Je.scope();Object.keys(xt).forEach(function(At){Fe.save(Zt,"."+At);var Ht=xt[At],Ze=Ht.append(Je,Fe);Array.isArray(Ze)?Dt(Zt,".",At,"=[",Ze.join(),"];"):Dt(Zt,".",At,"=",Ze,";")}),Fe(Dt)}function No(Je,Fe,xt,Yt){var Zt=Je.shared,Dt=Zt.gl,At=Zt.framebuffer,Ht;Lr&&(Ht=Fe.def(Zt.extensions,".webgl_draw_buffers"));var Ze=Je.constants,Ot=Ze.drawBuffer,Ke=Ze.backBuffer,Vt;xt?Vt=xt.append(Je,Fe):Vt=Fe.def(At,".next"),Yt||Fe("if(",Vt,"!==",At,".cur){"),Fe("if(",Vt,"){",Dt,".bindFramebuffer(",hd,",",Vt,".framebuffer);"),Lr&&Fe(Ht,".drawBuffersWEBGL(",Ot,"[",Vt,".colorAttachments.length]);"),Fe("}else{",Dt,".bindFramebuffer(",hd,",null);"),Lr&&Fe(Ht,".drawBuffersWEBGL(",Ke,");"),Fe("}",At,".cur=",Vt,";"),Yt||Fe("}")}function so(Je,Fe,xt){var Yt=Je.shared,Zt=Yt.gl,Dt=Je.current,At=Je.next,Ht=Yt.current,Ze=Yt.next,Ot=Je.cond(Ht,".dirty");$n.forEach(function(Ke){var Vt=hr(Ke);if(!(Vt in xt.state)){var qt,Nn;if(Vt in At){qt=At[Vt],Nn=Dt[Vt];var Gn=ka(kn[Vt].length,function(gr){return Ot.def(qt,"[",gr,"]")});Ot(Je.cond(Gn.map(function(gr,Yr){return gr+"!=="+Nn+"["+Yr+"]"}).join("||")).then(Zt,".",Qn[Vt],"(",Gn,");",Gn.map(function(gr,Yr){return Nn+"["+Yr+"]="+gr}).join(";"),";"))}else{qt=Ot.def(Ze,".",Vt);var Sn=Je.cond(qt,"!==",Ht,".",Vt);Ot(Sn),Vt in Jn?Sn(Je.cond(qt).then(Zt,".enable(",Jn[Vt],");").else(Zt,".disable(",Jn[Vt],");"),Ht,".",Vt,"=",qt,";"):Sn(Zt,".",Qn[Vt],"(",qt,");",Ht,".",Vt,"=",qt,";")}}}),Object.keys(xt.state).length===0&&Ot(Ht,".dirty=false;"),Fe(Ot)}function co(Je,Fe,xt,Yt){var Zt=Je.shared,Dt=Je.current,At=Zt.current,Ht=Zt.gl;mv(Object.keys(xt)).forEach(function(Ze){var Ot=xt[Ze];if(!(Yt&&!Yt(Ot))){var Ke=Ot.append(Je,Fe);if(Jn[Ze]){var Vt=Jn[Ze];Vu(Ot)?Ke?Fe(Ht,".enable(",Vt,");"):Fe(Ht,".disable(",Vt,");"):Fe(Je.cond(Ke).then(Ht,".enable(",Vt,");").else(Ht,".disable(",Vt,");")),Fe(At,".",Ze,"=",Ke,";")}else if(Xr(Ke)){var qt=Dt[Ze];Fe(Ht,".",Qn[Ze],"(",Ke,");",Ke.map(function(Nn,Gn){return qt+"["+Gn+"]="+Nn}).join(";"),";")}else Fe(Ht,".",Qn[Ze],"(",Ke,");",At,".",Ze,"=",Ke,";")}})}function Po(Je,Fe){fr&&(Je.instancing=Fe.def(Je.shared.extensions,".angle_instanced_arrays"))}function Fa(Je,Fe,xt,Yt,Zt){var Dt=Je.shared,At=Je.stats,Ht=Dt.current,Ze=Dt.timer,Ot=xt.profile;function Ke(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Vt,qt;function Nn(Hr){Vt=Fe.def(),Hr(Vt,"=",Ke(),";"),typeof Zt=="string"?Hr(At,".count+=",Zt,";"):Hr(At,".count++;"),Tr&&(Yt?(qt=Fe.def(),Hr(qt,"=",Ze,".getNumPendingQueries();")):Hr(Ze,".beginQuery(",At,");"))}function Gn(Hr){Hr(At,".cpuTime+=",Ke(),"-",Vt,";"),Tr&&(Yt?Hr(Ze,".pushScopeStats(",qt,",",Ze,".getNumPendingQueries(),",At,");"):Hr(Ze,".endQuery();"))}function Sn(Hr){var ua=Fe.def(Ht,".profile");Fe(Ht,".profile=",Hr,";"),Fe.exit(Ht,".profile=",ua,";")}var gr;if(Ot){if(Vu(Ot)){Ot.enable?(Nn(Fe),Gn(Fe.exit),Sn("true")):Sn("false");return}gr=Ot.append(Je,Fe),Sn(gr)}else gr=Fe.def(Ht,".profile");var Yr=Je.block();Nn(Yr),Fe("if(",gr,"){",Yr,"}");var Va=Je.block();Gn(Va),Fe.exit("if(",gr,"){",Va,"}")}function ds(Je,Fe,xt,Yt,Zt){var Dt=Je.shared;function At(Ze){switch(Ze){case Cf:case ld:case cd:return 2;case Ps:case Pc:case kc:return 3;case Bu:case Gu:case Dc:return 4;default:return 1}}function Ht(Ze,Ot,Ke){var Vt=Dt.gl,qt=Fe.def(Ze,".location"),Nn=Fe.def(Dt.attributes,"[",qt,"]"),Gn=Ke.state,Sn=Ke.buffer,gr=[Ke.x,Ke.y,Ke.z,Ke.w],Yr=["buffer","normalized","offset","stride"];function Va(){Fe("if(!",Nn,".buffer){",Vt,".enableVertexAttribArray(",qt,");}");var ua=Ke.type,Na;if(Ke.size?Na=Fe.def(Ke.size,"||",Ot):Na=Ot,Fe("if(",Nn,".type!==",ua,"||",Nn,".size!==",Na,"||",Yr.map(function(Oo){return Nn+"."+Oo+"!=="+Ke[Oo]}).join("||"),"){",Vt,".bindBuffer(",Tc,",",Sn,".buffer);",Vt,".vertexAttribPointer(",[qt,Na,ua,Ke.normalized,Ke.stride,Ke.offset],");",Nn,".type=",ua,";",Nn,".size=",Na,";",Yr.map(function(Oo){return Nn+"."+Oo+"="+Ke[Oo]+";"}).join(""),"}"),fr){var Ei=Ke.divisor;Fe("if(",Nn,".divisor!==",Ei,"){",Je.instancing,".vertexAttribDivisorANGLE(",[qt,Ei],");",Nn,".divisor=",Ei,";}")}}function Hr(){Fe("if(",Nn,".buffer){",Vt,".disableVertexAttribArray(",qt,");",Nn,".buffer=null;","}if(",xc.map(function(ua,Na){return Nn+"."+ua+"!=="+gr[Na]}).join("||"),"){",Vt,".vertexAttrib4f(",qt,",",gr,");",xc.map(function(ua,Na){return Nn+"."+ua+"="+gr[Na]+";"}).join(""),"}")}Gn===nu?Va():Gn===Yf?Hr():(Fe("if(",Gn,"===",nu,"){"),Va(),Fe("}else{"),Hr(),Fe("}"))}Yt.forEach(function(Ze){var Ot=Ze.name,Ke=xt.attributes[Ot],Vt;if(Ke){if(!Zt(Ke))return;Vt=Ke.append(Je,Fe)}else{if(!Zt(th))return;var qt=Je.scopeAttrib(Ot);I.optional(function(){Je.assert(Fe,qt+".state","missing attribute "+Ot)}),Vt={},Object.keys(new vn).forEach(function(Nn){Vt[Nn]=Fe.def(qt,".",Nn)})}Ht(Je.link(Ze),At(Ze.info.type),Vt)})}function Ii(Je,Fe,xt,Yt,Zt){for(var Dt=Je.shared,At=Dt.gl,Ht,Ze=0;Ze<Yt.length;++Ze){var Ot=Yt[Ze],Ke=Ot.name,Vt=Ot.info.type,qt=xt.uniforms[Ke],Nn=Je.link(Ot),Gn=Nn+".location",Sn;if(qt){if(!Zt(qt))continue;if(Vu(qt)){var gr=qt.value;if(I.command(gr!==null&&typeof gr!="undefined",'missing uniform "'+Ke+'"',Je.commandStr),Vt===Ef||Vt===Of){I.command(typeof gr=="function"&&(Vt===Ef&&(gr._reglType==="texture2d"||gr._reglType==="framebuffer")||Vt===Of&&(gr._reglType==="textureCube"||gr._reglType==="framebufferCube")),"invalid texture for uniform "+Ke,Je.commandStr);var Yr=Je.link(gr._texture||gr.color[0]._texture);Fe(At,".uniform1i(",Gn,",",Yr+".bind());"),Fe.exit(Yr,".unbind();")}else if(Vt===Bs||Vt===fd||Vt===du){I.optional(function(){I.command(Xr(gr),"invalid matrix for uniform "+Ke,Je.commandStr),I.command(Vt===Bs&&gr.length===4||Vt===fd&&gr.length===9||Vt===du&&gr.length===16,"invalid length for matrix uniform "+Ke,Je.commandStr)});var Va=Je.global.def("new Float32Array(["+Array.prototype.slice.call(gr)+"])"),Hr=2;Vt===fd?Hr=3:Vt===du&&(Hr=4),Fe(At,".uniformMatrix",Hr,"fv(",Gn,",false,",Va,");")}else{switch(Vt){case sd:I.commandType(gr,"number","uniform "+Ke,Je.commandStr),Ht="1f";break;case Cf:I.command(Xr(gr)&&gr.length===2,"uniform "+Ke,Je.commandStr),Ht="2f";break;case Ps:I.command(Xr(gr)&&gr.length===3,"uniform "+Ke,Je.commandStr),Ht="3f";break;case Bu:I.command(Xr(gr)&&gr.length===4,"uniform "+Ke,Je.commandStr),Ht="4f";break;case ll:I.commandType(gr,"boolean","uniform "+Ke,Je.commandStr),Ht="1i";break;case ud:I.commandType(gr,"number","uniform "+Ke,Je.commandStr),Ht="1i";break;case cd:I.command(Xr(gr)&&gr.length===2,"uniform "+Ke,Je.commandStr),Ht="2i";break;case ld:I.command(Xr(gr)&&gr.length===2,"uniform "+Ke,Je.commandStr),Ht="2i";break;case kc:I.command(Xr(gr)&&gr.length===3,"uniform "+Ke,Je.commandStr),Ht="3i";break;case Pc:I.command(Xr(gr)&&gr.length===3,"uniform "+Ke,Je.commandStr),Ht="3i";break;case Dc:I.command(Xr(gr)&&gr.length===4,"uniform "+Ke,Je.commandStr),Ht="4i";break;case Gu:I.command(Xr(gr)&&gr.length===4,"uniform "+Ke,Je.commandStr),Ht="4i";break}Fe(At,".uniform",Ht,"(",Gn,",",Xr(gr)?Array.prototype.slice.call(gr):gr,");")}continue}else Sn=qt.append(Je,Fe)}else{if(!Zt(th))continue;Sn=Fe.def(Dt.uniforms,"[",Ie.id(Ke),"]")}Vt===Ef?(I(!Array.isArray(Sn),"must specify a scalar prop for textures"),Fe("if(",Sn,"&&",Sn,'._reglType==="framebuffer"){',Sn,"=",Sn,".color[0];","}")):Vt===Of&&(I(!Array.isArray(Sn),"must specify a scalar prop for cube maps"),Fe("if(",Sn,"&&",Sn,'._reglType==="framebufferCube"){',Sn,"=",Sn,".color[0];","}")),I.optional(function(){function Us(Hu,Dp){Je.assert(Fe,Hu,'bad data or missing for uniform "'+Ke+'".  '+Dp)}function Cv(Hu){I(!Array.isArray(Sn),"must not specify an array type for uniform"),Us("typeof "+Sn+'==="'+Hu+'"',"invalid type, expected "+Hu)}function Au(Hu,Dp){Array.isArray(Sn)?I(Sn.length===Hu,"must have length "+Hu):Us(Dt.isArrayLike+"("+Sn+")&&"+Sn+".length==="+Hu,"invalid vector, should have length "+Hu,Je.commandStr)}function kp(Hu){I(!Array.isArray(Sn),"must not specify a value type"),Us("typeof "+Sn+'==="function"&&'+Sn+'._reglType==="texture'+(Hu===ci?"2d":"Cube")+'"',"invalid texture type",Je.commandStr)}switch(Vt){case ud:Cv("number");break;case ld:Au(2,"number");break;case Pc:Au(3,"number");break;case Gu:Au(4,"number");break;case sd:Cv("number");break;case Cf:Au(2,"number");break;case Ps:Au(3,"number");break;case Bu:Au(4,"number");break;case ll:Cv("boolean");break;case cd:Au(2,"boolean");break;case kc:Au(3,"boolean");break;case Dc:Au(4,"boolean");break;case Bs:Au(4,"number");break;case fd:Au(9,"number");break;case du:Au(16,"number");break;case Ef:kp(ci);break;case Of:kp(dm);break}});var ua=1;switch(Vt){case Ef:case Of:var Na=Fe.def(Sn,"._texture");Fe(At,".uniform1i(",Gn,",",Na,".bind());"),Fe.exit(Na,".unbind();");continue;case ud:case ll:Ht="1i";break;case ld:case cd:Ht="2i",ua=2;break;case Pc:case kc:Ht="3i",ua=3;break;case Gu:case Dc:Ht="4i",ua=4;break;case sd:Ht="1f";break;case Cf:Ht="2f",ua=2;break;case Ps:Ht="3f",ua=3;break;case Bu:Ht="4f",ua=4;break;case Bs:Ht="Matrix2fv";break;case fd:Ht="Matrix3fv";break;case du:Ht="Matrix4fv";break}if(Fe(At,".uniform",Ht,"(",Gn,","),Ht.charAt(0)==="M"){var Ei=Math.pow(Vt-Bs+2,2),Oo=Je.global.def("new Float32Array(",Ei,")");Array.isArray(Sn)?Fe("false,(",ka(Ei,function(Us){return Oo+"["+Us+"]="+Sn[Us]}),",",Oo,")"):Fe("false,(Array.isArray(",Sn,")||",Sn," instanceof Float32Array)?",Sn,":(",ka(Ei,function(Us){return Oo+"["+Us+"]="+Sn+"["+Us+"]"}),",",Oo,")")}else ua>1?Fe(ka(ua,function(Us){return Array.isArray(Sn)?Sn[Us]:Sn+"["+Us+"]"})):(I(!Array.isArray(Sn),"uniform value must not be an array"),Fe(Sn));Fe(");")}}function va(Je,Fe,xt,Yt){var Zt=Je.shared,Dt=Zt.gl,At=Zt.draw,Ht=Yt.draw;function Ze(){var Na=Ht.elements,Ei,Oo=Fe;return Na?((Na.contextDep&&Yt.contextDynamic||Na.propDep)&&(Oo=xt),Ei=Na.append(Je,Oo)):Ei=Oo.def(At,".",nc),Ei&&Oo("if("+Ei+")"+Dt+".bindBuffer("+cv+","+Ei+".buffer.buffer);"),Ei}function Ot(){var Na=Ht.count,Ei,Oo=Fe;return Na?((Na.contextDep&&Yt.contextDynamic||Na.propDep)&&(Oo=xt),Ei=Na.append(Je,Oo),I.optional(function(){Na.MISSING&&Je.assert(Fe,"false","missing vertex count"),Na.DYNAMIC&&Je.assert(Oo,Ei+">=0","missing vertex count")})):(Ei=Oo.def(At,".",Ml),I.optional(function(){Je.assert(Oo,Ei+">=0","missing vertex count")})),Ei}var Ke=Ze();function Vt(Na){var Ei=Ht[Na];return Ei?Ei.contextDep&&Yt.contextDynamic||Ei.propDep?Ei.append(Je,xt):Ei.append(Je,Fe):Fe.def(At,".",Na)}var qt=Vt(rc),Nn=Vt(Ac),Gn=Ot();if(typeof Gn=="number"){if(Gn===0)return}else xt("if(",Gn,"){"),xt.exit("}");var Sn,gr;fr&&(Sn=Vt(yf),gr=Je.instancing);var Yr=Ke+".type",Va=Ht.elements&&Vu(Ht.elements);function Hr(){function Na(){xt(gr,".drawElementsInstancedANGLE(",[qt,Gn,Yr,Nn+"<<(("+Yr+"-"+Sc+")>>1)",Sn],");")}function Ei(){xt(gr,".drawArraysInstancedANGLE(",[qt,Nn,Gn,Sn],");")}Ke?Va?Na():(xt("if(",Ke,"){"),Na(),xt("}else{"),Ei(),xt("}")):Ei()}function ua(){function Na(){xt(Dt+".drawElements("+[qt,Gn,Yr,Nn+"<<(("+Yr+"-"+Sc+")>>1)"]+");")}function Ei(){xt(Dt+".drawArrays("+[qt,Nn,Gn]+");")}Ke?Va?Na():(xt("if(",Ke,"){"),Na(),xt("}else{"),Ei(),xt("}")):Ei()}fr&&(typeof Sn!="number"||Sn>=0)?typeof Sn=="string"?(xt("if(",Sn,">0){"),Hr(),xt("}else if(",Sn,"<0){"),ua(),xt("}")):Hr():ua()}function Ba(Je,Fe,xt,Yt,Zt){var Dt=pa(),At=Dt.proc("body",Zt);return I.optional(function(){Dt.commandStr=Fe.commandStr,Dt.command=Dt.link(Fe.commandStr)}),fr&&(Dt.instancing=At.def(Dt.shared.extensions,".angle_instanced_arrays")),Je(Dt,At,xt,Yt),Dt.compile().body}function fi(Je,Fe,xt,Yt){Po(Je,Fe),xt.useVAO?xt.drawVAO?Fe(Je.shared.vao,".setVAO(",xt.drawVAO.append(Je,Fe),");"):Fe(Je.shared.vao,".setVAO(",Je.shared.vao,".targetVAO);"):(Fe(Je.shared.vao,".setVAO(null);"),ds(Je,Fe,xt,Yt.attributes,function(){return!0})),Ii(Je,Fe,xt,Yt.uniforms,function(){return!0}),va(Je,Fe,Fe,xt)}function es(Je,Fe){var xt=Je.proc("draw",1);Po(Je,xt),Eo(Je,xt,Fe.context),No(Je,xt,Fe.framebuffer),so(Je,xt,Fe),co(Je,xt,Fe.state),Fa(Je,xt,Fe,!1,!0);var Yt=Fe.shader.progVar.append(Je,xt);if(xt(Je.shared.gl,".useProgram(",Yt,".program);"),Fe.shader.program)fi(Je,xt,Fe,Fe.shader.program);else{xt(Je.shared.vao,".setVAO(null);");var Zt=Je.global.def("{}"),Dt=xt.def(Yt,".id"),At=xt.def(Zt,"[",Dt,"]");xt(Je.cond(At).then(At,".call(this,a0);").else(At,"=",Zt,"[",Dt,"]=",Je.link(function(Ht){return Ba(fi,Je,Fe,Ht,1)}),"(",Yt,");",At,".call(this,a0);"))}Object.keys(Fe.state).length>0&&xt(Je.shared.current,".dirty=true;")}function zs(Je,Fe,xt,Yt){Je.batchId="a1",Po(Je,Fe);function Zt(){return!0}ds(Je,Fe,xt,Yt.attributes,Zt),Ii(Je,Fe,xt,Yt.uniforms,Zt),va(Je,Fe,Fe,xt)}function Lc(Je,Fe,xt,Yt){Po(Je,Fe);var Zt=xt.contextDep,Dt=Fe.def(),At="a0",Ht="a1",Ze=Fe.def();Je.shared.props=Ze,Je.batchId=Dt;var Ot=Je.scope(),Ke=Je.scope();Fe(Ot.entry,"for(",Dt,"=0;",Dt,"<",Ht,";++",Dt,"){",Ze,"=",At,"[",Dt,"];",Ke,"}",Ot.exit);function Vt(Yr){return Yr.contextDep&&Zt||Yr.propDep}function qt(Yr){return!Vt(Yr)}if(xt.needsContext&&Eo(Je,Ke,xt.context),xt.needsFramebuffer&&No(Je,Ke,xt.framebuffer),co(Je,Ke,xt.state,Vt),xt.profile&&Vt(xt.profile)&&Fa(Je,Ke,xt,!1,!0),Yt)xt.useVAO?xt.drawVAO?Vt(xt.drawVAO)?Ke(Je.shared.vao,".setVAO(",xt.drawVAO.append(Je,Ke),");"):Ot(Je.shared.vao,".setVAO(",xt.drawVAO.append(Je,Ot),");"):Ot(Je.shared.vao,".setVAO(",Je.shared.vao,".targetVAO);"):(Ot(Je.shared.vao,".setVAO(null);"),ds(Je,Ot,xt,Yt.attributes,qt),ds(Je,Ke,xt,Yt.attributes,Vt)),Ii(Je,Ot,xt,Yt.uniforms,qt),Ii(Je,Ke,xt,Yt.uniforms,Vt),va(Je,Ot,Ke,xt);else{var Nn=Je.global.def("{}"),Gn=xt.shader.progVar.append(Je,Ke),Sn=Ke.def(Gn,".id"),gr=Ke.def(Nn,"[",Sn,"]");Ke(Je.shared.gl,".useProgram(",Gn,".program);","if(!",gr,"){",gr,"=",Nn,"[",Sn,"]=",Je.link(function(Yr){return Ba(zs,Je,xt,Yr,2)}),"(",Gn,");}",gr,".call(this,a0[",Dt,"],",Dt,");")}}function at(Je,Fe){var xt=Je.proc("batch",2);Je.batchId="0",Po(Je,xt);var Yt=!1,Zt=!0;Object.keys(Fe.context).forEach(function(Nn){Yt=Yt||Fe.context[Nn].propDep}),Yt||(Eo(Je,xt,Fe.context),Zt=!1);var Dt=Fe.framebuffer,At=!1;Dt?(Dt.propDep?Yt=At=!0:Dt.contextDep&&Yt&&(At=!0),At||No(Je,xt,Dt)):No(Je,xt,null),Fe.state.viewport&&Fe.state.viewport.propDep&&(Yt=!0);function Ht(Nn){return Nn.contextDep&&Yt||Nn.propDep}so(Je,xt,Fe),co(Je,xt,Fe.state,function(Nn){return!Ht(Nn)}),(!Fe.profile||!Ht(Fe.profile))&&Fa(Je,xt,Fe,!1,"a1"),Fe.contextDep=Yt,Fe.needsContext=Zt,Fe.needsFramebuffer=At;var Ze=Fe.shader.progVar;if(Ze.contextDep&&Yt||Ze.propDep)Lc(Je,xt,Fe,null);else{var Ot=Ze.append(Je,xt);if(xt(Je.shared.gl,".useProgram(",Ot,".program);"),Fe.shader.program)Lc(Je,xt,Fe,Fe.shader.program);else{xt(Je.shared.vao,".setVAO(null);");var Ke=Je.global.def("{}"),Vt=xt.def(Ot,".id"),qt=xt.def(Ke,"[",Vt,"]");xt(Je.cond(qt).then(qt,".call(this,a0,a1);").else(qt,"=",Ke,"[",Vt,"]=",Je.link(function(Nn){return Ba(Lc,Je,Fe,Nn,2)}),"(",Ot,");",qt,".call(this,a0,a1);"))}}Object.keys(Fe.state).length>0&&xt(Je.shared.current,".dirty=true;")}function En(Je,Fe){var xt=Je.proc("scope",3);Je.batchId="a2";var Yt=Je.shared,Zt=Yt.current;Eo(Je,xt,Fe.context),Fe.framebuffer&&Fe.framebuffer.append(Je,xt),mv(Object.keys(Fe.state)).forEach(function(At){var Ht=Fe.state[At],Ze=Ht.append(Je,xt);Xr(Ze)?Ze.forEach(function(Ot,Ke){xt.set(Je.next[At],"["+Ke+"]",Ot)}):xt.set(Yt.next,"."+At,Ze)}),Fa(Je,xt,Fe,!0,!0),[nc,Ac,Ml,yf,rc].forEach(function(At){var Ht=Fe.draw[At];!Ht||xt.set(Yt.draw,"."+At,""+Ht.append(Je,xt))}),Object.keys(Fe.uniforms).forEach(function(At){var Ht=Fe.uniforms[At].append(Je,xt);Array.isArray(Ht)&&(Ht="["+Ht.join()+"]"),xt.set(Yt.uniforms,"["+Ie.id(At)+"]",Ht)}),Object.keys(Fe.attributes).forEach(function(At){var Ht=Fe.attributes[At].append(Je,xt),Ze=Je.scopeAttrib(At);Object.keys(new vn).forEach(function(Ot){xt.set(Ze,"."+Ot,Ht[Ot])})}),Fe.scopeVAO&&xt.set(Yt.vao,".targetVAO",Fe.scopeVAO.append(Je,xt));function Dt(At){var Ht=Fe.shader[At];Ht&&xt.set(Yt.shader,"."+At,Ht.append(Je,xt))}Dt(nd),Dt(rd),Object.keys(Fe.state).length>0&&(xt(Zt,".dirty=true;"),xt.exit(Zt,".dirty=true;")),xt("a1(",Je.shared.context,",a0,",Je.batchId,");")}function an(Je){if(!(typeof Je!="object"||Xr(Je))){for(var Fe=Object.keys(Je),xt=0;xt<Fe.length;++xt)if(Rn.isDynamic(Je[Fe[xt]]))return!0;return!1}}function Fr(Je,Fe,xt){var Yt=Fe.static[xt];if(!Yt||!an(Yt))return;var Zt=Je.global,Dt=Object.keys(Yt),At=!1,Ht=!1,Ze=!1,Ot=Je.global.def("{}");Dt.forEach(function(Vt){var qt=Yt[Vt];if(Rn.isDynamic(qt)){typeof qt=="function"&&(qt=Yt[Vt]=Rn.unbox(qt));var Nn=Os(qt,null);At=At||Nn.thisDep,Ze=Ze||Nn.propDep,Ht=Ht||Nn.contextDep}else{switch(Zt(Ot,".",Vt,"="),typeof qt){case"number":Zt(qt);break;case"string":Zt('"',qt,'"');break;case"object":Array.isArray(qt)&&Zt("[",qt.join(),"]");break;default:Zt(Je.link(qt));break}Zt(";")}});function Ke(Vt,qt){Dt.forEach(function(Nn){var Gn=Yt[Nn];if(!!Rn.isDynamic(Gn)){var Sn=Vt.invoke(qt,Gn);qt(Ot,".",Nn,"=",Sn,";")}})}Fe.dynamic[xt]=new Rn.DynamicVariable(Jf,{thisDep:At,contextDep:Ht,propDep:Ze,ref:Ot,append:Ke}),delete Fe.static[xt]}function Ga(Je,Fe,xt,Yt,Zt){var Dt=pa();Dt.stats=Dt.link(Zt),Object.keys(Fe.static).forEach(function(Ht){Fr(Dt,Fe,Ht)}),ad.forEach(function(Ht){Fr(Dt,Je,Ht)});var At=to(Je,Fe,xt,Yt,Dt);return es(Dt,At),En(Dt,At),at(Dt,At),p(Dt.compile(),{destroy:function(){At.shader.program.destroy()}})}return{next:Vr,current:kn,procs:function(){var Je=pa(),Fe=Je.proc("poll"),xt=Je.proc("refresh"),Yt=Je.block();Fe(Yt),xt(Yt);var Zt=Je.shared,Dt=Zt.gl,At=Zt.next,Ht=Zt.current;Yt(Ht,".dirty=false;"),No(Je,Fe),No(Je,xt,null,!0);var Ze;fr&&(Ze=Je.link(fr)),gt.oes_vertex_array_object&&xt(Je.link(gt.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ot=0;Ot<rn.maxAttributes;++Ot){var Ke=xt.def(Zt.attributes,"[",Ot,"]"),Vt=Je.cond(Ke,".buffer");Vt.then(Dt,".enableVertexAttribArray(",Ot,");",Dt,".bindBuffer(",Tc,",",Ke,".buffer.buffer);",Dt,".vertexAttribPointer(",Ot,",",Ke,".size,",Ke,".type,",Ke,".normalized,",Ke,".stride,",Ke,".offset);").else(Dt,".disableVertexAttribArray(",Ot,");",Dt,".vertexAttrib4f(",Ot,",",Ke,".x,",Ke,".y,",Ke,".z,",Ke,".w);",Ke,".buffer=null;"),xt(Vt),fr&&xt(Ze,".vertexAttribDivisorANGLE(",Ot,",",Ke,".divisor);")}return xt(Je.shared.vao,".currentVAO=null;",Je.shared.vao,".setVAO(",Je.shared.vao,".targetVAO);"),Object.keys(Jn).forEach(function(qt){var Nn=Jn[qt],Gn=Yt.def(At,".",qt),Sn=Je.block();Sn("if(",Gn,"){",Dt,".enable(",Nn,")}else{",Dt,".disable(",Nn,")}",Ht,".",qt,"=",Gn,";"),xt(Sn),Fe("if(",Gn,"!==",Ht,".",qt,"){",Sn,"}")}),Object.keys(Qn).forEach(function(qt){var Nn=Qn[qt],Gn=kn[qt],Sn,gr,Yr=Je.block();if(Yr(Dt,".",Nn,"("),Xr(Gn)){var Va=Gn.length;Sn=Je.global.def(At,".",qt),gr=Je.global.def(Ht,".",qt),Yr(ka(Va,function(Hr){return Sn+"["+Hr+"]"}),");",ka(Va,function(Hr){return gr+"["+Hr+"]="+Sn+"["+Hr+"];"}).join("")),Fe("if(",ka(Va,function(Hr){return Sn+"["+Hr+"]!=="+gr+"["+Hr+"]"}).join("||"),"){",Yr,"}")}else Sn=Yt.def(At,".",qt),gr=Yt.def(Ht,".",qt),Yr(Sn,");",Ht,".",qt,"=",Sn,";"),Fe("if(",Sn,"!==",gr,"){",Yr,"}");xt(Yr)}),Je.compile()}(),compile:Ga}}function xf(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Ap=34918,vd=34919,rh=35007,ah=function(Ie,gt){if(!gt.ext_disjoint_timer_query)return null;var rn=[];function Jt(){return rn.pop()||gt.ext_disjoint_timer_query.createQueryEXT()}function wn(Lr){rn.push(Lr)}var fn=[];function Wn(Lr){var kn=Jt();gt.ext_disjoint_timer_query.beginQueryEXT(rh,kn),fn.push(kn),pr(fn.length-1,fn.length,Lr)}function wr(){gt.ext_disjoint_timer_query.endQueryEXT(rh)}function ur(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var cr=[];function ir(){return cr.pop()||new ur}function Ir(Lr){cr.push(Lr)}var Tr=[];function pr(Lr,kn,Vr){var $n=ir();$n.startQueryIndex=Lr,$n.endQueryIndex=kn,$n.sum=0,$n.stats=Vr,Tr.push($n)}var vn=[],cn=[];function fr(){var Lr,kn,Vr=fn.length;if(Vr!==0){cn.length=Math.max(cn.length,Vr+1),vn.length=Math.max(vn.length,Vr+1),vn[0]=0,cn[0]=0;var $n=0;for(Lr=0,kn=0;kn<fn.length;++kn){var Jn=fn[kn];gt.ext_disjoint_timer_query.getQueryObjectEXT(Jn,vd)?($n+=gt.ext_disjoint_timer_query.getQueryObjectEXT(Jn,Ap),wn(Jn)):fn[Lr++]=Jn,vn[kn+1]=$n,cn[kn+1]=Lr}for(fn.length=Lr,Lr=0,kn=0;kn<Tr.length;++kn){var Qn=Tr[kn],hr=Qn.startQueryIndex,Qr=Qn.endQueryIndex;Qn.sum+=vn[Qr]-vn[hr];var wa=cn[hr],Pr=cn[Qr];Pr===wa?(Qn.stats.gpuTime+=Qn.sum/1e6,Ir(Qn)):(Qn.startQueryIndex=wa,Qn.endQueryIndex=Pr,Tr[Lr++]=Qn)}Tr.length=Lr}}return{beginQuery:Wn,endQuery:wr,pushScopeStats:pr,update:fr,getNumPendingQueries:function(){return fn.length},clear:function(){rn.push.apply(rn,fn);for(var kn=0;kn<rn.length;kn++)gt.ext_disjoint_timer_query.deleteQueryEXT(rn[kn]);fn.length=0,rn.length=0},restore:function(){fn.length=0,rn.length=0}}},jc=16384,Mp=256,oo=1024,Tp=34962,Sf="webglcontextlost",Pp="webglcontextrestored",yv=1,pd=2,mm=3;function hu(we,Ie){for(var gt=0;gt<we.length;++gt)if(we[gt]===Ie)return gt;return-1}function bv(we){var Ie=ri(we);if(!Ie)return null;var gt=Ie.gl,rn=gt.getContextAttributes(),Jt=gt.isContextLost(),wn=li(gt,Ie);if(!wn)return null;var fn=jr(),Wn=xf(),wr=wn.extensions,ur=ah(gt,wr),cr=tr(),ir=gt.drawingBufferWidth,Ir=gt.drawingBufferHeight,Tr={tick:0,time:0,viewportWidth:ir,viewportHeight:Ir,framebufferWidth:ir,framebufferHeight:Ir,drawingBufferWidth:ir,drawingBufferHeight:Ir,pixelRatio:Ie.pixelRatio},pr={},vn={elements:null,primitive:4,count:-1,offset:0,instances:-1},cn=Vo(gt,wr),fr=Ar(gt,Wn,Ie,kn),Lr=Lu(gt,wr,cn,Wn,fr);function kn(va){return Lr.destroyBuffer(va)}var Vr=_n(gt,wr,fr,Wn),$n=um(gt,fn,Wn,Ie),Jn=Kg(gt,wr,cn,function(){Qr.procs.poll()},Tr,Wn,Ie),Qn=Fd(gt,wr,cn,Wn,Ie),hr=im(gt,wr,cn,Jn,Qn,Wn),Qr=nh(gt,fn,wr,cn,fr,Vr,Jn,hr,pr,Lr,$n,vn,Tr,ur,Ie),wa=Ud(gt,hr,Qr.procs.poll,Tr,rn,wr,cn),Pr=Qr.next,mr=gt.canvas,Un=[],pa=[],Wa=[],Ur=[Ie.onDestroy],Xa=null;function xa(){if(Un.length===0){ur&&ur.update(),Xa=null;return}Xa=Cr.next(xa),co();for(var va=Un.length-1;va>=0;--va){var Ba=Un[va];Ba&&Ba(Tr,null,0)}gt.flush(),ur&&ur.update()}function $a(){!Xa&&Un.length>0&&(Xa=Cr.next(xa))}function Ci(){Xa&&(Cr.cancel(xa),Xa=null)}function Co(va){va.preventDefault(),Jt=!0,Ci(),pa.forEach(function(Ba){Ba()})}function Lo(va){gt.getError(),Jt=!1,wn.restore(),$n.restore(),fr.restore(),Jn.restore(),Qn.restore(),hr.restore(),Lr.restore(),ur&&ur.restore(),Qr.procs.refresh(),$a(),Wa.forEach(function(Ba){Ba()})}mr&&(mr.addEventListener(Sf,Co,!1),mr.addEventListener(Pp,Lo,!1));function Ya(){Un.length=0,Ci(),mr&&(mr.removeEventListener(Sf,Co),mr.removeEventListener(Pp,Lo)),$n.clear(),hr.clear(),Qn.clear(),Jn.clear(),Vr.clear(),fr.clear(),Lr.clear(),ur&&ur.clear(),Ur.forEach(function(va){va()})}function To(va){I(!!va,"invalid args to regl({...})"),I.type(va,"object","invalid args to regl({...})");function Ba(Zt){var Dt=p({},Zt);delete Dt.uniforms,delete Dt.attributes,delete Dt.context,delete Dt.vao,"stencil"in Dt&&Dt.stencil.op&&(Dt.stencil.opBack=Dt.stencil.opFront=Dt.stencil.op,delete Dt.stencil.op);function At(Ht){if(Ht in Dt){var Ze=Dt[Ht];delete Dt[Ht],Object.keys(Ze).forEach(function(Ot){Dt[Ht+"."+Ot]=Ze[Ot]})}}return At("blend"),At("depth"),At("cull"),At("stencil"),At("polygonOffset"),At("scissor"),At("sample"),"vao"in Zt&&(Dt.vao=Zt.vao),Dt}function fi(Zt,Dt){var At={},Ht={};return Object.keys(Zt).forEach(function(Ze){var Ot=Zt[Ze];if(Rn.isDynamic(Ot)){Ht[Ze]=Rn.unbox(Ot,Ze);return}else if(Dt&&Array.isArray(Ot)){for(var Ke=0;Ke<Ot.length;++Ke)if(Rn.isDynamic(Ot[Ke])){Ht[Ze]=Rn.unbox(Ot,Ze);return}}At[Ze]=Ot}),{dynamic:Ht,static:At}}var es=fi(va.context||{},!0),zs=fi(va.uniforms||{},!0),Lc=fi(va.attributes||{},!1),at=fi(Ba(va),!1),En={gpuTime:0,cpuTime:0,count:0},an=Qr.compile(at,Lc,zs,es,En),Fr=an.draw,Ga=an.batch,Je=an.scope,Fe=[];function xt(Zt){for(;Fe.length<Zt;)Fe.push(null);return Fe}function Yt(Zt,Dt){var At;if(Jt&&I.raise("context lost"),typeof Zt=="function")return Je.call(this,null,Zt,0);if(typeof Dt=="function")if(typeof Zt=="number")for(At=0;At<Zt;++At)Je.call(this,null,Dt,At);else if(Array.isArray(Zt))for(At=0;At<Zt.length;++At)Je.call(this,Zt[At],Dt,At);else return Je.call(this,Zt,Dt,0);else if(typeof Zt=="number"){if(Zt>0)return Ga.call(this,xt(Zt|0),Zt|0)}else if(Array.isArray(Zt)){if(Zt.length)return Ga.call(this,Zt,Zt.length)}else return Fr.call(this,Zt)}return p(Yt,{stats:En,destroy:function(){an.destroy()}})}var eo=hr.setFBO=To({framebuffer:Rn.define.call(null,yv,"framebuffer")});function to(va,Ba){var fi=0;Qr.procs.poll();var es=Ba.color;es&&(gt.clearColor(+es[0]||0,+es[1]||0,+es[2]||0,+es[3]||0),fi|=jc),"depth"in Ba&&(gt.clearDepth(+Ba.depth),fi|=Mp),"stencil"in Ba&&(gt.clearStencil(Ba.stencil|0),fi|=oo),I(!!fi,"called regl.clear with no buffer specified"),gt.clear(fi)}function Eo(va){if(I(typeof va=="object"&&va,"regl.clear() takes an object as input"),"framebuffer"in va)if(va.framebuffer&&va.framebuffer_reglType==="framebufferCube")for(var Ba=0;Ba<6;++Ba)eo(p({framebuffer:va.framebuffer.faces[Ba]},va),to);else eo(va,to);else to(null,va)}function No(va){I.type(va,"function","regl.frame() callback must be a function"),Un.push(va);function Ba(){var fi=hu(Un,va);I(fi>=0,"cannot cancel a frame twice");function es(){var zs=hu(Un,es);Un[zs]=Un[Un.length-1],Un.length-=1,Un.length<=0&&Ci()}Un[fi]=es}return $a(),{cancel:Ba}}function so(){var va=Pr.viewport,Ba=Pr.scissor_box;va[0]=va[1]=Ba[0]=Ba[1]=0,Tr.viewportWidth=Tr.framebufferWidth=Tr.drawingBufferWidth=va[2]=Ba[2]=gt.drawingBufferWidth,Tr.viewportHeight=Tr.framebufferHeight=Tr.drawingBufferHeight=va[3]=Ba[3]=gt.drawingBufferHeight}function co(){Tr.tick+=1,Tr.time=Fa(),so(),Qr.procs.poll()}function Po(){Jn.refresh(),so(),Qr.procs.refresh(),ur&&ur.update()}function Fa(){return(tr()-cr)/1e3}Po();function ds(va,Ba){I.type(Ba,"function","listener callback must be a function");var fi;switch(va){case"frame":return No(Ba);case"lost":fi=pa;break;case"restore":fi=Wa;break;case"destroy":fi=Ur;break;default:I.raise("invalid event, must be one of frame,lost,restore,destroy")}return fi.push(Ba),{cancel:function(){for(var zs=0;zs<fi.length;++zs)if(fi[zs]===Ba){fi[zs]=fi[fi.length-1],fi.pop();return}}}}var Ii=p(To,{clear:Eo,prop:Rn.define.bind(null,yv),context:Rn.define.bind(null,pd),this:Rn.define.bind(null,mm),draw:To({}),buffer:function(Ba){return fr.create(Ba,Tp,!1,!1)},elements:function(Ba){return Vr.create(Ba,!1)},texture:Jn.create2D,cube:Jn.createCube,renderbuffer:Qn.create,framebuffer:hr.create,framebufferCube:hr.createCube,vao:Lr.createVAO,attributes:rn,frame:No,on:ds,limits:cn,hasExtension:function(Ba){return cn.extensions.indexOf(Ba.toLowerCase())>=0},read:wa,destroy:Ya,_gl:gt,_refresh:Po,poll:function(){co(),ur&&ur.update()},now:Fa,stats:Wn});return Ie.onDone(null,Ii),Ii}return bv})},fsL8:function(ge,R,h){var B=h("cDf5").default;function p(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ge.exports=p=function(){return S},ge.exports.__esModule=!0,ge.exports.default=ge.exports;var S={},E=Object.prototype,A=E.hasOwnProperty,k=Object.defineProperty||function(D,je,pt){D[je]=pt.value},M=typeof Symbol=="function"?Symbol:{},U=M.iterator||"@@iterator",V=M.asyncIterator||"@@asyncIterator",$=M.toStringTag||"@@toStringTag";function W(D,je,pt){return Object.defineProperty(D,je,{value:pt,enumerable:!0,configurable:!0,writable:!0}),D[je]}try{W({},"")}catch(D){W=function(pt,nt,Lt){return pt[nt]=Lt}}function Y(D,je,pt,nt){var Lt=je&&je.prototype instanceof ie?je:ie,Gt=Object.create(Lt.prototype),$e=new he(nt||[]);return k(Gt,"_invoke",{value:ae(D,pt,$e)}),Gt}function ee(D,je,pt){try{return{type:"normal",arg:D.call(je,pt)}}catch(nt){return{type:"throw",arg:nt}}}S.wrap=Y;var ne={};function ie(){}function re(){}function J(){}var ce={};W(ce,U,function(){return this});var G=Object.getPrototypeOf,Z=G&&G(G(Oe([])));Z&&Z!==E&&A.call(Z,U)&&(ce=Z);var fe=J.prototype=ie.prototype=Object.create(ce);function se(D){["next","throw","return"].forEach(function(je){W(D,je,function(pt){return this._invoke(je,pt)})})}function ve(D,je){function pt(Lt,Gt,$e,jt){var Be=ee(D[Lt],D,Gt);if(Be.type!=="throw"){var pe=Be.arg,un=pe.value;return un&&B(un)=="object"&&A.call(un,"__await")?je.resolve(un.__await).then(function(ln){pt("next",ln,$e,jt)},function(ln){pt("throw",ln,$e,jt)}):je.resolve(un).then(function(ln){pe.value=ln,$e(pe)},function(ln){return pt("throw",ln,$e,jt)})}jt(Be.arg)}var nt;k(this,"_invoke",{value:function(Gt,$e){function jt(){return new je(function(Be,pe){pt(Gt,$e,Be,pe)})}return nt=nt?nt.then(jt,jt):jt()}})}function ae(D,je,pt){var nt="suspendedStart";return function(Lt,Gt){if(nt==="executing")throw new Error("Generator is already running");if(nt==="completed"){if(Lt==="throw")throw Gt;return We()}for(pt.method=Lt,pt.arg=Gt;;){var $e=pt.delegate;if($e){var jt=j($e,pt);if(jt){if(jt===ne)continue;return jt}}if(pt.method==="next")pt.sent=pt._sent=pt.arg;else if(pt.method==="throw"){if(nt==="suspendedStart")throw nt="completed",pt.arg;pt.dispatchException(pt.arg)}else pt.method==="return"&&pt.abrupt("return",pt.arg);nt="executing";var Be=ee(D,je,pt);if(Be.type==="normal"){if(nt=pt.done?"completed":"suspendedYield",Be.arg===ne)continue;return{value:Be.arg,done:pt.done}}Be.type==="throw"&&(nt="completed",pt.method="throw",pt.arg=Be.arg)}}}function j(D,je){var pt=je.method,nt=D.iterator[pt];if(nt===void 0)return je.delegate=null,pt==="throw"&&D.iterator.return&&(je.method="return",je.arg=void 0,j(D,je),je.method==="throw")||pt!=="return"&&(je.method="throw",je.arg=new TypeError("The iterator does not provide a '"+pt+"' method")),ne;var Lt=ee(nt,D.iterator,je.arg);if(Lt.type==="throw")return je.method="throw",je.arg=Lt.arg,je.delegate=null,ne;var Gt=Lt.arg;return Gt?Gt.done?(je[D.resultName]=Gt.value,je.next=D.nextLoc,je.method!=="return"&&(je.method="next",je.arg=void 0),je.delegate=null,ne):Gt:(je.method="throw",je.arg=new TypeError("iterator result is not an object"),je.delegate=null,ne)}function de(D){var je={tryLoc:D[0]};1 in D&&(je.catchLoc=D[1]),2 in D&&(je.finallyLoc=D[2],je.afterLoc=D[3]),this.tryEntries.push(je)}function ke(D){var je=D.completion||{};je.type="normal",delete je.arg,D.completion=je}function he(D){this.tryEntries=[{tryLoc:"root"}],D.forEach(de,this),this.reset(!0)}function Oe(D){if(D){var je=D[U];if(je)return je.call(D);if(typeof D.next=="function")return D;if(!isNaN(D.length)){var pt=-1,nt=function Lt(){for(;++pt<D.length;)if(A.call(D,pt))return Lt.value=D[pt],Lt.done=!1,Lt;return Lt.value=void 0,Lt.done=!0,Lt};return nt.next=nt}}return{next:We}}function We(){return{value:void 0,done:!0}}return re.prototype=J,k(fe,"constructor",{value:J,configurable:!0}),k(J,"constructor",{value:re,configurable:!0}),re.displayName=W(J,$,"GeneratorFunction"),S.isGeneratorFunction=function(D){var je=typeof D=="function"&&D.constructor;return!!je&&(je===re||(je.displayName||je.name)==="GeneratorFunction")},S.mark=function(D){return Object.setPrototypeOf?Object.setPrototypeOf(D,J):(D.__proto__=J,W(D,$,"GeneratorFunction")),D.prototype=Object.create(fe),D},S.awrap=function(D){return{__await:D}},se(ve.prototype),W(ve.prototype,V,function(){return this}),S.AsyncIterator=ve,S.async=function(D,je,pt,nt,Lt){Lt===void 0&&(Lt=Promise);var Gt=new ve(Y(D,je,pt,nt),Lt);return S.isGeneratorFunction(je)?Gt:Gt.next().then(function($e){return $e.done?$e.value:Gt.next()})},se(fe),W(fe,$,"Generator"),W(fe,U,function(){return this}),W(fe,"toString",function(){return"[object Generator]"}),S.keys=function(D){var je=Object(D),pt=[];for(var nt in je)pt.push(nt);return pt.reverse(),function Lt(){for(;pt.length;){var Gt=pt.pop();if(Gt in je)return Lt.value=Gt,Lt.done=!1,Lt}return Lt.done=!0,Lt}},S.values=Oe,he.prototype={constructor:he,reset:function(je){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ke),!je)for(var pt in this)pt.charAt(0)==="t"&&A.call(this,pt)&&!isNaN(+pt.slice(1))&&(this[pt]=void 0)},stop:function(){this.done=!0;var je=this.tryEntries[0].completion;if(je.type==="throw")throw je.arg;return this.rval},dispatchException:function(je){if(this.done)throw je;var pt=this;function nt(pe,un){return $e.type="throw",$e.arg=je,pt.next=pe,un&&(pt.method="next",pt.arg=void 0),!!un}for(var Lt=this.tryEntries.length-1;Lt>=0;--Lt){var Gt=this.tryEntries[Lt],$e=Gt.completion;if(Gt.tryLoc==="root")return nt("end");if(Gt.tryLoc<=this.prev){var jt=A.call(Gt,"catchLoc"),Be=A.call(Gt,"finallyLoc");if(jt&&Be){if(this.prev<Gt.catchLoc)return nt(Gt.catchLoc,!0);if(this.prev<Gt.finallyLoc)return nt(Gt.finallyLoc)}else if(jt){if(this.prev<Gt.catchLoc)return nt(Gt.catchLoc,!0)}else{if(!Be)throw new Error("try statement without catch or finally");if(this.prev<Gt.finallyLoc)return nt(Gt.finallyLoc)}}}},abrupt:function(je,pt){for(var nt=this.tryEntries.length-1;nt>=0;--nt){var Lt=this.tryEntries[nt];if(Lt.tryLoc<=this.prev&&A.call(Lt,"finallyLoc")&&this.prev<Lt.finallyLoc){var Gt=Lt;break}}Gt&&(je==="break"||je==="continue")&&Gt.tryLoc<=pt&&pt<=Gt.finallyLoc&&(Gt=null);var $e=Gt?Gt.completion:{};return $e.type=je,$e.arg=pt,Gt?(this.method="next",this.next=Gt.finallyLoc,ne):this.complete($e)},complete:function(je,pt){if(je.type==="throw")throw je.arg;return je.type==="break"||je.type==="continue"?this.next=je.arg:je.type==="return"?(this.rval=this.arg=je.arg,this.method="return",this.next="end"):je.type==="normal"&&pt&&(this.next=pt),ne},finish:function(je){for(var pt=this.tryEntries.length-1;pt>=0;--pt){var nt=this.tryEntries[pt];if(nt.finallyLoc===je)return this.complete(nt.completion,nt.afterLoc),ke(nt),ne}},catch:function(je){for(var pt=this.tryEntries.length-1;pt>=0;--pt){var nt=this.tryEntries[pt];if(nt.tryLoc===je){var Lt=nt.completion;if(Lt.type==="throw"){var Gt=Lt.arg;ke(nt)}return Gt}}throw new Error("illegal catch attempt")},delegateYield:function(je,pt,nt){return this.delegate={iterator:Oe(je),resultName:pt,nextLoc:nt},this.method==="next"&&(this.arg=void 0),ne}},S}ge.exports=p,ge.exports.__esModule=!0,ge.exports.default=ge.exports},g1CP:function(ge,R,h){"use strict";h.d(R,"a",function(){return D});var B=h("o0o1"),p=h.n(B),S=h("yXPU"),E=h.n(S),A=h("yG8O"),k=h.n(A),M=h("lwsE"),U=h.n(M),V=h("U+yc"),$=h.n(V),W=h("1ABj"),Y=h.n(W),ee=h("4cb6"),ne=h.n(ee),ie=h("+uE7"),re=h("k6w6"),J=h("94HZ"),ce,G,Z,fe,se,ve,ae,j,de,ke=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,he=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Oe=`layout(set = 0, binding = 0) uniform sampler u_TextureSampler;
layout(set = 0, binding = 1) uniform texture2D u_Texture;

layout(location = 0) in vec2 v_UV;
layout(location = 0) out vec4 outColor;

void main() {
  outColor = texture(sampler2D(u_Texture, u_TextureSampler), v_UV);
}`,We=`layout(location = 0) in vec2 a_Position;
layout(location = 0) out vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,D=(ce=Object(ee.injectable)(),G=Object(ee.inject)(ie.a.RenderEngine),Z=Object(ee.inject)(ie.a.ResourcePool),ce(fe=(se=(de=j=function je(){var pt=this;U()(this,je),k()(this,"engine",ve,this),k()(this,"resourcePool",ae,this),this.model=void 0,this.setup=function(nt,Lt,Gt){var $e=nt.getPass(J.a.IDENTIFIER);if($e){var jt=nt.createRenderTarget(Lt,"render to screen",{width:1,height:1});Gt.data={input:Lt.read($e.data.output),output:Lt.write(nt,jt)}}},this.execute=function(){var nt=E()(p.a.mark(function Lt(Gt,$e){var jt,Be,pe,un,ln,Fn,Ft;return p.a.wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(jt=pt.engine,Be=jt.createModel,pe=jt.createAttribute,un=jt.createBuffer,pt.model){lr.next=6;break}return lr.next=4,Be({vs:pt.engine.supportWebGPU?We:he,fs:pt.engine.supportWebGPU?Oe:ke,attributes:{a_Position:pe({buffer:un({data:[-4,-4,4,-4,0,4],type:re.a.FLOAT}),size:2,arrayStride:2*4,stepMode:"vertex",attributes:[{shaderLocation:0,offset:0,format:"float2"}]})},uniforms:{u_Texture:null},depth:{enable:!1},count:3,blend:{enable:!0}});case 4:ln=lr.sent,pt.model=ln;case 6:Fn=Gt.getResourceNode($e.data.input),Ft=pt.resourcePool.getOrCreateResource(Fn.resource),pt.engine.useFramebuffer(null,function(){pt.engine.clear({framebuffer:null,color:[0,0,0,0],depth:1,stencil:0}),pt.model.draw({uniforms:{u_Texture:Ft}})});case 9:case"end":return lr.stop()}},Lt)}));return function(Lt,Gt){return nt.apply(this,arguments)}}(),this.tearDown=function(){pt.model=void 0}},j.IDENTIFIER="Copy Pass",de),ve=$()(se.prototype,"engine",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae=$()(se.prototype,"resourcePool",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se))||fe)},ga3A:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="SaveOutlined";var M=R.a=p.forwardRef(k)},gzZq:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.BindingToSyntax=void 0;var B=h("MON2"),p=h("FV85"),S=h("D9lx"),E=h("LKzl"),A=function(){function k(M){this._binding=M}return k.prototype.to=function(M){return this._binding.type=p.BindingTypeEnum.Instance,this._binding.implementationType=M,new S.BindingInWhenOnSyntax(this._binding)},k.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+B.INVALID_TO_SELF_VALUE);var M=this._binding.serviceIdentifier;return this.to(M)},k.prototype.toConstantValue=function(M){return this._binding.type=p.BindingTypeEnum.ConstantValue,this._binding.cache=M,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=p.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},k.prototype.toDynamicValue=function(M){return this._binding.type=p.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=M,this._binding.implementationType=null,new S.BindingInWhenOnSyntax(this._binding)},k.prototype.toConstructor=function(M){return this._binding.type=p.BindingTypeEnum.Constructor,this._binding.implementationType=M,this._binding.scope=p.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},k.prototype.toFactory=function(M){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=M,this._binding.scope=p.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},k.prototype.toFunction=function(M){if(typeof M!="function")throw new Error(B.INVALID_FUNCTION_BINDING);var U=this.toConstantValue(M);return this._binding.type=p.BindingTypeEnum.Function,this._binding.scope=p.BindingScopeEnum.Singleton,U},k.prototype.toAutoFactory=function(M){return this._binding.type=p.BindingTypeEnum.Factory,this._binding.factory=function(U){var V=function(){return U.container.get(M)};return V},this._binding.scope=p.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},k.prototype.toProvider=function(M){return this._binding.type=p.BindingTypeEnum.Provider,this._binding.provider=M,this._binding.scope=p.BindingScopeEnum.Singleton,new E.BindingWhenOnSyntax(this._binding)},k.prototype.toService=function(M){this.toDynamicValue(function(U){return U.container.get(M)})},k}();R.BindingToSyntax=A},h7MG:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getBindingDictionary=R.createMockRequest=R.plan=void 0;var B=h("doU7"),p=h("MON2"),S=h("FV85"),E=h("xfSm"),A=h("qK8v"),k=h("ujMp"),M=h("oy+k"),U=h("GXnB"),V=h("yMAV"),$=h("fbrv"),W=h("xiII"),Y=h("dX1H");function ee(fe){return fe._bindingDictionary}R.getBindingDictionary=ee;function ne(fe,se,ve,ae,j,de){var ke=fe?E.MULTI_INJECT_TAG:E.INJECT_TAG,he=new U.Metadata(ke,ve),Oe=new Y.Target(se,ae,ve,he);if(j!==void 0){var We=new U.Metadata(j,de);Oe.metadata.push(We)}return Oe}function ie(fe,se,ve,ae,j){var de=ce(ve.container,j.serviceIdentifier),ke=[];return de.length===B.BindingCount.NoBindingsAvailable&&ve.container.options.autoBindInjectable&&typeof j.serviceIdentifier=="function"&&fe.getConstructorMetadata(j.serviceIdentifier).compilerGeneratedMetadata&&(ve.container.bind(j.serviceIdentifier).toSelf(),de=ce(ve.container,j.serviceIdentifier)),se?ke=de:ke=de.filter(function(he){var Oe=new W.Request(he.serviceIdentifier,ve,ae,he,j);return he.constraint(Oe)}),re(j.serviceIdentifier,ke,j,ve.container),ke}function re(fe,se,ve,ae){switch(se.length){case B.BindingCount.NoBindingsAvailable:if(ve.isOptional())return se;var j=k.getServiceIdentifierAsString(fe),de=p.NOT_REGISTERED;throw de+=k.listMetadataForTarget(j,ve),de+=k.listRegisteredBindingsForServiceIdentifier(ae,j,ce),new Error(de);case B.BindingCount.OnlyOneBindingAvailable:if(!ve.isArray())return se;case B.BindingCount.MultipleBindingsAvailable:default:if(ve.isArray())return se;var j=k.getServiceIdentifierAsString(fe),de=p.AMBIGUOUS_MATCH+" "+j;throw de+=k.listRegisteredBindingsForServiceIdentifier(ae,j,ce),new Error(de)}}function J(fe,se,ve,ae,j,de){var ke,he;if(j===null){ke=ie(fe,se,ae,null,de),he=new W.Request(ve,ae,null,ke,de);var Oe=new V.Plan(ae,he);ae.addPlan(Oe)}else ke=ie(fe,se,ae,j,de),he=j.addChildRequest(de.serviceIdentifier,ke,de);ke.forEach(function(We){var D=null;if(de.isArray())D=he.addChildRequest(We.serviceIdentifier,We,de);else{if(We.cache)return;D=he}if(We.type===S.BindingTypeEnum.Instance&&We.implementationType!==null){var je=$.getDependencies(fe,We.implementationType);if(!ae.container.options.skipBaseClassChecks){var pt=$.getBaseClassDependencyCount(fe,We.implementationType);if(je.length<pt){var nt=p.ARGUMENTS_LENGTH_MISMATCH($.getFunctionName(We.implementationType));throw new Error(nt)}}je.forEach(function(Lt){J(fe,!1,Lt.serviceIdentifier,ae,D,Lt)})}})}function ce(fe,se){var ve=[],ae=ee(fe);return ae.hasKey(se)?ve=ae.get(se):fe.parent!==null&&(ve=ce(fe.parent,se)),ve}function G(fe,se,ve,ae,j,de,ke,he){he===void 0&&(he=!1);var Oe=new M.Context(se),We=ne(ve,ae,j,"",de,ke);try{return J(fe,he,j,Oe,null,We),Oe}catch(D){throw A.isStackOverflowExeption(D)&&Oe.plan&&k.circularDependencyToException(Oe.plan.rootRequest),D}}R.plan=G;function Z(fe,se,ve,ae){var j=new Y.Target(S.TargetTypeEnum.Variable,"",se,new U.Metadata(ve,ae)),de=new M.Context(fe),ke=new W.Request(se,de,null,[],j);return ke}R.createMockRequest=Z},iGDq:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.GithubSwatch=void 0;var B=h("q1tI"),p=k(B),S=h("/FUP"),E=k(S),A=h("TM95");function k(U){return U&&U.__esModule?U:{default:U}}var M=R.GithubSwatch=function(V){var $=V.hover,W=V.color,Y=V.onClick,ee=V.onSwatchHover,ne={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},ie=(0,E.default)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:ne}},{hover:$});return p.default.createElement("div",{style:ie.swatch},p.default.createElement(A.Swatch,{color:W,onClick:Y,onHover:ee,focusStyle:ne}))};R.default=(0,S.handleHover)(M)},iceA:function(ge,R,h){"use strict";function B(p,S){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}},imBb:function(ge,R,h){var B;(function(p,S,E){if(!p)return;for(var A={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},k={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},M={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},U={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},V,$=1;$<20;++$)A[111+$]="f"+$;for($=0;$<=9;++$)A[$+96]=$.toString();function W(ae,j,de){if(ae.addEventListener){ae.addEventListener(j,de,!1);return}ae.attachEvent("on"+j,de)}function Y(ae){if(ae.type=="keypress"){var j=String.fromCharCode(ae.which);return ae.shiftKey||(j=j.toLowerCase()),j}return A[ae.which]?A[ae.which]:k[ae.which]?k[ae.which]:String.fromCharCode(ae.which).toLowerCase()}function ee(ae,j){return ae.sort().join(",")===j.sort().join(",")}function ne(ae){var j=[];return ae.shiftKey&&j.push("shift"),ae.altKey&&j.push("alt"),ae.ctrlKey&&j.push("ctrl"),ae.metaKey&&j.push("meta"),j}function ie(ae){if(ae.preventDefault){ae.preventDefault();return}ae.returnValue=!1}function re(ae){if(ae.stopPropagation){ae.stopPropagation();return}ae.cancelBubble=!0}function J(ae){return ae=="shift"||ae=="ctrl"||ae=="alt"||ae=="meta"}function ce(){if(!V){V={};for(var ae in A)ae>95&&ae<112||A.hasOwnProperty(ae)&&(V[A[ae]]=ae)}return V}function G(ae,j,de){return de||(de=ce()[ae]?"keydown":"keypress"),de=="keypress"&&j.length&&(de="keydown"),de}function Z(ae){return ae==="+"?["+"]:(ae=ae.replace(/\+{2}/g,"+plus"),ae.split("+"))}function fe(ae,j){var de,ke,he,Oe=[];for(de=Z(ae),he=0;he<de.length;++he)ke=de[he],U[ke]&&(ke=U[ke]),j&&j!="keypress"&&M[ke]&&(ke=M[ke],Oe.push("shift")),J(ke)&&Oe.push(ke);return j=G(ke,Oe,j),{key:ke,modifiers:Oe,action:j}}function se(ae,j){return ae===null||ae===S?!1:ae===j?!0:se(ae.parentNode,j)}function ve(ae){var j=this;if(ae=ae||S,!(j instanceof ve))return new ve(ae);j.target=ae,j._callbacks={},j._directMap={};var de={},ke,he=!1,Oe=!1,We=!1;function D(jt){jt=jt||{};var Be=!1,pe;for(pe in de){if(jt[pe]){Be=!0;continue}de[pe]=0}Be||(We=!1)}function je(jt,Be,pe,un,ln,Fn){var Ft,Pn,lr=[],hn=pe.type;if(!j._callbacks[jt])return[];for(hn=="keyup"&&J(jt)&&(Be=[jt]),Ft=0;Ft<j._callbacks[jt].length;++Ft)if(Pn=j._callbacks[jt][Ft],!(!un&&Pn.seq&&de[Pn.seq]!=Pn.level)&&hn==Pn.action&&(hn=="keypress"&&!pe.metaKey&&!pe.ctrlKey||ee(Be,Pn.modifiers))){var On=!un&&Pn.combo==ln,jn=un&&Pn.seq==un&&Pn.level==Fn;(On||jn)&&j._callbacks[jt].splice(Ft,1),lr.push(Pn)}return lr}function pt(jt,Be,pe,un){j.stopCallback(Be,Be.target||Be.srcElement,pe,un)||jt(Be,pe)===!1&&(ie(Be),re(Be))}j._handleKey=function(jt,Be,pe){var un=je(jt,Be,pe),ln,Fn={},Ft=0,Pn=!1;for(ln=0;ln<un.length;++ln)un[ln].seq&&(Ft=Math.max(Ft,un[ln].level));for(ln=0;ln<un.length;++ln){if(un[ln].seq){if(un[ln].level!=Ft)continue;Pn=!0,Fn[un[ln].seq]=1,pt(un[ln].callback,pe,un[ln].combo,un[ln].seq);continue}Pn||pt(un[ln].callback,pe,un[ln].combo)}var lr=pe.type=="keypress"&&Oe;pe.type==We&&!J(jt)&&!lr&&D(Fn),Oe=Pn&&pe.type=="keydown"};function nt(jt){typeof jt.which!="number"&&(jt.which=jt.keyCode);var Be=Y(jt);if(!!Be){if(jt.type=="keyup"&&he===Be){he=!1;return}j.handleKey(Be,ne(jt),jt)}}function Lt(){clearTimeout(ke),ke=setTimeout(D,1e3)}function Gt(jt,Be,pe,un){de[jt]=0;function ln(hn){return function(){We=hn,++de[jt],Lt()}}function Fn(hn){pt(pe,hn,jt),un!=="keyup"&&(he=Y(hn)),setTimeout(D,10)}for(var Ft=0;Ft<Be.length;++Ft){var Pn=Ft+1===Be.length,lr=Pn?Fn:ln(un||fe(Be[Ft+1]).action);$e(Be[Ft],lr,un,jt,Ft)}}function $e(jt,Be,pe,un,ln){j._directMap[jt+":"+pe]=Be,jt=jt.replace(/\s+/g," ");var Fn=jt.split(" "),Ft;if(Fn.length>1){Gt(jt,Fn,Be,pe);return}Ft=fe(jt,pe),j._callbacks[Ft.key]=j._callbacks[Ft.key]||[],je(Ft.key,Ft.modifiers,{type:Ft.action},un,jt,ln),j._callbacks[Ft.key][un?"unshift":"push"]({callback:Be,modifiers:Ft.modifiers,action:Ft.action,seq:un,level:ln,combo:jt})}j._bindMultiple=function(jt,Be,pe){for(var un=0;un<jt.length;++un)$e(jt[un],Be,pe)},W(ae,"keypress",nt),W(ae,"keydown",nt),W(ae,"keyup",nt)}ve.prototype.bind=function(ae,j,de){var ke=this;return ae=ae instanceof Array?ae:[ae],ke._bindMultiple.call(ke,ae,j,de),ke},ve.prototype.unbind=function(ae,j){var de=this;return de.bind.call(de,ae,function(){},j)},ve.prototype.trigger=function(ae,j){var de=this;return de._directMap[ae+":"+j]&&de._directMap[ae+":"+j]({},ae),de},ve.prototype.reset=function(){var ae=this;return ae._callbacks={},ae._directMap={},ae},ve.prototype.stopCallback=function(ae,j){var de=this;if((" "+j.className+" ").indexOf(" mousetrap ")>-1||se(j,de.target))return!1;if("composedPath"in ae&&typeof ae.composedPath=="function"){var ke=ae.composedPath()[0];ke!==ae.target&&(j=ke)}return j.tagName=="INPUT"||j.tagName=="SELECT"||j.tagName=="TEXTAREA"||j.isContentEditable},ve.prototype.handleKey=function(){var ae=this;return ae._handleKey.apply(ae,arguments)},ve.addKeycodes=function(ae){for(var j in ae)ae.hasOwnProperty(j)&&(A[j]=ae[j]);V=null},ve.init=function(){var ae=ve(S);for(var j in ae)j.charAt(0)!=="_"&&(ve[j]=function(de){return function(){return ae[de].apply(ae,arguments)}}(j))},ve.init(),p.Mousetrap=ve,ge.exports&&(ge.exports=ve),B=function(){return ve}.call(R,h,R,ge),B!==E&&(ge.exports=B)})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)},"jIg/":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.multiInject=void 0;var B=h("xfSm"),p=h("GXnB"),S=h("Ztfv");function E(A){return function(k,M,U){var V=new p.Metadata(B.MULTI_INJECT_TAG,A);typeof U=="number"?S.tagParameter(k,M,U,V):S.tagProperty(k,M,V)}}R.multiInject=E},jYx5:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.optional=void 0;var B=h("xfSm"),p=h("GXnB"),S=h("Ztfv");function E(){return function(A,k,M){var U=new p.Metadata(B.OPTIONAL_TAG,!0);typeof M=="number"?S.tagParameter(A,k,M,U):S.tagProperty(A,k,U)}}R.optional=E},japM:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.handleFocus=void 0;var B=Object.assign||function($){for(var W=1;W<arguments.length;W++){var Y=arguments[W];for(var ee in Y)Object.prototype.hasOwnProperty.call(Y,ee)&&($[ee]=Y[ee])}return $},p=function(){function $(W,Y){for(var ee=0;ee<Y.length;ee++){var ne=Y[ee];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(W,ne.key,ne)}}return function(W,Y,ee){return Y&&$(W.prototype,Y),ee&&$(W,ee),W}}(),S=h("q1tI"),E=A(S);function A($){return $&&$.__esModule?$:{default:$}}function k($,W){if(!($ instanceof W))throw new TypeError("Cannot call a class as a function")}function M($,W){if(!$)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W&&(typeof W=="object"||typeof W=="function")?W:$}function U($,W){if(typeof W!="function"&&W!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof W);$.prototype=Object.create(W&&W.prototype,{constructor:{value:$,enumerable:!1,writable:!0,configurable:!0}}),W&&(Object.setPrototypeOf?Object.setPrototypeOf($,W):$.__proto__=W)}var V=R.handleFocus=function(W){var Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(ee){U(ne,ee);function ne(){var ie,re,J,ce;k(this,ne);for(var G=arguments.length,Z=Array(G),fe=0;fe<G;fe++)Z[fe]=arguments[fe];return ce=(re=(J=M(this,(ie=ne.__proto__||Object.getPrototypeOf(ne)).call.apply(ie,[this].concat(Z))),J),J.state={focus:!1},J.handleFocus=function(){return J.setState({focus:!0})},J.handleBlur=function(){return J.setState({focus:!1})},re),M(J,ce)}return p(ne,[{key:"render",value:function(){return E.default.createElement(Y,{onFocus:this.handleFocus,onBlur:this.handleBlur},E.default.createElement(W,B({},this.props,this.state)))}}]),ne}(E.default.Component)}},"jbM+":function(ge,R,h){var B=h("R/W3");function p(S,E){var A=S==null?0:S.length;return!!A&&B(S,E,0)>-1}ge.exports=p},jrDe:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="StopOutlined";var M=R.a=p.forwardRef(k)},k6w6:function(ge,R,h){"use strict";h.d(R,"a",function(){return B});var B;(function(p){p[p.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",p[p.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",p[p.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",p[p.POINTS=0]="POINTS",p[p.LINES=1]="LINES",p[p.LINE_LOOP=2]="LINE_LOOP",p[p.LINE_STRIP=3]="LINE_STRIP",p[p.TRIANGLES=4]="TRIANGLES",p[p.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",p[p.TRIANGLE_FAN=6]="TRIANGLE_FAN",p[p.ZERO=0]="ZERO",p[p.ONE=1]="ONE",p[p.SRC_COLOR=768]="SRC_COLOR",p[p.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",p[p.SRC_ALPHA=770]="SRC_ALPHA",p[p.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",p[p.DST_ALPHA=772]="DST_ALPHA",p[p.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",p[p.DST_COLOR=774]="DST_COLOR",p[p.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",p[p.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",p[p.FUNC_ADD=32774]="FUNC_ADD",p[p.BLEND_EQUATION=32777]="BLEND_EQUATION",p[p.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",p[p.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",p[p.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",p[p.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",p[p.MAX_EXT=32776]="MAX_EXT",p[p.MIN_EXT=32775]="MIN_EXT",p[p.BLEND_DST_RGB=32968]="BLEND_DST_RGB",p[p.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",p[p.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",p[p.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",p[p.CONSTANT_COLOR=32769]="CONSTANT_COLOR",p[p.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",p[p.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",p[p.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",p[p.BLEND_COLOR=32773]="BLEND_COLOR",p[p.ARRAY_BUFFER=34962]="ARRAY_BUFFER",p[p.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",p[p.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",p[p.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",p[p.STREAM_DRAW=35040]="STREAM_DRAW",p[p.STATIC_DRAW=35044]="STATIC_DRAW",p[p.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",p[p.BUFFER_SIZE=34660]="BUFFER_SIZE",p[p.BUFFER_USAGE=34661]="BUFFER_USAGE",p[p.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",p[p.FRONT=1028]="FRONT",p[p.BACK=1029]="BACK",p[p.FRONT_AND_BACK=1032]="FRONT_AND_BACK",p[p.CULL_FACE=2884]="CULL_FACE",p[p.BLEND=3042]="BLEND",p[p.DITHER=3024]="DITHER",p[p.STENCIL_TEST=2960]="STENCIL_TEST",p[p.DEPTH_TEST=2929]="DEPTH_TEST",p[p.SCISSOR_TEST=3089]="SCISSOR_TEST",p[p.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",p[p.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",p[p.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",p[p.NO_ERROR=0]="NO_ERROR",p[p.INVALID_ENUM=1280]="INVALID_ENUM",p[p.INVALID_VALUE=1281]="INVALID_VALUE",p[p.INVALID_OPERATION=1282]="INVALID_OPERATION",p[p.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",p[p.CW=2304]="CW",p[p.CCW=2305]="CCW",p[p.LINE_WIDTH=2849]="LINE_WIDTH",p[p.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",p[p.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",p[p.CULL_FACE_MODE=2885]="CULL_FACE_MODE",p[p.FRONT_FACE=2886]="FRONT_FACE",p[p.DEPTH_RANGE=2928]="DEPTH_RANGE",p[p.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",p[p.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",p[p.DEPTH_FUNC=2932]="DEPTH_FUNC",p[p.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",p[p.STENCIL_FUNC=2962]="STENCIL_FUNC",p[p.STENCIL_FAIL=2964]="STENCIL_FAIL",p[p.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",p[p.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",p[p.STENCIL_REF=2967]="STENCIL_REF",p[p.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",p[p.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",p[p.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",p[p.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",p[p.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",p[p.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",p[p.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",p[p.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",p[p.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",p[p.VIEWPORT=2978]="VIEWPORT",p[p.SCISSOR_BOX=3088]="SCISSOR_BOX",p[p.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",p[p.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",p[p.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",p[p.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",p[p.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",p[p.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",p[p.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",p[p.RED_BITS=3410]="RED_BITS",p[p.GREEN_BITS=3411]="GREEN_BITS",p[p.BLUE_BITS=3412]="BLUE_BITS",p[p.ALPHA_BITS=3413]="ALPHA_BITS",p[p.DEPTH_BITS=3414]="DEPTH_BITS",p[p.STENCIL_BITS=3415]="STENCIL_BITS",p[p.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",p[p.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",p[p.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",p[p.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",p[p.SAMPLES=32937]="SAMPLES",p[p.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",p[p.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",p[p.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",p[p.DONT_CARE=4352]="DONT_CARE",p[p.FASTEST=4353]="FASTEST",p[p.NICEST=4354]="NICEST",p[p.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",p[p.BYTE=5120]="BYTE",p[p.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",p[p.SHORT=5122]="SHORT",p[p.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",p[p.INT=5124]="INT",p[p.UNSIGNED_INT=5125]="UNSIGNED_INT",p[p.FLOAT=5126]="FLOAT",p[p.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",p[p.ALPHA=6406]="ALPHA",p[p.RGB=6407]="RGB",p[p.RGBA=6408]="RGBA",p[p.LUMINANCE=6409]="LUMINANCE",p[p.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",p[p.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",p[p.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",p[p.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",p[p.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",p[p.VERTEX_SHADER=35633]="VERTEX_SHADER",p[p.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",p[p.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",p[p.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",p[p.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",p[p.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",p[p.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",p[p.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",p[p.SHADER_TYPE=35663]="SHADER_TYPE",p[p.DELETE_STATUS=35712]="DELETE_STATUS",p[p.LINK_STATUS=35714]="LINK_STATUS",p[p.VALIDATE_STATUS=35715]="VALIDATE_STATUS",p[p.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",p[p.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",p[p.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",p[p.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",p[p.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",p[p.NEVER=512]="NEVER",p[p.LESS=513]="LESS",p[p.EQUAL=514]="EQUAL",p[p.LEQUAL=515]="LEQUAL",p[p.GREATER=516]="GREATER",p[p.NOTEQUAL=517]="NOTEQUAL",p[p.GEQUAL=518]="GEQUAL",p[p.ALWAYS=519]="ALWAYS",p[p.KEEP=7680]="KEEP",p[p.REPLACE=7681]="REPLACE",p[p.INCR=7682]="INCR",p[p.DECR=7683]="DECR",p[p.INVERT=5386]="INVERT",p[p.INCR_WRAP=34055]="INCR_WRAP",p[p.DECR_WRAP=34056]="DECR_WRAP",p[p.VENDOR=7936]="VENDOR",p[p.RENDERER=7937]="RENDERER",p[p.VERSION=7938]="VERSION",p[p.NEAREST=9728]="NEAREST",p[p.LINEAR=9729]="LINEAR",p[p.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",p[p.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",p[p.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",p[p.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",p[p.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",p[p.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",p[p.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",p[p.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",p[p.TEXTURE_2D=3553]="TEXTURE_2D",p[p.TEXTURE=5890]="TEXTURE",p[p.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",p[p.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",p[p.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",p[p.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",p[p.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",p[p.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",p[p.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",p[p.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",p[p.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",p[p.TEXTURE0=33984]="TEXTURE0",p[p.TEXTURE1=33985]="TEXTURE1",p[p.TEXTURE2=33986]="TEXTURE2",p[p.TEXTURE3=33987]="TEXTURE3",p[p.TEXTURE4=33988]="TEXTURE4",p[p.TEXTURE5=33989]="TEXTURE5",p[p.TEXTURE6=33990]="TEXTURE6",p[p.TEXTURE7=33991]="TEXTURE7",p[p.TEXTURE8=33992]="TEXTURE8",p[p.TEXTURE9=33993]="TEXTURE9",p[p.TEXTURE10=33994]="TEXTURE10",p[p.TEXTURE11=33995]="TEXTURE11",p[p.TEXTURE12=33996]="TEXTURE12",p[p.TEXTURE13=33997]="TEXTURE13",p[p.TEXTURE14=33998]="TEXTURE14",p[p.TEXTURE15=33999]="TEXTURE15",p[p.TEXTURE16=34e3]="TEXTURE16",p[p.TEXTURE17=34001]="TEXTURE17",p[p.TEXTURE18=34002]="TEXTURE18",p[p.TEXTURE19=34003]="TEXTURE19",p[p.TEXTURE20=34004]="TEXTURE20",p[p.TEXTURE21=34005]="TEXTURE21",p[p.TEXTURE22=34006]="TEXTURE22",p[p.TEXTURE23=34007]="TEXTURE23",p[p.TEXTURE24=34008]="TEXTURE24",p[p.TEXTURE25=34009]="TEXTURE25",p[p.TEXTURE26=34010]="TEXTURE26",p[p.TEXTURE27=34011]="TEXTURE27",p[p.TEXTURE28=34012]="TEXTURE28",p[p.TEXTURE29=34013]="TEXTURE29",p[p.TEXTURE30=34014]="TEXTURE30",p[p.TEXTURE31=34015]="TEXTURE31",p[p.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",p[p.REPEAT=10497]="REPEAT",p[p.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",p[p.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",p[p.FLOAT_VEC2=35664]="FLOAT_VEC2",p[p.FLOAT_VEC3=35665]="FLOAT_VEC3",p[p.FLOAT_VEC4=35666]="FLOAT_VEC4",p[p.INT_VEC2=35667]="INT_VEC2",p[p.INT_VEC3=35668]="INT_VEC3",p[p.INT_VEC4=35669]="INT_VEC4",p[p.BOOL=35670]="BOOL",p[p.BOOL_VEC2=35671]="BOOL_VEC2",p[p.BOOL_VEC3=35672]="BOOL_VEC3",p[p.BOOL_VEC4=35673]="BOOL_VEC4",p[p.FLOAT_MAT2=35674]="FLOAT_MAT2",p[p.FLOAT_MAT3=35675]="FLOAT_MAT3",p[p.FLOAT_MAT4=35676]="FLOAT_MAT4",p[p.SAMPLER_2D=35678]="SAMPLER_2D",p[p.SAMPLER_CUBE=35680]="SAMPLER_CUBE",p[p.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",p[p.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",p[p.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",p[p.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",p[p.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",p[p.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",p[p.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",p[p.COMPILE_STATUS=35713]="COMPILE_STATUS",p[p.LOW_FLOAT=36336]="LOW_FLOAT",p[p.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",p[p.HIGH_FLOAT=36338]="HIGH_FLOAT",p[p.LOW_INT=36339]="LOW_INT",p[p.MEDIUM_INT=36340]="MEDIUM_INT",p[p.HIGH_INT=36341]="HIGH_INT",p[p.FRAMEBUFFER=36160]="FRAMEBUFFER",p[p.RENDERBUFFER=36161]="RENDERBUFFER",p[p.RGBA4=32854]="RGBA4",p[p.RGB5_A1=32855]="RGB5_A1",p[p.RGB565=36194]="RGB565",p[p.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",p[p.STENCIL_INDEX=6401]="STENCIL_INDEX",p[p.STENCIL_INDEX8=36168]="STENCIL_INDEX8",p[p.DEPTH_STENCIL=34041]="DEPTH_STENCIL",p[p.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",p[p.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",p[p.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",p[p.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",p[p.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",p[p.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",p[p.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",p[p.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",p[p.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",p[p.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",p[p.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",p[p.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",p[p.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",p[p.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",p[p.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",p[p.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",p[p.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",p[p.NONE=0]="NONE",p[p.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",p[p.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",p[p.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",p[p.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",p[p.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",p[p.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",p[p.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",p[p.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",p[p.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",p[p.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",p[p.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",p[p.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",p[p.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",p[p.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",p[p.COPY_SRC=1]="COPY_SRC",p[p.COPY_DST=2]="COPY_DST",p[p.SAMPLED=4]="SAMPLED",p[p.STORAGE=8]="STORAGE",p[p.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(B||(B={}))},kLXV:function(ge,R,h){"use strict";var B=h("KQm4"),p=h("wx14"),S=h("Ue1A"),E=h("2BaD"),A=h("RCxd"),k=h("+YFz"),M=h("bJ/+"),U=h("q1tI"),V=h("wEI+"),$=h("rePB"),W=h("TSYQ"),Y=h.n(W),ee=h("lkze"),ne=h("EXcs"),ie=h("4i/N"),re=h("hzQT"),J=h("2/Rp"),ce=h("zvFY"),G=h("H84U"),Z=h("ihLV"),fe=h("YMnH"),se=h("+f9I"),ve=h("R3zJ"),ae=h("ul5b"),j=function(kt,yt){var tt={};for(var I in kt)Object.prototype.hasOwnProperty.call(kt,I)&&yt.indexOf(I)<0&&(tt[I]=kt[I]);if(kt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Mn=0,I=Object.getOwnPropertySymbols(kt);Mn<I.length;Mn++)yt.indexOf(I[Mn])<0&&Object.prototype.propertyIsEnumerable.call(kt,I[Mn])&&(tt[I[Mn]]=kt[I[Mn]]);return tt},de,ke=function(yt){de={x:yt.pageX,y:yt.pageY},setTimeout(function(){de=null},100)};Object(ve.a)()&&document.documentElement.addEventListener("click",ke,!0);var he=function(yt){var tt,I,Mn=U.useContext(G.b),dt=Mn.getPopupContainer,vt=Mn.getPrefixCls,Bt=Mn.direction,me=function(aa){var Gi=yt.onCancel;Gi==null||Gi(aa)},ue=function(aa){var Gi=yt.onOk;Gi==null||Gi(aa)},Re=yt.prefixCls,Rt=yt.footer,Kt=yt.visible,Bn=yt.open,Nr=Bn===void 0?!1:Bn,Rn=yt.wrapClassName,Cr=yt.centered,tr=yt.getContainer,jr=yt.closeIcon,zr=yt.focusTriggerAfterClose,Ua=zr===void 0?!0:zr,oa=yt.width,Za=oa===void 0?520:oa,ba=j(yt,["prefixCls","footer","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","width"]),Pa=vt("modal",Re),ri=vt(),li=U.createElement(fe.a,{componentName:"Modal",defaultLocale:Object(ae.b)()},function(Qa){var aa=yt.okText,Gi=yt.okType,mo=Gi===void 0?"primary":Gi,sa=yt.cancelText,yi=yt.confirmLoading,Io=yi===void 0?!1:yi;return U.createElement(U.Fragment,null,U.createElement(J.a,Object(p.a)({onClick:me},yt.cancelButtonProps),sa||Qa.cancelText),U.createElement(J.a,Object(p.a)({},Object(ce.a)(mo),{loading:Io,onClick:ue},yt.okButtonProps),aa!=null?aa:Qa.okText))}),ka=U.createElement("span",{className:"".concat(Pa,"-close-x")},jr||U.createElement(ie.a,{className:"".concat(Pa,"-close-icon")})),ai=Y()(Rn,(tt={},Object($.a)(tt,"".concat(Pa,"-centered"),!!Cr),Object($.a)(tt,"".concat(Pa,"-wrap-rtl"),Bt==="rtl"),tt));return U.createElement(se.a,null,U.createElement(Z.e,{status:!0,override:!0},U.createElement(re.a,Object(p.a)({width:Za},ba,{getContainer:tr===void 0?dt:tr,prefixCls:Pa,wrapClassName:ai,footer:Rt===void 0?li:Rt,visible:Nr||Kt,mousePosition:(I=ba.mousePosition)!==null&&I!==void 0?I:de,onClose:me,closeIcon:ka,focusTriggerAfterClose:Ua,transitionName:Object(ne.c)(ri,"zoom",yt.transitionName),maskTransitionName:Object(ne.c)(ri,"fade",yt.maskTransitionName)}))))},Oe=he,We=function(yt){var tt=yt.icon,I=yt.onCancel,Mn=yt.onOk,dt=yt.close,vt=yt.zIndex,Bt=yt.afterClose,me=yt.visible,ue=yt.open,Re=yt.keyboard,Rt=yt.centered,Kt=yt.getContainer,Bn=yt.maskStyle,Nr=yt.okText,Rn=yt.okButtonProps,Cr=yt.cancelText,tr=yt.cancelButtonProps,jr=yt.direction,zr=yt.prefixCls,Ua=yt.wrapClassName,oa=yt.rootPrefixCls,Za=yt.iconPrefixCls,ba=yt.bodyStyle,Pa=yt.closable,ri=Pa===void 0?!1:Pa,li=yt.closeIcon,ka=yt.modalRender,ai=yt.focusTriggerAfterClose,Qa=yt.okType||"primary",aa="".concat(zr,"-confirm"),Gi="okCancel"in yt?yt.okCancel:!0,mo=yt.width||416,sa=yt.style||{},yi=yt.mask===void 0?!0:yt.mask,Io=yt.maskClosable===void 0?!1:yt.maskClosable,Pi=yt.autoFocusButton===null?!1:yt.autoFocusButton||"ok",ao=Y()(aa,"".concat(aa,"-").concat(yt.type),Object($.a)({},"".concat(aa,"-rtl"),jr==="rtl"),yt.className),ki=Gi&&U.createElement(ee.a,{actionFn:I,close:dt,autoFocus:Pi==="cancel",buttonProps:tr,prefixCls:"".concat(oa,"-btn")},Cr);return U.createElement(V.a,{prefixCls:oa,iconPrefixCls:Za,direction:jr},U.createElement(Oe,{prefixCls:zr,className:ao,wrapClassName:Y()(Object($.a)({},"".concat(aa,"-centered"),!!yt.centered),Ua),onCancel:function(){return dt==null?void 0:dt({triggerCancel:!0})},open:ue||me,title:"",footer:"",transitionName:Object(ne.c)(oa,"zoom",yt.transitionName),maskTransitionName:Object(ne.c)(oa,"fade",yt.maskTransitionName),mask:yi,maskClosable:Io,maskStyle:Bn,style:sa,bodyStyle:ba,width:mo,zIndex:vt,afterClose:Bt,keyboard:Re,centered:Rt,getContainer:Kt,closable:ri,closeIcon:li,modalRender:ka,focusTriggerAfterClose:ai},U.createElement("div",{className:"".concat(aa,"-body-wrapper")},U.createElement("div",{className:"".concat(aa,"-body")},tt,yt.title===void 0?null:U.createElement("span",{className:"".concat(aa,"-title")},yt.title),U.createElement("div",{className:"".concat(aa,"-content")},yt.content)),U.createElement("div",{className:"".concat(aa,"-btns")},ki,U.createElement(ee.a,{type:Qa,actionFn:Mn,close:dt,autoFocus:Pi==="ok",buttonProps:Rn,prefixCls:"".concat(oa,"-btn")},Nr)))))},D=We,je=[],pt=je,nt=function(kt,yt){var tt={};for(var I in kt)Object.prototype.hasOwnProperty.call(kt,I)&&yt.indexOf(I)<0&&(tt[I]=kt[I]);if(kt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Mn=0,I=Object.getOwnPropertySymbols(kt);Mn<I.length;Mn++)yt.indexOf(I[Mn])<0&&Object.prototype.propertyIsEnumerable.call(kt,I[Mn])&&(tt[I[Mn]]=kt[I[Mn]]);return tt},Lt="";function Gt(){return Lt}function $e(kt){var yt=document.createDocumentFragment(),tt=Object(p.a)(Object(p.a)({},kt),{close:vt,open:!0}),I;function Mn(){for(var me=arguments.length,ue=new Array(me),Re=0;Re<me;Re++)ue[Re]=arguments[Re];var Rt=ue.some(function(Nr){return Nr&&Nr.triggerCancel});kt.onCancel&&Rt&&kt.onCancel.apply(kt,[function(){}].concat(Object(B.a)(ue.slice(1))));for(var Kt=0;Kt<pt.length;Kt++){var Bn=pt[Kt];if(Bn===vt){pt.splice(Kt,1);break}}Object(M.b)(yt)}function dt(me){var ue=me.okText,Re=me.cancelText,Rt=me.prefixCls,Kt=nt(me,["okText","cancelText","prefixCls"]);clearTimeout(I),I=setTimeout(function(){var Bn=Object(ae.b)(),Nr=Object(V.b)(),Rn=Nr.getPrefixCls,Cr=Nr.getIconPrefixCls,tr=Rn(void 0,Gt()),jr=Rt||"".concat(tr,"-modal"),zr=Cr();Object(M.a)(U.createElement(D,Object(p.a)({},Kt,{prefixCls:jr,rootPrefixCls:tr,iconPrefixCls:zr,okText:ue||(Kt.okCancel?Bn.okText:Bn.justOkText),cancelText:Re||Bn.cancelText})),yt)})}function vt(){for(var me=this,ue=arguments.length,Re=new Array(ue),Rt=0;Rt<ue;Rt++)Re[Rt]=arguments[Rt];tt=Object(p.a)(Object(p.a)({},tt),{open:!1,afterClose:function(){typeof kt.afterClose=="function"&&kt.afterClose(),Mn.apply(me,Re)}}),tt.visible&&delete tt.visible,dt(tt)}function Bt(me){typeof me=="function"?tt=me(tt):tt=Object(p.a)(Object(p.a)({},tt),me),dt(tt)}return dt(tt),pt.push(vt),{destroy:vt,update:Bt}}function jt(kt){return Object(p.a)(Object(p.a)({icon:U.createElement(A.a,null),okCancel:!1},kt),{type:"warning"})}function Be(kt){return Object(p.a)(Object(p.a)({icon:U.createElement(k.a,null),okCancel:!1},kt),{type:"info"})}function pe(kt){return Object(p.a)(Object(p.a)({icon:U.createElement(S.a,null),okCancel:!1},kt),{type:"success"})}function un(kt){return Object(p.a)(Object(p.a)({icon:U.createElement(E.a,null),okCancel:!1},kt),{type:"error"})}function ln(kt){return Object(p.a)(Object(p.a)({icon:U.createElement(A.a,null),okCancel:!0},kt),{type:"confirm"})}function Fn(kt){var yt=kt.rootPrefixCls;Lt=yt}var Ft=h("ODXe");function Pn(){var kt=U.useState([]),yt=Object(Ft.a)(kt,2),tt=yt[0],I=yt[1],Mn=U.useCallback(function(dt){return I(function(vt){return[].concat(Object(B.a)(vt),[dt])}),function(){I(function(vt){return vt.filter(function(Bt){return Bt!==dt})})}},[]);return[tt,Mn]}var lr=h("ZvpZ"),hn=function(yt,tt){var I=yt.afterClose,Mn=yt.config,dt=U.useState(!0),vt=Object(Ft.a)(dt,2),Bt=vt[0],me=vt[1],ue=U.useState(Mn),Re=Object(Ft.a)(ue,2),Rt=Re[0],Kt=Re[1],Bn=U.useContext(G.b),Nr=Bn.direction,Rn=Bn.getPrefixCls,Cr=Rn("modal"),tr=Rn(),jr=function(){me(!1);for(var Ua=arguments.length,oa=new Array(Ua),Za=0;Za<Ua;Za++)oa[Za]=arguments[Za];var ba=oa.some(function(Pa){return Pa&&Pa.triggerCancel});Rt.onCancel&&ba&&Rt.onCancel.apply(Rt,[function(){}].concat(Object(B.a)(oa.slice(1))))};return U.useImperativeHandle(tt,function(){return{destroy:jr,update:function(Ua){Kt(function(oa){return Object(p.a)(Object(p.a)({},oa),Ua)})}}}),U.createElement(fe.a,{componentName:"Modal",defaultLocale:lr.a.Modal},function(zr){return U.createElement(D,Object(p.a)({prefixCls:Cr,rootPrefixCls:tr},Rt,{close:jr,open:Bt,afterClose:I,okText:Rt.okText||(Rt.okCancel?zr.okText:zr.justOkText),direction:Nr,cancelText:Rt.cancelText||zr.cancelText}))})},On=U.forwardRef(hn),jn=0,Dn=U.memo(U.forwardRef(function(kt,yt){var tt=Pn(),I=Object(Ft.a)(tt,2),Mn=I[0],dt=I[1];return U.useImperativeHandle(yt,function(){return{patchElement:dt}},[]),U.createElement(U.Fragment,null,Mn)}));function ft(){var kt=U.useRef(null),yt=U.useState([]),tt=Object(Ft.a)(yt,2),I=tt[0],Mn=tt[1];U.useEffect(function(){if(I.length){var Bt=Object(B.a)(I);Bt.forEach(function(me){me()}),Mn([])}},[I]);var dt=U.useCallback(function(Bt){return function(ue){var Re;jn+=1;var Rt=U.createRef(),Kt,Bn=U.createElement(On,{key:"modal-".concat(jn),config:Bt(ue),ref:Rt,afterClose:function(){Kt==null||Kt()}});return Kt=(Re=kt.current)===null||Re===void 0?void 0:Re.patchElement(Bn),{destroy:function(){function Rn(){var Cr;(Cr=Rt.current)===null||Cr===void 0||Cr.destroy()}Rt.current?Rn():Mn(function(Cr){return[].concat(Object(B.a)(Cr),[Rn])})},update:function(Rn){function Cr(){var tr;(tr=Rt.current)===null||tr===void 0||tr.update(Rn)}Rt.current?Cr():Mn(function(tr){return[].concat(Object(B.a)(tr),[Cr])})}}}},[]),vt=U.useMemo(function(){return{info:dt(Be),success:dt(pe),error:dt(un),warning:dt(jt),confirm:dt(ln)}},[]);return[vt,U.createElement(Dn,{ref:kt})]}function Ut(kt){return $e(jt(kt))}var ct=Oe;ct.useModal=ft,ct.info=function(yt){return $e(Be(yt))},ct.success=function(yt){return $e(pe(yt))},ct.error=function(yt){return $e(un(yt))},ct.warning=Ut,ct.warn=Ut,ct.confirm=function(yt){return $e(ln(yt))},ct.destroyAll=function(){for(;pt.length;){var yt=pt.pop();yt&&yt()}},ct.config=Fn;var Ct=R.a=ct},kVhV:function(ge,R,h){ge.exports={components:h("tpVr"),dijkstra:h("uP9N"),dijkstraAll:h("lFfV"),findCycles:h("BjIp"),floydWarshall:h("s8Cx"),isAcyclic:h("BkyA"),postorder:h("fBpv"),preorder:h("4l4a"),prim:h("AV2a"),tarjan:h("98GK"),topsort:h("swpM")}},kafh:function(ge,R,h){var B=h("+sJh"),p=h("4Hkj"),S=h("t8N9"),E=h("cGwC"),A=h("a8Yn"),k=[0,0];ge.exports.computeMiter=function(U,V,$,W,Y){return B(U,$,W),S(U,U),p(V,-U[1],U[0]),p(k,-$[1],$[0]),Y/A(V,k)},ge.exports.normal=function(U,V){return p(U,-V[1],V[0]),U},ge.exports.direction=function(U,V,$){return E(U,V,$),S(U,U),U}},kfnj:function(ge,R,h){"use strict";h.d(R,"a",function(){return jt});var B=h("o0o1"),p=h.n(B),S=h("yXPU"),E=h.n(S),A=h("yG8O"),k=h.n(A),M=h("lwsE"),U=h.n(M),V=h("W8MJ"),$=h.n(V),W=h("U+yc"),Y=h.n(W),ee=h("1ABj"),ne=h.n(ee),ie=h("IOcx"),re=h("4cb6"),J=h.n(re),ce=h("+uE7"),G=h("qfsk"),Z=h("+xCn"),fe,se,ve,ae,j,de,ke,he,Oe,We,D,je,pt,nt;function Lt(Be,pe){var un;if(typeof Symbol=="undefined"||Be[Symbol.iterator]==null){if(Array.isArray(Be)||(un=Gt(Be))||pe&&Be&&typeof Be.length=="number"){un&&(Be=un);var ln=0,Fn=function(){};return{s:Fn,n:function(){return ln>=Be.length?{done:!0}:{done:!1,value:Be[ln++]}},e:function(On){throw On},f:Fn}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ft=!0,Pn=!1,lr;return{s:function(){un=Be[Symbol.iterator]()},n:function(){var On=un.next();return Ft=On.done,On},e:function(On){Pn=!0,lr=On},f:function(){try{!Ft&&un.return!=null&&un.return()}finally{if(Pn)throw lr}}}}function Gt(Be,pe){if(!!Be){if(typeof Be=="string")return $e(Be,pe);var un=Object.prototype.toString.call(Be).slice(8,-1);if(un==="Object"&&Be.constructor&&(un=Be.constructor.name),un==="Map"||un==="Set")return Array.from(Be);if(un==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(un))return $e(Be,pe)}}function $e(Be,pe){(pe==null||pe>Be.length)&&(pe=Be.length);for(var un=0,ln=new Array(pe);un<pe;un++)ln[un]=Be[un];return ln}var jt=(fe=Object(re.injectable)(),se=Object(re.inject)(ce.a.MeshComponentManager),ve=Object(re.inject)(ce.a.CullableComponentManager),ae=Object(re.inject)(ce.a.GeometryComponentManager),j=Object(re.inject)(ce.a.HierarchyComponentManager),de=Object(re.inject)(ce.a.TransformComponentManager),fe(ke=(he=(nt=function(){function Be(){U()(this,Be),k()(this,"mesh",Oe,this),k()(this,"cullable",We,this),k()(this,"geometry",D,this),k()(this,"hierarchy",je,this),k()(this,"transform",pt,this),this.planes=void 0}return $()(Be,[{key:"setFrustumPlanes",value:function(un){this.planes=un}},{key:"execute",value:function(){var pe=E()(p.a.mark(function ln(Fn){var Ft,Pn,lr,hn,On,jn,Dn,ft,Ut,ct,Ct,kt,yt,tt,I,Mn,dt,vt,Bt,me,ue;return p.a.wrap(function(Rt){for(;;)switch(Rt.prev=Rt.next){case 0:Ft=Lt(Fn);try{for(Ft.s();!(Pn=Ft.n()).done;){lr=Pn.value,hn=lr.getScene(),On=lr.getCamera(),jn=Lt(hn.getEntities());try{for(jn.s();!(Dn=jn.n()).done;)ft=Dn.value,Ut=this.mesh.getComponentByEntity(ft),Ut&&(ct=this.hierarchy.getComponentByEntity(ft),Ct=this.cullable.getComponentByEntity(ft),kt=Ut.geometry,yt=this.transform.getComponentByEntity(ft),kt&&kt.aabb&&yt&&Ut.aabbDirty&&(tt=yt.worldTransform,I=kt.aabb,Mn=I.center,dt=I.halfExtents,vt=ie.d.transformMat4(ie.d.create(),Mn,tt),Bt=Object(Z.b)(tt,ie.a.create()),me=ie.d.transformMat3(ie.d.create(),dt,Bt),Ut.aabb.update(vt,me),Ut.aabbDirty=!1),Ct&&kt&&(ue=this.cullable.getComponentByEntity((ct==null?void 0:ct.parentID)||-1),Ct.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(Ut.aabb,(ue==null?void 0:ue.visibilityPlaneMask)||G.b.INDETERMINATE,this.planes||On.getFrustum().planes),Ct.visible=Ct.visibilityPlaneMask!==G.b.OUTSIDE))}catch(Kt){jn.e(Kt)}finally{jn.f()}}}catch(Kt){Ft.e(Kt)}finally{Ft.f()}case 2:case"end":return Rt.stop()}},ln,this)}));function un(ln){return pe.apply(this,arguments)}return un}()},{key:"tearDown",value:function(){this.cullable.clear(),this.mesh.clear()}},{key:"computeVisibilityWithPlaneMask",value:function(un,ln,Fn){if(ln===G.b.OUTSIDE||ln===G.b.INSIDE)return ln;for(var Ft=G.b.INSIDE,Pn=0,lr=Fn.length;Pn<lr;++Pn){var hn=Pn<31?1<<Pn:0;if(!(Pn<31&&(ln&hn)==0)){var On=Fn[Pn],jn=On.normal,Dn=On.distance;if(ie.d.dot(jn,un.getNegativeFarPoint(Fn[Pn]))+Dn>0)return G.b.OUTSIDE;ie.d.dot(jn,un.getPositiveFarPoint(Fn[Pn]))+Dn>0&&(Ft|=hn)}}return Ft}}]),Be}(),nt),Oe=Y()(he.prototype,"mesh",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=Y()(he.prototype,"cullable",[ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=Y()(he.prototype,"geometry",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je=Y()(he.prototype,"hierarchy",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pt=Y()(he.prototype,"transform",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he))||ke)},lFfV:function(ge,R,h){var B=h("uP9N"),p=h("3z9K");ge.exports=S;function S(E,A,k){return p.transform(E.nodes(),function(M,U){M[U]=B(E,U,A,k)},{})}},lSNA:function(ge,R,h){var B=h("o5UB");function p(S,E,A){return E=B(E),E in S?Object.defineProperty(S,E,{value:A,enumerable:!0,configurable:!0,writable:!0}):S[E]=A,S}ge.exports=p,ge.exports.__esModule=!0,ge.exports.default=ge.exports},ljNz:function(ge,R,h){"use strict";h.d(R,"a",function(){return B});var B=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent)},lkze:function(ge,R,h){"use strict";var B=h("wx14"),p=h("ODXe"),S=h("dm2S"),E=h("q1tI"),A=h.n(E),k=h("2/Rp"),M=h("zvFY");function U($){return!!($&&!!$.then)}var V=function(W){var Y=E.useRef(!1),ee=E.useRef(null),ne=Object(S.a)(!1),ie=Object(p.a)(ne,2),re=ie[0],J=ie[1],ce=W.close,G=function(){ce==null||ce.apply(void 0,arguments)};E.useEffect(function(){var de=null;return W.autoFocus&&(de=setTimeout(function(){var ke;(ke=ee.current)===null||ke===void 0||ke.focus()})),function(){de&&clearTimeout(de)}},[]);var Z=function(ke){!U(ke)||(J(!0),ke.then(function(){J(!1,!0),G.apply(void 0,arguments),Y.current=!1},function(he){console.error(he),J(!1,!0),Y.current=!1}))},fe=function(ke){var he=W.actionFn;if(!Y.current){if(Y.current=!0,!he){G();return}var Oe;if(W.emitEvent){if(Oe=he(ke),W.quitOnNullishReturnValue&&!U(Oe)){Y.current=!1,G(ke);return}}else if(he.length)Oe=he(ce),Y.current=!1;else if(Oe=he(),!Oe){G();return}Z(Oe)}},se=W.type,ve=W.children,ae=W.prefixCls,j=W.buttonProps;return E.createElement(k.a,Object(B.a)({},Object(M.a)(se),{onClick:fe,loading:re,prefixCls:ae},j,{ref:ee}),ve)};R.a=V},lnY3:function(ge,R,h){},lwsE:function(ge,R){function h(B,p){if(!(B instanceof p))throw new TypeError("Cannot call a class as a function")}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},m0LI:function(ge,R){function h(B,p){var S=B==null?null:typeof Symbol!="undefined"&&B[Symbol.iterator]||B["@@iterator"];if(S!=null){var E,A,k,M,U=[],V=!0,$=!1;try{if(k=(S=S.call(B)).next,p===0){if(Object(S)!==S)return;V=!1}else for(;!(V=(E=k.call(S)).done)&&(U.push(E.value),U.length!==p);V=!0);}catch(W){$=!0,A=W}finally{try{if(!V&&S.return!=null&&(M=S.return(),Object(M)!==M))return}finally{if($)throw A}}return U}}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},mNvP:function(ge,R,h){(function(B,p){/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var S;(function(E){(function(A){var k=typeof p=="object"?p:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),M=U(E);typeof k.Reflect=="undefined"?k.Reflect=E:M=U(k.Reflect,M),A(M);function U(V,$){return function(W,Y){typeof V[W]!="function"&&Object.defineProperty(V,W,{configurable:!0,writable:!0,value:Y}),$&&$(W,Y)}}})(function(A){var k=Object.prototype.hasOwnProperty,M=typeof Symbol=="function",U=M&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",V=M&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",$=typeof Object.create=="function",W={__proto__:[]}instanceof Array,Y=!$&&!W,ee={create:$?function(){return me(Object.create(null))}:W?function(){return me({__proto__:null})}:function(){return me({})},has:Y?function(ue,Re){return k.call(ue,Re)}:function(ue,Re){return Re in ue},get:Y?function(ue,Re){return k.call(ue,Re)?ue[Re]:void 0}:function(ue,Re){return ue[Re]}},ne=Object.getPrototypeOf(Function),ie=typeof B=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",re=!ie&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:dt(),J=!ie&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:vt(),ce=!ie&&typeof WeakMap=="function"?WeakMap:Bt(),G=new ce;function Z(ue,Re,Rt,Kt){if(un(Rt)){if(!Dn(ue))throw new TypeError;if(!Ut(Re))throw new TypeError;return We(ue,Re)}else{if(!Dn(ue))throw new TypeError;if(!Ft(Re))throw new TypeError;if(!Ft(Kt)&&!un(Kt)&&!ln(Kt))throw new TypeError;return ln(Kt)&&(Kt=void 0),Rt=jn(Rt),D(ue,Re,Rt,Kt)}}A("decorate",Z);function fe(ue,Re){function Rt(Kt,Bn){if(!Ft(Kt))throw new TypeError;if(!un(Bn)&&!ct(Bn))throw new TypeError;$e(ue,Re,Kt,Bn)}return Rt}A("metadata",fe);function se(ue,Re,Rt,Kt){if(!Ft(Rt))throw new TypeError;return un(Kt)||(Kt=jn(Kt)),$e(ue,Re,Rt,Kt)}A("defineMetadata",se);function ve(ue,Re,Rt){if(!Ft(Re))throw new TypeError;return un(Rt)||(Rt=jn(Rt)),pt(ue,Re,Rt)}A("hasMetadata",ve);function ae(ue,Re,Rt){if(!Ft(Re))throw new TypeError;return un(Rt)||(Rt=jn(Rt)),nt(ue,Re,Rt)}A("hasOwnMetadata",ae);function j(ue,Re,Rt){if(!Ft(Re))throw new TypeError;return un(Rt)||(Rt=jn(Rt)),Lt(ue,Re,Rt)}A("getMetadata",j);function de(ue,Re,Rt){if(!Ft(Re))throw new TypeError;return un(Rt)||(Rt=jn(Rt)),Gt(ue,Re,Rt)}A("getOwnMetadata",de);function ke(ue,Re){if(!Ft(ue))throw new TypeError;return un(Re)||(Re=jn(Re)),jt(ue,Re)}A("getMetadataKeys",ke);function he(ue,Re){if(!Ft(ue))throw new TypeError;return un(Re)||(Re=jn(Re)),Be(ue,Re)}A("getOwnMetadataKeys",he);function Oe(ue,Re,Rt){if(!Ft(Re))throw new TypeError;un(Rt)||(Rt=jn(Rt));var Kt=je(Re,Rt,!1);if(un(Kt)||!Kt.delete(ue))return!1;if(Kt.size>0)return!0;var Bn=G.get(Re);return Bn.delete(Rt),Bn.size>0||G.delete(Re),!0}A("deleteMetadata",Oe);function We(ue,Re){for(var Rt=ue.length-1;Rt>=0;--Rt){var Kt=ue[Rt],Bn=Kt(Re);if(!un(Bn)&&!ln(Bn)){if(!Ut(Bn))throw new TypeError;Re=Bn}}return Re}function D(ue,Re,Rt,Kt){for(var Bn=ue.length-1;Bn>=0;--Bn){var Nr=ue[Bn],Rn=Nr(Re,Rt,Kt);if(!un(Rn)&&!ln(Rn)){if(!Ft(Rn))throw new TypeError;Kt=Rn}}return Kt}function je(ue,Re,Rt){var Kt=G.get(ue);if(un(Kt)){if(!Rt)return;Kt=new re,G.set(ue,Kt)}var Bn=Kt.get(Re);if(un(Bn)){if(!Rt)return;Bn=new re,Kt.set(Re,Bn)}return Bn}function pt(ue,Re,Rt){var Kt=nt(ue,Re,Rt);if(Kt)return!0;var Bn=Mn(Re);return ln(Bn)?!1:pt(ue,Bn,Rt)}function nt(ue,Re,Rt){var Kt=je(Re,Rt,!1);return un(Kt)?!1:hn(Kt.has(ue))}function Lt(ue,Re,Rt){var Kt=nt(ue,Re,Rt);if(Kt)return Gt(ue,Re,Rt);var Bn=Mn(Re);if(!ln(Bn))return Lt(ue,Bn,Rt)}function Gt(ue,Re,Rt){var Kt=je(Re,Rt,!1);if(!un(Kt))return Kt.get(ue)}function $e(ue,Re,Rt,Kt){var Bn=je(Rt,Kt,!0);Bn.set(ue,Re)}function jt(ue,Re){var Rt=Be(ue,Re),Kt=Mn(ue);if(Kt===null)return Rt;var Bn=jt(Kt,Re);if(Bn.length<=0)return Rt;if(Rt.length<=0)return Bn;for(var Nr=new J,Rn=[],Cr=0,tr=Rt;Cr<tr.length;Cr++){var jr=tr[Cr],zr=Nr.has(jr);zr||(Nr.add(jr),Rn.push(jr))}for(var Ua=0,oa=Bn;Ua<oa.length;Ua++){var jr=oa[Ua],zr=Nr.has(jr);zr||(Nr.add(jr),Rn.push(jr))}return Rn}function Be(ue,Re){var Rt=[],Kt=je(ue,Re,!1);if(un(Kt))return Rt;for(var Bn=Kt.keys(),Nr=kt(Bn),Rn=0;;){var Cr=tt(Nr);if(!Cr)return Rt.length=Rn,Rt;var tr=yt(Cr);try{Rt[Rn]=tr}catch(jr){try{I(Nr)}finally{throw jr}}Rn++}}function pe(ue){if(ue===null)return 1;switch(typeof ue){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return ue===null?1:6;default:return 6}}function un(ue){return ue===void 0}function ln(ue){return ue===null}function Fn(ue){return typeof ue=="symbol"}function Ft(ue){return typeof ue=="object"?ue!==null:typeof ue=="function"}function Pn(ue,Re){switch(pe(ue)){case 0:return ue;case 1:return ue;case 2:return ue;case 3:return ue;case 4:return ue;case 5:return ue}var Rt=Re===3?"string":Re===5?"number":"default",Kt=Ct(ue,U);if(Kt!==void 0){var Bn=Kt.call(ue,Rt);if(Ft(Bn))throw new TypeError;return Bn}return lr(ue,Rt==="default"?"number":Rt)}function lr(ue,Re){if(Re==="string"){var Rt=ue.toString;if(ft(Rt)){var Kt=Rt.call(ue);if(!Ft(Kt))return Kt}var Bn=ue.valueOf;if(ft(Bn)){var Kt=Bn.call(ue);if(!Ft(Kt))return Kt}}else{var Bn=ue.valueOf;if(ft(Bn)){var Kt=Bn.call(ue);if(!Ft(Kt))return Kt}var Nr=ue.toString;if(ft(Nr)){var Kt=Nr.call(ue);if(!Ft(Kt))return Kt}}throw new TypeError}function hn(ue){return!!ue}function On(ue){return""+ue}function jn(ue){var Re=Pn(ue,3);return Fn(Re)?Re:On(Re)}function Dn(ue){return Array.isArray?Array.isArray(ue):ue instanceof Object?ue instanceof Array:Object.prototype.toString.call(ue)==="[object Array]"}function ft(ue){return typeof ue=="function"}function Ut(ue){return typeof ue=="function"}function ct(ue){switch(pe(ue)){case 3:return!0;case 4:return!0;default:return!1}}function Ct(ue,Re){var Rt=ue[Re];if(Rt!=null){if(!ft(Rt))throw new TypeError;return Rt}}function kt(ue){var Re=Ct(ue,V);if(!ft(Re))throw new TypeError;var Rt=Re.call(ue);if(!Ft(Rt))throw new TypeError;return Rt}function yt(ue){return ue.value}function tt(ue){var Re=ue.next();return Re.done?!1:Re}function I(ue){var Re=ue.return;Re&&Re.call(ue)}function Mn(ue){var Re=Object.getPrototypeOf(ue);if(typeof ue!="function"||ue===ne||Re!==ne)return Re;var Rt=ue.prototype,Kt=Rt&&Object.getPrototypeOf(Rt);if(Kt==null||Kt===Object.prototype)return Re;var Bn=Kt.constructor;return typeof Bn!="function"||Bn===ue?Re:Bn}function dt(){var ue={},Re=[],Rt=function(){function Rn(Cr,tr,jr){this._index=0,this._keys=Cr,this._values=tr,this._selector=jr}return Rn.prototype["@@iterator"]=function(){return this},Rn.prototype[V]=function(){return this},Rn.prototype.next=function(){var Cr=this._index;if(Cr>=0&&Cr<this._keys.length){var tr=this._selector(this._keys[Cr],this._values[Cr]);return Cr+1>=this._keys.length?(this._index=-1,this._keys=Re,this._values=Re):this._index++,{value:tr,done:!1}}return{value:void 0,done:!0}},Rn.prototype.throw=function(Cr){throw this._index>=0&&(this._index=-1,this._keys=Re,this._values=Re),Cr},Rn.prototype.return=function(Cr){return this._index>=0&&(this._index=-1,this._keys=Re,this._values=Re),{value:Cr,done:!0}},Rn}();return function(){function Rn(){this._keys=[],this._values=[],this._cacheKey=ue,this._cacheIndex=-2}return Object.defineProperty(Rn.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Rn.prototype.has=function(Cr){return this._find(Cr,!1)>=0},Rn.prototype.get=function(Cr){var tr=this._find(Cr,!1);return tr>=0?this._values[tr]:void 0},Rn.prototype.set=function(Cr,tr){var jr=this._find(Cr,!0);return this._values[jr]=tr,this},Rn.prototype.delete=function(Cr){var tr=this._find(Cr,!1);if(tr>=0){for(var jr=this._keys.length,zr=tr+1;zr<jr;zr++)this._keys[zr-1]=this._keys[zr],this._values[zr-1]=this._values[zr];return this._keys.length--,this._values.length--,Cr===this._cacheKey&&(this._cacheKey=ue,this._cacheIndex=-2),!0}return!1},Rn.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=ue,this._cacheIndex=-2},Rn.prototype.keys=function(){return new Rt(this._keys,this._values,Kt)},Rn.prototype.values=function(){return new Rt(this._keys,this._values,Bn)},Rn.prototype.entries=function(){return new Rt(this._keys,this._values,Nr)},Rn.prototype["@@iterator"]=function(){return this.entries()},Rn.prototype[V]=function(){return this.entries()},Rn.prototype._find=function(Cr,tr){return this._cacheKey!==Cr&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Cr)),this._cacheIndex<0&&tr&&(this._cacheIndex=this._keys.length,this._keys.push(Cr),this._values.push(void 0)),this._cacheIndex},Rn}();function Kt(Rn,Cr){return Rn}function Bn(Rn,Cr){return Cr}function Nr(Rn,Cr){return[Rn,Cr]}}function vt(){return function(){function ue(){this._map=new re}return Object.defineProperty(ue.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),ue.prototype.has=function(Re){return this._map.has(Re)},ue.prototype.add=function(Re){return this._map.set(Re,Re),this},ue.prototype.delete=function(Re){return this._map.delete(Re)},ue.prototype.clear=function(){this._map.clear()},ue.prototype.keys=function(){return this._map.keys()},ue.prototype.values=function(){return this._map.values()},ue.prototype.entries=function(){return this._map.entries()},ue.prototype["@@iterator"]=function(){return this.keys()},ue.prototype[V]=function(){return this.keys()},ue}()}function Bt(){var ue=16,Re=ee.create(),Rt=Kt();return function(){function tr(){this._key=Kt()}return tr.prototype.has=function(jr){var zr=Bn(jr,!1);return zr!==void 0?ee.has(zr,this._key):!1},tr.prototype.get=function(jr){var zr=Bn(jr,!1);return zr!==void 0?ee.get(zr,this._key):void 0},tr.prototype.set=function(jr,zr){var Ua=Bn(jr,!0);return Ua[this._key]=zr,this},tr.prototype.delete=function(jr){var zr=Bn(jr,!1);return zr!==void 0?delete zr[this._key]:!1},tr.prototype.clear=function(){this._key=Kt()},tr}();function Kt(){var tr;do tr="@@WeakMap@@"+Cr();while(ee.has(Re,tr));return Re[tr]=!0,tr}function Bn(tr,jr){if(!k.call(tr,Rt)){if(!jr)return;Object.defineProperty(tr,Rt,{value:ee.create()})}return tr[Rt]}function Nr(tr,jr){for(var zr=0;zr<jr;++zr)tr[zr]=Math.random()*255|0;return tr}function Rn(tr){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(tr)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(tr)):Nr(new Uint8Array(tr),tr):Nr(new Array(tr),tr)}function Cr(){var tr=Rn(ue);tr[6]=tr[6]&79|64,tr[8]=tr[8]&191|128;for(var jr="",zr=0;zr<ue;++zr){var Ua=tr[zr];(zr===4||zr===6||zr===8)&&(jr+="-"),Ua<16&&(jr+="0"),jr+=Ua.toString(16).toLowerCase()}return jr}}function me(ue){return ue.__=void 0,delete ue.__,ue}})})(S||(S={}))}).call(this,h("Q2Ig"),h("IyRk"))},n2J3:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.unmanaged=void 0;var B=h("xfSm"),p=h("GXnB"),S=h("Ztfv");function E(){return function(A,k,M){var U=new p.Metadata(B.UNMANAGED_TAG,!0);S.tagParameter(A,k,M,U)}}R.unmanaged=E},nO7B:function(ge,R){},"nW7/":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Twitter=void 0;var B=h("q1tI"),p=ne(B),S=h("17x9"),E=ne(S),A=h("/FUP"),k=ne(A),M=h("3WF5"),U=ne(M),V=h("QkVN"),$=ne(V),W=h("p8yl"),Y=ne(W),ee=h("TM95");function ne(re){return re&&re.__esModule?re:{default:re}}var ie=R.Twitter=function(J){var ce=J.onChange,G=J.onSwatchHover,Z=J.hex,fe=J.colors,se=J.width,ve=J.triangle,ae=J.styles,j=ae===void 0?{}:ae,de=J.className,ke=de===void 0?"":de,he=(0,k.default)((0,$.default)({default:{card:{width:se,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},j),{"hide-triangle":ve==="hide","top-left-triangle":ve==="top-left","top-right-triangle":ve==="top-right"}),Oe=function(D,je){Y.default.isValidHex(D)&&ce({hex:D,source:"hex"},je)};return p.default.createElement("div",{style:he.card,className:"twitter-picker "+ke},p.default.createElement("div",{style:he.triangleShadow}),p.default.createElement("div",{style:he.triangle}),p.default.createElement("div",{style:he.body},(0,U.default)(fe,function(We,D){return p.default.createElement(ee.Swatch,{key:D,color:We,hex:We,style:he.swatch,onClick:Oe,onHover:G,focusStyle:{boxShadow:"0 0 4px "+We}})}),p.default.createElement("div",{style:he.hash},"#"),p.default.createElement(ee.EditableInput,{style:{input:he.input},value:Z.replace("#",""),onChange:Oe}),p.default.createElement("div",{style:he.clear})))};ie.propTypes={width:E.default.oneOfType([E.default.string,E.default.number]),triangle:E.default.oneOf(["hide","top-left","top-right"]),colors:E.default.arrayOf(E.default.string),styles:E.default.object},ie.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},R.default=(0,ee.ColorWrap)(ie)},o0o1:function(ge,R,h){var B=h("fsL8")();ge.exports=B;try{regeneratorRuntime=B}catch(p){typeof globalThis=="object"?globalThis.regeneratorRuntime=B:Function("r","regeneratorRuntime = r")(B)}},o5UB:function(ge,R,h){var B=h("cDf5").default,p=h("5Q0V");function S(E){var A=p(E,"string");return B(A)==="symbol"?A:String(A)}ge.exports=S,ge.exports.__esModule=!0,ge.exports.default=ge.exports},oDt1:function(ge,R,h){"use strict";h.d(R,"a",function(){return $}),h.d(R,"b",function(){return W});var B=h("o0o1"),p=h.n(B),S=h("yXPU"),E=h.n(S),A=h("W8MJ"),k=h.n(A),M=h("lwsE"),U=h.n(M),V=h("9y2T"),$=function Y(ee){U()(this,Y)},W=function(){function Y(ee){U()(this,Y),this.clazz=void 0,this.components=[],this.entities=[],this.lookup={},this.clazz=ee}return k()(Y,[{key:"clear",value:function(){this.components=[],this.entities=[],this.lookup={}}},{key:"contains",value:function(ne){return this.lookup[ne]>-1}},{key:"create",value:function(ne,ie){this.lookup[ne]=this.components.length;var re=new this.clazz(ie||{});return this.components.push(re),this.entities.push(ne),re}},{key:"remove",value:function(ne){var ie=this.lookup[ne];ie>-1&&ie<this.components.length-1&&(this.components[ie]=this.components[this.components.length-1],this.entities[ie]=this.entities[this.entities.length-1],this.lookup[this.entities[ie]]=ie),this.components.pop(),this.entities.pop(),delete this.lookup[ne]}},{key:"removeKeepSorted",value:function(ne){var ie=this.lookup[ne];if(ie>-1){var re=this.entities[ie];if(ie<this.components.length-1){for(var J=ie+1;J<this.components.length;++J)this.components[J-1]=this.components[J];for(var ce=ie+1;ce<this.entities.length;++ce)this.entities[ce-1]=this.entities[ce],this.lookup[this.entities[ce-1]]=ce-1}this.components.pop(),this.entities.pop(),delete this.lookup[re]}}},{key:"moveItem",value:function(ne,ie){if(ne!==ie){for(var re=this.components[ne],J=this.entities[ne],ce=ne<ie?1:-1,G=ne;G!==ie;G+=ce){var Z=G+ce;this.components[G]=this.components[Z],this.entities[G]=this.entities[Z],this.lookup[this.entities[G]]=G}this.components[ie]=re,this.entities[ie]=J,this.lookup[J]=ie}}},{key:"getEntity",value:function(ne){return this.entities[ne]}},{key:"getComponent",value:function(ne){return this.components[ne]}},{key:"getComponentByEntity",value:function(ne){var ie=this.lookup[ne];return ie>-1?this.components[ie]:null}},{key:"getCount",value:function(){return this.components.length}},{key:"getEntityByComponentIndex",value:function(ne){for(var ie=0,re=Object.keys(this.lookup);ie<re.length;ie++){var J=re[ie],ce=Number(J);if(this.lookup[ce]===ne)return ce}return V.a}},{key:"find",value:function(ne){for(var ie=0;ie<this.getCount();ie++){var re=this.getComponent(ie);if(ne(re,ie))return re}return null}},{key:"findIndex",value:function(ne){for(var ie=0;ie<this.getCount();ie++){var re=this.getComponent(ie);if(ne(re,ie))return ie}return-1}},{key:"forEach",value:function(ne){for(var ie=0,re=Object.keys(this.lookup);ie<re.length;ie++){var J=re[ie],ce=Number(J),G=this.lookup[ce];ne(ce,this.getComponent(G))}}},{key:"forEachAsync",value:function(){var ee=E()(p.a.mark(function ie(re){var J,ce,G,Z,fe;return p.a.wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:J=0,ce=Object.keys(this.lookup);case 1:if(!(J<ce.length)){ve.next=10;break}return G=ce[J],Z=Number(G),fe=this.lookup[Z],ve.next=7,re(Z,this.getComponent(fe));case 7:J++,ve.next=1;break;case 10:case"end":return ve.stop()}},ie,this)}));function ne(ie){return ee.apply(this,arguments)}return ne}()},{key:"map",value:function(ne){for(var ie=[],re=0,J=Object.keys(this.lookup);re<J.length;re++){var ce=J[re],G=Number(ce),Z=this.lookup[G];ie.push(ne(G,this.getComponent(Z)))}return ie}}]),Y}()},oPLb:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Compact=void 0;var B=h("q1tI"),p=ce(B),S=h("17x9"),E=ce(S),A=h("/FUP"),k=ce(A),M=h("3WF5"),U=ce(M),V=h("QkVN"),$=ce(V),W=h("p8yl"),Y=ce(W),ee=h("TM95"),ne=h("ZQT/"),ie=ce(ne),re=h("8J/B"),J=ce(re);function ce(Z){return Z&&Z.__esModule?Z:{default:Z}}var G=R.Compact=function(fe){var se=fe.onChange,ve=fe.onSwatchHover,ae=fe.colors,j=fe.hex,de=fe.rgb,ke=fe.styles,he=ke===void 0?{}:ke,Oe=fe.className,We=Oe===void 0?"":Oe,D=(0,k.default)((0,$.default)({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},he)),je=function(nt,Lt){nt.hex?Y.default.isValidHex(nt.hex)&&se({hex:nt.hex,source:"hex"},Lt):se(nt,Lt)};return p.default.createElement(ee.Raised,{style:D.Compact,styles:he},p.default.createElement("div",{style:D.compact,className:"compact-picker "+We},p.default.createElement("div",null,(0,U.default)(ae,function(pt){return p.default.createElement(ie.default,{key:pt,color:pt,active:pt.toLowerCase()===j,onClick:je,onSwatchHover:ve})}),p.default.createElement("div",{style:D.clear})),p.default.createElement(J.default,{hex:j,rgb:de,onChange:je})))};G.propTypes={colors:E.default.arrayOf(E.default.string),styles:E.default.object},G.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},R.default=(0,ee.ColorWrap)(G)},oaX6:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.targetName=void 0;var B=h("xfSm"),p=h("GXnB"),S=h("Ztfv");function E(A){return function(k,M,U){var V=new p.Metadata(B.NAME_TAG,A);S.tagParameter(k,M,U,V)}}R.targetName=E},olaO:function(ge,R){},ovOe:function(ge,R,h){(function(B,p){ge.exports=p(h("q1tI"))})(this,function(B){return function(p){var S={};function E(A){if(S[A])return S[A].exports;var k=S[A]={i:A,l:!1,exports:{}};return p[A].call(k.exports,k,k.exports,E),k.l=!0,k.exports}return E.m=p,E.c=S,E.d=function(A,k,M){E.o(A,k)||Object.defineProperty(A,k,{enumerable:!0,get:M})},E.r=function(A){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},E.t=function(A,k){if(1&k&&(A=E(A)),8&k||4&k&&typeof A=="object"&&A&&A.__esModule)return A;var M=Object.create(null);if(E.r(M),Object.defineProperty(M,"default",{enumerable:!0,value:A}),2&k&&typeof A!="string")for(var U in A)E.d(M,U,function(V){return A[V]}.bind(null,U));return M},E.n=function(A){var k=A&&A.__esModule?function(){return A.default}:function(){return A};return E.d(k,"a",k),k},E.o=function(A,k){return Object.prototype.hasOwnProperty.call(A,k)},E.p="",E(E.s=48)}([function(p,S){p.exports=B},function(p,S){var E=p.exports={version:"2.6.12"};typeof __e=="number"&&(__e=E)},function(p,S,E){var A=E(26)("wks"),k=E(17),M=E(3).Symbol,U=typeof M=="function";(p.exports=function(V){return A[V]||(A[V]=U&&M[V]||(U?M:k)("Symbol."+V))}).store=A},function(p,S){var E=p.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=E)},function(p,S,E){p.exports=!E(8)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(p,S){var E={}.hasOwnProperty;p.exports=function(A,k){return E.call(A,k)}},function(p,S,E){var A=E(7),k=E(16);p.exports=E(4)?function(M,U,V){return A.f(M,U,k(1,V))}:function(M,U,V){return M[U]=V,M}},function(p,S,E){var A=E(10),k=E(35),M=E(23),U=Object.defineProperty;S.f=E(4)?Object.defineProperty:function(V,$,W){if(A(V),$=M($,!0),A(W),k)try{return U(V,$,W)}catch(Y){}if("get"in W||"set"in W)throw TypeError("Accessors not supported!");return"value"in W&&(V[$]=W.value),V}},function(p,S){p.exports=function(E){try{return!!E()}catch(A){return!0}}},function(p,S,E){var A=E(40),k=E(22);p.exports=function(M){return A(k(M))}},function(p,S,E){var A=E(11);p.exports=function(k){if(!A(k))throw TypeError(k+" is not an object!");return k}},function(p,S){p.exports=function(E){return typeof E=="object"?E!==null:typeof E=="function"}},function(p,S){p.exports={}},function(p,S,E){var A=E(39),k=E(27);p.exports=Object.keys||function(M){return A(M,k)}},function(p,S){p.exports=!0},function(p,S,E){var A=E(3),k=E(1),M=E(53),U=E(6),V=E(5),$=function W(Y,ee,ne){var ie,re,J,ce=Y&W.F,G=Y&W.G,Z=Y&W.S,fe=Y&W.P,se=Y&W.B,ve=Y&W.W,ae=G?k:k[ee]||(k[ee]={}),j=ae.prototype,de=G?A:Z?A[ee]:(A[ee]||{}).prototype;for(ie in G&&(ne=ee),ne)(re=!ce&&de&&de[ie]!==void 0)&&V(ae,ie)||(J=re?de[ie]:ne[ie],ae[ie]=G&&typeof de[ie]!="function"?ne[ie]:se&&re?M(J,A):ve&&de[ie]==J?function(ke){var he=function(We,D,je){if(this instanceof ke){switch(arguments.length){case 0:return new ke;case 1:return new ke(We);case 2:return new ke(We,D)}return new ke(We,D,je)}return ke.apply(this,arguments)};return he.prototype=ke.prototype,he}(J):fe&&typeof J=="function"?M(Function.call,J):J,fe&&((ae.virtual||(ae.virtual={}))[ie]=J,Y&W.R&&j&&!j[ie]&&U(j,ie,J)))};$.F=1,$.G=2,$.S=4,$.P=8,$.B=16,$.W=32,$.U=64,$.R=128,p.exports=$},function(p,S){p.exports=function(E,A){return{enumerable:!(1&E),configurable:!(2&E),writable:!(4&E),value:A}}},function(p,S){var E=0,A=Math.random();p.exports=function(k){return"Symbol(".concat(k===void 0?"":k,")_",(++E+A).toString(36))}},function(p,S,E){var A=E(22);p.exports=function(k){return Object(A(k))}},function(p,S){S.f={}.propertyIsEnumerable},function(p,S,E){"use strict";var A=E(52)(!0);E(34)(String,"String",function(k){this._t=String(k),this._i=0},function(){var k,M=this._t,U=this._i;return U>=M.length?{value:void 0,done:!0}:(k=A(M,U),this._i+=k.length,{value:k,done:!1})})},function(p,S){var E=Math.ceil,A=Math.floor;p.exports=function(k){return isNaN(k=+k)?0:(k>0?A:E)(k)}},function(p,S){p.exports=function(E){if(E==null)throw TypeError("Can't call method on  "+E);return E}},function(p,S,E){var A=E(11);p.exports=function(k,M){if(!A(k))return k;var U,V;if(M&&typeof(U=k.toString)=="function"&&!A(V=U.call(k))||typeof(U=k.valueOf)=="function"&&!A(V=U.call(k))||!M&&typeof(U=k.toString)=="function"&&!A(V=U.call(k)))return V;throw TypeError("Can't convert object to primitive value")}},function(p,S){var E={}.toString;p.exports=function(A){return E.call(A).slice(8,-1)}},function(p,S,E){var A=E(26)("keys"),k=E(17);p.exports=function(M){return A[M]||(A[M]=k(M))}},function(p,S,E){var A=E(1),k=E(3),M=k["__core-js_shared__"]||(k["__core-js_shared__"]={});(p.exports=function(U,V){return M[U]||(M[U]=V!==void 0?V:{})})("versions",[]).push({version:A.version,mode:E(14)?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})},function(p,S){p.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(p,S,E){var A=E(7).f,k=E(5),M=E(2)("toStringTag");p.exports=function(U,V,$){U&&!k(U=$?U:U.prototype,M)&&A(U,M,{configurable:!0,value:V})}},function(p,S,E){E(62);for(var A=E(3),k=E(6),M=E(12),U=E(2)("toStringTag"),V="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),$=0;$<V.length;$++){var W=V[$],Y=A[W],ee=Y&&Y.prototype;ee&&!ee[U]&&k(ee,U,W),M[W]=M.Array}},function(p,S,E){S.f=E(2)},function(p,S,E){var A=E(3),k=E(1),M=E(14),U=E(30),V=E(7).f;p.exports=function($){var W=k.Symbol||(k.Symbol=M?{}:A.Symbol||{});$.charAt(0)=="_"||$ in W||V(W,$,{value:U.f($)})}},function(p,S){S.f=Object.getOwnPropertySymbols},function(p,S){p.exports=function(E,A,k){return Math.min(Math.max(E,A),k)}},function(p,S,E){"use strict";var A=E(14),k=E(15),M=E(37),U=E(6),V=E(12),$=E(55),W=E(28),Y=E(61),ee=E(2)("iterator"),ne=!([].keys&&"next"in[].keys()),ie=function(){return this};p.exports=function(re,J,ce,G,Z,fe,se){$(ce,J,G);var ve,ae,j,de=function(Gt){if(!ne&&Gt in We)return We[Gt];switch(Gt){case"keys":case"values":return function(){return new ce(this,Gt)}}return function(){return new ce(this,Gt)}},ke=J+" Iterator",he=Z=="values",Oe=!1,We=re.prototype,D=We[ee]||We["@@iterator"]||Z&&We[Z],je=D||de(Z),pt=Z?he?de("entries"):je:void 0,nt=J=="Array"&&We.entries||D;if(nt&&(j=Y(nt.call(new re)))!==Object.prototype&&j.next&&(W(j,ke,!0),A||typeof j[ee]=="function"||U(j,ee,ie)),he&&D&&D.name!=="values"&&(Oe=!0,je=function(){return D.call(this)}),A&&!se||!ne&&!Oe&&We[ee]||U(We,ee,je),V[J]=je,V[ke]=ie,Z)if(ve={values:he?je:de("values"),keys:fe?je:de("keys"),entries:pt},se)for(ae in ve)ae in We||M(We,ae,ve[ae]);else k(k.P+k.F*(ne||Oe),J,ve);return ve}},function(p,S,E){p.exports=!E(4)&&!E(8)(function(){return Object.defineProperty(E(36)("div"),"a",{get:function(){return 7}}).a!=7})},function(p,S,E){var A=E(11),k=E(3).document,M=A(k)&&A(k.createElement);p.exports=function(U){return M?k.createElement(U):{}}},function(p,S,E){p.exports=E(6)},function(p,S,E){var A=E(10),k=E(56),M=E(27),U=E(25)("IE_PROTO"),V=function(){},$=function(){var Y,ee=E(36)("iframe"),ne=M.length;for(ee.style.display="none",E(60).appendChild(ee),ee.src="javascript:",(Y=ee.contentWindow.document).open(),Y.write("<script>document.F=Object</script>"),Y.close(),$=Y.F;ne--;)delete $.prototype[M[ne]];return $()};p.exports=Object.create||function(W,Y){var ee;return W!==null?(V.prototype=A(W),ee=new V,V.prototype=null,ee[U]=W):ee=$(),Y===void 0?ee:k(ee,Y)}},function(p,S,E){var A=E(5),k=E(9),M=E(57)(!1),U=E(25)("IE_PROTO");p.exports=function(V,$){var W,Y=k(V),ee=0,ne=[];for(W in Y)W!=U&&A(Y,W)&&ne.push(W);for(;$.length>ee;)A(Y,W=$[ee++])&&(~M(ne,W)||ne.push(W));return ne}},function(p,S,E){var A=E(24);p.exports=Object("z").propertyIsEnumerable(0)?Object:function(k){return A(k)=="String"?k.split(""):Object(k)}},function(p,S,E){var A=E(39),k=E(27).concat("length","prototype");S.f=Object.getOwnPropertyNames||function(M){return A(M,k)}},function(p,S,E){var A=E(24),k=E(2)("toStringTag"),M=A(function(){return arguments}())=="Arguments";p.exports=function(U){var V,$,W;return U===void 0?"Undefined":U===null?"Null":typeof($=function(Y,ee){try{return Y[ee]}catch(ne){}}(V=Object(U),k))=="string"?$:M?A(V):(W=A(V))=="Object"&&typeof V.callee=="function"?"Arguments":W}},function(p,S){var E;E=function(){return this}();try{E=E||new Function("return this")()}catch(A){typeof window=="object"&&(E=window)}p.exports=E},function(p,S){var E=/-?\d+(\.\d+)?%?/g;p.exports=function(A){return A.match(E)}},function(p,S,E){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.getBase16Theme=S.createStyling=S.invertTheme=void 0;var A=ie(E(49)),k=ie(E(76)),M=ie(E(81)),U=ie(E(89)),V=ie(E(93)),$=function(ae){if(ae&&ae.__esModule)return ae;var j={};if(ae!=null)for(var de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&(j[de]=ae[de]);return j.default=ae,j}(E(94)),W=ie(E(132)),Y=ie(E(133)),ee=ie(E(138)),ne=E(139);function ie(ae){return ae&&ae.__esModule?ae:{default:ae}}var re=$.default,J=(0,U.default)(re),ce=(0,ee.default)(Y.default,ne.rgb2yuv,function(ae){var j,de=(0,M.default)(ae,3),ke=de[0],he=de[1],Oe=de[2];return[(j=ke,j<.25?1:j<.5?.9-j:1.1-j),he,Oe]},ne.yuv2rgb,W.default),G=function(j){return function(de){return{className:[de.className,j.className].filter(Boolean).join(" "),style:(0,k.default)({},de.style||{},j.style||{})}}},Z=function(j,de){var ke=(0,U.default)(de);for(var he in j)ke.indexOf(he)===-1&&ke.push(he);return ke.reduce(function(Oe,We){return Oe[We]=function(D,je){if(D===void 0)return je;if(je===void 0)return D;var pt=D===void 0?"undefined":(0,A.default)(D),nt=je===void 0?"undefined":(0,A.default)(je);switch(pt){case"string":switch(nt){case"string":return[je,D].filter(Boolean).join(" ");case"object":return G({className:D,style:je});case"function":return function(Lt){for(var Gt=arguments.length,$e=Array(Gt>1?Gt-1:0),jt=1;jt<Gt;jt++)$e[jt-1]=arguments[jt];return G({className:D})(je.apply(void 0,[Lt].concat($e)))}}case"object":switch(nt){case"string":return G({className:je,style:D});case"object":return(0,k.default)({},je,D);case"function":return function(Lt){for(var Gt=arguments.length,$e=Array(Gt>1?Gt-1:0),jt=1;jt<Gt;jt++)$e[jt-1]=arguments[jt];return G({style:D})(je.apply(void 0,[Lt].concat($e)))}}case"function":switch(nt){case"string":return function(Lt){for(var Gt=arguments.length,$e=Array(Gt>1?Gt-1:0),jt=1;jt<Gt;jt++)$e[jt-1]=arguments[jt];return D.apply(void 0,[G(Lt)({className:je})].concat($e))};case"object":return function(Lt){for(var Gt=arguments.length,$e=Array(Gt>1?Gt-1:0),jt=1;jt<Gt;jt++)$e[jt-1]=arguments[jt];return D.apply(void 0,[G(Lt)({style:je})].concat($e))};case"function":return function(Lt){for(var Gt=arguments.length,$e=Array(Gt>1?Gt-1:0),jt=1;jt<Gt;jt++)$e[jt-1]=arguments[jt];return D.apply(void 0,[je.apply(void 0,[Lt].concat($e))].concat($e))}}}}(j[We],de[We]),Oe},{})},fe=function(j,de){for(var ke=arguments.length,he=Array(ke>2?ke-2:0),Oe=2;Oe<ke;Oe++)he[Oe-2]=arguments[Oe];if(de===null)return j;Array.isArray(de)||(de=[de]);var We=de.map(function(je){return j[je]}).filter(Boolean),D=We.reduce(function(je,pt){return typeof pt=="string"?je.className=[je.className,pt].filter(Boolean).join(" "):(pt===void 0?"undefined":(0,A.default)(pt))==="object"?je.style=(0,k.default)({},je.style,pt):typeof pt=="function"&&(je=(0,k.default)({},je,pt.apply(void 0,[je].concat(he)))),je},{className:"",style:{}});return D.className||delete D.className,(0,U.default)(D.style).length===0&&delete D.style,D},se=S.invertTheme=function(ae){return(0,U.default)(ae).reduce(function(j,de){return j[de]=/^base/.test(de)?ce(ae[de]):de==="scheme"?ae[de]+":inverted":ae[de],j},{})},ve=(S.createStyling=(0,V.default)(function(ae){for(var j=arguments.length,de=Array(j>3?j-3:0),ke=3;ke<j;ke++)de[ke-3]=arguments[ke];var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},We=he.defaultBase16,D=We===void 0?re:We,je=he.base16Themes,pt=je===void 0?null:je,nt=ve(Oe,pt);nt&&(Oe=(0,k.default)({},nt,Oe));var Lt=J.reduce(function(Be,pe){return Be[pe]=Oe[pe]||D[pe],Be},{}),Gt=(0,U.default)(Oe).reduce(function(Be,pe){return J.indexOf(pe)===-1&&(Be[pe]=Oe[pe]),Be},{}),$e=ae(Lt),jt=Z(Gt,$e);return(0,V.default)(fe,2).apply(void 0,[jt].concat(de))},3),S.getBase16Theme=function(ae,j){if(ae&&ae.extend&&(ae=ae.extend),typeof ae=="string"){var de=ae.split(":"),ke=(0,M.default)(de,2),he=ke[0],Oe=ke[1];ae=(j||{})[he]||$[he],Oe==="inverted"&&(ae=se(ae))}return ae&&ae.hasOwnProperty("base00")?ae:void 0})},function(p,S,E){"use strict";var A,k=typeof Reflect=="object"?Reflect:null,M=k&&typeof k.apply=="function"?k.apply:function(G,Z,fe){return Function.prototype.apply.call(G,Z,fe)};A=k&&typeof k.ownKeys=="function"?k.ownKeys:Object.getOwnPropertySymbols?function(G){return Object.getOwnPropertyNames(G).concat(Object.getOwnPropertySymbols(G))}:function(G){return Object.getOwnPropertyNames(G)};var U=Number.isNaN||function(G){return G!=G};function V(){V.init.call(this)}p.exports=V,p.exports.once=function(G,Z){return new Promise(function(fe,se){function ve(){ae!==void 0&&G.removeListener("error",ae),fe([].slice.call(arguments))}var ae;Z!=="error"&&(ae=function(de){G.removeListener(Z,ve),se(de)},G.once("error",ae)),G.once(Z,ve)})},V.EventEmitter=V,V.prototype._events=void 0,V.prototype._eventsCount=0,V.prototype._maxListeners=void 0;var $=10;function W(G){if(typeof G!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof G)}function Y(G){return G._maxListeners===void 0?V.defaultMaxListeners:G._maxListeners}function ee(G,Z,fe,se){var ve,ae,j,de;if(W(fe),(ae=G._events)===void 0?(ae=G._events=Object.create(null),G._eventsCount=0):(ae.newListener!==void 0&&(G.emit("newListener",Z,fe.listener?fe.listener:fe),ae=G._events),j=ae[Z]),j===void 0)j=ae[Z]=fe,++G._eventsCount;else if(typeof j=="function"?j=ae[Z]=se?[fe,j]:[j,fe]:se?j.unshift(fe):j.push(fe),(ve=Y(G))>0&&j.length>ve&&!j.warned){j.warned=!0;var ke=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(Z)+" listeners added. Use emitter.setMaxListeners() to increase limit");ke.name="MaxListenersExceededWarning",ke.emitter=G,ke.type=Z,ke.count=j.length,de=ke,console&&console.warn&&console.warn(de)}return G}function ne(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ie(G,Z,fe){var se={fired:!1,wrapFn:void 0,target:G,type:Z,listener:fe},ve=ne.bind(se);return ve.listener=fe,se.wrapFn=ve,ve}function re(G,Z,fe){var se=G._events;if(se===void 0)return[];var ve=se[Z];return ve===void 0?[]:typeof ve=="function"?fe?[ve.listener||ve]:[ve]:fe?function(ae){for(var j=new Array(ae.length),de=0;de<j.length;++de)j[de]=ae[de].listener||ae[de];return j}(ve):ce(ve,ve.length)}function J(G){var Z=this._events;if(Z!==void 0){var fe=Z[G];if(typeof fe=="function")return 1;if(fe!==void 0)return fe.length}return 0}function ce(G,Z){for(var fe=new Array(Z),se=0;se<Z;++se)fe[se]=G[se];return fe}Object.defineProperty(V,"defaultMaxListeners",{enumerable:!0,get:function(){return $},set:function(Z){if(typeof Z!="number"||Z<0||U(Z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Z+".");$=Z}}),V.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},V.prototype.setMaxListeners=function(G){if(typeof G!="number"||G<0||U(G))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+G+".");return this._maxListeners=G,this},V.prototype.getMaxListeners=function(){return Y(this)},V.prototype.emit=function(G){for(var Z=[],fe=1;fe<arguments.length;fe++)Z.push(arguments[fe]);var se=G==="error",ve=this._events;if(ve!==void 0)se=se&&ve.error===void 0;else if(!se)return!1;if(se){var ae;if(Z.length>0&&(ae=Z[0]),ae instanceof Error)throw ae;var j=new Error("Unhandled error."+(ae?" ("+ae.message+")":""));throw j.context=ae,j}var de=ve[G];if(de===void 0)return!1;if(typeof de=="function")M(de,this,Z);else{var ke=de.length,he=ce(de,ke);for(fe=0;fe<ke;++fe)M(he[fe],this,Z)}return!0},V.prototype.addListener=function(G,Z){return ee(this,G,Z,!1)},V.prototype.on=V.prototype.addListener,V.prototype.prependListener=function(G,Z){return ee(this,G,Z,!0)},V.prototype.once=function(G,Z){return W(Z),this.on(G,ie(this,G,Z)),this},V.prototype.prependOnceListener=function(G,Z){return W(Z),this.prependListener(G,ie(this,G,Z)),this},V.prototype.removeListener=function(G,Z){var fe,se,ve,ae,j;if(W(Z),(se=this._events)===void 0)return this;if((fe=se[G])===void 0)return this;if(fe===Z||fe.listener===Z)--this._eventsCount==0?this._events=Object.create(null):(delete se[G],se.removeListener&&this.emit("removeListener",G,fe.listener||Z));else if(typeof fe!="function"){for(ve=-1,ae=fe.length-1;ae>=0;ae--)if(fe[ae]===Z||fe[ae].listener===Z){j=fe[ae].listener,ve=ae;break}if(ve<0)return this;ve===0?fe.shift():function(de,ke){for(;ke+1<de.length;ke++)de[ke]=de[ke+1];de.pop()}(fe,ve),fe.length===1&&(se[G]=fe[0]),se.removeListener!==void 0&&this.emit("removeListener",G,j||Z)}return this},V.prototype.off=V.prototype.removeListener,V.prototype.removeAllListeners=function(G){var Z,fe,se;if((fe=this._events)===void 0)return this;if(fe.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):fe[G]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete fe[G]),this;if(arguments.length===0){var ve,ae=Object.keys(fe);for(se=0;se<ae.length;++se)(ve=ae[se])!=="removeListener"&&this.removeAllListeners(ve);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Z=fe[G])=="function")this.removeListener(G,Z);else if(Z!==void 0)for(se=Z.length-1;se>=0;se--)this.removeListener(G,Z[se]);return this},V.prototype.listeners=function(G){return re(this,G,!0)},V.prototype.rawListeners=function(G){return re(this,G,!1)},V.listenerCount=function(G,Z){return typeof G.listenerCount=="function"?G.listenerCount(Z):J.call(G,Z)},V.prototype.listenerCount=J,V.prototype.eventNames=function(){return this._eventsCount>0?A(this._events):[]}},function(p,S,E){p.exports.Dispatcher=E(140)},function(p,S,E){p.exports=E(142)},function(p,S,E){"use strict";S.__esModule=!0;var A=U(E(50)),k=U(E(65)),M=typeof k.default=="function"&&typeof A.default=="symbol"?function(V){return typeof V}:function(V){return V&&typeof k.default=="function"&&V.constructor===k.default&&V!==k.default.prototype?"symbol":typeof V};function U(V){return V&&V.__esModule?V:{default:V}}S.default=typeof k.default=="function"&&M(A.default)==="symbol"?function(V){return V===void 0?"undefined":M(V)}:function(V){return V&&typeof k.default=="function"&&V.constructor===k.default&&V!==k.default.prototype?"symbol":V===void 0?"undefined":M(V)}},function(p,S,E){p.exports={default:E(51),__esModule:!0}},function(p,S,E){E(20),E(29),p.exports=E(30).f("iterator")},function(p,S,E){var A=E(21),k=E(22);p.exports=function(M){return function(U,V){var $,W,Y=String(k(U)),ee=A(V),ne=Y.length;return ee<0||ee>=ne?M?"":void 0:($=Y.charCodeAt(ee))<55296||$>56319||ee+1===ne||(W=Y.charCodeAt(ee+1))<56320||W>57343?M?Y.charAt(ee):$:M?Y.slice(ee,ee+2):W-56320+($-55296<<10)+65536}}},function(p,S,E){var A=E(54);p.exports=function(k,M,U){if(A(k),M===void 0)return k;switch(U){case 1:return function(V){return k.call(M,V)};case 2:return function(V,$){return k.call(M,V,$)};case 3:return function(V,$,W){return k.call(M,V,$,W)}}return function(){return k.apply(M,arguments)}}},function(p,S){p.exports=function(E){if(typeof E!="function")throw TypeError(E+" is not a function!");return E}},function(p,S,E){"use strict";var A=E(38),k=E(16),M=E(28),U={};E(6)(U,E(2)("iterator"),function(){return this}),p.exports=function(V,$,W){V.prototype=A(U,{next:k(1,W)}),M(V,$+" Iterator")}},function(p,S,E){var A=E(7),k=E(10),M=E(13);p.exports=E(4)?Object.defineProperties:function(U,V){k(U);for(var $,W=M(V),Y=W.length,ee=0;Y>ee;)A.f(U,$=W[ee++],V[$]);return U}},function(p,S,E){var A=E(9),k=E(58),M=E(59);p.exports=function(U){return function(V,$,W){var Y,ee=A(V),ne=k(ee.length),ie=M(W,ne);if(U&&$!=$){for(;ne>ie;)if((Y=ee[ie++])!=Y)return!0}else for(;ne>ie;ie++)if((U||ie in ee)&&ee[ie]===$)return U||ie||0;return!U&&-1}}},function(p,S,E){var A=E(21),k=Math.min;p.exports=function(M){return M>0?k(A(M),9007199254740991):0}},function(p,S,E){var A=E(21),k=Math.max,M=Math.min;p.exports=function(U,V){return(U=A(U))<0?k(U+V,0):M(U,V)}},function(p,S,E){var A=E(3).document;p.exports=A&&A.documentElement},function(p,S,E){var A=E(5),k=E(18),M=E(25)("IE_PROTO"),U=Object.prototype;p.exports=Object.getPrototypeOf||function(V){return V=k(V),A(V,M)?V[M]:typeof V.constructor=="function"&&V instanceof V.constructor?V.constructor.prototype:V instanceof Object?U:null}},function(p,S,E){"use strict";var A=E(63),k=E(64),M=E(12),U=E(9);p.exports=E(34)(Array,"Array",function(V,$){this._t=U(V),this._i=0,this._k=$},function(){var V=this._t,$=this._k,W=this._i++;return!V||W>=V.length?(this._t=void 0,k(1)):k(0,$=="keys"?W:$=="values"?V[W]:[W,V[W]])},"values"),M.Arguments=M.Array,A("keys"),A("values"),A("entries")},function(p,S){p.exports=function(){}},function(p,S){p.exports=function(E,A){return{value:A,done:!!E}}},function(p,S,E){p.exports={default:E(66),__esModule:!0}},function(p,S,E){E(67),E(73),E(74),E(75),p.exports=E(1).Symbol},function(p,S,E){"use strict";var A=E(3),k=E(5),M=E(4),U=E(15),V=E(37),$=E(68).KEY,W=E(8),Y=E(26),ee=E(28),ne=E(17),ie=E(2),re=E(30),J=E(31),ce=E(69),G=E(70),Z=E(10),fe=E(11),se=E(18),ve=E(9),ae=E(23),j=E(16),de=E(38),ke=E(71),he=E(72),Oe=E(32),We=E(7),D=E(13),je=he.f,pt=We.f,nt=ke.f,Lt=A.Symbol,Gt=A.JSON,$e=Gt&&Gt.stringify,jt=ie("_hidden"),Be=ie("toPrimitive"),pe={}.propertyIsEnumerable,un=Y("symbol-registry"),ln=Y("symbols"),Fn=Y("op-symbols"),Ft=Object.prototype,Pn=typeof Lt=="function"&&!!Oe.f,lr=A.QObject,hn=!lr||!lr.prototype||!lr.prototype.findChild,On=M&&W(function(){return de(pt({},"a",{get:function(){return pt(this,"a",{value:7}).a}})).a!=7})?function(Bt,me,ue){var Re=je(Ft,me);Re&&delete Ft[me],pt(Bt,me,ue),Re&&Bt!==Ft&&pt(Ft,me,Re)}:pt,jn=function(me){var ue=ln[me]=de(Lt.prototype);return ue._k=me,ue},Dn=Pn&&typeof Lt.iterator=="symbol"?function(Bt){return typeof Bt=="symbol"}:function(Bt){return Bt instanceof Lt},ft=function Bt(me,ue,Re){return me===Ft&&Bt(Fn,ue,Re),Z(me),ue=ae(ue,!0),Z(Re),k(ln,ue)?(Re.enumerable?(k(me,jt)&&me[jt][ue]&&(me[jt][ue]=!1),Re=de(Re,{enumerable:j(0,!1)})):(k(me,jt)||pt(me,jt,j(1,{})),me[jt][ue]=!0),On(me,ue,Re)):pt(me,ue,Re)},Ut=function(me,ue){Z(me);for(var Re,Rt=ce(ue=ve(ue)),Kt=0,Bn=Rt.length;Bn>Kt;)ft(me,Re=Rt[Kt++],ue[Re]);return me},ct=function(me){var ue=pe.call(this,me=ae(me,!0));return!(this===Ft&&k(ln,me)&&!k(Fn,me))&&(!(ue||!k(this,me)||!k(ln,me)||k(this,jt)&&this[jt][me])||ue)},Ct=function(me,ue){if(me=ve(me),ue=ae(ue,!0),me!==Ft||!k(ln,ue)||k(Fn,ue)){var Re=je(me,ue);return!Re||!k(ln,ue)||k(me,jt)&&me[jt][ue]||(Re.enumerable=!0),Re}},kt=function(me){for(var ue,Re=nt(ve(me)),Rt=[],Kt=0;Re.length>Kt;)k(ln,ue=Re[Kt++])||ue==jt||ue==$||Rt.push(ue);return Rt},yt=function(me){for(var ue,Re=me===Ft,Rt=nt(Re?Fn:ve(me)),Kt=[],Bn=0;Rt.length>Bn;)!k(ln,ue=Rt[Bn++])||Re&&!k(Ft,ue)||Kt.push(ln[ue]);return Kt};Pn||(V((Lt=function(){if(this instanceof Lt)throw TypeError("Symbol is not a constructor!");var me=ne(arguments.length>0?arguments[0]:void 0),ue=function Re(Rt){this===Ft&&Re.call(Fn,Rt),k(this,jt)&&k(this[jt],me)&&(this[jt][me]=!1),On(this,me,j(1,Rt))};return M&&hn&&On(Ft,me,{configurable:!0,set:ue}),jn(me)}).prototype,"toString",function(){return this._k}),he.f=Ct,We.f=ft,E(41).f=ke.f=kt,E(19).f=ct,Oe.f=yt,M&&!E(14)&&V(Ft,"propertyIsEnumerable",ct,!0),re.f=function(Bt){return jn(ie(Bt))}),U(U.G+U.W+U.F*!Pn,{Symbol:Lt});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),I=0;tt.length>I;)ie(tt[I++]);for(var Mn=D(ie.store),dt=0;Mn.length>dt;)J(Mn[dt++]);U(U.S+U.F*!Pn,"Symbol",{for:function(me){return k(un,me+="")?un[me]:un[me]=Lt(me)},keyFor:function(me){if(!Dn(me))throw TypeError(me+" is not a symbol!");for(var ue in un)if(un[ue]===me)return ue},useSetter:function(){hn=!0},useSimple:function(){hn=!1}}),U(U.S+U.F*!Pn,"Object",{create:function(me,ue){return ue===void 0?de(me):Ut(de(me),ue)},defineProperty:ft,defineProperties:Ut,getOwnPropertyDescriptor:Ct,getOwnPropertyNames:kt,getOwnPropertySymbols:yt});var vt=W(function(){Oe.f(1)});U(U.S+U.F*vt,"Object",{getOwnPropertySymbols:function(me){return Oe.f(se(me))}}),Gt&&U(U.S+U.F*(!Pn||W(function(){var Bt=Lt();return $e([Bt])!="[null]"||$e({a:Bt})!="{}"||$e(Object(Bt))!="{}"})),"JSON",{stringify:function(me){for(var ue,Re,Rt=[me],Kt=1;arguments.length>Kt;)Rt.push(arguments[Kt++]);if(Re=ue=Rt[1],(fe(ue)||me!==void 0)&&!Dn(me))return G(ue)||(ue=function(Nr,Rn){if(typeof Re=="function"&&(Rn=Re.call(this,Nr,Rn)),!Dn(Rn))return Rn}),Rt[1]=ue,$e.apply(Gt,Rt)}}),Lt.prototype[Be]||E(6)(Lt.prototype,Be,Lt.prototype.valueOf),ee(Lt,"Symbol"),ee(Math,"Math",!0),ee(A.JSON,"JSON",!0)},function(p,S,E){var A=E(17)("meta"),k=E(11),M=E(5),U=E(7).f,V=0,$=Object.isExtensible||function(){return!0},W=!E(8)(function(){return $(Object.preventExtensions({}))}),Y=function(ie){U(ie,A,{value:{i:"O"+ ++V,w:{}}})},ee=p.exports={KEY:A,NEED:!1,fastKey:function(ie,re){if(!k(ie))return typeof ie=="symbol"?ie:(typeof ie=="string"?"S":"P")+ie;if(!M(ie,A)){if(!$(ie))return"F";if(!re)return"E";Y(ie)}return ie[A].i},getWeak:function(ie,re){if(!M(ie,A)){if(!$(ie))return!0;if(!re)return!1;Y(ie)}return ie[A].w},onFreeze:function(ie){return W&&ee.NEED&&$(ie)&&!M(ie,A)&&Y(ie),ie}}},function(p,S,E){var A=E(13),k=E(32),M=E(19);p.exports=function(U){var V=A(U),$=k.f;if($)for(var W,Y=$(U),ee=M.f,ne=0;Y.length>ne;)ee.call(U,W=Y[ne++])&&V.push(W);return V}},function(p,S,E){var A=E(24);p.exports=Array.isArray||function(k){return A(k)=="Array"}},function(p,S,E){var A=E(9),k=E(41).f,M={}.toString,U=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];p.exports.f=function(V){return U&&M.call(V)=="[object Window]"?function($){try{return k($)}catch(W){return U.slice()}}(V):k(A(V))}},function(p,S,E){var A=E(19),k=E(16),M=E(9),U=E(23),V=E(5),$=E(35),W=Object.getOwnPropertyDescriptor;S.f=E(4)?W:function(Y,ee){if(Y=M(Y),ee=U(ee,!0),$)try{return W(Y,ee)}catch(ne){}if(V(Y,ee))return k(!A.f.call(Y,ee),Y[ee])}},function(p,S){},function(p,S,E){E(31)("asyncIterator")},function(p,S,E){E(31)("observable")},function(p,S,E){"use strict";S.__esModule=!0;var A,k=E(77),M=(A=k)&&A.__esModule?A:{default:A};S.default=M.default||function(U){for(var V=1;V<arguments.length;V++){var $=arguments[V];for(var W in $)Object.prototype.hasOwnProperty.call($,W)&&(U[W]=$[W])}return U}},function(p,S,E){p.exports={default:E(78),__esModule:!0}},function(p,S,E){E(79),p.exports=E(1).Object.assign},function(p,S,E){var A=E(15);A(A.S+A.F,"Object",{assign:E(80)})},function(p,S,E){"use strict";var A=E(4),k=E(13),M=E(32),U=E(19),V=E(18),$=E(40),W=Object.assign;p.exports=!W||E(8)(function(){var Y={},ee={},ne=Symbol(),ie="abcdefghijklmnopqrst";return Y[ne]=7,ie.split("").forEach(function(re){ee[re]=re}),W({},Y)[ne]!=7||Object.keys(W({},ee)).join("")!=ie})?function(Y,ee){for(var ne=V(Y),ie=arguments.length,re=1,J=M.f,ce=U.f;ie>re;)for(var G,Z=$(arguments[re++]),fe=J?k(Z).concat(J(Z)):k(Z),se=fe.length,ve=0;se>ve;)G=fe[ve++],A&&!ce.call(Z,G)||(ne[G]=Z[G]);return ne}:W},function(p,S,E){"use strict";S.__esModule=!0;var A=M(E(82)),k=M(E(85));function M(U){return U&&U.__esModule?U:{default:U}}S.default=function(U,V){if(Array.isArray(U))return U;if((0,A.default)(Object(U)))return function($,W){var Y=[],ee=!0,ne=!1,ie=void 0;try{for(var re,J=(0,k.default)($);!(ee=(re=J.next()).done)&&(Y.push(re.value),!W||Y.length!==W);ee=!0);}catch(ce){ne=!0,ie=ce}finally{try{!ee&&J.return&&J.return()}finally{if(ne)throw ie}}return Y}(U,V);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(p,S,E){p.exports={default:E(83),__esModule:!0}},function(p,S,E){E(29),E(20),p.exports=E(84)},function(p,S,E){var A=E(42),k=E(2)("iterator"),M=E(12);p.exports=E(1).isIterable=function(U){var V=Object(U);return V[k]!==void 0||"@@iterator"in V||M.hasOwnProperty(A(V))}},function(p,S,E){p.exports={default:E(86),__esModule:!0}},function(p,S,E){E(29),E(20),p.exports=E(87)},function(p,S,E){var A=E(10),k=E(88);p.exports=E(1).getIterator=function(M){var U=k(M);if(typeof U!="function")throw TypeError(M+" is not iterable!");return A(U.call(M))}},function(p,S,E){var A=E(42),k=E(2)("iterator"),M=E(12);p.exports=E(1).getIteratorMethod=function(U){if(U!=null)return U[k]||U["@@iterator"]||M[A(U)]}},function(p,S,E){p.exports={default:E(90),__esModule:!0}},function(p,S,E){E(91),p.exports=E(1).Object.keys},function(p,S,E){var A=E(18),k=E(13);E(92)("keys",function(){return function(M){return k(A(M))}})},function(p,S,E){var A=E(15),k=E(1),M=E(8);p.exports=function(U,V){var $=(k.Object||{})[U]||Object[U],W={};W[U]=V($),A(A.S+A.F*M(function(){$(1)}),"Object",W)}},function(p,S,E){(function(A){var k=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],M=/^\s+|\s+$/g,U=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,V=/\{\n\/\* \[wrapped with (.+)\] \*/,$=/,? & /,W=/^[-+]0x[0-9a-f]+$/i,Y=/^0b[01]+$/i,ee=/^\[object .+?Constructor\]$/,ne=/^0o[0-7]+$/i,ie=/^(?:0|[1-9]\d*)$/,re=parseInt,J=typeof A=="object"&&A&&A.Object===Object&&A,ce=typeof self=="object"&&self&&self.Object===Object&&self,G=J||ce||Function("return this")();function Z(dt,vt,Bt){switch(Bt.length){case 0:return dt.call(vt);case 1:return dt.call(vt,Bt[0]);case 2:return dt.call(vt,Bt[0],Bt[1]);case 3:return dt.call(vt,Bt[0],Bt[1],Bt[2])}return dt.apply(vt,Bt)}function fe(dt,vt){return!!(dt?dt.length:0)&&function(Bt,me,ue){if(me!=me)return function(Kt,Bn,Nr,Rn){for(var Cr=Kt.length,tr=Nr+(Rn?1:-1);Rn?tr--:++tr<Cr;)if(Bn(Kt[tr],tr,Kt))return tr;return-1}(Bt,se,ue);for(var Re=ue-1,Rt=Bt.length;++Re<Rt;)if(Bt[Re]===me)return Re;return-1}(dt,vt,0)>-1}function se(dt){return dt!=dt}function ve(dt,vt){for(var Bt=dt.length,me=0;Bt--;)dt[Bt]===vt&&me++;return me}function ae(dt,vt){for(var Bt=-1,me=dt.length,ue=0,Re=[];++Bt<me;){var Rt=dt[Bt];Rt!==vt&&Rt!=="__lodash_placeholder__"||(dt[Bt]="__lodash_placeholder__",Re[ue++]=Bt)}return Re}var j,de,ke,he=Function.prototype,Oe=Object.prototype,We=G["__core-js_shared__"],D=(j=/[^.]+$/.exec(We&&We.keys&&We.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",je=he.toString,pt=Oe.hasOwnProperty,nt=Oe.toString,Lt=RegExp("^"+je.call(pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gt=Object.create,$e=Math.max,jt=Math.min,Be=(de=jn(Object,"defineProperty"),(ke=jn.name)&&ke.length>2?de:void 0);function pe(dt){return tt(dt)?Gt(dt):{}}function un(dt){return!(!tt(dt)||function(vt){return!!D&&D in vt}(dt))&&(function(vt){var Bt=tt(vt)?nt.call(vt):"";return Bt=="[object Function]"||Bt=="[object GeneratorFunction]"}(dt)||function(vt){var Bt=!1;if(vt!=null&&typeof vt.toString!="function")try{Bt=!!(vt+"")}catch(me){}return Bt}(dt)?Lt:ee).test(function(vt){if(vt!=null){try{return je.call(vt)}catch(Bt){}try{return vt+""}catch(Bt){}}return""}(dt))}function ln(dt,vt,Bt,me){for(var ue=-1,Re=dt.length,Rt=Bt.length,Kt=-1,Bn=vt.length,Nr=$e(Re-Rt,0),Rn=Array(Bn+Nr),Cr=!me;++Kt<Bn;)Rn[Kt]=vt[Kt];for(;++ue<Rt;)(Cr||ue<Re)&&(Rn[Bt[ue]]=dt[ue]);for(;Nr--;)Rn[Kt++]=dt[ue++];return Rn}function Fn(dt,vt,Bt,me){for(var ue=-1,Re=dt.length,Rt=-1,Kt=Bt.length,Bn=-1,Nr=vt.length,Rn=$e(Re-Kt,0),Cr=Array(Rn+Nr),tr=!me;++ue<Rn;)Cr[ue]=dt[ue];for(var jr=ue;++Bn<Nr;)Cr[jr+Bn]=vt[Bn];for(;++Rt<Kt;)(tr||ue<Re)&&(Cr[jr+Bt[Rt]]=dt[ue++]);return Cr}function Ft(dt){return function(){var vt=arguments;switch(vt.length){case 0:return new dt;case 1:return new dt(vt[0]);case 2:return new dt(vt[0],vt[1]);case 3:return new dt(vt[0],vt[1],vt[2]);case 4:return new dt(vt[0],vt[1],vt[2],vt[3]);case 5:return new dt(vt[0],vt[1],vt[2],vt[3],vt[4]);case 6:return new dt(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5]);case 7:return new dt(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5],vt[6])}var Bt=pe(dt.prototype),me=dt.apply(Bt,vt);return tt(me)?me:Bt}}function Pn(dt,vt,Bt,me,ue,Re,Rt,Kt,Bn,Nr){var Rn=128&vt,Cr=1&vt,tr=2&vt,jr=24&vt,zr=512&vt,Ua=tr?void 0:Ft(dt);return function oa(){for(var Za=arguments.length,ba=Array(Za),Pa=Za;Pa--;)ba[Pa]=arguments[Pa];if(jr)var ri=On(oa),li=ve(ba,ri);if(me&&(ba=ln(ba,me,ue,jr)),Re&&(ba=Fn(ba,Re,Rt,jr)),Za-=li,jr&&Za<Nr){var ka=ae(ba,ri);return lr(dt,vt,Pn,oa.placeholder,Bt,ba,ka,Kt,Bn,Nr-Za)}var ai=Cr?Bt:this,Qa=tr?ai[dt]:dt;return Za=ba.length,Kt?ba=ct(ba,Kt):zr&&Za>1&&ba.reverse(),Rn&&Bn<Za&&(ba.length=Bn),this&&this!==G&&this instanceof oa&&(Qa=Ua||Ft(Qa)),Qa.apply(ai,ba)}}function lr(dt,vt,Bt,me,ue,Re,Rt,Kt,Bn,Nr){var Rn=8&vt;vt|=Rn?32:64,4&(vt&=~(Rn?64:32))||(vt&=-4);var Cr=Bt(dt,vt,ue,Rn?Re:void 0,Rn?Rt:void 0,Rn?void 0:Re,Rn?void 0:Rt,Kt,Bn,Nr);return Cr.placeholder=me,Ct(Cr,dt,vt)}function hn(dt,vt,Bt,me,ue,Re,Rt,Kt){var Bn=2&vt;if(!Bn&&typeof dt!="function")throw new TypeError("Expected a function");var Nr=me?me.length:0;if(Nr||(vt&=-97,me=ue=void 0),Rt=Rt===void 0?Rt:$e(Mn(Rt),0),Kt=Kt===void 0?Kt:Mn(Kt),Nr-=ue?ue.length:0,64&vt){var Rn=me,Cr=ue;me=ue=void 0}var tr=[dt,vt,Bt,me,ue,Rn,Cr,Re,Rt,Kt];if(dt=tr[0],vt=tr[1],Bt=tr[2],me=tr[3],ue=tr[4],!(Kt=tr[9]=tr[9]==null?Bn?0:dt.length:$e(tr[9]-Nr,0))&&24&vt&&(vt&=-25),vt&&vt!=1)jr=vt==8||vt==16?function(zr,Ua,oa){var Za=Ft(zr);return function ba(){for(var Pa=arguments.length,ri=Array(Pa),li=Pa,ka=On(ba);li--;)ri[li]=arguments[li];var ai=Pa<3&&ri[0]!==ka&&ri[Pa-1]!==ka?[]:ae(ri,ka);if((Pa-=ai.length)<oa)return lr(zr,Ua,Pn,ba.placeholder,void 0,ri,ai,void 0,void 0,oa-Pa);var Qa=this&&this!==G&&this instanceof ba?Za:zr;return Z(Qa,this,ri)}}(dt,vt,Kt):vt!=32&&vt!=33||ue.length?Pn.apply(void 0,tr):function(zr,Ua,oa,Za){var ba=1&Ua,Pa=Ft(zr);return function ri(){for(var li=-1,ka=arguments.length,ai=-1,Qa=Za.length,aa=Array(Qa+ka),Gi=this&&this!==G&&this instanceof ri?Pa:zr;++ai<Qa;)aa[ai]=Za[ai];for(;ka--;)aa[ai++]=arguments[++li];return Z(Gi,ba?oa:this,aa)}}(dt,vt,Bt,me);else var jr=function(zr,Ua,oa){var Za=1&Ua,ba=Ft(zr);return function Pa(){var ri=this&&this!==G&&this instanceof Pa?ba:zr;return ri.apply(Za?oa:this,arguments)}}(dt,vt,Bt);return Ct(jr,dt,vt)}function On(dt){return dt.placeholder}function jn(dt,vt){var Bt=function(me,ue){return me==null?void 0:me[ue]}(dt,vt);return un(Bt)?Bt:void 0}function Dn(dt){var vt=dt.match(V);return vt?vt[1].split($):[]}function ft(dt,vt){var Bt=vt.length,me=Bt-1;return vt[me]=(Bt>1?"& ":"")+vt[me],vt=vt.join(Bt>2?", ":" "),dt.replace(U,`{
/* [wrapped with `+vt+`] */
`)}function Ut(dt,vt){return!!(vt=vt==null?9007199254740991:vt)&&(typeof dt=="number"||ie.test(dt))&&dt>-1&&dt%1==0&&dt<vt}function ct(dt,vt){for(var Bt=dt.length,me=jt(vt.length,Bt),ue=function(Rt,Kt){var Bn=-1,Nr=Rt.length;for(Kt||(Kt=Array(Nr));++Bn<Nr;)Kt[Bn]=Rt[Bn];return Kt}(dt);me--;){var Re=vt[me];dt[me]=Ut(Re,Bt)?ue[Re]:void 0}return dt}var Ct=Be?function(dt,vt,Bt){var me,ue=vt+"";return Be(dt,"toString",{configurable:!0,enumerable:!1,value:(me=ft(ue,kt(Dn(ue),Bt)),function(){return me})})}:function(dt){return dt};function kt(dt,vt){return function(Bt,me){for(var ue=-1,Re=Bt?Bt.length:0;++ue<Re&&me(Bt[ue],ue,Bt)!==!1;);}(k,function(Bt){var me="_."+Bt[0];vt&Bt[1]&&!fe(dt,me)&&dt.push(me)}),dt.sort()}function yt(dt,vt,Bt){var me=hn(dt,8,void 0,void 0,void 0,void 0,void 0,vt=Bt?void 0:vt);return me.placeholder=yt.placeholder,me}function tt(dt){var vt=typeof dt;return!!dt&&(vt=="object"||vt=="function")}function I(dt){return dt?(dt=function(vt){if(typeof vt=="number")return vt;if(function(ue){return typeof ue=="symbol"||function(Re){return!!Re&&typeof Re=="object"}(ue)&&nt.call(ue)=="[object Symbol]"}(vt))return NaN;if(tt(vt)){var Bt=typeof vt.valueOf=="function"?vt.valueOf():vt;vt=tt(Bt)?Bt+"":Bt}if(typeof vt!="string")return vt===0?vt:+vt;vt=vt.replace(M,"");var me=Y.test(vt);return me||ne.test(vt)?re(vt.slice(2),me?2:8):W.test(vt)?NaN:+vt}(dt))===1/0||dt===-1/0?17976931348623157e292*(dt<0?-1:1):dt==dt?dt:0:dt===0?dt:0}function Mn(dt){var vt=I(dt),Bt=vt%1;return vt==vt?Bt?vt-Bt:vt:0}yt.placeholder={},p.exports=yt}).call(this,E(43))},function(p,S,E){"use strict";function A(Fn){return Fn&&Fn.__esModule?Fn.default:Fn}S.__esModule=!0;var k=E(95);S.threezerotwofour=A(k);var M=E(96);S.apathy=A(M);var U=E(97);S.ashes=A(U);var V=E(98);S.atelierDune=A(V);var $=E(99);S.atelierForest=A($);var W=E(100);S.atelierHeath=A(W);var Y=E(101);S.atelierLakeside=A(Y);var ee=E(102);S.atelierSeaside=A(ee);var ne=E(103);S.bespin=A(ne);var ie=E(104);S.brewer=A(ie);var re=E(105);S.bright=A(re);var J=E(106);S.chalk=A(J);var ce=E(107);S.codeschool=A(ce);var G=E(108);S.colors=A(G);var Z=E(109);S.default=A(Z);var fe=E(110);S.eighties=A(fe);var se=E(111);S.embers=A(se);var ve=E(112);S.flat=A(ve);var ae=E(113);S.google=A(ae);var j=E(114);S.grayscale=A(j);var de=E(115);S.greenscreen=A(de);var ke=E(116);S.harmonic=A(ke);var he=E(117);S.hopscotch=A(he);var Oe=E(118);S.isotope=A(Oe);var We=E(119);S.marrakesh=A(We);var D=E(120);S.mocha=A(D);var je=E(121);S.monokai=A(je);var pt=E(122);S.ocean=A(pt);var nt=E(123);S.paraiso=A(nt);var Lt=E(124);S.pop=A(Lt);var Gt=E(125);S.railscasts=A(Gt);var $e=E(126);S.shapeshifter=A($e);var jt=E(127);S.solarized=A(jt);var Be=E(128);S.summerfruit=A(Be);var pe=E(129);S.tomorrow=A(pe);var un=E(130);S.tube=A(un);var ln=E(131);S.twilight=A(ln)},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"brewer",author:"timoth\xE9e poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},p.exports=S.default},function(p,S,E){"use strict";S.__esModule=!0,S.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},p.exports=S.default},function(p,S,E){var A=E(33);function k(M){var U=Math.round(A(M,0,255)).toString(16);return U.length==1?"0"+U:U}p.exports=function(M){var U=M.length===4?k(255*M[3]):"";return"#"+k(M[0])+k(M[1])+k(M[2])+U}},function(p,S,E){var A=E(134),k=E(135),M=E(136),U=E(137),V={"#":k,hsl:function(Y){var ee=A(Y),ne=U(ee);return ee.length===4&&ne.push(ee[3]),ne},rgb:M};function $(W){for(var Y in V)if(W.indexOf(Y)===0)return V[Y](W)}$.rgb=M,$.hsl=A,$.hex=k,p.exports=$},function(p,S,E){var A=E(44),k=E(33);function M(U,V){switch(U=parseFloat(U),V){case 0:return k(U,0,360);case 1:case 2:return k(U,0,100);case 3:return k(U,0,1)}}p.exports=function(U){return A(U).map(M)}},function(p,S){p.exports=function(E){E.length!==4&&E.length!==5||(E=function(M){for(var U="#",V=1;V<M.length;V++){var $=M.charAt(V);U+=$+$}return U}(E));var A=[parseInt(E.substring(1,3),16),parseInt(E.substring(3,5),16),parseInt(E.substring(5,7),16)];if(E.length===9){var k=parseFloat((parseInt(E.substring(7,9),16)/255).toFixed(2));A.push(k)}return A}},function(p,S,E){var A=E(44),k=E(33);function M(U,V){return V<3?U.indexOf("%")!=-1?Math.round(255*k(parseInt(U,10),0,100)/100):k(parseInt(U,10),0,255):k(parseFloat(U),0,1)}p.exports=function(U){return A(U).map(M)}},function(p,S){p.exports=function(E){var A,k,M,U,V,$=E[0]/360,W=E[1]/100,Y=E[2]/100;if(W==0)return[V=255*Y,V,V];A=2*Y-(k=Y<.5?Y*(1+W):Y+W-Y*W),U=[0,0,0];for(var ee=0;ee<3;ee++)(M=$+1/3*-(ee-1))<0&&M++,M>1&&M--,V=6*M<1?A+6*(k-A)*M:2*M<1?k:3*M<2?A+(k-A)*(2/3-M)*6:A,U[ee]=255*V;return U}},function(p,S,E){(function(A){var k=typeof A=="object"&&A&&A.Object===Object&&A,M=typeof self=="object"&&self&&self.Object===Object&&self,U=k||M||Function("return this")();function V(ae,j,de){switch(de.length){case 0:return ae.call(j);case 1:return ae.call(j,de[0]);case 2:return ae.call(j,de[0],de[1]);case 3:return ae.call(j,de[0],de[1],de[2])}return ae.apply(j,de)}function $(ae,j){for(var de=-1,ke=j.length,he=ae.length;++de<ke;)ae[he+de]=j[de];return ae}var W=Object.prototype,Y=W.hasOwnProperty,ee=W.toString,ne=U.Symbol,ie=W.propertyIsEnumerable,re=ne?ne.isConcatSpreadable:void 0,J=Math.max;function ce(ae){return G(ae)||function(j){return function(de){return function(ke){return!!ke&&typeof ke=="object"}(de)&&function(ke){return ke!=null&&function(he){return typeof he=="number"&&he>-1&&he%1==0&&he<=9007199254740991}(ke.length)&&!function(he){var Oe=function(We){var D=typeof We;return!!We&&(D=="object"||D=="function")}(he)?ee.call(he):"";return Oe=="[object Function]"||Oe=="[object GeneratorFunction]"}(ke)}(de)}(j)&&Y.call(j,"callee")&&(!ie.call(j,"callee")||ee.call(j)=="[object Arguments]")}(ae)||!!(re&&ae&&ae[re])}var G=Array.isArray,Z,fe,se,ve=(fe=function(j){var de=(j=function he(Oe,We,D,je,pt){var nt=-1,Lt=Oe.length;for(D||(D=ce),pt||(pt=[]);++nt<Lt;){var Gt=Oe[nt];We>0&&D(Gt)?We>1?he(Gt,We-1,D,je,pt):$(pt,Gt):je||(pt[pt.length]=Gt)}return pt}(j,1)).length,ke=de;for(Z&&j.reverse();ke--;)if(typeof j[ke]!="function")throw new TypeError("Expected a function");return function(){for(var he=0,Oe=de?j[he].apply(this,arguments):arguments[0];++he<de;)Oe=j[he].call(this,Oe);return Oe}},se=J(se===void 0?fe.length-1:se,0),function(){for(var ae=arguments,j=-1,de=J(ae.length-se,0),ke=Array(de);++j<de;)ke[j]=ae[se+j];j=-1;for(var he=Array(se+1);++j<se;)he[j]=ae[j];return he[se]=ke,V(fe,this,he)});p.exports=ve}).call(this,E(43))},function(p,S,E){"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.yuv2rgb=function(A){var k,M,U,V=A[0],$=A[1],W=A[2];return k=1*V+0*$+1.13983*W,M=1*V+-.39465*$+-.5806*W,U=1*V+2.02311*$+0*W,k=Math.min(Math.max(0,k),1),M=Math.min(Math.max(0,M),1),U=Math.min(Math.max(0,U),1),[255*k,255*M,255*U]},S.rgb2yuv=function(A){var k=A[0]/255,M=A[1]/255,U=A[2]/255;return[.299*k+.587*M+.114*U,-.14713*k+-.28886*M+.436*U,.615*k+-.51499*M+-.10001*U]}},function(p,S,E){"use strict";function A(U,V,$){return V in U?Object.defineProperty(U,V,{value:$,enumerable:!0,configurable:!0,writable:!0}):U[V]=$,U}var k=E(141),M=function(){function U(){A(this,"_callbacks",void 0),A(this,"_isDispatching",void 0),A(this,"_isHandled",void 0),A(this,"_isPending",void 0),A(this,"_lastID",void 0),A(this,"_pendingPayload",void 0),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}var V=U.prototype;return V.register=function($){var W="ID_"+this._lastID++;return this._callbacks[W]=$,W},V.unregister=function($){this._callbacks[$]||k(!1),delete this._callbacks[$]},V.waitFor=function($){this._isDispatching||k(!1);for(var W=0;W<$.length;W++){var Y=$[W];this._isPending[Y]?this._isHandled[Y]||k(!1):(this._callbacks[Y]||k(!1),this._invokeCallback(Y))}},V.dispatch=function($){this._isDispatching&&k(!1),this._startDispatching($);try{for(var W in this._callbacks)this._isPending[W]||this._invokeCallback(W)}finally{this._stopDispatching()}},V.isDispatching=function(){return this._isDispatching},V._invokeCallback=function($){this._isPending[$]=!0,this._callbacks[$](this._pendingPayload),this._isHandled[$]=!0},V._startDispatching=function($){for(var W in this._callbacks)this._isPending[W]=!1,this._isHandled[W]=!1;this._pendingPayload=$,this._isDispatching=!0},V._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},U}();p.exports=M},function(p,S,E){"use strict";var A=function(M){};p.exports=function(k,M){for(var U=arguments.length,V=new Array(U>2?U-2:0),$=2;$<U;$++)V[$-2]=arguments[$];if(A(M),!k){var W;if(M===void 0)W=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var Y=0;(W=new Error(M.replace(/%s/g,function(){return String(V[Y++])}))).name="Invariant Violation"}throw W.framesToPop=1,W}}},function(p,S,E){"use strict";function A(ot,It,Ne){return It in ot?Object.defineProperty(ot,It,{value:Ne,enumerable:!0,configurable:!0,writable:!0}):ot[It]=Ne,ot}function k(ot,It){var Ne=Object.keys(ot);if(Object.getOwnPropertySymbols){var St=Object.getOwnPropertySymbols(ot);It&&(St=St.filter(function(Ve){return Object.getOwnPropertyDescriptor(ot,Ve).enumerable})),Ne.push.apply(Ne,St)}return Ne}function M(ot){for(var It=1;It<arguments.length;It++){var Ne=arguments[It]!=null?arguments[It]:{};It%2?k(Object(Ne),!0).forEach(function(St){A(ot,St,Ne[St])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors(Ne)):k(Object(Ne)).forEach(function(St){Object.defineProperty(ot,St,Object.getOwnPropertyDescriptor(Ne,St))})}return ot}function U(ot,It){if(!(ot instanceof It))throw new TypeError("Cannot call a class as a function")}function V(ot,It){for(var Ne=0;Ne<It.length;Ne++){var St=It[Ne];St.enumerable=St.enumerable||!1,St.configurable=!0,"value"in St&&(St.writable=!0),Object.defineProperty(ot,St.key,St)}}function $(ot,It,Ne){return It&&V(ot.prototype,It),Ne&&V(ot,Ne),ot}function W(ot,It){return(W=Object.setPrototypeOf||function(Ne,St){return Ne.__proto__=St,Ne})(ot,It)}function Y(ot,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");ot.prototype=Object.create(It&&It.prototype,{constructor:{value:ot,writable:!0,configurable:!0}}),It&&W(ot,It)}function ee(ot){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(It){return It.__proto__||Object.getPrototypeOf(It)})(ot)}function ne(ot){return(ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(It){return typeof It}:function(It){return It&&typeof Symbol=="function"&&It.constructor===Symbol&&It!==Symbol.prototype?"symbol":typeof It})(ot)}function ie(ot){if(ot===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ot}function re(ot,It){return!It||ne(It)!=="object"&&typeof It!="function"?ie(ot):It}function J(ot){var It=function(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(Ne){return!1}}();return function(){var Ne,St=ee(ot);if(It){var Ve=ee(this).constructor;Ne=Reflect.construct(St,arguments,Ve)}else Ne=St.apply(this,arguments);return re(this,Ne)}}E.r(S);var ce=E(0),G=E.n(ce);function Z(){var ot=this.constructor.getDerivedStateFromProps(this.props,this.state);ot!=null&&this.setState(ot)}function fe(ot){this.setState(function(It){var Ne=this.constructor.getDerivedStateFromProps(ot,It);return Ne!=null?Ne:null}.bind(this))}function se(ot,It){try{var Ne=this.props,St=this.state;this.props=ot,this.state=It,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(Ne,St)}finally{this.props=Ne,this.state=St}}function ve(ot){var It=ot.prototype;if(!It||!It.isReactComponent)throw new Error("Can only polyfill class components");if(typeof ot.getDerivedStateFromProps!="function"&&typeof It.getSnapshotBeforeUpdate!="function")return ot;var Ne=null,St=null,Ve=null;if(typeof It.componentWillMount=="function"?Ne="componentWillMount":typeof It.UNSAFE_componentWillMount=="function"&&(Ne="UNSAFE_componentWillMount"),typeof It.componentWillReceiveProps=="function"?St="componentWillReceiveProps":typeof It.UNSAFE_componentWillReceiveProps=="function"&&(St="UNSAFE_componentWillReceiveProps"),typeof It.componentWillUpdate=="function"?Ve="componentWillUpdate":typeof It.UNSAFE_componentWillUpdate=="function"&&(Ve="UNSAFE_componentWillUpdate"),Ne!==null||St!==null||Ve!==null){var Xt=ot.displayName||ot.name,gn=typeof ot.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+Xt+" uses "+gn+" but also contains the following legacy lifecycles:"+(Ne!==null?`
  `+Ne:"")+(St!==null?`
  `+St:"")+(Ve!==null?`
  `+Ve:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof ot.getDerivedStateFromProps=="function"&&(It.componentWillMount=Z,It.componentWillReceiveProps=fe),typeof It.getSnapshotBeforeUpdate=="function"){if(typeof It.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");It.componentWillUpdate=se;var pn=It.componentDidUpdate;It.componentDidUpdate=function(en,In,$r){var da=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:$r;pn.call(this,en,In,da)}}return ot}function ae(ot,It){if(ot==null)return{};var Ne,St,Ve=function(gn,pn){if(gn==null)return{};var en,In,$r={},da=Object.keys(gn);for(In=0;In<da.length;In++)en=da[In],pn.indexOf(en)>=0||($r[en]=gn[en]);return $r}(ot,It);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ot);for(St=0;St<Xt.length;St++)Ne=Xt[St],It.indexOf(Ne)>=0||Object.prototype.propertyIsEnumerable.call(ot,Ne)&&(Ve[Ne]=ot[Ne])}return Ve}function j(ot){var It=function(Ne){return{}.toString.call(Ne).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}(ot);return It==="number"&&(It=isNaN(ot)?"nan":(0|ot)!=ot?"float":"integer"),It}Z.__suppressDeprecationWarning=!0,fe.__suppressDeprecationWarning=!0,se.__suppressDeprecationWarning=!0;var de={scheme:"rjv-default",author:"mac gainor",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},ke={scheme:"rjv-grey",author:"mac gainor",base00:"rgba(1, 1, 1, 0)",base01:"rgba(1, 1, 1, 0.1)",base02:"rgba(0, 0, 0, 0.2)",base03:"rgba(1, 1, 1, 0.3)",base04:"rgba(0, 0, 0, 0.4)",base05:"rgba(1, 1, 1, 0.5)",base06:"rgba(1, 1, 1, 0.6)",base07:"rgba(1, 1, 1, 0.7)",base08:"rgba(1, 1, 1, 0.8)",base09:"rgba(1, 1, 1, 0.8)",base0A:"rgba(1, 1, 1, 0.8)",base0B:"rgba(1, 1, 1, 0.8)",base0C:"rgba(1, 1, 1, 0.8)",base0D:"rgba(1, 1, 1, 0.8)",base0E:"rgba(1, 1, 1, 0.8)",base0F:"rgba(1, 1, 1, 0.8)"},he={white:"#fff",black:"#000",transparent:"rgba(1, 1, 1, 0)",globalFontFamily:"monospace",globalCursor:"default",indentBlockWidth:"5px",braceFontWeight:"bold",braceCursor:"pointer",ellipsisFontSize:"18px",ellipsisLineHeight:"10px",ellipsisCursor:"pointer",keyMargin:"0px 5px",keyLetterSpacing:"0.5px",keyFontStyle:"none",keyBorderRadius:"3px",keyColonWeight:"bold",keyVerticalAlign:"top",keyOpacity:"0.85",keyOpacityHover:"1",keyValPaddingTop:"3px",keyValPaddingBottom:"3px",keyValPaddingRight:"5px",keyValBorderLeft:"1px solid",keyValBorderHover:"2px solid",keyValPaddingHover:"3px 5px 3px 4px",pushedContentMarginLeft:"6px",variableValuePaddingRight:"6px",nullFontSize:"11px",nullFontWeight:"bold",nullPadding:"1px 2px",nullBorderRadius:"3px",nanFontSize:"11px",nanFontWeight:"bold",nanPadding:"1px 2px",nanBorderRadius:"3px",undefinedFontSize:"11px",undefinedFontWeight:"bold",undefinedPadding:"1px 2px",undefinedBorderRadius:"3px",dataTypeFontSize:"11px",dataTypeMarginRight:"4px",datatypeOpacity:"0.8",objectSizeBorderRadius:"3px",objectSizeFontStyle:"italic",objectSizeMargin:"0px 6px 0px 0px",clipboardCursor:"pointer",clipboardCheckMarginLeft:"-12px",metaDataPadding:"0px 0px 0px 10px",arrayGroupMetaPadding:"0px 0px 0px 4px",iconContainerWidth:"17px",tooltipPadding:"4px",editInputMinWidth:"130px",editInputBorderRadius:"2px",editInputPadding:"5px",editInputMarginRight:"4px",editInputFontFamily:"monospace",iconCursor:"pointer",iconFontSize:"15px",iconPaddingRight:"1px",dateValueMarginLeft:"2px",iconMarginRight:"3px",detectedRowPaddingTop:"3px",addKeyCoverBackground:"rgba(255, 255, 255, 0.3)",addKeyCoverPosition:"absolute",addKeyCoverPositionPx:"0px",addKeyModalWidth:"200px",addKeyModalMargin:"auto",addKeyModalPadding:"10px",addKeyModalRadius:"3px"},Oe=E(45),We=function(It){var Ne=function(St){return{backgroundColor:St.base00,ellipsisColor:St.base09,braceColor:St.base07,expandedIcon:St.base0D,collapsedIcon:St.base0E,keyColor:St.base07,arrayKeyColor:St.base0C,objectSize:St.base04,copyToClipboard:St.base0F,copyToClipboardCheck:St.base0D,objectBorder:St.base02,dataTypes:{boolean:St.base0E,date:St.base0D,float:St.base0B,function:St.base0D,integer:St.base0F,string:St.base09,nan:St.base08,null:St.base0A,undefined:St.base05,regexp:St.base0A,background:St.base02},editVariable:{editIcon:St.base0E,cancelIcon:St.base09,removeIcon:St.base09,addIcon:St.base0E,checkIcon:St.base0E,background:St.base01,color:St.base0A,border:St.base07},addKeyModal:{background:St.base05,border:St.base04,color:St.base0A,labelColor:St.base01},validationFailure:{background:St.base09,iconColor:St.base01,fontColor:St.base01}}}(It);return{"app-container":{fontFamily:he.globalFontFamily,cursor:he.globalCursor,backgroundColor:Ne.backgroundColor,position:"relative"},ellipsis:{display:"inline-block",color:Ne.ellipsisColor,fontSize:he.ellipsisFontSize,lineHeight:he.ellipsisLineHeight,cursor:he.ellipsisCursor},"brace-row":{display:"inline-block",cursor:"pointer"},brace:{display:"inline-block",cursor:he.braceCursor,fontWeight:he.braceFontWeight,color:Ne.braceColor},"expanded-icon":{color:Ne.expandedIcon},"collapsed-icon":{color:Ne.collapsedIcon},colon:{display:"inline-block",margin:he.keyMargin,color:Ne.keyColor,verticalAlign:"top"},objectKeyVal:function(Ve,Xt){return{style:M({paddingTop:he.keyValPaddingTop,paddingRight:he.keyValPaddingRight,paddingBottom:he.keyValPaddingBottom,borderLeft:he.keyValBorderLeft+" "+Ne.objectBorder,":hover":{paddingLeft:Xt.paddingLeft-1+"px",borderLeft:he.keyValBorderHover+" "+Ne.objectBorder}},Xt)}},"object-key-val-no-border":{padding:he.keyValPadding},"pushed-content":{marginLeft:he.pushedContentMarginLeft},variableValue:function(Ve,Xt){return{style:M({display:"inline-block",paddingRight:he.variableValuePaddingRight,position:"relative"},Xt)}},"object-name":{display:"inline-block",color:Ne.keyColor,letterSpacing:he.keyLetterSpacing,fontStyle:he.keyFontStyle,verticalAlign:he.keyVerticalAlign,opacity:he.keyOpacity,":hover":{opacity:he.keyOpacityHover}},"array-key":{display:"inline-block",color:Ne.arrayKeyColor,letterSpacing:he.keyLetterSpacing,fontStyle:he.keyFontStyle,verticalAlign:he.keyVerticalAlign,opacity:he.keyOpacity,":hover":{opacity:he.keyOpacityHover}},"object-size":{color:Ne.objectSize,borderRadius:he.objectSizeBorderRadius,fontStyle:he.objectSizeFontStyle,margin:he.objectSizeMargin,cursor:"default"},"data-type-label":{fontSize:he.dataTypeFontSize,marginRight:he.dataTypeMarginRight,opacity:he.datatypeOpacity},boolean:{display:"inline-block",color:Ne.dataTypes.boolean},date:{display:"inline-block",color:Ne.dataTypes.date},"date-value":{marginLeft:he.dateValueMarginLeft},float:{display:"inline-block",color:Ne.dataTypes.float},function:{display:"inline-block",color:Ne.dataTypes.function,cursor:"pointer",whiteSpace:"pre-line"},"function-value":{fontStyle:"italic"},integer:{display:"inline-block",color:Ne.dataTypes.integer},string:{display:"inline-block",color:Ne.dataTypes.string},nan:{display:"inline-block",color:Ne.dataTypes.nan,fontSize:he.nanFontSize,fontWeight:he.nanFontWeight,backgroundColor:Ne.dataTypes.background,padding:he.nanPadding,borderRadius:he.nanBorderRadius},null:{display:"inline-block",color:Ne.dataTypes.null,fontSize:he.nullFontSize,fontWeight:he.nullFontWeight,backgroundColor:Ne.dataTypes.background,padding:he.nullPadding,borderRadius:he.nullBorderRadius},undefined:{display:"inline-block",color:Ne.dataTypes.undefined,fontSize:he.undefinedFontSize,padding:he.undefinedPadding,borderRadius:he.undefinedBorderRadius,backgroundColor:Ne.dataTypes.background},regexp:{display:"inline-block",color:Ne.dataTypes.regexp},"copy-to-clipboard":{cursor:he.clipboardCursor},"copy-icon":{color:Ne.copyToClipboard,fontSize:he.iconFontSize,marginRight:he.iconMarginRight,verticalAlign:"top"},"copy-icon-copied":{color:Ne.copyToClipboardCheck,marginLeft:he.clipboardCheckMarginLeft},"array-group-meta-data":{display:"inline-block",padding:he.arrayGroupMetaPadding},"object-meta-data":{display:"inline-block",padding:he.metaDataPadding},"icon-container":{display:"inline-block",width:he.iconContainerWidth},tooltip:{padding:he.tooltipPadding},removeVarIcon:{verticalAlign:"top",display:"inline-block",color:Ne.editVariable.removeIcon,cursor:he.iconCursor,fontSize:he.iconFontSize,marginRight:he.iconMarginRight},addVarIcon:{verticalAlign:"top",display:"inline-block",color:Ne.editVariable.addIcon,cursor:he.iconCursor,fontSize:he.iconFontSize,marginRight:he.iconMarginRight},editVarIcon:{verticalAlign:"top",display:"inline-block",color:Ne.editVariable.editIcon,cursor:he.iconCursor,fontSize:he.iconFontSize,marginRight:he.iconMarginRight},"edit-icon-container":{display:"inline-block",verticalAlign:"top"},"check-icon":{display:"inline-block",cursor:he.iconCursor,color:Ne.editVariable.checkIcon,fontSize:he.iconFontSize,paddingRight:he.iconPaddingRight},"cancel-icon":{display:"inline-block",cursor:he.iconCursor,color:Ne.editVariable.cancelIcon,fontSize:he.iconFontSize,paddingRight:he.iconPaddingRight},"edit-input":{display:"inline-block",minWidth:he.editInputMinWidth,borderRadius:he.editInputBorderRadius,backgroundColor:Ne.editVariable.background,color:Ne.editVariable.color,padding:he.editInputPadding,marginRight:he.editInputMarginRight,fontFamily:he.editInputFontFamily},"detected-row":{paddingTop:he.detectedRowPaddingTop},"key-modal-request":{position:he.addKeyCoverPosition,top:he.addKeyCoverPositionPx,left:he.addKeyCoverPositionPx,right:he.addKeyCoverPositionPx,bottom:he.addKeyCoverPositionPx,backgroundColor:he.addKeyCoverBackground},"key-modal":{width:he.addKeyModalWidth,backgroundColor:Ne.addKeyModal.background,marginLeft:he.addKeyModalMargin,marginRight:he.addKeyModalMargin,padding:he.addKeyModalPadding,borderRadius:he.addKeyModalRadius,marginTop:"15px",position:"relative"},"key-modal-label":{color:Ne.addKeyModal.labelColor,marginLeft:"2px",marginBottom:"5px",fontSize:"11px"},"key-modal-input-container":{overflow:"hidden"},"key-modal-input":{width:"100%",padding:"3px 6px",fontFamily:"monospace",color:Ne.addKeyModal.color,border:"none",boxSizing:"border-box",borderRadius:"2px"},"key-modal-cancel":{backgroundColor:Ne.editVariable.removeIcon,position:"absolute",top:"0px",right:"0px",borderRadius:"0px 3px 0px 3px",cursor:"pointer"},"key-modal-cancel-icon":{color:Ne.addKeyModal.labelColor,fontSize:he.iconFontSize,transform:"rotate(45deg)"},"key-modal-submit":{color:Ne.editVariable.addIcon,fontSize:he.iconFontSize,position:"absolute",right:"2px",top:"3px",cursor:"pointer"},"function-ellipsis":{display:"inline-block",color:Ne.ellipsisColor,fontSize:he.ellipsisFontSize,lineHeight:he.ellipsisLineHeight,cursor:he.ellipsisCursor},"validation-failure":{float:"right",padding:"3px 6px",borderRadius:"2px",cursor:"pointer",color:Ne.validationFailure.fontColor,backgroundColor:Ne.validationFailure.background},"validation-failure-label":{marginRight:"6px"},"validation-failure-clear":{position:"relative",verticalAlign:"top",cursor:"pointer",color:Ne.validationFailure.iconColor,fontSize:he.iconFontSize,transform:"rotate(45deg)"}}};function D(ot,It,Ne){return ot||console.error("theme has not been set"),function(St){var Ve=de;return St!==!1&&St!=="none"||(Ve=ke),Object(Oe.createStyling)(We,{defaultBase16:Ve})(St)}(ot)(It,Ne)}var je=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=(Ve.rjvId,Ve.type_name),gn=Ve.displayDataTypes,pn=Ve.theme;return gn?G.a.createElement("span",Object.assign({className:"data-type-label"},D(pn,"data-type-label")),Xt):null}}]),Ne}(G.a.PureComponent),pt=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props;return G.a.createElement("div",D(Ve.theme,"boolean"),G.a.createElement(je,Object.assign({type_name:"bool"},Ve)),Ve.value?"true":"false")}}]),Ne}(G.a.PureComponent),nt=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props;return G.a.createElement("div",D(Ve.theme,"date"),G.a.createElement(je,Object.assign({type_name:"date"},Ve)),G.a.createElement("span",Object.assign({className:"date-value"},D(Ve.theme,"date-value")),Ve.value.toLocaleTimeString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})))}}]),Ne}(G.a.PureComponent),Lt=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props;return G.a.createElement("div",D(Ve.theme,"float"),G.a.createElement(je,Object.assign({type_name:"float"},Ve)),this.props.value)}}]),Ne}(G.a.PureComponent);function Gt(ot,It){(It==null||It>ot.length)&&(It=ot.length);for(var Ne=0,St=new Array(It);Ne<It;Ne++)St[Ne]=ot[Ne];return St}function $e(ot,It){if(ot){if(typeof ot=="string")return Gt(ot,It);var Ne=Object.prototype.toString.call(ot).slice(8,-1);return Ne==="Object"&&ot.constructor&&(Ne=ot.constructor.name),Ne==="Map"||Ne==="Set"?Array.from(ot):Ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ne)?Gt(ot,It):void 0}}function jt(ot,It){var Ne;if(typeof Symbol=="undefined"||ot[Symbol.iterator]==null){if(Array.isArray(ot)||(Ne=$e(ot))||It&&ot&&typeof ot.length=="number"){Ne&&(ot=Ne);var St=0,Ve=function(){};return{s:Ve,n:function(){return St>=ot.length?{done:!0}:{done:!1,value:ot[St++]}},e:function(In){throw In},f:Ve}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Xt,gn=!0,pn=!1;return{s:function(){Ne=ot[Symbol.iterator]()},n:function(){var In=Ne.next();return gn=In.done,In},e:function(In){pn=!0,Xt=In},f:function(){try{gn||Ne.return==null||Ne.return()}finally{if(pn)throw Xt}}}}function Be(ot){return function(It){if(Array.isArray(It))return Gt(It)}(ot)||function(It){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(It))return Array.from(It)}(ot)||$e(ot)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var pe=E(46),un=new(E(47)).Dispatcher,ln=new(function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){var St;U(this,Ne);for(var Ve=arguments.length,Xt=new Array(Ve),gn=0;gn<Ve;gn++)Xt[gn]=arguments[gn];return(St=It.call.apply(It,[this].concat(Xt))).objects={},St.set=function(pn,en,In,$r){St.objects[pn]===void 0&&(St.objects[pn]={}),St.objects[pn][en]===void 0&&(St.objects[pn][en]={}),St.objects[pn][en][In]=$r},St.get=function(pn,en,In,$r){return St.objects[pn]===void 0||St.objects[pn][en]===void 0||St.objects[pn][en][In]==null?$r:St.objects[pn][en][In]},St.handleAction=function(pn){var en=pn.rjvId,In=pn.data;switch(pn.name){case"RESET":St.emit("reset-"+en);break;case"VARIABLE_UPDATED":pn.data.updated_src=St.updateSrc(en,In),St.set(en,"action","variable-update",M(M({},In),{},{type:"variable-edited"})),St.emit("variable-update-"+en);break;case"VARIABLE_REMOVED":pn.data.updated_src=St.updateSrc(en,In),St.set(en,"action","variable-update",M(M({},In),{},{type:"variable-removed"})),St.emit("variable-update-"+en);break;case"VARIABLE_ADDED":pn.data.updated_src=St.updateSrc(en,In),St.set(en,"action","variable-update",M(M({},In),{},{type:"variable-added"})),St.emit("variable-update-"+en);break;case"ADD_VARIABLE_KEY_REQUEST":St.set(en,"action","new-key-request",In),St.emit("add-key-request-"+en)}},St.updateSrc=function(pn,en){var In=en.name,$r=en.namespace,da=en.new_value,Oa=(en.existing_value,en.variable_removed);$r.shift();var Ka,bi=St.get(pn,"global","src"),_a=St.deepCopy(bi,Be($r)),ti=_a,tn=jt($r);try{for(tn.s();!(Ka=tn.n()).done;)ti=ti[Ka.value]}catch(mn){tn.e(mn)}finally{tn.f()}return Oa?j(ti)=="array"?ti.splice(In,1):delete ti[In]:In!==null?ti[In]=da:_a=da,St.set(pn,"global","src",_a),_a},St.deepCopy=function(pn,en){var In,$r=j(pn),da=en.shift();return $r=="array"?In=Be(pn):$r=="object"&&(In=M({},pn)),da!==void 0&&(In[da]=St.deepCopy(pn[da],en)),In},St}return Ne}(pe.EventEmitter));un.register(ln.handleAction.bind(ln));var Fn=ln,Ft=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(St){var Ve;return U(this,Ne),(Ve=It.call(this,St)).toggleCollapsed=function(){Ve.setState({collapsed:!Ve.state.collapsed},function(){Fn.set(Ve.props.rjvId,Ve.props.namespace,"collapsed",Ve.state.collapsed)})},Ve.getFunctionDisplay=function(Xt){var gn=ie(Ve).props;return Xt?G.a.createElement("span",null,Ve.props.value.toString().slice(9,-1).replace(/\{[\s\S]+/,""),G.a.createElement("span",{className:"function-collapsed",style:{fontWeight:"bold"}},G.a.createElement("span",null,"{"),G.a.createElement("span",D(gn.theme,"ellipsis"),"..."),G.a.createElement("span",null,"}"))):Ve.props.value.toString().slice(9,-1)},Ve.state={collapsed:Fn.get(St.rjvId,St.namespace,"collapsed",!0)},Ve}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=this.state.collapsed;return G.a.createElement("div",D(Ve.theme,"function"),G.a.createElement(je,Object.assign({type_name:"function"},Ve)),G.a.createElement("span",Object.assign({},D(Ve.theme,"function-value"),{className:"rjv-function-container",onClick:this.toggleCollapsed}),this.getFunctionDisplay(Xt)))}}]),Ne}(G.a.PureComponent),Pn=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){return G.a.createElement("div",D(this.props.theme,"nan"),"NaN")}}]),Ne}(G.a.PureComponent),lr=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){return G.a.createElement("div",D(this.props.theme,"null"),"NULL")}}]),Ne}(G.a.PureComponent),hn=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props;return G.a.createElement("div",D(Ve.theme,"integer"),G.a.createElement(je,Object.assign({type_name:"int"},Ve)),this.props.value)}}]),Ne}(G.a.PureComponent),On=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props;return G.a.createElement("div",D(Ve.theme,"regexp"),G.a.createElement(je,Object.assign({type_name:"regexp"},Ve)),this.props.value.toString())}}]),Ne}(G.a.PureComponent),jn=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(St){var Ve;return U(this,Ne),(Ve=It.call(this,St)).toggleCollapsed=function(){Ve.setState({collapsed:!Ve.state.collapsed},function(){Fn.set(Ve.props.rjvId,Ve.props.namespace,"collapsed",Ve.state.collapsed)})},Ve.state={collapsed:Fn.get(St.rjvId,St.namespace,"collapsed",!0)},Ve}return $(Ne,[{key:"render",value:function(){this.state.collapsed;var Ve=this.props,Xt=Ve.collapseStringsAfterLength,gn=Ve.theme,pn=Ve.value,en={style:{cursor:"default"}};return j(Xt)==="integer"&&pn.length>Xt&&(en.style.cursor="pointer",this.state.collapsed&&(pn=G.a.createElement("span",null,pn.substring(0,Xt),G.a.createElement("span",D(gn,"ellipsis")," ...")))),G.a.createElement("div",D(gn,"string"),G.a.createElement(je,Object.assign({type_name:"string"},Ve)),G.a.createElement("span",Object.assign({className:"string-value"},en,{onClick:this.toggleCollapsed}),'"',pn,'"'))}}]),Ne}(G.a.PureComponent),Dn=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){return G.a.createElement("div",D(this.props.theme,"undefined"),"undefined")}}]),Ne}(G.a.PureComponent);function ft(){return(ft=Object.assign||function(ot){for(var It=1;It<arguments.length;It++){var Ne=arguments[It];for(var St in Ne)Object.prototype.hasOwnProperty.call(Ne,St)&&(ot[St]=Ne[St])}return ot}).apply(this,arguments)}var Ut=ce.useLayoutEffect,ct=function(It){var Ne=Object(ce.useRef)(It);return Ut(function(){Ne.current=It}),Ne},Ct=function(It,Ne){typeof It!="function"?It.current=Ne:It(Ne)},kt=function(It,Ne){var St=Object(ce.useRef)();return Object(ce.useCallback)(function(Ve){It.current=Ve,St.current&&Ct(St.current,null),St.current=Ne,Ne&&Ct(Ne,Ve)},[Ne])},yt={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},tt=function(It){Object.keys(yt).forEach(function(Ne){It.style.setProperty(Ne,yt[Ne],"important")})},I=null,Mn=function(){},dt=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],vt=!!document.documentElement.currentStyle,Bt=function(It,Ne){var St=It.cacheMeasurements,Ve=It.maxRows,Xt=It.minRows,gn=It.onChange,pn=gn===void 0?Mn:gn,en=It.onHeightChange,In=en===void 0?Mn:en,$r=function(mn,nr){if(mn==null)return{};var or,Zr,Vi={},Da=Object.keys(mn);for(Zr=0;Zr<Da.length;Zr++)or=Da[Zr],nr.indexOf(or)>=0||(Vi[or]=mn[or]);return Vi}(It,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),da,Oa=$r.value!==void 0,Ka=Object(ce.useRef)(null),bi=kt(Ka,Ne),_a=Object(ce.useRef)(0),ti=Object(ce.useRef)(),tn=function(){var nr=Ka.current,or=St&&ti.current?ti.current:function(Ea){var ta=window.getComputedStyle(Ea);if(ta===null)return null;var ha,Kr=(ha=ta,dt.reduce(function(So,Js){return So[Js]=ha[Js],So},{})),qi=Kr.boxSizing;return qi===""?null:(vt&&qi==="border-box"&&(Kr.width=parseFloat(Kr.width)+parseFloat(Kr.borderRightWidth)+parseFloat(Kr.borderLeftWidth)+parseFloat(Kr.paddingRight)+parseFloat(Kr.paddingLeft)+"px"),{sizingStyle:Kr,paddingSize:parseFloat(Kr.paddingBottom)+parseFloat(Kr.paddingTop),borderSize:parseFloat(Kr.borderBottomWidth)+parseFloat(Kr.borderTopWidth)})}(nr);if(or){ti.current=or;var Zr=function(Ea,ta,ha,Kr){ha===void 0&&(ha=1),Kr===void 0&&(Kr=1/0),I||((I=document.createElement("textarea")).setAttribute("tab-index","-1"),I.setAttribute("aria-hidden","true"),tt(I)),I.parentNode===null&&document.body.appendChild(I);var qi=Ea.paddingSize,So=Ea.borderSize,Js=Ea.sizingStyle,Ro=Js.boxSizing;Object.keys(Js).forEach(function(As){var Ms=As;I.style[Ms]=Js[Ms]}),tt(I),I.value=ta;var Zo=function(As,Ms){var Vo=As.scrollHeight;return Ms.sizingStyle.boxSizing==="border-box"?Vo+Ms.borderSize:Vo-Ms.paddingSize}(I,Ea);I.value="x";var Ss=I.scrollHeight-qi,gs=Ss*ha;Ro==="border-box"&&(gs=gs+qi+So),Zo=Math.max(gs,Zo);var ou=Ss*Kr;return Ro==="border-box"&&(ou=ou+qi+So),[Zo=Math.min(ou,Zo),Ss]}(or,nr.value||nr.placeholder||"x",Xt,Ve),Vi=Zr[0],Da=Zr[1];_a.current!==Vi&&(_a.current=Vi,nr.style.setProperty("height",Vi+"px","important"),In(Vi,{rowHeight:Da}))}};return Object(ce.useLayoutEffect)(tn),da=ct(tn),Object(ce.useLayoutEffect)(function(){var mn=function(or){da.current(or)};return window.addEventListener("resize",mn),function(){window.removeEventListener("resize",mn)}},[]),Object(ce.createElement)("textarea",ft({},$r,{onChange:function(nr){Oa||tn(),pn(nr)},ref:bi}))},me=Object(ce.forwardRef)(Bt);function ue(ot){ot=ot.trim();try{if((ot=JSON.stringify(JSON.parse(ot)))[0]==="[")return Re("array",JSON.parse(ot));if(ot[0]==="{")return Re("object",JSON.parse(ot));if(ot.match(/\-?\d+\.\d+/)&&ot.match(/\-?\d+\.\d+/)[0]===ot)return Re("float",parseFloat(ot));if(ot.match(/\-?\d+e-\d+/)&&ot.match(/\-?\d+e-\d+/)[0]===ot)return Re("float",Number(ot));if(ot.match(/\-?\d+/)&&ot.match(/\-?\d+/)[0]===ot)return Re("integer",parseInt(ot));if(ot.match(/\-?\d+e\+\d+/)&&ot.match(/\-?\d+e\+\d+/)[0]===ot)return Re("integer",Number(ot))}catch(It){}switch(ot=ot.toLowerCase()){case"undefined":return Re("undefined",void 0);case"nan":return Re("nan",NaN);case"null":return Re("null",null);case"true":return Re("boolean",!0);case"false":return Re("boolean",!1);default:if(ot=Date.parse(ot))return Re("date",new Date(ot))}return Re(!1,null)}function Re(ot,It){return{type:ot,value:It}}var Rt=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",Object.assign({},ba(Xt),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),G.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7"})))}}]),Ne}(G.a.PureComponent),Kt=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",Object.assign({},ba(Xt),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),G.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})))}}]),Ne}(G.a.PureComponent),Bn=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]),pn=ba(Xt).style;return G.a.createElement("span",gn,G.a.createElement("svg",{fill:pn.color,width:pn.height,height:pn.width,style:pn,viewBox:"0 0 1792 1792"},G.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-832q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h832q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),Ne}(G.a.PureComponent),Nr=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]),pn=ba(Xt).style;return G.a.createElement("span",gn,G.a.createElement("svg",{fill:pn.color,width:pn.height,height:pn.width,style:pn,viewBox:"0 0 1792 1792"},G.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-352v352q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-352h-352q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h352v-352q0-14 9-23t23-9h64q14 0 23 9t9 23v352h352q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),Ne}(G.a.PureComponent),Rn=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",{style:M(M({},ba(Xt).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},G.a.createElement("path",{d:"M0 14l6-6-6-6z"})))}}]),Ne}(G.a.PureComponent),Cr=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",{style:M(M({},ba(Xt).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},G.a.createElement("path",{d:"M0 5l6 6 6-6z"})))}}]),Ne}(G.a.PureComponent),tr=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",Object.assign({},ba(Xt),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),G.a.createElement("g",null,G.a.createElement("path",{d:"m30 35h-25v-22.5h25v7.5h2.5v-12.5c0-1.4-1.1-2.5-2.5-2.5h-7.5c0-2.8-2.2-5-5-5s-5 2.2-5 5h-7.5c-1.4 0-2.5 1.1-2.5 2.5v27.5c0 1.4 1.1 2.5 2.5 2.5h25c1.4 0 2.5-1.1 2.5-2.5v-5h-2.5v5z m-20-27.5h2.5s2.5-1.1 2.5-2.5 1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5 1.3 2.5 2.5 2.5h2.5s2.5 1.1 2.5 2.5h-20c0-1.5 1.1-2.5 2.5-2.5z m-2.5 20h5v-2.5h-5v2.5z m17.5-5v-5l-10 7.5 10 7.5v-5h12.5v-5h-12.5z m-17.5 10h7.5v-2.5h-7.5v2.5z m12.5-17.5h-12.5v2.5h12.5v-2.5z m-7.5 5h-5v2.5h5v-2.5z"}))))}}]),Ne}(G.a.PureComponent),jr=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",Object.assign({},ba(Xt),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),G.a.createElement("g",null,G.a.createElement("path",{d:"m28.6 25q0-0.5-0.4-1l-4-4 4-4q0.4-0.5 0.4-1 0-0.6-0.4-1.1l-2-2q-0.4-0.4-1-0.4-0.6 0-1 0.4l-4.1 4.1-4-4.1q-0.4-0.4-1-0.4-0.6 0-1 0.4l-2 2q-0.5 0.5-0.5 1.1 0 0.5 0.5 1l4 4-4 4q-0.5 0.5-0.5 1 0 0.7 0.5 1.1l2 2q0.4 0.4 1 0.4 0.6 0 1-0.4l4-4.1 4.1 4.1q0.4 0.4 1 0.4 0.6 0 1-0.4l2-2q0.4-0.4 0.4-1z m8.7-5q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),Ne}(G.a.PureComponent),zr=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",Object.assign({},ba(Xt),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),G.a.createElement("g",null,G.a.createElement("path",{d:"m30.1 21.4v-2.8q0-0.6-0.4-1t-1-0.5h-5.7v-5.7q0-0.6-0.4-1t-1-0.4h-2.9q-0.6 0-1 0.4t-0.4 1v5.7h-5.7q-0.6 0-1 0.5t-0.5 1v2.8q0 0.6 0.5 1t1 0.5h5.7v5.7q0 0.5 0.4 1t1 0.4h2.9q0.6 0 1-0.4t0.4-1v-5.7h5.7q0.6 0 1-0.5t0.4-1z m7.2-1.4q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),Ne}(G.a.PureComponent),Ua=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",Object.assign({},ba(Xt),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),G.a.createElement("g",null,G.a.createElement("path",{d:"m31.6 21.6h-10v10h-3.2v-10h-10v-3.2h10v-10h3.2v10h10v3.2z"}))))}}]),Ne}(G.a.PureComponent),oa=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",Object.assign({},ba(Xt),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),G.a.createElement("g",null,G.a.createElement("path",{d:"m19.8 26.4l2.6-2.6-3.4-3.4-2.6 2.6v1.3h2.2v2.1h1.2z m9.8-16q-0.3-0.4-0.7 0l-7.8 7.8q-0.4 0.4 0 0.7t0.7 0l7.8-7.8q0.4-0.4 0-0.7z m1.8 13.2v4.3q0 2.6-1.9 4.5t-4.5 1.9h-18.6q-2.6 0-4.5-1.9t-1.9-4.5v-18.6q0-2.7 1.9-4.6t4.5-1.8h18.6q1.4 0 2.6 0.5 0.3 0.2 0.4 0.5 0.1 0.4-0.2 0.7l-1.1 1.1q-0.3 0.3-0.7 0.1-0.5-0.1-1-0.1h-18.6q-1.4 0-2.5 1.1t-1 2.5v18.6q0 1.4 1 2.5t2.5 1h18.6q1.5 0 2.5-1t1.1-2.5v-2.9q0-0.2 0.2-0.4l1.4-1.5q0.3-0.3 0.8-0.1t0.4 0.6z m-2.1-16.5l6.4 6.5-15 15h-6.4v-6.5z m9.9 3l-2.1 2-6.4-6.4 2.1-2q0.6-0.7 1.5-0.7t1.5 0.7l3.4 3.4q0.6 0.6 0.6 1.5t-0.6 1.5z"}))))}}]),Ne}(G.a.PureComponent),Za=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.style,gn=ae(Ve,["style"]);return G.a.createElement("span",gn,G.a.createElement("svg",Object.assign({},ba(Xt),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),G.a.createElement("g",null,G.a.createElement("path",{d:"m31.7 16.4q0-0.6-0.4-1l-2.1-2.1q-0.4-0.4-1-0.4t-1 0.4l-9.1 9.1-5-5q-0.5-0.4-1-0.4t-1 0.4l-2.1 2q-0.4 0.4-0.4 1 0 0.6 0.4 1l8.1 8.1q0.4 0.4 1 0.4 0.6 0 1-0.4l12.2-12.1q0.4-0.4 0.4-1z m5.6 3.6q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),Ne}(G.a.PureComponent);function ba(ot){return ot||(ot={}),{style:M(M({verticalAlign:"middle"},ot),{},{color:ot.color?ot.color:"#000000",height:"1em",width:"1em"})}}var Pa=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(St){var Ve;return U(this,Ne),(Ve=It.call(this,St)).copiedTimer=null,Ve.handleCopy=function(){var Xt=document.createElement("textarea"),gn=Ve.props,pn=gn.clickCallback,en=gn.src,In=gn.namespace;Xt.innerHTML=JSON.stringify(Ve.clipboardValue(en),null,"  "),document.body.appendChild(Xt),Xt.select(),document.execCommand("copy"),document.body.removeChild(Xt),Ve.copiedTimer=setTimeout(function(){Ve.setState({copied:!1})},5500),Ve.setState({copied:!0},function(){typeof pn=="function"&&pn({src:en,namespace:In,name:In[In.length-1]})})},Ve.getClippyIcon=function(){var Xt=Ve.props.theme;return Ve.state.copied?G.a.createElement("span",null,G.a.createElement(tr,Object.assign({className:"copy-icon"},D(Xt,"copy-icon"))),G.a.createElement("span",D(Xt,"copy-icon-copied"),"\u2714")):G.a.createElement(tr,Object.assign({className:"copy-icon"},D(Xt,"copy-icon")))},Ve.clipboardValue=function(Xt){switch(j(Xt)){case"function":case"regexp":return Xt.toString();default:return Xt}},Ve.state={copied:!1},Ve}return $(Ne,[{key:"componentWillUnmount",value:function(){this.copiedTimer&&(clearTimeout(this.copiedTimer),this.copiedTimer=null)}},{key:"render",value:function(){var Ve=this.props,Xt=(Ve.src,Ve.theme),gn=Ve.hidden,pn=Ve.rowHovered,en=D(Xt,"copy-to-clipboard").style,In="inline";return gn&&(In="none"),G.a.createElement("span",{className:"copy-to-clipboard-container",title:"Copy to clipboard",style:{verticalAlign:"top",display:pn?"inline-block":"none"}},G.a.createElement("span",{style:M(M({},en),{},{display:In}),onClick:this.handleCopy},this.getClippyIcon()))}}]),Ne}(G.a.PureComponent),ri=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(St){var Ve;return U(this,Ne),(Ve=It.call(this,St)).getEditIcon=function(){var Xt=Ve.props,gn=Xt.variable,pn=Xt.theme;return G.a.createElement("div",{className:"click-to-edit",style:{verticalAlign:"top",display:Ve.state.hovered?"inline-block":"none"}},G.a.createElement(oa,Object.assign({className:"click-to-edit-icon"},D(pn,"editVarIcon"),{onClick:function(){Ve.prepopInput(gn)}})))},Ve.prepopInput=function(Xt){if(Ve.props.onEdit!==!1){var gn=function(en){var In;switch(j(en)){case"undefined":In="undefined";break;case"nan":In="NaN";break;case"string":In=en;break;case"date":case"function":case"regexp":In=en.toString();break;default:try{In=JSON.stringify(en,null,"  ")}catch($r){In=""}}return In}(Xt.value),pn=ue(gn);Ve.setState({editMode:!0,editValue:gn,parsedInput:{type:pn.type,value:pn.value}})}},Ve.getRemoveIcon=function(){var Xt=Ve.props,gn=Xt.variable,pn=Xt.namespace,en=Xt.theme,In=Xt.rjvId;return G.a.createElement("div",{className:"click-to-remove",style:{verticalAlign:"top",display:Ve.state.hovered?"inline-block":"none"}},G.a.createElement(jr,Object.assign({className:"click-to-remove-icon"},D(en,"removeVarIcon"),{onClick:function(){un.dispatch({name:"VARIABLE_REMOVED",rjvId:In,data:{name:gn.name,namespace:pn,existing_value:gn.value,variable_removed:!0}})}})))},Ve.getValue=function(Xt,gn){var pn=!gn&&Xt.type,en=ie(Ve).props;switch(pn){case!1:return Ve.getEditInput();case"string":return G.a.createElement(jn,Object.assign({value:Xt.value},en));case"integer":return G.a.createElement(hn,Object.assign({value:Xt.value},en));case"float":return G.a.createElement(Lt,Object.assign({value:Xt.value},en));case"boolean":return G.a.createElement(pt,Object.assign({value:Xt.value},en));case"function":return G.a.createElement(Ft,Object.assign({value:Xt.value},en));case"null":return G.a.createElement(lr,en);case"nan":return G.a.createElement(Pn,en);case"undefined":return G.a.createElement(Dn,en);case"date":return G.a.createElement(nt,Object.assign({value:Xt.value},en));case"regexp":return G.a.createElement(On,Object.assign({value:Xt.value},en));default:return G.a.createElement("div",{className:"object-value"},JSON.stringify(Xt.value))}},Ve.getEditInput=function(){var Xt=Ve.props.theme,gn=Ve.state.editValue;return G.a.createElement("div",null,G.a.createElement(me,Object.assign({type:"text",inputRef:function(en){return en&&en.focus()},value:gn,className:"variable-editor",onChange:function(en){var In=en.target.value,$r=ue(In);Ve.setState({editValue:In,parsedInput:{type:$r.type,value:$r.value}})},onKeyDown:function(en){switch(en.key){case"Escape":Ve.setState({editMode:!1,editValue:""});break;case"Enter":(en.ctrlKey||en.metaKey)&&Ve.submitEdit(!0)}en.stopPropagation()},placeholder:"update this value",minRows:2},D(Xt,"edit-input"))),G.a.createElement("div",D(Xt,"edit-icon-container"),G.a.createElement(jr,Object.assign({className:"edit-cancel"},D(Xt,"cancel-icon"),{onClick:function(){Ve.setState({editMode:!1,editValue:""})}})),G.a.createElement(Za,Object.assign({className:"edit-check string-value"},D(Xt,"check-icon"),{onClick:function(){Ve.submitEdit()}})),G.a.createElement("div",null,Ve.showDetected())))},Ve.submitEdit=function(Xt){var gn=Ve.props,pn=gn.variable,en=gn.namespace,In=gn.rjvId,$r=Ve.state,da=$r.editValue,Oa=$r.parsedInput,Ka=da;Xt&&Oa.type&&(Ka=Oa.value),Ve.setState({editMode:!1}),un.dispatch({name:"VARIABLE_UPDATED",rjvId:In,data:{name:pn.name,namespace:en,existing_value:pn.value,new_value:Ka,variable_removed:!1}})},Ve.showDetected=function(){var Xt=Ve.props,gn=Xt.theme,pn=(Xt.variable,Xt.namespace,Xt.rjvId,Ve.state.parsedInput),en=(pn.type,pn.value,Ve.getDetectedInput());if(en)return G.a.createElement("div",null,G.a.createElement("div",D(gn,"detected-row"),en,G.a.createElement(Za,{className:"edit-check detected",style:M({verticalAlign:"top",paddingLeft:"3px"},D(gn,"check-icon").style),onClick:function(){Ve.submitEdit(!0)}})))},Ve.getDetectedInput=function(){var Xt=Ve.state.parsedInput,gn=Xt.type,pn=Xt.value,en=ie(Ve).props,In=en.theme;if(gn!==!1)switch(gn.toLowerCase()){case"object":return G.a.createElement("span",null,G.a.createElement("span",{style:M(M({},D(In,"brace").style),{},{cursor:"default"})},"{"),G.a.createElement("span",{style:M(M({},D(In,"ellipsis").style),{},{cursor:"default"})},"..."),G.a.createElement("span",{style:M(M({},D(In,"brace").style),{},{cursor:"default"})},"}"));case"array":return G.a.createElement("span",null,G.a.createElement("span",{style:M(M({},D(In,"brace").style),{},{cursor:"default"})},"["),G.a.createElement("span",{style:M(M({},D(In,"ellipsis").style),{},{cursor:"default"})},"..."),G.a.createElement("span",{style:M(M({},D(In,"brace").style),{},{cursor:"default"})},"]"));case"string":return G.a.createElement(jn,Object.assign({value:pn},en));case"integer":return G.a.createElement(hn,Object.assign({value:pn},en));case"float":return G.a.createElement(Lt,Object.assign({value:pn},en));case"boolean":return G.a.createElement(pt,Object.assign({value:pn},en));case"function":return G.a.createElement(Ft,Object.assign({value:pn},en));case"null":return G.a.createElement(lr,en);case"nan":return G.a.createElement(Pn,en);case"undefined":return G.a.createElement(Dn,en);case"date":return G.a.createElement(nt,Object.assign({value:new Date(pn)},en))}},Ve.state={editMode:!1,editValue:"",hovered:!1,renameKey:!1,parsedInput:{type:!1,value:null}},Ve}return $(Ne,[{key:"render",value:function(){var Ve=this,Xt=this.props,gn=Xt.variable,pn=Xt.singleIndent,en=Xt.type,In=Xt.theme,$r=Xt.namespace,da=Xt.indentWidth,Oa=Xt.enableClipboard,Ka=Xt.onEdit,bi=Xt.onDelete,_a=Xt.onSelect,ti=Xt.displayArrayKey,tn=Xt.quotesOnKeys,mn=this.state.editMode;return G.a.createElement("div",Object.assign({},D(In,"objectKeyVal",{paddingLeft:da*pn}),{onMouseEnter:function(){return Ve.setState(M(M({},Ve.state),{},{hovered:!0}))},onMouseLeave:function(){return Ve.setState(M(M({},Ve.state),{},{hovered:!1}))},className:"variable-row",key:gn.name}),en=="array"?ti?G.a.createElement("span",Object.assign({},D(In,"array-key"),{key:gn.name+"_"+$r}),gn.name,G.a.createElement("div",D(In,"colon"),":")):null:G.a.createElement("span",null,G.a.createElement("span",Object.assign({},D(In,"object-name"),{className:"object-key",key:gn.name+"_"+$r}),!!tn&&G.a.createElement("span",{style:{verticalAlign:"top"}},'"'),G.a.createElement("span",{style:{display:"inline-block"}},gn.name),!!tn&&G.a.createElement("span",{style:{verticalAlign:"top"}},'"')),G.a.createElement("span",D(In,"colon"),":")),G.a.createElement("div",Object.assign({className:"variable-value",onClick:_a===!1&&Ka===!1?null:function(nr){var or=Be($r);(nr.ctrlKey||nr.metaKey)&&Ka!==!1?Ve.prepopInput(gn):_a!==!1&&(or.shift(),_a(M(M({},gn),{},{namespace:or})))}},D(In,"variableValue",{cursor:_a===!1?"default":"pointer"})),this.getValue(gn,mn)),Oa?G.a.createElement(Pa,{rowHovered:this.state.hovered,hidden:mn,src:gn.value,clickCallback:Oa,theme:In,namespace:[].concat(Be($r),[gn.name])}):null,Ka!==!1&&mn==0?this.getEditIcon():null,bi!==!1&&mn==0?this.getRemoveIcon():null)}}]),Ne}(G.a.PureComponent),li=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){var St;U(this,Ne);for(var Ve=arguments.length,Xt=new Array(Ve),gn=0;gn<Ve;gn++)Xt[gn]=arguments[gn];return(St=It.call.apply(It,[this].concat(Xt))).getObjectSize=function(){var pn=St.props,en=pn.size,In=pn.theme;if(pn.displayObjectSize)return G.a.createElement("span",Object.assign({className:"object-size"},D(In,"object-size")),en," item",en===1?"":"s")},St.getAddAttribute=function(pn){var en=St.props,In=en.theme,$r=en.namespace,da=en.name,Oa=en.src,Ka=en.rjvId,bi=en.depth;return G.a.createElement("span",{className:"click-to-add",style:{verticalAlign:"top",display:pn?"inline-block":"none"}},G.a.createElement(zr,Object.assign({className:"click-to-add-icon"},D(In,"addVarIcon"),{onClick:function(){var ti={name:bi>0?da:null,namespace:$r.splice(0,$r.length-1),existing_value:Oa,variable_removed:!1,key_name:null};j(Oa)==="object"?un.dispatch({name:"ADD_VARIABLE_KEY_REQUEST",rjvId:Ka,data:ti}):un.dispatch({name:"VARIABLE_ADDED",rjvId:Ka,data:M(M({},ti),{},{new_value:[].concat(Be(Oa),[null])})})}})))},St.getRemoveObject=function(pn){var en=St.props,In=en.theme,$r=(en.hover,en.namespace),da=en.name,Oa=en.src,Ka=en.rjvId;if($r.length!==1)return G.a.createElement("span",{className:"click-to-remove",style:{display:pn?"inline-block":"none"}},G.a.createElement(jr,Object.assign({className:"click-to-remove-icon"},D(In,"removeVarIcon"),{onClick:function(){un.dispatch({name:"VARIABLE_REMOVED",rjvId:Ka,data:{name:da,namespace:$r.splice(0,$r.length-1),existing_value:Oa,variable_removed:!0}})}})))},St.render=function(){var pn=St.props,en=pn.theme,In=pn.onDelete,$r=pn.onAdd,da=pn.enableClipboard,Oa=pn.src,Ka=pn.namespace,bi=pn.rowHovered;return G.a.createElement("div",Object.assign({},D(en,"object-meta-data"),{className:"object-meta-data",onClick:function(ti){ti.stopPropagation()}}),St.getObjectSize(),da?G.a.createElement(Pa,{rowHovered:bi,clickCallback:da,src:Oa,theme:en,namespace:Ka}):null,$r!==!1?St.getAddAttribute(bi):null,In!==!1?St.getRemoveObject(bi):null)},St}return Ne}(G.a.PureComponent);function ka(ot){var It=ot.parent_type,Ne=ot.namespace,St=ot.quotesOnKeys,Ve=ot.theme,Xt=ot.jsvRoot,gn=ot.name,pn=ot.displayArrayKey,en=ot.name?ot.name:"";return!Xt||gn!==!1&&gn!==null?It=="array"?pn?G.a.createElement("span",Object.assign({},D(Ve,"array-key"),{key:Ne}),G.a.createElement("span",{className:"array-key"},en),G.a.createElement("span",D(Ve,"colon"),":")):G.a.createElement("span",null):G.a.createElement("span",Object.assign({},D(Ve,"object-name"),{key:Ne}),G.a.createElement("span",{className:"object-key"},St&&G.a.createElement("span",{style:{verticalAlign:"top"}},'"'),G.a.createElement("span",null,en),St&&G.a.createElement("span",{style:{verticalAlign:"top"}},'"')),G.a.createElement("span",D(Ve,"colon"),":")):G.a.createElement("span",null)}function ai(ot){var It=ot.theme;switch(ot.iconStyle){case"triangle":return G.a.createElement(Cr,Object.assign({},D(It,"expanded-icon"),{className:"expanded-icon"}));case"square":return G.a.createElement(Bn,Object.assign({},D(It,"expanded-icon"),{className:"expanded-icon"}));default:return G.a.createElement(Rt,Object.assign({},D(It,"expanded-icon"),{className:"expanded-icon"}))}}function Qa(ot){var It=ot.theme;switch(ot.iconStyle){case"triangle":return G.a.createElement(Rn,Object.assign({},D(It,"collapsed-icon"),{className:"collapsed-icon"}));case"square":return G.a.createElement(Nr,Object.assign({},D(It,"collapsed-icon"),{className:"collapsed-icon"}));default:return G.a.createElement(Kt,Object.assign({},D(It,"collapsed-icon"),{className:"collapsed-icon"}))}}var aa=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(St){var Ve;return U(this,Ne),(Ve=It.call(this,St)).toggleCollapsed=function(Xt){var gn=[];for(var pn in Ve.state.expanded)gn.push(Ve.state.expanded[pn]);gn[Xt]=!gn[Xt],Ve.setState({expanded:gn})},Ve.state={expanded:[]},Ve}return $(Ne,[{key:"getExpandedIcon",value:function(Ve){var Xt=this.props,gn=Xt.theme,pn=Xt.iconStyle;return this.state.expanded[Ve]?G.a.createElement(ai,{theme:gn,iconStyle:pn}):G.a.createElement(Qa,{theme:gn,iconStyle:pn})}},{key:"render",value:function(){var Ve=this,Xt=this.props,gn=Xt.src,pn=Xt.groupArraysAfterLength,en=(Xt.depth,Xt.name),In=Xt.theme,$r=Xt.jsvRoot,da=Xt.namespace,Oa=(Xt.parent_type,ae(Xt,["src","groupArraysAfterLength","depth","name","theme","jsvRoot","namespace","parent_type"])),Ka=0,bi=5*this.props.indentWidth;$r||(Ka=5*this.props.indentWidth);var _a=pn,ti=Math.ceil(gn.length/_a);return G.a.createElement("div",Object.assign({className:"object-key-val"},D(In,$r?"jsv-root":"objectKeyVal",{paddingLeft:Ka})),G.a.createElement(ka,this.props),G.a.createElement("span",null,G.a.createElement(li,Object.assign({size:gn.length},this.props))),Be(Array(ti)).map(function(tn,mn){return G.a.createElement("div",Object.assign({key:mn,className:"object-key-val array-group"},D(In,"objectKeyVal",{marginLeft:6,paddingLeft:bi})),G.a.createElement("span",D(In,"brace-row"),G.a.createElement("div",Object.assign({className:"icon-container"},D(In,"icon-container"),{onClick:function(or){Ve.toggleCollapsed(mn)}}),Ve.getExpandedIcon(mn)),Ve.state.expanded[mn]?G.a.createElement(sa,Object.assign({key:en+mn,depth:0,name:!1,collapsed:!1,groupArraysAfterLength:_a,index_offset:mn*_a,src:gn.slice(mn*_a,mn*_a+_a),namespace:da,type:"array",parent_type:"array_group",theme:In},Oa)):G.a.createElement("span",Object.assign({},D(In,"brace"),{onClick:function(or){Ve.toggleCollapsed(mn)},className:"array-group-brace"}),"[",G.a.createElement("div",Object.assign({},D(In,"array-group-meta-data"),{className:"array-group-meta-data"}),G.a.createElement("span",Object.assign({className:"object-size"},D(In,"object-size")),mn*_a," - ",mn*_a+_a>gn.length?gn.length:mn*_a+_a)),"]")))}))}}]),Ne}(G.a.PureComponent),Gi=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(St){var Ve;U(this,Ne),(Ve=It.call(this,St)).toggleCollapsed=function(){Ve.setState({expanded:!Ve.state.expanded},function(){Fn.set(Ve.props.rjvId,Ve.props.namespace,"expanded",Ve.state.expanded)})},Ve.getObjectContent=function(gn,pn,en){return G.a.createElement("div",{className:"pushed-content object-container"},G.a.createElement("div",Object.assign({className:"object-content"},D(Ve.props.theme,"pushed-content")),Ve.renderObjectContents(pn,en)))},Ve.getEllipsis=function(){return Ve.state.size===0?null:G.a.createElement("div",Object.assign({},D(Ve.props.theme,"ellipsis"),{className:"node-ellipsis",onClick:Ve.toggleCollapsed}),"...")},Ve.getObjectMetaData=function(gn){var pn=Ve.props,en=(pn.rjvId,pn.theme,Ve.state),In=en.size,$r=en.hovered;return G.a.createElement(li,Object.assign({rowHovered:$r,size:In},Ve.props))},Ve.renderObjectContents=function(gn,pn){var en,In=Ve.props,$r=In.depth,da=In.parent_type,Oa=In.index_offset,Ka=In.groupArraysAfterLength,bi=In.namespace,_a=Ve.state.object_type,ti=[],tn=Object.keys(gn||{});return Ve.props.sortKeys&&_a!=="array"&&(tn=tn.sort()),tn.forEach(function(mn){if(en=new mo(mn,gn[mn]),da==="array_group"&&Oa&&(en.name=parseInt(en.name)+Oa),gn.hasOwnProperty(mn))if(en.type==="object")ti.push(G.a.createElement(sa,Object.assign({key:en.name,depth:$r+1,name:en.name,src:en.value,namespace:bi.concat(en.name),parent_type:_a},pn)));else if(en.type==="array"){var nr=sa;Ka&&en.value.length>Ka&&(nr=aa),ti.push(G.a.createElement(nr,Object.assign({key:en.name,depth:$r+1,name:en.name,src:en.value,namespace:bi.concat(en.name),type:"array",parent_type:_a},pn)))}else ti.push(G.a.createElement(ri,Object.assign({key:en.name+"_"+bi,variable:en,singleIndent:5,namespace:bi,type:Ve.props.type},pn)))}),ti};var Xt=Ne.getState(St);return Ve.state=M(M({},Xt),{},{prevProps:{}}),Ve}return $(Ne,[{key:"getBraceStart",value:function(Ve,Xt){var gn=this,pn=this.props,en=pn.src,In=pn.theme,$r=pn.iconStyle;if(pn.parent_type==="array_group")return G.a.createElement("span",null,G.a.createElement("span",D(In,"brace"),Ve==="array"?"[":"{"),Xt?this.getObjectMetaData(en):null);var da=Xt?ai:Qa;return G.a.createElement("span",null,G.a.createElement("span",Object.assign({onClick:function(Ka){gn.toggleCollapsed()}},D(In,"brace-row")),G.a.createElement("div",Object.assign({className:"icon-container"},D(In,"icon-container")),G.a.createElement(da,{theme:In,iconStyle:$r})),G.a.createElement(ka,this.props),G.a.createElement("span",D(In,"brace"),Ve==="array"?"[":"{")),Xt?this.getObjectMetaData(en):null)}},{key:"render",value:function(){var Ve=this,Xt=this.props,gn=Xt.depth,pn=Xt.src,en=(Xt.namespace,Xt.name,Xt.type,Xt.parent_type),In=Xt.theme,$r=Xt.jsvRoot,da=Xt.iconStyle,Oa=ae(Xt,["depth","src","namespace","name","type","parent_type","theme","jsvRoot","iconStyle"]),Ka=this.state,bi=Ka.object_type,_a=Ka.expanded,ti={};return $r||en==="array_group"?en==="array_group"&&(ti.borderLeft=0,ti.display="inline"):ti.paddingLeft=5*this.props.indentWidth,G.a.createElement("div",Object.assign({className:"object-key-val",onMouseEnter:function(){return Ve.setState(M(M({},Ve.state),{},{hovered:!0}))},onMouseLeave:function(){return Ve.setState(M(M({},Ve.state),{},{hovered:!1}))}},D(In,$r?"jsv-root":"objectKeyVal",ti)),this.getBraceStart(bi,_a),_a?this.getObjectContent(gn,pn,M({theme:In,iconStyle:da},Oa)):this.getEllipsis(),G.a.createElement("span",{className:"brace-row"},G.a.createElement("span",{style:M(M({},D(In,"brace").style),{},{paddingLeft:_a?"3px":"0px"})},bi==="array"?"]":"}"),_a?null:this.getObjectMetaData(pn)))}}],[{key:"getDerivedStateFromProps",value:function(Ve,Xt){var gn=Xt.prevProps;return Ve.src!==gn.src||Ve.collapsed!==gn.collapsed||Ve.name!==gn.name||Ve.namespace!==gn.namespace||Ve.rjvId!==gn.rjvId?M(M({},Ne.getState(Ve)),{},{prevProps:Ve}):null}}]),Ne}(G.a.PureComponent);Gi.getState=function(ot){var It=Object.keys(ot.src).length,Ne=(ot.collapsed===!1||ot.collapsed!==!0&&ot.collapsed>ot.depth)&&(!ot.shouldCollapse||ot.shouldCollapse({name:ot.name,src:ot.src,type:j(ot.src),namespace:ot.namespace})===!1)&&It!==0;return{expanded:Fn.get(ot.rjvId,ot.namespace,"expanded",Ne),object_type:ot.type==="array"?"array":"object",parent_type:ot.type==="array"?"array":"object",size:It,hovered:!1}};var mo=function ot(It,Ne){U(this,ot),this.name=It,this.value=Ne,this.type=j(Ne)};ve(Gi);var sa=Gi,yi=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){var St;U(this,Ne);for(var Ve=arguments.length,Xt=new Array(Ve),gn=0;gn<Ve;gn++)Xt[gn]=arguments[gn];return(St=It.call.apply(It,[this].concat(Xt))).render=function(){var pn=ie(St).props,en=[pn.name],In=sa;return Array.isArray(pn.src)&&pn.groupArraysAfterLength&&pn.src.length>pn.groupArraysAfterLength&&(In=aa),G.a.createElement("div",{className:"pretty-json-container object-container"},G.a.createElement("div",{className:"object-content"},G.a.createElement(In,Object.assign({namespace:en,depth:0,jsvRoot:!0},pn))))},St}return Ne}(G.a.PureComponent),Io=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(St){var Ve;return U(this,Ne),(Ve=It.call(this,St)).closeModal=function(){un.dispatch({rjvId:Ve.props.rjvId,name:"RESET"})},Ve.submit=function(){Ve.props.submit(Ve.state.input)},Ve.state={input:St.input?St.input:""},Ve}return $(Ne,[{key:"render",value:function(){var Ve=this,Xt=this.props,gn=Xt.theme,pn=Xt.rjvId,en=Xt.isValid,In=this.state.input,$r=en(In);return G.a.createElement("div",Object.assign({className:"key-modal-request"},D(gn,"key-modal-request"),{onClick:this.closeModal}),G.a.createElement("div",Object.assign({},D(gn,"key-modal"),{onClick:function(Oa){Oa.stopPropagation()}}),G.a.createElement("div",D(gn,"key-modal-label"),"Key Name:"),G.a.createElement("div",{style:{position:"relative"}},G.a.createElement("input",Object.assign({},D(gn,"key-modal-input"),{className:"key-modal-input",ref:function(Oa){return Oa&&Oa.focus()},spellCheck:!1,value:In,placeholder:"...",onChange:function(Oa){Ve.setState({input:Oa.target.value})},onKeyPress:function(Oa){$r&&Oa.key==="Enter"?Ve.submit():Oa.key==="Escape"&&Ve.closeModal()}})),$r?G.a.createElement(Za,Object.assign({},D(gn,"key-modal-submit"),{className:"key-modal-submit",onClick:function(Oa){return Ve.submit()}})):null),G.a.createElement("span",D(gn,"key-modal-cancel"),G.a.createElement(Ua,Object.assign({},D(gn,"key-modal-cancel-icon"),{className:"key-modal-cancel",onClick:function(){un.dispatch({rjvId:pn,name:"RESET"})}})))))}}]),Ne}(G.a.PureComponent),Pi=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){var St;U(this,Ne);for(var Ve=arguments.length,Xt=new Array(Ve),gn=0;gn<Ve;gn++)Xt[gn]=arguments[gn];return(St=It.call.apply(It,[this].concat(Xt))).isValid=function(pn){var en=St.props.rjvId,In=Fn.get(en,"action","new-key-request");return pn!=""&&Object.keys(In.existing_value).indexOf(pn)===-1},St.submit=function(pn){var en=St.props.rjvId,In=Fn.get(en,"action","new-key-request");In.new_value=M({},In.existing_value),In.new_value[pn]=St.props.defaultValue,un.dispatch({name:"VARIABLE_ADDED",rjvId:en,data:In})},St}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.active,gn=Ve.theme,pn=Ve.rjvId;return Xt?G.a.createElement(Io,{rjvId:pn,theme:gn,isValid:this.isValid,submit:this.submit}):null}}]),Ne}(G.a.PureComponent),ao=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(){return U(this,Ne),It.apply(this,arguments)}return $(Ne,[{key:"render",value:function(){var Ve=this.props,Xt=Ve.message,gn=Ve.active,pn=Ve.theme,en=Ve.rjvId;return gn?G.a.createElement("div",Object.assign({className:"validation-failure"},D(pn,"validation-failure"),{onClick:function(){un.dispatch({rjvId:en,name:"RESET"})}}),G.a.createElement("span",D(pn,"validation-failure-label"),Xt),G.a.createElement(Ua,D(pn,"validation-failure-clear"))):null}}]),Ne}(G.a.PureComponent),ki=function(ot){Y(Ne,ot);var It=J(Ne);function Ne(St){var Ve;return U(this,Ne),(Ve=It.call(this,St)).rjvId=Date.now().toString(),Ve.getListeners=function(){return{reset:Ve.resetState,"variable-update":Ve.updateSrc,"add-key-request":Ve.addKeyRequest}},Ve.updateSrc=function(){var Xt,gn=Fn.get(Ve.rjvId,"action","variable-update"),pn=gn.name,en=gn.namespace,In=gn.new_value,$r=gn.existing_value,da=(gn.variable_removed,gn.updated_src),Oa=gn.type,Ka=Ve.props,bi=Ka.onEdit,_a=Ka.onDelete,ti=Ka.onAdd,tn={existing_src:Ve.state.src,new_value:In,updated_src:da,name:pn,namespace:en,existing_value:$r};switch(Oa){case"variable-added":Xt=ti(tn);break;case"variable-edited":Xt=bi(tn);break;case"variable-removed":Xt=_a(tn)}Xt!==!1?(Fn.set(Ve.rjvId,"global","src",da),Ve.setState({src:da})):Ve.setState({validationFailure:!0})},Ve.addKeyRequest=function(){Ve.setState({addKeyRequest:!0})},Ve.resetState=function(){Ve.setState({validationFailure:!1,addKeyRequest:!1})},Ve.state={addKeyRequest:!1,editKeyRequest:!1,validationFailure:!1,src:Ne.defaultProps.src,name:Ne.defaultProps.name,theme:Ne.defaultProps.theme,validationMessage:Ne.defaultProps.validationMessage,prevSrc:Ne.defaultProps.src,prevName:Ne.defaultProps.name,prevTheme:Ne.defaultProps.theme},Ve}return $(Ne,[{key:"componentDidMount",value:function(){Fn.set(this.rjvId,"global","src",this.state.src);var Ve=this.getListeners();for(var Xt in Ve)Fn.on(Xt+"-"+this.rjvId,Ve[Xt]);this.setState({addKeyRequest:!1,editKeyRequest:!1})}},{key:"componentDidUpdate",value:function(Ve,Xt){Xt.addKeyRequest!==!1&&this.setState({addKeyRequest:!1}),Xt.editKeyRequest!==!1&&this.setState({editKeyRequest:!1}),Ve.src!==this.state.src&&Fn.set(this.rjvId,"global","src",this.state.src)}},{key:"componentWillUnmount",value:function(){var Ve=this.getListeners();for(var Xt in Ve)Fn.removeListener(Xt+"-"+this.rjvId,Ve[Xt])}},{key:"render",value:function(){var Ve=this.state,Xt=Ve.validationFailure,gn=Ve.validationMessage,pn=Ve.addKeyRequest,en=Ve.theme,In=Ve.src,$r=Ve.name,da=this.props,Oa=da.style,Ka=da.defaultValue;return G.a.createElement("div",{className:"react-json-view",style:M(M({},D(en,"app-container").style),Oa)},G.a.createElement(ao,{message:gn,active:Xt,theme:en,rjvId:this.rjvId}),G.a.createElement(yi,Object.assign({},this.props,{src:In,name:$r,theme:en,type:j(In),rjvId:this.rjvId})),G.a.createElement(Pi,{active:pn,theme:en,rjvId:this.rjvId,defaultValue:Ka}))}}],[{key:"getDerivedStateFromProps",value:function(Ve,Xt){if(Ve.src!==Xt.prevSrc||Ve.name!==Xt.prevName||Ve.theme!==Xt.prevTheme){var gn={src:Ve.src,name:Ve.name,theme:Ve.theme,validationMessage:Ve.validationMessage,prevSrc:Ve.src,prevName:Ve.name,prevTheme:Ve.theme};return Ne.validateState(gn)}return null}}]),Ne}(G.a.PureComponent);ki.defaultProps={src:{},name:"root",theme:"rjv-default",collapsed:!1,collapseStringsAfterLength:!1,shouldCollapse:!1,sortKeys:!1,quotesOnKeys:!0,groupArraysAfterLength:100,indentWidth:4,enableClipboard:!0,displayObjectSize:!0,displayDataTypes:!0,onEdit:!1,onDelete:!1,onAdd:!1,onSelect:!1,iconStyle:"triangle",style:{},validationMessage:"Validation Error",defaultValue:null,displayArrayKey:!0},ki.validateState=function(ot){var It={};return j(ot.theme)!=="object"||function(Ne){var St=["base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F"];if(j(Ne)==="object"){for(var Ve=0;Ve<St.length;Ve++)if(!(St[Ve]in Ne))return!1;return!0}return!1}(ot.theme)||(console.error("react-json-view error:","theme prop must be a theme name or valid base-16 theme object.",'defaulting to "rjv-default" theme'),It.theme="rjv-default"),j(ot.src)!=="object"&&j(ot.src)!=="array"&&(console.error("react-json-view error:","src property must be a valid json object"),It.name="ERROR",It.src={message:"src property must be a valid json object"}),M(M({},ot),It)},ve(ki),S.default=ki}])})},"oy+k":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Context=void 0;var B=h("d9O0"),p=function(){function S(E){this.id=B.id(),this.container=E}return S.prototype.addPlan=function(E){this.plan=E},S.prototype.setCurrentRequest=function(E){this.currentRequest=E},S}();R.Context=p},p8yl:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.red=void 0;var B=h("xkGU"),p=A(B),S=h("lMfh"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}R.default={simpleCheckForValidColor:function(U){var V=["r","g","b","a","h","s","l","v"],$=0,W=0;return(0,p.default)(V,function(Y){if(U[Y]&&($+=1,isNaN(U[Y])||(W+=1),Y==="s"||Y==="l")){var ee=/^\d+%$/;ee.test(U[Y])&&(W+=1)}}),$===W?U:!1},toState:function(U,V){var $=U.hex?(0,E.default)(U.hex):(0,E.default)(U),W=$.toHsl(),Y=$.toHsv(),ee=$.toRgb(),ne=$.toHex();W.s===0&&(W.h=V||0,Y.h=V||0);var ie=ne==="000000"&&ee.a===0;return{hsl:W,hex:ie?"transparent":"#"+ne,rgb:ee,hsv:Y,oldHue:U.h||V||W.h,source:U.source}},isValidHex:function(U){var V=String(U).charAt(0)==="#"?1:0;return U.length!==4+V&&U.length<7+V&&(0,E.default)(U).isValid()},getContrastingColor:function(U){if(!U)return"#fff";var V=this.toState(U);if(V.hex==="transparent")return"rgba(0,0,0,0.4)";var $=(V.rgb.r*299+V.rgb.g*587+V.rgb.b*114)/1e3;return $>=128?"#000":"#fff"}};var k=R.red={hsl:{a:1,h:0,l:.5,s:1},hex:"#ff0000",rgb:{r:255,g:0,b:0,a:1},hsv:{h:0,s:1,v:1,a:1}}},ph3A:function(ge,R,h){"use strict";h.d(R,"a",function(){return fe});var B=h("lSNA"),p=h.n(B),S=h("lwsE"),E=h.n(S),A=h("W8MJ"),k=h.n(A),M=h("PJYZ"),U=h.n(M),V=h("7W2i"),$=h.n(V),W=h("a1gu"),Y=h.n(W),ee=h("Nsbk"),ne=h.n(ee),ie=h("Gj0h"),re=h("oDt1");function J(se,ve){var ae=Object.keys(se);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(se);ve&&(j=j.filter(function(de){return Object.getOwnPropertyDescriptor(se,de).enumerable})),ae.push.apply(ae,j)}return ae}function ce(se){for(var ve=1;ve<arguments.length;ve++){var ae=arguments[ve]!=null?arguments[ve]:{};ve%2?J(Object(ae),!0).forEach(function(j){p()(se,j,ae[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(se,Object.getOwnPropertyDescriptors(ae)):J(Object(ae)).forEach(function(j){Object.defineProperty(se,j,Object.getOwnPropertyDescriptor(ae,j))})}return se}function G(se){var ve=Z();return function(){var j=ne()(se),de;if(ve){var ke=ne()(this).constructor;de=Reflect.construct(j,arguments,ke)}else de=j.apply(this,arguments);return Y()(this,de)}}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(se){return!1}}var fe=function(se){$()(ae,se);var ve=G(ae);function ae(j){var de;return E()(this,ae),de=ve.call(this,j),de.vertexShaderGLSL=void 0,de.fragmentShaderGLSL=void 0,de.defines={},de.dirty=!0,de.uniforms=[],de.cull={enable:!0,face:ie.gl.BACK},de.depth={enable:!0},de.blend=void 0,de.entity=void 0,de.type=void 0,Object.assign(U()(de),j),de}return k()(ae,[{key:"setDefines",value:function(de){return this.defines=ce(ce({},this.defines),de),this}},{key:"setCull",value:function(de){return this.cull=de,this}},{key:"setDepth",value:function(de){return this.depth=de,this}},{key:"setBlend",value:function(de){return this.blend=de,this}},{key:"setUniform",value:function(de,ke){var he=this;if(typeof de!="string")return Object.keys(de).forEach(function(We){return he.setUniform(We,de[We])}),this;var Oe=this.uniforms.find(function(We){return We.name===de});return Oe?(Oe.dirty=!0,Oe.data=ke):this.uniforms.push({name:de,dirty:!0,data:ke}),this.dirty=!0,this}}]),ae}(re.a)},plQd:function(ge,R,h){ge.exports=h("C3Dj")},qK8v:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.isStackOverflowExeption=void 0;var B=h("MON2");function p(S){return S instanceof RangeError||S.message===B.STACK_OVERFLOW}R.isStackOverflowExeption=p},qPyV:function(ge,R,h){var B=h("ut/Y"),p=h("LGYb");function S(E,A){return E&&E.length?p(E,B(A,2)):[]}ge.exports=S},qfsk:function(ge,R,h){"use strict";h.d(R,"b",function(){return V}),h.d(R,"a",function(){return $});var B=h("J4zp"),p=h.n(B),S=h("lwsE"),E=h.n(S),A=h("W8MJ"),k=h.n(A),M=h("IOcx"),U=h("cXWL"),V;(function(W){W[W.OUTSIDE=4294967295]="OUTSIDE",W[W.INSIDE=0]="INSIDE",W[W.INDETERMINATE=2147483647]="INDETERMINATE"})(V||(V={}));var $=function(){function W(Y){if(E()(this,W),this.planes=[],Y)this.planes=Y;else for(var ee=0;ee<6;ee++)this.planes.push(new U.a)}return k()(W,[{key:"extractFromVPMatrix",value:function(ee){var ne=p()(ee,16),ie=ne[0],re=ne[1],J=ne[2],ce=ne[3],G=ne[4],Z=ne[5],fe=ne[6],se=ne[7],ve=ne[8],ae=ne[9],j=ne[10],de=ne[11],ke=ne[12],he=ne[13],Oe=ne[14],We=ne[15];M.d.set(this.planes[0].normal,ce-ie,se-G,de-ve),this.planes[0].distance=-(We-ke),M.d.set(this.planes[1].normal,ce+ie,se+G,de+ve),this.planes[1].distance=-(We+ke),M.d.set(this.planes[2].normal,ce+re,se+Z,de+ae),this.planes[2].distance=-(We+he),M.d.set(this.planes[3].normal,ce-re,se-Z,de-ae),this.planes[3].distance=-(We-he),M.d.set(this.planes[4].normal,ce-J,se-fe,de-j),this.planes[4].distance=-(We-Oe),M.d.set(this.planes[5].normal,ce+J,se+fe,de+j),this.planes[5].distance=-(We+Oe),this.planes.forEach(function(D){D.normalize(),D.updatePNVertexFlag()})}}]),W}()},"ql/k":function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=Object.assign||function(M){for(var U=1;U<arguments.length;U++){var V=arguments[U];for(var $ in V)Object.prototype.hasOwnProperty.call(V,$)&&(M[$]=V[$])}return M},p=h("q1tI"),S=E(p);function E(M){return M&&M.__esModule?M:{default:M}}function A(M,U){var V={};for(var $ in M)U.indexOf($)>=0||!Object.prototype.hasOwnProperty.call(M,$)||(V[$]=M[$]);return V}var k=24;R.default=function(M){var U=M.fill,V=U===void 0?"currentColor":U,$=M.width,W=$===void 0?k:$,Y=M.height,ee=Y===void 0?k:Y,ne=M.style,ie=ne===void 0?{}:ne,re=A(M,["fill","width","height","style"]);return S.default.createElement("svg",B({viewBox:"0 0 "+k+" "+k,style:B({fill:V,width:W,height:ee},ie)},re),S.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},qo7Q:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.AlphaPicker=void 0;var B=Object.assign||function(W){for(var Y=1;Y<arguments.length;Y++){var ee=arguments[Y];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(W[ne]=ee[ne])}return W},p=h("q1tI"),S=V(p),E=h("/FUP"),A=V(E),k=h("TM95"),M=h("Syy6"),U=V(M);function V(W){return W&&W.__esModule?W:{default:W}}var $=R.AlphaPicker=function(Y){var ee=Y.rgb,ne=Y.hsl,ie=Y.width,re=Y.height,J=Y.onChange,ce=Y.direction,G=Y.style,Z=Y.renderers,fe=Y.pointer,se=Y.className,ve=se===void 0?"":se,ae=(0,A.default)({default:{picker:{position:"relative",width:ie,height:re},alpha:{radius:"2px",style:G}}});return S.default.createElement("div",{style:ae.picker,className:"alpha-picker "+ve},S.default.createElement(k.Alpha,B({},ae.alpha,{rgb:ee,hsl:ne,pointer:fe,renderers:Z,onChange:J,direction:ce})))};$.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:U.default},R.default=(0,k.ColorWrap)($)},r3hA:function(ge,R,h){},r5xO:function(ge,R){ge.exports=function(E){return h(B(E),E)},ge.exports.array=h;function h(E,A){var k=E.length,M=new Array(k),U={},V=k,$=p(A),W=S(E);for(A.forEach(function(ee){if(!W.has(ee[0])||!W.has(ee[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});V--;)U[V]||Y(E[V],V,new Set);return M;function Y(ee,ne,ie){if(ie.has(ee)){var re;try{re=", node was:"+JSON.stringify(ee)}catch(G){re=""}throw new Error("Cyclic dependency"+re)}if(!W.has(ee))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(ee));if(!U[ne]){U[ne]=!0;var J=$.get(ee)||new Set;if(J=Array.from(J),ne=J.length){ie.add(ee);do{var ce=J[--ne];Y(ce,W.get(ce),ie)}while(ne);ie.delete(ee)}M[--k]=ee}}}function B(E){for(var A=new Set,k=0,M=E.length;k<M;k++){var U=E[k];A.add(U[0]),A.add(U[1])}return Array.from(A)}function p(E){for(var A=new Map,k=0,M=E.length;k<M;k++){var U=E[k];A.has(U[0])||A.set(U[0],new Set),A.has(U[1])||A.set(U[1],new Set),A.get(U[0]).add(U[1])}return A}function S(E){for(var A=new Map,k=0,M=E.length;k<M;k++)A.set(E[k],k);return A}},"rAM+":function(ge,R,h){"use strict";h.d(R,"a",function(){return p});var B=h("Qw5x");function p(S,E){var A=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!A){if(Array.isArray(S)||(A=Object(B.a)(S))||E&&S&&typeof S.length=="number"){A&&(S=A);var k=0,M=function(){};return{s:M,n:function(){return k>=S.length?{done:!0}:{done:!1,value:S[k++]}},e:function(Y){throw Y},f:M}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var U=!0,V=!1,$;return{s:function(){A=A.call(S)},n:function(){var Y=A.next();return U=Y.done,Y},e:function(Y){V=!0,$=Y},f:function(){try{!U&&A.return!=null&&A.return()}finally{if(V)throw $}}}}},rJ8t:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Block=void 0;var B=h("q1tI"),p=ne(B),S=h("17x9"),E=ne(S),A=h("/FUP"),k=ne(A),M=h("QkVN"),U=ne(M),V=h("p8yl"),$=ne(V),W=h("TM95"),Y=h("uDUr"),ee=ne(Y);function ne(re){return re&&re.__esModule?re:{default:re}}var ie=R.Block=function(J){var ce=J.onChange,G=J.onSwatchHover,Z=J.hex,fe=J.colors,se=J.width,ve=J.triangle,ae=J.styles,j=ae===void 0?{}:ae,de=J.className,ke=de===void 0?"":de,he=Z==="transparent",Oe=function(je,pt){$.default.isValidHex(je)&&ce({hex:je,source:"hex"},pt)},We=(0,k.default)((0,U.default)({default:{card:{width:se,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:Z,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:$.default.getContrastingColor(Z),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+Z+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},j),{"hide-triangle":ve==="hide"});return p.default.createElement("div",{style:We.card,className:"block-picker "+ke},p.default.createElement("div",{style:We.triangle}),p.default.createElement("div",{style:We.head},he&&p.default.createElement(W.Checkboard,{borderRadius:"6px 6px 0 0"}),p.default.createElement("div",{style:We.label},Z)),p.default.createElement("div",{style:We.body},p.default.createElement(ee.default,{colors:fe,onClick:Oe,onSwatchHover:G}),p.default.createElement(W.EditableInput,{style:{input:We.input},value:Z,onChange:Oe})))};ie.propTypes={width:E.default.oneOfType([E.default.string,E.default.number]),colors:E.default.arrayOf(E.default.string),triangle:E.default.oneOf(["top","hide"]),styles:E.default.object},ie.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},R.default=(0,W.ColorWrap)(ie)},s2cm:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M736 550H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208 130c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zM736 266H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16zm-56 136H344v-64h336v64zm208-194c39.8 0 72-32.2 72-72s-32.2-72-72-72-72 32.2-72 72 32.2 72 72 72zm0-96c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 64c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0 656c-39.8 0-72 32.2-72 72s32.2 72 72 72 72-32.2 72-72-32.2-72-72-72zm0 96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}}]},name:"ungroup",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="UngroupOutlined";var M=R.a=p.forwardRef(k)},s8Cx:function(ge,R,h){var B=h("3z9K");ge.exports=S;var p=B.constant(1);function S(A,k,M){return E(A,k||p,M||function(U){return A.outEdges(U)})}function E(A,k,M){var U={},V=A.nodes();return V.forEach(function($){U[$]={},U[$][$]={distance:0},V.forEach(function(W){$!==W&&(U[$][W]={distance:Number.POSITIVE_INFINITY})}),M($).forEach(function(W){var Y=W.v===$?W.w:W.v,ee=k(W);U[$][Y]={distance:ee,predecessor:$}})}),V.forEach(function($){var W=U[$];V.forEach(function(Y){var ee=U[Y];V.forEach(function(ne){var ie=ee[$],re=W[ne],J=ee[ne],ce=ie.distance+re.distance;ce<J.distance&&(J.distance=ce,J.predecessor=re.predecessor)})})}),U}},sE09:function(ge,R,h){},sVjb:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.PhotoshopPointerCircle=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.PhotoshopPointerCircle=function(){var U=(0,E.default)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return p.default.createElement("div",{style:U.pointer},p.default.createElement("div",{style:U.left},p.default.createElement("div",{style:U.leftInside})),p.default.createElement("div",{style:U.right},p.default.createElement("div",{style:U.rightInside})))};R.default=k},sfHF:function(ge,R,h){},si6p:function(ge,R,h){var B,p,S;/*!
* jQuery Mousewheel 3.1.13
*
* Copyright jQuery Foundation and other contributors
* Released under the MIT license
* http://jquery.org/license
*/(function(E){p=[h("EVdn")],B=E,S=typeof B=="function"?B.apply(R,p):B,S!==void 0&&(ge.exports=S)})(function(E){var A=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],k="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],M=Array.prototype.slice,U,V;if(E.event.fixHooks)for(var $=A.length;$;)E.event.fixHooks[A[--$]]=E.event.mouseHooks;var W=E.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var re=k.length;re;)this.addEventListener(k[--re],Y,!1);else this.onmousewheel=Y;E.data(this,"mousewheel-line-height",W.getLineHeight(this)),E.data(this,"mousewheel-page-height",W.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var re=k.length;re;)this.removeEventListener(k[--re],Y,!1);else this.onmousewheel=null;E.removeData(this,"mousewheel-line-height"),E.removeData(this,"mousewheel-page-height")},getLineHeight:function(re){var J=E(re),ce=J["offsetParent"in E.fn?"offsetParent":"parent"]();return ce.length||(ce=E("body")),parseInt(ce.css("fontSize"),10)||parseInt(J.css("fontSize"),10)||16},getPageHeight:function(re){return E(re).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};E.fn.extend({mousewheel:function(re){return re?this.bind("mousewheel",re):this.trigger("mousewheel")},unmousewheel:function(re){return this.unbind("mousewheel",re)}});function Y(ie){var re=ie||window.event,J=M.call(arguments,1),ce=0,G=0,Z=0,fe=0,se=0,ve=0;if(ie=E.event.fix(re),ie.type="mousewheel","detail"in re&&(Z=re.detail*-1),"wheelDelta"in re&&(Z=re.wheelDelta),"wheelDeltaY"in re&&(Z=re.wheelDeltaY),"wheelDeltaX"in re&&(G=re.wheelDeltaX*-1),"axis"in re&&re.axis===re.HORIZONTAL_AXIS&&(G=Z*-1,Z=0),ce=Z===0?G:Z,"deltaY"in re&&(Z=re.deltaY*-1,ce=Z),"deltaX"in re&&(G=re.deltaX,Z===0&&(ce=G*-1)),!(Z===0&&G===0)){if(re.deltaMode===1){var ae=E.data(this,"mousewheel-line-height");ce*=ae,Z*=ae,G*=ae}else if(re.deltaMode===2){var j=E.data(this,"mousewheel-page-height");ce*=j,Z*=j,G*=j}if(fe=Math.max(Math.abs(Z),Math.abs(G)),(!V||fe<V)&&(V=fe,ne(re,fe)&&(V/=40)),ne(re,fe)&&(ce/=40,G/=40,Z/=40),ce=Math[ce>=1?"floor":"ceil"](ce/V),G=Math[G>=1?"floor":"ceil"](G/V),Z=Math[Z>=1?"floor":"ceil"](Z/V),W.settings.normalizeOffset&&this.getBoundingClientRect){var de=this.getBoundingClientRect();se=ie.clientX-de.left,ve=ie.clientY-de.top}return ie.deltaX=G,ie.deltaY=Z,ie.deltaFactor=V,ie.offsetX=se,ie.offsetY=ve,ie.deltaMode=0,J.unshift(ie,ce,G,Z),U&&clearTimeout(U),U=setTimeout(ee,200),(E.event.dispatch||E.event.handle).apply(this,J)}}function ee(){V=null}function ne(ie,re){return W.settings.adjustOldDeltas&&ie.type==="mousewheel"&&re%120==0}})},sj7I:function(ge,R){ge.exports=h;function h(B,p,S){var E=Math.cos(S),A=Math.sin(S),k=p[0],M=p[1];return B[0]=k*E-M*A,B[1]=k*A+M*E,B}},srvI:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var B=R.calculateChange=function(S,E,A,k){S.preventDefault();var M=k.clientWidth,U=k.clientHeight,V=typeof S.pageX=="number"?S.pageX:S.touches[0].pageX,$=typeof S.pageY=="number"?S.pageY:S.touches[0].pageY,W=V-(k.getBoundingClientRect().left+window.pageXOffset),Y=$-(k.getBoundingClientRect().top+window.pageYOffset);if(E==="vertical"){var ee=void 0;if(Y<0)ee=359;else if(Y>U)ee=0;else{var ne=-(Y*100/U)+100;ee=360*ne/100}if(A.h!==ee)return{h:ee,s:A.s,l:A.l,a:A.a,source:"rgb"}}else{var ie=void 0;if(W<0)ie=0;else if(W>M)ie=359;else{var re=W*100/M;ie=360*re/100}if(A.h!==ie)return{h:ie,s:A.s,l:A.l,a:A.a,source:"rgb"}}return null}},swpM:function(ge,R,h){var B=h("3z9K");ge.exports=p,p.CycleException=S;function p(E){var A={},k={},M=[];function U(V){if(B.has(k,V))throw new S;B.has(A,V)||(k[V]=!0,A[V]=!0,B.each(E.predecessors(V),U),delete k[V],M.push(V))}if(B.each(E.sinks(),U),B.size(A)!==E.nodeCount())throw new S;return M}function S(){}},t8N9:function(ge,R){ge.exports=h;function h(B,p){var S=p[0],E=p[1],A=S*S+E*E;return A>0&&(A=1/Math.sqrt(A),B[0]=p[0]*A,B[1]=p[1]*A),B}},t8r4:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Swatches=void 0;var B=h("q1tI"),p=G(B),S=h("17x9"),E=G(S),A=h("/FUP"),k=G(A),M=h("3WF5"),U=G(M),V=h("QkVN"),$=G(V),W=h("p8yl"),Y=G(W),ee=h("wME1"),ne=ce(ee),ie=h("TM95"),re=h("Efrf"),J=G(re);function ce(fe){if(fe&&fe.__esModule)return fe;var se={};if(fe!=null)for(var ve in fe)Object.prototype.hasOwnProperty.call(fe,ve)&&(se[ve]=fe[ve]);return se.default=fe,se}function G(fe){return fe&&fe.__esModule?fe:{default:fe}}var Z=R.Swatches=function(se){var ve=se.width,ae=se.height,j=se.onChange,de=se.onSwatchHover,ke=se.colors,he=se.hex,Oe=se.styles,We=Oe===void 0?{}:Oe,D=se.className,je=D===void 0?"":D,pt=(0,k.default)((0,$.default)({default:{picker:{width:ve,height:ae},overflow:{height:ae,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},We)),nt=function(Gt,$e){Y.default.isValidHex(Gt)&&j({hex:Gt,source:"hex"},$e)};return p.default.createElement("div",{style:pt.picker,className:"swatches-picker "+je},p.default.createElement(ie.Raised,null,p.default.createElement("div",{style:pt.overflow},p.default.createElement("div",{style:pt.body},(0,U.default)(ke,function(Lt){return p.default.createElement(J.default,{key:Lt.toString(),group:Lt,active:he,onClick:nt,onSwatchHover:de})}),p.default.createElement("div",{style:pt.clear})))))};Z.propTypes={width:E.default.oneOfType([E.default.string,E.default.number]),height:E.default.oneOfType([E.default.string,E.default.number]),colors:E.default.arrayOf(E.default.arrayOf(E.default.string)),styles:E.default.object},Z.defaultProps={width:320,height:240,colors:[[ne.red["900"],ne.red["700"],ne.red["500"],ne.red["300"],ne.red["100"]],[ne.pink["900"],ne.pink["700"],ne.pink["500"],ne.pink["300"],ne.pink["100"]],[ne.purple["900"],ne.purple["700"],ne.purple["500"],ne.purple["300"],ne.purple["100"]],[ne.deepPurple["900"],ne.deepPurple["700"],ne.deepPurple["500"],ne.deepPurple["300"],ne.deepPurple["100"]],[ne.indigo["900"],ne.indigo["700"],ne.indigo["500"],ne.indigo["300"],ne.indigo["100"]],[ne.blue["900"],ne.blue["700"],ne.blue["500"],ne.blue["300"],ne.blue["100"]],[ne.lightBlue["900"],ne.lightBlue["700"],ne.lightBlue["500"],ne.lightBlue["300"],ne.lightBlue["100"]],[ne.cyan["900"],ne.cyan["700"],ne.cyan["500"],ne.cyan["300"],ne.cyan["100"]],[ne.teal["900"],ne.teal["700"],ne.teal["500"],ne.teal["300"],ne.teal["100"]],["#194D33",ne.green["700"],ne.green["500"],ne.green["300"],ne.green["100"]],[ne.lightGreen["900"],ne.lightGreen["700"],ne.lightGreen["500"],ne.lightGreen["300"],ne.lightGreen["100"]],[ne.lime["900"],ne.lime["700"],ne.lime["500"],ne.lime["300"],ne.lime["100"]],[ne.yellow["900"],ne.yellow["700"],ne.yellow["500"],ne.yellow["300"],ne.yellow["100"]],[ne.amber["900"],ne.amber["700"],ne.amber["500"],ne.amber["300"],ne.amber["100"]],[ne.orange["900"],ne.orange["700"],ne.orange["500"],ne.orange["300"],ne.orange["100"]],[ne.deepOrange["900"],ne.deepOrange["700"],ne.deepOrange["500"],ne.deepOrange["300"],ne.deepOrange["100"]],[ne.brown["900"],ne.brown["700"],ne.brown["500"],ne.brown["300"],ne.brown["100"]],[ne.blueGrey["900"],ne.blueGrey["700"],ne.blueGrey["500"],ne.blueGrey["300"],ne.blueGrey["100"]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},R.default=(0,ie.ColorWrap)(Z)},tpVr:function(ge,R,h){var B=h("3z9K");ge.exports=p;function p(S){var E={},A=[],k;function M(U){B.has(E,U)||(E[U]=!0,k.push(U),B.each(S.successors(U),M),B.each(S.predecessors(U),M))}return B.each(S.nodes(),function(U){k=[],M(U),k.length&&A.push(k)}),A}},trA2:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.SliderPointer=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.SliderPointer=function(U){var V=U.direction,$=(0,E.default)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:V==="vertical"});return p.default.createElement("div",{style:$.picker})};R.default=k},tu5P:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.ChromePointerCircle=void 0;var B=h("q1tI"),p=A(B),S=h("/FUP"),E=A(S);function A(M){return M&&M.__esModule?M:{default:M}}var k=R.ChromePointerCircle=function(){var U=(0,E.default)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return p.default.createElement("div",{style:U.picker})};R.default=k},tyuB:function(ge,R,h){"use strict";h.d(R,"a",function(){return nt});var B=h("o0o1"),p=h.n(B),S=h("yXPU"),E=h.n(S),A=h("yG8O"),k=h.n(A),M=h("lwsE"),U=h.n(M),V=h("W8MJ"),$=h.n(V),W=h("U+yc"),Y=h.n(W),ee=h("1ABj"),ne=h.n(ee),ie=h("4cb6"),re=h.n(ie),J=h("+uE7"),ce=h("g1CP"),G=h("FlHB"),Z=h("94HZ"),fe,se,ve,ae,j,de,ke,he,Oe,We,D,je,pt,nt=(fe=Object(ie.injectable)(),se=Object(ie.inject)(J.a.Systems),ve=Object(ie.named)(J.a.FrameGraphSystem),ae=Object(ie.inject)(J.a.RenderPassFactory),j=Object(ie.inject)(J.a.ConfigService),de=Object(ie.inject)(J.a.ResourcePool),fe(ke=(he=(pt=function(){function Lt(){U()(this,Lt),k()(this,"frameGraphSystem",Oe,this),k()(this,"renderPassFactory",We,this),k()(this,"configService",D,this),k()(this,"resourcePool",je,this)}return $()(Lt,[{key:"execute",value:function(){var Gt=E()(p.a.mark(function jt(Be){var pe,un,ln,Fn,Ft,Pn,lr,hn,On;return p.a.wrap(function(Dn){for(;;)switch(Dn.prev=Dn.next){case 0:pe=this.renderPassFactory(Z.a.IDENTIFIER),un=pe.setup,ln=pe.execute,Fn=this.frameGraphSystem.addPass(Z.a.IDENTIFIER,un,ln),Ft=this.renderPassFactory(ce.a.IDENTIFIER),Pn=Ft.setup,lr=Ft.execute,hn=Ft.tearDown,On=this.frameGraphSystem.addPass(ce.a.IDENTIFIER,Pn,lr,hn),this.frameGraphSystem.present(On.data.output);case 5:case"end":return Dn.stop()}},jt,this)}));function $e(jt){return Gt.apply(this,arguments)}return $e}()},{key:"tearDown",value:function(){this.resourcePool.clean()}},{key:"pick",value:function($e,jt){var Be=this.renderPassFactory(G.a.IDENTIFIER);return Be.pick($e,jt)}}]),Lt}(),pt),Oe=Y()(he.prototype,"frameGraphSystem",[se,ve],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),We=Y()(he.prototype,"renderPassFactory",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=Y()(he.prototype,"configService",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je=Y()(he.prototype,"resourcePool",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he))||ke)},u6oY:function(ge,R){ge.exports=h;function h(B,p,S){return B[0]=p[0]*S[0],B[1]=p[1]*S[1],B}},uDUr:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.BlockSwatches=void 0;var B=h("q1tI"),p=U(B),S=h("/FUP"),E=U(S),A=h("3WF5"),k=U(A),M=h("TM95");function U($){return $&&$.__esModule?$:{default:$}}var V=R.BlockSwatches=function(W){var Y=W.colors,ee=W.onClick,ne=W.onSwatchHover,ie=(0,E.default)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return p.default.createElement("div",{style:ie.swatches},(0,k.default)(Y,function(re){return p.default.createElement(M.Swatch,{key:re,color:re,style:ie.swatch,onClick:ee,onHover:ne,focusStyle:{boxShadow:"0 0 4px "+re}})}),p.default.createElement("div",{style:ie.clear}))};R.default=V},uP9N:function(ge,R,h){var B=h("3z9K"),p=h("WZrV");ge.exports=E;var S=B.constant(1);function E(k,M,U,V){return A(k,String(M),U||S,V||function($){return k.outEdges($)})}function A(k,M,U,V){var $={},W=new p,Y,ee,ne=function(re){var J=re.v!==Y?re.v:re.w,ce=$[J],G=U(re),Z=ee.distance+G;if(G<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+re+" Weight: "+G);Z<ce.distance&&(ce.distance=Z,ce.predecessor=Y,W.decrease(J,Z))};for(k.nodes().forEach(function(ie){var re=ie===M?0:Number.POSITIVE_INFINITY;$[ie]={distance:re},W.add(ie,re)});W.size()>0&&(Y=W.removeMin(),ee=$[Y],ee.distance!==Number.POSITIVE_INFINITY);)V(Y).forEach(ne);return $}},uPCe:function(ge,R,h){ge.exports=h("cGwC")},ujMp:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.circularDependencyToException=R.listMetadataForTarget=R.listRegisteredBindingsForServiceIdentifier=R.getServiceIdentifierAsString=R.getFunctionName=void 0;var B=h("MON2");function p(V){if(typeof V=="function"){var $=V;return $.name}else{if(typeof V=="symbol")return V.toString();var $=V;return $}}R.getServiceIdentifierAsString=p;function S(V,$,W){var Y="",ee=W(V,$);return ee.length!==0&&(Y=`
Registered bindings:`,ee.forEach(function(ne){var ie="Object";ne.implementationType!==null&&(ie=U(ne.implementationType)),Y=Y+`
 `+ie,ne.constraint.metaData&&(Y=Y+" - "+ne.constraint.metaData)})),Y}R.listRegisteredBindingsForServiceIdentifier=S;function E(V,$){return V.parentRequest===null?!1:V.parentRequest.serviceIdentifier===$?!0:E(V.parentRequest,$)}function A(V){function $(Y,ee){ee===void 0&&(ee=[]);var ne=p(Y.serviceIdentifier);return ee.push(ne),Y.parentRequest!==null?$(Y.parentRequest,ee):ee}var W=$(V);return W.reverse().join(" --> ")}function k(V){V.childRequests.forEach(function($){if(E($,$.serviceIdentifier)){var W=A($);throw new Error(B.CIRCULAR_DEPENDENCY+" "+W)}else k($)})}R.circularDependencyToException=k;function M(V,$){if($.isTagged()||$.isNamed()){var W="",Y=$.getNamedTag(),ee=$.getCustomTags();return Y!==null&&(W+=Y.toString()+`
`),ee!==null&&ee.forEach(function(ne){W+=ne.toString()+`
`})," "+V+`
 `+V+" - "+W}else return" "+V}R.listMetadataForTarget=M;function U(V){if(V.name)return V.name;var $=V.toString(),W=$.match(/^function\s*([^\s(]+)/);return W?W[1]:"Anonymous function: "+$}R.getFunctionName=U},"vN+2":function(ge,R){function h(){}ge.exports=h},vdMR:function(ge,R){},"vip/":function(ge,R,h){ge.exports=h("yEj1")},vlGe:function(ge,R,h){"use strict";h.r(R),function(B,p){h.d(R,"Container",function(){return pe}),h.d(R,"Contribution",function(){return Dn}),h.d(R,"DefaultContributionProvider",function(){return Ft}),h.d(R,"GlobalContainer",function(){return un}),h.d(R,"Module",function(){return On}),h.d(R,"OptionSymbol",function(){return Gt}),h.d(R,"Provider",function(){return Fn}),h.d(R,"Syringe",function(){return G}),h.d(R,"SyringeModule",function(){return hn}),h.d(R,"Utils",function(){return Z}),h.d(R,"contrib",function(){return jn}),h.d(R,"inject",function(){return nt}),h.d(R,"injectable",function(){return D}),h.d(R,"named",function(){return Lt}),h.d(R,"register",function(){return ln}),h.d(R,"registerSideOption",function(){return $e}),h.d(R,"singleton",function(){return je}),h.d(R,"transient",function(){return pt});var S=h("4cb6"),E=h.n(S);h.d(R,"decorate",function(){return S.decorate}),h.d(R,"optional",function(){return S.optional}),h.d(R,"postConstruct",function(){return S.postConstruct}),h.d(R,"unmanaged",function(){return S.unmanaged});function A(ft,Ut){var ct=Object.keys(ft);if(Object.getOwnPropertySymbols){var Ct=Object.getOwnPropertySymbols(ft);Ut&&(Ct=Ct.filter(function(kt){return Object.getOwnPropertyDescriptor(ft,kt).enumerable})),ct.push.apply(ct,Ct)}return ct}function k(ft){for(var Ut=1;Ut<arguments.length;Ut++){var ct=arguments[Ut]!=null?arguments[Ut]:{};Ut%2?A(Object(ct),!0).forEach(function(Ct){W(ft,Ct,ct[Ct])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ft,Object.getOwnPropertyDescriptors(ct)):A(Object(ct)).forEach(function(Ct){Object.defineProperty(ft,Ct,Object.getOwnPropertyDescriptor(ct,Ct))})}return ft}function M(ft){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(ct){return typeof ct}:M=function(ct){return ct&&typeof Symbol=="function"&&ct.constructor===Symbol&&ct!==Symbol.prototype?"symbol":typeof ct},M(ft)}function U(ft,Ut){if(!(ft instanceof Ut))throw new TypeError("Cannot call a class as a function")}function V(ft,Ut){for(var ct=0;ct<Ut.length;ct++){var Ct=Ut[ct];Ct.enumerable=Ct.enumerable||!1,Ct.configurable=!0,"value"in Ct&&(Ct.writable=!0),Object.defineProperty(ft,Ct.key,Ct)}}function $(ft,Ut,ct){return Ut&&V(ft.prototype,Ut),ct&&V(ft,ct),ft}function W(ft,Ut,ct){return Ut in ft?Object.defineProperty(ft,Ut,{value:ct,enumerable:!0,configurable:!0,writable:!0}):ft[Ut]=ct,ft}function Y(ft){return ee(ft)||ne(ft)||ie(ft)||J()}function ee(ft){if(Array.isArray(ft))return re(ft)}function ne(ft){if(typeof Symbol!="undefined"&&ft[Symbol.iterator]!=null||ft["@@iterator"]!=null)return Array.from(ft)}function ie(ft,Ut){if(!!ft){if(typeof ft=="string")return re(ft,Ut);var ct=Object.prototype.toString.call(ft).slice(8,-1);if(ct==="Object"&&ft.constructor&&(ct=ft.constructor.name),ct==="Map"||ct==="Set")return Array.from(ft);if(ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct))return re(ft,Ut)}}function re(ft,Ut){(Ut==null||Ut>ft.length)&&(Ut=ft.length);for(var ct=0,Ct=new Array(Ut);ct<Ut;ct++)Ct[ct]=ft[ct];return Ct}function J(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var ce;(function(ft){(function(Ut){var ct=typeof p=="object"?p:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),Ct=kt(ft);typeof ct.Reflect=="undefined"?ct.Reflect=ft:Ct=kt(ct.Reflect,Ct),Ut(Ct);function kt(yt,tt){return function(I,Mn){typeof yt[I]!="function"&&Object.defineProperty(yt,I,{configurable:!0,writable:!0,value:Mn}),tt&&tt(I,Mn)}}})(function(Ut){var ct=Object.prototype.hasOwnProperty,Ct=typeof Symbol=="function",kt=Ct&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",yt=Ct&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",tt=typeof Object.create=="function",I={__proto__:[]}instanceof Array,Mn=!tt&&!I,dt={create:tt?function(){return ti(Object.create(null))}:I?function(){return ti({__proto__:null})}:function(){return ti({})},has:Mn?function(tn,mn){return ct.call(tn,mn)}:function(tn,mn){return mn in tn},get:Mn?function(tn,mn){return ct.call(tn,mn)?tn[mn]:void 0}:function(tn,mn){return tn[mn]}},vt=Object.getPrototypeOf(Function),Bt=typeof B=="object"&&Object({NODE_ENV:"production"})&&Object({NODE_ENV:"production"}).REFLECT_METADATA_USE_MAP_POLYFILL==="true",me=!Bt&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Ka(),ue=!Bt&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:bi(),Re=!Bt&&typeof WeakMap=="function"?WeakMap:_a(),Rt=new Re;function Kt(tn,mn,nr,or){if(sa(nr)){if(!St(tn))throw new TypeError;if(!Xt(mn))throw new TypeError;return Za(tn,mn)}else{if(!St(tn))throw new TypeError;if(!Pi(mn))throw new TypeError;if(!Pi(or)&&!sa(or)&&!yi(or))throw new TypeError;return yi(or)&&(or=void 0),nr=Ne(nr),ba(tn,mn,nr,or)}}Ut("decorate",Kt);function Bn(tn,mn){function nr(or,Zr){if(!Pi(or))throw new TypeError;if(!sa(Zr)&&!gn(Zr))throw new TypeError;Qa(tn,mn,or,Zr)}return nr}Ut("metadata",Bn);function Nr(tn,mn,nr,or){if(!Pi(nr))throw new TypeError;return sa(or)||(or=Ne(or)),Qa(tn,mn,nr,or)}Ut("defineMetadata",Nr);function Rn(tn,mn,nr){if(!Pi(mn))throw new TypeError;return sa(nr)||(nr=Ne(nr)),ri(tn,mn,nr)}Ut("hasMetadata",Rn);function Cr(tn,mn,nr){if(!Pi(mn))throw new TypeError;return sa(nr)||(nr=Ne(nr)),li(tn,mn,nr)}Ut("hasOwnMetadata",Cr);function tr(tn,mn,nr){if(!Pi(mn))throw new TypeError;return sa(nr)||(nr=Ne(nr)),ka(tn,mn,nr)}Ut("getMetadata",tr);function jr(tn,mn,nr){if(!Pi(mn))throw new TypeError;return sa(nr)||(nr=Ne(nr)),ai(tn,mn,nr)}Ut("getOwnMetadata",jr);function zr(tn,mn){if(!Pi(tn))throw new TypeError;return sa(mn)||(mn=Ne(mn)),aa(tn,mn)}Ut("getMetadataKeys",zr);function Ua(tn,mn){if(!Pi(tn))throw new TypeError;return sa(mn)||(mn=Ne(mn)),Gi(tn,mn)}Ut("getOwnMetadataKeys",Ua);function oa(tn,mn,nr){if(!Pi(mn))throw new TypeError;sa(nr)||(nr=Ne(nr));var or=Pa(mn,nr,!1);if(sa(or)||!or.delete(tn))return!1;if(or.size>0)return!0;var Zr=Rt.get(mn);return Zr.delete(nr),Zr.size>0||Rt.delete(mn),!0}Ut("deleteMetadata",oa);function Za(tn,mn){for(var nr=tn.length-1;nr>=0;--nr){var or=tn[nr],Zr=or(mn);if(!sa(Zr)&&!yi(Zr)){if(!Xt(Zr))throw new TypeError;mn=Zr}}return mn}function ba(tn,mn,nr,or){for(var Zr=tn.length-1;Zr>=0;--Zr){var Vi=tn[Zr],Da=Vi(mn,nr,or);if(!sa(Da)&&!yi(Da)){if(!Pi(Da))throw new TypeError;or=Da}}return or}function Pa(tn,mn,nr){var or=Rt.get(tn);if(sa(or)){if(!nr)return;or=new me,Rt.set(tn,or)}var Zr=or.get(mn);if(sa(Zr)){if(!nr)return;Zr=new me,or.set(mn,Zr)}return Zr}function ri(tn,mn,nr){var or=li(tn,mn,nr);if(or)return!0;var Zr=Oa(mn);return yi(Zr)?!1:ri(tn,Zr,nr)}function li(tn,mn,nr){var or=Pa(mn,nr,!1);return sa(or)?!1:ot(or.has(tn))}function ka(tn,mn,nr){var or=li(tn,mn,nr);if(or)return ai(tn,mn,nr);var Zr=Oa(mn);if(!yi(Zr))return ka(tn,Zr,nr)}function ai(tn,mn,nr){var or=Pa(mn,nr,!1);if(!sa(or))return or.get(tn)}function Qa(tn,mn,nr,or){var Zr=Pa(nr,or,!0);Zr.set(tn,mn)}function aa(tn,mn){var nr=Gi(tn,mn),or=Oa(tn);if(or===null)return nr;var Zr=aa(or,mn);if(Zr.length<=0)return nr;if(nr.length<=0)return Zr;for(var Vi=new ue,Da=[],Ea=0,ta=nr;Ea<ta.length;Ea++){var ha=ta[Ea],Kr=Vi.has(ha);Kr||(Vi.add(ha),Da.push(ha))}for(var qi=0,So=Zr;qi<So.length;qi++){var ha=So[qi],Kr=Vi.has(ha);Kr||(Vi.add(ha),Da.push(ha))}return Da}function Gi(tn,mn){var nr=[],or=Pa(tn,mn,!1);if(sa(or))return nr;for(var Zr=or.keys(),Vi=en(Zr),Da=0;;){var Ea=$r(Vi);if(!Ea)return nr.length=Da,nr;var ta=In(Ea);try{nr[Da]=ta}catch(ha){try{da(Vi)}finally{throw ha}}Da++}}function mo(tn){if(tn===null)return 1;switch(typeof tn){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return tn===null?1:6;default:return 6}}function sa(tn){return tn===void 0}function yi(tn){return tn===null}function Io(tn){return typeof tn=="symbol"}function Pi(tn){return typeof tn=="object"?tn!==null:typeof tn=="function"}function ao(tn,mn){switch(mo(tn)){case 0:return tn;case 1:return tn;case 2:return tn;case 3:return tn;case 4:return tn;case 5:return tn}var nr=mn===3?"string":mn===5?"number":"default",or=pn(tn,kt);if(or!==void 0){var Zr=or.call(tn,nr);if(Pi(Zr))throw new TypeError;return Zr}return ki(tn,nr==="default"?"number":nr)}function ki(tn,mn){if(mn==="string"){var nr=tn.toString;if(Ve(nr)){var or=nr.call(tn);if(!Pi(or))return or}var Zr=tn.valueOf;if(Ve(Zr)){var or=Zr.call(tn);if(!Pi(or))return or}}else{var Zr=tn.valueOf;if(Ve(Zr)){var or=Zr.call(tn);if(!Pi(or))return or}var Vi=tn.toString;if(Ve(Vi)){var or=Vi.call(tn);if(!Pi(or))return or}}throw new TypeError}function ot(tn){return!!tn}function It(tn){return""+tn}function Ne(tn){var mn=ao(tn,3);return Io(mn)?mn:It(mn)}function St(tn){return Array.isArray?Array.isArray(tn):tn instanceof Object?tn instanceof Array:Object.prototype.toString.call(tn)==="[object Array]"}function Ve(tn){return typeof tn=="function"}function Xt(tn){return typeof tn=="function"}function gn(tn){switch(mo(tn)){case 3:return!0;case 4:return!0;default:return!1}}function pn(tn,mn){var nr=tn[mn];if(nr!=null){if(!Ve(nr))throw new TypeError;return nr}}function en(tn){var mn=pn(tn,yt);if(!Ve(mn))throw new TypeError;var nr=mn.call(tn);if(!Pi(nr))throw new TypeError;return nr}function In(tn){return tn.value}function $r(tn){var mn=tn.next();return mn.done?!1:mn}function da(tn){var mn=tn.return;mn&&mn.call(tn)}function Oa(tn){var mn=Object.getPrototypeOf(tn);if(typeof tn!="function"||tn===vt||mn!==vt)return mn;var nr=tn.prototype,or=nr&&Object.getPrototypeOf(nr);if(or==null||or===Object.prototype)return mn;var Zr=or.constructor;return typeof Zr!="function"||Zr===tn?mn:Zr}function Ka(){var tn={},mn=[],nr=function(){function Da(Ea,ta,ha){this._index=0,this._keys=Ea,this._values=ta,this._selector=ha}return Da.prototype["@@iterator"]=function(){return this},Da.prototype[yt]=function(){return this},Da.prototype.next=function(){var Ea=this._index;if(Ea>=0&&Ea<this._keys.length){var ta=this._selector(this._keys[Ea],this._values[Ea]);return Ea+1>=this._keys.length?(this._index=-1,this._keys=mn,this._values=mn):this._index++,{value:ta,done:!1}}return{value:void 0,done:!0}},Da.prototype.throw=function(Ea){throw this._index>=0&&(this._index=-1,this._keys=mn,this._values=mn),Ea},Da.prototype.return=function(Ea){return this._index>=0&&(this._index=-1,this._keys=mn,this._values=mn),{value:Ea,done:!0}},Da}();return function(){function Da(){this._keys=[],this._values=[],this._cacheKey=tn,this._cacheIndex=-2}return Object.defineProperty(Da.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),Da.prototype.has=function(Ea){return this._find(Ea,!1)>=0},Da.prototype.get=function(Ea){var ta=this._find(Ea,!1);return ta>=0?this._values[ta]:void 0},Da.prototype.set=function(Ea,ta){var ha=this._find(Ea,!0);return this._values[ha]=ta,this},Da.prototype.delete=function(Ea){var ta=this._find(Ea,!1);if(ta>=0){for(var ha=this._keys.length,Kr=ta+1;Kr<ha;Kr++)this._keys[Kr-1]=this._keys[Kr],this._values[Kr-1]=this._values[Kr];return this._keys.length--,this._values.length--,Ea===this._cacheKey&&(this._cacheKey=tn,this._cacheIndex=-2),!0}return!1},Da.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=tn,this._cacheIndex=-2},Da.prototype.keys=function(){return new nr(this._keys,this._values,or)},Da.prototype.values=function(){return new nr(this._keys,this._values,Zr)},Da.prototype.entries=function(){return new nr(this._keys,this._values,Vi)},Da.prototype["@@iterator"]=function(){return this.entries()},Da.prototype[yt]=function(){return this.entries()},Da.prototype._find=function(Ea,ta){return this._cacheKey!==Ea&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Ea)),this._cacheIndex<0&&ta&&(this._cacheIndex=this._keys.length,this._keys.push(Ea),this._values.push(void 0)),this._cacheIndex},Da}();function or(Da,Ea){return Da}function Zr(Da,Ea){return Ea}function Vi(Da,Ea){return[Da,Ea]}}function bi(){return function(){function tn(){this._map=new me}return Object.defineProperty(tn.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),tn.prototype.has=function(mn){return this._map.has(mn)},tn.prototype.add=function(mn){return this._map.set(mn,mn),this},tn.prototype.delete=function(mn){return this._map.delete(mn)},tn.prototype.clear=function(){this._map.clear()},tn.prototype.keys=function(){return this._map.keys()},tn.prototype.values=function(){return this._map.values()},tn.prototype.entries=function(){return this._map.entries()},tn.prototype["@@iterator"]=function(){return this.keys()},tn.prototype[yt]=function(){return this.keys()},tn}()}function _a(){var tn=16,mn=dt.create(),nr=or();return function(){function ta(){this._key=or()}return ta.prototype.has=function(ha){var Kr=Zr(ha,!1);return Kr!==void 0?dt.has(Kr,this._key):!1},ta.prototype.get=function(ha){var Kr=Zr(ha,!1);return Kr!==void 0?dt.get(Kr,this._key):void 0},ta.prototype.set=function(ha,Kr){var qi=Zr(ha,!0);return qi[this._key]=Kr,this},ta.prototype.delete=function(ha){var Kr=Zr(ha,!1);return Kr!==void 0?delete Kr[this._key]:!1},ta.prototype.clear=function(){this._key=or()},ta}();function or(){var ta;do ta="@@WeakMap@@"+Ea();while(dt.has(mn,ta));return mn[ta]=!0,ta}function Zr(ta,ha){if(!ct.call(ta,nr)){if(!ha)return;Object.defineProperty(ta,nr,{value:dt.create()})}return ta[nr]}function Vi(ta,ha){for(var Kr=0;Kr<ha;++Kr)ta[Kr]=Math.random()*255|0;return ta}function Da(ta){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(ta)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(ta)):Vi(new Uint8Array(ta),ta):Vi(new Array(ta),ta)}function Ea(){var ta=Da(tn);ta[6]=ta[6]&79|64,ta[8]=ta[8]&191|128;for(var ha="",Kr=0;Kr<tn;++Kr){var qi=ta[Kr];(Kr===4||Kr===6||Kr===8)&&(ha+="-"),qi<16&&(ha+="0"),ha+=qi.toString(16).toLowerCase()}return ha}}function ti(tn){return tn.__=void 0,delete tn.__,tn}})})(ce||(ce={}));var G;(function(ft){ft.defineToken=function(kt){var yt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{multiple:!0};return new ft.DefinedToken(kt,yt)};var Ut=function kt(yt){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};U(this,kt),this.prototype={},this.name=void 0,this.multiple=void 0,this.symbol=void 0;var I=tt.multiple,Mn=I===void 0?!1:I;this.name=yt,this.symbol=Symbol(this.name),this.multiple=Mn};ft.DefinedToken=Ut;function ct(kt){return!!kt&&M(kt)==="object"&&"id"in kt&&"registry"in kt}ft.isModule=ct;var Ct;(function(kt){kt.singleton="singleton",kt.transient="transient"})(Ct=ft.Lifecycle||(ft.Lifecycle={})),ft.ClassOptionSymbol=Symbol("SyringeClassOptionSymbol"),ft.DefaultOption={lifecycle:Ct.transient}})(G||(G={}));var Z;(function(ft){function Ut(I){return I instanceof Array?I:I!==void 0?[I]:[]}ft.maybeArrayToArray=Ut;function ct(I){return!!(I&&typeof I=="function"&&"prototype"in I)}ft.isClass=ct;function Ct(I){return!!(I&&M(I)==="object"&&"symbol"in I&&"multiple"in I)}ft.isDefinedToken=Ct;function kt(I){return!!(I&&M(I)==="object"&&"token"in I)}ft.isInjectOption=kt;function yt(I){return!!(I&&M(I)==="object"&&"token"in I&&"named"in I)}ft.isNamedToken=yt;function tt(I){return ft.isDefinedToken(I)&&I.multiple}ft.isMultipleEnabled=tt})(Z||(Z={}));function fe(ft){return ft.inSingletonScope()}function se(ft){return ft.inTransientScope()}function ve(ft,Ut){return Ut.lifecycle===G.Lifecycle.singleton?fe(ft):se(ft)}function ae(ft,Ut){ft.whenTargetNamed(he(Ut))}function j(ft,Ut){return Ut.container.bind(Oe(ft))}function de(ft,Ut){var ct=Ut.container.parent,Ct=ct&&ct.isBound(Oe(ft));return Ut.container.isBound(Oe(ft))&&!Ct?Ut.container.rebind(Oe(ft)):Ut.container.bind(Oe(ft))}function ke(ft){return ft&&M(ft)==="object"&&"container"in ft&&"inversify"in ft}function he(ft){return Z.isDefinedToken(ft)?ft.symbol:ft}function Oe(ft){return Z.isDefinedToken(ft)?ft.symbol:ft}var We=new S.Container;function D(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ut=Object(S.injectable)();return function(ct){Reflect.defineMetadata(G.ClassOptionSymbol,k(k({},ft),{},{target:ct}),ct),Ut(ct)}}function je(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return D(k(k({},ft),{},{lifecycle:G.Lifecycle.singleton}))}function pt(){var ft=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return D(k(k({},ft),{},{lifecycle:G.Lifecycle.transient}))}function nt(ft){return Object(S.inject)(Oe(ft))}function Lt(ft){return Object(S.named)(he(ft))}var Gt=Symbol("SyringeOptionSymbol"),$e=function(Ut,ct){Reflect.defineMetadata(Gt,Ut,ct)};function jt(ft){var Ut=Z.maybeArrayToArray(ft.token),ct=Z.maybeArrayToArray(ft.useClass),Ct=Z.maybeArrayToArray(ft.useDynamic),kt=Z.maybeArrayToArray(ft.useFactory),yt=Z.maybeArrayToArray(ft.contrib),tt=ft.lifecycle||G.Lifecycle.transient,I={token:Ut,useClass:ct,lifecycle:yt.length>0?G.Lifecycle.singleton:tt,contrib:yt,useDynamic:Ct,useFactory:kt};return"useValue"in ft&&(I.useValue=ft.useValue),I}var Be=function(){function ft(Ut,ct,Ct){U(this,ft),this.token=void 0,this.rawToken=void 0,this.named=void 0,this.generalToken=void 0,this.option=void 0,this.context=void 0,this.mutiple=void 0,this.context=Ut,this.token=ct,this.option=Ct,this.rawToken=Z.isNamedToken(ct)?ct.token:ct,this.named=Z.isNamedToken(ct)?ct.named:void 0,this.mutiple=!!this.named||Z.isMultipleEnabled(this.rawToken),this.generalToken=this.rawToken}return $(ft,[{key:"resolve",value:function(){var ct=this,Ct=this.context;!ke(Ct)||(this.mutiple?this.resolveMutilple(Ct):(this.resolveMono(Ct),!this.named&&this.option.contrib.length>0&&this.option.contrib.forEach(function(kt){Z.isMultipleEnabled(kt)?j(kt,Ct).toService(ct.generalToken):de(kt,Ct).toService(ct.generalToken)})))}},{key:"resolveMono",value:function(ct){var Ct=this;if("useValue"in this.option)return de(this.generalToken,ct).toConstantValue(this.option.useValue);if(this.option.useDynamic.length>0){var kt=this.option.useDynamic[this.option.useDynamic.length-1];return ve(de(this.generalToken,ct).toDynamicValue(function(){return kt({container:Ct.context})}),this.option)}if(this.option.useFactory.length>0){var yt=this.option.useFactory[this.option.useFactory.length-1];return de(this.generalToken,ct).toFactory(function(){return yt({container:Ct.context})})}if(this.option.useClass.length>0){var tt=this.option.useClass[this.option.useClass.length-1];return ve(de(this.generalToken,ct).to(tt),this.option)}}},{key:"resolveMutilple",value:function(ct){var Ct=this,kt=this.option.useClass.map(function(Mn){return ve(j(Ct.generalToken,ct).to(Mn),Ct.option)}),yt=this.option.useDynamic.map(function(Mn){return ve(j(Ct.generalToken,ct).toDynamicValue(function(){return Mn({container:Ct.context})}),Ct.option)}),tt=this.option.useFactory.map(function(Mn){return j(Ct.generalToken,ct).toFactory(function(){return Mn({container:Ct.context})})}),I="useValue"in this.option?j(this.generalToken,ct).toConstantValue(this.option.useValue):void 0;this.named&&(kt.forEach(function(Mn){return Ct.named&&ae(Mn,Ct.named)}),yt.forEach(function(Mn){return Ct.named&&ae(Mn,Ct.named)}),tt.forEach(function(Mn){return Ct.named&&ae(Mn,Ct.named)}),I&&ae(I,this.named))}}],[{key:"resolveTarget",value:function(ct,Ct){var kt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};try{try{var yt=Reflect.getMetadata(Gt,Ct);yt&&ft.resolveOption(ct,yt)}catch(dt){}if(Z.isClass(Ct))if(!kt.useClass)kt.useClass=[Ct];else{var tt=Z.maybeArrayToArray(kt.useClass);tt.unshift(Ct),kt.useClass=tt}var I;try{I=Reflect.getMetadata(G.ClassOptionSymbol,Ct)}catch(dt){}if(I=k(k({},I||{}),kt),!I.token)I.token=[Ct];else{var Mn=Z.maybeArrayToArray(I.token);Mn.unshift(Ct),I.token=Mn}ft.resolveOption(ct,I)}catch(dt){}}},{key:"resolveOption",value:function(ct,Ct){var kt=jt(k(k({},ft.globalConfig),Ct));kt.useClass.length===0&&kt.useDynamic.length===0&&kt.useFactory.length===0&&!("useValue"in kt)||kt.token.forEach(function(yt){var tt=new ft(ct,yt,k({},kt));tt.resolve()})}}]),ft}();Be.globalConfig=G.DefaultOption;var pe=function(){function ft(Ut){U(this,ft),this.loadedModules=[],this.container=void 0,this.inversify=!0,this.parent=void 0,Ut?this.container=Ut:this.container=new S.Container}return $(ft,[{key:"load",value:function(ct,Ct){(Ct||!this.loadedModules.includes(ct.id))&&(ct.registry(this.register.bind(this),this.resolveContext()),this.loadedModules.push(ct.id))}},{key:"remove",value:function(ct){return this.container.unbind(Oe(ct))}},{key:"get",value:function(ct){return this.container.get(Oe(ct))}},{key:"getNamed",value:function(ct,Ct){return this.container.getNamed(Oe(ct),he(Ct))}},{key:"getAll",value:function(ct){return this.container.getAll(Oe(ct))}},{key:"getAllNamed",value:function(ct,Ct){return this.container.getAllNamed(Oe(ct),he(Ct))}},{key:"isBound",value:function(ct){return this.container.isBound(Oe(ct))}},{key:"isBoundNamed",value:function(ct,Ct){return this.container.isBoundNamed(Oe(ct),he(Ct))}},{key:"createChild",value:function(){var ct=this.container.createChild(),Ct=new ft(ct);return Ct.parent=this,Ct}},{key:"register",value:function(ct){var Ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Z.isInjectOption(ct)?Be.resolveOption(this,ct):Be.resolveTarget(this,ct,Ct)}},{key:"resolveContext",value:function(){return{container:this}}}],[{key:"config",value:function(ct){Be.globalConfig=ct}}]),ft}(),un=new pe(We),ln=un.register.bind(un),Fn=G.defineToken("ContributionProvider"),Ft=function(){function ft(Ut,ct,Ct){U(this,ft),this.option={recursive:!1,cache:!0},this.services=void 0,this.serviceIdentifier=void 0,this.container=void 0,this.container=ct,this.serviceIdentifier=Ut,Ct&&(this.option=k(k({},this.option),Ct))}return $(ft,[{key:"setServices",value:function(ct){for(var Ct=[],kt=this.container;kt;){if(kt.isBound(this.serviceIdentifier)){var yt=kt.getAll(this.serviceIdentifier);Ct.push.apply(Ct,Y(yt))}kt=ct?kt.parent:void 0}return Ct}},{key:"getContributions",value:function(){var ct=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Ct=k(k({},this.option),ct),kt=Ct.cache,yt=Ct.recursive;return(!kt||this.services===void 0)&&(this.services=this.setServices(!!yt)),this.services}}]),ft}();function Pn(ft,Ut){return{token:{token:Fn,named:ft},useDynamic:function(Ct){return new Ft(ft,Ct.container,Ut)},lifecycle:G.Lifecycle.singleton}}function lr(ft,Ut,ct){ft({token:{token:Fn,named:Ut},useDynamic:function(kt){return new Ft(Ut,kt.container,ct)},lifecycle:G.Lifecycle.singleton})}var hn=function(){function ft(Ut){U(this,ft),this.id=void 0,this.baseRegistry=void 0,this.optionCollection=void 0,ft.moduleId+=1,this.id=ft.moduleId,this.baseRegistry=Ut}return $(ft,[{key:"registry",get:function(){var ct=this;return function(Ct,kt){ct.baseRegistry&&ct.baseRegistry(Ct,kt),ct.optionCollection&&ct.optionCollection.forEach(function(yt){return Ct(yt)})}}},{key:"options",get:function(){return this.optionCollection||(this.optionCollection=[]),this.optionCollection}},{key:"register",value:function(){for(var ct=this,Ct=arguments.length,kt=new Array(Ct),yt=0;yt<Ct;yt++)kt[yt]=arguments[yt];return kt.forEach(function(tt){return ct.options.push(tt)}),this}},{key:"contribution",value:function(){for(var ct=this,Ct=arguments.length,kt=new Array(Ct),yt=0;yt<Ct;yt++)kt[yt]=arguments[yt];return kt.forEach(function(tt){return ct.options.push(Pn(tt))}),this}}]),ft}();hn.moduleId=0;function On(ft){return new hn(ft)}var jn=function(Ut){return function(ct,Ct,kt){Lt(Ut)(ct,Ct,kt),nt(Fn)(ct,Ct,kt)}},Dn;(function(ft){ft.Provider=Fn,ft.register=lr})(Dn||(Dn={}))}.call(this,h("Q2Ig"),h("IyRk"))},w4Tj:function(ge,R,h){"use strict";h.d(R,"a",function(){return S});var B=h("oZsa");function p(E,A){for(;!Object.prototype.hasOwnProperty.call(E,A)&&(E=Object(B.a)(E),E!==null););return E}function S(){return typeof Reflect!="undefined"&&Reflect.get?S=Reflect.get.bind():S=function(A,k,M){var U=p(A,k);if(!!U){var V=Object.getOwnPropertyDescriptor(U,k);return V.get?V.get.call(arguments.length<3?A:M):V.value}},S.apply(this,arguments)}},wME1:function(ge,R,h){"use strict";h.r(R),h.d(R,"red",function(){return B}),h.d(R,"pink",function(){return p}),h.d(R,"purple",function(){return S}),h.d(R,"deepPurple",function(){return E}),h.d(R,"indigo",function(){return A}),h.d(R,"blue",function(){return k}),h.d(R,"lightBlue",function(){return M}),h.d(R,"cyan",function(){return U}),h.d(R,"teal",function(){return V}),h.d(R,"green",function(){return $}),h.d(R,"lightGreen",function(){return W}),h.d(R,"lime",function(){return Y}),h.d(R,"yellow",function(){return ee}),h.d(R,"amber",function(){return ne}),h.d(R,"orange",function(){return ie}),h.d(R,"deepOrange",function(){return re}),h.d(R,"brown",function(){return J}),h.d(R,"grey",function(){return ce}),h.d(R,"blueGrey",function(){return G}),h.d(R,"darkText",function(){return Z}),h.d(R,"lightText",function(){return fe}),h.d(R,"darkIcons",function(){return se}),h.d(R,"lightIcons",function(){return ve}),h.d(R,"white",function(){return ae}),h.d(R,"black",function(){return j});var B={"50":"#ffebee","100":"#ffcdd2","200":"#ef9a9a","300":"#e57373","400":"#ef5350","500":"#f44336","600":"#e53935","700":"#d32f2f","800":"#c62828","900":"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},p={"50":"#fce4ec","100":"#f8bbd0","200":"#f48fb1","300":"#f06292","400":"#ec407a","500":"#e91e63","600":"#d81b60","700":"#c2185b","800":"#ad1457","900":"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},S={"50":"#f3e5f5","100":"#e1bee7","200":"#ce93d8","300":"#ba68c8","400":"#ab47bc","500":"#9c27b0","600":"#8e24aa","700":"#7b1fa2","800":"#6a1b9a","900":"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},E={"50":"#ede7f6","100":"#d1c4e9","200":"#b39ddb","300":"#9575cd","400":"#7e57c2","500":"#673ab7","600":"#5e35b1","700":"#512da8","800":"#4527a0","900":"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},A={"50":"#e8eaf6","100":"#c5cae9","200":"#9fa8da","300":"#7986cb","400":"#5c6bc0","500":"#3f51b5","600":"#3949ab","700":"#303f9f","800":"#283593","900":"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},k={"50":"#e3f2fd","100":"#bbdefb","200":"#90caf9","300":"#64b5f6","400":"#42a5f5","500":"#2196f3","600":"#1e88e5","700":"#1976d2","800":"#1565c0","900":"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},M={"50":"#e1f5fe","100":"#b3e5fc","200":"#81d4fa","300":"#4fc3f7","400":"#29b6f6","500":"#03a9f4","600":"#039be5","700":"#0288d1","800":"#0277bd","900":"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},U={"50":"#e0f7fa","100":"#b2ebf2","200":"#80deea","300":"#4dd0e1","400":"#26c6da","500":"#00bcd4","600":"#00acc1","700":"#0097a7","800":"#00838f","900":"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},V={"50":"#e0f2f1","100":"#b2dfdb","200":"#80cbc4","300":"#4db6ac","400":"#26a69a","500":"#009688","600":"#00897b","700":"#00796b","800":"#00695c","900":"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},$={"50":"#e8f5e9","100":"#c8e6c9","200":"#a5d6a7","300":"#81c784","400":"#66bb6a","500":"#4caf50","600":"#43a047","700":"#388e3c","800":"#2e7d32","900":"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},W={"50":"#f1f8e9","100":"#dcedc8","200":"#c5e1a5","300":"#aed581","400":"#9ccc65","500":"#8bc34a","600":"#7cb342","700":"#689f38","800":"#558b2f","900":"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Y={"50":"#f9fbe7","100":"#f0f4c3","200":"#e6ee9c","300":"#dce775","400":"#d4e157","500":"#cddc39","600":"#c0ca33","700":"#afb42b","800":"#9e9d24","900":"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},ee={"50":"#fffde7","100":"#fff9c4","200":"#fff59d","300":"#fff176","400":"#ffee58","500":"#ffeb3b","600":"#fdd835","700":"#fbc02d","800":"#f9a825","900":"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},ne={"50":"#fff8e1","100":"#ffecb3","200":"#ffe082","300":"#ffd54f","400":"#ffca28","500":"#ffc107","600":"#ffb300","700":"#ffa000","800":"#ff8f00","900":"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},ie={"50":"#fff3e0","100":"#ffe0b2","200":"#ffcc80","300":"#ffb74d","400":"#ffa726","500":"#ff9800","600":"#fb8c00","700":"#f57c00","800":"#ef6c00","900":"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},re={"50":"#fbe9e7","100":"#ffccbc","200":"#ffab91","300":"#ff8a65","400":"#ff7043","500":"#ff5722","600":"#f4511e","700":"#e64a19","800":"#d84315","900":"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},J={"50":"#efebe9","100":"#d7ccc8","200":"#bcaaa4","300":"#a1887f","400":"#8d6e63","500":"#795548","600":"#6d4c41","700":"#5d4037","800":"#4e342e","900":"#3e2723"},ce={"50":"#fafafa","100":"#f5f5f5","200":"#eeeeee","300":"#e0e0e0","400":"#bdbdbd","500":"#9e9e9e","600":"#757575","700":"#616161","800":"#424242","900":"#212121"},G={"50":"#eceff1","100":"#cfd8dc","200":"#b0bec5","300":"#90a4ae","400":"#78909c","500":"#607d8b","600":"#546e7a","700":"#455a64","800":"#37474f","900":"#263238"},Z={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},fe={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},se={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},ve={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},ae="#ffffff",j="#000000";R.default={red:B,pink:p,purple:S,deepPurple:E,indigo:A,blue:k,lightBlue:M,cyan:U,teal:V,green:$,lightGreen:W,lime:Y,yellow:ee,amber:ne,orange:ie,deepOrange:re,brown:J,grey:ce,blueGrey:G,darkText:Z,lightText:fe,darkIcons:se,lightIcons:ve,white:ae,black:j}},wTVA:function(ge,R){function h(B){if(Array.isArray(B))return B}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},wkBT:function(ge,R){function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},wkyg:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.HuePicker=void 0;var B=Object.assign||function(ie){for(var re=1;re<arguments.length;re++){var J=arguments[re];for(var ce in J)Object.prototype.hasOwnProperty.call(J,ce)&&(ie[ce]=J[ce])}return ie},p=h("q1tI"),S=ee(p),E=h("17x9"),A=ee(E),k=h("/FUP"),M=ee(k),U=h("QkVN"),V=ee(U),$=h("TM95"),W=h("trA2"),Y=ee(W);function ee(ie){return ie&&ie.__esModule?ie:{default:ie}}var ne=R.HuePicker=function(re){var J=re.width,ce=re.height,G=re.onChange,Z=re.hsl,fe=re.direction,se=re.pointer,ve=re.styles,ae=ve===void 0?{}:ve,j=re.className,de=j===void 0?"":j,ke=(0,M.default)((0,V.default)({default:{picker:{position:"relative",width:J,height:ce},hue:{radius:"2px"}}},ae)),he=function(We){return G({a:1,h:We.h,l:.5,s:1})};return S.default.createElement("div",{style:ke.picker,className:"hue-picker "+de},S.default.createElement($.Hue,B({},ke.hue,{hsl:Z,pointer:se,onChange:he,direction:fe})))};ne.propTypes={styles:A.default.object},ne.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Y.default,styles:{}},R.default=(0,$.ColorWrap)(ne)},wnjb:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.MetadataReader=void 0;var B=h("xfSm"),p=function(){function S(){}return S.prototype.getConstructorMetadata=function(E){var A=Reflect.getMetadata(B.PARAM_TYPES,E),k=Reflect.getMetadata(B.TAGGED,E);return{compilerGeneratedMetadata:A,userGeneratedMetadata:k||{}}},S.prototype.getPropertiesMetadata=function(E){var A=Reflect.getMetadata(B.TAGGED_PROP,E)||[];return A},S}();R.MetadataReader=p},xDUe:function(ge,R){ge.exports=h;function h(B,p,S,E){var A=p[0],k=p[1];return B[0]=A+E*(S[0]-A),B[1]=k+E*(S[1]-k),B}},xbjo:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.CircleSwatch=void 0;var B=h("q1tI"),p=k(B),S=h("/FUP"),E=k(S),A=h("TM95");function k(U){return U&&U.__esModule?U:{default:U}}var M=R.CircleSwatch=function(V){var $=V.color,W=V.onClick,Y=V.onSwatchHover,ee=V.hover,ne=V.active,ie=V.circleSize,re=V.circleSpacing,J=(0,E.default)({default:{swatch:{width:ie,height:ie,marginRight:re,marginBottom:re,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+ie/2+"px "+$,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+$}}},{hover:ee,active:ne});return p.default.createElement("div",{style:J.swatch},p.default.createElement(A.Swatch,{style:J.Swatch,color:$,onClick:W,onHover:Y,focusStyle:{boxShadow:J.Swatch.boxShadow+", 0 0 5px "+$}}))};M.defaultProps={circleSize:28,circleSpacing:14},R.default=(0,S.handleHover)(M)},xdlL:function(ge,R,h){"use strict";h.d(R,"a",function(){return S});var B=h("iZzK"),p=h("cHpt");function S(E,A,k){return Object(p.a)()?S=Reflect.construct.bind():S=function(U,V,$){var W=[null];W.push.apply(W,V);var Y=Function.bind.apply(U,W),ee=new Y;return $&&Object(B.a)(ee,$.prototype),ee},S.apply(null,arguments)}},xfSm:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.NON_CUSTOM_TAG_KEYS=R.POST_CONSTRUCT=R.DESIGN_PARAM_TYPES=R.PARAM_TYPES=R.TAGGED_PROP=R.TAGGED=R.MULTI_INJECT_TAG=R.INJECT_TAG=R.OPTIONAL_TAG=R.UNMANAGED_TAG=R.NAME_TAG=R.NAMED_TAG=void 0,R.NAMED_TAG="named",R.NAME_TAG="name",R.UNMANAGED_TAG="unmanaged",R.OPTIONAL_TAG="optional",R.INJECT_TAG="inject",R.MULTI_INJECT_TAG="multi_inject",R.TAGGED="inversify:tagged",R.TAGGED_PROP="inversify:tagged_props",R.PARAM_TYPES="inversify:paramtypes",R.DESIGN_PARAM_TYPES="design:paramtypes",R.POST_CONSTRUCT="post_construct";function B(){return[R.INJECT_TAG,R.MULTI_INJECT_TAG,R.NAME_TAG,R.UNMANAGED_TAG,R.NAMED_TAG,R.OPTIONAL_TAG]}R.NON_CUSTOM_TAG_KEYS=B()},xiII:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Request=void 0;var B=h("d9O0"),p=function(){function S(E,A,k,M,U){this.id=B.id(),this.serviceIdentifier=E,this.parentContext=A,this.parentRequest=k,this.target=U,this.childRequests=[],this.bindings=Array.isArray(M)?M:[M],this.requestScope=k===null?new Map:null}return S.prototype.addChildRequest=function(E,A,k){var M=new S(E,this.parentContext,this,A,k);return this.childRequests.push(M),M},S}();R.Request=p},xutz:function(ge,R,h){"use strict";(function(B){var p=h("XqMk"),S=typeof exports=="object"&&exports&&!exports.nodeType&&exports,E=S&&typeof B=="object"&&B&&!B.nodeType&&B,A=E&&E.exports===S,k=A&&p.a.process,M=function(){try{var U=E&&E.require&&E.require("util").types;return U||k&&k.binding&&k.binding("util")}catch(V){}}();R.a=M}).call(this,h("Vg/k")(ge))},yAXI:function(ge,R,h){"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B=typeof Symbol=="function"&&Symbol.for,p=B?Symbol.for("react.element"):60103,S=B?Symbol.for("react.portal"):60106,E=B?Symbol.for("react.fragment"):60107,A=B?Symbol.for("react.strict_mode"):60108,k=B?Symbol.for("react.profiler"):60114,M=B?Symbol.for("react.provider"):60109,U=B?Symbol.for("react.context"):60110,V=B?Symbol.for("react.async_mode"):60111,$=B?Symbol.for("react.concurrent_mode"):60111,W=B?Symbol.for("react.forward_ref"):60112,Y=B?Symbol.for("react.suspense"):60113,ee=B?Symbol.for("react.suspense_list"):60120,ne=B?Symbol.for("react.memo"):60115,ie=B?Symbol.for("react.lazy"):60116,re=B?Symbol.for("react.block"):60121,J=B?Symbol.for("react.fundamental"):60117,ce=B?Symbol.for("react.responder"):60118,G=B?Symbol.for("react.scope"):60119;function Z(se){if(typeof se=="object"&&se!==null){var ve=se.$$typeof;switch(ve){case p:switch(se=se.type,se){case V:case $:case E:case k:case A:case Y:return se;default:switch(se=se&&se.$$typeof,se){case U:case W:case ie:case ne:case M:return se;default:return ve}}case S:return ve}}}function fe(se){return Z(se)===$}R.AsyncMode=V,R.ConcurrentMode=$,R.ContextConsumer=U,R.ContextProvider=M,R.Element=p,R.ForwardRef=W,R.Fragment=E,R.Lazy=ie,R.Memo=ne,R.Portal=S,R.Profiler=k,R.StrictMode=A,R.Suspense=Y,R.isAsyncMode=function(se){return fe(se)||Z(se)===V},R.isConcurrentMode=fe,R.isContextConsumer=function(se){return Z(se)===U},R.isContextProvider=function(se){return Z(se)===M},R.isElement=function(se){return typeof se=="object"&&se!==null&&se.$$typeof===p},R.isForwardRef=function(se){return Z(se)===W},R.isFragment=function(se){return Z(se)===E},R.isLazy=function(se){return Z(se)===ie},R.isMemo=function(se){return Z(se)===ne},R.isPortal=function(se){return Z(se)===S},R.isProfiler=function(se){return Z(se)===k},R.isStrictMode=function(se){return Z(se)===A},R.isSuspense=function(se){return Z(se)===Y},R.isValidElementType=function(se){return typeof se=="string"||typeof se=="function"||se===E||se===$||se===k||se===A||se===Y||se===ee||typeof se=="object"&&se!==null&&(se.$$typeof===ie||se.$$typeof===ne||se.$$typeof===M||se.$$typeof===U||se.$$typeof===W||se.$$typeof===J||se.$$typeof===ce||se.$$typeof===G||se.$$typeof===re)},R.typeOf=Z},yEj1:function(ge,R){ge.exports=h;function h(B){var p=B[0],S=B[1];return Math.sqrt(p*p+S*S)}},yG8O:function(ge,R){function h(B,p,S,E){!S||Object.defineProperty(B,p,{enumerable:S.enumerable,configurable:S.configurable,writable:S.writable,value:S.initializer?S.initializer.call(E):void 0})}ge.exports=h,ge.exports.__esModule=!0,ge.exports.default=ge.exports},yMAV:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Plan=void 0;var B=function(){function p(S,E){this.parentContext=S,this.rootRequest=E}return p}();R.Plan=B},yOY4:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Alpha=void 0;var B=Object.assign||function(J){for(var ce=1;ce<arguments.length;ce++){var G=arguments[ce];for(var Z in G)Object.prototype.hasOwnProperty.call(G,Z)&&(J[Z]=G[Z])}return J},p=function(){function J(ce,G){for(var Z=0;Z<G.length;Z++){var fe=G[Z];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(ce,fe.key,fe)}}return function(ce,G,Z){return G&&J(ce.prototype,G),Z&&J(ce,Z),ce}}(),S=h("q1tI"),E=Y(S),A=h("/FUP"),k=Y(A),M=h("THLb"),U=W(M),V=h("Nq3d"),$=Y(V);function W(J){if(J&&J.__esModule)return J;var ce={};if(J!=null)for(var G in J)Object.prototype.hasOwnProperty.call(J,G)&&(ce[G]=J[G]);return ce.default=J,ce}function Y(J){return J&&J.__esModule?J:{default:J}}function ee(J,ce){if(!(J instanceof ce))throw new TypeError("Cannot call a class as a function")}function ne(J,ce){if(!J)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ce&&(typeof ce=="object"||typeof ce=="function")?ce:J}function ie(J,ce){if(typeof ce!="function"&&ce!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ce);J.prototype=Object.create(ce&&ce.prototype,{constructor:{value:J,enumerable:!1,writable:!0,configurable:!0}}),ce&&(Object.setPrototypeOf?Object.setPrototypeOf(J,ce):J.__proto__=ce)}var re=R.Alpha=function(J){ie(ce,J);function ce(){var G,Z,fe,se;ee(this,ce);for(var ve=arguments.length,ae=Array(ve),j=0;j<ve;j++)ae[j]=arguments[j];return se=(Z=(fe=ne(this,(G=ce.__proto__||Object.getPrototypeOf(ce)).call.apply(G,[this].concat(ae))),fe),fe.handleChange=function(de){var ke=U.calculateChange(de,fe.props.hsl,fe.props.direction,fe.props.a,fe.container);ke&&typeof fe.props.onChange=="function"&&fe.props.onChange(ke,de)},fe.handleMouseDown=function(de){fe.handleChange(de),window.addEventListener("mousemove",fe.handleChange),window.addEventListener("mouseup",fe.handleMouseUp)},fe.handleMouseUp=function(){fe.unbindEventListeners()},fe.unbindEventListeners=function(){window.removeEventListener("mousemove",fe.handleChange),window.removeEventListener("mouseup",fe.handleMouseUp)},Z),ne(fe,se)}return p(ce,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var Z=this,fe=this.props.rgb,se=(0,k.default)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+fe.r+","+fe.g+","+fe.b+`, 0) 0%,
           rgba(`+fe.r+","+fe.g+","+fe.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:fe.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+fe.r+","+fe.g+","+fe.b+`, 0) 0%,
           rgba(`+fe.r+","+fe.g+","+fe.b+", 1) 100%)"},pointer:{left:0,top:fe.a*100+"%"}},overwrite:B({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return E.default.createElement("div",{style:se.alpha},E.default.createElement("div",{style:se.checkboard},E.default.createElement($.default,{renderers:this.props.renderers})),E.default.createElement("div",{style:se.gradient}),E.default.createElement("div",{style:se.container,ref:function(ae){return Z.container=ae},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},E.default.createElement("div",{style:se.pointer},this.props.pointer?E.default.createElement(this.props.pointer,this.props):E.default.createElement("div",{style:se.slider}))))}}]),ce}(S.PureComponent||S.Component);R.default=re},yXPU:function(ge,R){function h(p,S,E,A,k,M,U){try{var V=p[M](U),$=V.value}catch(W){E(W);return}V.done?S($):Promise.resolve($).then(A,k)}function B(p){return function(){var S=this,E=arguments;return new Promise(function(A,k){var M=p.apply(S,E);function U($){h(M,A,k,U,V,"next",$)}function V($){h(M,A,k,U,V,"throw",$)}U(void 0)})}}ge.exports=B,ge.exports.__esModule=!0,ge.exports.default=ge.exports},yZ5d:function(ge,R,h){"use strict";h.d(R,"a",function(){return ve});var B=h("lSNA"),p=h.n(B),S=h("lwsE"),E=h.n(S),A=h("W8MJ"),k=h.n(A),M=h("4cb6");function U(ae){var j=0;switch(ae){case"vec2":case"ivec2":j=2;break;case"vec3":case"ivec3":j=3;break;case"vec4":case"ivec4":case"mat2":j=4;break;case"mat3":j=9;break;case"mat4":j=16;break;default:}return j}var V=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function $(ae){var j={};return ae=ae.replace(V,function(de,ke,he){var Oe=he.split(":"),We=Oe[0].trim(),D="";switch(Oe.length>1&&(D=Oe[1].trim()),ke){case"bool":D=D==="true";break;case"float":case"int":D=Number(D);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":D?D=D.replace("[","").replace("]","").split(",").reduce(function(je,pt){return je.push(Number(pt.trim())),je},[]):D=new Array(U(ke)).fill(0);break;default:}return j[We]=D,"uniform ".concat(ke," ").concat(We,`;
`)}),{content:ae,uniforms:j}}function W(ae){return ae.filter(function(j,de,ke){return ke.indexOf(j)===de})}var Y,ee,ne;function ie(ae,j){var de=Object.keys(ae);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(ae);j&&(ke=ke.filter(function(he){return Object.getOwnPropertyDescriptor(ae,he).enumerable})),de.push.apply(de,ke)}return de}function re(ae){for(var j=1;j<arguments.length;j++){var de=arguments[j]!=null?arguments[j]:{};j%2?ie(Object(de),!0).forEach(function(ke){p()(ae,ke,de[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ae,Object.getOwnPropertyDescriptors(de)):ie(Object(de)).forEach(function(ke){Object.defineProperty(ae,ke,Object.getOwnPropertyDescriptor(de,ke))})}return ae}var J=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color) {
  bool selected = bool(v_PickingResult.a);

  if (selected) {
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(resultRGB, color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  return filterPickingColor(filterHighlightColor(color));
}
`,ce=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;

#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  // compares only in highlight stage
  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}`,G=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}`,Z=/precision\s+(high|low|medium)p\s+float/,fe=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,se=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,ve=(Y=Object(M.injectable)(),Y(ee=(ne=function(){function ae(){E()(this,ae),this.moduleCache={},this.rawContentCache={}}return k()(ae,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("picking",{vs:ce,fs:J}),this.registerModule("sdf2d",{vs:"",fs:G})}},{key:"registerModule",value:function(de,ke){if(!this.rawContentCache[de]){var he=ke.vs,Oe=he===void 0?"":he,We=ke.fs,D=We===void 0?"":We,je=ke.uniforms,pt=$(Oe),nt=pt.content,Lt=pt.uniforms,Gt=$(D),$e=Gt.content,jt=Gt.uniforms;this.rawContentCache[de]={fs:$e,uniforms:re(re(re({},Lt),jt),je),vs:nt}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(de){var ke=this;if(this.moduleCache[de])return this.moduleCache[de];var he=this.rawContentCache[de].vs||"",Oe=this.rawContentCache[de].fs||"",We=this.processModule(he,[],"vs"),D=We.content,je=We.includeList,pt=this.processModule(Oe,[],"fs"),nt=pt.content,Lt=pt.includeList,Gt=nt,$e=W(je.concat(Lt).concat(de)).reduce(function(jt,Be){return re(re({},jt),ke.rawContentCache[Be].uniforms)},{});return Z.test(nt)||(Gt=fe+nt),this.moduleCache[de]={fs:Gt.trim(),uniforms:$e,vs:D.trim()},this.moduleCache[de]}},{key:"processModule",value:function(de,ke,he){var Oe=this,We=de.replace(se,function(D,je){var pt=je.split(" "),nt=pt[0].replace(/"/g,"");if(ke.indexOf(nt)>-1)return"";var Lt=Oe.rawContentCache[nt][he];ke.push(nt);var Gt=Oe.processModule(Lt||"",ke,he),$e=Gt.content;return $e});return{content:We,includeList:ke}}}]),ae}(),ne))||ee)},yaXH:function(ge,R){},z4Hk:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.BindingWhenSyntax=void 0;var B=h("406g"),p=h("RR/i"),S=function(){function E(A){this._binding=A}return E.prototype.when=function(A){return this._binding.constraint=A,new B.BindingOnSyntax(this._binding)},E.prototype.whenTargetNamed=function(A){return this._binding.constraint=p.namedConstraint(A),new B.BindingOnSyntax(this._binding)},E.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(A){var k=A.target!==null&&!A.target.isNamed()&&!A.target.isTagged();return k},new B.BindingOnSyntax(this._binding)},E.prototype.whenTargetTagged=function(A,k){return this._binding.constraint=p.taggedConstraint(A)(k),new B.BindingOnSyntax(this._binding)},E.prototype.whenInjectedInto=function(A){return this._binding.constraint=function(k){return p.typeConstraint(A)(k.parentRequest)},new B.BindingOnSyntax(this._binding)},E.prototype.whenParentNamed=function(A){return this._binding.constraint=function(k){return p.namedConstraint(A)(k.parentRequest)},new B.BindingOnSyntax(this._binding)},E.prototype.whenParentTagged=function(A,k){return this._binding.constraint=function(M){return p.taggedConstraint(A)(k)(M.parentRequest)},new B.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorIs=function(A){return this._binding.constraint=function(k){return p.traverseAncerstors(k,p.typeConstraint(A))},new B.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorIs=function(A){return this._binding.constraint=function(k){return!p.traverseAncerstors(k,p.typeConstraint(A))},new B.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorNamed=function(A){return this._binding.constraint=function(k){return p.traverseAncerstors(k,p.namedConstraint(A))},new B.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorNamed=function(A){return this._binding.constraint=function(k){return!p.traverseAncerstors(k,p.namedConstraint(A))},new B.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorTagged=function(A,k){return this._binding.constraint=function(M){return p.traverseAncerstors(M,p.taggedConstraint(A)(k))},new B.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorTagged=function(A,k){return this._binding.constraint=function(M){return!p.traverseAncerstors(M,p.taggedConstraint(A)(k))},new B.BindingOnSyntax(this._binding)},E.prototype.whenAnyAncestorMatches=function(A){return this._binding.constraint=function(k){return p.traverseAncerstors(k,A)},new B.BindingOnSyntax(this._binding)},E.prototype.whenNoAncestorMatches=function(A){return this._binding.constraint=function(k){return!p.traverseAncerstors(k,A)},new B.BindingOnSyntax(this._binding)},E}();R.BindingWhenSyntax=S},z5Mu:function(ge,R,h){"use strict";h.d(R,"a",function(){return un});var B=h("J4zp"),p=h.n(B),S=h("o0o1"),E=h.n(S),A=h("yXPU"),k=h.n(A),M=h("yG8O"),U=h.n(M),V=h("lwsE"),$=h.n(V),W=h("W8MJ"),Y=h.n(W),ee=h("U+yc"),ne=h.n(ee),ie=h("1ABj"),re=h("4cb6"),J=h("+uE7"),ce=function ln(){$()(this,ln),this.index=void 0},G=function ln(){$()(this,ln),this.name=void 0,this.data=void 0,this.execute=void 0,this.tearDown=void 0},Z=function(){function ln(){$()(this,ln),this.name=void 0,this.refCount=0,this.hasSideEffect=!1,this.devirtualize=[],this.destroy=[],this.reads=[],this.writes=[]}return Y()(ln,[{key:"read",value:function(Ft){return this.reads.find(function(Pn){return Pn.index===Ft.index})||this.reads.push(Ft),Ft}},{key:"sample",value:function(Ft){return this.read(Ft),Ft}},{key:"write",value:function(Ft,Pn){var lr=this.writes.find(function(Dn){return Dn.index===Pn.index});if(lr)return Pn;var hn=Ft.getResourceNode(Pn);hn.resource.version++,hn.resource.imported&&(this.hasSideEffect=!0);var On=Ft.createResourceNode(hn.resource),jn=Ft.getResourceNode(On);return jn.writer=this,this.writes.push(On),On}}]),ln}(),fe=h("7W2i"),se=h.n(fe),ve=h("a1gu"),ae=h.n(ve),j=h("Nsbk"),de=h.n(j),ke=function ln(){$()(this,ln),this.first=void 0,this.last=void 0};function he(ln){var Fn=Oe();return function(){var Pn=de()(ln),lr;if(Fn){var hn=de()(this).constructor;lr=Reflect.construct(Pn,arguments,hn)}else lr=Pn.apply(this,arguments);return ae()(this,lr)}}function Oe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(ln){return!1}}var We=function(ln){se()(Ft,ln);var Fn=he(Ft);function Ft(){var Pn;$()(this,Ft);for(var lr=arguments.length,hn=new Array(lr),On=0;On<lr;On++)hn[On]=arguments[On];return Pn=Fn.call.apply(Fn,[this].concat(hn)),Pn.version=0,Pn.refs=0,Pn.name=void 0,Pn.imported=void 0,Pn.priority=void 0,Pn.discardStart=!0,Pn.discardEnd=!1,Pn.descriptor=void 0,Pn.resource=void 0,Pn}return Y()(Ft,[{key:"preExecuteDestroy",value:function(){this.discardEnd=!0}},{key:"postExecuteDestroy",value:function(){!this.imported}},{key:"postExecuteDevirtualize",value:function(){this.discardStart=!1}},{key:"preExecuteDevirtualize",value:function(){!this.imported}}]),Ft}(ke),D=function ln(){$()(this,ln),this.resource=void 0,this.writer=void 0,this.readerCount=0,this.version=void 0},je,pt,nt,Lt,Gt,$e;function jt(ln,Fn){var Ft;if(typeof Symbol=="undefined"||ln[Symbol.iterator]==null){if(Array.isArray(ln)||(Ft=Be(ln))||Fn&&ln&&typeof ln.length=="number"){Ft&&(ln=Ft);var Pn=0,lr=function(){};return{s:lr,n:function(){return Pn>=ln.length?{done:!0}:{done:!1,value:ln[Pn++]}},e:function(ft){throw ft},f:lr}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var hn=!0,On=!1,jn;return{s:function(){Ft=ln[Symbol.iterator]()},n:function(){var ft=Ft.next();return hn=ft.done,ft},e:function(ft){On=!0,jn=ft},f:function(){try{!hn&&Ft.return!=null&&Ft.return()}finally{if(On)throw jn}}}}function Be(ln,Fn){if(!!ln){if(typeof ln=="string")return pe(ln,Fn);var Ft=Object.prototype.toString.call(ln).slice(8,-1);if(Ft==="Object"&&ln.constructor&&(Ft=ln.constructor.name),Ft==="Map"||Ft==="Set")return Array.from(ln);if(Ft==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ft))return pe(ln,Fn)}}function pe(ln,Fn){(Fn==null||Fn>ln.length)&&(Fn=ln.length);for(var Ft=0,Pn=new Array(Fn);Ft<Fn;Ft++)Pn[Ft]=ln[Ft];return Pn}var un=(je=Object(re.injectable)(),pt=Object(re.inject)(J.a.RenderEngine),je(nt=(Lt=($e=function(){function ln(){$()(this,ln),this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[],U()(this,"engine",Gt,this)}return Y()(ln,[{key:"execute",value:function(){var Fn=k()(E.a.mark(function Pn(lr){return E.a.wrap(function(On){for(;;)switch(On.prev=On.next){case 0:return this.compile(),On.next=3,this.executePassNodes(lr);case 3:case"end":return On.stop()}},Pn,this)}));function Ft(Pn){return Fn.apply(this,arguments)}return Ft}()},{key:"tearDown",value:function(){this.frameGraphPasses.forEach(function(Ft){Ft.tearDown&&Ft.tearDown()}),this.reset()}},{key:"addPass",value:function(Ft,Pn,lr,hn){var On=new G;On.execute=lr,hn&&(On.tearDown=hn),On.name=Ft;var jn=new Z;return jn.name=Ft,this.passNodes.push(jn),this.frameGraphPasses.push(On),Pn(this,jn,On),On}},{key:"getPass",value:function(Ft){return this.frameGraphPasses.find(function(Pn){return Pn.name===Ft})}},{key:"compile",value:function(){var Ft=this,Pn=jt(this.passNodes),lr;try{for(Pn.s();!(lr=Pn.n()).done;){var hn=lr.value;hn.refCount=hn.writes.length+(hn.hasSideEffect?1:0),hn.reads.forEach(function(oa){Ft.resourceNodes[oa.index].readerCount++})}}catch(oa){Pn.e(oa)}finally{Pn.f()}var On=[],jn=jt(this.resourceNodes),Dn;try{for(jn.s();!(Dn=jn.n()).done;){var ft=Dn.value;ft.readerCount===0&&On.push(ft)}}catch(oa){jn.e(oa)}finally{jn.f()}for(;On.length;){var Ut=On.pop(),ct=Ut&&Ut.writer;if(ct&&--ct.refCount==0){var Ct=jt(ct.reads),kt;try{for(Ct.s();!(kt=Ct.n()).done;){var yt=kt.value,tt=this.resourceNodes[yt.index];--tt.readerCount==0&&On.push(tt)}}catch(oa){Ct.e(oa)}finally{Ct.f()}}}this.resourceNodes.forEach(function(oa){oa.resource.refs+=oa.readerCount});var I=jt(this.passNodes),Mn;try{for(I.s();!(Mn=I.n()).done;){var dt=Mn.value;if(!!dt.refCount){var vt=jt(dt.reads),Bt;try{for(vt.s();!(Bt=vt.n()).done;){var me=Bt.value,ue=this.resourceNodes[me.index].resource;ue.first=ue.first?ue.first:dt,ue.last=dt}}catch(oa){vt.e(oa)}finally{vt.f()}var Re=jt(dt.writes),Rt;try{for(Re.s();!(Rt=Re.n()).done;){var Kt=Rt.value,Bn=this.resourceNodes[Kt.index].resource;Bn.first=Bn.first?Bn.first:dt,Bn.last=dt}}catch(oa){Re.e(oa)}finally{Re.f()}}}}catch(oa){I.e(oa)}finally{I.f()}for(var Nr=0;Nr<2;Nr++){var Rn=jt(this.resourceNodes),Cr;try{for(Rn.s();!(Cr=Rn.n()).done;){var tr=Cr.value,jr=tr.resource;if(jr.priority===Nr&&jr.refs){var zr=jr.first,Ua=jr.last;zr&&Ua&&(zr.devirtualize.push(jr),Ua.destroy.push(jr))}}}catch(oa){Rn.e(oa)}finally{Rn.f()}}}},{key:"executePassNodes",value:function(){var Fn=k()(E.a.mark(function Pn(lr){var hn,On,jn,Dn,ft,Ut,ct,Ct,kt,yt,tt,I,Mn,dt,vt,Bt,me;return E.a.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:hn=jt(this.passNodes.entries()),Re.prev=1,hn.s();case 3:if((On=hn.n()).done){Re.next=18;break}if(jn=p()(On.value,2),Dn=jn[0],ft=jn[1],!ft.refCount){Re.next=16;break}Ut=jt(ft.devirtualize);try{for(Ut.s();!(ct=Ut.n()).done;)Ct=ct.value,Ct.preExecuteDevirtualize(this.engine)}catch(Rt){Ut.e(Rt)}finally{Ut.f()}kt=jt(ft.destroy);try{for(kt.s();!(yt=kt.n()).done;)tt=yt.value,tt.preExecuteDestroy(this.engine)}catch(Rt){kt.e(Rt)}finally{kt.f()}return Re.next=12,this.frameGraphPasses[Dn].execute(this,this.frameGraphPasses[Dn],lr);case 12:I=jt(ft.devirtualize);try{for(I.s();!(Mn=I.n()).done;)dt=Mn.value,dt.postExecuteDevirtualize(this.engine)}catch(Rt){I.e(Rt)}finally{I.f()}vt=jt(ft.destroy);try{for(vt.s();!(Bt=vt.n()).done;)me=Bt.value,me.postExecuteDestroy(this.engine)}catch(Rt){vt.e(Rt)}finally{vt.f()}case 16:Re.next=3;break;case 18:Re.next=23;break;case 20:Re.prev=20,Re.t0=Re.catch(1),hn.e(Re.t0);case 23:return Re.prev=23,hn.f(),Re.finish(23);case 26:this.reset();case 27:case"end":return Re.stop()}},Pn,this,[[1,20,23,26]])}));function Ft(Pn){return Fn.apply(this,arguments)}return Ft}()},{key:"reset",value:function(){this.passNodes=[],this.resourceNodes=[],this.frameGraphPasses=[]}},{key:"getResourceNode",value:function(Ft){return this.resourceNodes[Ft.index]}},{key:"createResourceNode",value:function(Ft){var Pn=new D;Pn.resource=Ft,Pn.version=Ft.version,this.resourceNodes.push(Pn);var lr=new ce;return lr.index=this.resourceNodes.length-1,lr}},{key:"createTexture",value:function(Ft,Pn,lr){var hn=new We;return hn.name=Pn,hn.descriptor=lr,this.createResourceNode(hn)}},{key:"createRenderTarget",value:function(Ft,Pn,lr){var hn=new We;return hn.name=Pn,hn.descriptor=lr,this.createResourceNode(hn)}},{key:"present",value:function(Ft){this.addPass("Present",function(Pn,lr){lr.read(Ft),lr.hasSideEffect=!0},k()(E.a.mark(function Pn(){return E.a.wrap(function(hn){for(;;)switch(hn.prev=hn.next){case 0:case"end":return hn.stop()}},Pn)})))}}]),ln}(),$e),Gt=ne()(Lt.prototype,"engine",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lt))||nt)},zLyj:function(ge,R){ge.exports=h;function h(B,p){return B[0]=Math.ceil(p[0]),B[1]=Math.ceil(p[1]),B}},zs7G:function(ge,R,h){"use strict";var B=h("VTBJ"),p=h("q1tI"),S={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},E=S,A=h("6VBw"),k=function(V,$){return p.createElement(A.a,Object(B.a)(Object(B.a)({},V),{},{ref:$,icon:E}))};k.displayName="DoubleRightOutlined";var M=R.a=p.forwardRef(k)},zxMA:function(ge,R,h){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.QueryableString=void 0;var B=function(){function p(S){this.str=S}return p.prototype.startsWith=function(S){return this.str.indexOf(S)===0},p.prototype.endsWith=function(S){var E="",A=S.split("").reverse().join("");return E=this.str.split("").reverse().join(""),this.startsWith.call({str:E},A)},p.prototype.contains=function(S){return this.str.indexOf(S)!==-1},p.prototype.equals=function(S){return this.str===S},p.prototype.value=function(){return this.str},p}();R.QueryableString=B}}]);
